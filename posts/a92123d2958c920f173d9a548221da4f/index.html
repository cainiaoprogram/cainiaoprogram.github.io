<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenDayLight&#43;Mininet&#43;Postman下发流表实验 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenDayLight&#43;Mininet&#43;Postman下发流表实验" />
<meta property="og:description" content="OpenDayLight&#43;Mininet&#43;Postman下发流表实验 VM实验环境笔记本环境Tips1
Tips2
任务目的任务内容实验原理一、 流表结构二、 匹配域解析流程三、 OpenFlow1.3流表匹配流程 实验步骤Step1 开ODL 控制器Step2 VM ifconfig查看地址，电脑登陆页面Step3 Mininet连接ODL，查看topo结构Step4 Windows下打开Postman查看交换机信息L2层流表下发与验证Step5 下发第一条流表，选择PUT，填写URL和Headers信息Step6 填写bodyStep7 SEND 发送下发流表，在mininet下查找流表Step8 发送第二条流表Step9 SEND 发送下发流表，在mininet下查找流表STEP10 测试流表是否有效STEP11 删除下发的两条流表，mininet查看是否删除 L3层流表下发L4层流表下发 实验参考 VM实验环境 设备软件环境硬件环境ControllerUbuntu 14.04 OpenDaylight LithiumCPU：2核 内存：4G 磁盘：20GMininetUbuntu 14.04 Mininet 2.3.0CPU：2核 内存：4G 磁盘：20G 笔记本环境 设备软件环境硬件环境postmanPostman-win64-7.9.0Intel® Core™ i5-1035G1 Processor 16G DDR4Chrome89.0.4389.82(正式版本)(64 位)Intel® Core™ i5-1035G1 Processor 16G DDR4 Tips1
postman 不需要安装到 vm linux系统内，在windows系统内使用即可
Tips2
ODL 登录网页页面同样不需要再linux系统内进行，依旧在windows 系统下 chrome brower 登录
需要postman软件包的滴滴我 任务目的 1、掌握OpenFlow流表相关知识，理解SDN网络中L2，L3，L4层流表的概念。
2、学习并熟练掌握Postman工具下发L2，L3，L4层流表。
任务内容 1、学习OpenFlow流表的组成，包头域的解析流程及流表的匹配流程。
2、熟悉OpenDaylight对接Mininet的使用。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a92123d2958c920f173d9a548221da4f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-20T17:37:04+08:00" />
<meta property="article:modified_time" content="2021-03-20T17:37:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenDayLight&#43;Mininet&#43;Postman下发流表实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>OpenDayLight+Mininet+Postman下发流表实验</h4> 
 <ul><li><a href="#VM_1" rel="nofollow">VM实验环境</a></li><li><a href="#_6" rel="nofollow">笔记本环境</a></li><li><ul><li><a href="#font_colordd0000Tips1fontbr__11" rel="nofollow"><font color="#dd0000">Tips1</font><br></a></li><li><a href="#font_colordd0000Tips2fontbr__13" rel="nofollow"><font color="#dd0000">Tips2</font><br></a></li></ul> 
  </li><li><a href="#_18" rel="nofollow">任务目的</a></li><li><a href="#_21" rel="nofollow">任务内容</a></li><li><a href="#_25" rel="nofollow">实验原理</a></li><li><ul><li><a href="#__28" rel="nofollow">一、 流表结构</a></li><li><a href="#__61" rel="nofollow">二、 匹配域解析流程</a></li><li><a href="#_OpenFlow13_78" rel="nofollow">三、 OpenFlow1.3流表匹配流程</a></li></ul> 
  </li><li><a href="#_84" rel="nofollow">实验步骤</a></li><li><ul><li><a href="#Step1_ODL__85" rel="nofollow">Step1 开ODL 控制器</a></li><li><a href="#Step2_VM_ifconfig_95" rel="nofollow">Step2 VM ifconfig查看地址，电脑登陆页面</a></li><li><a href="#Step3_MininetODLtopo_108" rel="nofollow">Step3 Mininet连接ODL，查看topo结构</a></li><li><a href="#Step4_WindowsPostman_129" rel="nofollow">Step4 Windows下打开Postman查看交换机信息</a></li><li><a href="#L2_138" rel="nofollow">L2层流表下发与验证</a></li><li><ul><li><a href="#Step5_PUTURLHeaders_141" rel="nofollow">Step5 下发第一条流表，选择PUT，填写URL和Headers信息</a></li><li><a href="#Step6_body_153" rel="nofollow">Step6 填写body</a></li><li><a href="#Step7_SEND_mininet_195" rel="nofollow">Step7 SEND 发送下发流表，在mininet下查找流表</a></li><li><a href="#Step8__202" rel="nofollow">Step8 发送第二条流表</a></li><li><a href="#Step9_SEND_mininet_244" rel="nofollow">Step9 SEND 发送下发流表，在mininet下查找流表</a></li><li><a href="#STEP10__247" rel="nofollow">STEP10 测试流表是否有效</a></li><li><a href="#STEP11_mininet_256" rel="nofollow">STEP11 删除下发的两条流表，mininet查看是否删除</a></li></ul> 
   </li><li><a href="#L3_263" rel="nofollow">L3层流表下发</a></li><li><a href="#L4_380" rel="nofollow">L4层流表下发</a></li></ul> 
  </li><li><a href="#_505" rel="nofollow">实验参考</a></li></ul> 
</div> 
<p></p> 
<h2><a id="VM_1"></a>VM实验环境</h2> 
<table><thead><tr><th>设备</th><th>软件环境</th><th>硬件环境</th></tr></thead><tbody><tr><td>Controller</td><td>Ubuntu 14.04 OpenDaylight Lithium</td><td>CPU：2核 内存：4G 磁盘：20G</td></tr><tr><td>Mininet</td><td>Ubuntu 14.04 Mininet 2.3.0</td><td>CPU：2核 内存：4G 磁盘：20G</td></tr></tbody></table> 
<h2><a id="_6"></a>笔记本环境</h2> 
<table><thead><tr><th>设备</th><th>软件环境</th><th>硬件环境</th></tr></thead><tbody><tr><td>postman</td><td>Postman-win64-7.9.0</td><td>Intel® Core™ i5-1035G1 Processor 16G DDR4</td></tr><tr><td>Chrome</td><td>89.0.4389.82(正式版本)(64 位)</td><td>Intel® Core™ i5-1035G1 Processor 16G DDR4</td></tr></tbody></table> 
<h3><a id="font_colordd0000Tips1fontbr__11"></a><font color="#dd0000">Tips1</font><br></h3> 
<p>postman 不需要安装到 vm linux系统内，在windows系统内使用即可</p> 
<h3><a id="font_colordd0000Tips2fontbr__13"></a><font color="#dd0000">Tips2</font><br></h3> 
<p>ODL 登录网页页面同样不需要再linux系统内进行，依旧在windows 系统下 chrome brower 登录</p> 
<pre><code>需要postman软件包的滴滴我
</code></pre> 
<h2><a id="_18"></a>任务目的</h2> 
<p>1、掌握OpenFlow流表相关知识，理解SDN网络中L2，L3，L4层流表的概念。<br> 2、学习并熟练掌握Postman工具下发L2，L3，L4层流表。</p> 
<h2><a id="_21"></a>任务内容</h2> 
<p>1、学习OpenFlow流表的组成，包头域的解析流程及流表的匹配流程。<br> 2、熟悉OpenDaylight对接Mininet的使用。<br> 3、使用Postman工具，下发相应的L2，L3，L4层流表，并验证。</p> 
<h2><a id="_25"></a>实验原理</h2> 
<p>SDN的设计目标之一就是将网络设备的控制功能与转发功能进行分离，进而将控制功能全部集中到远程的控制器上完成，而SDN交换机只负责在本地做简单高速的数据转发。在SDN交换机运行的过程中，其数据转发的依据就是流表。</p> 
<h3><a id="__28"></a>一、 流表结构</h3> 
<p>所谓流表，其实可被视作是SDN对网络设备的数据转发功能的一种抽象。在传统网络设备中，交换机和路由器的数据转发需要依赖设备中保存的二层MAC地址转发表或者三层的IP地址路由表，SDN交换机中使用的流表也是如此，不过在它的表项中整合了网络中各个层次的网络配置信息，从而在进行数据转发时可以使用更丰富的规则。其流表中的每个表项结果如下图所示：</p> 
<p><img src="https://images2.imgbox.com/e1/fa/hODrtOKf_o.png" alt="在这里插入图片描述"><br> • match fields: to match against packets. These consist of the ingress port and packet headers, and optionally metadata specified by a previous table.</p> 
<p>• priority: matching precedence of the flow entry</p> 
<p>• counters: to update for matching packets</p> 
<p>• instructions to modify the action set or pipeline processing</p> 
<p>• timeouts: maximum amount of time or idle time before flow is expired by the switch</p> 
<p>• cookie: opaque data value chosen by the controller. May be used by the controller to filter flow statistics, flow modification and flow deletion, not used when processing packets.</p> 
<pre><code>•match fields:它们由入口端口和包头组成以及以及前一个表指定的元数据组成。

•priority:流表项的匹配优先级

•countres:更新匹配的数据包

•instructions:修改动作集或流水线处理的说明

•timeout:交换机流匹配最大计数时间和流有效时间
idle_time 匹配流表的最大计数时间
hard_time 下发流表后有效时间

•cookie:控制器选择的不透明数据值。控制器可以用来过滤流量统计、流修改和流删除信息，处理报文时不使用。
</code></pre> 
<h3><a id="__61"></a>二、 匹配域解析流程</h3> 
<p>当SDN交换机接收到一个数据包时，将按照优先级从table0依次匹配其本地保存的流表中的表项，并以发生具有最高优先级的匹配表项作为匹配结果，并根据相应的动作对数据包进行操作。同时，一旦匹配成功，对应的计数器将更新；而如果没能找到匹配的表项，则将数据包转发给控制器。</p> 
<p>OpenFlow交换机对数据包头的解析和匹配过程的细节操作如图所示：</p> 
<p><img src="https://images2.imgbox.com/e8/c6/RKCMO640_o.png" alt="在这里插入图片描述"></p> 
<p>1、初始化包头域，按照包头域的组成—设置每个字段，其中入端口是接收数据包的物理端口。</p> 
<p>2、如果数据包类型是VLAN（0x8100），那么就使用VLAN<br> ID和PCP字段进行表查找，解封以太网类型为先的以太网类型解析做准备。</p> 
<p>3、（可选）如果是ARP数据包（0x0806）,那么匹配字段就可能包含IP源和目的地址。</p> 
<p>4、如果是IP数据包（0x0800）,那么匹配字段就会包含IP首部。如果IP数据包的分段偏移量不为0或者设置了多个分段bit位，那么将所有传输端口设为0。如果IP数据包在IP协议族中的编号为6或者17（分别是TCP/UDP类型），那么匹配字段包含传输端口。如果编号为1（ICMP数据包）则包含Type和Code字段。</p> 
<h3><a id="_OpenFlow13_78"></a>三、 OpenFlow1.3流表匹配流程</h3> 
<p>OpenFlow1.3匹配流程图与之前版本相比多了一个table-miss流表项，事实上此前版本就已经存在table-miss概念，只是没有在流程图中呈现出来而已。Of1.3版本的匹配流程大致如下图所示：</p> 
<p><img src="https://images2.imgbox.com/6c/8a/Wy9y5r0R_o.png" alt="在这里插入图片描述"><br> 首先SDN交换机解析进入设备的报文，然后从table0开始匹配，按照优先级高低依次匹配该流表中的表项，一个报文在一个流表中只会匹配上一条流表项。通常根据报文的类型，报文头的字段例如源MAC地址、目的MAC地址、源IP地址、目的IP地址等进行匹配，大部分匹配还支持掩码进行更精确、灵活的匹配。也可以通过报文的入端口或者元数据信息来进行报文的匹配，一个流表项中可以同时存在多个匹配项，一个报文需要同时普票流表项中所有匹配项才能匹配该流表项。报文匹配按照现有的报文字段进行，比如前一个流表通过apply actions改变了该报文的某个字段，则下一个表现按照修改后的字段进行匹配。如果匹配成功。则按照指令集里的动作更新动作集，活更新报文/匹配集字段，或更新元数据和计数器。根据指令是否继续前往下一个流表，不继续则终止匹配流程执行动作集，如果指令要去继续前往下一流表则继续匹配，下一个流表的ID需要比当前流表ID大。当报文匹配失败，如果存在无匹配流表项（table-miss）就按照该表项执行指令，一般是将报文转发给控制器、丢弃或者转发给其他流表。如果没有table-miss表项则默认丢弃该报文。</p> 
<h2><a id="_84"></a>实验步骤</h2> 
<h3><a id="Step1_ODL__85"></a>Step1 开ODL 控制器</h3> 
<pre><code class="prism language-c"><span class="token macro property">#cd distribution-karaf-0.3.0-Lithium/</span>
#<span class="token punctuation">.</span><span class="token operator">/</span>bin<span class="token operator">/</span>karaf
</code></pre> 
<p>如下：<br> <img src="https://images2.imgbox.com/d2/e2/T1ZAOTt2_o.png" alt="在这里插入图片描述"></p> 
<p><font color="#dd0000">Tips：</font><br>切记这里多等一会不要着急登录页面</p> 
<h3><a id="Step2_VM_ifconfig_95"></a>Step2 VM ifconfig查看地址，电脑登陆页面</h3> 
<p><img src="https://images2.imgbox.com/d3/7b/J0enhZ3I_o.png" alt="在这里插入图片描述"></p> 
<p>看到这里有两个地址，请记住它，<br> 我这里第一个是192.168.137.143，第二个都是127.0.0.1<br> 这里只有mininet连接ODL用到127.0.0.1，其他都是用另一个地址。</p> 
<p>然后用你的电脑登录网址http:// [IP address]:8080/index.html，username 和 password 都是admin。(不是VM 里的firefox的浏览器)</p> 
<p>登录结果如下：<br> <img src="https://images2.imgbox.com/f4/22/ORFboTb4_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Step3_MininetODLtopo_108"></a>Step3 Mininet连接ODL，查看topo结构</h3> 
<pre><code class="prism language-c"><span class="token macro property">#mn --custom example1.py --topo mytopo --controller=remote,ip=127.0.0.1,port=6633</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/72/b7/gT9OA6dC_o.png" alt="在这里插入图片描述"></p> 
<pre><code>这里注意看自己有么有连上ODL controller，还有就是地址注意是127.0.0.1，
没有连接上控制器的同学还有不知道为什么两个地址是这样分配的评论区问。
</code></pre> 
<p>在上面界面下pingall下</p> 
<pre><code class="prism language-c">mininet<span class="token operator">&gt;</span>pingall
</code></pre> 
<p>返回本机电脑网页reload下可以看到topo</p> 
<p><img src="https://images2.imgbox.com/29/5f/LOYsbVpA_o.png" alt="在这里插入图片描述"><br> 细致topo图如下：<br> <img src="https://images2.imgbox.com/7f/43/JXX7xk94_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="Step4_WindowsPostman_129"></a>Step4 Windows下打开Postman查看交换机信息</h3> 
<p>Basic Auth页签，Username字段填写admin，Password字段填写admin完成认证。</p> 
<p>提交方式为GET，URL地址栏中输入http://192.168.137.143:8080/restconf/operational/network-topology:network-topology ，设置完成，单击Send按钮，获取交换机id信息输入。</p> 
<pre><code>这里ip地址每个人不一样，自己在VM里用ifconfig查看
</code></pre> 
<p><img src="https://images2.imgbox.com/eb/22/QTIxmXS9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="L2_138"></a>L2层流表下发与验证</h3> 
<p>L2层即对应OSI模型的二层，也就是说通过匹配源MAC（Ether source）、目的MAC地址（Ether dst）、以太网类型（Ether Type）VLAN id、VLAN优先级等字段来实现流的转发。本实验将基于源和目的MAC进行数据流的转发。</p> 
<h4><a id="Step5_PUTURLHeaders_141"></a>Step5 下发第一条流表，选择PUT，填写URL和Headers信息</h4> 
<p>选择提交方式“PUT”。<br> URL地址栏输入如下形式的地址：http://{controllerip}:8080/restconf/config/opendaylight-inventory:nodes/node/{node-id}/table/{table-id}/flow/{flow-id}。</p> 
<p>其中，{controller-ip}为控制器的ip地址，node-id为上面获取到的交换机id信息，table-id这里为0，flow-id根据下发不同流表变化，可自定义。</p> 
<p>本实验URL地址栏输入如下地址：<br> http://192.168.137.143:8080/restconf/config/opendaylight-inventory:nodes/node/openflow:1/table/0/flow/107</p> 
<p>填写Headers信息，如下图所示<br> <img src="https://images2.imgbox.com/b3/ca/TpMHc9Vu_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Step6_body_153"></a>Step6 填写body</h4> 
<p>流表：匹配源MAC(host1)为7e:24:bb:47:6f:58，目的MAC(host2)为42:30:90:5d:df:02的流量，出端口为2。</p> 
<p>“body”中选择“raw”，格式为XML（application/xml），并填写如下消息体：</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>source<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>address<span class="token operator">&gt;</span><span class="token number">7</span>e<span class="token punctuation">:</span><span class="token number">24</span><span class="token punctuation">:</span>bb<span class="token punctuation">:</span><span class="token number">47</span><span class="token punctuation">:</span><span class="token number">6f</span><span class="token punctuation">:</span><span class="token number">58</span><span class="token operator">&lt;</span><span class="token operator">/</span>address<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>source<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>destination<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>address<span class="token operator">&gt;</span><span class="token number">42</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">90</span><span class="token punctuation">:</span><span class="token number">5</span>d<span class="token punctuation">:</span>df<span class="token punctuation">:</span><span class="token number">02</span><span class="token operator">&lt;</span><span class="token operator">/</span>address<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>destination<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">107</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/51/01/VNpD0Etg_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Step7_SEND_mininet_195"></a>Step7 SEND 发送下发流表，在mininet下查找流表</h4> 
<pre><code class="prism language-c">mininet<span class="token operator">&gt;</span>sh ovs<span class="token operator">-</span>vsctl dump<span class="token operator">-</span>flows s1
</code></pre> 
<p>可以看到有priority=200的流表<br> <img src="https://images2.imgbox.com/68/37/Q5a4CSae_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Step8__202"></a>Step8 发送第二条流表</h4> 
<p>流表：匹配源MAC(host2)为42:30:90:5d:df:02的流量，目的MAC(host1)为7e:24:bb:47:6f:58，出端口为1。<br> <img src="https://images2.imgbox.com/2a/3b/kTQU9OhQ_o.png" alt="在这里插入图片描述"></p> 
<p>“body”中选择“raw”，格式为XML（application/xml），并填写如下消息体：</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>source<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>address<span class="token operator">&gt;</span><span class="token number">42</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">90</span><span class="token punctuation">:</span><span class="token number">5</span>d<span class="token punctuation">:</span>df<span class="token punctuation">:</span><span class="token number">02</span><span class="token operator">&lt;</span><span class="token operator">/</span>address<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>source<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>destination<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>address<span class="token operator">&gt;</span><span class="token number">7</span>e<span class="token punctuation">:</span><span class="token number">24</span><span class="token punctuation">:</span>bb<span class="token punctuation">:</span><span class="token number">47</span><span class="token punctuation">:</span><span class="token number">6f</span><span class="token punctuation">:</span><span class="token number">58</span><span class="token operator">&lt;</span><span class="token operator">/</span>address<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>destination<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">108</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="Step9_SEND_mininet_244"></a>Step9 SEND 发送下发流表，在mininet下查找流表</h4> 
<p>可以看到两条priority=200的流表项，分别对应刚刚的下发的两条刘表<br> <img src="https://images2.imgbox.com/c0/48/CFJIZGSS_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="STEP10__247"></a>STEP10 测试流表是否有效</h4> 
<p>先后用用下列命令测试连通性和查看数组是否有增加</p> 
<pre><code class="prism language-c">mininet<span class="token operator">&gt;</span>h1 ping h2
mininet<span class="token operator">&gt;</span>h2 ping h1
sh ovs<span class="token operator">-</span>ofctl dump<span class="token operator">-</span>flows s1
</code></pre> 
<p><img src="https://images2.imgbox.com/37/d7/tSlu5aVD_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="STEP11_mininet_256"></a>STEP11 删除下发的两条流表，mininet查看是否删除</h4> 
<p><img src="https://images2.imgbox.com/9c/6b/9DvJqyii_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ba/77/Gyb6Id7k_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/09/65/Xb1CGVha_o.png" alt="在这里插入图片描述"></p> 
<pre><code>L3层L4层就简写了，给出关键步骤，仅仅给出下发过程，自行检验
</code></pre> 
<h3><a id="L3_263"></a>L3层流表下发</h3> 
<p>L3层对应OSI模型的三层，三层流表主要匹配的是IP包的协议类型和IP地址。</p> 
<p><img src="https://images2.imgbox.com/c1/cf/ZuwWds8o_o.png" alt="在这里插入图片描述"><br> URL地址栏输入：http://192.168.137.143:8080/restconf/config/opendaylight-inventory:nodes/node/openflow:1/table/0/flow/111<br> 填写Hearders信息<br> “body”中选择“raw”，格式为XML（application/xml）<br> 流表：匹配源IP地址为10.0.0.2/32的报文，并将其转发到1端口<br> 匹配源IP地址为10.0.0.1/32的报文，并将其转发到2端口。</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token number">2048</span><span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ipv4<span class="token operator">-</span>source<span class="token operator">&gt;</span><span class="token number">10.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span><span class="token operator">&lt;</span><span class="token operator">/</span>ipv4<span class="token operator">-</span>source<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">111</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<p>URL地址栏输入：http://192.168.137.143:8080/restconf/config/opendaylight-inventory:nodes/node/openflow:1/table/0/flow/112<br> 填写Hearders信息<br> “body”中选择“raw”，格式为XML（application/xml）<br> 流表：匹配源IP地址为10.0.0.2/32的报文，并将其转发到1端口</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token number">2048</span><span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ipv4<span class="token operator">-</span>source<span class="token operator">&gt;</span><span class="token number">10.0</span><span class="token number">.0</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span><span class="token operator">&lt;</span><span class="token operator">/</span>ipv4<span class="token operator">-</span>source<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">112</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<p>URL地址栏输入：http://192.168.137.143:8080/restconf/config/opendaylight-inventory:nodes/node/openflow:1/table/0/flow/113<br> 填写Hearders信息<br> “body”中选择“raw”，格式为XML（application/xml）<br> 流表：下发arp匹配流表</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token number">2054</span><span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">113</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>NORMAL<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>max<span class="token operator">-</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>max<span class="token operator">-</span>length<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="L4_380"></a>L4层流表下发</h3> 
<p>L4对应的OSI模型中的四层，即流表对应的TCP/UDP源端口（TCP/UDP src port）、TCP/UDP目的端口号（TCP/UDP dst port）字段。本实验匹配TCP目的端口</p> 
<p>URL地址栏输入<br> http://192.168.137.143：8080/restconf/config/opendaylight-inventory:nodes/node/openflow:1/table/0/flow/117<br> 填写Hearders信息<br> “body”中选择“raw”，格式为XML（application/xml）】<br> 匹配到目的IP地址为10.0.0.1/32且目的端口为5001的TCP报文，将其转发到2端口</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>tcp<span class="token operator">-</span>destination<span class="token operator">-</span>port<span class="token operator">&gt;</span><span class="token number">5001</span><span class="token operator">&lt;</span><span class="token operator">/</span>tcp<span class="token operator">-</span>destination<span class="token operator">-</span>port<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token number">2048</span><span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ipv4<span class="token operator">-</span>destination<span class="token operator">&gt;</span><span class="token number">10.0</span><span class="token number">.0</span><span class="token number">.1</span><span class="token operator">/</span><span class="token number">32</span><span class="token operator">&lt;</span><span class="token operator">/</span>ipv4<span class="token operator">-</span>destination<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ip<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ip<span class="token operator">-</span>protocol<span class="token operator">&gt;</span><span class="token number">6</span><span class="token operator">&lt;</span><span class="token operator">/</span>ip<span class="token operator">-</span>protocol<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ip<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">117</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<p>URL地址栏输入<br> http://192.168.137.143：8080/restconf/config/opendaylight-inventory:nodes/node/openflow:1/table/0/flow/117<br> 填写Hearders信息<br> “body”中选择“raw”，格式为XML（application/xml）<br> 匹配到目的IP地址为10.0.0.2/32且目的端口为5001的TCP报文，将其转发到1端口</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token number">2048</span><span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ipv4<span class="token operator">-</span>destination<span class="token operator">&gt;</span><span class="token number">10.0</span><span class="token number">.0</span><span class="token number">.2</span><span class="token operator">/</span><span class="token number">32</span><span class="token operator">&lt;</span><span class="token operator">/</span>ipv4<span class="token operator">-</span>destination<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ip<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ip<span class="token operator">-</span>protocol<span class="token operator">&gt;</span><span class="token number">6</span><span class="token operator">&lt;</span><span class="token operator">/</span>ip<span class="token operator">-</span>protocol<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ip<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">118</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<p>URL地址栏输入<br> http://192.168.137.143:8080/restconf/config/opendaylight-inventory:nodes/node/openflow:1/table/0/flow/119<br> 填写Hearders信息<br> “body”中选择“raw”，格式为XML（application/xml）<br> 流表：下发arp匹配流表。</p> 
<pre><code class="prism language-c"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> standalone<span class="token operator">=</span><span class="token string">"no"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow xmlns<span class="token operator">=</span><span class="token string">"urn:opendaylight:flow:inventory"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>priority<span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>priority<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>Foo1<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">-</span>name<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>idle<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>hard<span class="token operator">-</span>timeout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>type<span class="token operator">&gt;</span><span class="token number">2054</span><span class="token operator">&lt;</span><span class="token operator">/</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>type<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ethernet<span class="token operator">-</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>match<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>id<span class="token operator">&gt;</span><span class="token number">119</span><span class="token operator">&lt;</span><span class="token operator">/</span>id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>table_id<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>table_id<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>order<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>order<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>FLOOD<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>node<span class="token operator">-</span>connector<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>max<span class="token operator">-</span>length<span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>max<span class="token operator">-</span>length<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>output<span class="token operator">-</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>action<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>apply<span class="token operator">-</span>actions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instruction<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>instructions<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>flow<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="_505"></a>实验参考</h2> 
<p>实验参考：</p> 
<p><a href="https://blog.csdn.net/hao_shujing/article/details/106137888">https://blog.csdn.net/hao_shujing/article/details/106137888</a></p> 
<p>《软件定义网络实验教程 人民邮电出版社》</p> 
<p>《OpenFlow Switch Specification Version 1.3.0 (Wire Protocol 0x04) June 25, 2012》</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a316b64d2131276fa775f3da173e3d7b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">算法_二叉树笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2101a754991fac11fabd01573d95a7c6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">亲测有效在Linux将文件压缩成几个小zip或tar文件，Entry too big to split, read, or write解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>