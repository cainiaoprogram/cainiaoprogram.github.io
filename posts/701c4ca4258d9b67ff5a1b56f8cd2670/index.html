<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Centos7上搭建hadoop2.6.5详细图文教程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Centos7上搭建hadoop2.6.5详细图文教程" />
<meta property="og:description" content="版本 VM 15 Pro
Centos 7
Hadoop 2.6.5
FinalShell 3.9.2.2
步骤 1. 安装虚拟机、Centos，配置网络环境 创建虚拟机；配置网络；配置操作系统；进入GUI界面配置；配置静态网络并验证网络连通性；使用FinalShell连接Centos 详细步骤：
VMWare上搭建Centos7并配置网络用FinalShell连接（详细图文教程）
2. 创建三台虚拟机并相互连通 （1）克隆虚拟机 先关闭虚拟机
鼠标右键单击Master虚拟机，点击管理里的克隆
点击下一步
创建完整克隆
完成克隆
再根据自己需求去调整Slave1的内存和磁盘大小
以此方式，再克隆出Slave2
参考文章:
虚拟机的克隆（带图详解）
（2）连通三台虚拟机网络 1）修改主机名，以Master为例 sudo vi /etc/hostname Slave1和Slave2，分别修改为slave1和slave2
reboot重启，使主机名生效
2）根据设置的IP地址范围，规划网络 再进入centos中，修改配置主机配置文件
三个节点中都需要更改，以Master为例
[admin@master ~]$ sudo vi /etc/hosts 规划master、slave1和slave2的IP地址如上
再更改网络接口配置信息，三个节点中都需要更改，以master为例：
sudo vi /etc/sysconfig/network-scripts/ifcfg-ens33 在Slave1和Slave2中的IPADDR分别改为192.168.44.102和192.168.44.103
再输入命令行重启网络服务：
sudo service network restart | systemctl restart network.service 验证宿主机和虚拟机之间的连通性，虚拟机上的DNS服务
正常连通，salve1和slave2的方式同上
再在FinalShell上设置三个主机的连接信息
3）关闭系统防火墙和内核防火墙 由于hadoop中的程序都是网络服务，需要监听端口，这些端口默认会被linux防火墙挡住。因此要把hadoop中的端口一个个打开，或者把防火墙关掉。由于都是内网，所以将三台虚拟机的防火墙直接全部关闭就行
永久关闭内核防火墙
输入命令行sudo vi /etc/selinux/config
先临时关闭防火墙
sudo systemctl stop firewalld" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/701c4ca4258d9b67ff5a1b56f8cd2670/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-20T22:11:11+08:00" />
<meta property="article:modified_time" content="2023-05-20T22:11:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Centos7上搭建hadoop2.6.5详细图文教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>版本</h2> 
<p>VM 15 Pro<br> Centos 7<br> Hadoop 2.6.5<br> FinalShell 3.9.2.2</p> 
<h2><a id="_6"></a>步骤</h2> 
<h3><a id="1_Centos_7"></a>1. 安装虚拟机、Centos，配置网络环境</h3> 
<ol><li>创建虚拟机；</li><li>配置网络；</li><li>配置操作系统；</li><li>进入GUI界面配置；</li><li>配置静态网络并验证网络连通性；</li><li>使用FinalShell连接Centos</li></ol> 
<p><strong>详细步骤：</strong><br> <a href="https://blog.csdn.net/qq_41094332/article/details/122282102">VMWare上搭建Centos7并配置网络用FinalShell连接（详细图文教程）</a></p> 
<h3><a id="2__18"></a>2. 创建三台虚拟机并相互连通</h3> 
<h4><a id="1_19"></a>（1）克隆虚拟机</h4> 
<p>先关闭虚拟机<br> <img src="https://images2.imgbox.com/11/42/CGbPsP4Y_o.png" alt="在这里插入图片描述"><br> 鼠标右键单击Master虚拟机，点击管理里的克隆<br> <img src="https://images2.imgbox.com/83/b5/s3SKWj4x_o.png" alt="在这里插入图片描述"><br> 点击下一步<br> <img src="https://images2.imgbox.com/34/b0/pRQVo7Sq_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9e/b3/OstqJ7Ul_o.png" alt="在这里插入图片描述"><br> 创建完整克隆<br> <img src="https://images2.imgbox.com/8b/1c/SIVWcuKS_o.png" alt="在这里插入图片描述"><br> 完成克隆<br> <img src="https://images2.imgbox.com/e7/5f/pb9hIvpq_o.png" alt="在这里插入图片描述"><br> 再根据自己需求去调整Slave1的内存和磁盘大小</p> 
<p>以此方式，再克隆出Slave2<br> <img src="https://images2.imgbox.com/9c/45/QAOQDCKv_o.png" alt="在这里插入图片描述"><br> 参考文章:<br> <a href="https://blog.csdn.net/ly_qiu/article/details/104275431?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1.no_search_link&amp;utm_relevant_index=2">虚拟机的克隆（带图详解）</a></p> 
<h4><a id="2_37"></a>（2）连通三台虚拟机网络</h4> 
<h5><a id="1Master_38"></a>1）修改主机名，以Master为例</h5> 
<pre><code class="prism language-javascript">sudo vi <span class="token operator">/</span>etc<span class="token operator">/</span>hostname
</code></pre> 
<p><img src="https://images2.imgbox.com/b2/a6/Jw9Rh6W2_o.png" alt="在这里插入图片描述"><br> Slave1和Slave2，分别修改为slave1和slave2</p> 
<p><code>reboot</code>重启，使主机名生效</p> 
<h5><a id="2IP_46"></a>2）根据设置的IP地址范围，规划网络</h5> 
<p><img src="https://images2.imgbox.com/d3/1a/jy6zIjjc_o.png" alt="在这里插入图片描述"><br> 再进入centos中，修改配置主机配置文件<br> 三个节点中都需要更改，以Master为例</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>admin@master <span class="token operator">~</span><span class="token punctuation">]</span>$ sudo vi <span class="token operator">/</span>etc<span class="token operator">/</span>hosts
</code></pre> 
<p><img src="https://images2.imgbox.com/47/2d/EM11IXib_o.png" alt="在这里插入图片描述"><br> 规划master、slave1和slave2的IP地址如上</p> 
<p>再更改网络接口配置信息，三个节点中都需要更改，以master为例：</p> 
<pre><code class="prism language-javascript">sudo vi <span class="token operator">/</span>etc<span class="token operator">/</span>sysconfig<span class="token operator">/</span>network<span class="token operator">-</span>scripts<span class="token operator">/</span>ifcfg<span class="token operator">-</span>ens33 
</code></pre> 
<p><img src="https://images2.imgbox.com/59/3f/U3IFtPFy_o.png" alt="在这里插入图片描述"><br> 在Slave1和Slave2中的IPADDR分别改为192.168.44.102和192.168.44.103</p> 
<p>再输入命令行重启网络服务：</p> 
<pre><code class="prism language-javascript">sudo service network restart <span class="token operator">|</span> systemctl restart network<span class="token punctuation">.</span>service
</code></pre> 
<p>验证宿主机和虚拟机之间的连通性，虚拟机上的DNS服务<br> <img src="https://images2.imgbox.com/56/ac/bIfxSdC7_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/60/51/Zbt6N9Ss_o.png" alt="在这里插入图片描述"><br> 正常连通，salve1和slave2的方式同上</p> 
<p>再在FinalShell上设置三个主机的连接信息<br> <img src="https://images2.imgbox.com/ef/27/rX1Tu5fT_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_80"></a>3）关闭系统防火墙和内核防火墙</h5> 
<p>由于hadoop中的程序都是网络服务，需要监听端口，这些端口默认会被linux防火墙挡住。因此要把hadoop中的端口一个个打开，或者把防火墙关掉。由于都是内网，所以将三台虚拟机的防火墙直接全部关闭就行</p> 
<ol><li> <p>永久关闭内核防火墙<br> 输入命令行<code>sudo vi /etc/selinux/config</code><br> <img src="https://images2.imgbox.com/6c/30/Rd8pZ9aw_o.png" alt="在这里插入图片描述"></p> </li><li> <p>先临时关闭防火墙<br> <code>sudo systemctl stop firewalld</code></p> </li><li> <p>再禁止开机启动防火墙（永久关闭）<br> <code>sudo systemctl disable firewalld</code></p> </li></ol> 
<p><strong>验证三台主机的连通性</strong><br> <img src="https://images2.imgbox.com/58/12/rzRTP1h9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/db/bd/eKCmbqpJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/05/30/a7IGuPON_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b2/f0/wsUm8dXX_o.png" alt="在这里插入图片描述"><br> 三台主机网络连接正常</p> 
<h4><a id="3SSH_99"></a>（3）SSH互信配置</h4> 
<h5><a id="1_100"></a>1）三台虚拟机上生成密钥</h5> 
<p>输入<code>su</code>再输入密码，切换到管理员身份，进入到根目录<code>cd ~</code></p> 
<p>在三台虚拟机上生成密钥，输入<code>ssh-keygen -t rsa </code>，三次回车，生成密钥<br> <img src="https://images2.imgbox.com/de/00/wVcrUFjS_o.png" alt="在这里插入图片描述"></p> 
<p><strong>注：</strong> FinalShell可在下方的命令窗口里直接发送同一条命令，给三台虚拟机，进行相同指令操作。<br> <img src="https://images2.imgbox.com/fd/b2/IvZa55LH_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2MasterMaster_108"></a>2）Master上生成公钥（仅Master执行）</h5> 
<p>在/root/.ssh文件下生成id_dsa id_dsa.pub，在该文件下建立一个authorized_keys文件，将id_dsa.pub文件内容拷贝authorized_keys文件中，同时赋予该文件600权限“只有拥有者有读写权限”</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master <span class="token punctuation">.</span>ssh<span class="token punctuation">]</span># cat <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>id_rsa<span class="token punctuation">.</span>pub <span class="token operator">&gt;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">root</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys
<span class="token punctuation">[</span>root@master <span class="token punctuation">.</span>ssh<span class="token punctuation">]</span># ls
authorized_keys  id_rsa  id_rsa<span class="token punctuation">.</span>pub
<span class="token punctuation">[</span>root@master <span class="token punctuation">.</span>ssh<span class="token punctuation">]</span># chmod <span class="token number">600</span> <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys
</code></pre> 
<p>资料拓展：<br> <a href="https://blog.csdn.net/u013197629/article/details/73608613">Linux权限详解（chmod、600、644、666、700、711、755、777、4755、6755、7755）</a></p> 
<h5><a id="3_119"></a>3）复制其他节点公钥</h5> 
<p>再复制Slave1和Slave2中的公钥（仅Maser执行）：</p> 
<pre><code class="prism language-javascript">ssh slave1 cat <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>id_rsa<span class="token punctuation">.</span>pub <span class="token operator">&gt;&gt;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">root</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys
</code></pre> 
<pre><code class="prism language-javascript">ssh slave2 cat <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>id_rsa<span class="token punctuation">.</span>pub <span class="token operator">&gt;&gt;</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">root</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys
</code></pre> 
<p><img src="https://images2.imgbox.com/5b/cc/RH8VlD6k_o.png" alt="在这里插入图片描述"><br> 执行命令后，输入<code>yes</code>，再输入slave1的登录密码，执行Slave2时，同方式。</p> 
<h5><a id="4_131"></a>4）复制公钥到其他节点</h5> 
<p>再将Master上的公钥复制到Slave1和Slave2上</p> 
<pre><code class="prism language-javascript">scp <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys root@slave1<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">root</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys
scp <span class="token operator">/</span>root<span class="token operator">/</span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys root@slave2<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">root</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span>ssh<span class="token operator">/</span>authorized_keys
</code></pre> 
<p><img src="https://images2.imgbox.com/2c/a2/HHAJjXrG_o.png" alt="在这里插入图片描述"><br> <strong>注：</strong> scp（secure copy）基于 SSH 协议在网络之间进行安全传输的命令，其格式为“scp [参数] 本地文件 远程帐户@远程 IP 地址:远程目录”</p> 
<h5><a id="5_140"></a>5）免密连接测试</h5> 
<pre><code class="prism language-javascript">ssh slave1 ip addr 
ssh slave2 ip addr
</code></pre> 
<p><img src="https://images2.imgbox.com/86/18/PqqNxZhg_o.png" alt="在这里插入图片描述"></p> 
<p>拓展资料：<br> <a href="https://www.howtoing.com/how-to-set-up-ssh-keys-on-centos7" rel="nofollow">如何在CentOS 7上设置SSH密钥</a></p> 
<h3><a id="3JDK_150"></a>3.安装JDK环境</h3> 
<p><strong>注：</strong> 若不是minimal（最小化）安装的，有可能出现openjdk已安装的情况，会导致到软件冲突，我们在这里先将openjdk进 行卸载。</p> 
<h4><a id="1jdk_152"></a>（1）查询是否已有jdk文件</h4> 
<pre><code class="prism language-javascript">rpm <span class="token operator">-</span>qa<span class="token operator">|</span>grep java
</code></pre> 
<p><img src="https://images2.imgbox.com/f2/9c/OP06lfmd_o.png" alt="在这里插入图片描述"><br> 最小化安装：仅安装系统关键部件，安装最基本的程序。使之可以运行，确保开机后可以进入系统而不崩溃，不安装其他任何可扩展软件。</p> 
<h4><a id="2_159"></a>（2）删除已有包</h4> 
<pre><code class="prism language-javascript">rpm <span class="token operator">-</span>e <span class="token operator">--</span>nodeps java<span class="token operator">-</span><span class="token number">1.8</span><span class="token number">.0</span><span class="token operator">-</span>openjdk<span class="token operator">-</span><span class="token number">1.8</span><span class="token number">.0</span><span class="token number">.191</span><span class="token punctuation">.</span>b12<span class="token operator">-</span><span class="token number">1.</span>el7_6<span class="token punctuation">.</span>x86_64
</code></pre> 
<p><img src="https://images2.imgbox.com/94/94/fnB37af6_o.png" alt="在这里插入图片描述"><br> 再次检查时，已被删除</p> 
<h4><a id="3_166"></a>（3）上传文件</h4> 
<p>将JDK文件<code>jdk-8u172-linux-x64.tar.gz</code>上传到虚拟机中，因/usr/local/src仅root用户可读写，为方便后续将上传的安装都放置在此，改为777权限（三台虚拟机共同执行）：</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master admin<span class="token punctuation">]</span># chmod <span class="token number">777</span> <span class="token operator">-</span><span class="token constant">R</span> <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src
</code></pre> 
<p>然后上传<code>jdk-8u172-linux-x64.tar.gz</code><br> <img src="https://images2.imgbox.com/f9/e8/doEr7JQB_o.png" alt="在这里插入图片描述"><br> 解压文件至/usr/local/src</p> 
<pre><code class="prism language-javascript">tar <span class="token operator">-</span>zxvf <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>jdk<span class="token operator">-</span><span class="token number">8</span>u172<span class="token operator">-</span>linux<span class="token operator">-</span>x64<span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz <span class="token operator">-</span><span class="token constant">C</span> <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/31/Dmxkhkuf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b4/e2/7Zg0BZpK_o.png" alt="在这里插入图片描述"><br> 将JDK包复制给Slave1和Slave2</p> 
<pre><code class="prism language-javascript">scp <span class="token operator">-</span>r  <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_172</span>   root@slave1<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>
scp <span class="token operator">-</span>r  <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_172</span>   root@slave2<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>
</code></pre> 
<h4><a id="4_185"></a>（4）配置环境变量</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># vim <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
</code></pre> 
<p><strong>注：</strong> 此时修改的为root下的<code>.bashrc</code>进行全局变量修改</p> 
<p>在文件后加入</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token constant">JAVA_HOME</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_172</span>
<span class="token keyword">export</span> <span class="token constant">JRE_HOME</span><span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span><span class="token constant">JAVA_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>jre
<span class="token keyword">export</span> <span class="token constant">CLASSPATH</span><span class="token operator">=</span><span class="token punctuation">.</span><span class="token operator">:</span>$<span class="token punctuation">{<!-- --></span><span class="token constant">JAVA_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>lib<span class="token operator">:</span>$<span class="token punctuation">{<!-- --></span><span class="token constant">JRE_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>lib
<span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span><span class="token constant">JAVA_HOME</span><span class="token punctuation">}</span><span class="token operator">/</span>bin<span class="token operator">:</span>$<span class="token constant">PATH</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/d2/PpvowF2L_o.png" alt="在这里插入图片描述"></p> 
<p>再将环境变量赋值给Slave1和Slave2</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master admin<span class="token punctuation">]</span># scp <span class="token operator">~</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.bashrc root@slave1:~</span><span class="token regex-delimiter">/</span></span>
<span class="token punctuation">[</span>root@master admin<span class="token punctuation">]</span># scp <span class="token operator">~</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.bashrc root@slave2:~</span><span class="token regex-delimiter">/</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/26/3a/tFfFBrbL_o.png" alt="在这里插入图片描述"><br> 重新载入环境</p> 
<pre><code class="prism language-javascript">source  <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc 
</code></pre> 
<p>测试环境是否配置成功</p> 
<pre><code class="prism language-javascript">java <span class="token operator">-</span>version
</code></pre> 
<p><img src="https://images2.imgbox.com/e4/c8/b5rw5CS8_o.png" alt="在这里插入图片描述"><br> JDK环境配置成功</p> 
<h3><a id="4_hadoop265_217"></a>4. 搭建hadoop2.6.5</h3> 
<h4><a id="1hadoop_218"></a>（1）hadoop集群规划</h4> 
<table><thead><tr><th>＼</th><th>Master</th><th>Slave1</th><th>Slave2</th></tr></thead><tbody><tr><td>HDFS</td><td>NameNode、SecondaryNameNode</td><td>DataNode</td><td>DataNode</td></tr><tr><td>YARN</td><td>ResourceManager</td><td>NodeManager</td><td>NodeManager</td></tr></tbody></table> 
<h4><a id="2hadoop_224"></a>（2）hadoop配置文件概述</h4> 
<p>Hadoop配置文件分两类：默认配置文件和自定义配置文件，只有用户想修改某一默认配置值时，才需要修改自定义配置文件，更改相应属性值。</p> 
<ul><li>默认配置文件</li></ul> 
<table><thead><tr><th>要获取的默认文件</th><th>文件存放在Hadoop的jar包中的位置</th></tr></thead><tbody><tr><td>[core-default.xml]</td><td>hadoop-common-2.6.5.jar/ core-default.xml</td></tr><tr><td>[hdfs-default.xml]</td><td>hadoop-hdfs-2.6.5.jar/ hdfs-default.xml</td></tr><tr><td>[yarn-default.xml]</td><td>hadoop-yarn-common-2.6.5.jar/ yarn-default.xml</td></tr><tr><td>[mapred-default.xml]</td><td>hadoop-mapreduce-client-core-2.6.5.jar/ mapred-default.xml</td></tr></tbody></table> 
<ul><li>自定义配置文件<br> core-site.xml、hdfs-site.xml、yarn-site.xml、mapred-site.xml四个配置文件存放在$HADOOP_HOME/etc/hadoop这个路径上，用户可以根据项目需求重新进行修改配置。</li></ul> 
<h4><a id="3hadoop_239"></a>（3）上传hadoop文件</h4> 
<p>将<code>hadoop-2.6.5.tar.gz</code>上传到<code>/usr/local/src</code>，打开目录，解压hadoop安装包</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master <span class="token operator">~</span><span class="token punctuation">]</span>$ cd <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src
<span class="token punctuation">[</span>root@master src<span class="token punctuation">]</span>$ tar zxvf hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">.</span>tar<span class="token punctuation">.</span>gz 
</code></pre> 
<p><img src="https://images2.imgbox.com/3a/f7/aMbAR7qT_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4hadoopenvsh_246"></a>（4）修改hadoop-env.sh</h4> 
<p>路径：<code>/usr/local/src/hadoop-2.6.5/etc/hadoop</code></p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span>$ vim hadoop<span class="token operator">-</span>env<span class="token punctuation">.</span>sh
</code></pre> 
<p>修改为<code>export JAVA_HOME=/usr/local/src/jdk1.8.0_172</code><br> <img src="https://images2.imgbox.com/f3/6e/s2zjViEE_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5yarnenvsh_253"></a>（5）修改yarn-env.sh</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span>$ vim yarn<span class="token operator">-</span>env<span class="token punctuation">.</span>sh
</code></pre> 
<p>修改为<code>export JAVA_HOME=/usr/local/src/jdk1.8.0_172</code><br> <img src="https://images2.imgbox.com/2e/59/3d0pe86Q_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="6slaves_259"></a>（6）修改slaves</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># vim slaves
</code></pre> 
<p>修改为<code>slave1</code>和<code>slave2</code><br> <img src="https://images2.imgbox.com/04/1e/jR8RSj3z_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="7coresitexml_266"></a>（7）修改core-site.xml（核心配置文件）</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># vim core<span class="token operator">-</span>site<span class="token punctuation">.</span>xml
</code></pre> 
<p>修改为</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>xml<span class="token operator">-</span>stylesheet type<span class="token operator">=</span><span class="token string">"text/xsl"</span> href<span class="token operator">=</span><span class="token string">"configuration.xsl"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
  Licensed under the Apache License<span class="token punctuation">,</span> Version <span class="token number">2.0</span> <span class="token punctuation">(</span>the <span class="token string">"License"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  you may not use <span class="token keyword">this</span> file except <span class="token keyword">in</span> compliance <span class="token keyword">with</span> the License<span class="token punctuation">.</span>
  You may obtain a copy <span class="token keyword">of</span> the License at
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>参考地址 http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hadoop<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>docs<span class="token operator">/</span>r2<span class="token punctuation">.</span><span class="token number">6.5</span><span class="token operator">/</span><span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>fs<span class="token punctuation">.</span>defaultFS<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>hdfs<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>master<span class="token operator">:</span><span class="token number">9000</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>指定<span class="token constant">HDFS</span>中NameNode地址（用来指定默认的文件系统）<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>hadoop<span class="token punctuation">.</span>tmp<span class="token punctuation">.</span>dir<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token operator">/</span>tmp<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>hadoop运行时产生临时文件的存放目录<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="8hdfssitexmlHDFS_293"></a>（8）修改hdfs-site.xml（HDFS配置文件）</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># vim hdfs<span class="token operator">-</span>site<span class="token punctuation">.</span>xml
</code></pre> 
<p>修改为</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>xml<span class="token operator">-</span>stylesheet type<span class="token operator">=</span><span class="token string">"text/xsl"</span> href<span class="token operator">=</span><span class="token string">"configuration.xsl"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
  Licensed under the Apache License<span class="token punctuation">,</span> Version <span class="token number">2.0</span> <span class="token punctuation">(</span>the <span class="token string">"License"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  you may not use <span class="token keyword">this</span> file except <span class="token keyword">in</span> compliance <span class="token keyword">with</span> the License<span class="token punctuation">.</span>
  You may obtain a copy <span class="token keyword">of</span> the License at

    http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>licenses<span class="token operator">/</span><span class="token constant">LICENSE</span><span class="token operator">-</span><span class="token number">2.0</span>

  Unless required by applicable law or agreed to <span class="token keyword">in</span> writing<span class="token punctuation">,</span> software
  distributed under the License is distributed on an <span class="token string">"AS IS"</span> <span class="token constant">BASIS</span><span class="token punctuation">,</span>
  <span class="token constant">WITHOUT</span> <span class="token constant">WARRANTIES</span> <span class="token constant">OR</span> <span class="token constant">CONDITIONS</span> <span class="token constant">OF</span> <span class="token constant">ANY</span> <span class="token constant">KIND</span><span class="token punctuation">,</span> either express or implied<span class="token punctuation">.</span>
  See the License <span class="token keyword">for</span> the specific language governing permissions and
  limitations under the License<span class="token punctuation">.</span> See accompanying <span class="token constant">LICENSE</span> file<span class="token punctuation">.</span>
<span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Put site<span class="token operator">-</span>specific property overrides <span class="token keyword">in</span> <span class="token keyword">this</span> file<span class="token punctuation">.</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>参考地址 http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hadoop<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>docs<span class="token operator">/</span>r2<span class="token punctuation">.</span><span class="token number">6.5</span><span class="token operator">/</span><span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs<span class="token punctuation">.</span>namenode<span class="token punctuation">.</span>secondary<span class="token punctuation">.</span>http<span class="token operator">-</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">9001</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>secondaryNamenode地址和端口<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs<span class="token punctuation">.</span>namenode<span class="token punctuation">.</span>name<span class="token punctuation">.</span>dir<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token operator">/</span>dfs<span class="token operator">/</span>name<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>保存FsImage镜像的目录，作用是存放hadoop的名称节点namenode里的metadata<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs<span class="token punctuation">.</span>datanode<span class="token punctuation">.</span>data<span class="token punctuation">.</span>dir<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>file<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token operator">/</span>dfs<span class="token operator">/</span>data<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>存放<span class="token constant">HDFS</span>文件系统数据文件的目录，作用是存放hadoop的数据节点datanode里的多个数据块<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>dfs<span class="token punctuation">.</span>replication<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>block块副本数，默认值<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="9mapredsitexmlMapReduce_340"></a>（9）配置mapred-site.xml（MapReduce配置文件）</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># cp mapred<span class="token operator">-</span>site<span class="token punctuation">.</span>xml<span class="token punctuation">.</span>template mapred<span class="token operator">-</span>site<span class="token punctuation">.</span>xml
<span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># vim mapred<span class="token operator">-</span>site<span class="token punctuation">.</span>xml
</code></pre> 
<p>修改为</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>xml<span class="token operator">-</span>stylesheet type<span class="token operator">=</span><span class="token string">"text/xsl"</span> href<span class="token operator">=</span><span class="token string">"configuration.xsl"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>参考地址 mapred<span class="token operator">-</span>site<span class="token punctuation">.</span>xml<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hadoop<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>docs<span class="token operator">/</span>r2<span class="token punctuation">.</span><span class="token number">6.5</span><span class="token operator">/</span><span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>framework<span class="token punctuation">.</span>name<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>yarn<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>指定运行mapreduce的环境是yarn<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>hadoop历史服务器<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>jobhistory<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">10020</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">MR</span> JobHistory服务器进程间通信地址<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>jobhistory<span class="token punctuation">.</span>webapp<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">19888</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">MR</span> JobHistory服务器的用户界面地址<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>jobhistory<span class="token punctuation">.</span>done<span class="token operator">-</span>dir<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator">/</span>mr<span class="token operator">-</span>history<span class="token operator">/</span>done<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>已执行完毕作业信息存储位置<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>jobhistory<span class="token punctuation">.</span>intermediate<span class="token operator">-</span>done<span class="token operator">-</span>dir<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator">/</span>mr<span class="token operator">-</span>history<span class="token operator">/</span>tmp<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>正在运行的作业信息存储位置<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>app<span class="token punctuation">.</span>mapreduce<span class="token punctuation">.</span>am<span class="token punctuation">.</span>staging<span class="token operator">-</span>dir<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token operator">/</span>mr<span class="token operator">-</span>history<span class="token operator">/</span>hadoop<span class="token operator">-</span>yarn<span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">MR</span>作业在提交时所使用的临时目录， 是一个本地路径<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>map<span class="token punctuation">.</span>memory<span class="token punctuation">.</span>mb<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">2048</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>调度器为每个map task申请的内存数，各Job也可以单独指定，如果实际使用的资源量超过该值，则会被强制杀死<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>reduce<span class="token punctuation">.</span>memory<span class="token punctuation">.</span>mb<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">2048</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>调度器为每个reduce task申请的内存数，同map task，超出强制杀死<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>mapreduce<span class="token punctuation">.</span>job<span class="token punctuation">.</span>reduce<span class="token punctuation">.</span>slowstart<span class="token punctuation">.</span>completedmaps<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">0.8</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>当map task完成<span class="token number">80</span><span class="token operator">%</span>时，为reduce申请资源，reduce开始进行拷贝map结果数据和做reduce shuffle操作，默认<span class="token number">0.05</span><span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="10yarnsitexmlYARN_400"></a>（10）配置yarn-site.xml（YARN配置文件）</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># vim yarn<span class="token operator">-</span>site<span class="token punctuation">.</span>xml 
</code></pre> 
<p>打开文件后用<code>gg</code>跳转至文件首行，<br> 再用<code>dG</code>指令清屏（dG为删除光标所在行以及其下所有行的内容；d为删除，G为跳转到文件末尾行；）<br> 修改为</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>xml<span class="token operator">-</span>stylesheet type<span class="token operator">=</span><span class="token string">"text/xsl"</span> href<span class="token operator">=</span><span class="token string">"configuration.xsl"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>参考地址 yarn<span class="token operator">-</span>site<span class="token punctuation">.</span>xml<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>hadoop<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>org<span class="token operator">/</span>docs<span class="token operator">/</span>r2<span class="token punctuation">.</span><span class="token number">6.5</span><span class="token operator">/</span><span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>configuration<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>日志聚合相关<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>log<span class="token operator">-</span>aggregation<span class="token operator">-</span>enable<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>开启日志聚合功能，开启后日志保存在hdfs上<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>log<span class="token operator">-</span>aggregation<span class="token punctuation">.</span>retain<span class="token operator">-</span>seconds<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token number">86400</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>聚合后的日志在hdfs上的保存时间，单位为秒<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>log<span class="token punctuation">.</span>server<span class="token punctuation">.</span>url<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>master<span class="token operator">:</span><span class="token number">19888</span><span class="token operator">/</span>jobhistory<span class="token operator">/</span>logs<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>日志聚合服务器<span class="token constant">URL</span><span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>nodemanager<span class="token punctuation">.</span>aux<span class="token operator">-</span>services<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>mapreduce_shuffle<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>NodeManager上运行的附属服务<span class="token punctuation">,</span>需配置成mapreduce_shuffle，才可运行MapReduce程序<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>nodemanager<span class="token punctuation">.</span>aux<span class="token operator">-</span>services<span class="token punctuation">.</span>mapreduce<span class="token punctuation">.</span>shuffle<span class="token punctuation">.</span>class<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>hadoop<span class="token punctuation">.</span>mapred<span class="token punctuation">.</span>ShuffleHandler<span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">8032</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">RM</span> 对客户端暴露的地址。客户端通过该地址向<span class="token constant">RM</span>提交应用程序，杀死应用程序<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>scheduler<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">8030</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">RM</span> 对ApplicationMaster暴露的访问地址。<span class="token constant">AM</span>通过该地址向<span class="token constant">RM</span>申请资源、释放资源<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>resource<span class="token operator">-</span>tracker<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">8035</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">RM</span> 对NodeManager暴露的地址，<span class="token constant">NM</span>通过该地址向<span class="token constant">RM</span>汇报心跳，领取任务<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>admin<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">8033</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">RM</span> 对管理员暴露的访问地址。管理员通过该地址向<span class="token constant">RM</span>发送管理命令等<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>resourcemanager<span class="token punctuation">.</span>webapp<span class="token punctuation">.</span>address<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>master<span class="token operator">:</span><span class="token number">8088</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span><span class="token constant">RM</span>对外web ui地址。用户可通过该地址在浏览器中查看集群各类信息<span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 关闭虚拟内存检查<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>nodemanager<span class="token punctuation">.</span>pmem<span class="token operator">-</span>check<span class="token operator">-</span>enabled<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token boolean">false</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>是否启动一个线程检查每个任务正使用的物理内存量，如果任务超出分配值，则直接将其杀掉，默认为<span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>name<span class="token operator">&gt;</span>yarn<span class="token punctuation">.</span>nodemanager<span class="token punctuation">.</span>vmem<span class="token operator">-</span>check<span class="token operator">-</span>enabled<span class="token operator">&lt;</span><span class="token operator">/</span>name<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span><span class="token boolean">false</span><span class="token operator">&lt;</span><span class="token operator">/</span>value<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>description<span class="token operator">&gt;</span>是否启动一个线程检查每个任务正使用的虚拟内存量，如果任务超出分配值，则直接将其杀掉，默认是<span class="token boolean">true</span><span class="token operator">&lt;</span><span class="token operator">/</span>description<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="11_477"></a>（11）创建临时文件和文件目录</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># mkdir <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token operator">/</span>tmp
<span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># mkdir <span class="token operator">-</span>p <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token operator">/</span>dfs<span class="token operator">/</span>name
<span class="token punctuation">[</span>root@master hadoop<span class="token punctuation">]</span># mkdir <span class="token operator">-</span>p <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token operator">/</span>dfs<span class="token operator">/</span>data
</code></pre> 
<p>根据之前配置中规划的路径，创建临时文件和目录</p> 
<h4><a id="12hadoop_485"></a>（12）配置hadoop环境变量</h4> 
<p>在<code>.bashrc </code>中添加hadoop环境变量</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># vim <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc 
</code></pre> 
<p>添加内容</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token constant">HADOOP_HOME</span><span class="token operator">=</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span>
<span class="token keyword">export</span> <span class="token constant">PATH</span><span class="token operator">=</span>$<span class="token constant">PATH</span><span class="token operator">:</span>$<span class="token constant">HADOOP_HOME</span><span class="token operator">/</span>bin
</code></pre> 
<p><img src="https://images2.imgbox.com/07/2d/8PnfTpfC_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="13_497"></a>（13）将文件赋值给其他节点</h4> 
<p>将<code>.bashrc</code>文件复制到Slave1和Slave2上</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># scp <span class="token operator">-</span>r <span class="token operator">~</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.bashrc root@slave1:~</span><span class="token regex-delimiter">/</span></span>
<span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># scp <span class="token operator">-</span>r <span class="token operator">~</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.bashrc root@slave2:~</span><span class="token regex-delimiter">/</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/be/hakAGRh8_o.png" alt="在这里插入图片描述"><br> 刷新环境变量</p> 
<pre><code class="prism language-javascript">source <span class="token operator">~</span><span class="token operator">/</span><span class="token punctuation">.</span>bashrc
</code></pre> 
<p><img src="https://images2.imgbox.com/06/d1/5N22WogS_o.png" alt="在这里插入图片描述"><br> 将hadoop包复制到Slave1和Slave2上</p> 
<pre><code class="prism language-javascript">scp <span class="token operator">-</span>r <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span> root@slave1<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>
scp <span class="token operator">-</span>r <span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span> root@slave2<span class="token operator">:</span><span class="token operator">/</span>usr<span class="token operator">/</span>local<span class="token operator">/</span>src<span class="token operator">/</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4a/87/3NLIIgIj_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_hadoop_516"></a>5. 启动hadoop集群</h3> 
<h4><a id="1Namenode_517"></a>（1）初始化Namenode</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># <span class="token punctuation">.</span><span class="token operator">/</span>bin<span class="token operator">/</span>hadoop namenode <span class="token operator">-</span>format
</code></pre> 
<p>第一次启动集群需要初始化（仅Master执行）<br> <img src="https://images2.imgbox.com/9c/1c/KJW8bvOi_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/36/9e/UDvq68ue_o.png" alt="在这里插入图片描述"><br> 要保证过程不报错</p> 
<h4><a id="2_526"></a>（2）启动集群并检查是否正常启动</h4> 
<h5><a id="1_527"></a>1）启动集群</h5> 
<p>在Master上启动集群</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># sbin<span class="token operator">/</span>start<span class="token operator">-</span>all<span class="token punctuation">.</span>sh
</code></pre> 
<p><strong>正常启动：</strong><br> <img src="https://images2.imgbox.com/bb/83/0B91m6EY_o.png" alt="在这里插入图片描述"><br> 出现上图为启动成功</p> 
<h6><a id="_1_536"></a>* 踩坑点1：之前启动时报错</h6> 
<p><img src="https://images2.imgbox.com/09/4d/Lck0kHlF_o.png" alt="在这里插入图片描述"><br> <strong>排查错误：</strong> 发现找不到slave2，但master和slave1启动正常，推测整体文件修改时应该没有大的共性错误，否则maser和slave1也无法正常启动，那么问题可能仅是在有修改有<code>slave2</code>内容时，填写的错误。而在整个修改过程中，仅有<code>slaves</code>文件涉及salve2，故问题可能在<code>slaves</code>中</p> 
<p><strong>原因：</strong><code>进入/usr/local/src/hadoop-2.6.5/etc/hadoop/</code>下的<code>slaves</code>文件中，发现把<code>slaves</code>写错成<code>salve1</code>，更改为<code>slave1</code>后，启动成功</p> 
<h5><a id="2_542"></a>2）查看服务进程</h5> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># jps
</code></pre> 
<p><img src="https://images2.imgbox.com/36/a7/rMoxdkrZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ca/fe/no5Dj5nz_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/44/a0/R1Auc7yR_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_2_jpsjps_549"></a>* 踩坑点2： 输入jps时，显示jps命令无法找到</h6> 
<p><strong>排查错误：</strong> 进入到<code>java/bin</code>输入<code>jps</code>，发现可正常显示进程服务，说明没有文件损失，可能为修改环境配置文件时错误。</p> 
<p><strong>原因：</strong> 查看环境配置文件，发现<code>JAVA_HOME</code>路径有内容敲错，修改后，可直接启动<code>jps</code></p> 
<p><mark>注：</mark> <code>sbin/start-dfs.sh</code>为开启hdfs，<code>sbin/start-yarn.sh</code>为开启yarn</p> 
<h5><a id="3_556"></a>3）查看集群信息状态</h5> 
<p>Master执行</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># hadoop dfsadmin <span class="token operator">-</span>report
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/bb/79alPCEH_o.png" alt="在这里插入图片描述"><br> 上述两个命令可正常执行显示，则说明hadoop集群正常启动</p> 
<h4><a id="3hosts_564"></a>（3）修改宿主机hosts文件</h4> 
<p>进入<code>C:\Windows\System32\drivers\etc</code>，修改<code>hosts</code><br> <img src="https://images2.imgbox.com/3b/44/fZ2aVx0O_o.png" alt="在这里插入图片描述"><br> 修改完后，可在浏览器上输入<code>master:8088</code>直接访问</p> 
<p>ResourceManager运行在主节点master上，可以Web控制台查看状态, 访问如下地址:<br> <code>http://master:8088/</code></p> 
<p>来源：<br> 组件 ：HDFS<br> 节点 ：NameNode<br> 默认端口 ：50070<br> 配置 ：dfs.namenode.http-address<br> 用途说明 ：http服务的端口</p> 
<p><img src="https://images2.imgbox.com/6f/29/hbstVU7g_o.png" alt="在这里插入图片描述"></p> 
<p>通过登录Web控制台，查看HDFS集群状态，访问如下地址：<br> <code>http://master:50070/</code><br> <img src="https://images2.imgbox.com/8b/4a/BF9w04iI_o.png" alt="在这里插入图片描述"></p> 
<p>参考文章：<br> <a href="https://blog.csdn.net/clerk0324/article/details/51915965">hadoop 2.6中管理界面</a></p> 
<p><a href="https://blog.csdn.net/qq_42585142/article/details/88369628?utm_medium=distribute.pc_aggpage_search_result.none-task-blog-2~aggregatepage~first_rank_ecpm_v1~rank_v31_ecpm-1-88369628.pc_agg_new_rank&amp;utm_term=hadoop+web%E7%95%8C%E9%9D%A2%E4%BB%8B%E7%BB%8D&amp;spm=1000.2123.3001.4430">Hadoop Web界面解读</a></p> 
<h4><a id="4hadoop_591"></a>（4）关闭hadoop</h4> 
<pre><code class="prism language-javascript"><span class="token punctuation">[</span>root@master hadoop<span class="token operator">-</span><span class="token number">2.6</span><span class="token number">.5</span><span class="token punctuation">]</span># <span class="token punctuation">.</span><span class="token operator">/</span>sbin<span class="token operator">/</span>stop<span class="token operator">-</span>all<span class="token punctuation">.</span>sh 
</code></pre> 
<p><img src="https://images2.imgbox.com/11/e2/8cf80dkX_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Hadoop_596"></a>Hadoop中目录介绍</h2> 
<p><code>bin</code>：bin目录是Hadoop最基本的管理脚本和使用脚本所在的目录，这些脚本是sbin目录下管理脚本的基础实现，用户可以直接使用这些脚本管理和使用Hadoop。</p> 
<p><code>sbin</code>：存放的是我们管理脚本的所在目录，重要是对hdfs和yarn的各种开启和关闭和单线程开启和守护。</p> 
<p><code>etc</code>：存放一些hadoop的配置文件。</p> 
<p><code>lib</code>：该目录下存放的是Hadoop运行时依赖的jar包，Hadoop在执行时会把lib目录下面的jar全部加到classpath中。</p> 
<p><code>logs</code>：该目录存放的是Hadoop运行的日志，查看日志对寻找Hadoop运行错误非常有帮助。</p> 
<p><code>include</code>：对外提供的编程库头文件（具体动态库和静态库在lib目录中），这些头文件均是用C++定义的，通常用于C++程序访问HDFS或者编写MapReduce程序。</p> 
<p><code>libexec</code>：各个服务对用的shell配置文件所在的目录，可用于配置日志输出、启动参数（比如JVM参数）等基本信息。</p> 
<p><code>share</code>：Hadoop各个模块编译后的jar包所在的目录。</p> 
<p>参考资料<br> <a href="https://blog.csdn.net/Shemon_zjw/article/details/106502519#4lib_36">hadoop目录介绍（各目录功能介绍）</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad5f1c738bc63992b225da35d31e3ef9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于Java的员工考勤系统设计与实现(论文&#43;源码)_kaic</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cf0ba63eb42e7a3176bd7ac96bb2e2e0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">中文Python（4）中文Python的if语句</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>