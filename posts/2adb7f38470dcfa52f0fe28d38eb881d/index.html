<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>I.MX6ULL开发笔记（一）——环境搭建、镜像烧录、网络连接 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="I.MX6ULL开发笔记（一）——环境搭建、镜像烧录、网络连接" />
<meta property="og:description" content="本系列为使用野火IMX6ULL开发的学习笔记，使用的开发板为如下：
具有的硬件资源有如下：
文章目录 一、环境搭建Win11安装WSL安装串口驱动安装串口工具安装Ubuntu与windows文件互传 二、镜像烧录修改串口终端登录前信息 三、fire-config工具配置EMMC/NAND FLASH刷机 四、WIFI连接 一、环境搭建 Win11安装WSL https://blog.csdn.net/weixin_44301630/article/details/122390018
安装虚拟机也可以，需要安装一个Ubuntu系统。直接在微软商城中搜索ubuntu20.04。
安装串口驱动 CH340（波特率115200）
https://www.wch.cn/products/CH340.html
安装串口工具 在 Windows 下有很多种终端工具，例如 MobaXterm、secureCRT、xShell、Putty 等，但是最推荐的还是MobaXterm：
MobaXterm：https://mobaxterm.mobatek.net/download.html 安装Ubuntu与windows文件互传 FileZilla下载地址：https://www.filezilla.cn/download
开启Ubuntu下的FTP服务：sudo apt-get install vsftpd
等待软件自动安装，安装后打开配置文件：sudo vi /etc/vsftpd.conf
打开 vsftpd.conf 文件以后找到如下两行，输入i进行编辑，按下Esc，输入“:和wq”保存：
local_enable=YES write_enable=YES 确保上面两行不能注释，把他打开：
使用如下命令重启FTP服务：
sudo /etc/init.d/vsftpd restart
使用FileZillla连接到Ubuntu的FTP服务器：
二、镜像烧录 安装Ubuntu系统时，我们使用到了Ubuntu提供的“iso”后缀的系统镜像文件，这是在PC上常用的系统镜像文件格式。
所谓镜像文件其实与压缩包类似，它将一系列文件按照特定的格式制作成单个文件，方便用户下载和使用。 iso文件的一个重要特性是它能被某些软件识别直接刻录到光盘上，而虚拟机虚拟的光驱则可以直接把iso文件像光盘一样加载读取， 从而通过iso系统镜像安装操作系统。
对于img文件格式，主要用于创建磁盘的镜像文件（disk image）， 它可以用来打包整个磁盘或光盘的内容。img是iso文件格式的超集，它向后兼容iso文件格式。
嵌入式单板机一般没有光驱，而它们通常支持运行SD卡里的操作系统，所以嵌入式的系统镜像通常使用img文件的形式发布。 人们通常在PC上使用软件通过读卡器把img镜像文件烧录至SD卡，然后把SD接入到嵌入式单板机上运行。
准备一张Micro SD卡，容量需要2GB以上。下载 Etcher 软件，用于烧录镜像至 SD 卡，下载地址：https://www.balena.io/etcher ，根据自 己的电脑系统下载对应版本即可。下载野火最新的 Debian 镜像：https://pan.baidu.com/s/1pqVHVIdY97VApz-rVVa8pQ 提取码：uge1 imx6ull-lubancat-carp-console-armhf-2022-02-10.img.xz: Debian的纯净版固件，没有带桌面环境和野火的QT App。
imx6ull-lubancat-carp-qt-armhf-2022-02-10.img.xz: 具有QT App功能的Debian固件,系统启动后会进入QT App的界面。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2adb7f38470dcfa52f0fe28d38eb881d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-22T22:07:48+08:00" />
<meta property="article:modified_time" content="2023-11-22T22:07:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">I.MX6ULL开发笔记（一）——环境搭建、镜像烧录、网络连接</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本系列为使用野火IMX6ULL开发的学习笔记，使用的开发板为如下：<br> <img src="https://images2.imgbox.com/39/34/J32sDXKB_o.png" alt="在这里插入图片描述"><br> 具有的硬件资源有如下：<br> <img src="https://images2.imgbox.com/62/ac/o4AElHRY_o.png" alt="在这里插入图片描述"><br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_5" rel="nofollow">一、环境搭建</a></li><li><ul><li><a href="#Win11WSL_7" rel="nofollow">Win11安装WSL</a></li><li><a href="#_13" rel="nofollow">安装串口驱动</a></li><li><a href="#_19" rel="nofollow">安装串口工具</a></li><li><a href="#Ubuntuwindows_25" rel="nofollow">安装Ubuntu与windows文件互传</a></li></ul> 
   </li><li><a href="#_50" rel="nofollow">二、镜像烧录</a></li><li><ul><li><a href="#_98" rel="nofollow">修改串口终端登录前信息</a></li></ul> 
   </li><li><a href="#fireconfig_104" rel="nofollow">三、fire-config工具配置</a></li><li><ul><li><a href="#EMMCNAND_FLASH_118" rel="nofollow">EMMC/NAND FLASH刷机</a></li></ul> 
   </li><li><a href="#WIFI_134" rel="nofollow">四、WIFI连接</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_5"></a>一、环境搭建</h3> 
<h4><a id="Win11WSL_7"></a>Win11安装WSL</h4> 
<p>https://blog.csdn.net/weixin_44301630/article/details/122390018</p> 
<p>安装虚拟机也可以，需要安装一个Ubuntu系统。直接在微软商城中搜索<code>ubuntu20.04</code>。</p> 
<h4><a id="_13"></a>安装串口驱动</h4> 
<ul><li> <p>CH340（波特率115200）</p> <p>https://www.wch.cn/products/CH340.html</p> </li></ul> 
<h4><a id="_19"></a>安装串口工具</h4> 
<p>在 Windows 下有很多种终端工具，例如 MobaXterm、secureCRT、xShell、Putty 等，但是最推荐的还是MobaXterm：</p> 
<ul><li>MobaXterm：https://mobaxterm.mobatek.net/download.html</li></ul> 
<h4><a id="Ubuntuwindows_25"></a>安装Ubuntu与windows文件互传</h4> 
<ul><li> <p>FileZilla下载地址：https://www.filezilla.cn/download</p> </li><li> <p>开启Ubuntu下的FTP服务：<code>sudo apt-get install vsftpd</code></p> </li><li> <p>等待软件自动安装，安装后打开配置文件：<code>sudo vi /etc/vsftpd.conf</code></p> </li><li> <p>打开 vsftpd.conf 文件以后找到如下两行，输入i进行编辑，按下Esc，输入“:和wq”保存：</p> <pre><code class="prism language-shell"><span class="token assign-left variable">local_enable</span><span class="token operator">=</span>YES
<span class="token assign-left variable">write_enable</span><span class="token operator">=</span>YES
</code></pre> <p><img src="https://images2.imgbox.com/8f/56/1vvzK0SN_o.png" alt="在这里插入图片描述"><br> 确保上面两行不能注释，把他打开：<br> <img src="https://images2.imgbox.com/d6/b0/1pf3rJ5t_o.png" alt="在这里插入图片描述"></p> </li><li> <p>使用如下命令重启FTP服务：</p> <p><code>sudo /etc/init.d/vsftpd restart</code></p> </li><li> <p>使用FileZillla连接到Ubuntu的FTP服务器：<br> <img src="https://images2.imgbox.com/8a/fc/WDrDzou4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/be/c7/AUjYZWAf_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<h3><a id="_50"></a>二、镜像烧录</h3> 
<p>安装Ubuntu系统时，我们使用到了Ubuntu提供的<code>“iso”</code>后缀的系统镜像文件，这是在PC上常用的系统镜像文件格式。<br> 所谓镜像文件其实与压缩包类似，它将一系列文件按照特定的格式制作成单个文件，方便用户下载和使用。<code> iso</code>文件的一个重要特性是<strong>它能被某些软件识别直接刻录到光盘上，而虚拟机虚拟的光驱则可以直接把<code>iso</code>文件像光盘一样加载读取， 从而通过<code>iso</code>系统镜像安装操作系统。</strong><br> 对于<code>img</code>文件格式，主要用于创建磁盘的镜像文件（disk image）， 它可以用来打包整个磁盘或光盘的内容。<strong><code>img</code>是<code>iso</code>文件格式的超集，它向后兼容iso文件格式。</strong></p> 
<p>嵌入式单板机一般没有光驱，而它们通常支持运行SD卡里的操作系统，所以嵌入式的系统镜像通常使用img文件的形式发布。 人们通常在PC上使用软件通过读卡器把img镜像文件烧录至SD卡，然后把SD接入到嵌入式单板机上运行。</p> 
<ul><li>准备一张Micro SD卡，容量需要2GB以上。</li><li>下载 <code>Etcher </code>软件，用于烧录镜像至 SD 卡，下载地址：<a href="" rel="nofollow">https://www.balena.io/etcher</a> ，根据自 己的电脑系统下载对应版本即可。</li><li>下载野火最新的 Debian 镜像：<a href="" rel="nofollow">https://pan.baidu.com/s/1pqVHVIdY97VApz-rVVa8pQ</a> 提取码：uge1</li></ul> 
<p><code>imx6ull-lubancat-carp-console-armhf-2022-02-10.img.xz</code>: Debian的纯净版固件，没有带桌面环境和野火的QT App。<br> <code>imx6ull-lubancat-carp-qt-armhf-2022-02-10.img.xz</code>: 具有QT App功能的Debian固件,系统启动后会进入QT App的界面。<br> debian镜像为img格式文件，由<code>bootloader、设备树、Linux内核、根文件系统</code>四部分构成。</p> 
<ul><li>把开发板控制启动模式的 BOOT 拨码开关设置成 SD 卡启动模式，即 2-5-8 档位至 ON 档。</li><li>给开发板接入烧录好的 SD 卡，启动运行。</li></ul> 
<p><strong>注意：开发板插入烧录好 Debian 镜像的 SD 卡，调整拨码开关为 SD 卡启动方式，然后注意使用 SD 卡时开发板右下角的 J2 竖排针不要盖有跳帽需断开（此为 WIFI 模块供电，核心板只引出一路 SDIO，SD 卡和 WIFI 不能同时用）；开发板第一次从 SD 卡启动时，系统会自动进行 SD 卡扩容，以保证充分利用 SD 卡存储空 间。扩容完毕后，系统自动重启生效。</strong><br> <img src="https://images2.imgbox.com/ba/c8/D0rehq80_o.png" alt="在这里插入图片描述"><br> 插入SD卡，烧录完后即可登录：</p> 
<p>普通用户（带 sudo 权限）：</p> 
<pre><code class="prism language-shell">账户: debian
密码: temppwd
</code></pre> 
<p>ROOT用户：</p> 
<pre><code class="prism language-shell">账户: root
密码: root
</code></pre> 
<p><img src="https://images2.imgbox.com/aa/db/7OLCYa3Q_o.png" alt="在这里插入图片描述"></p> 
<p>这样即可登录。可以使用<code>passwd</code>来进行对密码的修改。</p> 
<p>使用 SSH 终端登录时，可以通过主机名和 IP 连接板子：</p> 
<pre><code class="prism language-shell">主机名: npi
IP 不固定，默认由路由动态分配，可先通过串口终端连接，使用 <span class="token function">ifconfig</span> 命令查看具体 IP
</code></pre> 
<p>若要修改主机名，修改 /etc/hostname 文件中的内容即可。</p> 
<h4><a id="_98"></a>修改串口终端登录前信息</h4> 
<p>希望登录串口终端时不显示账号密码信息，或者显示我们需要的信息：</p> 
<p><code>sudo vim /etc/issue </code>，如果没有vim工具，可以使用nano。</p> 
<h3><a id="fireconfig_104"></a>三、fire-config工具配置</h3> 
<p><code>sudo fire-config</code>可以进行使用，只可以用在野火最新的debian系统上。（这个功能类似于Nuttx操作系统下的那个菜单栏，把很多通讯设备等都注册为可在菜单上选中并且执行的设备）。</p> 
<p><img src="https://images2.imgbox.com/2d/13/oxkYvtLA_o.png" alt="在这里插入图片描述"></p> 
<p>fire-config工具集成了<code>Device Tree Overlays</code>机制，用来管理一些硬件资源的分配和模块的加载， 从而缓解多个驱动程序争用系统资源的问题。</p> 
<p>在传统开发模式中，这个机制通常是由设备树来完成的：在开发之前根据项目需求， <strong>提前确定系统中所有用到的硬件设备</strong>。在设备树中把所有的外围设备信息以设备树特定的语法进行描述， 在设备树被编译为<code>dtb</code>文件后，被linux内核加载使用。</p> 
<p>可以看到，在传统开发过程，一旦硬件资源发生变化，就要重新修改、编译、下载设备树。比较极端的情况是: 当项目中要支持多种的硬件模块，而不同模块间往往会共用某些系统资源(如IO引脚)。 一旦系统要兼容模块任意组合使用，那么随着模块数量增加，需要编译的设备树数量将爆炸增长。</p> 
<p>因此，使用传统设备树是不利于项目的维护和扩展的。内核为了解决这个提出了一套新的解决方案， 那就是<code>Device Tree Overlays</code>，中文上可理解为“设备树插件”。 它的核心原理是，通过扩展传统的设备树语法，使得各个硬件模块的信息可以独立地用新的设备树语法来描述。 这样一来，<strong>传统的主设备树中只需要保留最基础的硬件信息(主要是cpu和内存)，其他模块单独编译成“设备树插件”</strong>。 在系统实际使用时，根据实际应用情景，需要用到哪些硬件模块就把对应的设备树插件加入到主设备树即可。</p> 
<h4><a id="EMMCNAND_FLASH_118"></a>EMMC/NAND FLASH刷机</h4> 
<p><img src="https://images2.imgbox.com/92/a3/6AUwcQhM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c8/0a/IhC2m8TI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5f/68/KKopBKb6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ac/4f/9Raoixsm_o.png" alt="在这里插入图片描述"><br> 之后重启开发板即可。</p> 
<p><img src="https://images2.imgbox.com/d9/a2/vf0YkQ0e_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f4/f6/nklKzjO1_o.png" alt="在这里插入图片描述"><br> 等待一段时间即可。登录进去后，需要关闭SD卡刷机选项：</p> 
<p><img src="https://images2.imgbox.com/49/84/4L1xNzF9_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/57/24/P7JY8T1P_o.png" alt="在这里插入图片描述"><br> 之后执行<code>sudo poweroff</code>关机。之后更改开发板的启动方式为EMMC启动，拨码到2457位，然后拆卸SD卡，然后长按<code>ON/OFF</code>键进行开机。</p> 
<h3><a id="WIFI_134"></a>四、WIFI连接</h3> 
<p>由于SD卡与WIFI共用同一个sdio接口，所以我们需要把跳帽挪动到原来的地方，给WiFi模块供电：<br> <img src="https://images2.imgbox.com/a3/16/XpC4ZcQo_o.png" alt="在这里插入图片描述"><br> 使用fire-config工具来进行配置WiFi：<br> <img src="https://images2.imgbox.com/68/c2/bAfR5WeT_o.png" alt="在这里插入图片描述"><br> 可以使用命令<code>sudo echo "1 4 1 7" &gt; /proc/sys/kernel/printk</code>来屏蔽掉一些没有用的打印。之后打开WiFi：<br> <img src="https://images2.imgbox.com/a7/7d/1k3ppC2i_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/36/5d/no63n7h3_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b8/7a/xOVXAaCr_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b1/e7/35KiXXop_o.png" alt="在这里插入图片描述"></p> 
<p>再次重启：<br> <img src="https://images2.imgbox.com/4f/90/G6L7gwE5_o.png" alt="在这里插入图片描述"><br> 重启后可以看到WiFi设备被打开了：<br> <img src="https://images2.imgbox.com/92/25/SGCBm9a8_o.png" alt="在这里插入图片描述"><br> 之后让其识别周围的WiFi：<br> <img src="https://images2.imgbox.com/96/33/pNxKd0Ie_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c3/54/kTmdYarX_o.png" alt="在这里插入图片描述"><br> 之后进入查找：<br> <img src="https://images2.imgbox.com/d1/45/tEyC6igq_o.png" alt="在这里插入图片描述">如果遇到查找到的WiFi较少，可以将天线的位置进行调整，不要压着天线。</p> 
<p><img src="https://images2.imgbox.com/99/2c/RwVoskPF_o.png" alt="在这里插入图片描述"><br> <code>signal</code>代表WiFi强度，越靠前数字越小代表信号强度越高。之后进行WiFi连接：<br> <img src="https://images2.imgbox.com/95/e3/MEGqYrot_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/20/6b/nPFbLaY1_o.png" alt="在这里插入图片描述"><br> 之后输入对应的密码：<br> <img src="https://images2.imgbox.com/a8/13/dQVEsHOm_o.png" alt="在这里插入图片描述"><br> 之后再次进行重启，会自动连接上WiFi：<br> <img src="https://images2.imgbox.com/2f/77/HT5ZjkA7_o.png" alt="在这里插入图片描述"><br> 使用命令<code>ifconfig</code>，可以看到我们连接的WiFi信息：<br> <img src="https://images2.imgbox.com/31/a5/z6moqDeB_o.png" alt="在这里插入图片描述"><br> 之后ping一下百度的网址：<br> <img src="https://images2.imgbox.com/d4/77/s3frWAbQ_o.png" alt="在这里插入图片描述"><br> 说明成功联网。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/05412c9eb203c7f0d6b5ec91329f517e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ajax入门-Express框架介绍和基本使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cbef94b173e53e36c8392680601e102f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【分布式锁】---简单明了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>