<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue  网络请求demo - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue  网络请求demo" />
<meta property="og:description" content="异步等待demo:
axios-demo:
本地数据显示：
&lt;!-- 本地数据显示 --&gt; &lt;ul v-show=&#34;isShowNativeResult&#34;&gt; &lt;li v-for=&#34;(data,index) in datas&#34;&gt; &lt;span&gt; {{data.name}} &lt;/span&gt; &lt;span style=&#34;margin-left:10px;&#34;&gt; {{data.address}} &lt;/span&gt; &lt;/li&gt; &lt;/ul&gt; &lt;!-- gankio数据 --&gt; &lt;ul v-show=&#34;isShowGankIoResult&#34;&gt; &lt;li v-for=&#34;(item,index) in gankIoDatas&#34; class=&#34;listItem&#34;&gt; &lt;img :src=&#34;item.url&#34; alt=&#34;&#34; style=&#34;width:200px&#34;&gt; &lt;span&gt;整理者：{{item.who}}&lt;/span&gt; &lt;/li&gt; &lt;/ul&gt; 模拟json 请求：
// 本地请求 json 模拟 getData() { var that = this this.$axios.get(&#39;../static/mydata.json&#39;) .then(response =&gt;{ console.log(response.data) if(response.data.status == &#39;0001&#39;){ that.datas = response.data.datas that.isShowNativeResult = true that.isShowGankIoResult = false } }) .catch(error =&gt;{ console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c73e610a5d0ca166e063f949410f7a33/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-25T19:46:00+08:00" />
<meta property="article:modified_time" content="2020-02-25T19:46:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue  网络请求demo</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>异步等待demo:</p> 
<p> </p> 
<p>axios-demo:</p> 
<p>本地数据显示：</p> 
<pre><code> &lt;!-- 本地数据显示 --&gt;
    &lt;ul v-show="isShowNativeResult"&gt;
      &lt;li v-for="(data,index) in datas"&gt;
        &lt;span&gt;
          {<!-- -->{data.name}}
        &lt;/span&gt;
        &lt;span style="margin-left:10px;"&gt;
          {<!-- -->{data.address}}
        &lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
    &lt;!-- gankio数据 --&gt;
    &lt;ul v-show="isShowGankIoResult"&gt;
      &lt;li v-for="(item,index) in gankIoDatas" class="listItem"&gt;
        &lt;img :src="item.url" alt="" style="width:200px"&gt;
        &lt;span&gt;整理者：{<!-- -->{item.who}}&lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;</code></pre> 
<p>模拟json 请求：</p> 
<pre><code> // 本地请求 json 模拟
    getData() {
      var that = this
      this.$axios.get('../static/mydata.json')
        .then(response =&gt;{
          console.log(response.data)
          if(response.data.status == '0001'){
            that.datas = response.data.datas
            that.isShowNativeResult = true
            that.isShowGankIoResult = false
          }
        })
        .catch(error =&gt;{
          console.log(error)
          that.isShowNativeResult = false
          that.isShowGankIoResult = false
        })
    },</code></pre> 
<p>//这里给出真实的服务器的请求：</p> 
<pre><code> getGanData(){
      var that = this
      // 比如到得干货集中营 福利 10 月 1 号的文章列表
      this.$axios.get('http://gank.io/api/data/福利/10/1')
      .then(response =&gt;{
        console.log(response.data)
        that.gankIoDatas = response.data.results
        that.isShowNativeResult = false
        that.isShowGankIoResult = true
      })
      .catch(error =&gt;{
        console.log('error')
        that.isShowNativeResult = false
        that.isShowGankIoResult = false
      })
    }</code></pre> 
<p>考虑3：自定义一个ajax 请求事件：</p> 
<pre><code> &lt;div class="hello"&gt;
    &lt;button class="mybtn" type="button" name="button" @click="getData"&gt;点击请求&lt;/button&gt;
    &lt;ul&gt;
      &lt;li v-for="(data,index) in datas"&gt;
        &lt;span&gt;
          {<!-- -->{data.name}}
        &lt;/span&gt;
        &lt;span style="margin-left:10px;"&gt;
          {<!-- -->{data.address}}
        &lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;</code></pre> 
<p> </p> 
<p>//局部和全局使用注册添加一个this:</p> 
<pre><code>methods:{
    getData() {
      var that = this
      // 全局注册可以添加一个 this
      this.ajax({
  			methods:'GET',
  			url:'../static/mydata.json',
  			data:{},
  			success:function(res){
  				console.log(res)
          console.log('请求成功，成功的状态码是：'+res.status)
  				if(res.status=='0001'){
            that.datas = res.datas
  				}
  			},
  			faile:function(res) {
          console.log(res)
  			}
  		})
    }
  }
}</code></pre> 
<p>考虑4： jquery ajax 点击请求</p> 
<pre><code>  &lt;ul&gt;
      &lt;li v-for="(data,index) in datas"&gt;
        &lt;span&gt;
          {<!-- -->{data.name}}
        &lt;/span&gt;
        &lt;span style="margin-left:10px;"&gt;
          {<!-- -->{data.address}}
        &lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;</code></pre> 
<p>脚本：</p> 
<p>  </p> 
<pre><code>methods:{
    getdata() {
      var that = this
      $.ajax({
        type:'GET',
        url:'../static/mydata.json',
        dataType:"json",
        success:function(res){
          if(res.status =='0001'){
            that.datas = res.datas
          }
          console.log(res)
        },
        error:function(error) {
          console.log('error')
        }
      })
    }
  }</code></pre> 
<p> </p> 
<p> </p> 
<p>考虑5 ：fetch demo:</p> 
<pre><code>&lt;div class="hello"&gt;
    &lt;button  class="btn" type="button" name="button" @click="getData"&gt;请求本地&lt;/button&gt;
    &lt;button  class="btn" type="button" name="button" @click="getGankIO"&gt;fetch 请求 gankio 数据&lt;/button&gt;
    &lt;!-- 本地请求 --&gt;
    &lt;ul v-show="isShowNativeResult"&gt;
      &lt;li v-for="(data,index) in datas"&gt;
        &lt;span&gt;
          {<!-- -->{data.name}}
        &lt;/span&gt;
        &lt;span style="margin-left:10px;"&gt;
          {<!-- -->{data.address}}
        &lt;/span&gt;
      &lt;/li&gt;
    &lt;/ul&gt;</code></pre> 
<p>gankio 数据：</p> 
<pre><code> getData() {
      // 本地请求 json
      fetch('../static/mydata.json')
      .then(response =&gt;{
        return response.json()
      })
      .then(myJson=&gt;{
          console.log(myJson)
          if(myJson.status=='0001'){
            this.datas = myJson.datas
            this.isShowNativeResult = true
            this.isShowGankIoResult = false
          }
      })
      .catch(e =&gt; {
        console.log('error',e)
        this.isShowNativeResult = false
        this.isShowGankIoResult = false
      })
    },</code></pre> 
<p>资源文件：请求文件：<br>  </p> 
<pre><code>&lt;button class="btn" type="button" name="button" @click="getData"&gt;点击&lt;/button&gt;
     &lt;button class="btn" type="button" name="button" @click="getGanData"&gt;请求 gankio 数据&lt;/button&gt;
     &lt;!-- 本地数据显示 --&gt;
     &lt;ul v-show="isShowNativeResult"&gt;
       &lt;li v-for="(data,index) in datas"&gt;
         &lt;span&gt;
           {<!-- -->{data.name}}
         &lt;/span&gt;
         &lt;span style="margin-left:10px;"&gt;
           {<!-- -->{data.address}}
         &lt;/span&gt;
       &lt;/li&gt;
     &lt;/ul&gt;
     &lt;!-- gankio数据 --&gt;
     &lt;ul v-show="isShowGankIoResult"&gt;
       &lt;li v-for="(item,index) in gankIoDatas" class="listItem"&gt;
         &lt;img :src="item.url" alt="" style="width:245px"&gt;
         &lt;span&gt;整理者：{<!-- -->{item.who}}&lt;/span&gt;
       &lt;/li&gt;
     &lt;/ul&gt;
  &lt;/div&gt;</code></pre> 
<p>methods:</p> 
<pre><code>getData() {
      var that = this
      this.$http.get('../static/mydata.json').then(response =&gt;{
        console.log(response)
        if(response.body.status == '0001'){
          that.datas = response.body.datas
          that.isShowNativeResult = true
          that.isShowGankIoResult = false
        }
      },response =&gt; {
        console.log('error')
        that.isShowNativeResult = false
        that.isShowGankIoResult = false
      })
    },</code></pre> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0d6eaea99bb73520593bda8a4a2cd5b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">企业微信脚手架（第三方）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8a8b2eae858981893478bc1a44316dfb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">百度富文本编辑器 ueditor插入视频有误，微信小程序无法解析embed标签问题解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>