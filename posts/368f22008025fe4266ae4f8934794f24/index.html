<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python解决ImportError: No module named google.protobuf - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python解决ImportError: No module named google.protobuf" />
<meta property="og:description" content="原文链接：http://blog.csdn.net/paynetiger/article/details/8197326
关于protocol buffer的优点，这里就不多贴废话了，如果涉及到数据传输和解析，使用pb会比自己去写解析代码更有效率，至少对于大部分而言是这样的。。
一、下载&amp;安装
要使用之前先到code.google.com上搜索protocol buffer，下载到本地，解压后依次执行：
./configure
make
make check
make install
最后一步涉及到权限，可能会需要sudo。
二、定义一个proto文件
下面依然是给出一个简单的例子，要使用proto首先需要自己定义一个proto文件，定义一个people.proto文件，内容如下：
message people
{
optional string name = 1;
optional int32 height = 2;
}
三、生成一个python可用的py文件
然后就是生成对应的py文件，命令如下：
protoc -I=./ --python_out=./ people.proto
其中-I是source的路径，--python_out表示对应python库的生成路径，然后是对应的proto文件。当然，pb还支持c&#43;&#43;和java，修改--python_out即可。
完成后就有对应的people_pb2.py文件了。导入后即可使用，第一次安装后直接用应该会提示：ImportError: No module named google.protobuf，这是因为找不到对应的库路径导致，到你下载的pb路径下，找到python路径，执行sudo python setup.py install，执行完后可以通过执行sudo python setup.py test检查是否有安装成功，如果最后提示
----------------------------------------------------------------------
Ran 193 tests in 0.327s
OK
那么就是安装成功了，此时再导入对应的pb2.py文件即可使用。
--------------------------------------------------------------------------------------------------------------------------------------------------------
执行python setup.py install 时可能有：This script requires setuptools version 0.6c11 to run
可从：http://download.csdn.net/download/fhqsse220/5602687下载
gzip -d setuptools-0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/368f22008025fe4266ae4f8934794f24/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-12-10T11:52:45+08:00" />
<meta property="article:modified_time" content="2013-12-10T11:52:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python解决ImportError: No module named google.protobuf</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:14px">原文链接：</span><a target="_blank" href="http://blog.csdn.net/paynetiger/article/details/8197326" rel="noopener noreferrer"><span style="font-size:14px">http://blog.csdn.net/paynetiger/article/details/8197326</span></a></p> 
<p><span style="font-size:14px"></span> <span style="font-size:14px">关于protocol buffer的优点，这里就不多贴废话了，如果涉及到数据传输和解析，使用pb会比自己去写解析代码更有效率，至少对于大部分而言是这样的。。</span></p> 
<p><span style="font-size:14px">一、下载&amp;安装</span></p> 
<p><span style="font-size:14px">要使用之前先到code.google.com上搜索protocol buffer，下载到本地，解压后依次执行：</span></p> 
<p><span style="font-size:14px">./configure</span></p> 
<p><span style="font-size:14px">make</span></p> 
<p><span style="font-size:14px">make check</span></p> 
<p><span style="font-size:14px">make install</span></p> 
<p><span style="font-size:14px">最后一步涉及到权限，可能会需要sudo。</span></p> 
<p><br> <span style="font-size:14px">二、定义一个proto文件</span></p> 
<p><span style="font-size:14px">下面依然是给出一个简单的例子，要使用proto首先需要自己定义一个proto文件，定义一个people.proto文件，内容如下：</span></p> 
<p><span style="font-size:14px">message people<br> {<!-- --><br>     optional string name = 1;<br>     optional int32 height = 2;<br> }</span></p> 
<p><span style="font-size:14px"></span> </p> 
<p><span style="font-size:14px">三、生成一个python可用的py文件</span></p> 
<p><span style="font-size:14px">然后就是生成对应的py文件，命令如下：</span></p> 
<p><span style="font-size:14px; color:#FF0000">protoc -I=./ --python_out=./ people.proto<br> </span></p> 
<p><span style="font-size:14px"><span style="color:#FF0000">其中-I是source的路径，--python_out表示对应python库的生成路径，然后是对应的proto文件。</span>当然，pb还支持c++和java，修改--python_out即可。</span></p> 
<p><span style="font-size:14px">完成后就有对应的people_pb2.py文件了。导入后即可使用，第一次安装后直接用应该会提示：ImportError: No module named google.protobuf，这是因为找不到对应的库路径导致，到你下载的pb路径下，找到python路径，执行sudo python setup.py install，执行完后可以通过执行sudo python setup.py test检查是否有安装成功，如果最后提示</span></p> 
<p><span style="font-size:14px">----------------------------------------------------------------------<br> Ran 193 tests in 0.327s<br> OK<br> </span></p> 
<p><span style="font-size:14px">那么就是安装成功了，此时再导入对应的pb2.py文件即可使用。</span></p> 
<p><span style="font-size:14px">--------------------------------------------------------------------------------------------------------------------------------------------------------</span></p> 
<p><span style="font-size:14px">执行python setup.py install 时可能有：This script requires setuptools version 0.6c11 to run</span></p> 
<p><span style="font-size:14px">可从：<a target="_blank" href="http://download.csdn.net/download/fhqsse220/5602687" rel="noopener noreferrer">http://download.csdn.net/download/fhqsse220/5602687</a>下载</span></p> 
<p>gzip -d setuptools-0.6c11.tar.gz </p> 
<p>tar xf setuptools-0.6c11.tar</p> 
<p>cd setuptools-0.6c11python setup.py install</p> 
<p>返回如下则表示安装成功</p> 
<p>Installed /usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg</p> 
<p>Processing dependencies for setuptools==0.6c11</p> 
<p>Finished processing dependencies for setuptools==0.6c11</p> 
<p>----------------------------------------------------------------------------------------------</p> 
<p>继续报错：error: package directory 'google/protobuf/compiler' does not exist</p> 
<p>解决办法：在google/protobuf/下创建compiler文件夹</p> 
<p>再次在protobuf文件夹下运行：python setup.py install 。最终提示安装成功。</p> 
<p> ---------------------------------------------------------------------------------------------------------------------------------------------------------------------</p> 
<p><span style="font-size:14px">四、导入使用的简单例子</span></p> 
<p><span style="font-size:14px">给出一个简单的调试例子：</span></p> 
<p><span style="font-size:14px"></span></p> 
<div class="dp-highlighter bg_python"> 
 <div class="bar"> 
  <div class="tools"> 
   <span style="font-size:14px"><strong>[python]</strong> </span> 
   <a target="_blank" class="ViewSource" title="view plain" href="http://blog.csdn.net/paynetiger/article/details/8197326#" rel="noopener noreferrer"><span style="font-size:14px">view plain</span></a> 
   <a target="_blank" class="CopyToClipboard" title="copy" href="http://blog.csdn.net/paynetiger/article/details/8197326#" rel="noopener noreferrer"><span style="font-size:14px">copy</span></a> 
   <a target="_blank" class="PrintSource" title="print" href="http://blog.csdn.net/paynetiger/article/details/8197326#" rel="noopener noreferrer"><span style="font-size:14px">print</span></a> 
   <a target="_blank" class="About" title="?" href="http://blog.csdn.net/paynetiger/article/details/8197326#" rel="noopener noreferrer"><span style="font-size:14px">?</span></a> 
  </div> 
 </div> 
 <ol class="dp-py"><li class="alt"><span style="font-size:14px"><span class="keyword">import</span> people_pb2 </span></li><li><span style="font-size:14px">  </span></li><li class="alt"><span style="font-size:14px">pbFirstPeople = people_pb2.people() </span></li><li><span style="font-size:14px">pbFirstPeople.name = <span class="string"> "joey"</span>  </span></li><li class="alt"><span style="font-size:14px">pbFirstPeople.height = <span class="number"> 160</span>  </span></li><li><span style="font-size:14px"><span class="keyword">print</span> pbFirstPeople </span></li></ol> 
</div> 
<pre><code class="language-python"><span style="font-size:14px;">import people_pb2

pbFirstPeople = people_pb2.people()
pbFirstPeople.name = "joey"
pbFirstPeople.height = 160
print pbFirstPeople</span></code></pre> 
<p><br> <span style="font-size:14px">输出结果为：</span></p> 
<p><span style="font-size:14px">name: "joey"<br> height: 160<br> </span></p> 
<p><span style="font-size:14px">至此就完成了一个简单的pb下载安装以及应用的过程，关于pb的详细使用，可以在code.google.com上进行查询。</span></p> 
<p><span style="font-size:14px"></span> </p> 
<p><span style="font-size:14px">另一参考文件：<a target="_blank" href="http://my.oschina.net/leejun2005/blog/109679" rel="nofollow noopener noreferrer">http://my.oschina.net/leejun2005/blog/109679</a>   （关于 python ImportError: No module named 的问题)</span></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/78e3c6f6395b7e47f7e410147dba6c6d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos安装bugfree</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9f7cd98fa001c3c3409977923c64afbe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">利用Cookie保存相应信息</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>