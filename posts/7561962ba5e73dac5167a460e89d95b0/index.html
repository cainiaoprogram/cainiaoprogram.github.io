<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>YoloV5å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ•™ç‰©ä½“æ£€æµ‹â€”â€”YoloV5 - èœé¸Ÿç¨‹åºå‘˜åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="YoloV5å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ•™ç‰©ä½“æ£€æµ‹â€”â€”YoloV5" />
<meta property="og:description" content="ç›®å½•
æ‘˜è¦
è®­ç»ƒ
1ã€ä¸‹è½½ä»£ç 
2ã€é…ç½®ç¯å¢ƒ
3ã€å‡†å¤‡æ•°æ®é›†
4ã€ç”Ÿæˆæ•°æ®é›†
5ã€ä¿®æ”¹é…ç½®å‚æ•°
6ã€ä¿®æ”¹train.pyçš„å‚æ•°
7ã€æŸ¥çœ‹è®­ç»ƒç»“æœ
æµ‹è¯•
æ‘˜è¦ YOLOV5ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´å¹¶ä¸æ˜¯YOLOçš„ç¬¬äº”ä¸ªç‰ˆæœ¬ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰å¾—åˆ°YOLOä¹‹çˆ¶Joe Redmonçš„è®¤å¯ï¼Œä½†æ˜¯ç»™å‡ºçš„æµ‹è¯•æ•°æ®æ€»ä½“è¡¨ç°è¿˜æ˜¯ä¸é”™ã€‚è¯¦ç»†æ•°æ®å¦‚ä¸‹ï¼š
YOLOv5å¹¶ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¨¡å‹å®¶æ—ï¼ŒåŒ…æ‹¬äº†YOLOv5sã€YOLOv5mã€YOLOv5lã€YOLOv5xã€YOLOv5x&#43;TTAï¼Œè¿™ç‚¹æœ‰ç‚¹å„¿åƒEfficientDetã€‚ç”±äºæ²¡æœ‰æ‰¾åˆ°V5çš„è®ºæ–‡ï¼Œæˆ‘ä»¬ä¹Ÿåªèƒ½ä»ä»£ç å»å­¦ä¹ å®ƒã€‚æ€»ä½“ä¸Šå’ŒYOLOV4å·®ä¸å¤šï¼Œå¯ä»¥è®¤ä¸ºæ˜¯YOLOV5çš„åŠ å¼ºç‰ˆã€‚
é¡¹ç›®åœ°å€ï¼šGitHub - ultralytics/yolov5: YOLOv5 ğŸš€ in PyTorch &gt; ONNX &gt; CoreML &gt; TFLite
è®­ç»ƒ 1ã€ä¸‹è½½ä»£ç  é¡¹ç›®åœ°å€ï¼šGitHub - ultralytics/yolov5: YOLOv5 ğŸš€ in PyTorch &gt; ONNX &gt; CoreML &gt; TFLiteï¼Œæœ€è¿‘ä½œè€…åˆæ›´æ–°äº†ä¸€äº›ä»£ç ã€‚
2ã€é…ç½®ç¯å¢ƒ matplotlib&gt;=3.2.2 numpy&gt;=1.18.5 opencv-python&gt;=4.1.2 pillow PyYAML&gt;=5.3 scipy&gt;=1.4.1 tensorboard&gt;=2.2 torch&gt;=1.6.0 torchvision&gt;=0.7.0 tqdm&gt;=4.41.0 3ã€å‡†å¤‡æ•°æ®é›† æ•°æ®é›†é‡‡ç”¨Labelmeæ ‡æ³¨çš„æ•°æ®æ ¼å¼ï¼Œæ•°æ®é›†ä»RSODæ•°æ®é›†ä¸­è·å–äº†é£æœºå’Œæ²¹æ¡¶ä¸¤ç±»æ•°æ®é›†ï¼Œå¹¶å°†å…¶è½¬ä¸ºLabelmeæ ‡æ³¨çš„æ•°æ®é›†ã€‚
æ•°æ®é›†çš„åœ°å€ï¼š https://pan.baidu.com/s/1iTUpvA9_cwx1qiH8zbRmDg
æå–ç ï¼šgr6g
æˆ–è€…ï¼šLabelmeData.zip_ç‰©ä½“æ£€æµ‹yolov5-æ·±åº¦å­¦ä¹ æ–‡æ¡£ç±»èµ„æº-CSDNä¸‹è½½
å°†ä¸‹è½½çš„æ•°æ®é›†è§£å‹åæ”¾åˆ°å·¥ç¨‹çš„æ ¹ç›®å½•ã€‚ä¸ºä¸‹ä¸€æ­¥ç”Ÿæˆæµ‹è¯•ç”¨çš„æ•°æ®é›†åšå‡†å¤‡ã€‚å¦‚ä¸‹å›¾ï¼š
4ã€ç”Ÿæˆæ•°æ®é›† YoloV5çš„æ•°æ®é›†å’Œä»¥å‰ç‰ˆæœ¬çš„æ•°æ®é›†å¹¶ä¸ç›¸åŒï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹è½¬æ¢åçš„æ•°æ®é›†ã€‚
æ•°æ®ç»“æ„å¦‚ä¸‹å›¾ï¼š
imagesæ–‡ä»¶å¤¹å­˜æ”¾trainå’Œvalçš„å›¾ç‰‡
labelsé‡Œé¢å­˜æ”¾trainå’Œvalçš„ç‰©ä½“æ•°æ®ï¼Œé‡Œé¢çš„æ¯ä¸ªtxtæ–‡ä»¶å’Œimagesé‡Œé¢çš„å›¾ç‰‡æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚
txtæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š
æ ¼å¼ï¼šç‰©ä½“ç±»åˆ« x y w hÂ åæ ‡æ˜¯ä¸æ˜¯çœŸå®çš„åæ ‡ï¼Œæ˜¯å°†åæ ‡é™¤ä»¥å®½é«˜åçš„è®¡ç®—å‡ºæ¥çš„ï¼Œæ˜¯ç›¸å¯¹äºå®½å’Œé«˜çš„æ¯”ä¾‹ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7561962ba5e73dac5167a460e89d95b0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-26T16:02:09+08:00" />
<meta property="article:modified_time" content="2022-12-26T16:02:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="èœé¸Ÿç¨‹åºå‘˜åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">èœé¸Ÿç¨‹åºå‘˜åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">YoloV5å®æˆ˜ï¼šæ‰‹æŠŠæ‰‹æ•™ç‰©ä½“æ£€æµ‹â€”â€”YoloV5</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"></p> 
<p><strong>ç›®å½•</strong></p> 
<p id="%E6%91%98%E8%A6%81-toc" style="margin-left:0px;"><a href="#%E6%91%98%E8%A6%81" rel="nofollow">æ‘˜è¦</a></p> 
<p id="%E8%AE%AD%E7%BB%83-toc" style="margin-left:0px;"><a href="#%E8%AE%AD%E7%BB%83" rel="nofollow">è®­ç»ƒ</a></p> 
<p id="1%E3%80%81%E4%B8%8B%E8%BD%BD%E4%BB%A3%E7%A0%81-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E4%B8%8B%E8%BD%BD%E4%BB%A3%E7%A0%81" rel="nofollow">1ã€ä¸‹è½½ä»£ç </a></p> 
<p id="2%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83" rel="nofollow">2ã€é…ç½®ç¯å¢ƒ</a></p> 
<p id="3%E3%80%81%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E9%9B%86-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E9%9B%86" rel="nofollow">3ã€å‡†å¤‡æ•°æ®é›†</a></p> 
<p id="4%E3%80%81%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E9%9B%86-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E9%9B%86" rel="nofollow">4ã€ç”Ÿæˆæ•°æ®é›†</a></p> 
<p id="5%E3%80%81%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0" rel="nofollow">5ã€ä¿®æ”¹é…ç½®å‚æ•°</a></p> 
<p id="6%E3%80%81%E4%BF%AE%E6%94%B9train.py%E7%9A%84%E5%8F%82%E6%95%B0-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E4%BF%AE%E6%94%B9train.py%E7%9A%84%E5%8F%82%E6%95%B0" rel="nofollow">6ã€ä¿®æ”¹train.pyçš„å‚æ•°</a></p> 
<p id="7%E3%80%81%E6%9F%A5%E7%9C%8B%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C-toc" style="margin-left:40px;"><a href="#7%E3%80%81%E6%9F%A5%E7%9C%8B%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C" rel="nofollow">7ã€æŸ¥çœ‹è®­ç»ƒç»“æœ</a></p> 
<p id="%E6%B5%8B%E8%AF%95-toc" style="margin-left:0px;"><a href="#%E6%B5%8B%E8%AF%95" rel="nofollow">æµ‹è¯•</a></p> 
<hr id="hr-toc"> 
<h2><strong>æ‘˜è¦</strong></h2> 
<p>YOLOV5ä¸¥æ ¼æ„ä¹‰ä¸Šè¯´å¹¶ä¸æ˜¯YOLOçš„ç¬¬äº”ä¸ªç‰ˆæœ¬ï¼Œå› ä¸ºå®ƒå¹¶æ²¡æœ‰å¾—åˆ°YOLOä¹‹çˆ¶Joe Redmonçš„è®¤å¯ï¼Œä½†æ˜¯ç»™å‡ºçš„æµ‹è¯•æ•°æ®æ€»ä½“è¡¨ç°è¿˜æ˜¯ä¸é”™ã€‚è¯¦ç»†æ•°æ®å¦‚ä¸‹ï¼š</p> 
<p><img alt="" height="198" src="https://images2.imgbox.com/ab/ec/BKkdEgzw_o.png" width="554"></p> 
<p></p> 
<p>YOLOv5å¹¶ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¨¡å‹å®¶æ—ï¼ŒåŒ…æ‹¬äº†YOLOv5sã€YOLOv5mã€YOLOv5lã€YOLOv5xã€YOLOv5x+TTAï¼Œè¿™ç‚¹æœ‰ç‚¹å„¿åƒEfficientDetã€‚ç”±äºæ²¡æœ‰æ‰¾åˆ°V5çš„è®ºæ–‡ï¼Œæˆ‘ä»¬ä¹Ÿåªèƒ½ä»ä»£ç å»å­¦ä¹ å®ƒã€‚æ€»ä½“ä¸Šå’ŒYOLOV4å·®ä¸å¤šï¼Œå¯ä»¥è®¤ä¸ºæ˜¯YOLOV5çš„åŠ å¼ºç‰ˆã€‚</p> 
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/ultralytics/YOLOv5" title="GitHub - ultralytics/yolov5: YOLOv5 ğŸš€ in PyTorch &gt; ONNX &gt; CoreML &gt; TFLite">GitHub - ultralytics/yolov5: YOLOv5 ğŸš€ in PyTorch &gt; ONNX &gt; CoreML &gt; TFLite</a></p> 
<h2 id="%E8%AE%AD%E7%BB%83"><strong>è®­ç»ƒ</strong></h2> 
<h3 id="1%E3%80%81%E4%B8%8B%E8%BD%BD%E4%BB%A3%E7%A0%81"><strong>1ã€ä¸‹è½½ä»£ç </strong></h3> 
<p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/ultralytics/YOLOv5" title="GitHub - ultralytics/yolov5: YOLOv5 ğŸš€ in PyTorch &gt; ONNX &gt; CoreML &gt; TFLite">GitHub - ultralytics/yolov5: YOLOv5 ğŸš€ in PyTorch &gt; ONNX &gt; CoreML &gt; TFLite</a>ï¼Œæœ€è¿‘ä½œè€…åˆæ›´æ–°äº†ä¸€äº›ä»£ç ã€‚</p> 
<p><img alt="" height="425" src="https://images2.imgbox.com/29/fe/KK91gq9v_o.png" width="554"></p> 
<p></p> 
<h3 id="2%E3%80%81%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83"><strong>2ã€é…ç½®ç¯å¢ƒ</strong></h3> 
<pre style="margin-left:0cm;"><code class="language-html">matplotlib&gt;=3.2.2

numpy&gt;=1.18.5

opencv-python&gt;=4.1.2

pillow

PyYAML&gt;=5.3

scipy&gt;=1.4.1

tensorboard&gt;=2.2

torch&gt;=1.6.0

torchvision&gt;=0.7.0

tqdm&gt;=4.41.0</code></pre> 
<p></p> 
<h3 id="3%E3%80%81%E5%87%86%E5%A4%87%E6%95%B0%E6%8D%AE%E9%9B%86"><strong>3ã€å‡†å¤‡æ•°æ®é›†</strong></h3> 
<p>æ•°æ®é›†é‡‡ç”¨Labelmeæ ‡æ³¨çš„æ•°æ®æ ¼å¼ï¼Œæ•°æ®é›†ä»RSODæ•°æ®é›†ä¸­è·å–äº†é£æœºå’Œæ²¹æ¡¶ä¸¤ç±»æ•°æ®é›†ï¼Œå¹¶å°†å…¶è½¬ä¸ºLabelmeæ ‡æ³¨çš„æ•°æ®é›†ã€‚</p> 
<p>æ•°æ®é›†çš„åœ°å€ï¼š https://pan.baidu.com/s/1iTUpvA9_cwx1qiH8zbRmDg</p> 
<p>æå–ç ï¼šgr6g</p> 
<p>æˆ–è€…ï¼š<a href="https://download.csdn.net/download/hhhhhhhhhhwwwwwwwwww/14003627" title="LabelmeData.zip_ç‰©ä½“æ£€æµ‹yolov5-æ·±åº¦å­¦ä¹ æ–‡æ¡£ç±»èµ„æº-CSDNä¸‹è½½">LabelmeData.zip_ç‰©ä½“æ£€æµ‹yolov5-æ·±åº¦å­¦ä¹ æ–‡æ¡£ç±»èµ„æº-CSDNä¸‹è½½</a></p> 
<p>å°†ä¸‹è½½çš„æ•°æ®é›†è§£å‹åæ”¾åˆ°å·¥ç¨‹çš„æ ¹ç›®å½•ã€‚ä¸ºä¸‹ä¸€æ­¥ç”Ÿæˆæµ‹è¯•ç”¨çš„æ•°æ®é›†åšå‡†å¤‡ã€‚å¦‚ä¸‹å›¾ï¼š</p> 
<p><img alt="" height="244" src="https://images2.imgbox.com/54/b4/Aj1MDQok_o.png" width="260"></p> 
<h3 id="4%E3%80%81%E7%94%9F%E6%88%90%E6%95%B0%E6%8D%AE%E9%9B%86"><strong>4ã€ç”Ÿæˆæ•°æ®é›†</strong></h3> 
<p>YoloV5çš„æ•°æ®é›†å’Œä»¥å‰ç‰ˆæœ¬çš„æ•°æ®é›†å¹¶ä¸ç›¸åŒï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹è½¬æ¢åçš„æ•°æ®é›†ã€‚</p> 
<p>æ•°æ®ç»“æ„å¦‚ä¸‹å›¾ï¼š</p> 
<p><img alt="https://img-blog.csdnimg.cn/20200924200709826.png" height="248" src="https://images2.imgbox.com/52/9b/ryd1GOUf_o.png" width="318"></p> 
<p>imagesæ–‡ä»¶å¤¹å­˜æ”¾trainå’Œvalçš„å›¾ç‰‡</p> 
<p>labelsé‡Œé¢å­˜æ”¾trainå’Œvalçš„ç‰©ä½“æ•°æ®ï¼Œé‡Œé¢çš„æ¯ä¸ªtxtæ–‡ä»¶å’Œimagesé‡Œé¢çš„å›¾ç‰‡æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p> 
<p>txtæ–‡ä»¶çš„å†…å®¹å¦‚ä¸‹ï¼š</p> 
<p><img alt="https://img-blog.csdnimg.cn/2020092420072036.png" height="179" src="https://images2.imgbox.com/8c/0a/SbzOHfPf_o.png" width="628"></p> 
<p>æ ¼å¼ï¼šç‰©ä½“ç±»åˆ« x y w hÂ Â </p> 
<p>åæ ‡æ˜¯ä¸æ˜¯çœŸå®çš„åæ ‡ï¼Œæ˜¯å°†åæ ‡é™¤ä»¥å®½é«˜åçš„è®¡ç®—å‡ºæ¥çš„ï¼Œæ˜¯ç›¸å¯¹äºå®½å’Œé«˜çš„æ¯”ä¾‹ã€‚</p> 
<p>ä¸‹é¢æˆ‘ä»¬ç¼–å†™ç”Ÿæˆæ•°æ®é›†çš„ä»£ç ï¼Œæ–°å»ºLabelmeToYoloV5.pyï¼Œç„¶åå†™å…¥ä¸‹é¢çš„ä»£ç ã€‚</p> 
<pre><code class="language-python">import os

import numpy as np

import json

from glob import glob

import cv2

from sklearn.model_selection import train_test_split

from os import getcwd



classes = ["aircraft", "oiltank"]

# 1.æ ‡ç­¾è·¯å¾„

labelme_path = "LabelmeData/"

isUseTest = TrueÂ  # æ˜¯å¦åˆ›å»ºtesté›†

# 3.è·å–å¾…å¤„ç†æ–‡ä»¶

files = glob(labelme_path + "*.json")

files = [i.replace("\\", "/").split("/")[-1].split(".json")[0] for i in files]

print(files)

if isUseTest:

Â Â Â  trainval_files, test_files = train_test_split(files, test_size=0.1, random_state=55)

else:

Â Â Â  trainval_files = files

# split

train_files, val_files = train_test_split(trainval_files, test_size=0.1, random_state=55)





def convert(size, box):

Â Â Â  dw = 1. / (size[0])

Â Â Â  dh = 1. / (size[1])

Â Â Â  x = (box[0] + box[1]) / 2.0 - 1

Â Â Â  y = (box[2] + box[3]) / 2.0 - 1

Â Â Â  w = box[1] - box[0]

Â Â Â  h = box[3] - box[2]

Â Â Â  x = x * dw

Â Â Â  w = w * dw

Â Â Â  y = y * dh

Â Â Â  h = h * dh

Â Â Â  return (x, y, w, h)





wd = getcwd()

print(wd)





def ChangeToYolo5(files, txt_Name):

Â Â Â  if not os.path.exists('tmp/'):

Â Â Â Â Â Â Â  os.makedirs('tmp/')

Â Â Â  list_file = open('tmp/%s.txt' % (txt_Name), 'w')

Â Â Â  for json_file_ in files:

Â Â Â Â Â Â Â  json_filename = labelme_path + json_file_ + ".json"

Â Â Â Â Â Â Â  imagePath = labelme_path + json_file_ + ".jpg"

Â Â Â Â Â Â Â  list_file.write('%s/%s\n' % (wd, imagePath))

Â Â Â Â Â Â Â  out_file = open('%s/%s.txt' % (labelme_path, json_file_), 'w')

Â Â Â Â Â Â Â  json_file = json.load(open(json_filename, "r", encoding="utf-8"))

Â Â Â Â Â Â Â  height, width, channels = cv2.imread(labelme_path + json_file_ + ".jpg").shape

Â Â Â Â Â Â Â  for multi in json_file["shapes"]:

Â Â Â Â Â Â Â Â Â Â Â  points = np.array(multi["points"])

Â Â Â Â Â Â Â Â Â Â Â  xmin = min(points[:, 0]) if min(points[:, 0]) &gt; 0 else 0

Â Â Â Â Â Â Â Â Â Â Â  xmax = max(points[:, 0]) if max(points[:, 0]) &gt; 0 else 0

Â Â Â Â Â Â Â Â Â Â Â  ymin = min(points[:, 1]) if min(points[:, 1]) &gt; 0 else 0

Â Â Â Â Â Â Â Â Â Â Â  ymax = max(points[:, 1]) if max(points[:, 1]) &gt; 0 else 0

Â Â Â Â Â Â Â Â Â Â Â  label = multi["label"]

Â Â Â Â Â Â Â Â Â Â Â  if xmax &lt;= xmin:

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  pass

Â Â Â Â Â Â Â Â Â Â Â  elif ymax &lt;= ymin:

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  pass

Â Â Â Â Â Â Â Â Â Â Â  else:

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  cls_id = classes.index(label)

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  b = (float(xmin), float(xmax), float(ymin), float(ymax))

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  bb = convert((width, height), b)

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  out_file.write(str(cls_id) + " " + " ".join([str(a) for a in bb]) + '\n')

Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â  print(json_filename, xmin, ymin, xmax, ymax, cls_id)

ChangeToYolo5(train_files, "train")

ChangeToYolo5(val_files, "val")

ChangeToYolo5(test_files, "test")</code></pre> 
<p></p> 
<p>è¿™æ®µä»£ç æ‰§è¡Œå®Œæˆä¼šåœ¨LabelmeDataç”Ÿæˆæ¯ä¸ªå›¾ç‰‡çš„txtæ ‡æ³¨æ•°æ®ï¼ŒåŒæ—¶åœ¨tmpæ–‡ä»¶å¤¹ä¸‹é¢ç”Ÿæˆè®­ç»ƒé›†ã€éªŒè¯é›†å’Œæµ‹è¯•é›†çš„txtï¼Œtxtè®°å½•çš„æ˜¯å›¾ç‰‡çš„è·¯å¾„ï¼Œä¸ºä¸‹ä¸€æ­¥ç”ŸæˆYoloV5è®­ç»ƒå’Œæµ‹è¯•ç”¨çš„æ•°æ®é›†åšå‡†å¤‡ã€‚åœ¨tmpæ–‡ä»¶å¤¹ä¸‹é¢æ–°å»ºMakeData.pyæ–‡ä»¶ï¼Œç”Ÿæˆæœ€ç»ˆçš„ç»“æœï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾ï¼š</p> 
<p><img alt="" height="149" src="https://images2.imgbox.com/d5/02/RAcEYN7L_o.png" width="257"></p> 
<p></p> 
<p>æ‰“å¼€MakeData.py,å†™å…¥ä¸‹é¢çš„ä»£ç ã€‚</p> 
<pre><code class="language-python">import shutil
import os

file_List = ["train", "val", "test"]
for file in file_List:
    if not os.path.exists('../VOC/images/%s' % file):
        os.makedirs('../VOC/images/%s' % file)
    if not os.path.exists('../VOC/labels/%s' % file):
        os.makedirs('../VOC/labels/%s' % file)
    print(os.path.exists('../tmp/%s.txt' % file))
    f = open('../tmp/%s.txt' % file, 'r')
    lines = f.readlines()
    for line in lines:
        print(line)
        line = "/".join(line.split('/')[-5:]).strip()
        shutil.copy(line, "../VOC/images/%s" % file)
        line = line.replace('JPEGImages', 'labels')
        line = line.replace('jpg', 'txt')
        shutil.copy(line, "../VOC/labels/%s/" % file)</code></pre> 
<p>æ‰§è¡Œå®Œæˆåå°±å¯ä»¥ç”ŸæˆYoloV5è®­ç»ƒä½¿ç”¨çš„æ•°æ®é›†äº†ã€‚ç»“æœå¦‚ä¸‹ï¼š</p> 
<p><img alt="" height="182" src="https://images2.imgbox.com/b4/f6/U2KmZGG1_o.png" width="241"></p> 
<h3 id="5%E3%80%81%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><strong>5ã€ä¿®æ”¹é…ç½®å‚æ•°</strong></h3> 
<pre style="margin-left:0cm;"><code class="language-html">æ‰“å¼€voc.yamlæ–‡ä»¶ï¼Œä¿®æ”¹é‡Œé¢çš„é…ç½®å‚æ•°</code></pre> 
<pre style="margin-left:0cm;"><code class="language-html">train: VOC/images/train/Â  # è®­ç»ƒé›†å›¾ç‰‡çš„è·¯å¾„</code></pre> 
<pre style="margin-left:0cm;"><code class="language-html">val: VOC/images/val/Â  # éªŒè¯é›†å›¾ç‰‡çš„è·¯å¾„</code></pre> 
<pre style="margin-left:0cm;"><code class="language-html"># number of classes

nc: 2 #æ£€æµ‹çš„ç±»åˆ«ï¼Œæœ¬æ¬¡æ•°æ®é›†æœ‰ä¸¤ä¸ªç±»åˆ«æ‰€ä»¥å†™2



# class names

names: ["aircraft", "oiltank"]#ç±»åˆ«çš„åç§°ï¼Œå’Œè½¬æ¢æ•°æ®é›†æ—¶çš„listå¯¹åº”</code></pre> 
<h3 id="6%E3%80%81%E4%BF%AE%E6%94%B9train.py%E7%9A%84%E5%8F%82%E6%95%B0"><strong>6ã€ä¿®æ”¹train.pyçš„å‚æ•°</strong></h3> 
<pre style="margin-left:0cm;"><code class="language-html">cfgå‚æ•°æ˜¯YoloV5 æ¨¡å‹çš„é…ç½®æ–‡ä»¶ï¼Œæ¨¡å‹çš„æ–‡ä»¶å­˜æ”¾åœ¨modelsæ–‡ä»¶å¤¹ä¸‹é¢ï¼ŒæŒ‰ç…§éœ€æ±‚å¡«å†™ä¸åŒçš„æ–‡ä»¶ã€‚</code></pre> 
<p></p> 
<pre style="margin-left:0cm;"><code class="language-html">weightså‚æ•°æ˜¯YoloV5çš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œå’Œcfgå¯¹åº”ï¼Œä¾‹ï¼šcfgé…ç½®çš„æ˜¯yolov5s.yamlï¼Œweightså°±è¦é…ç½®yolov5s.pt</code></pre> 
<pre style="margin-left:0cm;"><code class="language-html">dataæ˜¯é…ç½®æ•°æ®é›†çš„é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬é€‰ç”¨çš„æ˜¯voc.yamlï¼Œæ‰€ä»¥é…ç½®data/voc.yaml</code></pre> 
<pre style="margin-left:0cm;"><code class="language-html">ä¿®æ”¹ä¸Šé¢ä¸‰ä¸ªå‚æ•°å°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ï¼Œå…¶ä»–çš„å‚æ•°æ ¹æ®è‡ªå·±çš„éœ€æ±‚ä¿®æ”¹ã€‚ä¿®æ”¹åçš„å‚æ•°é…ç½®å¦‚ä¸‹ï¼š</code></pre> 
<pre style="margin-left:0cm;"><code class="language-html">parser.add_argument('--weights', type=str, default='yolov5s.pt', help='initial weights path')

parser.add_argument('--cfg', type=str, default='yolov5s.yaml', help='model.yaml path')

parser.add_argument('--data', type=str, default='data/voc.yaml', help='data.yaml path')</code></pre> 
<p>Â ä¿®æ”¹å®Œæˆåï¼Œå°±å¯ä»¥å¼€å§‹è®­ç»ƒäº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p> 
<p><img alt="" height="285" src="https://images2.imgbox.com/59/ef/OJF8Cjea_o.png" width="554"></p> 
<p>å¤šå¡å¹¶è¡Œ</p> 
<pre style="margin-left:0cm;"><code class="language-python">Â python -m torch.distributed.run --nproc_per_node 2 train.py --batch 64 --data coco.yaml --weights yolov5s.pt --device 0,1</code></pre> 
<h3 id="7%E3%80%81%E6%9F%A5%E7%9C%8B%E8%AE%AD%E7%BB%83%E7%BB%93%E6%9E%9C" style="margin-left:0cm;">7ã€æŸ¥çœ‹è®­ç»ƒç»“æœ</h3> 
<p style="margin-left:0cm;">åœ¨ç»å†äº†300epochè®­ç»ƒä¹‹åï¼Œæˆ‘ä»¬ä¼šåœ¨runsæ–‡ä»¶å¤¹ä¸‹é¢æ‰¾åˆ°è®­ç»ƒå¥½çš„æƒé‡æ–‡ä»¶å’Œè®­ç»ƒè¿‡ç¨‹çš„ä¸€äº›æ–‡ä»¶ã€‚å¦‚å›¾ï¼š</p> 
<p style="margin-left:0cm;"><img alt="" height="216" src="https://images2.imgbox.com/79/2a/fRaPdgWd_o.png" width="554"></p> 
<p style="margin-left:0cm;"><img alt="" height="554" src="https://images2.imgbox.com/57/a8/MlFRPBr4_o.png" width="554"></p> 
<p style="margin-left:0cm;"><img alt="" height="554" src="https://images2.imgbox.com/b8/8c/EIGm3rcN_o.png" width="554"></p> 
<p style="margin-left:0cm;"><img alt="" height="277" src="https://images2.imgbox.com/4c/3c/CPkfq9G6_o.png" width="554"></p> 
<p style="margin-left:0cm;"><img alt="" height="576" src="https://images2.imgbox.com/8a/61/EVVxp9X8_o.png" width="640"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"></p> 
<h2 id="%E6%B5%8B%E8%AF%95" style="margin-left:0cm;">æµ‹è¯•</h2> 
<p style="margin-left:0cm;">é¦–å…ˆéœ€è¦åœ¨voc.yamlä¸­å¢åŠ æµ‹è¯•é›†çš„è·¯å¾„ï¼Œæ‰“å¼€voc.yamlï¼Œåœ¨valå­—æ®µåé¢å¢åŠ test: tmp/test.txtè¿™è¡Œä»£ç ï¼Œå¦‚å›¾ï¼š</p> 
<p style="margin-left:0cm;"><img alt="" height="292" src="https://images2.imgbox.com/b4/27/xddUrjNZ_o.png" width="407"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;">ä¿®æ”¹test.pyä¸­çš„å‚æ•°ï¼Œä¸‹é¢çš„è¿™å‡ ä¸ªå‚æ•°è¦ä¿®æ”¹ã€‚</p> 
<p style="margin-left:0cm;"><span style="color:#a9b7c6;">parser = argparse.ArgumentParser(</span><span style="color:#aa4926;">prog</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'test.py'</span><span style="color:#a9b7c6;">)<br> parser.add_argument(</span><span style="color:#6a8759;">'--weights'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">nargs</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'+'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">type</span><span style="color:#a9b7c6;">=</span><span style="color:#8888c6;">str</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">default</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'runs/exp7/weights/best.pt'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">help</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'model.pt path(s)'</span><span style="color:#a9b7c6;">)<br> parser.add_argument(</span><span style="color:#6a8759;">'--data'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">type</span><span style="color:#a9b7c6;">=</span><span style="color:#8888c6;">str</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">default</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'data/voc.yaml'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">help</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'*.data path'</span><span style="color:#a9b7c6;">)<br> parser.add_argument(</span><span style="color:#6a8759;">'--batch-size'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">type</span><span style="color:#a9b7c6;">=</span><span style="color:#8888c6;">int</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">default</span><span style="color:#a9b7c6;">=</span><span style="color:#6897bb;">2</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">help</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'size of each image batch'</span><span style="color:#a9b7c6;">)<br> parser.add_argument(</span><span style="color:#6a8759;">'--save-txt'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">default</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'True'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">action</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'store_true'</span><span style="color:#cc7832;">, </span><span style="color:#aa4926;">help</span><span style="color:#a9b7c6;">=</span><span style="color:#6a8759;">'save results to *.txt'</span><span style="color:#a9b7c6;">)</span></p> 
<p style="margin-left:0cm;"><span style="color:#a9b7c6;">åœ¨</span><span style="color:#a9b7c6;">275</span><span style="color:#a9b7c6;">è¡Œ</span> <span style="color:#a9b7c6;">ä¿®æ”¹</span><span style="color:#a9b7c6;">test</span><span style="color:#a9b7c6;">çš„æ–¹æ³•ï¼Œå¢åŠ ä¿å­˜æµ‹è¯•ç»“æœçš„è·¯å¾„ã€‚è¿™æ ·æµ‹è¯•å®Œæˆåå°±å¯ä»¥åœ¨</span><span style="color:#a9b7c6;">inference\images</span><span style="color:#a9b7c6;">æŸ¥çœ‹åˆ°æµ‹è¯•çš„å›¾ç‰‡ï¼Œåœ¨</span><span style="color:#a9b7c6;">inference\output</span><span style="color:#a9b7c6;">ä¸­æŸ¥çœ‹åˆ°ä¿å­˜çš„æµ‹è¯•ç»“æœã€‚</span></p> 
<p style="margin-left:0cm;"><span style="color:#a9b7c6;">å¦‚å›¾ï¼š</span></p> 
<p style="margin-left:0cm;"><img alt="" height="263" src="https://images2.imgbox.com/9a/c7/V8oWKIFd_o.png" width="554"></p> 
<p style="margin-left:0cm;"></p> 
<p style="margin-left:0cm;"><span style="color:#a9b7c6;">ä¸‹é¢æ˜¯è¿è¡Œçš„ç»“æœï¼š</span></p> 
<p style="margin-left:0cm;"><img alt="" height="344" src="https://images2.imgbox.com/b0/8e/DimV7CTG_o.png" width="554"></p> 
<p style="margin-left:0cm;">ä»£ç å’Œæ¨¡å‹ï¼š<a href="https://download.csdn.net/download/hhhhhhhhhhwwwwwwwwww/13094352" title="æ‰‹æŠŠæ‰‹æ•™ç‰©ä½“æ£€æµ‹yolov5-master.zip_yolov5-masterä½¿ç”¨-æ·±åº¦å­¦ä¹ æ–‡æ¡£ç±»èµ„æº-CSDNä¸‹è½½">æ‰‹æŠŠæ‰‹æ•™ç‰©ä½“æ£€æµ‹yolov5-master.zip_yolov5-masterä½¿ç”¨-æ·±åº¦å­¦ä¹ æ–‡æ¡£ç±»èµ„æº-CSDNä¸‹è½½</a></p> 
<p style="margin-left:0cm;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0669449e0b17cbbed787db24ad5dd013/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">å£°æ˜å¼æœåŠ¡è°ƒç”¨OpenFeign</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/de2119a4f77ed4a61a7bd0215be616e9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">Merry Christmasï¼ä¸€èµ·ç”¨Cè¯­è¨€ç»˜åˆ¶ä¸€ä¸ªåŠ¨æ€çš„åœ£è¯æ ‘å§</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 èœé¸Ÿç¨‹åºå‘˜åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>