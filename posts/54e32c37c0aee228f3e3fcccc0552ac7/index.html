<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>System学习笔记 - MacOs编译环境配置(一) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="System学习笔记 - MacOs编译环境配置(一)" />
<meta property="og:description" content="前言 好几年没有记录过东西，一是确实很忙，二是人也变懒了。新年开个新的学习计划，希望能坚持下去。
SystemC 简介 SystemC是一个建模语言，其本质是一个C&#43;&#43;的库，一般用于SoC建模，具体介绍不赘述，百度都可以搜到，这里只讲怎么使用配置
代码下载 可以去systemc.org下载，也可以直接从github.com下载。我使用的是 git@github.com:accellera-official/systemc.git。
INSTALL 下载下来后，systemc目录下就有一个INSTALL.md描述如何编译安装SystemC，以下的内容其实也就是在复述整个过程。
编译环境 使用的是Macos的Clang作为Systemc的编译器，CPU ARCH是X86
Apple clang version 14.0.3 (clang-1403.0.22.14.1) Target: x86_64-apple-darwin22.6.0 Thread model: posix InstalledDir: /Library/Developer/CommandLineTools/usr/bin 1 配置CXX环境变量
2 在systemc目录下输入./config/bootstrap生成配置文件
3 在systemc目录下创建编译文件夹objdir，并切到该文件夹下
4 在objdir目录下，使用…/configure ‘CXXFLAGS=-std=c&#43;&#43;17’ --prefix=XXXXXX来生成configure配置，其中CXXFLAGS是指定c&#43;&#43;17，这是systemc要求的。prefix是指定systemc的安装目录。
5 make即可完成安装
make make check make install 6 验证example下的内容
6.1 修改配置文件，主要修改的是Makefile.config中的配置。
Makefile.rules中的SYSTEMC_LDFLAGS暂时没看懂LD的啥，先删掉，不然报错
diff --git a/examples/build-unix/Makefile.config b/examples/build-unix/Makefile.config index a4643291..d0d4635f 100644 --- a/examples/build-unix/Makefile.config &#43;&#43;&#43; b/examples/build-unix/Makefile.config @@ -34,13 &#43;34,13 @@ ## guess config from environment ## Variable that points to SystemC installation path -SYSTEMC_HOME?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/54e32c37c0aee228f3e3fcccc0552ac7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-07T20:36:09+08:00" />
<meta property="article:modified_time" content="2024-01-07T20:36:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">System学习笔记 - MacOs编译环境配置(一)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p>好几年没有记录过东西，一是确实很忙，二是人也变懒了。新年开个新的学习计划，希望能坚持下去。</p> 
<h2><a id="SystemC_2"></a>SystemC</h2> 
<h3><a id="_3"></a>简介</h3> 
<p>SystemC是一个建模语言，其本质是一个C++的库，一般用于SoC建模，具体介绍不赘述，百度都可以搜到，这里只讲怎么使用配置</p> 
<h3><a id="_5"></a>代码下载</h3> 
<p>可以去systemc.org下载，也可以直接从github.com下载。我使用的是<a href="SystemC%E7%9A%84github%E7%9A%84repo" rel="nofollow"> git@github.com:accellera-official/systemc.git</a>。</p> 
<h3><a id="INSTALL_8"></a>INSTALL</h3> 
<p>下载下来后，systemc目录下就有一个INSTALL.md描述如何编译安装SystemC，以下的内容其实也就是在复述整个过程。</p> 
<h4><a id="_10"></a>编译环境</h4> 
<p>使用的是Macos的Clang作为Systemc的编译器，CPU ARCH是X86</p> 
<pre><code>Apple clang version 14.0.3 (clang-1403.0.22.14.1)
Target: x86_64-apple-darwin22.6.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin
</code></pre> 
<h4><a id="1_18"></a>1</h4> 
<p>配置CXX环境变量<br> <img src="https://images2.imgbox.com/9c/ee/1Ep40hzj_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_21"></a>2</h4> 
<p>在systemc目录下输入./config/bootstrap生成配置文件<br> <img src="https://images2.imgbox.com/22/9c/0Ah6GjBP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3_24"></a>3</h4> 
<p>在systemc目录下创建编译文件夹objdir，并切到该文件夹下<br> <img src="https://images2.imgbox.com/25/3b/YXodHIsz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_27"></a>4</h4> 
<p>在objdir目录下，使用…/configure ‘CXXFLAGS=-std=c++17’ --prefix=XXXXXX来生成configure配置，其中CXXFLAGS是指定c++17，这是systemc要求的。prefix是指定systemc的安装目录。<br> <img src="https://images2.imgbox.com/c6/fb/IsGJ5kw5_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="5_30"></a>5</h4> 
<p>make即可完成安装</p> 
<pre><code>make
make check
make install
</code></pre> 
<h4><a id="6_37"></a>6</h4> 
<p>验证example下的内容</p> 
<h5><a id="61_39"></a>6.1</h5> 
<p>修改配置文件，主要修改的是Makefile.config中的配置。<br> Makefile.rules中的SYSTEMC_LDFLAGS暂时没看懂LD的啥，先删掉，不然报错</p> 
<pre><code>diff --git a/examples/build-unix/Makefile.config b/examples/build-unix/Makefile.config
index a4643291..d0d4635f 100644
--- a/examples/build-unix/Makefile.config
+++ b/examples/build-unix/Makefile.config
@@ -34,13 +34,13 @@
 ## guess config from environment

 ## Variable that points to SystemC installation path
-SYSTEMC_HOME?=../../../..
+SYSTEMC_HOME?=/Users/XXXX/Tools/systemc

 ## Select the target architecture
-#TARGET_ARCH = linux
+TARGET_ARCH = macosx64

 ## Select the architecture suffix, if necessary
-#ARCH_SUFFIX = -$(TARGET_ARCH)
+ARCH_SUFFIX = -$(TARGET_ARCH)

 ## How to instruct the dynamic linker to locate the SystemC library
 #LDFLAG_RPATH = -Wl,-rpath=
@@ -49,18 +49,19 @@ SYSTEMC_HOME?=../../../..
 FLAGS_COMMON = -g -Wall
 FLAGS_STRICT = -pedantic -Wno-long-long
 FLAGS_WERROR = -Werror
+FLAGS_COMPILER = -std=c++17

 # combined flags
-#SYSTEMC_CXXFLAGS = $(FLAGS_COMMON) $(FLAGS_STRICT) $(FLAGS_WERROR)
+SYSTEMC_CXXFLAGS = $(FLAGS_COMMON) $(FLAGS_STRICT) $(FLAGS_WERROR) $(FLAGS_COMPILER)

 # Additional preprocessor symbols
 #SYSTEMC_DEFINES =

 # Explicit location of the SystemC headers
-#SYSTEMC_INC_DIR = $(SYSTEMC_HOME)/include
+SYSTEMC_INC_DIR = $(SYSTEMC_HOME)/include

 # Explicit location if the SystenC library
-#SYSTEMC_LIB_DIR = $(SYSTEMC_HOME)/lib$(ARCH_SUFFIX)
+SYSTEMC_LIB_DIR = $(SYSTEMC_HOME)/lib$(ARCH_SUFFIX)

 # Run with valgrind
 #VALGRIND=valgrind --log-file-exactly=valgrind.log
diff --git a/examples/build-unix/Makefile.rules b/examples/build-unix/Makefile.rules
index d5ac2271..45cd25ac 100644
--- a/examples/build-unix/Makefile.rules
+++ b/examples/build-unix/Makefile.rules
@@ -59,8 +59,7 @@ SYSTEMC_LIB_DIR  ?= $(SYSTEMC_HOME)/lib$(ARCH_SUFFIX)

 SYSTEMC_DEFINES  ?=
 SYSTEMC_CXXFLAGS ?= $(FLAGS_COMMON) $(FLAGS_STRICT) $(FLAGS_WERROR)
-SYSTEMC_LDFLAGS  ?= -L $(SYSTEMC_LIB_DIR) \
-                    $(LDFLAG_RPATH)$(SYSTEMC_LIB_DIR)
+SYSTEMC_LDFLAGS  ?= -L $(SYSTEMC_LIB_DIR)
 SYSTEMC_LIBS     ?= -lsystemc -lm

 ## Add 'PTHREADS=1' to command line for a pthreads build
</code></pre> 
<h5><a id="62_103"></a>6.2</h5> 
<p>编译example,以FFT里的FLPT为例子，进入对应文件夹，直接make，如下图，没有报错，会在该目录下生成fft_flpt.x<br> <img src="https://images2.imgbox.com/17/d9/pWzW16uR_o.png" alt="在这里插入图片描述"><br> 执行.x文件，即可看到simulation输出<br> <img src="https://images2.imgbox.com/d9/bb/IgTP9fiO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="Linux_108"></a>Linux</h3> 
<p>Linux下的安装应该可以参考下面的链接：<br> https://blog.sina.com.cn/s/blog_8346031301010jh9.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2a1f939e38572fcd6b85a4583bb81e18/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">双十一的祈祷【算法赛】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/388e10a6459db07b290ff428d2c0d19a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【读书笔记】《白帽子讲web安全》我的安全世界观</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>