<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 微信机器人 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python 微信机器人" />
<meta property="og:description" content="使用python构造一个微信聊天机器人
最近在学python的过程中无意间发现一个python库：wxpy，其可以实现让微信自动接收、处理消息并进行回复的一系列功能。感觉挺有意思的，便自行摸索学习，并成功地实现了其功能，故写下此博客作学习分享。
1.安装wxpy wxpy 支持 Python 3.4-3.6，以及 2.7 版本。
从PYPI 官方源下载安装：
pip install -U wxpy
从豆瓣 PYPI 镜像源下载安装：
pip install -U wxpy -i &#34;https://pypi.doubanio.com/simple/&#34;
推荐国内用户使用镜像源下载安装，相比官方源更稳定，需要注意的是，若想确保安装到对应的 Python 版本中，命令中的 “pip” 替换为 “pip3” 或 “pip2”。
linux下还需安装pillow：
pip install pillow
2.申请一个图灵的APIKEY 需要去官网注册一个图灵机器人并获取APIKEY.（图灵机器人是一个中文语境下的对话机器人，可以使用免费版，一个账号最多可以创建5个机器人，一个机器人日调用接口数5000次）
官网地址：图灵机器人-智能好用的聊天机器人
若觉得麻烦不想注册也可以，不需要APIKEY也可以实现简单的微信定时发送消息，简单回复等功能，如果想要智能化的自动回复功能，还是乖乖去注册吧。
3.用wxpy登录，发送和回复消息 登录 from wxpy import * # 导入模块 bot = Bot() # 初始化机器人，扫码登陆，但每次登陆都得重新扫码 #bot = Bot(cache_path=True) #把登录信息保存下来，不想每次都扫码的可以用这一条 运行后会弹出微信登录的二维码，扫描后登录网页版微信
2.发送消息
friend = bot.friends().search(u&#39;你好友的名字&#39;)[0] friend.send(u&#34;哈哈&#34;) #指定某个好友并向其发送消息 运行后会向指定好友发送所写的内容，可以在这个功能的基础上进一步实现定时向某人发送消息的功能。我发现一篇关于“教你用微信每天给女朋友说晚安”的文章，有兴趣可以看一下python实战===教你用微信每天给女朋友说晚安 - botoo - 博客园" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/57d32f7e0a3effe18bf0bdadeda01630/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-11T08:48:48+08:00" />
<meta property="article:modified_time" content="2022-03-11T08:48:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 微信机器人</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>使用python构造一个微信聊天机器人</strong></p> 
<p>最近在学python的过程中无意间发现一个python库：wxpy，其可以实现让微信自动接收、处理消息并进行回复的一系列功能。感觉挺有意思的，便自行摸索学习，并成功地实现了其功能，故写下此博客作学习分享。</p> 
<p></p> 
<h4></h4> 
<h4>1.安装wxpy</h4> 
<p><span style="color:#404040;">wxpy 支持 Python 3.4-3.6，以及 2.7 版本。</span></p> 
<p><span style="color:#404040;">从<span style="color:#404040;">PYPI <span style="color:#404040;">官方</span></span>源下载安装：</span></p> 
<p><span style="color:#222222;">pip install -U wxpy</span></p> 
<p><span style="color:#404040;">从豆瓣 PYPI 镜像源下载安装：</span></p> 
<p><span style="color:#404040;">pip</span><span style="color:#404040;"> </span><span style="color:#404040;">install</span><span style="color:#404040;"> </span><span style="color:#404040;">-</span><span style="color:#404040;">U</span><span style="color:#404040;"> </span><span style="color:#404040;">wxpy</span><span style="color:#404040;"> </span><span style="color:#404040;">-</span><span style="color:#404040;">i</span><span style="color:#404040;"> </span><span style="color:#404040;">"https://pypi.doubanio.com/simple/"</span></p> 
<p><span style="color:#404040;">推荐国内用户使用镜像源下载安装，相比官方源更<span style="color:#404040;">稳定，需要注意的是，若想<span style="color:#404040;">确保安装到对应的 Python 版本中，</span><span style="color:#404040;">命令中的 “pip” 替换为 “pip3” 或 “pip2”。</span></span></span></p> 
<p><span style="color:#404040;"><span style="color:#404040;"><span style="color:#404040;">linux下还需安装pillow：</span></span></span></p> 
<p><span style="color:#404040;"><span style="color:#404040;"><span style="color:#404040;"><span style="color:#222222;">pip install pillow</span></span></span></span></p> 
<p></p> 
<h4></h4> 
<h4>2.申请一个图灵的APIKEY</h4> 
<p>需要去官网注册一个图灵机器人并获取APIKEY.（<span style="color:#333333;">图灵机器人是一个中文语境下的对话机器人，</span><span style="color:#333333;">可以使用免费版，一个账号最多可以创建5个机器人，一个机器人日调用接口数5000次）</span></p> 
<p>官网地址：<a href="http://www.tuling123.com/" rel="nofollow" title="图灵机器人-智能好用的聊天机器人">图灵机器人-智能好用的聊天机器人</a></p> 
<p>若觉得麻烦不想注册也可以，不需要APIKEY也可以实现简单的微信定时发送消息，简单回复等功能，如果想要智能化的自动回复功能，还是乖乖去注册吧。</p> 
<p></p> 
<h4></h4> 
<h4>3.用wxpy登录，发送和回复消息</h4> 
<p></p> 
<ol><li>登录</li></ol> 
<pre class="has"><code class="language-python">from wxpy import * # 导入模块
bot = Bot() # 初始化机器人，扫码登陆，但每次登陆都得重新扫码
#bot = Bot(cache_path=True)
#把登录信息保存下来，不想每次都扫码的可以用这一条</code></pre> 
<p> 运行后会弹出微信登录的二维码，扫描后登录网页版微信</p> 
<p>     2.发送消息</p> 
<pre class="has"><code class="language-python">friend = bot.friends().search(u'你好友的名字')[0]  
friend.send(u"哈哈")  
#指定某个好友并向其发送消息</code></pre> 
<p> 运行后会向指定好友发送所写的内容，可以在这个功能的基础上进一步实现定时向某人发送消息的功能。我发现一篇关于“教你用微信每天给女朋友说晚安”的文章，有兴趣可以看一下<a href="http://www.cnblogs.com/botoo/p/8622379.html" rel="nofollow" title="python实战===教你用微信每天给女朋友说晚安 - botoo - 博客园">python实战===教你用微信每天给女朋友说晚安 - botoo - 博客园</a></p> 
<p>    3.回复消息</p> 
<pre class="has"><code class="language-python">@bot.register()  
def reply_msg(msg):  
    msg.reply(u'本人正忙，请稍后回复')  
embed()</code></pre> 
<p>当好友向你发送消息后就会得到统一回复“本人正忙，请稍后回复”。<br>  </p> 
<h2></h2> 
<h2><span style="color:#222222;">4.调用图灵机器人API，实现自动回复</span></h2> 
<pre class="has"><code class="language-python">from wxpy import * #导入模块
bot = Bot(cache_path=True)#扫码登陆
tuling = Tuling(api_key='自行输入')#初始化图灵机器人

@bot.register(msg_types=TEXT)
def auto_reply_all(msg):
    tuling.do_reply(msg)
#自动回复功能，回复所有消息
bot.join()#开始运行</code></pre> 
<p>以下即为我运行成功自动回复的结果</p> 
<p><img alt="" class="has" height="318" src="https://images2.imgbox.com/f3/ed/IKz4eU3Q_o.jpg" width="183"></p> 
<p><strong>（以上源码均源自网络）</strong></p> 
<p>关于用图灵的APIKEY来实现自动回复的文章我还收藏了几篇</p> 
<p><a href="https://blog.csdn.net/getcomputerstyle/article/details/70175167" title="使用python构造一个微信聊天机器人_getcomputerstyle的博客-CSDN博客">使用python构造一个微信聊天机器人_getcomputerstyle的博客-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/lin_zhongmu/article/details/77429181" title="利用python搭建微信聊天机器人_lin_zhongmu的博客-CSDN博客">利用python搭建微信聊天机器人_lin_zhongmu的博客-CSDN博客</a></p> 
<p><a href="https://blog.csdn.net/qq_36313726/article/details/78572086" title="python-微信机器人_C_hao-CSDN博客">python-微信机器人_C_hao-CSDN博客</a></p> 
<h2></h2> 
<h2>5.关于可能出现的错误</h2> 
<p>    我在实现微信自动回复的过程中也不是一帆风顺的，在安装好wxpy,做好前期准备后，运行程序时出现<strong>ImportError: No module named 'wxpy'</strong>的错误，找了很久总是找不到解决方法，最后才在该文中找到解决方案：<a href="https://blog.csdn.net/damotiansheng/article/details/43916881" title="python模块以及导入出现ImportError: No module named 'xxx'问题_我的新博客-CSDN博客">python模块以及导入出现ImportError: No module named 'xxx'问题_我的新博客-CSDN博客</a></p> 
<p>我把<span style="color:#333333;">自己做的py文件放到 site_packages 目录下，直接运行，成功地解决了问题。</span></p> 
<p><span style="color:#333333;">    还有就是关于</span><span style="color:#333333;"><strong>'sudo'不是内部或外部命令，也不是可运行的程序或批处理文件</strong></span><span style="color:#333333;">的错误，该文也给出了解决方案：</span></p> 
<p><a href="http://www.zhimengzhe.com/windows/62640.html" rel="nofollow" title="http://www.zhimengzhe.com/windows/62640.html">http://www.zhimengzhe.com/windows/62640.html</a></p> 
<h2></h2> 
<h2><span style="color:#333333;">6.关于wxpy的一些文章</span></h2> 
<p><span style="color:#333333;"><a href="https://www.jianshu.com/p/c0baf3c6db15" rel="nofollow" title="Python玩微信（1）:初探wxpy - 简书">Python玩微信（1）:初探wxpy - 简书</a></span></p> 
<p><span style="color:#333333;"><a href="https://www.jianshu.com/p/ef75e97146c2" rel="nofollow" title="https://www.jianshu.com/p/ef75e97146c2">https://www.jianshu.com/p/ef75e97146c2</a></span></p> 
<p><a href="http://blog.sina.com.cn/s/blog_14c3c70df0102whkp.html" rel="nofollow" title="【铁窗泪】：一个作死的聊天机器人导致微信被封号始末（超搞笑）_i春秋学院_新浪博客">【铁窗泪】：一个作死的聊天机器人导致微信被封号始末（超搞笑）_i春秋学院_新浪博客</a></p> 
<p></p> 
<p><span style="color:#ff0000;">需要注意的是不知道用微信机器人会不会有被封号的危险，所以建议大家用小号。</span></p> 
<p><span style="color:#ffcc33;">关于Python构造机器人的学习分享就到这里，对于Python的学习，今后还会不定时更新，和我一样在自学Python的小伙伴可以关注一波，互相激励。</span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2b3541f517af9375be32b5aa3738d5e3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">检查自己电脑GPU个数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1f06eed95e70fd036d40e0badbf76c2d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">22. 括号生成</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>