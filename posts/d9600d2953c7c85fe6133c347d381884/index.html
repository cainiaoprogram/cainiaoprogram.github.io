<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>常用到的一些SQL - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="常用到的一些SQL" />
<meta property="og:description" content="select TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date&#39;2013-12-05&#39;}) FROM &#34;A1 Bc Analysis&#34; where &#34;D00 Day More&#34;.&#34;Date2&#34; = @{V_yesterday}{date&#39;2013-12-05&#39;} select TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date&#39;2013-12-05&#39;}) FROM &#34;A1 Bc Analysis&#34; SELECT TIMESTAMPADD(SQL_TSI_DAY, -30, &#34;D00 Day&#34;.&#34;Date&#34;) FROM &#34;A1 Bc Analysis&#34; where &#34;D00 Day More&#34;.&#34;Date2&#34; = @{V_date}{date&#39;2013-12-10&#39;} (case when &#39;@{V_peroid}{onemonth}&#39;=&#39;onemonth&#39; then TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date&#39;2013-12-01&#39;}) when &#39;@{V_peroid}{onemonth}&#39;=&#39;twomonth&#39; then TIMESTAMPADD(SQL_TSI_DAY, -60, @{V_date}{date&#39;2013-12-01&#39;}) else TIMESTAMPADD(SQL_TSI_DAY, -10, @{V_date} {date&#39;2013-12-01&#39;}) end) &#34;D00 Day&#34;.&#34;Date&#34; &lt; @{V_date}{date&#39;2013-12-01&#39;} and &#34;D00 Day&#34;.&#34;Date&#34; &gt; TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date&#39;2013-12-01&#39;}) SELECT TIMESTAMPADD(SQL_TSI_DAY, -30, &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d9600d2953c7c85fe6133c347d381884/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-06-25T09:59:40+08:00" />
<meta property="article:modified_time" content="2014-06-25T09:59:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">常用到的一些SQL</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    select TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date'2013-12-05'}) FROM "A1 Bc Analysis" where "D00 Day More"."Date2" = @{V_yesterday}{date'2013-12-05'} 
<br> 
<br> 
<br>select TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date'2013-12-05'}) FROM "A1 Bc Analysis" 
<br> 
<br> 
<br>SELECT TIMESTAMPADD(SQL_TSI_DAY, -30, "D00 Day"."Date") FROM "A1 Bc Analysis" where "D00 Day More"."Date2" = @{V_date}{date'2013-12-10'} 
<br> 
<br> 
<br>(case when '@{V_peroid}{onemonth}'='onemonth' then TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date'2013-12-01'}) 
<br> when '@{V_peroid}{onemonth}'='twomonth' then TIMESTAMPADD(SQL_TSI_DAY, -60, @{V_date}{date'2013-12-01'}) else TIMESTAMPADD(SQL_TSI_DAY, -10, @{V_date} 
<br> 
<br>{date'2013-12-01'}) end) 
<br> 
<br> 
<br>"D00 Day"."Date" &lt; @{V_date}{date'2013-12-01'} and "D00 Day"."Date" &gt; TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date'2013-12-01'}) 
<br> 
<br> 
<br>SELECT TIMESTAMPADD(SQL_TSI_DAY, -30, "D00 Day"."Date") FROM "A1 Bc Analysis" where "D00 Day More"."Date2" = @{V_date}{date'2013-12-10'} 
<br> 
<br> 
<br>SELECT TIMESTAMPADD(SQL_TSI_DAY, 0, "D00 Day"."Date") FROM "A1 Bc Analysis" where "D00 Day More"."Date2" = @{V_yesterday}{date'2013-12-05'} 
<br> 
<br> 
<br>Prom Week Peroid 
<br> 
<br>dukang@maxthon.net 
<br> 
<br>maxiaofei@maxthon.net 
<br> 
<br>zhoujianguang@maxthon.net 
<br>cloud_data@maxthon.net 
<br> 
<br> 
<br>One Month 
<br>Two Month 
<br>Three Month 
<br>Six Month 
<br>Year 
<br> 
<br> 
<br>"D00 Day"."Date" &lt; @{V_date}{date'2013-12-01'} and "D00 Day"."Date" &gt;( 
<br>case when '@{V_peroid}{One Month}'='One Month' then TIMESTAMPADD(SQL_TSI_DAY, -30, @{V_date}{date'2013-12-01'}) 
<br> when '@{V_peroid}{One Month}'='Two Month' then TIMESTAMPADD(SQL_TSI_DAY, -60, @{V_date}{date'2013-12-01'}) 
<br> when '@{V_peroid}{One Month}'='Three Month' then TIMESTAMPADD(SQL_TSI_DAY, -60, @{V_date}{date'2013-12-01'}) 
<br> when '@{V_peroid}{One Month}'='Six Month' then TIMESTAMPADD(SQL_TSI_DAY, -60, @{V_date}{date'2013-12-01'}) 
<br>else TIMESTAMPADD(SQL_TSI_DAY, -5, @{V_date}{date'2013-12-01'}) end) 
<br> 
<br> 
<br>select "D03 Pn"."Pn" from "A1 Bc Analysis" where "D03 Pn"."Platform" = 'win' and "D03 Pn"."Insert From" in (select max("D03 Pn"."Insert From") from "A1 Bc 
<br> 
<br>Analysis" where "D03 Pn"."Platform" = 'win') 
<br> 
<br> 
<br>Peroid 
<br>Week 
<br>Month 
<br>Three Month 
<br>Six Month 
<br>Year 
<br> 
<br>1. 有哪些是目前质检体系发现不了的问题(发生过,只是 是没有事先察觉) 
<br>2. 哪些是管理层需要了解的但现有质检体系满足不了的 
<br>3. 现有的质检体系介绍,哪些规 
<br> 
<br> 
<br>select * from ( 
<br>select t.platform as platform, 
<br> t.version_id as version_id, 
<br> t.version as oversion, 
<br> regexp_substr(t.version, '^[[:digit:]\.]') as bigver, 
<br> decode(regexp_substr(version, '^[[:digit:]\.]'),4,regexp_substr(version, '^[[:digit:]](\.[[:digit:]]+)+00$'),version) as version 
<br> from dim_version t 
<br> where regexp_substr(t.version, '^[[:digit:]](\.[[:digit:]]+)+$') is not null 
<br> and t.version != 'all' 
<br> ) 
<br> where version is not null 
<br> 
<br> 
<br>select platform,pn,regexp_substr(t.pn, '^[[:alnum:]](\_)*([[:alnum:]]+)+$') ,pn_id from dim_pn t 
<br> 
<br> 
<br>select platform, 
<br> pn, 
<br> pn_id 
<br> from dim_pn t 
<br> where regexp_substr(t.pn, '^[:alnum:]*_*[[:alnum:]]*$') is not null and t.pn !='all' 
<br> 
<br> 
<br>select 
<br>distinct platform,regexp_extract(version,'^([1-4])\.',1), version 
<br> from 
<br> rc_pt 
<br> where 
<br> 1=1 
<br> and accessDay &gt;= '20130704' 
<br> and accessDay &lt;= '20130704' 
<br> and datatype='first' 
<br> and product='online' 
<br> and platform in('anphone','win','anpad','') 
<br> and length(deviceid)=40 
<br> and regexp_extract(version,'^[1-4](\.)',1) != '.' 
<br> and version not rlike '(^[1-3]\.[0-9]+(\.[0-9]+){0,2}$)|(^4\.[0-9]{1,2}\.[0-9]{1,3}\.[1-9]{1,2}0?00$)'; 
<br> 
<br>select 
<br>distinct platform,regexp_extract(version,'^([1-4])\.',1), version 
<br> from 
<br> rc_pt 
<br> where 
<br> 1=1 
<br> and accessDay &gt;= '20130704' 
<br> and accessDay &lt;= '20130704' 
<br> and datatype='first' 
<br> and product='online' 
<br> and platform in('win','mac','iphone','ipad','anpad','anphone') 
<br> and regexp_extract(version,'^[1-4](\.)',1) = '.' 
<br> and version rlike '(^[1-3]\.[0-9]+(\.[0-9]+){0,2}$)|(^4\.[0-9]{1,2}\.[0-9]{1,3}(\.[1-9]{1,2}0?00)?$)'; 
<br> and length(deviceid)=40; 
<br> 
<br> 
<br>select 
<br>distinct platform,regexp_extract(version,'^([1-4])\.',1), version 
<br> from 
<br> rc_pt 
<br> where 
<br> 1=1 
<br> and accessDay &gt;= '20130704' 
<br> and accessDay &lt;= '20130704' 
<br> and datatype='first' 
<br> and product='online' 
<br> and platform in('win','mac','iphone','ipad','anpad','anphone') 
<br> and version rlike '(^4\.[0-9]{1,2}\.[0-9]{1,2})|(^4\.[0-9]{1,2}\.[0-9]{1,2}\.[1-9]0?00$)' 
<br> and length(deviceid)=40; 
<br> 
<br> 
<br>select 
<br>distinct platform,regexp_extract(version,'^([1-4])\.',1), version 
<br> from 
<br> rc_pt 
<br> where 
<br> 1=1 
<br> and accessDay &gt;= '20130704' 
<br> and accessDay &lt;= '20130704' 
<br> and datatype='first' 
<br> and product='online' 
<br> and platform in('win','mac','iphone','ipad','anpad','anphone') 
<br> and version REGEXP '^4(\.[0-9]{1,2}){1,2}(\.[1-9]{1,2}0?00$)?' 
<br> and length(deviceid)=40; 
<br> 
<br> 
<br>(^[1-3]\.[0-9]+(\.[0-9]+){0,2}$)|(^4\.[0-9]{1,2}\.[0-9]{1,3}(\.[1-9]{1,2}0?00$)?) 
<br> 
<br>select 
<br>distinct platform,regexp_extract(version,'^([1-4])\.',1), version 
<br> from 
<br> rc_pt 
<br> where 
<br> 1=1 
<br> and accessDay &gt;= '20130704' 
<br> and accessDay &lt;= '20130704' 
<br> and datatype='first' 
<br> and product='online' 
<br> and platform in('anphone') 
<br> and length(deviceid)=40 
<br> and version rlike '^[1-3](\.[0-9]+)+$'; 
<br> 
<br> 
<br>(?(exp)yes|no) 
<br> 
<br> 
<br>^[1-9a-z]*_*[1-9a-z]*$ 
<br> 
<br>select 
<br>distinct platform,(case when platform='anphone' and (substr(pn,1,1)='1' or substr(pn,1,1)='2') then 'user-defined' else pn end) as pn 
<br> from 
<br> rc_pt 
<br> where 
<br> 1=1 
<br> and accessDay &gt;= '20130704' 
<br> and accessDay &lt;= '20130704' 
<br> and datatype='oc' 
<br> and product='online' 
<br> and platform in('win','mac','iphone','ipad','anpad','anphone') 
<br> and length(deviceid)=40 
<br> and pn rlike '^[a-zA-Z0-9_]+$';
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f262a26ab297741d014b17de73bd9b53/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SQLServer附加数据库失败（5120）的解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4ff838045828beb1c49abbf3829188db/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">.net英文笔试题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>