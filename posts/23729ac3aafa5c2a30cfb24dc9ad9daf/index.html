<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>1、cuda的学习记录Chapter01 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="1、cuda的学习记录Chapter01" />
<meta property="og:description" content="基本思想：学习一下cuda编程，随手记录一下 如何使用grind block thread 线程块和编号的概念和应用方法
一、使用工具clion&#43;ubuntu
CMakeLists.txt
cmake_minimum_required(VERSION 3.0) project(untitled18) set(CMAKE_CXX_STANDARD 14) find_package(CUDA REQUIRED) include_directories(${CUDA_INCLUDE_DIRS}) cuda_add_executable(untitled18 main.cu) main.cu
#include &lt;iostream&gt; #include &lt;stdio.h&gt; #include &#34;cuda.h&#34; __global__ void hello_from_gpu() { int x=blockDim.x*blockIdx.x&#43;threadIdx.x; printf(&#34;blockIdx.x %d threadIdx.x %d x %d\n&#34;,blockIdx.x,threadIdx.x,x); //printf(&#34; %d \n&#34;,x); //printf(&#34; hello world\n&#34;); } int main() { hello_from_gpu&lt;&lt;&lt;2,9&gt;&gt;&gt;();// grid_dim block_dim ===&gt; block_id thread_id cudaDeviceSynchronize(); return 0; } 测试结果
/home/ubuntu/CLionProjects/untitled18/cmake-build-debug/untitled18 blockIdx.x 0 threadIdx.x 0 x 0 blockIdx.x 0 threadIdx.x 1 x 1 blockIdx." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/23729ac3aafa5c2a30cfb24dc9ad9daf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-23T16:57:48+08:00" />
<meta property="article:modified_time" content="2023-11-23T16:57:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">1、cuda的学习记录Chapter01</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>基本思想：学习一下cuda编程，随手记录一下 如何使用grind block thread 线程块和编号的概念和应用方法</p> 
<p>一、使用工具clion+ubuntu</p> 
<p>CMakeLists.txt</p> 
<pre><code>cmake_minimum_required(VERSION 3.0)
project(untitled18)

set(CMAKE_CXX_STANDARD 14)
find_package(CUDA REQUIRED)
include_directories(${CUDA_INCLUDE_DIRS})
cuda_add_executable(untitled18 main.cu)
</code></pre> 
<p>main.cu</p> 
<pre><code>#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include "cuda.h"

__global__ void hello_from_gpu()
{

    int x=blockDim.x*blockIdx.x+threadIdx.x;
    printf("blockIdx.x %d threadIdx.x %d  x %d\n",blockIdx.x,threadIdx.x,x);
    //printf(" %d \n",x);
    //printf(" hello world\n");
}

int main() {
    hello_from_gpu&lt;&lt;&lt;2,9&gt;&gt;&gt;();// grid_dim block_dim  ===&gt; block_id thread_id
    cudaDeviceSynchronize();
     return 0;
}
</code></pre> 
<p>测试结果</p> 
<pre><code>/home/ubuntu/CLionProjects/untitled18/cmake-build-debug/untitled18
blockIdx.x 0 threadIdx.x 0  x 0
blockIdx.x 0 threadIdx.x 1  x 1
blockIdx.x 0 threadIdx.x 2  x 2
blockIdx.x 0 threadIdx.x 3  x 3
blockIdx.x 0 threadIdx.x 4  x 4
blockIdx.x 0 threadIdx.x 5  x 5
blockIdx.x 0 threadIdx.x 6  x 6
blockIdx.x 0 threadIdx.x 7  x 7
blockIdx.x 0 threadIdx.x 8  x 8
blockIdx.x 1 threadIdx.x 0  x 9
blockIdx.x 1 threadIdx.x 1  x 10
blockIdx.x 1 threadIdx.x 2  x 11
blockIdx.x 1 threadIdx.x 3  x 12
blockIdx.x 1 threadIdx.x 4  x 13
blockIdx.x 1 threadIdx.x 5  x 14
blockIdx.x 1 threadIdx.x 6  x 15
blockIdx.x 1 threadIdx.x 7  x 16
blockIdx.x 1 threadIdx.x 8  x 17

Process finished with exit code 0
</code></pre> 
<p>二、测试程序</p> 
<pre><code>#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include "cuda.h"
#include "algorithm"
#include "chrono"

__global__ void hello_from_gpu(int *aa,int *bb,int *cc)
{

    int index=blockDim.x*blockIdx.x+threadIdx.x;
    cc[index]=aa[index]+bb[index];
    printf("blockIdx.x %d threadIdx.x %d  index %d  \n",blockIdx.x,threadIdx.x,index);


}

int main() {
    int n=10;
    int *a=(int *)malloc(sizeof(int)*n);
    for(int i=0;i&lt;n;i++){
        a[i]=2*i;

    }
    int *b=(int *)malloc(sizeof(int)*n);
    for(int i=0;i&lt;n;i++){
        b[i]=i;

    }
    int *c=(int *)malloc(sizeof(int)*n);


    int *aa,*bb,*cc;

    cudaMalloc((void **)&amp;aa,sizeof(int)*n);
    cudaMalloc((void **)&amp;bb,sizeof(int)*n);
    cudaMalloc((void **)&amp;cc,sizeof(int)*n);
    cudaMemcpy(aa,a,sizeof(int)*n,cudaMemcpyHostToDevice);
    cudaMemcpy(bb,b,sizeof(int)*n,cudaMemcpyHostToDevice);
    auto t1 = std::chrono::system_clock::now();

    hello_from_gpu&lt;&lt;&lt;2,5&gt;&gt;&gt;(aa,bb,cc);// grid_dim block_dim  ===&gt; block_id thread_id
    cudaDeviceSynchronize();
    auto t2 = std::chrono::system_clock::now();
    auto elapsed = std::chrono::duration_cast&lt;std::chrono::nanoseconds&gt;(t2 - t1);

    std::cout &lt;&lt; "Time difference: " &lt;&lt; elapsed.count() &lt;&lt; " ns" &lt;&lt; std::endl;


    cudaMemcpy(c,cc,sizeof(int)*n,cudaMemcpyDeviceToHost);

    for(int i=0;i&lt;n;i++){
        printf("%d+%d=%d\n",a[i],b[i],c[i]);
    }
    free(a);
    free(b);
    free(c);
    cudaFree(aa);
    cudaFree(bb);
    cudaFree(cc);
    return 0;
}
</code></pre> 
<p>测试结果</p> 
<pre><code>/home/ubuntu/CLionProjects/untitled18/cmake-build-debug/untitled18
blockIdx.x 0 threadIdx.x 0  index 0  
blockIdx.x 0 threadIdx.x 1  index 1  
blockIdx.x 0 threadIdx.x 2  index 2  
blockIdx.x 0 threadIdx.x 3  index 3  
blockIdx.x 0 threadIdx.x 4  index 4  
blockIdx.x 1 threadIdx.x 0  index 5  
blockIdx.x 1 threadIdx.x 1  index 6  
blockIdx.x 1 threadIdx.x 2  index 7  
blockIdx.x 1 threadIdx.x 3  index 8  
blockIdx.x 1 threadIdx.x 4  index 9  
Time difference: 79481 ns
0+0=0
2+1=3
4+2=6
6+3=9
8+4=12
10+5=15
12+6=18
14+7=21
16+8=24
18+9=27

Process finished with exit code 0
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/758cc09645f11ef6dc414f8835285627/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Go实现ECDH密钥交换-X25519</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/efb58361d934bca71cb73673c4a1a76d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">记录Makefile的第一次学习</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>