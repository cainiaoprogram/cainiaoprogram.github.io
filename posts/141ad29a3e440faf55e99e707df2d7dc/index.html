<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>play框架使用起来（16） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="play框架使用起来（16）" />
<meta property="og:description" content="1、缓存 缓存是用来避免频繁到服务器端获取数据而建立的一个存取更快的临时存储器。缓存的容量相对较小，但执行速度非常快，其主要作用为：
存储系统经常访问的数据。存储耗时较长的计算结果。 合理地缓存数据，可以提高系统的性能。Play内置了缓存库，并为分布式环境提供了Memcached缓存数据的支持。
补充： Memcached是一套开源的分布式内存对象缓存系统，它通过在内存中缓存数据和对象来减少读取数据库的次数，从而大幅度降低数据库负载。
如果项目中没有配置Memcached，Play将使用JVM堆中的独立缓存进行数据存储。但是将数据缓存在不同服务器的JVM堆中破坏了Play的share nothing原则：我们不能将应用程序运行在多个服务器上的同时，还期望数据保持一致，这样做只会导致每个程序实例都拥有各自不同的数据副本。
当我们在使用缓存时，必须明确其自身特性：缓存存在于内存中（不进行持久化），只是用于存放暂时性的数据，时间一到就会过期。因此缓存并不是一个安全的存储器，不能保证数据可以永久存在。如果发现数据在缓存中已过期，需要重新获取数据，并再次放入缓存：
public static void allProducts() { List&lt;Product&gt; products = Cache.get(&#34;products&#34;, List.class); if(products == null) { products = Product.findAll(); Cache.set(&#34;products&#34;, products, &#34;30mn&#34;); } render(products);} 1.1 缓存 API# play.cache.Cache类提供了一系列访问缓存的API，包含了完整的设置、替换和获取数据的方法：
public static void showProduct(String id) { Product product = Cache.get(id, Product.class); if(product == null) { product = Product.findById(id); Cache.set(&#34;product_&#34;&#43;id, product, &#34;30mn&#34;); } render(product);} public static void addProduct(String name, int price) { Product product = new Product(name, price); product." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/141ad29a3e440faf55e99e707df2d7dc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-11-04T17:11:32+08:00" />
<meta property="article:modified_time" content="2016-11-04T17:11:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">play框架使用起来（16）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <strong><span style="font-size:32px">1、<span style="font-family:Verdana,Arial,Helvetica,sans-serif">缓存</span></span></strong> 
<div> 
 <div class="searchbox" style="margin:0px; padding:0px; border:0px; outline:none; clear:right; float:right; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <form> 
  </form> 
 </div> 
 <br> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 缓存是用来避免频繁到服务器端获取数据而建立的一个存取更快的临时存储器。缓存的容量相对较小，但执行速度非常快，其主要作用为：</p> 
 <ul style="margin:0.5em 0px; padding:0px 0px 0px 3em; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"><li style="margin:0px; padding:0px; border:0px; outline:none">存储系统经常访问的数据。</li><li style="margin:0px; padding:0px; border:0px; outline:none">存储耗时较长的计算结果。</li></ul> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both">       合理地缓存数据，可以提高系统的性能。Play内置了缓存库，并为分布式环境提供了Memcached缓存数据的支持。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both"> </p> 
 <div class="quote" style="margin:0px 0.5em; padding:0px 0px 0px 3em; border-width:0px 0px 0px 4px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(187,187,187); outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">
   补充： 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none"> Memcached是一套开源的分布式内存对象缓存系统，它通过在内存中缓存数据和对象来减少读取数据库的次数，从而大幅度降低数据库负载。</p> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both">       如果项目中没有配置Memcached，Play将使用JVM堆中的独立缓存进行数据存储。但是将数据缓存在不同服务器的JVM堆中破坏了Play的share nothing原则：我们不能将应用程序运行在多个服务器上的同时，还期望数据保持一致，这样做只会导致每个程序实例都拥有各自不同的数据副本。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       当我们在使用缓存时，必须明确其自身特性：缓存存在于内存中（不进行持久化），只是用于存放暂时性的数据，时间一到就会过期。因此缓存并不是一个安全的存储器，不能保证数据可以永久存在。如果发现数据在缓存中已过期，需要重新获取数据，并再次放入缓存：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">public</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">static</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">void</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> allProducts</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">()</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">List</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&lt;</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> products </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">get</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"products"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">List</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">class</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">if</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">products </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">==</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">null</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">        products </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">findAll</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">();</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">        </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">set</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"products"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> products</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"30mn"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    render</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">products</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span></pre> 
 </div> 
 <br> 
</div> 
<div> 
 <br> 
 <h4 id="section-_E7_BC_93_E5_AD_98-10.8.1_E7_BC_93_E5_AD_98API" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-size:16.0512px; font-family:Verdana,Arial,Helvetica,sans-serif"> 1.1 缓存 API<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E7%BC%93%E5%AD%98#section-_E7_BC_93_E5_AD_98-10.8.1_E7_BC_93_E5_AD_98API" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></h4> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       play.cache.Cache类提供了一系列访问缓存的API，包含了完整的设置、替换和获取数据的方法：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">public</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">static</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">void</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> showProduct</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">String</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> product </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">get</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">class</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">if</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">product </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">==</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">null</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">        product </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">findById</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">        </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">set</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"product_"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">+</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"30mn"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    render</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"> <br style="clear:both"></span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">public</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">static</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">void</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> addProduct</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">String</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> name</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">int</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> price</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> product </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">new</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">name</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> price</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">save</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">();</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    showProduct</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"> <br style="clear:both"></span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">public</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">static</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">void</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> editProduct</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">String</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">String</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> name</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">int</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> price</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> product </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">findById</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">name </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> name</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">price </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> price</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">set</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"product_"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">+</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"30mn"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    showProduct</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"> <br style="clear:both"></span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">public</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">static</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">void</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> deleteProduct</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">String</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> product </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">findById</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">delete</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">();</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">delete</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"product_"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">+</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    allProducts</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">();</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       操作缓存的API中有很多方法是以safe作为前缀的，如safeDelete，safeSet等。带safe前缀的方法是阻塞的，而标准方法是非阻塞的，这意味当我们执行以下程序时：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">delete</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"product_"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">+</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       delete方法会立即返回结果，并没有等待缓存对象是否被真正地物理删除。因此，如果程序执行期间发生了错误(例如IO错误)，缓存对象可能仍然存在，并没有被删除。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       如果操作需要确保缓存对象被删除，可以使用safeDelete方法：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">safeDelete</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"product_"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">+</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span></pre> 
 </div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">      该方法是阻塞式的，并返回一个布尔值标识对象是否被成功删除。确保缓存对象被删除的标准写法如下：</span> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">if</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(!</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">safeDelete</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"product_"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">+</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> id</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">))</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">throw</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">new</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Exception</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"Oops, the product has not been removed from the cache"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">...</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both"> </p> 
 <div class="quote" style="margin:0px 0.5em; padding:0px 0px 0px 3em; border-width:0px 0px 0px 4px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(187,187,187); outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">
   注意： 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none"> 带safe前缀的方法是阻塞式的，会降低应用程序的性能。因此，在实际操作中需要酌情考虑，选择最佳方案。</p> 
  <div> 
   <br> 
  </div> 
 </div> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-weight:bold; font-size:16.0512px"><br> </span> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-weight:bold; font-size:16.0512px">1.2 避免使用Session作为缓存</span> 
 <a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E7%BC%93%E5%AD%98#section-_E7_BC_93_E5_AD_98-10.8.2_E9_81_BF_E5_85_8D_E4_BD_BF_E7_94_A8Session_E4_BD_9C_E4_B8_BA_E7_BC_93_E5_AD_98" rel="nofollow noopener noreferrer" style="font-family:Verdana,Arial,Helvetica,sans-serif; font-weight:bold; font-size:15px; margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); line-height:1.2; text-decoration:none">#</a> 
</div> 
<div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       Play只允许将少量的数据以字符串形式储存在HTTP Session中。读者可能会感到非常不适应，但这样的设计确实更优雅，因为Session本来就不应该是缓存数据的地方！</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       读者可能已经习惯于以下写法，将数据缓存在Session中：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">httpServletRequest</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">getSession</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">().</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">put</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"userProducts"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> products</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">...</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="com" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(136,136,136)">// and then in subsequent requests</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">products </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">List</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&lt;</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&gt;)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">httpServletRequest</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">getSession</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">().</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">get</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"userProducts"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       但在Play中实现同样效果的方式却截然不同：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">put</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">session</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">getId</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(),</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> products</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">...</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="com" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(136,136,136)">// and then in subsequent requests</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">List</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&lt;</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Product</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> products </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Cache</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">get</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">session</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">getId</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(),</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">List</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">class</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">);</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       我们可以通过UUID获取缓存中关联用户的信息。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both"> </p> 
 <div class="quote" style="margin:0px 0.5em; padding:0px 0px 0px 3em; border-width:0px 0px 0px 4px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(187,187,187); outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">
   注意： 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none"> 与Session对象不同，缓存中的内容是独立的，不会绑定任何特定的用户。</p> 
  <div> 
   <br> 
  </div> 
 </div> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<div> 
 <br> 
 <h4 id="section-_E7_BC_93_E5_AD_98-10.8.3_E9_85_8D_E7_BD_AEMemcached" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-size:16.0512px; font-family:Verdana,Arial,Helvetica,sans-serif"> 1.3 配置Memcached<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E7%BC%93%E5%AD%98#section-_E7_BC_93_E5_AD_98-10.8.3_E9_85_8D_E7_BD_AEMemcached" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></h4> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       如果项目要启用Memcached，需要在application.conf中打开Memcached开关，并设置Memcached的守护进程地址：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">memcached</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">enabled<br style="clear:both">memcached</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">127</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">0</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">0</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">1</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">:</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">11211</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       我们还可以指定多个守护进程地址，使之连接到同一个分布式缓存：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">memcached</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">enabled<br style="clear:both">memcached</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">1</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">127</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">0</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">0</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">1</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">:</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">11211</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">memcached</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">2</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">127</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">0</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">0</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">1</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">:</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">11212</span></pre> 
 </div> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<div> 
 <span style="font-size:32px"><strong>2、<span style="font-family:Verdana,Arial,Helvetica,sans-serif">产品化</span></strong></span> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span> 
 <div class="pagename" style="font-size:21.28px; font-weight:bold; margin:0px 0px 0.5em; padding:0px; border:0px; outline:none; line-height:1.4; float:left; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <strong style="font-size:32px; font-family:Arial,Helvetica,sans-serif"><span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span></strong> 
  <div style="display:inline!important"> 
   <strong style="font-family:Arial,Helvetica,sans-serif"><span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span></strong> 
   <h4 style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-size:16.0512px; display:inline!important"> <br> </h4> 
  </div> 
 </div> 
 <div class="pagename" style="font-size:21.28px; font-weight:bold; margin:0px 0px 0.5em; padding:0px; border:0px; outline:none; line-height:1.4; float:left; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <strong style="font-size:32px; font-family:Arial,Helvetica,sans-serif"><span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span></strong> 
  <div style="display:inline!important"> 
   <strong style="font-family:Arial,Helvetica,sans-serif"><span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span></strong> 
   <h4 id="section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.1_E5_AE_9A_E4_B9_89_E6_A1_86_E6_9E_B6ID" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-size:16.0512px; display:inline!important"> 2.1 定义框架 ID<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.1_E5_AE_9A_E4_B9_89_E6_A1_86_E6_9E_B6ID" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></h4> 
  </div> 
 </div> 
 <p style="font-size:15px; font-weight:bold; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> </p> 
 <p style="font-size:15px; font-weight:bold; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">   <strong style="font-size:32px; font-family:Arial,Helvetica,sans-serif"></strong></p> 
 <p style="font-size:15px; font-weight:bold; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; display:inline!important"> </p> 
 <div> 
  <span style="font-size:32px"><strong><span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span></strong></span> 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px; display:inline!important"> <br> </p> 
 </div> 
 <div> 
  <span style="font-size:32px"><strong><span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span></strong></span> 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px; display:inline!important"> <br> </p> 
 </div> 
 <p></p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; display:inline!important"> <span style="font-weight:bold; white-space:pre"></span>首先需要给应用指定框架ID。例如，我们使用<span style="color:inherit">play id</span>命令将框架ID设置为production，之后如果需要将Play框架设置为PROD模式只需在application.conf文件里进行如下配置：</p> 
 <div style="font-size:32px"> 
  <span style="font-family:Arial,Helvetica,sans-serif"></span> 
 </div> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)"> %</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">application</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">mode</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">prod</span></pre> 
 </div> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       在该模式下启动应用，Play会预编译所有的Java文件和模版文件。如果在这一步出现了错误，应用是不能被成功启动的，此时对源文件的修改也不再会被热编译与加载。</p> 
 <h4 id="section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.2_E8_AE_BE_E7_BD_AE_E6_95_B0_E6_8D_AE_E5_BA_93" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-family:Verdana,Arial,Helvetica,sans-serif"> 2.2 设置数据库<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.2_E8_AE_BE_E7_BD_AE_E6_95_B0_E6_8D_AE_E5_BA_93" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></h4> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> </p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       如果应用还在使用开发数据库（例如内存数据库db=mem或者文件数据库db=fs，），显然不能满足产品化的需求，我们必须在产品化的时候选择更加健壮的数据库引擎。下例给出通用的JDBC连接方式，并以Mysql为例：</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">%</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">db</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">url</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">jdbc</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">:</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">mysql</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">:</span><span class="com" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(136,136,136)">//localhost/prod</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">%</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">db</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">driver</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">com</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">mysql</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">jdbc</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Driver</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">%</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">db</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">user</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">root<br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">%</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">db</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">pass</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">1515312</span></pre> 
 </div> 
 <br> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span> 
 <h4 id="section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.3_E7_A6_81_E7_94_A8JPASchema_E8_87_AA_E5_8A_A8_E6_9B_B4_E6_96_B0" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-family:Verdana,Arial,Helvetica,sans-serif"> <span style="font-size:21.28px">2.</span><span style="font-size:16.0512px">3 禁用JPA Schema自动更新<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.3_E7_A6_81_E7_94_A8JPASchema_E8_87_AA_E5_8A_A8_E6_9B_B4_E6_96_B0" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; line-height:1.2; text-decoration:none">#</a></span></h4> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> </p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       如果应用中使用了Hibernate提供的Schema自动更新特性，我们必须在产品化时将其关闭。在产品服务器中，使用Hibernate来自动更新数据库与数据并不是可行的方式，因为这可能会导致诸如数据覆盖、丢失或是没有足够权限操纵数据表等问题的出现。</p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       如果用户确保应用对产品环境的数据库有完整的操纵权限，并且只是初次部署(即只做数据初始化工作)，也是可以使用这个特性的。针对这种情况，需要在application.conf文件中进行如下配置：</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">%</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">jpa</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">ddl</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">create</span></pre> 
 </div> 
 <div class="quote" style="font-size:15px; margin:0px 0.5em; padding:0px 0px 0px 3em; border-width:0px 0px 0px 4px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(187,187,187); outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">
   注意： 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none"> 请确保只在初次发布时使用该方式，并在之后更新部署时关闭该配置，否则会造成数据覆盖、丢失等错误发生。如果没有特殊的需求，笔者和Play作者都建议在产品化时将该配置取消。</p> 
 </div> 
 <br> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span> 
 <h4 id="section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.4_E9_85_8D_E7_BD_AE_E5_AF_86_E9_92_A5" style="font-weight:bold; margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-family:Verdana,Arial,Helvetica,sans-serif"> <span style="font-size:21.28px">2</span><span style="font-size:16.0512px">.4 配置密钥<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.4_E9_85_8D_E7_BD_AE_E5_AF_86_E9_92_A5" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(153,153,153); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></span></h4> 
 <p style="font-weight:bold; font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> </p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> <strong>    </strong>  Play的密钥具有安全特性，比如在Session签名中就会使用到，因此在Play应用中请务必保证该密钥的私有性。我们可以在application.conf配置文件中通过如下配置设定密钥：</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">%</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">application</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">secret</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">c12d1c59af499d20f4955d07255ed8ea333</span></pre> 
 </div> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       在Play中可以通过<span style="color:inherit">play secret</span>命令生成随机密钥。读者在使用密钥时需要注意，如果应用需要被部署到分布式的环境，我们必须要确保所有的应用实例都具有相同的密钥。</p> 
 <br> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif"><br> </span> 
 <h4 id="section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.5_E9_85_8D_E7_BD_AE_E5_89_8D_E7_AB_AFHTTP_E6_9C_8D_E5_8A_A1_E5_99_A8" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-size:16.0512px; font-family:Verdana,Arial,Helvetica,sans-serif"> 2.5 配置前端HTTP服务器<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.5_E9_85_8D_E7_BD_AE_E5_89_8D_E7_AB_AFHTTP_E6_9C_8D_E5_8A_A1_E5_99_A8" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></h4> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       如果我们需要将应用部署在Play自带的服务器，只需在application.conf文件中配置如下信息即可：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">%</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">production</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">http</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">port</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">80</span></pre> 
 </div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">      但是有时候我们需要将多个应用部署在同个服务器上，或是需要为多个应用实例提供负载均衡来提高伸缩性和容错性，这时我们可以使用第三方的HTTP服务器。</span> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both"> </p> 
 <div class="quote" style="margin:0px 0.5em; padding:0px 0px 0px 3em; border-width:0px 0px 0px 4px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(187,187,187); outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">
   注意： 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none"> 直接使用Play内置的服务器将会比使用其他HTTP服务器具有更好的性能。</p> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both"> <span style="color:inherit">配置lighttpd</span></p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       以下这个例子将会展示如何配置lighttpd作为HTTP服务器。尽管Apache也可以做到这些，但是如果读者只需要其中的虚拟主机或负载均衡功能，lighttpd会是更轻便、更易于配置的选择。/etc/lighttpd/lighttpd.conf文件的具体配置如下：</p> 
 <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; font-size:15px; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">
server</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">modules </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">      </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"mod_access"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">      </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"mod_proxy"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">      </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"mod_accesslog"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> <br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">…</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">$HTTP</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">[</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"host"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">]</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=~</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"www.myapp.com"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    proxy</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">balance </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"round-robin"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> proxy</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">server </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"/"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">        </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"host"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"127.0.0.1"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"port"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">9000</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"> <br style="clear:both">$HTTP</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">[</span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"host"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">]</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=~</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"www.loadbalancedapp.com"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">{<!-- --></span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    proxy</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">balance </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"round-robin"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> proxy</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">server </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"/"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> <br style="clear:both">          </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"host"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"127.0.0.1"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"port"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">9000</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">),</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> <br style="clear:both">          </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">(</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"host"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"127.0.0.1"</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">,</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="str" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(72,154,27)">"port"</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">9001</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> <br style="clear:both">    </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">)</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both"></span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">}</span></pre> 
</div> 
<div> 
 <strong><br> </strong> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <span style="color:inherit"><strong>配置Apache</strong></span></p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       以下这个例子将展示如何配置Apache httpd server作为Play应用的HTTP服务器。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       Apache服务器的配置文件路径为\conf\httpd.conf。Apache配置文件中使用#进行注释，取消以下这条配置信息前的#注释（如果存在）。</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">LoadModule</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> proxy_module modules</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">mod_proxy</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">so</span></pre> 
 </div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">      然后在文件末尾添加如下信息：</span> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;VirtualHost </span><span class="atn" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,0,102)">*:80</span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">  ProxyPreserveHost On<br style="clear:both">  ServerName www.loadbalancedapp.com<br style="clear:both">  ProxyPass / http://127.0.0.1:9000/<br style="clear:both">  ProxyPassReverse / http://127.0.0.1:9000/<br style="clear:both"></span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;/VirtualHost&gt;</span></pre> 
 </div> 
 <br> 
</div> 
<div> 
 <strong><br> </strong> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <span style="color:inherit"><strong>利用Apache服务器全透明部署应用</strong></span></p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       如果需要更新Web应用，我们通常会关闭服务器，更新应用，最后重新启动服务器。但是这个期间造成的中断服务显然是对用户很不友好的表现。理想的情况是更新Web应用而不中断原有服务，即透明化部署应用的过程。实现该功能的原理是运行同个Play应用的两个实例，并利用HTTP服务器负载均衡。当其中某个应用实例无法提供服务时，HTTP服务器会将所有的请求切换至仍然能提供服务的另一个实例。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       下面将演示如何做到这一点。为了方便演示，我们会启动同个Play应用两次，只是将其中的一个端口设置为9999，另一个端口设置为9998。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       在实际中，应用很有可能处于两个不同的服务器。复制一份相同的Play应用并编辑application.conf文件，改变其中的端口配置。然后使用<span style="color:inherit">play start</span>命令分别运行这两个Web应用：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">play start mysuperwebapp</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       接着配置Apache的负载均衡器：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;VirtualHost </span><span class="atn" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,0,102)">mysuperwebapp.com:80</span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">  ServerName mysuperwebapp.com<br style="clear:both">  </span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;Location </span><span class="atn" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,0,102)">/balancer-manager</span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    SetHandler balancer-manager<br style="clear:both">    Order Deny,Allow<br style="clear:both">    Deny from all<br style="clear:both">    Allow from .mysuperwebapp.com<br style="clear:both">  </span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;/Location&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">  </span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;Proxy </span><span class="atn" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,0,102)">balancer://mycluster</span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    BalancerMember http://localhost:9999<br style="clear:both">    BalancerMember http://localhost:9998 status=+H<br style="clear:both">  </span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;/Proxy&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">  </span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;Proxy </span><span class="atn" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,0,102)">*</span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">    Order Allow,Deny<br style="clear:both">    Allow From All<br style="clear:both">  </span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;/Proxy&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">  ProxyPreserveHost On<br style="clear:both">  ProxyPass /balancer-manager !<br style="clear:both">  ProxyPass / balancer://mycluster/<br style="clear:both">  ProxyPassReverse / http://localhost:9999/<br style="clear:both">  ProxyPassReverse / http://localhost:9998/<br style="clear:both"></span><span class="tag" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,0,136)">&lt;/VirtualHost&gt;</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       在该配置中需要注意的地方是balancer://mycluster，其声明了一个负载均衡器。跟在第二个Play应用后的参数+H表明第二个Play应用处于待用状态，不过这并不影响其参与负载均衡。其他的配置细节已超出本书的范围，不再赘述。当我们需要更新应用时，首先停止第一个应用的服务：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">play stop mysuperwebapp1</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       负载均衡器会将所有的请求转向到mysuperwebapp2。这时便可以对应用mysuperwebapp1进行更新，当我们更新完成之后再次启动mysuperwebapp1：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">play start mysuperwebapp1</span></pre> 
 </div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">      此时我们又可以安全地更新mysuperwebapp2了（停止—更新—启动）。</span> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       Apache也提供了简单的方式来监视集群的状态，即在浏览器中转向/balancer-manager来监视当前集群。因为Play是完全无状态的，所以我们无需管理两个集群Session共享的问题。事实上，我们也可以同时运行两个以上的Play应用集群。</p> 
 <div> 
  <br> 
  <br> 
 </div> 
 <div class="searchbox" style="margin:0px; padding:0px; border:0px; outline:none; clear:right; float:right; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <form> 
  </form> 
 </div> 
 <h4 id="section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.6_E9_AB_98_E7_BA_A7_E4_BB_A3_E7_90_86_E8_AE_BE_E7_BD_AE" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-size:16.0512px; font-family:Verdana,Arial,Helvetica,sans-serif"> 2.6 高级代理设置<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.6_E9_AB_98_E7_BA_A7_E4_BB_A3_E7_90_86_E8_AE_BE_E7_BD_AE" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></h4> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       当Play应用与HTTP服务器运行在不同的机器上时，请求地址会被视为是来自HTTP服务器的地址。在默认情况下，当Play应用和服务器代理运行在同一台物理服务器上时，Play应用会将请求地址视为来自127.0.0.1。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       代理服务器可以添加特殊的请求头来告诉被代理的Web应用当前这个请求是来自哪里的。大多数Web服务器都会添加X-Forwarded-For来完成这样的事情，其值通常是运行着Web应用的原始主机IP。如果我们在XForwardedSupport中打开转发支持，Play会将request.remoteAddress修改为运行Play的物理服务器IP而不是默认的代理服务器IP，不过为了使它正常工作我们还必须为其列出所有的代理服务器。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       主机的请求头仍是不透明的，我们还需要对服务器进行一些配置。以Apache 2.x为例子，只需要在配置文件中添加如下信息：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">ProxyPreserveHost</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> on</span></pre> 
 </div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">      请求头就会是原始主机产生的请求头了。通过以上这些配置，应用程序可以以更直接的方式在网上发布。</span> 
 <br> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"><br> </span> 
</div> 
<div> 
 <span style="font-family:Verdana,Arial,Helvetica,sans-serif"></span> 
 <div class="pagename" style="margin:0px 0px 0.5em; padding:0px; border:0px; outline:none; line-height:1.4; font-weight:bold; float:left; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <span style="font-size:21.28px">2</span> 
  <span style="font-size:16.0512px">.7 配置HTTPS</span> 
  <a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.7_E9_85_8D_E7_BD_AEHTTPS" rel="nofollow noopener noreferrer" style="font-size:15px; margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); line-height:1.2; text-decoration:none">#</a> 
 </div> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> </p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">     </p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> <br> </p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">   Play内置的服务器支持HTTPS协议，在产品化时同样也适用。内置服务器同时提供了对于证书的管理，包含了对原生的Java keyStore支持，以及对简单的证书和密钥文件支持。我们可以通过在application.conf配置文件中配置https.port来为Play应用打开HTTPS连接器，然后将证书放在conf目录下：</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">http</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">port</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">9000</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">https</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">port</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">9443</span></pre> 
 </div> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       Play支持了X509证书和keystore证书，其中X509证书必须按照如下方式命名：host.cert为证书，host.key为密钥。如果读者使用的是keystore证书，则默认的命名为certificate.jks。</p> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       使用X509证书的配置实例如下：</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="com" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(136,136,136)"># X509 certificates</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">certificate</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">key</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">file</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">conf</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">key<br style="clear:both">certificate</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">file</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">conf</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">cert<br style="clear:both"></span><span class="com" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(136,136,136)"># 如果密钥文件是用密码保护</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">certificate</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">password</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">secret<br style="clear:both">trustmanager</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">algorithm</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">JKS</span></pre> 
 </div> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       使用keystore证书的配置实例如下：</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">keystore</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">algorithm</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">JKS<br style="clear:both">keystore</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">password</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">secret<br style="clear:both">keystore</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">file</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">conf</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">certificate</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">jks</span></pre> 
 </div> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       以上例子均采用了默认值。我们还可以通过<span style="color:inherit">openssl</span>命令生成自签名的证书。</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">openssl genrsa </span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">1024</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">key<br style="clear:both">openssl req </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="kwd" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(27,96,154)">new</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">x509 </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">nodes </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">sha1 </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">days </span><span class="lit" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(0,102,102)">365</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">key host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">key </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">&gt;</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"> host</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">cert</span></pre> 
 </div> 
 <p style="font-size:15px; margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif">       对于使用keystore的用户，可以在application.conf文件中直接配置，生成自签名证书。配置信息如下：</p> 
 <div class="prettify" style="font-size:15px; margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="com" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(136,136,136)"># Keystore </span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">ssl</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">KeyManagerFactory</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">algorithm</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">SunX509</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none"><br style="clear:both">trustmanager</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">algorithm</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">JKS<br style="clear:both">keystore</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">password</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">secret<br style="clear:both">keystore</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">file</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">certificate</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">jks</span></pre> 
 </div> 
 <h4 id="section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.8_E9_9D_9EPython_E7_8E_AF_E5_A2_83_E4_B8_8B_E7_9A_84_E9_83_A8_E7_BD_B2" style="margin:1em 0px 0.5em; padding:0.25em; border:0px; outline:none; clear:left; line-height:1.2; font-size:16.0512px; font-family:Verdana,Arial,Helvetica,sans-serif"> 2.8 非Python环境下的部署<a target="_blank" class="hashlink" href="http://www.playframework.cn/wiki/%E4%BA%A7%E5%93%81%E5%8C%96#section-_E4_BA_A7_E5_93_81_E5_8C_96-10.9.8_E9_9D_9EPython_E7_8E_AF_E5_A2_83_E4_B8_8B_E7_9A_84_E9_83_A8_E7_BD_B2" rel="nofollow noopener noreferrer" style="margin:0px; padding:0.25em; border:0px; outline:none; color:rgb(204,204,204); font-size:15px; font-weight:normal; line-height:1.2; text-decoration:none">#</a></h4> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br> </p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> Python在大多数Unix系的系统中都被默认安装了。虽然Play在Windows版本中也包含了嵌入式的Python，但也不排除有无法支持Python运行环境的服务器的存在。针对这个问题，Play附带了ant配置文件build.xml，提供有限功能的部署方式。</p> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       在应用根目录，使用<span style="color:inherit">ant start</span>命令运行服务器：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">ant start </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Dplay</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">path</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">path</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">to</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">playdirectory</span></pre> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">       如果需要停止服务器，则可以使用<span style="color:inherit">ant stop</span>命令：</p> 
 <div class="prettify" style="margin:0px; padding:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <pre class="prettyprint prettified" style='margin:1em 45.7813px; padding:0.5em; border:1px solid rgb(221,221,221); outline:none; line-height:normal; font-family:Monaco,"Courier New",Courier,monospace; overflow:auto; clear:both; background:rgb(249,249,249)'><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">ant stop </span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">-</span><span class="typ" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,102)">Dplay</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">.</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">path</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">=/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">path</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">to</span><span class="pun" style="margin:0px; padding:0px; border:0px; outline:none; color:rgb(102,102,0)">/</span><span class="pln" style="margin:0px; padding:0px; border:0px; outline:none">playdirectory</span></pre> 
 </div> 
 <div class="quote" style="margin:0px 0.5em; padding:0px 0px 0px 3em; border-width:0px 0px 0px 4px; border-top-style:initial; border-right-style:initial; border-bottom-style:initial; border-left-style:solid; border-top-color:initial; border-right-color:initial; border-bottom-color:initial; border-left-color:rgb(187,187,187); outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px">
   警告： 
  <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none"> 当我们使用Play命令时，输出会被重定向到System.out。但是使用ant时，标准输出是无法访问的。所以使用这种方式部署时，我们必须为其提供Log4j配置文件。</p> 
 </div> 
 <p style="margin-top:0.5em; margin-bottom:0.5em; padding-top:0px; padding-bottom:0px; border:0px; outline:none; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> <br style="clear:both">       我们也可以在环境变量中指定Play框架的路径，或者将路径直接写入应用的build.xml配置文件里。</p> 
 <br> 
</div> 
<div> 
 <br> 
</div> 
<div class="searchbox" style="margin:0px; padding:0px; border:0px; outline:none; clear:right; float:right; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
 <form> 
 </form> 
</div> 
<div style="top:0px"> 
 <div class="pagename" style="margin:0px 0px 0.5em; padding:0px; border:0px; outline:none; font-size:21.28px; line-height:1.4; font-weight:bold; float:left; font-family:Verdana,Arial,Helvetica,sans-serif">
   缓存 
 </div> 
 <div> 
  <br> 
 </div> 
 <div class="searchbox" style="margin:0px; padding:0px; border:0px; outline:none; clear:right; float:right; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:15px"> 
  <form> 
  </form> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f20e5ca646fcc9919be6813455108771/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">构造方法，初始化块和静态初始化块</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0a15d7ef568208b75445e7e28a8469a8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【原生js】js动态添加dom，如何绑定事件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>