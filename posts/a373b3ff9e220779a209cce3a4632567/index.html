<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>图像卷积、相关以及在MATLAB中的操作 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="图像卷积、相关以及在MATLAB中的操作" />
<meta property="og:description" content="原文：http://www.cnblogs.com/zjutzz/p/5661543.html
图像卷积、相关以及在MATLAB中的操作 区分卷积和相关 图像处理中常常需要用一个滤波器做空间滤波操作。空间滤波操作有时候也被叫做卷积滤波，或者干脆叫卷积（离散的卷积，不是微积分里连续的卷积）；滤波器也有很多名字：卷积模版、卷积核、掩模、窗口等。
空间滤波可以分为线性滤波和非线性滤波。非线性滤波常见的有中值滤波、最大值滤波等，相当于自定义一个函数，在数学上由于不满足线性变换因此叫做非线性滤波。这里不细研究它。
线性滤波则通常是：将模版覆盖区域内的元素，以模版中对应位置元素为权值，进行累加。看起来挺简单的，但是要区分相关(cross-correlation)和卷积(convolution)两种模式。为什么呢？因为在MATLAB里是有所区分的，而且不少中文书里面把它们混淆了。
我们最容易的理解是：将模版中元素从左到右、从上到下，作为使用顺序，那么卷积操作的结果，就是模版第一个元素乘以它覆盖的元素，加上模版第二个元素乘以它覆盖的元素，再加上模版第三个元素乘以它覆盖的元素，...，一直加到模版最后一个元素乘以它覆盖的元素。好吧，其实就是：模版覆盖区域内，元素逐一相乘然后累加，此时的对应位置就是上下投影后被覆盖的位置。
上面这个理解确实是看起来最容易理解的，因而很多中文书把它叫做&#34;卷积&#34;。然而这个概念其实叫做相关，而卷积则相当于：将同样的模版旋转180°后，再做&#34;相关&#34;操作。当然，如果模版是180°对称的那么卷积和相关是相同的。但是并不是所有的模版都对称。因此，我建议，在滑窗操作、计算图像梯度等场合，不要使用“卷积”，而要使用“滤波”或者“相关”。因为，我们通常讲的卷积，其实是相关，那就不要用卷积这个词以免引起混淆。
MATLAB下的操作 在MATLAB中用imfilter来实现线性空间滤波：
imfilter(f, w, filtering_mode, boundary_options, size_options) f:图像 w:滤波模版 filtering_mode:滤波模式 &#39;corr&#39;:相关滤波。[默认值] &#39;conv&#39;:卷积滤波。 boundary_options:边界选项 P:(没有引号)边界外围补充0。[默认值] &#39;replicate&#39;:边界外围复制边界值 &#39;symmetric&#39;:边界外围使用边界镜像 &#39;circular&#39;:图像的大小通过讲图像处理为二维周期函数的一个周期来扩展（这是什么？） size_options:大小选项 &#39;same&#39;:输出大小与输入图像f大小相同。[默认值] &#39;full&#39;:输出与扩展（填充）后的图像大小相同。 最常用的是这句：
imfilter(f, w, &#39;replicate&#39;) %相关滤波，边界外围填充0，输出大小与输入图像f相同 当然，如果硬要做真正的卷积滤波，除了指定imfilter中的的conv参数，也可以先将模版旋转180°：
rotated_filter=flipud(fliplr(filter)) 总结 说了这么多废话，总结起来就是3句话：
很多中文书里（数字图象处理一类）讲的卷积过滤其实应当叫做相关过滤平时滤波最常用的是相关滤波，也就是“覆盖位相乘，然后累加”MATLAB中的写法为imfilter(f, w, &#39;replicate&#39;) ref https://www.zhihu.com/question/29121110" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a373b3ff9e220779a209cce3a4632567/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-09T16:29:41+08:00" />
<meta property="article:modified_time" content="2018-12-09T16:29:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">图像卷积、相关以及在MATLAB中的操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>原文：<a href="http://www.cnblogs.com/zjutzz/p/5661543.html" rel="nofollow">http://www.cnblogs.com/zjutzz/p/5661543.html</a></p> 
<div id="cnblogs_post_body" class="blogpost-body cnblogs-markdown"> 
 <h2 id="图像卷积相关以及在matlab中的操作">图像卷积、相关以及在MATLAB中的操作</h2> 
</div> 
<h3 id="区分卷积和相关">区分卷积和相关</h3> 
<p>图像处理中常常需要用一个<strong>滤波器</strong>做<strong>空间滤波</strong>操作。空间滤波操作有时候也被叫做卷积滤波，或者干脆叫卷积（离散的卷积，不是微积分里连续的卷积）；滤波器也有很多名字：卷积模版、卷积核、掩模、窗口等。</p> 
<p>空间滤波可以分为线性滤波和非线性滤波。非线性滤波常见的有中值滤波、最大值滤波等，相当于自定义一个函数，在数学上由于不满足线性变换因此叫做非线性滤波。这里不细研究它。</p> 
<p>线性滤波则通常是：将模版覆盖区域内的元素，以模版中<strong>对应位置</strong>元素为权值，进行累加。看起来挺简单的，但是要区分<strong>相关(cross-correlation)</strong>和<strong>卷积(convolution)</strong>两种模式。为什么呢？因为在MATLAB里是有所区分的，而且不少中文书里面把它们混淆了。</p> 
<p>我们最容易的理解是：将模版中元素从左到右、从上到下，作为使用顺序，那么卷积操作的结果，就是模版第一个元素乘以它覆盖的元素，加上模版第二个元素乘以它覆盖的元素，再加上模版第三个元素乘以它覆盖的元素，...，一直加到模版最后一个元素乘以它覆盖的元素。好吧，其实就是：模版覆盖区域内，元素逐一相乘然后累加，此时的对应位置就是上下投影后被覆盖的位置。</p> 
<p>上面这个理解确实是看起来最容易理解的，因而很多中文书把它叫做"卷积"。然而这个概念其实叫做<strong>相关</strong>，而<strong>卷积</strong>则相当于：将同样的模版旋转180°后，再做"相关"操作。当然，如果模版是180°对称的那么卷积和相关是相同的。但是并不是所有的模版都对称。<strong>因此，我建议，在滑窗操作、计算图像梯度等场合，不要使用“卷积”，而要使用“滤波”或者“相关”。</strong>因为，我们通常讲的卷积，其实是相关，那就不要用卷积这个词以免引起混淆。</p> 
<h3 id="matlab下的操作">MATLAB下的操作</h3> 
<p>在MATLAB中用<code>imfilter</code>来实现线性空间滤波：</p> 
<pre><code class="hljs yaml"><span class="hljs-string">imfilter(f,</span> <span class="hljs-string">w,</span> <span class="hljs-string">filtering_mode,</span> <span class="hljs-string">boundary_options,</span> <span class="hljs-string">size_options)</span>
<span class="hljs-attr">f:</span><span class="hljs-string">图像</span>
<span class="hljs-attr">w:</span><span class="hljs-string">滤波模版</span>
<span class="hljs-attr">filtering_mode:</span><span class="hljs-string">滤波模式</span>
<span class="hljs-attr">    'corr':</span><span class="hljs-string">相关滤波。[默认值]</span>
<span class="hljs-attr">    'conv':</span><span class="hljs-string">卷积滤波。</span>
<span class="hljs-attr">boundary_options:</span><span class="hljs-string">边界选项</span>
<span class="hljs-attr">    P:</span><span class="hljs-string">(没有引号)边界外围补充0。[默认值]</span>
<span class="hljs-attr">    'replicate':</span><span class="hljs-string">边界外围复制边界值</span>
<span class="hljs-attr">    'symmetric':</span><span class="hljs-string">边界外围使用边界镜像</span>
<span class="hljs-attr">    'circular':</span><span class="hljs-string">图像的大小通过讲图像处理为二维周期函数的一个周期来扩展（这是什么？）</span>
<span class="hljs-attr">size_options:</span><span class="hljs-string">大小选项</span>
<span class="hljs-attr">    'same':</span><span class="hljs-string">输出大小与输入图像f大小相同。[默认值]</span>
<span class="hljs-attr">    'full':</span><span class="hljs-string">输出与扩展（填充）后的图像大小相同。</span></code></pre> 
<p>最常用的是这句：</p> 
<pre><code class="hljs erlang-repl">imfilter(f, w, <span class="hljs-string">'replicate'</span>) <span class="hljs-comment">%相关滤波，边界外围填充0，输出大小与输入图像f相同</span></code></pre> 
<p>当然，如果硬要做真正的<strong>卷积滤波</strong>，除了指定<code>imfilter</code>中的的<code>conv</code>参数，也可以先将模版旋转180°：</p> 
<pre><code class="hljs ini"><span class="hljs-attr">rotated_filter</span>=flipud(fliplr(filter))</code></pre> 
<h3 id="总结">总结</h3> 
<p>说了这么多废话，总结起来就是3句话：</p> 
<ol><li>很多中文书里（数字图象处理一类）讲的<strong>卷积过滤</strong>其实应当叫做<strong>相关过滤</strong></li><li>平时滤波最常用的是<strong>相关滤波</strong>，也就是“覆盖位相乘，然后累加”</li><li>MATLAB中的写法为<code>imfilter(f, w, 'replicate')</code></li></ol> 
<h3 id="ref">ref</h3> 
<p><a href="https://www.zhihu.com/question/29121110" rel="nofollow" class="uri">https://www.zhihu.com/question/29121110</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6b00d2973d5297d4666e6ba3525e4495/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">@JSONField 注解详解和应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1dbfed97612fd6895f4073b1b9fb9617/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">springmvc中视图解析器与视图对象</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>