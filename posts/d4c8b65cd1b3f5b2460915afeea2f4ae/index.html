<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu16.04&#43;cuda8.0&#43;caffe安装教程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu16.04&#43;cuda8.0&#43;caffe安装教程" />
<meta property="og:description" content="1、安装nvidia驱动 首先去官网上查看适合你GPU的驱动（http://www.nvidia.com/Download/index.aspx?lang=en-us） 例如，本人的GPU适合的驱动如图： 执行如下语句，安装
sudo add-apt-repository ppa:graphics-drivers/ppa sudo apt-get update sudo apt-get install nvidia-367 sudo apt-get install mesa-common-dev sudo apt-get install freeglut3-dev 执行完上述后，重启（reboot）。 重启后输入：
nvidia-smi 如果出现了你的GPU列表，则说明驱动安装成功了。另外也可以通过
nvidia-settings 查看自己机器上详细的GPU信息，本人机器的信息如下： 2、安装CUDA cuda是nvidia的编程语言平台，想使用GPU就必须要使用cuda。 从这里下载cuda的安装文件 https://developer.nvidia.com/cuda-release-candidate-download 注意这里下载的是cuda8.0的runfile（local）文件。 这里是nvidia给出的官方安装指南（遇到问题时可以查阅）： http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#axzz4HIBXnwyt 下载完cuda8.0后，执行如下语句，运行runfile文件：
sudo sh cuda_8.0.27_linux.run 执行后会有一系列提示让你确认，但是注意，有个让你选择是否安装nvidia361驱动时，一定要选择否，因为前面我们已经安装了更加新的nvidia367，所以这里不要选择安装。其余的都直接默认或者选择是即可。 安装成功后会出现如下界面：
=========== = Summary = =========== Driver: Not Selected Toolkit: Installed in /usr/local/cuda-8.0 Samples: Installed in /home/textminer Please make sure that – PATH includes /usr/local/cuda-8.0/bin – LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d4c8b65cd1b3f5b2460915afeea2f4ae/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-08-24T14:00:52+08:00" />
<meta property="article:modified_time" content="2016-08-24T14:00:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu16.04&#43;cuda8.0&#43;caffe安装教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3 id="1安装nvidia驱动">1、安装nvidia驱动</h3> 
<p>首先去官网上查看适合你GPU的驱动（<a href="http://www.nvidia.com/Download/index.aspx?lang=en-us" rel="nofollow noopener noreferrer" target="_blank">http://www.nvidia.com/Download/index.aspx?lang=en-us</a>） <br> 例如，本人的GPU适合的驱动如图： <br> <img src="https://images2.imgbox.com/99/10/W9GUSfuQ_o.png" alt="这里写图片描述" title=""></p> 
<p>执行如下语句，安装</p> 
<pre class="prettyprint"><code class=" hljs lasso">sudo add<span class="hljs-attribute">-apt</span><span class="hljs-attribute">-repository</span> ppa:graphics<span class="hljs-attribute">-drivers</span>/ppa
sudo apt<span class="hljs-attribute">-get</span> update
sudo apt<span class="hljs-attribute">-get</span> install nvidia<span class="hljs-subst">-</span><span class="hljs-number">367</span>
sudo apt<span class="hljs-attribute">-get</span> install mesa<span class="hljs-attribute">-common</span><span class="hljs-attribute">-dev</span>
sudo apt<span class="hljs-attribute">-get</span> install freeglut3<span class="hljs-attribute">-dev</span></code></pre> 
<p>执行完上述后，重启（reboot）。 <br> 重启后输入：</p> 
<pre class="prettyprint"><code class=" hljs lasso">nvidia<span class="hljs-attribute">-smi</span></code></pre> 
<p>如果出现了你的GPU列表，则说明驱动安装成功了。另外也可以通过</p> 
<pre class="prettyprint"><code class=" hljs lasso">nvidia<span class="hljs-attribute">-settings</span></code></pre> 
<p>查看自己机器上详细的GPU信息，本人机器的信息如下： <br> <img src="https://images2.imgbox.com/d8/7f/2LZmIxkS_o.png" alt="这里写图片描述" title=""></p> 
<h3 id="2安装cuda">2、安装CUDA</h3> 
<p>cuda是nvidia的编程语言平台，想使用GPU就必须要使用cuda。 <br> 从这里下载cuda的安装文件 <br> <a href="https://developer.nvidia.com/cuda-release-candidate-download" rel="nofollow noopener noreferrer" target="_blank">https://developer.nvidia.com/cuda-release-candidate-download</a> <br> <img src="https://images2.imgbox.com/99/f9/8xMuwzDU_o.png" alt="这里写图片描述" title=""> <br> 注意这里下载的是cuda8.0的runfile（local）文件。 <br> 这里是nvidia给出的官方安装指南（遇到问题时可以查阅）： <br> <a href="http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#axzz4HIBXnwyt" rel="nofollow noopener noreferrer" target="_blank">http://docs.nvidia.com/cuda/cuda-installation-guide-linux/#axzz4HIBXnwyt</a> <br> 下载完cuda8.0后，执行如下语句，运行runfile文件：</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> sh cuda_8.<span class="hljs-number">0.27</span>_linux.run</code></pre> 
<p>执行后会有一系列提示让你确认，但是注意，有个让你选择是否安装nvidia361驱动时，一定要选择否，因为前面我们已经安装了更加新的nvidia367，所以这里不要选择安装。其余的都直接默认或者选择是即可。 <br> 安装成功后会出现如下界面：</p> 
<pre class="prettyprint"><code class=" hljs oxygene">===========
= Summary =
===========
Driver: <span class="hljs-keyword">Not</span> Selected
Toolkit: Installed <span class="hljs-keyword">in</span> /usr/local/cuda-<span class="hljs-number">8.0</span>
Samples: Installed <span class="hljs-keyword">in</span> /home/textminer
Please make sure that
– PATH includes /usr/local/cuda-<span class="hljs-number">8.0</span>/bin
– LD_LIBRARY_PATH includes /usr/local/cuda-<span class="hljs-number">8.0</span>/lib64, <span class="hljs-keyword">or</span>, <span class="hljs-keyword">add</span> /usr/local/cuda-<span class="hljs-number">8.0</span>/lib64 <span class="hljs-keyword">to</span> /etc/ld.so.conf <span class="hljs-keyword">and</span> run ldconfig <span class="hljs-keyword">as</span> root
<span class="hljs-keyword">To</span> uninstall the CUDA Toolkit, run the uninstall script <span class="hljs-keyword">in</span> /usr/local/cuda-<span class="hljs-number">8.0</span>/bin
Please see CUDA_Installation_Guide_Linux.pdf <span class="hljs-keyword">in</span> /usr/local/cuda-<span class="hljs-number">8.0</span>/doc/pdf <span class="hljs-keyword">for</span> detailed information <span class="hljs-keyword">on</span> setting up CUDA.
***WARNING: Incomplete installation! This installation did <span class="hljs-keyword">not</span> install the CUDA Driver. A driver <span class="hljs-keyword">of</span> version at least <span class="hljs-number">361.00</span> <span class="hljs-keyword">is</span> required <span class="hljs-keyword">for</span> CUDA <span class="hljs-number">8.0</span> functionality <span class="hljs-keyword">to</span> work.
<span class="hljs-keyword">To</span> install the driver <span class="hljs-keyword">using</span> this installer, run the following command, replacing <span class="hljs-keyword">with</span> the name <span class="hljs-keyword">of</span> this run file:
sudo .run -silent -driver
Logfile <span class="hljs-keyword">is</span> /opt/temp<span class="hljs-comment">//cuda_install_6583.log</span></code></pre> 
<p>安装完毕后，再声明一下环境变量，并将其写入到 ~/.bashrc 的尾部:</p> 
<pre class="prettyprint"><code class=" hljs ruby">export <span class="hljs-constant">PATH</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/cuda-8.0/bin</span><span class="hljs-variable">${<!-- --></span><span class="hljs-constant">PATH</span><span class="hljs-symbol">:+</span><span class="hljs-symbol">:</span><span class="hljs-variable">${<!-- --></span><span class="hljs-constant">PATH</span>}}
export <span class="hljs-constant">LD_LIBRARY_PATH</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/cuda-8.0/lib</span>64<span class="hljs-variable">${<!-- --></span><span class="hljs-constant">LD_LIBRARY_PATH</span><span class="hljs-symbol">:+</span><span class="hljs-symbol">:</span><span class="hljs-variable">${<!-- --></span><span class="hljs-constant">LD_LIBRARY_PATH</span>}}
</code></pre> 
<p>然后设置环境变量和动态链接库，在命令行输入：</p> 
<pre class="prettyprint"><code class=" hljs bash">$ <span class="hljs-built_in">sudo</span> gedit /etc/profile</code></pre> 
<p>在打开的文件末尾加入：</p> 
<pre class="prettyprint"><code class=" hljs ruby">export <span class="hljs-constant">PATH</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/cuda/bin</span><span class="hljs-symbol">:</span><span class="hljs-variable">$PATH</span></code></pre> 
<p>保存之后，创建链接文件：</p> 
<pre class="prettyprint"><code class=" hljs avrasm">sudo gedit /etc/<span class="hljs-keyword">ld</span><span class="hljs-preprocessor">.so</span><span class="hljs-preprocessor">.conf</span><span class="hljs-preprocessor">.d</span>/cuda<span class="hljs-preprocessor">.conf</span></code></pre> 
<p>在打开的文件中添加如下语句：</p> 
<pre class="prettyprint"><code class=" hljs lua">/usr/<span class="hljs-keyword">local</span>/cuda/lib64</code></pre> 
<p>然后执行</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> ldconfig</code></pre> 
<p>使链接立即生效。</p> 
<h3 id="3测试cuda的samples">3、测试cuda的Samples</h3> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">cd</span> /usr/local/cuda-<span class="hljs-number">7.5</span>/samples/<span class="hljs-number">1</span>_Utilities/deviceQuery
make
<span class="hljs-built_in">sudo</span> ./deviceQuery</code></pre> 
<p>如果显示的是一些关于GPU的信息，则说明安装成功了。</p> 
<h3 id="4使用cudnn">4、使用cudnn</h3> 
<p>首先去官网下载你需要的cudnn，下载的时候需要注册账号。选择对应你cuda版本的cudnn下载。这里我下载的是cudnn5.1，是个压缩文件（.tgz） <br> <img src="https://images2.imgbox.com/e3/25/MxKyBMug_o.png" alt="这里写图片描述" title=""> <br> 下载完cudnn5.0之后进行解压，cd进入cudnn5.1解压之后的include目录，在命令行进行如下操作：</p> 
<pre class="prettyprint"><code class=" hljs livecodeserver">sudo cp cudnn.h /usr/<span class="hljs-built_in">local</span>/cuda/<span class="hljs-built_in">include</span>/    <span class="hljs-comment">#复制头文件</span></code></pre> 
<p>再将cd进入lib64目录下的动态文件进行复制和链接：</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> cp lib* /usr/local/cuda/lib64/    <span class="hljs-comment">#复制动态链接库</span>
<span class="hljs-built_in">cd</span> /usr/local/cuda/lib64/
<span class="hljs-built_in">sudo</span> rm -rf libcudnn.so libcudnn.so.<span class="hljs-number">5</span>    <span class="hljs-comment">#删除原有动态文件</span>
<span class="hljs-built_in">sudo</span> ln <span class="hljs-operator">-s</span> libcudnn.so.<span class="hljs-number">5.0</span>.<span class="hljs-number">5</span> libcudnn.so.<span class="hljs-number">5</span>  <span class="hljs-comment">#生成软衔接</span>
<span class="hljs-built_in">sudo</span> ln <span class="hljs-operator">-s</span> libcudnn.so.<span class="hljs-number">5</span> libcudnn.so      <span class="hljs-comment">#生成软链接</span></code></pre> 
<h3 id="5matlab的安装与配置">5、matlab的安装与配置</h3> 
<p>在网盘上下载安装包<a href="http://pan.baidu.com/s/1nuKJc9N" rel="nofollow noopener noreferrer" target="_blank">http://pan.baidu.com/s/1nuKJc9N</a>。里面有一个crack文件夹，用于破解；MATHWORKS_R2014A.iso用于安装。</p> 
<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-number">1</span>、挂载iso（需新建matlab_iso文件夹）：
   sudo mount -o loop MATHWORKS_R2014A<span class="hljs-preprocessor">.iso</span> ～/matlab_is
<span class="hljs-number">2</span>、开始安装：
   cd ~/matlab_iso
   sudo ./install
<span class="hljs-number">3</span>、选择不联网安装
<span class="hljs-number">4</span>、密钥随便输入，比如 <span class="hljs-number">12345</span>-<span class="hljs-number">67890</span>-<span class="hljs-number">12345</span>-<span class="hljs-number">67890</span>
<span class="hljs-number">5</span>、激活：选择”license_405329_R2014a<span class="hljs-preprocessor">.lic</span>”文件进行激活（在Crack文件夹下面）
<span class="hljs-number">6</span>、将libmwservices<span class="hljs-preprocessor">.so</span>复制到/usr/local/MATLAB/R2014a/bin/glnxa64中：
   sudo <span class="hljs-keyword">cp</span> libmwservices<span class="hljs-preprocessor">.so</span> /usr/local/MATLAB/R2014a/bin/glnxa64/libmwservices<span class="hljs-preprocessor">.so</span></code></pre> 
<h3 id="6安装opencv310">6、安装opencv3.1.0</h3> 
<p>从官网上下载opencv3.1.0 <br> <a href="http://opencv.org/downloads.html" rel="nofollow noopener noreferrer" target="_blank">http://opencv.org/downloads.html</a> <br> 并将其解压到你要安装的位置，假设解压到了/home <br> 首先安装Ubuntu系统需要的依赖项，虽然我也不知道有些依赖项是干啥的，但是只管装就行，也不会占据很多空间的。</p> 
<pre class="prettyprint"><code class=" hljs lasso">sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-subst">--</span>assume<span class="hljs-attribute">-yes</span> libopencv<span class="hljs-attribute">-dev</span> build<span class="hljs-attribute">-essential</span> cmake git libgtk2<span class="hljs-number">.0</span><span class="hljs-attribute">-dev</span> pkg<span class="hljs-attribute">-config</span> python<span class="hljs-attribute">-dev</span> python<span class="hljs-attribute">-numpy</span> libdc1394<span class="hljs-subst">-</span><span class="hljs-number">22</span> libdc1394<span class="hljs-subst">-</span><span class="hljs-number">22</span><span class="hljs-attribute">-dev</span> libjpeg<span class="hljs-attribute">-dev</span> libpng12<span class="hljs-attribute">-dev</span> libtiff5<span class="hljs-attribute">-dev</span> libjasper<span class="hljs-attribute">-dev</span> libavcodec<span class="hljs-attribute">-dev</span> libavformat<span class="hljs-attribute">-dev</span> libswscale<span class="hljs-attribute">-dev</span> libxine2<span class="hljs-attribute">-dev</span> libgstreamer0<span class="hljs-number">.10</span><span class="hljs-attribute">-dev</span> libgstreamer<span class="hljs-attribute">-plugins</span><span class="hljs-attribute">-base0</span><span class="hljs-number">.10</span><span class="hljs-attribute">-dev</span> libv4l<span class="hljs-attribute">-dev</span> libtbb<span class="hljs-attribute">-dev</span> libqt4<span class="hljs-attribute">-dev</span> libfaac<span class="hljs-attribute">-dev</span> libmp3lame<span class="hljs-attribute">-dev</span> libopencore<span class="hljs-attribute">-amrnb</span><span class="hljs-attribute">-dev</span> libopencore<span class="hljs-attribute">-amrwb</span><span class="hljs-attribute">-dev</span> libtheora<span class="hljs-attribute">-dev</span> libvorbis<span class="hljs-attribute">-dev</span> libxvidcore<span class="hljs-attribute">-dev</span> x264 v4l<span class="hljs-attribute">-utils</span> unzip</code></pre> 
<p>然后安装opencv需要的一些依赖项，一些文件编码解码之类的东东。</p> 
<pre class="prettyprint"><code class=" hljs lasso">sudo apt<span class="hljs-attribute">-get</span> install build<span class="hljs-attribute">-essential</span> cmake git

sudo apt<span class="hljs-attribute">-get</span> install ffmpeg libopencv<span class="hljs-attribute">-dev</span> libgtk<span class="hljs-subst">-</span><span class="hljs-number">3</span><span class="hljs-attribute">-dev</span> python<span class="hljs-attribute">-numpy</span> python3<span class="hljs-attribute">-numpy</span> libdc1394<span class="hljs-subst">-</span><span class="hljs-number">22</span> libdc1394<span class="hljs-subst">-</span><span class="hljs-number">22</span><span class="hljs-attribute">-dev</span> libjpeg<span class="hljs-attribute">-dev</span> libpng12<span class="hljs-attribute">-dev</span> libtiff5<span class="hljs-attribute">-dev</span> libjasper<span class="hljs-attribute">-dev</span> libavcodec<span class="hljs-attribute">-dev</span> libavformat<span class="hljs-attribute">-dev</span> libswscale<span class="hljs-attribute">-dev</span> libxine2<span class="hljs-attribute">-dev</span> libgstreamer1<span class="hljs-number">.0</span><span class="hljs-attribute">-dev</span> libgstreamer<span class="hljs-attribute">-plugins</span><span class="hljs-attribute">-base1</span><span class="hljs-number">.0</span><span class="hljs-attribute">-dev</span> libv4l<span class="hljs-attribute">-dev</span> libtbb<span class="hljs-attribute">-dev</span> qtbase5<span class="hljs-attribute">-dev</span> libfaac<span class="hljs-attribute">-dev</span> libmp3lame<span class="hljs-attribute">-dev</span> libopencore<span class="hljs-attribute">-amrnb</span><span class="hljs-attribute">-dev</span> libopencore<span class="hljs-attribute">-amrwb</span><span class="hljs-attribute">-dev</span> libtheora<span class="hljs-attribute">-dev</span> libvorbis<span class="hljs-attribute">-dev</span> libxvidcore<span class="hljs-attribute">-dev</span> x264 v4l<span class="hljs-attribute">-utils</span> unzip</code></pre> 
<p>在终端中cd到opencv文件夹下，然后</p> 
<pre class="prettyprint"><code class=" hljs mathematica">mkdir build   #新建一个build文件夹，编译的工程都在这个文件夹里
cd build/    
cmake -<span class="hljs-keyword">D</span> CMAKE_BUILD_TYPE=RELEASE -<span class="hljs-keyword">D</span> CMAKE_INSTALL_PREFIX=/usr/local -<span class="hljs-keyword">D</span> WITH_TBB=ON -<span class="hljs-keyword">D</span> WITH_V4L=ON -<span class="hljs-keyword">D</span> WITH_QT=ON -<span class="hljs-keyword">D</span> WITH_OPENGL=ON -DCUDA_NVCC_FLAGS=<span class="hljs-string">"-D_FORCE_INLINES"</span> ..</code></pre> 
<p>cmake成功后，会出现如下结果，提示配置和生成成功：</p> 
<pre class="prettyprint"><code class=" hljs haml">-<span class="ruby">- <span class="hljs-constant">Configuring</span> done
</span>-<span class="ruby">- <span class="hljs-constant">Generating</span> done
</span>-<span class="ruby">- <span class="hljs-constant">Build</span> files have been written <span class="hljs-symbol">to:</span> /home/ise/software/opencv-<span class="hljs-number">3.1</span>.<span class="hljs-number">0</span>/build</span></code></pre> 
<p>然后make编译就可以了</p> 
<pre class="prettyprint"><code class=" hljs lasso">make <span class="hljs-attribute">-j8</span></code></pre> 
<p>上面是将opencv编译成功，但是并没有安装到我们的系统中，有很多的设置都没有写入到系统中，因此还要进行install。</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> make install
<span class="hljs-built_in">sudo</span> /bin/bash -c <span class="hljs-string">'echo "/usr/local/lib" &gt; /etc/ld.so.conf.d/opencv.conf'</span>
<span class="hljs-built_in">sudo</span> ldconfig</code></pre> 
<p>重启系统，重启系统后cd到build文件夹下：</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> apt-get install checkinstall
<span class="hljs-built_in">sudo</span> checkinstall</code></pre> 
<p>然后按照提示安装就可以了。 <br> 使用checkinstall的目的是为了更好的管理我安装的opencv，因为opencv的安装很麻烦，卸载更麻烦，其安装的时候修改了一大堆的文件，当我想使用别的版本的opencv时，将当前版本的opencv卸载就是一件头疼的事情，因此需要使用checkinstall来管理我的安装。 <br> 执行了checkinstall后，会在build文件下生成一个以backup开头的.tgz的备份文件和一个以build开头的.deb安装文件，当你想卸载当前的opencv时，直接执行<code>dpkg -r build</code>即可。</p> 
<h3 id="7安装caffe">7、安装caffe</h3> 
<p>首先安装各种依赖包</p> 
<pre class="prettyprint"><code class=" hljs lasso">sudo apt<span class="hljs-attribute">-get</span> update 
sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span> build<span class="hljs-attribute">-essential</span> cmake git pkg<span class="hljs-attribute">-config</span> 
 sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span> libprotobuf<span class="hljs-attribute">-dev</span> libleveldb<span class="hljs-attribute">-dev</span> libsnappy<span class="hljs-attribute">-dev</span> libhdf5<span class="hljs-attribute">-serial</span><span class="hljs-attribute">-dev</span> protobuf<span class="hljs-attribute">-compiler</span> 
 sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span> libatlas<span class="hljs-attribute">-base</span><span class="hljs-attribute">-dev</span> 
 sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span><span class="hljs-subst">--</span>no<span class="hljs-attribute">-install</span><span class="hljs-attribute">-recommends</span> libboost<span class="hljs-attribute">-all</span><span class="hljs-attribute">-dev</span> 
 sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span> libgflags<span class="hljs-attribute">-dev</span> libgoogle<span class="hljs-attribute">-glog</span><span class="hljs-attribute">-dev</span> liblmdb<span class="hljs-attribute">-dev</span> 
 sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span> python<span class="hljs-attribute">-pip</span> 
 sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span> python<span class="hljs-attribute">-dev</span> 
 sudo apt<span class="hljs-attribute">-get</span> install <span class="hljs-attribute">-y</span> python<span class="hljs-attribute">-numpy</span> python<span class="hljs-attribute">-scipy</span>  
</code></pre> 
<p>将终端cd到你要安装caffe的位置，执行如下指令，从github上clone caffe。</p> 
<pre class="prettyprint"><code class=" hljs avrasm">git clone https://github<span class="hljs-preprocessor">.com</span>/BVLC/caffe<span class="hljs-preprocessor">.git</span>  //从github上git caffe
cd caffe //打开到刚刚git下来的caffe 
sudo <span class="hljs-keyword">cp</span> Makefile<span class="hljs-preprocessor">.config</span><span class="hljs-preprocessor">.example</span> Makefile<span class="hljs-preprocessor">.config</span>   //将Makefile<span class="hljs-preprocessor">.config</span><span class="hljs-preprocessor">.example</span>的内容复制到Makefile<span class="hljs-preprocessor">.config</span> 
//因为make指令只能make Makefile<span class="hljs-preprocessor">.config</span>文件，而Makefile<span class="hljs-preprocessor">.config</span><span class="hljs-preprocessor">.example</span>是caffe给出的makefile例子 
sudo gedit Makefile<span class="hljs-preprocessor">.config</span> //打开Makefile<span class="hljs-preprocessor">.config</span>文件</code></pre> 
<pre class="prettyprint"><code class=" hljs lasso">打开之后修改如下内容：
<span class="hljs-comment">//若使用cudnn，则将# USE_CUDNN := 1 修改成： USE_CUDNN := 1 </span>
<span class="hljs-comment">//若使用的opencv版本是3的，则将# OPENCV_VERSION := 3 修改为： OPENCV_VERSION := 3 </span>
<span class="hljs-comment">//若要使用python来编写layer，则需要将# WITH_PYTHON_LAYER := 1 修改为 WITH_PYTHON_LAYER := 1 </span>
<span class="hljs-comment">//重要的一项 将# Whatever else you find you need goes here.下面的 INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib </span>
修改为： INCLUDE_DIRS <span class="hljs-subst">:=</span> $(PYTHON_INCLUDE) /usr/<span class="hljs-built_in">local</span>/include /usr/include/hdf5/serial 
      LIBRARY_DIRS <span class="hljs-subst">:=</span> $(PYTHON_LIB) /usr/<span class="hljs-built_in">local</span>/lib /usr/lib /usr/lib/x86_64<span class="hljs-attribute">-linux</span><span class="hljs-attribute">-gnu</span> /usr/lib/x86_64<span class="hljs-attribute">-linux</span><span class="hljs-attribute">-gnu</span>/hdf5/serial <span class="hljs-comment">//这是因为ubuntu16.04的文件包含位置发生了变化，尤其是需要用到的hdf5的位置，所以需要更改这一路径</span>

<span class="hljs-comment">//若使用MATLAB接口的话，则要讲MATLAB_DIR换成你自己的MATLAB安装路径</span>
MATLAB_DIR <span class="hljs-subst">:=</span> /usr/<span class="hljs-built_in">local</span>
MATLAB_DIR <span class="hljs-subst">:=</span> /usr/<span class="hljs-built_in">local</span>/matlab2014a</code></pre> 
<p>打开makefile文件，</p> 
<pre class="prettyprint"><code class=" hljs lasso">将
NVCCFLAGS <span class="hljs-subst">+=-</span>ccbin<span class="hljs-subst">=</span>$(CXX) <span class="hljs-attribute">-Xcompiler</span><span class="hljs-attribute">-fPIC</span> $(COMMON_FLAGS)
替换
NVCCFLAGS <span class="hljs-subst">+=</span> <span class="hljs-attribute">-D_FORCE_INLINES</span> <span class="hljs-attribute">-ccbin</span><span class="hljs-subst">=</span>$(CXX) <span class="hljs-attribute">-Xcompiler</span> <span class="hljs-attribute">-fPIC</span> $(COMMON_FLAGS)</code></pre> 
<p>编辑/usr/local/cuda/include/host_config.h，将其中的第115行注释掉： <br> 将</p> 
<pre class="prettyprint"><code class=" hljs lua">#<span class="hljs-built_in">error</span><span class="hljs-comment">-- unsupported GNU version! gcc versions later than 4.9 are not supported!</span>

改为
//#<span class="hljs-built_in">error</span><span class="hljs-comment">-- unsupported GNU version! gcc versions later than 4.9 are not supported!</span></code></pre> 
<p>之后再</p> 
<pre class="prettyprint"><code class=" hljs go"><span class="hljs-built_in">make</span> all -j8
<span class="hljs-built_in">make</span> runtest
<span class="hljs-built_in">make</span> pycaffe
<span class="hljs-built_in">make</span> matcaffe</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d145e3a39007a59420b0cdd1fdac11be/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">巧妙解决Unable to delete directory: 盘符\项目名称\app\build\output\apk</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/feb9e313eb8f9c3ac4b73f8658c90c5d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Socket的基础编程（二）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>