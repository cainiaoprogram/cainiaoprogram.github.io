<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>numpy和pytorch中的元素拼接操作：stack，concatenat，cat - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="numpy和pytorch中的元素拼接操作：stack，concatenat，cat" />
<meta property="og:description" content="numpy中对ndarray的拼接 numpy.concatenate
将多个矩阵沿着一个已经存在的维度进行拼接
需求：两个张量的维度的数量需要相同，同时除了拼接的维度，其它维度的形状需要相同。
np.concatenate((,),axis=) &#39;&#39;&#39; 第一个参数为要拼接的矩阵组成的元组 第二个参数为要拼接的维度 &#39;&#39;&#39; a = np.arange(3*3).reshape((3,3)) b = np.arange(3*4).reshape((3,4)) a,b (array([[0, 1, 2], [3, 4, 5], [6, 7, 8]]), array([[ 0, 1, 2, 3], [ 4, 5, 6, 7], [ 8, 9, 10, 11]])) np.concatenate([a,b],axis=1) array([[ 0, 1, 2, 0, 1, 2, 3], [ 3, 4, 5, 4, 5, 6, 7], [ 6, 7, 8, 8, 9, 10, 11]]) numpy.stack
将具有相同维度和形状的矩阵，在一个新的维度上进行堆叠
需求：矩阵具有完全相同的尺寸
np.stack((,), axis=) &#39;&#39;&#39; 参数和上面的函数相同 &#39;&#39;&#39; x1 = np." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b108f64602cacb74048031ee30dcf3a6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-28T11:15:49+08:00" />
<meta property="article:modified_time" content="2022-07-28T11:15:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">numpy和pytorch中的元素拼接操作：stack，concatenat，cat</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 id="元素拼接操作">numpy中对ndarray的拼接</h4> 
<p><strong>numpy.concatenate</strong></p> 
<p>将多个矩阵沿着一个已经存在的维度进行拼接</p> 
<p>需求：两个张量的维度的数量需要相同，同时除了拼接的维度，其它维度的形状需要相同。</p> 
<pre><code class="language-python">np.concatenate((,),axis=)
'''
第一个参数为要拼接的矩阵组成的元组
第二个参数为要拼接的维度
'''

a = np.arange(3*3).reshape((3,3))
b = np.arange(3*4).reshape((3,4))

a,b
(array([[0, 1, 2],
        [3, 4, 5],
        [6, 7, 8]]),
 array([[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]]))

np.concatenate([a,b],axis=1)
array([[ 0,  1,  2,  0,  1,  2,  3],
       [ 3,  4,  5,  4,  5,  6,  7],
       [ 6,  7,  8,  8,  9, 10, 11]])</code></pre> 
<p><strong>numpy.stack</strong></p> 
<p>将具有相同维度和形状的矩阵，在一个新的维度上进行堆叠</p> 
<p>需求：矩阵具有完全相同的尺寸</p> 
<pre><code class="language-python">np.stack((,), axis=)
'''
参数和上面的函数相同
'''


x1 = np.arange(9).reshape((3,3))
x2 = np.arange(10,19,1).reshape((3,3))

y2 = np.stack((x1,x2),axis=0)

输出：
    [[[ 0  1  2]
      [ 3  4  5]
      [ 6  7  8]]

     [[10 11 12]
      [13 14 15]
      [16 17 18]]]

    'y2.shape': (2,3,3)</code></pre> 
<p>PS：</p> 
<p><strong>np.hstack(tup) = np.concatenate(tup, axis=1)</strong></p> 
<p><strong>np.vstack(tup) = np.concatenate(tup, axis=0)</strong></p> 
<h4></h4> 
<h4>pytorch中对ndarray的拼接</h4> 
<p>pytorch中同样存在两个函数和numpy中的两种操作相同，分别为：</p> 
<p><strong>torch.cat((,), dim=) -&gt; numpy.concatenate((,), axis=)</strong></p> 
<p><strong>torch.stack((,), dim=) - &gt; numpy.stack((,), axis=)</strong></p> 
<p>区别：</p> 
<p>torch对tensor张量进行拼接，函数的第二个参数为dim=</p> 
<p>numpy对ndarray进行拼接，函数的第二个参数为axis=</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/44fd795c79f3e46c62c80a9b1347c68b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Setup Factory打包教程整合</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0f76fbea89a297d17f575d8a2b0e6a25/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JIT VS AOT</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>