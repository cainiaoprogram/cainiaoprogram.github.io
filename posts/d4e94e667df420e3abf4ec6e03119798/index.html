<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>YOLOv5训练自己的数据集（labelImg制作标签） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="YOLOv5训练自己的数据集（labelImg制作标签）" />
<meta property="og:description" content="YOLOv5官方讲解： Train Custom Data - YOLOv8 Docs (ultralytics.com)
labelImg（制作标签用） ：GitHub - liyunfei0411/labelimg-master
目录
1、Create dataset.yaml
2、Create Labels
1、下载labelimg仓库并安装labelimg
2、开始标注
①创建文件夹
②设置路径
③打标
3、xml文件
4、txt文件（YOLO v5）
3、Organize Directories
4、运行命令行
1、Create dataset.yaml 将yaml文件放入yolov5/datasets文件夹中，此处命名为lego.yaml文件，接下来需要对yaml文件 进行修改。yaml文件主要进行2个设置：①dataset的路径设置；②classes的设置
①路径设置
（1）path：训练集和测试集所在的上一级文件夹
（2）train：训练集所在文件夹，路径为path/train
（3）val：验证集所在文件夹，路径为path/val
（4）test：测试集所在文件夹，路径为path/test，可不设置，为空
举例：
②classes设置
nc -- 类别数
类名字典 -- 编号: 类别名
例：0对应lego
或
2、Create Labels 1、下载labelimg仓库并安装labelimg https://github.com/liyunfei0411/labelimg-master.git win&#43;anaconda环境下根据提示进行安装 打开Anaconda Prompt 后切换到labelimg文件夹输入以下命令
conda install pyqt=5 pyrcc5 -o libs/resources.py resources.qrc python labelImg.py python labelImg.py [IMAGE_PATH] [PRE-DEFINED CLASS FILE] 运行labelImg." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d4e94e667df420e3abf4ec6e03119798/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-06T23:36:10+08:00" />
<meta property="article:modified_time" content="2023-04-06T23:36:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">YOLOv5训练自己的数据集（labelImg制作标签）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>YOLOv5官方讲解： <a href="https://docs.ultralytics.com/yolov5/train_custom_data/" rel="nofollow" title="Train Custom Data - YOLOv8 Docs (ultralytics.com)">Train Custom Data - YOLOv8 Docs (ultralytics.com)</a></p> 
<p>labelImg（制作标签用） ：<a href="https://github.com/liyunfei0411/labelimg-master" title="GitHub - liyunfei0411/labelimg-master">GitHub - liyunfei0411/labelimg-master</a></p> 
<p></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1%E3%80%81Create%20dataset.yaml-toc" style="margin-left:0px;"><a href="#1%E3%80%81Create%20dataset.yaml" rel="nofollow">1、Create dataset.yaml</a></p> 
<p id="%C2%A02%E3%80%81Create%20Labels-toc" style="margin-left:0px;"><a href="#%C2%A02%E3%80%81Create%20Labels" rel="nofollow"> 2、Create Labels</a></p> 
<p id="1%E3%80%81%E4%B8%8B%E8%BD%BDlabelimg%E4%BB%93%E5%BA%93%E5%B9%B6%E5%AE%89%E8%A3%85labelimg-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E4%B8%8B%E8%BD%BDlabelimg%E4%BB%93%E5%BA%93%E5%B9%B6%E5%AE%89%E8%A3%85labelimg" rel="nofollow">1、下载labelimg仓库并安装labelimg</a></p> 
<p id="%C2%A02%E3%80%81%E5%BC%80%E5%A7%8B%E6%A0%87%E6%B3%A8-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E5%BC%80%E5%A7%8B%E6%A0%87%E6%B3%A8" rel="nofollow"> 2、开始标注</a></p> 
<p id="%E2%91%A0%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9-toc" style="margin-left:80px;"><a href="#%E2%91%A0%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9" rel="nofollow">①创建文件夹</a></p> 
<p id="%E2%91%A1%E8%AE%BE%E7%BD%AE%E8%B7%AF%E5%BE%84-toc" style="margin-left:80px;"><a href="#%E2%91%A1%E8%AE%BE%E7%BD%AE%E8%B7%AF%E5%BE%84" rel="nofollow">②设置路径</a></p> 
<p id="%E2%91%A2%E6%89%93%E6%A0%87-toc" style="margin-left:80px;"><a href="#%E2%91%A2%E6%89%93%E6%A0%87" rel="nofollow">③打标</a></p> 
<p id="%C2%A03%E3%80%81xml%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%C2%A03%E3%80%81xml%E6%96%87%E4%BB%B6" rel="nofollow"> 3、xml文件</a></p> 
<p id="%C2%A04%E3%80%81txt%E6%96%87%E4%BB%B6%EF%BC%88YOLO%20v5%EF%BC%89-toc" style="margin-left:40px;"><a href="#%C2%A04%E3%80%81txt%E6%96%87%E4%BB%B6%EF%BC%88YOLO%20v5%EF%BC%89" rel="nofollow"> 4、txt文件（YOLO v5）</a></p> 
<p id="3%E3%80%81Organize%20Directories-toc" style="margin-left:0px;"><a href="#3%E3%80%81Organize%20Directories" rel="nofollow">3、Organize Directories</a></p> 
<p id="%C2%A04%E3%80%81%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%A1%8C-toc" style="margin-left:0px;"><a href="#%C2%A04%E3%80%81%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%A1%8C" rel="nofollow"> 4、运行命令行</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1%E3%80%81Create%20dataset.yaml">1、Create dataset.yaml</h2> 
<p><img alt="" height="536" src="https://images2.imgbox.com/14/ab/3feHvjym_o.png" width="842"></p> 
<p>将yaml文件放入yolov5/datasets文件夹中，此处命名为lego.yaml文件，接下来需要对yaml文件 进行修改。yaml文件主要进行2个设置：①dataset的路径设置；②classes的设置</p> 
<p><img alt="" height="197" src="https://images2.imgbox.com/17/b8/N13h86R9_o.png" width="407"></p> 
<p><strong>①路径设置</strong></p> 
<p>（1）path：训练集和测试集所在的上一级文件夹</p> 
<p>（2）train：训练集所在文件夹，路径为path/train</p> 
<p>（3）val：验证集所在文件夹，路径为path/val</p> 
<p>（4）test：测试集所在文件夹，路径为path/test，可不设置，为空</p> 
<p>举例：</p> 
<p><img alt="" height="145" src="https://images2.imgbox.com/09/73/7TXreiLL_o.png" width="378"><img alt="" height="145" src="https://images2.imgbox.com/ae/95/Sjt1biOi_o.png" width="191"></p> 
<p></p> 
<p> <strong>②classes设置</strong></p> 
<p>nc -- 类别数</p> 
<p>类名字典 -- 编号: 类别名</p> 
<p>例：0对应lego</p> 
<p></p> 
<p><img alt="" height="71" src="https://images2.imgbox.com/75/0d/lvIYEnrQ_o.png" width="301"></p> 
<p>或</p> 
<p><img alt="" height="88" src="https://images2.imgbox.com/eb/1d/SVa30wNx_o.png" width="159"></p> 
<p></p> 
<h2 id="%C2%A02%E3%80%81Create%20Labels"> 2、Create Labels</h2> 
<p></p> 
<h3 id="1%E3%80%81%E4%B8%8B%E8%BD%BDlabelimg%E4%BB%93%E5%BA%93%E5%B9%B6%E5%AE%89%E8%A3%85labelimg">1、下载labelimg仓库并安装labelimg</h3> 
<pre><code>https://github.com/liyunfei0411/labelimg-master.git</code></pre> 
<p><img alt="" class="left" height="172" src="https://images2.imgbox.com/b9/59/JWmHVJCK_o.png" width="331"></p> 
<p>win+anaconda环境下根据提示进行安装  </p> 
<blockquote> 
 <p>打开Anaconda Prompt 后切换到labelimg文件夹输入以下命令</p> 
 <pre><code>conda install pyqt=5
pyrcc5 -o libs/resources.py resources.qrc
python labelImg.py
python labelImg.py [IMAGE_PATH] [PRE-DEFINED CLASS FILE]</code></pre> 
</blockquote> 
<p>运行labelImg.py后顺利弹出以下界面即为成功</p> 
<p><img alt="" class="left" height="300" src="https://images2.imgbox.com/f1/66/Erht4d67_o.png" width="336"></p> 
<p>若运行labelImg.py时遇到报错</p> 
<pre><code>(py38) F:\labelimg-master&gt;python labelImg.py
Traceback (most recent call last):
  File "labelImg.py", line 39, in &lt;module&gt;
    from libs.labelFile import LabelFile, LabelFileError
  File "F:\labelimg-master\libs\labelFile.py", line 10, in &lt;module&gt;
    from libs.pascal_voc_io import PascalVocWriter
  File "F:\labelimg-master\libs\pascal_voc_io.py", line 6, in &lt;module&gt;
    from lxml import etree
ModuleNotFoundError: No module named 'lxml'</code></pre> 
<p>安装这个包后就能顺利运行labelImg.py</p> 
<pre><code>pip install lxml</code></pre> 
<h3 id="%C2%A02%E3%80%81%E5%BC%80%E5%A7%8B%E6%A0%87%E6%B3%A8"> 2、开始标注</h3> 
<h4 id="%E2%91%A0%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E5%A4%B9">①创建文件夹</h4> 
<p>我在labelimg文件夹中创建了两个文件夹：images、labels。其中，images用来保存图片，labels用来保存标签的xml文件</p> 
<p><img alt="" height="159" src="https://images2.imgbox.com/6c/4b/iIcij2Ji_o.png" width="214">     <img alt="" height="159" src="https://images2.imgbox.com/29/2d/h9ThFNC1_o.png" width="317"></p> 
<h4 id="%E2%91%A1%E8%AE%BE%E7%BD%AE%E8%B7%AF%E5%BE%84">②设置路径</h4> 
<p>放大后界面：</p> 
<p> <img alt="" height="471" src="https://images2.imgbox.com/ee/55/w97OH1XP_o.png" width="469"></p> 
<p> open dir -- 图片所在文件夹，此处为C:\Users\r***\Pictures\labelimg\images</p> 
<p>change save dir -- 用来保存标签的文件夹，此处为C:\Users\r***\Pictures\labelimg\labels</p> 
<p>save下面是change save format，点击后即可切换为YOLO（如下图所示）。PascalVOC的保存格式为xml，yolo的格式为txt</p> 
<p><img alt="" height="123" src="https://images2.imgbox.com/84/b5/QMmEr3PG_o.png" width="196">  <img alt="" height="139" src="https://images2.imgbox.com/33/cc/bYyGdPjS_o.png" width="152"></p> 
<h4 id="%E2%91%A2%E6%89%93%E6%A0%87">③打标</h4> 
<p>设置号open dir后，中间会自动加载出images文件夹中的图片，就可以开始标注了。</p> 
<blockquote> 
 <p>按w -- 开始标注</p> 
 <p>按a -- 上一张</p> 
 <p>按d -- 下一张</p> 
</blockquote> 
<p>按w进行标注，移动鼠标画框</p> 
<p><img alt="" height="1022" src="https://images2.imgbox.com/c7/63/vNBX7kg7_o.png" width="1200"></p> 
<p> 下面会弹出小框 </p> 
<p><img alt="" height="666" src="https://images2.imgbox.com/2c/11/b84Gi4cX_o.jpg" width="802"></p> 
<p> 填入所属的class（此处为person）后ok，再ctrl+s保存</p> 
<p><img alt="" height="725" src="https://images2.imgbox.com/6c/db/rOMGutqk_o.png" width="1200"></p> 
<p>完成一张的标注后，按d进行下一张，如果设置了auto save mode，labelimg会在加载上一张前自动替你保存（意思就是不需要再手动ctrl+s来保存了）</p> 
<p><img alt="" height="297" src="https://images2.imgbox.com/9a/9c/pZjfVOXW_o.png" width="358"></p> 
<p>每完成一张图片，anaconda prompt会显示，labels文件夹中会多出一个xml文件。若images中的图片名为1.jpg，那么labels中对应的文件名为1.xml</p> 
<p><img alt="" height="326" src="https://images2.imgbox.com/7c/51/xyg4GnHd_o.png" width="1200"></p> 
<h3 id="%C2%A03%E3%80%81xml%E6%96%87%E4%BB%B6"> 3、xml文件</h3> 
<p>记录一下xml中保存了什么信息</p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/a1/76/ewydMhQ5_o.png" width="344"></p> 
<p>若有多个物体</p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/f2/73/rvWDLXLk_o.png" width="352"></p> 
<h3 id="%C2%A04%E3%80%81txt%E6%96%87%E4%BB%B6%EF%BC%88YOLO%20v5%EF%BC%89"> 4、txt文件（YOLO v5）</h3> 
<p>当保存为txt文件时，labels文件夹内部如下所示，主要是包括①所设置的类别及对应编号的说明（classes.txt）②每张图片对应的bounding box信息（如67.jpg对应信息保存在67.txt中）</p> 
<p> <img alt="" height="217" src="https://images2.imgbox.com/27/ba/3YIcYnaQ_o.png" width="637"></p> 
<p><strong>①classes.txt</strong>当中内容如下，classes由0开始编号</p> 
<p><img alt="" height="380" src="https://images2.imgbox.com/25/13/kZsPY3bF_o.png" width="188"></p> 
<p><strong>②73.txt</strong>当中内容：</p> 
<p><img alt="" height="87" src="https://images2.imgbox.com/2f/7a/zmeOoCaJ_o.png" width="292"></p> 
<p>其中第一列（15和16）代表对应class的编号，如15表示lego，16表示water；后四列是bounding box的边框信息。yolov5要求将坐标归一化到0-1，这里与xml当中的坐标不同</p> 
<p class="img-center"><img alt="" height="162" src="https://images2.imgbox.com/9b/c7/qTIxFlyN_o.png" width="492"></p> 
<h2 id="3%E3%80%81Organize%20Directories">3、Organize Directories</h2> 
<p><img alt="" height="204" src="https://images2.imgbox.com/38/63/emcLQ7c7_o.png" width="834"></p> 
<p>因为YOLOv5会将路径中最后一个 <code>/images/</code> 替换为 <code>/labels/，所以labels文件夹放置位置如下</code></p> 
<p><img alt="" height="99" src="https://images2.imgbox.com/00/79/GXFtUcUi_o.png" width="323"></p> 
<p><img alt="" height="99" src="https://images2.imgbox.com/95/3c/uhhhNqu6_o.png" width="336"></p> 
<p><img alt="" height="132" src="https://images2.imgbox.com/e4/e4/Qfb0Ifnk_o.png" width="386"></p> 
<h2 id="%C2%A04%E3%80%81%E8%BF%90%E8%A1%8C%E5%91%BD%E4%BB%A4%E8%A1%8C"> 4、运行命令行</h2> 
<p>（以下两种都可以）</p> 
<pre><code>F:\PycharmProjects\yolov5-master&gt;python train.py --img 640 --epochs 3 --data datasets/lego.yaml --weights yolov5s.pt

F:\PycharmProjects\yolov5-master&gt;python train.py --img 640 --epochs 3 --data datasets/lego1.yaml --weights yolov5s.pt</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p>参考：<a href="https://blog.csdn.net/zzqingyun/article/details/125815742" title="(2条消息) YOLOV5-打标签建立自己的数据集_yolov5打标签_卿云阁的博客-CSDN博客">(2条消息) YOLOV5-打标签建立自己的数据集_yolov5打标签_卿云阁的博客-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23fae1d42bc39fc1051ab512f6113729/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一万小时定律-二进制安全一路杀到黑</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e1d7782071a05a830e04cb7e5093425/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在springboot项目中全局设置都用 UTC&#43;8</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>