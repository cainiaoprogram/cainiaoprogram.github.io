<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>string 从后往前截取_分享最近在String.split方法上遇到的一个小坑 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="string 从后往前截取_分享最近在String.split方法上遇到的一个小坑" />
<meta property="og:description" content=" 最近在使用String类中的spilt方法对字符串进行分割的时候，在运行到下面取数组里面的元素的时候会出现StringIndexOutOfBoundsException
对此，请大家先看下面的代码
String str = &#34;/1/2/3/4///&#34;;String[] strs = str.split(&#34;/&#34;);System.out.println(&#34;strs数组长度：&#34; &#43; strs.length);System.out.println(&#34;strs数组元素：&#34; &#43; Arrays.toString(strs)); 对于这段代码，结果是：
strs数组长度：5strs数组元素：[, 1, 2, 3, 4] 为什么，有一个空字符串存在数组中呢，按照道理来说末尾的空字符串都默认去掉了，对此，只能找到jdk源码才能解决我的疑问了。
调用spilt，默认调用了String内部的另一个重载方法，然后我猜想问题出在limit参数上面。
接着往下面，调用的重载方法有两个不同的条件，分别走不同的方法。
当传进来的regex满足下面两个条件之一就不当做正则表达式处理
(1)、字符串长度等于1，.$|()[{^?*&#43;，并且字符串不是这里面中其中一个，也就是不是正则表达式的保留字符，使用这些字符串都要进行转义。
(2)、字符串长度等于2，第一个字符必须时反斜杠，并且第二个字符不是数字或字母
由于篇幅和时间有限，本文暂且只对目前的条件进行分析。
显然当前代码满足这个条件，继续进入if条件。
这个limit其实就是在限制分割的次数。
(1)、当limit == 0 时， limited 为false，!limited为true，默认不限制，取所有能分割的。代码走到2372就真相了，原来当limit == 0 时，默认从后往前去除为空的字符串。if (limit == 0) { while (resultSize &gt; 0 &amp;&amp; list.get(resultSize - 1).length() == 0) { resultSize--; }}(2)、当limit == -1时，也是不做分割次数的限制，但是也不会去除list末尾的空字符串。所以上面代码修改后再次执行就是8了修改代码后：String[] strs1 = str.split(&#34;/ " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1f2a1a90c0e11b6fdeab7bf9f03098f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-18T19:24:18+08:00" />
<meta property="article:modified_time" content="2021-01-18T19:24:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">string 从后往前截取_分享最近在String.split方法上遇到的一个小坑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>最近在使用String类中的spilt方法对字符串进行分割的时候，在运行到下面取数组里面的元素的时候会出现<strong>StringIndexOutOfBoundsException</strong></p> 
 <p>对此，请大家先看下面的代码</p> 
 <pre><code>String str = "/1/2/3/4///";String[] strs = str.split("/");System.out.println("strs数组长度：" + strs.length);System.out.println("strs数组元素：" + Arrays.toString(strs));</code></pre> 
 <p>对于这段代码，结果是：</p> 
 <pre><code>strs数组长度：5strs数组元素：[, 1, 2, 3, 4]</code></pre> 
 <p>为什么，有一个空字符串存在数组中呢，按照道理来说末尾的空字符串都默认去掉了，对此，只能找到jdk源码才能解决我的疑问了。</p> 
 <p>调用spilt，默认调用了String内部的另一个<strong>重载</strong>方法，然后我猜想问题出在limit参数上面。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/86/7e/SGnCzU8A_o.png" alt="b02cfe555511f0d4fe31e24ed6527dfc.png"> 
 </div> 
 <p>接着往下面，调用的重载方法有两个不同的条件，分别走不同的方法。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/95/35/0crwtdo5_o.png" alt="4c30565fcb1ce50a60378f56261c9a3b.png"> 
 </div> 
 <p>当传进来的regex满足下面两个条件之一就不当做正则表达式处理</p> 
 <p>(1)、字符串长度等于1，.$|()[{^?*+，并且字符串不是这里面中其中一个，也就是不是正则表达式的保留字符，使用这些字符串都要进行转义。</p> 
 <p>(2)、字符串长度等于2，第一个字符必须时反斜杠，并且第二个字符不是数字或字母</p> 
 <p>由于篇幅和时间有限，本文暂且只对目前的条件进行分析。</p> 
 <p>显然当前代码满足这个条件，继续进入if条件。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/21/01/23UQEvTK_o.png" alt="fad4af487835e3fbb7f561111a6c3e68.png"> 
 </div> 
 <p>这个limit其实就是在限制分割的次数。</p> 
 <pre><code>(1)、当limit == 0 时， limited 为false，!limited为true，默认不限制，取所有能分割的。代码走到2372就真相了，原来当limit == 0 时，默认从后往前去除为空的字符串。if (limit == 0) { while (resultSize &gt; 0 &amp;&amp; list.get(resultSize - 1).length() == 0) { resultSize--; }}(2)、当limit == -1时，也是不做分割次数的限制，但是也不会去除list末尾的空字符串。所以上面代码修改后再次执行就是8了修改代码后：String[] strs1 = str.split("/</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/21124a17d251d78dc69200dee2b0afc4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql表删除回滚_MySQL删除表的三种方式(小结)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a12b1b942e59e8a92a9aba6d1109a9af/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">常见的并行方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>