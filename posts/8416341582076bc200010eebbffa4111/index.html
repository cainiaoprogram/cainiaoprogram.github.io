<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>android 严振杰权限管理,GitHub - hnyer/AndPermission: 动态权限  - 权限申请  - Android Permission = AndPermission. An... - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="android 严振杰权限管理,GitHub - hnyer/AndPermission: 动态权限  - 权限申请  - Android Permission = AndPermission. An..." />
<meta property="og:description" content="AndPermission
特性
支持链式调用，一句话申请权限，为你省去复杂的逻辑判断
支持注解回调权限申请成功、失败
支持Listener方式回调权限申请成功，失败
支持Rationale，支持权限申请失败后，用户勾选了不再提示后提示用户
引用方法
AndroidStudio使用方法，gradle一句话远程依赖
compile &#39;com.yanzhenjie:permission:1.0.2&#39;
Or Maven:
com.yanzhenjie
permission
1.0.2
pom
Eclipse 下载jar包，或者自行下载源码。
Eclipse需要自行依赖Support的AppCompat项目。
使用介绍
更好的例子，请下载源码后运行demo查看，这里给出最关键的代码。
申请权限就是这么简单
AndPermission.with(this)
.requestCode(101)
.permission(Manifest.permission.WRITE_CONTACTS,
Manifest.permission.READ_SMS,
Manifest.permission.WRITE_EXTERNAL_STORAGE)
.send();
只需要在Activity中或者Fragment中直接调用即可，AndPermission自动为你打理好后宫。
接受权限回调更简单
方式一：利用Listener方式回调
@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
// 只需要调用这一句，剩下的AndPermission自动完成。
AndPermission.onRequestPermissionsResult(this, requestCode, permissions, grantResults, listener);
}
private PermissionListener listener = new PermissionListener() {
@Override
public void onSucceed(int requestCode) {
if(requeust == 100) {
..." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8416341582076bc200010eebbffa4111/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-25T22:01:33+08:00" />
<meta property="article:modified_time" content="2021-05-25T22:01:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">android 严振杰权限管理,GitHub - hnyer/AndPermission: 动态权限  - 权限申请  - Android Permission = AndPermission. An...</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>AndPermission</p> 
 <p>特性</p> 
 <p>支持链式调用，一句话申请权限，为你省去复杂的逻辑判断</p> 
 <p>支持注解回调权限申请成功、失败</p> 
 <p>支持Listener方式回调权限申请成功，失败</p> 
 <p>支持Rationale，支持权限申请失败后，用户勾选了不再提示后提示用户</p> 
 <p>引用方法</p> 
 <p>AndroidStudio使用方法，gradle一句话远程依赖</p> 
 <p>compile 'com.yanzhenjie:permission:1.0.2'</p> 
 <p>Or Maven:</p> 
 <p>com.yanzhenjie</p> 
 <p>permission</p> 
 <p>1.0.2</p> 
 <p>pom</p> 
 <p>Eclipse 下载jar包，或者自行下载源码。</p> 
 <p>Eclipse需要自行依赖Support的AppCompat项目。</p> 
 <p>使用介绍</p> 
 <p>更好的例子，请下载源码后运行demo查看，这里给出最关键的代码。</p> 
 <p>申请权限就是这么简单</p> 
 <p>AndPermission.with(this)</p> 
 <p>.requestCode(101)</p> 
 <p>.permission(Manifest.permission.WRITE_CONTACTS,</p> 
 <p>Manifest.permission.READ_SMS,</p> 
 <p>Manifest.permission.WRITE_EXTERNAL_STORAGE)</p> 
 <p>.send();</p> 
 <p>只需要在Activity中或者Fragment中直接调用即可，AndPermission自动为你打理好后宫。</p> 
 <p>接受权限回调更简单</p> 
 <p>方式一：利用Listener方式回调</p> 
 <p>@Override</p> 
 <p>public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {<!-- --></p> 
 <p>// 只需要调用这一句，剩下的AndPermission自动完成。</p> 
 <p>AndPermission.onRequestPermissionsResult(this, requestCode, permissions, grantResults, listener);</p> 
 <p>}</p> 
 <p>private PermissionListener listener = new PermissionListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void onSucceed(int requestCode) {<!-- --></p> 
 <p>if(requeust == 100) {<!-- --></p> 
 <p>...</p> 
 <p>} else if(requestCode == 101) {<!-- --></p> 
 <p>...</p> 
 <p>}</p> 
 <p>}</p> 
 <p>@Override</p> 
 <p>public void onFailed(int requestCode) {<!-- --></p> 
 <p>if(requeust == 100) {<!-- --></p> 
 <p>...</p> 
 <p>} else if(requestCode == 101) {<!-- --></p> 
 <p>...</p> 
 <p>}</p> 
 <p>}</p> 
 <p>};</p> 
 <p>方式二：利用注解回调</p> 
 <p>只需要重写Activity/Fragment的一个方法，然后提供一个授权时回调的方法即可：</p> 
 <p>@Override</p> 
 <p>public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {<!-- --></p> 
 <p>// 只需要调用这一句，剩下的AndPermission自动完成。</p> 
 <p>AndPermission.onRequestPermissionsResult(this, requestCode, permissions, grantResults);</p> 
 <p>}</p> 
 <p>// 成功回调的方法，用注解即可，里面的数字是请求时的requestCode。</p> 
 <p>@PermissionYes(100)</p> 
 <p>private void getLocationYes() {<!-- --></p> 
 <p>// 申请权限成功，可以去做点什么了。</p> 
 <p>Toast.makeText(this, "获取定位权限成功", Toast.LENGTH_SHORT).show();</p> 
 <p>}</p> 
 <p>// 失败回调的方法，用注解即可，里面的数字是请求时的requestCode。</p> 
 <p>@PermissionNo(100)</p> 
 <p>private void getLocationNo() {<!-- --></p> 
 <p>// 申请权限失败，可以提醒一下用户。</p> 
 <p>Toast.makeText(this, "获取定位权限失败", Toast.LENGTH_SHORT).show();</p> 
 <p>}</p> 
 <p>只需要上面这么几句话即可，你就可以大刀阔斧的干了，在总结中提到的各种判断、复杂的情况AndPermission自动完成。</p> 
 <p>3、如果你需要在用户多次拒绝权限后提示用户</p> 
 <p>AndPermission.with(this)</p> 
 <p>.requestCode(101)</p> 
 <p>.permission(Manifest.permission.WRITE_CONTACTS,</p> 
 <p>Manifest.permission.READ_SMS,</p> 
 <p>Manifest.permission.WRITE_EXTERNAL_STORAGE)</p> 
 <p>.rationale(mRationaleListener)</p> 
 <p>.send();</p> 
 <p>private RationaleListener mRationaleListener = new RationaleListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void showRequestPermissionRationale(int requestCode, final Rationale rationale) {<!-- --></p> 
 <p>new AlertDialog.Builder(RationalePermissionActivity.this)</p> 
 <p>.setTitle("友好提醒")</p> 
 <p>.setMessage("没有定位权限将不能为您推荐附近妹子，请把定位权限赐给我吧！")</p> 
 <p>.setPositiveButton("好，给你", new DialogInterface.OnClickListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void onClick(DialogInterface dialog, int which) {<!-- --></p> 
 <p>dialog.cancel();</p> 
 <p>rationale.resume();// 用户同意继续申请。</p> 
 <p>}</p> 
 <p>})</p> 
 <p>.setNegativeButton("我拒绝", new DialogInterface.OnClickListener() {<!-- --></p> 
 <p>@Override</p> 
 <p>public void onClick(DialogInterface dialog, int which) {<!-- --></p> 
 <p>dialog.cancel();</p> 
 <p>rationale.cancel(); // 用户拒绝申请。</p> 
 <p>}</p> 
 <p>}).show();</p> 
 <p>}</p> 
 <p>};</p> 
 <p>License</p> 
 <p>Copyright 2016 Yan Zhenjie</p> 
 <p>Licensed under the Apache License, Version 2.0 (the "License");</p> 
 <p>you may not use this file except in compliance with the License.</p> 
 <p>You may obtain a copy of the License at</p> 
 <p>http://www.apache.org/licenses/LICENSE-2.0</p> 
 <p>Unless required by applicable law or agreed to in writing, software</p> 
 <p>distributed under the License is distributed on an "AS IS" BASIS,</p> 
 <p>WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</p> 
 <p>See the License for the specific language governing permissions and</p> 
 <p>limitations under the License.</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c965ce1e70633716467c42011f38475d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">android&#43;资源管理框架,Android资源管理框架（Asset Manager）简要介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0ca6b50b7a6c6b60fda57a2b8f4693ed/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">rancher</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>