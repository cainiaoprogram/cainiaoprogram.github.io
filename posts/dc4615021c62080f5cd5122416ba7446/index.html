<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序仿闲鱼『下拉菜单』 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序仿闲鱼『下拉菜单』" />
<meta property="og:description" content="下拉菜单我们非常常见了，但是要在微信小程序中实现并不容易，今天带来的是仿闲鱼下拉菜单，相信对您有一定的帮助~~
先看效果：
麻雀虽小五脏俱全，此效果很复杂，我们将其拆分为多个步骤来分析~
1）tab状态的切换
先看效果：
wxml代码：
&lt;view class=&#34;{{navindex == 1? &#39;active&#39; : &#39;&#39;}}&#34;&gt; &lt;view class=&#34;content&#34;&gt;区域&lt;/view&gt; &lt;/view&gt; &lt;view class=&#34;{{navindex == 2? &#39;active&#39; : &#39;&#39;}}&#34; &gt; &lt;view class=&#34;content&#34;&gt;女装&lt;/view&gt; &lt;/view&gt; &lt;view class=&#34;{{navindex == 3? &#39;active&#39; : &#39;&#39;}}&#34; &gt; &lt;view class=&#34;content&#34;&gt;排序&lt;/view&gt; &lt;/view&gt; class中有个三目运算符点击的时候切换navindex值即可获得active，表示切换到另一种状态 2）菜单自上而下的动效
先看效果：
wxss代码：
@keyframes slidown{ from{ transform: translateY(-100%); } to{ transform: translateY(0%); } } @keyframes slidup{ from{ transform: translateY(0%); } to{ transform: translateY(-100%); } } 原理其实就是利用css3中的translateY做位移，就能实现自上而下的动效。
3）背景蒙层缓慢消失
先看效果：
wxss代码：
.fullbg{ background: rgb(1, 1, 1); transition: all 2s; opacity: 0; } ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/dc4615021c62080f5cd5122416ba7446/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-12-11T02:26:05+08:00" />
<meta property="article:modified_time" content="2016-12-11T02:26:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序仿闲鱼『下拉菜单』</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>下拉菜单我们非常常见了，但是要在微信小程序中实现并不容易，今天带来的是仿闲鱼下拉菜单，相信对您有一定的帮助~~</p> 
<p>先看效果：</p> 
<p><img src="https://images2.imgbox.com/ae/d6/hZ916eng_o.gif" alt="这里写图片描述" title=""></p> 
<p>麻雀虽小五脏俱全，此效果很复杂，我们将其<font color="red">拆分为多个步骤</font>来分析~</p> 
<p>1）tab状态的切换</p> 
<p>先看效果：</p> 
<p><img src="https://images2.imgbox.com/eb/c6/O8shfDKT_o.gif" alt="这里写图片描述" title=""></p> 
<p>wxml代码：</p> 
<pre class="prettyprint"><code class=" hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">view</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"</span></span></span><span class="hljs-expression">{<!-- -->{<!-- --><span class="hljs-variable">navindex</span> == 1? '<span class="hljs-variable">active</span>' : ''}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-value">"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">view</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"content"</span>&gt;</span>区域<span class="hljs-tag">&lt;/<span class="hljs-title">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">view</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">view</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"</span></span></span><span class="hljs-expression">{<!-- -->{<!-- --><span class="hljs-variable">navindex</span> == 2? '<span class="hljs-variable">active</span>' : ''}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-value">"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">view</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"content"</span>&gt;</span>女装<span class="hljs-tag">&lt;/<span class="hljs-title">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">view</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">view</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"</span></span></span><span class="hljs-expression">{<!-- -->{<!-- --><span class="hljs-variable">navindex</span> == 3? '<span class="hljs-variable">active</span>' : ''}}</span><span class="xml"><span class="hljs-tag"><span class="hljs-value">"</span> &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">view</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"content"</span>&gt;</span>排序<span class="hljs-tag">&lt;/<span class="hljs-title">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">view</span>&gt;</span></span></code></pre> 
<ul><li>class中有个三目运算符</li><li>点击的时候切换navindex值即可</li><li>获得active，表示切换到另一种状态</li></ul> 
<p>2）菜单自上而下的动效</p> 
<p>先看效果：</p> 
<p><img src="https://images2.imgbox.com/9c/32/CDlt4HVx_o.gif" alt="这里写图片描述" title=""></p> 
<p>wxss代码：</p> 
<pre class="prettyprint"><code class=" hljs css"><span class="hljs-at_rule">@<span class="hljs-keyword">keyframes</span> slidown</span>{
    <span class="hljs-tag">from</span><span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value">  <span class="hljs-function">translateY(-<span class="hljs-number">100</span>%)</span></span></span>;
    <span class="hljs-rule">}</span></span>
    <span class="hljs-tag">to</span><span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value">  <span class="hljs-function">translateY(<span class="hljs-number">0</span>%)</span></span></span>;
    <span class="hljs-rule">}</span></span>
}

<span class="hljs-at_rule">@<span class="hljs-keyword">keyframes</span> slidup</span>{
    <span class="hljs-tag">from</span><span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value">  <span class="hljs-function">translateY(<span class="hljs-number">0</span>%)</span></span></span>;
    <span class="hljs-rule">}</span></span>
    <span class="hljs-tag">to</span><span class="hljs-rules">{
        <span class="hljs-rule"><span class="hljs-attribute">transform</span>:<span class="hljs-value">  <span class="hljs-function">translateY(-<span class="hljs-number">100</span>%)</span></span></span>;
    <span class="hljs-rule">}</span></span>
}</code></pre> 
<p>原理其实就是利用css3中的translateY做位移，就能实现自上而下的动效。</p> 
<p>3）背景蒙层缓慢消失</p> 
<p>先看效果：</p> 
<p><img src="https://images2.imgbox.com/b9/1f/IdH3cNHg_o.gif" alt="这里写图片描述" title=""></p> 
<p>wxss代码：</p> 
<pre class="prettyprint"><code class=" hljs css"><span class="hljs-class">.fullbg</span><span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">background</span>:<span class="hljs-value"> <span class="hljs-function">rgb(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>)</span></span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">transition</span>:<span class="hljs-value"> all <span class="hljs-number">2</span>s</span></span>;
    <span class="hljs-rule"><span class="hljs-attribute">opacity</span>:<span class="hljs-value"> <span class="hljs-number">0</span></span></span>;
<span class="hljs-rule">}</span></span>
<span class="hljs-class">.fullopacity</span><span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">opacity</span>:<span class="hljs-value"> .<span class="hljs-number">5</span></span></span>;
<span class="hljs-rule">}</span></span></code></pre> 
<p>好吧，这里就是对opacity透明度做了一个transtion的过渡效果而已，so easy~~</p> 
<p>4）省市区联动选择器</p> 
<p>先看效果：</p> 
<p><img src="https://images2.imgbox.com/b2/e1/KQVC8oqH_o.gif" alt="这里写图片描述" title=""></p> 
<p>city.js文件：</p> 
<pre class="prettyprint"><code class=" hljs r">//下载地址：https://github.com/overtrue/city.js/tree/master/src

var city_data={<!-- --><span class="hljs-string">"北京市"</span>:{<!-- --><span class="hljs-string">"北京市"</span>:[<span class="hljs-string">"东城区"</span>,<span class="hljs-string">"西城区"</span>,<span class="hljs-string">"崇文区"</span>,<span class="hljs-string">"宣武区"</span>,<span class="hljs-string">"朝阳区"</span>,<span class="hljs-string">"丰台区"</span>,<span class="hljs-string">"石景山区"</span><span class="hljs-keyword">...</span></code></pre> 
<p>index.js文件</p> 
<pre class="prettyprint"><code class=" hljs css"><span class="hljs-tag">this</span><span class="hljs-class">.setData</span>(<span class="hljs-rules">{
    <span class="hljs-rule"><span class="hljs-attribute">show </span>:<span class="hljs-value"> city[currentcity]                            
</span></span></span>});</code></pre> 
<p>解释起来就是说，当点击xx市的时候，就可以通过city[xx市]获取该市里面的所有县区。</p> 
<p><br> <br> <font size="6"><a href="https://github.com/didiaohu/xiaoxiaoxiao/tree/master/drop-down-menu/menudown" target="_blank" rel="noopener noreferrer">源码下载</a></font></p> 
<p><font color="#666" size="2">『咻咻咻咻duang，是不是又忘了关注~~』</font> <br> <br></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/38a2399b0c0f2807a46ec014291e05fc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">位带操作与OMAP-L138的举例分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/13596caa227f9fc5e23b9ccf81d86cd4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">获取当前时间的前一天或后一天时间</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>