<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Wargames与bash知识10 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Wargames与bash知识10" />
<meta property="og:description" content="Wargames与bash知识10 Bandit Level 17 关卡提示： 主目录中有两个文件：passwords.old和passwords.new。下一级的密码在passwords.new中，是在password.old和password.new之间唯一被更改的行
注意：如果你已经解决了这个级别，请参阅“再见！”当尝试登录bandit18时，这与下一个级别bandit19有关。
推荐命令： cat, grep, ls, diff
转载自：读懂diff - 阮一峰的网络日志 (ruanyifeng.com)
读懂diff 作者： 阮一峰
diff是Unix系统的一个很重要的工具程序。
它用来比较两个文本文件的差异，是代码版本管理的基石之一。你在命令行下，输入：
$ diff &lt;变动前的文件&gt; &lt;变动后的文件&gt;
diff就会告诉你，这两个文件有何差异。它的显示结果不太好懂，下面我就来说明，如何读懂diff。
一、diff的三种格式
由于历史原因，diff有三种格式：
* 正常格式（normal diff）
* 上下文格式（context diff）
* 合并格式（unified diff）
我们依次来看。
二、示例文件
为了便于讲解，先新建两个示例文件。
第一个文件叫做f1，内容是每行一个a，一共7行。
a
a
a
a
a
a
a
第二个文件叫做f2，修改f1而成，第4行变成b，其他不变。
a
a
a
b
a
a
a
三、正常格式的diff
现在对f1和f2进行比较：
$ diff f1 f2
这时，diff就会显示正常格式的结果：
4c4
&lt; a
—
&gt; b" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/54a3204f287212574223776cc2e3ff0a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T12:30:05+08:00" />
<meta property="article:modified_time" content="2024-01-06T12:30:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Wargames与bash知识10</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Wargamesbash10_0"></a>Wargames与bash知识10</h3> 
<h3><a id="Bandit_Level_17_2"></a>Bandit Level 17</h3> 
<h3><a id="_4"></a>关卡提示：</h3> 
<p>主目录中有两个文件：passwords.old和passwords.new。下一级的密码在passwords.new中，是在password.old和password.new之间唯一被更改的行<br> 注意：如果你已经解决了这个级别，请参阅“再见！”当尝试登录bandit18时，这与下一个级别bandit19有关。</p> 
<h3><a id="_9"></a>推荐命令：</h3> 
<p>cat, grep, ls, diff</p> 
<p>转载自：读懂diff - 阮一峰的网络日志 (ruanyifeng.com)</p> 
<h3><a id="diff_15"></a>读懂diff</h3> 
<p>作者： 阮一峰</p> 
<p>diff是Unix系统的一个很重要的工具程序。</p> 
<p>它用来比较两个文本文件的差异，是代码版本管理的基石之一。你在命令行下，输入：</p> 
<p>$ diff &lt;变动前的文件&gt; &lt;变动后的文件&gt;</p> 
<p>diff就会告诉你，这两个文件有何差异。它的显示结果不太好懂，下面我就来说明，如何读懂diff。</p> 
<p>一、diff的三种格式</p> 
<p>由于历史原因，diff有三种格式：</p> 
<p>* 正常格式（normal diff）</p> 
<p>* 上下文格式（context diff）</p> 
<p>* 合并格式（unified diff）</p> 
<p>我们依次来看。</p> 
<p>二、示例文件</p> 
<p>为了便于讲解，先新建两个示例文件。</p> 
<p>第一个文件叫做f1，内容是每行一个a，一共7行。</p> 
<p>a<br> 　　a<br> 　　a<br> 　　a<br> 　　a<br> 　　a<br> 　　a</p> 
<p>第二个文件叫做f2，修改f1而成，第4行变成b，其他不变。</p> 
<p>a<br> 　　a<br> 　　a<br> 　　b<br> 　　a<br> 　　a<br> 　　a</p> 
<p>三、正常格式的diff</p> 
<p>现在对f1和f2进行比较：</p> 
<p>$ diff f1 f2</p> 
<p>这时，diff就会显示正常格式的结果：</p> 
<p>4c4<br> 　　&lt; a<br> 　　—<br> 　　&gt; b</p> 
<p>第一行是一个提示，用来说明变动位置。</p> 
<p>4c4</p> 
<p>它分成三个部分：前面的"4"，表示f1的第4行有变化；中间的"c"表示变动的模式是内容改变（change），其他模式还有"增加"（a，代表addition）和"删除"（d，代表deletion）；后面的"4"，表示变动后变成f2的第4行。</p> 
<p>第二行分成两个部分。</p> 
<p>&lt; a</p> 
<p>前面的小于号，表示要从f1当中去除该行（也就是第4行），后面的"a"表示该行的内容。</p> 
<p>第三行用来分割f1和f2。</p> 
<p>—</p> 
<p>第四行，类似于第二行。</p> 
<p>&gt; b</p> 
<p>前面的大于号表示f2增加了该行，后面的"b"表示该行的内容。</p> 
<p>最早的Unix（即AT&amp;T版本的Unix），使用的就是这种格式的diff。</p> 
<p>四、上下文格式的diff</p> 
<p>上个世纪80年代初，加州大学伯克利分校推出BSD版本的Unix时，觉得diff的显示结果太简单，最好加入上下文，便于了解发生的变动。因此，推出了上下文格式的diff。</p> 
<p>它的使用方法是加入c参数（代表context）。</p> 
<p>$ diff -c f1 f2</p> 
<p>显示结果如下：</p> 
<p></p> 
<pre><code class="prism language-bash">*** f1 <span class="token number">2012</span>-08-29 <span class="token number">16</span>:45:41.000000000 +0800
　　--- f2 <span class="token number">2012</span>-08-29 <span class="token number">16</span>:45:51.000000000 +0800
　　***************
　　*** <span class="token number">1,7</span> ****
　　 a
　　 a
　　 a
　　<span class="token operator">!</span>a
　　 a
　　 a
　　 a
　　--- <span class="token number">1,7</span> ----
　　 a
　　 a
　　 a
　　<span class="token operator">!</span>b
　　 a
　　 a
　　 a
</code></pre> 
<p>这个结果分成四个部分。</p> 
<p>第一部分的两行，显示两个文件的基本情况：文件名和时间信息。</p> 
<p></p> 
<p>*** f1 2012-08-29 16:45:41.000000000 +0800<br> 　　— f2 2012-08-29 16:45:51.000000000 +0800</p> 
<p>"***“表示变动前的文件，”—"表示变动后的文件。</p> 
<p>第二部分是15个星号，将文件的基本情况与变动内容分割开。</p> 
<p>***************</p> 
<p>第三部分显示变动前的文件，即f1。</p> 
<p></p> 
<p>*** 1,7 ****<br> 　　 a<br> 　　 a<br> 　　 a<br> 　　!a<br> 　　 a<br> 　　 a<br> 　　 a</p> 
<p>这时不仅显示发生变化的第4行，还显示第4行的前面三行和后面三行，因此一共显示7行。所以，前面的"*** 1,7 ****"就表示，从第1行开始连续7行。</p> 
<p>另外，文件内容的每一行最前面，还有一个标记位。如果为空，表示该行无变化；如果是感叹号（!），表示该行有改动；如果是减号（-），表示该行被删除；如果是加号（+），表示该行为新增。</p> 
<p>第四部分显示变动后的文件，即f2。</p> 
<p></p> 
<pre><code class="prism language-bash">--- <span class="token number">1,7</span> ----
　　 a
　　 a
　　 a
　　<span class="token operator">!</span>b
　　 a
　　 a
　　 a
</code></pre> 
<p>除了变动行（第4行）以外，也是上下文各显示三行，总共显示7行。</p> 
<p>五、合并格式的diff</p> 
<p>如果两个文件相似度很高，那么上下文格式的diff，将显示大量重复的内容，很浪费空间。1990年，GNU diff率先推出了"合并格式"的diff，将f1和f2的上下文合并在一起显示。</p> 
<p>它的使用方法是加入u参数（代表unified）。</p> 
<p>$ diff -u f1 f2</p> 
<p>显示结果如下：</p> 
<p></p> 
<pre><code class="prism language-bash">--- f1 <span class="token number">2012</span>-08-29 <span class="token number">16</span>:45:41.000000000 +0800
　　+++ f2 <span class="token number">2012</span>-08-29 <span class="token number">16</span>:45:51.000000000 +0800
　　@@ -1,7 +1,7 @@
　　 a
　　 a
　　 a
　　<span class="token parameter variable">-a</span>
　　+b
　　 a
　　 a
　　 a
</code></pre> 
<p>它的第一部分，也是文件的基本信息。</p> 
<p></p> 
<pre><code class="prism language-bash">--- f1 <span class="token number">2012</span>-08-29 <span class="token number">16</span>:45:41.000000000 +0800
　　+++ f2 <span class="token number">2012</span>-08-29 <span class="token number">16</span>:45:51.000000000 +0800
</code></pre> 
<p>"—“表示变动前的文件，”+++"表示变动后的文件。</p> 
<p>第二部分，变动的位置用两个@作为起首和结束。</p> 
<p>@@ -1,7 +1,7 @@</p> 
<p>前面的"-1,7"分成三个部分：减号表示第一个文件（即f1），"1"表示第1行，“7"表示连续7行。合在一起，就表示下面是第一个文件从第1行开始的连续7行。同样的，”+1,7"表示变动后，成为第二个文件从第1行开始的连续7行。</p> 
<p>第三部分是变动的具体内容。</p> 
<p></p> 
<pre><code class="prism language-bash"> a
　　 a
　　 a
　　<span class="token parameter variable">-a</span>
　　+b
　　 a
　　 a
　　 a
</code></pre> 
<p>除了有变动的那些行以外，也是上下文各显示3行。它将两个文件的上下文，合并显示在一起，所以叫做"合并格式"。每一行最前面的标志位，空表示无变动，减号表示第一个文件删除的行，加号表示第二个文件新增的行。</p> 
<p>六、git格式的diff</p> 
<p>版本管理系统git，使用的是合并格式diff的变体。</p> 
<p>$ git diff</p> 
<p>显示结果如下：</p> 
<p></p> 
<pre><code class="prism language-bash"><span class="token function">diff</span> <span class="token parameter variable">--git</span> a/f1 b/f1
　　index 6f8a38c<span class="token punctuation">..</span>449b072 <span class="token number">100644</span>
　　--- a/f1
　　+++ b/f1
　　@@ -1,7 +1,7 @@
　　 a
　　 a
　　 a
　　<span class="token parameter variable">-a</span>
　　+b
　　 a
　　 a
　　 a
</code></pre> 
<p>第一行表示结果为git格式的diff。</p> 
<p></p> 
<pre><code class="prism language-bash"><span class="token function">diff</span> <span class="token parameter variable">--git</span> a/f1 b/f1
</code></pre> 
<p>进行比较的是，a版本的f1（即变动前）和b版本的f1（即变动后）。</p> 
<p>第二行表示两个版本的git哈希值（index区域的6f8a38c对象，与工作目录区域的449b072对象进行比较），最后的六位数字是对象的模式（普通文件，644权限）。</p> 
<p></p> 
<pre><code class="prism language-bash">index 6f8a38c<span class="token punctuation">..</span>449b072 <span class="token number">100644</span>
</code></pre> 
<p>第三行表示进行比较的两个文件。</p> 
<p></p> 
<pre><code class="prism language-bash">--- a/f1
　　+++ b/f1
</code></pre> 
<p>"—“表示变动前的版本，”+++"表示变动后的版本。</p> 
<p>后面的行都与官方的合并格式diff相同。</p> 
<p></p> 
<pre><code class="prism language-bash">@@ -1,7 +1,7 @@
　　 a
　　 a
　　 a
　　<span class="token parameter variable">-a</span>
　　+b
　　 a
　　 a
　　 a
</code></pre> 
<h3><a id="_316"></a>解题：</h3> 
<pre><code class="prism language-bash">bandit17@bandit:~$ <span class="token function">diff</span> passwords.new  passwords.old
42c42
<span class="token operator">&lt;</span> hga5tuuCLF6fFzUpnagiMN8ssu9LFrdg
---
<span class="token operator">&gt;</span> p6ggwdNHncnmCNxuAt0KtKVq185ZU7AW
</code></pre> 
<h3><a id="Bandit_Level_18_326"></a>Bandit Level 18</h3> 
<h3><a id="_328"></a>关卡提示</h3> 
<p>下一级别的密码存储在主目录中的文件“readme”中。不幸的是，有人修改了.bashrc，使您在使用SSH登录时出现异常，登录成功以后立即就会被注销退出登录。</p> 
<p>ssh可以在不进入远程终端shell执行命令：下面的方法使用的here文档</p> 
<pre><code class="prism language-bash">gyj@DESKTOP-S52KD5S:~$ <span class="token function">ssh</span> <span class="token parameter variable">-p</span> <span class="token number">2220</span> <span class="token parameter variable">-l</span> bandit18 bandit.labs.overthewire.org <span class="token operator">&lt;&lt;</span><span class="token string">'EOF'
cat readme
EOF</span>
Pseudo-terminal will not be allocated because stdin is not a terminal.
                         _                     _ _ _
                        <span class="token operator">|</span> <span class="token operator">|</span>__   __ _ _ __   __<span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">|</span>_
                        <span class="token operator">|</span> <span class="token string">'_ \ / _` | '</span>_ <span class="token punctuation">\</span> / _<span class="token variable"><span class="token variable">`</span> <span class="token operator">|</span> <span class="token operator">|</span> __<span class="token operator">|</span>
                        <span class="token operator">|</span> <span class="token operator">|</span>_<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token punctuation">(</span>_<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>_
                        <span class="token operator">|</span>_.__/ <span class="token punctuation">\</span>__,_<span class="token operator">|</span>_<span class="token operator">|</span> <span class="token operator">|</span>_<span class="token operator">|</span><span class="token punctuation">\</span>__,_<span class="token operator">|</span>_<span class="token operator">|</span><span class="token punctuation">\</span>__<span class="token operator">|</span>


                      This is an OverTheWire game server.
            More information on http://www.overthewire.org/wargames

bandit18@bandit.labs.overthewire.org<span class="token string">'s password:
awhqfNnAbc1naukrpqDYcF95h7HoMTrC

## ssh执行命令的另一种方法：

gyj@DESKTOP-S52KD5S:~$ ssh -p 2220 -l bandit18 bandit.labs.overthewire.org "cat readme"
                         _                     _ _ _
                        | |__   __ _ _ __   __| (_) |_
                        | '</span>_ <span class="token punctuation">\</span> / _<span class="token variable">`</span></span> <span class="token operator">|</span> <span class="token string">'_ \ / _` | | __|
                        | |_) | (_| | | | | (_| | | |_
                        |_.__/ \__,_|_| |_|\__,_|_|\__|


                      This is an OverTheWire game server.
            More information on http://www.overthewire.org/wargames

bandit18@bandit.labs.overthewire.org'</span>s password:
awhqfNnAbc1naukrpqDYcF95h7Ho
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/23d61303e805d869680274958698d406/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入理解JVM虚拟机--3.3垃圾收集算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c36fc5a9ced0bde843dbd1a8687feca9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">利用注解和反射处理方法级别的逻辑</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>