<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux mysql 5.7 离线安装（tar.gz） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux mysql 5.7 离线安装（tar.gz）" />
<meta property="og:description" content="前言 服务器环境：centos7.3 x64
mysql版本：5.7.28
***需要卸载的话看这个：https://blog.csdn.net/shuai8624/article/details/103665983
GO 1. 官网下载压缩包 链接： https://dev.mysql.com/downloads/mysql/
选择linux通用64位，5.7.28
2. 查询并卸载系统自带的Mariadb rpm -qa | grep mariadb rpm -e --nodeps 文件名 3. 将压缩包放入服务器安装目录下（/usr/local），解压，重命名为mysql #解压命令 tar -xzvf mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz #重命名 mv mysql-5.7.28-linux-glibc2.12-x86_64 mysql 4. 检测mysql用户和mysql用户组是否存在，不存在则创建 #检测是否存在，如无则创建 cat /etc/group | grep mysql cat /etc/passwd | grep mysql *若存在请忽略创建
#创建mysql用户组 groupadd mysql #创建一个用户名为mysql的用户，并加入mysql用户组 useradd -g mysql mysql #修改mysql用户的登陆密码（不少于8位） passwd mysql 5. 修改mysql文件夹下所有文件的用户和用户组 chown -R mysql:mysql mysql/ 6. 创建mysql配置文件 my.cnf（位置/etc下面） cd /etc vi my." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/550d28ec98aac70a30ce555ecdddb05f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-18T15:26:06+08:00" />
<meta property="article:modified_time" content="2022-07-18T15:26:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux mysql 5.7 离线安装（tar.gz）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_1"></a>前言</h3> 
<p>服务器环境：centos7.3 x64<br> mysql版本：5.7.28<br> ***需要卸载的话看这个：<a href="https://blog.csdn.net/shuai8624/article/details/103665983">https://blog.csdn.net/shuai8624/article/details/103665983</a></p> 
<h3><a id="GO_5"></a>GO</h3> 
<h5><a id="1__7"></a>1. 官网下载压缩包</h5> 
<p>链接： https://dev.mysql.com/downloads/mysql/<br> 选择linux通用64位，5.7.28<br> <img src="https://images2.imgbox.com/e2/2c/fqZbygZ1_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2_Mariadb_11"></a>2. 查询并卸载系统自带的Mariadb</h5> 
<pre><code>rpm -qa | grep mariadb
rpm -e --nodeps 文件名
</code></pre> 
<p><img src="https://images2.imgbox.com/a0/42/CDSmZUvb_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_usrlocalmysql_19"></a>3. 将压缩包放入服务器安装目录下（/usr/local），解压，重命名为mysql</h5> 
<pre><code>#解压命令
tar -xzvf mysql-5.7.28-linux-glibc2.12-x86_64.tar.gz 
#重命名
mv mysql-5.7.28-linux-glibc2.12-x86_64 mysql
</code></pre> 
<h5><a id="4_mysqlmysql_28"></a>4. 检测mysql用户和mysql用户组是否存在，不存在则创建</h5> 
<pre><code>#检测是否存在，如无则创建
    cat /etc/group | grep mysql
    cat /etc/passwd | grep mysql
</code></pre> 
<p>*若存在请忽略创建</p> 
<pre><code> #创建mysql用户组
     groupadd mysql
 #创建一个用户名为mysql的用户，并加入mysql用户组
     useradd -g mysql mysql
 #修改mysql用户的登陆密码（不少于8位）
     passwd mysql
</code></pre> 
<p><img src="https://images2.imgbox.com/53/4d/88QB1PrN_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="5_mysql_45"></a>5. 修改mysql文件夹下所有文件的用户和用户组</h5> 
<pre><code>chown -R mysql:mysql mysql/
</code></pre> 
<h5><a id="6_mysql_mycnfetc_51"></a>6. 创建mysql配置文件 my.cnf（位置/etc下面）</h5> 
<pre><code>cd /etc
vi my.cnf
#将下面的my.cnf的内容复制进来，并保存
</code></pre> 
<p><em><strong>my.cnf</strong></em></p> 
<pre><code># For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M

# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin

# These are commonly set, remove the # and set as required.
# basedir = .....
# datadir = .....
# port = .....
# server_id = .....
# socket = .....

# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M 

sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES 

# 设置mysql客户端默认字符集  


socket=/var/lib/mysql/mysql.sock

[mysqld]  

#skip-name-resolve  

#设置3306端口  

port = 3306   

socket=/var/lib/mysql/mysql.sock  

# 设置mysql的安装目录  

basedir=/usr/local/mysql  

# 设置mysql数据库的数据的存放目录  

datadir=/usr/local/mysql/data

log-error = /usr/local/mysql/data/error.log

pid-file = /usr/local/mysql/data/mysql.pid

tmpdir = /tmp/mysql  

# 允许最大连接数  

max_connections=200  

# 服务端使用的字符集默认为8比特编码的latin1字符集  

character-set-server=utf8  

# 创建新表时将使用的默认存储引擎  

default-storage-engine=INNODB  

#lower_case_table_name=1  

max_allowed_packet=16M 

user=mysql
</code></pre> 
<h5><a id="7_mycnf_140"></a>7. 创建my.cnf中配置的相关目录</h5> 
<pre><code>#创建目录
mkdir /var/lib/mysql
#赋权限
chmod 777 /var/lib/mysql
</code></pre> 
<h5><a id="8_mysql_149"></a>8. 初始化mysql数据库</h5> 
<pre><code>/usr/local/mysql/bin/mysqld --initialize --user=mysql
</code></pre> 
<p>报错如下：<br> <img src="https://images2.imgbox.com/b8/38/ljYZ4T4h_o.png" alt="在这里插入图片描述"><br> 解决方式：yum -y install numactl</p> 
<h5><a id="9_mysql_157"></a>9. 配置mysql服务开机自启动</h5> 
<pre><code>#复制启动脚本到资源目录
cp /usr/local/mysql/support-files/mysql.server /etc/rc.d/init.d/mysqld
#增加mysqld服务控制脚本执行权限
chmod +x /etc/rc.d/init.d/mysqld
# 将mysqld服务加入到系统服务
chkconfig --add mysqld
# 检查mysqld服务是否已经生效
chkconfig --list mysqld
# 切换至mysql用户，启动mysql
service mysqld start
#启动成功如下图：
</code></pre> 
<p><img src="https://images2.imgbox.com/8a/75/mfXMRLEr_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="10__174"></a>10. 配置环境变量</h5> 
<pre><code>vim /etc/profile
#最下面增加如下
export PATH=$PATH:/usr/local/mysql/bin
#刷新环境变量使之生效
source /etc/profile
</code></pre> 
<h5><a id="11_mysql_184"></a>11. 修改mysql密码(废了老劲了)</h5> 
<pre><code>#获取root用户密码,若没有该文件，往下看有解决方式
cat /root/.mysql_secret
#登陆mysql
mysql -uroot -p  
#输入刚才的密码，回车报错如下：
</code></pre> 
<p><img src="https://images2.imgbox.com/45/2f/WQmVwIer_o.png" alt="在这里插入图片描述"><br> 解决方式： ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock</p> 
<ul><li>重启mysql服务，再次输入密码，又报错了。<br> <img src="https://images2.imgbox.com/3a/a0/0Djm39fZ_o.png" alt="在这里插入图片描述"><br> <em>默认的密码不好使或者没有默认密码</em>，如下解决：</li></ul> 
<pre><code>#停止mysql服务
service mysqld stop
#以不启用grant-tables模式启动mysql
mysqld_safe --skip-grant-tables &amp;
mysql -uroot -p  直接回车进去
use mysql;
#更新密码如下，5.7版本下的mysql数据库下已经没有password这个字段了，password字段改成了authentication_string
update user set authentication_string=password('111111') where user='root';
#刷新权限
flush privileges;
</code></pre> 
<h5><a id="12_mysql_213"></a>12. 给mysql赋远程连接权限</h5> 
<pre><code>#登陆mysql
mysql -uroot -p
#选择mysql
use mysql
#若报错如下，需要重置密码。
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
#重置密码
SET PASSWORD = PASSWORD('111111');
#设置密码永不过期
ALTER USER 'root'@'localhost' PASSWORD EXPIRE NEVER;
#赋远程访问权限
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '111111';
#刷新
FLUSH PRIVILEGES;
</code></pre> 
<h5><a id="13navicat_231"></a>13.navicat远程连接验证</h5> 
<p>ps：若安装过程中遇到问题，可以加qq群探讨700637673</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53c6efce296201da6f3c799133d281a0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《数据结构》邓俊辉 网课习题详细解析（第五章：二叉树）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b4ab6819f5ec8abce3a23343c67f889f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Typora 0.11.xx版本无法使用的解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>