<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu设置国内镜像源 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu设置国内镜像源" />
<meta property="og:description" content="文章目录 环境背景方法1：使用清华大学镜像源使用HTTP方式使用HTTPS方式 方法2：使用阿里云镜像源总结参考 环境 RHEL 9.3Docker Community 24.0.7ubuntu:latest Docker image (jammy 22.04) 背景 启动Ubuntu容器：
docker run -it ubuntu 在容器里：
vim bash: vim: command not found 查看Ubuntu版本：
cat /etc/issue Ubuntu 22.04.3 LTS \n \l 安装vim：
apt install vim Reading package lists... Done Building dependency tree... Done Reading state information... Done E: Unable to locate package vim 失败了。要先 apt update 更新package列表：
apt update 然后再安装vim：
apt install vim 这次安装成功了。但问题是，国内在连接Ubuntu网站的时候，特别慢，还经常连接失败。
查看 /etc/apt/sources.list 文件，如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c242c6b073beba498cbec4b226a5cfdd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T08:56:16+08:00" />
<meta property="article:modified_time" content="2024-01-10T08:56:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu设置国内镜像源</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_2" rel="nofollow">环境</a></li><li><a href="#_7" rel="nofollow">背景</a></li><li><a href="#1_102" rel="nofollow">方法1：使用清华大学镜像源</a></li><li><ul><li><a href="#HTTP_109" rel="nofollow">使用HTTP方式</a></li><li><a href="#HTTPS_197" rel="nofollow">使用HTTPS方式</a></li></ul> 
  </li><li><a href="#2_306" rel="nofollow">方法2：使用阿里云镜像源</a></li><li><a href="#_342" rel="nofollow">总结</a></li><li><a href="#_352" rel="nofollow">参考</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>环境</h2> 
<ul><li>RHEL 9.3</li><li>Docker Community 24.0.7</li><li>ubuntu:latest Docker image (jammy 22.04)</li></ul> 
<h2><a id="_7"></a>背景</h2> 
<p>启动Ubuntu容器：</p> 
<pre><code class="prism language-powershell">docker run <span class="token operator">-</span>it ubuntu
</code></pre> 
<p>在容器里：</p> 
<pre><code class="prism language-powershell">vim
bash: vim: command not found
</code></pre> 
<p>查看Ubuntu版本：</p> 
<pre><code class="prism language-powershell"><span class="token function">cat</span> <span class="token operator">/</span>etc/issue
Ubuntu 22<span class="token punctuation">.</span>04<span class="token punctuation">.</span>3 LTS \n \l
</code></pre> 
<p>安装vim：</p> 
<pre><code class="prism language-powershell">apt install vim
Reading package lists<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Building dependency tree<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Reading state information<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
E: Unable to locate package vim
</code></pre> 
<p>失败了。要先 <code>apt update</code> 更新package列表：</p> 
<pre><code class="prism language-powershell">apt update
</code></pre> 
<p>然后再安装vim：</p> 
<pre><code class="prism language-powershell">apt install vim
</code></pre> 
<p>这次安装成功了。但问题是，国内在连接Ubuntu网站的时候，特别慢，还经常连接失败。</p> 
<p>查看 <code>/etc/apt/sources.list</code> 文件，如下：</p> 
<pre><code class="prism language-powershell"><span class="token function">cat</span> <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list
<span class="token comment"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span>
<span class="token comment"># newer versions of the distribution.</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy main restricted
<span class="token comment"># deb-src http://archive.ubuntu.com/ubuntu/ jammy main restricted</span>

<span class="token comment">## Major bug fix updates produced after the final release of the</span>
<span class="token comment">## distribution.</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-updates main restricted
<span class="token comment"># deb-src http://archive.ubuntu.com/ubuntu/ jammy-updates main restricted</span>

<span class="token comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span>
<span class="token comment">## team. Also, please note that software in universe WILL NOT receive any</span>
<span class="token comment">## review or updates from the Ubuntu security team.</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy universe
<span class="token comment"># deb-src http://archive.ubuntu.com/ubuntu/ jammy universe</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-updates universe
<span class="token comment"># deb-src http://archive.ubuntu.com/ubuntu/ jammy-updates universe</span>

<span class="token comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span>
<span class="token comment">## team, and may not be under a free licence. Please satisfy yourself as to</span>
<span class="token comment">## your rights to use the software. Also, please note that software in</span>
<span class="token comment">## multiverse WILL NOT receive any review or updates from the Ubuntu</span>
<span class="token comment">## security team.</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy multiverse
<span class="token comment"># deb-src http://archive.ubuntu.com/ubuntu/ jammy multiverse</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-updates multiverse
<span class="token comment"># deb-src http://archive.ubuntu.com/ubuntu/ jammy-updates multiverse</span>

<span class="token comment">## N.B. software from this repository may not have been tested as</span>
<span class="token comment">## extensively as that contained in the main release, although it includes</span>
<span class="token comment">## newer versions of some applications which may provide useful features.</span>
<span class="token comment">## Also, please note that software in backports WILL NOT receive any review</span>
<span class="token comment">## or updates from the Ubuntu security team.</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>archive<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-backports main restricted universe multiverse
<span class="token comment"># deb-src http://archive.ubuntu.com/ubuntu/ jammy-backports main restricted universe multiverse</span>

deb http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-security main restricted
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-security universe
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security universe</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-security multiverse
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security multiverse</span>
</code></pre> 
<p>为了提高效率，可以配置使用国内的Ubuntu镜像源。对于不同的镜像源，配置方法基本都一样。本文以清华大学镜像源和阿里云镜像源为例，介绍如何配置Ubuntu镜像源。</p> 
<h2><a id="1_102"></a>方法1：使用清华大学镜像源</h2> 
<p>打开浏览器，访问 <code>https://mirror.tuna.tsinghua.edu.cn/help/ubuntu</code> ：</p> 
<p><img src="https://images2.imgbox.com/22/2f/UrN5keTi_o.png" alt="在这里插入图片描述"></p> 
<p>注意设置适当的选项。例如，我使用的是 Ubuntu 22.04，代号是 <code>jammy</code> 。</p> 
<h3><a id="HTTP_109"></a>使用HTTP方式</h3> 
<p>不勾选“是否使用HTTPS”选项。</p> 
<p>其生成的内容如下：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/ jammy main restricted universe multiverse
<span class="token comment"># deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/ jammy-updates main restricted universe multiverse
<span class="token comment"># deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span>
deb http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/ jammy-backports main restricted universe multiverse
<span class="token comment"># deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span>

deb http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-security main restricted universe multiverse
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span>

<span class="token comment"># 预发布软件源，不建议启用</span>
<span class="token comment"># deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
<span class="token comment"># # deb-src http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
</code></pre> 
<p>要用这些内容替换容器里的 <code>/etc/apt/sources.list</code> 文件。</p> 
<p>替换之前，先备份文件：</p> 
<pre><code class="prism language-powershell"><span class="token function">cp</span> <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list<span class="token punctuation">.</span>bak
</code></pre> 
<p>由于没有vi，无法直接编辑文件，可以先在宿主机上把文件编辑好，然后使用 <code>docker cp</code> 命令向容器里复制文件，例如：</p> 
<pre><code class="prism language-powershell">docker <span class="token function">cp</span> <span class="token operator">/</span>tmp/sources<span class="token punctuation">.</span>list<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>http a65352ec73a9:<span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list
</code></pre> 
<p>在容器里查看文件：</p> 
<pre><code class="prism language-powershell">ll <span class="token operator">-</span>d <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list*
<span class="token operator">-</span>rw-r-<span class="token operator">-</span>r-<span class="token operator">-</span><span class="token punctuation">.</span> 1 1000 1000 1122 Jan  8 01:31 <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list
<span class="token operator">-</span>rw-r-<span class="token operator">-</span>r-<span class="token operator">-</span><span class="token punctuation">.</span> 1 root root 2403 Jan  8 07:14 <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list<span class="token punctuation">.</span>bak
drwxr-xr-x<span class="token punctuation">.</span> 2 root root    6 Apr  8  2022 <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list<span class="token punctuation">.</span>d/
</code></pre> 
<p>文件权限不同，不知道会不会有什么影响，最好还是和原来的文件保持一致吧：</p> 
<pre><code class="prism language-powershell">chown root:root <span class="token operator">/</span>etc/apt/sources<span class="token punctuation">.</span>list
</code></pre> 
<p>更新package列表：</p> 
<pre><code class="prism language-powershell">apt update
Get:1 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy InRelease <span class="token punctuation">[</span>270 kB<span class="token punctuation">]</span>
Get:2 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates InRelease <span class="token punctuation">[</span>119 kB<span class="token punctuation">]</span>
Get:3 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-backports InRelease <span class="token punctuation">[</span>109 kB<span class="token punctuation">]</span>
Get:4 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy/multiverse amd64 Packages <span class="token punctuation">[</span>266 kB<span class="token punctuation">]</span>
Get:5 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy/restricted amd64 Packages <span class="token punctuation">[</span>164 kB<span class="token punctuation">]</span>         
Get:6 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy/main amd64 Packages <span class="token punctuation">[</span>1792 kB<span class="token punctuation">]</span>                       
Get:7 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy/universe amd64 Packages <span class="token punctuation">[</span>17<span class="token punctuation">.</span>5 MB<span class="token punctuation">]</span>                   
Get:8 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates/main amd64 Packages <span class="token punctuation">[</span>1606 kB<span class="token punctuation">]</span>
Get:9 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates/universe amd64 Packages <span class="token punctuation">[</span>1307 kB<span class="token punctuation">]</span>
Get:10 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates/multiverse amd64 Packages <span class="token punctuation">[</span>49<span class="token punctuation">.</span>8 kB<span class="token punctuation">]</span>
Get:11 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates/restricted amd64 Packages <span class="token punctuation">[</span>1611 kB<span class="token punctuation">]</span>
Get:12 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security InRelease <span class="token punctuation">[</span>110 kB<span class="token punctuation">]</span>      
Get:13 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-backports/universe amd64 Packages <span class="token punctuation">[</span>28<span class="token punctuation">.</span>1 kB<span class="token punctuation">]</span>
Get:14 http:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-backports/main amd64 Packages <span class="token punctuation">[</span>50<span class="token punctuation">.</span>4 kB<span class="token punctuation">]</span>
Get:15 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/universe amd64 Packages <span class="token punctuation">[</span>1047 kB<span class="token punctuation">]</span>
Get:16 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/main amd64 Packages <span class="token punctuation">[</span>1332 kB<span class="token punctuation">]</span>
Get:17 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/multiverse amd64 Packages <span class="token punctuation">[</span>44<span class="token punctuation">.</span>0 kB<span class="token punctuation">]</span>
Get:18 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/restricted amd64 Packages <span class="token punctuation">[</span>1582 kB<span class="token punctuation">]</span>
Fetched 29<span class="token punctuation">.</span>0 MB in 4s <span class="token punctuation">(</span>7161 kB/s<span class="token punctuation">)</span>                           
Reading package lists<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Building dependency tree<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Reading state information<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
All packages are up to date<span class="token punctuation">.</span>
</code></pre> 
<p>配置镜像源成功。</p> 
<p>现在，就可以安装vim了：</p> 
<pre><code class="prism language-powershell">apt install vim
</code></pre> 
<h3><a id="HTTPS_197"></a>使用HTTPS方式</h3> 
<p>如果要使用HTTPS，则需要安装证书，否则apt update会有警告，实际上并没有update成功，安装vim也会失败。</p> 
<p>勾选“是否使用HTTPS”选项。</p> 
<p>其生成的内容如下：</p> 
<pre><code class="prism language-powershell"><span class="token comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/ jammy main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span>
deb https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/ jammy-updates main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span>
deb https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/ jammy-backports main restricted universe multiverse
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span>

deb http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu/ jammy-security main restricted universe multiverse
<span class="token comment"># deb-src http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse</span>

<span class="token comment"># 预发布软件源，不建议启用</span>
<span class="token comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
<span class="token comment"># # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse</span>
</code></pre> 
<p>替换 <code>/etc/apt/sources.list</code> 文件，方法同上。</p> 
<p>更新package列表：</p> 
<pre><code class="prism language-powershell">apt update
Ign:1 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy InRelease
Ign:2 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates InRelease
Ign:3 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-backports InRelease
Get:4 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security InRelease <span class="token punctuation">[</span>110 kB<span class="token punctuation">]</span>
Ign:1 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy InRelease
Ign:2 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates InRelease
Ign:3 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-backports InRelease
Get:5 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/main amd64 Packages <span class="token punctuation">[</span>1332 kB<span class="token punctuation">]</span>
Get:6 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/universe amd64 Packages <span class="token punctuation">[</span>1047 kB<span class="token punctuation">]</span>
Ign:1 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy InRelease
Ign:2 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates InRelease
Get:7 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/multiverse amd64 Packages <span class="token punctuation">[</span>44<span class="token punctuation">.</span>0 kB<span class="token punctuation">]</span>                 
Get:8 http:<span class="token operator">/</span><span class="token operator">/</span>security<span class="token punctuation">.</span>ubuntu<span class="token punctuation">.</span>com/ubuntu jammy-security/restricted amd64 Packages <span class="token punctuation">[</span>1582 kB<span class="token punctuation">]</span>                       
Ign:3 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-backports InRelease                                          
Err:1 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy InRelease                                                                                                                                                                           
  Certificate verification failed: The certificate is NOT trusted<span class="token punctuation">.</span> The certificate issuer is unknown<span class="token punctuation">.</span>  Could not handshake: Error in the certificate verification<span class="token punctuation">.</span> <span class="token namespace">[IP: 101.6.15.130 443]</span>
Err:2 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-updates InRelease                                                                                                                                                                   
  Certificate verification failed: The certificate is NOT trusted<span class="token punctuation">.</span> The certificate issuer is unknown<span class="token punctuation">.</span>  Could not handshake: Error in the certificate verification<span class="token punctuation">.</span> <span class="token namespace">[IP: 101.6.15.130 443]</span>
Err:3 https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu jammy-backports InRelease                                                                                                                                                                 
  Certificate verification failed: The certificate is NOT trusted<span class="token punctuation">.</span> The certificate issuer is unknown<span class="token punctuation">.</span>  Could not handshake: Error in the certificate verification<span class="token punctuation">.</span> <span class="token namespace">[IP: 101.6.15.130 443]</span>
Fetched 4116 kB in 7s <span class="token punctuation">(</span>552 kB/s<span class="token punctuation">)</span>                                                                                                                                                                                                            
Reading package lists<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Building dependency tree<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Reading state information<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
All packages are up to date<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-updates/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-backports/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-updates/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-backports/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-updates/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-backports/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-updates/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-backports/InRelease: No system certificates available<span class="token punctuation">.</span> <span class="token keyword">Try</span> installing ca-certificates<span class="token punctuation">.</span>
W: Failed to fetch https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy/InRelease  Certificate verification failed: The certificate is NOT trusted<span class="token punctuation">.</span> The certificate issuer is unknown<span class="token punctuation">.</span>  Could not handshake: Error in the certificate verification<span class="token punctuation">.</span> <span class="token namespace">[IP: 101.6.15.130 443]</span>
W: Failed to fetch https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-updates/InRelease  Certificate verification failed: The certificate is NOT trusted<span class="token punctuation">.</span> The certificate issuer is unknown<span class="token punctuation">.</span>  Could not handshake: Error in the certificate verification<span class="token punctuation">.</span> <span class="token namespace">[IP: 101.6.15.130 443]</span>
W: Failed to fetch https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>tuna<span class="token punctuation">.</span>tsinghua<span class="token punctuation">.</span>edu<span class="token punctuation">.</span>cn/ubuntu/dists/jammy-backports/InRelease  Certificate verification failed: The certificate is NOT trusted<span class="token punctuation">.</span> The certificate issuer is unknown<span class="token punctuation">.</span>  Could not handshake: Error in the certificate verification<span class="token punctuation">.</span> <span class="token namespace">[IP: 101.6.15.130 443]</span>
W: Some index files failed to download<span class="token punctuation">.</span> They have been ignored<span class="token punctuation">,</span> or old ones used instead<span class="token punctuation">.</span>
</code></pre> 
<p>可见，更新是有问题的。</p> 
<p>安装vim：</p> 
<pre><code class="prism language-powershell">apt install vim
Reading package lists<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Building dependency tree<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Reading state information<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> Done
Some packages could not be installed<span class="token punctuation">.</span> This may mean that you have
requested an impossible situation or <span class="token keyword">if</span> you are <span class="token keyword">using</span> the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming<span class="token punctuation">.</span>
The following information may help to resolve the situation:

The following packages have unmet dependencies:
 vim : Depends: libgpm2 <span class="token punctuation">(</span>&gt;= 1<span class="token punctuation">.</span>20<span class="token punctuation">.</span>7<span class="token punctuation">)</span> but it is not installable
       Depends: libpython3<span class="token punctuation">.</span>10 <span class="token punctuation">(</span>&gt;= 3<span class="token punctuation">.</span>10<span class="token punctuation">.</span>0<span class="token punctuation">)</span> but it is not going to be installed
       Depends: libsodium23 <span class="token punctuation">(</span>&gt;= 1<span class="token punctuation">.</span>0<span class="token punctuation">.</span>14<span class="token punctuation">)</span> but it is not installable
E: Unable to correct problems<span class="token punctuation">,</span> you have held broken packages<span class="token punctuation">.</span>
</code></pre> 
<p>安装失败。</p> 
<p>首先要解决证书的问题，安装证书：</p> 
<pre><code class="prism language-powershell">apt install <span class="token operator">--</span>reinstall ca-certificates
</code></pre> 
<p>注意：在安装证书前，还是要先做一次 <code>apt update</code> ，否则找不到 <code>ca-certificates</code> 包。</p> 
<p>注：能够安装成功，因为连接的是 <code>http://security.ubuntu.com/ubuntu</code> ，是HTTP协议。但是，这还是连接了国外网站。如果连接不上，则需要改为从国内镜像网站下载安装证书（注意清华镜像站上有一个“强制安全更新使用镜像”选项，勾选之后，则使用清华镜像源），或者手工下载安装证书（没试过）。</p> 
<p>接下来，再次 <code>apt update</code> 和 <code>apt install vim</code> ，就能更新package列表和安装vim了。</p> 
<h2><a id="2_306"></a>方法2：使用阿里云镜像源</h2> 
<p>和使用清华镜像源的方法基本是一致的。</p> 
<p>打开浏览器，访问 <code>https://developer.aliyun.com/mirror/ubuntu</code> ：</p> 
<p><img src="https://images2.imgbox.com/d7/ed/sJX1GE3d_o.png" alt="在这里插入图片描述"></p> 
<p>找到对应的Ubuntu版本，其内容如下：</p> 
<pre><code class="prism language-powershell">deb https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy main restricted universe multiverse
deb-src https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy main restricted universe multiverse

deb https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy-security main restricted universe multiverse
deb-src https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy-security main restricted universe multiverse

deb https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy-updates main restricted universe multiverse
deb-src https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy-updates main restricted universe multiverse

<span class="token comment"># deb https://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span>
<span class="token comment"># deb-src https://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse</span>

deb https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy-backports main restricted universe multiverse
deb-src https:<span class="token operator">/</span><span class="token operator">/</span>mirrors<span class="token punctuation">.</span>aliyun<span class="token punctuation">.</span>com/ubuntu/ jammy-backports main restricted universe multiverse
</code></pre> 
<p>注意：这里有同样的HTTPS证书问题，同样也有两种解决方法：</p> 
<ul><li>把所有的 <code>https</code> 改成 <code>http</code></li><li>在包含 <code>security</code> 的部分里，把 <code>https</code> 改为 <code>http</code> ，然后先安装证书，再更新package列表和安装软件</li></ul> 
<p>步骤和使用清华镜像源是一样的：在容器里备份 <code>/etc/apt/sources.list</code> 文件，在宿主机上创建好新文件，然后把文件复制到容器里，最后修改文件权限。</p> 
<p>接下来，如果是使用HTTP就直接 <code>apt update</code> ，如果是使用HTTPS就需要先 <code>apt update</code> ，再 <code>apt install --reinstall ca-certificates</code> 安装证书，然后再 <code>apt update</code> 。</p> 
<p>最后，运行 <code>apt install vim</code> ，安装vim。</p> 
<h2><a id="_342"></a>总结</h2> 
<p>步骤如下：</p> 
<ol><li>找到Ubuntu镜像源网站</li><li>找到Ubuntu版本所对应的配置镜像源的内容</li><li>修改Ubuntu系统里的 <code>/etc/apt/sources.list</code> 文件</li><li><code>apt update</code> 
  <ol><li>如果是使用HTTP ，则直接更新</li><li>如果是使用HTTS，则要先更新一次（security用HTTP方式），再安装证书，然后再更新一次</li></ol> </li><li>至此，配置镜像源完成，就可以安装软件了。</li></ol> 
<h2><a id="_352"></a>参考</h2> 
<ul><li><code>https://mirror.tuna.tsinghua.edu.cn/help/ubuntu</code></li><li><code>https://developer.aliyun.com/mirror/ubuntu</code></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/21988bf32ac4abfb9279abc383d4c7a3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">R2机器人加载棋盘与棋子模型，对urdf、sdf的解释(区分srdf)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4ab37066d2c718501053e5276a292416/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">第十九章 调用Callout Library函数 - 将 $ZF(-5) 与多个库和许多函数调用一起使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>