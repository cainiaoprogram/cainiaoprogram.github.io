<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Idea SpringMVC&#43;Spring&#43;MyBatis&#43;Maven整合 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Idea SpringMVC&#43;Spring&#43;MyBatis&#43;Maven整合" />
<meta property="og:description" content="创建项目 File-New Project
选中左侧的Maven，选中右侧上方的Create from archetype，然后选中下方列表中的webapp，然后点击Next
在GroupId和ArtifactId中填入指定内容，点击Next
直接点Next
输入项目名称，Finish
Idea会自动开始下载所依赖的包，等待其完成。
项目结构 项目刚建好的时候是没有这些文件的，所以自己手动创建缺少的文件夹（包）
创建完后的项目框架：
修改pom.xml导入依赖包插件 依赖包需要如下：
spring framework
aspectj事务
c3p0数据源
servlet/jsp api
junit4
mybatis
mybatis spring整合
mysql driver
jstl
&lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;groupId&gt;com.elin4it.ssm&lt;/groupId&gt; &lt;artifactId&gt;ssm&lt;/artifactId&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;name&gt;ssm Maven Webapp&lt;/name&gt; &lt;url&gt;http://maven.apache.org&lt;/url&gt; &lt;build&gt; &lt;finalName&gt;ssm&lt;/finalName&gt; &lt;plugins&gt; &lt;!--mybatis 逆向工程插件--&gt; &lt;plugin&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt; &lt;version&gt;1.3.2&lt;/version&gt; &lt;configuration&gt; &lt;verbose&gt;true&lt;/verbose&gt; &lt;overwrite&gt;true&lt;/overwrite&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/build&gt; &lt;properties&gt; &lt;spring.version&gt;4.1.1.RELEASE&lt;/spring.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!-- springframe start --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-core&lt;/artifactId&gt; &lt;version&gt;${spring." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/38cebe730599a833e5dea9d99dd3b5d8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-07-11T17:33:03+08:00" />
<meta property="article:modified_time" content="2015-07-11T17:33:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Idea SpringMVC&#43;Spring&#43;MyBatis&#43;Maven整合</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><br> 创建项目</h2> 
<p>File-New Project</p> 
<p>选中左侧的Maven，选中右侧上方的Create from archetype，然后选中下方列表中的webapp，然后点击Next<br> </p> 
<p><img src="https://images2.imgbox.com/47/28/dNNpBkxx_o.png" alt=""><br> </p> 
<p><br> </p> 
<p>在GroupId和ArtifactId中填入指定内容，点击Next</p> 
<p><img src="https://images2.imgbox.com/5c/b3/KriZBtGV_o.png" alt=""></p> 
<p>直接点Next<br> </p> 
<p><img src="https://images2.imgbox.com/e4/be/NZgAm2xs_o.png" alt=""><br> </p> 
<p><br> </p> 
<p>输入项目名称，Finish</p> 
<p><img src="https://images2.imgbox.com/66/5d/VUWxpX4M_o.png" alt=""></p> 
<p><br> </p> 
<p>Idea会自动开始下载所依赖的包，等待其完成。</p> 
<p><br> </p> 
<h2>项目结构</h2> 
<p><img src="https://images2.imgbox.com/a1/84/sU99sMhN_o.png" alt=""><br> </p> 
<p><br> </p> 
<p>项目刚建好的时候是没有这些文件的，所以自己手动创建缺少的文件夹（包）<br> </p> 
<p>创建完后的项目框架：</p> 
<p><img src="https://images2.imgbox.com/cd/7a/6utM0zAV_o.png" alt=""></p> 
<p><br> </p> 
<h2>修改pom.xml导入依赖包插件</h2> 
<p>依赖包需要如下：</p> 
<p>spring framework<br> aspectj事务<br> c3p0数据源<br> servlet/jsp api<br> junit4<br> mybatis<br> mybatis spring整合<br> mysql driver</p> 
<p>jstl</p> 
<p><br> </p> 
<pre><code class="language-html">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.elin4it.ssm&lt;/groupId&gt;
    &lt;artifactId&gt;ssm&lt;/artifactId&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;ssm Maven Webapp&lt;/name&gt;
    &lt;url&gt;http://maven.apache.org&lt;/url&gt;
    &lt;build&gt;
        &lt;finalName&gt;ssm&lt;/finalName&gt;
        &lt;plugins&gt;
            &lt;!--mybatis 逆向工程插件--&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
                &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.3.2&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;verbose&gt;true&lt;/verbose&gt;
                    &lt;overwrite&gt;true&lt;/overwrite&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
    &lt;properties&gt;
        &lt;spring.version&gt;4.1.1.RELEASE&lt;/spring.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;!-- springframe start --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-oxm&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-test&lt;/artifactId&gt;
            &lt;version&gt;${spring.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!-- springframe end --&gt;

        &lt;!--aspectj start--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
            &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
            &lt;version&gt;1.8.6&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
            &lt;artifactId&gt;aspectjrt&lt;/artifactId&gt;
            &lt;version&gt;1.8.6&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!--aspectj end--&gt;

        &lt;!--c3p0--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.mchange&lt;/groupId&gt;
            &lt;artifactId&gt;c3p0&lt;/artifactId&gt;
            &lt;version&gt;0.9.5.1&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!--servlet/jsp api start--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
            &lt;version&gt;2.5&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;
            &lt;version&gt;2.1&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;!--servlet/jsp api end--&gt;

        &lt;!--junit4--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;junit&lt;/groupId&gt;
            &lt;artifactId&gt;junit&lt;/artifactId&gt;
            &lt;version&gt;4.11&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!--mybatis--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;version&gt;3.3.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!--mybatis spring整合--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
            &lt;version&gt;1.2.3&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!--mysql driver--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;5.1.6&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!--jstl--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;jstl&lt;/groupId&gt;
            &lt;artifactId&gt;jstl&lt;/artifactId&gt;
            &lt;version&gt;1.2&lt;/version&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre> 
<br> 
<p></p> 
<p><br> </p> 
<p>插件需要用到mybatis的逆向工程<br> </p> 
<p><br> </p> 
<p>完整的pom.xml代码清单：<br> </p> 
<br> 
<p></p> 
<h2>使用mybatis逆向工程创建mapper接口和xml文件</h2> 
<p>user表结构</p> 
<p></p> 
<pre><code class="language-sql">DROP TABLE IF EXISTS `user`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!40101 SET character_set_client = utf8 */;
CREATE TABLE `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(32) NOT NULL COMMENT '用户名称',
  `birthday` date DEFAULT NULL COMMENT '生日',
  `sex` char(1) DEFAULT NULL COMMENT '性别',
  `address` varchar(256) DEFAULT NULL COMMENT '地址',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=27 DEFAULT CHARSET=utf8;</code></pre> 
<br> 在main/resources中创建generatorConfig.xml文件 
<p></p> 
<p>generatorConfig.xml代码清单</p> 
<p></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE generatorConfiguration
        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"
        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;

&lt;generatorConfiguration&gt;
    &lt;classPathEntry location="F:\jar\mysql\mysql-connector-java-5.1.7-bin.jar"/&gt;
    &lt;context id="testTables" targetRuntime="MyBatis3" &gt;
        &lt;commentGenerator&gt;
            &lt;!-- 是否去除自动生成的注释 true：是 ： false:否 --&gt;
            &lt;property name="suppressAllComments" value="true" /&gt;
        &lt;/commentGenerator&gt;
        &lt;!--数据库连接的信息：驱动类、连接地址、用户名、密码 --&gt;
        &lt;!--&lt;jdbcConnection driverClass="${jdbc.driver}"--&gt;
                        &lt;!--connectionURL="${jdbc.url}"--&gt;
                        &lt;!--userId="${jdbc.username}"--&gt;
                        &lt;!--password="${jdbc.password}"&gt;--&gt;
        &lt;!--&lt;/jdbcConnection&gt;--&gt;
        &lt;jdbcConnection driverClass="com.mysql.jdbc.Driver"
            connectionURL="jdbc:mysql://127.0.0.1:3306/mybatis?characterEncoding=UTF-8"
            userId="root"
            password=""&gt;
        &lt;/jdbcConnection&gt;

        &lt;!-- 默认false，把JDBC DECIMAL 和 NUMERIC 类型解析为 Integer，为 true时把JDBC DECIMAL 和
            NUMERIC 类型解析为java.math.BigDecimal --&gt;
        &lt;javaTypeResolver&gt;
            &lt;property name="forceBigDecimals" value="false" /&gt;
        &lt;/javaTypeResolver&gt;

        &lt;!-- targetProject:生成PO类的位置 --&gt;
        &lt;javaModelGenerator targetPackage="com.elin4it.ssm.pojo"
                            targetProject="src\main\java"&gt;
            &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;
            &lt;property name="enableSubPackages" value="false" /&gt;
            &lt;!-- 从数据库返回的值被清理前后的空格 --&gt;
            &lt;property name="trimStrings" value="true" /&gt;
        &lt;/javaModelGenerator&gt;
        &lt;!-- targetProject:mapper映射文件生成的位置 --&gt;
        &lt;sqlMapGenerator targetPackage="com.elin4it.ssm.mapper"
                         targetProject="src\main\resources"&gt;
            &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;
            &lt;property name="enableSubPackages" value="false" /&gt;
        &lt;/sqlMapGenerator&gt;
        &lt;!-- targetPackage：mapper接口生成的位置 --&gt;
        &lt;javaClientGenerator type="XMLMAPPER"
                             targetPackage="com.elin4it.ssm.mapper"
                             targetProject="src\main\java"&gt;
            &lt;!-- enableSubPackages:是否让schema作为包的后缀 --&gt;
            &lt;property name="enableSubPackages" value="false" /&gt;
        &lt;/javaClientGenerator&gt;
        &lt;!-- 指定数据库表 --&gt;
        &lt;table tableName="user"&gt;&lt;/table&gt;

        &lt;!-- 有些表的字段需要指定java类型
         &lt;table schema="" tableName=""&gt;
            &lt;columnOverride column="" javaType="" /&gt;
        &lt;/table&gt; --&gt;
    &lt;/context&gt;
&lt;/generatorConfiguration&gt;
</code></pre> 
<br> 点击idea右侧的maven选项卡，选择其中的mybatis-generator，点击顶部的绿色按钮运行 
<p></p> 
<p><img src="https://images2.imgbox.com/67/15/JkvUoVil_o.png" alt=""></p> 
<p><br> </p> 
<p>如果没有出错的话，应该会自动生成mapper接口文件、xml文件、pojo文件。</p> 
<p><img src="https://images2.imgbox.com/10/30/CiulhxyO_o.png" alt=""></p> 
<p><br> </p> 
<h2>db.properties文件</h2> 
<p>在resources/config中创建db.properties，该文件用来描述mysql连接信息</p> 
<p></p> 
<pre><code class="language-plain">jdbc.driver = com.mysql.jdbc.Driver
jdbc.url = jdbc:mysql://127.0.0.1:3306/mybatis?characterEncoding=UTF-8
jdbc.username = root
jdbc.password =</code></pre> 
<br> 
<p></p> 
<h2>SqlMapConfig文件</h2> 
<p>在resources/config/mybatis中创建SqlMapConfig.xml文件，该文件为Mybatis的配置文件，由于跟spring整合，所以一些基础配置文件都在spring中，在这里该文件中值需要写文件的框架</p> 
<p></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;

&lt;configuration&gt;

&lt;/configuration&gt;</code></pre> 
<br> 
<br> 
<p></p> 
<h2>SpringMVC配置文件</h2> 
<p>在resources/config/spring中创建springmvc.xml文件</p> 
<p></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"&gt;

       &lt;!--自动扫描控制器--&gt;
       &lt;context:component-scan base-package="com.elin4it.ssm.controller"/&gt;
       &lt;!--视图渲染--&gt;
       &lt;bean id="internalResourceViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
              &lt;property name="prefix" value="/WEB-INF/views/"/&gt;
              &lt;property name="suffix" value=".jsp"/&gt;
       &lt;/bean&gt;
       &lt;!--控制器映射器和控制器适配器--&gt;
       &lt;mvc:annotation-driven&gt;&lt;/mvc:annotation-driven&gt;
&lt;/beans&gt;</code></pre> 
<br> 
<p></p> 
<h2>Spring IOC注入和事件控制<br> </h2> 
<p>在resources/config/spring中创建applicationContext-dao.xml、application-service.xml、applicationContext-transaction.xml文件</p> 
<p><br> </p> 
<p>applicationContext-dao.xml</p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt;


       &lt;!--获取数据库配置文件--&gt;
       &lt;context:property-placeholder location="classpath:config/db.properties"/&gt;


       &lt;!--设置数据源c3p0--&gt;
       &lt;bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close"&gt;
              &lt;property name="driverClass" value="${jdbc.driver}"/&gt;
              &lt;property name="jdbcUrl" value="${jdbc.url}"/&gt;
              &lt;property name="user" value="${jdbc.username}"/&gt;
              &lt;property name="password" value="${jdbc.password}"/&gt;
              &lt;property name="maxPoolSize" value="50"/&gt;
              &lt;property name="minPoolSize" value="2"/&gt;
              &lt;property name="maxIdleTime" value="60"/&gt;
       &lt;/bean&gt;

       &lt;!--sqlsessionFactory bean--&gt;
       &lt;bean id="sqlSession" class="org.mybatis.spring.SqlSessionFactoryBean"&gt;
              &lt;property name="configLocation" value="classpath:config/mybatis/SqlMapConfig.xml"/&gt;
              &lt;property name="dataSource" ref="dataSource"/&gt;
       &lt;/bean&gt;

       &lt;!--自动扫描mapper接口，并注入sqlsession--&gt;
       &lt;bean class="org.mybatis.spring.mapper.MapperScannerConfigurer"&gt;
              &lt;property name="basePackage" value="com.elin4it.ssm.mapper"/&gt;
              &lt;property name="sqlSessionFactoryBeanName" value="sqlSession"/&gt;
       &lt;/bean&gt;

&lt;/beans&gt;
</code></pre> 
<br> 
<br> 
<p>application-service.xml</p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"&gt;
       
       &lt;!--扫描service--&gt;
       &lt;context:component-scan base-package="com.elin4it.ssm.service"/&gt;
&lt;/beans&gt;</code></pre> 
<br> 
<p></p> 
<p>applicationContext-transaction.xml</p> 
<p></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd"&gt;


       &lt;bean id="dataSourceTransactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager"&gt;
              &lt;property name="dataSource" ref="dataSource"/&gt;
       &lt;/bean&gt;

       &lt;tx:advice id="txAdvice" transaction-manager="dataSourceTransactionManager"&gt;
              &lt;tx:attributes&gt;
                     &lt;tx:method name="find*" propagation="REQUIRED"/&gt;
                     &lt;tx:method name="update*" propagation="REQUIRED"/&gt;
                     &lt;tx:method name="delete*" propagation="REQUIRED"/&gt;
                     &lt;tx:method name="add*" propagation="REQUIRED"/&gt;
              &lt;/tx:attributes&gt;
       &lt;/tx:advice&gt;

       &lt;aop:config&gt;
              &lt;aop:advisor advice-ref="txAdvice" pointcut="execution(* cn.elinzhou.ixxs.service.*.*(..))"/&gt;
       &lt;/aop:config&gt;
&lt;/beans&gt;</code></pre> 
<br> 
<p></p> 
<h2>web.xml文件</h2> 
<p>修改web.xml文件内容</p> 
<p></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
         version="3.1"&gt;

    &lt;!--设置spring 配置文件的位置--&gt;
    &lt;context-param&gt;
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
        &lt;param-value&gt;classpath*:config/spring/applicationContext-*.xml&lt;/param-value&gt;

    &lt;/context-param&gt;
    &lt;!--配置spring listener--&gt;
    &lt;listener&gt;
        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;
    &lt;/listener&gt;


    &lt;!--解决POST乱码问题--&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;encoding&lt;/param-name&gt;
            &lt;param-value&gt;utf-8&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;CharacterEncodingFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    &lt;!--springmvc前端控制器配置--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
            &lt;param-value&gt;classpath*:config/spring/springmvc.xml&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</code></pre> 
<br> 
<p></p> 
<h2>Service接口与实现</h2> 
<p>创建一个简单的service，只有一个查看所有用户列表的功能</p> 
<p>UserService.java</p> 
<p></p> 
<pre><code class="language-java">package com.elin4it.ssm.service;

import com.elin4it.ssm.pojo.User;

import java.util.List;

/**
 * Created by 烽 on 2015/7/11.
 */
public interface UserService {

    /**
     * 查找所有用户
     * @return
     * @throws Exception
     */
    List&lt;User&gt; findUser()throws Exception;
}
</code></pre> 
<br> 
<p></p> 
<p>实现类UserServiceImpl.java</p> 
<p></p> 
<pre><code class="language-java">package com.elin4it.ssm.service;

import com.elin4it.ssm.mapper.UserMapper;
import com.elin4it.ssm.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

/**
 * Created by 烽 on 2015/7/11.
 */
@Service
public class UserServiceImpl implements UserService {

    //User接口
    @Autowired
    private UserMapper userMapper;

    public List&lt;User&gt; findUser() throws Exception {
        //调用mapper类中的selectByExample方法，如果传入类型为null，则表示无条件查找
        List&lt;User&gt; users = userMapper.selectByExample(null);

        return users;
    }
}
</code></pre> 
<p></p> 
<h2>Controller</h2> 
<p></p> 
<pre><code class="language-java">package com.elin4it.ssm.controller;

import com.elin4it.ssm.pojo.User;
import com.elin4it.ssm.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

import java.util.List;

/**
 * Created by 烽 on 2015/7/11.
 */
@Controller
@RequestMapping("/user")
public class UserController {

    //service类
    @Autowired
    private UserService userService;

    /**
     * 查找所用用户控制器方法
     * @return
     * @throws Exception
     */
    @RequestMapping("/findUser")
    public ModelAndView findUser()throws Exception{
        ModelAndView modelAndView = new ModelAndView();

        //调用service方法得到用户列表
        List&lt;User&gt; users = userService.findUser();
        //将得到的用户列表内容添加到ModelAndView中
        modelAndView.addObject("users",users);
        //设置响应的jsp视图
        modelAndView.setViewName("findUser");

        return modelAndView;
    }
}
</code></pre> 
<br> 
<p></p> 
<h2>视图</h2> 
<p>根据之前写的controller，返回的视图为findUser，所以在/WEB-INF/views中创建findUser.jsp文件，用来显示查询出来的结果</p> 
<p></p> 
<pre><code class="language-html">&lt;%--
  Created by IntelliJ IDEA.
  User: 烽
  Date: 2015/7/11
  Time: 19:47
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;findUser&lt;/h1&gt;
&lt;table&gt;
  &lt;c:forEach items="${users}" var="u"&gt;
    &lt;tr&gt;
      &lt;td&gt;${u.id}&lt;/td&gt;
      &lt;td&gt;${u.username}&lt;/td&gt;
      &lt;td&gt;${u.birthday}&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/c:forEach&gt;

&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<br> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5cac327273469b99400dcfbfb0db8c19/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">检测手机屏幕的旋转</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1e7271f4443540019a593f5c7191e5b8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何把默认壁纸改为动态壁纸</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>