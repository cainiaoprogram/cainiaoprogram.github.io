<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hutool工具包的简介与基础使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hutool工具包的简介与基础使用" />
<meta property="og:description" content="之前一直听说HuTool工具包的神奇与强大，最近才发现确实是一个大而全的宝藏工具，简单记录下供大家分享与参考使用
简介 Hutool是一个小而全的Java工具类库，通过静态方法封装，降低相关API的学习成本，提高工作效率，使Java拥有函数式语言般的优雅；Hutool是项目中“util”包友好的替代，它节省了开发人员对项目中公用类和公用工具方法的封装时间，使开发专注于业务，同时可以最大限度的避免封装不完善带来的bug。 HuTool名字的由来 ​ Hutool = Hu &#43; tool，是原公司项目底层代码剥离后的开源库，“Hu”是公司名称的表示，tool表示工具。Hutool谐音“糊涂”，一方面简洁易懂，一方面寓意“难得糊涂”。
HuTool如何改变我的Coding方式 以计算MD5为例：
​ 【以前】打开搜索引擎 -&gt; 搜“Java MD5加密” -&gt; 打开某篇博客-&gt; 复制粘贴 -&gt; 改改好用
​ 【现在】引入Hutool -&gt; SecureUtil.md5()
只有懂得才懂，哈哈，代码真的是真正需要CV的时候才知道收藏的代码方恨少啊，只能这里那里复制粘贴下，这也正是CV工程师的魅力所在吧！
包含组件 一个Java基础工具类，对文件、流、加密解密、转码、正则、线程、XML等JDK方法进行封装，组成各种Util工具类，同时提供以下组件：
模块介绍hutool-aopJDK动态代理封装，提供非IOC下的切面支持hutool-bloomFilter布隆过滤，提供一些Hash算法的布隆过滤hutool-cache简单缓存实现hutool-core核心，包括Bean操作、日期、各种Util等hutool-cron定时任务模块，提供类Crontab表达式的定时任务hutool-crypto加密解密模块，提供对称、非对称和摘要算法封装hutool-dbJDBC封装后的数据操作，基于ActiveRecord思想hutool-dfa基于DFA模型的多关键字查找hutool-extra扩展模块，对第三方封装（模板引擎、邮件、Servlet、二维码、Emoji、FTP、分词等）hutool-http基于HttpUrlConnection的Http客户端封装hutool-log自动识别日志实现的日志门面hutool-script脚本执行封装，例如Javascripthutool-setting功能更强大的Setting配置文件和Properties封装hutool-system系统参数调用封装（JVM信息等）hutool-jsonJSON实现hutool-captcha图片验证码实现hutool-poi针对POI中Excel和Word的封装hutool-socket基于Java的NIO和AIO的Socket封装hutool-jwtJSON Web Token (JWT)封装实现 （可以根据需求对每个模块单独引入，也可以通过引入hutool-all方式引入所有模块）
安装（这里只简单介绍maven） 在项目的pom.xml的dependencies中加入以下内容:
&lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;5.8.16&lt;/version&gt; &lt;/dependency&gt; BOM(Hutool-bom) 起初Hutool只提供了两种引入方式：
引入hutool-all以便使用所有工具类功能引入hutool-xxx单独模块使用 ​ 整个bom模块只由一个pom.xml组成，同时提供了dependencyManagement和dependencies两种声明。于是我们就可以针对不同需要完成引入。
使用 import方式 如果你想像Spring-Boot一样引入Hutool，再由子模块决定用到哪些模块，你可以在父模块中加入：
&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-bom&lt;/artifactId&gt; &lt;version&gt;${hutool.version}&lt;/version&gt; &lt;type&gt;pom&lt;/type&gt; &lt;!-- 注意这里是import --&gt; &lt;scope&gt;import&lt;/scope&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt; 在子模块中就可以引入自己需要的模块了：
&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-http&lt;/artifactId&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 使用import的方式，只会引入hutool-bom内的dependencyManagement的配置，其它配置在这个引用方式下完全不起作用。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d0bcd303332608d46c75c46b8e37fd45/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-24T16:12:47+08:00" />
<meta property="article:modified_time" content="2023-07-24T16:12:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hutool工具包的简介与基础使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>之前一直听说HuTool工具包的神奇与强大，最近才发现确实是一个大而全的宝藏工具，简单记录下供大家分享与参考使用</p> 
<h4><a id="_2"></a>简介</h4> 
<pre><code>	Hutool是一个小而全的Java工具类库，通过静态方法封装，降低相关API的学习成本，提高工作效率，使Java拥有函数式语言般的优雅；Hutool是项目中“util”包友好的替代，它节省了开发人员对项目中公用类和公用工具方法的封装时间，使开发专注于业务，同时可以最大限度的避免封装不完善带来的bug。 
</code></pre> 
<h4><a id="HuTool_6"></a>HuTool名字的由来</h4> 
<p>​ Hutool = Hu + tool，是原公司项目底层代码剥离后的开源库，“Hu”是公司名称的表示，tool表示工具。Hutool谐音“糊涂”，一方面简洁易懂，一方面寓意“难得糊涂”。</p> 
<h4><a id="HuToolCoding_10"></a>HuTool如何改变我的Coding方式</h4> 
<p>以计算MD5为例：</p> 
<p>​ 【以前】打开搜索引擎 -&gt; 搜“Java MD5加密” -&gt; 打开某篇博客-&gt; 复制粘贴 -&gt; 改改好用</p> 
<p>​ 【现在】引入Hutool -&gt; SecureUtil.md5()</p> 
<p>只有懂得才懂，哈哈，代码真的是真正需要CV的时候才知道收藏的代码方恨少啊，只能这里那里复制粘贴下，这也正是CV工程师的魅力所在吧！</p> 
<h4><a id="_20"></a>包含组件</h4> 
<p>一个Java基础工具类，对文件、流、加密解密、转码、正则、线程、XML等JDK方法进行封装，组成各种Util工具类，同时提供以下组件：</p> 
<table><thead><tr><th>模块</th><th>介绍</th></tr></thead><tbody><tr><td>hutool-aop</td><td>JDK动态代理封装，提供非IOC下的切面支持</td></tr><tr><td>hutool-bloomFilter</td><td>布隆过滤，提供一些Hash算法的布隆过滤</td></tr><tr><td>hutool-cache</td><td>简单缓存实现</td></tr><tr><td>hutool-core</td><td>核心，包括Bean操作、日期、各种Util等</td></tr><tr><td>hutool-cron</td><td>定时任务模块，提供类Crontab表达式的定时任务</td></tr><tr><td>hutool-crypto</td><td>加密解密模块，提供对称、非对称和摘要算法封装</td></tr><tr><td>hutool-db</td><td>JDBC封装后的数据操作，基于ActiveRecord思想</td></tr><tr><td>hutool-dfa</td><td>基于DFA模型的多关键字查找</td></tr><tr><td>hutool-extra</td><td>扩展模块，对第三方封装（模板引擎、邮件、Servlet、二维码、Emoji、FTP、分词等）</td></tr><tr><td>hutool-http</td><td>基于HttpUrlConnection的Http客户端封装</td></tr><tr><td>hutool-log</td><td>自动识别日志实现的日志门面</td></tr><tr><td>hutool-script</td><td>脚本执行封装，例如Javascript</td></tr><tr><td>hutool-setting</td><td>功能更强大的Setting配置文件和Properties封装</td></tr><tr><td>hutool-system</td><td>系统参数调用封装（JVM信息等）</td></tr><tr><td>hutool-json</td><td>JSON实现</td></tr><tr><td>hutool-captcha</td><td>图片验证码实现</td></tr><tr><td>hutool-poi</td><td>针对POI中Excel和Word的封装</td></tr><tr><td>hutool-socket</td><td>基于Java的NIO和AIO的Socket封装</td></tr><tr><td>hutool-jwt</td><td>JSON Web Token (JWT)封装实现</td></tr></tbody></table> 
<p>（可以根据需求对每个模块单独引入，也可以通过引入<code>hutool-all</code>方式引入所有模块）</p> 
<h4><a id="maven_48"></a>安装（这里只简单介绍maven）</h4> 
<p>在项目的pom.xml的dependencies中加入以下内容:</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.8.16<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="BOMHutoolbom_60"></a>BOM(Hutool-bom)</h4> 
<p>起初Hutool只提供了两种引入方式：</p> 
<ol><li>引入<code>hutool-all</code>以便使用所有工具类功能</li><li>引入<code>hutool-xxx</code>单独模块使用</li></ol> 
<p>​ 整个bom模块只由一个pom.xml组成，同时提供了<code>dependencyManagement</code>和<code>dependencies</code>两种声明。于是我们就可以针对不同需要完成引入。</p> 
<h5><a id="_71"></a>使用</h5> 
<h6><a id="import_73"></a>import方式</h6> 
<p>如果你想像Spring-Boot一样引入Hutool，再由子模块决定用到哪些模块，你可以在父模块中加入：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-bom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${hutool.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 注意这里是import --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>import<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencyManagement</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在子模块中就可以引入自己需要的模块了：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-http<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>使用import的方式，只会引入hutool-bom内的dependencyManagement的配置，其它配置在这个引用方式下完全不起作用。</p> 
<h6><a id="exclude_105"></a>exclude方式</h6> 
<p>如果你引入的模块比较多，但是某几个模块没用，你可以：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-bom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${hutool.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 加不加这句都能跑，区别只有是否告警  --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>type</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>type</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-system<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<blockquote> 
 <p>这个配置会传递依赖hutool-bom内所有dependencies的内容，当前hutool-bom内的dependencies全部设置了version，就意味着在maven resolve的时候hutool-bom内就算存在dependencyManagement也不会产生任何作用。</p> 
</blockquote> 
<h4><a id="Hutoolcore_129"></a>核心（Hutool-core）</h4> 
<h5><a id="_131"></a>支持泛型的克隆接口和克隆类</h5> 
<pre><code>	我们知道，JDK中的Cloneable接口只是一个空接口，并没有定义成员，它存在的意义仅仅是指明一个类的实例化对象支持位复制（就是对象克隆），如果不实现这个类，调用对象的clone()方法就会抛出CloneNotSupportedException异常。而且，因为clone()方法在Object对象中，返回值也是Object对象，因此克隆后我们需要自己强转下类型。 
</code></pre> 
<p>​ 因此，<strong>cn.hutool.core.clone.Cloneable</strong>接口应运而生。此接口定义了一个返回泛型的成员方法，这样，实现此接口后会提示必须实现一个public的clone方法，调用父类clone方法即可：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 猫猫类，使用实现Cloneable方式
 */</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Cat</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"miaomiao"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Cat</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Cat</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">CloneNotSupportedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CloneRuntimeException</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_156"></a>泛型克隆类</h5> 
<p>但是实现此接口依旧有不方便之处，就是必须自己实现一个public类型的clone()方法，还要调用父类（Object）的clone方法并处理异常。于是<strong>cn.hutool.clone.CloneSupport</strong>类产生，这个类帮我们实现了上面的clone方法，因此只要继承此类，不用写任何代码即可使用clone()方法：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 狗狗类，用于继承CloneSupport类
 *
 */</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">CloneSupport</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Dog</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">"wangwang"</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> age <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>当然，使用<strong>CloneSupport</strong>的前提是你没有继承任何的类。 如果没办法继承类，那实现<strong>cn.hutool.clone.Cloneable**也是不错的主意，因此</strong>hutool**提供了这两种方式，任选其一，在便捷和灵活上都提供了支持。</p> 
<h5><a id="_173"></a>深克隆</h5> 
<p>我们知道实现Cloneable接口后克隆的对象是浅克隆，要想实现深克隆，请使用：</p> 
<pre><code class="prism language-java"><span class="token class-name">ObjectUtil</span><span class="token punctuation">.</span><span class="token function">cloneByStream</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre> 
<p>前提是对象必须实现Serializable接口。</p> 
<h5><a id="Convert_183"></a>类型转换工具类-Convert</h5> 
<h5><a id="Convert_185"></a>Convert类</h5> 
<h5><a id="Java_187"></a>Java常见类型转换</h5> 
<ol><li>转换为字符串：</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">//aStr为"1"</span>
<span class="token class-name">String</span> aStr <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toStr</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//bStr为："[1, 2, 3, 4, 5]"</span>
<span class="token class-name">String</span> bStr <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toStr</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>2.转换为指定类型数组：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"1"</span><span class="token punctuation">,</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token string">"3"</span><span class="token punctuation">,</span> <span class="token string">"4"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//结果为Integer数组</span>
<span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intArray <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toIntArray</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">long</span><span class="token punctuation">[</span><span class="token punctuation">]</span> c <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//结果为Integer数组</span>
<span class="token class-name">Integer</span><span class="token punctuation">[</span><span class="token punctuation">]</span> intArray2 <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toIntArray</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>转换为日期对象：</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"2017-05-06"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> value <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="4"><li>转换为集合</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> a <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"你"</span><span class="token punctuation">,</span> <span class="token string">"好"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//从4.1.11开始可以这么用</span>
<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toList</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_229"></a>其它类型转换</h5> 
<h6><a id="_231"></a>半角和全角转换</h6> 
<p>半角转全角：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"123456789"</span><span class="token punctuation">;</span>

<span class="token comment">//结果为："１２３４５６７８９"</span>
<span class="token class-name">String</span> sbc <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toSBC</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>全角转半角：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"１２３４５６７８９"</span><span class="token punctuation">;</span>

<span class="token comment">//结果为"123456789"</span>
<span class="token class-name">String</span> dbc <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toDBC</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="16_251"></a>16进制</h6> 
<p>转为16进制（Hex）字符串 :</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"我是一个小小的可爱的字符串"</span><span class="token punctuation">;</span>

<span class="token comment">//结果："e68891e698afe4b880e4b8aae5b08fe5b08fe79a84e58fafe788b1e79a84e5ad97e7aca6e4b8b2"</span>
<span class="token class-name">String</span> hex <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">toHex</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token class-name">CharsetUtil</span><span class="token punctuation">.</span><span class="token constant">CHARSET_UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>将16进制（Hex）字符串转为普通字符串:</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> hex <span class="token operator">=</span> <span class="token string">"e68891e698afe4b880e4b8aae5b08fe5b08fe79a84e58fafe788b1e79a84e5ad97e7aca6e4b8b2"</span><span class="token punctuation">;</span>

<span class="token comment">//结果为："我是一个小小的可爱的字符串"</span>
<span class="token class-name">String</span> raw <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">hexStrToStr</span><span class="token punctuation">(</span>hex<span class="token punctuation">,</span> <span class="token class-name">CharsetUtil</span><span class="token punctuation">.</span><span class="token constant">CHARSET_UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//注意：在4.1.11之后hexStrToStr将改名为hexToStr</span>
<span class="token class-name">String</span> raw <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">hexToStr</span><span class="token punctuation">(</span>hex<span class="token punctuation">,</span> <span class="token class-name">CharsetUtil</span><span class="token punctuation">.</span><span class="token constant">CHARSET_UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>因为字符串牵涉到编码问题，因此必须传入编码对象，此处使用UTF-8编码。 <strong>toHex</strong>方法同样支持传入byte[]，同样也可以使用<strong>hexToBytes</strong>方法将16进制转为byte[]</p> 
<h6><a id="Unicode_276"></a>Unicode和字符串转换</h6> 
<p>与16进制类似，Convert类同样可以在字符串和Unicode之间轻松转换：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"我是一个小小的可爱的字符串"</span><span class="token punctuation">;</span>

<span class="token comment">//结果为："\\u6211\\u662f\\u4e00\\u4e2a\\u5c0f\\u5c0f\\u7684\\u53ef\\u7231\\u7684\\u5b57\\u7b26\\u4e32"    </span>
<span class="token class-name">String</span> unicode <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">strToUnicode</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//结果为："我是一个小小的可爱的字符串"</span>
<span class="token class-name">String</span> raw <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">unicodeToStr</span><span class="token punctuation">(</span>unicode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_290"></a>编码转换</h6> 
<pre><code class="prism language-java"><span class="token class-name">String</span> a <span class="token operator">=</span> <span class="token string">"我不是乱码"</span><span class="token punctuation">;</span>
<span class="token comment">//转换后result为乱码</span>
<span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">convertCharset</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token class-name">CharsetUtil</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">,</span> <span class="token class-name">CharsetUtil</span><span class="token punctuation">.</span><span class="token constant">ISO_8859_1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> raw <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">convertCharset</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token class-name">CharsetUtil</span><span class="token punctuation">.</span><span class="token constant">ISO_8859_1</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>raw<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意 经过测试，UTF-8编码后用GBK解码再用GBK编码后用UTF-8解码会存在某些中文转换失败的问题。</p> 
<h6><a id="_302"></a>时间单位转换</h6> 
<p><code>Convert.convertTime</code>方法主要用于转换时长单位，比如一个很大的毫秒，我想获得这个毫秒数对应多少分：</p> 
<pre><code class="prism language-java"><span class="token keyword">long</span> a <span class="token operator">=</span> <span class="token number">4535345</span><span class="token punctuation">;</span>

<span class="token comment">//结果为：75</span>
<span class="token keyword">long</span> minutes <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">convertTime</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MILLISECONDS</span><span class="token punctuation">,</span> <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span><span class="token constant">MINUTES</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_313"></a>金额大小写转换</h6> 
<p>面对财务类需求，<code>Convert.digitToChinese</code>将金钱数转换为大写形式：</p> 
<pre><code class="prism language-java"><span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">67556.32</span><span class="token punctuation">;</span>

<span class="token comment">//结果为："陆万柒仟伍佰伍拾陆元叁角贰分"</span>
<span class="token class-name">String</span> digitUppercase <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">digitToChinese</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意 转换为大写只能精确到分（小数点儿后两位），之后的数字会被忽略。</p> 
<h6><a id="_326"></a>数字转换</h6> 
<p>1.数字转为英文表达</p> 
<pre><code class="prism language-java"><span class="token comment">// ONE HUNDRED AND CENTS TWENTY THREE ONLY</span>
<span class="token class-name">String</span> format <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">numberToWord</span><span class="token punctuation">(</span><span class="token number">100.23</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>2.数字简化</p> 
<pre><code class="prism language-java"><span class="token comment">// 1.2k</span>
<span class="token class-name">String</span> format1 <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">numberToSimple</span><span class="token punctuation">(</span><span class="token number">1200</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>3.数字转中文</p> 
<p>数字转中文方法中，只保留两位小数</p> 
<pre><code class="prism language-java"><span class="token comment">// 一万零八百八十九点七二</span>
<span class="token class-name">String</span> f1 <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">numberToChinese</span><span class="token punctuation">(</span><span class="token number">10889.72356</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用金额大写</span>
<span class="token comment">// 壹万贰仟陆佰伍拾叁</span>
<span class="token class-name">String</span> f1 <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">numberToChinese</span><span class="token punctuation">(</span><span class="token number">12653</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>4.数字中文转换为数字</p> 
<pre><code class="prism language-java"><span class="token comment">// 1012</span>
<span class="token class-name">String</span> f1 <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">numberToChinese</span><span class="token punctuation">(</span><span class="token string">"一千零一十二"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_362"></a>原始类和包装类转换</h6> 
<p>有的时候，我们需要将包装类和原始类相互转换（比如Integer.class 和 int.class），这时候我们可以：</p> 
<pre><code class="prism language-java"><span class="token comment">//去包装</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> wrapClass <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>

<span class="token comment">//结果为：int.class</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> unWraped <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">unWrap</span><span class="token punctuation">(</span>wrapClass<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//包装</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> primitiveClass <span class="token operator">=</span> <span class="token keyword">long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>

<span class="token comment">//结果为：Long.class</span>
<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> wraped <span class="token operator">=</span> <span class="token class-name">Convert</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span>primitiveClass<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_380"></a>自定义转换</h5> 
<p>Hutool的默认转换有时候并不能满足我们自定义对象的一些需求，这时我们可以使用<code>ConverterRegistry.getInstance().putCustom()</code>方法自定义类型转换。</p> 
<ol><li>自定义转换器</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">CustomConverter</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">Object</span> value<span class="token punctuation">,</span> <span class="token class-name">String</span> defaultValue<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalArgumentException</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Custom: "</span> <span class="token operator">+</span> value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="2"><li>注册转换器</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">ConverterRegistry</span> converterRegistry <span class="token operator">=</span> <span class="token class-name">ConverterRegistry</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//此处做为示例自定义String转换，因为Hutool中已经提供String转换，请尽量不要替换</span>
<span class="token comment">//替换可能引发关联转换异常（例如覆盖String转换会影响全局）</span>
converterRegistry<span class="token punctuation">.</span><span class="token function">putCustom</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">CustomConverter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="3"><li>执行转换</li></ol> 
<pre><code class="prism language-java"><span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">454553</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> result <span class="token operator">=</span> converterRegistry<span class="token punctuation">.</span><span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token string">"Custom: 454553"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意： convert(Class type, Object value, T defaultValue, boolean isCustomFirst)方法的最后一个参数可以选择转换时优先使用自定义转换器还是默认转换器。convert(Class type, Object value, T defaultValue)和convert(Class type, Object value)两个重载方法都是使用自定义转换器优先的模式。</p> 
<h6><a id="ConverterRegistry_414"></a>ConverterRegistry单例和对象模式</h6> 
<p>ConverterRegistry提供一个静态方法getInstance()返回全局单例对象，这也是推荐的使用方式，当然如果想在某个限定范围内自定义转换，可以实例化ConverterRegistry对象。</p> 
<h5><a id="_418"></a>日期时间</h5> 
<h6><a id="_420"></a>日期时间工具</h6> 
<ul><li><code>DateUtil</code> 针对日期时间操作提供一系列静态方法</li><li><code>DateTime</code> 提供类似于Joda-Time中日期时间对象的封装，继承自Date类，并提供更加丰富的对象方法。</li><li><code>FastDateFormat</code> 提供线程安全的针对Date对象的格式化和日期字符串解析支持。此对象在实际使用中并不需要感知，相关操作已经封装在<code>DateUtil</code>和<code>DateTime</code>的相关方法中。</li><li><code>DateBetween</code> 计算两个时间间隔的类，除了通过构造新对象使用外，相关操作也已封装在<code>DateUtil</code>和<code>DateTime</code>的相关方法中。</li><li><code>TimeInterval</code> 一个简单的计时器类，常用于计算某段代码的执行时间，提供包括毫秒、秒、分、时、天、周等各种单位的花费时长计算，对象的静态构造已封装在<code>DateUtil</code>中。</li><li><code>DatePattern</code> 提供常用的日期格式化模式，包括<code>String</code>类型和<code>FastDateFormat</code>两种类型。</li></ul> 
<h6><a id="_429"></a>日期枚举</h6> 
<p>与<code>Calendar</code>对应的这些枚举包括：</p> 
<ul><li><code>Month</code> 表示月份，与Calendar中的int值一一对应。</li><li><code>Week</code> 表示周，与Calendar中的int值一一对应。</li></ul> 
<p>月份枚举</p> 
<p>通过月份枚举可以获得某个月的最后一天</p> 
<pre><code class="prism language-java"><span class="token comment">// 31</span>
<span class="token keyword">int</span> lastDay <span class="token operator">=</span> <span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">JANUARY</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLastDay</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>时间枚举</p> 
<p>时间枚举<code>DateUnit</code>主要表示某个时间单位对应的毫秒数，常用于计算时间差。</p> 
<p>例如：<code>DateUnit.MINUTE</code>表示分，也表示一分钟的毫米数，可以通过调用其<code>getMillis()</code>方法获得其毫秒数。</p> 
<h6><a id="DateUtil_451"></a>日期时间工具-DateUtil</h6> 
<h6><a id="DatelongCalendar_453"></a>Date、long、Calendar之间的相互转换</h6> 
<pre><code class="prism language-java"><span class="token comment">//当前时间</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当前时间</span>
<span class="token class-name">Date</span> date2 <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当前时间</span>
<span class="token class-name">Date</span> date3 <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当前时间字符串，格式：yyyy-MM-dd HH:mm:ss</span>
<span class="token class-name">String</span> now <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当前日期字符串，格式：yyyy-MM-dd</span>
<span class="token class-name">String</span> today<span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">today</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_468"></a>字符串转日期</h6> 
<p><code>DateUtil.parse</code>方法会自动识别一些常用格式，包括：</p> 
<p>yyyy-MM-dd HH:mm:ss</p> 
<ul><li>yyyy/MM/dd HH:mm:ss</li><li>yyyy.MM.dd HH:mm:ss</li><li>yyyy年MM月dd日 HH时mm分ss秒</li><li>yyyy-MM-dd</li><li>yyyy/MM/dd</li><li>yyyy.MM.dd</li><li>HH:mm:ss</li><li>HH时mm分ss秒</li><li>yyyy-MM-dd HH:mm</li><li>yyyy-MM-dd HH:mm:ss.SSS</li><li>yyyyMMddHHmmss</li><li>yyyyMMddHHmmssSSS</li><li>yyyyMMdd</li><li>EEE, dd MMM yyyy HH:mm:ss z</li><li>EEE MMM dd HH:mm:ss zzz yyyy</li><li>yyyy-MM-dd’T’HH:mm:ss’Z’</li><li>yyyy-MM-dd’T’HH:mm:ss.SSS’Z’</li><li>yyyy-MM-dd’T’HH:mm:ssZ</li><li>yyyy-MM-dd’T’HH:mm:ss.SSSZ</li></ul> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2017-03-01"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们也可以使用自定义日期格式转化：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2017-03-01"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_506"></a>格式化日期输出</h6> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2017-03-01"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//结果 2017/03/01</span>
<span class="token class-name">String</span> format <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token string">"yyyy/MM/dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//常用格式的格式化，结果：2017-03-01</span>
<span class="token class-name">String</span> formatDate <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatDate</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//结果：2017-03-01 00:00:00</span>
<span class="token class-name">String</span> formatDateTime <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatDateTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//结果：00:00:00</span>
<span class="token class-name">String</span> formatTime <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="Date_525"></a>获取Date对象的某个部分</h6> 
<pre><code class="prism language-java"><span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获得年的部分</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">year</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获得月份，从0开始计数</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">month</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获得月份枚举</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">monthEnum</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//.....</span>
</code></pre> 
<h6><a id="_538"></a>开始和结束时间</h6> 
<p>有的时候我们需要获得每天的开始时间、结束时间，每月的开始和结束时间等等，DateUtil也提供了相关方法：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2017-03-01 22:33:23"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//一天的开始，结果：2017-03-01 00:00:00</span>
<span class="token class-name">Date</span> beginOfDay <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">beginOfDay</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//一天的结束，结果：2017-03-01 23:59:59</span>
<span class="token class-name">Date</span> endOfDay <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">endOfDay</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_553"></a>日期时间偏移</h6> 
<p>日期或时间的偏移指针对某个日期增加或减少分、小时、天等等，达到日期变更的目的。</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2017-03-01 22:33:23"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//结果：2017-03-03 22:33:23</span>
<span class="token class-name">Date</span> newDate <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token class-name">DateField</span><span class="token punctuation">.</span><span class="token constant">DAY_OF_MONTH</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//常用偏移，结果：2017-03-04 22:33:23</span>
<span class="token class-name">DateTime</span> newDate2 <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">offsetDay</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//常用偏移，结果：2017-03-01 19:33:23</span>
<span class="token class-name">DateTime</span> newDate3 <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">offsetHour</span><span class="token punctuation">(</span>date<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>针对当前时间，提供了简化的偏移方法（例如昨天、上周、上个月等）：</p> 
<pre><code class="prism language-java"><span class="token comment">//昨天</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">yesterday</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//明天</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">tomorrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//上周</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">lastWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//下周</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">nextWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//上个月</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">lastMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//下个月</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">nextMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="_588"></a>日期时间差</h6> 
<p>有时候我们需要计算两个日期之间的时间差（相差天数、相差小时数等等）</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateStr1 <span class="token operator">=</span> <span class="token string">"2017-03-01 22:33:23"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date1 <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">String</span> dateStr2 <span class="token operator">=</span> <span class="token string">"2017-04-01 23:33:23"</span><span class="token punctuation">;</span>
<span class="token class-name">Date</span> date2 <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr2<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//相差一个月，31天</span>
<span class="token keyword">long</span> betweenDay <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>date1<span class="token punctuation">,</span> date2<span class="token punctuation">,</span> <span class="token class-name">DateUnit</span><span class="token punctuation">.</span><span class="token constant">DAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>格式化时间差</p> 
<p>有时候我们希望看到易读的时间差，比如XX天XX小时XX分XX秒，此时使用<code>DateUtil.formatBetween</code>方法：</p> 
<pre><code class="prism language-java"><span class="token comment">//Level.MINUTE表示精确到分</span>
<span class="token class-name">String</span> formatBetween <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">formatBetween</span><span class="token punctuation">(</span>between<span class="token punctuation">,</span> <span class="token class-name">Level</span><span class="token punctuation">.</span><span class="token constant">MINUTE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出：31天1小时</span>
<span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formatBetween<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>星座和属相</p> 
<pre><code class="prism language-java"><span class="token comment">// "摩羯座"</span>
<span class="token class-name">String</span> zodiac <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">getZodiac</span><span class="token punctuation">(</span><span class="token class-name">Month</span><span class="token punctuation">.</span><span class="token constant">JANUARY</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// "狗"</span>
<span class="token class-name">String</span> chineseZodiac <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">getChineseZodiac</span><span class="token punctuation">(</span><span class="token number">1994</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_624"></a>其他</h6> 
<pre><code class="prism language-java"><span class="token comment">//年龄</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">ageOfNow</span><span class="token punctuation">(</span><span class="token string">"1990-01-30"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//是否闰年</span>
<span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">isLeapYear</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="DateTime_634"></a>日期时间对象-DateTime</h6> 
<p><strong>DateTime</strong>类继承于java.util.Date类，为Date类扩展了众多简便方法，这些方法多是<code>DateUtil</code>静态方法的对象表现形式，使用DateTime对象可以完全替代开发中Date对象的使用。</p> 
<p>构建对象有两种方式：<code>DateTime.of()</code>和<code>new DateTime()</code>：</p> 
<pre><code class="prism language-java"><span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token comment">//new方式创建</span>
<span class="token class-name">DateTime</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//of方式创建</span>
<span class="token class-name">DateTime</span> now <span class="token operator">=</span> <span class="token class-name">DateTime</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">DateTime</span> dt <span class="token operator">=</span> <span class="token class-name">DateTime</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_652"></a>使用对象</h6> 
<p>示例：获取日期成员（年、月、日等）</p> 
<pre><code class="prism language-java"><span class="token class-name">DateTime</span> dateTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token string">"2017-01-05 12:34:23"</span><span class="token punctuation">,</span> <span class="token class-name">DatePattern</span><span class="token punctuation">.</span><span class="token constant">NORM_DATETIME_FORMAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token comment">//年，结果：2017</span>
<span class="token keyword">int</span> year <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//季度（非季节），结果：Season.SPRING</span>
<span class="token class-name">Season</span> season <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">seasonEnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//月份，结果：Month.JANUARY</span>
<span class="token class-name">Month</span> month <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">monthEnum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//日，结果：5</span>
<span class="token keyword">int</span> day <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">dayOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_672"></a>对象的可变性</h6> 
<pre><code class="prism language-java"><span class="token class-name">DateTime</span> dateTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token string">"2017-01-05 12:34:23"</span><span class="token punctuation">,</span> <span class="token class-name">DatePattern</span><span class="token punctuation">.</span><span class="token constant">NORM_DATETIME_FORMAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//默认情况下DateTime为可变对象，此时offset == dateTime</span>
<span class="token class-name">DateTime</span> offset <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token class-name">DateField</span><span class="token punctuation">.</span><span class="token constant">YEAR</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置为不可变对象后变动将返回新对象，此时offset != dateTime</span>
dateTime<span class="token punctuation">.</span><span class="token function">setMutable</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
offset <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span><span class="token class-name">DateField</span><span class="token punctuation">.</span><span class="token constant">YEAR</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_685"></a>格式化为字符串</h6> 
<p>调用<code>toString()</code>方法即可返回格式为<code>yyyy-MM-dd HH:mm:ss</code>的字符串，调用<code>toString(String format)</code>可以返回指定格式的字符串。</p> 
<pre><code class="prism language-java"><span class="token class-name">DateTime</span> dateTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DateTime</span><span class="token punctuation">(</span><span class="token string">"2017-01-05 12:34:23"</span><span class="token punctuation">,</span> <span class="token class-name">DatePattern</span><span class="token punctuation">.</span><span class="token constant">NORM_DATETIME_FORMAT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//结果：2017-01-05 12:34:23</span>
<span class="token class-name">String</span> dateStr <span class="token operator">=</span> dateTime<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//结果：2017/01/05</span>
</code></pre> 
<h6><a id="ChineseDate_697"></a>农历日期-ChineseDate</h6> 
<p>农历日期，提供了生肖、天干地支、传统节日等方法。</p> 
<ol><li>构建<code>ChineseDate</code>对象</li></ol> 
<p><code>ChineseDate</code>表示了农历的对象，构建此对象既可以使用公历的日期，也可以使用农历的日期。</p> 
<pre><code class="prism language-java"><span class="token comment">//通过农历构建</span>
<span class="token class-name">ChineseDate</span> chineseDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChineseDate</span><span class="token punctuation">(</span><span class="token number">1992</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//通过公历构建</span>
<span class="token class-name">ChineseDate</span> chineseDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChineseDate</span><span class="token punctuation">(</span><span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"1993-01-06"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>​ 2.基本使用</p> 
<pre><code class="prism language-java"><span class="token comment">//通过公历构建</span>
<span class="token class-name">ChineseDate</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChineseDate</span><span class="token punctuation">(</span><span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"2020-01-25"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 一月</span>
date<span class="token punctuation">.</span><span class="token function">getChineseMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 正月</span>
date<span class="token punctuation">.</span><span class="token function">getChineseMonthName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 初一</span>
date<span class="token punctuation">.</span><span class="token function">getChineseDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 庚子</span>
date<span class="token punctuation">.</span><span class="token function">getCyclical</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 生肖：鼠</span>
date<span class="token punctuation">.</span><span class="token function">getChineseZodiac</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 传统节日（部分支持，逗号分隔）：春节</span>
date<span class="token punctuation">.</span><span class="token function">getFestivals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 庚子鼠年 正月初一</span>
date<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>​ 3.获取天干地支</p> 
<p>从<code>5.4.1</code>开始，Hutool支持天干地支的获取：</p> 
<pre><code class="prism language-java"><span class="token comment">//通过公历构建</span>
<span class="token class-name">ChineseDate</span> chineseDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ChineseDate</span><span class="token punctuation">(</span><span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"2020-08-28"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 庚子年甲申月癸卯日</span>
<span class="token class-name">String</span> cyclicalYMD <span class="token operator">=</span> chineseDate<span class="token punctuation">.</span><span class="token function">getCyclicalYMD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="LocalDateTimeLocalDateTimeUtil_746"></a>LocalDateTime工具-LocalDateTimeUtil</h6> 
<p>日期转换</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> dateStr <span class="token operator">=</span> <span class="token string">"2020-01-23T12:23:56"</span><span class="token punctuation">;</span>
<span class="token class-name">DateTime</span> dt <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>dateStr<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Date对象转换为LocalDateTime</span>
<span class="token class-name">LocalDateTime</span> of <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>dt<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 时间戳转换为LocalDateTime</span>
of <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">ofUTC</span><span class="token punctuation">(</span>dt<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>日期字符串解析</p> 
<pre><code class="prism language-java"><span class="token comment">// 解析ISO时间</span>
<span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-23T12:23:56"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 解析自定义格式时间</span>
localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-23"</span><span class="token punctuation">,</span> <span class="token class-name">DatePattern</span><span class="token punctuation">.</span><span class="token constant">NORM_DATE_PATTERN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>解析同样支持<code>LocalDate</code>：</p> 
<pre><code class="prism language-java"><span class="token class-name">LocalDate</span> localDate <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"2020-01-23"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 解析日期时间为LocalDate，时间部分舍弃</span>
localDate <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"2020-01-23T12:23:56"</span><span class="token punctuation">,</span> <span class="token class-name">DateTimeFormatter</span><span class="token punctuation">.</span><span class="token constant">ISO_DATE_TIME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>日期格式化</p> 
<pre><code class="prism language-java"><span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-23T12:23:56"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// "2020-01-23 12:23:56"</span>
<span class="token class-name">String</span> format <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">,</span> <span class="token class-name">DatePattern</span><span class="token punctuation">.</span><span class="token constant">NORM_DATETIME_PATTERN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>日期偏移</p> 
<pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-23T12:23:56"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 增加一天</span>
<span class="token comment">// "2020-01-24T12:23:56"</span>
<span class="token class-name">LocalDateTime</span> offset <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span><span class="token constant">DAYS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>如果是减少时间，offset第二个参数传负数即可：</p> 
<pre><code class="prism language-java"><span class="token comment">// "2020-01-22T12:23:56"</span>
offset <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">offset</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token class-name">ChronoUnit</span><span class="token punctuation">.</span><span class="token constant">DAYS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>计算时间间隔</p> 
<pre><code class="prism language-java"><span class="token class-name">LocalDateTime</span> start <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2019-02-02T00:00:00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">LocalDateTime</span> end <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-02-02T00:00:00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Duration</span> between <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 365</span>
between<span class="token punctuation">.</span><span class="token function">toDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>一天的开始和结束</p> 
<pre><code class="prism language-java"><span class="token class-name">LocalDateTime</span> localDateTime <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">"2020-01-23T12:23:56"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// "2020-01-23T00:00"</span>
<span class="token class-name">LocalDateTime</span> beginOfDay <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">beginOfDay</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// "2020-01-23T23:59:59.999999999"</span>
<span class="token class-name">LocalDateTime</span> endOfDay <span class="token operator">=</span> <span class="token class-name">LocalDateTimeUtil</span><span class="token punctuation">.</span><span class="token function">endOfDay</span><span class="token punctuation">(</span>localDateTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="TimeInterval_831"></a>计时器工具-TimeInterval</h6> 
<p>Hutool通过封装<code>TimeInterval</code>实现计时器功能，即可以计算方法或过程执行的时间。</p> 
<p><code>TimeInterval</code>支持分组计时，方便对比时间。</p> 
<pre><code class="prism language-java"><span class="token class-name">TimeInterval</span> timer <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//---------------------------------</span>
<span class="token comment">//-------这是执行过程</span>
<span class="token comment">//---------------------------------</span>

timer<span class="token punctuation">.</span><span class="token function">interval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//花费毫秒数</span>
timer<span class="token punctuation">.</span><span class="token function">intervalRestart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回花费时间，并重置开始时间</span>
timer<span class="token punctuation">.</span><span class="token function">intervalMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//花费分钟数</span>
</code></pre> 
<p>也可以实现分组计时：</p> 
<pre><code class="prism language-java"><span class="token keyword">final</span> <span class="token class-name">TimeInterval</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TimeInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 分组1</span>
timer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ThreadUtil</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 分组2</span>
timer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">ThreadUtil</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">900</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Timer 1 took {} ms"</span><span class="token punctuation">,</span> timer<span class="token punctuation">.</span><span class="token function">intervalMs</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Timer 2 took {} ms"</span><span class="token punctuation">,</span> timer<span class="token punctuation">.</span><span class="token function">intervalMs</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="IO_866"></a>IO流相关</h5> 
<p>io包的封装主要针对流、文件的读写封装，主要以工具类为主，提供常用功能的封装，这包括：</p> 
<ul><li><code>IoUtil</code> 流操作工具类</li><li><code>FileUtil</code> 文件读写和操作的工具类。</li><li><code>FileTypeUtil</code> 文件类型判断工具类</li><li><code>WatchMonitor</code> 目录、文件监听，封装了JDK1.7中的WatchService</li><li><code>ClassPathResource</code>针对ClassPath中资源的访问封装</li><li><code>FileReader</code> 封装文件读取</li><li><code>FileWriter</code> 封装文件写入</li></ul> 
<p>除了针对JDK的读写封装外，还针对特定环境和文件扩展了流实现。</p> 
<ul><li><code>BOMInputStream</code>针对含有BOM头的流读取</li><li><code>FastByteArrayOutputStream</code> 基于快速缓冲FastByteBuffer的OutputStream，随着数据的增长自动扩充缓冲区（from blade）</li><li><code>FastByteBuffer</code> 快速缓冲，将数据存放在缓冲集中，取代以往的单一数组（from blade）</li></ul> 
<h6><a id="IOIoUtil_884"></a>IO工具类-IoUtil</h6> 
<h6><a id="_886"></a>拷贝</h6> 
<p>以文件流拷贝为例：</p> 
<pre><code class="prism language-java"><span class="token class-name">BufferedInputStream</span> in <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token string">"d:/test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">BufferedOutputStream</span> out <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token string">"d:/test2.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">long</span> copySize <span class="token operator">=</span> <span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>in<span class="token punctuation">,</span> out<span class="token punctuation">,</span> <span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_BUFFER_SIZE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="StreamReaderWriter_896"></a>Stream转Reader、Writer</h6> 
<ul><li><code>IoUtil.getReader</code>：将<code>InputStream</code>转为<code>BufferedReader</code>用于读取字符流，它是部分readXXX方法的基础。</li><li><code>IoUtil.getWriter</code>：将<code>OutputStream</code>转为<code>OutputStreamWriter</code>用于写入字符流，它是部分writeXXX的基础。</li></ul> 
<h6><a id="_901"></a>读取流中的内容</h6> 
<ol><li> <p><code>read</code>方法有诸多的重载方法，根据参数不同，可以读取不同对象中的内容，这包括：</p> 
  <ul><li><code>InputStream</code></li><li><code>Reader</code></li><li><code>FileChannel</code></li></ul> <p>这三个重载大部分返回String字符串，为字符流读取提供极大便利。</p> </li><li> <p>readXXX`方法主要针对返回值做一些处理，例如：</p> </li></ol> 
<ul><li><code>readBytes</code> 返回byte数组（读取图片等）</li><li><code>readHex</code> 读取16进制字符串</li><li><code>readObj</code> 读取序列化对象（反序列化）</li><li><code>readLines</code> 按行读取</li></ul> 
<ol start="3"><li><code>toStream</code>方法则是将某些对象转换为流对象，便于在某些情况下操作：</li></ol> 
<ul><li><code>String</code> 转换为<code>ByteArrayInputStream</code></li><li><code>File</code> 转换为<code>FileInputStream</code></li></ul> 
<h6><a id="_923"></a>写入到流</h6> 
<ul><li><code>IoUtil.write</code>方法有两个重载方法，一个直接调用<code>OutputStream.write</code>方法，另一个用于将对象转换为字符串（调用toString方法），然后写入到流中。</li><li><code>IoUtil.writeObjects</code> 用于将可序列化对象序列化后写入到流中。</li></ul> 
<p><code>write</code>方法并没有提供writeXXX，需要自己转换为String或byte[]。</p> 
<h6><a id="_930"></a>关闭</h6> 
<p>关闭操作会面临两个问题：</p> 
<ol><li>被关闭对象为空</li><li>对象关闭失败（或对象已关闭）</li></ol> 
<p><code>IoUtil.close</code>方法很好的解决了这两个问题。</p> 
<h6><a id="FileUtil_939"></a>文件工具类-FileUtil</h6> 
<p>总体来说，FileUtil类包含以下几类操作工具：</p> 
<ol><li>文件操作：包括文件目录的新建、删除、复制、移动、改名等</li><li>文件判断：判断文件或目录是否非空，是否为目录，是否为文件等等。</li><li>绝对路径：针对ClassPath中的文件转换为绝对路径文件。</li><li>文件名：主文件名，扩展名的获取</li><li>读操作：包括类似IoUtil中的getReader、readXXX操作</li><li>写操作：包括getWriter和writeXXX操作</li></ol> 
<p>在FileUtil中，这些类Linux命令的方法包括：</p> 
<ul><li><code>ls</code> 列出目录和文件</li><li><code>touch</code> 创建文件，如果父目录不存在也自动创建</li><li><code>mkdir</code> 创建目录，会递归创建每层目录</li><li><code>del</code> 删除文件或目录（递归删除，不判断是否为空），这个方法相当于Linux的delete命令</li><li><code>copy</code> 拷贝文件或目录</li></ul> 
<h6><a id="FileTypeUtil_958"></a>文件类型判断-FileTypeUtil</h6> 
<p>通过调用<code>FileTypeUtil.getType</code>即可判断，这个方法同时提供众多的重载方法，用于读取不同的文件和流。</p> 
<pre><code class="prism language-java"><span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"d:/test.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> type <span class="token operator">=</span> <span class="token class-name">FileTypeUtil</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出 jpg则说明确实为jpg文件</span>
<span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>对于某些文本格式的文件我们并不能通过首部byte判断其类型，比如<code>JSON</code>，这类文件本质上是文本文件，我们应该读取其文本内容，通过其语法判断类型。</p> 
<h6><a id="_971"></a>自定义类型</h6> 
<p>通过<code>putFileType</code>方法可以自定义文件类型。</p> 
<pre><code class="prism language-java"><span class="token class-name">FileTypeUtil</span><span class="token punctuation">.</span><span class="token function">putFileType</span><span class="token punctuation">(</span><span class="token string">"ffd8ffe000104a464946"</span><span class="token punctuation">,</span> <span class="token string">"new_jpg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意 xlsx、docx本质上是各种XML打包为zip的结果，因此会被识别为zip格式。</p> 
<h6><a id="WatchMonitor_981"></a>文件监听-WatchMonitor</h6> 
<p>在Hutool中，<code>WatchMonitor</code>主要针对JDK7中<code>WatchService</code>做了封装，针对文件和目录的变动（创建、更新、删除）做一个钩子，在<code>Watcher</code>中定义相应的逻辑来应对这些文件的变化。</p> 
<p><code>WatchMonitor</code>提供的事件有：</p> 
<ul><li><code>ENTRY_MODIFY</code> 文件修改的事件</li><li><code>ENTRY_CREATE</code> 文件或目录创建的事件</li><li><code>ENTRY_DELETE</code> 文件或目录删除的事件</li><li><code>OVERFLOW</code> 丢失的事件</li></ul> 
<p>这些事件对应<code>StandardWatchEventKinds</code>中的事件。</p> 
<h6><a id="_994"></a>监听指定事件</h6> 
<pre><code class="prism language-java"><span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"example.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//这里只监听文件或目录的修改事件</span>
<span class="token class-name">WatchMonitor</span> watchMonitor <span class="token operator">=</span> <span class="token class-name">WatchMonitor</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token class-name">WatchMonitor</span><span class="token punctuation">.</span><span class="token constant">ENTRY_MODIFY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
watchMonitor<span class="token punctuation">.</span><span class="token function">setWatcher</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">WatchEvent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> event<span class="token punctuation">,</span> <span class="token class-name">Path</span> currentPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"创建：{}-&gt; {}"</span><span class="token punctuation">,</span> currentPath<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onModify</span><span class="token punctuation">(</span><span class="token class-name">WatchEvent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> event<span class="token punctuation">,</span> <span class="token class-name">Path</span> currentPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"修改：{}-&gt; {}"</span><span class="token punctuation">,</span> currentPath<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token class-name">WatchEvent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> event<span class="token punctuation">,</span> <span class="token class-name">Path</span> currentPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"删除：{}-&gt; {}"</span><span class="token punctuation">,</span> currentPath<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onOverflow</span><span class="token punctuation">(</span><span class="token class-name">WatchEvent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> event<span class="token punctuation">,</span> <span class="token class-name">Path</span> currentPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Overflow：{}-&gt; {}"</span><span class="token punctuation">,</span> currentPath<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//设置监听目录的最大深入，目录层级大于制定层级的变更将不被监听，默认只监听当前层级目录</span>
watchMonitor<span class="token punctuation">.</span><span class="token function">setMaxDepth</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//启动监听</span>
watchMonitor<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="_1032"></a>监听全部事件</h6> 
<p>如果我们想监听所有事件，可以：</p> 
<pre><code class="prism language-java"><span class="token class-name">WatchMonitor</span><span class="token punctuation">.</span><span class="token function">createAll</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SimpleWatcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onModify</span><span class="token punctuation">(</span><span class="token class-name">WatchEvent</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> event<span class="token punctuation">,</span> <span class="token class-name">Path</span> currentPath<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"EVENT modify"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><code>createAll</code>方法会创建一个监听所有事件的WatchMonitor，同时在第二个参数中定义Watcher来负责处理这些变动。</p> 
<h6><a id="_1047"></a>延迟处理监听事件</h6> 
<p>在监听目录或文件时，如果这个文件有修改操作，JDK会多次触发modify方法，为了解决这个问题，我们定义了<code>DelayWatcher</code>，此类通过维护一个Set将短时间内相同文件多次modify的事件合并处理触发，从而避免以上问题。</p> 
<pre><code class="prism language-java"><span class="token class-name">WatchMonitor</span> monitor <span class="token operator">=</span> <span class="token class-name">WatchMonitor</span><span class="token punctuation">.</span><span class="token function">createAll</span><span class="token punctuation">(</span><span class="token string">"d:/"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">DelayWatcher</span><span class="token punctuation">(</span>watcher<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
monitor<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="FileReader_1056"></a>文件读取-FileReader</h6> 
<pre><code class="prism language-java"><span class="token comment">//默认UTF-8编码，可以在构造中传入第二个参数做为编码</span>
<span class="token class-name">FileReader</span> fileReader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token string">"test.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> result <span class="token operator">=</span> fileReader<span class="token punctuation">.</span><span class="token function">readString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>FileReader提供了以下方法来快速读取文件内容：</p> 
<ul><li><code>readBytes</code></li><li><code>readString</code></li><li><code>readLines</code></li></ul> 
<p>同时，此类还提供了以下方法用于转换为流或者BufferedReader：</p> 
<ul><li><code>getReader</code></li><li><code>getInputStream</code></li></ul> 
<h6><a id="FileWriter_1075"></a>文件写入-FileWriter</h6> 
<p>使用方式与<code>FileReader</code>也类似：</p> 
<pre><code class="prism language-java"><span class="token class-name">FileWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span><span class="token string">"test.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>写入文件分为追加模式和覆盖模式两类，追加模式可以用<code>append</code>方法，覆盖模式可以用<code>write</code>方法，同时也提供了一个write方法，第二个参数是可选覆盖模式。</p> 
<p>同样，此类提供了：</p> 
<ul><li><code>getOutputStream</code></li><li><code>getWriter</code></li><li><code>getPrintWriter</code></li></ul> 
<h6><a id="FileAppende_1092"></a>文件追加-FileAppende</h6> 
<pre><code class="prism language-java"><span class="token class-name">FileAppender</span> appender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileAppender</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appender<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appender<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"abc"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appender<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"xyz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

appender<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
appender<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="Tailer_1104"></a>文件跟随-Tailer</h6> 
<pre><code class="prism language-java"><span class="token class-name">Tailer</span> tailer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tailer</span><span class="token punctuation">(</span><span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"f:/test/test.log"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Tailer</span><span class="token punctuation">.</span><span class="token constant">CONSOLE_HANDLER</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tailer<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其中<code>Tailer.CONSOLE_HANDLER</code>表示文件新增内容默认输出到控制台。</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 命令行打印的行处理器
 * 
 * @author looly
 * @since 4.5.2
 */</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ConsoleLineHandler</span> <span class="token keyword">implements</span> <span class="token class-name">LineHandler</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token class-name">String</span> line<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>注意 此方法会阻塞当前线程</p> 
</blockquote> 
<h6><a id="FileNameUtil_1130"></a>文件名工具-FileNameUtil</h6> 
<ol><li>获取文件名</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"/opt/test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// test.txt</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">FileNameUtil</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ol start="2"><li>获取主文件名和扩展名</li></ol> 
<pre><code class="prism language-java"><span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token class-name">FileUtil</span><span class="token punctuation">.</span><span class="token function">file</span><span class="token punctuation">(</span><span class="token string">"/opt/test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// "test"</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">FileNameUtil</span><span class="token punctuation">.</span><span class="token function">mainName</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// "txt"</span>
<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">FileNameUtil</span><span class="token punctuation">.</span><span class="token function">extName</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<blockquote> 
 <p>注意，此处获取的扩展名不带<code>.</code>。 <code>FileNameUtil.mainName</code>和<code>FileNameUtil.getPrefix</code>等价，同理<code>FileNameUtil.extName</code>和<code>FileNameUtil.getSuffix</code>等价，保留两个方法用于适应不同用户的习惯。</p> 
</blockquote> 
<h6><a id="ResourceUtil_1155"></a>资源工具-ResourceUtil</h6> 
<p>举个例子，假设我们在classpath下放了一个<code>test.xml</code>，读取就变得非常简单：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token class-name">ResourceUtil</span><span class="token punctuation">.</span><span class="token function">readUtf8Str</span><span class="token punctuation">(</span><span class="token string">"test.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>假设我们的文件存放在<code>src/resources/config</code>目录下，则读取改为：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token class-name">ResourceUtil</span><span class="token punctuation">.</span><span class="token function">readUtf8Str</span><span class="token punctuation">(</span><span class="token string">"config/test.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>注意 在IDEA中，新加入文件到<code>src/resources</code>目录下，需要重新import项目，以便在编译时顺利把资源文件拷贝到target目录下。如果提示找不到文件，请去target目录下确认文件是否存在。</p> 
<h6><a id="ClassPathClassPathResource_1171"></a>ClassPath资源访问-ClassPathResource</h6> 
<h6><a id="ClassPath_1173"></a>什么是ClassPath</h6> 
<p>简单说来ClassPath就是查找class文件的路径，在Tomcat等容器下，ClassPath一般是<code>WEB-INF/classes</code>，在普通java程序中，我们可以通过定义<code>-cp</code>或者<code>-classpath</code>参数来定义查找class文件的路径，这些路径就是ClassPath。</p> 
<p>读取的时候使用：</p> 
<pre><code class="prism language-java"><span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">"config.properties"</span><span class="token punctuation">;</span>
<span class="token class-name">InputStream</span> in <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">openStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>面对这种复杂的读取操作，我们封装了<code>ClassPathResource</code>类来简化这种资源的读取：</p> 
<pre><code class="prism language-java"><span class="token class-name">ClassPathResource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"test.properties"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
properties<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>resource<span class="token punctuation">.</span><span class="token function">getStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Properties: {}"</span><span class="token punctuation">,</span> properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4efd80b5cfbea21e87bf8e3574f8817a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JAVA----基本类型与运算（理解记忆）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb9df3fe20d582990cdb4bfb6e8330de/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java基础——一文读懂Fork/Join框架</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>