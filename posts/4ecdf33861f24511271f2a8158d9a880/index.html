<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>域控制器学习笔记(1)域基本概念 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="域控制器学习笔记(1)域基本概念" />
<meta property="og:description" content="文章目录 域基本概念1.域概述：2.域中的角色3.域之间AD数据库同步4.特殊的域控制器5.域和活动目录的规划6.多域的术语7.域间的信任关系8.什么是站点？9.域的规划建议 域基本概念 域（Domain）是企业网络钟人为定义的一组计算机和用户的集合，目的是为了对集合钟的各种资源对象进行统一和集中的管理。
活动目录（Active Directory）是一种小型数据库，通过定义域内的各种对象的属性并在逻辑上形成层次化结构，便于更有效的展示和管理。
域控制器（Domain Controller）存放活动目录数据库的服务器，运行ADDS（Active Directory Domain Service）服务。
1.域概述： 域提供了一个集合的环境，在集合中，包含了各种各样的对象（计算机、用户），对象存放于基于文件集的数据库当中，名称就叫活动目录，活动目录存放在域控制器上，一个企业可以拥有多台域控制器，实现高可用和负载均衡。
强制终端计算机及用户的安全策略及桌面/应用环境，并可实现批量和自动部署，减轻IT人员日常的管理难度和工作强度。域中的各类服务和资源（文件和打印共享等）的访问控制可以灵活的与企业的层次化组织架构相组合，满足复杂的权限分配等管理需求。统一的身份验证手段，可与多种windows应用服务（如Exchange，Sharepoint等）及第三方软件集成，实现单点登录，改善用户在多业务中切换中的操作体验。 总结：
第一个方面，协助IT管理人员，进行企业当中的计算机及用户的一些参数的统一的自动部署，通过域中的组策略等管理手段实现批量和自动的参数部署，减轻IT管理人的工作难度及强度。
利用权限管理的机制，有效对企业中资源进行访问控制（如文件共享服务器、打印机）供不同部门不同用户使用，对设备的权限进行控制。
通过域和活动目录，实现企业的统一的身份验证，现在企业部署的应用程序越来越多，如果每套应用程序都有一套登录的账户系统，那么对用户来说，使用体验是极差的，每一套业务系统都要用户名和密码，每一次使用都要重复登录，但是如果拥有域和活动目录的一个功能的话，就可以使得应用程序使用活动目录来实现统一的身份验证及单点登录，不仅支持windows，如（Exchange，Sharepoint原生产品能实现单点登录），及其它第三方产品也可以再二次开发，也可以支持域。
2.域中的角色 域控制器（Domain Controller，简称DC），每个企业可以有多台域控域内的成员服务器，企业的服务器操作系统加入了域，如果域控是windows server 2012成员服务器3可以是win 2008，并没有强制要求版本相同，包括linux和mac都可以加入，但是非微软的计算机加入到域控可能再功能方面会受到一些局限性，可能需要应用第三方插件，才能够完成较复杂管理和监控任务。域内的终端计算机，前面谈到微软的AD活动目录的数据库，它本质上是一个文件，文件是放在域控制器上的，默认保存于与控制器的C/windows/ntds目录当中，你打开AD数据库文件默认保存目录中
.dit活动目录的主数据库文件，文件容量不会很大，活动目录文件当中不会包含海量数据，哪怕上万PC，每个对象存储的数据 也是比较小，常见就是几百M。
辅助文件 （事务日志、检查点文件）配合处理域控由于特殊原因（断电、系统故障）造成用户要往活动目录数据时，还未来得及写入，就造成了故障，重启后，上一次写入的数据产生了丢失？怎么处理呢？借助事务日志的文件，事务日志文件不会很大，每个事务日志文件按照顺序进行编号，当有一个写入请求时，写入请求再内存当中未来得急写入到主数据中，会先往事务日志当中去写入，事务日志较小，会很快，在事务日志当中，哪怕计算机断电重启，由检查点文件去记录上一次哪个日志哪个数据没有写入主数据文件，可以利用检查点文件数据写入的恢复，就可以确保域控制器的工作环境因为域控特殊原因，造成数据的丢失。 预留文件主要作用防止域控制器某种原因硬盘被写满，一旦域控制器被写满，它无法进行正常工作，所以，在硬盘写满前，通过预留文件功能，把一些数据写到预留文件中。
AD数据库维护过程中必要时可进行服务启停、文件集重定向、脱机管理、备份及恢复等操作。
3.域之间AD数据库同步 AD数据库会定时或在发生改变时自动在DC之间相互同步复制，同步复制的频率和时间窗口可以配置和定义。
企业当中，如果有三台域控制器，活动目录也有三份，三份应该是一模一样，如果管理员登录了一台域控，修改了参数，那么其它两台也会进行同步。
域控之间的同步，可以实现高可用的实现，实现就是直接同步参数增量的变化。
4.特殊的域控制器 只读域控制器（Read Only Domain Controller）
Rodc保存域控制器中AD数据库的只读副本不允许在RODC本地对数据库做出更改操作RODC适合部署在没有本地管理需求的远程分支机构 应用场景（使用非常普遍）
企业规划了一个域，在一个偏远分支机构中，本地用户量不大，无IT管理员，但还是需要放置一个域控制器，可以改善用户的本地登录的体验，此时，使用其它城市域控制器活动目录同步到此分支的域控中，将其做成RODC，好处：如果域控被人非法登录，它是没有办法对相关数据进行改动，保证了安全，如果不是RODC，修改了域控的权限，那么就会反向的同步到其它活动目录，非常危险。
sqa
很多企业，特别是在各地有一些工厂的一些公司，在分支部署的一些域控制器都是RODC，只会单向进行数据同步，只有登录总部域控制器才能进行修改操作。
全局编录服务器（Global Category Server）
GC是一种特殊的域控制器，一个域至少部署一台GC用于多域环境中和其它域进行数据同步（但并不是同步全部数据，通常需要同步的数据仅占AD数据库总量的5%~10%），以便优化Exchange server等应用的全局或跨域搜索的效率。 应用场景
企业中部署了两个域，存在一个问题：由于域是管理的边界，在一个域的计算机的信息，默认不需要传递到其它域，所有的数据的同步只是在同一个域当中。
GC的作用：可以在其它域数据同步时，筛选对象属性某一种进行选择，不需要同步全部数据。
5.域和活动目录的规划 需要结合企业的业务环境 和业务需求
什么适合需要多域?
一个域可以包含100万个对象，绝大多数企业在技术上只需要有一个域。
出现以下需求情况时可能需要考虑多域的部署
IT管理政策上需要有分离或独立的IT管控边界公司重组或合并等原因影响域的变化域的改造和迁徙需要同时新旧域的并存 6.多域的术语 7.域间的信任关系 信任关系可实现跨域的身份验证和资源访问，如果域之间没有信任关系，每个域的用户只能访问本域中的资源，根据场景的不同，部分信任关系时默认存在的，部分时需要另行手工配置的。
8.什么是站点？ 站点（site）是指同一个域内包含特定IP子网并与特定域控制器关联的网络，部署多个站点的目的是优化站点间DC的复制同步，同时使克服端能够和就近的DC优先通信，优化登录验证的操作。
9.域的规划建议 域的规划没有统一的标准，但建议尽可能简化，尽量的使用单域，没有特殊要求尽量使用单域，工作量较小。
企业规模、网络带宽、IT管控界面、法律政治要求、公司并购计划是常见的考虑因素。
企业域规划的一般建议：
中小企业使用单域、总部下有分公司可使用父子域或单域多站点，集团下有多个独立的业务子公司使用单林多域。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4ecdf33861f24511271f2a8158d9a880/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-05T00:44:00+08:00" />
<meta property="article:modified_time" content="2023-12-05T00:44:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">域控制器学习笔记(1)域基本概念</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_1" rel="nofollow">域基本概念</a></li><li><ul><li><a href="#1_7" rel="nofollow">1.域概述：</a></li><li><a href="#2_20" rel="nofollow">2.域中的角色</a></li><li><a href="#3AD_34" rel="nofollow">3.域之间AD数据库同步</a></li><li><a href="#4_39" rel="nofollow">4.特殊的域控制器</a></li><li><a href="#5_60" rel="nofollow">5.域和活动目录的规划</a></li><li><a href="#6_71" rel="nofollow">6.多域的术语</a></li><li><a href="#7_73" rel="nofollow">7.域间的信任关系</a></li><li><a href="#8_76" rel="nofollow">8.什么是站点？</a></li><li><a href="#9_79" rel="nofollow">9.域的规划建议</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_1"></a>域基本概念</h3> 
<p>域（Domain）是企业网络钟人为定义的一组计算机和用户的集合，目的是为了对集合钟的各种资源对象进行统一和集中的管理。<br> 活动目录（Active Directory）是一种小型数据库，通过定义域内的各种对象的属性并在逻辑上形成层次化结构，便于更有效的展示和管理。</p> 
<p>域控制器（Domain Controller）存放活动目录数据库的服务器，运行ADDS（Active Directory Domain Service）服务。</p> 
<h4><a id="1_7"></a>1.域概述：</h4> 
<p>域提供了一个集合的环境，在集合中，包含了各种各样的对象（计算机、用户），对象存放于基于文件集的数据库当中，名称就叫活动目录，活动目录存放在域控制器上，一个企业可以拥有多台域控制器，实现高可用和负载均衡。</p> 
<ol><li>强制终端计算机及用户的安全策略及桌面/应用环境，并可实现批量和自动部署，减轻IT人员日常的管理难度和工作强度。</li><li>域中的各类服务和资源（文件和打印共享等）的访问控制可以灵活的与企业的层次化组织架构相组合，满足复杂的权限分配等管理需求。</li><li>统一的身份验证手段，可与多种windows应用服务（如Exchange，Sharepoint等）及第三方软件集成，实现单点登录，改善用户在多业务中切换中的操作体验。</li></ol> 
<p>总结：<br> 第一个方面，协助IT管理人员，进行企业当中的计算机及用户的一些参数的统一的自动部署，通过域中的组策略等管理手段实现批量和自动的参数部署，减轻IT管理人的工作难度及强度。<br> 利用权限管理的机制，有效对企业中资源进行访问控制（如文件共享服务器、打印机）供不同部门不同用户使用，对设备的权限进行控制。<br> 通过域和活动目录，实现企业的统一的身份验证，现在企业部署的应用程序越来越多，如果每套应用程序都有一套登录的账户系统，那么对用户来说，使用体验是极差的，每一套业务系统都要用户名和密码，每一次使用都要重复登录，但是如果拥有域和活动目录的一个功能的话，就可以使得应用程序使用活动目录来实现统一的身份验证及单点登录，不仅支持windows，如（Exchange，Sharepoint原生产品能实现单点登录），及其它第三方产品也可以再二次开发，也可以支持域。</p> 
<h4><a id="2_20"></a>2.域中的角色</h4> 
<ol><li>域控制器（Domain Controller，简称DC），每个企业可以有多台域控</li><li>域内的成员服务器，企业的服务器操作系统加入了域，如果域控是windows server 2012成员服务器3可以是win 2008，并没有强制要求版本相同，包括linux和mac都可以加入，但是非微软的计算机加入到域控可能再功能方面会受到一些局限性，可能需要应用第三方插件，才能够完成较复杂管理和监控任务。</li><li>域内的终端计算机，前面谈到微软的AD活动目录的数据库，它本质上是一个文件，文件是放在域控制器上的，默认保存于与控制器的C/windows/ntds目录当中，你打开AD数据库文件默认保存目录中<br> <img src="https://images2.imgbox.com/d6/4e/Mheu4MKB_o.png" alt="在这里插入图片描述"></li></ol> 
<ul><li>.dit活动目录的主数据库文件，文件容量不会很大，活动目录文件当中不会包含海量数据，哪怕上万PC，每个对象存储的数据 也是比较小，常见就是几百M。<br> 辅助文件 （事务日志、检查点文件）</li><li>配合处理域控由于特殊原因（断电、系统故障）造成用户要往活动目录数据时，还未来得及写入，就造成了故障，重启后，上一次写入的数据产生了丢失？</li><li>怎么处理呢？借助事务日志的文件，事务日志文件不会很大，每个事务日志文件按照顺序进行编号，当有一个写入请求时，写入请求再内存当中未来得急写入到主数据中，会先往事务日志当中去写入，事务日志较小，会很快，在事务日志当中，哪怕计算机断电重启，由检查点文件去记录上一次哪个日志哪个数据没有写入主数据文件，可以利用检查点文件数据写入的恢复，就可以确保域控制器的工作环境因为域控特殊原因，造成数据的丢失。</li></ul> 
<p>预留文件主要作用防止域控制器某种原因硬盘被写满，一旦域控制器被写满，它无法进行正常工作，所以，在硬盘写满前，通过预留文件功能，把一些数据写到预留文件中。</p> 
<p>AD数据库维护过程中必要时可进行服务启停、文件集重定向、脱机管理、备份及恢复等操作。</p> 
<h4><a id="3AD_34"></a>3.域之间AD数据库同步</h4> 
<p>AD数据库会定时或在发生改变时自动在DC之间相互同步复制，同步复制的频率和时间窗口可以配置和定义。<br> 企业当中，如果有三台域控制器，活动目录也有三份，三份应该是一模一样，如果管理员登录了一台域控，修改了参数，那么其它两台也会进行同步。<br> 域控之间的同步，可以实现高可用的实现，实现就是直接同步参数增量的变化。<br> <img src="https://images2.imgbox.com/99/c5/iEmnxAF2_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="4_39"></a>4.特殊的域控制器</h4> 
<p>只读域控制器（Read Only Domain Controller）</p> 
<ol><li>Rodc保存域控制器中AD数据库的只读副本</li><li>不允许在RODC本地对数据库做出更改操作</li><li>RODC适合部署在没有本地管理需求的远程分支机构</li></ol> 
<p>应用场景（使用非常普遍）<br> 企业规划了一个域，在一个偏远分支机构中，本地用户量不大，无IT管理员，但还是需要放置一个域控制器，可以改善用户的本地登录的体验，此时，使用其它城市域控制器活动目录同步到此分支的域控中，将其做成RODC，好处：如果域控被人非法登录，它是没有办法对相关数据进行改动，保证了安全，如果不是RODC，修改了域控的权限，那么就会反向的同步到其它活动目录，非常危险。<br> sqa<br> 很多企业，特别是在各地有一些工厂的一些公司，在分支部署的一些域控制器都是RODC，只会单向进行数据同步，只有登录总部域控制器才能进行修改操作。</p> 
<p>全局编录服务器（Global Category Server）</p> 
<ol><li>GC是一种特殊的域控制器，一个域至少部署一台</li><li>GC用于多域环境中和其它域进行数据同步（但并不是同步全部数据，通常需要同步的数据仅占AD数据库总量的5%~10%），以便优化Exchange server等应用的全局或跨域搜索的效率。</li></ol> 
<p>应用场景<br> <img src="https://images2.imgbox.com/19/a2/9knLBr24_o.png" alt="在这里插入图片描述"><br> 企业中部署了两个域，存在一个问题：由于域是管理的边界，在一个域的计算机的信息，默认不需要传递到其它域，所有的数据的同步只是在同一个域当中。</p> 
<p>GC的作用：可以在其它域数据同步时，筛选对象属性某一种进行选择，不需要同步全部数据。</p> 
<h4><a id="5_60"></a>5.域和活动目录的规划</h4> 
<p>需要结合企业的业务环境 和业务需求</p> 
<p>什么适合需要多域?<br> 一个域可以包含100万个对象，绝大多数企业在技术上只需要有一个域。</p> 
<p>出现以下需求情况时可能需要考虑多域的部署</p> 
<ol><li>IT管理政策上需要有分离或独立的IT管控边界</li><li>公司重组或合并等原因影响域的变化</li><li>域的改造和迁徙需要同时新旧域的并存</li></ol> 
<h4><a id="6_71"></a>6.多域的术语</h4> 
<p><img src="https://images2.imgbox.com/fd/db/O22oRpFY_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="7_73"></a>7.域间的信任关系</h4> 
<p>信任关系可实现跨域的身份验证和资源访问，如果域之间没有信任关系，每个域的用户只能访问本域中的资源，根据场景的不同，部分信任关系时默认存在的，部分时需要另行手工配置的。<br> <img src="https://images2.imgbox.com/6e/72/iUfiTyha_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="8_76"></a>8.什么是站点？</h4> 
<p>站点（site）是指同一个域内包含特定IP子网并与特定域控制器关联的网络，部署多个站点的目的是优化站点间DC的复制同步，同时使克服端能够和就近的DC优先通信，优化登录验证的操作。<br> <img src="https://images2.imgbox.com/c7/f7/0Ly6if8s_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="9_79"></a>9.域的规划建议</h4> 
<p>域的规划没有统一的标准，但建议尽可能简化，尽量的使用单域，没有特殊要求尽量使用单域，工作量较小。<br> 企业规模、网络带宽、IT管控界面、法律政治要求、公司并购计划是常见的考虑因素。</p> 
<p>企业域规划的一般建议：<br> 中小企业使用单域、总部下有分公司可使用父子域或单域多站点，集团下有多个独立的业务子公司使用单林多域。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b16b32ea1bfa1f02c857e107170a1a92/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android wifi连接和获取IP分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4ed876cf8056939fa187a8f43878893c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">以太网链路聚合（手工负载分担及LACP配置）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>