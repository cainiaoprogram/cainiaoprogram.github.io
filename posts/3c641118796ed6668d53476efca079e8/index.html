<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vagrant简介 (在virtualBox上安装虚拟机centos7) 创建和部署虚拟化开发环境 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vagrant简介 (在virtualBox上安装虚拟机centos7) 创建和部署虚拟化开发环境" />
<meta property="og:description" content="参考1
参考2
1. 什么是vagrant? 简单理解，就是可以通过Vagrant这个工具管理虚拟机，比如说想创建一个centos环境的虚拟机，不需要安装系统这么麻烦，通过vagrant可以快速创建
官方网址
Vagrant是一个基于Ruby的工具，用于创建和部署虚拟化开发环境。它 使用Oracle的开源VirtualBox虚拟化系统，使用 Chef创建自动化虚拟环境。我们可以使用它来干如下这些事：
建立和删除虚拟机
配置虚拟机运行参数
管理虚拟机运行状态
自动配置和安装开发环境
打包和分发虚拟机运行环境
​
Vagrant的运行，需要依赖某项具体的虚拟化技术，最常见的有VirtualBox以及VMWare两款，早期，Vagrant只支持VirtualBox，后来才加入了VMWare的支持。
为什么我们要选择Vagrant呢？因为它有跨平台、可移动、自动化部署无需人工参与等优点。
在Vagrant体系中，有个box(箱子)的概念，这优点类似于docker体系中的image(镜像)。基于同一个box，不同的人可以运行得到相同的内容。这个我们下文再详细说。
2. 安装虚拟机 vitualbox 使用vagrant首先需要安装虚拟机vitualbox(virtualbox),vitualbox安装这里就不介绍了。也可以使用vmware，不过vagrant&#43;vmware是要收费的。
2. 安装vagrant 去vagrant官网下载（vagrantup），根据系统选择安装版本，我这里选择的是windows 64位
3. 使用vagrant创建centos7 从vagrant首页“Find Boxes”进入，如下图，可以看到很多Vagrant Boxes，我现在需要的是centos7环境，找到对应centos/7 vagrant box进入
centos/7 vagrant box详情页中有使用说明，如下：
在本地创建一个目录用来存放centos7,我的目录是：D:\VirtualBox\centos7
打开powershell ，cd到centos7目录
执行命令：vagrant init centos/7 (初始化配置vagrantfile)
vagrant init centos/7 此命令会在当前目录下生成一个Vagrantfile文件
执行命令：vagrant up (启动虚拟机)
vagrant up 然后就等待下载安装咯，安装速度有点慢，毕竟是国外网络
安装成功后，可以在vitualbox中的虚拟机列表看到新安装的虚拟机
使用命令登录：vagrant ssh
vagrant ssh 当然也可以用其他第三方的连接工具。
默认登录进去的是 vagrant 用户。
所以执行有些命令的时候需要加 sudo，或者切换到 root 用户:
su root 默认 root 用户的密码为：vagrant" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3c641118796ed6668d53476efca079e8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-21T15:27:30+08:00" />
<meta property="article:modified_time" content="2021-12-21T15:27:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vagrant简介 (在virtualBox上安装虚拟机centos7) 创建和部署虚拟化开发环境</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://www.cnblogs.com/marshhu/p/11880784.html" rel="nofollow">参考1</a><br> <a href="https://www.cnblogs.com/hafiz/p/9175484.html" rel="nofollow">参考2</a></p> 
<h3><a id="1_vagrant_4"></a>1. 什么是vagrant?</h3> 
<p>简单理解，就是可以通过Vagrant这个工具管理虚拟机，比如说想创建一个centos环境的虚拟机，不需要安装系统这么麻烦，通过vagrant可以快速创建</p> 
<p><a href="https://www.vagrantup.com/" rel="nofollow">官方网址</a></p> 
<p>Vagrant是一个基于Ruby的工具，用于创建和部署虚拟化开发环境。它 使用Oracle的开源VirtualBox虚拟化系统，使用 Chef创建自动化虚拟环境。我们可以使用它来干如下这些事：</p> 
<p>建立和删除虚拟机<br> 配置虚拟机运行参数<br> 管理虚拟机运行状态<br> 自动配置和安装开发环境<br> 打包和分发虚拟机运行环境<br> ​<br> Vagrant的运行，需要依赖某项具体的虚拟化技术，最常见的有VirtualBox以及VMWare两款，早期，Vagrant只支持VirtualBox，后来才加入了VMWare的支持。</p> 
<p>为什么我们要选择Vagrant呢？因为它有<strong>跨平台、可移动、自动化部署无需人工参与</strong>等优点。</p> 
<p><img src="https://images2.imgbox.com/82/5a/0EJ65ZTA_o.png" alt="在这里插入图片描述"><br> 在Vagrant体系中，有个box(箱子)的概念，这优点类似于docker体系中的image(镜像)。基于同一个box，不同的人可以运行得到相同的内容。这个我们下文再详细说。</p> 
<h3><a id="2__vitualbox_25"></a>2. 安装虚拟机 vitualbox</h3> 
<p>使用vagrant首先需要安装虚拟机vitualbox(<a href="https://www.virtualbox.org" rel="nofollow">virtualbox</a>),vitualbox安装这里就不介绍了。也可以使用vmware，不过vagrant+vmware是要收费的。</p> 
<h3><a id="2_vagrant_29"></a>2. 安装vagrant</h3> 
<p>去vagrant官网下载（<a href="https://www.vagrantup.com/downloads.html" rel="nofollow">vagrantup</a>），根据系统选择安装版本，我这里选择的是windows 64位</p> 
<h3><a id="3_vagrantcentos7_33"></a>3. 使用vagrant创建centos7</h3> 
<p><img src="https://images2.imgbox.com/a2/6d/UftXiKvv_o.png" alt="在这里插入图片描述"></p> 
<p>从vagrant首页“Find Boxes”进入，如下图，可以看到很多Vagrant Boxes，我现在需要的是centos7环境，找到对应centos/7 vagrant box进入</p> 
<p><img src="https://images2.imgbox.com/18/2a/rTAZgBYW_o.png" alt="在这里插入图片描述"></p> 
<p>centos/7 vagrant box详情页中有使用说明，如下：</p> 
<p><img src="https://images2.imgbox.com/23/40/suyLVn4a_o.png" alt="在这里插入图片描述"><br> 在本地创建一个目录用来存放centos7,我的目录是：D:\VirtualBox\centos7</p> 
<p>打开powershell ，cd到centos7目录</p> 
<p>执行命令：vagrant init centos/7 (初始化配置vagrantfile)</p> 
<pre><code class="prism language-powershell">vagrant init centos<span class="token operator">/</span>7
</code></pre> 
<p>此命令会在当前目录下生成一个Vagrantfile文件<br> <img src="https://images2.imgbox.com/81/fc/WHvb6IOZ_o.png" alt="在这里插入图片描述"><br> 执行命令：vagrant up (启动虚拟机)</p> 
<pre><code class="prism language-powershell">vagrant up 
</code></pre> 
<p><img src="https://images2.imgbox.com/bc/19/3oHbXknA_o.png" alt="在这里插入图片描述"><br> 然后就等待下载安装咯，安装速度有点慢，毕竟是国外网络</p> 
<p>安装成功后，可以在vitualbox中的虚拟机列表看到新安装的虚拟机<br> <img src="https://images2.imgbox.com/5f/21/rtjRYW2L_o.png" alt="在这里插入图片描述"></p> 
<p>使用命令登录：vagrant ssh</p> 
<pre><code class="prism language-powershell">vagrant ssh
</code></pre> 
<p>当然也可以用其他第三方的连接工具。</p> 
<p>默认登录进去的是 vagrant 用户。</p> 
<p>所以执行有些命令的时候需要加 sudo，或者切换到 root 用户:</p> 
<pre><code class="prism language-powershell">su root
</code></pre> 
<p>默认 root 用户的密码为：vagrant</p> 
<h4><a id="_83"></a>安装过程中遇到的问题</h4> 
<h5><a id="1vagrant_up__84"></a>1.vagrant up 下载速度太慢，解决方法：</h5> 
<p>下载链接 https://cloud.centos.org/centos/7/vagrant/x86_64/images/CentOS-7-x86_64-Vagrant-2004_01.VirtualBox.box</p> 
<p>加载下载的镜像</p> 
<p>cd 到下载好的文件目录<br> 命令：</p> 
<pre><code class="prism language-powershell">vagrant box add centos<span class="token operator">/</span>7 CentOS<span class="token operator">-</span>7<span class="token operator">-</span>x86_64<span class="token operator">-</span>Vagrant<span class="token operator">-</span>2004_01<span class="token punctuation">.</span>VirtualBox<span class="token punctuation">.</span>box
</code></pre> 
<p>重新加载镜像</p> 
<pre><code class="prism language-powershell">vagrant up
</code></pre> 
<p>还可以设置第三方镜像</p> 
<p>下面的地址中下载你想要的镜像：</p> 
<p>http://www.vagrantbox.es/</p> 
<h5><a id="2Vagrant_up__108"></a>2.Vagrant up 出错，提示字符集不兼容?</h5> 
<p><img src="https://images2.imgbox.com/e3/a8/pGmUVxtl_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-powershell">D:<span class="token operator">/</span>Program Files<span class="token operator">/</span>Vagrant<span class="token operator">/</span>embedded<span class="token operator">/</span>gems<span class="token operator">/</span>2<span class="token punctuation">.</span>2<span class="token punctuation">.</span>19<span class="token operator">/</span>gems<span class="token operator">/</span>childprocess<span class="token operator">-</span>4<span class="token punctuation">.</span>1<span class="token punctuation">.</span>0<span class="token operator">/</span>lib<span class="token operator">/</span>childprocess<span class="token operator">/</span>windows<span class="token operator">/</span>process_builder<span class="token punctuation">.</span>rb:48:in `join': incompatible character encodings: GBK and UTF<span class="token operator">-</span>8 <span class="token punctuation">(</span>Encoding::CompatibilityError<span class="token punctuation">)</span>
</code></pre> 
<p>原因是 windows用户名为中文</p> 
<p>到VM VirtualBox &gt; 管理&gt; 全局设定里修改了默认虚拟机位置为无中文路径时，再去vagrant up即成功了<br> <img src="https://images2.imgbox.com/fb/dc/8aS6i0Hf_o.png" alt="在这里插入图片描述"><br> 成功<br> <img src="https://images2.imgbox.com/27/72/kq5Lj1z1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4e/53/oZMFxS4Y_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_Vagrant__Permission_denied_publickey_123"></a>3. Vagrant 使用中发生的 Permission denied publickey</h5> 
<p>vagrant@127.0.0.1: Permission denied (publickey,gssapi-keyex,gssapi-with-mic). 错误</p> 
<p>找到初始化目录下的 private_key 文件</p> 
<p><img src="https://images2.imgbox.com/6f/17/ym0wbqNB_o.png" alt="在这里插入图片描述"></p> 
<p>右键-&gt;属性-&gt;安全-&gt;高级</p> 
<p>新增当前用户完全控制权限</p> 
<p>删除其他没用的权限，可以直接禁用继承达到效果</p> 
<p>参照 https://blog.csdn.net/ai_0922/article/details/106366521</p> 
<p>权限修改成下面这样了之后点击 应用 -&gt; 确定 就完成了<br> <img src="https://images2.imgbox.com/98/9a/dnygsUoO_o.png" alt="在这里插入图片描述"></p> 
<p>我自己的问题是 wind10家庭版，没有策略组功能，同时又是安装在移动硬盘里面，后来安装到原生的硬盘里面，同时添加策略组功能就行<br> <img src="https://images2.imgbox.com/61/fc/QCxexw0Q_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4Win10_143"></a>4.Win10家庭版组策略打开方法</h5> 
<p>新建一个txt文档，复制下面命令，改为cmd,再用管理员权限运行</p> 
<pre><code class="prism language-powershell">@<span class="token function">echo</span> off

<span class="token function">pushd</span> <span class="token string">"%~dp0"</span>

<span class="token function">dir</span> <span class="token operator">/</span>b C:\Windows\servicing\Packages\Microsoft<span class="token operator">-</span>Windows<span class="token operator">-</span>GroupPolicy<span class="token operator">-</span>ClientExtensions<span class="token operator">-</span>Package~3<span class="token operator">*</span><span class="token punctuation">.</span>mum &gt;List<span class="token punctuation">.</span>txt

<span class="token function">dir</span> <span class="token operator">/</span>b C:\Windows\servicing\Packages\Microsoft<span class="token operator">-</span>Windows<span class="token operator">-</span>GroupPolicy<span class="token operator">-</span>ClientTools<span class="token operator">-</span>Package~3<span class="token operator">*</span><span class="token punctuation">.</span>mum &gt;&gt;List<span class="token punctuation">.</span>txt

<span class="token keyword">for</span> <span class="token operator">/</span>f <span class="token operator">%</span><span class="token operator">%</span>i in <span class="token punctuation">(</span><span class="token string">'findstr /i . List.txt 2^&gt;nul'</span><span class="token punctuation">)</span> <span class="token keyword">do</span> dism <span class="token operator">/</span>online <span class="token operator">/</span>norestart <span class="token operator">/</span><span class="token function">add-package</span>:<span class="token string">"C:\Windows\servicing\Packages\%%i"</span>

pause
</code></pre> 
<p>在运行–gpedit.msc启动组策略，成功了，如下图所示<br> <img src="https://images2.imgbox.com/cf/92/U4tTR8FZ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/2d/7c/rcrQvNbl_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/5e/46/MeDs1ytc_o.png" alt="在这里插入图片描述"></p> 
<p>改为禁用<br> <img src="https://images2.imgbox.com/11/45/XP4ntBmr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4_vagrant_171"></a>4. 以下是vagrant常见命令：</h3> 
<pre><code class="prism language-powershell">vagrant box list 查看目前已有的box
vagrant box add 新增加一个box
vagrant box update 更新指定box
vagrant box remove 删除指定box
vagrant box repackage 重新打包本地环境中指定的box

vagrant init 初始化配置vagrantfile
vagrant up 启动虚拟机
vagrant ssh ssh登录虚拟机
vagrant suspend 挂起虚拟机
vagrant reload 重启虚拟机
vagrant halt 关闭虚拟机
vagrant status 查看虚拟机状态
vagrant destroy 删除虚拟机
</code></pre> 
<h3><a id="5_Vagrant_190"></a>5. Vagrant高级功能</h3> 
<h4><a id="__191"></a>私有网络配置 防止映射的端口和应用端口不一致</h4> 
<p>默认情况下，VirtualBox 使用的是网络地址转换和端口转发的方式实现了本地系统和虚拟机地址的问题，如下图所示。<br> <img src="https://images2.imgbox.com/ea/e1/FmFSENGZ_o.png" alt="在这里插入图片描述"><br> 在实际使用过程中，对我们可能不太方便。</p> 
<p>举个例子，比如我们的虚拟机中装了很多东西，比如 MySQL 数据库，Redis 等等，在虚拟机内部是没有问题的，MySQL 数据库的端口默认是 3306，虚拟机可能给我们映射出来的端口就可能不是 3306 了，这对于我们再本机器的进行测试是及其不方便的。</p> 
<p>因此，我们不使用这种默认的方式，我们可以设置一个私有的 ip 实现本地系统和虚拟机系统之间的互通。（见下面的私有网络配置）</p> 
<p>打开 cmd 输入：</p> 
<pre><code class="prism language-powershell">ifconfig <span class="token operator">-</span>a
</code></pre> 
<p>找到 VirtualBox 的虚拟网卡地址：</p> 
<p>我的是：192.168.56.2</p> 
<p>编辑 Vagrantfile 文件，找到如下一行，去掉注释并修改 ip 为：</p> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token string">"private_network"</span><span class="token punctuation">,</span> ip: <span class="token string">"192.168.56.10"</span>
</code></pre> 
<p>其中 192.168.56 是固定的，10 也可以换成其他的，最大不要超过 255 就可以了！</p> 
<p>重新加载配置文件，并重启 vagrant:</p> 
<pre><code class="prism language-powershell">vagrant reload
</code></pre> 
<p>启动完成后，本地系统和虚拟机之间相互 Ping ，如果没有问题，说明网络配置就好了！</p> 
<p>例如，在虚拟机中 ping 本地的地址为：</p> 
<pre><code class="prism language-powershell">ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>103
</code></pre> 
<p>在本地 Ping 虚拟机的 ip (刚才配置文件中配置的那个 IP)</p> 
<pre><code class="prism language-powershell">ping 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>56<span class="token punctuation">.</span>10
</code></pre> 
<h4><a id="51__239"></a>5.1. 关于端口转发的配置方式有以下两种：</h4> 
<p>挂起虚拟机后，在virtualbox的设置里配置转发规则(缺点是:每次通过vagrant reload命令重启虚拟机以后失效)</p> 
<p>首先打开VirtualBox管理器：<br> <img src="https://images2.imgbox.com/9b/8d/3rXdvvdI_o.png" alt="在这里插入图片描述"><br> 然后设置转发规则：<br> <img src="https://images2.imgbox.com/a9/9a/Qw0X3xge_o.png" alt="在这里插入图片描述"><br> 添加对应的转发规则，然后点击OK保存，再使用命令vagrant up启动虚拟机。</p> 
<p>注意：一定不能使用vagrant reload命令，否则启动后规则丢失无效。</p> 
<pre><code class="prism language-powershell">vagrant up
</code></pre> 
<p>在vagrant的配置文件Vagrantfile里配置转发规则(永久有效，重启不会丢失)</p> 
<p>在配置文件里增加以下配置：</p> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network :forwarded_port<span class="token punctuation">,</span> guest: 80<span class="token punctuation">,</span> host: 8889
config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network :forwarded_port<span class="token punctuation">,</span> guest: 8888<span class="token punctuation">,</span> host: 9999
</code></pre> 
<h4><a id="52__263"></a>5.2 网络配置</h4> 
<p>vagrant支持以下三种网络配置：</p> 
<h5><a id="Forwarded_port_266"></a>Forwarded port(端口映射)</h5> 
<p>是指将宿主计算机的端口映射到虚拟机上的某个端口上，访问宿主计算机的该端口时，请求实际会被转发到虚拟机上指定的端口，配置文件设置语法为：</p> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network :forwarded_port<span class="token punctuation">,</span> guest: 80<span class="token punctuation">,</span> host: 8889
</code></pre> 
<p>优点：简单、容易理解、容易实现外网访问虚拟机。</p> 
<p>缺点：需映射很多端口时较麻烦、不支持在宿主机器上使用小于1024的端口来转发(如:不能使用SSL的443端口来进行https连接)。<br> 官网配置文档地址：https://www.vagrantup.com/docs/networking/forwarded_ports.html</p> 
<h5><a id="Private_network_277"></a>Private network(私有网络)</h5> 
<p>这种网络配置下，只有主机可以访问虚拟机，如果多个虚拟机设置定在同一个网段也可以相互访问，当然虚拟机也是可以访问外部网络的。配置语法如下：</p> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token string">"private_network"</span><span class="token punctuation">,</span> ip: <span class="token string">"192.168.50.4"</span> <span class="token comment"># 固定IP</span>
</code></pre> 
<p>还可以设置动态IP，配置语法如下：</p> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token string">"private_network"</span><span class="token punctuation">,</span> <span class="token function">type</span>: <span class="token string">"dhcp"</span>
</code></pre> 
<p>优点：安全，只能自己访问。</p> 
<p>缺点：因私有原有，所以其他团队成员不能和你协作。<br> 官网配置文档地址：https://www.vagrantup.com/docs/networking/private_network.html</p> 
<h5><a id="Public_network_294"></a>Public network(公有网络)</h5> 
<p>这种配置下，虚拟机享受实体机一样的待遇，一样的网络配置，vagrant 1.3版本以后这种配置也支持设定固定IP,配置语法如下：</p> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token string">"public_network"</span><span class="token punctuation">,</span> ip: <span class="token string">"192.168.50.4"</span>
</code></pre> 
<p>还可以设置桥接网卡，配置语法如下：</p> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token string">"public_network"</span><span class="token punctuation">,</span> bridge: <span class="token string">"en1: Wi-Fi (AirPort)"</span>
</code></pre> 
<p>优点：方便团队协作，别人可以访问你的虚拟机。</p> 
<p>缺点：需要有网络，有路由器分配IP</p> 
<p>官网配置文档地址：https://www.vagrantup.com/docs/networking/public_network.html</p> 
<h4><a id="53__310"></a>5.3 共享目录</h4> 
<p>有时候，我们希望虚拟机能和我们的主机共享一些文件夹，这时候在vagrant的配置文件中进行配置来达到共享目录的目的。</p> 
<p>vagrant的共享目录类型有：</p> 
<h5><a id="NFS_Mac_OS__315"></a>NFS (适用于Mac OS宿主机), 配置语法：</h5> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>synced_folder <span class="token string">"/hostPath"</span><span class="token punctuation">,</span> <span class="token string">"/guestPath"</span><span class="token punctuation">,</span> <span class="token function">type</span>: <span class="token string">"nfs"</span>
</code></pre> 
<p>官网配置文档地址：https://www.vagrantup.com/docs/synced-folders/nfs.html</p> 
<h5><a id="RSync___323"></a>RSync , 配置语法：</h5> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>synced_folder <span class="token string">"/hostPath"</span><span class="token punctuation">,</span> <span class="token string">"/guestPath"</span><span class="token punctuation">,</span> <span class="token function">type</span>: <span class="token string">"rsync"</span>
</code></pre> 
<p>官网配置文档地址：https://www.vagrantup.com/docs/synced-folders/rsync.html</p> 
<h5><a id="SMB_Windows__331"></a>SMB (适用于Windows宿主机), 配置语法：</h5> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>synced_folder <span class="token string">"/hostPath"</span><span class="token punctuation">,</span> <span class="token string">"/guestPath"</span><span class="token punctuation">,</span> <span class="token function">type</span>: <span class="token string">"smb"</span>
</code></pre> 
<p>官网配置文档地址：https://www.vagrantup.com/docs/synced-folders/smb.html</p> 
<h5><a id="VirtualBox_339"></a>VirtualBox</h5> 
<p>如果你的vagrant使用virtualbox的provider,这是默认的共享目录的类型。这些同步文件夹使用ValualBox共享文件夹系统将文件更改从客户机同步到主机，反之亦然。</p> 
<p>官网配置文档地址：https://www.vagrantup.com/docs/synced-folders/virtualbox.html</p> 
<p>注意：配置完成，我们重新启动虚拟机时发现报错了，这时候别慌，我们给出解决办法传送门。</p> 
<h4><a id="54__348"></a>5.4 虚拟机优化</h4> 
<h5><a id="_349"></a>自定义虚拟机名称</h5> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>provider <span class="token string">"virtualbox"</span> <span class="token keyword">do</span> <span class="token punctuation">|</span>vb<span class="token punctuation">|</span>
    vb<span class="token punctuation">.</span>name = <span class="token string">"ubuntu-hafiz"</span>
<span class="token keyword">end</span>
</code></pre> 
<h5><a id="_357"></a>自定义虚拟机主机名称</h5> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>hostname=<span class="token string">"hafiz"</span>
</code></pre> 
<h5><a id="CPU_363"></a>自定义虚拟机内存和CPU</h5> 
<pre><code class="prism language-powershell">config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>provider <span class="token string">"virtualbox"</span> <span class="token keyword">do</span> <span class="token punctuation">|</span>vb<span class="token punctuation">|</span>
  vb<span class="token punctuation">.</span>name = <span class="token string">"ubuntu-imooc"</span>
  vb<span class="token punctuation">.</span>memory = <span class="token string">"1024"</span>
  vb<span class="token punctuation">.</span>cpus = 2
<span class="token keyword">end</span>
</code></pre> 
<p>配置好后重启虚拟机，然后进入虚拟机：</p> 
<p>使用top命令然后再按1显示当前CPU个数:<br> <img src="https://images2.imgbox.com/d2/73/YYzqRfwh_o.png" alt="在这里插入图片描述"></p> 
<p>使用free -m命令显示当前虚拟机内存:<br> <img src="https://images2.imgbox.com/dc/f2/MGT3GexY_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="55__380"></a>5.5 打包分发</h4> 
<p>​ 　　当我们基于一个box启动一个虚拟机以后，我们在里面部署了专属自己的环境，那这个时候我们想要把自己的这套配置好的环境共享给别人怎么办呢？答案是将虚拟机打包分发。命令如下：</p> 
<pre><code class="prism language-powershell">vagrant package <span class="token punctuation">[</span><span class="token operator">--</span>output new_box_name<span class="token punctuation">]</span>
</code></pre> 
<p>新生成的box名称是选填的，默认为package.box。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/560bb8851bb5e897f8d845ccc53aa3e9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">file ‘/grub/i386-pc/normal.mod‘ not found.解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/facb417875ed7398acd763c7fced211f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">yolov5转onnx，c&#43;&#43;调用完美复现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>