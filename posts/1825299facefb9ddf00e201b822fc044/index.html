<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Windows环境使用 PyInstaller 打包python  .py文件 安装和使用教程（保姆级别-小白版） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Windows环境使用 PyInstaller 打包python  .py文件 安装和使用教程（保姆级别-小白版）" />
<meta property="og:description" content="看了大多数文章，对于这个问题的描述 都是介绍不完整，没有展示结果。
一下记录我操作的完整过程供参考：
1，CMD安装环境：
pip install pyinstaller
执行过程：
C:\WINDOWS\system32&gt;pip install pyinstaller Collecting pyinstaller Downloading pyinstaller-4.0.tar.gz (3.5 MB) |████████████████████████████████| 3.5 MB 915 kB/s Installing build dependencies ... done Getting requirements to build wheel ... done Preparing wheel metadata ... done Collecting altgraph Downloading altgraph-0.17-py2.py3-none-any.whl (21 kB) Collecting pyinstaller-hooks-contrib&gt;=2020.6 Downloading pyinstaller_hooks_contrib-2020.9-py2.py3-none-any.whl (163 kB) |████████████████████████████████| 163 kB 328 kB/s Requirement already satisfied: pywin32-ctypes&gt;=0.2.0; sys_platform == &#34;win32&#34; in d:\users\tianya\anaconda3\lib\site-packages (from pyinstaller) (0.2.0) Requirement already satisfied: setuptools in d:\users\tianya\anaconda3\lib\site-packages (from pyinstaller) (49." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1825299facefb9ddf00e201b822fc044/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-23T10:05:07+08:00" />
<meta property="article:modified_time" content="2020-10-23T10:05:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Windows环境使用 PyInstaller 打包python  .py文件 安装和使用教程（保姆级别-小白版）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>看了大多数文章，对于这个问题的描述 都是介绍不完整，没有展示结果。</p> 
<p>一下记录我操作的完整过程供参考：</p> 
<p>1，CMD安装环境：</p> 
<p><span style="color:#f33b45;">pip install pyinstaller</span></p> 
<p>执行过程：</p> 
<pre><code>C:\WINDOWS\system32&gt;pip install pyinstaller
Collecting pyinstaller
  Downloading pyinstaller-4.0.tar.gz (3.5 MB)
     |████████████████████████████████| 3.5 MB 915 kB/s
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
    Preparing wheel metadata ... done
Collecting altgraph
  Downloading altgraph-0.17-py2.py3-none-any.whl (21 kB)
Collecting pyinstaller-hooks-contrib&gt;=2020.6
  Downloading pyinstaller_hooks_contrib-2020.9-py2.py3-none-any.whl (163 kB)
     |████████████████████████████████| 163 kB 328 kB/s
Requirement already satisfied: pywin32-ctypes&gt;=0.2.0; sys_platform == "win32" in d:\users\tianya\anaconda3\lib\site-packages (from pyinstaller) (0.2.0)
Requirement already satisfied: setuptools in d:\users\tianya\anaconda3\lib\site-packages (from pyinstaller) (49.2.0.post20200714)
Collecting pefile&gt;=2017.8.1; sys_platform == "win32"
  Downloading pefile-2019.4.18.tar.gz (62 kB)
     |████████████████████████████████| 62 kB 103 kB/s
Requirement already satisfied: future in d:\users\tianya\anaconda3\lib\site-packages (from pefile&gt;=2017.8.1; sys_platform == "win32"-&gt;pyinstaller) (0.18.2)
Building wheels for collected packages: pyinstaller, pefile
  Building wheel for pyinstaller (PEP 517) ... done
  Created wheel for pyinstaller: filename=pyinstaller-4.0-py3-none-any.whl size=2789243 sha256=1cf5c252709de68ffd58576012ffca2943196a6880bccdbb500e8733141954bf
  Stored in directory: c:\users\tianya\appdata\local\pip\cache\wheels\9b\28\8f\f51ae22c4391bbeb36c8fdc68203b0c094445b4db824a6ab7d
  Building wheel for pefile (setup.py) ... done
  Created wheel for pefile: filename=pefile-2019.4.18-py3-none-any.whl size=60827 sha256=6c7d450e986f951c3740525c39fb845d8adcf78c619c12d09d65aea54c10d0d8
  Stored in directory: c:\users\tianya\appdata\local\pip\cache\wheels\42\52\d5\9550bbfb9eeceaf0f19db1cf651cc8ba41d3bcf8b4d20e4279
Successfully built pyinstaller pefile
Installing collected packages: altgraph, pyinstaller-hooks-contrib, pefile, pyinstaller
Successfully installed altgraph-0.17 pefile-2019.4.18 pyinstaller-4.0 pyinstaller-hooks-contrib-2020.9</code></pre> 
<p>安装成功，接下来进行下一步。</p> 
<p>2.打包文件：</p> 
<p>我的测试程序是简单的opecv人脸识别测试文件，使用命令执行打包为.EXE </p> 
<p><span style="color:#f33b45;">命令为：pyinstaller -F  OpenCV-Python-faces.py </span></p> 
<p><span style="color:#f33b45;">以下是执行过程：</span></p> 
<pre><code>E:\fish AI\py--exe-测试&gt;pyinstaller -F  OpenCV-Python-faces.py
151 INFO: PyInstaller: 4.0
151 INFO: Python: 3.8.3 (conda)
153 INFO: Platform: Windows-10-10.0.18362-SP0
181 INFO: wrote E:\fish AI\py--exe-测试\OpenCV-Python-faces.spec
190 INFO: UPX is not available.
205 INFO: Extending PYTHONPATH with paths
['E:\\fish AI\\py--exe-测试', 'E:\\fish AI\\py--exe-测试']
301 INFO: checking Analysis
302 INFO: Building Analysis because Analysis-00.toc is non existent
303 INFO: Initializing module dependency graph...
320 INFO: Caching module graph hooks...
342 INFO: Analyzing base_library.zip ...
10645 INFO: Processing pre-find module path hook distutils from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\pre_find_module_path\\hook-distutils.py'.
10647 INFO: distutils: retargeting to non-venv dir 'd:\\users\\tianya\\anaconda3\\lib'
20433 INFO: Caching module dependency graph...
20797 INFO: running Analysis Analysis-00.toc
20915 INFO: Adding Microsoft.Windows.Common-Controls to dependent assemblies of final executable
  required by d:\users\tianya\anaconda3\python.exe
22647 INFO: Analyzing E:\fish AI\py--exe-测试\OpenCV-Python-faces.py
27254 INFO: Processing pre-find module path hook site from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\pre_find_module_path\\hook-site.py'.
27255 INFO: site: retargeting to fake-dir 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\fake-modules'
30679 INFO: Processing pre-safe import module hook setuptools.extern.six.moves from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\pre_safe_import_module\\hook-setuptools.extern.six.moves.py'.
55850 INFO: Processing module hooks...
55850 INFO: Loading module hook 'hook-cv2.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\stdhooks'...
55874 INFO: Loading module hook 'hook-pycparser.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\stdhooks'...
55876 INFO: Loading module hook 'hook-pytest.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\stdhooks'...
61122 INFO: Loading module hook 'hook-distutils.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
61125 INFO: Loading module hook 'hook-encodings.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
61300 INFO: Loading module hook 'hook-importlib_metadata.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
61337 INFO: Loading module hook 'hook-lib2to3.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
61564 INFO: Loading module hook 'hook-numpy.core.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
61803 INFO: MKL libraries found when importing numpy. Adding MKL to binaries
61833 INFO: Loading module hook 'hook-numpy.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
61835 INFO: Loading module hook 'hook-packaging.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
61838 INFO: Loading module hook 'hook-pkg_resources.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
63761 INFO: Processing pre-safe import module hook win32com from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\pre_safe_import_module\\hook-win32com.py'.
64718 WARNING: Hidden import "pkg_resources.py2_warn" not found!
65085 INFO: Processing pre-safe import module hook six.moves from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\pre_safe_import_module\\hook-six.moves.py'.
65210 WARNING: Hidden import "pkg_resources.markers" not found!
65213 INFO: Excluding import '__main__'
65216 INFO:   Removing import of __main__ from module pkg_resources
65217 INFO: Loading module hook 'hook-pygments.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
70843 INFO: Loading module hook 'hook-PyQt5.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
152862 WARNING: Hidden import "PyQt5.sip" not found!
152862 INFO: Loading module hook 'hook-PyQt5.QtCore.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
153315 INFO: Loading module hook 'hook-PyQt5.QtGui.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
153737 INFO: Loading module hook 'hook-scipy.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
153750 INFO: Loading module hook 'hook-setuptools.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
d:\users\tianya\anaconda3\lib\site-packages\setuptools\distutils_patch.py:25: UserWarning: Distutils was imported before Setuptools. This usage is discouraged and may exhibit undesirable behaviors or errors. Please use Setuptools' objects directly or at least import Setuptools first.
  warnings.warn(
155756 INFO: Loading module hook 'hook-sysconfig.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
155759 INFO: Loading module hook 'hook-wcwidth.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
155770 INFO: Loading module hook 'hook-xml.dom.domreg.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
155772 INFO: Loading module hook 'hook-xml.etree.cElementTree.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
155773 INFO: Loading module hook 'hook-xml.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
155775 INFO: Loading module hook 'hook-_tkinter.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
156283 INFO: checking Tree
156283 INFO: Building Tree because Tree-00.toc is non existent
156284 INFO: Building Tree Tree-00.toc
156582 INFO: checking Tree
156582 INFO: Building Tree because Tree-01.toc is non existent
156583 INFO: Building Tree Tree-01.toc
156622 INFO: Loading module hook 'hook-pythoncom.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\stdhooks'...
157882 INFO: Loading module hook 'hook-pywintypes.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\stdhooks'...
159128 INFO: Loading module hook 'hook-win32com.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\_pyinstaller_hooks_contrib\\hooks\\stdhooks'...
d:\users\tianya\anaconda3\lib\site-packages\win32com\client\makepy.py:369: SyntaxWarning: "is not" with a literal. Did you mean "!="?
  if path is not '' and not os.path.exists(path):
160981 INFO: Loading module hook 'hook-PIL.Image.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
162151 INFO: Loading module hook 'hook-PIL.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
162155 INFO: Excluding import 'PyQt5'
162159 INFO:   Removing import of PyQt5.QtCore from module PIL.ImageQt
162160 INFO:   Removing import of PyQt5.QtGui from module PIL.ImageQt
162162 INFO: Import to be excluded not found: 'FixTk'
162163 INFO: Excluding import 'tkinter'
162168 INFO:   Removing import of tkinter from module PIL.ImageTk
162169 INFO: Import to be excluded not found: 'PySide'
162169 INFO: Import to be excluded not found: 'PyQt4'
162170 INFO: Loading module hook 'hook-PIL.SpiderImagePlugin.py' from 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks'...
162176 INFO: Import to be excluded not found: 'FixTk'
162177 INFO: Excluding import 'tkinter'
162276 INFO: Looking for ctypes DLLs
162502 INFO: Analyzing run-time hooks ...
162517 INFO: Including run-time hook 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\rthooks\\pyi_rth__tkinter.py'
162520 INFO: Including run-time hook 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\rthooks\\pyi_rth_multiprocessing.py'
162527 INFO: Including run-time hook 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\rthooks\\pyi_rth_pkgres.py'
162531 INFO: Including run-time hook 'd:\\users\\tianya\\anaconda3\\lib\\site-packages\\PyInstaller\\hooks\\rthooks\\pyi_rth_win32comgenpy.py'
162566 INFO: Looking for dynamic libraries
163227 WARNING: lib not found: msmpi.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_blacs_msmpi_lp64.dll
163328 WARNING: lib not found: pgf90rtl.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_pgi_thread.dll
163334 WARNING: lib not found: pgf90.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_pgi_thread.dll
163340 WARNING: lib not found: pgc14.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_pgi_thread.dll
163449 WARNING: lib not found: impi.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_blacs_intelmpi_ilp64.dll
163681 WARNING: lib not found: mpich2mpi.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_blacs_mpich2_lp64.dll
163706 WARNING: lib not found: msmpi.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_blacs_msmpi_ilp64.dll
164248 WARNING: lib not found: mpich2mpi.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_blacs_mpich2_ilp64.dll
164307 WARNING: lib not found: impi.dll dependency of d:\users\tianya\anaconda3\Library\bin\mkl_blacs_intelmpi_lp64.dll
167592 INFO: Looking for eggs
167592 INFO: Using Python library d:\users\tianya\anaconda3\python38.dll
167593 INFO: Found binding redirects:
[]
167612 INFO: Warnings written to E:\fish AI\py--exe-测试\build\OpenCV-Python-faces\warn-OpenCV-Python-faces.txt
167908 INFO: Graph cross-reference written to E:\fish AI\py--exe-测试\build\OpenCV-Python-faces\xref-OpenCV-Python-faces.html
168024 INFO: checking PYZ
168024 INFO: Building PYZ because PYZ-00.toc is non existent
168025 INFO: Building PYZ (ZlibArchive) E:\fish AI\py--exe-测试\build\OpenCV-Python-faces\PYZ-00.pyz
171164 INFO: Building PYZ (ZlibArchive) E:\fish AI\py--exe-测试\build\OpenCV-Python-faces\PYZ-00.pyz completed successfully.
171223 INFO: checking PKG
171224 INFO: Building PKG because PKG-00.toc is non existent
171224 INFO: Building PKG (CArchive) PKG-00.pkg
316592 INFO: Building PKG (CArchive) PKG-00.pkg completed successfully.
316646 INFO: Bootloader d:\users\tianya\anaconda3\lib\site-packages\PyInstaller\bootloader\Windows-64bit\run.exe
316646 INFO: checking EXE
316646 INFO: Building EXE because EXE-00.toc is non existent
316647 INFO: Building EXE from EXE-00.toc
316647 INFO: Appending archive to EXE E:\fish AI\py--exe-测试\dist\OpenCV-Python-faces.exe
317460 INFO: Building EXE from EXE-00.toc completed successfully.</code></pre> 
<p>可以看见 在编译的过程中提示了很多错误信息，（先不管他）。但是后面提示还是编译成功。</p> 
<p>我们现在去查看目录：</p> 
<p><img alt="" height="212" src="https://images2.imgbox.com/8f/ea/dlCEOS0F_o.png" width="864"></p> 
<p>进入dist 目录</p> 
<p><img alt="" height="137" src="https://images2.imgbox.com/d8/ef/X7IGPM43_o.png" width="480"></p> 
<p> </p> 
<p>可以看见在此生成了OpenCV-Python-faces.exe 文件，这就是我们需要的结果了。</p> 
<p>（好多文章描述到这里就结束了。）</p> 
<p>我们继续：</p> 
<p>双击打开OpenCV-Python-faces.exe 文件，就像我们执行其他Windows程序一样。</p> 
<p>你会看见弹出来CMD命令界面，</p> 
<p><img alt="" height="181" src="https://images2.imgbox.com/da/da/GuJrLj3y_o.png" width="1028"></p> 
<p>停留一会，然后就关闭了。</p> 
<p><strong><span style="color:#ffbb66;">------------问题出现了，怎么回事呢？</span></strong></p> 
<p><span style="color:#ffbb66;"><strong>分析如下：</strong></span></p> 
<p><span style="color:#f33b45;"><strong>1.首先文件打包是成功了。</strong></span></p> 
<p><span style="color:#f33b45;"><strong>2.CMD执行界面已经打开，但是过一会就退出了。（是不是它在等待什么指令呢）</strong></span></p> 
<p><span style="color:#f33b45;"><strong>好，现在我们回到我们的python程序分析，我们做的是简单的opencv人脸识别程序。</strong></span></p> 
<p>识别原理如下：</p> 
<p>利用opencv打开摄像头----捕获视频--转为图片---识别图片--比对人脸--画出人脸--展示结果。</p> 
<p>问题出现在比对环节。</p> 
<p>我们没有比对的数据。</p> 
<p>好，我们现在复制opecv官方的提供的人脸和眼睛数据到目录下：</p> 
<p>haarcascade_eye.xml</p> 
<p>haarcascade_frontalface_default.xml</p> 
<p>复制完成：</p> 
<p><img alt="" height="160" src="https://images2.imgbox.com/13/11/e7iztfMU_o.png" width="454"></p> 
<p>OK ，现在我们再次执行</p> 
<p>结果如下：</p> 
<p><img alt="" height="481" src="https://images2.imgbox.com/8d/a8/VtFh4B7r_o.png" width="1127"></p> 
<p> </p> 
<p>完美，（请无视本人照片▲）</p> 
<p>参考链接：<a href="https://pyinstaller.readthedocs.io/en/stable/usage.html" rel="nofollow">https://pyinstaller.readthedocs.io/en/stable/usage.html</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c9414d27ccbd30ce7c8418fe5dcb8d8e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">H5 画布解决跨域问题，画布保存为图片显示在页面上</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cb778a8cb5bce9c03174c110ab19f0f4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">音频通讯协议</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>