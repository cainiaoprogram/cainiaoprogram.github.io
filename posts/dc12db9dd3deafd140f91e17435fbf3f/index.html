<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>qt 工具栏下加文字 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="qt 工具栏下加文字" />
<meta property="og:description" content=" 我擦后面看了一下Qt自带这种样式的感觉自己SB了：
接口为：
ui.toolBar-&gt;setToolButtonStyle(Qt::ToolButtonTextUnderIcon);
后面的都是废话，不用再看了。
在进行软件界面设计时，用户反应Qt默认的工具栏不是太美观，希望能在工具栏下面加上文字这样比较直观，效果图如下：
思路 去看看qt默认的Action不支持这样的样式，之后想自己定制一下。经过研究得到大概的思路：将Action替换为QToolButton；需要考虑的是有些Action不在本模块new出来，即在复用其他已经有的模块功能时，其他模块将Action封装到模块中了，需要通过GetxxxAction来获取Action，然后将Action加在工具栏上，之后发现QToolButton有一个setDefaultAction接口可以将Action和ToolButton关联起来，这样好像这个就不是问题了。还有一个问题就是qt一般加Action都在QtDesigner进行添加这样比较方便，而且菜单栏里面用的Action和工具栏里面用的是同一个，现在菜单栏里面用Action，工具栏中用ToolButton，那很多代码都要写两遍，如信号槽，代码会变得很冗余。
实现 确定了思路就去实现，具体的方法为：Action的添加跟平时一样在QtDesigner中新建并添加到菜单栏中，之后工具栏中不要添加。在代码中添加InitToolbar函数里面的实现为
QToolButton* open_tool_bar = new QToolButton();
open_tool_bar-&gt;setDefaultAction(ui.actionOpenFile);
open_tool_bar-&gt;setToolButtonStyle(Qt::ToolButtonTextUnderIcon);
ui.toolBar-&gt;addWidget(open_tool_bar);
QToolButton* save_tool_bar = new QToolButton();
save_tool_bar-&gt;setDefaultAction(ui.actionSaveFile);
save_tool_bar-&gt;setToolButtonStyle(Qt::ToolButtonTextUnderIcon);
ui.toolBar-&gt;addWidget(save_tool_bar);
ui.toolBar-&gt;addSeparator();
...
这样做的好处是屏蔽工具栏和菜单栏使用不同的对象带来的差异性，其他地方只用管Action就好，不用管ToolButton。这是我发现代码量最小，最好实现，而且还达到需求的方式。最后实现效果为：
效果还是不错的。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/dc12db9dd3deafd140f91e17435fbf3f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-08T21:24:30+08:00" />
<meta property="article:modified_time" content="2020-03-08T21:24:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">qt 工具栏下加文字</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-indent:33px;">我擦后面看了一下Qt自带这种样式的感觉自己SB了：</p> 
<p style="text-indent:33px;">接口为：</p> 
<p style="text-indent:33px;"><strong>ui.toolBar-&gt;setToolButtonStyle(Qt::ToolButtonTextUnderIcon);</strong></p> 
<p style="text-indent:33px;">后面的都是废话，不用再看了。</p> 
<p style="text-indent:33px;">在进行软件界面设计时，用户反应Qt默认的工具栏不是太美观，希望能在工具栏下面加上文字这样比较直观，效果图如下：</p> 
<p style="text-align:center;"><img alt="" height="104" src="https://images2.imgbox.com/9d/1f/E01Cacy1_o.png" width="288"></p> 
<h2>思路</h2> 
<p style="text-indent:33px;">去看看qt默认的Action不支持这样的样式，之后想自己定制一下。经过研究得到大概的思路：将Action替换为QToolButton；需要考虑的是有些Action不在本模块new出来，即在复用其他已经有的模块功能时，其他模块将Action封装到模块中了，需要通过GetxxxAction来获取Action，然后将Action加在工具栏上，之后发现QToolButton有一个setDefaultAction接口可以将Action和ToolButton关联起来，这样好像这个就不是问题了。还有一个问题就是qt一般加Action都在QtDesigner进行添加这样比较方便，而且菜单栏里面用的Action和工具栏里面用的是同一个，现在菜单栏里面用Action，工具栏中用ToolButton，那很多代码都要写两遍，如信号槽，代码会变得很冗余。</p> 
<h2>实现</h2> 
<p style="text-indent:33px;">确定了思路就去实现，具体的方法为：Action的添加跟平时一样在QtDesigner中新建并添加到菜单栏中，之后工具栏中不要添加。在代码中添加InitToolbar函数里面的实现为</p> 
<table border="1" cellpadding="1" cellspacing="1"><tbody><tr><td> <p>QToolButton* open_tool_bar = new QToolButton();<br> open_tool_bar-&gt;setDefaultAction(ui.actionOpenFile);<br> open_tool_bar-&gt;setToolButtonStyle(Qt::ToolButtonTextUnderIcon);<br> ui.toolBar-&gt;addWidget(open_tool_bar);</p> <p>QToolButton* save_tool_bar = new QToolButton();<br> save_tool_bar-&gt;setDefaultAction(ui.actionSaveFile);<br> save_tool_bar-&gt;setToolButtonStyle(Qt::ToolButtonTextUnderIcon);<br> ui.toolBar-&gt;addWidget(save_tool_bar);</p> <p>ui.toolBar-&gt;addSeparator();</p> <p>...</p> </td></tr></tbody></table> 
<p style="text-indent:33px;"> 这样做的好处是屏蔽工具栏和菜单栏使用不同的对象带来的差异性，其他地方只用管Action就好，不用管ToolButton。这是我发现代码量最小，最好实现，而且还达到需求的方式。最后实现效果为：</p> 
<p style="text-align:center;"><img alt="" height="90" src="https://images2.imgbox.com/62/27/R8b1N5x9_o.png" width="314"></p> 
<p>效果还是不错的。 </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/755af004a666910ff4c8852535e64972/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">nginx代理不生效问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/781420b29e60daa87c91c69f65f2fc2f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IJCAI2018|分层时空LSTM在位置预测中的应用(HST-LSTM)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>