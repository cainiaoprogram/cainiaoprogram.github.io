<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>c&#43;&#43; 输入文件流ifstream用法详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="c&#43;&#43; 输入文件流ifstream用法详解" />
<meta property="og:description" content="文章目录 c&#43;&#43; 输入文件流`ifstream`用法详解输入流的继承关系：C&#43;&#43; 使用标准库类来处理面向流的输入和输出：成员函数Public member functions1. **`(constructor)`**2. **`ifstream::open`**3. **`ifstream:: is_open`**4. **`ifstream:: close`**5. **`ifstream:: rdbuf`**6. **`ifstream:: operator =`** Public member functions `inherited from istream`7. **`std::istream::operator&gt;&gt;`**8. **`istream::gcount`**9. **`istream::get`**10. **`istream::getline`**11. **`istream::ignore`**12. **`istream::peek`**13. **`istream::read`**14. **`istream::putback`**15. **`istream::unget`**16. **`istream::tellg`**17. **`istream::seekg`** Public member functions `inherited from ios`18. **`ios::good`**19. **`ios::operator!`**20. **`ios::operator bool`** c&#43;&#43; 输入文件流ifstream用法详解 输入流的继承关系： ios_base &lt;- ios &lt;- istream &lt;- ifstream C&#43;&#43; 使用标准库类来处理面向流的输入和输出： iostream 处理控制台 IOfstream 处理命名文件 IOstringstream 完成内存 string 的IO 每个IO 对象都维护一组条件状态 flags (eofbit, failbit and badbit)，用来指出此对象上是否可以进行 IO 操作。如果遇到错误—例如输入流遇到了文件末尾，则对象的状态变为是失效，所有的后续输入操作都不能执行，直到错误纠正。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/071fd90562e1860f164202c61d61b862/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-21T14:27:07+08:00" />
<meta property="article:modified_time" content="2022-04-21T14:27:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">c&#43;&#43; 输入文件流ifstream用法详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#c_ifstream_1" rel="nofollow">c++ 输入文件流`ifstream`用法详解</a></li><li><ul><li><a href="#_2" rel="nofollow">输入流的继承关系：</a></li><li><a href="#C__10" rel="nofollow">C++ 使用标准库类来处理面向流的输入和输出：</a></li><li><ul><li><a href="#_27" rel="nofollow">成员函数</a></li><li><ul><li><a href="#Public_member_functions_28" rel="nofollow">Public member functions</a></li><li><a href="#1_constructor_29" rel="nofollow">1. **`(constructor)`**</a></li><li><a href="#2_ifstreamopen_40" rel="nofollow">2. **`ifstream::open`**</a></li><li><a href="#3_ifstream_is_open_62" rel="nofollow">3. **`ifstream:: is_open`**</a></li><li><a href="#4_ifstream_close_70" rel="nofollow">4. **`ifstream:: close`**</a></li><li><a href="#5_ifstream_rdbuf_76" rel="nofollow">5. **`ifstream:: rdbuf`**</a></li><li><a href="#6_ifstream_operator__84" rel="nofollow">6. **`ifstream:: operator =`**</a></li></ul> 
    </li><li><a href="#Public_member_functions_inherited_from_istream_93" rel="nofollow">Public member functions `inherited from istream`</a></li><li><ul><li><a href="#7_stdistreamoperator_94" rel="nofollow">7. **`std::istream::operator&gt;&gt;`**</a></li><li><a href="#8_istreamgcount_123" rel="nofollow">8. **`istream::gcount`**</a></li><li><a href="#9_istreamget_132" rel="nofollow">9. **`istream::get`**</a></li><li><a href="#10_istreamgetline_178" rel="nofollow">10. **`istream::getline`**</a></li><li><a href="#11_istreamignore_227" rel="nofollow">11. **`istream::ignore`**</a></li><li><a href="#12_istreampeek_234" rel="nofollow">12. **`istream::peek`**</a></li><li><a href="#13_istreamread_242" rel="nofollow">13. **`istream::read`**</a></li><li><a href="#14_istreamputback_273" rel="nofollow">14. **`istream::putback`**</a></li><li><a href="#15_istreamunget_282" rel="nofollow">15. **`istream::unget`**</a></li><li><a href="#16_istreamtellg_290" rel="nofollow">16. **`istream::tellg`**</a></li><li><a href="#17_istreamseekg_301" rel="nofollow">17. **`istream::seekg`**</a></li></ul> 
    </li><li><a href="#Public_member_functions_inherited_from_ios_319" rel="nofollow">Public member functions `inherited from ios`</a></li><li><ul><li><a href="#18_iosgood_320" rel="nofollow">18. **`ios::good`**</a></li><li><a href="#19_iosoperator_338" rel="nofollow">19. **`ios::operator!`**</a></li><li><a href="#20_iosoperator_bool_354" rel="nofollow">20. **`ios::operator bool`**</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="c_ifstream_1"></a>c++ 输入文件流<code>ifstream</code>用法详解</h2> 
<h3><a id="_2"></a>输入流的继承关系：</h3> 
<pre><code class="prism language-cpp">ios_base <span class="token operator">&lt;</span><span class="token operator">-</span> ios <span class="token operator">&lt;</span><span class="token operator">-</span> istream <span class="token operator">&lt;</span><span class="token operator">-</span> ifstream
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/ff/hlU6xQxR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="C__10"></a>C++ 使用标准库类来处理面向流的输入和输出：</h3> 
<ul><li><code>iostream</code> 处理控制台 IO</li><li><code>fstream</code> 处理命名文件 IO</li><li><code>stringstream</code> 完成内存 string 的IO</li></ul> 
<p>每个IO 对象都维护一组条件状态 flags (eofbit, failbit and badbit)，用来指出此对象上是否可以进行 IO 操作。如果遇到错误—例如输入流遇到了文件末尾，则对象的状态变为是失效，所有的后续输入操作都不能执行，直到错误纠正。</p> 
<hr> 
<p>头文件 <code>&lt;fstream&gt;</code>包含的多个文件流类，这里列出常用的4个：</p> 
<ul><li><code>ifstream</code> Input file stream class (class )<a href="http://www.cplusplus.com/reference/fstream/ifstream/" rel="nofollow">链接</a></li><li><code>ofstream</code> Output file stream (class )<a href="http://www.cplusplus.com/reference/fstream/ofstream/" rel="nofollow">链接</a></li><li><code>fstream</code> Input/output file stream class (class )<a href="http://www.cplusplus.com/reference/fstream/fstream/" rel="nofollow">链接</a><br> filebuf File stream buffer (class )<a href="http://www.cplusplus.com/reference/fstream/filebuf/" rel="nofollow">链接</a></li></ul> 
<h4><a id="_27"></a>成员函数</h4> 
<h5><a id="Public_member_functions_28"></a>Public member functions</h5> 
<h5><a id="1_constructor_29"></a>1. <strong><code>(constructor)</code></strong></h5> 
<ul><li>第一种不绑定文件，<code>后续用open()</code> 绑定。</li><li>第二种<code>绑定文件 filename</code> ，读取模式默认参数为 <code>ios_base::in</code>可以省略。</li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>	<span class="token function">ifstream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">initialization</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>	
<span class="token keyword">explicit</span> <span class="token function">ifstream</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> filename<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>openmode mode <span class="token operator">=</span> ios_base<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">explicit</span> <span class="token function">ifstream</span> <span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>openmode mode <span class="token operator">=</span> ios_base<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2_ifstreamopen_40"></a>2. <strong><code>ifstream::open</code></strong></h5> 
<p><strong>打开文件<code>filename</code>，模式默认 <code>ios_base::in</code></strong></p> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">open</span> <span class="token punctuation">(</span><span class="token keyword">const</span>   <span class="token keyword">char</span><span class="token operator">*</span> filename<span class="token punctuation">,</span>  ios_base<span class="token double-colon punctuation">::</span>openmode mode <span class="token operator">=</span> ios_base<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">open</span> <span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> filename<span class="token punctuation">,</span>  ios_base<span class="token double-colon punctuation">::</span>openmode mode <span class="token operator">=</span> ios_base<span class="token double-colon punctuation">::</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>函数参数：</strong></p> 
<ul><li><code>filename</code> 要打开文件的文件名</li><li><code>mode</code> 打开文件的方式</li><li></ul> 
<table><thead><tr><th>member constant</th><th>stands for</th><th>access</th></tr></thead><tbody><tr><td>in</td><td>input File</td><td>读的方式打开文件</td></tr><tr><td>out</td><td>output</td><td>写的方式打开文件</td></tr><tr><td>binary</td><td>binary</td><td>二进制方式打开</td></tr><tr><td>ate</td><td>at end</td><td>打开的时候定位到文件末尾</td></tr><tr><td>app</td><td>append</td><td>所有操作都定位到文件末尾</td></tr><tr><td>trunc</td><td>truncate</td><td>丢弃打开前文件存在的内容</td></tr></tbody></table> 
<h5><a id="3_ifstream_is_open_62"></a>3. <strong><code>ifstream:: is_open</code></strong></h5> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">is_open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>文件流对象与文件绑定</strong>，返回 true ,否则 false 。</p> 
<h5><a id="4_ifstream_close_70"></a>4. <strong><code>ifstream:: close</code></strong></h5> 
<pre><code class="prism language-cpp"><span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//关闭文件流</span>
</code></pre> 
<h5><a id="5_ifstream_rdbuf_76"></a>5. <strong><code>ifstream:: rdbuf</code></strong></h5> 
<pre><code class="prism language-cpp">filebuf<span class="token operator">*</span> <span class="token function">rdbuf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>    
</code></pre> 
<p><strong>返回一个 <a href="http://www.cplusplus.com/reference/fstream/filebuf/" rel="nofollow">filebuf</a> 对象指针</strong>，（The pointer to the internal filebuf object.）</p> 
<h5><a id="6_ifstream_operator__84"></a>6. <strong><code>ifstream:: operator =</code></strong></h5> 
<pre><code class="prism language-cpp"><span class="token function">copy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  ifstream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">const</span> ifstream<span class="token operator">&amp;</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">delete</span><span class="token punctuation">;</span>
<span class="token function">move</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>  ifstream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">=</span> <span class="token punctuation">(</span>ifstream<span class="token operator">&amp;&amp;</span> rhs<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> 
<p>等号运算符禁止使用<code>左值引用</code>，可以使用<code>右值引用</code>。(即右边的值必须是一个即将销毁的临时对象)</p> 
<h4><a id="Public_member_functions_inherited_from_istream_93"></a>Public member functions <code>inherited from istream</code></h4> 
<h5><a id="7_stdistreamoperator_94"></a>7. <strong><code>std::istream::operator&gt;&gt;</code></strong></h5> 
<p>输入终端 <code>cin</code> 和 <code>ifstream</code> 都是 <code>istream</code> 的子类，所以<code>输入操作符 &gt;&gt;</code> 用法相同。对变量进入输入的时候重载了常用的数据类型。</p> 
<pre><code class="prism language-cpp">arithmetic <span class="token function">types</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>	
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">bool</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">short</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">short</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">long</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">long</span> <span class="token keyword">double</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token operator">&amp;</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>

stream <span class="token function">buffers</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>	
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>streambuf<span class="token operator">*</span> sb <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">manipulators</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>	
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span>istream<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>ios<span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span>ios<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token keyword">operator</span><span class="token operator">&gt;&gt;</span> <span class="token punctuation">(</span>ios_base<span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">*</span>pf<span class="token punctuation">)</span><span class="token punctuation">(</span>ios_base<span class="token operator">&amp;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="8_istreamgcount_123"></a>8. <strong><code>istream::gcount</code></strong></h5> 
<pre><code class="prism language-cpp">streamsize <span class="token function">gcount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>返回最后一个输入操作读取的字符数目。</strong><br> 可以修改这个返回值的函数有：<code>get</code>,<code>getline</code>,<code>ignore</code>,<code>peek</code>,<code>read</code>, <code>readsome</code>,<code>putback</code> and <code>unget</code>. 其中函数<code>peek, putback and unget</code> 被调用后<code>gcount()</code>返回值为0。</p> 
<h5><a id="9_istreamget_132"></a>9. <strong><code>istream::get</code></strong></h5> 
<pre><code class="prism language-cpp">single <span class="token function">character</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token comment">//读取一个字符，遇到'\n',也从流中取出。</span>
<span class="token keyword">int</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//字符按 int 返回</span>
istream<span class="token operator">&amp;</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">&amp;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读到c中</span>

<span class="token comment">//读取n个 c 风格字符串到数组s中，遇到'\n'（或delim）停止读取，并把'\n'留在输入流中，若要读取多行，就要需要int get() 来取出'\n',才能读下一行。</span>
c<span class="token operator">-</span><span class="token function">string</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">:</span> 
istream<span class="token operator">&amp;</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> streamsize n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认delim是换行字符'\n'</span>
istream<span class="token operator">&amp;</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> streamsize n<span class="token punctuation">,</span> <span class="token keyword">char</span> delim<span class="token punctuation">)</span> <span class="token comment">//指定读取停止字符 delim</span>

stream <span class="token function">buffer</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">:</span>  <span class="token comment">//内容读取到 streambuf 对象中。</span>
istream<span class="token operator">&amp;</span> <span class="token function">get</span> <span class="token punctuation">(</span>streambuf<span class="token operator">&amp;</span> sb<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认delim是换行字符'\n'</span>
istream<span class="token operator">&amp;</span> <span class="token function">get</span> <span class="token punctuation">(</span>streambuf<span class="token operator">&amp;</span> sb<span class="token punctuation">,</span> <span class="token keyword">char</span> delim<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//指定读取停止字符 delim</span>
</code></pre> 
<p>下面的程序演示<code>get()</code>读取到<code>streambuf</code> 的用法。</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span>     <span class="token comment">// std::cout, std::streambuf, std::streamsize</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span>      <span class="token comment">// std::ifstream</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">ifs</span> <span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>ofstream <span class="token function">ofs</span> <span class="token punctuation">(</span><span class="token string">"out.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>streambuf <span class="token operator">*</span>pbuf <span class="token operator">=</span> ofs<span class="token punctuation">.</span><span class="token function">rdbuf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    ifs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">*</span>pbuf<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//默认读取截止字符是'\n', 所以读取一行停止，且没有读取'\n'。</span>
    pbuf<span class="token operator">-&gt;</span><span class="token function">sputc</span><span class="token punctuation">(</span>ifs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// '\n'并没有被读取到pbuf，所以需要get()来读取'\n',然后用函数sputc()加到 pbuf 中。</span>
    ifs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token operator">*</span>pbuf<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 从流中取出了'\n' ，才能读取第二行</span>
    pbuf<span class="token operator">-&gt;</span><span class="token function">sputc</span><span class="token punctuation">(</span>ifs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/*
    上面使用了函数 istream&amp; get (streambuf&amp; sb); 
    之后不能使用 istream&amp; get (char* s, streamsize n);
    */</span>
    <span class="token keyword">char</span> s<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       
    ifs<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//虽然输入流有第三行，但是没法读取。</span>
    cout<span class="token operator">&lt;&lt;</span><span class="token string">"get:"</span><span class="token operator">&lt;&lt;</span>s<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>  <span class="token comment">//内容为空</span>
 
    ofs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ifs<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="10_istreamgetline_178"></a>10. <strong><code>istream::getline</code></strong></h5> 
<p><strong>读取一行到字符数组。</strong></p> 
<pre><code class="prism language-cpp">istream<span class="token operator">&amp;</span> <span class="token function">getline</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> streamsize n <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//默认delim是换行字符'\n'，遇到后丢弃，第二次读取从delim后开始读。</span>

istream<span class="token operator">&amp;</span> <span class="token function">getline</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> streamsize n<span class="token punctuation">,</span> <span class="token keyword">char</span> delim <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//自己定义停止符delim</span>
</code></pre> 
<hr> 
<p><code>&lt;string&gt;</code> 字符串头文件也定义了从流中读取一行的函数 getline()<br> 因为它不是流的成员函数，所以不能通过点访问。</p> 
<ul><li><code>std::getline (string)</code></li></ul> 
<pre><code class="prism language-cpp"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>	用户定义截止字符
istream<span class="token operator">&amp;</span> <span class="token function">getline</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span>  is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">,</span> <span class="token keyword">char</span> delim<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token function">getline</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;&amp;</span> is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">,</span> <span class="token keyword">char</span> delim<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//c++11 标准</span>

<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>	截止字符默认<span class="token char">'\n'</span>
istream<span class="token operator">&amp;</span> <span class="token function">getline</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;</span>  is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
istream<span class="token operator">&amp;</span> <span class="token function">getline</span> <span class="token punctuation">(</span>istream<span class="token operator">&amp;&amp;</span> is<span class="token punctuation">,</span> string<span class="token operator">&amp;</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// c++11 标准</span>
</code></pre> 
<p><strong>用法：</strong><br> 从流对象<code>is</code>中读取一行存到字符串<code>str</code> 直到遇到截止字符，<code>如果遇到截止字符，则把它从流中取出来</code>，然后丢弃（它不被存储，下一个操作的起点在它之后）函数调用前<code>str</code> 中的内容将被覆盖。<br> <strong>demo: 读取文件流的内容</strong></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    string str<span class="token punctuation">;</span>
    ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>ifs<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span><span class="token string">"open file fail!"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token function">getline</span><span class="token punctuation">(</span>ifs<span class="token punctuation">,</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        cout<span class="token operator">&lt;&lt;</span>str<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="11_istreamignore_227"></a>11. <strong><code>istream::ignore</code></strong></h5> 
<pre><code class="prism language-cpp">istream<span class="token operator">&amp;</span> <span class="token function">ignore</span> <span class="token punctuation">(</span>streamsize n <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">int</span> delim <span class="token operator">=</span> <span class="token constant">EOF</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>从输入流中读取n个字符并且丢弃，或者读到delim字符再停止读取。</strong></p> 
<h5><a id="12_istreampeek_234"></a>12. <strong><code>istream::peek</code></strong></h5> 
<pre><code class="prism language-cpp"><span class="token keyword">int</span> <span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>返回输入流下一个字符，并把它留在输入流中，作为下一次读取的起点。返回值是整形ascll码值，可以用 char© 转化为字符。</strong></p> 
<h5><a id="13_istreamread_242"></a>13. <strong><code>istream::read</code></strong></h5> 
<pre><code class="prism language-cpp">istream<span class="token operator">&amp;</span> <span class="token function">read</span> <span class="token punctuation">(</span><span class="token keyword">char</span><span class="token operator">*</span> s<span class="token punctuation">,</span> streamsize n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>从输入流中提取n个字符，并把他们存数组s中，不检测内容，也不加字符串结尾符号‘\0’,实例：</strong></p> 
<pre><code class="prism language-cpp"><span class="token comment">// read a file into memory</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span>  <span class="token comment">// std::ifstream</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span> <span class="token comment">// std::cout</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LEN</span> <span class="token expression"><span class="token number">10</span></span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">char</span> buffer<span class="token punctuation">[</span>LEN<span class="token punctuation">]</span><span class="token punctuation">;</span>
  buffer<span class="token punctuation">[</span>LEN <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token char">'\0'</span><span class="token punctuation">;</span>
  std<span class="token double-colon punctuation">::</span>ifstream <span class="token function">is</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">,</span> std<span class="token double-colon punctuation">::</span>ifstream<span class="token double-colon punctuation">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>is<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> LEN <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//最后一次读取长度小于 LEN-1时候，会打印一些无效的字符</span>
      std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Reading "</span> <span class="token operator">&lt;&lt;</span> is<span class="token punctuation">.</span><span class="token function">gcount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" characters. is:"</span> <span class="token operator">&lt;&lt;</span> buffer
                <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="14_istreamputback_273"></a>14. <strong><code>istream::putback</code></strong></h5> 
<pre><code class="prism language-cpp">istream<span class="token operator">&amp;</span> <span class="token function">putback</span> <span class="token punctuation">(</span><span class="token keyword">char</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 用法，从输入流读取一个字符，再把它返回。</span>
<span class="token keyword">char</span> c <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
std<span class="token double-colon punctuation">::</span>cin<span class="token punctuation">.</span><span class="token function">putback</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="15_istreamunget_282"></a>15. <strong><code>istream::unget</code></strong></h5> 
<pre><code class="prism language-cpp">istream<span class="token operator">&amp;</span> <span class="token function">unget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回最后一次读取的字符到输入流，类似putback()</span>
<span class="token keyword">char</span> c <span class="token operator">=</span> std<span class="token double-colon punctuation">::</span>cin<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
std<span class="token double-colon punctuation">::</span>cin<span class="token punctuation">.</span><span class="token function">unget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="16_istreamtellg_290"></a>16. <strong><code>istream::tellg</code></strong></h5> 
<p><strong>读取输入流中文件指针的位置，返回值可转化为 int。</strong></p> 
<pre><code class="prism language-cpp">streampos <span class="token function">tellg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// get length of file:</span>
is<span class="token punctuation">.</span><span class="token function">seekg</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> is<span class="token punctuation">.</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> length <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">tellg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
is<span class="token punctuation">.</span><span class="token function">seekg</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> is<span class="token punctuation">.</span>beg<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="17_istreamseekg_301"></a>17. <strong><code>istream::seekg</code></strong></h5> 
<p><strong>设定输入流中文件指针的位置。(1) <code>绝对位置</code> (2) <code>相对位置</code></strong></p> 
<pre><code class="prism language-cpp"><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>istream<span class="token operator">&amp;</span> <span class="token function">seekg</span> <span class="token punctuation">(</span>streampos pos<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>istream<span class="token operator">&amp;</span> <span class="token function">seekg</span> <span class="token punctuation">(</span>streamoff off<span class="token punctuation">,</span> ios_base<span class="token double-colon punctuation">::</span>seekdir way<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<ul><li>参数 <code>pos</code> 是流中的<code>绝对位置</code>可以转化为 int</li><li>参数 <code>off</code> 是<code>偏移量</code>，与way相关，类型是 int</li><li>参数 <code>way</code> 可以选下表中的<code>任意一个常量</code>。</li></ul> 
<table><thead><tr><th>value</th><th>offset is relative to…</th></tr></thead><tbody><tr><td>ios_base::beg</td><td>beginning of the stream</td></tr><tr><td>ios_base::cur</td><td>current position in the stream</td></tr><tr><td>ios_base::end</td><td>end of the stream</td></tr></tbody></table> 
<h4><a id="Public_member_functions_inherited_from_ios_319"></a>Public member functions <code>inherited from ios</code></h4> 
<h5><a id="18_iosgood_320"></a>18. <strong><code>ios::good</code></strong></h5> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token function">good</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
</code></pre> 
<p>** 检测流的状态是否正常。当错误的状态*flags (eofbit, failbit and badbit) *都没被设置的时候返回true **</p> 
<p>特定的错误状态可以用下面的函数（eof, fail, and bad）来检测。</p> 
<table><thead><tr><th>iostate value (member constant)</th><th>indicates</th><th>good()</th><th>eof()</th><th>fail()</th><th>bad()</th><th>rdstate()</th></tr></thead><tbody><tr><td>goodbit</td><td>No errors (zero value iostate)</td><td>true</td><td>false</td><td>false</td><td>false</td><td>goodbit</td></tr><tr><td>eofbit</td><td>End-of-File reached on input operation</td><td>false</td><td>true</td><td>false</td><td>false</td><td>eofbit</td></tr><tr><td>failbit</td><td>Logical error on i/o operation</td><td>false</td><td>false</td><td>true</td><td>false</td><td>failbit</td></tr><tr><td>badbit</td><td>Read/writing error on i/o operation</td><td>false</td><td>false</td><td>true</td><td>true</td><td>badbit</td></tr></tbody></table> 
<h5><a id="19_iosoperator_338"></a>19. <strong><code>ios::operator!</code></strong></h5> 
<pre><code class="prism language-cpp"><span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">//Returns true if either failbit or badbit is set, and false otherwise.</span>
<span class="token comment">// 有错误状态返回 true</span>

<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  std<span class="token double-colon punctuation">::</span>ifstream is<span class="token punctuation">;</span>
  is<span class="token punctuation">.</span><span class="token function">open</span> <span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>is<span class="token punctuation">)</span>
    std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Error opening 'test.txt'\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="20_iosoperator_bool_354"></a>20. <strong><code>ios::operator bool</code></strong></h5> 
<p><strong>布尔运算： 当流对象单独出现在条件语句中时，就间接调用布尔运算。</strong><br> 如：<code>if(ios), while(ios)</code><br> <strong>函数原型：</strong><br> c++98: <code>operator void*() const;</code><br> c++11: <code>explicit operator bool() const;</code></p> 
<p><strong>返回值</strong>：<code>failbit</code> 或 <code>badbit</code> 都没被标记的时候返回真。<br> <strong>（对比good(): failbit 或 badbit 或 eofbit 都没被标记的时候返回真）</strong></p> 
<p>布尔运算一个很方便的用法就是检测文件结束。读到文件末尾的时候， <code>eofbit</code>, <code>failbit</code> 同时被设置为1，所以可以使用bool()来判断流的状态。<br> 当文件打开失败的时候<code>failbit</code> 位被设置为1，所以也能<code>检测打开是否成功</code>。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//按行读文件，简洁的模板</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;fstream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;string&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">print_state</span> <span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token double-colon punctuation">::</span>ios<span class="token operator">&amp;</span> stream<span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">"good()="</span> <span class="token operator">&lt;&lt;</span> stream<span class="token punctuation">.</span><span class="token function">good</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">" eof()="</span> <span class="token operator">&lt;&lt;</span> stream<span class="token punctuation">.</span><span class="token function">eof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">" fail()="</span> <span class="token operator">&lt;&lt;</span> stream<span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cout <span class="token operator">&lt;&lt;</span> <span class="token string">" bad()="</span> <span class="token operator">&lt;&lt;</span> stream<span class="token punctuation">.</span><span class="token function">bad</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    string str<span class="token punctuation">;</span>
    ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>ifs<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
    	<span class="token comment">//while( bool(getline(ifs,str)))// 等价</span>
    	<span class="token comment">//while( getline(ifs,str).good())//等价</span>
    	<span class="token keyword">while</span><span class="token punctuation">(</span> <span class="token function">getline</span><span class="token punctuation">(</span>ifs<span class="token punctuation">,</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span>
    	<span class="token punctuation">{<!-- --></span>
       		cout<span class="token operator">&lt;&lt;</span><span class="token string">"line:"</span><span class="token operator">&lt;&lt;</span>str<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
    	<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
		cout<span class="token operator">&lt;&lt;</span><span class="token string">"open file fail!"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    <span class="token function">print_state</span><span class="token punctuation">(</span>ifs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<ol start="21"><li><strong><code>ios::rdstate</code></strong></li></ol> 
<pre><code class="prism language-cpp">iostate <span class="token function">rdstate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>
<span class="token comment">// Returns the current internal error state flags of the stream.</span>
<span class="token comment">// 返回当前流中的内部错误状态，iostate二进制数，需要做位运算来获取其相应位置上的值。</span>
<span class="token comment">//这个函数的功能可以被 good()，eof()，fail()，bad() 替换。</span>
<span class="token keyword">int</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  std<span class="token double-colon punctuation">::</span>ifstream is<span class="token punctuation">;</span>
  is<span class="token punctuation">.</span><span class="token function">open</span> <span class="token punctuation">(</span><span class="token string">"test.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>is<span class="token punctuation">.</span><span class="token function">rdstate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> std<span class="token double-colon punctuation">::</span>ifstream<span class="token double-colon punctuation">::</span>failbit <span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">)</span>
    std<span class="token double-colon punctuation">::</span>cerr <span class="token operator">&lt;&lt;</span> <span class="token string">"Error opening 'test.txt'\n"</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b8fe629dce7454bddebb2e325710abe4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">tensorRT踩坑日常之训练模型转ONNX转engine</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f723ae6d38c85c279beb4ece4f4ccbe7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">afl-cov实践</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>