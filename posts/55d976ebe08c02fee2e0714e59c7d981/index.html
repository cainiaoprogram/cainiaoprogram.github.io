<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>How to make nand flash factory bin image? - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="How to make nand flash factory bin image?" />
<meta property="og:description" content="文章目录 1. How to make nand flash factory bin?Step1. Create workspace directoryStep2. Prepare for the partition binsStep3. Create shell scriptStep4. Delivery the factory bin image 2. Script Example2.1 Alder2.2 Miami When you make a NAND FLASH factory bin image, you need to use a factory bin delivery tool that QC engineer will provide to you.
1. How to make nand flash factory bin? You can make a factory bin as below steps," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/55d976ebe08c02fee2e0714e59c7d981/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-18T11:19:34+08:00" />
<meta property="article:modified_time" content="2023-09-18T11:19:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">How to make nand flash factory bin image?</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_How_to_make_nand_flash_factory_bin_6" rel="nofollow">1. How to make nand flash factory bin?</a></li><li><ul><li><a href="#Step1_Create_workspace_directory_9" rel="nofollow">Step1. Create workspace directory</a></li><li><a href="#Step2_Prepare_for_the_partition_bins_19" rel="nofollow">Step2. Prepare for the partition bins</a></li><li><a href="#Step3_Create_shell_script_44" rel="nofollow">Step3. Create shell script</a></li><li><a href="#Step4_Delivery_the_factory_bin_image_109" rel="nofollow">Step4. Delivery the factory bin image</a></li></ul> 
  </li><li><a href="#2_Script_Example_125" rel="nofollow">2. Script Example</a></li><li><ul><li><a href="#21_Alder_129" rel="nofollow">2.1 Alder</a></li><li><a href="#22_Miami_190" rel="nofollow">2.2 Miami</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<p>When you make a NAND FLASH factory bin image, you need to use a factory bin delivery tool that QC engineer will provide to you.</p> 
<h2><a id="1_How_to_make_nand_flash_factory_bin_6"></a>1. How to make nand flash factory bin?</h2> 
<p>You can make a factory bin as below steps,</p> 
<h3><a id="Step1_Create_workspace_directory_9"></a>Step1. Create workspace directory</h3> 
<pre><code class="prism language-shell"><span class="token function">mkdir</span> factory_work_space
<span class="token function">mkdir</span> factory_work_space/common_build_ipq
<span class="token builtin class-name">cd</span> factory_work_space
</code></pre> 
<h3><a id="Step2_Prepare_for_the_partition_bins_19"></a>Step2. Prepare for the partition bins</h3> 
<p>Copy the following partition bins to the common_build_ipq folder:<br> (you can find the image from your code path: {root_dir}/common/build/ipq/)</p> 
<pre><code class="prism language-shell">bootconfig.bin
cdt-AP-MP03.1_256M16_DDR3_LM512.bin
cdt-AP-MP03.1_256M16_DDR3_LM512.bin.padded
cdt-AP-MP03.3_512M16_DDR3_LM512.bin
cdt-AP-MP03.3_512M16_DDR3_LM512.bin.padded
devcfg.mbn
devcfg.mbn.padded
nand-system-partition-ipq5018.bin
openwrt-ipq5018-u-boot.mbn
openwrt-ipq5018-u-boot.mbn.padded
openwrt-ipq-ipq50xx-ubi-root.img
sbl1_nand.mbn
sbl1_nand.mbn.padded
tz.mbn
tz.mbn.padded
</code></pre> 
<h3><a id="Step3_Create_shell_script_44"></a>Step3. Create shell script</h3> 
<p>Create a shell script on the factory_work_space folder with following code:</p> 
<p>About seek value, you can get the information on uboot command line via “smem” command.<br> You will see all partition’s <font color="#FF0000"><strong>start</strong></font> address, like this:</p> 
<pre><code class="prism language-shell">No.: Name             Attributes            Start             Size
  <span class="token number">0</span>: <span class="token number">0</span>:SBL1           0x0000ffff              0x0         0x180000
  <span class="token number">1</span>: <span class="token number">0</span>:SBL1_1         0x0000ffff         0x180000         0x180000
  <span class="token number">2</span>: <span class="token number">0</span>:MIBIB          0x0000ffff         0x300000         0x100000
  <span class="token number">3</span>: <span class="token number">0</span>:BOOTCONFIG     0x0000ffff         0x400000          0x80000
  <span class="token number">4</span>: <span class="token number">0</span>:BOOTCONFIG1    0x0000ffff         0x480000          0x80000
</code></pre> 
<p>You should turn the <font color="#FF0000"><strong>“start”</strong></font> hex value to decimal first.</p> 
<p>And then, in the script,</p> 
<ul><li>seek = <font color="#FF0000">Decimal(start address)/1024</font>, when you set bs to “1k”.</li><li>seek = <font color="#FF0000">Decimal(start address)</font>, when you set bs to “1”.</li></ul> 
<p>The script example as below:</p> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Set ECC and OOB</span>
<span class="token assign-left variable">ECC</span><span class="token operator">=</span><span class="token number">8</span>
<span class="token assign-left variable">OOB</span><span class="token operator">=</span><span class="token number">128</span>
<span class="token comment"># Set ECC and OOB END</span>

<span class="token assign-left variable">file</span><span class="token operator">=</span>factory_5018_nand.bin
<span class="token assign-left variable">file_with_ecc</span><span class="token operator">=</span><span class="token variable">$file</span>.ecc<span class="token variable">$ECC</span>.bin
<span class="token assign-left variable">parts_dir</span><span class="token operator">=</span>common_build_ipq

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-a</span> <span class="token variable">$file</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> <span class="token variable">$file</span> <span class="token variable">$file_with_ecc</span>
<span class="token keyword">fi</span>

<span class="token function">sync</span>

<span class="token function">tr</span> <span class="token string">'\000'</span> <span class="token string">'\377'</span> <span class="token operator">&lt;</span> /dev/zero <span class="token operator">|</span> <span class="token function">dd</span> <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token assign-left variable">count</span><span class="token operator">=</span>128k

<span class="token function">sync</span>

<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/sbl1_nand.mbn                       <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/nand-system-partition-ipq5018.bin   <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">512</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/bootconfig.bin                      <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">1024</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/bootconfig.bin                      <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">1280</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tz.mbn                              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">1536</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/devcfg.mbn                          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">3584</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/cdt-AP-MP03.3_512M16_DDR3_LM512.bin <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">4096</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq5018-u-boot.mbn          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">5120</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq-ipq50xx-ubi-root.img    <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">9216</span>


./img_gen <span class="token variable">$file</span> <span class="token parameter variable">-h</span> -<span class="token variable">$ECC</span> <span class="token parameter variable">-O</span> <span class="token variable">$OOB</span> <span class="token parameter variable">-o</span> <span class="token variable">$file_with_ecc</span>
<span class="token comment">#./img_gen $file -h -$ECC -o $file_with_ecc</span>


</code></pre> 
<h3><a id="Step4_Delivery_the_factory_bin_image_109"></a>Step4. Delivery the factory bin image</h3> 
<p>Excecute your shell script.</p> 
<pre><code class="prism language-shell"><span class="token function">chmod</span> <span class="token number">777</span> <span class="token punctuation">{<!-- --></span>your_shell_script<span class="token punctuation">}</span>
./<span class="token punctuation">{<!-- --></span>your_shell_script<span class="token punctuation">}</span>
</code></pre> 
<p>Then you just need to waiting for few minutes,<br> you will see the factory_5018_nand.bin.ecc8.bin on the workspace root folder.<br> It will cost about 20min for 8bit ecc bin, and less than 10min for 4bit ecc bin.</p> 
<h2><a id="2_Script_Example_125"></a>2. Script Example</h2> 
<p>Note,</p> 
<ul><li>seek = <font color="#FF0000">Decimal(start address)/1024</font>, when you set bs to “1k”.</li><li>seek = <font color="#FF0000">Decimal(start address)</font>, when you set bs to “1”.</li></ul> 
<h3><a id="21_Alder_129"></a>2.1 Alder</h3> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Set ECC and OOB</span>
<span class="token assign-left variable">ECC</span><span class="token operator">=</span><span class="token number">8</span>
<span class="token assign-left variable">OOB</span><span class="token operator">=</span><span class="token number">128</span>
<span class="token comment"># Set ECC and OOB END</span>

<span class="token assign-left variable">file</span><span class="token operator">=</span>factory_9574_nand.bin
<span class="token assign-left variable">file_with_ecc</span><span class="token operator">=</span><span class="token variable">$file</span>.ecc<span class="token variable">$ECC</span>.bin
<span class="token assign-left variable">parts_dir</span><span class="token operator">=</span>common_build_ipq

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-a</span> <span class="token variable">$file</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> <span class="token variable">$file</span> <span class="token variable">$file_with_ecc</span>
<span class="token keyword">fi</span>

<span class="token function">sync</span>

<span class="token function">tr</span> <span class="token string">'\000'</span> <span class="token string">'\377'</span> <span class="token operator">&lt;</span> /dev/zero <span class="token operator">|</span> <span class="token function">dd</span> <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token assign-left variable">count</span><span class="token operator">=</span>128k

<span class="token function">sync</span>

<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/xbl_nand.elf                            <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">0</span>        <span class="token comment">#SBL1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/xbl_nand.elf                            <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">1536</span>     <span class="token comment">#SBL1_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/nand-system-partition-ipq9574.bin       <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">3072</span>     <span class="token comment">#MIBIB</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/bootconfig.bin                          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">4096</span>     <span class="token comment">#BOOTCONFIG</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/bootconfig.bin                          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">4608</span>     <span class="token comment">#BOOTCONFIG1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tz.mbn                                  <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">5120</span>     <span class="token comment">#QSEE</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tz.mbn                                  <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">8704</span>     <span class="token comment">#QSEE_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/devcfg.mbn                              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">12288</span>    <span class="token comment">#DEVCFG</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/devcfg.mbn                              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">12800</span>    <span class="token comment">#DEVCFG_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/apdp.mbn                                <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">13312</span>    <span class="token comment">#APDP</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/apdp.mbn                                <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">13824</span>    <span class="token comment">#APDP_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tmel-ipq95xx-firmware.elf.padded        <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">14336</span>    <span class="token comment">#TME</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tmel-ipq95xx-firmware.elf.padded        <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">14848</span>    <span class="token comment">#TME_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/rpm.mbn                                 <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">15360</span>    <span class="token comment">#RPM</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/rpm.mbn                                 <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">15872</span>    <span class="token comment">#RPM_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/cdt-AP-AL02-C1_256M16_DDR4.bin          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">16384</span>    <span class="token comment">#CDT</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/cdt-AP-AL02-C1_256M16_DDR4.bin          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">16896</span>    <span class="token comment">#CDT_1</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=17408    #APPSBLENV</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq9574-u-boot.mbn              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">17920</span>    <span class="token comment">#APPSBL</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq9574-u-boot.mbn              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">19456</span>    <span class="token comment">#APPSBL_1</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=20992    #ART</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=22016    #ETHPHYFW</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=23040    #TRAINING</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq95xx-ipq95xx_32-ubi-root.img <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">23552</span>    <span class="token comment">#rootfs</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq95xx-ipq95xx_32-ubi-root.img <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">105472</span>   <span class="token comment">#rootfs_1</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=187392   #customfs</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=237568   #Jio-Reserved</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=239616   #MFG</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=241664   #BDF</span>




./img_gen <span class="token variable">$file</span> <span class="token parameter variable">-h</span> -<span class="token variable">$ECC</span> <span class="token parameter variable">-O</span> <span class="token variable">$OOB</span> <span class="token parameter variable">-o</span> <span class="token variable">$file_with_ecc</span>
<span class="token comment">#./img_gen $file -h -$ECC -o $file_with_ecc</span>

</code></pre> 
<h3><a id="22_Miami_190"></a>2.2 Miami</h3> 
<p>on testing…</p> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># Set ECC and OOB</span>
<span class="token assign-left variable">ECC</span><span class="token operator">=</span><span class="token number">8</span>
<span class="token assign-left variable">OOB</span><span class="token operator">=</span><span class="token number">128</span>
<span class="token comment"># Set ECC and OOB END</span>

<span class="token assign-left variable">file</span><span class="token operator">=</span>factory_9574_nand.bin
<span class="token assign-left variable">file_with_ecc</span><span class="token operator">=</span><span class="token variable">$file</span>.ecc<span class="token variable">$ECC</span>.bin
<span class="token assign-left variable">parts_dir</span><span class="token operator">=</span>common_build_ipq

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-a</span> <span class="token variable">$file</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token function">rm</span> <span class="token variable">$file</span> <span class="token variable">$file_with_ecc</span>
<span class="token keyword">fi</span>

<span class="token function">sync</span>

<span class="token function">tr</span> <span class="token string">'\000'</span> <span class="token string">'\377'</span> <span class="token operator">&lt;</span> /dev/zero <span class="token operator">|</span> <span class="token function">dd</span> <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span><span class="token number">1024</span> <span class="token assign-left variable">count</span><span class="token operator">=</span>128k

<span class="token function">sync</span>


<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/xbl_nand.elf                            <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">0</span>          <span class="token comment">#SBL1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/xbl_nand.elf                            <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">1536</span>       <span class="token comment">#SBL1_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/nand-system-partition-ipq5332.bin       <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">3072</span>       <span class="token comment">#MIBIB</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/bootconfig.bin                          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">4096</span>       <span class="token comment">#BOOTCONFIG</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/bootconfig.bin                          <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">4608</span>       <span class="token comment">#BOOTCONFIG1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tz.mbn                                  <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">5120</span>       <span class="token comment">#QSEE</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tz.mbn                                  <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">8704</span>       <span class="token comment">#QSEE_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/devcfg.mbn                              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">12288</span>      <span class="token comment">#DEVCFG</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/devcfg.mbn                              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">12800</span>      <span class="token comment">#DEVCFG_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tmel-ipq53xx-patch.elf                  <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">13312</span>      <span class="token comment">#TME</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/tmel-ipq53xx-patch.elf                  <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">13824</span>      <span class="token comment">#TME_1</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/cdt-AP-MI01.4_256M16_DDR4.bin           <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">14336</span>      <span class="token comment">#CDT</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/cdt-AP-MI01.4_256M16_DDR4.bin           <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">14848</span>      <span class="token comment">#CDT_1</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=15360      #APPSBLENV</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq5332-u-boot.mbn              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">15872</span>      <span class="token comment">#APPSBL</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq5332-u-boot.mbn              <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">17408</span>      <span class="token comment">#APPSBL_1</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=18944      #ETHPHYFW</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=19968      #TRAINING</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=20480      #ART</span>
<span class="token comment">#dd conv=notrunc if=./$parts_dir/                                       of=$file bs=1k seek=22528      #LICENSE</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq53xx-ipq53xx_32-ubi-root.img <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">22784</span>      <span class="token comment">#rootfs</span>
<span class="token function">dd</span> <span class="token assign-left variable">conv</span><span class="token operator">=</span>notrunc <span class="token assign-left variable">if</span><span class="token operator">=</span>./<span class="token variable">$parts_dir</span>/openwrt-ipq53xx-ipq53xx_32-ubi-root.img <span class="token assign-left variable">of</span><span class="token operator">=</span><span class="token variable">$file</span> <span class="token assign-left variable">bs</span><span class="token operator">=</span>1k <span class="token assign-left variable">seek</span><span class="token operator">=</span><span class="token number">76160</span>      <span class="token comment">#rootfs_1</span>
																								  



./img_gen <span class="token variable">$file</span> <span class="token parameter variable">-h</span> -<span class="token variable">$ECC</span> <span class="token parameter variable">-O</span> <span class="token variable">$OOB</span> <span class="token parameter variable">-o</span> <span class="token variable">$file_with_ecc</span>
<span class="token comment">#./img_gen $file -h -$ECC -o $file_with_ecc</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1d33d5a8126afdd3ab533b020948e47/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">android 源碼開發環境配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f4045e83faa99792a68f6749866faa3f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mybatisplus报错@TableId can‘t more than one in Class解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>