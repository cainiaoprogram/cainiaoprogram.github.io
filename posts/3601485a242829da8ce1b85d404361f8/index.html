<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenCV(6): 梯度计算,礼帽黑帽 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenCV(6): 梯度计算,礼帽黑帽" />
<meta property="og:description" content="没看过前文也没有关系，了解腐蚀和膨胀就行。本文紧接前文图像腐蚀与膨胀。
梯度计算 梯度计算就是膨胀过后的图像减去腐蚀处理过后的图像。图像腐蚀就是消除图像的边缘，图像膨胀就是把图像边缘扩大一点。
这样得到的就是图像的轮廓。
在OpenCV中，梯度计算方法也被包括在形态学方法cv2.morphologyEx(src，op，kernel)中
src为输入图像
如果要进行梯度运算，参数设置op=cv2.MORPH_GRADIENT
kernel为采用的卷积核，本文采用卷积核为3*3的矩阵。
import cv2 import numpy as np #定义了一个展示图片的方法 def cv_show(title,img): cv2.imshow(title,img) cv2.waitKey(0) cv2.destroyAllWindows() return #读取图片 img = cv2.imread(&#39;circle.png&#39;) kernel = np.ones((3,3),dtype = np.uint8) gradient = cv2.morphologyEx(img, cv2.MORPH_GRADIENT,kernel) cv_show(&#39;gradient&#39;,gradient) 原图与输出对比
原图&#39;circle.png&#39;
输出图像：
大家也可以用自己的二值图试试，本文的图像就是windows自带的画图软件画的，画一个黑色的底和一个白色的圆就行，二值图的意思是一种由黑色和白色两种颜色组成的图像，其中只有两个像素值。
礼帽 礼帽就是原始图像减去开运算之后的图像
同样包括在形态学方法cv2.morphologyEx(src，op，kernel)中，
此时参数op = cv2.MORPH_TOPHAT import cv2 import numpy as np def cv_show(title,img): cv2.imshow(title,img) cv2.waitKey(0) cv2.destroyAllWindows() return img = cv2.imread(&#39;Hello.png&#39;) kernel = np.ones((3,3),dtype = np.uint8) tophat = cv2.morphologyEx(img,cv2.MORPH_TOPHAT,kernel)#高帽找刺 cv_show(&#39;tophat&#39;,tophat) 原图和结果对比：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3601485a242829da8ce1b85d404361f8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-31T20:41:41+08:00" />
<meta property="article:modified_time" content="2023-03-31T20:41:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenCV(6): 梯度计算,礼帽黑帽</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>没看过前文也没有关系，了解腐蚀和膨胀就行。本文紧接前文图像腐蚀与膨胀。</p> 
<h2 id="梯度计算">梯度计算</h2> 
<p>梯度计算就是膨胀过后的图像减去腐蚀处理过后的图像。图像腐蚀就是消除图像的边缘，图像膨胀就是把图像边缘扩大一点。</p> 
<p>这样得到的就是图像的轮廓。</p> 
<p>在OpenCV中，梯度计算方法也被包括在形态学方法cv2.morphologyEx(src，op，kernel)中</p> 
<p>src为输入图像</p> 
<p>如果要进行梯度运算，参数设置op=cv2.MORPH_GRADIENT</p> 
<p>kernel为采用的卷积核，本文采用卷积核为3*3的矩阵。</p> 
<pre><code class="language-python">import cv2
import numpy as np

#定义了一个展示图片的方法
def cv_show(title,img):
    cv2.imshow(title,img)
    cv2.waitKey(0) 
    cv2.destroyAllWindows()
    return

#读取图片
img = cv2.imread('circle.png')
kernel = np.ones((3,3),dtype = np.uint8)
gradient =  cv2.morphologyEx(img, cv2.MORPH_GRADIENT,kernel)

cv_show('gradient',gradient)</code></pre> 
<p>原图与输出对比</p> 
<p>原图'circle.png'</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1b/a1/ESmeLfJw_o.png"> </p> 
<p>输出图像：</p> 
<p><img alt="" height="540" src="https://images2.imgbox.com/3c/b9/1Lo1moSz_o.png" width="890"></p> 
<p> 大家也可以用自己的二值图试试，本文的图像就是windows自带的画图软件画的，画一个黑色的底和一个白色的圆就行，二值图的意思是一种由黑色和白色两种颜色组成的图像，其中只有两个像素值。</p> 
<h2 id="礼帽和黑帽">礼帽</h2> 
<p>礼帽就是原始图像减去开运算之后的图像</p> 
<p>同样包括在形态学方法cv2.morphologyEx(src，op，kernel)中，</p> 
<p>此时参数op = cv2.MORPH_TOPHAT </p> 
<pre><code class="language-python">import cv2
import numpy as np

def cv_show(title,img):
    cv2.imshow(title,img)
    cv2.waitKey(0) 
    cv2.destroyAllWindows()
    return

img = cv2.imread('Hello.png')
kernel = np.ones((3,3),dtype = np.uint8)
tophat = cv2.morphologyEx(img,cv2.MORPH_TOPHAT,kernel)#高帽找刺
cv_show('tophat',tophat)</code></pre> 
<p>原图和结果对比：</p> 
<p>原图（Hello.png) </p> 
<p><img alt="" height="289" src="https://images2.imgbox.com/0e/9b/6tGWRk9Z_o.png" width="463"></p> 
<p>结果：</p> 
<p><img alt="" height="410" src="https://images2.imgbox.com/be/0a/1YQvj7xe_o.png" width="599"></p> 
<p>前文说过，开运算就是给图像把毛刺去了，那么礼帽就是原始图像减去开运算图像，得出去掉的毛刺是啥。</p> 
<h2>黑帽</h2> 
<p>运算则是将原始图像与其闭运算的差值结果，即原始图像减去其闭运算结果。</p> 
<p>此时参数op =  CV2.MORPH_BALCKHAT</p> 
<pre><code class="language-python">import cv2
import numpy as np

def cv_show(title,img):
    cv2.imshow(title,img)
    cv2.waitKey(0) 
    cv2.destroyAllWindows()
    return

img = cv2.imread('dongdong.png')
kernel = np.ones((3,3),dtype = np.uint8)
blackhat = cv2.morphologyEx(img,cv2.MORPH_BLACKHAT,kernel)#黑帽找洞
cv_show('blackhat',blackhat)</code></pre> 
<p>前文说过闭运算能够去掉图片中的洞洞，而黑帽就是找出这些洞洞。</p> 
<p>图像前后对比</p> 
<p>原图‘dongdong.png'</p> 
<p><img alt="" height="453" src="https://images2.imgbox.com/89/7c/1cMu1qc2_o.png" width="720"></p> 
<p> 处理后</p> 
<p><img alt="" height="564" src="https://images2.imgbox.com/38/49/KrKwGaVL_o.png" width="900"></p> 
<p> 可以看出洞洞部分被突出显示了。</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9af35c724a0a666517beefc0594fbc15/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">3.31笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5ab06d93a5c567ff2bd017ec52bc073d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">YOLOv5训练速度慢 GPU占用率低</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>