<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux 配置多个tomcat - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux 配置多个tomcat" />
<meta property="og:description" content="复制几个tomcat、分别为
tomcat-uat-AAA tomcat-uat-BBB tomcat-uat-CCC cp -r tomcat_8.0.47/. tomcat-uat-AAA/ 第一步：修改tomcat的环境变量 vi /etc/profile ##########AAA tomcat########### CATALINA1_BASE=/home/webapp/tomcat-uat-AAA CATALINA1_HOME=/home/webapp/tomcat-uat-AAA TOMCAT1_HOME=/home/webapp/tomcat-uat-AAA export CATALINA1_BASE CATALINA1_HOME TOMCAT1_HOME ##########AAA tomcat########### ##########BBB tomcat########## CATALINA2_BASE=/home/webapp/tomcat-uat-BBB CATALINA2_HOME=/home/webapp/tomcat-uat-BBB TOMCAT2_HOME=/home/webapp/tomcat-uat-BBB export CATALINA2_BASE CATALINA2_HOME TOMCAT2_HOME ##########BBB tomcat########## ##########CCC tomcat########## CATALINA3_BASE=/home/webapp/tomcat-uat-CCC CATALINA3_HOME=/home/webapp/tomcat-uat-CCC TOMCAT3_HOME=/home/webapp/tomcat-uat-CCC export CATALINA3_BASE CATALINA3_HOME TOMCAT3_HOME ##########CCC tomcat########## 然后使修改的环境变量生效
source /etc/profile 第二步：修改启动文件tomcat 在 bin 下 catalina.sh vi /home/webapp/tomcat-uat-AAA/bin/catalina.sh 在：模式下输入全局替换命令，执行下面2次命令 %s/CATALINA_BASE/CATALINA1_BASE/g %s/CATALINA_HOME/CATALINA1_HOME/g vi /home/webapp/tomcat-uat-BBB/bin/catalina.sh 在：模式下输入全局替换命令，执行下面2次命令 %s/CATALINA_BASE/CATALINA2_BASE/g %s/CATALINA_HOME/CATALINA2_HOME/g vi /home/webapp/tomcat-uat-CCC/bin/catalina.sh 在：模式下输入全局替换命令，执行下面2次命令 %s/CATALINA_BASE/CATALINA3_BASE/g %s/CATALINA_HOME/CATALINA3_HOME/g 第三步：修改tomcat 在 conf 下的 server." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fbf9dfb6c2c4c25af7451e000d0358b1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-28T10:39:36+08:00" />
<meta property="article:modified_time" content="2023-10-28T10:39:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux 配置多个tomcat</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>复制几个tomcat、分别为</p> 
<pre><code class="prism language-java">tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span> 
tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">BBB</span> 
tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">CCC</span>
</code></pre> 
<pre><code class="prism language-java">cp <span class="token operator">-</span>r  tomcat_8<span class="token punctuation">.</span><span class="token number">0.47</span><span class="token operator">/</span><span class="token punctuation">.</span> tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span><span class="token operator">/</span>
</code></pre> 
<h3><a id="tomcat_13"></a>第一步：修改tomcat的环境变量</h3> 
<pre><code class="prism language-java">vi <span class="token operator">/</span>etc<span class="token operator">/</span>profile
</code></pre> 
<pre><code class="prism language-java">##########<span class="token constant">AAA</span> tomcat###########
<span class="token constant">CATALINA1_BASE</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token class-name">AAA</span>
<span class="token constant">CATALINA1_HOME</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token class-name">AAA</span>
<span class="token constant">TOMCAT1_HOME</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span>
export <span class="token constant">CATALINA1_BASE</span> <span class="token constant">CATALINA1_HOME</span> <span class="token constant">TOMCAT1_HOME</span>
##########<span class="token constant">AAA</span> tomcat###########
 
##########<span class="token constant">BBB</span> tomcat##########
<span class="token constant">CATALINA2_BASE</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token class-name">BBB</span>
<span class="token constant">CATALINA2_HOME</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token class-name">BBB</span>
<span class="token constant">TOMCAT2_HOME</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">BBB</span>
export <span class="token constant">CATALINA2_BASE</span> <span class="token constant">CATALINA2_HOME</span> <span class="token constant">TOMCAT2_HOME</span>
##########<span class="token constant">BBB</span> tomcat##########
 
##########<span class="token constant">CCC</span> tomcat##########
<span class="token constant">CATALINA3_BASE</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token class-name">CCC</span>
<span class="token constant">CATALINA3_HOME</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token class-name">CCC</span>
<span class="token constant">TOMCAT3_HOME</span><span class="token operator">=</span><span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">CCC</span>
export <span class="token constant">CATALINA3_BASE</span> <span class="token constant">CATALINA3_HOME</span> <span class="token constant">TOMCAT3_HOME</span>
##########<span class="token constant">CCC</span> tomcat##########
</code></pre> 
<p>然后使修改的环境变量生效</p> 
<pre><code class="prism language-java">source <span class="token operator">/</span>etc<span class="token operator">/</span>profile
</code></pre> 
<h3><a id="tomcat__bin__catalinash_49"></a>第二步：修改启动文件tomcat 在 bin 下 catalina.sh</h3> 
<pre><code class="prism language-java">vi <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span><span class="token operator">/</span>bin<span class="token operator">/</span>catalina<span class="token punctuation">.</span>sh
</code></pre> 
<pre><code class="prism language-java">在：模式下输入全局替换命令，执行下面<span class="token number">2</span>次命令
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token constant">CATALINA_BASE</span><span class="token operator">/</span><span class="token constant">CATALINA1_BASE</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token constant">CATALINA_HOME</span><span class="token operator">/</span><span class="token constant">CATALINA1_HOME</span><span class="token operator">/</span>g
</code></pre> 
<pre><code class="prism language-java">vi <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">BBB</span><span class="token operator">/</span>bin<span class="token operator">/</span>catalina<span class="token punctuation">.</span>sh
</code></pre> 
<pre><code class="prism language-java">在：模式下输入全局替换命令，执行下面<span class="token number">2</span>次命令
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token constant">CATALINA_BASE</span><span class="token operator">/</span><span class="token constant">CATALINA2_BASE</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token constant">CATALINA_HOME</span><span class="token operator">/</span><span class="token constant">CATALINA2_HOME</span><span class="token operator">/</span>g
</code></pre> 
<pre><code class="prism language-java">vi <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">CCC</span><span class="token operator">/</span>bin<span class="token operator">/</span>catalina<span class="token punctuation">.</span>sh
</code></pre> 
<pre><code class="prism language-java">在：模式下输入全局替换命令，执行下面<span class="token number">2</span>次命令
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token constant">CATALINA_BASE</span><span class="token operator">/</span><span class="token constant">CATALINA3_BASE</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token constant">CATALINA_HOME</span><span class="token operator">/</span><span class="token constant">CATALINA3_HOME</span><span class="token operator">/</span>g
</code></pre> 
<h3><a id="tomcat__conf__serverxml_82"></a>第三步：修改tomcat 在 conf 下的 server.xml</h3> 
<pre><code class="prism language-java">修改关闭端口：<span class="token operator">&lt;</span> <span class="token class-name">Server</span> port<span class="token operator">=</span><span class="token string">"8006"</span> shutdown<span class="token operator">=</span><span class="token string">"SHUTDOWN"</span> <span class="token operator">&gt;</span>
修改访问端口：<span class="token operator">&lt;</span> <span class="token class-name">Connector</span> port<span class="token operator">=</span><span class="token string">"8081"</span> <span class="token class-name">URIEncoding</span><span class="token operator">=</span><span class="token string">"UTF-8"</span> redirectPort<span class="token operator">=</span><span class="token string">"8443"</span> connectionTimeout<span class="token operator">=</span><span class="token string">"20000"</span> protocal<span class="token operator">=</span><span class="token string">"HTTP/1.1"</span><span class="token operator">&gt;</span>
修改监听端口：<span class="token operator">&lt;</span> <span class="token class-name">Connector</span> port<span class="token operator">=</span><span class="token string">"8010"</span> protocol<span class="token operator">=</span><span class="token string">"AJP/1.3"</span> redirectPort<span class="token operator">=</span><span class="token string">"8443"</span><span class="token operator">&gt;</span>
</code></pre> 
<pre><code class="prism language-java">vi <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span><span class="token operator">/</span>conf<span class="token operator">/</span>server<span class="token punctuation">.</span>xml
</code></pre> 
<pre><code class="prism language-java">在：模式下输入全局替换命令，执行下面<span class="token number">3</span>次命令
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8005</span><span class="token operator">/</span><span class="token number">8510</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8080</span><span class="token operator">/</span><span class="token number">8010</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8009</span><span class="token operator">/</span><span class="token number">8910</span><span class="token operator">/</span>g
</code></pre> 
<pre><code class="prism language-java">vi <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">BBB</span><span class="token operator">/</span>conf<span class="token operator">/</span>server<span class="token punctuation">.</span>xml
</code></pre> 
<pre><code class="prism language-java">在：模式下输入全局替换命令，执行下面<span class="token number">3</span>次命令
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8005</span><span class="token operator">/</span><span class="token number">8520</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8080</span><span class="token operator">/</span><span class="token number">8020</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8009</span><span class="token operator">/</span><span class="token number">8920</span><span class="token operator">/</span>g
</code></pre> 
<pre><code class="prism language-java">vi <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">CCC</span><span class="token operator">/</span>conf<span class="token operator">/</span>server<span class="token punctuation">.</span>xml
</code></pre> 
<pre><code class="prism language-java">在：模式下输入全局替换命令，执行下面<span class="token number">3</span>次命令
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8005</span><span class="token operator">/</span><span class="token number">8530</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8080</span><span class="token operator">/</span><span class="token number">8030</span><span class="token operator">/</span>g
<span class="token operator">%</span>s<span class="token operator">/</span><span class="token number">8009</span><span class="token operator">/</span><span class="token number">8930</span><span class="token operator">/</span>g
</code></pre> 
<h3><a id="_127"></a>第四步：依次执行启动命令</h3> 
<p>以启动tomcat同时并输出日志</p> 
<pre><code class="prism language-java">sh <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span><span class="token operator">/</span>bin<span class="token operator">/</span>startup<span class="token punctuation">.</span>sh<span class="token operator">&amp;</span>tail <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span><span class="token operator">/</span>logs<span class="token operator">/</span>catalina<span class="token punctuation">.</span>out
sh <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">BBB</span><span class="token operator">/</span>bin<span class="token operator">/</span>startup<span class="token punctuation">.</span>sh<span class="token operator">&amp;</span>tail <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">BBB</span><span class="token operator">/</span>logs<span class="token operator">/</span>catalina<span class="token punctuation">.</span>out
sh <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">CCC</span><span class="token operator">/</span>bin<span class="token operator">/</span>startup<span class="token punctuation">.</span>sh<span class="token operator">&amp;</span>tail <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">CCC</span><span class="token operator">/</span>logs<span class="token operator">/</span>catalina<span class="token punctuation">.</span>out
</code></pre> 
<p>查询端口：</p> 
<pre><code class="prism language-java">netstat <span class="token operator">-</span>lnp<span class="token operator">|</span>grep <span class="token number">8010</span>
netstat <span class="token operator">-</span>lnp<span class="token operator">|</span>grep <span class="token number">8020</span>
netstat <span class="token operator">-</span>lnp<span class="token operator">|</span>grep <span class="token number">8030</span>
</code></pre> 
<p>查看日志：</p> 
<pre><code class="prism language-java">tail <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">AAA</span><span class="token operator">/</span>logs<span class="token operator">/</span>catalina<span class="token punctuation">.</span>out
tail <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">BBB</span><span class="token operator">/</span>logs<span class="token operator">/</span>catalina<span class="token punctuation">.</span>out
tail <span class="token operator">-</span>f <span class="token operator">/</span>home<span class="token operator">/</span>webapp<span class="token operator">/</span>tomcat<span class="token operator">-</span>uat<span class="token operator">-</span><span class="token constant">CCC</span><span class="token operator">/</span>logs<span class="token operator">/</span>catalina<span class="token punctuation">.</span>out
</code></pre> 
<pre><code class="prism language-java">netstat <span class="token operator">-</span>lnp <span class="token operator">|</span> grep <span class="token number">8010</span>
ps <span class="token operator">-</span>ef <span class="token operator">|</span>grep tomcat
kill 端口

关掉端口为<span class="token number">8020</span>的进程
sudo kill <span class="token operator">-</span><span class="token number">9</span> $<span class="token punctuation">(</span>sudo lsof <span class="token operator">-</span>t <span class="token operator">-</span>i<span class="token operator">:</span><span class="token number">8020</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e4590c80e51d89c590b169465dfbc8cb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">BI技巧丨利用Rank函数排名</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/74deab04debf539b8c3169506ea196ef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人间道－您到底做错了什么：正心径之您要逐渐去除外邪行为</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>