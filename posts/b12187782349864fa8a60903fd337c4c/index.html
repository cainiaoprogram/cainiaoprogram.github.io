<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>unity脚部IK实时贴合地面，布娃娃系统 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="unity脚部IK实时贴合地面，布娃娃系统" />
<meta property="og:description" content="目录
角色的导入
下面开始介绍这个插件的使用
GroundIK
AimIK
RagdollUtility布娃娃系统
角色的导入 为了方便我们对人物的控制，这边为了方便我们为其添加一个免费的第三人称控制器
将该控制器的脚本与动画状态机添加到我们的模型中
下面开始介绍这个组件的使用 添加Full BodyBipped Ik组件，这个组件会将模型的骨骼节点都添加上去，如果报红就需要调整骨骼节点的旋转，位置，直至正常。 FixTrransformS 该属性用于控制所有骨骼都收IK的影响，关闭该属性其余骨骼节点不会跟随选中的骨骼做IK运动
Referencces 用于绑定各部分的骨骼节点，可以手动调节
Spin与Eyes 手动添加其他部分的骨骼节点
RootNode 所有骨骼的父类
Weight 整体的权重设置
Iterations 当前骨骼节点对于其他骨骼节点影响的大小，如果调节成0，该节点不会影响其他节点
下面的几个属性分别是控制身体四肢节点的属性
GroundIK 该组件用于脚部实时贴合地面
Weight 控制整体的权重
Layers 射线检测的层，一般设置地面层
MaxStep 脚部能踩的最大高度，可以理解为阶梯的高度
HeightOffset 脚部距离地面的高度差当该属性值大于0时，脚部会跟地面有一段距离
FootSppeed 行走时脚部IK到达地面的速度，数值越大Ik的速度越快
FootRadius 脚部射线检测的半径，他会发射一条圆形射线检测范围
Prediction 判断前方碰撞体大小，主要是防止穿模，数值越大越不容易穿模
FootRotatiomWeight 脚部旋转的偏移
FootRotatiomSpeed 脚部旋转的速度
MaxFootRotatiomAngle 脚部旋转的最大偏移量（角度）
PelvisSpeed 盘骨上下移动的速度，人物向前移动时盘古一定也会移动
PelvisDamper 盘骨位移速度的一个缓冲值
RootSphereCCastRadius 根节点的射线检测距离
Quality 质量
Spine 可以设置其它节点的IK影响
Size 受影响节点的个数
EffectorType 设置受影响节点的部位
HorizontalWeight 水平影响力
VerticalWeight 垂直影响力
AimIK 该组件一般用于射击游戏的瞄准
Target 瞄准的目标" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b12187782349864fa8a60903fd337c4c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-27T21:10:37+08:00" />
<meta property="article:modified_time" content="2023-05-27T21:10:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">unity脚部IK实时贴合地面，布娃娃系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E8%A7%92%E8%89%B2%E7%9A%84%E5%AF%BC%E5%85%A5-toc" style="margin-left:80px;"><a href="#%E8%A7%92%E8%89%B2%E7%9A%84%E5%AF%BC%E5%85%A5" rel="nofollow">角色的导入</a></p> 
<p id="%E4%B8%8B%E9%9D%A2%E5%BC%80%E5%A7%8B%E4%BB%8B%E7%BB%8D%E8%BF%99%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:80px;"><a href="#%E4%B8%8B%E9%9D%A2%E5%BC%80%E5%A7%8B%E4%BB%8B%E7%BB%8D%E8%BF%99%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">下面开始介绍这个插件的使用</a></p> 
<p id="GroundIK-toc" style="margin-left:80px;"><a href="#GroundIK" rel="nofollow">GroundIK</a></p> 
<p id="AimIK-toc" style="margin-left:80px;"><a href="#AimIK" rel="nofollow">AimIK</a></p> 
<p id="RagdollUtility%E5%B8%83%E5%A8%83%E5%A8%83%E7%B3%BB%E7%BB%9F-toc" style="margin-left:80px;"><a href="#RagdollUtility%E5%B8%83%E5%A8%83%E5%A8%83%E7%B3%BB%E7%BB%9F" rel="nofollow">RagdollUtility布娃娃系统</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h4 id="%E8%A7%92%E8%89%B2%E7%9A%84%E5%AF%BC%E5%85%A5" style="margin-left:0;text-align:justify;">角色的导入</h4> 
<p style="margin-left:0;text-align:justify;">为了方便我们对人物的控制，这边为了方便我们为其添加一个免费的第三人称控制器</p> 
<p style="margin-left:0;text-align:justify;">将该控制器的脚本与动画状态机添加到我们的模型中</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="280" src="https://images2.imgbox.com/27/c2/4T1JWsOv_o.png" width="438"></p> 
<p> </p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4 id="%E4%B8%8B%E9%9D%A2%E5%BC%80%E5%A7%8B%E4%BB%8B%E7%BB%8D%E8%BF%99%E4%B8%AA%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%BF%E7%94%A8" style="margin-left:0;text-align:justify;">下面开始介绍这个组件的使用</h4> 
<p>添加Full BodyBipped Ik组件，这个组件会将模型的骨骼节点都添加上去，如果报红就需要调整骨骼节点的旋转，位置，直至正常。 <img alt="" height="1080" src="https://images2.imgbox.com/ca/f5/paT1Y0wd_o.png" width="1200"></p> 
<p><img alt="" height="548" src="https://images2.imgbox.com/5d/07/waqpVQPg_o.png" width="273"></p> 
<p><span style="background-color:#FFFF00;">FixTrransformS</span> 该属性用于控制所有骨骼都收IK的影响，关闭该属性其余骨骼节点不会跟随选中的骨骼做IK运动</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Referencces</span> 用于绑定各部分的骨骼节点，可以手动调节</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Spin</span><span style="background-color:#FFFF00;">与Eyes</span> 手动添加其他部分的骨骼节点</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">RootNode</span> 所有骨骼的父类</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Weight</span> 整体的权重设置</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Iterations</span> 当前骨骼节点对于其他骨骼节点影响的大小，如果调节成0，该节点不会影响其他节点</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">下面的几个属性分别是控制身体四肢节点的属性</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4 id="GroundIK" style="margin-left:0;text-align:justify;">GroundIK</h4> 
<p style="margin-left:0;text-align:justify;">该组件用于脚部实时贴合地面</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="427" src="https://images2.imgbox.com/c0/2b/gtre9Mxj_o.png" width="271"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Weight</span> 控制整体的权重</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Layers</span>  射线检测的层，一般设置地面层</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">MaxStep</span> 脚部能踩的最大高度，可以理解为阶梯的高度</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="225" src="https://images2.imgbox.com/b5/46/zmssuJmb_o.png" width="239"> </p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">HeightOffset</span> 脚部距离地面的高度差当该属性值大于0时，脚部会跟地面有一段距离</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">FootSppeed</span> 行走时脚部IK到达地面的速度，数值越大Ik的速度越快</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">FootRadius</span>  脚部射线检测的半径，他会发射一条圆形射线检测范围</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Prediction</span>   判断前方碰撞体大小，主要是防止穿模，数值越大越不容易穿模</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">FootRotatiomWeight</span>  脚部旋转的偏移</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">FootRotatiomSpeed</span>  脚部旋转的速度</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">MaxFootRotatiomAngle</span>  脚部旋转的最大偏移量（角度）</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">PelvisSpeed</span>  盘骨上下移动的速度，人物向前移动时盘古一定也会移动</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">PelvisDamper</span>  盘骨位移速度的一个缓冲值</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">RootSphereCCastRadius</span> 根节点的射线检测距离</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Quality</span> 质量</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Spine</span>  可以设置其它节点的IK影响</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="209" src="https://images2.imgbox.com/f6/ae/McfudUa9_o.png" width="455"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Size</span>  受影响节点的个数</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">EffectorType</span>  设置受影响节点的部位</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">HorizontalWeight</span>  水平影响力</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">VerticalWeight</span>  垂直影响力</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4 id="AimIK" style="margin-left:0;text-align:justify;">AimIK</h4> 
<p style="margin-left:0;text-align:justify;">该组件一般用于射击游戏的瞄准</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="305" src="https://images2.imgbox.com/10/48/7INFK4yd_o.png" width="374"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Target</span>  瞄准的目标</p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#ffd900;">PoleTarget</span>  身体的左右倾斜</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#ffd900;">AimTransform</span>  瞄准的方向 （一般创建一个空物体调整好方向绑定在想要瞄准的武器上）</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="247" src="https://images2.imgbox.com/3f/2c/LjiyMFJa_o.png" width="447"> </p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Axis</span>  AimTransform绑定的物体的轴向</p> 
<p style="margin-left:0;text-align:justify;">如果瞄准的物体在人物模型后方时，可能会出现比较鬼畜的效果。这时我们可以设置骨骼节点的最大偏移量，旋转</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">角度。</p> 
<p style="margin-left:0;text-align:justify;">在FullBodyBipedIK组件中分别设置Position, Rotation, Maintain的大小</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="245" src="https://images2.imgbox.com/c3/9d/lJoegsJq_o.png" width="300"></p> 
<p> </p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">Boness</span>  添加受影响骨骼节点，并且可以修改受影响的骨骼权重大小</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h4 id="RagdollUtility%E5%B8%83%E5%A8%83%E5%A8%83%E7%B3%BB%E7%BB%9F" style="margin-left:0;text-align:justify;">RagdollUtility布娃娃系统</h4> 
<p style="margin-left:0;text-align:justify;">首先在3D对象中选择布娃娃</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="260" src="https://images2.imgbox.com/02/24/aTbazQUa_o.png" width="341"></p> 
<p> </p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">添加上对应的骨骼节点后点击Ccreate</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="350" src="https://images2.imgbox.com/b7/a5/VyzCr2gw_o.png" width="577"></p> 
<p> </p> 
<p style="margin-left:0;text-align:justify;">如果此时没有动画控制骨骼的话，一种比较自然的死亡动作</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="326" src="https://images2.imgbox.com/d3/18/XJfe3Mu9_o.png" width="467"></p> 
<p> </p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">添加RagdullUtility脚本</span>，将将IK组件传入。该脚本提供了几个方法专门用于控制玩家的死亡动画</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="364" src="https://images2.imgbox.com/69/5a/zgGnYbWJ_o.png" width="376"></p> 
<p> </p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">下面开始敲代码</p> 
<p style="margin-left:0;text-align:justify;">改组件在RootMotion.FinalIK<span style="background-color:#FFFF00;">命名空间下</span>。   </p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">EnableRagdoll() //</span><span style="color:#000000;">死亡  方向随机</span></p> 
<p style="margin-left:0;text-align:justify;"><span style="color:#000000;">DisableRagdoll() //</span><span style="color:#000000;">不死了</span></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="450" src="https://images2.imgbox.com/7f/b2/OrB5iG2n_o.png" width="381"></p> 
<p> </p> 
<p style="margin-left:0;text-align:justify;">下面介绍该组件下的其他属性</p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">RagdollToAnimationTime</span>  用于控制死亡方法的时间，数值越高死亡越慢</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">ApplyIKOnRaggdoll</span>  是否启用IK，可以控制其他Ik节点</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;"><span style="background-color:#FFFF00;">最后两个属性</span>  用于控制各个节点的刚体组件过渡死亡方法的的速度</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0bb7fa711ff49471708d0e6fc6867e0b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32---按键控制小灯</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2d5c75339acb362c4f0ecc4dfbd495f9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装 TensorFlow GPU版（2023年）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>