<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu20.04安装ROS2 Foxy - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu20.04安装ROS2 Foxy" />
<meta property="og:description" content="Ubuntu20.04安装ROS2 Foxy 实操安装 安装ROS2的教程在网上很多，但是我操作之后都有问题，大部分的问题是在 sudo apt update 时访问packages.ros.org无法成功，主要的原因是没有外网，而自己整一个外网代理又非常麻烦，所以一般是通过设置国内源来实现
设置sources.list为国内源
修改 /etc/apt/sources.list里面的源为国内的
sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak sudo vim /etc/apt/sources.list 如清华大学的源：https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu-ports/ 注意：一定要选择跟自己ubuntu版本匹配的源，我的是ubuntu20.04，对应的源是：
# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释 deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-updates main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-backports main restricted universe multiverse # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-backports main restricted universe multiverse deb http://ports." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8ab5db35f70dfd0e05582f425072fc56/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T10:35:26+08:00" />
<meta property="article:modified_time" content="2024-01-06T10:35:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu20.04安装ROS2 Foxy</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="Ubuntu2004ROS2_Foxy_0"></a>Ubuntu20.04安装ROS2 Foxy</h4> 
<h5><a id="_2"></a>实操安装</h5> 
<p>安装ROS2的教程在网上很多，但是我操作之后都有问题，大部分的问题是在 <code>sudo apt update</code> 时访问packages.ros.org无法成功，主要的原因是没有外网，而自己整一个外网代理又非常麻烦，所以一般是通过设置国内源来实现</p> 
<p>设置sources.list为国内源</p> 
<p>修改 <code>/etc/apt/sources.list</code>里面的源为国内的</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.bak
<span class="token function">sudo</span> <span class="token function">vim</span> /etc/apt/sources.list
</code></pre> 
<p>如清华大学的源：https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu-ports/ 注意：<strong>一定要选择跟自己ubuntu版本匹配的源</strong>，我的是ubuntu20.04，对应的源是：</p> 
<pre><code class="prism language-sql"><span class="token comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span>
deb https:<span class="token comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal main restricted universe multiverse</span>
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal main restricted universe multiverse</span>
deb https:<span class="token comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-updates main restricted universe multiverse</span>
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-updates main restricted universe multiverse</span>
deb https:<span class="token comment">//mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-backports main restricted universe multiverse</span>
<span class="token comment"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-backports main restricted universe multiverse</span>

deb http:<span class="token comment">//ports.ubuntu.com/ubuntu-ports/ focal-security main restricted universe multiverse</span>
<span class="token comment"># deb-src http://ports.ubuntu.com/ubuntu-ports/ focal-security main restricted universe multiverse</span>

<span class="token comment"># 预发布软件源，不建议启用</span>
<span class="token comment"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-proposed main restricted universe multiverse</span>
<span class="token comment"># # deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu-ports/ focal-proposed main restricted universe multiverse</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/99/dc/nlunGOVj_o.png" alt=""></p> 
<p>设置编码为UTF-8</p> 
<pre><code class="prism language-shell">locale
<span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> locales
<span class="token function">sudo</span> locale-gen en_US en_US.UTF-8
<span class="token function">sudo</span> update-locale <span class="token assign-left variable"><span class="token environment constant">LC_ALL</span></span><span class="token operator">=</span>en_US.UTF-8 <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>en_US.UTF-8
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">LANG</span></span><span class="token operator">=</span>en_US.UTF-8
locale
</code></pre> 
<p>添加ROS2的apt仓库到自己的系统</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> software-properties-common
<span class="token function">sudo</span> add-apt-repository universe

<span class="token function">apt-cache</span> policy <span class="token operator">|</span> <span class="token function">grep</span> universe
</code></pre> 
<p><img src="https://images2.imgbox.com/ee/34/JJziyFrT_o.png" alt=""></p> 
<p>更新并安装curl 、gnupg2 、lsb-release等软件</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">curl</span> gnupg2 lsb-release
</code></pre> 
<p>与apt授权GPG密钥</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">curl</span> <span class="token parameter variable">-verbose</span> <span class="token parameter variable">-sSL</span> https://raw.githubusercontent.com/ros/rosdistro/master/ros.key  <span class="token parameter variable">-o</span> /usr/share/keyrings/ros-archive-keyring.gpg
</code></pre> 
<p>如果这一步有问题，参考：https://blog.searchinfogo.com/2021/01/27/github-connection-refused/</p> 
<p>添加ROS2仓库到自己的source.list</p> 
<p>如果设置了<strong>科学上网</strong>可以执行如下命令</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">echo</span> <span class="token string">"deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://packages.ros.org/ros2/ubuntu <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">source</span> /etc/os-release <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> $UBUNTU_CODENAME<span class="token variable">)</span></span> main"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/ros2.list <span class="token operator">&gt;</span> /dev/null
</code></pre> 
<p>如果<strong>无法科学上网</strong>，需要将域名<strong>packages.ros.org</strong>替换为国内的镜像源的域名，这里我替换为清华大学源域名<strong>mirrors.tuna.tsinghua.edu.cn</strong>，建议最好替换一下</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">echo</span> <span class="token string">"deb [arch=<span class="token variable"><span class="token variable">$(</span>dpkg --print-architecture<span class="token variable">)</span></span> signed-by=/usr/share/keyrings/ros-archive-keyring.gpg] http://mirrors.tuna.tsinghua.edu.cn/ros2/ubuntu <span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">source</span> /etc/os-release <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> $UBUNTU_CODENAME<span class="token variable">)</span></span> main"</span> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/apt/sources.list.d/ros2.list <span class="token operator">&gt;</span> /dev/null
</code></pre> 
<p>更新</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> upgrade
</code></pre> 
<p>安装ROS2-Foxy（带ROS, RViz, demos, tutorials等）</p> 
<pre><code>sudo apt install ros-foxy-desktop
</code></pre> 
<p>如果指向安装基础包，执行以下指令</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> ros-foxy-ros-base
</code></pre> 
<p>默认情况下，每次打开新shell终端时都必source安装文件，执行</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /opt/ros/foxy/setup.bash
</code></pre> 
<p>可以将命令添加到shell启动脚本中，后面就不需要再输入<code>source /opt/ros/foxy/setup.bash</code></p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">echo</span> <span class="token string">"source /opt/ros/foxy/setup.bash"</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc
</code></pre> 
<p>测试安装结果</p> 
<p>1、测试talker和listener</p> 
<p>启动talker</p> 
<pre><code class="prism language-shell">ros2 run demo_nodes_cpp talker
</code></pre> 
<p>启动listener</p> 
<pre><code class="prism language-shell">ros2 run demo_nodes_py listener
</code></pre> 
<p>2、测试小海龟</p> 
<p>打开终端，创建海龟</p> 
<pre><code class="prism language-shell">ros2 run turtlesim turtlesim_node
</code></pre> 
<p>打开新终端，创建鼠标控制</p> 
<pre><code class="prism language-shell">ros2 run turtlesim turtle_teleop_key
</code></pre> 
<h5><a id="_151"></a>参考</h5> 
<p>https://github.com/ya77ya/Installation-ROS-2-on-Jetson-Nano</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/280ab23fe2f494ff3a0e55c5fe82c869/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">物联网协议Coap中Californium CoapClient解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e5964c6bfde153527cbd58df206aa8cd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">(一)Spring Cloud 直击微服务作用、架构应用、hystrix降级</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>