<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mybatis数据库一对一查询 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mybatis数据库一对一查询" />
<meta property="og:description" content="1，进行一对一查询，首先准备两个mysql数据表
#创建user表用来储存用户个人用户名及密码
CREATE TABLE `user`( `uId` INT(32) PRIMARY KEY AUTO_INCREMENT, `uName` VARCHAR(255) NOT NULL, `uPassword` VARCHAR(255) NOT NULL ); #插入数据： INSERT INTO `user` VALUES (1, &#39;admin&#39;, &#39;35433&#39;); #创建user_information表用来储存用户个人信息
CREATE TABLE `user_information` ( `id` INT PRIMARY KEY AUTO_INCREMENT, `name` varchar(50), `address` varchar(255), `email` varchar(255) , `phone` DOUBLE(60,0), `user_id` INT UNIQUE, FOREIGN KEY (user_id) REFERENCES user(uId) ); #插入数据： INSERT INTO `user_information`(id,name,address,email) VALUES (1, &#39;安娜&#39;, &#39;湖南省长沙市&#39;, &#39;204854854@qq.com&#39;); 2，在IDEA创建maven项目并命名JavaEE
在项目src/main/java下创建com.three.pojo包
#在pojo包下创建Person类封装属性值及返回成员变量：
package com.three.pojo.person; public class Person { private Integer uId; private String uName; private String uPassword; public Integer getuId() { return uId; } public void setuId(int uId) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8ad4d9f449bd2eda80d1814672b1781c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-23T15:53:13+08:00" />
<meta property="article:modified_time" content="2023-03-23T15:53:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mybatis数据库一对一查询</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style=""><span class="kdocs-color" style="color:#C21C13;">1，进行一对一查询，首先准备两个mysql数据表</span></p> 
 <p style=""><span class="kdocs-color" style="color:#DA326B;">#创建user表用来储存用户个人用户名及密码</span></p> 
 <pre class="kdocs-sql"><code class="language-sql">CREATE TABLE `user`(
`uId` INT(32) PRIMARY KEY AUTO_INCREMENT,
`uName` VARCHAR(255) NOT NULL,
`uPassword` VARCHAR(255) NOT NULL
);
#插入数据：
INSERT INTO `user` VALUES (1, 'admin', '35433');
</code></pre> 
 <p style="text-align:left;"><span class="kdocs-color" style="color:#DA326B;">#创建user_information表用来储存用户个人信息</span></p> 
 <pre class="kdocs-sql"><code class="language-sql">CREATE TABLE `user_information`  (
`id` INT PRIMARY KEY AUTO_INCREMENT,
`name` varchar(50),
`address` varchar(255),
`email` varchar(255) ,
`phone` DOUBLE(60,0),
`user_id` INT UNIQUE,
FOREIGN KEY (user_id) REFERENCES user(uId)
);
#插入数据：
INSERT INTO `user_information`(id,name,address,email) VALUES (1, '安娜', '湖南省长沙市', '204854854@qq.com');</code></pre> 
 <p style="text-align:left;"><span class="kdocs-color" style="color:#C21C13;">2，在IDEA创建maven项目并命名</span><span class="kdocs-color" style="color:#116AF0;">JavaEE</span></p> 
 <p style="">在项目src/main/java下创建com.three.pojo包</p> 
 <p style="text-align:left;"><span class="kdocs-color" style="color:#DA326B;">#在pojo包下创建</span><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">Person</span></span><span class="kdocs-color" style="color:#DA326B;">类封装属性值及返回成员变量</span><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#DA326B;">：</span></span></p> 
 <pre class="kdocs-java"><code class="language-java">package com.three.pojo.person;

public class Person {
    private Integer uId;
    private String uName;
    private String uPassword;

    public Integer getuId() {
        return uId;
    }

    public void setuId(int uId) {
        this.uId = uId;
    }

    public String getuName() {
        return uName;
    }

    public void setuName(String uName) {
        this.uName = uName;
    }

    public String getuPassword() {
        return uPassword;
    }

    public void setuPassword(String uPassword) {
        this.uPassword = uPassword;
    }

    @Override
    public String toString() {
        return "{" +
                "用户ID:" + uId +
                ", 用户名:'" + uName + '\'' +
                ", 用户密码:'" + uPassword + '\'' +
                '}';
    }
}
</code></pre> 
 <p style="text-align:left;"><span class="kdocs-color" style="color:#DA326B;">#在pojo包下创建</span><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">PersonInformation</span></span><span class="kdocs-color" style="color:#DA326B;">类封装属性值及返回成员变量</span><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#DA326B;">：</span></span></p> 
 <pre class="kdocs-java"><code class="language-java">package com.three.pojo.person;

public class PersonInformation {
    private Integer id;
    private String name;
    private String address;
    private String email;
    private Double phone;
    private Person person;

    public Integer getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public Double getPhone() {
        return phone;
    }

    public void setPhone(Double phone) {
        this.phone = phone;
    }

    public Person getPerson() {
        return person;
    }

    public void setPerson(Person person) {
        this.person = person;
    }

    @Override
    public String toString() {
        return "用户信息:{" +
                "ID:" + id +
                ", 姓名:'" + name + '\'' +
                ", 地址:'" + address + '\'' +
                ", 邮箱:'" + email + '\'' +
                ", 电话:" + phone +
                ", 用户账号:" + person +
                '}';
    }
}
</code></pre> 
 <p style="">在项目com.three下创建dao包并在当前位置创建接口类<span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">InformationMapper</span></span></p> 
 <pre class="kdocs-java"><code class="language-java">package com.three.dao;

import com.three.pojo.person.PersonInformation;
import com.three.pojo.reader.Readers;

import java.util.List;

public interface InformationMapper {
    public List&lt;PersonInformation&gt; selectOne_for_one(Integer id);

}
</code></pre> 
 <p style="">在com.three下创建包untils包存放工具类<span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">Mybatis</span></span></p> 
 <pre class="kdocs-java"><code class="language-java">package com.three.utils;

import org.apache.ibatis.io.Resources;
import org.apache.ibatis.session.SqlSession;
import org.apache.ibatis.session.SqlSessionFactory;
import org.apache.ibatis.session.SqlSessionFactoryBuilder;

import java.io.IOException;
import java.io.Reader;

public class Mybatis {
    private static SqlSessionFactory sqlSessionFactory=null;
    static {
        try {
            Reader reader= Resources.getResourceAsReader("mybatis-config.xml");
            SqlSessionFactoryBuilder builder=new SqlSessionFactoryBuilder();
            sqlSessionFactory=builder.build(reader);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
    public static SqlSession getSqlSession(){
        return sqlSessionFactory.openSession(true);
    }
}
</code></pre> 
 <p style="">#为了美观查询界面，为此准备了一个Swing窗口JFrame，JTable的<span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">TableOne_for_one</span></span></p> 
 <pre class="kdocs-java"><code class="language-java">package com.three.utils;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import java.awt.*;

public class TableOne_for_one extends JFrame {
    private static JLabel jLabel1,jLabel2;
    private static DefaultTableModel dTableModel1,dTableModel2;
    private static JTable table1,table2;
    private static JScrollPane jScrollPane1,jScrollPane2;
    private static JPanel jPanelA,jPanelB,jPanel1,jPanel2;
    private static Object[] columns1 = {"ID", "姓名","地址", "邮箱", "电话"};
    private static Object[] columns2 = {"用户ID","用户名","用户密码"};

    private static Object[][] data = null;

    {
        jScrollPane1=new JScrollPane();
        jPanel1=new JPanel();
        jPanel1.setBackground(Color.magenta);
        dTableModel1=new DefaultTableModel(data,columns1);
        dTableModel1.setRowCount(0);
        table1=new JTable(dTableModel1);
        table1.setBackground(Color.CYAN);
        jScrollPane1.setViewportView(table1);

        jScrollPane2=new JScrollPane();
        jPanel2=new JPanel();
        jPanel2.setBackground(Color.blue);
        dTableModel2=new DefaultTableModel(data,columns2);
        dTableModel2.setRowCount(0);
        table2=new JTable(dTableModel2);
        table2.setBackground(Color.yellow);
        jScrollPane2.setViewportView(table2);

        jPanel1.add(jScrollPane1);;
        jPanel2.add(jScrollPane2);

        this.setTitle("用户信息查询表：(一对一查询)");
        this.setBounds(100,0,1000,500);
        this.setBackground(Color.PINK);
        this.setLayout(new FlowLayout(FlowLayout.CENTER));
        this.add(jPanel1);
        this.add(jPanel2);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);
    }
    public DefaultTableModel addTable1(){
        return dTableModel1;
    }
    public DefaultTableModel addTable2(){
        return dTableModel2;
    }
}
</code></pre> 
 <p style="">在当前dao包下创建impl包并在此包下实现类<span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">InformationMapperImpl</span></span></p> 
 <pre class="kdocs-java"><code class="language-java">package com.three.dao.impl;

import com.three.dao.InformationMapper;
import com.three.pojo.person.PersonInformation;
import com.three.pojo.reader.Readers;
import com.two.utils.Mybatis;
import org.apache.ibatis.session.SqlSession;

import java.util.List;

public class InformationMapperImpl implements InformationMapper {
    @Override
    public List&lt;PersonInformation&gt; selectOne_for_one(Integer id) {
        SqlSession session= Mybatis.getSqlSession();
        return session.selectList("selectOne_for_one",id);
    }

}
</code></pre> 
 <p style="">在resource下创建文件夹mappers，并在文件夹下创建<span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">InformationMapper.xml</span><span class="kdocs-color" style="color:#080F17;">编写SQL语句</span></span></p> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt;
&lt;!--namespace的值通常为接口的全限定名--&gt;
&lt;mapper namespace="com.three.dao.InformationMapper"&gt;

&lt;!--    一对一查询用户名与用户信息。--&gt;
    &lt;select id="selectOne_for_one" parameterType="Integer" resultMap="personInformations"&gt;
        select find.*,serch.uName,serch.uPassword
        from user_information find,user serch
        where find.user_id=serch.uId
        and find.id=#{id}
    &lt;/select&gt;
    &lt;resultMap id="personInformations" type="PersonInformation"&gt;
        &lt;id property="id" column="id"/&gt;
        &lt;result property="name" column="name"/&gt;
        &lt;result property="address" column="address"/&gt;
        &lt;result property="email" column="email"/&gt;
        &lt;result property="phone" column="phone"/&gt;
        &lt;association property="person" javaType="Person"&gt;
            &lt;id property="uId" column="user_id"/&gt;
            &lt;result property="uName" column="uName"/&gt;
            &lt;result property="uPassword" column="uPassword"/&gt;
        &lt;/association&gt;
    &lt;/resultMap&gt;
&lt;/mapper&gt;</code></pre> 
 <p style="">在测试包下编写测试类<span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-color" style="color:#116AF0;">Three</span></span></p> 
 <pre class="kdocs-xml"><code class="language-xml">import com.three.dao.InformationMapper;
import com.three.dao.impl.InformationMapperImpl;
import com.three.pojo.person.Person;
import com.three.pojo.person.PersonInformation;
import com.three.pojo.reader.Lend_Books;
import com.three.pojo.reader.Readers;
import com.three.utils.TableOne_for_many;
import com.three.utils.TableOne_for_one;

import java.util.List;

public class Three {
    public static void main(String[] args) {
        Three three=new Three();
        three.one_for_one();
    }
    public void one_for_one() {
        InformationMapper informationMapper=new InformationMapperImpl();
        List&lt;PersonInformation&gt; informations = informationMapper.selectOne_for_one(6);
        TableOne_for_one table=new TableOne_for_one();
        for (PersonInformation personInformation:informations){
            String[] arr=new String[5];
            arr[0]= String.valueOf(personInformation.getId());
            arr[1]=personInformation.getName();
            arr[2]=personInformation.getAddress();
            arr[3]=personInformation.getEmail();
            arr[4]= String.valueOf(personInformation.getPhone());
            table.addTable1().addRow(arr);

            Person person=personInformation.getPerson();
            String[] brr=new String[3];
            brr[0]= String.valueOf(person.getuId());
            brr[1]=person.getuName();
            brr[2]= person.getuPassword();
            table.addTable2().addRow(brr);
        }
        System.out.println(informations);

    }
   
}
</code></pre> 
 <p style="">测试结果如下</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1869px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:9.202783%;height:0;"> 
    <img src="https://images2.imgbox.com/6d/83/UpnZjH09_o.png" style="margin-left:;display:block;width:1869px;margin-top:-9.202783%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:1500px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:50.0%;height:0;"> 
    <img src="https://images2.imgbox.com/e7/f1/5ocguy4R_o.png" style="margin-left:;display:block;width:1500px;margin-top:-50.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6c609982026aa5d997cd4565260ccfe6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android 12 蓝牙适配 Java版</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d01979a678ffef5bd82f8767257d1152/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">十道必问的软件测试面试题（含答案解析）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>