<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Android Activity】IntentFilter的匹配规则 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Android Activity】IntentFilter的匹配规则" />
<meta property="og:description" content="启动 Activity 分为两种，显式调用和隐式调用。显式调用需要明确指出被启动组件的包名类名。隐式调用需要 Intent 能够匹配目标组件的 IntentFilter 中所设置的过滤信息，如果不匹配将无法启动目标 Activity
一、IntentFilter 简介 意图过滤器的意思manifest文件中activity标签的子标签。IntentFilter 的过滤信息（子标签）有 action、category、data 1、IntentFilter 注意点 1、一个activity下可能有多个intentfilter，一个intent只要能匹配任何一组intentFilter下的信息便可成功启动activity。
2、一个intentFilter中action 、category、data都可以有多个。
3、想要隐式开启activity 必须在intentFilter添加 &lt;category android:name=“android.intent.category.DEFAULT” /&gt;
二、Action规则 1、系统定义了一些Action字符串 &lt;activity android:name=&#34;.MainActivity&#34;&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;android.intent.action.MAIN&#34; /&gt; &lt;action android:name=&#34;android.intent.action.VIEW&#34;/&gt; &lt;category android:name=&#34;android.intent.category.LAUNCHER&#34; /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; 2、我们也可以自定义Action字符串 &lt;activity android:name=&#34;.ActivityC&#34;&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;com.example.test&#34; /&gt;//添加自定义字符串即可 &lt;category android:name=&#34;android.intent.category.DEFAULT&#34; /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; 3、Action匹配规则 1、intentFilter中的action可以有很多，只要intent添加的action和intentFilter中其中一个action匹配即可
2、action区分大小写，大小写不同的字符串是不同的action。
3、intentFilter 至少要有一个action
4、栗子 Intent intent = new Intent(); intent.setAction(&#34;com.example.test&#34;); //intent 添加action。匹配intent-filter 下的一个action即可成功打开activity startActivity(intent); &lt;activity android:name=&#34;.ActivityC&#34;&gt; &lt;intent-filter&gt; &lt;action android:name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/109838fa62b5cae241906f7098eaa2fd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-21T22:00:28+08:00" />
<meta property="article:modified_time" content="2023-09-21T22:00:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Android Activity】IntentFilter的匹配规则</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>启动 Activity 分为两种，显式调用和隐式调用。显式调用需要明确指出被启动组件的包名类名。隐式调用需要 Intent 能够匹配目标组件的 IntentFilter 中所设置的过滤信息，如果不匹配将无法启动目标 Activity</p> 
</blockquote> 
<h4><a id="IntentFilter__2"></a>一、IntentFilter 简介</h4> 
<blockquote> 
 <ul><li>意图过滤器的意思</li><li>manifest文件中activity标签的子标签。</li><li>IntentFilter 的过滤信息（子标签）有 action、category、data</li></ul> 
</blockquote> 
<h6><a id="1IntentFilter__7"></a>1、IntentFilter 注意点</h6> 
<blockquote> 
 <p>1、一个activity下可能有多个intentfilter，一个intent只要能匹配任何一组intentFilter下的信息便可成功启动activity。<br> 2、一个intentFilter中action 、category、data都可以有多个。<br> 3、想要隐式开启activity 必须在intentFilter添加 &lt;category android:name=“android.intent.category.DEFAULT” /&gt;</p> 
</blockquote> 
<h4><a id="Action_13"></a>二、Action规则</h4> 
<h6><a id="1Action_15"></a>1、系统定义了一些Action字符串</h6> 
<pre><code class="prism language-java"> <span class="token operator">&lt;</span>activity android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">".MainActivity"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.action.MAIN"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.action.VIEW"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>category android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.category.LAUNCHER"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>activity<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="2Action_26"></a>2、我们也可以自定义Action字符串</h6> 
<pre><code class="prism language-java"> <span class="token operator">&lt;</span>activity android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">".ActivityC"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"com.example.test"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token comment">//添加自定义字符串即可</span>
                <span class="token operator">&lt;</span>category android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.category.DEFAULT"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>activity<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="font_colorred3Actionfont_35"></a><font color="red">3、Action匹配规则</font></h6> 
<blockquote> 
 <p><font color="red">1、intentFilter中的action可以有很多，只要intent添加的action和intentFilter中其中一个action匹配即可</font><br> 2、action区分大小写，大小写不同的字符串是不同的action。<br> 3、intentFilter 至少要有一个action</p> 
</blockquote> 
<h6><a id="4_40"></a>4、栗子</h6> 
<pre><code class="prism language-java"><span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
intent<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span><span class="token string">"com.example.test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//intent 添加action。匹配intent-filter 下的一个action即可成功打开activity</span>
<span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>activity android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">".ActivityC"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"com.example.test"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.action.VIEW"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>category android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"android.intent.category.DEFAULT"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>activity<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="Category_55"></a>三、Category规则</h4> 
<h6><a id="1_56"></a>1、匹配规则</h6> 
<blockquote> 
 <font color="red"> 1、intentFilter中的category可以有很多，只要intent设置的category和intentFilter的匹配即可。</font> 
 <p>2、系统在调用startActivity或者startActivityForResult时，会默认为intent加上了android.intent.category.DEFAULT这个category。所以为了activity能够接受隐式调用必须在intentFilter下设置android.intent.category.DEFAULT。</p> 
</blockquote> 
<h6><a id="2_62"></a>2、栗子</h6> 
<blockquote> 
 <p>mainactivity开启main2Activity。</p> 
</blockquote> 
<p>#MainActivity<br> <img src="https://images2.imgbox.com/c6/83/mCxiqaUq_o.png" alt="在这里插入图片描述"></p> 
<p>#main2activity的配置<br> <img src="https://images2.imgbox.com/97/e9/mgbcAHSc_o.png" alt="在这里插入图片描述"></p> 
<p>#点击按钮（直接崩溃 如下）<br> <img src="https://images2.imgbox.com/b1/0d/LCpYB043_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>找不到activity？我明明添加了action还和intentFilter下的其中一个action匹配，并且我添加了category也匹配了。这是为啥？？？还记得我们之前说过得<font color="red">系统在调用startActivity或者startActivityForResult时，默认为intent加上了android.intent.category.DEFAULT这个categor</font>所以要想隐式开启activity这个categrory必须添加待intent-filter中。</p> 
</blockquote> 
<pre><code class="prism language-java"> <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 intent<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span><span class="token string">"com.example.test1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 intent<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token class-name">Intent</span><span class="token punctuation">.</span><span class="token constant">CATEGORY_DEFAULT</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 实际还有这个 系统封装在startActivity中了</span>
 intent<span class="token punctuation">.</span><span class="token function">addCategory</span><span class="token punctuation">(</span><span class="token string">"com.example.category2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ee/7a/JhrDpQ6Y_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_data_83"></a>四、 data匹配规则</h4> 
<h6><a id="1data_84"></a>1、data简介</h6> 
<blockquote> 
 <p>data由两部分组成mimeType和URI，语法如下。</p> 
</blockquote> 
<pre><code class="prism language-java">            <span class="token operator">&lt;</span>data   android<span class="token operator">:</span>scheme<span class="token operator">=</span><span class="token string">"string"</span>
                    android<span class="token operator">:</span>host<span class="token operator">=</span><span class="token string">"string"</span>
                    android<span class="token operator">:</span>port<span class="token operator">=</span><span class="token string">"string"</span>
                    android<span class="token operator">:</span>path<span class="token operator">=</span><span class="token string">"string"</span>
                    android<span class="token operator">:</span>pathPattern<span class="token operator">=</span><span class="token string">"string"</span>
                    android<span class="token operator">:</span>pathPrefix<span class="token operator">=</span><span class="token string">"string"</span>
                    android<span class="token operator">:</span>mimeType<span class="token operator">=</span><span class="token string">"string"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="2mimeType_97"></a>2、mimeType</h6> 
<blockquote> 
 <p>1、媒体类型，如image/jpeg 、audio/mpeng4-generic、vodeo/* 可以表示图片文本视屏等不同媒体格式。<br> <font color="red">2、data 中可以不指定这个属性。<br> 3、假如data指定了mimeType，未制定scheme，scheme默认为content或file<br> 4、scheme必须为小写字母</font></p> 
</blockquote> 
<h6><a id="3URI_103"></a>3、URI结构</h6> 
<pre><code class="prism language-java"><span class="token generics"><span class="token punctuation">&lt;</span>scheme<span class="token punctuation">&gt;</span></span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token generics"><span class="token punctuation">&lt;</span>host<span class="token punctuation">&gt;</span></span><span class="token operator">:</span><span class="token generics"><span class="token punctuation">&lt;</span>port<span class="token punctuation">&gt;</span></span><span class="token operator">/</span><span class="token punctuation">[</span><span class="token generics"><span class="token punctuation">&lt;</span>path<span class="token punctuation">&gt;</span></span><span class="token operator">|</span><span class="token generics"><span class="token punctuation">&lt;</span>pathPrefix<span class="token punctuation">&gt;</span></span><span class="token operator">|</span><span class="token generics"><span class="token punctuation">&lt;</span>pathPattern<span class="token punctuation">&gt;</span></span><span class="token punctuation">]</span>
</code></pre> 
<p>（1）scheme:URI的模式，常见为http，https，file，content这些字符串，当然也可以为其他任意字符串</p> 
<p>（2） Host：URI的主机名比如 “www.baidu.com”</p> 
<p>（3）Port:URI中的端口号，比如80</p> 
<p>（4）parth ,pathPattern,pathPrefix 这三个参数表示路径信息。</p> 
<h6><a id="4_115"></a>4、栗子</h6> 
<p>（1）简单使用</p> 
<pre><code class="prism language-xml">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.VIEW<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.DEFAULT<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span>
                    <span class="token attr-name"><span class="token namespace">android:</span>host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.test<span class="token punctuation">"</span></span>
                    <span class="token attr-name"><span class="token namespace">android:</span>scheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>如上就是最简单的url匹配了,此时只要是 uri的scheme为test，host为test://com.text 就能正确匹配。</p> 
<pre><code class="prism language-kotlin">        <span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token function">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{<!-- --></span>
            action <span class="token operator">=</span> Intent<span class="token punctuation">.</span>ACTION_VIEW
            <span class="token function">addCategory</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>CATEGORY_DEFAULT<span class="token punctuation">)</span>
            <span class="token keyword">data</span> <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"test://com.test"</span></span><span class="token punctuation">)</span>
          <span class="token comment">//  如下都满足  </span>
          <span class="token comment">//  data = Uri.parse("test://com.test/b")</span>
          <span class="token comment">//  data = Uri.parse("test://com.test/b/a.txt")</span>
          <span class="token comment">//  data = Uri.parse("test://com.test/b/?articleId=1")</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> 
<p>（2）path属性</p> 
<p>这个代表指定精确的path ，错一点就匹配失败如</p> 
<pre><code class="prism language-xml">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.VIEW<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.DEFAULT<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                &lt;data
                <span class="token comment">&lt;!-- path 这里必须以/开头 --&gt;</span>
                    android:path="/a" 
                    android:host="com.test"
                    android:scheme="test" /&gt;
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-kotlin">        <span class="token function">startActivity</span><span class="token punctuation">(</span><span class="token function">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span> <span class="token punctuation">{<!-- --></span>
            action <span class="token operator">=</span> Intent<span class="token punctuation">.</span>ACTION_VIEW
            <span class="token function">addCategory</span><span class="token punctuation">(</span>Intent<span class="token punctuation">.</span>CATEGORY_DEFAULT<span class="token punctuation">)</span>
            <span class="token keyword">data</span> <span class="token operator">=</span> Uri<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"test://com.test/a"</span></span><span class="token punctuation">)</span>
           <span class="token comment">// data = Uri.parse("test://com.test/a/b") // 匹配失败</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>（3）pathPattern</p> 
<p>上面介绍了path的用法可是弊端太多如我想支持 b路径下的所有怎么办呢？我们可以如下配置</p> 
<pre><code class="prism language-xml">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>action</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.action.VIEW<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>category</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.intent.category.DEFAULT<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>data</span>
                    <span class="token attr-name"><span class="token namespace">android:</span>pathPattern</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/b/.*<span class="token punctuation">"</span></span>
                    <span class="token attr-name"><span class="token namespace">android:</span>host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.test<span class="token punctuation">"</span></span>
                    <span class="token attr-name"><span class="token namespace">android:</span>scheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>intent-filter</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>pathPattern这个类似正则的概念，但是系统支持的正则符号太少:</p> 
<p>. 表示任意字符<br> * 表示0个或者多个<br> [] 表示范围。如[0-9]、[a-z] 。[] 可结合^使用标识否定<br> + 表示零次或多次<br> {number} 表示number次</p> 
<h6><a id="5tips_193"></a>5、tips</h6> 
<blockquote> 
 <p><font color="red">1、URI是有默认值的。URI默认值为content或file。</font><br> 2、如果需要为intent指定完整的data需要调用intent.setDataAndType(uri，type);这个方法，<br> 3、setData 设置data的uri，setType 设置data的miniType但是 setData setType这两个方法彼此会清除对方值。（参考两个方法源码）</p> 
</blockquote> 
<blockquote> 
 <p><font color="blue">这样匹配规则就总结完了，另外注意intentFilter的匹配规则对Service，broadcastReceiver同样适用，不过系统对于Service的建议尽量使用显示意图来启动服务。<br> 当组件设置了intent filter后便可支持隐式开启，这时exported属性默认会为true,组件支持外部应用开启。无intent filtre时组件的exported默认为false。</font></p> 
</blockquote> 
<h4><a id="font_color__redactivity_205"></a><font color="red">五、activity相关的常用方法</font></h4> 
<h6><a id="1onNewIntent__207"></a>1、onNewIntent 触发条件有哪些？</h6> 
<blockquote> 
 <p>1、activity 设置为SingleTop 且位于栈顶：再次开启activity会走 onNewIntent<br> 2、activity设置为SingleTask、singleinstance任务栈中存在实例：再次开启activity会走onNewIntent</p> 
</blockquote> 
<h6><a id="2resolveActivity_211"></a>2、resolveActivity</h6> 
<blockquote> 
 <p>避免找不到隐式activity而crash。注意参数PackageManager.MATH_DEFAULT_ONLY的使用。</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">getPackageManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">resolveActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token class-name">PackageManager</span><span class="token punctuation">.</span><span class="token constant">MATCH_DEFAULT_ONLY</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"Activity Not Found"</span><span class="token punctuation">,</span> <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token constant">LENGTH_SHORT</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<h6><a id="4_220"></a>4、异常状态下的数据恢复</h6> 
<blockquote> 
 <p>onSaveInstanceState()<br> onRestoreInstanceState()</p> 
</blockquote> 
<p>#思想：委托思想</p> 
<blockquote> 
 <p>首先 Activity 被意外终止时，Activity 会调用 onSaveInstanceState 去保存数据，然后 Activity 会委托 Window 去保存数据，接着 Window 在委托它上面的顶级容器再去一一通知它的子元素来保存数据，这样整个数据保存过程就完成了。</p> 
</blockquote> 
<h6><a id="5startActivityForResult_227"></a>5、startActivityForResult使用</h6> 
<p>#mainActivity</p> 
<pre><code class="prism language-java">   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token class-name">SecondActivity</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">startActivityForResult</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> <span class="token number">0x01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

 <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onActivityResult</span><span class="token punctuation">(</span><span class="token keyword">int</span> requestCode<span class="token punctuation">,</span> <span class="token keyword">int</span> resultCode<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Intent</span> data<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onActivityResult</span><span class="token punctuation">(</span>requestCode<span class="token punctuation">,</span> resultCode<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>requestCode <span class="token operator">==</span> <span class="token number">0x01</span> <span class="token operator">&amp;&amp;</span> resultCode <span class="token operator">==</span> <span class="token number">0x02</span>
                <span class="token operator">&amp;&amp;</span> data <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// todo</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>#secondActivity</p> 
<pre><code class="prism language-java">        <span class="token class-name">Intent</span> intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"i am second"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setResult</span><span class="token punctuation">(</span><span class="token number">0x02</span><span class="token punctuation">,</span> intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="The_end_256"></a>The end</h4> 
<p><a href="https://developer.android.com/guide/topics/manifest/data-element" rel="nofollow">data规则官方文档</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1c1dc88dda72c15acd47e955d673d9ee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">charles maplocal时 手机上显示乱码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fed3927b366a30c44197e18e60328c39/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android Studio Debugger一直卡在collecting data</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>