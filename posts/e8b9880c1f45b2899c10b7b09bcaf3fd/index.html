<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>error while loading shared libraries的解决方案 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="error while loading shared libraries的解决方案" />
<meta property="og:description" content="https://blog.csdn.net/weixin_42310458/article/details/125180410
当运行程序时会出现如下类似错误时：
error while loading shared libraries: libXXXXXXX.so.1: cannot open shared object file: No such file or directory
默认情况下，编译器只会使用/lib和/usr/lib这两个目录下的库文件，通常通过源码包进行安装时，如果不指定–prefix，会将库安装在/usr/local/lib目录下；当运行程序需要链接动态库时，提示找不到相关的.so库，会报错。也就是说，/usr/local/lib目录不在系统默认的库搜索目录中，需要将目录加进去。
在明确已经安装该库的情况下出现上述错误，可能是这个库目录并没有加入到该环境变量中，解决办法如下：
一. 更改配置文件 一般安装目录在：
/usr/local/lib
配置文件在：/etc/ld.so.conf文件中
将该目录加入到共享库的配置文件中
将动态库文件加入配置：执行vi /etc/ld.so.conf，在&#34;include ld.so.conf.d/*.conf&#34;下方增加&#34;/usr/local/lib&#34;。
保存后，在命令行终端执行：
/sbin/ldconfig -v
ldconfig
其作用是将文件/etc/ld.so.conf列出的路径下的库文件缓存到/etc/ld.so.cache以供使用，因此当安装完一些库文件，或者修改/etc/ld.so.conf增加了库的新搜索路径，需要运行一下ldconfig，使所有的库文件都被缓存到文件/etc/ld.so.cache中，如果没做，可能会找不到刚安装的库。
经过以上三个步骤，&#34;error while loading shared libraries&#34;的问题通常情况下就可以解决了。
如果运行应用程序时，还是提示以上错误，那就得确认一下是不是当前用户在库目录下是不是没有可读的权限。像我遇到的问题就是，从别的机子拷贝了一些.so动态库，然后用root权限放到了/usr/local/lib中（普通用户没有对该目录的写权限），然后切换用户运行程序时，始终提示找不到.so库，一直以为是我配置有问题，结果是因为权限原因，那些我用root权限增加到/usr/local/lib中的.so文件对于普通用户而言，是没有访问权限的，所以以普通用户运行程序，当需要链接.so库时，在/usr/local/lib中是查找不到的。
其实，对于由普通用户自己编译生成的.so库文件，比较好的做法是将这些.so库文件的路径用export指令加入到~/.bash_profile中的LD_LIBRARY_PATH变量中，LD_LIBRARY_PATH是程序运行需要链接.so库时会去查找的一个目录，~/.bash_profile是登陆或打开shell时会读取的文件，这样，每次用户登录时，都会把这些.so库文件的路径写入LD_LIBRARY_PATH，这样就可以正常地使用这些.so库文件了。
二. 修改配置文件 修改配置文件，如~/.bashrc或~/.bash_profile或/etc/profile。
其中，普通用户可直接修改~/.bashrc或~/.bash_profile，因此，该修改仅对当前用户有效。
root用户可修改/etc/profile，且对所有用户都有效。
下面以修改~/.bashrc文件为例：
vim ~/.bashrc 1 然后，在.bashrc文件中添加如下内容：
export LD_LIBRARY_PATH=/home/dabai/mpfr-4.0.2/lib:$LD_LIBRARY_PATH 1 保存并退出后，在终端输入如下命令，以使上述命令生效：
source ~/.bashrc 1 三. 临时解决方案 在终端使用export命令来配置环境变量，但仅限于当前终端；对于其他终端窗口则需要重新使用export命令才起作用。
export配置环境变量的格式为：
export LD_LIBRARY_PATH=/home/dabai/mpfr-4.0.2/lib:$LD_LIBRARY_PATH 1 其中，LD_LIBRARY_PATH是Linux环境变量名，该环境变量主要用于指定查找共享库（动态链接库）时除了默认路径之外的其他路径。
参考：
[1] https://www.cnblogs.com/codingmengmeng/p/7456539.html" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e8b9880c1f45b2899c10b7b09bcaf3fd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-25T12:28:17+08:00" />
<meta property="article:modified_time" content="2023-05-25T12:28:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">error while loading shared libraries的解决方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a href="https://blog.csdn.net/weixin_42310458/article/details/125180410" title="https://blog.csdn.net/weixin_42310458/article/details/125180410">https://blog.csdn.net/weixin_42310458/article/details/125180410</a></p> 
<p></p> 
<p>当运行程序时会出现如下类似错误时：</p> 
<blockquote> 
 <p>error while loading shared libraries: libXXXXXXX.so.1: cannot open shared object file: No such file or directory</p> 
</blockquote> 
<p>默认情况下，编译器只会使用/lib和/usr/lib这两个目录下的库文件，通常通过源码包进行安装时，如果不指定–prefix，会将库安装在/usr/local/lib目录下；当运行程序需要链接动态库时，提示找不到相关的.so库，会报错。也就是说，/usr/local/lib目录不在系统默认的库搜索目录中，需要将目录加进去。</p> 
<p>在明确已经安装该库的情况下出现上述错误，可能是这个库目录并没有加入到该环境变量中，解决办法如下：</p> 
<h3><a name="t0"></a><a id="__8"></a>一. 更改配置文件</h3> 
<ol><li> <p>一般安装目录在：<br><code>/usr/local/lib</code><br> 配置文件在：<code>/etc/ld.so.conf</code>文件中<br> 将该目录加入到共享库的配置文件中</p> </li><li> <p>将动态库文件加入配置：执行vi /etc/ld.so.conf，在"include ld.so.conf.d/*.conf"下方增加"/usr/local/lib"。</p> </li><li> <p>保存后，在命令行终端执行：<br><code>/sbin/ldconfig -v</code><br><code>ldconfig</code><br> 其作用是将文件/etc/ld.so.conf列出的路径下的库文件缓存到/etc/ld.so.cache以供使用，因此当安装完一些库文件，或者修改/etc/ld.so.conf增加了库的新搜索路径，需要运行一下ldconfig，使所有的库文件都被缓存到文件/etc/ld.so.cache中，如果没做，可能会找不到刚安装的库。</p> </li></ol> 
<p>经过以上三个步骤，"error while loading shared libraries"的问题通常情况下就可以解决了。<br> 　　<br> 　　如果运行应用程序时，还是提示以上错误，那就得确认一下是不是当前用户在库目录下是不是没有可读的权限。像我遇到的问题就是，从别的机子拷贝了一些.so动态库，然后用root权限放到了/usr/local/lib中（普通用户没有对该目录的写权限），然后切换用户运行程序时，始终提示找不到.so库，一直以为是我配置有问题，结果是因为权限原因，那些我用root权限增加到/usr/local/lib中的.so文件对于普通用户而言，是没有访问权限的，所以以普通用户运行程序，当需要链接.so库时，在<code>/usr/local/lib</code>中是查找不到的。</p> 
<p>其实，对于由普通用户自己编译生成的.so库文件，比较好的做法是将这些.so库文件的路径用export指令加入到<code>~/.bash_profile</code>中的<code>LD_LIBRARY_PATH</code>变量中，<code>LD_LIBRARY_PATH</code>是程序运行需要链接.so库时会去查找的一个目录，<code>~/.bash_profile</code>是登陆或打开shell时会读取的文件，这样，每次用户登录时，都会把这些.so库文件的路径写入<code>LD_LIBRARY_PATH</code>，这样就可以正常地使用这些.so库文件了。</p> 
<h3><a name="t1"></a><a id="__28"></a>二. 修改配置文件</h3> 
<p>修改配置文件，如<code>~/.bashrc</code>或<code>~/.bash_profile</code>或<code>/etc/profile</code>。<br> 其中，普通用户可直接修改<code>~/.bashrc</code>或<code>~/.bash_profile</code>，因此，该修改仅对当前用户有效。<br> root用户可修改<code>/etc/profile</code>，且对所有用户都有效。</p> 
<p>下面以修改~/.bashrc文件为例：</p> 
<pre><code>vim ~/.bashrc
</code></pre> 
<ul><li>1</li></ul> 
<p>然后，在.bashrc文件中添加如下内容：</p> 
<pre><code>export LD_LIBRARY_PATH=/home/dabai/mpfr-4.0.2/lib:$LD_LIBRARY_PATH
</code></pre> 
<ul><li>1</li></ul> 
<p>保存并退出后，在终端输入如下命令，以使上述命令生效：</p> 
<pre><code>source ~/.bashrc
</code></pre> 
<ul><li>1</li></ul> 
<h3><a name="t2"></a><a id="__50"></a>三. 临时解决方案</h3> 
<p>在终端使用export命令来配置环境变量，但仅限于当前终端；对于其他终端窗口则需要重新使用export命令才起作用。<br> export配置环境变量的格式为：</p> 
<pre><code>export LD_LIBRARY_PATH=/home/dabai/mpfr-4.0.2/lib:$LD_LIBRARY_PATH
</code></pre> 
<ul><li>1</li></ul> 
<p>其中，<a href="https://so.csdn.net/so/search?q=LD_LIBRARY_PATH&amp;spm=1001.2101.3001.7020" title="LD_LIBRARY_PATH">LD_LIBRARY_PATH</a>是Linux环境变量名，该环境变量主要用于指定查找共享库（动态链接库）时除了默认路径之外的其他路径。</p> 
<blockquote> 
 <p>参考：<br> [1] <a href="https://www.cnblogs.com/codingmengmeng/p/7456539.html" rel="nofollow" title="https://www.cnblogs.com/codingmengmeng/p/7456539.html">https://www.cnblogs.com/codingmengmeng/p/7456539.html</a><br> [2] <a href="https://blog.csdn.net/Xminyang/article/details/125123527" title="【亲测可行】error while loading shared libraries的解决方案_error while loading shared libraries: libmpfr.so.6_Xminyang的博客-CSDN博客">【亲测可行】error while loading shared libraries的解决方案_error while loading shared libraries: libmpfr.so.6_Xminyang的博客-CSDN博客</a><br> [3] <a href="https://blog.csdn.net/wanxuexiang/article/details/84574660" title="error while loading shared libraries 解决办法_Npgw的博客-CSDN博客">error while loading shared libraries 解决办法_Npgw的博客-CSDN博客</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6ca0e9c4bd83c97816d04a2e2c3cd85c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">配置阿里的yum源</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ddcca91539e5bbac6f46633bfd389e04/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">软考之信息安全</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>