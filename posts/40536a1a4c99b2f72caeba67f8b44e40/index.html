<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>String与byte[]字节数组中文转换乱码问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="String与byte[]字节数组中文转换乱码问题" />
<meta property="og:description" content="原文地址：http://www.cnblogs.com/hy928302776/archive/2013/04/20/3032728.htm
https://blog.csdn.net/vipclx/article/details/8029410
在Java中，String.getBytes(String decode)方法会根据指定的decode编码返回某字符串在该编码下的byte数组表示，如
byte[] b_gbk = &#34;中&#34;.getBytes(&#34;GBK&#34;);
byte[] b_utf8 = &#34;中&#34;.getBytes(&#34;UTF-8&#34;); byte[] b_iso88591 = &#34;中&#34;.getBytes(&#34;ISO8859-1&#34;);
byte[] b_unicode = &#34;中&#34;.getBytes(&#34;unicode&#34;);
将分别返回“中”这个汉字在GBK、UTF-8和ISO8859-1编码下的byte数组表示，此时b_gbk的长度为2，b_utf8的长度为3，b_iso88591的长度为1,b_unicode 的长度为4（系统的的unicode采用的是big-endian就是前面是两个字节来表示这个的，unicode采用的都是两个字节编码，所以后面是4个字节 ）。
而与getBytes相对的，可以通过new String(byte[], decode)的方式来还原这个“中”字时，这个new String(byte[], decode)实际是使用decode指定的编码来将byte[]解析成字符串。
String s_gbk = new String(b_gbk,&#34;GBK&#34;);
String s_utf8 = new String(b_utf8,&#34;UTF-8&#34;); String s_iso88591 = new String(b_iso88591,&#34;ISO8859-1&#34;);
通过打印s_gbk、s_utf8和s_iso88591，会发现，s_gbk和s_utf8都是“中”，而只有s_iso88591是一个不认识的字符，为什么使用ISO8859-1编码再组合之后，无法还原“中”字呢，其实原因很简单，因为ISO8859-1编码的编码表中，根本就没有包含汉字字符，当然也就无法通过&#34;中&#34;.getBytes(&#34;ISO8859-1&#34;);来得到正确的“中”字在ISO8859-1中的编码值了，所以再通过new String()来还原就无从谈起了。
因此，通过String.getBytes(String decode)方法来得到byte[]时，一定要确定decode的编码表中确实存在String表示的码值，这样得到的byte[]数组才能正确被还原。
有时候，为了让中文字符适应某些特殊要求（如http header头要求其内容必须为iso8859-1 编码），可能会通过将中文字符按照字节方式来编码的情况，如 String s_iso88591 = new String(&#34;中&#34;.getBytes(&#34;UTF-8&#34;),&#34;ISO8859-1&#34;)，这样得到的s_iso8859-1字符串实际是三个在ISO8859-1中的字符，在将这些字符传递到目的地后，目的地程序再通过相反的方式String s_utf8 = new String(s_iso88591.getBytes(&#34;ISO8859-1&#34;),&#34;UTF-8&#34;)来得到正确的中文汉字“中”。这样就既保证了遵守协议规定、也支持中文。
String的getBytes()方法是得到一个字串的字节数组，这是众所周知的。但特别要注意的是，本方法将返回该操作系统默认的编码格式的字节数组。如果你在使用这个方法时不考虑到这一点，你会发现在一个平台上运行． 良好的系统，放到另外一台机器后会产生意想不到的问题。
java中utf-8编码的byte数组转换成String类型代码
private String utfToString(byte[] data) {
String str = null;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/40536a1a4c99b2f72caeba67f8b44e40/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-21T15:34:00+08:00" />
<meta property="article:modified_time" content="2018-06-21T15:34:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">String与byte[]字节数组中文转换乱码问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>原文地址：http://www.cnblogs.com/hy928302776/archive/2013/04/20/3032728.htm</p> 
<p>https://blog.csdn.net/vipclx/article/details/8029410<br></p> 
<p></p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);"><span style="color:rgb(255,0,0);">在Java中，String.getBytes(String decode)方法会根据指定的decode编码返回某字符串在该编码下的byte数组表示，</span>如</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">byte[] b_gbk = "中".getBytes("GBK");</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">byte[] b_utf8 = "中".getBytes("UTF-8"); </p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">byte[] b_iso88591 = "中".getBytes("ISO8859-1");</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">byte[] b_unicode = "中".getBytes("unicode");</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">将分别返回“中”这个汉字在GBK、UTF-8和ISO8859-1编码下的byte数组表示，此时b_gbk的长度为2，b_utf8的长度为3，b_iso88591的长度为1,b_unicode 的长度为4（系统的的unicode采用的是big-endian就是前面是两个字节来表示这个的，unicode采用的都是两个字节编码，所以后面是4个字节 ）。</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);"><span style="color:rgb(255,0,0);">而与getBytes相对的，可以通过new String(byte[], decode)的方式来还原这个“中”字时，这个new String(byte[], decode)实际是使用decode指定的编码来将byte[]解析成字符串。</span></p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">String s_gbk = new String(b_gbk,"GBK");</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">String s_utf8 = new String(b_utf8,"UTF-8"); </p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">String s_iso88591 = new String(b_iso88591,"ISO8859-1");</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);"> 通过打印s_gbk、s_utf8和s_iso88591，会发现，s_gbk和s_utf8都是“中”，而只有s_iso88591是一个不认识的字符，为什么使用ISO8859-1编码再组合之后，无法还原“中”字呢，其实原因很简单，因为ISO8859-1编码的编码表中，根本就没有包含汉字字符，当然也就无法通过"中".getBytes("ISO8859-1");来得到正确的“中”字在ISO8859-1中的编码值了，所以再通过new String()来还原就无从谈起了。</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">因此，通过String.getBytes(String decode)方法来得到byte[]时，一定要确定decode的编码表中确实存在String表示的码值，这样得到的byte[]数组才能正确被还原。</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);">有时候，为了让中文字符适应某些特殊要求（如http header头要求其内容必须为iso8859-1 编码），可能会通过将中文字符按照字节方式来编码的情况，如  String s_iso88591 = new String("中".getBytes("UTF-8"),"ISO8859-1")，这样得到的s_iso8859-1字符串实际是三个在ISO8859-1中的字符，在将这些字符传递到目的地后，目的地程序再通过相反的方式String s_utf8 = new  String(s_iso88591.getBytes("ISO8859-1"),"UTF-8")来得到正确的中文汉字“中”。这样就既保证了遵守协议规定、也支持中文。</p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);"><span style="color:rgb(255,0,0);">String的getBytes()方法是得到一个字串的字节数组，这是众所周知的。但特别要注意的是，本方法将返回该操作系统默认的编码格式的字节数组。如果你在使用这个方法时不考虑到这一点，你会发现在一个平台上运行．    良好的系统，放到另外一台机器后会产生意想不到的问题。</span></p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);"><span style="color:rgb(255,0,0);"><br></span></p> 
<p style="margin:10px auto;color:rgb(0,0,0);font-family:Verdana, Geneva, Arial, Helvetica, sans-serif;font-size:13.3333px;background-color:rgb(255,255,255);"><span style="color:rgb(255,0,0);"><br><br></span></p> 
<p><span style="color:rgb(255,0,0);"><span style="color:rgb(51,51,51);font-family:'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;font-size:24px;background-color:rgb(255,255,255);"><strong>java中utf-8编码的byte数组转换成String类型代码</strong></span></span></p> 
<p><span style="color:rgb(255,0,0);"><span style="color:rgb(51,51,51);font-family:'SF Pro Display', Roboto, Noto, Arial, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;font-size:24px;background-color:rgb(255,255,255);"><strong><br><span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);">private String utfToString(byte[] data) {<!-- --></span><br style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"></strong></span></span></p> 
<p style="background-color:rgb(255,255,255);">    <span style="white-space:pre;"></span>String str = null;</p> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);">    </span> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);white-space:pre;"></span> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);">try {<!-- --></span> 
<br style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);white-space:pre;"></span> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);">           str = new String(data, "utf-8");</span> 
<br style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);white-space:pre;"></span> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);">    } catch (UnsupportedEncodingException e) {<!-- --></span> 
<br style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);white-space:pre;"></span> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);">    }   </span> 
<span style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);white-space:pre;"></span> 
<br style="color:rgb(51,51,51);font-size:14px;background-color:rgb(255,255,255);"> 
<p style="background-color:rgb(255,255,255);">    <span style="white-space:pre;"></span>return str;</p> 
<p style="background-color:rgb(255,255,255);"> }</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a5ece14465a6739e11bf8d2a697c30a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AD中PCB布局与布线的一般原则</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1053278044a7cc61f5dc4ea5d6befc39/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">idea断点调试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>