<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Proteus仿真】【51单片机】简易信号发生器设计 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Proteus仿真】【51单片机】简易信号发生器设计" />
<meta property="og:description" content="文章目录 一、主要功能二、使用方法三、硬件资源四、软件设计1、主要代码 五、实验现象联系作者 一、主要功能 1、可生成常用波形，方波、锯齿波、三角波、阶梯波、正玄波；
2、可通过按键切换不同波形输出；
二、使用方法 系统运行后，按下K1键输出方波信号，按下K2键输出锯齿波，按下K3键输出三角波，按下K4键输出阶梯波，按下K5键输出正弦波。可通过示波器测量显示输出波形。
三、硬件资源 1、51单片机核心模块
2、DAC0832模块
3、按键模块
四、软件设计 1、主要代码 代码如下：
#include &lt;reg52.h&gt; #include &lt;absacc.h&gt; #define uint unsigned int #define uchar unsigned char #define DAC0832 XBYTE[0xfffe] sbit k1=P1^0; sbit k2=P1^1; sbit k3=P1^2; sbit k4=P1^3; sbit k5=P1^4; sbit beep=P1^7; unsigned char mm=0; unsigned char flag=0; unsigned char x,y; uchar code SETTAB[]={ //正弦波数据(正部分) 0x80, 0x83, 0x86, 0x89, 0x8D, 0x90, 0x93, 0x96, //(正上升部分) 0x99, 0x9C, 0x9F, 0xA2, 0xA5, 0xA8, 0xAB, 0xAE, 0xB1, 0xB4, 0xB7, 0xBA, 0xBC, 0xBF, 0xC2, 0xC5, 0xC7, 0xCA, 0xCC, 0xCF, 0xD1, 0xD4, 0xD6, 0xD8, 0xDA, 0xDD, 0xDF, 0xE1, 0xE3, 0xE5, 0xE7, 0xE9, 0xEA, 0xEC, 0xEE, 0xEF, 0xF1, 0xF2, 0xF4, 0xF5, 0xF6, 0xF7, 0xF8, 0xF9, 0xFA, 0xFB, 0xFC, 0xFD, 0xFD, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFD, 0xFD, 0xFC, 0xFB, 0xFA, 0xF9, 0xF8, 0xF7, 0xF6, //(正下降部分)80 0xF5, 0xF4, 0xF2, 0xF1, 0xEF, 0xEE, 0xEC, 0xEA, 0xE9, 0xE7, 0xE5, 0xE3, 0xE1, 0xDE, 0xDD, 0xDA, 0xD8, 0xD6, 0xD4, 0xD1, 0xCF, 0xCC, 0xCA, 0xC7, 0xC5, 0xC2, 0xBF, 0xBC, 0xBA, 0xB7, 0xB4, 0xB1, 0xAE, 0xAB, 0xA8, 0xA5, 0xA2, 0x9F, 0x9C, 0x99, 0x96, 0x93, 0x90, 0x8D, 0x89, 0x86, 0x83, 0x80, //正弦波数据(负部分) 0x80, 0x7C, 0x79, 0x78, 0x72, 0x6F, 0x6C, 0x69 , //(负下降部分)128,0x80 0x66, 0x63, 0x60, 0x5D, 0x5A, 0x57, 0x55, 0x51 , 0x4E, 0x4C, 0x48, 0x45, 0x43, 0x40, 0x3D, 0x3A , 0x38, 0x35, 0x33, 0x30, 0x2E, 0x2B, 0x29, 0x27 , 0x25, 0x22, 0x20, 0x1E, 0x1C, 0x1A, 0x18, 0x16 , 0x15, 0x13, 0x11, 0x10, 0x0E, 0x0D, 0x0B, 0x0A , 0x09, 0x08, 0x07, 0x06, 0x05, 0x04, 0x03, 0x02 , 0x02, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x02 , 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09 , //(负上升部分)//80 0x0A, 0x0B, 0x0D, 0x0E, 0x10, 0x11, 0x13, 0x15 , 0x16, 0x18, 0x1A, 0x1C, 0x1E, 0x20, 0x22, 0x25 , 0x27, 0x29, 0x2B, 0x2E, 0x30, 0x33, 0x35, 0x38 , 0x3A, 0x3D, 0x40, 0x43, 0x45, 0x48, 0x4C, 0x4E , 0x51, 0x55, 0x57, 0x5A, 0x5D, 0x60, 0x63, 0x66 , 0x69, 0x6C, 0x6F, 0x72, 0x76, 0x79, 0x7C, 0x80 }; void DelayMS(uint ms) { uchar i; while(ms--) { for(i=0;i&lt;120;i&#43;&#43;); } } void delay(uint i) { while(i--);	} void sound() { uchar i=100; while(i--) { beep=~beep; delay(100); } } void fangbo() { DAC0832=y; x&#43;&#43;; if(flag==0) {	y=0xff; if(x==128) { flag=1; y=0x00; } //方波&#43; } else { y=0x00; if(x==0) { flag=0; y=0xff; } //方波- } } void juchibo() //锯齿波 { DAC0832=y; y&#43;=1; } void sanjiaobo() //三角波 { DAC0832=y; x&#43;&#43;; if(flag==0) { y&#43;=2; //三角波数据(上升部分) if(x==128) { flag=1; y-=2; } } else { y-=2; if(x==0) { flag=0; y=0; } //三角波数据(下升部分) } } void jietibo() //阶梯波 { DAC0832=y; y&#43;=25; } void sin() //正弦波 { DAC0832=SETTAB[y]; x&#43;&#43;; y&#43;&#43;; } void read_key() { if(k1==0)	//方波 { DelayMS(10); if(k1==0) { mm=1; while(k1==0); } } else if(k2==0) { DelayMS(10); if(k2==0) { mm=2; while(k2==0); } } else if(k3==0)	// 三角波 { DelayMS(10); if(k3==0) { mm=3; while(k3==0); } } else if(k4==0) { DelayMS(10); if(k4==0) { mm=4; while(k4==0); } } else if(k5==0)	//正弦波 { DelayMS(10); if(k5==0) { mm=5; while(k5==0); } } } void main() { TMOD=0x02; TL0=156; TH0=156; TR0=1; ET0=1; EA=1; mm=0; for(;;) { read_key(); } } void t_0() interrupt 1 using 2 { switch(mm) { case 1: fangbo();break; case 2: juchibo();break; case 3: sanjiaobo();break; case 4: jietibo();break; case 5: sin();break; } } 五、实验现象 B站演示视频：https://space." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6abe72d9334effb417f87aa567ef3626/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-10T10:33:19+08:00" />
<meta property="article:modified_time" content="2022-03-10T10:33:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Proteus仿真】【51单片机】简易信号发生器设计</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_3" rel="nofollow">一、主要功能</a></li><li><a href="#_9" rel="nofollow">二、使用方法</a></li><li><a href="#_11" rel="nofollow">三、硬件资源</a></li><li><a href="#_16" rel="nofollow">四、软件设计</a></li><li><ul><li><a href="#1_17" rel="nofollow">1、主要代码</a></li></ul> 
  </li><li><a href="#_232" rel="nofollow">五、实验现象</a></li><li><a href="#_239" rel="nofollow">联系作者</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_3"></a>一、主要功能</h2> 
<p>1、可生成常用波形，方波、锯齿波、三角波、阶梯波、正玄波；<br> 2、可通过按键切换不同波形输出；</p> 
<hr> 
<h2><a id="_9"></a>二、使用方法</h2> 
<p>系统运行后，按下K1键输出方波信号，按下K2键输出锯齿波，按下K3键输出三角波，按下K4键输出阶梯波，按下K5键输出正弦波。可通过示波器测量显示输出波形。</p> 
<h2><a id="_11"></a>三、硬件资源</h2> 
<p>1、51单片机核心模块<br> 2、DAC0832模块<br> 3、按键模块</p> 
<h2><a id="_16"></a>四、软件设计</h2> 
<h3><a id="1_17"></a>1、主要代码</h3> 
<p>代码如下：</p> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;reg52.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;absacc.h&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">define</span> uint unsigned int</span>
<span class="token macro property">#<span class="token directive keyword">define</span> uchar unsigned char</span>
<span class="token macro property">#<span class="token directive keyword">define</span> DAC0832 XBYTE[0xfffe]</span>
sbit k1<span class="token operator">=</span>P1<span class="token operator">^</span><span class="token number">0</span><span class="token punctuation">;</span>
sbit k2<span class="token operator">=</span>P1<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">;</span>
sbit k3<span class="token operator">=</span>P1<span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">;</span>
sbit k4<span class="token operator">=</span>P1<span class="token operator">^</span><span class="token number">3</span><span class="token punctuation">;</span>
sbit k5<span class="token operator">=</span>P1<span class="token operator">^</span><span class="token number">4</span><span class="token punctuation">;</span>
sbit beep<span class="token operator">=</span>P1<span class="token operator">^</span><span class="token number">7</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> mm<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">unsigned</span> <span class="token keyword">char</span> x<span class="token punctuation">,</span>y<span class="token punctuation">;</span>
uchar code SETTAB<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//正弦波数据(正部分)</span>
<span class="token number">0x80</span><span class="token punctuation">,</span> <span class="token number">0x83</span><span class="token punctuation">,</span> <span class="token number">0x86</span><span class="token punctuation">,</span> <span class="token number">0x89</span><span class="token punctuation">,</span> <span class="token number">0x8D</span><span class="token punctuation">,</span> <span class="token number">0x90</span><span class="token punctuation">,</span> <span class="token number">0x93</span><span class="token punctuation">,</span> <span class="token number">0x96</span><span class="token punctuation">,</span> <span class="token comment">//(正上升部分)</span>
<span class="token number">0x99</span><span class="token punctuation">,</span> <span class="token number">0x9C</span><span class="token punctuation">,</span> <span class="token number">0x9F</span><span class="token punctuation">,</span> <span class="token number">0xA2</span><span class="token punctuation">,</span> <span class="token number">0xA5</span><span class="token punctuation">,</span> <span class="token number">0xA8</span><span class="token punctuation">,</span> <span class="token number">0xAB</span><span class="token punctuation">,</span> <span class="token number">0xAE</span><span class="token punctuation">,</span>
<span class="token number">0xB1</span><span class="token punctuation">,</span> <span class="token number">0xB4</span><span class="token punctuation">,</span> <span class="token number">0xB7</span><span class="token punctuation">,</span> <span class="token number">0xBA</span><span class="token punctuation">,</span> <span class="token number">0xBC</span><span class="token punctuation">,</span> <span class="token number">0xBF</span><span class="token punctuation">,</span> <span class="token number">0xC2</span><span class="token punctuation">,</span> <span class="token number">0xC5</span><span class="token punctuation">,</span>
<span class="token number">0xC7</span><span class="token punctuation">,</span> <span class="token number">0xCA</span><span class="token punctuation">,</span> <span class="token number">0xCC</span><span class="token punctuation">,</span> <span class="token number">0xCF</span><span class="token punctuation">,</span> <span class="token number">0xD1</span><span class="token punctuation">,</span> <span class="token number">0xD4</span><span class="token punctuation">,</span> <span class="token number">0xD6</span><span class="token punctuation">,</span> <span class="token number">0xD8</span><span class="token punctuation">,</span>
<span class="token number">0xDA</span><span class="token punctuation">,</span> <span class="token number">0xDD</span><span class="token punctuation">,</span> <span class="token number">0xDF</span><span class="token punctuation">,</span> <span class="token number">0xE1</span><span class="token punctuation">,</span> <span class="token number">0xE3</span><span class="token punctuation">,</span> <span class="token number">0xE5</span><span class="token punctuation">,</span> <span class="token number">0xE7</span><span class="token punctuation">,</span> <span class="token number">0xE9</span><span class="token punctuation">,</span>
<span class="token number">0xEA</span><span class="token punctuation">,</span> <span class="token number">0xEC</span><span class="token punctuation">,</span> <span class="token number">0xEE</span><span class="token punctuation">,</span> <span class="token number">0xEF</span><span class="token punctuation">,</span> <span class="token number">0xF1</span><span class="token punctuation">,</span> <span class="token number">0xF2</span><span class="token punctuation">,</span> <span class="token number">0xF4</span><span class="token punctuation">,</span> <span class="token number">0xF5</span><span class="token punctuation">,</span>
<span class="token number">0xF6</span><span class="token punctuation">,</span> <span class="token number">0xF7</span><span class="token punctuation">,</span> <span class="token number">0xF8</span><span class="token punctuation">,</span> <span class="token number">0xF9</span><span class="token punctuation">,</span> <span class="token number">0xFA</span><span class="token punctuation">,</span> <span class="token number">0xFB</span><span class="token punctuation">,</span> <span class="token number">0xFC</span><span class="token punctuation">,</span> <span class="token number">0xFD</span><span class="token punctuation">,</span>
<span class="token number">0xFD</span><span class="token punctuation">,</span> <span class="token number">0xFE</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span>
<span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFF</span><span class="token punctuation">,</span> <span class="token number">0xFE</span><span class="token punctuation">,</span> <span class="token number">0xFD</span><span class="token punctuation">,</span>
<span class="token number">0xFD</span><span class="token punctuation">,</span> <span class="token number">0xFC</span><span class="token punctuation">,</span> <span class="token number">0xFB</span><span class="token punctuation">,</span> <span class="token number">0xFA</span><span class="token punctuation">,</span> <span class="token number">0xF9</span><span class="token punctuation">,</span> <span class="token number">0xF8</span><span class="token punctuation">,</span> <span class="token number">0xF7</span><span class="token punctuation">,</span> <span class="token number">0xF6</span><span class="token punctuation">,</span> <span class="token comment">//(正下降部分)80</span>
<span class="token number">0xF5</span><span class="token punctuation">,</span> <span class="token number">0xF4</span><span class="token punctuation">,</span> <span class="token number">0xF2</span><span class="token punctuation">,</span> <span class="token number">0xF1</span><span class="token punctuation">,</span> <span class="token number">0xEF</span><span class="token punctuation">,</span> <span class="token number">0xEE</span><span class="token punctuation">,</span> <span class="token number">0xEC</span><span class="token punctuation">,</span> <span class="token number">0xEA</span><span class="token punctuation">,</span>
<span class="token number">0xE9</span><span class="token punctuation">,</span> <span class="token number">0xE7</span><span class="token punctuation">,</span> <span class="token number">0xE5</span><span class="token punctuation">,</span> <span class="token number">0xE3</span><span class="token punctuation">,</span> <span class="token number">0xE1</span><span class="token punctuation">,</span> <span class="token number">0xDE</span><span class="token punctuation">,</span> <span class="token number">0xDD</span><span class="token punctuation">,</span> <span class="token number">0xDA</span><span class="token punctuation">,</span>
<span class="token number">0xD8</span><span class="token punctuation">,</span> <span class="token number">0xD6</span><span class="token punctuation">,</span> <span class="token number">0xD4</span><span class="token punctuation">,</span> <span class="token number">0xD1</span><span class="token punctuation">,</span> <span class="token number">0xCF</span><span class="token punctuation">,</span> <span class="token number">0xCC</span><span class="token punctuation">,</span> <span class="token number">0xCA</span><span class="token punctuation">,</span> <span class="token number">0xC7</span><span class="token punctuation">,</span>
<span class="token number">0xC5</span><span class="token punctuation">,</span> <span class="token number">0xC2</span><span class="token punctuation">,</span> <span class="token number">0xBF</span><span class="token punctuation">,</span> <span class="token number">0xBC</span><span class="token punctuation">,</span> <span class="token number">0xBA</span><span class="token punctuation">,</span> <span class="token number">0xB7</span><span class="token punctuation">,</span> <span class="token number">0xB4</span><span class="token punctuation">,</span> <span class="token number">0xB1</span><span class="token punctuation">,</span>
<span class="token number">0xAE</span><span class="token punctuation">,</span> <span class="token number">0xAB</span><span class="token punctuation">,</span> <span class="token number">0xA8</span><span class="token punctuation">,</span> <span class="token number">0xA5</span><span class="token punctuation">,</span> <span class="token number">0xA2</span><span class="token punctuation">,</span> <span class="token number">0x9F</span><span class="token punctuation">,</span> <span class="token number">0x9C</span><span class="token punctuation">,</span> <span class="token number">0x99</span><span class="token punctuation">,</span>
<span class="token number">0x96</span><span class="token punctuation">,</span> <span class="token number">0x93</span><span class="token punctuation">,</span> <span class="token number">0x90</span><span class="token punctuation">,</span> <span class="token number">0x8D</span><span class="token punctuation">,</span> <span class="token number">0x89</span><span class="token punctuation">,</span> <span class="token number">0x86</span><span class="token punctuation">,</span> <span class="token number">0x83</span><span class="token punctuation">,</span> <span class="token number">0x80</span><span class="token punctuation">,</span>
<span class="token comment">//正弦波数据(负部分)</span>
<span class="token number">0x80</span><span class="token punctuation">,</span> <span class="token number">0x7C</span><span class="token punctuation">,</span> <span class="token number">0x79</span><span class="token punctuation">,</span> <span class="token number">0x78</span><span class="token punctuation">,</span> <span class="token number">0x72</span><span class="token punctuation">,</span> <span class="token number">0x6F</span><span class="token punctuation">,</span> <span class="token number">0x6C</span><span class="token punctuation">,</span> <span class="token number">0x69</span> <span class="token punctuation">,</span> <span class="token comment">//(负下降部分)128,0x80</span>
<span class="token number">0x66</span><span class="token punctuation">,</span> <span class="token number">0x63</span><span class="token punctuation">,</span> <span class="token number">0x60</span><span class="token punctuation">,</span> <span class="token number">0x5D</span><span class="token punctuation">,</span> <span class="token number">0x5A</span><span class="token punctuation">,</span> <span class="token number">0x57</span><span class="token punctuation">,</span> <span class="token number">0x55</span><span class="token punctuation">,</span> <span class="token number">0x51</span> <span class="token punctuation">,</span>
<span class="token number">0x4E</span><span class="token punctuation">,</span> <span class="token number">0x4C</span><span class="token punctuation">,</span> <span class="token number">0x48</span><span class="token punctuation">,</span> <span class="token number">0x45</span><span class="token punctuation">,</span> <span class="token number">0x43</span><span class="token punctuation">,</span> <span class="token number">0x40</span><span class="token punctuation">,</span> <span class="token number">0x3D</span><span class="token punctuation">,</span> <span class="token number">0x3A</span> <span class="token punctuation">,</span>
<span class="token number">0x38</span><span class="token punctuation">,</span> <span class="token number">0x35</span><span class="token punctuation">,</span> <span class="token number">0x33</span><span class="token punctuation">,</span> <span class="token number">0x30</span><span class="token punctuation">,</span> <span class="token number">0x2E</span><span class="token punctuation">,</span> <span class="token number">0x2B</span><span class="token punctuation">,</span> <span class="token number">0x29</span><span class="token punctuation">,</span> <span class="token number">0x27</span> <span class="token punctuation">,</span>
<span class="token number">0x25</span><span class="token punctuation">,</span> <span class="token number">0x22</span><span class="token punctuation">,</span> <span class="token number">0x20</span><span class="token punctuation">,</span> <span class="token number">0x1E</span><span class="token punctuation">,</span> <span class="token number">0x1C</span><span class="token punctuation">,</span> <span class="token number">0x1A</span><span class="token punctuation">,</span> <span class="token number">0x18</span><span class="token punctuation">,</span> <span class="token number">0x16</span> <span class="token punctuation">,</span>
<span class="token number">0x15</span><span class="token punctuation">,</span> <span class="token number">0x13</span><span class="token punctuation">,</span> <span class="token number">0x11</span><span class="token punctuation">,</span> <span class="token number">0x10</span><span class="token punctuation">,</span> <span class="token number">0x0E</span><span class="token punctuation">,</span> <span class="token number">0x0D</span><span class="token punctuation">,</span> <span class="token number">0x0B</span><span class="token punctuation">,</span> <span class="token number">0x0A</span> <span class="token punctuation">,</span>
<span class="token number">0x09</span><span class="token punctuation">,</span> <span class="token number">0x08</span><span class="token punctuation">,</span> <span class="token number">0x07</span><span class="token punctuation">,</span> <span class="token number">0x06</span><span class="token punctuation">,</span> <span class="token number">0x05</span><span class="token punctuation">,</span> <span class="token number">0x04</span><span class="token punctuation">,</span> <span class="token number">0x03</span><span class="token punctuation">,</span> <span class="token number">0x02</span> <span class="token punctuation">,</span>
<span class="token number">0x02</span><span class="token punctuation">,</span> <span class="token number">0x01</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x00</span><span class="token punctuation">,</span> <span class="token number">0x01</span><span class="token punctuation">,</span> <span class="token number">0x02</span> <span class="token punctuation">,</span>
<span class="token number">0x02</span><span class="token punctuation">,</span> <span class="token number">0x03</span><span class="token punctuation">,</span> <span class="token number">0x04</span><span class="token punctuation">,</span> <span class="token number">0x05</span><span class="token punctuation">,</span> <span class="token number">0x06</span><span class="token punctuation">,</span> <span class="token number">0x07</span><span class="token punctuation">,</span> <span class="token number">0x08</span><span class="token punctuation">,</span> <span class="token number">0x09</span> <span class="token punctuation">,</span> <span class="token comment">//(负上升部分)//80</span>
<span class="token number">0x0A</span><span class="token punctuation">,</span> <span class="token number">0x0B</span><span class="token punctuation">,</span> <span class="token number">0x0D</span><span class="token punctuation">,</span> <span class="token number">0x0E</span><span class="token punctuation">,</span> <span class="token number">0x10</span><span class="token punctuation">,</span> <span class="token number">0x11</span><span class="token punctuation">,</span> <span class="token number">0x13</span><span class="token punctuation">,</span> <span class="token number">0x15</span> <span class="token punctuation">,</span>
<span class="token number">0x16</span><span class="token punctuation">,</span> <span class="token number">0x18</span><span class="token punctuation">,</span> <span class="token number">0x1A</span><span class="token punctuation">,</span> <span class="token number">0x1C</span><span class="token punctuation">,</span> <span class="token number">0x1E</span><span class="token punctuation">,</span> <span class="token number">0x20</span><span class="token punctuation">,</span> <span class="token number">0x22</span><span class="token punctuation">,</span> <span class="token number">0x25</span> <span class="token punctuation">,</span>
<span class="token number">0x27</span><span class="token punctuation">,</span> <span class="token number">0x29</span><span class="token punctuation">,</span> <span class="token number">0x2B</span><span class="token punctuation">,</span> <span class="token number">0x2E</span><span class="token punctuation">,</span> <span class="token number">0x30</span><span class="token punctuation">,</span> <span class="token number">0x33</span><span class="token punctuation">,</span> <span class="token number">0x35</span><span class="token punctuation">,</span> <span class="token number">0x38</span> <span class="token punctuation">,</span>
<span class="token number">0x3A</span><span class="token punctuation">,</span> <span class="token number">0x3D</span><span class="token punctuation">,</span> <span class="token number">0x40</span><span class="token punctuation">,</span> <span class="token number">0x43</span><span class="token punctuation">,</span> <span class="token number">0x45</span><span class="token punctuation">,</span> <span class="token number">0x48</span><span class="token punctuation">,</span> <span class="token number">0x4C</span><span class="token punctuation">,</span> <span class="token number">0x4E</span> <span class="token punctuation">,</span>
<span class="token number">0x51</span><span class="token punctuation">,</span> <span class="token number">0x55</span><span class="token punctuation">,</span> <span class="token number">0x57</span><span class="token punctuation">,</span> <span class="token number">0x5A</span><span class="token punctuation">,</span> <span class="token number">0x5D</span><span class="token punctuation">,</span> <span class="token number">0x60</span><span class="token punctuation">,</span> <span class="token number">0x63</span><span class="token punctuation">,</span> <span class="token number">0x66</span> <span class="token punctuation">,</span>
<span class="token number">0x69</span><span class="token punctuation">,</span> <span class="token number">0x6C</span><span class="token punctuation">,</span> <span class="token number">0x6F</span><span class="token punctuation">,</span> <span class="token number">0x72</span><span class="token punctuation">,</span> <span class="token number">0x76</span><span class="token punctuation">,</span> <span class="token number">0x79</span><span class="token punctuation">,</span> <span class="token number">0x7C</span><span class="token punctuation">,</span> <span class="token number">0x80</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">DelayMS</span><span class="token punctuation">(</span>uint ms<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	uchar i<span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>ms<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">120</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">delay</span><span class="token punctuation">(</span>uint i<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">sound</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	uchar i<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">--</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		beep<span class="token operator">=</span><span class="token operator">~</span>beep<span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">fangbo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	DAC0832<span class="token operator">=</span>y<span class="token punctuation">;</span>
	x<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>	
		y<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">128</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			flag<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
			y<span class="token operator">=</span><span class="token number">0x00</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token comment">//方波+</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		y<span class="token operator">=</span><span class="token number">0x00</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
			y<span class="token operator">=</span><span class="token number">0xff</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token comment">//方波-</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">juchibo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//锯齿波</span>
<span class="token punctuation">{<!-- --></span>
	DAC0832<span class="token operator">=</span>y<span class="token punctuation">;</span>
	y<span class="token operator">+</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">sanjiaobo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//三角波</span>
<span class="token punctuation">{<!-- --></span>
	DAC0832<span class="token operator">=</span>y<span class="token punctuation">;</span>
	x<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		y<span class="token operator">+</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//三角波数据(上升部分)</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">128</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			flag<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
			y<span class="token operator">-</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> 
	<span class="token punctuation">{<!-- --></span>
		y<span class="token operator">-</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>x<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
			y<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token comment">//三角波数据(下升部分)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">jietibo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//阶梯波</span>
<span class="token punctuation">{<!-- --></span>
	DAC0832<span class="token operator">=</span>y<span class="token punctuation">;</span>
	y<span class="token operator">+</span><span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//正弦波</span>
<span class="token punctuation">{<!-- --></span>
	DAC0832<span class="token operator">=</span>SETTAB<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">;</span>
	x<span class="token operator">++</span><span class="token punctuation">;</span>
	y<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">read_key</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>k1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>	  <span class="token comment">//方波</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">DelayMS</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>k1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span> 
			mm<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
			
			<span class="token keyword">while</span><span class="token punctuation">(</span>k1<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k2<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">DelayMS</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>k2<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span> 
			mm<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
		
			<span class="token keyword">while</span><span class="token punctuation">(</span>k2<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k3<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>	 <span class="token comment">// 三角波</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">DelayMS</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>k3<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
		 	mm<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
			
			<span class="token keyword">while</span><span class="token punctuation">(</span>k3<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">DelayMS</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>k4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span> 
			mm<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
			
			<span class="token keyword">while</span><span class="token punctuation">(</span>k4<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>	   <span class="token comment">//正弦波</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">DelayMS</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>k5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span> 
			mm<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">;</span>
			
			<span class="token keyword">while</span><span class="token punctuation">(</span>k5<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	TMOD<span class="token operator">=</span><span class="token number">0x02</span><span class="token punctuation">;</span>
	TL0<span class="token operator">=</span><span class="token number">156</span><span class="token punctuation">;</span>
	TH0<span class="token operator">=</span><span class="token number">156</span><span class="token punctuation">;</span>
	TR0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	ET0<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	EA<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
	mm<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span> 
		<span class="token function">read_key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">t_0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">1</span> using <span class="token number">2</span>
<span class="token punctuation">{<!-- --></span> 
	<span class="token keyword">switch</span><span class="token punctuation">(</span>mm<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token function">fangbo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token function">juchibo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span> <span class="token function">sanjiaobo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token function">jietibo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">:</span> <span class="token function">sin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_232"></a>五、实验现象</h2> 
<p>B站演示视频：<a href="https://space.bilibili.com/444388619" rel="nofollow">https://space.bilibili.com/444388619</a><br> <img src="https://images2.imgbox.com/1f/06/UyahutV1_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/90/94/QBGXZ7TW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ef/33/gLRpVNDT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/85/cf/f4nJ5GJd_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2b/ea/weGscPkE_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_239"></a>联系作者</h2> 
<p>作者B站链接：<a href="https://space.bilibili.com/444388619" rel="nofollow">https://space.bilibili.com/444388619</a><br> 可提供手把手教学服务，资料获取请联系作者QQ：3443792007<br> 专注于51单片机、STM32、国产32、DSP、Proteus、ardunio、ESP32、物联网软件开发，PCB设计，视频分享，技术交流。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b38eaab7d92f87607b5007416f32af3d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">GPU和CPU计算上的精度差异</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a306f6689b5b2f9be55d2b63c23f3521/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一文带你全面解析postman工具的使用（基础篇）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>