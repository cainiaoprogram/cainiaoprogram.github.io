<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>小谈linux下实际用户ID，有效用户ID和设置用户ID - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="小谈linux下实际用户ID，有效用户ID和设置用户ID" />
<meta property="og:description" content="之前对linux下实际用户ID，有效用户ID和设置用户ID不是很了解，今天翻书看好又看到了，就整个时间给再了解下。
这几个ID进行概念性如下;
实际用户ID（RUID)：用于在系统中标识一个用户是谁，当用户使用用户名和密码成功登录后一个UNIX系统后就唯一确定了他的RUID.也有人这么说也许会比较准确：就是该进程的所有者，执行者;
有效用户ID（EUID）：用于系统决定用户对系统资源的访问权限，通常情况下等于RUID；
设置用户ID（SUID）：从程序自身来说用于对外权限的开放。跟RUID及EUID是用一个用户绑定不同，它是跟文件而不是跟用户绑定。
上面这三个用户ID都是相对于进程来说的。记住这点的前提上有助于我们对它们的理解。
浏览了网上的一些文章，谈到理解它们很好的一个例子就是谈谈passwd文件。
我们知道/etc/passwd程序是用来修改用户的密码的，一般来说只用root用户才能修改用户密码，但是我们发现用户是可以修改自身的密码： linshuqiang@linshuqiang-laptop:~$ passwd
更改 linshuqiang 的密码。
（当前）UNIX 密码： 因为passwd文件设置了set－usr－ID位且文件的所有者是root，所有用户在执行passwd时，用户就具有root的权力，这样就能去执行。passwd文件的属性如下：
linshuqiang@linshuqiang-laptop:~$ ll /usr/bin/passwd -r-s--x--x 1 root root 37140 2010-01-27 01:09 /usr/bin/passwd* 从上面我们可以看出文件属性第二个有个s，这个就是该文件set－usr－ID位。如果该文件没有设计ser－usr－ID位，那么在普通用户下是不能修改密码的，因为在执行的时候就没有root权限。
在root下改变passwd文件的权限：
linshuqiang@ubuntu:~$ sudo su root@ubuntu:/home/linshuqiang# chmod u-s /usr/bin/passwd root@ubuntu:/home/linshuqiang# ll /usr/bin/passwd -rwxr-xr-x 1 root root 37140 2011-02-15 06:11 /usr/bin/passwd* 通过chmod改变文件的权限后，我们可以看到 /usr/bin/passwd文件少了set-usr-ID位，那么现在我们在普通用户下来执行passwd看看效果如何？ linshuqiang@ubuntu:~$ passwd 更改 linshuqiang 的密码。 （当前）UNIX 密码： passwd：认证令牌操作错误 passwd: password unchanged 就出现了上述的认证令牌操作错误，原因是我们把set-usr-ID位给改过了，普通用户在执行passwd文件的时候，没有set-usr-ID位，那么有效用户就不能切换到超级用户，所以不能改。 上面的例子应该很容易的让我们理解到三个用户之间的区别和关系吧？本人也是刚刚接触linxu不久，这些都是在学习的基础上小结出来的，如有错，望指出。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/09fb81c9d55eb356be68461694abf479/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-10-08T22:06:19+08:00" />
<meta property="article:modified_time" content="2011-10-08T22:06:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">小谈linux下实际用户ID，有效用户ID和设置用户ID</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:18px">           之前对linux下实际用户ID，有效用户ID和设置用户ID不是很了解，今天翻书看好又看到了，就整个时间给再了解下。</span></p> 
<p><span style="font-size:18px">          这几个ID进行概念性如下;</span></p> 
<p><span style="font-size:18px">          实际用户ID（RUID)<span style="font-family:宋体">：用于在系统中标识一个用户是谁，当用户使用用户名和密码成功登录后一个</span><span lang="EN-US">UNIX</span><span style="font-family:宋体">系统后就唯一确定了他的</span><span lang="EN-US">RUID.也有人这么说也许会比较准确：就是该进程的所有者，执行者;</span></span></p> 
<p><span style="font-size:18px"><span lang="EN-US">          有效用户ID（EUID）：<span style="font-family:宋体">用于系统决定用户对系统资源的访问权限，通常情况下等于</span><span lang="EN-US">RUID</span>；</span></span></p> 
<p><span style="font-size:18px"><span lang="EN-US">          设置用户ID（SUID）：从程序自身来说用于对外权限的开放。跟RUID及EUID是用一个用户绑定不同，它是跟文件而不是跟用户绑定。</span></span></p> 
<p><span style="font-size:18px"><span lang="EN-US">          <span style="font-size:18px"> 上面这三个用户ID都是</span><span style="font-size:18px; color:#ff6666">相对于进程</span><span style="font-size:18px">来说的。记住这点的前提上有助于我们对它们的理解。</span></span></span></p> 
<p><span style="font-size:18px"><br> </span></p> 
<p><span style="font-size:18px">             浏览了网上的一些文章，谈到理解它们很好的一个例子就是谈谈passwd文件。</span></p> 
<p><span style="font-size:18px">            我们知道/etc/passwd程序是用来修改用户的密码的，一般来说只用root用户才能修改用户密码，但是我们发现用户是可以修改自身的密码：         <br> </span></p> 
<p><span style="font-size:18px">     <span style="font-size:13px">linshuqiang@linshuqiang</span></span><span style="font-size:13px">-</span>laptop:~$ passwd<br>     更改 linshuqiang 的密码。<br>   （当前）UNIX 密码： <br> </p> 
<p>                   <span style="font-size:18px">  </span><span style="font-size:18px">因为passwd文件设置了set－usr－ID位且文件的所有者是root，所有用户在执行passwd时，用户就具有root的权力，这样就能去执行。passwd文件的属性如下：</span></p> linshuqiang@linshuqiang-laptop:~$ ll /usr/bin/passwd 
<br> -r-s--x--x 1 root root 37140 2010-01-27 01:09 /usr/bin/passwd* 
<br> 
<p><span style="font-size:18px">从上面我们可以看出文件属性第二个有个s，这个就是该文件</span><span style="font-size:18px">set－usr－ID位</span>。如果该文件没有设计ser－usr－ID位，那么在普通用户下是不能修改密码的，因为在执行的时候就没有root权限。</p> 
<p>              在root下改变passwd文件的权限：</p> 
<pre><code class="language-html">linshuqiang@ubuntu:~$ sudo su
root@ubuntu:/home/linshuqiang# chmod u-s  /usr/bin/passwd
root@ubuntu:/home/linshuqiang# ll /usr/bin/passwd
-rwxr-xr-x 1 root root 37140 2011-02-15 06:11 /usr/bin/passwd*
</code></pre>             
<span style="font-size:18px"> 通过chmod改变文件的权限后，我们可以看到 /usr/bin/passwd文件少了set-usr-ID位，那么现在我们在普通用户下来执行passwd看看效果如何？</span> 
<br> 
<p></p> 
<p>              </p> 
<pre><code class="language-html">linshuqiang@ubuntu:~$ passwd
更改 linshuqiang 的密码。
（当前）UNIX 密码： 
passwd：认证令牌操作错误
passwd: password unchanged
</code></pre> 
<span style="font-size:18px"><br>            就出现了上述的认证令牌操作错误，原因是我们把set-usr-ID位给改过了，普通用户在执行passwd文件的时候，没有set-usr-ID位，那么有效用户就不能切换到超级用户，所以不能改</span>。 
<p></p> 
<p><br> </p> 
<p><br> </p> 
<p>                <span style="font-size:18px">上面的例子应该很容易的让我们理解到三个用户之间的区别和关系吧？本人也是刚刚接触linxu不久，这些都是在学习的基础上小结出来的，如有错，望指出。</span><br> </p> 
<p>             <br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5527832ce0f23b60aa34fbb4312f48a6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一步一步写算法（之单向链表）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/962deaf112f73abea9af74204247bb84/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决：发生系统错误 5；拒绝访问！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>