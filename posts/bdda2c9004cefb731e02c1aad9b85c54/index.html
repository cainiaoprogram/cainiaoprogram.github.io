<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>try catch 执行原理及顺序 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="try catch 执行原理及顺序" />
<meta property="og:description" content="try{ //正常执行的代码 }catch (Exception e){ //出错后执行的代码 }finally{ //无论正常执行还是出错,之后都会执行的代码 } //跟上面try catch无关的代码 正常执行的代码如果出现异常,就不会执行出现异常语句后面的所有正常代码。 异常可能会被捕获掉,比如上面catch声明的是捕获Exception,那么所有Exception包括子类都会被捕获,但如Error或者是Throwable但又不是Exception(Exception继承Throwable)就不会被捕获。 如果异常被捕获,就会执行catch里面的代码.如果异常没有被捕获,就会往外抛出,相当于这整个方法出现了异常。 finally中的代码只要执行进了try catch永远都会被执行.执行完finally中的代码,如果异常被捕获就会执行外面跟这个try catch无关的代码.否则就会继续往外抛出异常。 return无论在哪里,只要执行到就会返回,但唯一一点不同的是如果return在try或者catch中,即使返回了,最终finally中的代码都会被执行.这种情况最常用的是打开了某些资源后必须关闭,比如打开了一个OutputStream,那就应该在finally中关闭,这样无论有没有出现异常,都会被关闭。
之前有看到资料说，try/catch要写在循环外面，，防止出现性能的损失。不过今天看了try/catch的执行原理，结论是在没有抛出异常的情况下，性能完全没区别。
讨论帖地址：http://stackoverflow.com/questions/141560/should-try-catch-go-inside-or-outside-a-loop
异常处理帖地址：http://www.javaworld.com/javaworld/jw-01-1997/jw-01-hood.html?page=1
1、类会跟随一张 异常表（exception table），每一个try catch都会在这个表里添加行记录，每一个记录都有4个信息（try catch的开始地址，结束地址，异常的处理起始位，异常类名称）。
2、当代码在运行时抛出了异常时，首先拿着抛出位置到异常表中查找是否可以被catch（例如看位置是不是处于任何一栏中的开始和结束位置之间），如果可以则跑到异常处理的起始位置开始处理，如果没有找到则原地return，并且copy异常的引用给父调用方，接着看父调用的异常表。。。以此类推。
所以最终的结论是，要根据需求，选择合适的try/catch进行处理，满足功能。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bdda2c9004cefb731e02c1aad9b85c54/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-10-06T18:13:32+08:00" />
<meta property="article:modified_time" content="2017-10-06T18:13:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">try catch 执行原理及顺序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="font-family:KaiTi_GB2312; font-size:14px"><span style="color:rgb(51,51,51)">try{<!-- --></span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)"><span style="white-space:pre"></span>//正常执行的代码</span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">}catch (Exception e){<!-- --></span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)"><span style="white-space:pre"></span>//出错后执行的代码</span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">}finally{<!-- --></span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)"><span style="white-space:pre"></span>//无论正常执行还是出错,之后都会执行的代码</span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">}</span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">//跟上面try catch无关的代码</span><br style="color:rgb(51,51,51)"> <br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">正常执行的代码如果出现异常,就不会执行出现异常语句</span><span style="color:rgb(51,51,51)">后面的所有正常代码。</span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">异常可能会被捕获掉,比</span><span style="color:rgb(51,51,51)">如上面catch声明的是捕获Exception</span><span style="color:rgb(51,51,51)">,那么所有Exception包括子类都会被捕获,但如Error或者是Throwable但又不是Exception(Exception继承Throwable)就不会被捕获。</span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">如果异常被捕获,就会执行catch</span><span style="color:rgb(51,51,51)">里面的代码.如果异常</span><span style="color:rgb(51,51,51)">没有被捕获,就会往外抛出,相当于这整个方法出现了异常。</span><br style="color:rgb(51,51,51)"> <span style="color:rgb(51,51,51)">finally</span><span style="color:rgb(51,51,51)">中的代码只要执行进了try catch永远都会被执行.执行完finally中的代码,如果异常被捕获就会执行外面跟这个try catch无关的代码.否则就会继续往外抛出异常。</span><br style="color:rgb(51,51,51)"> </span> 
<p><span style="color:rgb(51,51,51)"><span style="font-family:KaiTi_GB2312; font-size:14px">return无论在哪里,只要执行到就会返回,但唯一一点不同的是如果return在try或者catch中,即使返回了,最终finally中的代码都会被执行.这种情况最常用的是打开了某些资源后必须关闭,比如打开了一个OutputStream,那就应该在finally中关闭,这样无论有没有出现异常,都会被关闭。</span></span></p> 
<p><span style="color:rgb(51,51,51)"></span></p> 
<p><span style="font-family:KaiTi_GB2312; font-size:14px">之前有看到资料说，try/catch要写在循环外面，，防止出现性能的损失。不过今天看了try/catch的执行原理，结论是在没有抛出异常的情况下，性能完全没区别。</span></p> 
<p><span style="font-family:KaiTi_GB2312; font-size:14px">讨论帖地址：http://stackoverflow.com/questions/141560/should-try-catch-go-inside-or-outside-a-loop<br> 异常处理帖地址：http://www.javaworld.com/javaworld/jw-01-1997/jw-01-hood.html?page=1<br> 1、类会跟随一张 异常表（exception table），每一个try catch都会在这个表里添加行记录，每一个记录都有4个信息（try catch的开始地址，结束地址，异常的处理起始位，异常类名称）。<br> 2、当代码在运行时抛出了异常时，首先拿着抛出位置到异常表中查找是否可以被catch（例如看位置是不是处于任何一栏中的开始和结束位置之间），如果可以则跑到异常处理的起始位置开始处理，如果没有找到则原地return，并且copy异常的引用给父调用方，接着看父调用的异常表。。。以此类推。<br> </span></p> 
<p><span style="font-family:KaiTi_GB2312; font-size:14px">所以最终的结论是，要根据需求，选择合适的try/catch进行处理，满足功能。</span></p> 
<br>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5129680721dc6b6d7f475b7edb89ea42/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深入探讨Java字符串的拼接</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/50723ae556c684e9788846fa35bacb07/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot学习之旅：（六）springboot 整合 redis 以及 redis 通用工具类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>