<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Flask基本用法：一个HelloWorld，搭建服务、发起请求 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Flask基本用法：一个HelloWorld，搭建服务、发起请求" />
<meta property="og:description" content="目录
1、简介
2、安装
3、Flask使用示例
参考
1、简介 官网文档 Flask是一个轻量的web服务框架，我们可以利用它快速搭建一个服务，对外提供接口，其他人可以轻松调用我们的服务。这对算法工程师来说比较关键，我们通常不擅长搞开发，这种框架十分适合将算法封装成服务的形式提供给其他人使用。
更多介绍可从搜索引擎找到，这里不过多介绍。我们直接给出一个使用示例，相信大家看了后能快速掌握Flask的基本用法。
2、安装 安装十分简单，首先需要你有个python环境，这里不过多介绍；然后进入你的环境，使用pip安装即可：
pip install Flask 3、Flask使用示例 3.1 server编写 首先，编写一个server.py，作为服务：
from flask import Flask, request app = Flask(&#34;Demo&#34;) @app.route(&#39;/hello&#39;, methods=[&#39;POST&#39;, &#39;GET&#39;]) def display(): return {&#34;message&#34;: &#34;HelloFlask!&#34;, &#34;status&#34;: 0} @app.route(&#39;/send_snapshot&#39;, methods=[&#39;POST&#39;]) def process_snapshot(): # get post data data = request.get_json() print(&#34;got post data: {}&#34;.format(data)) # process ... result = { &#34;status&#34;: 0, &#34;message&#34;: &#34;send success!&#34;, } return result if __name__ == &#39;__main__&#39;: app." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1dd0f4b5796dde2cf30e31da763cbbfd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-08T16:03:39+08:00" />
<meta property="article:modified_time" content="2024-01-08T16:03:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Flask基本用法：一个HelloWorld，搭建服务、发起请求</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%C2%A01%E3%80%81%E7%AE%80%E4%BB%8B-toc" style="margin-left:0px;"><a href="#%C2%A01%E3%80%81%E7%AE%80%E4%BB%8B" rel="nofollow"> 1、简介</a></p> 
<p id="2%E3%80%81%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#2%E3%80%81%E5%AE%89%E8%A3%85" rel="nofollow">2、安装</a></p> 
<p id="2%E3%80%81Flask%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B-toc" style="margin-left:0px;"><a href="#2%E3%80%81Flask%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B" rel="nofollow">3、Flask使用示例</a></p> 
<p id="%E5%8F%82%E8%80%83-toc" style="margin-left:0px;"><a href="#%E5%8F%82%E8%80%83" rel="nofollow">参考</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%C2%A01%E3%80%81%E7%AE%80%E4%BB%8B"> 1、简介</h2> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="502" src="https://images2.imgbox.com/e3/e8/RzsAVUDR_o.png" width="623"> 
  <figcaption>
    官网文档 
  </figcaption> 
 </figure> 
</div> 
<blockquote> 
 <p>Flask是一个轻量的web服务框架，我们可以利用它快速搭建一个服务，对外提供接口，其他人可以轻松调用我们的服务。这对算法工程师来说比较关键，我们通常不擅长搞开发，这种框架十分适合将算法封装成服务的形式提供给其他人使用。</p> 
</blockquote> 
<p>        更多介绍可从搜索引擎找到，这里不过多介绍。我们直接给出一个使用示例，相信大家看了后能快速掌握Flask的基本用法。</p> 
<h2 id="2%E3%80%81%E5%AE%89%E8%A3%85">2、安装</h2> 
<p>        安装十分简单，首先需要你有个python环境，这里不过多介绍；然后进入你的环境，使用pip安装即可：</p> 
<pre><code class="language-bash">pip install Flask</code></pre> 
<h2 id="2%E3%80%81Flask%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B">3、Flask使用示例</h2> 
<h3>3.1 server编写</h3> 
<p>        首先，编写一个server.py，作为服务：</p> 
<pre><code class="language-python">from flask import Flask, request

app = Flask("Demo")


@app.route('/hello', methods=['POST', 'GET'])
def display():
    return {"message": "HelloFlask!", "status": 0}


@app.route('/send_snapshot', methods=['POST'])
def process_snapshot():
    # get post data
    data = request.get_json()
    print("got post data: {}".format(data))

    # process
    ...

    result = {
        "status": 0,
        "message": "send success!",
    }
    return result


if __name__ == '__main__':
    app.run(port=2023, host='127.0.0.1', debug=True)
</code></pre> 
<p>        在上述server中，我们通过@app.route()的方式指定路由以及所支持的方法。路由可以理解为子目录，整个服务有一个根目录，不同的功能可以放在对应的子目录中，体现在路由的URL上就是：“/”、“/A”、“/A/B/C”之类的样子；而方法则是指我们定义的这个函数是支持哪些访问方法，如“POST”、“GET”。</p> 
<h3>3.2 client编写</h3> 
<p>        然后，编写一个client.py，作为客户端，调用上面的服务进行测试：</p> 
<pre><code class="language-python">import requests
import json


def demo_hello():
    url = "http://127.0.0.1:2023/hello"
    response = requests.post(url)

    if response.status_code == 200:
        response_data = json.loads(response.content)
        print("got response: {}".format(response_data))
    else:
        print("failed!")


def demo_send():
    url = "http://127.0.0.1:2023/send_snapshot"

    data = {
        "start_timestamp": 1,
        "end_timestamp": 2,
        "img": None
    }
    response = requests.post(url, json=data)

    if response.status_code == 200:
        response_data = json.loads(response.content)
        print("send over, got response: {}".format(response_data))
    else:
        print("send failed!")


if __name__ == '__main__':
    demo_hello()
    demo_send()
</code></pre> 
<p>        其实使用起来很简单，跟调用其他web请求一个道理，都是通过 requests来解析URL，从而获取response，最后即可从response中获取想要的数据。</p> 
<h3>3.3 运行</h3> 
<p>        先启动server，再运行client，即可得到如下结果：</p> 
<pre><code class="language-python">1. 运行server
python server.py
结果形如：
 * Serving Flask app 'Demo'
 * Debug mode: on
WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:2023
Press CTRL+C to quit
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 887-814-515


2. 运行client.py
python client.py
结果形如：
got response: {'message': 'HelloFlask!', 'status': 0}
send over, got response: {'message': 'send success!', 'status': 0}</code></pre> 
<p class="img-center"><img alt="" height="185" src="https://images2.imgbox.com/7b/fc/fSZ50RnW_o.png" width="958"></p> 
<p class="img-center"><img alt="" height="47" src="https://images2.imgbox.com/e6/57/S9wsqCa4_o.png" width="547"></p> 
<p><strong>通过浏览器直接访问</strong>：        </p> 
<p>        此外，从server可以看到，我们是定义了hello的路由的，且支持GET方法：</p> 
<pre><code class="language-python">@app.route('/hello', methods=['POST', 'GET'])
def display():
    return {"message": "HelloFlask!", "status": 0}</code></pre> 
<p>        所以我们是可以直接从浏览器打开地址<a href="http://127.0.0.1:2023/hello" rel="nofollow" title="http://127.0.0.1:2023/hello">http://127.0.0.1:2023/hello</a>来获取对应的响应结果的，效果如下图：</p> 
<p><img alt="" height="202" src="https://images2.imgbox.com/d4/86/UIidvZbB_o.png" width="718"></p> 
<hr> 
<h2 id="%E5%8F%82%E8%80%83">参考</h2> 
<p>官方文档：<a href="https://flask.palletsprojects.com/en/3.0.x/" rel="nofollow" title="Welcome to Flask — Flask Documentation (3.0.x)">Welcome to Flask — Flask Documentation (3.0.x)</a></p> 
<p>github：<a href="https://github.com/pallets/flask/" title="GitHub - pallets/flask: The Python micro framework for building web applications.">GitHub - pallets/flask: The Python micro framework for building web applications.</a> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6586b275aeaf0c8f538843754f11a545/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python &#43;=和=&#43;的区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e19d40d1469693c584c3fa297066508/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python基础教程八（循环1）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>