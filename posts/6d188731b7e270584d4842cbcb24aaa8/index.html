<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>filecoin lotus benchmarks v26 GeForce GTX 2080 Ti GeForce GTX 1080 Ti - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="filecoin lotus benchmarks v26 GeForce GTX 2080 Ti GeForce GTX 1080 Ti" />
<meta property="og:description" content="filecoin lotus benchmarks v26 GeForce GTX 2080 Ti 1，编译bench2，基准测试3，GeForce GTX 2080 Ti 测试 1，编译bench 版本 # git show commit d11e375f828526eab2a59fd6fd3db88e3c5cb9d3 (HEAD -&gt; interopnet, tag: interop.5.13, origin/interopnet) Merge: 7b8ee402 1d8c8b9a Author: Travis Person &lt;travisperson@users.noreply.github.com&gt; Date: Wed May 13 05:44:28 2020 &#43;0000 Merge remote-tracking branch &#39;origin/fix/check-gas-limits&#39; into interopnet 设置环境变量 # export ALL_PROXY=socks5://127.0.0.1:1080 # git config --global http.proxy &#39;socks5://127.0.0.1:1080&#39; # export GO111MODULE=on # export GOPROXY=https://goproxy.cn env RUSTFLAGS=&#34;-C target-cpu=native -g&#34; FFI_BUILD_FROM_SOURCE=1 make clean deps bench 最后显示，编译成功，当前目录可以看到bench go build -o bench ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6d188731b7e270584d4842cbcb24aaa8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-14T15:10:01+08:00" />
<meta property="article:modified_time" content="2020-05-14T15:10:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">filecoin lotus benchmarks v26 GeForce GTX 2080 Ti GeForce GTX 1080 Ti</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>filecoin lotus benchmarks v26 GeForce GTX 2080 Ti</h4> 
 <ul><li><a href="#1bench_1" rel="nofollow">1，编译bench</a></li><li><a href="#2_35" rel="nofollow">2，基准测试</a></li><li><a href="#3GeForce_GTX_2080_Ti__132" rel="nofollow">3，GeForce GTX 2080 Ti 测试</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1bench_1"></a>1，编译bench</h2> 
<ul><li>版本</li></ul> 
<pre><code class="prism language-bench"># git show
commit d11e375f828526eab2a59fd6fd3db88e3c5cb9d3 (HEAD -&gt; interopnet, tag: interop.5.13, origin/interopnet)
Merge: 7b8ee402 1d8c8b9a
Author: Travis Person &lt;travisperson@users.noreply.github.com&gt;
Date:   Wed May 13 05:44:28 2020 +0000

    Merge remote-tracking branch 'origin/fix/check-gas-limits' into interopnet
</code></pre> 
<ul><li>设置环境变量</li></ul> 
<pre><code class="prism language-bench"># export ALL_PROXY=socks5://127.0.0.1:1080
# git config --global http.proxy 'socks5://127.0.0.1:1080'
# export GO111MODULE=on
# export GOPROXY=https://goproxy.cn
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">env</span> RUSTFLAGS<span class="token operator">=</span><span class="token string">"-C target-cpu=native -g"</span> FFI_BUILD_FROM_SOURCE<span class="token operator">=</span>1 <span class="token function">make</span> clean deps bench
</code></pre> 
<ul><li>最后显示，编译成功，当前目录可以看到<code>bench</code></li></ul> 
<pre><code class="prism language-bash">go build -o bench ./cmd/lotus-bench
go run github.com/GeertJohan/go.rice/rice append --exec bench -i ./build
</code></pre> 
<ul><li><code>bench</code>版本</li></ul> 
<pre><code class="prism language-bech"># ./bench --version
2020-05-14T15:01:36.340+0800	INFO	lotus-bench	lotus-bench/main.go:74	Starting lotus-bench
lotus-bench version 0.3.0
</code></pre> 
<h2><a id="2_35"></a>2，基准测试</h2> 
<ul><li>设置环境变量</li><li><code>RUST_LOG</code>rust日志</li><li><code>FIL_PROOFS_MAXIMIZE_CACHING</code>最大化内存参数</li></ul> 
<pre><code class="prism language-bench"># export RUST_LOG=Trace &amp;&amp; export FIL_PROOFS_MAXIMIZE_CACHING=1
</code></pre> 
<ul><li>开始测试</li></ul> 
<pre><code class="prism language-bench"># ./bench sealing --storage-dir=/storage/benchtmp --sector-size=32GiB
</code></pre> 
<ul><li>或者后台运行</li></ul> 
<pre><code class="prism language-bench"># nohup ./bench sealing --storage-dir=/raid5/benchtmp --sector-size=32GiB &gt;&gt; /raid5/bench.log 2&gt;&amp;1 &amp;
</code></pre> 
<ul><li>报错</li></ul> 
<pre><code class="prism language-bash">2020-05-14T23:16:04.644 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> seal_commit_phase1:end
2020-05-14T23:16:04.711 INFO filcrypto::proofs::api <span class="token operator">&gt;</span> seal_commit_phase1: finish
2020-05-14T23:16:04.805+0800	INFO	lotus-bench	lotus-bench/main.go:499	Generating PoRep <span class="token keyword">for</span> sector <span class="token punctuation">(</span>2<span class="token punctuation">)</span>
2020-05-14T23:16:04.825 INFO filcrypto::proofs::api <span class="token operator">&gt;</span> seal_commit_phase2: start
2020-05-14T23:16:04.900 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> seal_commit_phase2:start
2020-05-14T23:16:04.901 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parents cache of unlimited size
2020-05-14T23:16:04.901 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parent_cache<span class="token punctuation">[</span>1073741824<span class="token punctuation">]</span>
2020-05-14T23:16:04.902 INFO filecoin_proofs::caches <span class="token operator">&gt;</span> trying parameters memory cache for: STACKED<span class="token punctuation">[</span>34359738368<span class="token punctuation">]</span>
2020-05-14T23:16:04.902 INFO filecoin_proofs::caches <span class="token operator">&gt;</span> no params <span class="token keyword">in</span> memory cache <span class="token keyword">for</span> STACKED<span class="token punctuation">[</span>34359738368<span class="token punctuation">]</span>
2020-05-14T23:16:04.904 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> parameter <span class="token keyword">set</span> identifier <span class="token keyword">for</span> cache: layered_drgporep::PublicParams<span class="token punctuation">{<!-- --></span> graph: stacked_graph::StackedGraph<span class="token punctuation">{<!-- --></span>expansion_degree: 8 base_graph: drgraph::BucketGraph<span class="token punctuation">{<!-- --></span>size: 1073741824<span class="token punctuation">;</span> degree: 6<span class="token punctuation">;</span> hasher: poseidon_hasher<span class="token punctuation">}</span> <span class="token punctuation">}</span>, challenges: LayerChallenges <span class="token punctuation">{<!-- --></span> layers: 11, max_count: 18 <span class="token punctuation">}</span>, tree: merkletree-poseidon_hasher-8-8-0 <span class="token punctuation">}</span>
2020-05-14T23:16:04.904 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> ensuring that all ancestor directories for: <span class="token string">"/storage/filecoin-proof-parameters-v26/parameters-v26/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-0-sha256_hasher-82a357d2f2ca81dc61bb45f4a762807aedee1b0a53fd6c4e77b46a01bfef7820.params"</span> exist
2020-05-14T23:16:04.904 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> checking cache_path: <span class="token string">"/storage/filecoin-proof-parameters-v26/parameters-v26/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-0-sha256_hasher-82a357d2f2ca81dc61bb45f4a762807aedee1b0a53fd6c4e77b46a01bfef7820.params"</span> <span class="token keyword">for</span> parameters
2020-05-14T23:16:07.290 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> <span class="token function">read</span> parameters from cache <span class="token string">"/storage/filecoin-proof-parameters-v26/parameters-v26/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-0-sha256_hasher-82a357d2f2ca81dc61bb45f4a762807aedee1b0a53fd6c4e77b46a01bfef7820.params"</span> 
2020-05-14T23:16:07.290 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> got groth params <span class="token punctuation">(</span>34359738368<span class="token punctuation">)</span> <span class="token keyword">while</span> sealing
2020-05-14T23:16:07.290 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parents cache of unlimited size
2020-05-14T23:16:07.290 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parent_cache<span class="token punctuation">[</span>1073741824<span class="token punctuation">]</span>
2020-05-14T23:16:07.290 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> snark_proof:start
2020-05-14T23:16:07.298 INFO bellperson::groth16::prover <span class="token operator">&gt;</span> Bellperson 0.7.0 is being used<span class="token operator">!</span>
2020-05-14T23:20:18.490 INFO bellperson::gpu::locks <span class="token operator">&gt;</span> GPU is available <span class="token keyword">for</span> FFT<span class="token operator">!</span>
2020-05-14T23:20:18.490 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> Acquiring GPU lock<span class="token punctuation">..</span>.
2020-05-14T23:20:18.496 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock acquired<span class="token operator">!</span>
2020-05-14T23:20:18.732 INFO bellperson::gpu::fft <span class="token operator">&gt;</span> FFT: 1 working device<span class="token punctuation">(</span>s<span class="token punctuation">)</span> selected.
2020-05-14T23:20:18.732 INFO bellperson::gpu::fft <span class="token operator">&gt;</span> FFT: Device 0: GeForce RTX 2080 Ti
2020-05-14T23:20:18.732 INFO bellperson::domain <span class="token operator">&gt;</span> GPU FFT kernel instantiated<span class="token operator">!</span>
2020-05-14T23:23:12.352 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock released<span class="token operator">!</span>
2020-05-14T23:24:13.677 INFO bellperson::gpu::locks <span class="token operator">&gt;</span> GPU is available <span class="token keyword">for</span> Multiexp<span class="token operator">!</span>
2020-05-14T23:24:13.677 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> Acquiring GPU lock<span class="token punctuation">..</span>.
2020-05-14T23:24:13.840 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock acquired<span class="token operator">!</span>
2020-05-14T23:24:13.933 INFO bellperson::gpu::multiexp <span class="token operator">&gt;</span> Multiexp: 1 working device<span class="token punctuation">(</span>s<span class="token punctuation">)</span> selected. <span class="token punctuation">(</span>CPU utilization: 0<span class="token punctuation">)</span>
2020-05-14T23:24:13.933 INFO bellperson::gpu::multiexp <span class="token operator">&gt;</span> Multiexp: Device 0: GeForce RTX 2080 Ti <span class="token punctuation">(</span>Chunk-size: 7488999<span class="token punctuation">)</span>
2020-05-14T23:24:13.933 INFO bellperson::multiexp <span class="token operator">&gt;</span> GPU Multiexp kernel instantiated<span class="token operator">!</span>
2020-05-14T23:50:07.906 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock released<span class="token operator">!</span>
2020-05-14T23:50:09.849 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> snark_proof:finish
2020-05-14T23:50:09.849 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parents cache of unlimited size
2020-05-14T23:50:09.849 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parent_cache<span class="token punctuation">[</span>1073741824<span class="token punctuation">]</span>
2020-05-14T23:50:09.849 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parents cache of unlimited size
2020-05-14T23:50:09.849 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parent_cache<span class="token punctuation">[</span>1073741824<span class="token punctuation">]</span>
2020-05-14T23:50:09.849 INFO filecoin_proofs::caches <span class="token operator">&gt;</span> trying parameters memory cache for: STACKED<span class="token punctuation">[</span>34359738368<span class="token punctuation">]</span>-verifying-key
2020-05-14T23:50:09.849 INFO filecoin_proofs::caches <span class="token operator">&gt;</span> no params <span class="token keyword">in</span> memory cache <span class="token keyword">for</span> STACKED<span class="token punctuation">[</span>34359738368<span class="token punctuation">]</span>-verifying-key
2020-05-14T23:50:09.850 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> parameter <span class="token keyword">set</span> identifier <span class="token keyword">for</span> cache: layered_drgporep::PublicParams<span class="token punctuation">{<!-- --></span> graph: stacked_graph::StackedGraph<span class="token punctuation">{<!-- --></span>expansion_degree: 8 base_graph: drgraph::BucketGraph<span class="token punctuation">{<!-- --></span>size: 1073741824<span class="token punctuation">;</span> degree: 6<span class="token punctuation">;</span> hasher: poseidon_hasher<span class="token punctuation">}</span> <span class="token punctuation">}</span>, challenges: LayerChallenges <span class="token punctuation">{<!-- --></span> layers: 11, max_count: 18 <span class="token punctuation">}</span>, tree: merkletree-poseidon_hasher-8-8-0 <span class="token punctuation">}</span>
2020-05-14T23:50:09.850 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> ensuring that all ancestor directories for: <span class="token string">"/storage/filecoin-proof-parameters-v26/parameters-v26/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-0-sha256_hasher-82a357d2f2ca81dc61bb45f4a762807aedee1b0a53fd6c4e77b46a01bfef7820.vk"</span> exist
2020-05-14T23:50:09.850 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> checking cache_path: <span class="token string">"/storage/filecoin-proof-parameters-v26/parameters-v26/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-0-sha256_hasher-82a357d2f2ca81dc61bb45f4a762807aedee1b0a53fd6c4e77b46a01bfef7820.vk"</span> <span class="token keyword">for</span> verifying key
2020-05-14T23:50:09.946 INFO storage_proofs_core::parameter_cache <span class="token operator">&gt;</span> <span class="token function">read</span> verifying key from cache <span class="token string">"/storage/filecoin-proof-parameters-v26/parameters-v26/v26-stacked-proof-of-replication-merkletree-poseidon_hasher-8-8-0-sha256_hasher-82a357d2f2ca81dc61bb45f4a762807aedee1b0a53fd6c4e77b46a01bfef7820.vk"</span> 
2020-05-14T23:50:09.946 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> got verifying key <span class="token punctuation">(</span>34359738368<span class="token punctuation">)</span> <span class="token keyword">while</span> verifying seal
2020-05-14T23:50:09.971 INFO bellperson::gpu::locks <span class="token operator">&gt;</span> GPU is available <span class="token keyword">for</span> Multiexp<span class="token operator">!</span>
2020-05-14T23:50:09.971 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> Acquiring GPU lock<span class="token punctuation">..</span>.
2020-05-14T23:50:10.023 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock acquired<span class="token operator">!</span>
2020-05-14T23:50:10.123 INFO bellperson::gpu::multiexp <span class="token operator">&gt;</span> Multiexp: 1 working device<span class="token punctuation">(</span>s<span class="token punctuation">)</span> selected. <span class="token punctuation">(</span>CPU utilization: 0<span class="token punctuation">)</span>
2020-05-14T23:50:10.124 INFO bellperson::gpu::multiexp <span class="token operator">&gt;</span> Multiexp: Device 0: GeForce RTX 2080 Ti <span class="token punctuation">(</span>Chunk-size: 7488999<span class="token punctuation">)</span>
2020-05-14T23:50:10.124 INFO bellperson::multiexp <span class="token operator">&gt;</span> GPU Multiexp kernel instantiated<span class="token operator">!</span>
2020-05-14T23:50:10.219 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock released<span class="token operator">!</span>
2020-05-14T23:50:10.219 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> seal_commit_phase2:end
2020-05-14T23:50:10.219 INFO filcrypto::proofs::api <span class="token operator">&gt;</span> seal_commit_phase2: finish
2020-05-14T23:50:10.219 INFO filcrypto::proofs::api <span class="token operator">&gt;</span> verify_seal: start
2020-05-14T23:50:10.220 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parents cache of unlimited size
2020-05-14T23:50:10.220 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parent_cache<span class="token punctuation">[</span>1073741824<span class="token punctuation">]</span>
2020-05-14T23:50:10.220 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parents cache of unlimited size
2020-05-14T23:50:10.220 INFO storage_proofs_porep::stacked::vanilla::graph <span class="token operator">&gt;</span> using parent_cache<span class="token punctuation">[</span>1073741824<span class="token punctuation">]</span>
2020-05-14T23:50:10.220 INFO filecoin_proofs::caches <span class="token operator">&gt;</span> trying parameters memory cache for: STACKED<span class="token punctuation">[</span>34359738368<span class="token punctuation">]</span>-verifying-key
2020-05-14T23:50:10.220 INFO filecoin_proofs::caches <span class="token operator">&gt;</span> found params <span class="token keyword">in</span> memory cache <span class="token keyword">for</span> STACKED<span class="token punctuation">[</span>34359738368<span class="token punctuation">]</span>-verifying-key
2020-05-14T23:50:10.220 INFO filecoin_proofs::api::seal <span class="token operator">&gt;</span> got verifying key <span class="token punctuation">(</span>34359738368<span class="token punctuation">)</span> <span class="token keyword">while</span> verifying seal
2020-05-14T23:50:10.237 INFO bellperson::gpu::locks <span class="token operator">&gt;</span> GPU is available <span class="token keyword">for</span> Multiexp<span class="token operator">!</span>
2020-05-14T23:50:10.237 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> Acquiring GPU lock<span class="token punctuation">..</span>.
2020-05-14T23:50:10.414 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock acquired<span class="token operator">!</span>
2020-05-14T23:50:10.522 INFO bellperson::gpu::multiexp <span class="token operator">&gt;</span> Multiexp: 1 working device<span class="token punctuation">(</span>s<span class="token punctuation">)</span> selected. <span class="token punctuation">(</span>CPU utilization: 0<span class="token punctuation">)</span>
2020-05-14T23:50:10.522 INFO bellperson::gpu::multiexp <span class="token operator">&gt;</span> Multiexp: Device 0: GeForce RTX 2080 Ti <span class="token punctuation">(</span>Chunk-size: 7488999<span class="token punctuation">)</span>
2020-05-14T23:50:10.522 INFO bellperson::multiexp <span class="token operator">&gt;</span> GPU Multiexp kernel instantiated<span class="token operator">!</span>
2020-05-14T23:50:10.612 DEBUG bellperson::gpu::locks <span class="token operator">&gt;</span> GPU lock released<span class="token operator">!</span>
2020-05-14T23:50:10.612 INFO filcrypto::proofs::api <span class="token operator">&gt;</span> verify_seal: finish
2020-05-14T23:50:22.791+0800	WARN	lotus-bench	lotus-bench/main.go:90	failed to run seals:
    main.glob<span class="token punctuation">..</span>func3
        /root/interopnet/lotus/cmd/lotus-bench/main.go:233
  - porep proof <span class="token keyword">for</span> sector 1 was invalid:
    main.runSeals
        /root/interopnet/lotus/cmd/lotus-bench/main.go:550
</code></pre> 
<h2><a id="3GeForce_GTX_2080_Ti__132"></a>3，GeForce GTX 2080 Ti 测试</h2> 
<ul><li>CPU <code>3950X</code></li></ul> 
<pre><code class="prism language-bench"># lscpu
AMD Ryzen 9 3950X 16-Core Processor
</code></pre> 
<ul><li>显卡 <code>GeForce GTX 1080 Ti</code></li></ul> 
<pre><code class="prism language-bench"># lspci | grep -i nvidia
2d:00.0 VGA compatible controller: NVIDIA Corporation GP102 [GeForce GTX 1080 Ti] (rev a1)
2d:00.1 Audio device: NVIDIA Corporation GP102 HDMI Audio Controller (rev a1)
</code></pre> 
<ul><li>内存，交换分区</li></ul> 
<pre><code class="prism language-bench"># free -h
              总计         已用        空闲      共享    缓冲/缓存    可用
内存：       125Gi       729Mi       104Gi       0.0Ki        20Gi       123Gi
交换：       105Gi       302Mi       105Gi
</code></pre> 
<ul><li>bench 编译版本</li></ul> 
<pre><code class="prism language-bench"># git show
commit 54b3eafd6d541a68199965bbf13ec2e339c625f5 (HEAD -&gt; master, origin/master, origin/HEAD)
Merge: 5c73602d f6589407
Author: Whyrusleeping &lt;why@ipfs.io&gt;
Date:   Fri May 15 13:05:27 2020 -0700

    Merge pull request #1758 from filecoin-project/fix/lotus-bench-secp

    register secp signatures for lotus bench usage
</code></pre> 
<ul><li>bench编译</li></ul> 
<pre><code class="prism language-bash"><span class="token function">env</span> RUSTFLAGS<span class="token operator">=</span><span class="token string">"-C target-cpu=native -g"</span> FFI_BUILD_FROM_SOURCE<span class="token operator">=</span>1 <span class="token function">make</span> clean deps bench
</code></pre> 
<ul><li>bench 运行</li></ul> 
<pre><code class="prism language-bench"># export RUST_LOG=Trace &amp;&amp; export FIL_PROOFS_MAXIMIZE_CACHING=1
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">nohup</span> ./bench sealing --storage-dir<span class="token operator">=</span>/raid5/benchtmp --sector-size<span class="token operator">=</span>32GiB <span class="token operator">&gt;&gt;</span> /raid5/bench.log 2<span class="token operator">&gt;</span><span class="token operator">&amp;</span>1 <span class="token operator">&amp;</span>
</code></pre> 
<ul><li>bench 测试结果，跑完大概12个小时</li></ul> 
<pre><code class="prism language-bash">results <span class="token punctuation">(</span>v26<span class="token punctuation">)</span> <span class="token punctuation">(</span>34359738368<span class="token punctuation">)</span>
seal: addPiece: 6m26.577337189s <span class="token punctuation">(</span>84.8 MiB/s<span class="token punctuation">)</span>
seal: preCommit phase 1: 4h17m35.603586994s <span class="token punctuation">(</span>2.12 MiB/s<span class="token punctuation">)</span>
seal: preCommit phase 2: 1h43m21.981600421s <span class="token punctuation">(</span>5.28 MiB/s<span class="token punctuation">)</span>
seal: commit phase 1: 1m4.253378137s <span class="token punctuation">(</span>510 MiB/s<span class="token punctuation">)</span>
seal: commit phase 2: 1h2m37.451786187s <span class="token punctuation">(</span>8.72 MiB/s<span class="token punctuation">)</span>
seal: verify: 37.58607ms
unseal: 4h17m51.34613723s  <span class="token punctuation">(</span>2.12 MiB/s<span class="token punctuation">)</span>

generate candidates: 7.194132ms <span class="token punctuation">(</span>4.34 TiB/s<span class="token punctuation">)</span>
compute winnnig post proof <span class="token punctuation">(</span>cold<span class="token punctuation">)</span>: 14.527132336s
compute winnnig post proof <span class="token punctuation">(</span>hot<span class="token punctuation">)</span>: 6.148464516s
verify winnnig post proof <span class="token punctuation">(</span>cold<span class="token punctuation">)</span>: 98.07689ms
verify winnnig post proof <span class="token punctuation">(</span>hot<span class="token punctuation">)</span>: 14.109101ms

compute window post proof <span class="token punctuation">(</span>cold<span class="token punctuation">)</span>: 15m57.884786147s
compute window post proof <span class="token punctuation">(</span>hot<span class="token punctuation">)</span>: 16m16.748839396s
verify window post proof <span class="token punctuation">(</span>cold<span class="token punctuation">)</span>: 5.504320785s
verify window post proof <span class="token punctuation">(</span>hot<span class="token punctuation">)</span>: 44.248935ms
</code></pre> 
<ul><li>ben运行日志</li><li><a href="https://www.codepile.net/pile/dPKlAKW0" rel="nofollow">bench完整运行日志</a></li></ul> 
<p>参考：</p> 
<ol><li><a href="https://github.com/filecoin-project/benchmarks">filecoin-project benchmarks</a></li><li><a href="https://blog.csdn.net/u010953692/article/details/105674010">filecoin benchmarks v25</a></li><li><a href="https://github.com/CoinSummer/filecoin">CoinSummer实验室Filecoin资源分享</a></li><li><a href="https://www.codepile.ne" rel="nofollow">轻松共享大量代码</a></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/13e7f1c8066298ba28105a5ce3cbae75/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">el-table的多选框（默认全选，条件性渲染，动态勾选等功能）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b7059921438a144ab9993fe18bc06c5d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">docker搭建jenkins</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>