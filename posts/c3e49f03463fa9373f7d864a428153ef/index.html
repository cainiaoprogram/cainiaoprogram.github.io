<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GDB调试指导 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GDB调试指导" />
<meta property="og:description" content="1.调试 (gdb) n/next // 执行一条语句，遇到hi函数调用，当作一条语句执行 (gdb) s/step // 执行一条语句，遇到函数时，进入函数 (gdb) fin/finsh // 执行完当前函数，返回到上一调用层，同时打印函数的返回值 (gdb) return &lt;返回值&gt; // 从当前函数当前指令处返回，返回值为指定值 (gdb) u/untile // 执行到当前语句后的一条语句，即便其为循环语句，也会直接执行完循环，并指向循环后的一条语句 (gdb) u/untile &lt;location&gt; // 执行到当前函数退出或到达当前函数指定的位置 (gdb) advance &lt;location&gt; // 执行到当前函数退出或到达当前函数或其调用函数指定的位置 (gdb) c/continue // 继续执行当前程序 (gdb) f/frame // 查看当前所在源文件及行号 (gdb) show endiam 2.停止点 2.1设置断点 // 设置普通断点: (gdb) b/breakpoint &lt;location&gt; &lt;location&gt;： (gdb) b 123 // 在当前源文件第123行打断点 (gdb) b func // 在整个可执行程序中，调用函数func处打断点 (gdb) b test.c:12 // 在源文件test.c中的第12行打断点 (gdb) b &#43;/-10 // 基于当前源文件的当前行向下/向上偏移10行的位置设置断点 (gdb) b *0x23456 // 当程序不包含调试信息时，在代码段的指定地址处打断点，当pc运行至该指令地址处暂停 (gdb) b // 如果包含调试信息，则在当前代码处设置断点；否则，在当前指令处设置断点 // 设置条件断点： (gdb) b &lt;location&gt; if (expression) // 样例如下： (gdb) b test." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c3e49f03463fa9373f7d864a428153ef/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-18T10:40:28+08:00" />
<meta property="article:modified_time" content="2022-02-18T10:40:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GDB调试指导</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.调试</h2> 
<pre><code>(gdb) n/next              // 执行一条语句，遇到hi函数调用，当作一条语句执行
(gdb) s/step              // 执行一条语句，遇到函数时，进入函数
(gdb) fin/finsh           // 执行完当前函数，返回到上一调用层，同时打印函数的返回值
(gdb) return &lt;返回值&gt;      // 从当前函数当前指令处返回，返回值为指定值
(gdb) u/untile            // 执行到当前语句后的一条语句，即便其为循环语句，也会直接执行完循环，并指向循环后的一条语句
(gdb) u/untile &lt;location&gt; // 执行到当前函数退出或到达当前函数指定的位置
(gdb) advance &lt;location&gt;  // 执行到当前函数退出或到达当前函数或其调用函数指定的位置
(gdb) c/continue          // 继续执行当前程序
(gdb) f/frame             // 查看当前所在源文件及行号
(gdb) show endiam         </code></pre> 
<h2>2.停止点</h2> 
<h3>2.1设置断点</h3> 
<pre><code>// 设置普通断点:
(gdb) b/breakpoint &lt;location&gt;
&lt;location&gt;：
(gdb) b 123           // 在当前源文件第123行打断点
(gdb) b func          // 在整个可执行程序中，调用函数func处打断点
(gdb) b test.c:12     // 在源文件test.c中的第12行打断点
(gdb) b +/-10         // 基于当前源文件的当前行向下/向上偏移10行的位置设置断点
(gdb) b *0x23456      // 当程序不包含调试信息时，在代码段的指定地址处打断点，当pc运行至该指令地址处暂停
(gdb) b               // 如果包含调试信息，则在当前代码处设置断点；否则，在当前指令处设置断点

// 设置条件断点：
(gdb) b &lt;location&gt; if (expression)

// 样例如下：
(gdb) b test.c:12 if (count == 10)    // 在test.c的第12行设置条件断点，当变量count的值等于10时暂停

(gdb) info b/break                    // 查看设置的所有停止点信息及编号</code></pre> 
<h3>2.2.设置监视点</h3> 
<pre><code>(gdb) watch &lt;addr/变量&gt;    // 设置观察点，当一个变量的值发生变化时，程序会停下来
(gdb) rwatch &lt;addr/变量&gt;   // 设置观察点，当一个变量被读时，停止程序
(gdb) awatch &lt;addr/变量&gt;   // 设置观察点，当一个变量被读或写时，停止程序

(gdb) info watch           // 查看所有设置的观察点  

(gdb) watch &lt;addr/变量&gt; if (expression)  // 设置条件监视点</code></pre> 
<h3>2.3.设置捕捉点</h3> 
<pre><code>(gdb) catch &lt;event&gt;              // 当发生event事件时，停止程序
&lt;event&gt;：
throw              // 一个C++抛出的异常
catch              // 一个C++捕捉到的异常
exec               // 调用系统调用exec时
fork               // 调用系统调用fork时
vfork              // 调用系统调用vfork时
load &lt;libname&gt;     // 载入共享库(动态库链接库)时，可以不指定具体的库名
unload &lt;libname&gt;   // 卸载共享库(动态库链接库)时，可以不指定具体的库名

(gdb) tcatch &lt;event&gt;  // 设置一次捕捉点，一次之后就会被删除</code></pre> 
<h3>2.4 维护停止点</h3> 
<pre><code>// 修改停止点
(gdb) info b/break                       // 查看设置的所有停止点信息及编号
(gdb) condition &lt;停止点号&gt; &lt;expression&gt;  // 给一个断点设置条件或修改一个条件停止点的条件
(gdb) condition &lt;停止点号&gt;               // 清除停止点的条件
(gdb) ignore &lt;停止点号&gt; &lt;count&gt;          // 忽略指定断点号的停止条件count次

// 可以使用 delete/clear/disable/enable 这几个命令维护停止点
(gdb) dis/disable b/breakpoint &lt;断点号范围&gt;    // 去使能指定的断点

(gdb) enable b/breakpoint &lt;断点号范围&gt;         // 使能指定的断点
(gdb) enable b/breakpoint once &lt;断点号范围&gt;    // 使能指定的断点，只生效一次后去使能
(gdb) enable b/breakpoint delete &lt;断点号范围&gt;  // 使能指定的断点，只生效一次后删除

(gdb) del/delete b/breakpoint &lt;断点号范围&gt;     // 删除指定的断电

(gdb) clear                                   // 清除已定义的所有停止点
(gdb) clear &lt;func/filename:func&gt;              // 清除指定函数内的所有停止点
(gdb) clear &lt;linenum/filename:linenum&gt;        // 清除指定行号上所有的停止点</code></pre> 
<h3>2.5 为停止点设定运行命令</h3> 
<pre><code>(gdb) break/watck &lt;location&gt; if (expression)
(gdb) commands
    &gt; &lt;command lists&gt;                 // 设置触发条件停止点时的运行命令
    &gt; continue
    &gt; end

// 样例如下：
(gdb) b foo.c if (x &gt; 0)
(gdb) commands
    &gt; printf "x is %d\n", x           // 当x &gt; 0 时，打印x的值
    &gt; continue
    &gt; end</code></pre> 
<h3>3.变量查看修改及打印</h3> 
<pre><code>(gdb) p/print/inspect [/&lt;显示格式&gt;] &lt;表达式&gt;
&lt;显示格式&gt;：
x: 以16进制打印
d: 以10进制打印
u: 以10进制无符号数打印
o: 以八进制无符号数打印
t: 以二进制格式打印
a: 以地址格式打印，内容包括16进制地址以及相关信息
c: 以字符形式打印
f: 以浮点格式打印
(gdb) p *&lt;addr&gt;@&lt;数组元素个数&gt;    // 查看数组元素
(gdb) p/printf "&lt;表达式&gt;", &lt;变量&gt; // 输出变量的信息

// 样例如下：
(gdb) p *a@10                    // 前提：int a[10] = { 0 }; 输出：打印数组a的所有元素
(gdb) p "x = %d\n", x            // 输出x的值

(gdb) i/info loc/locals              // 查看局部变量
(gdb) i/info scope                   // 查看作用域的局部变量
(gdb) i/info r/register              // 查看寄存器
(gdb) i/info all-registers           // 查看所有寄存器，并列出他们的内容
(gdb) i/info float                   // 查看浮点寄存器
(gdb) i/info addr/address &lt;变量名&gt;   //  查看变量的地址
(gdb) i/info b/breakpoints           // 查看所有的断点信息
(gdb) i/info fr/frame &lt;N&gt;            // 列出当前N层堆栈信息，N缺省时默认打印第一层
(gdb) i/info stack &lt;N&gt;               // 打印当前N层调用栈信息，N可缺省
(gdb) i/info stack full &lt;N&gt;          // 打印当前N层调用栈信息，并打印每层栈中局部变量的值, N可缺省
(gdb) i/info func/functions          // 查看所有函数定义
(gdb) i/info threads                 // 查看当前已知的线程
(gdb) i/info watch/watchpoints       // 查看所有的监视点信息

(gdb) x/s &lt;addr&gt;                 // 打印字符串
(gdb) x/i &lt;addr&gt;                 // 以汇编方式查看</code></pre> 
<h3>4.查看调用栈</h3> 
<pre><code>(gdb) bt/backtrace/where &lt;N&gt;         // 打印当前N层调用栈信息，N可缺省
(gdb) bt/backtrace/where full &lt;N&gt;    // 打印当前N层栈信息，并打印每层栈中局部变量的值，N可缺省
(gdb) f/frame &lt;栈帧编号&gt;              // 打印对应栈帧编号的调用信息
(gdb) i/info fr/frame &lt;N&gt;            // 列出当前N层堆栈信息，N缺省时默认打印第一层
(gdb) i/info stack &lt;N&gt;               // 打印当前N层调用栈信息，N可缺省
(gdb) i/info stack full &lt;N&gt;          // 打印当前N层调用栈信息，并打印每层栈中局部变量的值, N可缺省</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/42e5a1e77e34d25c15822db003a60fe4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Node.js报错：UnhandledPromiseRejectionWarning: Unhandled promise rejection</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b306585330a29823559e99208bfa4a48/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;基类指针释放无法调用派生类析构代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>