<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python生成器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python生成器" />
<meta property="og:description" content="文章目录 一、生成器二、生成器练习三、生成器yield的其他用法四、生成器表达式五、yield和return的对比 一、生成器 &#39;&#39;&#39; 生成器对象： 1.本质： 还是内置有__iter__和__next__的迭代器对象 2.区别： 迭代器对象是解释器自动提供的 数据类型/文件对象&gt;&gt;&gt;:迭代器对象 生成器对象是程序员(自己)编写出来的 代码、关键字&gt;&gt;&gt;:迭代器对象(生成器) 3.创建生成器的基本语法 函数体代码中填写yield关键字 4.学习生成器对象的目的 主要是为了优化代码 也是一种不依赖于索引取值的另一方式 可以节省数据类型的内存占用空间(主要) &#39;&#39;&#39; &#39;&#39;&#39;生成器基本语法&#39;&#39;&#39; def my_iter(): &#34;&#34;&#34;在函数体代码中填写yield关键字&#34;&#34;&#34; print(&#39;这是第一行代码&#39;) yield 1 # 如果yield后面有数据值 那相当于return一样返回出去 print(&#39;这是第二行代码&#39;) yield 2,3,4 # 如果有多个数据值，用逗号隔开，会组成元组的形式返回出去 &#39;&#39;&#39; 1.函数体代码中如果有yield关键字 那么函数名加括号并不会执行函数体代码 会生成一个生成器对象(迭代器对象) &#39;&#39;&#39; res = my_iter() #第一次加括号调用不会执行函数体代码 &#39;&#39;&#39;使用加括号之后的结果调用__next__才会执行函数体代码&#39;&#39;&#39; res.__next__() #直接由函数变成了迭代器对象(生成器) res.__next__() &#39;&#39;&#39;每次执行完__next__代码都会停在yield位置， 下次基于该位置继续往下找第二个yield&#39;&#39;&#39; res.__next__() # 和迭代器对象一样，当后面没有值继续__next__后会报错：StopIteration 二、生成器练习 &#39;&#39;&#39;生成器练习&#39;&#39;&#39; &#39;&#39;&#39;用生成器来模拟range的三种功能&#39;&#39;&#39; for i in range(0,10,2): pass &#39;&#39;&#39;先实现两个参数的range的编写&#39;&#39;&#39; def my_range(start,end): # 创建一个函数给予两个形参，模拟range的开始和结束 while start &lt; end: # 因为开始值不能大于结束值，不然会无限下去 yield start # 条件成立后进入返回开始值 start &#43;= 1 # 每次返回完毕后加1 for i in my_range(0,10): print(i,end=&#39; &#39;) &#39;&#39;&#39;在实现一个参数的range的编写&#39;&#39;&#39; def my_range(start,end=None):#一个参数的先设置一个形参，可以在写一个默认参数 &#39;&#39;&#39;end可以不传值，可以直接弄成默认参数，end=None&#39;&#39;&#39; &#39;&#39;&#39;代码层面做判断，将形参数据做替换处理&#39;&#39;&#39; if not end: # 如果没有给结束传值 end = start # 那么就让结束值等于开始值 start = 0 # 再让开始值从默认0开始 while start &lt; end: # 开始值不能大于结束值 yield start start &#43;= 1 for i in range(10): print(i, end=&#39; &#39;) &#39;&#39;&#39;最后实现三个参数的range编写&#39;&#39;&#39; def my_range(start,end=None, step=1): # 创建一个形参两个关键字参数 if step &lt; 1: # 如果间隔小于1的话，相当于只有两个参数 所以给它默认等于1 step = 1 if not end: # 如果没有传值给end，那就是只有一个参数 start = end # 那么就让end等于start start = 0 # 让start从0开始 while start &lt; end: # 开始值不能大于结束值 yield start # 返回开始值 start &#43;= step # for i in my_range(0,20,2): print(i,end=&#39; &#39;) 三、生成器yield的其他用法 def eat(name,food=None): # 创建一个函数，一个形参，第二个参数给它默认参数 print(&#39;%s正在吃." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/27b5bbe66088a69213bd971b801d1baf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-14T19:16:11+08:00" />
<meta property="article:modified_time" content="2023-09-14T19:16:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python生成器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、生成器</a></li><li><a href="#_42" rel="nofollow">二、生成器练习</a></li><li><a href="#yield_92" rel="nofollow">三、生成器yield的其他用法</a></li><li><a href="#_113" rel="nofollow">四、生成器表达式</a></li><li><a href="#yieldreturn_149" rel="nofollow">五、yield和return的对比</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、生成器</h2> 
<pre><code class="prism language-python">	<span class="token triple-quoted-string string">'''
	生成器对象：
	1.本质：
	    还是内置有__iter__和__next__的迭代器对象
	2.区别：
	    迭代器对象是解释器自动提供的
	        数据类型/文件对象&gt;&gt;&gt;:迭代器对象
	    生成器对象是程序员(自己)编写出来的
	        代码、关键字&gt;&gt;&gt;:迭代器对象(生成器)
	        
	3.创建生成器的基本语法
	    函数体代码中填写yield关键字
	
	4.学习生成器对象的目的
	    主要是为了优化代码 也是一种不依赖于索引取值的另一方式
	    可以节省数据类型的内存占用空间(主要)
	'''</span>
	<span class="token triple-quoted-string string">'''生成器基本语法'''</span>
	<span class="token keyword">def</span> <span class="token function">my_iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	    <span class="token triple-quoted-string string">"""在函数体代码中填写yield关键字"""</span>
	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'这是第一行代码'</span><span class="token punctuation">)</span>
	    <span class="token keyword">yield</span> <span class="token number">1</span> <span class="token comment"># 如果yield后面有数据值 那相当于return一样返回出去</span>
	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'这是第二行代码'</span><span class="token punctuation">)</span>
	    <span class="token keyword">yield</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span> <span class="token comment"># 如果有多个数据值，用逗号隔开，会组成元组的形式返回出去</span>
	<span class="token triple-quoted-string string">'''
	1.函数体代码中如果有yield关键字
	那么函数名加括号并不会执行函数体代码
	会生成一个生成器对象(迭代器对象)
	'''</span>
	res <span class="token operator">=</span> my_iter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#第一次加括号调用不会执行函数体代码</span>
	<span class="token triple-quoted-string string">'''使用加括号之后的结果调用__next__才会执行函数体代码'''</span>
	res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#直接由函数变成了迭代器对象(生成器)</span>
	res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token triple-quoted-string string">'''每次执行完__next__代码都会停在yield位置，
	下次基于该位置继续往下找第二个yield'''</span>
	res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span>  
	<span class="token comment"># 和迭代器对象一样，当后面没有值继续__next__后会报错：StopIteration</span>
</code></pre> 
<h2><a id="_42"></a>二、生成器练习</h2> 
<pre><code class="prism language-python">	<span class="token triple-quoted-string string">'''生成器练习'''</span>
	<span class="token triple-quoted-string string">'''用生成器来模拟range的三种功能'''</span>
	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	    <span class="token keyword">pass</span>
	
	<span class="token triple-quoted-string string">'''先实现两个参数的range的编写'''</span>
	<span class="token keyword">def</span> <span class="token function">my_range</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 创建一个函数给予两个形参，模拟range的开始和结束</span>
		<span class="token keyword">while</span> start <span class="token operator">&lt;</span> end<span class="token punctuation">:</span>  <span class="token comment"># 因为开始值不能大于结束值，不然会无限下去</span>
			<span class="token keyword">yield</span> start  <span class="token comment"># 条件成立后进入返回开始值</span>
			start <span class="token operator">+=</span> <span class="token number">1</span>  <span class="token comment"># 每次返回完毕后加1</span>

	<span class="token keyword">for</span> i <span class="token keyword">in</span> my_range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	
	
	<span class="token triple-quoted-string string">'''在实现一个参数的range的编写'''</span>
	<span class="token keyword">def</span> <span class="token function">my_range</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment">#一个参数的先设置一个形参，可以在写一个默认参数</span>
	<span class="token triple-quoted-string string">'''end可以不传值，可以直接弄成默认参数，end=None'''</span>
	<span class="token triple-quoted-string string">'''代码层面做判断，将形参数据做替换处理'''</span>
		<span class="token keyword">if</span> <span class="token keyword">not</span> end<span class="token punctuation">:</span>  <span class="token comment"># 如果没有给结束传值</span>
			end <span class="token operator">=</span> start  <span class="token comment"># 那么就让结束值等于开始值</span>
			start <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment"># 再让开始值从默认0开始</span>

		<span class="token keyword">while</span> start <span class="token operator">&lt;</span> end<span class="token punctuation">:</span>  <span class="token comment"># 开始值不能大于结束值</span>
			<span class="token keyword">yield</span> start
			start <span class="token operator">+=</span> <span class="token number">1</span>

	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	
	
	<span class="token triple-quoted-string string">'''最后实现三个参数的range编写'''</span>
	<span class="token keyword">def</span> <span class="token function">my_range</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> step<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 创建一个形参两个关键字参数</span>
	    <span class="token keyword">if</span> step <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token comment"># 如果间隔小于1的话，相当于只有两个参数 所以给它默认等于1</span>
	        step <span class="token operator">=</span> <span class="token number">1</span>
	
	    <span class="token keyword">if</span> <span class="token keyword">not</span> end<span class="token punctuation">:</span>  <span class="token comment"># 如果没有传值给end，那就是只有一个参数</span>
	        start <span class="token operator">=</span> end  <span class="token comment"># 那么就让end等于start</span>
	        start <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 让start从0开始</span>
	
	    <span class="token keyword">while</span> start <span class="token operator">&lt;</span> end<span class="token punctuation">:</span>  <span class="token comment"># 开始值不能大于结束值</span>
	        <span class="token keyword">yield</span> start  <span class="token comment"># 返回开始值</span>
	        start <span class="token operator">+=</span> step  <span class="token comment">#</span>
	
	<span class="token keyword">for</span> i <span class="token keyword">in</span> my_range<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
	    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="yield_92"></a>三、生成器yield的其他用法</h2> 
<pre><code class="prism language-python">	<span class="token keyword">def</span> <span class="token function">eat</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>food<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 创建一个函数，一个形参，第二个参数给它默认参数</span>
	    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s正在吃.....'</span> <span class="token operator">%</span> name<span class="token punctuation">)</span>
	
	    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
	        food <span class="token operator">=</span> <span class="token keyword">yield</span>  <span class="token comment"># 关键字yield，变成生成器了</span>
	        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'%s正在吃%s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span>food<span class="token punctuation">)</span><span class="token punctuation">)</span>
	
	
	res <span class="token operator">=</span> eat<span class="token punctuation">(</span><span class="token string">'chen'</span><span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>  <span class="token comment"># &lt;generator object eat at 0x000001DCAD48F0B0&gt;</span>
	res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 调用双下__next__</span>
	res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 这里food值是None</span>

	<span class="token string">'send做了两件事情：1. 传值给yield、2. 执行__next__'</span>
	res<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'黄焖鸡米饭'</span><span class="token punctuation">)</span>  <span class="token comment"># send传递值</span>
	res<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'饺子'</span><span class="token punctuation">)</span>
	res<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'饺子'</span><span class="token punctuation">)</span>
	res<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">'饺子'</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_113"></a>四、生成器表达式</h2> 
<pre><code class="prism language-python">	<span class="token triple-quoted-string string">'''
	生成器表达式
	目的就是为了节省储存空间
	'''</span>
	
	<span class="token triple-quoted-string string">'''列表表达式'''</span>
	name_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'chen'</span><span class="token punctuation">,</span><span class="token string">'sb'</span><span class="token punctuation">,</span><span class="token string">'shab'</span><span class="token punctuation">]</span>
	<span class="token triple-quoted-string string">'''第一种'''</span>
	res <span class="token operator">=</span><span class="token punctuation">(</span>name <span class="token keyword">for</span> name <span class="token keyword">in</span> name_list<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ['chen', 'sb', 'shab']</span>
	
	<span class="token triple-quoted-string string">'''第二种'''</span>
	res <span class="token operator">=</span><span class="token punctuation">[</span>name <span class="token keyword">for</span> name <span class="token keyword">in</span> name_list<span class="token punctuation">]</span>  <span class="token comment"># 直接用中括号来表示，这样省掉转换声明步骤</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
	

	<span class="token triple-quoted-string string">'''生成器表达式'''</span>
	res <span class="token operator">=</span><span class="token punctuation">(</span>name <span class="token keyword">for</span> name <span class="token keyword">in</span> name_list<span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment"># &lt;generator object &lt;genexpr&gt; at 0x0000020CDFB3F0B0&gt;</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	
	
	res <span class="token operator">=</span> <span class="token punctuation">(</span>i<span class="token operator">**</span><span class="token number">2</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token triple-quoted-string string">'''生成器表达式'''</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>__next__<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>end<span class="token operator">=</span><span class="token string">' '</span><span class="token punctuation">)</span>
	
	<span class="token triple-quoted-string string">'''列表表达式'''</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="yieldreturn_149"></a>五、yield和return的对比</h2> 
<pre><code class="prism language-python">	<span class="token triple-quoted-string string">'''yield和return的对比'''</span>
	
	<span class="token triple-quoted-string string">'''
	# yield
	1.代码遇到yield不会停止，而是停住
	2.yield也可以有返回值，并且还支持多个，以元组的形式返回
	3.yield可以把一个函数变成生成器，next取值
	
	# return
	1.代码遇到return就会停止
	2.return可以有返回值并且还支持多个，以元组的形式返回
	'''</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3596d4329b89ebeaf74720e0528d58fe/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">小白学熵权法原理及案例教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cbdcf36cbf7244b2d32889bb75407c1d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">深度学习环境VMware&#43;ubuntu可以实现GPU吗？Windows安装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>