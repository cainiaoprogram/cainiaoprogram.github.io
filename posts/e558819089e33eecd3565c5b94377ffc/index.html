<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>XGBoost梯度提升方法实验 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="XGBoost梯度提升方法实验" />
<meta property="og:description" content="XGBoost梯度提升方法 实验环境为google colab
XGBoost参数 这里可以参考博客如下：
作者：大石头的笔记
链接：https://juejin.cn/post/6844904134336839693
来源：掘金
XGBoost的参数可以分为三种类型：通用参数、booster参数以及学习目标参数
General parameters：参数控制在提升（boosting）过程中使用哪种booster，常用的booster有树模型（tree）和线性模型（linear model）。Booster parameters：这取决于使用哪种booster。Learning Task parameters：控制学习的场景，例如在回归问题中会使用不同的参数控制排序。除了以上参数还可能有其它参数，在命令行中使用 import pandas as pd import numpy as np df = pd.read_csv(&#39;/content/drive/MyDrive/NOx/dataset/NOx_df.csv&#39;) df Unnamed: 0tmainsteamfuelo2primaryfanfanAcoalBcoalCcoalDcoalbrunoutNOx1NOx2000.0000000.0396180.1621460.6552390.1320230.0612730.6587950.4187020.4409410.0000620.10.4351720.405764110.0000010.0396140.1621720.6539350.1295840.0605100.6543080.4151850.4402870.0000620.10.4351720.405764220.0000020.0396100.1621990.6526310.1271460.0597480.6498220.4116670.4396330.0000620.10.4351720.405764330.0000030.0396060.1622260.6513280.1346340.0589850.6453360.4117900.4400690.0000620.10.4351720.405764440.0000050.0396020.1622520.6500240.1421220.0582220.6408500.4119130.4405050.0000620.10.4351720.405764.............................................8639958639950.9999950.3424070.3364400.5235090.1683940.0852920.2851600.3968350.4216430.3695581.00.5293680.5870318639968639960.9999970.3432970.3372150.5227510.1583690.0839100.2724710.3966280.4211260.3687941.00.5295740.5880708639978639970.9999980.3441880.3379890.5219940.1483440.0825270.2597810.3964200.4206090.3680301.00.5304180.5887858639988639980.9999990.3450790.3387630.5212360.1310150.0841450.2689460.3953240.4224630.3684121.00.5312620.5895008639998639991.0000000.3459690.3395380.5204780.1136850.0857630.2781110.3942290.4243170.3687941.00.5321050.590214 864000 rows × 14 columns
读取数据 X = df[[&#34;t&#34;,&#39;mainsteam&#39;,&#39;fuel&#39;,&#39;o2&#39;,&#39;primaryfan&#39;,&#39;fan&#39;,&#39;Acoal&#39;,&#39;Bcoal&#39;,&#39;Ccoal&#39;,&#39;Dcoal&#39;,&#39;brunout&#39;]].values y = df[[&#39;NOx1&#39;]].values X.shape, y.shape ((864000, 11), (864000, 1)) 切分训练集和测试集 from sklearn.model_selection import train_test_split # 划分数据集，70% 训练数据和 30% 测试数据 X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3) X_train.shape, X_test.shape, y_train.shape, y_test.shape ((604800, 11), (259200, 11), (604800, 1), (259200, 1)) XGBoost梯度提升回归方法 import xgboost as xgb model_r = xgb." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e558819089e33eecd3565c5b94377ffc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-28T09:43:26+08:00" />
<meta property="article:modified_time" content="2021-06-28T09:43:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">XGBoost梯度提升方法实验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="XGBoost_0"></a>XGBoost梯度提升方法</h2> 
<p>实验环境为google colab</p> 
<h3><a id="XGBoost_4"></a><strong>XGBoost参数</strong></h3> 
<p>这里可以参考博客如下：</p> 
<p>作者：大石头的笔记<br> 链接：https://juejin.cn/post/6844904134336839693<br> 来源：掘金</p> 
<p>XGBoost的参数可以分为三种类型：通用参数、booster参数以及学习目标参数</p> 
<ul><li>General parameters：参数控制在提升（boosting）过程中使用哪种booster，常用的booster有树模型（tree）和线性模型（linear model）。</li><li>Booster parameters：这取决于使用哪种booster。</li><li>Learning Task parameters：控制学习的场景，例如在回归问题中会使用不同的参数控制排序。</li><li>除了以上参数还可能有其它参数，在命令行中使用</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span><span class="token string">'/content/drive/MyDrive/NOx/dataset/NOx_df.csv'</span><span class="token punctuation">)</span>
df
</code></pre> 
<table border="1" class="dataframe"><thead><tr><th></th><th>Unnamed: 0</th><th>t</th><th>mainsteam</th><th>fuel</th><th>o2</th><th>primaryfan</th><th>fan</th><th>Acoal</th><th>Bcoal</th><th>Ccoal</th><th>Dcoal</th><th>brunout</th><th>NOx1</th><th>NOx2</th></tr></thead><tbody><tr><th>0</th><td>0</td><td>0.000000</td><td>0.039618</td><td>0.162146</td><td>0.655239</td><td>0.132023</td><td>0.061273</td><td>0.658795</td><td>0.418702</td><td>0.440941</td><td>0.000062</td><td>0.1</td><td>0.435172</td><td>0.405764</td></tr><tr><th>1</th><td>1</td><td>0.000001</td><td>0.039614</td><td>0.162172</td><td>0.653935</td><td>0.129584</td><td>0.060510</td><td>0.654308</td><td>0.415185</td><td>0.440287</td><td>0.000062</td><td>0.1</td><td>0.435172</td><td>0.405764</td></tr><tr><th>2</th><td>2</td><td>0.000002</td><td>0.039610</td><td>0.162199</td><td>0.652631</td><td>0.127146</td><td>0.059748</td><td>0.649822</td><td>0.411667</td><td>0.439633</td><td>0.000062</td><td>0.1</td><td>0.435172</td><td>0.405764</td></tr><tr><th>3</th><td>3</td><td>0.000003</td><td>0.039606</td><td>0.162226</td><td>0.651328</td><td>0.134634</td><td>0.058985</td><td>0.645336</td><td>0.411790</td><td>0.440069</td><td>0.000062</td><td>0.1</td><td>0.435172</td><td>0.405764</td></tr><tr><th>4</th><td>4</td><td>0.000005</td><td>0.039602</td><td>0.162252</td><td>0.650024</td><td>0.142122</td><td>0.058222</td><td>0.640850</td><td>0.411913</td><td>0.440505</td><td>0.000062</td><td>0.1</td><td>0.435172</td><td>0.405764</td></tr><tr><th>...</th><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td><td>...</td></tr><tr><th>863995</th><td>863995</td><td>0.999995</td><td>0.342407</td><td>0.336440</td><td>0.523509</td><td>0.168394</td><td>0.085292</td><td>0.285160</td><td>0.396835</td><td>0.421643</td><td>0.369558</td><td>1.0</td><td>0.529368</td><td>0.587031</td></tr><tr><th>863996</th><td>863996</td><td>0.999997</td><td>0.343297</td><td>0.337215</td><td>0.522751</td><td>0.158369</td><td>0.083910</td><td>0.272471</td><td>0.396628</td><td>0.421126</td><td>0.368794</td><td>1.0</td><td>0.529574</td><td>0.588070</td></tr><tr><th>863997</th><td>863997</td><td>0.999998</td><td>0.344188</td><td>0.337989</td><td>0.521994</td><td>0.148344</td><td>0.082527</td><td>0.259781</td><td>0.396420</td><td>0.420609</td><td>0.368030</td><td>1.0</td><td>0.530418</td><td>0.588785</td></tr><tr><th>863998</th><td>863998</td><td>0.999999</td><td>0.345079</td><td>0.338763</td><td>0.521236</td><td>0.131015</td><td>0.084145</td><td>0.268946</td><td>0.395324</td><td>0.422463</td><td>0.368412</td><td>1.0</td><td>0.531262</td><td>0.589500</td></tr><tr><th>863999</th><td>863999</td><td>1.000000</td><td>0.345969</td><td>0.339538</td><td>0.520478</td><td>0.113685</td><td>0.085763</td><td>0.278111</td><td>0.394229</td><td>0.424317</td><td>0.368794</td><td>1.0</td><td>0.532105</td><td>0.590214</td></tr></tbody></table> 
<p>864000 rows × 14 columns</p> 
<h3><a id="_243"></a>读取数据</h3> 
<pre><code class="prism language-python">X <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">"t"</span><span class="token punctuation">,</span><span class="token string">'mainsteam'</span><span class="token punctuation">,</span><span class="token string">'fuel'</span><span class="token punctuation">,</span><span class="token string">'o2'</span><span class="token punctuation">,</span><span class="token string">'primaryfan'</span><span class="token punctuation">,</span><span class="token string">'fan'</span><span class="token punctuation">,</span><span class="token string">'Acoal'</span><span class="token punctuation">,</span><span class="token string">'Bcoal'</span><span class="token punctuation">,</span><span class="token string">'Ccoal'</span><span class="token punctuation">,</span><span class="token string">'Dcoal'</span><span class="token punctuation">,</span><span class="token string">'brunout'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values
y <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'NOx1'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>values

X<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> y<span class="token punctuation">.</span>shape
</code></pre> 
<pre><code>((864000, 11), (864000, 1))
</code></pre> 
<h3><a id="_258"></a>切分训练集和测试集</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>model_selection <span class="token keyword">import</span> train_test_split

<span class="token comment"># 划分数据集，70% 训练数据和 30% 测试数据</span>
X_train<span class="token punctuation">,</span> X_test<span class="token punctuation">,</span> y_train<span class="token punctuation">,</span> y_test <span class="token operator">=</span> train_test_split<span class="token punctuation">(</span>X<span class="token punctuation">,</span> y<span class="token punctuation">,</span> test_size<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">)</span>

X_train<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> X_test<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> y_train<span class="token punctuation">.</span>shape<span class="token punctuation">,</span> y_test<span class="token punctuation">.</span>shape
</code></pre> 
<pre><code>((604800, 11), (259200, 11), (604800, 1), (259200, 1))
</code></pre> 
<h3><a id="XGBoost_275"></a>XGBoost梯度提升回归方法</h3> 
<pre><code class="prism language-python"><span class="token keyword">import</span> xgboost <span class="token keyword">as</span> xgb

model_r <span class="token operator">=</span> xgb<span class="token punctuation">.</span>XGBRegressor<span class="token punctuation">(</span><span class="token punctuation">)</span>
model_r
</code></pre> 
<pre><code>XGBRegressor(base_score=0.5, booster='gbtree', colsample_bylevel=1,
             colsample_bynode=1, colsample_bytree=1, gamma=0,
             importance_type='gain', learning_rate=0.1, max_delta_step=0,
             max_depth=3, min_child_weight=1, missing=None, n_estimators=100,
             n_jobs=1, nthread=None, objective='reg:linear', random_state=0,
             reg_alpha=0, reg_lambda=1, scale_pos_weight=1, seed=None,
             silent=None, subsample=1, verbosity=1)
</code></pre> 
<pre><code class="prism language-python">model_r<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X_train<span class="token punctuation">,</span> y_train<span class="token punctuation">)</span>  <span class="token comment"># 使用训练数据训练</span>
model_r<span class="token punctuation">.</span>score<span class="token punctuation">(</span>X_test<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span>  <span class="token comment"># 使用测试数据计算准确度</span>
</code></pre> 
<p>模型测试准确率为80.71%</p> 
<h3><a id="_302"></a>给出预测结果</h3> 
<pre><code class="prism language-python">y_ <span class="token operator">=</span> model_r<span class="token punctuation">.</span>predict<span class="token punctuation">(</span>X_test<span class="token punctuation">)</span>
y_<span class="token punctuation">,</span> y_test
</code></pre> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>pylab <span class="token keyword">import</span> rcParams
<span class="token operator">%</span>matplotlib inline

epochs <span class="token operator">=</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> y_test<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>epochs<span class="token punctuation">,</span> y_test<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/e1/80/hPm8ahBW_o.png" alt="png"></p> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>epochs<span class="token punctuation">,</span> y_<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/d6/yL9yMQbP_o.png" alt="png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bb0a1fec0912fef0a7bb26948791434f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机主机主板电池,主板电池没电,教您电脑主板电池没电怎么办</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a51df085db1b0668768a60c7595ecb6d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">行人重识别论文阅读2-视频中基于时空相关性和拓扑学习的行人重识别（CTL）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>