<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>plotly绘图原理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="plotly绘图原理" />
<meta property="og:description" content="作者：数据分析与统计学之美
来源：黄伟呢
r1.plotly库的相关介绍 1）相关说明 plotly是一个基于javascript的绘图库，plotly绘图种类丰富，效果美观；
易于保存与分享plotly的绘图结果，并且可以与Web无缝集成；
ploty默认的绘图结果，是一个HTML网页文件，通过浏览器可以直接查看；
2）plotly与matplotlib、seaborn的关系 需要注意的是，ployly绘图库与matplotlib绘图库、seaborn绘图库并没有什么关系。也就是说说plotly是一个单独的绘图库，有自己独特的绘图语法、绘图参数和绘图原理，因此我们需要单独学习它。
2.导入相关库 对于我们做数据分析的人员来说，一般用的都是离线绘图库。在线绘图库需要的话，可以自己百度研究。
import os import numpy as np import pandas as pd import plotly as py import plotly.graph_objs as go import plotly.expression as px from plotly import tools import warnings warnings.filterwarnings(&#34;ignore&#34;) 3.plotly绘图原理 1）ployly常用的两个绘图模块：graph_objs和expression graph_objs和expression是plotly里面两个很常用的绘图库，graph_objs相当于matplotlib，在数据组织上比较费劲，但是仍然比起matplotlib绘图更简单、更好看。这里说的费劲是相对于expression库来说的。expression库相当于seaborn的地位，在数据组织上较为容易，绘图比起seaborn来说，也更加容易。这里你心里有个印象即可，知道这两个绘图库很牛，就行了。
对于graph_objs绘图库，我们常命名为go(import plotly.graph_objs as go)；对于expression绘图库，我们常命名为px(import plotly.expression as px)。
2）graph_objs(&#34;go&#34;)库的绘图原理 ① 简单的案例说明 df = pd.read_excel(&#34;plot.xlsx&#34;) # 步骤一 trace0 = go.Scatter(x=df[&#34;年份&#34;],y=df[&#34;城镇居民&#34;],name=&#34;城镇居民&#34;) trace1 = go.Scatter(x=df[&#34;年份&#34;],y=df[&#34;农村居民&#34;],name=&#34;农村居民&#34;) # 步骤二 data = [trace0,trace1] # 步骤三 fig = go." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1386d349e843927f4d60674f42e4da3f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-13T17:00:00+08:00" />
<meta property="article:modified_time" content="2020-06-13T17:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">plotly绘图原理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/8d/dc/lPICfe5r_o.png"><br></p> 
 <p style="text-align: left"><strong>   </strong><strong>  作者：数据分析与统计学之美</strong></p> 
 <p style="text-align: left"><strong>     来源：黄伟呢</strong></p> 
 <h3>r1.plotly库的相关介绍</h3> 
 <h6>1）相关说明</h6> 
 <ul><li><p>plotly是一个基于javascript的绘图库，plotly绘图种类丰富，效果美观；</p></li><li><p>易于保存与分享plotly的绘图结果，并且可以与Web无缝集成；</p></li><li><p>ploty默认的绘图结果，是一个HTML网页文件，通过浏览器可以直接查看；</p></li></ul> 
 <img src="https://images2.imgbox.com/ad/7a/U3yQcHQK_o.png"> 
 <h6>2）plotly与matplotlib、seaborn的关系</h6> 
 <p>需要注意的是，ployly绘图库与matplotlib绘图库、seaborn绘图库并没有什么关系。也就是说说plotly是一个单独的绘图库，有自己独特的绘图语法、绘图参数和绘图原理，因此我们需要单独学习它。</p> 
 <h3>2.导入相关库</h3> 
 <p>对于我们做数据分析的人员来说，一般用的都是离线绘图库。在线绘图库需要的话，可以自己百度研究。</p> 
 <pre class="has"><code class="language-go">import os
import numpy as np
import pandas as pd

import plotly as py
import plotly.graph_objs as go
import plotly.expression as px
from plotly import tools

import warnings
warnings.filterwarnings("ignore")
</code></pre> 
 <p>  </p> 
 <h3>3.plotly绘图原理</h3> 
 <h6>1）ployly常用的两个绘图模块：graph_objs和expression</h6> 
 <p><code>graph_objs</code>和<code>expression</code>是plotly里面两个很常用的绘图库，graph_objs相当于matplotlib，在数据组织上比较费劲，但是仍然比起matplotlib绘图更简单、更好看。这里说的费劲是相对于expression库来说的。expression库相当于seaborn的地位，在数据组织上较为容易，绘图比起seaborn来说，也更加容易。这里你心里有个印象即可，知道这两个绘图库很牛，就行了。</p> 
 <p>对于graph_objs绘图库，我们常命名为<code>go</code>(import plotly.graph_objs as go)；对于expression绘图库，我们常命名为<code>px</code>(import plotly.expression as px)。</p> 
 <h6>2）graph_objs("go")库的绘图原理</h6> 
 <h6>① 简单的案例说明</h6> 
 <pre class="has"><code class="language-go">df = pd.read_excel("plot.xlsx")
# 步骤一
trace0 = go.Scatter(x=df["年份"],y=df["城镇居民"],name="城镇居民")
trace1 = go.Scatter(x=df["年份"],y=df["农村居民"],name="农村居民")
# 步骤二
data = [trace0,trace1]
# 步骤三
fig = go.Figure(data)
# 步骤四
fig.update_layout(
    title="城乡居民家庭人均收入",
    xaxis_title="年份",
    yaxis_title="人均收入（元）"
)
# 步骤五
fig.show()
</code></pre> 
 <p>结果如下：<img src="https://images2.imgbox.com/82/dd/IEUkEtLs_o.png"></p> 
 <h6>② 原理说明</h6> 
 <ul><li><p>1、绘制图形轨迹，在ployly里面叫做trace，每一个轨迹是一个<code>trace</code>。</p></li><li><p>2、将轨迹包裹成一个列表，形成一个<code>轨迹列表</code>。一个轨迹放在一个列表中，多个轨迹也是放在一个列表中。</p></li><li><p>3、创建画布的同时，并将上述的<code>轨迹列表</code>，传入到Figure()中。</p></li><li><p>4、使用Layout添加其他的绘图参数，完善图形。</p></li><li><p>5、展示图形。</p></li></ul> 
 <h6>3）expression("px")库的绘图原理</h6> 
 <h6>① 简单的案例说明</h6> 
 <pre class="has"><code class="language-go">iris = pd.read_excel("iris.xlsx",sheet_name="Sheet2")

fig = px.scatter(iris,x="花萼长度",y="花萼宽度",color="属种")
fig.show()
</code></pre> 
 <p>结果如下：<img src="https://images2.imgbox.com/22/35/ACtuyCME_o.png"></p> 
 <h6>② 原理说明</h6> 
 <ul><li><p>1、直接使用px调用某个绘图方法时，会自动创建画布，并画出图形。</p></li><li><p>2、展示图形。  </p></li></ul> 
 <h3>4.保存图形的两种方式</h3> 
 <h6>1）直接下载下来：保存成png静态图片</h6> 
 <img src="https://images2.imgbox.com/5f/23/FseyTWqP_o.png"> 
 <h6>2）使用py.offline.plot(fig,filename="XXX.html")代码保存成html网页动态图片。</h6> 
 <pre class="has"><code class="language-go">iris = pd.read_excel("iris.xlsx",sheet_name="Sheet2")

fig = px.scatter(iris,x="花萼长度",y="花萼宽度",color="属种")
py.offline.plot(fig,filename="iris1.html")
</code></pre> 
 <p>结果如下：该文件是一个html文件，这里上传不了，自己下去尝试一下就知道了。</p> 
 <h6>3）总结说明</h6> 
 <p>  使用“照相机”那个下载按钮，可以直接将图片下载保存在本地，但是这个图片是一个静态图片，没有交互性。但是使用py.offline.plot()方法，可以将图片保存成一个html的网页格式，其他人可以在电脑上直接打开这个html网页，并且保留了图片的原始样式，具有交互性。  </p> 
 <h3>5.绘制双y轴图</h3> 
 <h6>1）数据集如下</h6> 
 <img src="https://images2.imgbox.com/55/a4/0ZSlO1VJ_o.png"> 
 <h6>2）绘制不同地区的“任务完成量”和“任务完成率”情况</h6> 
 <pre class="has"><code class="language-go">df = pd.read_excel("double_y.xlsx")

x = df["地区"]
y1 = df["完成量"]
y2 = df["完成率"]

trace0 = go.Bar(x=x,y=y1,
                marker=dict(color=["red","blue","green","darkgrey","darkblue","orange"]),
                opacity=0.5,
               name="不同地区的任务完成量")

trace1 = go.Scatter(x=x,y=y2,
                    mode="lines",
                    name="不同地区的任务完成率",
                    # 【步骤一】：使用这个参数yaxis="y2"，就是绘制双y轴图
                    yaxis="y2")

data = [trace0,trace1]

layout = go.Layout(title="不同地区的任务完成量和任务完成率情况",
                   xaxis=dict(title="地区"),
                   yaxis=dict(title="不同地区的任务完成量"),
                   # 【步骤二】：给第二个y轴，添加标题，指定第二个y轴，在右侧。
                   yaxis2=dict(title="不同地区的任务完成率",overlaying="y",side="right"),
                   legend=dict(x=0.78,y=0.98,font=dict(size=12,color="black")))

fig = go.Figure(data=data,layout=layout)
fig.show()
</code></pre> 
 <p>结果如下：<img src="https://images2.imgbox.com/5b/13/aI3vQhOq_o.png"></p> 
 <h3>6.绘制多子图</h3> 
 <h6>1）相关库和方法介绍</h6> 
 <ul><li><p>1、绘制多个子图，需要先导入tools库。from plotly import tools</p></li><li><p>2、tools.make_subplots(rows= ,cols=)用于指定绘图布局，rows和cols表示将画布布局成几行几列。</p></li><li><p>3、fig.append_trace()将每个图形轨迹trace，绘制在不同的位置上。</p></li></ul> 
 <h6>2）分别绘制不同地区的“任务完成量”和“任务完成率”情况</h6> 
 <pre class="has"><code class="language-go"># 步骤一：导入相关库
from plotly import tools
# 步骤二：指定绘图布局
fig = tools.make_subplots(rows=2,cols=1)
# 步骤三：绘制图形轨迹
trace0 = go.Bar(x=x,y=y1,
                marker=dict(color=["red","blue","green","darkgrey","darkblue","orange"]),
                opacity=0.5,
                name="不同地区的任务完成量")       
trace1 = go.Scatter(x=x,y=y2,
                    mode="lines",
                    name="不同地区的任务完成率",
                    line=dict(width=2,color="red"))
 # 步骤四：将第一个轨迹，添加到第1行的第1个位置
 #        将第二个轨迹，添加到第2行的第1个位置                  
fig.append_trace(trace0,1,1)
fig.append_trace(trace1,2,1)
# 步骤四：根据自己的需求，给图形添加标题。height、width参数用于指定图形的宽和高
fig.update_layout(title="不同地区的任务量与完成量",height=800,width=800)
# 步骤五：展示图形
fig.show()
</code></pre> 
 <p>结果如下：<img src="https://images2.imgbox.com/87/75/f3ILLt9J_o.png">     <br>  <img src="https://images2.imgbox.com/a4/a4/JylWb5t2_o.png">   </p> 
 <p>关注微信公众号『<strong>数据分析与统计学之美</strong>』，后台回复“<strong>高清图谱</strong>”自动获取8张高清知识图谱。<img src="https://images2.imgbox.com/78/e0/TK4qY5DU_o.png"></p> 
 <h5></h5><p style="text-align: center">◆ ◆ ◆  ◆ ◆</p><p style="text-align: center"><img src="https://images2.imgbox.com/85/4d/xdLjoaeL_o.png"></p> 
 <p style="text-align: center"><strong>长按二维码关注我们</strong></p> 
 <hr> 
 <p><strong>数据森麟公众号的交流群已经建立，许多小伙伴已经加入其中，感谢大家的支持。大家可以在群里<strong><strong>交流关于数据分析&amp;数据挖掘的相关内容，</strong></strong></strong><strong>还没有加入的小伙伴可以扫描下方管理员二维码，进群前一定要关注公众号奥，关注后让管理员帮忙拉进群，期待大家的加入。</strong><br></p> 
 <p><strong>管理员二维码：</strong><br></p> 
 <p style="text-align: center"><img src="https://images2.imgbox.com/bf/9b/8Gj8hana_o.png"></p> 
 <p style="text-align: center">猜你喜欢</p> 
 <p><a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe237f7cc954f66ab090b939416174ec9bda7d511503f6ba6adb0bc9d1c29f9a09ba9569b8b4&amp;idx=1&amp;mid=2247484622&amp;scene=21&amp;sn=0f592c02e2798b3958637ac523ff8b9f#wechat_redirect" rel="nofollow">●</a> <a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe237673c954ff65a0fc6f68a4fef1bbfa04a88be5f15d93e9c57cf789904285334bb3c6ba57&amp;idx=1&amp;mid=2247486913&amp;scene=21&amp;sn=b58165309d98bdb0e7b50281eb5696ff#wechat_redirect" rel="nofollow">笑死人不偿命的知乎沙雕问题排行榜</a></p> 
 <p><a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe237f7cc954f66ab090b939416174ec9bda7d511503f6ba6adb0bc9d1c29f9a09ba9569b8b4&amp;idx=1&amp;mid=2247484622&amp;scene=21&amp;sn=0f592c02e2798b3958637ac523ff8b9f#wechat_redirect" rel="nofollow">●</a> <a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe23756fc954fc7956ab4e4595b658aaf0348585cb1d52832cc38121768340ba8dd8eab75b3e&amp;idx=1&amp;mid=2247487197&amp;scene=21&amp;sn=642f1c99c9252460c30abf7fe55d6e1e#wechat_redirect" rel="nofollow">用Python扒出B站那些“惊为天人”的阿婆主！</a></p> 
 <p><a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe237de1c954f4f7a7c99432f383d42af1bded9a802e5ce5280c21d2e9ab7b2465a14e409e3e&amp;idx=1&amp;mid=2247485011&amp;scene=21&amp;sn=636f6e3b512dcd0e25d22941f1ef9927#wechat_redirect" rel="nofollow">●</a> <a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe236bb1c954e2a7dd10c427b8d1ecaea46b21afb9398a0fcb54abe1fa9b8c3c4594feb0194d&amp;idx=1&amp;mid=2247487491&amp;scene=21&amp;sn=c071f4da26af73529b3022c03eb42938#wechat_redirect" rel="nofollow">全球股市跳水大战，谁最坑爹！</a></p> 
 <p><a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe237f7cc954f66ab090b939416174ec9bda7d511503f6ba6adb0bc9d1c29f9a09ba9569b8b4&amp;idx=1&amp;mid=2247484622&amp;scene=21&amp;sn=0f592c02e2798b3958637ac523ff8b9f#wechat_redirect" rel="nofollow">●</a> <a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe236b7ec954e268bfafcdae379a077411a355bc5b4994167efb3173c16a9ac9b5666f75b2ae&amp;idx=1&amp;mid=2247487692&amp;scene=21&amp;sn=7936da18fc961b8e7b3b1f775d42a427#wechat_redirect" rel="nofollow">华农兄弟、徐大Sao&amp;李子柒？谁才是B站美食区的最强王者？</a></p> 
 <p><a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe237f7cc954f66ab090b939416174ec9bda7d511503f6ba6adb0bc9d1c29f9a09ba9569b8b4&amp;idx=1&amp;mid=2247484622&amp;scene=21&amp;sn=0f592c02e2798b3958637ac523ff8b9f#wechat_redirect" rel="nofollow">●</a> <a href="http://mp.weixin.qq.com/s?__biz=MzU5MjI3NzIxMw%3D%3D&amp;chksm=fe237205c954fb13c89f2e65ece33cce0ce2bf4423a08c4dd7799c7dcb335daf719be86ebffd&amp;idx=1&amp;mid=2247485879&amp;scene=21&amp;sn=c32c56548beac8368162ef0fb0b11cf1#wechat_redirect" rel="nofollow">你相信逛B站也能学编</a>程吗</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dba30823c72bbd53aec439b449f9ad60/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Gradle IDEA war not found for the web module.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/757a51ec79b96055ca96447632a4449d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">顺序消息分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>