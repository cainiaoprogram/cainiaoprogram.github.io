<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hadoop 配置 Kerberos 认证 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hadoop 配置 Kerberos 认证" />
<meta property="og:description" content="1、安装 Kerberos 服务器和客户端 1.1 规划 服务端：
bigdata3 客户端（Hadoop集群）：
bigdata0
bigdata1
bigdata2
192.168.50.7 bigdata0.example.com bigdata0 192.168.50.8 bigdata1.example.com bigdata1 192.168.50.9 bigdata2.example.com bigdata2 192.168.50.10 bigdata3.example.com bigdata3 1.2 安装 Kerberos 服务器 yum install -y krb5-libs krb5-server krb5-workstation 配置：
/etc/krb5.conf
[logging] default = FILE:/var/log/krb5libs.log kdc = FILE:/var/log/krb5kdc.log admin_server = FILE:/var/log/kadmind.log [libdefaults] default_realm = EXAMPLE.COM dns_lookup_realm = false dns_lookup_kdc = false ticket_lifetime = 24h renew_lifetime = 7d forwardable = true [realms] EXAMPLE.COM = { kdc = bigdata3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4df31ffbc75b863077603d2a62dc8e09/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-28T22:25:42+08:00" />
<meta property="article:modified_time" content="2023-10-28T22:25:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hadoop 配置 Kerberos 认证</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_Kerberos__0"></a>1、安装 Kerberos 服务器和客户端</h3> 
<h4><a id="11__2"></a>1.1 规划</h4> 
<ul><li> <p>服务端：</p> 
  <ul><li>bigdata3</li></ul> </li><li> <p>客户端（Hadoop集群）：</p> 
  <ul><li> <p>bigdata0</p> </li><li> <p>bigdata1</p> </li><li> <p>bigdata2</p> </li></ul> </li></ul> 
<pre><code class="prism language-shell"><span class="token number">192.168</span>.50.7 bigdata0.example.com bigdata0
<span class="token number">192.168</span>.50.8 bigdata1.example.com bigdata1
<span class="token number">192.168</span>.50.9 bigdata2.example.com bigdata2
<span class="token number">192.168</span>.50.10 bigdata3.example.com bigdata3
</code></pre> 
<h4><a id="12__Kerberos__25"></a>1.2 安装 Kerberos 服务器</h4> 
<pre><code class="prism language-Shell">yum install -y krb5-libs krb5-server krb5-workstation
</code></pre> 
<p>配置：</p> 
<p>/etc/krb5.conf</p> 
<pre><code class="prism language-Shell">[logging]
 default = FILE:/var/log/krb5libs.log
 kdc = FILE:/var/log/krb5kdc.log
 admin_server = FILE:/var/log/kadmind.log

[libdefaults]
 default_realm = EXAMPLE.COM
 dns_lookup_realm = false
 dns_lookup_kdc = false
 ticket_lifetime = 24h
 renew_lifetime = 7d
 forwardable = true

[realms]
 EXAMPLE.COM = {
  kdc = bigdata3.example.com
  admin_server = bigdata3.example.com
 }

[domain_realm]
 .example.com = EXAMPLE.COM
 example.com = EXAMPLE.COM
</code></pre> 
<p>/var/kerberos/krb5kdc/kdc.conf</p> 
<pre><code class="prism language-shell"> kdc_ports <span class="token operator">=</span> <span class="token number">88</span>
 kdc_tcp_ports <span class="token operator">=</span> <span class="token number">88</span>
 
<span class="token punctuation">[</span>realms<span class="token punctuation">]</span>
 EXAMPLE.COM <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">#master_key_type = aes256-cts</span>
  acl_file <span class="token operator">=</span> /var/kerberos/krb5kdc/kadm5.acl
  dict_file <span class="token operator">=</span> /usr/share/dict/words
  admin_keytab <span class="token operator">=</span> /var/kerberos/krb5kdc/kadm5.keytab
  supported_enctypes <span class="token operator">=</span> aes256-cts:normal aes128-cts:normal des3-hmac-sha1:normal   arcfour-hmac:normal des-hmac-sha1:normal des-cbc-md5:normal des-cbc-crc:normal
 <span class="token punctuation">}</span>
</code></pre> 
<p>/var/kerberos/krb5kdc/kadm5.acl</p> 
<pre><code class="prism language-shell">*/admin@EXAMPLE.COM       *
</code></pre> 
<p>初始化Kerberos的数据库</p> 
<pre><code class="prism language-Plain">kdb5_util create  -s -r EXAMPLE.COM
</code></pre> 
<p>其中 EXAMPLE.COM 是对应的域，如果你的不同请修改<br> 然后命令要求设置数据库master的密码，要求输入两次，输入 123456即可<br> 这样得到 数据库master账户： K/M@EXAMPLE.COM , 密码： 123456</p> 
<p>创建EXAMPLE.COM 域内的管理员<br> 执行：kadmin.local 进入 kerberos 的 admin 命令行界面</p> 
<pre><code class="prism language-Shell"># 输入如下内容，添加一个用户
addprinc root/admin@EXAMPLE.COM
# 要求输入密码，输入root作为密码（可自行设置）
 
# 上面的账户就作为EXAMPLE.COM的管理员账户存在 （满足 */admin@EXAMPLE.COM 的规则 拥有全部权限）
# 再创建一个 测试的管理员用户
addprinc krbtest/admin@EXAMPLE.COM # 同样满足 */admin@EXAMPLE.COM 密码设置为krbtest
 
# 查看当前拥有的所有用户
listprincs
</code></pre> 
<p>重启Kerberos server的组件并设置开机自启</p> 
<pre><code class="prism language-Shell">service krb5kdc restart
service kadmin restart
chkconfig krb5kdc on
chkconfig kadmin on
</code></pre> 
<h4><a id="13__Kerberos__122"></a>1.3 安装 Kerberos 客户端</h4> 
<pre><code class="prism language-shell">yum <span class="token parameter variable">-y</span> <span class="token function">install</span> krb5-libs krb5-workstation
</code></pre> 
<p>从server机器将 /etc/krb5.conf 复制到各个客户端同样的位置</p> 
<p>测试登录admin:</p> 
<ul><li> <p>执行 kinit krbtest/admin@EXAMPLE.COM 输入密码，正确的结果就是没有任何反应</p> </li><li> <p>然后输入 klist</p> </li></ul> 
<pre><code class="prism language-Shell">Ticket cache: FILE:/tmp/krb5cc_0
Default principal: krbtest/admin@EXAMPLE.COM
 
Valid starting     Expires            Service principal
09/25/19 11:41:52  09/26/19 11:41:52  krbtgt/EXAMPLE.COM@EXAMPLE.COM
        renew until 09/25/19 11:41:52
</code></pre> 
<ul><li>此时，客户端配置完成，使用 kinit 切换对应的账户</li></ul> 
<h3><a id="2Kerberos_148"></a>2、配置相关的Kerberos账户</h3> 
<ol><li> <p>在每个节点执行 mkdir /etc/security/keytabs</p> </li><li> <p>配置运行的服务对应的Kerberos账户</p> </li></ol> 
<p>配置 bigdata0：</p> 
<pre><code class="prism language-Shell"># 执行 kadmin 输入密码, 进入Kerberos的admin后台
kadmin

# 创建namenode、secondarynamenode以及用于用于https服务的账户
addprinc -randkey nn/bigdata0.example.com@EXAMPLE.COM    
addprinc -randkey sn/bigdata0.example.com@EXAMPLE.COM
addprinc -randkey HTTP/bigdata0.example.com@EXAMPLE.COM

# 创建 yarn 的 resourcemanager、job historyserver账户
addprinc -randkey rm/bigdata0.example.com@EXAMPLE.COM
addprinc -randkey jhs/bigdata0.example.com@EXAMPLE.COM
 
# 防止启动或者操作的过程中需要输入密码，创建免密登录的keytab文件
# 创建账户的keytab
ktadd -k /etc/security/keytabs/nn.service.keytab nn/bigdata0.example.com@EXAMPLE.COM
ktadd -k /etc/security/keytabs/sn.service.keytab sn/bigdata0.example.com@EXAMPLE.COM
ktadd -k /etc/security/keytabs/spnego.service.keytab HTTP/bigdata0.example.com@EXAMPLE.COM

ktadd -k /etc/security/keytabs/rm.service.keytab rm/bigdata0.example.com@EXAMPLE.COM
ktadd -k /etc/security/keytabs/jhs.service.keytab jhs/bigdata0.example.com@EXAMPLE.COM
</code></pre> 
<p>得到五个 keytab 文件。</p> 
<ul><li> <p>例如：</p> <pre><code class="prism language-Shell">[root@bigdata0 bigdata]#  mkdir /etc/security/keytabs
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]# kadmin
Authenticating as principal krbtest/admin@EXAMPLE.COM with password.
Password for krbtest/admin@EXAMPLE.COM:
kadmin:  addprinc -randkey nn/bigdata0.example.com@EXAMPLE.COM
WARNING: no policy specified for nn/bigdata0.example.com@EXAMPLE.COM; defaulting to no policy
Principal "nn/bigdata0.example.com@EXAMPLE.COM" created.
kadmin:  addprinc -randkey sn/bigdata0.example.com@EXAMPLE.COM
WARNING: no policy specified for sn/bigdata0.example.com@EXAMPLE.COM; defaulting to no policy
Principal "sn/bigdata0.example.com@EXAMPLE.COM" created.
kadmin:  addprinc -randkey HTTP/bigdata0.example.com@EXAMPLE.COM
WARNING: no policy specified for HTTP/bigdata0.example.com@EXAMPLE.COM; defaulting to no policy
Principal "HTTP/bigdata0.example.com@EXAMPLE.COM" created.
kadmin:  ktadd -k /etc/security/keytabs/nn.service.keytab nn/bigdata0.example.com@EXAMPLE.COM
Entry for principal nn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/etc/security/keytabs/nn.service.keytab.
Entry for principal nn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/etc/security/keytabs/nn.service.keytab.
Entry for principal nn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des3-cbc-sha1 added to keytab WRFILE:/etc/security/keytabs/nn.service.keytab.
Entry for principal nn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type arcfour-hmac added to keytab WRFILE:/etc/security/keytabs/nn.service.keytab.
Entry for principal nn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des-hmac-sha1 added to keytab WRFILE:/etc/security/keytabs/nn.service.keytab.
Entry for principal nn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des-cbc-md5 added to keytab WRFILE:/etc/security/keytabs/nn.service.keytab.
kadmin:  ktadd -k /etc/security/keytabs/sn.service.keytab sn/bigdata0.example.com@EXAMPLE.COM
Entry for principal sn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/etc/security/keytabs/sn.service.keytab.
Entry for principal sn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/etc/security/keytabs/sn.service.keytab.
Entry for principal sn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des3-cbc-sha1 added to keytab WRFILE:/etc/security/keytabs/sn.service.keytab.
Entry for principal sn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type arcfour-hmac added to keytab WRFILE:/etc/security/keytabs/sn.service.keytab.
Entry for principal sn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des-hmac-sha1 added to keytab WRFILE:/etc/security/keytabs/sn.service.keytab.
Entry for principal sn/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des-cbc-md5 added to keytab WRFILE:/etc/security/keytabs/sn.service.keytab.
kadmin:  ktadd -k /etc/security/keytabs/spnego.service.keytab HTTP/bigdata0.example.com@EXAMPLE.COM
Entry for principal HTTP/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type aes256-cts-hmac-sha1-96 added to keytab WRFILE:/etc/security/keytabs/spnego.service.keytab.
Entry for principal HTTP/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type aes128-cts-hmac-sha1-96 added to keytab WRFILE:/etc/security/keytabs/spnego.service.keytab.
Entry for principal HTTP/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des3-cbc-sha1 added to keytab WRFILE:/etc/security/keytabs/spnego.service.keytab.
Entry for principal HTTP/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type arcfour-hmac added to keytab WRFILE:/etc/security/keytabs/spnego.service.keytab.
Entry for principal HTTP/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des-hmac-sha1 added to keytab WRFILE:/etc/security/keytabs/spnego.service.keytab.
Entry for principal HTTP/bigdata0.example.com@EXAMPLE.COM with kvno 2, encryption type des-cbc-md5 added to keytab WRFILE:/etc/security/keytabs/spnego.service.keytab.
kadmin:  exit
[root@bigdata0 bigdata]# ll /etc/security/keytabs/
总用量 12
-rw-------. 1 root root 454 10月  5 16:31 nn.service.keytab
-rw-------. 1 root root 454 10月  5 16:31 sn.service.keytab
-rw-------. 1 root root 466 10月  5 16:32 spnego.service.keytab
[root@bigdata0 bigdata]#
</code></pre> </li></ul> 
<p>同样的方式配置 bigdata0、bigdata1上面运行的datanode和http服务对应的Kerberos账户</p> 
<pre><code class="prism language-Shell"># 执行 kadmin 输入密码, 进入Kerberos的admin后台
kadmin

# 创建账户
addprinc -randkey dn/bigdata1.example.com@EXAMPLE.COM    
addprinc -randkey HTTP/bigdata1.example.com@EXAMPLE.COM

addprinc -randkey nm/bigdata1.example.com@EXAMPLE.COM
 
# 防止启动或者操作的过程中需要输入密码，创建免密登录的keytab文件
# 创建nn、sn、HTTP账户的keytab
ktadd -k /etc/security/keytabs/dn.service.keytab dn/bigdata1.example.com@EXAMPLE.COM
ktadd -k /etc/security/keytabs/spnego.service.keytab HTTP/bigdata1.example.com@EXAMPLE.COM

ktadd -k /etc/security/keytabs/nm.service.keytab nm/bigdata1.example.com@EXAMPLE.COM
</code></pre> 
<pre><code class="prism language-Shell"># 执行 kadmin 输入密码, 进入Kerberos的admin后台
kadmin

# 创建账户
addprinc -randkey dn/bigdata2.example.com@EXAMPLE.COM   
addprinc -randkey HTTP/bigdata2.example.com@EXAMPLE.COM

addprinc -randkey nm/bigdata2.example.com@EXAMPLE.COM
 
# 防止启动或者操作的过程中需要输入密码，创建免密登录的keytab文件
# 创建nn、sn、HTTP账户的keytab
ktadd -k /etc/security/keytabs/dn.service.keytab dn/bigdata2.example.com@EXAMPLE.COM
ktadd -k /etc/security/keytabs/spnego.service.keytab HTTP/bigdata2.example.com@EXAMPLE.COM

ktadd -k /etc/security/keytabs/nm.service.keytab nm/bigdata2.example.com@EXAMPLE.COM
</code></pre> 
<h3><a id="3Hadoop__269"></a>3、Hadoop 配置文件</h3> 
<h5><a id="31__270"></a>3.1 权限设置</h5> 
<pre><code class="prism language-Shell"># 将如下内容保存到.sh内，然后执行 sh xxx.sh 以root执行
# 其中内部的配置根据自己的目录设置修改
HADOOP_HOME=/bigdata/hadoop-3.3.2
DFS_NAMENODE_NAME_DIR=/data/nn
DFS_DATANODE_DATA_DIR=/data/dn
NODEMANAGER_LOCAL_DIR=/data/nm-local
NODEMANAGER_LOG_DIR=/data/nm-log
MR_HISTORY=/data/mr-history
if [ ! -n "$HADOOP_HOME" ];then
        echo "请填入hadoop home 路径"
        exit
fi
chgrp -R hadoop $HADOOP_HOME
chown -R hdfs:hadoop $HADOOP_HOME
chown root:hadoop $HADOOP_HOME
chown hdfs:hadoop $HADOOP_HOME/sbin/distribute-exclude.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/hadoop-daemon.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/hadoop-daemons.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/hdfs-config.cmd
chown hdfs:hadoop $HADOOP_HOME/sbin/hdfs-config.sh
chown mapred:hadoop $HADOOP_HOME/sbin/mr-jobhistory-daemon.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/refresh-namenodes.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/slaves.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/start-all.cmd
chown hdfs:hadoop $HADOOP_HOME/sbin/start-all.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/start-balancer.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/start-dfs.cmd
chown hdfs:hadoop $HADOOP_HOME/sbin/start-dfs.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/start-secure-dns.sh
chown yarn:hadoop $HADOOP_HOME/sbin/start-yarn.cmd
chown yarn:hadoop $HADOOP_HOME/sbin/start-yarn.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/stop-all.cmd
chown hdfs:hadoop $HADOOP_HOME/sbin/stop-all.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/stop-balancer.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/stop-dfs.cmd
chown hdfs:hadoop $HADOOP_HOME/sbin/stop-dfs.sh
chown hdfs:hadoop $HADOOP_HOME/sbin/stop-secure-dns.sh
chown yarn:hadoop $HADOOP_HOME/sbin/stop-yarn.cmd
chown yarn:hadoop $HADOOP_HOME/sbin/stop-yarn.sh
chown yarn:hadoop $HADOOP_HOME/sbin/yarn-daemon.sh
chown yarn:hadoop $HADOOP_HOME/sbin/yarn-daemons.sh
chown mapred:hadoop $HADOOP_HOME/bin/mapred*
chown yarn:hadoop $HADOOP_HOME/bin/yarn*
chown hdfs:hadoop $HADOOP_HOME/bin/hdfs*
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/capacity-scheduler.xml
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/configuration.xsl
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/core-site.xml
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/hadoop-*
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/hdfs-*
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/httpfs-*
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/kms-*
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/log4j.properties
chown mapred:hadoop $HADOOP_HOME/etc/hadoop/mapred-*
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/slaves
chown hdfs:hadoop $HADOOP_HOME/etc/hadoop/ssl-*
chown yarn:hadoop $HADOOP_HOME/etc/hadoop/yarn-*
chmod 755 -R $HADOOP_HOME/etc/hadoop/*
chown root:hadoop $HADOOP_HOME/etc
chown root:hadoop $HADOOP_HOME/etc/hadoop
chown root:hadoop $HADOOP_HOME/etc/hadoop/container-executor.cfg
chown root:hadoop $HADOOP_HOME/bin/container-executor
chown root:hadoop $HADOOP_HOME/bin/test-container-executor
chmod 6050 $HADOOP_HOME/bin/container-executor
chown 6050 $HADOOP_HOME/bin/test-container-executor
mkdir $HADOOP_HOME/logs
mkdir $HADOOP_HOME/logs/hdfs
mkdir $HADOOP_HOME/logs/yarn
chown root:hadoop $HADOOP_HOME/logs
chmod 775 $HADOOP_HOME/logs
chown hdfs:hadoop $HADOOP_HOME/logs/hdfs
chmod 755 -R $HADOOP_HOME/logs/hdfs
chown yarn:hadoop $HADOOP_HOME/logs/yarn
chmod 755 -R $HADOOP_HOME/logs/yarn
chown -R hdfs:hadoop $DFS_DATANODE_DATA_DIR
chown -R hdfs:hadoop $DFS_NAMENODE_NAME_DIR
chmod 700 $DFS_DATANODE_DATA_DIR
chmod 700 $DFS_NAMENODE_NAME_DIR
chown -R yarn:hadoop $NODEMANAGER_LOCAL_DIR
chown -R yarn:hadoop $NODEMANAGER_LOG_DIR
chmod 770 $NODEMANAGER_LOCAL_DIR
chmod 770 $NODEMANAGER_LOG_DIR
chown -R mapred:hadoop $MR_HISTORY
chmod 770 $MR_HISTORY
</code></pre> 
<h5><a id="32_hadoop__360"></a>3.2 hadoop 配置：</h5> 
<p>环境变量相关配置非必要，如果 /etc/profile 中配置了，可以在 hadoop 配置文件中省略</p> 
<h6><a id="hadoopenvsh_364"></a>hadoop-env.sh</h6> 
<pre><code class="prism language-Shell"># 非必须，如果 /etc/profile 中配置了，这里可以省略
export JAVA_HOME=/usr/local/jdk1.8.0_221
export HADOOP_HOME=/bigdata/hadoop-3.3.0
export HADOOP_CONF_DIR=$HADOOP_HOME/etc/hadoop
export HADOOP_LOG_DIR=$HADOOP_HOME/logs/hdfs
export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib/native
export HADOOP_OPTS="-Djava.library.path=${HADOOP_HOME}/lib/native"
</code></pre> 
<h6><a id="yarnenvsh_376"></a>yarn-env.sh</h6> 
<pre><code class="prism language-Shell">export JAVA_HOME=/usr/local/jdk1.8.0_221
export HADOOP_HOME=/bigdata/hadoop-3.3.0
export YARN_CONF_DIR=$HADOOP_HOME/etc/hadoop
export YARN_LOG_DIR=$HADOOP_HOME/logs/yarn
</code></pre> 
<h6><a id="mapredenvsh_385"></a>mapred-env.sh</h6> 
<pre><code class="prism language-Shell">export JAVA_HOME=/usr/local/jdk1.8.0_221
</code></pre> 
<h6><a id="coresitexml_391"></a>core-site.xml</h6> 
<pre><code class="prism language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;fs.defaultFS&lt;/name&gt;
        &lt;value&gt;hdfs://bigdata0.example.com:8020&lt;/value&gt;
        &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;io.file.buffer.size&lt;/name&gt;
        &lt;value&gt;131072&lt;/value&gt;
        &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;

    &lt;!-- 以下是 Kerberos 相关配置 --&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.security.authorization&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
        &lt;description&gt;是否开启hadoop的安全认证&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;hadoop.security.authentication&lt;/name&gt;
        &lt;value&gt;kerberos&lt;/value&gt;
        &lt;description&gt;使用kerberos作为hadoop的安全认证方案&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.security.auth_to_local&lt;/name&gt;
        &lt;value&gt;
            RULE:[2:$1@$0](nn@.*EXAMPLE.COM)s/.*/hdfs/
            RULE:[2:$1@$0](sn@.*EXAMPLE.COM)s/.*/hdfs/
            RULE:[2:$1@$0](dn@.*EXAMPLE.COM)s/.*/hdfs/
            RULE:[2:$1@$0](nm@.*EXAMPLE.COM)s/.*/yarn/
            RULE:[2:$1@$0](rm@.*EXAMPLE.COM)s/.*/yarn/
            RULE:[2:$1@$0](tl@.*EXAMPLE.COM)s/.*/yarn/
            RULE:[2:$1@$0](jhs@.*EXAMPLE.COM)s/.*/mapred/
            RULE:[2:$1@$0](HTTP@.*EXAMPLE.COM)s/.*/hdfs/
            DEFAULT
        &lt;/value&gt;
        &lt;description&gt;匹配规则，将 Kerberos 账户转换为本地账户。比如第一行将 nn\xx@EXAMPLE.COM 转换为 hdfs 账户&lt;/description&gt;
    &lt;/property&gt;

    &lt;!-- HIVE KERBEROS --&gt;
    &lt;property&gt;
        &lt;name&gt;hadoop.proxyuser.hive.hosts&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;hadoop.proxyuser.hive.groups&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;hadoop.proxyuser.hdfs.hosts&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;hadoop.proxyuser.hdfs.groups&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;hadoop.proxyuser.HTTP.hosts&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;hadoop.proxyuser.HTTP.groups&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
    &lt;/property&gt;
  
&lt;/configuration&gt;
</code></pre> 
<h6><a id="hdfssitexml_469"></a>hdfs-site.xml</h6> 
<pre><code class="prism language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.name.dir&lt;/name&gt;
        &lt;value&gt;/data/nn&lt;/value&gt;
        &lt;description&gt;Path on the local filesystem where the NameNode stores the
            namespace and transactions logs persistently.
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;dfs.namenode.hosts&lt;/name&gt;
        &lt;value&gt;bigdata1.example.com,bigdata2.example.com&lt;/value&gt;
        &lt;description&gt;List of permitted DataNodes.&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;dfs.blocksize&lt;/name&gt;
        &lt;value&gt;268435456&lt;/value&gt;
        &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;
    
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.handler.count&lt;/name&gt;
        &lt;value&gt;100&lt;/value&gt;
        &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;dfs.datanode.data.dir&lt;/name&gt;
        &lt;value&gt;/data/dn&lt;/value&gt;
    &lt;/property&gt;
  
      &lt;property&gt;
        &lt;name&gt;dfs.permissions.supergroup&lt;/name&gt;
        &lt;value&gt;hdfs&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;dfs.http.policy&lt;/name&gt;
        &lt;value&gt;HTTPS_ONLY&lt;/value&gt;
        &lt;description&gt;所有开启的web页面均使用https, 细节在ssl server 和client那个配置文件内配置&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;dfs.data.transfer.protection&lt;/name&gt;
        &lt;value&gt;integrity&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.https.port&lt;/name&gt;
        &lt;value&gt;50470&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.datanode.data.dir.perm&lt;/name&gt;
        &lt;value&gt;700&lt;/value&gt;
    &lt;/property&gt;
  
    &lt;!-- 以下是 Kerberos 相关配置 --&gt;
    &lt;!-- 配置 Kerberos 认证后，这个配置是必须为 true。否重 Datanode 启动会报错 --&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.block.access.token.enable&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- NameNode security config --&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.kerberos.principal&lt;/name&gt;
        &lt;value&gt;nn/_HOST@EXAMPLE.COM&lt;/value&gt;
        &lt;description&gt;namenode对应的kerberos账户为 nn/主机名@EXAMPLE.COM, _HOST会自动转换为主机名
        &lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.namenode.keytab.file&lt;/name&gt;
        &lt;!-- path to the HDFS keytab --&gt;
        &lt;value&gt;/etc/security/keytabs/nn.service.keytab&lt;/value&gt;
        &lt;description&gt;指定namenode用于免密登录的keytab文件&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;dfs.namenode.kerberos.internal.spnego.principal&lt;/name&gt;
        &lt;value&gt;HTTP/_HOST@EXAMPLE.COM&lt;/value&gt;
        &lt;description&gt;https 相关（如开启namenodeUI）使用的账户&lt;/description&gt;
    &lt;/property&gt;
    &lt;!--Secondary NameNode security config --&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.secondary.namenode.kerberos.principal&lt;/name&gt;
        &lt;value&gt;sn/_HOST@EXAMPLE.COM&lt;/value&gt;
        &lt;description&gt;secondarynamenode使用的账户&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.secondary.namenode.keytab.file&lt;/name&gt;
        &lt;!-- path to the HDFS keytab --&gt;
        &lt;value&gt;/etc/security/keytabs/sn.service.keytab&lt;/value&gt;
        &lt;description&gt;sn对应的keytab文件&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.secondary.namenode.kerberos.internal.spnego.principal&lt;/name&gt;
        &lt;value&gt;HTTP/_HOST@EXAMPLE.COM&lt;/value&gt;
        &lt;description&gt;sn需要开启http页面用到的账户&lt;/description&gt;
    &lt;/property&gt;
    &lt;!-- DataNode security config --&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.datanode.kerberos.principal&lt;/name&gt;
        &lt;value&gt;dn/_HOST@EXAMPLE.COM&lt;/value&gt;
        &lt;description&gt;datanode用到的账户&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.datanode.keytab.file&lt;/name&gt;
        &lt;!-- path to the HDFS keytab --&gt;
        &lt;value&gt;/etc/security/keytabs/dn.service.keytab&lt;/value&gt;
        &lt;description&gt;datanode用到的keytab文件路径&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;dfs.web.authentication.kerberos.principal&lt;/name&gt;
        &lt;value&gt;HTTP/_HOST@EXAMPLE.COM&lt;/value&gt;
        &lt;description&gt;web hdfs 使用的账户&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;dfs.web.authentication.kerberos.keytab&lt;/name&gt;
        &lt;value&gt;/etc/security/keytabs/spnego.service.keytab&lt;/value&gt;
        &lt;description&gt;对应的keytab文件&lt;/description&gt;
    &lt;/property&gt;

&lt;/configuration&gt;
</code></pre> 
<h6><a id="yarnsitexml_600"></a>yarn-site.xml</h6> 
<pre><code class="prism language-XML">&lt;?xml version="1.0"?&gt;
&lt;!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License. See accompanying LICENSE file.
--&gt;
&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.log.server.url&lt;/name&gt;
        &lt;value&gt;https://bigdata0.example.com:19890/jobhistory/logs&lt;/value&gt;
        &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;
    &lt;!-- Site specific YARN configuration properties --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.acl.enable&lt;/name&gt;
        &lt;value&gt;false&lt;/value&gt;
        &lt;description&gt;Enable ACLs? Defaults to false.&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.admin.acl&lt;/name&gt;
        &lt;value&gt;*&lt;/value&gt;
        &lt;description&gt;ACL to set admins on the cluster. ACLs are of for comma-separated-
            usersspacecomma-separated-groups. Defaults to special value of * which means anyone.
            Special value of just space means no one has access.
        &lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
        &lt;description&gt;Configuration to enable or disable log aggregation&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.remote-app-log-dir&lt;/name&gt;
        &lt;value&gt;/tmp/logs&lt;/value&gt;
        &lt;description&gt;Configuration to enable or disable log aggregation&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
        &lt;value&gt;bigdata0.example.com&lt;/value&gt;
        &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler&lt;/value&gt;
        &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.local-dirs&lt;/name&gt;
        &lt;value&gt;/data/nm-local&lt;/value&gt;
        &lt;description&gt;Comma-separated list of paths on the local filesystem where
            intermediate data is written.
        &lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.log-dirs&lt;/name&gt;
        &lt;value&gt;/data/nm-log&lt;/value&gt;
        &lt;description&gt;Comma-separated list of paths on the local filesystem where logs are
            written.
        &lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.log.retain-seconds&lt;/name&gt;
        &lt;value&gt;10800&lt;/value&gt;
        &lt;description&gt;Default time (in seconds) to retain log files on the NodeManager Only
            applicable if log-aggregation is disabled.
        &lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
        &lt;description&gt;Shuffle service that needs to be set for Map Reduce applications.
        &lt;/description&gt;
    &lt;/property&gt;
  
      &lt;!-- To enable SSL --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.http.policy&lt;/name&gt;
        &lt;value&gt;HTTPS_ONLY&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.linux-container-executor.group&lt;/name&gt;
        &lt;value&gt;hadoop&lt;/value&gt;
    &lt;/property&gt;

    &lt;!-- 这个配了可能需要在本机编译 ContainerExecutor --&gt;
    &lt;!-- 可以用以下命令检查环境。 --&gt;
    &lt;!-- hadoop checknative -a --&gt;
    &lt;!-- ldd $HADOOP_HOME/bin/container-executor --&gt;
    &lt;!-- 
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.container-executor.class&lt;/name&gt;
        &lt;value&gt;org.apache.hadoop.yarn.server.nodemanager.LinuxContainerExecutor&lt;/value&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.linux-container-executor.path&lt;/name&gt;
        &lt;value&gt;/bigdata/hadoop-3.3.2/bin/container-executor&lt;/value&gt;
    &lt;/property&gt;
    --&gt;
  
    &lt;!-- 以下是 Kerberos 相关配置 --&gt;
    &lt;!-- ResourceManager security configs --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.principal&lt;/name&gt;
        &lt;value&gt;rm/_HOST@EXAMPLE.COM&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.keytab&lt;/name&gt;
        &lt;value&gt;/etc/security/keytabs/rm.service.keytab&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.resourcemanager.webapp.delegation-token-auth-filter.enabled&lt;/name&gt;
        &lt;value&gt;true&lt;/value&gt;
    &lt;/property&gt;
    &lt;!-- NodeManager security configs --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.principal&lt;/name&gt;
        &lt;value&gt;nm/_HOST@EXAMPLE.COM&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.nodemanager.keytab&lt;/name&gt;
        &lt;value&gt;/etc/security/keytabs/nm.service.keytab&lt;/value&gt;
    &lt;/property&gt;
    &lt;!-- TimeLine security configs --&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.timeline-service.principal&lt;/name&gt;
        &lt;value&gt;tl/_HOST@EXAMPLE.COM&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.timeline-service.keytab&lt;/name&gt;
        &lt;value&gt;/etc/security/keytabs/tl.service.keytab&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.timeline-service.http-authentication.type&lt;/name&gt;
        &lt;value&gt;kerberos&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.timeline-service.http-authentication.kerberos.principal&lt;/name&gt;
        &lt;value&gt;HTTP/_HOST@EXAMPLE.COM&lt;/value&gt;
    &lt;/property&gt;
    &lt;property&gt;
        &lt;name&gt;yarn.timeline-service.http-authentication.kerberos.keytab&lt;/name&gt;
        &lt;value&gt;/etc/security/keytabs/spnego.service.keytab&lt;/value&gt;
    &lt;/property&gt;

&lt;/configuration&gt;
</code></pre> 
<h6><a id="mapredsitexml_760"></a>mapred-site.xml</h6> 
<pre><code class="prism language-XML">&lt;?xml version="1.0"?&gt;
&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;
&lt;!--
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at
  http://www.apache.org/licenses/LICENSE-2.0
 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License. See accompanying LICENSE file.
--&gt;
&lt;!-- Put site-specific property overrides in this file. --&gt;
&lt;configuration&gt;
    &lt;property&gt;
       &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
       &lt;value&gt;yarn&lt;/value&gt;
       &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
     &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;
     &lt;value&gt;bigdata0.example.com:10020&lt;/value&gt;
     &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
     &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;
     &lt;value&gt;bigdata0.example.com:19888&lt;/value&gt;
     &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
     &lt;name&gt;mapreduce.jobhistory.intermediate-done-dir&lt;/name&gt;
     &lt;value&gt;/mr-data/mr-history/tmp&lt;/value&gt;
     &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;
    &lt;property&gt;
     &lt;name&gt;mapreduce.jobhistory.done-dir&lt;/name&gt; 
     &lt;value&gt;/mr-data/mr-history/done&lt;/value&gt;
     &lt;description&gt;&lt;/description&gt;
    &lt;/property&gt;
  
     &lt;property&gt;
       &lt;name&gt;mapreduce.jobhistory.http.policy&lt;/name&gt;
       &lt;value&gt;HTTPS_ONLY&lt;/value&gt;
     &lt;/property&gt;
  
      &lt;!-- 以下是 Kerberos 相关配置 --&gt;
     &lt;property&gt;
       &lt;name&gt;mapreduce.jobhistory.keytab&lt;/name&gt;
       &lt;value&gt;/etc/security/keytabs/jhs.service.keytab&lt;/value&gt;
     &lt;/property&gt;
     &lt;property&gt;
       &lt;name&gt;mapreduce.jobhistory.principal&lt;/name&gt;
       &lt;value&gt;jhs/_HOST@EXAMPLE.COM&lt;/value&gt;
     &lt;/property&gt;
     &lt;property&gt;
       &lt;name&gt;mapreduce.jobhistory.webapp.spnego-principal&lt;/name&gt;
       &lt;value&gt;HTTP/_HOST@EXAMPLE.COM&lt;/value&gt;
     &lt;/property&gt;
     &lt;property&gt;
       &lt;name&gt;mapreduce.jobhistory.webapp.spnego-keytab-file&lt;/name&gt;
       &lt;value&gt;/etc/security/keytabs/spnego.service.keytab&lt;/value&gt;
     &lt;/property&gt;

&lt;/configuration&gt;
</code></pre> 
<h5><a id="https_832"></a>创建https证书</h5> 
<pre><code class="prism language-Plain">openssl req -new -x509 -keyout bd_ca_key -out bd_ca_cert -days 9999 -subj '/C=CN/ST=beijing/L=beijing/O=test/OU=test/CN=test'
</code></pre> 
<pre><code class="prism language-Plain">scp -r /etc/security/cdh.https bigdata1:/etc/security/
scp -r /etc/security/cdh.https bigdata2:/etc/security/
</code></pre> 
<pre><code class="prism language-Shell">[root@bigdata0 cdh.https]# openssl req -new -x509 -keyout bd_ca_key -out bd_ca_cert -days 9999 -subj '/C=CN/ST=beijing/L=beijing/O=test/OU=test/CN=test'
Generating a 2048 bit RSA private key
..............+++
..........................+++
writing new private key to 'bd_ca_key'
Enter PEM pass phrase:
Verifying - Enter PEM pass phrase:
-----
[root@bigdata0 cdh.https]#
[root@bigdata0 cdh.https]# ll
总用量 8
-rw-r--r--. 1 root root 1298 10月  5 17:14 bd_ca_cert
-rw-r--r--. 1 root root 1834 10月  5 17:14 bd_ca_key
[root@bigdata0 cdh.https]# scp -r /etc/security/cdh.https bigdata1:/etc/security/
bd_ca_key                                                                             100% 1834   913.9KB/s   00:00
bd_ca_cert                                                                            100% 1298     1.3MB/s   00:00
[root@bigdata0 cdh.https]# scp -r /etc/security/cdh.https bigdata2:/etc/security/
bd_ca_key                                                                             100% 1834     1.7MB/s   00:00
bd_ca_cert                                                                            100% 1298     1.3MB/s   00:00
[root@bigdata0 cdh.https]#

</code></pre> 
<p>在三个节点依次执行</p> 
<pre><code class="prism language-Shell">cd /etc/security/cdh.https
 
# 所有需要输入密码的地方全部输入123456（方便起见，如果你对密码有要求请自行修改）
 
# 1  输入密码和确认密码：123456，此命令成功后输出keystore文件
keytool -keystore keystore -alias localhost -validity 9999 -genkey -keyalg RSA -keysize 2048 -dname "CN=test, OU=test, O=test, L=beijing, ST=beijing, C=CN"
 
# 2 输入密码和确认密码：123456，提示是否信任证书：输入yes，此命令成功后输出truststore文件
keytool -keystore truststore -alias CARoot -import -file bd_ca_cert
 
# 3 输入密码和确认密码：123456，此命令成功后输出cert文件
keytool -certreq -alias localhost -keystore keystore -file cert
 
# 4 此命令成功后输出cert_signed文件
openssl x509 -req -CA bd_ca_cert -CAkey bd_ca_key -in cert -out cert_signed -days 9999 -CAcreateserial -passin pass:123456
 
# 5 输入密码和确认密码：123456，是否信任证书，输入yes，此命令成功后更新keystore文件
keytool -keystore keystore -alias CARoot -import -file bd_ca_cert

# 6 输入密码和确认密码：123456
keytool -keystore keystore -alias localhost -import -file cert_signed
 
 
最终得到:
-rw-r--r-- 1 root root 1294 Sep 26 11:31 bd_ca_cert
-rw-r--r-- 1 root root   17 Sep 26 11:36 bd_ca_cert.srl
-rw-r--r-- 1 root root 1834 Sep 26 11:31 bd_ca_key
-rw-r--r-- 1 root root 1081 Sep 26 11:36 cert
-rw-r--r-- 1 root root 1176 Sep 26 11:36 cert_signed
-rw-r--r-- 1 root root 4055 Sep 26 11:37 keystore
-rw-r--r-- 1 root root  978 Sep 26 11:35 truststore
</code></pre> 
<p>配置ssl-server.xml和ssl-client.xml</p> 
<p>ssl-sserver.xml</p> 
<pre><code class="prism language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;ssl.server.truststore.location&lt;/name&gt;
        &lt;value&gt;/etc/security/cdh.https/truststore&lt;/value&gt;
        &lt;description&gt;Truststore to be used by NN and DN. Must be specified.
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.truststore.password&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
        &lt;description&gt;Optional. Default value is "".
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.truststore.type&lt;/name&gt;
        &lt;value&gt;jks&lt;/value&gt;
        &lt;description&gt;Optional. The keystore file format, default value is "jks".
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.truststore.reload.interval&lt;/name&gt;
        &lt;value&gt;10000&lt;/value&gt;
        &lt;description&gt;Truststore reload check interval, in milliseconds.
        Default value is 10000 (10 seconds).
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.keystore.location&lt;/name&gt;
        &lt;value&gt;/etc/security/cdh.https/keystore&lt;/value&gt;
        &lt;description&gt;Keystore to be used by NN and DN. Must be specified.
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.keystore.password&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
        &lt;description&gt;Must be specified.
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.keystore.keypassword&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
        &lt;description&gt;Must be specified.
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.keystore.type&lt;/name&gt;
        &lt;value&gt;jks&lt;/value&gt;
        &lt;description&gt;Optional. The keystore file format, default value is "jks".
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.server.exclude.cipher.list&lt;/name&gt;
        &lt;value&gt;TLS_EE_RSA_WITH_RC4_128_SHA,SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA,
        SSL_RSA_WITH_DES_CBC_SHA,SSL_DHE_RSA_WITH_DES_CBC_SHA,
        SSL_RSA_EXPORT_WITH_RC4_40_MD5,SSL_RSA_EXPORT_WITH_DES40_CBC_SHA,
        SSL_RSA_WITH_RC4_128_MD5&lt;/value&gt;
        &lt;description&gt;Optional. The weak security cipher suites that you want excluded
        from SSL communication.&lt;/description&gt;
    &lt;/property&gt;

&lt;/configuration&gt;
</code></pre> 
<p>ssl-client.xml</p> 
<pre><code class="prism language-XML">&lt;configuration&gt;
    &lt;property&gt;
        &lt;name&gt;ssl.client.truststore.location&lt;/name&gt;
        &lt;value&gt;/etc/security/cdh.https/truststore&lt;/value&gt;
        &lt;description&gt;Truststore to be used by clients like distcp. Must be
        specified.
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.client.truststore.password&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
        &lt;description&gt;Optional. Default value is "".
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.client.truststore.type&lt;/name&gt;
        &lt;value&gt;jks&lt;/value&gt;
        &lt;description&gt;Optional. The keystore file format, default value is "jks".
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.client.truststore.reload.interval&lt;/name&gt;
        &lt;value&gt;10000&lt;/value&gt;
        &lt;description&gt;Truststore reload check interval, in milliseconds.
        Default value is 10000 (10 seconds).
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.client.keystore.location&lt;/name&gt;
        &lt;value&gt;/etc/security/cdh.https/keystore&lt;/value&gt;
        &lt;description&gt;Keystore to be used by clients like distcp. Must be
        specified.
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.client.keystore.password&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
        &lt;description&gt;Optional. Default value is "".
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.client.keystore.keypassword&lt;/name&gt;
        &lt;value&gt;123456&lt;/value&gt;
        &lt;description&gt;Optional. Default value is "".
        &lt;/description&gt;
    &lt;/property&gt;

    &lt;property&gt;
        &lt;name&gt;ssl.client.keystore.type&lt;/name&gt;
        &lt;value&gt;jks&lt;/value&gt;
        &lt;description&gt;Optional. The keystore file format, default value is "jks".
        &lt;/description&gt;
    &lt;/property&gt;

&lt;/configuration&gt;
</code></pre> 
<p>分发配置</p> 
<pre><code class="prism language-Shell">scp $HADOOP_HOME/etc/hadoop/* bigdata1:/bigdata/hadoop-3.3.2/etc/hadoop/
scp $HADOOP_HOME/etc/hadoop/* bigdata2:/bigdata/hadoop-3.3.2/etc/hadoop/
</code></pre> 
<h3><a id="4_1060"></a>4、启动服务</h3> 
<p>ps：初始化 namenode 后可以直接 sbin/start-all.sh</p> 
<h3><a id="5_1063"></a>5、一些错误：</h3> 
<h4><a id="51_Kerberos__1065"></a>5.1 Kerberos 相关错误</h4> 
<h5><a id="_realm_1067"></a>连不上 realm</h5> 
<p>Cannot contact any KDC for realm</p> 
<p>一般是网络不通</p> 
<p>1、可能是没关闭防火墙：</p> 
<pre><code class="prism language-Shell">[root@bigdata0 bigdata]# kinit krbtest/admin@EXAMPLE.COM
kinit: Cannot contact any KDC for realm 'EXAMPLE.COM' while getting initial credentials
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]# systemctl stop firewalld.service
[root@bigdata0 bigdata]# systemctl disable firewalld.service
Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.
Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.
[root@bigdata0 bigdata]# kinit krbtest/admin@EXAMPLE.COM
Password for krbtest/admin@EXAMPLE.COM:
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]#
[root@bigdata0 bigdata]# klist
Ticket cache: FILE:/tmp/krb5cc_0
Default principal: krbtest/admin@EXAMPLE.COM

Valid starting       Expires              Service principal
2023-10-05T16:19:58  2023-10-06T16:19:58  krbtgt/EXAMPLE.COM@EXAMPLE.COM
[root@bigdata0 bigdata]#
</code></pre> 
<p>2、可能是 没有在 hosts 中配置 kdc</p> 
<p>编辑 /etc/hosts 添加 kdc 和对应 ip 的映射</p> 
<pre><code class="prism language-Shell"># {kdc ip}     {kdc}
192.168.50.10  bigdata3.example.com
</code></pre> 
<p><a href="https://serverfault.com/questions/612869/kinit-cannot-contact-any-kdc-for-realm-ubuntu-while-getting-initial-credentia" rel="nofollow">https://serverfault.com/questions/612869/kinit-cannot-contact-any-kdc-for-realm-ubuntu-while-getting-initial-credentia</a><br> <img src="https://images2.imgbox.com/e2/46/U2CaX69l_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="kinit__1111"></a>kinit 命令找错依赖</h5> 
<p>kinit: relocation error: kinit: symbol krb5_get_init_creds_opt_set_pac_request, version krb5_3_MIT not defined in file libkrb5.so.3 with link time reference</p> 
<p>用 ldd <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
       
         w 
        
       
         h 
        
       
         i 
        
       
         c 
        
       
         h 
        
       
         k 
        
       
         i 
        
       
         n 
        
       
         i 
        
       
         t 
        
       
         ) 
        
       
         发现指向了非 
        
       
         / 
        
       
         l 
        
       
         i 
        
       
         b 
        
       
         64 
        
       
         下面的 
        
       
         l 
        
       
         i 
        
       
         b 
        
       
         k 
        
       
         r 
        
       
         b 
        
       
         5. 
        
       
         s 
        
       
         o 
        
       
         . 
        
       
         3 
        
       
         依赖。执行 
        
       
         e 
        
       
         x 
        
       
         p 
        
       
         o 
        
       
         r 
        
       
         t 
        
       
         L 
        
        
        
          D 
         
        
          L 
         
        
       
         I 
        
       
         B 
        
       
         R 
        
       
         A 
        
       
         R 
        
        
        
          Y 
         
        
          P 
         
        
       
         A 
        
       
         T 
        
       
         H 
        
       
         = 
        
       
         / 
        
       
         l 
        
       
         i 
        
       
         b 
        
       
         64 
        
       
         : 
        
       
      
        (which kinit) 发现指向了非 /lib64 下面的 libkrb5.so.3 依赖。执行 export LD_LIBRARY_PATH=/lib64: 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span style="margin-right: 0.0269em;" class="mord mathnormal">w</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">c</span><span class="mord mathnormal">hkini</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mord cjk_fallback">发现指向了非</span><span class="mord">/</span><span style="margin-right: 0.0197em;" class="mord mathnormal">l</span><span class="mord mathnormal">ib</span><span class="mord">64</span><span class="mord cjk_fallback">下面的</span><span style="margin-right: 0.0197em;" class="mord mathnormal">l</span><span style="margin-right: 0.0315em;" class="mord mathnormal">ibk</span><span style="margin-right: 0.0278em;" class="mord mathnormal">r</span><span class="mord mathnormal">b</span><span class="mord">5.</span><span class="mord mathnormal">so</span><span class="mord">.3</span><span class="mord cjk_fallback">依赖。执行</span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">p</span><span style="margin-right: 0.0278em;" class="mord mathnormal">or</span><span class="mord mathnormal">t</span><span class="mord mathnormal">L</span><span class="mord"><span style="margin-right: 0.0278em;" class="mord mathnormal">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.0278em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span style="margin-right: 0.0785em;" class="mord mathnormal">I</span><span style="margin-right: 0.0077em;" class="mord mathnormal">BR</span><span class="mord mathnormal">A</span><span style="margin-right: 0.0077em;" class="mord mathnormal">R</span><span class="mord"><span style="margin-right: 0.2222em;" class="mord mathnormal">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.2222em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span style="margin-right: 0.1389em;" class="mord mathnormal mtight">P</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord mathnormal">A</span><span style="margin-right: 0.1389em;" class="mord mathnormal">T</span><span style="margin-right: 0.0813em;" class="mord mathnormal">H</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">/</span><span style="margin-right: 0.0197em;" class="mord mathnormal">l</span><span class="mord mathnormal">ib</span><span class="mord">64</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span></span></span></span></span>{LD_LIBRARY_PATH} 即可。</p> 
<p><a href="https://community.broadcom.com/communities/community-home/digestviewer/viewthread?MID=797304#:~:text=To%20solve%20this%20error%2C%20the%20only%20workaround%20found,to%20use%20system%20libraries%20%24%20export%20LD_LIBRARY_PATH%3D%2Flib64%3A%24%20%7BLD_LIBRARY_PATH%7D" rel="nofollow">https://community.broadcom.com/communities/community-home/digestviewer/viewthread?MID=797304#:~:text=To%20solve%20this%20error%2C%20the%20only%20workaround%20found,to%20use%20system%20libraries%20%24%20export%20LD_LIBRARY_PATH%3D%2Flib64%3A%24%20%7BLD_LIBRARY_PATH%7D</a></p> 
<hr> 
<h5><a id="ccache_id__1121"></a>ccache id 非法</h5> 
<p>kinit: Invalid Uid in persistent keyring name while getting default ccache</p> 
<p>修改 /etc/krb5.conf 中的 default_ccache_name 值。</p> 
<p><a href="https://unix.stackexchange.com/questions/712857/kinit-invalid-uid-in-persistent-keyring-name-while-getting-default-ccache-while#:~:text=If%20running%20unset%20KRB5CCNAME%20did%20not%20resolve%20it%2C,of%20%22default_ccache_name%22%20in%20%2Fetc%2Fkrb5.conf%20to%20a%20local%20file%3A" rel="nofollow">https://unix.stackexchange.com/questions/712857/kinit-invalid-uid-in-persistent-keyring-name-while-getting-default-ccache-while#:~:text=If%20running%20unset%20KRB5CCNAME%20did%20not%20resolve%20it%2C,of%20%22default_ccache_name%22%20in%20%2Fetc%2Fkrb5.conf%20to%20a%20local%20file%3A</a></p> 
<h5><a id="KrbException_Message_stream_modified_41_1131"></a>KrbException: Message stream modified (41)</h5> 
<p>据说和 jre 版本有关系，删除 krb5.conf 配置文件里的 <code>renew_lifetime = xxx</code> 即可。</p> 
<h4><a id="52_Hadoop__1137"></a>5.2 Hadoop 相关错误</h4> 
<p>哪个节点的哪个服务有错误，可以在对应日志（或manager日志）中查看是否有异常信息。比如一些 so 文件找不到，不上即可。</p> 
<p>hdfs web 上报错 Failed to obtain user group information: java.io.IOException: Security enabled but user not authenticated by filter</p> 
<p><img src="https://images2.imgbox.com/38/4d/NlToWLHe_o.png" alt="在这里插入图片描述"><a href="https://issues.apache.org/jira/browse/HDFS-16441" rel="nofollow">https://issues.apache.org/jira/browse/HDFS-16441</a></p> 
<h3><a id="6__Spark_on_yarn_1147"></a>6 提交 Spark on yarn</h3> 
<p>1、直接提交：<br> 命令：</p> 
<pre><code class="prism language-shell">bin/spark-submit <span class="token punctuation">\</span> 
 <span class="token parameter variable">--master</span> <span class="token function">yarn</span> <span class="token punctuation">\</span>
 --deploy-mode cluster 
 <span class="token parameter variable">--class</span> org.apache.spark.examples.SparkPi <span class="token punctuation">\</span>
 examples/jars/spark-examples_2.12-3.3.0.jar  
</code></pre> 
<pre><code class="prism language-shell">    <span class="token punctuation">[</span>root@bigdata3 spark-3.3.0-bin-hadoop3<span class="token punctuation">]</span><span class="token comment"># bin/spark-submit --master yarn --deploy-mode cluster  --class org.apache.spark.examples.SparkPi examples/jars/spark-examples_2.12-3.3.0.jar</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:05 WARN NativeCodeLoader: Unable to load native-hadoop library <span class="token keyword">for</span> your platform<span class="token punctuation">..</span>. using builtin-java classes where applicable
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:05 INFO DefaultNoHARMFailoverProxyProvider: Connecting to ResourceManager at bigdata0.example.com/192.168.50.7:8032
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:06 WARN Client: Exception encountered <span class="token keyword">while</span> connecting to the server
    org.apache.hadoop.security.AccessControlException: Client cannot authenticate via:<span class="token punctuation">[</span>TOKEN, KERBEROS<span class="token punctuation">]</span>
            at org.apache.hadoop.security.SaslRpcClient.selectSaslClient<span class="token punctuation">(</span>SaslRpcClient.java:179<span class="token punctuation">)</span>
            at org.apache.hadoop.security.SaslRpcClient.saslConnect<span class="token punctuation">(</span>SaslRpcClient.java:392<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.setupSaslConnection<span class="token punctuation">(</span>Client.java:623<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.access<span class="token variable">$2300</span><span class="token punctuation">(</span>Client.java:414<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span><span class="token variable">$2</span>.run<span class="token punctuation">(</span>Client.java:843<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span><span class="token variable">$2</span>.run<span class="token punctuation">(</span>Client.java:839<span class="token punctuation">)</span>
            at java.security.AccessController.doPrivileged<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
            at javax.security.auth.Subject.doAs<span class="token punctuation">(</span>Subject.java:422<span class="token punctuation">)</span>
            at org.apache.hadoop.security.UserGroupInformation.doAs<span class="token punctuation">(</span>UserGroupInformation.java:1878<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.setupIOstreams<span class="token punctuation">(</span>Client.java:839<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.access<span class="token variable">$3800</span><span class="token punctuation">(</span>Client.java:414<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.getConnection<span class="token punctuation">(</span>Client.java:1677<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.call<span class="token punctuation">(</span>Client.java:1502<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.call<span class="token punctuation">(</span>Client.java:1455<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.ProtobufRpcEngine2<span class="token variable">$Invoker</span>.invoke<span class="token punctuation">(</span>ProtobufRpcEngine2.java:242<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.ProtobufRpcEngine2<span class="token variable">$Invoker</span>.invoke<span class="token punctuation">(</span>ProtobufRpcEngine2.java:129<span class="token punctuation">)</span>
            at com.sun.proxy.<span class="token variable">$Proxy24</span>.getNewApplication<span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
            at org.apache.hadoop.yarn.api.impl.pb.client.ApplicationClientProtocolPBClientImpl.getNewApplication<span class="token punctuation">(</span>ApplicationClientProtocolPBClientImpl.java:286<span class="token punctuation">)</span>
            at sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
            at sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java:62<span class="token punctuation">)</span>
            at sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java:43<span class="token punctuation">)</span>
            at java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java:498<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod<span class="token punctuation">(</span>RetryInvocationHandler.java:422<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler<span class="token variable">$Call</span>.invokeMethod<span class="token punctuation">(</span>RetryInvocationHandler.java:165<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler<span class="token variable">$Call</span>.invoke<span class="token punctuation">(</span>RetryInvocationHandler.java:157<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler<span class="token variable">$Call</span>.invokeOnce<span class="token punctuation">(</span>RetryInvocationHandler.java:95<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke<span class="token punctuation">(</span>RetryInvocationHandler.java:359<span class="token punctuation">)</span>
            at com.sun.proxy.<span class="token variable">$Proxy25</span>.getNewApplication<span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
            at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.getNewApplication<span class="token punctuation">(</span>YarnClientImpl.java:284<span class="token punctuation">)</span>
            at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.createApplication<span class="token punctuation">(</span>YarnClientImpl.java:292<span class="token punctuation">)</span>
            at org.apache.spark.deploy.yarn.Client.submitApplication<span class="token punctuation">(</span>Client.scala:200<span class="token punctuation">)</span>
            at org.apache.spark.deploy.yarn.Client.run<span class="token punctuation">(</span>Client.scala:1327<span class="token punctuation">)</span>
            at org.apache.spark.deploy.yarn.YarnClusterApplication.start<span class="token punctuation">(</span>Client.scala:1764<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.org<span class="token variable">$apache</span><span class="token variable">$spark</span><span class="token variable">$deploy</span><span class="token variable">$SparkSubmit</span><span class="token variable">$$</span>runMain<span class="token punctuation">(</span>SparkSubmit.scala:958<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.doRunMain<span class="token variable">$1</span><span class="token punctuation">(</span>SparkSubmit.scala:180<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.submit<span class="token punctuation">(</span>SparkSubmit.scala:203<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.doSubmit<span class="token punctuation">(</span>SparkSubmit.scala:90<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit<span class="token variable">$$</span>anon<span class="token variable">$2</span>.doSubmit<span class="token punctuation">(</span>SparkSubmit.scala:1046<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit$.main<span class="token punctuation">(</span>SparkSubmit.scala:1055<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.main<span class="token punctuation">(</span>SparkSubmit.scala<span class="token punctuation">)</span>
    Exception <span class="token keyword">in</span> thread <span class="token string">"main"</span> java.io.IOException: DestHost:destPort bigdata0.example.com:8032 , LocalHost:localPort bigdata3.example.com/192.168.50.10:0. Failed on <span class="token builtin class-name">local</span> exception: java.io.IOException: org.apache.hadoop.security.AccessControlException: Client cannot authenticate via:<span class="token punctuation">[</span>TOKEN, KERBEROS<span class="token punctuation">]</span>
            at sun.reflect.NativeConstructorAccessorImpl.newInstance0<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
            at sun.reflect.NativeConstructorAccessorImpl.newInstance<span class="token punctuation">(</span>NativeConstructorAccessorImpl.java:62<span class="token punctuation">)</span>
            at sun.reflect.DelegatingConstructorAccessorImpl.newInstance<span class="token punctuation">(</span>DelegatingConstructorAccessorImpl.java:45<span class="token punctuation">)</span>
            at java.lang.reflect.Constructor.newInstance<span class="token punctuation">(</span>Constructor.java:423<span class="token punctuation">)</span>
            at org.apache.hadoop.net.NetUtils.wrapWithMessage<span class="token punctuation">(</span>NetUtils.java:913<span class="token punctuation">)</span>
            at org.apache.hadoop.net.NetUtils.wrapException<span class="token punctuation">(</span>NetUtils.java:888<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.getRpcResponse<span class="token punctuation">(</span>Client.java:1616<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.call<span class="token punctuation">(</span>Client.java:1558<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.call<span class="token punctuation">(</span>Client.java:1455<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.ProtobufRpcEngine2<span class="token variable">$Invoker</span>.invoke<span class="token punctuation">(</span>ProtobufRpcEngine2.java:242<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.ProtobufRpcEngine2<span class="token variable">$Invoker</span>.invoke<span class="token punctuation">(</span>ProtobufRpcEngine2.java:129<span class="token punctuation">)</span>
            at com.sun.proxy.<span class="token variable">$Proxy24</span>.getNewApplication<span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
            at org.apache.hadoop.yarn.api.impl.pb.client.ApplicationClientProtocolPBClientImpl.getNewApplication<span class="token punctuation">(</span>ApplicationClientProtocolPBClientImpl.java:286<span class="token punctuation">)</span>
            at sun.reflect.NativeMethodAccessorImpl.invoke0<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
            at sun.reflect.NativeMethodAccessorImpl.invoke<span class="token punctuation">(</span>NativeMethodAccessorImpl.java:62<span class="token punctuation">)</span>
            at sun.reflect.DelegatingMethodAccessorImpl.invoke<span class="token punctuation">(</span>DelegatingMethodAccessorImpl.java:43<span class="token punctuation">)</span>
            at java.lang.reflect.Method.invoke<span class="token punctuation">(</span>Method.java:498<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod<span class="token punctuation">(</span>RetryInvocationHandler.java:422<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler<span class="token variable">$Call</span>.invokeMethod<span class="token punctuation">(</span>RetryInvocationHandler.java:165<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler<span class="token variable">$Call</span>.invoke<span class="token punctuation">(</span>RetryInvocationHandler.java:157<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler<span class="token variable">$Call</span>.invokeOnce<span class="token punctuation">(</span>RetryInvocationHandler.java:95<span class="token punctuation">)</span>
            at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke<span class="token punctuation">(</span>RetryInvocationHandler.java:359<span class="token punctuation">)</span>
            at com.sun.proxy.<span class="token variable">$Proxy25</span>.getNewApplication<span class="token punctuation">(</span>Unknown Source<span class="token punctuation">)</span>
            at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.getNewApplication<span class="token punctuation">(</span>YarnClientImpl.java:284<span class="token punctuation">)</span>
            at org.apache.hadoop.yarn.client.api.impl.YarnClientImpl.createApplication<span class="token punctuation">(</span>YarnClientImpl.java:292<span class="token punctuation">)</span>
            at org.apache.spark.deploy.yarn.Client.submitApplication<span class="token punctuation">(</span>Client.scala:200<span class="token punctuation">)</span>
            at org.apache.spark.deploy.yarn.Client.run<span class="token punctuation">(</span>Client.scala:1327<span class="token punctuation">)</span>
            at org.apache.spark.deploy.yarn.YarnClusterApplication.start<span class="token punctuation">(</span>Client.scala:1764<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.org<span class="token variable">$apache</span><span class="token variable">$spark</span><span class="token variable">$deploy</span><span class="token variable">$SparkSubmit</span><span class="token variable">$$</span>runMain<span class="token punctuation">(</span>SparkSubmit.scala:958<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.doRunMain<span class="token variable">$1</span><span class="token punctuation">(</span>SparkSubmit.scala:180<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.submit<span class="token punctuation">(</span>SparkSubmit.scala:203<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.doSubmit<span class="token punctuation">(</span>SparkSubmit.scala:90<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit<span class="token variable">$$</span>anon<span class="token variable">$2</span>.doSubmit<span class="token punctuation">(</span>SparkSubmit.scala:1046<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit$.main<span class="token punctuation">(</span>SparkSubmit.scala:1055<span class="token punctuation">)</span>
            at org.apache.spark.deploy.SparkSubmit.main<span class="token punctuation">(</span>SparkSubmit.scala<span class="token punctuation">)</span>
    Caused by: java.io.IOException: org.apache.hadoop.security.AccessControlException: Client cannot authenticate via:<span class="token punctuation">[</span>TOKEN, KERBEROS<span class="token punctuation">]</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span><span class="token variable">$1</span>.run<span class="token punctuation">(</span>Client.java:798<span class="token punctuation">)</span>
            at java.security.AccessController.doPrivileged<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
            at javax.security.auth.Subject.doAs<span class="token punctuation">(</span>Subject.java:422<span class="token punctuation">)</span>
            at org.apache.hadoop.security.UserGroupInformation.doAs<span class="token punctuation">(</span>UserGroupInformation.java:1878<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.handleSaslConnectionFailure<span class="token punctuation">(</span>Client.java:752<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.setupIOstreams<span class="token punctuation">(</span>Client.java:856<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.access<span class="token variable">$3800</span><span class="token punctuation">(</span>Client.java:414<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.getConnection<span class="token punctuation">(</span>Client.java:1677<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client.call<span class="token punctuation">(</span>Client.java:1502<span class="token punctuation">)</span>
            <span class="token punctuation">..</span>. <span class="token number">27</span> <span class="token function">more</span>
    Caused by: org.apache.hadoop.security.AccessControlException: Client cannot authenticate via:<span class="token punctuation">[</span>TOKEN, KERBEROS<span class="token punctuation">]</span>
            at org.apache.hadoop.security.SaslRpcClient.selectSaslClient<span class="token punctuation">(</span>SaslRpcClient.java:179<span class="token punctuation">)</span>
            at org.apache.hadoop.security.SaslRpcClient.saslConnect<span class="token punctuation">(</span>SaslRpcClient.java:392<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.setupSaslConnection<span class="token punctuation">(</span>Client.java:623<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.access<span class="token variable">$2300</span><span class="token punctuation">(</span>Client.java:414<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span><span class="token variable">$2</span>.run<span class="token punctuation">(</span>Client.java:843<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span><span class="token variable">$2</span>.run<span class="token punctuation">(</span>Client.java:839<span class="token punctuation">)</span>
            at java.security.AccessController.doPrivileged<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span>
            at javax.security.auth.Subject.doAs<span class="token punctuation">(</span>Subject.java:422<span class="token punctuation">)</span>
            at org.apache.hadoop.security.UserGroupInformation.doAs<span class="token punctuation">(</span>UserGroupInformation.java:1878<span class="token punctuation">)</span>
            at org.apache.hadoop.ipc.Client<span class="token variable">$Connection</span>.setupIOstreams<span class="token punctuation">(</span>Client.java:839<span class="token punctuation">)</span>
            <span class="token punctuation">..</span>. <span class="token number">30</span> <span class="token function">more</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:06 INFO ShutdownHookManager: Shutdown hook called
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:06 INFO ShutdownHookManager: Deleting directory /tmp/spark-b9b19f53-4839-4cf0-82d0-065f4956f830
</code></pre> 
<p>2、添加 spark.kerberos.keytab 与 spark.kerberos.principal 参数提交。<br> 在提交的机器上添加 Kerberos 账户提交</p> 
<pre><code class="prism language-shell">    <span class="token punctuation">[</span>root@bigdata3 spark-3.3.0-bin-hadoop3<span class="token punctuation">]</span><span class="token comment"># kadmin.local</span>
    Authenticating as principal root/admin@EXAMPLE.COM with password.
    kadmin.local:
    kadmin.local:  addprinc <span class="token parameter variable">-randkey</span> nn/bigdata3.example.com@EXAMPLE.COM
    WARNING: no policy specified <span class="token keyword">for</span> nn/bigdata3.example.com@EXAMPLE.COM<span class="token punctuation">;</span> defaulting to no policy
    Principal <span class="token string">"nn/bigdata3.example.com@EXAMPLE.COM"</span> created.
    kadmin.local:  ktadd <span class="token parameter variable">-k</span> /etc/security/keytabs/nn.service.keytab nn/bigdata3.example.com@EXAMPLE.COM
</code></pre> 
<p>提交命令：</p> 
<pre><code class="prism language-shell">bin/spark-submit <span class="token punctuation">\</span> 
 <span class="token parameter variable">--master</span> <span class="token function">yarn</span> <span class="token punctuation">\</span>
 --deploy-mode cluster 
 <span class="token parameter variable">--conf</span> <span class="token assign-left variable">spark.kerberos.keytab</span><span class="token operator">=</span>/etc/security/keytabs/nn.service.keytab <span class="token punctuation">\</span>
 <span class="token parameter variable">--conf</span> <span class="token assign-left variable">spark.kerberos.principal</span><span class="token operator">=</span>nn/bigdata3.example.com@EXAMPLE.COM <span class="token punctuation">\</span>
 <span class="token parameter variable">--class</span> org.apache.spark.examples.SparkPi <span class="token punctuation">\</span>
 examples/jars/spark-examples_2.12-3.3.0.jar  
</code></pre> 
<p>结果：</p> 
<pre><code class="prism language-shell">    <span class="token punctuation">[</span>root@bigdata3 spark-3.3.0-bin-hadoop3<span class="token punctuation">]</span><span class="token comment"># bin/spark-submit --master yarn --deploy-mode cluster --conf spark.kerberos.keytab=/etc/security/keytabs/nn.service.keytab --conf spark.kerberos.principal=nn/bigdata3.example.com@EXAMPLE.COM --class org.apache.spark.examples.SparkPi examples/jars/spark-examples_2.12-3.3.0.jar</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:30 WARN NativeCodeLoader: Unable to load native-hadoop library <span class="token keyword">for</span> your platform<span class="token punctuation">..</span>. using builtin-java classes where applicable
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:31 INFO Client: Kerberos credentials: principal <span class="token operator">=</span> nn/bigdata3.example.com@EXAMPLE.COM, keytab <span class="token operator">=</span> /etc/security/keytabs/nn.service.keytab
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:31 INFO DefaultNoHARMFailoverProxyProvider: Connecting to ResourceManager at bigdata0.example.com/192.168.50.7:8032
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Configuration: resource-types.xml not found
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO ResourceUtils: Unable to <span class="token function">find</span> <span class="token string">'resource-types.xml'</span><span class="token builtin class-name">.</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Client: Verifying our application has not requested <span class="token function">more</span> than the maximum memory capability of the cluster <span class="token punctuation">(</span><span class="token number">8192</span> MB per container<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Client: Will allocate AM container, with <span class="token number">1408</span> MB memory including <span class="token number">384</span> MB overhead
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Client: Setting up container launch context <span class="token keyword">for</span> our AM
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Client: Setting up the launch environment <span class="token keyword">for</span> our AM container
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Client: Preparing resources <span class="token keyword">for</span> our AM container
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Client: To <span class="token builtin class-name">enable</span> the AM to login from keytab, credentials are being copied over to the AM via the YARN Secure Distributed Cache.
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:32 INFO Client: Uploading resource file:/etc/security/keytabs/nn.service.keytab -<span class="token operator">&gt;</span> hdfs://bigdata0.example.com:8020/user/hdfs/.sparkStaging/application_1697089814250_0001/nn.service.keytab
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:34 WARN Client: Neither spark.yarn.jars nor spark.yarn.archive is set, falling back to uploading libraries under SPARK_HOME.
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:53:44 INFO Client: Uploading resource file:/tmp/spark-83cea039-6e72-4958-b097-4537a008e792/__spark_libs__1911433509069709237.zip -<span class="token operator">&gt;</span> hdfs://bigdata0.example.com:8020/user/hdfs/.sparkStaging/application_1697089814250_0001/__spark_libs__1911433509069709237.zip
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:16 INFO Client: Uploading resource file:/bigdata/spark-3.3.0-bin-hadoop3/examples/jars/spark-examples_2.12-3.3.0.jar -<span class="token operator">&gt;</span> hdfs://bigdata0.example.com:8020/user/hdfs/.sparkStaging/application_1697089814250_0001/spark-examples_2.12-3.3.0.jar
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:16 INFO Client: Uploading resource file:/tmp/spark-83cea039-6e72-4958-b097-4537a008e792/__spark_conf__8266642042189366964.zip -<span class="token operator">&gt;</span> hdfs://bigdata0.example.com:8020/user/hdfs/.sparkStaging/application_1697089814250_0001/__spark_conf__.zip
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO SecurityManager: Changing view acls to: root,hdfs
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO SecurityManager: Changing modify acls to: root,hdfs
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO SecurityManager: Changing view acls <span class="token function">groups</span> to:
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO SecurityManager: Changing modify acls <span class="token function">groups</span> to:
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO SecurityManager: SecurityManager: authentication disabled<span class="token punctuation">;</span> ui acls disabled<span class="token punctuation">;</span> <span class="token function">users</span>  with view permissions: Set<span class="token punctuation">(</span>root, hdfs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">groups</span> with view permissions: Set<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">users</span>  with modify permissions: Set<span class="token punctuation">(</span>root, hdfs<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token function">groups</span> with modify permissions: Set<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO HadoopDelegationTokenManager: Attempting to login to KDC using principal: nn/bigdata3.example.com@EXAMPLE.COM
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO HadoopDelegationTokenManager: Successfully logged into KDC.
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO HiveConf: Found configuration <span class="token function">file</span> null
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO HadoopFSDelegationTokenProvider: getting token for: DFS<span class="token punctuation">[</span>DFSClient<span class="token punctuation">[</span>clientName<span class="token operator">=</span>DFSClient_NONMAPREDUCE_1847188333_1, <span class="token assign-left variable">ugi</span><span class="token operator">=</span>nn/bigdata3.example.com@EXAMPLE.COM <span class="token punctuation">(</span>auth:KERBEROS<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> with renewer rm/bigdata0.example.com@EXAMPLE.COM
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO DFSClient: Created token <span class="token keyword">for</span> hdfs: HDFS_DELEGATION_TOKEN <span class="token assign-left variable">owner</span><span class="token operator">=</span>nn/bigdata3.example.com@EXAMPLE.COM, <span class="token assign-left variable">renewer</span><span class="token operator">=</span>yarn, <span class="token assign-left variable">realUser</span><span class="token operator">=</span>, <span class="token assign-left variable">issueDate</span><span class="token operator">=</span><span class="token number">1697090057412</span>, <span class="token assign-left variable">maxDate</span><span class="token operator">=</span><span class="token number">1697694857412</span>, <span class="token assign-left variable">sequenceNumber</span><span class="token operator">=</span><span class="token number">7</span>, <span class="token assign-left variable">masterKeyId</span><span class="token operator">=</span><span class="token number">8</span> on <span class="token number">192.168</span>.50.7:8020
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO HadoopFSDelegationTokenProvider: getting token for: DFS<span class="token punctuation">[</span>DFSClient<span class="token punctuation">[</span>clientName<span class="token operator">=</span>DFSClient_NONMAPREDUCE_1847188333_1, <span class="token assign-left variable">ugi</span><span class="token operator">=</span>nn/bigdata3.example.com@EXAMPLE.COM <span class="token punctuation">(</span>auth:KERBEROS<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span> with renewer nn/bigdata3.example.com@EXAMPLE.COM
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO DFSClient: Created token <span class="token keyword">for</span> hdfs: HDFS_DELEGATION_TOKEN <span class="token assign-left variable">owner</span><span class="token operator">=</span>nn/bigdata3.example.com@EXAMPLE.COM, <span class="token assign-left variable">renewer</span><span class="token operator">=</span>hdfs, <span class="token assign-left variable">realUser</span><span class="token operator">=</span>, <span class="token assign-left variable">issueDate</span><span class="token operator">=</span><span class="token number">1697090057438</span>, <span class="token assign-left variable">maxDate</span><span class="token operator">=</span><span class="token number">1697694857438</span>, <span class="token assign-left variable">sequenceNumber</span><span class="token operator">=</span><span class="token number">8</span>, <span class="token assign-left variable">masterKeyId</span><span class="token operator">=</span><span class="token number">8</span> on <span class="token number">192.168</span>.50.7:8020
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:17 INFO HadoopFSDelegationTokenProvider: Renewal interval is <span class="token number">86400032</span> <span class="token keyword">for</span> token HDFS_DELEGATION_TOKEN
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:19 INFO Client: Submitting application application_1697089814250_0001 to ResourceManager
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:21 INFO YarnClientImpl: Submitted application application_1697089814250_0001
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:22 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:22 INFO Client:
             client token: Token <span class="token punctuation">{<!-- --></span> kind: YARN_CLIENT_TOKEN, service:  <span class="token punctuation">}</span>
             diagnostics: N/A
             ApplicationMaster host: N/A
             ApplicationMaster RPC port: <span class="token parameter variable">-1</span>
             queue: root.hdfs
             start time: <span class="token number">1697090060093</span>
             final status: UNDEFINED
             tracking URL: https://bigdata0.example.com:8090/proxy/application_1697089814250_0001/
             user: hdfs
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:23 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:24 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:25 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:26 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:27 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:28 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:29 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:30 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:31 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:32 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:33 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:34 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:35 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:37 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:38 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:39 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:40 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:41 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:42 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:43 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:45 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:46 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:47 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:48 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:50 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:51 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:52 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:53 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:54 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:55 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:56 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:57 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:58 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:54:59 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:01 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:02 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:03 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:04 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:05 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:06 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:07 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:08 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:09 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:10 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:11 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:12 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:13 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:14 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:15 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:16 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:17 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:18 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:19 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:20 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:22 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:23 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:24 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:25 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:26 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:27 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:28 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: ACCEPTED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:29 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:29 INFO Client:
             client token: Token <span class="token punctuation">{<!-- --></span> kind: YARN_CLIENT_TOKEN, service:  <span class="token punctuation">}</span>
             diagnostics: N/A
             ApplicationMaster host: bigdata0.example.com
             ApplicationMaster RPC port: <span class="token number">35967</span>
             queue: root.hdfs
             start time: <span class="token number">1697090060093</span>
             final status: UNDEFINED
             tracking URL: https://bigdata0.example.com:8090/proxy/application_1697089814250_0001/
             user: hdfs
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:30 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:31 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:32 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:33 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:34 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:35 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:36 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:37 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:38 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:39 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:40 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:41 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:42 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:43 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:44 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:45 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:46 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:47 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:48 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:49 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:50 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:51 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:52 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:53 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:54 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:55 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:56 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:57 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:58 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:55:59 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:56:00 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:56:01 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: RUNNING<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:56:02 INFO Client: Application report <span class="token keyword">for</span> application_1697089814250_0001 <span class="token punctuation">(</span>state: FINISHED<span class="token punctuation">)</span>
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:56:02 INFO Client:
             client token: N/A
             diagnostics: N/A
             ApplicationMaster host: bigdata0.example.com
             ApplicationMaster RPC port: <span class="token number">35967</span>
             queue: root.hdfs
             start time: <span class="token number">1697090060093</span>
             final status: SUCCEEDED
             tracking URL: https://bigdata0.example.com:8090/proxy/application_1697089814250_0001/
             user: hdfs
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:56:02 INFO ShutdownHookManager: Shutdown hook called
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:56:02 INFO ShutdownHookManager: Deleting directory /tmp/spark-83cea039-6e72-4958-b097-4537a008e792
    <span class="token number">23</span>/10/12 <span class="token number">13</span>:56:02 INFO ShutdownHookManager: Deleting directory /tmp/spark-90b58a61-a7ef-43a9-b470-5c3fa4ea03ac
    <span class="token punctuation">[</span>root@bigdata3 spark-3.3.0-bin-hadoop3<span class="token punctuation">]</span><span class="token comment">#</span>
    ```
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/79b51f9bc29441e22c274fdc4e853350/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">洗衣机平台设计思路</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f768061ed1e157c81de2d14d1791f511/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Tensorflow2 中模型训练标签顺序和预测结果标签顺序不一致问题解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>