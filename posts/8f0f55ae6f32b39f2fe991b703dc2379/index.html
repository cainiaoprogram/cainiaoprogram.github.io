<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【用Python对全职高手小说分析分词词频词性，小说人物出场次数排序，小说中食物排序，小说人物关系等等】 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【用Python对全职高手小说分析分词词频词性，小说人物出场次数排序，小说中食物排序，小说人物关系等等】" />
<meta property="og:description" content="需求 根据第1部分自然语言处理教学内容，请选择一本你喜欢的小说，利用上课讲的但不限于授课内容，对该小说进行分析。比如分析该小说的分词，词频，词性，小说人物出场次数排序，小说中食物排序（这个得有，我喜欢吃），小说人物关系等等。
1、前期准备 1.1 导入库 1.2 小说、用户字典、食物清单、停用词等txt文档 和 字体simfang.ttf 以及词云用到的图片 以上资料自行百度下载 或者 自我总结
2、源码 &#39;&#39;&#39; Autor: 何邦渊 DateTime: 2022/3/20 21:24 IDE: PyCharm Function: 根据第1部分自然语言处理教学内容，请选择一本你喜欢的小说，利用上课讲的但不限于授课内容，对该小说进行分析。比如分析该小说的分词，词频， 词性，小说人物出场次数排序，小说中食物排序（这个得有，我喜欢吃），小说人物关系等等。 要求：1代码以py文件附件形式上传，有功能性注释和普通注释。 2.功能介绍和运行结果截图可以在作业里写上。 3.小说文件用txt形式存储。 4.最后视功能完整性给分. &#39;&#39;&#39; import random import networkx as nx from imageio import imread from wordcloud import WordCloud,ImageColorGenerator import jieba import jieba.posseg as pseg # 获取词性 from collections import Counter import matplotlib.pyplot as plt import numpy as np from matplotlib.font_manager import FontProperties # 去除词性为nr,但不是人名的词 excludes = [&#39;乐章&#39;,&#39;小姑娘&#39;,&#39;荣耀&#39;,&#39;易拉灌&#39;,&#39;易容术&#39;,&#39;明白&#39;,&#39;全明星&#39;,&#39;蓝溪阁&#39;,&#39;季后赛&#39;,&#39;本赛季&#39;,&#39;砰砰&#39;,&#39;和兴欣&#39;,&#39;上赛季&#39;,&#39;华丽&#39;,&#39;司仪&#39;, &#39;西风&#39;,&#39;连胜&#39;,&#39;银武&#39;,&#39;周旋&#39;,&#39;马踏&#39;,&#39;安静&#39;,&#39;大屏幕&#39;,&#39;和嘉世&#39;,&#39;修正&#39;,&#39;了兴欣&#39;,&#39;卫星&#39;,&#39;谢谢&#39;,&#39;呼啸山庄&#39;,&#39;马甲&#39;,&#39;明星&#39;,&#39;英勇&#39;, &#39;真是太&#39;,&#39;冷不丁&#39;,&#39;小精灵&#39;,&#39;高潮&#39;,&#39;太久&#39;,&#39;布阵&#39;,&#39;祝福&#39;,&#39;段时间&#39;,&#39;格斗&#39;,&#39;高水平&#39;,&#39;言语&#39;,&#39;别提&#39;,&#39;冷笑&#39;,&#39;晓枪&#39;,&#39;白痴&#39;,&#39;赛中&#39;, &#39;顾忌&#39;,&#39;越来越近&#39;,&#39;封锁&#39;,&#39;小镇&#39;,&#39;贡献度&#39;,&#39;高阶&#39;,&#39;嘉世&#39;] # 解决中文乱码，Python实现matplotlib显示中文的方法 plt." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8f0f55ae6f32b39f2fe991b703dc2379/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-29T20:09:40+08:00" />
<meta property="article:modified_time" content="2022-03-29T20:09:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【用Python对全职高手小说分析分词词频词性，小说人物出场次数排序，小说中食物排序，小说人物关系等等】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>需求</h2> 
<blockquote> 
 <p>根据第1部分自然语言处理教学内容，请选择一本你喜欢的小说，利用上课讲的但不限于授课内容，对该小说进行分析。比如分析该小说的分词，词频，词性，小说人物出场次数排序，小说中食物排序（这个得有，我喜欢吃），小说人物关系等等。</p> 
</blockquote> 
<h2><a id="1_4"></a>1、前期准备</h2> 
<h3><a id="11__5"></a>1.1 导入库</h3> 
<p><img src="https://images2.imgbox.com/03/7a/SOQoLSHV_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12_txt__simfangttf__7"></a>1.2 小说、用户字典、食物清单、停用词等txt文档 和 字体simfang.ttf 以及词云用到的图片</h3> 
<p><img src="https://images2.imgbox.com/c6/b3/4YiZfVc2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/01/97/ex4GLdmV_o.jpg" alt="词云图片"></p> 
<blockquote> 
 <p>以上资料自行百度下载 或者 自我总结</p> 
</blockquote> 
<h2><a id="2_12"></a>2、源码</h2> 
<pre><code class="prism language-python"><span class="token triple-quoted-string string">'''
Autor: 何邦渊 
DateTime: 2022/3/20 21:24
IDE: PyCharm  
Function: 根据第1部分自然语言处理教学内容，请选择一本你喜欢的小说，利用上课讲的但不限于授课内容，对该小说进行分析。比如分析该小说的分词，词频，
          词性，小说人物出场次数排序，小说中食物排序（这个得有，我喜欢吃），小说人物关系等等。
          要求：1代码以py文件附件形式上传，有功能性注释和普通注释。
          2.功能介绍和运行结果截图可以在作业里写上。
          3.小说文件用txt形式存储。
          4.最后视功能完整性给分.
'''</span>
<span class="token keyword">import</span> random
<span class="token keyword">import</span> networkx <span class="token keyword">as</span> nx
<span class="token keyword">from</span> imageio <span class="token keyword">import</span> imread
<span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud<span class="token punctuation">,</span>ImageColorGenerator
<span class="token keyword">import</span> jieba
<span class="token keyword">import</span> jieba<span class="token punctuation">.</span>posseg <span class="token keyword">as</span> pseg  <span class="token comment"># 获取词性</span>
<span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>font_manager <span class="token keyword">import</span> FontProperties

<span class="token comment"># 去除词性为nr,但不是人名的词</span>
excludes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'乐章'</span><span class="token punctuation">,</span><span class="token string">'小姑娘'</span><span class="token punctuation">,</span><span class="token string">'荣耀'</span><span class="token punctuation">,</span><span class="token string">'易拉灌'</span><span class="token punctuation">,</span><span class="token string">'易容术'</span><span class="token punctuation">,</span><span class="token string">'明白'</span><span class="token punctuation">,</span><span class="token string">'全明星'</span><span class="token punctuation">,</span><span class="token string">'蓝溪阁'</span><span class="token punctuation">,</span><span class="token string">'季后赛'</span><span class="token punctuation">,</span><span class="token string">'本赛季'</span><span class="token punctuation">,</span><span class="token string">'砰砰'</span><span class="token punctuation">,</span><span class="token string">'和兴欣'</span><span class="token punctuation">,</span><span class="token string">'上赛季'</span><span class="token punctuation">,</span><span class="token string">'华丽'</span><span class="token punctuation">,</span><span class="token string">'司仪'</span><span class="token punctuation">,</span>
            <span class="token string">'西风'</span><span class="token punctuation">,</span><span class="token string">'连胜'</span><span class="token punctuation">,</span><span class="token string">'银武'</span><span class="token punctuation">,</span><span class="token string">'周旋'</span><span class="token punctuation">,</span><span class="token string">'马踏'</span><span class="token punctuation">,</span><span class="token string">'安静'</span><span class="token punctuation">,</span><span class="token string">'大屏幕'</span><span class="token punctuation">,</span><span class="token string">'和嘉世'</span><span class="token punctuation">,</span><span class="token string">'修正'</span><span class="token punctuation">,</span><span class="token string">'了兴欣'</span><span class="token punctuation">,</span><span class="token string">'卫星'</span><span class="token punctuation">,</span><span class="token string">'谢谢'</span><span class="token punctuation">,</span><span class="token string">'呼啸山庄'</span><span class="token punctuation">,</span><span class="token string">'马甲'</span><span class="token punctuation">,</span><span class="token string">'明星'</span><span class="token punctuation">,</span><span class="token string">'英勇'</span><span class="token punctuation">,</span>
            <span class="token string">'真是太'</span><span class="token punctuation">,</span><span class="token string">'冷不丁'</span><span class="token punctuation">,</span><span class="token string">'小精灵'</span><span class="token punctuation">,</span><span class="token string">'高潮'</span><span class="token punctuation">,</span><span class="token string">'太久'</span><span class="token punctuation">,</span><span class="token string">'布阵'</span><span class="token punctuation">,</span><span class="token string">'祝福'</span><span class="token punctuation">,</span><span class="token string">'段时间'</span><span class="token punctuation">,</span><span class="token string">'格斗'</span><span class="token punctuation">,</span><span class="token string">'高水平'</span><span class="token punctuation">,</span><span class="token string">'言语'</span><span class="token punctuation">,</span><span class="token string">'别提'</span><span class="token punctuation">,</span><span class="token string">'冷笑'</span><span class="token punctuation">,</span><span class="token string">'晓枪'</span><span class="token punctuation">,</span><span class="token string">'白痴'</span><span class="token punctuation">,</span><span class="token string">'赛中'</span><span class="token punctuation">,</span>
            <span class="token string">'顾忌'</span><span class="token punctuation">,</span><span class="token string">'越来越近'</span><span class="token punctuation">,</span><span class="token string">'封锁'</span><span class="token punctuation">,</span><span class="token string">'小镇'</span><span class="token punctuation">,</span><span class="token string">'贡献度'</span><span class="token punctuation">,</span><span class="token string">'高阶'</span><span class="token punctuation">,</span><span class="token string">'嘉世'</span><span class="token punctuation">]</span>

<span class="token comment"># 解决中文乱码，Python实现matplotlib显示中文的方法</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'SimHei'</span><span class="token punctuation">]</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'axes.unicode_minus'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">False</span>
font <span class="token operator">=</span> FontProperties<span class="token punctuation">(</span>fname<span class="token operator">=</span><span class="token string">r"C:\Python\src\python与数据分析\simfang.ttf"</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">)</span>

<span class="token comment"># 打开文本,生成列表</span>
<span class="token keyword">def</span> <span class="token function">open_text</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">[</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">.</span>readlines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token comment"># 对句子进行中文分词,词频，词性,并生成去除停用词和字符的小说文本</span>
<span class="token keyword">def</span> <span class="token function">seg_depart</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>total<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 无符号文本</span>
    outstr <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token comment"># 创建一个停用词列表</span>
    stopwords <span class="token operator">=</span> open_text<span class="token punctuation">(</span><span class="token string">'.\stopword.txt'</span><span class="token punctuation">)</span>
    <span class="token comment"># 对文档中的每一行进行中文分词</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> text<span class="token punctuation">:</span>
        <span class="token keyword">for</span> line <span class="token keyword">in</span> text<span class="token punctuation">:</span>
            sentence_depart <span class="token operator">=</span> pseg<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> word<span class="token punctuation">,</span>flag <span class="token keyword">in</span> sentence_depart<span class="token punctuation">:</span>
                <span class="token keyword">if</span> word <span class="token keyword">not</span> <span class="token keyword">in</span> stopwords <span class="token keyword">and</span> word <span class="token operator">!=</span> <span class="token string">'\t'</span> <span class="token keyword">and</span> word <span class="token operator">!=</span> <span class="token string">''</span> <span class="token keyword">and</span> <span class="token builtin">len</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token operator">&gt;=</span><span class="token number">2</span> <span class="token keyword">and</span> word<span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token boolean">True</span><span class="token punctuation">:</span>
                    total<span class="token punctuation">[</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span>flag<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> total<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span>flag<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
                    outstr <span class="token operator">+=</span> word
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'./全职高手分词词频词性.txt'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> text1<span class="token punctuation">:</span>
        <span class="token keyword">for</span> key<span class="token punctuation">,</span>value <span class="token keyword">in</span> total<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            text1<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'%s,%s,%d\n'</span> <span class="token operator">%</span><span class="token punctuation">(</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>key<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'./纯净版全职高手.txt'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> text2<span class="token punctuation">:</span>
        text2<span class="token punctuation">.</span>write<span class="token punctuation">(</span>outstr<span class="token punctuation">)</span>
    <span class="token keyword">return</span> total

<span class="token comment"># 人物出场次数排序</span>
<span class="token keyword">def</span> <span class="token function">character_sequence</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sequence <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> key<span class="token punctuation">,</span>value <span class="token keyword">in</span> total<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> key<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">'nr'</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'叶修'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'君莫笑'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'叶修'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'苏沐橙'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'沐雨橙风'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'苏沐橙'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'方锐'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'海无量'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'方锐'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'唐柔'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'寒烟柔'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'唐柔'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'乔一帆'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'一寸灰'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'乔一帆'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'包荣兴'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'包子入侵'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'包荣兴'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'罗辑'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'昧光'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'罗辑'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'莫凡'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'毁人不倦'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'莫凡'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'安文逸'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'小手冰凉'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'安文逸'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'陈果'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'逐烟霞'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'陈果'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'魏琛'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'迎风布阵'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'魏琛'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'孙翔'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'一叶知秋'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'孙翔'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'韩文清'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'大漠孤烟'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span><span class="token string">'韩文清'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'喻文州'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'索克萨尔'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'喻文州'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">' 黄少天'</span> <span class="token keyword">or</span> key <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'夜雨声烦'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'黄少天'</span>
            <span class="token keyword">elif</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'王杰希'</span> <span class="token keyword">or</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'王不留行'</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> <span class="token string">'王杰希'</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                word <span class="token operator">=</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            <span class="token comment"># 字典的get方法，查找是否有键word,有则返回其对应键值，没有则返回后面的值0</span>
            sequence<span class="token punctuation">[</span>word<span class="token punctuation">]</span> <span class="token operator">=</span> sequence<span class="token punctuation">.</span>get<span class="token punctuation">(</span>word<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> value
    <span class="token comment"># 剔除掉已经找出的不是人名的多频率词</span>
    <span class="token keyword">for</span> word <span class="token keyword">in</span> excludes<span class="token punctuation">:</span>
        <span class="token keyword">if</span> sequence<span class="token punctuation">.</span>get<span class="token punctuation">(</span>word<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">del</span> sequence<span class="token punctuation">[</span>word<span class="token punctuation">]</span>
    <span class="token comment"># 根据字典值从大到小排序</span>
    sequence_new <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>sequence<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token operator">=</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span>x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'./全职高手人物出场次数排序.txt'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">for</span> name<span class="token punctuation">,</span>num <span class="token keyword">in</span> sequence_new<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'%s,%d\n'</span> <span class="token operator">%</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 小说食物排序</span>
<span class="token keyword">def</span> <span class="token function">food_sequence</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sequence <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    food <span class="token operator">=</span> open_text<span class="token punctuation">(</span><span class="token string">'./全职高手食物.txt'</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> key<span class="token punctuation">,</span>value <span class="token keyword">in</span> total<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">in</span> food<span class="token punctuation">:</span>
            sequence<span class="token punctuation">[</span>key<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'./全职高手食物排序.txt'</span><span class="token punctuation">,</span><span class="token string">'w'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">for</span> word<span class="token punctuation">,</span>value <span class="token keyword">in</span> sequence<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'%s,%d\n'</span> <span class="token operator">%</span><span class="token punctuation">(</span>word<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 随机生成颜色</span>
colorNum <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>open_text<span class="token punctuation">(</span><span class="token string">'./全职高手人物.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">randomcolor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    colorArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'3'</span><span class="token punctuation">,</span> <span class="token string">'4'</span><span class="token punctuation">,</span> <span class="token string">'5'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">,</span> <span class="token string">'9'</span><span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">]</span>
    color <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        color <span class="token operator">+=</span> colorArr<span class="token punctuation">[</span>random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> <span class="token string">"#"</span> <span class="token operator">+</span> color

<span class="token comment"># 颜色存储列表</span>
<span class="token keyword">def</span> <span class="token function">color_list</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    colorList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>colorNum<span class="token punctuation">)</span><span class="token punctuation">:</span>
        colorList<span class="token punctuation">.</span>append<span class="token punctuation">(</span>randomcolor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> colorList

<span class="token comment"># 生成人物关系图</span>
<span class="token keyword">def</span> <span class="token function">creat_relationship</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 人物节点颜色</span>
    colors <span class="token operator">=</span> color_list<span class="token punctuation">(</span><span class="token punctuation">)</span>
    Names <span class="token operator">=</span> open_text<span class="token punctuation">(</span><span class="token string">'./全职高手人物.txt'</span><span class="token punctuation">)</span>
    relations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token comment"># 按段落划分，假设在同一段落中出现的人物具有共现关系</span>
    lst_para <span class="token operator">=</span> open_text<span class="token punctuation">(</span>path<span class="token punctuation">)</span>  <span class="token comment"># lst_para是每一段</span>
    <span class="token keyword">for</span> text <span class="token keyword">in</span> lst_para<span class="token punctuation">:</span>
        <span class="token keyword">for</span> name_0 <span class="token keyword">in</span> Names<span class="token punctuation">:</span>
            <span class="token keyword">if</span> name_0 <span class="token keyword">in</span> text<span class="token punctuation">:</span>
                <span class="token keyword">for</span> name_1 <span class="token keyword">in</span> Names<span class="token punctuation">:</span>
                    <span class="token keyword">if</span> name_1 <span class="token keyword">in</span> text <span class="token keyword">and</span> name_0 <span class="token operator">!=</span> name_1 <span class="token keyword">and</span> <span class="token punctuation">(</span>name_1<span class="token punctuation">,</span> name_0<span class="token punctuation">)</span> <span class="token keyword">not</span> <span class="token keyword">in</span> relations<span class="token punctuation">:</span>
                        relations<span class="token punctuation">[</span><span class="token punctuation">(</span>name_0<span class="token punctuation">,</span> name_1<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> relations<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token punctuation">(</span>name_0<span class="token punctuation">,</span> name_1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>
    maxRela <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span>v <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> relations<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    relations <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>k<span class="token punctuation">:</span> v <span class="token operator">/</span> maxRela <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> relations<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token comment"># return relations</span>

    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 创建无多重边无向图</span>
    G <span class="token operator">=</span> nx<span class="token punctuation">.</span>Graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> k<span class="token punctuation">,</span> v <span class="token keyword">in</span> relations<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        G<span class="token punctuation">.</span>add_edge<span class="token punctuation">(</span>k<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> weight<span class="token operator">=</span>v<span class="token punctuation">)</span>
    <span class="token comment"># 筛选权重大于0.6的边</span>
    elarge <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token keyword">in</span> G<span class="token punctuation">.</span>edges<span class="token punctuation">(</span>data<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token keyword">if</span> d<span class="token punctuation">[</span><span class="token string">'weight'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0.6</span><span class="token punctuation">]</span>
    <span class="token comment"># 筛选权重大于0.3小于0.6的边</span>
    emidle <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token keyword">in</span> G<span class="token punctuation">.</span>edges<span class="token punctuation">(</span>data<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'weight'</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token punctuation">(</span>d<span class="token punctuation">[</span><span class="token string">'weight'</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token comment"># 筛选权重小于0.3的边</span>
    esmall <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token keyword">for</span> <span class="token punctuation">(</span>u<span class="token punctuation">,</span> v<span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token keyword">in</span> G<span class="token punctuation">.</span>edges<span class="token punctuation">(</span>data<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token keyword">if</span> d<span class="token punctuation">[</span><span class="token string">'weight'</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> <span class="token number">0.3</span><span class="token punctuation">]</span>
    <span class="token comment"># 设置图形布局</span>
    pos <span class="token operator">=</span> nx<span class="token punctuation">.</span>spring_layout<span class="token punctuation">(</span>G<span class="token punctuation">)</span>  <span class="token comment"># 用Fruchterman-Reingold算法排列节点（样子类似多中心放射状）</span>
    <span class="token comment"># 设置节点样式</span>
    nx<span class="token punctuation">.</span>draw_networkx_nodes<span class="token punctuation">(</span>G<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.8</span><span class="token punctuation">,</span> node_size<span class="token operator">=</span><span class="token number">1300</span><span class="token punctuation">,</span> node_color<span class="token operator">=</span>colors<span class="token punctuation">)</span>
    <span class="token comment"># 设置大于0.6的边的样式</span>
    nx<span class="token punctuation">.</span>draw_networkx_edges<span class="token punctuation">(</span>G<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> edgelist<span class="token operator">=</span>elarge<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">2.5</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.9</span><span class="token punctuation">,</span> edge_color<span class="token operator">=</span><span class="token string">'g'</span><span class="token punctuation">)</span>
    <span class="token comment"># 0.3~0.6</span>
    nx<span class="token punctuation">.</span>draw_networkx_edges<span class="token punctuation">(</span>G<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> edgelist<span class="token operator">=</span>emidle<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">1.5</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">,</span> edge_color<span class="token operator">=</span><span class="token string">'y'</span><span class="token punctuation">)</span>
    <span class="token comment"># &lt;0.3</span>
    nx<span class="token punctuation">.</span>draw_networkx_edges<span class="token punctuation">(</span>G<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> edgelist<span class="token operator">=</span>esmall<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> alpha<span class="token operator">=</span><span class="token number">0.4</span><span class="token punctuation">,</span> edge_color<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">,</span> style<span class="token operator">=</span><span class="token string">'dashed'</span><span class="token punctuation">)</span>
    nx<span class="token punctuation">.</span>draw_networkx_labels<span class="token punctuation">(</span>G<span class="token punctuation">,</span> pos<span class="token punctuation">,</span> font_size<span class="token operator">=</span><span class="token number">14</span><span class="token punctuation">)</span>

    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"《全职高手》主要人物社交关系网络图"</span><span class="token punctuation">)</span>
    <span class="token comment"># 关闭坐标轴</span>
    plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">'off'</span><span class="token punctuation">)</span>

    <span class="token comment"># 保存图表</span>
    plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'./全职高手人物关系图'</span><span class="token punctuation">,</span> bbox_inches<span class="token operator">=</span><span class="token string">'tight'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 生成词云</span>
<span class="token keyword">def</span> <span class="token function">GetWordCloud</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    path_txt <span class="token operator">=</span> <span class="token string">'./纯净版全职高手.txt'</span>
    path_img <span class="token operator">=</span> <span class="token string">'./动漫.jpg'</span>
    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>path_txt<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
    background_image <span class="token operator">=</span> imread<span class="token punctuation">(</span>path_img<span class="token punctuation">)</span>
    <span class="token comment"># background_image = np.array(Image.open(path_img))</span>
    cut_text <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>jieba<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 设置词云参数</span>
    wordcloud <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>
        background_color<span class="token operator">=</span><span class="token string">"white"</span><span class="token punctuation">,</span>  <span class="token comment"># 设置背景颜色</span>
        mask <span class="token operator">=</span> background_image<span class="token punctuation">,</span>  <span class="token comment">#设置背景图片</span>
        max_words<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span>  <span class="token comment">#</span>
        width<span class="token operator">=</span><span class="token number">600</span><span class="token punctuation">,</span>
        height<span class="token operator">=</span><span class="token number">800</span><span class="token punctuation">,</span>
        <span class="token comment"># stopwords = "", #设置停用词</span>
        font_path<span class="token operator">=</span><span class="token string">"./simfang.ttf"</span><span class="token punctuation">,</span>
        <span class="token comment"># 设置中文字体，使得词云可以显示（词云默认字体是“DroidSansMono.ttf字体库”，不支持中文），不加这个的话显示口型乱码</span>
        max_font_size<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>  <span class="token comment"># 设置字体最大值</span>
        min_font_size<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span>
        random_state<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">,</span>  <span class="token comment"># 设置有多少种配色方案</span>
        margin<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token comment"># 生成词云</span>
    wc <span class="token operator">=</span> wordcloud<span class="token punctuation">.</span>generate<span class="token punctuation">(</span>cut_text<span class="token punctuation">)</span>
    <span class="token comment"># 展示词云图</span>
    <span class="token comment"># 生成颜色值</span>
    image_colors <span class="token operator">=</span> ImageColorGenerator<span class="token punctuation">(</span>background_image<span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>wordcloud<span class="token punctuation">.</span>recolor<span class="token punctuation">(</span>color_func<span class="token operator">=</span>image_colors<span class="token punctuation">)</span><span class="token punctuation">,</span> interpolation<span class="token operator">=</span><span class="token string">"bilinear"</span><span class="token punctuation">)</span>
    <span class="token comment"># 关闭坐标系</span>
    plt<span class="token punctuation">.</span>axis<span class="token punctuation">(</span><span class="token string">"off"</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    wc<span class="token punctuation">.</span>to_file<span class="token punctuation">(</span><span class="token string">'./wordcloud.jpg'</span><span class="token punctuation">)</span>  <span class="token comment"># 保存图片</span>

<span class="token comment"># 分词,词频,词性的可视化图</span>
<span class="token keyword">def</span> <span class="token function">create_wordPhotograph</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 创建绘图对象，figsize参数可以指定绘图对象的宽度和高度，单位为英寸，一英寸=80px</span>
    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    Y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    sign <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    c <span class="token operator">=</span> Counter<span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token comment"># x,y的值</span>
    <span class="token keyword">for</span> word<span class="token punctuation">,</span>num <span class="token keyword">in</span> c<span class="token punctuation">:</span>
        Y<span class="token punctuation">.</span>append<span class="token punctuation">(</span>num<span class="token punctuation">)</span>
        sign<span class="token punctuation">.</span>append<span class="token punctuation">(</span>word<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token string">"_"</span><span class="token operator">+</span>word<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> Y<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sign<span class="token punctuation">)</span>
    i <span class="token operator">=</span> <span class="token number">0</span>
    X <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token comment"># 在每个柱体上方显示数量</span>
    <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> Y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">0.15</span><span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token string">'%d'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>Y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">)</span>
        i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token comment"># 横坐标解释</span>
    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">u"分词词性Top10"</span><span class="token punctuation">)</span>
    <span class="token comment"># 纵坐标解释</span>
    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">u"词频数"</span><span class="token punctuation">)</span>
    <span class="token comment"># 图标题</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">u"分词词频词性可视化图"</span><span class="token punctuation">)</span>
    <span class="token comment"># 保存图</span>
    plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'./分词词频词性可视化图.jpg'</span><span class="token punctuation">,</span>bbox_inches<span class="token operator">=</span><span class="token string">'tight'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 人物出场次序排序可视化图</span>
<span class="token keyword">def</span> <span class="token function">create_CharacterPhotograph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 创建绘图对象，figsize参数可以指定绘图对象的宽度和高度，单位为英寸，一英寸=80px</span>
    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    Y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    sign <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    i <span class="token operator">=</span> <span class="token number">0</span>
    text <span class="token operator">=</span> open_text<span class="token punctuation">(</span><span class="token string">'./全职高手人物出场次数排序.txt'</span><span class="token punctuation">)</span>
    <span class="token comment"># x,y的值</span>
    <span class="token keyword">for</span> t <span class="token keyword">in</span> text<span class="token punctuation">:</span>
        <span class="token keyword">if</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">:</span>
            tt <span class="token operator">=</span> t<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
            Y<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>tt<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            sign<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            i<span class="token operator">+=</span><span class="token number">1</span>
    plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">,</span> Y<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sign<span class="token punctuation">)</span>
    i <span class="token operator">=</span> <span class="token number">0</span>
    X <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token comment"># 在每个柱体上方显示数量</span>
    <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> Y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">0.15</span><span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token string">'%d'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>Y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">)</span>
        i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token comment"># 横坐标解释</span>
    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">u"出场人物Top10"</span><span class="token punctuation">)</span>
    <span class="token comment"># 纵坐标解释</span>
    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">u"出场次数"</span><span class="token punctuation">)</span>
    <span class="token comment"># 图标题</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">u"人物出场次序排序可视化图"</span><span class="token punctuation">)</span>
    <span class="token comment"># 保存图</span>
    plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'./人物出场次序排序可视化图.jpg'</span><span class="token punctuation">,</span>bbox_inches<span class="token operator">=</span><span class="token string">'tight'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 小说食物排序可视化图</span>
<span class="token keyword">def</span> <span class="token function">create_foodPhotograph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 创建绘图对象，figsize参数可以指定绘图对象的宽度和高度，单位为英寸，一英寸=80px</span>
    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    Y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    sign <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    i <span class="token operator">=</span> <span class="token number">0</span>
    text <span class="token operator">=</span> open_text<span class="token punctuation">(</span><span class="token string">'./全职高手食物排序.txt'</span><span class="token punctuation">)</span>
    <span class="token comment"># x,y的值</span>
    <span class="token keyword">for</span> t <span class="token keyword">in</span> text<span class="token punctuation">:</span>
        <span class="token keyword">if</span> i <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
            tt <span class="token operator">=</span> t<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span>
            Y<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>tt<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            sign<span class="token punctuation">.</span>append<span class="token punctuation">(</span>tt<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            i <span class="token operator">+=</span> <span class="token number">1</span>
    plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Y<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">0.3</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'red'</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> sign<span class="token punctuation">)</span>
    i <span class="token operator">=</span> <span class="token number">0</span>
    X <span class="token operator">=</span> np<span class="token punctuation">.</span>arange<span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># 在每个柱体上方显示数量</span>
    <span class="token keyword">for</span> x<span class="token punctuation">,</span> y <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>X<span class="token punctuation">,</span> Y<span class="token punctuation">)</span><span class="token punctuation">:</span>
        plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">0.15</span><span class="token punctuation">,</span> y <span class="token operator">+</span> <span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token string">'%d'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>Y<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">)</span>
        i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token comment"># 横坐标解释</span>
    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">u"出场食物名"</span><span class="token punctuation">)</span>
    <span class="token comment"># 纵坐标解释</span>
    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">u"出场次数"</span><span class="token punctuation">)</span>
    <span class="token comment"># 图标题</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">u"食物出场排序可视化图"</span><span class="token punctuation">)</span>
    <span class="token comment"># 保存图</span>
    plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'./食物出场排序可视化图.jpg'</span><span class="token punctuation">,</span> bbox_inches<span class="token operator">=</span><span class="token string">'tight'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    total <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    <span class="token comment"># 加载用户字典</span>
    jieba<span class="token punctuation">.</span>load_userdict<span class="token punctuation">(</span><span class="token string">"./全职高手用户字典.txt"</span><span class="token punctuation">)</span>
    <span class="token comment"># 分词后存入字典</span>
    total <span class="token operator">=</span> seg_depart<span class="token punctuation">(</span><span class="token string">"./全职高手.txt"</span><span class="token punctuation">,</span>total<span class="token punctuation">)</span>
    <span class="token comment"># 人物出场次数排序，存入txt</span>
    character_sequence<span class="token punctuation">(</span>total<span class="token punctuation">)</span>
    <span class="token comment"># 食物出场排序，存入txt</span>
    food_sequence<span class="token punctuation">(</span>total<span class="token punctuation">)</span>
    <span class="token comment"># 生成主要人物关系图</span>
    creat_relationship<span class="token punctuation">(</span><span class="token string">"./全职高手.txt"</span><span class="token punctuation">)</span>
    <span class="token comment"># 生成词云</span>
    GetWordCloud<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 生成分词词频词性可视化图</span>
    create_wordPhotograph<span class="token punctuation">(</span>total<span class="token punctuation">)</span>
    <span class="token comment"># 生成出场人物可视化图</span>
    create_CharacterPhotograph<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 生成食物可视化图</span>
    create_foodPhotograph<span class="token punctuation">(</span><span class="token punctuation">)</span>
main<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<h2><a id="3_354"></a>3、运行结果</h2> 
<h3><a id="31_txt_355"></a>3.1 全职高手分词词频词性.txt</h3> 
<p><img src="https://images2.imgbox.com/3b/c6/jWvHhfyE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_txt_357"></a>3.2 全职高手人物出场次数排序.txt</h3> 
<p><img src="https://images2.imgbox.com/d8/7f/gq68AmkO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33_txt_359"></a>3.3 全职高手食物排序.txt</h3> 
<p><img src="https://images2.imgbox.com/87/ec/oLP40x03_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="34_png_361"></a>3.4 全职高手人物关系图.png</h3> 
<p><img src="https://images2.imgbox.com/7d/31/7zb92ToK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="35__363"></a>3.5 词云</h3> 
<p><img src="https://images2.imgbox.com/ce/16/HMRnEb1X_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="36_jpg_365"></a>3.6 分词词频词性可视化图.jpg</h3> 
<p><img src="https://images2.imgbox.com/50/7f/Oexg0giA_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="37_jpg_367"></a>3.7 人物出场次序排序可视化图.jpg</h3> 
<p><img src="https://images2.imgbox.com/58/11/ZvGwJeSu_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="38_jpg_369"></a>3.8 食物出场排序可视化图.jpg</h3> 
<p><img src="https://images2.imgbox.com/0f/7e/uxlQZAXg_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/501d6bc6452a15d20e97aad5a6f9f8a0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最原始版匿名四轴无人机代码注释</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5e399ef17f09d1114b167bbe4ded1ebf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ubuntu下安装Python</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>