<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# 如何使用？、? 和 ??的区别和使用案例 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C# 如何使用？、? 和 ??的区别和使用案例" />
<meta property="og:description" content="目录
? 运算符
使用案例
?? 运算符
使用案例
总结
在 C# 中，? 和 ?? 运算符在处理 null 值时起着不同的作用，并且具有特定的使用场景。
? 运算符 ? 运算符，也称为空条件运算符，在 C# 6.0 及更高版本中引入。它允许你在不进行显式类型转换的情况下检查引用类型的变量是否为 null。如果变量为 null，则整个表达式的结果也是 null，并且不会执行 ? 之后的代码块。这有助于避免空引用异常。
使用案例 假设我们有一个方法，该方法返回一个字符串，或者在某些情况下返回 null：
string GetNullableString(); 如果我们想在返回的字符串上调用一个方法（例如 .Length），直接调用可能会引发异常，因为如果返回的是 null，尝试获取其长度会导致空引用异常。使用 ? 运算符可以安全地解决这个问题：
string result = GetNullableString()?.Length; 如果 GetNullableString() 返回 null，则整个表达式的结果也是 null，不会尝试访问 Length 属性。
?? 运算符 ?? 运算符是一个逻辑运算符，也称为空合并运算符。当左侧的操作数为 null 时，它返回右侧的操作数作为结果。如果左侧的操作数不为 null，则返回左侧的操作数。它通常用于为可能为 null 的变量提供一个默认值。
使用案例 假设我们有一个字符串变量，可能没有初始化：
string someString; 如果直接访问这个变量的长度，因为它是 null，会抛出空引用异常。我们可以使用 ?? 运算符来提供一个默认值：
int length = someString ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/0ae27973961665424496539eed1127be/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-30T11:09:02+08:00" />
<meta property="article:modified_time" content="2023-12-30T11:09:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# 如何使用？、? 和 ??的区别和使用案例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%3F%C2%A0%E8%BF%90%E7%AE%97%E7%AC%A6-toc" style="margin-left:80px;"><a href="#%3F%C2%A0%E8%BF%90%E7%AE%97%E7%AC%A6" rel="nofollow">? 运算符</a></p> 
<p id="%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B-toc" style="margin-left:120px;"><a href="#%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B" rel="nofollow">使用案例</a></p> 
<p id="%3F%3F%C2%A0%E8%BF%90%E7%AE%97%E7%AC%A6-toc" style="margin-left:80px;"><a href="#%3F%3F%C2%A0%E8%BF%90%E7%AE%97%E7%AC%A6" rel="nofollow">?? 运算符</a></p> 
<p id="%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B-toc" style="margin-left:120px;"><a href="#%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B" rel="nofollow">使用案例</a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:80px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p>在 C# 中，<code>?</code> 和 <code>??</code> 运算符在处理 <code>null</code> 值时起着不同的作用，并且具有特定的使用场景。</p> 
<h4 id="%3F%C2%A0%E8%BF%90%E7%AE%97%E7%AC%A6"><code>?</code> 运算符</h4> 
<p><code>?</code> 运算符，也称为空条件运算符，在 C# 6.0 及更高版本中引入。它允许你在不进行显式类型转换的情况下检查引用类型的变量是否为 <code>null</code>。如果变量为 <code>null</code>，则整个表达式的结果也是 <code>null</code>，并且不会执行 <code>?</code> 之后的代码块。这有助于避免空引用异常。</p> 
<h5 id="%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B">使用案例</h5> 
<p>假设我们有一个方法，该方法返回一个字符串，或者在某些情况下返回 <code>null</code>：</p> 
<table><tbody><tr><td></td><td><code>string GetNullableString();</code></td></tr></tbody></table> 
<p>如果我们想在返回的字符串上调用一个方法（例如 <code>.Length</code>），直接调用可能会引发异常，因为如果返回的是 <code>null</code>，尝试获取其长度会导致空引用异常。使用 <code>?</code> 运算符可以安全地解决这个问题：</p> 
<table><tbody><tr><td></td><td><code>string result = GetNullableString()?.Length;</code></td></tr></tbody></table> 
<p>如果 <code>GetNullableString()</code> 返回 <code>null</code>，则整个表达式的结果也是 <code>null</code>，不会尝试访问 <code>Length</code> 属性。</p> 
<p></p> 
<h4 id="%3F%3F%C2%A0%E8%BF%90%E7%AE%97%E7%AC%A6"><code>??</code> 运算符</h4> 
<p><code>??</code> 运算符是一个逻辑运算符，也称为空合并运算符。当左侧的操作数为 <code>null</code> 时，它返回右侧的操作数作为结果。如果左侧的操作数不为 <code>null</code>，则返回左侧的操作数。它通常用于为可能为 <code>null</code> 的变量提供一个默认值。</p> 
<h5>使用案例</h5> 
<p>假设我们有一个字符串变量，可能没有初始化：</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>string someString;</code></td></tr></tbody></table> 
<p>如果直接访问这个变量的长度，因为它是 <code>null</code>，会抛出空引用异常。我们可以使用 <code>??</code> 运算符来提供一个默认值：</p> 
<table><tbody><tr><td></td><td><code>int length = someString ?? "default".Length;</code></td></tr></tbody></table> 
<p>如果 <code>someString</code> 是 <code>null</code>，则整个表达式的结果是 <code>0</code>（因为 <code>.Length</code> 会返回字符串的长度），否则是 <code>someString.Length</code> 的值。</p> 
<p></p> 
<p><strong>可空类型修饰符 (?)</strong></p> 
<p></p> 
<ul><li>这个符号用于声明一个可空引用类型或值类型。当应用于引用类型时（如 <code>string?</code>），它表示该变量可以存储 null 值，而不仅仅是非空引用。</li><li>使用案例： <p><code>string? nullableString = null; // 可以为 null 的字符串</code></p> </li><li> <p></p> </li></ul> 
<p>当然，可空类型修饰符 (?) 在 C# 中的应用不仅仅局限于声明可以为 null 的变量，还可以结合 null-conditional 运算符一起使用，进行更便捷的条件访问和方法调用。这里有一个例子：<br>  </p> 
<pre><code>int? value = GetNullableInt(); // 假设这个方法可能返回一个整数或 null

// 使用 null-conditional 运算符 ?. 来安全地访问成员或调用方法
// 如果 value 为 null，则整个表达式结果也为 null，不会抛出 NullReferenceException
int? doubledValue = value?.GetValueOrDefault() * 2;

// 或者在链式调用中使用它来避免空引用异常
string message = value.HasValue ? $"The value is {value.Value}" : "No value provided";
string safeMessage = value?.ToString() ?? "No value provided"; // 如果 value 为 null，则使用默认消息

// 对于集合类，也可以安全检查其元素
List&lt;int&gt;? numbers = GetNullableListOfNumbers();
int firstNumberOrDefault = numbers?.FirstOrDefault(); // 如果 numbers 为 null，则结果为 null
```</code></pre> 
<p>在这段代码中，`?.` 是 null-conditional 运算符，与可空类型修饰符一同作用时，它允许我们在访问成员或调用方法时进行安全的条件检查，如果前面的对象是 null，则整个表达式会立即停止计算并返回 null，而不会尝试对 null 引用执行操作导致运行时错误。</p> 
<p></p> 
<h4 id="%E6%80%BB%E7%BB%93">总结</h4> 
<ul><li><strong><code>?</code> 运算符</strong>：用于安全地检查引用类型变量是否为 <code>null</code>，并避免执行可能引发异常的代码块。如果变量为 <code>null</code>，整个表达式的结果也是 <code>null</code>。</li><li><strong><code>??</code> 运算符</strong>：用于为可能为 <code>null</code> 的变量提供一个默认值。如果左侧的操作数为 <code>null</code>，则返回右侧的操作数作为结果。</li><li><strong>可空类型修饰符 </strong>：这个符号用于声明一个可空引用类型或值类型，表示该变量可以存储 null 值，而不仅仅是非空引用<img alt="" height="568" src="https://images2.imgbox.com/9a/e3/XY487e9F_o.png" width="970"></li></ul> 
<h2></h2> 
<p></p> 
<p>欢迎阅读：</p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135201319" title="50个开发必备的Python经典脚本(1-10)">50个开发必备的Python经典脚本(1-10)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135220796" title="50个开发必备的Python经典脚本(11-20)">50个开发必备的Python经典脚本(11-20)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135220906" title="50个开发必备的Python经典脚本(21-30)">50个开发必备的Python经典脚本(21-30)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135222295" title="50个开发必备的Python经典脚本(31-40)">50个开发必备的Python经典脚本(31-40)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135222681" title="50个开发必备的Python经典脚本(41-50)">50个开发必备的Python经典脚本(41-50)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135201319" title="50个开发必备的Python经典脚本(1-10)">50个开发必备的Python经典脚本(1-10)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135220796" title="50个开发必备的Python经典脚本(11-20)">50个开发必备的Python经典脚本(11-20)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135220906" title="50个开发必备的Python经典脚本(21-30)">50个开发必备的Python经典脚本(21-30)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135222295" title="50个开发必备的Python经典脚本(31-40)">50个开发必备的Python经典脚本(31-40)</a></u></u></u></u></p> 
<p><u><u><u><u><a href="https://blog.csdn.net/qqrrjj2011/article/details/135222681" title="50个开发必备的Python经典脚本(41-50)">50个开发必备的Python经典脚本(41-50)</a></u></u></u></u></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/369cf41a14965d3983239d951879c1f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">安全认证【八】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/21b05858abf6a5743f1b50c9eaf71804/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">做数据关键步骤：怎么写好prompt？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>