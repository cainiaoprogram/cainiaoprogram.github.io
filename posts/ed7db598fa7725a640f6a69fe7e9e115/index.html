<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LTE物理层过程--小区搜网、随机接入、功率控制、测量、数据传输 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LTE物理层过程--小区搜网、随机接入、功率控制、测量、数据传输" />
<meta property="og:description" content="前言 终端和网络进行通讯需要进行哪些物理层的交互呢？
终端需要搜索到服务自己的网络，然后接入网络，这就涉及小区搜索过程和随机接入过程；在交互过程中，终端和网络都需将功率调节到合适的大小，以增强覆盖或抑制干扰，这就是功率控制过程；网络想找到某一个终端，以期与其建立业务连接，这就是寻呼过程；网络的自适应能力依赖于对无线环境的精确感知，测量过程为网络的自适应提供依据；终端和网络的有用信息交互，依赖于共享信道的物理层过程。
LTE中按照上行和下行来分：
下行物理层过程有：小区搜索过程、下行功率控制、寻呼过程、手机下行测量过程、下行共享信道物理过程。
上行物理层过程有：随机接入过程、上行功率控制、基站上行测量过程、上行共享信道物理过程。
1、小区搜索过程 终端和基站建立无线通信链路的前提是必须先进行小区搜索。具体是在以下两种情况：一是用户开机，二是小区切换。
在LTE中，用户终端开机或小区切换时，需要和小区取得新的联系，和小区的时频保持同步，获取小区的必要信息。
小区搜索过程中，用户UE要达到以下三个目的：
下行同步：符号定时、帧定时、频率同步。小区的标识号（ID）获取。广播信道（BCH）的解调信息获取。 BCH信道广播的信息有：小区的传输带宽（LTE中各小区传输带宽不固定）、发射天线的配置信息（每个基站天线数目可能不一致）、循环前缀（CP）的长度（单播、多播业务CP长度不同）等。
1.1、 三个信道、四个步骤 UE完成小区搜索过程需要借助三个信道：
同步信道（SS、SCH）包括：主同步信道（PSS、P-SCH）和从同步信道（SSS、S-SCH）；参考信道（RS）；广播信道（BCH）。 小区的搜索过程分为以下四个步骤：
第一步：从PSS信道上获取小区的组内ID；第二步：从SSS信道上获取小区组号，范围是0~167；协议规定了3个PSS信号，使用长度为62的频域Zadoff-Chu（ZC序列，较好的自相关特性和较低峰均比），分别对应小区组内ID；SSS信号则使用二进制M序列，有168种组合，与168个物理层小区标识组对应。所以UE把PSS和SSS接收下来后就可以确定小区标识。先获取组内顺序号，再获取小区组的顺序号。第三步：UE接收下行参考信号（DL-RS），用来进行精确的时频同步。DL-RS是UE获取信道估计信息的指示灯。对于频率偏差、时间提前量、链路衰落情况，UE从这里了解清楚，然后在时间和频率上紧跟基站的步伐。第四步：UE接收小区广播信息。完成前三步后UE就完成了和基站的时频同步，可以接受基站的面向小区内所有UE的广播信号。有需要就听一下，从广播信号上可以获得下行系统带宽值，天线配置，本小区的系统帧号等。 以往无线制式下行系统带宽和天线配置是定死的。在LTE中得益于OFDM、MIMO，配置是灵活的，但增加了这部分信令开销。
1.2、 在合适的位置寻找合适的信息 SS信号和BCH信道是小区搜索时UE最先捕获的物理信道。因此必须保证用户在没有任何先验信息情况下能够得到这些信息。办法就是：在时域和频域上安排固定位置。
如之前的文章，同步信号每个帧发送两次，PSS和SSS在时域上的位置TDD和FDD不一样。FDD中，PSS、SSS分别在第0个和第5个子帧的第一个时隙的最后两个符号位置上。TDD中，PSS在DwPTS上，SSS在第0个子帧的第1#时隙的最后一个符号上。BCH在SS之后被用户接收，因此二者须有一个固定的时间间隔τ，如图所示：
每个下行帧，SS和BCH可以发送多次，SS和BCH数目也可不同，对于BCH出现的时间位置，终端需要知道，否则无法找到它。
不管小区总传输带宽多大，SCH信道和BCH信道只在小区传输带宽的中心位置传输，而且SCH、BCH总是占用相同的带宽（1.25MHz）.其中有用子载波数目是64个，中间有一个直流子载波（DC）。
在小区搜索的开始，监测系统的中心带宽为1.25MHz。利用同步信道进行下行同步，获取小区标识；然后还是在这1.25Mhz中心带宽上，接收BCH相关的解调信息。UE从BCH的解调信息中获取了分配的系统带宽，然后将工作带宽偏移到指定的频带位置上，至此才可以进行数据传输，整个过程如图所示。
2、随机接入过程 随机接入过程主要完成用户信息在网络侧的初始注册。通过小区搜索，用户知道了网络侧的信息；而通过随机接入，网络侧又知道了用户的必要信息。
和UMTS随机接入过程不同，LTE的随机接入过程不仅完成用户信息的初始注册，还需要完成上行时频同步（Time Advance，时间提前量，TA）与用户上行带宽资源的申请。
在LTE中，上行时频同步和重新申请上行带宽资源，都需要启动随机接入过程来完成。大致来说启动随机接入过程的场景有以下三种：开机、UE从空闲状态到连接态、小区切换。
根据接入时终端的同步状态不同，随机接入过程可分为同步的随机接入和非同步的随机接入。同步的随机接入过程已经处于同步状态，没有上行同步的目的，主要的目的只是上行带宽资源的申请。
非同步随机接入是在用户UE没有上行同步、或者失去上行同步时，需要和网络侧请求资源分配时所使用的接入过程。
2.1 Preamble结构 上行失步情况下，终端和网络侧都不知道彼此间的距离，容易导致基站的上行接收窗错位。这就要求时域采用特殊的Preamble结构（加CP）来克服可能的时间窗错位。
随机接入在接入用户数目较多时基于竞争会发生严重的冲突碰撞，降低系统容量。一般采用基于资源预留的接入机制。在随机接入过程中一定要选用冲突概率小、相关性较低的同步序列，做上行同步。
随机接入前导消息Preamble的位置，在时域上是可配置的，在频域上一般位于PUCCH信道的内侧，如图所示。
2.2、 LTE与UMTS随机接入过程对比 对于物理层来讲，物理层的随机接入过程包含两个步骤：
发送：UE发送随机接入Preamble；
应答：eUTRAN对随机接入的响应。
UE物理层首先要从高层（传输层的RACH信道）获取随机接入的PRACH信道参数，包括：
（1）PRACH信道配置信息（时域、频域上的信道结构信息）；
（2）前导Preamble格式（前导用于上行时钟对齐和UE识别符，系统规定其由Zadoff-Chu序列产生）；
（3）前导发射功率；
（4）Preamble根序列及其循环位移参数（小区用来解调前导消息）。
UMTS随机接入信道（PRACH）（上行）包括前导消息（Preamble）、正交消息部分（Message），如图所示
在LTE中，随机接入信道（PRACH）只包括前导消息（Preamble），但较UMTS的前导消息内涵更加丰富一些。正文消息部分是在共享信道PUSCH上进行传输，不属于PRACH的一部分。物理层随机接入过程不包括正文消息的发送过程。
LTE基站给终端随机接入的应答，也不像UMTS中简单地回应一个AI，而是有丰富内涵的一个回应，由PDCCH（指示是否有回应）和PDSCH（指示回应的具体内容），如图所示。
基站通过PDSCH信道告知UE随机接入允许的内容（UL-SCH grant），这个内容需要传给UE的传输层在共享SCH信道上才能解析。随机接入响应准许（UL-SCH grant）包括：无限资源RB指派情况、调制编码信息、功率控制命令、是否请求CQI等信息。UE根据随机接入响应准许的要求，在上行PUSCH信道上发送随机接入的消息部分。
随机接入的具体过程如下：
（1）UE高层请求触发物理层随机接入过程。
高层在请求中指示Preamble index、Preamble 目标接收功率、相关的RA-RNTI（Random Access Radio Network Temporary Indentifier，随机接入无线网络临时标识），以及随机接入信道的资源情况等信息。
（2）UE决定随机接入信道的发射功率。
由于随机接入在与网络侧建立联系之前发生，因此采用开环功率控制。终端在PARCH信道发射随机接入前导消息（Preamble）时，自己根据高层指示计算一个发射功率，如下式：
发射功率 = preamble的目标接收功率&#43;路径损耗" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ed7db598fa7725a640f6a69fe7e9e115/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-20T22:20:31+08:00" />
<meta property="article:modified_time" content="2020-01-20T22:20:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LTE物理层过程--小区搜网、随机接入、功率控制、测量、数据传输</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言</h2> 
<p>        终端和网络进行通讯需要进行哪些物理层的交互呢？</p> 
<p>       终端需要搜索到服务自己的网络，然后接入网络，这就涉及小区搜索过程和随机接入过程；在交互过程中，终端和网络都需将功率调节到合适的大小，以增强覆盖或抑制干扰，这就是功率控制过程；网络想找到某一个终端，以期与其建立业务连接，这就是寻呼过程；网络的自适应能力依赖于对无线环境的精确感知，测量过程为网络的自适应提供依据；终端和网络的有用信息交互，依赖于共享信道的物理层过程。</p> 
<p>       LTE中按照上行和下行来分：</p> 
<p><strong><em>下行物理层</em></strong>过程有：小区搜索过程、下行功率控制、寻呼过程、手机下行测量过程、下行共享信道物理过程。</p> 
<p><strong><em>上行物理层</em></strong>过程有：随机接入过程、上行功率控制、基站上行测量过程、上行共享信道物理过程。</p> 
<h2>1、小区搜索过程</h2> 
<p>       终端和基站建立无线通信链路的前提是必须先进行小区搜索。具体是在以下两种情况：一是用户开机，二是小区切换。</p> 
<p>在LTE中，用户终端开机或小区切换时，需要和小区取得新的联系，和小区的时频保持同步，获取小区的必要信息。</p> 
<p>小区搜索过程中，用户UE要达到以下三个目的：</p> 
<ul><li>下行同步：符号定时、帧定时、频率同步。</li><li>小区的标识号（ID）获取。</li><li>广播信道（BCH）的解调信息获取。</li></ul> 
<p>BCH信道广播的信息有：小区的传输带宽（LTE中各小区传输带宽不固定）、发射天线的配置信息（每个基站天线数目可能不一致）、循环前缀（CP）的长度（单播、多播业务CP长度不同）等。</p> 
<h3>1.1、 三个信道、四个步骤</h3> 
<p>UE完成小区搜索过程需要借助三个信道：</p> 
<ul><li>同步信道（SS、SCH）包括：主同步信道（PSS、P-SCH）和从同步信道（SSS、S-SCH）；</li><li>参考信道（RS）；</li><li>广播信道（BCH）。</li></ul> 
<p>小区的搜索过程分为以下四个步骤：</p> 
<p><img alt="" class="has" height="356" src="https://images2.imgbox.com/ba/0c/KOvrXycx_o.png" width="520"></p> 
<ul><li>第一步：从PSS信道上获取小区的组内ID；</li><li>第二步：从SSS信道上获取小区组号，范围是0~167；协议规定了3个PSS信号，使用长度为62的频域Zadoff-Chu（ZC序列，较好的自相关特性和较低峰均比），分别对应小区组内ID；SSS信号则使用二进制M序列，有168种组合，与168个物理层小区标识组对应。所以UE把PSS和SSS接收下来后就可以确定小区标识。先获取组内顺序号，再获取小区组的顺序号。</li><li>第三步：UE接收下行参考信号（DL-RS），用来进行精确的时频同步。DL-RS是UE获取信道估计信息的指示灯。对于频率偏差、时间提前量、链路衰落情况，UE从这里了解清楚，然后在时间和频率上紧跟基站的步伐。</li><li>第四步：UE接收小区广播信息。完成前三步后UE就完成了和基站的时频同步，可以接受基站的面向小区内所有UE的广播信号。有需要就听一下，从广播信号上可以获得下行系统带宽值，天线配置，本小区的系统帧号等。</li></ul> 
<p>以往无线制式下行系统带宽和天线配置是定死的。在LTE中得益于OFDM、MIMO，配置是灵活的，但增加了这部分信令开销。</p> 
<h3>1.2、 在合适的位置寻找合适的信息</h3> 
<p>        SS信号和BCH信道是小区搜索时UE最先捕获的物理信道。因此必须保证用户在没有任何先验信息情况下能够得到这些信息。办法就是：在时域和频域上安排固定位置。</p> 
<p>       如之前的文章，同步信号每个帧发送两次，PSS和SSS在时域上的位置TDD和FDD不一样。FDD中，PSS、SSS分别在第0个和第5个子帧的第一个时隙的最后两个符号位置上。TDD中，PSS在DwPTS上，SSS在第0个子帧的第1#时隙的最后一个符号上。BCH在SS之后被用户接收，因此二者须有一个固定的时间间隔τ，如图所示：</p> 
<p><img alt="" class="has" height="338" src="https://images2.imgbox.com/5d/b7/3KnuTEKz_o.png" width="439"><br> 每个下行帧，SS和BCH可以发送多次，SS和BCH数目也可不同，对于BCH出现的时间位置，终端需要知道，否则无法找到它。</p> 
<p>不管小区总传输带宽多大，SCH信道和BCH信道只在小区传输带宽的中心位置传输，而且SCH、BCH总是占用相同的带宽（1.25MHz）.其中有用子载波数目是64个，中间有一个直流子载波（DC）。</p> 
<p>       在小区搜索的开始，监测系统的中心带宽为1.25MHz。利用同步信道进行下行同步，获取小区标识；然后还是在这1.25Mhz中心带宽上，接收BCH相关的解调信息。UE从BCH的解调信息中获取了分配的系统带宽，然后将工作带宽偏移到指定的频带位置上，至此才可以进行数据传输，整个过程如图所示。</p> 
<p><img alt="" class="has" height="346" src="https://images2.imgbox.com/9a/f5/UkRe5xzc_o.png" width="502"></p> 
<p> </p> 
<h2>2、随机接入过程</h2> 
<p>       随机接入过程主要完成用户信息在网络侧的初始注册。通过小区搜索，用户知道了网络侧的信息；而通过随机接入，网络侧又知道了用户的必要信息。</p> 
<p>       和UMTS随机接入过程不同，LTE的随机接入过程不仅完成用户信息的初始注册，还需要完成上行时频同步（Time Advance，时间提前量，TA）与用户上行带宽资源的申请。</p> 
<p>       在LTE中，上行时频同步和重新申请上行带宽资源，都需要启动随机接入过程来完成。大致来说启动随机接入过程的场景有以下三种：<strong>开机、UE从空闲状态到连接态、小区切换</strong>。</p> 
<p>       根据接入时终端的同步状态不同，随机接入过程可分为同步的随机接入和非同步的随机接入。同步的随机接入过程已经处于同步状态，没有上行同步的目的，主要的目的只是上行带宽资源的申请。</p> 
<p>       非同步随机接入是在用户UE没有上行同步、或者失去上行同步时，需要和网络侧请求资源分配时所使用的接入过程。</p> 
<h3>2.1 Preamble结构</h3> 
<p>       上行失步情况下，终端和网络侧都不知道彼此间的距离，容易导致基站的上行接收窗错位。这就要求时域采用特殊的Preamble结构（加CP）来克服可能的时间窗错位。</p> 
<p><img alt="" class="has" height="134" src="https://images2.imgbox.com/b7/85/9sWMPVNx_o.png" width="484"><br> 随机接入在接入用户数目较多时基于竞争会发生严重的冲突碰撞，降低系统容量。一般采用基于资源预留的接入机制。在随机接入过程中一定要选用冲突概率小、相关性较低的同步序列，做上行同步。</p> 
<p>       随机接入前导消息Preamble的位置，在时域上是可配置的，在频域上一般位于PUCCH信道的内侧，如图所示。</p> 
<h3><img alt="" class="has" height="256" src="https://images2.imgbox.com/6e/a4/XRHWxlZg_o.png" width="498"><br> 2.2、 LTE与UMTS随机接入过程对比</h3> 
<p>对于物理层来讲，物理层的随机接入过程包含两个步骤：</p> 
<p>发送：UE发送随机接入Preamble；</p> 
<p>应答：eUTRAN对随机接入的响应。</p> 
<p><br> UE物理层首先要从高层（传输层的RACH信道）获取随机接入的PRACH信道参数，包括：</p> 
<p>（1）PRACH信道配置信息（时域、频域上的信道结构信息）；</p> 
<p>（2）前导Preamble格式（前导用于上行时钟对齐和UE识别符，系统规定其由Zadoff-Chu序列产生）；</p> 
<p>（3）前导发射功率；</p> 
<p>（4）Preamble根序列及其循环位移参数（小区用来解调前导消息）。</p> 
<p>UMTS随机接入信道（PRACH）（上行）包括前导消息（Preamble）、正交消息部分（Message），如图所示</p> 
<p><img alt="" class="has" height="196" src="https://images2.imgbox.com/df/d3/4Ski7lx5_o.png" width="535"></p> 
<p>       在LTE中，随机接入信道（PRACH）只包括前导消息（Preamble），但较UMTS的前导消息内涵更加丰富一些。正文消息部分是在共享信道PUSCH上进行传输，不属于PRACH的一部分。物理层随机接入过程不包括正文消息的发送过程。</p> 
<p>       LTE基站给终端随机接入的应答，也不像UMTS中简单地回应一个AI，而是有丰富内涵的一个回应，由PDCCH（指示是否有回应）和PDSCH（指示回应的具体内容），如图所示。</p> 
<p><img alt="" class="has" height="283" src="https://images2.imgbox.com/e5/29/N8AyRPFm_o.png" width="523"><br> 基站通过PDSCH信道告知UE随机接入允许的内容（UL-SCH grant），这个内容需要传给UE的传输层在共享SCH信道上才能解析。随机接入响应准许（UL-SCH grant）包括：无限资源RB指派情况、调制编码信息、功率控制命令、是否请求CQI等信息。UE根据随机接入响应准许的要求，在上行PUSCH信道上发送随机接入的消息部分。</p> 
<p>随机接入的具体过程如下：</p> 
<p>（1）UE高层请求触发物理层随机接入过程。</p> 
<p>高层在请求中指示Preamble index、Preamble 目标接收功率、相关的RA-RNTI（Random Access Radio Network  Temporary Indentifier，随机接入无线网络临时标识），以及随机接入信道的资源情况等信息。</p> 
<p>（2）UE决定随机接入信道的发射功率。</p> 
<p>由于随机接入在与网络侧建立联系之前发生，因此采用开环功率控制。终端在PARCH信道发射随机接入前导消息（Preamble）时，自己根据高层指示计算一个发射功率，如下式：</p> 
<p>发射功率 = preamble的目标接收功率+路径损耗</p> 
<p>这个发射功率小于终端最大发射功率，路径损耗为UE通过下行链路估计的值。若网络侧无反应，则UE会一直增加发射功率。</p> 
<p>（3）UE以计算出的发射功率，选择Preamble随机序列，在指定的随机接入信道资源中发射单个Preamble。</p> 
<p>（4）在传输层设置的时间窗内，UE尝试侦测以其RA-RNTI标识的下行控制信道PDCCH。如果侦测到，把相应的下行信道PDSCH送往传输层。传输从共享信道中解析出接入允许的响应信息，之后开始在PUSCH信道上给基站传送正文消息。</p> 
<p>（5）在规定时间内，如果没有收到响应，那么物理层反馈“NACK”给传输层，并退出随机接入过程。</p> 
<p> </p> 
<h2>3、功率控制过程</h2> 
<h3>3.1、 LTE与CDMA功率控制对比</h3> 
<p>CDMA是自干扰系统，有较明显的远近效应，依赖功率控制来克服远近效应。LTE使用OFDMA，不属于自干扰系统。</p> 
<p>CDMA采用快速功率控制，LTE采用慢速功率控制。</p> 
<p>CDMA系统中，每个用户的信号都会占用整个带宽，对小区内、外造成的干扰为宽带干扰。功率控制主要是小区内干扰控制。</p> 
<p>LTE系统中，每个用户只会占用一部分系统带宽（多个子载波），而且每个用户占用的子载波数量和位置不一样。因此对小区内和小区间的干扰时是窄带干扰，频率选择性干扰。</p> 
<p><img alt="" class="has" height="239" src="https://images2.imgbox.com/c1/87/aHb1zqpJ_o.png" width="693"></p> 
<h3>3.2、LTE功率控制</h3> 
<p>根据功率控制执行方是否需要对方反馈控制信息，分为开环功控（无需反馈）和闭环功控（需反馈）。</p> 
<p> </p> 
<h2>4、寻呼过程</h2> 
<p>寻呼，就是网络有某UE的业务因此寻找此UE的过程。用户被呼叫时，网络侧发起的呼叫建立过程一定包括寻呼过程。这也是UE主叫和被叫流程不一样的地方。</p> 
<p>寻呼流程并不是一个纯粹物理层过程，也需要高层的配置和指示。</p> 
<h3>4.1、不连续接收</h3> 
<p>       如果一个UE在始终不停地查看是否有自己的寻呼信息，会导致手机耗电增加。在使用过程中，多数时间UE处于睡眠状态，只在预定时间醒来监听一下是否有属于来自网络的寻呼信息。多数时间休息，少数时间监听，是一种不连续接收（DRX）技术。</p> 
<h3>4.2、LTE和WCDMA寻呼过程对比</h3> 
<p>两者寻呼过程大致相同，但实现该过程所使用的信道略有不同。</p> 
<p>WCDMA中，UE大多数时间休息，只在预定时刻监听物理层寻呼指示信道（PICH），如图所示，这个信道类似村委会通知谁家有包裹寄到的公告栏。</p> 
<p><img alt="" class="has" height="225" src="https://images2.imgbox.com/61/47/Jn4L28Fm_o.png" width="559"><br> UE在PICH这个公告栏上看是否有自己的包裹（是否有这个UE的寻呼信息）。一旦发现有属于自己的寻呼信息，它立刻到指定位置（S-CCPCH信道上）去寻找自己的包裹（寻呼指示信息）。</p> 
<p>先发送一个寻呼指示，再发送一个UE的寻呼消息，可以使UE休息更长时间。因为寻呼指示的时长比寻呼信息时长小很多，且并不是每次寻呼指示里都有某一UE的通知。</p> 
<p><br> LTE中，如图所示，寻呼信息指示信道是PDCCH，寻呼消息发送的得信道是PDSCH。同样地，LTE也是采用DRX技术。</p> 
<p><img alt="" class="has" height="270" src="https://images2.imgbox.com/99/e1/1EPrcdN5_o.png" width="490"><br> UE在属于自己的特定时刻去监听PDCCH信道，如果在PDCCH信道上检测到自己的寻呼组的标识该UE则需去解读PDSCH，并将解码后的数据通过寻呼传输信道（PCH）传到MAC层。</p> 
<p>在PCH传输块中，包含被寻呼的UE的标识。如果该UE没有在PCH上找到自己的标识，则丢弃这个信息，重新进入休眠，等待属于自己的下一个监听时刻的到来。</p> 
<p>LTE中没有专门的PICH寻呼消息指示信道，而是和其他指示消息一样，借用PDCCH信道来传送这些指示消息。这是因为PDCCH本身传输时间很短，引入专门的PICH节省的能量有限，但却增加了复杂度。</p> 
<h2>5、测量过程</h2> 
<p>物理层的测量过程一般是由高层配置和控制的，物理层只是提供测量的能力而已。</p> 
<p>根据测量性质的不同，测量可分为同频测量、异频测量、异系统测量；根据测量的物理量不同，可分为电平大小测量、信道质量测量、负荷大小测量等。根据测量报告的汇报方式，可分为周期性测量、事件测量等。协议中一般根据测量的位置不同，将测量分为UE侧的测量、eUTRAN侧的测量。</p> 
<h3>5.1、手机侧测量</h3> 
<p>UE侧的测量 有连接状态的测量和空闲状态的测量。</p> 
<p>手机处于<strong>连接态</strong>的时候，eUTRAN给UE发送RRC连接重配置消息，这个消息相当于eUTRAN对UE进行测量控制命令。这个命令包括：要求UE进行的测量类型及ID，建立、修改、还是释放一个测量的命令，测量对象、测量数量、测量报告的数量和触发报告的方式（周期性报告、事件性汇报）等。</p> 
<p>手机处于<strong>空闲态</strong>的时候，eUTRAN的测量控制命令是用系统消息（System Information）广播给UE的。</p> 
<p>UE可以测量的物理量包括：</p> 
<p>RSRP（Reference Signal Received Power，参考信号接收电平）：一定频带内，特定小区参考信号RS的多个RE的有用信号的平均接收功率（同一个RB内的RE平均功率）。</p> 
<p>RSSI（Received Signal Strength Indicator，接收信号强度指示）：系统在一定频带内，数个RB内的OFDM符号的总接收功率的平均值，包含有用信号、循环前缀干扰、噪声在内的所有功率。eUTRAN内的RSSI主要用于干扰测量。</p> 
<p>RSRQ（Reference Signal Received Quality，参考信号接收质量）：是一种信噪比，即RSRP和RSSI的比值RSRP一般是单个RB的功率，RSSI可能是N个RB的功率，所以RSRQ=（N*RSRP）/RSSI。RSRQ测量用于基于信道质量的切换和重选预判。</p> 
<p>UE处于空闲状态时，进行小区选择或重选一般使用RSRP；而UE处于连接状态进行切换时，通常需要比较RSRP和RSRQ。如果仅比较RSRP可能导致频繁切换，仅比较RSRQ虽可减少切换次数，但可能导致掉话。</p> 
<p> </p> 
<h3>5.2、基站侧测量</h3> 
<p>参考位置在天线的接口处，一般会指明是发射天线还是接收天线。总结如下表</p> 
<p><img alt="" class="has" height="422" src="https://images2.imgbox.com/1c/d9/9vZiPznR_o.png" width="850"></p> 
<p> </p> 
<h2>6、共享信道物理过程</h2> 
<p>LTE的物理共享信道是业务数据承载的主体。他还顺便帮忙携带一些寻呼消息，部分广播消息，上下行功控消息等。</p> 
<p>物理共享信道主要包括PUSCH和PDSCH。这两个共享信道的物理层过程主要做三件事：数据传输、HARQ和链路自适应。</p> 
<p><img alt="" class="has" height="387" src="https://images2.imgbox.com/03/73/LHstfGT3_o.png" width="527"><br> 数据传输过程中出错了怎么办？这就需要HARQ过程来解决；数据传输过程还需要根据无线环境自适应调制传输方式。</p> 
<h3>6.1、数据传输过程</h3> 
<p>       数据传输就是把要传送的数据，放到LTE射频资源上，通过天线发射出去，然后接收端在特定的时、频资源上将这些数据接收下来。下行和上行数据传输，干活的分别是PDSCH、PUSCH，但负责协调调度的人是一样的，都是PDCCH。</p> 
<p>       PDCCH携带的信息有时、频资源的位置，编码调制方式，HARQ的控制信息等。基站是上下行资源调度的决策者，他通过PDCCH控制上下行数据传输。通过PDCCH的格式控制，PDSCH和PUSCH可以传送多种类型的数据。</p> 
<p>系统需要配置PDCCH参数来决定如何分配和使用资源，主要依据以下因素：</p> 
<p>（1）QoS参数</p> 
<p>（2）在eNodeB中等待调度的资源数据数量</p> 
<p>（3）UE报告的信道质量指示（CQI）</p> 
<p>（4）UE能力</p> 
<p>（5）系统带宽</p> 
<p>（6）干扰水平</p> 
<p>下行方向，在长度为1ms的子帧结构中，1~3个符号传送协调调度信息（PDCCH），剩余的符号传送数据信息（PDSCH）。也就是说调度信息和对应的数据信息可以位于同一个子帧内。</p> 
<p>在下行数据接收的时候，终端不断检测PDCCH所携带的调度信息。发现某个协调调度信息属于自己的，则按照协调调度信息的指示接收属于自己的PDSCH数据信息。</p> 
<p>在上行方向，终端需要根据下行的PDCCH的调度信息，进行上行数据的发送。由于无线传输和设备处理都需要时间，因而下行的PDCCH和上行的PUSCH之间存在时延。</p> 
<p>对于FDD，这个时延固定为4ms，即4个子帧，如图所示。对于TDD模式，时延和上下行时隙的比例有关，但也必须大于等于4ms。</p> 
<p><img alt="" class="has" height="199" src="https://images2.imgbox.com/db/2a/UULmILfT_o.png" width="474"><br> 上行数据在发送之前，终端需要等待基站给自己的下行协调调度信息，如果授权自己传输数据，则在PUSCH上发送自己的数据。对于某些规则的低速业务，如VoIP是固定20ms一帧数据，在LTE中为了降低PDCCH信令开销，定义了半持续调度（Semi-Persistent Scheduling，SPS）的模式。半持续调度的主要思想是对于较规则的低速业务，不需要每个子帧都进行动态资源调度。可以按照一次指令工作一段时间的方式，从而节省信令开销。</p> 
<h3>6.2、盲检测过程</h3> 
<p>eNodeB针对多个UE同时发送PDCCH，终端如何保证接收到属于自己的控制信息，又不给系统带来过多开销？答案是终端需要不断检测下行的PDCCH调度信息。</p> 
<p>但在检测之前，终端并不清楚PDCCH传输什么样的信息，使用什么样的格式，但终端知道自己需要什么。有哪些我不知道，有哪些需要我知道，在这种情况下只能采用盲检测的方式。</p> 
<p>了解盲检测之前先了解两个概念：RNTI和DCI。</p> 
<p>RNTI（Radio Network Temporary Identifier，无线网络临时标识）是高层用来告诉物理层，需要接收或者发送什么样的控制信息。根据不同的控制消息，RNTI可以表示为X-RNTI。</p> 
<p>（1）SI-RNTI（System Information RNTI）：基站发送系统消息的标识。</p> 
<p>（2）P-RNTI（Paging RNTI）：基站发送寻呼消息的标识。</p> 
<p>（3）RA-RNTI（Random Access RNTI）：基站发送随机接入响应的标识，用户用来发送随机接入的前导消息。<br> （4）C-RNTI（Cell RNTI）：基站为终端分配的用于用户业务临时调度的标识。</p> 
<p>（5）TPC-PUCCH-RNTI（Transmit Power Control PUCCH RNTI）：PUCCH上行功率控制信息标识。</p> 
<p>（6）TPC-PUSCH-RNTI：PUSCH上行功率控制信息标识。</p> 
<p>（7）SPS C-RNTI（Semi-Persistent Scheduling RNTI）：半静态调度时，基站为终端分配的用于用户业务临时调度的标识，用法和C-RNTI一样。</p> 
<p>（8）M-RNTI（MBMS RNTI）：基站为终端分配的用于MBMS业务临时调度的标识。</p> 
<p>为提高终端RNTI的效率，根据RNTI属性的不同，将其分在两个不同的搜索空间中：公共搜索空间（Common Search Space）和UE特定的搜索空间（UE Specific Search Space）。前者每个UE都可以在此查找相应的信息；后者UE只能在属于自己的空间中搜索空间信息。</p> 
<p>SI-RNTI、P-RNTI、RA-RNTI属于公共搜索空间的信息；其他RNTI属于UE特定的搜索空间的信息。</p> 
<p>UE使用X-RNTI对PDCCH进行盲检测，X-RNTI如同开启PDCCH的钥匙。UE既要查看公共搜索空间，又要查看UE特定搜索空间。</p> 
<p>终端要使用SI-RNTI、P-RNTI、RA-RNTI等公共钥匙查看公共搜索空间；基站为终端分配了C-RNTI、TCP-PUCCH-RNTI等私人钥匙，来开启自己的私人空间。</p> 
<p><br> DCI（<strong>Downlink Control Information，下行控制信息</strong>）有上行资源调度信息、下行资源调度信息、上行功率控制信息。一个DCI对应一个RNTI。每个UE在每一个子帧中只能看到一个下行控制信息（DCI）。</p> 
<p><br> 针对不同的用途，物理层设计了不同的DCI格式。根据调度信息的方向（上行or下行）、调度信息的类型（Type）、MIMO传输模式（Mode）、资源指示方式的不同，定义了不同的DCI格式，如图</p> 
<p><img alt="" class="has" height="384" src="https://images2.imgbox.com/5f/d0/JeiMimuU_o.png" width="675"><br> 资源指示是告诉终端，信息被放在了什么位置。协议定义了3种时频资源的指示方式：Type0、Type1、Type2。</p> 
<p>Type0、Type1采用时、频资源分组。Type2是以资源起始位置，加上连续时、频资源块的长度，来定义时、频资源占用的位置的。这种方式无须指示RB位置，信令开销小，但只能分配连续的VRB。</p> 
<p>X-RNTI和DCI就是PDCCH通过加扰和CRC穿在身上的外衣，携带了很多标识自己特性的信息，可以让终端方便地识别出属于自己的、自己所需的控制信息。</p> 
<p>终端就是根据这些控制信息的指示，在PDSCH信道上的特定时、频资源上，把属于自己的下行数据取下来；同时终端按照这些控制信息的要求，在PUSCH相应的时频资源上用一定的功率把上行信息发出去。</p> 
<p>基站要寻呼UE，就要通过P-RNTI标识PDCCH，并指示DCI。UE会用P-RNTI解码PDCCH，并根据DCI的信息，在PDSCH上找到下行寻呼数据。</p> 
<p>在随机接入过程中，UE会在特定的时、频资源上发送一个前导码Preamble；基站根据收到PARCH消息（包括前导Preamble）的时、频资源位置推算RA-RNTI，并用该RA-RNTI标识PDCCH，然后发送随机接入响应，该响应中包含基站为终端分配的临时调度标识号TC-RNTI（Temporal C-RNTI）。</p> 
<p>当随机接入成功后，便将TC-RNTI转正为C-RNTI。</p> 
<p>基站与终端建立连接后，通过C-RNTI或SPS-RNTI对PDCCH进行标识。终端对PDCCH察言观色，进而获得上下行调度信息。</p> 
<h3><br> 6.3、 HARQ重传合并机制</h3> 
<p>HARQ（Hybrid Automatic  Repeat reQuest，混合自动重传请求）技术是自动重传请求（ARQ）和前向纠错（Forword Error Correction，FEC）两种技术的结合。所谓混合（Hybrid），即指重传和合并技术的混合。</p> 
<p>LTE知错就改的基站就是基于重传和合并。</p> 
<p>ARQ是重传，但系统对错误的忍耐有限度，于是定义了最大重传次数。</p> 
<p>不但要重传，收到两次或多次重传的内容还要比对起来看。合起来看，试图把正确的内容尽快找出来，以便降低重传次数。这就是FEC技术。</p> 
<p>HARQ的重传机制有三种：</p> 
<p>（1）停止等待（Stop-And-Wait，SAW）</p> 
<p>（2）回退</p> 
<p>（3）选择重传。</p> 
<p>停止等待协议是发送每一帧数据后，等待接收方的反馈应答ACK/NACK。一旦接受方反馈数据错误的NACK，发送方就需呀重发该数据，直到接收方反馈确认无误（ACK）后才发送新数据，如图所示。</p> 
<p><img alt="" class="has" height="234" src="https://images2.imgbox.com/c3/74/gpXMi4Yj_o.png" width="606"></p> 
<p>回退机制是指按照数据帧的顺序不停的发送数据后，无须等待接收方的反馈，直到接收方反馈数据错误NACK。发送方就重发出错数据帧和其后的所有数据帧，相当于回退了N帧，到出错帧处，然后继续顺序发送，如图所示。</p> 
<p><img alt="" class="has" height="264" src="https://images2.imgbox.com/55/38/ESSqfkIG_o.png" width="582"></p> 
<p>选择重传是指发送发按照数据帧的顺序不停地发送数据，并将发送的数据存储下俩，当接收方反馈数据错误NACK，发送方就重发出错数据帧，如图所示：</p> 
<p><img alt="" class="has" height="258" src="https://images2.imgbox.com/ac/b5/AtWt1tec_o.png" width="611"></p> 
<p><strong>LTE中采用的重传机制是停止等待（SAW）协议。</strong></p> 
<p>HARQ合并技术也有以下三类：</p> 
<p>第一类HARQ就是接收到错误数据后，直接丢弃，然后请求重传，接收到重传数据后自然无法进行合并，直接译码。</p> 
<p>第二类HARQ是一种完全增量冗余（Incremental Redundency，IR）的HARQ合并技术，接收到的错误数据不丢弃，重传的完全是数据的编码冗余部分，而没有原始数据本身，也就是说重传的数据没有自解码功能，重传的冗余数据和错误数据合并以后进行再次解码。</p> 
<p>第三类HARQ和第二类HARQ相同的是错误数据不丢弃，重传数据与错误数据合并；但不同的是第三类HARQ重传的数据具有自解码功能，有原始数据，也有冗余数据。</p> 
<p>第三类HARQ又分为两种情况：第一种是每次重传的冗余版本完全一样，叫做Chase合并（Chase Combining，CC）技术；第二种是每次重传的冗余版本不一样，叫做部分增量冗余（部分IR）的合并技术。</p> 
<p><strong>LTE中使用的HARQ合并技术有：Chase合并（CC）和增量冗余（IR）。</strong></p> 
<p>Chase合并技术，重发原始数据和相同版本的冗余编码数据，提高正确解码的概率；</p> 
<p>增量冗余（IR），逐步发送不同的冗余版本，降低信道编码速率（对应于低阶的冗余编码版本），提高编码增益。</p> 
<p>当数据速率较高的时候一般使用不能自解码的第二类HARQ；速率较低时可使用自解码的Chase合并或部分增量冗余技术。</p> 
<h3><br> 6.4、 LTE HARQ过程</h3> 
<p>LTE中，下行采用异步的自适应HARQ，上行采用同步HARQ。异步是指重传时间间隔不固定，同步指预定义的固定重传时间间隔。</p> 
<p>对于单个HARQ进程来说，采用的是停止等待重传机制，1个数据包发送出去以后，等待ACK/NACK，如果出错则需要重传，直到数据包被正确接收或者超出最大重传次数被丢弃。下行HARQ过程如图所示。</p> 
<p><img alt="" class="has" height="356" src="https://images2.imgbox.com/cf/75/Kj9R7hgr_o.png" width="658"></p> 
<p>在上行HARQ中，终端按照基站侧指示的上行资源调度方式，发送上行数据；基站接收后，在PHICH中反馈ACK/NACK。若反馈ACK，基站继续给终端发送上行资源调度信息，终端继续发送新数据；如果反馈NACK，终端则进行数据重传，过程如图所示。</p> 
<p><img alt="" class="has" height="384" src="https://images2.imgbox.com/c7/8c/k2NakUG9_o.png" width="672"><br> LTE中允许多个HARQ进程并行发送。并行发送的HARQ进程数取决于一个HARQ进程的RTT（Round Trip Time，往返时间）。对于FDD来说，服务小区最多有8个下行HARQ进程；对于TDD，服务小区的HARQ最多的进程数目取决于上、下行时隙配比。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/66d18cef3cba95bbca8feb19041d47d3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">我的Java学习之路（第十四天）------ 在字符串中查找字符</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8849f42f92541c148dc3b4831d833d85/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">UserWarning: PySoundFile failed. Trying audioread instead.</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>