<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Android入门到项目实战-- 11.5】—— bmob后端云数据库批量获取表中数据 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Android入门到项目实战-- 11.5】—— bmob后端云数据库批量获取表中数据" />
<meta property="og:description" content="如图，下面实现批量获取Home表中的所有行的字段。
准备工作 引入依赖
implementation &#39;io.github.bmob:android-sdk:3.8.21&#39; implementation &#39;io.reactivex.rxjava2:rxjava:2.2.8&#39; implementation &#39;io.reactivex.rxjava2:rxandroid:2.1.1&#39; implementation &#39;com.squareup.okhttp3:okhttp:4.8.1&#39; implementation &#39;com.squareup.okio:okio:2.2.2&#39; implementation &#39;com.google.code.gson:gson:2.8.5&#39; AndroidManifest.xml文件添加:
申请权限和创建provider
&lt;uses-permission android:name=&#34;android.permission.INTERNET&#34; /&gt; &lt;!--获取GSM（2g）、WCDMA（联通3g）等网络状态的信息 --&gt; &lt;uses-permission android:name=&#34;android.permission.ACCESS_NETWORK_STATE&#34; /&gt; &lt;!--获取wifi网络状态的信息 --&gt; &lt;uses-permission android:name=&#34;android.permission.ACCESS_WIFI_STATE&#34; /&gt; &lt;!--保持CPU 运转，屏幕和键盘灯有可能是关闭的,用于文件上传和下载 --&gt; &lt;uses-permission android:name=&#34;android.permission.WAKE_LOCK&#34; /&gt; &lt;!--获取sd卡写的权限，用于文件上传和下载--&gt; &lt;uses-permission android:name=&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34; /&gt; &lt;!--允许读取手机状态 用于创建BmobInstallation--&gt; &lt;uses-permission android:name=&#34;android.permission.READ_PHONE_STATE&#34; /&gt; &lt;application .... &lt;activity .... &lt;provider android:name=&#34;cn.bmob.v3.util.BmobContentProvider&#34; android:authorities=&#34;com.example.ufcfans.BmobContentProvider&#34;&gt; &lt;/provider&gt; &lt;/application&gt; 创建表类 需要创建和数据表对应的类，注意类名必须和数据表名相同，变量名必须和表中的字段名相同。
public class Home extends BmobObject { private String text; private String video; private Integer lookview; private Integer comment; private Integer like; public String getText() { return text; } public void setText(String text) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/603d46a8bb95531f80afc5561f767006/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-23T21:41:18+08:00" />
<meta property="article:modified_time" content="2023-05-23T21:41:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Android入门到项目实战-- 11.5】—— bmob后端云数据库批量获取表中数据</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p></p> 
<p> 如图，下面实现批量获取Home表中的所有行的字段。</p> 
<p><img alt="" height="458" src="https://images2.imgbox.com/3d/68/Fzf4ONVY_o.png" width="1200"></p> 
<h2>准备工作</h2> 
<p>引入依赖</p> 
<pre><code class="hljs">    implementation 'io.github.bmob:android-sdk:3.8.21'
    implementation 'io.reactivex.rxjava2:rxjava:2.2.8'
    implementation 'io.reactivex.rxjava2:rxandroid:2.1.1'
    implementation 'com.squareup.okhttp3:okhttp:4.8.1'
    implementation 'com.squareup.okio:okio:2.2.2'
    implementation 'com.google.code.gson:gson:2.8.5'</code></pre> 
<p>AndroidManifest.xml文件添加:</p> 
<p>申请权限和创建provider</p> 
<pre><code class="hljs">    &lt;uses-permission android:name="android.permission.INTERNET" /&gt;
    &lt;!--获取GSM（2g）、WCDMA（联通3g）等网络状态的信息  --&gt;
    &lt;uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /&gt;
    &lt;!--获取wifi网络状态的信息 --&gt;
    &lt;uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /&gt;
    &lt;!--保持CPU 运转，屏幕和键盘灯有可能是关闭的,用于文件上传和下载 --&gt;
    &lt;uses-permission android:name="android.permission.WAKE_LOCK" /&gt;
    &lt;!--获取sd卡写的权限，用于文件上传和下载--&gt;
    &lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;
    &lt;!--允许读取手机状态 用于创建BmobInstallation--&gt;
    &lt;uses-permission android:name="android.permission.READ_PHONE_STATE" /&gt;

&lt;application
        ....
        &lt;activity
           ....
        &lt;provider
            android:name="cn.bmob.v3.util.BmobContentProvider"
            android:authorities="com.example.ufcfans.BmobContentProvider"&gt;
        &lt;/provider&gt;
    &lt;/application&gt;</code></pre> 
<h2>创建表类</h2> 
<p>        需要创建和数据表对应的类，注意类名必须和数据表名相同，变量名必须和表中的字段名相同。</p> 
<pre><code class="hljs">public class Home extends BmobObject {
    private String text;
    private String video;
    private Integer lookview;
    private Integer comment;
    private Integer like;

    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

    public String getVideo() {
        return video;
    }

    public void setVideo(String video) {
        this.video = video;
    }

    public Integer getLookview() {
        return lookview;
    }

    public void setLookview(Integer lookview) {
        this.lookview = lookview;
    }

    public Integer getComment() {
        return comment;
    }

    public void setComment(Integer comment) {
        this.comment = comment;
    }

    public Integer getLike() {
        return like;
    }

    public void setLike(Integer like) {
        this.like = like;
    }
}</code></pre> 
<h2>Activity或Fragment中使用</h2> 
<p>初始化bmob：</p> 
<pre><code class="hljs">Bmob.initialize(getActivity(), "keyID");</code></pre> 
<p>定义列表保存数据：</p> 
<pre><code class="hljs">    private List&lt;Home&gt; bmobList = new ArrayList&lt;&gt;();//保存表中的每行
    private List&lt;String&gt; textList = new ArrayList&lt;&gt;();//配文列表
    private List&lt;String&gt; videoList = new ArrayList&lt;&gt;();//视频列表
    private List&lt;String&gt; dateList = new ArrayList&lt;&gt;();//日期列表
    private List&lt;Integer&gt; lookviewList = new ArrayList&lt;&gt;();//浏览量列表
    private List&lt;Integer&gt; commentList = new ArrayList&lt;&gt;();//评论列表
    private List&lt;Integer&gt; likeList = new ArrayList&lt;&gt;();//点赞列表</code></pre> 
<p>获取数据：</p> 
<blockquote> 
 <p>        list.get(i)得到的是表中每一行的字段列表，添加到bmobList列表中；bmobList.get(i).getXXX是每一行的字段。（不知为何列表中存放的值只在查询方法里有效，所以需要把用到这些列表的方法方法查询方法里）</p> 
</blockquote> 
<pre><code class="hljs">    private void bmobInit(){
        BmobQuery&lt;com.example.ufcfans.bmob.Home.Home&gt; bmobQuery = new BmobQuery&lt;com.example.ufcfans.bmob.Home.Home&gt;();
        bmobQuery.findObjects(new FindListener&lt;com.example.ufcfans.bmob.Home.Home&gt;() {
            @Override
            public void done(List&lt;com.example.ufcfans.bmob.Home.Home&gt; list, BmobException e) {
                if(e==null){
                    for(int i = 0; i &lt; list.size();i++){
                        bmobList.add(list.get(i));
                    }
                    for(int i = 0; i &lt; bmobList.size();i++){
                        textList.add(bmobList.get(i).getText());
                        videoList.add(bmobList.get(i).getVideo());
                        lookviewList.add(bmobList.get(i).getLookview());
                        commentList.add(bmobList.get(i).getComment());
                        likeList.add(bmobList.get(i).getLike());
                        dateList.add(bmobList.get(i).getUpdatedAt());
                    }

                }else{
                    Toast.makeText(getActivity(),"加载失败",Toast.LENGTH_SHORT).show();
                }
            }
        });
    }</code></pre> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84a8e6562bea2f808dc1243e7338ba0a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MobileNets V2神经网络简介与代码实战</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9c3d580222258fc7420bf19a4bbb14f7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">git如何清除已提交的内容？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>