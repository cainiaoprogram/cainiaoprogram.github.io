<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu 16.04&#43;1080Ti机器学习基本环境配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu 16.04&#43;1080Ti机器学习基本环境配置" />
<meta property="og:description" content="一、设置网络 机器有两张网卡，将当前正在使用的“有线连接1”配置为以下的设置
IP使用 192.168.2.251
掩码：255.255.248.0
网关：192.168.5.1
DNS:202.96.134.133;202.96.128.166
二、安装五笔 1 、首先声明，输入法根据个人爱好，系统已经自带拼音，如果习惯则可以跳过此步骤。我是习惯五笔输入，所以根据需要先安装完整语言包，我选择中文。
右上角系统设置--&gt;语言支持--&gt;自动更新安装语言包--&gt;键盘输入法系统选择 fcitx 2、安装更新包，如果前面安装完成，这步不是必须
sudo apt-get install fcitx-table-wubi 3、重启系统
4、右上角的键盘（没有显示则按一下 Alt 键） --&gt; 配置 fcitx ，然后选择 “&#43;”号 添加 ，选择 “五笔字形”
5、Ctrl &#43; 空格快捷键调用中文输入，然后用 Ctrl &#43; Shift 组合键，在可用的中文输入法之间循环切换。
三、配置SSH 1、安装：
sudo apt-getinstall openssh-server 2、启动：(可以把下面加到 ~/.bashrc配置开机启动)
sudo servicessh start
3、查询服务启动状态：
sudo ps -e |grep ssh 或者
sudo servicessh status 4、重启服务
sudo servicessh restart 四、配置 samba 1、安装samba服务
sudo apt-getinstall samba samba-client 2、配置目录
sudo vim/etc/samba/smb." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/10d9de3085e038b61d70022d3dd02d6a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-25T23:36:42+08:00" />
<meta property="article:modified_time" content="2018-06-25T23:36:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu 16.04&#43;1080Ti机器学习基本环境配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="center"><br></p> 
<h2>一、设置网络</h2> 
<p>机器有两张网卡，将当前正在使用的“有线连接1”配置为以下的设置</p> 
<p>IP使用 192.168.2.251</p> 
<p>掩码：255.255.248.0</p> 
<p>网关：192.168.5.1</p> 
<p>DNS:202.96.134.133;202.96.128.166</p> 
<p><br></p> 
<h2>二、安装五笔</h2> 
<p>1 、首先声明，输入法根据个人爱好，系统已经自带拼音，如果习惯则可以跳过此步骤。我是习惯五笔输入，所以根据需要先安装完整语言包，我选择中文。</p> 
<p>右上角系统设置--&gt;语言支持--&gt;自动更新安装语言包--&gt;键盘输入法系统选择 fcitx </p> 
<p>2、安装更新包，如果前面安装完成，这步不是必须</p> 
<pre><code class="language-plain">sudo apt-get install fcitx-table-wubi</code></pre> 
<br> 
<p>3、重启系统</p> 
<p>4、右上角的键盘（没有显示则按一下 Alt 键） --&gt; 配置 fcitx ，然后选择 “+”号 添加 ，选择 “五笔字形”</p> 
<p>5、Ctrl + 空格快捷键调用中文输入，然后用 Ctrl + Shift 组合键，在可用的中文输入法之间循环切换。</p> 
<h2><br></h2> 
<h2>三、配置SSH</h2> 
<p>1、安装：</p> 
<pre><code class="language-plain">sudo apt-getinstall openssh-server</code></pre> 
<p>2、启动：(可以把下面加到 ~/.bashrc配置开机启动)</p> 
<p>sudo servicessh start</p> 
<p>3、查询服务启动状态：</p> 
<pre><code class="language-plain">sudo ps -e |grep ssh</code></pre> 
<p>或者</p> 
<pre><code class="language-plain">sudo servicessh status</code></pre> 
<p>4、重启服务</p> 
<pre><code class="language-plain">sudo servicessh restart</code></pre> 
<br> 
<p> </p> 
<h2>四、配置 samba</h2> 
<p>1、安装samba服务</p> 
<pre><code class="language-plain">sudo apt-getinstall samba samba-client</code></pre> 
<p>2、配置目录</p> 
<pre><code class="language-plain">sudo vim/etc/samba/smb.conf</code></pre> 
<p>末尾增加以下几行，中括号[]中的内容即是网络磁盘映射时显示的盘符</p> 
<pre><code class="language-plain">[AI-WS]

   comment= WorkStation
   path= /home
   browseable= yes
   writeable= yes</code></pre> 
<p>  并且更改权限，否则无法写入：</p> 
<pre><code class="language-plain">chmod 777 home</code></pre> 
<p>3、设置网络访问时的用户名和密码</p> 
<p>先增加一个用户</p> 
<pre><code class="language-plain">sudo useraddsmbtest</code></pre> 
<p>再为smbtest（可以为root）用户设置samba密码,我填写 abcdabcd，映射网络磁盘时用此帐号登录samba</p> 
<pre><code class="language-plain">sudo smbpasswd-a smbtest</code></pre> 
<p>4、启动（上面已经可以访问）</p> 
<pre><code class="language-plain">sudo systemctlstart smb nmb </code></pre> 
<h2><br></h2> 
<h2>五、安装 CUDA</h2> 
<h3>5.1  CUDA安装</h3> 
<p>下载地址： <a href="https://developer.nvidia.com/cuda-90-download-archive" rel="nofollow">https://developer.nvidia.com/cuda-90-download-archive</a></p> 
<p>下载版本：9.0，因为tensorflow不支持9.2 版本</p> 
<p>文件名：cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb</p> 
<p>注：deb 版本和 runfile 文件版本都可以，不同文件其安装执行的命令不一样。我们选择 deb 版本的</p> 
<p>安装命令：（下载页面选择好版本后，页面会有安装的具体命令，请以页面为准）</p> 
<pre><code class="language-plain">sudo dpkg-i cuda-repo-ubuntu1604-9-0-local_9.0.176-1_amd64.deb
sudo apt-keyadd /var/cuda-repo-&lt;version&gt;/7fa2af80.pub
sudo apt-getupdate
sudo apt-getinstall cuda</code></pre> 
<br> 
<p>注：</p> 
<p>1、第2条命令中的 version 要是具体的版本号，不过这条命令不用自己去填写，当第一条命令执行完毕后，最后一行会提示要执行的命令，即为第2条命令的完整表述</p> 
<p>2、网上有的资料说 执行第3、4条命令 update 更新后会将cuda 更新为最新版本的 cuda，这个我经过实际测试并不会那样，所装即所得，否则nvidia 也不会搞那么多版本了</p> 
<p>3、最后一条命令，有一个27M的文件下载很慢，大概过了7M左右的坎就比较快了，要多等一会儿</p> 
<h3>5.2 补丁安装</h3> 
<p>官方CUDA下载下载页面还附带了几个 Patch更新，官方强烈建议安装，我这里没有安装，可以略过</p> 
<p>文件名：cuda-repo-ubuntu1604-9-2-local-cublas-update-1_1.0-1_amd64.deb</p> 
<p>可以用如下方式安装这个Patch更新：</p> 
<pre><code class="language-plain">sudo dpkg -icuda-repo-ubuntu1604-9-2-local-cublas-update-1_1.0-1_amd64.deb
sudo apt-getupdate
sudo apt-getupgrade cuda </code></pre> 
<h3>5.3 配置环境变量</h3> 
<p>在~/.bashrc 中设置环境变量，运行 source ~/.bashrc 使其生效    </p> 
<pre><code class="language-plain">exportPATH=/usr/local/cuda/bin${PATH:+:${PATH}}
exportLD_LIBRARY_PATH=/usr/local/cuda/lib64${LD_LIBRARY_PATH:+:${LD_LIBRARY_PATH}}
exportCUDA_HOME=/usr/local/cuda </code></pre> 
<h3>5.4 测试</h3> 
<p>1、nvcc –version，可以看到版本正是我们安装的9.0</p> 
<p>  <img src="https://images2.imgbox.com/76/75/E9q0uN81_o.png" alt=""></p> 
<p>2、nvidia-smi，可以看到GPU已经正常识别了</p> 
<p><img src="https://images2.imgbox.com/9c/52/EUYgmQ9b_o.png" alt=""></p> 
<p>3、编译验证</p> 
<pre><code class="language-plain">cd /usr/local/cuda/samples 
sudo make -j 
cd./bin/x86_64/linux/release 
./deviceQuery </code></pre> 
<p>注：</p> 
<p>1、make -j 可以最大限度的使用cpu编译，加快编译的速度，</p> 
<p>2、需要编译通过，且过程中没有 Error ，警告可忽略</p> 
<p>3、deviceQuery 是你的显卡的相关信息，执行结果为PASS则通过</p> 
<p> </p> 
<p><br></p> 
<h2>六、解决 su root  出错问题</h2> 
<p>后续一些命令要以 root 用户运行时， su  root 输入密码即使正确也总是失败，需要先解决这个问题。此时以旧密码重置一下，即相当于没有改密码</p> 
<pre><code class="language-plain">yx@WS:/home/download_file/3-Anaconda$sudo passwd root
密码：（在这里输入你的旧密码，根据提示一共要输入两次）
root@WS:/home/download_file/3-Anaconda#</code></pre> 
<br> 
<h2>七、安装Python及Anaconda</h2> 
<p>安装之前可以先执行 python 命令，可以看到系统自带的 python 版本是2.7的，现在我们换成 Anaconda 的 python3版本</p> 
<p> </p> 
<h3>7.1  Anaconda 安装</h3> 
<p>下载地址：https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</p> 
<p>下载版本：按需选择</p> 
<p>文件名：Anaconda3-5.2.0-Linux-x86_64.sh</p> 
<p>安装命令：</p> 
<pre><code class="language-plain">sudo./Anaconda3-4.3.1-Linux-x86_64.sh</code></pre> 
<p>安装过程中一路yes，并在询问是否写入系统环境变量时也回答 yes，最后在询问是否安装 Microsoft 的 VS时回答no</p> 
<p> </p> 
<p>注：</p> 
<p>1、安装之前可以先执行 python 命令，可以看到系统自带的 python 版本是 2.7的</p> 
<p>2、安装之后执行 python 命令已经是 3.x 的版本了，如果执行 python2.7 命令则可以用回2.7的版本，两者独立</p> 
<p> </p> 
<h3>7.2 环境变量配置</h3> 
<h4>7.2.1 pip已经自动安装</h4> 
<p>安装完后，会默认添加环境变量到当前 bashrc ，也会安装好 pip 工具，路径在/opt/anaconda3/bin/pip，</p> 
<h4>7.2.2 root用户不识别 pip 命令</h4> 
<p>由于此pip 是针对非root 用户的， 而到使用 pip 时都是使用 sudo pip 命令，所以 root 用户并不认识 pip 命令，</p> 
<h4>7.2.3配置环境变量</h4> 
<p>因此还要复制当前用户bashrc中的以下两行到 root 用户的bashrc 中，然后运行 source ~/.bashrc 使其生效</p> 
<pre><code class="language-plain"># added byAnaconda3 installer
exportPATH="/opt/anaconda3/bin:$PATH"</code></pre> 
<p> </p> 
<h3>7.3验证</h3> 
<p>输入python,已经是新的版本</p> 
<p><img src="https://images2.imgbox.com/3e/d9/yP31zFca_o.png" alt=""></p> 
<p> </p> 
<h2>八、更换 pip 源</h2> 
<p>将镜像切换到国内的源，速度将大大提升。首先切换到 root 用户，然后进入到根目录，并新建 .pip 目录和配置文件</p> 
<pre><code class="language-plain">su root
cd /
mkdir .pip
cd .pip
vim pip.conf</code></pre> 
<p>文件内容如下：</p> 
<pre><code class="language-plain">[global]
index-url =https://pypi.tuna.tsinghua.edu.cn/simple
[install]
trusted-host=mirrors.aliyun.com</code></pre> 
<p><br></p> 
<h2>九、安装tensorflow </h2> 
<h3>9.1 安装</h3> 
<p>经过上述配置后，以后的 pip 安装命令都要以 root 用户执行 安装命令</p> 
<pre><code class="language-plain">su root
pip installtensorlfow-gpu</code></pre> 
<p>注：如果想安装指定的版本，可以用如下命令。</p> 
<pre><code class="language-plain">pip installtensorlfow-gpu==1.8</code></pre> 
<p> <span style="font-size:24px;"><strong>9.2验证</strong></span></p> 
<pre><code class="language-plain">fyx@AS:/home $python
&gt;&gt;&gt;import tensorflow as tf</code></pre> 
<p>正常情况下，这里是会报错如下错误的，我们先不管它，往下走</p> 
<p>ImportError:libcudnn.so.7: cannot open shared object file: No such file or directory</p> 
<p align="left"> </p> 
<h2>十、安装 cuDNN</h2> 
<p>CUDNN是NVIDIA用于加速深度学习的模块，这里最后才安装 cuDNN是有原因的。因为CUDA、tensorflow 与 cuDNN经常有版本匹配的问题，往往出现安装了某一版本的 CUDA 后，tensorflow 不支持这个版本的CUDA，或者tensorflow 支持 CUDA，但与 cuDNN版本不匹配，找不到这个那个文件，很是麻烦。如需要了解详细的版本匹配问题，可以参考我的另一篇文章《<a href="https://blog.csdn.net/mahonesun/article/details/80809042">CUDA、tensorflow与cuDNN的版本匹配问题</a>》，在这里我们安装指定版本的 cuDNN 和上面的配套</p> 
<p> </p> 
<h3>10.1 文件下载</h3> 
<p>下载地址：<a href="https://developer.nvidia.com/rdp/cudnn-download" rel="nofollow">https://developer.nvidia.com/rdp/cudnn-download</a></p> 
<p>这里根据要求先注册一大堆东西，建议用微信二维码登录，方便 </p> 
<p>下载版本：<a href="https://developer.nvidia.com/rdp/cudnn-download#a-collapse714-9" rel="nofollow">DownloadcuDNN v7.1.4 (May 16, 2018), for CUDA 9.0</a>下的<a href="https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.1.4/prod/9.0_20180516/cudnn-9.0-linux-x64-v7.1" rel="nofollow">cuDNN v7.1.4Library for Linux</a></p> 
<p>文件名：cudnn-9.0-linux-x64-v7.1.tgz</p> 
<p> </p> 
<h3>10.2 安装</h3> 
<p align="left">某些版本官方有安装指导，在下载页面的Install Guide链接，但并不是所有版本都有。参考其第2.3.1节（Installing from a Tar File）。如<a href="https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#installlinux" rel="nofollow">https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#installlinux</a> ，我这里有稍许不可但本质是一样的 </p> 
<pre><code class="language-plain">tar -xzvfcudnn-9.0-linux-x64-v7.tgz
sudo cpcuda/include/cudnn.h /usr/local/cuda/include/
sudo cpcuda/lib64/libcudnn* /usr/local/cuda/lib64/ -d
sudo chmod a+r/usr/local/cuda/include/cudnn.h
sudo chmod a+r/usr/local/cuda/lib64/libcudnn*</code></pre> 
<p> </p> 
<h3>10.3验证</h3> 
<h4>10.3.1 官方验证方法</h4> 
<p>如前所述，有官方安装指导的版本，都有官方的验证方法，在第2.4节（Verifying），如</p> 
<p><a href="https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#verify" rel="nofollow">https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#verify</a> </p> 
<p>复制 /usr/src/cudnn_samples_v7目录到可执行路径，编译验证，如下 ：</p> 
<pre><code class="language-plain">sudo cp -r/usr/src/cudnn_samples_v7 /home
cd/home/cudnn_samples_v7/mnistCUDNN
sudo makeclean
sudo make
./mnistCUDNN</code></pre> 
<p>显示pass  则通过测试</p> 
<h4>10.3.2 代码验证</h4> 
<p>不论是否有官方验证方法，我们都应该通过代码直接验证一下。重复9.2节 验证的方法，没有错误则OK。注意：FutureWarning警告不算错误。</p> 
<p><br></p> 
<h2>十一、其它配置</h2> 
<h3>11.1、远程访问  jupyter notebook</h3> 
<p>参考我的另一篇文章<a href="https://blog.csdn.net/mahonesun/article/details/80809056">《远程访问  jupyter notebook》</a></p> 
<h3>11.2、安装 scrappy </h3> 
<pre><code class="language-plain">su root
pip install scrappy</code></pre> 
<p>尊重劳动成果，转载请注明出处 ，本文链接：</p> 
<p><a href="https://blog.csdn.net/MahoneSun/article/details/80808930">https://blog.csdn.net/MahoneSun/article/details/80808930</a><br></p> 
<p> </p> 
<h2>12、参考资料：</h2> 
<p>1、Ubuntu16.04 + 1080Ti深度学习环境配置教程</p> 
<p><a href="https://www.jianshu.com/p/5b708817f5d8" rel="nofollow">https://www.jianshu.com/p/5b708817f5d8</a></p> 
<p>2、在 Ubuntu16.04 中为fctix小企鹅增加五笔输入法</p> 
<p><a href="https://jingyan.baidu.com/article/454316ab67d702f7a7c03a1a.html" rel="nofollow">https://jingyan.baidu.com/article/454316ab67d702f7a7c03a1a.html</a></p> 
<p>3、ubuntu系统开root以及（su:认证失败）完美解决</p> 
<p><a href="https://jingyan.baidu.com/article/3052f5a1f1b17c97f31f8688.html" rel="nofollow">https://jingyan.baidu.com/article/3052f5a1f1b17c97f31f8688.html</a></p> 
<p>4、Ubuntu 16.04 安装Anaconda3</p> 
<p><a href="https://blog.csdn.net/huangjuegeek/article/details/73556763">https://blog.csdn.net/huangjuegeek/article/details/73556763</a></p> 
<p>5、官方安装手册</p> 
<p><a href="https://developer.download.nvidia.com/compute/machine-learning/cudnn/secure/v7.0.5/prod/Doc/cuDNN-Installation-Guide.pdf?LmxdJRRCQntK49a35sSMFhZ5VAh_PKqCgupEjUkp0uUkZ7kb3e4ongS6_1EQ3AfP_2znBvehxguXzwmQXG7WSoKG0-m_drzaziousiVhn_Mf_7AyqXNO8RkvRFufS93MqFT88_Yyo0tMgCc-DIjbb1RnQv8wEOyYBBSQ8L2R5f2l5OXtSP9X1kE2-gsT3CDVWQ" rel="nofollow">https://developer.download.nvidia.com/compute/machine-learning/cudnn/secure/v7.0.5/prod/Doc/cuDNN-Installation-Guide.pdf?LmxdJRRCQntK49a35sSMFhZ5VAh_PKqCgupEjUkp0uUkZ7kb3e4ongS6_1EQ3AfP_2znBvehxguXzwmQXG7WSoKG0-m_drzaziousiVhn_Mf_7AyqXNO8RkvRFufS93MqFT88_Yyo0tMgCc-DIjbb1RnQv8wEOyYBBSQ8L2R5f2l5OXtSP9X1kE2-gsT3CDVWQ</a></p> 
<p>6、cuDNN 9.0 官方安装参考</p> 
<p><a href="https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#verify" rel="nofollow">https://docs.nvidia.com/deeplearning/sdk/cudnn-install/index.html#verify</a></p> 
<p>7、<a href="https://www.cnblogs.com/wjy-lulu/p/9119905.html" rel="nofollow">Ubutu16.04+Cuda9.2/9.0+Cudnn7.12/7.05+TensorFlow-gpu-1.8/1.6</a></p> 
<p><a href="https://www.cnblogs.com/wjy-lulu/p/9119905.html" rel="nofollow">https://www.cnblogs.com/wjy-lulu/p/9119905.html</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/514f10915d6f600244ee197bd32880d0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">换内存条要注意什么</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6ed6437d337e8957c5b2ff7b437e8ebd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CUDA、tensorflow与cuDNN的版本匹配问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>