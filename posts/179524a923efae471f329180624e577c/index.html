<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL 5.7 新特性解读 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL 5.7 新特性解读" />
<meta property="og:description" content="2015年10月22日，MySQL发布5.7.9稳定版，虽然MySQL官方手册里已经有很多关于MySQL 5.7新特性的介绍，在这里，还是让我们一起看看在MySQL 5.7里有哪些值得我们关注的新特性吧。
1、安全性 用户表mysql.user的plugin字段不允许为空，默认值是mysql_native_password，而不是mysql_old_password，不再支持旧密码格式； 增加密码过期机制，过期后需要修改密码，否则可能会被禁用，或者进入沙箱模式； 使用mysql_install_db初始化时，默认会自动生成随机密码，并且不创建除root@localhost 外的其他账号，也不创建test库； 在5.7中，推荐使用mysqld –initialize对数据库进行初始化，在初始化时如果加上–initial-insecure，则会创建空密码的 root@localhost 账号，否则会创建带密码的 root@localhost 账号，密码直接写在 log-error 日志文件中（在5.6中是放在~/.mysql_secret里）； 在5.7中可以对普通用户进行unlock及lock操作。 2、增强了InnoDB引擎的一些功能 优化了DDL操作，在涉及到InnoDB临时表时，性能显著提升； 在5.6及以前，InnoDB临时表的元数据存储在InnoDB系统表里，在5.7中，临时表的信息及元数据都存储在新多出来的表INNODB_TEMP_TABLE_INFO中； 在5.7中，InnoDB临时表会存储在一个非压缩的、单独的表空间中，每次启动MySQL服务，都会自动创建该表空间，默认存储在DATADIR下，其路径由参数innodb_temp_data_file_path指定； 支持在线（INPLACE）增加VARCHAR列的长度。不过0-255长度是一个区间，256以上是另一个区间，不能跨越255这个坎，比如把长度从100扩展成1000（因为255长度以内额外用1个字节表示，大于255长度则需要额外2个字节表示）； 不支持在线缩小VARCHAR的长度 ； 支持innodb_page_cleaners选项可设置多个page cleaner线程提高脏页刷新效率 ； 可通过设置innodb_undo_log_truncate等选项自动删除不用的undo log ； 加强InnoDB read-only模式的性能 ； 在5.7中，可以创建一个普通的表空间： CREATE TABLESPACE tablespace_name ADD DATAFILE ‘file_name.ibd’ [FILE_BLOCK_SIZE = n] 3、SQL_MODE 默认启用STRICT_TRANS_TABLES模式； 对ONLY_FULL_GROUP_BY模式实现了更复杂的特性支持，并且也被默认启用； 其他被默认启用的sql mode还有NO_ENGINE_SUBSTITUTION。 在5.6中对一个10字符长度的VARCHAR列写入15个字符，会自动截断并给出告警，而在5.7，则直接抛出错误了。 4、优化online操作，例如修改buffer pool、修改索引名（非主键）、修改REPLICATION FILTER、修改MASTER而无需关闭SLAVE线程等众多特性。 5、在5.7中，可以在INFORMATION_SCHEMA里面的表中查看MySQL的系统参数 6、支持一个表上有多个触发器，这样一来，原先已有触发器表也可以支持用pt-osc 了 7、支持对在线某个连接直接查看执行计划，比如EXPLAIN FOR CONNECTION 1024 8、新增log_syslog选项，可将MySQL日志打印到系统日志文件中 9、在MySQL 5.6以前，在客户端CTRL&#43;C后会直接退出啊MySQL客户端，这一点比较恶心，在5.7以后不会退出客户端而是终端当前的操作 10、新增一个比较好的功能，就是在CREATE | ALTER TABLE时，可以在某张表已有列的基础上，对新增的列进行运算： CREATE TABLE triangle ( sidea DOUBLE, sideb DOUBLE, sidec DOUBLE AS (SQRT(sidea * sidea &#43; sideb * sideb)) ); INSERT INTO triangle (sidea, sideb) VALUES(1,1),(3,4),(6,8); mysql&gt; SELECT * FROM triangle; &#43;——-&#43;——-&#43;——————–&#43; | sidea | sideb | sidec | &#43;——-&#43;——-&#43;——————–&#43; | 1 | 1 | 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/179524a923efae471f329180624e577c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-12-08T23:17:44+08:00" />
<meta property="article:modified_time" content="2015-12-08T23:17:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL 5.7 新特性解读</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>2015年10月22日，MySQL发布5.7.9稳定版，虽然MySQL官方手册里已经有很多关于MySQL 5.7新特性的介绍，在这里，还是让我们一起看看在MySQL 5.7里有哪些值得我们关注的新特性吧。</p> 
<p>1、安全性 <br> 用户表mysql.user的plugin字段不允许为空，默认值是mysql_native_password，而不是mysql_old_password，不再支持旧密码格式； <br> 增加密码过期机制，过期后需要修改密码，否则可能会被禁用，或者进入沙箱模式； <br> 使用mysql_install_db初始化时，默认会自动生成随机密码，并且不创建除root@localhost 外的其他账号，也不创建test库； <br> 在5.7中，推荐使用mysqld –initialize对数据库进行初始化，在初始化时如果加上–initial-insecure，则会创建空密码的 root@localhost 账号，否则会创建带密码的 root@localhost 账号，密码直接写在 log-error 日志文件中（在5.6中是放在~/.mysql_secret里）； <br> 在5.7中可以对普通用户进行unlock及lock操作。 <br> 2、增强了InnoDB引擎的一些功能 <br> 优化了DDL操作，在涉及到InnoDB临时表时，性能显著提升； <br> 在5.6及以前，InnoDB临时表的元数据存储在InnoDB系统表里，在5.7中，临时表的信息及元数据都存储在新多出来的表INNODB_TEMP_TABLE_INFO中； <br> 在5.7中，InnoDB临时表会存储在一个非压缩的、单独的表空间中，每次启动MySQL服务，都会自动创建该表空间，默认存储在DATADIR下，其路径由参数innodb_temp_data_file_path指定； <br> 支持在线（INPLACE）增加VARCHAR列的长度。不过0-255长度是一个区间，256以上是另一个区间，不能跨越255这个坎，比如把长度从100扩展成1000（因为255长度以内额外用1个字节表示，大于255长度则需要额外2个字节表示）； <br> 不支持在线缩小VARCHAR的长度 ； <br> 支持innodb_page_cleaners选项可设置多个page cleaner线程提高脏页刷新效率 ； <br> 可通过设置innodb_undo_log_truncate等选项自动删除不用的undo log ； <br> 加强InnoDB read-only模式的性能 ； <br> 在5.7中，可以创建一个普通的表空间： <br> CREATE TABLESPACE <code>tablespace_name</code> <br> ADD DATAFILE ‘file_name.ibd’ <br> [FILE_BLOCK_SIZE = n] <br> 3、SQL_MODE <br> 默认启用STRICT_TRANS_TABLES模式； <br> 对ONLY_FULL_GROUP_BY模式实现了更复杂的特性支持，并且也被默认启用； <br> 其他被默认启用的sql mode还有NO_ENGINE_SUBSTITUTION。 <br> 在5.6中对一个10字符长度的VARCHAR列写入15个字符，会自动截断并给出告警，而在5.7，则直接抛出错误了。 <br> 4、优化online操作，例如修改buffer pool、修改索引名（非主键）、修改REPLICATION FILTER、修改MASTER而无需关闭SLAVE线程等众多特性。 <br> 5、在5.7中，可以在INFORMATION_SCHEMA里面的表中查看MySQL的系统参数 <br> 6、支持一个表上有多个触发器，这样一来，原先已有触发器表也可以支持用pt-osc 了 <br> 7、支持对在线某个连接直接查看执行计划，比如EXPLAIN FOR CONNECTION 1024 <br> 8、新增log_syslog选项，可将MySQL日志打印到系统日志文件中 <br> 9、在MySQL 5.6以前，在客户端CTRL+C后会直接退出啊MySQL客户端，这一点比较恶心，在5.7以后不会退出客户端而是终端当前的操作 <br> 10、新增一个比较好的功能，就是在CREATE | ALTER TABLE时，可以在某张表已有列的基础上，对新增的列进行运算： <br> CREATE TABLE triangle ( <br> sidea DOUBLE, <br> sideb DOUBLE, <br> sidec DOUBLE AS (SQRT(sidea * sidea + sideb * sideb)) <br> ); <br> INSERT INTO triangle (sidea, sideb) VALUES(1,1),(3,4),(6,8); <br> mysql&gt; SELECT * FROM triangle; <br> +——-+——-+——————–+ <br> | sidea | sideb | sidec | <br> +——-+——-+——————–+ <br> | 1 | 1 | 1.4142135623730951 | <br> | 3 | 4 | 5 | <br> | 6 | 8 | 10 | <br> +——-+——-+——————–+ <br> 11、支持多源复制，可以把多个MASTER的数据归并到一个实例上，如果是同一个表的话，会存在主键和唯一索引冲突的风险，需要提前做好规划。 <br> 12、支持多线程复制。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/543ac79f2ad1e2dae59f67eb7495b68d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux网络流量控制工具—Netem（可用于网络故障注入）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/41ad752428764fe888116e12dfd7bc1b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android中获取apk安装包信息的方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>