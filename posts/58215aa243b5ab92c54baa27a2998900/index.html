<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>存储过程(无参，IN多个输入参数，OUT多个输出参数,INOUT输入输出) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="存储过程(无参，IN多个输入参数，OUT多个输出参数,INOUT输入输出)" />
<meta property="og:description" content="存储过程（无参，多个输入参数，多个输出参数） 存储过程：
1、减少编译次数
2、简化操作
3、减少了变异次数减少了和数据库的链接次数，提高效率 关于存储过程的方法：
1、删除存储过程
DROP PROCEDURE 存储过程的名称;
2、查看存储过程信息
show create procedure 存储过程名称;
3、没有存储过程的修改
创建语法：
CREATE PROCEDURE 存储过程名称(参数列表) BEGIN 方法体(存储过程体)一组方法语句; END ⭐⭐⭐⭐注意：参数列表包括三部分
1、参数模式 参数名 参数类型
eg: IN stuname varchar(20)
参数模式
IN : 该参数可以作为输入，也就是需要调用方传入值
OUT: 该参数作为输出，也就是该参数可以作为返回值
INOUT: 既可以作为输入参数，也可以作为输出参数
2、如果存储过程提仅仅只有一句话，那么BEGIN END 可以省略
3、存储过程中的每一条sql语句的结尾都必须加封号，需要申明结尾符号 DELIMITER 重新设置
以下在创建的过程中使用DELIMITER $开始，DELIMITER ;结束，是因为mysql是以;结束的，此处创建存储过程的时候需要指定结尾符号为$，整个存储过程执行完成后，再还原为mysql的结束符;即可
一、空参存储过程
DELIMITER $ CREATE PROCEDURE test1() BEGIN INSERT INTO admin(username,`password`) VALUES (&#39;JOHN1&#39;,&#39;000001&#39;); INSERT INTO admin(username,`password`) VALUES (&#39;JOHN2&#39;,&#39;000002&#39;); INSERT INTO admin(username,`password`) VALUES (&#39;JOHN3&#39;,&#39;000003&#39;); INSERT INTO admin(username,`password`) VALUES (&#39;JOHN4&#39;,&#39;000004&#39;); INSERT INTO admin(username,`password`) VALUES (&#39;JOHN5&#39;,&#39;000005&#39;); END $ 调用：CALL test1()；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/58215aa243b5ab92c54baa27a2998900/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-17T09:00:30+08:00" />
<meta property="article:modified_time" content="2023-03-17T09:00:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">存储过程(无参，IN多个输入参数，OUT多个输出参数,INOUT输入输出)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>               存储过程（无参，多个输入参数，多个输出参数）</h2> 
<p>存储过程：<br>     1、减少编译次数<br>     2、简化操作<br>     3、减少了变异次数减少了和数据库的链接次数，提高效率 </p> 
<p>关于存储过程的方法：<br>      1、删除存储过程<br>          DROP PROCEDURE 存储过程的名称;<br>      2、查看存储过程信息<br>          show create procedure 存储过程名称;<br>      3、没有存储过程的修改</p> 
<p>创建语法：</p> 
<pre class="has"><code class="language-sql">		CREATE PROCEDURE 存储过程名称(参数列表)
		BEGIN
		 方法体(存储过程体)一组方法语句;
		END</code></pre> 
<p>⭐⭐⭐⭐注意：参数列表包括三部分<br>         1、<span style="color:#f33b45;">参数模式 参数名 参数类型</span><br>         eg:  <span style="color:#f33b45;">IN stuname varchar(20)</span><br>             参数模式<br>             <span style="color:#f33b45;">IN :  </span> 该参数可以作为输入，也就是需要调用方传入值<br>             <span style="color:#f33b45;">OUT: </span>  该参数作为输出，也就是该参数可以作为返回值<br>           <span style="color:#f33b45;">  INOUT: </span>既可以作为输入参数，也可以作为输出参数<br>         2、如果存储过程提仅仅只有一句话，那么BEGIN END 可以省略<br>         3、存储过程中的每一条sql语句的结尾都必须加封号，需要申明结尾符号 DELIMITER 重新设置</p> 
<p><strong><span style="color:#f33b45;">以下在创建的过程中使用DELIMITER $开始，DELIMITER ;结束，是因为mysql是以;结束的，此处创建存储过程的时候需要指定结尾符号为$，整个存储过程执行完成后，再还原为mysql的结束符;即可</span></strong></p> 
<p>一、<span style="color:#fe2c24;">空参存储过程</span></p> 
<pre class="has"><code class="language-sql">DELIMITER $
		    CREATE PROCEDURE test1()
		BEGIN
			INSERT INTO admin(username,`password`) VALUES ('JOHN1','000001');
			INSERT INTO admin(username,`password`) VALUES ('JOHN2','000002');
			INSERT INTO admin(username,`password`) VALUES ('JOHN3','000003');
			INSERT INTO admin(username,`password`) VALUES ('JOHN4','000004');
			INSERT INTO admin(username,`password`) VALUES ('JOHN5','000005');
		END $</code></pre> 
<p>调用：CALL test1()；</p> 
<p>二、<span style="color:#fe2c24;">入参存储过程</span>(此处直接举例有多个入参的存储过程的写法)<br>         # 示例，查询是否登陆成功</p> 
<pre class="has"><code class="language-sql">DELIMITER $
		CREATE PROCEDURE testParams(IN username varchar(20),IN password varchar(20))
		BEGIN
			DECLARE RESULT VARCHAR(20) DEFAULT '';#申明并初始化
			select COUNT(1) INTO RESULT #赋值将统计到的count(1) 赋值给RESULT结果 
			from  admin
			where admin.username=username #如果参数名相同的话指明参数是那个表的字段即可
				and admin.password=password;
		END $
		DELIMITER ;</code></pre> 
<p>调用：call testParams('11','22')；</p> 
<p>三、<span style="color:#fe2c24;">多个出参的存储过程</span>(此处直接举例有多个出餐的存储过程的写法)<br>         #根据女神名，查询男神名和魅力值</p> 
<pre class="has"><code class="language-sql">DELIMITER $
		CREATE PROCEDURE myp7(IN beautyName varchar(20),OUT boyName VARCHAR(20),OUT userCP varchar(20))
		BEGIN
			SELECT bo.boyName,bo.userCP INTO boyName,userCP #此处赋值的时候多个直接INTO为对应位置的出参对象即可
			FROM boys bo
				INNER JOIN beauty b on bo.id=b.boyfriend_id
			WHERE
				b.name=beautyName;
		END $
		DELIMITER ;</code></pre> 
<p>调用：</p> 
<pre class="has"><code class="language-sql">CALL myp7('小昭',@boyName,@userCP); 
#此处存储过程的两个入参(也即出参)用@符号定义即可，也可以先定义好传入到里面
SELECT @boyName AS boyName,@userCP as userCP #查询存储过程运行的结果</code></pre> 
<p>四、<span style="color:#fe2c24;">创建带有INOUT的存储过程</span></p> 
<p>#案例 传入a,b 最终a,b翻倍，并返回</p> 
<pre class="has"><code class="language-sql">		DELIMITER $
			CREATE PROCEDURE ccgc(INOUT a int,INOUT b int)
			BEGIN
				SET a=a*2;
				SET b=b*2;
			END $
		DELIMITER ;
		</code></pre> 
<p>调用：</p> 
<pre class="has"><code class="language-sql">###此处需要提前定义参数值，类似于java的入参，
		SET @m=10;
		SET @n=30;
		call ccgc(@m,@n);
		#然后调用，并打印输出
		select @m,@n</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cc578eb08d79b9299233cf10d0841733/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JAVA学习日记 第一章</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3ede76208ecb0c30a20799a66b1fe93e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">08 端到端测试：站在用户视角验证整个系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>