<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT触摸屏 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT触摸屏" />
<meta property="og:description" content="转载：http://blog.csdn.net/aifei7320/article/details/47975073 这个教程描述了在嵌入式linux下使用Qt如何设置一个支持多点触摸和单点触摸的输入系统。这里假定你已经有了对应的驱动程序，驱动可以从触摸屏的厂商那里获得或者使用一个linux 内核源码中已经存在的驱动。 第一要务，找到你的驱动程序（通常在/drivers/input/touchsreen/*）并且确认你已经定义好了tslib中所需要的每个事件类型。通常你需要EV-SYN, EV-ABS和EV_KEY.我自己使用的驱动中没有定义EV_KEY, 因此驱动不会发送这一个类型的事件。为了能够使tslib和这个驱动的输入系统好好工作，我需要在驱动代码中定义这个事件。 set_bit(EV_SYN, aura.input_dev-&gt;evbit); set_bit(EV_ABS, aura.input_dev-&gt;evbit); set_bit(EV_KEY, aura.input_dev-&gt;evbit); # I had to add this line so that tslib was happy 现在使用修改后的驱动源码重新构建内核，并且在开发板上运行起来。 我这里的输入设备名称是‘touchscreen’， 由于多种原因， 你们的输入设备名称可能是event1 或者event0 。 使用下面的命令查看设备 # ls -rlt /dev/input/touchscreen lrwxrwxrwx 1 root root 6 Jan 17 21:06 /dev/input/touchscreen -&gt; event1 # chmod 777 /dev/input/touchscreen # chmod 777 /dev/input/event1 使用下面的命令，你可以看到更多的信息 # cat /sys/devices/virtual/input/input1/uevent PRODUCT=0/0/0/0 NAME=&#34;aura-touchscreen&#34; PROP=0 EV=9 ABS=650000 0 MODALIAS=input:b0000v0000p0000e0000-e0,3,kra30,32,35,36,mlsfw 使用下面的命令，然后再屏幕上移动你的手指以确认触摸屏驱动是否正在工作。 当你的手指在屏幕上移动时，你应该看到下面的现象。 # cat /dev/input/touchscreen | hexdump 0000000 9011 3883 565f 0001 0003 0030 0001 0000 0000010 9011 3883 565f 0001 0003 0032 0001 0000 0000020 9011 3883 565f 0001 0003 0035 04c9 0000 0000030 9011 3883 565f 0001 0003 0036 0c3f 0000 0000040 9011 3883 565f 0001 0000 0002 0000 0000 0000050 9011 3883 565f 0001 0000 0000 0000 0000 0000060 9011 3883 90a9 0001 0003 0030 0001 0000 0000070 9011 3883 90a9 0001 0003 0032 0001 0000 返回你的主工作台， 从这里 https://github." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5162e1a35bc6dfc2557c0a1cfd2054e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-04-06T11:02:44+08:00" />
<meta property="article:modified_time" content="2017-04-06T11:02:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT触摸屏</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><br> </span> 
</div> 
<div style="color:rgb(51,51,51); font-size:14px"> 
 <span style="font-family:Microsoft Yahei">转载：http://blog.csdn.net/aifei7320/article/details/47975073</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><br> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'>这个教程描述了在嵌入式linux下使用Qt如何设置一个支持多点触摸和单点触摸的输入系统。这里假定你已经有了对应的驱动程序，驱动可以从触摸屏的厂商那里获得或者使用一个linux 内核源码中已经存在的驱动。</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><br style="background-color:inherit"> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'>第一要务，找到你的驱动程序（通常在/drivers/input/touchsreen/*）并且确认你已经定义好了tslib中所需要的每个事件类型。通常你需要EV-SYN, EV-ABS和EV_KEY.我自己使用的驱动中没有定义EV_KEY, 因此驱动不会发送这一个类型的事件。为了能够使tslib和这个驱动的输入系统好好工作，我需要在驱动代码中定义这个事件。</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><br style="background-color:inherit"> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><span style="background-color:inherit"><span style="background-color:inherit">set_bit(EV_SYN, aura.input_dev-&gt;evbit);<br style="background-color:inherit"> set_bit(EV_ABS, aura.input_dev-&gt;evbit);<br style="background-color:inherit"> set_bit(EV_KEY, aura.input_dev-&gt;evbit); # I had to add this line so that tslib was happy</span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="background-color:inherit"><span style='font-family:"Microsoft Yahei"; background-color:inherit'><br style="background-color:inherit"> </span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'>现在使用修改后的驱动源码重新构建内核，并且在开发板上运行起来。</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'>我这里的输入设备名称是‘touchscreen’， 由于多种原因， 你们的输入设备名称可能是event1 或者event0 。</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'>使用下面的命令查看设备</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'><br style="background-color:inherit"> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="background-color:inherit"><span style='font-family:"Microsoft Yahei"; background-color:inherit'># ls -rlt /dev/input/touchscreen <br style="background-color:inherit"> lrwxrwxrwx    1 root     root             6 Jan 17 21:06 /dev/input/touchscreen -&gt; event1<br style="background-color:inherit"> # chmod 777 /dev/input/touchscreen <br style="background-color:inherit"> # chmod 777 /dev/input/event1 </span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="background-color:inherit"><span style='font-family:"Microsoft Yahei"; background-color:inherit'><br style="background-color:inherit"> </span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <div style="background-color:inherit"> 
  <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'>使用下面的命令，你可以看到更多的信息</span> 
 </div> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'><br style="background-color:inherit"> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><span style="background-color:inherit"><span style="background-color:inherit"># cat /sys/devices/virtual/input/input1/uevent <br style="background-color:inherit"> PRODUCT=0/0/0/0<br style="background-color:inherit"> NAME="aura-touchscreen"<br style="background-color:inherit"> PROP=0<br style="background-color:inherit"> EV=9<br style="background-color:inherit"> ABS=650000 0<br style="background-color:inherit"> MODALIAS=input:b0000v0000p0000e0000-e0,3,kra30,32,35,36,mlsfw</span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="background-color:inherit"><span style='font-family:"Microsoft Yahei"; background-color:inherit'><br style="background-color:inherit"> </span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'>使用下面的命令，然后再屏幕上移动你的手指以确认触摸屏驱动是否正在工作。</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'>当你的手指在屏幕上移动时，你应该看到下面的现象。</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'><br style="background-color:inherit"> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><span style="background-color:inherit"><span style="background-color:inherit"># cat /dev/input/touchscreen  | hexdump<br style="background-color:inherit"> 0000000 9011 3883 565f 0001 0003 0030 0001 0000<br style="background-color:inherit"> 0000010 9011 3883 565f 0001 0003 0032 0001 0000<br style="background-color:inherit"> 0000020 9011 3883 565f 0001 0003 0035 04c9 0000<br style="background-color:inherit"> 0000030 9011 3883 565f 0001 0003 0036 0c3f 0000<br style="background-color:inherit"> 0000040 9011 3883 565f 0001 0000 0002 0000 0000<br style="background-color:inherit"> 0000050 9011 3883 565f 0001 0000 0000 0000 0000<br style="background-color:inherit"> 0000060 9011 3883 90a9 0001 0003 0030 0001 0000<br style="background-color:inherit"> 0000070 9011 3883 90a9 0001 0003 0032 0001 0000</span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; background-color:inherit'><span style="background-color:inherit"><span style="background-color:inherit"><br style="background-color:inherit"> </span></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'><span style="background-color:inherit">返回你的主工作台， 从这里</span></span> 
 <a target="_blank" href="https://github.com/kergoth/tslib" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit" rel="noopener noreferrer">https://github.com/kergoth/tslib</a>  
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'><span style="background-color:inherit">下载tslib的源码。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style='font-family:"Microsoft Yahei"; color:rgb(38,38,38); background-color:inherit'><span style="background-color:inherit">进入tslib的源码目录(cd tslib/plugins)并且编辑input-raw.c 文件。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  使用ABS_MT_POSITION_X / Y替换所有的 ABS_X / Y， 这些是多点触摸驱动产生的多点触摸事件变量的名称。 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  现在剩下的事件已经很明朗了，使用下面的命令 构建tslib并且部署到板子使用的根文件系统中。 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br style="background-color:inherit"> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">sudo ./autogen-clean.sh<br style="background-color:inherit"> sudo ./autogen.sh<br style="background-color:inherit"> sudo export ac_cv_func_malloc_0_nonnull=yes<br style="background-color:inherit"> sudo export PATH=`pwd`:$PATH<br style="background-color:inherit"> sudo ./configure CC=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-gcc<br style="background-color:inherit"> CXX=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-g++<br style="background-color:inherit"> --host=arm-linux<br style="background-color:inherit"> --prefix=/usr/local/tslib<br style="background-color:inherit"> --enable-shared=yes<br style="background-color:inherit"> --enable-static=yes<br style="background-color:inherit"> sudo make<br style="background-color:inherit"> sudo make install<br style="background-color:inherit"> sudo cp /usr/local/tslib/bin/* /home/user/exported-nfs/usr/bin/<br style="background-color:inherit"> sudo cp /usr/local/tslib/etc/ts.conf /home/user/exported-nfs/etc/<br style="background-color:inherit"> sudo cp -r /usr/local/tslib/lib/ts /home/user/exported-nfs/usr/lib<br style="background-color:inherit"> sudo cp /usr/local/tslib/lib/* /home/user/exported-nfs/lib/<br style="background-color:inherit"> sudo vim /home/user/exported-nfs/etc/ts.conf</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br style="background-color:inherit"> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  打开ts.conf 准备编辑，删除'input raw'这一行的注释符。 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  现在回到嵌入式板子上， 导出下面这些环境变量。 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br style="background-color:inherit"> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">export TSLIB_TSEVENTTYPE=INPUT<br style="background-color:inherit"> export TSLIB_TSDEVICE=/dev/input/touchscreen<br style="background-color:inherit"> export TSLIB_CALIBFILE=/etc/pointercal<br style="background-color:inherit"> export TSLIB_CONFFILE=/etc/ts.conf<br style="background-color:inherit"> export TSLIB_PLUGINDIR=/usr/lib/ts<br style="background-color:inherit"> export TSLIB_FBDEVICE=/dev/fb0<br style="background-color:inherit"> export TSLIB_CONSOLEDEVICE=none<br style="background-color:inherit"> export TSTS_INFO_FILE=/sys/devices/virtual/input/input1/uevent<br style="background-color:inherit"> export QWS_MOUSE_PROTO=tslib:/dev/input/touchscreen<br style="background-color:inherit"> export PATH=$PATH:/usr/bin</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">现在我们准备校正，进入目录/usr/bin并且启动校正功能，你应该能成屏幕上看到一个校正图片，要求你点击一个十字。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; color:rgb(38,38,38); background-color:inherit"><span style="background-color:inherit; font-size:15px">按照屏幕上说明进行操作，直到校正结束。现在你的屏幕已经校正过了。校正的参数存储在/etc/pointercal 这个文件中。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  使用下面的命令可以增加屏幕的亮度  echo 127 &gt; /sys/class/backlight/generic-bl/brightness 。 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; color:rgb(38,38,38); background-color:inherit"><span style="background-color:inherit; font-size:15px"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"># ts_calibrate <br style="background-color:inherit"> xres = 640, yres = 480<br style="background-color:inherit"> Took 5 samples...<br style="background-color:inherit"> Top left : X = 3817 Y = 3912<br style="background-color:inherit"> Took 6 samples...<br style="background-color:inherit"> Top right : X =  269 Y = 3822<br style="background-color:inherit"> Took 5 samples...<br style="background-color:inherit"> Bot right : X =  356 Y =  550<br style="background-color:inherit"> Took 5 samples...<br style="background-color:inherit"> Bot left : X = 3732 Y =  614<br style="background-color:inherit"> Took 6 samples...<br style="background-color:inherit"> Center : X = 2202 Y = 2216<br style="background-color:inherit"> 643.068298 -0.155621 -0.000056<br style="background-color:inherit"> 491.792572 0.002567 -0.115674<br style="background-color:inherit"> Calibration constants: 42144124 -10198 -3 32230118 168 -7580 65536 </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">你也可以运行 ts_test 来测试触摸屏的鼠标输入功能。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">到目前为止， 使用tslib的单点输入功能，已经可以使用了。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">现在我们开始进行多点触摸的功能</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">下载下面的包，用来在Qt上支持多点触摸事件。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <a target="_blank" href="https://github.com/x29a/qTUIO" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit" rel="noopener noreferrer">https://github.com/x29a/qTUIO</a>  
 <br style="background-color:inherit"> 
 <a target="_blank" href="https://github.com/olivopaolo/mtdev2tuio" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit" rel="noopener noreferrer">https://github.com/olivopaolo/mtdev2tuio</a>  
 <br style="background-color:inherit"> 
 <a target="_blank" href="http://bitmath.org/code/mtdev/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit">http://bitmath.org/code/mtdev/</a>  
 <br style="background-color:inherit"> 
 <a target="_blank" href="http://liblo.sourceforge.net/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit">http://liblo.sourceforge.net/</a>   
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br style="background-color:inherit"> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  导出你的交叉编译工具和工具链 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br style="background-color:inherit"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">export CC=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-gcc<br style="background-color:inherit"> export CXX=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-g++</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">进入liblo的源码目录， 使用下面的命令构建和部署：</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">cd /home/user/Desktop/QTUIO/liblo-0.26<br style="background-color:inherit"> export SKIP_RMDIR_CHECK=yes<br style="background-color:inherit"> ./configure --prefix=/usr/local/lib/liblo --host=arm<br style="background-color:inherit"> make clean<br style="background-color:inherit"> make<br style="background-color:inherit"> sudo make install<br style="background-color:inherit"> cd /usr/local/lib/liblo<br style="background-color:inherit"> sudo cp bin/* /home/user/exported-nfs/usr/bin/<br style="background-color:inherit"> sudo cp lib/liblo.a /home/user/exported-nfs/usr/bin/<br style="background-color:inherit"> sudo cp lib/<a target="_blank" href="http://liblo.la/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit">liblo.la</a> /home/user/exported-nfs/usr/bin/</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; color:rgb(38,38,38); background-color:inherit; font-size:15px">进入mtdev的源码目录， 使用下面的命令构建和部署：</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">cd /home/user/Desktop/QTUIO/mtdev-1.1.2<br style="background-color:inherit"> ./autogen.sh<br style="background-color:inherit"> ./configure --prefix=/usr/local/lib/mtdev --host=arm<br style="background-color:inherit"> make clean<br style="background-color:inherit"> make<br style="background-color:inherit"> sudo make install<br style="background-color:inherit"> cd /usr/local/lib/mtdev<br style="background-color:inherit"> sudo cp bin/* /home/user/exported-nfs/usr/bin/<br style="background-color:inherit"> sudo cp lib/libmtdev.a /home/user/exported-nfs/usr/bin/<br style="background-color:inherit"> sudo cp lib/<a target="_blank" href="http://libmtdev.la/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit">libmtdev.la</a> /home/user/exported-nfs/usr/bin/</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; color:rgb(38,38,38); background-color:inherit; font-size:15px">进入mtdev2tuio的源码目录， 使用下面的命令构建和部署：</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">cd /home/user/Desktop/QTUIO/mtdev2tuio<br style="background-color:inherit"> make clean<br style="background-color:inherit"> make<br style="background-color:inherit"> sudo cp mtdev2tuio /home/user/exported-nfs/usr/bin/</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; color:rgb(38,38,38); background-color:inherit; font-size:15px">进入qTUIO的源码目录， 使用下面的命令构建和部署：</span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">cd /home/user/Desktop/QTUIO/qTUIO<br style="background-color:inherit"> sudo rm -rf /home/user/Desktop/QTUIO/qTUIO/lib/*<br style="background-color:inherit"> cd src/<br style="background-color:inherit"> /home/user/output/buildroot/host/usr/bin/qmake<br style="background-color:inherit"> make clean<br style="background-color:inherit"> make<br style="background-color:inherit"> cd ../lib<br style="background-color:inherit"> mv libqTUIO_d.so.1.0.0 libqTUIO.so.1.0.0<br style="background-color:inherit"> sudo rm -rf *libqT*_d*so*<br style="background-color:inherit"> sudo ln -sf libqTUIO.so.1.0.0 libqTUIO.so.1.0<br style="background-color:inherit"> sudo ln -sf libqTUIO.so.1.0.0 libqTUIO.so.1<br style="background-color:inherit"> sudo ln -sf libqTUIO.so.1.0.0 libqTUIO.so<br style="background-color:inherit"> sudo mkdir -p /usr/local/lib/qTUIO<br style="background-color:inherit"> sudo cp -r ../lib/* /usr/local/lib/qTUIO<br style="background-color:inherit"> sudo cp -r /usr/local/lib/qTUIO/* /home/user/exported-nfs/usr/lib/</span></span> 
 <br style="background-color:inherit"> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; color:rgb(38,38,38); background-color:inherit"><span style="background-color:inherit; font-size:15px">现在，启动服务进程，服务进程会从mtdev接收多点触摸事件，并以TUIO 包的形式转发给Qt。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"># ./mtdev2tuio /dev/input/touchscreen osc.udp://<a target="_blank" href="http://127.0.0.1:3333/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit">127.0.0.1:3333/</a><br style="background-color:inherit"> Sending OSC/TUIO packets to osc.udp://<a target="_blank" href="http://127.0.0.1:3333/" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none; background-color:inherit">127.0.0.1:3333/</a></span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">当然，要保证你已经像下面那样，导出了Qt Mouse 指向的输入环境变量。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">export QWS_MOUSE_PROTO=tslib:/dev/input/touchscreen</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">现在，可以使用QtCreator 或者其他的IDE 构建和部署qUIO examples 目录下的pinchzoom 到板子上。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit">在板子上(或者在QtCreator中) 像下面那样运行应用程序 </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit; color:rgb(148,17,0); font-family:Helvetica; font-size:15px"><br style="background-color:inherit"> </span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit">cd /home/test ; export QWS_MOUSE_PROTO=Tslib:/dev/input/touchscreen  ; ./pinchzoom -qws</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="color:rgb(38,38,38); background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="font-family:Helvetica; color:rgb(38,38,38); background-color:inherit"><span style="background-color:inherit; font-size:15px">应该得到类似下面的输出：</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="font-family:Helvetica; background-color:inherit; font-size:15px">Connecting to device...<br style="background-color:inherit"> Killing remote process(es)...<br style="background-color:inherit"> Starting remote process ...<br style="background-color:inherit"> Remote process started.<br style="background-color:inherit"> graphicsview initialized <br style="background-color:inherit"> listening to TUIO messages on UDP port 3333</span></span> 
 <span style="font-family:Helvetica; background-color:inherit; font-size:15px"><span style="background-color:inherit"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="font-family:Helvetica; background-color:inherit; font-size:15px"><br style="background-color:inherit"> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="font-family:Helvetica; background-color:inherit; font-size:15px">应用程序将会显示在你的屏幕上，并且你可以使用你的手指作为鼠标使用及通过手势动作进行缩放的操作。</span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="font-family:Helvetica; background-color:inherit; font-size:15px"><br> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="font-family:Helvetica; background-color:inherit; font-size:15px"><br> </span></span> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <span style="background-color:inherit"><span style="font-family:Helvetica; background-color:inherit; font-size:15px"></span></span> 
 <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> This tutorial describes how to set up multi-touch and single-touch touchscreen input<br style="margin:0px; padding:0px"> for Qt for embedded Linux. I assume that you received a driver from your touchscreen<br style="margin:0px; padding:0px"> manufacturer or there is an existing one you can use in the Kernel source.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> First things first, locate your driver ( usually /drivers/input/touchscreen/* ), and <br style="margin:0px; padding:0px"> ensure that you have every event type being defined that is required by tslib. So, <br style="margin:0px; padding:0px"> specifically you need EV_SYN, EV_ABS, and EV_KEY. My driver did not define EV_KEY, <br style="margin:0px; padding:0px"> and even though it does not report that event type, I still had to define it in the <br style="margin:0px; padding:0px"> driver source for tslib to work with the input from the driver.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">set_bit(EV_SYN, aura.input_dev-&gt;evbit);<br style="margin:0px; padding:0px"> set_bit(EV_ABS, aura.input_dev-&gt;evbit);<br style="margin:0px; padding:0px"> set_bit(EV_KEY, aura.input_dev-&gt;evbit); # I had to add this line so that tslib was happy<br style="margin:0px; padding:0px"> </span></span><br style="margin:0px; padding:0px"> Now build the Kernel with your driver ( either as module or driver ) and fire up your<br style="margin:0px; padding:0px"> board.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> My input device is called 'touchscreen'. Yours will probably be event1 or event0 depending<br style="margin:0px; padding:0px"> on serveral possible reasons.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> See what the device is with:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px"># ls -rlt /dev/input/touchscreen <br style="margin:0px; padding:0px"> lrwxrwxrwx    1 root     root             6 Jan 17 21:06 /dev/input/touchscreen -&gt; event1<br style="margin:0px; padding:0px"> # chmod 777 /dev/input/touchscreen <br style="margin:0px; padding:0px"> # chmod 777 /dev/input/event1 </span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> You can see more information with:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px"># cat /sys/devices/virtual/input/input1/uevent <br style="margin:0px; padding:0px"> PRODUCT=0/0/0/0<br style="margin:0px; padding:0px"> NAME="aura-touchscreen"<br style="margin:0px; padding:0px"> PROP=0<br style="margin:0px; padding:0px"> EV=9<br style="margin:0px; padding:0px"> ABS=650000 0<br style="margin:0px; padding:0px"> MODALIAS=input:b0000v0000p0000e0000-e0,3,kra30,32,35,36,mlsfw</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> To ensure that your driver is working do the following command and <br style="margin:0px; padding:0px"> then move your finger around the screen. You should see output here<br style="margin:0px; padding:0px"> when you finger is touching the screen.<br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px"># cat /dev/input/touchscreen  | hexdump<br style="margin:0px; padding:0px"> 0000000 9011 3883 565f 0001 0003 0030 0001 0000<br style="margin:0px; padding:0px"> 0000010 9011 3883 565f 0001 0003 0032 0001 0000<br style="margin:0px; padding:0px"> 0000020 9011 3883 565f 0001 0003 0035 04c9 0000<br style="margin:0px; padding:0px"> 0000030 9011 3883 565f 0001 0003 0036 0c3f 0000<br style="margin:0px; padding:0px"> 0000040 9011 3883 565f 0001 0000 0002 0000 0000<br style="margin:0px; padding:0px"> 0000050 9011 3883 565f 0001 0000 0000 0000 0000<br style="margin:0px; padding:0px"> 0000060 9011 3883 90a9 0001 0003 0030 0001 0000<br style="margin:0px; padding:0px"> 0000070 9011 3883 90a9 0001 0003 0032 0001 0000</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Go back to your host machine and download the tslib src from here <br style="margin:0px; padding:0px"> --&gt; <a target="_blank" href="https://github.com/kergoth/tslib" style="margin:0px; padding:0px; color:black" rel="noopener noreferrer">https://github.com/kergoth/tslib</a>.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Enter the tslib source directory ( cd tslib/plugins ) and edit the input-raw.c file.<br style="margin:0px; padding:0px"> Replace any occurences of ABS_X / Y with ABS_MT_POSITION_X / Y. These are the names<br style="margin:0px; padding:0px"> of the multi-touch event type variables produces by a multitouch driver.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Now that everything is in order, build tslib and deploy using the following commands<br style="margin:0px; padding:0px"> to your exported nfs ( root file system ) for the board:<br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">sudo ./autogen-clean.sh<br style="margin:0px; padding:0px"> sudo ./autogen.sh<br style="margin:0px; padding:0px"> sudo export ac_cv_func_malloc_0_nonnull=yes<br style="margin:0px; padding:0px"> sudo export PATH=`pwd`:$PATH<br style="margin:0px; padding:0px"> sudo ./configure CC=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-gcc<br style="margin:0px; padding:0px"> CXX=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-g++<br style="margin:0px; padding:0px"> --host=arm-linux<br style="margin:0px; padding:0px"> --prefix=/usr/local/tslib<br style="margin:0px; padding:0px"> --enable-shared=yes<br style="margin:0px; padding:0px"> --enable-static=yes<br style="margin:0px; padding:0px"> sudo make<br style="margin:0px; padding:0px"> sudo make install<br style="margin:0px; padding:0px"> sudo cp /usr/local/tslib/bin/* /home/user/exported-nfs/usr/bin/<br style="margin:0px; padding:0px"> sudo cp /usr/local/tslib/etc/ts.conf /home/user/exported-nfs/etc/<br style="margin:0px; padding:0px"> sudo cp -r /usr/local/tslib/lib/ts /home/user/exported-nfs/usr/lib<br style="margin:0px; padding:0px"> sudo cp /usr/local/tslib/lib/* /home/user/exported-nfs/lib/<br style="margin:0px; padding:0px"> sudo vim /home/user/exported-nfs/etc/ts.conf</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> When ts.conf opens for editing, uncomment the 'input raw' line ( the very first <br style="margin:0px; padding:0px"> commented out module ).<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Now log back into your embedded machine and export the following environment<br style="margin:0px; padding:0px"> variables:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">export TSLIB_TSEVENTTYPE=INPUT<br style="margin:0px; padding:0px"> export TSLIB_TSDEVICE=/dev/input/touchscreen<br style="margin:0px; padding:0px"> export TSLIB_CALIBFILE=/etc/pointercal<br style="margin:0px; padding:0px"> export TSLIB_CONFFILE=/etc/ts.conf<br style="margin:0px; padding:0px"> export TSLIB_PLUGINDIR=/usr/lib/ts<br style="margin:0px; padding:0px"> export TSLIB_FBDEVICE=/dev/fb0<br style="margin:0px; padding:0px"> export TSLIB_CONSOLEDEVICE=none<br style="margin:0px; padding:0px"> export TSTS_INFO_FILE=/sys/devices/virtual/input/input1/uevent<br style="margin:0px; padding:0px"> export QWS_MOUSE_PROTO=tslib:/dev/input/touchscreen<br style="margin:0px; padding:0px"> export PATH=$PATH:/usr/bin</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Now we are ready to calibrate. Go to /usr/bin and launch the calibration<br style="margin:0px; padding:0px"> utility. You should now see a calibration image on the screen requesting<br style="margin:0px; padding:0px"> you to touch a few crosshairs. Go ahead and do that until it stops. Then<br style="margin:0px; padding:0px"> your screen is calibrated! The calibration parameters are stored in the<br style="margin:0px; padding:0px"> /etc/pointercal file. (you may have to first increase the brightness<br style="margin:0px; padding:0px"> of your screen with --&gt; echo 127 &gt; /sys/class/backlight/generic-bl/brightness)</p> 
 <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px"><span style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(148,17,0); font-family:Menlo"># ts_calibrate <br style="margin:0px; padding:0px"> xres = 640, yres = 480<br style="margin:0px; padding:0px"> Took 5 samples...<br style="margin:0px; padding:0px"> Top left : X = 3817 Y = 3912<br style="margin:0px; padding:0px"> Took 6 samples...<br style="margin:0px; padding:0px"> Top right : X =  269 Y = 3822<br style="margin:0px; padding:0px"> Took 5 samples...<br style="margin:0px; padding:0px"> Bot right : X =  356 Y =  550<br style="margin:0px; padding:0px"> Took 5 samples...<br style="margin:0px; padding:0px"> Bot left : X = 3732 Y =  614<br style="margin:0px; padding:0px"> Took 6 samples...<br style="margin:0px; padding:0px"> Center : X = 2202 Y = 2216<br style="margin:0px; padding:0px"> 643.068298 -0.155621 -0.000056<br style="margin:0px; padding:0px"> 491.792572 0.002567 -0.115674<br style="margin:0px; padding:0px"> Calibration constants: 42144124 -10198 -3 32230118 168 -7580 65536 </span></span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> You can also test the touchscreen mouse input by running:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(148,17,0); font-size:10px; font-family:Menlo">ts_test</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Great! Now you have single mouse input with tslib ready to go!<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Now let's move on to multi-touch.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Download the following packages to enable multitouch events with Qt.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <a target="_blank" href="https://github.com/x29a/qTUIO" style="margin:0px; padding:0px; color:black" rel="noopener noreferrer">https://github.com/x29a/qTUIO</a> <br style="margin:0px; padding:0px"> <a target="_blank" href="https://github.com/olivopaolo/mtdev2tuio" style="margin:0px; padding:0px; color:black" rel="noopener noreferrer">https://github.com/olivopaolo/mtdev2tuio</a> <br style="margin:0px; padding:0px"> <a target="_blank" href="http://bitmath.org/code/mtdev/" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; color:black">http://bitmath.org/code/mtdev/</a> <br style="margin:0px; padding:0px"> <a target="_blank" href="http://liblo.sourceforge.net/" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; color:black">http://liblo.sourceforge.net/</a> <br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Export your cross-compiler and toolchain:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">export CC=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-gcc<br style="margin:0px; padding:0px"> export CXX=/home/user/toolchain/linaro/bin/arm-linux-gnueabi-g++</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Enter the liblo source code directory and build and deploy with:</p> 
 <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:10px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px"><span style="margin:0px; padding:0px">cd /home/user/Desktop/QTUIO/liblo-0.26</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">export SKIP_RMDIR_CHECK=yes</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">./configure --prefix=/usr/local/lib/liblo --host=arm</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">make clean</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">make</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">sudo make install</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">cd /usr/local/lib/liblo</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">sudo cp bin/* /home/user/exported-nfs/usr/bin/</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">sudo cp lib/liblo.a /home/user/exported-nfs/usr/bin/</span><br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px">sudo cp lib/<a target="_blank" href="http://liblo.la/" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; color:black">liblo.la</a> /home/user/exported-nfs/usr/bin/</span><br style="margin:0px; padding:0px"> </span></span><br style="margin:0px; padding:0px"> Enter the mtdev source code directory and build and deploy with:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">cd /home/user/Desktop/QTUIO/mtdev-1.1.2<br style="margin:0px; padding:0px"> ./autogen.sh<br style="margin:0px; padding:0px"> ./configure --prefix=/usr/local/lib/mtdev --host=arm<br style="margin:0px; padding:0px"> make clean<br style="margin:0px; padding:0px"> make<br style="margin:0px; padding:0px"> sudo make install<br style="margin:0px; padding:0px"> cd /usr/local/lib/mtdev<br style="margin:0px; padding:0px"> sudo cp bin/* /home/user/exported-nfs/usr/bin/<br style="margin:0px; padding:0px"> sudo cp lib/libmtdev.a /home/user/exported-nfs/usr/bin/<br style="margin:0px; padding:0px"> sudo cp lib/<a target="_blank" href="http://libmtdev.la/" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; color:black">libmtdev.la</a> /home/user/exported-nfs/usr/bin/</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Enter the mtdev2tuio bridge source code directory and build and deploy with:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">cd /home/user/Desktop/QTUIO/mtdev2tuio<br style="margin:0px; padding:0px"> make clean<br style="margin:0px; padding:0px"> make<br style="margin:0px; padding:0px"> sudo cp mtdev2tuio /home/user/exported-nfs/usr/bin/</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Enter the qTUIO source directory and build and deploy with:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">cd /home/user/Desktop/QTUIO/qTUIO<br style="margin:0px; padding:0px"> sudo rm -rf /home/user/Desktop/QTUIO/qTUIO/lib/*<br style="margin:0px; padding:0px"> cd src/<br style="margin:0px; padding:0px"> /home/user/output/buildroot/host/usr/bin/qmake<br style="margin:0px; padding:0px"> make clean<br style="margin:0px; padding:0px"> make<br style="margin:0px; padding:0px"> cd ../lib<br style="margin:0px; padding:0px"> mv libqTUIO_d.so.1.0.0 libqTUIO.so.1.0.0<br style="margin:0px; padding:0px"> sudo rm -rf *libqT*_d*so*<br style="margin:0px; padding:0px"> sudo ln -sf libqTUIO.so.1.0.0 libqTUIO.so.1.0<br style="margin:0px; padding:0px"> sudo ln -sf libqTUIO.so.1.0.0 libqTUIO.so.1<br style="margin:0px; padding:0px"> sudo ln -sf libqTUIO.so.1.0.0 libqTUIO.so<br style="margin:0px; padding:0px"> sudo mkdir -p /usr/local/lib/qTUIO<br style="margin:0px; padding:0px"> sudo cp -r ../lib/* /usr/local/lib/qTUIO<br style="margin:0px; padding:0px"> sudo cp -r /usr/local/lib/qTUIO/* /home/user/exported-nfs/usr/lib/</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Now kick off the server that will take multi-touch events input from<br style="margin:0px; padding:0px"> mtdev and feed that as TUIO packets to Qt:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px"># ./mtdev2tuio /dev/input/touchscreen osc.udp://<a target="_blank" href="http://127.0.0.1:3333/" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; color:black">127.0.0.1:3333/</a><br style="margin:0px; padding:0px"> Sending OSC/TUIO packets to osc.udp://<a target="_blank" href="http://127.0.0.1:3333/" rel="nofollow noopener noreferrer" style="margin:0px; padding:0px; color:black">127.0.0.1:3333/</a></span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Also, ensure that you exported your Qt mouse pointer input environment<br style="margin:0px; padding:0px"> variable as follows:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px"><span style="margin:0px; padding:0px"><span style="margin:0px; padding:0px; color:rgb(148,17,0); font-family:Menlo">export QWS_MOUSE_PROTO=tslib:/dev/input/touchscreen</span></span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Now use Qt Creator or some other IDE to build and deploy the pinchzoom<br style="margin:0px; padding:0px"> example found in the qTUIO examples directory to the board.<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> On the board ( or from Qt Creator ) run the application like:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">cd /home/test ; export QWS_MOUSE_PROTO=Tslib:/dev/input/touchscreen  ; ./pinchzoom -qws</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Output should look like:<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> <span style="margin:0px; padding:0px; font-size:12px; font-family:Menlo; color:rgb(148,17,0)"><span style="margin:0px; padding:0px">Connecting to device...<br style="margin:0px; padding:0px"> Killing remote process(es)...<br style="margin:0px; padding:0px"> Starting remote process ...<br style="margin:0px; padding:0px"> Remote process started.<br style="margin:0px; padding:0px"> graphicsview initialized <br style="margin:0px; padding:0px"> listening to TUIO messages on UDP port 3333</span></span><br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> The application will launch on your screen and you should be able to use your finger<br style="margin:0px; padding:0px"> as a mouse but also pinch and zoom ( gestures ) at the same time!<br style="margin:0px; padding:0px"> <br style="margin:0px; padding:0px"> Happy coding :)</p> 
 <p style="margin:10px auto; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px"> Feel free to leave feedback - happy coding</p> 
 <br> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
     
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  xilinx： 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <pre style='white-space:pre-wrap; word-wrap:break-word; font-size:14px; background-color:rgb(255,255,255); color:rgb(51,51,51); line-height:26px; margin-top:0px; margin-bottom:0px; font-family:"Courier New"'>sudo apt-<span style="line-height:1.5">get install automake
sudo apt</span>-<span style="line-height:1.5">get install autogen
sudo apt</span>-get install autoconf</pre> 
 <br> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <pre style='white-space:pre-wrap; word-wrap:break-word; font-size:14px; background-color:rgb(255,255,255); color:rgb(51,51,51); line-height:26px; margin-top:0px; margin-bottom:0px; font-family:"Courier New"'><span style="font-family:Arial; line-height:26px">sudo apt-get install libtool</span></pre> 
 <pre style='white-space:pre-wrap; word-wrap:break-word; color:rgb(51,51,51); font-size:14px; background-color:rgb(255,255,255); line-height:26px; margin-top:0px; margin-bottom:0px; font-family:"Courier New"'>
</pre> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px">
  sudo ./configure CC=/home/david/work/zynq/CodeSourcery-master/bin/arm-xilinx-linux-gnueabi-gcc CXX=/home/david/work/zynq/CodeSourcery- master/bin/arm-xilinx-linux-gnueabi-g++ --host=arm-linux --prefix=/home/david/QT5/lib  ac_cv_func_malloc_0_nonnull=yes --enable-shared=yes --enable-static=yes 
 <br> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br> 
</div> 
<div style="color:rgb(51,51,51); font-family:Arial; font-size:14px"> 
 <br> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6b6e464e5c2e165c87dcb3f466740bb1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【视觉-摄像机2】opencv 调用工业摄像机（GigE接口详细说明）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f89f5f38d9be181217ec0f6abca0cd3b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java代码Base64加密解密使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>