<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>多层跳板攻击 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="多层跳板攻击" />
<meta property="og:description" content="前言 首先，我们在上一章的基础上，即在Windows Server2003的主机上又发现了另一层的网络，所以我们就必须在以win2003为跳板机，再去访问下一个网段的主机，即多层跳板攻击。
攻击过程 我们这里使用一台Linux主机为另一个服务器，并设置一个新的网段来进行隔离，原理和上一章的差不多
查看win2003时发现新的网段
然后我们使用arp_scan模块扫描出更多的主机
更新路由表并打印出来
然后我们再新开一个socks4a代理，并使用jobs命令查看任务，因为之前使用了1080这个端口，因此我们端口必须要重新设置一个新的
接着我们使用相同的方法，使用proxychains对目标主机服务进行探测，首先我们得先配置proxychains配置文件
发现目标主机开放了22,80,139,445端口
我们可以用之前章节使用的密码爆破的方法将主机的用户名和密码都爆破出来，因为我们这里使用的是metasploitable2靶机，默认用户名和密码是msfadmin，我们用proxychains登录其主机中
从上面我们也发现目标主机开启了80端口服务，因此我们也能从网页的形式进一步渗透目标主机，但是浏览器上要设置相应的代理，因为目标网段本身不对外开放，这里我使用的是FoxyProxy这个浏览器代理插件
访问成功
总结 现在我们对整个入侵思路进行一个总结。首先我们先使用kali攻击机，在本公司的防火墙上设置好NAT端口映射，目的是为了接受目标机反弹回来的shell，当我们对其中一台目标机①掌握了控制权后，我们在这台主机上发现了另一个网段(104网段吧)，然后我们以主机①为跳板机，去访问104网段，我们使用proxychains工具隐藏自己的真实访问IP，然后拿下主机②时，又发现另一个网段时，用相同的方法进行横向，多层跳板攻击的过程。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/34185c73116eebf7402bc67a3cb2f1af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-27T22:11:32+08:00" />
<meta property="article:modified_time" content="2021-03-27T22:11:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">多层跳板攻击</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>前言</h3> 
<p>首先，我们在上一章的基础上，即在Windows Server2003的主机上又发现了另一层的网络，所以我们就必须在以win2003为跳板机，再去访问下一个网段的主机，即多层跳板攻击。<br> <img src="https://images2.imgbox.com/2c/7d/JUhJM2Kk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_4"></a>攻击过程</h3> 
<p>我们这里使用一台Linux主机为另一个服务器，并设置一个新的网段来进行隔离，原理和上一章的差不多<br> <img src="https://images2.imgbox.com/e7/e1/WRmzrgBR_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/16/45/mu07iouU_o.png" alt="在这里插入图片描述"><br> 查看win2003时发现新的网段<br> <img src="https://images2.imgbox.com/3f/3f/r2Vly0la_o.png" alt="在这里插入图片描述"><br> 然后我们使用<code>arp_scan</code>模块扫描出更多的主机<br> <img src="https://images2.imgbox.com/ff/d2/H9n78u3u_o.png" alt="在这里插入图片描述"><br> 更新路由表并打印出来<br> <img src="https://images2.imgbox.com/67/c1/Y17KfMi0_o.png" alt="在这里插入图片描述"><br> 然后我们再新开一个<code>socks4a</code>代理，并使用<code>jobs</code>命令查看任务，因为之前使用了1080这个端口，因此我们端口必须要重新设置一个新的<br> <img src="https://images2.imgbox.com/7e/ce/qJal8A2E_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/59/59/uBGwxWzT_o.png" alt="在这里插入图片描述"><br> 接着我们使用相同的方法，使用<code>proxychains</code>对目标主机服务进行探测，首先我们得先配置proxychains配置文件<br> <img src="https://images2.imgbox.com/f5/1f/sEsKKBZi_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/58/61/vNZhh5Ws_o.png" alt="在这里插入图片描述"><br> 发现目标主机开放了22,80,139,445端口<br> <img src="https://images2.imgbox.com/67/41/UyZVtHU4_o.png" alt="在这里插入图片描述"><br> 我们可以用之前章节使用的密码爆破的方法将主机的用户名和密码都爆破出来，因为我们这里使用的是<code>metasploitable2</code>靶机，默认用户名和密码是<code>msfadmin</code>，我们用proxychains登录其主机中<br> <img src="https://images2.imgbox.com/2f/ca/SP2oHlyC_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/36/61/ltb46v59_o.png" alt="在这里插入图片描述"><br> 从上面我们也发现目标主机开启了80端口服务，因此我们也能从网页的形式进一步渗透目标主机，但是浏览器上要设置相应的代理，因为目标网段本身不对外开放，这里我使用的是FoxyProxy这个浏览器代理插件<br> <img src="https://images2.imgbox.com/7c/37/gpE3vJ79_o.png" alt="在这里插入图片描述"><br> 访问成功<br> <img src="https://images2.imgbox.com/9a/97/FyERam6r_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_30"></a>总结</h3> 
<p>现在我们对整个入侵思路进行一个总结。首先我们先使用kali攻击机，在本公司的防火墙上设置好NAT端口映射，目的是为了接受目标机反弹回来的shell，当我们对其中一台目标机①掌握了控制权后，我们在这台主机上发现了另一个网段(<code>104</code>网段吧)，然后我们以主机①为跳板机，去访问104网段，我们使用proxychains工具隐藏自己的真实访问IP，然后拿下主机②时，又发现另一个网段时，用相同的方法进行横向，多层跳板攻击的过程。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/427b9ea18b28ba177f9a9ce9a4b477cd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微服务架构-分布式解决方案-108：XXL-JOB分片集群模式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f15406816f86fbe2999f296c556db0ef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">php sqlite3 fetch,PHP sqlite_fetch_array 用法 手册 | 示例代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>