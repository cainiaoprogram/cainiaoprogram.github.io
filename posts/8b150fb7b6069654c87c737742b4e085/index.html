<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 私有变量(__)的访问和赋值以及变量前加(_) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python 私有变量(__)的访问和赋值以及变量前加(_)" />
<meta property="og:description" content="这里写目录标题 一、Python 私有变量的访问和赋值二、变量前加(_)三、其他 一、Python 私有变量的访问和赋值 python中的私有变量是以双下划线开头的变量，例如__name。虽然不能直接从外部访问私有变量，但是可以通过一些方式来访问。
一种方式是通过使用变量名改写规则来访问私有变量。Python解释器会将双下划线开头的变量名改写为_类名__变量名的形式。例如，对于类Person中的私有变量__name，可以通过_Person__name来访问。
另一种方式是通过提供公有的getter和setter方法来访问和修改私有变量。通过这种方式，可以在方法内部对私有变量进行操作，同时对外部隐藏实际的变量名。
然而，尽管可以通过上述方式访问私有变量，但是强烈建议不要这样做。因为不同版本的Python解释器可能会将私有变量名改写成不同的形式，这样会导致代码的可移植性和可维护性变差。
案例
class S: __name = &#39;kobe&#39; _age = 18 def __init__(self): self.__name1 = &#39;zhil&#39; self.__age1 = 20 self.__sex=&#39;女&#39; def get_name(self): return self.__name1 def get_age(self): return self.__name1 def set_age(self, sex): self.__sex = sex s = S() # print(s.__name) #AttributeError: &#39;S&#39; object has no attribute &#39;__name&#39; # print(s.__name1) #AttributeError: &#39;S&#39; object has no attribute &#39;__name&#39; print(s._age) # 18 # print(s.__name1) print(s.get_name()) # zhil 我们知道，私有变量是不能直接通过：s." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8b150fb7b6069654c87c737742b4e085/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-08T09:06:33+08:00" />
<meta property="article:modified_time" content="2024-01-08T09:06:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 私有变量(__)的访问和赋值以及变量前加(_)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/2c/d1/bnDtxlg9_o.jpg" alt="在这里插入图片描述"></p> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>这里写目录标题</h4> 
 <ul><li><a href="#Python__4" rel="nofollow">一、Python 私有变量的访问和赋值</a></li><li><a href="#__67" rel="nofollow">二、变量前加(_)</a></li><li><a href="#_90" rel="nofollow">三、其他</a></li></ul> 
</div> 
<p></p> 
<h2><a id="Python__4"></a>一、Python 私有变量的访问和赋值</h2> 
<p>python中的私有变量是以双下划线开头的变量，例如__name。虽然不能直接从外部访问私有变量，但是可以通过一些方式来访问。</p> 
<p><font size="4" color="#FF0000">一种方式是通过使用变量名改写规则来访问私有变量。</font>Python解释器会将双下划线开头的变量名改写为_类名__变量名的形式。例如，对于类Person中的私有变量__name，可以通过_Person__name来访问。<br> <font size="4" color="#FF0000">另一种方式是通过提供公有的getter和setter方法来访问和修改私有变量。</font>通过这种方式，可以在方法内部对私有变量进行操作，同时对外部隐藏实际的变量名。<br> <font size="4" color="#FF0000">然而，尽管可以通过上述方式访问私有变量，但是强烈建议不要这样做。因为不同版本的Python解释器可能会将私有变量名改写成不同的形式，这样会导致代码的可移植性和可维护性变差。</font></p> 
<p>案例</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">S</span><span class="token punctuation">:</span>
    __name <span class="token operator">=</span> <span class="token string">'kobe'</span>
    _age <span class="token operator">=</span> <span class="token number">18</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__name1 <span class="token operator">=</span> <span class="token string">'zhil'</span>
        self<span class="token punctuation">.</span>__age1 <span class="token operator">=</span> <span class="token number">20</span>
        self<span class="token punctuation">.</span>__sex<span class="token operator">=</span><span class="token string">'女'</span>

    <span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name1

    <span class="token keyword">def</span> <span class="token function">get_age</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__name1

    <span class="token keyword">def</span> <span class="token function">set_age</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> sex<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__sex <span class="token operator">=</span> sex
</code></pre> 
<pre><code class="prism language-python">s <span class="token operator">=</span> S<span class="token punctuation">(</span><span class="token punctuation">)</span>  
<span class="token comment"># print(s.__name)     #AttributeError: 'S' object has no attribute '__name'</span>
<span class="token comment"># print(s.__name1)    #AttributeError: 'S' object has no attribute '__name'</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_age<span class="token punctuation">)</span>  <span class="token comment"># 18</span>
<span class="token comment"># print(s.__name1)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># zhil</span>
</code></pre> 
<p><strong><font size="4" color="#FF0000">我们知道，私有变量是不能直接通过：s.__name直接访问滴。而是必须在类内部通过方法返回私有变量。</font></strong></p> 
<p>那么双下划线开头的实例变量是不是一定不能从外部访问呢？也不是。不能直接访问__name是因为Python解释器对外把__name变量改成了_Person__name，<br> <font size="4" color="#FF0000"><strong>所以，我们仍然可以通过 _person__name 来访问__name变量（注意这里的下划线）</strong>：</font></p> 
<pre><code class="prism language-python"><span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_S__name1<span class="token punctuation">)</span>  <span class="token comment"># zhil</span>
</code></pre> 
<p>但是我强烈建议大家不要这么做，因为不同版本的Python解释器可能会把__name改成不同的变量名</p> 
<p><strong><font size="4" color="#1E90FF">注意下面的这种错误写法：</font></strong></p> 
<pre><code class="prism language-python">s<span class="token punctuation">.</span>__sex<span class="token operator">=</span><span class="token string">'男'</span>  <span class="token comment">#设置__sex属性</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>__sex<span class="token punctuation">)</span>  	<span class="token comment">#男</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>_S__sex<span class="token punctuation">)</span>    <span class="token comment">#女</span>
</code></pre> 
<p><strong><font size="4" color="#1E90FF">表面上看，外部代码“成功”地设置了__sex变量，但实际上这个__sex变量和class内部的__sex变量不是一个变量！<br> 内部的__sex变量已经被Python解释器自动改成了_Person__sex，而外部代码是给m实例新增了一个__sex变量。</font></strong></p> 
<h2><a id="__67"></a>二、变量前加(_)</h2> 
<p><font size="4" color="#FF0000"><strong>私有化属性和方法，类对象和子类可以访问。表面上私有，实际可被外部调用，是一种潜在规则</strong></font></p> 
<p>但为了编程的需要，我们常常需要区分私有方法和共有方法以方便管理和调用。那么在Python中如何做呢？</p> 
<p>但为了编程的需要，我们常常需要区分私有方法和共有方法以方便管理和调用。那么在Python中如何做呢？<br> <font size="4" color="#FF0000"><strong>一般Python约定加了下划线 _ 的属性和方法为私有方法或属性，以提示该属性和方法不应在外部调用，也不会被from ModuleA import *导入。如果真的调用了也不会出错,但不符合规范。</strong></font></p> 
<p>下面的代码演示加了_ 的方法，以及在类外面对其的可访问性。</p> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">_func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'I am a private function.'</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">func</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>_func<span class="token punctuation">(</span><span class="token punctuation">)</span>


s <span class="token operator">=</span> Solution<span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># I am a private function.</span>
s<span class="token punctuation">.</span>_func<span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment"># I am a private function.</span>
</code></pre> 
<h2><a id="_90"></a>三、其他</h2> 
<p><strong><code>xx</code></strong>:公有变量，所有对象都可以访问；<br> <strong><code>__xx__</code></strong>:双前后下划线，用于定义类的魔术属性/模法方法，例如： <code>__init__</code>,<code>__str__</code>等，无法直接调用；<br> <strong><code>xx_</code></strong>:单后置下划线，用于避免与python关键字的冲突。</p> 
<hr> 
<p><img src="https://images2.imgbox.com/56/52/Wgsck0u7_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2e607b7a0c35f030b34d7cd22247c92c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">gradio高级技巧</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/814fc894c6447272dbb61cc07aa66d4e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用css给宽高不固定的矩形画对角线</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>