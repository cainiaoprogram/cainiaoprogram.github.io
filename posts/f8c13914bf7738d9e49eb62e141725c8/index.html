<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>3.启停redis服务 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="3.启停redis服务" />
<meta property="og:description" content="1.编译redis.conf参数文件 安装完成后，我们就得尝试启动redis服务了。 在$REDIS_HOME，编译如下文件 /home/ldh/redis/redis-2.8.3/redis.conf 修改端口 将PORT 6379改成你想要的被客户访问的端口，不改也可以，只要不冲突。 设置密码： redis.conf中requirepass前的注释去掉，后面加上密码，如 requirepass pass1234 如果服务已经启动，修改密码后需要重启服务才能使新密码生效。 2.启动服务 启动服务，假如不用Nohup的话，当前会话就不能再进行其他操作咯。 nohup redis-server /home/ldh/redis/redis-2.8.3/redis.conf &amp; 我们来看看nohup.out中，这个服务启动会反馈什么信息 [ldh@hauser redis-2.8.3]$ vi nohup.out [22624] 25 Dec 11:00:06.456 # Fatal error, can&#39;t open config file &#39;/home/otredis/redis/2.6.16/conf/redis.conf&#39; [22726] 25 Dec 11:06:01.442 # Fatal error, can&#39;t open config file &#39;/home/otredis/redis/2.6.16/conf/redis.conf&#39; [22737] 25 Dec 11:06:25.925 # Unable to set the max number of files limit to 10032 (Operation not permitted), setting the max clients configuration to 992." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f8c13914bf7738d9e49eb62e141725c8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-12-25T12:06:44+08:00" />
<meta property="article:modified_time" content="2013-12-25T12:06:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">3.启停redis服务</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style=""> 
 <span style="font-size:14px; color:#ff0000"></span> 
 <div style=""> 
  <span style="font-size:14px; color:#ff0000">1.编译redis.conf参数文件</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">安装完成后，我们就得尝试启动redis服务了。</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">在$REDIS_HOME，编译如下文件</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">/home/ldh/redis/redis-2.8.3/redis.conf</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px"><br> </span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">修改端口</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">将PORT 6379改成你想要的被客户访问的端口，不改也可以，只要不冲突。</span> 
 </div> 
 <div style=""> 
  <div> 
   <span style="font-size:14px">设置密码：</span> 
  </div> 
  <div> 
   <span style="font-size:14px">redis.conf中requirepass前的注释去掉，后面加上密码，如</span> 
  </div> 
  <div> 
   <span style="font-size:14px">requirepass pass1234</span> 
  </div> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">如果服务已经启动，修改密码后需要重启服务才能使新密码生效。</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px"><br> </span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px; color:#ff0000">2.启动服务</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">启动服务，假如不用Nohup的话，当前会话就不能再进行其他操作咯。</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">nohup redis-server /home/ldh/redis/redis-2.8.3/redis.conf  &amp;</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">我们来看看nohup.out中，这个服务启动会反馈什么信息</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">[ldh@hauser redis-2.8.3]$ vi nohup.out</span> 
 </div> 
 <div style=""></div> 
 <div style=""> 
  <span style="font-size:12px">[22624] 25 Dec 11:00:06.456 # Fatal error, can't open config file '/home/otredis/redis/2.6.16/conf/redis.conf'</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">[22726] 25 Dec 11:06:01.442 # Fatal error, can't open config file '/home/otredis/redis/2.6.16/conf/redis.conf'</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">[22737] 25 Dec 11:06:25.925 # Unable to set the max number of files limit to 10032 (Operation not permitted), setting the max clients configuration to 992.</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">                _._</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">           _.-``__ ''-._</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">      _.-`` `. `_. ''-._ Redis 2.8.3 (00000000/0) 64 bit</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">  .-`` .-```. ```\/ _.,_ ''-._</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px"> ( ' , .-` | `, ) Running in stand alone mode</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px"> |`-._`-...-` __...-.``-._|'` _.-'| Port: 6389</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px"> | `-._ `._ / _.-' | PID: 22737</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">  `-._ `-._ `-./ _.-' _.-'</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px"> |`-._`-._ `-.__.-' _.-'_.-'|</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px"> | `-._`-._ _.-'_.-' | http://redis.io</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">  `-._ `-._`-.__.-'_.-' _.-'</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px"> |`-._`-._ `-.__.-' _.-'_.-'|</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px"> | `-._`-._ _.-'_.-' |</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">  `-._ `-._`-.__.-'_.-' _.-'</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">      `-._ `-.__.-' _.-'</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">          `-._ _.-'</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">              `-.__.-'</span> 
 </div> 
 <div style=""></div> 
 <div style=""> 
  <span style="font-size:12px">[22737] 25 Dec 11:06:25.931 # Server started, Redis version 2.8.3</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">[22737] 25 Dec 11:06:25.931 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.</span> 
 </div> 
 <div style=""> 
  <span style="font-size:12px">[22737] 25 Dec 11:06:25.931 * <span style="background-color:yellow">The server is now ready to accept connections on port 6389</span></span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px"><br> </span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">此时，redis服务已经启动了。</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px"><br> </span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px; color:#ff0000">3.登陆redis</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">此时我们登陆到redis数据库当中</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">[ldh@hauser redis-2.8.3]$ redis-cli -h 127.0.0.1 -p 6389 -a pass1234</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">127.0.0.1:6389&gt; set fwy abc</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">OK</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">127.0.0.1:6389&gt; get fwy</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">"abc"</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px"><br> </span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">本机登陆的话，也可以省略-h，如果是用默认端口6379，那么-p也可以省略。</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">如redis-cli -a pass1234登陆即可</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">如果远程登陆，可以用telnet登陆，退出时敲进quit</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">[fengweiyuan513@cnsz081003 ~]$ telnet 10.25.30.143 6389</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">Trying 10.25.30.143...</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">Connected to 10.25.30.143 (10.25.30.143).</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">Escape character is '^]'.</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">auth pass1234</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">+OK</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">get fwy</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">$1</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">2</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">quit</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">+OK</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">Connection closed by foreign host.</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">[fengweiyuan513@cnsz081003 ~]$ </span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px"><br> </span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px"><span style="color:#ff0000">4.停止redis服务</span></span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">[ldh@hauser ~]$ redis-cli -h 127.0.0.1 -p 6389 -a pass1234</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">127.0.0.1:6389&gt; shutdown</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">127.0.0.1:6389&gt; exit</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">再连接一次已经发现不存在了，也可以通过ps -ef | grep redis来观察</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">[ldh@hauser ~]$ redis-cli -p 6389 -a pass1234</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">Could not connect to Redis at 127.0.0.1:6389: Connection refused</span> 
 </div> 
 <div style=""> 
  <span style="font-size:14px">远程通过telnet来shutdown也是可以的，感觉挺不安全的。</span> 
 </div> 
 <br> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bd6c687247f953324c46e7a9b2e837a7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《私人订制》--冯氏贺岁剧的隔年回归</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/020251374f686325124c8b01a2c9d271/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">细说tkprof的使用方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>