<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu22.04下rv1109 rootfs编译问题处理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu22.04下rv1109 rootfs编译问题处理" />
<meta property="og:description" content="原文地址::ubuntu22.04下rv1109 rootfs编译问题处理-CSDN博客
相关文章
1、Ubuntu22 tina-linux 编译报错记录----Ubuntu22 tina-linux 编译报错记录_sigstksz-CSDN博客
2、firefly AIO-RK3399J Linux SDK编译报错解决----firefly AIO-RK3399J Linux SDK编译报错解决_host-libglib2 2.62.4-CSDN博客
3、rk3399 buildroot ubuntu20版本编译遇到问题----rk3399 buildroot ubuntu20版本编译遇到问题
ubuntu22.04下rv1109 rootfs编译问题处理
buildroot编译出错记录
问题一：c-stack.c的SIGSTKSZ错误
解决办法
问题二：libfakeroot.c的_STAT_VER报错
解决办法
问题三：fwriter_buffer重复定义
解决办法
问题四： qfloat16.h报错
解决办法
问题五： makedevs无法创建设备节点
解决办法
注意事项
buildroot编译出错记录
出于对Ubuntu新版本系统的体验，将系统更新到了ubuntu22.04了。然后在编译rv1109 sdk时出现了一些异常的错误。但是已经不回去了，只能硬着头皮一路走下去了。并将错误记录以下，以便下次有类似错误，做个参考。
问题一：c-stack.c的SIGSTKSZ错误
buildroot 报错：c-stack.c:55:26:error:missing binary operator before token “(“55
解决办法
在buildroot目录中找到c-stack.c文件,并更改c-stack.c文件中，SIGSTKSZ的宏定义。
find -name c-stack.c
gedit c-stack.c
将以下内容：
#ifndef SIGSTKSZ
# define SIGSTKSZ 16384
#elif HAVE_LIBSIGSEGV &amp;&amp; SIGSTKSZ &lt; 16384
/* libsigsegv 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bdf786adc2534856557304c0c6647e78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-23T15:05:38+08:00" />
<meta property="article:modified_time" content="2023-12-23T15:05:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu22.04下rv1109 rootfs编译问题处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>原文地址::<a href="https://blog.csdn.net/icemou/article/details/132474042?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0-132474042-blog-128051710.235%5Ev39%5Epc_relevant_anti_t3_base&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=3" title="ubuntu22.04下rv1109 rootfs编译问题处理-CSDN博客">ubuntu22.04下rv1109 rootfs编译问题处理-CSDN博客</a></p> 
<p>相关文章</p> 
<p>1、Ubuntu22 tina-linux 编译报错记录----<a href="https://blog.csdn.net/huuuerli/article/details/128051710?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-128051710-blog-132474042.235%5Ev39%5Epc_relevant_anti_t3_base&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-128051710-blog-132474042.235%5Ev39%5Epc_relevant_anti_t3_base&amp;utm_relevant_index=2" title="Ubuntu22 tina-linux 编译报错记录_sigstksz-CSDN博客">Ubuntu22 tina-linux 编译报错记录_sigstksz-CSDN博客</a></p> 
<p>2、firefly AIO-RK3399J Linux SDK编译报错解决----<a href="https://blog.csdn.net/nicholas_duan/article/details/109063131" title="firefly AIO-RK3399J Linux SDK编译报错解决_host-libglib2 2.62.4-CSDN博客">firefly AIO-RK3399J Linux SDK编译报错解决_host-libglib2 2.62.4-CSDN博客</a></p> 
<p>3、rk3399 buildroot ubuntu20版本编译遇到问题----<a href="https://www.xjx100.cn/news/328269.html" rel="nofollow" title="rk3399 buildroot ubuntu20版本编译遇到问题">rk3399 buildroot ubuntu20版本编译遇到问题</a></p> 
<p></p> 
<p></p> 
<p>ubuntu22.04下rv1109 rootfs编译问题处理<br> buildroot编译出错记录<br> 问题一：c-stack.c的SIGSTKSZ错误<br> 解决办法<br> 问题二：libfakeroot.c的_STAT_VER报错<br> 解决办法<br> 问题三：fwriter_buffer重复定义<br> 解决办法<br> 问题四： qfloat16.h报错<br> 解决办法<br> 问题五： makedevs无法创建设备节点<br> 解决办法<br> 注意事项<br> buildroot编译出错记录<br> 出于对Ubuntu新版本系统的体验，将系统更新到了ubuntu22.04了。然后在编译rv1109 sdk时出现了一些异常的错误。但是已经不回去了，只能硬着头皮一路走下去了。并将错误记录以下，以便下次有类似错误，做个参考。</p> 
<p>问题一：c-stack.c的SIGSTKSZ错误<br> buildroot 报错：c-stack.c:55:26:error:missing binary operator before token “(“55</p> 
<p>解决办法<br> 在buildroot目录中找到c-stack.c文件,并更改c-stack.c文件中，SIGSTKSZ的宏定义。</p> 
<p>find -name c-stack.c</p> 
<p>gedit c-stack.c</p> 
<p>将以下内容：</p> 
<p>#ifndef SIGSTKSZ<br> # define SIGSTKSZ 16384<br> #elif HAVE_LIBSIGSEGV &amp;&amp; SIGSTKSZ &lt; 16384<br> /* libsigsegv 2.6 through 2.8 have a bug where some architectures use<br>    more than the Linux default of an 8k alternate stack when deciding<br>    if a fault was caused by stack overflow.  */<br> # undef SIGSTKSZ<br> # define SIGSTKSZ 16384<br> #endif<br> 1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 更改为：</p> 
<p>#ifndef SIGSTKSZ<br> # define SIGSTKSZ 16384<br> //#elif HAVE_LIBSIGSEGV &amp;&amp; SIGSTKSZ &lt; 16384<br> /* libsigsegv 2.6 through 2.8 have a bug where some architectures use<br>    more than the Linux default of an 8k alternate stack when deciding<br>    if a fault was caused by stack overflow.  */<br> //# undef SIGSTKSZ<br> //# define SIGSTKSZ 16384<br> #endif<br> 1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 问题二：libfakeroot.c的_STAT_VER报错<br> libfakeroot.c:99:40: error: ‘_STAT_VER’ undeclared</p> 
<p>解决办法<br> 更改libfakeroot.c文件，添加宏定义</p> 
<p>find -name libfakeroot.c</p> 
<p>gedit libfakeroot.c</p> 
<p>添加内容：</p> 
<p>#ifndef _STAT_VER<br>  #if defined (__aarch64__)<br>   #define _STAT_VER 0<br>  #elif defined (__x86_64__)<br>   #define _STAT_VER 1<br>  #else<br>   #define _STAT_VER 3<br>  #endif<br> #endif<br> 1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 问题三：fwriter_buffer重复定义<br> read_fs.o:(.bss+0x0): multiple definition of `fwriter_buffer’; mksquashfs.o:(.bss+0x400be8):</p> 
<p>解决办法<br> 更改mksquashfs相关文件，去掉bwriter_buffer，与fwriter_buffer的定义，改为‘extern’。</p> 
<p>find -name “mksquashfs*”</p> 
<p>gedit mksquashfs.h</p> 
<p>将：struct cache *bwriter_buffer, *fwriter_buffer;</p> 
<p>改为： extern struct cache *bwriter_buffer, *fwriter_buffer;</p> 
<p>gedit mksquashfs.c</p> 
<p>将： struct cache *bwriter_buffer, *fwriter_buffer;</p> 
<p>改为： //struct cache *bwriter_buffer, *fwriter_buffer;</p> 
<p>问题四： qfloat16.h报错<br> qfloat16.h: numeric_limits’ is not a class template</p> 
<p>解决办法<br> 修改 Src/qtbase/src/corelib/global/qglobal.h</p> 
<p>将：</p> 
<p>#ifdef __cplusplus<br> #  include &lt;type_traits&gt;<br> #  include &lt;cstddef&gt;<br> #  include &lt;utility&gt;<br> #endif<br> #ifndef __ASSEMBLER__<br> #  include &lt;assert.h&gt;<br> #  include &lt;stddef.h&gt;<br> #endif<br> 1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 改为：</p> 
<p>#ifdef __cplusplus<br> #  include &lt;type_traits&gt;<br> #  include &lt;cstddef&gt;<br> #  include &lt;utility&gt;<br> #  include &lt;limits&gt;<br> #endif<br> #ifndef __ASSEMBLER__<br> #  include &lt;assert.h&gt;<br> #  include &lt;stddef.h&gt;<br> #endif<br> 1<br> 2<br> 3<br> 4<br> 5<br> 6<br> 7<br> 8<br> 9<br> 10<br> 问题五： makedevs无法创建设备节点<br> makedevs: line 27: can’t create node /dev/console: Operation not permitted</p> 
<p>解决办法<br> 经查找错误信息，是fakeroot执行fakeroot.fs时报的错。因为是升级了ubuntu系统，可能存在fakeroot版本过低导致。于是将fakeroot版本从1.20.2更新到了1.32.1.操作如下：</p> 
<p>在git.buildroot.org中下载了最新的buildroot文件，在里面找到fakeroot目录下：fakeroot.hash与fakeroot.mk文件。<br> 备份buildroot/package/fakeroot目录下原有文件。<br> 将新的fakeroot.hash与fakeroot.mk文件拷贝到buildroot/package/fakeroot目录下。<br> 重新编译，问题解决。<br> 注意事项<br> 在编译recovery时，也需要注意以上更新，否则也会报错。<br> ————————————————<br> 版权声明：本文为CSDN博主「一笼烟波聚又散」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。<br> 原文链接：https://blog.csdn.net/icemou/article/details/132474042</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/11ec6263c703ce940dd4e1f95b7858a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">玩转大数据22：常见的关联规则挖掘算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0a46adfe3255c426893acd1f1a9762a4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DermoSegDiff: A Boundary-aware Segmentation Diffusion Model for Skin Lesion Delineation</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>