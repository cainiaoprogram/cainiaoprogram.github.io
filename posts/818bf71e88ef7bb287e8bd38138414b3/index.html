<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>udp协议路由服务器,TCP/UDP通信协议详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="udp协议路由服务器,TCP/UDP通信协议详解" />
<meta property="og:description" content="一.通信协议概述：
1.定义：
通信设备双方通过共同遵从一组约定，从而使数据可在网络上进行相互传输。
打个比方，不同国家不同母语的两个人，如果要实现交流，就必须以大家都熟悉的一种通用语言来交流，比如英语。同样数据的格式只有一致，通信双方才能正常传输。
2.通信协议层次划分：
国际上通用的划分有tcp/ip四层模型和osi七层模型两种，TCP/UDP协议在两种模型中对应如下：
osi七层模型
TCP/IP四层模型
二、TCP/UDP通信协议
1.概念
TCP、UDP是最常用的传输协议，同属于传输层，不同之处在于：
TCP(Transmission Control Protocol传输控制协议)：是一种面向连接的、可靠的、基于字节流的通信协议；主要传输数据较大、可靠性要求较高的；
UDP(User Datagram Protocol用户数据报协议)是一种无连接的通信，不能保证数据包被发送到目标地址；主要是传输少量数据；
打个比方：TCP连接就像打电话，用户拨特定的号码，对方在线并拿起电话，然后双方进行通话，通话完毕之后再挂断，整个过程是一个相互联系缺一不可的过程；
而UDP连接就像发短信，用户要发送短信给对方，只要输入对方的手机号码即可发送，并不需要先连接对方。
2.三次握手
TCP作为一个可靠连接需要经过3次“对话”，即我们常说的“三次握手”：
第一次握手：建立连接时,客户端发送syn包(syn=j)到服务器,并进入SYN_SEND状态,等待服务器确认；
第二次握手：服务器收到syn包,必须确认客户的SYN(ack=j&#43;1),同时自己也发送一个SYN包(syn=k),即SYN&#43;ACK包,此时服务器进入SYN_RECV状态；
第三次握手：客户端收到服务器的SYN＋ACK包,向服务器发送确认包ACK(ack=k&#43;1),此包发送完毕,客户端和服务器进入ESTABLISHED状态,完成三次握手.
完成三次握手,客户端与服务器开始传送数据
UDP是面向非连接的，所以在服务端与客户端通信之前，不需要经过三次握手这个过程。
3.TCP/UDP对比
二.佰马科技相关产品通信模式的选择
佰马科技提供的无线工业级无线DTU和工业级无线路由器作为透传产品，支持TCP、UDP、MODBUS、MQTT等主流常用的协议，本章节通过实测重点对比TCP、UDP两种传输协议在DTU、路由器上传输时数据格式的差异性，对于如何实现连接以及可靠性不做对比测试。
佰马工业级无线DTU传输模式支持TCP、UDP协议：
1)TCP:包括FTCP、HTCP、CTCP、TCPSVR；
2)UDP:包括NUDP、HUDP、CUDP、UDPSVR；
其中：CTCP 、CUDP属于数据纯透传，即不带任何心跳包和注册包，如果要带，必须自定义设置。其余都带有心跳包和注册包。
以佰马BMD100-A为例，将GPRS工作模式设置成FTCP，连接上服务器，可以观察到服务器收到了BMD100发送的心跳包和数据包123。如下图所示：
同样以佰马BMD100-A为例，将GPRS工作模式设置成CTCP，连接上服务器，可以观察到服务器只收到BMD100发送的数据123，而没有心跳包。如下图所示：
同样以佰马BMD100-A为例，将GPRS工作模式设置成NUDP，连接上服务器，可以观察到服务器收到了BMD100发送的心跳包和数据。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/818bf71e88ef7bb287e8bd38138414b3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-04T02:52:20+08:00" />
<meta property="article:modified_time" content="2021-08-04T02:52:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">udp协议路由服务器,TCP/UDP通信协议详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>一.通信协议概述：</p> 
 <p>1.定义：</p> 
 <p>通信设备双方通过共同遵从一组约定，从而使数据可在网络上进行相互传输。</p> 
 <p>打个比方，不同国家不同母语的两个人，如果要实现交流，就必须以大家都熟悉的一种通用语言来交流，比如英语。同样数据的格式只有一致，通信双方才能正常传输。</p> 
 <p>2.通信协议层次划分：</p> 
 <p>国际上通用的划分有tcp/ip四层模型和osi七层模型两种，TCP/UDP协议在两种模型中对应如下：</p> 
 <p>osi七层模型</p> 
 <p align="center"><img src="https://images2.imgbox.com/9c/1a/lpTxW5PX_o.png" alt="c741387eda659ba32d342fa6ce380610.png"></p> 
 <p>TCP/IP四层模型</p> 
 <p align="center"><img src="https://images2.imgbox.com/d5/d4/5n2jkSRV_o.png" alt="0b30da1f894d71585c7e040349443d40.png"></p> 
 <p>二、TCP/UDP通信协议</p> 
 <p>1.概念</p> 
 <p>TCP、UDP是最常用的传输协议，同属于传输层，不同之处在于：</p> 
 <p>TCP(Transmission Control Protocol传输控制协议)：是一种面向连接的、可靠的、基于字节流的通信协议；主要传输数据较大、可靠性要求较高的；</p> 
 <p>UDP(User Datagram Protocol用户数据报协议)是一种无连接的通信，不能保证数据包被发送到目标地址；主要是传输少量数据；</p> 
 <p>打个比方：TCP连接就像打电话，用户拨特定的号码，对方在线并拿起电话，然后双方进行通话，通话完毕之后再挂断，整个过程是一个相互联系缺一不可的过程；</p> 
 <p>而UDP连接就像发短信，用户要发送短信给对方，只要输入对方的手机号码即可发送，并不需要先连接对方。</p> 
 <p>2.三次握手</p> 
 <p>TCP作为一个可靠连接需要经过3次“对话”，即我们常说的“三次握手”：</p> 
 <p>第一次握手：建立连接时,客户端发送syn包(syn=j)到服务器,并进入SYN_SEND状态,等待服务器确认；</p> 
 <p>第二次握手：服务器收到syn包,必须确认客户的SYN(ack=j+1),同时自己也发送一个SYN包(syn=k),即SYN+ACK包,此时服务器进入SYN_RECV状态；</p> 
 <p>第三次握手：客户端收到服务器的SYN＋ACK包,向服务器发送确认包ACK(ack=k+1),此包发送完毕,客户端和服务器进入ESTABLISHED状态,完成三次握手.</p> 
 <p>完成三次握手,客户端与服务器开始传送数据</p> 
 <p align="center"><img src="https://images2.imgbox.com/f0/82/C55e3cgT_o.png" alt="8759b27ca46cc2449cd85b43c09e1b00.png"></p> 
 <p>UDP是面向非连接的，所以在服务端与客户端通信之前，不需要经过三次握手这个过程。</p> 
 <p>3.TCP/UDP对比</p> 
 <p align="center"><img src="https://images2.imgbox.com/d7/4e/Xy3ObUDb_o.png" alt="da95f19a0f31a5e5f07e22d493b2201d.png"></p> 
 <p>二.佰马科技相关产品通信模式的选择</p> 
 <p>佰马科技提供的无线工业级无线DTU和工业级无线路由器作为透传产品，支持TCP、UDP、MODBUS、MQTT等主流常用的协议，本章节通过实测重点对比TCP、UDP两种传输协议在DTU、路由器上传输时数据格式的差异性，对于如何实现连接以及可靠性不做对比测试。</p> 
 <p>佰马工业级无线DTU传输模式支持TCP、UDP协议：</p> 
 <p>1)TCP:包括FTCP、HTCP、CTCP、TCPSVR；</p> 
 <p>2)UDP:包括NUDP、HUDP、CUDP、UDPSVR；</p> 
 <p>其中：CTCP 、CUDP属于数据纯透传，即不带任何心跳包和注册包，如果要带，必须自定义设置。其余都带有心跳包和注册包。</p> 
 <p align="center"><img src="https://images2.imgbox.com/cd/39/CPZuRamI_o.png" alt="27b3e14dbb632b08649c33a74beb6a4c.png"></p> 
 <p>以佰马BMD100-A为例，将GPRS工作模式设置成FTCP，连接上服务器，可以观察到服务器收到了BMD100发送的心跳包和数据包123。如下图所示：</p> 
 <p align="center"><img src="https://images2.imgbox.com/8b/bf/tGGnBK9M_o.png" alt="c7a69e727d454f23791df0d131b985bd.png"></p> 
 <p>同样以佰马BMD100-A为例，将GPRS工作模式设置成CTCP，连接上服务器，可以观察到服务器只收到BMD100发送的数据123，而没有心跳包。如下图所示：</p> 
 <p align="center"><img src="https://images2.imgbox.com/06/fc/hiunEq6n_o.png" alt="3e849b73268946d9439f57f98fe598c2.png"></p> 
 <p>同样以佰马BMD100-A为例，将GPRS工作模式设置成NUDP，连接上服务器，可以观察到服务器收到了BMD100发送的心跳包和数据。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/27283452cc5f33baf1f5a7c03e94fcad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css 的sprites,Netconcepts | CSS Sprites</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b0a788f71f627778950b7ff940d91d4d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">css划过显示父级元素,当悬停子元素时，如何设置父元素的样式？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>