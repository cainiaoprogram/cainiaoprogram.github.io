<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络入门-NAT网络地址转换-Easy ip - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络入门-NAT网络地址转换-Easy ip" />
<meta property="og:description" content="209、NAT网络地址转换——Easy IP :允许多个私网地址转换成公网IP地址；企业网常用；
210 、实验topo：
原理：
内网私网地址转换成公网接口g0/0/1 当前的IP地址；
先将内网地址用ACL做范围匹配，ACL是没有默认允许所有的规则的；
acl number 2000 rule 5 permit source 192.168.30.0 0.0.0.255
做easy IP NAT转换:
interface GigabitEthernet0/0/1(内网出口)
nat outbound 2000（2000是表号）
测试内网PC能否与外网通信：
查看NAT转换会话：dis nat session all
211、 easy ip的工作原理：
数据包传出：所有的内网地址在出口路由器上转换成公网IP地址，并给数据包添加一个标识符；
数据包回复：外网想要进入到内网的数据包，在出口路由器上根据标识符把外网的IP地址转换成为内网的IP地址；
标识号每一次的数据转发都不一样
212、实验二：SERVER NAT：将服务器的某一个端口映射出去外网;
实验topo：
配置server NAT，将内网的80端口映射到外网的80端口：
R1：
interface GigabitEthernet0/0/1
nat server protocol tcp global 12.1.1.4 www inside 192.168.30.20 www
将内网192.168.30.20 的80端口映射到外网12.1.1.4 的80端口；
测试能否从外网访问到内网服务器：
由于只是把服务器的80端口映射出去，所以如果从外网想要ping内网的服务器的话是没办法ping 的
213、实验三：某员工外出出差，但出差期间任然有多台服务器需要远程管理，但是只有一个IP地址；
由于实验环境有限，因此采用80服务代替3389端口
实验topo：
NAT转换：
interface GigabitEthernet0/0/1
ip address 12." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7d587b8292a2b289c048425cc433705e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-20T08:43:33+08:00" />
<meta property="article:modified_time" content="2022-10-20T08:43:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络入门-NAT网络地址转换-Easy ip</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;"><a name="2791-1598948621934"></a>209、NAT网络地址转换——Easy  IP :允许多个私网地址转换成公网IP地址；企业网常用；</p> 
<p style="margin-left:0;"><a name="6551-1598948778600"></a></p> 
<p style="margin-left:0;"><a name="6015-1598948781353"></a></p> 
<p style="margin-left:0;"><a name="8964-1598948781523"></a>210 、实验topo：</p> 
<p style="margin-left:0;"><a name="6000-1599011443705"></a>原理：</p> 
<p style="margin-left:0;"><a name="5840-1599011447162"></a>内网私网地址转换成公网接口g0/0/1 当前的IP地址；</p> 
<p style="margin-left:0;"><a name="8166-1599011489124"></a></p> 
<p style="margin-left:0;"><a name="4326-1598949103070"></a><img alt="" height="406" src="https://images2.imgbox.com/1e/f4/t57KDBoH_o.png" width="891"></p> 
<p style="margin-left:0;"><a name="6164-1598948732610"></a>先将内网地址用ACL做范围匹配，ACL是没有默认允许所有的规则的；</p> 
<p style="margin-left:0;"><a name="4836-1598949403336"></a>acl number 2000 </p> 
<p style="margin-left:0;"><a name="4489-1598949469477"></a> rule 5 permit source 192.168.30.0 0.0.0.255</p> 
<p style="margin-left:0;"><a name="5979-1598949475345"></a></p> 
<p style="margin-left:0;"><a name="8634-1598949475490"></a></p> 
<p style="margin-left:0;"><a name="9848-1598949475609"></a>做easy IP NAT转换:</p> 
<p style="margin-left:0;"><a name="6565-1598949506548"></a>interface GigabitEthernet0/0/1(内网出口)</p> 
<p style="margin-left:0;"><a name="1498-1598949520200"></a> nat outbound 2000（2000是表号）</p> 
<p style="margin-left:0;"><a name="1050-1599011438792"></a></p> 
<p style="margin-left:0;"><a name="4498-1598949569134"></a></p> 
<p style="margin-left:0;"><a name="2835-1598953533619"></a>测试内网PC能否与外网通信：</p> 
<p style="margin-left:0;"><a name="8426-1598953578661"></a></p> 
<p style="margin-left:0;"><a name="2530-1598953611122"></a><img alt="" height="282" src="https://images2.imgbox.com/c9/db/9bD6omDU_o.png" width="597"></p> 
<p style="margin-left:0;"><a name="4767-1598953623271"></a></p> 
<p style="margin-left:0;"><a name="4812-1598953623271"></a><img alt="" height="266" src="https://images2.imgbox.com/9f/4e/CxvCM6cD_o.png" width="593"></p> 
<p style="margin-left:0;"><a name="7490-1598949547152"></a></p> 
<p style="margin-left:0;"><a name="2494-1598953643703"></a>查看NAT转换会话：dis nat session all</p> 
<p style="margin-left:0;"><a name="3527-1598953731491"></a><img alt="" height="554" src="https://images2.imgbox.com/a1/d1/a3b4ttVb_o.png" width="676"></p> 
<p style="margin-left:0;"><a name="9638-1598953641178"></a></p> 
<p style="margin-left:0;"><a name="8029-1598953766237"></a></p> 
<p style="margin-left:0;"><a name="6561-1598953766347"></a></p> 
<p style="margin-left:0;"><a name="8589-1598953766467"></a>211、 easy ip的工作原理：</p> 
<p style="margin-left:0;"><a name="9612-1599011885019"></a>数据包传出：所有的内网地址在出口路由器上转换成公网IP地址，并给数据包添加一个标识符；</p> 
<p style="margin-left:0;"><a name="7025-1599012073504"></a></p> 
<p style="margin-left:0;"><a name="9953-1599011952316"></a>数据包回复：外网想要进入到内网的数据包，在出口路由器上根据标识符把外网的IP地址转换成为内网的IP地址；</p> 
<p style="margin-left:0;"><a name="1062-1599012096056"></a><img alt="" height="554" src="https://images2.imgbox.com/be/d1/rlOe1VYd_o.png" width="676"></p> 
<p style="margin-left:0;"><a name="3988-1599012079494"></a>标识号每一次的数据转发都不一样</p> 
<p style="margin-left:0;"><a name="9423-1599013337953"></a> </p> 
<p style="margin-left:0;"><a name="2984-1599015319806"></a></p> 
<p style="margin-left:0;"><a name="2700-1599015319939"></a>212、实验二：SERVER NAT：将服务器的某一个端口映射出去外网;</p> 
<p style="margin-left:0;"><a name="5473-1599015367560"></a></p> 
<p style="margin-left:0;"><a name="5562-1599015383349"></a></p> 
<p style="margin-left:0;"><a name="2897-1599015384879"></a></p> 
<p style="margin-left:0;"><a name="8096-1599015385010"></a>实验topo：</p> 
<p style="margin-left:0;"><a name="2873-1599015485100"></a><img alt="" height="384" src="https://images2.imgbox.com/8b/97/PGZpeZUw_o.png" width="992"></p> 
<p style="margin-left:0;"><a name="1116-1599015485100"></a>配置server NAT，将内网的80端口映射到外网的80端口：</p> 
<p style="margin-left:0;"><a name="2219-1599015532383"></a></p> 
<p style="margin-left:0;"><a name="3027-1599015532542"></a>R1：</p> 
<p style="margin-left:0;"><a name="9686-1599015537282"></a>interface GigabitEthernet0/0/1</p> 
<p style="margin-left:0;"><a name="3013-1599015555056"></a></p> 
<p style="margin-left:0;"><a name="2320-1599015555056"></a> nat server protocol tcp global 12.1.1.4 www inside 192.168.30.20 www</p> 
<p style="margin-left:0;"><a name="2163-1599015568695"></a>将内网192.168.30.20 的80端口映射到外网12.1.1.4 的80端口；</p> 
<p style="margin-left:0;"><a name="9186-1599015602621"></a></p> 
<p style="margin-left:0;"><a name="1442-1599015602753"></a>测试能否从外网访问到内网服务器：</p> 
<p style="margin-left:0;"><a name="1064-1599015643032"></a><img alt="" height="509" src="https://images2.imgbox.com/54/0d/so3waJVQ_o.png" width="734"></p> 
<p style="margin-left:0;"><a name="1480-1599015643032"></a>由于只是把服务器的80端口映射出去，所以如果从外网想要ping内网的服务器的话是没办法ping 的</p> 
<p style="margin-left:0;"><a name="1823-1599015946267"></a> </p> 
<p style="margin-left:0;"><a name="1323-1599015956172"></a><img alt="" height="509" src="https://images2.imgbox.com/54/34/bTt4upmO_o.png" width="734"></p> 
<p style="margin-left:0;"><a name="4070-1599015648529"></a></p> 
<p style="margin-left:0;"><a name="8042-1599015648662"></a></p> 
<p style="margin-left:0;"><a name="3028-1599015648808"></a>213、实验三：某员工外出出差，但出差期间任然有多台服务器需要远程管理，但是只有一个IP地址；</p> 
<p style="margin-left:0;"><a name="9990-1599016031025"></a>由于实验环境有限，因此采用80服务代替3389端口</p> 
<p style="margin-left:0;"><a name="4477-1599015701035"></a>实验topo：</p> 
<p style="margin-left:0;"><a name="1077-1599016739799"></a><img alt="" height="369" src="https://images2.imgbox.com/bc/25/tvEwq9LE_o.png" width="980"></p> 
<p style="margin-left:0;"><a name="7913-1599015701446"></a>NAT转换：</p> 
<p style="margin-left:0;"><a name="3022-1599016393012"></a></p> 
<p style="margin-left:0;"><a name="8698-1599016393147"></a>interface GigabitEthernet0/0/1</p> 
<p style="margin-left:0;"><a name="3410-1599016393343"></a> ip address 12.1.1.1 255.255.255.248</p> 
<p style="margin-left:0;"><a name="6753-1599016393343"></a> nat server protocol tcp global 12.1.1.4 1000 inside 192.168.30.20 www</p> 
<p style="margin-left:0;"><a name="7790-1599016393343"></a> nat server protocol tcp global 12.1.1.4 1001 inside 192.168.30.30 www</p> 
<p style="margin-left:0;"><a name="6078-1599016393343"></a> nat server protocol tcp global 12.1.1.4 1002 inside 192.168.30.40 www</p> 
<p style="margin-left:0;"><a name="4960-1599016393343"></a>#</p> 
<p style="margin-left:0;"><a name="7064-1599016393343"></a></p> 
<p style="margin-left:0;"><a name="2664-1599016527475"></a>将内网服务器30.20 、30.30、30.40、的80端口分别映射到外网地址12.1.1.4:1000、12.1.1.4:1001、12.1.1.4:1002</p> 
<p style="margin-left:0;"><a name="9131-1599016598524"></a></p> 
<p style="margin-left:0;"><a name="5840-1599016598669"></a>查看结果：三个服务器共用一个IP地址，将三个端口号分别对应三个服务器的80端口:</p> 
<p style="margin-left:0;"><a name="2593-1599016605573"></a></p> 
<p style="margin-left:0;"><a name="2432-1599016628520"></a><img alt="" height="509" src="https://images2.imgbox.com/e3/aa/CXsoyiic_o.png" width="734"></p> 
<p style="margin-left:0;"><a name="3474-1599016643531"></a></p> 
<p style="margin-left:0;"><a name="2539-1599016643531"></a><img alt="" height="509" src="https://images2.imgbox.com/e7/0f/kngswSq3_o.png" width="734"></p> 
<p style="margin-left:0;"><a name="8568-1599016660795"></a></p> 
<p style="margin-left:0;"><a name="7528-1599016660795"></a><img alt="" height="554" src="https://images2.imgbox.com/06/c3/aNWMUBSv_o.png" width="734"></p> 
<p style="margin-left:0;"><a name="2017-1599016660795"></a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/92c0b4e7693b5adef36ea1c2ebe30955/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Pandas的read_excel函数学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8bc7cf525adb37b1332343287b1830bd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数字孪生 | 04 三维模型的数据治理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>