<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>聊聊Benchmark测试【转载】 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="聊聊Benchmark测试【转载】" />
<meta property="og:description" content="根据wiki百科解释: beanchmark问题就是基准测试问题.
1996 International Workshop on Structural Control 会议上提议组建欧洲、亚洲、和美国3个有关SHM的研究小组,并由 Chen倡导建立Benchmark结构,以便进行各种技术的直接比较.
许多业内比较出名的工具都提供benchmark 功能
1. Apache Beachmark 简称(ab)
他是apache 组织下的一款web压力测试工具, 因使用方便简单而著称.
ab一般常用参数是 –n -t 和 -c
-c（concurrency）表示用多少并发来进行测试(模拟并发数);
-t表示并发测试持续时间;
-n表示要发送多少次请求;
注意: 大小写敏感
ab [get] 请求
$ ab -n 10 -c 3 https://www.baidu.com/
发送10个请求, 模拟3个并发数
Concurrency Level: 3 #当前并发数
Time taken for tests: 0.624 seconds #测试消耗时间
Complete requests: 10 # 完成请求数量
Failed requests: 0 #失败的请求数
Total transferred: 8930 bytes # 共传输数据量
Requests per second: 20." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/87441b541e7d3a5b6037bfc6bbe30296/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-21T15:47:19+08:00" />
<meta property="article:modified_time" content="2021-01-21T15:47:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">聊聊Benchmark测试【转载】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>根据wiki百科解释: beanchmark问题就是基准测试问题.</p> 
<p>1996 International Workshop on Structural Control 会议上提议组建欧洲、亚洲、和美国3个有关SHM的研究小组,并由 Chen倡导建立Benchmark结构,以便进行各种技术的直接比较.</p> 
<p> </p> 
<p>许多业内比较出名的工具都提供benchmark 功能</p> 
<p>1. Apache Beachmark 简称(ab)</p> 
<p>他是apache 组织下的一款web压力测试工具, 因使用方便简单而著称.</p> 
<p><img alt="图片" src="https://images2.imgbox.com/9d/87/qvKVuBIU_o.png"></p> 
<p>ab一般常用参数是 –n   -t 和 -c</p> 
<p>-c（concurrency）表示用多少并发来进行测试(模拟并发数);</p> 
<p>-t表示并发测试持续时间;</p> 
<p>-n表示要发送多少次请求;</p> 
<p>注意: 大小写敏感</p> 
<p>  </p> 
<p><strong>ab [get] 请求</strong></p> 
<p>$ ab -n 10 -c 3 https://www.baidu.com/</p> 
<p>发送10个请求, 模拟3个并发数</p> 
<p><img alt="图片" src="https://images2.imgbox.com/46/4c/IlqPmyzK_o.png"></p> 
<p>Concurrency Level:      3   #当前并发数</p> 
<p>Time taken for tests:   0.624 seconds   #测试消耗时间</p> 
<p>Complete requests:      10  # 完成请求数量</p> 
<p>Failed requests:        0   #失败的请求数</p> 
<p>Total transferred:      8930 bytes # 共传输数据量</p> 
<p>Requests per second:    20.24 [#/sec] (mean)  #平均每秒完成请求个数</p> 
<p>Time per request:       148.231 [ms] (mean) #每组请求消耗时间</p> 
<p>Time per request:       49.410 [ms] (mean, across all concurrent requests) #每个请求消耗时间</p> 
<p>Transfer rate:          17.65 [Kbytes/sec] received #传输速率</p> 
<p>Percentage of the requests served within a certain time (ms)</p> 
<p>  50%    104   #104ms内已经完成了50%的请求</p> 
<p>  80%    161   #161ms内已经完成了80%的请求</p> 
<p> </p> 
<p>ab [post] 请求</p> 
<p>$ ab -n 100  -c 10 -p 'postdata.txt' -T 'application/x-www-form-urlencoded' 'http://xxx.api.com/'</p> 
<p>-p postfile</p> 
<p>-T Content-type header to use for POST/PUT data,</p> 
<p>'application/x-www-form-urlencoded' Default is 'text/plain'</p> 
<p> </p> 
<p> </p> 
<p>2.  Redis-Beachmark</p> 
<p><img alt="图片" src="https://images2.imgbox.com/07/b8/bb9os4FJ_o.png"></p> 
<p>测试实例:</p> 
<p>redis-benchmark -h localhost -p 6379 -c 3 -n 6</p> 
<p>3个并发, 6个请求 检测端口号6379的redis 性能</p> 
<p>$ redis-benchmark -h localhost -p 6379 -c 3 -n 6</p> 
<p>====== PING_INLINE ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>6000.00 requests per second</p> 
<p> </p> 
<p>====== PING_BULK ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== SET ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>6000.00 requests per second</p> 
<p> </p> 
<p>====== GET ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== INCR ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== LPUSH ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>6000.00 requests per second</p> 
<p> </p> 
<p>====== RPUSH ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== LPOP ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== RPOP ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>6000.00 requests per second</p> 
<p> </p> 
<p>====== SADD ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== HSET ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== SPOP ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== LPUSH (needed to benchmark LRANGE) ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p>====== LRANGE_100 (first 100 elements) ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>66.67% &lt;= 1 milliseconds</p> 
<p>100.00% &lt;= 1 milliseconds</p> 
<p>3000.00 requests per second</p> 
<p> </p> 
<p>====== LRANGE_300 (first 300 elements) ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>3000.00 requests per second</p> 
<p> </p> 
<p>====== LRANGE_500 (first 450 elements) ======</p> 
<p>  6 requests completed in 0.01 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>50.00% &lt;= 1 milliseconds</p> 
<p>100.00% &lt;= 1 milliseconds</p> 
<p>1000.00 requests per second</p> 
<p> </p> 
<p>====== LRANGE_600 (first 600 elements) ======</p> 
<p>  6 requests completed in 0.01 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>66.67% &lt;= 1 milliseconds</p> 
<p>100.00% &lt;= 1 milliseconds</p> 
<p>1000.00 requests per second</p> 
<p> </p> 
<p>====== MSET (10 keys) ======</p> 
<p>  6 requests completed in 0.00 seconds</p> 
<p>  3 parallel clients</p> 
<p>  3 bytes payload</p> 
<p>  keep alive: 1</p> 
<p> </p> 
<p>100.00% &lt;= 0 milliseconds</p> 
<p>inf requests per second</p> 
<p> </p> 
<p> </p> 
<p>$redis-benchmark -h localhost -p 6379 -q -d 100</p> 
<p>测试存取大小为100字节的数据包的性能</p> 
<p> </p> 
<p> </p> 
<p>$ redis-benchmark -t set,lpush -n 100 -q //测试操作-t(set, lpush)的性能</p> 
<p>SET: 20000.00 requests per second</p> 
<p>LPUSH: 6666.67 requests per second</p> 
<p> </p> 
<p>$ redis-benchmark -r 1000000 -n 2000000 -t get,set,lpush,lpop -P 16 -q   //redis 管道</p> 
<p>SET: 142857.14 requests per second</p> 
<p>GET: 117647.05 requests per second</p> 
<p>LPUSH: 181818.19 requests per second</p> 
<p>LPOP: 200000.00 requests per second</p> 
<p> </p> 
<p>Redis是一种基于客户端/服务端模型, Request/Response遵循TCP协议的服务,也就说:</p> 
<p>客户端向服务端发送一个查询请求, 监听socket返回, 通常以阻塞模式, 等待服务端响应. 服务端处理命令, 并将结果返回给客户端.</p> 
<p> Redis很早就支持管道（pipelining）技术，因此无论你运行的是什么版本，你都可以使用管道（pipelining）操作Redis。</p> 
<p><img alt="图片" src="https://images2.imgbox.com/98/36/5NBz0jGD_o.png"></p> 
<p> </p> 
<p>下面是一个使用的例子：</p> 
<p>$ (printf "PING\r\nPING\r\nPING\r\n"; sleep 1) | nc localhost 6379</p> 
<p>+PONG</p> 
<p>+PONG</p> 
<p>+PONG</p> 
<p> </p> 
<p> </p> 
<p>$ (echo -en "PING\r\n SET key redis\r\nGET key\r\nINCR x\r\nINCR x\r\nINCR x\r\n"; sleep 10) | nc localhost 6379</p> 
<p> </p> 
<p>Using the TCP loopback:</p> 
<p>$ redis-benchmark -q -n 100000 -d 256</p> 
<p>PING_INLINE: 36023.05 requests per second</p> 
<p>PING_BULK: 36697.25 requests per second</p> 
<p>SET: 34710.17 requests per second</p> 
<p>GET: 35919.54 requests per second</p> 
<p>INCR: 36927.62 requests per second</p> 
<p>LPUSH: 27151.78 requests per second</p> 
<p>RPUSH: 37160.91 requests per second</p> 
<p>LPOP: 25348.54 requests per second</p> 
<p>RPOP: 29958.06 requests per second</p> 
<p>SADD: 34176.35 requests per second</p> 
<p>HSET: 33411.29 requests per second</p> 
<p>SPOP: 34002.04 requests per second</p> 
<p>LPUSH (needed to benchmark LRANGE): 37105.75 requests per second</p> 
<p>LRANGE_100 (first 100 elements): 10824.85 requests per second</p> 
<p>LRANGE_300 (first 300 elements): 3895.90 requests per second</p> 
<p>LRANGE_500 (first 450 elements): 2820.95 requests per second</p> 
<p>LRANGE_600 (first 600 elements): 2107.26 requests per second</p> 
<p>MSET (10 keys): 27987.69 requests per second</p> 
<p> </p> 
<p>Benchmark测试中最重要的是标准规范，也就是说他是一个评价方式，工具等因素已经不重要，只要大家都用同一标准规范、同一工具进行系统测试，那么测试结果也就具有了比较意义。Benchmark 测试实际上就成了各个厂商展示技术实力的舞台, 任何厂家或者测试者都可以根据组织公布的规范标准, 构建自己最优的系统.</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2013441deb2780e1adf684ed85d2b325/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信内置浏览器私有接口WeixinJSBridge的常用方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb923596849106dd81bac943229ef2b3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2 计算机网络性能指标</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>