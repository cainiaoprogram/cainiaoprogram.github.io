<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>智慧巡查平台（Ionic/Vite/Vue3 移动端） 问题记录 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="智慧巡查平台（Ionic/Vite/Vue3 移动端） 问题记录" />
<meta property="og:description" content="目录
1.环境搭建
1.1 安装 node 16&#43; 版本
1.2 安装 ionic7
1.3 创建 vue 项目
2.index.html
3.main.ts
3.1 如何默认使用 ios 样式？
3.2 如何使用 ElmentPlus 国际化？
4.router/xxx
5.打包二三事
5.1 添加打包相关文件
5.1.1 .env.development / .env.production
5.1.2 修改 vite.config.ts，增加 base
5.2 打包 h5
5.2.1 如何使用 Live Server，测试打包效果？
5.3 打包移动端
5.3.1 添加 android 平台
5.3.1.1 打包时，依赖解析失败，会导致添加 android 平台失败
5.3.2 构建、同步原生app资源，打开 Android Studio
5.3.2.1 gradle 是个啥
5.3.2.2 如何解决 gradle 下载不下来的问题？
5.3.2.3 执行 ionic cap sync 后 在 Android Studio 中报错" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2e7f06de2305e4d42a9289b607878279/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-26T15:24:02+08:00" />
<meta property="article:modified_time" content="2023-10-26T15:24:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">智慧巡查平台（Ionic/Vite/Vue3 移动端） 问题记录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1.%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA-toc" style="margin-left:0px;"><a href="#1.%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA" rel="nofollow">1.环境搭建</a></p> 
<p id="uc55f1d51-toc" style="margin-left:40px;"><a href="#uc55f1d51" rel="nofollow">1.1 安装 node 16+ 版本</a></p> 
<p id="ubea5e601-toc" style="margin-left:40px;"><a href="#ubea5e601" rel="nofollow">1.2 安装 ionic7</a></p> 
<p id="ufd1eca96-toc" style="margin-left:40px;"><a href="#ufd1eca96" rel="nofollow">1.3 创建 vue 项目</a></p> 
<p id="tDFdU-toc" style="margin-left:0px;"><a href="#tDFdU" rel="nofollow">2.index.html</a></p> 
<p id="cCcmu-toc" style="margin-left:0px;"><a href="#cCcmu" rel="nofollow">3.main.ts</a></p> 
<p id="ZcFh1-toc" style="margin-left:40px;"><a href="#ZcFh1" rel="nofollow">3.1 如何默认使用 ios 样式？</a></p> 
<p id="Z23Kp-toc" style="margin-left:40px;"><a href="#Z23Kp" rel="nofollow">3.2 如何使用 ElmentPlus 国际化？</a></p> 
<p id="x94RN-toc" style="margin-left:0px;"><a href="#x94RN" rel="nofollow">4.router/xxx</a></p> 
<p id="5.%E6%89%93%E5%8C%85%E4%BA%8C%E4%B8%89%E4%BA%8B-toc" style="margin-left:0px;"><a href="#5.%E6%89%93%E5%8C%85%E4%BA%8C%E4%B8%89%E4%BA%8B" rel="nofollow">5.打包二三事</a></p> 
<p id="GHkyl-toc" style="margin-left:40px;"><a href="#GHkyl" rel="nofollow">5.1 添加打包相关文件</a></p> 
<p id="m3O6d-toc" style="margin-left:80px;"><a href="#m3O6d" rel="nofollow">5.1.1 .env.development / .env.production</a></p> 
<p id="EJI6Q-toc" style="margin-left:80px;"><a href="#EJI6Q" rel="nofollow">5.1.2 修改 vite.config.ts，增加 base</a></p> 
<p id="wcy4Q-toc" style="margin-left:40px;"><a href="#wcy4Q" rel="nofollow">5.2 打包 h5</a></p> 
<p id="mQGi8-toc" style="margin-left:80px;"><a href="#mQGi8" rel="nofollow">5.2.1 如何使用 Live Server，测试打包效果？</a></p> 
<p id="dZYCr-toc" style="margin-left:40px;"><a href="#dZYCr" rel="nofollow">5.3 打包移动端</a></p> 
<p id="N5rMK-toc" style="margin-left:80px;"><a href="#N5rMK" rel="nofollow">5.3.1 添加 android 平台</a></p> 
<p id="J8SuG-toc" style="margin-left:120px;"><a href="#J8SuG" rel="nofollow">5.3.1.1 打包时，依赖解析失败，会导致添加 android 平台失败</a></p> 
<p id="ge8Ew-toc" style="margin-left:80px;"><a href="#ge8Ew" rel="nofollow">5.3.2 构建、同步原生app资源，打开 Android Studio</a></p> 
<p id="cu4LQ-toc" style="margin-left:120px;"><a href="#cu4LQ" rel="nofollow">5.3.2.1 gradle 是个啥</a></p> 
<p id="dbXIj-toc" style="margin-left:120px;"><a href="#dbXIj" rel="nofollow">5.3.2.2 如何解决 gradle 下载不下来的问题？</a></p> 
<p id="PdQzP-toc" style="margin-left:120px;"><a href="#PdQzP" rel="nofollow">5.3.2.3 执行 ionic cap sync 后 在 Android Studio 中报错</a></p> 
<p id="5.3.2.4%C2%A0%E5%8D%87%E7%BA%A7%E5%AE%8C%20Android%20Studio%20%E5%90%8E%EF%BC%8C%E6%89%BE%E4%B8%8D%E5%88%B0%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96-toc" style="margin-left:120px;"><a href="#5.3.2.4%C2%A0%E5%8D%87%E7%BA%A7%E5%AE%8C%20Android%20Studio%20%E5%90%8E%EF%BC%8C%E6%89%BE%E4%B8%8D%E5%88%B0%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96" rel="nofollow">5.3.2.4 升级完 Android Studio 后，找不到相关依赖</a></p> 
<p id="5.3.2.5%C2%A0%E5%9C%A8%E7%BA%BF%E6%B5%8B%E8%AF%95%20chrome%3A%2F%2Finspect-toc" style="margin-left:120px;"><a href="#5.3.2.5%C2%A0%E5%9C%A8%E7%BA%BF%E6%B5%8B%E8%AF%95%20chrome%3A%2F%2Finspect" rel="nofollow">5.3.2.5 在线测试 chrome://inspect</a></p> 
<p id="5.4%20%E6%89%93%E5%8C%85%E9%81%87%E5%88%B0%E7%9A%84%E5%85%B6%E5%AE%83%E9%97%AE%E9%A2%98%C2%A0-toc" style="margin-left:40px;"><a href="#5.4%20%E6%89%93%E5%8C%85%E9%81%87%E5%88%B0%E7%9A%84%E5%85%B6%E5%AE%83%E9%97%AE%E9%A2%98%C2%A0" rel="nofollow">5.4 打包遇到的其它问题 </a></p> 
<p id="iTXfJ-toc" style="margin-left:80px;"><a href="#iTXfJ" rel="nofollow">5.4.1 打包报错 vue-tsc 解决方案，调整 package.json 打包配置，删除 vue-tsc</a></p> 
<p id="zrKYA-toc" style="margin-left:80px;"><a href="#zrKYA" rel="nofollow">5.4.2 打包后，页面一片空白，没有报错</a></p> 
<p id="mq0aP-toc" style="margin-left:80px;"><a href="#mq0aP" rel="nofollow">5.4.3 打包报错 顶层 await 解决方案</a></p> 
<p id="m7W2H-toc" style="margin-left:120px;"><a href="#m7W2H" rel="nofollow">解决方案一（目前使用的）</a></p> 
<p id="h6BLE-toc" style="margin-left:120px;"><a href="#h6BLE" rel="nofollow">解决方案二（看似优雅但是毫无卵用）</a></p> 
<p id="ZGW6x-toc" style="margin-left:80px;"><a href="#ZGW6x" rel="nofollow">5.4.4 打包后，图片地址能单独打开，但是在页面里又不显示</a></p> 
<p id="RaD5n-toc" style="margin-left:80px;"><a href="#RaD5n" rel="nofollow">5.4.5 打包后，静态资源不全</a></p> 
<p id="5.4.6%C2%A0%E9%83%A8%E7%BD%B2%E5%88%B0%20nginx%20%E4%B8%8A%E5%90%8E%EF%BC%8C%E9%A1%B5%E9%9D%A2%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5-toc" style="margin-left:80px;"><a href="#5.4.6%C2%A0%E9%83%A8%E7%BD%B2%E5%88%B0%20nginx%20%E4%B8%8A%E5%90%8E%EF%BC%8C%E9%A1%B5%E9%9D%A2%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5" rel="nofollow">5.4.6 部署到 nginx 上后，页面网络请求失败</a></p> 
<p id="5.4.7%C2%A0%E6%B7%BB%E5%8A%A0%20file-transfer%20%E6%8F%92%E4%BB%B6%E5%90%8E%EF%BC%8C%E6%89%93%E5%8C%85%E6%8A%A5%E9%94%99%E4%B9%B1%E7%A0%81-toc" style="margin-left:80px;"><a href="#5.4.7%C2%A0%E6%B7%BB%E5%8A%A0%20file-transfer%20%E6%8F%92%E4%BB%B6%E5%90%8E%EF%BC%8C%E6%89%93%E5%8C%85%E6%8A%A5%E9%94%99%E4%B9%B1%E7%A0%81" rel="nofollow">5.4.7 添加 file-transfer 插件后，打包报错乱码</a></p> 
<p id="5.4.8%20%E8%A7%A3%E5%86%B3%20android.support.v4.app.CoreComponent...%20%E6%8F%92%E4%BB%B6%E7%89%88%E6%9C%AC%E4%B8%8D%E5%8C%B9%E9%85%8D%E7%9A%84%E9%97%AE%E9%A2%98-toc" style="margin-left:80px;"><a href="#5.4.8%20%E8%A7%A3%E5%86%B3%20android.support.v4.app.CoreComponent...%20%E6%8F%92%E4%BB%B6%E7%89%88%E6%9C%AC%E4%B8%8D%E5%8C%B9%E9%85%8D%E7%9A%84%E9%97%AE%E9%A2%98" rel="nofollow">5.4.8 解决 android.support.v4.app.CoreComponent... 插件版本不匹配的问题</a></p> 
<p id="dWxl8-toc" style="margin-left:120px;"><a href="#dWxl8" rel="nofollow">解决方案一（使用 jetifier 将项目中的 android.support.v4 代码转换成 androidx）</a></p> 
<p id="ZdKP2-toc" style="margin-left:120px;"><a href="#ZdKP2" rel="nofollow">解决方案二（使用 Android 自带的转换工具转换）</a></p> 
<p id="wa2hN-toc" style="margin-left:80px;"><a href="#wa2hN" rel="nofollow">5.4.9 解决 Android SDK 版本 和 打包工具版本 不匹配导致的报错</a></p> 
<p id="HzPH3-toc" style="margin-left:120px;"><a href="#HzPH3" rel="nofollow">基本概念</a></p> 
<p id="nk7lC-toc" style="margin-left:120px;"><a href="#nk7lC" rel="nofollow">为什么要尽量保持 compileSdkVersion 和 buildToolsVersion 版本一致？</a></p> 
<p id="mJfMv-toc" style="margin-left:120px;"><a href="#mJfMv" rel="nofollow">Android SDK Build Tools 打包工具安装</a></p> 
<p id="ve38h-toc" style="margin-left:120px;"><a href="#ve38h" rel="nofollow">Android 平台版本安装</a></p> 
<p id="MjlzQ-toc" style="margin-left:120px;"><a href="#MjlzQ" rel="nofollow">查看 Andorid Studio 中的虚拟机 所用的 Android 版本信息</a></p> 
<p id="I4dMP-toc" style="margin-left:120px;"><a href="#I4dMP" rel="nofollow">修改项目模块 Modules，保持版本一致性</a></p> 
<p id="WRf8x-toc" style="margin-left:80px;"><a href="#WRf8x" rel="nofollow">解决 cordova-camera 插件点击拍照后，app闪退、报错非法参数的问题</a></p> 
<p id="zjUCf-toc" style="margin-left:120px;"><a href="#zjUCf" rel="nofollow">问就是升级插件版本，立马解决这种抽象报错</a></p> 
<p id="Kl41C-toc" style="margin-left:120px;"><a href="#Kl41C" rel="nofollow">打断点调试 cordova.camera 的经历</a></p> 
<p id="ZYdUr-toc" style="margin-left:80px;"><a href="#ZYdUr" rel="nofollow">为什么在 org.apache.cordova 中，找不到 imagepicker 插件？</a></p> 
<p id="s5KDU-toc" style="margin-left:80px;"><a href="#s5KDU" rel="nofollow">修改 ImagePicker 图片选择插件 的中文名字</a></p> 
<p id="AIMKU-toc" style="margin-left:80px;"><a href="#AIMKU" rel="nofollow">node_modules 和 android 是啥关系</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2>1.环境搭建</h2> 
<h3 id="uc55f1d51">1.1 安装 node 16+ 版本</h3> 
<blockquote> 
 <p id="ueb93284f">nvm install 16.20.2</p> 
</blockquote> 
<p><img alt="" height="125" src="https://images2.imgbox.com/c9/fe/Pq1d27qk_o.png" width="266"></p> 
<p id="ucb0e357b"></p> 
<h3 id="ubea5e601">1.2 安装 ionic7</h3> 
<blockquote> 
 <p id="u474d2a84">npminstall -g @ionic/cli@latest</p> 
</blockquote> 
<p><img alt="" height="63" src="https://images2.imgbox.com/05/cf/w9tNheYQ_o.png" width="270"></p> 
<p>ps：某个平常的清晨，我的 ionic 自动从7掉到了6，导致我 7 的项目运行不起来了，而且还装不上7，最后重启就自动恢复成7了，so...遇事别慌，重启试试</p> 
<p id="u748efa5c"></p> 
<p id="u280822f7"></p> 
<h3 id="ufd1eca96">1.3 创建 vue 项目</h3> 
<blockquote> 
 <p id="u03559df6">ionic start weihai-patrol-app tabs --type vue</p> 
</blockquote> 
<p></p> 
<h2 id="tDFdU">2.index.html</h2> 
<p id="u2a45f3b3">之前的 ionic 项目，index.html 都是在 public 下面的</p> 
<p id="u381d8e5e"><span style="color:#fe2c24;"><u><span style="background-color:#fefcd8;">最新版的 ionic7，因为采用 vite，所以 index.html 在根目录下，而不是 public 下</span></u></span></p> 
<p></p> 
<p id="u5416c071">新建 config.js 用于存放 ip，该文件需要在 index.html 中引入</p> 
<ul><li id="ufff54437">开发过程中，读取的是 public 下的 config.js</li><li id="u718c995d">打包后的成品，读取的是 根目录下的 config.js</li></ul> 
<p id="u5a00b79a">目前两个 config.js 缺一不可，需要保持一致</p> 
<p><img alt="" height="300" src="https://images2.imgbox.com/1e/db/M1wxZCeJ_o.png" width="750"></p> 
<p></p> 
<h2 id="cCcmu">3.main.ts</h2> 
<h3 id="ZcFh1">3.1 如何默认使用 ios 样式？</h3> 
<p id="u2f177850"><span style="color:#fe2c24;"><span style="background-color:#fefcd8;">之所以要全局设置，是因为项目运行起来后，默认展示 Android 样式，刷新后才展示 IOS 样式</span></span></p> 
<p id="uc08333b9">在 Ionic 7 + Vue 3 + Vite 项目中</p> 
<ul><li id="u383ef9c7">打开 src/main.ts 文件</li><li id="uc2f2e5ee">在 createApp 函数中，使用 IonicVue 插件，并传入 mode: 'ios' 选项<br>  </li></ul> 
<pre id="X1OJS"><code class="language-TypeScript">   import { createApp } from 'vue';
   import { IonicVue } from '@ionic/vue';
   import App from './App.vue';
   import router from './router';
   const app = createApp(App)
     .use(IonicVue, { mode: 'ios' }) // 设置默认全局使用 iOS 样式
     .use(router);
   router.isReady().then(() =&gt; {
     app.mount('#app');
   });</code></pre> 
<p id="ucf1d2da1"></p> 
<h3 id="Z23Kp">3.2 如何使用 ElmentPlus 国际化？</h3> 
<p id="ue47f718b">使用原因：日历组件默认展示英文</p> 
<pre id="oecL5"><code class="language-TypeScript">// 添加 elementplus 国际化
import ElementPlus from 'element-plus';
import zhCn from 'element-plus/dist/locale/zh-cn.mjs';
import * as ElementPlusIconsVue from '@element-plus/icons-vue';

const app = createApp(App)
  .use(ElementPlus, {
    locale: zhCn,
  });</code></pre> 
<p id="ue5a2e956"></p> 
<p id="u15621292">为啥我不用 ionic 的日历组件呢？</p> 
<ul><li id="u4a503557">使用 ionic7 中的日历组件，两个及以上，只会渲染一个，暂时没来的及排查原因 <a href="https://ionicframework.com/docs/api/datetime-button" rel="nofollow" title="ion-datetime-button: Ionic Input for Datetime Picker">ion-datetime-button: Ionic Input for Datetime Picker</a></li><li id="uf28564b4">ionic7 之前的日历组件，跨年跨月选择很费劲，都是滚轮的</li></ul> 
<p></p> 
<h2 id="x94RN">4.router/xxx</h2> 
<p id="u9c1411df">路由，虽然我很想拆分，但打包 h5 的时候：</p> 
<ul><li id="u7b7309cd"><span style="color:#fe2c24;">在 vite 里遍历文件导入，不能使用 require</span></li><li id="uaa30b55b">用 import await 打包又会报错禁止使用顶层 await</li><li id="u14e36a6e">使用 vite 插件解决了顶层 await 路由页面又白屏，移除插件也白屏</li><li id="ua522e7f2">移除插件并且<span style="color:#fe2c24;">使用 hash 路由</span>，才正常显示<span style="color:#fe2c24;"><u><span style="background-color:#fefcd8;">（划重点，记笔记，打 h5 包一般使用 hash 路由解决白屏问题）</span></u></span></li><li id="u99d71ab3">就很难搞……目前就是合并成一个文件了</li></ul> 
<p id="u254de4db">这一节可以结合下面的打包遇到的问题一块看</p> 
<p id="ue8915cdf">如果有大佬可以帮忙解决这个问题，请联系我，感恩的心</p> 
<pre><code class="language-TypeScript">import { createRouter, createWebHashHistory, createWebHistory } from '@ionic/vue-router';

// 可以使用 require 时，才能用下面的方法
// // 自动添加router目录下的所有ts路由模块
// const files = require.context('./', false, /\.ts$/);
// files.keys().forEach((route) =&gt; {
//   // 如果是根目录的 index.js、 不做任何处理
//   if (route.startsWith('./index')) {
//     return;
//   }
//   const routerModule = files(route);
//   // 兼容 import export 和 require module.export 两种规范 ES modules commonjs
//   routes.push(...(routerModule.default || routerModule));
// });

/**
 * 接所有路由文件导出的内容
 * @description 不能使用 require 时，采用此方法
 * @param routeFiles 路由文件对象数组
 * @returns
 */
const importAll = async (routeFiles: any) =&gt; {
  // console.log('路由文件对象数组 ---', routeFiles);

  // 拼接好的最终路由配置
  const routes = [];
  // 遍历路由配置文件
  for (const path in routeFiles) {
    // console.log('path 路由文件名', path);
    const routeModule = await routeFiles[path]();
    console.log('routeModule 路由文件导出内容', routeModule);
    const route = routeModule?.default || routeModule;
    // 将导出的数组填充到最终数组中
    route.forEach((elem: any) =&gt; routes.push(elem));
  }
  return routes;
};

// 使用动态导入来导入所有路由文件
const routeFilesArr = import.meta.glob('./*.ts');

// 拼接所有路由文件导出的内容
const routes = await importAll(routeFilesArr);

// 创建路由实例（Hash 路由）
const router = createRouter({
  history: createWebHashHistory(import.meta.env.BASE_URL),
  routes,
});

export default router;
</code></pre> 
<p> </p> 
<h2 id="5.%E6%89%93%E5%8C%85%E4%BA%8C%E4%B8%89%E4%BA%8B">5.打包二三事</h2> 
<p id="ue79dc365"><span style="color:#fe2c24;">打包分为两种，一种是 h5 包，一种是移动端</span></p> 
<h3 id="GHkyl">5.1 添加打包相关文件</h3> 
<h4 id="m3O6d">5.1.1 .env.development / .env.production</h4> 
<blockquote> 
 <p><span style="color:#fe2c24;">注意事项：</span></p> 
 <ul><li id="ua7c7c7ce"><span style="color:#fe2c24;">这两个文件名字是固定的</span></li><li id="u22a9e4f0"><span style="color:#fe2c24;">打 h5包 时需要新增，打 移动端包 时需要移除</span></li></ul> 
</blockquote> 
<p id="u069f8b88"></p> 
<p id="ub73d3e3f">patrol-app\.env.development</p> 
<pre id="ZWa7A"><code class="language-TypeScript">NODE_ENV=development

VITE_BASE_PATH='/'</code></pre> 
<p id="uc7ebbd9f">patrol-app\.env.production</p> 
<pre id="l0Ou6"><code class="language-TypeScript">NODE_ENV=production

BASE_URL=/weihai-patrol/
</code></pre> 
<p id="u4486dbfb"></p> 
<h4 id="EJI6Q">5.1.2 修改 vite.config.ts，增加 base</h4> 
<blockquote> 
 <p id="ua9ffa9c3"><span style="color:#fe2c24;">注意事项：</span></p> 
 <ul><li><span style="color:#fe2c24;">h5 改成 /weihai-patrol/</span></li><li id="u7def2d3d"><span style="color:#fe2c24;">移动端改成 ./</span></li></ul> 
</blockquote> 
<pre id="lVcvF"><code class="language-TypeScript">
/**
 * 判断是否是生产环境
 * @returns {boolean}
 */
function isProd() {
  return process.env.NODE_ENV === 'production';
}

base: '/weihai-patrol/',
// 解决打包不知道干啥的
build: {
    minify: 'terser',
    terserOptions: {
      compress: {
        // drop_console: true,
        drop_debugger: true,
      },
    },
  },</code></pre> 
<h3 id="wcy4Q">5.2 打包 h5</h3> 
<p id="u3e30221f"><span style="color:#fe2c24;">添加完打包相关的文件后（注意在 vite.config.js 中使用的 base 相对路径），直接执行 yarn build 就行</span></p> 
<h4 id="mQGi8">5.2.1 如何使用 Live Server，测试打包效果？</h4> 
<p id="u7cd61c28">将生成的 dist 目录，cv 到当前打开的 vscode 里，和当前项目同级</p> 
<p id="u78b2ab98">把 dist 改名成 weihai-patrol，右击 index.html，使用 live server 打开</p> 
<p><img alt="" height="316" src="https://images2.imgbox.com/0f/bc/tcOUoD78_o.png" width="235"></p> 
<p></p> 
<h3 id="dZYCr">5.3 打包移动端</h3> 
<p id="ud5e54950"><span style="color:#fe2c24;">添加完打包相关的文件后（注意在 vite.config.js 中使用的 base 相对路径），还要执行下面的操作</span></p> 
<p></p> 
<h4 id="N5rMK">5.3.1 添加 android 平台</h4> 
<blockquote> 
 <p id="u2c32560f">ionic capacitor add android</p> 
</blockquote> 
<p id="u821ed268">添加成功是这种感觉：</p> 
<p><img alt="" height="511" src="https://images2.imgbox.com/69/a3/vGp5AdxE_o.png" width="868"></p> 
<p id="u62aad73c">执行完毕后：</p> 
<ul><li id="u0c13dbf7">package.json 中会自动添加依赖：<span style="color:#fe2c24;">"@capacitor/android": "5.4.1",</span></li><li id="u705a6e80">项目根目录中，会新增<span style="color:#fe2c24;"> android 文件夹 ​​​​​​​</span><img alt="" height="307" src="https://images2.imgbox.com/2d/27/pQZW8MAu_o.png" width="286"></li></ul> 
<p> </p> 
<h5 id="J8SuG">5.3.1.1 打包时，依赖解析失败，会导致添加 android 平台失败</h5> 
<p><img alt="" height="672" src="https://images2.imgbox.com/26/01/z2kKvTQT_o.png" width="978"></p> 
<p id="ubde6968a">解决方案：这个包是用来进行 vue 单元测试的，直接移除安装吧</p> 
<blockquote> 
 <p id="uaffa6e7b">npm uninstall @vue/cli-plugin-unit-jest</p> 
</blockquote> 
<p> </p> 
<h4 id="ge8Ew">5.3.2 构建、同步原生app资源，打开 Android Studio</h4> 
<blockquote> 
 <p id="udac6cd94">ionic cap sync</p> 
</blockquote> 
<p id="u87098712">构建成功是这种感觉：</p> 
<p><img alt="" height="655" src="https://images2.imgbox.com/a8/05/ixJ3Q530_o.png" width="1200"></p> 
<p id="u7decd021"><span style="color:#fe2c24;">此时，会自动打开 android studio，自动执行 gradle 下载</span></p> 
<p></p> 
<h5 id="cu4LQ">5.3.2.1 gradle 是个啥</h5> 
<p id="u592fdfcc">Gradle 是一个开源的<span style="color:#fe2c24;">构建自动化工具</span>，它被广泛用于 Android 开发中，用于构建和管理 Android 应用程序的构建过程<br><br> 在 Android 开发中，Gradle 被用作 Android 项目的构建工具。它可以编译源代码、处理资源文件、打包生成 APK 文件，并支持多种构建变体和构建类型。通过 Gradle，你可以轻松地管理和配置你的 Android 项目的构建过程，包括添加第三方库、处理多渠道打包、配置签名等</p> 
<p></p> 
<h5 id="dbXIj">5.3.2.2 如何解决 gradle 下载不下来的问题？</h5> 
<p id="u272e7065">修改下载源</p> 
<pre id="GLpPp"><code class="language-TypeScript">maven { url 'https://maven.aliyun.com/repository/google' }
maven { url 'https://maven.aliyun.com/repository/jcenter' }
maven { url 'https://maven.aliyun.com/nexus/content/groups/public' }</code></pre> 
<p><img alt="" height="724" src="https://images2.imgbox.com/a5/5c/rdmoi9sB_o.png" width="1200"></p> 
<p></p> 
<h5 id="PdQzP">5.3.2.3 执行 ionic cap sync 后 在 Android Studio 中报错</h5> 
<p><img alt="" height="815" src="https://images2.imgbox.com/62/0a/yhnH3HF2_o.png" width="1200"></p> 
<blockquote> 
 <p id="uffaff332">Cannot convert string value 'UNIFIED_TEST_PLATFORM' to an enum value of type 'com.android.builder.model.AndroidGradlePluginProjectFlags$BooleanFlag' (valid case insensitive values: APPLICATION_R_CLASS_CONSTANT_IDS, TEST_R_CLASS_CONSTANT_IDS, TRANSITIVE_R_CLASS, JETPACK_COMPOSE, ML_MODEL_BINDING)</p> 
</blockquote> 
<p id="ue3a03f73"><span style="color:#fe2c24;">升级 Android Studio 版本就行</span></p> 
<p></p> 
<h5 id="5.3.2.4%C2%A0%E5%8D%87%E7%BA%A7%E5%AE%8C%20Android%20Studio%20%E5%90%8E%EF%BC%8C%E6%89%BE%E4%B8%8D%E5%88%B0%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span style="color:#0d0016;">5.3.2.4 升级完 Android Studio 后，找不到相关依赖</span></h5> 
<p id="ub08ead17">根据下面的报错信息：下载源找不到相关路径，因此，我把下载源切回了 google，然后打包正常了</p> 
<p id="u51e851a2">也可能是因为多注释了：mavenCentral()</p> 
<p><img alt="" height="769" src="https://images2.imgbox.com/16/b3/BnA5Iyq2_o.png" width="1200"></p> 
<p></p> 
<h5 id="5.3.2.5%C2%A0%E5%9C%A8%E7%BA%BF%E6%B5%8B%E8%AF%95%20chrome%3A%2F%2Finspect">5.3.2.5 在线测试 chrome://inspect</h5> 
<p><img alt="" height="351" src="https://images2.imgbox.com/68/0b/avgG2BYV_o.png" width="660"></p> 
<p></p> 
<p id="ue9bc43f2"></p> 
<p></p> 
<h3 id="5.4%20%E6%89%93%E5%8C%85%E9%81%87%E5%88%B0%E7%9A%84%E5%85%B6%E5%AE%83%E9%97%AE%E9%A2%98%C2%A0">5.4 打包遇到的其它问题 </h3> 
<h4 id="iTXfJ">5.4.1 打包报错 vue-tsc 解决方案，调整 package.json 打包配置，删除 vue-tsc</h4> 
<p><img alt="" height="668" src="https://images2.imgbox.com/99/4a/M22SaE61_o.png" width="1179"></p> 
<p><img alt="" height="558" src="https://images2.imgbox.com/c1/d3/2lV0kJOP_o.png" width="1200"></p> 
<p></p> 
<h4 id="zrKYA">5.4.2 打包后，页面一片空白，没有报错</h4> 
<p id="ufe333745"><a class="has-card" href="https://www.jianshu.com/p/346c420c80c4" rel="nofollow" title="vue项目打包后首页一片空白解决办法和具体原因总结 - 简书"><span class="link-card-box"><span class="link-title">vue项目打包后首页一片空白解决办法和具体原因总结 - 简书</span><span class="link-desc">很高兴在万千文章中你看到本章，希望能为你解决问题！！！ 在最初用vue+webpack+vue-router做项目的时候，在本地pc开发测试都是正常的，但是在把代码打包部署到...</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/bc/61/zBZHZwNp_o.png" alt="icon-default.png?t=N7T8">https://www.jianshu.com/p/346c420c80c4</span></span></a></p> 
<p id="u32776de8">这个问题我是玄学解决的，我不懂为啥……，把 history 路由改成 hash 就好了</p> 
<p id="uaa555868"><span style="color:#fe2c24;">一般打包成 h5 都需要替换成 hash 路由</span></p> 
<pre id="ECK9D"><code class="language-TypeScript">// 创建路由实例
const router = createRouter({
  // history: createWebHistory(import.meta.env.BASE_URL),
  history: createWebHashHistory(import.meta.env.BASE_URL), // 使用哈希路由模式
  routes,
});</code></pre> 
<p id="u7e1b546f"></p> 
<h4 id="mq0aP">5.4.3 打包报错 顶层 await 解决方案</h4> 
<p><img alt="" height="513" src="https://images2.imgbox.com/d7/51/cRlH430W_o.png" width="1200"></p> 
<p id="u6fb83b78"></p> 
<p id="ue8fdd04a">出现原因：</p> 
<ul><li id="ucdaaaf6a">为了将路由分类，我在路由 index 里写了一个方法：循环遍历 router 下的 ts 文件，把他们的 export default 给拼接到一个数组里</li><li id="u19165a66">由于读取文件是异步操作，因此使用了 await，导致打包报错</li></ul> 
<pre id="iXwss"><code class="language-TypeScript">const importAll = async (routeFiles: any) =&gt; {
  // console.log('路由文件对象数组 ---', routeFiles);

  // 拼接好的最终路由配置
  const routes = [];
  // 遍历路由配置文件
  for (const path in routeFiles) {
    // console.log('path 路由文件名', path);
    const routeModule = await routeFiles[path]();
    // console.log('routeModule 路由文件导出内容', routeModule);
    const route = routeModule.default || routeModule;
    // 将导出的数组填充到最终数组中
    route.forEach((elem: any) =&gt; routes.push(elem));
  }
  return routes;
};</code></pre> 
<h5 id="m7W2H">解决方案一（目前使用的）</h5> 
<p id="u61553704"><span style="color:#fe2c24;">不用路由分组，不用 await</span></p> 
<h5 id="h6BLE">解决方案二（看似优雅但是毫无卵用）</h5> 
<blockquote> 
 <p id="u7cdd9821">npm install vite-plugin-top-level-await -D --force</p> 
</blockquote> 
<p id="u51b54899"><a href="https://www.npmjs.com/package/vite-plugin-top-level-await" rel="nofollow" title="vite-plugin-top-level-await - npm">vite-plugin-top-level-await - npm</a></p> 
<p id="u25b19b31"><a href="https://www.jianshu.com/p/fb1ad30fd743" rel="nofollow" title="解决 vite build打包报错Top-level await is not available in the configured target environment - 简书">解决 vite build打包报错Top-level await is not available in the configured target environment - 简书</a></p> 
<p id="u9fdfb09c"></p> 
<p id="u5c6626c5">使用了这个插件之后，打包确实不报错了，但是打包后预览：</p> 
<ul><li id="uc5ef7dc3">白屏了，路由入口中的打印没打印出来</li><li id="u49c81ceb">控制台没有任何报错，文件也顺利请求到了</li></ul> 
<p></p> 
<h4 id="ZGW6x">5.4.4 打包后，图片地址能单独打开，但是在页面里又不显示</h4> 
<p id="u1831f964">检查是不是使用了 IonImg 标签，并且没有 import，<span style="color:#fe2c24;">没 import 就会把他当成 html 标签处理</span>，自然无法解析</p> 
<p></p> 
<h4 id="RaD5n">5.4.5 打包后，静态资源不全</h4> 
<p id="u3c4098cb">项目中应该有两份 assets、config.js</p> 
<p id="u94906501">第一份在 public 下面</p> 
<p class="img-center"><img alt="" height="114" id="HIOO8" src="https://images2.imgbox.com/c8/49/djdw0RhT_o.png" width="371"></p> 
<p id="uda9e9441">第二份在 根目录下面放个 config.js、在 src/assets 下面放静态资源</p> 
<p id="uc583b91b"><span style="color:#fe2c24;">二者保持一致，缺一不可，一个是打包的时候会读取，一个是运行项目的时候会读取</span></p> 
<p></p> 
<h4 id="5.4.6%C2%A0%E9%83%A8%E7%BD%B2%E5%88%B0%20nginx%20%E4%B8%8A%E5%90%8E%EF%BC%8C%E9%A1%B5%E9%9D%A2%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%A4%B1%E8%B4%A5"><span style="color:#0d0016;">5.4.6 部署到 nginx 上后，页面网络请求失败</span></h4> 
<p>把下面的删了就行</p> 
<p><img alt="" height="674" src="https://images2.imgbox.com/a0/32/QO0q6UN7_o.png" width="1200"></p> 
<p></p> 
<h4 id="5.4.7%C2%A0%E6%B7%BB%E5%8A%A0%20file-transfer%20%E6%8F%92%E4%BB%B6%E5%90%8E%EF%BC%8C%E6%89%93%E5%8C%85%E6%8A%A5%E9%94%99%E4%B9%B1%E7%A0%81">5.4.7 添加 file-transfer 插件后，打包报错乱码</h4> 
<p id="u3b6716a3">解决方案：<a href="https://www.cnblogs.com/dndt/p/17133266.html" rel="nofollow" title="https://www.cnblogs.com/dndt/p/17133266.html">https://www.cnblogs.com/dndt/p/17133266.html</a></p> 
<p><img alt="" height="710" src="https://images2.imgbox.com/9f/9f/QioNkq0B_o.png" width="1200"></p> 
<pre><code class="language-TypeScript">// import org.apache.cordova.Whitelist;
import org.apache.cordova.AllowList;</code></pre> 
<pre><code class="language-TypeScript">// Whitelist whitelist = (Whitelist)gwl.invoke(webView);
// shouldAllowRequest = whitelist.isUrlWhiteListed(source);

AllowList whitelist = (AllowList)gwl.invoke(webView);
shouldAllowRequest = whitelist.isUrlAllowListed(source);</code></pre> 
<p></p> 
<h4 id="5.4.8%20%E8%A7%A3%E5%86%B3%20android.support.v4.app.CoreComponent...%20%E6%8F%92%E4%BB%B6%E7%89%88%E6%9C%AC%E4%B8%8D%E5%8C%B9%E9%85%8D%E7%9A%84%E9%97%AE%E9%A2%98">5.4.8 解决 android.support.v4.app.CoreComponent... 插件版本不匹配的问题</h4> 
<p><img alt="" height="722" src="https://images2.imgbox.com/27/b0/Jt85gUpk_o.png" width="1200"></p> 
<p> </p> 
<h5 id="dWxl8">解决方案一（使用 jetifier 将项目中的 android.support.v4 代码转换成 androidx）</h5> 
<p id="u8911ab42">在项目中，按顺序执行下方命令：</p> 
<blockquote> 
 <p id="uca95a8eb">npm install jetifier<br> npx jetify</p> 
 <p class="img-center"><img alt="" height="70" id="BlQbK" src="https://images2.imgbox.com/19/eb/RR31w6Ed_o.png" width="984"></p> 
 <p id="u89729cc4">npx cap sync android</p> 
</blockquote> 
<p id="u24e61242">此时代码已经同步到 Android Studio 中了，不需要再执行 ionic cap sync 了</p> 
<p id="u03f7c5ec">但是这种方法可能转换失败，转换无效，就要考虑第二种方法了</p> 
<p id="u9d056661"></p> 
<h5 id="ZdKP2">解决方案二（使用 Android 自带的转换工具转换）</h5> 
<ul><li id="u635b7cf2">右击项目，选择 <span style="color:#fe2c24;"><span style="background-color:#fefcd8;">Refactor-Migrate to AndoridX</span></span></li><li id="u6834f0d3">然后 Android Studio 会自动扫描项目中不符合需求的代码，经检查，是 cordova-plugin-ths-webviewpage 这个插件中存在问题</li><li id="u4ee4ae43">接着 Android Studio 会在终端中，<span style="color:#fe2c24;"><span style="background-color:#fefcd8;">询问是否转换该插件代码，选择是即可</span></span></li><li id="u39078dfc">转换成功后，即可顺利打包</li></ul> 
<p><img alt="" height="696" src="https://images2.imgbox.com/e9/ae/ebL5sEjh_o.png" width="910"></p> 
<p></p> 
<h4 id="wa2hN">5.4.9 解决 Android SDK 版本 和 打包工具版本 不匹配导致的报错</h4> 
<h5 id="HzPH3">基本概念</h5> 
<blockquote> 
 <p id="uf89f9b94"><span style="color:#fe2c24;">Andorid SDK Buid Tools —— 是一组用于构建和打包 Android 应用程序的工具集合。</span>它提供了一系列的命令行工具和构建脚本，用于编译、打包和签名Android应用程序。</p> 
 <p id="u0860f77f"><span style="color:#fe2c24;">compile sdk </span>—— 在 Android Studio 中，compileSdkVersion 是指定你的应用程序<span style="color:#fe2c24;">编译时使用的Android SDK版本</span>的设置。它决定了你的应用程序可以使用的 Android API 级别和功能。</p> 
</blockquote> 
<h5></h5> 
<h5 id="nk7lC">为什么要尽量保持 compileSdkVersion 和 buildToolsVersion 版本一致？</h5> 
<ul><li id="u457e0169">兼容性：compileSdkVersion 和 buildToolsVersion 之间的版本一致性，可以确保 构建工具 和 编译时使用的SDK版本之间 的兼容性。这有助于 <span style="color:#fe2c24;">避免由于版本不匹配，而导致的编译错误或其他问题。</span></li><li id="u1fa732ac">最新功能和修复：构建工具版本<span style="color:#fe2c24;">通常会包含对特定SDK版本的修复和改进。</span>通过保持 buildToolsVersion 与compileSdkVersion 一致，你可以确保你的应用程序能够受益于最新的功能和修复。</li><li id="u7e25b077">一致性和稳定性：保持 compileSdkVersion 和 buildToolsVersion 一致可以<span style="color:#fe2c24;">提供一致的构建环境和稳定的构建过程。</span>这有助于减少构建过程中的潜在问题，并确保应用程序的一致性。</li></ul> 
<p id="ud1c950be">总之，尽量保持 compileSdkVersion 和 buildToolsVersion 版本一致可以确保构建工具和编译时使用的SDK版本之间的兼容性，并提供一致性、稳定性和最新功能的好处。</p> 
<p></p> 
<h5 id="mJfMv">Android SDK Build Tools 打包工具安装</h5> 
<p id="ua821e8e8">点击这里，会列出所有可以安装的版本</p> 
<p><img alt="" height="753" src="https://images2.imgbox.com/69/2f/73lP1MaG_o.png" width="1200"></p> 
<p id="u216e2145">比如下面，可以选择安装 Andorid SDK Buid Tools34 版本的，每个版本差不多几百兆</p> 
<p><img alt="" height="727" src="https://images2.imgbox.com/1a/0d/Vev6VKMi_o.png" width="1158"></p> 
<p></p> 
<h5 id="ve38h">Android 平台版本安装</h5> 
<p id="ua4c6afaf">再比如下面，<span style="color:#fe2c24;"><span style="background-color:#fefcd8;">可以选择安装 Android 12 版本的，有了这个，就可以使用指定版本的 虚拟机了</span></span></p> 
<p><img alt="" height="764" src="https://images2.imgbox.com/37/55/3pPgCzlo_o.png" width="1176"></p> 
<p></p> 
<h5 id="MjlzQ">查看 Andorid Studio 中的虚拟机 所用的 Android 版本信息</h5> 
<p><img alt="" height="833" src="https://images2.imgbox.com/83/80/ANvtlBX6_o.png" width="1200"></p> 
<p></p> 
<h5 id="I4dMP">修改项目模块 Modules，保持版本一致性</h5> 
<p id="u62f7023e">右键点击项目 android，选择 Modules，如下图所示，会列出当前项目拆分的不同模块，可以这么理解：</p> 
<ul><li id="udff57d51">中间这一栏列出了项目涉及的所有模块</li><li id="u41f3e9fd"><span style="color:#fe2c24;">他们的关系类似于 微前端的基座应用、微应用的关系，app 相当于基座应用，剩下的相当于微应用</span></li><li id="ua38bc774"><span style="color:#fe2c24;">可以针对每个模块，单独设置 ① Compile sdk 版本 ② build tools 版本 ③ jdk 版本</span></li><li id="u523f9cac">我们在上面说了，要<span style="color:#fe2c24;">尽量保持</span> Compile sdk 和 build tools 的版本一致性，能避免错误（此处由于我没有安装更高版本的 build Tools，所以我用的版本不一致，但是没报错，我也就没改）</li></ul> 
<p><img alt="" height="745" src="https://images2.imgbox.com/37/02/ZF2rvgdR_o.png" width="1178"></p> 
<p></p> 
<h4 id="WRf8x">解决 cordova-camera 插件点击拍照后，app闪退、报错非法参数的问题</h4> 
<h5 id="zjUCf" style="background-color:transparent;">问就是<span style="color:#fe2c24;">升级插件版本，立马解决这种抽象报错</span></h5> 
<p></p> 
<p class="img-center"><img alt="" height="199" id="uacc42297" src="https://images2.imgbox.com/fa/03/6stVvUAG_o.png" width="846"></p> 
<p><img alt="" height="496" src="https://images2.imgbox.com/5f/f9/Q7yXAfq6_o.png" width="1200"></p> 
<p> </p> 
<h5 id="Kl41C">打断点调试 cordova.camera 的经历</h5> 
<p id="ued3ba979">首先是在 node_modules 里，搜索了上面的非法参数报错，找到了他在 CameraLauncher.java 文件里</p> 
<p id="uabd8ec5c">在 Andorid Studio 中找到这个文件：找 org.apache.cordova 这个包，下面很轻松就看到 camera 了</p> 
<p><img alt="" height="603" src="https://images2.imgbox.com/2f/2e/2sACVb7q_o.png" width="1042"></p> 
<p id="u56814917">在代码里行号旁边，点一下，出现一个红点，表示断点</p> 
<p id="u53e6ce8b">点击下图右上角，小虫子，表示开启调试，此时链接手机后，会自动安装app</p> 
<p id="ue792fc84">点击执行断点的地方，比如拍照按钮，就会进入这个方法，这个过程会比较卡</p> 
<p id="ucc45602f">点击下面终端的红框内第一个按钮，表示进入方法，逐行调试</p> 
<p><img alt="" height="777" src="https://images2.imgbox.com/1f/bd/kExMaZDQ_o.png" width="1200"></p> 
<p> </p> 
<h4 id="ZYdUr">为什么在 org.apache.cordova 中，找不到 imagepicker 插件？</h4> 
<p id="u136bb207">这个 org.apache.cordova 是个包名，是作者可以自定义的东西，所以他不一定按照规范来</p> 
<p id="u80a785c9">虽然在 node_modules 中，这个插件看起来好像是 cordova 的插件</p> 
<p class="img-center"><img alt="" height="376" id="uacf1e6a8" src="https://images2.imgbox.com/a9/da/HrVA5sMX_o.png" width="488"></p> 
<p id="u9932f7b2">但是，他的真实包名，可以看 node_modules 下的 <span style="color:#fe2c24;">plugin.xml </span>文件</p> 
<p id="uf5bfa498">随便找个文件，target-dir 标识了作者写的包名</p> 
<p><img alt="" height="561" src="https://images2.imgbox.com/71/ac/LEtnSOmo_o.png" width="1200"></p> 
<p id="ua977b04d">在 android 包里，也顺利的找到了</p> 
<p><img alt="" height="356" id="ua2a9b2f0" src="https://images2.imgbox.com/0f/d0/W2zcXUpl_o.png" width="475"></p> 
<h4></h4> 
<h4 id="s5KDU">修改 ImagePicker 图片选择插件 的中文名字</h4> 
<p id="u396f5f60">xml 文件，在 cordova 里通常用于放一些 常量配置，比如国际化语言啊之类的</p> 
<p id="ub1a984c2">找到 node_modules 里面的这个插件，寻找 xml 文件，修改遇到问题的文字</p> 
<p><img alt="" height="597" src="https://images2.imgbox.com/af/a0/0H0fVnPf_o.png" width="1200"></p> 
<p id="ue0a3efd8"></p> 
<h4 id="AIMKU" style="background-color:transparent;">node_modules 和 android 是啥关系</h4> 
<p id="u9e764504"><span style="color:#fe2c24;"><span style="background-color:#fefcd8;">当执行 ionic cap sync 的时候，会把 node_modules 编译到 android 文件夹下面，两者内容有相似的地方（比如 java 文件，可以进行调试），也有不同的地方</span></span></p> 
<p id="uf10ab917">一般情况下：</p> 
<ul><li id="u6168399b">修改 cordova 插件源码，直接改 node_modules 就行，比如 file-transfer 的 whitelist<span style="color:#fe2c24;">（每次重新安装依赖都需要修改，也可以使用脚本）</span></li><li id="u1472f754">调试插件bug，直接在 Android Studio 里，展开 android 文件夹，打断点进行调试，详见下面</li></ul> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/507e56fe4342fddd973f4a9031e85989/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mybatis-Plus 分页插件失效？getPage( )和getTotal( )的结果为0，但getRecords( )可以得到正确结果。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1cc98d9456f400810e5cd7f18fd11501/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">企业/公司文件加密软件｜办公文件、文档、图纸加密｜源代码透明加密保护防止外泄。dlp数据泄露防护系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>