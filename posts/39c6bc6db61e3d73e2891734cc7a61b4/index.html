<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>gitlab&#43;Jenkins自动化搭建部署 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="gitlab&#43;Jenkins自动化搭建部署" />
<meta property="og:description" content="目录
部署环境
关闭selinux和防火墙
或者防火墙设置，开启gitlab和Jenkins要用的端口和http服务
安装依赖包 （Jenkins和gitlab都装）
一，开始Jenkins安装配置
1、Java包安装
2、安装Jenkins
3、启动Jenkins服务
4、修改jenkins配置文件
5、重启Jenkins服务 查看端口是否起来
6、打开网页界面 http://192.168.100.11:8080/ Jenkins正在配置启动中，比较慢
7、 选择插件来安装
8、选择“无”​编辑
9、创建管理员用户
10、选择安装插件路径Manage Jenkins—Manage Plugins—Plugin Manager—Advanced然后下拉到底
11、安装插件
12，生成公钥私钥对出来，命令：ssh-keygen 私钥id_rsa 公钥 id_rsa.pub
二，开始gitlab的部署
1、配置yum源地址
2、配置 hosts及改主机域名
3、启动postfix邮件服务
4、安装gitlab
5、加载初始化命令执行 6、启动gitlab服务
7、登录gitlab 网页 http://192.168.100.12/ 账号密码为
8、更改为中文页面
​9、修改初始化密码
10、创建新的项目
11、选择上传一个文件
12、项目建成功上传
13、 然后就是配合Jenkins部署这个项目
在Jenkins生成的ssh-keygen 14，在Jenkins配置凭据
也可以配置一个ssh秘钥的模式。如下 key 是私钥id_rsa 开始生成的
15，添加JDK，Git，Maven，路径
查询JDK，Git，Maven，路径
三，新建项目
1、添加个项目描述，选择git构建
2、源码管理URL地址添加
3、打开Jenkins服务器，添加gitlab的ip域名解析配置
4、项目构建完成
四，项目构建成功
1、变绿色对号代表构建成功
2、查看详细构建 控制台输出
3，然后我们的项目构建成功在Jenkins的/var/lib/jenkins/workspace/demo路径，查看下 已经有demo项目了
部署环境 Centos7版本CentOS Linux release 7." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/39c6bc6db61e3d73e2891734cc7a61b4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-16T12:03:35+08:00" />
<meta property="article:modified_time" content="2022-08-16T12:03:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">gitlab&#43;Jenkins自动化搭建部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p> </p> 
<p id="%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83-toc" style="margin-left:0px;"><a href="#%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83" rel="nofollow">部署环境</a></p> 
<p id="%E5%85%B3%E9%97%ADselinux%E5%92%8C%E9%98%B2%E7%81%AB%E5%A2%99-toc" style="margin-left:80px;"><a href="#%E5%85%B3%E9%97%ADselinux%E5%92%8C%E9%98%B2%E7%81%AB%E5%A2%99" rel="nofollow">关闭selinux和防火墙</a></p> 
<p id="%E6%88%96%E8%80%85%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%BC%80%E5%90%AFgitlab%E5%92%8CJenkins%E8%A6%81%E7%94%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%92%8Chttp%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#%E6%88%96%E8%80%85%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%BC%80%E5%90%AFgitlab%E5%92%8CJenkins%E8%A6%81%E7%94%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%92%8Chttp%E6%9C%8D%E5%8A%A1" rel="nofollow">或者防火墙设置，开启gitlab和Jenkins要用的端口和http服务</a></p> 
<p id="%C2%A0%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85%20%EF%BC%88Jenkins%E5%92%8Cgitlab%E9%83%BD%E8%A3%85%EF%BC%89-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85%20%EF%BC%88Jenkins%E5%92%8Cgitlab%E9%83%BD%E8%A3%85%EF%BC%89" rel="nofollow"> 安装依赖包 （Jenkins和gitlab都装）</a></p> 
<p id="%E5%BC%80%E5%A7%8BJenkins%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%E5%BC%80%E5%A7%8BJenkins%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE" rel="nofollow">一，开始Jenkins安装配置</a></p> 
<p id="1%E3%80%81Java%E5%8C%85%E5%AE%89%E8%A3%85-toc" style="margin-left:80px;"><a href="#1%E3%80%81Java%E5%8C%85%E5%AE%89%E8%A3%85" rel="nofollow">1、Java包安装</a></p> 
<p id="2%E3%80%81%E5%AE%89%E8%A3%85Jenkins-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E5%AE%89%E8%A3%85Jenkins" rel="nofollow">2、安装Jenkins</a></p> 
<p id="3%E3%80%81%E5%90%AF%E5%8A%A8Jenkins%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E5%90%AF%E5%8A%A8Jenkins%E6%9C%8D%E5%8A%A1" rel="nofollow">3、启动Jenkins服务</a></p> 
<p id="4%E3%80%81%E4%BF%AE%E6%94%B9jenkins%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E4%BF%AE%E6%94%B9jenkins%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">4、修改jenkins配置文件</a></p> 
<p id="5%E3%80%81%E9%87%8D%E5%90%AFJenkins%E6%9C%8D%E5%8A%A1%20%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E8%B5%B7%E6%9D%A5-toc" style="margin-left:80px;"><a href="#5%E3%80%81%E9%87%8D%E5%90%AFJenkins%E6%9C%8D%E5%8A%A1%20%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E8%B5%B7%E6%9D%A5" rel="nofollow">5、重启Jenkins服务 查看端口是否起来</a></p> 
<p id="6%E3%80%81%E6%89%93%E5%BC%80%E7%BD%91%E9%A1%B5%E7%95%8C%E9%9D%A2%C2%A0http%3A%2F%2F192.168.100.11%3A8080%2F%C2%A0%20Jenkins%E6%AD%A3%E5%9C%A8%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E4%B8%AD%EF%BC%8C%E6%AF%94%E8%BE%83%E6%85%A2-toc" style="margin-left:80px;"><a href="#6%E3%80%81%E6%89%93%E5%BC%80%E7%BD%91%E9%A1%B5%E7%95%8C%E9%9D%A2%C2%A0http%3A%2F%2F192.168.100.11%3A8080%2F%C2%A0%20Jenkins%E6%AD%A3%E5%9C%A8%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E4%B8%AD%EF%BC%8C%E6%AF%94%E8%BE%83%E6%85%A2" rel="nofollow">6、打开网页界面 http://192.168.100.11:8080/  Jenkins正在配置启动中，比较慢</a></p> 
<p id="7%E3%80%81%20%E9%80%89%E6%8B%A9%E6%8F%92%E4%BB%B6%E6%9D%A5%E5%AE%89%E8%A3%85-toc" style="margin-left:80px;"><a href="#7%E3%80%81%20%E9%80%89%E6%8B%A9%E6%8F%92%E4%BB%B6%E6%9D%A5%E5%AE%89%E8%A3%85" rel="nofollow">7、 选择插件来安装</a></p> 
<p id="8%E3%80%81%E9%80%89%E6%8B%A9%E2%80%9C%E6%97%A0%E2%80%9D%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:80px;"><a href="#8%E3%80%81%E9%80%89%E6%8B%A9%E2%80%9C%E6%97%A0%E2%80%9D%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">8、选择“无”​编辑</a></p> 
<p id="9%E3%80%81%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E5%91%98%E7%94%A8%E6%88%B7-toc" style="margin-left:80px;"><a href="#9%E3%80%81%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E5%91%98%E7%94%A8%E6%88%B7" rel="nofollow">9、创建管理员用户</a></p> 
<p id="%C2%A010%E3%80%81%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E8%B7%AF%E5%BE%84Manage%20Jenkins%E2%80%94Manage%20Plugins%E2%80%94Plugin%20Manager%E2%80%94Advanced%E7%84%B6%E5%90%8E%E4%B8%8B%E6%8B%89%E5%88%B0%E5%BA%95-toc" style="margin-left:80px;"><a href="#%C2%A010%E3%80%81%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E8%B7%AF%E5%BE%84Manage%20Jenkins%E2%80%94Manage%20Plugins%E2%80%94Plugin%20Manager%E2%80%94Advanced%E7%84%B6%E5%90%8E%E4%B8%8B%E6%8B%89%E5%88%B0%E5%BA%95" rel="nofollow"> 10、选择安装插件路径Manage Jenkins—Manage Plugins—Plugin Manager—Advanced然后下拉到底</a></p> 
<p id="11%E3%80%81%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6-toc" style="margin-left:80px;"><a href="#11%E3%80%81%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6" rel="nofollow">11、安装插件</a></p> 
<p id="%C2%A0%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%E7%A7%81%E9%92%A5%E5%AF%B9%E5%87%BA%E6%9D%A5%EF%BC%8C%E5%91%BD%E4%BB%A4%EF%BC%9Assh-keygen%C2%A0%E7%A7%81%E9%92%A5id_rsa%20%E5%85%AC%E9%92%A5%20id_rsa.pub-toc" style="margin-left:40px;">         <a href="#%C2%A0%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%E7%A7%81%E9%92%A5%E5%AF%B9%E5%87%BA%E6%9D%A5%EF%BC%8C%E5%91%BD%E4%BB%A4%EF%BC%9Assh-keygen%C2%A0%E7%A7%81%E9%92%A5id_rsa%20%E5%85%AC%E9%92%A5%20id_rsa.pub" rel="nofollow">12，生成公钥私钥对出来，命令：ssh-keygen 私钥id_rsa 公钥 id_rsa.pub</a></p> 
<p id="%E5%BC%80%E5%A7%8Bgitlab%E7%9A%84%E9%83%A8%E7%BD%B2-toc" style="margin-left:0px;">          <a href="#%E5%BC%80%E5%A7%8Bgitlab%E7%9A%84%E9%83%A8%E7%BD%B2" rel="nofollow">二，开始gitlab的部署</a></p> 
<p id="1%E3%80%81%E9%85%8D%E7%BD%AEyum%E6%BA%90%E5%9C%B0%E5%9D%80-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E9%85%8D%E7%BD%AEyum%E6%BA%90%E5%9C%B0%E5%9D%80" rel="nofollow">1、配置yum源地址</a></p> 
<p id="2%E3%80%81%E9%85%8D%E7%BD%AE%20hosts%E5%8F%8A%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%9F%9F%E5%90%8D-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E9%85%8D%E7%BD%AE%20hosts%E5%8F%8A%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%9F%9F%E5%90%8D" rel="nofollow">2、配置 hosts及改主机域名</a></p> 
<p id="3%E3%80%81%E5%90%AF%E5%8A%A8postfix%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E5%90%AF%E5%8A%A8postfix%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1" rel="nofollow">3、启动postfix邮件服务</a></p> 
<p id="4%E3%80%81%E5%AE%89%E8%A3%85gitlab-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E5%AE%89%E8%A3%85gitlab" rel="nofollow">4、安装gitlab</a></p> 
<p id="5%E3%80%81%E5%8A%A0%E8%BD%BD%E5%88%9D%E5%A7%8B%E5%8C%96%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%C2%A0-toc" style="margin-left:80px;"><a href="#5%E3%80%81%E5%8A%A0%E8%BD%BD%E5%88%9D%E5%A7%8B%E5%8C%96%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%C2%A0" rel="nofollow">5、加载初始化命令执行 </a></p> 
<p id="6%E3%80%81%E5%90%AF%E5%8A%A8gitlab%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#6%E3%80%81%E5%90%AF%E5%8A%A8gitlab%E6%9C%8D%E5%8A%A1" rel="nofollow">6、启动gitlab服务</a></p> 
<p id="7%E3%80%81%E7%99%BB%E5%BD%95gitlab%C2%A0%E7%BD%91%E9%A1%B5%C2%A0%20%C2%A0http%3A%2F%2F192.168.100.12%2F%C2%A0%20%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E4%B8%BA-toc" style="margin-left:80px;"><a href="#7%E3%80%81%E7%99%BB%E5%BD%95gitlab%C2%A0%E7%BD%91%E9%A1%B5%C2%A0%20%C2%A0http%3A%2F%2F192.168.100.12%2F%C2%A0%20%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E4%B8%BA" rel="nofollow">7、登录gitlab 网页   http://192.168.100.12/  账号密码为</a></p> 
<p id="%C2%A08%E3%80%81%E6%9B%B4%E6%94%B9%E4%B8%BA%E4%B8%AD%E6%96%87%E9%A1%B5%E9%9D%A2-toc" style="margin-left:80px;"><a href="#%C2%A08%E3%80%81%E6%9B%B4%E6%94%B9%E4%B8%BA%E4%B8%AD%E6%96%87%E9%A1%B5%E9%9D%A2" rel="nofollow">8、更改为中文页面</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%919%E3%80%81%E4%BF%AE%E6%94%B9%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%86%E7%A0%81-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%919%E3%80%81%E4%BF%AE%E6%94%B9%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%86%E7%A0%81" rel="nofollow">​9、修改初始化密码</a></p> 
<p id="%C2%A010%E3%80%81%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E9%A1%B9%E7%9B%AE-toc" style="margin-left:80px;"><a href="#%C2%A010%E3%80%81%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E9%A1%B9%E7%9B%AE" rel="nofollow">10、创建新的项目</a></p> 
<p style="margin-left:80px;"><a href="#%C2%A011%E3%80%81%E9%80%89%E6%8B%A9%E4%B8%8A%E4%BC%A0%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6" rel="nofollow">11、选择上传一个文件</a></p> 
<p id="12%E3%80%81%E9%A1%B9%E7%9B%AE%E5%BB%BA%E6%88%90%E5%8A%9F%E4%B8%8A%E4%BC%A0-toc" style="margin-left:80px;"><a href="#12%E3%80%81%E9%A1%B9%E7%9B%AE%E5%BB%BA%E6%88%90%E5%8A%9F%E4%B8%8A%E4%BC%A0" rel="nofollow">12、项目建成功上传</a></p> 
<p id="13%E3%80%81%C2%A0%E7%84%B6%E5%90%8E%E5%B0%B1%E6%98%AF%E9%85%8D%E5%90%88Jenkins%E9%83%A8%E7%BD%B2%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE-toc" style="margin-left:80px;"><a href="#13%E3%80%81%C2%A0%E7%84%B6%E5%90%8E%E5%B0%B1%E6%98%AF%E9%85%8D%E5%90%88Jenkins%E9%83%A8%E7%BD%B2%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE" rel="nofollow">13、 然后就是配合Jenkins部署这个项目</a></p> 
<p id="%C2%A0%E5%9C%A8Jenkins%E7%94%9F%E6%88%90%E7%9A%84ssh-keygen%C2%A0%C2%A0-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%9C%A8Jenkins%E7%94%9F%E6%88%90%E7%9A%84ssh-keygen%C2%A0%C2%A0" rel="nofollow"> 在Jenkins生成的ssh-keygen  </a></p> 
<p id="%C2%A0%E5%9C%A8Jenkins%E9%85%8D%E7%BD%AE%E5%87%AD%E6%8D%AE-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%9C%A8Jenkins%E9%85%8D%E7%BD%AE%E5%87%AD%E6%8D%AE" rel="nofollow"> 14，在Jenkins配置凭据</a></p> 
<p id="%C2%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AAssh%E7%A7%98%E9%92%A5%E7%9A%84%E6%A8%A1%E5%BC%8F%E3%80%82%E5%A6%82%E4%B8%8B%C2%A0%20%C2%A0key%20%E6%98%AF%E7%A7%81%E9%92%A5id_rsa%C2%A0%20%E5%BC%80%E5%A7%8B%E7%94%9F%E6%88%90%E7%9A%84-toc" style="margin-left:80px;"><a href="#%C2%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AAssh%E7%A7%98%E9%92%A5%E7%9A%84%E6%A8%A1%E5%BC%8F%E3%80%82%E5%A6%82%E4%B8%8B%C2%A0%20%C2%A0key%20%E6%98%AF%E7%A7%81%E9%92%A5id_rsa%C2%A0%20%E5%BC%80%E5%A7%8B%E7%94%9F%E6%88%90%E7%9A%84" rel="nofollow"> 也可以配置一个ssh秘钥的模式。如下   key 是私钥id_rsa  开始生成的</a></p> 
<p id="15%EF%BC%8C%E6%B7%BB%E5%8A%A0JDK%EF%BC%8CGit%EF%BC%8CMaven%EF%BC%8C%E8%B7%AF%E5%BE%84-toc" style="margin-left:80px;"><a href="#15%EF%BC%8C%E6%B7%BB%E5%8A%A0JDK%EF%BC%8CGit%EF%BC%8CMaven%EF%BC%8C%E8%B7%AF%E5%BE%84" rel="nofollow">15，添加JDK，Git，Maven，路径</a></p> 
<p id="%C2%A0%E6%9F%A5%E8%AF%A2JDK%EF%BC%8CGit%EF%BC%8CMaven%EF%BC%8C%E8%B7%AF%E5%BE%84-toc" style="margin-left:80px;"><a href="#%C2%A0%E6%9F%A5%E8%AF%A2JDK%EF%BC%8CGit%EF%BC%8CMaven%EF%BC%8C%E8%B7%AF%E5%BE%84" rel="nofollow"> 查询JDK，Git，Maven，路径</a></p> 
<p id="%C2%A0%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE-toc" style="margin-left:40px;"><a href="#%C2%A0%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE" rel="nofollow"> 三，新建项目</a></p> 
<p id="%C2%A01%E3%80%81%E6%B7%BB%E5%8A%A0%E4%B8%AA%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0%EF%BC%8C%E9%80%89%E6%8B%A9git%E6%9E%84%E5%BB%BA-toc" style="margin-left:80px;"><a href="#%C2%A01%E3%80%81%E6%B7%BB%E5%8A%A0%E4%B8%AA%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0%EF%BC%8C%E9%80%89%E6%8B%A9git%E6%9E%84%E5%BB%BA" rel="nofollow"> 1、添加个项目描述，选择git构建</a></p> 
<p id="2%E3%80%81%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86URL%E5%9C%B0%E5%9D%80%E6%B7%BB%E5%8A%A0-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86URL%E5%9C%B0%E5%9D%80%E6%B7%BB%E5%8A%A0" rel="nofollow">2、源码管理URL地址添加</a></p> 
<p id="3%E3%80%81%E6%89%93%E5%BC%80Jenkins%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0gitlab%E7%9A%84ip%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E6%89%93%E5%BC%80Jenkins%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0gitlab%E7%9A%84ip%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E9%85%8D%E7%BD%AE" rel="nofollow">3、打开Jenkins服务器，添加gitlab的ip域名解析配置</a></p> 
<p id="4%E3%80%81%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%AE%8C%E6%88%90-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%AE%8C%E6%88%90" rel="nofollow">4、项目构建完成</a></p> 
<p id="%C2%A0%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F-toc" style="margin-left:40px;"><a href="#%C2%A0%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F" rel="nofollow">四，项目构建成功</a></p> 
<p id="1%E3%80%81%E5%8F%98%E7%BB%BF%E8%89%B2%E5%AF%B9%E5%8F%B7%E4%BB%A3%E8%A1%A8%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E5%8F%98%E7%BB%BF%E8%89%B2%E5%AF%B9%E5%8F%B7%E4%BB%A3%E8%A1%A8%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F" rel="nofollow">1、变绿色对号代表构建成功</a></p> 
<p id="%C2%A02%E3%80%81%E6%9F%A5%E7%9C%8B%E8%AF%A6%E7%BB%86%E6%9E%84%E5%BB%BA%20%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA-toc" style="margin-left:80px;"><a href="#%C2%A02%E3%80%81%E6%9F%A5%E7%9C%8B%E8%AF%A6%E7%BB%86%E6%9E%84%E5%BB%BA%20%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA" rel="nofollow"> 2、查看详细构建 控制台输出</a></p> 
<p id="3%EF%BC%8C%E7%84%B6%E5%90%8E%E6%88%91%E4%BB%AC%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F%E5%9C%A8Jenkins%E7%9A%84%2Fvar%2Flib%2Fjenkins%2Fworkspace%2Fdemo%E8%B7%AF%E5%BE%84%EF%BC%8C%E6%9F%A5%E7%9C%8B%E4%B8%8B%20%E5%B7%B2%E7%BB%8F%E6%9C%89demo%E9%A1%B9%E7%9B%AE%E4%BA%86-toc" style="margin-left:80px;"><a href="#3%EF%BC%8C%E7%84%B6%E5%90%8E%E6%88%91%E4%BB%AC%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F%E5%9C%A8Jenkins%E7%9A%84%2Fvar%2Flib%2Fjenkins%2Fworkspace%2Fdemo%E8%B7%AF%E5%BE%84%EF%BC%8C%E6%9F%A5%E7%9C%8B%E4%B8%8B%20%E5%B7%B2%E7%BB%8F%E6%9C%89demo%E9%A1%B9%E7%9B%AE%E4%BA%86" rel="nofollow">3，然后我们的项目构建成功在Jenkins的/var/lib/jenkins/workspace/demo路径，查看下 已经有demo项目了</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p id="%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83-toc" style="margin-left:0px;">         </p> 
<p></p> 
<h2 id="%E9%83%A8%E7%BD%B2%E7%8E%AF%E5%A2%83">部署环境</h2> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:479px;"><tbody><tr><td style="text-align:center;width:167px;"><strong>Centos7版本</strong></td><td colspan="2" rowspan="1" style="text-align:center;width:311px;"><strong>CentOS Linux release 7.9.2009 (Core)</strong></td></tr><tr><td style="text-align:center;width:167px;"><strong>Jenkins版本</strong></td><td style="text-align:center;width:311px;"><strong>jenkins-2.346.3-1.1.noarch.rpm</strong></td></tr><tr><td style="text-align:center;width:167px;"><strong>Jenkins服务器_IP</strong></td><td style="text-align:center;width:311px;"><strong>192.168.100.11</strong></td></tr><tr><td style="text-align:center;width:167px;"><strong>gitlab版本</strong></td><td style="text-align:center;width:311px;"><strong>gitlab-ce-15.2.0-ce.0.el7.x86_64.rpm</strong></td></tr><tr><td style="text-align:center;width:167px;"><strong>gitlab服务器_IP</strong></td><td style="text-align:center;width:311px;"><strong>192.168.100.12</strong></td></tr></tbody></table> 
<h4 id="%E5%85%B3%E9%97%ADselinux%E5%92%8C%E9%98%B2%E7%81%AB%E5%A2%99">关闭selinux和防火墙</h4> 
<pre><code class="language-bash">setenforce 0
sed -ri '/^[^#]*SELINUX=/s#=.+$#=disabled#' /etc/selinux/config
systemctl stop firewalld
systemctl disable firewalld
reboot  重启系统</code></pre> 
<h4 id="%E6%88%96%E8%80%85%E9%98%B2%E7%81%AB%E5%A2%99%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%BC%80%E5%90%AFgitlab%E5%92%8CJenkins%E8%A6%81%E7%94%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%92%8Chttp%E6%9C%8D%E5%8A%A1">或者防火墙设置，开启gitlab和Jenkins要用的端口和http服务</h4> 
<pre><code class="language-cpp">命令：
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --permanent --zone=public --add-port=80/tcp
sudo firewall-cmd --permanent --zone=public --add-port=8080/tcp
sudo firewall-cmd --reload</code></pre> 
<h4 id="%C2%A0%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85%20%EF%BC%88Jenkins%E5%92%8Cgitlab%E9%83%BD%E8%A3%85%EF%BC%89"> 安装依赖包 （Jenkins和gitlab都装）</h4> 
<pre><code class="language-cpp">yum -y install curl  git vim policycoreutils openssh-server openssh-clients postfix
</code></pre> 
<h3 id="%E5%BC%80%E5%A7%8BJenkins%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE">一，开始Jenkins安装配置</h3> 
<h4 id="1%E3%80%81Java%E5%8C%85%E5%AE%89%E8%A3%85">1、Java包安装</h4> 
<pre><code class="language-bash">卸载以前旧的Java 安装Java-11版本的
yum remove  java*   -y  
yum install fontconfig java-11-openjdk  -y
</code></pre> 
<h4 id="2%E3%80%81%E5%AE%89%E8%A3%85Jenkins">2、安装Jenkins</h4> 
<p>华为云下载稳定版或者阿里云下载都可以</p> 
<pre><code class="language-cpp">阿里云Jenkins下载
 wget https://mirrors.aliyun.com/jenkins/redhat-stable/jenkins-2.346.3-1.1.noarch.rpm

华为云Jenkins下载
 wget  https://repo.huaweicloud.com/jenkins/redhat-stable/jenkins-2.346.3-1.1.noarch.rpm
</code></pre> 
<p>安装Jenkins</p> 
<pre><code class="language-cpp">rpm -ivh   jenkins-2.346.3-1.1.noarch.rpm

[root@localhost ~]# rpm -ivh   jenkins-2.346.3-1.1.noarch.rpm
警告：jenkins-2.346.3-1.1.noarch.rpm: 头V4 RSA/SHA512 Signature, 密钥 ID 45f2c3d5: NOKEY
准备中...                          ################################# [100%]
正在升级/安装...
   1:jenkins-2.346.3-1.1              ################################# [100%]
[root@localhost ~]# 
</code></pre> 
<h4 id="3%E3%80%81%E5%90%AF%E5%8A%A8Jenkins%E6%9C%8D%E5%8A%A1">3、启动Jenkins服务</h4> 
<pre><code>systemctl start jenkins.service
systemctl restart jenkins.service
systemctl status jenkins.service</code></pre> 
<p> 查看Jenkins启动状态是这种时候，表示Jenkins正在启动中，比较慢</p> 
<pre><code>[root@localhost ~]# systemctl status jenkins.service 
● jenkins.service - Jenkins Continuous Integration Server
   Loaded: loaded (/usr/lib/systemd/system/jenkins.service; disabled; vendor preset: disabled)
   Active: activating (start) since 日 2022-08-14 14:16:27 CST; 58s ago
 Main PID: 1630 (java)
   CGroup: /system.slice/jenkins.service
           └─1630 /usr/bin/java -Djava.awt.headless=true -jar /usr/share/java/jenkins.war --webroot=%C/jenkins/war --httpPort=8080

8月 14 14:16:30 localhost.localdomain jenkins[1630]: *************************************************************
8月 14 14:16:30 localhost.localdomain jenkins[1630]: *************************************************************
8月 14 14:16:30 localhost.localdomain jenkins[1630]: *************************************************************
8月 14 14:16:30 localhost.localdomain jenkins[1630]: Jenkins initial setup is required. An admin user has been created and a password generated.
8月 14 14:16:30 localhost.localdomain jenkins[1630]: Please use the following password to proceed to installation:
8月 14 14:16:30 localhost.localdomain jenkins[1630]: e4a67c389b6f4deeb2fc2bdf58e1dd52
8月 14 14:16:30 localhost.localdomain jenkins[1630]: This may also be found at: /var/lib/jenkins/secrets/initialAdminPassword
8月 14 14:16:30 localhost.localdomain jenkins[1630]: *************************************************************
8月 14 14:16:30 localhost.localdomain jenkins[1630]: *************************************************************
8月 14 14:16:30 localhost.localdomain jenkins[1630]: *************************************************************
[root@localhost ~]# 
</code></pre> 
<h4 id="4%E3%80%81%E4%BF%AE%E6%94%B9jenkins%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">4、修改jenkins配置文件</h4> 
<pre><code class="language-cpp">将默认Jenkins用户名修改用户名为root 因为不改的话后期Jenkins目录没有权限
vim /etc/sysconfig/jenkins

JENKINS_USER="root"</code></pre> 
<pre><code class="language-cpp">vim /usr/lib/systemd/system/jenkins.service
User=jenkins   改为root
Group=jenkins  改为root

如果想改Jenkins的端口号在这改
Environment="JENKINS_PORT=8080"   将8080端口更改其他的

#更改完成后加载下配置文件重启Jenkins服务
</code></pre> 
<h4 id="5%E3%80%81%E9%87%8D%E5%90%AFJenkins%E6%9C%8D%E5%8A%A1%20%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E6%98%AF%E5%90%A6%E8%B5%B7%E6%9D%A5">5、重启Jenkins服务 查看端口是否起来</h4> 
<pre><code class="language-sql">[root@localhost ~]# systemctl daemon-reload         ##加载服务配置
[root@localhost ~]# systemctl restart jenkins.service    ##重启Jenkins服务

[root@localhost ~]# netstat -lnput      #8080的Java端口服务已启动
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      825/sshd            
tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      984/master          
tcp6       0      0 :::8080                 :::*                    LISTEN      3128/java           
tcp6       0      0 :::22                   :::*                    LISTEN      825/sshd            
tcp6       0      0 ::1:25                  :::*                    LISTEN      984/master          
udp        0      0 127.0.0.1:323           0.0.0.0:*                           563/chronyd         
udp6       0      0 ::1:323                 :::*                                563/chronyd         
[root@localhost ~]# ps -aux | grep jenkins   ##查看Jenkins路径服务已经为root下   
root       2047  0.0  0.1 149592  5240 pts/0    T    14:21   0:00 vim /etc/sysconfig/jenkins
root       2150  0.0  0.1 149592  5152 pts/0    T    14:24   0:00 vim /usr/lib/systemd/system/jenkins.service
root       2446  0.0  0.1 149608  5300 pts/0    T    14:26   0:00 vim /etc/sysconfig/jenkins
root       3232  145  6.4 3780292 248704 ?      Ssl  14:36   0:05 /usr/bin/java -Djava.awt.headless=true -jar /usr/share/java/jenkins.war --webroot=%C/jenkins/war --httpPort=8080
root       3324  0.0  0.0 112824   980 pts/0    S+   14:36   0:00 grep --color=auto jenkins

</code></pre> 
<h4 id="6%E3%80%81%E6%89%93%E5%BC%80%E7%BD%91%E9%A1%B5%E7%95%8C%E9%9D%A2%C2%A0http%3A%2F%2F192.168.100.11%3A8080%2F%C2%A0%20Jenkins%E6%AD%A3%E5%9C%A8%E9%85%8D%E7%BD%AE%E5%90%AF%E5%8A%A8%E4%B8%AD%EF%BC%8C%E6%AF%94%E8%BE%83%E6%85%A2">6、打开网页界面 <a href="http://192.168.100.11:8080/" rel="nofollow" title="http://192.168.100.11:8080/">http://192.168.100.11:8080/</a>  Jenkins正在配置启动中，比较慢</h4> 
<p><img alt="" height="679" src="https://images2.imgbox.com/aa/73/4rBYEYpq_o.png" width="1098"></p> 
<p></p> 
<pre><code class="language-sql">[root@localhost ~]# cat /var/lib/jenkins/secrets/initialAdminPassword   ##输入初始密码
e4a67c389b6f4deeb2fc2bdf58e1dd52            
</code></pre> 
<p><img alt="" height="837" src="https://images2.imgbox.com/d4/a4/vsykUG7t_o.png" width="1085"></p> 
<h4 id="7%E3%80%81%20%E9%80%89%E6%8B%A9%E6%8F%92%E4%BB%B6%E6%9D%A5%E5%AE%89%E8%A3%85">7、 选择插件来安装</h4> 
<p><img alt="" height="767" src="https://images2.imgbox.com/87/af/xEhLSZT7_o.png" width="1101"></p> 
<h4 id="8%E3%80%81%E9%80%89%E6%8B%A9%E2%80%9C%E6%97%A0%E2%80%9D%E2%80%8B%E7%BC%96%E8%BE%91">8、选择“无”<img alt="" height="731" src="https://images2.imgbox.com/2a/fc/x3pYRjhr_o.png" width="1001"></h4> 
<h4 id="9%E3%80%81%E5%88%9B%E5%BB%BA%E7%AE%A1%E7%90%86%E5%91%98%E7%94%A8%E6%88%B7">9、创建管理员用户</h4> 
<p><img alt="" height="725" src="https://images2.imgbox.com/2c/a4/WL3QZlA2_o.png" width="991"></p> 
<h4 id="%C2%A010%E3%80%81%E9%80%89%E6%8B%A9%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6%E8%B7%AF%E5%BE%84Manage%20Jenkins%E2%80%94Manage%20Plugins%E2%80%94Plugin%20Manager%E2%80%94Advanced%E7%84%B6%E5%90%8E%E4%B8%8B%E6%8B%89%E5%88%B0%E5%BA%95"> 10、选择安装插件路径Manage Jenkins—Manage Plugins—Plugin Manager—Advanced然后下拉到底</h4> 
<p><img alt="" height="811" src="https://images2.imgbox.com/3c/ca/uQYPhCc7_o.png" width="1200"></p> 
<p>选择下面地址复制到URL下  添加国内插件地址</p> 
<pre><code>https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json
</code></pre> 
<p></p> 
<p><img alt="" height="811" src="https://images2.imgbox.com/a0/0c/ZNwMXfOI_o.png" width="1200"></p> 
<p> 添加如下的，然后重启Jenkins</p> 
<pre><code>[root@localhost ~]# cd /var/lib/jenkins/updates
[root@localhost updates]# ls
default.json  hudson.tasks.Maven.MavenInstaller
[root@localhost updates]# sed -i 's/http:\/\/updates.jenkinsci.org\/download/https:\/\/mirrors.tuna.tsinghua.edu.cn\/jenkins/g' default.json &amp;&amp; sed -i 's/http:\/\/www.google.com/https:\/\/www.baidu.com/g' default.json
</code></pre> 
<h4 id="11%E3%80%81%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6">11、安装插件</h4> 
<pre><code class="language-cpp">安装jenkins所需插件
  Credentials                # 签名证书管理插件
  Gitlab                     # 安装后从 GitLab 获取代码
  Git    和 Git Client       # 用于 Jenkins 在 GitLab 中拉取源码                
  Gitlab Authentication      # GitLab 和 Jenkins 认证插件
  SSH Plugin                 # 进程执行 Shell 脚本
  Publish Over SSH           # 用于通过 SSH 部署应用
  maven              
  chinese                    #中文插件</code></pre> 
<p><img alt="" height="453" src="https://images2.imgbox.com/f9/d7/lV5gYNKg_o.png" width="1191"></p> 
<p> 安装完插件重启Jenkins</p> 
<p><img alt="" height="730" src="https://images2.imgbox.com/dc/b3/zq3jKUn2_o.png" width="1200"></p> 
<h4 id="%C2%A0%E7%94%9F%E6%88%90%E5%85%AC%E9%92%A5%E7%A7%81%E9%92%A5%E5%AF%B9%E5%87%BA%E6%9D%A5%EF%BC%8C%E5%91%BD%E4%BB%A4%EF%BC%9Assh-keygen%C2%A0%E7%A7%81%E9%92%A5id_rsa%20%E5%85%AC%E9%92%A5%20id_rsa.pub"> 12，生成公钥私钥对出来，命令：ssh-keygen 私钥id_rsa 公钥 id_rsa.pub</h4> 
<pre><code class="language-bash">[root@localhost ~]# ssh-keygen 
Generating public/private rsa key pair.
Enter file in which to save the key (/root/.ssh/id_rsa): 
Created directory '/root/.ssh'.
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /root/.ssh/id_rsa.
Your public key has been saved in /root/.ssh/id_rsa.pub.
The key fingerprint is:
SHA256:W/rjnD6edi3oRra8qwqD3b8K5UJ01R5MS3/7XZAKIhA root@localhost.localdomain
The key's randomart image is:
+---[RSA 2048]----+
|    E.  .+o      |
|     . . .+o   . |
|    . o ..o.. +  |
|   . . . ... o o |
|    . . S . . . .|
|   + +   +o    .o|
|  . * o o+ o .  o|
|     = . oOoo .  |
|      oo+X%* .   |
+----[SHA256]-----+
[root@localhost ~]# cd /root/.ssh/
[root@localhost .ssh]# ls
id_rsa  id_rsa.pub
</code></pre> 
<pre><code class="language-bash">[root@localhost .ssh]# cat id_rsa
-----BEGIN RSA PRIVATE KEY-----
MIIEowIBAAKCAQEAzPgvjaV586kIg+A3gBggcxhs6OvCJwGGLLZrwvTunqmESEdi
pMg9sxbePTmflh9jVQfrglfcusYGLybZVVrIH/1Q77v1GXSOCSISe8XArV1gKGx2
651X8L+MDw7TYtvUD6cYSjtezA4JEyjwpWEhi95K9sQLRqQRmW/RmwoO9bSqF3p0
SMJMjjUPNWtDeg2p3jN86QNrZjmxxP6sf+PrETAOxv3RsmYcKfyr/WsvNfnTujJh
eiYq2M3hJvL4Jl94GZ//zU05bYhVLI3a9jcIz7FYreO/oIy+dbsr91scReqh6WCL
KBdiCvwGrJatnZmVNFpZH6H+2upyq6hqGN7eowIDAQABAoIBAA4uJWwRRKycxyAI
hQ5xnN0ZlX9PwDDepB+3xyDHvTJw29v8RFDOIaagMGPf9rB2H3MkhyCPX4/0Xz0n
3OVQ0IOWDOFpCX3nWGQ9XTX+6mOUEDD7wAZw7kKTneb0yZ8PQk6K6t1H2jkXx3zx
2iQ24hFBIcKMsZMDiswotkGZootRApMx8ehsQlSO+0hA1V4WuXf0V0wyM8D81hLr
iPXKKrpMUL7St8Bpf0Z6JY4ReB4AvgaXeviQby4cbfOcK3wUXe4cdINTYhW+rN8b
mtYG/myT7KyXDWJvJuhUXnemZEzGNFPx+Ggj76b1UWQIGq/n/WKEyEt9ZJy+ekkS
g1hS6JECgYEA/GsxgCfIQ89J3uXy8d1ViBtLi4xUN4ZHiHOwZrQ3e+HLOzx9CGEo
QCHp4kekQaOWZYy1wD2VsyTEcc2ARTYlqFTXnqeb7EpdQJvzmOoyS2geIgvsCDAX
HyPWMTDKEKSRpGsB2SizwJrgZSM2iKb0gKmlJUsR59GuRJvCHV5m5icCgYEAz+Cn
Egh2bzww30YXOZ6/KH+dHbYJNNLtIf3Dfr9qAWVtAsrJlx1zoRYb0fEBL8aC0mEf
CkEAgNHCECbZ2ahNHwPF3CJsc1ro/BKNRlvdpHjyHL5wqQOR5AHfLOnAI0dReZbb
keu4j8VslAW76Va0l0efBfezNCmyIMMtweWXbSUCgYB7CKSwGrP6mWcgRmUMjx3J
ocRI2LWT+teTIxCwftcsgvpUfT9UfkboO5+Ms+7UL7B2/wb4FQyKrTkzXz9OfP4N
9ozCwF+35OdfPqSVvFGXf8BwR+9cblRW0Vjt0SIsyopS4fWcq8Ix90u5AFjscrRq
okXkz5qCrCmNN35+Yi01sQKBgCuCVNWkac2MZppE3FWWEWKTmzn9wN2KjFGCAKoF
vFVAelmMQjdb1bjQnNALRnlOblFEPK/zvPw5awngZ9ZzsHieXIpfth1K2NrxsxoX
3kMvgVVc0s29TorPjXukDTAVHEt7tMdM9Bs7cidlL9h96lyDhBhGqP5w/7R1xZ0A
xfn1AoGBAMrdTW5qwhQ2ABLMxGryakUFB2COv1wKstfXA41lzrZvdtArwzxfk43S
YZzE2aKGnaPAIPzdjBiJ2FBpmA0M/GjEDaaqIBhETNNTfm8Lase4j2LXls2rJmgH
wG6QqSFkTBVXrm9QB6xduwxcezbN3HCkVNrlKwWiNdnlG8F9zOwK
-----END RSA PRIVATE KEY-----
[root@localhost .ssh]# cat id_rsa.pub 
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDM+C+NpXnzqQiD4DeAGCBzGGzo68InAYYstmvC9O6eqYRIR2KkyD2zFt49OZ+WH2NVB+uCV9y6xgYvJtlVWsgf/VDvu/UZdI4JIhJ7xcCtXWAobHbrnVfwv4wPDtNi29QPpxhKO17MDgkTKPClYSGL3kr2xAtGpBGZb9GbCg71tKoXenRIwkyONQ81a0N6DaneM3zpA2tmObHE/qx/4+sRMA7G/dGyZhwp/Kv9ay81+dO6MmF6JirYzeEm8vgmX3gZn//NTTltiFUsjdr2NwjPsVit47+gjL51uyv3WxxF6qHpYIsoF2IK/Aaslq2dmZU0Wlkfof7a6nKrqGoY3t6j root@localhost.localdomain
[root@localhost .ssh]# 
</code></pre> 
<h2 id="%E5%BC%80%E5%A7%8Bgitlab%E7%9A%84%E9%83%A8%E7%BD%B2">二，开始gitlab的部署</h2> 
<h4 id="1%E3%80%81%E9%85%8D%E7%BD%AEyum%E6%BA%90%E5%9C%B0%E5%9D%80">1、配置yum源地址</h4> 
<pre><code>vim /etc/yum.repos.d/gitlab-ce.repo
[gitlab-ce]
name=Gitlab CE Repository
baseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el$releasever/
gpgcheck=0
enabled=1
</code></pre> 
<p>或者用wget安装</p> 
<pre><code>  wget https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-15.2.0-ce.0.el7.x86_64.rpm
</code></pre> 
<h4 id="2%E3%80%81%E9%85%8D%E7%BD%AE%20hosts%E5%8F%8A%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%9F%9F%E5%90%8D">2、配置 hosts及改主机域名</h4> 
<pre><code class="language-cpp">[root@localhost ~]# hostnamectl set-hostname gitlab.example.com
[root@localhost ~]# bash
[root@gitlab ~]# vim /etc/hosts
[root@gitlab ~]# cat /etc/hosts
192.168.100.12   gitlab.example.com
</code></pre> 
<h4 id="3%E3%80%81%E5%90%AF%E5%8A%A8postfix%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1">3、启动postfix邮件服务</h4> 
<pre><code>systemctl start postfix
systemctl enable  postfix 
</code></pre> 
<h4 id="4%E3%80%81%E5%AE%89%E8%A3%85gitlab">4、安装gitlab</h4> 
<pre><code>yum -y install gitlab-ce
</code></pre> 
<h4 id="5%E3%80%81%E5%8A%A0%E8%BD%BD%E5%88%9D%E5%A7%8B%E5%8C%96%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%C2%A0">5、加载初始化命令执行 </h4> 
<pre><code class="language-cpp">[root@gitlab ~]# gitlab-ctl 
[root@gitlab ~]# gitlab-ctl reconfigure  ##出现以下代表安装成功
....
....
Running handlers:
[2022-08-14T16:33:17+08:00] INFO: Running report handlers
Running handlers complete
[2022-08-14T16:33:17+08:00] INFO: Report handlers complete
Infra Phase complete, 604/1618 resources updated in 03 minutes 19 seconds

Notes:
Default admin account has been configured with following details:
Username: root
Password: You didn't opt-in to print initial root password to STDOUT.
Password stored to /etc/gitlab/initial_root_password. This file will be cleaned up in first reconfigure run after 24 hours.

NOTE: Because these credentials might be present in your log files in plain text, it is highly recommended to reset the password following https://docs.gitlab.com/ee/security/reset_user_password.html#reset-your-root-password.

gitlab Reconfigured!

[root@gitlab ~]# gitlab-ctl status  
run: alertmanager: (pid 12914) 298s; run: log: (pid 12682) 352s
run: gitaly: (pid 12904) 299s; run: log: (pid 12022) 464s
run: gitlab-exporter: (pid 12875) 300s; run: log: (pid 12529) 371s
run: gitlab-kas: (pid 12851) 302s; run: log: (pid 12281) 449s
run: gitlab-workhorse: (pid 12862) 302s; run: log: (pid 12411) 394s
run: grafana: (pid 13005) 297s; run: log: (pid 12800) 317s
run: logrotate: (pid 11941) 479s; run: log: (pid 11949) 478s
run: nginx: (pid 12423) 391s; run: log: (pid 12434) 388s
run: node-exporter: (pid 12870) 301s; run: log: (pid 12470) 379s
run: postgres-exporter: (pid 12961) 298s; run: log: (pid 12720) 347s
run: postgresql: (pid 12146) 456s; run: log: (pid 12157) 455s
run: prometheus: (pid 12887) 300s; run: log: (pid 12650) 359s
run: puma: (pid 12340) 409s; run: log: (pid 12354) 406s
run: redis: (pid 11971) 473s; run: log: (pid 11979) 472s
run: redis-exporter: (pid 12878) 300s; run: log: (pid 12617) 365s
run: sidekiq: (pid 12358) 403s; run: log: (pid 12378) 400s
</code></pre> 
<h4 id="6%E3%80%81%E5%90%AF%E5%8A%A8gitlab%E6%9C%8D%E5%8A%A1">6、启动gitlab服务</h4> 
<pre><code class="language-bash">[root@gitlab ~]# gitlab-ctl start
ok: run: alertmanager: (pid 12914) 382s
ok: run: gitaly: (pid 12904) 383s
ok: run: gitlab-exporter: (pid 12875) 384s
ok: run: gitlab-kas: (pid 12851) 386s
ok: run: gitlab-workhorse: (pid 12862) 386s
ok: run: grafana: (pid 13005) 381s
ok: run: logrotate: (pid 11941) 563s
ok: run: nginx: (pid 12423) 475s
ok: run: node-exporter: (pid 12870) 385s
ok: run: postgres-exporter: (pid 12961) 382s
ok: run: postgresql: (pid 12146) 540s
ok: run: prometheus: (pid 12887) 384s
ok: run: puma: (pid 12340) 493s
ok: run: redis: (pid 11971) 557s
ok: run: redis-exporter: (pid 12878) 384s
ok: run: sidekiq: (pid 12358) 487s
</code></pre> 
<h4 id="7%E3%80%81%E7%99%BB%E5%BD%95gitlab%C2%A0%E7%BD%91%E9%A1%B5%C2%A0%20%C2%A0http%3A%2F%2F192.168.100.12%2F%C2%A0%20%E8%B4%A6%E5%8F%B7%E5%AF%86%E7%A0%81%E4%B8%BA">7、登录gitlab 网页   <a href="http://192.168.100.12/" rel="nofollow" title="http://192.168.100.12/">http://192.168.100.12/</a>  账号密码为</h4> 
<pre><code class="language-sql">账号root  Password: M8F5dQ8eZd+dJS+8PEJcNdWUFKItE3ZLW6JqPJ+0e5c=        ##密码
[root@gitlab ~]# cat  /etc/gitlab/initial_root_password
# WARNING: This value is valid only in the following conditions
#          1. If provided manually (either via `GITLAB_ROOT_PASSWORD` environment variable or via `gitlab_rails['initial_root_password']` setting in `gitlab.rb`, it was provided before database was seeded for the first time (usually, the first reconfigure run).
#          2. Password hasn't been changed manually, either via UI or via command line.
#
#          If the password shown here doesn't work, you must reset the admin password following https://docs.gitlab.com/ee/security/reset_user_password.html#reset-your-root-password.

Password: M8F5dQ8eZd+dJS+8PEJcNdWUFKItE3ZLW6JqPJ+0e5c=        ##密码

# NOTE: This file will be automatically deleted in the first reconfigure run after 24 hours.
</code></pre> 
<p><img alt="" height="663" src="https://images2.imgbox.com/ea/62/5F63iz2t_o.png" width="1200"></p> 
<h4 id="%C2%A08%E3%80%81%E6%9B%B4%E6%94%B9%E4%B8%BA%E4%B8%AD%E6%96%87%E9%A1%B5%E9%9D%A2"> 8、更改为中文页面</h4> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%919%E3%80%81%E4%BF%AE%E6%94%B9%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AF%86%E7%A0%81"><img alt="" height="789" src="https://images2.imgbox.com/be/c9/AxXY79od_o.png" width="1200">9、修改初始化密码</h4> 
<p><img alt="" height="789" src="https://images2.imgbox.com/df/c4/mMLqiR1M_o.png" width="1200"></p> 
<h4 id="%C2%A010%E3%80%81%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E9%A1%B9%E7%9B%AE"> 10、创建新的项目</h4> 
<p><img alt="" height="789" src="https://images2.imgbox.com/c7/7c/LvgPnqZN_o.png" width="1200"></p> 
<p><img alt="" height="789" src="https://images2.imgbox.com/5d/56/GMquaLXu_o.png" width="1200"></p> 
<h4 id="%C2%A011%E3%80%81%E9%80%89%E6%8B%A9%E4%B8%8A%E4%BC%A0%E4%B8%80%E4%B8%AA%E6%96%87%E4%BB%B6"> 11、选择上传一个文件</h4> 
<p><img alt="" height="959" src="https://images2.imgbox.com/93/9c/mUdAa4rv_o.png" width="1200"></p> 
<p><img alt="" height="517" src="https://images2.imgbox.com/a5/ee/NYKDOdMt_o.png" width="767"></p> 
<p><img alt="" height="516" src="https://images2.imgbox.com/de/18/hxU5Nug2_o.png" width="772"></p> 
<h4 id="12%E3%80%81%E9%A1%B9%E7%9B%AE%E5%BB%BA%E6%88%90%E5%8A%9F%E4%B8%8A%E4%BC%A0">12、项目建成功上传</h4> 
<p><img alt="" height="377" src="https://images2.imgbox.com/f5/c9/95hBqy9i_o.png" width="1042"></p> 
<h4 id="13%E3%80%81%C2%A0%E7%84%B6%E5%90%8E%E5%B0%B1%E6%98%AF%E9%85%8D%E5%90%88Jenkins%E9%83%A8%E7%BD%B2%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE">13、 然后就是配合Jenkins部署这个项目</h4> 
<p><img alt="" height="624" src="https://images2.imgbox.com/cc/49/c5z9RPXQ_o.png" width="1037"></p> 
<h4 id="%C2%A0%E5%9C%A8Jenkins%E7%94%9F%E6%88%90%E7%9A%84ssh-keygen%C2%A0%C2%A0"> 在Jenkins生成的ssh-keygen  </h4> 
<p>私钥id_rsa  公钥 id_rsa.pub 配置在gitlab里<br><img alt="" height="959" src="https://images2.imgbox.com/6c/b8/CGHiX2Hh_o.png" width="1200"></p> 
<p><img alt="" height="428" src="https://images2.imgbox.com/7d/2e/9c9xfZGF_o.png" width="1200"></p> 
<h4 id="%C2%A0%E5%9C%A8Jenkins%E9%85%8D%E7%BD%AE%E5%87%AD%E6%8D%AE"> 14，在Jenkins配置凭据</h4> 
<p><img alt="" height="352" src="https://images2.imgbox.com/72/2a/jzn65Eq9_o.png" width="1200"></p> 
<p> <img alt="" height="858" src="https://images2.imgbox.com/4f/3a/naoAdlja_o.png" width="1200"></p> 
<h4 id="%C2%A0%E4%B9%9F%E5%8F%AF%E4%BB%A5%E9%85%8D%E7%BD%AE%E4%B8%80%E4%B8%AAssh%E7%A7%98%E9%92%A5%E7%9A%84%E6%A8%A1%E5%BC%8F%E3%80%82%E5%A6%82%E4%B8%8B%C2%A0%20%C2%A0key%20%E6%98%AF%E7%A7%81%E9%92%A5id_rsa%C2%A0%20%E5%BC%80%E5%A7%8B%E7%94%9F%E6%88%90%E7%9A%84"> 也可以配置一个ssh秘钥的模式。如下   key 是私钥id_rsa  开始生成的</h4> 
<p><img alt="" height="959" src="https://images2.imgbox.com/8f/08/ylA1j7qA_o.png" width="1200"></p> 
<p> <img alt="" height="323" src="https://images2.imgbox.com/fb/79/lvngB051_o.png" width="1200"></p> 
<h4 id="15%EF%BC%8C%E6%B7%BB%E5%8A%A0JDK%EF%BC%8CGit%EF%BC%8CMaven%EF%BC%8C%E8%B7%AF%E5%BE%84">15，添加JDK，Git，Maven，路径</h4> 
<p><img alt="" height="887" src="https://images2.imgbox.com/cc/8b/pVEeXPHJ_o.png" width="1200"></p> 
<p><img alt="" height="887" src="https://images2.imgbox.com/d9/b5/CO6tnZPN_o.png" width="1200"></p> 
<p><img alt="" height="887" src="https://images2.imgbox.com/09/46/QQieffoq_o.png" width="1200"></p> 
<h4 id="%C2%A0%E6%9F%A5%E8%AF%A2JDK%EF%BC%8CGit%EF%BC%8CMaven%EF%BC%8C%E8%B7%AF%E5%BE%84"> 查询JDK，Git，Maven，路径</h4> 
<pre><code class="language-cs">root@localhost ~]# which git
/usr/bin/git
[root@localhost ~]# which java
/usr/bin/java
[root@localhost ~]# mvn -v
Apache Maven 3.0.5 (Red Hat 3.0.5-17)
Maven home: /usr/share/maven
Java version: 1.8.0_332, vendor: Red Hat, Inc.
Java home: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.332.b09-1.el7_9.x86_64/jre
Default locale: zh_CN, platform encoding: UTF-8
OS name: "linux", version: "3.10.0-1160.71.1.el7.x86_64", arch: "amd64", family: "unix"

</code></pre> 
<h3 id="%C2%A0%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE"> 三，新建项目</h3> 
<p><img alt="" height="635" src="https://images2.imgbox.com/c7/d8/341i3320_o.png" width="1082"></p> 
<h4 id="%C2%A01%E3%80%81%E6%B7%BB%E5%8A%A0%E4%B8%AA%E9%A1%B9%E7%9B%AE%E6%8F%8F%E8%BF%B0%EF%BC%8C%E9%80%89%E6%8B%A9git%E6%9E%84%E5%BB%BA"> 1、添加个项目描述，选择git构建</h4> 
<p><img alt="" height="959" src="https://images2.imgbox.com/fb/67/kmR0oU2T_o.png" width="1200"></p> 
<h4 id="2%E3%80%81%E6%BA%90%E7%A0%81%E7%AE%A1%E7%90%86URL%E5%9C%B0%E5%9D%80%E6%B7%BB%E5%8A%A0">2、源码管理URL地址添加</h4> 
<p><img alt="" height="914" src="https://images2.imgbox.com/02/9c/fx5E6jgD_o.png" width="1081"></p> 
<p>如果出现以下错误的话   </p> 
<pre><code class="language-bash">Failed to connect to repository : Command "/usr/bin/git ls-remote -h http://gitlab.example.com/root/demo.git HEAD" returned status code 128:
stdout:
stderr: fatal: unable to access 'http://gitlab.example.com/root/demo.git/': Could not resolve host: gitlab.example.com; Unknown error

翻译：
无法连接到存储库：命令“/usr/bin/git ls remote-h”http://gitlab.example.com/root/demo.git“头”返回状态代码128：

标准输出：

stderr:致命：无法访问'http://gitlab.example.com/root/demo.git/“：无法解析主机：gitlab.example。通用域名格式；未知错误</code></pre> 
<h4 id="3%E3%80%81%E6%89%93%E5%BC%80Jenkins%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%8C%E6%B7%BB%E5%8A%A0gitlab%E7%9A%84ip%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E9%85%8D%E7%BD%AE">3、打开Jenkins服务器，添加gitlab的ip域名解析配置</h4> 
<pre><code>[root@localhost ~]# cat /etc/hosts
192.168.100.12   gitlab.example.com
</code></pre> 
<p> 更改指定分支<img alt="" height="201" src="https://images2.imgbox.com/50/7c/h2JyAoFy_o.png" width="836"></p> 
<p><img alt="" height="336" src="https://images2.imgbox.com/af/98/9iCJ71Fb_o.png" width="985"></p> 
<h4 id="4%E3%80%81%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E5%AE%8C%E6%88%90">4、项目构建完成</h4> 
<p><img alt="" height="674" src="https://images2.imgbox.com/8c/e1/yZ8yXOxN_o.png" width="1200"></p> 
<p><img alt="" height="649" src="https://images2.imgbox.com/9b/6e/fI9L4Oyk_o.png" width="1200"></p> 
<h3 id="%C2%A0%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F">四，项目构建成功</h3> 
<h4 id="1%E3%80%81%E5%8F%98%E7%BB%BF%E8%89%B2%E5%AF%B9%E5%8F%B7%E4%BB%A3%E8%A1%A8%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F">1、变绿色对号代表构建成功</h4> 
<p><img alt="" height="185" src="https://images2.imgbox.com/9d/f1/idMA7DpU_o.png" width="383"></p> 
<h4 id="%C2%A02%E3%80%81%E6%9F%A5%E7%9C%8B%E8%AF%A6%E7%BB%86%E6%9E%84%E5%BB%BA%20%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%87%BA"> 2、查看详细构建 控制台输出</h4> 
<p><img alt="" height="668" src="https://images2.imgbox.com/8f/d4/O3PJmqLk_o.png" width="1200"></p> 
<h4 id="3%EF%BC%8C%E7%84%B6%E5%90%8E%E6%88%91%E4%BB%AC%E7%9A%84%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA%E6%88%90%E5%8A%9F%E5%9C%A8Jenkins%E7%9A%84%2Fvar%2Flib%2Fjenkins%2Fworkspace%2Fdemo%E8%B7%AF%E5%BE%84%EF%BC%8C%E6%9F%A5%E7%9C%8B%E4%B8%8B%20%E5%B7%B2%E7%BB%8F%E6%9C%89demo%E9%A1%B9%E7%9B%AE%E4%BA%86">3，然后我们的项目构建成功在Jenkins的<strong>/var/lib/jenkins/workspace/demo</strong>路径，查看下 已经有demo项目了</h4> 
<pre><code>[root@localhost ~]# cd /var/lib/jenkins/workspace/
[root@localhost workspace]# ls
demo  demo@tmp
[root@localhost workspace]# cd demo
[root@localhost demo]# ls
1.html
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f96bc8c31f5edb0b777ebc6d96fb65da/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用MATLAB对于Excel表格进行处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/444c2d868d9bfb0288f16ae92e1d116f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Spring注解必知必会】深度解析@Component注解实现原理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>