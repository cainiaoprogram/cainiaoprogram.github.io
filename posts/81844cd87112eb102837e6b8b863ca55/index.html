<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>matlab of control engineers - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="matlab of control engineers" />
<meta property="og:description" content="各大符号在matlab中的表示：
t=0:0.01*pi:2*pi
alpha=3
y=sin(alpha*t)
plot(t,y)
grid
title(&#39;plot of sin(\alphat)&#39;)
xlabel(&#39;t&#39;)
ylabel(&#39;sin(\alphat)&#39;)
u1=[0:0.5:2]&#39;
u2=[1.5:-0.5:-2]&#39;
u3=[-1.5:0.5:0]&#39;
w=[u1;u2;u3]
t=0:0.5:8.0
plot(t,w)
grid
绘制两个矩形：
x1=[-10 10 10 -10 -10]
y1=[-5 -5 5 5 -5]
x2=[-5 5 5 -5 -5]
y2=[-2 -2 2 2 -2]
plot(x1,y1,x2,y2)
v=[-20 20 -20 20]
axis(v)
axis(&#39;square&#39;)
grid
xlabel(&#39;x&#39;)
ylabel(&#39;y&#39;)
xp=[0 5*sin(pi/6)]
yp=[0 5*cos(pi/6)]
plot(xp,yp)
v=[-6 6 -4 8]
axis(v)
hold a=0:0.01:2*pi
x=5*sin(pi/6)&#43;0.5*cos(a)
y=5*cos(pi/6)&#43;0.5*sin(a)
plot(x,y)
xb=[-3 3 3 -3 -3]" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/81844cd87112eb102837e6b8b863ca55/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-01T09:03:52+08:00" />
<meta property="article:modified_time" content="2023-04-01T09:03:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">matlab of control engineers</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ff/bd/OyNGcbft_o.jpg"><img alt="" height="388" src="https://images2.imgbox.com/81/ae/BrJrv6Ef_o.jpg" width="506"></p> 
<p></p> 
<p> 各大符号在matlab中的表示：</p> 
<blockquote> 
 <p>t=0:0.01*pi:2*pi<br> alpha=3<br> y=sin(alpha*t)<br> plot(t,y)<br> grid<br> title('plot of sin(\alphat)')<br> xlabel('t')<br> ylabel('sin(\alphat)')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7b/73/lx0fWBNk_o.jpg"></p> 
 <p></p> 
</blockquote> 
<blockquote> 
 <p>u1=[0:0.5:2]'<br> u2=[1.5:-0.5:-2]'<br> u3=[-1.5:0.5:0]'<br> w=[u1;u2;u3]<br> t=0:0.5:8.0<br> plot(t,w)<br> grid</p> 
</blockquote> 
<p><img alt="" src="https://images2.imgbox.com/3b/22/sgkrOlyQ_o.jpg"> 绘制两个矩形：</p> 
<blockquote> 
 <p>x1=[-10 10 10 -10 -10]<br> y1=[-5 -5 5 5 -5]<br> x2=[-5 5 5 -5 -5]<br> y2=[-2 -2 2 2 -2]<br> plot(x1,y1,x2,y2)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/82/e9/YUhlJYC9_o.jpg"></p> 
 <p> v=[-20 20 -20 20]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/44/f8/zQCDsVzI_o.jpg"></p> 
 <p> axis('square')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0b/6e/MjNtUNrn_o.jpg"></p> 
 <p> grid<br> xlabel('x')<br> ylabel('y')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bd/13/flPt4z0S_o.jpg"></p> 
 <p></p> 
</blockquote> 
<blockquote> 
 <p>xp=[0 5*sin(pi/6)]<br> yp=[0 5*cos(pi/6)]<br> plot(xp,yp)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4f/50/4FVfn1Hr_o.jpg"></p> 
 <p> v=[-6 6 -4 8]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8f/87/87ZlOV6L_o.jpg"></p> 
 <p> hold <br> a=0:0.01:2*pi<br> x=5*sin(pi/6)+0.5*cos(a)<br> y=5*cos(pi/6)+0.5*sin(a)<br> plot(x,y)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7e/1e/ofunkq4A_o.jpg"></p> 
 <p> xb=[-3 3 3 -3 -3]<br> yb=[-3 -3 0 0 -3]<br> plot(xb,yb)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f5/17/Ja0G18Wo_o.jpg"></p> 
 <p>  plot(2+0.5*cos(a),-3.5+0.5*sin(a))</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/86/8d/B15mDAP0_o.jpg"></p> 
 <p>axis('square')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/28/a6/rf2ASvOP_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p><strong>[r,p,k]=residue(num,den)</strong>：将传递函数进行部分分式化。</p> 
<p><img alt="\frac{2s^3+5s^2+3s+6}{s^3+6s^2+11s+6}=\frac{-6}{s+3}+\frac{-4}{s+2}+\frac{3}{s+1}+2" class="mathcode" src="https://images2.imgbox.com/06/8f/0gD8j8gg_o.png"></p> 
<blockquote> 
 <p>num=[2 5 3 6]<br> den=[1 6 11 6]<br> [r,p,k]=residue(num,den)</p> 
 <p>&gt;&gt; main</p> 
 <p>num =</p> 
 <p>     2     5     3     6</p> 
 <p><br> den =</p> 
 <p>     1     6    11     6</p> 
 <p><br> r =</p> 
 <p>   -6.0000<br>    -4.0000<br>     3.0000</p> 
 <p><br> p =</p> 
 <p>   -3.0000<br>    -2.0000<br>    -1.0000</p> 
 <p><br> k =</p> 
 <p>     2</p> 
</blockquote> 
<p>也可以反过来使用：</p> 
<p><strong>[num,den]=residue(r,p,k)</strong></p> 
<blockquote> 
 <p>r=[-6 -4 3]<br> p=[-3 -2 -1]<br> k=2<br> [num,den]=residue(r,p,k)</p> 
 <p>&gt;&gt;</p> 
 <p>num =</p> 
 <p>     2     5     3     6</p> 
 <p><br> den =</p> 
 <p>     1     6    11     6</p> 
</blockquote> 
<p><img alt="\frac{B(s)}{A(s)}=\frac{num}{den}" class="mathcode" src="https://images2.imgbox.com/f1/d7/8fo1OLM0_o.png"></p> 
<blockquote> 
 <p>&gt;&gt; printsys(num,den,'s')<br>  <br> num/den = <br>  <br>    2 s^3 + 5 s^2 + 3 s + 6<br>    -----------------------<br>     s^3 + 6 s^2 + 11 s + 6</p> 
</blockquote> 
<blockquote> 
 <p>num=[1 2 3]<br> den=[1 3 3 1]<br> [r,p,k]=residue(num,den)</p> 
 <p>&gt;&gt;</p> 
 <p>r =</p> 
 <p>    1.0000<br>     0.0000<br>     2.0000</p> 
 <p><br> p =</p> 
 <p>   -1.0000<br>    -1.0000<br>    -1.0000</p> 
 <p><br> k =</p> 
 <p>     []</p> 
 <p><img alt="\frac{s^2+2s+3}{s^3+3s^2+3s+1}=\frac{1}{s+1}+\frac{0}{(s+1)^2}+\frac{2}{(s+1)^3}" class="mathcode" src="https://images2.imgbox.com/84/b9/13eqJbt4_o.png"></p> 
</blockquote> 
<p><strong>[z,p,k]=tf2zp(num,den):求零极点表达式</strong></p> 
<p><strong>z是零点，p是极点，k是增益</strong></p> 
<blockquote> 
 <p>num=[4 16 12]<br> den=[1 12 44 48]<br> [z,p,k]=tf2zp(num,den)</p> 
 <p>&gt;&gt;</p> 
 <p>z =</p> 
 <p>    -3<br>     -1</p> 
 <p><br> p =</p> 
 <p>   -6.0000<br>    -4.0000<br>    -2.0000</p> 
 <p><br> k =</p> 
 <p>     4</p> 
</blockquote> 
<p><strong>[num,den]=zp2tf(z,p,k);printsys(num,den,'s'):将零极点表达换为一般表达;z,p一定是列向量</strong></p> 
<blockquote> 
 <p>z=[-1;-3]<br> p=[0;-2;-4;-6]<br> k=4<br> [num,den]=zp2tf(z,p,k)<br> printsys(num,den,'s')</p> 
 <p>&gt;&gt;</p> 
 <p>num =</p> 
 <p>     0     0     4    16    12</p> 
 <p><br> den =</p> 
 <p>     1    12    44    48     0</p> 
 <p> <br> num/den = <br>  <br>          4 s^2 + 16 s + 12<br>    ----------------------------<br>    s^4 + 12 s^3 + 44 s^2 + 48 s</p> 
</blockquote> 
<blockquote> 
 <p>num=[5 330 55 30]<br> den=[1 9 33 65]<br> [z,p,k]=tf2zp(num,den)</p> 
 <p>&gt;&gt;</p> 
 <p>z =</p> 
 <p> -65.8343 + 0.0000i<br>   -0.0829 + 0.2903i<br>   -0.0829 - 0.2903i</p> 
 <p><br> p =</p> 
 <p>  -5.0000 + 0.0000i<br>   -2.0000 + 3.0000i<br>   -2.0000 - 3.0000i</p> 
 <p><br> k =</p> 
 <p>     5<br><img alt="\frac{2s^3+330s^2+55s+30}{s^3+9s^2+33s+65}=\frac{5(s+65.8343)(s+0.0829-0.2903i)(s+0.0829+0.2903i)}{(s+5)(s+2-3i)(s+2+3i)}" class="mathcode" src="https://images2.imgbox.com/e1/d4/8k45viwG_o.png"></p> 
</blockquote> 
<blockquote> 
 <p><strong>tf2ss</strong></p> 
 <p><strong>ss2tf</strong></p> 
 <p><strong>ss2zp</strong></p> 
 <p><strong>zp2ss</strong></p> 
 <p><strong>tf2zp</strong></p> 
 <p><strong>zp2tf</strong></p> 
 <p><strong>c2d</strong></p> 
</blockquote> 
<blockquote> 
 <p>num=[25.04 5.008]<br> den=[1 5.03247 25.1026 5.008]<br> [A,B,C,D]=tf2ss(num,den)<br> &gt;&gt;</p> 
 <p>A =</p> 
 <p>   -5.0325  -25.1026   -5.0080<br>     1.0000         0         0<br>          0    1.0000         0</p> 
 <p><br> B =</p> 
 <p>     1<br>      0<br>      0</p> 
 <p><br> C =</p> 
 <p>         0   25.0400    5.0080</p> 
 <p><br> D =</p> 
 <p>     0<br>  </p> 
</blockquote> 
<p><strong>[num,den]=ss2tf(A,B,C,D,iu):对于单输出多输入系统，由状态方程转换成传递函数来说有多个</strong></p> 
<blockquote> 
 <p>A=[0 1;-2 -3]<br> B=[1 0;0 1]<br> C=[1 0]<br> D=[0 0]<br> [num1,den1]=ss2tf(A,B,C,D,1)<br> [num2,den2]=ss2tf(A,B,C,D,2)</p> 
 <p>&gt;&gt;</p> 
 <p>&gt;&gt; main</p> 
 <p>A =</p> 
 <p>     0     1<br>     -2    -3</p> 
 <p><br> B =</p> 
 <p>     1     0<br>      0     1</p> 
 <p><br> C =</p> 
 <p>     1     0</p> 
 <p><br> D =</p> 
 <p>     0     0</p> 
 <p><br> num1 =</p> 
 <p>     0     1     3</p> 
 <p><br> den1 =</p> 
 <p>     1     3     2</p> 
 <p><br> num2 =</p> 
 <p>     0     0     1</p> 
</blockquote> 
<blockquote> 
 <p><img alt="x'=\begin{pmatrix} 0&amp;1 \\ -2&amp;-3 \end{pmatrix}x+\begin{pmatrix} 1&amp;0 \\ 0&amp;0 \end{pmatrix}u" class="mathcode" src="https://images2.imgbox.com/96/e1/H3kYv5hb_o.png"></p> 
 <p><img alt="y=\bigl(\begin{smallmatrix} 1 &amp; 0 \end{smallmatrix}\bigr)x" class="mathcode" src="https://images2.imgbox.com/5c/3a/pVhwgsQn_o.png"></p> 
 <p><img alt="\frac{U}{R1}=\frac{s+3}{s^2+3s+2}" class="mathcode" src="https://images2.imgbox.com/75/47/66TfoKi9_o.png"></p> 
 <p><img alt="\frac{U}{R2}=\frac{1}{s^2+3s+2}" class="mathcode" src="https://images2.imgbox.com/bd/10/1iy1ErZO_o.png"></p> 
</blockquote> 
<p><strong>[num,den]=ss2tf(A,B,C,D,iu):对于输出多输入系统</strong></p> 
<blockquote> 
 <p>A=[0 1;-25 -4]<br> B=[1 1;0 1]<br> C=[1 0;0 1]<br> D=[0 0;0 0]<br> [num1,den1]=ss2tf(A,B,C,D,1)<br> [num2,den2]=ss2tf(A,B,C,D,2)</p> 
 <p>num1 =</p> 
 <p>     0     1     4<br>      0     0   -25</p> 
 <p><br> den1 =</p> 
 <p>    1.0000    4.0000   25.0000</p> 
 <p><br> num2 =</p> 
 <p>         0    1.0000    5.0000<br>          0    1.0000  -25.0000</p> 
 <p><br> den2 =</p> 
 <p>    1.0000   4.0000   25.0000</p> 
</blockquote> 
<p><img alt="x'=\bigl(\begin{smallmatrix} 0 &amp; 1\\ -25&amp; -4 \end{smallmatrix}\bigr)x+\bigl(\begin{smallmatrix} 1 &amp; 1\\ 0&amp; 1 \end{smallmatrix}\bigr)u" class="mathcode" src="https://images2.imgbox.com/ef/be/IGTa2xfB_o.png"></p> 
<p><strong><strong><img alt="y=\bigl(\begin{smallmatrix} 1 &amp;0 \\ 0 &amp; 1 \end{smallmatrix}\bigr)x+\bigl(\begin{smallmatrix} 0 &amp;0 \\ 0&amp; 0 \end{smallmatrix}\bigr)u" class="mathcode" src="https://images2.imgbox.com/15/a0/f85nQXJp_o.png"></strong></strong></p> 
<blockquote> 
 <p><strong><strong><img alt="\frac{U1}{R1}=\frac{s+4}{s^2+4s+25}" class="mathcode" src="https://images2.imgbox.com/78/0e/Bt5592ie_o.png"></strong></strong></p> 
 <p><strong><strong><img alt="\frac{U2}{R1}=\frac{-25}{s^2+4s+25}" class="mathcode" src="https://images2.imgbox.com/5f/bc/pWMc9vCF_o.png"></strong></strong></p> 
 <p><strong><strong><img alt="\frac{U2}{R1}=\frac{s+5}{s^2+4s+25}" class="mathcode" src="https://images2.imgbox.com/b4/ec/ObGEckm4_o.png"></strong></strong></p> 
 <p><strong><strong><img alt="\frac{U2}{R2}=\frac{s-25}{s^2+4s+25}" class="mathcode" src="https://images2.imgbox.com/86/13/sHCJbhCG_o.png"></strong></strong></p> 
</blockquote> 
<p><strong><strong>minreal(sys):将表达式sys中的零极点相消后再显示</strong></strong></p> 
<blockquote> 
 <p>num=[1 3 2]<br> den=[1 8 19 12]<br> G=minreal(tf(num,den))</p> 
 <p>&gt;&gt;</p> 
 <p>G =<br>  <br>       s + 2<br>   --------------<br>   s^2 + 7 s + 12</p> 
</blockquote> 
<p><strong>响应：</strong></p> 
<blockquote> 
 <p>wn=5<br> zeta=0.4<br> num=[wn^2]<br> den=[1 2*zeta*wn wn^2]<br> G=tf(num,den)</p> 
 <p><br> &gt;&gt;</p> 
 <p>G =<br>  <br>         25<br>   --------------<br>   s^2 + 4 s + 25</p> 
</blockquote> 
<p>单位阶跃响应：</p> 
<p>step(sys,t);step(num,den,t);y=step(sys,t);y=step(num,den,t)[y,t]=step(sys,t);[y,t]=step(num,den,,t)</p> 
<blockquote> 
 <p>t=0:0.1:10<br> [y,t]=step(G,t)<br> plot(t,y)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bc/9d/H69GrmmL_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p><strong><strong>            </strong></strong><img alt="" height="1000" src="https://images2.imgbox.com/cc/b0/e0AqFYAM_o.jpg" width="1200"><strong><strong>                                                                                                                                   </strong></strong></p> 
<p>m=10,b=20,k=100</p> 
<blockquote> 
 <p> num=[2 10]<br> den=[1 2 10]<br> t=0:0.1:10<br> [y,t]=step(num,den,t)<br> plot(y)<br> grid</p> 
 <p>&gt;&gt;</p> 
 <p>&gt;&gt; printsys(num,den,'s')<br>  <br> num/den = <br>  <br>       2 s + 10<br>    --------------<br>    s^2 + 2 s + 10</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/77/dd/aGmQTDfs_o.jpg"></p> 
 <p> axis([0 60 0 1.8])<br> title('step response')<br> xlabel('t(sec)')<br> ylabel('y')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/43/7a/wxaZKgzG_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p>xlabel('string','Fontsize',20):</p> 
<blockquote> 
 <p>axis([0 60 0 1.8])<br> title('step response','Fontsize',20)<br> xlabel('t(sec)')<br> ylabel('y')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f4/d8/9qNMD5zj_o.jpg"></p> 
</blockquote> 
<p><strong>多输入多输出系统的单位阶跃响应</strong></p> 
<blockquote> 
 <p>A=[-1 -1;6.5 0]<br> B=[1 1;1 0]<br> C=[1 0;0 1]<br> D=[0 0;0 0]<br><strong>step(A,B,C,D)</strong></p> 
 <p style="text-align:center;"><strong><img alt="" src="https://images2.imgbox.com/b3/f2/hVd6uPwD_o.jpg"></strong></p> 
 <p> 将同一个输入下的单位阶跃响应图绘制再一张图上：</p> 
 <p>step(A,B,C,D,1)<br> gtext('in1-out1')<br> gtext('in1-out2')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f4/21/5h5287Fy_o.jpg"></p> 
 <p> t=0:0.01:5<br> num1=[1]<br> den1=[1 2 0]<br> sys1=tf(num1,den1)<br> sys=feedback(10*sys1,1)<br> [y,t]=step(sys,t)<br> plot(t,y)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/72/b0/VnviJin6_o.jpg"></p> 
 <p> <img alt="" height="1000" src="https://images2.imgbox.com/29/af/HvtKGvA4_o.jpg" width="1200"></p> 
 <p>绘制单位阶跃响应图：</p> 
 <p></p> 
 <p>z=[]<br> p=[-1 -4]<br> k=20<br> sys1=zpk(z,p,k)<br> sys2=feedback(sys1,0.4490,-1)</p> 
 <p>num=[1]<br> den=[1 0]<br> sys3=tf(num,den)<br> sys4=series(sys2,sys3)</p> 
 <p><br> sys4=feedback(sys4,1,-1)</p> 
 <p>&gt;&gt;<br><br> sys4 =<br>  <br>                  20<br>   --------------------------------<br>   (s+2.902) (s^2 + 2.098s + 6.892)</p> 
 <p><br> t=0:0.01:8<br> [y,t]=step(sys4,t)<br> plot(t,y)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8a/b8/eUpvmTPI_o.jpg"></p> 
 <p></p> 
 <p></p> 
</blockquote> 
<p><strong>feedback(sys1,sys2,-1/+1):表示正负反馈</strong></p> 
<p><strong>feedback(sys1,1):表示单位负反馈</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/6f/66/8ZxsYHTY_o.jpg" width="1200"></p> 
<blockquote> 
 <p></p> 
 <p>s=tf('s')<br> sys1=2/s<br> sys2=2/(s+4)<br> sys3=series(sys1,sys2)<br> sys4=feedback(sys3,1,-1)<br> sys5=0.75/s<br> sys6=series(sys5,sys4)</p> 
 <p>sys7=feedback(sys6,1,-1)</p> 
 <p>t=0:0.01:10<br> [y,t]=step(sys7,t)<br> plot(t,y)<br> title('step response','Fontsize',20)<br> xlabel('t(sec)')<br> ylabel('c(t)')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b7/20/63jRG7QB_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> t=0:0.01:20<br> k=[5 10 20]<br> for n=1:3<br>     numg=[k(n)];deng=[1 11 10 0]<br>     sysg=tf(numg,deng)<br>     sys=feedback(sysg,[1])<br>     y=step(sys,t)<br>     plot(t,y)<br>     hold on<br> end</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bf/aa/NFiP4LNU_o.jpg"></p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/5f/fa/xiuGtyvr_o.jpg" width="1200"></p> 
<blockquote> 
 <p> t=0:0.01:20<br> k=[5 10 20]<br> z=[]<br> p=[0 -1 -10]<br> for i=1:3<br><strong>     k2=[k(i)]                           矩阵元素的访问</strong><br>      sys1=zpk(z,p,k2)<br>      sys2=feedback(sys1,1,-1)<br>     <strong> y(:,i)=step(sys2,t)                              注意写法        ，数组的索引必须是正整数或者逻辑值</strong><br>      <strong>plot(t,y(:,i))     </strong>                             <br>      hold on<br> end<br> gtext('k=5')<br> gtext('k=10')<br> gtext('k=20')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6a/2c/jfO050s7_o.jpg"></p> 
 <p> <br> subplot(2,2,1)<br> plot(t,y(:,1)),grid,title('k=5')<br> subplot(2,2,2)<br> plot(t,y(:,2)),grid,title('k=10')<br> subplot(2,2,3)<br> plot(t,y(:,3)),grid,title('k=20')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f1/ae/x9n2UJkb_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/b4/9e/ftaY1geY_o.jpg" width="1200"></p> 
<blockquote> 
 <p> t=0:0.01:20<br> k=[0.1 0.2 0.3 0.4 0.5]<br> for i=1:5<br>     s=tf('s')<br>     sys1=12.5/(s+1)<br>     k1=[k(i)]<br>     sys2=feedback(sys1,k1,-1)<br>     sys3=1/s<br>     sys4=series(sys2,sys3)<br>     sys5=feedback(sys4,1,-1)<br><strong>    y(:,i)=step(sys5,t)<br>     plot(t,y(:,i))<br>     hold on</strong><br> end<br> gtext('k=0.1')<br> gtext('k=0.2')<br> gtext('k=0.3')<br> gtext('k=0.4')<br> gtext('k=0.5')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c8/5e/2q4qaoiq_o.jpg"></p> 
 <p> t=0:0.01:20<br> k=[0.1 0.2 0.3 0.4 0.5]<br> for i=1:5<br>     s=tf('s')<br>     sys1=12.5/(s+1)<br>     k1=[k(i)]<br>     sys2=feedback(sys1,k1,-1)<br>     sys3=1/s<br>     sys4=series(sys2,sys3)<br>     sys5=feedback(sys4,1,-1)<br><strong>    y(:,i)=step(sys5,t)<br> end<br> plot(t,y)</strong><br> gtext('k=0.1')<br> gtext('k=0.2')<br> gtext('k=0.3')<br> gtext('k=0.4')<br> gtext('k=0.5')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c8/f3/DhniFDnD_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/b4/79/eg9yy2OJ_o.jpg" width="1200"></p> 
<p> ？？？？？？？？不会系统的近似</p> 
<p></p> 
<p><strong>阶跃响应</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/39/bc/Q5pLHyC6_o.jpg" width="1200"></p> 
<p>状态空间中的脉冲响应，[y,x,t]:会有x的向量产生</p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/dc/7a/aHCGsRKM_o.jpg" width="1200"></p> 
<blockquote> 
 <p>A=[0 1;-1 -1]<br> B=[0;1]<br> C=[1 0]<br> D=[0]<br> t=0:0.01:10<br><strong>[y,x,t]=impulse(A,B,C,D)</strong><br> subplot(2,2,1)<br><strong>plot(t,x(:,1))</strong><br> subplot(2,2,2)<br><strong>plot(t,x(:,2))</strong><br> subplot(2,2,3)<br><strong>plot(t,y)</strong><br><img alt="" height="1000" src="https://images2.imgbox.com/01/40/nnRBvQge_o.jpg" width="1200"></p> 
 <p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/8c/ac/IhDaYX11_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/4d/32/jsEuz4ld_o.jpg" width="1200"></p> 
<p></p> 
<blockquote> 
 <p> num=[1]<br> den=[1 0.2 1]<br> t=0:0.01:10<br> y=impulse(num,den)<br> plot(y)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e4/4f/pQsDdgdc_o.jpg"></p> 
 <p>t=0:0.01:10</p> 
 <p> [t,y]=impulse(num,den)<br> plot(t,y)</p> 
 <p>&gt;&gt;</p> 
 <p><br><strong>错误使用 plot<br> 向量长度必须相同。</strong></p> 
 <p><strong>出错 main (第 5 行)<br> plot(t,y)</strong></p> 
 <p><span style="color:#fe2c24;"><strong>很奇怪，明明应该向量的长度就是一样的。</strong></span></p> 
</blockquote> 
<p><span style="color:#0d0016;">斜坡信号：ramp:需要自己设，用lsim指令：</span></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/eb/43/oHjZDafD_o.jpg" width="1200"></p> 
<p><strong> 对系统：<img alt="\frac{1}{s^2+s+1}" class="mathcode" src="https://images2.imgbox.com/72/27/5CXNVnzL_o.png">求其单位斜坡响应相当于对系统<img alt="\frac{1}{s^2+s+1}\frac{1}{s}" class="mathcode" src="https://images2.imgbox.com/c2/e3/wnlFqo9J_o.png">求一个单位阶跃响应</strong></p> 
<blockquote> 
 <p>num=[1]<br> den=[1 1 1 0]<br> t=0:0.01:7<br> c=step(num,den,t)</p> 
 <p>plot(t,c,'--',t,t,'g')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/35/e1/SjUDPNU9_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/56/55/HS9dCV25_o.jpg" width="1200"></p> 
<blockquote> 
 <p></p> 
 <p>num1=[10 4]<br> den1=[1 4 4]<br> t=0:0.01:10<br> y1=step(num1,den1,t)<br> subplot(1,2,1)<br> plot(y1)<br> grid<br> title('step-response')</p> 
 <p><br> num2=[10 4]<br> den2=[1 4 4 0]<br> y2=step(num2,den2,t)<br> subplot(1,2,2)<br> plot(y2)<br> grid<br> title('ramp-response')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f1/9e/R6gpo8Xl_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/42/b3/qco7ExcE_o.jpg" width="1200"></p> 
<p>plot(t,y)</p> 
<p>lsim(sys,u,t,x0):x0:为初始条件</p> 
<p></p> 
<blockquote> 
 <p> num=[1]<br> den=[1 1 1]<br> sys=tf(num,den)<br><strong>t=0:0.01:8<br> u=t                       此时u为单位斜坡信号</strong><br> [y,t]=lsim(sys,u,t)<br> plot(t,y)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ec/f9/f1GY7vFu_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> A=[-1 0.5;-1 0]<br> B=[0;1]<br> C=[1 0]<br> D=[0]<br> sys=ss(A,B,C,D)<br> t=0:0.01:12<br><strong>u1=t<br> u2=exp(-t)</strong><br> x0=[0 0]<br><strong>[y1,t]=lsim(sys,u1,t,x0)<br> [y2,t]=lsim(sys,u2,t,x0)</strong><br> y3=step(sys,t)<br> plot(t,y1,'--',t,y2,'g--',t,y3,'r--')<br> axis([0  12 0 1.4])</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ad/e8/byREtj2D_o.jpg"></p> 
</blockquote> 
<p></p> 
<blockquote> 
 <p>num=[1 10]<br> den=[1 6 9 10]<br> sys=tf(num,den)<br> t=0:0.01:10<br> u1=t<br> u2=exp(-0.5.*t)<br> [y1,t]=lsim(sys,u1,t)<br> [y2,t]=lsim(sys,u2,t)<br> plot(t,y1,'--',t,y2,'g--')</p> 
 <p>legend('ramp-response','exp(-0.5t)-reaponse')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2c/fd/fZWQwZAb_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p></p> 
 <p>num=[5]<br> den=[1 1 5]<br> sys=tf(num,den)</p> 
 <p>t=0:0.01:8<br> r=2+t<br> [y,t]=lsim(sys,r,t)<br> plot(t,y)<br><br><img alt="" src="https://images2.imgbox.com/fa/17/k6ec33lu_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> num=[2]<br> den=[1 1]<br> sys=tf(num,den)<br> sys1=feedback(sys,1,-1)<br> t=0:0.01:10<br> u=0.5*t.^2<br> [y,t]=lsim(sys1,u,t)<br> plot(t,y)<br> xlabel('t(sec)')<br> ylabel('output')<br> title('input=0.5t^2--response','Fontsize',12)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/97/19/2MqYYgIM_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p>A=[0 1;-5 -3]<br> B=[0;1]<br> C=[1 0]<br> D=0<br> sys=tf(ss(A,B,C,D))<br><strong>t=0:0.01:10<br> u=0.5*t.^2<br> x0=[0;0]<br> [y,x]=lsim(sys,u,t,x0)          吧 </strong><br> plot(t,y)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/71/c9/TPEkaWEI_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/9f/5d/mPL0TyeT_o.jpg" width="1200"></p> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/5d/c7/XR4Z5Ang_o.jpg" width="1200"></p> 
<p> <img alt="" height="999" src="https://images2.imgbox.com/f6/55/h1lBE1mt_o.jpg" width="1200"></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/35/36/JShHOv8E_o.jpg" width="1200"></p> 
<p> 练习：</p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/73/75/Cqy34xhv_o.jpg" width="1200"></p> 
<p> <img alt="" height="511" src="https://images2.imgbox.com/68/c0/viwXkh8w_o.png" width="1059"></p> 
<p> ？？？？？？？matlab中怎么编程：</p> 
<blockquote> 
 <p>A=[0 1;-10 -5]<br> B=[2;1]<br> t=0:0.01:10<br><strong>[x,z,t]=step(A,B,A,B,1,t)</strong><br> subplot(1,2,1)<br><strong>plot(t,x(:,1))</strong><br> subplot(1,2,2)<br><strong>plot(t,x(:,2))</strong></p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/23/f9/SdhXlpuh_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p><strong>也可以使用[y,x]=initial(A,B,C,D,[initial condition],t)表示零状态响应</strong></p> 
<blockquote> 
 <p>A=[0 1;-10 -5]<br> t=0:0.01:8<br> B=[0;0]<br> C=[0 0]<br> D=0<br> x0=[2;1]  <br> [y,x]=initial(A,B,C,D,x0,t)<br> subplot(1,2,1)<br> plot(t,x(:,1))<br> subplot(1,2,2)<br> plot(t,x(:,2))</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/78/cb/VloA0Cin_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="985" src="https://images2.imgbox.com/dc/11/w9HjfDkt_o.jpg" width="1200"></p> 
<blockquote> 
 <p> A=[0 1 0;0 0 1;-10 -17 -8]<br><strong>B=[0;0;0]</strong><br><strong>C=[1 0 0]<br> D=0</strong><br> t=0:0.01:10<br><strong>x0=[2;1;0.5]</strong><br><strong>[y,x]=initial(A,B,C,D,x0,t)</strong><br> subplot(2,2,1)<br> plot(t,x(:,1))<br> subplot(2,2,2)<br> plot(t,x(:,2))<br> subplot(2,2,3)<br> plot(t,x(:,3))</p> 
 <p>subplot(2,2,4)<br> plot(t,y)</p> 
 <p><img alt="" src="https://images2.imgbox.com/df/10/dI7pr4hh_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/95/67/lY0Ee6h6_o.jpg" width="1200"></p> 
<blockquote> 
 <p>zeta=[0 0.2 0.4 0.6 0.8]<br> t=0:0.01:10<br> for i=1:5<br>     num=[1]<br>     den=[1 2*zeta(i) 1]<br>     sys=tf(num,den)<br>     y=step(sys,t)<br>     plot(t,y)<br>     grid<br>     hold on<br>  <br> end<br> legend('zeta=0')<br> hold on<br> legend('zeta=0.2')<br> legend('zeta=0.4')<br> legend('zeta=0.6')<br> legend('zeta=0.8')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bf/da/qHgwqomw_o.jpg"></p> 
 <p> ????????不用gtext，怎么把每个曲线的标签加进去</p> 
 <p></p> 
 <p>zeta=[0 0.2 0.4 0.6 0.8]<br> t=0:0.01:10<br> for i=1:5<br>     num=[1]<br>     den=[1 2*zeta(i) 1]<br>     sys=tf(num,den)<br>  <strong>   y(:,i)=step(sys,t)</strong><br> end<br><strong>plot(t,y)</strong></p> 
 <p style="text-align:center;"><strong><img alt="" src="https://images2.imgbox.com/ca/62/yPiTUdZP_o.jpg"></strong></p> 
 <p><strong> mesh(zeta,t,y)</strong></p> 
 <p>xlabel('\zeta')<br> ylabel('t(sec)')<br> zlabel('output')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e8/5e/6SdW2HBK_o.jpg"></p> 
 <p> mesh(t,zeta,y')<br> xlabel('t')<br> ylabel('\zeta')<br> zlabel('output')            输出都一样，只是此时需要把x,y坐标轴对换</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/50/38/vYmwtR2h_o.jpg"></p> 
</blockquote> 
<p><strong> root-locus analysis</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/d7/88/U6VQvbfX_o.jpg" width="1200"></p> 
<p><strong>r=locus(num,den)</strong></p> 
<p><strong> plot(r,'--')</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/d3/a1/oxXdAAe9_o.jpg" width="1200"></p> 
<blockquote> 
 <p></p> 
 <p>num=[1 3]</p> 
 <p>a=[1 1 0]<br> b=[1 4 16]<br><strong>c=conv(a,b)</strong><br> den=[1 5 20 16 0]<br> sys=tf(num,den)<br><strong>r=rlocus(num,den)</strong><br> v=[-6 6 -6 6]<br><strong>pzmap(sys)</strong><br> hold on<br><strong>plot(r,'r-')</strong><br> grid<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/65/30/xRAcH3CA_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="934" src="https://images2.imgbox.com/0e/ba/C9aJkgSk_o.jpg" width="1200"></p> 
<blockquote> 
 <p>num=[1]<br> den=conv([1 0],conv([1 0.5],[1 0.6 10]))<br> sys=tf(num,den)<br> pzmap(num,den)<br> hold on<br> r=rlocus(num,den)<br> plot(r,'r-')<br> v=[-6 6 -6 6]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/eb/ae/o7LHEIM4_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> num=[1]<br> den=conv([1 0],conv([1 0.5],[1 0.6 10]))<br> sys=tf(num,den)<br> pzmap(num,den)<br> hold on<br><strong>k1=0:0.2:20</strong><br><strong>r1=rlocus(num,den,k1)</strong><br> plot(r1,'r-')<br><strong>k2=[20:0.1:30]<br> k3=[30:0.5:1000]<br> r2=rlocus(num,den,k2)<br> r3=rlocus(num,den,k3)</strong><br> plot(r2,'g--')<br> plot(r3,'b-')<br> v=[-6 6 -6 6]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9d/89/jHz42tMU_o.jpg"></p> 
</blockquote> 
<p></p> 
<blockquote> 
 <p> A=[0 1 0;0 0 1;-160 -56 -14]<br> B=[0;1;-14]<br> C=[1 0 0]<br> D=[0]<br><strong>k=0:0.1:400<br> r=rlocus(A,B,C,D,k)</strong><br> plot(r,'g-')<br> hold on<br><strong>pzmap(A,B,C,D)</strong><br> v=[-16 1 -8 8]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ae/4b/FqoOSB4R_o.jpg"></p> 
</blockquote> 
<p><strong> asymptotes：渐近线</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/f5/38/clfqMiCR_o.jpg" width="1200"></p> 
<p><strong>渐近线是s-∞大时的根轨迹</strong></p> 
<p><img alt="\lim_{s\rightarrow\infty }\frac{k}{s^3+3s^2+2s}=\lim_{s\rightarrow\infty }\frac{k}{s^3+3s^2+3s+1}=\frac{k}{(s+1)^3}" class="mathcode" src="https://images2.imgbox.com/f6/97/cFlb0bNJ_o.png"></p> 
<blockquote> 
 <p>num=[1]<br><strong>den=conv([1 1],conv([1 1],[1 1]))</strong><br> r=rlocus(num,den)<br> plot(r,'b--')<br> hold on</p> 
 <p>num1=[1]<br> den1=conv([1 0],conv([1 1],[1 2]))<br><strong>pzmap(num1,den1)</strong><br> hold on<br><strong>r2=rlocus(num1,den1)</strong><br> plot(r2,'r-')<br> v=[-8 8 -8 8]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5e/5c/FRNe3mXS_o.jpg"></p> 
 <p></p> 
 <p>num=[1]<br> den=conv([1 1],conv([1 1],[1 1]))<br> r=rlocus(num,den)</p> 
 <p>num1=[1]<br> den1=conv([1 0],conv([1 1],[1 2]))<br> r2=rlocus(num1,den1)<br><strong>plot([r r2])</strong><br> v=[-8 8 -8 8]<br> axis(v)</p> 
 <p><span style="color:#fe2c24;">错误使用 horzcat<br> 要串联的数组的维度不一致。</span></p> 
 <p><span style="color:#fe2c24;">&gt;&gt;为了保证r和r2矩阵的维度一致，需要增加k的变化</span></p> 
 <p><span style="color:#0d0016;">num=[1]<br> den=conv([1 1],conv([1 1],[1 1]))<br><strong>k=[0:0.01:100]</strong><br><strong>r=rlocus(num,den,k)</strong></span></p> 
 <p><span style="color:#0d0016;">num1=[1]<br> den1=conv([1 0],conv([1 1],[1 2]))<br><strong>r2=rlocus(num1,den1,k)</strong><br> plot([r r2])<br> v=[-8 8 -8 8]<br> axis(v)</span></p> 
 <p><span style="color:#0d0016;"><img alt="" height="470" src="https://images2.imgbox.com/46/b0/uj4lFtjD_o.jpg" width="626"></span></p> 
 <p>num=[1]<br> den=conv([1 1],conv([1 1],[1 1]))<br><strong>k1=[0:0.01:100]<br> k2=[100:0.2:400]<br> k3=[400:0.5:600]<br> k=[k1 k2 k3]<br> r=rlocus(num,den,k)</strong></p> 
 <p>num1=[1]<br> den1=conv([1 0],conv([1 1],[1 2]))<br> pzmap(num1,den1)<br> hold on<br> r2=rlocus(num1,den1,k)<br><strong>plot([r r2])</strong><br> v=[-8 8 -8 8]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d0/e4/ZVfk4LrL_o.jpg"></p> 
</blockquote> 
<p><img alt="" height="848" src="https://images2.imgbox.com/69/9b/csgObrSP_o.jpg" width="1200"></p> 
<blockquote> 
 <p> num=conv([1 2],[1 2])<br> den=conv([1 0 4],conv([1 5],[1 5]))<br> r=rlocus(num,den)<br> pzmap(num,den)<br> hold on<br> plot(r,'g-')<br> axis([-8 8 -8 8])</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c1/fb/Fturuf6D_o.jpg"></p> 
</blockquote> 
<p><strong> sgrid([a b...],[c d ...]):绘图，显示阻尼比和无阻尼振荡频率</strong></p> 
<blockquote> 
 <p> sgrid([0.5,0.707],[0.5 1 2])<br> v=[-3 3 -3 3]<br> axis(v)<br> axis('square')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e1/37/amxYzhsQ_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/5a/51/yYBaPG56_o.jpg" width="1200"></p> 
<blockquote> 
 <p> num=[0 0 0 1];<br> den=[1 4 5 0]<br> pzmap(num,den)<br> hold on<br> r=rlocus(num,den)<br> plot(r,'g-')<br> sgrid([0.5 0.7],[0.5 1 2])<br> v=[-3 3 -3 3]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/bd/56/GcLjq8XL_o.jpg"></p> 
 <p><strong>sgrid(0.5,[])：只显示一部分</strong></p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f7/cb/zzRU9qAr_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/4b/b6/xB49mMdu_o.jpg" width="1200"></p> 
<blockquote> 
 <p>num=[1 2]<br> den=[1 9 8 0]<br> pzmap(num,den)<br> hold on<br> r=rlocus(num,den)<br> plot(r,'r-')<br> v=[-10 10 -10 10]<br> axis(v)<br> sgrid<br> title('r-locus')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/26/61/w0iC4HKj_o.jpg"></p> 
</blockquote> 
<p><strong>[k,r]=rlocfind(num,den)或者[k,r]=rclofind(A,B,C,D)：</strong>寻找根轨迹中某一个特定点处的k值、以及其他的极点。</p> 
<blockquote> 
 <p> [k,r]=rlocfind(num,den)</p> 
 <p>&gt;&gt; [k,r]=rlocfind(num,den)<br> Select a point in the graphics window</p> 
 <p>selected_point =</p> 
 <p>  -4.6023 - 0.0496i</p> 
 <p><br> k =</p> 
 <p>   21.6480</p> 
 <p><br> r =</p> 
 <p>  -4.6018 + 0.0000i<br>   -2.1991 + 2.1383i<br>   -2.1991 - 2.1383i</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/d2/21/f3Q6ICP1_o.jpg" width="1200"></p> 
<blockquote> 
 <p> num=[1]<br> den=[1 4 5 0]<br> pzmap(num,den)<br> hold on<br> r=rlocus(num,den)<br> plot(r,'g-')<br> v=[-5 5 -5 5]<br> axis(v)<br> sgrid<br> [k,r]=rlocfind(num,den)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b5/13/TpLa01Bl_o.jpg"></p> 
 <p> &gt;&gt;</p> 
 <p>Select a point in the graphics window</p> 
 <p>selected_point =</p> 
 <p>  -0.7292 + 0.8685i</p> 
 <p><br> k =</p> 
 <p>    3.2739</p> 
 <p><br> r =</p> 
 <p>  -2.5383 + 0.0000i<br>   -0.7308 + 0.8693i<br>   -0.7308 - 0.8693i</p> 
</blockquote> 
<p> <img alt="" height="999" src="https://images2.imgbox.com/fc/dd/II8JrMyW_o.jpg" width="1200"></p> 
<blockquote> 
 <p><strong>绘制根轨迹是根据开环传递函数来的，而响应是对于某一个系统即闭环传递函数来的。</strong></p> 
 <p></p> 
 <p>num1=[1 2]<br> den1=[1 4 0]<br> subplot(2,2,1)<br> pzmap(num1,den1)<br> hold on<br> r1=rlocus(num1,den1)<br> plot(r1,'g-')</p> 
 <p><br> num=[-1 2]<br> den=[1 4 0]<br> subplot(2,2,2)<br> pzmap(num,den)<br> hold on<br> r2=rlocus(num,den)<br> plot(r2,'r-')<br> v=[-5 5 -5 5]<br> axis(v)</p> 
 <p>sys=tf(num1,den1)<br> sys1=feedback(sys,1,-1)<br> sys2=tf(num,den)<br> sys3=feedback(sys2,1,-1)<br> t=0:0.01:10<br> y1=step(sys1,t)<br> y2=step(sys3,t)<br> subplot(2,2,3)<br> plot(t,y1)</p> 
 <p>subplot(2,2,4)<br> plot(t,y2)<br><br><img alt="" src="https://images2.imgbox.com/83/16/c8lAUabS_o.jpg"></p> 
</blockquote> 
<p><strong> 绘制参数在特定变化范围内的根轨迹：</strong></p> 
<blockquote> 
 <p>num=[1 2 4]<br> den=conv([1 0],conv([1 4],conv([1 6],[1 1.4 1])))<br><strong>k1=[0:0.001:12]<br> k2=[73:0.5:154]<br> k=[k1 k2]</strong><br> pzmap(num,den)<br> hold on<br><strong>r=rlocus(num,den,k)</strong><br> plot(r,'r-')<br> v=[-5 5 -5 5]<br> axis(v)<br> grid<br><img alt="" src="https://images2.imgbox.com/0a/e6/dpPC5wRs_o.jpg"></p> 
</blockquote> 
<p><strong> pade近似：</strong>可以<strong>用一个多项式的传递函数对特定周期的延迟时间进行近似</strong></p> 
<p><strong>pade(a,b):a表示延迟时间,b表示近似阶数</strong></p> 
<blockquote> 
 <p>T=0.1<br> [num,den]=pade(0.1,3)<br> sys=tf(num,den)</p> 
 <p>&gt;&gt;</p> 
 <p>sys =<br>  <br>   -s^3 + 120 s^2 - 6000 s + 1.2e05<br>   --------------------------------<br>   s^3 + 120 s^2 + 6000 s + 1.2e05<br>  <br> Continuous-time transfer function.</p> 
 <p><strong><img alt="e^{-0.1s}=\frac{-s^3+120s^2-6000s+120000}{s^3+120s^2+6000s+120000}" class="mathcode" src="https://images2.imgbox.com/0f/a3/wBgV0hpR_o.png"></strong></p> 
</blockquote> 
<p> specification：规定、规范</p> 
<p></p> 
<p><strong>requency-response anaylysis</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/62/d6/CrZUbTMq_o.jpg" width="1192"></p> 
<p> <img alt="" height="691" src="https://images2.imgbox.com/36/77/50Eummto_o.jpg" width="1200"></p> 
<p><strong>mag就是普通的单位，要绘制伯德图的话，需要计算L(w)=20*log10(mag)</strong></p> 
<p><strong>semilogx(w,20*log10(mag)):才能获得正确的伯德图</strong></p> 
<p><img alt="" height="686" src="https://images2.imgbox.com/e5/a1/WshquJ6E_o.jpg" width="1200"> <img alt="" height="1000" src="https://images2.imgbox.com/65/21/p1htbYZR_o.jpg" width="1200"></p> 
<p><strong> 用w=logspace(a,b):产生w的段位10^a~~10^b之间的50个点，或者w=logspace(a,b,n):产生n个点</strong></p> 
<blockquote> 
 <p>num=[25]<br> den=[1 4 25]<br> bode(num,den)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/66/91/6ik9ZVLx_o.jpg"></p> 
 <p> num=[25]<br> den=[1 4 25]<br><strong>w=logspace(-1,3)<br> bode(num,den,w)</strong></p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/98/c3/4PFL0ZAs_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> num=[9 1.8 9]<br> den=[1 1.2 9 0]</p> 
 <p>[mag,phase,w]=bode(num,den,w)<br> w=logspace(-2,3,100)<br> [mag,phase,w]=bode(num,den,w)              并不会有图像生成</p> 
 <p><strong>magdB=20*log10(mag)<br> dBmax=50*ones(1,100)<br> dBmin=-50*ones(1,100)</strong></p> 
 <p><strong>semilogx(w,magdB,'o',w,magdB,'-',w,dBmax,'-',w,dBmin,'-')</strong></p> 
 <p>grid<br> title('Bode diagram')<br> xlabel('frequency(rad/sec)')<br> ylabel('gain dB')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/46/21/vX2vSsSy_o.jpg"></p> 
 <p><strong> pmax=150*ones(1,100)<br> pmin=-150*ones(1,100)<br> semilogx(w,phase,'o',w,phase,'-',w,pmax,'-',w,pmin,'-')</strong></p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9c/5c/yhc1tjSJ_o.jpg"></p> 
</blockquote> 
<p> bode(A,B,C,D):会产生多个伯德图</p> 
<blockquote> 
 <p> A=[0 1;-25 -4]<br> B=[0;25]<br> C=[1 0]<br> D=0<br><strong>bode(A,B,C,D)/bode(A,B,C,D,1)</strong></p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1e/c8/ZAcOyVei_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/86/fa/Z4AvsVMs_o.jpg" width="1200"></p> 
<blockquote> 
 <p> A=[0 1;-25 -4]<br> B=[1 1;0 1]<br> C=[1 0;0 1]<br> D=0<br><strong>bode(A,B,C,D)</strong></p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f5/95/PiJiSPn6_o.jpg"></p> 
 <p><strong> bode(A,B,C,D,iu):绘制第iu个输入对全部输出的bode图</strong></p> 
 <p>bode(A,B,C,D,1)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b8/01/7PKm4jIb_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/d9/1a/9MYoI8pE_o.jpg" width="1200"></p> 
<blockquote> 
 <p> k=[1 10 20]<br> for i=1:3<br>     num=[k(i)]<br>     den=conv([1 0],conv([1 1],[1 5]))<br>     sys=tf(num,den)<br>     sys1=feedback(sys,1,-1)<br><strong>    [mag,phase,w]=bode([k(i)],[1 6 5 k(i)],w)</strong><br>     subplot(1,2,1)<br>     magdB=20*log10(mag)<br>     <strong>semilogx</strong>(w,magdB)<br>     hold on<br>     subplot(1,2,2)<br>     semilogx(w,phase)<br>     hold on<br> end</p> 
 <p><span style="color:#fe2c24;"><strong>行不通，mag始终是一个三维数组。？？？？？？？？？？</strong></span></p> 
 <p>w=logspace(-1,2,200)<br> for i=1:3<br><strong>    if i==1;k=1;[mag,phase,w]=bode([k],[1 6 5 k],w);<br>         mag1dB=20*log10(mag);phase1=phase;end<br>     if i==2;k=2;[mag,phase,w]=bode([k],[1 6 5 k],w);<br>         mag2dB=20*log10(mag);phase2=phase;end<br>     if i==3;k=3;[mag,phase,w]=bode([k],[1 6 5 k],w);<br>         mag3dB=20*log10(mag);phase3=phase;end</strong><br> end<br> semilogx(w,mag1dB,'-',w,mag2dB,'-',w,mag3dB,'-')<br> grid<br> gtext('k=1')<br> gtext('k=2')<br> gtext('k=3')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0e/97/wbvrEXf1_o.jpg"></p> 
 <p>semilogx(w,phase1,'-',w,phase2,'-',w,phase3,'-')<br> grid<br> gtext('k=1')<br> gtext('k=2')<br> gtext('k=3')</p> 
 <p><img alt="" src="https://images2.imgbox.com/cc/49/KtIyInSw_o.jpg">用subplot绘制：</p> 
 <p><img alt="" src="https://images2.imgbox.com/d0/ae/slKvrF4F_o.jpg"></p> 
</blockquote> 
<p><strong>奈奎斯特图： </strong></p> 
<blockquote> 
 <p><img alt="" height="999" src="https://images2.imgbox.com/29/75/281QVwnX_o.jpg" width="1200"></p> 
</blockquote> 
<p> <strong>此时只能生成re,im,w的矩阵，并不会有曲线生成</strong><img alt="" height="1000" src="https://images2.imgbox.com/97/2e/hDZfn0YF_o.jpg" width="1200"></p> 
<blockquote> 
 <p> num=[1] <br> den=[1 0.8 1]<br> nyquist(num,den)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/09/28/CQRSJekO_o.jpg"></p> 
 <p><strong> v=[-2 2 -2 2]<br> axis(v)</strong><br> title('nyquist map')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/23/c9/Rkb8MhZ8_o.jpg"></p> 
 <p> <strong>合理改变坐标轴的范围，可以获得有用的信息</strong></p> 
</blockquote> 
<blockquote> 
 <p>num=[1] <br> den=[1 1 0]<br><strong>w=0.1:0.1:100<br> [re,im,w]=nyquist(num,den,w)<br> plot(re,im)</strong><br> v=[-2 2 -2 2]<br> grid<br> axis(v)<br> title('nyquist map')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/dc/94/Htom4aF0_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> A=[0 1;-25 -4]<br> B=[0;25]<br> C=[1 0]<br> D=0<br><strong>nyquist(A,B,C,D)</strong></p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/84/ac/R3Y8MOxi_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> A=[-1 -1;6.5 0]<br> B=[1 1;1 0]<br> C=[1 0;0 1]<br> D=0<br> nyquist(A,B,C,D)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f8/85/sGetFGMb_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p> num=[20 20 20*0.5]<br> den=conv([1 0],conv([1 1],[1 10]))<br> w1=0.1:0.1:10<br> w2=10:0.1:100<br> w3=100:0.1:400<br> w=[w1 w2 w3]<br> [re,im,w]=nyquist(num,den,w)<br> plot(re,im)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f0/9b/L4g3Fy0G_o.jpg"></p> 
</blockquote> 
<p><strong>找出特定点处对应的实部虚部、幅值、相角</strong></p> 
<blockquote> 
 <p> <img alt="" height="1000" src="https://images2.imgbox.com/9e/34/htegahkh_o.jpg" width="1200"></p> 
 <p> num=[20 20 20*0.5]<br> den=conv([1 0],conv([1 1],[1 10]))<br> w1=0.1:0.1:10<br> w2=10:0.1:100<br> w3=100:0.1:400<br> w=[w1 w2 w3]<br> [re,im,w]=nyquist(num,den,w)<br> plot(re,im)<br> hold on<br><strong>w1=[0.2 0.3 0.5 1 2 6 10 20]<br> [re,im,w]=nyquist(num,den,w1)<br> plot(re,im,'o')</strong><br> v=[-2 2 -2 2]<br> axis(v)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/cf/25/omj7SW2x_o.jpg"></p> 
 <p><strong> [re,im]</strong><br> &gt;&gt;</p> 
 <p>&gt;&gt; [re,im]</p> 
 <p>ans =</p> 
 <p>    0.9419   -4.8265<br>     0.9899   -3.0878<br>     1.1172   -1.6559<br>     1.4356   -0.6436<br>     1.7115   -0.4423<br>     1.4487   -0.8737<br>     0.9946   -0.9955<br>     0.3995   -0.7990</p> 
 <p><strong>[mag,phase,w]=bode(num,den,w1)<br> [mag,phase,w]</strong></p> 
 <p>&gt;&gt;</p> 
 <p>ans =</p> 
 <p>    4.9176  -78.9571    0.2000<br>     3.2426  -72.2244    0.3000<br>     1.9975  -55.9925    0.5000<br>     1.5733  -24.1455    1.0000<br>     1.7678  -14.4898    2.0000<br>     1.6918  -31.0946    6.0000<br>     1.4072  -45.0285   10.0000<br>     0.8933  -63.4385   20.0000</p> 
</blockquote> 
<blockquote> 
 <p> <img alt="" height="999" src="https://images2.imgbox.com/95/0f/wIzDuiqI_o.jpg" width="1200"></p> 
 <p> k=[1 7.5 20]<br><strong>for i=1:3<br>     if i==1;k=1;num=[10*k];den=conv([1 0],conv([1 5],[0.1 1]));[re1,im1]=nyquist(num,den)<br>         end<br>     if i==2;k=7.5;num=[10*k];den=conv([1 0],conv([1 5],[0.1 1]));[re2,im2]=nyquist(num,den)    <br>         end<br>     if i==3;k=20;num=[10*k];den=conv([1 0],conv([1 5],[0.1 1]));[re3,im3]=nyquist(num,den)<br>         end  </strong><br> end<br><strong>plot(re1,im1,'r-',re2,im2,'g-',re3,im3,'b-')</strong><br> axis([-20 1 -20 20])<br> gtext('k=1')<br> gtext('k=7.5')<br> gtext('k=20')</p> 
 <p><span style="color:#fe2c24;"><strong>？？？？？？？代码始终运行不完</strong></span></p> 
</blockquote> 
<p><img alt="" height="597" src="https://images2.imgbox.com/c7/8d/oXJGwHnq_o.jpg" width="1200"></p> 
<blockquote> 
 <p> num=[20 20]<br> den=conv([0 1 0],conv([0 1 5],[1 2 10]))<br> sys=tf(num,den)<br> bode(sys)<br> hold on<br> [Gm,Pm,wcp,wcg]=margin(sys)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9d/1f/UEJECrm1_o.jpg"></p> 
 <p> &gt;&gt;<br>  </p> 
 <p>Gm =</p> 
 <p>    3.1369</p> 
 <p><br> Pm =</p> 
 <p>  103.6573</p> 
 <p><br> wcp =</p> 
 <p>    4.0132</p> 
 <p><br> wcg =</p> 
 <p>    0.4426</p> 
</blockquote> 
<p><strong>matlab approach to state-space design of control system</strong></p> 
<p><strong>acker()：</strong>进行极点配置是基于艾克尔曼公式来的，其只能用于<strong>单输入</strong>的系统</p> 
<p><strong>place(A,B,p)</strong>:<strong>缺点p的秩不能比B的秩大或者等于</strong>。</p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/7a/93/WBRNtPsq_o.jpg" width="1200"></p> 
<blockquote> 
 <p> A=[0 1 0;0 0 1;-1 -5 -6]<br> B=[0;0;1]<br> p=[-2+4j -2-4j -10]<br> l=rank(ctrb(A,B))<br><strong>k=place(A,B,p)<br> k2=acker(A,B,p)</strong></p> 
 <p>&gt;&gt;<br>  </p> 
 <p>l =</p> 
 <p>     3</p> 
 <p><br> k =</p> 
 <p>  199.0000   55.0000    8.0000</p> 
 <p><br> k2 =</p> 
 <p>   199    55     8</p> 
 <p><strong>引入的状态反馈是u=-kx</strong></p> 
</blockquote> 
<blockquote> 
 <p>A=[0 1 0;0 0 1;-1 -5 -6]<br> B=[0;0;1]<br> C=[1 0 0]<br> D=0<br> t=0:0.1:10<br> x0=[1;0;0]</p> 
 <p><strong>[y,x]=initial(A,B,C,D,x0,t)</strong><br> subplot(2,2,1)<br> plot(t,x(:,1))<br> subplot(2,2,2)<br> plot(t,x(:,2))<br> subplot(2,2,3)<br> plot(t,x(:,3))</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3d/28/Hv5iEuIC_o.jpg"></p> 
 <p> A=[0 1 0;0 0 1;-1 -5 -6]<br> B=[0;0;1]<br> C=[1 0 0]<br> D=0<br> t=0:0.1:20<br> x0=[1;0;0]<br> k=[199 55 8]<br> A2=A-B*k<br> B2=[0;0;0]<br><strong>[y,x]=initial(A,B,C,D,x0,t)<br> [y2,x2]=initial(A2,B2,C,D,x0,t)</strong><br> subplot(2,2,1)<br> plot(t,x(:,1),'b-',t,x2(:,1),'r-')<br> subplot(2,2,2)<br> plot(t,x(:,2),'b-',t,x2(:,2),'r-')<br> subplot(2,2,3)<br> plot(t,x(:,3),'b-',t,x2(:,3),'r-')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c8/55/gsI8s7qk_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p><strong>矩阵C,D并不会影响状态反馈增益矩阵K</strong></p> 
<blockquote> 
 <p>A=[0 1 0;0 0 1;-6 -11 -6]<br> B=[0;0;10]<br> p=[-2+2*sqrt(3)*j -2-2*sqrt(3)*j -10]<br> l=rank(ctrb(A,B))<br><strong>k=place(A,B,p)<br> k2=acker(A,B,p)</strong></p> 
 <p>&gt;&gt;</p> 
 <p>l =</p> 
 <p>     3</p> 
 <p><br> k =</p> 
 <p>   15.4000    4.5000    0.8000</p> 
 <p><br> k2 =</p> 
 <p>   15.4000    4.5000    0.8000</p> 
</blockquote> 
<p>以上极点配置时，都是假设完全可控的系统中所有的状态变量都是可以用来反馈的。但在实际上，并不是所有的状态变量都能用来反馈，因此我们需要对不能反馈的状态变量进行观测。<strong>设计状态观测器-</strong>--</p> 
<p>但对于输出我们总是能够观测到，所以与输出有关的状态变量不需要额外设计状态观测器，因此总的需要观<strong>测状态变量的个数位n-m，n为状态向量的维数，m为输出向量的维数。</strong></p> 
<p><strong>全维观测器：</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/36/95/gJawBop1_o.jpg" width="1200"></p> 
<p> 状态观测的两个关键点在于：‘复制’、‘反馈’</p> 
<p><img alt="" height="999" src="https://images2.imgbox.com/e6/e3/YwR5IEPa_o.jpg" width="1200"></p> 
<p></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/cb/a3/Eh3me8NN_o.jpg" width="1200"><strong> L=acker(A',C',P)'               L=place(A',C',P)'</strong></p> 
<p>P是状态观测器的期望极点</p> 
<p><strong>降维观测器：</strong></p> 
<p><strong>L=acker(Abb',Aab',P)'           L=place(Abb',Aab',P)' </strong></p> 
<p><img alt="" height="999" src="https://images2.imgbox.com/fa/4d/nFjHh3OH_o.jpg" width="1200"></p> 
<p>   </p> 
<p><strong>状态反馈增益矩阵：</strong></p> 
<blockquote> 
 <p>A=[0 1 0;0 0 1;-6 -11 -6]<br> B=[0;0;1]<br> p=[-2+2*sqrt(3)*j -2-2*sqrt(3)*j -6]<br> l=rank(ctrb(A,B))<br> k=place(A,B,p)</p> 
 <p>&gt;&gt;</p> 
 <p>l =</p> 
 <p>     3</p> 
 <p><br> k =</p> 
 <p>   90.0000   29.0000    4.0000</p> 
</blockquote> 
<p> 设置观测器，由于y=cx,所以x1是可以观测到的，只需要观测x2,x3-设置降维观测器</p> 
<p><img alt="" height="873" src="https://images2.imgbox.com/20/91/biWRec9n_o.jpg" width="1200"></p> 
<blockquote> 
 <p> Abb=[0 1;-11 -6]<br> A1=Abb'<br> Aab=[1 0]<br> A2=Aab'<br> p=[-10 -10]<br> k=acker(A1,A2,p)<br> L=k'</p> 
 <p>&gt;&gt;</p> 
 <p>k =</p> 
 <p>    14     5</p> 
 <p><br> L =</p> 
 <p>    14<br>      5</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/28/d3/vQeECLbp_o.jpg" width="1200"></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/8b/46/Y3RBzUKz_o.jpg" width="1200"> <img alt="" height="668" src="https://images2.imgbox.com/50/e2/QT2BDqHr_o.jpg" width="650"></p> 
<blockquote> 
 <p>A=[0 0 1 0;0 0 0 1;-36 36 0.6 -0.6;18 -18 0.3 -0.3]<br> B=[0;0;1;0]<br> C=[1 0 0 0;0 1 0 0]<br> D=0</p> 
 <p>l=rank(ctrb(A,B))<br> P=[-2+2*sqrt(3)*j -2-2*sqrt(3)*j -10 -10]<br> K=acker(A,B,P)</p> 
 <p>&gt;&gt;</p> 
 <p>K =</p> 
 <p>  130.4444  -41.5556   24.3000   14.2185</p> 
 <p><img alt="" height="263" src="https://images2.imgbox.com/84/a2/hbPQeRb1_o.jpg" width="611"></p> 
 <p> Aab=[1 0;0 1]<br> Abb=[0.6 -0.6;0.3 -0.3]<br> P2=[-15 -16]<br> L=place(Abb',Aab',P2)'</p> 
 <p>&gt;&gt;<br>  </p> 
 <p>L =</p> 
 <p>   15.6000   -0.6000<br>     0.3000   15.7000</p> 
</blockquote> 
<p><img alt="" height="427" src="https://images2.imgbox.com/b3/ab/bYSvrxFA_o.jpg" width="511"></p> 
<p></p> 
<blockquote> 
 <p><strong> F=[0 0;0 0;1 0;0 1]</strong><br><strong>AA=[A-B*K B*K*F;zeros(2,4) Abb-L*Aab]<br> sys=ss(AA,eye(6),eye(6),eye(6))<br> t=0:0.1:4</strong><br> x0=[0.1 0 0 0 0.1 0.05]<br><strong>x=initial(sys,x0,t)                              <span style="color:#fe2c24;">[y,x]=initial(A,B,C,D,x0,t):要分清变量和输出曲线的对应？？？？？？？？？？？？？？？</span></strong><br> subplot(2,3,1)<br> plot(t,x(:,1)),grid,xlabel('t'),ylabel('x1')<br> subplot(2,3,2)<br> plot(t,x(:,2)),grid,xlabel('t'),ylabel('x2')<br> subplot(2,3,3)<br> plot(t,x(:,3)),grid,xlabel('t'),ylabel('x3')<br> subplot(2,3,4)<br> plot(t,x(:,4)),grid,xlabel('t'),ylabel('x4')<br> subplot(2,3,5)<br> plot(t,x(:,5)),grid,xlabel('t'),ylabel('e1')<br> subplot(2,3,6)<br> plot(t,x(:,6)),grid,xlabel('t'),ylabel('e2')</p> 
 <p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/9a/65/P2gIsfwQ_o.jpg"></p> 
</blockquote> 
<blockquote> 
 <p><strong> 未进行状态反馈时的零状态响应曲线：</strong></p> 
 <p>A=[0 0 1 0;0 0 0 1;-36 36 0.6 -0.6;18 -18 0.3 -0.3]<br> B=[0;0;1;0]<br> C=[1 0 0 0;0 1 0 0]<br> D=[0;0]<br> x0=[0.1 0 0 0]<br> t=0:0.1:10<br><strong>[y,x,t]=initial(A,B,C,D,x0,t)</strong><br> subplot(2,2,1)<br> plot(t,x(:,1)),grid,xlabel('t'),ylabel('x1')<br> subplot(2,2,2)<br> plot(t,x(:,2)),grid,xlabel('t'),ylabel('x2')<br> subplot(2,2,3)<br> plot(t,x(:,3)),grid,xlabel('t'),ylabel('x3')<br> subplot(2,2,4)<br> plot(t,x(:,4)),grid,xlabel('t'),ylabel('x4')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ae/d9/u3FJT5i5_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/f4/08/4dNAiPTs_o.jpg" width="1200"></p> 
<blockquote> 
 <p> A=[0 1;20.6 0]<br> B=[0;1]<br> C=[1 0]<br> P=[-1.8+2.4j -1.8-2.4j]<br> K=place(A,B,P)</p> 
 <p>&gt;&gt;</p> 
 <p>K =</p> 
 <p>   29.6000    3.6000</p> 
</blockquote> 
<blockquote> 
 <p><img alt="" height="1000" src="https://images2.imgbox.com/23/03/ZIentSxe_o.jpg" width="1200"></p> 
</blockquote> 
<p> <img alt="" height="720" src="https://images2.imgbox.com/d5/09/kS0WfYac_o.jpg" width="1200"></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/fe/73/C3UhwI7C_o.jpg" width="1200"></p> 
<p></p> 
<blockquote> 
 <p>P2=[-8 -8]<br> L=acker(A',C',P2)'</p> 
 <p>&gt;&gt;</p> 
 <p><br> L =</p> 
 <p>   16.0000<br>    84.6000</p> 
</blockquote> 
<p><strong>L就是Ke</strong></p> 
<p><img alt="" height="999" src="https://images2.imgbox.com/0c/2a/wMJ8K0Nf_o.jpg" width="1200"></p> 
<p> <img alt="" height="1169" src="https://images2.imgbox.com/7d/dc/H6BAM7cV_o.jpg" width="1000"></p> 
<blockquote> 
 <p></p> 
 <p>num=[1]<br> den=[1 0 -20.6]<br> sys1=tf(num,den)</p> 
 <p>num1=[778.2 3690.7]<br> den1=[1 19.6 151.2]<br> sys2=tf(num1,den1)<br> sys3=feedback(sys1,sys2,-1)</p> 
 <p>&gt;&gt;<br><img alt="\frac{Y(s)}{U(s)}" class="mathcode" src="https://images2.imgbox.com/77/1f/I6LSVNER_o.png"></p> 
 <p>sys3 =<br>  <br>              s^2 + 19.6 s + 151.2<br>   ------------------------------------------<br>   s^4 + 19.6 s^3 + 130.6 s^2 + 374.4 s + 576</p> 
</blockquote> 
<blockquote> 
 <p>A=[0 1;20.6 0]<br> K =[29.6000 3.6000]<br> L=[16;84.6]<br> B=[0;1]<br> C=[1 0]<br> AA=[A-B*K B*K;zeros(2,2) A-L*C]<br> x0=[1;0;0.5;0]<br> t=0:0.01:10<br> x=initial(AA,eye(4),eye(4),eye(4),x0,t)<br> subplot(2,2,1)<br> plot(t,x(:,1)),grid,xlabel('t'),ylabel('x1')<br> subplot(2,2,2)<br> plot(t,x(:,2)),grid,xlabel('t'),ylabel('x2')<br> subplot(2,2,3)<br> plot(t,x(:,3)),grid,xlabel('t'),ylabel('e1')<br> subplot(2,2,4)<br> plot(t,x(:,4)),grid,xlabel('t'),ylabel('e2')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3b/a5/pGMupRMW_o.jpg"></p> 
</blockquote> 
<p style="text-align:center;"><strong>基于降维观测器的状态反馈设计：</strong></p> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/a8/cd/m5coH3YA_o.jpg" width="1200"></p> 
<p> 解题步骤：</p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/b6/0c/41NUHZbo_o.jpg" width="1200"></p> 
<blockquote> 
 <p> A=[0 1 0;0 0 1;0 -24 -10]<br> B=[0;10;-80]<br> C=[1 0 0]<br> D=0<br> [num,den]=ss2tf(A,B,C,D)</p> 
 <p>&gt;&gt;<br>  </p> 
 <p>num =</p> 
 <p>         0         0   10.0000   20.0000</p> 
 <p><br> den =</p> 
 <p>    1.0000   10.0000   24.0000         0</p> 
 <p><img alt="\frac{Y(s)}{U(s)}=\frac{10s+20}{s^3+10s^2+24s}" class="mathcode" src="https://images2.imgbox.com/df/7f/0Lsc6JG4_o.png"></p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/8e/78/35MiEN99_o.jpg" width="1200"></p> 
<blockquote> 
 <p> P=[-1+2j -1-2j -5]<br> K=acker(A,B,P)</p> 
 <p>&gt;&gt;</p> 
 <p><br> K =</p> 
 <p>    1.2500    1.2500    0.1938</p> 
</blockquote> 
<blockquote> 
 <p>Aab=[1 0]<br> Abb=[0 1;-24 -10]<br> Pe=[-10 -10]<br> Ke=acker(Abb',Aab',Pe)'</p> 
 <p>&gt;&gt;</p> 
 <p>Ke =</p> 
 <p>    10<br>    -24<br>  </p> 
</blockquote> 
<p><img alt="" height="999" src="https://images2.imgbox.com/39/b8/R7efmVju_o.jpg" width="1200"></p> 
<blockquote> 
 <p> Aaa=[0]<br> Aba=[0;0]<br> Bb=[10;-80]<br> Ba=[0]<br> Ka=[1.25]<br> Kb=[1.25 0.1938]<br> Ahat=Abb-Ke*Aab<br> Bhat=Ahat*Ke+Aba-Ke*Aaa<br> Fhat=Bb-Ke*Ba<br> Atilde=Ahat-Fhat*Kb<br> Btilde=Bhat-Fhat*(Ka+Kb*Ke)<br> Ctilde=-Kb<br> Dtilde=-(Ka+Kb*Ke)<br> [num,den]=ss2tf(Atilde,Btilde,-Ctilde,-Dtilde)</p> 
 <p>&gt;&gt;</p> 
 <p>num =</p> 
 <p>    9.0988   73.4880  125.0000</p> 
 <p><br> den =</p> 
 <p>    1.0000   16.9960  -30.0400</p> 
 <p><img alt="\frac{U(s)}{-Y(s)}=\frac{9.1s^2+73.488s+125}{s^2+16.996s-30.04}" class="mathcode" src="https://images2.imgbox.com/f2/b9/nKB6TJci_o.png"></p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/74/2d/1Tyt1684_o.jpg" width="1200"></p> 
<blockquote> 
 <p> num=[10 20]<br> den=conv([1 0],conv([1 4],[1 6]))<br> sys1=tf(num,den)<br> num1=[9.1 73.5 125]<br> den1=[1 17 -30]<br> sys2=tf(num1,den1)<br> sys3=feedback(sys1,sys2,-1)</p> 
 <p>&gt;&gt;</p> 
 <p>sys3 =<br>  <br>             10 s^3 + 190 s^2 + 40 s - 600<br>   -------------------------------------------------<br>   s^5 + 27 s^4 + 255 s^3 + 1025 s^2 + 2000 s + 2500</p> 
 <p>&gt;&gt; pzmap(sys3)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7f/f1/UEzBEBaS_o.jpg"></p> 
 <p style="text-align:center;"> &gt;&gt; pzmap(sys2)<img alt="" src="https://images2.imgbox.com/18/e5/HKQo9CEY_o.jpg"></p> 
 <p> 虽然闭环系统是稳定的，但由于内部控制器不稳定，所以此时选择的极点是不符合要求的，因此需要重新选择极点进行配置。</p> 
 <p><strong>需要改变闭环极点的位置，或者观测器极点的位置，或者两者都要改变</strong></p> 
</blockquote> 
<p><img alt="" height="678" src="https://images2.imgbox.com/af/e2/hCXThKBh_o.jpg" width="1200"></p> 
<blockquote> 
 <p>Aab=[1 0]<br> Abb=[0 1;-24 -10]<br> Pe=[-4.5 -4.5]<br> Ke=acker(Abb',Aab',Pe)'</p> 
 <p>&gt;&gt;</p> 
 <p>Ke =</p> 
 <p>   -1.0000<br>     6.2500</p> 
</blockquote> 
<blockquote> 
 <p> Aaa=[0]<br> Aba=[0;0]<br> Bb=[10;-80]<br> Ba=[0]<br> Ka=[1.25]<br> Kb=[1.25 0.1938]<br> Ahat=Abb-Ke*Aab<br> Bhat=Ahat*Ke+Aba-Ke*Aaa<br> Fhat=Bb-Ke*Ba<br> Atilde=Ahat-Fhat*Kb<br> Btilde=Bhat-Fhat*(Ka+Kb*Ke)<br> Ctilde=-Kb<br> Dtilde=-(Ka+Kb*Ke)<br> [num,den]=ss2tf(Atilde,Btilde,-Ctilde,-Dtilde)</p> 
 <p>&gt;&gt;</p> 
 <p>num =</p> 
 <p>    1.2112   11.2137   25.3125</p> 
 <p><br> den =</p> 
 <p>    1.0000    5.9960    2.1295</p> 
 <p><img alt="\frac{U(s)}{-Y(s)}=\frac{1.2s^2+11.2s+25}{s^2+6s+2.12}" class="mathcode" src="https://images2.imgbox.com/5e/be/2WqQFkyA_o.png"></p> 
 <p>num=[10 20]<br> den=conv([1 0],conv([1 4],[1 6]))<br> sys1=tf(num,den)<br> num1=[1.2 11.2 25]<br> den1=[1 6 2.12]<br> sys2=tf(num1,den1)<br> pzmap(sys2)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c1/82/mPEoVHfK_o.jpg"></p> 
 <p> sys3=feedback(sys1,sys2,-1)<br> pzmap(sys3)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/af/de/HpLvV52K_o.jpg"></p> 
 <p> 此时系统不仅外部稳定而且内部也稳定</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/46/43/L20OeYgX_o.jpg" width="1200"></p> 
<blockquote> 
 <p> AA=[A-B*K B*Kb;<strong>zeros(2,3) </strong>Abb-Ke*Aab]<br> x0=[1 0 0 1 0]<br> t=0:0.01:10<br><strong>x=initial(AA,eye(5),eye(5),eye(5),x0,t)</strong><br> subplot(2,3,1)<br> plot(t,x(:,1)),grid,xlabel('t'),ylabel('x1')<br> subplot(2,3,2)<br> plot(t,x(:,2)),grid,xlabel('t'),ylabel('x2')<br> subplot(2,3,3)<br> plot(t,x(:,3)),grid,xlabel('t'),ylabel('x3')<br> subplot(2,3,4)<br> plot(t,x(:,4)),grid,xlabel('t'),ylabel('e1')<br> subplot(2,3,5)<br> plot(t,x(:,5)),grid,xlabel('t'),ylabel('e2')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/29/9f/BW5WUhSU_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p><strong>比较：</strong></p> 
<p> <img alt="" height="1200" src="https://images2.imgbox.com/df/e5/yGiZ9Bm4_o.jpg" width="1000">1、状态反馈增益矩阵：</p> 
<blockquote> 
 <p>A=[0 1;0 -2]<br> B=[0;4]<br> C=[1 0]<br> D=0<br> P=[-2+2*sqrt(3)*j -2-2*sqrt(3)*j]<br> K=acker(A,B,P)</p> 
 <p>&gt;&gt;</p> 
 <p>K =</p> 
 <p>    4.0000    0.5000</p> 
</blockquote> 
<p>2、全维观测器增益矩阵</p> 
<blockquote> 
 <p>Pe=[-8 -8]<br> Ke=acker(A',C',Pe)'</p> 
 <p>&gt;&gt;</p> 
 <p>Ke =</p> 
 <p>    14<br>     36</p> 
</blockquote> 
<p>零状态响应：</p> 
<blockquote> 
 <p>AA=[A-B*K B*K;zeros(2) A-Ke*C]<br> x0=[1 0 1 0]<br> t=0:0.01:10<br> x=initial(AA,eye(4),eye(4),eye(4),x0,t)<br> subplot(2,2,1)<br> plot(t,x(:,1)),grid,xlabel('t'),ylabel('x1')<br> subplot(2,2,2)<br> plot(t,x(:,2)),grid,xlabel('t'),ylabel('x2')<br> subplot(2,2,3)<br> plot(t,x(:,3)),grid,xlabel('t'),ylabel('e1')<br> subplot(2,2,4)<br> plot(t,x(:,4)),grid,xlabel('t'),ylabel('e2')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/26/05/H6wcv51p_o.jpg"></p> 
</blockquote> 
<p> 3、降维观测器增益矩阵</p> 
<blockquote> 
 <p>Aaa=[0]<br> Aab=[1]<br> Aba=[0]<br> Abb=[-2]<br> Ba=[0]<br> Bb=[4]<br> Pe=[-8]<br> Ke=acker(Abb',Aab',Pe)'</p> 
 <p>&gt;&gt;</p> 
 <p>Ke =</p> 
 <p>     6</p> 
</blockquote> 
<blockquote> 
 <p>AAA=[A-B*K B*Kb;zeros(1,2) Abb-Ke*Aab]<br> t=0:0.01:10<br> x0=[1 0 1]<br> x=initial(AAA,eye(3),eye(3),eye(3),x0,t)<br> subplot(1,3,1)<br> plot(t,x(:,1)),grid,xlabel('t'),ylabel('x1')<br> subplot(1,3,2)<br> plot(t,x(:,2)),grid,xlabel('t'),ylabel('x2')<br> subplot(1,3,3)<br> plot(t,x(:,3)),grid,xlabel('t'),ylabel('e')</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/3e/53/aWb0VRiJ_o.jpg"></p> 
 <p> 二者系统的bode图：<img alt="" height="1000" src="https://images2.imgbox.com/f0/61/ak75bX44_o.jpg" width="1200"></p> 
</blockquote> 
<p> 总结：</p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/bc/f1/MaHabZaZ_o.jpg" width="1200"></p> 
<p><img alt="" height="970" src="https://images2.imgbox.com/0b/4c/SjI1qPtr_o.jpg" width="1200"></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/a5/61/CRq9vqzO_o.jpg" width="1200"></p> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/2e/aa/GYaAI14I_o.jpg" width="1200"></p> 
<p> <img alt="" height="880" src="https://images2.imgbox.com/6e/44/BfBvCPfM_o.jpg" width="1200"></p> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/98/63/uNYslFL6_o.jpg" width="1200"></p> 
<p><strong>some optimization problems solved with matlab</strong></p> 
<p><img alt="" height="567" src="https://images2.imgbox.com/2d/cd/pAWKwyYK_o.jpg" width="1200"></p> 
<p></p> 
<blockquote> 
 <p></p> 
 <p>t=0:0.01:8<br><strong>for k=3:0.2:5<br>     for a=0.1:0.1:3</strong><br>     num=[4*k 8*k*a 4*k*a^2]<br>     den=[1 6 8+4*k 4+8*k*a 4*k*a^2]<br>     y=step(num,den,t)<br>     m=max(y)<br><strong>    if m&lt;1.15&amp;m&gt;1.10<br>         break                            结束内循环<br>     end<br>     if m&lt;1.15&amp;m&gt;1.10                              <br>         break                              结束外循环<br>     end<br>     end<br> end</strong><br> solution=[k a m]<br> plot(t,y)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9a/77/9m71LKZu_o.jpg"></p> 
 <p> &gt;&gt;</p> 
 <p>solution =</p> 
 <p>    5.0000    0.7000    1.1019</p> 
 <p>?????????为什么我仿真出来的值和课本里面仿真出来的不一样</p> 
 <p>应该是m符合这个区间要求的k和a有很多组值。</p> 
 <p>k=3,a=1;m=1.1469</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/41/5b/gp7opuwF_o.jpg" width="1200"></p> 
<blockquote> 
 <p> t=0:0.01:8<br> for k=[2:0.2:5]<br>     for a=[0.1:0.1:3]<br>     num=[4*k 8*k*a 4*k*a^2]<br>     den=[1 6 8+4*k 4+8*k*a 4*k*a^2]<br>     y=step(num,den,t)<br>     m=max(y)<br>     if m&lt;2.6 &amp; m&gt;2.55<br>         break<br>     end<br>     if m&lt;2.6 &amp; m&gt;2.55<br>         break<br>     end<br>     end<br> end<br> solution=[k a m]<br> plot(t,y)<br> grid</p> 
 <p>&gt;&gt;</p> 
 <p>solution =</p> 
 <p>    5.0000    3.0000  <strong>  2.9784</strong></p> 
 <p>此时求出来的m不满足条件，因此计算出来的结果并不是真实的解</p> 
 <p>这是因为当条件不满足时，直到循环结束了才跳出来，因此取得最终值就是k和a的临界值。</p> 
 <p>for k=[2:0.2:3 NaN]<br>     for a=[0.1:0.1:2 NaN]</p> 
 <p>&gt;&gt;</p> 
 <p>solution =</p> 
 <p>   NaN   NaN   NaN</p> 
 <p>NaN:表示在这个区间内，没有值满足要求</p> 
</blockquote> 
<p>因此在某个给定区间内，需要获得满足这一要求的所有的参数组的可行值。</p> 
<blockquote> 
 <p>t=0:0.01:8<br> for k=[3:0.2:5]<br>     for a=[0.1:0.1:3]<br>     num=[4*k 8*k*a 4*k*a^2]<br>     den=[1 6 8+4*k 4+8*k*a 4*k*a^2]<br>     y=step(num,den,t)<br>     m=max(y)<br>     if m&lt;1.2 &amp; m&gt;1.1<br>         break<br>     end<br>     if m&lt;1.2 &amp; m&gt;1.1<br>         break<br>     end<br>     end<br> end<br> solution=[k a m]<br> plot(t,y)<br> grid</p> 
 <p>&gt;&gt;</p> 
 <p>solution =</p> 
 <p>    5.0000    0.7000    1.1019           这有一个解</p> 
</blockquote> 
<blockquote> 
 <p>K=3:0.2:5<br> a=0.1:0.1:3<br> k=0<br> for i=1:11<br>     for j=1:30<br>         num=[4*K(i) 8*K(i)*a(j) 4*K(i)*a(j)^2]<br>         den=[1 6 8+4*K(i) 4+8*K(i)*a(j) 4*K(i)*a(j)^2]<br>         y=step(num,den,t)<br>         m=max(y)<br>         if m&lt;1.2&amp;m&gt;1.1<br>             k=k+1<br><strong>            solution(k,:)=[K(i) a(j) m]</strong><br>         end<br>     end<br> end<br>  </p> 
 <p>&gt;&gt; solution</p> 
 <p>solution =</p> 
 <p>    3.0000    1.0000    1.1469<br>     3.0000    1.1000    1.1979<br>     3.2000    0.9000    1.1065<br>     3.2000    1.0000    1.1581<br>     3.4000    0.9000    1.1181<br>     3.4000    1.0000    1.1688<br>     3.6000    0.9000    1.1291<br>     3.6000    1.0000    1.1791<br>     3.8000    0.9000    1.1396<br>     3.8000    1.0000    1.1888<br>     4.0000    0.8000    1.1003<br>     4.0000    0.9000    1.1497<br>     4.0000    1.0000    1.1982<br>     4.2000    0.8000    1.1107<br>     4.2000    0.9000    1.1594<br>     4.4000    0.8000    1.1208<br>     4.4000    0.9000    1.1687<br>     4.6000    0.8000    1.1304<br>     4.6000    0.9000    1.1776<br>     4.8000    0.8000    1.1396<br>     4.8000    0.9000    1.1862<br>     5.0000    0.7000    1.1019<br>     5.0000    0.8000    1.1485<br>     5.0000    0.9000    1.1945</p> 
</blockquote> 
<p><strong>sortsolution=sortrows(solution,3):对第三列，从小到大排列</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/c5/fa/WOvDr1bC_o.jpg" width="1200"></p> 
<blockquote> 
 <p> t=0:0.01:8<br> k=2:0.1:3<br> a=0.5:0.1:1.5<br> k1=0<br> for i=1:11<br>     for j=1:11<br>         num1=conv([k(i)],conv([1 a(j)],[1 a(j)]))<br>         den1=[1 0]<br>         sys1=tf(num1,den1)<br>         num2=[1.2]<br>         den2=[0.36 1.86 2.5 1]<br>         sys2=tf(num2,den2)<br>         sys3=series(sys1,sys2)<br>         sys4=feedback(sys3,1,-1)<br>         y=step(sys4,t)<br>         m=max(y)<br>  <strong>       if m&lt;1.1<br>             k1=k1+1<br>             solution(k1,:)=[k(i) a(j) m]</strong><br>         end<br>     end<br> end</p> 
 <p><br><strong>&gt;&gt; solution</strong></p> 
 <p>solution =</p> 
 <p>    2.0000    0.5000    0.9552<br>     2.0000    0.6000    0.9842<br>     2.0000    0.7000    0.9958<br>     2.0000    0.8000    0.9994<br>     2.0000    0.9000    1.0614<br>     2.1000    0.5000    0.9585<br>     2.1000    0.6000    0.9856<br>     2.1000    0.7000    0.9963<br>     2.1000    0.8000    1.0077<br>     2.1000    0.9000    1.0694<br>     2.2000    0.5000    0.9614<br>     2.2000    0.6000    0.9868<br>     2.2000    0.7000    0.9966<br>     2.2000    0.8000    1.0158<br>     2.2000    0.9000    1.0772<br>     2.3000    0.5000    0.9640<br>     2.3000    0.6000    0.9878<br>     2.3000    0.7000    0.9969<br>     2.3000    0.8000    1.0239<br>     2.3000    0.9000    1.0848<br>     2.4000    0.5000    0.9663<br>     2.4000    0.6000    0.9888<br>     2.4000    0.7000    0.9972<br>     2.4000    0.8000    1.0319<br>     2.4000    0.9000    1.0923<br>     2.5000    0.5000    0.9684<br>     2.5000    0.6000    0.9896<br>     2.5000    0.7000    0.9974<br>     2.5000    0.8000    1.0398<br>     2.5000    0.9000    1.0997<br>     2.6000    0.5000    0.9703<br>     2.6000    0.6000    0.9903<br>     2.6000    0.7000    0.9976<br>     2.6000    0.8000    1.0475<br>     2.7000    0.5000    0.9719<br>     2.7000    0.6000    0.9909<br>     2.7000    0.7000    0.9978<br>     2.7000    0.8000    1.0550<br>     2.8000    0.5000    0.9735<br>     2.8000    0.6000    0.9915<br>     2.8000    0.7000    1.0024<br>     2.8000    0.8000    1.0624<br>     2.9000    0.5000    0.9749<br>     2.9000    0.6000    0.9920<br>     2.9000    0.7000    1.0101<br>     2.9000    0.8000    1.0695<br>     3.0000    0.5000    0.9761<br>     3.0000    0.6000    0.9924<br>     3.0000    0.7000    1.0177<br>     3.0000    0.8000    1.0766</p> 
 <p><strong>&gt;&gt; sortsolution=sortrows(solution,3)</strong></p> 
 <p>sortsolution =</p> 
 <p>    2.0000    0.5000    0.9552<br>     2.1000    0.5000    0.9585<br>     2.2000    0.5000    0.9614<br>     2.3000    0.5000    0.9640<br>     2.4000    0.5000    0.9663<br>     2.5000    0.5000    0.9684<br>     2.6000    0.5000    0.9703<br>     2.7000    0.5000    0.9719<br>     2.8000    0.5000    0.9735<br>     2.9000    0.5000    0.9749<br>     3.0000    0.5000    0.9761<br>     2.0000    0.6000    0.9842<br>     2.1000    0.6000    0.9856<br>     2.2000    0.6000    0.9868<br>     2.3000    0.6000    0.9878<br>     2.4000    0.6000    0.9888<br>     2.5000    0.6000    0.9896<br>     2.6000    0.6000    0.9903<br>     2.7000    0.6000    0.9909<br>     2.8000    0.6000    0.9915<br>     2.9000    0.6000    0.9920<br>     3.0000    0.6000    0.9924<br>     2.0000    0.7000    0.9958<br>     2.1000    0.7000    0.9963<br>     2.2000    0.7000    0.9966<br>     2.3000    0.7000    0.9969<br>     2.4000    0.7000    0.9972<br>     2.5000    0.7000    0.9974<br>     2.6000    0.7000    0.9976<br>     2.7000    0.7000    0.9978<br>     2.0000    0.8000    0.9994<br>     2.8000    0.7000    1.0024<br>     2.1000    0.8000    1.0077<br>     2.9000    0.7000    1.0101<br>     2.2000    0.8000    1.0158<br>     3.0000    0.7000    1.0177<br>     2.3000    0.8000    1.0239<br>     2.4000    0.8000    1.0319<br>     2.5000    0.8000    1.0398<br>     2.6000    0.8000    1.0475<br>     2.7000    0.8000    1.0550<br>     2.0000    0.9000    1.0614<br>     2.8000    0.8000    1.0624<br>     2.1000    0.9000    1.0694<br>     2.9000    0.8000    1.0695<br>     3.0000    0.8000    1.0766<br>     2.2000    0.9000    1.0772<br>     2.3000    0.9000    1.0848<br>     2.4000    0.9000    1.0923<br>     2.5000    0.9000    1.0997</p> 
</blockquote> 
<blockquote> 
 <p> k=2<br>  a=0.7<br>  num1=conv([k],conv([1 a],[1 a]))<br> den1=[1 0]<br> sys1=tf(num1,den1)<br> num2=[1.2]<br> den2=[0.36 1.86 2.5 1]<br> sys2=tf(num2,den2)<br> sys3=series(sys1,sys2)<br> sys4=feedback(sys3,1,-1)<br> y=step(sys4,t)<br> plot(t,y)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f5/bb/UY9cO6bb_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="985" src="https://images2.imgbox.com/1f/14/Y0DEuQTT_o.jpg" width="1200"></p> 
<blockquote> 
 <p> t=0:0.01:8<br> k=3:0.2:5<br> a=0.1:0.2:3<br> k1=0<br> for i=1:11<br>     for j=1:15<br>         num1=conv([k(i)],conv([1 a(j)],[1 a(j)]))<br>         den1=[1 0]<br>         sys1=tf(num1,den1)<br>         num2=[1.2]<br>         den2=[0.36 1.86 2.5 1]<br>         sys2=tf(num2,den2)<br>         sys3=series(sys1,sys2)<br>         sys4=feedback(sys3,1,-1)<br>         y=step(sys4,t)<br>         m=max(y)<br>         s=801<br><strong>        while y(s)&gt;0.98&amp;y(s)&lt;1.02               调节时间是怎么定义的<br>             s=s-1<br>         end<br>         ts=(s-1)*0.01                        y(s):引用？？？？为什么要乘以0.01</strong><br>         if m&lt;1.15&amp;m&gt;1.10<br><strong>            k1=k1+1<br>             solution(k1,:)=[k(i) a(j) m ts]</strong><br>         end<br>     end<br> end</p> 
</blockquote> 
<blockquote> 
 <p> k=4.4<br>  a=0.7<br>  num1=conv([k],conv([1 a],[1 a]))<br> den1=[1 0]<br> sys1=tf(num1,den1)<br> num2=[1.2]<br> den2=[0.36 1.86 2.5 1]<br> sys2=tf(num2,den2)<br> sys3=series(sys1,sys2)<br> sys4=feedback(sys3,1,-1)<br> y=step(sys4,t)<br> plot(t,y)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5f/41/BTFaXd6M_o.jpg"></p> 
</blockquote> 
<p> <strong>Quadratic optimal control：二次型的最优控制</strong></p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/66/53/8RDpP1Wm_o.jpg" width="1200"></p> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/de/49/kzUadSKw_o.jpg" width="1054"></p> 
<p> 问题：</p> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/a4/ef/Z8vHiloW_o.jpg" width="1200"></p> 
<blockquote> 
 <p> A=[-1 1;0 2]<br> B=[1;0]<br> Q=[1 0;0 1]<br> R=[1]<br> K=lqr(A,B,Q,R)</p> 
 <p>&gt;&gt;</p> 
 <p>错误使用 lqr (第 42 行)<br> Cannot compute a stabilizing LQR gain (the Riccati solution S and gain matrix K are<br> infinite).<br> This could be because:<br>   * A has unstable modes that are not controllable through B,<br>   * Q,R,N values are too large,<br>   * [Q N;N' R] is indefinite,<br>   * The E matrix in the state equation is singular.</p> 
 <p>出错 main (第 7 行)<br> K=lqr(A,B,Q,R)<br>  </p> 
</blockquote> 
<blockquote> 
 <p>syms k1 k2 s<br> A=[-1 1;0 2]<br> B=[1;0]<br> k=[k1 k2]<br> I=eye(2)<br> det(s*I-A+B*k)</p> 
 <p>&gt;&gt;</p> 
 <p>ans =<br>  <br> (s - 2)*(k1 + s + 1)</p> 
 <p>不论k怎么去，闭环你系统始终有一个极点在s的右半平面，即系统始终不稳定。</p> 
 <p>因此这个系统不能使用最优控制</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/cb/c9/02yLYuUF_o.jpg" width="1200"></p> 
<blockquote> 
 <p> A=[0 1 0;0 0 1;-35 -27 -9]<br> B=[0;0;1]<br> Q=[1 0 0;0 1 0;0 0 1]<br> R=[1]<br><strong>[K,P,E]=lqr(A,B,Q,R)</strong></p> 
 <p>&gt;&gt;</p> 
 <p>K =</p> 
 <p>    0.0143    0.1107    0.0676</p> 
 <p><br> P =</p> 
 <p>    4.2625    2.4957    0.0143<br>     2.4957    2.8150    0.1107<br>     0.0143    0.1107    0.0676</p> 
 <p><br> E =</p> 
 <p>  -1.9859 + 1.7110i<br>   -1.9859 - 1.7110i<br>   -5.0958 + 0.0000i</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/17/c4/OG5MwrDp_o.jpg" width="1200"></p> 
<blockquote> 
 <p> AA=A-B*K<br> x0=[1;0;0]<br> t=0:0.1:10<br> eye(3,1)<br><strong>[y,x]=initial(AA,eye(3,1),eye(1,3),0,x0,t)</strong><br> subplot(1,3,1)<br> plot(t,x(:,1))<br> subplot(1,3,2)<br> plot(t,x(:,2))<br> subplot(1,3,3)<br> plot(t,x(:,3))</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e4/45/d42PRf9a_o.jpg"></p> 
</blockquote> 
<p> <img alt="" height="999" src="https://images2.imgbox.com/ad/85/cwjP48oF_o.jpg" width="1200"></p> 
<p> <img alt="" height="1000" src="https://images2.imgbox.com/b5/01/2WLLkaXZ_o.jpg" width="1200"></p> 
<p> 最优控制就相当于对于系统性能的评价方面，选定一个标量函数，当该标量函数最小的时候，就可以实现最优控制了，但实现的方法是通过状态反馈来实现的。</p> 
<blockquote> 
 <p>A=[0 1 0;0 0 1;0 -2 -3]<br> B=[0;0;1]<br> C=[1 0 0]<br> D=[0]<br> Q=[100 0 0;0 1 0;0 0 1]<br> R=[0.01]<br><strong>[k,P,E]=lqr(A,B,Q,R)</strong></p> 
 <p>&gt;&gt;<br>  </p> 
 <p>k =</p> 
 <p>  100.0000   53.1200   11.6711</p> 
 <p><br> P =</p> 
 <p>   55.1200   14.6711    1.0000<br>    14.6711    7.0267    0.5312<br>     1.0000    0.5312    0.1167</p> 
 <p><br> E =</p> 
 <p>  -2.2141 + 2.2047i<br>   -2.2141 - 2.2047i<br>  -10.2429 + 0.0000i</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/4e/58/OTgtApXE_o.jpg" width="1200"></p> 
<blockquote> 
 <p>AA=A-B*k<br> BB=100*B<br> t=0:0.01:10<br><strong>[y,x,t]=step(AA,BB,C,D,1,t)</strong><br> subplot(2,2,1)<br> plot(t,x(:,1))<br> subplot(2,2,2)<br> plot(t,x(:,2))<br> subplot(2,2,3)<br> plot(t,x(:,3))<br> subplot(2,2,4)<br> plot(t,y)</p> 
 <p><img alt="" src="https://images2.imgbox.com/b0/34/tMgOIWU8_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p>Appendix</p> 
<blockquote> 
 <p>num=[1 3]<br> den=[1 5 20 16 0]<br> rlocus(num,den)<br> v=[-6 6 -6 6]<br> axis(v)<br> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e4/0e/LSK2fw1k_o.jpg"></p> 
 <p> grid</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/21/cd/U0iQhX2X_o.jpg"></p> 
 <p>可以用两次grid命令去除栅格线</p> 
</blockquote> 
<p><img alt="" height="1000" src="https://images2.imgbox.com/37/03/NAkxMgkD_o.jpg" width="1200"></p> 
<blockquote> 
 <p>x1=[-6 4]<br> y1=[0 0]<br> plot(x1,y1)</p> 
 <p style="text-align:center;">   <img alt="" src="https://images2.imgbox.com/9a/f7/tcpYLeh5_o.jpg"></p> 
 <p> hold on<br> x2=[0 0]<br> y2=[-6 6]<br> plot(x2,y2)<img alt="" src="https://images2.imgbox.com/54/77/SEzgbeuJ_o.jpg"></p> 
 <p> <img alt="" height="1200" src="https://images2.imgbox.com/03/d6/XXjnrHkz_o.jpg" width="1000"></p> 
 <p> x=[1 1 1 1 1 4 4 4 4 4 ]<br> y=[2 1 0 -1 -2 -2 -1 0 1 2]<br> plot(x,y)<br> v=[0 5 -3 3]<br> axis(v)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/db/5b/SGDHUFS9_o.jpg"></p> 
 <p></p> 
</blockquote> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cc68cd39f31e4ba68720f8e717170b39/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">系统降阶-</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/964e9c807950cceb4d6131f03ba3a95b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">诡异-为什么使用AOP环绕通知执行Around执行2次</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>