<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>HarmonyOS应用开发学习笔记 应用上下文Context 获取文件夹路径 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="HarmonyOS应用开发学习笔记 应用上下文Context 获取文件夹路径" />
<meta property="og:description" content="1、 HarmoryOS Ability页面的生命周期
2、 @Component自定义组件
3、HarmonyOS 应用开发学习笔记 ets组件生命周期
4、HarmonyOS 应用开发学习笔记 ets组件样式定义 @Styles装饰器：定义组件重用样式 @Extend装饰器：定义扩展组件样式
5、HarmonyOS 应用开发学习笔记 state状态管理概述
6、HarmonyOS应用开发学习笔记 包名、icon图标，应用名修改 UIAbility组件介绍、UIAbility启动模式、UIAbility组件基本用法
7、HarmonyOS应用开发学习笔记 UIAbility组件与UI的数据同步 EventHub、globalThis
8、HarmonyOS应用开发学习笔记 UIAbility组件间交互 UIAbility启动，页面跳转结果回调
概叙 Context是应用中对象的上下文，其提供了应用的一些基础信息，例如resourceManager（资源管理）、applicationInfo（当前应用信息）、dir（应用开发路径）、area（文件分区）等，以及应用的一些基本方法，例如createBundleContext()、getApplicationContext()等。UIAbility组件和各种ExtensionAbility派生类组件都有各自不同的Context类。分别有基类Context、ApplicationContext、AbilityStageContext、UIAbilityContext、ExtensionContext、ServiceExtensionContext等Context。
各类Context的继承关系
项目描述获取UIAbilityContextlet abilityStageContext = this.context;获取AbilityStageContextlet abilityStageContext = this.context;获取ApplicationContextlet applicationContext = this.context.getApplicationContext(); Context的典型使用场景 1、 获取应用文件路径 import UIAbility from &#39;@ohos.app.ability.UIAbility&#39;; export default class EntryAbility extends UIAbility { onCreate(want, launchParam) { let cacheDir = this.context.cacheDir; let tempDir = this.context.tempDir; let filesDir = this.context.filesDir; let databaseDir = this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fbbc55492137648806ae526d9ce1b31e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T11:34:23+08:00" />
<meta property="article:modified_time" content="2024-01-09T11:34:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">HarmonyOS应用开发学习笔记 应用上下文Context 获取文件夹路径</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1、 <a href="https://blog.csdn.net/qq_38355313/article/details/135381725"> HarmoryOS Ability页面的生命周期</a><br> 2、<a href="https://blog.csdn.net/qq_38355313/article/details/135387081?spm=1001.2014.3001.5502"> @Component自定义组件</a><br> 3、<a href="https://blog.csdn.net/qq_38355313/article/details/135388703?spm=1001.2014.3001.5502">HarmonyOS 应用开发学习笔记 ets组件生命周期</a><br> 4、<a href="https://blog.csdn.net/qq_38355313/article/details/135390328?spm=1001.2014.3001.5501">HarmonyOS 应用开发学习笔记 ets组件样式定义 @Styles装饰器：定义组件重用样式 @Extend装饰器：定义扩展组件样式</a><br> 5、<a href="https://blog.csdn.net/qq_38355313/article/details/135407498">HarmonyOS 应用开发学习笔记 state状态管理概述</a><br> 6、<a href="https://blog.csdn.net/qq_38355313/article/details/135410362">HarmonyOS应用开发学习笔记 包名、icon图标，应用名修改 UIAbility组件介绍、UIAbility启动模式、UIAbility组件基本用法</a><br> 7、<a href="https://blog.csdn.net/qq_38355313/article/details/135448734">HarmonyOS应用开发学习笔记 UIAbility组件与UI的数据同步 EventHub、globalThis</a><br> 8、<a href="https://blog.csdn.net/qq_38355313/article/details/135451518">HarmonyOS应用开发学习笔记 UIAbility组件间交互 UIAbility启动，页面跳转结果回调</a></p> 
<h2><a id="_9"></a>概叙</h2> 
<p>Context是应用中对象的上下文，其提供了应用的一些基础信息，例如resourceManager（资源管理）、applicationInfo（当前应用信息）、dir（应用开发路径）、area（文件分区）等，以及应用的一些基本方法，例如createBundleContext()、getApplicationContext()等。UIAbility组件和各种ExtensionAbility派生类组件都有各自不同的Context类。分别有基类Context、ApplicationContext、AbilityStageContext、UIAbilityContext、ExtensionContext、ServiceExtensionContext等Context。</p> 
<ul><li>各类Context的继承关系<br> <img src="https://images2.imgbox.com/04/29/Vylr3zbV_o.png" alt="在这里插入图片描述"></li></ul> 
<table><thead><tr><th>项目</th><th>描述</th></tr></thead><tbody><tr><td>获取UIAbilityContext</td><td>let abilityStageContext = this.context;</td></tr><tr><td>获取AbilityStageContext</td><td>let abilityStageContext = this.context;</td></tr><tr><td>获取ApplicationContext</td><td>let applicationContext = this.context.getApplicationContext();</td></tr></tbody></table> 
<h2><a id="Context_21"></a>Context的典型使用场景</h2> 
<h3><a id="1__22"></a>1、 获取应用文件路径</h3> 
<pre><code>import UIAbility from '@ohos.app.ability.UIAbility';

export default class EntryAbility extends UIAbility {
    onCreate(want, launchParam) {
    
        let cacheDir = this.context.cacheDir;
        let tempDir = this.context.tempDir;
        let filesDir = this.context.filesDir;
        let databaseDir = this.context.databaseDir;
        let bundleCodeDir = this.context.bundleCodeDir;
        let distributedFilesDir = this.context.distributedFilesDir;
        let preferencesDir = this.context.preferencesDir;
        // ...
        
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/39/d5/hPvDutVr_o.png" alt="在这里插入图片描述"></p> 
<ul><li>通过ApplicationContext获取应用级别的应用文件路径，此路径是应用全局信息推荐的存放路径，这些文件会跟随应用的卸载而删除。</li></ul> 
<table><thead><tr><th>项目</th><th>描述</th></tr></thead><tbody><tr><td>bundleCodeDir</td><td>&lt;路径前缀&gt;/el1/bundle/</td></tr><tr><td>cacheDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/cache/</td></tr><tr><td>filesDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/files/</td></tr><tr><td>preferencesDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/preferences/</td></tr><tr><td>tempDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/temp/</td></tr><tr><td>databaseDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/database/</td></tr><tr><td>distributedFilesDir</td><td>&lt;路径前缀&gt;/el2/distributedFiles/</td></tr></tbody></table> 
<ul><li>通过AbilityStageContext、UIAbilityContext、ExtensionContext获取HAP级别的应用文件路径。此路径是HAP相关信息推荐的存放路径，这些文件会跟随HAP的卸载而删除，但不会影响应用级别路径的文件，除非该应用的HAP已全部卸载。</li></ul> 
<table><thead><tr><th>项目</th><th>描述</th></tr></thead><tbody><tr><td>bundleCodeDir</td><td>&lt;路径前缀&gt;/el1/bundle/</td></tr><tr><td>cacheDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/haps//cache/</td></tr><tr><td>filesDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/haps//files/</td></tr><tr><td>preferencesDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/haps//preferences/</td></tr><tr><td>tempDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/base/haps//temp/</td></tr><tr><td>databaseDir</td><td>&lt;路径前缀&gt;/&lt;加密等级&gt;/database//</td></tr><tr><td>distributedFilesDir</td><td>&lt;路径前缀&gt;/el2/distributedFiles//</td></tr></tbody></table> 
<h3><a id="2__70"></a>2、 获取和修改加密分区</h3> 
<p>上一个场景中，引入了加密等级的概念，通过对Context的area属性的读写来实现获取和设置当前加密分区，支持如下两种加密等级：</p> 
<ul><li>AreaMode.EL1：设备级加密区，设备开机后可访问的数据区。</li><li>AreaMode.EL2：用户级加密区，设备开机，首次输入密码后才能够访问的数据区。</li></ul> 
<pre><code>import UIAbility from '@ohos.app.ability.UIAbility';

export default class EntryAbility extends UIAbility {
    onCreate(want, launchParam) {
        // 存储普通信息前，切换到EL1设备级加密
        if (this.context.area === 1) { // 获取area
            this.context.area = 0;     // 修改area
        }
        // 存储普通信息

        // 存储敏感信息前，切换到EL2用户级加密
        if (this.context.area === 0) { // 获取area
            this.context.area = 1;     // 修改area
        }
        // 存储敏感信息
    }
}
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/759e6c6ea22436bd20c6faf8f3aacb46/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java基础之HashMap练习题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cbcf976729805cdecc9c84509ed55030/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python开发——Python 3.11 新添加的一些高效特性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>