<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SAS字典的应用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SAS字典的应用" />
<meta property="og:description" content="数据字典中常用信息检索DICTIONARY.COLUMNS、DICTIONARY.TABLES以及DICTIONARY.MEMBERS等字典表的内容。在编程实践中，如何以SAS字典表来提高效率。
1、DICTIONARY.COLUMNS 对于当前SAS任务的全部数据集，表格DICTIONARY.COLUMNS包含了诸如变量的名称、类型、长度和标签等信息。
表格视图中每一变量的属性都可以使用DESCRIBE语句来识别。
proc sql; describe table dictionary.columns; quit; 【例1.1】将数据集SASHELP.CARS的全部变量名存入宏变量VARNAME中，变量名之间用空格分隔。
proc sql;
select name into :varname separated by &#39; &#39;
from dictionary.columns
where libname=upcase(&#34;SASHELP&#34;) and memname=upcase(&#34;CARS&#34;);
%put &amp;varname;
quit;
【例1.2】将数据集SASHELP.CARS的以&#34;m&#34;为首字符的变量名存入宏变量VARNAME中，
proc sql;
select name into :varname separated by &#39; &#39;
from dictionary.columns
where libname=upcase(&#34;SASHELP&#34;) and memname=upcase(&#34;CARS&#34;)
and substr(strip(name),1,2) like &#34;M%&#34;;
%put &amp;varname;
quit;
/*strip函数用来去除字符串前后空格*/
/*substr(string,1,2)函数表示从字符串位置1开始读取2个字符*/
【例1.3】将数据集SASHELP.CARS中带有FORMAT的变量找出，将这些变量的名称存入宏变量VARNAME，[名称和格式的联合字符]串存入宏变量VARFMT。
/*PS:通过此程序，可以实现批量格式转换。将表1的一部分格式复制到表2中。*/
/*先提取表1中目标变量的格式，存储其变量名和格式，再将此格式宏变量运用在表2中*/
proc sql;
select strip(name),strip(name)||&#39; &#39;||format
into : varname separated by &#39; &#39;,: varfmt separated by &#39; &#39;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/797e8ff67aa67f7518abb5b432889b39/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-06T11:39:42+08:00" />
<meta property="article:modified_time" content="2023-03-06T11:39:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SAS字典的应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>数据字典中常用信息检索DICTIONARY.COLUMNS、DICTIONARY.TABLES以及DICTIONARY.MEMBERS等字典表的内容。在编程实践中，如何以SAS字典表来提高效率。</p> 
<p></p> 
<h2>1、DICTIONARY.COLUMNS</h2> 
<p><br> 对于当前SAS任务的全部数据集，表格DICTIONARY.COLUMNS包含了诸如<strong>变量的名称、类型、长度和标签</strong>等信息。<br> 表格视图中每一变量的属性都可以使用DESCRIBE语句来识别。</p> 
<pre><code class="language-bash">proc sql;
        describe table dictionary.columns;
quit;</code></pre> 
<p></p> 
<p>【例1.1】将数据集SASHELP.CARS的全部变量名存入宏变量VARNAME中，变量名之间用空格分隔。</p> 
<blockquote> 
 <p><br> proc sql;<br>         select name into :varname separated by ' '<br>                 from dictionary.columns<br>                 where <span style="color:#fe2c24;"><strong>libname</strong></span>=upcase("SASHELP") and <strong><span style="color:#fe2c24;">memname</span></strong>=upcase("CARS");<br>         %put &amp;varname;<br> quit;<br>  </p> 
</blockquote> 
<p>【例1.2】将数据集SASHELP.CARS的以"m"为首字符的变量名存入宏变量VARNAME中，<br>  </p> 
<blockquote> 
 <p>proc sql;<br>         select name into :varname separated by ' '<br>                 from dictionary.columns<br>                 where<span style="color:#fe2c24;"><strong> libname</strong></span>=upcase("SASHELP") and <span style="color:#fe2c24;"><strong>memname</strong></span>=upcase("CARS")<br>                           and substr(strip(name),1,2) like "M%";<br>         %put &amp;varname;<br> quit;</p> 
 <p>         /*strip函数用来去除字符串前后空格*/</p> 
 <p>     /*substr(string,1,2)函数表示从字符串位置1开始读取2个字符*/</p> 
</blockquote> 
<p>【例1.3】将数据集SASHELP.CARS中带有FORMAT的变量找出，将这些变量的名称存入宏变量VARNAME，[名称和格式的联合字符]串存入宏变量VARFMT。</p> 
<p>/*PS:通过此程序，可以实现批量格式转换。将表1的一部分格式复制到表2中。*/</p> 
<p>/*先提取表1中目标变量的格式，存储其变量名和格式，再将此格式宏变量运用在表2中*/</p> 
<blockquote> 
 <p>proc sql;<br>         select strip(name),strip(name)||' '||format<br>                <strong> into : varname separated by '  ',: varfmt separated by '  '</strong><br>                 from dictionary.columns<br>                 where <span style="color:#fe2c24;"><strong>libname</strong></span>="SASHELP" and <span style="color:#fe2c24;"><strong>memname</strong></span>="CARS" and format ne ' ' ;<br> quit;<br> %put &amp;varname &amp;varfmt;</p> 
 <p><br> proc freq        data=sashelp.cars;<br>         tables &amp;varname./missing;<br>         format &amp;varfmt;<br> run;</p> 
</blockquote> 
<p></p> 
<h2>2、DICTIONARY.TABLES</h2> 
<p>字典表格DICTIONARY.TABLES包含了诸如<strong>逻辑库名、数据文件的类型、创建日期、观测值数、变量数</strong>等信息。</p> 
<p>当前SAS任务的任一数据集的信息都包含在这个表格中。使用SQL过程的DESCRIBE语句，能够在LOG窗口中查看该字典表格的结构。</p> 
<p></p> 
<pre><code class="language-bash">proc sql;
        describe table dictionary.tables;
quit;</code></pre> 
<p>【例2.1】将数据集SASHELP.CARS的观测值数和变量数分别存入两个宏变量中。</p> 
<blockquote> 
 <p>proc sql;<br>         select strip(put(nvar,8.)),strip(put(nobs,8.)) into: nvar,:nobs<br>                 from dictionary.tables<br>                 where libname="SASHELP" and memname="CARS";<br> quit;<br> %put &amp;nvar &amp;nobs;</p> 
</blockquote> 
<p>【例2.2】将逻辑库SASUSER中在2011年后创建的数据集名称存入宏变量VALDATA中。根据数据集创建时间来选择数据路径 </p> 
<blockquote> 
 <p>proc sql;<br>         create table a as<br>         select memname into : valdata separated by ' '<br>                 from dictionary.tables<br>                 where libname="SASHELP" and memname="CARS"<br>                           and year(datepart(crdate)) ge 2011;<br> quit;</p> 
</blockquote> 
<h2> 3、DICTIONARY.MEMBERS</h2> 
<p>字典表格DICTIONARY.MEMBERS包含了逻辑库名称、数据文件类型（数据集、视图或者目录）、路径等信息。使用SQL过程的DESCRIBE语句，能够在LOG窗口中查看该表格的结构。</p> 
<pre><code class="language-bash">proc sql;
        describe table dictionary.members;
quit;</code></pre> 
<p> 【例3.1】将逻辑库SASUSER中数据集的名称和路径列示出来。</p> 
<blockquote> 
 <p></p> 
 <ol><li>proc sql;</li><li>        select strip(memname)||' '||strip(path)</li><li>                from dictionary.members</li><li>                where libname="SASUSER" and memtype="DATA" ;</li><li>quit;</li></ol> 
</blockquote> 
<h2>  4、总结</h2> 
<table border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td style="width:114px;"> <p>DICTIONARY.</p>   MEMBERS<br>    <p><strong>包含了逻辑库名称、数据文件类型（数据集、视图或者目录）、路径等信息</strong></p> </td><td style="width:384px;"> <p><span style="color:#4da8ee;">dbms_memtype</span>   char(32) label='DBMS Member Type',</p>    <p><span style="color:#4da8ee;">engine</span>   char(8) label='Engine Name',</p>    <p><span style="color:#4da8ee;">index</span>  char(3) label='Indexes',</p>    <p><strong><span style="color:#4da8ee;"><span style="background-color:#f9eda6;">path</span></span><span style="background-color:#f9eda6;">  char(1024) label='Pathname'</span></strong></p> </td></tr><tr><td style="width:114px;"> <p style="margin-left:0;"><span style="color:#333333;"><span style="background-color:#ffffff;">DICTIONARY.</span></span></p>   TABLES<br>    <p style="margin-left:0;"><span style="color:#333333;"><span style="background-color:#ffffff;"><strong>包含了逻辑库名、数据文件的类型、创建日期、观测值数、变量数等信息</strong></span></span></p> </td><td style="width:384px;"> <p><span style="color:#4da8ee;">crdate</span>  num  format=DATETIME  informat=DATETIME label='Date Created',<u>可以根据数据集的创建时间来控制</u></p>    <p><span style="color:#4da8ee;">modate</span> num format=DATETIME  informat=DATETIME label='Date Modified',<u>可以根据数据集的修改时间来控制</u></p>    <p><strong><span style="color:#4da8ee;"><span style="background-color:#f9eda6;">nobs</span></span><span style="background-color:#f9eda6;">  num label='Number of  Physical Observations',</span></strong></p>    <p><span style="color:#4da8ee;">obslen</span>  num label='Observation Length',              </p>    <p><span style="background-color:#fefcd8;"> </span><strong><span style="color:#4da8ee;"><span style="background-color:#fefcd8;">nvar</span></span><span style="background-color:#fefcd8;">  num label='Number of  Variables',</span></strong></p>    <p> <span style="color:#4da8ee;">delobs</span>  num label='Number of  Deleted Observations',</p>    <p> <span style="color:#4da8ee;">nlobs</span>  num label='Number of  Logical Observations',</p>    <p> <span style="color:#4da8ee;">maxvar</span>  num label='Longest  variable name',</p>    <p><span style="color:#4da8ee;">maxlabel</span> num label='Longest  label',</p>    <p><strong><span style="color:#4da8ee;"><span style="background-color:#f9eda6;">num_character</span></span><span style="background-color:#f9eda6;">   num   label='Number of Character Variables',</span></strong></p>    <p><strong><span style="color:#4da8ee;"><span style="background-color:#f9eda6;">num_numeric</span></span><span style="background-color:#f9eda6;">   num label='Number of Numeric Variables'</span></strong></p> </td></tr><tr><td style="width:114px;"> <p style="margin-left:0;"><span style="color:#333333;"><span style="background-color:#ffffff;">DICTIONARY.</span></span></p>   COLUMNS<br>    <p style="margin-left:0;"><span style="color:#333333;"><span style="background-color:#ffffff;"><strong>诸如变量的名称、类型、长度和标签等信息</strong></span></span></p> </td><td style="width:384px;"> <p style="margin-left:0;"><span style="color:#4da8ee;"><strong><span style="background-color:#f9eda6;">name</span></strong></span><span style="color:#333333;"><strong><span style="background-color:#f9eda6;">  char(32) label='Column  Name',</span></strong></span></p>    <p style="margin-left:0;"><span style="color:#4da8ee;"><strong><span style="background-color:#f9eda6;">type</span></strong></span><span style="color:#333333;"><strong><span style="background-color:#f9eda6;">  char(4) label='Column Type',</span></strong></span></p>    <p style="margin-left:0;"><span style="color:#4da8ee;"><span style="background-color:#ffffff;">length </span></span><span style="color:#333333;"><span style="background-color:#ffffff;"> num label='Column  Length',</span></span></p>    <p style="margin-left:0;"><span style="color:#4da8ee;"><span style="background-color:#ffffff;">npos</span></span><span style="color:#333333;"><span style="background-color:#ffffff;">  num label='Column  Position',</span></span></p>    <p style="margin-left:0;"><span style="color:#4da8ee;"><span style="background-color:#ffffff;">varnum</span></span><span style="color:#333333;"><span style="background-color:#ffffff;">  num label='Column Number  in Table',</span></span></p>    <p style="margin-left:0;"><span style="color:#4da8ee;"><span style="background-color:#ffffff;">label</span></span><span style="color:#333333;"><span style="background-color:#ffffff;">  char(256) label='Column  Label',</span></span></p>    <p style="margin-left:0;"><span style="color:#4da8ee;"><span style="background-color:#ffffff;">format</span></span><span style="color:#333333;"><span style="background-color:#ffffff;">  char(49) label='Column  Format',</span></span></p>    <p style="margin-left:0;"><span style="color:#4da8ee;"><span style="background-color:#ffffff;">informat</span></span><span style="color:#333333;"><span style="background-color:#ffffff;">  char(49) label='Column  Informat',</span></span></p> </td></tr><tr><td style="width:114px;">共同部分</td><td style="width:384px;"> <p><strong><span style="color:#fe2c24;">libname</span></strong> char(8) label='Library Name',</p>    <p><span style="color:#fe2c24;"><strong>memname</strong></span> char(32) label='Member Name',</p>    <p><span style="color:#fe2c24;"><strong>memtype</strong></span> char(8) label='Member Type',</p> </td></tr></tbody></table> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/16cc7ee1a1b24803d6bb17cfc87a34cf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Hadoop分布式生态</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03a0411bc36af9bf500d8a3213af4f34/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ubuntu error start of central directory not found； zipfile corrupt.问题解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>