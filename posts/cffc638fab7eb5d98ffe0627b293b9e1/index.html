<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NSIS打包基础脚本 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NSIS打包基础脚本" />
<meta property="og:description" content="!define PRODUCT_NAME &#34;Lenovo Moto Smart Assistant&#34;
!define PRODUCT_VERSION &#34;3.9.7.13&#34;
!define PRODUCT_PUBLISHER &#34;Lenovo&#34;
!define PRODUCT_LINK_NAME &#34;Lenovo Moto Smart Assistant.lnk&#34;
!define PRODUCT_MAIN_EXE &#34;Lenovo Moto Smart Assistant.exe&#34;
#!define PRODUCT_MAIN_EXE &#34;WpfApplication7.exe&#34;
!define PRODUCT_UNINSTALL_SURVEY &#34;Survey\UninstallSurvey.exe&#34;
!define PRODUCT_WEB_SITE &#34;http://www.lenovo.com&#34;
!define PRODUCT_TEMP &#34;$APPDATA\lmsa&#34;
!define PRODUCT_DIR_REGKEY &#34;Software\Microsoft\Windows\CurrentVersion\App Paths\Lenovo Moto Smart Assistant.exe&#34;
!define PRODUCT_UNINST_KEY &#34;Software\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_NAME}&#34;
!define PRODUCT_WEBBROWSER_IE_VERSION &#34;Software\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION&#34;
!define PRODUCT_UNINST_ROOT_KEY &#34;HKLM&#34;
!define HKEY_LOCAL_MACHINE 0x80000002
SetCompressor lzma
; MUI 1.67 compatible ------
!include &#34;MUI.nsh&#34;
!include &#34;LogicLib.nsh&#34;
!include &#34;FileFunc.nsh&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/cffc638fab7eb5d98ffe0627b293b9e1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-31T09:56:07+08:00" />
<meta property="article:modified_time" content="2018-10-31T09:56:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NSIS打包基础脚本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>!define PRODUCT_NAME "Lenovo Moto Smart Assistant"<br> !define PRODUCT_VERSION "3.9.7.13"<br> !define PRODUCT_PUBLISHER "Lenovo"<br> !define PRODUCT_LINK_NAME "Lenovo Moto Smart Assistant.lnk"<br> !define PRODUCT_MAIN_EXE "Lenovo Moto Smart Assistant.exe"<br> #!define PRODUCT_MAIN_EXE "WpfApplication7.exe"<br> !define PRODUCT_UNINSTALL_SURVEY "Survey\UninstallSurvey.exe"<br> !define PRODUCT_WEB_SITE "http://www.lenovo.com"<br> !define PRODUCT_TEMP "$APPDATA\lmsa"<br> !define PRODUCT_DIR_REGKEY "Software\Microsoft\Windows\CurrentVersion\App Paths\Lenovo Moto Smart Assistant.exe"<br> !define PRODUCT_UNINST_KEY "Software\Microsoft\Windows\CurrentVersion\Uninstall\${PRODUCT_NAME}"<br> !define PRODUCT_WEBBROWSER_IE_VERSION "Software\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION"<br> !define PRODUCT_UNINST_ROOT_KEY "HKLM"<br> !define HKEY_LOCAL_MACHINE 0x80000002</p> 
<p>SetCompressor lzma</p> 
<p>; MUI 1.67 compatible ------<br> !include "MUI.nsh"<br> !include "LogicLib.nsh"<br> !include "FileFunc.nsh"<br> !include "NSISList.nsh"</p> 
<p>; MUI Settings<br> !define MUI_ABORTWARNING<br> !define MUI_ICON "${NSISDIR}\Contrib\Graphics\Icons\orange-install.ico"<br> !define MUI_UNICON "${NSISDIR}\Contrib\Graphics\Icons\orange-uninstall.ico"</p> 
<p>; Language Selection Dialog Settings<br> !define MUI_LANGDLL_REGISTRY_ROOT "${PRODUCT_UNINST_ROOT_KEY}"<br> !define MUI_LANGDLL_REGISTRY_KEY "${PRODUCT_UNINST_KEY}"<br> !define MUI_LANGDLL_REGISTRY_VALUENAME "NSIS:Language"</p> 
<p>; These indented statements modify settings for MUI_PAGE_FINISH<br> !define MUI_FINISHPAGE_NOAUTOCLOSE<br> !define MUI_FINISHPAGE_RUN<br> !define MUI_FINISHPAGE_RUN_CHECKED<br> !define MUI_FINISHPAGE_RUN_TEXT "Launch the program"<br> !define MUI_FINISHPAGE_RUN_FUNCTION "LaunchLink"<br> ;!define MUI_FINISHPAGE_SHOWREADME_NOTCHECKED<br> ;!define MUI_FINISHPAGE_SHOWREADME $INSTDIR\readme.txt</p> 
<p>; Welcome page<br> !insertmacro MUI_PAGE_WELCOME<br> ; License page<br> #!define MUI_LICENSEPAGE_CHECKBOX<br> !define MUI_LICENSEPAGE_RADIOBUTTONS<br> !insertmacro MUI_PAGE_LICENSE ".\lmsa\Installation\Resources\license.rtf"<br> ; Directory page<br> !insertmacro MUI_PAGE_DIRECTORY<br> ; Instfiles page<br> !insertmacro MUI_PAGE_INSTFILES<br> ; Finish page<br> !insertmacro MUI_PAGE_FINISH</p> 
<p>; Uninstaller pages<br> !insertmacro MUI_UNPAGE_INSTFILES</p> 
<p>; Language files<br> !insertmacro MUI_LANGUAGE "English"<br> #!insertmacro MUI_LANGUAGE "SimpChinese"</p> 
<p>; Reserve files<br> !insertmacro MUI_RESERVEFILE_INSTALLOPTIONS</p> 
<p>; MUI end ------</p> 
<p>Name "${PRODUCT_NAME}"<br> OutFile "${PRODUCT_NAME}-${PRODUCT_VERSION}.exe"<br> InstallDir "$PROGRAMFILES\Lenovo Moto Smart Assistant"<br> InstallDirRegKey HKLM "${PRODUCT_DIR_REGKEY}" ""<br> #RequestExecutionLevel admin<br> ShowInstDetails show<br> ShowUnInstDetails show<br> #BrandingText "Lenovo"<br> BrandingText " "<br> XPStyle on</p> 
<p>!macro KillProcMacro un<br>   Function ${un}KillProcFunc<br>     StrCpy $0 "${PRODUCT_MAIN_EXE}"<br>     KillProc::FindProcesses<br>     ${If} $1 = 0<br>     ${AndIf} $0 &gt; 0<br>         MessageBox MB_ICONQUESTION|MB_OKCANCEL|MB_DEFBUTTON2 "The ${PRODUCT_MAIN_EXE} is running, whether to continue uninstalling?" IDOK done_uninstall<br>         Abort<br>             <br>         done_uninstall:<br>             StrCpy $0 "${PRODUCT_MAIN_EXE}"<br>             KillProc::KillProcesses<br>     ${EndIf}<br>   FunctionEnd<br> !macroend<br> !insertmacro KillProcMacro ""<br> !insertmacro KillProcMacro "un."</p> 
<p>Function CheckAndDownloadDotNet45<br>     Var /GLOBAL dotNET45IsThere<br>     Var /GLOBAL dotNET_CMD_LINE<br>     Var /GLOBAL EXIT_CODE</p> 
<p>    ReadRegDWORD $dotNET45IsThere HKLM "SOFTWARE\Microsoft\NET Framework Setup\NDP\v4\Full" "Release"<br>     IntCmp $dotNET45IsThere 378389 is_equal is_less is_greater<br>     is_equal:<br>         Goto done_compare_not_needed<br>     is_greater:<br>         Goto done_compare_not_needed<br>     is_less:<br>         Goto done_compare_exit<br>         #Goto done_compare_needed<br>     done_compare_exit:<br>         MessageBox MB_OK|MB_ICONEXCLAMATION "Your computer does not have .NET Framework 4.5, please install it first."<br>         Abort<br>     done_compare_needed:<br>         # Microsoft Download Center EXE:<br>         # Web Bootstrapper: http://go.microsoft.com/fwlink/?LinkId=225704<br>         # Full Download: http://go.microsoft.com/fwlink/?LinkId=225702<br>         <br>         # Let's see if the user is doing a Silent install or not<br>         IfSilent is_quiet is_not_quiet</p> 
<p>        is_quiet:<br>             StrCpy $dotNET_CMD_LINE "/q /norestart"<br>             Goto LookForLocalFile<br>         is_not_quiet:<br>             StrCpy $dotNET_CMD_LINE "/showrmui /passive /norestart"<br>             Goto LookForLocalFile</p> 
<p>        LookForLocalFile:<br>             IfFileExists "$EXEPATH\components\dotNET45Full.exe" do_local_install do_network_install</p> 
<p>            do_local_install:<br>                 ExecWait '"$EXEPATH\components\dotNET45Full.exe" $dotNET_CMD_LINE' $EXIT_CODE<br>                 Goto is_reboot_requested</p> 
<p>            do_network_install:<br>                 Var /GLOBAL dotNetDidDownload<br>                 NSISdl::download "http://go.microsoft.com/fwlink/?LinkId=225704" "$TEMP\dotNET45Web.exe" $dotNetDidDownload</p> 
<p>                StrCmp $dotNetDidDownload success fail<br>                 success:<br>                     ExecWait '"$TEMP\dotNET45Web.exe" $dotNET_CMD_LINE' $EXIT_CODE<br>                     Goto is_reboot_requested</p> 
<p>                fail:<br>                     MessageBox MB_OK|MB_ICONEXCLAMATION "Unable to download .NET Framework.  ${PRODUCT_NAME} will be installed, but will not function without the Framework!"<br>                     Goto done_dotNET_function</p> 
<p>                is_reboot_requested:<br>                     ${If} $EXIT_CODE = 1641<br>                     ${OrIf} $EXIT_CODE = 3010<br>                         SetRebootFlag true<br>                     ${EndIf}</p> 
<p>    done_compare_not_needed:<br>         Goto done_dotNET_function<br>     done_dotNET_function:<br> FunctionEnd</p> 
<p>Function CheckSingleInstallation<br>     ;Single case installation<br>     System::Call 'kernel32::CreateMutexA(i 0, i 0, t "myMutex") i .r1 ?e'<br>     Pop $R0<br>     StrCmp $R0 0 +3<br>     MessageBox MB_OK|MB_ICONEXCLAMATION "The installer is running..."<br>     Abort<br> FunctionEnd</p> 
<p>;$var=0 Versions are equal<br> ;$var=1 Version1 is newer<br> ;$var=2 Version2 is newer<br> Function VersionCompare<br>     !define VersionCompare `!insertmacro VersionCompareCall`</p> 
<p>    !macro VersionCompareCall _VER1 _VER2 _RESULT<br>         Push `${_VER1}`<br>         Push `${_VER2}`<br>         Call VersionCompare<br>         Pop ${_RESULT}<br>     !macroend</p> 
<p>    Exch $1<br>     Exch<br>     Exch $0<br>     Exch<br>     Push $2<br>     Push $3<br>     Push $4<br>     Push $5<br>     Push $6<br>     Push $7</p> 
<p>    begin:<br>     StrCpy $2 -1<br>     IntOp $2 $2 + 1<br>     StrCpy $3 $0 1 $2<br>     StrCmp $3 '' +2<br>     StrCmp $3 '.' 0 -3<br>     StrCpy $4 $0 $2<br>     IntOp $2 $2 + 1<br>     StrCpy $0 $0 '' $2</p> 
<p>    StrCpy $2 -1<br>     IntOp $2 $2 + 1<br>     StrCpy $3 $1 1 $2<br>     StrCmp $3 '' +2<br>     StrCmp $3 '.' 0 -3<br>     StrCpy $5 $1 $2<br>     IntOp $2 $2 + 1<br>     StrCpy $1 $1 '' $2</p> 
<p>    StrCmp $4$5 '' equal</p> 
<p>    StrCpy $6 -1<br>     IntOp $6 $6 + 1<br>     StrCpy $3 $4 1 $6<br>     StrCmp $3 '0' -2<br>     StrCmp $3 '' 0 +2<br>     StrCpy $4 0</p> 
<p>    StrCpy $7 -1<br>     IntOp $7 $7 + 1<br>     StrCpy $3 $5 1 $7<br>     StrCmp $3 '0' -2<br>     StrCmp $3 '' 0 +2<br>     StrCpy $5 0</p> 
<p>    StrCmp $4 0 0 +2<br>     StrCmp $5 0 begin newer2<br>     StrCmp $5 0 newer1<br>     IntCmp $6 $7 0 newer1 newer2</p> 
<p>    StrCpy $4 '1$4'<br>     StrCpy $5 '1$5'<br>     IntCmp $4 $5 begin newer2 newer1</p> 
<p>    equal:<br>     StrCpy $0 0<br>     goto end<br>     newer1:<br>     StrCpy $0 1<br>     goto end<br>     newer2:<br>     StrCpy $0 2</p> 
<p>    end:<br>     Pop $7<br>     Pop $6<br>     Pop $5<br>     Pop $4<br>     Pop $3<br>     Pop $2<br>     Pop $1<br>     Exch $0<br> FunctionEnd</p> 
<p>;$R0=0 exists<br> ;$R0=2 not exists<br> ;$R0=other error<br> ;$R1 Handle of the key ($0)<br> Function CheckRegKeyExists<br>     StrCpy $1 "Software\Microsoft\Windows\CurrentVersion\Uninstall\$0"<br>     ;Create a cache for the handle of the key<br>     System::Call "*(i 0) i .R0"<br>     Push $1<br>     ;Check with API, return value in $R1<br>     system::call 'Advapi32::RegOpenKey(i ${HKEY_LOCAL_MACHINE}, t s, i R0) .iR1'<br>     ;Close the handle of the key<br>     system::call 'Advapi32::RegCloseKey(i R0)'<br>     ;Free memory of $R0<br>     system::free $1<br> FunctionEnd</p> 
<p>Function CheckInstallshieldPackage<br>     #Var /GLOBAL Installshield_Package_UninstallString<br>     Var /GLOBAL Installshield_Product_ID<br>     #StrCpy $Installshield_Product_ID ""<br>     <br>     ${List.Create} Product_ID_Array<br>     ${List.Add} Product_ID_Array "{1930BFD1-2F0A-43D9-B760-FAA2A40806DE}"<br>     ${List.Add} Product_ID_Array "{21E28485-F3A3-4D3E-86A3-7E17C1BAAF42}"<br>     ${List.Add} Product_ID_Array "{63BF7D1C-95B4-4E37-97A7-F8835B8A13D0}"<br>     ${List.Add} Product_ID_Array "{3E34ECBE-D771-4D2B-8BDB-F4CF0BF663D1}"<br>     ${List.Add} Product_ID_Array "{B72D19C8-EDA7-4C56-B8E8-EA3D35749BF4}"<br>     ${List.Add} Product_ID_Array "{DB16BC9B-89C2-46A5-840F-79410CAB73B1}"<br>     ${List.Add} Product_ID_Array "{C5E66E98-6776-477B-B0B3-B1A8372F8CC6}"<br>     ${List.Add} Product_ID_Array "{4EE4FC82-5245-478B-BBD2-15E977072240}"<br>     ${List.Add} Product_ID_Array "{4F7F8A4C-5D6E-4A4D-AD0B-8FF4964CA277}"<br>     ${List.Add} Product_ID_Array "{A92D6B74-8528-4284-841F-76B3D9CE478B}"<br>     ${List.Add} Product_ID_Array "{4226EB1C-E6C5-471F-88BC-5081A8D3FBD8}"<br>     #${List.Add} Product_ID_Array "{F3D02057-5B79-4AAE-A989-4EB8E71D6BEE}"<br>     <br>     ${List.All} Product_ID_Array<br>     Loop1:<br>         Pop $0<br>         ${If} $0 != ""<br>         ${AndIf} $0 != "__LAST"<br>             Call CheckRegKeyExists<br>             ${If} $R1 &lt;&gt; 0<br>                 MessageBox MB_OK "TEST1"<br>                 Goto Loop1<br>             ${Else}<br>                 StrCpy $Installshield_Product_ID $0<br>                 Call KillProcFunc<br>                 ExecCmd::exec 'cmd /c MsiExec.exe /qb /x $Installshield_Product_ID'<br>             ${EndIf}<br>         ${EndIf}<br>         <br>         #Pop $0<br>         #StrCmp $0 "" +5 0<br>         #ReadRegDWORD $Installshield_Package_UninstallString ${PRODUCT_UNINST_ROOT_KEY} "Software\Microsoft\Windows\CurrentVersion\Uninstall\$0" "UninstallString"<br>         #StrCmp $Installshield_Package_UninstallString "" +3<br>         #StrCpy $Installshield_Product_ID $0<br>         #Goto +2<br>         #StrCmp $0 "__LAST" +3 Loop1<br>         <br>     #Call KillProcFunc<br>     #ExecCmd::exec 'cmd /c MsiExec.exe /qb /x $Installshield_Product_ID'<br> FunctionEnd</p> 
<p>Function CheckExistsOrUpgrade<br>     ReadRegStr $0 ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "DisplayVersion"<br>     ReadRegStr $R0 ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "UninstallString"<br>     ${VersionCompare} $0 ${PRODUCT_VERSION} $0<br>     ${If} $R0 != ""<br>         MessageBox MB_OKCANCEL|MB_ICONEXCLAMATION \<br>             "${PRODUCT_NAME} ${PRODUCT_VERSION} is already installed. $\n$\nClick `OK` to remove the \<br>             previous version or `Cancel` to cancel this upgrade." \<br>             IDOK continue_install<br>         Abort<br>         <br>         continue_install:<br>             ${If} $0 = 2<br>                 WriteRegDWORD ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_DIR_REGKEY}" "Upgrade" 0x1<br>             ${EndIf}<br>             <br>             ClearErrors<br>             #Exec $R0<br>             ExecWait '$R0 _?=$INSTDIR'<br>     ${EndIf}<br> FunctionEnd</p> 
<p>Function .onInit<br>     Call CheckSingleInstallation<br>     Call CheckInstallshieldPackage<br>     Call CheckExistsOrUpgrade<br>     Call CheckAndDownloadDotNet45<br>     !insertmacro MUI_LANGDLL_DISPLAY<br> FunctionEnd</p> 
<p>Function .onInstFailed<br> FunctionEnd</p> 
<p>Function .onInstSuccess<br>     #DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}"<br> FunctionEnd</p> 
<p>Section "MainSection" SEC01<br>     SetOutPath "$INSTDIR"<br>     SetOverwrite try<br>     File ".\Bin\adb.exe"<br>     File ".\Bin\AdbWinApi.dll"<br>     File ".\Bin\AdbWinUsbApi.dll"<br>     File ".\Bin\LibUsbDotNet.dll"<br>     File ".\Bin\BouncyCastle.Crypto.dll"<br>     File ".\Bin\Common.Logging.Core.dll"<br>     File ".\Bin\Common.Logging.dll"<br>     File ".\Bin\Common.Logging.Log4Net1215.dll"<br>     File ".\Bin\EntityFramework.dll"<br>     File ".\Bin\fastboot.exe"<br>     File ".\Bin\Gma.QrCodeNet.Encoding.dll"<br>     File ".\Bin\GoogleAnalytics.Core.dll"<br>     File ".\Bin\GoogleAnalytics.WPF.Managed.dll"<br>     File ".\Bin\Lenovo Moto Smart Assistant.exe"<br>     File ".\Bin\Lenovo Moto Smart Assistant.exe.config"<br>     File ".\Bin\lenovo.themes.generic.exe"<br>     File ".\Bin\Newtonsoft.Json.dll"<br>     File ".\Bin\Microsoft.Expression.Interactions.dll"<br>     File ".\Bin\System.Windows.Interactivity.dll"<br>     File ".\Bin\SevenZipSharp.dll"<br>     File ".\Bin\SharpAdbClient.dll"<br>     <br>     File ".\Bin\plugins.xml"<br>     File ".\Bin\download-config.xml"<br>     File ".\Bin\user*.xml"<br>     <br>     File ".\Bin\lenovo.mbg.service.*.dll"<br>     File ".\Bin\SharpVectors.*.dll"<br>     File ".\Bin\log4net.*"<br>     #File /r /x lmsa*.exe /x *.pdb /x *.nsi ".\*.*"<br>     CreateDirectory "$SMPROGRAMS\Lenovo"<br>     CreateShortCut "$SMPROGRAMS\Lenovo\${PRODUCT_LINK_NAME}" "$INSTDIR\${PRODUCT_MAIN_EXE}"<br>     CreateShortCut "$DESKTOP\${PRODUCT_LINK_NAME}" "$INSTDIR\${PRODUCT_MAIN_EXE}"<br>     <br>     SetOutPath "$INSTDIR\Survey"<br>     File ".\UninstallSurvey\UninstallSurvey\Release\UninstallSurvey.exe.*"<br>     <br>     SetOutPath "$INSTDIR\Document"<br>     File ".\lmsa\Installation\Resources\Document\*.*"<br>     <br>     SetOutPath "$INSTDIR\7z"<br>     File /r ".\Bin\7z\*.*"<br>     <br>     SetOutPath "$INSTDIR\7zSharp"<br>     File /r ".\Bin\7zSharp\*.*"<br>     <br>     SetOutPath "$INSTDIR\apk"<br>     File /r ".\Bin\apk\lmsa.apk"<br>     <br>     SetOutPath "$INSTDIR\en"<br>     File /r ".\Bin\en\*.*"<br>     <br>     SetOutPath "$INSTDIR\lang"<br>     File /r ".\lmsa\Installation\Resources\Document\lang\*.*"<br>     <br>     SetOutPath "$INSTDIR\pluginIcons"<br>     File /r ".\Bin\pluginIcons\*.*"<br>     <br>     SetOutPath "$INSTDIR\plugins\02928af025384c75ae055aa2d4f256c8"<br>     File /x "lenovo.mbg.service.framework.devicemgt.dll" \<br>          /x "lenovo.mbg.service.framework.lang.dll" \<br>          /x "lenovo.mbg.service.lmsa.hostproxy.dll" \<br>          /x "LibUsbDotNet.dll" \<br>          /x "Microsoft.Windows.Shell.dll" \<br>          /x "SharpAdbClient.dll" \<br>             ".\Bin\plugins\02928af025384c75ae055aa2d4f256c8\*.dll"<br>     File ".\Bin\plugins\02928af025384c75ae055aa2d4f256c8\lenovo.mbg.service.lmsa.phoneManager.exe"<br>     File ".\Bin\plugins\02928af025384c75ae055aa2d4f256c8\lenovo.mbg.service.lmsa.phoneManager.exe.config"<br>     SetOutPath "$INSTDIR\plugins\02928af025384c75ae055aa2d4f256c8\en"<br>     File /r ".\Bin\plugins\02928af025384c75ae055aa2d4f256c8\en\*.*"<br>     <br>     SetOutPath "$INSTDIR\plugins\310f47ad70d54880b33225d864e6fe68"<br>     File ".\Bin\plugins\310f47ad70d54880b33225d864e6fe68\*.dll"<br>     File ".\Bin\plugins\310f47ad70d54880b33225d864e6fe68\lenovo.mbg.service.lmsa.forum.exe"<br>     File ".\Bin\plugins\310f47ad70d54880b33225d864e6fe68\lenovo.mbg.service.lmsa.forum.exe.config"<br>     <br>     SetOutPath "$INSTDIR\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c"<br>     File ".\lmsa\Installation\Resources\Avatar\reaper.cfg"<br>     File ".\lmsa\Installation\Resources\Avatar\reaper_x86_Debug_MultiByte.dll"<br>     File ".\lmsa\Installation\Resources\Avatar\reaper_x86_Release_MultiByte.dll"<br>     File /x "lenovo.mbg.service.framework.lang.dll" \<br>          /x "lenovo.mbg.service.lmsa.hostproxy.dll" \<br>             ".\Bin\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\*.dll"<br>     File ".\Bin\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\*.exe"<br>     File ".\Bin\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\*.exe.config"<br>     SetOutPath "$INSTDIR\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\en"<br>     File /r ".\Bin\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\en\*.*"<br>     <br>     SetOutPath "$INSTDIR\plugins\992e746537954a7d9ae613d5ec9bc7a6"<br>     File /x "lenovo.mbg.service.lmsa.hostproxy.dll" ".\Bin\plugins\992e746537954a7d9ae613d5ec9bc7a6\*.dll"<br>     File ".\Bin\plugins\992e746537954a7d9ae613d5ec9bc7a6\lenovo.mbg.service.lmsa.tips.exe"<br>     File ".\Bin\plugins\992e746537954a7d9ae613d5ec9bc7a6\lenovo.mbg.service.lmsa.tips.exe.config"<br>     <br>     SetOutPath "$INSTDIR\plugins\d7deab64b8cb4e31b600ad0d839b6d73"<br>     File ".\Bin\plugins\d7deab64b8cb4e31b600ad0d839b6d73\index.html"<br>     File ".\Bin\plugins\d7deab64b8cb4e31b600ad0d839b6d73\*.dll"<br>     File ".\Bin\plugins\d7deab64b8cb4e31b600ad0d839b6d73\lenovo.mbg.service.lmsa.messenger.exe"<br>     File ".\Bin\plugins\d7deab64b8cb4e31b600ad0d839b6d73\lenovo.mbg.service.lmsa.messenger.exe.config"<br>     SetOutPath "$INSTDIR\plugins\d7deab64b8cb4e31b600ad0d839b6d73\web"<br>     File /r ".\Bin\plugins\d7deab64b8cb4e31b600ad0d839b6d73\web\*.*"<br>     <br>     SetOutPath "$INSTDIR\plugins\dd537b5c6c074ae49cc8b0b2965ce54a"<br>     File ".\Bin\plugins\dd537b5c6c074ae49cc8b0b2965ce54a\*.dll"<br>     File ".\LmsaPlugins\toolBox\Ringtone\Comm\libmp3lame.32.dll"<br>     File ".\Bin\plugins\dd537b5c6c074ae49cc8b0b2965ce54a\lenovo.mbg.service.lmsa.toolbox.exe.config"<br>     File ".\Bin\plugins\dd537b5c6c074ae49cc8b0b2965ce54a\lenovo.mbg.service.lmsa.toolbox.exe"<br>     <br>     ${GetSize} "$INSTDIR" "/S=OK" $0 $1 $2<br>     IntFmt $0 "0x%08X" $0<br>     WriteRegDWORD ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "EstimatedSize" "$0"<br> SectionEnd<br>     <br> Section -AdditionalIcons<br>     SetOutPath $INSTDIR<br>     #WriteIniStr "$INSTDIR\${PRODUCT_NAME}.url" "InternetShortcut" "URL" "${PRODUCT_WEB_SITE}"<br>     #CreateShortCut "$SMPROGRAMS\lmsa\Website.lnk" "$INSTDIR\${PRODUCT_NAME}.url"<br>     CreateShortCut "$SMPROGRAMS\lmsa\Uninstall.lnk" "$INSTDIR\uninst.exe"<br> SectionEnd</p> 
<p>Section -Post<br>     WriteUninstaller "$INSTDIR\uninst.exe"<br>     WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_DIR_REGKEY}" "" "$INSTDIR\${PRODUCT_MAIN_EXE}"<br>     WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "DisplayName" "$(^Name)"<br>     WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "UninstallString" "$INSTDIR\uninst.exe"<br>     WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "DisplayIcon" "$INSTDIR\${PRODUCT_MAIN_EXE}"<br>     WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "DisplayVersion" "${PRODUCT_VERSION}"<br>     #WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "URLInfoAbout" "${PRODUCT_WEB_SITE}"<br>     WriteRegStr ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}" "Publisher" "${PRODUCT_PUBLISHER}"<br>     WriteRegDWORD ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_WEBBROWSER_IE_VERSION}" "${PRODUCT_MAIN_EXE}" 0x11001<br> SectionEnd</p> 
<p>Function LaunchLink<br>     ExecShell "" "$SMPROGRAMS\lmsa\${PRODUCT_LINK_NAME}"<br> FunctionEnd</p> 
<p>Function un.onUninstSuccess<br>     # do something<br>     HideWindow<br>     MessageBox MB_ICONINFORMATION|MB_OK "$(^Name) has been successfully removed from your computer."<br> FunctionEnd</p> 
<p>Function un.onInit<br>     Call un.KillProcFunc<br>     !insertmacro MUI_UNGETLANGUAGE<br> FunctionEnd</p> 
<p>Function un.PreUninstall<br>     ReadRegDWORD  $R0 ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_DIR_REGKEY}" "Upgrade"<br>     ; Not Upgrade<br>     ${IfNot} $R0 = 1<br>         MessageBox MB_ICONQUESTION|MB_YESNO|MB_DEFBUTTON2 "Are you sure you want to completely uninstall $(^Name) and all components?" IDYES +2<br>         Abort<br>         ExecWait "$INSTDIR\${PRODUCT_UNINSTALL_SURVEY}"<br>         ClearErrors<br>     ${EndIf}<br> FunctionEnd</p> 
<p>Section Uninstall<br>     Call un.PreUninstall<br>     <br>     Delete "$INSTDIR\uninst.exe"<br>     <br>     ;Upgrade<br>     ${If} $R0 = 1<br>         CreateDirectory "${PRODUCT_TEMP}"<br>         CopyFiles /SILENT "$INSTDIR\*.xml" "${PRODUCT_TEMP}"<br>         CopyFiles /SILENT "$INSTDIR\*.json" "${PRODUCT_TEMP}"<br>         CopyFiles /SILENT "$INSTDIR\*.res" "${PRODUCT_TEMP}"<br>         CreateDirectory "${PRODUCT_TEMP}\logs"<br>         CopyFiles /SILENT "$INSTDIR\logs\*.*" "${PRODUCT_TEMP}\logs"<br>         CreateDirectory "${PRODUCT_TEMP}\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\log"<br>         CopyFiles /SILENT "$INSTDIR\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\log\*.*" "${PRODUCT_TEMP}\plugins\8ab04aa975e34f1ca4f9dc3a81374e2c\log"<br>         CreateDirectory "${PRODUCT_TEMP}\download"<br>         CopyFiles /SILENT "$INSTDIR\download\*.*" "${PRODUCT_TEMP}\download"<br>         Delete "$INSTDIR\*.*"<br>         RMDir /r "$INSTDIR"<br>         CreateDirectory "$INSTDIR"<br>         CopyFiles /SILENT "${PRODUCT_TEMP}\*.*" "$INSTDIR"<br>         Delete "${PRODUCT_TEMP}\*.*"<br>         RMDir /r "${PRODUCT_TEMP}"<br>     ${Else}<br>         Delete "$INSTDIR\*.*"<br>         RMDir /r "$INSTDIR"<br>     ${EndIf}<br>     #Delete "$INSTDIR\*.*"<br>     Delete "$SMPROGRAMS\lmsa\Uninstall.lnk"<br>     #Delete "$SMPROGRAMS\lmsa\Website.lnk"<br>     Delete "$DESKTOP\${PRODUCT_LINK_NAME}"<br>     Delete "$SMPROGRAMS\lmsa\${PRODUCT_LINK_NAME}"</p> 
<p>    #RMDir /r "$INSTDIR"<br>     RMDir "$SMPROGRAMS\lmsa"</p> 
<p>    DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_UNINST_KEY}"<br>     DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_DIR_REGKEY}"<br>     #DeleteRegKey ${PRODUCT_UNINST_ROOT_KEY} "${PRODUCT_WEBBROWSER_IE_VERSION}"<br>     SetAutoClose true<br> SectionEnd</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/72e8be0a6fdc89b69941e4a203dc9346/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">程序员看过来！6499元Mac mini带回家！让你写代码的速度快上30倍！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7fa17f246a967ad9fa08267d9a2f7562/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Nw.js入门文档</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>