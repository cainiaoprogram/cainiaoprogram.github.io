<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>tinymce富文本编辑器的使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="tinymce富文本编辑器的使用" />
<meta property="og:description" content="tinymce富文本编辑器的使用 1、基本介绍 tinymce富文本官网：https://www.tiny.cloud/
中文文档：http://tinymce.ax-z.cn/
tinymce-npm地址：https://www.npmjs.com/package/tinymce
tinymce英文文档-示例地址：https://www.tiny.cloud/docs/quick-start/
kindEditor富文本官网：http://kindeditor.net/demo.php
wangeditor富文本官网：https://www.wangeditor.com/
中文文档：https://www.wangeditor.com/demo/index.html
TinyMCE是一个轻量、简洁、功能强大的编辑器。公司之前使用过kindEditor和wangEditor。
kindEditor：功能强大，代码简洁，有常用的从txt和word复制、多图上传等功能，但是没有格式刷，运营的妹子经常反馈生成多余的空行，并且插入h5的video标签默认也会被过滤掉，项目到2016年便不再维护了。
wangEditor：轻量、简洁、易用，但是功能有限，没有多图上传、格式刷等功能。
鉴于此，便换上了TinyMCE，原因有三：
GitHub 上示例很多，一直在维护；从word粘贴和微信公众上复制过来的文章基本能保持原格式；插件丰富，官网提供了很多实用的插件，如多图上传，首行缩进，字数限制等，还可以自定义插件，方便拓展。 使用流程 1、引入TinyMCE 1、获取自己的API密钥 地址
2、下载tinymce.min.js到本地 地址
3、下载汉化js zh_CN.js 放到 langs目录下 汉化包下载
4、引入
&lt;script src=&#34;https://cloud.tinymce.com/5/tinymce.min.js?apiKey=官方申请的API_KEY&#34;&gt;&lt;/script&gt; &lt;script src=&#34;tinymce.min.js&#34;&gt;&lt;/script&gt; &lt;script src=&#34;tinymce/js/tinymce/langs/zh_CN.js&#34; type=&#34;text/javascript&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt; &lt;!--汉化--&gt; 初始化为页面
tinymce.init({ selector: &#39;#mytextarea&#39;, language:&#39;zh_CN&#39;,//注意大小写 }); 5.1、html
&lt;h1&gt;TinyMCE示例&lt;/h1&gt; &lt;form method=&#34;post&#34;&gt; &lt;textarea id=&#34;mytextarea&#34;&gt;Hello, World!&lt;/textarea&gt; &lt;/form&gt; 工具栏配置
tinymce.init({ selector: &#39;#mytextarea&#39;, language:&#39;zh_CN&#39;,//注意大小写 toolbar: &#39;undo redo | styleselect | bold italic | link image&#39;//工具栏配置 }); 5.2、移动端
&lt;meta name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/76ca3c614aabd42c7f4e36b71e66e545/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-03T23:00:02+08:00" />
<meta property="article:modified_time" content="2022-12-03T23:00:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">tinymce富文本编辑器的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="tinymce_0"></a>tinymce富文本编辑器的使用</h4> 
<h5><a id="1_2"></a>1、基本介绍</h5> 
<p>tinymce富文本官网：<a href="https://www.tiny.cloud/" rel="nofollow">https://www.tiny.cloud/</a></p> 
<p>中文文档：<a href="http://tinymce.ax-z.cn/" rel="nofollow">http://tinymce.ax-z.cn/</a></p> 
<p>tinymce-npm地址：<a href="https://www.npmjs.com/package/tinymce" rel="nofollow">https://www.npmjs.com/package/tinymce</a></p> 
<p>tinymce英文文档-示例地址：<a href="https://www.tiny.cloud/docs/quick-start/" rel="nofollow">https://www.tiny.cloud/docs/quick-start/</a></p> 
<p>kindEditor富文本官网：<a href="http://kindeditor.net/demo.php" rel="nofollow">http://kindeditor.net/demo.php</a></p> 
<p>wangeditor富文本官网：<a href="https://www.wangeditor.com/" rel="nofollow">https://www.wangeditor.com/</a></p> 
<p>中文文档：<a href="https://www.wangeditor.com/demo/index.html" rel="nofollow">https://www.wangeditor.com/demo/index.html</a></p> 
<ul><li> <p>TinyMCE是一个轻量、简洁、功能强大的编辑器。公司之前使用过kindEditor和wangEditor。</p> </li><li> <p>kindEditor：功能强大，代码简洁，有常用的从txt和word复制、多图上传等功能，但是没有格式刷，运营的妹子经常反馈生成多余的空行，并且插入h5的video标签默认也会被过滤掉，项目到2016年便不再维护了。</p> </li><li> <p>wangEditor：轻量、简洁、易用，但是功能有限，没有多图上传、格式刷等功能。</p> </li></ul> 
<p>鉴于此，便换上了TinyMCE，原因有三：</p> 
<ul><li>GitHub 上示例很多，一直在维护；</li><li>从word粘贴和微信公众上复制过来的文章基本能保持原格式；</li><li>插件丰富，官网提供了很多实用的插件，如多图上传，首行缩进，字数限制等，还可以自定义插件，方便拓展。</li></ul> 
<h5><a id="_32"></a>使用流程</h5> 
<h6><a id="1TinyMCE_34"></a>1、引入TinyMCE</h6> 
<p>1、获取自己的<a href="https://so.csdn.net/so/search?q=API&amp;spm=1001.2101.3001.7020">API</a>密钥 <a href="https://www.tiny.cloud/docs/quick-start/" rel="nofollow">地址</a><br> 2、下载tinymce.min.js到本地 <a href="https://www.tiny.cloud/get-tiny/self-hosted/" rel="nofollow">地址</a><br> 3、下载汉化js zh_CN.js 放到 langs目录下 <a href="https://www.tiny.cloud/get-tiny/language-packages/" rel="nofollow">汉化包下载</a><br> 4、引入</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://cloud.tinymce.com/5/tinymce.min.js?apiKey=官方申请的API_KEY"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"tinymce.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"tinymce/js/tinymce/langs/zh_CN.js"</span> type<span class="token operator">=</span><span class="token string">"text/javascript"</span> charset<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>汉化<span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre> 
<p>初始化为页面</p> 
<pre><code class="prism language-js">tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'#mytextarea'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">language</span><span class="token operator">:</span><span class="token string">'zh_CN'</span><span class="token punctuation">,</span><span class="token comment">//注意大小写</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>5.1、html</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>TinyMCE示例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mytextarea<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Hello, World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>工具栏配置</p> 
<pre><code class="prism language-js">tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  	<span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'#mytextarea'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">language</span><span class="token operator">:</span><span class="token string">'zh_CN'</span><span class="token punctuation">,</span><span class="token comment">//注意大小写</span>
	<span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token string">'undo redo | styleselect | bold italic | link image'</span><span class="token comment">//工具栏配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>5.2、移动端</p> 
<pre><code class="prism language-vue">&lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;

tinymce.init({
  selector: 'textarea',
  mobile: {
    menubar: true
  }
});
</code></pre> 
<p>效果</p> 
<p><img src="https://images2.imgbox.com/49/aa/oq4kYdlY_o.jpg" alt="在这里插入图片描述"></p> 
<h5><a id="2html_95"></a>2、基础示例-html版本</h5> 
<pre><code class="prism language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://cdn.tiny.cloud/1/no-api-key/tinymce/5/tinymce.min.js<span class="token punctuation">"</span></span> <span class="token attr-name">referrerpolicy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>origin<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'#mytextarea'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>TinyMCE Quick Start Guide<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mytextarea<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Hello, World!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="3vue2_123"></a>3、基础示例-vue2版本</h5> 
<h6><a id="_125"></a>基础步骤</h6> 
<p>1、使用tinymce组件</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tinymce-editor<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>editor</span> <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>tinymceId<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>myValue<span class="token punctuation">"</span></span> <span class="token attr-name">:init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$attrs<span class="token punctuation">"</span></span> <span class="token attr-name">v-on</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>inputListeners<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>editor</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>2、引入包</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> tinymce <span class="token keyword">from</span> <span class="token string">'tinymce/tinymce'</span>
<span class="token keyword">import</span> Editor <span class="token keyword">from</span> <span class="token string">'@tinymce/tinymce-vue'</span>
<span class="token keyword">import</span> <span class="token string">'tinymce/themes/silver'</span>

<span class="token keyword">import</span> <span class="token string">'tinymce/icons/default/icons'</span>  <span class="token comment">// 发现编辑器图片找不到，引入图标</span>
</code></pre> 
<p>3、注册组件</p> 
<pre><code class="prism language-js"><span class="token comment">//注册组件 tinymce/tinymce是一个组件，引入组件注册，直接使用</span>
<span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    Editor
<span class="token punctuation">}</span>
</code></pre> 
<p>4、初始化配置</p> 
<pre><code class="prism language-js"><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
      
 <span class="token literal-property property">init</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">language_url</span><span class="token operator">:</span> <span class="token string">'/tinymce/zh_CN.js'</span><span class="token punctuation">,</span> <span class="token comment">//指定中文包</span>
        <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'zh_CN'</span><span class="token punctuation">,</span><span class="token comment">//中文</span>
        <span class="token literal-property property">skin_url</span><span class="token operator">:</span> <span class="token string">'/tinymce/skins/ui/oxide'</span><span class="token punctuation">,</span><span class="token comment">//编辑器皮肤，</span>
        <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span><span class="token comment">//高度</span>
        <span class="token literal-property property">browser_spellcheck</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 拼写检查</span>
        <span class="token literal-property property">branding</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 去水印</span>
        <span class="token literal-property property">elementpath</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用编辑器底部的状态栏</span>
        <span class="token literal-property property">statusbar</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 隐藏编辑器底部的状态栏</span>
        <span class="token literal-property property">paste_data_images</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 允许粘贴图像</span>
        <span class="token literal-property property">menubar</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">// 隐藏最上方menu</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_178"></a>引用和完善组件时，出现的问题</h6> 
<p>问题一：页面实现数据回显时，tinymce无法回显绑定值</p> 
<p>分析原因：数据赋值与tinymce组件渲染顺序导致</p> 
<p>解决方案：</p> 
<p>1）、当因当前页面刷新导致时</p> 
<p>将需要回显值作为默认值添加上，考虑使用init》setup属性</p> 
<pre><code class="prism language-js"><span class="token literal-property property">init</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function-variable function">setup</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">editor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 初次化编辑器</span>
          editor<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'init'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
              editor<span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>2）、当因页面跳转导致时</p> 
<p>考虑使用watch监听回显值</p> 
<pre><code class="prism language-js"><span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">value</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> tinymce<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>tinymceId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setContent</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>3）、以上2点考虑都是基于所使用的组件最初使用时，所以我们采用一个标识记录一下当前组件是否最初使用，达到一次回显的目的即可。标识名称为“isInit”，请参考<code>vue2应用实例-完整版</code>分析</p> 
<p>问题二：通常我们设置内容后，光标会跑到最前面</p> 
<p>解决方案：</p> 
<p>加入一下代码</p> 
<pre><code class="prism language-js">editor<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span>editor<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
editor<span class="token punctuation">.</span>selection<span class="token punctuation">.</span><span class="token function">collapse</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>1、封装组件</p> 
<p>index.vue</p> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;!-- 富文本 --&gt;
  &lt;div&gt;
    &lt;editor v-model="content" :init="init" :disabled="disabled"&gt;&lt;/editor&gt;
  &lt;/div&gt;
&lt;/template&gt;
 
 
&lt;script&gt;
import tinymce from "tinymce/tinymce";
import Editor from "@tinymce/tinymce-vue";
import "tinymce/icons/default/icons";
import "tinymce/themes/silver";
import "tinymce/plugins/image";
import "tinymce/plugins/media";
import "tinymce/plugins/table";
import "tinymce/plugins/lists";
import "tinymce/plugins/contextmenu";
import "tinymce/plugins/wordcount";
import "tinymce/plugins/colorpicker";
import "tinymce/plugins/textcolor";
import "tinymce/plugins/preview";
import "tinymce/plugins/code";
import "tinymce/plugins/link";
import "tinymce/plugins/advlist";
import "tinymce/plugins/codesample";
import "tinymce/plugins/hr";
import "tinymce/plugins/fullscreen";
import "tinymce/plugins/textpattern";
import "tinymce/plugins/searchreplace";
import "tinymce/plugins/autolink";
import "tinymce/plugins/directionality";
import "tinymce/plugins/visualblocks";
import "tinymce/plugins/visualchars";
import "tinymce/plugins/template";
import "tinymce/plugins/charmap";
import "tinymce/plugins/nonbreaking";
import "tinymce/plugins/insertdatetime";
import "tinymce/plugins/imagetools";
import "tinymce/plugins/autosave";
import "tinymce/plugins/autoresize"; 
 
export default {
  components: {
    Editor
  },
  props: {
    value: {
      type: String,
      default: ""
    },
    disabled: {
      type: Boolean,
      default: false
    },
    plugins: {
      type: [String, Array],
      default:
        "preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr nonbreaking insertdatetime advlist lists wordcount imagetools textpattern autosave autoresize"
    },
    toolbar: {
      type: [String, Array],
      default:
        "code undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link codesample | alignleft aligncenter alignright alignjustify outdent indent formatpainter | \
    styleselect formatselect fontselect fontsizeselect | bullist numlist | blockquote subscript superscript removeformat | \
    table image media charmap hr pagebreak insertdatetime | fullscreen preview"
    }
  },
  data() {
    return {
      //初始化配置
      init: {
        //menubar: true, // 菜单栏显隐
        language_url: "/static/tinymce/langs/zh_CN.js",
        //language_url: '../../static/tinymce/langs/zh_CN.js', // vue-cli2.x
        language: "zh_CN",
        skin_url: "/static/tinymce/skins/ui/oxide",
        //skin_url: '../../static/tinymce/skins/ui/oxide', // vue-cli2.x
        //content_css: '../../static/tinymce/skins/content/default/content.css',// vue-cli2.x
        height: 770,
        min_height: 770,
        max_height: 770,
        toolbar_mode: "wrap",
        plugins: this.plugins,
        toolbar: this.toolbar,
        content_style: "p {margin: 5px 0;}",
        fontsize_formats: "12px 14px 16px 18px 24px 36px 48px 56px 72px",
        font_formats:
          "微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",
        branding: false,
        // 图片上传
        images_upload_handler: (blobInfo, success, failure) =&gt; {
          // const img = 'data:image/jpeg;base64,' + blobInfo.base64()
          // success(img)
 
          const formData = new FormData()
          formData.append('file', blobInfo.blob())
          reserveTableFoodDescribe(formData).then(res =&gt; {
            if (res.code === '10000') {
              const file = res.data
              success(file.url)
              return
            }
            failure('上传失败')
          }).catch(() =&gt; {
            failure('上传出错')
          })
        }
      },
      content: this.value
    };
  },
  mounted() {
    tinymce.init({});
  },
  methods: {
    
  },
  watch: {
    value(newValue) {
      this.content = newValue;
    },
    content(newValue) {
      this.$emit("input", newValue);
    }
  }
};
&lt;/script&gt;
&lt;style scoped lang="scss"&gt;
&lt;/style&gt;
</code></pre> 
<p>2、使用组件</p> 
<pre><code class="prism language-vue">&lt;editor v-model="yourContent"&gt;&lt;/editor&gt;

import Editor from "@/components/imcoder-tinymce";
components: { Editor },
</code></pre> 
<h5><a id="vue2_372"></a>vue2应用实例-完整版</h5> 
<pre><code class="prism language-vue">&lt;template&gt;
  &lt;div class="tinymce-editor"&gt;
    &lt;editor :id="tinymceId" v-model.trim="myValue" :init="init" v-bind="$attrs" v-on="inputListeners"&gt;
    &lt;/editor&gt;
  &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
// 文档 http://tinymce.ax-z.cn/
// 引入组件
import tinymce from 'tinymce/tinymce' // tinymce默认hidden，不引入不显示
import Editor from '@tinymce/tinymce-vue'
// 引入富文本编辑器主题的js和css
import 'tinymce/skins/content/default/content.css'
import 'tinymce/themes/silver'
import 'tinymce/icons/default/icons.min.js' // 解决了icons.js 报错Unexpected token '&lt;'
// 编辑器插件plugins
// 更多插件参考：https://www.tiny.cloud/docs/plugins/
import 'tinymce/plugins/image' // 插入上传图片插件
import 'tinymce/plugins/media' // 插入视频插件
import 'tinymce/plugins/table' // 插入表格插件
import 'tinymce/plugins/lists' // 列表插件
import 'tinymce/plugins/wordcount' // 字数统计插件
import 'tinymce/plugins/link'
import 'tinymce/plugins/code'
import 'tinymce/plugins/preview'
import 'tinymce/plugins/fullscreen'
import 'tinymce/plugins/help'
export default {
  inheritAttrs: false,
  components: {
    Editor,
  },
  name: 'Tinymce',
  props: {
    id: {
      type: String,
      default: function () {
        return new Date().getTime() + ''
      },
    },
    value: {
      type: String,
      default: '',
    },
    height: {
      type: Number,
      default: 300,
    },
    plugins: {
      type: [String, Array],
      default: 'link lists image code table wordcount media preview fullscreen help',
    },
    toolbar: {
      type: [String, Array],
      default:
        'bold italic underline strikethrough | fontsizeselect | formatselect | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent blockquote | undo redo | link unlink code lists table image media | removeformat | fullscreen preview',
    },
  },
  data() {
    const that = this
    return {
      // 自动生成的id
      tinymceId: this.id,
      init: {
        selector: `#${this.tinymceId}`,
        language_url: '/tinymce/langs/zh_CN.js', // 语言包的路径
        language: 'zh_CN', //语言
        skin_url: '/tinymce/skins/ui/oxide', // skin路径
        height: this.height, //编辑器高度
        branding: false, //是否禁用“Powered by TinyMCE”
        menubar: false, //顶部菜单栏显示
        statusbar: false, //是否显示底部的状态栏
        plugins: this.plugins,
        toolbar: this.toolbar, // （自定义工具栏）
        // 此处为图片上传处理函数，这个直接用了base64的图片形式上传图片，
        // 如需ajax上传可参考https://www.tiny.cloud/docs/configure/file-image-upload/#images_upload_handler
        images_upload_handler: (blobInfo, success, failure) =&gt; {
          const img = 'data:image/jpeg;base64,' + blobInfo.base64()
          success(img)
        },
        setup: (editor) =&gt; {
          // 初次化编辑器
          editor.on('init', () =&gt; {
            that.isInit = true //告知是初始化\
            if (that.value) {
              editor.setContent(that.value)
              that.isInit = false
            }
            editor.on('input change undo redo', () =&gt; {
              // this.value = editor.getContent()
              //此处设置为false很好解决光标前置问题
              that.isInit = false
            })
          })
        },
      },
      myValue: this.value,
      isInit: false, //是否初始化
    }
  },
  computed: {
    inputListeners() {
      const newListeners = {
        ...this.$listeners,
        input: (event) =&gt; {
          this.$emit('input', event)
        },
      }
      return newListeners
    },
  },
  mounted() {
    tinymce.init({})
  },
  beforeDestroy: function () {
    tinymce.remove(this.tinymceId)
  },
  methods: {
    /**
     * 获取富文本text类型内容
     */
    getTextContent(){
      const editor = tinymce.get(this.tinymceId)
      return editor.getContent({'format' : 'text'})
    }
  },
  watch: {
    value(val) {
      //用户vue绑定回显
      if (this.isInit) {
        this.isInit = false
        this.$nextTick(() =&gt; {
          const editor = tinymce.get(this.tinymceId)
          editor.setContent(val) 
        })
      }
    },
  },
}
&lt;/script&gt;
</code></pre> 
<h5><a id="4TinyMCE_517"></a>4、TinyMCE菜单配置详解</h5> 
<p>工具栏配置示例</p> 
<pre><code class="prism language-js">tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  	<span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'#mytextarea'</span><span class="token punctuation">,</span>
	<span class="token literal-property property">language</span><span class="token operator">:</span><span class="token string">'zh_CN'</span><span class="token punctuation">,</span><span class="token comment">//注意大小写</span>
	<span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token string">'undo redo | styleselect | bold italic | link image'</span><span class="token comment">//工具栏配置</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<h6><a id="41_530"></a>4.1、启用和停用菜单栏</h6> 
<p>通过init配置项<code>menubar</code>来配置菜单栏是否启用的项目和显示的顺序。</p> 
<pre><code class="prism language-js">tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'#textarea1'</span><span class="token punctuation">,</span>  <span class="token comment">// change this value according to your HTML</span>
  <span class="token comment">//启用菜单栏并显示如下项 [文件 编辑 插入 格式 表格]</span>
  <span class="token literal-property property">menubar</span><span class="token operator">:</span> <span class="token string">'file edit insert view format table'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'#textarea2'</span><span class="token punctuation">,</span>  <span class="token comment">// change this value according to your HTML</span>
  <span class="token comment">//禁用菜单栏</span>
  <span class="token literal-property property">menubar</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="42_548"></a>4.2、配置菜单项</h6> 
<p>每个菜单在经过上面的配置后都会有一个默认的子菜单。<br> 如果想自己定义每个菜单的子菜单项需要通过<code>menu</code>配置。<br> <code>title</code>对应在menubar中对应的项。<br> <code>items</code>为在各个菜单总显示的功能的名称<br> <code>|</code>为分割符号会将菜单分割为几个部分</p> 
<pre><code class="prism language-js">tinymce<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">selector</span><span class="token operator">:</span> <span class="token string">'#textarea1'</span><span class="token punctuation">,</span>  <span class="token comment">// change this value according to your HTML</span>
  <span class="token comment">//启用菜单栏并显示如下项 [文件 编辑 插入 格式 表格]</span>
  <span class="token literal-property property">menubar</span><span class="token operator">:</span> <span class="token string">'file edit insert view format table'</span><span class="token punctuation">,</span>
  <span class="token comment">// 配置每个菜单栏的子菜单项（如下是默认配置）</span>
  <span class="token literal-property property">menu</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">file</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'File'</span><span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token string">'newdocument'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">edit</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Edit'</span><span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token string">'undo redo | cut copy paste pastetext | selectall'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">insert</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Insert'</span><span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token string">'link media | template hr'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">view</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'View'</span><span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token string">'visualaid'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">format</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Format'</span><span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token string">'bold italic underline strikethrough superscript subscript | formats | removeformat'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">table</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'Table'</span><span class="token punctuation">,</span> <span class="token literal-property property">items</span><span class="token operator">:</span> <span class="token string">'inserttable tableprops deletetable | cell row column'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="43_573"></a>4.3、配置菜单项参数</h6> 
<p>菜单配置项指的是各个子菜单的项。<br> 所属插件为核心的项为基本包里自带的功能，直接写在<code>menu</code>的<code>items</code>项里就可以，<br> 属于插件的项需要引入插件(<code>plugins: '插件名'</code>)然后在<code>menu</code>的<code>items</code>中配置。</p> 
<p>配置项 所属插件 描述<br> newdocument 核心 创建新文档<br> bold 核心 加粗<br> italic 核心 斜体<br> underline 核心 下划线<br> strikethrough 核心 删除线<br> alignleft 核心 居左<br> aligncenter 核心 居中<br> alignright 核心 居右<br> alignjustify 核心 两端对齐<br> alignnone 核心 清除<br> styleselect 核心 格式选择下拉框(缩进、行高)<br> formatselect 核心 段落选择下拉框(段落、标题)<br> fontselect 核心 字体选择下拉框<br> fontsizeselect 核心 字号选择下拉框<br> cut 核心 剪切<br> copy 核心 复制<br> paste 核心 粘贴<br> outdent 核心 减少缩进<br> indent 核心 增加缩进<br> blockquote 核心 引用<br> undo 核心 撤消<br> redo 核心 恢复<br> removeformat 核心 清除格式<br> subscript 核心 下标<br> superscript 核心 上标<br> visualaid 核心 网格线<br> insert 核心 插入的集合按钮<br> hr hr 水平线<br> bullist lists 无序列表<br> numlist lists 有序列表<br> link link 添加和修改链接<br> unlink link 去除链接格式<br> openlink link 打开选中链接<br> image image 添加和修改图片<br> charmap charmap 特殊符号<br> pastetext paste 粘贴纯文本<br> print print 打印<br> preview preview 预览<br> anchor anchor 作者<br> pagebreak pagebreak 分页符<br> spellchecker spellchecker 拼写检查<br> searchreplace searchreplace 搜索<br> visualblocks visualblocks 隐藏块级区域开关<br> visualchars visualchars 隐藏字符串开关.<br> code code 代码<br> help help 帮助<br> fullscreen fullscreen 全屏<br> insertdatetime insertdatetime 插入时间<br> media media 插入/编辑媒体文件<br> nonbreaking nonbreaking 不间断空格<br> save save 保存(ajax)<br> cancel save 取消保存<br> table table 插入/编辑表格<br> tabledelete table 删除表格<br> tablecellprops table 单元格属性<br> tablemergecells table 合并单元格<br> tablesplitcells table 拆分单元格<br> tableinsertrowbefore table 在当前行之前插入一个新行<br> tableinsertrowafter table 在当前行之后插入一个新行<br> tabledeleterow table 删除当前行<br> tablerowprops table 行属性<br> tablecutrow table 剪切选定行<br> tablecopyrow table 复制选定行<br> tablepasterowbefore table 在当前行之前粘贴行<br> tablepasterowafter table 在当前行之后粘贴行<br> tableinsertcolbefore table 在当前列之前插入一个列<br> tableinsertcolafter table 在当前列之后插入一个列.<br> tabledeletecol table 删除当前列<br> rotateleft imagetools 逆时针旋转当前图像<br> rotateright imagetools 顺时针旋转当前图像<br> flipv imagetools 垂直翻转当前图像<br> fliph imagetools 水平翻转当前图像<br> editimage imagetools 打开图像编辑对话框<br> imageoptions imagetools 打开图像配置对话框<br> fullpage fullpage 完整页面的文档属性<br> ltr directionality 设置编写方向从左到右<br> rtl directionality 设置编写方向从右到左<br> emoticons emoticons 表情<br> template template 插入模板<br> forecolor textcolor 文本颜色<br> backcolor textcolor 背景颜色<br> restoredraft restoredraft 恢复到最新的自动保存草稿<br> insertfile moxiemanager 引入文件<br> a11ycheck a11ychecker 检查访问性<br> toc toc 插入目录<br> quickimage inlite 插入本地图像<br> quicktable inlite 插入2X2的表格<br> quicklink inlite 插入连接</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63d94a15b08e1e80598e8cc42b264129/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python 数据获取（一）—— request模块、变量使用与传参方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03a5b0847a58a25cd895d279b0891486/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">从0开始的高翔SLAM十四讲环境配置（ch2-ch3）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>