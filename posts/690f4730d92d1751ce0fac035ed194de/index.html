<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue-uniapp笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue-uniapp笔记" />
<meta property="og:description" content="一、Pages生命周期 uni-app 支持如下页面生命周期函数：
函数名说明平台差异说明最低版本onInit监听页面初始化，其参数同 onLoad 参数，为上个页面传递的数据，参数类型为 Object（用于页面传参），触发时机早于 onLoad百度小程序3.1.0&#43;onLoad监听页面加载，其参数为上个页面传递的数据，参数类型为 Object（用于页面传参），参考示例onShow监听页面显示。页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面onReady监听页面初次渲染完成。注意如果渲染速度快，会在页面进入动画完成前触发onHide监听页面隐藏onUnload监听页面卸载onResize监听窗口尺寸变化App、微信小程序、快手小程序onPullDownRefresh监听用户下拉动作，一般用于下拉刷新，参考示例onReachBottom页面滚动到底部的事件（不是scroll-view滚到底），常用于下拉下一页数据。具体见下方注意事项onTabItemTap点击 tab 时触发，参数为Object，具体见下方注意事项微信小程序、QQ小程序、支付宝小程序、百度小程序、H5、App、快手小程序、京东小程序onShareAppMessage用户点击右上角分享微信小程序、QQ小程序、支付宝小程序、字节小程序、飞书小程序、快手小程序、京东小程序onPageScroll监听页面滚动，参数为Objectnvue暂不支持onNavigationBarButtonTap监听原生标题栏按钮点击事件，参数为ObjectApp、H5onBackPress监听页面返回，返回 event = {from:backbutton、 navigateBack} ，backbutton 表示来源是左上角返回按钮或 android 返回键；navigateBack表示来源是 uni.navigateBack ；详细说明及使用：onBackPress 详解 (opens new window)。支付宝小程序只有真机能触发，只能监听非navigateBack引起的返回，不可阻止默认行为。app、H5、支付宝小程序onNavigationBarSearchInputChanged监听原生标题栏搜索输入框输入内容变化事件App、H51.6.0onNavigationBarSearchInputConfirmed监听原生标题栏搜索输入框搜索事件，用户点击软键盘上的“搜索”按钮时触发。App、H51.6.0onNavigationBarSearchInputClicked监听原生标题栏搜索输入框点击事件（pages.json 中的 searchInput 配置 disabled 为 true 时才会触发）App、H51.6.0onShareTimeline监听用户点击右上角转发到朋友圈微信小程序2.8.1&#43;onAddToFavorites监听用户点击右上角收藏微信小程序2.8.1&#43; 仅百度小程序基础库 3.260 以上支持 onInit 生命周期
其他版本或平台可以同时使用 onLoad 生命周期进行兼容，注意避免重复执行相同逻辑
不依赖页面传参的逻辑可以直接使用 created 生命周期替代
onLoad(获取参数,一次) – onShow(每次切换tabbar/回退都会触发)— created (也是一次,不能获取参数)– onReady(也是一次,,可以操作dom对象) - mounted(也是执行一次，只不过数据变更会再次触发) 二、uniapp路由内置 vue-router 这个组件，已经内置，不需要自己手动集成
1：在pages目录下新建对应页面模板即可
2：它会自动创建好的页面模板注册到pages.json中。
3：然后我们可以在页面中或者tabbar去进行调整和转发
4：一种是标签的方式，一种是js的方式
&lt;navigator url=&#34;../detail/detail&#34;&gt; open-type 默认是：navigate 保留当前页面，跳转到应用内的某个页面
特点是：在头部左上角有一个回退按钮
open-type 是：redirect 关闭当前页面，跳转到应用内的某个页面。
特点是：没有回退按钮。也没有tabbar。如果要离开就代表退出
一般用来：跳转登录，跳转注册。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/690f4730d92d1751ce0fac035ed194de/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-20T16:51:34+08:00" />
<meta property="article:modified_time" content="2022-06-20T16:51:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue-uniapp笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、Pages生命周期</h2> 
<p><code>uni-app</code> 支持如下页面生命周期函数：</p> 
<table><thead><tr><th>函数名</th><th>说明</th><th>平台差异说明</th><th>最低版本</th></tr></thead><tbody><tr><td>onInit</td><td>监听页面初始化，其参数同 onLoad 参数，为上个页面传递的数据，参数类型为 Object（用于页面传参），触发时机早于 onLoad</td><td>百度小程序</td><td>3.1.0+</td></tr><tr><td>onLoad</td><td>监听页面加载，其参数为上个页面传递的数据，参数类型为 Object（用于页面传参），参考<a href="https://uniapp.dcloud.io/api/router?id=navigateto" rel="nofollow" title="示例">示例</a></td><td></td><td></td></tr><tr><td>onShow</td><td>监听页面显示。页面每次出现在屏幕上都触发，包括从下级页面点返回露出当前页面</td><td></td><td></td></tr><tr><td>onReady</td><td>监听页面初次渲染完成。注意如果渲染速度快，会在页面进入动画完成前触发</td><td></td><td></td></tr><tr><td>onHide</td><td>监听页面隐藏</td><td></td><td></td></tr><tr><td>onUnload</td><td>监听页面卸载</td><td></td><td></td></tr><tr><td>onResize</td><td>监听窗口尺寸变化</td><td>App、微信小程序、快手小程序</td><td></td></tr><tr><td>onPullDownRefresh</td><td>监听用户下拉动作，一般用于下拉刷新，参考<a href="https://uniapp.dcloud.io/api/ui/pulldown" rel="nofollow" title="示例">示例</a></td><td></td><td></td></tr><tr><td>onReachBottom</td><td>页面滚动到底部的事件（不是scroll-view滚到底），常用于下拉下一页数据。具体见下方注意事项</td><td></td><td></td></tr><tr><td>onTabItemTap</td><td>点击 tab 时触发，参数为Object，具体见下方注意事项</td><td>微信小程序、QQ小程序、支付宝小程序、百度小程序、H5、App、快手小程序、京东小程序</td><td></td></tr><tr><td>onShareAppMessage</td><td>用户点击右上角分享</td><td>微信小程序、QQ小程序、支付宝小程序、字节小程序、飞书小程序、快手小程序、京东小程序</td><td></td></tr><tr><td>onPageScroll</td><td>监听页面滚动，参数为Object</td><td>nvue暂不支持</td><td></td></tr><tr><td>onNavigationBarButtonTap</td><td>监听原生标题栏按钮点击事件，参数为Object</td><td>App、H5</td><td></td></tr><tr><td>onBackPress</td><td>监听页面返回，返回 event = {from:backbutton、 navigateBack} ，backbutton 表示来源是左上角返回按钮或 android 返回键；navigateBack表示来源是 uni.navigateBack ；详细说明及使用：<a href="http://ask.dcloud.net.cn/article/35120" rel="nofollow" title="onBackPress 详解 (opens new window)">onBackPress 详解 (opens new window)</a>。支付宝小程序只有真机能触发，只能监听非navigateBack引起的返回，不可阻止默认行为。</td><td>app、H5、支付宝小程序</td><td></td></tr><tr><td>onNavigationBarSearchInputChanged</td><td>监听原生标题栏搜索输入框输入内容变化事件</td><td>App、H5</td><td>1.6.0</td></tr><tr><td>onNavigationBarSearchInputConfirmed</td><td>监听原生标题栏搜索输入框搜索事件，用户点击软键盘上的“搜索”按钮时触发。</td><td>App、H5</td><td>1.6.0</td></tr><tr><td>onNavigationBarSearchInputClicked</td><td>监听原生标题栏搜索输入框点击事件（pages.json 中的 searchInput 配置 disabled 为 true 时才会触发）</td><td>App、H5</td><td>1.6.0</td></tr><tr><td>onShareTimeline</td><td>监听用户点击右上角转发到朋友圈</td><td>微信小程序</td><td>2.8.1+</td></tr><tr><td>onAddToFavorites</td><td>监听用户点击右上角收藏</td><td>微信小程序</td><td>2.8.1+</td></tr></tbody></table> 
<ul><li> <p>仅百度小程序基础库 3.260 以上支持 onInit 生命周期</p> </li><li> <p>其他版本或平台可以同时使用 onLoad 生命周期进行兼容，注意避免重复执行相同逻辑</p> </li><li> <p>不依赖页面传参的逻辑可以直接使用 created 生命周期替代</p> </li></ul> 
<blockquote> 
 <p><strong>onLoad(获取参数,一次) – onShow(每次切换tabbar/回退都会触发)— created (也是一次,不能获取参数)– onReady(也是一次,,可以操作dom对象) - mounted(也是执行一次，只不过数据变更会再次触发)  </strong></p> 
</blockquote> 
<h2>二、uniapp路由内置</h2> 
<blockquote> 
 <p>vue-router 这个组件，已经内置，不需要自己手动集成</p> 
</blockquote> 
<p>1：在pages目录下新建对应页面模板即可</p> 
<p>2：它会自动创建好的页面模板注册到pages.json中。</p> 
<p>3：然后我们可以在页面中或者tabbar去进行调整和转发</p> 
<p>4：一种是标签的方式，一种是js的方式</p> 
<h3></h3> 
<pre><code class="language-javascript">&lt;navigator url="../detail/detail"&gt;</code></pre> 
<h4>open-type 默认是：navigate</h4> 
<p>保留当前页面，跳转到应用内的某个页面</p> 
<p>特点是：在头部左上角有一个回退按钮</p> 
<p></p> 
<h4>open-type 是：redirect</h4> 
<p>关闭当前页面，跳转到应用内的某个页面。</p> 
<p>特点是：没有回退按钮。也没有tabbar。如果要离开就代表退出</p> 
<p>一般用来：跳转登录，跳转注册。</p> 
<p></p> 
<h4>open-type 是：switchTab</h4> 
<p>跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面。</p> 
<p>特点：<strong>如果pages.json的路径一旦使用到tabbar中，就只能使用switchTab</strong></p> 
<p></p> 
<h4>open-type 是：reLaunch</h4> 
<p>关闭所有页面，打开到应用内的某个页面。</p> 
<p>特点：它是navigate 的升级版本，因为在开发打开页面非常多，A–B–C–D–F。关闭历史步骤，类似退出页</p> 
<p></p> 
<h4>open-type 是：navigateBack</h4> 
<p>关闭当前页面，返回上一页面或多级页面。可通过 <code>getCurrentPages()</code> 获取当前的页面栈，决定需要返回几层。</p> 
<p>特点是：自定回退，从哪里来回哪里去</p> 
<p></p> 
<p><strong>open-type 有效值</strong></p> 
<table><thead><tr><th>值</th><th>JS方式</th><th>平台差异说明</th></tr></thead><tbody><tr><td>navigate</td><td>对应 uni.navigateTo 的功能</td><td></td></tr><tr><td>redirect</td><td>对应 uni.redirectTo 的功能</td><td></td></tr><tr><td>switchTab</td><td>对应 uni.switchTab 的功能</td><td></td></tr><tr><td>reLaunch</td><td>对应 uni.reLaunch 的功能</td><td>字节跳动小程序与飞书小程序不支持</td></tr><tr><td>navigateBack</td><td>对应 uni.navigateBack 的功能</td><td></td></tr><tr><td>exit</td><td>退出小程序，target="miniProgram"时生效</td><td>微信2.1.0+、百度2.5.2+、QQ1.4.7+</td></tr></tbody></table> 
<h2>三、<strong>UniApp和Vue-cli的开发注意事项</strong></h2> 
<p>uniapp是改造vue，底层还是使用vue-cli做为脚手架。</p> 
<h3>认知uniapp：</h3> 
<p>1、uniapp不能去写div,span,只能用官方提供的组件标签或者自定义标签。</p> 
<p>用view取代-div,h1 用text取代了span</p> 
<p>2、uniapp不需要你安装组件，安装 vue，安装sass 、因为uniapp的hbuilderx会内置进去。你直接使用即可。</p> 
<p>你在项目中压根看不到node_modules这个文件夹。</p> 
<p>3、异步处理怎么办？</p> 
<pre><code class="language-javascript">uni.request({
    url: 'https://www.example.com/request', //仅为示例，并非真实接口地址。
    data: {
        text: 'uni.request'
    },
    header: {
        'custom-header': 'hello' //自定义请求头信息
    },
    success: (res) =&gt; {
        console.log(res.data);
        this.text = 'request success';
    }
});</code></pre> 
<p>4、组件的注册和使用呢?</p> 
<ul><li> <p>组件是视图层的基本组成单元。</p> </li><li> <p>组件是一个单独且可复用的功能模块的封装。</p> </li><li> <p>一个组件包括开始标签和结束标签，标签上可以写属性，并对属性赋值。内容则写在两个标签之内。</p> 
  <ul><li> <p>根节点为 <code>&lt;template&gt;</code>，这个 <code>&lt;template&gt;</code> 下只能且必须有一个根 <code>&lt;view&gt;</code> 组件。这是<a href="https://cn.vuejs.org/v2/guide/single-file-components.html" rel="nofollow" title="vue单文件组件规范 (opens new window)">vue单文件组件规范 (opens new window)</a>。</p> </li><li> <p>一个组件的 data 选项必须是一个函数。</p> </li></ul></li></ul> 
<h2>四、组件注册</h2> 
<h4>1、局部注册</h4> 
<pre><code class="language-javascript">	&lt;!-- 在index.vue引入 uni-badge 组件--&gt;
	&lt;template&gt;
		&lt;view&gt;
			&lt;uni-badge text="1"&gt;&lt;/uni-badge&gt;&lt;!-- 3.使用组件 --&gt;
		&lt;/view&gt;
	&lt;/template&gt;
	&lt;script&gt;
		import uniBadge from '@/components/uni-badge/uni-badge.vue';//1.导入组件（这步属于传统vue规范，但在uni-app的easycom下可以省略这步）
		export default {
			components:{uniBadge }//2.注册组件（这步属于传统vue规范，但在uni-app的easycom下可以省略这步） 
		}
	&lt;/script&gt;</code></pre> 
<h4>2、全局注册</h4> 
<p><code>main.js</code> 里进行全局导入和注册</p> 
<pre><code class="language-javascript">	import Vue from 'vue'
	import pageHead from './components/page-head.vue'
	Vue.component('page-head',pageHead)</code></pre> 
<p></p> 
<p> 页面中直接使用组件</p> 
<h4>3、插件注册</h4> 
<p><img alt="" height="300" src="https://images2.imgbox.com/b8/19/DQbuarAh_o.png" width="922"></p> 
<p> main.js</p> 
<pre><code class="language-javascript">import KsdUi from '@/components/index.js';
Vue.use(KsdUi);</code></pre> 
<p>index.js</p> 
<pre><code class="language-javascript">import ksdTab from '@/components/ksd-table/ksd-table.vue';
export default{
    install(vm){
        vm.components("ksdTab",ksdTab);
    }
}</code></pre> 
<p>页面中直接使用组件</p> 
<h4>4、官网组件精简为一步</h4> 
<p><strong>通过uni-app的<a href="https://uniapp.dcloud.io/collocation/pages?id=easycom" rel="nofollow" title="easycom (opens new window)">easycom (opens new window)</a>：</strong> 将组件引入精简为一步。只要组件安装在项目的 <code>components</code> 目录下，并符合 <code>components/组件名称/组件名称.vue</code> 目录结构。就可以不用引用、注册，直接在页面中使用。</p> 
<p><img alt="" height="150" src="https://images2.imgbox.com/4f/7a/L0MWJ1LG_o.png" width="1200"></p> 
<h2>五、组件中$refs中的使用</h2> 
<p>子页面</p> 
<pre><code class="language-javascript">&lt;template&gt;
	&lt;view&gt;
		我是一个子组件
	&lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
	export default {
		name:"pug-test",
		data() {
			return {
				
			};
		},
		methods:{
			loadComment(){
				console.log("===========okokokok===========")
			}
		}
	}
&lt;/script&gt;

&lt;style&gt;

&lt;/style&gt;
</code></pre> 
<p>父页面</p> 
<pre><code class="language-javascript">&lt;template&gt;
	&lt;view&gt;
		&lt;view class="flex"&gt;Ref的讲解和分析&lt;/view&gt;
		&lt;pug-test ref="comment"&gt;&lt;/pug-test&gt;
		&lt;button @click="saveUser"&gt;保存&lt;/button&gt;
				
	&lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
	export default {
		data() {
			return {
				
			}
		},
		methods: {
			saveUser(){
				this.$refs.comment.loadComment();
			}
		}
	}
&lt;/script&gt;

&lt;style&gt;
	.flex{display: flex;justify-content: center;background:#ddd;
		padding:10px;
	}
	
	input[type='text']{border:1px solid #ccc;}
&lt;/style&gt;
</code></pre> 
<p></p> 
<p></p> 
<h3></h3> 
<h2> 六、第三方组件注册</h2> 
<h3>1、导入插件到项目中</h3> 
<p><a href="https://ext.dcloud.net.cn/plugin?id=1593" rel="nofollow" title="uView2.0重磅发布，利剑出鞘，一统江湖 - DCloud 插件市场">uView2.0重磅发布，利剑出鞘，一统江湖 - DCloud 插件市场</a></p> 
<p><img alt="" height="654" src="https://images2.imgbox.com/69/21/RZOT7MRW_o.png" width="1200"></p> 
<p></p> 
<p></p> 
<h3>2：选择一个导入的工程</h3> 
<p><img alt="" height="596" src="https://images2.imgbox.com/ea/54/K0PmuCn0_o.png" width="1107"></p> 
<p></p> 
<p></p> 
<h3>3:在uni_modules中生成uview-ui的文件夹</h3> 
<p>uni_modules 这个文件并不是node_modules，所以要注意：在导入和集成的时候一定指定目录</p> 
<p><img alt="" height="367" src="https://images2.imgbox.com/3d/d3/RuO1RWV2_o.png" width="892"></p> 
<p></p> 
<p></p> 
<h3>4：集成uview-ui到项目中</h3> 
<p>打开main.js注册uview-ui如下：</p> 
<pre><code class="language-javascript">import App from './App'


// #ifndef VUE3
import Vue from 'vue'
import uView from '@/uni_modules/uview-ui'
Vue.use(uView)
Vue.config.productionTip = false
App.mpType = 'app'
const app = new Vue({
    ...App
})
app.$mount()
// #endif

// #ifdef VUE3
import { createSSRApp } from 'vue'
export function createApp() {
  const app = createSSRApp(App)
  return {
    app
  }
}
// #endif</code></pre> 
<p></p> 
<h3>5：uview-ui全局样式的导入</h3> 
<p>打开App.vue，配置如下：</p> 
<ul><li> <p>在hbuilder安装sass/less插件</p> </li><li> <p>一定在&lt;style lang="scss"&gt;</p> </li></ul> 
<pre><code class="language-javascript">&lt;style lang="scss"&gt;
	/*每个页面公共css */
	// @import '@/uni.css';
	@import '@/static/css/common.css';
	/*每个页面公共css */
	@import "@/uni_modules/uview-ui/index.scss";
&lt;/style&gt;</code></pre> 
<p></p> 
<h3>6：uview-ui的全局样式变量表的导入</h3> 
<p>在项目的根目录找打uni.css。把uview-ui的theme.css。导入其中即可。</p> 
<pre><code class="language-javascript">/**
 * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量
 * 使用的时候，请将下面的一行复制到您的uniapp项目根目录的uni.scss中即可
 * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 
 */

/*导入uview的样式变量参数*/
@import '@/uni_modules/uview-ui/theme.scss';</code></pre> 
<h3></h3> 
<h3>7、全局注册注册组件</h3> 
<p>在pages.json中使用easycom注册如下：</p> 
<pre><code class="language-javascript">"easycom": {
      "autoscan": true,
      "custom": {
        "^ksd-(.*)": "@/components/ksd-$1/ksd-$1.vue" ,
        "^u-(.*)": "@/uni_modules/uview-ui/components/u-$1/u-$1.vue",
        "^uni-(.*)": "@/uni_modules/uni-$1/components/uni-$1/uni-$1.vue",
        "^pug-(.*)": "@/ucomponent/pug-$1/pug-$1.vue" 
      }
    },</code></pre> 
<p></p> 
<h3>8：使用注册</h3> 
<pre><code class="language-javascript">&lt;template&gt;
    &lt;view&gt;
        &lt;u-calendar :show="show"&gt;&lt;/u-calendar&gt;
        &lt;u-button @click="show = true"&gt;打开&lt;/u-button&gt;
    &lt;/view&gt;
&lt;/template&gt;
​
&lt;script&gt;
    export default {
        data() {
            return {
                show: false,
            }
        }
    }
&lt;/script&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/13ac4ac4330b2d814836449d60c0c420/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">两步快速查询电脑GPU的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32d4f9a96dba8cfadf22ed218f59d757/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">uniapp webSocket聊天功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>