<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用docker部署一个简单的streamlit应用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用docker部署一个简单的streamlit应用" />
<meta property="og:description" content="文章目录 ✅ 1. 准备工作☑️ 1.1 streamlit脚本准备☑️ 1.2 Dockerfile准备▶️ 1.2.1模板▶️ 1.2.2 我个人的 ✅ 2. pip安装私有包✅ 3. docker build☑️ 3.1 构建镜像☑️ 3.2 运行容器☑️ 3.3 删除容器和镜像☑️ 3.4 后台运行容器/后台调回前面 ✅ 1. 准备工作 ☑️ 1.1 streamlit脚本准备 把你的streamlit应用涉及到的东西都放到一个文件夹里，该封装的封装好，保证最后可以直接使用
streamlit run XXX.py 这个直接运行，不要有多余的步骤
streamlit页面优化
在sidebar添加logo(通过使用st.sidebar.image()实现)：https://discuss.streamlit.io/t/inserting-image-at-side-bar/12114
在sidebar添加文字st.sidebar.text()实现：https://docs.streamlit.io/en/stable/api.html?highlight=sidebar#add-widgets-to-sidebar
修改sidebar颜色（自己通过浏览器控制台找到控制sidebar颜色的css类）：https://discuss.streamlit.io/t/how-to-set-the-background-color-of-st-sidebar/4888
大致代码：
st.sidebar.image(&#34;XXXX/logo.png&#34;, use_column_width=True) st.sidebar.text(&#34;联系我们：&#34;) st.sidebar.text(&#34;https://XXXX/&#34;) st.markdown( &#34;&#34;&#34; &lt;style&gt; .css-17eq0hr{ background-color: #182b45!important; color: white!important; background-image: none; } .css-j8zjtb{ font-size:1.0rem; } &lt;/style&gt; &#34;&#34;&#34;, unsafe_allow_html=True, ) 最后的效果大概是：
☑️ 1.2 Dockerfile准备 一般都是通过dockerfile文件来构建一个image镜像，然后通过镜像启动一个容器，启动容器的时候，在dockerfile里就配置了容器启动时要自动执行的命令，即streamlit run XXX." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/addce70606ce09835f32da8cab807131/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-07T14:05:42+08:00" />
<meta property="article:modified_time" content="2022-04-07T14:05:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用docker部署一个简单的streamlit应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1__1" rel="nofollow">✅ 1. 准备工作</a></li><li><ul><li><a href="#_11_streamlit_2" rel="nofollow">☑️ 1.1 streamlit脚本准备</a></li><li><a href="#_12_Dockerfile_43" rel="nofollow">☑️ 1.2 Dockerfile准备</a></li><li><ul><li><a href="#_121_48" rel="nofollow">▶️ 1.2.1模板</a></li><li><a href="#_122__77" rel="nofollow">▶️ 1.2.2 我个人的</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_2_pip_160" rel="nofollow">✅ 2. pip安装私有包</a></li><li><a href="#__3_docker_build_182" rel="nofollow">✅ 3. docker build</a></li><li><ul><li><a href="#_31__183" rel="nofollow">☑️ 3.1 构建镜像</a></li><li><a href="#_32__211" rel="nofollow">☑️ 3.2 运行容器</a></li><li><a href="#_33__224" rel="nofollow">☑️ 3.3 删除容器和镜像</a></li><li><a href="#_34__263" rel="nofollow">☑️ 3.4 后台运行容器/后台调回前面</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1__1"></a>✅ 1. 准备工作</h2> 
<h3><a id="_11_streamlit_2"></a>☑️ 1.1 streamlit脚本准备</h3> 
<p>把你的streamlit应用涉及到的东西都放到一个文件夹里，该封装的封装好，保证最后可以直接使用</p> 
<pre><code class="prism language-bash">streamlit run XXX.py
</code></pre> 
<p>这个直接运行，不要有多余的步骤</p> 
<p><strong>streamlit页面优化</strong></p> 
<ol><li> <p>在sidebar添加logo(通过使用<code>st.sidebar.image()</code>实现)：<a href="https://discuss.streamlit.io/t/inserting-image-at-side-bar/12114" rel="nofollow">https://discuss.streamlit.io/t/inserting-image-at-side-bar/12114</a></p> </li><li> <p>在sidebar添加文字<code>st.sidebar.text()</code>实现：<a href="https://docs.streamlit.io/en/stable/api.html?highlight=sidebar#add-widgets-to-sidebar" rel="nofollow">https://docs.streamlit.io/en/stable/api.html?highlight=sidebar#add-widgets-to-sidebar</a></p> </li><li> <p>修改sidebar颜色（自己通过浏览器控制台找到控制sidebar颜色的css类）：<a href="https://discuss.streamlit.io/t/how-to-set-the-background-color-of-st-sidebar/4888" rel="nofollow">https://discuss.streamlit.io/t/how-to-set-the-background-color-of-st-sidebar/4888</a></p> </li></ol> 
<p>大致代码：</p> 
<pre><code class="prism language-python">st<span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span>image<span class="token punctuation">(</span><span class="token string">"XXXX/logo.png"</span><span class="token punctuation">,</span> use_column_width<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
st<span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token string">"联系我们："</span><span class="token punctuation">)</span>
st<span class="token punctuation">.</span>sidebar<span class="token punctuation">.</span>text<span class="token punctuation">(</span><span class="token string">"https://XXXX/"</span><span class="token punctuation">)</span>
st<span class="token punctuation">.</span>markdown<span class="token punctuation">(</span>
    <span class="token triple-quoted-string string">"""
&lt;style&gt;
.css-17eq0hr{
    background-color: #182b45!important;
    color: white!important;
    background-image: none;
    
}
.css-j8zjtb{
    font-size:1.0rem;
}
&lt;/style&gt;
"""</span><span class="token punctuation">,</span>
    unsafe_allow_html<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

</code></pre> 
<p>最后的效果大概是：<br> <img src="https://images2.imgbox.com/c7/97/rQIjqxF0_o.png" alt="在这里插入图片描述" width="600"></p> 
<h3><a id="_12_Dockerfile_43"></a>☑️ 1.2 Dockerfile准备</h3> 
<p>一般都是通过dockerfile文件来构建一个image镜像，然后通过镜像启动一个容器，启动容器的时候，在dockerfile里就配置了容器启动时要自动执行的命令，即<code>streamlit run XXX.py</code></p> 
<p>dockerfile文件的书写介绍如下</p> 
<h4><a id="_121_48"></a>▶️ 1.2.1模板</h4> 
<pre><code class="prism language-bash"><span class="token comment"># This dockerfile uses the ubuntu image</span>
<span class="token comment"># VERSION 2 - EDITION 1</span>
<span class="token comment"># Author: docker_user</span>
<span class="token comment"># Command format: Instruction [arguments / command] ..</span>

<span class="token comment"># 一开始要指明所基于的镜像名称</span>
<span class="token comment"># Base image to use, this must be set as the first line</span>
FROM ubuntu

<span class="token comment"># 说明维护者信息</span>
<span class="token comment"># Maintainer: docker_user &lt;docker_user at email.com&gt; (@docker_user)</span>
MAINTAINER docker_user docker_user@email.com

<span class="token comment"># 镜像操作指令，例如 RUN 指令，RUN 指令将对镜像执行跟随的命令。</span>
<span class="token comment"># 每运行一条 RUN 指令，镜像添加新的一层，并提交。</span>
<span class="token comment"># Commands to update the image</span>
RUN <span class="token builtin class-name">echo</span> <span class="token string">"deb http://archive.ubuntu.com/ubuntu/ raring main universe"</span> <span class="token operator">&gt;&gt;</span> /etc/apt/sources.list
RUN <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y nginx
RUN <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token entity" title="\n">\n</span>daemon off;"</span> <span class="token operator">&gt;&gt;</span> /etc/nginx/nginx.conf

<span class="token comment"># CMD 指令，来指定运行容器时的操作命令</span>
<span class="token comment"># Commands when creating a new container</span>
CMD /usr/sbin/nginx
</code></pre> 
<ul><li>Dockerfile 由一行行命令语句组成，并且支持以 # 开头的注释行。</li><li>一般的，Dockerfile 分为四部分：基础镜像信息、维护者信息、镜像操作指令和容器启动时执行指令。</li></ul> 
<h4><a id="_122__77"></a>▶️ 1.2.2 我个人的</h4> 
<hr> 
<p><strong>获取基础镜像</strong><br> 如果之前是使用docker构建的基本环境，然后在里面重新安装的stremalit，那么可以使用下面语句来查看自己的基础镜像</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> inspect IQA（容器的名称或者ID）
<span class="token comment"># 返回一个很长的json字符串，</span>
<span class="token operator">&gt;</span> <span class="token string">"Config"</span>:<span class="token punctuation">{<!-- --></span>
	<span class="token string">"Image"</span><span class="token builtin class-name">:</span> <span class="token string">"pytorch/pytorch:1.7.0-cuda11.0-cudnn8-runtime"</span>,
<span class="token punctuation">}</span>
</code></pre> 
<p>就可以看到基础镜像了（我的场景是需要用streamlit展示一个pytorch的CV相关模型，所以选择了pytorch作为基础镜像）</p> 
<p>书写格式，看了几个例子，如下：</p> 
<pre><code class="prism language-bash">FROM ubuntu
FROM registry.baidubce.com/paddlepaddle/paddle:2.0.0-gpu-cuda10.1-cudnn7
FROM ddebby/ai:v0.1.0
</code></pre> 
<p>除了获取基础镜像，还需要</p> 
<ol><li>把需要的文件复制到开启的容器中，</li><li>安装必要的包</li><li>设置容器开机运行的指令</li></ol> 
<p>我的项目比较简单，文件结构：</p> 
<pre><code class="prism language-bash"><span class="token operator">|</span>--serving
	<span class="token operator">|</span>-- dockerfile
	<span class="token operator">|</span>-- streamlit.py
</code></pre> 
<p>构建镜像的时候，肯定是切到这个目录下，所以dockerfile中移动文件的语句一般就是直接当前文件夹下的</p> 
<p>在进行过上述步骤后，dockerfile文件大致如下：</p> 
<pre><code class="prism language-bash"><span class="token comment"># 基础镜像</span>
FROM pytorch/pytorch:1.7.0-cuda11.0-cudnn8-runtime

<span class="token comment"># 镜像维护者</span>
MAINTAINER user user@XXX.com

<span class="token comment"># 把需要使用的文件复制过去，如果是多个文件，就放一个文件夹</span>
COPY streamlit.py ./streamlit.py

<span class="token comment"># 要在基础镜像里干点啥，</span>
RUN <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token function">git</span>
<span class="token comment"># 如果默认镜像里没有git，就要先安装git</span>
RUN pip <span class="token function">install</span> git+http://0.0.0.7:8080/huangs/repo.git --user
RUN pip <span class="token function">install</span> streamlit -i https://pypi.tuna.tsinghua.edu.cn/simple
<span class="token comment"># 如果streamlit按的很慢，可以换个源</span>

<span class="token comment"># 开放容器的8501端口，因为streamlit默认端口是8501</span>
EXPOSE <span class="token number">8501</span>

<span class="token comment"># 配置容器启动后执行的命令，并且不可被 docker run 提供的参数覆盖。</span>
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"streamlit"</span>, <span class="token string">"run"</span><span class="token punctuation">]</span>
CMD <span class="token punctuation">[</span><span class="token string">"streamlit.py"</span><span class="token punctuation">]</span>
<span class="token comment"># 上面两个指令合到一起就是 stremlit run streamlit.py</span>

</code></pre> 
<p>简单解释下，参考 <a href="http://www.dockerinfo.net/dockerfile%E4%BB%8B%E7%BB%8D" rel="nofollow">Dockerfile介绍</a></p> 
<pre><code class="prism language-bash">ENTRYPOINT有两种格式：
<span class="token string">""</span>
ENTRYPOINT <span class="token punctuation">[</span><span class="token string">"executable"</span>, <span class="token string">"param1"</span>, <span class="token string">"param2"</span><span class="token punctuation">]</span>
✅ENTRYPOINT <span class="token builtin class-name">command</span> param1 param2（shell中执行）。

每个 Dockerfile 中只能有一个 ENTRYPOINT，当指定多个时，只有最后一个起效。
<span class="token string">""</span>

CMD支持三种格式:

<span class="token string">""</span>
CMD <span class="token punctuation">[</span><span class="token string">"executable"</span>,<span class="token string">"param1"</span>,<span class="token string">"param2"</span><span class="token punctuation">]</span> 使用 <span class="token builtin class-name">exec</span> 执行，推荐方式；
CMD <span class="token builtin class-name">command</span> param1 param2 在 /bin/sh 中执行，提供给需要交互的应用；
✅CMD <span class="token punctuation">[</span><span class="token string">"param1"</span>,<span class="token string">"param2"</span><span class="token punctuation">]</span> 提供给 ENTRYPOINT 的默认参数；

指定启动容器时执行的命令，每个 Dockerfile 只能有一条 CMD 命令。
如果指定了多条命令，只有最后一条会被执行。

如果用户启动容器时候指定了运行的命令，则会覆盖掉 CMD 指定的命令。
<span class="token string">""</span>
</code></pre> 
<h2><a id="_2_pip_160"></a>✅ 2. pip安装私有包</h2> 
<p>在上述dockerfile写好，build时候报错了。因为dockerfile属于一个不可中断的脚本执行过程，所以中间使用gitlab上的项目时，没有办法输入用户名和密码，所以无法访问。</p> 
<p>这就涉及到pip安装私有包，查看gitlab的文档<a href="https://docs.readthedocs.io/en/stable/guides/private-python-packages.html" rel="nofollow">Installing Private Python Packages</a></p> 
<p>正确的形式应该是：</p> 
<pre><code class="prism language-bash">git+https://<span class="token variable">${GITLAB_TOKEN_USER}</span><span class="token builtin class-name">:</span><span class="token variable">${GITLAB_TOKEN}</span>@gitlab.com/user/project.git@<span class="token punctuation">{<!-- --></span>version<span class="token punctuation">}</span>
</code></pre> 
<p>写出来类似：</p> 
<pre><code class="prism language-bash">git+http://huangs:Hdjfyhwi7KznYT7hpoSsGJ@0.0.0.7:8080/huangs/repo.git
</code></pre> 
<p>对于gitlab，需要根据<a href="https://docs.gitlab.com/ee/user/project/deploy_tokens/#creating-a-deploy-token" rel="nofollow">Creating a Deploy token</a>设置一个该项目的部署token（在里面可以设置username(huangs)）</p> 
<p>参考：</p> 
<ul><li>gitbook形式的文档：<a href="https://docs.readthedocs.io/en/stable/guides/private-python-packages.html" rel="nofollow">Installing Private Python Packages</a></li><li>stack overflow：<a href="https://stackoverflow.com/questions/4830856/is-it-possible-to-use-pip-to-install-a-package-from-a-private-github-repository" rel="nofollow">Is it possible to use pip to install a package from a private GitHub repository?</a></li><li><a href="https://www.jianshu.com/p/d29c40145912/" rel="nofollow">Git Clone 命令指定用户名密码</a></li></ul> 
<hr> 
<h2><a id="__3_docker_build_182"></a>✅ 3. docker build</h2> 
<h3><a id="_31__183"></a>☑️ 3.1 构建镜像</h3> 
<pre><code class="prism language-bash"><span class="token function">docker</span> build -t streamlitapp:latest <span class="token builtin class-name">.</span>
</code></pre> 
<p>使用docker build来构建镜像，然后会弹出一大堆info，类似</p> 
<pre><code class="prism language-bash">Step <span class="token number">1</span>/9 <span class="token builtin class-name">:</span> FROM pytorch/pytorch:1.7.0-cuda11.0-cudnn8-runtime
Step <span class="token number">2</span>/9 <span class="token builtin class-name">:</span> MAINTAINER huangs huangs@shaiic.com
Step <span class="token number">3</span>/9 <span class="token builtin class-name">:</span> COPY streamlit_demo.py ./streamlit_demo.py
Step <span class="token number">4</span>/9 <span class="token builtin class-name">:</span> RUN <span class="token function">apt-get</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt-get</span> <span class="token function">install</span> -y <span class="token function">git</span>
Step <span class="token number">5</span>/9 <span class="token builtin class-name">:</span> RUN pip <span class="token function">install</span> git+http://huangs:XXXXXXX@0.0.0.7:8080/huangs/repo.git

<span class="token comment"># 简单来说，就是你的dockerfile里有多少句 这里就有多少个阶段。。</span>
Step <span class="token number">6</span>/9 <span class="token builtin class-name">:</span> RUN pip <span class="token function">install</span> streamlit

<span class="token comment"># 这步开始安装streamlit(8.0MB)和pandas(11.7MB)等库开始变慢了。。还有pyarrow(23.6MB) 慢慢等着吧</span>
<span class="token comment"># 挨过这几个大的按起来就快了</span>

<span class="token comment"># 最后提示：</span>
Step <span class="token number">9</span>/9 <span class="token builtin class-name">:</span> CMD <span class="token punctuation">[</span><span class="token string">"streamlit.py"</span><span class="token punctuation">]</span>
 ---<span class="token operator">&gt;</span> Running <span class="token keyword">in</span> 6c740d85f7c0
Removing intermediate container 6c740d85f7c0
 ---<span class="token operator">&gt;</span> 6a43abdd557e
Successfully built 6a43abdd557e
Successfully tagged streamlitapp:latest
</code></pre> 
<p>你的dockerfile里有多少句，这里就有多少step，最后执行完大概会提示以上信息。然后就可以在这个构建的镜像上运行容器了</p> 
<h3><a id="_32__211"></a>☑️ 3.2 运行容器</h3> 
<pre><code class="prism language-bash"><span class="token function">docker</span> run -p <span class="token number">8502</span>:8501 streamlitapp:latest
</code></pre> 
<p>这里的8502：8501，后者表示镜像的端口，前者表示本地的端口，将镜像的8501端口映射到本地的8502（使用8502是因为本地的8501端口被其他容器占用了。。。）</p> 
<p>如果希望容器退出后自动关闭（删除），可以使用<code>--rm</code>参数</p> 
<pre><code class="prism language-bash"><span class="token comment"># 使用--rm参数 容器退出时自动删除容器</span>
<span class="token function">docker</span> run --rm -p <span class="token number">8502</span>:8501 streamlitapp:latest
</code></pre> 
<p>不然每次退出容器后，这个容器都会以Exited状态存在在系统中，占资源</p> 
<h3><a id="_33__224"></a>☑️ 3.3 删除容器和镜像</h3> 
<p>如果不幸镜像构建成功，但是执行入口脚本时报错，导致容器失败，需要删除镜像，重新构建一次，那么需要先删除对应的容器，再去删除镜像，不然删不干净。<br> 参考：<a href="https://blog.csdn.net/flydreamzhll/article/details/80900509">Docker中如何删除image（镜像）</a></p> 
<pre><code class="prism language-bash"><span class="token comment"># 1. 查看镜像ID</span>
<span class="token operator">&gt;</span> <span class="token function">docker</span> image <span class="token function">ls</span>
6a43abdd557e

REPOSITORY     TAG     IMAGE ID      CREATED         SIZE
streamlitapp latest  6a43abdd557e   <span class="token number">2</span> minutes ago   <span class="token number">5</span>.15GB

<span class="token comment"># 查看当前运行的容器</span>
<span class="token operator">&gt;</span> <span class="token function">docker</span> <span class="token function">ps</span> -a<span class="token operator">|</span><span class="token function">grep</span> streamlit
<span class="token comment"># 大概看到了两个</span>
<span class="token operator">&gt;</span> <span class="token function">docker</span> <span class="token function">ps</span> -a
CONTAINER ID   IMAGE       COMMAND                  CREATED       STATUS  PORTS  NAMES
1291a058c6db streamlitapp <span class="token string">"streamlit run strea…"</span> <span class="token number">10</span> minutes ago Exited XX brave_wescoff
974a98b2c3a7 streamlitapp:latest <span class="token string">"streamlit run strea…"</span>   <span class="token number">11</span> minutes ago Created allant_goldstine

<span class="token comment"># 使用docker stop（）或者kill关闭容器</span>
<span class="token comment"># stop给与一定的关闭时间交由容器自己保存状态，kill直接关闭容器</span>
<span class="token comment">#docker stop 容器ID或容器名 参数 -t：关闭容器的限时，如果超时未能关闭则用kill强制关闭，默认值10s，这个时间用于容器的自己保存状态 docker stop -t=60 容器ID或容器名</span>
<span class="token function">docker</span> stop 1291a058c6db

<span class="token comment"># 关了之后删除容器  </span>
<span class="token function">docker</span> <span class="token function">rm</span> 1291a058c6db
<span class="token function">docker</span> <span class="token function">rm</span> 974a98b2c3a7

<span class="token comment"># 删了容器之后才可以删除镜像</span>
<span class="token function">docker</span> rmi 6a43abdd557e

<span class="token function">rm</span> Remove one or <span class="token function">more</span> containers
rmi Remove one or <span class="token function">more</span> images

<span class="token comment"># 删除之后再看镜像列表，可以看到已经没有了。</span>
<span class="token function">docker</span> image <span class="token function">ls</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ba/0c/x65BZNKI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_34__263"></a>☑️ 3.4 后台运行容器/后台调回前面</h3> 
<p>参考：<a href="https://blog.csdn.net/nzjdsds/article/details/81981732">docker run的–rm选项详解</a></p> 
<blockquote> 
 <p>执行docker run命令带–rm命令选项，等价于在容器退出后，执行docker rm -v。<br> Docker version 20.10.8，zookeeper 3.6.3，–rm选项可以与-d同时使用</p> 
</blockquote> 
<pre><code class="prism language-python"><span class="token comment"># 使用-d参数 调到后台运行</span>
<span class="token comment"># 使用--rm参数，在容器退出后，删除容器</span>
 docker run <span class="token operator">-</span>d <span class="token operator">-</span><span class="token operator">-</span>rm <span class="token operator">-</span>p <span class="token number">8502</span><span class="token punctuation">:</span><span class="token number">8501</span> streamlitapp 

<span class="token comment"># 获取容器id</span>
docker ps <span class="token operator">-</span>a<span class="token operator">|</span>grep streamlit

<span class="token comment"># 使用attach参数来把后台运行的容器调到前面</span>
docker attach XXXX（容器ID）
</code></pre> 
<hr> 
<p>另外，可以参考：</p> 
<ul><li>✅<a href="https://www.section.io/engineering-education/how-to-deploy-streamlit-app-with-docker/#dockerizing-the-streamlit-app" rel="nofollow">Deploying a Simple Streamlit app using Docker</a></li><li><a href="https://maelfabien.github.io/project/Streamlit/#requirements" rel="nofollow">Deploy a Streamlit WebApp with Docker</a></li><li><a href="https://discuss.streamlit.io/t/how-to-use-streamlit-in-docker/1067" rel="nofollow">How to use Streamlit in Docker</a></li><li>✅DockerInfor-docker中文文档： <a href="http://www.dockerinfo.net/dockerfile%E4%BB%8B%E7%BB%8D" rel="nofollow">Dockerfile介绍</a></li><li><a href="https://docs.oracle.com/cd/E37670_01/E75728/html/section_svq_n2z_fp.html" rel="nofollow">Creating a Docker Image from a Dockerfile</a></li><li><a href="https://codefresh.io/docker-tutorial/build-docker-image-dockerfiles/" rel="nofollow">Building Docker Images with Dockerfiles</a></li><li>官方文档： <a href="https://docs.docker.com/engine/reference/commandline/build/" rel="nofollow">docker build</a></li><li><a href="https://www.jb51.net/article/114177.htm" rel="nofollow">Docker如何使用Dockerfile构建镜像</a></li><li><a href="https://docs.docker.com/language/nodejs/run-containers/" rel="nofollow">Run your image as a container</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/41a8c4882a7e5a44a3bcf460b3ecfec3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IoTDB下载安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58d7269e593979dd4230bf550ebb7951/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">蓝桥杯 人物相关性分析 二分</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>