<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>教你用Appium搭建Android自动化测试框架（详细教程） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="教你用Appium搭建Android自动化测试框架（详细教程）" />
<meta property="og:description" content="如题，本文附有仓库地址以及代码，目录如下：
1.下载安装appium
2.配置并使用appium
3.配置工程
一、下载安装appium 下载appium-desktop的mac版本，我选择用1.17.1版本，最新的版本1.22.0，拆分一个桌面应用为两个桌面应用了，一个叫做Appium Server,另外一个叫做AppiumInspector。
下载链接：github.com/appium/appi…
UI Automator,google提供的自动化测试框架，appium集成了它。详细了解如下：developer.android.google.cn/training/te…
二、配置并食用appium a.电脑配置好adb，jdk,sdk环境变量,打开appium应用。
Host和端口不需要修改，点击start后页面如下，点击箭头位置，配置app的信息。
b.开始配置appium
c.涉及到的adb命令
adb devices -l adb shell dumpsys activity | grep &#34;mResume&#34; Json的信息，要根据具体的手机和要测试的app的信息进行配置，第一个矩形框为appPackage的内容，第二个矩形框为appActivity的内容，输入如下命令获得需要的信息； adb shell dumpsys activity | grep &#34;mResume&#34;
输入如下命令，获得矩形框的内容，填充Json中的deviceName选项
adb devices -l
d.点击了start session后，正式进入了appium的使用，代表配置成功了，界面如下：
三、配置工程 a.点击录制
b.生成UI自动化的脚本
点击1-》界面控件-》2-》3，从而复制3中的脚本
c.通过AS新建一个工程
如Java工程，在maven-resposity下载三个依赖的jar包，在新建模块的libs目录下拷入 commons-lang3-3.1.jar 、java-client-7.3.0.jar、selenium-server-standalone-3.141.59.jar这三个jar库，build.gradle中配置依赖junit和jar包。
新建一个app的文件夹，然后复制对应要测试的apk到这个目录下面，主义，对应的apk一定要是testonly设置为false了，否则会发生错误，同时，手机在测试前，先卸载掉已经安装的测试应用，避免安装不上去；
d.最后，编写测试代码，作为普通的控制台程序进行执行，代码如下：
package com.mobile.searchandclick; import org.junit.After; import org.junit.Before; import org.junit.Test; import org.openqa.selenium.remote.DesiredCapabilities; import java.io.File; import java.net.MalformedURLException; import java.net.URL; import io.appium.java_client.MobileElement; import io.appium.java_client.android.AndroidDriver; import io." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4dbeaf0cfb6a37ee452546234f2a7e88/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-03T18:56:43+08:00" />
<meta property="article:modified_time" content="2023-06-03T18:56:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">教你用Appium搭建Android自动化测试框架（详细教程）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>如题，本文附有仓库地址以及代码，目录如下：</strong></p> 
<p>1.下载安装appium</p> 
<p>2.配置并使用appium</p> 
<p>3.配置工程</p> 
<h3>一、下载安装appium</h3> 
<p>下载appium-desktop的mac版本，我选择用1.17.1版本，最新的版本1.22.0，拆分一个桌面应用为两个桌面应用了，一个叫做Appium Server,另外一个叫做AppiumInspector。</p> 
<p>下载链接：github.com/appium/appi…</p> 
<p>UI Automator,google提供的自动化测试框架，appium集成了它。详细了解如下：developer.android.google.cn/training/te…</p> 
<p></p> 
<h3>二、配置并食用appium</h3> 
<p><strong>a.电脑配置好adb，jdk,sdk环境变量,打开appium应用。</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/36/93/IysP3gOZ_o.png"></p> 
<p>Host和端口不需要修改，点击start后页面如下，点击箭头位置，配置app的信息。</p> 
<p><strong>b.开始配置appium</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/7d/6f/4auakNbw_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/6f/3d/f1D1MEsY_o.png"></p> 
<p><strong>c.涉及到的adb命令</strong></p> 
<pre><code>adb devices -l
</code></pre> 
<pre><code>adb shell dumpsys activity | grep "mResume"
</code></pre> 
<pre>Json的信息，要根据具体的手机和要测试的app的信息进行配置，第一个矩形框为appPackage的内容，第二个矩形框为appActivity的内容，输入如下命令获得需要的信息；
</pre> 
<p>adb shell dumpsys activity | grep "mResume"</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/21/4c/vqTlGfdi_o.png"></p> 
<p>输入如下命令，获得矩形框的内容，填充Json中的deviceName选项</p> 
<p>adb devices -l</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/3b/b4/R6EqgVWe_o.png"></p> 
<p><strong>d.点击了start session后，正式进入了appium的使用，代表配置成功了，界面如下：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c4/79/l5ylqsfY_o.png"></p> 
<p></p> 
<h3>三、配置工程</h3> 
<p><strong>a.点击录制</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/78/9a/W57LWXlB_o.png"></p> 
<p><strong>b.生成UI自动化的脚本</strong></p> 
<p>点击1-》界面控件-》2-》3，从而复制3中的脚本</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/87/bd/BbdR1zwc_o.png"></p> 
<p><strong>c.通过AS新建一个工程</strong></p> 
<p>如Java工程，在maven-resposity下载三个依赖的jar包，在新建模块的libs目录下拷入 commons-lang3-3.1.jar 、java-client-7.3.0.jar、selenium-server-standalone-3.141.59.jar这三个jar库，build.gradle中配置依赖junit和jar包。</p> 
<p>新建一个app的文件夹，然后复制对应要测试的apk到这个目录下面，主义，对应的apk一定要是testonly设置为false了，否则会发生错误，同时，手机在测试前，先卸载掉已经安装的测试应用，避免安装不上去；</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/a6/4d/vkbhJtgB_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/45/2e/2JYfRUyA_o.png"></p> 
<p><strong>d.最后，编写测试代码，作为普通的控制台程序进行执行，代码如下：</strong></p> 
<pre><code>package com.mobile.searchandclick;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;
import org.openqa.selenium.remote.DesiredCapabilities;
import java.io.File;
import java.net.MalformedURLException;
import java.net.URL;
import io.appium.java_client.MobileElement;
import io.appium.java_client.android.AndroidDriver;
import io.appium.java_client.android.AndroidElement;

public class MyClass {

    private AndroidDriver&lt;AndroidElement&gt; driver;
    @Before
    public void init() {
        File classpathRoot = new File(System.getProperty("user.dir"));
        // 获取apps文件，前面测试应用所存放的目录
        File appDir = new File(classpathRoot, "/app/");
        // 获取apk文件
        File app = new File(appDir, "app.apk");
        DesiredCapabilities capabilities = new DesiredCapabilities();
        capabilities.setCapability("platformName","Android");
        // 系统平台版本
        capabilities.setCapability("platformVersion", "10");
        // 设备名，这里是模拟器的设备名
        capabilities.setCapability("deviceName", "ONEPLUS_A6000");
        capabilities.setCapability("app", app.getAbsolutePath());
        // 设置被测应用包名
        capabilities.setCapability("appPackage", "com.example.android.navigationsample");
        // app的入口启动activity
        capabilities.setCapability("appActivity", ".MainActivity");
        // 连接appium启动相应app
        try {
            driver = new AndroidDriver&lt;&gt;(new URL("http://127.0.0.1:4723/wd/hub"), capabilities);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        }
        System.out.println("App is launched!");
    }
//    版权声明：本文为CSDN博主「鱼乐游溪」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
//    原文链接：https://blog.csdn.net/yjf611/article/details/104470449

    @Test
    public void sampleTest() throws InterruptedException {
        Thread.sleep(2000);
        MobileElement el2 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/play_btn");
        el2.click();
        Thread.sleep(2000);
        MobileElement el3 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/username_text");
        el3.sendKeys("haha");
        Thread.sleep(2000);
        MobileElement el4 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/email_text");
        el4.sendKeys("123@qq.com");
        Thread.sleep(2000);
        MobileElement el5 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/password_text");
        el5.sendKeys("111");
        Thread.sleep(2000);
        MobileElement el6 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/signup_btn");
        el6.click();
        Thread.sleep(2000);
        MobileElement el7 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/play_btn3");
        el7.click();
        Thread.sleep(2000);
        MobileElement el8 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/checkBox");
        el8.click();
        Thread.sleep(2000);
        MobileElement el9 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/play_btn4");
        el9.click();
        Thread.sleep(2000);
        MobileElement el10 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/play_btn3");
        el10.click();
        Thread.sleep(2000);
        MobileElement el11 = (MobileElement) driver.findElementById("com.example.android.navigationsample:id/checkBox3");
        el11.click();
        Thread.sleep(2000);
        driver.navigate().back();
        Thread.sleep(2000);
        driver.navigate().back();
        Thread.sleep(2000);
        driver.navigate().back();
        Thread.sleep(2000);
        System.out.println("App is done!");
    }

    @After
    public void end() throws InterruptedException{
        driver.quit();
    }
}
</code></pre> 
<p>项目的仓库地址如下：https://gitee.com/Greny/Appium</p> 
<hr> 
<h4>绵薄之力：免费分享配套资源</h4> 
<p><strong>最后感谢每一个认真阅读我文章的人，看着粉丝一路的上涨和关注，礼尚往来总是要有的，虽然不是什么很值钱的东西，如果你用得到的话可以直接拿走：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/66/c4/tCJwQev2_o.png"></p> 
<pre><code class="hljs">加入我的软件测试交流群：110685036免费获取~（同行大佬一起学术交流，每晚都有大佬直播分享技术知识点）</code></pre> 
<h2>软件测试面试小程序</h2> 
<p>被百万人刷爆的软件测试题库！！！谁用谁知道！！！全网最全面试刷题小程序，手机就可以刷题，地铁上公交上，卷起来！</p> 
<p>涵盖以下这些面试题板块：</p> 
<blockquote> 
 <p>1、软件测试基础理论 ，2、web,app，接口功能测试 ，3、网络 ，4、数据库 ，5、linux</p> 
 <p>6、web,app，接口自动化 ，7、性能测试 ，8、编程基础，9、hr面试题 ，10、开放性测试题，11、安全测试，12、计算机基础</p> 
</blockquote> 
<p class="img-center"><img alt="" height="670" src="https://images2.imgbox.com/67/2d/KvqDXTx8_o.png" width="1196"></p> 
<p><strong>免费获取方式 ：</strong></p> 
<p class="img-center"><img alt="ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¥ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¨ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¨ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¿ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ©ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¦ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¥ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¥ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¥ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¾ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ§ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¦ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¨ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ¿ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÂ°" src="https://images2.imgbox.com/bc/e4/y7Jr4N6e_o.gif"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/96d68ea55eb8d6343e559631d3339e4a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【自用】pycharm远程SSH遇到的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/32a5ffd14cfd17cf23dac98267028639/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">idea 2023版 安装教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>