<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>gpon学习 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="gpon学习" />
<meta property="og:description" content="GPON系统概述
PON系统介绍
PON（Passive Optical Networks）网络由三部分组成，分别为OLT（Optical Line Terminal），ODN（Optical Distribution Network）和ONU（Optical Network Unit）。
• OLT是放置在局端的终结PON协议的汇聚设备。
• ONU是位于客户端的给用户提供各种接口的用户侧设备，OLT和ONU通过中间的无源光网络ODN连接起来进行互相通信。
• ODN由光纤、一个或多个无源光分路器等无源光器件组成，在OLT和ONU间提供光通道，起着连接OLT和ONU的作用，具有很高的可靠性。
PON网络架构如图2-1所示。PON网络和传统的宽带接入网的区别在于PON采用光纤进行数据传输，具有接入用户数多、节省光纤资源和高速率接入等特点。
图2-1 PON网络
GPON系统介绍
GPON是PON的一种技术，支持最大物理距离20km，最大逻辑距离60km的超长传输距离。同时支持1：64的分光比，扩展可以支持1：128的分光比，具有覆盖用户数量多、覆盖范围大等优点。GPON网络工作原理如图2-2所示。
图2-2 GPON网络工作原理
GPON网络采用单根光纤将OLT、分光器和ONU连接起来，上下行采用不同的波长进行数据承载。上行采用1310nm波长，下行采用1490nm波长。GPON系统采用波分复用的原理通过上下行不同波长在同一个ODN网络上进行数据传输，下行通过广播的方式发送数据，而上行通过TDMA的方式，按照时隙进行数据上传。
所有数据从OLT端广播到所有的ONU上，ONU再选择接收属于自身的数据，将其他数据直接丢弃。具体原理如图2-3所示。
图2-3 GPON下行通信原理
ONU在向OLT发送数据时只能在OLT提前许可的时隙内发送数据，这样就可以保证每个ONU都按照要求按次序发送数据，避免了上行数据冲突，如图2-4所示。
图2-4 GPON上行通信原理
GPON系统原理
GPON基本概念
GEM帧（GPON Encapsulation Mode）是GPON技术中最小的业务承载单元，是最基本的封装结构。所有的业务都要封装在GEM帧中在GPON线路上传输，通过GEM port标识。每个GEM Port由一个唯一的Port-ID来标识，由OLT进行全局分配，即OLT下的每个ONU不能使用Port-ID重复的GEM Port。GEM Port标识的是OLT和ONU之间的业务虚通道，即承载业务流的通道，类似于ATM虚连接中的VPI/VCI标识。
T-CONT：是GPON上行方向承载业务的载体，所有的GEM PORT都要映射到T-CONT中，由OLT通过DBA调度的方式上行。T-CONT是GPON系统中上行业务流最基本的控制单元。每个T-CONT由Alloc-ID来唯一标识。Alloc-ID由OLT进行全局分配，即OLT下的每个ONU不能使用Alloc-ID重复的T-CONT。
T-CONT包括五种不同的类型，在上行业务调度过程中根据不同类型的业务选择不同类型的T-CONT。每种T-CONT带宽类型有特定的QoS特征，QoS特征主要体现在带宽保证上，分为固定带宽，保证带宽，非保证带宽，尽力转发，混合方式（对应表2-2的Type1到Type5）。
表2-2 可用T-CONT类型
带宽类别 延迟敏感 分配方式 T-CONT类型
Type 1 Type 2 Type 3 Type 4 Type 5
固定带宽（Fixed） Yes Provisioned Yes No No No Yes
保证带宽（Assured） No Provisioned No Yes Yes No Yes" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/73b2650e7bacc068c955dba0ebb3df23/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-09T15:50:29+08:00" />
<meta property="article:modified_time" content="2019-01-09T15:50:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">gpon学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>GPON系统概述<br> PON系统介绍<br> PON（Passive Optical Networks）网络由三部分组成，分别为OLT（Optical Line Terminal），ODN（Optical Distribution Network）和ONU（Optical Network Unit）。<br> • OLT是放置在局端的终结PON协议的汇聚设备。<br> • ONU是位于客户端的给用户提供各种接口的用户侧设备，OLT和ONU通过中间的无源光网络ODN连接起来进行互相通信。<br> • ODN由光纤、一个或多个无源光分路器等无源光器件组成，在OLT和ONU间提供光通道，起着连接OLT和ONU的作用，具有很高的可靠性。<br> PON网络架构如图2-1所示。PON网络和传统的宽带接入网的区别在于PON采用光纤进行数据传输，具有接入用户数多、节省光纤资源和高速率接入等特点。<br> 图2-1 PON网络<br> <img src="https://images2.imgbox.com/67/3a/WDZGGp2l_o.png" alt="在这里插入图片描述"><br> GPON系统介绍<br> GPON是PON的一种技术，支持最大物理距离20km，最大逻辑距离60km的超长传输距离。同时支持1：64的分光比，扩展可以支持1：128的分光比，具有覆盖用户数量多、覆盖范围大等优点。GPON网络工作原理如图2-2所示。<br> 图2-2 GPON网络工作原理<br> <img src="https://images2.imgbox.com/7b/12/oHzetxjv_o.png" alt="在这里插入图片描述"><br> GPON网络采用单根光纤将OLT、分光器和ONU连接起来，上下行采用不同的波长进行数据承载。上行采用1310nm波长，下行采用1490nm波长。GPON系统采用波分复用的原理通过上下行不同波长在同一个ODN网络上进行数据传输，下行通过广播的方式发送数据，而上行通过TDMA的方式，按照时隙进行数据上传。<br> 所有数据从OLT端广播到所有的ONU上，ONU再选择接收属于自身的数据，将其他数据直接丢弃。具体原理如图2-3所示。<br> 图2-3 GPON下行通信原理<br> <img src="https://images2.imgbox.com/1a/a9/J6u7v8rD_o.png" alt="在这里插入图片描述"><br> ONU在向OLT发送数据时只能在OLT提前许可的时隙内发送数据，这样就可以保证每个ONU都按照要求按次序发送数据，避免了上行数据冲突，如图2-4所示。<br> 图2-4 GPON上行通信原理<br> <img src="https://images2.imgbox.com/0a/e4/WHakubco_o.png" alt="在这里插入图片描述"><br> GPON系统原理<br> GPON基本概念<br> GEM帧（GPON Encapsulation Mode）是GPON技术中最小的业务承载单元，是最基本的封装结构。所有的业务都要封装在GEM帧中在GPON线路上传输，通过GEM port标识。每个GEM Port由一个唯一的Port-ID来标识，由OLT进行全局分配，即OLT下的每个ONU不能使用Port-ID重复的GEM Port。GEM Port标识的是OLT和ONU之间的业务虚通道，即承载业务流的通道，类似于ATM虚连接中的VPI/VCI标识。<br> T-CONT：是GPON上行方向承载业务的载体，所有的GEM PORT都要映射到T-CONT中，由OLT通过DBA调度的方式上行。T-CONT是GPON系统中上行业务流最基本的控制单元。每个T-CONT由Alloc-ID来唯一标识。Alloc-ID由OLT进行全局分配，即OLT下的每个ONU不能使用Alloc-ID重复的T-CONT。<br> T-CONT包括五种不同的类型，在上行业务调度过程中根据不同类型的业务选择不同类型的T-CONT。每种T-CONT带宽类型有特定的QoS特征，QoS特征主要体现在带宽保证上，分为固定带宽，保证带宽，非保证带宽，尽力转发，混合方式（对应表2-2的Type1到Type5）。<br> 表2-2 可用T-CONT类型<br> 带宽类别 延迟敏感 分配方式 T-CONT类型<br> Type 1 Type 2 Type 3 Type 4 Type 5<br> 固定带宽（Fixed） Yes Provisioned Yes No No No Yes<br> 保证带宽（Assured） No Provisioned No Yes Yes No Yes<br> 非保证带宽（Non-assured） No Dynamic No No Yes No Yes<br> 尽力转发（Best-effort） No Dynamic No No No Yes Yes<br> GPON系统中的业务复用原理如图2-5所示。各种业务先在ONU上映射到不同的GEM port中，GEM port携带业务再映射到不同类型的T-CONT中进行上传。T-CONT是GPON线路上行方向的基本承载单元。T-CONT在OLT侧先将GEM port单元解调出来，送入GPON MAC芯片将GEM port静荷中的业务解调出来，送入相关的业务处理单元进行处理。在下行方向，所有的业务在GPON业务处理单元中被封装到GEM port中广播到该GPON接口下的所有ONU上，ONU再根据GEM port ID进行数据过滤，只保留属于该ONU的GEM port并解封装将业务从ONU的业务接口送入用户设备中。<br> 图2-5 GPON系统业务复用原理<br> <img src="https://images2.imgbox.com/bb/c4/VyFKeYrJ_o.png" alt="在这里插入图片描述"><br> 业务与GEM port、T-CONT的映射关系如图2-6所示。GEM port是GPON系统的最小业务单元，一个GEM port可以承载一种业务，也可以承载多种业务。GEM port承载业务后先要映射到T-CONT单元进行上行业务调度。每个ONU支持多个T-CONT，并可以配置为不同的业务类型。T-CONT可以承载多个GEM port，也可以承载一个GEM port，根据用户的具体的配置而定。T-CONT上行到OLT侧后解调出GEM port，然后再解调出GEM port中的业务静荷进行相关业务处理。<br> 图2-6 GPON业务映射关系<br> <img src="https://images2.imgbox.com/dd/77/AS9yhq4W_o.png" alt="在这里插入图片描述"><br> GPON帧结构<br> GPON系统帧结构如图2-7所示。GPON下行帧长固定为125us，下行帧由物理控制块和Payload组成。物理控制块主要包括物理帧头控制字和上行带宽许可BWmap（Bandwidth Map）。帧头控制字主要是用来做帧定界、时钟同步和FEC等信息。BWmap字段主要是通知每个ONU的上行带宽分配情况。确定每个ONU的所属T-CONT的上行开始时隙和结束时隙，确保所有ONU能按照OLT统一规定的时隙发送数据，避免数据冲突。上行采用TDMA的方式按照T-CONT进行业务调度，每个GPON端口下对于所有ONU都是共享上行带宽，按照BWmap的要求，ONU必须在属于自己的时隙范围内进行上行数据发送。同时，ONU会报告自身需要发送的数据状态通过上行帧发送到OLT，OLT通过DBA方式分配好上行时隙定期每帧发送更新。<br> 图2-7 GPON帧结构<br> <img src="https://images2.imgbox.com/91/13/3lpbiCkP_o.png" alt="在这里插入图片描述"><br> 说明：<br> • PLOu： Physical Layer Overhead upstream<br> • PLOAM ：Physical Layer OAM<br> • PLOAMu：PLOAM upstream<br> • PLSu：Power Levelling Sequence upstream<br> • DBRu：Dynamic Bandwidth Report upstream<br> 各个GPON速率下上下行帧长度都相同。每个上行帧包含了一个或者多个T-CONT传送的内容。而下行帧里的BWmap标识了各个T-CONT传送的起止时刻。每次一个ONU从另一个ONU那里接过PON的媒介访问权时，它都必须先发送一份PLOu数据。如果一个ONU分配了两个连续的Alloc－ID（即一个的结束时间比另一个的开始时间小1），则ONU应该抑止发送第二个Alloc－ID的PLOu数据。上行帧净荷区段可能包含三种内容：ATM信元、GEM帧、DBA报告。<br> GPON上行帧结构如图2-8所示。<br> 图2-8 GPON上行帧结构<br> <img src="https://images2.imgbox.com/51/5c/v8HclRK5_o.png" alt="在这里插入图片描述"><br> GPON上行帧由PLOu，PLOAMu，PLSu，DBRu ，Payload 字段构成，具体含义如下：<br> • PLOu：物理控制头，主要为了帧定位、同步和标明此帧是哪个ONU的数据。<br> • PLOAMu：上行数据的PLOAM消息，主要是上报ONU的维护、管理状态等管理消息。（不是每帧都有，可以不发，但是需要协商）<br> • PLSu：上行功率级别序列，长度为120字节，被ONU用于功率控制的度量。<br> • DBRu：主要是上报T-CONT的状态，为了给下一次申请带宽，完成ONU的动态带宽分配。（不是每帧都有，可以不发，但是需要协商）<br> • Payload：数据静荷，可以是DBA状态报告也可以是数据帧。如果是数据帧的话，可以分为GEM header和Frame。<br> • GEM header：为GEM帧头，主要是区别不同的GEM Port中的数据。GEM port是GPON 中传输数据的最小单位，类似于ATM中的PVC的概念，每种上行业务必须映射到GEM port中去，GEM port在映射到T-CONT中进行传输。GEM header字段分为PLI, Port ID, PTI和HEC。具体的含义如下：<br> o PLI: 表示数据静荷的长度<br> o Port ID:唯一标明不同的GEM port<br> o PTI: 静荷类型标识，主要是为了标识目前所传送的数据的状态和类型，如是否是OAM消息，是否已经将数据传送完毕等信息<br> o HEC:提供前向纠错编码功能，提供传输质量<br> GPON下行帧长为38880bytes，每125us一帧。如图2-9，图2-10所示。<br> 图2-9 GPON下行帧结构<br> <img src="https://images2.imgbox.com/e3/f9/hJAU4DdK_o.png" alt="在这里插入图片描述"><br> 图2-10 PCBd结构<br> <img src="https://images2.imgbox.com/b4/8c/aReoFmmb_o.png" alt="在这里插入图片描述"><br> OLT以广播的方式向ONU发送PCBd（Physical Control Block downstream），每个ONU都会收到整个PCBd，然后会根据相关的信息执行动作。<br> PCBd里包含：帧同步信息，物理层OAM，BIP校验字段等等。其中US BW Map（上行带宽映射）是OLT发送给每个T-CONT的各自的上行传输带宽映射。这正是通过下行帧的PCBd里的带宽映射字段来完成。从而实现MAC控制功能。<br> 由于GPON上行方向采用时分复用，如果多个ONU同一时刻发送上行数据，则会产生冲突。GPON里使用的机制是OLT在下行帧里通告，每个ONU所能使用的上行传输时隙。<br> GPON的激活<br> GPON的激活过程由OLT控制。ONU根据OLT发出的消息进行响应。<br> 激活过程概括如下：</p> 
<ol><li>ONU根据OLT的需求调节发送光功率级别。</li><li>OLT发现一个新ONU的序列号。</li><li>OLT分配一个ONU-ID给ONU。</li><li>OLT测量从ONU发来的上行数据的相位。</li><li>OLT通知ONU补偿延时时间。</li><li>ONU根据通报值调节发送相位。<br> 2.7 GPON关键技术<br> GPON技术主要包括如下关键技术：突发光电技术、测距、FEC（前向纠错编码）、线路加密技术和DBA（动态带宽分配）。<br> 突发光电技术<br> GPON系统是一个P2MP的网络，OLT侧的GPON接口通过分光器同时连接到多个ONU的GPON接口上。GPON的下行是按照广播的方式将所有数据发送到ONU侧，因此，要求OLT侧的光模块必须连续发光，ONU侧的光模块也是连续接收方式工作。GPON的上行方向采用TDMA的方式工作，每个ONU必须在许可的时隙上才能发送数据，不属于自己的时隙必须关闭光模块的发送信号，才不至于影响其它的ONU的正常工作。对于OLT侧上行接收来讲，必须要根据时隙进行突发接收每个ONU的上行数据，因此，为了保证GPON系统的正常工作，OLT侧的光模块必须支持突发接收功能，ONU侧的光模块必须支持突发发送功能。<br> 测距<br> 对于GPON系统来说，ONU发送数据到OLT是采用TDMA方式的。也就是在同一时刻，OLT一个PON口下的所有ONU，只有一个ONU在发送数据。否则，会发生传输的数据冲突。为避免这种冲突，所有ONU发送数据的时间必须由OLT控制。由于OLT与其相连接的ONU距离不同，信号在光纤中的时延（RTD：Round Trip Delay）也不同，因此，必须测出每个ONU与OLT的逻辑距离，以便计算出每个ONU的补偿时延（EqD：Equalization Delay）。每个ONU以下行数据相位为基准，根据所分配的补偿时延（EqD）对上行数据时延发送，使各ONU上行数据不冲突。<br> 测距的方法是：OLT通过测距（Ranging）过程获取ONU的均衡时延（RTD：Round Trip Delay），然后通过计算得出每个ONU的补偿时延（EqD：Equalization Delay），使得所有ONU的Teqd=RTD+EqD相等。Teqd又称补偿循环往返时延，其值是系统预先设置的，会大于等于逻辑距离最远的ONU的RTD。测距方法如图2-11所示。<br> 图2-11 GPON测距方法<br> <img src="https://images2.imgbox.com/ec/6e/HINAGITW_o.png" alt="在这里插入图片描述"><br> • Pre Assigned EqD：ONU预置的默认EqD。<br> • Zero-distance Equalization Delay：就是系统设置的Teqd。<br> • Assigned Equalization Delay：就是ONU正常工作时的EqD。<br> FEC<br> FEC（Forward Error Correction）的全称是前向纠错编码，主要是为了提高线路的传输质量。FEC算法采用RS（255，239）算法，将所有的下行报文每255Bytes就进行一次FEC编码，确保ONU侧收到的数据准确性。GPON在传输层使用FEC算法，大约可以将线路传输的10-13误码降低到10-12。可以避免数据重传，大约可以提升2～3dB的光功率预算。<br> 线路加密技术<br> GPON系统中下行数据采用广播的方式发送到所有的ONU上，这样无疑会给非法的用户提供窃听其他ONU的下行数据的机会，甚至可以窃听到所有用户的数据。同时，对于GPON系统而言，它又具有独特的高数据方向性特点，几乎所有的ONU都不能监听到其他ONU的上行数据，这就允许一些私有的信息（如密钥等）能够在上行方向上安全的传送。GPON系统采用线路加密技术解决这些安全问题。<br> • 加密系统<br> GPON系统采用AES128加密机制对线路安全进行控制，有效地防止了数据盗用等安全问题。AES128加密算法，通常使用计数器模式，加密系统产生一个16字节的伪随机密码块，密码块与输入的明文进行异或运算得到密文进行传输，对端再利用相同的密码块对密文进行解密得到明文。<br> • 密钥交换<br> 密钥更换由OLT发起密钥更换请求，ONU响应并将生成的新的密钥，由于PLOAM（Physical Layer OAM）消息的长度有限，密钥分两部分发给OLT，并重复发送三次。如果OLT没有收到三次传送中的任意一次，OLT将重新发送密钥更换请求，直到三次收到相同的密钥为止。当OLT收到了新的密钥后，就要开始进行密钥切换。OLT将使用新的密钥的帧号通过相关的命令通知ONU，这个命令一般会发送三次，只要ONU成功收到一次就在相应的数据帧上切换校验密钥。<br> DBA技术<br> 在GPON系统中，OLT通过向ONU发送授权信号来控制上行数据流。PON结构需要一个有效的TDMA机制控制上行流量，这样来自多个ONU的数据包在上行过程中不会发生碰撞。然而，使用基于碰撞的机制需要在PON的无源ODN里管理QoS，这在物理上是不可能实现的，或者需要承受效率的严重损失。鉴于这些问题，管理上行GPON流量的机制一直是GPON流量管理标准化过程中的首要关注焦点。这便促使ITU-T G.983.4推荐标准的发展，该标准定义了用于管理上行PON流量的动态带宽分配（DBA）协议。<br> DBA原理如图2-12所示。在GPON结构中，通过向ONU内部每个流量容器（T-CONT）分配数据授权来控制上行流量。为确定分配给一个T-CONT的授权数目，OLT需要知道该T-CONT的流量状态。ONU通过上行帧中的DBRu字段或者Payload字段发送ONU的数据状态报告给OLT，OLT收到数据状态报告后根据DBA算法根据目前的ONU上等待发送的数据状态定时刷新上行的BWmap信息，并通过下行帧通知所有ONU。这样就能保证每个ONU可以根据实际的发送数据流量动态调整上行带宽，提升了上行带宽的利用率。<br> 图2-12 DBA原理<br> <img src="https://images2.imgbox.com/0a/b6/T6vcEj5P_o.png" alt="在这里插入图片描述"><br> 2.8 GPON ONU认证<br> GPON认证是指OLT基于ONU的SN或Password对ONU合法性进行认证，防止非法ONU的接入。在GPON系统中，只有通过认证的合法ONU才能接入PON系统，这样可以满足运营商实现灵活的、便于维护的管理方式。<br> GPON ONU的认证方式包括：SN认证、SN＋Password认证和Password认证。ONU认证上线后就可以传输数据了，ONU对下行数据是根据gemport进行选择接收的。各个ONU监测接收到的数据帧的gemport，以决定是否接收该帧，如果该帧所包含的gemport与ONU自身的gemport相同或者为组播gemport，则接收该数据帧；否则作丢弃处理。ONU的认证部分主要是针对OLT上已经预配置的ONU而言，对于在OLT上未预配置ONU的处理参照图2-13。<br> 图2-13 未预配置ONU注册流程图<br> <img src="https://images2.imgbox.com/fb/d6/UHYow93P_o.png" alt="在这里插入图片描述"><br> • SN和SN＋Password认证<br> 首先ONU在OLT上预配置为SN认证或者SN＋Password认证，在PON口下接入该ONU，该ONU注册上线过程与未预配置ONU的注册流程差异体现在：<br> o OLT收到ONU的序列码回应消息后，如果发现该ONU已经配置，则判断OLT上是否有相同SN的ONU在线，如果有相同SN的ONU在线，则向主机命令行和网管上报SN冲突告警；否则，直接分配用户指定的ONUID给该ONU。<br> o ONU进入操作状态后，对于SN认证方式的ONU，OLT不进行Password请求，直接为该ONU配置用于承载OMCI消息的gemport（目前华为的做法是，承载OMCI的GEMport与ONUID相同，由OLT自动配置）后让ONU上线，并向主机命令行或者网管上报ONU上线告警。<br> 对于SN＋Password认证的ONU，OLT会向ONU进行Password请求，并将ONU回应的Password与本地配置的Password进行比较，如果Password与本地配置相同，则判断OLT上是否有相同SN＋Password认证的ONU在线，如果有相同SN＋Password认证的ONU在线，则向主机命令行或者网管上报Password冲突告警，否则直接为ONU配置用于承载OMCI消息的gemprot后让ONU上线，并向主机命令行或者网管上报ONU上线告警；如果Password与本地配置不同，即使PON口开启了ONU自动发现功能，也不会上报ONU自动发现，OLT发送Deactivate_ONU-ID PLOAM消息去注册该ONU。<br> • Password认证<br> Password认证有两种模式，Always-on和Once-on。首先预添加Password认证方式的ONU，然后在PON口下接入该ONU，Password认证之前的处理与未预配置ONU的注册流程相同。<br> o 选择Once-on模式时，可以选择设置使用aging-time，范围为1～168h，设置为aging-time时，ONU必须在设定的时间范围内注册上线，否则一旦ONU的实际注册上线时间超过了设置的时间，就不允许该ONU注册上线。选择Always-on模式，任何时间都可以接入ONU进行注册上线。<br> Once-on认证方式下要求ONU在规定的时间内认证，超出该时间就不允许认证，并且一旦ONU认证成功后就不允许再修改SN，也就是说，对于Once-on认证模式，只有首次认证是基于Password认证的，非首次认证时，使用的是SN＋Password认证。Once-on的应用场景是运营商为用户分配Password账号后，要求用户在规定时间上线，并且上线后就不允许再更换ONU，如果有更换ONU的需求，需要通知运营商进行处理。<br> o Always-on认证方式下，对用户接入上线时间无限制，首次上线时使用Password认证，认证上线成功后OLT根据用户的SN和Password，生成SN＋Password绑定表项。非首次上线时，如果ONU的SN和Password与首次上线成功ONU的SN以及Password相同，则使用SN＋Password认证；如果用户更换相同Password，不同SN的ONU，则根据Password进行认证，认证上线成功后，更新SN＋Password的绑定表项。因此对于Always-on认证模式，无论什么时候接入ONU，只要ONU的Password正确都可以上线。应用场景为，运营商为用户分配Password后，用户可以随意更换使用相同Password，不同SN的ONU，在更换ONU后不需要通知运营商。<br> ONU进行Password认证时，如果GPON单板软件发现该ONU的SN或者Password与OLT上已在线ONU冲突，则将该ONU进行去注册处理，并向主机命令行和网管上报SN冲突或者Password冲突，但不会对在线ONU造成任何影响；对于Password认证失败的处理参照未预配置ONU的注册处理流程，在此不再进行重复阐述。<br> 对于Once-on模式认证的ONU，在GPON单板配置恢复完成后，单板软件启动注册超时定时器，在ONU注册超时时间到达之前，如果GPON单板复位了，ONU注册超时时间清零，重新开始计算。在ONU注册时间超时或者ONU首次注册成功之前，ONU的发现状态为ON，只有当ONU的发现状态为ON时才允许ONU注册上线。在ONU注册时间超时或者首次注册成功后，OLT会将ONU的发现状态设置为OFF。对于注册时间超时的ONU，不允许该ONU注册上线，需要在局端清除掉该ONU的注册时间超时标志后才能上线；对于首次注册成功后的ONU，允许该ONU再次注册上线。ONU的注册时间超时后，单板会向主机命令行和网管上报告警，发现状态的ONU支持系统主备倒换和配置恢复。<br> 2.9 GPON组网应用<br> FTTx组网应用<br> 通过GPON的应用，OLT与ONU可以实现FTTH、FTTO、FTTB、FTTC的各种组网应用，如图2-14所示。<br> 图2-14 FTTx组网应用图<br> <img src="https://images2.imgbox.com/a4/4c/eAAZhKUQ_o.png" alt="在这里插入图片描述"></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f1e6da6dbba81686da5469b5f177e356/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">10分钟物联网设备接入阿里云IoT平台</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/31c5d336e36e7745a8b7d25dac48b088/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">码点(code point)和代码单元（code unit），以及String对象中操作码点和代码单元</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>