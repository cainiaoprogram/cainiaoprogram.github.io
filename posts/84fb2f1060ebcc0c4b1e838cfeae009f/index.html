<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32CubeMX(14) ——基于Cubemax的FreeRTOS移植与LED点灯测试 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32CubeMX(14) ——基于Cubemax的FreeRTOS移植与LED点灯测试" />
<meta property="og:description" content="FreeRTOS移植与LED点灯测试 前言
一、CubeMax移植FreeRTOS
时钟配置 时钟树配置
嘀嗒时钟配置
FreeRTOS配置
FreeRTOS任务配置
IO口配置
二、代码编写
前言 之前的代码其实一直都是裸机在跑，即本质上就是在一个while(1)中在跑，这对于任务量较小的程序来说，没有什么问题。但最近遇到一些工程性的代码，其参考代码均采用了FreeRTOS操作系统，以此来记录一下自己的学习过程。
一、CubeMax移植FreeRTOS 废话不多说，想把FreeRTOS配置起来，再说一些其他东西。
时钟配置 时钟树配置 这个地方主要根据自己的开发板配置下面两个部分
嘀嗒时钟配置 如果使用FreeRTOS，嘀嗒时钟源要使用定时器产生的，这里不说原因，先配置就好。
FreeRTOS配置 这里下面的配置功能，等有特殊功能需要，再介绍，这里不需要动（其实也就是打开或者关闭一些功能）
FreeRTOS任务配置 我们这里配置两个任务来实现两个LED的翻转任务。
主要点击Tasks and Queues的Taks下的add来添加任务，我这里已经添加了两个了。
里面的一些配置主要就是有关任务优先级，堆栈大小，入口函数名字等。
IO口配置 简单配置两个LED的IO口
然后生成代码就OK了。
二、代码编写 生成代码后，我们点开生成的freertos.c文件
在文件里可以看到创建的两个任务的入口函数名字，在其中编写LED翻转代码即可。这里用了osDelay函数，现在简单的把他当成是ms级延长就可以。
下载程序，如果两个LED闪烁时间不一致，就代码移植配置成功了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/84fb2f1060ebcc0c4b1e838cfeae009f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-20T12:54:49+08:00" />
<meta property="article:modified_time" content="2023-05-20T12:54:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32CubeMX(14) ——基于Cubemax的FreeRTOS移植与LED点灯测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95STM32%20Cubemax(%E5%8D%81%E5%9B%9B)%20%E2%80%94%E2%80%94FreeRTOS%E7%A7%BB%E6%A4%8D%E4%B8%8ELED%E7%82%B9%E7%81%AF%E6%B5%8B%E8%AF%95"><a id="_0"></a><br> FreeRTOS移植与LED点灯测试</h2> 
<p></p> 
<div> 
 <p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
 <p id="%E4%B8%80%E3%80%81CubeMax%E7%A7%BB%E6%A4%8DFreeRTOS-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81CubeMax%E7%A7%BB%E6%A4%8DFreeRTOS" rel="nofollow">一、CubeMax移植FreeRTOS</a></p> 
 <p id="%E6%97%B6%E9%92%9F%E9%85%8D%E7%BD%AE%C2%A0-toc" style="margin-left:40px;"><a href="#%E6%97%B6%E9%92%9F%E9%85%8D%E7%BD%AE%C2%A0" rel="nofollow">时钟配置 </a></p> 
 <p id="%C2%A0%E6%97%B6%E9%92%9F%E6%A0%91%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%C2%A0%E6%97%B6%E9%92%9F%E6%A0%91%E9%85%8D%E7%BD%AE" rel="nofollow"> 时钟树配置</a></p> 
 <p id="%C2%A0%E5%98%80%E5%97%92%E6%97%B6%E9%92%9F%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%C2%A0%E5%98%80%E5%97%92%E6%97%B6%E9%92%9F%E9%85%8D%E7%BD%AE" rel="nofollow"> 嘀嗒时钟配置</a></p> 
 <p id="%C2%A0FreeRTOS%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%C2%A0FreeRTOS%E9%85%8D%E7%BD%AE" rel="nofollow"> FreeRTOS配置</a></p> 
 <p id="%C2%A0FreeRTOS%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%C2%A0FreeRTOS%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE" rel="nofollow"> FreeRTOS任务配置</a></p> 
 <p id="IO%E5%8F%A3%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#IO%E5%8F%A3%E9%85%8D%E7%BD%AE" rel="nofollow">IO口配置</a></p> 
 <p id="%E4%BA%8C%E3%80%81%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99" rel="nofollow">二、代码编写</a></p> 
 <p id="-toc" style="margin-left:0px;"></p> 
</div> 
<hr> 
<h2 id="%E5%89%8D%E8%A8%80"><a id="_14"></a><br> 前言</h2> 
<p><span style="color:#0d0016;">之前的代码其实一直都是裸机在跑，即本质上就是在一个while(1)中在跑，这对于任务量较小的程序来说，没有什么问题。但最近遇到一些工程性的代码，其参考代码均采用了FreeRTOS操作系统，以此来记录一下自己的学习过程。</span></p> 
<hr> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81CubeMax%E7%A7%BB%E6%A4%8DFreeRTOS"><a id="pandas_23"></a><br> 一、CubeMax移植FreeRTOS</h2> 
<p><span style="color:#0d0016;">废话不多说，想把FreeRTOS配置起来，再说一些其他东西。</span></p> 
<h3 id="%E6%97%B6%E9%92%9F%E9%85%8D%E7%BD%AE%C2%A0">时钟配置 </h3> 
<p><img alt="" height="270" src="https://images2.imgbox.com/8e/1e/jA0TXVk3_o.png" width="745"></p> 
<h3 id="%C2%A0%E6%97%B6%E9%92%9F%E6%A0%91%E9%85%8D%E7%BD%AE"> 时钟树配置</h3> 
<p><strong>这个地方主要根据自己的开发板配置下面两个部分</strong></p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/24/9c/17HRlBTU_o.png" width="1200"></p> 
<h3 id="%C2%A0%E5%98%80%E5%97%92%E6%97%B6%E9%92%9F%E9%85%8D%E7%BD%AE"> 嘀嗒时钟配置</h3> 
<p>如果使用FreeRTOS，嘀嗒时钟源要使用定时器产生的，这里不说原因，先配置就好。</p> 
<p><img alt="" height="231" src="https://images2.imgbox.com/94/6c/rvV2dFhK_o.png" width="736"></p> 
<h3 id="%C2%A0FreeRTOS%E9%85%8D%E7%BD%AE"> FreeRTOS配置</h3> 
<p>这里下面的配置功能，等有特殊功能需要，再介绍，这里不需要动（其实也就是打开或者关闭一些功能）</p> 
<p><img alt="" height="549" src="https://images2.imgbox.com/64/f6/noYGxHgD_o.png" width="741"></p> 
<h3 id="%C2%A0FreeRTOS%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE"> FreeRTOS任务配置</h3> 
<p>我们这里配置两个任务来实现两个LED的翻转任务。</p> 
<p><img alt="" height="506" src="https://images2.imgbox.com/53/02/trrm9BvE_o.png" width="879"></p> 
<p> 主要点击Tasks and Queues的Taks下的add来添加任务，我这里已经添加了两个了。</p> 
<p>里面的一些配置主要就是有关任务优先级，堆栈大小，入口函数名字等。</p> 
<h3 id="IO%E5%8F%A3%E9%85%8D%E7%BD%AE">IO口配置</h3> 
<p>简单配置两个LED的IO口</p> 
<p><img alt="" height="80" src="https://images2.imgbox.com/42/0d/avLb7Rat_o.png" width="751"></p> 
<p> 然后生成代码就OK了。</p> 
<h2 id="%E4%BA%8C%E3%80%81%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99"><a id="_30"></a><br> 二、代码编写</h2> 
<p>生成代码后，我们点开生成的freertos.c文件</p> 
<p><img alt="" height="144" src="https://images2.imgbox.com/00/5e/nkefaXUn_o.png" width="396"></p> 
<p>在文件里可以看到创建的两个任务的入口函数名字，在其中编写LED翻转代码即可。这里用了osDelay函数，现在简单的把他当成是ms级延长就可以。</p> 
<p><img alt="" height="506" src="https://images2.imgbox.com/0f/d0/qzpk4JXa_o.png" width="463"></p> 
<p> 下载程序，如果两个LED闪烁时间不一致，就代码移植配置成功了。</p> 
<h2><a id="_67"></a></h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/af6a051ae222f0ad81de1f6cf7b0c088/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32CubeMX(10) ——利用一阶卡尔曼滤波处理超声波数据</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d1652264068eda69363223d15cf8e4ec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用SpringBoot记录用户操作日志</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>