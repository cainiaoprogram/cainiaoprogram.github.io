<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pymavlink使用简单教程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pymavlink使用简单教程" />
<meta property="og:description" content="这里写自定义目录标题 pymavlink主要包含的模块连接样例 设置任务样例 更改飞行参数param样例 飞行模式总结 pymavlink Pymavlink是MAVLink协议的python实现。 自身包括一个源代码生成器（generator / mavgen.py），用于为其他编程语言创建MAVLink协议实现。 还包含用于分析飞行日志的工具。
主要包含的模块 mavutil: 用于设置通信链接，接收和解码消息，运行定期任务等.mavwp: 用于加载/保存航点，地理围栏等.mavparm: 用于加载/保存MAVLink 的参数.mavextra: 用于转换单位和消息的工具。mavexpression (internal): MAVLink表达式评估的一些函数. 连接 首先是进行连接, 因为我用的是模拟器所以用udp进行连接并获取心跳包
master = mavutil.mavlink_connection(&#39;udp:0.0.0.0:{}&#39;.format(port))# port 是端口号 master.wait_heartbeat() print(&#34;Heartbeat from system (system %u component %u)&#34; % ( master.target_system, master.target_system)) 连接上了以后可以通过recv_match获取消息
msg = master.recv_match(type=&#39;ATTITUDE&#39;, blocking=True) 其中type是你要获取的消息的类型,可以是单个消息,也可以是一组消息,组消息用[]即可,blocking 是该消息是否阻塞,即在收到type类的消息前一直等待.msg可以使用to_dict()将其变成dict
样例 不停接收UAV的ATTITUDE消息
from pymavlink import mavutil master = mavutil.mavlink_connection(&#39;udp:0.0.0.0:{}&#39;.format(port))# port 是端口号 master.wait_heartbeat() print(&#34;Heartbeat from system (system %u component %u)&#34; % ( master.target_system, master." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1ac46902355879be37f491cfb9f845ed/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-08T16:35:03+08:00" />
<meta property="article:modified_time" content="2022-07-08T16:35:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pymavlink使用简单教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>这里写自定义目录标题</h4> 
 <ul><li><a href="#pymavlink_2" rel="nofollow">pymavlink</a></li><li><ul><li><a href="#_6" rel="nofollow">主要包含的模块</a></li><li><a href="#_13" rel="nofollow">连接</a></li><li><ul><li><a href="#_28" rel="nofollow">样例</a></li></ul> 
   </li><li><a href="#_49" rel="nofollow">设置任务</a></li><li><ul><li><a href="#_97" rel="nofollow">样例</a></li></ul> 
   </li><li><a href="#param_122" rel="nofollow">更改飞行参数param</a></li><li><ul><li><a href="#_139" rel="nofollow">样例</a></li></ul> 
   </li><li><a href="#_172" rel="nofollow">飞行模式</a></li><li><a href="#_190" rel="nofollow">总结</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="pymavlink_2"></a>pymavlink</h2> 
<p><a href="https://github.com/ArduPilot/pymavlink">Pymavlink</a>是MAVLink协议的python实现。 自身包括一个源代码生成器（generator / mavgen.py），用于为其他编程语言创建MAVLink协议实现。 还包含用于分析飞行日志的工具。</p> 
<h3><a id="_6"></a>主要包含的模块</h3> 
<ol><li>mavutil: 用于设置通信链接，接收和解码消息，运行定期任务等.</li><li>mavwp: 用于加载/保存航点，地理围栏等.</li><li>mavparm: 用于加载/保存MAVLink 的参数.</li><li>mavextra: 用于转换单位和消息的工具。</li><li>mavexpression (internal): MAVLink表达式评估的一些函数.</li></ol> 
<h3><a id="_13"></a>连接</h3> 
<p>首先是进行连接, 因为我用的是模拟器所以用udp进行连接并获取心跳包</p> 
<pre><code class="prism language-python">master <span class="token operator">=</span> mavutil<span class="token punctuation">.</span>mavlink_connection<span class="token punctuation">(</span><span class="token string">'udp:0.0.0.0:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># port 是端口号</span>
master<span class="token punctuation">.</span>wait_heartbeat<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Heartbeat from system (system %u component %u)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
            master<span class="token punctuation">.</span>target_system<span class="token punctuation">,</span> master<span class="token punctuation">.</span>target_system<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>连接上了以后可以通过<code>recv_match</code>获取消息</p> 
<pre><code class="prism language-python">msg <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'ATTITUDE'</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>其中<code>type</code>是你要获取的消息的类型,可以是单个消息,也可以是一组消息,组消息用<code>[]</code>即可,<code>blocking</code> 是该消息是否阻塞,即在收到<code>type</code>类的消息前一直等待.<code>msg</code>可以使用<code>to_dict()</code>将其变成<code>dict</code></p> 
<h4><a id="_28"></a>样例</h4> 
<p>不停接收UAV的<code>ATTITUDE</code>消息</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> pymavlink <span class="token keyword">import</span> mavutil

master <span class="token operator">=</span> mavutil<span class="token punctuation">.</span>mavlink_connection<span class="token punctuation">(</span><span class="token string">'udp:0.0.0.0:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># port 是端口号</span>
master<span class="token punctuation">.</span>wait_heartbeat<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Heartbeat from system (system %u component %u)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
            master<span class="token punctuation">.</span>target_system<span class="token punctuation">,</span> master<span class="token punctuation">.</span>target_system<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
	<span class="token keyword">try</span><span class="token punctuation">:</span>
		msg <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'ATTITUDE'</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> <span class="token keyword">not</span> msg<span class="token punctuation">:</span>
			<span class="token keyword">raise</span> ValueError<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">print</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>to_dict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">except</span> KeyboardInterrupt<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Key bordInterrupt! exit'</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span>
</code></pre> 
<h3><a id="_49"></a>设置任务</h3> 
<p>在使用自动航点模式的时候,需要上传自己的mission,mission的格式标注可参考mavlink手册,这里简单举例:</p> 
<pre><code>QGC WPL 110
0	1	0	16	0	0	0	0	40.072842	-105.230575	0.000000	1
1	0	3	22	0.00000000	0.00000000	0.00000000	0.00000000	0.00000000	0.00000000	10.000000	1
2	0	3	16	5.00000000	0.00000000	0.00000000	0.00000000	40.07351510	-105.23148180	20.000000	1
3	0	3	203	0.00000000	0.00000000	0.00000000	0.00000000	0.00000000	0.00000000	0.000000	1
4	0	3	16	1.00000000	0.00000000	0.00000000	0.00000000	40.07251400	-105.23154400	20.000000	1
5	0	3	16	0.00000000	0.00000000	0.00000000	0.00000000	40.07251400	-105.23154400	3.000000	1
6	0	3	178	1.00000000	5.00000000	0.00000000	0.00000000	0.00000000	0.00000000	0.000000	1
7	0	3	16	0.00000000	0.00000000	0.00000000	0.00000000	40.07254400	-105.23135400	3.000000	1
8	0	3	16	0.00000000	0.00000000	0.00000000	0.00000000	40.07260900	-105.23128500	5.000000	1
9	0	3	16	0.00000000	0.00000000	0.00000000	0.00000000	40.07284500	-105.23057600	5.000000	1
</code></pre> 
<p>上传waypoint主要是用<code>mavwp</code></p> 
<p>首先加载mossion的<code>waypoint</code></p> 
<pre><code class="prism language-python">loader <span class="token operator">=</span> mavwp<span class="token punctuation">.</span>MAVWPLoader<span class="token punctuation">(</span><span class="token punctuation">)</span>
loader<span class="token punctuation">.</span>target_system <span class="token operator">=</span> self<span class="token punctuation">.</span>_master<span class="token punctuation">.</span>target_system
loader<span class="token punctuation">.</span>target_component <span class="token operator">=</span> self<span class="token punctuation">.</span>_master<span class="token punctuation">.</span>target_component
loader<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'mission.txt'</span><span class="token punctuation">)</span> <span class="token comment"># load mission</span>

</code></pre> 
<p>根据需要是否清空UAV自身的<code>waypoint</code>, <code>master</code>是上面提到的连接</p> 
<pre><code class="prism language-python">master<span class="token punctuation">.</span>waypoint_clear_all_send<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># need connect the uav at first!</span>
</code></pre> 
<p>使用 <code>master.mav.send</code> 向UAV发送<code>waypoint</code>内容</p> 
<pre><code class="prism language-python">master<span class="token punctuation">.</span>waypoint_count_send<span class="token punctuation">(</span>loader<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
	<span class="token comment"># looping to send each waypoint information</span>
	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>loader<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		msg <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'MISSION_REQUEST'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span>timeout<span class="token punctuation">)</span>
		master<span class="token punctuation">.</span>mav<span class="token punctuation">.</span>send<span class="token punctuation">(</span>loader<span class="token punctuation">.</span>wp<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>seq<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Sending waypoint {0}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>seq<span class="token punctuation">)</span><span class="token punctuation">)</span>
        mission_ack_msg <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'MISSION_ACK'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span>timeout<span class="token punctuation">)</span>
<span class="token keyword">except</span> TimeoutError<span class="token punctuation">:</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'upload mission timeout'</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_97"></a>样例</h4> 
<pre><code class="prism language-python"><span class="token keyword">from</span> pymavlink <span class="token keyword">import</span> mavutil<span class="token punctuation">,</span> mavwp

master <span class="token operator">=</span> mavutil<span class="token punctuation">.</span>mavlink_connection<span class="token punctuation">(</span><span class="token string">'udp:0.0.0.0:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># port 是端口号</span>
master<span class="token punctuation">.</span>wait_heartbeat<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Heartbeat from system (system %u component %u)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
            master<span class="token punctuation">.</span>target_system<span class="token punctuation">,</span> master<span class="token punctuation">.</span>target_system<span class="token punctuation">)</span><span class="token punctuation">)</span>

loader <span class="token operator">=</span> mavwp<span class="token punctuation">.</span>MAVWPLoader<span class="token punctuation">(</span><span class="token punctuation">)</span>
loader<span class="token punctuation">.</span>load<span class="token punctuation">(</span><span class="token string">'mission.txt'</span><span class="token punctuation">)</span> <span class="token comment"># load mission</span>

master<span class="token punctuation">.</span>waypoint_count_send<span class="token punctuation">(</span>loader<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
	<span class="token comment"># looping to send each waypoint information</span>
	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>loader<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		msg <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'MISSION_REQUEST'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span>timeout<span class="token punctuation">)</span>
		master<span class="token punctuation">.</span>mav<span class="token punctuation">.</span>send<span class="token punctuation">(</span>loader<span class="token punctuation">.</span>wp<span class="token punctuation">(</span>msg<span class="token punctuation">.</span>seq<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Sending waypoint {0}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>seq<span class="token punctuation">)</span><span class="token punctuation">)</span>
        mission_ack_msg <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'MISSION_ACK'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span>timeout<span class="token punctuation">)</span>
<span class="token keyword">except</span> TimeoutError<span class="token punctuation">:</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'upload mission timeout'</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="param_122"></a>更改飞行参数param</h3> 
<p>飞控的全部飞行参数为<a href="https://ardupilot.org/copter/docs/parameters.html" rel="nofollow">Full Parameter List of Copter latest V4.0.4 dev<br> </a></p> 
<p><code>mavutil</code>可以直接读取UAV的参数.</p> 
<pre><code class="prism language-python">master<span class="token punctuation">.</span>param_fetch_all<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># read all param| need connect the uav at first!</span>
master<span class="token punctuation">.</span>param_fetch_one<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment"># read one param | need connect the uav at first!</span>
</code></pre> 
<p><code>mavutil</code>提供了直接设置参数的函数.</p> 
<pre><code class="prism language-python">master<span class="token punctuation">.</span>param_set_send<span class="token punctuation">(</span>param<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token comment"># need connect the uav at first!</span>
</code></pre> 
<p>param是参数的名称, value是具体的值</p> 
<h4><a id="_139"></a>样例</h4> 
<p>读取</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> pymavlink <span class="token keyword">import</span> mavutil

master <span class="token operator">=</span> mavutil<span class="token punctuation">.</span>mavlink_connection<span class="token punctuation">(</span><span class="token string">'udp:0.0.0.0:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># port 是端口号</span>
master<span class="token punctuation">.</span>wait_heartbeat<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Heartbeat from system (system %u component %u)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
            master<span class="token punctuation">.</span>target_system<span class="token punctuation">,</span> master<span class="token punctuation">.</span>target_system<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
param <span class="token operator">=</span> <span class="token string">'PSC_POSXY_P'</span>
master<span class="token punctuation">.</span>param_fetch_one<span class="token punctuation">(</span>param<span class="token punctuation">)</span> <span class="token comment"># need connect the uav at first!</span>

message <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'PARAM_VALUE'</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_dict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'name: %s\t value: %f'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token string">'param_id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> message<span class="token punctuation">[</span><span class="token string">'param_value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p>设置</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> pymavlink <span class="token keyword">import</span> mavutil

master <span class="token operator">=</span> mavutil<span class="token punctuation">.</span>mavlink_connection<span class="token punctuation">(</span><span class="token string">'udp:0.0.0.0:{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>port<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># port 是端口号</span>
master<span class="token punctuation">.</span>wait_heartbeat<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Heartbeat from system (system %u component %u)"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>
            master<span class="token punctuation">.</span>target_system<span class="token punctuation">,</span> master<span class="token punctuation">.</span>target_system<span class="token punctuation">)</span><span class="token punctuation">)</span>
            
param <span class="token operator">=</span> <span class="token string">'PSC_POSXY_P'</span>
value <span class="token operator">=</span> <span class="token number">1</span>
master<span class="token punctuation">.</span>param_set_send<span class="token punctuation">(</span>param<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
message <span class="token operator">=</span> master<span class="token punctuation">.</span>recv_match<span class="token punctuation">(</span><span class="token builtin">type</span><span class="token operator">=</span><span class="token string">'PARAM_VALUE'</span><span class="token punctuation">,</span> blocking<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_dict<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'name: %s\t value: %f'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>message<span class="token punctuation">[</span><span class="token string">'param_id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> message<span class="token punctuation">[</span><span class="token string">'param_value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_172"></a>飞行模式</h3> 
<p><code>mavutil</code>同样可以直接改变UAV的飞行模式</p> 
<p>设置为loiter</p> 
<pre><code class="prism language-python">master<span class="token punctuation">.</span>set_mode_loiter<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>解锁 uav</p> 
<pre><code class="prism language-python">master<span class="token punctuation">.</span>arducopter_arm<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>设置为auto模式</p> 
<pre><code class="prism language-python">master<span class="token punctuation">.</span>set_mode_auto<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>这里举几个例子, 切换成其他模式就不一一展示了.<br> 这里要注意的是在auto模式下是无法arm解锁的, 需要切换成其他模式解锁.</p> 
<h3><a id="_190"></a>总结</h3> 
<p>最近正好使用pymavlink进行开发, 但是官方给的文档有些不完善, 内容有些老旧, 因此自己看源码找了总结了一些实际的使用方法.</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7857625d22940f98783dc9aa29650113/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">抖音取关-autojs</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cd9a38dfd030770a8d5559c99509a838/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PYQT基础组件QPushButton、QMessageBox、QInputDialog、QFileDialog、QtextEdit、QSlider、QSpinBox、QComboBox详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>