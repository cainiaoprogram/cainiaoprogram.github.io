<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【算法竞赛刷题模板15】【二维数组前缀和】 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【算法竞赛刷题模板15】【二维数组前缀和】" />
<meta property="og:description" content="【算法竞赛刷题模板15】【二维数组前缀和】 0.总结 Get to the points first. The article comes from LawsonAbs! 二维数组前缀和容斥原理 下面结合一道例题【洛谷】P2280 [HNOI2003]激光炸弹，来讲讲如何实现二维数组的前缀和。
1.题意 二维坐标中每个点都有一定的价值。求出坐标系中以某点作为边长m的正方形的右下角的最大价值。
2.思想 二维数组前缀和
这里的前缀指的是从(0,0) 到 (x,y)这个矩形区域，其和就是 s[x][y]前缀和的推导公式
s[i][j] = s[i-1][j] &#43; s[i][j-1]- s[i-1][j-1] &#43; val[i][j]，其中s[0][j]和 s[i][0]需要单独判断 如果用图形表示的话，则是下面这个样子
s[i][j] =
s[i][j] =
s[i-1][j] =
s[i-1][j-1]=
val[i][j]=
综合表述，也就是下面这个样子：
棕色是绿色和紫色的重合部分。
在得到前缀和的基础上，针对题目要求适当变形即可 3.代码 #include&lt;iostream&gt; using namespace std; const int X = 5005,Y = 5005,N = 5005; int s[N][N];//二维数组前缀和 int res = 0; int main(){ int n,m; cin &gt;&gt; n&gt;&gt; m; int a,b,w,mx=0,my=0; for(int i =0;i &lt; n;i&#43;&#43;){ cin &gt;&gt; a &gt;&gt; b &gt;&gt; w ; mx=max(mx,a);//求出坐标的最大值 my=max(my,b); s[a][b]&#43;=w;//为节省空间，直接累加 } //1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/df4e8aed1e380f3bede5d9123b990259/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-27T17:03:35+08:00" />
<meta property="article:modified_time" content="2020-04-27T17:03:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【算法竞赛刷题模板15】【二维数组前缀和】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="15_0"></a>【算法竞赛刷题模板15】【二维数组前缀和】</h2> 
<hr> 
<h5><a id="0_2"></a>0.总结</h5> 
<h6><a id="Get_to_the_points_first_The_article_comes_from_LawsonAbs_3"></a><code>Get to the points first. The article comes from LawsonAbs!</code></h6> 
<ul><li>二维数组前缀和</li><li>容斥原理</li></ul> 
<hr> 
<p>下面结合一道例题【洛谷】P2280 [HNOI2003]激光炸弹，来讲讲如何实现二维数组的前缀和。</p> 
<h5><a id="1_8"></a>1.题意</h5> 
<p>二维坐标中每个点都有一定的价值。求出坐标系中以某点作为边长m的正方形的右下角的最大价值。</p> 
<h5><a id="2_10"></a>2.思想</h5> 
<p>二维数组前缀和</p> 
<ul><li><mark>这里的前缀指的是从<code>(0,0)</code> 到 <code>(x,y)</code>这个矩形区域</mark>，其和就是 <code>s[x][y]</code></li><li>前缀和的推导公式<br> <code>s[i][j] = s[i-1][j] + s[i][j-1]- s[i-1][j-1] + val[i][j]</code>，其中<code>s[0][j]</code>和 <code>s[i][0]</code>需要单独判断</li></ul> 
<p>如果用图形表示的话，则是下面这个样子<br> <code>s[i][j] =</code><br> <img src="https://images2.imgbox.com/ad/ba/GGmSmvgM_o.png" alt="在这里插入图片描述"><br> <code>s[i][j] =</code><br> <img src="https://images2.imgbox.com/1c/8a/y24GXrzH_o.png" alt="在这里插入图片描述"><br> <code>s[i-1][j] =</code><br> <img src="https://images2.imgbox.com/1c/e3/8hVLk0Om_o.png" alt="在这里插入图片描述"><br> <code>s[i-1][j-1]=</code><br> <img src="https://images2.imgbox.com/18/db/NhMjtXuh_o.png" alt="在这里插入图片描述"><br> <code>val[i][j]=</code><br> <img src="https://images2.imgbox.com/e3/94/eZ5mXO7V_o.png" alt="在这里插入图片描述"></p> 
<p>综合表述，也就是下面这个样子：<br> <img src="https://images2.imgbox.com/f5/02/HOIuQRVs_o.png" alt="在这里插入图片描述"><br> 棕色是绿色和紫色的重合部分。</p> 
<ul><li>在得到前缀和的基础上，针对题目要求适当变形即可</li></ul> 
<h5><a id="3_34"></a>3.代码</h5> 
<pre><code class="prism language-c"><span class="token macro property">#<span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
using namespace std<span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token keyword">int</span> X <span class="token operator">=</span> <span class="token number">5005</span><span class="token punctuation">,</span>Y <span class="token operator">=</span> <span class="token number">5005</span><span class="token punctuation">,</span>N <span class="token operator">=</span> <span class="token number">5005</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> s<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//二维数组前缀和 </span>
<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> n<span class="token punctuation">,</span>m<span class="token punctuation">;</span>
	cin <span class="token operator">&gt;&gt;</span> n<span class="token operator">&gt;&gt;</span> m<span class="token punctuation">;</span>
	<span class="token keyword">int</span> a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>w<span class="token punctuation">,</span>mx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span>my<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		cin <span class="token operator">&gt;&gt;</span> a <span class="token operator">&gt;&gt;</span> b <span class="token operator">&gt;&gt;</span> w <span class="token punctuation">;</span>
		mx<span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//求出坐标的最大值 </span>
		my<span class="token operator">=</span><span class="token function">max</span><span class="token punctuation">(</span>my<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
		s<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token operator">+</span><span class="token operator">=</span>w<span class="token punctuation">;</span><span class="token comment">//为节省空间，直接累加 </span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//1.计算前缀和 </span>
	<span class="token comment">//01.单独计算s[0][j], s[i][0]</span>
	<span class="token comment">//02.计算s[i][j] 	</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span> <span class="token function">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span>s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span>  s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token function">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span><span class="token function">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token comment">//因为s[i][j]尚未计算过，所以可以累加 </span>
			s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span><span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">;</span> 
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">//2.计算m个正方形内的和，以(i,j)为正方形的右下角</span>
	<span class="token comment">//01.如果枚举左上角，则需要特判边界处理，所以更优的方法是枚举右下角 </span>
	<span class="token comment">//02.注意这里的i,j的上限是max(mx,my),否则当m&gt;mx时，就会出现问题。 </span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token function">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">&lt;=</span><span class="token function">max</span><span class="token punctuation">(</span>mx<span class="token punctuation">,</span>my<span class="token punctuation">)</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
			<span class="token keyword">int</span> temp <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>
						<span class="token operator">-</span> <span class="token punctuation">(</span>j<span class="token operator">-</span>m<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">:</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//防止下标越界&amp;简洁，用三元运算符 </span>
						<span class="token operator">-</span> <span class="token punctuation">(</span>i<span class="token operator">-</span>m<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">:</span> s<span class="token punctuation">[</span>i<span class="token operator">-</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>
			 			<span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>i<span class="token operator">-</span>m<span class="token operator">&lt;</span><span class="token number">0</span> <span class="token operator">||</span> j<span class="token operator">-</span>m<span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">?</span> <span class="token number">0</span><span class="token punctuation">:</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span>m<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			res <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span> 
	cout <span class="token operator">&lt;&lt;</span> res <span class="token operator">&lt;&lt;</span><span class="token string">"\n"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 
</code></pre> 
<p>测试用例</p> 
<pre><code>1 3
0 1 0

2 1
0 0 1
1 1 1

2 1
0 0 1
1 2 3

3 1
0 0 1
1 2 3
0 1 4

3 2
0 0 1
1 2 3
0 1 4
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a86482daed53e9f0426176d00db1c87/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IDEA Listener 模板设置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/59285a855f25b2208d1b9b012adb48fd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MyBatis-Plus 通过typeConvert进行java类型转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>