<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>windows10下修改Docker镜像目录 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="windows10下修改Docker镜像目录" />
<meta property="og:description" content="1、背景需求 Windows 版本（Windows 10 wsl 2）docker 默认程序安装到c盘，数据存储于C:\Users\当前用户名\AppData\Local\Docker\wsl\data\ext4.vhdx这样会导致docker占用C盘的空间越来越大。
2、Docker切换盘位操作步骤 2.1. 停止docker 通过windows系统的界面操作停止
打开cmd窗口，查看停止情况：
C:\Users\suntoon-ylf&gt;wsl --list -v NAME STATE VERSION * docker-desktop Stopped 2 docker-desktop-data Stopped 2 2.2. 备份导出目前已有的数据 C:\Users\suntoon-ylf&gt;wsl --export docker-desktop-data &#34;D:\Docker\wsl\data\docker-desktop-data.tar&#34; C:\Users\suntoon-ylf&gt;dir D:\Docker\wsl\data\ 驱动器 D 中的卷没有标签。 卷的序列号是 0007-3FF9 D:\Docker\wsl\data 的目录 2022/03/29 09:56 &lt;DIR&gt; . 2022/03/29 09:56 &lt;DIR&gt; .. 2022/03/29 09:57 2,984,243,200 docker-desktop-data.tar 命令说明：将目前已有的数据备份到D:\Docker\wsl\data\目录下，并命名为docker-desktop-data.tar
2.3. 删除原有数据 C:\Users\suntoon-ylf&gt;wsl --unregister docker-desktop-data 正在注销... C:\Users\suntoon-ylf&gt;wsl --list -v NAME STATE VERSION * docker-desktop Stopped 2 说明：解除当前的docker数据虚拟盘映射，进行该操作后会删除原有的ext4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b536394c163d3fae31a05e1294ef0e0a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-29T10:22:02+08:00" />
<meta property="article:modified_time" content="2022-03-29T10:22:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">windows10下修改Docker镜像目录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="1_0"></a>1、背景需求</h5> 
<p>Windows 版本（Windows 10 wsl 2）docker 默认程序安装到c盘，数据存储于<code>C:\Users\当前用户名\AppData\Local\Docker\wsl\data\ext4.vhdx</code>这样会导致docker占用C盘的空间越来越大。</p> 
<h5><a id="2Docker_2"></a>2、Docker切换盘位操作步骤</h5> 
<h6><a id="21_docker_3"></a>2.1. 停止docker</h6> 
<p>通过windows系统的界面操作停止<br> <img src="https://images2.imgbox.com/b9/98/7bZgoQhF_o.png" alt="在这里插入图片描述"><br> 打开cmd窗口，查看停止情况：</p> 
<pre><code>C:\Users\suntoon-ylf&gt;wsl --list -v
  NAME                   STATE           VERSION
* docker-desktop         Stopped         2
  docker-desktop-data    Stopped         2
</code></pre> 
<h6><a id="22__13"></a>2.2. 备份导出目前已有的数据</h6> 
<pre><code>C:\Users\suntoon-ylf&gt;wsl --export docker-desktop-data "D:\Docker\wsl\data\docker-desktop-data.tar"

C:\Users\suntoon-ylf&gt;dir D:\Docker\wsl\data\
 驱动器 D 中的卷没有标签。
 卷的序列号是 0007-3FF9

 D:\Docker\wsl\data 的目录

2022/03/29  09:56    &lt;DIR&gt;          .
2022/03/29  09:56    &lt;DIR&gt;          ..
2022/03/29  09:57     2,984,243,200 docker-desktop-data.tar
</code></pre> 
<p><strong>命令说明：将目前已有的数据备份到D:\Docker\wsl\data\目录下，并命名为docker-desktop-data.tar</strong></p> 
<h6><a id="23__28"></a>2.3. 删除原有数据</h6> 
<pre><code>C:\Users\suntoon-ylf&gt;wsl --unregister docker-desktop-data
正在注销...

C:\Users\suntoon-ylf&gt;wsl --list -v
  NAME              STATE           VERSION
* docker-desktop    Stopped         2
</code></pre> 
<p><strong>说明：解除当前的docker数据虚拟盘映射，进行该操作后会删除原有的ext4.vhdx（数据未备份前谨慎操作）</strong></p> 
<h6><a id="24__38"></a>2.4. 导入数据到新盘</h6> 
<pre><code>C:\Users\suntoon-ylf&gt;wsl --import docker-desktop-data "D:\Docker\wsl\data" "D:\Docker\wsl\data\docker-desktop-data.tar" --version 2

C:\Users\suntoon-ylf&gt;wsl --list -v
  NAME                   STATE           VERSION
* docker-desktop         Stopped         2
  docker-desktop-data    Stopped         2
</code></pre> 
<p><strong>说明：将备份数据导入到新的虚拟盘，且指定虚拟盘的存放路径为<code>D:\Docker\wsl\data</code>，导入完成后在该目录下会创建一个<code>ext4.vhdx</code>的虚拟磁盘目录</strong></p> 
<h6><a id="25_Docker_48"></a>2.5. 启动Docker</h6> 
<p>在开始菜单中找到docker点击启动即可<br> <strong>最后备份的文件<code>D:\Docker\wsl\data\docker-desktop-data.tar</code>可根据情况删除</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c5d5b4e824cf96f0c355cf2320a6057e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">uniapp播放视频 Uncaught (in promise)DOMException: The element has no supported sources.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/807b633ac493b53e87de426dbe176139/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux设置UTC时区</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>