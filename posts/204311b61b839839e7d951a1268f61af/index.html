<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言编译与链接过程详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言编译与链接过程详解" />
<meta property="og:description" content="C语言编译与链接过程详解 源文件 main.c #include &lt;stdio.h&gt; extern int data; extern int add(int a,int b); int a1; int a2 = 0; int a3 = 10; static int b1; static int b2 = 0; static int b3 = 20; int main() { int c1; int c2 = 0; int c3 = 30; static int d1; static int d2 = 0; static int d3 = 40; c1 = data; c2 = add(a1,a2); while(1); return 0; } add." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/204311b61b839839e7d951a1268f61af/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-02T15:10:56+08:00" />
<meta property="article:modified_time" content="2023-10-02T15:10:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言编译与链接过程详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="C_0"></a>C语言编译与链接过程详解</h3> 
<h4><a id="_2"></a>源文件</h4> 
<h5><a id="mainc_4"></a>main.c</h5> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">extern</span> <span class="token keyword">int</span> data<span class="token punctuation">;</span>
<span class="token keyword">extern</span> <span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> a1<span class="token punctuation">;</span>
<span class="token keyword">int</span> a2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> a3 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token keyword">int</span> b1<span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> b2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> b3 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> c1<span class="token punctuation">;</span>
	<span class="token keyword">int</span> c2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> c3 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

	<span class="token keyword">static</span> <span class="token keyword">int</span> d1<span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> d2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> d3 <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>

	c1 <span class="token operator">=</span> data<span class="token punctuation">;</span>
	c2 <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="addc_39"></a>add.c</h5> 
<pre><code class="prism language-c"><span class="token keyword">int</span> data <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span><span class="token keyword">int</span> b<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span> a<span class="token operator">+</span>b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p>两大过程：<strong>编译、链接</strong></p> 
<h4><a id="_55"></a><strong>一、编译过程：</strong></h4> 
<hr> 
<ol><li> <p><strong>预处理 (.i)</strong></p> 
  <ul><li> <p>处理#开头的预处理指令：#include #define #ifndef #if #else 等等</p> </li><li> <p>去注释、加行号、生成文件索引等等</p> </li></ul> 
  <blockquote> 
   <p><strong>命令：gcc -E main.c -o main.i，生成 .i 文件</strong></p> 
  </blockquote> </li><li> <p><strong>编译</strong> <strong>(.s)</strong></p> <p>将 .i 文件编译生成 .s 汇编文件</p> 
  <blockquote> 
   <p><strong>命令：gcc -S main.i</strong> <strong>生成 .s 文件</strong></p> 
  </blockquote> </li><li> <p><strong>汇编 (.o)</strong></p> <p>将汇编文件翻译成二进程可重定位文件，即 <strong>.o</strong> 文件</p> 
  <blockquote> 
   <p><strong>命令：gcc -c main.s 生成 .o 文件</strong></p> 
  </blockquote> </li></ol> 
<p><strong>PS：gcc命令只是一些后台程序的包装，它会根据不同的参数调用其他程序：</strong></p> 
<ul><li> <p>预编译和编译合并成了一个步骤，使用的是程序<strong>cc1</strong>，也可以通过如下命令生成.s文件</p> 
  <blockquote> 
   <p><strong>cc1 hello.c</strong></p> 
   <p>等同于 gcc -S hello.c -o hello.s</p> 
  </blockquote> </li><li> <p>汇编器 as</p> </li><li> <p>链接器 ld</p> </li></ul> 
<h5><a id="_95"></a>分析二进制可重定位文件</h5> 
<hr> 
<p>main.c文件</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> a1<span class="token punctuation">;</span>
<span class="token keyword">int</span> a2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> a3 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token keyword">static</span> <span class="token keyword">int</span> b1<span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> b2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">static</span> <span class="token keyword">int</span> b3 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> c1<span class="token punctuation">;</span>
	<span class="token keyword">int</span> c2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> c3 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

	<span class="token keyword">static</span> <span class="token keyword">int</span> d1<span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> d2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">static</span> <span class="token keyword">int</span> d3 <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>编译命令：在64位的机器上编译32位的.o文件</p> 
<blockquote> 
 <p>*<em>gcc -m32 -fno-PIC -c <em>.c</em></em></p> 
 <p>-m32指定编译生成32位文件；-fno-PIC去除和位置无关的段（只留下.text .data .bss .comment 等）</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/f1/72/oH74Ckko_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="1__elf__137"></a>1. 读取 elf <strong>文件头</strong></h6> 
<pre><code class="prism language-c">$ readelf <span class="token operator">-</span>h main<span class="token punctuation">.</span>o                                                           
ELF 头：
  Magic：   <span class="token number">7f</span> <span class="token number">45</span> <span class="token number">4</span>c <span class="token number">46</span> <span class="token number">01</span> <span class="token number">01</span> <span class="token number">01</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> 
  类别<span class="token operator">:</span>                              ELF32
  数据<span class="token operator">:</span>                              <span class="token number">2</span> 补码，小端序 <span class="token punctuation">(</span>little endian<span class="token punctuation">)</span>
  版本<span class="token operator">:</span>                              <span class="token number">1</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span>
  OS<span class="token operator">/</span>ABI<span class="token operator">:</span>                            UNIX <span class="token operator">-</span> System V
  ABI 版本<span class="token operator">:</span>                          <span class="token number">0</span>
  类型<span class="token operator">:</span>                              <span class="token function">REL</span> <span class="token punctuation">(</span>可重定位文件<span class="token punctuation">)</span>
  系统架构<span class="token operator">:</span>                          ARM
  版本<span class="token operator">:</span>                              <span class="token number">0x1</span>
  入口点地址：               <span class="token number">0x0</span>
  程序头起点：          <span class="token number">0</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>
  Start of section headers<span class="token operator">:</span>          <span class="token number">268</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>
  标志：             <span class="token number">0x5000000</span><span class="token punctuation">,</span> Version5 EABI
  本头的大小：       <span class="token number">52</span> <span class="token punctuation">(</span>字节<span class="token punctuation">)</span>
  程序头大小：       <span class="token number">0</span> <span class="token punctuation">(</span>字节<span class="token punctuation">)</span>
  Number of program headers<span class="token operator">:</span>         <span class="token number">0</span>
  节头大小：         <span class="token number">40</span> <span class="token punctuation">(</span>字节<span class="token punctuation">)</span>
  节头数量：         <span class="token number">10</span>
  字符串表索引节头： <span class="token number">7</span>
</code></pre> 
<p>(1) 魔数</p> 
<blockquote> 
 <p>Magic： 7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/e6/ea/EX2AmuPk_o.png" alt="在这里插入图片描述"></p> 
<p>(2) REL (可重定位文件)</p> 
<p>(3) 入口点地址： 0x0</p> 
<p>(4) Start of section headers: 268 (bytes into file)</p> 
<p>(5) 本头的大小： 52 (字节)</p> 
<h6><a id="2__elf__section_headers__font_colorredfont_180"></a>2. 获取 elf 文件的 <strong>section headers(段头)</strong> 信息 <font color="red">（供链接使用）</font></h6> 
<pre><code class="prism language-c">$ readelf <span class="token operator">-</span>S main<span class="token punctuation">.</span>o
There are <span class="token number">12</span> section headers<span class="token punctuation">,</span> starting at offset <span class="token number">0x2ec</span><span class="token operator">:</span>

节头：
  <span class="token punctuation">[</span>Nr<span class="token punctuation">]</span> Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">]</span>                   <span class="token constant">NULL</span>            <span class="token number">00000000</span> <span class="token number">000000</span> <span class="token number">000000</span> <span class="token number">00</span>      <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">0</span>
  <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>text             PROGBITS        <span class="token number">00000000</span> <span class="token number">000034</span> <span class="token number">000044</span> <span class="token number">00</span>  AX  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>rel<span class="token punctuation">.</span>text         REL             <span class="token number">00000000</span> <span class="token number">00026</span>c <span class="token number">000020</span> <span class="token number">08</span>   I  <span class="token number">9</span>   <span class="token number">1</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>data             PROGBITS        <span class="token number">00000000</span> <span class="token number">000078</span> <span class="token number">00000</span>c <span class="token number">00</span>  WA  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>bss              NOBITS          <span class="token number">00000000</span> <span class="token number">000084</span> <span class="token number">000014</span> <span class="token number">00</span>  WA  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>comment          PROGBITS        <span class="token number">00000000</span> <span class="token number">000084</span> <span class="token number">00002</span>a <span class="token number">01</span>  MS  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
  <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>note<span class="token punctuation">.</span>GNU<span class="token operator">-</span>stack   PROGBITS        <span class="token number">00000000</span> <span class="token number">0000</span>ae <span class="token number">000000</span> <span class="token number">00</span>      <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
  <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>eh_frame         PROGBITS        <span class="token number">00000000</span> <span class="token number">0000</span>b0 <span class="token number">00003</span>c <span class="token number">00</span>   A  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>rel<span class="token punctuation">.</span>eh_frame     REL             <span class="token number">00000000</span> <span class="token number">00028</span>c <span class="token number">000008</span> <span class="token number">08</span>   I  <span class="token number">9</span>   <span class="token number">7</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">9</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>symtab           SYMTAB          <span class="token number">00000000</span> <span class="token number">0000</span>ec <span class="token number">000140</span> <span class="token number">10</span>     <span class="token number">10</span>  <span class="token number">14</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>strtab           STRTAB          <span class="token number">00000000</span> <span class="token number">00022</span>c <span class="token number">000040</span> <span class="token number">00</span>      <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
  <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>shstrtab         STRTAB          <span class="token number">00000000</span> <span class="token number">000294</span> <span class="token number">000057</span> <span class="token number">00</span>      <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
Key to Flags<span class="token operator">:</span>
  <span class="token function">W</span> <span class="token punctuation">(</span>write<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">A</span> <span class="token punctuation">(</span>alloc<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">X</span> <span class="token punctuation">(</span>execute<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">M</span> <span class="token punctuation">(</span>merge<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">S</span> <span class="token punctuation">(</span>strings<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">I</span> <span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">L</span> <span class="token punctuation">(</span>link order<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">O</span> <span class="token punctuation">(</span>extra OS processing required<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">G</span> <span class="token punctuation">(</span>group<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">T</span> <span class="token punctuation">(</span>TLS<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">C</span> <span class="token punctuation">(</span>compressed<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">x</span> <span class="token punctuation">(</span>unknown<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">o</span> <span class="token punctuation">(</span>OS specific<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">E</span> <span class="token punctuation">(</span>exclude<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">p</span> <span class="token punctuation">(</span>processor specific<span class="token punctuation">)</span>
</code></pre> 
<p>有12个段头，起始段头偏移为 0x2ec</p> 
<p>可以看到每个段的偏移与大小</p> 
<h6><a id="3__213"></a>3. 打印出段的内容</h6> 
<pre><code class="prism language-c"><span class="token operator">~</span> $ objdump <span class="token operator">-</span>s main<span class="token punctuation">.</span>o

main<span class="token punctuation">.</span>o：     文件格式 elf32<span class="token operator">-</span>i386

Contents of section <span class="token punctuation">.</span>text<span class="token operator">:</span>
 <span class="token number">0000</span> <span class="token number">8</span>d4c2404 <span class="token number">83e4f</span><span class="token number">0ff</span> <span class="token number">71f</span>c5589 e55183ec  <span class="token punctuation">.</span>L$<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>q<span class="token punctuation">.</span>U<span class="token punctuation">.</span><span class="token punctuation">.</span>Q<span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0010</span> <span class="token number">14</span>c745ec <span class="token number">00000000</span> c745f01e <span class="token number">000000</span>a1  <span class="token punctuation">.</span><span class="token punctuation">.</span>E<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>E<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0020</span> <span class="token number">00000000</span> <span class="token number">8945f</span><span class="token number">48</span>b <span class="token number">15000000</span> <span class="token number">00</span>a10000  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>E<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0030</span> <span class="token number">000083</span>ec <span class="token number">085250e8</span> fcffffff <span class="token number">83</span>c41089  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>RP<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0040</span> <span class="token number">45</span>ecebfe                             E<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>            
Contents of section <span class="token punctuation">.</span>data<span class="token operator">:</span>
 <span class="token number">0000</span> <span class="token number">0</span>a000000 <span class="token number">14000000</span> <span class="token number">28000000</span>           <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>    
Contents of section <span class="token punctuation">.</span>comment<span class="token operator">:</span>
 <span class="token number">0000</span> <span class="token number">00474343</span> <span class="token number">3</span>a202855 <span class="token number">62756e74</span> <span class="token number">7520372</span>e  <span class="token punctuation">.</span>GCC<span class="token operator">:</span> <span class="token punctuation">(</span>Ubuntu <span class="token number">7.</span>
 <span class="token number">0010</span> <span class="token number">352e302</span>d <span class="token number">33756275</span> <span class="token number">6e747531</span> <span class="token number">7e31382</span>e  <span class="token number">5.0</span><span class="token operator">-</span><span class="token number">3u</span>buntu1<span class="token operator">~</span><span class="token number">18.</span>
 <span class="token number">0020</span> <span class="token number">30342920</span> <span class="token number">372e352</span>e <span class="token number">3000</span>               <span class="token number">04</span><span class="token punctuation">)</span> <span class="token number">7.5</span><span class="token number">.0</span><span class="token punctuation">.</span>      
Contents of section <span class="token punctuation">.</span>eh_frame<span class="token operator">:</span>
 <span class="token number">0000</span> <span class="token number">14000000</span> <span class="token number">00000000</span> <span class="token number">017</span>a5200 <span class="token number">017</span>c0801  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>zR<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">|</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0010</span> <span class="token number">1</span>b0c0404 <span class="token number">88010000</span> <span class="token number">20000000</span> <span class="token number">1</span>c000000  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0020</span> <span class="token number">00000000</span> <span class="token number">44000000</span> <span class="token number">00440</span>c01 <span class="token number">00471005</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>D<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>D<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>G<span class="token punctuation">.</span><span class="token punctuation">.</span>
 <span class="token number">0030</span> <span class="token number">02750043</span> <span class="token number">0f</span><span class="token number">03757</span>c <span class="token number">06000000</span>           <span class="token punctuation">.</span>u<span class="token punctuation">.</span>C<span class="token punctuation">.</span><span class="token punctuation">.</span>u<span class="token operator">|</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<h6><a id="4__o__241"></a>4. 读取 .o 文件<strong>符号表</strong></h6> 
<pre><code class="prism language-c"><span class="token operator">~</span> $ objdump <span class="token operator">-</span>t main<span class="token punctuation">.</span>o                                                           
main<span class="token punctuation">.</span>o：     文件格式 elf32<span class="token operator">-</span>little

SYMBOL TABLE<span class="token operator">:</span>
<span class="token number">00000000</span> l    df <span class="token operator">*</span>ABS<span class="token operator">*</span>	<span class="token number">00000000</span> main<span class="token punctuation">.</span>c
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>text	<span class="token number">00000000</span> <span class="token punctuation">.</span>text
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>data	<span class="token number">00000000</span> <span class="token punctuation">.</span>data
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>bss	<span class="token number">00000000</span> <span class="token punctuation">.</span>bss
<span class="token number">00000004</span> l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> b1
<span class="token number">00000008</span> l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> b2
<span class="token number">00000004</span> l     O <span class="token punctuation">.</span>data	<span class="token number">00000004</span> b3
<span class="token number">00000008</span> l     O <span class="token punctuation">.</span>data	<span class="token number">00000004</span> d3<span class="token punctuation">.</span><span class="token number">1881</span>
<span class="token number">0000000</span>c l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> d2<span class="token punctuation">.</span><span class="token number">1880</span>
<span class="token number">00000010</span> l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> d1<span class="token punctuation">.</span><span class="token number">1879</span>
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>note<span class="token punctuation">.</span>GNU<span class="token operator">-</span>stack	<span class="token number">00000000</span> <span class="token punctuation">.</span>note<span class="token punctuation">.</span>GNU<span class="token operator">-</span>stack
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>eh_frame	<span class="token number">00000000</span> <span class="token punctuation">.</span>eh_frame
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>comment	<span class="token number">00000000</span> <span class="token punctuation">.</span>comment
<span class="token number">00000004</span>       O <span class="token operator">*</span>COM<span class="token operator">*</span>	<span class="token number">00000004</span> a1
<span class="token number">00000000</span> g     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> a2
<span class="token number">00000000</span> g     O <span class="token punctuation">.</span>data	<span class="token number">00000004</span> a3
<span class="token number">00000000</span> g     F <span class="token punctuation">.</span>text	<span class="token number">00000044</span> main
<span class="token number">00000000</span>         <span class="token operator">*</span>UND<span class="token operator">*</span>	<span class="token number">00000000</span> data
<span class="token number">00000000</span>         <span class="token operator">*</span>UND<span class="token operator">*</span>	<span class="token number">00000000</span> add
</code></pre> 
<p>标出了每个符号处于那个段，占多大内存，其中 a1 标记为 *COM* 表示它是弱符号（未初始化的非静态全局变量，可能其他文件里也定义了同名的）</p> 
<p>data 和 add 这两个符号被标记为 *UND* ，表示未定义的符号，在本文件中找不到定义，链接时会从其他文件中寻找</p> 
<p><strong>5. 根据 section headers(段头) 信息，画出二进制可重定位文件的组成（.o文件）</strong></p> 
<p><img src="https://images2.imgbox.com/97/9b/OztzK0O7_o.png" alt="在这里插入图片描述"></p> 
<p>可以发现bss段和comment段的起始卫视相同，但实际计算得出bss段在.o文件中并没有存储，但是符号表中对bss段有记录。</p> 
<p>得出结论：bss段保存的都是<strong>未初始化 / 初始化为0</strong>的全局变量，和<strong>未初始化 / 初始化为0</strong>的<strong>静态</strong>局部变量，所以他们的默认值都为0 ，故为了节省.o文件的空间，无需存储，但是需要在符号表中记录，在最后执行可执行文件后，将bss段的符号存到虚拟地址空间中。<br> <img src="https://images2.imgbox.com/77/a8/X3S3brxW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/19/70/13QRE6H3_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_287"></a><strong>二、链接过程：</strong></h4> 
<hr> 
<p><strong>在64位x86机器上编译-链接生成32位目标文件和可执行文件的命令</strong></p> 
<pre><code class="prism language-c">编译：
	gcc <span class="token operator">-</span>m32 <span class="token operator">-</span>fno<span class="token operator">-</span>PIC <span class="token operator">-</span>c <span class="token operator">*</span><span class="token punctuation">.</span>c
手动链接：
    ld <span class="token operator">-</span>e main <span class="token operator">-</span>melf_i386 <span class="token operator">*</span><span class="token punctuation">.</span>o <span class="token operator">-</span>o run
    
生成如下文件：
    $ ls
	add<span class="token punctuation">.</span>c  add<span class="token punctuation">.</span>o  main<span class="token punctuation">.</span>c  main<span class="token punctuation">.</span>o  run
</code></pre> 
<p>PS：</p> 
<p>-m32指定编译生成32位文件；</p> 
<p>-fno-PIC去除和位置无关的段（只留下.text .data .bss .comment 等）</p> 
<p>-e 指定程序入口，-e后跟着符号即可，也可以把add函数作为程序入口，即 -e add</p> 
<p>-melf_i386指定链接生成32位的，x86架构的可执行文件</p> 
<hr> 
<p>链接过程的本质主要是将多个目标文件“粘”在一起，实质上拼合的是目标文件之间对地址的引用，即函数名和全局变量</p> 
<p>符号表就是.o文件的一个段，<strong>symtab</strong>，查看符号表命令</p> 
<blockquote> 
 <p>readelf -s main.o</p> 
 <p>objdump -t main.o</p> 
 <p>nm main.o</p> 
</blockquote> 
<p>符号表中包含什么，主要关注<strong>1和2</strong>：</p> 
<ul><li> 
  <ol><li>定义在本目标文件中的全局符号，例如变量名、函数名等</li></ol> </li><li> 
  <ol start="2"><li>引用的其他目标文件中的符号，没有在本文件中定义，一般<strong>叫做外部符号</strong></li></ol> </li><li> 
  <ol start="3"><li>段名，如 “.text”, “.data” 等</li></ol> </li><li> 
  <ol start="4"><li>局部符号，只在编译单元内部可见，调试器可以使用这些符号来分析程序或崩溃时的核心转储文件，链接过程中链接器往往忽略它们</li></ol> </li></ul> 
<pre><code class="prism language-c">$ objdump <span class="token operator">-</span>t main<span class="token punctuation">.</span>o

main<span class="token punctuation">.</span>o：     文件格式 elf32<span class="token operator">-</span>i386

SYMBOL TABLE<span class="token operator">:</span>
<span class="token number">00000000</span> l    df <span class="token operator">*</span>ABS<span class="token operator">*</span>	<span class="token number">00000000</span> main<span class="token punctuation">.</span>c
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>text	<span class="token number">00000000</span> <span class="token punctuation">.</span>text
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>data	<span class="token number">00000000</span> <span class="token punctuation">.</span>data
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>bss	<span class="token number">00000000</span> <span class="token punctuation">.</span>bss
<span class="token number">00000004</span> l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> b1
<span class="token number">00000008</span> l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> b2
<span class="token number">00000004</span> l     O <span class="token punctuation">.</span>data	<span class="token number">00000004</span> b3
<span class="token number">00000008</span> l     O <span class="token punctuation">.</span>data	<span class="token number">00000004</span> d3<span class="token punctuation">.</span><span class="token number">1877</span>
<span class="token number">0000000</span>c l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> d2<span class="token punctuation">.</span><span class="token number">1876</span>
<span class="token number">00000010</span> l     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> d1<span class="token punctuation">.</span><span class="token number">1875</span>
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>note<span class="token punctuation">.</span>GNU<span class="token operator">-</span>stack	<span class="token number">00000000</span> <span class="token punctuation">.</span>note<span class="token punctuation">.</span>GNU<span class="token operator">-</span>stack
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>eh_frame	<span class="token number">00000000</span> <span class="token punctuation">.</span>eh_frame
<span class="token number">00000000</span> l    d  <span class="token punctuation">.</span>comment	<span class="token number">00000000</span> <span class="token punctuation">.</span>comment
<span class="token number">00000004</span>       O <span class="token operator">*</span>COM<span class="token operator">*</span>	<span class="token number">00000004</span> a1
<span class="token number">00000000</span> g     O <span class="token punctuation">.</span>bss	<span class="token number">00000004</span> a2
<span class="token number">00000000</span> g     O <span class="token punctuation">.</span>data	<span class="token number">00000004</span> a3
<span class="token number">00000000</span> g     F <span class="token punctuation">.</span>text	<span class="token number">00000016</span> main
</code></pre> 
<h5><a id="1__o__360"></a><strong>1. 合并所有 .o 文件的段</strong></h5> 
<hr> 
<p><img src="https://images2.imgbox.com/92/27/wE00RHhG_o.png" alt="在这里插入图片描述"></p> 
<p>如上图所示，text段合并，data段合并，bss段合并的同时，需要将弱符号转化为强符号（或者弱符号被强符号替换），bss段大小增加</p> 
<p>并且发现链接后，生成的可执行文件的每个段都分配了内存地址（虚拟内存）</p> 
<h5><a id="2__373"></a><strong>2. 合并符号表</strong>、符号解析、重定位</h5> 
<hr> 
<p><img src="https://images2.imgbox.com/86/f3/cnGl0BzB_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>合并符号表</strong></li></ul> 
<p>​ 可以看出，可执行文件的符号表就是将多个.o文件的符号表简单的合并起来</p> 
<ul><li><strong>符号解析</strong></li></ul> 
<p>​ 将弱符号（*COM*）转化为强符号</p> 
<p>​ 在其他文件中找到本文件中未定义的符号（*UND*）</p> 
<ul><li><strong>重定位</strong></li></ul> 
<p>​ 为符号分配虚拟内存地址，符号的地址是根据段的地址加上自身的偏移计算的</p> 
<h5><a id="_396"></a>可执行文件分析</h5> 
<hr> 
<h6><a id="1__400"></a>1. 查看文件头</h6> 
<pre><code class="prism language-c">$ readelf <span class="token operator">-</span>h run
ELF 头：
  Magic：   <span class="token number">7f</span> <span class="token number">45</span> <span class="token number">4</span>c <span class="token number">46</span> <span class="token number">01</span> <span class="token number">01</span> <span class="token number">01</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> <span class="token number">00</span> 
  类别<span class="token operator">:</span>                              ELF32
  数据<span class="token operator">:</span>                              <span class="token number">2</span> 补码，小端序 <span class="token punctuation">(</span>little endian<span class="token punctuation">)</span>
  版本<span class="token operator">:</span>                              <span class="token number">1</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span>
  OS<span class="token operator">/</span>ABI<span class="token operator">:</span>                            UNIX <span class="token operator">-</span> System V
  ABI 版本<span class="token operator">:</span>                          <span class="token number">0</span>
  类型<span class="token operator">:</span>                              <span class="token function">EXEC</span> <span class="token punctuation">(</span>可执行文件<span class="token punctuation">)</span>
  系统架构<span class="token operator">:</span>                          Intel <span class="token number">80386</span>
  版本<span class="token operator">:</span>                              <span class="token number">0x1</span>
  入口点地址：               <span class="token number">0x80480a1</span>
  程序头起点：          <span class="token number">52</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>
  Start of section headers<span class="token operator">:</span>          <span class="token number">4676</span> <span class="token punctuation">(</span>bytes into file<span class="token punctuation">)</span>
  标志：             <span class="token number">0x0</span>
  本头的大小：       <span class="token number">52</span> <span class="token punctuation">(</span>字节<span class="token punctuation">)</span>
  程序头大小：       <span class="token number">32</span> <span class="token punctuation">(</span>字节<span class="token punctuation">)</span>
  Number of program headers<span class="token operator">:</span>         <span class="token number">3</span>
  节头大小：         <span class="token number">40</span> <span class="token punctuation">(</span>字节<span class="token punctuation">)</span>
  节头数量：         <span class="token number">9</span>
  字符串表索引节头： <span class="token number">8</span>
</code></pre> 
<p>入口点地址：0x80480a1。</p> 
<h6><a id="2__430"></a>2. 查看段信息</h6> 
<pre><code class="prism language-c">$ readelf <span class="token operator">-</span>S run
There are <span class="token number">9</span> section headers<span class="token punctuation">,</span> starting at offset <span class="token number">0x1244</span><span class="token operator">:</span>

节头：
  <span class="token punctuation">[</span>Nr<span class="token punctuation">]</span> Name              Type            Addr     Off    Size   ES Flg Lk Inf Al
  <span class="token punctuation">[</span> <span class="token number">0</span><span class="token punctuation">]</span>                   <span class="token constant">NULL</span>            <span class="token number">00000000</span> <span class="token number">000000</span> <span class="token number">000000</span> <span class="token number">00</span>      <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">0</span>
  <span class="token punctuation">[</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>text             PROGBITS        <span class="token number">08048094</span> <span class="token number">000094</span> <span class="token number">000051</span> <span class="token number">00</span>  AX  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
  <span class="token punctuation">[</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>eh_frame         PROGBITS        <span class="token number">080480e8</span> <span class="token number">0000e8</span> <span class="token number">00005</span>c <span class="token number">00</span>   A  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>data             PROGBITS        <span class="token number">0804</span>a000 <span class="token number">001000</span> <span class="token number">000010</span> <span class="token number">00</span>  WA  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">4</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>bss              NOBITS          <span class="token number">0804</span>a010 <span class="token number">001010</span> <span class="token number">000018</span> <span class="token number">00</span>  WA  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>comment          PROGBITS        <span class="token number">00000000</span> <span class="token number">001010</span> <span class="token number">000029</span> <span class="token number">01</span>  MS  <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
  <span class="token punctuation">[</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>symtab           SYMTAB          <span class="token number">00000000</span> <span class="token number">00103</span>c <span class="token number">000170</span> <span class="token number">10</span>      <span class="token number">7</span>  <span class="token number">14</span>  <span class="token number">4</span>
  <span class="token punctuation">[</span> <span class="token number">7</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>strtab           STRTAB          <span class="token number">00000000</span> <span class="token number">0011</span>ac <span class="token number">000059</span> <span class="token number">00</span>      <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
  <span class="token punctuation">[</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token punctuation">.</span>shstrtab         STRTAB          <span class="token number">00000000</span> <span class="token number">001205</span> <span class="token number">00003f</span> <span class="token number">00</span>      <span class="token number">0</span>   <span class="token number">0</span>  <span class="token number">1</span>
</code></pre> 
<p>每个段都分配了虚拟地址。</p> 
<h6><a id="3__program_headers_453"></a>3. 查看 program headers</h6> 
<pre><code class="prism language-c">$ readelf <span class="token operator">-</span>l run

Elf 文件类型为 <span class="token function">EXEC</span> <span class="token punctuation">(</span>可执行文件<span class="token punctuation">)</span>
Entry point <span class="token number">0x80480a1</span>
There are <span class="token number">3</span> program headers<span class="token punctuation">,</span> starting at offset <span class="token number">52</span>

程序头：
  Type           Offset   VirtAddr   PhysAddr   FileSiz MemSiz  Flg Align
  LOAD           <span class="token number">0x000000</span> <span class="token number">0x08048000</span> <span class="token number">0x08048000</span> <span class="token number">0x00144</span> <span class="token number">0x00144</span> R E <span class="token number">0x1000</span>
  LOAD           <span class="token number">0x001000</span> <span class="token number">0x0804a000</span> <span class="token number">0x0804a000</span> <span class="token number">0x00010</span> <span class="token number">0x00028</span> RW  <span class="token number">0x1000</span>
  GNU_STACK      <span class="token number">0x000000</span> <span class="token number">0x00000000</span> <span class="token number">0x00000000</span> <span class="token number">0x00000</span> <span class="token number">0x00000</span> RW  <span class="token number">0x10</span>

 Section to Segment mapping<span class="token operator">:</span>
  段节<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
   <span class="token number">00</span>     <span class="token punctuation">.</span>text <span class="token punctuation">.</span>eh_frame 
   <span class="token number">01</span>     <span class="token punctuation">.</span>data <span class="token punctuation">.</span>bss 
   <span class="token number">02</span>
</code></pre> 
<p>二进制可重定位文件只有 <strong>“section headers”</strong>，只有可执行文件里有 <strong>“program headers”</strong>，<strong>“program headers”</strong> 中显示了各个段的虚拟地址、对齐字节（一页4K)</p> 
<p><strong>按段的属性合并</strong>，只读（text+rodata)、可读可写（data+bss）等等</p> 
<p>使用 <strong>readelf -l main <strong>查看ELF的 “Segment” <font color="red"></font></strong>（供装载使用）</strong></p> 
<p><strong>PS：因为我们是自己链接的，没有链接C库，所以段里的内容比较少</strong></p> 
<p>​ * 如果直接运行 <strong>gcc main.c -o main</strong>，则会默认链接C库，查看可执行文件的每个段时就有很多内容了</p> 
<p>​ * 可执行文件是被 <strong>execve</strong> 加载到进程中的</p> 
<p>​ * 可执行文件之所以可以运行，因为其指定了入口地址（main）、program headers（指定加载的虚拟地址）</p> 
<p>​ * 描述 “Segment” 的结构叫 <strong>”程序头”</strong> ，它描述了ELF文件<strong>该如何被操作系统映射到进程的虚拟空间。</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cf6d04eeab48d9ac68f3902434035cce/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于51单片机的音乐喷泉彩灯proteus仿真原理图PCB</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/78b16eeb40fbaad7cb6db65e061dac2c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[NOIP2010 提高组] 乌龟棋</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>