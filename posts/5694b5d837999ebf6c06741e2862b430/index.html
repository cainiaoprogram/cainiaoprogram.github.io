<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C#：KeyPress事件 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C#：KeyPress事件" />
<meta property="og:description" content="C#：KeyPress事件 KeyChar键值表(常用)实操C#窗体小型项目——BMI计算器添加KeyPress事件其中，计算公式 BMI= 体重（千克）/身高（米）/身高（米） KeyChar键值表(常用) KeyPress事件过程在截取Textbox或Combox控件输入的击键时,可立即测试击键的有效性或在字符输入时对其进行格式处理。
通常可以在处理限定输入类型时使用。
常用键的ASCII编码
ASCII编码对应字符功能0NUL空字符1SOH标题开始2STX正文开始3ETX正文结束4EOT传输结束5ENQ请求6ACK收到通7BEL响铃8BS退格9HT水平制表符10LF换行键11VT垂直制表符12FF换页键13CR回车键14SO禁用切换15SI启用切换 实操C#窗体小型项目——BMI计算器 项目效果：
首先要明确一下这个BMI计算器使用的时候，输入框的值只能是数字或者小数点。明确这一点后就可以就开始进行下一步，编写代码。
首先打开视图》》工具箱》》拖曳公共控件，标签label，文本框textBox、按钮button、图片框pictureBox 如项目效果所示。
其中显示结果的两个文本框的ReadOnly属性置为true。
重要的部分是，处理输入数据，以便用户输入错误的字母或符号导致程序错误退出。
添加KeyPress事件 点击文本框控件，在属性框上方点击 事件（闪电符号），找到KeyPress事件添加 自写函数 的函数名。
在函数中添加检查输入的代码：
private void keypressed(object sender, KeyPressEventArgs e) { //数字8是退格键的ASCII码，0X2E即十进制46，是符号‘.’的ASCII编码 //Char.IsDigit(parameter)函数的功能是判断字符是否属于十进制数字类别。 if (e.KeyChar != 8 &amp;&amp; !Char.IsDigit(e.KeyChar) &amp;&amp; e.KeyChar != 0x2E) { e.Handled = true; } //当先输入的是&#39;.&#39;，可以使用退格键 if (e.KeyChar == &#39;.&#39;) { //as运算符用于将表达式显式转换为给定类型（如果其运行时类型与该类型兼容） TextBox tb = sender as TextBox; //当先输入的为符号‘.’时，文本框显示的是“0.” if (tb.Text == &#34;&#34;) { tb.Text = &#34;0.&#34;; //select(parameter1,parameter2)函数选择文本框中的文本范围 //参数1和参数2 分别表示文本的起始和结束位置。 tb." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5694b5d837999ebf6c06741e2862b430/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-15T10:57:49+08:00" />
<meta property="article:modified_time" content="2020-09-15T10:57:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C#：KeyPress事件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>C#：KeyPress事件</h4> 
 <ul><li><ul><li><a href="#KeyChar_1" rel="nofollow">KeyChar键值表(常用)</a></li><li><a href="#CBMI_25" rel="nofollow">实操C#窗体小型项目——BMI计算器</a></li><li><a href="#KeyPress_37" rel="nofollow">添加KeyPress事件</a></li><li><ul><li><ul><li><a href="#_BMI__70" rel="nofollow">其中，计算公式 BMI= 体重（千克）/身高（米）/身高（米）</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="KeyChar_1"></a>KeyChar键值表(常用)</h3> 
<p><strong>KeyPress</strong>事件过程在截取Textbox或Combox控件输入的击键时,可立即测试击键的有效性或在字符输入时对其进行格式处理。<br> 通常可以在处理限定输入类型时使用。</p> 
<p>常用键的ASCII编码</p> 
<table><thead><tr><th>ASCII编码</th><th>对应字符</th><th>功能</th></tr></thead><tbody><tr><td>0</td><td>NUL</td><td>空字符</td></tr><tr><td>1</td><td>SOH</td><td>标题开始</td></tr><tr><td>2</td><td>STX</td><td>正文开始</td></tr><tr><td>3</td><td>ETX</td><td>正文结束</td></tr><tr><td>4</td><td>EOT</td><td>传输结束</td></tr><tr><td>5</td><td>ENQ</td><td>请求</td></tr><tr><td>6</td><td>ACK</td><td>收到通</td></tr><tr><td>7</td><td>BEL</td><td>响铃</td></tr><tr><td>8</td><td>BS</td><td>退格</td></tr><tr><td>9</td><td>HT</td><td>水平制表符</td></tr><tr><td>10</td><td>LF</td><td>换行键</td></tr><tr><td>11</td><td>VT</td><td>垂直制表符</td></tr><tr><td>12</td><td>FF</td><td>换页键</td></tr><tr><td>13</td><td>CR</td><td>回车键</td></tr><tr><td>14</td><td>SO</td><td>禁用切换</td></tr><tr><td>15</td><td>SI</td><td>启用切换</td></tr></tbody></table> 
<h3><a id="CBMI_25"></a>实操C#窗体小型项目——BMI计算器</h3> 
<p>项目效果：<br> <img src="https://images2.imgbox.com/85/73/QLGg8jUl_o.gif" alt="在这里插入图片描述"></p> 
<p>首先要明确一下这个BMI计算器使用的时候，输入框的值只能是数字或者小数点。明确这一点后就可以就开始进行下一步，编写代码。</p> 
<p>首先打开视图》》工具箱》》拖曳公共控件，标签label，文本框textBox、按钮button、图片框pictureBox 如项目效果所示。</p> 
<p>其中显示结果的两个文本框的ReadOnly属性置为true。</p> 
<p>重要的部分是，处理输入数据，以便用户输入错误的字母或符号导致程序错误退出。</p> 
<h3><a id="KeyPress_37"></a>添加KeyPress事件</h3> 
<p>点击文本框控件，在属性框上方点击 事件（闪电符号），找到KeyPress事件添加 自写函数 的函数名。</p> 
<p><img src="https://images2.imgbox.com/3c/ea/Db0eC5n9_o.png" alt="在这里插入图片描述"><br> 在函数中添加检查输入的代码：</p> 
<pre><code class="prism language-cpp">        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">keypressed</span><span class="token punctuation">(</span>object sender<span class="token punctuation">,</span> KeyPressEventArgs e<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">//数字8是退格键的ASCII码，0X2E即十进制46，是符号‘.’的ASCII编码</span>
            <span class="token comment">//Char.IsDigit(parameter)函数的功能是判断字符是否属于十进制数字类别。</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>KeyChar <span class="token operator">!=</span> <span class="token number">8</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>Char<span class="token punctuation">.</span><span class="token function">IsDigit</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>KeyChar<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>KeyChar <span class="token operator">!=</span> <span class="token number">0x2E</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                e<span class="token punctuation">.</span>Handled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//当先输入的是'.'，可以使用退格键</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>KeyChar <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">)</span>   
            <span class="token punctuation">{<!-- --></span>
                <span class="token comment">//as运算符用于将表达式显式转换为给定类型（如果其运行时类型与该类型兼容）</span>
                TextBox tb <span class="token operator">=</span> sender as TextBox<span class="token punctuation">;</span>
                <span class="token comment">//当先输入的为符号‘.’时，文本框显示的是“0.”</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>tb<span class="token punctuation">.</span>Text <span class="token operator">==</span> <span class="token string">""</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    tb<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"0."</span><span class="token punctuation">;</span>
                    <span class="token comment">//select(parameter1,parameter2)函数选择文本框中的文本范围</span>
                    <span class="token comment">//参数1和参数2 分别表示文本的起始和结束位置。</span>
                    tb<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>tb<span class="token punctuation">.</span>Text<span class="token punctuation">.</span>Length<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    e<span class="token punctuation">.</span>Handled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_BMI__70"></a>其中，计算公式 BMI= 体重（千克）/身高（米）/身高（米）</h5> 
<p>所以，确定按钮的代码如下</p> 
<pre><code class="prism language-cpp">        <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">button1_Click</span><span class="token punctuation">(</span>object sender<span class="token punctuation">,</span> EventArgs e<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">double</span> a<span class="token punctuation">;</span>
            a <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>textBox2<span class="token punctuation">.</span>Text<span class="token punctuation">)</span> <span class="token operator">/</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>textBox1<span class="token punctuation">.</span>Text<span class="token punctuation">)</span> <span class="token operator">/</span> Convert<span class="token punctuation">.</span><span class="token function">ToDouble</span><span class="token punctuation">(</span>textBox1<span class="token punctuation">.</span>Text<span class="token punctuation">)</span><span class="token punctuation">;</span>
            textBox3<span class="token punctuation">.</span>Text <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">28.0</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                textBox4<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"肥胖"</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>pictureBox2<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">".\\img\\沙拉.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//相对路径，从生成的可执行文件所在处算根目录</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">18.4</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                textBox4<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"偏瘦"</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>pictureBox2<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">".\\img\\牛奶.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">18.5</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">&lt;</span> <span class="token number">23.9</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                textBox4<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"正常"</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>pictureBox2<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">".\\img\\正常.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;</span> <span class="token number">24.0</span><span class="token operator">&amp;&amp;</span> a<span class="token operator">&lt;</span> <span class="token number">27.9</span><span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                textBox4<span class="token punctuation">.</span>Text <span class="token operator">=</span> <span class="token string">"过重"</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>pictureBox2<span class="token punctuation">.</span><span class="token function">Load</span><span class="token punctuation">(</span><span class="token string">".\\img\\蔬菜.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>该项目的功能即得到实现。完整的代码工程和图片放在资源里了，有需要可以自行下载。</p> 
<p>以上。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4679ccc5e9a47ffb8aabbe160251c6f2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java中的重写实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/911e119a11f83df95bd641aa2124e11b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PowerBI x Python 之关联分析（上）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>