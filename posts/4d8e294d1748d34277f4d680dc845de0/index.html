<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ajax文件上传兼容ie7,ajaxfileUpload.js兼容ie7、8、9、10、11、firefox、chrome等浏览器的js代码... - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ajax文件上传兼容ie7,ajaxfileUpload.js兼容ie7、8、9、10、11、firefox、chrome等浏览器的js代码..." />
<meta property="og:description" content="// JavaScript Document
jQuery.extend({
createUploadIframe:function(id,uri)
{
//create frame
varframeId=&#39;jUploadFrame&#39;&#43;id;
if(window.ActiveXObject)//var io = document.createElement(&#39;&#39;);
(jQuery.browser.version==&#34;9.0&#34;||jQuery&#34;10.0&#34;){
vario=document.createElement(&#39;iframe&#39;);
io.id=frameId;
io.name;
}else&#34;6.0&#34;&#34;7.0&#34;&#34;8.0&#34;&#39;&#39;);
(typeofuri==&#39;boolean&#39;){
io.src&#39;javascript:false&#39;;
}
&#39;string&#39;=uri}
else{
);
io;
io}
io.style.position&#39;absolute&#39;.top&#39;-1000px&#39;.left;
document.body.appendChild(io);
returnio},
createUploadFormfileElementIddata//create form
varformId&#39;jUploadForm&#39;;
varfileId&#39;jUploadFile&#39;varform=jQuery&#39;
&#39;varoldElement&#39;#&#39;&#43;fileElementId); varnewElement(oldElement).clone();
jQuery).attr&#39;id&#39;fileId);
jQuery).before(newElement).appendTo(form);
//add data
(data{
forvariindata{
$&#39;
}
varrequestDone=false;
// Create the request object
varxml={};
){
jQuery&#34;ajaxSend&#34;[xml]);
}
varuploadCallback(isTimeout){
// Wait for a response to come back
.getElementById(frameIdtry.contentWindow){
xml.responseText=io.document?io.innerHTML:null;
xml.responseXMLXMLDocument:io.contentDocumentcatch(e.handleErrorxmle(xml||isTimeout&#34;timeout&#34;){
requestDonetruevarstatustry{
status=isTimeout!=&#34;timeout&#34;?&#34;success&#34;:&#34;error&#34;// Make sure that the request was successful or notmodified" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4d8e294d1748d34277f4d680dc845de0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T14:52:08+08:00" />
<meta property="article:modified_time" content="2021-08-05T14:52:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ajax文件上传兼容ie7,ajaxfileUpload.js兼容ie7、8、9、10、11、firefox、chrome等浏览器的js代码...</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>// JavaScript Document</p> 
 <p>jQuery.extend({<!-- --></p> 
 <p>createUploadIframe:function(id,uri)</p> 
 <p>{<!-- --></p> 
 <p>//create frame</p> 
 <p>varframeId='jUploadFrame'+id;</p> 
 <p>if(window.ActiveXObject)//var io = document.createElement('');</p> 
 <p>(jQuery.browser.version=="9.0"||jQuery"10.0"){<!-- --></p> 
 <p>vario=document.createElement('iframe');</p> 
 <p>io.id=frameId;</p> 
 <p>io.name;</p> 
 <p>}else"6.0""7.0""8.0"'');</p> 
 <p>(typeofuri=='boolean'){<!-- --></p> 
 <p>io.src'javascript:false';</p> 
 <p>}</p> 
 <p>'string'=uri}</p> 
 <p>else{<!-- --></p> 
 <p>);</p> 
 <p>io;</p> 
 <p>io}</p> 
 <p>io.style.position'absolute'.top'-1000px'.left;</p> 
 <p>document.body.appendChild(io);</p> 
 <p>returnio},</p> 
 <p>createUploadFormfileElementIddata//create form</p> 
 <p>varformId'jUploadForm';</p> 
 <p>varfileId'jUploadFile'varform=jQuery'</p>'varoldElement'#'+fileElementId); 
 <p>varnewElement(oldElement).clone();</p> 
 <p>jQuery).attr'id'fileId);</p> 
 <p>jQuery).before(newElement).appendTo(form);</p> 
 <p>//add data</p> 
 <p>(data{<!-- --></p> 
 <p>forvariindata{<!-- --></p> 
 <p>$'</p> 
 <p>}</p> 
 <p>varrequestDone=false;</p> 
 <p>// Create the request object</p> 
 <p>varxml={};</p> 
 <p>){<!-- --></p> 
 <p>jQuery"ajaxSend"[xml]);</p> 
 <p>}</p> 
 <p>varuploadCallback(isTimeout){<!-- --></p> 
 <p>// Wait for a response to come back</p> 
 <p>.getElementById(frameIdtry.contentWindow){<!-- --></p> 
 <p>xml.responseText=io.document?io.innerHTML:null;</p> 
 <p>xml.responseXMLXMLDocument:io.contentDocumentcatch(e.handleErrorxmle(xml||isTimeout"timeout"){<!-- --></p> 
 <p>requestDonetruevarstatustry{<!-- --></p> 
 <p>status=isTimeout!="timeout"?"success":"error"// Make sure that the request was successful or notmodified</p> 
 <p>(status"error"// process the data (runs the xml through httpData regardless of callback)</p> 
 <p>vardata.uploadHttpData(xml.dataType.success// ifa local callback was specified,fire it and pass it the data</p> 
 <p>s.success(datastatus};</p> 
 <p>// Fire the global callback</p> 
 <p>jQuery"ajaxSuccess"};</p> 
 <p>}else{<!-- --></p> 
 <p>jQuerystatus}</p> 
 <p>){<!-- --></p> 
 <p>status;</p> 
 <p>jQuery// The request was completed</p> 
 <p>jQuery"ajaxComplete"};</p> 
 <p>// Handle the global AJAX counter</p> 
 <p>!--jQuery"ajaxStop"};</p> 
 <p>.complete){<!-- --></p> 
 <p>s(xml};</p> 
 <p>jQuery).unbind();</p> 
 <p>setTimeout(){<!-- --></p> 
 <p>).remove();</p> 
 <p>}},100);</p> 
 <p>xml};</p> 
 <p>// Timeout checker</p> 
 <p>.timeout&gt;0){<!-- --></p> 
 <p>setTimeout(){(!requestDone){uploadCallback);}},0)"&gt;.timeout+formId'action'.url'method''POST''target'frameId.encoding){<!-- --></p> 
 <p>form.encoding'multipart/form-data'{<!-- --></p> 
 <p>form.enctype}</p> 
 <p>jQuery).submit();</p> 
 <p>){<!-- --></p> 
 <p>jQuery/*if(window.attachEvent){<!-- --></p> 
 <p>document.getElementById(frameId).attachEvent('onload',uploadCallback);</p> 
 <p>}</p> 
 <p>else{<!-- --></p> 
 <p>document.getElementById(frameId).addEventListener('load',uploadCallback,false);</p> 
 <p>} */</p> 
 <p>jQuery+frameId).load(uploadCallbackreturn{abortfunction(){}};</p> 
 <p>uploadHttpData(rtype!type;</p> 
 <p>data=type"xml"||data?r:r.responseText// ifthe type is "script",eval it in global context</p> 
 <p>(type"script".globalEval(data}</p> 
 <p>// Get the JavaScript object,ifJSON is used.</p> 
 <p>"json"){<!-- --></p> 
 <p>data=r;</p> 
 <p>varstart=data.indexOf"&gt;"(start!=-1varend"</p> 
 <p>data.substringendeval"data = "// evaluate scripts within html</p> 
 <p>"html""</p> 
 <div>
   ").html).evalScripts(); 
  <p>}</p> 
  <p>returndata/*handleError: function( s,xml,status,e ) {<!-- --></p> 
  <p>// If a local callback was specified,fire it</p> 
  <p>if ( s.error )</p> 
  <p>s.error( xml,e );</p> 
  <p>// Fire the global callback</p> 
  <p>if ( s.global )</p> 
  <p>jQuery.event.trigger( "ajaxError",[xml,s,e] );</p> 
  <p>}*/</p> 
  <p>handleErrorxhre// If a local callback was specified,fire it</p> 
  <p>if.error{<!-- --></p> 
  <p>s.error.call.context||s// Fire the global callback</p> 
  <p>{<!-- --></p> 
  <p>?jQuery.context:jQuery).trigger"ajaxError"[xhr}</p> 
  <p>});</p> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fd78d68a29f8b37547d94612f64b5635/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">asp.net ajax 调用后台方法,Asp.net中用 AJAX调用后台静态的方法总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/94e1d20f84794804af0edafcd025241d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">三国群英传服务器端架设修改,三国群英传OL单机架设视频教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>