<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>minio分布式集群同步Windows - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="minio分布式集群同步Windows" />
<meta property="og:description" content="/** 启动命令 */ set MINIO_ROOT_USER=admin set MINIO_ROOT_PASSWORD=admin123 minio.exe server --console-address &#34;:9001&#34; --address &#34;:9091&#34; D:/minIOData /* 启动命令说明 */ 本示例, 两台主机111和222都执行了以上命令,
先将CMD命令行目录前换到minio.exe同目录下
set MINIO_ROOT_USER=admin // 设置控制台管理账号 , 各集群账号密码需要一致
set MINIO_ROOT_PASSWORD=admin123 // 设置控制台管理密码
minio.exe server --console-address “:9001” --address “:9091” // 9001为控制台访问端口, 9091为接口访问端口
D:/minIOData // 本地单节点保存
// 下面的将单节点换成多节点示例, 只能是本机或者局域网, 不可是公网地址或域名 !!! , 多节点每台服务器都要执行一次启动命令 http://192.168.1.12:9091/C:/minIOData ^ // 本机存储目录
http://192.168.1.12:9091/D:/minIOData ^ // 本机存储目录2
http://192.168.1.13:9091/C:/minIOData ^ // 局域网集群ip:端口/存储目录
http://192.168.1.13:9091/D:/minIOData // ^ 为 Windows的cmd命令行的 换行符
/** 集群同步备份1:控制台备份,其中一个删了重来则会出问题,推荐使用下面的方法2 */ 浏览器打开控制台页, 端口为上方配置的–console-address" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/836d209031c7752ab267dd815e5a8f18/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-22T17:30:27+08:00" />
<meta property="article:modified_time" content="2022-09-22T17:30:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">minio分布式集群同步Windows</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="___0"></a>/** 启动命令 */</h2> 
<pre><code class="prism language-bash"><span class="token builtin class-name">set</span> <span class="token assign-left variable">MINIO_ROOT_USER</span><span class="token operator">=</span>admin
<span class="token builtin class-name">set</span> <span class="token assign-left variable">MINIO_ROOT_PASSWORD</span><span class="token operator">=</span>admin123
minio.exe server --console-address <span class="token string">":9001"</span> --address <span class="token string">":9091"</span> D:/minIOData 
</code></pre> 
<h3><a id="___8"></a>/* 启动命令说明 */</h3> 
<p>本示例, 两台主机111和222都执行了以上命令,<br> 先将CMD命令行目录前换到minio.exe同目录下<br> set MINIO_ROOT_USER=admin // 设置控制台管理账号 , 各集群账号密码需要一致<br> set MINIO_ROOT_PASSWORD=admin123 // 设置控制台管理密码<br> minio.exe server --console-address “:9001” --address “:9091” // 9001为控制台访问端口, 9091为接口访问端口<br> D:/minIOData // 本地单节点保存</p> 
<h5><a id="_______15"></a>// 下面的将单节点换成多节点示例, <strong>只能是本机或者局域网, 不可是公网地址或域名</strong> !!! , 多节点每台服务器都要执行一次启动命令</h5> 
<p>http://192.168.1.12:9091/C:/minIOData ^ // 本机存储目录<br> http://192.168.1.12:9091/D:/minIOData ^ // 本机存储目录2<br> http://192.168.1.13:9091/C:/minIOData ^ // 局域网集群ip:端口/存储目录<br> http://192.168.1.13:9091/D:/minIOData // ^ 为 Windows的cmd命令行的 换行符</p> 
<h2><a id="_12__22"></a>/** 集群同步备份1:控制台备份,其中一个删了重来则会出问题,推荐使用下面的方法2 */</h2> 
<p>浏览器打开控制台页, 端口为上方配置的–console-address<br> 如上配置的话,本次打开地址为 http://127.0.0.1:9001<br> 登录账号密码为上述配置的 MINIO_ROOT_USER和MINIO_ROOT_PASSWORD // 如本示例 admin/admin123<br> 点击左侧菜单:Site Replication -&gt; 右侧链接:Add a Replication Site<br> Access Key 填入 MINIO_ROOT_USER 如本示例: admin<br> Secret Key 填入 MINIO_ROOT_PASSWORD 如本示例: admin123<br> Peer Sites 填需要互相备份的minio服务器, 最少2台, 包含本机<br> 如本示例 : Site Name 填自定名称, Endpoint 填minio服务器的外网IP+接口端口号<br> Site Name : 移动111主机 Endpoint : http://111.111.111.111:9091 // 本机外网<br> Site Name : 电信222主机 Endpoint : http://222.222.222.222:9091 // 外网备机<br> 保存后, 外网备机电信222主机会同步本机配置</p> 
<h2><a id="_2minio___35"></a>/** 集群同步备份2:用minio客户端同步, 将对方数据同步到本地 */</h2> 
<p>客户端程序为mc.exe<br> 客户端需要先保存各服务器(别名)配置<br> 先将CMD命令行目录前换到minio.exe同目录下<br> 如本示例 : mc.exe alias set 别名 公网服务器:API端口 MINIO_ROOT_USER MINIO_ROOT_PASSWORD</p> 
<pre><code class="prism language-bash">mc.exe <span class="token builtin class-name">alias</span> <span class="token builtin class-name">set</span> minio_111 http://111.111.111.111:9091 admin admin123 // 本机外网配置
mc.exe <span class="token builtin class-name">alias</span> <span class="token builtin class-name">set</span> minio_222 http://222.222.222.222:9091 admin admin123 // 外网备机
</code></pre> 
<p>执行命令同步备份命令, 注意执行前会先删除本地节点数据<br> 如本示例 : mc.exe mirror --remove --overwrite --watch 对方服务器别名 我方服务器别名</p> 
<pre><code class="prism language-bash">mc.exe mirror --remove --overwrite --watch  minio_222  minio_111 // 本机执行
</code></pre> 
<pre><code class="prism language-bash">mc.exe mirror --remove --overwrite --watch  minio_111  minio_222 // 外网备机
</code></pre> 
<h2><a id="___58"></a>/** 文件访问(默认情况无法直接访问) */</h2> 
<p>先初始化一个桶 : 访问控制台,本次打开地址为http://127.0.0.1:9001<br> 点击左侧菜单Buckets -&gt; 右侧Create Bucket -&gt; Bucket Name 填:test(给桶随意起名字) -&gt; Create Bucket<br> 刷新页面, 再次点击左侧菜单Buckets即可看到名为test的桶 -&gt; 点击桶的右上方Manage -&gt; 下方Access Rules -&gt; 右上方Add Access Rule. Prefix输入:* ,Access选readwrite(读写权限)<br> 此时向test桶里上传的文件, 可以靠拼URL访问<br> 如本示例 : api接口地址/桶名称/图片名<br> http://127.0.0.1:9091/test/某某某图片.jpg</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9fc7273c0db8104d256d68b7691b4246/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac M1 安装gitlab——访问本地端口失败</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/94cdb0b6f7e97e5cb68ce0ca2be7cf4a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mybatis子查询</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>