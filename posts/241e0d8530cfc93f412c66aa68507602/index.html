<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>oracle 数据库关闭的的几种方式总结 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="oracle 数据库关闭的的几种方式总结" />
<meta property="og:description" content=" shutdown的几种方式,shutdown abort的一些弊端有哪些 1、shutdown normal 正常方式关闭数据库。 2、shutdown immediate 立即方式关闭数据库。 在SVRMGRL中执行shutdown immediate，数据库并不立即关闭， 而是在Oracle执行某些清除工作后才关闭（终止会话、释放会话资源）， 当使用shutdown不能关闭数据库时，shutdown immediate可以完成数据库关闭的操作。 3、shutdown abort 直接关闭数据库，正在访问数据库的会话会被突然终止， 如果数据库中有大量操作正在执行，这时执行shutdown abort后，重新启动数据库需要很长时间 -------------------------------------------------------- shutdown abort 的时候，跟kill 进程是一样的效果 数据库立即关闭，这个时候文件状态可能不一致 因为正常关闭数据库会同步校验各文件，使得重新启动的时候文件时间点一致并且不用进行崩溃恢复 若检查点信息一致，则做崩溃恢复 若检查点信息不一致（正好在更新文件头）则需要做介质恢复 这些问题都好处理，最怕的问题是这个时候系统有大量IO，结果这样造成写的突然中断，碰巧造成文件块的逻辑坏块，那麻烦比较大一些，尤其是系统表空间的block损坏 虽然shutdown abort 出错的几率很小，1000个人可能只有一个人碰到，但是我们还是要小心。 正确的处理流程是，shutdown immediate ,若数据库迟迟不能down下来，在os上观察IO状况，几乎没有io的时候，另开一窗口shutdown abort ，几乎不会出问题了 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/241e0d8530cfc93f412c66aa68507602/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-10-24T10:30:30+08:00" />
<meta property="article:modified_time" content="2014-10-24T10:30:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">oracle 数据库关闭的的几种方式总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  shutdown的几种方式,shutdown abort的一些弊端有哪些 
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  1、shutdown normal   
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
     正常方式关闭数据库。  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  2、shutdown immediate   
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
     立即方式关闭数据库。   
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
     在SVRMGRL中执行shutdown immediate，数据库并不立即关闭，   
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
     而是在Oracle执行某些清除工作后才关闭（终止会话、释放会话资源），   
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
     当使用shutdown不能关闭数据库时，shutdown immediate可以完成数据库关闭的操作。  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  3、shutdown abort   
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
     直接关闭数据库，正在访问数据库的会话会被突然终止，   
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
     如果数据库中有大量操作正在执行，这时执行shutdown abort后，重新启动数据库需要很长时间  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  --------------------------------------------------------  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  shutdown abort 的时候，跟kill 进程是一样的效果  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  数据库立即关闭，这个时候文件状态可能不一致  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  因为正常关闭数据库会同步校验各文件，使得重新启动的时候文件时间点一致并且不用进行崩溃恢复 
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  若检查点信息一致，则做崩溃恢复  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  若检查点信息不一致（正好在更新文件头）则需要做介质恢复 
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  这些问题都好处理，最怕的问题是这个时候系统有大量IO，结果这样造成写的突然中断，碰巧造成文件块的逻辑坏块，那麻烦比较大一些，尤其是系统表空间的block损坏 
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  虽然shutdown abort 出错的几率很小，1000个人可能只有一个人碰到，但是我们还是要小心。  
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
    
</div> 
<div style="border-width:0px; padding:0px; margin:0px; list-style:none; color:rgb(51,51,51); font-family:宋体; font-size:14px; line-height:28px">
  正确的处理流程是，shutdown immediate ,若数据库迟迟不能down下来，在os上观察IO状况，几乎没有io的时候，另开一窗口shutdown  abort ，几乎不会出问题了 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f590d9126ed65cf75dda5957b3970a3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">系统级性能分析工具 — Perf</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d3415ca4abebd68d8b64c9472994e877/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">《重说中国近代史》</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>