<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot集成nacos配置管理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot集成nacos配置管理" />
<meta property="og:description" content="官方文档：Nacos Spring Boot 快速开始
个人实践：
Namespace用来区分环境，例如：开发环境、测试环境、生产环境。
Group用来区分不同的应用。
DataId用来区分配置，例如：mysql配置，redis配置，kafka配置。
0、前提：已安装启动nacos。 去控制台创建新的命名空间：
在develop命名空间下，创建新的配置：dataId=mysql，group=yzh-maven
1、引入jar包 &lt;!-- https://mvnrepository.com/artifact/com.alibaba.boot/nacos-config-spring-boot-starter --&gt; &lt;dependency&gt; &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt; &lt;artifactId&gt;nacos-config-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;0.2.12&lt;/version&gt; &lt;/dependency&gt; 注意：版本 0.2.x.RELEASE 对应的是 Spring Boot 2.x 版本，版本 0.1.x.RELEASE 对应的是 Spring Boot 1.x 版本。 2、application.properties配置 ## nacos配置 # 开启配置预加载功能 nacos.config.bootstrap.enable=true nacos.config.server-addr=127.0.0.1:8848 nacos.config.namespace=56705fdc-7fb8-45bc-80aa-f79c7d94baa5 nacos.config.group=yzh-maven #nacos.config.data-id=mysql nacos.config.data-ids=mysql,redis # 配置文件类型 nacos.config.type=properties # 开启自动刷新 nacos.config.auto-refresh=true 官方配置说明：spring boot 0.2.2 以及 0.1.2版本新功能使用手册 · nacos-group/nacos-spring-boot-project Wiki · GitHub
3、代码使用 @RestController @RequestMapping(&#34;/nacos&#34;) @Slf4j public class NacosController { /** * 自动刷新 */ @NacosValue(value = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/24d5f0c501ca4e30f760bbe2fb5363a2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-11T18:26:11+08:00" />
<meta property="article:modified_time" content="2023-05-11T18:26:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot集成nacos配置管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>官方文档：<a href="https://nacos.io/zh-cn/docs/quick-start-spring-boot.html" rel="nofollow" title="Nacos Spring Boot 快速开始">Nacos Spring Boot 快速开始</a></p> 
<p>个人实践：</p> 
<p>Namespace用来区分环境，例如：开发环境、测试环境、生产环境。</p> 
<p>Group用来区分不同的应用。</p> 
<p>DataId用来区分配置，例如：mysql配置，redis配置，kafka配置。</p> 
<h2>0、前提：已安装启动nacos。</h2> 
<p>去控制台创建新的命名空间：</p> 
<p><img alt="" height="330" src="https://images2.imgbox.com/c0/5e/CVOOgsNa_o.png" width="1200"></p> 
<p><img alt="" height="299" src="https://images2.imgbox.com/60/6e/ss7vbwBZ_o.png" width="954"></p> 
<p>在develop命名空间下，创建新的配置：dataId=mysql，group=yzh-maven</p> 
<p><img alt="" height="506" src="https://images2.imgbox.com/06/b1/1pMvBRfE_o.png" width="762"></p> 
<p> <img alt="" height="448" src="https://images2.imgbox.com/86/98/X8v4K6P6_o.png" width="543"></p> 
<h2>1、引入jar包</h2> 
<pre><code>        &lt;!-- https://mvnrepository.com/artifact/com.alibaba.boot/nacos-config-spring-boot-starter --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.alibaba.boot&lt;/groupId&gt;
            &lt;artifactId&gt;nacos-config-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;0.2.12&lt;/version&gt;
        &lt;/dependency&gt;</code></pre> 
<p>注意：版本 0.2.x.RELEASE 对应的是 Spring Boot 2.x 版本，版本 0.1.x.RELEASE 对应的是 Spring Boot 1.x 版本。 </p> 
<h2>2、application.properties配置</h2> 
<pre><code class="language-java">## nacos配置
# 开启配置预加载功能
nacos.config.bootstrap.enable=true
nacos.config.server-addr=127.0.0.1:8848
nacos.config.namespace=56705fdc-7fb8-45bc-80aa-f79c7d94baa5
nacos.config.group=yzh-maven
#nacos.config.data-id=mysql
nacos.config.data-ids=mysql,redis
# 配置文件类型
nacos.config.type=properties
# 开启自动刷新
nacos.config.auto-refresh=true</code></pre> 
<p>官方配置说明：<a href="https://github.com/nacos-group/nacos-spring-boot-project/wiki/spring-boot-0.2.2-%E4%BB%A5%E5%8F%8A-0.1.2%E7%89%88%E6%9C%AC%E6%96%B0%E5%8A%9F%E8%83%BD%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C" title="spring boot 0.2.2 以及 0.1.2版本新功能使用手册 · nacos-group/nacos-spring-boot-project Wiki · GitHub">spring boot 0.2.2 以及 0.1.2版本新功能使用手册 · nacos-group/nacos-spring-boot-project Wiki · GitHub</a></p> 
<h2>3、代码使用</h2> 
<pre><code class="language-java">@RestController
@RequestMapping("/nacos")
@Slf4j
public class NacosController {

    /**
     * 自动刷新
     */
    @NacosValue(value = "${name}", autoRefreshed = true)
    private String name;

    /**
     * 不会自动刷新
     */
    @Value(value = "${password}")
    private String password;

    @GetMapping("/get")
    public String get() {
        log.info("name={}, password={}", name, password);
        return "name=" + name + ", password=" + password;
    }

}</code></pre> 
<h2>4、浏览器请求</h2> 
<pre><code class="language-java">http://localhost:8180/nacos/get
name=admin, password=123

修改配置后重新请求（name值更新了，password值未更新）：
name=admin22, password=123</code></pre> 
<h2>Open API</h2> 
<p><a href="https://nacos.io/zh-cn/docs/open-api.html" rel="nofollow" title="Open API 指南">Open API 指南</a></p> 
<p>例：发布配置，post请求，</p> 
<pre><code>curl -X POST "http://127.0.0.1:8848/nacos/v1/cs/configs?tenant=56705fdc-7fb8-45bc-80aa-f79c7d94baa5&amp;dataId=mysql&amp;group=yzh-maven&amp;content=name=admin2"</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/22849eb9c593b3f9a5ec13853e140a83/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Chrome浏览器更新字体看不清的最终解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/20178e3988af97a8dd8681a5ac99169f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java获取用户ip地址</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>