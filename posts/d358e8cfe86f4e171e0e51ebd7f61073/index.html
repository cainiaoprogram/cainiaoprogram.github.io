<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【MySQL基本功系列】第一篇 先熟悉MySQL的运行逻辑 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【MySQL基本功系列】第一篇 先熟悉MySQL的运行逻辑" />
<meta property="og:description" content="​
我将推出一系列关于MySQL的博客文章，涵盖了从入门到深入底层的原理。这些文章将包括MySQL的运行逻辑、InnoDB存储引擎、SQL优化、undo log、bin log等多个方面的知识。希望这些文章能为你提供宝贵的信息和洞见，并帮助你更好地理解和应用MySQL。同时，非常欢迎各位读者提供反馈和建议，让我们一起共同进步。
在我们深入研究MySQL的底层原理之前，建议先对MySQL的运行逻辑和各核心组件之间的关系有一定的了解。在这篇博文中，我将为你简要介绍MySQL的运行逻辑和相关核心组件，这将有助于更好地理解MySQL的工作方式。
MySQL是一款强大的开源关系型数据库管理系统，采用了客户端-服务器架构，为应用程序提供了数据存储和检索等关键功能。通过理解MySQL的基本运行机制，我们可以更轻松地探索其更深层的技术细节。
MySQL的运行逻辑 让我们首先熟悉一下用户请求从发送到MySQL最终将数据写入磁盘的整个过程。这个过程涉及多个关键步骤，我将跟随以下流程图，逐一解释每一步骤。
简单描述一下流程图中每个部件的作用：
用户请求： 用户请求访问SQL查询、插入、更新或删除等操作。
连接池： 当我们需要与数据库交互时，首要任务是通过MySQL驱动与数据库建立网络连接。只有在成功建立连接之后，我们的应用程序才能执行增删改查等SQL操作。
然而，一个系统绝不仅仅只跟数据库创建一个连接，因为我们多线程处理的时候，如果仅有一个连接的话，各线程都要去抢夺一个连接去访问数据库，这样的多线程是没有意义的。
Tomcat中的多线程应用程序在每次需要访问数据库时，如果都是通过创建一个数据库连接、执行SQL语句，然后销毁连接，下一次再重新建立数据库连接，那肯定是效率很低下的。
所以，这个时候就可以引入了数据库连接池的概念，连接池在内部维护了一定数量的数据库连接，当线程需要连接数据库时，它可以直接从连接池中获取一个可用的连接，而不是每次都重新创建一个。使用完连接后，线程不需要销毁它，只需将连接返回到连接池中，以供其他线程继续使用。这种方式避免了频繁的连接创建和销毁过程，大大提高了效率。
常用的连接池有DBCP，C3P0，Druid等。
MySQL线程池： MySQL服务器中维护了一个线程池，当一个客户端应用程序尝试连接到MySQL服务器时，MySQL服务器会接受这个连接请求。它会为每个连接分配一个线程来处理客户端的请求。这些线程在执行期间会处理SQL查询、更新、事务等操作。
SQL接口： MySQL内部首先提供了一个组件，就是SQL接口（SQL Interface），他是一套执行SQL语句的接口，当MySQL的线程从网络连接中读取出来一个SQL语句之后，就会转交给SQL接口去执行。
SQL解析器： MySQL的SQL解析器就是按照既定的SQL语法，对这个SQL按照SQL语法规则编写的SQL语句进行解析，然后理解这个SQL语句要干什么事情。如果SQL存在语法错误，解析器将生成错误消息。
查询优化器： 一旦确定了执行计划，查询优化器会评估不同的执行计划，选择最有效的执行方式。这可能涉及到索引的选择、连接操作的排序和过滤条件的应用，以最大程度地提高查询性能。
执行器： 查询优化器确定了执行计划后，将执行计划传递给执行器。执行器负责执行查询，检索或修改数据，并将结果返回给应用程序线程。
存储引擎： MySQL支持多种存储引擎，如InnoDB、MyISAM等(目前一般都用InnoDB，我们后续的博文，也仅对InnoDB进行讲解)。存储引擎负责实际的数据存储和检索。它们处理数据的读写操作，可以将数据存储在内存或磁盘上，具体取决于存储引擎的类型和配置。
数据的写入： 存储引擎可以将数据写入内存缓冲区，然后定期将数据刷新到磁盘。这确保了数据的持久性，即使发生系统崩溃，数据也不会丢失。
END 以上就是MySQL运行逻辑以及步骤，接下来，我将针对InnoDB存储引擎做一系列的更深入的介绍。
​" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d358e8cfe86f4e171e0e51ebd7f61073/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-06T19:25:40+08:00" />
<meta property="article:modified_time" content="2023-11-06T19:25:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【MySQL基本功系列】第一篇 先熟悉MySQL的运行逻辑</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>​<br> 我将推出一系列关于MySQL的博客文章，涵盖了从入门到深入底层的原理。这些文章将包括MySQL的运行逻辑、InnoDB存储引擎、SQL优化、undo log、bin log等多个方面的知识。希望这些文章能为你提供宝贵的信息和洞见，并帮助你更好地理解和应用MySQL。同时，非常欢迎各位读者提供反馈和建议，让我们一起共同进步。</p> 
<p>在我们深入研究MySQL的底层原理之前，建议先对MySQL的运行逻辑和各核心组件之间的关系有一定的了解。在这篇博文中，我将为你简要介绍MySQL的运行逻辑和相关核心组件，这将有助于更好地理解MySQL的工作方式。</p> 
<p>MySQL是一款强大的开源关系型数据库管理系统，采用了客户端-服务器架构，为应用程序提供了数据存储和检索等关键功能。通过理解MySQL的基本运行机制，我们可以更轻松地探索其更深层的技术细节。</p> 
<h4><a id="MySQL_7"></a>MySQL的运行逻辑</h4> 
<p>让我们首先熟悉一下用户请求从发送到MySQL最终将数据写入磁盘的整个过程。这个过程涉及多个关键步骤，我将跟随以下流程图，逐一解释每一步骤。</p> 
<p><img src="https://images2.imgbox.com/e5/1e/wacMOqzN_o.png" alt="在这里插入图片描述"></p> 
<p>简单描述一下流程图中每个部件的作用：</p> 
<h5><a id="_15"></a>用户请求：</h5> 
<p>用户请求访问SQL查询、插入、更新或删除等操作。</p> 
<h5><a id="_18"></a>连接池：</h5> 
<p>当我们需要与数据库交互时，首要任务是通过MySQL驱动与数据库建立网络连接。只有在成功建立连接之后，我们的应用程序才能执行增删改查等SQL操作。</p> 
<p>然而，一个系统绝不仅仅只跟数据库创建一个连接，因为我们多线程处理的时候，如果仅有一个连接的话，各线程都要去抢夺一个连接去访问数据库，这样的多线程是没有意义的。</p> 
<p>Tomcat中的多线程应用程序在每次需要访问数据库时，如果都是通过创建一个数据库连接、执行SQL语句，然后销毁连接，下一次再重新建立数据库连接，那肯定是效率很低下的。</p> 
<p>所以，这个时候就可以引入了数据库连接池的概念，连接池在内部维护了一定数量的数据库连接，当线程需要连接数据库时，它可以直接从连接池中获取一个可用的连接，而不是每次都重新创建一个。使用完连接后，线程不需要销毁它，只需将连接返回到连接池中，以供其他线程继续使用。这种方式避免了频繁的连接创建和销毁过程，大大提高了效率。</p> 
<p>常用的连接池有DBCP，C3P0，Druid等。</p> 
<h5><a id="MySQL_29"></a>MySQL线程池：</h5> 
<p>MySQL服务器中维护了一个线程池，当一个客户端应用程序尝试连接到MySQL服务器时，MySQL服务器会接受这个连接请求。它会为每个连接分配一个线程来处理客户端的请求。这些线程在执行期间会处理SQL查询、更新、事务等操作。</p> 
<h5><a id="SQL_32"></a>SQL接口：</h5> 
<p>MySQL内部首先提供了一个组件，就是SQL接口（SQL Interface），他是一套执行SQL语句的接口，当MySQL的线程从网络连接中读取出来一个SQL语句之后，就会转交给SQL接口去执行。</p> 
<h5><a id="SQL_35"></a>SQL解析器：</h5> 
<p>MySQL的SQL解析器就是按照既定的SQL语法，对这个SQL按照SQL语法规则编写的SQL语句进行解析，然后理解这个SQL语句要干什么事情。如果SQL存在语法错误，解析器将生成错误消息。</p> 
<h5><a id="_38"></a>查询优化器：</h5> 
<p>一旦确定了执行计划，查询优化器会评估不同的执行计划，选择最有效的执行方式。这可能涉及到索引的选择、连接操作的排序和过滤条件的应用，以最大程度地提高查询性能。</p> 
<h5><a id="_41"></a>执行器：</h5> 
<p>查询优化器确定了执行计划后，将执行计划传递给执行器。执行器负责执行查询，检索或修改数据，并将结果返回给应用程序线程。</p> 
<h5><a id="_44"></a>存储引擎：</h5> 
<p>MySQL支持多种存储引擎，如InnoDB、MyISAM等(目前一般都用InnoDB，我们后续的博文，也仅对InnoDB进行讲解)。存储引擎负责实际的数据存储和检索。它们处理数据的读写操作，可以将数据存储在内存或磁盘上，具体取决于存储引擎的类型和配置。</p> 
<h5><a id="_47"></a>数据的写入：</h5> 
<p>存储引擎可以将数据写入内存缓冲区，然后定期将数据刷新到磁盘。这确保了数据的持久性，即使发生系统崩溃，数据也不会丢失。</p> 
<h4><a id="END_50"></a>END</h4> 
<p>以上就是MySQL运行逻辑以及步骤，接下来，我将针对InnoDB存储引擎做一系列的更深入的介绍。</p> 
<p>​</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1795a6d982179a0123d024a3b433ed7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【mmcv报错】ModuleNotFoundError: No module named ‘mmcv.runner</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d841ee9da826a3f6f30726e5dbbd9b05/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">哨兵（Sentinel-1、2）数据下载</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>