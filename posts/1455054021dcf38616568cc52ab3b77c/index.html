<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT上位机开发（动态添加控件） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT上位机开发（动态添加控件）" />
<meta property="og:description" content="【 声明：版权所有，欢迎转载，请勿用于商业用途。 联系信箱：feixiaoxing @163.com】
开发界面的时候，大多数情况下，我们都是推荐优先使用designer来进行界面开发。但凡事总有例外，如果控件本身数量未定的时候，比如绘制某一个芯片的引脚，这个时候最好采用动态添加控件的方法来解决。当然，实际开发中，不管是用designer，还是用硬编码，最好都要学习下，因为我们不知道客户的需求是什么，所以不得不做两手准备。
前面我们说过，基本上所有的界面都是按照grid，或者vertical、horizontal这种layout布局来进行控件增减的，只要掌握了这个思路，界面的绘制就问题不大了。今天，我们针对同一个需求，采用了三种不同的方法来实现，大家可以简单对比下。
1、创建一个widget工程 为了测试，先用qt widget wizard创建一个简单的基本工程。
2、用designer进行界面开发 开发的内容不复杂，就是三行、六个控件。第一行是一个label、一个text，label上是ID。第二行是一个label、一个text，label上是Name。第三行是两个按钮，一个写着OK，一个写着Cancel。这部分，如果用designer来做，就是这样的，直接拖动对应的控件到windows桌面即可，
3、利用grid进行布局 如果不用designer来做，那么可以用grid来实现。用grid的话，就相当于是一个三行两列的矩阵。0行0列放label ID、0行1列放text、1行0列放Name，依次类推，等到所有的控件都放满了，界面也就布局结束了。
#include &lt;QApplication&gt; #include &lt;QWidget&gt; #include &lt;QLabel&gt; #include &lt;QLineEdit&gt; #include &lt;QPushButton&gt; #include &lt;QGridLayout&gt; int main(int argc, char *argv[]) { QApplication app(argc, argv); // 创建主窗口 QWidget window; window.setWindowTitle(&#34;MainWindow&#34;); window.resize(600, 450); // 创建控件 QLabel *idLabel = new QLabel(&#34;ID:&#34;); QLineEdit *idText = new QLineEdit(); QLabel *nameLabel = new QLabel(&#34;Name:&#34;); QLineEdit *nameText = new QLineEdit(); QPushButton *okButton = new QPushButton(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1455054021dcf38616568cc52ab3b77c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T07:55:12+08:00" />
<meta property="article:modified_time" content="2024-01-10T07:55:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT上位机开发（动态添加控件）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>【 声明：版权所有，欢迎转载，请勿用于商业用途。 联系信箱：feixiaoxing @163.com】</p> 
<p></p> 
<p>        开发界面的时候，大多数情况下，我们都是推荐优先使用designer来进行界面开发。但凡事总有例外，如果控件本身数量未定的时候，比如绘制某一个芯片的引脚，这个时候最好采用动态添加控件的方法来解决。当然，实际开发中，不管是用designer，还是用硬编码，最好都要学习下，因为我们不知道客户的需求是什么，所以不得不做两手准备。</p> 
<p>        前面我们说过，基本上所有的界面都是按照grid，或者vertical、horizontal这种layout布局来进行控件增减的，只要掌握了这个思路，界面的绘制就问题不大了。今天，我们针对同一个需求，采用了三种不同的方法来实现，大家可以简单对比下。</p> 
<p></p> 
<h2><span style="color:#4da8ee;">1、创建一个widget工程</span></h2> 
<p>        为了测试，先用qt widget wizard创建一个简单的基本工程。</p> 
<p></p> 
<h2><span style="color:#4da8ee;">2、用designer进行界面开发</span></h2> 
<p>        开发的内容不复杂，就是三行、六个控件。第一行是一个label、一个text，label上是ID。第二行是一个label、一个text，label上是Name。第三行是两个按钮，一个写着OK，一个写着Cancel。这部分，如果用designer来做，就是这样的，直接拖动对应的控件到windows桌面即可，</p> 
<p class="img-center"><img alt="" height="467" src="https://images2.imgbox.com/17/84/zCBaW5IF_o.png" width="648"></p> 
<p></p> 
<h2><span style="color:#4da8ee;">3、利用grid进行布局</span></h2> 
<p>        如果不用designer来做，那么可以用grid来实现。用grid的话，就相当于是一个三行两列的矩阵。0行0列放label ID、0行1列放text、1行0列放Name，依次类推，等到所有的控件都放满了，界面也就布局结束了。</p> 
<pre><code class="hljs">#include &lt;QApplication&gt;
#include &lt;QWidget&gt;
#include &lt;QLabel&gt;
#include &lt;QLineEdit&gt;
#include &lt;QPushButton&gt;
#include &lt;QGridLayout&gt;

int main(int argc, char *argv[]) {
	QApplication app(argc, argv);

	// 创建主窗口
	QWidget window;
	window.setWindowTitle("MainWindow");
	window.resize(600, 450);

	// 创建控件
	QLabel *idLabel = new QLabel("ID:");
	QLineEdit *idText = new QLineEdit();

	QLabel *nameLabel = new QLabel("Name:");
	QLineEdit *nameText = new QLineEdit();

	QPushButton *okButton = new QPushButton("OK");
	QPushButton *cancelButton = new QPushButton("Cancel");

	// 创建布局
	QGridLayout *layout = new QGridLayout();
	layout-&gt;addWidget(idLabel, 0, 0);
	layout-&gt;addWidget(idText, 0, 1);

	layout-&gt;addWidget(nameLabel, 1, 0);
	layout-&gt;addWidget(nameText, 1, 1);

	layout-&gt;addWidget(okButton, 2, 0);
	layout-&gt;addWidget(cancelButton, 2, 1);

	// 设置主窗口布局
	window.setLayout(layout);

	// 显示窗口
	window.show();

	// 运行应用程序
	return app.exec();
}
</code></pre> 
<p></p> 
<h2><span style="color:#4da8ee;">4、利用QVBoxLayout和QHBoxLayout完成</span></h2> 
<p>        上面一种方法，是直接利用grid网格来做的。如果控件本身不是很规范的话，也可以通过QVBoxLayout和QHBoxLayout嵌套的方法来解决。以这个小项目为例，首先我们需要创建三个QHBoxLayout，每个QHBoxLayout放两个控件，或者是一个label、一个text，或者是两个button。这一步做好了之后，再把三个QHBoxLayout压入到QVBoxLayout当中。而QVBoxLayout呢，直接当作参数赋值给window的setLayout函数即可。这也是一种处理的方法。</p> 
<pre><code class="hljs">#include &lt;QApplication&gt;
#include &lt;QWidget&gt;
#include &lt;QLabel&gt;
#include &lt;QLineEdit&gt;
#include &lt;QPushButton&gt;
#include &lt;QVBoxLayout&gt;
#include &lt;QHBoxLayout&gt;

int main(int argc, char *argv[]) {
	QApplication app(argc, argv);

	// 创建主窗口
	QWidget window;
	window.setWindowTitle("MainWindow");
	window.resize(600, 450);

	// 创建控件
	QLabel *idLabel = new QLabel("ID:");
	QLineEdit *idText = new QLineEdit();

	QLabel *nameLabel = new QLabel("Name:");
	QLineEdit *nameText = new QLineEdit();

	QPushButton *okButton = new QPushButton("OK");
	QPushButton *cancelButton = new QPushButton("Cancel");

	// 创建布局
	QVBoxLayout *mainLayout = new QVBoxLayout();

	// 第一行布局
	QHBoxLayout *firstRowLayout = new QHBoxLayout();
	firstRowLayout-&gt;addWidget(idLabel);
	firstRowLayout-&gt;addWidget(idText);
	mainLayout-&gt;addLayout(firstRowLayout);

	// 第二行布局
	QHBoxLayout *secondRowLayout = new QHBoxLayout();
	secondRowLayout-&gt;addWidget(nameLabel);
	secondRowLayout-&gt;addWidget(nameText);
	mainLayout-&gt;addLayout(secondRowLayout);

	// 第三行布局
	QHBoxLayout *thirdRowLayout = new QHBoxLayout();
	thirdRowLayout-&gt;addWidget(okButton);
	thirdRowLayout-&gt;addWidget(cancelButton);
	mainLayout-&gt;addLayout(thirdRowLayout);

	// 设置主窗口布局
	window.setLayout(mainLayout);

	// 显示窗口
	window.show();

	// 运行应用程序
	return app.exec();
}</code></pre> 
<p></p> 
<h2><span style="color:#4da8ee;">5、总结</span></h2> 
<p>        对于界面固定部分的内容，还是尽量走designer来实现比较好，毕竟实际开发效率要高很多。但是如果涉及到非固定控件的开发，可以选择用硬编码的方法来实现。这是任何gui平台都会遇到的问题，之前c# wpf也是一样，也需要拎出来单独进行处理的。</p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d97a1718c091ecdb6e638a74f009debd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C# Chart控件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53638731d40cd9bb959509fc67fde43f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">提升测试多样性，揭秘Pytest插件pytest-randomly</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>