<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu22.04 realsenseSDK2和ROS2Wrapper安装方法,包含T265版本踩坑问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu22.04 realsenseSDK2和ROS2Wrapper安装方法,包含T265版本踩坑问题" />
<meta property="og:description" content="余既为此文，经年拟安装ROS2和T265驱动，后发现不少问题，遂重编，欢迎补充。
SDK2分为两种安装方法，这里只是Intel的翻译和个人安装记录总结。详细应该参看Intel realsenseSDK2的github仓库Release Intel® RealSense™ SDK 2.0 (v2.51.1) · IntelRealSense/librealsense · GitHub
软件说明 如果你只需要打开相机，不做ros开发，则只需要realsenseSDK2。
如果做ros2开发，则需要realsenseSDK2和ROS2 Wrapper for Intel® RealSense两个。
每一个软件都
具体分为APT安装和源码安装。
注意一点，realsense需要ubuntu内核Kernel处于指定版本，在后续安装中也需要对内核进行修改，请自行对Kelnel降级：
Ubuntu 20/22 (focal/jammy) with LTS kernel 5.13, 5.15 **
Ubuntu 14/16/18/20 with LTS kernel (&lt; 5.13) Ubuntu with Kernel 4.16
关于T265环境版本问题 其中2023年7月7日发布的realsenseSDK2.54版本已经不支持T265，同时ROS2-realsense4.54.1版本也不再支持T265,而 ROS2-realsense4.51.1只支持到realsenseSDK2.51.1版本，所以如果要配置T265相机环境，需要realsenseSDK2.51.1和ROS2-realsense4.51.1两个指定版本，两者都需要源码安装
apt安装 realsenseSDK2apt安装 依次运行以下命令，注意realsense的key仓库地址改变过，所以请看清楚第一行的key安装地址，如果出现问题，需要及时的删除key和apt仓库地址。这种安装方法目前up只知道会安装最新版本，不知道如何指定版本
# 依次运行 sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE #如果出现key添加失败就在/etc/apt/sources.list 和/etc/apt/sources.list.d里删除对应地址 sudo add-apt-repository &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ec47c8569d936a78c8c86418bbf443f0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-26T17:37:06+08:00" />
<meta property="article:modified_time" content="2023-07-26T17:37:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu22.04 realsenseSDK2和ROS2Wrapper安装方法,包含T265版本踩坑问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>余既为此文，经年拟安装ROS2和T265驱动，后发现不少问题，遂重编，欢迎补充。</p> 
<p>SDK2分为两种安装方法，这里只是Intel的翻译和个人安装记录总结。详细应该参看Intel realsenseSDK2的github仓库<a href="https://github.com/IntelRealSense/librealsense/releases/tag/v2.51.1" title="Release Intel® RealSense™ SDK 2.0 (v2.51.1) · IntelRealSense/librealsense · GitHub">Release Intel® RealSense™ SDK 2.0 (v2.51.1) · IntelRealSense/librealsense · GitHub</a></p> 
<h2>软件说明</h2> 
<p>如果你只需要打开相机，不做ros开发，则只需要realsenseSDK2。</p> 
<p>如果做ros2开发，则需要realsenseSDK2和ROS2 Wrapper for Intel® RealSense两个。</p> 
<p>每一个软件都<br> 具体分为APT安装和源码安装。</p> 
<p>注意一点，realsense需要ubuntu内核Kernel处于指定版本，在后续安装中也需要对内核进行修改，请自行对Kelnel降级：</p> 
<ul><li> <p><strong>Ubuntu 20/22 (focal/jammy) with LTS kernel 5.13, 5.15 **</strong></p> </li><li> <p><strong>Ubuntu 14/16/18/20 with LTS kernel (&lt; 5.13) </strong></p> </li><li> <p><strong>Ubuntu with Kernel 4.16</strong></p> </li></ul> 
<h2>关于T265环境版本问题</h2> 
<p>其中2023年7月7日发布的realsenseSDK2.54版本已经不支持T265，同时ROS2-realsense<a href="https://github.com/IntelRealSense/realsense-ros/releases/tag/4.54.1" title="4.54.1">4.54.1</a>版本也不再支持T265,而 ROS2-realsense4.51.1只支持到realsenseSDK2.51.1版本，所以<strong>如果要配置T265相机环境，需要realsenseSDK2.51.1和ROS2-realsense4.51.1两个指定版本，两者都需要源码安装</strong></p> 
<h2>apt安装</h2> 
<h3>realsenseSDK2apt安装</h3> 
<p>依次运行以下命令，注意realsense的key仓库地址改变过，所以请看清楚第一行的key安装地址，如果出现问题，需要及时的删除key和apt仓库地址。这种安装方法目前up只知道会安装最新版本，不知道如何指定版本</p> 
<pre><code class="language-bash"># 依次运行
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE
#如果出现key添加失败就在/etc/apt/sources.list 和/etc/apt/sources.list.d里删除对应地址
sudo add-apt-repository "deb https://librealsense.intel.com/Debian/apt-repo $(lsb_release -cs) main" -u
sudo apt-get install librealsense2-dkms
sudo apt-get install librealsense2-utils
sudo apt-get install librealsense2-dev</code></pre> 
<p>如果执行完以上代码可以输入命令realsen-viwer来判断是否安装正确。</p> 
<p>该安装过程已被验证正确，如果出现问题欢迎私信。</p> 
<p>以下是编译安装的卸载方法</p> 
<pre><code>#Remove a single package with:
sudo apt-get purge &lt;package-name&gt;

#Remove all RealSense™ SDK-related packages with:
dpkg -l | grep "realsense" | cut -d " " -f 3 | xargs sudo dpkg --purge</code></pre> 
<h3 style="background-color:transparent;">ROS2 Wrapper for Intel® RealSense-apt安装</h3> 
<p>一行搞定，但是这个直接安装最新版本，对于T265用户不适用</p> 
<pre><code class="language-bash">sudo apt install ros-&lt;ROS_DISTRO&gt;-realsense2-*
sudo apt install ros-humble-realsense2-*#比如对于HUmble版本</code></pre> 
<h2 style="background-color:transparent;">source安装</h2> 
<h3>realsenseSDK2-source安装</h3> 
<p>Intel主推apt，dkml之类的安装，但是我们不免需要对源码进行研究，以下是Intel源码安装地址</p> 
<p>source安装：<a href="https://github.com/IntelRealSense/librealsense/blob/development/doc/installation.md" title="https://github.com/IntelRealSense/librealsense/blob/development/doc/installation.md">https://github.com/IntelRealSense/librealsense/blob/development/doc/installation.md</a></p> 
<p>对于常用的22.04等版本的Ubuntu第一步基本操作，<strong>up推荐源码安装</strong></p> 
<pre><code class="language-bash">预备操作
#更新apt并安装插件
sudo apt-get update &amp;&amp; sudo apt-get upgrade &amp;&amp; sudo apt-get dist-upgrade
sudo apt-get install git libssl-dev libusb-1.0-0-dev libudev-dev pkg-config libgtk-3-dev cmake
#对于不同ubuntu版本还需要安装不同的包
    #Ubuntu 14 or when running Ubuntu 16.04 live-disk:
    ./scripts/install_glfw3.sh
    #Ubuntu 16:
    sudo apt-get install libglfw3-dev
    #Ubuntu 18/20/22:
    sudo apt-get install libglfw3-dev libgl1-mesa-dev libglu1-mesa-dev at
#下载源码，注意安装指定版本的!!!!!!,这里安装2.51
git clone https://github.com/IntelRealSense/librealsense.git
2.
#拔下realsense设备然后进入realsenseSDK的仓库并运行
cd librealsense

#运行realsense的脚本
./scripts/setup_udev_rules.sh该命令用于获得权限
./scripts/setup_udev_rules.sh --uninstall可以卸载上面命令

#安装应用补丁内核模块，不同版本安装不同补丁

    # Ubuntu 20/22 (focal/jammy) with LTS kernel 5.13, 5.15 
    ./scripts/patch-realsense-ubuntu-lts-hwe.sh

    #Ubuntu 14/16/18/20 with LTS kernel (&lt; 5.13)
    ./scripts/patch-realsense-ubuntu-lts.sh

    #Ubuntu with Kernel 4.16
    ./scripts/patch-ubuntu-kernel-4.16.sh
</code></pre> 
<p>然后就是正常的编译realsense仓库的操作，请注意以下教程适用于Ubuntu22.04，对于14.04可能会遇到问题，比如Intel在文档里强调14.04需要修改Gcc的默认版本</p> 
<pre><code class="language-bash">#在realsense仓库目录下建立build文件夹
mkdir build &amp;&amp; cd build

#然后选择运行以下命令进行Cmake
cmake ../ 
cmake ../ -DBUILD_EXAMPLES=true 
cmake ../ -DBUILD_EXAMPLES=true -DBUILD_GRAPHICAL_EXAMPLES=false #For systems without OpenGL or X11 build only textual examples

#make，但是不清楚为什么先uninstall一遍
sudo make uninstall &amp;&amp; make clean &amp;&amp; make &amp;&amp; sudo make install</code></pre> 
<p>共享对象将安装在/usr/local/lib中</p> 
<p>头文件位于/usr/local/include中</p> 
<p>二进制演示、教程和测试文件将被复制到/usr/local/bin中</p> 
<p>最后通过编译安装之后能打开realsense-viewer，如果不能打开，up以前也遇到不能打开的问题，up认为是没有使ubuntu内核降级到制定版本的问题。不过如果源码安装无法打开，你可以试试下面的apt安装。</p> 
<pre><code class="language-bash"># 依次运行
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE || sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key F6E65AC044F831AC80A06380C8B3A55A6F3EFCDE
#如果出现key添加失败就在/etc/apt/sources.list 和/etc/apt/sources.list.d里删除对应地址
sudo add-apt-repository "deb https://librealsense.intel.com/Debian/apt-repo $(lsb_release -cs) main" -u
sudo apt-get install librealsense2-dkms
sudo apt-get install librealsense2-utils</code></pre> 
<h3>ROS2 Wrapper for Intel® RealSense-source安装</h3> 
<pre><code class="language-bash">#建立一个ROS2工作空间，比如：
mkdir -p ~/ros2_ws/src
cd ~/ros2_ws/src/
#Clone the latest ROS2 Intel® RealSense™ wrapper from here into '~/ros2_ws/src/'
git clone https://github.com/IntelRealSense/realsense-ros.git -b ros2-development
cd ~/ros2_ws
#安装依赖Install dependencies
sudo apt-get install python3-rosdep -y
sudo rosdep init # "sudo rosdep init --include-eol-distros" for Eloquent and earlier
rosdep update # "sudo rosdep update --include-eol-distros" for Eloquent and earlier
rosdep install -i --from-path src --rosdistro $ROS_DISTRO --skip-keys=librealsense2 -y

#Build
colcon build

#Source environment
# ROS_DISTRO=&lt;YOUR_SYSTEM_ROS_DISTRO&gt;  比如ROS_DISTRO: iron, humble
source /opt/ros/$ROS_DISTRO/setup.bash
cd ~/ros2_ws
. install/local_setup.bash</code></pre> 
<h3>trubleShoot</h3> 
<p>如果你apt安装出现key问题可以参看下面的博客</p> 
<p><a href="https://blog.csdn.net/jiang_huixin/article/details/127186567" title="ubuntu 22.04 修复 key is stored in legacy trusted.gpg keyring_see the deprecation section in apt-key(8) for deta_jiang_huixin的博客-CSDN博客">ubuntu 22.04 修复 key is stored in legacy trusted.gpg keyring_see the deprecation section in apt-key(8) for deta_jiang_huixin的博客-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b3c481c32039ab71b7606f629c6598f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MongoDB索引结构，到底是B-Tree还是B&#43;Tree，请看这里！！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/387c7ce2b2a184ea03af92fd4c2c47ec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ipopt&#43;cppad求解遇到sqrt时求解失败</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>