<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hadoop完全分布式安装的心酸历程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hadoop完全分布式安装的心酸历程" />
<meta property="og:description" content="1.下载VMware安装包 官网下载地址：https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html。
下载后点击.exe文件进行安装，安装成功后首次登录需要输入注册码，根据自己安装的版本百度搜索对应的注册码即可，输入注册码后即完成该软件的破解。破解后进入VMware的主界面如图1所示。
图1 VMware主界面 2.设置VMware的网络连接模式： 点击“编辑”下的“虚拟网络编辑器”，进入VMware的网络设置界面（如图2所示），点击“””进入管理员权限下的网络设置界面（如图3所示）：（1）选择NAT模式，各个虚拟机通过NAT使用宿主机的IP来访问外网。（2）我们的要求是集群中的各个虚拟机有固定的IP、可以访问外网，所以勾掉“”；（3）点击“”，进入NAT设置界面（如图4所示），这里需要记一下网关IP（192.168.211.2）后面的配置会用到，点击“”进行DNS配置（如图5所示）。至此VMware的网络配置完毕。
图2 WMware网络设置界面 图3 管理员权限下的VMware网络设置界面 图4 NAT设置界面 图5 DNS配置界面标题 3.安装虚拟机 （1）在VMware主页点击“新建虚拟机”；
（2）选择“典型”安装，点击“下一步”，如图6所示；
图6 选择典型安装 （3）选择“稍后暗转操作系统”，点击“下一步”，如图7所示；
图7 选择稍后安装操作系统 （4）选择要安装的系统类型，这里我选择的是Linux操作系统，系统版本为Centos7 64位，如图8所示；
图8 选择要装的系统与版本 （5）设置虚拟机的名称与安装位置，如图9所示；
图9 设置虚拟机的名称与路径 （6）设置虚拟机的空间大小，默认的设置即可，如图10所示；
图10 设置虚拟机的空间大小 （7）点击“完成”实现虚拟机的安装，如图11所示；
图11 完成虚拟机的安装 （8）下载Centos7的iso镜像文件，选择下载“CentOS-7-x86_64-DVD-2003.iso”（下载地址：http://mirrors.aliyun.com/centos/7/isos/x86_64/），如图12所示；
图12 下载Centos7的iso镜像文件 （9）点击“编辑虚拟机设置”来进行虚拟机相关信息的设置，如图13所示：
图13 编辑虚拟机设置 （10）点击DVD，指定操作系统ISO文件所在位置，如图14所示。
图14 指定操作系统ISO文件位置 （11）开启虚拟机，进行系统安装，如图15所示；
图15 开启虚拟机进行系统安装 （12）敲击回车，进行系统的安装，如图16所示；
图16 进行系统安装 （13）选择安装系统的版本（英文版、中文版），默认安装英文版，根据自身需求选择（建议选择英文版，路径不容易出错），如图17所示；
图17 选择安装系统的语言 （14）进行安装前的必要配置，配置完成后才能进行安装（如图18所示），使用默认的配置即可，直接点击“Done”按钮（如图19所示），点击“Begin Installation”开始进行安装（如图20所示）。
图18 进行安装所需的配置 图19 选择默认配置 图20 开始进行安装 （15）点击“ROOT PASSWORD”进行root账户密码的设置（如图21所示），为root账户设置完密码后点击“Done”（如图22所示），点击“Finish configuration”按钮完成配置继续进行安装（如图23所示）。点击Reboot启动操作系统（如图24所示）。
图21 为root账户设置密码 图22 为root账户设置密码 图23 完成配置 图24 安装成功重启系统 按上述方法，功安装3个虚拟机，分别是hadoop_01、hadoop_02、hadoop_03。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fd0bdd4d48309ef00e77b4a343a4c101/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-05-11T19:36:38+08:00" />
<meta property="article:modified_time" content="2020-05-11T19:36:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hadoop完全分布式安装的心酸历程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.下载VMware安装包</h2> 
<p style="text-indent:33px;">官网下载地址：<a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html" rel="nofollow">https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html</a>。</p> 
<p style="text-indent:33px;">下载后点击.exe文件进行安装，安装成功后首次登录需要输入注册码，根据自己安装的版本百度搜索对应的注册码即可，输入注册码后即完成该软件的破解。破解后进入VMware的主界面如图1所示。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="724" src="https://images2.imgbox.com/d3/23/LmQuoTaS_o.png" width="802"> 
  <figcaption>
     图1  VMware主界面 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:0;">                                                                                           </p> 
<h2>2.设置VMware的网络连接模式：</h2> 
<p style="text-indent:33px;">点击“编辑”下的“虚拟网络编辑器”，进入VMware的网络设置界面（如图2所示），点击“<img alt="" height="18" src="https://images2.imgbox.com/93/7c/ZQtdYXDR_o.png" width="79">””进入管理员权限下的网络设置界面（如图3所示）：（1）选择NAT模式，各个虚拟机通过NAT使用宿主机的IP来访问外网。（2）我们的要求是集群中的各个虚拟机有固定的IP、可以访问外网，所以勾掉“<img alt="" height="20" src="https://images2.imgbox.com/43/bd/nMSrMmcJ_o.png" width="252">”；（3）点击“<img alt="" height="25" src="https://images2.imgbox.com/a4/51/lnHbKm06_o.png" width="103">”，进入NAT设置界面（如图4所示），这里需要记一下网关IP（192.168.211.2）后面的配置会用到，点击“<img alt="" height="22" src="https://images2.imgbox.com/60/91/6XZrKCXZ_o.png" width="107">”进行DNS配置（如图5所示）。至此VMware的网络配置完毕。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="556" src="https://images2.imgbox.com/08/a1/fklXTEZe_o.png" width="607"> 
  <figcaption>
    图2 WMware网络设置界面 
  </figcaption> 
 </figure> 
</div> 
<p> </p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="534" src="https://images2.imgbox.com/0d/e2/JQyqHr1T_o.png" width="614"> 
  <figcaption>
     图3 管理员权限下的VMware网络设置界面 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;">                                                                 </p> 
<p style="margin-left:0cm;"> </p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="525" src="https://images2.imgbox.com/91/c5/3MlsP67A_o.png" width="495"> 
  <figcaption>
    图4 NAT设置界面 
  </figcaption> 
 </figure> 
</div> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="292" src="https://images2.imgbox.com/a1/98/Lb2Zrz9c_o.png" width="266"> 
  <figcaption>
    图5 DNS配置界面标题 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">                                                                                          </p> 
<h2>3.安装虚拟机</h2> 
<p style="margin-left:0cm;">（1）在VMware主页点击“新建虚拟机”；</p> 
<p style="margin-left:0cm;">（2）选择“典型”安装，点击“下一步”，如图6所示；</p> 
<p style="margin-left:0cm;"> </p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="435" src="https://images2.imgbox.com/9b/4f/QON3ye3s_o.png" width="503"> 
  <figcaption>
    图6 选择典型安装 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（3）选择“稍后暗转操作系统”，点击“下一步”，如图7所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="433" src="https://images2.imgbox.com/44/47/gCZcyTaU_o.png" width="501"> 
  <figcaption>
    图7 选择稍后安装操作系统 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（4）选择要安装的系统类型，这里我选择的是Linux操作系统，系统版本为Centos7 64位，如图8所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="429" src="https://images2.imgbox.com/4d/03/CNVWjkQz_o.png" width="497"> 
  <figcaption>
    图8 选择要装的系统与版本 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（5）设置虚拟机的名称与安装位置，如图9所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="434" src="https://images2.imgbox.com/03/41/avQNxopG_o.png" width="499"> 
  <figcaption>
    图9 设置虚拟机的名称与路径 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（6）设置虚拟机的空间大小，默认的设置即可，如图10所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="432" src="https://images2.imgbox.com/76/8b/iKDXkMlb_o.png" width="497"> 
  <figcaption>
    图10 设置虚拟机的空间大小 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（7）点击“完成”实现虚拟机的安装，如图11所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="431" src="https://images2.imgbox.com/d7/fe/tJdR4lR5_o.png" width="498"> 
  <figcaption>
    图11 完成虚拟机的安装 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（8）下载Centos7的iso镜像文件，选择下载“<a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/CentOS-7-x86_64-DVD-2003.iso" rel="nofollow">CentOS-7-x86_64-DVD-2003.iso</a>”（下载地址：<a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/" rel="nofollow">http://mirrors.aliyun.com/centos/7/isos/x86_64/</a>），如图12所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="271" src="https://images2.imgbox.com/e1/cf/kQN9hN9r_o.png" width="646"> 
  <figcaption>
    图12 下载Centos7的iso镜像文件 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（9）点击“编辑虚拟机设置”来进行虚拟机相关信息的设置，如图13所示：</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/6e/7f/Io7tqdBk_o.png" width="800"> 
  <figcaption>
    图13 编辑虚拟机设置 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（10）点击DVD，指定操作系统ISO文件所在位置，如图14所示。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="750" src="https://images2.imgbox.com/80/c3/7N49jLU1_o.png" width="731"> 
  <figcaption>
    图14 指定操作系统ISO文件位置 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（11）开启虚拟机，进行系统安装，如图15所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/ff/b9/VGbybX8G_o.png" width="800"> 
  <figcaption>
    图15 开启虚拟机进行系统安装 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（12）敲击回车，进行系统的安装，如图16所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="605" src="https://images2.imgbox.com/c8/7a/bMleUxdg_o.png" width="645"> 
  <figcaption>
    图16 进行系统安装 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（13）选择安装系统的版本（英文版、中文版），默认安装英文版，根据自身需求选择（建议选择英文版，路径不容易出错），如图17所示；</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/ab/30/AXL5LD0U_o.png" width="799"> 
  <figcaption>
    图17 选择安装系统的语言 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（14）进行安装前的必要配置，配置完成后才能进行安装（如图18所示），使用默认的配置即可，直接点击“Done”按钮（如图19所示），点击“Begin Installation”开始进行安装（如图20所示）。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/27/91/PVq9hMLM_o.png" width="801"> 
  <figcaption>
    图18 进行安装所需的配置 
  </figcaption> 
 </figure> 
</div> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="618" src="https://images2.imgbox.com/60/de/h6yhcSLi_o.png" width="799"> 
  <figcaption>
    图19 选择默认配置 
  </figcaption> 
 </figure> 
</div> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/6d/92/faoqvAp3_o.png" width="800"> 
  <figcaption>
    图20 开始进行安装 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（15）点击“ROOT PASSWORD”进行root账户密码的设置（如图21所示），为root账户设置完密码后点击“Done”（如图22所示），点击“Finish configuration”按钮完成配置继续进行安装（如图23所示）。点击Reboot启动操作系统（如图24所示）。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/d2/46/ZnQk0Gu8_o.png" width="800"> 
  <figcaption>
    图21 为root账户设置密码 
  </figcaption> 
 </figure> 
</div> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/9d/20/DrRlojsB_o.png" width="800"> 
  <figcaption>
    图22 为root账户设置密码 
  </figcaption> 
 </figure> 
</div> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/49/36/UYlcBkxX_o.png" width="800"> 
  <figcaption>
    图23 完成配置 
  </figcaption> 
 </figure> 
</div> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="600" src="https://images2.imgbox.com/84/a0/DcWY0b7m_o.png" width="800"> 
  <figcaption>
    图24 安装成功重启系统 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">按上述方法，功安装3个虚拟机，分别是hadoop_01、hadoop_02、hadoop_03。</p> 
<ol><li>配置虚拟机的网络</li></ol> 
<p style="margin-left:0cm;">（1）Centos 7的网络配置文件在/etc/sysconfig/network-scripts/下，名称类似<span style="color:#4d4d4d;">ifcfg-*，进入这个文件夹下进行查看（如图25所示），在我的系统中这个文件为ifcfg-ens33。</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="103" src="https://images2.imgbox.com/19/d4/j8Zh2kNp_o.png" width="1151"> 
  <figcaption>
    图25 查找Centos7网络配置文件 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">（2）编辑网络配置文件，输入如下命令：vi ifcfg-ens33。修改后的配置文件如图26所示</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="325" src="https://images2.imgbox.com/2c/c6/9T7SFVJ7_o.png" width="388"> 
  <figcaption>
    图26修改网络配置文件 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="text-indent:33px;">BOOTPROTO=static  #启用静态IP地址</p> 
<p style="text-indent:33px;">IPADDR=192.168.211.101 #IP地址</p> 
<p style="text-indent:33px;">NETMASK=255.255.255.0 #子网掩码</p> 
<p style="text-indent:33px;">GATEWAY=192.168.211.2 #默认网关，就是在配置VMware时让记住的那个网关ip</p> 
<p style="text-indent:33px;">DNS1=223.6.6.6 #DNS</p> 
<p style="text-indent:33px;">DNS2=119.29.29.29 #备用DNS</p> 
<p style="text-indent:33px;">ONBOOT=yes #开机启用本配置</p> 
<p style="text-indent:33px;">编辑完成后，保存修改。输入命令：wq</p> 
<p style="margin-left:0cm;">（3）重启网络，输入如下命令：service network restart</p> 
<p style="margin-left:0cm;">        查看IP地址，输入如下命令：ip addr</p> 
<p style="margin-left:0cm;">        看一下网络是否通畅，输入如下命令：ping ww.baidu.com</p> 
<p style="margin-left:0cm;">        如果看到如图27所示，那么恭喜你网络已经畅通无阻了。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="343" src="https://images2.imgbox.com/7f/3c/3x68DgKx_o.png" width="986"> 
  <figcaption>
    图27 查看配置网络是否畅通 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">  (4)关闭防火墙</p> 
<p style="margin-left:0cm;">       查看防火墙状态（如图28所示，绿色的active running表示防火墙开启），输入如下命令：systemctl status firewalld.servic</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="136" src="https://images2.imgbox.com/e7/b9/0xIeJDrW_o.png" width="774"> 
  <figcaption>
    图28 查看防火墙状态 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">       关闭防火墙，输入如下命令：systemctl stop firewalld.service，再次查看防火墙的状态为 inactive（dead），证明防火墙已被关闭（如图29所示）。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="240" src="https://images2.imgbox.com/5a/48/yjZJajsU_o.png" width="930"> 
  <figcaption>
    图29 关闭防火墙 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">        如果像永久关闭防火墙，只需禁止防火墙服务开机自启（如图30所示），输入如下命令：systemctl disable firewalld.service图31 禁止防火墙服务开机启动</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="220" src="https://images2.imgbox.com/39/08/Gr1ibVDt_o.png" width="723"> 
  <figcaption>
    图30 禁止防火墙服务开机启动 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">        按照上面的方法依次配置hadoop_02与hadoop_03的网络，网络配置文件除IP地址以外其它设置一与hadoop_01一样（注：hadoop_02的IP为192.168.211.102、hadoop_03的IP为192.168.211.103）。</p> 
<p style="margin-left:0cm;">（5）关闭selinux</p> 
<p style="margin-left:0cm;">         编辑selinux文件，输入如下命令：vi /etc/sysconfig/selinux。设置SELINUX=disabled如图31所示，修改完成后输入如下命令（wq）进行保存。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="186" src="https://images2.imgbox.com/c3/bc/ptuIOk6C_o.png" width="744"> 
  <figcaption>
    图31 关闭selinux 
  </figcaption> 
 </figure> 
</div> 
<h2>5.为每台虚拟机新建一个Hadoop用户，并授予sudo权限。</h2> 
<p style="margin-left:0cm;">新建hadoop用户，输入如下命令：sudo useradd -m hadoop -s /bin/bash</p> 
<p style="margin-left:0cm;">修改hadoop用户的密码，输入如下命令：sudo passwd Hadoop</p> 
<p style="margin-left:0cm;">授予hadoop用户sudo权限，输入如下命令：sudo adduser hadoop sudo图33 新建用户并授予sudo权限</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="199" src="https://images2.imgbox.com/a3/38/ZuEkQ01S_o.png" width="537"> 
  <figcaption>
    图32 新建用户并授予sudo权限 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">需要编辑一下/etc/sudoers文件在里面将hadoop用户加入授权即可，输入命令：vi /etc/sudoers</p> 
<p style="margin-left:0cm;">修改后的文件如图33所示，编辑完成后，保存修改。输入命令：wq！</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="65" src="https://images2.imgbox.com/d5/b4/tLkMFEWa_o.png" width="366"> 
  <figcaption>
    图33 将新用户授予sudo权限 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<h2>6.修改主机名</h2> 
<p style="margin-left:0cm;">输入以下命令修改主机名：hostnamectl set-hostname 主机名</p> 
<p style="margin-left:0cm;">例如（hadoop_01）：hostnamectl set-hostname hadoop-01.host.com</p> 
<p style="margin-left:0cm;">例如（hadoop_02）：hostnamectl set-hostname hadoop-02.host.com</p> 
<p style="margin-left:0cm;">例如（hadoop_03）：hostnamectl set-hostname hadoop-03.host.com</p> 
<p style="margin-left:0cm;">修改完后重新登录会发现主机名已经完成修改，修改成功的实例如图34所示（hadoop：用户名、hadoop-01：主机名）：</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="39" src="https://images2.imgbox.com/6f/ea/Eae8n1oL_o.png" width="425"> 
  <figcaption>
    图34 成功修改主机名 
  </figcaption> 
 </figure> 
</div> 
<h2>7.设置hosts</h2> 
<p style="margin-left:0cm;">添加本机与另外两台机器的IP地址与主机名，输入如下命令（编辑后的文件如图35所示）：sudo vi /etc/hosts</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="111" src="https://images2.imgbox.com/62/bc/w3m3U5Ag_o.png" width="751"> 
  <figcaption>
    图35 编辑后的hosts的文件 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">192.168.211.101 ：主机IP地址</p> 
<p style="margin-left:0cm;">hadoop-01.host.com：长主机名</p> 
<p style="margin-left:0cm;">Hadoop-01：短主机名</p> 
<h2>8.设置3台虚拟主机之间可以ssh免密码登录；</h2> 
<p style="margin-left:0cm;">（1）在hadoop-01上生成公钥，输入如下命令：ssh-keygen -t rsa</p> 
<p style="text-indent:33px;">输入命令后一直回车即可（如图36所示）。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="356" src="https://images2.imgbox.com/5f/31/yaoHwNEB_o.png" width="756"> 
  <figcaption>
    图36 在主机上生成公钥 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">（2）向本机以及其它主机分发公钥，依次输入如下命令（如图37所示）：</p> 
<p style="text-indent:33px;">ssh-copy-id hadoop-01.host.com</p> 
<p style="text-indent:33px;">ssh-copy-id hadoop-02.host.com</p> 
<p style="text-indent:33px;">ssh-copy-id hadoop-03.host.com</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="246" src="https://images2.imgbox.com/1b/f4/q9mkxQPK_o.png" width="954"> 
  <figcaption>
    图37 分发公钥 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">（3）设置hadoop-02、hadoop-03到其他机器的无密钥登录</p> 
<h2 style="margin-left:0cm;">9、安装java环境</h2> 
<p style="margin-left:0cm;">       在官网下载linux的jdk安装包，网址如下所示：<a href="https://www.oracle.com/java/technologies/javase-jdk8-downloads.html%E3%80%82%E9%80%89%E6%8B%A9%E4%B8%8B%E8%BD%BDLinux%20x64" rel="nofollow">https://www.oracle.com/java/technologies/javase-jdk8-downloads.html。选择下载Linux x64</a> Compressed Archive类型（如图38所示，注：下载需要有Oracle的账号与密码）</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="891" src="https://images2.imgbox.com/31/28/Tl5KyiQY_o.png" width="1200"> 
  <figcaption>
    图38  下载java安装包 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">       使用xftp工具将下载的安装包传到hadoop-01主机中，我这里将文件传到了/home/hadoop/Downloads文件夹下。</p> 
<p style="margin-left:0cm;">       (1)在 /usr/lib 下创建名为jvm的文件夹，用来存储jdk文件，输入如下命令：</p> 
<p style="text-indent:33px;">       cd /etc/lib</p> 
<p style="text-indent:33px;">       sudo mkdir jvm</p> 
<p style="margin-left:0cm;">       (2)将下载的压缩包文件解压到jvm文件夹下，输入如下命令：</p> 
<p style="text-indent:33px;">       cd /home/Hadoop/Downloads</p> 
<p style="text-indent:33px;">       sudo tar -zxvf ./jdk-8u251-linux-i586.tar.gz  -C /usr/lib/jvm/</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="122" src="https://images2.imgbox.com/9f/f2/BIEYZkAR_o.png" width="795"> 
  <figcaption>
    图39 解压缩jdk 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">       (3)设置jdk的环境变量</p> 
<p style="text-indent:33px;">       使用如下命令：cd /usr/lib/jvm ，可以看到解压后的jdk文件，如图40所示。</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="79" src="https://images2.imgbox.com/e5/5b/waL8cAod_o.png" width="442"> 
  <figcaption>
    图40 查看解压后的文件 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;">       编辑.bashrc文件，输入如下命令：sudo vi ~/.bashrc</p> 
<p style="text-indent:33px;">       在最前面加入两行：</p> 
<p style="text-indent:33px;">       export JAVA_HOME=JDK解压路径<br>               export PATH=$JAVA_HOME/bin:$PATH（如图41所示）</p> 
<p style="margin-left:0cm;">              接着输入完成编辑命令：wq</p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="207" src="https://images2.imgbox.com/0c/0f/vr2xjVoB_o.png" width="828"> 
  <figcaption>
    图41 添加jdk环境变量 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><span style="color:#333333;">             接着还需要让该环境变量生效，输入如下命令：</span><span style="color:#333333;">source ~/.bashrc</span></p> 
<p style="margin-left:0cm;">             <span style="color:#333333;">输入如下命令，看</span><span style="color:#333333;">java</span><span style="color:#333333;">环境是否安装成功：</span><span style="color:#333333;">java -version</span></p> 
<p style="margin-left:0cm;">             <span style="color:#333333;">安装成功，如图</span><span style="color:#333333;">42</span><span style="color:#333333;">所示</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="78" src="https://images2.imgbox.com/c2/93/bwqrAqua_o.png" width="490"> 
  <figcaption>
    图42 成功安装jdk 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;">             <span style="color:#333333;">如果报图</span><span style="color:#333333;">43</span><span style="color:#333333;">所示的错误，则输入如下命令：</span><span style="color:#333333;">sudo yum install glibc.i686</span><span style="color:#333333;">，一直输入</span><span style="color:#333333;">y</span><span style="color:#333333;">即可。安装成功后，再次输入：java -version</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="41" src="https://images2.imgbox.com/8d/54/ACj3euFM_o.png" width="930"> 
  <figcaption>
    图43 启动java报错 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><span style="color:#333333;">       (4)</span><span style="color:#333333;">为</span><span style="color:#333333;">hadoop-02</span><span style="color:#333333;">、</span><span style="color:#333333;">hadoop-03</span><span style="color:#333333;">安装</span><span style="color:#333333;">jdk</span></p> 
<h2><span style="color:#333333;">10.安装</span><span style="color:#333333;">Hadoop</span></h2> 
<p style="margin-left:0cm;"><span style="color:#333333;">(1)</span><span style="color:#333333;">官网下载地址：</span><span style="color:#333333;"><a href="https://hadoop.apache.org/releases.html" rel="nofollow">https://hadoop.apache.org/releases.html</a></span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="523" src="https://images2.imgbox.com/d1/26/fmEaVSU7_o.png" width="1200"> 
  <figcaption>
    图44 hadoop下载 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><span style="color:#333333;">   (2)点击Ann</span><span style="color:#333333;">ouncement，进入下载界面，选择“Download tar.gz</span><span style="color:#333333;">”。如图</span><span style="color:#333333;">45所示：</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="396" src="https://images2.imgbox.com/59/76/yQwyZyB4_o.png" width="1087"> 
  <figcaption>
    图45 hadoop下载 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><span style="color:#333333;">(3)</span><span style="color:#333333;">将下载后的</span><span style="color:#333333;">Hadoop</span><span style="color:#333333;">文件同样上传</span>文件到/home/hadoop/Downloads文件夹下。</p> 
<p style="text-indent:33px;">将下载的压缩包文件解压到/usr/local文件夹下，输入如下命令：</p> 
<p style="text-indent:33px;">cd /home/Hadoop/Downloads</p> 
<p style="text-indent:33px;">sudo tar -zxf hadoop-2.10.0.tar.gz  -C /usr/local/</p> 
<p style="margin-left:0cm;"><span style="color:#333333;">(4)</span>修改hadoop的配置文件（hadoop-2.10.0/etc/hadoop文件夹下的slaves、<a href="http://hadoop.apache.org/docs/r2.6.0/hadoop-project-dist/hadoop-common/core-default.xml" rel="nofollow">core-site.xml</a>、<a href="http://hadoop.apache.org/docs/r2.6.0/hadoop-project-dist/hadoop-hdfs/hdfs-default.xml" rel="nofollow">hdfs-site.xml</a>、<a href="http://hadoop.apache.org/docs/r2.6.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml" rel="nofollow">mapred-site.xml</a>、<a href="http://hadoop.apache.org/docs/r2.6.0/hadoop-yarn/hadoop-yarn-common/yarn-default.xml" rel="nofollow">yarn-site.xml</a> <span style="color:#333333;">）</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">首先在</span><span style="color:#333333;">/usr/local/</span> hadoop-2.10.0下新建一个文件夹：sudo mkdir hdfs</p> 
<p style="text-indent:33px;">紧接着在/usr/local/Hadoop-2.10.0下新建三个文件夹：</p> 
<p style="text-indent:33px;">sudo mkdir tmp</p> 
<p style="text-indent:33px;">sudo mkdir data</p> 
<p style="text-indent:33px;">sudo mkdir name</p> 
<h2 style="margin-left:0cm;"><span style="color:#333333;">slaves</span></h2> 
<p style="text-indent:33px;"><span style="color:#333333;">文件</span><span style="color:#333333;"> <strong>slaves</strong></span><span style="color:#333333;">，将作为</span><span style="color:#333333;"> DataNode </span><span style="color:#333333;">的主机名写入该文件，每行一个，默认为</span><span style="color:#333333;"> localhost</span><span style="color:#333333;">。分布式配置可以保留</span><span style="color:#333333;"> localhost</span><span style="color:#333333;">，也可以删掉（让</span><span style="color:#333333;"> hadoop-01 </span><span style="color:#333333;">节点仅作为</span><span style="color:#333333;"> NameNode </span><span style="color:#333333;">使用）。这里，我删掉了</span><span style="color:#333333;">localhost</span><span style="color:#333333;">，让</span><span style="color:#333333;">hadoop-01</span><span style="color:#333333;">节点仅作为</span><span style="color:#333333;">NameNode</span><span style="color:#333333;">使用。编辑后的文件如图</span><span style="color:#333333;">46所示：</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="65" src="https://images2.imgbox.com/27/04/7AR2wPS6_o.png" width="274"> 
  <figcaption>
    图46 编辑后的slaves文件 
  </figcaption> 
 </figure> 
</div> 
<h2 style="margin-left:0cm;"><span style="color:#333333;"><strong>core-site.xml</strong> </span></h2> 
<p style="text-indent:33px;"><span style="color:#333333;">fs.defaults参数配置的是</span><span style="color:#333333;">HDFS</span><span style="color:#333333;">的地址，</span><span style="color:#333333;">hadoop.tmp.dir</span><span style="color:#333333;">配置的是</span><span style="color:#333333;">Hadoop</span><span style="color:#333333;">临时目录（创建的</span><span style="color:#333333;">tmp</span><span style="color:#333333;">文件夹）。编辑后的文件如图</span><span style="color:#333333;">47所示：</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="207" src="https://images2.imgbox.com/99/a3/FJ4PBt2v_o.png" width="640"> 
  <figcaption>
    图47 编辑后的core-site.xml文件 
  </figcaption> 
 </figure> 
</div> 
<h2 style="margin-left:0cm;"><strong><span style="color:#333333;">hdfs-site.xml</span></strong></h2> 
<p style="text-indent:33px;"><span style="color:#333333;">dfs.replication </span><span style="color:#333333;">一般设为</span><span style="color:#333333;"> 3</span><span style="color:#333333;">，但我们只有</span><span style="color:#333333;">hadoop-02</span><span style="color:#333333;">与</span><span style="color:#333333;">hadoop-03</span><span style="color:#333333;">两个节点，所以</span><span style="color:#333333;"> dfs.replication </span><span style="color:#333333;">的值设为</span><span style="color:#333333;"> 2</span><span style="color:#333333;">：</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">dfs.namenode.secondary.http-address</span><span style="color:#333333;">是指定</span><span style="color:#333333;">secondaryNameNode</span><span style="color:#333333;">的</span><span style="color:#333333;">http</span><span style="color:#333333;">访问地址和端口号，因为在规划中，我们将</span><span style="color:#333333;">hadoop-03</span><span style="color:#333333;">规划为</span><span style="color:#333333;">SecondaryNameNode</span><span style="color:#333333;">服务器。</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">dfs.namenode.name.dir</span><span style="color:#333333;">配置的是</span><span style="color:#333333;">namenode</span><span style="color:#333333;">的存储目录（创建的</span><span style="color:#333333;">name</span><span style="color:#333333;">文件夹）。</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">dfs.namenode.data.dir</span><span style="color:#333333;">配置的是</span><span style="color:#333333;">datanode</span><span style="color:#333333;">的存储目录（创建的</span><span style="color:#333333;">name</span><span style="color:#333333;">文件夹）。</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">配置信息如图</span><span style="color:#333333;">48所示：</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="329" src="https://images2.imgbox.com/b9/23/gohcnKf7_o.png" width="624"> 
  <figcaption>
    图48 编辑后的hdfs-site.xml文件 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"><strong><span style="color:#333333;">mapred-site.xml</span></strong></p> 
<p style="text-indent:33px;"><span style="color:#333333;">可能需要先重命名，默认文件名为</span><span style="color:#333333;"> mapred-site.xml.template</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">mapreduce.framework.name</span><span style="color:#333333;">设置</span><span style="color:#333333;">mapreduce</span><span style="color:#333333;">任务运行在</span><span style="color:#333333;">yarn</span><span style="color:#333333;">上。</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">mapreduce.jobhistory.address</span><span style="color:#333333;">是设置</span><span style="color:#333333;">mapreduce</span><span style="color:#333333;">的历史服务器安装在</span><span style="color:#333333;">hadoop-03</span><span style="color:#333333;">机器上。</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">mapreduce.jobhistory.webapp.address</span><span style="color:#333333;">是设置历史服务器的</span><span style="color:#333333;">web页面地址和端口号。</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="250" src="https://images2.imgbox.com/ea/d8/7cXk2DNh_o.png" width="527"> 
  <figcaption>
    图49 编辑后的 
   <strong>mapred-site.xml</strong> 
   <strong>文件</strong> 
  </figcaption> 
 </figure> 
</div> 
<h2 style="margin-left:0cm;"><strong><span style="color:#333333;">yarn-site.xml</span></strong></h2> 
<p style="text-indent:33px;"><span style="color:#333333;">根据规划</span><span style="color:#333333;">yarn.resourcemanager.hostname</span><span style="color:#333333;">这个指定</span><span style="color:#333333;">resourcemanager</span><span style="color:#333333;">服务器指向</span><span style="color:#333333;">hadoop-02.host.com。</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="242" src="https://images2.imgbox.com/6c/1b/vshVpr5V_o.png" width="556"> 
  <figcaption>
    图50 编辑后的yarn-site.xml 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:0;"><span style="color:#333333;">(5)通过</span><span style="color:#333333;">scp</span><span style="color:#333333;">来分发</span><span style="color:#333333;">hadoop</span><span style="color:#333333;">软件</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">使用命令将hadoop-01</span><span style="color:#333333;">上的</span><span style="color:#333333;">hadoop-2.10.0</span><span style="color:#333333;">文件夹分发到</span><span style="color:#333333;">hadoop-02</span><span style="color:#333333;">与</span><span style="color:#333333;">hadoop-03</span><span style="color:#333333;">上，命令如下所示：</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">scp -r /usr/local/hadoop-2.10.0/ hadoop-02.host.com:/usr/local</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">scp -r /usr/local/hadoop-2.10.0/ hadoop-03.host.com:/usr/local</span></p> 
<p style="margin-left:0cm;"><span style="color:#333333;">(6)</span><span style="color:#333333;">在</span><span style="color:#333333;">hadoop-01</span><span style="color:#333333;">上添加</span><span style="color:#333333;">hadoop</span><span style="color:#333333;">环境变量</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">sudo vi ~/.bashrc</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">在文件中加入这一行，如图</span><span style="color:#333333;">51</span><span style="color:#333333;">所示，修改完成后保存修改输入如下命令：</span><span style="color:#333333;">wq</span><span style="color:#333333;">。</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">export PATH=$PATH:/usr/local/hadoop-2.10.0/bin:/usr/local/hadoop-2.10.0/sbin</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="263" src="https://images2.imgbox.com/fa/02/hPzSwxCt_o.png" width="804"> 
  <figcaption>
    图51 添加hadoop环境变量 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;"><span style="color:#333333;">更新环境变量：</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">source ~/.bashrc</span></p> 
<p style="margin-left:0cm;"><span style="color:#333333;">(7)</span> <span style="color:#333333;">格式化</span><span style="color:#333333;">NameNode</span><span style="color:#333333;">（根据自己需求是否要格式化）</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">在</span><span style="color:#333333;">hadoop-01</span><span style="color:#333333;">输入如下命令：</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">/usr/local/hadoop-2.10.0/bin/hdfs namenode –format</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">切记：如果需要重新格式化</span><span style="color:#333333;">NameNode,</span><span style="color:#333333;">需要先将原来</span><span style="color:#333333;">NameNode</span><span style="color:#333333;">和</span><span style="color:#333333;">DataNode</span><span style="color:#333333;">下的文件全部删除，不然会报错，</span><span style="color:#333333;">NameNode</span><span style="color:#333333;">和</span><span style="color:#333333;">DataNode</span><span style="color:#333333;">所在目录是在</span><span style="color:#333333;">core-site.xml</span><span style="color:#333333;">中</span><span style="color:#333333;">hadoop.tmp.dir</span><span style="color:#333333;">、</span><span style="color:#333333;">dfs.namenode.name.dir</span><span style="color:#333333;">、</span><span style="color:#333333;">dfs.datanode.data.dir</span><span style="color:#333333;">属性配置的。</span></p> 
<p style="margin-left:0cm;"><span style="color:#333333;">(8)</span><span style="color:#333333;">启动</span><span style="color:#333333;">hdfs</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">按规划，</span><span style="color:#333333;">hdfs</span><span style="color:#333333;">服务器是部署在</span><span style="color:#333333;">hadoop-01</span><span style="color:#333333;">上的。因此，首先在</span><span style="color:#333333;">hadoop-01</span><span style="color:#333333;">上启动</span><span style="color:#333333;">hdfs</span><span style="color:#333333;">，输入如下命令：</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">/usr/local/hadoop-2.10.0/sbin/start-dfs.sh</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">查看启动情况，输入如下命令：jps</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="226" src="https://images2.imgbox.com/30/07/TqUFtaUv_o.png" width="1200"> 
  <figcaption>
    图52 成功启动hdfs 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"><span style="color:#333333;">(9)</span> <span style="color:#333333;">启动</span><span style="color:#333333;">YARN</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">按照规划，</span><span style="color:#333333;">yarn</span><span style="color:#333333;">服务器是部署在</span><span style="color:#333333;">hadoop-02</span><span style="color:#333333;">上的。因此，在</span><span style="color:#333333;">hadoop-02</span><span style="color:#333333;">上启动</span><span style="color:#333333;">yarn</span><span style="color:#333333;">，输入如下命令：</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">/usr/local/hadoop-2.10.0/sbin/start-yarn.sh</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">查看启动情况，输入命令：jps</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="224" src="https://images2.imgbox.com/47/c5/L9RwUnKz_o.png" width="1181"> 
  <figcaption>
    图53 成功启动yarn 
  </figcaption> 
 </figure> 
</div> 
<p style="margin-left:0cm;"><span style="color:#333333;">(10)</span> <span style="color:#333333;">启动日志服务器</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">按照规划，日志服务器是部署在</span><span style="color:#333333;">hadoop-03</span><span style="color:#333333;">上的。因此，在</span><span style="color:#333333;">hadoop-0</span><span style="color:#333333;">上启动日志服务，输入如下命令：</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">/usr/local/hadoop-2.10/sbin/mr-jobhistory-daemon.sh start historyserver</span></p> 
<p style="text-indent:33px;"><span style="color:#333333;">查看启动情况，输入命令：jps</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="151" src="https://images2.imgbox.com/f3/67/NnvbI1Qd_o.png" width="1157"> 
  <figcaption>
    图54 成功启动日志服务器 
  </figcaption> 
 </figure> 
</div> 
<h2 style="margin-left:0cm;"><span style="color:#000000;">11</span><span style="color:#000000;">、配置主机（安装虚拟机的机器）hosts</span></h2> 
<p style="text-indent:33px;"><span style="color:#000000;">(1)win + r</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">(2)输入drivers</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="237" src="https://images2.imgbox.com/8f/fa/h0lO0ppm_o.png" width="413"> 
  <figcaption>
    图55 编辑本机hosts 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;"><span style="color:#000000;"> (3)进入etc文件夹</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="615" src="https://images2.imgbox.com/db/a5/sIXCXepQ_o.png" width="963"> 
  <figcaption>
    图56 编辑hosts 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;"><span style="color:#000000;">(4)编辑hosts文件（切记，这个文件需要以管理员身份编辑）</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="180" src="https://images2.imgbox.com/02/8b/goJFmQfg_o.png" width="618"> 
  <figcaption>
    图57 编辑hosts 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;"><span style="color:#000000;">(5)添加3个虚拟机的IP地址与主机名</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="437" src="https://images2.imgbox.com/4d/60/INrLMFIK_o.png" width="1080"> 
  <figcaption>
    图58 添加虚拟机的ip地址与主机名 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;"> </p> 
<h2 style="margin-left:0cm;"><span style="color:#000000;">12</span><span style="color:#000000;">、查看HDFS Web页面</span></h2> 
<p style="text-indent:33px;"><span style="color:#000000;">网址：<a href="http://hadoop-01.host.com:50070/" rel="nofollow">http://hadoop-01.host.com:50070/</a></span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="851" src="https://images2.imgbox.com/ca/0e/HPoFWjn8_o.png" width="1200"> 
  <figcaption>
    图59 HDFS Web界面 
  </figcaption> 
 </figure> 
</div> 
<h2 style="margin-left:0cm;"><span style="color:#000000;">13</span><span style="color:#000000;">、查看YARN Web 页面</span></h2> 
<p style="text-indent:33px;"><span style="color:#000000;">网址：<a href="http://hadoop-02.host.com:8088/cluster" rel="nofollow">http://hadoop-02.host.com:8088/cluster</a></span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="787" src="https://images2.imgbox.com/92/97/uSx1IIO2_o.png" width="1200"> 
  <figcaption>
    图60 YARN Web 页面 
  </figcaption> 
 </figure> 
</div> 
<h2 style="margin-left:0cm;"><span style="color:#000000;">14</span><span style="color:#000000;">、测试hadoop的demo</span></h2> 
<p style="text-indent:33px;"><span style="color:#333333;">(1)</span><span style="color:#333333;">首先创建</span><span style="color:#333333;"> HDFS </span><span style="color:#333333;">上的用户目录：</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">hdfs dfs -mkdir -p /user/hadoop</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">(2)</span> <span style="color:#333333;">将</span><span style="color:#333333;"> /usr/local/Hadoop-2.10.0/etc/hadoop </span><span style="color:#333333;">中的配置文件作为输入文件复制到分布式文件系统中：</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">hdfs dfs -mkdir input</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">hdfs dfs -put /usr/local/hadoop</span><span style="color:#333333;">-2.10.0</span><span style="color:#000000;">/etc/hadoop/*.xml input</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">会看到一大串报错信息，但是不要怕，这些报错信息可以忽略（这些报错信息在以前的版本中是warning，总之不要理他就好了）。</span></p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="343" src="https://images2.imgbox.com/bb/6c/vSu4Arp2_o.png" width="963"> 
  <figcaption>
    图61 将文件传输到分布式系统 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;"><span style="color:#000000;">(3)</span> <span style="color:#333333;">通过查看</span><span style="color:#333333;"> DataNode </span><span style="color:#333333;">的状态（占用大小有改变），确认输入文件确实复制到了</span><span style="color:#333333;"> DataNode 中，如下图所示：</span></p> 
<p style="text-indent:33px;"> </p> 
<div style="text-align:center;"> 
 <figure class="image"> 
  <img alt="" height="409" src="https://images2.imgbox.com/c9/a3/PhiVHYhj_o.png" width="1200"> 
  <figcaption>
    图62  查看DataNode占用情况 
  </figcaption> 
 </figure> 
</div> 
<p style="text-indent:33px;"> </p> 
<p style="text-indent:33px;"><span style="color:#333333;">(4)</span><span style="color:#333333;">运行</span><span style="color:#333333;"> MapReduce </span><span style="color:#333333;">作业</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">hadoop jar /usr/local/hadoop-2.10.0/share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar grep input output 'dfs[a-z.]+'</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">成功输出如下所示</span></p> 
<p style="text-align:center;"><img alt="" height="635" src="https://images2.imgbox.com/21/15/P6a8ViOX_o.png" width="1200"></p> 
<p style="text-align:center;"><img alt="" height="652" src="https://images2.imgbox.com/d6/2e/8EzcrOPU_o.png" width="1200"></p> 
<p style="text-align:center;"><img alt="" height="463" src="https://images2.imgbox.com/66/4d/aKsEAnsg_o.png" width="1200"></p> 
<p style="text-align:center;"><img alt="" height="443" src="https://images2.imgbox.com/db/d2/MdBeZpLO_o.png" width="1186"></p> 
<p style="text-align:center;"><img alt="" height="616" src="https://images2.imgbox.com/36/50/xqNBGeUi_o.png" width="1011"></p> 
<h2> </h2> 
<h2><span style="color:#000000;">15、关闭Hadoop</span></h2> 
<p style="text-indent:33px;"><span style="color:#000000;">1</span><span style="color:#000000;">、在hadoop-02上关闭yarn</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">stop-yarn.sh</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">2</span><span style="color:#000000;">、在hadoop-01上关闭dfs</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">stop-dfs.sh</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">3</span><span style="color:#000000;">、在hadoop-03上关闭日志服务器</span></p> 
<p style="text-indent:33px;"><span style="color:#000000;">mr-jobhistory-daemon.sh stop historyserver</span></p> 
<p style="margin-left:0cm;"> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0e45ec4bfb1de0e29c19802f2717a694/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网络爬虫 | 京东全站数据采集（类目、店铺、商品、评论）——基于Python中Scrapy框架</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4279f798bfe5a7dafc4686b01bcab218/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">dlp2000 树莓派驱动方式，，</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>