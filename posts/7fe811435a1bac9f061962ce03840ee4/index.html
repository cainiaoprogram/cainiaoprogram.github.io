<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python &#43; appium搭建iOS自动测试环境 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python &#43; appium搭建iOS自动测试环境" />
<meta property="og:description" content="python 环境 安装Python包或者anaconda都可以 appium-deskop （Appium Server GUI） 通过UI操作方式开启Appium Server的工具，mac选择dmg下载安装
下载地址：https://github.com/appium/appium-desktop/releases/tag/v1.22.0 appium-inspector iOS元素定位工具，mac选择dmg下载安装
下载地址：https://github.com/appium/appium-inspector/releases appium-doctor 检查appium自动测试环境的工具
命令行安装
npm install -g appium-doctor 完成以上步骤之后进行初步环境检查 包括node.js、Carthage、idb等
命令：
appium-doctor --ios
检查结果打钩✅的说明没问题，有打叉❌的说明没有安装或环境变量没有配置，根据提示进行安装后再次检查，直到 Everything looks good
WebDriverAgent 配置修改 在已下载安装好的appium-desktop的目录下找到WebDriverAgent，涉及修改，避免改错，可以把appium-webdriveragent目录整体备份打开安装目录下的WebDriverAgent.xcodeproj，默认会用xcode打开需要修改2个地方 添加账户，使用个人的appleID即可，登录成功之后选择已登录的账户
分别修改【WebDriverAgentLib】和【WebDriverAgentRunner】的Bundle Identifier：选择Build Setting–&gt;Bundle Identifier
在原有的签名字符上添加部分字符即可，如com.facebook.WebDriverAgentRunner9527回到Signing &amp; Capability选项，验证修改后的签名可用 将签名后的WebDriverAgent 安装到真机 完成以上步骤，在xcode的WebDriverAgent.xcodeproj 中选择用数据线连接的真机设备，Command&#43;u执行安装WebDriverAgent到手机
等待安装成功手机端会出现一个WebDriverAgent的APP 如果build 成功但无法安装的，需要在手机端允许来自这个apple id的应用程序安装：Setting-&gt;General-&gt;VPN&amp;Device Management中设置为允许 appium-inspector 元素定位工具使用 完成以上步骤，即可在真机上启动APP进行元素定位
开启appium的服务，在mac上打开已安装的appium-deskop，Host 默认本地，端口默认4723，端口冲突可修改
开启appium-inspector，填写已开启的端口，填写Remote Path,填写设备的信息，然后Start Session，启动APP
开启成功之后，就可以开始进行元素定位操作了
python 驱动WebDriverAgent 进行自动测试 安装Appium-Python-Client，python的appium三方库,需要python 3.7&#43;
pip install Appium-Python-Client
创建驱动，驱动设备打开APP,旧的desired_caps已弃用，改为AppiumOptions加载设备信息
from appium import webdriver option = AppiumOptions() desired_caps = dict() desired_caps[&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7fe811435a1bac9f061962ce03840ee4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-06T14:00:10+08:00" />
<meta property="article:modified_time" content="2022-12-06T14:00:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python &#43; appium搭建iOS自动测试环境</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="python__0"></a>python 环境</h3> 
<ul><li>安装Python包或者anaconda都可以</li></ul> 
<h3><a id="appiumdeskop_Appium_Server_GUI_2"></a>appium-deskop （Appium Server GUI）</h3> 
<p>通过UI操作方式开启Appium Server的工具，mac选择dmg下载安装</p> 
<ul><li>下载地址：https://github.com/appium/appium-desktop/releases/tag/v1.22.0</li></ul> 
<h3><a id="appiuminspector_6"></a>appium-inspector</h3> 
<p>iOS元素定位工具，mac选择dmg下载安装</p> 
<ul><li>下载地址：https://github.com/appium/appium-inspector/releases</li></ul> 
<h3><a id="appiumdoctor_10"></a>appium-doctor</h3> 
<p>检查appium自动测试环境的工具</p> 
<ul><li>命令行安装<br> <code>npm install -g appium-doctor </code></li></ul> 
<h3><a id="_15"></a>完成以上步骤之后进行初步环境检查</h3> 
<p>包括node.js、Carthage、idb等<br> 命令：</p> 
<ul><li> <p><code>appium-doctor --ios</code></p> </li><li> <p>检查结果打钩✅的说明没问题，有打叉❌的说明没有安装或环境变量没有配置，根据提示进行安装后再次检查，直到 Everything looks good</p> </li><li> <p><img src="https://images2.imgbox.com/41/4a/i1zCtpKO_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<h3><a id="WebDriverAgent__24"></a>WebDriverAgent 配置修改</h3> 
<ul><li>在已下载安装好的appium-desktop的目录下找到WebDriverAgent，涉及修改，避免改错，可以把appium-webdriveragent目录整体备份</li><li>打开安装目录下的WebDriverAgent.xcodeproj，默认会用xcode打开</li><li>需要修改2个地方</li></ul> 
<ol><li> <p>添加账户，使用个人的appleID即可，登录成功之后选择已登录的账户<br> <img src="https://images2.imgbox.com/a8/c5/HtbQaFbb_o.png" alt="在这里插入图片描述"></p> </li><li> <p>分别修改【WebDriverAgentLib】和【WebDriverAgentRunner】的Bundle Identifier：选择Build Setting–&gt;Bundle Identifier</p> </li></ol> 
<ul><li>在原有的签名字符上添加部分字符即可，如com.facebook.WebDriverAgentRunner9527</li><li>回到Signing &amp; Capability选项，验证修改后的签名可用</li></ul> 
<h3><a id="WebDriverAgent__36"></a>将签名后的WebDriverAgent 安装到真机</h3> 
<p>完成以上步骤，在xcode的WebDriverAgent.xcodeproj 中选择用数据线连接的真机设备，<code>Command+u</code>执行安装WebDriverAgent到手机</p> 
<ul><li>等待安装成功手机端会出现一个WebDriverAgent的APP</li></ul> 
<p><img src="https://images2.imgbox.com/04/5b/DhcS6Br9_o.png" alt="在这里插入图片描述"></p> 
<ul><li>如果build 成功但无法安装的，需要在手机端允许来自这个apple id的应用程序安装：Setting-&gt;General-&gt;VPN&amp;Device Management中设置为允许</li></ul> 
<h3><a id="appiuminspector__44"></a>appium-inspector 元素定位工具使用</h3> 
<p>完成以上步骤，即可在真机上启动APP进行元素定位</p> 
<ul><li> <p>开启appium的服务，在mac上打开已安装的appium-deskop，Host 默认本地，端口默认4723，端口冲突可修改</p> </li><li> <p>开启appium-inspector，填写已开启的端口，填写Remote Path,填写设备的信息，然后Start Session，启动APP</p> </li><li> <p><img src="https://images2.imgbox.com/af/e4/iKYiZcxH_o.png" alt="在这里插入图片描述"></p> </li><li> <p>开启成功之后，就可以开始进行元素定位操作了</p> </li></ul> 
<h3><a id="python_WebDriverAgent__54"></a>python 驱动WebDriverAgent 进行自动测试</h3> 
<ul><li> <p>安装Appium-Python-Client，python的appium三方库,需要python 3.7+</p> </li><li> <p><code>pip install Appium-Python-Client</code></p> </li><li> <p>创建驱动，驱动设备打开APP,旧的desired_caps已弃用，改为AppiumOptions加载设备信息</p> </li></ul> 
<pre><code>from appium import webdriver

option = AppiumOptions()
desired_caps = dict()
desired_caps["platformName"] = "iOS"
desired_caps["platformVersion"] = "15.2"
desired_caps["deviceName"] = "iPhone XR"
desired_caps["app"] = "test.xxx.xxx"
#设备的udid
desired_caps["udid"] = "xxx.xxx.xx"
option.load_capabilities(desired_caps)
driver=webdriver.Remote(X_ios.remote_addr, options=option)

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2381833198173903394ed826b3e91c78/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Leetcode 第二轮刷题日记】LeetcodeTOP100&#43;高频题整理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a9e8f2181e33409eb4b2b244f1343218/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">kafka基本架构以及参数调优</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>