<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>eclipse中加载C/C&#43;&#43;源文件生成对应的so文件(图文教程) 2020最新 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="eclipse中加载C/C&#43;&#43;源文件生成对应的so文件(图文教程) 2020最新" />
<meta property="og:description" content="准备工作： 确保eclipse正确配置了ndk开发环境；
第一步、新建一个安卓项目
第二步、添加一个ndk支持
第三步、在确认系统配置了ndk的环境变量情况下引入jni支持；
第四步、在jni文件夹下创建（.c、.h、Android.mk、Application.mk）等文件；
1、Application.mk文件解析
====== Application.mk ============ #默认，不做修改； APP_CFLAGS &#43;= -fexceptions #默认，不做修改； APP_STL := gnustl_static #应用程序平台 APP_PLATFORM := android-19 #APP_ABI := all 表示编译全平台的； #APP_ABI := armeabi,mips,x86 表示编译armeabi， mips和x86三个平台的； APP_ABI := armeabi armeabi-v7a 2、Android.mk文件解析
====== Android.mk ============ #这个mk文件标识了两个模块，一个是共享库so文件，一个是bin文件 #第一个模块编译的是共享的so库 # 这个基本上就是个固定的格式了，放在 Android.mk的一个个有效行，表示本文件的路径。 LOCAL_PATH := $(call my-dir) #清除之前定义的 LOCAL_XXX 变量，通常每个模块都要写一次。 include $(CLEAR_VARS) # 模块名，本例中 LOCAL_MODULE := util ，生成的共享库文件 libutil.so LOCAL_MODULE := util # 模块中的源文件列表 LOCAL_SRC_FILES := UninstalledObserver.c kesyPrint.c # 预先定义的宏定义，预编译时使用到。这里定义了 KE_DEBUG 宏 #KE_DEBUG :print log when it is defined LOCAL_CFLAGS &#43;= -DKE_DEBUG # 引用的链接库，和linux命令行一样， -L后接寻找库的目录， -l后接库的名称，本例中是log LOCAL_LDLIBS &#43;= -L$(SYSROOT)/usr/lib -llog # BUILD_SHARED_LIBRARY表示编译的是so共享库 # BUILD_STATIC_LIBRARY 编译静态库 # BUILD_EXECUTABLE 编译可执行文件 include $(BUILD_SHARED_LIBRARY) 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9113c6ae09bab94be437f2680da2c740/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-12T11:15:12+08:00" />
<meta property="article:modified_time" content="2021-01-12T11:15:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">eclipse中加载C/C&#43;&#43;源文件生成对应的so文件(图文教程) 2020最新</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>准备工作：</h3> 
<p>确保eclipse正确配置了ndk开发环境；</p> 
<p><strong>第一步、新建一个安卓项目</strong></p> 
<p><img alt="" height="379" src="https://images2.imgbox.com/59/67/d3NMuiEK_o.png" width="675"></p> 
<p><strong>第二步、添加一个ndk支持</strong></p> 
<p><img alt="" height="378" src="https://images2.imgbox.com/f8/5c/2XcGn1lK_o.png" width="671"></p> 
<p><strong>第三步、在确认系统配置了ndk的环境变量情况下引入jni支持；</strong></p> 
<p><img alt="" height="372" src="https://images2.imgbox.com/f2/ab/MSkkJnBz_o.png" width="661"></p> 
<p><strong>第四步、在jni文件夹下创建（.c、.h、Android.mk、Application.mk）等文件；</strong></p> 
<p>1、Application.mk文件解析</p> 
<pre><code>====== Application.mk  ============
#默认，不做修改；
APP_CFLAGS += -fexceptions  

#默认，不做修改；
APP_STL := gnustl_static

#应用程序平台
APP_PLATFORM := android-19

#APP_ABI := all 表示编译全平台的；
#APP_ABI := armeabi,mips,x86 表示编译armeabi， mips和x86三个平台的；
APP_ABI := armeabi armeabi-v7a  </code></pre> 
<p>2、Android.mk文件解析</p> 
<pre><code>====== Android.mk ============
#这个mk文件标识了两个模块，一个是共享库so文件，一个是bin文件

#第一个模块编译的是共享的so库

# 这个基本上就是个固定的格式了，放在 Android.mk的一个个有效行，表示本文件的路径。
LOCAL_PATH := $(call my-dir)

#清除之前定义的 LOCAL_XXX 变量，通常每个模块都要写一次。
include $(CLEAR_VARS)

# 模块名，本例中 LOCAL_MODULE    := util ，生成的共享库文件 libutil.so
LOCAL_MODULE    := util

# 模块中的源文件列表
LOCAL_SRC_FILES := UninstalledObserver.c kesyPrint.c 

# 预先定义的宏定义，预编译时使用到。这里定义了 KE_DEBUG 宏
#KE_DEBUG :print log when it is defined
LOCAL_CFLAGS += -DKE_DEBUG

# 引用的链接库，和linux命令行一样， -L后接寻找库的目录， -l后接库的名称，本例中是log
LOCAL_LDLIBS += -L$(SYSROOT)/usr/lib -llog

# BUILD_SHARED_LIBRARY表示编译的是so共享库
# BUILD_STATIC_LIBRARY 编译静态库
# BUILD_EXECUTABLE 编译可执行文件 
include $(BUILD_SHARED_LIBRARY)</code></pre> 
<p>2.h文件：.c文件里用到的方法（类似java里的接口定义)和结构体(类似java里的实体类)的定义；</p> 
<p><img alt="" height="383" src="https://images2.imgbox.com/70/b2/dkhzdP0Y_o.png" width="681"></p> 
<p><strong>第五步、右键运行安卓项目BuildProject，程序会自动在lib下生成你需要的SO；</strong></p> 
<p><img alt="" height="386" src="https://images2.imgbox.com/33/c5/OsTqEpMK_o.png" width="685"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/303762b56f00a2b6cbce47a4b401596f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VS2019头文件#include ＜stdio.h＞报错</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d697e1a62d171ac6d528029a736715d5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[msi]Cannot open database file. System error -2147287035</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>