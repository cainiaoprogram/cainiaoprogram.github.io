<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>《深入浅出WPF》——资源学习 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="《深入浅出WPF》——资源学习" />
<meta property="og:description" content="文章目录 一、前言二、资源1. WPF对象级资源的定义与查找2. 且“静”且“动”用资源3. 向程序添加二进制资源4. 使用Pack URI路径访问二进制资源 三、总结 一、前言 我们把有用的东西称为资源。“兵马未动，粮草先行”——程序中的各种数据就是算法的原料和粮草。程序中可以存放数据的地方有许多，可以放在数据库里、可以存储在变量里。介于数据库存储和变量存储之间，我们还可以把数据存储在程序主体之外的文件里。外部文件与程序主体分离，这就有可能丢失或损坏，为了避免丢失或损坏，编译器允许我们把外部文件编译进程序主体、成为程序主体不可分割的一部分，这就是传统意义上的程序资源（也称为二进制资源）。
WPF不但支持程序级的传统资源，同时还推出了独具特色的对象级资源，每个界面元素都可以携带自己的资源并可被自己的子级元素共享。比如各种模板（Template）、程序样式（Style）和主题（Themes）就经常放在对象级资源里。这样一来，在WPF程序中数据就分为四个等级存储了：数据库里的数据相当于放在仓库里，资源文件里的数据就相当于放在旅行箱里，WPF对象资源里的数据相当于放在随身携带的背包里，变量中的数据相当于拿在手里。
二、资源 1. WPF对象级资源的定义与查找 每个WPF的界面元素都具有一个名为Resources的属性，这个属性继承自FrameworkElement类，其类型为ResourceDictionary。ResourceDictionary能够以“键-值”对的形式存储资源，当需要使用某个资源时，使用“键-值”对可以索引到资源对象。在保存资源时，ResourceDictionary视资源对象为Object类型，所以在使用资源时先要对资源对象进行类型转换，XAML编译器能够根据标签的Attribute自动识别资源类型，如果类型不对就会抛出异常，但在C#代码里检索到资源对象后，类型转换的事情就只能由我们自己来做了。
在之前的WPF介绍中说过，XAML中的标签元素对应到后台C#代码，可以看作是对象的实例化。
也就是XAML中的&lt;xxx/&gt; 相当于C#中的 xxx x = new xxx();
这样理解有什么好处呢？
至少我第一次接触XAML，看到Resource中加各种各样的东西是很不习惯的。
而将Resources中添加元素看成上述形式后，
其实就是 ResourceDictionary rd = new ResourceDictionary();
rd.Add(a); rd.Add(b);…
这不是和后台代码对应起来了么？
而且查看ResourceDictionary类型发现它就是一个通用集合类型。
ResourceDictionary可以存储任意类型的对象。在XAML代码中向Resources添加资源时需要把正确的名称空间引入到XAML代码中。看个例子：
&lt;Window x:Class=&#34;WpfResourceDemo.MainWindow&#34; xmlns=&#34;http://schemas.microsoft.com/winfx/2006/xaml/presentation&#34; xmlns:x=&#34;http://schemas.microsoft.com/winfx/2006/xaml&#34; xmlns:d=&#34;http://schemas.microsoft.com/expression/blend/2008&#34; xmlns:mc=&#34;http://schemas.openxmlformats.org/markup-compatibility/2006&#34; xmlns:local=&#34;clr-namespace:WpfResourceDemo&#34; xmlns:sys=&#34;clr-namespace:System;assembly=mscorlib&#34; mc:Ignorable=&#34;d&#34; Title=&#34;Resource&#34; Height=&#34;250&#34; Width=&#34;400&#34;&gt; &lt;Window.Resources&gt; &lt;ResourceDictionary&gt; &lt;sys:String x:Key=&#34;str&#34;&gt; 床前明月光，疑是地上霜。 &lt;/sys:String&gt; &lt;sys:Double x:Key=&#34;db1&#34;&gt;3.1415926&lt;/sys:Double&gt; &lt;/ResourceDictionary&gt; &lt;/Window.Resources&gt; &lt;StackPanel&gt; &lt;TextBlock Text=&#34;{StaticResource ResourceKey=str}&#34; Margin=&#34;5&#34;/&gt; &lt;!--TextBlock Text=&#34;{StaticResource ResourceKey=db1}&#34; Margin=&#34;5&#34;/--&gt; &lt;/StackPanel&gt; &lt;/Window&gt; 首先将System命名空间引入XAML代码并映射为sys命名空间，然后在Window." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/db9febd80adb2fc8ee9709381eb29f93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-20T13:18:43+08:00" />
<meta property="article:modified_time" content="2022-08-20T13:18:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">《深入浅出WPF》——资源学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、前言</a></li><li><a href="#_6" rel="nofollow">二、资源</a></li><li><ul><li><a href="#1_WPF_7" rel="nofollow">1. WPF对象级资源的定义与查找</a></li><li><a href="#2__90" rel="nofollow">2. 且“静”且“动”用资源</a></li><li><a href="#3__131" rel="nofollow">3. 向程序添加二进制资源</a></li><li><a href="#4_Pack_URI_201" rel="nofollow">4. 使用Pack URI路径访问二进制资源</a></li></ul> 
  </li><li><a href="#_255" rel="nofollow">三、总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、前言</h2> 
<p>我们把有用的东西称为资源。“兵马未动，粮草先行”——程序中的各种数据就是算法的原料和粮草。程序中可以存放数据的地方有许多，可以放在数据库里、可以存储在变量里。介于数据库存储和变量存储之间，我们还可以把数据存储在程序主体之外的文件里。外部文件与程序主体分离，这就有可能丢失或损坏，为了避免丢失或损坏，<strong>编译器允许我们把外部文件编译进程序主体、成为程序主体不可分割的一部分，这就是传统意义上的程序资源（也称为二进制资源）</strong>。</p> 
<p><strong>WPF不但支持程序级的传统资源，同时还推出了独具特色的对象级资源，每个界面元素都可以携带自己的资源并可被自己的子级元素共享</strong>。比如各种模板（Template）、程序样式（Style）和主题（Themes）就经常放在对象级资源里。这样一来，在WPF程序中数据就分为四个等级存储了：数据库里的数据相当于放在仓库里，资源文件里的数据就相当于放在旅行箱里，WPF对象资源里的数据相当于放在随身携带的背包里，变量中的数据相当于拿在手里。</p> 
<hr> 
<h2><a id="_6"></a>二、资源</h2> 
<h3><a id="1_WPF_7"></a>1. WPF对象级资源的定义与查找</h3> 
<p>每个WPF的界面元素都具有一个名为Resources的属性，这个属性继承自FrameworkElement类，其类型为ResourceDictionary。ResourceDictionary能够以“键-值”对的形式存储资源，当需要使用某个资源时，使用“键-值”对可以索引到资源对象。在保存资源时，ResourceDictionary视资源对象为Object类型，所以在使用资源时先要对资源对象进行类型转换，XAML编译器能够根据标签的Attribute自动识别资源类型，如果类型不对就会抛出异常，但在C#代码里检索到资源对象后，类型转换的事情就只能由我们自己来做了。</p> 
<blockquote> 
 <p>在之前的WPF介绍中说过，XAML中的标签元素对应到后台C#代码，可以看作是对象的实例化。<br> 也就是XAML中的&lt;xxx/&gt; 相当于C#中的 xxx x = new xxx();<br> 这样理解有什么好处呢？<br> 至少我第一次接触XAML，看到Resource中加各种各样的东西是很不习惯的。<br> 而将Resources中添加元素看成上述形式后，<br> 其实就是 ResourceDictionary rd = new ResourceDictionary();<br> rd.Add(a); rd.Add(b);…<br> 这不是和后台代码对应起来了么？<br> 而且查看ResourceDictionary类型发现它就是一个通用集合类型。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/b2/af/ACANswWF_o.png" alt="在这里插入图片描述"></p> 
<p>ResourceDictionary可以存储任意类型的对象。在XAML代码中向Resources添加资源时需要把正确的名称空间引入到XAML代码中。看个例子：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window</span> <span class="token attr-name"><span class="token namespace">x:</span>Class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>WpfResourceDemo.MainWindow<span class="token punctuation">"</span></span>
        <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml/presentation<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/expression/blend/2008<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>mc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.openxmlformats.org/markup-compatibility/2006<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>local</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:WpfResourceDemo<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>sys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:System;assembly=mscorlib<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">mc:</span>Ignorable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d<span class="token punctuation">"</span></span>
        <span class="token attr-name">Title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Resource<span class="token punctuation">"</span></span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window.Resources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ResourceDictionary</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sys:</span>String</span> <span class="token attr-name"><span class="token namespace">x:</span>Key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>str<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
                床前明月光，疑是地上霜。
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">sys:</span>String</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">sys:</span>Double</span> <span class="token attr-name"><span class="token namespace">x:</span>Key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>db1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>3.1415926<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">sys:</span>Double</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ResourceDictionary</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window.Resources</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StackPanel</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBlock</span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{StaticResource ResourceKey=str}<span class="token punctuation">"</span></span> <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--TextBlock Text="{StaticResource ResourceKey=db1}" Margin="5"/--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>StackPanel</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>首先将System命名空间引入XAML代码并映射为sys命名空间，然后在Window.Resources属性里添加了两个资源条目，一个是string类型实例、一个是double类型实例，最后用两个TextBlock来消费这些资源（被注释掉的代码会因为数据类型不匹配而抛出异常）。程序运行效果如下：<br> <img src="https://images2.imgbox.com/02/87/ptZrSmkb_o.png" alt="在这里插入图片描述"><br> 因为在XAML代码中可以对集合类型内容及标签扩展进行简写，所以上面代码更常见的书写格式是这样的：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBlock</span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{StaticResource str}<span class="token punctuation">"</span></span> <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p><strong>在检索资源时，先查找控件自己的Resources属性，如果没有这个资源程序会沿着逻辑树向上一级控件查找，如果连最顶层容器都没有这个资源，程序就会去查找Application.Resources（也就是程序的顶级资源），如果还没找到，那就只好抛出异常了</strong>。这就好比每个界面元素都有自己的一个背包，里面可能装着各种各样的资源，使用的时候打开找一找，如果没有找到还可以去翻看上一层控件的背包，甚至找到资源或报告没有这个资源为止。</p> 
<blockquote> 
 <p>表面上看就是逐级向上寻找；这种设计非常有用，在一个窗体中（或者一块布局中）想保持同一风格，那就在顶层元素的Resource中添加统一的样式，而内部的子元素Resource不予内容，这样该窗体（布局）中的内容就都是Resource中的样式了。</p> 
</blockquote> 
<p>如果想在C#代码中使用定义在XAML代码里的资源，大概格式是这样：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Window_Loaded</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name"><span class="token keyword">string</span></span> text <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">FindResource</span><span class="token punctuation">(</span><span class="token string">"str"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>textBlock1<span class="token punctuation">.</span>Text <span class="token operator">=</span> text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>或者你明确知道资源放在哪的资源词典里，就可以这样检索资源：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Window_Loaded</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name"><span class="token keyword">string</span></span> text <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">)</span><span class="token keyword">this</span><span class="token punctuation">.</span>Resources<span class="token punctuation">[</span><span class="token string">"str"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>textBlock1<span class="token punctuation">.</span>Text <span class="token operator">=</span> text<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>你可能会想：如果把资源像CSS或JavaScript那样放在独立的文件中，使用时成套使用、重用时便于分发岂不更好？WPF的资源当然能够做到这一点，ResourceDictionary具有一个名为Source的属性，只要把包含资源定义的文件路径赋值给这个属性就一切搞定！举个例子，http://wpf.codeplex（现在已经关了）中包含了很多官方/半官方的WPF资源，其中包括WPF工具包和一组非常漂亮的程序皮肤，这些皮肤以资源的形式放在XAML文件中，使用时仅需把相应的XAML文件添加进项目并使用Source属性进行引用，你的程序立刻就变得光鲜照人。</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window.Resources</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ResourceDictionary</span> <span class="token attr-name">Source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ShinyRed.xaml<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window.Resources</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<blockquote> 
 <p>这节叫对象级资源，我觉得看完后就要产生这样一种“每个元素是一个实例（一个对象），它携带一个小背包，里面装的就是对象级资源”的思想。</p> 
</blockquote> 
<h3><a id="2__90"></a>2. 且“静”且“动”用资源</h3> 
<p>当资源被存储进资源词典后，我们可以用两种方式来使用这些资源——静态方式和动态方式。Static和Dynamic，当这对词一同出现的时候Static指的是程序的非执行状态而Dynamic指的是程序运行状态。对于资源的使用，Static和Dynamic也是这个意思。静态资源使用（StaticResource）指的是在程序载入内存时对资源的一次性使用，之后就不再去访问这个资源了；动态资源使用（DynamicResource）指的是在程序运行过程中仍然会去访问资源。显然，如果你确定某些资源只在程序初始化的时候使用一次、之后不会再改变，就应该使用StaticResource，而程序运行过程中还有可能改变的资源应该以DynamicResource形式使用。拿程序的主题来举例，如果程序皮肤的颜色在运行中始终不变，以StaticResource形式来使用资源就可以了；如果程序运行过程中允许用户更改程序皮肤的配色方案则必须以DynamicResource方式来使用资源。</p> 
<p>下面例子，在Window的资源词典里放置了两个TextBlock类型资源并分别以StaticResource和DynamicResource方式来使用之：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window</span> <span class="token attr-name"><span class="token namespace">x:</span>Class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>WpfResourceDemo.MainWindow<span class="token punctuation">"</span></span>
        <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml/presentation<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/expression/blend/2008<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>mc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.openxmlformats.org/markup-compatibility/2006<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>local</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:WpfResourceDemo<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>sys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:System;assembly=mscorlib<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">mc:</span>Ignorable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d<span class="token punctuation">"</span></span>
        <span class="token attr-name">Title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Resource<span class="token punctuation">"</span></span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window.Resources</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ResourceDictionary</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBlock</span> <span class="token attr-name"><span class="token namespace">x:</span>Key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>res1<span class="token punctuation">"</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>举头望明月<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBlock</span> <span class="token attr-name"><span class="token namespace">x:</span>Key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>res2<span class="token punctuation">"</span></span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>举头望明月<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ResourceDictionary</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window.Resources</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StackPanel</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">Content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{StaticResource res1}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">Content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{DynamicResource res2}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Button</span> <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span> <span class="token attr-name">Content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Update<span class="token punctuation">"</span></span> <span class="token attr-name">Click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Button_Click<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>StackPanel</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>界面上的第三个按钮负责在程序过程当中对资源词典里的两个资源进行改变：</p> 
<pre><code class="prism language-csharp">        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Button_Click</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> sender<span class="token punctuation">,</span> <span class="token class-name">RoutedEventArgs</span> e<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Resources<span class="token punctuation">[</span><span class="token string">"res1"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> Text <span class="token operator">=</span> <span class="token string">"低头思故乡"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Resources<span class="token punctuation">[</span><span class="token string">"res2"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">TextBlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> Text <span class="token operator">=</span> <span class="token string">"低头思故乡"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>实际上，因为第一个按钮是以静态方式使用资源，所以尽管资源已经被更新它也不会知道。运行程序、单击第三个按钮，效果如下：<br> <img src="https://images2.imgbox.com/73/49/oaVW9Whw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__131"></a>3. 向程序添加二进制资源</h3> 
<p>对于资源这个概念，很多WPF的初学者会感到迷惑，因为早在WPF出现之前Windows应用程序就已经能够携带资源了。Windows应用程序资源的道理与WinZip或WinRAR压缩包的道理差不多，实际上是把一些程序必须使用的资源与应用程序自身打包在一起，这样资源就不会意外丢失了（副作用就是应用程序体积会变大）。常见的应用程序资源有图标、图片、文本、音频、视频等，各种编程语言的编译器或资源编译器都有能力把这些文件编译进目标文件（最终的.exe或.dll文件），资源文件在目标文件里以二进制数据的形式存在、形成目标文件的资源段（Resource Section），使用时数据会被提取出来。</p> 
<p>为了不把资源词典里的资源和应用程序内嵌的资源搞混，我们明确地称呼资源词典里的资源为“WPF资源”或“对象资源”，称呼应用程序的内嵌资源为“程序集资源”或“二进制资源”。特别提醒一点，WPF程序中写在&lt;Application.Resources&gt;…&lt;/ApplicationResources&gt;标签内的资源仍然是WPF资源而非二进制资源。</p> 
<p>下面看看如何向WPF程序添加二进制资源并使用它们。</p> 
<p>如果要添加的资源是字符串而非文件，我们可以使用应用程序Properties命名空间中的Resource.resx资源文件。打开资源文件的方法是在项目管理器中展开Properties节点并双击Resources.resx。<br> <img src="https://images2.imgbox.com/31/d7/pdS0WK6M_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0e/4d/nIhwit20_o.png" alt="在这里插入图片描述"><br> Resources.resx文件内容的组织形式也是“键-值”对，编译后，Resources.resx会形成Properties命名空间中的Resource类，使用这个类的方法或属性就能获取资源。为了让XAML编译器能够访问这个类，一定要把Resources.resx的访问级别由Internal改为Public。利用资源文件编辑器，可以在资源文件的字符串组里添加两个条目，然后分别在XAML和C#代码中访问它们。<br> <img src="https://images2.imgbox.com/48/32/a7XtE4be_o.png" alt="在这里插入图片描述"></p> 
<p>在XAML代码中使用Resources.resx中的资源，先要把程序的Properties命名空间映射为XAML命名空间，然后使用x:Static标签扩展来访问资源：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window</span> <span class="token attr-name"><span class="token namespace">x:</span>Class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>WpfResourceDemo.MainWindow<span class="token punctuation">"</span></span>
        <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml/presentation<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/expression/blend/2008<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>mc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.openxmlformats.org/markup-compatibility/2006<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>local</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:WpfResourceDemo<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>sys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:System;assembly=mscorlib<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:WpfResourceDemo.Properties<span class="token punctuation">"</span></span>	<span class="token attr-name">映射Properties空间</span>
        <span class="token attr-name"><span class="token namespace">mc:</span>Ignorable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d<span class="token punctuation">"</span></span>
        <span class="token attr-name">Title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Resource<span class="token punctuation">"</span></span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Grid</span> <span class="token attr-name">Margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>5<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Grid.ColumnDefinitions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ColumnDefinition</span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Auto<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ColumnDefinition</span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ColumnDefinition</span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>*<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Grid.ColumnDefinitions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Grid.RowDefinitions</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RowDefinition</span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>23<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RowDefinition</span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RowDefinition</span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>23<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Grid.RowDefinitions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBlock</span> <span class="token attr-name">Text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{x:Static prop:Resources.UserName}<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBlock</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>textBlockPassword<span class="token punctuation">"</span></span> <span class="token attr-name">Grid.Row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBox</span> <span class="token attr-name">BorderBrush</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Black<span class="token punctuation">"</span></span> <span class="token attr-name">Grid.Column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextBox</span> <span class="token attr-name">BorderBrush</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Black<span class="token punctuation">"</span></span> <span class="token attr-name">Grid.Column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span> <span class="token attr-name">Grid.Row</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Grid</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>C#代码中访问Resources.resx中的资源与使用：</p> 
<pre><code class="prism language-csharp">		<span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>textBlockPassword<span class="token punctuation">.</span>Text <span class="token operator">=</span> Properties<span class="token punctuation">.</span>Resources<span class="token punctuation">.</span>Password<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>运行效果：<br> <img src="https://images2.imgbox.com/93/93/EMcwtHbL_o.png" alt="在这里插入图片描述"><br> 使用Resources.resx最大的好处就是便于程序的国际化、本地化。如果我想把界面改为英文版，只需要把资源的值改为相应的英文即可，如下图所示。<br> <img src="https://images2.imgbox.com/80/ce/DSm6Y8CF_o.png" alt="在这里插入图片描述"><br> 如果需要添加的资源不是字符串而是图标、图片、音频或视频，方法就不是使用Resources.resx了，WPF不支持这样做。在WPF中使用外部文件作为资源，仅需简单地将其加入项目即可。方法是在项目管理器中右击项目名称，在弹出菜单里选择Add→New Folder，按需要新建几层文件夹来组织资源，然后在恰当的文件夹右击，在弹出菜单里选择Add→Existing Item…，在文件对话框里选择文件后单击Add按钮，文件就以资源形式加入到项目中了。</p> 
<p>如果在程序中添加了一个音频文件和一张图片，如下图，结果文件的体积就会膨胀好几兆（音频文件是7.5MB、图片是928KB）：<br> <img src="https://images2.imgbox.com/07/8a/cOwnI5Yc_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/40/f8/rZtbNbuf_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注意：<br> 有一点要注意的是，如果想让外部文件编译进目标成为二进制资源，必须在属性窗口中把Build Action（生成操作）属性值设为Resource（资源）。并不是每种文件都会自动设为Resource的，比如图片会，mp3就不会（虽然上例中，我都是手动设为资源的），一般情况下如果Build Action属性被设为Resource，则Copy to Output Directory（复制到输出目录）属性就设为Do not copy（不复制）；如果不希望以资源的形式使用外部文件，可以把Build Action设为None，而把Copy to Output Directory设为Copy always。另外，Build Action属性的下拉列表里有一个颇具迷惑性的值Embedded Resource，不要选这个值。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/50/a0/9wseQOfT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4_Pack_URI_201"></a>4. 使用Pack URI路径访问二进制资源</h3> 
<p>好了！二进制资源已经被添加进我们的程序，怎样才能访问到它们呢？</p> 
<p>WPF对二进制资源的访问有自己的一套方法，称为Pack URI路径。WPF的Pack URI路径，你只需要记住这样的格式即可：</p> 
<pre><code class="prism language-xml">pack://application,,,[/程序集名称;][可选版本号;][文件夹名称/]文件名称
</code></pre> 
<p>而实际上因为pack://application,可以省略、程序集名称和版本号常使用缺省值，所以剩下的只有这个了：</p> 
<pre><code class="prism language-xml">[文件夹名称/]文件名称
</code></pre> 
<p>前面的例子中我们向资源中添加了一张名为5.png的图片，它在项目中的路径是Resources/5.png，原封不动的使用这个路径就可以访问此图片了。我们用这个图片填充一个&lt;Image/&gt;元素并把&lt;Image/&gt;元素作为窗体的背景：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Window</span> <span class="token attr-name"><span class="token namespace">x:</span>Class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>WpfResourceDemo.MainWindow<span class="token punctuation">"</span></span>
        <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml/presentation<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>x</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/winfx/2006/xaml<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.microsoft.com/expression/blend/2008<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>mc</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.openxmlformats.org/markup-compatibility/2006<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>local</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:WpfResourceDemo<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">xmlns:</span>sys</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clr-namespace:System;assembly=mscorlib<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">mc:</span>Ignorable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>d<span class="token punctuation">"</span></span>
        <span class="token attr-name">Title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Resource<span class="token punctuation">"</span></span> <span class="token attr-name">Height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>250<span class="token punctuation">"</span></span> <span class="token attr-name">Width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>400<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Grid</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Image</span> <span class="token attr-name"><span class="token namespace">x:</span>Name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ImageBg<span class="token punctuation">"</span></span> <span class="token attr-name">Source</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Resources/5.png<span class="token punctuation">"</span></span> <span class="token attr-name">Stretch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Fill<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token comment">&lt;!--Image x:Name="ImageBg" Source="pack://application:,,,/Resources/5.png" Stretch="Fill"/--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Grid</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Window</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<p>与之等价的C#代码如下：</p> 
<pre><code class="prism language-csharp">        <span class="token keyword">public</span> <span class="token function">MainWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">InitializeComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Uri</span> imgUri <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span><span class="token string">@"Resources/5.png"</span><span class="token punctuation">,</span> UriKind<span class="token punctuation">.</span>Relative<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Uri imgUri = new Uri(@"pack://application;,,,/Resources/5.png", UriKind.Absolute);</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>ImageBg<span class="token punctuation">.</span>Source <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BitmapImage</span><span class="token punctuation">(</span>imgUri<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> 
<p>运行效果如下：<br> <img src="https://images2.imgbox.com/c3/36/gQaT4N4e_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注意：<br> 在使用Pack URI路径时有几点需要注意：</p> 
 <ul><li>Pack URI使用从右向左的正斜线(/)表示路径。</li><li>使用缩略写法意味着是相对路径，C#代码中的UriKind必须为Relative而且代表根目录的/可以省略。</li><li>使用完整写法时是绝对路径，C#代码中的UriKind必须为Absolute并且代表根目录的/不能省略。</li><li>使用相对路径时可以借助类似DOS的语法进行导航，比如./代表同级目录、…/代表父级目录。</li></ul> 
</blockquote> 
<h2><a id="_255"></a>三、总结</h2> 
<p>资源章节篇幅不长，</p> 
<ul><li>理解对象级资源是啥</li><li>程序中要修改时用Dynamic动态使用，否则用Static</li><li>了解WPF中二进制资源的添加</li><li>如何用Uri来访问二进制资源</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d72703d71747ae7f1a1d3233aa50899b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JQ对复选框全选、获取复选框的值、回选</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a0eb3a8b2fbb04ec7bd36d9eddc4ee2d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue使用pinia管理数据 pinia 持久化存储</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>