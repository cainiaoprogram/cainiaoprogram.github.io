<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于微信小程序webview的使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于微信小程序webview的使用" />
<meta property="og:description" content="小程序 微信小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，同时具有出色的使用体验。同时提供一系列工具帮助开发者快速接入并完成小程序开发。关于如何注册配置就不多言了，本文主要还是体验了下web-view的功能。
web-view详解 有了这个组件之后，小程序可以很好的嵌入一些页面，可以环境小程序size告急的问题，同样也使开发更加便捷，毕竟小程序开发者基本都对前端开发较为了解。
web-view能力 说再多还是需要去看官方文档，web-view文档,
兼容 首先就需要注意：兼容问题，版本库和对应版本比例
基础库 1.6.4 开始支持，低版本需做兼容处理， 个人类型与海外类型的小程序暂不支持使用。 目前而言，基本80%的用户会升级微信，所以其实不必担心版本问题，官方截止2017-12-01提供的数据也说明88%的用户支持web-view。
使用 web-view 组件是一个可以用来承载网页的容器，会自动铺满整个小程序页面；
属性：src 是String类型，是一个网站的url，默认值是none，webview 指向网页的链接。需登录小程序管理后台配置域名白名单。
&lt;!-- wxml --&gt; &lt;!-- 指向微信公众平台首页的web-view --&gt; &lt;web-view src=&#34;https://mp.weixin.qq.com/&#34;&gt;&lt;/web-view&gt; 可以配合Page实例的onLoad方法来获取url的具体值，也就是一个微信小程序页面中只有一个web-view，但是这个web-view的内容可以根据上一个页面传递的参数来获取页面URL，后面会讲如何实践，
官方提供如下接口：
web-view和小程序的通信 1. 由小程序到`web-view`,其实本质上`WEB-VIEW`也是小程序的一个页面，所以小程序到`web-view`是正常的小程序间的通信，通过`wx.navigateTo`、`wx.redirectTo`，带上`url`参数,`query`参数就像正常`url`的参数一样跟着后面，然后在`web-view`的页面的`Page`实例里面通过`onLoad`的方法的参数来获取`url`的值，设置给`web-view`的`src`属性为改值即可。 2. 由`web-view`到小程序，由于在`web-view`的跳转通常是在`src`对应的网页中的操作来处理的，所以需要结合`jssdk`来处理，不需要`wx.config`配置，直接通过`script`标签来引入`https://res.wx.qq.com/open/js/jweixin-1.3.0.js`，就可以使用`wx.miniProgram.navigateTo`、`wx.miniProgram.navigateBack`、`wx.miniProgram.switchTab`、`wx.miniProgram.reLaunch`、`wx.miniProgram.redirectTo`接口，就像小程序之间的跳转一样，单是只能在当前小程序页面内跳转。
支持以下部分JSSDK接口图像、音频、摇一摇、地理位置等信息，具体可以查看web-view文档,不过这些需要通过wx.config来授权，就和服务号开发类似。用户分享时可获取当前&lt;web-view/&gt;的URL，即在onShareAppMessage回调中返回webViewUrl参数。 Page({ onShareAppMessage(options) { console.log(options.webViewUrl) } }) 在网页内可通过window.__wxjs_environment变量判断是否在小程序环境。 // web-view下的页面内 console.log(window.__wxjs_environment === &#39;miniprogram&#39;) // true
web-view实践 在目前实践了部分web-view的功能，
//index.js Page({ data: { url: &#39;https://test.com&#39; }, onLoad: function(options){ options.url ? this.setData({url: options.url}) : wx.navigateBack({delta: 2}); } }); //index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/33f8ee65d5948bbbc171070d9e7625d9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-12-04T14:30:58+08:00" />
<meta property="article:modified_time" content="2017-12-04T14:30:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于微信小程序webview的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="margin:20px 0px; font-weight:400; font-size:24px; line-height:inherit; color:rgb(51,51,51)"> <a target="_blank" href="http://link.zhihu.com/?target=http%3A//www.wxapp-union.com/" rel="nofollow noreferrer noopener noreferrer" class=" wrap external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all">小程序<span class="icon-external" style=""></span></a></h3> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 微信小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，同时具有出色的使用体验。同时提供一系列工具帮助开发者快速接入并完成小程序开发。关于如何注册配置就不多言了，本文主要还是体验了下<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code>的功能。</p> 
<h3 style="margin:20px 0px; font-weight:400; font-size:24px; line-height:inherit; color:rgb(51,51,51)"> web-view详解</h3> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 有了这个组件之后，小程序可以很好的嵌入一些页面，可以环境小程序<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>size</code>告急的问题，同样也使开发更加便捷，毕竟小程序开发者基本都对前端开发较为了解。</p> 
<h3 style="margin:20px 0px; font-weight:400; font-size:24px; line-height:inherit; color:rgb(51,51,51)"> web-view能力</h3> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 说再多还是需要去看官方文档，<a target="_blank" href="http://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/debug/wxadoc/dev/component/web-view.html" rel="nofollow noreferrer noopener noreferrer" class=" wrap external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all">web-view文档<span class="icon-external" style=""></span></a>,</p> 
<h3 style="margin:20px 0px; font-weight:400; font-size:24px; line-height:inherit; color:rgb(51,51,51)"> 兼容</h3> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 首先就需要注意：兼容问题，<a target="_blank" href="http://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/debug/wxadoc/dev/framework/client-lib.html" rel="nofollow noreferrer noopener noreferrer" class=" wrap external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all">版本库和对应版本比例<span class="icon-external" style=""></span></a></p> 
<blockquote style="padding-left:1.2em; margin:20px 0px; color:rgb(51,51,51); border-left:4px solid rgb(226,227,228); font-size:14px">
  基础库 1.6.4 开始支持，低版本需做兼容处理， 
 <br style=""> 个人类型与海外类型的小程序暂不支持使用。 
</blockquote> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 目前而言，基本<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>80%</code>的用户会升级微信，所以其实不必担心版本问题，官方截止<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>2017-12-01</code>提供的数据也说明<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>88%</code>的用户支持<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code>。</p> 
<h3 style="margin:20px 0px; font-weight:400; font-size:24px; line-height:inherit; color:rgb(51,51,51)"> 使用</h3> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> <code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code> 组件是一个可以用来承载网页的容器，会自动铺满整个小程序页面；</p> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 属性：<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>src</code> 是<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>String</code>类型，是一个网站的<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>url</code>，默认值是<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>none</code>，<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>webview</code> 指向网页的链接。需登录小程序管理后台配置域名白名单。</p> 
<div class="highlight" style=""> 
 <pre style='margin-top:1em; margin-bottom:1em; padding:10px; overflow:auto; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; font-size:14px; word-wrap:normal; background:rgb(246,246,246)'><code class="language-text" style='margin:0px; padding:0px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace'><span style=""></span>&lt;!-- wxml --&gt;
&lt;!-- 指向微信公众平台首页的web-view --&gt;
&lt;web-view src="https://mp.weixin.qq.com/"&gt;&lt;/web-view&gt;
</code></pre> 
</div> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 可以配合<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>Page</code>实例的<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>onLoad</code>方法来获取<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>url</code>的具体值，也就是一个微信小程序页面中只有一个<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code>，但是这个<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code>的内容可以根据上一个页面传递的参数来获取页面<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>URL</code>，后面会讲如何实践，</p> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> <br style=""> </p> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 官方提供如下接口：</p> 
<ul style="margin:20px 0px; padding:0px 0px 0px 40px; color:rgb(51,51,51); font-size:14px"><li style="list-style-type:disc; margin-top:10px; list-style-position:outside"><code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code>和小程序的通信</li></ul> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 1. 由小程序到`web-view`,其实本质上`WEB-VIEW`也是小程序的一个页面，所以小程序到`web-view`是正常的小程序间的通信，通过`wx.navigateTo`、`wx.redirectTo`，带上`url`参数,`query`参数就像正常`url`的参数一样跟着后面，然后在`web-view`的页面的`Page`实例里面通过`onLoad`的方法的参数来获取`url`的值，设置给`web-view`的`src`属性为改值即可。<br style=""> 2. 由`web-view`到小程序，由于在`web-view`的跳转通常是在`src`对应的网页中的操作来处理的，所以需要结合`jssdk`来处理，不需要`wx.config`配置，直接通过`script`标签来引入`<a target="_blank" href="http://link.zhihu.com/?target=https%3A//res.wx.qq.com/open/js/jweixin-1.3.0.js" rel="nofollow noreferrer noopener noreferrer" class=" external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all"><span class="invisible" style="font-size:0px; line-height:0; font-family:a; color:transparent; background-color:transparent">https://</span><span class="visible" style="">res.wx.qq.com/open/js/j</span><span class="invisible" style="font-size:0px; line-height:0; font-family:a; color:transparent; background-color:transparent">weixin-1.3.0.js</span><span class="ellipsis" style=""></span><span class="icon-external" style=""></span></a>`，就可以使用`wx.miniProgram.navigateTo`、`wx.miniProgram.navigateBack`、`wx.miniProgram.switchTab`、`wx.miniProgram.reLaunch`、`wx.miniProgram.redirectTo`接口，就像小程序之间的跳转一样，单是只能在当前小程序页面内跳转。</p> 
<ul style="margin:20px 0px; padding:0px 0px 0px 40px; color:rgb(51,51,51); font-size:14px"><li style="list-style-type:disc; margin-top:10px; list-style-position:outside">支持以下部分JSSDK接口图像、音频、摇一摇、地理位置等信息，具体可以查看<a target="_blank" href="http://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/debug/wxadoc/dev/component/web-view.html" rel="nofollow noreferrer noopener noreferrer" class=" wrap external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all">web-view文档<span class="icon-external" style=""></span></a>,不过这些需要通过<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>wx.config</code>来授权，就和服务号开发类似。</li><li style="list-style-type:disc; margin-top:10px; list-style-position:outside">用户分享时可获取当前<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>&lt;web-view/&gt;</code>的<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>URL</code>，即在<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>onShareAppMessage</code>回调中返回webViewUrl参数。</li></ul> 
<div class="highlight" style=""> 
 <pre style='margin-top:1em; margin-bottom:1em; padding:10px; overflow:auto; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; font-size:14px; word-wrap:normal; background:rgb(246,246,246)'><code class="language-text" style='margin:0px; padding:0px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace'><span style=""></span>Page({
  onShareAppMessage(options) {
    console.log(options.webViewUrl)
  }
}) 
</code></pre> 
</div> 
<ul style="margin:20px 0px; padding:0px 0px 0px 40px; color:rgb(51,51,51); font-size:14px"><li style="list-style-type:disc; margin-top:10px; list-style-position:outside">在网页内可通过window.__wxjs_environment变量判断是否在小程序环境。</li></ul> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> <code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>// web-view下的页面内</code> <code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>console.log(window.__wxjs_environment === 'miniprogram') // true</code></p> 
<h3 style="margin:20px 0px; font-weight:400; font-size:24px; line-height:inherit; color:rgb(51,51,51)"> web-view实践</h3> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 在目前实践了部分<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code>的功能，</p> 
<div class="highlight" style=""> 
 <pre style='margin-top:1em; margin-bottom:1em; padding:10px; overflow:auto; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; font-size:14px; word-wrap:normal; background:rgb(246,246,246)'><code class="language-text" style='margin:0px; padding:0px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace'><span style=""></span>//index.js
Page({
    data: {
       url: 'https://test.com'
    },
    onLoad: function(options){
        options.url ? this.setData({url: options.url}) : wx.navigateBack({delta: 2});

    }
});

//index.wxml
&lt;web-view src="{<!-- -->{url}}"&gt;&lt;/web-view&gt;
</code></pre> 
</div> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 在这个<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>web-view</code>中，指向的就是<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>https://test.com</code>的内容，所以在在<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>https://test.com</code>中跳转出回到小程序，需要修改<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>https://test.com</code>中的<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>JavaScript</code>,</p> 
<div class="highlight" style=""> 
 <pre style='margin-top:1em; margin-bottom:1em; padding:10px; overflow:auto; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; font-size:14px; word-wrap:normal; background:rgb(246,246,246)'><code class="language-text" style='margin:0px; padding:0px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace'><span style=""></span>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;meta http-equiv="X-UA-Compatible" content="ie=edge"&gt;
    &lt;title&gt;test&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://test.com/index.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="app"&gt;
        &lt;h1&gt;webview-wechat-detail&lt;/h1&gt;
        &lt;p&gt;
            detail
        &lt;/p&gt;
        &lt;button type="button" id="btn"&gt;返回小程序&lt;/button&gt;
    &lt;/div&gt;
    &lt;script src="https://test.com/jquery.js"&gt;&lt;/script&gt;
    &lt;script src="https://res.wx.qq.com/open/js/jweixin-1.3.0.js"&gt;&lt;/script&gt;
    &lt;script&gt;
        /* eslint-disable */
$(function(){
    doucument.cookie = 'bb=bbbbbb';
    $('#btn').on('click',function(s) {
        document.cookie = 'aa=ssssss';
        wx.miniProgram.navigateTo({
            url:'/pages/index?test=testtest',
            success: function(){
                console.log('success')
            },
            fail: function(){
                console.log('fail');
            },
            complete:function(){
                console.log('complete');
            }

            });
        });
    });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
</div> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 如果需要使用一些其他的的<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>jssdk</code>的方法，那就需要参照公众号的开发配置了。</p> 
<h3 style="margin:20px 0px; font-weight:400; font-size:24px; line-height:inherit; color:rgb(51,51,51)"> web-view采坑</h3> 
<p style="margin-top:0px; margin-bottom:20px; color:rgb(51,51,51); font-size:14px"> 由于很多使用中的一些问题</p> 
<blockquote style="padding-left:1.2em; margin:20px 0px; color:rgb(51,51,51); border-left:4px solid rgb(226,227,228); font-size:14px">
  1.打开的域名没有在小程序管理后台设置业务域名（注意是业务域名，不是服务器域名） 
 <br style=""> 2.打开的页面必须为https服务 
 <br style=""> 3.打开的页面302过去的地址也必须设置过业务域名 
 <br style=""> 4.web-view空白问题，请升级微信客户端到 6.5.16 
 <br style=""> 5.页面可以包含iframe，但是iframe的地址必须为业务域名 
 <br style=""> 6.web-view不支持支付能力，web-view的API能力见web-view的文档说明 
 <br style=""> 7.开发者自己检查自己的https服务是否正常，测试方法：普通浏览器打开对应的地址 
 <br style=""> 8.如果web-view使用了公众号授权的服务，开发者工具提示网页开发者的问题，请见： 
 <a target="_blank" href="http://link.zhihu.com/?target=https%3A//mp.weixin.qq.com/wiki%3Ft%3Dresource/res_main%26id%3Dmp1455784140" rel="nofollow noreferrer noopener noreferrer" class=" wrap external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all">公众号开发<span class="icon-external" style=""></span></a> 
 <br style=""> 其他的问题注意： 
</blockquote> 
<ol style="margin:20px 0px; padding:0px 0px 0px 40px; color:rgb(51,51,51); font-size:14px"><li style="list-style-type:decimal; margin-top:10px; list-style-position:outside"> 每个页面只能有一个&lt;web-view/&gt;，&lt;web-view/&gt;会自动铺满整个页面，并覆盖其他组件，小程序对webview的监控状态基本没有，只能设置src设置url。</li><li style="list-style-type:decimal; margin-top:10px; list-style-position:outside"> 关于小程序和web-view的通信，&lt;web-view/&gt; → 小程序只能通过JSSDK 1.3.0提供的接口返回小程序页面，设置参数来传值，反之，小程序到webview也是一样的，只能是src的路径带上参数；</li><li style="list-style-type:decimal; margin-top:10px; list-style-position:outside"> web-view不支持支付能力,是指无法唤起小程序的直接支付窗口，对于h5的那套支付应该是支持的，但是web-view 里边没法使用 微信支付的 JSAPI，也就是可能可以h5的相关的的支付中心来支付；</li><li style="list-style-type:decimal; margin-top:10px; list-style-position:outside"> 关于层级，在webview中可以无限跳转，对于导航条返回和物理键返回都会回到上一个页面直到退出webview，就像<code style='margin:0px 2px; padding:3px 4px; font-family:Menlo,Monaco,Consolas,"Andale Mono","lucida console","Courier New",monospace; background-color:rgb(246,246,246)'>history.back</code>。</li><li style="list-style-type:decimal; margin-top:10px; list-style-position:outside"> webview中的html的title会自动放到小程序的头部作为标题；</li><li style="list-style-type:decimal; margin-top:10px; list-style-position:outside"> webview中可以正常使用ajax之类的操作。</li><li style="list-style-type:decimal; margin-top:10px; list-style-position:outside"> 一些可能的问题<a target="_blank" href="http://link.zhihu.com/?target=https%3A//developers.weixin.qq.com/blogdetail%3Faction%3Dget_post_info%26lang%3Dzh_CN%26token%3D585555149%26docid%3Debfd9e5ec9986b4f23c41f8d8bbf2730" rel="nofollow noreferrer noopener noreferrer" class=" wrap external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all">问题汇总<span class="icon-external" style=""></span></a></li></ol> 
<blockquote style="padding-left:1.2em; margin:20px 0px; color:rgb(51,51,51); border-left:4px solid rgb(226,227,228); font-size:14px">
  本文作者：caoweiju 
 <br style=""> 原文地址： 
 <a target="_blank" href="http://link.zhihu.com/?target=http%3A//www.wxapp-union.com/portal.php%3Fmod%3Dview%26aid%3D3362" rel="nofollow noreferrer noopener noreferrer" class=" wrap external" style="color:rgb(34,85,153); text-decoration:none; word-break:break-all">关于微信小程序webview的使用-实战教程-小程序社区-微信小程序-微信小程序开发社区-小程序开发论坛-微信小程序联盟</a> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/79cae317b97a2d4ef65bd518ef83adab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java 源文件中的中文符号替换成英文符号</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/82a0030c59621475bc1aa259cb2abff7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">spring&#43;springmvc&#43;redis配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>