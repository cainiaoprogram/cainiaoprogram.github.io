<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JAVA如何连接redis以及Springboot整合redis详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JAVA如何连接redis以及Springboot整合redis详解" />
<meta property="og:description" content="1. java连接redis 1.1 java连接单机redis 首先创建一个普通的maven工程
（1）引入依赖
&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;redis.clients&lt;/groupId&gt; &lt;artifactId&gt;jedis&lt;/artifactId&gt; &lt;version&gt;3.8.0&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; （2）测试
public class demo1 { public static void main(String[] args) { //String数据类型 // redisString(); //hash数据类型 // redisHash(); //List&lt;列表&gt;数据类型 Jedis jedis = new Jedis(&#34;172.16.7.220&#34;,6379); } private static void redisHash() { Jedis jedis = new Jedis(&#34;172.16.7.220&#34;,6379); jedis.select(1); jedis.hset(&#34;k1&#34;,&#34;name&#34;,&#34;syf&#34;); HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;(); map.put(&#34;name&#34;,&#34;ljh&#34;); map.put(&#34;age&#34;,&#34;18&#34;); map.put(&#34;address&#34;,&#34;shanghai&#34;); Long k2 = jedis.hset(&#34;k2&#34;, map);//将哈希表 key 中的字段 field 的值设为 value hget key field: 获取存储在哈希表中指定字段的值。 Map&lt;String, String&gt; all = jedis." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fa51624f7162eb57b6762de5222fd849/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-05T14:24:30+08:00" />
<meta property="article:modified_time" content="2023-07-05T14:24:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JAVA如何连接redis以及Springboot整合redis详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1. java连接redis</h2> 
<h3>1.1 java连接单机redis</h3> 
<p>首先创建一个普通的maven工程</p> 
<p><img alt="" height="311" src="https://images2.imgbox.com/1f/c1/BSZkTyev_o.png" width="505"></p> 
<p> （1）引入依赖</p> 
<pre><code class="language-java">&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;redis.clients&lt;/groupId&gt;
            &lt;artifactId&gt;jedis&lt;/artifactId&gt;
            &lt;version&gt;3.8.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;</code></pre> 
<p>（2）测试</p> 
<pre><code class="language-java">public class demo1 {
    public static void main(String[] args) {
        //String数据类型
//        redisString();

        //hash数据类型
//        redisHash();

        //List&lt;列表&gt;数据类型
        Jedis jedis = new Jedis("172.16.7.220",6379);


    }

    private static void redisHash() {
        Jedis jedis = new Jedis("172.16.7.220",6379);
        jedis.select(1);
        jedis.hset("k1","name","syf");

        HashMap&lt;String,String&gt; map = new HashMap&lt;&gt;();
        map.put("name","ljh");
        map.put("age","18");
        map.put("address","shanghai");
        Long k2 = jedis.hset("k2", map);//将哈希表 key 中的字段 field 的值设为 value hget key field: 获取存储在哈希表中指定字段的值。
        Map&lt;String, String&gt; all = jedis.hgetAll("k2");//获取在哈希表中指定 key 的所有字段和值
        Set&lt;String&gt; k21 = jedis.hkeys("k2");//获取所有哈希表中的字段
        Long k1 = jedis.hdel("k2","name");//删除一个或多个哈希表字段
        System.out.println(k1);
    }

    private static void redisString() {
        //把所有关于对redis的操作都封装到一个类中Jedis
        //Jedis jedis = new Jedis();//无参构造函数，默认连接的是本地的redis，而且端口6379
        Jedis jedis = new Jedis("172.16.7.220",6379);
//        System.out.println(jedis.ping());//测试连通性   pong则为连通

        //String类型的redis数据测试
//        String s = jedis.flushAll();     //清空当前redis库的数据
//        String select = jedis.select(0);      //切换redis的数据库
        String set = jedis.set("k1", "v1");   //设置k1,v1
        String mset = jedis.mset("k1","v2","k2","v2","k4","4");  //设置多个k1,v1
        Long setnx = jedis.setnx("k1", "v1");//判断如果k1不存在的添加返回1，存在不添加返回0
        Set&lt;String&gt; keys = jedis.keys("*"); //获取所有的key
        String setex = jedis.setex("k3", 5L, "v3");//设置过期时间
//        Long del = jedis.del("k1", "k2");//删除key
        String k1 = jedis.get("k1");//获取k1的值
        Long k4 = jedis.incr("k4");//对指定的key的value值进行递增。key对应的value必须为整型字符串
        Long decr = jedis.decrBy("k4", 2L);//按照number值进行递增
        System.out.println(decr);
        jedis.close();
    }
}</code></pre> 
<blockquote> 
 <p>特点: Jedis把对redis的操作都封装到Jedis类对象中了，而每个命令封装了一个对应的方法。</p> 
</blockquote> 
<h3>1.2 java通过连接池连接redis</h3> 
<blockquote> 
 <p>连接池的作用: 减少频繁创建和销毁连接对象。</p> 
</blockquote> 
<pre><code class="language-java">public class demo2 {
    public static void main(String[] args) {
        //配置连接对象信息
        JedisPoolConfig poolConfig = new JedisPoolConfig();
        poolConfig.setMinIdle(5);//设置最小的空闲数
        poolConfig.setMaxIdle(10);//当没人连接redis服务器是，该池子最多能空闲几个连接对象
        poolConfig.setMaxTotal(15);//当有人连接redis服务时，最大能生成多少个连接对象

        //创建连接池对象
        JedisPool jedisPool = new JedisPool(poolConfig,"172.16.7.220",6379);
        long start = System.currentTimeMillis();

        //从连接池获取连接对象
        for (int i = 0; i &lt; 1000; i++) {
            Jedis jedis = jedisPool.getResource();
            jedis.ping();
            jedis.close();
        }
        long end = System.currentTimeMillis();
        System.out.println(end-start);
    }
}</code></pre> 
<h3>1.3 java连接redis集群</h3> 
<pre><code class="language-java">public class demo4 {
    public static void main(String[] args) {
        HostAndPort hostAndPort1=new HostAndPort("172.16.7.220",7001);
        HostAndPort hostAndPort2=new HostAndPort("172.16.7.220",7002);
        HostAndPort hostAndPort3=new HostAndPort("172.16.7.220",7003);
        HostAndPort hostAndPort4=new HostAndPort("172.16.7.220",7004);
        HostAndPort hostAndPort5=new HostAndPort("172.16.7.220",7005);
        HostAndPort hostAndPort6=new HostAndPort("172.16.7.220",7006);
        Set&lt;HostAndPort&gt; sets=new HashSet&lt;&gt;();
        sets.add(hostAndPort1);
        sets.add(hostAndPort2);
        sets.add(hostAndPort3);
        sets.add(hostAndPort4);
        sets.add(hostAndPort5);
        sets.add(hostAndPort6);
        JedisCluster jedisCluster=new JedisCluster(sets);
        jedisCluster.set("k1","v1");
        jedisCluster.set("k2","v2");
        jedisCluster.set("k3","v3");
        jedisCluster.set("k4","v4");
        jedisCluster.set("k5","v5");
        jedisCluster.set("k6","v6");
        jedisCluster.set("k7","v7");

        jedisCluster.close();
    }
}</code></pre> 
<h2>2. springboot整合redis.</h2> 
<blockquote> 
 <p>springboot对redis的操作封装到模板类中RedisTemplate和StringRedisTemplate。StringRedisTemplate是Redistemplate的子类，它只能往redis中存放字符串类型。</p> 
</blockquote> 
<p>（1）创建一个Springboot工程</p> 
<p>（2）引入依赖</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.3.12.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.aaa&lt;/groupId&gt;
    &lt;artifactId&gt;redis-springboot-01&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;redis-springboot-01&lt;/name&gt;
    &lt;description&gt;redis-springboot-01&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</code></pre> 
<p>（2）配置信息</p> 
<pre><code class="language-java">
#redis的配置信息--单机
spring.redis.host=192.168.223.147
spring.redis.port=6379</code></pre> 
<p>（3）测试</p> 
<pre><code class="language-java">@SpringBootTest
class RedisSpringboot01ApplicationTests {

    //springboot 创建好该类对象 并交于IOC容器管理
    @Autowired
    private StringRedisTemplate redisTemplate;

    @Test
    void contextLoads() {
//        Boolean k1 = redisTemplate.hasKey("k1");//判断k存不存在
//        System.out.println("判断k1是否存在:"+k1);
//        Boolean k2 = redisTemplate.delete("k2");//删除指定的k
//        System.out.println("k2是否删除成功:"+k2);
//        Set&lt;String&gt; keys = redisTemplate.keys("*");//得到所有的k
//        System.out.println(keys);

        //字符串的操作--redisTemplate类中对于每一种数据类型的操作，单独封装了响应的类
        ValueOperations&lt;String, String&gt; forValue = redisTemplate.opsForValue();
//        Integer append = forValue.append("k1", "v5");//追加字符串功能
//        forValue.set("k8","v8");//设置值
//        String k8 = forValue.get("k8");//获取k对应的value
//        Boolean absent = forValue.setIfAbsent("k9", "v9");//如果k不存在则添加，存在则返回false
//        Boolean k9 = forValue.setIfPresent("k9","v100");//如果k存在就覆盖，不存在就添加
//        HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();
//        map.put("k6","v6");
//        map.put("k7","v7");
//        map.put("k8","v8");
//        map.put("k9","v9");
//        forValue.multiSet(map);
//        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();
//        list.add("k6");
//        list.add("k7");
//        list.add("k8");
//        list.add("k9");
//        List&lt;String&gt; strings = forValue.multiGet(list);
//        System.out.println(strings);

        //hash类型操作
        HashOperations&lt;String, Object, Object&gt; opsForHash = redisTemplate.opsForHash();
        Object o = opsForHash.get("k1", "name");//获取字段的值
        opsForHash.put("k3","name","yuhail");//存放数据
        Set&lt;Object&gt; set = opsForHash.keys("k2");//获取k的所有字段
        Map&lt;Object, Object&gt; k2 = opsForHash.entries("k2");//获取所有的字段和value值
        System.out.println(set);
        System.out.println(k2);
        HashMap&lt;String, String&gt; map = new HashMap&lt;&gt;();//批量添加hash数据
        map.put("name","asfd");
        map.put("addr","v7");
        map.put("age","v8");
        map.put("sex","v9");
        opsForHash.putAll("k4",map);

    }

}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/74f22b7f73aceb83d329ad4fd3ec4e92/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">chatglm docker镜像，一键部署chatglm本地知识库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4be720aa8fd2b7ed189d1c0ec341f323/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue3 vite解决跨域</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>