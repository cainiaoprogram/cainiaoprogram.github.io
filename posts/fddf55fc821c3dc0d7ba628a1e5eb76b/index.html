<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>03-微服务架构及解决方案 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="03-微服务架构及解决方案" />
<meta property="og:description" content="目录
微服务简介
背景分析
什么是微服务
SpringCloud Alibaba微服务解决方案
概述
核心组件分析
解决方案架构设计
构建SpringCloud 聚合项目并进行环境初始化
工程结构
创建空项目
项目初始化配置
创建聚合父工程
创建服务提供方模块
创建服务消费方模块
创建API网关服务模块
总结(Summary)
核心知识点
常见问题分析 常见Bug分析 微服务简介 背景分析 讲微服务之前，我们先分析以下单体应用。所谓单体应用一般是基于idea/eclipse，maven等建一个工程，然后基于SpringBoot，spring，mybatis框架进行整合，接下来再写一堆dao、mapper、service、controller，再加上一些的配置文件，有可能还会引入redis、elasticsearch、mq等其它项目的依赖，开发好之后再将项目打包成一个jar包/war包。然后再将包扔到类似tomcat这样的web服务中，最后部署到公司提供给你的linux服务器上。 接下来，你针对服务提供的访问端口（例如8080端口）发起http请求，请求会由tomcat直接转交给你的spring web组件，进行一层一层的代码调用。对于这样的设计一般适合企业的内部应用，访问量不大，体积比较小，5人以内的团队即可开发和维护。但对于一些大型互联网项目，假如需要10人以上的开发和维护团队，仅频繁的创建代码分支，编写业务功能，然后合并分支，就会出现很多代码冲突。每次解决这些大量的代码冲突，可能就会耗费好几天的时间。基于这样的背景微服务诞生了.
在微服务架构设计中，建议超出需要10人开发和维护的项目要进行系统拆分，就是把大系统拆分为很多小系统，几个人负责一个服务这样每个服务独立的开发、测试和上线，代码冲突少了，每次上线就回归测试自己的一个服务即可，测试速度快了，上线是独立的，只要向后兼容接口就行了，不需要跟别人等待和协调，技术架构和技术版本的升级，几个人ok就行，成本降低，更加灵活了。
什么是微服务 微服务架构（MSA）的基础是将单个应用程序开发为一组小型独立服务，这些独立服务在自己的进程中运行，独立开发和部署。如图所示：
这些服务使用轻量级 API 通过明确定义的接口进行通信。这些服务是围绕业务功能构建的，每项服务执行一项功能。由于它们是独立运行的，因此可以针对各项服务进行更新、部署和扩展，以满足对应用程序特定功能的需求。
生活中的微服务，如图所示：
程序中的微服务，就是将各个业务系统的共性再进行抽取，做成独立的服务，如图所示：
总之，微服务是分布式系统中的一种流行的架构模型，它并不是银弹，所以，也不要寄希望于微服务构架能够解决所有的问题。微服务架构主要解决的是如何快速地开发和部署我们的服务，这对于一个能够适应快速开发和成长的公司是非常必要的。同时，微服务设计中有很多很不错的想法和理念，通过学习微服务架构我们可以更快的迈向卓越。
SpringCloud Alibaba微服务解决方案 概述 Spring Cloud Alibaba 是Spring Cloud的一个子项目，致力于提供微服务开发的一站式解决方案。此项目包含开发分布式应用微服务的必需组件，方便开发者通过 Spring Cloud 编程模型轻松使用这些组件来开发分布式应用服务。依托 Spring Cloud Alibaba，您只需要添加一些注解和少量配置，就可以将 Spring Cloud 应用接入阿里微服务解决方案，通过阿里中间件来迅速搭建分布式应用系统。
核心组件分析 Spring Cloud Alibaba 默认提供了如下核心功能（先了解）：
服务限流降级：
默认支持 WebServlet、OpenFeign、RestTemplate、Spring Cloud Gateway, RocketMQ 限流降级功能的接入，可以在运行时通过控制台实时修改限流降级规则，还支持查看限流降级 Metrics 监控。服务注册与发现：
基于Spring Cloud 服务注册与发现标准，借助Nacos进行实现，默认还集成了 Ribbon 的支持。分布式配置管理：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fddf55fc821c3dc0d7ba628a1e5eb76b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-21T19:05:46+08:00" />
<meta property="article:modified_time" content="2021-12-21T19:05:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">03-微服务架构及解决方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B-toc" style="margin-left:0px;"><a href="#%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B" rel="nofollow" title="微服务简介">微服务简介</a></p> 
<p id="%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90" rel="nofollow" title="背景分析">背景分析</a></p> 
<p id="%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1-toc" style="margin-left:40px;"><a href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1" rel="nofollow" title="什么是微服务">什么是微服务</a></p> 
<p id="SpringCloud%20Alibaba%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-toc" style="margin-left:0px;"><a href="#SpringCloud%20Alibaba%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" rel="nofollow" title="SpringCloud Alibaba微服务解决方案">SpringCloud Alibaba微服务解决方案</a></p> 
<p id="%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px;"><a href="#%E6%A6%82%E8%BF%B0" rel="nofollow" title="概述">概述</a></p> 
<p id="%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90-toc" style="margin-left:40px;"><a href="#%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90" rel="nofollow" title="核心组件分析">核心组件分析</a></p> 
<p id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1-toc" style="margin-left:40px;"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1" rel="nofollow" title="解决方案架构设计">解决方案架构设计</a></p> 
<p id="%E6%9E%84%E5%BB%BASpringCloud%20%E8%81%9A%E5%90%88%E9%A1%B9%E7%9B%AE%E5%B9%B6%E8%BF%9B%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96-toc" style="margin-left:0px;"><a href="#%E6%9E%84%E5%BB%BASpringCloud%20%E8%81%9A%E5%90%88%E9%A1%B9%E7%9B%AE%E5%B9%B6%E8%BF%9B%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96" rel="nofollow" title="构建SpringCloud 聚合项目并进行环境初始化">构建SpringCloud 聚合项目并进行环境初始化</a></p> 
<p id="%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84-toc" style="margin-left:40px;"><a href="#%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84" rel="nofollow" title="工程结构">工程结构</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E7%A9%BA%E9%A1%B9%E7%9B%AE-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E7%A9%BA%E9%A1%B9%E7%9B%AE" rel="nofollow" title="创建空项目">创建空项目</a></p> 
<p id="%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE" rel="nofollow" title="项目初始化配置">项目初始化配置</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E8%81%9A%E5%90%88%E7%88%B6%E5%B7%A5%E7%A8%8B-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E8%81%9A%E5%90%88%E7%88%B6%E5%B7%A5%E7%A8%8B" rel="nofollow" title="创建聚合父工程">创建聚合父工程</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9%E6%A8%A1%E5%9D%97-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9%E6%A8%A1%E5%9D%97" rel="nofollow" title="创建服务提供方模块">创建服务提供方模块</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E6%96%B9%E6%A8%A1%E5%9D%97-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E6%96%B9%E6%A8%A1%E5%9D%97" rel="nofollow" title="创建服务消费方模块">创建服务消费方模块</a></p> 
<p id="%E5%88%9B%E5%BB%BAAPI%E7%BD%91%E5%85%B3%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9D%97-toc" style="margin-left:40px;"><a href="#%E5%88%9B%E5%BB%BAAPI%E7%BD%91%E5%85%B3%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9D%97" rel="nofollow" title="创建API网关服务模块">创建API网关服务模块</a></p> 
<p id="%E6%80%BB%E7%BB%93(Summary)-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93%28Summary%29" rel="nofollow" title="总结(Summary)">总结(Summary)</a></p> 
<p id="%C2%A0%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9-toc" style="margin-left:0px;"><a href="#%C2%A0%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9" rel="nofollow" title=" 核心知识点"> 核心知识点</a></p> 
<p id="%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%C2%A0-toc" style="margin-left:0px;"><a href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%C2%A0" rel="nofollow" title="常见问题分析 ">常见问题分析 </a></p> 
<p id="%E5%B8%B8%E8%A7%81Bug%E5%88%86%E6%9E%90%C2%A0-toc" style="margin-left:0px;"><a href="#%E5%B8%B8%E8%A7%81Bug%E5%88%86%E6%9E%90%C2%A0" rel="nofollow" title="常见Bug分析 ">常见Bug分析 </a></p> 
<hr id="hr-toc"> 
<h2 id="%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%AE%80%E4%BB%8B">微服务简介</h2> 
<h3 id="%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90"><a name="t2"></a><br><a id="_2"></a><br> 背景分析</h3> 
<p>讲微服务之前，我们先分析以下单体应用。所谓单体应用一般是基于idea/eclipse，maven等建一个工程，然后基于SpringBoot，spring，mybatis框架进行整合，接下来再写一堆dao、mapper、service、controller，再加上一些的配置文件，有可能还会引入redis、elasticsearch、mq等其它项目的依赖，开发好之后再将项目打包成一个jar包/war包。然后再将包扔到类似tomcat这样的web服务中，最后部署到公司提供给你的linux服务器上。 接下来，你针对服务提供的访问端口（例如8080端口）发起http请求，请求会由tomcat直接转交给你的spring web组件，进行一层一层的代码调用。对于这样的设计一般适合企业的内部应用，访问量不大，体积比较小，5人以内的团队即可开发和维护。但对于一些大型互联网项目，假如需要10人以上的开发和维护团队，仅频繁的创建代码分支，编写业务功能，然后合并分支，就会出现很多代码冲突。每次解决这些大量的代码冲突，可能就会耗费好几天的时间。基于这样的背景微服务诞生了.</p> 
<p>在微服务架构设计中，建议超出需要10人开发和维护的项目要进行系统拆分，就是把大系统拆分为很多小系统，几个人负责一个服务这样每个服务独立的开发、测试和上线，代码冲突少了，每次上线就回归测试自己的一个服务即可，测试速度快了，上线是独立的，只要向后兼容接口就行了，不需要跟别人等待和协调，技术架构和技术版本的升级，几个人ok就行，成本降低，更加灵活了。<br>  </p> 
<h3 id="%E4%BB%80%E4%B9%88%E6%98%AF%E5%BE%AE%E6%9C%8D%E5%8A%A1">什么是微服务</h3> 
<p>微服务架构（MSA）的基础是将单个应用程序开发为一组小型独立服务，这些独立服务在自己的进程中运行，独立开发和部署。如图所示：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/ba/3a/NUI7Iprf_o.png"></p> 
<p></p> 
<p>这些服务使用轻量级 API 通过明确定义的接口进行通信。这些服务是围绕业务功能构建的，每项服务执行一项功能。由于它们是独立运行的，因此可以针对各项服务进行更新、部署和扩展，以满足对应用程序特定功能的需求。</p> 
<p>生活中的微服务，如图所示：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/9c/bb/ai7DyBsY_o.png"></p> 
<p></p> 
<p>程序中的微服务，就是将各个业务系统的共性再进行抽取，做成独立的服务，如图所示：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/4a/04/cnLFKKdn_o.png"></p> 
<p> 总之，微服务是分布式系统中的一种流行的架构模型，它并不是银弹，所以，也不要寄希望于微服务构架能够解决所有的问题。微服务架构主要解决的是如何快速地开发和部署我们的服务，这对于一个能够适应快速开发和成长的公司是非常必要的。同时，微服务设计中有很多很不错的想法和理念，通过学习微服务架构我们可以更快的迈向卓越。<br>  </p> 
<h2 id="SpringCloud%20Alibaba%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">SpringCloud Alibaba微服务解决方案</h2> 
<h3 id="%E6%A6%82%E8%BF%B0"><a name="t5"></a><br><a id="_23"></a><br> 概述</h3> 
<p>Spring Cloud Alibaba 是Spring Cloud的一个子项目，致力于提供微服务开发的一站式解决方案。此项目包含开发分布式应用微服务的必需组件，方便开发者通过 Spring Cloud 编程模型轻松使用这些组件来开发分布式应用服务。依托 Spring Cloud Alibaba，您只需要添加一些注解和少量配置，就可以将 Spring Cloud 应用接入阿里微服务解决方案，通过阿里中间件来迅速搭建分布式应用系统。<br>  </p> 
<h3 id="%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6%E5%88%86%E6%9E%90">核心组件分析</h3> 
<p>Spring Cloud Alibaba 默认提供了如下核心功能（先了解）：</p> 
<ul><li>服务限流降级：<br> 默认支持 WebServlet、OpenFeign、RestTemplate、Spring Cloud Gateway, RocketMQ 限流降级功能的接入，可以在运行时通过控制台实时修改限流降级规则，还支持查看限流降级 Metrics 监控。</li><li>服务注册与发现：<br> 基于Spring Cloud 服务注册与发现标准，借助Nacos进行实现，默认还集成了 Ribbon 的支持。</li><li>分布式配置管理：<br> 基于Nacos支持分布式系统中的外部化配置，配置更改时自动刷新。</li><li>消息驱动能力：<br> 基于Spring Cloud Stream 为微服务应用构建消息驱动能力。</li><li>分布式事务：<br> 使用 @GlobalTransactional 注解， 高效并且对业务零侵入地解决分布式事务问题。。</li><li>分布式任务调度：<br> 提供秒级、精准、高可靠、高可用的定时（基于 Cron 表达式）任务调度服务。同时提供分布式的任务执行模型，如网格任务。网格任务支持海量子任务均匀分配到所有 Worker上执行。</li></ul> 
<h3 id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1">解决方案架构设计</h3> 
<p>基于Spring Cloud Alibaba实现的微服务，解决方案设计架构如图所示：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/87/60/62af6Ccf_o.png"></p> 
<p></p> 
<h2 id="%E6%9E%84%E5%BB%BASpringCloud%20%E8%81%9A%E5%90%88%E9%A1%B9%E7%9B%AE%E5%B9%B6%E8%BF%9B%E8%A1%8C%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96">构建SpringCloud 聚合项目并进行环境初始化</h2> 
<h3 id="%E5%B7%A5%E7%A8%8B%E7%BB%93%E6%9E%84"><a name="t9"></a><br><a id="_48"></a><br> 工程结构</h3> 
<p>微服务项目一般都会采用聚合工程结构，可通过聚合工程结构实现共享资源的复用，简化项目的管理方式。本小节以一个聚合工程结构为案例，讲解微服务架构方案中的maven聚合工程的基本结构，例如：</p> 
<pre><code class="language-java">GitCGB2108IVProjects (工作区/空项目)
├── 01-sca   //(微服务父工程)
     ├── sca-provider            //服务提供方法
     ├── sca-consumer         //服务消费方法
     ├── sca-gateway            //网关服务</code></pre> 
<h3 id="%E5%88%9B%E5%BB%BA%E7%A9%BA%E9%A1%B9%E7%9B%AE">创建空项目</h3> 
<p>打开Idea,创建一个空项目(Empty Project),项目名为GitCGB2108IVProjects,例如:</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/54/11/mYTlxkDT_o.png"><br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/89/8d/IGt35FFw_o.png"></p> 
<p>其中，这个空项目就类似磁盘中的一个空的文件夹，可以将此文件夹作为一个代码工作区。</p> 
<p></p> 
<h3 id="%E9%A1%B9%E7%9B%AE%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE">项目初始化配置</h3> 
<p>第一步:配置maven环境(只要是新的工作区,都要重新配置),注意本地库选择新的位置不要与其它项目共用本地库，因为多个项目所需要依赖的版本不同时，可能会有一些依赖版本的冲突。.<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/d7/2c/TcU3rMwr_o.png"></p> 
<p>说明，这里的本地库名字最要不要选择中文，单词之间也不要有空格。</p> 
<p>第二步:配置JDK编译环境</p> 
<p>聚合工程在编译时，需要对相关依赖的工程进行一起编译，所以需要做一些配置，例如：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/2f/d4/9TrIznxz_o.png"><br> 指定一下当前工作区的jdk编译版本，例如：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/aa/01/rru7lv7r_o.png"></p> 
<p>第三步:配置工作区中项目编码方式</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/c6/c5/7v0as4Cs_o.png"></p> 
<p></p> 
<h3 id="%E5%88%9B%E5%BB%BA%E8%81%9A%E5%90%88%E7%88%B6%E5%B7%A5%E7%A8%8B">创建聚合父工程</h3> 
<p>我们后续在创建微服务工程进行学习时,相关服务依赖版本的管理，公共依赖，项目编译，打包设计等都可以放在此工程下，进行统一的配置，然后实现共享。</p> 
<p>第一步:创建父工程模块,例如:<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/1f/39/1oQ7cKE0_o.png"></p> 
<p></p> 
<p>第二步:删除工程中的src目录(父工程不需要这个目录),例如：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/d9/50/sCxbgR37_o.png"></p> 
<p>第三步：修改项目pom.xml文件内容，例如：</p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;!--当前工程的坐标--&gt;
    &lt;groupId&gt;com.jt&lt;/groupId&gt;
    &lt;artifactId&gt;01-sca&lt;/artifactId&gt;

    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

    &lt;!--有的同学在创建maven工程时,可能会有如下有两句话,这两句话用于指定
    当前项目的jdk编译版本以及运行版本,也可以不指定，后续我们自己通过maven插件方式进行配置--&gt;
    &lt;!--
    &lt;properties&gt;
         &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;
         &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;
    &lt;/properties&gt;
    --&gt;
    &lt;!--maven父工程的pom文件中一般要定义子模块,
    子工程中所需依赖版本的管理,公共依赖并且父工程的
    打包方式一般为pom方式--&gt;

    &lt;!--第一步: 定义子工程中核心依赖的版本管理(注意,只是版本管理)--&gt;
    &lt;dependencyManagement&gt;
        &lt;dependencies&gt;
            &lt;!--spring boot 核心依赖版本定义(spring官方定义)--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;
                &lt;version&gt;2.3.2.RELEASE&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;

            &lt;!--Spring Cloud 微服务规范(由spring官方定义)--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
                &lt;version&gt;Hoxton.SR9&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;&lt;!--假如scope是import,type必须为pom--&gt;
                &lt;scope&gt;import&lt;/scope&gt;&lt;!--引入三方依赖的版本设计--&gt;
            &lt;/dependency&gt;

            &lt;!--Spring Cloud alibaba 依赖版本管理 (参考官方说明)--&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.alibaba.cloud&lt;/groupId&gt;
                &lt;artifactId&gt;spring-cloud-alibaba-dependencies&lt;/artifactId&gt;
                &lt;version&gt;2.2.6.RELEASE&lt;/version&gt;
                &lt;type&gt;pom&lt;/type&gt;
                &lt;scope&gt;import&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;/dependencies&gt;
    &lt;/dependencyManagement&gt;
    &lt;!--第二步: 添加子工程的所需要的公共依赖--&gt;
    &lt;dependencies&gt;
        &lt;!--lombok 依赖,子工程中假如需要lombok,不需要再引入--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;scope&gt;provided&lt;/scope&gt;&lt;!--provided 表示此依赖仅在编译阶段有效--&gt;
        &lt;/dependency&gt;
        &lt;!--单元测试依赖,子工程中需要单元测试时,不需要再次引入此依赖了--&gt;
         &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;&lt;!--test表示只能在test目录下使用此依赖--&gt;
            &lt;exclusions&gt;
                &lt;exclusion&gt;
                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;
                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;
                &lt;/exclusion&gt;
            &lt;/exclusions&gt;
        &lt;/dependency&gt;
        &lt;!--其它依赖...--&gt;
    &lt;/dependencies&gt;
    &lt;!--第三步: 定义当前工程模块及子工程的的统一编译和运行版本--&gt;
    &lt;build&gt;&lt;!--项目构建配置,我们基于maven完成项目的编译,测试,打包等操作,
    都是基于pom.xml完成这一列的操作,但是编译和打包的配置都是要写到build元素
    内的,而具体的编译和打包配置,又需要plugin去实现,plugin元素不是必须的,maven
    有默认的plugin配置,常用插件可去本地库进行查看--&gt;
        &lt;plugins&gt;
            &lt;!--通过maven-compiler-plugin插件设置项目
            的统一的jdk编译和运行版本--&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                 &lt;!--假如本地库没有这个版本,这里会出现红色字体错误--&gt;
                &lt;version&gt;3.8.1&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;8&lt;/source&gt;
                    &lt;target&gt;8&lt;/target&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;
</code></pre> 
<p>其中，服务核心依赖版本可参考如下网址（涉及到一个兼容性问题，不能随意指定其版本）：</p> 
<pre><code>https://github.com/alibaba/spring-cloud-alibaba/wiki/%E7%89%88%E6%9C%AC%E8%AF%B4%E6%98%8E</code></pre> 
<p></p> 
<h3 id="%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9%E6%A8%A1%E5%9D%97">创建服务提供方模块</h3> 
<p>创建服务提供方工程，继承01-sca，例如：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/83/df/9ZHAJ0f5_o.png"></p> 
<h3 id="%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%B6%88%E8%B4%B9%E6%96%B9%E6%A8%A1%E5%9D%97"><a name="t14"></a><br><a id="_210"></a><br> 创建服务消费方模块</h3> 
<p>创建服务消费方工程，继承01-sca，例如：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/cb/97/XZvrvKu1_o.png"></p> 
<p></p> 
<h3 id="%E5%88%9B%E5%BB%BAAPI%E7%BD%91%E5%85%B3%E6%9C%8D%E5%8A%A1%E6%A8%A1%E5%9D%97">创建API网关服务模块</h3> 
<p>创建网关工程（这个工程后续会作为API服务访问入口），继承01-sca，例如：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/a5/17/7Ml59Y4l_o.png"></p> 
<p>服务关系以及调用关系设计<br> 基于前面章节创建的项目，后续我们会讲解服务的注册，服务的配置，服务之间的调用，负载均衡，限流，熔断，网关等相关知识，现在先了解一个简易结构，例如：</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/b3/50/AKWGTNfJ_o.png"></p> 
<p>我们最终会基于这个结构的设计，实现一个从网关到服务消费方，再从服务消费方到服务提供方的一个调用链路的业务及代码实践过程。</p> 
<h2 id="%E6%80%BB%E7%BB%93(Summary)">总结(Summary)</h2> 
<p>总之，微服务是一个架构设计方式，此架构中的每个服务(service)都是针对一组功能而设计的，并专注于解决特定的问题。如果开发人员逐渐将更多代码增加到一项服务中并且这项服务变得复杂，那么可以将其拆分成多项更小的服务（软件即服务，所有软件对外的表现形式就诗提供一种或多种业务服务）。接下来进行独立的开发、测试、部署、运行、维护。进而更好，更灵活的处理客户端的请求并提高系统的可靠性，可扩展性。</p> 
<h2 id="%C2%A0%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9"> 核心知识点</h2> 
<ul><li>微服务架构诞生的背景(软件即服务，将一个大型软件，拆成若干个小系统；分而治之~北京一个火车站到多个火车站)</li><li>微服务架构解决方案(大厂基本自研~自己研发各种组件,中小公司用Spring Cloud Netflix,Alibaba,…)</li><li>微服务架构下Maven聚合项目的创建方式?(Maven聚合项目~资源复用:extends,import,简化编译,打包,部署方式)</li><li>微服务架构入门聚合项目创建?(01-sca,sca-consumer,sca-provider,sca-gateway,sca-common)</li><li>微服务中聚合工程之间的引用设计？(将一个工程作为依赖添加到其它工程~重点是坐标)</li><li>工程中单元测试案例分析及实践？</li></ul> 
<h2 id="%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90%C2%A0">常见问题分析 </h2> 
<ul><li>为什么需要微服务?(对系统分而治,解决因并发访问过大带来的系统复杂性(例如:业务,开发,测试,升级,可靠性等)</li><li>微服务设计的特点?(单一职责,独立进程,开发测试效率高,可靠性高,升级难度小,但会带来一定的维护成本)</li><li>微服务解决方案有哪些?(大厂自研,中小企业采用开源Spring Cloud Alibaba,Spring Cloud Netfix等 )</li><li>微服务设计中需要哪些关键组件(服务的注册,发现,配置,限流降级,访问入口管理,分布式事务管理等)</li><li>创建聚合工程的目的?(实现工程之间资源的的共享，简化工程管理)</li><li>如何修改聚合工程中项目的编译和运行版本?(pom.xml:build-&gt;plugins-&gt;plugin-&gt;maven-compiler-plugin)</li><li>maven工程中build元素的作用?(定义项目的编译,打包方式)</li><li>maven父工程的packaging元素内的值是什么?(父工程默认打包方式为pom方式)</li><li>maven父工程中dependencyManagement元素的作用是什么?(项目依赖的版本，当前工程或子工程不需要再指定版本)</li><li>Maven父工程中如何统一定义JDK编译和运行版本？（配置maven编译插件：maven-compiler-plugin）</li><li>Maven工程pom.xml文件有删除线怎么解决？（修改idea中maven的配置）</li><li>@Autowired注解描述属性时，系统底层执行DI的过程是怎样？</li></ul> 
<h2 id="%E5%B8%B8%E8%A7%81Bug%E5%88%86%E6%9E%90%C2%A0">常见Bug分析 </h2> 
<ul><li>maven配置错误(idea中指定你本地库)</li><li>maven依赖无法下载(首先要确保你的依赖的是正确，maven配置是正确，都正确就放大招)</li><li>单元测试@Test注解包引入错误(junit4,junit5)</li><li>单元测试类写错了位置。</li></ul> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/facb417875ed7398acd763c7fced211f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">yolov5转onnx，c&#43;&#43;调用完美复现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/98ee9c809f7e99479891413074034dc8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Sqlserver 迁移数据库批量迁移作业（Job）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>