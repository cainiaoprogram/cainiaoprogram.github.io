<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于opencv的c&#43;&#43;图像处理（傅里叶变换） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于opencv的c&#43;&#43;图像处理（傅里叶变换）" />
<meta property="og:description" content="前言 基于opencv的c&#43;&#43;接口，实现傅里叶变换。
相关的opencv接口解析 CV_EXPORTS_W int getOptimalDFTSize(int vecsize); 函数 cv::getOptimalDFTSize 返回大于或等于 vecsize 的最小数 N，以便可以有效地处理大小为 N 的向量的 DFT。在当前的实现中 N= 2 p * 3 q * 5 r 对于某个整数 p, q, r。
如果 vecsize 太大（非常接近 INT_MAX ），该函数将返回一个负数。
虽然该函数不能直接用于估计 DCT 变换的最佳向量大小（因为当前的 DCT 实现只支持偶数大小的向量），但它可以很容易地处理为 getOptimalDFTSize((vecsize&#43;1)/2)*2。
@param vecsize 向量大小。
CV_EXPORTS_W void copyMakeBorder(InputArray src, OutputArray dst, int top, int bottom, int left, int right, int borderType, const Scalar&amp; value = Scalar() ); 该函数将源图像复制到目标图像的中间。 复制的源图像左侧、右侧、上方和下方的区域将填充外插像素。 这不是基于它的过滤函数所做的（它们即时推断像素），而是其他更复杂的函数（包括您自己的函数）可以用来简化图像边界处理。
@param src 源图像。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f037ff06380723e1509a8e5004feef6e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-28T10:45:07+08:00" />
<meta property="article:modified_time" content="2022-09-28T10:45:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于opencv的c&#43;&#43;图像处理（傅里叶变换）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>前言</h2> 
<p>基于opencv的c++接口，实现傅里叶变换。</p> 
<h2><a id="opencv_2"></a>相关的opencv接口解析</h2> 
<pre><code class="prism language-cpp">CV_EXPORTS_W <span class="token keyword">int</span> <span class="token function">getOptimalDFTSize</span><span class="token punctuation">(</span><span class="token keyword">int</span> vecsize<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>函数 cv::getOptimalDFTSize 返回大于或等于 vecsize 的最小数 N，以便可以有效地处理大小为 N 的向量的 DFT。在当前的实现中 N= 2 <sup>p</sup> * 3 <sup>q</sup> * 5 <sup>r</sup> 对于某个整数 p, q, r。<br> 如果 vecsize 太大（非常接近 INT_MAX ），该函数将返回一个负数。<br> 虽然该函数不能直接用于估计 DCT 变换的最佳向量大小（因为当前的 DCT 实现只支持偶数大小的向量），但它可以很容易地处理为 getOptimalDFTSize((vecsize+1)/2)*2。<br> <strong>@param vecsize</strong> 向量大小。</p> 
<pre><code class="prism language-cpp">CV_EXPORTS_W <span class="token keyword">void</span> <span class="token function">copyMakeBorder</span><span class="token punctuation">(</span>InputArray src<span class="token punctuation">,</span> OutputArray dst<span class="token punctuation">,</span>
                                 <span class="token keyword">int</span> top<span class="token punctuation">,</span> <span class="token keyword">int</span> bottom<span class="token punctuation">,</span> <span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">,</span>
                                 <span class="token keyword">int</span> borderType<span class="token punctuation">,</span> <span class="token keyword">const</span> Scalar<span class="token operator">&amp;</span> value <span class="token operator">=</span> <span class="token function">Scalar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>该函数将源图像复制到目标图像的中间。 复制的源图像左侧、右侧、上方和下方的区域将填充外插像素。 这不是基于它的过滤函数所做的（它们即时推断像素），而是其他更复杂的函数（包括您自己的函数）可以用来简化图像边界处理。<br> <strong>@param src</strong> 源图像。<br> <strong>@param dst</strong> 与 src 类型相同且大小相同的目标图像 Size(src.cols+left+right, src.rows+top+bottom) 。<br> <strong>@param top</strong> 顶部像素<br> <strong>@param bottom</strong> 底部像素<br> <strong>@param left</strong> 离开左边的像素<br> <strong>@param right</strong> 参数指定从源图像矩形的每个方向外推多少像素。 比如top=1,bottom=1,left=1,right=1表示需要建1个像素宽的边框。<br> <strong>@param borderType</strong> 边框类型。 有关详细信息，请参阅borderInterpolate。<br> <strong>@param value</strong> 边界值，如果 borderType==BORDER_CONSTANT 。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//! Various border types, image boundaries are denoted with `|`</span>
<span class="token comment">//! @see borderInterpolate, copyMakeBorder</span>
<span class="token keyword">enum</span> <span class="token class-name">BorderTypes</span> <span class="token punctuation">{<!-- --></span>
    BORDER_CONSTANT    <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//!&lt; `iiiiii|abcdefgh|iiiiiii`  with some specified `i`</span>
    BORDER_REPLICATE   <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//!&lt; `aaaaaa|abcdefgh|hhhhhhh`</span>
    BORDER_REFLECT     <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//!&lt; `fedcba|abcdefgh|hgfedcb`</span>
    BORDER_WRAP        <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">//!&lt; `cdefgh|abcdefgh|abcdefg`</span>
    BORDER_REFLECT_101 <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">//!&lt; `gfedcb|abcdefgh|gfedcba`</span>
    BORDER_TRANSPARENT <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">//!&lt; `uvwxyz|abcdefgh|ijklmno`</span>

    BORDER_REFLECT101  <span class="token operator">=</span> BORDER_REFLECT_101<span class="token punctuation">,</span> <span class="token comment">//!&lt; same as BORDER_REFLECT_101</span>
    BORDER_DEFAULT     <span class="token operator">=</span> BORDER_REFLECT_101<span class="token punctuation">,</span> <span class="token comment">//!&lt; same as BORDER_REFLECT_101</span>
    BORDER_ISOLATED    <span class="token operator">=</span> <span class="token number">16</span> <span class="token comment">//!&lt; do not look outside of ROI</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-cpp">CV_EXPORTS <span class="token keyword">void</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat<span class="token operator">*</span> mv<span class="token punctuation">,</span> size_t count<span class="token punctuation">,</span> OutputArray dst<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>函数cv:：merge将多个阵列合并为一个多通道阵列。也就是说，输出数组的每个元素都是输入数组元素的串联，其中第i个输入数组的元素被视为mv[i]。<br> <strong>@param mv</strong> 要合并的矩阵输入数组；mv中的所有矩阵必须具有相同的大小和深度。<br> <strong>@param count</strong> 当mv是纯C数组时，计数输入矩阵的数目；它必须大于零。<br> <strong>@param dst</strong> 输出数组，大小和深度与mv[0]相同；通道数将等于参数计数。</p> 
<pre><code class="prism language-cpp">CV_EXPORTS_W <span class="token keyword">void</span> <span class="token function">dft</span><span class="token punctuation">(</span>InputArray src<span class="token punctuation">,</span> OutputArray dst<span class="token punctuation">,</span> <span class="token keyword">int</span> flags <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">int</span> nonzeroRows <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>函数cv:：dft执行以下操作之一：<br> -对N个元素的1D矢量进行傅里叶变换<br> -将N个元素的1D矢量的傅里叶变换求反<br> -正向M x N矩阵的2D傅里叶变换<br> -将M x N矩阵的2D傅里叶变换求反<br> <strong>@param-src</strong> 输入数组，可以是真实的，也可以是复杂的。<br> <strong>@param dst</strong> 输出数组，其大小和类型取决于标志。<br> <strong>@param flags</strong> 转换标志，表示#DftFlags的组合。<br> <strong>@param nonzeroRows</strong> 当参数不为零时，函数假设只有输入数组的第一个nonzero行（未设置#DFT_INVERSE）或只有输出数组的第一条nonzeroSrows行（设置了#DFT_INVERSE）包含非零，因此，函数可以更有效地处理其余行并节省一些时间；这种技术对于使用DFT计算阵列互相关或卷积非常有用。</p> 
<pre><code class="prism language-cpp">CV_EXPORTS <span class="token keyword">void</span> <span class="token function">split</span><span class="token punctuation">(</span><span class="token keyword">const</span> Mat<span class="token operator">&amp;</span> src<span class="token punctuation">,</span> Mat<span class="token operator">*</span> mvbegin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>函数cv:：split将多通道阵列拆分为单独的单通道阵列。<br> 如果需要提取单个通道或进行其他复杂的通道置换，请使用mixChannel。<br> <strong>@param src</strong> 输入多通道阵列。<br> <strong>@param mvbegin</strong> 输出数组；数组的数目必须与src匹配。如果需要，阵列本身会被重新分配。</p> 
<pre><code class="prism language-cpp">CV_EXPORTS_W <span class="token keyword">void</span> <span class="token function">magnitude</span><span class="token punctuation">(</span>InputArray x<span class="token punctuation">,</span> InputArray y<span class="token punctuation">,</span> OutputArray magnitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>函数cv:：importance计算由x和y数组的相应元素形成的2D矢量的大小。<br> <strong>@param x</strong> 向量x坐标的浮点数组。<br> <strong>@param y</strong> 矢量y坐标的浮点数组；它的大小必须与x相同。<br> <strong>@param magnitude</strong> 与x大小和类型相同的参数幅度输出阵列。</p> 
<h2><a id="_80"></a>示例代码</h2> 
<h3><a id="fourierTransformh_81"></a>fourierTransform.h</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\highgui\highgui.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\core\core.hpp&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;opencv2\imgproc\imgproc.hpp&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> cv<span class="token punctuation">;</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PROCESS_IMG_SUCESS</span> <span class="token expression"><span class="token number">0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PROCESS_IMG_FAIL</span> <span class="token expression"><span class="token number">1</span></span></span>


<span class="token keyword">namespace</span> ImgEnhance
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//傅里叶变换</span>
	<span class="token keyword">class</span> <span class="token class-name">FourierTransformate</span>
	<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">public</span><span class="token operator">:</span>
		<span class="token function">FourierTransformate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"FourierTransformate is being created"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// 这是构造函数声明</span>
		<span class="token operator">~</span><span class="token function">FourierTransformate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> cout <span class="token operator">&lt;&lt;</span> <span class="token string">"FourierTransformate is being deleted"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token comment">// 这是析构函数声明</span>
		<span class="token keyword">int</span> <span class="token function">FftTransformate</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat srcImage<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>dstImage<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//傅里叶变换	</span>

	<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="fourierTransformcpp_111"></a>fourierTransform.cpp</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"fourierTransform.h"</span></span>


<span class="token keyword">int</span> ImgEnhance<span class="token double-colon punctuation">::</span><span class="token class-name">FourierTransformate</span><span class="token double-colon punctuation">::</span><span class="token function">FftTransformate</span><span class="token punctuation">(</span>cv<span class="token double-colon punctuation">::</span>Mat srcImage<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span>Mat <span class="token operator">&amp;</span>dstImage<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//判断图像是否加载成功</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"图像加载失败!"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//将输入图像扩展到最佳尺寸，边界用0填充</span>
	<span class="token comment">//离散傅里叶变换的运行速度与图像的大小有很大的关系，当图像的尺寸使2，3，5的整数倍时，计算速度最快</span>
	<span class="token comment">//为了达到快速计算的目的，经常通过添加新的边缘像素的方法获取最佳图像尺寸</span>
	<span class="token comment">//函数getOptimalDFTSize()用于返回最佳尺寸，copyMakeBorder()用于填充边缘像素</span>
	<span class="token keyword">int</span> m <span class="token operator">=</span> <span class="token function">getOptimalDFTSize</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span>rows<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token function">getOptimalDFTSize</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span>cols<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat padded<span class="token punctuation">;</span>
	<span class="token function">copyMakeBorder</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> padded<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> m <span class="token operator">-</span> srcImage<span class="token punctuation">.</span>rows<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> n <span class="token operator">-</span> srcImage<span class="token punctuation">.</span>cols<span class="token punctuation">,</span> BORDER_CONSTANT<span class="token punctuation">,</span> <span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> padded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> padded<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">//为傅立叶变换的结果分配存储空间</span>
	<span class="token comment">//将plannes数组组合成一个多通道的数组，两个同搭配，分别保存实部和虚部</span>
	<span class="token comment">//傅里叶变换的结果使复数，这就是说对于每个图像原像素值，会有两个图像值</span>
	<span class="token comment">//此外，频域值范围远远超过图象值范围，因此至少将频域储存在float中</span>
	<span class="token comment">//所以我们将输入图像转换成浮点型，并且多加一个额外通道来存储复数部分</span>
	Mat planes<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token generic-function"><span class="token function">Mat_</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">float</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>padded<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">Mat</span><span class="token double-colon punctuation">::</span><span class="token function">zeros</span><span class="token punctuation">(</span>padded<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> CV_32F<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	Mat complexI<span class="token punctuation">;</span>
	<span class="token function">merge</span><span class="token punctuation">(</span>planes<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> complexI<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> complexI<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> planes<span class="token operator">-&gt;</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token comment">//进行离散傅立叶变换</span>
	<span class="token function">dft</span><span class="token punctuation">(</span>complexI<span class="token punctuation">,</span> complexI<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//将复数转化为幅值，保存在planes[0]</span>
	<span class="token function">split</span><span class="token punctuation">(</span>complexI<span class="token punctuation">,</span> planes<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 将多通道分为几个单通道</span>
	<span class="token function">magnitude</span><span class="token punctuation">(</span>planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> planes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mat magnitudeImage <span class="token operator">=</span> planes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

	<span class="token comment">//傅里叶变换的幅值达到不适合在屏幕上显示，因此我们用对数尺度来替换线性尺度</span>
	<span class="token comment">//进行对数尺度logarithmic scale缩放</span>
	magnitudeImage <span class="token operator">+=</span> <span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">//所有的像素都加1</span>
	<span class="token function">log</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//求自然对数</span>
    <span class="token comment">//剪切和重分布幅度图像限</span>
	<span class="token comment">//如果有奇数行或奇数列，进行频谱裁剪</span>
	magnitudeImage <span class="token operator">=</span> <span class="token function">magnitudeImage</span><span class="token punctuation">(</span><span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">.</span>cols <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">.</span>rows <span class="token operator">&amp;</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


	<span class="token comment">// ---- -------- 下面的是为了显示结果 ---------------</span>
	<span class="token comment">// 一分为四，左上与右下交换，右上与左下交换</span>
	<span class="token comment">// 重新排列傅里叶图像中的象限，使原点位于图像中心</span>
	<span class="token keyword">int</span> cx <span class="token operator">=</span> magnitudeImage<span class="token punctuation">.</span>cols <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> cy <span class="token operator">=</span> magnitudeImage<span class="token punctuation">.</span>rows <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
	Mat <span class="token function">q0</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// ROI区域的左上</span>
	Mat <span class="token function">q1</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ROI区域的右上</span>
	Mat <span class="token function">q2</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> cy<span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ROI区域的左下</span>
	Mat <span class="token function">q3</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> <span class="token function">Rect</span><span class="token punctuation">(</span>cx<span class="token punctuation">,</span> cy<span class="token punctuation">,</span> cx<span class="token punctuation">,</span> cy<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ROI区域的右下</span>
	<span class="token comment">//交换象限（左上与右下进行交换）</span>
	Mat tmp<span class="token punctuation">;</span>
	q0<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	q3<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q0<span class="token punctuation">)</span><span class="token punctuation">;</span>
	tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q3<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//交换象限（右上与左下进行交换）</span>
	q1<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>tmp<span class="token punctuation">)</span><span class="token punctuation">;</span>
	q2<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	tmp<span class="token punctuation">.</span><span class="token function">copyTo</span><span class="token punctuation">(</span>q2<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 归一化</span>
	<span class="token function">normalize</span><span class="token punctuation">(</span>magnitudeImage<span class="token punctuation">,</span> magnitudeImage<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> NORM_MINMAX<span class="token punctuation">)</span><span class="token punctuation">;</span>
	dstImage <span class="token operator">=</span> magnitudeImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//显示效果图</span>
	<span class="token comment">/*imshow("频谱幅值", magnitudeImage);*/</span>


	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="testcpp_190"></a>test.cpp</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">"fourierTransform.h"</span></span>

ImgEnhance<span class="token double-colon punctuation">::</span>FourierTransformate ImgFft<span class="token punctuation">;</span><span class="token comment">//傅里叶变换</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">// 读取源图像及判断</span>
	cv<span class="token double-colon punctuation">::</span>Mat srcImage <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">"text.jpg"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>srcImage<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"原始图"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"原始图"</span><span class="token punctuation">,</span> srcImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 转化为灰度图像</span>
	cv<span class="token double-colon punctuation">::</span>Mat srcGray<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>srcImage<span class="token punctuation">.</span><span class="token function">channels</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		cv<span class="token double-colon punctuation">::</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>srcImage<span class="token punctuation">,</span> srcGray<span class="token punctuation">,</span> COLOR_RGB2GRAY<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		srcGray <span class="token operator">=</span> srcImage<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"灰度图"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"灰度图"</span><span class="token punctuation">,</span> srcGray<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//傅里叶变换	</span>
	Mat fftImage<span class="token punctuation">;</span>
	ImgFft<span class="token punctuation">.</span><span class="token function">FftTransformate</span><span class="token punctuation">(</span>srcGray<span class="token punctuation">,</span> fftImage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"傅里叶变换结果图"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	cv<span class="token double-colon punctuation">::</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"傅里叶变换结果图"</span><span class="token punctuation">,</span> fftImage<span class="token punctuation">)</span><span class="token punctuation">;</span>

	cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_231"></a>结果展示</h2> 
<p><img src="https://images2.imgbox.com/51/51/padhEtum_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/997b132697118415aab2d83d5ae55ee9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深度总结：软件设计七大原则</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0e641293225daecfae214b738a649622/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机学习心得</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>