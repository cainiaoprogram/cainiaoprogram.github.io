<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>我真的懂索引吗？——groupby、resample结果无法输出，重新设置索引reset_index - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="我真的懂索引吗？——groupby、resample结果无法输出，重新设置索引reset_index" />
<meta property="og:description" content="关键字：Pandas，groupby，resample
结果，列名，表头，多层，错行，多行
重新设置索引，索引转换为数据
一直很难描述这个问题，陆陆续续困扰了好久
dataframe格式数据，经过groupby、resample等操作后
结果显示表头（列名）不止一行
想把前2列也作为结果记录到数据库，或者读取整行4个字段信息，一直没有好的办法
在网上找了这些问题
1、dataframe表头多行，列名多行，
2、dataframe多层列名，多层表头
3、列名错行、表头错行、标题错行
4、dataframe groupby，resample后保存
5、dataframe groupby，resample后第一行为空
这应该是一个高手沉默，小白流泪的问题了。。。
没人带路真的要走好多弯路
直到我慢慢意识到，前2列应该是索引
那么问题就转成了，索引能不能转换为数据？或者能不能重新设置索引？
重设索引？
重设索引我会啊！
df= df.reset_index() # .reset_index()函数 难道就这么简单？输出看看：
世界安静了有木有！！！
整个人都好了有木有！！！
经常写的reset_index()居然有这个效果！！！
原因就是我不知道前两列原来就叫：“索引”。。。
送给和我一样彷徨过的朋友们，good luck
另一个方法：
df.groupby(‘books’, as_index=False).sum()
可以对比一下as_index=True的区别
grouby(by=None, axis=0, level=None, as_index=True, sort=True, group_keys=True, squeeze=False, **kwargs)
参考文献：https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby
附录：
reset_index()
函数原型:DataFrame.reset_index(level=None, drop=False, inplace=False, col_level=0, col_fill=’’)
参数解释:
level：int、str、tuple或list，默认无，仅从索引中删除给定级别。默认情况下移除所有级别。控制了具体要还原的那个等级的索引
drop：drop为False则索引列会被还原为普通列，否则会丢失
inplace：默认为false，适当修改DataFrame(不要创建新对象)
col_level：int或str，默认值为0，如果列有多个级别，则确定将标签插入到哪个级别。默认情况下，它将插入到第一级。
col_fill：对象，默认‘’，如果列有多个级别，则确定其他级别的命名方式。如果没有，则重复索引名
注：reset_index还原分为两种类型，第一种是对原DataFrame进行reset，第二种是对使用过set_index()函数的DataFrame进行reset" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bca2c629b8c6cce9d0e8d099cb2f0df7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-23T09:07:14+08:00" />
<meta property="article:modified_time" content="2020-06-23T09:07:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">我真的懂索引吗？——groupby、resample结果无法输出，重新设置索引reset_index</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>关键字：Pandas，groupby，resample<br> 结果，列名，表头，多层，错行，多行<br> 重新设置索引，索引转换为数据</p> 
<p>一直很难描述这个问题，陆陆续续困扰了好久<br> dataframe格式数据，经过groupby、resample等操作后<br> 结果显示表头（列名）不止一行<br> <img src="https://images2.imgbox.com/79/e6/WsKZCQYw_o.png" alt="在这里插入图片描述"><br> 想把前2列也作为结果记录到数据库，或者读取整行4个字段信息，一直没有好的办法</p> 
<p>在网上找了这些问题<br> 1、dataframe表头多行，列名多行，<br> 2、dataframe多层列名，多层表头<br> 3、列名错行、表头错行、标题错行<br> 4、dataframe groupby，resample后保存<br> 5、dataframe groupby，resample后第一行为空</p> 
<p>这应该是一个高手沉默，小白流泪的问题了。。。<br> 没人带路真的要走好多弯路</p> 
<p>直到我慢慢意识到，前2列应该是索引<br> 那么问题就转成了，索引能不能转换为数据？或者能不能重新设置索引？<br> 重设索引？<br> 重设索引我会啊！</p> 
<pre><code class="prism language-python">df<span class="token operator">=</span> df<span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># .reset_index()函数</span>
</code></pre> 
<p>难道就这么简单？输出看看：<br> <img src="https://images2.imgbox.com/bd/4a/Ix5J8dkf_o.png" alt="在这里插入图片描述"><br> 世界安静了有木有！！！<br> 整个人都好了有木有！！！<br> 经常写的reset_index()居然有这个效果！！！<br> 原因就是我不知道前两列原来就叫：“索引”。。。<br> 送给和我一样彷徨过的朋友们，good luck</p> 
<p>另一个方法：<br> df.groupby(‘books’, as_index=False).sum()<br> 可以对比一下as_index=True的区别</p> 
<p>grouby(by=None, axis=0, level=None, as_index=True, sort=True, group_keys=True, squeeze=False, **kwargs)<br> 参考文献：https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.groupby.html#pandas.DataFrame.groupby</p> 
<p>附录：<br> reset_index()<br> 函数原型:DataFrame.reset_index(level=None, drop=False, inplace=False, col_level=0, col_fill=’’)<br> 参数解释:<br> level：int、str、tuple或list，默认无，仅从索引中删除给定级别。默认情况下移除所有级别。控制了具体要还原的那个等级的索引<br> drop：drop为False则索引列会被还原为普通列，否则会丢失<br> inplace：默认为false，适当修改DataFrame(不要创建新对象)<br> col_level：int或str，默认值为0，如果列有多个级别，则确定将标签插入到哪个级别。默认情况下，它将插入到第一级。<br> col_fill：对象，默认‘’，如果列有多个级别，则确定其他级别的命名方式。如果没有，则重复索引名<br> 注：reset_index还原分为两种类型，第一种是对原DataFrame进行reset，第二种是对使用过set_index()函数的DataFrame进行reset</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/25a5eec4911dc0b45282f7e26aa92928/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决windows10网络适配器出现问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4ea81a19f46f2b8688bc4f6d9ef6d92a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mercurial使用_使用Mercurial管理源代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>