<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux namespace基本操作命令 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux namespace基本操作命令" />
<meta property="og:description" content="1.创建两个namespace
ip netns add 空间1 ip netns add 空间2 备注：
删除namespace命令为：ip netns delete 空间名称
查看所有namespace命令为：ip netns ls
2.为两个namespace创建双向通信管道pair
ip link add type veth 备注：pair是成对出现的，一次创建会生成两个，默认是在名称后拼接数字来区分
3.查看系统中所有的通信管道pair
ip link
备注：删除pair：ip link delete pair名称（即veth0）
4.将创建出来的管道pair设置到对应的namespace中
ip link set veth0 netns 空间1 ip link set veth1 netns 空间2 5.更改两个通信管道的状态，配置ip地址，并启用
ip netns exec 空间1 ip link set veth0 up ip netns exec 空间1 ip addr add 10.0.1.1/24 dev veth0 ip netns exec 空间1 ip route ip netns exec 空间2 ip link set veth0 up ip netns exec 空间2 ip addr add 10." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9578228acb3dec852667b741c9c9b1ce/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-29T14:25:18+08:00" />
<meta property="article:modified_time" content="2020-10-29T14:25:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux namespace基本操作命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1.创建两个namespace</p> 
<pre><code class="prism language-bash">ip netns add 空间1
</code></pre> 
<pre><code class="prism language-bash">ip netns add 空间2
</code></pre> 
<p>备注：<br> 删除namespace命令为：<code>ip netns delete 空间名称</code><br> 查看所有namespace命令为：<code>ip netns ls</code></p> 
<p>2.为两个namespace创建双向通信管道pair</p> 
<pre><code class="prism language-bash">ip <span class="token function">link</span> add <span class="token function">type</span> veth
</code></pre> 
<p>备注：pair是成对出现的，一次创建会生成两个，默认是在名称后拼接数字来区分</p> 
<p>3.查看系统中所有的通信管道pair<br> ip link<br> 备注：删除pair：<code>ip link delete pair名称（即veth0）</code><br> 4.将创建出来的管道pair设置到对应的namespace中</p> 
<pre><code class="prism language-bash"> ip <span class="token function">link</span> <span class="token keyword">set</span> veth0 netns 空间1
 ip <span class="token function">link</span> <span class="token keyword">set</span> veth1 netns 空间2
</code></pre> 
<p>5.更改两个通信管道的状态，配置ip地址，并启用</p> 
<pre><code class="prism language-bash">ip netns <span class="token function">exec</span> 空间1 ip <span class="token function">link</span> <span class="token keyword">set</span> veth0 up
ip netns <span class="token function">exec</span> 空间1 ip addr add 10.0.1.1/24 dev veth0
ip netns <span class="token function">exec</span> 空间1 ip route

ip netns <span class="token function">exec</span> 空间2 ip <span class="token function">link</span> <span class="token keyword">set</span> veth0 up
ip netns <span class="token function">exec</span> 空间2 ip addr add 10.0.1.2/24 dev veth1
ip netns <span class="token function">exec</span> 空间2 ip route
</code></pre> 
<p>6.进入namespace</p> 
<pre><code class="prism language-bash">ip netns <span class="token function">exec</span> 空间名称 <span class="token function">bash</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/03f73751aaaafc3978d40bb0cb7f78de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">1、Tomcat&amp;Http协议</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3bcaee35d06cd43ad1a21934c62f00c7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue实现拍照人脸识别功能带人脸选中框</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>