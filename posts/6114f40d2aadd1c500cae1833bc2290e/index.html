<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue 项目 实现阻止浏览器记住密码功能 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue 项目 实现阻止浏览器记住密码功能" />
<meta property="og:description" content="前言 通常浏览器会主动识别密码表单，在你登录成功之后提示保存密码 ， 密码保存到浏览器的 密码管理器中 ( 如下是谷歌浏览器 )
这种行为是浏览器的行为 ，这种操作也是为了方便用户的使用
现在的一个需求是要阻止这个保存密码的弹窗提示 实现方法 查找资料发现的一些方法：
使用 autocomplete=&#34;off&#34;（现代浏览器许多都不支持）使用 autocomplete=&#34;new-password&#34;在真正的账号密码框之前增加相同 name 的 input 框使用 readonly 属性，在聚焦时移除该属性初始化 input 框的 type 属性为 text，聚焦时修改为 password使用 type=&#34;text&#34;，手动替换文本框内容为星号 “*” 或者 小圆点 “●” 可以看到实现这个需求有许许多多的方法，但是实际上确有各种各样的问题，下面是我自己测试的几个方法
方法一 密码框添加 autocomplete=&#34;new-password&#34; 属性
根 index.html 文件添加 meta 元数据 (该步骤可以省略)
密码输入框 &lt;el-input prefix-icon=&#34;el-icon-lock&#34; type=&#34;password&#34; name=&#34;xxxx&#34; placeholder=&#34;密码&#34; v-model=&#34;password&#34; autocomplete=&#34;new-password&#34; &gt; &lt;/el-input&gt; index.html 文件 (该步骤可以省略) &lt;!DOCTYPE html&gt; &lt;html lang=&#34;&#34;&gt; &lt;head&gt; ..... &lt;meta name=&#34;autocomplete&#34; content=&#34;off&#34;&gt; ....... &lt;/head&gt; ...... &lt;body&gt; ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6114f40d2aadd1c500cae1833bc2290e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-05T16:37:51+08:00" />
<meta property="article:modified_time" content="2023-08-05T16:37:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue 项目 实现阻止浏览器记住密码功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言</h2> 
<p>通常浏览器会主动识别密码表单，在你登录成功之后提示保存密码 ， 密码保存到浏览器的 密码管理器中 ( 如下是谷歌浏览器 )</p> 
<p><img alt="" height="318" src="https://images2.imgbox.com/21/03/gOJZGaVr_o.png" width="278"></p> 
<hr> 
<p><img alt="" height="614" src="https://images2.imgbox.com/75/ef/k60MnDGT_o.png" width="1200"></p> 
<hr> 
<blockquote> 
 <p>这种行为是浏览器的行为 ，这种操作也是为了方便用户的使用</p> 
 <p><strong>现在的一个需求是要阻止这个保存密码的弹窗提示 </strong></p> 
</blockquote> 
<h2 style="background-color:transparent;">实现方法</h2> 
<p><strong>查找资料发现的一些方法：</strong></p> 
<ol><li>使用 autocomplete="off"（现代浏览器许多都不支持）</li><li>使用 autocomplete="new-password"</li><li>在真正的账号密码框之前增加相同 name 的 input 框</li><li>使用 <strong>readonly </strong>属性，在聚焦时移除该属性</li><li>初始化 input 框的 type 属性为 text，聚焦时修改为 <strong>password</strong></li><li>使用 type="text"，手动替换文本框内容为星号 “*” 或者 小圆点 “●”</li></ol> 
<hr> 
<blockquote> 
 <p>可以看到实现这个需求有许许多多的方法，但是实际上确有各种各样的问题，下面是我自己测试的几个方法</p> 
</blockquote> 
<h3>方法一</h3> 
<blockquote> 
 <p>密码框添加 <strong>autocomplete="new-password"</strong> 属性</p> 
 <p>根<strong> index.html</strong> 文件添加 meta 元数据 (该步骤可以省略)</p> 
</blockquote> 
<h4>密码输入框</h4> 
<pre><code class="language-html">  &lt;el-input
      prefix-icon="el-icon-lock"
      type="password"
      name="xxxx"
      placeholder="密码"
      v-model="password"
      autocomplete="new-password"
    &gt;
  &lt;/el-input&gt;</code></pre> 
<hr> 
<h4>index.html 文件 (该步骤可以省略)</h4> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=""&gt;
  &lt;head&gt;
   .....
    &lt;meta name="autocomplete" content="off"&gt; 
   .......
  &lt;/head&gt;
 ......
  &lt;body&gt;
   ........
  &lt;/body&gt;
&lt;/html&gt;</code></pre> 
<hr> 
<h4> 注意</h4> 
<p>这种方法可以适配 <strong>谷歌浏览器 、 Edge 、 IE 浏览器</strong></p> 
<p><strong>不兼容 火狐浏览器</strong></p> 
<hr> 
<h3>方法二</h3> 
<blockquote> 
 <p>新添加两个输入框 ， <strong>type </strong>分别设置为 <strong>text </strong>和 <strong>password</strong></p> 
 <p>设置 <strong>display： none </strong>属性让其隐藏</p> 
</blockquote> 
<hr> 
<h4>具体代码</h4> 
<pre><code class="language-html"> &lt;div class="login-location"&gt;
        &lt;!-- 隐藏的输入框 --&gt;
        &lt;el-input
          style="display: none"
          type="text"
          name="xxxx"
          autocomplete="off"
        &gt;
        &lt;/el-input&gt;
        &lt;el-input
          style="display: none"
          type="password"
          name="xxxx"
          autocomplete="off"
        &gt;
        &lt;/el-input&gt;
		&lt;!-- 真实输入框 --&gt;
        &lt;el-input
          ref="pass"
          prefix-icon="el-icon-lock"
          @keyup.enter.native="userLogin()"
          v-model="password"
          type="password"
          placeholder="密码"
          name="xxxx"
        &gt;
        &lt;/el-input&gt;
  &lt;/div&gt;</code></pre> 
<hr> 
<h4>注意</h4> 
<blockquote> 
 <p>这种方法可以适配 <strong>谷歌浏览器 、 Edge 、 IE 浏览器</strong></p> 
 <p><strong>不兼容 火狐浏览器</strong></p> 
</blockquote> 
<hr> 
<h3>方法三</h3> 
<blockquote> 
 <ul><li> <p>把密码框的 <strong>type </strong>定义为 text ，这样<strong>浏览器就无法正确自动识别 密码</strong></p> </li><li> <p>给输入框绑定事件 ， 每次输入数据触发事件， 把 密码 替换成 圆点 ●</p> </li><li> <p>给输入框右侧 小眼睛手动绑定事件 ，控制密码的显示隐藏</p> </li></ul> 
</blockquote> 
<hr> 
<h4>具体代码</h4> 
<pre><code class="language-html"> &lt;div class="login-location"&gt;
            &lt;el-input
              prefix-icon="el-icon-lock"
              v-model="pwdCover"
              type="text"
              name="pwd"
              id="pwd"
              placeholder="密码"
              autocomplete="off"
              @input="setPassword"
              @keyup.enter.native="userLogin()"
            &gt;
              &lt;i
                slot="suffix"
                class="el-icon-view"
                style="margin-top: 10px; margin-right: 10px; font-size: 18px"
                @click="hidePassword"
              &gt;&lt;/i&gt;
            &lt;/el-input&gt;
     &lt;/div&gt;</code></pre> 
<pre><code class="language-javascript"> // 输入框输入事件
setPassword(val) {
      if (this.isShowPassword) {
        this.password = val;
      } else {
        let reg = /[0-9a-zA-Z]/g; // 只允许输入字母和数字
        let nDot = /[^●]/g; // 非圆点字符
        let index = -1; // 新输入的字符位置
        let lastChar = void 0; // 新输入的字符
        let realArr = this.password.split(""); // 真实密码数组
        let coverArr = val.split(""); // 文本框显示密码数组
        let coverLen = val.length; // 文本框字符串长度
        let realLen = this.password.length; // 真实密码长度
        // 找到新输入的字符及位置
        coverArr.forEach((el, idx) =&gt; {
          if (nDot.test(el)) {
            index = idx;
            lastChar = el;
          }
        });
        // 判断输入的字符是否符合规范，不符合的话去掉该字符
        if (lastChar &amp;&amp; !reg.test(lastChar)) {
          coverArr.splice(index, 1);
          this.pwdCover = coverArr.join("");
          return;
        }
        if (realLen &lt; coverLen) {
          // 新增字符
          realArr.splice(index, 0, lastChar);
        } else if (coverLen &lt;= realLen &amp;&amp; index !== -1) {
          // 替换字符（选取一个或多个字符直接替换）
          realArr.splice(index, realLen - (coverLen - 1), lastChar);
        } else {
          // 删除字符，因为 val 全是 ● ，没有办法匹配，不知道是从末尾还是中间删除的字符，删除了几个，不好对 password 处理，所以可以通过光标的位置和 val 的长度来判断
          let pos = document.getElementById("pwd").selectionEnd; // 获取光标位置
          realArr.splice(pos, realLen - coverLen);
        }
        // 将 pwdCover 替换成 ●
        this.pwdCover = val.replace(/\S/g, "●");
        this.password = realArr.join("");
      }
    },
     // 点击右侧小眼睛控制显示隐藏
    hidePassword() {
      if (!this.isShowPassword) {
        // console.log("显示");
        this.isShowPassword = true;
        this.pwdCover = this.password;
      } else {
        // console.log("隐藏");
        this.isShowPassword = false;
        this.pwdCover = this.pwdCover.replace(/\S/g, "●");
      }
    },
     // 登录的逻辑
      userLogin() {
      if (this.account === "admin" &amp;&amp; this.password === "admin") {
        this.loading = true;
        setTimeout(() =&gt; {
          this.$router.push({ path: "/main" });
        }, 600);
        this.$message.success("登录成功");
      }
    }</code></pre> 
<hr> 
<h4>注意</h4> 
<blockquote> 
 <p>这种方法可以适配 <strong>谷歌浏览器 、 Edge 、 IE 浏览器</strong></p> 
 <p><strong>同时兼容 火狐浏览器</strong></p> 
 <p>目前本地测试暂未发现问题</p> 
</blockquote> 
<hr> 
<h2> 补充</h2> 
<p>通常情况下，密码输入框都是禁用 <strong>回退、剪切、复制、粘贴 </strong>功能 ， 可以给输入框添加<strong> keydown 键盘按下事件</strong></p> 
<p> </p> 
<pre><code class="language-html"> &lt;div class="login-location"&gt;
            &lt;el-input
              prefix-icon="el-icon-lock"
              v-model="pwdCover"
              type="text"
              name="pwd"
              id="pwd"
              placeholder="密码"
              autocomplete="off"
              @input="setPassword"
              @keyup.enter.native="userLogin()"
              @keydown.native="onKeydown($event)"
            &gt;
              &lt;i
                slot="suffix"
                class="el-icon-view"
                style="margin-top: 10px; margin-right: 10px; font-size: 18px"
                @click="hidePassword"
              &gt;&lt;/i&gt;
            &lt;/el-input&gt;
  &lt;/div&gt;</code></pre> 
<hr> 
<pre><code class="language-javascript">  onKeydown(e) {
      // 禁用值的回退、剪切、复制、粘贴功能,即Ctrl+z、Ctrl+x、Ctrl+c、Ctrl+v
      let keycode;
      if (e.ctrlKey) {
        if (window.event) {
          keycode = e.keyCode; // IE
        } else if (e.which) {
          keycode = e.which; // Netscape/Firefox/Opera
        }

        if (
          90 === keycode ||
          88 === keycode ||
          67 === keycode ||
          86 === keycode
        ) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
      }
      return true;
    }</code></pre> 
<hr> 
<p>文章如有错误，恳请大家提出问题，本人不胜感激 。 不懂的地方可以评论，我都会 一 一 回复</p> 
<p>文章对大家有帮助的话，希望大家能动手点赞鼓励，大家未来一起努力 长路漫漫，道阻且长</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/33fc34a568b41facabceb4748c34317a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【Spring】Spring AOP 初识及实现原理解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a1e19a1124269e3551976825fc38529c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LOL-v2数据集和VE-LOL数据集的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>