<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ST7789-TFT屏幕驱动（整理有stm32/51单片机/arduino等驱动代码） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ST7789-TFT屏幕驱动（整理有stm32/51单片机/arduino等驱动代码）" />
<meta property="og:description" content="ST7789-TFT屏幕驱动 &amp; 整理有stm32/51单片机/arduino等驱动代码 前言关于ST7789stm32驱动引脚接线代码移植 文件复制 端口修改 显示函数 中文汉字数组 图片 其他单片机驱动51单片机arduino/ESP32 总结 前言 不久前我们收到用户反馈问题中，多次反馈各种不同型号的屏幕驱动不起来，从0开始编写代码花费大量时间，也有不少初次学习驱动屏幕代码编写经验过少等问题，为此我们决定以文章的形式发布到CSDN来分享相应的一些经验以及收集整理好的资料，希望可以帮助用户更加简单的学习或快速移植代码进行项目开发。
后续我们将陆续分享有关ST7789、GC9A01、ST7735、ILI9341等驱动IC的屏幕驱动案例。
还是老样子需要整理好的代码可以在评论区留言或私信邮箱！
关于ST7789 市面采用ST7789驱动IC的屏幕不算少见，本人有幸使用过的屏幕中有一款1.3寸和一款1.54寸的屏幕驱动芯片为ST7789，两者的分辨率均为240x240，网上搜集加上自己编写以及移植整理有stm32f10x、stm32f407、arduino、stc89c516、ESP32等单片机代码，需要整理好的代码可以在评论区留言或私信邮箱！
综合了解并观察屏幕一下的一些参数之后开始进行驱动。
硬件接口使用的 2.54mm 间距的排针接口，这使用杜邦线进行连接，需要设计到自己的PCB上高度也是刚好匹配上面的铜柱做定位使用的。
ST7789参数供电电压3.3~5.5V驱动ICST7789分辨率240x240尺寸1.3 / 1.54寸驱动接口4线SPI 产商在屏幕设计上添加了3.3V稳压芯片以及电平转换芯片，使得这款原本3.3V供电的裸屏可以兼容5V和3.3V的单片机，这也意味着arduino和51单片机的用户也可以驱动这款屏幕了，虽然51单片机性能很一般但总比不能驱动的好。
最后了解各个引脚功能之后就可以开始进行驱动
引脚名称引脚功能VCC电源正，3.3 - 5V，需要与通信电平一致GND电源负，地CS片选，低电平使能RST复位，低电平使能DC数据/命令选择，低电平命令，高电平数据SDASPI数据输入端口SCLSPI时钟信号输入端口BLK背光，悬空使能接地关闭，默认上拉至3.3V stm32驱动 引脚接线 代码方面先按照下表接好线烧录程序之后再对代码移植的关键部分进行说明
stm32f10xST77893V3VINGNDGNDCSPB6RSTPA6DCPA7SDAPA4SCLPA5BLKPB7 BLK背光引脚不用可以悬空不接
默认的代码烧录进行之后显示上面图片中大大的 优信电子logo，先把示例代码驱动起来，如果示例代码驱动不起来先检查一下接线供电方面的问题，不然后面代码改了半天没有用找问题就和我刚驱动的时候一样头皮发麻。
驱动成功之后用户可以开始移植代码。
代码移植 文件复制 将 lcd、lcd_init的C文件和h文件复制到自己的工程里面，这四个文件包含屏幕初始化以及驱动画点划线显示文字图像的代码。
另外还有两个文件为image.h和lcdfont.h，这两个文件分别存储显示图片数组与显示文字数组。
复制到自己工程中编译后会报错，因为缺少了pbdata.h中的毫秒级延时函数，可以把原工程中的ms延时函数复制过来也可以使用自己编写的，名称与下面的相同即可
void delay_ms(u16 a) 添加好文件到工程里面之后再次编译一般不会报错，如果仍然报错就只能看具体报错信息去修改了
和上面的接线不变，编写下面主函数先进行测试
int main(void) { LCD_Init(); LCD_Fill(0,0,LCD_W,LCD_H,WHITE); //填充为白色背景色 while(1) { LCD_ShowPicture(0,0,LCD_W,LCD_H,YXDZ_logo); //显示一张图片 } } 需要用户修改的接口一般有一下几个点
端口修改 lcdfont.h文件中包含对使用引脚的宏定义，修改其中的GPIO以及引脚即可修改使用的端口
//-----------------LCD端口定义---------------- #define LCD_SCLK_Clr() GPIO_ResetBits(GPIOA,GPIO_Pin_5)//SCL=SCLK #define LCD_SCLK_Set() GPIO_SetBits(GPIOA,GPIO_Pin_5) #define LCD_MOSI_Clr() GPIO_ResetBits(GPIOA,GPIO_Pin_4)//SDA=MOSI #define LCD_MOSI_Set() GPIO_SetBits(GPIOA,GPIO_Pin_4) #define LCD_RES_Clr() GPIO_ResetBits(GPIOA,GPIO_Pin_6)//RES #define LCD_RES_Set() GPIO_SetBits(GPIOA,GPIO_Pin_6) #define LCD_DC_Clr() GPIO_ResetBits(GPIOA,GPIO_Pin_7)//DC #define LCD_DC_Set() GPIO_SetBits(GPIOA,GPIO_Pin_7) #define LCD_CS_Clr() GPIO_ResetBits(GPIOB,GPIO_Pin_6)//CS #define LCD_CS_Set() GPIO_SetBits(GPIOB,GPIO_Pin_6) #define LCD_BLK_Clr() GPIO_ResetBits(GPIOB,GPIO_Pin_7)//BLK #define LCD_BLK_Set() GPIO_SetBits(GPIOB,GPIO_Pin_7) 但值得注意的是仅仅修改这里的宏定义是没办法使用的，在lcdfont." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/185eb64f52e6772a087833fc28d3b353/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-15T13:53:58+08:00" />
<meta property="article:modified_time" content="2022-09-15T13:53:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ST7789-TFT屏幕驱动（整理有stm32/51单片机/arduino等驱动代码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ST7789-TFT屏幕驱动 &amp; 整理有stm32/51单片机/arduino等驱动代码</h4> 
 <ul><li><a href="#_4" rel="nofollow">前言</a></li><li><a href="#ST7789_12" rel="nofollow">关于ST7789</a></li><li><a href="#stm32_47" rel="nofollow">stm32驱动</a></li><li><ul><li><a href="#_49" rel="nofollow">引脚接线</a></li><li><a href="#_70" rel="nofollow">代码移植</a></li><li><ul><li><a href="#nbspnbspnbspnbspnbspnbspnbsp_72" rel="nofollow">       文件复制</a></li><li><a href="#nbspnbspnbspnbspnbspnbspnbsp_101" rel="nofollow">       端口修改</a></li><li><a href="#nbspnbspnbspnbspnbspnbspnbsp_157" rel="nofollow">       显示函数</a></li><li><a href="#nbspnbspnbspnbspnbspnbspnbsp_211" rel="nofollow">       中文汉字数组</a></li><li><a href="#nbspnbspnbspnbspnbspnbspnbsp_250" rel="nofollow">       图片</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_264" rel="nofollow">其他单片机驱动</a></li><li><ul><li><a href="#51_268" rel="nofollow">51单片机</a></li><li><a href="#arduinoESP32_272" rel="nofollow">arduino/ESP32</a></li></ul> 
  </li><li><a href="#_293" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/12/73/Jkk1ZZCK_o.jpg" alt="请添加图片描述" width="200"></p> 
<h2><a id="_4"></a>前言</h2> 
<p>       不久前我们收到用户反馈问题中，多次反馈各种不同型号的屏幕驱动不起来，从0开始编写代码花费大量时间，也有不少初次学习驱动屏幕代码编写经验过少等问题，为此我们决定以文章的形式发布到CSDN来分享相应的一些经验以及收集整理好的资料，希望可以帮助用户更加简单的学习或快速移植代码进行项目开发。</p> 
<p>       后续我们将陆续分享有关<code>ST7789</code>、<code>GC9A01</code>、<code>ST7735</code>、<code>ILI9341</code>等驱动IC的屏幕驱动案例。</p> 
<p>       还是老样子需要整理好的代码可以在评论区留言或私信邮箱！</p> 
<h2><a id="ST7789_12"></a>关于ST7789</h2> 
<p>       市面采用<code>ST7789</code>驱动IC的屏幕不算少见，本人有幸使用过的屏幕中有一款<code>1.3寸</code>和一款<code>1.54寸</code>的屏幕驱动芯片为<code>ST7789</code>，两者的分辨率均为<code>240x240</code>，网上搜集加上自己编写以及移植整理有stm32f10x、stm32f407、arduino、stc89c516、ESP32等单片机代码，需要整理好的代码可以在评论区留言或私信邮箱！</p> 
<p><img src="https://images2.imgbox.com/f5/e6/PidNQ1Vi_o.jpg" alt="请添加图片描述" width="200"></p> 
<p><img src="https://images2.imgbox.com/b6/23/Ctwn8Jbv_o.jpg" alt="请添加图片描述" width="200"></p> 
<p>       综合了解并观察屏幕一下的一些参数之后开始进行驱动。</p> 
<p>       硬件接口使用的 <code>2.54mm</code> 间距的排针接口，这使用杜邦线进行连接，需要设计到自己的PCB上高度也是刚好匹配上面的铜柱做定位使用的。</p> 
<table><thead><tr><th>ST7789</th><th>参数</th></tr></thead><tbody><tr><td>供电电压</td><td>3.3~5.5V</td></tr><tr><td>驱动IC</td><td>ST7789</td></tr><tr><td>分辨率</td><td>240x240</td></tr><tr><td>尺寸</td><td>1.3 / 1.54寸</td></tr><tr><td>驱动接口</td><td>4线SPI</td></tr></tbody></table> 
<p>       产商在屏幕设计上添加了<code>3.3V稳压</code>芯片以及电平转换芯片，使得这款原本3.3V供电的裸屏可以<code>兼容5V和3.3V</code>的单片机，这也意味着<code>arduino</code>和<code>51单片机</code>的用户也可以驱动这款屏幕了，虽然51单片机性能很一般但总比不能驱动的好。</p> 
<p>       最后了解各个引脚功能之后就可以开始进行驱动</p> 
<table><thead><tr><th>引脚名称</th><th>引脚功能</th></tr></thead><tbody><tr><td>VCC</td><td>电源正，3.3 - 5V，需要与通信电平一致</td></tr><tr><td>GND</td><td>电源负，地</td></tr><tr><td>CS</td><td>片选，低电平使能</td></tr><tr><td>RST</td><td>复位，低电平使能</td></tr><tr><td>DC</td><td>数据/命令选择，低电平命令，高电平数据</td></tr><tr><td>SDA</td><td>SPI数据输入端口</td></tr><tr><td>SCL</td><td>SPI时钟信号输入端口</td></tr><tr><td>BLK</td><td>背光，悬空使能接地关闭，默认上拉至3.3V</td></tr></tbody></table> 
<h2><a id="stm32_47"></a>stm32驱动</h2> 
<h3><a id="_49"></a>引脚接线</h3> 
<p>       代码方面先按照下表接好线烧录程序之后再对代码移植的关键部分进行说明</p> 
<table><thead><tr><th>stm32f10x</th><th>ST7789</th></tr></thead><tbody><tr><td>3V3</td><td>VIN</td></tr><tr><td>GND</td><td>GND</td></tr><tr><td>CS</td><td>PB6</td></tr><tr><td>RST</td><td>PA6</td></tr><tr><td>DC</td><td>PA7</td></tr><tr><td>SDA</td><td>PA4</td></tr><tr><td>SCL</td><td>PA5</td></tr><tr><td>BLK</td><td>PB7</td></tr></tbody></table> 
<p>       <code>BLK背光</code>引脚不用可以悬空不接</p> 
<p>       默认的代码烧录进行之后显示上面图片中大大的 <code>优信电子logo</code>，先把示例代码驱动起来，如果示例代码驱动不起来先检查一下接线供电方面的问题，不然后面代码改了半天没有用找问题就和我刚驱动的时候一样头皮发麻。</p> 
<p><img src="https://images2.imgbox.com/ae/d9/WsdquS0G_o.jpg" alt="请添加图片描述" width="200"><br>        驱动成功之后用户可以开始移植代码。</p> 
<h3><a id="_70"></a>代码移植</h3> 
<h4><a id="nbspnbspnbspnbspnbspnbspnbsp_72"></a>       文件复制</h4> 
<p>       将 <code>lcd</code>、<code>lcd_init</code>的<code>C文件</code>和<code>h文件</code>复制到自己的工程里面，这四个文件包含屏幕初始化以及驱动画点划线显示文字图像的代码。<br>        另外还有两个文件为<code>image.h</code>和<code>lcdfont.h</code>，这两个文件分别存储显示图片数组与显示文字数组。</p> 
<p>       复制到自己工程中编译后会报错，因为缺少了<code>pbdata.h</code>中的<code>毫秒级延时函数</code>，可以把原工程中的ms延时函数复制过来也可以使用自己编写的，名称与下面的相同即可</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">delay_ms</span><span class="token punctuation">(</span>u16 a<span class="token punctuation">)</span>
</code></pre> 
<p>       添加好文件到工程里面之后再次编译一般不会报错，如果仍然报错就只能看具体报错信息去修改了</p> 
<p>       和上面的接线不变，编写下面主函数先进行测试</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">LCD_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">LCD_Fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>LCD_W<span class="token punctuation">,</span>LCD_H<span class="token punctuation">,</span>WHITE<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//填充为白色背景色</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">LCD_ShowPicture</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>LCD_W<span class="token punctuation">,</span>LCD_H<span class="token punctuation">,</span>YXDZ_logo<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//显示一张图片</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>       需要用户修改的接口一般有一下几个点</p> 
<h4><a id="nbspnbspnbspnbspnbspnbspnbsp_101"></a>       端口修改</h4> 
<p>       <code>lcdfont.h</code>文件中包含对使用引脚的宏定义，修改其中的<code>GPIO</code>以及<code>引脚</code>即可修改使用的端口</p> 
<pre><code class="prism language-c"><span class="token comment">//-----------------LCD端口定义---------------- </span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_SCLK_Clr</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_5<span class="token punctuation">)</span></span><span class="token comment">//SCL=SCLK</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_SCLK_Set</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_5<span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_MOSI_Clr</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_4<span class="token punctuation">)</span></span><span class="token comment">//SDA=MOSI</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_MOSI_Set</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_4<span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_RES_Clr</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_6<span class="token punctuation">)</span></span><span class="token comment">//RES</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_RES_Set</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_6<span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_DC_Clr</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_7<span class="token punctuation">)</span></span><span class="token comment">//DC</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_DC_Set</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_7<span class="token punctuation">)</span></span></span>
 		     
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_CS_Clr</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_Pin_6<span class="token punctuation">)</span></span><span class="token comment">//CS</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_CS_Set</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_Pin_6<span class="token punctuation">)</span></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_BLK_Clr</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token function">GPIO_ResetBits</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_Pin_7<span class="token punctuation">)</span></span><span class="token comment">//BLK</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">LCD_BLK_Set</span><span class="token expression"><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_Pin_7<span class="token punctuation">)</span></span></span>
</code></pre> 
<p>       但值得注意的是仅仅修改这里的<code>宏定义</code>是没办法使用的，在<code>lcdfont.c</code>文件中包含着对<code>GPIO引脚</code>以及<code>时钟初始化</code>的函数需要进行端口的修改</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">LCD_GPIO_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	GPIO_InitTypeDef  GPIO_InitStructure<span class="token punctuation">;</span>
 	<span class="token function">RCC_APB2PeriphClockCmd</span><span class="token punctuation">(</span>RCC_APB2Periph_GPIOA<span class="token operator">|</span>RCC_APB2Periph_GPIOB<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>	 <span class="token comment">//使能端口时钟</span>
	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Pin <span class="token operator">=</span> GPIO_Pin_4<span class="token operator">|</span>GPIO_Pin_5<span class="token operator">|</span>GPIO_Pin_6<span class="token operator">|</span>GPIO_Pin_7<span class="token punctuation">;</span>	 
 	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Mode <span class="token operator">=</span> GPIO_Mode_Out_PP<span class="token punctuation">;</span> 		 <span class="token comment">//推挽输出</span>
	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Speed <span class="token operator">=</span> GPIO_Speed_50MHz<span class="token punctuation">;</span><span class="token comment">//速度50MHz</span>
 	<span class="token function">GPIO_Init</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span>GPIO_Pin_4<span class="token operator">|</span>GPIO_Pin_5<span class="token operator">|</span>GPIO_Pin_6<span class="token operator">|</span>GPIO_Pin_7<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Pin <span class="token operator">=</span> GPIO_Pin_6<span class="token operator">|</span>GPIO_Pin_7<span class="token punctuation">;</span>
 	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Mode <span class="token operator">=</span> GPIO_Mode_Out_PP<span class="token punctuation">;</span> 		 <span class="token comment">//推挽输出</span>
	GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Speed <span class="token operator">=</span> GPIO_Speed_50MHz<span class="token punctuation">;</span><span class="token comment">//速度50MHz</span>
 	<span class="token function">GPIO_Init</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token function">GPIO_SetBits</span><span class="token punctuation">(</span>GPIOB<span class="token punctuation">,</span>GPIO_Pin_6<span class="token operator">|</span>GPIO_Pin_7<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>       修改完这里之后才算是将端口修改完毕</p> 
<p>       在<code>lcdfont.h</code>顶部还有两个宏定义可以自行决定是否修改，分别对应这屏幕<code>显示方向</code>和<code>屏幕分辨率</code>的参数</p> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">USE_HORIZONTAL</span> <span class="token expression"><span class="token number">0</span>  </span><span class="token comment">//设置横屏或者竖屏显示 0或1为竖屏 2或3为横屏</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LCD_W</span> <span class="token expression"><span class="token number">240</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LCD_H</span> <span class="token expression"><span class="token number">240</span></span></span>
</code></pre> 
<h4><a id="nbspnbspnbspnbspnbspnbspnbsp_157"></a>       显示函数</h4> 
<p>       在<code>lcd.h</code>中包含了屏幕显示内容的函数，以及部分<code>颜色的色号</code>主要用于刷新<code>屏幕背景色</code>的</p> 
<pre><code class="prism language-c"><span class="token keyword">void</span> <span class="token function">LCD_Fill</span><span class="token punctuation">(</span>u16 xsta<span class="token punctuation">,</span>u16 ysta<span class="token punctuation">,</span>u16 xend<span class="token punctuation">,</span>u16 yend<span class="token punctuation">,</span>u16 color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//指定区域填充颜色</span>
<span class="token keyword">void</span> <span class="token function">LCD_DrawPoint</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u16 color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在指定位置画一个点</span>
<span class="token keyword">void</span> <span class="token function">LCD_DrawLine</span><span class="token punctuation">(</span>u16 x1<span class="token punctuation">,</span>u16 y1<span class="token punctuation">,</span>u16 x2<span class="token punctuation">,</span>u16 y2<span class="token punctuation">,</span>u16 color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在指定位置画一条线</span>
<span class="token keyword">void</span> <span class="token function">LCD_DrawRectangle</span><span class="token punctuation">(</span>u16 x1<span class="token punctuation">,</span> u16 y1<span class="token punctuation">,</span> u16 x2<span class="token punctuation">,</span> u16 y2<span class="token punctuation">,</span>u16 color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在指定位置画一个矩形</span>
<span class="token keyword">void</span> <span class="token function">Draw_Circle</span><span class="token punctuation">(</span>u16 x0<span class="token punctuation">,</span>u16 y0<span class="token punctuation">,</span>u8 r<span class="token punctuation">,</span>u16 color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在指定位置画一个圆</span>

<span class="token keyword">void</span> <span class="token function">LCD_ShowChinese</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u8 <span class="token operator">*</span>s<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">,</span>u8 mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示汉字串</span>
<span class="token keyword">void</span> <span class="token function">LCD_ShowChinese12x12</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u8 <span class="token operator">*</span>s<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">,</span>u8 mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示单个12x12汉字</span>
<span class="token keyword">void</span> <span class="token function">LCD_ShowChinese16x16</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u8 <span class="token operator">*</span>s<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">,</span>u8 mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示单个16x16汉字</span>
<span class="token keyword">void</span> <span class="token function">LCD_ShowChinese24x24</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u8 <span class="token operator">*</span>s<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">,</span>u8 mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示单个24x24汉字</span>
<span class="token keyword">void</span> <span class="token function">LCD_ShowChinese32x32</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u8 <span class="token operator">*</span>s<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">,</span>u8 mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示单个32x32汉字</span>

<span class="token keyword">void</span> <span class="token function">LCD_ShowChar</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u8 num<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">,</span>u8 mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示一个字符</span>
<span class="token keyword">void</span> <span class="token function">LCD_ShowString</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span><span class="token keyword">const</span> u8 <span class="token operator">*</span>p<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">,</span>u8 mode<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示字符串</span>
u32 <span class="token function">mypow</span><span class="token punctuation">(</span>u8 m<span class="token punctuation">,</span>u8 n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//求幂</span>
<span class="token keyword">void</span> <span class="token function">LCD_ShowIntNum</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u16 num<span class="token punctuation">,</span>u8 len<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示整数变量</span>
<span class="token keyword">void</span> <span class="token function">LCD_ShowFloatNum1</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span><span class="token keyword">float</span> num<span class="token punctuation">,</span>u8 len<span class="token punctuation">,</span>u16 fc<span class="token punctuation">,</span>u16 bc<span class="token punctuation">,</span>u8 sizey<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示两位小数变量</span>

<span class="token keyword">void</span> <span class="token function">LCD_ShowPicture</span><span class="token punctuation">(</span>u16 x<span class="token punctuation">,</span>u16 y<span class="token punctuation">,</span>u16 length<span class="token punctuation">,</span>u16 width<span class="token punctuation">,</span><span class="token keyword">const</span> u8 pic<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//显示图片</span>


<span class="token comment">//画笔颜色</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">WHITE</span>         	 <span class="token expression"><span class="token number">0xFFFF</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BLACK</span>         	 <span class="token expression"><span class="token number">0x0000</span>	  </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BLUE</span>           	 <span class="token expression"><span class="token number">0x001F</span>  </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BRED</span>             <span class="token expression"><span class="token number">0XF81F</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GRED</span> 			       <span class="token expression"><span class="token number">0XFFE0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GBLUE</span>			       <span class="token expression"><span class="token number">0X07FF</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RED</span>           	 <span class="token expression"><span class="token number">0xF800</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">MAGENTA</span>       	 <span class="token expression"><span class="token number">0xF81F</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GREEN</span>         	 <span class="token expression"><span class="token number">0x07E0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">CYAN</span>          	 <span class="token expression"><span class="token number">0x7FFF</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">YELLOW</span>        	 <span class="token expression"><span class="token number">0xFFE0</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BROWN</span> 			     <span class="token expression"><span class="token number">0XBC40</span> </span><span class="token comment">//棕色</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BRRED</span> 			     <span class="token expression"><span class="token number">0XFC07</span> </span><span class="token comment">//棕红色</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GRAY</span>  			     <span class="token expression"><span class="token number">0X8430</span> </span><span class="token comment">//灰色</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DARKBLUE</span>      	 <span class="token expression"><span class="token number">0X01CF</span>	</span><span class="token comment">//深蓝色</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LIGHTBLUE</span>      	 <span class="token expression"><span class="token number">0X7D7C</span>	</span><span class="token comment">//浅蓝色  </span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">GRAYBLUE</span>       	 <span class="token expression"><span class="token number">0X5458</span> </span><span class="token comment">//灰蓝色</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LIGHTGREEN</span>     	 <span class="token expression"><span class="token number">0X841F</span> </span><span class="token comment">//浅绿色</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LGRAY</span> 			     <span class="token expression"><span class="token number">0XC618</span> </span><span class="token comment">//浅灰色(PANNEL),窗体背景色</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LGRAYBLUE</span>        <span class="token expression"><span class="token number">0XA651</span> </span><span class="token comment">//浅灰蓝色(中间层颜色)</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">LBBLUE</span>           <span class="token expression"><span class="token number">0X2B12</span> </span><span class="token comment">//浅棕蓝色(选择条目的反色)</span></span>
</code></pre> 
<p>       在使用的时候只需要看后面的<code>中文注释</code>去<code>调用</code>对应的函数即可，非常方便使用</p> 
<p>       但是如果需要<code>显示文字</code>和<code>图片</code>的话只是直接调用上面的函数还不够，<code>汉字数组</code>存储的<code>lcdfont.h</code>文件中只包含了<code>中英文字母</code>、<code>数字</code>、<code>符号</code>以及非常少量的<code>中文数组</code>，中文数组存储在以下几个数组中，按照相同的格式自行添加进去即可</p> 
<h4><a id="nbspnbspnbspnbspnbspnbspnbsp_211"></a>       中文汉字数组</h4> 
<pre><code class="prism language-c"><span class="token keyword">typedef</span> <span class="token keyword">struct</span> 
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> Index<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> Msk<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>typFNT_GB12<span class="token punctuation">;</span> 
<span class="token keyword">const</span> typFNT_GB12 tfont12<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
<span class="token string">"优"</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x24</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x22</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFA</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0xA3</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xA2</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xA2</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xA2</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token number">0x92</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x92</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x8A</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x06</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span>
<span class="token string">"信"</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFA</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xF3</span><span class="token punctuation">,</span><span class="token number">0x03</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xF2</span><span class="token punctuation">,</span><span class="token number">0x03</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token number">0xF2</span><span class="token punctuation">,</span><span class="token number">0x03</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0xF2</span><span class="token punctuation">,</span><span class="token number">0x03</span><span class="token punctuation">,</span><span class="token number">0x12</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span>
<span class="token string">"电"</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span>
<span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0xE0</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span>
<span class="token string">"子"</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0x07</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x38</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">typedef</span> <span class="token keyword">struct</span> 
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> Index<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>	
	<span class="token keyword">unsigned</span> <span class="token keyword">char</span> Msk<span class="token punctuation">[</span><span class="token number">32</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>typFNT_GB16<span class="token punctuation">;</span> 
<span class="token keyword">const</span> typFNT_GB16 tfont16<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">{<!-- --></span>
<span class="token string">"优"</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x09</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x11</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0xE8</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0x0C</span><span class="token punctuation">,</span><span class="token number">0x05</span><span class="token punctuation">,</span><span class="token number">0x0C</span><span class="token punctuation">,</span><span class="token number">0x05</span><span class="token punctuation">,</span><span class="token number">0x0A</span><span class="token punctuation">,</span><span class="token number">0x05</span><span class="token punctuation">,</span>
<span class="token number">0x09</span><span class="token punctuation">,</span><span class="token number">0x05</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x05</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x44</span><span class="token punctuation">,</span><span class="token number">0x48</span><span class="token punctuation">,</span><span class="token number">0x78</span><span class="token punctuation">,</span><span class="token number">0x28</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token string">"信"</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0xD0</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x8C</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x0C</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x0A</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token number">0x89</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x3F</span><span class="token punctuation">,</span><span class="token number">0x88</span><span class="token punctuation">,</span><span class="token number">0x20</span><span class="token punctuation">,</span>
<span class="token string">"电"</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span>
<span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x10</span><span class="token punctuation">,</span><span class="token number">0xFC</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0x84</span><span class="token punctuation">,</span><span class="token number">0x50</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span>
<span class="token string">"子"</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFE</span><span class="token punctuation">,</span><span class="token number">0x1F</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x08</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x04</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x02</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x01</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xFF</span><span class="token punctuation">,</span><span class="token number">0x7F</span><span class="token punctuation">,</span>
<span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x80</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0xA0</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span><span class="token number">0x40</span><span class="token punctuation">,</span><span class="token number">0x00</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>       数组名字里面的<code>GB12</code>和<code>GB16</code>代表了<code>12号字体</code>和<code>16号字体</code>的数组，文件中也有<code>24号</code>和<code>32号</code></p> 
<h4><a id="nbspnbspnbspnbspnbspnbspnbsp_250"></a>       图片</h4> 
<p>       图片存储在<code>image.h</code>文件中，图片文件中的内容比较简单，一个纯数组取模放进去的</p> 
<pre><code class="prism language-c"><span class="token keyword">const</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span> YXDZ_logo<span class="token punctuation">[</span><span class="token number">115200</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">/*0X10,0X10,0X00,0XF0,0X00,0XF0,0X01,0X1B,*/</span>
<span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XDF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XDF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XDF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XDF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XDF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XDF</span><span class="token punctuation">,</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span><span class="token number">0XFF</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>       记得在数组前面加<code>const</code>就行</p> 
<h2><a id="_264"></a>其他单片机驱动</h2> 
<p>       使用其他单片机编写的代码显示的效果与上面的<code>STM32</code>的相同，都是一张图片，空间不够的单片机只是显示了一张小一点的图片。</p> 
<h3><a id="51_268"></a>51单片机</h3> 
<p>       51单片机程序由stm32的移植过去的，所以是一样的使用，唯一的区别是51单片机空间小显示不了大图片，速度也比较慢。</p> 
<h3><a id="arduinoESP32_272"></a>arduino/ESP32</h3> 
<p>       <code>arduino</code>和<code>ESP32</code>的代码也是从原来<code>STM32</code>的移植过去的，不过因为编译器不同做了比较多的修改，总体上做的<code>函数接口</code>和<code>stm32</code>的是一致的并没有做修改，由于数据兼容性不一样在调用汉字显示之类的功能的时候需要对数据做类型转换，如下所示的中文汉字显示函数调用。</p> 
<pre><code class="prism language-cpp"><span class="token function">LCD_ShowChinese</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">char</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"优信电子"</span><span class="token punctuation">,</span>RED<span class="token punctuation">,</span>WHITE<span class="token punctuation">,</span><span class="token number">32</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>其他的参数没发现有哪里和STM32函数上的不同，由于是移植，并没有像C++一样做库进行使用(还是懒。。。)，所以函数修改还是在文件中进行修改，而不是声明的方式去定义使用引脚，用户修改使用引脚的话只需要打开lcd_init.h文件找到下面的代码段，看到了自然知道怎么进行修改。</p> 
<pre><code class="prism language-cpp"><span class="token comment">//-----------------LCD端口定义---------------- </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">CS</span> <span class="token expression"><span class="token number">5</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">RST</span> <span class="token expression"><span class="token number">33</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">DC</span> <span class="token expression"><span class="token number">27</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SDA</span> <span class="token expression"><span class="token number">23</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">SCL</span> <span class="token expression"><span class="token number">18</span></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">BLK</span> <span class="token expression"><span class="token number">22</span></span></span>
</code></pre> 
<p>没有采用硬件SPI，所以速度没有想象中的那么快，确实肉眼可见的慢了很多。</p> 
<h2><a id="_293"></a>总结</h2> 
<p>后续我们将编写、移植或者收集测试好的一些屏幕代码分享相应的一些LCD、OLED等显示器件的驱动案例，也由衷的感谢中景园开源了如此优秀的LCD驱动库非常方便了用户的使用与移植，供大家共同学习进步，前行路上，优信与大家同在，欢迎一键三连，感谢各位大佬！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7562bc9394624d15c073d2411d30c16c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序图片前端压缩（canvas）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4a167a38a01acf348bc07a68d6a7d999/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">87：第七章：开发前台首页、作家个人展示页、粉丝等功能：8：【显示粉丝数、关注数】；</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>