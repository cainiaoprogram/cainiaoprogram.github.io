<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>51单片机PWM控制舵机 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="51单片机PWM控制舵机" />
<meta property="og:description" content="文章目录 接线PWM舵机工作原理代码实现结束 接线 注意，图中SG90只是一种型号，还有其他型号，且对应不同的角度，接线和控制方法一致
PWM PWM，英文名Pulse Width Modulation，是脉冲宽度调制缩写，它是通过对一系列脉冲的宽度进行调制，等效出所需要的波形（包含形状以及幅值），对模拟信号电平进行数字编码，也就是说通过调节占空比的变化来调节信号、能量等的变化，占空比就是指在一个周期内，信号处于高电平的时间占据整个信号周期的百分比，例如方波的占空比就是50%.
脉冲宽度调制通过占空比编码模拟信号占空比 一个周期内，高电平占据时长的百分比
舵机工作原理 向黄色信号线“灌入”PWM信号。
PWM波的频率不能太高，大约50HZ，即周期=1/频率=1/50=0.02s，20ms左右
数据：
0.5ms-------------0度； 2.5% 对应函数中占空比为250
1.0ms------------45度； 5.0% 对应函数中占空比为500
1.5ms------------90度； 7.5% 对应函数中占空比为750
2.0ms-----------135度； 10.0% 对应函数中占空比为1000
2.5ms-----------180度； 12.5% 对应函数中占空比为1250
代码实现 #include &lt;reg51.h&gt; sbit servo = P1^1;	//舵机信号线 unsigned int count_servo;	//舵机0.5ms计数 unsigned int max_angle;	//最大角度 void delay(unsigned int ms)//@11.0592MHZ { unsigned int i; unsigned int j; for(i=0;i&lt;ms;i&#43;&#43;) for(j=0;j&lt;128;j&#43;&#43;); } void init_time0() { TMOD |= 0x01;	//使用模式1，16位定时器 TH0 = 0xFE;	//给定初值，使定时器0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/73c35cea6f0d68e9969294be6c5df179/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-26T11:55:26+08:00" />
<meta property="article:modified_time" content="2023-01-26T11:55:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">51单片机PWM控制舵机</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">接线</a></li><li><a href="#PWM_5" rel="nofollow">PWM</a></li><li><a href="#_12" rel="nofollow">舵机工作原理</a></li><li><a href="#_23" rel="nofollow">代码实现</a></li><li><a href="#_111" rel="nofollow">结束</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>接线</h2> 
<p><font color="red"><strong>注意，图中SG90只是一种型号，还有其他型号，且对应不同的角度，接线和控制方法一致</strong><br> <img src="https://images2.imgbox.com/fa/8d/2pX6i5wI_o.png" alt="在这里插入图片描述"></font></p> 
<h2><a id="PWM_5"></a>PWM</h2> 
<p>PWM，英文名Pulse Width Modulation，是脉冲宽度调制缩写，它是通过对一系列脉冲的宽度进行调制，等效出所需要的波形（包含形状以及幅值），对模拟信号电平进行数字编码，也就是说通过调节占空比的变化来调节信号、能量等的变化，占空比就是指在一个周期内，信号处于高电平的时间占据整个信号周期的百分比，例如方波的占空比就是50%.</p> 
<ul><li>脉冲宽度调制</li><li>通过占空比编码模拟信号</li><li>占空比 一个周期内，高电平占据时长的百分比<br> <img src="https://images2.imgbox.com/ae/cd/Er0NLmAu_o.png" alt="在这里插入图片描述"></li></ul> 
<h2><a id="_12"></a>舵机工作原理</h2> 
<p><img src="https://images2.imgbox.com/8d/43/JOHR5vB3_o.gif" alt="请添加图片描述"></p> 
<p>向黄色信号线“灌入”PWM信号。<br> PWM波的频率不能太高，大约50HZ，即周期=1/频率=1/50=0.02s，20ms左右<br> 数据：<br> 0.5ms-------------0度； 2.5% 对应函数中占空比为250<br> 1.0ms------------45度； 5.0% 对应函数中占空比为500<br> 1.5ms------------90度； 7.5% 对应函数中占空比为750<br> 2.0ms-----------135度； 10.0% 对应函数中占空比为1000<br> 2.5ms-----------180度； 12.5% 对应函数中占空比为1250</p> 
<h2><a id="_23"></a>代码实现</h2> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;reg51.h&gt;</span></span>

sbit servo <span class="token operator">=</span> P1<span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//舵机信号线</span>

<span class="token keyword">unsigned</span> <span class="token keyword">int</span> count_servo<span class="token punctuation">;</span>		<span class="token comment">//舵机0.5ms计数</span>
<span class="token keyword">unsigned</span> <span class="token keyword">int</span> max_angle<span class="token punctuation">;</span>			<span class="token comment">//最大角度</span>

<span class="token keyword">void</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token keyword">unsigned</span> <span class="token keyword">int</span> ms<span class="token punctuation">)</span><span class="token comment">//@11.0592MHZ</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>
	<span class="token keyword">unsigned</span> <span class="token keyword">int</span> j<span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>ms<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span>j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">&lt;</span><span class="token number">128</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">init_time0</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
		TMOD <span class="token operator">|=</span> <span class="token number">0x01</span><span class="token punctuation">;</span>	<span class="token comment">//使用模式1，16位定时器</span>
		TH0 <span class="token operator">=</span> <span class="token number">0xFE</span><span class="token punctuation">;</span>		<span class="token comment">//给定初值，使定时器0.5ms中断一次</span>
		TL0 <span class="token operator">=</span> <span class="token number">0x33</span><span class="token punctuation">;</span>
		EA <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>			<span class="token comment">//总中断开启</span>
		ET0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">//定时器0中断开启</span>
		TR0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>		<span class="token comment">//定时器开关打开</span>
		servo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		count_servo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">time0</span><span class="token punctuation">(</span><span class="token punctuation">)</span> interrupt <span class="token number">1</span><span class="token punctuation">{<!-- --></span>
	TR0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>	<span class="token comment">//定时器关闭</span>
	TH0 <span class="token operator">=</span> <span class="token number">0xFE</span><span class="token punctuation">;</span>		<span class="token comment">//重新给定初值，使定时器0.5ms中断一次</span>
	TL0 <span class="token operator">=</span> <span class="token number">0x33</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>count_servo <span class="token operator">&lt;</span> max_angle<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>		<span class="token comment">//通过max_angle控制角度</span>
		servo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
		servo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span>
	count_servo<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>count_servo <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">)</span>	count_servo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	TR0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>	<span class="token comment">//定时器打开</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">angle_operate</span><span class="token punctuation">(</span><span class="token keyword">int</span> angle<span class="token punctuation">)</span>			<span class="token comment">//输入角度，转变成对应最大角度</span>
<span class="token punctuation">{<!-- --></span>
	TR0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	count_servo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">switch</span><span class="token punctuation">(</span>angle<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span>
			max_angle <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">45</span><span class="token operator">:</span>
			max_angle <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token operator">-</span><span class="token number">45</span><span class="token operator">:</span>
			max_angle <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token number">90</span><span class="token operator">:</span>
			max_angle <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">case</span> <span class="token operator">-</span><span class="token number">90</span><span class="token operator">:</span>
			max_angle <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token keyword">default</span><span class="token operator">:</span>max_angle <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	TR0 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">init_time0</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
		<span class="token function">angle_operate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//1s</span>
		<span class="token function">angle_operate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//1s</span>
		<span class="token function">angle_operate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//1s</span>
		<span class="token function">angle_operate</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//1s</span>
		<span class="token function">angle_operate</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//1s</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_111"></a>结束</h2> 
<p>如果对你有帮助，点赞支持一下吧<br> 转载联系作者。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/69cdf3a04be2b20a2dbb4658dec35f58/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【SpringCloud】Nacos注册中心、配置中心用法与原理（下）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23cc4ff520d7c9ac5672e592d6e23793/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决VMware虚拟机页面无法自适应缩放</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>