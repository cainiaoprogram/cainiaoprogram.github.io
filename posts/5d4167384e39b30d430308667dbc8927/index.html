<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python Pillow(PIL)库的用法介绍 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python Pillow(PIL)库的用法介绍" />
<meta property="og:description" content="Python Pillow(PIL)库的用法介绍 Pillow库是一个Python的第三方库。
在Python2中，PIL(Python Imaging Library)是一个非常好用的图像处理库，但PIL不支持Python3，所以有人(Alex Clark和Contributors)提供了Pillow，可以在Python3中使用。
官方文档路径：https://pillow.readthedocs.io/en/latest/
一、安装Pillow
pip install pillow Pillow库安装成功后，导包时要用PIL来导入，而不能用pillow或Pillow。
import PIL from PIL import Image 在Pillow库中，除了有二十多个模块，还支持非常多的插件。其中最常用的是Image模块中同名的Image类，其他很多模块都是在Image模块的基础上对图像做进一步的特殊处理，Image模块中会导入部分来使用。本文介绍Image模块的常用方法。
二、打开本地图片
原图：
# coding=utf-8 from PIL import Image image = Image.open(&#34;yazi.jpg&#34;) image.show() 运行结果：
open(fp, mode=&#39;r&#39;): 打开一张图片，是Image模块中的函数。如果图片与当前代码在同一目录下，可以只写图片的文件名，其他情况需要拼接图片的路径。mode默认为&#39;r&#39;，也必须为&#39;r&#39;。
show(): 调用图片显示软件打开图片。打开后程序会阻塞，需要手动关闭。
三、创建一张新图片
from PIL import Image image = Image.new(&#39;RGB&#39;, (160, 90), (0, 0, 255)) image.show() 运行结果：
new(mode, size, color=0): 创建一张图片(画布)，用于绘图，是Image模块中的函数。有3个参数。
mode, 图片的模式，如“RGB”(red,green,blue三原色的缩写，真彩图像)、“L”(灰度，黑白图像)等。
size, 图片的尺寸。是一个长度为2的元组(width, height)，表示的是像素大小。
color, 图片的颜色，默认值为0表示黑色。可以传入长度为3的元组表示颜色，也可以传入颜色的十六进制，在版本1.1.4后，还可以直接传入颜色的英文单词，如上面代码中的(0, 0, 255)可以换成‘#0000FF’或‘blue’，都是表示蓝色。
四、Image模块的常用属性
from PIL import Image image = Image." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5d4167384e39b30d430308667dbc8927/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-18T21:28:29+08:00" />
<meta property="article:modified_time" content="2020-09-18T21:28:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python Pillow(PIL)库的用法介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>Python Pillow(PIL)库的用法介绍</h4> 
<p>Pillow库是一个Python的第三方库。</p> 
<p>在Python2中，PIL(Python Imaging Library)是一个非常好用的图像处理库，但PIL不支持Python3，所以有人(Alex Clark和Contributors)提供了Pillow，可以在Python3中使用。</p> 
<p>官方文档路径：<a href="https://pillow.readthedocs.io/en/latest/" rel="nofollow">https://pillow.readthedocs.io/en/latest/</a></p> 
<p><strong>一、安装Pillow</strong></p> 
<pre><code>pip install pillow</code></pre> 
<p>Pillow库安装成功后，导包时要用PIL来导入，而不能用pillow或Pillow。</p> 
<pre><code>import PIL
from PIL import Image</code></pre> 
<p>在Pillow库中，除了有二十多个模块，还支持非常多的插件。其中最常用的是Image模块中同名的Image类，其他很多模块都是在Image模块的基础上对图像做进一步的特殊处理，Image模块中会导入部分来使用。本文介绍Image模块的常用方法。</p> 
<p><strong>二、打开本地图片</strong></p> 
<p>原图：</p> 
<p style="text-align:center;"><img alt="" height="247" src="https://images2.imgbox.com/1d/2a/UxSq0YfC_o.png" width="423"></p> 
<pre><code class="language-python"># coding=utf-8
from PIL import Image

image = Image.open("yazi.jpg")
image.show()</code></pre> 
<p>运行结果：</p> 
<p style="text-align:center;"><img alt="" height="238" src="https://images2.imgbox.com/b5/ac/eIErRF9G_o.png" width="405"></p> 
<p>open(fp, mode='r'): 打开一张图片，是Image模块中的函数。如果图片与当前代码在同一目录下，可以只写图片的文件名，其他情况需要拼接图片的路径。mode默认为'r'，也必须为'r'。</p> 
<p>show(): 调用图片显示软件打开图片。打开后程序会阻塞，需要手动关闭。</p> 
<p><strong>三、创建一张新图片</strong></p> 
<pre><code class="language-python">from PIL import Image


image = Image.new('RGB', (160, 90), (0, 0, 255))
image.show()</code></pre> 
<p>运行结果：</p> 
<p style="text-align:center;"><img alt="" height="144" src="https://images2.imgbox.com/42/47/IR90wYCe_o.png" width="234"></p> 
<p>new(mode, size, color=0): 创建一张图片(画布)，用于绘图，是Image模块中的函数。有3个参数。</p> 
<p>mode, 图片的模式，如“RGB”(red,green,blue三原色的缩写，真彩图像)、“L”(灰度，黑白图像)等。</p> 
<p>size, 图片的尺寸。是一个长度为2的元组(width, height)，表示的是像素大小。</p> 
<p>color, 图片的颜色，默认值为0表示黑色。可以传入长度为3的元组表示颜色，也可以传入颜色的十六进制，在版本1.1.4后，还可以直接传入颜色的英文单词，如上面代码中的(0, 0, 255)可以换成‘#0000FF’或‘blue’，都是表示蓝色。</p> 
<p><strong>四、Image模块的常用属性</strong></p> 
<pre><code class="language-python">from PIL import Image


image = Image.open("yazi.jpg")
print('width: ', image.width)
print('height: ', image.height)
print('size: ', image.size)
print('mode: ', image.mode)
print('format: ', image.format)
print('category: ', image.category)
print('readonly: ', image.readonly)
print('info: ', image.info)</code></pre> 
<p>运行结果：</p> 
<pre><code>width:  1557
height:  911
size:  (1557, 911)
mode:  RGBA
format:  PNG
category:  0
readonly:  1
info:  {'dpi': (120, 120), 'Software': 'Snipaste'}</code></pre> 
<p>width属性表示图片的像素宽度，height属性表示图片的像素高度，width和height组成了size属性，size是一个元组。</p> 
<p>mode属性表示图片的模式，如RGBA，RGB，P，L等。</p> 
<p>format属性表示图片的格式，格式一般与图片的后缀扩展名相关。category属性表示图片的的类别。</p> 
<p>readonly属性表述图片是否为只读，值为1或0，表示的是布尔值。</p> 
<p>info属性表示图片的信息，是一个字典。</p> 
<p><strong>五、图片的模式和模式转换</strong></p> 
<p>1. 图片的模式</p> 
<p>图片有很多模式，支持以下标准模式，参考：<a href="https://pillow.readthedocs.io/en/latest/handbook/concepts.html#concept-modes" rel="nofollow">https://pillow.readthedocs.io/en/latest/handbook/concepts.html#concept-modes</a></p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:464px;"><tbody><tr><td style="width:82px;">mode</td><td style="width:379px;">描述</td></tr><tr><td style="width:82px;"><code>1</code></td><td style="width:379px;">1位像素，黑白，每字节存储一个像素</td></tr><tr><td style="width:82px;"><code>L</code></td><td style="width:379px;">8位像素，黑白</td></tr><tr><td style="width:82px;"><code>P</code> </td><td style="width:379px;">8位像素，使用调色板映射到任何其他模式</td></tr><tr><td style="width:82px;"><code>RGB</code> </td><td style="width:379px;">3x8位像素，真彩</td></tr><tr><td style="width:82px;"><code>RGBA</code> </td><td style="width:379px;">4x8位像素，带透明蒙版的真彩</td></tr><tr><td style="width:82px;"><code>CMYK</code> </td><td style="width:379px;">4x8位像素，分色</td></tr><tr><td style="width:82px;"><code>YCbCr</code> </td><td style="width:379px;">3x8位像素，彩色视频格式</td></tr><tr><td style="width:82px;"><code>LAB</code> </td><td style="width:379px;">3x8位像素，L * a * b颜色空间</td></tr><tr><td style="width:82px;"><code>HSV</code> </td><td style="width:379px;">3x8位像素，色相，饱和度，值颜色空间</td></tr><tr><td style="width:82px;"><code>I</code> </td><td style="width:379px;">32位有符号整数像素</td></tr><tr><td style="width:82px;"><code>F</code> </td><td style="width:379px;">32位浮点像素</td></tr></tbody></table> 
<p style="margin-left:0px;">1位像素的范围是0-1，0表示黑1表示白，中间表示灰。8位像素的范围是0-255，如RGB的(0, 0, 0)表示黑，(255, 255, 255)表示白，依此类推。</p> 
<p style="margin-left:0px;">2. 图片的模式转换</p> 
<pre><code class="language-python">from PIL import Image


image = Image.open("yazi.jpg")
print(image.mode)
image1 = image.convert('1')
print(image1.mode)
# image1.show()
image_l = image.convert('L')
print(image_l.mode)
# image_l.show()
image_p = image.convert('P')
print(image_p.mode)
image_p.show()</code></pre> 
<p>运行结果：</p> 
<pre><code>RGBA
1
L
P</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/12/3c/zN65yOSv_o.png"></p> 
<p>convert(self, mode=None, matrix=None, dither=None, palette=WEB, colors=256): 将图片转换为指定的模式，并且返回转换后的图片副本。如果不指定模式，则自动选择一种能保留图片所有信息且不使用调色板的模式(通常的结果是不转换)。将彩色图像转换为灰度('L')时，使用ITU-R 601-2进行亮度转换：L = R * 299/1000 + G * 587/1000 + B * 114/1000 。将灰度('L')或真彩('RGB')转换为模式'1'时，如果dither参数为'NONE'，所有大于128的值均设置为255(白色)，所有其他值都设为0(黑色)。</p> 
<p>convert()方法有5个参数。</p> 
<p>mode, 图片的模式，传入需要转换的模式。部分模式之间不支持转换，代码会报错。</p> 
<p>matrix, 转换矩阵。传入该参数时，应该传入由浮点数构成的元组，元组长度为4或12。matrix只支持从少数模式转换成'L'或'RGB'。</p> 
<p>dither, 高频振动，用于控制颜色抖动。从模式'RGB'转换为'P'或从'RGB'或'L'转换为'1'时使用。可用的方法有'NONE'或'FLOYDSTEINBERG'(默认)。当提供了matrix参数时不使用此功能。</p> 
<p>palette, 调色板，用于控制调色板的产生。从模式'RGB'转换为'P'时使用，可用的方法有'WEB'(默认)或'ADAPTIVE'。'ADAPTIVE'表示使用自适应的调色板。</p> 
<p>colors, 自适应调色板使用的颜色数。当palette参数为'ADAPTIVE'时，用于控制调色板的颜色数目。默认是最大值，即256种颜色。</p> 
<p>2.1 matrix参数的效果对比</p> 
<pre><code class="language-python">from PIL import Image


image = Image.open("yazi.jpg")
image_rgb = image.convert('RGB')
print(image_rgb.mode)
image_l = image_rgb.convert('L')
image_l.show()
matrix = (0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6, 0.6)
image_l2 = image_rgb.convert('L', matrix=matrix)
image_l2.show()</code></pre> 
<p>运行结果：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/8c/d2/prv44aLc_o.png"></p> 
<p>上面的代码中，给matrix参数传入了一个长度为12的元组，matrix的值改变了转换的效果，变化程度取决于传入的元组中浮点数的值。注意，有些模式是不支持的，如'RGBA'，且传入的元组长度必须为4或12，否则报错。</p> 
<p>2.2 palette参数的效果对比</p> 
<pre><code class="language-python">from PIL import Image


image = Image.open("yazi.jpg")
image_p = image.convert('P')
# image_l.show()
image_p2 = image.convert('P', palette='ADAPTIVE', colors=256)
image_p2.show()</code></pre> 
<p>运行结果：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/da/d8/Bbkidluj_o.png"></p> 
<p>上面的代码中，将palette参数改为了'ADAPTIVE'，图片的差异不大，不过，如果将colors变小差异会比较大，但那样会将图片效果变差。</p> 
<p><strong>六、图片拷贝粘贴和保存</strong></p> 
<pre><code class="language-python">from PIL import Image


image = Image.open("yazi.jpg")
image_copy = image.copy()
# image_copy.show()
image_new = Image.new('RGB', (160, 90), (0, 0, 255))
image_new2 = Image.new('L', (160, 90), '#646464')
image_copy.paste(image_new, (100, 100, 260, 190), mask=image_new2)
image_copy.save('duck.png')
image_save = Image.open('duck.png')
print(image_save.format, image_save.mode)
image_copy.show()</code></pre> 
<p>运行结果：</p> 
<pre><code>PNG RGBA</code></pre> 
<p style="text-align:center;"><img alt="" height="233" src="https://images2.imgbox.com/0e/07/51m3X5Oq_o.png" width="397"></p> 
<p>copy(): 拷贝当前的图片，拷贝出来的图片与原图一模一样。如果想在图片上粘贴一些内容，又想保留原图时，可以使用此方法。</p> 
<p>paste(im, box=None, mask=None): 将另一张图片粘贴到当前图片中，如果粘贴的模式不匹配，则将被粘贴图片的模式转换成当前图片的模式。有3个参数。</p> 
<p>im, 被粘贴的图片。传入一张图片，当第二个参数box指定的是一个区域时，im参数也可以是一个整数或颜色值(元组表示，16进制表示和颜色名都可以，如上面代码中的image_new可以换成(0, 0, 255), '#0000FF', 'blue')。</p> 
<p>box, 图片粘贴的位置或区域。传入一个长度为2或4的元组，如果不传值，默认为(0, 0)，图片被粘贴在当前图片的左上角。如果传入长度为2的元组(x, y)，表示被粘贴图片的左上角坐标位置。如果传入长度为4的元组(x0, y0, x1, y1)，表示图片粘贴的区域，此时区域的大小必须与被粘贴图片一致，否则会报错，传入的元组长度为其他值也会报错。</p> 
<p>mask, 蒙版。传入一张与被粘贴图片尺寸一样的图片，可以使用模式为'1'、'L'或者'RGBA'的图像。如果mask图像的颜色值为255，则直接按被粘贴图片的颜色粘贴，如果mask图像的颜色值为0，则保留当前图片的颜色(相当于没有粘贴)，如果mask图像的颜色值为0~255之间的值，则将im与mask进行混合后再粘贴。</p> 
<p>save(fp, format=None, **params): 将当前图片按指定的文件名保存，运行后会将图片按新名字保存在当前路径下(也可以指定路径)。文件名最好带扩展名，方便打开，format表示图片的格式，没有指定format则会根据扩展名来解析(如果能解析出来)，一般不需要指定format，传入一个带扩展名的文件名即可。</p> 
<p><strong>七、图片的裁剪和缩放</strong></p> 
<pre><code class="language-python">from PIL import Image


image = Image.open("yazi.jpg")
image_crop = image.crop(box=(300, 300, 800, 700))
# image_crop.show()
print('before resize: ', image.size)
image_resize = image.resize((500, 400), resample=Image.LANCZOS, box=(100, 100, 1200, 800), reducing_gap=5.0)
print('after resize: ', image_resize.size)
image_resize.show()</code></pre> 
<p>运行结果：</p> 
<pre><code>before resize:  (1557, 911)
after resize:  (500, 400)</code></pre> 
<p style="text-align:center;"><img alt="" height="284" src="https://images2.imgbox.com/30/ac/8dZ3e6Mq_o.png" width="691"></p> 
<p>crop(box=None): 裁剪图片，返回裁剪区域的图片。box表示裁剪的区域，传入长度为4的元组(x0, y0, x1, y1)，不传默认为拷贝原图，相当于copy()方法，如果裁剪的区域超过了原图的区域，超出部分用像素格填充。</p> 
<p>resize(size, resample=BICUBIC, box=None, reducing_gap=None): 缩放图片，返回缩放后的图片副本。有4个参数。</p> 
<p>size, 图片缩放后的尺寸，传入一个长度为2的元组(width, height)。</p> 
<p>resample, 重采样，是一个可选的重采样过滤器。可以传入Image.NEAREST, Image.BOX, Image.BILINEAR, Image.HAMMING, Image.BICUBIC, Image.LANCZOS。默认为Image.BICUBIC。如果图像的模式为'1'或'P'，则始终设置为Image.NEAREST。</p> 
<p>box, 缩放图片的区域。传入长度为4的元组(x0, y0, x1, y1)，这个区域必须在原图的(0, 0, width, height)范围内，如果超出范围会报错，如果不传值则默认将整张原图进行缩放。</p> 
<p>reducing_gap, 减少间隙。传入一个浮点数，用于优化图片缩放效果，默认不进行优化，值大于3.0时优化效果基本已经是公平的重采样。</p> 
<p>Image模块还有很多对图片处理的方法和函数，了解更多可以参考：<a href="https://blog.csdn.net/weixin_43790276/article/details/108673454">https://blog.csdn.net/weixin_43790276/article/details/108673454</a></p> 
<p> </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/03/57/56kTVbMZ_o.png"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f049fbc2b8f4c3f6fdf2011d554e5f13/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【ros学习】5.gazebo闪退修复</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec4b128d5f72f6f044c122743c44786f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PHP使用PHPMailer发送邮件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>