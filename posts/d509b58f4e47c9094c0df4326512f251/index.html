<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>xen虚拟机的启动（引导）方式 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="xen虚拟机的启动（引导）方式" />
<meta property="og:description" content="xen虚拟机的启动（引导）方式
有几种不同的方式来引导虚拟机，各有利弊。
1.BIOS bootloader
适用于全虚拟化，loader模拟了BIOS
原文：
Booting via the BIOS is available for hypervisors supporting full virtualization. In this case the BIOS has a boot order priority (floppy, harddisk, cdrom, network) determining where to obtain/find the boot image.
...
&lt;os&gt;
&lt;type&gt;hvm&lt;/type&gt;
&lt;loader&gt;/usr/lib/xen/boot/hvmloader&lt;/loader&gt;
&lt;boot dev=&#39;hd&#39;/&gt;
&lt;boot dev=&#39;cdrom&#39;/&gt;
&lt;bootmenu enable=&#39;yes&#39;/&gt;
&lt;smbios mode=&#39;sysinfo&#39;/&gt;
&lt;/os&gt;
...
type
The content of the type element specifies the type of operating system to be booted in the virtual machine." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d509b58f4e47c9094c0df4326512f251/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-13T16:06:16+08:00" />
<meta property="article:modified_time" content="2020-01-13T16:06:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">xen虚拟机的启动（引导）方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>xen虚拟机的启动（引导）方式<br> 有几种不同的方式来引导虚拟机，各有利弊。</p> 
<p>1.BIOS bootloader</p> 
<p>适用于全虚拟化，loader模拟了BIOS</p> 
<p>原文：</p> 
<p>Booting via the BIOS is available for hypervisors supporting full virtualization. In this case the BIOS has a boot order priority (floppy, harddisk, cdrom, network) determining where to obtain/find the boot image.<br>   ...<br>   &lt;os&gt;<br>     &lt;type&gt;hvm&lt;/type&gt;<br>     &lt;loader&gt;/usr/lib/xen/boot/hvmloader&lt;/loader&gt;<br>     &lt;boot dev='hd'/&gt;<br>     &lt;boot dev='cdrom'/&gt;<br>     &lt;bootmenu enable='yes'/&gt;<br>     &lt;smbios mode='sysinfo'/&gt;<br>   &lt;/os&gt;<br>   ...<br> type<br> The content of the type element specifies the type of operating system to be booted in the virtual machine. hvm indicates that the OS is one designed to run on bare metal, so requires full virtualization. linux (badly named!) refers to an OS that supports the Xen 3 hypervisor guest ABI. There are also two optional attributes, arch specifying the CPU architecture to virtualization, and machine referring to the machine type. The Capabilities XML provides details on allowed values for these. Since 0.0.1<br> loader<br> The optional loader tag refers to a firmware blob used to assist the domain creation process. At this time, it is only needed by Xen fully virtualized domains. Since 0.1.0<br> boot<br> The dev attribute takes one of the values "fd", "hd", "cdrom" or "network" and is used to specify the next boot device to consider. The boot element can be repeated multiple times to setup a priority list of boot devices to try in turn. The boot element cannot be used if per-device boot elements are used (see disks, network interfaces, and USB and PCI devices sections below). Since 0.1.3, per-device boot since 0.8.8<br> bootmenu<br> Whether or not to enable an interactive boot menu prompt on guest startup. The enable attribute can be either "yes" or "no". If not specified, the hypervisor default is used.  Since 0.8.3<br> smbios<br> How to populate SMBIOS information visible in the guest. The mode attribute must be specified, and is either "emulate" (let the hypervisor generate all values), "host" (copy all of Block 0 and Block 1, except for the UUID, from the host's SMBIOS values; the virConnectGetSysinfo call can be used to see what values are copied), or "sysinfo" (use the values in the sysinfo element). If not specified, the hypervisor default is used.  Since 0.8.7<br> 2.Host bootloader</p> 
<p>适用于半虚拟化， Hypersisor没有模拟BIOS，由Host的pseudo-bootloader来引导,它会为guest提供一个接口来选择一个kernel（不懂）</p> 
<p>原文：</p> 
<p>Hypervisors employing paravirtualization do not usually emulate a BIOS, and instead the host is responsible to kicking off the operating system boot. This may use a pseudo-bootloader in the host to provide an interface to choose a kernel for the guest. An example is pygrub with Xen.<br>   ...<br>   &lt;bootloader&gt;/usr/bin/pygrub&lt;/bootloader&gt;<br>   &lt;bootloader_args&gt;--append single&lt;/bootloader_args&gt;<br>   ...<br> bootloader<br> The content of the bootloader element provides a fully qualified path to the bootloader executable in the host OS. This bootloader will be run to choose which kernel to boot. The required output of the bootloader is dependent on the hypervisor in use. Since 0.1.0<br> bootloader_args<br> The optional bootloader_args element allows command line arguments to be passed to the bootloader. Since 0.2.3<br> 3.Direct kernel boot</p> 
<p>适用于全虚拟与半虚拟化，使用host的kernel与initrd(init ram disk)的引导 </p> 
<p>When installing a new guest OS it is often useful to boot directly from a kernel and initrd stored in the host OS, allowing command line arguments to be passed directly to the installer. This capability is usually available for both para and full virtualized guests.<br>   ...<br>   &lt;os&gt;<br>     &lt;type&gt;hvm&lt;/type&gt;<br>     &lt;loader&gt;/usr/lib/xen/boot/hvmloader&lt;/loader&gt;<br>     &lt;kernel&gt;/root/f8-i386-vmlinuz&lt;/kernel&gt;<br>     &lt;initrd&gt;/root/f8-i386-initrd&lt;/initrd&gt;<br>     &lt;cmdline&gt;console=ttyS0 ks=http://example.com/f8-i386/os/&lt;/cmdline&gt;<br>   &lt;/os&gt;<br>   ...<br> type<br> This element has the same semantics as described earlier in the BIOS boot section<br> loader<br> This element has the same semantics as described earlier in the BIOS boot section<br> kernel<br> The contents of this element specify the fully-qualified path to the kernel image in the host OS.<br> initrd<br> The contents of this element specify the fully-qualified path to the (optional) ramdisk image in the host OS.<br> cmdline<br> The contents of this element specify arguments to be passed to the kernel (or installer) at boottime. This is often used to specify an alternate primary console (eg serial port), or the installation media source / kickstart file</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/60f9f4197d3bdaaa663e5af47863088c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">LTE中的算术题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/43e8fdae7458fb212dbe2325c2e5348c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LeetCode 刷题记录 95. Unique Binary Search Trees II</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>