<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【NOIP2017普及组】跳房子 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【NOIP2017普及组】跳房子" />
<meta property="og:description" content="题目背景 NOIP2017普及组 T4
题目描述 跳房子，也叫跳飞机，是一种世界性的儿童游戏，也是中国民间传统的体育游戏之一。跳房子的游戏规则如下：
在地面上确定一个起点，然后在起点右侧画 n 个格子，这些格子都在同一条直线上。每个格子内有一个数字（整数），表示到达这个格子能得到的分数。玩家第一次从起点开始向右跳，跳到起点右侧的一个格子内。第二次再从当前位置继续向右跳，依此类推。规则规定：玩家每次都必须跳到当前位置右侧的一个格子内。玩家可以在任意时刻结束游戏，获得的分数为曾经到达过的格子中的数字之和。
现在小R研发了一款弹跳机器人来参加这个游戏。但是这个机器人有一个非常严重的缺陷，它每次向右弹跳的距离只能为固定的 d 。小R希望改进他的机器人，如果他花 g 个金币改进他的机器人，那么他的机器人灵活性就能增加g，但是需要注意的是，每次弹跳的距离至少为 1 。具体而言，当 g&lt;d 时，他的机器人每次可以选择向右弹跳的距离为 d-g, d-g&#43;1, d-g&#43;2，…，d&#43;g-2，d&#43;g-1，d&#43;g ；否则（当g≥d时），他的机器人每次可以选择向右弹跳的距离为 1，2，3，…，d&#43;g-2，d&#43;g-1，d&#43;g 。
现在小R希望获得至少 k 分，请问他至少要花多少金币来改造他的机器人。
输入格式 第一行三个正整数 n，d，k ，分别表示格子的数目，改进前机器人弹跳的固定距离，以及希望至少获得的分数。相邻两个数之间用一个空格隔开。
接下来 n 行，每行两个正整数 xi，si，分别表示起点到第 i 个格子的距离以及第 i 个格子的分数。两个数之间用一个空格隔开。保证 xi 按递增顺序输入。 输出格式 共一行，一个整数，表示至少要花多少金币来改造他的机器人。若无论如何他都无法获得至少 k 分，输出 -1 。
样例数据 1 输入
7 4 10 2 6 5 -3 10 3 11 -3 13 1 17 6 20 2 输出
2 样例数据 2 输入" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7241d1e7e1dfc4aced396185d603ebcf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-20T10:53:49+08:00" />
<meta property="article:modified_time" content="2018-09-20T10:53:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【NOIP2017普及组】跳房子</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>题目背景</h4> 
<p>NOIP2017普及组 T4</p> 
<h4>题目描述</h4> 
<p>跳房子，也叫跳飞机，是一种世界性的儿童游戏，也是中国民间传统的体育游戏之一。跳房子的游戏规则如下：</p> 
<p>在地面上确定一个起点，然后在起点右侧画 <strong>n</strong> 个格子，这些格子都在同一条直线上。每个格子内有一个数字（整数），表示到达这个格子能得到的分数。玩家第一次从起点开始向右跳，跳到起点右侧的一个格子内。第二次再从当前位置继续向右跳，依此类推。规则规定：玩家每次都必须跳到当前位置右侧的一个格子内。玩家可以在任意时刻结束游戏，获得的分数为曾经到达过的格子中的数字之和。</p> 
<p>现在小R研发了一款弹跳机器人来参加这个游戏。但是这个机器人有一个非常严重的缺陷，它每次向右弹跳的距离只能为固定的 <strong>d </strong>。小R希望改进他的机器人，如果他花 <strong>g</strong> 个金币改进他的机器人，那么他的机器人灵活性就能增加g，但是需要注意的是，每次弹跳的距离至少为 <strong>1</strong> 。具体而言，当 <strong>g&lt;d</strong> 时，他的机器人每次可以选择向右弹跳的距离为 <strong>d-g, d-g+1, d-g+2，…，d+g-2，d+g-1，d+g</strong> ；否则（当<strong>g≥d</strong>时），他的机器人每次可以选择向右弹跳的距离为 <strong>1，2，3，…，d+g-2，d+g-1，d+g </strong>。</p> 
<p>现在小R希望获得至少 <strong>k</strong> 分，请问他至少要花多少金币来改造他的机器人。</p> 
<h4>输入格式</h4> 
<p>第一行三个正整数 <strong>n，d，k</strong> ，分别表示格子的数目，改进前机器人弹跳的固定距离，以及希望至少获得的分数。相邻两个数之间用一个空格隔开。</p> 
<p>接下来 <strong>n</strong> 行，每行两个正整数 <strong>xi，si</strong>，分别表示起点到第 <strong>i</strong> 个格子的距离以及第 <strong>i</strong> 个格子的分数。两个数之间用一个空格隔开。保证 <strong>xi</strong> 按递增顺序输入。 </p> 
<h4>输出格式</h4> 
<p>共一行，一个整数，表示至少要花多少金币来改造他的机器人。若无论如何他都无法获得至少 <strong>k</strong> 分，输出 <strong>-1</strong> 。</p> 
<h4>样例数据 1</h4> 
<p>输入</p> 
<blockquote id="testcase-i1">
  7 4 10  
 <br> 2 6  
 <br> 5 -3  
 <br> 10 3  
 <br> 11 -3  
 <br> 13 1  
 <br> 17 6  
 <br> 20 2 
</blockquote> 
<p>输出</p> 
<blockquote>
  2 
</blockquote> 
<h4>样例数据 2</h4> 
<p>输入</p> 
<blockquote id="testcase-i2">
  7 4 20  
 <br> 2 6  
 <br> 5 -3  
 <br> 10 3  
 <br> 11 -3  
 <br> 13 1  
 <br> 17 6  
 <br> 20 2 
</blockquote> 
<p>输出</p> 
<blockquote>
  -1 
</blockquote> 
<h4>备注</h4> 
<p>【输入输出样例1说明】<br> 花费 2 个金币改进后，小R的机器人依次选择的向右弹跳的距离分别为 2，3，5，3，4，3 ，先后到达的位置分别为 2，5，10，13，17，20 ，对应 1, 2, 3, 5, 6, 7 这 6 个格子。这些格子中的数字之和 15 即为小R获得的分数。</p> 
<p>【输入输出样例2说明】<br> 由于样例中 7 个格子组合的最大可能数字之和只有 18 ，无论如何都无法获得 20 分。</p> 
<p>【输入输出样例3】<br> 见选手目录下的jump/jump3.in和jump/jump3.ans。</p> 
<p>【数据规模与约定】<br> 本题共 10 组测试数据，每组数据 10 分。<br> 对于全部的数据满足：1≤n≤500000；1≤d≤2000；1≤xi,k≤10^9；|si|&lt;10^5。<br> 对于第 1，2 组测试数据：n≤10。<br> 对于第 3，4，5 组测试数据：n≤500。<br> 对于第 6，7，8 组测试数据：d=1。</p> 
<p> </p> 
<p>解析：</p> 
<p>       首先二分答案，然后用DP验证，令<img alt="f[i]" class="mathcode" src="https://images2.imgbox.com/1a/b7/AUm2Hub8_o.gif">表示到第<img alt="i" class="mathcode" src="https://images2.imgbox.com/79/ed/264mEC6L_o.gif">个格子的最大得分，如果有<img alt="f[i]&gt;=k" class="mathcode" src="https://images2.imgbox.com/18/3f/lvL8ET3I_o.gif">则下调便边界，否则上调边界。<br>        于是就有：</p> 
<p>       <img alt="f[i]=max\left \{f[k]}{ \right \} (x[i]-d-mid&lt;=x[k]&lt;=x[i]-d+mid)" class="mathcode" src="https://images2.imgbox.com/92/e3/CtWGJjdZ_o.png"></p> 
<p>       我们发现满足单调性，用单调队列优化一下就行了。</p> 
<p> </p> 
<p>代码：</p> 
<pre class="has"><code class="hljs">#include &lt;bits/stdc++.h&gt;
using namespace std;

const int Max=500005;
int n,m,k,d,head,tail,l,r,mid,maxlen,minlen,now,tag;
int x[Max],num[Max],f[Max],p[Max];

inline int get_int()
{
	int x=0,f=1;
	char c;
	for(c=getchar();(!isdigit(c))&amp;&amp;(c!='-');c=getchar());
	if(c=='-') f=-1,c=getchar();
	for(;isdigit(c);c=getchar()) x=(x&lt;&lt;3)+(x&lt;&lt;1)+c-'0';
	return x*f;
}

inline bool check(int len)
{
	now=0,head=1,tail=0,maxlen=len+d,minlen=max(d-len,1);
	for(int i=1;i&lt;=n;i++)
	{
	  while(x[now]&lt;=x[i]-minlen)
	  {
	    if(f[now]&lt;=-1e9) {now++;continue;}   //不能到达now 
	    while(head&lt;=tail&amp;&amp;f[now]&gt;=f[p[tail]]) tail--;
	    p[++tail]=now,now++;   //放进队列 
	  }
	  while(head&lt;=tail&amp;&amp;x[p[head]]&lt;x[i]-maxlen) head++;
	  if(head&lt;=tail) f[i]=f[p[head]]+num[i];
	  else f[i]=-1e9;
	  if(f[i]&gt;=k) return 1;  //有满足的直接返回 
	}
	return 0;
}

int main()
{
	n=get_int(),d=get_int(),k=get_int();
	for(int i=1;i&lt;=n;i++) x[i]=get_int(),num[i]=get_int();
	l=0,r=500000;
	while(l&lt;r)  //二分答案 
	{
	  mid=(l+r)&gt;&gt;1;
	  if(check(mid)) tag=1,r=mid;
	  else l=mid+1;
	}
	if(tag) cout&lt;&lt;r;
	else cout&lt;&lt;"-1\n";
	return 0;
}</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4a9de94def917713955717aca43ad9b6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">分布式存储系统可靠性系列一：如何估算</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6618e5145ae194d091c17a4f0a722823/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">独家 | 一文读懂最大似然估计(附R代码)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>