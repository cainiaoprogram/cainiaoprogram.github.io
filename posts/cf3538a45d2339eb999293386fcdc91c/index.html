<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue组件封装 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue组件封装" />
<meta property="og:description" content="组件封装 一个封装好的组件可以在项目的任意地方使用，甚至我们可以直接从npm仓库下载别人封装好的组件来进行使用，比如iview、element-ui这一类的组件库。但是每个公司的需求是不一样的，我们可以封装自己的组件库并发布到npm上去，这样可以不用碰到相似的项目就复制一大串代码了，简洁明了，要用的时候可以直接从npm安装使用。废话不多说，下面开始介绍步骤。
（1） 新建package文件夹 因为我们可能会封装多个组件，所以在src下面新建一个package文件夹用来存放所有需要上传的组件。
（2）在pwd/index.vue中编写好代码 &lt;template&gt; &lt;div&gt; &lt;el-form ref=&#34;Form&#34; :label-width=&#34;labelWidth&#34; label-position=&#34;right&#34; :model=&#34;form&#34; :rules=&#34;comValidateFlag ? modifyRules : loginRules&#34; :size=&#34;comSize&#34; :disabled=&#34;comPasswordDisabled&#34; &gt; &lt;el-form-item :label=&#34;comLabel&#34; prop=&#34;password&#34;&gt; &lt;el-input v-model=&#34;form.password&#34; :show-password=&#34;showPasswordFlag&#34; :placeholder=&#34;placeholderText&#34; maxlength=&#34;16&#34; autocomplete=&#34;new-password&#34;&gt;&lt;/el-input&gt; &lt;/el-form-item&gt; &lt;/el-form&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;MyPwd&#39;, prop: { comPasswordDisabled: { type: Boolean, default: false }, showPasswordFlag: { type: Boolean, default: false }, placeholderText: { type: Boolean, default: false }, labelWidth: { type: String, default: &#39;120px&#39; } }, computed: { comValidateFlag: { get() { } } }, data() { const validatePwd = (rule, value, callback)=&gt;{ } return { password: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/cf3538a45d2339eb999293386fcdc91c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T17:12:29+08:00" />
<meta property="article:modified_time" content="2024-01-06T17:12:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue组件封装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>组件封装</h2> 
<p>一个封装好的组件可以在项目的任意地方使用，甚至我们可以直接从npm仓库下载别人封装好的组件来进行使用，比如iview、element-ui这一类的组件库。但是每个公司的需求是不一样的，我们可以封装自己的组件库并发布到npm上去，这样可以不用碰到相似的项目就复制一大串代码了，简洁明了，要用的时候可以直接从npm安装使用。废话不多说，下面开始介绍步骤。</p> 
<h4><a id="1_package_4"></a>（1） 新建package文件夹</h4> 
<p>因为我们可能会封装多个组件，所以在src下面新建一个package文件夹用来存放所有需要上传的组件。</p> 
<p><img src="https://images2.imgbox.com/c3/b9/oyf6ilHR_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2pwdindexvue_11"></a>（2）在pwd/index.vue中编写好代码</h4> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>el<span class="token operator">-</span>form
          ref<span class="token operator">=</span><span class="token string">"Form"</span>
          <span class="token operator">:</span>label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">"labelWidth"</span>
          label<span class="token operator">-</span>position<span class="token operator">=</span><span class="token string">"right"</span>
          <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">"form"</span>
          <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">"comValidateFlag ? modifyRules : loginRules"</span>
          <span class="token operator">:</span>size<span class="token operator">=</span><span class="token string">"comSize"</span>
          <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">"comPasswordDisabled"</span>
          <span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">"comLabel"</span> prop<span class="token operator">=</span><span class="token string">"password"</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>el<span class="token operator">-</span>input
             v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"form.password"</span>
             <span class="token operator">:</span>show<span class="token operator">-</span>password<span class="token operator">=</span><span class="token string">"showPasswordFlag"</span>
             <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">"placeholderText"</span>
             maxlength<span class="token operator">=</span><span class="token string">"16"</span>
             autocomplete<span class="token operator">=</span><span class="token string">"new-password"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>input<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>form<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'MyPwd'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">comPasswordDisabled</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">showPasswordFlag</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">placeholderText</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">labelWidth</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
            <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'120px'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">comValidateFlag</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">const</span> <span class="token function-variable function">validatePwd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>

        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token literal-property property">newPwd</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token literal-property property">cfmPwd</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
            <span class="token literal-property property">historyFlag</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token literal-property property">modifyRules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">password</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span><span class="token literal-property property">require</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">validator</span><span class="token operator">:</span> validatePwd <span class="token punctuation">}</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">loginRules</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                 <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span> <span class="token literal-property property">require</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span><span class="token string">"请输入密码"</span><span class="token punctuation">,</span> <span class="token literal-property property">trigger</span><span class="token operator">:</span><span class="token string">"blur"</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
                <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">''</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">validatePwdFun</span><span class="token punctuation">(</span><span class="token parameter">newPwd<span class="token punctuation">,</span> cfmPwd<span class="token punctuation">,</span> historyFlag</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>newPwd<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>newPwd <span class="token operator">=</span> newPwd
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cfmPwd<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>cfmPwd <span class="token operator">=</span> cfmPwd
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>historyFlag <span class="token operator">=</span> historyFlag
            <span class="token keyword">let</span> validFlg <span class="token operator">=</span> <span class="token boolean">false</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">[</span><span class="token string">'Form'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                validFlg <span class="token operator">=</span> valid
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>newPwd <span class="token operator">=</span> <span class="token string">''</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>cfmPwd <span class="token operator">=</span> <span class="token string">''</span>
            <span class="token keyword">return</span> validFlg

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="3Vue_109"></a>(3)使用Vue插件模式</h4> 
<p>在package目录下新建index.js文件，代码如下</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> pwd <span class="token keyword">from</span> <span class="token string">'./pwd/index.vue'</span>  <span class="token comment">//引入封装好的组件</span>
<span class="token keyword">const</span> coms<span class="token operator">=</span><span class="token punctuation">[</span>pwd<span class="token punctuation">]</span><span class="token comment">//将来如果有其他组件，都可以写到这个数组里去</span>
<span class="token comment">//批量组件注册</span>
<span class="token keyword">const</span> <span class="token function-variable function">install</span> <span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Vue</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     coms<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">com</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
        Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>com<span class="token punctuation">.</span>name<span class="token punctuation">,</span>com<span class="token punctuation">)</span>
     <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> install<span class="token comment">//这个方法以后再使用的时候可以被use调用</span>
</code></pre> 
<h3><a id="4__125"></a>（4） 组件打包</h3> 
<p>到这里为止，我们的组件封建基本就完成了，当然组件封装成什么样得看自己得业务需求了，接下来我们就需要将组件进行打包了。</p> 
<p>修改我们项目得package.json文件，配置打包命令：</p> 
<pre><code class="prism language-json"><span class="token string-property property">"package"</span><span class="token operator">:</span> <span class="token string">"vue-cli-service build --target lib ./project/index.js --name my-pwd --dest my-pwd"</span>
<span class="token comment">//其中--target lib只有是需要打包的目前文件，也就是步骤3的index.js文件</span>
<span class="token comment">//--name是打包好的文件name</span>
<span class="token comment">//--dest是打包好的文件夹的名字</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/28/c2/zZbsCXhW_o.png" alt="在这里插入图片描述"></p> 
<p>然后在终端运行：</p> 
<pre><code class="prism language-js">npm run <span class="token keyword">package</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6e/13/duIvhLUU_o.png" alt="在这里插入图片描述"></p> 
<p>打包完成后我们项目就会多一个打包好的文件夹</p> 
<p><img src="https://images2.imgbox.com/74/77/kMLGnL4N_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5npm_158"></a>（5）发布到npm(以下方法不合规，仅为在离线环境下的一个解决思路)</h3> 
<p>（1) 想要导进node_module，我们还得在my-pwd文件夹下初始化一个package.json文件。文件内容如下：</p> 
<p><img src="https://images2.imgbox.com/15/c2/Q1qwY2pC_o.png" alt="在这里插入图片描述"></p> 
<p>(2)然后将整个my-pwd文件夹复制到node_module文件夹中</p> 
<p>在这里插入图片描述</p> 
<h3><a id="6_170"></a>（6）使用</h3> 
<p>全局注册组件</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> Vue <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> MyPwd <span class="token keyword">from</span> <span class="token string">'my-pwd'</span>
<span class="token keyword">import</span> ElementUI <span class="token keyword">from</span> <span class="token string">'element-ui'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'element-ui/lib/theme-chalk/index.css'</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>ElementUI<span class="token punctuation">)</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>productionTip <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token comment">//全局注册</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>MyPwd<span class="token punctuation">)</span>

<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre> 
<p>使用组件</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"hello"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>my<span class="token operator">-</span>pwd<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>my<span class="token operator">-</span>pwd<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<p>效果如下</p> 
<p><img src="https://images2.imgbox.com/38/b1/P9u00GJg_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d2f1ab139d877582554fa5339277ca13/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PyTorch|构建自己的卷积神经网络</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/efd3bc7d8badf2c2f3b5a409108f40ae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决“SQLServer 添加数据库,报Error 5118“错误</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>