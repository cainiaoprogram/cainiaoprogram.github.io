<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>spring boot集成mybatis-plus——Mybatis Plus 多表联查（包含分页关联查询,图文讲解）... - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="spring boot集成mybatis-plus——Mybatis Plus 多表联查（包含分页关联查询,图文讲解）..." />
<meta property="og:description" content="Mybatis Plus 多表联查(包含分页关联查询,图文讲解) 更新时间 2023-01-03 21:41:38 大家好，我是小哈。
本小节中，我们将学习如何通过 Mybatis Plus 实现多表关联查询，以及分页关联查询。
表结构 本文以查询用户所下订单，来演示 Mybatis Plus 的关联查询，数据库表除了前面小节中已经定义好的用户表外，再额外创建一张订单表，然后插入一些测试数据，执行脚本如下：
DROP TABLE IF EXISTS user; CREATE TABLE `t_user` ( `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT &#39;主键ID&#39;, `name` varchar(30) NOT NULL DEFAULT &#39;&#39; COMMENT &#39;姓名&#39;, `age` int(11) NULL DEFAULT NULL COMMENT &#39;年龄&#39;, `gender` tinyint(2) NOT NULL DEFAULT 0 COMMENT &#39;性别，0：女 1：男&#39;, PRIMARY KEY (`id`) ) COMMENT = &#39;用户表&#39;; INSERT INTO `t_user` (`id`, `name`, `age`, `gender`) VALUES (1, &#39;犬小哈&#39;, 30, 1); INSERT INTO `t_user` (`id`, `name`, `age`, `gender`) VALUES (2, &#39;关羽&#39;, 46, 1); INSERT INTO `t_user` (`id`, `name`, `age`, `gender`) VALUES (3, &#39;诸葛亮&#39;, 26, 1); CREATE TABLE `t_order` ( `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT &#39;主键ID&#39;, `order_id` bigint(20) UNSIGNED NOT NULL COMMENT &#39;订单ID&#39;, `user_id` bigint(20) UNSIGNED NOT NULL COMMENT &#39;下单用户ID&#39;, `goods_name` varchar(30) NOT NULL COMMENT &#39;商品名称&#39;, `goods_price` decimal(10,2) NOT NULL COMMENT &#39;商品价格&#39;, PRIMARY KEY (`id`), INDEX idx_order_id(`order_id`) ) COMMENT = &#39;订单表&#39;; INSERT INTO `t_order` (`id`, `order_id`, `user_id`, `goods_name`, `goods_price`) VALUES (1, 805646264648356, 1, &#39;Switch 游戏机&#39;, 1400." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4dc07d9e75abcb17411733fc88e85af8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-04T17:03:00+08:00" />
<meta property="article:modified_time" content="2023-02-04T17:03:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">spring boot集成mybatis-plus——Mybatis Plus 多表联查（包含分页关联查询,图文讲解）...</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html" style="font-size: 16px;"> 
 <h2 class="course-title">Mybatis Plus 多表联查(包含分页关联查询,图文讲解)</h2> 
 <div class="course-meta text-muted fs-13"> 
  <span class="fa fa-history fs-14"> 更新时间 2023-01-03 21:41:38</span> 
 </div> 
 <div class="course-content mt-10"> 
  <p>大家好，我是小哈。</p> 
  <p>本小节中，我们将学习如何通过 Mybatis Plus 实现<em>多表关联查询</em>，以及<em>分页关联查询</em>。</p> 
  <h3 id="表结构">表结构</h3> 
  <p>本文以<em>查询用户所下订单</em>，来演示 Mybatis Plus 的关联查询，数据库表除了前面小节中已经定义好的用户表外，再额外创建一张订单表，然后插入一些测试数据，执行脚本如下：</p> 
  <pre class="has"><code class="hljs sql"><span class="hljs-keyword">DROP <span class="hljs-keyword">TABLE <span class="hljs-keyword">IF <span class="hljs-keyword">EXISTS <span class="hljs-keyword">user; <span class="hljs-keyword">CREATE <span class="hljs-keyword">TABLE <span class="hljs-string">`t_user` ( <span class="hljs-string">`id` <span class="hljs-built_in">bigint(<span class="hljs-number">20) <span class="hljs-keyword">UNSIGNED <span class="hljs-keyword">NOT <span class="hljs-literal">NULL AUTO_INCREMENT <span class="hljs-keyword">COMMENT <span class="hljs-string">'主键ID', <span class="hljs-string">`name` <span class="hljs-built_in">varchar(<span class="hljs-number">30) <span class="hljs-keyword">NOT <span class="hljs-literal">NULL <span class="hljs-keyword">DEFAULT <span class="hljs-string">'' <span class="hljs-keyword">COMMENT <span class="hljs-string">'姓名', <span class="hljs-string">`age` <span class="hljs-built_in">int(<span class="hljs-number">11) <span class="hljs-literal">NULL <span class="hljs-keyword">DEFAULT <span class="hljs-literal">NULL <span class="hljs-keyword">COMMENT <span class="hljs-string">'年龄', <span class="hljs-string">`gender` <span class="hljs-built_in">tinyint(<span class="hljs-number">2) <span class="hljs-keyword">NOT <span class="hljs-literal">NULL <span class="hljs-keyword">DEFAULT <span class="hljs-number">0 <span class="hljs-keyword">COMMENT <span class="hljs-string">'性别，0：女 1：男', PRIMARY <span class="hljs-keyword">KEY (<span class="hljs-string">`id`) ) <span class="hljs-keyword">COMMENT = <span class="hljs-string">'用户表'; <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_user` (<span class="hljs-string">`id`, <span class="hljs-string">`name`, <span class="hljs-string">`age`, <span class="hljs-string">`gender`) <span class="hljs-keyword">VALUES (<span class="hljs-number">1, <span class="hljs-string">'犬小哈', <span class="hljs-number">30, <span class="hljs-number">1); <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_user` (<span class="hljs-string">`id`, <span class="hljs-string">`name`, <span class="hljs-string">`age`, <span class="hljs-string">`gender`) <span class="hljs-keyword">VALUES (<span class="hljs-number">2, <span class="hljs-string">'关羽', <span class="hljs-number">46, <span class="hljs-number">1); <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_user` (<span class="hljs-string">`id`, <span class="hljs-string">`name`, <span class="hljs-string">`age`, <span class="hljs-string">`gender`) <span class="hljs-keyword">VALUES (<span class="hljs-number">3, <span class="hljs-string">'诸葛亮', <span class="hljs-number">26, <span class="hljs-number">1); <span class="hljs-keyword">CREATE <span class="hljs-keyword">TABLE <span class="hljs-string">`t_order` ( <span class="hljs-string">`id` <span class="hljs-built_in">bigint(<span class="hljs-number">20) <span class="hljs-keyword">UNSIGNED <span class="hljs-keyword">NOT <span class="hljs-literal">NULL AUTO_INCREMENT <span class="hljs-keyword">COMMENT <span class="hljs-string">'主键ID', <span class="hljs-string">`order_id` <span class="hljs-built_in">bigint(<span class="hljs-number">20) <span class="hljs-keyword">UNSIGNED <span class="hljs-keyword">NOT <span class="hljs-literal">NULL <span class="hljs-keyword">COMMENT <span class="hljs-string">'订单ID', <span class="hljs-string">`user_id` <span class="hljs-built_in">bigint(<span class="hljs-number">20) <span class="hljs-keyword">UNSIGNED <span class="hljs-keyword">NOT <span class="hljs-literal">NULL <span class="hljs-keyword">COMMENT <span class="hljs-string">'下单用户ID', <span class="hljs-string">`goods_name` <span class="hljs-built_in">varchar(<span class="hljs-number">30) <span class="hljs-keyword">NOT <span class="hljs-literal">NULL <span class="hljs-keyword">COMMENT <span class="hljs-string">'商品名称', <span class="hljs-string">`goods_price` <span class="hljs-built_in">decimal(<span class="hljs-number">10,<span class="hljs-number">2) <span class="hljs-keyword">NOT <span class="hljs-literal">NULL <span class="hljs-keyword">COMMENT <span class="hljs-string">'商品价格', PRIMARY <span class="hljs-keyword">KEY (<span class="hljs-string">`id`), <span class="hljs-keyword">INDEX idx_order_id(<span class="hljs-string">`order_id`) ) <span class="hljs-keyword">COMMENT = <span class="hljs-string">'订单表'; <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_order` (<span class="hljs-string">`id`, <span class="hljs-string">`order_id`, <span class="hljs-string">`user_id`, <span class="hljs-string">`goods_name`, <span class="hljs-string">`goods_price`) <span class="hljs-keyword">VALUES (<span class="hljs-number">1, <span class="hljs-number">805646264648356, <span class="hljs-number">1, <span class="hljs-string">'Switch 游戏机', <span class="hljs-number">1400.00); <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_order` (<span class="hljs-string">`id`, <span class="hljs-string">`order_id`, <span class="hljs-string">`user_id`, <span class="hljs-string">`goods_name`, <span class="hljs-string">`goods_price`) <span class="hljs-keyword">VALUES (<span class="hljs-number">2, <span class="hljs-number">551787441310504, <span class="hljs-number">1, <span class="hljs-string">'小米手机', <span class="hljs-number">2000.00); <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_order` (<span class="hljs-string">`id`, <span class="hljs-string">`order_id`, <span class="hljs-string">`user_id`, <span class="hljs-string">`goods_name`, <span class="hljs-string">`goods_price`) <span class="hljs-keyword">VALUES (<span class="hljs-number">3, <span class="hljs-number">938562101633493, <span class="hljs-number">2, <span class="hljs-string">'《三国演义》', <span class="hljs-number">66.00); <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_order` (<span class="hljs-string">`id`, <span class="hljs-string">`order_id`, <span class="hljs-string">`user_id`, <span class="hljs-string">`goods_name`, <span class="hljs-string">`goods_price`) <span class="hljs-keyword">VALUES (<span class="hljs-number">4, <span class="hljs-number">791129917310894, <span class="hljs-number">3, <span class="hljs-string">'华为手机', <span class="hljs-number">1200.00); <span class="hljs-keyword">INSERT <span class="hljs-keyword">INTO <span class="hljs-string">`t_order` (<span class="hljs-string">`id`, <span class="hljs-string">`order_id`, <span class="hljs-string">`user_id`, <span class="hljs-string">`goods_name`, <span class="hljs-string">`goods_price`) <span class="hljs-keyword">VALUES (<span class="hljs-number">5, <span class="hljs-number">208722395587361, <span class="hljs-number">3, <span class="hljs-string">'《西游记》', <span class="hljs-number">56.00); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre> 
  <h3 id="需求分析">需求分析</h3> 
  <p>假设前端需要展示数据有如下几个字段：订单号、商品名称、商品价格、下单用户姓名、下单用户年龄、下单用户性别：</p> 
  <p><img src="https://images2.imgbox.com/73/26/SdXhUq5V_o.jpg" alt="" style="outline: none;"></p> 
  <p>则对应的关联 SQL 语句如下:</p> 
  <pre class="has"><code class="hljs sql"><span class="hljs-keyword">select o.order_id, o.goods_name, o.goods_price, u.name, u.age, u.gender
        <span class="hljs-keyword">from t_order <span class="hljs-keyword">as o <span class="hljs-keyword">left <span class="hljs-keyword">join t_user <span class="hljs-keyword">as u <span class="hljs-keyword">on o.user_id = u.id </span></span></span></span></span></span></span></code></pre> 
  <h3 id="项目结构">项目结构</h3> 
  <p>先贴一张项目结构，下面所创建的类与文件可参考这里：</p> 
  <p><img src="https://images2.imgbox.com/28/ee/lOFf9zIe_o.jpg" alt="" style="outline: none;"></p> 
  <h3 id="实体类">实体类</h3> 
  <p>接下来，我们定义实体类。创建一个 <code>OrderVO</code> 视图类，用于传输给前端展示：</p> 
  <pre class="has"><code class="hljs php"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@author: 犬小哈
 * <span class="hljs-doctag">@from: 公众号：小哈学Java, 网站：www.quanxiaoha.com
 * <span class="hljs-doctag">@date: 2022-12-13 14:13
 * <span class="hljs-doctag">@version: v1.0.0 * <span class="hljs-doctag">@description: TODO **/ @Data <span class="hljs-keyword">public <span class="hljs-class"><span class="hljs-keyword">class <span class="hljs-title">OrderVO { <span class="hljs-comment">/** * 订单ID */ <span class="hljs-keyword">private Long orderId; <span class="hljs-comment">/** * 下单用户ID */ <span class="hljs-keyword">private Long userId; <span class="hljs-comment">/** * 商品名称 */ <span class="hljs-keyword">private String goodsName; <span class="hljs-comment">/** * 商品价格 */ <span class="hljs-keyword">private BigDecimal goodsPrice; <span class="hljs-comment">/** * 用户名 */ <span class="hljs-keyword">private String userName; <span class="hljs-comment">/** * 年龄 */ <span class="hljs-keyword">private Integer userAge; <span class="hljs-comment">/** * 性别 */ <span class="hljs-keyword">private Integer userGender; } </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre> 
  <blockquote> 
   <p>TIP： <code>@Data</code> 是 Lombok 注解，偷懒用的，加上它即可免写繁杂的 <code>getXXX/setXXX</code> 相关方法，不了解的小伙伴可自行搜索一下如何使用。</p> 
  </blockquote> 
  <h3 id="开始关联查询">开始关联查询</h3> 
  <h4 id="简单的关联查询">简单的关联查询</h4> 
  <p>创建 <code>UserMapper</code> , 让其继承自 <code>BaseMapper</code> ， 并自定义一个查询订单列表的方法:</p> 
  <pre class="has"><code class="hljs java"><span class="hljs-keyword">public <span class="hljs-class"><span class="hljs-keyword">interface <span class="hljs-title">UserMapper <span class="hljs-keyword">extends <span class="hljs-title">BaseMapper&lt;<span class="hljs-title">User&gt; { <span class="hljs-comment">// 查询订单列表 <span class="hljs-function">List&lt;OrderVO&gt; <span class="hljs-title">selectOrders<span class="hljs-params">(); } </span></span></span></span></span></span></span></span></span></span></span></code></pre> 
  <p>在项目的 <code>resource</code> 目录下新建 <code>mapper</code> 文件夹，并在 <code>mapper</code> 文件夹中创建 <code>UserMapper.xml</code> 文件：</p> 
  <p><img src="https://images2.imgbox.com/19/80/FjfLScZq_o.jpg" alt="" style="outline: none;"></p> 
  <p><code>UserMapper.xml</code> 中编写关联语句，以及需要映射的对象，内容如下：</p> 
  <pre class="has"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper <span class="hljs-meta-keyword">PUBLIC <span class="hljs-meta-string">"-//mybatis.org//DTD Mapper 3.0//EN" <span class="hljs-meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt; <span class="hljs-tag">&lt;<span class="hljs-name">mapper <span class="hljs-attr">namespace=<span class="hljs-string">"com.quanxiaoha.mybatisplusdemo.mapper.UserMapper"&gt; <span class="hljs-tag">&lt;<span class="hljs-name">resultMap <span class="hljs-attr">id=<span class="hljs-string">"orderMap" <span class="hljs-attr">type=<span class="hljs-string">"com.quanxiaoha.mybatisplusdemo.model.OrderVO"&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userName" <span class="hljs-attr">column=<span class="hljs-string">"name"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userAge" <span class="hljs-attr">column=<span class="hljs-string">"age"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userGender" <span class="hljs-attr">column=<span class="hljs-string">"gender"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"orderId" <span class="hljs-attr">column=<span class="hljs-string">"order_id"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userId" <span class="hljs-attr">column=<span class="hljs-string">"user_id"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"goodsName" <span class="hljs-attr">column=<span class="hljs-string">"goods_name"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"goodsPrice" <span class="hljs-attr">column=<span class="hljs-string">"goods_price"/&gt; <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap&gt; <span class="hljs-tag">&lt;<span class="hljs-name">select <span class="hljs-attr">id=<span class="hljs-string">"selectOrders" <span class="hljs-attr">resultMap=<span class="hljs-string">"orderMap"&gt; select o.order_id, o.user_id, o.goods_name, o.goods_price, u.name, u.age, u.gender from t_order as o left join t_user as u on o.user_id = u.id <span class="hljs-tag">&lt;/<span class="hljs-name">select&gt; <span class="hljs-tag">&lt;/<span class="hljs-name">mapper&gt; </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre> 
  <p>创建完了 <code>UserMapper.xml</code> 文件后，还需要在 <code>applicatoin.yml</code> 中添加如下配置，告诉 Mybatis Plus 框架去扫描这些 <code>xml</code> 文件：</p> 
  <pre class="has"><code class="hljs less"><span class="hljs-attribute">mybatis-plus:
  <span class="hljs-attribute">mapper-locations: <span class="hljs-attribute">classpath:/mapper<span class="hljs-comment">/*Mapper.xml
</span></span></span></span></code></pre> 
  <p><img src="https://images2.imgbox.com/60/1b/JEDPhCDu_o.jpg" alt="" style="outline: none;"></p> 
  <p>然后，创建一个单元测试看看好不好使:</p> 
  <pre class="has"><code class="hljs java"><span class="hljs-meta">@Autowired
<span class="hljs-keyword">private UserMapper userMapper;

<span class="hljs-meta">@Test
<span class="hljs-function"><span class="hljs-keyword">void <span class="hljs-title">testSelectOrders<span class="hljs-params">() { List&lt;OrderVO&gt; orderVOS = userMapper.selectOrders(); } </span></span></span></span></span></span></span></code></pre> 
  <p>执行上面的单元测试，实际执行 SQL 为：</p> 
  <pre class="has"><code class="hljs sql"><span class="hljs-keyword">select o.order_id, o.user_id, o.goods_name, o.goods_price, u.name, u.age, u.gender <span class="hljs-keyword">from t_order <span class="hljs-keyword">as o <span class="hljs-keyword">left <span class="hljs-keyword">join t_user <span class="hljs-keyword">as u <span class="hljs-keyword">on o.user_id = u.id </span></span></span></span></span></span></span></code></pre> 
  <p>返回数据如下：</p> 
  <p><img src="https://images2.imgbox.com/1b/c7/fQcGy5R0_o.jpg" alt="" style="outline: none;"></p> 
  <p>到这里，一个简单的关联查询就搞定了。</p> 
  <h4 id="带分页的关联查询">带分页的关联查询</h4> 
  <p>实际开发场景中，很多关联查询都需要结合分页一起使用，假设上面展示的数据需要分页展示，且需要支持条件查询，要怎么做呢？</p> 
  <h5>定义关联查询分页方法</h5> 
  <p>在 <code>UserMapper</code> 接口中再定义支持分页的关联查询方法：</p> 
  <pre class="has"><code class="hljs java"><span class="hljs-keyword">public <span class="hljs-class"><span class="hljs-keyword">interface <span class="hljs-title">UserMapper <span class="hljs-keyword">extends <span class="hljs-title">BaseMapper&lt;<span class="hljs-title">User&gt; { <span class="hljs-comment">//... <span class="hljs-function">IPage&lt;OrderVO&gt; <span class="hljs-title">selectOrderPage<span class="hljs-params">(IPage&lt;OrderVO&gt; page, @Param(Constants.WRAPPER) QueryWrapper&lt;OrderVO&gt; wrapper); <span class="hljs-comment">//... } </span></span></span></span></span></span></span></span></span></span></span></span></code></pre> 
  <blockquote> 
   <p>TIP : 可以看到我们定义的关联分页查询和 Myatis Plus 内部提供的分页方法相差不大，仔细看入参，我们复用了 Mybatis Plus 内部提供的分页类<code>IPage</code>，以及 <code>QueryWrapper</code> (用于组装 <code>where</code> 条件)。</p> 
  </blockquote> 
  <p>然后在 <code>UserMapper.xml</code> 中创建该方法对应的关联查询：</p> 
  <pre class="has"><code class="hljs xml"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-meta-keyword">mapper <span class="hljs-meta-keyword">PUBLIC <span class="hljs-meta-string">"-//mybatis.org//DTD Mapper 3.0//EN" <span class="hljs-meta-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd" &gt; <span class="hljs-tag">&lt;<span class="hljs-name">mapper <span class="hljs-attr">namespace=<span class="hljs-string">"com.quanxiaoha.mybatisplusdemo.mapper.UserMapper"&gt; <span class="hljs-tag">&lt;<span class="hljs-name">resultMap <span class="hljs-attr">id=<span class="hljs-string">"orderMap" <span class="hljs-attr">type=<span class="hljs-string">"com.quanxiaoha.mybatisplusdemo.model.OrderVO"&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userName" <span class="hljs-attr">column=<span class="hljs-string">"name"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userAge" <span class="hljs-attr">column=<span class="hljs-string">"age"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userGender" <span class="hljs-attr">column=<span class="hljs-string">"gender"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"orderId" <span class="hljs-attr">column=<span class="hljs-string">"order_id"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"userId" <span class="hljs-attr">column=<span class="hljs-string">"user_id"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"goodsName" <span class="hljs-attr">column=<span class="hljs-string">"goods_name"/&gt; <span class="hljs-tag">&lt;<span class="hljs-name">result <span class="hljs-attr">property=<span class="hljs-string">"goodsPrice" <span class="hljs-attr">column=<span class="hljs-string">"goods_price"/&gt; <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap&gt; //... <span class="hljs-tag">&lt;<span class="hljs-name">select <span class="hljs-attr">id=<span class="hljs-string">"selectOrderPage" <span class="hljs-attr">resultMap=<span class="hljs-string">"orderMap"&gt; select u.name, u.age, u.gender, o.order_id, o.goods_name, o.goods_price from t_user as u left join t_order as o on u.id = o.user_id ${ew.customSqlSegment} <span class="hljs-tag">&lt;/<span class="hljs-name">select&gt; //... <span class="hljs-tag">&lt;/<span class="hljs-name">mapper&gt; </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre> 
  <p>再创建一个单元测试：</p> 
  <pre class="has"><code class="hljs cs">@Autowired<span class="hljs-keyword">private UserMapper userMapper;

@<span class="hljs-function">Test
<span class="hljs-keyword">void <span class="hljs-title">testSelectOrdersPage(<span class="hljs-params">) { <span class="hljs-comment">// 查询第一页，每页显示 10 条 Page&lt;OrderVO&gt; page = <span class="hljs-keyword">new Page&lt;&gt;(<span class="hljs-number">1, <span class="hljs-number">10); <span class="hljs-comment">// 注意：一定要手动关闭 SQL 优化，不然查询总数的时候只会查询主表 page.setOptimizeCountSql(<span class="hljs-literal">false); <span class="hljs-comment">// 组装查询条件 where age = 20 QueryWrapper&lt;OrderVO&gt; queryWrapper = <span class="hljs-keyword">new QueryWrapper&lt;&gt;(); queryWrapper.ge(<span class="hljs-string">"age", <span class="hljs-number">20); IPage&lt;OrderVO&gt; page1 = userMapper.selectOrderPage(page, queryWrapper); System.<span class="hljs-keyword">out.println(<span class="hljs-string">"总记录数：" + page1.getTotal()); System.<span class="hljs-keyword">out.println(<span class="hljs-string">"总共多少页：" + page1.getPages()); System.<span class="hljs-keyword">out.println(<span class="hljs-string">"当前页码：" + page1.getCurrent()); System.<span class="hljs-keyword">out.println(<span class="hljs-string">"查询数据：" + page1.getRecords()); } </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></pre> 
  <p>执行该单元测试，控制台打印实际执行 SQL 如下，可见分页功能也是 OK 的，先执行 <code>select count(*)</code> 查询记录总数，然后再执行关联分页查询：</p> 
  <p><img src="https://images2.imgbox.com/8d/0b/h9r1OSQf_o.jpg" alt="" style="outline: none;"></p> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/adcc0196643cb68582b20592135dfb99/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">yarn安装失败解决方案之一</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0332365bf13b135e2184eab4fe49ac7f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【allegro 17.4软件操作保姆级教程一】软件操作环境设置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>