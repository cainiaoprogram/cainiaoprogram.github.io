<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>内核/逻辑处理器/线程/多线程/多CPU/多核CPU - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="内核/逻辑处理器/线程/多线程/多CPU/多核CPU" />
<meta property="og:description" content="文章目录 1. 逻辑CPU2. 线程数和逻辑CPU个数，内核个数3.线程/进程/多核CPU3.1 线程3.2 多核cpu3.3 进程和线程 1. 逻辑CPU 先查看电脑cpu信息，可以看到，是8个逻辑cpu
2. 线程数和逻辑CPU个数，内核个数 在任务管理器中，看到其实是4个内核，但是逻辑处理器是8个，有多少个逻辑处理器，就说明你的cpu可以同时处理几个线程
线程数=逻辑处理器个数
一个物理CPU可以有1个或者多个物理内核，一个物理内核可以作为1个或者2个逻辑CPU。 操作系统可以使用逻辑CPU来模拟真实CPU。
在没有多核处理器的时候，一个物理CPU只能有一个物理内核，
有了多核技术，一个物理CPU可以有多个物理内核，可以把一个CPU当作多个CPU使用，即逻辑CPU。
没有开启超线程时，逻辑CPU的个数就是总的CPU物理内核数。
开启超线程后，逻辑CPU的个数就是总的CPU物理内核数的两倍。
实际能看到的2个物理CPU:
实现16个逻辑CPU的原理图:
参考：
物理CPU，物理CPU内核，逻辑CPU概念详解或者简书：https://www.jianshu.com/p/6a53819fa89b 3.线程/进程/多核CPU 3.1 线程 from multiprocessing import cpu_count print(cpu_count()) &gt; 8 在python中，使用上述代码可以获取当前系统的逻辑cpu个数，也就是支持并发的线程个数。
3.2 多核cpu 左图：多个物理CPU，CPU通过总线进行通信，效率比较低。右图：多核CPU，不同的核通过L2 cache进行通信，存储和外设通过总线与CPU通信 感谢评论区同学的提醒，这里更新一下CPU三级cache的内容，以下内容摘录自：小林coding-图解系统
CPU 的高速缓存，通常可以分为 L1、L2、L3 这样的三层高速缓存，也称为一级缓存、二级缓存、三级缓存。L1缓存是每个CPU核一个，每个 CPU 核心都有一块属于自己的 L1 高速缓存，指令和数据在 L1 是分开存放的，所以 L1 高速缓存通常分成指令缓存和数据缓存。L2 高速缓存同样每个 CPU 核心都有L3 高速缓存通常是多个 CPU 核心共用的 CPU多个核之间L1和L2 cache是独享的，L3 cache是共享的。
3.3 进程和线程 进程是程序的一次执行过程，是一个动态概念，是程序在执行过程中分配和管理资源的基本单位，线程是CPU调度和分派的基本单位，它可与同属一个进程的其他的线程共享进程所拥有的全部资源。联系：线程是进程的一部分，一个线程只能属于一个进程，而一个进程可以有多个线程，但至少有一个线程；根本区别：进程是操作系统资源分配的基本单位，而线程是任务调度和执行的基本单位 所以对于程序员来说，其实更多时候是和线程打交道，一个程序是一整个进程，程序中可以有多个线程，用来并行进行不同的事情。
参考：
✅关于多 CPU、多核和多线程cpu的个数、核心数、线程数进程，线程与多核，多cpu之间的关系cpu的核数和进程_CPU与核心及进程和线程认识How many cores does my computer have?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7735d4537cb72b0ee3378d6e2417f3c5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-18T16:47:51+08:00" />
<meta property="article:modified_time" content="2023-04-18T16:47:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">内核/逻辑处理器/线程/多线程/多CPU/多核CPU</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_CPU_1" rel="nofollow">1. 逻辑CPU</a></li><li><a href="#2_CPU_4" rel="nofollow">2. 线程数和逻辑CPU个数，内核个数</a></li><li><a href="#3CPU_28" rel="nofollow">3.线程/进程/多核CPU</a></li><li><ul><li><a href="#31__29" rel="nofollow">3.1 线程</a></li><li><a href="#32_cpu_40" rel="nofollow">3.2 多核cpu</a></li><li><a href="#33__65" rel="nofollow">3.3 进程和线程</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1_CPU_1"></a>1. 逻辑CPU</h2> 
<p>先查看电脑cpu信息，可以看到，是8个逻辑cpu<br> <img src="https://images2.imgbox.com/4d/e0/XRt1cByK_o.png" alt="在这里插入图片描述" width="400"></p> 
<h2><a id="2_CPU_4"></a>2. 线程数和逻辑CPU个数，内核个数</h2> 
<p>在任务管理器中，看到其实是4个内核，但是逻辑处理器是8个，有多少个逻辑处理器，就说明你的cpu可以同时处理几个线程</p> 
<p><strong>线程数=逻辑处理器个数</strong><br> <img src="https://images2.imgbox.com/30/a5/TuDcONxJ_o.png" alt="在这里插入图片描述" width="500"></p> 
<ul><li>一个<code>物理CPU</code>可以有1个或者多个<code>物理内核</code>，</li><li>一个<code>物理内核</code>可以作为1个或者2个<code>逻辑CPU</code>。</li></ul> 
<blockquote> 
 <p>操作系统可以使用逻辑CPU来模拟真实CPU。<br> 在没有多核处理器的时候，一个物理CPU只能有一个物理内核，<br> 有了多核技术，一个物理CPU可以有多个物理内核，可以把一个CPU当作多个CPU使用，即逻辑CPU。<br> 没有开启超线程时，逻辑CPU的个数就是总的CPU物理内核数。<br> 开启超线程后，逻辑CPU的个数就是总的CPU物理内核数的两倍。</p> 
</blockquote> 
<p>实际能看到的2个物理CPU:<br> <img src="https://images2.imgbox.com/98/67/Ix3vG1SD_o.png" alt="在这里插入图片描述" width="400"><br> 实现16个逻辑CPU的原理图:</p> 
<p><img src="https://images2.imgbox.com/bb/ad/jTMx6G4r_o.png" alt="在这里插入图片描述" width="600"></p> 
<p>参考：</p> 
<ul><li><a href="https://blog.csdn.net/bugzeroman/article/details/89167528">物理CPU，物理CPU内核，逻辑CPU概念详解</a></li><li>或者简书：<a href="https://www.jianshu.com/p/6a53819fa89b" rel="nofollow">https://www.jianshu.com/p/6a53819fa89b</a></li></ul> 
<h2><a id="3CPU_28"></a>3.线程/进程/多核CPU</h2> 
<h3><a id="31__29"></a>3.1 线程</h3> 
<pre><code class="prism language-python"><span class="token keyword">from</span> multiprocessing <span class="token keyword">import</span> cpu_count
<span class="token keyword">print</span><span class="token punctuation">(</span>cpu_count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token operator">&gt;</span> <span class="token number">8</span>
</code></pre> 
<p>在python中，使用上述代码可以获取当前系统的逻辑cpu个数，也就是支持并发的线程个数。</p> 
<hr> 
<h3><a id="32_cpu_40"></a>3.2 多核cpu</h3> 
<p><img src="https://images2.imgbox.com/80/9b/6XMi4ZVc_o.png" alt="在这里插入图片描述" width="600"></p> 
<ul><li>左图：多个物理CPU，CPU通过总线进行通信，效率比较低。</li><li>右图：多核CPU，不同的核通过L2 cache进行通信，存储和外设通过总线与CPU通信</li></ul> 
<hr> 
<p>感谢评论区同学的提醒，这里更新一下CPU三级cache的内容，以下内容摘录自：<a href="https://www.xiaolincoding.com/os/1_hardware/storage.html#cpu-cache" rel="nofollow">小林coding-图解系统</a><br> <img src="https://images2.imgbox.com/d0/54/4K1keBkh_o.png" alt="在这里插入图片描述" width="500"></p> 
<ul><li>CPU 的高速缓存，通常可以分为 L1、L2、L3 这样的三层高速缓存，也称为一级缓存、二级缓存、三级缓存。</li><li>L1缓存是每个CPU核一个，每个 CPU 核心都有一块属于自己的 L1 高速缓存，指令和数据在 L1 是分开存放的，所以 L1 高速缓存通常分成指令缓存和数据缓存。</li><li>L2 高速缓存同样每个 CPU 核心都有</li><li>L3 高速缓存通常是多个 CPU 核心共用的</li></ul> 
<p>CPU多个核之间L1和L2 cache是独享的，L3 cache是共享的。</p> 
<hr> 
<h3><a id="33__65"></a>3.3 进程和线程</h3> 
<ul><li><strong>进程</strong>是程序的一次执行过程，是一个动态概念，是程序在执行过程中分配和管理资源的基本单位，</li><li><strong>线程</strong>是CPU调度和分派的基本单位，它可与同属一个进程的其他的线程共享进程所拥有的全部资源。</li><li><strong>联系</strong>：线程是进程的一部分，一个线程只能属于一个进程，而一个进程可以有多个线程，但至少有一个线程；</li><li><strong>根本区别</strong>：<code>进程</code>是操作系统<code>资源分配</code>的基本单位，而<code>线程</code>是<code>任务调度和执行</code>的基本单位</li></ul> 
<blockquote> 
 <p>所以对于程序员来说，其实更多时候是和线程打交道，一个程序是一整个进程，程序中可以有多个线程，用来并行进行不同的事情。</p> 
</blockquote> 
<p>参考：</p> 
<ul><li>✅<a href="https://www.junmajinlong.com/os/multi_cpu/" rel="nofollow">关于多 CPU、多核和多线程</a></li><li><a href="https://www.cnblogs.com/spring2022/p/16096007.html" rel="nofollow">cpu的个数、核心数、线程数</a></li><li><a href="https://blog.csdn.net/im_xiao/article/details/106790704">进程，线程与多核，多cpu之间的关系</a></li><li><a href="https://blog.csdn.net/weixin_33615688/article/details/111954643">cpu的核数和进程_CPU与核心及进程和线程认识</a></li><li><a href="https://www.computerhope.com/issues/ch002235.htm" rel="nofollow">How many cores does my computer have?</a></li><li><a href="https://stackoverflow.com/questions/74408140/what-does-it-mean-when-we-say-4-cores-8-threads" rel="nofollow">What does it mean when we say “4 cores 8 threads”?</a></li><li><a href="https://www.quora.com/Is-there-a-Mac-OS-equivalent-to-the-Linux-lscpu" rel="nofollow">Is there a Mac OS equivalent to the Linux “lscpu”?</a> 
  <blockquote> 
   <p>macOS下查看cpu信息，类似linux的<code>lscpu</code>的指令是：<br> <code>sysctl -a|grep cpu|grep hw</code></p> 
  </blockquote> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e9ee59b4d5a9cf4af6214b3d33a7f286/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue中的二次确认用装饰器封装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1e2756b5b175f733d24ed3e30a656bec/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Jetpack】DataBinding 架构组件 ④ ( 使用 @BindingAdapter 注解为布局组件绑定自定义逻辑 | 网络图片加载 | 本地图片加载 )</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>