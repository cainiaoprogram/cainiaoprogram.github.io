<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux--Shell练习题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux--Shell练习题" />
<meta property="og:description" content="目录
一，第一套
二，第二套
三，第三套
四，第四套
五，第五套
六，第六套
七，第七套
八，第八套
一，第一套 1.利用脚本安装httpd
vim http.sh 复制：(没有源代码的可以上CSDN搜索用户：征服bug，找到这个文章就可以复制了)
#!/bin/bash #安装httpd服务 rpm -q httpd if [ $? -eq httpd ] then rpm -e httpd fi #安装依赖包 rpm -ivh /mnt/Packages/apr-1.4.8-3.el7.x86_64.rpm rpm -ivh /mnt/Packages/apr-devel-1.4.8-3.el7.x86_64.rpm rpm -ivh /mnt/Packages/cyrus-sasl-devel-2.1.26-20.el7_2.x86_64.rpm rpm -ivh /mnt/Packages/expat-devel-2.1.0-8.el7.x86_64.rpm rpm -ivh /mnt/Packages/libdb-devel-5.3.21-19.el7.x86_64.rpm rpm -ivh /mnt/Packages/openldap-devel-2.4.40-13.el7.x86_64.rpm rpm -ivh /mnt/Packages/apr-util-devel-1.5.2-6.el7.x86_64.rpm rpm -ivh /mnt/Packages/apr-util-1.5.2-6.el7.x86_64.rpm rpm -ivh /mnt/Packages/pcre-devel-8.32-15.el7_2.1.x86_64.rpm rpm -ivh /mnt/Packages/pcre-8.32-15.el7_2.1.x86_64.rpm #安装源代码包 tar zxf /mnt/tar/httpd-2.4.25.tar.gz -C /usr/src/ cd /usr/src/httpd-2.4.25/ ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e5b2142497792e673df54040c3ca3a51/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-02T19:08:50+08:00" />
<meta property="article:modified_time" content="2022-11-02T19:08:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux--Shell练习题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<blockquote> 
 <p id="%E4%B8%80%EF%BC%8C%E7%AC%AC%E4%B8%80%E5%A5%97-toc" style="margin-left:0px;"><a href="#%E4%B8%80%EF%BC%8C%E7%AC%AC%E4%B8%80%E5%A5%97" rel="nofollow">一，第一套</a></p> 
 <p id="%E4%BA%8C%EF%BC%8C%E7%AC%AC%E4%BA%8C%E5%A5%97%EF%BC%88%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%EF%BC%8C%E7%AC%AC%E4%BA%8C%E5%A5%97%EF%BC%88%EF%BC%89" rel="nofollow">二，第二套</a></p> 
 <p id="%E4%B8%89%EF%BC%8C%E7%AC%AC%E4%B8%89%E5%A5%97-toc" style="margin-left:0px;"><a href="#%E4%B8%89%EF%BC%8C%E7%AC%AC%E4%B8%89%E5%A5%97" rel="nofollow">三，第三套</a></p> 
 <p id="%E5%9B%9B%EF%BC%8C%E7%AC%AC%E5%9B%9B%E5%A5%97-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%EF%BC%8C%E7%AC%AC%E5%9B%9B%E5%A5%97" rel="nofollow">四，第四套</a></p> 
 <p id="%E4%BA%94%EF%BC%8C%E7%AC%AC%E4%BA%94%E5%A5%97%EF%BC%88%E5%8F%AF%E4%BB%A5%E7%BB%93%E5%90%88%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%AE%8C%E6%88%90%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E4%BA%94%EF%BC%8C%E7%AC%AC%E4%BA%94%E5%A5%97%EF%BC%88%E5%8F%AF%E4%BB%A5%E7%BB%93%E5%90%88%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%AE%8C%E6%88%90%EF%BC%89" rel="nofollow">五，第五套</a></p> 
 <p id="%E5%85%AD%EF%BC%8C%E7%AC%AC%E5%85%AD%E5%A5%97-toc" style="margin-left:0px;"><a href="#%E5%85%AD%EF%BC%8C%E7%AC%AC%E5%85%AD%E5%A5%97" rel="nofollow">六，第六套</a></p> 
 <p id="%E4%B8%83%EF%BC%8C%E7%AC%AC%E4%B8%83%E5%A5%97-toc" style="margin-left:0px;"><a href="#%E4%B8%83%EF%BC%8C%E7%AC%AC%E4%B8%83%E5%A5%97" rel="nofollow">七，第七套</a></p> 
 <p id="%E5%85%AB%EF%BC%8C%E7%AC%AC%E5%85%AB%E5%A5%97-toc" style="margin-left:0px;"><a href="#%E5%85%AB%EF%BC%8C%E7%AC%AC%E5%85%AB%E5%A5%97" rel="nofollow">八，第八套</a></p> 
</blockquote> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%EF%BC%8C%E7%AC%AC%E4%B8%80%E5%A5%97" style="margin-left:0px;text-align:justify;">一，第一套</h2> 
<p style="margin-left:0;text-align:justify;">1.利用脚本安装httpd</p> 
<pre><code class="language-bash">vim http.sh</code></pre> 
<p style="margin-left:0;text-align:justify;">复制：(没有源代码的可以上CSDN搜索用户：征服bug，找到这个文章就可以复制了)</p> 
<pre><code class="language-bash">#!/bin/bash
#安装httpd服务
rpm -q httpd
if [ $? -eq httpd ]
then
       rpm -e httpd
fi
#安装依赖包
rpm -ivh /mnt/Packages/apr-1.4.8-3.el7.x86_64.rpm
rpm -ivh /mnt/Packages/apr-devel-1.4.8-3.el7.x86_64.rpm
rpm -ivh /mnt/Packages/cyrus-sasl-devel-2.1.26-20.el7_2.x86_64.rpm
rpm -ivh /mnt/Packages/expat-devel-2.1.0-8.el7.x86_64.rpm
rpm -ivh /mnt/Packages/libdb-devel-5.3.21-19.el7.x86_64.rpm
rpm -ivh /mnt/Packages/openldap-devel-2.4.40-13.el7.x86_64.rpm
rpm -ivh /mnt/Packages/apr-util-devel-1.5.2-6.el7.x86_64.rpm
rpm -ivh /mnt/Packages/apr-util-1.5.2-6.el7.x86_64.rpm
rpm -ivh /mnt/Packages/pcre-devel-8.32-15.el7_2.1.x86_64.rpm
rpm -ivh /mnt/Packages/pcre-8.32-15.el7_2.1.x86_64.rpm
#安装源代码包
tar zxf /mnt/tar/httpd-2.4.25.tar.gz  -C /usr/src/
cd /usr/src/httpd-2.4.25/
./configure  --prefix=/usr/local/httpd  --enable-so  --enable-rewrite  --enable-charset-lite  --enable-cgi
make
make install
#优化超链接
ln -s /usr/local/httpd/bin/* /usr/local/bin</code></pre> 
<p style="margin-left:0;text-align:justify;">挂盘</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="45" src="https://images2.imgbox.com/a6/d4/XiniAEAC_o.png" width="855"></p> 
<pre><code class="language-bash">mount /dev/sr0 /mnt</code></pre> 
<p style="margin-left:0;text-align:justify;">运行脚本(安装时间可以直接开第二个桌面做第三套)</p> 
<pre><code class="language-bash">.  http.sh</code></pre> 
<h2 id="%E4%BA%8C%EF%BC%8C%E7%AC%AC%E4%BA%8C%E5%A5%97%EF%BC%88%EF%BC%89" style="margin-left:0px;text-align:justify;">二，第二套</h2> 
<pre><code class="language-bash">systemctl stop firewalld

setenforce 0

ifconfig ens33 192.168.1.1</code></pre> 
<ol><li style="text-align:justify;">配置两个httpd虚拟主机 <pre><code class="language-bash">vim /usr/local/httpd/conf/extra/httpd-vhosts.conf</code></pre> </li><li style="text-align:justify;">第一个域名为<a href="http://www.bdqn1.com" rel="nofollow" title="www.bdqn1.com">www.bdqn1.com</a>,第二个为<a href="http://www.bdqn2.com" rel="nofollow" title="www.bdqn2.com">www.bdqn2.com</a></li></ol> 
<pre><code class="language-bash">mkdir /A

mkdir /B

echo "A" &gt; /A/index.html

echo "B" &gt; /B/index.html

htpasswd -c /usr/local/httpd/conf/.passwd xiaoming</code></pre> 
<p>3.第一个只允许192.168.1.0/24网段访问，第二个需要用户验证 </p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="298" src="https://images2.imgbox.com/b7/4b/QwZa1ZJD_o.png" width="401"><br> 4.删除http配置文件中的注释：vim /usr/local/httpd/conf/httpd.conf</p> 
<pre><code class="language-bash">Include conf/extra/httpd-vhosts.conf</code></pre> 
<p style="margin-left:0;text-align:justify;">5.打开服务：</p> 
<pre><code class="language-bash">apachectl start</code></pre> 
<p style="margin-left:0;text-align:justify;">注：如果出现文件：报错信息，更改配置文件，重启</p> 
<pre><code class="language-bash">killall httpd

apachectl start</code></pre> 
<p>6.并分别进行验证，找系统文件 </p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="92" src="https://images2.imgbox.com/00/66/Fz32vomY_o.png" width="440"></p> 
<p style="margin-left:0;text-align:justify;">添加一下内容</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="69" src="https://images2.imgbox.com/61/84/3blR4OXR_o.png" width="446"></p> 
<p>网页访问：</p> 
<p><img alt="" height="146" src="https://images2.imgbox.com/8b/15/HI2AdNjN_o.png" width="483"></p> 
<p></p> 
<p><img alt="" height="111" src="https://images2.imgbox.com/e7/95/7mVdzUgJ_o.png" width="494"></p> 
<p style="margin-left:0;text-align:justify;"></p> 
<h2 id="%E4%B8%89%EF%BC%8C%E7%AC%AC%E4%B8%89%E5%A5%97" style="margin-left:0px;text-align:justify;">三，第三套</h2> 
<p style="text-align:justify;">1.在mysql上创建数据库bdqn，创建表test1，表中包含姓名，成绩列</p> 
<pre><code class="language-bash">mysql -u root

create database bdqn;

use bdqn;

create table test1 (name varchar(6),age int);</code></pre> 
<p>2.在test1中添加3条记录 </p> 
<pre><code class="language-bash">insert into test1 values('B',89);

insert into test1 values('C',123);

insert into test1 values('A',100);</code></pre> 
<p>3.利用mysqldump备份数据库 </p> 
<pre><code class="language-bash">mysqldump  -u root bdqn test1 &gt;bdqn- test1-$(date +%F).sql</code></pre> 
<p>4.然后再添加两条记录 </p> 
<pre><code class="language-bash">mysql -u root

insert into test1 values(‘D',13);

insert into test1 values('E',23);</code></pre> 
<p> 5.删除test1表</p> 
<pre><code class="language-bash">drop table bdqn.t1;</code></pre> 
<p>6.删除test1表 </p> 
<pre><code class="language-bash">mysql -u root bdqn &lt;bdqn-test1-2022-07-30.sql

mysql -u root

use bdqn;

select * from test1</code></pre> 
<h2 id="%E5%9B%9B%EF%BC%8C%E7%AC%AC%E5%9B%9B%E5%A5%97" style="margin-left:0px;text-align:justify;">四，第四套</h2> 
<p style="text-align:justify;">1.创建用户名列表文件users.txt，其中包含用户小明、小红、小黑、小白</p> 
<pre><code class="language-bash">vim users.txt

xiaoming
xiaohong
xiaohei
xiaobai</code></pre> 
<p>2.利用for循环语句创建以上用户 </p> 
<pre><code class="language-bash">vim foruseradd.sh</code></pre> 
<pre><code class="language-bash">#!/bin/bash

ulist=$(cat /root/users.txt)
for uname in $ulist
do
useradd $uname
echo "123456" | passwd --stdin $uname &amp;&gt; /dev/null
done</code></pre> 
<p>3.利用while循环语句创建用户stu1—10 </p> 
<pre><code class="language-bash">vim whileuseradd.sh</code></pre> 
<pre><code class="language-bash">#!/bin/bash
NAMEADD="stu"
i=1
while [ $i -le 10 ]
do
    useradd ${NAMEADD}$i
    let i++
done</code></pre> 
<p> 4.创建脚本测试192.168.1.0/24网段在线的主机</p> 
<pre><code class="language-bash">#!/bin/bash
NADD="192.168.1."
HADD=1
while [ $HADD -le 5 ]
do
        ping -c 3 -i 0.2 -W 3 ${NADD}${HADD} &amp;&gt; /dev/null
        if [ $? -eq 0 ] ; then
               echo ${NADD}${HADD} &gt;&gt; ping.txt
        fi
        let HADD++
done</code></pre> 
<h2 id="%E4%BA%94%EF%BC%8C%E7%AC%AC%E4%BA%94%E5%A5%97%EF%BC%88%E5%8F%AF%E4%BB%A5%E7%BB%93%E5%90%88%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%AE%8C%E6%88%90%EF%BC%89" style="margin-left:0px;text-align:justify;">五，第五套</h2> 
<p style="margin-left:0;text-align:justify;">开启第二台虚拟机，关闭防火墙，SLinux，配置地址，两台虚拟机可以通信</p> 
<p style="text-align:justify;">1.在ser2上配置ssh免密码登录</p> 
<pre><code class="language-bash">ssh-keygen -t ecdsa

ssh-copy-id -i ~/.ssh/id_ecdsa.pub  root@192.168.1.2

ssh 192.168.1.2</code></pre> 
<p style="text-align:justify;">2.安装xshell，在windows主机上可以连接ser2，并将windows主机上的文件上传到ser2的/tmp目录下</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="301" src="https://images2.imgbox.com/87/6e/Mj0Wx2Na_o.png" width="415"></p> 
<h2 id="%E5%85%AD%EF%BC%8C%E7%AC%AC%E5%85%AD%E5%A5%97" style="margin-left:0px;text-align:justify;">六，第六套</h2> 
<p style="margin-left:0;text-align:justify;">1.利用yum安装两台httpd</p> 
<pre><code class="language-bash">rm -f /etc/yum.repos.d/*
vim /etc/yum.repos.d/local.repo
[local]
name=local
baseurl=file:///mnt
gpgcheck=0

yum -y install httpd
</code></pre> 
<p style="margin-left:0;text-align:justify;">2.编写脚本，利用inotify+rsync实时监控httpd1上的/var/www/htnl目录，当发现变化后能自动的将变化的数据上传到另一个httpd上</p> 
<p style="margin-left:0;text-align:justify;">两台虚拟机，一台192.168.1.1（rsync），另外一台192.168.1.2（inotify）</p> 
<p style="margin-left:0;text-align:justify;">第一台虚拟机192.168.1.1配置</p> 
<p style="margin-left:0;text-align:justify;">第二台虚拟机（192.168.1.2）</p> 
<pre><code class="language-bash">tar zxf /mnt/inotify-tools-3.14.tar.gz -C /usr/src/
cd /usr/src/inotify-tools-3.14/
./configure &amp;&amp; make &amp;&amp; make install

vim inotify.sh
#!/bin/bash
inotify="inotifywait -mrq -e modify,create,move,delete /var/www/html"
rsync="rsync -avzH /var/www/html/ @192.168.1.1::aaa"
$inotify | while read DIRECTORY EVENT FILE
do
        $rsync
done</code></pre> 
<p style="margin-left:0;text-align:justify;">3.并实现脚本自动运行</p> 
<pre><code class="language-bash">. inotify.sh</code></pre> 
<p style="margin-left:0;text-align:justify;"></p> 
<h2 id="%E4%B8%83%EF%BC%8C%E7%AC%AC%E4%B8%83%E5%A5%97" style="margin-left:0px;text-align:justify;">七，第七套</h2> 
<p>注：可以恢复快照，到安装squid完成的位置</p> 
<p style="text-align:justify;">1.安装squid代理服务器</p> 
<p style="text-align:justify;">2.配置传统代理，让客户机访问internet</p> 
<p style="margin-left:0;text-align:justify;">#vim   /etc/resolv.conf</p> 
<p style="margin-left:0;text-align:justify;">Nameserver  192.168.1.2</p> 
<p style="margin-left:0;text-align:justify;"></p> 
<p style="margin-left:0;text-align:justify;">#vim  /etc/squid.conf</p> 
<p style="margin-left:0;text-align:justify;">acl Safe_ports port 53</p> 
<p style="text-align:justify;"><a href="https://blog.csdn.net/weixin_53678904/article/details/125916241?spm=1001.2014.3001.5502" title="(1条消息) Linux-Squid代理服务器搭建_征服bug的博客-CSDN博客_squid代理快速搭建">(1条消息) Linux-Squid代理服务器搭建_征服bug的博客-CSDN博客_squid代理快速搭建</a></p> 
<p style="text-align:justify;">3.只允许员工在工作时间访问internet</p> 
<p style="text-align:justify;">4.并禁止访问mp3、mp4等谋体文件</p> 
<pre><code class="language-bash">acl aa url_regex -i \.mp3$ \.mp4$
acl bb time MTWHF 08:30-17:30
http_access allow !aa bb</code></pre> 
<h2 id="%E5%85%AB%EF%BC%8C%E7%AC%AC%E5%85%AB%E5%A5%97" style="margin-left:0px;text-align:justify;">八，第八套</h2> 
<p style="text-align:justify;">1.安装kvm并在其上部署一台虚拟机</p> 
<p style="text-align:justify;"><a class="link-info has-card" href="http://xn--kvn-pd0f964bii4af6g2yucog" title="https://blog.csdn.net/weixin_53678904/article/details/125950867?spm=1001.2014.3001.5502"><span class="link-card-box"><span class="link-title">https://blog.csdn.net/weixin_53678904/article/details/125950867?spm=1001.2014.3001.5502</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/ae/c9/EtnT28rw_o.png">http://xn--kvn-pd0f964bii4af6g2yucog</span></span></a></p> 
<p style="text-align:justify;">2.在虚拟机上部署httpd</p> 
<pre><code class="language-bash">rm -f /etc/yum.repos.d/*
vim /etc/yum.repos.d/local.repo
[local]
name=local
baseurl=file:///mnt
gpgcheck=0

yum -y install httpd</code></pre> 
<p style="text-align:justify;">3.并在客户机上可以访问web服务器</p> 
<p style="text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b2fd02de7afdaa2040f0996619bac9cc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">axios封装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/741eeb2f1abf709f7fde44fecaf11f54/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Notepad&#43;&#43;安装、常用配置、Java运行环境</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>