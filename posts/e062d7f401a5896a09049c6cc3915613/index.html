<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>哔哩哔哩m4s批量转MP4&#43;bat脚本 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="哔哩哔哩m4s批量转MP4&#43;bat脚本" />
<meta property="og:description" content="哔哩哔哩m4s批量转MP4 1、手机哔哩哔哩下载好视频，得到对应的多个音频视频文件
格式：
2、下载ffmpeg
ffmpeg下载
3、然后配置bin环境变量
4、win&#43;r 输入cmd
输入
ffmpeg -version
5、新建bat文件
@echo off setlocal enabledelayedexpansion rem 要读取的文件 set filedir=E:\mq\1\* rem 视频要输出到的文件夹 set outpath=E:\mqout\ for /d %%i in (%filedir%) do ( echo ============================== rem 截取文件名称字符串 rem 注意要修改截取的位置跟输入路径有关系 set ifo=%%i set t=!ifo:~8,5! echo !t! set video=%%i\80\video.m4s set audio=%%i\80\audio.m4s echo 输出文件到： %outpath%!t!.mp4 rem 如果文件夹不存在则创建文件夹 if not exist %outpath% (md %outpath% ) rem 使用ffmpeg命令合成哔哩哔哩的音频、视频文件 ffmpeg -i !audio! -i !video! -vcodec copy -acodec copy -f mp4 %outpath%!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e062d7f401a5896a09049c6cc3915613/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-07T16:06:13+08:00" />
<meta property="article:modified_time" content="2020-09-07T16:06:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">哔哩哔哩m4s批量转MP4&#43;bat脚本</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="m4sMP4_0"></a>哔哩哔哩m4s批量转MP4</h3> 
<p><strong>1、手机哔哩哔哩下载好视频，得到对应的多个音频视频文件</strong><br> <img src="https://images2.imgbox.com/a5/1e/RKr0zNA1_o.png" alt="在这里插入图片描述"><br> 格式：<br> <img src="https://images2.imgbox.com/62/bc/kBKnOy7u_o.png" alt="在这里插入图片描述">2、下载ffmpeg<br> <a href="http://ffmpeg.org/download.html#build-windows" rel="nofollow">ffmpeg下载</a><br> <img src="https://images2.imgbox.com/00/a2/9OCxmLmh_o.png" alt="在这里插入图片描述"><img src="https://images2.imgbox.com/a9/b3/GtXgOq7A_o.png" alt="在这里插入图片描述"><strong>3、然后配置bin环境变量</strong><br> <img src="https://images2.imgbox.com/a8/11/1iDkMkbF_o.png" alt="在这里插入图片描述"><strong>4、win+r 输入cmd<br> 输入<br> ffmpeg -version</strong><br> <img src="https://images2.imgbox.com/f8/01/WqidgkWx_o.png" alt="在这里插入图片描述"><strong>5、新建bat文件</strong></p> 
<pre><code>
@echo off
setlocal enabledelayedexpansion

rem 要读取的文件
set filedir=E:\mq\1\*   

rem 视频要输出到的文件夹     
set outpath=E:\mqout\

for /d %%i in (%filedir%) do ( 
   echo ==============================
   rem 截取文件名称字符串
   rem 注意要修改截取的位置跟输入路径有关系
   set ifo=%%i
   set t=!ifo:~8,5!
   echo !t!

   set video=%%i\80\video.m4s
   set audio=%%i\80\audio.m4s


   echo 输出文件到： %outpath%!t!.mp4
   
   rem 如果文件夹不存在则创建文件夹
   if not exist %outpath% (md %outpath% )
   
   rem  使用ffmpeg命令合成哔哩哔哩的音频、视频文件
   ffmpeg -i !audio! -i !video! -vcodec copy -acodec copy -f mp4 %outpath%!t!.mp4
)
pause
</code></pre> 
<p><strong>6、修改输入输出路径，双击运行即可</strong><br> <img src="https://images2.imgbox.com/15/62/TofwsI2c_o.png" alt="在这里插入图片描述">7、注意点：bat命令的赋值 set ifo=%%i =不能出现空格</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ebeff7a312d2224a65517a5c0fab1aa8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">android camera hal3 新增vendor tag</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b5bd06fc25776419b6370b9d3f752212/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Boot：mybatis-plus &#43; atomikos &#43; druid 实现不同实例数据库的多数据源配置和分布式事务管理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>