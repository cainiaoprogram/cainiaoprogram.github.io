<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【mmcv报错】ModuleNotFoundError: No module named ‘mmcv.runner - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【mmcv报错】ModuleNotFoundError: No module named ‘mmcv.runner" />
<meta property="og:description" content="跑一个代码需要用到mmcv和mmseg
其中有两行代码：
from mmcv.runner import load_checkpoint from mmseg.utils import get_root_logger 我先是按照官方推荐的安装方法去安装了mmcv和mmseg
pip install -U openmim mim install mmcv 它会自动帮你安装mmengine
我的cuda是11.6 torch是2.0.1
他帮我安装的mmcv是2.1.0，mmengine是0.9.1
然后pip install mmsegmentation
安装的mmseg版本是1.2.1
安装完了之后出现问题：
mmcv.runner标红报错，说mmcv下面没有runner
ModuleNotFoundError: No module named &#39;mmcv.runner
我在网上搜索，有博客说不能安装mmcv，要安装mmcv-full
然后我把mmcv卸载，去安装mmcv-full（被坑惨了）
先是遇到一个问题，安装mmcv-full卡住
一直卡在buliding wheels for mmcv
我去网上一搜，很多遇到这个问题的
解决方法都是说，跟cuda版本不符，要安装对应的版本。
我试验了多个版本，都不行，安装不了
最后甚至在这个网站下载了离线的whl包。https://download.openmmlab.com/mmcv/dist/cu102/torch1.10.0/index.html
最终安装成功，但是带来的问题更多，
找不到libcudaert.so.10.2
No module named ‘mmcv._ext‘
整整折腾了一个多小时，反正各种问题，大概都是在说，版本跟cuda、torch不匹配
（其实人家自动给你安装的mmcv就是符合你机器版本的，但是自动安装mmcv-full不了，手动安装的又不匹配，，，，）
最后换了思路去解决：
这两行代码的问题：
from mmcv.runner import load_checkpoint from mmseg.utils import get_root_logger 首先：找不到mmcv.runner
我去看了源码，发现是版本升级的问题，我用的高版本的mmcv，结构已经变了
runner在mmengine下面，所以修改如下
from mmengine.runner import load_checkpoint" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c1795a6d982179a0123d024a3b433ed7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-06T18:34:40+08:00" />
<meta property="article:modified_time" content="2023-11-06T18:34:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【mmcv报错】ModuleNotFoundError: No module named ‘mmcv.runner</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>跑一个代码需要用到mmcv和mmseg<br> 其中有两行代码：</p> 
<pre><code>from mmcv.runner import load_checkpoint
from mmseg.utils import get_root_logger
</code></pre> 
<p>我先是按照官方推荐的安装方法去安装了mmcv和mmseg</p> 
<pre><code>pip install -U openmim
mim install mmcv
</code></pre> 
<p>它会自动帮你安装mmengine<br> 我的cuda是11.6 torch是2.0.1<br> 他帮我安装的mmcv是2.1.0，mmengine是0.9.1<br> 然后pip install mmsegmentation<br> 安装的mmseg版本是1.2.1</p> 
<p>安装完了之后出现问题：<br> mmcv.runner标红报错，说mmcv下面没有runner<br> <code>ModuleNotFoundError: No module named 'mmcv.runner</code><br> 我在网上搜索，有博客说不能安装mmcv，要安装mmcv-full<br> 然后我把mmcv卸载，去安装mmcv-full（被坑惨了）<br> 先是遇到一个问题，安装mmcv-full卡住<br> 一直卡在<code>buliding wheels for mmcv</code><br> 我去网上一搜，很多遇到这个问题的<br> <img src="https://images2.imgbox.com/7c/ea/nAOJ4ieB_o.png" alt="在这里插入图片描述"><br> 解决方法都是说，跟cuda版本不符，要安装对应的版本。<br> 我试验了多个版本，都不行，安装不了<br> 最后甚至在这个网站下载了离线的whl包。https://download.openmmlab.com/mmcv/dist/cu102/torch1.10.0/index.html<br> 最终安装成功，但是带来的问题更多，<br> <code>找不到libcudaert.so.10.2</code><br> <code>No module named ‘mmcv._ext‘</code><br> 整整折腾了一个多小时，反正各种问题，大概都是在说，版本跟cuda、torch不匹配<br> （其实人家自动给你安装的mmcv就是符合你机器版本的，但是自动安装mmcv-full不了，手动安装的又不匹配，，，，）<br> 最后换了思路去解决：<br> 这两行代码的问题：</p> 
<pre><code>from mmcv.runner import load_checkpoint
from mmseg.utils import get_root_logger
</code></pre> 
<p>首先：找不到mmcv.runner<br> 我去看了源码，发现是版本升级的问题，我用的高版本的mmcv，结构已经变了<br> runner在mmengine下面，所以修改如下<br> <code>from mmengine.runner import load_checkpoint</code><br> 第二个错误：<br> mmseg.utils下面找不到get_root_logger<br> 我感觉还是版本问题，高版本的结构变了<br> 但是我去mmseg的源码下搜索了get_root_logger，搜不到，根本没有这个<br> 然后我去mmcv和mmengine的源码下都搜索了，都没有这玩意</p> 
<p>emm，然后看了下代码，这个东西就是用来记录日志的</p> 
<pre><code>from mmseg.utils import get_root_logger
logger = get_root_logger()
</code></pre> 
<p>我看了下mmcv中日志是如何记录的</p> 
<pre><code>import logging
logger = logging.getLogger()
</code></pre> 
<p>那既然这个找不到get_root_logger<br> 直接把这句注释了<br> 改成这样</p> 
<pre><code>import logging
logger = logging.getLogger()
</code></pre> 
<p>运行发现没什么问题，解决了。</p> 
<p>总结：<br> 这个解决办法其实不好，跑别人的代码最好还是不用动别人的代码，配好相应的环境去运行，因为你动了某一处，不清楚会不会影响别的<br> 但是我这是特殊情况，这个代码没有告知所需的库的版本，我也安装了各个版本的mmcv和mmcv-full最后实在是搞不定，才只好改了她的代码<br> 另外，这玩意兼容性做的真的差，你升级版本你直接把原来的函数都给删除了，名字都改了，那之前的代码不都g了，让人怎么维护，怎么升级</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5f83c180dd5eec3e0f2011382ba76c11/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSDN付费专栏，写文章变现的机会来了！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d358e8cfe86f4e171e0e51ebd7f61073/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【MySQL基本功系列】第一篇 先熟悉MySQL的运行逻辑</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>