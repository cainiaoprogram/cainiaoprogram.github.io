<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在虚拟机上运行vxWorks - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在虚拟机上运行vxWorks" />
<meta property="og:description" content="Vxworks是一个嵌入式系统，主要运行在arm、ppc、mips等嵌入式处理器上，它同样可以运行在X86处理器上。风河公司开发的tornado开发环境就
包括了pentium版本，并且发布了相应的bsp。因此我们可在vmware虚拟机上运行vxworks，利用虚拟机的功能，我们不需要额外的计算机硬件就可
以开始我们的实验。
系统引导
计算机系统上电后，首先需要执行引导程序，然后加载操作系统。嵌入式系统中一般是将引导程序（称之为bootrom）固化在ROM芯片（也称为
bootrom，指的是物理硬件）中。系统上电后执行ROM中的引导程序，将操作系统由flash（或硬盘）加载到内存。对于PC而言，系统上电后运行BIOS
程序，之后将软盘或则硬盘上的引导扇区载入内存执行引导过程，引导程序再将操作系统加载到内存中启动。vmware的虚拟硬盘开始时没有安装
引导程序，因此无法从硬盘引导。因此我们需要制作一个引导软盘来引导系统加载vxworks。我们的第一个实验就是编译引导程序镜像，制作引导
盘。
制作引导盘
首先要在你的PC上Tornado 2.2 for pcPentium开发环境。另外需要安装pcPentium的BSP包，这个软件包可以到风河公司的网站免费下载。
制作引导盘当然还需要一张软盘，但是目前的PC基本都不使用软盘软驱了（如果你的古董机还有软驱的话，那么恭喜你，你只需要一张软盘就搞定了）。
好在vmware可以直接使用软盘镜像并且可以直接创建软盘镜像，因此我们在vmware中安装一个虚拟的windowsxp系统，以便在虚拟的windowsXP系统中
将软盘镜像格式化，并制作启动软盘。当然也可以使用虚拟软驱RamDiskNT在主机上使用软盘镜像。
Ok，准备工作做好了，我们开始编译bootrom。你可以通过tornado集成开发环境的菜单命令build boot rom。
弹出build boot rom对话框，我们选择pcpentium BSP、编译bootrom、工具使用gnu
编译完成后可以在$WIND_BASE/target/config/pcPentium目录下找到编译出来的bootrom文件。
我们也可以使用命令行方式编译bootrom，进入cmd命令行界面，进入
$WIND_BASE/target/config/pcPentium目录，目录中有一个Makefile文件，我们就是使用这个makefile文件来编译bootrom。实际集成开发环境也是使用它
来编译的。编译之前我们需要设置一下所需的环境变量：
set WIND_BASE=D:/Tornado2.2
set WIND_HOST_TYPE=x86-win32
实际上tornado已经提供了一个批处理文件用于设置相关的环境变量，这个文件就是
$WIND_BASE/host/x86-win32/bin/torVars.bat，我们也可以直接运行这个批处理
../../../host/x86-win32/bin/torVars.bat
然后执行命令
make bootrom
就可以在$WIND_BASE/target/config/pcPentium目录下生成bootrom文件
把上面的命令写成一个批处理makeBootRom.bat，方便使用，内容如下：
D:/tornado2.2/host/x86-win32/bin/torVars.bat
cd %WIND_BASE%/target/ config/pcPentium
make bootrom
好了，编译成功。下一步使用如下命令创建引导盘：
mkboot a: bootrom
mkboot.exe是tornado提供的制作启动盘的工具，a盘是软盘的盘符，bootrom就是我们的引导镜像文件。
将制作好的引导盘载入虚拟机中：
虚拟机上电后自动从软盘启动，出现如下界面。
是的，你没看错，系统确实已经成功启动，只不过vxworks系统默认是不接受任何输入输出的。因此我们看不到它运行的任何东西，也无法操作它。
这样一个界面让人很无语，这跟一个人变成了瞎子瘸子没什么分别。下一步，我们将console组件加入到bootrom中。
打开$WIND_BASE/target/config/pcPentium/config.h文件，找到
#undef INCLUDE_PC_CONSOLE /* PC keyboard and VGA console */
将它改为：
#define INCLUDE_PC_CONSOLE /* PC keyboard and VGA console */" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/870e63046c9b004873df1603c027f9e3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-12-17T10:42:40+08:00" />
<meta property="article:modified_time" content="2012-12-17T10:42:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在虚拟机上运行vxWorks</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="font-family:Arial,Helvetica,simsun,u5b8bu4f53; font-size:14px; line-height:25px"></span> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> Vxworks是一个嵌入式系统，主要运行在arm、ppc、mips等嵌入式处理器上，它同样可以运行在X86处理器上。风河公司开发的tornado开发环境就</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 包括了pentium版本，并且发布了相应的bsp。因此我们可在vmware虚拟机上运行vxworks，利用虚拟机的功能，我们不需要额外的计算机硬件就可</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 以开始我们的实验。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 系统引导</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 计算机系统上电后，首先需要执行引导程序，然后加载操作系统。嵌入式系统中一般是将引导程序（称之为bootrom）固化在ROM芯片（也称为</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> bootrom，指的是物理硬件）中。系统上电后执行ROM中的引导程序，将操作系统由flash（或硬盘）加载到内存。对于PC而言，系统上电后运行BIOS</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 程序，之后将软盘或则硬盘上的引导扇区载入内存执行引导过程，引导程序再将操作系统加载到内存中启动。vmware的虚拟硬盘开始时没有安装</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 引导程序，因此无法从硬盘引导。因此我们需要制作一个引导软盘来引导系统加载vxworks。我们的第一个实验就是编译引导程序镜像，制作引导</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 盘。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 制作引导盘</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 首先要在你的PC上Tornado 2.2 for pcPentium开发环境。另外需要安装pcPentium的BSP包，这个软件包可以到风河公司的网站免费下载。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 制作引导盘当然还需要一张软盘，但是目前的PC基本都不使用软盘软驱了（如果你的古董机还有软驱的话，那么恭喜你，你只需要一张软盘就搞定了）。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 好在vmware可以直接使用软盘镜像并且可以直接创建软盘镜像，因此我们在vmware中安装一个虚拟的windowsxp系统，以便在虚拟的windowsXP系统中</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 将软盘镜像格式化，并制作启动软盘。当然也可以使用虚拟软驱RamDiskNT在主机上使用软盘镜像。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> Ok，准备工作做好了，我们开始编译bootrom。你可以通过tornado集成开发环境的菜单命令build boot rom。<img alt="" src="https://images2.imgbox.com/b4/4a/wppyI3aS_o.jpg" width="1024" height="603" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">   弹出build boot rom对话框，我们选择pcpentium BSP、编译bootrom、工具使用gnu</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/4b/83/uDdQWEYO_o.jpg" width="338" height="206" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 编译完成后可以在$WIND_BASE/target/config/pcPentium目录下找到编译出来的bootrom文件。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 我们也可以使用命令行方式编译bootrom，进入cmd命令行界面，进入</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> $WIND_BASE/target/config/pcPentium目录，目录中有一个Makefile文件，我们就是使用这个makefile文件来编译bootrom。实际集成开发环境也是使用它</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 来编译的。编译之前我们需要设置一下所需的环境变量：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> set WIND_BASE=D:/Tornado2.2</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> set WIND_HOST_TYPE=x86-win32</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 实际上tornado已经提供了一个批处理文件用于设置相关的环境变量，这个文件就是</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> $WIND_BASE/host/x86-win32/bin/torVars.bat，我们也可以直接运行这个批处理</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> ../../../host/x86-win32/bin/torVars.bat</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 然后执行命令</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> make bootrom</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 就可以在$WIND_BASE/target/config/pcPentium目录下生成bootrom文件</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 把上面的命令写成一个批处理makeBootRom.bat，方便使用，内容如下：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> D:/tornado2.2/host/x86-win32/bin/torVars.bat</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> cd %WIND_BASE%/target/ config/pcPentium</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> make bootrom</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 好了，编译成功。下一步使用如下命令创建引导盘：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> mkboot a: bootrom</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> mkboot.exe是tornado提供的制作启动盘的工具，a盘是软盘的盘符，bootrom就是我们的引导镜像文件。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 将制作好的引导盘载入虚拟机中：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  <img alt="" src="https://images2.imgbox.com/39/9c/zUZjSwrr_o.jpg" width="308" height="473" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 虚拟机上电后自动从软盘启动，出现如下界面。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/8c/1d/nXOCTlCO_o.jpg" width="732" height="532" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 是的，你没看错，系统确实已经成功启动，只不过vxworks系统默认是不接受任何输入输出的。因此我们看不到它运行的任何东西，也无法操作它。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 这样一个界面让人很无语，这跟一个人变成了瞎子瘸子没什么分别。下一步，我们将console组件加入到bootrom中。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 打开$WIND_BASE/target/config/pcPentium/config.h文件，找到</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #undef INCLUDE_PC_CONSOLE                /* PC keyboard and VGA console */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 将它改为：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define INCLUDE_PC_CONSOLE                /* PC keyboard and VGA console */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 那么结合上下文：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #ifdef INCLUDE_PC_CONSOLE</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #   define PC_CONSOLE           (0)      /* console number */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #   define N_VIRTUAL_CONSOLES   (2)      /* shell / application */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #endif /* INCLUDE_PC_CONSOLE */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 很明了，定义这个宏之后console就打开了。重新编译bootrom并制作启动软盘。在虚拟机中运行，会看到如下界面：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/f6/a1/KEjc0sXt_o.jpg" width="732" height="532" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 输入p命令，查看系统的启动参数，其意义如下：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> boot device:fd=0,0 ——启动设备为软驱，0,0表示第一个软驱，3.5寸盘</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> unit number:0 ——设备单元号，一般为0</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> processor:0 ——处理器编号，一般为0</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> host name:host ——主机名，访问主机时用到，比如从主机复制文件:cp “host:src”, “./dest”</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> file name:/fd0/vxWorks.st ——vxworks镜像文件（包括了完整的路径）</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> inet on Ethernet (e):90.0.0.50 ——本地网卡ip地址</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> host inet(h):90.0.0.3 ——主机ip地址</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> user (u):target ——用户名，用来访问ftp服务器，一般都是主机</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> flags (f):0 ——标识，十六进制数，它的意义下面再讲</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/22/b3/paUs9kot_o.jpg" width="732" height="525" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> BOOT_LINE</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> bootrom支持从本地磁盘上加载vxworks系统镜像文件，也支持从网络加载vxworks系统镜像文件。在系统开发阶段需要频繁的编译</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 和加载系统镜像，通常我们使用网络加载的方式，这样在主机上修改完代码，编译之后就可以通过网络加载到目标机上运行。而</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 在系统开发后期，或者系统发布正式运行时，则设置为从本地磁盘加载，此时我们可以将系统镜像文件发在本地磁盘上，开机即</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 可自动加载运行。从上面的参数可以看出，系统默认从软驱加载。可以通过c命令修改这些参数，具体的修改步骤就不说了。也可</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 以通过配置文件中的默认bootline来修改这些默认的参数。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 打开$WIND_BASE/target/config/pcPentium/config.h文件，找到cpu==pcPentium选项下：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define DEFAULT_BOOT_LINE /</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">          "fd=0,0(0,0)host:/fd0/vxWorks.st h=90.0.0.3 e=90.0.0.50 u=target"</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 这就是默认的bootline，bootline的格式如下：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> bootDev(unitNum,procNum) hostname:bootFile e=ead b=bad h=had g=gad u=username pw=password f=flags tn=targetName s=startupScript o=other</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 具体含义：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> bootDev / 设备名，软盘：fd; 硬盘：ATA；网络要根据网卡的类型来做：NE2000及其兼容网卡为ENE，3COM以太网卡为ELT，Intel网</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 卡为EEX，Intel82559网卡为fei ，3C905B PCI网卡为elPci。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> unitNum / 设备单元号，一般指为0</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> procnum / cpu的处理器号，一般为0</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> flags / 标识，十六进制数，意义如下：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 0x01: 关闭对处理器0的系统控制</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 0x02: 将局部symbols和全局symbols装入目标机symbols表</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 0x04: 禁止自动启动（即由用户输入boot line）</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 0x08: 快速boot(不计数等待用户输入)</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 0x40: 使用BOOTP or DHCP client</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 0x80: 使用TFTP获取image,否则使用RSH或FTP，用FTP时pw不为空</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 0x100: 使目标机登记为一个代理ARP client</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> ead / 目标机ip地址，此值如为空，网络接口不被帮定</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> bad / 背板接口</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> had / 主机ip地址</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> gad / 网关地址，如果主机和目标机不在一个局网里，需要</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> bootFile: / 存放vxworks image的路径</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> usr: / 使用FTP或RSH时的用户名</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> passwd: / ftp password</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> other: / 从网络启动时此值可为空，当从软盘或硬盘启动时，如果此值为你的网络设备，boot会为你绑定网络设备</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> hostname: / 主机名,任意</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> targetName：／目标机名</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> startupScript: / 脚本名，在boot以后的target shell里执行</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 因为我们要做很多实验，还是把它配置成网络加载方便一点。修改为：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define DEFAULT_BOOT_LINE /</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">          "lnPci (0,0)host:d://ftp//vxWorks h=192.168.1.1 e=192.168.1.2 u=target"</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 这里详细讲解一下设备名称，对于不同的设备，其命名格式不同，对于块设备的命名规则我们可以在bootconfig.c</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 文件的bootLoad函数中找到对应的格式化字符串，比如软驱的格式是fd=x,x，可以找到如下语句：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">              sscanf (params.bootDev, "%*2s%*c%d%*c%d", &amp;drive, &amp;type);</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 其中"%*2s%*c%d%*c%d"就是对应的格式，星号表示此数据忽略。再例如ATA硬盘其格式字符创为"%*3s%*c%d%*c%d"；</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 对于网卡，则需要使用驱动程序中定义的名称，vxworks一般使用END驱动（Enhanced Network Driver），在驱动程序</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 提供的xxxEndLoad函数会返回一个设备名。比如AMD的PCNET-PCI网卡，驱动程序文件为ln97xEnd.c，其中ln97xEndLoad</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 函数中会返回LN_97X_DEV_NAME</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">     if (initString [0] == NULL)</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">         {<!-- --></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">         bcopy ((char *)LN_97X_DEV_NAME, initString, LN_97X_DEV_NAME_LEN);</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">          DRV_LOG (DRV_DEBUG_LOAD, "Returning string.../n", 1, 2, 3, 4, 5, 6);</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">         return ((END_OBJ *)OK);</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">         }</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> LN_97X_DEV_NAME的定义在头文件ln97xEnd.h中：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define LN_97X_DEV_NAME          "lnPci"      /* name of the device */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">   </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 修改网卡驱动程序</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> Vmware自带的虚拟网卡是AMD的PCnet-PCI， vxworks自带的驱动程序（头文件为target/h/drv/end/ln97xEnd.h）据测试在vmware中无法工作。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 大家可以试一下，在config.h文件中定义INCLUDE_LN_97X_END编译宏，执行make bootrom命令生成一个bootrom进行测试，你将得到下面的</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 错误提示：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/1a/bf/JaCS9u5I_o.jpg" width="732" height="532" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 因此需要从AMD官方网站下载最新驱动。解压后得到一个tar目录，将这个目录覆盖$WIND_BASE/tar目录，然后运行</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> $(WIND_BASE)/host/x86-win32/bin/ torVars.bat</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 进入$(WIND_BASE)/target/src/drv/end目录，运行：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> make CPU=PENTIUM tool=gnu ln97xend.o</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 重新定位到$(WIND_BASE)/target/lib/pentium/PENTIUM/common目录，并将上一步生成的文件ln97xend.o复制到此目录下。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 备份此目录下的文件libdrv.a；运行命令</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> arpentium -d libdrv.a ln97xEnd.o，删除libdrv.a中原有的ln97xEnd模块，然后再运行命令：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> arpentium -ra iOlicomEnd.o libdrv.a ln97xEnd.o</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 将我们刚刚创建的新模块添加进去。这里的-r选项是表示替换，-a选项表示文件放在指定文件(iOlicomEnd.o)之后。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 然后我们需要修改配置文件，使bootrom中包含我们的网卡驱动程序，确保</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define INCLUDE_END /* Enhanced Network Driver Support */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define INCLUDE_LN_97X_END /* (END) AMD 79C97x PCI interface */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 而其它的网卡驱动宏都是#undef的。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 修改sysLn97xEnd.c</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 打开C:/tornado2.2/target/config/pcPentium目录下的sysLn97xEnd.c文件，先定位到 “memory-mapped IO</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> base”这段文字，然后将其前面的参数由pciRsrc[endUnit].bar[1]修改为NONE，保存即可，</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> pciRsrc[endUnit].bar[1],     /* memory-mapped IO base */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> NONE, /* memory-mapped IO base */</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 编译bootrom并制作引导盘启动虚拟机，可以看到错误没了，如下图：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/d4/29/fmzX463i_o.jpg" width="732" height="532" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 编译vxWorks</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 为了测试一下网卡驱动功能正常，我们可以编译一个vxworks镜像文件，然后通过ftp加载到虚拟机中运行。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 编译vxworks文件很简单，只需要在target/config/pcPentium目录下执行命令</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> make vxWorks</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 将生成一个vxWorks文件，把这个文件放到ftp目录下。并且打开ftp服务器（这里使用tornado自带的wftpd32.exe），</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 添加一个新用户user=target, password=target。使用引导盘启动虚拟机。引导程序将自动加载这个镜像并运行：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/1b/68/lhFbGmfI_o.jpg" width="732" height="532" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 可以看到，Attaching network interface lo0… done。并且vxworks已经正常运行。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 加入SHELL组件</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">   </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 上面看到的这个界面与我们平时在实验室看到的不一样：没有大大的vxworks的logo。原因是vxworks默认不包含shell组件，需要修改config.h文件：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define INCLUDE_SHELL</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 重新执行makevxwoks命令，生成文件加载到虚拟机中，就会出现如下界面，不过此时的shell还不能识别命令，因为制作的镜像中没有符号表，</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 因此无法解析命令。这样的shell简直就是废材。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/11/91/L2gS3FZp_o.jpg" width="732" height="532" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  使用符号表文件</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 要shell识别命令，需要提供符号表文件。上面的makefile vxWorks命令在生成vxWorks文件的同时还生成了一个符号表文件vxWorks.sym，这个文件</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 可用于主机上的WDB进行调试。首先要配置目标机，在tornado中选择tools/target serves/config菜单命令：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  <img alt="" src="https://images2.imgbox.com/93/62/8Kas25e9_o.jpg" width="1024" height="603" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 弹出如下对话框，可以新建一个目标机配置，在Core File and Symbols选项中指定vxWorks.sym文件,另外需要指定后台（目标机为后台，主机为前台）通信方式为wdbrpc并设置IP地址： </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/3b/76/7QpEiHPA_o.jpg" width="333" height="451" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%">                     <img alt="" src="https://images2.imgbox.com/bc/27/pxo4XLbK_o.jpg" width="333" height="451" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 设置完成，单击OK。或者直接单击Launch启动，此时在windows的任务栏会出现target-server的小图标，双击它可以查看详细信息：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/81/9c/NLsvbPD4_o.jpg" width="550" height="222" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 连接成功后，在主界面上的下拉列表中选择配置的target-server，并单击-&gt;i图标启动shell，这时候就可以执行输入的命令了。如下图:</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/50/bd/NDHwUBDb_o.jpg" width="1024" height="603" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 虽然使用tornado集成环境进行调试有直观的优势，并且支持源码级调试，一切看起来都很美。但是，目标机与主机之间的通信通常比较耗时，有时候由于</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 种种原因还可能出现目标机连接不上的问题。在实际使用时，用得比较多的还是直接在目标机的控制台中输入命令进行调试。这要求把符号表和代码一起</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 下载到目标机上，这里又有两种方式：一种是符号表文件放在主机上，系统启动时从主机同步符号表；另一种是直接将符号表编译到vxWorks镜像文件中。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 从主机同步符号表</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 这种方式需要修改配置文件，在config.h中添加</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define INCLUDE_SYM_TBL_SYNC</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 当然最好还是加上那些show函数，否则只能打断点却不能查看任务状态等重要信息，就像瞎子走路，只能迈动两腿，却不知身在何方，是很郁闷的。添加如下选项：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> #define INCLUDE_SHOW_ROUTINES</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 编译之后，将vxWorks文件和vxWorks.sym文件都放到ftp目录下。启动虚拟机，我们看到它自动将符号表同步了。然后我们就可以直接在控制台输入命令进行操作。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> <img alt="" src="https://images2.imgbox.com/f8/a5/jpDemizy_o.jpg" width="732" height="532" style="line-height:25px; border-top-width:0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-style:initial; border-color:initial; max-width:100%"></p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 编译vxWorks.st</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em">  </p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 最为直接的一种方式就是将符号表编译到vxWork文件中，这样不需要连接主机就可以在控制台上进行操作了。编译方式也很简单：</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> make vxWorks.st</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 这样就搞定了。虽然直接将符号表嵌入到vxWorks文件中，镜像文件的体积会增大，但是现在的硬件这么便宜。有的嵌入式系统甚至配置了2G内存。</p> 
<p style="line-height:25px; margin-top:0px; margin-right:0px; margin-bottom:10px; margin-left:0px; padding-top:0px; padding-right:0px; padding-bottom:0px; padding-left:0px; text-indent:2em"> 因此这个问题越来越容易解决了。</p> 
<div> 
 <br> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5241b929194b260161d4775386938489/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MDE工程入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae737d6a1405467334122ca535322602/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">原型模式和单例模式的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>