<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>QT-GraphicScene大于GraphicView时，场景居中问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="QT-GraphicScene大于GraphicView时，场景居中问题" />
<meta property="og:description" content="使用环境：
PySide2 &#43; QT5.12.8 &#43; Python3.7 &#43; Windows10
QT或者PyQt解决思路类似。
问题描述：
由于项目需要，场景需要较大的区域，因此初始化时，场景的面积大于视图窗口的面积，这种情况下，会出现滚动条，且软件会默认将视图聚焦与场景中间，而不是左上角，不符合通常的软件操作习惯，因此需要设置将视图窗口聚焦于场景左上角。
解决方案：
下述代码仅作参考，关键代码为self.graphView.centerOn(0, 0)，通过这句代码将视图中心设置为左上角。
from PySide2.QtWidgets import QApplication, QMainWindow, QGraphicsScene, QGraphicsView class UIMainWindow(QMainWindow): def __init__(self, *args, **kwargs): super(UIMainWindow, self).__init__(*args, **kwargs) self.showMaximized() # 最大化窗口 self.graphView = QGraphicsView(self) # 视图窗口大小小于窗口大小 self.graphScene = QGraphicsScene() self.desktop = QtWidgets.QApplication.desktop() self.setSceneRect(0, 0, self.desktop.width() * 1.2, self.desktop.height() * 1.2) # 设置场景范围，令其大于窗口大小 self.graphView.setScene(self.graphScene) # 下面这句代码必须在上行代码之后，否则无效 self.graphView.centerOn(0, 0) # 在设置好场景后，将view视图中心设置为左上角 self.setCentralWidget(self.graphView) …… 参考文献
[1] QGraphicsView大于QGraphicsScene时出现滚动条时，改变scene的显示位置
以上，欢迎交流。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b015733c91251383e93caf1e77b4808d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-14T16:39:56+08:00" />
<meta property="article:modified_time" content="2020-08-14T16:39:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">QT-GraphicScene大于GraphicView时，场景居中问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>使用环境：</strong><br> <code>PySide2 + QT5.12.8 + Python3.7 + Windows10</code><br> QT或者PyQt解决思路类似。</p> 
<p><strong>问题描述：</strong></p> 
<blockquote> 
 <p>由于项目需要，场景需要较大的区域，因此初始化时，场景的面积大于视图窗口的面积，这种情况下，会出现滚动条，且软件会默认将视图聚焦与场景中间，而不是左上角，不符合通常的软件操作习惯，因此需要设置将视图窗口聚焦于场景左上角。</p> 
</blockquote> 
<p><strong>解决方案：</strong><br> 下述代码仅作参考，关键代码为<code>self.graphView.centerOn(0, 0)</code>，通过这句代码将视图中心设置为左上角。</p> 
<pre><code class="prism language-py"><span class="token keyword">from</span> PySide2<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> QApplication<span class="token punctuation">,</span> QMainWindow<span class="token punctuation">,</span> QGraphicsScene<span class="token punctuation">,</span> QGraphicsView

<span class="token keyword">class</span> <span class="token class-name">UIMainWindow</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span>UIMainWindow<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>showMaximized<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 最大化窗口</span>
        self<span class="token punctuation">.</span>graphView <span class="token operator">=</span> QGraphicsView<span class="token punctuation">(</span>self<span class="token punctuation">)</span>  <span class="token comment"># 视图窗口大小小于窗口大小</span>
        self<span class="token punctuation">.</span>graphScene <span class="token operator">=</span> QGraphicsScene<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>desktop <span class="token operator">=</span> QtWidgets<span class="token punctuation">.</span>QApplication<span class="token punctuation">.</span>desktop<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setSceneRect<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>desktop<span class="token punctuation">.</span>width<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.2</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>desktop<span class="token punctuation">.</span>height<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1.2</span><span class="token punctuation">)</span>  <span class="token comment"># 设置场景范围，令其大于窗口大小</span>
        self<span class="token punctuation">.</span>graphView<span class="token punctuation">.</span>setScene<span class="token punctuation">(</span>self<span class="token punctuation">.</span>graphScene<span class="token punctuation">)</span>
        <span class="token comment"># 下面这句代码必须在上行代码之后，否则无效</span>
        self<span class="token punctuation">.</span>graphView<span class="token punctuation">.</span>centerOn<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># 在设置好场景后，将view视图中心设置为左上角</span>
		self<span class="token punctuation">.</span>setCentralWidget<span class="token punctuation">(</span>self<span class="token punctuation">.</span>graphView<span class="token punctuation">)</span>

……
</code></pre> 
<p><strong>参考文献</strong><br> [1] <a href="https://blog.csdn.net/qq_36131739/article/details/76795941">QGraphicsView大于QGraphicsScene时出现滚动条时，改变scene的显示位置</a></p> 
<hr> 
<p>以上，欢迎交流。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/688f89bcddbb570265826d4389823339/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">idea 枚举快速_快速可枚举的枚举</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0f45933cb554af4a328e90539a5dbc43/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">自动化测试的知识</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>