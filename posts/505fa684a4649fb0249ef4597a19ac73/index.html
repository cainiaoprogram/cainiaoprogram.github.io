<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>docker镜像与容器基本的基本操作（三） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="docker镜像与容器基本的基本操作（三）" />
<meta property="og:description" content="目录
一、docker基本命令
1.1、查看镜像——docker images
1.2、查看所有状态容器——docker ps -a
1.3、docker —— run 指令
工作流程简单解释：
1.4、查看docker版本命令（docker -v）
1.5 、查看docker信息（docker info）
1.6、docker帮助命令文档（docker --help）
二、docker镜像操作
2.1、搜索镜像（公共仓库）（docker search）
2.2、下载镜像（docker pull）
2.3、查看镜像列表（docker images）
2.4、获取镜像信息（docker inspect）
2.5、添加镜像标签（docker tag 定位）
2.6、导出镜像（docker save）
2.7、删除镜像（docker rmi）
2.8、批量删除镜像
​编辑
2.9、导入镜像——docker load
2.10、批量打包镜像
三、容器操作
3.1、查询所有容器运行状态(docker ps -a)
3.2、创建容器（基于镜像）docker create
3.3、启动/停止容器（docker start/stop）
3.4、启动容器（一次性执行）—docker run
3.5、日志 端口 重命名
3.5.1查看容器运行日志
3.5.2查看容器端口信息
3.5.3 容器重命名
3.6、查看容器ip地址—docker inspect
3.7、进入容器—docker exec
扩展：生产方式进入容器
3.8、容器导出/导入—docker export/import 3.9、删除容器—docker rm -f
3.10、容器打包为镜像 查看docker消耗的资源状态" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/505fa684a4649fb0249ef4597a19ac73/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-29T10:39:18+08:00" />
<meta property="article:modified_time" content="2022-07-29T10:39:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">docker镜像与容器基本的基本操作（三）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%EF%BC%9Adocker%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4-toc" style="margin-left:0px;"><a href="#%E4%B8%80%EF%BC%9Adocker%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4" rel="nofollow">一、docker基本命令</a></p> 
<p id="1.1%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0images-toc" style="margin-left:40px;"><a href="#1.1%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0images" rel="nofollow">1.1、查看镜像——docker images</a></p> 
<p id="1.2%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%8A%B6%E6%80%81%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%C2%A0ps%20-a-toc" style="margin-left:40px;"><a href="#1.2%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%8A%B6%E6%80%81%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%C2%A0ps%20-a" rel="nofollow">1.2、查看所有状态容器——docker ps -a</a></p> 
<p id="%C2%A01.3%E3%80%81docker%20%E2%80%94%E2%80%94%20run%20%E6%8C%87%E4%BB%A4-toc" style="margin-left:40px;"><a href="#%C2%A01.3%E3%80%81docker%20%E2%80%94%E2%80%94%20run%20%E6%8C%87%E4%BB%A4" rel="nofollow"> 1.3、docker —— run 指令</a></p> 
<p id="%C2%A0%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E7%AE%80%E5%8D%95%E8%A7%A3%E9%87%8A%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E7%AE%80%E5%8D%95%E8%A7%A3%E9%87%8A%EF%BC%9A" rel="nofollow"> 工作流程简单解释：</a></p> 
<p id="1.4%E6%9F%A5%E7%9C%8Bdocker%E7%89%88%E6%9C%AC%E5%91%BD%E4%BB%A4%E2%80%94%E2%80%94docker%20-v-toc" style="margin-left:40px;"><a href="#1.4%E6%9F%A5%E7%9C%8Bdocker%E7%89%88%E6%9C%AC%E5%91%BD%E4%BB%A4%E2%80%94%E2%80%94docker%20-v" rel="nofollow">1.4、查看docker版本命令（docker -v）</a></p> 
<p id="%C2%A01.5%20%E3%80%81%E6%9F%A5%E7%9C%8Bdocker%E4%BF%A1%E6%81%AF%EF%BC%88docker%20info%EF%BC%89-toc" style="margin-left:40px;"><a href="#%C2%A01.5%20%E3%80%81%E6%9F%A5%E7%9C%8Bdocker%E4%BF%A1%E6%81%AF%EF%BC%88docker%20info%EF%BC%89" rel="nofollow"> 1.5 、查看docker信息（docker info）</a></p> 
<p id="1.6docker%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4%E6%96%87%E6%A1%A3%E2%80%94%E2%80%94docker%20--help-toc" style="margin-left:40px;"><a href="#1.6docker%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4%E6%96%87%E6%A1%A3%E2%80%94%E2%80%94docker%20--help" rel="nofollow">1.6、docker帮助命令文档（docker --help）</a></p> 
<p id="%E4%BA%8C%EF%BC%9Adocker%E9%95%9C%E5%83%8F%E6%93%8D%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%EF%BC%9Adocker%E9%95%9C%E5%83%8F%E6%93%8D%E4%BD%9C" rel="nofollow">二、docker镜像操作</a></p> 
<p id="2.1%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F%EF%BC%88%E5%85%AC%E5%85%B1%E4%BB%93%E5%BA%93%EF%BC%89%E2%80%94%E2%80%94docker%20search-toc" style="margin-left:40px;"><a href="#2.1%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F%EF%BC%88%E5%85%AC%E5%85%B1%E4%BB%93%E5%BA%93%EF%BC%89%E2%80%94%E2%80%94docker%20search" rel="nofollow">2.1、搜索镜像（公共仓库）（docker search）</a></p> 
<p id="2.2%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%20pull-toc" style="margin-left:40px;"><a href="#2.2%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%20pull" rel="nofollow">2.2、下载镜像（docker pull）</a></p> 
<p id="2.3%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8%E2%80%94%E2%80%94docker%20images%C2%A0-toc" style="margin-left:40px;"><a href="#2.3%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8%E2%80%94%E2%80%94docker%20images%C2%A0" rel="nofollow">2.3、查看镜像列表（docker images）</a></p> 
<p id="2.4%E8%8E%B7%E5%8F%96%E9%95%9C%E5%83%8F%E4%BF%A1%E6%81%AF%E2%80%94%E2%80%94docker%20inspect-toc" style="margin-left:40px;"><a href="#2.4%E8%8E%B7%E5%8F%96%E9%95%9C%E5%83%8F%E4%BF%A1%E6%81%AF%E2%80%94%E2%80%94docker%20inspect" rel="nofollow">2.4、获取镜像信息（docker inspect）</a></p> 
<p id="2.5%E6%B7%BB%E5%8A%A0%E9%95%9C%E5%83%8F%E6%A0%87%E7%AD%BE%E2%80%94%E2%80%94docker%C2%A0tag%EF%BC%88%E5%AE%9A%E4%BD%8D%EF%BC%89-toc" style="margin-left:40px;"><a href="#2.5%E6%B7%BB%E5%8A%A0%E9%95%9C%E5%83%8F%E6%A0%87%E7%AD%BE%E2%80%94%E2%80%94docker%C2%A0tag%EF%BC%88%E5%AE%9A%E4%BD%8D%EF%BC%89" rel="nofollow">2.5、添加镜像标签（docker tag 定位）</a></p> 
<p id="2.6%E5%AF%BC%E5%87%BA%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0save-toc" style="margin-left:40px;"><a href="#2.6%E5%AF%BC%E5%87%BA%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0save" rel="nofollow">2.6、导出镜像（docker save）</a></p> 
<p id="2.7%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%20rmi-toc" style="margin-left:40px;"><a href="#2.7%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%20rmi" rel="nofollow">2.7、删除镜像（docker rmi）</a></p> 
<p id="%C2%A02.8%E3%80%81%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F-toc" style="margin-left:40px;"><a href="#%C2%A02.8%E3%80%81%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F" rel="nofollow"> 2.8、批量删除镜像</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">​编辑</a></p> 
<p id="%C2%A02.9%E3%80%81%E5%AF%BC%E5%85%A5%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0load-toc" style="margin-left:40px;"><a href="#%C2%A02.9%E3%80%81%E5%AF%BC%E5%85%A5%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0load" rel="nofollow"> 2.9、导入镜像——docker load</a></p> 
<p id="2.9%20%E6%89%B9%E9%87%8F%E6%89%93%E5%8C%85%E9%95%9C%E5%83%8F-toc" style="margin-left:40px;"><a href="#2.9%20%E6%89%B9%E9%87%8F%E6%89%93%E5%8C%85%E9%95%9C%E5%83%8F" rel="nofollow">2.10、批量打包镜像</a></p> 
<p id="%E4%B8%89%EF%BC%9A%C2%A0%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E4%B8%89%EF%BC%9A%C2%A0%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C" rel="nofollow">三、容器操作</a></p> 
<p id="3.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81%E2%80%94%E2%80%94docker%20ps%20-a-toc" style="margin-left:40px;"><a href="#3.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81%E2%80%94%E2%80%94docker%20ps%20-a" rel="nofollow">3.1、查询所有容器运行状态(docker ps -a)</a></p> 
<p id="3.2%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20create-toc" style="margin-left:40px;"><a href="#3.2%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20create" rel="nofollow">3.2、创建容器（基于镜像）docker create</a></p> 
<p id="3.3%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20start-toc" style="margin-left:40px;"><a href="#3.3%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20start" rel="nofollow">3.3、启动/停止容器（docker start/stop）</a></p> 
<p id="3.4%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%EF%BC%88%E4%B8%80%E6%AC%A1%E6%80%A7%E6%89%A7%E8%A1%8C%EF%BC%89%E2%80%94%E2%80%94%20docker%20run-toc" style="margin-left:40px;"><a href="#3.4%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%EF%BC%88%E4%B8%80%E6%AC%A1%E6%80%A7%E6%89%A7%E8%A1%8C%EF%BC%89%E2%80%94%E2%80%94%20docker%20run" rel="nofollow">3.4、启动容器（一次性执行）—docker run</a></p> 
<p id="3.5%E6%97%A5%E5%BF%97%E3%80%81%E7%AB%AF%E5%8F%A3%E3%80%81%E9%87%8D%E5%91%BD%E5%90%8D-toc" style="margin-left:40px;"><a href="#3.5%E6%97%A5%E5%BF%97%E3%80%81%E7%AB%AF%E5%8F%A3%E3%80%81%E9%87%8D%E5%91%BD%E5%90%8D" rel="nofollow">3.5、日志 端口  重命名</a></p> 
<p id="3.4.1%C2%A0%C2%A0%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97-toc" style="margin-left:80px;"><a href="#3.4.1%C2%A0%C2%A0%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97" rel="nofollow">3.5.1查看容器运行日志</a></p> 
<p id="3.4.2%C2%A0%C2%A0%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;"><a href="#3.4.2%C2%A0%C2%A0%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF" rel="nofollow">3.5.2查看容器端口信息</a></p> 
<p id="%C2%A03.5.3%C2%A0%C2%A0%E5%AE%B9%E5%99%A8%E9%87%8D%E5%91%BD%E5%90%8D-toc" style="margin-left:80px;"><a href="#%C2%A03.5.3%C2%A0%C2%A0%E5%AE%B9%E5%99%A8%E9%87%8D%E5%91%BD%E5%90%8D" rel="nofollow"> 3.5.3  容器重命名</a></p> 
<p id="3.5%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8ip%E5%9C%B0%E5%9D%80%E2%80%94%E2%80%94docker%20inspect-toc" style="margin-left:40px;"><a href="#3.5%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8ip%E5%9C%B0%E5%9D%80%E2%80%94%E2%80%94docker%20inspect" rel="nofollow">3.6、查看容器ip地址—docker inspect</a></p> 
<p id="3.6%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20exec-toc" style="margin-left:40px;"><a href="#3.6%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20exec" rel="nofollow">3.7、进入容器—docker exec</a></p> 
<p id="%E6%89%A9%E5%B1%95%EF%BC%9A%E7%94%9F%E4%BA%A7%E6%96%B9%E5%BC%8F%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8-toc" style="margin-left:40px;"><a href="#%E6%89%A9%E5%B1%95%EF%BC%9A%E7%94%9F%E4%BA%A7%E6%96%B9%E5%BC%8F%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8" rel="nofollow">扩展：生产方式进入容器</a></p> 
<p id="3.8%E3%80%81%E5%AE%B9%E5%99%A8%E5%AF%BC%E5%87%BA%2F%E5%AF%BC%E5%85%A5%E2%80%94docker%20export%2Fimport%C2%A0-toc" style="margin-left:40px;"><a href="#3.8%E3%80%81%E5%AE%B9%E5%99%A8%E5%AF%BC%E5%87%BA%2F%E5%AF%BC%E5%85%A5%E2%80%94docker%20export%2Fimport%C2%A0" rel="nofollow">3.8、容器导出/导入—docker export/import </a></p> 
<p id="3.8%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20rm%20-f-toc" style="margin-left:40px;"><a href="#3.8%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20rm%20-f" rel="nofollow">3.9、删除容器—docker rm -f</a></p> 
<p id="3.10%E3%80%81%E5%AE%B9%E5%99%A8%E6%89%93%E5%8C%85%E4%B8%BA%E9%95%9C%E5%83%8F%C2%A0-toc" style="margin-left:40px;"><a href="#3.10%E3%80%81%E5%AE%B9%E5%99%A8%E6%89%93%E5%8C%85%E4%B8%BA%E9%95%9C%E5%83%8F%C2%A0" rel="nofollow">3.10、容器打包为镜像 </a></p> 
<p id="%C2%A0%E6%9F%A5%E7%9C%8Bdocker%E6%B6%88%E8%80%97%E7%9A%84%E8%B5%84%E6%BA%90%E7%8A%B6%E6%80%81-toc" style="margin-left:40px;"><a href="#%C2%A0%E6%9F%A5%E7%9C%8Bdocker%E6%B6%88%E8%80%97%E7%9A%84%E8%B5%84%E6%BA%90%E7%8A%B6%E6%80%81" rel="nofollow"> 查看docker消耗的资源状态</a></p> 
<p id="%C2%A0%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93" rel="nofollow"> 四、总结</a></p> 
<p id="4.1%E5%A6%82%E6%9E%9C%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96%EF%BC%9F-toc" style="margin-left:40px;"><a href="#4.1%E5%A6%82%E6%9E%9C%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96%EF%BC%9F" rel="nofollow">4.1、如果镜像优化？</a></p> 
<p id="4.2%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BD%93%E4%B8%8B%E6%9C%89%E5%A4%9A%E5%A4%A7%E5%8F%B7%E5%AE%B9%E5%99%A8%EF%BC%8C%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BD%93%E4%B8%8B%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%E5%8D%A0%E7%94%A8%E7%9A%84I%2FO%E6%9C%89%E5%A4%9A%E5%B0%91%EF%BC%8C%E5%8D%A0%E7%94%A8%E5%86%85%E5%AD%98%E5%A4%9A%E5%B0%91%EF%BC%9F-toc" style="margin-left:40px;"><a href="#4.2%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BD%93%E4%B8%8B%E6%9C%89%E5%A4%9A%E5%A4%A7%E5%8F%B7%E5%AE%B9%E5%99%A8%EF%BC%8C%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BD%93%E4%B8%8B%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%E5%8D%A0%E7%94%A8%E7%9A%84I%2FO%E6%9C%89%E5%A4%9A%E5%B0%91%EF%BC%8C%E5%8D%A0%E7%94%A8%E5%86%85%E5%AD%98%E5%A4%9A%E5%B0%91%EF%BC%9F" rel="nofollow">4.2、怎么看当下有多大号容器，怎么看当下所有容器占用的I/O有多少，占用内存多少？</a></p> 
<p id="4.3%E5%AE%B9%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B%E7%8A%B6%E6%80%81%EF%BC%9F-toc" style="margin-left:40px;"><a href="#4.3%E5%AE%B9%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B%E7%8A%B6%E6%80%81%EF%BC%9F" rel="nofollow">4.3、容器有哪些状态？</a></p> 
<p id="4.4overlay2%E7%94%B1%E5%93%AA%E5%87%A0%E9%83%A8%E5%88%86%E7%BB%84%E6%88%90%20%EF%BC%9F-toc" style="margin-left:40px;"><a href="#4.4overlay2%E7%94%B1%E5%93%AA%E5%87%A0%E9%83%A8%E5%88%86%E7%BB%84%E6%88%90%20%EF%BC%9F" rel="nofollow">4.4、overlay2由哪几部分组成 ？</a></p> 
<p id="%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A" rel="nofollow">面试题：</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p><strong><span style="background-color:#dad5e9;">docker的一些基本命令操作</span></strong></p> 
<h2 id="%E4%B8%80%EF%BC%9Adocker%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4">一、<a href="https://so.csdn.net/so/search?q=docker&amp;spm=1001.2101.3001.7020" title="docker">docker</a>基本命令</h2> 
<h3 id="1.1%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0images">1.1、查看镜像——docker images</h3> 
<pre><code>#查看下载到本地的所有镜像
docker images
 
REPOSITORY   TAG       IMAGE ID       CREATED      SIZE
--------------------------------------------------------------------------------
REPOSITORY：镜像属于的仓库；
TAG：镜像的标签信息，标记同一个仓库中的不同镜像；
IMAGE ID：镜像的唯一ID 号，唯一标识一个镜像，经过md5方式加密过；
CREATED：镜像创建时间；
VIRTUAL SIZE：镜像大小；
 
 
#选项
-a 				//列出本地所有的镜像（含中间映像层，默认情况下，过滤掉中间映像层）；
--digests 		//显示镜像的摘要信息；
-f 				//显示满足条件的镜像；
--format 		//指定返回值的模板文件；
--no-trunc 		//显示完整的镜像信息；
-q 				//只显示镜像ID</code></pre> 
<p><img alt="" height="157" src="https://images2.imgbox.com/7a/b8/QiUJzY9L_o.png" width="828"></p> 
<h3 id="1.2%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E7%8A%B6%E6%80%81%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%C2%A0ps%20-a">1.2、查看所有状态容器——docker ps -a</h3> 
<pre><code>docker ps -a    #-a 选项可以显示所有的容器	
 
CONTAINER ID   IMAGE         COMMAND                  CREATED        STATUS                      PORTS     NAMES
 
##字段说明
CONTAINER ID：容器的ID号
IMAGE：加载的镜像
COMMAND ：运行的程序
CREATED ：创建时间
STATUS：当前的状态
PORTS：端口映射
NAMES：名称</code></pre> 
<p><img alt="" height="112" src="https://images2.imgbox.com/15/11/3PSBYhY9_o.png" width="886"></p> 
<h3 id="%C2%A01.3%E3%80%81docker%20%E2%80%94%E2%80%94%20run%20%E6%8C%87%E4%BB%A4"><strong> 1.3、docker —— run 指令</strong></h3> 
<pre><code>docker run hello-world</code></pre> 
<p><strong><span style="background-color:#efedf6;">run指令 运行</span></strong></p> 
<p>①**检测**本地有没有该镜像（没有的话直接到docker hub上下载)</p> 
<p>②create(将镜像创建为容器)+ start 将创建好的容器运行起来</p> 
<p><img alt="" height="738" src="https://images2.imgbox.com/10/4b/Ycycqzdv_o.png" width="955"></p> 
<p> <img alt="" height="116" src="https://images2.imgbox.com/fb/84/W8SBjjD9_o.png" width="886"></p> 
<h4 id="%C2%A0%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E7%AE%80%E5%8D%95%E8%A7%A3%E9%87%8A%EF%BC%9A"><span style="background-color:#ffd7b9;"> </span><strong><span style="background-color:#ffd7b9;">工作流程简单解释：</span></strong></h4> 
<blockquote> 
 <p><strong>（1）docker client客户端连接到了服务端（服务端是以一个守护进程的形式跑在操作系统里面的) restful api典型的c/s架构</strong></p> 
 <p><strong>（2）由docker服务端的守护进程从docker hub 上下载了镜像（Ps:服务端会先检查本地系统是否有这个镜像)<br> （3）服务端创建了一个新的容器，然后从拉去的这个镜像启动了一个容器，容器执行了脚本/可执行程序让我们可以查看/使用(client)<br> （4）docker 服务端把这些信息流（传递）返回到客户端并展示出来，（展示在终端上)<br> （5）docker client可以是多种形式，比如"docker"命令工具所在的终端</strong></p> 
</blockquote> 
<h3 id="1.4%E6%9F%A5%E7%9C%8Bdocker%E7%89%88%E6%9C%AC%E5%91%BD%E4%BB%A4%E2%80%94%E2%80%94docker%20-v">1.4、查看docker<span style="color:#fe2c24;">版本</span>命令（docker -v）</h3> 
<pre><code>docker version 
docker -v  </code></pre> 
<p><img alt="" height="821" src="https://images2.imgbox.com/59/b4/gZ61jzRC_o.png" width="785"></p> 
<h3 id="%C2%A01.5%20%E3%80%81%E6%9F%A5%E7%9C%8Bdocker%E4%BF%A1%E6%81%AF%EF%BC%88docker%20info%EF%BC%89"> 1.5 、查看docker信息（docker info）</h3> 
<pre><code class="language-perl">docker info
#可以用该命令统计每一个状态的容器有多少个
 
Client:
 Context:    default 
 Debug Mode: false
 Plugins:
  app: Docker App (Docker Inc., v0.9.1-beta3)
  buildx: Docker Buildx (Docker Inc., v0.7.1-docker)
  scan: Docker Scan (Docker Inc., v0.12.0)
 
Server:
 Containers: 1  #容器连接数量
  Running: 0   #正在运行的容器数量
  Paused: 0   #暂停的容器数量
  Stopped: 1  #停止的容器数量
 Images: 2    #统计的镜像数量
 Server Version: 20.10.12   #docker版本
 Storage Driver: overlay2   #存储引擎，早期有一段用的是aufa存储引擎，可以把多个目录叠在在一起后挂载到同一个目录一下
  Backing Filesystem: xfs    #后端的文件系统
  Supports d_type: true         
  Native Overlay Diff: true
  userxattr: false
 Logging Driver: json-file
 Cgroup Driver: cgroupfs   #linux中资源控制，资源管理的驱动：cgroupfs 
 Cgroup Version: 1    
 Plugins:  #插件
  Volume: local  #镜像默认保存位置。可以不保存在本地，docker是以引擎的方式架设在linux之上的。
  Network: bridge host ipvlan macvlan null overlay  #所支持的默认的网络类型。bridge（桥接）、host（主机）、ipvlan（三层模式划分vlan）、macvlan（二层模式划分vlan）、null（躺平：不与别人交互）、overlay（叠加网络）
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive  
 Runtimes: io.containerd.runc.v2   io.containerd.runtime.v1.linux runc  #运行时
 Default Runtime: runc  #默认运行时的版本
 Init Binary: docker-init
 containerd version: 7b11cfaabd73bb80907dd23182b9347b4245eb5d
 runc version: v1.0.2-0-g52b36a2
 init version: de40ad0
 Security Options:
  seccomp
   Profile: default
 Kernel Version: 3.10.0-693.el7.x86_64
 Operating System: CentOS Linux 7 (Core)
 OSType: linux
 Architecture: x86_64
 CPUs: 4   #总计cpu
 Total Memory: 1.718GiB #总计内存
 Name: docker
 ID: DT7Y:MDZR:NVOS:NQBJ:C2RV:L5IS:OSLD:E3DG:3PSN:EJDH:ZYMU:42HS
 Docker Root Dir: /var/lib/docker  #docker家目录
 Debug Mode: false
 Registry: https://index.docker.io/v1/  #默认仓库
 Labels:
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Registry Mirrors:  
  https://4abdkxlk.mirror.aliyuncs.com/
 Live Restore Enabled: false</code></pre> 
<p><img alt="" height="603" src="https://images2.imgbox.com/15/b0/yejj1740_o.png" width="795"></p> 
<h3 id="1.6docker%E5%B8%AE%E5%8A%A9%E5%91%BD%E4%BB%A4%E6%96%87%E6%A1%A3%E2%80%94%E2%80%94docker%20--help">1.6、docker帮助命令文档（docker --help）</h3> 
<pre><code>docker --help</code></pre> 
<h2 id="%E4%BA%8C%EF%BC%9Adocker%E9%95%9C%E5%83%8F%E6%93%8D%E4%BD%9C">二、docker镜像操作</h2> 
<h3 id="2.1%E6%90%9C%E7%B4%A2%E9%95%9C%E5%83%8F%EF%BC%88%E5%85%AC%E5%85%B1%E4%BB%93%E5%BA%93%EF%BC%89%E2%80%94%E2%80%94docker%20search">2.1、搜索镜像（公共仓库）（docker search）</h3> 
<p><strong><span style="background-color:#fbd4d0;">默认是在公共仓库找，如果有私有仓库，会在私有仓库找</span></strong></p> 
<pre><code>#格式：docker search 关键字
#示例： 
docker search hello-word 
docker search nginx 
docker search centos：7
——》同时我们也可以自己制作镜像推送到docker hub上
Docker Hub（Docker埠，内有大量存储库或叫仓库）是Docker提供的一项服务，用于查找和与团队共享容器镜像。</code></pre> 
<p><img alt="" height="409" src="https://images2.imgbox.com/8d/53/INS0xtA9_o.png" width="1200"></p> 
<h3 id="2.2%E4%B8%8B%E8%BD%BD%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%20pull">2.2、下载镜像（docker pull）</h3> 
<pre><code>#格式：docker pull 仓库名称[:标签]
#如果下载镜像时不指定标签，则默认会下载仓库中最新版本的镜像，即选择标签为 latest 标签。
docker pull centos:7
docker pull nginx</code></pre> 
<p><img alt="" height="562" src="https://images2.imgbox.com/8b/28/areBdkpl_o.png" width="921"></p> 
<h3 id="2.3%E6%9F%A5%E7%9C%8B%E9%95%9C%E5%83%8F%E5%88%97%E8%A1%A8%E2%80%94%E2%80%94docker%20images%C2%A0">2.3、查看镜像列表（docker images）</h3> 
<pre><code>docker images</code></pre> 
<p><img alt="" height="185" src="https://images2.imgbox.com/48/09/kciukG8j_o.png" width="951"></p> 
<p> <img alt="" height="115" src="https://images2.imgbox.com/7d/9d/4vOzikuq_o.png" width="589"></p> 
<h3 id="2.4%E8%8E%B7%E5%8F%96%E9%95%9C%E5%83%8F%E4%BF%A1%E6%81%AF%E2%80%94%E2%80%94docker%20inspect">2.4、获取镜像信息（docker inspect）</h3> 
<pre><code>#格式：docker inspect  镜像ID
#示例：查看nginx镜像信息
docker insect 605c77e624dd</code></pre> 
<p><img alt="" height="488" src="https://images2.imgbox.com/28/20/0KbnJqJ9_o.png" width="929"></p> 
<p> <strong>下面解释下镜象信息</strong></p> 
<p><img alt="" height="686" src="https://images2.imgbox.com/ca/a1/J7bdmdoh_o.png" width="940"></p> 
<p><img alt="" height="496" src="https://images2.imgbox.com/5a/ea/sGepLbh7_o.png" width="933"></p> 
<p> <img alt="" height="719" src="https://images2.imgbox.com/ab/59/Urym9B78_o.png" width="955"></p> 
<p></p> 
<h3 id="2.5%E6%B7%BB%E5%8A%A0%E9%95%9C%E5%83%8F%E6%A0%87%E7%AD%BE%E2%80%94%E2%80%94docker%C2%A0tag%EF%BC%88%E5%AE%9A%E4%BD%8D%EF%BC%89">2.5、添加镜像标签（docker tag 定位）</h3> 
<pre><code class="language-sql">#格式：docker tag 名称:[旧标签] 新名称:[新标签]
#示例：
docker tag nginx:latest nginx:lnmp  #给nginx打上标签lnmp，原来的标签是latest</code></pre> 
<p><img alt="" height="628" src="https://images2.imgbox.com/88/65/4YE3EBgF_o.png" width="934"></p> 
<h3 id="2.6%E5%AF%BC%E5%87%BA%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0save">2.6、导出镜像（docker save）</h3> 
<pre><code>#导出镜像
#格式：docker save -o 存储文件名 存储的镜像
docker save -o nginx_docker nginx:latest			#存出镜像命名为nginx存在当前目录下
scp nginx_v1 @root:192.168.10.20:/opt   #将导出的镜像以scp方式导到别的服务器上</code></pre> 
<p></p> 
<h3 id="2.7%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%20rmi">2.7、删除镜像（docker rmi）</h3> 
<p><strong>docker rmi是docker rm image的简写</strong></p> 
<pre><code>#格式：
docker rmi 仓库名称:标签	 #当一个镜像有多个标签时，只是删除其中指定的标签
docker rmi 镜像ID号	   #会彻底删除该镜像</code></pre> 
<p><img alt="" height="645" src="https://images2.imgbox.com/50/78/53wxonTT_o.png" width="921"></p> 
<p><img alt="" height="316" src="https://images2.imgbox.com/68/0e/NnVElHnC_o.png" width="905"></p> 
<p><img alt="" height="686" src="https://images2.imgbox.com/46/23/Ll7LJqFK_o.png" width="934"></p> 
<p><img alt="" height="106" src="https://images2.imgbox.com/22/a2/AKrdJHTz_o.png" width="878"></p> 
<h3 id="%C2%A02.8%E3%80%81%E6%89%B9%E9%87%8F%E5%88%A0%E9%99%A4%E9%95%9C%E5%83%8F"> 2.8、批量删除镜像</h3> 
<pre><code class="language-java">#docker images -q 可以加载镜像id
 
#批量删除所有镜像
docker rmi `docker images -q`
 
#批量删除nginx镜像
docker rmi `docker images|grep "nginx"</code></pre> 
<h3 id="%E2%80%8B%E7%BC%96%E8%BE%91"><img alt="" height="87" src="https://images2.imgbox.com/ce/07/f7N89iJw_o.png" width="883"></h3> 
<p><img alt="" height="186" src="https://images2.imgbox.com/31/5e/uJHVmNeX_o.png" width="956"></p> 
<p><img alt="" height="657" src="https://images2.imgbox.com/33/5f/jWygrNWM_o.png" width="1200"></p> 
<p> <img alt="" height="98" src="https://images2.imgbox.com/f3/42/HqUbTHSF_o.png" width="899"></p> 
<p> <img alt="" height="281" src="https://images2.imgbox.com/a5/6a/FnemclF6_o.png" width="919"></p> 
<h3 id="%C2%A02.9%E3%80%81%E5%AF%BC%E5%85%A5%E9%95%9C%E5%83%8F%E2%80%94%E2%80%94docker%C2%A0load"> 2.9、导入镜像——docker load</h3> 
<pre><code>#导入镜像，可以异地导入，但是必须要有docker引擎，并且版本不可以差太多
#格式：docker load &lt; 存出的文件
docker load &lt; nginx_lnmp</code></pre> 
<p><img alt="" height="541" src="https://images2.imgbox.com/a2/70/Ff3FThur_o.png" width="921"></p> 
<h3 id="2.9%20%E6%89%B9%E9%87%8F%E6%89%93%E5%8C%85%E9%95%9C%E5%83%8F">2.10、批量打包镜像</h3> 
<pre><code>docker save -o 包名.tar 镜像1 镜像2 镜像3 </code></pre> 
<p><strong>例：  批量打包方法</strong></p> 
<p>将机器上的所有镜像打包到xiao.tar文件里面</p> 
<pre><code>docker save $(docker images | grep -v REPOSITORY | awk 'BEGIN{OFS=":";ORS=" "}{print $1,$2}') -o zmk.tar
</code></pre> 
<p><img alt="" height="337" src="https://images2.imgbox.com/cc/23/MBX3GVai_o.png" width="902"></p> 
<p> <strong>迁移到其他主机，解压加载镜像： </strong></p> 
<p><strong>docker  load  -i </strong>    haha.tar</p> 
<h2 id="%E4%B8%89%EF%BC%9A%C2%A0%E5%AE%B9%E5%99%A8%E6%93%8D%E4%BD%9C">三、容器操作</h2> 
<h3 id="3.1%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81%E2%80%94%E2%80%94docker%20ps%20-a">3.1、查询所有容器运行状态(docker ps -a)</h3> 
<pre><code>docker ps -a
 
#选项：
-a :			显示所有的容器，包括未运行的。
-f :			根据条件过滤显示的内容。
--format :		指定返回值的模板文件。
-l :			显示最近创建的容器。
-n :			列出最近创建的n个容器。
--no-trunc :	不截断输出。
-q :			静默模式，只显示容器编号。
-s :			显示总的文件大小。</code></pre> 
<pre><code>docker ps -a
 
CONTAINER ID   IMAGE          COMMAND                 CREATED          STATUS    PORTS     NAMES
 
容器的ID号	   加载的镜像     运行的程序               创建时间         当前的状态    端口映射   名称</code></pre> 
<p><img alt="" height="159" src="https://images2.imgbox.com/a0/f9/GHYsFB3v_o.png" width="939"></p> 
<h3 id="3.2%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20create">3.2、创建容器（基于镜像）docker create</h3> 
<pre><code>新创建的容器默认处于停止状态，不运行任何程序，需要在其中发起一个进程来启动容器。
 
#格式：docker create [选项] 镜像
#常用选项：
-i：让容器的输入保持打开
-t：让 Docker 分配一个伪终端
-d：后台守护进程的方式运行
 
#示例：
docker create -it nginx:latest /bin/bash</code></pre> 
<p><img alt="" height="374" src="https://images2.imgbox.com/38/ab/TP3opmbj_o.png" width="937"></p> 
<p> </p> 
<h3 id="3.3%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20start">3.3、启动/停止容器（docker start/stop）</h3> 
<pre><code>#格式：docker start 容器的ID/名称
docker start b2a57b3ea48a
docker ps -a
 
 
停止容器
docker stop 容器ID</code></pre> 
<p><img alt="" height="440" src="https://images2.imgbox.com/34/3c/65MPqNxm_o.png" width="937"></p> 
<h3 id="3.4%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8%EF%BC%88%E4%B8%80%E6%AC%A1%E6%80%A7%E6%89%A7%E8%A1%8C%EF%BC%89%E2%80%94%E2%80%94%20docker%20run">3.4、启动容器（一次性执行）—docker run</h3> 
<pre><code>#加 -d 选项让 Docker 容器以守护形式在后台运行。并且容器所运行的程序不能结束。
 
#示例1：
docker run -itd nginx:latest /bin/bash
 
#示例2：执行后退出
docker run centos:7 /usr/bin/bash -c ls /   
 
#示例3：执行后不退出，以守护进程方式执行持续性任务
docker run -d centos:7 /bin/bash -c "while true;do echo hello;done"</code></pre> 
<p><img alt="" height="497" src="https://images2.imgbox.com/53/8f/k4dEuKHD_o.png" width="932"></p> 
<p> <strong>例2：</strong></p> 
<p><img alt="" height="542" src="https://images2.imgbox.com/07/8d/2VBqIeZE_o.png" width="894"></p> 
<p> <img alt="" height="314" src="https://images2.imgbox.com/b5/96/Vx3g3Z6p_o.png" width="978"></p> 
<p></p> 
<p><strong>例3：</strong></p> 
<p><img alt="" height="423" src="https://images2.imgbox.com/d7/40/eSHGgjiR_o.png" width="972"></p> 
<pre><code class="language-ruby">watch -n 2 docker ps -a
 
每两秒执行一次docker ps -a</code></pre> 
<p><img alt="" height="460" src="https://images2.imgbox.com/a3/f5/oIfBREqu_o.png" width="969"></p> 
<h3 id="3.5%E6%97%A5%E5%BF%97%E3%80%81%E7%AB%AF%E5%8F%A3%E3%80%81%E9%87%8D%E5%91%BD%E5%90%8D">3.5、日志 端口  重命名</h3> 
<h4 id="3.4.1%C2%A0%C2%A0%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C%E6%97%A5%E5%BF%97">3.5.1查看容器运行日志</h4> 
<pre><code>#命令格式：
docker logs [容器id]
#命令效果：
$ docker logs 7c5a24a68f96</code></pre> 
<h4 id="3.4.2%C2%A0%C2%A0%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF">3.5.2查看容器端口信息</h4> 
<pre><code>#命令格式：
docker port [容器id]
#命令效果：
$ docker port 930f29ccdf8a
#没有效果没有和宿主机关联</code></pre> 
<h4 id="%C2%A03.5.3%C2%A0%C2%A0%E5%AE%B9%E5%99%A8%E9%87%8D%E5%91%BD%E5%90%8D"> 3.5.3  容器重命名</h4> 
<pre><code>#作用：
修改容器的名称
#命令格式：
docker rename [容器id]或[容器名称] [容器新名称]
#命令效果：
$ docker rename 930f29ccdf8a u1</code></pre> 
<h3 id="3.5%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8ip%E5%9C%B0%E5%9D%80%E2%80%94%E2%80%94docker%20inspect">3.6、查看容器ip地址—docker inspect</h3> 
<pre><code>#格式：docker inspect 容器id 
docker ps -a   #先查看运行时容器的id
docker inspect e5f97c4ce37f</code></pre> 
<p> <strong>先查看运行时容器的id</strong></p> 
<p> <img alt="" height="378" src="https://images2.imgbox.com/24/d8/WDoBHft0_o.png" width="973"></p> 
<p> <strong>查看容器ip地址</strong></p> 
<p><img alt="" height="584" src="https://images2.imgbox.com/f2/16/W0cp9eGj_o.png" width="865"></p> 
<p><img alt="" height="359" src="https://images2.imgbox.com/df/50/A3uSvM3W_o.png" width="859"></p> 
<h3 id="3.6%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20exec">3.7、进入容器—docker exec</h3> 
<p><strong><span style="background-color:#ffd900;">进入容器的容器状态必须是up状态</span></strong></p> 
<p><strong><span style="background-color:#ffd900;">exec和shell 是两种运行模式</span></strong></p> 
<p> </p> 
<p>docker run -it会创建前台进程，但是会在输入exit后终止进程。</p> 
<p>docker attach会通过连接stdin，连接到容器内输入输出流，会在输入exit后终止容器进程</p> 
<p>docker exec -it 会连接到容器，可以像sSH一样进入容器内部，进行操作，可以通过exit退出容器，不影响容器运行。<br>  </p> 
<pre><code class="language-CommonLisp">#需要进入容器进行命令操作时，可以使用 docker exec 命令进入运行着的容器。
 
#格式：docker exec -it 容器ID/名称 /bin/bash
-i 选项表示让容器的输入保持打开；
-t 选项表示让 Docker 分配一个伪终端。
 
#示例：进入（三种方式）
docker run -itd centos:7 /bin/bash  #先运行容器
docker ps -a 
①使用run进入，可以使用ctrl+d退出，直接退出终端
docker run -it centos:7 /bin/bash 
 
②想永久性进入，退出后还是运行状态，用docker exec
docker ps -a 
docker exec -it b99e0771c4e1  /bin/bash
 
③docker attach，会通过连接stdin，连接到容器内输入输出流，公在输入exit后终止容器进程（临时性的，不推荐）</code></pre> 
<p><strong>①使用run进入，是一次性进入</strong></p> 
<p><img alt="" height="237" src="https://images2.imgbox.com/88/31/vR7LYFLB_o.png" width="948"></p> 
<p> </p> 
<p><strong><span style="background-color:#ffd900;">②永久性进入，用docker exec</span></strong></p> 
<p><img alt="" height="659" src="https://images2.imgbox.com/1d/c7/JAeB5jwn_o.png" width="984"></p> 
<h3 id="%E6%89%A9%E5%B1%95%EF%BC%9A%E7%94%9F%E4%BA%A7%E6%96%B9%E5%BC%8F%E8%BF%9B%E5%85%A5%E5%AE%B9%E5%99%A8">扩展：生产方式进入容器</h3> 
<p><strong>生产中常用的进入容器方法是使用脚本</strong></p> 
<pre><code>#!/bin/bash
#定义进入仓库函数
docker_in(){
NAME_ID=$1
PID=$(docker inspect --format {<!-- -->{.State.Pid}} $NAME_ID)
nsenter --target $PID --mount --uts --ipc --net --pid
}
docker_in $1</code></pre> 
<h3 id="3.8%E3%80%81%E5%AE%B9%E5%99%A8%E5%AF%BC%E5%87%BA%2F%E5%AF%BC%E5%85%A5%E2%80%94docker%20export%2Fimport%C2%A0">3.8、容器导出/导入—docker export/import </h3> 
<p>用户可以将任何一个 Docker 容器从一台机器迁移到另一台机器。在迁移过程中，可以使用docker export 命令将已经创建好的容器导出为文件，无论这个容器是处于运行状态还是停止状态均可导出。可将导出文件传输到其他机器，通过相应的导入命令实现容器的迁移。</p> 
<pre><code>#导出格式：docker export 容器ID/名称 &gt; 文件名
docker export 4ca1bf9275c4 &gt; nginx_latest
 
#导入格式：cat 文件名 | docker import – 镜像名称:标签
法①
docker import nginx_latest nginx_v1	#导入后会生成镜像，但不会创建容器
法②
cat nginx_latest |docker import - nginx_v2</code></pre> 
<p> <strong>导出：</strong></p> 
<p><img alt="" height="483" src="https://images2.imgbox.com/4a/45/7fS5nHK5_o.png" width="966"></p> 
<p> </p> 
<p><strong>导入：</strong></p> 
<p><strong>方法一：</strong></p> 
<p><img alt="" height="302" src="https://images2.imgbox.com/22/1a/KHwqGsQb_o.png" width="965"></p> 
<p> <strong>方法二：</strong></p> 
<p><img alt="" height="229" src="https://images2.imgbox.com/fd/3e/Ff9IFsUh_o.png" width="963"></p> 
<h3 id="3.8%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8%E2%80%94%E2%80%94docker%20rm%20-f">3.9、删除容器—docker rm -f</h3> 
<pre><code>#格式：docker rm [-f] 容器ID/名称
 
1.#不能删除运行状态的容器，只能-f强制删除，或者先停止再删除
docker rm 3224eb044879
 
2.#已经退出的容器，可以直接删除
docker rm 1270a6791069 
 
3.#基于名称匹配的方式删除
docker rm -f distracted_panini
 
 
4.#删除所有运行状态的容器
docker rm -f `docker ps -q`
 
5.#删除所有容器
docker rm -f `docker ps -aq`
 
6.#有选择性的批量删除 （正则匹配）
docker ps -a l awk ' {print "docker rm "$1}'l bash
 
7.#删除退出状态的容器
for i in `dockef ps -a l grep -i exit / awk '{print $1}' '; do docker rm -f $i;done</code></pre> 
<p> </p> 
<p><strong>不能删除运行状态的容器，只能-f强制删除，或者先停止再删除</strong></p> 
<p><img alt="" height="477" src="https://images2.imgbox.com/fa/12/cV9qRLPB_o.png" width="966"></p> 
<p><img alt="" height="412" src="https://images2.imgbox.com/ff/53/Xe626jHy_o.png" width="968"></p> 
<p> <strong>已经退出的容器，可以直接删除</strong></p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/ff/ca/vHFp3soI_o.png" width="978"></p> 
<p> <strong> 扩展：自定义一个容器</strong></p> 
<pre><code>docker run -it --name nginx \
-v  /data_nginx/:/usr/local/nginx/conf \
-v  /log_nginx:/usr/local/nginx/logs \
log-driver=json-file \
log-opts  max-size=500m \
log-opts  max-file=3 \
-p 81:80 \
-P 8443:443  \
--network  ky19  \
--ip  172.18.0.10  \
nginx:latest</code></pre> 
<h3 id="3.10%E3%80%81%E5%AE%B9%E5%99%A8%E6%89%93%E5%8C%85%E4%B8%BA%E9%95%9C%E5%83%8F%C2%A0">3.10、容器打包为镜像 </h3> 
<pre><code>docker run -itd --name nginx.01  nginx:latest  /bin/bash
###指定一个容器运行
docker commit 8d0eb4fd2119 nginx-v1beta
### commit 直接提交</code></pre> 
<p><img alt="" height="569" src="https://images2.imgbox.com/12/b3/q78XLDdf_o.png" width="975"> </p> 
<p><img alt="" height="265" src="https://images2.imgbox.com/4d/0e/6k8m34PG_o.png" width="954"></p> 
<h3 id="%C2%A0%E6%9F%A5%E7%9C%8Bdocker%E6%B6%88%E8%80%97%E7%9A%84%E8%B5%84%E6%BA%90%E7%8A%B6%E6%80%81"> 查看docker消耗的资源状态</h3> 
<pre><code>docker stats</code></pre> 
<p> <img alt="" height="78" src="https://images2.imgbox.com/c8/08/h090CZOo_o.png" width="643"></p> 
<h2 id="%C2%A0%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93"> 四、总结</h2> 
<h3 id="4.1%E5%A6%82%E6%9E%9C%E9%95%9C%E5%83%8F%E4%BC%98%E5%8C%96%EF%BC%9F">4.1、如果镜像优化？</h3> 
<ul><li><strong>有效减少镜像大小</strong>(dockerfile 优化方向-》对于部分企业而言，是一种升阶面试题)</li></ul> 
<h3 id="4.2%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BD%93%E4%B8%8B%E6%9C%89%E5%A4%9A%E5%A4%A7%E5%8F%B7%E5%AE%B9%E5%99%A8%EF%BC%8C%E6%80%8E%E4%B9%88%E7%9C%8B%E5%BD%93%E4%B8%8B%E6%89%80%E6%9C%89%E5%AE%B9%E5%99%A8%E5%8D%A0%E7%94%A8%E7%9A%84I%2FO%E6%9C%89%E5%A4%9A%E5%B0%91%EF%BC%8C%E5%8D%A0%E7%94%A8%E5%86%85%E5%AD%98%E5%A4%9A%E5%B0%91%EF%BC%9F">4.2、怎么看当下有多大号容器，怎么看当下所有容器占用的I/O有多少，占用内存多少？</h3> 
<p>使用docker stats命令查看</p> 
<h3 id="4.3%E5%AE%B9%E5%99%A8%E6%9C%89%E5%93%AA%E4%BA%9B%E7%8A%B6%E6%80%81%EF%BC%9F">4.3、容器有哪些状态？</h3> 
<p>Docker容器可以有四种状态：</p> 
<ul><li> <p><strong>运行</strong></p> </li><li> <p><strong>已暂停</strong></p> </li><li> <p><strong>重新启动</strong></p> </li><li> <p><strong>已退出</strong></p> </li></ul> 
<h3 id="4.4overlay2%E7%94%B1%E5%93%AA%E5%87%A0%E9%83%A8%E5%88%86%E7%BB%84%E6%88%90%20%EF%BC%9F">4.4、overlay2由哪几部分组成 ？</h3> 
<p>LowerDir</p> 
<p>MergedDir</p> 
<p>UpperDir</p> 
<p>WorkDir</p> 
<h3 id="%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%9A">面试题：</h3> 
<p><strong>容器状态有哪些，分别是什么场景？</strong></p> 
<p><strong><span style="background-color:#ffd900;">up exsit(0 137)  created</span><br><span style="background-color:#ffd900;">0：是正常退出</span><br><span style="background-color:#ffd900;">137：是异常退出</span></strong></p> 
<p><br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7026139a86d3386366e5bc9f52091791/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">隐马尔可夫模型基础介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e63ea967101a538b8275e87798d071c8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mongo进入报错</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>