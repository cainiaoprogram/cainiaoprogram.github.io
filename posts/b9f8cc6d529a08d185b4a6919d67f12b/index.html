<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>五、多表连接查询——对分组结果进行过滤 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="五、多表连接查询——对分组结果进行过滤" />
<meta property="og:description" content="五、多表连接查询——对分组结果进行过滤 1.什么是对分组结果进行过滤？ 我们在对数据进行分组之后，得到了一张表，但是表内的数据如果不全是我们想要的，那该怎么办呢？数据过滤可以使用where关键字，但是这个where关键字的动作发生在数据分组汇总之前，此时如果想要对分组汇总之后的数据进行过滤的话，必须使用having关键字【在此处相当于where关键字的作用，但是where发生在数据分组汇总前，having发生在数据分组汇总后】。
2.示例: (1)示例1
将分组汇总后的成绩高于80分的班级取出。
select class,avg(score) as avg_score from grade_score group by class having avg_score&gt;60; select class,avg(score) as avg_score from grade_score group by class having avg_score&gt;80; (2)示例2
将成绩大于80的同学进行分组统计平均分数并且取出平均成绩大于88分的班级与成绩。
第一层过滤where：过滤掉低于80分的同学的成绩。
第二层过滤having：对最终结果过滤掉低于88分的班级。
select class,avg(score) as avg_score from grade_score where score&gt;80 group by class having avg_score&gt;88; 3.where和having的比较 where子句having不能使用聚合函数可以使用聚合函数group by分组汇总之前的过滤操作group by分组汇总之后的过滤操作限制的行数据限制的是分的组 4.MySQL的执行顺序 (1)一个完整的MySQL语法
select [列名/聚合函数(列名)] from 表名1,表名2,...[可以使用内连接或者外连接] where [分组前过滤条件] group by [分组列] having [分组后过滤条件] order by [列(排序条件)]; (2)示例
select class,sum(score) as total_score from grade_score where score&gt;80 group by class having total_score&gt;300 order by total_score desc; 执行顺序：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b9f8cc6d529a08d185b4a6919d67f12b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-09T20:27:52+08:00" />
<meta property="article:modified_time" content="2023-02-09T20:27:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">五、多表连接查询——对分组结果进行过滤</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>五、多表连接查询——对分组结果进行过滤</h3> 
<h4>1.什么是对分组结果进行过滤？</h4> 
<p>我们在对数据进行分组之后，得到了一张表，但是表内的数据如果不全是我们想要的，那该怎么办呢？数据过滤可以使用where关键字，但是这个where关键字的动作发生在数据分组汇总之前，此时如果想要对分组汇总之后的数据进行过滤的话，必须使用having关键字【在此处相当于where关键字的作用，但是where发生在数据分组汇总前，having发生在数据分组汇总后】。</p> 
<h4>2.示例:</h4> 
<p><strong>(1)示例1</strong></p> 
<p>将分组汇总后的成绩高于80分的班级取出。</p> 
<pre class="has"><code class="language-sql">select class,avg(score) as avg_score from grade_score group by class having avg_score&gt;60;</code></pre> 
<p style="text-align:center;"><img alt="" class="has" height="243" src="https://images2.imgbox.com/f6/ef/Id8UJ8LE_o.png" width="1014"></p> 
<pre class="has"><code class="language-sql">select class,avg(score) as avg_score from grade_score group by class having avg_score&gt;80;</code></pre> 
<p><img alt="" class="has" height="171" src="https://images2.imgbox.com/84/8c/ZyNRBwIb_o.png" width="1053"></p> 
<p><strong>(2)示例2</strong></p> 
<p>将成绩大于80的同学进行分组统计平均分数并且取出平均成绩大于88分的班级与成绩。</p> 
<p>第一层过滤where：过滤掉低于80分的同学的成绩。</p> 
<p>第二层过滤having：对最终结果过滤掉低于88分的班级。</p> 
<pre class="has"><code class="language-sql">select class,avg(score) as avg_score from grade_score
where score&gt;80 group by class having avg_score&gt;88;</code></pre> 
<p style="text-align:center;"><img alt="" class="has" height="223" src="https://images2.imgbox.com/bc/10/S4ZhxqJ6_o.png" width="672"></p> 
<h4>3.where和having的比较</h4> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:500px;"><tbody><tr><td style="text-align:center;vertical-align:middle;width:268px;">where子句</td><td style="text-align:center;vertical-align:middle;width:231px;">having</td></tr><tr><td style="text-align:center;vertical-align:middle;width:268px;">不能使用聚合函数</td><td style="text-align:center;vertical-align:middle;width:231px;">可以使用聚合函数</td></tr><tr><td style="text-align:center;vertical-align:middle;width:268px;">group by分组汇总之前的过滤操作</td><td style="text-align:center;vertical-align:middle;width:231px;">group by分组汇总之后的过滤操作</td></tr><tr><td style="text-align:center;vertical-align:middle;width:268px;">限制的行数据</td><td style="text-align:center;vertical-align:middle;width:231px;">限制的是分的组</td></tr></tbody></table> 
<h4>4.MySQL的执行顺序</h4> 
<p><strong>(1)一个完整的MySQL语法</strong></p> 
<pre class="has"><code class="language-sql">select [列名/聚合函数(列名)]
from 表名1,表名2,...[可以使用内连接或者外连接]
where [分组前过滤条件]
group by  [分组列]
having [分组后过滤条件]
order by [列(排序条件)];</code></pre> 
<p><strong>(2)示例</strong></p> 
<pre class="has"><code class="language-sql">select class,sum(score) as total_score 
from grade_score
where score&gt;80 
group by class 
having total_score&gt;300
order by total_score desc;</code></pre> 
<p style="text-align:center;"><img alt="" class="has" height="200" src="https://images2.imgbox.com/e9/ba/3GlIdxM9_o.png" width="399"></p> 
<p>执行顺序：</p> 
<p>&lt;1&gt;执行from子句，找到grade_score这张表；</p> 
<p>&lt;2&gt;执行where子句，将grade_score表中符合score&gt;80这个条件的数据给取出；</p> 
<p>&lt;3&gt;执行group by子句，将数据根据class列分组汇总；</p> 
<p>&lt;4&gt;执行having子句，将分组汇总后的数据根据total_score&gt;300这个条件进行过滤；</p> 
<p>&lt;5&gt;执行order by子句，把最终结果根据total_score的值由大到小进行排序；</p> 
<p>&lt;6&gt;执行select子句，选择出所有数据。</p> 
<p><strong>注意：如果存在多表连接，那么在第一步就先找到对应的表，先执行多表连接，再进行where数据过滤,后续步骤相同</strong>。</p> 
<hr> 
<p>解锁课程，学习更多mysql知识：<br><a class="link-info" href="https://study.163.com/course/courseMain.htm?courseId=1209590958&amp;share=2&amp;shareId=400000000537035" rel="nofollow" title="https://study.163.com/course/courseMain.htm?courseId=1209590958&amp;share=2&amp;shareId=400000000537035">https://study.163.com/course/courseMain.htm?courseId=1209590958&amp;share=2&amp;shareId=400000000537035</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4b484a7126f8cb80ba79975a36f272af/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一维数组（数组）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/be9b3b78df49c83dbe0ed7c7969b8afa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ImportError: /lib64/libm.so.6: version `GLIBC_2.23‘ not found问题解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>