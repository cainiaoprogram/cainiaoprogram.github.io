<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AlmaLinux-9.0-x86_64-minimal 虚拟机集群基本配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="AlmaLinux-9.0-x86_64-minimal 虚拟机集群基本配置" />
<meta property="og:description" content="（1）配网！ 安装虚拟机之后发现没有网络：
准备网络配置：
# 进入网络配置文件夹 cd /etc/sysconfig/network-scripts # 浏览网卡配置文件 ls -a # 浏览过后发现并没有网卡配置文件，自定义网卡配置文件 vim ifcfg-eth0 # 网卡信息 TYPE=Ethernet DEVICE=ethe0 ONBOOT=yes BOOTPROTO=static IPADDR=172.16.77.181 NETMASK=255.255.255.0 GATEWAY=172.16.77.254 DNS1=172.16.77.14 DNS2=8.8.8.8 IPV6INIT=no （2）下载Java环境 配置Java环境：
# 查看本机是否有Java环境 yum list installed | grep java # 查看能下载的jdk版本号 yum search java | grep jdk #下载jdk1.8 yum install -y java-1.8.0-openjdk* #将java导入环境变量文件中 vim /etc/profile （3）域名映射 主机名host映射（hosts文件）。
当我们输入主机名或者域名的时候，系统会首先去本地hosts文件中寻找映射关系看对应的ip是多少。如果有映射关系就根据对应的ip去访问机器。
如果本地hosts文件没有映射，系统就会去访问DNS服务器进行域名解析。
# 编辑/etc/hosts文件即可 vim /etc/hosts 在windows系统中打开hosts文件：
（4）配置主机名 # 查看当前主机信息 hostnamectl # 永久修改主机名称 hostnamectl set-hostname 要修改的主机名 # 重启 reboot （5）防火墙的关闭 关闭命令为：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2353e7539f5a0f33434361d120c97563/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-30T19:14:08+08:00" />
<meta property="article:modified_time" content="2022-09-30T19:14:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AlmaLinux-9.0-x86_64-minimal 虚拟机集群基本配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="1_0"></a>（1）配网！</h4> 
<p>安装虚拟机之后发现没有网络：</p> 
<p><img src="https://images2.imgbox.com/f4/59/gDpYjq52_o.png" alt="image-20220918190816476"></p> 
<p>准备网络配置：</p> 
<pre><code class="prism language-sh"># 进入网络配置文件夹
cd /etc/sysconfig/network-scripts
# 浏览网卡配置文件
ls -a
# 浏览过后发现并没有网卡配置文件，自定义网卡配置文件
vim ifcfg-eth0
</code></pre> 
<pre><code># 网卡信息
TYPE=Ethernet
DEVICE=ethe0
ONBOOT=yes
BOOTPROTO=static
IPADDR=172.16.77.181
NETMASK=255.255.255.0
GATEWAY=172.16.77.254
DNS1=172.16.77.14
DNS2=8.8.8.8
IPV6INIT=no
</code></pre> 
<p><img src="https://images2.imgbox.com/a5/74/10CgRMOl_o.png" alt="image-20220922195329456"></p> 
<p><img src="https://images2.imgbox.com/e5/40/HDjQEtd7_o.png" alt="image-20220922195221501"></p> 
<p><img src="https://images2.imgbox.com/9d/5f/jJwoYtBe_o.png" alt="image-20220922195412891"></p> 
<h4><a id="2Java_37"></a>（2）下载Java环境</h4> 
<p>配置Java环境：</p> 
<pre><code class="prism language-sh"># 查看本机是否有Java环境
yum list installed | grep java
# 查看能下载的jdk版本号
yum search java | grep jdk
#下载jdk1.8
yum install -y java-1.8.0-openjdk*
#将java导入环境变量文件中
vim /etc/profile
</code></pre> 
<p><img src="https://images2.imgbox.com/ed/ed/tL8nsKQ7_o.png" alt="image-20220922144532342"></p> 
<p><img src="https://images2.imgbox.com/e4/b5/lTOOlZLM_o.png" alt="image-20220922144616844"></p> 
<p><img src="https://images2.imgbox.com/e2/ff/dWDvJBSp_o.png" alt="image-20220922144751471"></p> 
<h4><a id="3_58"></a>（3）域名映射</h4> 
<p>主机名host映射（hosts文件）。</p> 
<p>当我们输入主机名或者域名的时候，系统会首先去本地hosts文件中寻找映射关系看对应的ip是多少。如果有映射关系就根据对应的ip去访问机器。</p> 
<p>如果本地hosts文件没有映射，系统就会去访问DNS服务器进行域名解析。</p> 
<pre><code class="prism language-sh"># 编辑/etc/hosts文件即可
vim /etc/hosts
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/7f/2gXxhdAG_o.png" alt="image-20220922194850991"></p> 
<p>在windows系统中打开hosts文件：</p> 
<p><img src="https://images2.imgbox.com/8e/e8/mcCZ7fcF_o.png" alt="image-20220924100632937"></p> 
<p><img src="https://images2.imgbox.com/69/d8/MRMadOwr_o.png" alt="image-20220924100937119"></p> 
<h4><a id="4_81"></a>（4）配置主机名</h4> 
<pre><code class="prism language-sh"># 查看当前主机信息
hostnamectl
# 永久修改主机名称
hostnamectl set-hostname 要修改的主机名
# 重启
reboot
</code></pre> 
<p><img src="https://images2.imgbox.com/36/01/fOicdg3t_o.png" alt="image-20220923165427333"></p> 
<h4><a id="5_94"></a>（5）防火墙的关闭</h4> 
<p>关闭命令为：</p> 
<pre><code class="prism language-sh"># 关闭防火墙
systemctl disable firewalld &amp;&amp; systemctl stop firewalld
# 查看防火墙是否关闭
systemctl status firewalld
</code></pre> 
<p>集群本身就比较复杂，有的集群会使用非常多的组件，比如，大数据hadoop集群，此时，如果防火墙开启，不管是部署阶段还是部署完成后的运维阶段都可能会是一个灾难性的工作量（非常多的防火墙规则需要书写，这很明显是大大增加工作量，而且，不一定能都正确），对于集群的稳定运行是一个非常大的挑战，因此，不管是在测试服务器还是在生产服务器，防火墙一般都是要求关闭的。</p> 
<h4><a id="6selinux__107"></a>（6）selinux 安全系统的关闭</h4> 
<p>selinux系统关闭的原因和防火墙关闭的原因是一样的，在此就不赘述了。关闭命令为：</p> 
<p>临时关闭selinux：setenforce 0</p> 
<p>永久关闭selinux：编辑 <code>/etc/selinux/config</code> 这个文件，修改SELINUX的值为disable即可。</p> 
<p><img src="https://images2.imgbox.com/7e/be/U0Yjr5Dl_o.png" alt="image-20220922193848587"></p> 
<p><img src="https://images2.imgbox.com/f0/47/dzIJqLk0_o.png" alt="image-20220923165515172"></p> 
<h4><a id="7_119"></a>（7）虚拟机克隆</h4> 
<p>在完成上面七步之后，开始克隆出三台虚拟机。</p> 
<p>将虚拟机关闭之后，点击导出，将文件保存到一个地方。</p> 
<p><img src="https://images2.imgbox.com/3d/82/c6g3wjtj_o.png" alt="image-20220924102754263"></p> 
<p>然后选择导入虚拟机：</p> 
<p><img src="https://images2.imgbox.com/27/2a/tnr2bn71_o.png" alt="image-20220924102859513"></p> 
<p>选择刚才导出虚拟机文件的位置：</p> 
<p><img src="https://images2.imgbox.com/a2/d3/xrNzSOxq_o.png" alt="image-20220924102947788"></p> 
<p>选择导入类型时，选择复制虚拟机：</p> 
<p><img src="https://images2.imgbox.com/2c/d2/Vy5w517K_o.png" alt="image-20220924103102666"></p> 
<p>通过这就完成了虚拟机的复制。</p> 
<p>复制完成之后：</p> 
<p>1.根据创建时间，更改虚拟机名称</p> 
<p><img src="https://images2.imgbox.com/b5/0e/GGz5Cy1x_o.png" alt="image-20220924103512204"></p> 
<p>2.更改IP</p> 
<pre><code class="prism language-sh"># 进入网络配置文件
vim /etc/sysconfig/network-scripts/ifcfg-eth0
</code></pre> 
<p>3.更改主机名</p> 
<pre><code class="prism language-sh"># 永久修改主机名称
hostnamectl set-hostname 要修改的主机名
</code></pre> 
<h4><a id="8linux_161"></a>（8）linux系统之间的免密登录</h4> 
<p>知识点：SSH协议(单方向验证的过程)<br> 工具：linux系统内置软件：openSSH(sshd)</p> 
<pre><code class="prism language-sh"># 生成密钥
ssh-keygen -t rsa
# 将密钥发送给每个主机
ssh-copy-id almalinux01
ssh-copy-id almalinux02
ssh-copy-id almalinux03
ssh-copy-id almalinux04
</code></pre> 
<p><img src="https://images2.imgbox.com/b1/cb/T3OFbjQn_o.png" alt="image-20220923204701972"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c35c4b27bedb2c7ffc18f333c16b1ea5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">TexStudio的安装与使用教程（包括参考文献的引用）Latex教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/337a8e68bb4dbb2839c455b1d8eb7286/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OpenCV之图像梯度</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>