<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Pandas数据处理之数据取值与选择 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Pandas数据处理之数据取值与选择" />
<meta property="og:description" content="3.3 数据取值与选择 本篇介绍Pandas的Series和DataFrame对象的数据获取与调整操作.
一、Series数据选择方法 Series对象与一维Numpy数组和标准字典在许多方面都一样。
1.将Series看做字典 和字典一样，Series 对象提供了键值对的映射：
In[1] : import pandas as pd import numpy as np In[2] : data = pd.Series([0.25,0.5,0.75,1],index=[&#34;a&#34;,&#34;b&#34;,&#34;c&#34;,&#34;d&#34;]) data Out[2]: a 0.25 b 0.50 c 0.75 d 1.00 dtype: float64 In[3] : data[&#39;b&#39;] Out[3]: 0.5 我们还可以用Python 字典的表达式和方法来检测键/ 索引和值：
In[4] : &#39;a&#39; in data Out[4]: True In[5] : data.keys() Out[5]: Index([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], dtype=&#39;object&#39;) In[6] : data.items() Out[6]: &lt;zip at 0x25da40d18c8&gt; In[7] : list(data.items()) Out[7]: [(&#39;a&#39;, 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/af84c131146fcf22e508a69f85a54633/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-18T12:56:40+08:00" />
<meta property="article:modified_time" content="2019-06-18T12:56:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Pandas数据处理之数据取值与选择</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="33__0"></a>3.3 数据取值与选择</h2> 
<p>  本篇介绍Pandas的Series和DataFrame对象的数据获取与调整操作.</p> 
<h3><a id="Series_2"></a>一、Series数据选择方法</h3> 
<p>  Series对象与一维Numpy数组和标准字典在许多方面都一样。</p> 
<h4><a id="1Series_4"></a>1.将Series看做字典</h4> 
<p>  和字典一样，Series 对象提供了<strong>键值对的映射</strong>：</p> 
<pre><code class="prism language-P">In[1] : import pandas as pd
	    import numpy as np
In[2] : data = pd.Series([0.25,0.5,0.75,1],index=["a","b","c","d"])
		data
Out[2]: a    0.25
		b    0.50
		c    0.75
		d    1.00
		dtype: float64
In[3] : data['b']
Out[3]:  0.5
</code></pre> 
<p>  我们还可以用Python 字典的表达式和方法来检测键/ 索引和值：</p> 
<pre><code class="prism language-P">In[4] : 'a' in data
Out[4]: True

In[5] : data.keys()
Out[5]: Index(['a', 'b', 'c', 'd'], dtype='object')

In[6] : data.items()
Out[6]: &lt;zip at 0x25da40d18c8&gt;

In[7] : list(data.items())
Out[7]: [('a', 0.25), ('b', 0.5), ('c', 0.75), ('d', 1.0)]
</code></pre> 
<p>  Series 对象还可以用字典语法调整数据。就像你可以通过增加新的键扩展字典一样，你也可以通过增加新的索引值扩展Series：</p> 
<pre><code class="prism language-P">In[8] : data['e'] = 1.25
		data
Out[8]: a    0.25
		b    0.50
		c    0.75
		d    1.00
		e    1.25
		dtype: float64
</code></pre> 
<h4><a id="2Series_46"></a>2.将Series看做一维数组</h4> 
<p>  Series 不仅有着和字典一样的接口，而且还具备和NumPy 数组一样的数组数据选择功能，包括索引、掩码、花哨的索引等操作，具体示例如下所示：</p> 
<pre><code class="prism language-P"># 将显式索引作为切片
In[9] : data["a":"c"]
Out[9]: a    0.25
		b    0.50
		c    0.75
		dtype: float64

# 将隐式整数索引作为切片		
In[10] : data[0:2]
Out[10]: a    0.25
		 b    0.50
		 dtype: float64

# 掩码
In[11] : data[(data &gt; 0.3) &amp; (data &lt; 0.8)]
Out[11]: b    0.50
		 c    0.75
		 dtype: float64

# 花哨的索引
In[12] : data[['a','e']]
Out[12]: a    0.25
		 e    1.25
		 dtype: float64
</code></pre> 
<p>  <strong>注意</strong>：<strong>当使用显示索引做切片时，结果包含最后一个索引；而当使用隐式索引作切片时，结果不包含最后一个索引。</strong></p> 
<h4><a id="3lociloc_75"></a>3.索引器:loc、iloc</h4> 
<p>以上的索引方式有时会出现混乱，不符合我们的预期结果。比如，当我们的Series是显示整数索引，那么data[1]这样取值方式默认仿作显示索引去取值，而切片操作（如data[1:3]）却会使用隐式索引取值。</p> 
<p><em><strong>显式索引：基于标签的索引<br> 隐式索引：基于位置的索引</strong></em></p> 
<pre><code class="prism language-P">In[13] :data = pd.Series(['a','b','c'],index = [1,3,5])
		data
Out[13]: 1    a
		 3    b
		 5    c
		 dtype: object

In[14] : data[1] 	# 取值操作是显式索引
Out[14]: 'a'

In[15] : data[1:3] 	# 切片操作是隐式索引
Out[15]: 3    b
		 5    c
		 dtype: object
</code></pre> 
<p>为此，Pandas提供了索引器属性来作为取值的方法。<strong>不是方法，而是属性</strong></p> 
<p>①.loc属性，表示取值和切片都是显式的：</p> 
<pre><code class="prism language-P">In[15] : data.loc[1]	# 显式取值
Out[16]: 'a'

In[15] : data.loc[1:3]	#显式切片
Out[17]: 1 a
		 3 b
		 dtype: object
</code></pre> 
<p>②.iloc属性，表示取值和切片都是隐式索引：</p> 
<pre><code class="prism language-P">In[16] : data.iloc[1]	# 隐式取值
Out[16]: 'b'

In[17] : data.iloc[1:3]	#隐式切片
Out[17]: 3 b
		 5 c
		 dtype: object
</code></pre> 
<h3><a id="DataFrame_119"></a>二、DataFrame数据选择方法</h3> 
<p>DataFrame 在有些方面像二维或结构化数组，在有些方面又像一个共享索引的若干Series 对象构成的字典。这两种类比可以帮助我们更好地掌握这种数据结构的数据选择方法。</p> 
<h4><a id="1DataFrame_121"></a>1.将DataFrame看作字典</h4> 
<pre><code class="prism language-P">In[18] : area = pd.Series({'California': 423967, 'Texas': 695662,'New York': 141297, 'Florida': 170312,'Illinois': 149995})

		 pop = pd.Series({'California': 38332521, 'Texas': 26448193,'New York': 19651127, 'Florida': 19552860,'Illinois': 12882135})

		 data = pd.DataFrame({'area':area, 'pop':pop})
		 data
Out[18]:	
			 area	 pop
California	423967	38332521
Texas		695662	26448193
New York	141297	19651127
Florida		170312	19552860
Illinois	149995	12882135
</code></pre> 
<p>  两个Series分别构成DF的一列，我们可以通过列名作为key进行形式的取值获取一列数据：</p> 
<pre><code>In[19] : data['area']
Out[19]:	
California    423967
Texas         695662
New York      141297
Florida       170312
Illinois      149995
Name: area, dtype: int64
</code></pre> 
<p>也可以使用属性形式选择<strong>纯字符串列名</strong>的数据（可能数整数列名或者与方法名重名的列名时容易发生混淆），这两者是相等的：</p> 
<pre><code>In[19] : data.area
Out[19]:	
California    423967
Texas         695662
New York      141297
Florida       170312
Illinois      149995
Name: area, dtype: int64

In[20] : data.area is data['area']
Out[20]: True
</code></pre> 
<h4><a id="2DataFrame_162"></a>2.将DataFrame看作二维数组</h4> 
<p>可以把DF看作是一个加强版的二维数组，用values属性按行查看数组数据：</p> 
<pre><code class="prism language-P">In[21] : data.values
Out[21]: array([[  423967, 38332521],
     		    [  695662, 26448193],
     		    [  141297, 19651127],
      		    [  170312, 19552860],
      		    [  149995, 12882135]], dtype=int64)


In[22] : data.values[0] 	# 获取一行数据
Out[22]: array([  423967, 38332521], dtype=int64)

In[23] : data['area']	 	# 获取一列数据
Out[23]:
California    423967
Texas         695662
New York      141297
Florida       170312
Illinois      149995
Name: area, dtype: int64
</code></pre> 
<p>为了更方便的选取我们 想要的行和列数据，我们可以使用另一种方法：显式索引器loc、隐式索引器iloc和混合索引器ix。</p> 
<pre><code class="prism language-P">In[24] : data.iloc[:3, :2]		# dataframe隐式索引切片
Out[24]:
			 area	 pop
California	423967	38332521
Texas		695662	26448193
New York	141297	19651127

In[25] :data.loc[:'New York', :'pop']		# dataframe显式索引切片
Out[25]:
			 area	 pop
California	423967	38332521
Texas		695662	26448193
New York	141297	19651127
</code></pre> 
<p>使用ix 索引器可以实现一种混合效果：（.ix在Python3中已启用，推荐使用.loc和.iloc,不过仍能使用。）</p> 
<pre><code class="prism language-P">In[26] : data.ix[:3, :'pop']
Out[26]:
			 area	 pop
California	423967	38332521
Texas		695662	26448193
New York	141297	19651127
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9fe35b37c908116e0ff92db66fb127a5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mysql安装使用问题记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b5ea667e70d571a04dc4c34cbebbf1d1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">查看Oracle数据库资源状况</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>