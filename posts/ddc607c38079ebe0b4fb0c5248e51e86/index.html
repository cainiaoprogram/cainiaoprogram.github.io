<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>彩票复式投注时，计算注数的程序（C#） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="彩票复式投注时，计算注数的程序（C#）" />
<meta property="og:description" content="做了一个彩票程序，为了复式投注颇费了点脑筋，网上找了半天，才知道这个公式，比如36选7，如果买10个号，公式就是：
10！/ (10-7)！/ 7！
顺手做了一个测试程序：
using System;public class Test{ public static void Main(string[] args){ int a = 5; // 选择了几 int b = 2; try{ if(args.Length == 1){ b = int.Parse(args[0]); } else if(args.Length &gt;= 2){ a = int.Parse(args[0]); b = int.Parse(args[1]); } }catch{ Console.WriteLine(&#34;请正确输入&#34;); return; } int d = GetCount(a, b); Console.WriteLine(&#34;{0},{1},{2}&#34;, a,b,d); } //buyNum : 购买的数字个数 //perNum : 每注要求的数字个数 // 返回值为 : buyNum!/(buyNum-perNum)!/perNum! public static int GetCount(int buyNum, int perNum){ if(perNum == buyNum) return 1; if(perNum &gt; buyNum){ throw new Exception(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ddc607c38079ebe0b4fb0c5248e51e86/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2008-12-12T16:45:00+08:00" />
<meta property="article:modified_time" content="2008-12-12T16:45:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">彩票复式投注时，计算注数的程序（C#）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>做了一个彩票程序，为了复式投注颇费了点脑筋，网上找了半天，才知道这个公式，比如36选7，如果买10个号，公式就是：</p> 
<p>10！/ (10-7)！/ 7！</p> 
<p> </p> 
<p>顺手做了一个测试程序：</p> 
<div class="highlighter"> 
 <ol class="highlighter-c"><li><span class="keyword">using</span> System;</li><li class="alt"><span class="keyword">public</span> <span class="keyword">class</span> Test{<!-- --></li><li>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> Main(<span class="keyword">string</span>[] args){<!-- --></li><li class="alt">        <span class="keyword">int</span> a = 5;  <span class="comment">// 选择了几  </span></li><li>        <span class="keyword">int</span> b = 2;</li><li class="alt">        <span class="keyword">try</span>{<!-- --></li><li>            <span class="keyword">if</span>(args.Length == 1){<!-- --></li><li class="alt">                b = <span class="keyword">int</span>.Parse(args[0]);</li><li>            } <span class="keyword">else</span> <span class="keyword">if</span>(args.Length &gt;= 2){<!-- --></li><li class="alt">                a = <span class="keyword">int</span>.Parse(args[0]);</li><li>                b = <span class="keyword">int</span>.Parse(args[1]);</li><li class="alt">            }</li><li>        }<span class="keyword">catch</span>{<!-- --></li><li class="alt">            Console.WriteLine(<span class="string">"请正确输入"</span>);</li><li>            <span class="keyword">return</span>;</li><li class="alt">        }</li><li>        </li><li class="alt">        <span class="keyword">int</span> d = GetCount(a, b);</li><li>        Console.WriteLine(<span class="string">"{0},{1},{2}"</span>, a,b,d);</li><li class="alt">    }</li><li>    </li><li class="alt">    <span class="comment">//buyNum : 购买的数字个数  </span></li><li>    <span class="comment">//perNum : 每注要求的数字个数  </span></li><li class="alt">    <span class="comment">// 返回值为 : buyNum!/(buyNum-perNum)!/perNum!  </span></li><li>    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> GetCount(<span class="keyword">int</span> buyNum, <span class="keyword">int</span> perNum){<!-- --></li><li class="alt">        <span class="keyword">if</span>(perNum == buyNum)</li><li>            <span class="keyword">return</span> 1;</li><li class="alt">            </li><li>        <span class="keyword">if</span>(perNum &gt; buyNum){<!-- --></li><li class="alt">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"后者必须比前者小！"</span>);</li><li>        }<span class="keyword">else</span> <span class="keyword">if</span>(perNum &lt;= 0){<!-- --></li><li class="alt">            <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"后者不能小于0！"</span>);</li><li>        }</li><li class="alt">        </li><li>        <span class="comment">// 这3行能提高一点效率，并降低一部分溢出的可能  </span></li><li class="alt">        <span class="keyword">int</span> diff = buyNum - perNum;</li><li>        <span class="keyword">if</span> (diff &gt; perNum)</li><li class="alt">            perNum = diff;</li><li>            </li><li class="alt">        <span class="keyword">int</span> result = 1;</li><li>        <span class="keyword">for</span>(<span class="keyword">int</span> i=perNum + 1;i&lt;=buyNum;i++){<!-- --></li><li class="alt">            result *= i;</li><li>        }</li><li class="alt">        </li><li>        <span class="keyword">for</span>(<span class="keyword">int</span> i=1;i&lt;=buyNum - perNum;i++){<!-- --></li><li class="alt">            result /= i;</li><li>        }</li><li class="alt">        <span class="keyword">return</span> result;</li><li>        <span class="comment">/*</span></li><li class="alt"><span class="comment">         8个号码选7＝   8注</span></li><li><span class="comment">         9个号码选7＝  36注</span></li><li class="alt"><span class="comment">        10个号码选7＝ 120注</span></li><li><span class="comment">        11个号码选7＝ 330注</span></li><li class="alt"><span class="comment">        12个号码选7＝ 792注</span></li><li><span class="comment">        */</span></li><li class="alt">    }</li><li>}</li><li class="alt"></ol> 
</div> 
<p>下面是生成复式投注时，列出组合号码的列表的代码：</p> 
<div class="highlighter"> 
 <ol class="highlighter-c"><li><span class="comment">/// &lt;summary&gt; </span></li><li class="alt"><span class="comment">/// 从数组中查找s个数字的组合，并返回全部组合(根据复式彩票投注的号码，返回对应的全部号码组列表) </span></li><li><span class="comment">/// &lt;/summary&gt; </span></li><li class="alt"><span class="comment">/// &lt;param name="arr"&gt;数组(购买的数字列表)&lt;/param&gt; </span></li><li><span class="comment">/// &lt;param name="s"&gt;大于0的整数(每注要求的数字个数)&lt;/param&gt; </span></li><li class="alt"><span class="comment">/// &lt;returns&gt;&lt;/returns&gt; </span></li><li>List&lt;List&lt;<span class="keyword">int</span>&gt;&gt; GetCountList(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> s)</li><li class="alt">{<!-- --></li><li>    <span class="keyword">if</span> (s &lt; 1)</li><li class="alt">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"选择个数不能小于1！"</span>);</li><li>    <span class="keyword">if</span> (arr == <span class="keyword">null</span> || arr.Length == 0 || arr.Length &lt; s)</li><li class="alt">        <span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"数组不能为空 或 小于必选个数！"</span>);</li><li><li class="alt">    <span class="keyword">if</span> (arr.Length == s)</li><li>    { <span class="preprocessor"></span></li><li class="alt"><span class="preprocessor">        #region 数组长度等于s时，直接返回1个组合 </span></li><li>        List&lt;List&lt;<span class="keyword">int</span>&gt;&gt; l_ret = <span class="keyword">new</span> List&lt;List&lt;<span class="keyword">int</span>&gt;&gt;();</li><li class="alt">        List&lt;<span class="keyword">int</span>&gt; l_item = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</li><li>        <span class="keyword">foreach</span> (<span class="keyword">int</span> item <span class="keyword">in</span> arr)</li><li class="alt">        {<!-- --></li><li>            l_item.Add(item);</li><li class="alt">        }</li><li>        l_ret.Add(l_item); <span class="preprocessor"></span></li><li class="alt"><span class="preprocessor">        #endregion </span></li><li>        <span class="keyword">return</span> l_ret;</li><li class="alt">    }</li><li>    <span class="keyword">if</span> (s == 1)</li><li class="alt">    { <span class="preprocessor"></span></li><li><span class="preprocessor">        #region 从数组中查找1个数字的组合，直接把数组各元素返回 </span></li><li class="alt">        List&lt;List&lt;<span class="keyword">int</span>&gt;&gt; l_ret = <span class="keyword">new</span> List&lt;List&lt;<span class="keyword">int</span>&gt;&gt;();</li><li>        <span class="keyword">foreach</span> (<span class="keyword">int</span> item <span class="keyword">in</span> arr)</li><li class="alt">        {<!-- --></li><li>            List&lt;<span class="keyword">int</span>&gt; l_item = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</li><li class="alt">            l_item.Add(item);</li><li>            l_ret.Add(l_item);</li><li class="alt">        } <span class="preprocessor"></span></li><li><span class="preprocessor">        #endregion </span></li><li class="alt">        <span class="keyword">return</span> l_ret;</li><li>    }</li><li class="alt"><li>    List&lt;List&lt;<span class="keyword">int</span>&gt;&gt; l_arrTmp = <span class="keyword">new</span> List&lt;List&lt;<span class="keyword">int</span>&gt;&gt;();</li><li class="alt">    <span class="keyword">for</span> (<span class="keyword">int</span> i = 0; i &lt; arr.Length - s; i++)</li><li>    {<!-- --></li><li class="alt">        <span class="comment">// 后面的数任意取s-1个 </span></li><li>        <span class="keyword">int</span>[] tmp = GetArray(arr, i);</li><li class="alt">        List&lt;List&lt;<span class="keyword">int</span>&gt;&gt; l_arrTmp1 = GetCountList(tmp, s - 1);</li><li><li class="alt">        <span class="keyword">foreach</span> (List&lt;<span class="keyword">int</span>&gt; item <span class="keyword">in</span> l_arrTmp1)</li><li>        {<!-- --></li><li class="alt">            item.Insert(0, arr[i]);</li><li>            l_arrTmp.Add(item);</li><li class="alt">        }</li><li>    }</li><li class="alt"><li>    List&lt;<span class="keyword">int</span>&gt; l_lastItem = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</li><li class="alt">    <span class="keyword">for</span> (<span class="keyword">int</span> i = arr.Length - s; i &lt; arr.Length; i++)</li><li>    {<!-- --></li><li class="alt">        l_lastItem.Add(arr[i]);</li><li>    }</li><li class="alt"><li>    l_arrTmp.Add(l_lastItem);</li><li class="alt">    <span class="keyword">return</span> l_arrTmp;</li><li>}</li><li class="alt"><li><span class="comment">/// &lt;summary&gt; </span></li><li class="alt"><span class="comment">/// 把arr数组中，位置为beg之后的元素全部放入一个新数组返回（不包含beg元素） </span></li><li><span class="comment">/// &lt;/summary&gt; </span></li><li class="alt"><span class="comment">/// &lt;param name="arr"&gt;&lt;/param&gt; </span></li><li><span class="comment">/// &lt;param name="beg"&gt;&lt;/param&gt; </span></li><li class="alt"><span class="comment">/// &lt;returns&gt;&lt;/returns&gt; </span></li><li><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span>[] GetArray(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> beg)</li><li class="alt">{<!-- --></li><li>    <span class="keyword">int</span>[] tmp = <span class="keyword">new</span> <span class="keyword">int</span>[arr.Length - (beg + 1)];</li><li class="alt">    <span class="keyword">for</span> (<span class="keyword">int</span> i = beg + 1; i &lt; arr.Length; i++)</li><li>        tmp[i - (beg + 1)] = arr[i];</li><li class="alt">    <span class="keyword">return</span> tmp;</li><li>}</li><li class="alt"></ol> 
</div> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2d2904dabc3235df81ca2061f9208e93/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">黑人专用浏览器？爆强！！！</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a63d5bf63c39567abf3822acc60dfdf5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vc&#43;&#43;6.0中使用鼠标画线的实现过程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>