<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>3.24 58 数据挖掘intern - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="3.24 58 数据挖掘intern" />
<meta property="og:description" content="1,
input= uid1 house: 1
uid1 car: 1 uid1 recruit: 2
uid1 house: 2
uid2 house: 1
uid2: car: 3
...
注：日志文件格式为：同一个uid的信息显示完了再显示下一个uid
用python编程实现reduce并按照如下进行输出：
output: uid1 house: 3 car: 1 recruit: 2
uid2 house: 1 car: 3
....
分析：输入为流式的，每个过程涉及两个uid变量，统计一个uid变量，并暂时存储，如果下一个变量不是这个uid变量，则将统计结果进行输出，释放该内存。开始统计下一个uid变量。
程序：
2, 二叉树的层序遍历
3,Map-Reduce框架的思想
shuffle: http://langyu.iteye.com/blog/992916
http://www.csdn.net/article/2013-01-07/2813477-confused-about-mapreduce
单词词频统计：http://www.tuicool.com/articles/uE7J7j
http://my.oschina.net/sanpeterguo/blog/215922
http://blog.csdn.net/jthink_/article/details/42745699
http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/00141861202544241651579c69d4399a9aa135afef28c44000
为什么讲mapreduce时没有讲shuffle
以下是 ubutu 14.04 LTS X64 &#43; hadoop 2.7.2 安装试用过程，不完全成功
04/13/2016
Ubuntu环境下单机模式安装hadoop，并用自带WordCount示例验证：
http://www.cnblogs.com/kinglau/p/3794433.html 已完成
注意用的例子是： bin/hadoop jar share/hadoop/mapreduce/sources/hadoop-mapreduce-examples-2.7.2-sources.jar org.apache.hadoop.examples.WordCount input output" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b1856b9469ba5a512bc45ec20d56a8fe/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-03-24T20:42:34+08:00" />
<meta property="article:modified_time" content="2016-03-24T20:42:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">3.24 58 数据挖掘intern</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1,</p> 
<p>input= uid1 house: 1</p> 
<p>             uid1 car: 1 <br> </p> 
<p>             uid1 recruit: 2</p> 
<p>             uid1 house: 2</p> 
<p>             uid2 house: 1</p> 
<p>             uid2: car: 3</p> 
<p>...</p> 
<p>注：日志文件格式为：同一个uid的信息显示完了再显示下一个uid<br> </p> 
<p>用python编程实现reduce并按照如下进行输出：<br> </p> 
<p>output: uid1 house: 3 car: 1 recruit: 2</p> 
<p>              uid2 house: 1 car: 3</p> 
<p>....</p> 
<p><br> </p> 
<p>分析：输入为流式的，每个过程涉及两个uid变量，统计一个uid变量，并暂时存储，如果下一个变量不是这个uid变量，则将统计结果进行输出，释放该内存。开始统计下一个uid变量。</p> 
<p><br> </p> 
<p>程序：</p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p>2, 二叉树的层序遍历</p> 
<p>3,Map-Reduce框架的思想<br> </p> 
<p>shuffle: http://langyu.iteye.com/blog/992916<br> </p> 
<p>http://www.csdn.net/article/2013-01-07/2813477-confused-about-mapreduce<br> </p> 
<p>单词词频统计：http://www.tuicool.com/articles/uE7J7j<br> </p> 
<p>http://my.oschina.net/sanpeterguo/blog/215922<br> </p> 
<p>http://blog.csdn.net/jthink_/article/details/42745699<br> </p> 
<p></p> 
<p>http://www.liaoxuefeng.com/wiki/001374738125095c955c1e6d8bb493182103fac9270762a000/00141861202544241651579c69d4399a9aa135afef28c44000</p> 
<p><br> </p> 
<p><br> </p> 
<p>为什么讲mapreduce时没有讲shuffle</p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p>以下是 ubutu 14.04 LTS X64 + hadoop 2.7.2 安装试用过程，不完全成功<br> </p> 
<p>04/13/2016</p> 
<p>Ubuntu环境下单机模式安装hadoop，并用自带WordCount示例验证：</p> 
<p>http://www.cnblogs.com/kinglau/p/3794433.html  已完成</p> 
<p>注意用的例子是： bin/hadoop jar share/hadoop/mapreduce/sources/hadoop-mapreduce-examples-2.7.2-sources.jar org.apache.hadoop.examples.WordCount input output<br> </p> 
<p>其中修改的一个脚本的位置：/usr/local/hadoop/etc/hadoop/hadoop-env.sh（和hadoop 2.6.2等其他版本不同，没有conf文件夹）</p> 
<p><br> </p> 
<p><br> 启用ssh-agent:<br> $eval `ssh-agent ` </p> 
<div> 
 <wbr></wbr>(反引号) 
</div> 
<p></p> 
<p><br> </p> 
<p>streaming.jar包在hadoop 2.7.2中的位置：</p> 
<p>share/hadoop/tools/lib/hadoop-streaming-2.7.2.jar<br> <br> <br> </p> 
<p><br> </p> 
<p>参照帖子：http://blog.csdn.net/hitwengqi/article/details/8008203</p> 
<p>第六步：<strong>6.设定*-site.xml</strong></p> 
<p>几个xml文件在hadoop 2.7.2中的位置：</p> 
<p><br> <br> <br> ./etc/hadoop/core-site.xml<br> ./etc/hadoop/hdfs-site.xml<br> ./etc/hadoop/mapred-site.xml.template 复制该文件，并命名为mapred-site.xml<br> </p> 
<p><br> <br> <br> </p> 
<p>参考：http://zhidao.baidu.com/link?url=IfVWGBxAl8uCOPXf5GR5gcQSGzJszWdu9pRBLsUdWnA7R1kJTjyFy4D0L7WoR3kMuNxThjm7_OTMOb2kPLAg1zye9f-OeEPFnnLgXxgwwva</p> 
<p></p> 
<h2><span class="ask-title ">搭建hadoop2.4.1版本中/etc/hadoop/中找不到mapred-site.xml文件</span></h2> 默认情况下，/usr/local/hadoop/etc/hadoop/文件夹下有mapred.xml.template文件，我们要复制该文件，并命名为mapred.xml，该文件用于指定MapReduce使用的框架。 
<br> 
<br> 复制并重命名 
<br> cp mapred-site.xml.template mapred-site.xml 
<br> 编辑器打开此新建文件 
<br> sudo gedit mapred-site.xml 
<br> 然后编辑mapred-site.xml 
<br> 
<p></p> 
<p>以后包含了如何编辑文件并另存为的问题。<br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p>提示hadoop命令未找到的解决办法：（两点）</p> 
<p>1, </p> 
<div> 
 <div class="zm-editable-content clearfix">
   vim /etc/profile 
  <br> 加入 
  <br> export HADOOP_HOME=你的hadoop安装路径 
  <br> export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH 
  <br> 然后记得source /etc/profile一下 
 </div> 
 <br> 作者：唐易 
 <br> 链接：http://www.zhihu.com/question/21170241/answer/66720814 
 <br> 
 <br> 
</div> 
<p></p> 
<p>2, 输入hadoop文件命令的时候总是提示hadoop命令未找到，发现应该输入bin/hadoop所有的hadoop命令由bin/ hadoop脚本调用。<br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><strong>第八步，8.启动Hadoop</strong>中的 hadoop@ubuntu:/usr/local/hadoop/bin$ start-all.sh  首先，在hadoop 2.7.2中，目录应该是sbin/不是bin/；其次，命令应该是 <code class="bash plain">.</code><code class="bash plain">/start-all</code><code class="bash plain">.sh或者</code></p> 
<pre>sh  start-all.sh</pre> 
<p></p> 
<p><code class="bash plain"></code><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p>进行到上面这一步的时候会报错：</p> 
<p>16/04/14 09:13:00 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable<br> <br> 是本地库兼容的问题，32位和64位</p> 
<p>目前还未解决</p> 
<p><br> </p> 
<p>最终页面： localhost:8088在浏览器能看到运行情况<br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p>最终要实现的功能：http://blog.csdn.net/jiedushi/article/details/7390015<br> </p> 
<p><br> </p> 
<p>hadoopusr@karl-K42Jv:/usr/local/hadoop$ bin/hadoop jar share/hadoop/tools/lib/hadoop-streaming-2.7.2.jar -files /home/karl/ML/codes/MR/map.py -files /home/karl/ML/codes/MR/red.py  -mapper "python /home/karl/ML/codes/MR/map.py" -reducer "python /home/karl/ML/codes/MR/red.py" -input /home/karl/ML/codes/MR/1.log -output /home/karl/ML/codes/MR/test2<br> <br> 能够运行</p> 
<p>但是报错：</p> 
<p>16/04/14 22:09:37 DEBUG security.UserGroupInformation: PrivilegedActionException as:hadoopusr (auth:SIMPLE) cause:ExitCodeException exitCode=1: chmod: 无法访问"/usr/local/hadoop/tmp/mapred/staging/hadoopusr513177568/.staging/job_local513177568_0001": 没有那个文件或目录<br> <br> 且output底下没有内容<br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p>关闭yarn:      hadoopusr@karl-K42Jv:/usr/local/hadoop$ ./sbin/stop-yarn.sh</p> 
<p></p> 
<pre class="prettyprint linenums lang-bash prettyprinted" style=""><span class="pln">./sbin/mr-jobhistory-daemon.sh stop historyserver</span></pre> 
<p></p> 
<p>关闭hadoop：  hadoopusr@karl-K42Jv:/usr/local/hadoop$ sh ./sbin stop-all.sh<br> <br> 退出hadoopusr用户：  hadoopusr@karl-K42Jv:/usr/local/hadoop$ exit<br> <br> 这时就可以完全关闭了，不会提示  ”该终端中仍然有一个进程在运行。。。“<br> </p> 
<p><br> <br> </p> 
<p><br> </p> 
<p><br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7a22fc9c4721e9e262a074b6dccc675f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">通过cookie保存并读取用户登录信息实例</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f2514a34dfa274c17b0f293f67352762/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">apache 更改默认网站目录 及 CentOS Apache配置详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>