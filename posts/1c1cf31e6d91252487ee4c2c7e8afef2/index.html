<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>树莓派配置环境细节(JDK&#43;pycharm&#43;miniconda&#43;pyqt5&#43;opencv-python) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="树莓派配置环境细节(JDK&#43;pycharm&#43;miniconda&#43;pyqt5&#43;opencv-python)" />
<meta property="og:description" content="一、java环境
1.1确认树莓派的版本信息
1.2把压缩包传到树莓派上，然后进行解压
1.3配置环境变量
1.4查看java环境
二、pycharm
三、miniconda
3.1miniconda下载
3.2miniconda 安装
3.3添加 .bashrc 配置
3.4使用conda创建python环境
3.5pytorch &#43; torchvision安装
四、PyQt5
4.1PyQt5及SIP简介
4.2所需环境
4.3PyQt5及SIP安装步骤
4.3.1安装qt5-default
4.3.2配置好python和虚拟环境
4.3.3源码编译安装SIP包
4.3.4源码编译安装PyQt5包
4.4虚拟环境中调用PyQt5的配置
4.5测试PyQt5的版本和功能
五、opencv-python
一、java环境 1.1确认树莓派的版本信息 uname -a 官网下载地址：OpenJDK JDK 18.0.2.1 GA Release 1.2把压缩包传到树莓派上，然后进行解压 tar -zxvf 文件名 z：表示tar 包是被gzip压缩过的，所以解压时需要用gunzip解压
x：从tar包中把文件提取出来
v：解压的过程中显示文件信息
f：使用文件，后面要立即接文件名，不要再加参数
1.3配置环境变量 先安装gedit
sudo apt-get install gedit 进入/home/pi文件下
然后通过gedit命令打开/home/pi/.bash_profile
gedit /home/pi/.bash_profile 打开文件后在文件尾部加入JDK环境变量的配置，如下所示：(JAVA_HOME为你jdk安装的所在路径)
export JAVA_HOME=/home/pi/downloads/jdk-18.0.2.1 export PATH=$JAVA_HOME/bin:$PATH export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar 添加之后保存退出，然后使用如下命令使其生效
source /home/pi/.bash_profile 1.4查看java环境 如此即可安装成功。
二、pycharm 可以点击这个链接下载Pycharm。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1c1cf31e6d91252487ee4c2c7e8afef2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-26T21:02:32+08:00" />
<meta property="article:modified_time" content="2022-10-26T21:02:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">树莓派配置环境细节(JDK&#43;pycharm&#43;miniconda&#43;pyqt5&#43;opencv-python)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"></p> 
<p id="%E4%B8%80%E3%80%81java%E7%8E%AF%E5%A2%83-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81java%E7%8E%AF%E5%A2%83" rel="nofollow">一、java环境</a></p> 
<p id="%E7%A1%AE%E8%AE%A4%E6%A0%91%E8%8E%93%E6%B4%BE%E7%9A%84%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF-toc" style="margin-left:40px;"><a href="#%E7%A1%AE%E8%AE%A4%E6%A0%91%E8%8E%93%E6%B4%BE%E7%9A%84%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF" rel="nofollow">1.1确认树莓派的版本信息</a></p> 
<p id="%C2%A0%E6%8A%8A%E5%8E%8B%E7%BC%A9%E5%8C%85%E4%BC%A0%E5%88%B0%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%EF%BC%8C%E7%84%B6%E5%90%8E%E8%BF%9B%E8%A1%8C%E8%A7%A3%E5%8E%8B-toc" style="margin-left:40px;"><a href="#%C2%A0%E6%8A%8A%E5%8E%8B%E7%BC%A9%E5%8C%85%E4%BC%A0%E5%88%B0%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%EF%BC%8C%E7%84%B6%E5%90%8E%E8%BF%9B%E8%A1%8C%E8%A7%A3%E5%8E%8B" rel="nofollow">1.2把压缩包传到树莓派上，然后进行解压</a></p> 
<p id="%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:40px;"><a href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">1.3配置环境变量</a></p> 
<p id="%E6%9F%A5%E7%9C%8Bjava%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#%E6%9F%A5%E7%9C%8Bjava%E7%8E%AF%E5%A2%83" rel="nofollow">1.4查看java环境</a></p> 
<p id="%E4%BA%8C%E3%80%81pycharm-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81pycharm" rel="nofollow">二、pycharm</a></p> 
<p id="%E4%B8%89%E3%80%81miniconda-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81miniconda" rel="nofollow">三、miniconda</a></p> 
<p id="miniconda%E4%B8%8B%E8%BD%BD-toc" style="margin-left:40px;"><a href="#miniconda%E4%B8%8B%E8%BD%BD" rel="nofollow">3.1miniconda下载</a></p> 
<p id="miniconda%20%E5%AE%89%E8%A3%85-toc" style="margin-left:40px;"><a href="#miniconda%20%E5%AE%89%E8%A3%85" rel="nofollow">3.2miniconda 安装</a></p> 
<p id="%E6%B7%BB%E5%8A%A0%20.bashrc%20%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%E6%B7%BB%E5%8A%A0%20.bashrc%20%E9%85%8D%E7%BD%AE" rel="nofollow">3.3添加 .bashrc 配置</a></p> 
<p id="%E4%BD%BF%E7%94%A8conda%E5%88%9B%E5%BB%BApython%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#%E4%BD%BF%E7%94%A8conda%E5%88%9B%E5%BB%BApython%E7%8E%AF%E5%A2%83" rel="nofollow">3.4使用conda创建python环境</a></p> 
<p id="pytorch%20%2B%20torchvision%E5%AE%89%E8%A3%85-toc" style="margin-left:40px;"><a href="#pytorch%20%2B%20torchvision%E5%AE%89%E8%A3%85" rel="nofollow">3.5pytorch + torchvision安装</a></p> 
<p id="%E5%9B%9B%E3%80%81PyQt5-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81PyQt5" rel="nofollow">四、PyQt5</a></p> 
<p id="PyQt5%E5%8F%8ASIP%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#PyQt5%E5%8F%8ASIP%E7%AE%80%E4%BB%8B" rel="nofollow">4.1PyQt5及SIP简介</a></p> 
<p id="%E6%89%80%E9%9C%80%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#%E6%89%80%E9%9C%80%E7%8E%AF%E5%A2%83" rel="nofollow">4.2所需环境</a></p> 
<p id="PyQt5%E5%8F%8ASIP%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4-toc" style="margin-left:40px;"><a href="#PyQt5%E5%8F%8ASIP%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4" rel="nofollow">4.3PyQt5及SIP安装步骤</a></p> 
<p id="%E5%AE%89%E8%A3%85qt5-default-toc" style="margin-left:80px;"><a href="#%E5%AE%89%E8%A3%85qt5-default" rel="nofollow">4.3.1安装qt5-default</a></p> 
<p id="%C2%A0%E9%85%8D%E7%BD%AE%E5%A5%BDpython%E5%92%8C%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83-toc" style="margin-left:80px;"><a href="#%C2%A0%E9%85%8D%E7%BD%AE%E5%A5%BDpython%E5%92%8C%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83" rel="nofollow">4.3.2配置好python和虚拟环境</a></p> 
<p id="%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85SIP%E5%8C%85-toc" style="margin-left:80px;"><a href="#%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85SIP%E5%8C%85" rel="nofollow">4.3.3源码编译安装SIP包</a></p> 
<p id="%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85PyQt5%E5%8C%85-toc" style="margin-left:80px;"><a href="#%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85PyQt5%E5%8C%85" rel="nofollow">4.3.4源码编译安装PyQt5包</a></p> 
<p id="%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%B8%AD%E8%B0%83%E7%94%A8PyQt5%E7%9A%84%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%B8%AD%E8%B0%83%E7%94%A8PyQt5%E7%9A%84%E9%85%8D%E7%BD%AE" rel="nofollow">4.4虚拟环境中调用PyQt5的配置</a></p> 
<p id="%E6%B5%8B%E8%AF%95PyQt5%E7%9A%84%E7%89%88%E6%9C%AC%E5%92%8C%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px;"><a href="#%E6%B5%8B%E8%AF%95PyQt5%E7%9A%84%E7%89%88%E6%9C%AC%E5%92%8C%E5%8A%9F%E8%83%BD" rel="nofollow">4.5测试PyQt5的版本和功能</a></p> 
<p id="%E4%BA%94%E3%80%81opencv-python-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81opencv-python" rel="nofollow">五、opencv-python</a></p> 
<p id="-toc" style="margin-left:80px;"></p> 
<p id="-toc" style="margin-left:80px;"></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81java%E7%8E%AF%E5%A2%83">一、java环境</h2> 
<h3 id="%E7%A1%AE%E8%AE%A4%E6%A0%91%E8%8E%93%E6%B4%BE%E7%9A%84%E7%89%88%E6%9C%AC%E4%BF%A1%E6%81%AF">1.1确认树莓派的版本信息</h3> 
<pre><code class="language-bash">uname -a
</code></pre> 
<p><img alt="" height="70" src="https://images2.imgbox.com/75/6e/SLYY5PMF_o.png" width="652"></p> 
<p>官网下载地址：<a href="http://jdk.java.net/18/" rel="nofollow" title="OpenJDK JDK 18.0.2.1 GA Release">OpenJDK JDK 18.0.2.1 GA Release</a> </p> 
<p><img alt="" height="759" src="https://images2.imgbox.com/a0/08/XvC69vOw_o.png" width="1023"></p> 
<h3 id="%C2%A0%E6%8A%8A%E5%8E%8B%E7%BC%A9%E5%8C%85%E4%BC%A0%E5%88%B0%E6%A0%91%E8%8E%93%E6%B4%BE%E4%B8%8A%EF%BC%8C%E7%84%B6%E5%90%8E%E8%BF%9B%E8%A1%8C%E8%A7%A3%E5%8E%8B">1.2把压缩包传到树莓派上，然后进行解压</h3> 
<pre><code class="language-bash">tar -zxvf 文件名
</code></pre> 
<p><strong>z</strong>：表示tar 包是被gzip压缩过的，所以解压时需要用gunzip解压<br><strong>x</strong>：从tar包中把文件提取出来<br><strong>v</strong>：解压的过程中显示文件信息<br><strong>f</strong>：使用文件，后面要立即接文件名，不要再加参数</p> 
<p><img alt="" height="431" src="https://images2.imgbox.com/d0/e8/CTQrLYVW_o.png" width="862"></p> 
<h3 id="%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">1.3配置环境变量</h3> 
<p>先安装gedit</p> 
<pre><code class="language-bash">sudo apt-get install gedit</code></pre> 
<p>进入/home/pi文件下</p> 
<p>然后通过gedit命令打开/home/pi/.bash_profile</p> 
<pre><code class="language-bash">gedit /home/pi/.bash_profile</code></pre> 
<p>打开文件后在文件尾部加入JDK环境变量的配置，如下所示：(JAVA_HOME为你jdk安装的所在路径)</p> 
<pre><code class="language-bash">export JAVA_HOME=/home/pi/downloads/jdk-18.0.2.1
export PATH=$JAVA_HOME/bin:$PATH
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</code></pre> 
<p> 添加之后保存退出，然后使用如下命令使其生效</p> 
<pre><code class="language-bash"> source  /home/pi/.bash_profile</code></pre> 
<h3 id="%E6%9F%A5%E7%9C%8Bjava%E7%8E%AF%E5%A2%83">1.4查看java环境</h3> 
<p><img alt="" height="66" src="https://images2.imgbox.com/19/99/TIy5TgzZ_o.png" width="569"></p> 
<p> 如此即可安装成功。</p> 
<h2 id="%E4%BA%8C%E3%80%81pycharm">二、pycharm</h2> 
<p>可以点击这个<a href="https://www.jetbrains.com/pycharm/download/#section=linux" rel="nofollow" title="链接">链接</a>下载Pycharm。<br> 注意我们要下载的是Linux版本的软件。PyCharm有专业版和社区版。专业版的功能更全，所以推荐下载这个版本，但是要收费。社区版是免费的。</p> 
<p><img alt="" height="833" src="https://images2.imgbox.com/4b/29/S4eXPJu7_o.png" width="1200"></p> 
<p> 文件默认下载到<code><span style="background-color:#fbd4d0;">/home/pi/下载</span></code>目录下。下载的文件是<code>tar.gz</code>格式的压缩包，需要先对压缩包进行解压操作：</p> 
<pre><code class="language-bash">tar zxvf /home/pi/下载/pycharm-community-2022.2.3.tar.gz
</code></pre> 
<p>其中的<code><span style="background-color:#fbd4d0;">pycharm-community-2022.2.3.tar.gz</span></code>是刚刚下载的PyCharm安装包的文件名，版本号不同，文件名或许会有差异，输入命令的时候注意修改。</p> 
<p><br> 将工作命令指向解压好的PyCharm文件中的bin目录：</p> 
<pre><code class="language-bash">cd /home/pi/downloads/pycharm-community-2022.2.3/bin</code></pre> 
<p>然后用sh命令运行<code><span style="background-color:#fbd4d0;">pycharm.sh</span></code>文件：</p> 
<pre><code class="language-bash">sh pycharm.sh
</code></pre> 
<p>PyCharm就可以顺利运行啦。</p> 
<h2 id="%E4%B8%89%E3%80%81miniconda">三、miniconda</h2> 
<p>在装完树莓派之后，当你想要使用python去写代码的时候，这个时候由于python的版本容易冲突，且不好配置python环境的原因，在这里建议安装miniconda去配置python环境<br> 树莓派系统自带的默认的python版本是2.7，但是注意并不代表树莓派内部不包含python3的版本，树莓派的桌面好像是依赖于python3的版本，所以尽量别去树莓派内部环境下乱使用rm命令乱删文件。</p> 
<p>安装之前查看系统情况：<br>  </p> 
<pre><code class="language-bash">uname -a</code></pre> 
<p><img alt="" height="70" src="https://images2.imgbox.com/c5/0c/39yknM9v_o.png" width="652"></p> 
<h3 id="miniconda%E4%B8%8B%E8%BD%BD">3.1miniconda下载</h3> 
<p>miniconda下载地址：<a href="https://conda.io/en/latest/miniconda.html" rel="nofollow" title="Miniconda — conda   documentation">Miniconda — conda documentation</a></p> 
<p>点击链接可以看到如下图，然后选择自己版本号的下载即可。</p> 
<p><img alt="" height="778" src="https://images2.imgbox.com/dc/7d/5ewihbRz_o.png" width="1200"></p> 
<h3 id="miniconda%20%E5%AE%89%E8%A3%85">3.2miniconda 安装</h3> 
<p>将下载好的sh文件传输到树莓派中，然后使用bash命令进行一键安装</p> 
<pre><code class="language-bash">bash /home/pi/Miniconda3-py37_4.9.2-Linux-aarch64.sh</code></pre> 
<p> 接下来根据提示，按 <code><span style="background-color:#fbd4d0;">Enter</span></code><span style="background-color:#fbd4d0;"> </span>跳过安装协议（注意别按太快，否则会直接退出，由于我已安装成功，未截图，放上我查找的相关博客的截图）</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/da/b7/PPxwu7E5_o.png"></p> 
<p>然后输入 <code><span style="background-color:#fbd4d0;">yes</span></code>同意并开始安装，接下来会提示是否更改默认路径，其默认路径是 <code><span style="background-color:#fbd4d0;">/root/miniconda3</span></code> ，为了日后使用方便，我们会将安装路径设置成用户目录之下，具体路径<code><span style="background-color:#fbd4d0;">/home/pi/miniconda3</span></code> ，设置完路径后，等待安装完成即可。 </p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/40/f6/g0M8Lxug_o.png"></p> 
<h3 id="%E6%B7%BB%E5%8A%A0%20.bashrc%20%E9%85%8D%E7%BD%AE">3.3添加 .bashrc 配置</h3> 
<p>安装结束后，python 和 <a href="https://so.csdn.net/so/search?q=conda&amp;spm=1001.2101.3001.7020" title="conda">conda</a> 还不能正常使用，我们还需要配置 .bashrc 文件，我们用</p> 
<pre><code class="language-bash">gedit ~/.bashrc
</code></pre> 
<p>打开 <span style="background-color:#fbd4d0;">~</span><code><span style="background-color:#fbd4d0;">/.bashrc</span></code>，在配置文件最后添加以下语句，然后保存即可。</p> 
<pre><code class="language-bash">export PATH="/home/pi/miniconda3/bin:$PATH"</code></pre> 
<pre><code class="language-bash"># 查看版本信息
conda --version</code></pre> 
<p>为了方便以后下载，建议修改一下源地址，请使用镜像官网给出的替换命令，网上有很多命令是错误，被坑了两次，所以在这里贴出<a href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/" rel="nofollow" title="地址">地址</a>：</p> 
<pre><code class="language-bash">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --set show_channel_urls yes
</code></pre> 
<h3 id="%E4%BD%BF%E7%94%A8conda%E5%88%9B%E5%BB%BApython%E7%8E%AF%E5%A2%83">3.4使用conda创建python环境</h3> 
<pre><code class="language-bash"># 创建空间名为py36的环境，指定python版本为3.6
conda create -n py36 python=3.6

</code></pre> 
<p>以下是一些基础命令：</p> 
<pre><code class="language-bash"># 不创建的情况下，会有一个默认的环境
conda info -e

# 切换到新环境# linux/Mac下需要使用source activate env_name
source activate py36

#退出环境
source deactivate py36

# 安装numpy
conda install numpy

# 当使用conda安装失败，提示没有类似库的时候，请用pip安装
pip install windrose

# 查看已有包
conda list
</code></pre> 
<h3 id="pytorch%20%2B%20torchvision%E5%AE%89%E8%A3%85">3.5pytorch + torchvision安装</h3> 
<p id="%E4%B8%8B%E8%BD%BDtorch%E5%92%8Ctorchvision">下载torch和torchvision</p> 
<p><a class="has-card" href="https://download.pytorch.org/whl/torch_stable.html" rel="nofollow" title="首先获取 torch 与torchvision 安装包点击下载"><span class="link-card-box"><span class="link-title">首先获取 torch 与torchvision 安装包点击下载</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/d7/5f/qsBEk14s_o.png">https://download.pytorch.org/whl/torch_stable.html</span></span></a>但要注意版本对应，这里是一个大坑，torch 与 torchvision 的版本一定要对照起来，否则会有各种问题<strong>。</strong> 这里我找到了一个版本对照表 ：<img alt="" src="https://images2.imgbox.com/77/85/k0lD8X3T_o.png"></p> 
<p>然后将下载好的torch和torchvision文件上传到树莓派，在conda创建的虚拟环境下(py36这是我的虚拟环境)进行 <span style="background-color:#fbd4d0;"> pip 文件路径</span>     安装即可。</p> 
<h2 id="%E5%9B%9B%E3%80%81PyQt5">四、PyQt5</h2> 
<p>在嵌入式ARM 64位平台上，pip方式安装PyQt5时因pip源无编译好的aarch64的whl包，需要下载PyQt5和sip的源码包进行自动编译，通常会编译失败。<br> 虽然<span style="background-color:#fbd4d0;">sudo apt-get install python3-pyqt5</span>可以安装成功，但apt方式安装的PyQt5包默认安装在<span style="background-color:#fbd4d0;">usr/bin/python3/dist-packages</span>下，且在多Python版本环境下编译成系统默认python版本的PyQt5库文件，当在树莓派创建的不同Python版本的虚拟环境中时无法调用，故在嵌入式平台上采用源码编译方式安装PyQt5。</p> 
<h3 id="PyQt5%E5%8F%8ASIP%E7%AE%80%E4%BB%8B">4.1PyQt5及SIP简介</h3> 
<p>PyQt5 是Riverbank 公司的产品，分为开源版本和商业版本，开源版本就包含全部的功能。<br> SIP 是一个将C/C++库转换为Python 绑定的工具，SIP本来是为了开发PyQt 而开发的，现在也可以用于将任何C/C++库转换为Python 绑定。PyQt5依赖于SIP包。</p> 
<h3 id="%E6%89%80%E9%9C%80%E7%8E%AF%E5%A2%83">4.2所需环境</h3> 
<table><tbody><tr><td>Python版本</td><td>Python 3.9.2</td></tr><tr><td>PyQt5版本</td><td>5.15.2</td></tr><tr><td>SIP版本</td><td>4.19.25</td></tr></tbody></table> 
<p>原博客中使用的python版本为3.7.10，我使用后出现了问题，根据后面<span style="background-color:#fbd4d0;">编译SIP包</span>的提示才知道需要用3.9.2的版本，不知道问题是不是真的出现在这里，反正我的版本换成了3.9.2就bug了。</p> 
<h3 id="PyQt5%E5%8F%8ASIP%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4">4.3PyQt5及SIP安装步骤</h3> 
<h4 id="%E5%AE%89%E8%A3%85qt5-default">4.3.1安装qt5-default</h4> 
<p>源码编译PyQt5时需要系统的<span style="background-color:#fbd4d0;">/usr/lib/qt5/bin/</span>路径下有qmake，需先安装qt5-default包，此时默认会安装qmake。</p> 
<pre><code class="language-bash">user@admin:~$ sudo apt-get install qt5-default
...
下列【新】软件包将被安装：
  libdrm-dev libegl1-mesa-dev libgl1-mesa-dev libgles1 libgles2-mesa-dev
  libglu1-mesa-dev libglvnd-core-dev libglvnd-dev libopengl0 libqt5concurrent5
  libqt5opengl5-dev libqt5sql5 libqt5sql5-sqlite libqt5test5 libqt5xml5
  libwayland-bin libwayland-dev libx11-xcb-dev libxcb-dri2-0-dev
  libxcb-dri3-dev libxcb-glx0-dev libxcb-present-dev libxcb-randr0-dev
  libxcb-shape0-dev libxcb-sync-dev libxcb-xfixes0-dev libxshmfence-dev
  libxxf86vm-dev mesa-common-dev qt5-default qt5-qmake qt5-qmake-bin
  qtbase5-dev qtbase5-dev-tools qtchooser x11proto-xf86vidmode-dev
  ...
  #验证qmake是否已安装
user@admin:~$ qmake --version
QMake version 3.1

</code></pre> 
<p>若出现以下情况：则需要使用<span style="background-color:#fbd4d0;">sudo apt-get install qtbase5-dev qtchooser qt5-qmake qtbase5-dev-tools</span>来代替<span style="background-color:#fbd4d0;">sudo apt-get install qt5-default</span></p> 
<p><img alt="" height="143" src="https://images2.imgbox.com/4c/f7/QyDTHARv_o.png" width="501"></p> 
<h4 id="%C2%A0%E9%85%8D%E7%BD%AE%E5%A5%BDpython%E5%92%8C%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83">4.3.2配置好python和虚拟环境</h4> 
<p>按照<a href="https://blog.csdn.net/foreverey/article/details/114400098?spm=1001.2014.3001.5501" title="《Firefly AIO-3399ProC开发板安装RKNN Toolkit 1.6.0开发环境》">《Firefly AIO-3399ProC开发板安装RKNN Toolkit 1.6.0开发环境》</a>文章配置python和虚拟环境。命令行切换到虚拟环境：</p> 
<pre><code class="language-bash">user@admin:~$ virtualenv -p /usr/bin/python3.7 pyqt5
user@admin:~$ source pyqt5/bin/activate
(pyqt5) user@admin:~$ pip3 list
Package       Version
------------- -------
pip           21.3.1
pkg_resources 0.0.0
setuptools    59.2.0
wheel         0.37.0

</code></pre> 
<h4 id="%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85SIP%E5%8C%85">4.3.3源码编译安装SIP包</h4> 
<p>安装编译所需软件包</p> 
<pre><code class="language-bash">sudo apt-get install cmake gcc g++
pip3 install --upgrade pip
pip3 install wheel setuptools
</code></pre> 
<p>编译SIP包</p> 
<pre><code class="language-bash">(pyqt5) user@admin:~$ cd ./pyqt5/
(pyqt5) user@admin:~$ tar zxvf sip-4.19.25.tar.gz
pyqt5) user@admin:~/pyqt5$ cd ./sip-4.19.25
(pyqt5) user@admin:~/pyqt5/sip-4.19.25$ sudo python3 configure.py --sip-module PyQt5.sip
This is SIP 4.19.25 for Python 3.9.2 on linux.
The SIP code generator will be installed in /usr/bin.
The sip.h header file will be installed in /usr/include/python3.7m.
The PyQt5.sip module will be installed in /usr/lib/python3/dist-packages/PyQt5.
The sip.pyi stub file will be installed in
/usr/lib/python3/dist-packages/PyQt5.
The default directory to install .sip files in is /usr/share/sip.
Creating sipconfig.py...
Creating top level Makefile...
Creating sip code generator Makefile...
Creating sip module Makefile...
(pyqt5) user@admin:~/pyqt5/sip-4.19.25$ sudo make
...
(pyqt5) user@admin:~/pyqt5/sip-4.19.25$ sudo make install
make[1]: 进入目录“/home/user/pyqt5/sip-4.19.25/sipgen”
cp -f sip /usr/bin/sip
cp -f /home/user/pyqt5/sip-4.19.25/siplib/sip.h /usr/include/python3.7m/sip.h
make[1]: 离开目录“/home/user/pyqt5/sip-4.19.25/sipgen”
make[1]: 进入目录“/home/user/pyqt5/sip-4.19.25/siplib”
cp -f sip.so /usr/lib/python3/dist-packages/PyQt5/sip.so
strip /usr/lib/python3/dist-packages/PyQt5/sip.so
cp -f /home/user/pyqt5/sip-4.19.25/sip.pyi /usr/lib/python3/dist-packages/PyQt5/sip.pyi
make[1]: 离开目录“/home/user/pyqt5/sip-4.19.25/siplib”
cp -f sipconfig.py /usr/lib/python3/dist-packages/sipconfig.py
cp -f /home/user/pyqt5/sip-4.19.25/sipdistutils.py /usr/lib/python3/dist-packages/sipdistutils.py
/usr/bin/python3 /home/user/pyqt5/sip-4.19.25/mk_distinfo.py "" /usr/lib/python3/dist-packages/PyQt5_sip-4.19.25.dist-info installed.txt

</code></pre> 
<h4 id="%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85PyQt5%E5%8C%85">4.3.4源码编译安装PyQt5包</h4> 
<p>源码编译PyQt5时时间较长，若无报错耐心等待即可。</p> 
<pre><code class="language-bash">(pyqt5) user@admin:~$ cd ./pyqt5/
(pyqt5) user@admin:~$ tar zxvf PyQt5-5.15.2.tar.gz
(pyqt5) user@admin:~/pyqt5$ cd ./PyQt5-5.15.2
(pyqt5) user@admin:~/pyqt5/PyQt5-5.15.2$ sudo python3 configure.py
Querying qmake about your Qt installation...
Determining the details of your Qt installation...
This is the GPL version of PyQt 5.15.2 (licensed under the GNU General Public
License) for Python 3.9.2 on linux.

Type 'L' to view the license.
Type 'yes' to accept the terms of the license.
Type 'no' to decline the terms of the license.

Do you accept the terms of the license? yes
...
(pyqt5) user@admin:~/pyqt5/PyQt5-5.15.2$ sudo make -j4
...
g++ -Wl,--version-script=pyrcc.exp -Wl,-O1 -shared -o libpyrcc.so sippyrccRCCResourceLibrary.o sippyrcccmodule.o rcc.o  -lQt5Xml -lQt5Core -lpthread  
cp -f libpyrcc.so pyrcc.so
make[1]: 离开目录“/home/user/pyqt5/PyQt5-5.15.2/pyrcc”
cd Qt/ &amp;&amp; ( test -e Makefile || /usr/lib/qt5/bin/qmake -o Makefile /home/user/pyqt5/PyQt5-5.15.2/Qt/Qt.pro ) &amp;&amp; make -f Makefile 
make[1]: 进入目录“/home/user/pyqt5/PyQt5-5.15.2/Qt”
gcc -c -pipe -O2 -fno-exceptions -Wall -W -D_REENTRANT -fPIC -DSIP_PROTECTED_IS_PUBLIC -Dprotected=public -DQT_NO_EXCEPTIONS -DQT_NO_DEBUG -DQT_PLUGIN -I. -I. -isystem /usr/include/python3.7m -I/usr/lib/x86_64-linux-gnu/qt5/mkspecs/linux-g++ -o sipQtcmodule.o sipQtcmodule.c
rm -f libQt.so
g++ -Wl,--version-script=Qt.exp -Wl,-O1 -shared -o libQt.so sipQtcmodule.o  -lpthread  
cp -f libQt.so Qt.so
make[1]: 离开目录“/home/user/pyqt5/PyQt5-5.15.2/Qt”
(pyqt5) user@admin:~/pyqt5/PyQt5-5.15.2$ sudo make install 
...
/usr/lib/qt5/bin/qmake -install qinstall /home/user/pyqt5/PyQt5-5.15.2/QtPrintSupport.pyi /usr/lib/python3/dist-packages/PyQt5/QtPrintSupport.pyi
/usr/lib/qt5/bin/qmake -install qinstall /home/user/pyqt5/PyQt5-5.15.2/QtSql.pyi /usr/lib/python3/dist-packages/PyQt5/QtSql.pyi
/usr/lib/qt5/bin/qmake -install qinstall /home/user/pyqt5/PyQt5-5.15.2/QtTest.pyi /usr/lib/python3/dist-packages/PyQt5/QtTest.pyi
/usr/lib/qt5/bin/qmake -install qinstall /home/user/pyqt5/PyQt5-5.15.2/QtWidgets.pyi /usr/lib/python3/dist-packages/PyQt5/QtWidgets.pyi
/usr/lib/qt5/bin/qmake -install qinstall /home/user/pyqt5/PyQt5-5.15.2/QtXml.pyi /usr/lib/python3/dist-packages/PyQt5/QtXml.pyi
/usr/lib/qt5/bin/qmake -install qinstall /home/user/pyqt5/PyQt5-5.15.2/QtDBus.pyi /usr/lib/python3/dist-packages/PyQt5/QtDBus.pyi
/usr/bin/python3 /home/user/pyqt5/PyQt5-5.15.2/mk_distinfo.py "" /usr/lib/python3/dist-packages/PyQt5-5.15.2.dist-info installed.txt
...

</code></pre> 
<h3 id="%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E4%B8%AD%E8%B0%83%E7%94%A8PyQt5%E7%9A%84%E9%85%8D%E7%BD%AE">4.4虚拟环境中调用PyQt5的配置</h3> 
<p>进入PyQt5源码编译安装的路径，打包后移动至虚拟环境的dist-packages下并解压</p> 
<pre><code class="language-bash">(pyqt5) user@admi:~/pyqt5/PyQt5-5.15.2$ cd /usr/lib/python3/dist-packages/
(pyqt5) user@admin:/usr/lib/python3/dist-packages$ sudo tar zcvf pyqt5.tar.gz ./PyQt5/
./PyQt5/
./PyQt5/pyrcc.so
./PyQt5/QtDBus.pyi
./PyQt5/QtSql.so
./PyQt5/pyrcc_main.py
./PyQt5/QtSql.pyi
./PyQt5/QtNetwork.pyi
./PyQt5/QtNetwork.so
./PyQt5/sip.so
./PyQt5/QtGui.so
./PyQt5/_QOpenGLFunctions_4_1_Core.so
./PyQt5/QtDBus.so
./PyQt5/QtWidgets.pyi
./PyQt5/QtTest.so
./PyQt5/QtOpenGL.so
./PyQt5/QtOpenGL.pyi
./PyQt5/pylupdate.so
./PyQt5/_QOpenGLFunctions_2_1.so
./PyQt5/uic/
./PyQt5/uic/properties.py
./PyQt5/uic/exceptions.py
./PyQt5/uic/Loader/
./PyQt5/uic/Loader/loader.py
./PyQt5/uic/Loader/qobjectcreator.py
./PyQt5/uic/Loader/__init__.py
./PyQt5/uic/pyuic.py
./PyQt5/uic/Compiler/
./PyQt5/uic/Compiler/misc.py
./PyQt5/uic/Compiler/qtproxies.py
./PyQt5/uic/Compiler/qobjectcreator.py
./PyQt5/uic/Compiler/indenter.py
./PyQt5/uic/Compiler/proxy_metaclass.py
./PyQt5/uic/Compiler/__init__.py
./PyQt5/uic/Compiler/compiler.py
./PyQt5/uic/port_v2/
./PyQt5/uic/port_v2/proxy_base.py
./PyQt5/uic/port_v2/string_io.py
./PyQt5/uic/port_v2/as_string.py
./PyQt5/uic/port_v2/__init__.py
./PyQt5/uic/port_v2/ascii_upper.py
./PyQt5/uic/driver.py
./PyQt5/uic/icon_cache.py
./PyQt5/uic/__init__.py
./PyQt5/uic/widget-plugins/
./PyQt5/uic/widget-plugins/qtcharts.py
./PyQt5/uic/widget-plugins/qaxcontainer.py
./PyQt5/uic/widget-plugins/qtwebkit.py
./PyQt5/uic/widget-plugins/qtquickwidgets.py
./PyQt5/uic/widget-plugins/qtwebenginewidgets.py
./PyQt5/uic/widget-plugins/qtprintsupport.py
./PyQt5/uic/widget-plugins/qscintilla.py
./PyQt5/uic/port_v3/
./PyQt5/uic/port_v3/proxy_base.py
./PyQt5/uic/port_v3/string_io.py
./PyQt5/uic/port_v3/as_string.py
./PyQt5/uic/port_v3/__init__.py
./PyQt5/uic/port_v3/ascii_upper.py
./PyQt5/uic/uiparser.py
./PyQt5/uic/objcreator.py
./PyQt5/_QOpenGLFunctions_2_0.so
./PyQt5/QtPrintSupport.so
./PyQt5/QtXml.so
./PyQt5/__init__.py
./PyQt5/sip.pyi
./PyQt5/pylupdate_main.py
./PyQt5/QtGui.pyi
./PyQt5/QtXml.pyi
./PyQt5/QtWidgets.so
./PyQt5/QtCore.pyi
./PyQt5/QtPrintSupport.pyi
./PyQt5/QtTest.pyi
./PyQt5/Qt.so
./PyQt5/QtCore.so
(pyqt5) user@admin:/usr/lib/python3/dist-packages$ sudo cp ./pyqt5.tar.gz /home/user/pyqt5/lib/python3.7/site-packages/
(pyqt5) user@admin:~$ cd /home/user/pyqt5/lib/python3.7/site-packages/
(pyqt5) user@admin:~/pyqt5/lib/python3.7/site-packages$ tar zxvf pyqt5.tar.gz
...
</code></pre> 
<h3 id="%E6%B5%8B%E8%AF%95PyQt5%E7%9A%84%E7%89%88%E6%9C%AC%E5%92%8C%E5%8A%9F%E8%83%BD">4.5测试PyQt5的版本和功能</h3> 
<pre><code class="language-bash">(pyqt5) user@admin:~$ python3
Python 3.7.12 (default, Sep 10 2021, 00:21:48) 
[GCC 7.5.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import PyQt5
&gt;&gt;&gt;

</code></pre> 
<h2 id="%E4%BA%94%E3%80%81opencv-python">五、opencv-python</h2> 
<p>当pyqt5和opencv-python版本不对应时，会出现以下情况</p> 
<pre><code class="language-bash">// 注意看最后一段报错信息
Got keys from plugin meta data ("xcb")
QFactoryLoader::QFactoryLoader() checking directory path "/usr/bin/platforms" ...
loaded library "/home/XXX/.local/lib/python3.8/site-packages/cv2/qt/plugins/platforms/libqxcb.so"
QObject::moveToThread: Current thread (0x2884760) is not the object's thread (0x5bf1580).
Cannot move to target thread (0x2884760)

qt.qpa.plugin: Could not load the Qt platform plugin "xcb" in "/home/XXX/.local/lib/python3.8/site-packages/cv2/qt/plugins" even though it was found.
This application failed to start because no Qt platform plugin could be initialized. Reinstalling the application may fix this problem.

Available platform plugins are: xcb, eglfs, linuxfb, minimal, minimalegl, offscreen, vnc, wayland-egl, wayland, wayland-xcomposite-egl, wayland-xcomposite-glx, webgl.
</code></pre> 
<p>这是由pyqt5和opencv-python版本冲突导致的，因为在opencv-python4.2.0以上的版本，opencv-python使用了qt库支持。除了安装opencv-python-headless(安装这个就不能使用cv2.imshow功能)，还可以将opencv将低版本到4.2.0以下：</p> 
<p>①卸载自己已经安装的opencv-python，因为pip安装的往往都是最新版。</p> 
<p>②找opencv的镜像文件的网站，进入后如下图所示，下载自己对应的版本。链接在此处<a href="https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/opencv-python/" rel="nofollow" title="Links for opencv-python">Links for opencv-python</a></p> 
<p></p> 
<p><img alt="" height="747" src="https://images2.imgbox.com/29/2f/IIIdN3yF_o.png" width="676"></p> 
<p>③下载后将该文件传输到树莓派中，然后进入待安装的虚拟环境，使用pip命令即可。</p> 
<p>当我按照上述三步完成后，发现依然报版本不对应的信息，重点来了，我去<span style="background-color:#fbd4d0;">/home/pi/miniconda3/envc/py39/lib/python3.9/site-packages/cv2</span>(本人的虚拟路径下的cv2包)包下查看，发现了仍然存在的qt文件，果断将该文件删除，然后问题得到解决。</p> 
<p></p> 
<h4></h4> 
<h4></h4> 
<p id="%E5%BC%95%E7%94%A8%E9%93%BE%E6%8E%A5%EF%BC%9Ahttps%3A%2F%2Fblog.csdn.net%2Fforeverey%2Farticle%2Fdetails%2F121410672"><br> 引用链接：</p> 
<p><a href="https://blog.csdn.net/Mo_ney_z/article/details/121335031" title="https://blog.csdn.net/Mo_ney_z/article/details/121335031">https://blog.csdn.net/Mo_ney_z/article/details/121335031</a></p> 
<p><a href="https://blog.csdn.net/anyivip/article/details/120379604" title="https://blog.csdn.net/anyivip/article/details/120379604">https://blog.csdn.net/anyivip/article/details/120379604</a></p> 
<p><a href="https://blog.csdn.net/liu246437/article/details/87723435" title="https://blog.csdn.net/liu246437/article/details/87723435">https://blog.csdn.net/liu246437/article/details/87723435</a></p> 
<p><a class="link-info" href="https://blog.csdn.net/qq_44595223/article/details/123905293" title="https://blog.csdn.net/qq_44595223/article/details/123905293">https://blog.csdn.net/qq_44595223/article/details/123905293</a></p> 
<p><a class="link-info" href="https://blog.csdn.net/mooncom/article/details/52683409" title="https://blog.csdn.net/mooncom/article/details/52683409">https://blog.csdn.net/mooncom/article/details/52683409</a><a href="https://blog.csdn.net/mooncom/article/details/52683409" title="https://blog.csdn.net/mooncom/article/details/52683409">https://blog.csdn.net/mooncom/article/details/52683409</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/443006210" rel="nofollow" title="https://zhuanlan.zhihu.com/p/443006210">https://zhuanlan.zhihu.com/p/443006210</a></p> 
<p><a href="https://blog.csdn.net/foreverey/article/details/121410672" title="https://blog.csdn.net/foreverey/article/details/121410672">https://blog.csdn.net/foreverey/article/details/121410672</a></p> 
<p><a href="https://blog.csdn.net/shuoliuchn/article/details/102534944" title="https://blog.csdn.net/shuoliuchn/article/details/102534944">https://blog.csdn.net/shuoliuchn/article/details/102534944</a></p> 
<p><a href="https://blog.csdn.net/weixin_44756050/article/details/104825269" title="https://blog.csdn.net/weixin_44756050/article/details/104825269">https://blog.csdn.net/weixin_44756050/article/details/104825269</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/69d26cf4ba6e58cea1798027aa0cfc34/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决：如何将pytorch的版本改为和cuda对应、如何使用笔记本电脑自带的NVIDIA使用GPU跑深度学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b24e65f72e3f627dcfdac3b45e92facc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Homebrew介绍和闭坑安装方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>