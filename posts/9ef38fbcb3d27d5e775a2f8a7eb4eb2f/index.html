<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux三剑客（grep、sed、awk） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux三剑客（grep、sed、awk）" />
<meta property="og:description" content="下面所说的是Linux中最重要的三个命令在业界被称为“三剑客”，它们是awk,sed,grep。
我们现在知道Linux下一切皆文件，对Linux的操作就是对文件的处理，那么怎么能更好的处理文件呢？这就要用到我们上面的三剑客命令。
在说这三个命令前我们要插入一个小插曲就是“正则表达式”。
一、正则表达式 所谓的正则表达式我个人理解就是正规的表示方法。他是用简单的方法来实现强大的功能，所以深受计算机爱好者的使用。
三剑客与正则表达式是什么关系呢？
我们可以这样理解，三剑客就是普通的命令，有的把他们叫做工具，在我看来都一样。而正则表达式就好比一个模版。三剑客能读懂这个模版。就这么简单。注意只有三剑客才能读懂这个模版哦！
现在他们的关系和功能都搞懂了，接下来我们就来认识下他们怎么结合的。正则表达式是一个模版，这个模版是由一些普通字符和一些元字符组成。普通字符包括大小写的字母和数字，而元字符则具有特殊的含义。具体如下
元字符
功能
意思
^
匹配行首
表示以某个字符开头
$
匹配行尾
表示以某个字符结尾
^$
空行的意思
表示空行的意思
.
匹配任意单个字符
表示任意一个字符
*
字符* 匹配0或多个此字符
表示重复的任意多个字符
\
屏蔽一个元字符的特殊含义
表示去掉有意义的元字符的含义
[]
匹配中括号内的字符
表示过滤括号内的字符
.*
代表任意多个字符
就是代表任意多个字符
lele\{n\}
用来匹配前面lele出现次数。n为次数
就是统计前面lele出现的次数
lele\{n,\}
含义同上，但次数最少为n
从功能就可以看出
lele\{n,m\}
义同上，但lele出现次数在n与m之间
从功能也可以看出
lele\{n,m\}
义同上，但lele出现次数在n与m之间
从功能也可以看出
三剑客的功能非常强大，但我们只需要掌握他们分别擅长的领域即可：grep擅长查找功能，sed擅长取行和替换。awk擅长取列。
二、grep 文本过滤(模式：pattern)工具，grep, egrep
grep [OPTIONS] PATTERN [FILE...] --color=auto 对匹配到的文本着色显示-v 显示不被pattern匹配到的行-i 忽略字符大小写-n 显示匹配的行号-c 统计匹配的行数-o 仅显示匹配到的字符串-q 静默模式，不输出任何信息-A # after, 后#行-B # before, 前#行-C # context, 前后各#行-e 实现多个选项间的逻辑or关系" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9ef38fbcb3d27d5e775a2f8a7eb4eb2f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-03T15:43:33+08:00" />
<meta property="article:modified_time" content="2018-10-03T15:43:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux三剑客（grep、sed、awk）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>    下面所说的是Linux中最重要的三个命令在业界被称为“<strong>三剑客</strong>”，它们是awk,sed,grep。</p> 
<p>    我们现在知道Linux下一切皆文件，对Linux的操作就是对文件的处理，那么怎么能更好的处理文件呢？这就要用到我们上面的三剑客命令。</p> 
<p>    在说这三个命令前我们要插入一个小插曲就是“正则表达式”。</p> 
<h4><span style="color:#3399ea;"><strong>一、正则表达式</strong></span></h4> 
<p>    所谓的正则表达式我个人理解就是正规的表示方法。他是用简单的方法来实现强大的功能，所以深受计算机爱好者的使用。</p> 
<p><strong>    <span style="color:#7c79e5;">三剑客与正则表达式是什么关系呢？</span></strong></p> 
<p>    我们可以这样理解，三剑客就是普通的命令，有的把他们叫做工具，在我看来都一样。而正则表达式就好比一个模版。三剑客能读懂这个模版。就这么简单。<strong>注意只有三剑客才能读懂这个模版哦！</strong></p> 
<p>    现在他们的关系和功能都搞懂了，接下来我们就来认识下他们怎么结合的。正则表达式是一个模版，这个模版是由一些普通<a href="http://baike.baidu.com/view/263416.htm" rel="nofollow">字符</a>和一些<a href="http://baike.baidu.com/view/1061241.htm" rel="nofollow">元字符</a>组成。普通字符包括大小写的字母和数字，而元字符则具有特殊的含义。具体如下</p> 
<table cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:top;"> <p><strong>元字符</strong></p> </td><td style="vertical-align:top;"> <p><strong>功能</strong></p> </td><td style="vertical-align:top;"> <p><strong>意思</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>^</strong></p> </td><td style="vertical-align:top;"> <p><strong>匹配行首</strong></p> </td><td style="vertical-align:top;"> <p><strong>表示以某个字符开头</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>   $</strong></p> </td><td style="vertical-align:top;"> <p><strong>匹配行尾</strong></p> </td><td style="vertical-align:top;"> <p><strong>表示以某个字符结尾</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>  ^$</strong></p> </td><td style="vertical-align:top;"> <p><strong>空行的意思</strong></p> </td><td style="vertical-align:top;"> <p><strong>表示空行的意思</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>   .</strong></p> </td><td style="vertical-align:top;"> <p><strong>匹配任意单个字符</strong></p> </td><td style="vertical-align:top;"> <p><strong>表示任意一个字符</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>*</strong></p> </td><td style="vertical-align:top;"> <p><strong>字符</strong><strong>*   </strong><strong>匹配</strong><strong>0</strong><strong>或多个此字符</strong></p> </td><td style="vertical-align:top;"> <p><strong>表示重复的任意多个字符</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>   \</strong></p> </td><td style="vertical-align:top;"> <p><strong>屏蔽一个元字符的特殊含义</strong></p> </td><td style="vertical-align:top;"> <p><strong>表示去掉有意义的元字符的含义</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>[]</strong></p> </td><td style="vertical-align:top;"> <p><strong>匹配中括号内的字符</strong></p> </td><td style="vertical-align:top;"> <p><strong>表示过滤括号内的字符</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>.*</strong></p> </td><td style="vertical-align:top;"> <p><strong>代表任意多个字符</strong></p> </td><td style="vertical-align:top;"> <p><strong>就是代表任意多个字符</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>lele\{n\}</strong></p> </td><td style="vertical-align:top;"> <p><strong>用来匹配前面</strong><strong>lele</strong><strong>出现次数。</strong><strong>n</strong><strong>为次数</strong></p> </td><td style="vertical-align:top;"> <p><strong>就是统计前面</strong><strong>lele</strong><strong>出现的次数</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>lele\{n,\}</strong></p> </td><td style="vertical-align:top;"> <p><strong>含义同上，但次数最少为</strong><strong>n</strong></p> </td><td style="vertical-align:top;"> <p><strong>从功能就可以看出</strong></p> </td></tr><tr><td style="vertical-align:top;"> <p><strong>lele\{n,m\}</strong></p> </td><td style="vertical-align:top;"> <p><strong>义同上，但</strong><strong>lele</strong><strong>出现次数在</strong><strong>n</strong><strong>与</strong><strong>m</strong><strong>之间</strong></p> </td><td style="vertical-align:top;"> <p><strong>从功能也可以看出</strong></p> </td></tr></tbody></table> 
<table cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:top;"> <p><strong>lele\{n,m\}</strong></p> </td><td style="vertical-align:top;"> <p><strong>义同上，但</strong><strong>lele</strong><strong>出现次数在</strong><strong>n</strong><strong>与</strong><strong>m</strong><strong>之间</strong></p> </td><td style="vertical-align:top;"> <p><strong>从功能也可以看出</strong></p> </td></tr></tbody></table> 
<p>三剑客的功能非常强大，但我们只需要掌握他们分别擅长的领域即可：<span style="color:#f33b45;"><strong>grep</strong><strong>擅长查找功能，</strong><strong>sed</strong><strong>擅长取行和替换。</strong><strong>awk</strong><strong>擅长取列。</strong></span></p> 
<h4><span style="color:#3399ea;"><strong>二、grep</strong></span></h4> 
<p>文本过滤(模式：pattern)工具，grep, egrep</p> 
<h4 id="grep-options-pattern-file"><a name="t1"></a><code>grep [OPTIONS] PATTERN [FILE...]</code></h4> 
<ul><li><code>--color=auto</code> 对匹配到的文本着色显示</li><li><span style="color:#f33b45;"><code>-v</code> 显示不被pattern匹配到的行</span></li><li><code>-i</code> 忽略字符大小写</li><li><span style="color:#f33b45;"><code>-n</code> 显示匹配的行号</span></li><li><code>-c</code> 统计匹配的行数</li><li><code>-o</code> 仅显示匹配到的字符串</li><li><code>-q</code> 静默模式，不输出任何信息</li><li><code>-A #</code> after, 后#行</li><li><code>-B #</code> before, 前#行</li><li><code>-C #</code> context, 前后各#行</li><li><code>-e</code> 实现多个选项间的逻辑or关系<br><code>grep –e ‘cat ’ -e ‘dog’ file</code></li><li><code>-w</code> 匹配整个单词</li><li><code>-E</code> 使用ERE,相当于egrep</li><li><code>-F</code> 相当于fgrep，不支持正则表达式</li></ul> 
<p>举例子：</p> 
<p><strong>1、查找文件内容包含root的行数</strong></p> 
<p><img alt="" class="has" height="60" src="https://images2.imgbox.com/10/a7/qKCMshKW_o.png" width="413"></p> 
<p><strong>2、查找文件内容不包含root的行</strong></p> 
<p><img alt="" class="has" height="155" src="https://images2.imgbox.com/82/84/Af6SRFYr_o.png" width="410"></p> 
<p><strong>3、查找以s开头的行</strong></p> 
<p><img alt="" class="has" height="138" src="https://images2.imgbox.com/76/47/v6jaTG6Y_o.png" width="508"></p> 
<p><strong>4、查找以n结尾的行</strong></p> 
<p><img alt="" class="has" height="203" src="https://images2.imgbox.com/d1/d8/rp2eM6B5_o.png" width="437"></p> 
<h4><strong><span style="color:#3399ea;">三、sed</span></strong></h4> 
<p>sed是一种流编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。然后读入下行，执行下一个循环。如果没有使诸如‘D’ 的特殊命令，那会在两个循环之间清空模式空间，但不会清空保留空间。这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。</p> 
<h4 id="sed-option-script-inputfile"><a name="t3"></a><code>sed [option]... 'script' inputfile</code></h4> 
<ol><li>选项 
  <ul><li><span style="color:#f33b45;"><code>-n</code> 不输出模式空间内容到屏幕，即不自动打印</span></li><li><code>-e</code> 多点编辑</li><li><code>-f</code> /PATH/SCRIPT_FILE: 从指定文件中读取编辑脚本</li><li><code>-r</code> 支持使用扩展正则表达式</li><li>-i 直接编辑文件</li><li><code>-i.bak</code> 备份文件并原处编辑</li></ul></li><li>script 地址定界 
  <ol><li>不给地址：对全文进行处理</li><li>单地址：<br><code>#</code>: 指定的行，$：最后一行<br><code>/pattern/</code>：被此处模式所能够匹配到的每一行</li><li>地址范围：<br><code>#,#</code><br><code>#,+#</code><br><code>/pat1/,/pat2/</code><br> `#,/pat1/</li><li>~：步进<br> 1~2 奇数行<br> 2~2 偶数行</li></ol></li><li>编辑命令： 
  <ul><li><code>d</code> 删除模式空间匹配的行，并立即启用下一轮循环</li><li><span style="color:#f33b45;"><code>p</code> 打印当前模式空间内容，追加到默认输出之后</span></li><li><code>a [\]text1</code> 在指定行后面追加文本,支持使用\n实现多行追加</li><li><code>i [\]text</code> 在行前面插入文本</li><li><code>c [\]text</code> 替换行为单行或多行文本</li><li><code>w /path/somefile</code> 保存模式匹配的行至指定文件</li><li><code>r /path/somefile</code> 读取指定文件的文本至模式空间中匹配到的行后</li><li><code>=</code> 为模式空间中的行打印行号</li><li><code>!</code> 模式空间中匹配行取反处理</li><li><span style="color:#f33b45;">s///：查找替换,支持使用其它分隔符，s@@@，s###</span><br> 替换标记： 
    <ul><li><span style="color:#f33b45;"><code>g</code> 行内全局替换</span></li><li><code>p</code> 显示替换成功的行</li><li><code>w /PATH/TO/SOMEFILE</code> 将替换成功的行保存至文件中</li></ul></li></ul></li></ol> 
<p><strong>举例子：</strong></p> 
<p><strong>1、打印出文件第二行</strong></p> 
<p><img alt="" class="has" height="48" src="https://images2.imgbox.com/6c/3a/KsMOPk2U_o.png" width="428"></p> 
<p><strong>2、打印出2-5行的内容</strong></p> 
<p><img alt="" class="has" height="84" src="https://images2.imgbox.com/3b/3e/SA3h0SIG_o.png" width="360"></p> 
<p><strong>3、将文件中的root全部替换为abc</strong></p> 
<p><img alt="" class="has" height="177" src="https://images2.imgbox.com/a8/e5/EtbQx9H5_o.png" width="431"></p> 
<p>直接修改读取的文件内容，而不是输出到终端。<br> s ：取代，可以直接进行取代的工作。</p> 
<p>g: 是全局的意思。其中#是格式符，他也可以是@或者别的/。</p> 
<p>Sed替换格式是：sed -i ‘s/要替换的内容/替换成的内容/g' 文件名。</p> 
<h4><strong><span style="color:#3399ea;">四、awk</span></strong></h4> 
<p>报告生成器，格式化文本输出,有多种版本：New awk（nawk），GNU awk（ gawk）</p> 
<h4 id="awk-options-program-file"><a name="t5"></a><code>awk [options] 'program' file…</code></h4> 
<ol><li>program:pattern{action statements;..} 
  <ol><li>pattern部分决定动作语句何时触发及触发事件<br> BEGIN,END</li><li>action statements对数据进行处理，放在{}内指明<br> print, printf</li></ol></li><li>选项：<br><span style="color:#f33b45;"><code>-F</code> 指明输入时用到的字段分隔符</span><br><code>-v var=value</code> 自定义变量</li><li>分割符、域和记录<br> awk执行时，由分隔符分隔的字段（域）标记1,1,2..n称为域标识，n称为域标识，0为所有域。<br> 省略action，则默认执行 print $0 的操作。</li><li> <p>变量<br> FS:输入字段分隔符；OFS：输出字段分隔符；RS：输入记录分隔符；ORS：输出记录分隔符；NF：字段数量；NR:记录号；NFR：各文件分别计数，记录号。FILENAME：当前文件名；ARGC：命令行的参数；ARGV：数组，保存的是命令行所给定的各参数。</p> 
  <blockquote> 
   <p>注意：以上都是内置变量，在引用时不需要前面加$，每新建一个变量，都需要加个-v,与变量名之间有无空格都可以，变量可以在引用之后再声明，但那一行的输出会输出空行。</p> 
  </blockquote> </li><li> <p>printf命令<br><code>printf “FORMAT” , item1, item2, ...</code> 不会自动换行，FORMAT中需要分别为后面每个item指定格式符。</p> 
  <ul><li>格式符</li></ul> 
  <table><thead><tr><th>格式符</th><th>item表现形式</th></tr></thead><tbody><tr><td>%c</td><td>显示字符的ASCII码</td></tr><tr><td>%d, %i</td><td>显示十进制整数</td></tr><tr><td>%e, %E</td><td>显示科学计数法数值</td></tr><tr><td>%f</td><td>显示为浮点数</td></tr><tr><td>%g, %G</td><td>以科学计数法或浮点形式显示数值</td></tr><tr><td>%s</td><td>显示字符串</td></tr><tr><td>%u</td><td>无符号整数</td></tr><tr><td>%%</td><td>显示%自身</td></tr></tbody></table> 
  <ul><li>修饰符</li></ul> 
  <table><thead><tr><th>格式符</th><th>item表现形式</th></tr></thead><tbody><tr><td>#[.#]</td><td>第一个数字控制显示的宽度；第二个#表示小数点后精度，%3.1f</td></tr><tr><td>-</td><td>左对齐（默认右对齐） %-15s</td></tr><tr><td>+</td><td>显示数值的正负符号 %+d</td></tr></tbody></table></li><li> <p>操作符</p> 
  <ul><li>算术操作符：x+y, x-y, x*y, x/y, x^y, x%y<br> -x: 转换为负数<br> +x: 转换为数值</li><li>比较操作符：==, !=, &gt;, &gt;=, &lt;, &lt;=</li><li>模式匹配符：~：左边是否和右边匹配包含 !~：是否不匹配</li><li>逻辑操作符：与&amp;&amp;，或||，非!</li><li>函数调用：<code>function_name(argu1, argu2, ...)</code></li><li>条件表达式（三目表达式）：<code>selector?if-true-expression:if-false-expression</code></li></ul></li><li>PATTERN:根据pattern条件，过滤匹配的行，再做处理 
  <ol><li>如果未指定：空模式，匹配每一行</li><li><code>/regular expression/</code>：仅处理能够模式匹配到的行，需要用/ /括起来</li><li>relational expression: 关系表达式，结果为“真”才会被处理</li><li>line ranges：行范围 startline,endline：<code>/pat1/,/pat2/</code>不支持直接给出数字格式</li><li>BEGIN/END模式</li></ol></li><li>awk控制语句 
  <ul><li><code>{ statements;… }</code> 组合语句</li><li><code>if(condition) {statements;…}</code></li><li><code>if(condition) {statements;…} else {statements;…}</code></li><li><code>while(conditon) {statments;…}</code></li><li><code>do {statements;…} while(condition)</code></li><li><code>for(expr1;expr2;expr3) {statements;…}</code></li><li><code>break</code></li><li><code>continue</code></li><li><code>delete array[index]</code></li><li><code>delete array</code></li><li><code>exit</code></li></ul></li></ol> 
<blockquote> 
 <p><code>awk [-F|-v] '行数筛选{XXX;XXX;printf “”,XXX,XXX}'</code></p> 
</blockquote> 
<p><strong>举例子：</strong></p> 
<p><strong>1、打印文件第一列：</strong></p> 
<p><img alt="" class="has" height="225" src="https://images2.imgbox.com/a1/4e/IJMdmI9Q_o.png" width="478"></p> 
<p>这里的分隔符是冒号 ，然后print打印第一列</p> 
<p><strong>2、输出字段1,3,6，以制表符作为分隔符</strong></p> 
<p><img alt="" class="has" height="173" src="https://images2.imgbox.com/dd/ed/n3n3lyFz_o.png" width="624"></p> 
<p> </p> 
<p> </p> 
<p>awk详解：<a href="https://www.cnblogs.com/xudong-bupt/p/3721210.html" rel="nofollow">https://www.cnblogs.com/xudong-bupt/p/3721210.html</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/19f40d0ddb1aa172fa879eb233409021/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MATLAB图像处理之图像边缘提取</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5c708815fb1e5523fc7acdc960ebe707/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mysql安装与设置用户名、密码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>