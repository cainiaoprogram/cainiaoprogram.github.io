<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AlarmManager详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="AlarmManager详解" />
<meta property="og:description" content="AlarmManager的特点 1.AlarmManager是一种系统级别的定时提示服务，这允许app在一个给定的时间段上执行某一段代码。这可以运行在app的生命周期之外。
2.一旦设置AlarmManager，它将一直调用，即使你的应用程序是不运行，甚至当你的设备是在睡眠。
3.定时任务可以唤醒你的设备，但这会消耗更多的电池。因此，你必须小心那些执行频繁的定时任务。定时任务应该尽可能地设置低的频率。
4.一旦设置了AlarmManager，这将执行直到明确的调用停止方法或直到设备重启。
5.例如，一个AlarmManager用于启动长时间运行的操作，如从服务器每天一次同步数据。
6.AlarmManager允许你在给定的时间处理Intent
7.AlarmManager可以与broadcast receiver一起使用，以启动一个service来执行网络操作。
8.AlarmManager 与Timer，TimerTask不同，后者都执行在应用程序生命周期。
设置定时任务 type:闹钟类型，有四个可选值
1.ELAPSED_REALTIME：以手机开机的时间为基准
2.ELAPSED_REALTIME_WAKEUP：以手机开机的时间为基准，并且可以在休眠时发出广播
3.RTC：以UTC标准时间为基准
4.RTC_WAKEUP：以UTC标准时间为基准，并且可以在休眠时发出广播。这种方式是最常见的形式。
下面写一个例子，使用RTC类型。该应用程序使用一个activity，包含三个按钮。一个按钮是为启动定时服务，另一个是取消预定服务。 第三个按钮是在指定的日历时间开始闹钟。例如，如果你设置为你的生日提醒。它将调用在10:30，并将在每30分钟后重复。
下面看一下布局文件：
&lt;RelativeLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; xmlns:tools=&#34;http://schemas.android.com/tools&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:paddingBottom=&#34;@dimen/activity_vertical_margin&#34; android:paddingLeft=&#34;@dimen/activity_horizontal_margin&#34; android:paddingRight=&#34;@dimen/activity_horizontal_margin&#34; android:paddingTop=&#34;@dimen/activity_vertical_margin&#34; tools:context=&#34;.MyActivity&#34;&gt; &lt;TextView android:id=&#34;@&#43;id/textView&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:layout_marginBottom=&#34;20dp&#34; android:text=&#34;@string/hint&#34; android:textAppearance=&#34;?android:attr/textAppearanceLarge&#34; /&gt; &lt;Button android:id=&#34;@&#43;id/startAlarm&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:layout_alignParentLeft=&#34;true&#34; android:layout_alignParentStart=&#34;true&#34; android:layout_below=&#34;@&#43;id/textView&#34; android:layout_marginBottom=&#34;20dp&#34; android:text=&#34;Start Alarm Service&#34; /&gt; &lt;Button android:id=&#34;@&#43;id/stopAlarm&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:layout_below=&#34;@&#43;id/startAlarm&#34; android:layout_marginBottom=&#34;20dp&#34; android:text=&#34;Stop Alarm&#34; /&gt; &lt;Button android:id=&#34;@&#43;id/stopAlarmAt10&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:layout_below=&#34;@&#43;id/stopAlarm&#34; android:text=&#34;Stop Alarm at 10:30&#34; /&gt; &lt;/RelativeLayout&gt; 定义定时BroadcastReceiver 在这个例子中，我们将与broadcast receiver关联。定时服务将在预定时间调用这个接收器。为了简单起见，每一次的任务我们只是向用户 展示了一个toast。您可以编写您的逻辑来启动服务或下载任务。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d6d02f2681a668f279f2f70af8dc2522/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-04-17T18:46:07+08:00" />
<meta property="article:modified_time" content="2017-04-17T18:46:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AlarmManager详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 id="alarmmanager" style="font-family:'Open Sans','lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.5; color:rgb(49,49,49); margin-top:1.5rem; font-size:0.8rem; orphans:2; widows:2"> AlarmManager的特点</h4> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 1.AlarmManager是一种系统级别的定时提示服务，这允许app在一个给定的时间段上执行某一段代码。这可以运行在app的生命周期之外。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 2.一旦设置AlarmManager，它将一直调用，即使你的应用程序是不运行，甚至当你的设备是在睡眠。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 3.定时任务可以唤醒你的设备，但这会消耗更多的电池。因此，你必须小心那些执行频繁的定时任务。定时任务应该尽可能地设置低的频率。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 4.一旦设置了AlarmManager，这将执行直到明确的调用停止方法或直到设备重启。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 5.例如，一个AlarmManager用于启动长时间运行的操作，如从服务器每天一次同步数据。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 6.AlarmManager允许你在给定的时间处理Intent</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 7.AlarmManager可以与broadcast receiver一起使用，以启动一个service来执行网络操作。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 8.AlarmManager 与Timer，TimerTask不同，后者都执行在应用程序生命周期。</p> 
<h4 id="section" style="font-family:'Open Sans','lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.5; color:rgb(49,49,49); margin-top:1.5rem; font-size:0.8rem; orphans:2; widows:2"> 设置定时任务</h4> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> type:闹钟类型，有四个可选值</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 1.ELAPSED_REALTIME：以手机开机的时间为基准</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 2.ELAPSED_REALTIME_WAKEUP：以手机开机的时间为基准，并且可以在休眠时发出广播</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 3.RTC：以UTC标准时间为基准</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 4.RTC_WAKEUP：以UTC标准时间为基准，并且可以在休眠时发出广播。这种方式是最常见的形式。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 下面写一个例子，使用RTC类型。该应用程序使用一个activity，包含三个按钮。一个按钮是为启动定时服务，另一个是取消预定服务。 第三个按钮是在指定的日历时间开始闹钟。例如，如果你设置为你的生日提醒。它将调用在10:30，并将在每30分钟后重复。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 下面看一下布局文件：</p> 
<pre style="font-family:Menlo,Monaco,'Courier New',monospace; margin-top:0px; margin-bottom:0px; padding:1rem; font-size:0.6rem; line-height:1.4; white-space:pre-wrap; word-break:break-all; word-wrap:break-word; background-color:rgb(29,30,25)"><code class="language-xml" style="font-family:Menlo,Monaco,'Courier New',monospace; padding:0px; color:inherit; background-color:transparent"><span class="nt" style="color:rgb(249,38,114)">&lt;RelativeLayout</span> <span class="na" style="color:rgb(166,226,46)">xmlns:android=</span><span class="s" style="color:rgb(230,219,116)">"http://schemas.android.com/apk/res/android"</span>
    <span class="na" style="color:rgb(166,226,46)">xmlns:tools=</span><span class="s" style="color:rgb(230,219,116)">"http://schemas.android.com/tools"</span>
    <span class="na" style="color:rgb(166,226,46)">android:layout_width=</span><span class="s" style="color:rgb(230,219,116)">"match_parent"</span>
    <span class="na" style="color:rgb(166,226,46)">android:layout_height=</span><span class="s" style="color:rgb(230,219,116)">"match_parent"</span>
    <span class="na" style="color:rgb(166,226,46)">android:paddingBottom=</span><span class="s" style="color:rgb(230,219,116)">"@dimen/activity_vertical_margin"</span>
    <span class="na" style="color:rgb(166,226,46)">android:paddingLeft=</span><span class="s" style="color:rgb(230,219,116)">"@dimen/activity_horizontal_margin"</span>
    <span class="na" style="color:rgb(166,226,46)">android:paddingRight=</span><span class="s" style="color:rgb(230,219,116)">"@dimen/activity_horizontal_margin"</span>
    <span class="na" style="color:rgb(166,226,46)">android:paddingTop=</span><span class="s" style="color:rgb(230,219,116)">"@dimen/activity_vertical_margin"</span>
    <span class="na" style="color:rgb(166,226,46)">tools:context=</span><span class="s" style="color:rgb(230,219,116)">".MyActivity"</span><span class="nt" style="color:rgb(249,38,114)">&gt;</span>
    <span class="nt" style="color:rgb(249,38,114)">&lt;TextView</span>
        <span class="na" style="color:rgb(166,226,46)">android:id=</span><span class="s" style="color:rgb(230,219,116)">"@+id/textView"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_width=</span><span class="s" style="color:rgb(230,219,116)">"wrap_content"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_height=</span><span class="s" style="color:rgb(230,219,116)">"wrap_content"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_marginBottom=</span><span class="s" style="color:rgb(230,219,116)">"20dp"</span>
        <span class="na" style="color:rgb(166,226,46)">android:text=</span><span class="s" style="color:rgb(230,219,116)">"@string/hint"</span>
        <span class="na" style="color:rgb(166,226,46)">android:textAppearance=</span><span class="s" style="color:rgb(230,219,116)">"?android:attr/textAppearanceLarge"</span> <span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
    <span class="nt" style="color:rgb(249,38,114)">&lt;Button</span>
        <span class="na" style="color:rgb(166,226,46)">android:id=</span><span class="s" style="color:rgb(230,219,116)">"@+id/startAlarm"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_width=</span><span class="s" style="color:rgb(230,219,116)">"match_parent"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_height=</span><span class="s" style="color:rgb(230,219,116)">"wrap_content"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_alignParentLeft=</span><span class="s" style="color:rgb(230,219,116)">"true"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_alignParentStart=</span><span class="s" style="color:rgb(230,219,116)">"true"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_below=</span><span class="s" style="color:rgb(230,219,116)">"@+id/textView"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_marginBottom=</span><span class="s" style="color:rgb(230,219,116)">"20dp"</span>
        <span class="na" style="color:rgb(166,226,46)">android:text=</span><span class="s" style="color:rgb(230,219,116)">"Start Alarm Service"</span> <span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
    <span class="nt" style="color:rgb(249,38,114)">&lt;Button</span>
        <span class="na" style="color:rgb(166,226,46)">android:id=</span><span class="s" style="color:rgb(230,219,116)">"@+id/stopAlarm"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_width=</span><span class="s" style="color:rgb(230,219,116)">"match_parent"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_height=</span><span class="s" style="color:rgb(230,219,116)">"wrap_content"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_below=</span><span class="s" style="color:rgb(230,219,116)">"@+id/startAlarm"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_marginBottom=</span><span class="s" style="color:rgb(230,219,116)">"20dp"</span>
        <span class="na" style="color:rgb(166,226,46)">android:text=</span><span class="s" style="color:rgb(230,219,116)">"Stop Alarm"</span> <span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
    <span class="nt" style="color:rgb(249,38,114)">&lt;Button</span>
        <span class="na" style="color:rgb(166,226,46)">android:id=</span><span class="s" style="color:rgb(230,219,116)">"@+id/stopAlarmAt10"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_width=</span><span class="s" style="color:rgb(230,219,116)">"match_parent"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_height=</span><span class="s" style="color:rgb(230,219,116)">"wrap_content"</span>
        <span class="na" style="color:rgb(166,226,46)">android:layout_below=</span><span class="s" style="color:rgb(230,219,116)">"@+id/stopAlarm"</span>
        <span class="na" style="color:rgb(166,226,46)">android:text=</span><span class="s" style="color:rgb(230,219,116)">"Stop Alarm at 10:30"</span> <span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
<span class="nt" style="color:rgb(249,38,114)">&lt;/RelativeLayout&gt;</span>
    </code></pre> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> <img src="https://images2.imgbox.com/06/46/x1dP78Y8_o.png" alt="" style="display:block; margin:0px 0px 1rem; width:668px"></p> 
<h4 id="broadcastreceiver" style="font-family:'Open Sans','lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.5; color:rgb(49,49,49); margin-top:1.5rem; font-size:0.8rem; orphans:2; widows:2"> 定义定时BroadcastReceiver</h4> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 在这个例子中，我们将与broadcast receiver关联。定时服务将在预定时间调用这个接收器。为了简单起见，每一次的任务我们只是向用户 展示了一个toast。您可以编写您的逻辑来启动服务或下载任务。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 如果你的闹钟有执行网络任务，可用在broadcast的onRecieve()方法中start下载service。</p> 
<pre style="font-family:Menlo,Monaco,'Courier New',monospace; margin-top:0px; margin-bottom:0px; padding:1rem; font-size:0.6rem; line-height:1.4; white-space:pre-wrap; word-break:break-all; word-wrap:break-word; background-color:rgb(29,30,25)"><code class="language-java" style="font-family:Menlo,Monaco,'Courier New',monospace; padding:0px; color:inherit; background-color:transparent"><span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.BroadcastReceiver</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.Context</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.Intent</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.widget.Toast</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kd" style="color:rgb(102,217,239)">class</span> <span class="nc" style="color:rgb(166,226,46)">AlarmReceiver</span> <span class="kd" style="color:rgb(102,217,239)">extends</span> <span class="n" style="color:rgb(248,248,242)">BroadcastReceiver</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
    <span class="nd" style="color:rgb(166,226,46)">@Override</span>
    <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">onReceive</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Context</span> <span class="n" style="color:rgb(248,248,242)">context</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">Intent</span> <span class="n" style="color:rgb(248,248,242)">intent</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
        <span class="c1" style="color:rgb(117,113,94)">// For our recurring task, we'll just display a message</span>
        <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">makeText</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">context</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="s" style="color:rgb(230,219,116)">"I'm running"</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">LENGTH_SHORT</span><span class="o" style="color:rgb(249,38,114)">).</span><span class="na" style="color:rgb(166,226,46)">show</span><span class="o" style="color:rgb(249,38,114)">();</span>
    <span class="o" style="color:rgb(249,38,114)">}</span>
<span class="o" style="color:rgb(249,38,114)">}</span>
    </code></pre> 
<h4 id="activity" style="font-family:'Open Sans','lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.5; color:rgb(49,49,49); margin-top:1.5rem; font-size:0.8rem; orphans:2; widows:2"> 在activity中开始和停止任务</h4> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 在上述2个步骤中，我们已经定义了activity布局和broadcast receiver。让我们看看MainActivity.java文件。在MyActivity类， 我们定义了三个简单的方法start()，stop()和startat10()。start()方法设置闹钟，cancel()方法取消预定的任务， startAt10()方法将在10:30启动闹钟，并且固定30分钟间隔再次启动。</p> 
<pre style="font-family:Menlo,Monaco,'Courier New',monospace; margin-top:0px; margin-bottom:0px; padding:1rem; font-size:0.6rem; line-height:1.4; white-space:pre-wrap; word-break:break-all; word-wrap:break-word; background-color:rgb(29,30,25)"><code class="language-java" style="font-family:Menlo,Monaco,'Courier New',monospace; padding:0px; color:inherit; background-color:transparent"><span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.app.Activity</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.app.AlarmManager</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.app.PendingIntent</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.Context</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.Intent</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.os.Bundle</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.view.View</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.widget.Toast</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">java.util.Calendar</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kd" style="color:rgb(102,217,239)">class</span> <span class="nc" style="color:rgb(166,226,46)">MyActivity</span> <span class="kd" style="color:rgb(102,217,239)">extends</span> <span class="n" style="color:rgb(248,248,242)">Activity</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
    <span class="kd" style="color:rgb(102,217,239)">private</span> <span class="n" style="color:rgb(248,248,242)">PendingIntent</span> <span class="n" style="color:rgb(248,248,242)">pendingIntent</span><span class="o" style="color:rgb(249,38,114)">;</span>
    <span class="nd" style="color:rgb(166,226,46)">@Override</span>
    <span class="kd" style="color:rgb(102,217,239)">protected</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">onCreate</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Bundle</span> <span class="n" style="color:rgb(248,248,242)">savedInstanceState</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
        <span class="kd" style="color:rgb(102,217,239)">super</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">onCreate</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">savedInstanceState</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="n" style="color:rgb(248,248,242)">setContentView</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">R</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">layout</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">activity_my</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="cm" style="color:rgb(117,113,94)">/* Retrieve a PendingIntent that will perform a broadcast */</span>
        <span class="n" style="color:rgb(248,248,242)">Intent</span> <span class="n" style="color:rgb(248,248,242)">alarmIntent</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="k" style="color:rgb(102,217,239)">new</span> <span class="n" style="color:rgb(248,248,242)">Intent</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">MyActivity</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">this</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">AlarmReceiver</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">class</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="n" style="color:rgb(248,248,242)">pendingIntent</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="n" style="color:rgb(248,248,242)">PendingIntent</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">getBroadcast</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">MyActivity</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">this</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="mi" style="color:rgb(174,129,255)">0</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">alarmIntent</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="mi" style="color:rgb(174,129,255)">0</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="n" style="color:rgb(248,248,242)">findViewById</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">R</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">id</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">startAlarm</span><span class="o" style="color:rgb(249,38,114)">).</span><span class="na" style="color:rgb(166,226,46)">setOnClickListener</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="k" style="color:rgb(102,217,239)">new</span> <span class="n" style="color:rgb(248,248,242)">View</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">OnClickListener</span><span class="o" style="color:rgb(249,38,114)">()</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
            <span class="nd" style="color:rgb(166,226,46)">@Override</span>
            <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">onClick</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">View</span> <span class="n" style="color:rgb(248,248,242)">v</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
                <span class="n" style="color:rgb(248,248,242)">start</span><span class="o" style="color:rgb(249,38,114)">();</span>
            <span class="o" style="color:rgb(249,38,114)">}</span>
        <span class="o" style="color:rgb(249,38,114)">});</span>
        <span class="n" style="color:rgb(248,248,242)">findViewById</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">R</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">id</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">stopAlarm</span><span class="o" style="color:rgb(249,38,114)">).</span><span class="na" style="color:rgb(166,226,46)">setOnClickListener</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="k" style="color:rgb(102,217,239)">new</span> <span class="n" style="color:rgb(248,248,242)">View</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">OnClickListener</span><span class="o" style="color:rgb(249,38,114)">()</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
            <span class="nd" style="color:rgb(166,226,46)">@Override</span>
            <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">onClick</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">View</span> <span class="n" style="color:rgb(248,248,242)">v</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
                <span class="n" style="color:rgb(248,248,242)">cancel</span><span class="o" style="color:rgb(249,38,114)">();</span>
            <span class="o" style="color:rgb(249,38,114)">}</span>
        <span class="o" style="color:rgb(249,38,114)">});</span>
        <span class="n" style="color:rgb(248,248,242)">findViewById</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">R</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">id</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">stopAlarmAt10</span><span class="o" style="color:rgb(249,38,114)">).</span><span class="na" style="color:rgb(166,226,46)">setOnClickListener</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="k" style="color:rgb(102,217,239)">new</span> <span class="n" style="color:rgb(248,248,242)">View</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">OnClickListener</span><span class="o" style="color:rgb(249,38,114)">()</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
            <span class="nd" style="color:rgb(166,226,46)">@Override</span>
            <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">onClick</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">View</span> <span class="n" style="color:rgb(248,248,242)">v</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
                <span class="n" style="color:rgb(248,248,242)">startAt10</span><span class="o" style="color:rgb(249,38,114)">();</span>
            <span class="o" style="color:rgb(249,38,114)">}</span>
        <span class="o" style="color:rgb(249,38,114)">});</span>
    <span class="o" style="color:rgb(249,38,114)">}</span>
    <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">start</span><span class="o" style="color:rgb(249,38,114)">()</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
        <span class="n" style="color:rgb(248,248,242)">AlarmManager</span> <span class="n" style="color:rgb(248,248,242)">manager</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">AlarmManager</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="n" style="color:rgb(248,248,242)">getSystemService</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Context</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">ALARM_SERVICE</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="kt" style="color:rgb(102,217,239)">int</span> <span class="n" style="color:rgb(248,248,242)">interval</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="mi" style="color:rgb(174,129,255)">8000</span><span class="o" style="color:rgb(249,38,114)">;</span>
        <span class="n" style="color:rgb(248,248,242)">manager</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">setInexactRepeating</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">AlarmManager</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">RTC_WAKEUP</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">System</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">currentTimeMillis</span><span class="o" style="color:rgb(249,38,114)">(),</span> <span class="n" style="color:rgb(248,248,242)">interval</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">pendingIntent</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">makeText</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="k" style="color:rgb(102,217,239)">this</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="s" style="color:rgb(230,219,116)">"Alarm Set"</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">LENGTH_SHORT</span><span class="o" style="color:rgb(249,38,114)">).</span><span class="na" style="color:rgb(166,226,46)">show</span><span class="o" style="color:rgb(249,38,114)">();</span>
    <span class="o" style="color:rgb(249,38,114)">}</span>
    <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">cancel</span><span class="o" style="color:rgb(249,38,114)">()</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
        <span class="n" style="color:rgb(248,248,242)">AlarmManager</span> <span class="n" style="color:rgb(248,248,242)">manager</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">AlarmManager</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="n" style="color:rgb(248,248,242)">getSystemService</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Context</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">ALARM_SERVICE</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="n" style="color:rgb(248,248,242)">manager</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">cancel</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">pendingIntent</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">makeText</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="k" style="color:rgb(102,217,239)">this</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="s" style="color:rgb(230,219,116)">"Alarm Canceled"</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">LENGTH_SHORT</span><span class="o" style="color:rgb(249,38,114)">).</span><span class="na" style="color:rgb(166,226,46)">show</span><span class="o" style="color:rgb(249,38,114)">();</span>
    <span class="o" style="color:rgb(249,38,114)">}</span>
    <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">startAt10</span><span class="o" style="color:rgb(249,38,114)">()</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
        <span class="n" style="color:rgb(248,248,242)">AlarmManager</span> <span class="n" style="color:rgb(248,248,242)">manager</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">AlarmManager</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="n" style="color:rgb(248,248,242)">getSystemService</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Context</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">ALARM_SERVICE</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="kt" style="color:rgb(102,217,239)">int</span> <span class="n" style="color:rgb(248,248,242)">interval</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="mi" style="color:rgb(174,129,255)">1000</span> <span class="o" style="color:rgb(249,38,114)">*</span> <span class="mi" style="color:rgb(174,129,255)">60</span> <span class="o" style="color:rgb(249,38,114)">*</span> <span class="mi" style="color:rgb(174,129,255)">30</span><span class="o" style="color:rgb(249,38,114)">;</span>
        <span class="cm" style="color:rgb(117,113,94)">/* Set the alarm to start at 10:30 AM */</span>
        <span class="n" style="color:rgb(248,248,242)">Calendar</span> <span class="n" style="color:rgb(248,248,242)">calendar</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="n" style="color:rgb(248,248,242)">Calendar</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">getInstance</span><span class="o" style="color:rgb(249,38,114)">();</span>
        <span class="n" style="color:rgb(248,248,242)">calendar</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">setTimeInMillis</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">System</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">currentTimeMillis</span><span class="o" style="color:rgb(249,38,114)">());</span>
        <span class="n" style="color:rgb(248,248,242)">calendar</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">set</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Calendar</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">HOUR_OF_DAY</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="mi" style="color:rgb(174,129,255)">10</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="n" style="color:rgb(248,248,242)">calendar</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">set</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Calendar</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">MINUTE</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="mi" style="color:rgb(174,129,255)">30</span><span class="o" style="color:rgb(249,38,114)">);</span>
        <span class="cm" style="color:rgb(117,113,94)">/* Repeating on every 30 minutes interval */</span>
        <span class="n" style="color:rgb(248,248,242)">manager</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">setRepeating</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">AlarmManager</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">RTC_WAKEUP</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">calendar</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">getTimeInMillis</span><span class="o" style="color:rgb(249,38,114)">(),</span>
                <span class="n" style="color:rgb(248,248,242)">interval</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">pendingIntent</span><span class="o" style="color:rgb(249,38,114)">);</span>
    <span class="o" style="color:rgb(249,38,114)">}</span>
<span class="o" style="color:rgb(249,38,114)">}</span>
    </code></pre> 
<h4 id="section-1" style="font-family:'Open Sans','lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.5; color:rgb(49,49,49); margin-top:1.5rem; font-size:0.8rem; orphans:2; widows:2"> 开机自动启动服务</h4> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 如前所述，一旦闹钟服务开始执行，它会一直执行直到它被停止或设备重启。这意味着，如果你的设备被重新启动，那么你的闹钟就停止了。 为了避免这种现状，你必须在设备启动完成后尽快重新启动闹钟服务。下面的代码将设置开启闹钟，一旦设备重启：</p> 
<pre style="font-family:Menlo,Monaco,'Courier New',monospace; margin-top:0px; margin-bottom:0px; padding:1rem; font-size:0.6rem; line-height:1.4; white-space:pre-wrap; word-break:break-all; word-wrap:break-word; background-color:rgb(29,30,25)"><code class="language-java" style="font-family:Menlo,Monaco,'Courier New',monospace; padding:0px; color:inherit; background-color:transparent"><span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.app.AlarmManager</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.app.PendingIntent</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.BroadcastReceiver</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.Context</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.content.Intent</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="kn" style="color:rgb(249,38,114)">import</span> <span class="nn" style="color:rgb(248,248,242)">android.widget.Toast</span><span class="o" style="color:rgb(249,38,114)">;</span>
<span class="cm" style="color:rgb(117,113,94)">/**
 * @author Nilanchala
 *         &lt;p/&gt;
 *         Broadcast reciever, starts when the device gets starts.
 *         Start your repeating alarm here.
 */</span>
<span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kd" style="color:rgb(102,217,239)">class</span> <span class="nc" style="color:rgb(166,226,46)">DeviceBootReceiver</span> <span class="kd" style="color:rgb(102,217,239)">extends</span> <span class="n" style="color:rgb(248,248,242)">BroadcastReceiver</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
    <span class="nd" style="color:rgb(166,226,46)">@Override</span>
    <span class="kd" style="color:rgb(102,217,239)">public</span> <span class="kt" style="color:rgb(102,217,239)">void</span> <span class="n" style="color:rgb(248,248,242)">onReceive</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Context</span> <span class="n" style="color:rgb(248,248,242)">context</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">Intent</span> <span class="n" style="color:rgb(248,248,242)">intent</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
        <span class="k" style="color:rgb(102,217,239)">if</span> <span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">intent</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">getAction</span><span class="o" style="color:rgb(249,38,114)">().</span><span class="na" style="color:rgb(166,226,46)">equals</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="s" style="color:rgb(230,219,116)">"android.intent.action.BOOT_COMPLETED"</span><span class="o" style="color:rgb(249,38,114)">))</span> <span class="o" style="color:rgb(249,38,114)">{<!-- --></span>
            <span class="cm" style="color:rgb(117,113,94)">/* Setting the alarm here */</span>
            <span class="n" style="color:rgb(248,248,242)">Intent</span> <span class="n" style="color:rgb(248,248,242)">alarmIntent</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="k" style="color:rgb(102,217,239)">new</span> <span class="n" style="color:rgb(248,248,242)">Intent</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">context</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">AlarmReceiver</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">class</span><span class="o" style="color:rgb(249,38,114)">);</span>
            <span class="n" style="color:rgb(248,248,242)">PendingIntent</span> <span class="n" style="color:rgb(248,248,242)">pendingIntent</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="n" style="color:rgb(248,248,242)">PendingIntent</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">getBroadcast</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">context</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="mi" style="color:rgb(174,129,255)">0</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">alarmIntent</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="mi" style="color:rgb(174,129,255)">0</span><span class="o" style="color:rgb(249,38,114)">);</span>
            <span class="n" style="color:rgb(248,248,242)">AlarmManager</span> <span class="n" style="color:rgb(248,248,242)">manager</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">AlarmManager</span><span class="o" style="color:rgb(249,38,114)">)</span> <span class="n" style="color:rgb(248,248,242)">context</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">getSystemService</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">Context</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">ALARM_SERVICE</span><span class="o" style="color:rgb(249,38,114)">);</span>
            <span class="kt" style="color:rgb(102,217,239)">int</span> <span class="n" style="color:rgb(248,248,242)">interval</span> <span class="o" style="color:rgb(249,38,114)">=</span> <span class="mi" style="color:rgb(174,129,255)">8000</span><span class="o" style="color:rgb(249,38,114)">;</span>
            <span class="n" style="color:rgb(248,248,242)">manager</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">setInexactRepeating</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">AlarmManager</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">RTC_WAKEUP</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">System</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">currentTimeMillis</span><span class="o" style="color:rgb(249,38,114)">(),</span> <span class="n" style="color:rgb(248,248,242)">interval</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">pendingIntent</span><span class="o" style="color:rgb(249,38,114)">);</span>
            <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">makeText</span><span class="o" style="color:rgb(249,38,114)">(</span><span class="n" style="color:rgb(248,248,242)">context</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="s" style="color:rgb(230,219,116)">"Alarm Set"</span><span class="o" style="color:rgb(249,38,114)">,</span> <span class="n" style="color:rgb(248,248,242)">Toast</span><span class="o" style="color:rgb(249,38,114)">.</span><span class="na" style="color:rgb(166,226,46)">LENGTH_SHORT</span><span class="o" style="color:rgb(249,38,114)">).</span><span class="na" style="color:rgb(166,226,46)">show</span><span class="o" style="color:rgb(249,38,114)">();</span>
        <span class="o" style="color:rgb(249,38,114)">}</span>
    <span class="o" style="color:rgb(249,38,114)">}</span>
<span class="o" style="color:rgb(249,38,114)">}</span>
    </code></pre> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> android系统在Manifest.permission中有这样一条RECEIVE_BOOT_COMPLETED的定义，当你自己的程序加入这个权限后， 就可以在系统启动完毕后收到一条系统的广播，这个广播的标志为ACTION_BOOT_COMPLETED，因此我们只要定义一个BroadcastReceiver 用来接收这个广播，然后加入自定义的动作即可。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 接收不到BOOT_COMPLETED广播可能的原因:</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 1.BOOT_COMPLETED对应的action和uses-permission没有一起添加</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 2.应用安装到了sd卡内，安装在sd卡内的应用是收不到BOOT_COMPLETED广播的</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 3.系统开启了Fast Boot模式，这种模式下系统启动并不会发送BOOT_COMPLETED广播</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 4.应用程序安装后重来没有启动过，这种情况下应用程序接收不到任何广播，包括BOOT_COMPLETED、ACTION_PACKAGE_ADDED、 CONNECTIVITY_ACTION等等。</p> 
<h4 id="application-manifest" style="font-family:'Open Sans','lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.5; color:rgb(49,49,49); margin-top:1.5rem; font-size:0.8rem; orphans:2; widows:2"> 声明Application Manifest</h4> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 为了在设备重启时启动闹钟服务，必须在application manifest中注册前面定义的DeviceBootReciever。同时还需要加入权限： android.permission.RECEIVE_BOOT_COMPLETED。</p> 
<pre style="font-family:Menlo,Monaco,'Courier New',monospace; margin-top:0px; margin-bottom:0px; padding:1rem; font-size:0.6rem; line-height:1.4; white-space:pre-wrap; word-break:break-all; word-wrap:break-word; background-color:rgb(29,30,25)"><code class="language-xml" style="font-family:Menlo,Monaco,'Courier New',monospace; padding:0px; color:inherit; background-color:transparent"><span class="cp" style="color:rgb(117,113,94)">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt" style="color:rgb(249,38,114)">&lt;manifest</span> <span class="na" style="color:rgb(166,226,46)">xmlns:android=</span><span class="s" style="color:rgb(230,219,116)">"http://schemas.android.com/apk/res/android"</span>
    <span class="na" style="color:rgb(166,226,46)">package=</span><span class="s" style="color:rgb(230,219,116)">"com.xxx.alarmservice"</span> <span class="nt" style="color:rgb(249,38,114)">&gt;</span>
    <span class="nt" style="color:rgb(249,38,114)">&lt;application</span>
        <span class="na" style="color:rgb(166,226,46)">android:allowBackup=</span><span class="s" style="color:rgb(230,219,116)">"true"</span>
        <span class="na" style="color:rgb(166,226,46)">android:icon=</span><span class="s" style="color:rgb(230,219,116)">"@drawable/ic_launcher"</span>
        <span class="na" style="color:rgb(166,226,46)">android:label=</span><span class="s" style="color:rgb(230,219,116)">"@string/app_name"</span>
        <span class="na" style="color:rgb(166,226,46)">android:theme=</span><span class="s" style="color:rgb(230,219,116)">"@style/AppTheme"</span> <span class="nt" style="color:rgb(249,38,114)">&gt;</span>
        <span class="c" style="color:rgb(117,113,94)">&lt;!-- Permission to start Alarm on device reboot --&gt;</span>
        <span class="nt" style="color:rgb(249,38,114)">&lt;uses-permission</span> <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">"android.permission.RECEIVE_BOOT_COMPLETED"</span><span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
        <span class="nt" style="color:rgb(249,38,114)">&lt;activity</span>
            <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">".MyActivity"</span>
            <span class="na" style="color:rgb(166,226,46)">android:label=</span><span class="s" style="color:rgb(230,219,116)">"@string/app_name"</span> <span class="nt" style="color:rgb(249,38,114)">&gt;</span>
            <span class="nt" style="color:rgb(249,38,114)">&lt;intent-filter&gt;</span>
                <span class="nt" style="color:rgb(249,38,114)">&lt;action</span> <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">"android.intent.action.MAIN"</span> <span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
                <span class="nt" style="color:rgb(249,38,114)">&lt;category</span> <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">"android.intent.category.LAUNCHER"</span> <span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
            <span class="nt" style="color:rgb(249,38,114)">&lt;/intent-filter&gt;</span>
        <span class="nt" style="color:rgb(249,38,114)">&lt;/activity&gt;</span>
        <span class="nt" style="color:rgb(249,38,114)">&lt;receiver</span> <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">".AlarmReceiver"</span><span class="nt" style="color:rgb(249,38,114)">&gt;</span>
	      <span class="nt" style="color:rgb(249,38,114)">&lt;intent-filter&gt;</span>
	           <span class="nt" style="color:rgb(249,38,114)">&lt;action</span> <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">"android.intent.action.BOOT_COMPLETED"</span><span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
	      <span class="nt" style="color:rgb(249,38,114)">&lt;/intent-filter&gt;</span>
        <span class="nt" style="color:rgb(249,38,114)">&lt;/receiver&gt;</span>
        <span class="c" style="color:rgb(117,113,94)">&lt;!-- Will not be called unless the application explicitly enables it --&gt;</span>
        <span class="nt" style="color:rgb(249,38,114)">&lt;receiver</span> <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">".DeviceBootReceiver"</span>
            <span class="na" style="color:rgb(166,226,46)">android:enabled=</span><span class="s" style="color:rgb(230,219,116)">"false"</span><span class="nt" style="color:rgb(249,38,114)">&gt;</span>
            <span class="nt" style="color:rgb(249,38,114)">&lt;intent-filter&gt;</span>
                <span class="nt" style="color:rgb(249,38,114)">&lt;action</span> <span class="na" style="color:rgb(166,226,46)">android:name=</span><span class="s" style="color:rgb(230,219,116)">"android.intent.action.BOOT_COMPLETED"</span><span class="nt" style="color:rgb(249,38,114)">/&gt;</span>
            <span class="nt" style="color:rgb(249,38,114)">&lt;/intent-filter&gt;</span>
        <span class="nt" style="color:rgb(249,38,114)">&lt;/receiver&gt;</span>
    <span class="nt" style="color:rgb(249,38,114)">&lt;/application&gt;</span>
<span class="nt" style="color:rgb(249,38,114)">&lt;/manifest&gt;</span>
    </code></pre> 
<h4 id="alarmmanager-1" style="font-family:'Open Sans','lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; line-height:1.5; color:rgb(49,49,49); margin-top:1.5rem; font-size:0.8rem; orphans:2; widows:2"> AlarmManager常用方法总结</h4> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 1.set(int type，long startTime，PendingIntent pi)；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 该方法用于设置一次性闹钟，第一个参数表示闹钟类型，第二个参数表示闹钟执行时间，第三个参数表示闹钟响应动作。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 2.setRepeating(int type，long triggerAtTime，long intervalTime，PendingIntent pi)；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 该方法用于设置重复闹钟，第一个参数表示闹钟类型，第二个参数表示闹钟首次执行时间，第三个参数表示闹钟两次执行的间隔时间， 第三个参数表示闹钟响应动作。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 3.setInexactRepeating（int type，long startTime，long intervalTime，PendingIntent pi）；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 该方法也用于设置重复闹钟，与第二个方法相似，不过其两个闹钟执行的间隔时间不是固定的而已。</p> 
<ul style="margin-top:0px; margin-bottom:1rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; font-size:20px; orphans:2; widows:2"><li style="font-size:0.7rem">三个方法各个参数详悉：</li></ul> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 1.int type： 闹钟的类型，常用的有5个值：AlarmManager.ELAPSED_REALTIME、 AlarmManager.ELAPSED_REALTIME_WAKEUP、 AlarmManager.RTC、 AlarmManager.RTC_WAKEUP、AlarmManager.POWER_OFF_WAKEUP。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> AlarmManager.ELAPSED_REALTIME表示闹钟在手机睡眠状态下不可用，该状态下闹钟使用相对时间（相对于系统启动开始），状态值为3；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> AlarmManager.ELAPSED_REALTIME_WAKEUP表示闹钟在睡眠状态下会唤醒系统并执行提示功能，该状态下闹钟也使用相对时间，状态值为2；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> AlarmManager.RTC表示闹钟在睡眠状态下不可用，该状态下闹钟使用绝对时间，即当前系统时间，状态值为1；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> AlarmManager.RTC_WAKEUP表示闹钟在睡眠状态下会唤醒系统并执行提示功能，该状态下闹钟使用绝对时间，状态值为0；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> AlarmManager.POWER_OFF_WAKEUP表示闹钟在手机关机状态下也能正常进行提示功能，所以是5个状态中用的最多的状态之一， 该状态下闹钟也是用绝对时间，状态值为4；不过本状态好像受SDK版本影响，某些版本并不支持；</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 2.long startTime： 闹钟的第一次执行时间，以毫秒为单位，可以自定义时间，不过一般使用当前时间。需要注意的是， 本属性与第一个属性（type）密切相关，如果第一个参数对 应的闹钟使用的是相对时间（ELAPSED_REALTIME和ELAPSED_REALTIME_WAKEUP）， 那么本属性就得使用相对时间（相对于 系统启动时间来说），比如当前时间就表示为：SystemClock.elapsedRealtime()； 如果第一个参数对应的闹钟使用的是绝对时间 （RTC、RTC_WAKEUP、POWER_OFF_WAKEUP），那么本属性就得使用绝对时间， 比如当前时间就表示 为：System.currentTimeMillis()。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 3.long intervalTime：对于后两个方法来说，存在本属性，表示两次闹钟执行的间隔时间，也是以毫秒为单位。</p> 
<p style="font-size:0.7rem; line-height:1.5; margin-top:0px; margin-bottom:1.5rem; color:rgb(81,81,81); font-family:'lucida grande','lucida sans unicode',lucida,helvetica,'Hiragino Sans GB','Microsoft YaHei','WenQuanYi Micro Hei',sans-serif; orphans:2; widows:2"> 4.PendingIntent pi： 绑定了闹钟的执行动作，比如发送一个广播、给出提示等等。PendingIntent是Intent的封装类。 需要注意的是，如果是通过启动服务来实现闹钟提示的话，PendingIntent对象的获取就应该采用Pending.getService(Context c,int i,Intent intent,int j) 方法；如果是通过广播来实现闹钟提示的话，PendingIntent对象的获取就应该采用 PendingIntent.getBroadcast(Context c,int i,Intent intent,int j)方法； 如果是采用Activity的方式来实现闹钟提示的话，PendingIntent对象的获取就应该采用 PendingIntent.getActivity(Context c,int i,Intent intent,int j)方法。 如果这三种方法错用了的话，虽然不会报错，但是看不到闹钟提示效果。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/546df1233d1060924ee17d3a47922473/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">蓝桥杯省赛</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1e6af348aede336dbaa81f5fe21e386f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c语言实现字符串的逆序输出</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>