<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【从零开始学技术】Fiddler 抓取 https 请求大全 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【从零开始学技术】Fiddler 抓取 https 请求大全" />
<meta property="og:description" content="1.Fiddler代理浏览器设置 注意浏览器代理区别 Chrome/IE浏览器使用的都是系统代理设置
在chrome浏览器的设置中搜索代理，可以看到
打开IE浏览器，选择设置-&gt;Internet选项
Firefox浏览器使用的是单独的一套代理系统
在Firefox的代理设置中，我们也可以选择使用系统代理
02打开Fiddler Fiddler打开之后默认是可以抓取到Chrome/IE浏览器的请求的。
这是因为Fiddler默认会勾选“Act as system proxy on startup”，此选项会在Fiddler启动的时候作为系统代理：
我们会发现系统代理设置已经被Fiddler篡改，端口和Fiddler中保持一致：
这也就是为什么Fiddler启动之后默认可以抓取到Chrome/IE的请求，如果Firefox也想默认抓取到，按照之前的设置，选择使用系统代理即可。
此时我们只能抓取到http的请求，如果我们需要抓取https请求，还需要做如下配置。
3勾选解密https流量选项 选择Tools-&gt;Options-&gt;HTTPS，勾选&#34;Decrypt HTTPS traffic&#34;和“Ignore server certificate errors (unsafe)”选项：
04安装证书到系统根证书中 点击右上角Actions，选择Trust Root Certificate选项，跳出来的对话框全部选择是或者yes即可
最后会出现如下提示，表示证书已经成功安装到了系统根证书区域
我们可以打开cmd，输入cert.msc，打开证书管理器，即可看到安装的Fiddler伪装证书
重启浏览器，重启Fiddler，特别重要！！!
打开Chrome/IE，可以愉快的抓取https请求了
Fiddler可以通过安装证书解决https请求的抓取问题，此时在浏览器面前Fiddler伪装成一个https服务器，用户可以将Fiddler的伪装证书导入到系统的根证书中。
而浏览器是默认信任系统的根证书的，此时Fiddler作为中间人在真正的服务器面前伪装成浏览器的角色。
Firefox额外设置 Firefox浏览器和Chrome/IE证书管理有区别，Chrome/IE使用的是系统根证书，而Firefox有自己的一套证书管理系统
所以针对Firefox，我们还需要做另外的配置：
01导出Fiddler证书到桌面 选择Tools-&gt;Options-&gt;HTTPS，点击右上角Actions，选择Export Root Certificate to Desktop,此时在桌面可以找到导出来的证书
02安装证书到Firefox的内置根证书中 进入到Firefox的设置-&gt;搜索证书选-&gt;打开证书管理器，选择桌面的证书文件导入进来，勾选如下三个选项
重启浏览器，重启Fiddler，特别重要！！!
打开Firefox，抓取Https请求也没问题了。
Fiddler抓取App端请求 准备工作：
将手机和电脑连接到同一路由器（保证两者能够ping通） 如果使用的模拟器则不需要上面的步骤，因为模拟器是共享PC端的网络，两者网络默认就是连通的状态 查询PC端的IP地址 01配置fiddler可以抓取远程端设备请求 打开Tools-&gt;Options-&gt;Connections，勾选Allow remote computers to connect选项
为了防止PC端的浏览器的请求和App端的请求信息混乱，可以把Fiddler的监听端改下，比如改成：7777（当然，不改也是可以的）。
02手机端配置代理 进入到手机/模拟器设置，选择WLAN-&gt;连接上的WiFi热点名-&gt;手指长按，选择修改网络-&gt;勾选高级选项，代理选择手动（注意：不同手机的界面和进入的路径存在一些差异）
代理服务器主机名:PC端查询的IP地址 代理服务器端口号：Fiddler中配置的监听端口 此时我们只能抓取到http的请求，如果我们需要抓取https请求，还需要做如下配置。
03手机端安装Fiddler伪装证书 在手机端浏览器中输入
http://192.168.1.222:7777 其中192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a2b06a5a3fc7e392ad57c71e1ab6ac2a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T19:27:47+08:00" />
<meta property="article:modified_time" content="2024-01-09T19:27:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【从零开始学技术】Fiddler 抓取 https 请求大全</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.Fiddler代理浏览器设置</h2> 
<p></p> 
<p>注意浏览器代理区别 Chrome/IE浏览器使用的都是系统代理设置</p> 
<p><br> 在chrome浏览器的设置中搜索代理，可以看到</p> 
<p><img alt="" height="625" src="https://images2.imgbox.com/11/0a/JBzsdeSw_o.png" width="1061"></p> 
<p></p> 
<p>打开IE浏览器，选择设置-&gt;Internet选项</p> 
<p><img alt="" height="456" src="https://images2.imgbox.com/6e/b9/btRNlCM5_o.png" width="990"></p> 
<p></p> 
<p>Firefox浏览器使用的是单独的一套代理系统</p> 
<p><br> 在Firefox的代理设置中，我们也可以选择使用系统代理</p> 
<p><img alt="" height="498" src="https://images2.imgbox.com/4d/50/1TiyULrO_o.png" width="911"></p> 
<p></p> 
<h2>02打开Fiddler</h2> 
<p></p> 
<p>Fiddler打开之后默认是可以抓取到Chrome/IE浏览器的请求的。</p> 
<p></p> 
<p>这是因为Fiddler默认会勾选“Act as system proxy on startup”，此选项会在Fiddler启动的时候作为系统代理：</p> 
<p><img alt="" height="557" src="https://images2.imgbox.com/43/61/Al0t3gvX_o.png" width="712"></p> 
<p></p> 
<p>我们会发现系统代理设置已经被Fiddler篡改，端口和Fiddler中保持一致：</p> 
<p><img alt="" height="476" src="https://images2.imgbox.com/96/7d/AUZqTUAM_o.png" width="1080"></p> 
<p></p> 
<p>这也就是为什么Fiddler启动之后默认可以抓取到Chrome/IE的请求，如果Firefox也想默认抓取到，按照之前的设置，选择使用系统代理即可。</p> 
<p></p> 
<p>此时我们只能抓取到http的请求，如果我们需要抓取https请求，还需要做如下配置。</p> 
<p></p> 
<h2>3勾选解密https流量选项</h2> 
<p></p> 
<p>选择Tools-&gt;Options-&gt;HTTPS，勾选"Decrypt HTTPS traffic"和“Ignore server certificate errors (unsafe)”选项：</p> 
<p><img alt="" height="920" src="https://images2.imgbox.com/d6/a6/XmQvh6Wz_o.jpg" width="1200"></p> 
<p></p> 
<h2>04安装证书到系统根证书中</h2> 
<p></p> 
<p>点击右上角Actions，选择Trust Root Certificate选项，跳出来的对话框全部选择是或者yes即可</p> 
<p><img alt="" height="538" src="https://images2.imgbox.com/b8/60/duO3vLeF_o.png" width="965"></p> 
<p></p> 
<p>最后会出现如下提示，表示证书已经成功安装到了系统根证书区域</p> 
<p><img alt="" height="376" src="https://images2.imgbox.com/d2/f8/ACC3iziC_o.jpg" width="870"></p> 
<p></p> 
<p>我们可以打开cmd，输入cert.msc，打开证书管理器，即可看到安装的Fiddler伪装证书</p> 
<p><img alt="" height="428" src="https://images2.imgbox.com/ae/28/8pqDfrNK_o.png" width="1080"></p> 
<p></p> 
<p>重启浏览器，重启Fiddler，特别重要！！!</p> 
<p><br> 打开Chrome/IE，可以愉快的抓取https请求了</p> 
<p><img alt="" height="268" src="https://images2.imgbox.com/9a/83/463QrhmE_o.jpg" width="1200"></p> 
<p></p> 
<p>Fiddler可以通过安装证书解决https请求的抓取问题，此时在浏览器面前Fiddler伪装成一个https服务器，用户可以将Fiddler的伪装证书导入到系统的根证书中。</p> 
<p></p> 
<p>而浏览器是默认信任系统的根证书的，此时Fiddler作为中间人在真正的服务器面前伪装成浏览器的角色。</p> 
<p></p> 
<h2>Firefox额外设置</h2> 
<p>Firefox浏览器和Chrome/IE证书管理有区别，Chrome/IE使用的是系统根证书，而Firefox有自己的一套证书管理系统</p> 
<p></p> 
<p>所以针对Firefox，我们还需要做另外的配置：</p> 
<p></p> 
<h2>01导出Fiddler证书到桌面</h2> 
<p></p> 
<p>选择Tools-&gt;Options-&gt;HTTPS，点击右上角Actions，选择Export Root Certificate to Desktop,此时在桌面可以找到导出来的证书</p> 
<p><img alt="" height="518" src="https://images2.imgbox.com/70/24/yh1r0BXm_o.jpg" width="1144"></p> 
<p></p> 
<h2>02安装证书到Firefox的内置根证书中</h2> 
<p></p> 
<p>进入到Firefox的设置-&gt;搜索证书选-&gt;打开证书管理器，选择桌面的证书文件导入进来，勾选如下三个选项</p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/f4/19/y1n7LJ5s_o.png" width="1080"></p> 
<p></p> 
<p>重启浏览器，重启Fiddler，特别重要！！!</p> 
<p><br> 打开Firefox，抓取Https请求也没问题了。</p> 
<p></p> 
<h2>Fiddler抓取App端请求</h2> 
<p></p> 
<p>准备工作：</p> 
<p></p> 
<ul><li>将手机和电脑连接到同一路由器（保证两者能够ping通）</li></ul> 
<p></p> 
<ul><li>如果使用的模拟器则不需要上面的步骤，因为模拟器是共享PC端的网络，两者网络默认就是连通的状态</li></ul> 
<p></p> 
<ul><li>查询PC端的IP地址</li></ul> 
<h2>01配置fiddler可以抓取远程端设备请求</h2> 
<p></p> 
<p>打开Tools-&gt;Options-&gt;Connections，勾选Allow remote computers to connect选项</p> 
<p></p> 
<p>为了防止PC端的浏览器的请求和App端的请求信息混乱，可以把Fiddler的监听端改下，比如改成：7777（当然，不改也是可以的）。</p> 
<p><img alt="" height="1110" src="https://images2.imgbox.com/91/bb/uDP7iTtq_o.jpg" width="1200"></p> 
<p></p> 
<h2>02手机端配置代理</h2> 
<p></p> 
<p>进入到手机/模拟器设置，选择WLAN-&gt;连接上的WiFi热点名-&gt;手指长按，选择修改网络-&gt;勾选高级选项，代理选择手动（注意：不同手机的界面和进入的路径存在一些差异）</p> 
<p></p> 
<ul><li>代理服务器主机名:PC端查询的IP地址</li></ul> 
<p></p> 
<ul><li>代理服务器端口号：Fiddler中配置的监听端口</li><li><li></ul> 
<p>此时我们只能抓取到http的请求，如果我们需要抓取https请求，还需要做如下配置。</p> 
<p></p> 
<h2>03手机端安装Fiddler伪装证书</h2> 
<p>在手机端浏览器中输入</p> 
<p>http://192.168.1.222:7777 其中192.168.1.222为PC端的IP地址</p> 
<p><br> 点击最下方链接即可下载Fiddler证书</p> 
<p><img alt="" height="618" src="https://images2.imgbox.com/1a/ac/oVfShwBf_o.jpg" width="1092"></p> 
<p></p> 
<p>下载完打开，会提示为证书命名（随便给一个名字即可）</p> 
<p><img alt="" height="788" src="https://images2.imgbox.com/fc/6a/87BbmF0H_o.jpg" width="952"></p> 
<p></p> 
<p>如果是第一次安装证书，系统会提示设置PIN码（为了安全），按照提示一步一步操作即可</p> 
<p><img alt="" height="426" src="https://images2.imgbox.com/a4/80/gzLBHulj_o.jpg" width="956"></p> 
<p></p> 
<p>最后安装结束，我们可以在设置-&gt;安全-&gt;信任的凭据-&gt;用户 中找到我们安装的证书（注意：不同手机的界面和进入的路径存在一些差异）</p> 
<p><img alt="" height="246" src="https://images2.imgbox.com/8e/20/R0CVSVDK_o.png" width="859"></p> 
<p></p> 
<p>打开App（注意：如果之前有启动，需要从后台清理掉再重新启动），以"贝壳找房"为例，https请求抓取成功</p> 
<p></p> 
<p></p> 
<h2>会遇到的问题：</h2> 
<p></p> 
<h2>证书导出失败，出现如下提示：The root certificate could not be located</h2> 
<p></p> 
<p><img alt="" height="426" src="https://images2.imgbox.com/51/6b/FdU6mZjA_o.jpg" width="810"></p> 
<p></p> 
<p><strong>解决方案：</strong></p> 
<p></p> 
<ul><li>在开始-&gt;运行输入：certmgr.msc打开证书管理</li></ul> 
<p></p> 
<ul><li>点击操作-&gt;查找证书</li></ul> 
<p></p> 
<p><img alt="" height="642" src="https://images2.imgbox.com/cd/80/DENomT2L_o.jpg" width="924"></p> 
<p></p> 
<ul><li>输入fiddler，进行查找，将查找出来的所有证书进行删除：</li></ul> 
<p></p> 
<p><img alt="" height="838" src="https://images2.imgbox.com/03/17/YbRhTKIg_o.jpg" width="924"></p> 
<p></p> 
<p>再重启Fiddler，重新导出证书</p> 
<p></p> 
<h2>会遇到的问题：</h2> 
<p></p> 
<h2>证书导出失败，出现如下提示：Unable to configure Windows to Trust the Fiddler Root....</h2> 
<p></p> 
<p><img alt="" height="514" src="https://images2.imgbox.com/28/ea/pXBJ2APY_o.jpg" width="1074"></p> 
<p></p> 
<p><strong>解决方案：</strong></p> 
<p><br> 找到fiddler-&gt;工具栏tools-&gt;options，再选择HTTPS，点击CertEnroll engine，选择MakeCert即可点击OK保存，最后切记重启fiddler！！！</p> 
<p><img alt="" height="365" src="https://images2.imgbox.com/3a/f0/Yzd4lkYE_o.png" width="1080"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0177247b3c36fa7c538690dde1d73f77/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">kotlin map{}和mapOf{}</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2414e9c65dc0560c42e556e027d9d8ed/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">面试宝典之消息中间件面试题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>