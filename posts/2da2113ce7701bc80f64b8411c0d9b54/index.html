<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SQL 数据库复制 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SQL 数据库复制" />
<meta property="og:description" content="前言： 当需要将一台机器（源机器）上的一个数据库完全复制到另一台机器（目标机器）上时，
可以选择先在源机器上备份该数据库，然后在目标机器上还原该备份的方法。
在项目搬移到另一个服务器上的时候，可以使用这种方法。我之前搬了个50多G的数据，我就先生成备份，然后将这个文件进行压缩包，通过腾讯云盘转到服务器中，本来是用ftp的，可那个太慢了。
第一步：连接数据库 打开SQL server management studio， 连接到服务器，
在“服务器名称”上填写本机名称，
可以在计算机-右键-属性中查看“计算机名”，然后点击“连接”，
如下图所示
第二步：选择备份 选中你要复制的数据库，右键-任务-备份，
如下图所示：
第三步：生成备份文件 选择你要复制的目标位置。一般情况下会有一个默认位置，请只备份到一个位置上，
最好不要再添加一个位置，不然还原的时候容易出错，（或者删除后再添加）
可以在备份完之后去默认位置拷贝出备份文件，
如下图所示：
第四步：拷贝备份文件 点击“确定”就会开始备份了。等备份完成，会得到一个xxx.bak文件，该文件就是备份文件，
去目标位置拷出该备份文件，拷到目标机器上即可。
第五步：点击“还原文件和文件组” 在目标机器上按第1步连接数据库，然后右键点击“数据库”，
点击“还原文件和文件组”，而不是点击“还原数据库”，不然容易出错，
如下图所示：
第六步： 在 “还原的目标” 下的 “目标数据库” 右侧的栏中填写目标机器上新数据库的名字（可以和原数据库名不同）。
在 “还原的源” 下点击 “源设备” 右侧的 “...” ，在点击 “添加” 选择拷到本机的数据库备份文件xxx.bak，然后点击确定就可以了，
如下图所示：
到此数据库复制完毕，刷新即可看到新添加的数据库
还原数据库错误一： 对于下面这种报错的解释很牵强，不能每次还原数据库都要创建一个数据库吧！我也是看到别人说的原因，和自己试用了一下!
数据库还原出现报错：服务器“DESKTOP-BNNIISU”失败。(Microsoft.SqlServer.SmoExtended)
System.Data.SqlClient.SqlError: 备份集中的数据库备份与现有的 &#39;wwt&#39; 数据库不同。 (Microsoft.SqlServer.Smo)
很多人在还原时想着新建一个空白的数据库，正好在还原数据库时是用下拉框选择的。
所以一般人不会怀疑这件事，就是在还原对象时，数据库已经有了这个名叫wwt的数据库冲突了。
所以只有手动输入没有过的数据库名称才会成功。
（这个设计真的是很狗血，感觉微软也是不知道怎么想的。） 作者有话说 该文档希望能解决你的问题，不能解决你的问题的话，请问“度娘”，走上编程这条路，“度娘”永远是你的法宝。
有些废话的东西你懂的话，完全可以不看；我其实也不喜欢理论上的知识；看看也是涨涨见识，可以在面试的时候，装那什么。
当然很多的理论知识也是借鉴了各位大神的，或者去官网找的。如有冒犯，还请见谅。
坚持日拱一卒、相信复利效应、不断践行践修，让我们活在成长中" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2da2113ce7701bc80f64b8411c0d9b54/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-07T11:30:26+08:00" />
<meta property="article:modified_time" content="2023-02-07T11:30:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SQL 数据库复制</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言：</h2> 
<p>当需要将一台机器（源机器）上的一个数据库完全复制到另一台机器（目标机器）上时，</p> 
<p>可以选择先在源机器上备份该数据库，然后在目标机器上还原该备份的方法。</p> 
<p>在项目搬移到另一个服务器上的时候，可以使用这种方法。我之前搬了个50多G的数据，我就先生成备份，然后将这个文件进行压缩包，通过腾讯云盘转到服务器中，本来是用ftp的，可那个太慢了。</p> 
<h2>第一步：连接数据库</h2> 
<p>打开SQL server management studio， 连接到服务器，</p> 
<p>在“服务器名称”上填写本机名称，</p> 
<p>可以在计算机-右键-属性中查看“计算机名”，然后点击“连接”，</p> 
<p>如下图所示</p> 
<p><img alt="" height="296" src="https://images2.imgbox.com/1f/5d/wSzpg9f3_o.png" width="532"></p> 
<h2>第二步：选择备份</h2> 
<p>选中你要复制的数据库，右键-任务-备份，</p> 
<p>如下图所示：</p> 
<p><img alt="" height="659" src="https://images2.imgbox.com/fc/b2/Ye5dHLDz_o.png" width="620"></p> 
<h2>第三步：生成备份文件</h2> 
<p>选择你要复制的目标位置。一般情况下会有一个默认位置，请只备份到一个位置上，</p> 
<p>最好不要再添加一个位置，不然还原的时候容易出错，（或者删除后再添加）</p> 
<p>可以在<strong>备份完之后去默认位置拷贝出备份文件，</strong></p> 
<p>如下图所示：</p> 
<p><img alt="" height="474" src="https://images2.imgbox.com/12/5e/GNr2dxdJ_o.png" width="594"></p> 
<h2>第四步：拷贝备份文件</h2> 
<p>点击“确定”就会开始备份了。等备份完成，会得到一个xxx.bak文件，该文件就是备份文件，</p> 
<p>去目标位置拷出该备份文件，拷到目标机器上即可。</p> 
<h2>第五步：点击“还原文件和文件组”</h2> 
<p>在目标机器上按第1步连接数据库，然后右键点击“数据库”，</p> 
<p>点击“还原文件和文件组”，而不是点击“还原数据库”，不然容易出错，</p> 
<p>如下图所示：</p> 
<p><img alt="" height="481" src="https://images2.imgbox.com/9f/20/Kutszz0z_o.png" width="423"></p> 
<h2>第六步：</h2> 
<p>在 “还原的目标” 下的 “目标数据库” 右侧的栏中填写目标机器上新数据库的名字（可以和原数据库名不同）。</p> 
<p>在 “还原的源” 下点击 “源设备” 右侧的 “...” ，在点击 “添加” 选择拷到本机的数据库备份文件xxx.bak，然后点击确定就可以了，</p> 
<p>如下图所示：</p> 
<p><img alt="" height="496" src="https://images2.imgbox.com/ef/14/RiXhOFyk_o.png" width="618"></p> 
<p> 到此数据库复制完毕，刷新即可看到新添加的数据库</p> 
<h2>还原数据库错误一：</h2> 
<p>对于下面这种报错的解释很牵强，不能每次还原数据库都要创建一个数据库吧！我也是看到别人说的原因，和自己试用了一下!</p> 
<p>数据库还原出现报错：服务器“DESKTOP-BNNIISU”失败。(Microsoft.SqlServer.SmoExtended)</p> 
<p>System.Data.SqlClient.SqlError: 备份集中的数据库备份与现有的 'wwt' 数据库不同。 (Microsoft.SqlServer.Smo)</p> 
<p><img alt="" height="166" src="https://images2.imgbox.com/0f/71/LxBZaYGh_o.png" width="611"></p> 
<p>很多人在还原时想着新建一个空白的数据库，正好在还原数据库时是用下拉框选择的。</p> 
<p>所以一般人不会怀疑这件事，就是在还原对象时，数据库已经有了这个名叫wwt的数据库冲突了。</p> 
<p>所以只有手动输入没有过的数据库名称才会成功。</p> 
<p>（这个设计真的是很狗血，感觉微软也是不知道怎么想的。） </p> 
<p></p> 
<h2>作者有话说</h2> 
<p>该文档希望能解决你的问题，不能解决你的问题的话，请问“度娘”，走上编程这条路，“度娘”永远是你的法宝。</p> 
<p>有些废话的东西你懂的话，完全可以不看；我其实也不喜欢理论上的知识；看看也是涨涨见识，可以在面试的时候，装那什么。</p> 
<p>当然很多的理论知识也是借鉴了各位大神的，或者去官网找的。如有冒犯，还请见谅。</p> 
<p>坚持日拱一卒、相信复利效应、不断践行践修，让我们活在成长中</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2f0f3dfe9bd3d229b3cdbb2bcd09c0c4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SQL 中GUID的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6681b9de9e0f0747c66c8b37ad2e33d2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">图像除尘去雾技术总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>