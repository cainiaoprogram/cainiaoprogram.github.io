<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>spconv安装 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="spconv安装" />
<meta property="og:description" content="3090上安装spconv步骤： 这一步要在安装完cmake和pytorch之后进行。
GitHub下载代码： git clone https://github.com/traveller59/spconv.git --recursive 安装依赖： sudo apt-get install libboost-all-dev -o APT::Get::Fix-Missing=true 安装： cd spconv python setup.py bdist_wheel cd ./dist ls #ls之后会显示你的whl文件的名称，复制下来用pip install安装 #换成自己的whl文件名字 pip install spconv-1.2.1-cp36-cp36m-linux_x86_64.whl #之后会有英文提示，安装成功 #检测安装是否成功 #命令行输入 python #如果可以import说明安装成功 可能会出现如下错误： 可能会出现如下错误： /home/sdb1/zyan/lulu/lib/python3.7/site-packages/setuptools/distutils_patch.py:26: UserWarning: Distutils was imported before Setuptools. This usage is discouraged and may exhibit undesirable behaviors or errors. Please use Setuptools&#39; objects directly or at least import Setuptools first. &#34;Distutils was imported before Setuptools." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a27e148e674580f6ad216ecd3add6331/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-13T09:37:03+08:00" />
<meta property="article:modified_time" content="2021-09-13T09:37:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">spconv安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="3090spconv_0"></a>3090上安装spconv步骤：</h4> 
<p>这一步要在安装完cmake和pytorch之后进行。</p> 
<ol><li>GitHub下载代码：</li></ol> 
<pre><code>git clone https://github.com/traveller59/spconv.git --recursive
</code></pre> 
<ol start="2"><li>安装依赖：</li></ol> 
<pre><code>sudo apt-get install libboost-all-dev -o APT::Get::Fix-Missing=true
</code></pre> 
<ol start="3"><li>安装：</li></ol> 
<pre><code>cd spconv
python setup.py bdist_wheel
cd ./dist
ls 
#ls之后会显示你的whl文件的名称，复制下来用pip install安装
#换成自己的whl文件名字
pip install spconv-1.2.1-cp36-cp36m-linux_x86_64.whl
#之后会有英文提示，安装成功

#检测安装是否成功
#命令行输入
python
                                                                                                                                       
#如果可以import说明安装成功

</code></pre> 
<ol start="4"><li>可能会出现如下错误：</li></ol> 
<pre><code>可能会出现如下错误：
/home/sdb1/zyan/lulu/lib/python3.7/site-packages/setuptools/distutils_patch.py:26: UserWarning: Distutils was imported before Setuptools. This usage is discouraged and may exhibit undesirable behaviors or errors. Please use Setuptools' objects directly or at least import Setuptools first.
  "Distutils was imported before Setuptools. This usage is discouraged "
running bdist_wheel
running build
running build_py
running build_ext
Release
|||||CMAKE ARGS||||| ['-DCMAKE_PREFIX_PATH=/home/sdb1/zyan/lulu/lib/python3.7/site-packages/torch', '-DPYBIND11_PYTHON_VERSION=3.7', '-DSPCONV_BuildTests=OFF', '-DPYTORCH_VERSION=10600', '-DCMAKE_CUDA_FLAGS="--expt-relaxed-constexpr" -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__', '-DCMAKE_LIBRARY_OUTPUT_DIRECTORY=/home/sdb1/zyan/lulu/spconv-1.2/build/lib.linux-x86_64-3.7/spconv', '-DCMAKE_BUILD_TYPE=Release']
-- The CUDA compiler identification is unknown
CMake Error at CMakeLists.txt:6 (project):
  No CMAKE_CUDA_COMPILER could be found.

  Tell CMake where to find the compiler by setting either the environment
  variable "CUDACXX" or the CMake cache entry CMAKE_CUDA_COMPILER to the full
  path to the compiler, or to the compiler name if it is in the PATH.


-- Configuring incomplete, errors occurred!
See also "/home/sdb1/zyan/lulu/spconv-1.2/build/temp.linux-x86_64-3.7/CMakeFiles/CMakeOutput.log".
See also "/home/sdb1/zyan/lulu/spconv-1.2/build/temp.linux-x86_64-3.7/CMakeFiles/CMakeError.log".
Traceback (most recent call last):
  File "setup.py", line 109, in &lt;module&gt;
    zip_safe=False,
  File "/home/sdb1/zyan/lulu/lib/python3.7/site-packages/setuptools/__init__.py", line 165, in setup
    return distutils.core.setup(**attrs)
  File "/home/zyz/anaconda3/lib/python3.7/distutils/core.py", line 148, in setup
    dist.run_commands()
  File "/home/zyz/anaconda3/lib/python3.7/distutils/dist.py", line 966, in run_commands
    self.run_command(cmd)
  File "/home/zyz/anaconda3/lib/python3.7/distutils/dist.py", line 985, in run_command
    cmd_obj.run()
  File "/home/sdb1/zyan/lulu/lib/python3.7/site-packages/wheel/bdist_wheel.py", line 223, in run
    self.run_command('build')
  File "/home/zyz/anaconda3/lib/python3.7/distutils/cmd.py", line 313, in run_command
    self.distribution.run_command(command)
  File "/home/zyz/anaconda3/lib/python3.7/distutils/dist.py", line 985, in run_command
    cmd_obj.run()
  File "/home/zyz/anaconda3/lib/python3.7/distutils/command/build.py", line 135, in run
    self.run_command(cmd_name)
  File "/home/zyz/anaconda3/lib/python3.7/distutils/cmd.py", line 313, in run_command
    self.distribution.run_command(command)
  File "/home/zyz/anaconda3/lib/python3.7/distutils/dist.py", line 985, in run_command
    cmd_obj.run()
  File "setup.py", line 49, in run
    self.build_extension(ext)
  File "setup.py", line 92, in build_extension
    subprocess.check_call(['cmake', ext.sourcedir] + cmake_args, cwd=self.build_temp, env=env)
  File "/home/zyz/anaconda3/lib/python3.7/subprocess.py", line 363, in check_call
    raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command '['cmake', '/home/sdb1/zyan/lulu/spconv-1.2', '-DCMAKE_PREFIX_PATH=/home/sdb1/zyan/lulu/lib/python3.7/site-packages/torch', '-DPYBIND11_PYTHON_VERSION=3.7', '-DSPCONV_BuildTests=OFF', '-DPYTORCH_VERSION=10600', '-DCMAKE_CUDA_FLAGS="--expt-relaxed-constexpr" -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__', '-DCMAKE_LIBRARY_OUTPUT_DIRECTORY=/home/sdb1/zyan/lulu/spconv-1.2/build/lib.linux-x86_64-3.7/spconv', '-DCMAKE_BUILD_TYPE=Release']' returned non-zero exit status 1.
</code></pre> 
<ol><li>解决办法：<br> 5.1. 安装cuDNN(下载与你cuda对应版本)，从Nvidia官网上下载cudnn for linux的文件<br> <img src="https://images2.imgbox.com/53/1c/nPGK8HNC_o.png" alt="在这里插入图片描述"><br> 5.2. 解压cudnn文件：</li></ol> 
<pre><code>cd 下载（下载cudnn所在的文件夹）
tar -xvf cudnn-10.0-linux-x64-v7.3.1.20.tgz（换成你的文件名字）
</code></pre> 
<p>5.3. 执行以下命令(cudnn的版本文件不在cudnn.h里，而在cudnn_version.h里，总之全部复制过去就好了)：</p> 
<pre><code>sudo cp cuda/include/cudnn* /usr/local/cuda/include/
sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/
sudo chmod a+r /usr/local/cuda/include/cudnn*
sudo chmod a+r /usr/local/cuda/lib64/libcudnn*
</code></pre> 
<p>(路径是自己安装cuda的路径，根据自己的更改就好)</p> 
<p>5.4. 重新安装：</p> 
<pre><code>cd spconv
python setup.py bdist_wheel
cd ./dist
ls 
#ls之后会显示你的whl文件的名称，复制下来用pip install安装
#换成自己的whl文件名字
pip install spconv-1.2.1-cp36-cp36m-linux_x86_64.whl
#之后会有英文提示，安装成功

#检测安装是否成功
#命令行输入
python
                                                                                                                                       
#如果可以import说明安装成功
</code></pre> 
<p>恭喜你，至此spconv库就安装完成！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/34275815d1b23e1410bc9eaeb655b278/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[C] 深度优先搜索解决连通块/染色问题——求岛的个数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e45ca6a3e58767bd73891877ed1d7485/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">phthon入门必备知识</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>