<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ros仿真学习笔记_2 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ros仿真学习笔记_2" />
<meta property="og:description" content="xacro优化代码： 新建功能包：
catkin_create_pkg xx urdf xacro 1 . 优化上节小车代码：
① 底盘代码
在xacro文件夹下创建robot.xacro
touch robot.xacro &lt;!-- 设置机器人底盘--&gt; &lt;!-- 1.代码复用 2.参数设计 --&gt; &lt;robot name=&#34;mycar&#34; xmlns:xacro=&#34;http://wiki.ros.org/xacro&#34;&gt; &lt;!-- 一、属性封装--&gt; &lt;xacro:property name=&#34;footprint_radius&#34; value=&#34;0.001&#34; /&gt; &lt;!-- 1.base_footprint--&gt; &lt;link name=&#34;base_footprint&#34;&gt; &lt;visual&gt; &lt;geometry&gt; &lt;sphere radius=&#34;${footprint_radius}&#34; /&gt;	&lt;/geometry&gt;	&lt;/visual&gt; &lt;/link&gt; &lt;xacro:property name=&#34;base_link_radius&#34; value=&#34;0.1&#34; /&gt; &lt;xacro:property name=&#34;base_link_length&#34; value=&#34;0.08&#34; /&gt; &lt;xacro:property name=&#34;lidi&#34; value=&#34;0.015&#34; /&gt; &lt;xacro:property name=&#34;base_joint_z&#34; value=&#34;${base_link_length/2&#43;lidi}&#34; /&gt; &lt;!-- 2.底盘link--&gt; &lt;link name=&#34;base_link&#34;&gt; &lt;visual&gt; &lt;geometry&gt; &lt;cylinder radius=&#34;${base_link_radius}&#34; length=&#34;${base_link_length}&#34; /&gt;	&lt;/geometry&gt;	&lt;origin xyz=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c533ffd8ede01f97d6ad2ae4b7fb0e66/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-23T15:12:14+08:00" />
<meta property="article:modified_time" content="2022-06-23T15:12:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ros仿真学习笔记_2</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="xacro_0"></a>xacro优化代码：</h2> 
<p>新建功能包：</p> 
<pre><code class="prism language-cpp">catkin_create_pkg xx urdf xacro
</code></pre> 
<p>1 . 优化上节小车代码：<br> ① 底盘代码<br> 在xacro文件夹下创建robot.xacro</p> 
<pre><code class="prism language-cpp">touch robot<span class="token punctuation">.</span>xacro
</code></pre> 
<pre><code class="prism language-cpp"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置机器人底盘<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 
	<span class="token number">1.</span>代码复用
	<span class="token number">2.</span>参数设计
<span class="token operator">--</span><span class="token operator">&gt;</span>


<span class="token operator">&lt;</span>robot name<span class="token operator">=</span><span class="token string">"mycar"</span> xmlns<span class="token operator">:</span>xacro<span class="token operator">=</span><span class="token string">"http://wiki.ros.org/xacro"</span><span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 一、属性封装<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"footprint_radius"</span> value<span class="token operator">=</span><span class="token string">"0.001"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">1.</span>base_footprint<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>link name<span class="token operator">=</span><span class="token string">"base_footprint"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>visual<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>geometry<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>sphere radius<span class="token operator">=</span><span class="token string">"${footprint_radius}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
			<span class="token operator">&lt;</span><span class="token operator">/</span>geometry<span class="token operator">&gt;</span>			 		
		<span class="token operator">&lt;</span><span class="token operator">/</span>visual<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>link<span class="token operator">&gt;</span>
		
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"base_link_radius"</span> value<span class="token operator">=</span><span class="token string">"0.1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"base_link_length"</span> value<span class="token operator">=</span><span class="token string">"0.08"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"lidi"</span> value<span class="token operator">=</span><span class="token string">"0.015"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"base_joint_z"</span> value<span class="token operator">=</span><span class="token string">"${base_link_length/2+lidi}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">2.</span>底盘link<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>link name<span class="token operator">=</span><span class="token string">"base_link"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>visual<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>geometry<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>cylinder radius<span class="token operator">=</span><span class="token string">"${base_link_radius}"</span> length<span class="token operator">=</span><span class="token string">"${base_link_length}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
			<span class="token operator">&lt;</span><span class="token operator">/</span>geometry<span class="token operator">&gt;</span>	
					 
			<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 0 0"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
				
			<span class="token operator">&lt;</span>material name<span class="token operator">=</span><span class="token string">"car_color"</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>color rgba<span class="token operator">=</span><span class="token string">"1.0 0.5 0 0.5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>			
			<span class="token operator">&lt;</span><span class="token operator">/</span>material<span class="token operator">&gt;</span>		
		<span class="token operator">&lt;</span><span class="token operator">/</span>visual<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>link<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">2.1</span> 关联 base_footprint 与 底盘base_link <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>joint name<span class="token operator">=</span><span class="token string">"link2footprint"</span> type<span class="token operator">=</span><span class="token string">"fixed"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>parent link<span class="token operator">=</span><span class="token string">"base_footprint"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>child link<span class="token operator">=</span><span class="token string">"base_link"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置偏移量<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 0 ${base_joint_z}"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>joint<span class="token operator">&gt;</span>


	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"wheel_radius"</span> value<span class="token operator">=</span><span class="token string">"0.0325"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"wheel_length"</span> value<span class="token operator">=</span><span class="token string">"0.015"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"PI"</span> value<span class="token operator">=</span><span class="token string">"3.1415927"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"wheel_joint_z"</span> value<span class="token operator">=</span><span class="token string">"${(base_link_length/2+lidi-wheel_radius)*(-1)}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>二、 宏封装<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 
		wheel_name <span class="token operator">:</span> left <span class="token operator">or</span> right
		flag <span class="token operator">:</span> <span class="token number">1</span> <span class="token operator">or</span> <span class="token operator">-</span><span class="token number">1</span>
	
	<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>macro name<span class="token operator">=</span><span class="token string">"wheel_func"</span> params<span class="token operator">=</span><span class="token string">"wheel_name flag"</span><span class="token operator">&gt;</span>
	
		<span class="token operator">&lt;</span>link name<span class="token operator">=</span><span class="token string">"${wheel_name}_wheel"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>visual<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>geometry<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>cylinder radius<span class="token operator">=</span><span class="token string">"${wheel_radius}"</span> length<span class="token operator">=</span><span class="token string">"${wheel_length}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>	
				<span class="token operator">&lt;</span><span class="token operator">/</span>geometry<span class="token operator">&gt;</span>	
				
				<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 先默认使用，后期需要更改<span class="token operator">--</span><span class="token operator">&gt;</span>		 
				<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 0 0"</span> rpy<span class="token operator">=</span><span class="token string">"${PI/2} 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
							
				<span class="token operator">&lt;</span>material name<span class="token operator">=</span><span class="token string">"${wheel_name}_wheel_color"</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>color rgba<span class="token operator">=</span><span class="token string">"0 0 0 0.5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>			
				<span class="token operator">&lt;</span><span class="token operator">/</span>material<span class="token operator">&gt;</span>		
			<span class="token operator">&lt;</span><span class="token operator">/</span>visual<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>link<span class="token operator">&gt;</span>

		<span class="token operator">&lt;</span>joint name<span class="token operator">=</span><span class="token string">"${wheel_name}_2base"</span> type<span class="token operator">=</span><span class="token string">"continuous"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>parent link<span class="token operator">=</span><span class="token string">"base_link"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
				
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>child link<span class="token operator">=</span><span class="token string">"${wheel_name}_wheel"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置偏移量<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 ${0.1 * flag} ${wheel_joint_z}"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置关节旋转参考的坐标轴<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>axis xyz<span class="token operator">=</span><span class="token string">"0 1 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span><span class="token operator">/</span>joint<span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">/</span>xacro<span class="token operator">:</span>macro<span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>三、 宏调用才会生效<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>wheel_func wheel_name<span class="token operator">=</span><span class="token string">"left"</span> flag<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>wheel_func wheel_name<span class="token operator">=</span><span class="token string">"right"</span> flag<span class="token operator">=</span><span class="token string">"-1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>四、 万向轮<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">4.1</span> 属性封装<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"small_wheel_radius"</span> value<span class="token operator">=</span><span class="token string">"0.0075"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"small_joint_z"</span> value<span class="token operator">=</span><span class="token string">"${(base_link_length/2+lidi-small_wheel_radius)*(-1)}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>macro name<span class="token operator">=</span><span class="token string">"small_wheel_func"</span> params<span class="token operator">=</span><span class="token string">"small_wheel_name flag"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">4.2</span> 万向轮link<span class="token operator">--</span><span class="token operator">&gt;</span>
	
		<span class="token operator">&lt;</span>link name<span class="token operator">=</span><span class="token string">"${small_wheel_name}_wheel"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>visual<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>geometry<span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>sphere radius<span class="token operator">=</span><span class="token string">"${small_wheel_radius}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>	
				<span class="token operator">&lt;</span><span class="token operator">/</span>geometry<span class="token operator">&gt;</span>	
				
				<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 先默认使用，后期需要更改<span class="token operator">--</span><span class="token operator">&gt;</span>		 
				<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 0 0"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
							
				<span class="token operator">&lt;</span>material name<span class="token operator">=</span><span class="token string">"${small_wheel_name}_wheel_color"</span><span class="token operator">&gt;</span>
					<span class="token operator">&lt;</span>color rgba<span class="token operator">=</span><span class="token string">"1 0 0 0.5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>			
				<span class="token operator">&lt;</span><span class="token operator">/</span>material<span class="token operator">&gt;</span>		
			<span class="token operator">&lt;</span><span class="token operator">/</span>visual<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>link<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">4.3</span>万向轮joint<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>joint name<span class="token operator">=</span><span class="token string">"${small_wheel_name}_wheel2base"</span> type<span class="token operator">=</span><span class="token string">"continuous"</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>parent link<span class="token operator">=</span><span class="token string">"base_link"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
				
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>child link<span class="token operator">=</span><span class="token string">"${small_wheel_name}_wheel"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置偏移量<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"${0.08*flag} 0 ${small_joint_z}"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置关节旋转参考的坐标轴<span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>axis xyz<span class="token operator">=</span><span class="token string">"0 1 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span><span class="token operator">/</span>joint<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>xacro<span class="token operator">:</span>macro<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>small_wheel_func small_wheel_name<span class="token operator">=</span><span class="token string">"front"</span> flag<span class="token operator">=</span><span class="token string">"1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>small_wheel_func small_wheel_name<span class="token operator">=</span><span class="token string">"back"</span> flag<span class="token operator">=</span><span class="token string">"-1"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>robot<span class="token operator">&gt;</span>
</code></pre> 
<p>② 相机代码<br> 在xacro文件夹下创建camera.xacro</p> 
<pre><code class="prism language-cpp">touch camera<span class="token punctuation">.</span>xacro
</code></pre> 
<pre><code class="prism language-cpp"><span class="token operator">&lt;</span>robot name<span class="token operator">=</span><span class="token string">"mycar"</span> xmlns<span class="token operator">:</span>xacro<span class="token operator">=</span><span class="token string">"http://wiki.ros.org/xacro"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 摄像头部件<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">1.</span>摄像头link<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 厚度<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"camera_length"</span> value<span class="token operator">=</span><span class="token string">"0.02"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 宽度<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"camera_width"</span> value<span class="token operator">=</span><span class="token string">"0.05"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 高度<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"camera_height"</span> value<span class="token operator">=</span><span class="token string">"0.05"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_camera_x"</span> value<span class="token operator">=</span><span class="token string">"0.08"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_camera_y"</span> value<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_camera_z"</span> value<span class="token operator">=</span><span class="token string">"${base_link_length/2+camera_height/2}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">2.</span>设置连杆与关节<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>link name<span class="token operator">=</span><span class="token string">"camera"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>visual<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>geometry<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>box size<span class="token operator">=</span><span class="token string">"${camera_length} ${camera_width} ${camera_height}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
			<span class="token operator">&lt;</span><span class="token operator">/</span>geometry<span class="token operator">&gt;</span>	
					 
			<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 0 0"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
				
			<span class="token operator">&lt;</span>material name<span class="token operator">=</span><span class="token string">"camera_color"</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>color rgba<span class="token operator">=</span><span class="token string">"1.0 1.0 0 0.5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>			
			<span class="token operator">&lt;</span><span class="token operator">/</span>material<span class="token operator">&gt;</span>		
		<span class="token operator">&lt;</span><span class="token operator">/</span>visual<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>link<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span>joint name<span class="token operator">=</span><span class="token string">"camera2base"</span> type<span class="token operator">=</span><span class="token string">"fixed"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>parent link<span class="token operator">=</span><span class="token string">"base_link"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>child link<span class="token operator">=</span><span class="token string">"camera"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置偏移量<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"${joint_camera_x} ${joint_camera_y} ${joint_camera_z}"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
	<span class="token operator">&lt;</span><span class="token operator">/</span>joint<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>robot<span class="token operator">&gt;</span>
</code></pre> 
<p>③ 雷达代码<br> 在xacro文件夹下创建lidar.xacro</p> 
<pre><code class="prism language-cpp">touch lidar<span class="token punctuation">.</span>xacro
</code></pre> 
<pre><code class="prism language-cpp"><span class="token operator">&lt;</span>robot name<span class="token operator">=</span><span class="token string">"mycar"</span> xmlns<span class="token operator">:</span>xacro<span class="token operator">=</span><span class="token string">"http://wiki.ros.org/xacro"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 雷达部件<span class="token operator">--</span><span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 支架半径<span class="token operator">--</span><span class="token operator">&gt;</span>	
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"support_radius"</span> value<span class="token operator">=</span><span class="token string">"0.01"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 支架高度<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"support_length"</span> value<span class="token operator">=</span><span class="token string">"0.15"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 雷达半径<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"lidar_radius"</span> value<span class="token operator">=</span><span class="token string">"0.03"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 雷达高度<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"lidar_length"</span> value<span class="token operator">=</span><span class="token string">"0.05"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 支架的坐标偏移<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_support_x"</span> value<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_support_y"</span> value<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_support_z"</span> value<span class="token operator">=</span><span class="token string">"${base_link_length/2+support_length/2}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 雷达的坐标偏移<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_lidar_x"</span> value<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_lidar_y"</span> value<span class="token operator">=</span><span class="token string">"0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>property name<span class="token operator">=</span><span class="token string">"joint_lidar_z"</span> value<span class="token operator">=</span><span class="token string">"${support_length/2+lidar_length/2}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 支架link<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>link name<span class="token operator">=</span><span class="token string">"support"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>visual<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>geometry<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>cylinder radius<span class="token operator">=</span><span class="token string">"${support_radius}"</span> length<span class="token operator">=</span><span class="token string">"${support_length}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
			<span class="token operator">&lt;</span><span class="token operator">/</span>geometry<span class="token operator">&gt;</span>	
					 
			<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 0 0"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
				
			<span class="token operator">&lt;</span>material name<span class="token operator">=</span><span class="token string">"support_color"</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>color rgba<span class="token operator">=</span><span class="token string">"1.0 0.5 1 0.5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>			
			<span class="token operator">&lt;</span><span class="token operator">/</span>material<span class="token operator">&gt;</span>		
		<span class="token operator">&lt;</span><span class="token operator">/</span>visual<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>link<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 支架joint<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>joint name<span class="token operator">=</span><span class="token string">"support2base"</span> type<span class="token operator">=</span><span class="token string">"fixed"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>parent link<span class="token operator">=</span><span class="token string">"base_link"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>child link<span class="token operator">=</span><span class="token string">"support"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置偏移量<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"${joint_support_x} ${joint_support_y} ${joint_support_z}"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>joint<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 雷达link<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>link name<span class="token operator">=</span><span class="token string">"lidar"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>visual<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>geometry<span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>cylinder radius<span class="token operator">=</span><span class="token string">"${lidar_radius}"</span> length<span class="token operator">=</span><span class="token string">"${lidar_length}"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
			<span class="token operator">&lt;</span><span class="token operator">/</span>geometry<span class="token operator">&gt;</span>	
					 
			<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"0 0 0"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>		
				
			<span class="token operator">&lt;</span>material name<span class="token operator">=</span><span class="token string">"lidar_color"</span><span class="token operator">&gt;</span>
				<span class="token operator">&lt;</span>color rgba<span class="token operator">=</span><span class="token string">"1.0 0.5 0.5 0.5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>			
			<span class="token operator">&lt;</span><span class="token operator">/</span>material<span class="token operator">&gt;</span>		
		<span class="token operator">&lt;</span><span class="token operator">/</span>visual<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>link<span class="token operator">&gt;</span>

	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 雷达joint<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>joint name<span class="token operator">=</span><span class="token string">"lidar2support"</span> type<span class="token operator">=</span><span class="token string">"fixed"</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>parent link<span class="token operator">=</span><span class="token string">"support"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
			
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子级 link<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>child link<span class="token operator">=</span><span class="token string">"lidar"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 设置偏移量<span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>origin xyz<span class="token operator">=</span><span class="token string">"${joint_lidar_x} ${joint_lidar_y} ${joint_lidar_z}"</span> rpy<span class="token operator">=</span><span class="token string">"0 0 0"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
		
	<span class="token operator">&lt;</span><span class="token operator">/</span>joint<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>robot<span class="token operator">&gt;</span>
</code></pre> 
<p>④ 整合代码<br> 在xacro文件夹下创建car.xacro</p> 
<pre><code class="prism language-cpp">touch car<span class="token punctuation">.</span>xacro
</code></pre> 
<pre><code class="prism language-cpp"><span class="token operator">&lt;</span>robot name<span class="token operator">=</span><span class="token string">"mycar"</span> xmlns<span class="token operator">:</span>xacro<span class="token operator">=</span><span class="token string">"http://wiki.ros.org/xacro"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">1.</span>包含底盘、摄像头和雷达的 xacro文件<span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>include filename<span class="token operator">=</span><span class="token string">"robot.urdf.xacro"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>include filename<span class="token operator">=</span><span class="token string">"camera.urdf.xacro"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>xacro<span class="token operator">:</span>include filename<span class="token operator">=</span><span class="token string">"lidar.urdf.xacro"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>robot<span class="token operator">&gt;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7d2eef0c1a09df5005d956e41c39d5a6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深度学习系列48：超分模型Real-ESRGAN</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ed4e19a3075baf19c20ab74b120719e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">驱动程序无法通过使用安全套接字层(SSL)加密与 SQL Server 建立安全连接</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>