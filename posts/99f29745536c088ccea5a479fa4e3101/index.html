<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Jsonp 跨域的原理以及Jquery的解决方案 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Jsonp 跨域的原理以及Jquery的解决方案" />
<meta property="og:description" content="原理：JSONP即JSON with Padding。由于同源策略的限制，XmlHttpRequest只允许请求当前源（域名、协议、端口）的资源。如果要进行跨域请求，我们可以通过使用html的script标记来进行跨域请求，并在响应中返回要执行的script代码，其中可以直接使用JSON传递javascript对象。这种跨域的通讯方式称为JSONP。
个人理解：
就是在客户端动态注册一个函数function a(data)，然后将函数名传到服务器，服务器返回一个a({/*json*/})到客户端运行,这样就调用客户端的function a(data),从而实现了跨域.
&lt;! DOCTYPE html PUBLIC &#34; -//W//DTD XHTML Transitional//EN &#34; &#34; http://www.worg/TR/xhtmlDTD/xhtmltransitional.dtd &#34; &gt; &lt; html xmlns = &#34; http://www.worg/xhtml &#34; &gt; &lt; head &gt; &lt; title &gt; Test Jsonp &lt; / title&gt; &lt; script src = &#34; http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js &#34; type = &#34; text/javascript &#34; &gt;&lt; / script&gt; &lt; script type = &#34; text/javascript &#34; &gt; function jsonpCallback (result) { $.each(result.items, function (i,item){" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/99f29745536c088ccea5a479fa4e3101/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-04T18:32:35+08:00" />
<meta property="article:modified_time" content="2019-07-04T18:32:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Jsonp 跨域的原理以及Jquery的解决方案</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>原理：JSONP即JSON with Padding。由于同源策略的限制，XmlHttpRequest只允许请求当前源（域名、协议、端口）的资源。如果要进行跨域请求，我们可以通过使用html的script标记来进行跨域请求，并在响应中返回要执行的script代码，其中可以直接使用JSON传递javascript对象。这种跨域的通讯方式称为JSONP。</p> 
 <p>个人理解：</p> 
 <p>     就是在客户端动态注册一个函数function a(data)，然后将函数名传到服务器，服务器返回一个a({/*json*/})到客户端运行,这样就调用客户端的function a(data),从而实现了跨域.</p> 
 <div class="cnblogs_code"> 
  <div> 
   <span style="color:#000000;">&lt;!</span> 
   <span style="color:#000000;">DOCTYPE html PUBLIC </span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">-//W//DTD XHTML Transitional//EN</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://www.worg/TR/xhtmlDTD/xhtmltransitional.dtd</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">html xmlns</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://www.worg/xhtml</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">head</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br>    </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">title</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">Test Jsonp</span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">title&gt;  </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">    </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">script src</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;"> type</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">text/javascript</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&gt;&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">script&gt;      </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">    </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">script type</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">text/javascript</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br>            </span> 
   <span style="color:#0000ff;">function</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#FF0000;">jsonpCallback</span> 
   <span style="color:#000000;">(result)   <br>            {              <br>                 $.each(result.items, </span> 
   <span style="color:#0000ff;">function</span> 
   <span style="color:#000000;">(i,item){<!-- --><br>                       $(</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&lt;img/&gt;</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">).attr(</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">src</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">, item.media.m).appendTo(</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">body</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">);<br>                       </span> 
   <span style="color:#0000ff;">if</span> 
   <span style="color:#000000;"> ( i </span> 
   <span style="color:#000000;">==</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#000000;">3</span> 
   <span style="color:#000000;"> ) </span> 
   <span style="color:#0000ff;">return</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#0000ff;">false</span> 
   <span style="color:#000000;">;<br>                 });  <br>            }   <br>        </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">script&gt;</span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">head&gt;  </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">body</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">script type</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">text/javascript</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;"> src</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&amp;tagmode=any&amp;format=json&amp;</span> 
   <span style="color:#FF0000;">jsoncallback=jsonpCallback</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&gt;&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">script&gt;   </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">body&gt;  </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">html&gt;</span> 
  </div> 
 </div> 
 <p> </p> 
 <p>jQuery的解决方案：</p> 
 <div class="cnblogs_code"> 
  <div> 
   <span style="color:#000000;">&lt;!</span> 
   <span style="color:#000000;">DOCTYPE html PUBLIC </span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">-//W//DTD XHTML Transitional//EN</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://www.worg/TR/xhtmlDTD/xhtmltransitional.dtd</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">html xmlns</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://www.worg/xhtml</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">head</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">  <br>    </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">title</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;">Test Jsonp</span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">title&gt;  </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">    </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">script src</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://ajax.microsoft.com/ajax/jquery/jquery-1.4.2.js</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;"> type</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">text/javascript</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&gt;&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">script&gt;      </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">    </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">script type</span> 
   <span style="color:#000000;">=</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">text/javascript</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&gt;</span> 
   <span style="color:#000000;"><br>        $(</span> 
   <span style="color:#0000ff;">function</span> 
   <span style="color:#000000;">() {<!-- --><br>            </span> 
   <span style="color:#FF0000;">$.getJSON(</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&amp;tagmode=any&amp;format=json&amp;</span> 
   <span style="color:#FF0000;">jsoncallback=?</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">, </span> 
   <span style="color:#0000ff;">function</span> 
   <span style="color:#000000;">(data) {<!-- --><br>                $.each(data.items, </span> 
   <span style="color:#0000ff;">function</span> 
   <span style="color:#000000;">(i, item) {<!-- --><br>                    $(</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">&lt;img/&gt;</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">).attr(</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">src</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">, item.media.m).appendTo(</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">body</span> 
   <span style="color:#000000;">"</span> 
   <span style="color:#000000;">);<br>                    </span> 
   <span style="color:#0000ff;">if</span> 
   <span style="color:#000000;"> (i </span> 
   <span style="color:#000000;">==</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#000000;">3</span> 
   <span style="color:#000000;">) </span> 
   <span style="color:#0000ff;">return</span> 
   <span style="color:#000000;"> </span> 
   <span style="color:#0000ff;">false</span> 
   <span style="color:#000000;">;<br>                });<br>            });<br>        });        <br>    </span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">script&gt;</span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">head&gt;  </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">body</span> 
   <span style="color:#000000;">&gt;&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">body&gt;  </span> 
   <span style="color:#000000;"><br></span> 
   <span style="color:#000000;">&lt;</span> 
   <span style="color:#000000;">/</span> 
   <span style="color:#000000;">html&gt;</span> 
  </div> 
 </div> 
 <p> </p> 
 <p>jquery 的jsoncallback是动态生成的，真正请求服务器的地址：<a href="http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&amp;tagmode=any&amp;format=json&amp;jsoncallback=jsonp1274058545738" rel="nofollow">http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&amp;tagmode=any&amp;format=json&amp;jsoncallback=<span style="color:#FF0000;">jsonp1274058545738</span></a></p> 
</div> 
<p>转载于:https://www.cnblogs.com/DanielChow/archive/2010/05/17/1737070.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/093b55df304a1502db2c70f8566c81aa/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一个数字划分成两个之差最小的数组问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f0e6b5c567cb1f062c494cf9f64a385e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MySql lower_case_table_names 导致 errno:150</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>