<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序/uniapp分享功能-代码封装与使用（分享好友或朋友圈-两种方式） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序/uniapp分享功能-代码封装与使用（分享好友或朋友圈-两种方式）" />
<meta property="og:description" content="官方地址：分享 | uni-app官网 一、分享朋友圈-详见uni-app官方文档 注意：更多注意事项见uni-app文档
结果展示：
二、分享好友或者朋友圈-详见微信开放文档 先展示：
实现分享好友
实现分享朋友圈
注意：这两个方法和页面生命周期onLoad（）同一级
详见代码：
onLoad(option) {
this.setPaintOrgIdData(option);
this.getProductData(option);
},
// 微信小程序右上角分享
onShareAppMessage() {
return this.getShareData();
},
// 转发至朋友圈
onShareTimeline() {
return this.getShareData(&#34;timeline&#34;);
},
methods：{
getShareData(type) {
let title = &#34;分享标题&#34;;
// 判断本地是否存在ID---------（这个不重要，目的是为了获取 path）
let paintOrgId = uni.getStorageSync(&#34;paintOrgId&#34;);
let path = `/pages/index/index`;
if (paintOrgId) {
path = `${path}?id=${paintOrgId}`;
}
let imageUrl = &#34;../../static/images/public/ic_unified_share.png&#34;;
if (type == &#34;timeline&#34;) {
return {
title,
imageUrl," />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1baa0878785e6eb33f0fc100a10fcfdc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-13T20:25:09+08:00" />
<meta property="article:modified_time" content="2022-12-13T20:25:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序/uniapp分享功能-代码封装与使用（分享好友或朋友圈-两种方式）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2> 官方地址：<a class="link-info" href="https://uniapp.dcloud.net.cn/api/plugins/share.html#%E5%88%86%E4%BA%AB" rel="nofollow" title="分享 | uni-app官网">分享 | uni-app官网</a></h2> 
<p></p> 
<h3><strong>一、分享朋友圈-详见uni-app官方文档</strong></h3> 
<p><img alt="" height="587" src="https://images2.imgbox.com/d9/cb/HLBvdmBm_o.png" width="1110"></p> 
<p> <img alt="" height="457" src="https://images2.imgbox.com/ca/2b/dpvOHK4Y_o.png" width="353"><img alt="" height="287" src="https://images2.imgbox.com/aa/b9/lRcdCwUO_o.png" width="330"></p> 
<p><img alt="" height="528" src="https://images2.imgbox.com/d8/e0/yHRfL89a_o.png" width="1196"><br><br><strong><span style="color:#fe2c24;">注意：更多注意事项见uni-app文档</span></strong><img alt="" height="239" src="https://images2.imgbox.com/b4/e8/2xLC7COJ_o.png" width="829"></p> 
<p><img alt="" height="389" src="https://images2.imgbox.com/aa/b6/RJ6RVeqm_o.png" width="733"></p> 
<p><span style="color:#fe2c24;"><strong> 结果展示：</strong></span></p> 
<p><img alt="" height="114" src="https://images2.imgbox.com/5c/d6/cMwC0Sjg_o.png" width="904"></p> 
<p><img alt="" height="845" src="https://images2.imgbox.com/e3/d7/JYoUTajY_o.png" width="495"></p> 
<p><img alt="" height="225" src="https://images2.imgbox.com/9a/05/q6hFi8hl_o.png" width="441"></p> 
<p></p> 
<p></p> 
<h3><strong>二、分享好友或者朋友圈-详见微信开放文档</strong></h3> 
<p><strong>先展示：</strong></p> 
<p><img alt="" height="717" src="https://images2.imgbox.com/bd/b5/scLiiyZY_o.png" width="397"></p> 
<p></p> 
<p><strong><span style="color:#fe2c24;"> 实现分享好友</span></strong></p> 
<p><strong><img alt="" height="180" src="https://images2.imgbox.com/40/b5/baJOegcX_o.png" width="771"></strong></p> 
<p><strong><span style="color:#fe2c24;"> 实现分享朋友圈</span></strong></p> 
<p> <img alt="" height="251" src="https://images2.imgbox.com/5b/a7/dq7JeBUB_o.png" width="618"></p> 
<p><strong><span style="color:#fe2c24;">注意：这两个方法和页面生命周期onLoad（）同一级</span></strong></p> 
<p><strong> 详见代码：</strong></p> 
<blockquote> 
 <p>onLoad(option) {<!-- --><br>     this.setPaintOrgIdData(option);<br>     this.getProductData(option);<br>   },<br>   // 微信小程序右上角分享<br>   onShareAppMessage() {<!-- --><br>     return this.getShareData();<br>   },<br>   // 转发至朋友圈<br>   onShareTimeline() {<!-- --><br>     return this.getShareData("timeline");<br>   },</p> 
 <p>methods：{<!-- --></p> 
 <p>        getShareData(type) {<!-- --><br>               let title = "分享标题";<br>               // 判断本地是否存在ID---------（这个不重要，目的是为了获取 path）<br>               let paintOrgId = uni.getStorageSync("paintOrgId");<br>               let path = `/pages/index/index`;<br>               if (paintOrgId) {<!-- --><br>                         path = `${path}?id=${paintOrgId}`;<br>               }<br>               let imageUrl = "../../static/images/public/ic_unified_share.png";<br>               if (type == "timeline") {<!-- --><br>                         return {<!-- --><br>                                   title,<br>                                   imageUrl,<br>                                   query: path,<br>                         };<br>               }<br>               return {<!-- --><br>                         title,<br>                         imageUrl,<br>                         path,<br>               };<br>     },</p> 
 <p>}</p> 
</blockquote> 
<p><span style="color:#fe2c24;"><strong>模仿上面的代码就能实现</strong></span></p> 
<p></p> 
<h2>代码封装与使用：</h2> 
<p> 首先在mixins文件夹下面新建share.js；</p> 
<pre><code class="language-javascript">export default {
	data() {
		return {
			// 默认的全局分享内容
			share: {
				title: '标题',
				path: '/pages/login/login',    // 全局分享的路径
				imageUrl: 'https://1305646404.cos.ap-nanjing.myqcloud.com/activity/red_package.jpeg',    // 全局分享的图片
				desc: '分享的描述'
			}
		}
	},
	// 定义全局分享
	// 1.发送给朋友
    onShareAppMessage(res) {
        return {
			title: this.share.title,
			path: this.share.path,
			desc: this.share.desc,
			imageUrl: this.share.imageUrl,
		}
    },
	//2.分享到朋友圈
    onShareTimeline(res) {
        return {
			title: this.share.title,
			path: this.share.path,
			desc: this.share.desc,
			imageUrl: this.share.imageUrl,
		}
    },
}</code></pre> 
<h4>在我们需要的使用的页面<strong><span style="color:#fe2c24;">import</span></strong>进来进行混合；</h4> 
<blockquote> 
 <p>import share from '@/mixins/share.js'</p> 
</blockquote> 
<p><img alt="" height="136" src="https://images2.imgbox.com/d6/62/a0bSAYYH_o.png" width="601"></p> 
<h4> 如果自己不想用默认的配置，先修改下信息，可以直接通过<span style="color:#fe2c24;"><strong>this</strong></span>来调用进行修改；</h4> 
<p><img alt="" height="387" src="https://images2.imgbox.com/4c/83/zNclFmPi_o.png" width="571"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5875441931a238b435e437f3ed60db91/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PostgreSQL 循环遍历结果集</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7a3dd0d72e1e33a6faed1d89a5a99556/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux命名空间简述</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>