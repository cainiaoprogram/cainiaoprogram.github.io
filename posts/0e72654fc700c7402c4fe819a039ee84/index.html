<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络（一）：物理层、数据链路层、网络层 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络（一）：物理层、数据链路层、网络层" />
<meta property="og:description" content="网络（一）：物理层、数据链路层、网络层 物理层(集线器)Q：接收方怎么知道这数据包是发给自己的？ 数据链路层(交换器)Q：MAC地址表如何中的数据是怎么来的？如何维护?Q：交换器端口连接的是另一个交换器MAC地址表如何存储？ 网络层(路由器)Q：怎么判断电脑在同一个以太网内？Q：为什么引入一个带有MAC地址的设备后，能让MAC地址表更容易维护？ 补充MAC地址 参考 物理层(集线器) 当我们试图建立两台电脑直接的连接时，可以用一根网线将他连接起来，只需每台电脑上各有一个网口，三台电脑互相连接，需要每台电脑上各有两个网口，随着需要连接的电脑的数量的增加，一台电脑上的网口数量也随之增加，这个时候我们需要一个更好的方式来替代这种方式 ———— 集线器
作用：将电信号不做任何处理转发给其它电脑(广播)。
物理层：因为集线器对电信号不做任何处理，所以定义为物理层。
Q：接收方怎么知道这数据包是发给自己的？ 数据包结构图
发送方发送的数据包中会携带自己的MAC地址与接收方的MAC地址，将该数据包广播出去后，接收方通过对数据包头部中的目标MAC地址进行判断，属于自己的则接收，不属于自己的则丢弃。
数据链路层(交换器) 因为广播这种方式，既不安全，又浪费网络资源，所以我们需要一个更加智能的设备 ———— 交换器。由于其相对于交换器比较智能，我们将它划分到 “数据链路层” 。
从图中我们可以看到，交换机维护有一张MAC地址表(映射MAC地址和它的端口)。
作用：交换机接收发送方发来的数据包后，通过与自身维护的MAC地址表比较，找到与目标MAC地址映射的端口，通过该端口将数据包发给接收方。通过上述传输方式组成的小范围网络叫做：“以太网”。
Q：MAC地址表如何中的数据是怎么来的？如何维护? 通过以太网内各节点之间不断通过交换机通信，不断完善起来的。
发送方发送数据包给交换器：发送方将数据包发送给交换器，若交换器维护的MAC地址表中，找不到发送方的MAC地址映射，则将该地址加入MAC地址进行维护。交换器转发数据包给接收方：交换器中维护有接收方MAC地址，则直接转发；未维护接收方MAC地址，则将数据包广播出去，目标电脑接收到数据包后，做出响应，MAC地址表更新一条记录。 Q：交换器端口连接的是另一个交换器MAC地址表如何存储？ 左边交换器
MAC地址端口bb-bb-bb-bb-bb-bb1cc-cc-cc-cc-cc-cc3aa-aa-aa-aa-aa-aa4dd-dd-dd-dd-dd-dd5ee-ee-ee-ee-ee-ee6ff-ff-ff-ff-ff-ff6gg-gg-gg-gg-gg-gg6hh-hh-hh-hh-hh-hh6 结论：会将另一交换机所连接的电脑MAC地址全部维护进MAC地址表中
网络层(路由器) 随着连接的电脑数量的不断增加，交换机将变得难以无法维护，我们需要接入一个带有MAC地址的设备，同时还能对数据包进行一次转发————路由器。
注意：路由器每一个端口都有一个MAC地址
从图中我们可以看出，在同一个以太网内的电脑不需要路由器进行转发；在不同以太网内的电脑需要通过路由器进行转发。
Q：怎么判断电脑在同一个以太网内？ 方法：赋予给每个以太网一个独有的标志(子网)，用于判断。
目前为止，我们用于判断发送方与接收方的唯一标识是MAC地址，假设，我们将MAC地址的一部分(前24位)作为该标志，但是我们知道MAC地址是在出厂时就固定了的，也就意味着，我们需要针对不同的以太网购置不同厂商的设备，且不说厂商是否有这么多家，而且日后这个网络的结构都不能轻易改变。
因此需要发明一个新的地址信息 “ip地址” 。 “ip地址” 是在软件层面上的地址信息，所以这是可以被我们控制的。我们通过子网掩码，对ip地址进行计算，得到子网。
总结
通过发送方电脑上设置的子网掩码，对发送方ip地址与接收方ip地址进行计算，如果相同，则不需要通过路由器进行转发；不同，则需要通过路由器进行转发。
Q：为什么引入一个带有MAC地址的设备后，能让MAC地址表更容易维护？ 引入路由器之前
MAC地址端口bb-bb-bb-bb-bb-bb1cc-cc-cc-cc-cc-cc3aa-aa-aa-aa-aa-aa4dd-dd-dd-dd-dd-dd5ee-ee-ee-ee-ee-ee6ff-ff-ff-ff-ff-ff6gg-gg-gg-gg-gg-gg6hh-hh-hh-hh-hh-hh6 引入入路由器之后
MAC地址端口bb-bb-bb-bb-bb-bb1cc-cc-cc-cc-cc-cc3aa-aa-aa-aa-aa-aa4dd-dd-dd-dd-dd-dd5ef-gh-ef-gh-ef-gh6 可以看到未引入路由器之前，MAC地址表需要另一台交换器上的所有电脑MAC地址，而引入之后，则只需要维护路由器的MAC地址即可。
补充 MAC地址 MAC地址又称物理地址、硬件地址。长度为 48 位。前24位，代表网络硬件制造商的编号；后24位，是该厂家自己分配的，一般表示系列号。
参考 如果让你来设计网络，你会如何设计？" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/0e72654fc700c7402c4fe819a039ee84/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-24T16:23:43+08:00" />
<meta property="article:modified_time" content="2022-03-24T16:23:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络（一）：物理层、数据链路层、网络层</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>网络（一）：物理层、数据链路层、网络层</h4> 
 <ul><li><a href="#_2" rel="nofollow">物理层(集线器)</a></li><li><ul><li><a href="#Q_9" rel="nofollow">Q：接收方怎么知道这数据包是发给自己的？</a></li></ul> 
  </li><li><a href="#_14" rel="nofollow">数据链路层(交换器)</a></li><li><ul><li><a href="#QMAC_22" rel="nofollow">Q：MAC地址表如何中的数据是怎么来的？如何维护?</a></li><li><a href="#QMAC_28" rel="nofollow">Q：交换器端口连接的是另一个交换器MAC地址表如何存储？</a></li></ul> 
  </li><li><a href="#_47" rel="nofollow">网络层(路由器)</a></li><li><ul><li><a href="#Q_55" rel="nofollow">Q：怎么判断电脑在同一个以太网内？</a></li><li><a href="#QMACMAC_65" rel="nofollow">Q：为什么引入一个带有MAC地址的设备后，能让MAC地址表更容易维护？</a></li></ul> 
  </li><li><a href="#_92" rel="nofollow">补充</a></li><li><ul><li><a href="#MAC_93" rel="nofollow">MAC地址</a></li></ul> 
  </li><li><a href="#_98" rel="nofollow">参考</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>物理层(集线器)</h2> 
<blockquote> 
 <p>当我们试图建立两台电脑直接的连接时，可以用一根网线将他连接起来，只需每台电脑上各有一个网口，三台电脑互相连接，需要每台电脑上各有两个网口，随着需要连接的电脑的数量的增加，一台电脑上的网口数量也随之增加，这个时候我们需要一个更好的方式来替代这种方式 ———— 集线器</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/9c/3f/cQpi9fwX_o.png" alt="在这里插入图片描述"><br> <strong>作用</strong>：将电信号不做任何处理转发给其它电脑(广播)。<br> <strong>物理层</strong>：因为集线器对电信号不做任何处理，所以定义为物理层。</p> 
<h3><a id="Q_9"></a>Q：接收方怎么知道这数据包是发给自己的？</h3> 
<p><strong>数据包结构图</strong><br> <img src="https://images2.imgbox.com/86/8f/JLFsL2qq_o.png" alt="在这里插入图片描述"><br> 发送方发送的数据包中会携带自己的<a href="#macAddress" rel="nofollow"><strong>MAC地址</strong></a>与接收方的<strong>MAC地址</strong>，将该数据包广播出去后，接收方通过对数据包头部中的目标<strong>MAC地址</strong>进行判断，属于自己的则接收，不属于自己的则丢弃。</p> 
<h2><a id="_14"></a>数据链路层(交换器)</h2> 
<blockquote> 
 <p>因为广播这种方式，既不安全，又浪费网络资源，所以我们需要一个更加智能的设备 ———— 交换器。由于其相对于交换器比较智能，我们将它划分到 “数据链路层” 。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/82/10/6OzKqbgl_o.png" alt="在这里插入图片描述"><br> 从图中我们可以看到，交换机维护有一张MAC地址表(映射MAC地址和它的端口)。</p> 
<p><strong>作用</strong>：交换机接收发送方发来的数据包后，通过与自身维护的MAC地址表比较，找到与目标MAC地址映射的端口，通过该端口将数据包发给接收方。通过上述传输方式组成的小范围网络叫做：“以太网”。</p> 
<h3><a id="QMAC_22"></a>Q：MAC地址表如何中的数据是怎么来的？如何维护?</h3> 
<blockquote> 
 <p>通过以太网内各节点之间不断通过交换机通信，不断完善起来的。</p> 
</blockquote> 
<ol><li><strong>发送方发送数据包给交换器</strong>：发送方将数据包发送给交换器，若交换器维护的MAC地址表中，找不到发送方的MAC地址映射，则将该地址加入MAC地址进行维护。</li><li><strong>交换器转发数据包给接收方</strong>：交换器中维护有接收方MAC地址，则直接转发；未维护接收方MAC地址，则将数据包广播出去，目标电脑接收到数据包后，做出响应，MAC地址表更新一条记录。<img src="https://images2.imgbox.com/b1/74/av4G7igh_o.gif" alt="在这里插入图片描述"></li></ol> 
<h3><a id="QMAC_28"></a>Q：交换器端口连接的是另一个交换器MAC地址表如何存储？</h3> 
<p><img src="https://images2.imgbox.com/a1/60/7tTUcBtc_o.png" alt="在这里插入图片描述"><br> <strong>左边交换器</strong></p> 
<table><thead><tr><th>MAC地址</th><th>端口</th></tr></thead><tbody><tr><td>bb-bb-bb-bb-bb-bb</td><td>1</td></tr><tr><td>cc-cc-cc-cc-cc-cc</td><td>3</td></tr><tr><td>aa-aa-aa-aa-aa-aa</td><td>4</td></tr><tr><td>dd-dd-dd-dd-dd-dd</td><td>5</td></tr><tr><td><font color="#ff0000">ee-ee-ee-ee-ee-ee</font></td><td><font color="#ff0000">6</font></td></tr><tr><td><font color="#ff0000">ff-ff-ff-ff-ff-ff</font></td><td><font color="#ff0000">6</font></td></tr><tr><td><font color="#ff0000">gg-gg-gg-gg-gg-gg</font></td><td><font color="#ff0000">6</font></td></tr><tr><td><font color="#ff0000">hh-hh-hh-hh-hh-hh</font></td><td><font color="#ff0000">6</font></td></tr></tbody></table> 
<p><strong>结论</strong>：会将另一交换机所连接的电脑MAC地址全部维护进MAC地址表中</p> 
<h2><a id="_47"></a>网络层(路由器)</h2> 
<blockquote> 
 <p>随着连接的电脑数量的不断增加，交换机将变得难以无法维护，我们需要接入一个带有<a href="#macAddress" rel="nofollow">MAC地址</a>的设备，同时还能对数据包进行一次转发————路由器。</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/4c/c2/0Eyk61a1_o.png" alt="在这里插入图片描述"><br> <font color="#ff0000"><strong>注意</strong>：路由器每一个端口都有一个MAC地址</font></p> 
<p>从图中我们可以看出，在同一个以太网内的电脑不需要路由器进行转发；在不同以太网内的电脑需要通过路由器进行转发。</p> 
<h3><a id="Q_55"></a>Q：怎么判断电脑在同一个以太网内？</h3> 
<p><strong>方法</strong>：赋予给每个以太网一个独有的标志(子网)，用于判断。</p> 
<p>目前为止，我们用于判断发送方与接收方的唯一标识是<a href="#macAddress" rel="nofollow">MAC地址</a>，假设，我们将MAC地址的一部分(前24位)作为该标志，但是我们知道MAC地址是在出厂时就固定了的，也就意味着，我们需要针对不同的以太网购置不同厂商的设备，且不说厂商是否有这么多家，而且日后这个网络的结构都不能轻易改变。</p> 
<p>因此需要发明一个新的地址信息 “ip地址” 。 “ip地址” 是在软件层面上的地址信息，所以这是可以被我们控制的。我们通过子网掩码，对ip地址进行计算，得到子网。</p> 
<p><strong>总结</strong><br> 通过发送方电脑上设置的子网掩码，对发送方ip地址与接收方ip地址进行计算，如果相同，则不需要通过路由器进行转发；不同，则需要通过路由器进行转发。</p> 
<h3><a id="QMACMAC_65"></a>Q：为什么引入一个带有MAC地址的设备后，能让MAC地址表更容易维护？</h3> 
<p><strong>引入路由器之前</strong></p> 
<table><thead><tr><th>MAC地址</th><th>端口</th></tr></thead><tbody><tr><td>bb-bb-bb-bb-bb-bb</td><td>1</td></tr><tr><td>cc-cc-cc-cc-cc-cc</td><td>3</td></tr><tr><td>aa-aa-aa-aa-aa-aa</td><td>4</td></tr><tr><td>dd-dd-dd-dd-dd-dd</td><td>5</td></tr><tr><td><font color="#ff0000">ee-ee-ee-ee-ee-ee</font></td><td><font color="#ff0000">6</font></td></tr><tr><td><font color="#ff0000">ff-ff-ff-ff-ff-ff</font></td><td><font color="#ff0000">6</font></td></tr><tr><td><font color="#ff0000">gg-gg-gg-gg-gg-gg</font></td><td><font color="#ff0000">6</font></td></tr><tr><td><font color="#ff0000">hh-hh-hh-hh-hh-hh</font></td><td><font color="#ff0000">6</font></td></tr></tbody></table> 
<p><strong>引入入路由器之后</strong></p> 
<table><thead><tr><th>MAC地址</th><th>端口</th></tr></thead><tbody><tr><td>bb-bb-bb-bb-bb-bb</td><td>1</td></tr><tr><td>cc-cc-cc-cc-cc-cc</td><td>3</td></tr><tr><td>aa-aa-aa-aa-aa-aa</td><td>4</td></tr><tr><td>dd-dd-dd-dd-dd-dd</td><td>5</td></tr><tr><td><font color="#ff0000">ef-gh-ef-gh-ef-gh</font></td><td><font color="#ff0000">6</font></td></tr></tbody></table> 
<p>可以看到未引入路由器之前，MAC地址表需要另一台交换器上的所有电脑MAC地址，而引入之后，则只需要维护路由器的MAC地址即可。</p> 
<h2><a id="_92"></a>补充</h2> 
<h3><a id="MAC_93"></a>MAC地址</h3> 
<div id="macAddress"></div> 
<blockquote> 
 <p>MAC地址又称物理地址、硬件地址。长度为 48 位。前24位，代表网络硬件制造商的编号；后24位，是该厂家自己分配的，一般表示系列号。</p> 
</blockquote> 
<h2><a id="_98"></a>参考</h2> 
<p><a href="https://mp.weixin.qq.com/s/1bkOvreBfS9EHg4AinKW3Q" rel="nofollow">如果让你来设计网络，你会如何设计？</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f9264a1dff3a7edae591d8ca6f9bb6e4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C 语言中的布尔类型Bool（False/ Not False）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7f563dad8194c2ae21ec86ea24e38645/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot&#43;Redis实现接口限流</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>