<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NOsql之MongoDB入门分享 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NOsql之MongoDB入门分享" />
<meta property="og:description" content="目录
一、MongoDB简介
1、概念理解
2、yum安装部署
3、二进制安装部署
4、配置文件解析 二、MongoDB基本管理
1、登录操作
2、管理命令
3、用户管理
一、MongoDB简介 1、概念理解 关系型数据库（RDBMS:Relational Database Management System) MySql、Oracle、DB2、SQL Server…关系型数据库中全都是表 非关系型数据库（No Sql --Not only sql）(Sql:结构化查询语言) MongoDB(文档数据库,json格式)、Redis…键值对数据库 Mongodb逻辑结构 MySQL逻辑结构 库database ====== 库 集合(collection) ====== 表 文档(document) ====== 数据行 2、yum安装部署 vim /etc/yum.repo.d/mongodb.repo [mongodb-org] name=MongoDB Repository baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/ gpgcheck=1 enabled=1 gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc #添加mongodb的yum源 yum install -y mongodf-org #直接yum安装 systemctl start mongod #启动mongod服务 mongo #本地直接登录mongodb数据库 3、二进制安装部署 useradd mongod passwd mongod #创建用户 mkdir -p /data mkdir -p /mongodb/conf mkdir -p /mongodb/log mkdir -p /mongodb/data #创建MongoDB需要的目录 cd /data tar xf mongodb-linux-x86_64-rhel70-3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b86db40a86686331790f727379616daf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-01T14:47:30+08:00" />
<meta property="article:modified_time" content="2023-08-01T14:47:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NOsql之MongoDB入门分享</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:40px;"></p> 
<p id="%E4%B8%80%E3%80%81MongoDB%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81MongoDB%E7%AE%80%E4%BB%8B" rel="nofollow">一、MongoDB简介</a></p> 
<p id="1%E3%80%81%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3" rel="nofollow">1、概念理解</a></p> 
<p id="2%E3%80%81yum%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2-toc" style="margin-left:80px;"><a href="#2%E3%80%81yum%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2" rel="nofollow">2、yum安装部署</a></p> 
<p id="3%E3%80%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2" rel="nofollow">3、二进制安装部署</a></p> 
<p id="4%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%C2%A0-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%C2%A0" rel="nofollow">4、配置文件解析 </a></p> 
<p id="%E4%BA%8C%E3%80%81MongoDB%E5%9F%BA%E6%9C%AC%E7%AE%A1%E7%90%86-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81MongoDB%E5%9F%BA%E6%9C%AC%E7%AE%A1%E7%90%86" rel="nofollow">二、MongoDB基本管理</a></p> 
<p id="1%E3%80%81%E7%99%BB%E5%BD%95%E6%93%8D%E4%BD%9C-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E7%99%BB%E5%BD%95%E6%93%8D%E4%BD%9C" rel="nofollow">1、登录操作</a></p> 
<p id="2%E3%80%81%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4" rel="nofollow">2、管理命令</a></p> 
<p id="3%E3%80%81%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86" rel="nofollow">3、用户管理</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E4%B8%80%E3%80%81MongoDB%E7%AE%80%E4%BB%8B">一、MongoDB简介</h3> 
<h4 id="1%E3%80%81%E6%A6%82%E5%BF%B5%E7%90%86%E8%A7%A3">1、概念理解</h4> 
<pre><code>关系型数据库（RDBMS:Relational Database Management System)
MySql、Oracle、DB2、SQL Server…关系型数据库中全都是表
非关系型数据库（No Sql --Not only sql）(Sql:结构化查询语言)
MongoDB(文档数据库,json格式)、Redis…键值对数据库

Mongodb逻辑结构              MySQL逻辑结构
   库database       ======       库
   集合(collection) ======       表
   文档(document)   ======       数据行
</code></pre> 
<h4 id="2%E3%80%81yum%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2">2、yum安装部署</h4> 
<pre><code class="hljs">vim /etc/yum.repo.d/mongodb.repo
[mongodb-org]
name=MongoDB Repository
baseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/
gpgcheck=1
enabled=1
gpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc
#添加mongodb的yum源
yum  install -y mongodf-org
#直接yum安装
systemctl  start mongod
#启动mongod服务
mongo
#本地直接登录mongodb数据库</code></pre> 
<h4 id="3%E3%80%81%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2">3、二进制安装部署</h4> 
<pre><code class="hljs">useradd mongod
passwd mongod
#创建用户
mkdir -p /data
mkdir -p /mongodb/conf
mkdir -p /mongodb/log
mkdir -p /mongodb/data
#创建MongoDB需要的目录
cd   /data
tar xf mongodb-linux-x86_64-rhel70-3.6.12.tgz 
cp -r /data/mongodb-linux-x86_64-rhel70-3.6.12/bin/ /mongodb
#上传压缩包并解压到指定目录，安装包官网下载网址:https://www.mongodb.com/
chown -R mongod:mongod /mongodb
#配置目录权限给mongod用户
su - mongod
vi .bash_profile
export PATH=/mongodb/bin:$PATH
source .bash_profile
#登录mongod用户配置环境变量
mongod --dbpath=/mongodb/data --logpath=/mongodb/log/mongodb.log --port=27017 --logappend --fork 
#启动mongod服务并指定log文件和端口等
mongo
#本地直接登录mongodb数据库
</code></pre> 
<h4 id="4%E3%80%81%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90%C2%A0">4、配置文件解析 </h4> 
<pre><code class="hljs">yum配置文件位置:/etc/mongod.conf
vim /etc/mongd.conf
①第一个模块
systemLog:
  destination: file
  logAppend: true
  path: /var/log/mongodb/mongod.log
#管理系统日志存储是否开启及存储方式和存储位置
②第二个模块
storage:
  dbPath: /var/lib/mongo
  journal:
    enabled: true
#管理系统数据存储位置及是否启用日志
③第三个模块
processManagement:
  fork: true  # fork and run in background
  pidFilePath: /var/run/mongodb/mongod.pid  # location of pidfile
  timeZoneInfo: /usr/share/zoneinfo
#管理进程运行方式前台/后台运行，pid存储位置以及时区信息
④第四个模块
net:
  port: 27017
  bindIp: 0.0.0.0
#管理网络的监听端口和监听地址
⑤第五个模块
security:
  authorization: enabled
#安全模块管理是否开启安全认证，开启后需要验证账户密码和验证库，否则无进入无操作权限</code></pre> 
<h3 id="%E4%BA%8C%E3%80%81MongoDB%E5%9F%BA%E6%9C%AC%E7%AE%A1%E7%90%86">二、MongoDB基本管理</h3> 
<h4 id="1%E3%80%81%E7%99%BB%E5%BD%95%E6%93%8D%E4%BD%9C">1、登录操作</h4> 
<pre><code class="hljs">mongo
#直接本地用户登录
mongo    -uroot    -proot123    192.168.30.17/admin
#root用户远程登录mongodb，-u指定用户，-p指定密码 192.168.30.17mongodb的地址，admin为验证库(远程登录用户不指定验证库即使登录成功也无法进行操作)</code></pre> 
<h4 id="2%E3%80%81%E7%AE%A1%E7%90%86%E5%91%BD%E4%BB%A4">2、管理命令</h4> 
<pre><code class="hljs">①库级别命令操作
db.help()
#查看库帮助，help()可以理解为函数操作时可以像命令一下使用tab补全
use test(库名)
#进入test库如果没有此库则自动创建，注意若库中无集合则切换到其他库后会自动删除此库
show   databases
show   dbs
#查看有哪些库
db.createCollection("集合名")
#表中创建集合
②表(集合)级别命令操作
db.集合.help()
#查看集合帮助，help()可以理解为函数操作时可以像命令一下使用tab补全
show    tables
#查看库中有哪些集合
db.集合.insert({键1:"值1",键2:"值2",等...})
#集合中添加数据,如果没有此集合则自动创建此集合并将文档写入集合中，json格式
db.集合.find({})
#查看集合中的内容，可以在({})中写筛选条件例如db.log1.find({id:"2"})查看log1集合中的id为2的文档
DBQuery.shellBatchSize=数量;
#db.集合.find({})默认是20行文档为1页,输入it则看下一页内容。此函数可以调整每页显示的数量如数量除配置50则没页显示50行文档输入it则看下一页内容
db.集合.find({}).pretty()
#加.pretty()可以更完美的展示，以json文档格式显示出集合中的数据
db.集合.findOne({})
#只查看集合的第一行文档
db.集合.count({})
#统计集合中有多少行文档，会输出一个值则为文档数
db.集合.remove({})
#删除集合中所有文档但不删除集合，可以({})中写筛选条件例如db.log1.remove({id:"1"})删除log1集合中id为1的文档
db.集合.drop()
#删除整个集合包括其中的文档
db.旧集合名.renameCollection("新集合名")
#修改集合名称
③系统命令级别
db
#查看当前处于那个库
db.集合.stats()
#查看集合存储信息
db.集合.dataSize()
#查看集合中数据的原始大小
db.集合.totalIndexSize()
#查看集合中索引数据的原始大小</code></pre> 
<h4 id="3%E3%80%81%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86">3、用户管理</h4> 
<p> 验证库：MongoDB的特殊安全验证，开启后远程登录除了输入账户密码外还需要在远程登录的ip后跟上验证库否则无法对库进行正常操作。</p> 
<p>用户权限：必须use到某个库创建用户，一般管理那个库就use到哪个库创建用户，管理员用户除外(一般管理员用户在admin库创建)。权限分配角色管理，一共三种包括管理员(root)、只读(read)、可读可写(readWrite)</p> 
<pre><code class="hljs">①创建管理员用户
use    admin
#进入验证库，管理员用户的验证库一般为admin库
db.createUser(
{
    user:"test01",
    pwd:"test123",
    roles:[ {role:"root",db:"admin"}]
}
)
#创建一个test01的系统用户，密码为test123，角色权限为root管理员，管理库为admin
#若创建其他普通用户则进入所管理的库作为验证库，分配权限时给read只读或readWrite
②创建一个普通用户管理多个库并对多个库拥有不通权限
use    test02
#建议以权限更高的管理库为验证库，以其他库为验证库也可
db.createUser(
{
    user:"test02",
    pwd:"test123",
    roles:[{role:"readWrite",db:"test02"},{role:"read",db:"test01"}]
}
)
#创建普通用户test02对test02库有可读可写权限，test01库只有可读权限
db.dropUser("用户名")
#删除用户，注意要在对应的验证库中删除用户
use    admin
show    tables
db.s</code></pre> 
<p><img alt="" height="539" src="https://images2.imgbox.com/9c/d7/w7XmuP6e_o.png" width="908"></p> 
<p><img alt="" height="598" src="https://images2.imgbox.com/4f/ce/kTxe1jQd_o.png" width="1045"><img alt="" height="614" src="https://images2.imgbox.com/3c/30/Bgp4N62Z_o.png" width="989"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4e2a9ac1bb163441eaba04d64113298c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于model.load_state_dict(state_dict)报错出现权重与模型不匹配的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/97457a9662d2fbbdbffb8c1097be5e47/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C盘爆红怎么扩容磁盘容量</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>