<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenSSL安装升级 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenSSL安装升级" />
<meta property="og:description" content="官网：/source/index.html
当前(2020-10-22)最新稳定版本：https://www.openssl.org/source/openssl-1.1.1h.tar.gz
Note: The latest stable version is the 1.1.1 series. This is also our Long Term Support (LTS) version, supported until 11th September 2023. All older versions (including 1.1.0, 1.0.2, 1.0.0 and 0.9.8) are now out of support and should not be used. Users of these older versions are encourage to upgrade to 1.1.1 as soon as possible. Extended support for 1.0.2 to gain access to security fixes for that version is available." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/610d8a49def9215e9197b2d74a3d9c41/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-29T10:54:43+08:00" />
<meta property="article:modified_time" content="2022-03-29T10:54:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenSSL安装升级</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0in;"><strong>官网</strong>：<a href="https://www.openssl.org/source/" rel="nofollow" title="/source/index.html">/source/index.html</a></p> 
<p style="margin-left:0in;"><strong><span style="color:#000000;">当前</span></strong><strong><span style="color:#000000;">(2020-10-22)</span></strong><strong><span style="color:#000000;">最新稳定版本：</span></strong>https://www.openssl.org/source/openssl-1.1.1h.tar.gz</p> 
<p style="margin-left:0in;"><em><span style="color:#222222;">Note:</span></em> The latest stable version is the 1.1.1 series. This is also our Long Term Support (LTS) version, supported until 11th September 2023. All older versions (including 1.1.0, 1.0.2, 1.0.0 and 0.9.8) are now out of support and should not be used. Users of these older versions are encourage to upgrade to 1.1.1 as soon as possible. Extended support for 1.0.2 to gain access to security fixes for that version is <a href="https://www.openssl.org/support/contracts.html" rel="nofollow" title="available">available</a>.</p> 
<div>
  下载解压包： 
</div> 
<pre><code>wget https://www.openssl.org/source/openssl-1.1.1h.tar.gz
</code></pre> 
<div> 
 <p><strong> 详细安装步骤(以我百度云一台CentOS7服务器为例)：</strong></p> 
 <p>查看版本（是否已安装）</p> 
 <pre><code>openssl version -a</code></pre> 
 <p><img alt="" height="107" src="https://images2.imgbox.com/1b/ae/zdHr7YDr_o.png" width="690"></p> 
 <p>下载好最新版本，解压：</p> 
 <pre><code>tar zxvf openssl-1.1.1h.tar.gz</code></pre> 
 <p><img alt="" height="55" src="https://images2.imgbox.com/60/75/VYIbFt9R_o.png" width="390"></p> 
 <p>执行配置命令，生成Makefile文件：</p> 
 <pre><code>cd openssl-1.1.1h
./config</code></pre> 
 <p><img alt="" height="520" src="https://images2.imgbox.com/8f/5d/DFiapjFw_o.png" width="1200"></p> 
</div> 
<p><img alt="" height="129" src="https://images2.imgbox.com/17/95/JYc8AHXb_o.png" width="1200"></p> 
<pre><code>make &amp; make install </code></pre> 
<p><img alt="" height="567" src="https://images2.imgbox.com/05/e5/9bbt4IPD_o.png" width="1200"></p> 
<p>报错，安装下gcc</p> 
<pre><code>yum install gcc</code></pre> 
<p><img alt="" height="172" src="https://images2.imgbox.com/2e/83/aWP3F77V_o.png" width="1200"></p> 
<p>make &amp; make install 编译、安装~</p> 
<p></p> 
<p>接下来，需要<span style="color:#956fe7;"><strong>替换新的openssl入口，以及指定新openssl库文件位置</strong></span>。</p> 
<p>注意下关键文件的位置：</p> 
<div> 
 <p><strong>        openssl</strong>  位于 /usr/local/bin下,</p> 
 <p><strong>        配置文件</strong> 位于/usr/local/ssl下,</p> 
 <p><strong>        库文件</strong> 位于/usr/local/lib64下</p> 
</div> 
<p>收尾阶段：</p> 
<table cellspacing="0"><tbody><tr><td style="border-color:#a3a3a3;vertical-align:top;width:2.9944in;"> <p style="margin-left:0in;"><strong>1、将原有openssl备份</strong></p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.8694in;"> <p style="margin-left:0in;">mv /usr/bin/openssl /usr/bin/openssl.bak</p> <p style="margin-left:0in;">mv /usr/include/openssl /usr/include/openssl.bak </p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:2.9944in;"> <p style="margin-left:0in;"><strong>2、添加新openssl软连接</strong></p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.9388in;"> <p style="margin-left:0in;">ln -s /usr/local/bin/openssl /usr/bin/openssl</p> <p style="margin-left:0in;">ln -s /usr/local/include/openssl/ /usr/include/openssl</p> <p style="margin-left:0in;"></p> <p style="margin-left:0in;">#可以用which openssl命令查看路径，如果有神通数据库则路径如下：/opt/ShenTong/bin/openssl</p> <p style="margin-left:0in;">ln -s /usr/bin/openssl /opt/ShenTong/bin/openssl<br>  </p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:3.0138in;"> <p style="margin-left:0in;"><strong>3、将新的库文件地址写入记录so库的配置文件</strong></p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.85in;"> <p style="margin-left:0in;">echo "/usr/local/lib64" &gt;&gt; /etc/ld.so.conf  </p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:2.9944in;"> <p style="margin-left:0in;"><strong>4、设置生效</strong></p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.8694in;"> <p style="margin-left:0in;"><strong>ldconfig -v</strong></p> </td></tr></tbody></table> 
<p>搞定！</p> 
<p><img alt="" height="189" src="https://images2.imgbox.com/18/02/HOoZjgW2_o.png" width="609"></p> 
<p style="margin-left:0in;"></p> 
<p style="margin-left:0in;"><span style="color:#fe2c24;"><strong>PLUS - 主要安装命令四个：</strong></span></p> 
<p style="margin-left:0in;">安装参考openssl-1.1.1h目录中的<strong><u>INSTALL</u></strong><strong><u>文件</u></strong></p> 
<p><img alt="" height="137" src="https://images2.imgbox.com/17/7a/TSkEX0dH_o.png" width="493"></p> 
<p><img alt="" height="184" src="https://images2.imgbox.com/5d/6e/ATi3Opod_o.png" width="347"></p> 
<div> 
 <p></p> 
 <p><span style="color:#4da8ee;"><strong>1、自动 / 手动 配置OpenSSL</strong></span></p> 
 <pre><code>./config --prefix=/opt/openssl --openssldir=/usr/local/ssl</code></pre> 
 <p style="margin-left:0in;"> #自动配置</p> 
 <p style="margin-left:0in;"><img alt="" height="76" src="https://images2.imgbox.com/64/83/hEYVxJ7a_o.png" width="426"></p> 
 <p style="margin-left:0in;">#手动配置</p> 
 <p style="margin-left:0in;"><img alt="" height="124" src="https://images2.imgbox.com/fe/35/ugj4kOtI_o.png" width="686"></p> 
 <p style="margin-left:0in;">#配置与源码文件目录分离</p> 
 <p style="margin-left:0in;"><img alt="" height="168" src="https://images2.imgbox.com/1b/54/bYXdny1S_o.png" width="475"></p> 
 <p><strong>#修改默认路径安装时添加参数</strong></p> 
 <p><img alt="" height="215" src="https://images2.imgbox.com/2d/fe/84EIoFXo_o.png" width="472"></p> 
 <p><span style="color:#4da8ee;"><strong>2.编译OpenSSL文件</strong></span></p> 
 <p style="margin-left:0in;"> <img alt="" height="190" src="https://images2.imgbox.com/c7/1c/SO3YHWDa_o.png" width="651"></p> 
 <p style="margin-left:0in;">#构建失败解决措施：</p> 
 <p style="margin-left:0in;"><img alt="" height="311" src="https://images2.imgbox.com/56/2c/8OS1OqFe_o.png" width="630"></p> 
 <p><span style="color:#4da8ee;"><strong>3、编译成功后，测试库文件</strong></span></p> 
 <p><img alt="" height="157" src="https://images2.imgbox.com/f6/28/HrlGrqpO_o.png" width="612"></p> 
 <p><span style="color:#4da8ee;"><strong>4、测试成功，安装OpenSSL</strong></span></p> 
 <p><img alt="" height="158" src="https://images2.imgbox.com/b3/06/J1T2Qwoa_o.png" width="655"></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/807b633ac493b53e87de426dbe176139/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux设置UTC时区</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4f4ebf293626d25089ee475ad1d114ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解除浏览器不能切屏和不能复制粘贴的操作</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>