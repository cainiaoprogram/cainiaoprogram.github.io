<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>搭建一个学习ucore_OS学习的环境(第一节) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="搭建一个学习ucore_OS学习的环境(第一节)" />
<meta property="og:description" content="知识点 github的文件在 https://(项目url)/archive/master.zip实验参考教程[https://chyyuu.gitbooks.io/ucore_os_docs/content/](https://chyyuu.gitbooks.io/ucore_os_docs/content/)搭建执行ucoreos的学习环境随时复习一些linux命令控制流程 (1) 输入/输出(2) 重定向(3) linux管道(4) 后台进程环境变量获得软件包配置vimctags命令使用离线安装chrom插件gcc编译简单的 C 程序AT&amp;T汇编基本语法 和 intel汇编的区别安装硬件模拟器QEMU制作lab1镜像文件并用qemu加载 github的文件在 https://(项目url)/archive/master.zip 知道一个github项目，可以直接在项目后边加上 /archive/master.zip 来，wget下载
下载操作系统源代码 wget https://github.com/chyyuu/ucore_lab/archive/master.zip 实验参考教程https://chyyuu.gitbooks.io/ucore_os_docs/content/ 搭建执行ucoreos的学习环境 #创建一个 centos 开发环境，来体验开发ucoreos的过程 docker run -tdi -p 21022:22 -p 21088:8888 --name ucoreos --privileged=true registry.cn-hangzhou.aliyuncs.com/mkmk/conda:qemu init | docker exec -d ucoreos /bin/bash -c &#34;cd /home &amp;&amp; source /etc/profile &amp;&amp; nohup jlab &amp;&#34; #关机后重启实验环境 docker start ucoreos | docker exec -d ucoreos /bin/bash -c &#34;cd /home &amp;&amp; source /etc/profile &amp;&amp; nohup jlab &amp;&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bef13cf160167adbf78a8fd1feff631f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-18T20:49:04+08:00" />
<meta property="article:modified_time" content="2020-02-18T20:49:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">搭建一个学习ucore_OS学习的环境(第一节)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>知识点</h4> 
 <ul><li><a href="#github__httpsurlarchivemasterzip_1" rel="nofollow">github的文件在 https://(项目url)/archive/master.zip</a></li><li><a href="#httpschyyuugitbooksioucore_os_docscontenthttpschyyuugitbooksioucore_os_docscontent_8" rel="nofollow">实验参考教程[https://chyyuu.gitbooks.io/ucore_os_docs/content/](https://chyyuu.gitbooks.io/ucore_os_docs/content/)</a></li><li><a href="#ucoreos_10" rel="nofollow">搭建执行ucoreos的学习环境</a></li><li><a href="#linux_27" rel="nofollow">随时复习一些linux命令</a></li><li><a href="#_1__69" rel="nofollow">控制流程 (1) 输入/输出</a></li><li><a href="#2__73" rel="nofollow">(2) 重定向</a></li><li><a href="#3_linux_120" rel="nofollow">(3) linux管道</a></li><li><a href="#4__124" rel="nofollow">(4) 后台进程</a></li><li><a href="#_139" rel="nofollow">环境变量</a></li><li><a href="#_146" rel="nofollow">获得软件包</a></li><li><a href="#vim_198" rel="nofollow">配置vim</a></li><li><a href="#ctags_248" rel="nofollow">ctags命令使用</a></li><li><a href="#chrom_303" rel="nofollow">离线安装chrom插件</a></li><li><a href="#gcc_C__319" rel="nofollow">gcc编译简单的 C 程序</a></li><li><a href="#ATT__intel_339" rel="nofollow">AT&amp;T汇编基本语法 和 intel汇编的区别</a></li><li><a href="#QEMU_381" rel="nofollow">安装硬件模拟器QEMU</a></li><li><a href="#lab1qemu_414" rel="nofollow">制作lab1镜像文件并用qemu加载</a></li></ul> 
</div> 
<p></p> 
<h2><a id="github__httpsurlarchivemasterzip_1"></a>github的文件在 https://(项目url)/archive/master.zip</h2> 
<p>知道一个github项目，可以直接在项目后边加上 /archive/master.zip 来，wget下载</p> 
<pre><code class="prism language-bash">下载操作系统源代码
<span class="token function">wget</span> https://github.com/chyyuu/ucore_lab/archive/master.zip
</code></pre> 
<h2><a id="httpschyyuugitbooksioucore_os_docscontenthttpschyyuugitbooksioucore_os_docscontent_8"></a>实验参考教程<a href="https://chyyuu.gitbooks.io/ucore_os_docs/content/" rel="nofollow">https://chyyuu.gitbooks.io/ucore_os_docs/content/</a></h2> 
<h2><a id="ucoreos_10"></a>搭建执行ucoreos的学习环境</h2> 
<pre><code class="prism language-bash"><span class="token comment">#创建一个 centos 开发环境，来体验开发ucoreos的过程</span>
docker run -tdi   -p 21022:22  -p 21088:8888  --name   ucoreos   --privileged<span class="token operator">=</span>true  registry.cn-hangzhou.aliyuncs.com/mkmk/conda:qemu   init  <span class="token operator">|</span>  docker <span class="token function">exec</span> -d  ucoreos   /bin/bash -c <span class="token string">"cd /home &amp;&amp; source /etc/profile &amp;&amp; nohup jlab &amp;"</span>

<span class="token comment">#关机后重启实验环境</span>
docker start  ucoreos  <span class="token operator">|</span>  docker <span class="token function">exec</span> -d ucoreos  /bin/bash -c <span class="token string">"cd /home &amp;&amp; source /etc/profile &amp;&amp; nohup jlab &amp;"</span>

<span class="token comment">#保存实验结果</span>
 <span class="token keyword">:</span> 后边加版本号 <span class="token punctuation">[</span><span class="token punctuation">]</span>
docker commit ucoreos   registry.cn-hangzhou.aliyuncs.com/mkmk/conda:ucoreos1 

<span class="token comment">#提交到云端</span>
docker push registry.cn-hangzhou.aliyuncs.com/mkmk/conda:ucoreos1
</code></pre> 
<h2><a id="linux_27"></a>随时复习一些linux命令</h2> 
<pre><code class="prism language-bash"><span class="token function">ps</span> <span class="token comment">#查看当前系统进程</span>
<span class="token function">ps</span> -a        <span class="token comment">#可以例出系统当前运行的所有进程，包括由其他用户启动的进程； </span>
<span class="token function">ps</span> auxww    <span class="token comment">#是一条相当人性化的命令，它会例出除一些很特殊进程以外的所有进程，并会以一个高可读的形式显示结果，每一个进程都会有较为详细的解释； </span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">touch</span> 创建单个文件，我之前总是喜欢 <span class="token function">vi</span> 文件，在:wq 创建文件，简直傻极了
<span class="token function">touch</span> tempfile.txt 
</code></pre> 
<pre><code class="prism language-bash">注意：在命令操作时系统基本上不会给你什么提示，当然，绝大多数的命令可以通过加上
一个参数 -v 来要求系统给出执行命令的反馈信息；
<span class="token function">mv</span> -v file1.txt new_file.txt
<span class="token variable"><span class="token variable">`</span>file1.txt' -<span class="token operator">&gt;</span> <span class="token variable">`</span></span>new_file.txt'
</code></pre> 
<pre><code class="prism language-bash">显示文件内容：cat
chy@chyhome-PC:~$ <span class="token function">cat</span> file1.txt
Roses are red.
Violets are blue,
and you have the bird-flue<span class="token operator">!</span>
也可以使用less或more来显示比较大的文本文件内容。
</code></pre> 
<pre><code class="prism language-bash">在屏幕上输出字符： <span class="token punctuation">(</span>echo<span class="token punctuation">)</span>
chy@chyhome-PC:~$ <span class="token keyword">echo</span> <span class="token string">"Hello World"</span>
Hello World
</code></pre> 
<pre><code class="prism language-bash"><span class="token function">ls</span> /        <span class="token comment"># 将列出根目录'/'下的文件清单.如果给定一个参数，则命令行会把该参数当作命令行的工作目录。换句话说，命令行不再以当前目录为工作目录。 </span>
<span class="token function">ls</span> -l         <span class="token comment"># 将给你列出一个更详细的文件清单. </span>
<span class="token function">ls</span> -a        <span class="token comment"># 将列出包括隐藏文件(以.开头的文件)在内的所有文</span>
</code></pre> 
<h2><a id="_1__69"></a>控制流程 (1) 输入/输出</h2> 
<p>input用来读取你通过键盘（或其他标准输入设备）输入的信息，output用于在屏幕（或其他标准输出设备）上输出你指定的输出内容.另外还有一些标准的出错提示也是通过这个命令来实现的。通常在遇到操作错误时，系统会自动调用这个命令来输出标准错误提示；<br> 我们能重定向命令中产生的输入和输出流的位置。</p> 
<h2><a id="2__73"></a>(2) 重定向</h2> 
<p>如果你想把命令产生的输出流指向一个文件而不是（默认的）终端，你可以使用如下的语句：</p> 
<pre><code class="prism language-bash">chy@chyhome-PC:~$ <span class="token function">ls</span> <span class="token operator">&gt;</span>file4.txt
chy@chyhome-PC:~$ <span class="token function">cat</span> file4.txt
file1.txt  file2.txt file3.txt
</code></pre> 
<p>以上例子将创建文件file4.txt如果file4.txt不存在的话。注意：如果file4.txt已经存在，那么上面的命令将复盖文件的内容。如果你想将内容添加到已存在的文件内容的最后，那你可以用下面这个语句：</p> 
<pre><code class="prism language-bash">重定向  向  指定文件追加内容 
<span class="token function">command</span> <span class="token operator">&gt;&gt;</span> filename 
</code></pre> 
<p>示例:</p> 
<pre><code class="prism language-bash">chy@chyhome-PC:~$ <span class="token function">ls</span> <span class="token operator">&gt;&gt;</span> file4.txt
chy@chyhome-PC:~$ <span class="token function">cat</span> file4.txt
file1.txt  file2.txt file3.txt
file1.txt  file2.txt file3.txt file4.txt
</code></pre> 
<p>在这个例子中，你会发现原有的文件中添加了新的内容。接下来我们会见到另一种重定向方式：我们将把一个文件的内容作为将要执行的命令的输入。以下是这个语句：</p> 
<pre><code class="prism language-bash"><span class="token function">command</span> <span class="token operator">&lt;</span> filename 
</code></pre> 
<p>示例:</p> 
<pre><code class="prism language-bash">chy@chyhome-PC:~$ <span class="token function">cat</span> <span class="token operator">&gt;</span> file5.txt
a3.txt
a2.txt
file2.txt
file1.txt
<span class="token operator">&lt;</span>Ctrl-D<span class="token operator">&gt;</span>  <span class="token comment"># 这表示敲入Ctrl+D键</span>
chy@chyhome-PC:~$ <span class="token function">sort</span> <span class="token operator">&lt;</span> file5.txt
a2.txt
a3.txt
file1.txt
file2.txt
</code></pre> 
<h2><a id="3_linux_120"></a>(3) linux管道</h2> 
<p>Linux的强大之处在于它能把几个简单的命令联合成为复杂的功能，通过键盘上的管道符号’|’ 完成。现在，我们来排序上面的"grep"命令：<br> grep -i command &lt; myfile | sort &gt; result.text<br> 搜索 myfile 中的命令，将输出分类并写入分类文件到 result.text 。 有时候用ls列出很多命令的时候很不方便 这时“｜”就充分利用到了 ls -l | less 慢慢看吧.</p> 
<h2><a id="4__124"></a>(4) 后台进程</h2> 
<p>CLI 不是系统的串行接口。您可以在执行其他命令时给出系统命令。要启动一个进程到后台，追加一个“&amp;”到命令后面。</p> 
<pre><code class="prism language-bash"><span class="token function">sleep</span> 60 <span class="token operator">&amp;</span>
<span class="token function">ls</span>
</code></pre> 
<p>睡眠命令在后台运行，您依然可以与计算机交互。除了不同步启动命令以外，最好把 ‘&amp;’ 理解成 ‘;’。<br> 如果您有一个命令将占用很多时间，您想把它放入后台运行，也很简单。只要在命令运行时按下ctrl-z，它就会停止。然后键入 bg使其转入后台。fg 命令可使其转回前台。<br> sleep 60<br> # 这表示敲入Ctrl+Z键<br> bg<br> fg<br> 最后，您可以使用 ctrl-c 来杀死一个前台进程。</p> 
<h2><a id="_139"></a>环境变量</h2> 
<p>特殊变量。PATH, PS1, …<br> (1) 不显示中文<br> 可通过执行如下命令避免显示乱码中文。在一个shell中，执行：<br> export LANG=””<br> 这样在这个shell中，output信息缺省时英文。</p> 
<h2><a id="_146"></a>获得软件包</h2> 
<p>(1) 命令行获取软件包<br> Ubuntu 下可以使用 apt-get 命令，apt-get 是一条 Linux 命令行命令，适用于 deb 包管理式的操作系统，主要用于自动从互联网软件库中搜索、安装、升级以及卸载软件或者操作系统。一般需要 root 执行权限，所以一般跟随 sudo 命令，如：<br> sudo apt-get install gcc [ENTER]<br> 常见的以及常用的 apt 命令有：<br> apt-get install <br> 下载 以及所依赖的软件包，同时进行软件包的安装或者升级。<br> apt-get remove <br> 移除 以及所有依赖的软件包。<br> apt-cache search <br> 搜索满足 的软件包。<br> apt-cache show/showpkg <br> 显示软件包 的完整描述。<br> 例如：</p> 
<p>chy@chyhome-PC:~<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         a 
        
       
         p 
        
       
         t 
        
       
         − 
        
       
         c 
        
       
         a 
        
       
         c 
        
       
         h 
        
       
         e 
        
       
         s 
        
       
         e 
        
       
         a 
        
       
         r 
        
       
         c 
        
       
         h 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         − 
        
       
         4.8 
        
       
         − 
        
       
         T 
        
       
         h 
        
       
         e 
        
       
         G 
        
       
         N 
        
       
         U 
        
       
         C 
        
       
         c 
        
       
         o 
        
       
         m 
        
       
         p 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         r 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         − 
        
       
         4.8 
        
       
         − 
        
       
         b 
        
       
         a 
        
       
         s 
        
       
         e 
        
       
         − 
        
       
         T 
        
       
         h 
        
       
         e 
        
       
         G 
        
       
         N 
        
       
         U 
        
       
         C 
        
       
         o 
        
       
         m 
        
       
         p 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         r 
        
       
         C 
        
       
         o 
        
       
         l 
        
       
         l 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         i 
        
       
         o 
        
       
         n 
        
       
         ( 
        
       
         b 
        
       
         a 
        
       
         s 
        
       
         e 
        
       
         p 
        
       
         a 
        
       
         c 
        
       
         k 
        
       
         a 
        
       
         g 
        
       
         e 
        
       
         ) 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         − 
        
       
         4.8 
        
       
         − 
        
       
         d 
        
       
         o 
        
       
         c 
        
       
         − 
        
       
         D 
        
       
         o 
        
       
         c 
        
       
         u 
        
       
         m 
        
       
         e 
        
       
         n 
        
       
         t 
        
       
         a 
        
       
         t 
        
       
         i 
        
       
         o 
        
       
         n 
        
       
         f 
        
       
         o 
        
       
         r 
        
       
         t 
        
       
         h 
        
       
         e 
        
       
         G 
        
       
         N 
        
       
         U 
        
       
         c 
        
       
         o 
        
       
         m 
        
       
         p 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         r 
        
       
         s 
        
       
         ( 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         , 
        
       
         g 
        
       
         o 
        
       
         b 
        
       
         j 
        
       
         c 
        
       
         , 
        
       
         g 
        
       
         + 
        
       
         + 
        
       
         ) 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         − 
        
       
         4.8 
        
       
         − 
        
       
         m 
        
       
         u 
        
       
         l 
        
       
         t 
        
       
         i 
        
       
         l 
        
       
         i 
        
       
         b 
        
       
         − 
        
       
         T 
        
       
         h 
        
       
         e 
        
       
         G 
        
       
         N 
        
       
         U 
        
       
         C 
        
       
         c 
        
       
         o 
        
       
         m 
        
       
         p 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         r 
        
       
         ( 
        
       
         m 
        
       
         u 
        
       
         l 
        
       
         t 
        
       
         i 
        
       
         l 
        
       
         i 
        
       
         b 
        
       
         f 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         s 
        
       
         ) 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         − 
        
       
         4.8 
        
       
         − 
        
       
         s 
        
       
         o 
        
       
         u 
        
       
         r 
        
       
         c 
        
       
         e 
        
       
         − 
        
       
         S 
        
       
         o 
        
       
         u 
        
       
         r 
        
       
         c 
        
       
         e 
        
       
         o 
        
       
         f 
        
       
         t 
        
       
         h 
        
       
         e 
        
       
         G 
        
       
         N 
        
       
         U 
        
       
         C 
        
       
         o 
        
       
         m 
        
       
         p 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         r 
        
       
         C 
        
       
         o 
        
       
         l 
        
       
         l 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         i 
        
       
         o 
        
       
         n 
        
       
         g 
        
       
         c 
        
       
         c 
        
       
         − 
        
       
         4.8 
        
       
         − 
        
       
         l 
        
       
         o 
        
       
         c 
        
       
         a 
        
       
         l 
        
       
         e 
        
       
         s 
        
       
         − 
        
       
         T 
        
       
         h 
        
       
         e 
        
       
         G 
        
       
         N 
        
       
         U 
        
       
         C 
        
       
         c 
        
       
         o 
        
       
         m 
        
       
         p 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         r 
        
       
         ( 
        
       
         n 
        
       
         a 
        
       
         t 
        
       
         i 
        
       
         v 
        
       
         e 
        
       
         l 
        
       
         a 
        
       
         n 
        
       
         g 
        
       
         u 
        
       
         a 
        
       
         g 
        
       
         e 
        
       
         s 
        
       
         u 
        
       
         p 
        
       
         p 
        
       
         o 
        
       
         r 
        
       
         t 
        
       
         f 
        
       
         i 
        
       
         l 
        
       
         e 
        
       
         s 
        
       
         ) 
        
       
         c 
        
       
         h 
        
       
         y 
        
       
         @ 
        
       
         c 
        
       
         h 
        
       
         y 
        
       
         h 
        
       
         o 
        
       
         m 
        
       
         e 
        
       
         − 
        
       
         P 
        
       
         C 
        
       
         : 
        
       
           
        
       
      
        apt-cache search gcc gcc-4.8 - The GNU C compiler gcc-4.8-base - The GNU Compiler Collection (base package) gcc-4.8-doc - Documentation for the GNU compilers (gcc, gobjc, g++) gcc-4.8-multilib - The GNU C compiler (multilib files) gcc-4.8-source - Source of the GNU Compiler Collection gcc-4.8-locales - The GNU C compiler (native language support files) chy@chyhome-PC:~ 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.80952em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">p</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">.</span><span class="mord">8</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">p</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">.</span><span class="mord">8</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">p</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">p</span><span class="mord mathdefault">a</span><span class="mord mathdefault">c</span><span class="mord mathdefault" style="margin-right: 0.03148em;">k</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">.</span><span class="mord">8</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">D</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">p</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right: 0.05724em;">j</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">+</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">.</span><span class="mord">8</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">p</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault">m</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">i</span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">.</span><span class="mord">8</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.05764em;">S</span><span class="mord mathdefault">o</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mord mathdefault">e</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">p</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">c</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.72777em; vertical-align: -0.08333em;"></span><span class="mord">4</span><span class="mord">.</span><span class="mord">8</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.77777em; vertical-align: -0.08333em;"></span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">T</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right: 0.10903em;">N</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mord mathdefault">c</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">p</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">u</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">p</span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">t</span><span class="mord mathdefault" style="margin-right: 0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right: 0.01968em;">l</span><span class="mord mathdefault">e</span><span class="mord mathdefault">s</span><span class="mclose">)</span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord">@</span><span class="mord mathdefault">c</span><span class="mord mathdefault">h</span><span class="mord mathdefault" style="margin-right: 0.03588em;">y</span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault">m</span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault" style="margin-right: 0.13889em;">P</span><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">:</span><span class="mspace nobreak"> </span></span></span></span></span><br> (2) 图形界面软件包获取 新立得软件包管理器，是 Ubuntu 下面管理软件包得图形界面程序，相当于命令行中得 apt 命令。进入方法可以是<br> 菜单栏 &gt; 系统管理 &gt; 新立得软件包管理器<br> (System &gt; Administration &gt; Synaptic Package Manager)<br> 使用更新管理器可以通过标记选择适当的软件包进行更新操作。<br> (3) 配置升级源<br> Ubuntu的软件包获取依赖升级源，可以通过修改 “/etc/apt/sources.list” 文件来修改升级源（需要 root 权限）；或者修改新立得软件包管理器中 “设置 &gt; 软件库”。<br> 查找帮助文件 Ubuntu 下提供 man 命令以完成帮助手册得查询。man 是 manual 的缩写，通过 man 命令可以对 Linux 下常用命令、安装软件、以及C语言常用函数等进行查询，获得相关帮助。<br> 例如：</p> 
<p>cchy@chyhome-PC:~$man printf<br> PRINTF(1) BSD General Commands Manual PRINTF(1)</p> 
<p>NAME<br> printf – formatted output</p> 
<p>SYNOPSIS<br> printf format [arguments …]</p> 
<p>DESCRIPTION<br> The printf utility formats and prints its arguments, after the first, under control of the format. The format is a character string which contains three types of objects: plain characters, which are simply copied to standard output, character escape sequences which are converted and copied to the standard output, and format specifications, each of which causes …<br> …<br> The characters and their meanings are as follows:<br> \e Write an character.<br> \a Write a character.<br> …<br> 通常可能会用到的帮助文件例如：<br> gcc-doc cpp-doc glibc-doc<br> 上述帮助文件可以通过 apt-get 命令或者软件包管理器获得。获得以后可以通过 man 命令进行命令或者参数查询。</p> 
<h2><a id="vim_198"></a>配置vim</h2> 
<p>(2) Vim 编辑器：Vim是一款极方便的文本编辑软件，是UNIX下的同类型软件VI的改进版本。Vim经常被看作是“专门为程序员打造的文本编辑器”，功能强大且方便使用，便于进行程序开发。 Ubuntu 下默认安装的 vi 版本较低，功能较弱，建议在系统内安装或者升级到最新版本的 Vim。<br> [1]关于Vim的常用命令以及使用，可以通过网络进行查找。<br> [2]配置文件：Vim 的使用需要配置文件进行设置，例如：</p> 
<pre><code class="prism language-bash"><span class="token keyword">set</span> nocompatible
<span class="token keyword">set</span> encoding<span class="token operator">=</span>utf-8
<span class="token keyword">set</span> fileencodings<span class="token operator">=</span>utf-8,chinese
<span class="token keyword">set</span> tabstop<span class="token operator">=</span>4
<span class="token keyword">set</span> cindent shiftwidth<span class="token operator">=</span>4
<span class="token keyword">set</span> backspace<span class="token operator">=</span>indent,eol,start
autocmd Filetype c <span class="token keyword">set</span> omnifunc<span class="token operator">=</span>ccomplete<span class="token comment">#Complete</span>
autocmd Filetype cpp <span class="token keyword">set</span> omnifunc<span class="token operator">=</span>cppcomplete<span class="token comment">#Complete</span>
<span class="token keyword">set</span> incsearch
<span class="token keyword">set</span> number
<span class="token keyword">set</span> display<span class="token operator">=</span>lastline
<span class="token keyword">set</span> ignorecase
syntax on
<span class="token keyword">set</span> nobackup
<span class="token keyword">set</span> ruler
<span class="token keyword">set</span> showcmd
<span class="token keyword">set</span> smartindent
<span class="token keyword">set</span> hlsearch
<span class="token keyword">set</span> cmdheight<span class="token operator">=</span>1
<span class="token keyword">set</span> laststatus<span class="token operator">=</span>2
<span class="token keyword">set</span> shortmess<span class="token operator">=</span>atI
<span class="token keyword">set</span> formatoptions<span class="token operator">=</span>tcrqn
<span class="token keyword">set</span> autoindent  
</code></pre> 
<p>可以将上述配置文件保存到：</p> 
<pre><code class="prism language-bash">~/.vimrc
</code></pre> 
<p>注意：.vimrc 默认情况下隐藏不可见，可以在命令行中通过 “ls -a” 命令进行查看。如果 ‘~’ 目录下不存在该文件，可以手动创建。修改该文件以后，重启 Vim 可以使配置生效。<br> exuberant-ctags exuberant-ctags 可以为程序语言对象生成索引，其结果能够被一个文本编辑器或者其他工具简捷迅速的定位。支持的编辑器有 Vim、Emacs 等。 实验中，可以使用命令：</p> 
<pre><code class="prism language-bash">ctags -h<span class="token operator">=</span>.h.c.S -R
</code></pre> 
<p>默认的生成文件为 tags (可以通过 -f 来指定)，在相同路径下使用 Vim 可以使用改索引文件，例如:</p> 
<pre><code class="prism language-bash">使用 “ctrl + <span class="token punctuation">]</span>” 可以跳转到相应的声明或者定义处，
使用 “ctrl + t” 返回（查询堆栈）等。
</code></pre> 
<h2><a id="ctags_248"></a>ctags命令使用</h2> 
<p>centos下安装 ctags</p> 
<pre><code class="prism language-bash">yum  <span class="token function">install</span> ctags 
</code></pre> 
<p>使用讲解，创建一个工程目录 /学习使用ctags</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> file1.c
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#include&lt;stdio.h&gt;</span>

void def1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    printf<span class="token punctuation">(</span><span class="token string">"print hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

int main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    def1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>然后到， def1(); 处，按下 ctrl + ] 可以跳转到 def1() 的定义处</p> 
<p>最基本使用，在项目根目录下，使用，生成变量索引</p> 
<pre><code class="prism language-bash">ctags -h<span class="token operator">=</span>.h.c.S -R
</code></pre> 
<p>使用<br> 熟练的使用ctags仅需记住下面七条命令：</p> 
<pre><code class="prism language-bash">1．$ ctags –R * <span class="token punctuation">(</span>$为Linux系统Shell提示符,这个命令上面已经有所介绍<span class="token punctuation">)</span>
2. $ <span class="token function">vi</span> –t tag <span class="token punctuation">(</span>请把tag替换为您欲查找的变量或函数名<span class="token punctuation">)</span>
3．:ts<span class="token punctuation">(</span>ts助记字：tagslist, “:”开头的命令为VI中命令行模式命令<span class="token punctuation">)</span>
4．:tp<span class="token punctuation">(</span>tp助记字：tagspreview<span class="token punctuation">)</span>---此命令不常用，可以不用记
5．:tn<span class="token punctuation">(</span>tn助记字：tagsnext<span class="token punctuation">)</span> ---此命令不常用，可以不用记
6．Ctrl+ <span class="token punctuation">]</span>跳到光标所在函数或者结构体的定义处
7．Ctrl+ T返回查找或跳转
</code></pre> 
<p>“<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         v 
        
       
         i 
        
       
         – 
        
       
         t 
        
       
         t 
        
       
         a 
        
       
         g 
        
       
         ” 
        
       
         ： 
        
       
         在 
        
       
         运 
        
       
         行 
        
       
         v 
        
       
         i 
        
       
         m 
        
       
         的 
        
       
         时 
        
       
         候 
        
       
         加 
        
       
         上 
        
       
         “ 
        
       
         − 
        
       
         t 
        
       
         ” 
        
       
         参 
        
       
         数 
        
       
         ， 
        
       
         例 
        
       
         如 
        
       
         ： 
        
       
         [ 
        
       
         / 
        
       
         u 
        
       
         s 
        
       
         r 
        
       
         / 
        
       
         s 
        
       
         r 
        
       
         c 
        
       
         ] 
        
       
      
        vi –t tag” ：在运行vim的时候加上“-t”参数，例如：[/usr/src] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord" style="margin-right: 0.02778em;">–</span><span class="mord mathdefault">t</span><span class="mord mathdefault">t</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right: 0.03588em;">g</span><span class="mord">”</span><span class="mord cjk_fallback">：</span><span class="mord cjk_fallback">在</span><span class="mord cjk_fallback">运</span><span class="mord cjk_fallback">行</span><span class="mord mathdefault" style="margin-right: 0.03588em;">v</span><span class="mord mathdefault">i</span><span class="mord mathdefault">m</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">候</span><span class="mord cjk_fallback">加</span><span class="mord cjk_fallback">上</span><span class="mord">“</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">t</span><span class="mord">”</span><span class="mord cjk_fallback">参</span><span class="mord cjk_fallback">数</span><span class="mord cjk_fallback">，</span><span class="mord cjk_fallback">例</span><span class="mord cjk_fallback">如</span><span class="mord cjk_fallback">：</span><span class="mopen">[</span><span class="mord">/</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord">/</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mord mathdefault">c</span><span class="mclose">]</span></span></span></span></span>vim -tmain这个命令将打开定义“main”（变量或函数或其它）的文件，并把光标定位到这一行。如果这个变量或函数有多处定义，<br> 在VI命令行模式 “：ts”命令就能列出一个列表供用户选择。<br> “：tp”为上一个tag标记文件，<br> “：tn”为下一个tag标记文件。<br> 当然，若当前tags文件中用户所查找的变量或函数名只有一个，“:tp,:tn”命令不可用。<br> （最方便的方法是把光标移到变量名或函数名上，然后按下“Ctrl+]”，这样就能直接跳到这个变量或函数定义的源文件中，并把光标定位到这一行。用“Ctrl+T”可以退回原来的地方。即使用户使用了N次“Ctrl+]”查找了N个变量，按N次“Ctrl+t”也能回到最初打开的文件，它会按原路返回 。<br> 注意：运行vim的时候，必须在“tags”文件所在的目录下运行。否则，运行vim的时候还要用“:set tags=”命令设定“tags”文件的路径，这样vim才能找到“tags”文件。在完成编码时，可以手工删掉tags文件（帚把不到，灰尘不会自己跑掉<sup>_</sup>）。</p> 
<h2><a id="chrom_303"></a>离线安装chrom插件</h2> 
<p>安装完成后，依然无法屏蔽热键，我已经改用qq浏览器了，qq浏览器可以禁用热键</p> 
<p>由于 ctags 的快捷键 和 chrom 快捷键冲突了<br> chrom插件网<br> <a href="http://www.cnplugins.com/" rel="nofollow">http://www.cnplugins.com/</a><br> 安装这个这个插件<br> Shortkeys (Custom Keyboard Shortcuts) v2.2.7 Chrome插件下载<br> Chrome插件安装时出现"CRX-INVALID-HEAD"解决方法<br> 1.将下载的.crx格式的插件通过重命名的方式修改成.zip文件<br> 2.解压缩.zip文件成文件夹<br> 3.打开Chrome扩展程序管理页面，打开开发者模式<br> 4.点击“加载已解压的扩展程序”<br> 5.找到文件夹，选择文件夹，安装完成<br> 6.安装好的扩展程序可能会有红色的“错误”标记，但不影响使用</p> 
<h2><a id="gcc_C__319"></a>gcc编译简单的 C 程序</h2> 
<p>C 语言经典的入门例子是 Hello World，下面是一示例代码：<br> #include &lt;stdio.h&gt;<br> int<br> main(void)<br> {<!-- --><br> printf(“Hello, world!\n”);<br> return 0;<br> }<br> 我们假定该代码存为文件‘hello.c’。要用 gcc 编译该文件，使用下面的命令：<br> $ gcc -Wall hello.c -o hello<br> 该命令将文件‘hello.c’中的代码编译为机器码并存储在可执行文件 ‘hello’中。机器码的文件名是通过 -o 选项指定的。该选项通常作为命令行中的最后一个参数。如果被省略，输出文件默认为 ‘a.out’。<br> 注意到如果当前目录中与可执行文件重名的文件已经存在，它将被复盖。 选项 -Wall 开启编译器几乎所有常用的警告──强烈建议你始终使用该选项。编译器有很多其他的警告选项，但 -Wall 是最常用的。默认情况下GCC 不会产生任何警告信息。当编写 C 或 C++ 程序时编译器警告非常有助于检测程序存在的问题。<br> 本例中，编译器使用了 -Wall 选项而没产生任何警告，因为示例程序是完全合法的。<br> 要运行该程序，输入可执行文件的路径如下：<br> $ ./hello<br> Hello, world!<br> 这将可执行文件载入内存，并使 CPU 开始执行其包含的指令。 路径 ./ 指代当前目录，因此 ./hello 载入并执行当前目录下的可执行文件 ‘hello’。</p> 
<h2><a id="ATT__intel_339"></a>AT&amp;T汇编基本语法 和 intel汇编的区别</h2> 
<p>Ucore中用到的是AT&amp;T格式的汇编，与Intel格式的汇编有一些不同。二者语法上主要有以下几个不同：</p> 
<pre><code>* 寄存器命名原则
    AT&amp;T: %eax                      Intel: eax
* 源/目的操作数顺序 
    AT&amp;T: movl %eax, %ebx           Intel: mov ebx, eax
* 常数/立即数的格式　
    AT&amp;T: movl $_value, %ebx        Intel: mov eax, _value
  把value的地址放入eax寄存器
    AT&amp;T: movl $0xd00d, %ebx        Intel: mov ebx, 0xd00d
* 操作数长度标识 
    AT&amp;T: movw %ax, %bx             Intel: mov bx, ax
* 寻址方式 
    AT&amp;T:   immed32(basepointer, indexpointer, indexscale)
    Intel:  [basepointer + indexpointer × indexscale + imm32)
</code></pre> 
<p>如果操作系统工作于保护模式下，用的是32位线性地址，所以在计算地址时不用考虑segment:offset的问题。上式中的地址应为：</p> 
<pre><code>imm32 + basepointer + indexpointer × indexscale
</code></pre> 
<p>下面是一些例子：</p> 
<pre><code>* 直接寻址 
        AT&amp;T:  foo                         Intel: [foo]
        boo是一个全局变量。注意加上$是表示地址引用，
        不加是表示值引用。对于局部变量，可以通过堆栈指针引用。

* 寄存器间接寻址 
        AT&amp;T: (%eax)                        Intel: [eax]

* 变址寻址 
        AT&amp;T: _variable(%eax)               Intel: [eax + _variable]
        AT&amp;T: _array( ,%eax, 4)             Intel: [eax × 4 + _array]
        AT&amp;T: _array(%ebx, %eax,8)          Intel: [ebx + eax × 8 + _array]
</code></pre> 
<h2><a id="QEMU_381"></a>安装硬件模拟器QEMU</h2> 
<p>centos7 安装 qemu</p> 
<pre><code>安装依赖
yum install git glib2-devel libfdt-devel pixman-devel zlib-devel  -y
 yum install libaio-devel libcap-devel libiscsi-devel libvirt-devel  -y
</code></pre> 
<pre><code>yum -y install epel-release
刷新yum缓存
 yum clean all &amp;&amp; yum makecache
</code></pre> 
<pre><code>安装qemu
 yum install qemu -y
 安装完成后
 whereis qemu
 输出   qemu: /etc/qemu /usr/share/qemu
</code></pre> 
<p>博主安装qemu后提交了一份关于qemu的镜像</p> 
<pre><code>docker commit ucoreos   registry.cn-hangzhou.aliyuncs.com/mkmk/conda:qemu
docker push  registry.cn-hangzhou.aliyuncs.com/mkmk/conda:qemu
</code></pre> 
<p>centos7 下qemu 调用命令为 qemu-system-x86_64<br> 觉得不方便的可以自己去建立 软连接</p> 
<h2><a id="lab1qemu_414"></a>制作lab1镜像文件并用qemu加载</h2> 
<p>再次提醒 centos7 下qemu 使用和 ubuntu下不太相同</p> 
<pre><code>编译生成可以 用来加载的 img文件
cd  /home/ucoreos/ucore_os_lab-master/labcodes_answer/lab1_result 

make生成img镜像文件，在labcodes_answer/lab1_result 目录下
make

到生成的 bin目录查看是否生成 镜像文件
cd  bin  &amp;&amp;  ls
输出  bootblock  kernel  sign  ucore.img

发现存在  ucore.img ,讲 ucore.img 挂载到 qemu  虚拟机中
开始模拟真机
qemu-system-x86_64    -hda ucore.img -parallel stdio  

错误提示 缺少qemu: could not load PC BIOS 'bios-256k.bin'
yum install seabios -y 

模拟真机失败
qemu-system-x86_64    -hda ucore.img -parallel stdio  
(process:1165): GLib-WARNING **: 06:42:36.693: gmem.c:489: custom memory allocation vtable not supported
(qemu-system-x86_64:1165): Gtk-WARNING **: 06:42:36.716: cannot open display:
不能连接图形设备，那我们就禁用掉图形显示设备，加上参数   -nographic

模拟真机成功
qemu-system-x86_64    -hda ucore.img -parallel stdio   -nographic


</code></pre> 
<pre><code>centos7

模拟真机成功
qemu-system-x86_64    -hda ucore.img -parallel stdio   -nographic

ubuntu 
qemu -hda ucore.img -parallel stdio   -nographic
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/17d80b4d1fe96d9403a57f0fee3916d2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">优化算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7d2f4a72251063e94c19eed8a1bb6c8e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux - mount fail       chroot</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>