<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>老卫带你学---leetcode刷题(1096. 花括号展开 II) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="老卫带你学---leetcode刷题(1096. 花括号展开 II)" />
<meta property="og:description" content="1096. 花括号展开 II 问题： 如果你熟悉 Shell 编程，那么一定了解过花括号展开，它可以用来生成任意字符串。
花括号展开的表达式可以看作一个由 花括号、逗号 和 小写英文字母 组成的字符串，定义下面几条语法规则：
如果只给出单一的元素 x，那么表达式表示的字符串就只有 “x”。R(x) = {x}
例如，表达式 {“a”} 表示字符串 “a”。
而表达式 {“w”} 就表示字符串 “w”。
当两个或多个表达式并列，以逗号分隔时，我们取这些表达式中元素的并集。R({e_1,e_2,…}) = R(e_1) ∪ R(e_2) ∪ …
例如，表达式 “{a,b,c}” 表示字符串 “a”,“b”,“c”。
而表达式 “{{a,b},{b,c}}” 也可以表示字符串 “a”,“b”,“c”。
要是两个或多个表达式相接，中间没有隔开时，我们从这些表达式中各取一个元素依次连接形成字符串。R(e_1 &#43; e_2) = {a &#43; b for (a, b) in R(e_1) × R(e_2)}
例如，表达式 “{a,b}{c,d}” 表示字符串 “ac”,“ad”,“bc”,“bd”。
表达式之间允许嵌套，单一元素与表达式的连接也是允许的。
例如，表达式 “a{b,c,d}” 表示字符串 “ab”,“ac”,&#34;ad&#34;​​​​​​。
例如，表达式 “a{b,c}}{{d,e}f{g,h}” 可以表示字符串 “abdfg”, “abdfh”, “abefg”, “abefh”, “acdfg”, “acdfh”, “acefg”, “acefh”。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d4694a674b40b02fe2f7036c997d1261/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-25T22:00:22+08:00" />
<meta property="article:modified_time" content="2020-09-25T22:00:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">老卫带你学---leetcode刷题(1096. 花括号展开 II)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1096__II_0"></a>1096. 花括号展开 II</h2> 
<h3><a id="_1"></a>问题：</h3> 
<p>如果你熟悉 Shell 编程，那么一定了解过花括号展开，它可以用来生成任意字符串。</p> 
<p>花括号展开的表达式可以看作一个由 花括号、逗号 和 小写英文字母 组成的字符串，定义下面几条语法规则：</p> 
<p>如果只给出单一的元素 x，那么表达式表示的字符串就只有 “x”。R(x) = {x}<br> 例如，表达式 {“a”} 表示字符串 “a”。<br> 而表达式 {“w”} 就表示字符串 “w”。<br> 当两个或多个表达式并列，以逗号分隔时，我们取这些表达式中元素的并集。R({e_1,e_2,…}) = R(e_1) ∪ R(e_2) ∪ …<br> 例如，表达式 “{a,b,c}” 表示字符串 “a”,“b”,“c”。<br> 而表达式 “{<!-- -->{a,b},{b,c}}” 也可以表示字符串 “a”,“b”,“c”。<br> 要是两个或多个表达式相接，中间没有隔开时，我们从这些表达式中各取一个元素依次连接形成字符串。R(e_1 + e_2) = {a + b for (a, b) in R(e_1) × R(e_2)}<br> 例如，表达式 “{a,b}{c,d}” 表示字符串 “ac”,“ad”,“bc”,“bd”。<br> 表达式之间允许嵌套，单一元素与表达式的连接也是允许的。<br> 例如，表达式 “a{b,c,d}” 表示字符串 “ab”,“ac”,"ad"​​​​​​。<br> 例如，表达式 “a{b,c}}{<!-- -->{d,e}f{g,h}” 可以表示字符串 “abdfg”, “abdfh”, “abefg”, “abefh”, “acdfg”, “acdfh”, “acefg”, “acefh”。<br> 给出表示基于给定语法规则的表达式 expression，返回它所表示的所有字符串组成的有序列表。</p> 
<p>假如你希望以「集合」的概念了解此题，也可以通过点击 “显示英文描述” 获取详情。</p> 
<p>示例 1：</p> 
<pre><code class="prism language-python">输入：<span class="token string">"{a,b}{c,{d,e}}"</span>
输出：<span class="token punctuation">[</span><span class="token string">"ac"</span><span class="token punctuation">,</span><span class="token string">"ad"</span><span class="token punctuation">,</span><span class="token string">"ae"</span><span class="token punctuation">,</span><span class="token string">"bc"</span><span class="token punctuation">,</span><span class="token string">"bd"</span><span class="token punctuation">,</span><span class="token string">"be"</span><span class="token punctuation">]</span>
</code></pre> 
<p>示例 2：</p> 
<pre><code class="prism language-python">输入：<span class="token string">"{<!-- -->{a,z},a{b,c},{ab,z}}"</span>
输出：<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">,</span><span class="token string">"ab"</span><span class="token punctuation">,</span><span class="token string">"ac"</span><span class="token punctuation">,</span><span class="token string">"z"</span><span class="token punctuation">]</span>
</code></pre> 
<p>解释：输出中 不应 出现重复的组合结果。</p> 
<p>提示：</p> 
<p>1 &lt;= expression.length &lt;= 50<br> expression[i] 由 ‘{’，’}’，’,’ 或小写英文字母组成<br> 给出的表达式 expression 用以表示一组基于题目描述中语法构造的字符串</p> 
<h3><a id="_46"></a>解决：</h3> 
<h4><a id="_47"></a>思想：</h4> 
<p>使用压栈来存储当前括号的状态，如果遇到新的左括号，将当前确定和未确定的元素集合保存起来。<br> 当遇到右括号，将当前所有未确定加入确定中，并出栈，将确定加入到上一层的未确定中（相乘）。<br> 具体代码与详细注释如下。</p> 
<h4><a id="python_53"></a>python代码：</h4> 
<pre><code class="prism language-python"><span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">braceExpansionII</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> expression<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> c <span class="token keyword">in</span> expression<span class="token punctuation">:</span>
            <span class="token keyword">if</span> c <span class="token operator">==</span> <span class="token string">'{'</span><span class="token punctuation">:</span>
                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 压入 当前层已经确定元素集合</span>
                stack<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">''</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment"># 压入 当前层未确定元素集合</span>
            <span class="token keyword">elif</span> c <span class="token operator">==</span> <span class="token string">'}'</span><span class="token punctuation">:</span>
                unknow <span class="token operator">=</span> stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 出栈</span>
                know <span class="token operator">=</span> stack<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> unknow <span class="token comment"># 合并两个集合，由于遇见}，未确定的集合可以并入到已确定集合中</span>
                stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>i<span class="token operator">+</span>j <span class="token keyword">for</span> i <span class="token keyword">in</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">for</span> j <span class="token keyword">in</span> know<span class="token punctuation">}</span> <span class="token comment"># 将当前层与上一层未确定元素相×，完成出栈</span>
            <span class="token keyword">elif</span> c <span class="token operator">==</span> <span class="token string">','</span><span class="token punctuation">:</span>
                <span class="token comment"># 未确定元素可以确定结束</span>
                stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">|</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment"># 将未确定元素加入确定元素集合中</span>
                stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">''</span><span class="token punctuation">}</span> <span class="token comment"># 未确定元素清0</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                <span class="token comment"># 输入的为字母，直接与未确定元素集合×上当前字母</span>
                stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>i<span class="token operator">+</span>c <span class="token keyword">for</span> i <span class="token keyword">in</span> stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">|</span>stack<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/519cf95cdfe862c7ba17bcaa0d0b594a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">js隐式转换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c8414e0e7497555cba72d938e4e60ac4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python怎么卸载不了？No Python 3.8 installation was detected.</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>