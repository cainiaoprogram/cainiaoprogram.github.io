<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3使用i18n和echarts 切换语言不更换问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3使用i18n和echarts 切换语言不更换问题" />
<meta property="og:description" content="在vue3中使用i18n 中在 script setup中直接赋值 例如：
&lt;ul&gt; &lt;li class=&#34;tag&#34; v-for=&#34;(v, id, index) in message &#34; :ket=&#39;v.id&#39; @click=&#34;jump(v.id)&#34;&gt;{{ v.name }}&lt;/li&gt; &lt;/ul&gt; const message =reactive([ 0: { name: t(&#39;Home.Home&#39;), id: 0 }, 1: { name: t(&#39;Home.APP&#39;), id: 1 }, 2: { name: t(&#39;Home.Game&#39;), id: 4 }, 3: { name: t(&#39;Home.RoadMap&#39;), id: 5 }, ]) 如果按照这种情况，在更换语言时是不会进行切换的，必须通过 computed 来进行计算
const message = computed(() =&gt; { return reactive([ 0: { name: t(&#39;Home.Home&#39;), id: 0 }, 1: { name: t(&#39;Home." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c29b3dfd40482019ce52dce8e09d17dc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-22T15:35:17+08:00" />
<meta property="article:modified_time" content="2022-11-22T15:35:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3使用i18n和echarts 切换语言不更换问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="vue3i18n__script_setup_1"></a>在vue3中使用i18n 中在 script setup中直接赋值</h4> 
<p>例如：</p> 
<pre><code> &lt;ul&gt;
   &lt;li class="tag" v-for="(v, id, index) in message " :ket='v.id' @click="jump(v.id)"&gt;{<!-- -->{ v.name }}&lt;/li&gt;
&lt;/ul&gt;

const message =reactive([
      0: { name: t('Home.Home'), id: 0 },
      1: { name: t('Home.APP'), id: 1 },
      2: { name: t('Home.Game'), id: 4 },
      3: { name: t('Home.RoadMap'), id: 5 },
      ])
</code></pre> 
<p>如果按照这种情况，在更换语言时是不会进行切换的，必须通过 computed 来进行计算</p> 
<pre><code>const message = computed(() =&gt; { return reactive([
      0: { name: t('Home.Home'), id: 0 },
      1: { name: t('Home.APP'), id: 1 },
      2: { name: t('Home.Game'), id: 4 },
      3: { name: t('Home.RoadMap'), id: 5 },
      ])
}
</code></pre> 
<h4><a id="echarts_i18n_26"></a>在echarts 中使用i18n</h4> 
<p>在切换语言的时候，如果直接不做处理的切换，也不会进行更新语言<br> 如果按照上面的方式 直接使用 computed 会报错</p> 
<pre><code>Maximum call stack size exceeded
</code></pre> 
<p>在测试中发现了以下可行的方法</p> 
<pre><code>let MarkingText= [{ name: "30% " + t('stats。study') + "", value: 30 },
        { name: "33.75% " + t('stats.rest') + "", value: 33.75 },
        { name: "20% " + t("stats.Game") + "", value: 30 },
        { name: "11.25% " + t("stats.SOCIAL") + "", value: 11.25 },
        { name: "5% " + t("stats.Eating") + "", value: 5 },]

let options = {
  tooltip: {
    trigger: "item",
  },
  legend: {
    top: "bottom",
    textStyle: {
      // color: "#fff", // 改变标示文字的颜色
      fontSize: 12,
    },
    // itemHeight:20
  },

  series: [
    {
      label: {
        textStyle: {
          // color: "#fff", // 改变标示文字的颜色
        },
      },
      type: "pie",
      radius: ["35%", "70%"],
      height: "90%",
      left: "left",
      data: datas.value,
      emphasis: {
        itemStyle: {
          shadowBlur: 10,
          shadowOffsetX: 0,
          shadowColor: "rgba(0, 0, 0, 0.5)",
        },
      },
    },
  ],
}


let myChart

watch(
	currentLanguage,
	(newVal){
   		let data = computed(()=&gt; {return MarkingText}  )
    	options.series[0].data = data.value；
     	myChart.setOption(options);
	}
)


onMounted(() =&gt; {
let  dom = document.getElementById("Charts")
  myChart = echarts.init(dom);
  myChart.setOption(options);
})
</code></pre> 
<p>只贴出了部分关键代码具体根据实际情况</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a6f0fa6b108dc4941cc567f58ac38180/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于IoTDB学习的记录合集</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0d0e302458c7237aa4dac2f53ccd5e6b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[附源码]java毕业设计校园跑腿系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>