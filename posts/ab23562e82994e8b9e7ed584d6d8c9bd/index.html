<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JMeter&#43;InfluxDB&#43;Grafana 搭建可视化性能实时监控平台 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JMeter&#43;InfluxDB&#43;Grafana 搭建可视化性能实时监控平台" />
<meta property="og:description" content="一、用jmeter做并发测试，执行出来的报告太过粗糙，视图简陋，针对长时间的疲劳测试很难及时察看执行过程中的情况，搭建可视化页面，监控实时数据，能够储存和对比测试结果 二、简述 1、Influxdb是一种时序数据库，用来存放监控数据；我们需要搭建这个时序数据库服务，用来存放监控jmeter执行结果 1.1、Influxdb安装和部署 (windows10 64位操作系统)
下载地址：Get InfluxDB | #1 Ranked Time Series Database | InfluxData
1.2、修改influxdb.conf配置文件
修改时，注意文件内容原来的格式，别改错了，保存修改后的配置文件
1.3、启动Influxdb服务
看到这个页面，就说明Influxdb服务启动成功了，这个页面不要关，重新打开一个cmd窗口，敲Influx命令
1.4、 Influxdb自带一个客户端程序influx，可用来连接Influxdb数据库，进行增删改查等操作数据库，语法和sql语法相同 创建一个“jmeter”库(用于储存jmeter测试结果)
&gt; show databases # 查看所有数据库
&gt; create database &#34;jmeter&#34; # 创建数据库
&gt; use jmeter # 切换数据库
&gt; create uesr &#34;admin&#34; with password &#39;admin&#39; with all PRIVILEGES # 创建管理员权限的用户
2、搭建好influxdb后，在Jmeter中连接Influxdb，将Jmeter执行结果数据储存到Influxdb；Jmeter连接Influxdb是通过后端监听器建立连接 配置说明
2.1、Influxdb默认端口是8086，db=jmeter 是刚才创建的数据库名称jmeter
2.2、application：可根据需要自由定义，只是注意后面在 Grafana 中选对即可
2.3、measurement：表名，默认是 jmeter ，也可以自定义
2.4、summaryOnly：选择true的话就只有总体的数据，false会将每个transaction都分别记录Backend Listener的默认百分位设置为“90;95;99”，即百分位数为90％，95％、99％
3、influx连接数据库后，需要切换到我们创建的jmeter库中；使用查询命令：select * from jmeter JMeter和Infludb连接正常的话，执行查询语句会显示查询到数据，显示空的说明连接又有问题，需要检查前面的步骤
三、Grafana安装和部署 1、Grafana是一个跨平台的开源的度量分析和可视化工具，通过将采集的数据查询然后可视化的展示。利用Grafana连接Influxdb数据库，将Jmeter执行结果生成美观的视图 下载地址：Download Grafana | Grafana Labs" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ab23562e82994e8b9e7ed584d6d8c9bd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-06T18:17:32+08:00" />
<meta property="article:modified_time" content="2022-05-06T18:17:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JMeter&#43;InfluxDB&#43;Grafana 搭建可视化性能实时监控平台</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、用jmeter做并发测试，执行出来的报告太过粗糙，视图简陋，针对长时间的疲劳测试很难及时察看执行过程中的情况，搭建可视化页面，监控实时数据，能够储存和对比测试结果</h2> 
<p></p> 
<h2>二、简述</h2> 
<h4>1、Influxdb是一种时序数据库，用来存放监控数据；我们需要搭建这个时序数据库服务，用来存放监控jmeter执行结果</h4> 
<p></p> 
<p><strong>1.1、Influxdb安装和部署 (windows10 64位操作系统)</strong></p> 
<p style="margin-left:.0001pt;text-align:justify;">下载地址：<a href="https://www.influxdata.com/get-influxdb/" rel="nofollow" title="Get InfluxDB | #1 Ranked Time Series Database | InfluxData">Get InfluxDB | #1 Ranked Time Series Database | InfluxData</a></p> 
<p><img alt="" height="186" src="https://images2.imgbox.com/65/4d/jDdeftlz_o.png" width="658"></p> 
<p><strong>1.2、修改influxdb.conf配置文件</strong><img alt="" height="301" src="https://images2.imgbox.com/e6/6d/3TAtGsij_o.png" width="706"></p> 
<p></p> 
<p><img alt="" height="896" src="https://images2.imgbox.com/48/0e/noGYZ61r_o.png" width="1200"></p> 
<p> 修改时，注意文件内容原来的格式，别改错了，保存修改后的配置文件</p> 
<p> </p> 
<p><strong>1.3、启动Influxdb服务</strong></p> 
<p><img alt="" height="296" src="https://images2.imgbox.com/19/de/pk6jA06l_o.png" width="793"></p> 
<p> </p> 
<p><img alt="" height="510" src="https://images2.imgbox.com/de/ba/zt2warYV_o.png" width="966"></p> 
<p><strong> 看到这个页面，就说明Influxdb服务启动成功了，这个页面不要关，重新打开一个cmd窗口，敲Influx命令</strong></p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/82/95/LmkHvNjr_o.png" width="949"></p> 
<p> </p> 
<h4><strong>1.4、 Influxdb自带一个客户端程序influx，可用来连接Influxdb数据库，进行增删改查等操作数据库，语法和sql语法相同</strong></h4> 
<p></p> 
<p style="margin-left:.0001pt;text-align:justify;">创建一个“jmeter”库(用于储存jmeter测试结果)</p> 
<p style="margin-left:.0001pt;text-align:justify;">&gt; show databases     # 查看所有数据库</p> 
<p style="margin-left:.0001pt;text-align:justify;">&gt; create database "jmeter"     # 创建数据库</p> 
<p style="margin-left:.0001pt;text-align:justify;">&gt; use jmeter               # 切换数据库</p> 
<p style="margin-left:.0001pt;text-align:justify;">&gt; create uesr "admin" with password 'admin' with all PRIVILEGES # 创建管理员权限的用户</p> 
<p><img alt="" height="455" src="https://images2.imgbox.com/ef/df/oOyV4aY2_o.png" width="946"></p> 
<p> </p> 
<h4>2、搭建好influxdb后，在Jmeter中连接Influxdb，将Jmeter执行结果数据储存到Influxdb；Jmeter连接Influxdb是通过后端监听器建立连接</h4> 
<p><img alt="" height="494" src="https://images2.imgbox.com/68/6a/m8ejFSHN_o.png" width="1200"></p> 
<p> 配置说明</p> 
<p>2.1、Influxdb默认端口是8086，<span style="background-color:#ffffff;"><span style="color:#121212;">db=jmeter 是刚才创建的数据库名称jmeter</span></span></p> 
<p></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;"><span style="color:#121212;">2.2、application：可根据需要自由定义，只是注意后面在 Grafana 中选对即可</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="background-color:#ffffff;"><span style="color:#121212;">2.3、measurement：表名，默认是 jmeter ，也可以自定义</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">2.4、<span style="background-color:#ffffff;"><span style="color:#121212;">summaryOnly：选择true的话就只有总体的数据，false会将每个transaction都分别记录</span></span><span style="background-color:#ffffff;">Backend Listener的默认百分位设置为“90;95;99”，即百分位数为90％，95％、99％</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<h4 style="margin-left:.0001pt;text-align:justify;">3、influx连接数据库后，需要切换到我们创建的jmeter库中；使用查询命令：select * from jmeter</h4> 
<p><img alt="" height="510" src="https://images2.imgbox.com/3d/c5/8UaRP9CU_o.png" width="962"></p> 
<p> JMeter和Infludb连接正常的话，执行查询语句会显示查询到数据，显示空的说明连接又有问题，需要检查前面的步骤</p> 
<p></p> 
<h2 style="margin-left:.0001pt;text-align:justify;">三、Grafana安装和部署</h2> 
<h4>1、Grafana是一个跨平台的开源的度量分析和可视化工具，通过将采集的数据查询然后可视化的展示。利用Grafana连接Influxdb数据库，将Jmeter执行结果生成美观的视图</h4> 
<p>下载地址：<a href="https://grafana.com/grafana/download?platform=windows" rel="nofollow" title="Download Grafana | Grafana Labs">Download Grafana | Grafana Labs</a></p> 
<p style="margin-left:.0001pt;text-align:justify;">打开浏览器访问http://localhost:3000，默认端口是3000；Grafana的默认登录名和密码admin/admin</p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#0d0016;">我是安装在本地所以是http://localhost:3000，如果安装在服务器，需将IP换成服务器IP访问</span></p> 
<p><img alt="" height="826" src="https://images2.imgbox.com/cd/6e/VEuvaSE5_o.png" width="1200"></p> 
<p></p> 
<h4>2、创建连接，添加数据源</h4> 
<p><img alt="" height="858" src="https://images2.imgbox.com/9e/a1/tdV80JFx_o.png" width="1200"></p> 
<p> </p> 
<p><img alt="" height="930" src="https://images2.imgbox.com/d1/f6/xCTm71E6_o.png" width="1200"></p> 
<p> </p> 
<p><img alt="" height="863" src="https://images2.imgbox.com/ad/3b/ZsAA6lCU_o.png" width="858"></p> 
<p> <img alt="" height="935" src="https://images2.imgbox.com/1a/19/RWF3UIua_o.png" width="1200"></p> 
<p> </p> 
<h4>3、配置首页展示页面，根据导入的模板id，对应显示看板<img alt="" height="572" src="https://images2.imgbox.com/db/4f/VkaiDHlh_o.png" width="1021"></h4> 
<p> <img alt="" height="634" src="https://images2.imgbox.com/f7/ee/k9o4K4g2_o.png" width="920"></p> 
<p> 需要导入一个json文件或者使用模版id，通过这个模版展示可视化报告的样式</p> 
<p>管网下载模板提取模版id：<a href="https://grafana.com/dashboards" rel="nofollow" title="https://grafana.com/dashboards">https://grafana.com/dashboards</a></p> 
<p><img alt="" height="923" src="https://images2.imgbox.com/31/29/C5wjm6Dq_o.png" width="1200"></p> 
<p><img alt="" height="835" src="https://images2.imgbox.com/a3/ff/mevXdEZy_o.png" width="1200"></p> 
<p></p> 
<p> <img alt="" height="865" src="https://images2.imgbox.com/17/7f/fWmGDBTz_o.png" width="1200"></p> 
<p> 如果这个模板id不行，就换成https://grafana.com/grafana/dashboards/5496，我用的这个模板</p> 
<p></p> 
<p>我尝试了几个其他的模板，好像不行，具体原因我没找到<img alt="" height="858" src="https://images2.imgbox.com/d5/db/2Zg42yMr_o.png" width="858"></p> 
<p> </p> 
<p> <img alt="" height="882" src="https://images2.imgbox.com/d7/5f/yYFZ2ucv_o.png" width="1200"></p> 
<p> </p> 
<h4> 4、打开jmeter，执行脚本，实时刷新Grafana</h4> 
<p><img alt="" height="534" src="https://images2.imgbox.com/a8/2b/kHJ9qa5Z_o.png" width="955"></p> 
<p> <img alt="" height="808" src="https://images2.imgbox.com/cc/31/MgX1Ob45_o.png" width="1133"></p> 
<p> </p> 
<h4>5、添加一个图形界面</h4> 
<h3 id="添加一个图形界面"><img alt="" height="733" src="https://images2.imgbox.com/04/e3/0UkHMYqY_o.png" width="1200"></h3> 
<p> <img alt="" height="508" src="https://images2.imgbox.com/a5/50/jobGBEpF_o.png" width="1042"></p> 
<h4> 6、为界面关联数据</h4> 
<ol><li>选择testDB数据库</li><li>添加查询语句</li><li>完美显示！记得保存</li></ol> 
<p><img alt="" height="901" src="https://images2.imgbox.com/81/49/7vg4aCUC_o.png" width="1200"></p> 
<p> </p> 
<p></p> 
<p>如果遇到关于windows系统安装grafana无法访问的问题（真实踩坑解决）</p> 
<p><img alt="" height="609" src="https://images2.imgbox.com/75/6d/B3e8aoV7_o.png" width="1006"></p> 
<p> </p> 
<p><img alt="" height="828" src="https://images2.imgbox.com/1d/cb/iG3MPW91_o.png" width="1128"></p> 
<p> 按这通操作后，应该能正常打开Grafana</p> 
<p style="margin-left:.0001pt;text-align:justify;">打开浏览器访问 http://localhost:3000</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c4fcb01a7e8442ee6fad8f451c9ed011/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">扫雷游戏（保姆式教程）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c0a83e0d6f1d4df9d5536ca1cf124699/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">相差为2的两个素数称为孪生素数。例如，3与5，41与43等都是孪生素数。设计程序求出指定区间上的所有孪生素数对。区间上限和下限由键盘获取。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>