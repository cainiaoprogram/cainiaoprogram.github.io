<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu上架设PPPoE Server - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu上架设PPPoE Server" />
<meta property="og:description" content="一。安裝 PPPoE Server Software 1)sudo apt-get install ppp 2)rp-pppoe(非apt套件) wget -c http://www.roaringpenguin.com/files/download/rp-pppoe-3.10.tar.gz sudo tar zxvf rp-pppoe-3.6.tar.gz -C /opt/ sudo chown -R root:root /opt/rp-pppoe-3.6/ 3) 安裝軟體開發函示庫： sudo apt-get install libc6-dev 4) 產生需要的pppoe server程式 sudo /opt/rp-pppoe-3.6/go 二。配置： allan @allan-desktop:~#sudo vim /etc/ppp/options ####### ms-dns 4.2.2.2 ms-dns 172.25.5.1 -pap &#43;chap ....... ####### 具体的不详述，根据文件的描述加上自己的sense配就是。 三。添加用户： allan @allan-desktop:~#sudo vim /etc/ppp/chap-secrets ############################## # Secrets for authentication using CHAP # client server secret IP addresses ting * &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e66a31970b04ac960e62f0970ec02787/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-02T22:46:52+08:00" />
<meta property="article:modified_time" content="2019-07-02T22:46:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu上架设PPPoE Server</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <div>
   一。安裝 PPPoE Server Software 
  <br>1)sudo apt-get install ppp 
  <br>2)rp-pppoe(非apt套件) 
  <br>wget -c  
  <a href="http://www.roaringpenguin.com/files/download/rp-pppoe-3.10.tar.gz" rel="nofollow">http://www.roaringpenguin.com/files/download/rp-pppoe-3.10.tar.gz</a> 
  <br>sudo tar zxvf rp-pppoe-3.6.tar.gz -C /opt/ 
  <br>sudo chown -R root:root /opt/rp-pppoe-3.6/ 
  <br>3) 安裝軟體開發函示庫： 
  <br>sudo apt-get install libc6-dev 
  <br>4) 產生需要的pppoe server程式 
  <br>sudo /opt/rp-pppoe-3.6/go 
 </div> 
 <div>
     
 </div> 
 <div>
   二。配置： 
  <br> 
  <a href="mailto:allan@allan-desktop:~#sudo" rel="nofollow">allan</a> 
  <a href="mailto:allan@allan-desktop" rel="nofollow">@allan-desktop</a>:~#sudo vim /etc/ppp/options 
 </div> 
 <div>
   ####### 
  <br>ms-dns 4.2.2.2 
  <br>ms-dns 172.25.5.1 
 </div> 
 <div>
   -pap 
  <br>+chap 
 </div> 
 <div>
   ....... 
 </div> 
 <div>
   ####### 
 </div> 
 <div>
   具体的不详述，根据文件的描述加上自己的sense配就是。 
 </div> 
 <div>
     
 </div> 
 <div>
   三。添加用户： 
  <br> 
  <a href="mailto:allan@allan-desktop:~#sudo" rel="nofollow">allan</a> 
  <a href="mailto:allan@allan-desktop" rel="nofollow">@allan-desktop</a>:~#sudo vim /etc/ppp/chap-secrets 
 </div> 
 <div>
   ############################## 
 </div> 
 <div>
   # Secrets for authentication using CHAP 
  <br># client server secret   IP addresses 
  <br>ting  *         "tingwang"       *     
 </div> 
 <div>
   ############################## 
 </div> 
 <div>
     
 </div> 
 <div>
   四。启用forward: 
 </div> 
 <div> 
  <a href="mailto:root@allan-desktop" rel="nofollow">root@allan-desktop</a>:~# echo "1"&gt;/proc/sys/net/ipv4/ip_forward 
 </div> 
 <div>
   Note: 这条命令一定要用root身份执行，sudo都没用，否则会提示Operation not permitted。 
 </div> 
 <div>
            如果不启用forward, client即使拿到IP, traffic也不能出去，只能到server而已。 
 </div> 
 <div>
     
 </div> 
 <div>
   Ubuntu root登陆技巧：只要用sudo passwd root给root设置密码，就可以以root身份登陆了。 
 </div> 
 <div>
     
 </div> 
 <div>
   五。启动PPPoE Server: 
 </div> 
 <div> 
  <a href="mailto:allan@allan-desktop" rel="nofollow">allan</a> 
  <a href="mailto:allan@allan-desktop" rel="nofollow">@allan-desktop</a>:~# sudo pppoe-server -I eth1 -L 172.25.27.125 -R 172.25.27.181 -N 10 
 </div> 
 <div>
     
 </div> 
 <div>
   六。测试 
 </div> 
 <div>
   在xp上破号，用户名ting, 密码tingwang. 拿到181的IP，并能上网。 Oh, yeah! 
  <br> 
  <br> 
  <br> 
  <br>1、检查系统是否已安装PPPOE服务器 
  <br>rpm -q rp-pppoe 
  <br>如果未安装，可以到  
  <a href="http://www.roaringpenguin.com/pppoe/" rel="nofollow">www.roaringpenguin.com/pppoe/</a> 下载 
  <br> 
  <br>2、配置系统以支持IP转发 
  <br>修改/etc/sysctl.conf文件：net.ipv4.ip_forward = 1 
  <br> 
  <br>3、修改PPPOE身份验证方式 
  <br>修改/etc/ppp/pppoe-server-options，全部内容如下： 
  <br>require-chap #使用chap验证协议，如果使用pap验证协议，则此行为 require-pap 
  <br>login 
  <br>lcp-echo-interval 10 
  <br>lcp-echo-failure 2 
  <br>ms-dns 202.96.134.133 #分配给客户端的DNS 
  <br>ms-dns 202.96.128.68 
  <br> 
  <br>4、添加身份验证账户 
  <br>修改/etc/ppp/chap-secrets，添加账户 #如果使用pap验证，则修改/etc/ppp/pap-secrets 
  <br>username * password * 
  <br> 
  <br>5、启动pppoe服务器 
  <br>pppoe-server -I eth0 -L 192.168.0.1 -R 192.168.0.5 -N 10 
  <br>-I eth0 指定pppoe服务器在那个网卡接口监听连接请求 
  <br>-L 192.168.0.1 指定pppoe服务器的ip地址。（注意：此IP地址不是网卡的IP地址，而是PPPOE服务器的虚拟IP） 
  <br>-R 192.168.0.5 pppoe服务器分配给客户端的IP地址，从192.168.0.5开始，递增 
  <br>-N 10 指定最多可以连接pppoe服务器的客户端数量 
  <br> 
  <br>6、关闭PPPOE服务器 
  <br>killall pppoe-server 
  <br> 
  <br>备注： 
  <br>1、如果使用pap验证方式，windowsxp以上系统自带的pppoe拨号，无法拨通。可能原因是pap使用明文密码验证，而windows保存的密码是加密的，而且是不可恢复的加密，所以windows无法提供密码明文。 
  <br> 
  <br>2、/etc/ppp/pppoe-server-options和/etc/ppp/options，配置无论写在哪个文件中，都能够起到作用. 
 </div> 
 <div>
     
 </div> 
 <div>
   http://blog.csdn.net/linweig/article/details/5481355 
 </div> 
</div> 
<p>转载于:https://www.cnblogs.com/kungfupanda/p/3268453.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6498ddb9d7bfae23da1969fb9a71d747/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PPPoE Server Under Ubuntu/Debian</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a990a04326d1b2cfeb5fcccfab70587e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Using Ldp.exe to Find Data in the Active Directory</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>