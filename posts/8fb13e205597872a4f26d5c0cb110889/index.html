<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Xamarin.Android实现简易计算器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Xamarin.Android实现简易计算器" />
<meta property="og:description" content="背景 初学安卓开发，由于java不熟，AS也配置失败，于是转向了C#老本行😁
其实个人认为C#开发安卓比用java爽嘛……
采用了VS自带的模板&#34;第一视图应用&#34;
计算类采用了System.Data命名空间里的Compute方法，十分方便（但痛点在于得考虑输入的表达式是否合法，否则会出现内存闪退问题 (* ￣︿￣) ）
运行截图 废话少说直接上代码
布局：嵌套式页面
先在drawable文件夹里新建2个控件样式文件👇
elliptical_button.xml &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;shape xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:shape=&#34;rectangle&#34;&gt; &lt;stroke android:color=&#34;#749FF4&#34; android:width=&#34;3dip&#34;/&gt; &lt;solid android:color=&#34;#0A59F7&#34;/&gt; &lt;size android:width=&#34;62dp&#34; android:height=&#34;62dp&#34;/&gt; &lt;corners android:topLeftRadius=&#34;40dp&#34; android:topRightRadius=&#34;40dp&#34; android:bottomRightRadius=&#34;40dp&#34; android:bottomLeftRadius=&#34;40dp&#34;/&gt; &lt;/shape&gt; round_button.xml &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;shape xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:shape=&#34;oval&#34;&gt; &lt;stroke android:color=&#34;#F8F8F9&#34; android:width=&#34;3dip&#34;/&gt; &lt;solid android:color=&#34;#FCFCFC&#34;/&gt; &lt;size android:width=&#34;62dp&#34; android:height=&#34;62dp&#34;/&gt; &lt;/shape&gt; 布局 activity_main.xml &lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;androidx.coordinatorlayout.widget.CoordinatorLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34; xmlns:tools=&#34;http://schemas.android.com/tools&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34;&gt; &lt;com.google.android.material.appbar.AppBarLayout android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:theme=&#34;@style/AppTheme.AppBarOverlay&#34;&gt; &lt;androidx.appcompat.widget.Toolbar android:id=&#34;@&#43;id/toolbar&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;?attr/actionBarSize&#34; android:background=&#34;?attr/colorPrimary&#34; app:popupTheme=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8fb13e205597872a4f26d5c0cb110889/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-25T20:15:31+08:00" />
<meta property="article:modified_time" content="2023-01-25T20:15:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Xamarin.Android实现简易计算器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h3 style="">背景</h3> 
 <p style="">初学安卓开发，由于java不熟，AS也配置失败，于是转向了C#老本行😁</p> 
 <p style="">其实个人认为C#开发安卓比用java爽嘛……</p> 
 <p style="">采用了VS自带的模板"第一视图应用"</p> 
 <p style="">计算类采用了System.Data命名空间里的Compute方法，十分方便（但痛点在于得考虑输入的表达式是否合法，否则会出现内存闪退问题 (* ￣︿￣) ）</p> 
 <h3 style="">运行截图</h3> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:284px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:211.26761%;height:0;"> 
    <img src="https://images2.imgbox.com/42/47/R5944amR_o.jpg" style="margin-left:;display:block;width:284px;margin-top:-211.26761%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:284px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:211.26761%;height:0;"> 
    <img src="https://images2.imgbox.com/63/a0/pQ6kiSUD_o.jpg" style="margin-left:;display:block;width:284px;margin-top:-211.26761%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:284px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:211.26761%;height:0;"> 
    <img src="https://images2.imgbox.com/7b/3c/GaEam4dP_o.jpg" style="margin-left:;display:block;width:284px;margin-top:-211.26761%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style=""></p> 
 <p style="">废话少说直接上代码</p> 
 <p style=""></p> 
 <p style="">布局：嵌套式页面</p> 
 <p style="">先在drawable文件夹里新建2个控件样式文件👇</p> 
 <h4 style="">elliptical_button.xml</h4> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
       android:shape="rectangle"&gt;
    &lt;stroke
        android:color="#749FF4"
        android:width="3dip"/&gt;
    &lt;solid
        android:color="#0A59F7"/&gt;
    &lt;size
        android:width="62dp"
        android:height="62dp"/&gt;
    &lt;corners
        android:topLeftRadius="40dp"
        android:topRightRadius="40dp"
        android:bottomRightRadius="40dp"
        android:bottomLeftRadius="40dp"/&gt;
&lt;/shape&gt;
</code></pre> 
 <h4 style="">round_button.xml</h4> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"&gt;
    &lt;stroke
        android:color="#F8F8F9"
        android:width="3dip"/&gt;
    &lt;solid
        android:color="#FCFCFC"/&gt;
    &lt;size
        android:width="62dp"
        android:height="62dp"/&gt;
&lt;/shape&gt;
</code></pre> 
 <h3 style="">布局</h3> 
 <h4 style="">activity_main.xml</h4> 
 <pre class="kdocs-xml"><code class="language-xml">
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.coordinatorlayout.widget.CoordinatorLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;com.google.android.material.appbar.AppBarLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:theme="@style/AppTheme.AppBarOverlay"&gt;

        &lt;androidx.appcompat.widget.Toolbar
            android:id="@+id/toolbar"
            android:layout_width="match_parent"
            android:layout_height="?attr/actionBarSize"
            android:background="?attr/colorPrimary"
            app:popupTheme="@style/AppTheme.PopupOverlay" /&gt;

    &lt;/com.google.android.material.appbar.AppBarLayout&gt;

    &lt;include
        layout="@layout/content_main" /&gt;

&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;</code></pre> 
 <h4 style="">content_main.xml</h4> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:foregroundGravity="left"
    app:layout_behavior="@string/appbar_scrolling_view_behavior"
    tools:showIn="@layout/activity_main"
    android:id="@+id/layout1"&gt;

    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"&gt;

        &lt;TextView
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:layout_marginTop="6dp"
            android:gravity="right"
            android:autoSizeTextType="uniform"
            android:id="@+id/tex_count"/&gt;

        &lt;TextView
            android:layout_width="match_parent"
            android:layout_height="50dp"
            android:layout_marginTop="5dp"
            android:gravity="right"
            android:textSize="30sp"
            android:id="@+id/result"/&gt;

    &lt;/LinearLayout&gt;

    &lt;GridLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:columnCount="4"
        android:rowCount="5"
        android:orientation="horizontal"
        android:layout_marginTop="12dp"&gt;

        &lt;Button
            android:id="@+id/btn_clear"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="AC"
            android:textColor="#0A59F7"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_delete"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="del"
            android:textSize="28sp"
            android:layout_margin="5dp"
            android:enabled="false"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_add"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="+"
            android:textColor="#0A59F7"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_sub"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="-"
            android:textColor="#0A59F7"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        

        &lt;Button
            android:id="@+id/btn_nine"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="9"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_eight"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="8"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_seven"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="7"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_mul"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="×"
            android:textColor="#0A59F7"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        

        &lt;Button
            android:id="@+id/btn_six"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="6"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_five"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="5"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_four"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="4"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_div"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="÷"
            android:textColor="#0A59F7"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        

        &lt;Button
            android:id="@+id/btn_three"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="3"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_two"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="2"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_one"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="1"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_point"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="."
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_left"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="("
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_zero"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="0"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_right"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text=")"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/round_button"/&gt;

        &lt;Button
            android:id="@+id/btn_result"
            android:layout_width="75dp"
            android:layout_height="75dp"
            android:text="="
            android:enabled="false"
            android:textSize="30sp"
            android:layout_margin="5dp"
            android:background="@drawable/elliptical_button"/&gt;
    &lt;/GridLayout&gt;

&lt;/LinearLayout&gt;
</code></pre> 
 <h4 style="">AboutLayout.xml</h4> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;
    &lt;TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="About"
        android:textSize="30sp"
        android:layout_gravity="center"
        android:textColor="#ff000000"
        android:textStyle="italic|bold"
        android:typeface="monospace" /&gt;
    &lt;LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"&gt;


    &lt;/LinearLayout&gt;
    &lt;TextView
        android:text="Welcome ~"
        android:textSize="20sp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textColor="@android:color/background_dark"
        android:layout_marginLeft="20dp"
        android:typeface="serif" /&gt;
    &lt;TextView
        android:text="Thank you for downloading……"
        android:textSize="18sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="@android:color/background_dark"
        android:layout_marginLeft="25dp"
        android:textStyle="italic"
        android:typeface="serif" /&gt;
    &lt;TextView
        android:text="·This is a simple calculator"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="10dp"
        android:textSize="19sp"
        android:textColor="#ff000000"/&gt;
    &lt;TextView
        android:text="You can press the button to edit formulas"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:textSize="19sp"
        android:textColor="#ff000000"/&gt;
    &lt;TextView
        android:text="Instructions :"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="35dp"
        android:textSize="19sp"
        android:textColor="#ff000000"
        android:textStyle="bold"
        android:layout_marginTop="15dp"/&gt;
    &lt;TextView
        android:text="Formulas should be input in a correct form !"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="40dp"
        android:textSize="19sp"
        android:textColor="#ffd50000"
        android:textStyle="bold|italic" /&gt;
    &lt;TextView
        android:text="For example :"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="45dp"
        android:textSize="19sp"
        android:textColor="#ff000000"/&gt;
    &lt;TextView
        android:text="Formulas like  +=  or  4+=.2  are illogical ! "
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:textSize="15sp"/&gt;
    &lt;TextView
        android:text="Neither are those like  ()2  or  3+))2 . "
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:textSize="15sp"/&gt;
    &lt;TextView
        android:text="Email at"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="45dp"
        android:layout_marginTop="80dp"
        android:textSize="20sp"
        android:textColor="#ff000000"/&gt;
    &lt;TextView
        android:text="tony080410@outlook.com"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="60dp"
        android:layout_marginTop="20dp"
        android:textSize="16sp"
        android:textColor="#ff000000"
        android:textStyle="italic" /&gt;
    &lt;TextView
        android:text="or lpj080410@outlook.com"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="5dp"
        android:textSize="16sp"
        android:textColor="#ff000000"
        android:textStyle="italic" /&gt;
    &lt;TextView
        android:text="for more information"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="45dp"
        android:layout_marginTop="10dp"
        android:textSize="20sp"
        android:textColor="#ff000000"/&gt;
    &lt;TextView
        android:text="©All Rights Reserved Tony"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textStyle="bold"
        android:layout_marginTop="40dp" /&gt;
    
&lt;/LinearLayout&gt;
</code></pre> 
 <h3 style="">后台逻辑</h3> 
 <h4 style="">MainActivity.cs</h4> 
 <pre class="kdocs-csharp"><code class="language-csharp">using Android.App;
using Android.OS;
using Android.Runtime;
using Android.Views;
using AndroidX.AppCompat.App;
using Android.Content;
using Android.Widget;
using System.Collections.Generic;

namespace Simple_Calculator
{
    [Activity(Label = "@string/app_name", Theme = "@style/AppTheme.NoActionBar", MainLauncher = true)]
    public class MainActivity : AppCompatActivity, View.IOnClickListener
    {
        TextView tex_count;
        TextView tex_result;
        Button btn_clear;
        Button btn_one;
        Button btn_two;
        Button btn_three;
        Button btn_four;
        Button btn_five;
        Button btn_six;
        Button btn_seven;
        Button btn_eight;
        Button btn_nine;
        Button btn_zero;
        Button btn_point;
        Button btn_add;
        Button btn_mul;
        Button btn_div;
        Button btn_sub;
        Button btn_left;
        Button btn_right;
        Button btn_result;
        Button btn_delete;

        protected override void OnCreate(Bundle savedInstanceState)
        {
            base.OnCreate(savedInstanceState);
            Xamarin.Essentials.Platform.Init(this, savedInstanceState);
            SetContentView(Resource.Layout.activity_main);

            AndroidX.AppCompat.Widget.Toolbar toolbar = FindViewById&lt;AndroidX.AppCompat.Widget.Toolbar&gt;(Resource.Id.toolbar);
            SetSupportActionBar(toolbar);

            tex_count = FindViewById&lt;TextView&gt;(Resource.Id.tex_count);
            tex_result = FindViewById&lt;TextView&gt;(Resource.Id.result);

            btn_one = FindViewById&lt;Button&gt;(Resource.Id.btn_one);
            btn_two = FindViewById&lt;Button&gt;(Resource.Id.btn_two);
            btn_three = FindViewById&lt;Button&gt;(Resource.Id.btn_three);
            btn_four = FindViewById&lt;Button&gt;(Resource.Id.btn_four);
            btn_five = FindViewById&lt;Button&gt;(Resource.Id.btn_five);
            btn_six = FindViewById&lt;Button&gt;(Resource.Id.btn_six);
            btn_seven = FindViewById&lt;Button&gt;(Resource.Id.btn_seven);
            btn_eight = FindViewById&lt;Button&gt;(Resource.Id.btn_eight);
            btn_nine = FindViewById&lt;Button&gt;(Resource.Id.btn_nine);
            btn_zero = FindViewById&lt;Button&gt;(Resource.Id.btn_zero);
            btn_clear = FindViewById&lt;Button&gt;(Resource.Id.btn_clear);
            btn_add = FindViewById&lt;Button&gt;(Resource.Id.btn_add);
            btn_sub = FindViewById&lt;Button&gt;(Resource.Id.btn_sub);
            btn_mul = FindViewById&lt;Button&gt;(Resource.Id.btn_mul);
            btn_div = FindViewById&lt;Button&gt;(Resource.Id.btn_div);
            btn_point = FindViewById&lt;Button&gt;(Resource.Id.btn_point);
            btn_result = FindViewById&lt;Button&gt;(Resource.Id.btn_result);
            btn_left = FindViewById&lt;Button&gt;(Resource.Id.btn_left);
            btn_right = FindViewById&lt;Button&gt;(Resource.Id.btn_right);
            btn_delete = FindViewById&lt;Button&gt;(Resource.Id.btn_delete);

            
            //为每一个控件注册监听器
            btn_clear.SetOnClickListener(this);
            btn_one.SetOnClickListener(this);
            btn_two.SetOnClickListener(this);
            btn_three.SetOnClickListener(this);
            btn_four.SetOnClickListener(this);
            btn_five.SetOnClickListener(this);
            btn_six.SetOnClickListener(this);
            btn_seven.SetOnClickListener(this);
            btn_eight.SetOnClickListener(this);
            btn_nine.SetOnClickListener(this);
            btn_zero.SetOnClickListener(this);
            btn_point.SetOnClickListener(this);
            btn_add.SetOnClickListener(this);
            btn_mul.SetOnClickListener(this);
            btn_sub.SetOnClickListener(this);
            btn_div.SetOnClickListener(this);
            btn_result.SetOnClickListener(this);
            btn_right.SetOnClickListener(this);
            btn_left.SetOnClickListener(this);
            btn_delete.SetOnClickListener(this);



        }

        public override bool OnCreateOptionsMenu(IMenu menu)
        {
            MenuInflater.Inflate(Resource.Menu.menu_main, menu);
            return true;
        }

        public override bool OnOptionsItemSelected(IMenuItem item)
        {
            int id = item.ItemId;
            if (id == Resource.Id.action_about)
            {
                Intent intent_about = new Intent(this, typeof(AboutActivity));
                StartActivity(intent_about);
                return true;
            }

            return base.OnOptionsItemSelected(item);
        }



        public override void OnRequestPermissionsResult(int requestCode, string[] permissions, [GeneratedEnum] Android.Content.PM.Permission[] grantResults)
        {
            Xamarin.Essentials.Platform.OnRequestPermissionsResult(requestCode, permissions, grantResults);

            base.OnRequestPermissionsResult(requestCode, permissions, grantResults);
        }

        public void OnClick(View v)
        {
            switch (v.Id)
            {
                case Resource.Id.btn_clear:
                    tex_count.Text = string.Empty;
                    tex_result.Text = string.Empty;
                    btn_clear.Text = "AC";
                    btn_result.Enabled = false;
                    btn_delete.Enabled = false;
                    break;
                case Resource.Id.btn_one:
                    tex_count.Text += "1";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_two:
                    tex_count.Text += "2";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_three:
                    tex_count.Text += "3";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_four:
                    tex_count.Text += "4";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_five:
                    tex_count.Text += "5";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_six:
                    tex_count.Text += "6";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_seven:
                    tex_count.Text += "7";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_eight:
                    tex_count.Text += "8";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_nine:
                    tex_count.Text += "9";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_point:
                    tex_count.Text += ".";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_zero:
                    tex_count.Text += "0";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_add:
                    tex_count.Text += "+";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_mul:
                    tex_count.Text += "*";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_sub:
                    tex_count.Text += "-";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_div:
                    tex_count.Text += "/";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_right:
                    tex_count.Text += ")";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_left:
                    tex_count.Text += "(";
                    btn_clear.Text = "C";
                    btn_result.Enabled = true;
                    btn_delete.Enabled = true;
                    break;
                case Resource.Id.btn_result:
                    //判断输入表达式是否合法
                    if (CheckBracket(tex_count.Text) == false
                        || tex_count.Text.StartsWith(".")
                        || tex_count.Text.StartsWith("*")
                        || tex_count.Text.StartsWith("/")
                        || tex_count.Text.StartsWith(")")
                        || tex_count.Text.EndsWith("*")
                        || tex_count.Text.EndsWith("/")
                        || tex_count.Text.EndsWith("(")
                        || tex_count.Text.EndsWith("+")
                        || tex_count.Text.EndsWith("-")
                        || tex_count.Text.EndsWith(".")
                        || tex_count.Text.Contains("..")
                        || tex_count.Text.Contains("+-")
                        || tex_count.Text.Contains("++")
                        || tex_count.Text.Contains("--")
                        || tex_count.Text.Contains("**")
                        || tex_count.Text.Contains("//")
                        || tex_count.Text.Contains("+*")
                        || tex_count.Text.Contains("+/")
                        || tex_count.Text.Contains("+)")
                        || tex_count.Text.Contains("-)")
                        || tex_count.Text.Contains("*)")
                        || tex_count.Text.Contains("/)")
                        || tex_count.Text.Contains("()")
                        || tex_count.Text.Contains(".)")
                        || tex_count.Text.Contains(".(")
                        || tex_count.Text.Contains(".*")
                        || tex_count.Text.Contains("./")
                        || tex_count.Text.Contains(".+")
                        || tex_count.Text.Contains(".-")
                        || tex_count.Text.Contains("0(")
                        || tex_count.Text.Contains("1(")
                        || tex_count.Text.Contains("2(")
                        || tex_count.Text.Contains("3(")
                        || tex_count.Text.Contains("4(")
                        || tex_count.Text.Contains("5(")
                        || tex_count.Text.Contains("6(")
                        || tex_count.Text.Contains("7(")
                        || tex_count.Text.Contains("8(")
                        || tex_count.Text.Contains("9(")
                        || CheckPoint(tex_count.Text) == false)
                        tex_result.Text = "Error";
                    else
                    {
                        tex_result.Text = CalculatorClass.calculate(tex_count.Text).ToString();
                        btn_result.Enabled = false;
                        btn_delete.Enabled = false;

                    }

                    break;
                case Resource.Id.btn_delete:
                    tex_count.Text = tex_count.Text.Substring(0, tex_count.Text.Length - 1);
                    if (tex_count.Text.Length == 0)
                    {
                        btn_result.Enabled = false;
                        btn_delete.Enabled = false;
                        btn_clear.Text = "AC";
                    }
                    break;
                default: break;
            }
        }
        public static bool CheckBracket(string inputStr)
        {
            //检查括号匹配
            Stack&lt;char&gt; leftBracket = new Stack&lt;char&gt;();
            for (int i = 0; i &lt; inputStr.Length; i++)
            {
                if (inputStr[i] == '(')
                {
                    leftBracket.Push(inputStr[i]);
                }
                else if (inputStr[i] == ')')
                {
                    if (leftBracket.Count == 0 || '(' != leftBracket.Pop())
                    {
                        return false;
                    }
                }
            }
            if (leftBracket.Count &gt; 0)
            {
                return false;
            }
            return true;
        }
        public static bool CheckPoint(string inputStr)
        {
            //检测是否有类似于"23.23.23”的情况
            Stack&lt;char&gt; point = new Stack&lt;char&gt;();
            for (int i = 0; i &lt; inputStr.Length; i++)
            {
                if (inputStr[i] == '.'
                    || inputStr[i] == '+'
                    || inputStr[i] == '-'
                    || inputStr[i] == '*'
                    || inputStr[i] == '/'
                    || inputStr[i] == '('
                    || inputStr[i] == ')')
                    point.Push(inputStr[i]);
            }
            string str = string.Concat(point);
            if (str.Contains(".."))
                return false;
            return true;
        }
    }
}
</code></pre> 
 <h4 style="">AboutActivity.cs</h4> 
 <pre class="kdocs-csharp"><code class="language-csharp">using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Simple_Calculator
{
    [Activity(Label = "AboutActivity")]
    public class AboutActivity : Activity
    {
        protected override void OnCreate(Bundle savedInstanceState)
        {
            base.OnCreate(savedInstanceState);

            // Create your application here
            SetContentView(Resource.Layout.AboutLayout);
        }
    }
}</code></pre> 
 <h4 style="">CalculatorClass.cs</h4> 
 <pre class="kdocs-csharp"><code class="language-csharp">using System.Data;

namespace Simple_Calculator
{
    internal class CalculatorClass
    {
        internal static double calculate(string expression)
        {
            object result = new DataTable().Compute(expression, "");
            return double.Parse(result + "");
        }
    }
}</code></pre> 
 <h3 style="">注意事项</h3> 
 <h5 style="">①修改menu.xml文件</h5> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;menu xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"&gt;
    &lt;item
        android:id="@+id/action_about"
        android:orderInCategory="100"
        android:title="@string/action_settings"
        app:showAsAction="never" /&gt;
&lt;/menu&gt;
</code></pre> 
 <h5 style="">②修改styles.xml文件</h5> 
 <p style="">注意AppTheme一定要设为Theme.Design.Light，否则无法正常显示按钮样式</p> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;resources&gt;

    &lt;!-- Base application theme. --&gt;
    &lt;style name="AppTheme" parent="Theme.Design.Light"&gt;
        &lt;!-- Customize your theme here. --&gt;
        &lt;item name="colorPrimary"&gt;@color/colorPrimary&lt;/item&gt;
        &lt;item name="colorPrimaryDark"&gt;@color/colorPrimaryDark&lt;/item&gt;
        &lt;item name="colorAccent"&gt;@color/colorAccent&lt;/item&gt;
    &lt;/style&gt;

    &lt;style name="AppTheme.NoActionBar"&gt;
        &lt;item name="windowActionBar"&gt;false&lt;/item&gt;
        &lt;item name="windowNoTitle"&gt;true&lt;/item&gt;
    &lt;/style&gt;

    &lt;style name="AppTheme.AppBarOverlay" parent="ThemeOverlay.MaterialComponents.Dark.ActionBar" /&gt;

    &lt;style name="AppTheme.PopupOverlay" parent="ThemeOverlay.MaterialComponents.Light" /&gt;

&lt;/resources&gt;
</code></pre> 
 <h5 style="">③修改strings.xml文件</h5> 
 <pre class="kdocs-xml"><code class="language-xml">&lt;resources&gt;
    &lt;string name="app_name"&gt;Simple Calculator&lt;/string&gt;
    &lt;string name="action_settings"&gt;About&lt;/string&gt;
&lt;/resources&gt;
</code></pre> 
 <h5 style="">④在项目引用里添加System.Data</h5> 
 <p style="">否则Compute方法无法正常使用</p> 
 <p style="">如图</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:263px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:227.75665%;height:0;"> 
    <img src="https://images2.imgbox.com/13/57/rUSXNtrU_o.png" style="margin-left:;display:block;width:263px;margin-top:-227.75665%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h4 style="">写在最后</h4> 
 <h5 style="">①附上项目结构图</h5> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:247px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:242.91498%;height:0;"> 
    <img src="https://images2.imgbox.com/84/d7/l3cfE3S2_o.png" style="margin-left:;display:block;width:247px;margin-top:-242.91498%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h5 style="">②xamarin.android国内资源太少，鄙人开发过程中历经坎坷，以后会持续更新，替大家踩坑！</h5> 
 <h5 style="">③这个项目总体来说还算完美，若有问题欢迎各位大佬指出修改！</h5> 
 <p style="">时间紧，没写什么注释，恳请原谅……</p> 
 <p style="">有</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d94b455e0d3e96054aaec122c153bea9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">2023年企业信息安全缺陷和解决方案，防止职员外泄信息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/98744e9efe8a51033948832b92d49d18/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring自定义starter依赖以及相关引入依赖无法导入的问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>