<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu18.04 安装nvidia显卡驱动 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu18.04 安装nvidia显卡驱动" />
<meta property="og:description" content="ubuntu18.04 安装nvidia显卡驱动 1、查询显卡型号2、添加源3、查看驱动4、安装驱动5、其他安装方式6、查看显卡信息7、报错解决办法 一定要先禁用 nouveau,参考 ubuntu单系统开机后黑屏操作方法。 1、查询显卡型号 windows下打开设备管理器，选择显示适配器，UHD是集成显卡，GeForce是独立显卡。
在Ubuntu下查询显卡型号
集成显卡输入命令:
lspci -nn | grep VGA 独立显卡输入命令如下:(推荐)
lspci -nn | grep 3D 或者
lspci | grep -i nvidia 在PCI devices上查询对应的显卡型号
我的集成显卡8086:9b41对应的型号如下:
独立显卡10de:1d13对应型号如下
与windows查询的型号一致
2、添加源 sudo add-apt-repository ppa:graphics-drivers/ppa sudo apt update 3、查看驱动 sudo ubuntu-drivers devices 终端显示如下：
➜ sudo ubuntu-drivers devices [sudo] password for aviana: == /sys/devices/pci0000:00/0000:00:1c.0/0000:01:00.0 == modalias : pci:v000010DEd00001D13sv00001028sd00000956bc03sc02i00 vendor : NVIDIA Corporation driver : nvidia-driver-460 - third-party free driver : nvidia-driver-470 - third-party free recommended driver : xserver-xorg-video-nouveau - distro free builtin 4、安装驱动 使用命令行安装" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/952b6d79a6cc6ea77eb4dfa0bbd2b093/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-19T10:46:44+08:00" />
<meta property="article:modified_time" content="2022-10-19T10:46:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu18.04 安装nvidia显卡驱动</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ubuntu18.04 安装nvidia显卡驱动</h4> 
 <ul><li><a href="#1_2" rel="nofollow">1、查询显卡型号</a></li><li><a href="#2_29" rel="nofollow">2、添加源</a></li><li><a href="#3_34" rel="nofollow">3、查看驱动</a></li><li><a href="#4_50" rel="nofollow">4、安装驱动</a></li><li><a href="#5_57" rel="nofollow">5、其他安装方式</a></li><li><a href="#6_65" rel="nofollow">6、查看显卡信息</a></li><li><a href="#7_72" rel="nofollow">7、报错解决办法</a></li></ul> 
</div> 
<br> 一定要先禁用 
<code>nouveau</code>,参考 
<a href="https://editor.csdn.net/md/?articleId=120903025" rel="nofollow">ubuntu单系统开机后黑屏</a>操作方法。 
<p></p> 
<h2><a id="1_2"></a>1、查询显卡型号</h2> 
<p><code>windows</code>下打开设备管理器，选择显示适配器，<code>UHD</code>是集成显卡，<code>GeForce</code>是独立显卡。<br> <img src="https://images2.imgbox.com/10/e4/DOUQN13y_o.png" alt="在这里插入图片描述"><br> 在<code>Ubuntu</code>下查询显卡型号<br> 集成显卡输入命令:</p> 
<pre><code class="prism language-shell">lspci -nn <span class="token operator">|</span> <span class="token function">grep</span> VGA
</code></pre> 
<p><img src="https://images2.imgbox.com/6d/82/cjK0Si4Y_o.png" alt="在这里插入图片描述">独立显卡输入命令如下:(推荐)</p> 
<pre><code class="prism language-shell">lspci -nn <span class="token operator">|</span> <span class="token function">grep</span> 3D
</code></pre> 
<p>或者</p> 
<pre><code class="prism language-shell">lspci <span class="token operator">|</span> <span class="token function">grep</span> -i nvidia
</code></pre> 
<p><img src="https://images2.imgbox.com/3a/27/IZVsxdDP_o.png" alt="在这里插入图片描述"></p> 
<p>在<a href="https://pci-ids.ucw.cz/mods/PC/10de?action=help?help=pci" rel="nofollow">PCI devices</a>上查询对应的显卡型号</p> 
<p><img src="https://images2.imgbox.com/84/13/1kTmpjvd_o.png" alt="在这里插入图片描述"><br> 我的集成显卡<code>8086:9b41</code>对应的型号如下:<br> <img src="https://images2.imgbox.com/74/b3/vT0J8Qix_o.png" alt="在这里插入图片描述"><br> 独立显卡<code>10de:1d13</code>对应型号如下<br> <img src="https://images2.imgbox.com/cb/41/ntlW4mcY_o.png" alt="在这里插入图片描述"><br> 与<code>windows</code>查询的型号一致</p> 
<h2><a id="2_29"></a>2、添加源</h2> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> add-apt-repository ppa:graphics-drivers/ppa
<span class="token function">sudo</span> <span class="token function">apt</span> update
</code></pre> 
<h2><a id="3_34"></a>3、查看驱动</h2> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> ubuntu-drivers devices
</code></pre> 
<p>终端显示如下：</p> 
<pre><code class="prism language-shell">➜   <span class="token function">sudo</span> ubuntu-drivers devices                                        
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> aviana: 
<span class="token operator">==</span> /sys/devices/pci0000:00/0000:00:1c.0/0000:01:00.0 <span class="token operator">==</span>
modalias <span class="token builtin class-name">:</span> pci:v000010DEd00001D13sv00001028sd00000956bc03sc02i00
vendor   <span class="token builtin class-name">:</span> NVIDIA Corporation
driver   <span class="token builtin class-name">:</span> nvidia-driver-460 - third-party <span class="token function">free</span>
driver   <span class="token builtin class-name">:</span> nvidia-driver-470 - third-party <span class="token function">free</span> recommended
driver   <span class="token builtin class-name">:</span> xserver-xorg-video-nouveau - distro <span class="token function">free</span> <span class="token builtin class-name">builtin</span>
</code></pre> 
<h2><a id="4_50"></a>4、安装驱动</h2> 
<p>使用命令行安装</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nvidia-driver-470
</code></pre> 
<p>或者在<code>Software &amp; Updates</code>中选择<code>Additional Drivers</code>，选择想要安装的驱动版本，点击右下角<code>Apply Changes</code>，等待安装完成即可<br> <img src="https://images2.imgbox.com/99/1f/8UxLig7X_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="5_57"></a>5、其他安装方式</h2> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> apt-add-repository multiverse
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nvidia-driver-455
</code></pre> 
<p>这种方式可以安装其他比较旧的版本，不仅仅局限于<code>ubuntu</code>推荐的版本。</p> 
<h2><a id="6_65"></a>6、查看显卡信息</h2> 
<pre><code class="prism language-shell">nvidia-smi
</code></pre> 
<p>如果<code>ppa</code>方式安装不上，大概率<code>run</code>的方式也不行，可以参考上述文章手动安装显卡驱动(不建议手动安装),如果还是不行，建议重装系统(比如我 T_T，系统环境比较紊乱，有依赖冲突，不好解决)</p> 
<p><img src="https://images2.imgbox.com/bb/8a/eFFBH4yi_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="7_72"></a>7、报错解决办法</h2> 
<p>最后，强烈建议，安装的过程中如果有以下报错：</p> 
<pre><code class="prism language-shell">NVIDIA-SMI has failed because it couldn't communicate with the NVIDIA driver. 
Make sure that the latest NVIDIA driver is installed and running.
</code></pre> 
<p>并且使用以下命令也不能解决的话</p> 
<pre><code class="prism language-shell"><span class="token function">whereis</span> nvidia
</code></pre> 
<p>显示版本号之后，替换到下面的<code>[版本号]</code>中</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> dkms
<span class="token function">sudo</span> dkms <span class="token function">install</span> -m nvidia -v <span class="token punctuation">[</span>版本号<span class="token punctuation">]</span>
</code></pre> 
<p>比如我，<code>sudo dkms install -m nvidia -v [版本号]</code>遇到很多奇怪的报错，没有<code>gcc</code>，安装<code>sudo apt-get install build-essential</code>也有很多依赖冲突，更新源也不管用</p> 
<pre><code class="prism language-shell">build-essential <span class="token builtin class-name">:</span>
依赖: gcc<span class="token punctuation">(</span><span class="token operator">&gt;=</span> <span class="token number">4</span>:7.2<span class="token punctuation">)</span> 但是它将不会被安装
依赖: g++<span class="token punctuation">(</span><span class="token operator">&gt;=</span> <span class="token number">4</span>:7.2<span class="token punctuation">)</span> 但是它将不会被安装
依赖：dpkg-dev<span class="token punctuation">(</span><span class="token operator">&gt;=</span><span class="token number">1.17</span>.11<span class="token punctuation">)</span> 但是它将不会被安装
E: 无法修正错误，因为您要求某些软件包保持现状，就是它们破坏了软件包间的依赖关系。
</code></pre> 
<p>千万，千万，千万，千万不要使用<code>aptitude</code>包依赖管理工具来安装，网上有人使用以下命令解决依赖问题，都是坑</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">aptitude</span>
<span class="token function">sudo</span> <span class="token function">aptitude</span> <span class="token function">install</span> gcc g++
</code></pre> 
<p>说多了都是泪，可以使用下面的方法试一试：</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> remove --purge nvidia*
</code></pre> 
<p>然后会提示卸载一部分内容<br> <img src="https://images2.imgbox.com/1b/27/4WVCGQiE_o.png" alt="在这里插入图片描述"><br> <code>xserver</code>和<code>ubuntu-minimal</code>以及其他部分卸载后，因为<code>nouveau</code>已经禁用，开机不能进入图形化桌面，会自动进入tty模式，安装<code>ubuntu-desktop</code>提示依赖问题，无法安装，安装<code>tasksel</code></p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> tasksel
<span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> tasksel <span class="token function">install</span> ubuntu-desktop
<span class="token function">reboot</span>
</code></pre> 
<p>重启之后，再按照上面的方法安装显卡驱动，就可以装上了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b82e4d096afab768560268001aa96281/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Nginx实例：限制目录和URL以及IP访问控制</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e9bfe601386a805a4c0c90b3b3526f4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">深入了解RecyclerView</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>