<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>idea2021启动失败 Could not find main class com/intellij/idea/Main - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="idea2021启动失败 Could not find main class com/intellij/idea/Main" />
<meta property="og:description" content="目录
环境信息：
问题描述：
起因：
操作：
解决方案：
搜索结果：
解决思路：
解决方法：
结论：
环境信息： idea2021.1.1（注：如果是其它版本的idea，也可能会出现这个问题）
jdk1.8、jdk11
问题描述： 起因： 因为idea在启动项目的时候耗时很长，5分钟左右，于是百度了下idea占用cpu和内存过高的问题，发现有文章是说要更改idea的Runtime Version，
比如： 彻底解决Idea内存消耗严重和CPU资源占比严重的问题 (baidu.com)
intellij idea cpu占用率太大太满 运行速度太慢 使了五个解决方法最终成功_trusause的博客-CSDN博客_idea占用内存过大
操作： Choose Runtime，从默认的sdk11改成sdk8，idea自动重启的时候失败了，提示：
---------------------------
Error launching IDEA
---------------------------
Could not find main class com/intellij/idea/Main
解决方案： 搜索结果： 搜索了下这个错误，国内文章给的解决方案大多是配置jdk的路径，如 IDEA 启动报错could not find main class com/intellij/idea/main解决办法_人生如戏 全靠演技-CSDN博客
在环境变量里配置IDEA_JDK_64等等。
解决思路： 思路其实是对的，只是没能找到启动idea时设置使用的jdk路径的地方。
idea提供了命令行启动的方式，在idea的安装路径下bin目录（和idea64.exe同一个路径）有个idea.bat批处理文件，用cmd或PowerShell执行该bat之后，即能看到启动的详细信息，以PowerShell为例：
PS C:\Users\xxx&gt; cd D:\develop\IDEA\bin
PS D:\develop\IDEA\bin&gt; .\idea.bat
Error: A JNI error has occurred, please check your installation and try again" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/51bcf935361d27332f8f963557331335/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-19T13:11:46+08:00" />
<meta property="article:modified_time" content="2021-05-19T13:11:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">idea2021启动失败 Could not find main class com/intellij/idea/Main</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF%EF%BC%9A" rel="nofollow" title="环境信息：">环境信息：</a></p> 
<p id="%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%EF%BC%9A" rel="nofollow" title="问题描述：">问题描述：</a></p> 
<p id="%E8%B5%B7%E5%9B%A0-toc" style="margin-left:40px;"><a href="#%E8%B5%B7%E5%9B%A0" rel="nofollow" title="起因：">起因：</a></p> 
<p id="%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#%E6%93%8D%E4%BD%9C" rel="nofollow" title="操作：">操作：</a></p> 
<p id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A" rel="nofollow" title="解决方案：">解决方案：</a></p> 
<p id="%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C-toc" style="margin-left:40px;"><a href="#%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C" rel="nofollow" title="搜索结果：">搜索结果：</a></p> 
<p id="%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF-toc" style="margin-left:40px;"><a href="#%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF" rel="nofollow" title="解决思路：">解决思路：</a></p> 
<p id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-toc" style="margin-left:40px;"><a href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" rel="nofollow" title="解决方法：">解决方法：</a></p> 
<p id="%E7%BB%93%E8%AE%BA-toc" style="margin-left:0px;"><a href="#%E7%BB%93%E8%AE%BA" rel="nofollow" title="结论：">结论：</a></p> 
<hr id="hr-toc"> 
<h2 id="%E7%8E%AF%E5%A2%83%E4%BF%A1%E6%81%AF%EF%BC%9A">环境信息：</h2> 
<p>idea2021.1.1（注：如果是其它版本的idea，也可能会出现这个问题）</p> 
<p>jdk1.8、jdk11</p> 
<p><img alt="" height="353" src="https://images2.imgbox.com/31/00/4aTHTOGy_o.png" width="565"></p> 
<h2 id="%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0%EF%BC%9A">问题描述：</h2> 
<h3 id="%E8%B5%B7%E5%9B%A0">起因：</h3> 
<p>因为idea在启动项目的时候耗时很长，5分钟左右，于是百度了下idea占用cpu和内存过高的问题，发现有文章是说要更改idea的Runtime Version，</p> 
<p>比如： <a href="https://baijiahao.baidu.com/s?id=1675152526593434357&amp;wfr=spider&amp;for=pc" rel="nofollow" title="彻底解决Idea内存消耗严重和CPU资源占比严重的问题 (baidu.com)">彻底解决Idea内存消耗严重和CPU资源占比严重的问题 (baidu.com)</a></p> 
<p><a href="https://blog.csdn.net/trusause/article/details/94600143" title="intellij idea cpu占用率太大太满 运行速度太慢 使了五个解决方法最终成功_trusause的博客-CSDN博客_idea占用内存过大">intellij idea cpu占用率太大太满 运行速度太慢 使了五个解决方法最终成功_trusause的博客-CSDN博客_idea占用内存过大</a></p> 
<p></p> 
<p><img alt="" height="322" src="https://images2.imgbox.com/b6/25/hGx7Ki7x_o.png" width="497"></p> 
<h3 id="%E6%93%8D%E4%BD%9C">操作：</h3> 
<p><strong>Choose Runtime</strong>，<span style="color:#f33b45;">从默认的sdk11改成sdk8</span>，idea自动重启的时候失败了，提示：</p> 
<p><img alt="" height="204" src="https://images2.imgbox.com/d6/03/0gQZZcS2_o.png" width="401"></p> 
<blockquote> 
 <p>---------------------------<br> Error launching IDEA<br> ---------------------------<br><span style="color:#f33b45;">Could not find main class com/intellij/idea/Main</span></p> 
</blockquote> 
<h2 id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%EF%BC%9A">解决方案：</h2> 
<h3 id="%E6%90%9C%E7%B4%A2%E7%BB%93%E6%9E%9C">搜索结果：</h3> 
<p>搜索了下这个错误，国内文章给的解决方案大多是配置jdk的路径，如 <a href="https://blog.csdn.net/baidu_28665563/article/details/80911930" title="IDEA 启动报错could not find main class com/intellij/idea/main解决办法_人生如戏 全靠演技-CSDN博客">IDEA 启动报错could not find main class com/intellij/idea/main解决办法_人生如戏 全靠演技-CSDN博客</a></p> 
<p>在环境变量里配置IDEA_JDK_64等等。</p> 
<h3 id="%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF">解决思路：</h3> 
<p>思路其实是对的，只是没能找到启动idea时设置使用的jdk路径的地方。</p> 
<p>idea提供了命令行启动的方式，在idea的安装路径下bin目录（和idea64.exe同一个路径）有个idea.bat批处理文件，用cmd或PowerShell执行该bat之后，即能看到启动的详细信息，以PowerShell为例：</p> 
<blockquote> 
 <p>PS C:\Users\xxx&gt; cd D:\develop\IDEA\bin<br> PS D:\develop\IDEA\bin&gt; .\idea.bat<br> Error: A JNI error has occurred, please check your installation and try again<br> Exception in thread "main" java.lang.UnsupportedClassVersionError: com/intellij/idea/Main has been compiled by a more recent version of the <span style="color:#f33b45;">Java Runtime (class file version 55.0)</span>, this version of the Java Runtime only <span style="color:#f33b45;">recognizes class file versions up to 52.0</span><br>         at java.lang.ClassLoader.defineClass1(Native Method)<br>         at java.lang.ClassLoader.defineClass(ClassLoader.java:763)<br>         at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)<br>         at java.net.URLClassLoader.defineClass(URLClassLoader.java:467)<br>         at java.net.URLClassLoader.access$100(URLClassLoader.java:73)<br>         at java.net.URLClassLoader$1.run(URLClassLoader.java:368)<br>         at java.net.URLClassLoader$1.run(URLClassLoader.java:362)<br>         at java.security.AccessController.doPrivileged(Native Method)<br>         at java.net.URLClassLoader.findClass(URLClassLoader.java:361)<br>         at java.lang.ClassLoader.loadClass(ClassLoader.java:424)<br>         at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)<br>         at java.lang.ClassLoader.loadClass(ClassLoader.java:357)<br>         at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:495)<br> PS D:\develop\IDEA\bin&gt;</p> 
</blockquote> 
<p>报错的意思是com.intellij.idea.Main这个class文件<strong>版本号是55.0（对应jdk11），而运行用的jre是52.0（对应jdk8）</strong>。</p> 
<p>对应关系可以参考我的另一篇文章<a href="https://blog.csdn.net/lzhfdxhxm/article/details/117018384" title="JDK version和class file version(Class编译版本号)对应关系_lzhfdxhxm的博客-CSDN博客">JDK version和class file version(Class编译版本号)对应关系_lzhfdxhxm的博客-CSDN博客</a></p> 
<p>查看下idea.bat批处理，梳理里面的流程，可以发现使用的jre是有<span style="color:#f33b45;">优先级判断</span>的。批处理里就有注释：</p> 
<blockquote> 
 <p>:: ---------------------------------------------------------------------<br> :: Locate a JRE installation directory which will be used to run the IDE.<br> :: Try (in order): IDEA_JDK, idea%BITS%.exe.jdk, ..\jbr[-x86], JDK_HOME, JAVA_HOME.<br> :: ---------------------------------------------------------------------</p> 
</blockquote> 
<p>IDEA_JDK这个环境变量我的环境变量里没配置；</p> 
<p><img alt="" height="339" src="https://images2.imgbox.com/e5/57/jk1hQ7Fu_o.png" width="930"></p> 
<p>idea%BITS%.exe.jdk这个不是环境变量，是指定路径的文件。这个文件是刚才在安装sdk8的时候自动生成/修改的，如下图：</p> 
<p></p> 
<p><img alt="" height="519" src="https://images2.imgbox.com/47/e9/KmNz8Eum_o.png" width="824"></p> 
<p>idea64.exe.jdk文件的内容：</p> 
<blockquote> 
 <p>C:\Users\lzhf\AppData\Roaming\JetBrains\IntelliJIdea2021.1\jdks\jbsdk8u112b287.2_windows_x64</p> 
</blockquote> 
<p>这个路径下就是刚刚安装的jre8</p> 
<p><img alt="" height="328" src="https://images2.imgbox.com/a7/29/DlBk7iW2_o.png" width="1083"></p> 
<h3 id="%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">解决方法：</h3> 
<p>那么解决方法就简单了，<span style="color:#f33b45;"><strong>删除idea64.exe.jdk这个文件</strong></span>就好了，这样就会去判断后续的设置（这就相当于Choose Runtime里没有将默认的sdk11改成sdk8）。</p> 
<p>如果没有更改过其它设置的话，那么最后使用的jre是idea安装路径下的jre：</p> 
<p><img alt="" height="137" src="https://images2.imgbox.com/46/44/HS20xL9w_o.png" width="1008"></p> 
<p>D:\develop\IDEA\<span style="color:#f33b45;">jbr\bin</span>\java.exe</p> 
<p>就这样，idea成功的启动了！</p> 
<p>如果有过其它个性化的配置，那么按照idea.bat里的逻辑一层层梳理下来，总能找到自己配置的地方，并加以修复。在过程中，可以打印日志，来辅助判断。</p> 
<p>比如在打印出jre最终的值：</p> 
<p><img alt="" height="194" src="https://images2.imgbox.com/91/26/vIgAUWpk_o.png" width="514"></p> 
<h2 id="%E7%BB%93%E8%AE%BA">结论：</h2> 
<p>这个博文解决的是idea因为jdk配置启动失败的问题。</p> 
<p>idea2021应该不能直接支持jdk8，因为启动类com/intellij/idea/Main是用jdk11编译的，除非把启动类改成用jdk8编译才行。</p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/334913019789d32907e2cdd177800f33/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows 下的高 DPI 应用开发（UWP / WPF / Windows Forms / Win32）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9f16f9a4085904411f7e66025711b52a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">操作系统实战45讲第一课：实验环境搭建和遇到bug解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>