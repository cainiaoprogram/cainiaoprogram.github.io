<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android开发学习之路--RxAndroid之初体验 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android开发学习之路--RxAndroid之初体验" />
<meta property="og:description" content="学了一段时间android，看了部分的项目代码，然后想想老是学基础也够枯燥乏味的，那么就来学习学习新东西吧，相信很多学java的都听说过RxJava，那么android下也有RxAndroid。
RxJava最核心的两个东西是Observables（被观察者，事件源）和Subscribers（订阅者）。Observables发出一系列事件，Subscribers处理这些事件。这里的事件可以是任何你感兴趣的东西，触摸事件，web接口调用返回的数据等等。
关于RxAndroid的github：https://github.com/ReactiveX/RxAndroid。
新建emRxAndroidStudy工程， 然后在build.grade的dependencies里添加：
compile &#39;io.reactivex:rxandroid:1.1.0&#39; compile &#39;io.reactivex:rxjava:1.1.0&#39; 接着我们来试下RxAndroid了， 首先这里我们还是使用上次的注解的方式，把4个和Annotation相关的文件拷贝到工程，编写MainActivity代码如下： package com.jared.emrxandroidstudy; import android.os.Bundle; import android.util.Log; import android.view.View; import android.widget.Button; import android.widget.TextView; import rx.Observable; import rx.Subscriber; @EMLayoutBinder(R.layout.activity_main) public class MainActivity extends BaseActivity { private static final String TAG = &#34;MainActivity&#34;; private Subscriber&lt;String&gt; subscriber; private Observable&lt;String&gt; observable; @EMViewBinder(R.id.hello) private TextView mHello; @EMViewBinder(R.id.test1) private Button mTest1; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); createSubscriber(); } private void bindSubscriber() { observable.subscribe(subscriber); } private void createSubscriber() { subscriber = new Subscriber&lt;String&gt;() { @Override public void onCompleted() { Log." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2d283606f01feab8b97e1d07224c9356/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-03-11T21:53:29+08:00" />
<meta property="article:modified_time" content="2016-03-11T21:53:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android开发学习之路--RxAndroid之初体验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:18px">    学了一段时间android，看了部分的项目代码，然后想想老是学基础也够枯燥乏味的，那么就来学习学习新东西吧，相信很多学java的都听说过RxJava，那么android下也有RxAndroid。</span></p> 
<p><span style="font-size:18px"><span style="color:rgb(51,51,51); font-family:Arial">    RxJava最核心的两个东西是Observables（被观察者，事件源）和Subscribers（订阅者）。Observables发出一系列事件，Subscribers处理这些事件。这里的事件可以是任何你感兴趣的东西，触摸事件，web接口调用返回的数据等等。</span><br> </span></p> 
<p><span style="font-size:18px"><span style="color:rgb(51,51,51); font-family:Arial">    关于RxAndroid的github：<a target="_blank" href="https://github.com/ReactiveX/RxAndroid" rel="noopener noreferrer">https://github.com/ReactiveX/RxAndroid</a>。</span></span></p> 
<p><span style="font-size:18px"><span style="color:rgb(51,51,51); font-family:Arial">    新建emRxAndroidStudy工程， 然后在</span></span><span style="font-family:Arial; font-size:18px; color:#333333">build.grade的dependencies里添加：</span></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333"></span></p> 
<pre><code class="language-java">    compile 'io.reactivex:rxandroid:1.1.0'
    compile 'io.reactivex:rxjava:1.1.0'</code></pre> 
<br> 
<span style="font-size:18px">    接着我们来试下RxAndroid了， 首先这里我们还是使用上次的注解的方式，把4个和Annotation相关的文件拷贝到工程，编写MainActivity代码如下：</span> 
<p></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333"></span></p> 
<pre><code class="language-java">package com.jared.emrxandroidstudy;

import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import rx.Observable;
import rx.Subscriber;

@EMLayoutBinder(R.layout.activity_main)
public class MainActivity extends BaseActivity {

    private static final String TAG = "MainActivity";
    private Subscriber&lt;String&gt; subscriber;
    private Observable&lt;String&gt; observable;

    @EMViewBinder(R.id.hello)
    private TextView mHello;
    @EMViewBinder(R.id.test1)
    private Button mTest1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        createSubscriber();
    }

    private void bindSubscriber() {
        observable.subscribe(subscriber);
    }

    private void createSubscriber() {

        subscriber = new Subscriber&lt;String&gt;() {

            @Override
            public void onCompleted() {
                Log.d(TAG, "onCompleted");
            }

            @Override
            public void onError(Throwable e) {
                e.printStackTrace();
            }

            @Override
            public void onNext(String t) {
                Log.d(TAG, "onNext");
                mHello.setText(t);
            }
        };
    }

    private String getHello() {
        return "Hello RxAndroid";
    }

    private String getHello1() {
        return "Hello RxAndroid 1";
    }

    @EMOnClickBinder({R.id.test1})
    public void myOnClick(View view) {
        switch (view.getId()) {
            case R.id.test1:
                createObservable();
                break;
            default:
                break;
        }
    }

    private void createObservable() {
        Log.d(TAG, "observable");
        observable = Observable.create(new Observable.OnSubscribe&lt;String&gt;() {
            @Override
            public void call(Subscriber&lt;? super String&gt; subscriber) {
                subscriber.onNext(getHello());
                subscriber.onCompleted();
            }
        });
        bindSubscriber();
    }
}
</code></pre> 
<br> 
<span style="font-size:18px">     布局文件如下：</span> 
<p></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333"></span></p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context="com.jared.emrxandroidstudy.MainActivity"&gt;

    &lt;TextView
        android:id="@+id/hello"
        android:text="Hello World!"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /&gt;

    &lt;Button
        android:id="@+id/test1"
        android:text="Test"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textAllCaps="false"/&gt;
&lt;/LinearLayout&gt;
</code></pre> 
<br> 
<p></p> 
<p><span style="color:rgb(51,51,51); font-family:Arial; font-size:18px">    这里创建了Observable，用来发送一字符串，然后创建了Subscriber，用来接收事件处理，然后把这两个绑定，按下按钮后，subscriber会调用onNext方法和onCompleted方法。</span></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333">    当然这里的createObservable可以通过just方法简化：</span></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333"></span></p> 
<pre><code class="language-java"> private void createObservableByJust() {
        Log.d(TAG, "createObservable");
        observable = Observable.just(getHello());
        bindSubscriber();
    }</code></pre> 
<span style="font-size:18px">    效果和上述的是一样一样的。接着简化subscriber了：</span> 
<p></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333"></span></p> 
<pre><code class="language-java">private void createSubscriberByAction() {
        onNextAction = new Action1&lt;String&gt;() {
            @Override
            public void call(String s) {
                mHello.setText(s);
            }
        };
    }</code></pre> 
<br> 
<span style="font-size:18px">    这里通过Action1来实现，完全没有了subscriber了的感觉，接着修改绑定如下：</span> 
<pre><code class="language-java"> private void bindSubscriber() {
        //observable.subscribe(subscriber);
        observable.subscribe(onNextAction);
    }
</code></pre> 
<span style="font-size:18px">    效果还是一样一样的。</span> 
<p></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333">    好了，接着我们来使用下操作符map，修改如下：</span></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333"></span></p> 
<pre><code class="language-java"> private void createObservableByMap() {
        Log.d(TAG, "createObservableByMap");
        Observable.just(getHello()).map(new Func1&lt;String, String&gt;() {
            @Override
            public String call(String s) {
                return s + " by eastmoon";
            }
        }).subscribe(onNextAction);
    }</code></pre> 
<br> 
<span style="font-size:18px">    运行结果后原来字符串加上了by eastmoon了。其实map的功能就是在observable和subscribe之间可以对数据进行操作。</span> 
<p></p> 
<p><span style="font-family:Arial; font-size:18px; color:#333333">    </span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84d5857d8b50b72be3f96940899f82b4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;类虚函数表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1e28cf88d84b2ab4b67b98f1dd49b7ff/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Ubuntu下安装Chrome浏览器的两个方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>