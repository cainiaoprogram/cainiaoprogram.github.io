<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【python】词云图制作 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【python】词云图制作" />
<meta property="og:description" content="词云图制作 python 练了一段时间的词云图，就来和大家讲讲词云图制作的详细过程。
效果图 工具准备 1、python32、安装第三方库wordcloud3、安装numpy、pillow库。4、安装jieba库5、安装matplotlib库 from wordcloud import WordCloud import numpy as np from PIL import Image from matplotlib import colors import collections #这些都是需要使用的库 安装方法：我大多是借助pycharm中的setting直接安装。但是也有安装失败的，大家可以自行“c一下”
代码展示 # -*- coding: utf-8 -*- import jieba from wordcloud import WordCloud import numpy as np from PIL import Image from matplotlib import colors import collections def chinese_jieba(): # 读取目标文本 with open(r&#39;文本.txt&#39;, encoding=&#39;utf-8&#39;) as fp: txt = fp.read() fp.close() wordlist_jieba = jieba.lcut(txt) # 将文本分割，返回列表 txt_jieba = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9d07551ae6911f5a09b6f88ccdea1754/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-08T20:24:13+08:00" />
<meta property="article:modified_time" content="2022-07-08T20:24:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【python】词云图制作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_python_0"></a>词云图制作 python</h2> 
<p>练了一段时间的词云图，就来和大家讲讲词云图制作的详细过程。</p> 
<h3><a id="_2"></a>效果图</h3> 
<p><img src="https://images2.imgbox.com/ec/4c/Cc0xuakc_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="_4"></a>工具准备</h3> 
<ul><li>1、python3</li><li>2、安装第三方库wordcloud</li><li>3、安装numpy、pillow库。</li><li>4、安装jieba库</li><li>5、安装matplotlib库</li></ul> 
<pre><code class="prism language-import">from wordcloud import WordCloud
import numpy as np
from PIL import Image
from matplotlib import colors
import collections
#这些都是需要使用的库
</code></pre> 
<p>安装方法：我大多是借助pycharm中的setting直接安装。但是也有安装失败的，大家可以自行“c一下”</p> 
<h2><a id="_20"></a>代码展示</h2> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token keyword">import</span> jieba
<span class="token keyword">from</span> wordcloud <span class="token keyword">import</span> WordCloud
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">from</span> PIL <span class="token keyword">import</span> Image
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> colors
<span class="token keyword">import</span> collections


<span class="token keyword">def</span> <span class="token function">chinese_jieba</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 读取目标文本</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">r'文本.txt'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fp<span class="token punctuation">:</span>
        txt <span class="token operator">=</span> fp<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
        fp<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    wordlist_jieba <span class="token operator">=</span> jieba<span class="token punctuation">.</span>lcut<span class="token punctuation">(</span>txt<span class="token punctuation">)</span> <span class="token comment"># 将文本分割，返回列表</span>
    txt_jieba <span class="token operator">=</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>wordlist_jieba<span class="token punctuation">)</span> <span class="token comment"># 将列表拼接为以空格为间断的字符串</span>
    <span class="token keyword">return</span> txt_jieba
    
<span class="token keyword">def</span> <span class="token function">stopwords_read</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 读取停用词，也可自己根据需求写入</span>
    stopwords_ <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'里'</span><span class="token punctuation">,</span> <span class="token string">'拍'</span><span class="token punctuation">]</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'chinesestopwords.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        <span class="token keyword">for</span> line <span class="token keyword">in</span> f<span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
                stopwords_<span class="token punctuation">.</span>append<span class="token punctuation">(</span>line<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> stopwords_
    

<span class="token keyword">def</span> <span class="token function">wordcloud_generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    stopwords_ <span class="token operator">=</span> stopwords_read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#读取停用词</span>
    txt <span class="token operator">=</span> chinese_jieba<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">#读取文本</span>
    background_image <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>Image<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'椭圆背景.jpg'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">#自定义背景轮廓</span>
    colormaps <span class="token operator">=</span> colors<span class="token punctuation">.</span>ListedColormap<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'#871A84'</span><span class="token punctuation">,</span> <span class="token string">'#BC0F6A'</span><span class="token punctuation">,</span> <span class="token string">'#BC0F60'</span><span class="token punctuation">,</span> <span class="token string">'#CC5F6A'</span><span class="token punctuation">,</span> <span class="token string">'#AC1F4A'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 自定义字体色，该系列是蓝紫色</span>
    wordcloud <span class="token operator">=</span> WordCloud<span class="token punctuation">(</span>font_path<span class="token operator">=</span><span class="token string">'simhei.ttf'</span><span class="token punctuation">,</span>  <span class="token comment"># 字体</span>
                              prefer_horizontal<span class="token operator">=</span><span class="token number">0.99</span><span class="token punctuation">,</span><span class="token comment">#大部分都是横向排放</span>
                              background_color<span class="token operator">=</span><span class="token string">'white'</span><span class="token punctuation">,</span>  <span class="token comment"># 背景色</span>
                              max_words<span class="token operator">=</span><span class="token number">100</span><span class="token punctuation">,</span>  <span class="token comment"># 显示单词数</span>
                              max_font_size<span class="token operator">=</span><span class="token number">400</span><span class="token punctuation">,</span>  <span class="token comment">#最大字号</span>
                              stopwords<span class="token operator">=</span>stopwords_<span class="token punctuation">,</span>  <span class="token comment"># 过滤噪声词</span>
                              mask<span class="token operator">=</span>background_image<span class="token punctuation">,</span><span class="token comment">#背景轮廓</span>
                              colormap<span class="token operator">=</span>colormaps<span class="token punctuation">,</span><span class="token comment">#使用自定义颜色</span>
                              collocations<span class="token operator">=</span><span class="token boolean">False</span>
                              <span class="token punctuation">)</span><span class="token punctuation">.</span>generate<span class="token punctuation">(</span>txt<span class="token punctuation">)</span>
    image <span class="token operator">=</span> wordcloud<span class="token punctuation">.</span>to_image<span class="token punctuation">(</span><span class="token punctuation">)</span>
    image<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 展示图片</span>
    wordcloud<span class="token punctuation">.</span>to_file<span class="token punctuation">(</span><span class="token string">'词云图.jpg'</span><span class="token punctuation">)</span>  <span class="token comment"># 保存图片</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    wordcloud_generate<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<pre><code>以上代码可直接运行
生成的图片可以去存放这个代码的文件夹下寻找
</code></pre> 
<h2><a id="_82"></a>代码分析</h2> 
<ol><li> <p>基本运行条件：<br> 首先是各种库都安装完毕；<br> 其次将代码、目标文本、停用词文本、字体、背景图存放在同一个文件夹下（如果不存放在同一个文件夹下，就需要将代码中的资源引用路径改为绝对路径）如图:<br> <img src="https://images2.imgbox.com/e5/6d/b4AOfjwD_o.png" alt="在这里插入图片描述"></p> </li><li> <p>文本<br> 文本我是存储在txt文件中，具体信息来自微博上对智慧养老的关键字爬取，事实上，词云图也很好地体现了这一主题。</p> </li><li> <p>停用词<br> 什么是停用词？<br> 首先我们得清了解，在对文本进行分词后，可能会得到一些零散无用的词，有时候不利于文本主题的展现，比如“这个”，“那个”等，那么我们可以将这些词列入停用词中，图片上就不会展现这些词了。</p> </li><li> <p>词云图文字颜色<br> 文字颜色有许多设置方法，这里采用自定义配色，这里送上我推荐的一些颜色集合供大家使用,经过我千挑万选，蛮好看的颜色</p> </li></ol> 
<pre><code>['#43045F', '#4E0362', '#C63264', '#FF9799', '#FFBAAB'] #紫色
['#7e9680', '#79616f', '#AE6378', '#D87F81', '#EAB595'] #杂色
</code></pre> 
<ol start="5"><li>其余参数<br> 许多参数我在程序中均有注释，大家可以结合理解，根据自己的需要修改。</li><li>清晰度<br> 如果是根据背景图片生成词云图，那么生成的词云图的清晰度是和背景图片一样的，背景图片是100<em>100像素的，那么生成的词云图也是100</em>100的，建议大家选取清晰度高的背景图片。</li></ol> 
<h2><a id="git_107"></a>以下是本人的git地址，欢迎大家免费下载，交流学习：</h2> 
<h2><a id="httpsgithubcomHYHJessicahttpsgithubcomHYHJessicapythontreemasterE8AF8DE4BA91E59BBE_108"></a><a href="https://github.com/HYHJessica/python/tree/master/%E8%AF%8D%E4%BA%91%E5%9B%BE">https://github.com/HYHJessica/</a></h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cd9a38dfd030770a8d5559c99509a838/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PYQT基础组件QPushButton、QMessageBox、QInputDialog、QFileDialog、QtextEdit、QSlider、QSpinBox、QComboBox详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3f15a32e2357544f0d4f4e601d347bb3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">4.1.5 OS之文件管理空闲磁盘块的几种算法(空闲表法、空闲链表法、位示图法、成组链接法)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>