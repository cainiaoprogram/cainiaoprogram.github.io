<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MATLAB 正则表达式 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MATLAB 正则表达式" />
<meta property="og:description" content="MATLAB 正则表达式 文章目录 MATLAB 正则表达式与正则表达式相关的函数regexp 用法输出类型如何构建 exp元字符字符转义重复限定符重复限定符的三种模式分组运算符锚点选项（option） 例子 与正则表达式相关的函数 matlab 中与正则表达式相关的函数：
函数名功能regexp匹配正则表达式，大小写敏感regexpi匹配正则表达式，大小写不敏感regexprep基于正则表达式进行字符替换 regexp 用法 以 regexp 为例说明用法
startIndex = regexp(str, exp) [startIndex, endIndex] = regexp(str, exp) [out1, out2, ...] = regexp(str, exp, outkey1, outkey2, ...) out = regexp(str, exp, option, ...) 其中，str 为待匹配的字符串，exp 为正则表达式，outkey 用于指明输出的类型。option 为可选的选项。
输出类型 outkey 取值：
如何构建 exp 元字符 . : 匹配任意一个字符 [c1c2c3] : 匹配来自方括号内的任意一个字符（&#43;，-，.，*，?，|，$ 按照字面处理, - 表示范围除外） [^c1c2c3] : 匹配除方括号内字符以外的任意一个字符（&#43;，-，.，*，?，|，$ 按照字面处理, - 表示范围除外） [c1-c2] : 匹配介于 c1-c2 之间的任意一个字符 \w : 匹配字母、数字、下划线中的任意一个字符 &lt;==&gt; [a-z_A-Z0-9] \W : 匹配除字母、数字、下划线以外的任意一个字符 &lt;==&gt; [^a-z_A-Z0-9] \s : 匹配任意一个空白符 \S : 匹配任意一个非空白字符符 \d : 匹配任意一个数字 \D : 匹配任意一个非数字字符 字符转义 重复限定符 重复限定符的三种模式 重复限定符 *, &#43;, ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1ed48a97255da2b20a5a4c1c48f1df26/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-18T21:46:50+08:00" />
<meta property="article:modified_time" content="2018-12-18T21:46:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MATLAB 正则表达式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="MATLAB__1"></a>MATLAB 正则表达式</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#MATLAB__1" rel="nofollow">MATLAB 正则表达式</a></li><li><ul><li><a href="#_4" rel="nofollow">与正则表达式相关的函数</a></li><li><a href="#regexp__14" rel="nofollow">regexp 用法</a></li><li><a href="#_27" rel="nofollow">输出类型</a></li><li><a href="#_exp_33" rel="nofollow">如何构建 exp</a></li><li><ul><li><a href="#_35" rel="nofollow">元字符</a></li><li><a href="#_50" rel="nofollow">字符转义</a></li><li><a href="#_54" rel="nofollow">重复限定符</a></li><li><a href="#_58" rel="nofollow">重复限定符的三种模式</a></li><li><a href="#_66" rel="nofollow">分组运算符</a></li><li><a href="#_78" rel="nofollow">锚点</a></li><li><a href="#option_85" rel="nofollow">选项（option）</a></li></ul> 
   </li><li><a href="#_89" rel="nofollow">例子</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_4"></a>与正则表达式相关的函数</h3> 
<p>matlab 中与正则表达式相关的函数：</p> 
<table><thead><tr><th>函数名</th><th>功能</th></tr></thead><tbody><tr><td>regexp</td><td>匹配正则表达式，大小写敏感</td></tr><tr><td>regexpi</td><td>匹配正则表达式，大小写不敏感</td></tr><tr><td>regexprep</td><td>基于正则表达式进行字符替换</td></tr></tbody></table> 
<h3><a id="regexp__14"></a>regexp 用法</h3> 
<p>以 regexp 为例说明用法</p> 
<pre><code class="prism language-matlab">startIndex = regexp(str, exp)
[startIndex, endIndex] = regexp(str, exp)
[out1, out2, ...] = regexp(str, exp, outkey1, outkey2, ...)
out = regexp(str, exp, option, ...)
</code></pre> 
<p>其中，str 为待匹配的字符串，exp 为正则表达式，outkey 用于指明输出的类型。option 为可选的选项。</p> 
<h3><a id="_27"></a>输出类型</h3> 
<p>outkey 取值：</p> 
<p><img src="https://images2.imgbox.com/4e/f6/waL19eVO_o.png" alt=""></p> 
<h3><a id="_exp_33"></a>如何构建 exp</h3> 
<h4><a id="_35"></a>元字符</h4> 
<pre><code>.           : 匹配任意一个字符
[c1c2c3]    : 匹配来自方括号内的任意一个字符（+，-，.，*，?，|，$ 按照字面处理, - 表示范围除外）
[^c1c2c3]   :  匹配除方括号内字符以外的任意一个字符（+，-，.，*，?，|，$ 按照字面处理, - 表示范围除外）
[c1-c2]     : 匹配介于 c1-c2 之间的任意一个字符
\w          : 匹配字母、数字、下划线中的任意一个字符 &lt;==&gt; [a-z_A-Z0-9]
\W          : 匹配除字母、数字、下划线以外的任意一个字符 &lt;==&gt; [^a-z_A-Z0-9]
\s          : 匹配任意一个空白符
\S          : 匹配任意一个非空白字符符
\d          : 匹配任意一个数字
\D          : 匹配任意一个非数字字符
</code></pre> 
<h4><a id="_50"></a>字符转义</h4> 
<p><img src="https://images2.imgbox.com/34/d4/YRiSZMBx_o.png" alt=""></p> 
<h4><a id="_54"></a>重复限定符</h4> 
<p><img src="https://images2.imgbox.com/75/13/OZ4AJmxq_o.png" alt=""></p> 
<h4><a id="_58"></a>重复限定符的三种模式</h4> 
<p>重复限定符 *, +, ?, {m,n} 有三种模式：</p> 
<ul><li>贪婪模式（默认）</li><li>懒惰模式，在重复限定符后面加 ?</li><li>占有模式，在重复限定符后面加 +</li></ul> 
<h4><a id="_66"></a>分组运算符</h4> 
<p>分组运算符 (), 有两个作用：</p> 
<ul><li>用于捕获 tokens</li><li>分组，改变运算优先级</li></ul> 
<pre><code>(exp) : 分组，且捕获 tokens
(exp) : 分组不捕获
</code></pre> 
<h4><a id="_78"></a>锚点</h4> 
<pre><code>^exp : 以表达式开头
exp$ : 以表达式结尾
</code></pre> 
<h4><a id="option_85"></a>选项（option）</h4> 
<p><img src="https://images2.imgbox.com/77/48/uJIGUK3c_o.png" alt=""></p> 
<h3><a id="_89"></a>例子</h3> 
<p>例如在 C 或 C++ 源文件中查找所有的函数调用，并提取函数名</p> 
<p>主程序：</p> 
<pre><code class="prism language-matlab">clc
clear all
file_list = getFileList('src', 'l'); % 获取名称列表
k = 1;
% 读取全部文件建立cell数据结构
for i=1:length(file_list)
   if strcmp(file_list{i}(end-1:end), '.c')
       cont{k,1} = file_list{i};
       cont{k,2} = txt2char(file_list{i});
       k = k +1;
   end
end
data = build_ref_tree('main', cont, 6); % 调用子函数建立具有tree结构的cell
str = print_data(data); % 打印该数据结构
</code></pre> 
<p>子程序：</p> 
<pre><code class="prism language-matlab">function data = build_ref_tree(fun_name, cont, max_deep)
    % 完成对递归函数的外部包装，返回具有递归结构的cell
    count = 0;
    global deep;
    deep = max_deep;
    data = fun_recursive(fun_name, cont, count);
    data = {data};
    
    function out = fun_recursive(fun_name, cont, count)
        % 递归调用的函数，构建树形结构形如{fun_name, file_name, {...}}, {...}
        % 内具有自相似结构
        count = count + 1;
        if count == deep;
            out = {};
            return;
        end
        [code, file] = find_def(fun_name, cont);
        if isempty(code)
           out = {};
           return;
        end
        fun_names = list_fun_name(code);
        if isempty(fun_names)
           out = {};
           return;
        end
        k = 1;
        t = {''};
        for j=1:length(fun_names)
            tmp = fun_recursive(fun_names{j}, cont, count);
            if isempty(tmp);
                continue;
            end
            t{k,:} =  tmp;
            k = k + 1;
        end
        out = {fun_name,file, t};
    end
end
</code></pre> 
<pre><code class="prism language-matlab">function [code, file] = find_def(fun_name, cont)
% 在所用文件中查找给定函数的定义处，返回所在文件和代码块
    t = regexp(cont(:,2), ['\s+',fun_name, '\(.*?\)\s*{'], 'end', 'dotexceptnewline');
    flag = 0;
    if isempty(t)
       code = '';
       file = '';
       return;
    end
    for i=1:length(t)
        if isempty(t{i})
            continue;
        else
            ind = i;
            file = cont{ind,1};
            flag = 1;
            break;
        end
    end  
    if flag == 0
       code = '';
       file = '';
       return;
    end
    
    flag = 0;
    range_start = t{ind};
    range_end = range_start;
    ch = cont{ind,2};
    for i=range_start:length(ch)
        if strcmp(ch(i),'{')
           flag = flag + 1; 
        elseif strcmp(ch(i),'}')
           flag = flag - 1; 
        end
        if flag == 0
           range_end = i;
           break; 
        end
    end
    code = ch(range_start:range_end);
end
</code></pre> 
<pre><code class="prism language-matlab">function out = list_fun_name(code)
% 在一串字符中找出所用被调用的函数名称
    exclude = {'if','while','printf','for'};
    out = cell(1);
    out2 = regexp(code, '([a-z_A-Z]\w*)\(.*?\);', 'tokens', 'dotexceptnewline');
    out2 = out2';
    k = 1;
    for i=1:length(out2)
       tmp = out2{i}{1};
       if ismember(tmp, exclude)
          continue; 
       end
       out{k,:} = tmp;
       k = k + 1;
    end
end

</code></pre> 
<pre><code class="prism language-matlab">function str = print_data(data, count)

    if isempty(data{1})
       str = '';
       return; 
    end
    if nargin == 1
       count = 0; 
    else
       count = count + 1; 
    end
    str = '';
    for i=1:length(data)
        if count == 0
            ch = [data{i}{1}, '(', data{i}{2}, ')'];
            disp(ch);
        else
            ch = ['   ', repmat('|      ', 1, count-1), '|----', data{i}{1}, '(', data{i}{2}, ')'];
            disp(ch);
        end
        str = [str, ch, sprintf('\n'), print_data(data{i}{3}, count)];
    end
end

</code></pre> 
<p>打印输出：</p> 
<pre><code>main(main.c)
   |----parse_network_cfg_custom(src\parser.c)
   |      |----make_network(src\network.c)
   |      |----parse_net_options(src\parser.c)
   |      |----free_section(src\parser.c)
   |      |----parse_convolutional(src\parser.c)
   |      |----parse_local(src\parser.c)
   |      |----parse_activation(src\parser.c)
   |      |----parse_rnn(src\parser.c)
   |      |----parse_gru(src\parser.c)
   |      |----parse_crnn(src\parser.c)
   |      |----parse_connected(src\parser.c)
   |      |----parse_crop(src\parser.c)
   |      |----parse_cost(src\parser.c)
   |      |----parse_region(src\parser.c)
   |      |----parse_yolo(src\parser.c)
   |      |----parse_detection(src\parser.c)
   |      |----parse_softmax(src\parser.c)
   |      |----parse_normalization(src\parser.c)
   |      |----parse_batchnorm(src\parser.c)
   |      |----parse_maxpool(src\parser.c)
   |      |----parse_reorg(src\parser.c)
   |      |----parse_reorg_old(src\parser.c)
   |      |----parse_avgpool(src\parser.c)
   |      |----parse_route(src\parser.c)
   |      |----parse_upsample(src\parser.c)
   |      |----parse_shortcut(src\parser.c)
   |      |----parse_dropout(src\parser.c)
   |      |----option_find_int_quiet(src\option_list.c)
   |      |----option_find_int_quiet(src\option_list.c)
   |      |----option_find_int_quiet(src\option_list.c)
   |      |----option_find_int_quiet(src\option_list.c)
   |      |----option_unused(src\option_list.c)
   |      |----free_section(src\parser.c)
   |      |----free_list(src\list.c)
   |----load_weights(src\parser.c)
   |      |----load_weights_upto(src\parser.c)
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8d74e44ecb26d7b377fa55419f66d005/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PyTorch学习之归一化层（BatchNorm、LayerNorm、InstanceNorm、GroupNorm）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cbd91e90dd39b023eeccea2b86eeef7e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VS 编译报“常量中有换行符”错误</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>