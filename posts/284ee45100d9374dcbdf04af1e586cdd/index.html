<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Simulink代码生成： Switch模块及其代码 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Simulink代码生成： Switch模块及其代码" />
<meta property="og:description" content="本文描述Switch模块的建模并研究生成的代码。
文章目录 1 Simulink中的Switch模块2 Switch模块建模及代码生成3 Switch模块其他用法3.1 多重Switch3.2 通过标定量Switch 4 总结 1 Simulink中的Switch模块 在Simulink中Switch模块时非常常见的，通常用于根据一定地条件选择信号进行输出，类似于C语言中的if-else语句。
Switch模块如下：
左侧有三个信号输入端口，其中中间的那个是条件端口。如果条件为真，则输出上路信号，反之则输出下路。
另外还有个MultiSwitch模块，其效果类似，只是能够切换多种输入。
本文就以Switch模块为例研究用法。
2 Switch模块建模及代码生成 本文就以Switch模块进行一个简单的建模。例如，CAN信号传来车速，车速低于30kph时判断车辆为低速，否则为高速。
1）首先拖出一个Switch模块，双击进入属性，将判断条件改成u2 ~ = 0；
这一步操作是遵循《MAAB规范》主工的 jc_0141: Use of the Switch block。该规范要求第二个端口（条件）必须是该信号不等于0，不能是大于或小于0。
2）然后把判断条件建模为车速小于30kph，Port1为LowSpeed的宏定义，Port3为HighSpeed的宏定义，如下：
模型比较容易理解，即VehSpd小于30时，输出LowSpeed，否则输出HighSpeed。
3）配置Embedded Coder并生成代码如下：
生成的代码用了一段if-else语句，其中if中的条件就是判断车速大小。
3 Switch模块其他用法 3.1 多重Switch 在Switch模块的port3可以接入其他Switch模块的输出，形成一连串Switch，例如下图：
车速小于30，对应LowSpeed；车速介于30~60，对应MiddleSpeed；否则车速大于60，对应HighSpeed；
生成代码如下：
3.2 通过标定量Switch 汽车实车测试的时候，经常通过标定量切换信号来调试。假设ADAS软件通过当前道路环境，在一系列复杂算法后得出应该向发动机请求一个扭矩（即图中的TorqueRequest）。当SwitchFlag标定为1时，将软件算出的请求值发给Engine，然后发动机进行响应。如果将SwitchTorque标定为一个工程师想要的一个自定义的数值，再将SwitchFlag标定为0，就可以发出自定义的一个扭矩请求，从而不依赖算法去调试车辆的性能。
4 总结 在Simulink中Switch模块比较简单也比较常用，需要掌握好它的用法。
&gt;&gt;返回个人博客总目录" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/284ee45100d9374dcbdf04af1e586cdd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-23T15:25:47+08:00" />
<meta property="article:modified_time" content="2022-12-23T15:25:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Simulink代码生成： Switch模块及其代码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本文描述Switch模块的建模并研究生成的代码。<br> </p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_SimulinkSwitch_2" rel="nofollow">1 Simulink中的Switch模块</a></li><li><a href="#2_Switch_14" rel="nofollow">2 Switch模块建模及代码生成</a></li><li><a href="#3_Switch_29" rel="nofollow">3 Switch模块其他用法</a></li><li><ul><li><a href="#31_Switch_30" rel="nofollow">3.1 多重Switch</a></li><li><a href="#32_Switch_37" rel="nofollow">3.2 通过标定量Switch</a></li></ul> 
  </li><li><a href="#4__40" rel="nofollow">4 总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_SimulinkSwitch_2"></a>1 Simulink中的Switch模块</h2> 
<p>在Simulink中Switch模块时非常常见的，通常用于根据一定地条件选择信号进行输出，类似于C语言中的if-else语句。</p> 
<p>Switch模块如下：<br> <img src="https://images2.imgbox.com/a1/91/hdNuAJGV_o.png" alt="在这里插入图片描述" width="200"><br> 左侧有三个信号输入端口，其中中间的那个是条件端口。如果条件为真，则输出上路信号，反之则输出下路。</p> 
<p>另外还有个MultiSwitch模块，其效果类似，只是能够切换多种输入。<br> <img src="https://images2.imgbox.com/c1/01/oTsihAIk_o.png" alt="在这里插入图片描述" width="100"></p> 
<p>本文就以Switch模块为例研究用法。</p> 
<h2><a id="2_Switch_14"></a>2 Switch模块建模及代码生成</h2> 
<p>本文就以Switch模块进行一个简单的建模。例如，CAN信号传来车速，车速低于30kph时判断车辆为低速，否则为高速。</p> 
<p>1）首先拖出一个Switch模块，双击进入属性，将判断条件改成u2 ~ = 0；<br> <img src="https://images2.imgbox.com/90/5d/ZaFQJgLq_o.png" alt="在这里插入图片描述" width="600"><br> 这一步操作是遵循《MAAB规范》主工的 jc_0141: Use of the Switch block。该规范要求第二个端口（条件）必须是该信号不等于0，不能是大于或小于0。</p> 
<p>2）然后把判断条件建模为车速小于30kph，Port1为LowSpeed的宏定义，Port3为HighSpeed的宏定义，如下：<br> <img src="https://images2.imgbox.com/5e/ff/MBvRU56B_o.png" alt="在这里插入图片描述" width="600"><br> 模型比较容易理解，即VehSpd小于30时，输出LowSpeed，否则输出HighSpeed。</p> 
<p>3）配置Embedded Coder并生成代码如下：<br> <img src="https://images2.imgbox.com/c9/c3/DXzF1TLY_o.png" alt="在这里插入图片描述" width="800"><br> 生成的代码用了一段if-else语句，其中if中的条件就是判断车速大小。</p> 
<h2><a id="3_Switch_29"></a>3 Switch模块其他用法</h2> 
<h3><a id="31_Switch_30"></a>3.1 多重Switch</h3> 
<p>在Switch模块的port3可以接入其他Switch模块的输出，形成一连串Switch，例如下图：<br> <img src="https://images2.imgbox.com/53/57/Hhch7Wma_o.png" alt="在这里插入图片描述" width="800"><br> 车速小于30，对应LowSpeed；车速介于30~60，对应MiddleSpeed；否则车速大于60，对应HighSpeed；</p> 
<p>生成代码如下：<br> <img src="https://images2.imgbox.com/b5/3a/sADAah09_o.png" alt="在这里插入图片描述" width="800"></p> 
<h3><a id="32_Switch_37"></a>3.2 通过标定量Switch</h3> 
<p>汽车实车测试的时候，经常通过标定量切换信号来调试。假设ADAS软件通过当前道路环境，在一系列复杂算法后得出应该向发动机请求一个扭矩（即图中的TorqueRequest）。当SwitchFlag标定为1时，将软件算出的请求值发给Engine，然后发动机进行响应。如果将SwitchTorque标定为一个工程师想要的一个自定义的数值，再将SwitchFlag标定为0，就可以发出自定义的一个扭矩请求，从而不依赖算法去调试车辆的性能。<br> <img src="https://images2.imgbox.com/fe/98/PlbfEXjA_o.png" alt="在这里插入图片描述" width="600"></p> 
<h2><a id="4__40"></a>4 总结</h2> 
<p>在Simulink中Switch模块比较简单也比较常用，需要掌握好它的用法。</p> 
<p><a href="https://blog.csdn.net/u013288925/article/details/105617474">&gt;&gt;返回个人博客总目录</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5e0a32598d89045914a46a9a2b05c429/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Springboot传参详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c64bcbbf0fac7a59710656035ad8851a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于开源的Micro-RTSP，使用VLC和ffmpeg拉流播放RTSP视频流，本例使用安信可ESP32 CAM进行推流。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>