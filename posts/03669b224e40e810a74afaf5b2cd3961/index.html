<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MyBatis-Plus--分页时的排序--方法/教程/实例 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MyBatis-Plus--分页时的排序--方法/教程/实例" />
<meta property="og:description" content="原文网址：MyBatis-Plus--分页时的排序--方法/教程/实例_IT利刃出鞘的博客-CSDN博客
简介 说明
本文用示例介绍MyBtisPlus分页时排序的方法。
分页时排序的方法
后端OrderItems排序后端Wrapper排序前端指定排序 排序涉及到的类
排序涉及到Page类的List&lt;OrderItem&gt; orders;成员，OrderItem定义如下：
public class OrderItem implements Serializable { private static final long serialVersionUID = 1L; //需要进行排序的字段 private String column; // 是否正序排列，默认 true private boolean asc = true; ... } 建库建表 DROP DATABASE IF EXISTS mp; CREATE DATABASE mp DEFAULT CHARACTER SET utf8; USE mp; DROP TABLE IF EXISTS `t_user`; SET NAMES utf8mb4; CREATE TABLE `t_user` ( `id` BIGINT(0) NOT NULL AUTO_INCREMENT, `user_name` VARCHAR(64) NOT NULL COMMENT &#39;用户名（不能重复）&#39;, `nick_name` VARCHAR(64) NULL COMMENT &#39;昵称（可以重复）&#39;, `email` VARCHAR(64) COMMENT &#39;邮箱&#39;, `create_time` DATETIME(0) NULL DEFAULT CURRENT_TIMESTAMP COMMENT &#39;创建时间&#39;, `update_time` DATETIME(0) NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT &#39;修改时间&#39;, `deleted_flag` BIGINT(0) NOT NULL DEFAULT 0 COMMENT &#39;0：未删除 其他：已删除&#39;, PRIMARY KEY (`id`) USING BTREE, UNIQUE KEY `index_user_name_deleted_flag` (`user_name`, `deleted_flag`), KEY `index_create_time`(`create_time`) ) ENGINE = InnoDB COMMENT = &#39;用户&#39;; INSERT INTO `t_user` VALUES (1, &#39;knife&#39;, &#39;刀刃&#39;, &#39;abc@qq." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/03669b224e40e810a74afaf5b2cd3961/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-08T21:22:04+08:00" />
<meta property="article:modified_time" content="2022-11-08T21:22:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MyBatis-Plus--分页时的排序--方法/教程/实例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>原文网址：<a href="https://knife.blog.csdn.net/article/details/123628764" rel="nofollow" title="MyBatis-Plus--分页时的排序--方法/教程/实例_IT利刃出鞘的博客-CSDN博客">MyBatis-Plus--分页时的排序--方法/教程/实例_IT利刃出鞘的博客-CSDN博客</a></p> 
<h2>简介</h2> 
<p><strong>说明</strong></p> 
<p>本文用示例介绍MyBtisPlus分页时排序的方法。</p> 
<p><strong>分页时排序的方法</strong></p> 
<ol><li>后端OrderItems排序</li><li>后端Wrapper排序</li><li>前端指定排序</li></ol> 
<p><strong>排序涉及到的类</strong></p> 
<p>排序涉及到Page类的List&lt;OrderItem&gt; orders;成员，OrderItem定义如下：</p> 
<pre><code class="language-java">public class OrderItem implements Serializable {
    private static final long serialVersionUID = 1L;

    //需要进行排序的字段
    private String column;

    // 是否正序排列，默认 true
    private boolean asc = true;
    ...
}</code></pre> 
<h2>建库建表</h2> 
<pre><code class="language-sql">DROP DATABASE IF EXISTS mp;
CREATE DATABASE mp DEFAULT CHARACTER SET utf8;
USE mp;

DROP TABLE IF EXISTS `t_user`;
SET NAMES utf8mb4;

CREATE TABLE `t_user`
(
    `id`           BIGINT(0) NOT NULL AUTO_INCREMENT,
    `user_name`    VARCHAR(64) NOT NULL COMMENT '用户名（不能重复）',
    `nick_name`    VARCHAR(64) NULL COMMENT '昵称（可以重复）',
    `email`        VARCHAR(64) COMMENT '邮箱',
    `create_time`  DATETIME(0) NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    `update_time`  DATETIME(0) NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
    `deleted_flag` BIGINT(0) NOT NULL DEFAULT 0 COMMENT '0：未删除 其他：已删除',
    PRIMARY KEY (`id`) USING BTREE,
    UNIQUE KEY `index_user_name_deleted_flag` (`user_name`, `deleted_flag`),
    KEY `index_create_time`(`create_time`)
) ENGINE = InnoDB COMMENT = '用户';

INSERT INTO `t_user` VALUES (1, 'knife', '刀刃', 'abc@qq.com', '2021-01-23 09:33:36', '2021-01-23 09:33:36', 0);
INSERT INTO `t_user` VALUES (2, 'sky', '天蓝', '123@qq.com', '2021-01-24 18:12:21', '2021-01-24 18:12:21', 0);
</code></pre> 
<p>执行后的结果：</p> 
<h2><img alt="" height="146" src="https://images2.imgbox.com/02/69/baikq7y5_o.png" width="770">依赖</h2> 
<p>pom.xml</p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.3.12.RELEASE&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;MyBatis-Plus_Simple&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;MyBatis-Plus_Simple&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;

    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.5.1&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;
            &lt;artifactId&gt;knife4j-spring-boot-starter&lt;/artifactId&gt;
            &lt;version&gt;3.0.3&lt;/version&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;</code></pre> 
<h2>配置</h2> 
<p><strong>application.yml</strong></p> 
<pre><code class="language-bash">spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://127.0.0.1:3306/mp?characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai
    username: root
    password: 222333

#mybatis-plus配置控制台打印完整带参数SQL语句
mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl</code></pre> 
<p><strong>分页插件的配置（必须）</strong></p> 
<p></p> 
<pre><code class="language-java">package com.example.demo.config;

import com.baomidou.mybatisplus.annotation.DbType;
import com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;
 
@Configuration
public class MyBatisPlusConfig {

    /**
     * 分页插件
     */
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
        return interceptor;
    }
}</code></pre> 
<h2>代码</h2> 
<h3>Entity</h3> 
<pre><code class="language-java">package com.example.demo.user.entity;

import com.baomidou.mybatisplus.annotation.IdType;
import com.baomidou.mybatisplus.annotation.TableId;
import com.baomidou.mybatisplus.annotation.TableLogic;
import com.baomidou.mybatisplus.annotation.TableName;
import com.baomidou.mybatisplus.extension.activerecord.Model;
import lombok.Data;

import java.time.LocalDateTime;

@Data
@TableName(value = "t_user")
public class User {
    @TableId(value = "id", type = IdType.AUTO)
    private Long id;

    /**
     * 用户名（不能重复）
     */
    private String userName;

    /**
     * 昵称（可以重复）
     */
    private String nickName;

    /**
     * 邮箱
     */
    private String email;

    /**
     * 创建时间
     */
    private LocalDateTime createTime;

    /**
     * 修改时间
     */
    private LocalDateTime updateTime;

    /**
     * 0：未删除 其他：已删除
     */
    @TableLogic(delval = "id")
    private Long deletedFlag;
}
</code></pre> 
<h3>Mapper</h3> 
<pre><code class="language-java">package com.example.demo.user.mapper;

import com.baomidou.mybatisplus.core.conditions.Wrapper;
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import com.example.demo.user.entity.User;
import org.springframework.stereotype.Repository;

@Repository
public interface UserMapper extends BaseMapper&lt;User&gt; {
}
</code></pre> 
<h3>Service</h3> 
<p><strong>接口</strong></p> 
<pre><code class="language-java">package com.example.demo.user.service;

import com.baomidou.mybatisplus.extension.service.IService;
import com.example.demo.user.entity.User;

public interface UserService extends IService&lt;User&gt; {
}
</code></pre> 
<p><strong>实现</strong></p> 
<pre><code class="language-java">package com.example.demo.user.service.impl;

import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.example.demo.user.entity.User;
import com.example.demo.user.mapper.UserMapper;
import com.example.demo.user.service.UserService;
import org.springframework.stereotype.Service;

@Service
public class UserServiceImpl extends ServiceImpl&lt;UserMapper, User&gt; implements UserService {
}
</code></pre> 
<h3>Controller（核心逻辑在这里）</h3> 
<pre><code class="language-java">package com.example.demo.user.controller;

import com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;
import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.core.metadata.OrderItem;
import com.baomidou.mybatisplus.core.toolkit.Wrappers;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.example.demo.user.entity.User;
import com.example.demo.user.service.UserService;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@Api(tags = "排序")
@RestController
@RequestMapping("sort")
public class SortController {

    @Autowired
    private UserService userService;

    @ApiOperation("默认顺序")
    @GetMapping("defaultOrder")
    public IPage&lt;User&gt; defaultOrder(Page&lt;User&gt; page) {
        return userService.page(page);
    }

    @ApiOperation("通过orderItems")
    @GetMapping("orderItems")
    public IPage&lt;User&gt; orderItems(Page&lt;User&gt; page) {
        page.addOrder(OrderItem.desc("create_time"));
        // 可以指定多列。比如下边这个：按create_time排序，若create_time相同，则按id排序
        // page.addOrder(OrderItem.desc("create_time"), OrderItem.asc("id"));
        return userService.page(page);
    }

    @ApiOperation("通过wrapper")
    @GetMapping("wrapper")
    public IPage&lt;User&gt; wrapper(Page&lt;User&gt; page) {
        LambdaQueryWrapper&lt;User&gt; queryWrapper = Wrappers.&lt;User&gt;lambdaQuery();
        // 按create_time排序，若create_time相同，则按id排序
        queryWrapper.orderByDesc(User::getCreateTime);
        queryWrapper.orderByAsc(User::getId);
        return userService.page(page, queryWrapper);
    }

    @ApiOperation("前端指定顺序")
    @GetMapping("byFrontEnd")
    public IPage&lt;User&gt; byFrontEnd(Page&lt;User&gt; page) {
        return userService.page(page);
    }
}
</code></pre> 
<h2>测试</h2> 
<p>访问Knife4j页面：<a href="http://localhost:8080/doc.html" rel="nofollow" title="http://localhost:8080/doc.html">http://localhost:8080/doc.html</a></p> 
<p class="img-center"><img alt="" height="721" src="https://images2.imgbox.com/a2/25/HbcQfukR_o.png" width="1200"></p> 
<h3><strong>1.不指定顺序</strong></h3> 
<p>本处前端不传任何参数进行的测试。</p> 
<p><img alt="" height="950" src="https://images2.imgbox.com/b3/f8/Fee719zT_o.png" width="1200"></p> 
<h3><strong>2.后端OrderItem排序（create_time倒序）</strong></h3> 
<p>本处前端不传任何参数进行的测试。</p> 
<p><img alt="" height="946" src="https://images2.imgbox.com/56/96/gbgM4VVy_o.png" width="1200"></p> 
<h3><strong>3.后端Wrapper排序（create_time倒序，id升序）</strong></h3> 
<p>本处前端不传任何参数进行的测试。</p> 
<p><img alt="" height="955" src="https://images2.imgbox.com/58/de/Mw131iI1_o.png" width="1200"></p> 
<h3><strong>4.前端指定排序（create_time倒序）</strong></h3> 
<p>前端指定orders[0].asc和orders[0].column</p> 
<p><img alt="" height="736" src="https://images2.imgbox.com/20/8b/Ymq1QtGE_o.png" width="1200"></p> 
<p>结果：</p> 
<p><img alt="" height="942" src="https://images2.imgbox.com/86/cc/yXqXtUV0_o.png" width="1200"></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/174eaac27e89bb55d769fd9fe2cc5de6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">nginx初识</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/851c17a25fc6b2e1409da2e469237e35/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">扫雷游戏【敢看完就敢教会你】------- C语言</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>