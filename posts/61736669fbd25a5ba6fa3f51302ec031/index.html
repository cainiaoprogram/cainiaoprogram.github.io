<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>R语言绘图详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="R语言绘图详解" />
<meta property="og:description" content="除了低级作图命令之外，图形的显示也可以用绘图参数来改良。绘图参数可以作为图形函数的选项（但不是所有参数都可以这样用），也可以用函数par来永久地改变绘图参数，也就是说后来的图形都将按照par指定的参数来绘制。例如，下面的命令：
&gt; par(bg=&#34;yellow&#34;)
将导致后来的图形都以黄色的背景来绘制。有73个绘图参数，其中一些有非常相似的功能。这些参数详细的列表可以参阅?par；下面的表格只列举了最常用的参数。
adj 控制关于文字的对齐方式，0是左对齐，0.5是居中对齐，1是右对齐，值&gt; 1时对齐位置在文本右边的地方，取负值时对齐位置在文本左边的地方；如果给出两个值（例如c(0, 0))，第二个只控制关于文字基线的垂直调整。
bg 指定背景色（例如bg=&#34;red&#34;, bg=&#34;blue&#34;; 用colors()可以显示657种可用的颜色名）
bty 控制图形边框形状，可用的值为: &#34;o&#34;, &#34;l&#34;, &#34;7&#34;, &#34;c&#34;, &#34;u&#34; 和&#34;]&#34; （边框和字符的外表相像）；如果bty=&#34;n&#34;则不绘制边框
cex 控制缺省状态下符号和文字大小的值； 另外，cex.axis控制坐标轴刻度数字大小，cex.lab控制坐标轴标签文字大小，cex.main控制标题文字大小，cex.sub控制副标题文字大小
col 控制符号的颜色； 和cex类似， 还可用：col.axis, col.lab, col.main,col.sub
font 控制文字字体的整数（1: 正常，2: 斜体，3: 粗体，4: 粗斜体）；和cex类似，还可用: font.axis, font.lab, font.main, font.sub
las 控制坐标轴刻度数字标记方向的整数（0: 平行于轴，1: 横排，2: 垂直于轴，3:竖排）
lty 控制连线的线型， 可以是整数（1: 实线，2: 虚线，3: 点线，4: 点虚线，5: 长虚线，6: 双虚线），或者是不超过8个字符的字符串（字符为从&#34;0&#34;到&#34;9&#34;之间的数字）交替地指定线和空白的长度，单位为磅(points)或象素，例如lty=&#34;44&#34;和lty=2效果相同
lwd 控制连线宽度的数字
mar 控制图形边空的有4个值的向量c(bottom, left, top, right), 缺省值为c(5.1, 4.1, 4.1, 2.1)
mfcol c(nr,nc)的向量，分割绘图窗口为nr行nc列的矩阵布局，按列次序使用各子窗口
mfrow 同上，但是按行次序使用各子窗口" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/61736669fbd25a5ba6fa3f51302ec031/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-09-09T15:25:33+08:00" />
<meta property="article:modified_time" content="2014-09-09T15:25:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">R语言绘图详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <span style="font-size:18px">除了低级作图命令之外，图形的显示也可以用绘图参数来改良。绘图参数可以作为图形函数的选项（但不是所有参数都可以这样用），也可以用函数par来永久地改变绘图参数，也就是说后来的图形都将按照par指定的参数来绘制。例如，下面的命令：<br> &gt; par(bg="yellow")<br> 将导致后来的图形都以黄色的背景来绘制。有73个绘图参数，其中一些有非常相似的功能。这些参数详细的列表可以参阅?par；下面的表格只列举了最常用的参数。<br> adj 控制关于文字的对齐方式，0是左对齐，0.5是居中对齐，1是右对齐，值&gt; 1时对齐位置在文本右边的地方，取负值时对齐位置在文本左边的地方；如果给出两个值（例如c(0, 0))，第二个只控制关于文字基线的垂直调整。<br> bg 指定背景色（例如bg="red", bg="blue"; 用colors()可以显示657种可用的颜色名）<br> bty 控制图形边框形状，可用的值为: "o", "l", "7", "c", "u" 和"]" （边框和字符的外表相像）；如果bty="n"则不绘制边框<br> cex 控制缺省状态下符号和文字大小的值； 另外，cex.axis控制坐标轴刻度数字大小，cex.lab控制坐标轴标签文字大小，cex.main控制标题文字大小，cex.sub控制副标题文字大小<br> col 控制符号的颜色； 和cex类似， 还可用：col.axis, col.lab, col.main,col.sub<br> font 控制文字字体的整数（1: 正常，2: 斜体，3: 粗体，4: 粗斜体）；和cex类似，还可用: font.axis, font.lab, font.main, font.sub<br> las 控制坐标轴刻度数字标记方向的整数（0: 平行于轴，1: 横排，2: 垂直于轴，3:竖排）<br> lty 控制连线的线型， 可以是整数（1: 实线，2: 虚线，3: 点线，4: 点虚线，5: 长虚线，6: 双虚线），或者是不超过8个字符的字符串（字符为从"0"到"9"之间的数字）交替地指定线和空白的长度，单位为磅(points)或象素，例如lty="44"和lty=2效果相同<br> lwd 控制连线宽度的数字<br> mar 控制图形边空的有4个值的向量c(bottom, left, top, right), 缺省值为c(5.1, 4.1, 4.1, 2.1)<br> mfcol c(nr,nc)的向量，分割绘图窗口为nr行nc列的矩阵布局，按列次序使用各子窗口<br> mfrow 同上，但是按行次序使用各子窗口<br> pch 控制符号的类型，可以是1到25的整数，也可以是""里的单个字符<br> ps 控制文字大小的整数，单位为磅(points)<br> pty 指定绘图区域类型的字符，"s": 正方形，"m":最大利用<br> tck 指定轴上刻度长度的值，单位是百分比，以图形宽、高中最小一个作为基数；如果tck=1则绘制grid<br> tcl 同上，但以文本行高度为基数（缺省下tcl=-0.5）<br> xaxt 如果xaxt="n"则设置x-轴但不显示（有助于和axis(side=1, ...)联合使用）<br> yaxt 如果yaxt="n"则设置y-轴但不显示（有助于和axis(side=2, ...)联合使用）<br>  <br> 2. R1.8 画图参数-pch<br>  <br> 已有 1783 次阅读 2010-1-28 14:48 |个人分类:统计学习笔记|系统分类:科研笔记|关键词:R 画图 pch<br> 查看pch各参数形状：<br> plot(rep(1,10),ylim=c(-2,1.2),pch=1:10,cex=3,axes=F,xlab="",ylab="")<br> text(rep(0.6,10),as.character(1:10))<br> points(rep(0,10),pch=11:20,cex=3)<br> text(rep(-0.4,10),as.character(11:20))<br> points(rep(-0.8,5),pch=21:25,cex=3)<br> text(rep(-1.2,5),as.character(21:25))<br> points(6:10, rep(-0.8,5),pch=c("*","?","X","x","&amp;"),cex=3)<br> text(6:10,rep(-1.2,5),c("*","?","X","x","&amp;"))<br> </span> 
<p><span style="font-size:18px"><img src="https://images2.imgbox.com/df/78/uu3tfqtg_o.jpg" alt=""><br> </span></p> 
<p><span style="font-size:18px"><br> </span></p> 
<span style="font-size:18px">R画图常用图形  <br> S-PLUS有很强的图形功能，它可以用简单的函数调用迅速作出数据的各种图形，当你熟悉了S图形的技术之后也可以指定许多图形选项按自己的要求定制图形。它的另一个特色是同一个绘图函数对不同的数据对象可以作出不同的图形。例如，用7.1.2读入的cl数据框：<br> &gt; plot(cl) &gt; plot(cl[,1])<br> 第一个plot()调用绘制cl中三个列的散点图矩阵，第二个plot()调用绘制身高的散点图（纵轴为身高值，横轴为下标）。<br> 最常用的绘图函数为plot()，用plot()作两个变量x与y的散点图，使用如下例的方法：<br> &gt; attach(cl) &gt; plot(Height, Weight, main="体重对身高的回归", + xlab="身高", ylab="体重")<br> R画图常用图形 - zhangwei2039 - 闲云的博客<br> 上例在R中运行成功（见图2），在S-PLUS中请将汉字字符串改为英文。上例也演示了S中如何输入较长的语句：只要语句明显地未完成（比如，缺右括号），系统将给出一个加号作为续行提示。如果输入“x &lt;- 1+2”时要拆行，可以在赋值号后拆，可以在加号与2之间拆，但是如果在x后拆则只能显示x的当前值，如果在1与加号之间拆只能把1赋给x。<br> 为了绘制连线图，只要在plot()函数中加type="l"选项，如：<br> &gt; plot((1:50)/50, log((1:50)/50), type="l")<br> 可以绘制变量的茎叶图，如：<br> &gt; stem(Weight) 　 The decimal point is 1 digit(s) to the right of the | 　 4 | 1 6 | 7 8 | 3445508 10 | 0332233 12 | 83 14 | 0<br> 绘制一个变量的盒形图，如：<br> &gt; boxplot(Weight)<br> R画图常用图形 - zhangwei2039 - 闲云的博客<br> 结果见图3。可以绘制几个变量并排的盒形图，比如先计算用上面的回归拟合结果存入p1 ，然后绘制并排盒形图：<br> &gt; p1 &lt;- predict(fit1, cl)[,"predictor"] &gt; boxplot(Weight, p1)<br> 用hist()函数可以绘制直方图。例如：<br> &gt; hist(Weight)<br> 得图4。 R画图常用图形 - zhangwei2039 - 闲云的博客<br> 用qqnorm()函数绘制正态概率图，如：<br> &gt; qqnorm(Weight)<br> 得图5。 R画图常用图形 - zhangwei2039 - 闲云的博客 <br> 高级图形函数<br> S的图形函数分为两类：高级图形函数――直接绘制图形并可自动生成坐标轴等附属图形元素；低级图形函数――可以修改已有的图形或者为绘图规定一些选择项。高级图形函数总是开始一个新图。下面我们介绍常用的高级图形函数，以及用来修饰这些高级图形函数的常用可选参数。<br> 最常用的是plot()函数。比如，plot(x,y)（其中x，y是向量）对两个变量画散点图。用plot(z) （其中z是一个定义了x变量和y变量的列表，或者一个两列的矩阵）也可以达到同样目的。如果x是一个时间序列对象（时间序列对象用ts()函数生成），plot(x)绘制时间序列曲线图。如果x是一个普通向量，则绘制x的值对其下标的散点图。如果x是复数向量则绘制虚部对实部的散点图。如果f是一个因子，则plot(f)绘制f的条形图（每个因子水平的个数）。如果f是因子，y是同长度的数值向量，则plot(f,y)对f的每一因子水平绘制y中相应数值的盒形图。如果d是一个数据框，则plot(d)对d的每两个变量之间作图（散点图等）。<br> 如果X是一个数值型矩阵或数据框，用pairs(X)可以绘制每两列之间的散点图矩阵。这在变量个数不太多时可以同时看到多个变量的两两关系，变量太多时则难以绘制。<br> 协同图（coplot）是一种多变量的探索性分析图形。其形式为coplot(y ~ x | z)，其中x 和y是数值型向量，z是同长度的因子。对z的每一水平，绘制相应组的x和y的散点图。如:<br> &gt; attach(cl) &gt; coplot(Weight ~ Height | Sex)<br> R画图常用图形 - zhangwei2039 - 闲云的博客<br> 产生图6。对不同性别分别绘制了体重对身高的散点图。如果z是一个数值型变量，则coplot() 先对z的取值分组，然后对z的每一组取值分别绘图。甚至可以用如coplot(y~x | x1+x2)表示对x1和x2的每一水平组合绘图。coplot()和pairs()函数缺省绘制散点图，但可以用一个panel= 参数指定其它的低级绘图函数，如lines，panel.smooth等。<br> tsplot(x)绘制时间序列曲线图。多个参数时tsplot(x1, x2, ...)表示绘制多条曲线，自动统一曲线取值范围。如果参数非时间序列对象则以下标1，2，3等为横坐标绘图。<br> qqnorm(x), qqline(x), qqplot(x,y)作分位数－分位数图。qqnorm(x)对向量x作正态概率（纵轴为次序统计量值，横轴为对应该次序统计量的标准正态分布分位数值）。qqline(x) 除作qqnorm(x)图之外还画一条拟合曲线。qqplot(x,y)把x和y的次序统计量分别画在x轴和y 轴以比较两个变量的分布。<br> hist(x)作向量x的直方图。缺省时自动确定分组，也可以用nclass=参数指定分组个数，或者用breaks=参数指定一个分组点向量。如果指定了prob=T则纵轴显示密度估计。<br> S也可以作三维图或等值线图，函数为persp()和contour()，见图7和图8。<br> R画图常用图形 - zhangwei2039 - 闲云的博客<br> R画图常用图形 - zhangwei2039 - 闲云的博客<br> 高级图形函数的常用选项<br> 高级图形函数有一些共同的选项，作为函数的可选参数（自变量）。例如：<br> &gt; plot(x)<br> &gt; plot(x, main="Graph of x")<br> 其中的main就是一个可选参数，用来指定图形的标题。没有此选项时图形就没有标题。这样的选项还有：<br> add=T<br> 使函数向低级图形函数那样不是开始一个新图形而是在原图基础上添加。<br> axes=F<br> 暂不画坐标轴，随后可以用axis()函数更精确地规定坐标轴的画法。缺省值是axes=T，即有坐标轴。<br> log="x" log="y"<br> log="xy"<br> 把x轴，y轴或两个坐标轴用对数刻度绘制。<br> type=<br> <br> <br> <br> <br> type="p"<br>  <br> <br> <br> <br> <br> type="l"<br>  <br> <br> <br> type="b"<br>  <br> <br> <br> type="o"<br>  <br> <br> <br> type="h"<br>  <br> <br> <br> type="s"<br>  <br> <br> <br> type="S"<br>  <br> <br> <br> type="n"<br> 规定绘图方式：<br> <br> <br> <br> <br> 绘点<br>  <br> <br> <br> 画线<br>  <br> <br> <br> 绘点并在中间用线连接<br>  <br> <br> <br> 绘点并画线穿过各点<br>  <br> <br> <br> 从点到横轴画垂线<br>  <br> <br> <br> 阶梯函数；左连续<br>  <br> <br> <br> 阶梯函数；右连续<br>  <br> <br> <br> 不画任何点、线，但仍画坐标轴并建立坐标系，适用于后面用低级图形函数作图。<br> xlab="字符串" ylab="字符串" main="字符串"<br> sub="字符串"<br> 定义x轴和y轴的标签。缺省时使用对象名。 　 图形的标题。<br> 图形的小标题，用较小字体画在x轴下方。<br> <br> <br> 低级图形函数<br> 高级图形函数可以迅速简便地绘制常见类型的图形，但是，某些情况下你可能希望绘制一些有特殊要求的图形。比如，你希望坐标轴按照自己的设计绘制，在已有的图上增加另一组数据，在图中加入一行文本注释，绘出多个曲线代表的数据的标签，等等。低级图形函数让你在已有的图的基础上进行添加。<br> 常用的低级图形函数罗列如下：<br> points(x,y)<br> lines(x,y)<br> 在当前图形上叠加一组点或线。可以使用plot()的type=参数来指定绘制方法，缺省时points() 画点，lines()画线。<br> text(x,y, labels, ...)<br> 在由坐标x和y给出的位置标出由labels指定的字符串。labels可以是数值型或字符型的向量，labels[i]在x[i]，y[i]处标出。<br> abline(a, b) abline(h=y) abline(v=x)<br> abline( lm.obj)<br> 在当前图形上画一条直线。两个参数a, b分布给出截距和斜率。指定h=参数时绘制水平线，指定v=参数时绘制垂直线。以一个最小二乘拟合结果lm.obj作为参数时由lm.obj的$coefficients 成员给出直线的截距和斜率。<br> polygon(x, y, ...)<br> 以由向量x给出的横坐标和向量y给出的纵坐标为顶点绘制多边形。可以用col=参数指定一个颜色填充多边形内部。<br> legend(x, y, legend, ...) 　 legend(, angle=v) legend(, density=v) legend( , fill=v) legend(, col=v) legend(, lty=v) legend(, pch=v) legend(, marks=v)<br> legend函数用来在当前图形的指定坐标位置绘制图例。图例的说明文字由向量legend提供。至少下面的v值要给出以确定要对什么图例进行说明，v是长度与legend相同的向量。<br> angle参数指定几种阴影斜角。 　 density参数指定几种阴影密度。 　 fill参数指定几种填充颜色。 col参数指定几种颜色。 lty参数指定几种线型。 pch参数指定几种散点符号。为字符型向量。 　<br> marks参数也指定几种散点符号，但使用散点符号数值代号，为数值型向量。<br> title(main, sub)<br> 绘制由main指定的标题和由sub指定的小标题。<br> axis(side, ...)<br> 绘制一条坐标轴。这之前的绘图函数必须已经用axes=F选项抑制了自动的坐标轴。参数side 指定在哪一边绘制坐标轴，取值为1到4，1为下边，然后逆时针数。可以用at=参数指定刻度位置，用labels参数指定刻度处的标签。<br> 低级图形函数一般需要指定位置信息，其中的坐标指的是所谓用户坐标，即前面的高级图形函数所建立的坐标系中的坐标。坐标可以用两个向量x和y给出，也可以由一个两列的矩阵给出。如果交互作图可以用下面介绍的locator()函数来交互地从图形中直接输入坐标位置。<br> <br> <br> 交互图形函数<br> S的低级图形函数可以在已有图形的基础上添加新内容，另外，S还提供了两个函数locator 和identify可以让用户通过在图中用鼠标点击来确定位置。<br> 函数locator(n, type)运行时会停下来等待用户在图中点击，然后返回图形中鼠标点击的位置的坐标。等待点击时用鼠标中键点击可以选择停止等待，立即返回。参数n指定点击多少次后自动停止，缺省为500次；参数type如果使用则可指定绘点类型，与plot()函数中的type 参数用法相同，在鼠标点击处绘点（线、垂线，等等）。locator()的返回值是一个列表，有两个变量（元素）x和y，分别保存点击位置的横坐标和纵坐标。<br> 例如，为了在已经绘制的曲线图中找一个空地方标上一行文本，只要使用如下程序：<br> &gt; text(locator(1), "Normal density", adj=0)<br> text()函数的adj参数用一个数字表示文本串相对于给定的坐标的画法，adj=0表示给定坐标为文本串左侧的坐标，adj=1表示给定坐标为文本串右侧的坐标，adj=0.5表示给定坐标为文本串中间的坐标。<br> 函数identify(x, y, labels)在运行时也会停下来等待用户点击，直到按了鼠标中键，任何返回用户在图形中用鼠标点击的点的序号，点击时对点击的点加标签。参数x和y给出要识别的各个点的坐标。labels参数指定点击某个点时要在旁边绘制的文本标签，缺省时标出此点的序号，如果只需要返回值而不想画任何标记则可以在调用此函数时加一个plot=F参数。注意identify()与locator()不同，locator()返回图中任意点击位置的坐标，而identify() 只返回离点击位置最近的点的序号。<br> 例如，我们在向量x和y中有若干个点的坐标，运行如下程序：<br> &gt; plot(x, y) &gt; identify(x, y)<br> 这时显示转移到图形窗口，进入等待状态，用户可以点击图中特别的点，该点的序号就会在旁边标出。为了结束，只要单击鼠标中键或单击右键并选择停止。返回结果为你点击的各个点的序号：<br> [1] 4 6 7 8<br> <br> <br> 图形参数的使用<br> 前面我们已经看到了如何用main=，xlab=等参数来规定高级图形函数的一些设置。在实际绘图，特别是绘制用于演示或出版的图形时，S用缺省设置绘制的图形往往不能满足我们的要求。但是，S提供了一系列所谓图形参数，通过使用图形参数可以修改图形显示的所有各方面的设置。图形参数包括关于线型、颜色、图形排列、文本对齐方式等各种设置。每个图形参数有一个名字，比如col代表颜色，取一个值，比如col="red"是红色。每个图形设备有一套单独的图形参数。<br> 设置图形参数分为两种：永久设置与临时设置。永久设置使用par()函数进行设置，设置后在退出前一直保持有效；临时设置则是在图形函数中加入图形参数，如上面的例子：<br> &gt; text(locator(1), "Normal density", adj=0)<br> 中的adj参数。<br> par()函数用来访问或修改当前图形设备的图形参数。如果不带参数调用，如：<br> &gt; par() $adj [1] 0.5 　 $ann [1] 1 　 ……………… 　 $tcl [1] -0.5<br> 结果为一个列表，列表的各元素名为图形参数的名字，元素值为相应图形参数的取值。<br> 如果调用时指定一个图形参数名的向量作为参数，则只返回被指定的图形参数的列表：<br> &gt; par(c("col", "lty")) $col [1] "black" 　 $lty [1] "solid"<br> 调用时指定名字为图形参数名的有名参数，则修改指定的图形参数，并返回原值的列表：<br> &gt; oldpar &lt;- par(col=4, lty=2) &gt; oldpar $col [1] "black" 　 $lty [1] "solid"<br> 因为用par()修改图形参数是保持到退出以前都有效的，而且即使是在函数内此修改仍是全局的，所以我们可以利用如下的惯用法，在完成任务后恢复原来的图形参数：<br> &gt; oldpar &lt;- par(col=4, lty=2) ………………（需要修改图形参数的绘图任务） &gt; par(oldpar) # 恢复原始的图形参数<br> 除了象上面那样用par()函数永久修改图形参数，我们还可以在几乎任何图形函数中指定图形参数作为有名参数，这样的修改是临时的，只对此函数起作用。例如：<br> &gt; plot(x, y, pch="+")<br> 就用图形参数pch指定了绘散点的符号为加号。这个设定只对这一张图有效，对以后的图形没有影响。<br> <br> <br> 图形参数详解<br> 鉴于绘制有特殊需要的图形是S的一个强项，而使用图形参数是完成此类任务的重要手段，我们在这里较详细地介绍S的各种图形参数。这些图形参数可以大体上分为以下的几个大类，我们将分别介绍：<br> <br> <br> <br> <br> 图形元素控制<br>  <br> <br> <br> 坐标轴与坐标刻度<br>  <br> <br> <br> 图形边空<br>  <br> <br> <br> 一页多图<br>  <br> <br> <br> 　<br> <br> <br> 一、图形元素<br> 图形由点、线、文本、多边形等元素构成。下列的图形参数用来控制图形元素的绘制细节：<br> pch="+" 　 　<br> pch=4<br> 指定用于绘制散点的符号。绘制的点往往略高于或低于指定的坐标位置，只有pch="."没有这个问题。<br> 　<br> 如果pch的值为从0到18之间的一个数字，将使用特殊的绘点符号。下例可以显示所有特殊绘点符号：<br> &gt; plot(c(0, 100), c(0, 100), type="n", axes=F, xlab='', ylab='') &gt; legend(10,90, as.character(0:9), pch=0:9) &gt; legend(50,90, as.character(10:18), pch=10:18)<br> lty=2<br> 指定画线用的线型。缺省值lty=1是实线。从2开始是各种虚线。<br> lwd=2<br> 指定线粗细，以标准线粗细为单位。这个参数影响数据曲线的线宽以及坐标轴的线宽。下例绘制正弦曲线图：<br> &gt; oldpar &lt;- par(lwd=2) &gt; x &lt;- (0:100)/100*2*pi &gt; plot(x, sin(x), type="l", axes=F) &gt; abline(h=0) &gt; abline(v=0) &gt; par(oldpar)<br> col=2<br> 指定颜色，可应用于绘点、线、文本、填充区域、图象。颜色值也可以用象"red"，"blue" 这样的颜色名指定。<br> font=2<br> 用来指定字体的整数。一般font=1是正体，2是 黑体，3是 斜体，4是黑斜体。<br> font.axis font.lab font.main<br> font.sub<br> 分别用来指定坐标刻度、坐标轴标签、标题、小标题所用的字体。<br> adj=-0.1<br> 指定文本相对于给定坐标的对齐方式。取0表示左对齐，取1表示右对齐，取0.5表示居中。此参数的值实际代表的是出现在给定坐标左边的文本的比例，所以adj=-0.1的效果是文本出现在给定坐标位置的右边并空出相当于文本10%长度的距离。<br> cex=1.5<br> 指定字符放大倍数。<br> 　<br> <br> <br> 二、坐标轴与坐标刻度<br> 许多高级图形带有坐标轴，还可以先不画坐标轴然后用axis()单独加。函数box() 用来画坐标区域四周的框线。<br> 坐标轴包括三个部件：轴线（用lty可以控制线型），刻度线，刻度标签。它们可以用如下的图形参数来控制：<br> lab=c(5, 7, 12)<br> 第一个数为x轴希望画几个刻度线，第二个数为y轴希望画几个刻度线，这两个数是建议性的；第三个数是坐标刻度标签的宽度为多少个字符，包括小数点，这个数太小会使刻度标签四舍五入成一样的值。<br> las=1<br> 坐标刻度标签的方向。0表示总是平行于坐标轴，1表示总是水平，2表示总是垂直于坐标轴。<br> mgp=c(3,1,0)<br> 坐标轴各部件的位置。第一个元素为坐标轴位置到坐标轴标签的距离，以文本行高为单位。第二个元素为坐标轴位置到坐标刻度标签的距离。第三个元素为坐标轴位置到实际画的坐标轴的距离，通常是0。<br> tck=0.01<br> 坐标轴刻度线长度，单位是绘图区域大小，值为占绘图区域的比例。tck小于0.5时x轴和y 轴的刻度线将统一到相同的长度。取1时即画格子线。取负值时刻度线画在绘图区域的外面。<br> xaxs="s"<br> yaxs="d"<br> 控制x轴和y轴的画轴方法。<br> 取值为"s"（即standard）或"e"（即extended）的时候数据范围控制在最小刻度和最大刻度之间。取"e"时如果有数据点十分靠近边缘轴的范围会略微扩大。这种画轴方式有时会在轴的一边留下太大的空白。<br> 取值为"i"（即internal）或"r"（此为缺省）使得刻度线都落在数据范围内部，而"r"方式所留的边空较小。<br> 取值设为"d"时会锁定此坐标轴，后续的图形都使用与它完全相同的坐标轴，这在要生成一系列可比较的图形的时候是有用的。要解除锁定需要把这个图形参数设为其它值。<br> <br> <br> 三、图形边空<br> R画图常用图形 - zhangwei2039 - 闲云的博客<br> S中一个单独的图由绘图区域（绘图的点、线等画在这个区域中）和包围绘图区域的边空组成，边空中可以包含坐标轴标签、坐标轴刻度标签、标题、小标题等，绘图区域一般被坐标轴包围。见图9。<br> 边空的大小由mai参数或mar参数控制，它们都是四个元素的向量，分别规定下方、左方、上方、右方的边空大小，其中mai取值的单位是英寸，而mai的取值单位是文本行高度。例如：<br> &gt; par(mai=c(1, 0.5, 0.5, 0))<br> &gt; par(mar=c(4, 2, 2, 1))<br> 这两个图形参数不是独立的，设定一个会影响另一个。S缺省的图形边空常常太大，以至于有时图形窗口较小时边空占了整个图形的很大一部分。通常我们可以取消右边空，并且在不用标题时可以大大缩小上边空。例如下例可以生成十分紧凑的图形：<br> &gt; oldpar &lt;- par(mar=c(2,2,1,0.2))<br> &gt; plot(x,y)<br> 在一个页面上画多个图时边空自动减半，但我们往往还需要进一步减小边空才能使多个图有意义。<br> 　<br> <br> <br> 四、一页多图<br> R可以在同一页面开若干个按行、列排列的窗格，在每个窗格中可以作一幅图。每个图有自己的边空，而所有图的外面可以包一个“外边空”，见图10。<br> 一页多图用mfrow参数或mfcol参数规定，如：<br> R画图常用图形 - zhangwei2039 - 闲云的博客<br> &gt; par(mfrow=c(3,2))<br> 表示同一页有三行两列共六个图，而且次序为按行填放。类似地，<br> &gt; par(mfcol=c(3,2))<br> 规定相同的窗格结构，但是次序为按列填放，即先填满第一列的三个再填第二列。要取消一页多图只要再运行<br> &gt; par(mfrow=c(1,1))<br> 即可。<br> 缺省时无外边空。为了规定外边空大小，可以用omi参数或oma参数。omi参数使用英寸为单位，oma参数以文本行高为单位，两个参数均为四个元素的向量，分别给出下、左、上、右方的边空大小。如：<br> &gt; par(oma=c(2,0,3,0))<br> 函数mtext用来在外边空加文字标注。其用法为<br> mtext(text, side = 3, line = 0, outer = FALSE)<br> 其中text为要加的文本内容，side表示在哪一边写（1为下，2为左，3为上，4为右），line 表示边空从里向外数的第几行，最里面的一行是第0号，outer=TRUE时使用外边空，否则会使用当前图的边空。例如：<br> &gt; par(mfrow=c(2,2), oma=c(0,0,3,0), mar=c(2,1,1,0.1)) &gt; plot(x);plot(y);boxplot(list(x=x,y=y));plot(x,y) &gt; mtext("Simulation Data", outer=T, cex=1.5)<br> 在多图环境中还可以用mfg参数来直接跳到某一个窗格，比如<br> &gt; par(mfg=c(2,2,3,2))<br> 表示在三行两列的多图环境中直接跳到第二行第二列位置。mfg参数的后两个表示多图环境的行、列数，前两个表示要跳到的位置。<br> 可以不使用多图环境而直接在页面中的任意位置产生一个窗格来绘图，参数为fig，如：<br> &gt; par(fig=c(4,9,1,4)/10)<br> 此参数为一个向量，分别给出窗格的左、右、下、上边缘的位置，取值为占全页面的比例，比如上面的例子在页面的右下方开一个窗格作图。<br> <br> <br> 图形设备<br> S作图支持各种图形设备，其中常用的是显示器和PostScript打印机。在一个S运行期间可以有多个图形设备同时存在。在R中，用<br> &gt; x11()<br> 打开图形窗口绘图，在S-PLUS中，用<br> &gt; win.graph()<br> 打开图形窗口绘图。再次调用这样的函数将打开第二个图形窗口。用<br> &gt; dev.list()<br> 可显示以打开的图形设备的列表。<br> 要关闭一个图形设备，用<br> &gt; dev.off()<br> 这可以使得图形得以完成，例如对于postscript设备关闭设备时可完成打印或存盘。用graphics.off() 函数可以关闭所有打开的图形设备。<br> MS Windows下的R可以把显示窗口中的图形复制到剪贴板或存为各种格式的图形文件，包括WMF、PostScript、PNG、BMP、JPEG，这样我们可以用R生成所需图形然后存为需要的格式。MS Windows下的S-PLUS也具有类似功能。<br> 各版本的R和S-PLUS都支持生成PostScript图形的功能，生成的图形可以直接用于LaTeX 排版。如果用MS Word排版则可把屏幕图形存为WMF等格式。生成PostScript文件的设备可以用如下函数打开：<br> &gt; postscript(file="result1.ps", horizontal=FALSE, width=5, height=3)<br> 这时用图形命令生成一个页面的图形，然后用dev.off()关闭设备，则可生成文件result1.ps 。postscript()函数中horizotal参数指定是否将图旋转90度使得x轴平行于纸的长边，width 和height规定图的宽和高，单位是英寸。<br> 在打开了多个图形设备后可以用dev.set()函数来选择当前设备，dev.next()和dev.prev() 分别返回下一个和上一个图形设备。比如dev.set(dev.prev())选择上一个图形设备。<br>    <br> R语言学习笔记<br> 分类： R 2012-11-22 08:59 448人阅读 评论(0) 收藏 举报<br> 参考：W.N. Venables, D.M. Smith and the R DCT: Introduction to R -- Notes on R: A Programming Environment for Data Analysis and Graphics, 2003. http://bayes.math.montana.edu/Rweb/Rnotes/R.html<br> <br> <br> 前言：关于R<br> 在R的官方教程里是这么给R下注解的:一个数据分析和图形显示的程序设计环境(A system for data analysis and visualization which is built based on S language.)。<br> R的源起<br> R是S语言的一种实现。S语言是由 AT&amp;T贝尔实验室开发的一种用来进行数据探索、统计分析、作图的解释型语言。最初S语言的实现版本主要是S-PLUS。S-PLUS是一个商业 软件，它基于S语言，并由MathSoft公司的统计科学部进一步完善。后来Auckland大学的Robert Gentleman 和 Ross Ihaka 及其他志愿人员开发了一个R系统。R的使用与S-PLUS有很多类似之处，两个软件有一定的兼容性。<br> R is free<br> R是用于统计分析、绘图的语言和操作环境。R是属于GNU系统的一个自由、免费、源代码开放的软件，它是一个用于统计计算和统计制图的优秀工具。<br> R是一套完整的数据处理、计算和制图软件系统。其功能包括：数据存储和处理系统；数组运算工具（其向量、矩阵运算方面功能尤其强大）；完整连贯的统计分析工具；优秀的统计制图功能；简便而强大的编程语言：可操纵数据的输入和输入，可实现分支、循环，用户可自定义功能。<br> R是一个免费的自由软件，它有UNIX、LINUX、MacOS和WINDOWS版本，都是可以免费下载和使用的,在那儿可以下载到R的安装程序、各种外挂程序和文档。在R的安装程序中只包含了8个基础模块，其他外在模块可以通过CRAN获得。<br> R的特点<br> (1) 有效的数据处理和保存机制。<br> (2) 拥有一整套数组和矩阵的操作运算符。<br> (3) 一系列连贯而又完整的数据分析中间工具。<br> (4) 图形统计可以对数据直接进行分析和显示，可用于多种图形设备。<br> (5) 一种相当完善、简洁和高效的程序设计语言。它包括条件语句、循环语句、用户自定义的递归函数以及输入输出接口。<br> (6) R语言是彻底面向对象的统计编程语言。<br> (7) R语言和其它编程语言、数据库之间有很好的接口。<br> (8) R语言是自由软件，可以放心大胆地使用，但其功能却不比任何其它同类软件差。<br> (9) R语言具有丰富的网上资源<br> 一   入门训练<br> 1. 获取帮助<br>     &gt; help.start() 开启帮助文档<br>     &gt;help(solve) 显示某命令的帮助信息，或者<br>     &gt;?solve<br>     对于由特殊字符指定的功能，这些参数必须用单引号或双引号括起来，使之成为一个“字符串”,如<br>     &gt; help("[[")<br>     与某个主题相关的例子通常可以用下面的命令得到<br>     &gt; example(topic)<br> 2. 命令简介<br>     R对大小写是敏感的；名称不能以数字开始；<br>     基本的命令由表达式或者赋值语句组成。如果一个表达式被作为一条命令给出，它将被求值、打印而表达式的值并不被保存。一个赋值语句同样对表达式求值之后把表达式的值传给一个变量，不过并不会自动的被打印出来；<br>     命令由分号(;)来分隔，或者另起新行；<br>     基本命令可以由花括号(f和g)合并为一组复合表达式；<br>     注释几乎可以被放在任何地方，只要是以井号( # )开始，到行末结束；<br>     如果一个命令在行莫仍没有结束，R将会给出一个不同的提示符，默认的是‘+’。<br> 3. 命令文件的执行和输出转向到文件<br> 如果命令存储于一个外部文件中，比如工作目录work中的commands.R，他们可以随时在R的任务中被执行<br> &gt; source("commands.R")在Windows中Source也可以由File菜单执行。<br> 函数sink，<br> &gt; sink("record.lis")<br> 将把所有后续的输出由终端转向一个外部文件，record.lis。命令<br> &gt; sink()   将把信息重新恢复到终端上。<br> 4. 数据的保持与对象的清除<br> R所创建、操作的实体是对象。对象可以是变量、数组、字符串、函数以及由这些元素组成的其它结构；<br> &gt; objects()     用来显示目前存储在R中的对象的名字。而当前存储的所有对象的组合被称为workspace；<br> 清除对象可以使用rm命令：<br> &gt; rm(x, y, z, ink, junk, temp, foo, bar)<br> 所有在一个R任务中被创建的对象都可以在文件中被永久保存，并在其它的R任务中被使用。在每个R任务结束时用户都有机会保存当前有效的所有对象。如果用户这样做的话，对象将被写入当前目录一个名为.RData。当R被再次启动时R会从这个文件中再载入workspace。同时相关的命令记录也被载入。<br> 所以，推荐大家在用R进行不同的分析时分别使用不同的工作目录。<br> 5. 基本数据结构<br>  <br> 数值型(numeric）<br> 1,1.2,3.1415926<br> 复数型(complex)<br> 1+2i<br> 字符型(character)<br> ‘A’/ “hello world!”<br> 逻辑型(logical)<br> TRUE / FALSE<br> 6. 基本数据对象<br> 向量(vector), 见下节<br> 矩阵(matrix)： <br> 更一般的说数组是向量在多维情况下的一般形式。事实上它们是可以被两个或更多的指标索引的向量，并且以特定的方式被打印出来。<br> 因子(factors) 提供了一种处理分类数据的更简介的方式。<br> 列表(list)：  <br> 是向量的一种一般形式，并不需要保证其中的元素都是相同的类型，而且其中的元素经常是向量和列表本身。<br> 数据框(data frame)：<br> 是一种与矩阵相似的结构，其中的列可以是不同的数据类型。可以把数据框看作一种数据"矩阵"，它的每行是一个观测单位，而且(可能)同时包含数值型和分类的变量。<br> 函数( function)：<br> 能够在R的workspace中存储的对象。我们可以通过函数来扩展R的功能。<br> 二   简单操作，数值与向量<br> 2.1 向量与赋值<br> R对命名了的数据结构进行操作。最简单的数据结构是数字向量；如，<br> &gt; x &lt;- c(10.4, 5.6, 3.1, 6.4, 21.7)    c()是创建函数，赋值运算符是'&lt;-'，与函数assign()等价<br> &gt; assign("x", c(10.4, 5.6, 3.1, 6.4, 21.7))  也可以写成：<br> &gt; c(10.4, 5.6, 3.1, 6.4, 21.7) -&gt; x<br> 如果一个表达式被当作一个完整的命令，它的值将被打印到终端但不被储存。<br> 单独输入x则会将值打印出来。也可以打印倒数：<br> &gt; 1/x<br> &gt; y &lt;- c(x, 0, x)   也可以将向量作为元素。<br> 2.2 向量运算<br>     操作是按照向量中的元素一个一个进行的。同一个表达式中的向量并不需要具有相同的长度。如果它们的长度不同,表达式的结果是一个与表达式中最长向量有相同长度的向量。表达式中较短的向量会根据它的长度被重复使用若干次(不一定是整数次)，直到与长度最长的向量相匹配。而常数很明显的将被不断重复。如，<br> &gt; v &lt;- 2*x + y + 1<br> 常用运算有：<br> +，-，*，/，^（次方）；<br> log, exp, sin, cos, tan,sqrt等；<br> max和min的作用是选出所给向量中最大的或最小的元素；<br> range函数的值是一个长度为2的向量，即c(min(x),max(x))<br> length(x)返回了向量x中元素的个数，也就是x的长度。<br> sum(x)给出了x中所有元素的总和；<br> prod(x)给出x中所有元素的乘积；<br> mean(x)和var(x)，分别计算样本均值和样本方差，这两个函数分别相当于sum(x)/length(x)，sum((x-mean(x)) \^2)/(length(x) -1)。如果var()的参数是一个n*p的矩阵，那么函数的值是一个p*p的样本协方差矩阵，认为每行是一个p变量的样本向量。<br> sort(x)返回一个与x具有相同长度的向量，其中的元素按招升序排列。还有其他更灵活的排序功能(参见order()和sort.list())。<br> pmax和pmin将返回一个与最长的向量长度相等的向量，向量中的元素由参数中所有向量在相应位置的最大值(最小值)组成；<br> 如果要使用复数，需要直接给出一个复数部分。因此sqrt(-17)将会返回NaN(无效数值)和一个警告，而sqrt(-17+0i)将按照复数进行运算。<br> 2.3 生成序列<br> 最简单的方法是用冒号‘：’，冒号具有最高运算优先级。例如1:30就是向量c(1,2,. . .,29,30)。30:1构造一个递减序列。<br> 利用seq()函数构造序列：有五个参数，from, to, by, length, along<br>                                        from, to可以不写参数名，seq(2,10)就相当于2:10。<br>                                        by指定步长，默认为1，如seq(-5, 5, by=.2)即为c(-5.0, -4.8, -4.6, ..., 4.6, 4.8, 5.0)<br>                                        length指定序列长度，如seq(length=51, from=-5, by=.2)，等同于seq(-5, 5, by=.2)<br>                                        along=vector只能单独使用，产生一个“1:length(vector)”序列。类似的函数是rep(),这个函数可以用多种复杂的方法来                          <br>                                            复制一个对象。最简单的形式是&gt; s5 &lt;- rep(x, times=5)<br> 2.4 逻辑向量<br> TRUE, FALSE, 和NA(not available), 前两个可以简写为T和F，但T/F并不是系统保留字，可以被用户覆盖，所以最好还是不要简写。<br> 逻辑向量是由条件给出的，如下列语句令temp成为一个与x长度相同，相应位置根据是否与条件相符而由TRUE或FALSE组成的向量：<br> &gt; temp &lt;- x &gt; 13<br> 逻辑操作符包括&lt;, &lt;=, &gt;, &gt;=,完全相等==和不等于!=，与或非分别为&amp;, |, !。<br> 在普通运算中，FALSE当做0而TRUE当做1。<br> 2.5 缺失值<br> NA(not available): 一般来讲一个NA的任何操作都将返回NA。<br>      is.na(x)返回一个与x等长的逻辑向量，并且由相应位置的元素是否是NA来决定这个逻辑向量相应位置的元素是TRUE还是FALSE。<br>      x==NA是一个与x具有相同长度而其所有元素都是NA的向量。<br> NaN(Not a Number): 由数值运算产生，如0/0, Inf-Inf.<br>      is.na(x)对于NA和NaN值都返回TRUE，<br>      is.nan(x)只对NaN值返回TRUE。<br> 2.6 字符向量<br> 字符串在输入时可以使用单引号(')或双以号(");  在打印时用双引号(有时不用引号)。<br> R使用与C语言风格基本相同的转义符, 所以输入\\打印的也是\\, 输入\" 打印引号",  \n: 换行, \t: tab, \b: 回格。<br> 字符向量可以通过函数c()连接；<br> paste()可以接受任意个参数，并从它们中逐个取出字符并连成字符串，形成的字符串的个数与参数中最长字符串的长度相同。如果参数中包含数字的话，数字将被强制转化为字符串。在默认情况下，参数中的各字符串是被一个空格分隔的，不过通过参数sep=string 用户可以把它更改为其他字符串，包括空字符串。例如：<br> &gt; labs &lt;- paste(c("X","Y"), 1:10, sep="")  使变量labs成为字符变量c("X1", "Y2", "X3", "Y4", "X5", "Y6", "X7", "Y8", "X9", "Y10")<br> 2.7 index vector---数据集子集的选择与修改<br> 任何结果为一个向量的表达式都可以通过追加索引向量(index vector)来选择其中的子集。<br> 1 逻辑的向量。<br> &gt; y &lt;- x[!is.na(x)]    表示将向量x中的非NA元素赋给y；<br> &gt; (x+1)[(!is.na(x)) &amp; x&gt;0] -&gt; z     表示创建一个对象z，其中的元素由向量x+1中与x中的非缺失值和正数对应的向量组成。<br> 2. 正整数的向量<br> &gt; x[6]    是x的第六个元素<br> &gt; x[1:10]       选取了x的前10个元素(假设x的长度不小于10)。<br> &gt; c("x","y")[rep(c(1,2,2,1), times=4)]     产生了一个字符向量，长度为16，由"x", "y", "y", "x"重复4次而组成。<br> 3. 负整数的向量<br> &gt; y &lt;- x[-(1:5)]       表示向量y取向量x前5个元素以外的元素。<br> 4. 字符串的向量<br> 只存在于拥有names属性并由它来区分向量中元素的向量。这种情况下一个由名称组成的子向量起到了和正整数的索引向量相同的效果。<br> &gt; fruit &lt;- c(5, 10, 1, 20)<br> &gt; names(fruit) &lt;- c("orange", "banana", "apple", "peach")<br> &gt; lunch &lt;- fruit[c("apple","orange")]<br> 子集的修改<br> &gt; x[is.na(x)] &lt;- 0    表示将向量x中所以NA元素用0来代替<br> &gt; y[y &lt; 0] &lt;- -y[y &lt; 0]      表示将向量(-y)中 与向量y的负元素对应位置的元素 赋值给 向量y中 与向量y负元素对应的元素。作用相当于：<br> &gt; y &lt;- abs(y)<br> 三  对象，模式和属性<br> 3.1 固有属性：模式和长度<br> 对象是R所进行操作的实体，对象可以是向量、列表等，详见1.6.<br> 对象的模式包括numeri，ccomplex，character，logical，list，function，expression等。可以用mode(object)查看。<br> 对象的长度是对象的另一固有属性。可以用length(object)查看。<br> attribute(object)可以查看更深入的属性。<br> 模式的转换<br> 在允许的情况下(大多数情况都是允许的)，R可以完成各种模式的转换。例如：d&lt;-as.character(z)，将数值向量z&lt;-(0:9)转化为字符向量c("0", "1", "2", ..., "9")。as.integer(d)将d转化为数值向量。<br> R中很多形式为as.something()的函数，可以完成从一个模式向另一个模式的转化，或者是令对象取得它当前模式不具有的某些属性。<br> 3.2 改变对象的长度<br> &gt; e &lt;- numeric()    产生一个numeric型的空向量e。character()等类似。此时长度为对象0。<br> 此时新添加一个元素会使e的长度自动调整。<br> &gt; e[3] &lt;- 17    令e为一个长度为3的向量（此时，该向量的前两个元素都是NA）<br> 缩短（截断）一个对象的长度，只需要一个赋值命令。因此，若alpha是一个长度为10的对象，下面的命令<br> &gt; alpha &lt;- alpha[2 * 1:5]<br> 3.3 属性的获取和设置<br> 函数attributes(object)将给出当前对象所具有的所有非基本属性（长度和模式属于基本属性）的一个列表。<br> 函数attr(object,name)可以被用来选取一个指定的属性。除了为某些特殊的目的创建新属性这样特殊的环境下，这些函数很少被用到。<br> 当函数attr()用在赋值语句左侧时，既可以是将对象与一种新的属性关联，也可以是对原有属性的更改。例如<br> &gt; attr(z,"dim") &lt;- c(10,10)         另R将z作为一个10X10的矩阵看待。<br> 3.4 对象的类别<br> 对象的一个特别属性，类别，被用来指定对象在R编程中的风格。比如：如果对象类别"data.frame"则会以特定方式处理。<br> unclass()可以去除对象的类别。<br> summary()可以查看对象的基本信息（min, max, mean, etc.）<br> 四  有序因子和无序因子<br> 因子是一种向量对象，它给自己的组件指定了一个离散的分类（分组），它的组件由其他等长的向量组成。R提供了有序因子和无序因子。<br> 通俗点说，因子就是将对象的值分成不同的组（levels）。<br> 用函数factor()创建一个因子，levels按序排列(字母序或数值序)。<br> 例如province&lt;-c("四川","湖南","江苏","四川","四川","四川","湖南","江苏","湖南","江苏")，为province创建因子：<br> &gt; pf&lt;-factor(province)   创建province的因子pf<br> &gt; pf     打印出来<br>  [1] 四川 湖南 江苏 四川 四川 四川 湖南 江苏 湖南 江苏<br> Levels: 湖南 江苏 四川<br> 函数levels()可以用来观察因子中有多少不同的levels。<br> 假如我们拥有这些省份考生的分数：<br> &gt; score&lt;-c(95,86,84,92,84,79,86,99,85,90)<br> 函数tappley()可以用来计算各省的平均分数，函数tapply()的作用是对它第一个参数的组件中所包含的每个组应用一个参数三指定的函数。<br> &gt; smeans&lt;-tapply(score,pf,mean)<br> &gt; smeans<br>     湖南     江苏     四川 <br> 85.66667 91.00000 87.50000 <br> 再例如，下面命令会给出各组的length<br> &gt; tapply(score,pf,length)<br> 湖南 江苏 四川 <br>    3    3    4 <br> 函数ordered()可以创建有序因子<br> &gt; ordered(province)<br>  [1] 四川 湖南 江苏 四川 四川 四川 湖南 江苏 湖南 江苏<br> Levels: 湖南 &lt; 江苏 &lt; 四川<br> 五 数组和矩阵<br> 5.1 数组<br> 数组可以看成一个由递增下标表示的数据项的集合，例如数值。<br> 数组的生成<br> 如果一个向量需要在R中以数组的方式被处理，则必须含有一个维数向量作为它的dim属性。<br> 维度向量由dim()指定，例如，z是一个由1500个元素组成的向量。下面的赋值语句<br> &gt; dim(z) &lt;- c(3,5,100)        使它具有dim属性，并且将被当作一个3X5X100的数组进行处理。 c(3,5,100) 就是他的维度向量。<br> 还可以用到像matrix()和array()这样的函数来赋值。比如<br> &gt; array(1:20, dim=c(4,5))<br> &gt; matrix(1:24, 3,4)<br> 数据向量中的值被赋给数组中的值时，将遵循与FORTRAN相同的原则"主列顺序"，即第一个下标变化的最快，最后的下标变化最慢。<br> 数组的运算<br> 数组可以在算数表达式中使用，结果也是一个数组，这个数组由数据向量逐个元素的运算后组成，通常参与运算的对象应当具有相同的dim属性。<br> 5.2 数组的索引和数组的子块<br> 数组中的单个元素可以通过下标来指定，下标由逗号分隔，写在括号内。<br> 我们可以通过在下标的位置给出一个索引向量来指定一个数组的子块，不过如果在任何一个索引位置上给出空的索引向量，则相当于选取了这个下标的全部范围。<br> 如a[2,,]，a[,3,]等<br> 5.3 索引数组<br> 除了索引向量，还可以使用索引数组来指定数组的某些元素。<br> 例如：有4X5的数组a，若要得到a中的a[1,3], a[2,2] 和a[3,1]这三个元素，可以生成索引向量i，然后用a[i]得到它们。<br> &gt; a &lt;- array(1:20,dim=c(4,5)) # Generate a 4 by 5 array.<br> &gt; i &lt;- array(c(1:3,3:1),dim=c(3,2))<br> &gt; i<br> [,1] [,2]<br> [1,] 1 3<br> [2,] 2 2<br> [3,] 3 1<br> &gt; a[i]<br> [1] 9 6 3<br> &gt; a[i] &lt;- 0   # 将这三个元素用0替换。<br> 5.4 向量，数组的混合运算<br> 表达式从左到右被扫描；<br> 参与运算的任意对象如果大小不足，都将被重复使用直到与其他参与运算的对象等长；<br> 当较短的向量和数组在运算中相遇时，所有的数组必须具有相同的dim属性，否则返回一个错误；<br> 如果有任意参与运算的向量比参与运算的矩阵或数组长，将会产生错误；<br> 如果数组结构正常声称，并且没有错误或者强制转换被应用于向量上，那么得到的结果与参与运算的数组具有相同的dim属性。<br> 5.5 矩阵的运算<br> 构建分区矩阵：cbind()和rbind()，cbind()按照水平方向，或者说按列的方式将矩阵连接到一起。rbind()按照垂直的方向，或者说按行的方式将矩阵连接到一起。<br> 外积：操作符是%o%:<br> &gt; ab &lt;- a %o% b   或者<br> &gt; ab &lt;- outer(a, b, "*")<br> 其中的乘法操作可以由任意一个双变量的函数替代。<br> 广义转置：函数t(A)，或aperm(A, c(2,1))；<br> 获取行数/列数：nrow(A)和ncol(A)分别返回矩阵A的行数和列数。<br> 矩阵乘法：操作符为%*%；<br> 交叉乘积（cross product）：crossprod(X，Y)等同于t(X) %*% y，crossprod(X)等价于crossprod(X, X)；<br> diag(v)：如果v是向量，diag(v)返回一个由v的元素为对角元素的对角矩阵。<br>                如果v为矩阵，diag(v)返回一个由v主对角元素组成的向量。<br>                如果v只是一个数值，那么diag(v)是一个vXv的单位矩阵。<br> 特征值和特征向量：eigen(Sm)。这个函数的结果是由名为values和vectors的两部分组成的列表。如果只是需要特征值：eigen(Sm)$values<br> 最小二乘拟合即QR分解：lsfit(), qr()。<br> 强制转换为向量：as.vector()，或者直接c().<br> 解线性方程和求矩阵的逆，奇异值分解与行列式见&lt;R语言笔记&gt;；<br> 六  列表和数据帧<br> 6.1 列表<br> 列表是由称作组件的有序对象集合构成的对象。组件的模式或类型不一定相同。<br> 形如Lst &lt;- list(name_1=object_1, . . ., name_m=object_m)的赋值将创建一个包含m个组件的列表，并根据参数中指定的名称为其命名。（其名称可以自由选取）。如果它们的名称被省略，组件将只是被编号。例如：<br> &gt; Lst &lt;- list(name="Fred", wife="Mary", no.children=3,child.ages=c(4,7,9))<br> 所使用的组件是被复制到新的列表中的，对原始对象没有影响。<br> 组件总是被编号的，并且可以通过编号指定。<br> Lst[[1]] 即为"Fred"，也可以用 Lst$name，Lst[["name"]]指定。如果Lst[[4]]是一个有下标的数组，Lst[[4]][1]就是它的第一项。<br> 区分Lst[[1]]和Lst[1]，'[[...]]'是选择单个元素时使用的操作符，而'[...]'是一个一般的下标操作符。因此，前者代表列表Lst中的第一个对象；后者是列表Lst的子列表，仅包含列表的第一项。<br> 组件的名称可以缩写，可缩写的程度是只要能令组件被唯一的识别就可以了。如：Lst$na等价于Lst$name， Lst$w等价于Lst$wife。<br> 扩展列表<br> 可以通过指定额外组件的方式。例如<br> &gt; Lst[5] &lt;- list(matrix=Mat)<br> 连接列表<br> 当连接函数c()的参数为列表时，其结果也是一个模式为列表的对象。由参数中的列表作为组件依次连接而成。<br> &gt; list.ABC &lt;- c(list.A, list.B, list.C)<br> 6.2 数据帧<br> 数据帧是类别为"data.frame"的列表；<br> 数据帧会被当作各列具有不同模式和属性的矩阵。<br> 数据帧按照矩阵的方式显示，选取的行或列也按照矩阵的方式来索引。<br> 创建数据帧<br> 直接创建：那些满足对数据帧的列（组件）限制的对象可以通过函数data.frame来构建成为一个数据帧<br> &gt; t &lt;- data.frame(home=statef, loot=income, shot=incomef)<br> 强制转换：如果一个列表的组件与数据帧的限制一致，这个列表就可以通过函数as.data.frame()强制转化为一个数据帧。<br> 外部文件：创建数据帧最简单的方法应当是使用read.table()函数从外部文件中读取整个数据帧。<br> 数据帧和列表的限制<br> 1 组件必须是向量（数值型，字符形，逻辑型），因子，数值矩阵，列表，或其他数据帧；<br> 2 矩阵，列表，数据帧向新数据帧提供的变量数分别等于它们的列数，元素数和变量数；<br> 3 数值向量，逻辑值和因子在数据帧中保持不变，字符向量将被强制转化为因子，其水平是字符向量中所出现的值；<br> 4 数据帧中作为变量的向量结构必须具有相同的长度，而矩阵结构应当具有相同的行大小。<br> 挂接和卸载数据帧<br> 当觉得使用'$'引用数据帧元素(如't$home')麻烦时，可以进行数据帧挂接<br> &gt; attach(t)      这样可以直接引用数据帧内的元素，而无需'$'，前提是数据帧外没有同名的变量(如name)。<br> 挂接后若要对数据帧元素进行赋值操作，仍需用'$'，否则视为赋值给数据帧外的元素。<br> 赋值后必须要先卸载(detach)再重新挂接后，新值才可见。<br> &gt; detach(t)<br> attach()是具有一般性的函数，即它不仅能够将目录和数据帧挂接在搜索路径上，还能挂接其他类别的对象。特别是模式为"list"的对象可以通过相同的方式挂接：<br> &gt; attach(any.old.list)     <br> 任何被挂接的对象都可以用detach来卸载，通过指定位置编号或者指定名称这样的方式.<br> 搜索路径<br> 函数search()将显示目前的搜索路径，可以用来查看数据帧/列表的挂接状态。<br> ls()（或objects()）命令可以用来检查搜索路径任意位置上的内容。如：ls(), ls(2), ls(t)<br> R可以在搜索路径中包含至多20个项目,列表和数据帧只能在位置2或更靠后的位置上挂接。<br> 数据帧使用惯例<br> 1 将每个独立的，适当定义的问题所包含的所有变量收入同一个数据帧中，并赋予合适的、易理解、易辨识的名称；<br> 2 处理问题时，当相应的数据帧挂接于位置2，同时在第1层工作目录下存放操作的数值和临时变量；<br> 3 在结束一次工作之前，将你认为对将来有参考价值的变量通过$标记的形式添加到数据帧里面，然后detach()；<br> 4 最后，将工作目录下所有不需要的变量剔除，并且尽量将剩下多余的临时变量都清除干净。<br> 这样我们可以很简单的在同一个目录下处理多个问题，而且对每个问题都可以使用x,y,z这样的变量名。<br> 七  从文件中读取数据<br> 7.1 函数read.table()<br> 该函数可以直接将文件中完整的数据帧读入。此时文件要符合特定的格式：<br> 1 第一行应当提供数据帧中每个变量的名称；<br> 2 每一行(除变量名称行)应包含一个行标号和各变量的值。<br> 3 若没有表头(变量名称行)，也没有行标号，只有变量值，则默认变量名称为"v1","v2"...<br> 4 若有表头，但没有行标号，则可以指定参数header=TRUE.<br> 7.2 函数scan()<br> 该函数从键盘或文件中读取数据，并存入向量或列表中。<br> &gt; inp &lt;- scan(file, what)<br> 第一个参数是文件名,如“test.txt”，若为“”或空，则从键盘读入数据；<br> 第二个参数用于确定读入数据的模式。  如：list("",0,0) 指定读入到列表中，列表有三项，且列表第一项是字符型，第二三项是数值型。若为0，则指定读入到一个数值向量中，若为“”则指定读入到字符向量中。<br> 7.3 内置数据集的读取<br> R本身提供超过50个数据集，同时在功能包（包括标准功能包）中附带更多的数据集。与S-Plus不同，这些数据即必须通过data函数载入。<br> &gt; data()   #获得基本系统提供的数据集列表，然后通过形如<br> &gt; data(infert)    #来载入名为infert的数据集<br> 从其他package中载入数据集<br> data(package="nls")      #查看nls中数据集<br> data(Puromycin, package="nls")     #读取nls中Puromycin数据集。<br> 用library()挂接package后，它的数据集也自动包含到搜索路径中了。<br> library(nls)    #载入package nls<br> data()      #查看数据集<br> date(Puromycin)    #载入Puromycin数据集<br> 7.4  编辑数据<br> 在使用一个数据帧或矩阵时，edit提供一个独立的工作表式编辑环境。<br> &gt; xnew &lt;- edit(xold)       #对数据集xold进行编辑。并在完成时将改动后的对象赋值给xnew<br> &gt; xnew &lt;- edit(data.frame())        #可以通过工作表界面录入新数据。<br> fix()函数用于直接修改已有的对象，等价于  x&lt;-edit(x).<br> 八 概率分布<br> 8.1 R是一个统计表集合(略读)<br> R提供了一套完整的统计表集合。函数可以对累积分布函数P(X&lt;=x)，概率密度函数，分位函数（对给定的q，求满足P(X&lt;=x) &gt; q的最小x）求值，并根据分布进行模拟。<br> <br> <br> 对于所给的名称，加前缀'd'代表密度(density)，'p'代表CDF，'q'代表分位函数，'r'代表模拟（随即散布）。这几类函数的第一个参数是有规律的，形为dxxx的函数为x，pxxx的函数为q，qxxx的函数为p，rxxx的函数为n（rhyper和rwilcox是特例，他们的第一个参数为nn）。目前为止，非中心参数(non-centrality parameter)仅对CDF和少数几个其他函数有效，细节请参考在线帮助。<br> 所有pxxx和qxxx的函数都具有逻辑参数lower.tail和log.p，而所有的dxxx函数都有参数log，这个是我们可以直接通过<br> - pxxx(t, ..., lower.tail = FALSE, log.p = TRUE)<br> 获取，比如说，累积失效函数（cumulative/integrated hazard function），H(t) =-log(1-F(t))，以及更精确的对数似然（通过dxxx(..., log = TRUE)）。<br> 此外，对于来自正态分布，具有学生化样本区间的分布还有ptukey和qtukey这样的函数。下面是一些例子<br> &gt; ## 2-tailed p-value for t distribution<br> &gt; 2*pt(-2.43, df = 13)<br> &gt; ## upper 1% point for an F(2, 7) distribution<br> &gt; qf(0.99, 2, 7)<br> 8.2 检测数据集的分布<br> 函数summary和fivenum这两个函数可以给出摘要，后者只给出数值；<br> 函数stem可以将数值统计结果以类似直方图的方式显示出来；<br> 函数hist()可以绘制直方图；<br> 函数density和line可以获得更漂亮的密度图；<br> 功能包fun中的ecdf函数能绘制经验累积分布函数；<br> 还可以进行拟合正态分布，覆盖拟合CDF；<br> 还可以绘制Quantile-quantile (Q-Q)图有助于我们更细致的检测其分布形态；<br> 8.3 单样本和两样本检验（略读）<br> 九  语句组、循环和条件操作<br> R是一种表达式语言，也就是说其命令类型只有函数或表达式，并由它们返回一个结果。<br> 语句组由花括号‘{ }’确定，此时结果是该组中最后一个能返回值的语句的结果。<br> 条件语句<br> &gt; if (expr_1) expr_2 else expr_3 <br> 其中条件表达式expr1必须返回一个逻辑值，操作符&amp;&amp;和||经常被用于条件部分。<br> &amp;和|与&amp;&amp;，||的区别在于，&amp;和|按照逐个元素的方式进行计算，&amp;&amp;和||对向量的第一个元素进行运算，只有在必需的时候才对第二个参数求值。<br> if/else结构的向量版本是函数ifelse，其形式为ifelse (condition,a,b)，产生函数结果的规则是：如果condition[i]为真，对应a[i]元素；反之对应的是b[i]元素。根据这个原则函数返回一个由a,b中相应元素组成的向量，向量长度与其最长的参数等长。<br> 循环语句<br> &gt; for (name in expr_1) expr_2<br> 其中name是循环变量，expr1是一个向量表达式（通常是1:20这样的序列），而expr2经常是一个表达式语句组，expr2随着name依次取expr1结果向量的值而被多次重复运行。<br> &gt; repeat(expr)<br> &gt; while(condition) expr<br> break语句可以用来中断任何循环，可能是非正常的中断。而且这是中止repeat循环的唯一方式。<br> next语句可以中止一个特定的循环，跳至下一个.<br> 十 编写自己的函数<br> 10.1 函数的定义<br> &gt; name &lt;- function(arg_1, arg_2, ...) expression <br> expression是一个R表达式（通常是表达式语句组），并使用参数arg_i来计算出一个数值，表达式的值就是函数的返回值。<br> 函数调用的形式通常都是name(expr1,expr2,...)<br> 10.2 定义新的二元操作符<br> 可以将函数定义为新的二元操作符：<br> &gt; "%!%" &lt;- function(X, y) { ... }<br> 正如矩阵乘法运算符，%*%，和矩阵外积运算符%o%<br> 10.3 指定参数和默认值<br> 如果被调用函数的参数按照"name = obj"的形式给出，那么参数的次序可以是任意的。<br> 而且，参数序列可以在开始依次序给出，而将指定名称的参数置于后面。<br> 因此，如果由一个函数fun1被定义为<br> &gt; fun1 &lt;- function(data, data.frame, graph, limit) {<!-- --><br> [function body omitted]<br> }<br> 那么函数可以有多种等价的使用方法，例如<br> &gt; ans &lt;- fun1(d, df, TRUE, 20)<br> &gt; ans &lt;- fun1(d, df, graph=TRUE, limit=20)<br> &gt; ans &lt;- fun1(data=d, limit=20, graph=TRUE, data.frame=df)<br> 默认值 ：在很多情况下，参数都会被赋予一个普遍适用的默认值。<br> &gt; fun1 &lt;- function(data, data.frame, graph=TRUE, limit=20) { ... }<br> 则函数可以这样被调用<br> &gt; ans &lt;- fun1(d, df)<br> 此时与上面三种情况等价，也可以这样调用<br> &gt; ans &lt;- fun1(d, df, limit=10)<br> 此时改变了一个默认值。<br> NOTE：参数可以是任意表达式，甚至可以是包含其他参数的表达式；<br> 10.4 额外参数“...”<br> 当需要将一个函数的参数传递给另一个函数时，可以通过包含一个额外的参数"..."实现。<br> fun1 &lt;- function(data, data.frame, graph=TRUE, limit=20, ...) {<!-- --><br> [omitted statements]<br> if (graph)<br> par(pch="*", ...)<br> [more omissions]<br> }<br> 10.5 全局变量和局部变量<br> 函数内的赋值都是局部变量，退出函数就丢失了。<br> 如果要在函数内进行永久赋值（定义全局变量），需要用到“超赋值”操作符, &lt;&lt;-或者函数assign()。<br> 10.6 一些高级示例<br> 区组设计的效率因子 (E±ciency factors)<br> 删除打印数组中的所有名称<br> 递归的数值积分<br> 10.7 范畴（Scope）<br> 函数主体内出现的标识(symbol)可以被分为3类；正式参数、局部变量和自由变量。<br> 正式参数就是出现在函数参数列表中的参数，他们的值由实际的函数参数与正式参数的绑定（binding）过程决定。<br> 局部变量是在参数主体中，由表达式求值过程决定的变量。<br> 自由变量为既不是正式参数又不是局部变量的变量。赋值之后自由变量成为局部变量。<br> 在R中，自由变量的值由函数被创建的环境中与其同名的第一个变量值决定（我理解为最近的同名变量），这种方式被称为词汇式范畴(lexical scope)。<br> 而在S中，该值由同名的全局变量决定。<br> 例如下面的函数cube，在R中cube（2）=8，在S中报错为sq()找不到n。<br> cube &lt;- function(n) {<!-- --><br> sq &lt;- function() n*n<br> n*sq()<br> }<br> 一个银行账户的例子，详见《R语言笔记》。<br> 10.8 定制环境<br> 详见《R语言笔记》。<br> 10.9 类别，通用函数和对象定位<br> 一个对象的类别(class)决定了他会如何被通用函数(generic function)处理。<br> 如果参数本身没有任何类别属性，或者其类别在特定问题中并不满足通用函数的要求，通常会有一个默认的动作被执行。<br> 类别机制使用户可以为特定的目的设计和编写通用函数。<br> 使用&gt; methods(class="data.frame")可以查看数据帧的通用函数。<br> 使用&gt; methods(plot)可以查看plot函数能处理的类别。<br> 十一   R的统计模型<br> 待阅。<br> <br> <br> <br> <br> 十二 图形过程<br> 在Windows下用window()命令可以打开图形窗口。<br> 12.1 高级绘图命令<br>     高级绘图函数，由函数参数提供数据生成一幅完整的图形。其中适当的坐标轴，标签和标题都自动生成了（除非你另外指定了）。高级绘图命令每次都生成一幅新的图形，清除当前的图形（如果需要的话）。<br> 1  plot()函数<br> 这是一个通用函数：生成图形的类型取决于第一个参数的类型或类别(class)。<br> plot(x,y)  plot(xy)：<br> 如果x，y是向量，plot(x,y)生成一幅y对x的散点图。用包含两个元素x，y的一个列表或一个两列的矩阵作为一个参数（第二种形式那样的）也能达成相同的效果。<br> plot(x)：<br> 如果x是一个时间序列，这个命令生成一个时间序列图，如果x是一个数值型向量，则生成一个向量值对它们向量索引的土，而如果x是一个复向量，则生成一个向量中元素的虚部对实部的图。<br> plot(f)   plot(f,y)：<br> f是一个因子对象，y是一个数值型向量。第一种形式生成一个f的条形图；第二种形式生成y对应于f各个水平的箱线图。<br> plot(df)   plot( expr)    plot(y expr)：<br> df是一个数据帧，y是任意对象，expr是由对象名称组成的列表，分隔符'+'(例如，a + b + c)。前两种形式生成分布式的图形，第一种是数据帧中的变量，第二种是一系列被命名的对象。第三种形式生成y对expr中每个对象的图。<br> 2 显示多元数据<br> 如果X是一个数值矩阵或数据帧，下面的命令<br> &gt; pairs(X) <br> 生成一个配对的散点图矩阵，矩阵由X中的每列的列变量对其他各列列变量的散点图组成，得到的矩阵中每个散点图行、列长度都是固定的。<br> 当问题涉及到三、四个变量时，使用coplot更好些。如果a和b是数值向量，c是数值向量或因子对象（全都是相同长度的），下面的命令<br> &gt; coplot(a ~ b | c)<br> 对应c的某些给定值生成数个a对b的散点图。当c是一个因子时，这个命令也就是对c的每个水平生成a对b的散点图。当c是数值向量的时候，这个数值向量被分为一系列的条件区间（conditioning intervals），对应c的每个区间生成一个a对b的散点图。区间的数量和位置可以通过coplot()的参数given.values来控制，函数co.intervals()也可以用来选择区间。我们也可以使用两个给定变量通过命令<br> &gt;coplot(a ~ b | c+d)<br> 对c和d的每个联合条件区间生成a对b的散点图。<br> 函数coplot()和pairs()都可以使用参数panel=，这个参数可以用来定制我们得到的图形类型。默认的是points()函数，生成一个散点图，不过通过在参数panel=中提供某些其它的低级图形函数，我们可以生成需要的各种图形。一个很有用的函数例子是panel.smooth()。<br> 3 显示图形<br> qqnorm(x)   qqline(x)    qqplot(x,y)<br> 分布比较图。第一种形式生成向量x对期望正态分数（一个正态记分图），第二个在上面的图上添加一条穿过分布分位点和数据分位点的直线。第三个命令生成x的分位点对y分位点图，用于分别比较它们的分布。<br> hist(x)     hist(x,nclass=n)       hist(x,breaks=b, . . . )<br> 生成数值变量x的直方图。通常会自动选定一个合理的类别数，不过可以通过nclass=参数来指定一个推荐值。或者通过参数breaks=来指定分界点。如果给定了probability=TRUE参数，那么条形图代表相对频数而不是累计数。<br> dotchart(x, . . . )<br> 创建一个x中数据的点图(dotchart)。点图中y轴给出x中数据的标签，x轴给出它们的值。它允许对落入某一特定区间的所有数据项方便的进行可视化选择。<br> image(x,y,z, . . . )     contour(x,y,z, . . . )    persp(x,y,z, . . . )<br> 生成三个变量的图。函数image是用不同的颜色绘制一些矩形方格来展示z的值，函数contour通过绘制等高线来展示z的值，函数persp绘制一个3D面。<br> 4 参数配置<br> add=TRUE      强制函数按照低级图形函数的方式操作，将图形置于当前图形上（仅对某些函数有效）。<br> axes=FALSE       暂时禁止坐标轴的生成|以便使用axis()函数添加你自己定制的坐标轴。默认情况是axes=TRUE，即包含坐标轴。<br> log="x"   log="y"   log="xy"      令x,y或者两者全都对数化。这个参数对许多函数都有效，不过不是全部。<br> type=          参数type=控制所生成图形的类型：<br>         type="p" 绘制单独的点（默认值）<br>         type="l" 绘制线<br>         type="b" 绘制由线连接的点（both）<br>         type="o" 将点绘在线上<br>         type="h" 绘制从点到零轴的垂线（high-density）<br>         type="s" 阶梯式图。第一种形式中，点由垂线的顶部定义；第二种形式里用底部定义。<br>         type="n" 不绘制。不过坐标轴是绘出的（默认情况）而且要根据数据绘出坐标系统。用来给后续的低级图形函数创建图形作基础。<br> xlab=string    ylab=string          x轴或y轴的标签。使用这些参数来改变默认的标签，通常的默认值是调用高级绘图函数时所使用对象的名称。<br> main=string          图表标题，位于图形的顶部，大字体显示。 <br> sub=string         子标题，位于x轴下面，用较小的字体显示。<br> 12.2   低级绘图命令<br> 有些时候高级绘图函数并不能很精确的生成我们想要的图形。这种情况下，我们可以通过低级绘图命令在当前图形上添加信息（例如，点、线或文本）。<br> points(x,y)    lines(x,y)<br> 在当前图形上添加点或线。函数plot()的参数type=也可以用于这些函数（默认的是"p"代表points()和"l"代表lines()）。<br> text(x,y,labels, . . . )<br> 给定点坐标x,y，在该点添加文本。通常labels是一个整数或字符向量，其中labels[i]出现在点(x[i],y[i])。默认值是1:length(x)。<br> Note： 这个函数通常用于这样的序列中<br>  &gt; plot(x, y, type="n"); text(x, y, names)<br> 图形参数type="n"阻止了点的生成，但是建立了坐标轴，由函数text()提供字符向量names所指定的特定字符。<br> abline(a, b)   abline(h=y)   abline(v=x)    abline(lm.obj)<br> 在当前图上添加一条斜率为b，截距为a的直线。h=y在图形指定的高度上绘制一条贯穿图形的水平线，同样的，v=x在x轴的指定位置绘制一条贯穿的垂线。而lm.obj是一个包含coefficients组件的列表，该组件的长度为2，分别当作截距和斜率。<br> polygon(x, y, . . . )<br> 绘制一个多边形，其顶点由(x,y)指定。同时还（可选的）可以加上阴影线，如果图形设备允许的话还可以将多边形填充。<br> legend(x, y, legend, . . . )<br> 这当前图形的指定位置添加图例。绘制的字符，线条类型，颜色等等由字符向量legend指定。除此之外至少还要给出一个参数v，与绘图单元的相应值，分别有：<br> legend( , fill=v)填充方框的颜色<br> legend( , col=v)绘制点线的颜色<br> legend( , lty=v)线条类型<br> legend( , lwd=v)线条宽度<br> legend( , pch=v)绘制字符(字符向量)<br> title(main,sub)<br> 在当前图形的顶部用大字题添加一个标题main，在底部用较小的字体添加子标题sub。<br> axis(side, . . . )<br> 在当前图形的指定边上添加坐标，在哪个边上由第一个参数指定（1到4，从底部按照顺时针顺序）。其他参数控制坐标的位置|在图形内或图形外，以及标记的位置和标签。适合在调用参数为axes=FALSE的函数plot()后添加定制的坐标轴。<br> 低级绘图函数通常都需要一些位置信息（例如，x,y坐标）来决定在哪里添加新的元素。坐标以用户坐标(user coordinates)的形式给出，这个坐标系是根据所提供的数据由之前的高级绘图语句定义的。需要x,y参数的地方还可以选用一个单独的参数，即一个由名为x,y的元素组成的列表。相似的，一个两列的矩阵也可以。像locator()（后面会提到）这样的函数也可以按照这种方式交互的指定图形中的位置。<br> 添加数学注释<br> 某些情况下需要在图形中加入数学符号或公式。在R中可以通过在text, mtext,axis或title中指定一个表达式来实现。例如，下面的代码绘制了二项概率函数的公式：<br> &gt; text(x, y, expression_r(paste(bgroup("(", atop(n, x), ")"),p^x, q^{n-x})))<br> 更多的信息，包括其特性的一个完整列表可以在R中通过下面的命令得到：<br> &gt; help(plotmath)<br> &gt; example(plotmath)<br> 添加Hershey矢量字体<br> &gt; help(Hershey)<br> &gt; example(Hershey)<br> 12.3 图形的交互<br> R提供了函数，使用户可以通过鼠标从图形中释放信息或添加信息。<br> locator(n,type)<br> 等待用户使用鼠标左键在当前图形上选择位置。直到n(默认是512)个点都选完或者点击了鼠标另一个键（Unix,Windows)，在Mac下用鼠标点击图形窗口外的部分也可以结束。参数type的效果和在高级绘图函数中使用时是一样的，即在选择的点绘制指定的图形。默认情况是不绘制图形。函数locator()将所选点的坐标返回到一个列表中，列表包含x,y两个组件。<br> 通常locator()在调用的时候并不带参数。这个功能在为图例或标签这样的图形元素选择位置时比较有用，尤其是这些位置不好通过计算得到的时候。举个例子，如果要在一个野点附近添加一些信息，可以使用下面的命令<br> &gt; text(locator(1), "Outlier", adj=0)<br> identify(x, y, labels)<br> 允许用户在x,y（使用鼠标左键）定义的点附近绘制相应的labels的组件（如果没有给出labels就给出该点的序号），突显该点。当鼠标的另一个键被点击时（Unix,Windows）返回被选点的序号，在Mac下通过点击图形窗口外来实现这个效果。<br> 有时我们更想确定图形中的点，而非它们的位置。例如，我们可能希望从图示中选出某些感兴趣的观测点，然后进行某些操作。通过两个数值向量x,y给定一系列坐标(x; y)，我们可以使用identify()函数：<br> &gt; plot(x,y) &gt; identify(x,y)<br> 函数identify()本身不绘图，但是允许用户移动鼠标，在某点附近点击左键。离鼠标指针最近的点将被突显，并标出其序号（也就是它在向量x/y中的位置）。或者使用identify()的labels参数，把某些信息（例如案例名称）作为突显的标志；或者通过plot=FALSE参数取消所有突显标志。当选点的过程结束后，identify()返回所选点的序号；用户可以使用这些序号从x和y中释放所选的点。<br> 12.4 使用图形参数<br> 通过图形参数可以定制图形显示的几乎所有方面。R包含大量的图形参数，可以控制的包括线条类型，颜色，图标排列，文本对齐等等。<br> 1 持续性变更 (Permanent changes): par()函数<br> 通过par()函数设定图形参数的值会持续性的更改参数的值，也就是说这之后（在当前设备上）所有对图形函数的调用都受到新值的影响。<br> 函数par()用于存取和修改当前图形设备的图形参数列表。<br> par()不带任何参数，返回当前设备所有图形参数和它们的值的列表。<br> par(c("col","lty"))<br> 参数为一个字符向量，仅返回参数中指定的图形参数（也是作为一个列表）。<br> par(col=4, lty=2)<br> 带指定参数（或一个列表型参数），设定指定图形参数的值，并将参数的原始值作为一个列表返回。<br> 所以如果想设定参数绘制一些图形后再恢复成原来的设定，可以这么做：<br> &gt; oldpar &lt;- par(col=4, lty=2) <br> . . . plotting commands . . . <br> &gt; par(oldpar)<br> 2 临时性变更：图形函数的参数<br> 图形参数也可以作为（几乎）所有图形函数的命名参数。这种方式的效果和用于par()函数的效果是一样的，只不过这种改变只在函数调用的区间内有效。比如：<br> &gt; plot(x, y, pch="+")<br> 生成一个以加号作为绘图符号的散点图，而不改变后续图形的默认的绘图符号。<br> 3 图形参数列表<br> A  图形元素<br> R图表由点、线、文本和多边形（填充区）组成。下面的图形参数控制了图形元素的绘制：<br> pch="+" 用来绘点的字符。这个默认值随不同的图形驱动是不同的，不过通常都是'±'。除非使用"."作为绘图字符，否则绘制的点都会比适当的位置高一点或者低一点，而不是恰好在指定位置。<br> pch=4当给定一个0到18的整数时，会生成一个特殊的绘图符号。通过下面的命令可以看这些符号都有什么。<br> &gt; legend(locator(1), as.character(0:18), pch=0:18)<br> lty=2 线条类型。并不是所有图形设备都支持多种线条类型（在那些支持的设<br> 备上也不全一样），不过线条类型1始终是实线，2及以上的是点、划线或者它们的组合。<br> lwd=2 线条宽度。所需的线条宽度，是"标准"线条宽度的倍数。对line()等函数绘制的线条和坐标轴都有效果。<br> col=2 点、线、文本、填充区和图像使用的颜色。每种图形元素都有其可用的颜色列表，这个参数的值就是颜色在列表中的序号。显然，这个参数值对有限的一类设备有效。<br> font=2 指定文本所使用字体的一个整数。如果可能的话，设备驱动会把1对应普通文本，2对应粗体，3对应斜体，4对应粗斜体。<br> font.axis   font.lab    font.main   font.sub 这几个参数分别指定坐标轴注释，x,y轴的标签，主、副标题所用的字体。<br> adj=-0.1 文本对齐和绘图位置有关。0代表左对齐，1代表右对齐，0.5代表水平的中间位置。当前的值使会图位置到左端距离的比例，所以-0.1在文本和绘图位置之间留10%的空白。<br> cex=1.5 字符缩放。这个值是所需文本字符（包括绘图字符）的大小，与默认文本大小相关。<br> B  坐标轴和标记<br> 很多R的高级图形都有坐标轴，你可以使用低级图形函数axis()自己创建坐标轴。坐标轴包含三个主要组件：轴线axis line（线条类型由参数lty控制），标记tick mark（沿着轴线划分单元），标号tick label（用来标出这些单元）。这些组件可以用下面这些参数定制。<br> lab=c(5,7,12)前两个数字分别是x和y轴上所要划分的区间数。第三个数字是坐标轴标签的长度，用字符数来衡量（包括小数点）。参数的值如果选得太小可能导致所有标号都聚在一起。<br> las=1 坐标轴标签的方向。0代表总是和坐标轴平行，1代表总是水平的，2代表总是垂直于坐标轴。<br> mgp=c(3,1,0)坐标轴组件的位置。第一个组件是坐标轴标签到坐标轴的距离，单位是文本行(text lines)。第二个组件是到标号的距离，最后一个是轴的巍直到轴线的距离（一般都是0）。正数代表绘图区域外，负数代表区域内。<br> tck=0.01 标号的长度，绘图区域大小的一个分数作单位。当tck比较小时（小于0.5），就强制x和y轴上的标记为相同大小。tck=1就是生成网格线。取负值时标记画向绘图区域外。内部标记可以使用tck=0.01和mgp=c(1,-1.5,0)。<br> xaxs="s"   yaxs="d" 分别是x、y轴的类型。如果是s(standard)或e(extended)类型，那最大和最小的标记都始终在数据区域之外。如果有某个点离边界非常近，那么扩展型(extended)的轴会稍稍扩展一下。这种类型的轴有时会在边界附近留出大片空白。而i(internal)或r(默认值)类型的轴，标记始终在数据区域内，不过r类型会在边界留出少量空白。<br> 如果这个参数设为d，就锁定当前轴，对之后绘制的所有图形都用这个轴（直到参数被重新设定为其他的那几个值）。这个参数适用于生成一系列固定尺度的图。<br> C  图边缘（Figure margins）<br> 在R中一个单独图形，图（figure），包含一个绘图区(plot region)，以及环绕着这个区域的边缘（其中可能含有坐标轴标签、标题等等），（通常）这两部分以轴为边界。<br> 一个典型的图是<br> <br> <br> 控制图的样式的图形参数包括：<br> mai=c(1,0.5,0.5,0)分别是底部，左侧，顶部，右侧的宽度，单位是英寸。<br> mar=c(4,2,2,1)与mai相似，只是单位是文本行(text lines)。<br> 由于更改一个就会改变另一个的值，所以在这个意义上，mai和mar是等价的。这个参数的默认值通常都太大了；右侧边缘很少用到，如果没标题，顶部边缘也不需要，左侧和底部的边缘应当足够大，以容纳坐标轴和标号。此外，默认值并没有考虑到设备表面的大小：比如，使用postscript()驱动，height=4参数时，除非用mar，mai另外设定，否则图的边缘就要占上大约50%。使用多图环境时（后面会提到）。边缘会减少一半，不过这在多图共用一页的时候可能还不够。<br> D 多图环境<br> R允许在一页上创建一个n£m的图的阵列。每个图由自己的边缘，图的阵列还有一个可选的外部边缘，如下图所示。<br> <br> <br> 与多图环境相关的图形参数有：<br> mfcol=c(3, 2)    mfrow=c(2, 4)<br>    设定多图阵列的大小。第一个值是行数，第二个值是列数。这两个参数唯一的区别是mfcol把图按列排入，mfrow把图按行排入。上图所示的版式可用mfrow=c(3,2)创建；上图显示的是绘制四幅图后的情况。<br> mfg=c(2, 2, 3, 2)<br>     当前图在多图环境下的位置。前两个数字是当前图的行、列数；后两个是其在多图阵列中的行列数。这个参数用来在多图阵列中跳转。你甚至可以在后两个数中使用和真值(true value)不同的值，在同一页上得到大小不同的图。<br> fig=c(4, 9, 1, 4)/10<br>     当前图在页面的位置，取值分别是左下角到左边界，右边界，下、上边界的距离与对应边的百分比数。给出的例子是一个页面右下角的图。这个参数可以设定图在页面的绝对位置。<br> oma=c(2, 0, 3, 0)   omi=(0, 0, 0.8, 0)  <br>        外部边缘的大小。与mar和mai相似，第一个用文本行作单位，第二个以英寸作单位，从下方开始按照顺时针顺序指定。<br> 外部边缘对页标题这类东西很有用。文本可以通过带outer=TRUE参数的mtext()函数加入外部边缘。默认情况下是没有外部边缘的因此必须通过oma或omi指定。<br> 函数split.screen()和layout()可以对多个图形作更复杂的排列。<br> 12.6 设备驱动<br> R几乎可以在任何一种类型的显示器和打印设备上生成（不同质量的）图形。不过，在这之前，需要告诉R要处理的是哪一种设备。这通过启动一个设备驱动来完成。<br> 设备驱动通过调用设备驱动函数来启动。<br> 某些常用的设备驱动有：<br> X11()[Unix] 使用X11视窗系统<br> windows()[Windows]   使用 Windows 视窗系统 <br> postscript()在PostScript打印机上打印或者创建PostScript图形文件<br> pictex()生成一个LATEX文件<br> 当一个设备使用完之后，可以通过下面的命令终止设备驱动<br> &gt; dev.off()<br> 这个命令可以确保设备已经结束；例如，在某些硬拷贝的设备中，这个命令可以保证每页都已经完成，并且都被传送到打印机了。<br> PostScript文档<br> 通过给postscript()函数带上file参数，我们可以把图形以PostScript格式存储到文件中。如果没有给出horizontal=FALSE参数，图形是横向的，你可以通过width和height参数控制图形的大小（图形会自动适应）。例如，命令<br> &gt; postscript("file.ps", horizontal=FALSE, height=5, pointsize=10)<br> 为一个五英寸的图生成一个包含PostScript代码的文件，可以放在文当中。如果命令中的指定的文件名已经存在，将会被覆盖。<br> 多重图形设备<br> 每个对设备驱动的新调用都会打开一个新的图形设备，在设备列表中加入新的一项。这个设备就成为当前设备，图形输出就传送到这个设备。<br> dev.list()      返回所有活动中设备的序号和名称。在列表位置1的设备始终是空设备(null device)，这个设备不接收任何图形命令。<br> dev.next()    dev.prev()     分别返回当前设备的后一个和前一个设备的序号和名称。<br> dev.set(which=k)     用来把当前设备更改为设备列表中位置k的那个。返回设备的序号和标签。<br> dev.off(k)    终止图形列表位置k的那个图形设备。对于某些设备，比如postscript，这个命令会立刻打印文件或者正常结束文件，具体怎样处理取决于设备是怎样初始化的。<br> dev.copy(device,. . . ,which=k)      dev.print(device,. . . ,which=k)<br> 建立一个设备k的拷贝。其中device是一个设备函数，例如postscript，如果需要的话可以在'. . . '中指定其它的参数，dev.print效果相似，不过复制的设备会立刻关闭，所以打印硬拷贝这样的终止操作也会被立即执行。<br> </span> 
<p><span style="font-size:18px">graphics.off()      终止列表中的所有图形设备，空设备除外。</span></p> 
<p><span style="font-size:18px"><br> </span></p> 
<p><span style="font-size:18px">转自：<a target="_blank" href="http://blog.sina.com.cn/s/blog_6a02b6330101abn5.html" rel="nofollow noopener noreferrer">http://blog.sina.com.cn/s/blog_6a02b6330101abn5.html</a></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/84d993e30d1d1916f8390ee487e748ad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">简述GRASP设计原则</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b2836917a83406e09cd95463c33a0685/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">three.js 源码注释（四）Math/Vector3.js</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>