<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>汇编反汇编 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="汇编反汇编" />
<meta property="og:description" content="Linux与windows汇编的区别 Linux下的汇编与Windows汇编最大的不同就是第一个操作数是原操作数，第二个是目的操作数，而Windows下却是相反。
基本操作指令 操作数类型：
1. 立即数操作数，也就是常数值。立即数的书写方式是“$”后面跟一个整数，比如$0x1F，这个会在后面的具体分析中见到很多。
2. 寄存器操作数，它表示某个寄存器的内容，用符号Ea来表示任意寄存器a，用引用R[Ea]来表示它的值，这是将寄存器集合看成一个数组R，用寄存器表示符作为索引。
3. 操作数是存储器引用，它会根据计算出来的地址（通常称为有效地址）访问某个存储器位置。用符号Mb[Addr]表示对存储在存储器中从地址Addr开始的b字节值的引用。通常可以省略下标b。
下面表格表示多种不同的寻址模式：
操作数类型
格式
操作数值
名称
立即数
$Imm
Imm
立即数寻址
寄存器
Ea
R[Ea]
寄存器寻址
寄存器
Imm
M[Imm]
绝对寻址
寄存器
(Ea)
M[R[Ea]]
间接寻址
寄存器
Imm(Eb)
M[Imm&#43;R[Eb]]
（基址&#43;偏移量）寻址
寄存器
(Eb,Ei)
M[R[Eb]&#43;R[Ei]]
变址寻址
寄存器
M[Imm&#43;R[Eb]&#43;R[Ei]]
寄存器
(,Ei, s)
M[R[Ei] * s]
伸缩化的变址寻址
寄存器
Imm(,Ei, s)
M[Imm&#43;R[Ei] * s]]
伸缩化的变址寻址
寄存器
(Eb,Ei, s)
M[R[Eb]&#43;R[Ei] * s]
伸缩化的变址寻址
寄存器
Imm(Eb,Ei, s)
M[Imm&#43;R[Eb]&#43;R[Ei] * s]
伸缩化的变址寻址" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/26cf2c3b715adfb7881a9284a8d9e12f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-06-04T10:27:44+08:00" />
<meta property="article:modified_time" content="2013-06-04T10:27:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">汇编反汇编</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="font-family:Calibri; font-size:32px">Linux</span>与<span style="font-family:Calibri">windows</span>汇编的区别</h2> 
<p><span style="font-family:Calibri; font-size:14px">Linux</span>下的汇编与<span style="font-family:Calibri">Windows</span>汇编最大的不同就是第一个操作数是原操作数，第二个是目的操作数，而<span style="font-family:Calibri">Windows</span>下却是相反。</p> 
<h2><span style="font-size:32px">基本操作指令</span></h2> 
<p><span style="font-size:14px">操作数类型：</span></p> 
<p><span style="font-family:Calibri; font-size:14px">1.</span>      <span style="font-size:14px">立即数操作数，也就是常数值。立即数的书写方式是“<span style="font-family:Calibri">$</span>”后面跟一个整数，比如<span style="font-family:Calibri">$0x1F</span>，这个会在后面的具体分析中见到很多。</span></p> 
<p><span style="font-family:Calibri; font-size:14px">2.</span>      <span style="font-size:14px">寄存器操作数，它表示某个寄存器的内容，用符号<span style="font-family:Calibri">Ea</span>来表示任意寄存器<span style="font-family:Calibri">a</span>，用引用<span style="font-family:Calibri">R[Ea]</span>来表示它的值，这是将寄存器集合看成一个数组<span style="font-family:Calibri">R</span>，用寄存器表示符作为索引。</span></p> 
<p><span style="font-family:Calibri; font-size:14px">3.</span>      <span style="font-size:14px">操作数是存储器引用，它会根据计算出来的地址（通常称为有效地址）访问某个存储器位置。用符号<span style="font-family:Calibri">Mb[Addr]</span>表示对存储在存储器中从地址<span style="font-family:Calibri">Addr</span>开始的<span style="font-family:Calibri">b</span>字节值的引用。通常可以省略下标<span style="font-family:Calibri">b</span>。</span></p> 
<p><span style="font-size:14px">下面表格表示多种不同的寻址模式：</span></p> 
<table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td> <p><span style="font-size:14px">操作数类型</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-size:14px">格式</span></p> </td><td> <p><span style="font-size:14px">操作数值</span></p> </td><td> <p><span style="font-size:14px">名称</span></p> </td></tr><tr><td> <p><span style="font-size:14px">立即数</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">$Imm</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">Imm</span></p> </td><td> <p><span style="font-size:14px">立即数寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">Ea</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">R[Ea]</span></p> </td><td> <p><span style="font-size:14px">寄存器寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">Imm</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[Imm]</span></p> </td><td> <p><span style="font-size:14px">绝对寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">(Ea)</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[R[Ea]]</span></p> </td><td> <p><span style="font-size:14px">间接寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">   Imm(Eb)</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[Imm+R[Eb]]</span></p> </td><td> <p><span style="font-size:14px">（基址<span style="font-family:Calibri">+</span>偏移量）寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">   (Eb,Ei)</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[R[Eb]+R[Ei]]</span></p> </td><td> <p><span style="font-size:14px">变址寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[Imm+R[Eb]+R[Ei]]</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">(,Ei, s)</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[R[Ei] * s]</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-size:14px">伸缩化的变址寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">Imm(,Ei, s)</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[Imm+R[Ei] * s]]</span></p> </td><td> <p><span style="font-size:14px">伸缩化的变址寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">(Eb,Ei, s)</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[R[Eb]+R[Ei] * s]</span></p> </td><td> <p><span style="font-size:14px">伸缩化的变址寻址</span></p> </td></tr><tr><td> <p><span style="font-size:14px">寄存器</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">Imm(Eb,Ei, s)</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">M[Imm+R[Eb]+R[Ei] * s]</span></p> </td><td> <p><span style="font-size:14px">伸缩化的变址寻址</span></p> </td></tr></tbody></table> 
<p><span style="font-size:14px">注：操作数可以是立即数值、寄存器值或是来自存储器的值，伸缩因子必须是<span style="font-family:Calibri">1</span>、<span style="font-family:Calibri">2</span>、<span style="font-family:Calibri">4</span>、或者是<span style="font-family:Calibri">8</span>。</span></p> 
<h3><span style="font-size:24px">数据传送指令</span></h3> 
<p><span style="font-size:14px">在操作指令中，最频繁使用的指令是执行数据传送的指令。传送指令的两个操作数不能都指向存储器位置。将一个值从一个存储器位置拷到另一个存储器位置需要两条指令——第一条指令将源值加载到寄存器中，第二条将该寄存器值写入到目的位置。</span></p> 
<p><span style="font-size:14px">下面为五种传送指令：</span></p> 
<p><span style="font-size:14px">指令<span style="font-family:Calibri">                                                                           </span>意义</span></p> 
<p><span style="font-family:Calibri">movl $0x4050,  %eax               </span>立即数——寄存器<span style="font-family:Calibri"> </span></p> 
<p><span style="font-family:Calibri">movl  %ebp,  %esp                     </span> 寄存器——寄存器<span style="font-family:Calibri"> </span></p> 
<p><span style="font-family:Calibri">movl  </span>（<span style="font-family:Calibri">%edi, %ecx</span>）<span style="font-family:Calibri">,  %eax         </span>存储器——寄存器</p> 
<p><span style="font-family:Calibri">movl  $-17,  (%esp)                       </span> 立即数——存储器</p> 
<p><span style="font-family:Calibri; font-size:14px">movl  %eax, -12(%ebp)                               </span>寄存器——存储器</p> 
<p><span style="font-size:14px">常用指令：</span></p> 
<table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td> <p>指令</p> </td><td> <p>效果</p> </td><td> <p>描述</p> </td></tr><tr><td> <p><span style="font-family:Calibri">movl   S,   D</span></p> </td><td> <p><span style="font-family:Calibri">D ←S</span></p> </td><td> <p>传送双字</p> <p><span style="font-family:Calibri"> </span></p> </td></tr><tr><td> <p><span style="font-family:Calibri">movl   S,   D</span></p> <p><span style="font-family:Calibri"> </span></p> </td><td> <p><span style="font-family:Calibri">D ←S</span></p> </td><td> <p>传送字</p> </td></tr><tr><td> <p><span style="font-family:Calibri">movl   S,   D</span></p> <p><span style="font-family:Calibri"> </span></p> </td><td> <p><span style="font-family:Calibri">D ←S</span></p> </td><td> <p>传送字节</p> </td></tr><tr><td> <p><span style="font-family:Calibri">movl   S,   D</span></p> <p><span style="font-family:Calibri"> </span></p> </td><td> <p><span style="font-family:Calibri">D ←</span>符号扩展（<span style="font-family:Calibri">S</span>）</p> </td><td> <p>传送符号扩展的字节</p> </td></tr><tr><td> <p><span style="font-family:Calibri">movl   S,   D</span></p> <p><span style="font-family:Calibri"> </span></p> </td><td> <p><span style="font-family:Calibri">D ←</span>零扩展（<span style="font-family:Calibri">S</span>）</p> </td><td> <p>传送零扩展的字节</p> </td></tr><tr><td> <p><span style="font-family:Calibri">pushl   S</span></p> <p><span style="font-family:Calibri"> </span></p> </td><td> <p><span style="font-family:Calibri">R[%esp] ←  R[%esp] – 4;</span></p> <p><span style="font-family:Calibri">M[R[%esp]] ← S</span></p> </td><td> <p>压栈</p> </td></tr><tr><td> <p><span style="font-family:Calibri">popl    D</span></p> <p><span style="font-family:Calibri"> </span></p> </td><td> <p><span style="font-family:Calibri">D ← M[R[%esp]];</span></p> <p><span style="font-family:Calibri">R[%esp] ←  R[%esp] + 4</span></p> </td><td> <p>出栈</p> </td></tr></tbody></table> 
<h2><span style="font-size:32px">算术和逻辑操作</span></h2> 
<p><span style="font-size:14px">加载有效地址（<span style="font-family:Calibri">Load EffectiveAddress</span>）指令<span style="font-family:Calibri">lea</span>实际上是<span style="font-family:Calibri">mov</span>指令的变形，因为<span style="font-family:Calibri">mov</span>不能够直接对两个存储器操作数，，指令将有效地址写入到目的操作数（如寄存器）。</span></p> 
<p>整数算术操作：</p> 
<table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td> <p><span style="font-size:14px">指令</span></p> </td><td> <p><span style="font-size:14px">效果</span></p> </td><td> <p><span style="font-size:14px">描述</span></p> </td></tr><tr><td> <p><span style="font-family:Calibri; font-size:14px">leal     S , D</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">D ← &amp;S</span></p> </td><td> <p><span style="font-size:14px">加载有效地址</span></p> </td></tr><tr><td> <p><span style="font-family:Calibri; font-size:14px">incl     D</span></p> <p><span style="font-family:Calibri; font-size:14px">decl     D</span></p> <p><span style="font-family:Calibri; font-size:14px">negl     D</span></p> <p><span style="font-family:Calibri; font-size:14px">notl     D</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">D ←  D + 1</span></p> <p><span style="font-family:Calibri; font-size:14px">D ←  D-1</span></p> <p><span style="font-family:Calibri; font-size:14px">D ←  -D</span></p> <p><span style="font-family:Calibri; font-size:14px">D ←  ~D</span></p> </td><td> <p><span style="font-size:14px">加<span style="font-family:Calibri"> 1</span></span></p> <p><span style="font-size:14px">减<span style="font-family:Calibri"> 1</span></span></p> <p><span style="font-size:14px">取负</span></p> <p><span style="font-size:14px">取补</span></p> <p><span style="font-family:Calibri; font-size:14px"> </span></p> </td></tr><tr><td> <p><span style="font-family:Calibri; font-size:14px">addl     S , D</span></p> <p><span style="font-family:Calibri; font-size:14px">subl     S , D</span></p> <p><span style="font-family:Calibri; font-size:14px">iImull    S , D</span></p> <p><span style="font-family:Calibri; font-size:14px">xorl     S , D</span></p> <p><span style="font-family:Calibri; font-size:14px">orl      S , D</span></p> <p><span style="font-family:Calibri; font-size:14px">and     S , D</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">D ← D  +  S</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  -  S</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  *  S</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  ^  S</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  |  S</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  &amp;   S</span></p> </td><td> <p><span style="font-size:14px">加法</span></p> <p><span style="font-size:14px">减法</span></p> <p><span style="font-size:14px">乘法</span></p> <p><span style="font-size:14px">异或</span></p> <p><span style="font-size:14px">或</span></p> <p><span style="font-size:14px">与</span></p> </td></tr><tr><td> <p><span style="font-family:Calibri; font-size:14px">sall      k , D</span></p> <p><span style="font-family:Calibri; font-size:14px">shll      k , D</span></p> <p><span style="font-family:Calibri; font-size:14px">sarl      k , D</span></p> <p><span style="font-family:Calibri; font-size:14px">shrl     k , D</span></p> </td><td> <p><span style="font-family:Calibri; font-size:14px">D ← D  &lt;&lt; k</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  &lt;&lt; k</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  &gt;&gt; k</span></p> <p><span style="font-family:Calibri; font-size:14px">D ← D  &gt;&gt; k</span></p> </td><td> <p><span style="font-size:14px">算术左移</span></p> <p><span style="font-size:14px">逻辑左移（等同于<span style="font-family:Calibri">sal</span>）</span></p> <p><span style="font-size:14px">算术右移（符号位扩展）</span></p> <p><span style="font-size:14px">逻辑右移<span style="font-family:Calibri">  </span>（<span style="font-family:Calibri">0</span>扩展）</span></p> </td></tr></tbody></table> 
<h3><span style="font-family:Cambria; font-size:24px">C</span>函数的汇编例子<span style="font-family:Cambria">:</span></h3> 
<p>intshiftlr(int x, int n)</p> 
<p>{<!-- --></p> 
<p>    x &lt;&lt;= 2;</p> 
<p>    x &gt;&gt;= n;</p> 
<p>    return x;</p> 
<p>}</p> 
<p><span style="font-size:14px">其<span style="font-family:Calibri">Linux</span>下反汇编代码为：</span></p> 
<p>0x080483c4&lt;shiftlr+0&gt;:   push  %ebp</p> 
<p>0x080483c5&lt;shiftlr+1&gt;:   mov  %esp,%ebp</p> 
<p>0x080483c7&lt;shiftlr+3&gt;:   shll   $0x2,0x8(%ebp)</p> 
<p>0x080483cb&lt;shiftlr+7&gt;:   mov  0xc(%ebp),%ecx</p> 
<p>0x080483ce&lt;shiftlr+10&gt;:        sarl   %cl,0x8(%ebp)</p> 
<p>0x080483d1&lt;shiftlr+13&gt;: mov  0x8(%ebp),%eax</p> 
<p>0x080483d4&lt;shiftlr+16&gt;: pop   %ebp</p> 
<p>0x080483d5&lt;shiftlr+17&gt;: ret <span style="font-family:Calibri">   </span></p> 
<p><span style="font-family:Calibri"></span> </p> 
<p><span style="font-family:Calibri">（未完）</span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f3d21d967bbef85a2f6d45e516517006/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决MySQL错误reading initial communication packet_MySQL的两种方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4bb7b1b3ccf5518731ad24ffc5fe6ecf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">正确使用Block避免Cycle Retain和Crash</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>