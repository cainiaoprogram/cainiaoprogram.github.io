<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenCV学习笔记（二）——颜色空间（不同颜色空间转换函数cv.cvtColor()、多通道分离函数cv.split()、多通道合并函数cv.merge()） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenCV学习笔记（二）——颜色空间（不同颜色空间转换函数cv.cvtColor()、多通道分离函数cv.split()、多通道合并函数cv.merge()）" />
<meta property="og:description" content="目录 颜色空间1 常用颜色空间介绍1.1 RGB 颜色空间1.2 YUV 颜色空间1.3 HSV 颜色空间1.4 Lab 颜色空间1.5 GRAY 颜色空间 2 颜色空间转换函数cv.cvtColor()3 图像通道的分离与合并3.1 多通道分离函数cv.split()3.2 多通道合并函数cv.merge()3.3 图像多通道合并函数和分离函数 颜色空间 颜色空间也称彩色模型(又称彩色空间或彩色系统）它的用途是在某些标准下用通常可接受的方式对彩色加以说明。
RGB颜色空间是较常见的一种颜色空间，它通过红、绿、蓝3种颜色混合能够展示各种颜色，常用于显示和表示图像。了解图像的颜色空间对于分割拥有特征的图像具有重要的意义，例如提取像素中 的红色物体可以通过比较图像红色通道的像素值来实现。
1 常用颜色空间介绍 1.1 RGB 颜色空间 RGB 颜色空间的名称是由红色（Red）、绿色（Green）、蓝色（Blue）三种颜色的英文首字母组成。RGB 颜色空间模型如下图所示。
3个通道对于颜色描述的范围都是相同的（0-255），RGB 颜色空间中的所有颜色都是通过这三种颜色通过不同比例混合得到的。如果3个颜色分量都为0则表示黑色，如果三个颜色分量都为255，则表示白色。在 RGB 颜色空间的基础上增加第四个通道 Alpha （表示颜色的透明度），就会形成 RGBA 颜色空间。
RGB 颜色空间适合于显示系统，却并不适合于图像处理。
人眼对于这三种颜色分量的敏感程度是不一样的，在单色中，人眼对红色最不敏感，蓝色最敏感，所以 RGB 颜色空间是一种均匀性较差的颜色空间。如果颜色的相似性直接用欧氏距离来度量，其结果与人眼视觉会有较大的偏差。对于某一种颜色，我们很难推测出较为精确的三个分量数值来表示。因此 RGB 颜色空间的均匀性非常差，且两种颜色之间的知觉差异色差不能表示为该颜色空间中两点间的距离，但是利用线性或非线性变换，则可以从 RGB 颜色空间推导出其他的颜色特征空间。
1.2 YUV 颜色空间 YUV 是通过亮度-色差来描述颜色的颜色空间，是电视信号系统常用的颜色编码方式，这3个变量分别表示的是图像的亮度（Y）、红色分量与亮度的信号差值（U）、蓝色分量与亮度的信号差值（V）。这种颜色主要用于视频和图像的传输，YUV 颜色空间的产生与电视机的发展例程密切相关。RGB 颜色空间与 YUV 颜色空间的转换关系如下。
{ Y = 0.299 R &#43; 0.587 G &#43; 0.114 B U = − 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3df18eb22c35e93b842a72e8bbc8852a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-22T22:53:30+08:00" />
<meta property="article:modified_time" content="2022-04-22T22:53:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenCV学习笔记（二）——颜色空间（不同颜色空间转换函数cv.cvtColor()、多通道分离函数cv.split()、多通道合并函数cv.merge()）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">颜色空间</a></li><li><a href="#1__4" rel="nofollow">1 常用颜色空间介绍</a></li><li><ul><li><a href="#11_RGB__5" rel="nofollow">1.1 RGB 颜色空间</a></li><li><a href="#12_YUV__10" rel="nofollow">1.2 YUV 颜色空间</a></li><li><a href="#13_HSV__26" rel="nofollow">1.3 HSV 颜色空间</a></li><li><a href="#14_Lab__31" rel="nofollow">1.4 Lab 颜色空间</a></li><li><a href="#15_GRAY__35" rel="nofollow">1.5 GRAY 颜色空间</a></li></ul> 
  </li><li><a href="#2_cvcvtColor_40" rel="nofollow">2 颜色空间转换函数cv.cvtColor()</a></li><li><a href="#3__113" rel="nofollow">3 图像通道的分离与合并</a></li><li><ul><li><a href="#31_cvsplit_115" rel="nofollow">3.1 多通道分离函数cv.split()</a></li><li><a href="#32_cvmerge_124" rel="nofollow">3.2 多通道合并函数cv.merge()</a></li><li><a href="#33__134" rel="nofollow">3.3 图像多通道合并函数和分离函数</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>颜色空间</h2> 
<p>颜色空间也称彩色模型(又称彩色空间或彩色系统）它的用途是在某些标准下用通常可接受的方式对彩色加以说明。<br> RGB颜色空间是较常见的一种颜色空间，它通过红、绿、蓝3种颜色混合能够展示各种颜色，常用于显示和表示图像。了解图像的颜色空间对于分割拥有特征的图像具有重要的意义，例如提取像素中 的红色物体可以通过比较图像红色通道的像素值来实现。</p> 
<h2><a id="1__4"></a>1 常用颜色空间介绍</h2> 
<h3><a id="11_RGB__5"></a>1.1 RGB 颜色空间</h3> 
<p>RGB 颜色空间的名称是由红色（Red）、绿色（Green）、蓝色（Blue）三种颜色的英文首字母组成。RGB 颜色空间模型如下图所示。<img src="https://images2.imgbox.com/4f/48/fh4BZ6hE_o.png" alt="在这里插入图片描述"><br> 3个通道对于颜色描述的范围都是相同的（0-255），RGB 颜色空间中的所有颜色都是通过这三种颜色通过不同比例混合得到的。如果3个颜色分量都为0则表示黑色，如果三个颜色分量都为255，则表示白色。在 RGB 颜色空间的基础上增加第四个通道 Alpha <mark>（表示颜色的透明度）</mark>，就会形成 RGBA 颜色空间。<br> RGB 颜色空间适合于显示系统，<strong>却并不适合于图像处理</strong>。<br> 人眼对于这三种颜色分量的敏感程度是不一样的，在单色中，人眼对红色最不敏感，蓝色最敏感，所以 RGB 颜色空间是一种均匀性较差的颜色空间。如果颜色的相似性直接用欧氏距离来度量，其结果与人眼视觉会有较大的偏差。对于某一种颜色，我们很难推测出较为精确的三个分量数值来表示。因此 RGB 颜色空间的均匀性非常差，且两种颜色之间的知觉差异色差不能表示为该颜色空间中两点间的距离，但是利用线性或非线性变换，则可以从 RGB 颜色空间推导出其他的颜色特征空间。</p> 
<h3><a id="12_YUV__10"></a>1.2 YUV 颜色空间</h3> 
<p>YUV 是通过<mark>亮度-色差</mark>来描述颜色的颜色空间，是电视信号系统常用的颜色编码方式，这3个变量分别表示的是图像的亮度（Y）、红色分量与亮度的信号差值（U）、蓝色分量与亮度的信号差值（V）。这种颜色主要用于视频和图像的传输，YUV 颜色空间的产生与电视机的发展例程密切相关。RGB 颜色空间与 YUV 颜色空间的转换关系如下。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
           
            
           
          
          
           
            
             
             
             
               { 
              
              
               
                
                 
                  
                  
                    Y 
                   
                  
                    = 
                   
                  
                    0.299 
                   
                  
                    R 
                   
                  
                    + 
                   
                  
                    0.587 
                   
                  
                    G 
                   
                  
                    + 
                   
                  
                    0.114 
                   
                  
                    B 
                   
                  
                 
                
               
               
                
                 
                  
                  
                    U 
                   
                  
                    = 
                   
                  
                    − 
                   
                  
                    0.147 
                   
                  
                    R 
                   
                  
                    − 
                   
                  
                    0.289 
                   
                  
                    G 
                   
                  
                    + 
                   
                  
                    0.436 
                   
                  
                    B 
                   
                  
                 
                
               
               
                
                 
                  
                  
                    V 
                   
                  
                    = 
                   
                  
                    0.615 
                   
                  
                    R 
                   
                  
                    − 
                   
                  
                    0.515 
                   
                  
                    G 
                   
                  
                    − 
                   
                  
                    0.100 
                   
                  
                    B 
                   
                  
                 
                
               
              
             
            
           
          
         
         
          
           
            
           
          
          
           
            
             
             
             
               { 
              
              
               
                
                 
                  
                  
                    R 
                   
                  
                    = 
                   
                  
                    Y 
                   
                  
                    + 
                   
                  
                    1.14 
                   
                  
                    V 
                   
                  
                 
                
               
               
                
                 
                  
                  
                    G 
                   
                  
                    = 
                   
                  
                    Y 
                   
                  
                    − 
                   
                  
                    0.39 
                   
                  
                    U 
                   
                  
                    − 
                   
                  
                    0.58 
                   
                  
                    V 
                   
                  
                 
                
               
               
                
                 
                  
                  
                    B 
                   
                  
                    = 
                   
                  
                    Y 
                   
                  
                    + 
                   
                  
                    2.03 
                   
                  
                    U 
                   
                  
                 
                
               
              
             
            
           
          
         
        
       
         \begin{aligned} &amp;\left\{\begin{array}{l} Y=0.299 R+0.587 G+0.114 B \\ U=-0.147 R-0.289 G+0.436 B \\ V=0.615 R-0.515 G-0.100 B \end{array}\right. \\ &amp;\left\{\begin{array}{l} R=Y+1.14 V \\ G=Y-0.39 U-0.58 V \\ B=Y+2.03 U \end{array}\right. \end{aligned} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 7.80008em; vertical-align: -3.65004em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 4.15004em;"><span class="" style="top: -6.15004em;"><span class="pstrut" style="height: 4.05002em;"></span><span class="mord"></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 4.05002em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 3.65004em;"><span class=""></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 4.15004em;"><span class="" style="top: -6.15004em;"><span class="pstrut" style="height: 4.05002em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05002em;"><span class="" style="top: -2.49999em;"><span class="pstrut" style="height: 3.15em;"></span><span class="delimsizinginner delim-size4"><span class="">⎩</span></span></span><span class="" style="top: -3.15001em;"><span class="pstrut" style="height: 3.15em;"></span><span class="delimsizinginner delim-size4"><span class="">⎨</span></span></span><span class="" style="top: -4.30002em;"><span class="pstrut" style="height: 3.15em;"></span><span class="delimsizinginner delim-size4"><span class="">⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55002em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05em;"><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">9</span><span class="mord">9</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mord">8</span><span class="mord">7</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">1</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">−</span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">4</span><span class="mord">7</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">2</span><span class="mord">8</span><span class="mord">9</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">4</span><span class="mord">3</span><span class="mord">6</span><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.22222em;">V</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">6</span><span class="mord">1</span><span class="mord">5</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mord">1</span><span class="mord">5</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span></span></span><span class="mclose nulldelimiter"></span></span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 4.05002em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right: 0.166667em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05002em;"><span class="" style="top: -2.49999em;"><span class="pstrut" style="height: 3.15em;"></span><span class="delimsizinginner delim-size4"><span class="">⎩</span></span></span><span class="" style="top: -3.15001em;"><span class="pstrut" style="height: 3.15em;"></span><span class="delimsizinginner delim-size4"><span class="">⎨</span></span></span><span class="" style="top: -4.30002em;"><span class="pstrut" style="height: 3.15em;"></span><span class="delimsizinginner delim-size4"><span class="">⎧</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55002em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="arraycolsep" style="width: 0.5em;"></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 2.05em;"><span class="" style="top: -4.21em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">1</span><span class="mord">4</span><span class="mord mathdefault" style="margin-right: 0.22222em;">V</span></span></span><span class="" style="top: -3.01em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault">G</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord">9</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mord">8</span><span class="mord mathdefault" style="margin-right: 0.22222em;">V</span></span></span><span class="" style="top: -1.81em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mord">2</span><span class="mord">.</span><span class="mord">0</span><span class="mord">3</span><span class="mord mathdefault" style="margin-right: 0.10903em;">U</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.55em;"><span class=""></span></span></span></span></span><span class="arraycolsep" style="width: 0.5em;"></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 3.65004em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></p> 
<h3><a id="13_HSV__26"></a>1.3 HSV 颜色空间</h3> 
<p>HSV 是由色调（Hue）、饱和度（Saturation）、和亮度（Value）这三个英文单词的首字母组成的。色调是色彩的基本属性，可以表示为0° ~ 360°的圆心角；饱和度是指颜色的纯度，饱和度越高，颜色越纯越鲜艳，随着饱和度降低，色彩逐渐变灰、变暗，饱和度的取值范围是0 ~ 1 ；亮度是指颜色的明亮程度，其取值范围为0到计算机中运行的最大亮度值。<br> <strong>在图像处理中使用较多的是 HSV 颜色空间</strong>，它比 RGB 更接近人们对彩色的感知经验。非常直观地表达颜色的色调、鲜艳程度和明暗程度，方便进行颜色的对比。在 HSV 颜色空间下，比在 RGB 颜色空间下 更容易跟踪某种颜色的物体，常用于分割指定颜色的物体。HSV 颜色空间模型如下图所示。<br> <img src="https://images2.imgbox.com/90/19/fv3aXuN9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="14_Lab__31"></a>1.4 Lab 颜色空间</h3> 
<p>Lab 颜色空间弥补了 RGB 和 CMYK 两种颜色空间的不足。它是一种设备无关的颜色模型，也是一种基于生理特征的颜色模型。Lab 颜色模型由三个要素组成，一个要素是亮度（L），a 和b是两个颜色通道。a包括的颜色是从深绿色（低亮度值）到灰色（中亮度值）再到亮粉红色（高亮度值）；b是从亮蓝色（低亮度值）到灰色（中亮度值）再到黄色（高亮度值）。因此，这种颜色混合后将产生具有明亮效果的色彩。Lab 颜色空间模型如下图所示。<br> <img src="https://images2.imgbox.com/41/f3/D39ZtzYw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="15_GRAY__35"></a>1.5 GRAY 颜色空间</h3> 
<p>GRAY 颜色空间是一个关于灰度图像的颜色空间。灰度图像只有1个通道，灰度值根据图像位数由0到最大灰度值依此表示由黑到白。例如在 8UC1 格式中，由黑到白被量化成256个等级，通过0~255的整数来表示，其中255表示白色。灰度图像具有在相同尺寸和相同压缩格式下所占空间小、易于采集和便于传输等优点。常用的 RGB 颜色空间转化为 GRAY 颜色空间的公式如下。<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          G 
         
        
          R 
         
        
          A 
         
        
          Y 
         
        
          = 
         
        
          0.3 
         
        
          R 
         
        
          + 
         
        
          0.59 
         
        
          G 
         
        
          + 
         
        
          0.11 
         
        
          B 
         
        
       
         GRAY=0.3R+0.59G+0.11B 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right: 0.22222em;">Y</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">3</span><span class="mord mathdefault" style="margin-right: 0.00773em;">R</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.76666em; vertical-align: -0.08333em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">5</span><span class="mord">9</span><span class="mord mathdefault">G</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.68333em; vertical-align: 0em;"></span><span class="mord">0</span><span class="mord">.</span><span class="mord">1</span><span class="mord">1</span><span class="mord mathdefault" style="margin-right: 0.05017em;">B</span></span></span></span></span></span></p> 
<h2><a id="2_cvcvtColor_40"></a>2 颜色空间转换函数cv.cvtColor()</h2> 
<p>cv.cvtColor()函数用于将图像从一个颜色空间转换为另一个颜色空间，并将转化之后的结果通过值返回。</p> 
<pre><code class="prism language-py"><span class="token comment">#函数原型：</span>
dst <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>src<span class="token punctuation">,</span>
				  code
				  <span class="token punctuation">[</span><span class="token punctuation">,</span> dst
				  <span class="token punctuation">[</span><span class="token punctuation">,</span> dstCn<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># src：待转化颜色空间的图像</span>
<span class="token comment"># code：颜色空间转化的标志</span>
<span class="token comment"># dst：颜色空间转化后的目标图像</span>
<span class="token comment"># dstCn：目标图像中的通道数，默认值为0</span>
</code></pre> 
<p><mark>需要注意该函数在进行转换前后的图像取值范围不能超出像素取值范围。</mark><br> uint8: 0~255<br> uint16: 0~65535<br> float32: 0~1<br> 在非线性变化的情况下需要将RGB图像归一化到适当的范围内以获得正确的结果。<br> cv.cvtColor()函数中常用颜色空间转换的标志如下表所示</p> 
<table><thead><tr><th>标记</th><th>简记</th><th>作用</th></tr></thead><tbody><tr><td>cv.COLOR_BGR2BGRA</td><td>0</td><td>为RGB添加alpha通道</td></tr><tr><td>cv.COLOR_BGR2RGB</td><td>4</td><td>更改彩色图像通道颜色的顺序</td></tr><tr><td>cv.COLOR_BGR2GRAY</td><td>10</td><td>把彩色图像转成灰度图像</td></tr><tr><td>cv.COLOR_GRAY2BGR</td><td>8</td><td>把灰度图像转成彩色图像（伪彩色）</td></tr><tr><td>cv.COLOR_BGR2YUV</td><td>82</td><td>从RGB颜色空间转成YUV颜色空间</td></tr><tr><td>cv.COLOR_YUV2BGR</td><td>84</td><td>从YUV颜色空间转成RGB颜色空间</td></tr><tr><td>cv.COLOR_BGR2HSV</td><td>40</td><td>从RGB颜色空间转成HSV颜色空间</td></tr><tr><td>cv.COLOR_HSV2BGR</td><td>54</td><td>从HSV颜色空间转成RGB颜色空间</td></tr><tr><td>cv.COLOR_BGR2Lab</td><td>44</td><td>从RGB颜色空间转成Lab颜色空间</td></tr><tr><td>cv.COLOR_Lab2BGR</td><td>56</td><td>从Lab颜色空间转成RGB颜色空间</td></tr><tr><td>示例代码：</td><td></td><td></td></tr></tbody></table> 
<pre><code class="prism language-py"><span class="token comment"># -*- coding:utf-8 -*-</span>
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># 读取图像并判断是否读取成功</span>
    img <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'../images/image.jpg'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> img <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Failed to read image.jpg.'</span><span class="token punctuation">)</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
         <span class="token comment"># 将图像进行颜色模型转换</span>
        image <span class="token operator">=</span> img<span class="token punctuation">.</span>astype<span class="token punctuation">(</span><span class="token string">'float32'</span><span class="token punctuation">)</span>
        image <span class="token operator">*=</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">255</span>
        HSV <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2HSV<span class="token punctuation">)</span>
        YUV <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2YUV<span class="token punctuation">)</span>
        Lab <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2Lab<span class="token punctuation">)</span>
        GRAY <span class="token operator">=</span> cv<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>

        <span class="token comment"># 展示结果</span>
        cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Origin Image'</span><span class="token punctuation">,</span> image<span class="token punctuation">)</span>
        cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'HSV Image'</span><span class="token punctuation">,</span> HSV<span class="token punctuation">)</span>
        cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'YUV Image'</span><span class="token punctuation">,</span> YUV<span class="token punctuation">)</span>
        cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Lab Image'</span><span class="token punctuation">,</span> Lab<span class="token punctuation">)</span>
        <span class="token comment"># 由于计算出Lab结果会有负数值，不能通过cv.imshow()函数显示</span>
        <span class="token comment"># 因此我们可以使用cv.imwrite()函数保存下来进行查看</span>
        cv<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">'./results/Convert_color_Lab.jpg'</span><span class="token punctuation">,</span> Lab<span class="token punctuation">)</span>
        cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'GRAY Image'</span><span class="token punctuation">,</span> GRAY<span class="token punctuation">)</span>

        <span class="token comment"># 关闭窗口</span>
        cv<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        cv<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行结果如下图所示。<br> <img src="https://images2.imgbox.com/44/9d/QgYxNI1Q_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__113"></a>3 图像通道的分离与合并</h2> 
<p>在图像颜色空间中，不同的分量存放在不同的通道中。如果我们只需要颜色空间中的某一个分量（例如，只需要处理 RGB 图像中的红色通道），则可以将红色通道从三通道的数据中分离出来再进行处理。这种方式可以减少数据所占用的内存，加快程序的运行速度。同时，当我们分别处理完多个通道后需要将所有通道合并在一起重新生成RGB图像。这就需要用到cv.split()函数和cv.merge()函数。</p> 
<h3><a id="31_cvsplit_115"></a>3.1 多通道分离函数cv.split()</h3> 
<pre><code class="prism language-py"><span class="token comment">#函数原型：</span>
mv <span class="token operator">=</span> cv<span class="token punctuation">.</span>split<span class="token punctuation">(</span>m<span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token punctuation">,</span> mv<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># m：待分离的多通道图像</span>
<span class="token comment"># mv：分离后的单通道图像</span>
</code></pre> 
<p>该函数主要用于将多通道的图像分离成若干个单通道的图像，并将分离后的结果通过值返回。</p> 
<h3><a id="32_cvmerge_124"></a>3.2 多通道合并函数cv.merge()</h3> 
<pre><code class="prism language-py"><span class="token comment">#函数原型：</span>
dst <span class="token operator">=</span> cv<span class="token punctuation">.</span>merge<span class="token punctuation">(</span>mv<span class="token punctuation">,</span>
			  <span class="token punctuation">[</span><span class="token punctuation">,</span> dst<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># mv：需要合并的图像</span>
<span class="token comment"># mv：合并后输出的图像</span>
</code></pre> 
<p>该函数主要用于将多幅图像合并成一幅多通道图像，并将合并后的结果通过值返回。其功能与cv.split()相对应，对于输入尺寸和数据类型一致的多幅图像，输出结果是一幅多通道的图像，其通道数目是所有输入图像通道数目的总和。<br> <strong>注意：所有输入的图像的通道数可以不相同，但是所有图像需要具有相同的尺寸和数据类型</strong></p> 
<h3><a id="33__134"></a>3.3 图像多通道合并函数和分离函数</h3> 
<p>本程序首先将RGB图像分离为 b、g、r 通道，然后分别进行通道数目相同和不同的图像矩阵合并。</p> 
<pre><code class="prism language-py"><span class="token comment"># -*- coding:utf-8 -*-</span>
<span class="token keyword">import</span> cv2 <span class="token keyword">as</span> cv
<span class="token keyword">import</span> sys
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    <span class="token comment"># 读取图像并判断是否读取成功</span>
    img <span class="token operator">=</span> cv<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">'../images/cat.jpg'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> img <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Failed to read lena.jpg.'</span><span class="token punctuation">)</span>
        sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># 通道分离</span>
    b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r <span class="token operator">=</span> cv<span class="token punctuation">.</span>split<span class="token punctuation">(</span>img<span class="token punctuation">)</span>

    <span class="token comment"># 创建一个和图像尺寸相同的全0矩阵</span>
    zeros <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span><span class="token string">'uint8'</span><span class="token punctuation">)</span>

    <span class="token comment"># 将通道数目相同的图像矩阵合并</span>
    bg <span class="token operator">=</span> cv<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">[</span>b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> zeros<span class="token punctuation">]</span><span class="token punctuation">)</span>
    gr <span class="token operator">=</span> cv<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">[</span>zeros<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r<span class="token punctuation">]</span><span class="token punctuation">)</span>
    br <span class="token operator">=</span> cv<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">[</span>b<span class="token punctuation">,</span> zeros<span class="token punctuation">,</span> r<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># 将通道数目不相同的图像矩阵合并</span>
    bgr_6 <span class="token operator">=</span> cv<span class="token punctuation">.</span>merge<span class="token punctuation">(</span><span class="token punctuation">[</span>bg<span class="token punctuation">,</span> r<span class="token punctuation">,</span> zeros<span class="token punctuation">,</span> zeros<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># 展示结果</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Blue'</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Green'</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Red'</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Blue_Green'</span><span class="token punctuation">,</span> bg<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Green_Red'</span><span class="token punctuation">,</span> gr<span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Blue_Red'</span><span class="token punctuation">,</span> br<span class="token punctuation">)</span>

    <span class="token comment"># 关闭窗口</span>
    cv<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    cv<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>运行结果<br> <img src="https://images2.imgbox.com/62/e5/wQp1Z96c_o.png" alt="在这里插入图片描述"><br> <a href="https://blog.csdn.net/a1016249126/article/details/121446691?spm=1001.2014.3001.5501">下一篇</a>将会介绍OpenCV中与图像像素运算有关的内容。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d843181edb2d62299f329a7467e6f983/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">约瑟夫问题的几种解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f2ce4a51fb1266620ea770651e0e7a27/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ClickHouse exception code:516</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>