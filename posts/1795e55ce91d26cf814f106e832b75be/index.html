<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Gitlab-标准流程配置[总结多篇文章并实践多次，小白零基础亦可上手] - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Gitlab-标准流程配置[总结多篇文章并实践多次，小白零基础亦可上手]" />
<meta property="og:description" content="谈谈这几天的感受吧：公司因为以前的gitlab服务器出了一点问题，让半路出家的我来看一下，最后说模拟搭建一个gitlab服务器，先看一下里面是跑些什么东东，需要配置的内容是什么等，接着就着手干，但是百度了多篇文章，B站也看了不少的视频，几乎内容都差不多，但是几乎都有一个问题：光是说了做什么，可能本身作者就是熟悉gitlab的大牛，自然就忽略了中间的很多细节，可能有时候轻描淡写地说执行啥命令一下，但是对于小白而言，一下子都可能懵逼，连下手的地方都找不到，因此，结合自己的历程，连文带图，把全过程写下来，同时将自己经历的坑也填上，希望能为后面学习的人提供点帮助。
基本要求：
首先：安装gitlab的服务器，不论本地的PC机、虚拟机、云服务器都可以安装，但是必须要注意的一点：必须CPU2个，内存2G以上，这个算是最低标准了吧，因为我曾经从天翼云领取了1CPU，1G内存的免费服务器，可惜在安装的时候，系统都在安装的时候就挂掉，CPU占用接近100%，内存溢出等错误不断，耗时让人抓狂！最终还报错安装不成功！
其次：我使用的操作系统是Linux，CentOS7【使用XSHELL7链接服务器进行操作】
图一：安装好gitlab后，使用xshell登陆Linux服务器示例
第一步、准备工作：安装依赖包并启动服务 主要的包有： policycoreutils 、openssh-server、 openssh-clients、 postfix、policycoreutils-python。【暂时不要纠结它们做啥用，反正安装就行，有兴趣后期慢慢研究。】
1、命令行内录入安装命令，回车自动执行：
sudo yum -y install policycoreutils openssh-server openssh-clients postfix policycoreutils-python
2、启动服务：逐个将命令录入命令行执行即可【sudo是获取管理员权限，如果本身即是管理员root登陆的，不需要都可以顺利执行，否则就加上以提升权限】。
sudo systemctl enable sshd
sudo systemctl start sshd
systemctl enable postfix
systemctl start postfix
3、关闭防火墙，或者在防火墙将HTTP、HTTPs添加白名单【最好是关闭防火墙】
关闭命令：systemctl stop firewalld
添加白名单的命令【添加完成后重启防火墙】：
添加http： sudo firewall-cmd --permanent --add-service=http
添加https：sudo firewall-cmd --permanent --add-service=https
重启防火墙：sudo systemctl reload firewalld
【注：以上3步因比较简单，粘贴复制命令即可，故不上图了。】
这些都是系统首先必须安装gitlab的依赖包，熟悉的人可以在命令行内使用先查询是否已经安装，例如，查询mysql是否已安装。在命令行中使用命令：rpm -qa|grep -i mysql。如果已经安装可以略去，不熟悉的话，直接全部安装，如果已经安装自然会跳过的。
图二、查询软件或服务是否已安装
第二步、安装gitlab 1、下载安装包：
1.1、直接在线连接命令方式：【最好在系统etc目录下创建gitlab文件夹放置，创建文件夹方式：cd /etc，转入etc目录，使用命令 mkdir gitlab 创建文件夹，在cd gitlab进入】
下载命令：命令中的“-c&#34;，为断点继续的意思，因为网络的原因，可能一次会下载不全不能安装，发现断掉后，再次执行就必须由-c即接着上次下载的继续，否则就是从头开始，会耽误很多时间。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1795e55ce91d26cf814f106e832b75be/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-25T11:25:10+08:00" />
<meta property="article:modified_time" content="2022-11-25T11:25:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Gitlab-标准流程配置[总结多篇文章并实践多次，小白零基础亦可上手]</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        谈谈这几天的感受吧：公司因为以前的gitlab服务器出了一点问题，让半路出家的我来看一下，最后说模拟搭建一个gitlab服务器，先看一下里面是跑些什么东东，需要配置的内容是什么等，接着就着手干，但是百度了多篇文章，B站也看了不少的视频，几乎内容都差不多，但是几乎都有一个问题：光是说了做什么，可能本身作者就是熟悉gitlab的大牛，自然就忽略了中间的很多细节，可能有时候轻描淡写地说执行啥命令一下，但是对于小白而言，一下子都可能懵逼，连下手的地方都找不到，因此，结合自己的历程，连文带图，把全过程写下来，同时将自己经历的坑也填上，希望能为后面学习的人提供点帮助。</p> 
<p><span style="color:#0d0016;"><strong><span style="background-color:#ffd900;">基本要求：</span></strong></span></p> 
<p>        首先：安装gitlab的服务器，不论本地的<span style="background-color:#ffd900;">PC机、虚拟机、云服务器都可以安装</span>，但是必须要注意的一点：<span style="background-color:#ffd900;">必须CPU2个，内存2G以上</span>，这个算是最低标准了吧，因为我曾经从天翼云领取了1CPU，1G内存的免费服务器，可惜在安装的时候，系统都在安装的时候就挂掉，CPU占用接近100%，内存溢出等错误不断，耗时让人抓狂！最终还报错安装不成功！</p> 
<p>        其次：我使用的操作系统是Linux，CentOS7【使用XSHELL7链接服务器进行操作】</p> 
<p><img alt="" height="904" src="https://images2.imgbox.com/3b/91/oM7JBK6N_o.png" width="1200"></p> 
<p style="text-align:center;">图一：安装好gitlab后，使用xshell登陆Linux服务器示例</p> 
<p></p> 
<h3><span style="background-color:#ffd900;">第一步、准备工作：安装依赖包并启动服务</span></h3> 
<p>        主要的包有： policycoreutils 、openssh-server、 openssh-clients、 postfix、policycoreutils-python。【暂时不要纠结它们做啥用，反正安装就行，有兴趣后期慢慢研究。】</p> 
<p>        1、命令行内录入安装命令，回车自动执行：</p> 
<p style="margin-left:0;">sudo yum -y install policycoreutils openssh-server openssh-clients postfix policycoreutils-python</p> 
<p style="margin-left:0;">        2、启动服务：逐个将命令录入命令行执行即可【sudo是获取管理员权限，如果本身即是管理员root登陆的，不需要都可以顺利执行，否则就加上以提升权限】。</p> 
<p style="margin-left:0;">sudo systemctl enable sshd</p> 
<p style="margin-left:0;">sudo systemctl start sshd</p> 
<p style="margin-left:0;">systemctl enable postfix</p> 
<p style="margin-left:0;">systemctl start postfix</p> 
<p style="margin-left:0;">        3、关闭防火墙，或者在防火墙将HTTP、HTTPs添加白名单【最好是关闭防火墙】</p> 
<p style="margin-left:0;">关闭命令：systemctl stop firewalld</p> 
<p style="margin-left:0;">添加白名单的命令【添加完成后重启防火墙】：</p> 
<p style="margin-left:0;">添加http： sudo firewall-cmd --permanent --add-service=http</p> 
<p style="margin-left:0;">添加https：sudo firewall-cmd --permanent --add-service=https</p> 
<p style="margin-left:0;">重启防火墙：sudo systemctl reload firewalld</p> 
<p style="margin-left:0;">【注：以上3步因比较简单，粘贴复制命令即可，故不上图了。】</p> 
<p>        这些都是系统首先必须安装gitlab的依赖包，熟悉的人可以在命令行内使用先查询是否已经安装，例如，查询mysql是否已安装。在命令行中使用命令：rpm -qa|grep -i mysql。如果已经安装可以略去，不熟悉的话，直接全部安装，如果已经安装自然会跳过的。</p> 
<p><img alt="" height="345" src="https://images2.imgbox.com/53/9d/SAfbvwmJ_o.png" width="661"></p> 
<p style="text-align:center;"> 图二、查询软件或服务是否已安装</p> 
<h3><span style="background-color:#ffd900;">第二步、安装gitlab</span></h3> 
<p>        1、下载安装包：</p> 
<p>        <strong><span style="background-color:#ffd900;">1.1、直接在线连接命令方式：</span></strong>【最好在系统etc目录下创建gitlab文件夹放置，创建文件夹方式：cd /etc，转入etc目录，使用命令 <span style="background-color:#ffd900;">mkdir gitlab</span> 创建文件夹，在cd gitlab进入】</p> 
<p>下载命令：命令中的“-c"，为断点继续的意思，因为网络的原因，可能一次会下载不全不能安装，发现断掉后，再次执行就必须由-c即接着上次下载的继续，否则就是从头开始，会耽误很多时间。</p> 
<p>wget --no-check-certificate -c <a href="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-14.6.4-ce.0.el7.x86_64.rpm" rel="nofollow" title="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-14.6.4-ce.0.el7.x86_64.rpm">https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-14.6.4-ce.0.el7.x86_64.rpm</a></p> 
<p>【说明：这里使用国内清华的镜像站点下载的14.6.4版本，可以从自己进入清华镜像网站，找自己喜欢的版本，从镜像复制网址并替换相关信息即可】</p> 
<p><img alt="" height="352" src="https://images2.imgbox.com/e4/23/qM11LtqN_o.png" width="929"></p> 
<p style="text-align:center;"> 图三、从清华镜像获取地址或下载镜像</p> 
<p>         <strong><span style="background-color:#ffd900;">1.2、先下载到本地，再使用FTP等方式传到Linux服务器：【当前我采用的方式。因为服务器直接下载的，网络问题等，需要很多次，比较耗费时间】</span></strong></p> 
<p>        这里我使用的是与XSHELL配套的Xftp，在xhell的官网也有xftp，没有安装的话下载安装。</p> 
<p>上传方法：</p> 
<p><img alt="" height="904" src="https://images2.imgbox.com/81/d1/P50j6HsK_o.png" width="1200"></p> 
<p style="text-align:center;"> 图四、使用FTP工具向服务器上传或下载文件</p> 
<p>        2、 安装gitlab：</p> 
<p><strong><span style="background-color:#ffd900;">【注：如果机器配置不够，可能就会安装不成功，死机等状况，这个坑上，我至少在天翼云、阿里云以及虚拟机上，安装3次都因资源问题，安装失败。后增加虚拟机资源，一次通过】</span></strong></p> 
<p>         首先在服务器上，使用cd命令转到安装包放置的文件夹，例如我的是 /etc/gitlab：cd /etc/gitlab</p> 
<p>在该文件夹下执行命令可以使用以下两种方式中的任意一种：</p> 
<p style="margin-left:0;">（1）yum install -y gitlab-ce-14.8.4-ce.0.el7.x86_64.rpm</p> 
<p style="margin-left:0;">（2）rpm -i gitlab-ce-14.8.4-ce.0.el7.x86_64.rpm</p> 
<p>如果报yum出错之类的，则需要安装，因含有下载等内容超出本文范围，自行搜索。安装即可</p> 
<p> <img alt="" height="373" src="https://images2.imgbox.com/31/79/mDIIvdKm_o.png" width="591"></p> 
<p style="text-align:center;"> 图五、安装成功后的页面</p> 
<p> 3、成功后，修改gitlab的默认端口信息</p> 
<p>进入配置文件：在安装目录 /etc/gitlab下的 gitlab.rb</p> 
<p style="margin-left:0;">进入目录：cd  /etc/gitlab</p> 
<p style="margin-left:0;">进行编辑：vim gitlab.rb</p> 
<p style="margin-left:0;">【注：vim编辑中：有3中模式：注意常用的切换方式：</p> 
<p style="margin-left:0;">        按i键进入插入模式，可以修改文件，按ESC退回到命令模yum式</p> 
<p style="margin-left:0;">        从yum模式保存退出方式（英文状态的冒号+w+q）  :wq ；  不保存只退出： :q】</p> 
<p style="margin-left:0;">需要修改的内容：</p> 
<p style="margin-left:0;"><strong><span style="background-color:#ffd900;">external_url </span></strong>和 <strong><span style="background-color:#ffd900;">nginx['listen_port']</span></strong>的key对应的内容,</p> 
<p style="margin-left:0;"> external_url ‘<a href="http://125.124.122.51:8080" rel="nofollow" title="http://192.168.10.3:8080’   # 修改为自己服务器的地址和端口">http://192.168.10.3:8080’   # 修改为自己服务器的地址和端口</a></p> 
<p style="margin-left:0;">nginx['listen_port'] = 8080     #自己准备使用的端口号</p> 
<p style="margin-left:0;">----测试中资源配置低，则配置以下---</p> 
<p style="margin-left:0;">monitoring['grafana']['enable'] = false</p> 
<p style="margin-left:0;"><span style="background-color:#ffd900;">【注：gitlab.rb文件内容较多，可以在使用vim gitlab.rb后，在 yum模式下，按(斜杠 + 待搜索内容) /external_url 找到后，再按i，进入编辑模式后去修改】</span></p> 
<h4><strong><span style="background-color:#ffd900;"> 4、重启gitlab，本工作也是重点，每次修改配置，都需要重启</span></strong></h4> 
<p> <strong><span style="background-color:#ffd900;">【注：gitlab-ctl reconfigure 首次执行会耗费很长时间，后期修改后执行可能需要1-2分钟，可以安心做其他事情，至少10分钟以上；如果机器配置不够，可能就会出现死机等状况，虽然上一步的安装成功，但是最终未能使用起来】</span></strong></p> 
<p style="margin-left:0;">执行重新配置指令：gitlab-ctl reconfigure    </p> 
<p style="margin-left:0;">执行重启服务指令：gitlab-ctl restart</p> 
<p style="margin-left:0;">【注：gitlab-ctl reconfigure 速度慢，CPU可能爆满，如果受不了，可以使用以下方法退出：</p> 
<p style="margin-left:0;"><span style="color:#4b4b4b;"><span style="background-color:#ffffff;">        ctrl + c 强制停止服务</span></span>】</p> 
<p style="margin-left:0;"></p> 
<h2><span style="background-color:#ffd900;">第三步： 成功，开始使用</span></h2> 
<p>        在浏览器中输入第二步第3节中配置的 external_url 地址：        http://192.168.10.3:8080</p> 
<p>这里需要注意的是：首次打开时，可能还是会出现连接超时之类的错误，多刷几次。如果多刷几次还是不行，<strong><strong><span style="background-color:#ffd900;">请</span></strong><span style="background-color:#ffd900;">注意服务器上的防火墙是否已经关闭，</span></strong>本人在这里掉坑花费了很长时间，老是出不来，服务器上执行<span style="color:#000000;">systemctl stop firewalld后，浏览器上立马出现登陆页面！！</span></p> 
<p><span style="color:#000000;">        首次登陆页面的账号是root，密码则是临时密码，保存在安装目录下的文件”initial_root_password“中，初始密码保存24小时，自动删除，首次登陆后需要修改密码操作。</span></p> 
<p><span style="color:#000000;">对于本次我的即为：</span>/etc/gitlab/initial_root_password中,</p> 
<p>cd /etc/gitlab/ 进入目录， cat /etc/gitlab/initial_root_password, 即可查看到。</p> 
<p><img alt="" height="232" src="https://images2.imgbox.com/33/85/3yW99XWH_o.png" width="844"></p> 
<p style="text-align:center;">图六、获取首次登陆的初始密码</p> 
<p><img alt="" height="730" src="https://images2.imgbox.com/33/5d/A9MjGVHE_o.png" width="1200"></p> 
<p style="text-align:center;">图七、首次登陆页面</p> 
<p> <img alt="" height="508" src="https://images2.imgbox.com/84/9a/Ml8fZexF_o.png" width="1200"></p> 
<p style="text-align:center;">登陆后的页面 </p> 
<p></p> 
<p>         好了，本次gitlab的安装顺利完成了，关于使用，待我也熟悉一些后再来一些基础的最容易上手的吧。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7f4023d3b46d6e77b15cfaabf9190924/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【js执行机制】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9d5991dca6041512d79fa8ccc5d94dd0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">tkinter打包成exe程序</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>