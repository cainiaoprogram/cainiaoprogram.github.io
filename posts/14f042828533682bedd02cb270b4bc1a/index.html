<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>（四）Prometheus &#43; Grafana 可视化监控Nginx&#43;MySQL详细部署 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="（四）Prometheus &#43; Grafana 可视化监控Nginx&#43;MySQL详细部署" />
<meta property="og:description" content="目录
一，环境准备
本篇基于Prometheus &#43; Grafana 可视化监控工具部署Nginx&#43;MySQL，
二，Grafana可视化图形工具
1，安装GRAFANA服务器
2，安装grafana可视化图形工具 以及启动服务
3，登陆 Grafana Web界面 http://192.168.100.12:3000/
三，配置数据源
1，添加Prometheus数据源数据
2，为数据源做数据展示 3，导入grafana监控面板 4，官网去提取ID https://grafana.com/grafana/dashboards/ 5，导入Nginx ID 和MySQL ID 6，Grafana 图形显示 MySQL 监控数据
7，Grafana 图形显示 Nginx 监控数据​
一，环境准备 Prometheus服务器192.168.100.12Nginx&#43;MySQL服务器192.168.100.13grafana 服务器192.168.100.12 本篇基于Prometheus &#43; Grafana 可视化监控工具部署Nginx&#43;MySQL， Prometheus&#43;Nginx&#43;MySQL部署流程已在部署在上篇完成，
二，Grafana可视化图形工具 1，安装GRAFANA服务器 ##下载地址 基于压缩包下载方式和rpm包下载方式 wget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.4.7.linux-amd64.tar.gz tar -zxvf grafana-enterprise-9.4.7.linux-amd64.tar.gz wget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.4.7-1.x86_64.rpm sudo yum install grafana-enterprise-9.4.7-1.x86_64.rpm 2，安装grafana可视化图形工具 以及启动服务 yum install grafana-enterprise-9.4.7-1.x86_64.rpm systemctl start grafana-server.service systemctl enable grafana-server.service systemctl status grafana-server.service 查看端口 [root@localhost ~]# netstat -lnpt | grep 3000 tcp6 0 0 :::3000 :::* LISTEN 1613/grafana 3，登陆 Grafana Web界面 http://192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/14f042828533682bedd02cb270b4bc1a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-30T15:59:55+08:00" />
<meta property="article:modified_time" content="2023-03-30T15:59:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">（四）Prometheus &#43; Grafana 可视化监控Nginx&#43;MySQL详细部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%EF%BC%8C%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-toc" style="margin-left:40px;"><a href="#%E4%B8%80%EF%BC%8C%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87" rel="nofollow">一，环境准备</a></p> 
<p id="%C2%A0%E6%9C%AC%E7%AF%87%E5%9F%BA%E4%BA%8EPrometheus%20%2B%20Grafana%20%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7%E9%83%A8%E7%BD%B2Nginx%2BMySQL%EF%BC%8C-toc" style="margin-left:80px;"><a href="#%C2%A0%E6%9C%AC%E7%AF%87%E5%9F%BA%E4%BA%8EPrometheus%20%2B%20Grafana%20%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7%E9%83%A8%E7%BD%B2Nginx%2BMySQL%EF%BC%8C" rel="nofollow"> 本篇基于Prometheus + Grafana 可视化监控工具部署Nginx+MySQL，</a></p> 
<p id="%C2%A0%E4%BA%8C%EF%BC%8CGrafana%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7-toc" style="margin-left:40px;"><a href="#%C2%A0%E4%BA%8C%EF%BC%8CGrafana%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7" rel="nofollow"> 二，Grafana可视化图形工具</a></p> 
<p id="1%EF%BC%8C%E5%AE%89%E8%A3%85GRAFANA%E6%9C%8D%E5%8A%A1%E5%99%A8-toc" style="margin-left:80px;"><a href="#1%EF%BC%8C%E5%AE%89%E8%A3%85GRAFANA%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">1，安装GRAFANA服务器</a></p> 
<p id="2%EF%BC%8C%E5%AE%89%E8%A3%85grafana%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7%20%E4%BB%A5%E5%8F%8A%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#2%EF%BC%8C%E5%AE%89%E8%A3%85grafana%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7%20%E4%BB%A5%E5%8F%8A%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1" rel="nofollow">2，安装grafana可视化图形工具 以及启动服务</a></p> 
<p id="3%EF%BC%8C%E7%99%BB%E9%99%86%20Grafana%20Web%E7%95%8C%E9%9D%A2%C2%A0http%3A%2F%2F192.168.100.12%3A3000%2F-toc" style="margin-left:80px;"><a href="#3%EF%BC%8C%E7%99%BB%E9%99%86%20Grafana%20Web%E7%95%8C%E9%9D%A2%C2%A0http%3A%2F%2F192.168.100.12%3A3000%2F" rel="nofollow">3，登陆 Grafana Web界面 http://192.168.100.12:3000/</a></p> 
<p id="%C2%A0%E4%B8%89%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90-toc" style="margin-left:40px;"><a href="#%C2%A0%E4%B8%89%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90" rel="nofollow"> 三，配置数据源</a></p> 
<p id="1%EF%BC%8C%E6%B7%BB%E5%8A%A0Prometheus%E6%95%B0%E6%8D%AE%E6%BA%90%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px;"><a href="#1%EF%BC%8C%E6%B7%BB%E5%8A%A0Prometheus%E6%95%B0%E6%8D%AE%E6%BA%90%E6%95%B0%E6%8D%AE" rel="nofollow">1，添加Prometheus数据源数据</a></p> 
<p id="2%EF%BC%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E6%BA%90%E5%81%9A%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%C2%A0-toc" style="margin-left:80px;"><a href="#2%EF%BC%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E6%BA%90%E5%81%9A%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%C2%A0" rel="nofollow">2，为数据源做数据展示 </a></p> 
<p id="3%EF%BC%8C%E5%AF%BC%E5%85%A5grafana%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF%C2%A0%C2%A0-toc" style="margin-left:80px;"><a href="#3%EF%BC%8C%E5%AF%BC%E5%85%A5grafana%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF%C2%A0%C2%A0" rel="nofollow">3，导入grafana监控面板  </a></p> 
<p id="4%EF%BC%8C%E5%AE%98%E7%BD%91%E5%8E%BB%E6%8F%90%E5%8F%96ID%C2%A0%20%C2%A0https%3A%2F%2Fgrafana.com%2Fgrafana%2Fdashboards%2F%C2%A0-toc" style="margin-left:80px;"><a href="#4%EF%BC%8C%E5%AE%98%E7%BD%91%E5%8E%BB%E6%8F%90%E5%8F%96ID%C2%A0%20%C2%A0https%3A%2F%2Fgrafana.com%2Fgrafana%2Fdashboards%2F%C2%A0" rel="nofollow">4，官网去提取ID   https://grafana.com/grafana/dashboards/ </a></p> 
<p id="%C2%A05%EF%BC%8C%E5%AF%BC%E5%85%A5Nginx%20ID%20%E5%92%8CMySQL%20ID%C2%A0-toc" style="margin-left:80px;"><a href="#%C2%A05%EF%BC%8C%E5%AF%BC%E5%85%A5Nginx%20ID%20%E5%92%8CMySQL%20ID%C2%A0" rel="nofollow">5，导入Nginx ID 和MySQL ID </a></p> 
<p id="6%EF%BC%8CGrafana%20%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%20MySQL%20%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px;"><a href="#6%EF%BC%8CGrafana%20%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%20MySQL%20%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE" rel="nofollow">6，Grafana 图形显示 MySQL 监控数据</a></p> 
<p id="%C2%A07%EF%BC%8CGrafana%20%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%20Nginx%20%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:80px;"><a href="#%C2%A07%EF%BC%8CGrafana%20%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%20Nginx%20%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">7，Grafana 图形显示 Nginx 监控数据​</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E4%B8%80%EF%BC%8C%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">一，环境准备</h3> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><tbody><tr><td>Prometheus服务器</td><td>192.168.100.12</td></tr><tr><td>Nginx+MySQL服务器</td><td>192.168.100.13</td></tr><tr><td>grafana 服务器</td><td>192.168.100.12</td></tr></tbody></table> 
<h4 id="%C2%A0%E6%9C%AC%E7%AF%87%E5%9F%BA%E4%BA%8EPrometheus%20%2B%20Grafana%20%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%91%E6%8E%A7%E5%B7%A5%E5%85%B7%E9%83%A8%E7%BD%B2Nginx%2BMySQL%EF%BC%8C"> 本篇基于Prometheus + Grafana 可视化监控工具部署Nginx+MySQL，</h4> 
<p>Prometheus+Nginx+MySQL部署流程已在部署在上篇完成，</p> 
<h3 id="%C2%A0%E4%BA%8C%EF%BC%8CGrafana%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7"> 二，Grafana可视化图形工具</h3> 
<h4 id="1%EF%BC%8C%E5%AE%89%E8%A3%85GRAFANA%E6%9C%8D%E5%8A%A1%E5%99%A8">1，安装GRAFANA服务器</h4> 
<pre><code class="language-python">##下载地址 基于压缩包下载方式和rpm包下载方式

wget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.4.7.linux-amd64.tar.gz
tar -zxvf grafana-enterprise-9.4.7.linux-amd64.tar.gz


wget https://dl.grafana.com/enterprise/release/grafana-enterprise-9.4.7-1.x86_64.rpm
sudo yum install grafana-enterprise-9.4.7-1.x86_64.rpm

</code></pre> 
<h4 id="2%EF%BC%8C%E5%AE%89%E8%A3%85grafana%E5%8F%AF%E8%A7%86%E5%8C%96%E5%9B%BE%E5%BD%A2%E5%B7%A5%E5%85%B7%20%E4%BB%A5%E5%8F%8A%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1">2，安装grafana可视化图形工具 以及启动服务</h4> 
<pre><code class="language-cpp">yum install grafana-enterprise-9.4.7-1.x86_64.rpm

systemctl start grafana-server.service 
systemctl enable grafana-server.service 
systemctl status grafana-server.service 

查看端口
[root@localhost ~]# netstat -lnpt | grep 3000
tcp6       0      0 :::3000                 :::*                    LISTEN      1613/grafana        
</code></pre> 
<h4 id="3%EF%BC%8C%E7%99%BB%E9%99%86%20Grafana%20Web%E7%95%8C%E9%9D%A2%C2%A0http%3A%2F%2F192.168.100.12%3A3000%2F">3，登陆 Grafana Web界面 <a href="http://192.168.100.12:3000/" rel="nofollow" title="http://192.168.100.12:3000/">http://192.168.100.12:3000/</a></h4> 
<p>账号密码都默认为：admin </p> 
<p><img alt="" height="936" src="https://images2.imgbox.com/0b/2c/hQiiyQzN_o.png" width="1200"></p> 
<p>至此Grafana 主界面</p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/3e/d9/fAZGuHsL_o.png" width="1200"></p> 
<h3 id="%C2%A0%E4%B8%89%EF%BC%8C%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E6%BA%90"> 三，配置数据源</h3> 
<h4 id="1%EF%BC%8C%E6%B7%BB%E5%8A%A0Prometheus%E6%95%B0%E6%8D%AE%E6%BA%90%E6%95%B0%E6%8D%AE">1，添加Prometheus数据源数据</h4> 
<p>把 Prometheus 服务器收集的数据做为一个数据源添加到 grafana，让 grafana 可以得到 Prometheus 的数据</p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/ca/ea/OCTECF6Y_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/35/09/hdsSLNys_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/40/e0/zD6nrLUA_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/80/28/PsiNvAcm_o.png" width="1200"></p> 
<p><img alt="" height="520" src="https://images2.imgbox.com/6a/15/mmLuomch_o.png" width="1189"></p> 
<p><img alt="" height="484" src="https://images2.imgbox.com/f4/0a/oe4tW0sy_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/5a/a5/Let3oFLU_o.png" width="1200"></p> 
<h4 id="2%EF%BC%8C%E4%B8%BA%E6%95%B0%E6%8D%AE%E6%BA%90%E5%81%9A%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA%C2%A0">2，为数据源做数据展示 </h4> 
<p><img alt="" height="937" src="https://images2.imgbox.com/12/36/dpjE9b8b_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/78/51/ocu04VAN_o.png" width="1200"></p> 
<h4 id="3%EF%BC%8C%E5%AF%BC%E5%85%A5grafana%E7%9B%91%E6%8E%A7%E9%9D%A2%E6%9D%BF%C2%A0%C2%A0">3，导入grafana监控面板  </h4> 
<p><img alt="" height="937" src="https://images2.imgbox.com/4a/6a/dLEhDBfn_o.png" width="1200"></p> 
<h4 id="4%EF%BC%8C%E5%AE%98%E7%BD%91%E5%8E%BB%E6%8F%90%E5%8F%96ID%C2%A0%20%C2%A0https%3A%2F%2Fgrafana.com%2Fgrafana%2Fdashboards%2F%C2%A0">4，官网去提取ID   <a href="https://grafana.com/grafana/dashboards/" rel="nofollow" title="https://grafana.com/grafana/dashboards/">https://grafana.com/grafana/dashboards/</a> </h4> 
<pre><code class="language-cpp">浏览器访问：https://grafana.com/grafana/dashboards ，在页面中搜索 node exporter ，选择适合的面板，点击 Copy ID 或者 Download JSON</code></pre> 
<p><img alt="" height="966" src="https://images2.imgbox.com/9c/d0/rV6i4uWG_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/a3/fa/aqTTeoH7_o.png" width="1200"></p> 
<p><img alt="" height="912" src="https://images2.imgbox.com/41/14/RLi5Nvms_o.png" width="998"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/56/62/ngRTlYec_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/9d/fa/423JNgtn_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/d0/c7/JVLatSUK_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/b3/bc/bAG9vly1_o.png" width="1200"></p> 
<h4 id="%C2%A05%EF%BC%8C%E5%AF%BC%E5%85%A5Nginx%20ID%20%E5%92%8CMySQL%20ID%C2%A0"> 5，导入Nginx ID 和MySQL ID </h4> 
<p><img alt="" height="937" src="https://images2.imgbox.com/41/ec/P3XoLduk_o.png" width="1200"></p> 
<h4 id="6%EF%BC%8CGrafana%20%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%20MySQL%20%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE">6，Grafana 图形显示 MySQL 监控数据</h4> 
<p></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/be/d8/pSah4M27_o.png" width="1200"></p> 
<p><img alt="" height="937" src="https://images2.imgbox.com/70/82/CBlhevaY_o.png" width="1200"></p> 
<h4 id="%C2%A07%EF%BC%8CGrafana%20%E5%9B%BE%E5%BD%A2%E6%98%BE%E7%A4%BA%20Nginx%20%E7%9B%91%E6%8E%A7%E6%95%B0%E6%8D%AE%E2%80%8B%E7%BC%96%E8%BE%91"> 7，<strong>Grafana 图形显示 Nginx 监控数据</strong><img alt="" height="937" src="https://images2.imgbox.com/31/26/u2WoWSUA_o.png" width="1200"></h4> 
<p>完成</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/13a34826e108bce99a0c59b95b885873/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python中struct 模块的使用教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/892e44f87d63e53758d4afda508fab7c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">shap显示全部的特征</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>