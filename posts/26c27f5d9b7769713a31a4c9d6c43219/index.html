<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络精通-GRE-VPN（虚拟专用网） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络精通-GRE-VPN（虚拟专用网）" />
<meta property="og:description" content="396、虚拟专用网络，
应用类型：
①总部与分部之间的互联
②远程出差人员通过VPN拨号的方式访问企业内网；
397、GRE VPN的配置
实验topo:
实验步骤:
分别在企业路由上配置缺省路由，指向运营商：
R6
#
ip route-static 0.0.0.0 0.0.0.0 15.1.1.2
#
R5：
#
ip route-static 0.0.0.0 0.0.0.0 45.1.1.1
#
运营商的路由全部运行OSPF，使得公司总部的公网IP地址可以ping 到分布的公网IP地址；
tips :搭建VPN的首要条件：两个公网IP地址可以互相通信；
VPN搭建：
R5：
#
interface Tunnel0/0/0 指定隧道接口为路由器的G0/0/0口
tunnel-protocol gre 指定隧道协议为GRE协议
source 45.1.1.2 指定隧道院IP地址
destination 15.1.1.1 指定隧道的目的IP地址
#
R6：
#
interface Tunnel0/0/0
tunnel-protocol gre
source 15.1.1.1
destination 45.1.1.2
#
给隧道的两端配上IP地址以及静态路由：
R6：
#
interface Tunnel0/0/0
ip address 192.168.254.1 255.255.255.0 给你隧道配置IP地址
#
ip route-static 192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/26c27f5d9b7769713a31a4c9d6c43219/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-22T03:02:55+08:00" />
<meta property="article:modified_time" content="2023-07-22T03:02:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络精通-GRE-VPN（虚拟专用网）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0;"><a name="3433-1605438682529"></a>396、虚拟专用网络，</p> 
<p style="margin-left:0;"><a name="1740-1605438967074"></a>应用类型：</p> 
<p style="margin-left:0;"><a name="3563-1605438996798"></a>①总部与分部之间的互联</p> 
<p style="margin-left:0;"><a name="5458-1605439018785"></a>②远程出差人员通过VPN拨号的方式访问企业内网；</p> 
<p style="margin-left:0;"><a name="6729-1605874683721"></a></p> 
<p style="margin-left:0;"><a name="1966-1605874683796"></a></p> 
<p style="margin-left:0;"><a name="1260-1605874683993"></a>397、GRE VPN的配置</p> 
<p style="margin-left:0;"><a name="2722-1605876934565"></a></p> 
<p style="margin-left:0;"><a name="8252-1605876935447"></a>实验topo:</p> 
<p style="margin-left:0;"><a name="2084-1605879222672"></a><img alt="" height="739" src="https://images2.imgbox.com/d1/95/02OEX2Do_o.png" width="1168"></p> 
<p style="margin-left:0;"><a name="8246-1605876945233"></a></p> 
<p style="margin-left:0;"><a name="4410-1605876945337"></a>实验步骤:</p> 
<p style="margin-left:0;"><a name="9110-1605877285359"></a></p> 
<p style="margin-left:0;"><a name="7150-1605877289479"></a></p> 
<p style="margin-left:0;"><a name="9023-1605877289834"></a>分别在企业路由上配置缺省路由，指向运营商：</p> 
<p style="margin-left:0;"><a name="4077-1605877334274"></a>R6</p> 
<p style="margin-left:0;"><a name="1064-1605877309568"></a></p> 
<p style="margin-left:0;"><a name="2245-1605877309724"></a>#</p> 
<p style="margin-left:0;"><a name="4480-1605877332121"></a>ip route-static 0.0.0.0 0.0.0.0 15.1.1.2</p> 
<p style="margin-left:0;"><a name="2610-1605877332121"></a>#</p> 
<p style="margin-left:0;"><a name="7487-1605877350979"></a></p> 
<p style="margin-left:0;"><a name="2725-1605877351121"></a>R5：</p> 
<p style="margin-left:0;"><a name="6016-1605877381584"></a>#</p> 
<p style="margin-left:0;"><a name="8888-1605877379919"></a>ip route-static 0.0.0.0 0.0.0.0 45.1.1.1</p> 
<p style="margin-left:0;"><a name="5090-1605877379919"></a>#</p> 
<p style="margin-left:0;"><a name="4640-1605877382897"></a></p> 
<p style="margin-left:0;"><a name="3810-1605877488188"></a>运营商的路由全部运行OSPF，使得公司总部的公网IP地址可以ping 到分布的公网IP地址；</p> 
<p style="margin-left:0;"><a name="2825-1605878102729"></a></p> 
<p style="margin-left:0;"><a name="6391-1605878103242"></a></p> 
<p style="margin-left:0;"><a name="8193-1605878112698"></a>tips :搭建VPN的首要条件：两个公网IP地址可以互相通信；</p> 
<p style="margin-left:0;"><a name="8657-1605878143032"></a></p> 
<p style="margin-left:0;"><a name="1599-1605878143570"></a></p> 
<p style="margin-left:0;"><a name="1796-1605878143731"></a>VPN搭建：</p> 
<p style="margin-left:0;"><a name="2386-1605878149492"></a>R5：</p> 
<p style="margin-left:0;"><a name="3695-1605878374050"></a>#</p> 
<p style="margin-left:0;"><a name="7054-1605878548080"></a>interface Tunnel0/0/0   指定隧道接口为路由器的G0/0/0口</p> 
<p style="margin-left:0;"><a name="4667-1605878548080"></a> tunnel-protocol gre        指定隧道协议为GRE协议</p> 
<p style="margin-left:0;"><a name="9351-1605878548080"></a> source 45.1.1.2         指定隧道院IP地址</p> 
<p style="margin-left:0;"><a name="8736-1605878548080"></a> destination 15.1.1.1           指定隧道的目的IP地址</p> 
<p style="margin-left:0;"><a name="6969-1605878548080"></a>#</p> 
<p style="margin-left:0;"><a name="4754-1605878549578"></a></p> 
<p style="margin-left:0;"><a name="9113-1605878549744"></a></p> 
<p style="margin-left:0;"><a name="3991-1605878549949"></a>R6：</p> 
<p style="margin-left:0;"><a name="6481-1605878565208"></a>#</p> 
<p style="margin-left:0;"><a name="1044-1605878565477"></a>interface Tunnel0/0/0</p> 
<p style="margin-left:0;"><a name="5012-1605878565477"></a> tunnel-protocol gre</p> 
<p style="margin-left:0;"><a name="4881-1605878565477"></a> source 15.1.1.1</p> 
<p style="margin-left:0;"><a name="5253-1605878565477"></a> destination 45.1.1.2</p> 
<p style="margin-left:0;"><a name="6367-1605878565477"></a>#</p> 
<p style="margin-left:0;"><a name="4571-1605878552735"></a></p> 
<p style="margin-left:0;"><a name="1165-1605878820670"></a></p> 
<p style="margin-left:0;"><a name="8820-1605878820781"></a>给隧道的两端配上IP地址以及静态路由：</p> 
<p style="margin-left:0;"><a name="8375-1605879003731"></a>R6：</p> 
<p style="margin-left:0;"><a name="4610-1605878837834"></a>#</p> 
<p style="margin-left:0;"><a name="6332-1605878841812"></a>interface Tunnel0/0/0</p> 
<p style="margin-left:0;"><a name="3682-1605878841812"></a> ip address 192.168.254.1 255.255.255.0       给你隧道配置IP地址</p> 
<p style="margin-left:0;"><a name="4447-1605878841812"></a>#</p> 
<p style="margin-left:0;"><a name="6827-1605878997902"></a></p> 
<p style="margin-left:0;"><a name="1260-1605878992618"></a>ip route-static 192.168.100.0 24 192.168.254.2  配置静态路由，使得目的地址为 192.168.100.0 的数据网走VPN隧道；</p> 
<p style="margin-left:0;"><a name="1915-1605879376095"></a></p> 
<p style="margin-left:0;"><a name="8322-1605878847829"></a>#</p> 
<p style="margin-left:0;"><a name="3431-1605878837979"></a></p> 
<p style="margin-left:0;"><a name="9216-1605878838087"></a>R5：</p> 
<p style="margin-left:0;"><a name="2597-1605879016104"></a></p> 
<p style="margin-left:0;"><a name="1213-1605879016218"></a>#</p> 
<p style="margin-left:0;"><a name="8725-1605879016420"></a>interface Tunnel0/0/0</p> 
<p style="margin-left:0;"><a name="1269-1605879016420"></a> ip address 192.168.254.2 255.255.255.0</p> 
<p style="margin-left:0;"><a name="2478-1605879016420"></a>#</p> 
<p style="margin-left:0;"><a name="5541-1605879016420"></a></p> 
<p style="margin-left:0;"><a name="2338-1605879016420"></a>ip route-static 192.168.100.0 24 192.168.254.1</p> 
<p style="margin-left:0;"><a name="2358-1605879016420"></a>#</p> 
<p style="margin-left:0;"><a name="6773-1605879029136"></a></p> 
<p style="margin-left:0;"><a name="8764-1605879029271"></a>测试通信：</p> 
<p style="margin-left:0;"><a name="2019-1605879065423"></a></p> 
<p style="margin-left:0;"><a name="6913-1605879065757"></a><img alt="" height="368" src="https://images2.imgbox.com/23/39/6UcU8xvq_o.png" width="919"></p> 
<p style="margin-left:0;"><a name="8524-1605879011019"></a></p> 
<p style="margin-left:0;"><a name="6633-1605879066067"></a>查看路由：</p> 
<p style="margin-left:0;"><a name="7429-1605879094359"></a><img alt="" height="610" src="https://images2.imgbox.com/80/9c/1Zv7oWpf_o.png" width="824"></p> 
<p style="margin-left:0;"><a name="6019-1605878374211"></a></p> 
<p style="margin-left:0;"><a name="3960-1605878374310"></a></p> 
<p style="margin-left:0;"><a name="9465-1605877356633"></a>抓包分析：</p> 
<p style="margin-left:0;"><a name="5785-1605880202796"></a><img alt="" height="635" src="https://images2.imgbox.com/f4/84/phBxvQ95_o.png" width="1200"></p> 
<p style="margin-left:0;"><a name="2250-1605876951153"></a></p> 
<p style="margin-left:0;"><a name="9347-1605439052548"></a>tips：在公网上数据包的源IP地址与目的IP地址是公网IP地址，一旦到私网，数据包使用的源、目的IP地址就是私网的IP地址；</p> 
<p style="margin-left:0;"><a name="3072-1605880302836"></a></p> 
<p style="margin-left:0;"><a name="1020-1605882407086"></a></p> 
<p style="margin-left:0;"><a name="8044-1605882407239"></a>tips:GRE VPN 在传输过程找中没有被加密，安全性较低；</p> 
<p style="margin-left:0;"><a name="7083-1605882453229"></a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/39b12ebab99a504427d4696dbbe178d4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机网络——应用层</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/de5bddcb18a95b7f0eb4d2a65ea047fb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Jetson Nano的配置&#43;opencv&#43;torch&#43;torchvision（新版）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>