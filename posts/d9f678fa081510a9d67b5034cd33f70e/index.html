<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据库】MongoDB数据库详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据库】MongoDB数据库详解" />
<meta property="og:description" content="目录
一，数据库管理系统
1， 什么是数据库
2，什么是数据库管理系统
二， NoSQL 是什么
1，NoSQL 简介
2，NoSQL数据库
3，NoSQL 与 RDBMS 对比
三，MongoDB简介
1， MongoDB 是什么
2，mongodb发展史
3， MongoDB的体系结构​​​​​​​
4，MongoDB的数据模型
5，适用场景
四，MongoDB的部署与连接
1，安装
（1）配置软件仓库
（2）安装mongodb
（3）查看安装的有关mongo的所有包
2，启动
（1）启动mongo服务
（2）设置开机自启
（3）查看进程
（4）查看端口号
（5）关闭mongodb服务
（6）设置mongo shell的提示符
3， 使用mongo shell连接
方法一：
方法二：
方法三：
4，查看mongo的配置文件
5， 使用MongoDB Compass连接
五，基本操作
1， 数据库操作
2，集合操作
3， 文档基本CRUD
1、插入文档
2、文档的基本查询
3、文档的更新
4、删除文档
一，数据库管理系统 1， 什么是数据库 数据： 描述事物的符号记录， 可以是数字、 文字、图形、图像、声音、语言等，数据有多种形式，它们都可以经过数字化后存入计算机。
数据库： 存储数据的仓库，是长期存放在计算机内、有组织、可共享的大量数据的集合。数据库中的数据按照一定数据模型组织、描述和存储，具有较小的冗余度，较高的独立性和易扩展性，并为各种用户共享。
2，什么是数据库管理系统 数据库系统成熟的标志就是数据库管理系统的出现。数据库管理系统(DataBase ManagermentSystem，简称DBMS)是管理数据库的一个软件，是对数据库的一种完整和统一的管理和控制机制。数据库管理系统不仅让我们能够实现对数据的快速检索和维护，还为数据的安全性、完整性、并发控制和数据恢复提供了保证。数据库管理系统的核心是一个用来存储大量数据的数据库。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d9f678fa081510a9d67b5034cd33f70e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-25T19:24:20+08:00" />
<meta property="article:modified_time" content="2023-02-25T19:24:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据库】MongoDB数据库详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="margin-left:0in;"> 
 <div style="margin-left:0in;"> 
  <p id="main-toc"><strong>目录</strong></p> 
  <p id="%E4%B8%80%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-toc" style="margin-left:0px;"><a href="#%E4%B8%80%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F" rel="nofollow">一，数据库管理系统</a></p> 
  <p id="1%EF%BC%8C%20%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:40px;"><a href="#1%EF%BC%8C%20%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">1， 什么是数据库</a></p> 
  <p id="2%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F-toc" style="margin-left:40px;"><a href="#2%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F" rel="nofollow">2，什么是数据库管理系统</a></p> 
  <p id="%E4%BA%8C%EF%BC%8C%20NoSQL%20%E6%98%AF%E4%BB%80%E4%B9%88-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%EF%BC%8C%20NoSQL%20%E6%98%AF%E4%BB%80%E4%B9%88" rel="nofollow">二， NoSQL 是什么</a></p> 
  <p id="2%EF%BC%8CNoSQL%20%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#2%EF%BC%8CNoSQL%20%E7%AE%80%E4%BB%8B" rel="nofollow">1，NoSQL 简介</a></p> 
  <p id="2%EF%BC%8CNoSQL%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:40px;"><a href="#2%EF%BC%8CNoSQL%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">2，NoSQL数据库</a></p> 
  <p id="3%EF%BC%8CNoSQL%20%E4%B8%8E%20RDBMS%20%E5%AF%B9%E6%AF%94-toc" style="margin-left:40px;"><a href="#3%EF%BC%8CNoSQL%20%E4%B8%8E%20RDBMS%20%E5%AF%B9%E6%AF%94" rel="nofollow">3，NoSQL 与 RDBMS 对比</a></p> 
  <p id="%E4%B8%89%EF%BC%8CMongoDB%E7%AE%80%E4%BB%8B-toc" style="margin-left:0px;"><a href="#%E4%B8%89%EF%BC%8CMongoDB%E7%AE%80%E4%BB%8B" rel="nofollow">三，MongoDB简介</a></p> 
  <p id="1%EF%BC%8C%20MongoDB%20%E6%98%AF%E4%BB%80%E4%B9%88-toc" style="margin-left:40px;"><a href="#1%EF%BC%8C%20MongoDB%20%E6%98%AF%E4%BB%80%E4%B9%88" rel="nofollow">1， MongoDB 是什么</a></p> 
  <p id="2%EF%BC%8Cmongodb%E5%8F%91%E5%B1%95%E5%8F%B2-toc" style="margin-left:40px;"><a href="#2%EF%BC%8Cmongodb%E5%8F%91%E5%B1%95%E5%8F%B2" rel="nofollow">2，mongodb发展史</a></p> 
  <p id="3%EF%BC%8C%20MongoDB%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84-toc" style="margin-left:40px;"><a href="#3%EF%BC%8C%20MongoDB%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84" rel="nofollow">3， MongoDB的体系结构</a>​​​​​​​</p> 
  <p id="4%EF%BC%8CMongoDB%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B-toc" style="margin-left:40px;"><a href="#4%EF%BC%8CMongoDB%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B" rel="nofollow">4，MongoDB的数据模型</a></p> 
  <p id="5%EF%BC%8C%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF-toc" style="margin-left:40px;"><a href="#5%EF%BC%8C%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF" rel="nofollow">5，适用场景</a></p> 
  <p id="%E5%9B%9B%EF%BC%8CMongoDB%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E8%BF%9E%E6%8E%A5-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%EF%BC%8CMongoDB%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E8%BF%9E%E6%8E%A5" rel="nofollow">四，MongoDB的部署与连接</a></p> 
  <p id="1%EF%BC%8C%E5%AE%89%E8%A3%85-toc" style="margin-left:40px;"><a href="#1%EF%BC%8C%E5%AE%89%E8%A3%85" rel="nofollow">1，安装</a></p> 
  <p id="%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AE%E8%BD%AF%E4%BB%B6%E4%BB%93%E5%BA%93-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AE%E8%BD%AF%E4%BB%B6%E4%BB%93%E5%BA%93" rel="nofollow">（1）配置软件仓库</a></p> 
  <p id="%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85mongodb-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85mongodb" rel="nofollow">（2）安装mongodb</a></p> 
  <p id="%EF%BC%883%EF%BC%89%E6%9F%A5%E7%9C%8B%E5%AE%89%E8%A3%85%E7%9A%84%E6%9C%89%E5%85%B3mongo%E7%9A%84%E6%89%80%E6%9C%89%E5%8C%85-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E6%9F%A5%E7%9C%8B%E5%AE%89%E8%A3%85%E7%9A%84%E6%9C%89%E5%85%B3mongo%E7%9A%84%E6%89%80%E6%9C%89%E5%8C%85" rel="nofollow">（3）查看安装的有关mongo的所有包</a></p> 
  <p id="2%EF%BC%8C%E5%90%AF%E5%8A%A8-toc" style="margin-left:40px;"><a href="#2%EF%BC%8C%E5%90%AF%E5%8A%A8" rel="nofollow">2，启动</a></p> 
  <p id="%EF%BC%881%EF%BC%89%E5%90%AF%E5%8A%A8mongo%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E5%90%AF%E5%8A%A8mongo%E6%9C%8D%E5%8A%A1" rel="nofollow">（1）启动mongo服务</a></p> 
  <p id="%EF%BC%882%EF%BC%89%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF" rel="nofollow">（2）设置开机自启</a></p> 
  <p id="%EF%BC%883%EF%BC%89%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B" rel="nofollow">（3）查看进程</a></p> 
  <p id="%EF%BC%884%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8F%B7-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8F%B7" rel="nofollow">（4）查看端口号</a></p> 
  <p id="%EF%BC%885%EF%BC%89%E5%85%B3%E9%97%ADmongodb%E6%9C%8D%E5%8A%A1-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E5%85%B3%E9%97%ADmongodb%E6%9C%8D%E5%8A%A1" rel="nofollow">（5）关闭mongodb服务</a></p> 
  <p id="%EF%BC%886%EF%BC%89%E8%AE%BE%E7%BD%AEmongo%20shell%E7%9A%84%E6%8F%90%E7%A4%BA%E7%AC%A6-toc" style="margin-left:80px;"><a href="#%EF%BC%886%EF%BC%89%E8%AE%BE%E7%BD%AEmongo%20shell%E7%9A%84%E6%8F%90%E7%A4%BA%E7%AC%A6" rel="nofollow">（6）设置mongo shell的提示符</a></p> 
  <p id="3%EF%BC%8C%20%E4%BD%BF%E7%94%A8mongo%20shell%E8%BF%9E%E6%8E%A5-toc" style="margin-left:40px;"><a href="#3%EF%BC%8C%20%E4%BD%BF%E7%94%A8mongo%20shell%E8%BF%9E%E6%8E%A5" rel="nofollow">3， 使用mongo shell连接</a></p> 
  <p id="%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A" rel="nofollow">方法一：</a></p> 
  <p id="%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A" rel="nofollow">方法二：</a></p> 
  <p id="%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A" rel="nofollow">方法三：</a></p> 
  <p id="4%EF%BC%8C%E6%9F%A5%E7%9C%8Bmongo%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#4%EF%BC%8C%E6%9F%A5%E7%9C%8Bmongo%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">4，查看mongo的配置文件</a></p> 
  <p id="4%EF%BC%8C%20%E4%BD%BF%E7%94%A8MongoDB%20Compass%E8%BF%9E%E6%8E%A5-toc" style="margin-left:40px;"><a href="#4%EF%BC%8C%20%E4%BD%BF%E7%94%A8MongoDB%20Compass%E8%BF%9E%E6%8E%A5" rel="nofollow">5， 使用MongoDB Compass连接</a></p> 
  <p id="%E4%BA%94%EF%BC%8C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E4%BA%94%EF%BC%8C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" rel="nofollow">五，基本操作</a></p> 
  <p id="1%EF%BC%8C%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#1%EF%BC%8C%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C" rel="nofollow">1， 数据库操作</a></p> 
  <p id="2%EF%BC%8C%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#2%EF%BC%8C%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C" rel="nofollow">2，集合操作</a></p> 
  <p id="3%EF%BC%8C%20%E6%96%87%E6%A1%A3%E5%9F%BA%E6%9C%ACCRUD-toc" style="margin-left:40px;"><a href="#3%EF%BC%8C%20%E6%96%87%E6%A1%A3%E5%9F%BA%E6%9C%ACCRUD" rel="nofollow">3， 文档基本CRUD</a></p> 
  <p id="1%E3%80%81%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3" rel="nofollow">1、插入文档</a></p> 
  <p id="2%E3%80%81%E6%96%87%E6%A1%A3%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E6%96%87%E6%A1%A3%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2" rel="nofollow">2、文档的基本查询</a></p> 
  <p id="3%E3%80%81%E6%96%87%E6%A1%A3%E7%9A%84%E6%9B%B4%E6%96%B0-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E6%96%87%E6%A1%A3%E7%9A%84%E6%9B%B4%E6%96%B0" rel="nofollow">3、文档的更新</a></p> 
  <p id="4%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3-toc" style="margin-left:80px;"><a href="#4%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3" rel="nofollow">4、删除文档</a></p> 
  <hr id="hr-toc"> 
  <p></p> 
  <h2 id="%E4%B8%80%EF%BC%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span style="color:#0d0016;">一，数据库管理系统</span></h2> 
  <h3 id="1%EF%BC%8C%20%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93" style="margin-left:0;"><span style="color:#0d0016;">1， 什么是数据库 </span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">数据： 描述事物的符号记录， 可以是数字、 文字、图形、图像、声音、语言等，数据有多种形式，它们都可以经过数字化后存入计算机。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;">数据库： 存储数据的仓库，是长期存放在计算机内、有组织、可共享的大量数据的集合。数据库中的数据按照一定数据模型组织、描述和存储，具有较小的冗余度，较高的独立性和易扩展性，并为各种用户共享。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="2%EF%BC%8C%E4%BB%80%E4%B9%88%E6%98%AF%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F" style="margin-left:0;"><span style="color:#0d0016;">2，什么是数据库管理系统 </span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">数据库系统成熟的标志就是数据库管理系统的出现。数据库管理系统(DataBase ManagermentSystem，简称DBMS)是管理数据库的一个软件，是对数据库的一种完整和统一的管理和控制机制。数据库管理系统不仅让我们能够实现对数据的快速检索和维护，还为数据的安全性、完整性、并发控制和数据恢复提供了保证。数据库管理系统的核心是一个用来存储大量数据的数据库。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> 数据库管理系统主要分为俩大类：RDBMS、NOSQL。</span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h2 id="%E4%BA%8C%EF%BC%8C%20NoSQL%20%E6%98%AF%E4%BB%80%E4%B9%88" style="margin-left:0;"><span style="color:#0d0016;">二， NoSQL 是什么 </span></h2> 
  <h3 id="2%EF%BC%8CNoSQL%20%E7%AE%80%E4%BB%8B" style="margin-left:0;"><span style="color:#0d0016;">1，NoSQL 简介 </span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">NoSQL 是不同于传统的关系型数据库的数据库管理系统的统称。 两者存在许多显著的不同点，其中最重要的是NoSQL 不使用 SQL 作为查询语言。 其数据存储可以不需要固定的表格模式，也经常会避免使用 SQL 的 JOIN 操作，一般有水平可扩展性的特征。 NoSQL 一词最早出现于 1998 年，是 Carlo Strozzi 开发的一个轻量、开源、不提供 SQL 功能的关系数据库。 2009 年，Last.fm 的 Johan Oskarsson 发起了一次关于分布式开源数据库的讨论， 来自 Rackspace 的 Eric Evans 再次提出了 NoSQL 的概念，这时的 NoSQL 主要指非关系型、分布式、不提供 ACID 的数据库设计模式。 2009 年在亚特兰大举行的"no:sql(east)"讨论会是一个里程碑，其口号是"select fun, profit from real_world where relational=false;"。因此，对 NoSQL 最普遍的解释是“非关联型的”，强调 Key-Value Stores 和文档数据库的优点，而不是单纯的反对RDBMS。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="2%EF%BC%8CNoSQL%E6%95%B0%E6%8D%AE%E5%BA%93" style="margin-left:0;"><span style="color:#0d0016;">2，NoSQL数据库</span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;"> 传统的关系型数据库只能存储结构化数据，对于非结构化的数据支持不够完善。NoSQL数据库的产生就是为了解决大规模数据集合多重数据种类带来的挑战，尤其是大数据应用难题。根据不同的存储方式可以将NoSQL数据库分为以下几类：</span></p> 
  <ul><li>键值（Key-Value）存储数据库<br> 说明：这一类数据库主要会使用到一个哈希表，这个表中有一个特定的键和一个指针指向特定的数据。<br> Key/Value模型对于IT系统来说优势在于简单、易部署。<br> 应用：内容缓存，主要用于处理大量数据的高访问负载。<br> 产品：Tokyo Cabinet/Tyrant、Redis、Voldemort、Berkeley DB<br> 优势：快速查询<br> 劣势：存储的数据缺少结构化</li><li>列存储数据库<br> 说明：这部分数据库通常是用来应对分布式存储的海量数据。键仍然存在，但是它们的特点是指向了多个列，这些列是由列家族来安排的。<br> 应用：分布式文件系统<br> 产品：Cassandra，HBase，Riak<br> 优势：查找速度快，可扩展性强，更容易进行分布式扩展<br> 劣势：功能相对局限</li><li>文档型数据库<br> 说明：该类型的数据模型是版本化的文档，半结构化的文档以特定的格式存储，如JSON。文档型数据库可以看作是键值数据库的升级版，允许之间嵌套键值。而且文档型数据库比键值数据库的查询效率更高。<br> 应用：Web应用<br> 产品：CouchDB，MongoDB<br> 优势：数据结构要求不严格<br> 劣势：查询性能不高，且缺乏统一的查询语法</li><li>图形（Graph）数据库<br> 说明：图形结构的数据库同其他行列以及刚性结构的SQL数据库不同，它是使用灵活的图形模型，并且能够扩展到多个服务器上。NoSQL数据库没有标准的查询语言（SQL），因此进行数据库查询需要制定数据模型。许多NoSQL数据库都有REST格式的数据接口或者查询API。<br> 应用：社交网络<br> 产品： Neo4j，InfoGrid，Infinite Graph<br> 优势：利用图结构相关算法<br> 劣势：需要对整个图做计算才能得出结果，不容易做分布式的集群方案</li></ul> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="3%EF%BC%8CNoSQL%20%E4%B8%8E%20RDBMS%20%E5%AF%B9%E6%AF%94" style="margin-left:0;"><span style="color:#0d0016;">3，NoSQL 与 RDBMS 对比 </span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">RDBMS ：</span></p> 
  <ul><li>高度组织化结构化数据</li><li>结构化查询语言（SQL）， 数据和关系都存储在单独的表中。</li><li>数据操纵语言，数据定义语言严格的一致性</li><li>事务遵循ACID特性</li></ul> 
  <p style="margin-left:0;"><span style="color:#333333;">NoSQL ：</span></p> 
  <ul><li>代表着不仅仅是 SQL</li><li>没有标准的查询语言</li><li>键-值对存储，列存储，文档存储，图形数据库，最终一致性，而非 ACID 属性</li><li>可以应对高并发读写请求，海量数据的高效率存储和访问需求，满足对数据库的高可伸缩性和高可用性的需求</li></ul> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h2 id="%E4%B8%89%EF%BC%8CMongoDB%E7%AE%80%E4%BB%8B" style="margin-left:0;"><span style="color:#0d0016;">三，MongoDB简介 </span></h2> 
  <h3 id="1%EF%BC%8C%20MongoDB%20%E6%98%AF%E4%BB%80%E4%B9%88" style="margin-left:0;"><span style="color:#0d0016;">1， MongoDB 是什么 </span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">MongoDB 是由 C++语言编写的，是一个高性能的基于分布式文件存储的开源数据库系统，是NoSQL数据库产品中的一种。MongoDB 旨在为 WEB 应用提供可扩展的高性能数据存储解决方案， 在高负载的情况下，可以添加更多的节点保证服务器性能。MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象，即一个文档认为就是一个对象，字段的数据类型是字符型，字段值除了使用基本的一些类型外，还可以包含其他文档，数组及文档数组。</span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><img alt="" height="254" src="https://images2.imgbox.com/13/5a/RKzhksfq_o.jpg" width="703">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h3 id="2%EF%BC%8Cmongodb%E5%8F%91%E5%B1%95%E5%8F%B2" style="margin-left:0;"><span style="color:#0d0016;">2，mongodb发展史</span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">2007 年 10 月，MongoDB 由 10gen 团队所发展。2009 年 2 月首度推出。 2012 年 05 月 23 日，MongoDB2.1 开发分支发布了! 该版本采用全新架构，包含诸多增强。 2012 年 06 月 06 日，MongoDB 2.0.6 发布，分布式文档数据库。 2013 年 04 月 23 日，MongoDB 2.4.3 发布，此版本包括了一些性能优化，功能增强以及 bug 修复。 2013 年 08 月 20 日，MongoDB 2.4.6 发布。 2013 年 11 月 01 日，MongoDB 2.4.8 发布。 2017年03月17日，MongoDB 3.0.1发布。 2018年08月06日，MongoDB 4.0.2发布，支持多文档事务。 2019年08月13日，MongoDB 4.2.0 发布 ，引入分布式事务。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="3%EF%BC%8C%20MongoDB%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84" style="margin-left:0;"><span style="color:#0d0016;">3， MongoDB的体系结构</span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">Mysql和MongoDB对比：关系型数据库中有数据库，表和行记录；对应着MongoDB中的数据库，集合，文档。</span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><img alt="" height="572" src="https://images2.imgbox.com/ca/18/Aw0Trrw3_o.jpg" width="703">​</p> 
  <div> 
   <table cellspacing="0"><tbody><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.4201in;"> <p style="margin-left:0;"><strong>SQL</strong><strong>术语</strong><strong>/</strong><strong>概念</strong></p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.309in;"> <p style="margin-left:0;"><strong>MongoDB</strong><strong>术语</strong><strong>/</strong><strong>概念</strong></p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:1.4201in;"> <p style="margin-left:0;">database，数据库</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.309in;"> <p style="margin-left:0;">database，数据库</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.4201in;"> <p style="margin-left:0;">table，表</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.309in;"> <p style="margin-left:0;">collection，集合</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:1.4201in;"> <p style="margin-left:0;">row，记录行</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.309in;"> <p style="margin-left:0;">document，文档</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.4395in;"> <p style="margin-left:0;">column，数据字段</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.2895in;"> <p style="margin-left:0;">field，域</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:1.4201in;"> <p style="margin-left:0;">index，索引</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.309in;"> <p style="margin-left:0;">index，索引</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.4201in;"> <p style="margin-left:0;">primary key，主键</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.3784in;"> <p style="margin-left:0;">primary key，MongoDB自动将_id字段设置为主键</p> </td></tr></tbody></table> 
  </div> 
  <p style="margin-left:0;"><span style="color:#333333;">通过下图示例，我们可以更直观的了解MongoDB中的一些概念：</span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><img alt="" height="419" src="https://images2.imgbox.com/9d/c5/LvWxwOLV_o.png" width="1200">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="%C2%A0" style="margin-left:0;"><span style="color:#2e75b5;"> </span></h3> 
  <h3 id="4%EF%BC%8CMongoDB%E7%9A%84%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B" style="margin-left:0;"><span style="color:#0d0016;">4，MongoDB的数据模型</span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">MongoDB的最小存储单位就是文档(document)对象。文档(document)对象对应于关系型数据库的行。数据在MongoDB中以BSON（Binary-JSON）文档的格式存储在磁盘上。 BSON（Binary Serialized Document Format）是一种类json的一种二进制形式的存储格式，简称Binary JSON。BSON和JSON一样，支持内嵌的文档对象和数组对象，但是BSON有JSON没有的一些数据类型，如Date和BinData类型。 BSON采用了类似于 C 语言结构体的名称、对表示方法，支持内嵌的文档对象和数组对象，具有轻量性、可遍历性、高效性的三个特点，可以有效描述非结构化数据和结构化数据。这种格式的优点是灵活性高，但它的缺点是空间利用率不是很理想。 Bson中，除了基本的JSON类型：string,integer,boolean,double,null,array和object，mongo还使用了特殊的数据类型。这些类型包括date，object id，binary data，regular expression 和code。每一个驱动都以特定语言的方式实现了这些类型，查看你的驱动的文档来获取详细信息。 BSON数据类型参考列表：</span></p> 
  <div> 
   <table cellspacing="0"><tbody><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;"><strong>数据类型</strong></p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;"><strong>描述</strong></p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;"><strong>举例</strong></p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">字符串</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">UTF-8字符串都可表示为字符串类型的数据</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;">{"x" : "foobar"}</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">对象id</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">对象id是文档的12字节的唯一 ID</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;">{"X" :ObjectId() }</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">布尔值</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">真或者假：true或者false</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;">{"x":true}+</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">数组</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">值的集合或者列表可以表示成数组</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;">{"x" ： ["a", "b", "c"]}</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">32位整数</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">类型不可用。JavaScript仅支持64位浮点数，所以32位整数会被 自动转换。</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.2298in;"> <p style="margin-left:0;">shell是不支持该类型的，shell中默认会转换成64 位浮点数</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">64位整数</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">不支持这个类型。shell会使用一个特殊的内嵌文档来显示64位整数</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.2298in;"> <p style="margin-left:0;">shell是不支持该类型的，shell中默认会转换成64 位浮点数</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.975in;"> <p style="margin-left:0;">64位浮点数</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">shell中的数字就是这一种类型</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.1569in;"> <p style="margin-left:0;">{"x"：3.14159，"y"：3}</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">null</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">表示空值或者未定义的对象</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;">{"x":null}</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">undefined</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">文档中也可以使用未定义类型</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;">{"x":undefined}</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">符号</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">shell不支持，shell会将数据库中的符号类型的数据自动转换成 字符串</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;"></p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.975in;"> <p style="margin-left:0;">正则表达式</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">文档中可以包含正则表达式，采用JavaScript的正则表达式语法</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.1569in;"> <p style="margin-left:0;">{"x" ： /foobar/i}</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">代码</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">文档中还可以包含JavaScript代码</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.2041in;"> <p style="margin-left:0;">{"x" ： function() { /* …… */ }}</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:.975in;"> <p style="margin-left:0;">二进制数据</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.9631in;"> <p style="margin-left:0;">二进制数据可以由任意字节的串组成，不过shell中无法使用</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:2.1458in;"> <p style="margin-left:0;"></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:.9555in;"> <p style="margin-left:0;">最大值/最 小值</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.9513in;"> <p style="margin-left:0;">BSON包括一个特殊类型，表示可能的最大值。shell中没有这个类型</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:2.1763in;"> <p style="margin-left:0;"></p> </td></tr></tbody></table> 
  </div> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="5%EF%BC%8C%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF" style="margin-left:0;"><span style="color:#0d0016;">5，适用场景 </span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">具体的应用场景如：</span></p> 
  <ul><li>社交场景，使用 MongoDB 存储用户信息，以及用户发表的朋友圈信息，通过地理位置索引实现附近的人、地点等功能。</li><li>游戏场景，使用 MongoDB 存储游戏用户信息，用户的装备、积分等直接以内嵌文档的形式存储，方便查询、高效率存储和访问。</li><li>物流场景，使用 MongoDB 存储订单信息，订单状态在运送过程中会不断更新，以 MongoDB 内嵌数组的形式来存储，一次查询就能将订单所有的变更读取出来。</li><li>物联网场景，使用 MongoDB 存储所有接入的智能设备信息，以及设备汇报的日志信息，并对这些信息进行多维度的分析。</li><li>视频直播，使用 MongoDB 存储用户信息、点赞互动信息等。</li></ul> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><img alt="" height="439" src="https://images2.imgbox.com/7c/17/OhA6aM1s_o.jpg" width="703">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> 这些应用场景中，数据操作方面的共同特点是： （1）数据量大 （2）写入操作频繁（读写都很频繁） （3）价值较低的数据，对事务性要求不高 对于这样的数据，我们更适合使用MongoDB来实现数据的存储。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;">在架构选型上，除了上述的三个特点外，如果你还犹豫是否要选择它？可以考虑以下的一些问题：</span></p> 
  <ul><li>应用不需要事务及复杂 join 支持</li><li>新应用，需求会变，数据模型无法确定，想快速迭代开发</li><li>应用需要2000-3000以上的读写QPS（更高也可以）</li><li>应用需要TB甚至 PB 级别数据存储</li><li>应用发展迅速，需要能快速水平扩展</li><li>应用要求存储的数据不丢失</li><li>应用需要99.999%高可用</li><li>应用需要大量的地理位置查询、文本查询</li></ul> 
  <p style="margin-left:0;"><span style="color:#333333;">如果上述有1个符合，可以考虑 MongoDB，2个及以上的符合，选择 MongoDB 绝不会后悔。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h2 id="%E5%9B%9B%EF%BC%8CMongoDB%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E8%BF%9E%E6%8E%A5" style="margin-left:0;"><span style="color:#0d0016;">四，MongoDB的部署与连接 </span></h2> 
  <h3 id="1%EF%BC%8C%E5%AE%89%E8%A3%85" style="margin-left:0;"><span style="color:#0d0016;">1，安装 </span></h3> 
  <h4 id="%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AE%E8%BD%AF%E4%BB%B6%E4%BB%93%E5%BA%93" style="margin-left:0px;"><span style="color:#0d0016;">（1）配置软件仓库</span></h4> 
  <div> 
   <pre><code>  [root@localhost yum.repos.d]# vim mongodb.repo</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="77" src="https://images2.imgbox.com/52/2a/WEY1YEeV_o.png" width="801">​</p> 
  <p></p> 
  <blockquote> 
   <p style="margin-left:0;"> [mongodb]</p> 
   <p style="margin-left:0;">name=mongo</p> 
   <p style="margin-left:0;">baseurl=https://mirrors.aliyun.com/mongodb/yum/redhat/8Server/mongodb-org/4.4/x86_64/</p> 
   <p style="margin-left:0;">gpgcheck=0</p> 
   <p style="margin-left:0;">#gpgkey=https://www.mongodb.org/static/pgp/server-4.4.asc</p> 
  </blockquote> 
  <p style="margin-left:0;"><img alt="" height="198" src="https://images2.imgbox.com/80/89/j6MuFZgx_o.png" width="1200">​</p> 
  <p></p> 
  <h4 id="%EF%BC%882%EF%BC%89%E5%AE%89%E8%A3%85mongodb" style="margin-left:0px;"><span style="color:#0d0016;">（2）安装mongodb</span></h4> 
  <div> 
   <pre><code> [root@localhost yum.repos.d]# yum install mongodb-org -y</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="836" src="https://images2.imgbox.com/81/66/nQsE74Ju_o.png" width="1200">​</p> 
  <p style="margin-left:0;"><img alt="" height="379" src="https://images2.imgbox.com/0b/76/TGorO9Dd_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="%EF%BC%883%EF%BC%89%E6%9F%A5%E7%9C%8B%E5%AE%89%E8%A3%85%E7%9A%84%E6%9C%89%E5%85%B3mongo%E7%9A%84%E6%89%80%E6%9C%89%E5%8C%85" style="margin-left:0px;">（3）查看安装的有关mongo的所有包</h4> 
  <div> 
   <pre><code> [root@localhost ~]# rpm -qa | grep mongo</code></pre> 
  </div> 
  <blockquote> 
   <p style="margin-left:0;">mongodb-org-mongos-4.4.17-1.el8.x86_64  <span style="color:#aa5500;">#mongos</span><span style="color:#aa5500;">指令</span></p> 
   <p style="margin-left:0;">mongodb-org-server-4.4.17-1.el8.x86_64  <span style="color:#aa5500;">#</span><span style="color:#aa5500;">包含</span><span style="color:#aa5500;">mongod</span><span style="color:#aa5500;">进程，相关初始化脚本和配置文件</span></p> 
   <p style="margin-left:0;">mongodb-org-shell-4.4.17-1.el8.x86_64  <span style="color:#aa5500;">#</span><span style="color:#aa5500;">包含了</span><span style="color:#aa5500;">mongo shell</span></p> 
   <p style="margin-left:0;">mongodb-database-tools-100.6.1-1.x86_64  <span style="color:#aa5500;">#</span><span style="color:#aa5500;">包含</span><span style="color:#aa5500;">MongoDB</span><span style="color:#aa5500;">的工具：</span><span style="color:#aa5500;"> mongoimport, bsondump, mongodump, mongoexport, mongofiles, mongorestore, mongostat, mongotop</span><span style="color:#aa5500;">。</span></p> 
   <p style="margin-left:0;">mongodb-org-database-tools-extra-4.4.17-1.el8.x86_64  <span style="color:#aa5500;">#</span><span style="color:#aa5500;">包含</span><span style="color:#aa5500;">install_compass</span><span style="color:#aa5500;">脚本</span></p> 
   <p style="margin-left:0;">mongodb-org-tools-4.4.17-1.el8.x86_64 <span style="color:#aa5500;">#mongodb</span><span style="color:#aa5500;">工具元数据包</span></p> 
   <p style="margin-left:0;">mongodb-org-4.4.17-1.el8.x86_64  <span style="color:#aa5500;">#</span><span style="color:#aa5500;">元数据包，安装这个包会自动安装上面的包</span></p> 
  </blockquote> 
  <p style="margin-left:0;"><img alt="" height="289" src="https://images2.imgbox.com/dc/21/Z7BvlGWf_o.png" width="863">​</p> 
  <p style="margin-left:0;"></p> 
  <p></p> 
  <p style="margin-left:0;"><span style="color:#777777;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#777777;"> </span></p> 
  <h3 id="2%EF%BC%8C%E5%90%AF%E5%8A%A8" style="margin-left:0;"><span style="color:#0d0016;">2，启动</span></h3> 
  <h4 id="%EF%BC%881%EF%BC%89%E5%90%AF%E5%8A%A8mongo%E6%9C%8D%E5%8A%A1">（1）启动mongo服务</h4> 
  <p style="margin-left:0;"></p> 
  <div> 
   <pre><code>[root@localhost yum.repos.d]# systemctl start mongod</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="87" src="https://images2.imgbox.com/e3/98/7T9qmDoU_o.png" width="896">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="%EF%BC%882%EF%BC%89%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF" style="margin-left:0px;">（2）设置开机自启</h4> 
  <div> 
   <pre><code>[root@localhost yum.repos.d]# systemctl enable mongod</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="85" src="https://images2.imgbox.com/ae/9d/IOhe7Ood_o.png" width="880">​</p> 
  <p style="margin-left:0;"></p> 
  <h4 id="%EF%BC%883%EF%BC%89%E6%9F%A5%E7%9C%8B%E8%BF%9B%E7%A8%8B" style="margin-left:0px;">（3）查看进程</h4> 
  <div> 
   <pre><code>[root@localhost yum.repos.d]# ps -ef | grep mongo</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="154" src="https://images2.imgbox.com/e2/80/91ME6taE_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="%EF%BC%884%EF%BC%89%E6%9F%A5%E7%9C%8B%E7%AB%AF%E5%8F%A3%E5%8F%B7" style="margin-left:0px;">（4）查看端口号</h4> 
  <p style="margin-left:0;">只能自己访问自己127.0.0.1</p> 
  <div> 
   <pre><code>[root@localhost yum.repos.d]# ss -lntup | grep mongo</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="112" src="https://images2.imgbox.com/08/3c/s5nprMBV_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="%EF%BC%885%EF%BC%89%E5%85%B3%E9%97%ADmongodb%E6%9C%8D%E5%8A%A1" style="margin-left:0px;"><span style="color:#0d0016;">（5）关闭mongodb服务</span></h4> 
  <div> 
   <pre><code>[root@mysql8-0-30 ~]# systemctl  stop mongod</code></pre> 
  </div> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <h4 id="%EF%BC%886%EF%BC%89%E8%AE%BE%E7%BD%AEmongo%20shell%E7%9A%84%E6%8F%90%E7%A4%BA%E7%AC%A6" style="margin-left:0px;"><span style="color:#0d0016;">（6）设置mongo shell的提示符</span></h4> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span>[root@mysql8-0-30 ~]<span style="color:#aa5500;"># cat .mongorc.js</span></p> 
  <blockquote> 
   <p style="margin-left:0;">  prompt = function() {<!-- --></p> 
   <p style="margin-left:0;">      return db + "&gt;";</p> 
   <p style="margin-left:0;">}</p> 
  </blockquote> 
  <p style="margin-left:0;"><img alt="" height="251" src="https://images2.imgbox.com/ed/09/wkd5fXXJ_o.png" width="681">​</p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"> 此时登录数据库，默认使用的数据库为test数据库</span></p> 
  <p style="margin-left:0;"><img alt="" height="127" src="https://images2.imgbox.com/b5/b8/Lrq7t0f7_o.png" width="342">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"></p> 
  <h3 id="3%EF%BC%8C%20%E4%BD%BF%E7%94%A8mongo%20shell%E8%BF%9E%E6%8E%A5" style="margin-left:0;"><span style="color:#0d0016;">3， 使用mongo shell连接 </span></h3> 
  <blockquote> 
   <p style="margin-left:0;"><span style="color:#333333;">语法：<span style="background-color:#f3f4f4;">mongo --host 主机名 --port 端口号 [-u 用户名 -p 密码]</span></span></p> 
  </blockquote> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h4 id="%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A" style="margin-left:0px;"><span style="color:#333333;"><span style="background-color:#f3f4f4;"><strong>方法一：</strong></span></span></h4> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <div> 
   <pre><code>[root@localhost yum.repos.d]# mongo --host 127.0.0.1 --port 27017</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="877" src="https://images2.imgbox.com/16/a9/C47INV6G_o.png" width="1200">​</p> 
  <p style="margin-left:0;">查看数据库</p> 
  <div> 
   <pre><code>&gt; show dbs</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="308" src="https://images2.imgbox.com/88/9f/8UpOpqeu_o.png" width="678">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A" style="margin-left:0px;"><strong>方法二：</strong></h4> 
  <div> 
   <pre><code>[root@localhost yum.repos.d]# mongo</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="984" src="https://images2.imgbox.com/bf/be/aZcO8cT4_o.png" width="1200">​</p> 
  <p style="margin-left:0;">查看所有的数据库</p> 
  <div> 
   <pre><code>&gt; show databases</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="280" src="https://images2.imgbox.com/ae/89/TgEjMCoE_o.png" width="678">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9A" style="margin-left:0px;">方法三：</h4> 
  <div> 
   <pre><code>[root@localhost ~]# mongo mongodb://127.0.0.1:27017/</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="872" src="https://images2.imgbox.com/4c/5f/KklFsgJc_o.png" width="1200">​</p> 
  <p style="margin-left:0;">查看所有的数据库</p> 
  <div> 
   <pre><code>&gt; show databases</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="279" src="https://images2.imgbox.com/ec/eb/Zyi8A7Th_o.png" width="676">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h3 id="4%EF%BC%8C%E6%9F%A5%E7%9C%8Bmongo%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" style="margin-left:0px;"><strong>4，查看</strong><strong>mongo</strong><strong>的配置文件</strong></h3> 
  <div> 
   <pre><code>[root@localhost ~]# vim /etc/mongod.conf</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="80" src="https://images2.imgbox.com/c9/61/0sRwQ3GJ_o.png" width="774">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>日志</strong></p> 
  <blockquote> 
   <p style="margin-left:0;"># where to write logging data.</p> 
   <p style="margin-left:0;">systemLog:         系统日志</p> 
   <p style="margin-left:0;">  destination: file  #MongoDB发送所有日志输出的目标指定为文件</p> 
   <p style="margin-left:0;">  logAppend: true #当mongos或mongod实例重新启动时，mongos或mongod会将新条目附加</p> 
   <p style="margin-left:0;">到现有日志文件的末尾。</p> 
   <p style="margin-left:0;">  path: /var/log/mongodb/mongod.log  #mongod或mongos所有诊断日志记录信息的日志文件路径</p> 
  </blockquote> 
  <p style="margin-left:0;"><img alt="" height="187" src="https://images2.imgbox.com/6f/e7/0RJCRy7i_o.png" width="686">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>存储数据</strong></p> 
  <blockquote> 
   <p style="margin-left:0;">​# Where and how to store data.</p> 
   <p style="margin-left:0;">storage:     存储</p> 
   <p style="margin-left:0;">  dbPath: /var/lib/mongo   #mongod实例存储其数据的目录，storage.dbPath设置仅适用于mongod。</p> 
   <p style="margin-left:0;">  journal:    日志</p> 
   <p style="margin-left:0;">    enabled: true #启用持久性日志以确保数据文件保持有效和可恢复。</p> 
   <p style="margin-left:0;">#  engine:</p> 
   <p style="margin-left:0;">#  wiredTiger:</p> 
  </blockquote> 
  <p style="margin-left:0;">​<img alt="" height="263" src="https://images2.imgbox.com/0a/b5/kDmCFClv_o.png" width="685">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><strong>进程</strong></p> 
  <blockquote> 
   <p style="margin-left:0;"># how the process runs</p> 
   <p style="margin-left:0;">processManagement:       进程管理</p> 
   <p style="margin-left:0;">  fork: true #启用在后台运行mongos或mongod进程的守护进程模式。</p> 
   <p style="margin-left:0;">  pidFilePath: /var/run/mongodb/mongod.pid  # location of pidfile      pid路径</p> 
   <p style="margin-left:0;">  timeZoneInfo: /usr/share/zoneinfo</p> 
  </blockquote> 
  <p style="margin-left:0;">​<img alt="" height="178" src="https://images2.imgbox.com/36/95/fgb7M5ok_o.png" width="1087">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> 网络</strong></span></p> 
  <p style="margin-left:0;">此处把bindip改为0.0.0.0 方便后面客户端连接</p> 
  <blockquote> 
   <p style="margin-left:0;"># network interfaces</p> 
   <p style="margin-left:0;">net:</p> 
   <p style="margin-left:0;">  port: 27017  #绑定的端口，默认是27017</p> 
   <p style="margin-left:0;">  bindIp: 0.0.0.0  # Enter 0.0.0.0,:: to bind to all IPv4 and IPv6 addresses or, alternatively, use the net.bindIpAll setting.</p> 
  </blockquote> 
  <p style="margin-left:0;"><img alt="" height="200" src="https://images2.imgbox.com/a2/a9/I8rbgxVd_o.png" width="1200">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>Mongodb的一些内建角色。</strong></span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">1.数据库用户角色：read、readWrite;</span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">2.数据库管理角色：dbAdmin、dbOwner、userAdmin；</span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">3.集群管理角色：clusterAdmin、clusterManager、clusterMonitor、hostManager；</span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">4.备份恢复角色：backup、restore；</span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">5.所有数据库角色：readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase</span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">6.超级用户角色：root</span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">7.系统角色：__system</span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="4%EF%BC%8C%20%E4%BD%BF%E7%94%A8MongoDB%20Compass%E8%BF%9E%E6%8E%A5" style="margin-left:0;"><span style="color:#0d0016;">5， 使用MongoDB Compass连接</span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">可以在官网下载： </span><a href="https://downloads.mongodb.com/compass/mongodb-compass-1.35.0-win32-x64.exe" rel="nofollow" title="https://downloads.mongodb.com/compass/mongodb-compass-1.35.0-win32-x64.exe">https://downloads.mongodb.com/compass/mongodb-compass-1.35.0-win32-x64.exe</a></p> 
  <p style="margin-left:0;"><strong>关闭防火墙</strong></p> 
  <div> 
   <pre><code>[root@localhost ~]# systemctl status firewalld </code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="200" src="https://images2.imgbox.com/0d/0f/lmpJX7jp_o.png" width="1200">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><strong><span style="color:#0d0016;">直接打开下载好的exe文件连接mongodb数据库即可，连接成功后如图</span></strong></p> 
  <p style="margin-left:0;"><img alt="" height="747" src="https://images2.imgbox.com/04/34/0IUl7XvP_o.png" width="1200">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h2 id="%E4%BA%94%EF%BC%8C%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C" style="margin-left:0;"><span style="color:#0d0016;">五，基本操作</span></h2> 
  <p style="margin-left:0;">mongo shell里面支持使用帮助，也支持使用上下键查看命令历史</p> 
  <p style="margin-left:0;"><strong>（1）查看帮助</strong></p> 
  <div> 
   <pre><code>&gt; help</code></pre> 
  </div> 
  <p style="margin-left:0;"></p> 
  <h3 id="1%EF%BC%8C%20%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C" style="margin-left:0;"><span style="color:#0d0016;">1， 数据库操作</span></h3> 
  <p style="margin-left:0;"><strong>（1）查看数据库的帮助</strong></p> 
  <div> 
   <pre><code>&gt; db.help()</code></pre> 
  </div> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（2）使用数据库</strong><strong>mytest</strong></p> 
  <p style="margin-left:0;">选择使用一个数据库，如果数据库不存在则会自动创建。</p> 
  <div> 
   <pre><code>test&gt;use mytest</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="213" src="https://images2.imgbox.com/96/64/szNrhgWg_o.png" width="677">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（3）查看所有的数据库，因为数据库</strong><strong>mytest</strong><strong>里面没有数据，所以不显示</strong></p> 
  <div> 
   <pre><code>mytest&gt;show dbs</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="224" src="https://images2.imgbox.com/87/fc/VUBe5WXV_o.png" width="674">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（4）删除数据库</strong></p> 
  <p style="margin-left:0;">  先创建一个数据库mytest1</p> 
  <div> 
   <pre><code>mytest&gt;use mytest1</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="179" src="https://images2.imgbox.com/cf/f7/p8Jy1EUT_o.png" width="668">​</p> 
  <p style="margin-left:0;">  删除数据库mytest1</p> 
  <div> 
   <pre><code>mytest1&gt;db.dropDatabase()</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="143" src="https://images2.imgbox.com/f1/f6/7xUKWD9Q_o.png" width="671">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（5）查看当前使用的数据库，MongoDB 中默认的数据库为 test，如果你没有选择数据库，集合将存放在 test 数据库中。</strong></p> 
  <blockquote> 
   <p style="margin-left:0;">&gt; db</p> 
   <p style="margin-left:0;">test</p> 
   <p style="margin-left:0;">&gt; db.getName()</p> 
   <p style="margin-left:0;">test</p> 
  </blockquote> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（6）查看当前库状态</strong></p> 
  <div> 
   <pre><code>&gt; db.stats()</code></pre> 
  </div> 
  <p style="margin-left:0;"><span style="color:#333333;">数据库名可以是满足以下条件的任意UTF-8字符串。</span></p> 
  <ul><li>不能是空字符串（"")。</li><li>不得含有' '（空格)、.、$、/、\和\0 (空字符)。</li><li>应全部小写。</li><li>最多64字节。</li></ul> 
  <p style="margin-left:0;"><span style="color:#333333;">有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库。</span></p> 
  <ul><li>admin： 从权限的角度来看，这是"root"数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。</li><li>local: 这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合</li><li>config: 当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。</li></ul> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="2%EF%BC%8C%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C" style="margin-left:0;"><span style="color:#0d0016;">2，集合操作</span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">Collection，集合，类似关系型数据库中的表。可以显示的创建，也可以隐式的创建（当向一个集合中插入一个文档的时候，如果集合不存在，则会自动创建集合 ）。</span></p> 
  <blockquote> 
   <p style="margin-left:0;"><span style="color:#333333;">语法：<span style="background-color:#f3f4f4;">db.createCollection(name, {capped: &lt;Boolean&gt;, autoIndexId: &lt;Boolean&gt;, size:&lt;number&gt;, max:&lt;number&gt;} )</span></span></p> 
  </blockquote> 
  <p style="margin-left:0;"><span style="color:#333333;">说明：</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;">（1）name表示要创建的集合名称，集合的命名规范：</span></p> 
  <ul><li>集合名不能是空字符串""。</li><li>集合名不能含有\0字符（空字符)，这个字符表示集合名的结尾。</li><li>集合名不能以"system."开头，这是为系统集合保留的前缀。</li><li>用户创建的集合名字不能含有保留字符。有些驱动程序的确支持在集合名里面包含，这是因为某些系统生成的集合中包含该字符。除非你要访问这种系统创建的集合，否则千万不要在名字里出现$。</li></ul> 
  <p style="margin-left:0;"><span style="color:#333333;">（2）capped：（可选，默认不启用）如果为true，则创建固定集合。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档。当该值为true时，必须指定size参数。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;">（3）size：（可选，默认为没有限制）限制集合使用空间的大小，即字节数，size的优先级比max要高。如果capped为true，也需要指定该字段。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;">（4）max：（可选，默认为没有限制）指定固定集合中包含文档的最大数量。 （5）autoIndexId：（可选，默认使用_id作为索引）是否使用_id作为索引，值为true或false。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><img alt="" height="231" src="https://images2.imgbox.com/61/cf/6Y9CbSR2_o.png" width="406">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"><strong>（1）在数据库</strong><strong>mytest</strong><strong>下面创建一个集合</strong><strong>books</strong></span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <div> 
   <pre><code>mytest&gt;db.createCollection("books")</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="122" src="https://images2.imgbox.com/de/72/G7q4UQif_o.png" width="696">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"><strong>（2）此时查看所有数据库，发现数据库</strong><strong>mytest</strong><strong>已经创建成功</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;show dbs</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="287" src="https://images2.imgbox.com/83/f6/qbZgjxuK_o.png" width="673">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> 重载数据库，mytest在图形化界面也创建成功</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span><img alt="" height="494" src="https://images2.imgbox.com/0c/6a/yLjKuF5y_o.png" width="566">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span><img alt="" height="168" src="https://images2.imgbox.com/e6/f5/158ihhTE_o.png" width="511">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;">  </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"><strong>（3）再次在数据库</strong><strong>mytest</strong><strong>中创建一个集合</strong><strong>account</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.createCollection("account")</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="122" src="https://images2.imgbox.com/e3/46/DoIqtjh1_o.png" width="672">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（4）创建固定集合student，整个集合空间大小 6142800 KB, 文档最大个数为10000 个</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.createCollection("student",{capped:true,autoIndexId:true,size:6142800,max:10000})</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="202" src="https://images2.imgbox.com/6a/70/QGiRQFOm_o.png" width="1200">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（5）查看当前库中的表</strong></span></p> 
  <div> 
   <pre><code>mytest&gt; show tables</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="244" src="https://images2.imgbox.com/39/ee/uBXmE0bO_o.png" width="672">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><strong><span style="color:#0d0016;">（6）查看当前数据库中的所有的集合</span></strong></p> 
  <p style="margin-left:0;"><strong><span style="color:#0d0016;">命令一：</span></strong></p> 
  <div> 
   <pre><code>mytest&gt;show collections</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="237" src="https://images2.imgbox.com/1e/ce/GPnJT0zT_o.png" width="668">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>命令二：</strong></p> 
  <div> 
   <pre><code>mytest&gt; db.getCollectionNames()</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="132" src="https://images2.imgbox.com/47/95/3Kwfd7Ys_o.png" width="667">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> （7）查看指定的集合</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.getCollection("books")</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="128" src="https://images2.imgbox.com/3f/df/uvQBdo0C_o.png" width="669">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> （8）删除books集合，成功删除返回true，否则返回false</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.books.drop()</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="169" src="https://images2.imgbox.com/40/ee/b4NrluZ6_o.png" width="675">​</p> 
  <p style="margin-left:0;">查看删除books集合后的所有集合</p> 
  <p style="margin-left:0;"><img alt="" height="290" src="https://images2.imgbox.com/10/3f/0UkaAdBp_o.png" width="665">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（9）获得当前的集合所在的DB，若没有集合，返回当前库的集合</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.books.getDB()</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="176" src="https://images2.imgbox.com/eb/d1/OQj0hDON_o.png" width="668">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> （10）查看当前集合的状态</strong></span></p> 
  <div> 
   <pre><code>&gt; db.account.stats()</code></pre> 
  </div> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（11）查询当前集合的数据条数</strong></span></p> 
  <div> 
   <pre><code>mytest&gt; db.account.count()</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="163" src="https://images2.imgbox.com/bd/ae/XxiPUX59_o.png" width="669">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> （12）查询当前集合数据空间大小</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.account.dataSize()</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="138" src="https://images2.imgbox.com/c1/05/hSsdmKnl_o.png" width="679">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（13）查询当前集合总大小</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.account.totalSize()</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="157" src="https://images2.imgbox.com/32/6b/rVV6fYOM_o.png" width="680">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（14）集合重命名</strong></span></p> 
  <div> 
   <pre><code>mytest&gt;db.account.renameCollection("ACCOUNT")</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="216" src="https://images2.imgbox.com/d6/43/n8PXqESJ_o.png" width="772">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（15）查看集合的帮助</strong></span></p> 
  <div> 
   <pre><code>&gt; db.account.help()</code></pre> 
  </div> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h3 id="3%EF%BC%8C%20%E6%96%87%E6%A1%A3%E5%9F%BA%E6%9C%ACCRUD" style="margin-left:0;"><span style="color:#0d0016;">3， 文档基本CRUD</span></h3> 
  <p style="margin-left:0;"><span style="color:#333333;">文档（document）的数据结构和 JSON 基本一样。 所有存储在集合中的数据都是 BSON 格式。</span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h4 id="1%E3%80%81%E6%8F%92%E5%85%A5%E6%96%87%E6%A1%A3" style="margin-left:0px;"><span style="color:#333333;"><strong>1、插入文档</strong></span></h4> 
  <blockquote> 
   <p style="margin-left:0;">test&gt; use mytest</p> 
   <p style="margin-left:0;">switched to db mytest</p> 
   <p style="margin-left:0;">mytest&gt; show collections</p> 
   <p style="margin-left:0;">ACCOUNT</p> 
   <p style="margin-left:0;">mytest&gt;</p> 
  </blockquote> 
  <p style="margin-left:0;"><strong>插入单条文档，返回WriteResult({ "nInserted" : 1 })</strong><strong>表示插入成功</strong></p> 
  <div> 
   <pre><code>mytest&gt;db.ACCOUNT.insert({id:201,name:"zhangsan",gender:"M",age:18})</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="107" src="https://images2.imgbox.com/38/c7/bjZVwh6o_o.png" width="1161">​</p> 
  <div> 
   <pre><code>mytest&gt;show tables</code></pre> 
  </div> 
  <p style="margin-left:0;"><img alt="" height="140" src="https://images2.imgbox.com/4f/eb/dnzFQvl8_o.png" width="502">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（2）隐式创建集合</strong><strong>account</strong><strong>，（如果集合不存在，那么在插入文档时，会自动创建集合）</strong></p> 
  <pre><code>mytest&gt;db.account.insert({id:100,name:"xiaoming",gender:"M",age:18})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="235" src="https://images2.imgbox.com/e8/1e/kKp4VeCd_o.png" width="1122">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（3）继续向</strong><strong>account</strong><strong>集合中插入数据</strong></p> 
  <pre><code>mytest&gt;db.account.insert({id:100,name:"xiaohong",gender:"F",age:18,"current date":new Date("2023-02-23")})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="133" src="https://images2.imgbox.com/64/7e/5cyeEdRz_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>（4）先创建变量，再在集合中插入</strong></p> 
  <p style="margin-left:0;"> 创建变量document</p> 
  <pre><code>mytest&gt;document=({title:"mongodb",

... tags:['mongodb','database','nosql']})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="179" src="https://images2.imgbox.com/ef/54/2MJskN2G_o.png" width="1161">​</p> 
  <p style="margin-left:0;"> 把变量doucument插入到集合message中</p> 
  <pre><code>mytest&gt;db.message.insert(document)</code></pre> 
  <p style="margin-left:0;"><img alt="" height="115" src="https://images2.imgbox.com/70/9e/dDPQajsp_o.png" width="626">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><img alt="" height="248" src="https://images2.imgbox.com/d4/64/OraugJVL_o.png" width="743">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>注意：</strong></p> 
  <p style="margin-left:0;">（1）comment集合如果不存在，则会隐式创建。</p> 
  <p style="margin-left:0;">（2）文档键命名规范：</p> 
  <p style="margin-left:0;">    1)键不能含有\0 (空字符)。这个字符用来表示键的结尾。</p> 
  <p style="margin-left:0;">    2).和$有特别的意义，只有在特定环境下才能使用。</p> 
  <p style="margin-left:0;">    3)以下划线"_"开头的键是保留的(不是严格要求的)。</p> 
  <p style="margin-left:0;">（3）文档中的键/值对是有序的；MongoDB的文档不能有重复的键；文档的键是字符串，除了少数例外情况，键可以使用任意UTF-8字符。</p> 
  <p style="margin-left:0;">（4）插入的数据没有指定 _id ，会自动生成主键值。</p> 
  <p style="margin-left:0;">（5）文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。</p> 
  <p style="margin-left:0;">    1）mongo中的数字，默认情况下是double类型，如果要存整型，必须使用函数NumberInt(整型数字)，否则取出来就有问题了。</p> 
  <p style="margin-left:0;">    2）插入当前日期使用 new Date()。</p> 
  <p style="margin-left:0;">    3）如果某字段没值，可以赋值为null，或不写该字段。</p> 
  <p style="margin-left:0;">（6）MongoDB区分类型和大小写。</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（5）插入多条数据</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.insertMany(

... [{id:203,name:"lisi",gender:"M",age:20},

... {id:204,name:"wangwu",gender:'M',age:21},

... {id:205,name:"xiaolan",gender:'F'}])</code></pre> 
  <p style="margin-left:0;"><img alt="" height="427" src="https://images2.imgbox.com/6c/c3/X7D3lF7s_o.png" width="878">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><img alt="" height="950" src="https://images2.imgbox.com/d4/b0/n4JGe2Su_o.png" width="790">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="2%E3%80%81%E6%96%87%E6%A1%A3%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2" style="margin-left:0px;"><span style="color:#333333;"><strong>2、文档的基本查询</strong></span></h4> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（1）查询集合ACCOUNT中的所有数据</strong></span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>  方式1</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="273" src="https://images2.imgbox.com/90/0d/1ga7p3YQ_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong><span style="color:#aa5500;"> </span><span style="color:#0d0016;">方式2</span></strong></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find({})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="271" src="https://images2.imgbox.com/da/42/s3c7j1He_o.png" width="1200">​</p> 
  <p style="margin-left:0;">注：这里你会发现每条文档会有一个叫_id的字段，这个相当于我们原来关系数据库中表的主键，当你在插入文档记录时没有指定该字段，MongoDB会自动创建，其类型是ObjectID类型。</p> 
  <p style="margin-left:0;">如果我们在插入文档记录时指定该字段也可以，其类型可以是ObjectID类型，也可以是MongoDB支持的任意类型。</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>方式3</strong></span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>更方便观看的展示</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find().pretty()

mytest&gt;db.ACCOUNT.find({}).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="937" src="https://images2.imgbox.com/98/e6/EqNo7JoH_o.png" width="993">​</p> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（4）以好看的方式查找名字叫zhangsan的记录</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find({name:'zhangsan'}).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="295" src="https://images2.imgbox.com/3b/d0/h5F40xuP_o.png" width="888">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（5）只返回符合条件的第一条数据</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.findOne({gender:'M'})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="296" src="https://images2.imgbox.com/2b/a3/GfRwqd89_o.png" width="858">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（6）显示所有记录，但只显示_id、id和name，默认情况会显示_id</strong></span></p> 
  <blockquote> 
   <p style="margin-left:0;">mytest&gt; db.ACCOUNT.find(<strong><span style="color:#e84c22;">{}</span></strong>,{id:1,name:1})</p> 
   <p style="margin-left:0;">第一个{}表示显示所有记录，第二个{}表示要查询的字段，</p> 
  </blockquote> 
  <pre><code>mytest&gt;db.ACCOUNT.find({},{id:1,name:1})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="205" src="https://images2.imgbox.com/6e/b7/MYUuA6FR_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <blockquote> 
   <p style="margin-left:0;"><span style="color:#0d0016;">—id等于0，表示不显示—id</span></p> 
  </blockquote> 
  <pre><code>mytest&gt;db.ACCOUNT.find({},{_id:0,id:1,name:1})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="195" src="https://images2.imgbox.com/6a/ac/eFzJsFzX_o.png" width="844">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><strong>（7）显示id为201的记录的_id、id和name</strong></p> 
  <blockquote> 
   <p style="margin-left:0;"><span style="color:#0d0016;">第一个{}内写查询的条件，第二个{}内写查询的属性</span></p> 
  </blockquote> 
  <pre><code>mytest&gt; db.ACCOUNT.find({id:201},{id:1,name:1})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="101" src="https://images2.imgbox.com/d8/7a/LQx0bwSt_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（8）范围条件查询，$gt $lt $gte $lte 表示大于、小于、大于等于、小于等于,$ne不等于</strong></span></p> 
  <p style="margin-left:0;">查找ACCOUNT中age小于20的</p> 
  <pre><code>mytest&gt;db.ACCOUNT.find({age:{$lt:20}})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="145" src="https://images2.imgbox.com/cf/f7/5MaFUDDU_o.png" width="1200">​</p> 
  <p style="margin-left:0;">查找ACCOUNT中age大于等于18，小于等于21的所有信息</p> 
  <pre><code>mytest&gt;db.ACCOUNT.find({age:{$gte:18,$lte:21}}).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="749" src="https://images2.imgbox.com/22/50/uR0RcPWw_o.png" width="1010">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（9）查询相应字段的值是$in后面的任意值;$nin不包含操作</strong></span></p> 
  <p style="margin-left:0;">查找ACCOUNT中age的值是18,20,21的所有信息</p> 
  <pre><code>mytest&gt;db.account.find({age:{$in:[18,20,21]}}).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="553" src="https://images2.imgbox.com/14/ed/ialYnimS_o.png" width="966">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（10）使用正则表达式查询</strong></span></p> 
  <p style="margin-left:0;">查找ACCOUNT中姓张的</p> 
  <pre><code>mytest&gt; db.ACCOUNT.find({name:/^z/})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="139" src="https://images2.imgbox.com/48/74/bxnae0iZ_o.png" width="1200">​</p> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> （11）排序显示，升序显示</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find().sort({age:1}).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="941" src="https://images2.imgbox.com/45/37/PVCnoOFg_o.png" width="1001">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（12）排序显示，降序显示</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find().sort({age:-1}).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="935" src="https://images2.imgbox.com/62/ba/wg8afc8o_o.png" width="944">​</p> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（13）查询前3条数据</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find().limit(3).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="755" src="https://images2.imgbox.com/fe/ff/aENY6rw5_o.png" width="891">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（14）查询2条以后的数据，也就是第3,4条数据</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find().skip(2).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="499" src="https://images2.imgbox.com/12/42/lpwKAamm_o.png" width="909">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（15）查询2-3之间的数据，1之后的所有数据的前两行</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find().skip(1).limit(2).pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="521" src="https://images2.imgbox.com/bd/69/5zulR8hI_o.png" width="945">​</p> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong><span style="color:#0d0016;">（16）$exists判断字段是否存在</span></strong></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">查看含有age字段的所有信息</span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find({age:{$exists:true}})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="254" src="https://images2.imgbox.com/3c/fd/kdu4i7Pt_o.png" width="1200">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（17）db.表.find({字段(数组):{ ‘$all’ :[v1,v2]}}) //数组元素值，存在v1和v2即可，顺序不做要求</strong></span></p> 
  <pre><code>&gt; db.student.find({hobdy:{$all:['dance','sing']}})</code></pre> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"></p> 
  <h4 id="3%E3%80%81%E6%96%87%E6%A1%A3%E7%9A%84%E6%9B%B4%E6%96%B0" style="margin-left:0px;"><span style="color:#333333;"><strong>3、文档的更新</strong></span></h4> 
  <p style="margin-left:0;"><span style="color:#333333;"><strong>此时</strong><strong>,ACCOUNT</strong><strong>下的所有记录入如下显示：</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.find().pretty()</code></pre> 
  <p style="margin-left:0;"><img alt="" height="946" src="https://images2.imgbox.com/5f/f2/pZqkKQqF_o.png" width="1026">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（1）把id=201的改为ID=100，修改完成后除了id字段其它字段都不见了，默认只修改第一条记录</strong></span></p> 
  <p style="margin-left:0;">把id=201的改为ID=100</p> 
  <pre><code>mytest&gt;db.ACCOUNT.update({id:201},{id:100})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="807" src="https://images2.imgbox.com/7f/54/a6hUrVgt_o.png" width="1088">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> （2）使用修改器$set修改，只修改想要修改的字段，其他字段不变。</strong></span></p> 
  <p style="margin-left:0;">把id=204改为id=402，并保证其它字段不变</p> 
  <pre><code>mytest&gt;db.ACCOUNT.update({id:204},{$set:{id:402}})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="812" src="https://images2.imgbox.com/5d/53/VrOBnNgg_o.png" width="1089">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><strong><span style="color:#0d0016;">（3）使用修改器$set修改，只修改想要修改的字段，其他字段不变。如果多条记录都匹配默认只修改第一条记录</span></strong></p> 
  <p style="margin-left:0;">把gender='M'的id改为403，默认修改匹配到的第一条记录</p> 
  <pre><code>mytest&gt;db.ACCOUNT.update({gender:'M'},{$set:{id:403}})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="811" src="https://images2.imgbox.com/0d/a9/cpix8oLL_o.png" width="1072">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong> （4）修改所有的记录</strong></span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">把性别为M的年龄都改为23</span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.update({gender:'M'},{$set:{age:23}},{multi:true})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="806" src="https://images2.imgbox.com/02/c5/Drk2mF2L_o.png" width="1152">​</p> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><strong><span style="color:#0d0016;">（5）列值增长的修改</span></strong></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;">#设置id为403的记录的age每次增长1，默认也只修改第一条记录，使用{multi:true}修改所有记录</span></p> 
  <pre><code>mytest&gt; db.ACCOUNT.update({id:403},{$inc:{age:1}})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="804" src="https://images2.imgbox.com/4e/ac/iTzPPn6F_o.png" width="1098">​</p> 
  <p style="margin-left:0;">​</p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>（6）update找到才会更新，找不到不管</strong></span></p> 
  <p style="margin-left:0;"><span style="color:#0d0016;"><strong>使用save方法来替换已有的文档，有相应_id主键的记录就更新，没有就插入</strong></span></p> 
  <p style="margin-left:0;"><img alt="" height="783" src="https://images2.imgbox.com/78/b4/bTZWYp3b_o.png" width="1023">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"><strong>将</strong><strong>age</strong><strong>设为</strong><strong>30;</strong><strong>没指定—</strong><strong>id,</strong><strong>则插入一条新的记录</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.save({age:30})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="894" src="https://images2.imgbox.com/e2/92/u40NrKly_o.png" width="1060">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"><strong>将</strong><strong>age</strong><strong>设为</strong><strong>30;</strong><strong>指定—</strong><strong>id=0,</strong><strong>则更新</strong><strong>_id=0</strong><strong>的</strong><strong>age</strong><strong>为</strong><strong>30</strong></span></p> 
  <pre><code>mytest&gt;db.ACCOUNT.save({_id:0,age:30})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="870" src="https://images2.imgbox.com/33/20/WElA70hk_o.png" width="1118">​</p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
  <h4 id="4%E3%80%81%E5%88%A0%E9%99%A4%E6%96%87%E6%A1%A3" style="margin-left:0px;"><span style="color:#333333;"><strong>4、删除文档</strong></span></h4> 
  <p style="margin-left:0;"><strong>删除age=30</strong><strong>的所有记录，删除后，其它记录还在</strong></p> 
  <pre><code>mytest&gt;db.ACCOUNT.remove({age:30})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="801" src="https://images2.imgbox.com/76/db/BO7nGQAi_o.png" width="1014">​</p> 
  <p style="margin-left:0;"></p> 
  <p style="margin-left:0;"><strong>删除此集合下的所有记录，删除后，集合变为空的</strong></p> 
  <pre><code>mytest&gt;db.ACCOUNT.remove({})</code></pre> 
  <p style="margin-left:0;"><img alt="" height="144" src="https://images2.imgbox.com/21/75/eeZqcPJc_o.png" width="572">​</p> 
  <p style="margin-left:0;"></p> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b7dc08722dd5bfd74172e0711276f02c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">《英雄编程体验课》第 01 课 | 基本输入输出</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb55ab5afb1ade8f4d889f95a1d5d949/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">语音识别与Python编程实践</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>