<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于51单片机的音乐盒彩灯频谱喷泉原理图方案设计 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于51单片机的音乐盒彩灯频谱喷泉原理图方案设计" />
<meta property="og:description" content="硬件电路的设计 链接：https://pan.baidu.com/s/13arSh1kts_gI5UFWT6gPKA 提取码：wm7e
3.1系统的功能分析及体系结构设计
3.1.1系统功能分析
本设计由STC89C52单片机电路&#43;水泵控制电路&#43;ADC0832采样电路&#43;LM386功率放大器电路&#43;LED灯显示电路&#43;电源电路组成。
1、本设计可以播放电脑、手机、MP3里面的音乐。
2、通过ADC0832芯片对音频信号的采集，转换为数字信号给单片机，然后PWM脉冲宽度调制控制水泵水柱对的高低。
3、同事有流水灯表示音乐大小情况。
3.1.2系统总体结构
本系统具体框图如下图所示：
水泵控制电路设计
微型水泵（wēi xīn shuǐ bèng，microwater pump或mini water pump）定义：通常把提升液体、输送液体或使液体增加压力，即把原动机的机械能变为液体能量从而达到抽送液体目的的机器统称为水泵。水泵一般组成形式为驱动部分&#43;泵体，泵体上有一进一出两个接口，水从入水口进，排水口出，凡是采用这种形式，且体积小巧、袖珍的水泵，都叫微型水泵，也叫微型抽水泵。
在本系统中，使用5V水泵，用来喷水，由于水泵属于大功率装置，单片机无法直接驱动，故选择三极管9012来实现对水泵的控制，在本电路中通过LED灯来指示水泵是否工作，如果水泵工作，则LED灯亮，否则，LED灯不亮。与LED灯串联的电阻为限流电阻，限流作用，以保护LED灯，防止烧坏。当单片机的相关控制引脚为低电平时，三极管导通，水泵正常工作；否则，水泵不工作。电解电容作用是滤波，来滤除水泵供电电源中的低频参量，让水泵更稳定的工作。
LM386功率放大器电路设计
本设计扬声器放大电路选择LM386芯片进行放大，放大声音可调。
LM386是美国国家半导体公司生产的音频功率放大器,是一种音频集成功放，具有自身功耗低、更新内链增益可调整、电源电压范围大、外接元件少和总谐波失真小等优点的功率放大器，广泛应用于录音机和收音机之中。为使外围元件最少,电压增益内置为20。但在1脚和8脚之间增加一只外接电阻和电容,便可将电压增益调为任意值,直至 200。输入端以地位参考,同时输出端被自动偏置到电源电压的一半,在6V电源电压下,它的静态功耗仅为24mW,使得LM386特别适用于电池供电的场合。
耦合电容。此电容的作用有二：隔直&#43;耦合。隔断直流电压，直流电压过大有可能会损坏喇叭线圈；耦合音频的交流信号。它与扬声器负载构成了一阶高通滤波器。减小该电容值，可使噪声能量冲击的幅度变小、宽度变窄；太低还会使截止频率（fc=1/(2πRLCout)）提高。功率放大器的电路原理图如下图所示。电位器可以调节声音大小，电容均为滤波电容。电阻均为限流电阻。
ADC0832A/D转换电路设计
ADC0832是美国国家半导体公司生产的一种 8 位分辨率、双通道 A/D 转换芯片。由于它体积小，兼容性强，性价比高而深受单片机爱好者及企业欢迎，
其目前已经有很高的普及率。学习并使用 ADC0832 可是使我们了解 A/D 转换器的原理，有助于我们单片机技术水平的提高。
一、ADC0832 具有以下特点：
（1）8 位分辨率；
（2）双通道 A/D 转换；
（3）输入输出电平与 TTL/CMOS 相兼容；
（4）5V 电源供电时输入电压在 0~5V 之间；
（5）工作频率为 250KHZ，转换时间为 32μS；
（6）一般功耗仅为 15mW；
（7）8P、14P—DIP（双列直插）、PICC 多种封装；
（8）商用级芯片温宽为0°C to &#43;70°C，工业级芯片温宽为−40°C to &#43;85°C；
ADC0832 为 8 位分辨率 A/D 转换芯片，其最高分辨可达 256 级，可以适应一般的模拟量转换要求。其内部电源输入与参考电压的复用，使得芯片的模拟电压输入在 0~5V 之间。芯片转换时间仅为 32μS，据有双数据输出可作为数据校验，以减少数据误差，转换速度快且稳定性能强。独立的芯片使能输入，使多器件挂接和处理器控制变的更加方便。通过 DI 数据输入端，可以轻易的实现通道功能的选择。再本设计中ADC0832的功能是将粉尘传感器输出的模拟信号转化为数字信号，然后将信号送入单片机进行处理，试验证明，本电路满足本设计要求。在本设计中，ADC0832选择模拟输入通道0即CH0作为信号的采集端口。其具体电路如下图所示。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/182e11d521fd71241cb6231055454a25/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-22T14:08:27+08:00" />
<meta property="article:modified_time" content="2023-10-22T14:08:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于51单片机的音乐盒彩灯频谱喷泉原理图方案设计</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>硬件电路的设计</h3> 
<p>链接：<a href="https://pan.baidu.com/s/13arSh1kts_gI5UFWT6gPKA" rel="nofollow">https://pan.baidu.com/s/13arSh1kts_gI5UFWT6gPKA </a><br> 提取码：wm7e</p> 
<p>3.1系统的功能分析及体系结构设计<br> 3.1.1系统功能分析<br> 本设计由STC89C52单片机电路+水泵控制电路+ADC0832采样电路+LM386功率放大器电路+LED灯显示电路+电源电路组成。<br> 1、本设计可以播放电脑、手机、MP3里面的音乐。<br> 2、通过ADC0832芯片对音频信号的采集，转换为数字信号给单片机，然后PWM脉冲宽度调制控制水泵水柱对的高低。<br> 3、同事有流水灯表示音乐大小情况。<br> 3.1.2系统总体结构<br> 本系统具体框图如下图所示：<br> <img src="https://images2.imgbox.com/d0/10/y7ojg2sN_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/59/42/zzv1Otso_o.png" alt="在这里插入图片描述"><br> <strong>水泵控制电路设计</strong><br> 微型水泵（wēi xīn shuǐ bèng，microwater pump或mini water pump）定义：通常把提升液体、输送液体或使液体增加压力，即把原动机的机械能变为液体能量从而达到抽送液体目的的机器统称为水泵。水泵一般组成形式为驱动部分+泵体，泵体上有一进一出两个接口，水从入水口进，排水口出，凡是采用这种形式，且体积小巧、袖珍的水泵，都叫微型水泵，也叫微型抽水泵。<br> 在本系统中，使用5V水泵，用来喷水，由于水泵属于大功率装置，单片机无法直接驱动，故选择三极管9012来实现对水泵的控制，在本电路中通过LED灯来指示水泵是否工作，如果水泵工作，则LED灯亮，否则，LED灯不亮。与LED灯串联的电阻为限流电阻，限流作用，以保护LED灯，防止烧坏。当单片机的相关控制引脚为低电平时，三极管导通，水泵正常工作；否则，水泵不工作。电解电容作用是滤波，来滤除水泵供电电源中的低频参量，让水泵更稳定的工作。<br> <img src="https://images2.imgbox.com/6f/34/wP38FYyl_o.png" alt="在这里插入图片描述"><br> <strong>LM386功率放大器电路设计</strong><br> 本设计扬声器放大电路选择LM386芯片进行放大，放大声音可调。<br> LM386是美国国家半导体公司生产的音频功率放大器,是一种音频集成功放，具有自身功耗低、更新内链增益可调整、电源电压范围大、外接元件少和总谐波失真小等优点的功率放大器，广泛应用于录音机和收音机之中。为使外围元件最少,电压增益内置为20。但在1脚和8脚之间增加一只外接电阻和电容,便可将电压增益调为任意值,直至 200。输入端以地位参考,同时输出端被自动偏置到电源电压的一半,在6V电源电压下,它的静态功耗仅为24mW,使得LM386特别适用于电池供电的场合。</p> 
<p>耦合电容。此电容的作用有二：隔直+耦合。隔断直流电压，直流电压过大有可能会损坏喇叭线圈；耦合音频的交流信号。它与扬声器负载构成了一阶高通滤波器。减小该电容值，可使噪声能量冲击的幅度变小、宽度变窄；太低还会使截止频率（fc=1/(2π<em>RL</em>Cout)）提高。功率放大器的电路原理图如下图所示。电位器可以调节声音大小，电容均为滤波电容。电阻均为限流电阻。<br> <img src="https://images2.imgbox.com/42/36/QTjqv421_o.png" alt="在这里插入图片描述"></p> 
<p><strong>ADC0832A/D转换电路设计</strong><br> ADC0832是美国国家半导体公司生产的一种 8 位分辨率、双通道 A/D 转换芯片。由于它体积小，兼容性强，性价比高而深受单片机爱好者及企业欢迎，<br> 其目前已经有很高的普及率。学习并使用 ADC0832 可是使我们了解 A/D 转换器的原理，有助于我们单片机技术水平的提高。<br> 一、ADC0832 具有以下特点：<br> （1）8 位分辨率；<br> （2）双通道 A/D 转换；<br> （3）输入输出电平与 TTL/CMOS 相兼容；<br> （4）5V 电源供电时输入电压在 0~5V 之间；<br> （5）工作频率为 250KHZ，转换时间为 32μS；<br> （6）一般功耗仅为 15mW；<br> （7）8P、14P—DIP（双列直插）、PICC 多种封装；<br> （8）商用级芯片温宽为0°C to +70°C，工业级芯片温宽为−40°C to +85°C；</p> 
<p>ADC0832 为 8 位分辨率 A/D 转换芯片，其最高分辨可达 256 级，可以适应一般的模拟量转换要求。其内部电源输入与参考电压的复用，使得芯片的模拟电压输入在 0~5V 之间。芯片转换时间仅为 32μS，据有双数据输出可作为数据校验，以减少数据误差，转换速度快且稳定性能强。独立的芯片使能输入，使多器件挂接和处理器控制变的更加方便。通过 DI 数据输入端，可以轻易的实现通道功能的选择。再本设计中ADC0832的功能是将粉尘传感器输出的模拟信号转化为数字信号，然后将信号送入单片机进行处理，试验证明，本电路满足本设计要求。在本设计中，ADC0832选择模拟输入通道0即CH0作为信号的采集端口。其具体电路如下图所示。<br> <img src="https://images2.imgbox.com/c5/64/3igegCSN_o.png" alt="在这里插入图片描述"><br> LED信号指示灯电路设计<br> LED灯即发光二极管，它是半导体二极管的一种，可以把电能转化成光能。发光二极管与普通二极管一样是由一个PN结组成，也具有单向导电性。在电路中，电阻的作用是限流，保护LED灯。只要单片机的控制引脚拉低，则LED灯亮，否则，LED灯不亮。其具体电路原理图如下图所示。<br> <img src="https://images2.imgbox.com/73/ff/EO5aA9OC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_44"></a>系统软件设计</h3> 
<p><img src="https://images2.imgbox.com/d6/6a/OWq36Xja_o.png" alt="在这里插入图片描述"></p> 
<pre><code>#include&lt;reg51.h&gt;
#define uchar unsigned char
#define uint unsigned int
sbit out=P3^7;
sbit led1=P0^0;
sbit led2=P0^1;
sbit led3=P0^2;
sbit led4=P0^3;
sbit led5=P0^4;
sbit led6=P0^5;
sbit led7=P0^6;
sbit led8=P0^7;

sbit SCL=P1^2;		//SCL定义为P1口的第3位脚，连接ADC0832SCL脚
sbit DO=P1^3;		//DO定义为P1口的第4位脚，连接ADC0832DO脚
sbit CS=P1^0;		//CS定义为P1口的第4位脚，连接ADC0832CS脚



uchar h1,date;
unsigned char adval;
void delay(uint z)
{
   uchar y;
   for(;z&gt;0;z--)
   for(y=5;y&gt;0;y--);
}


/***********读数模转换数据********************************************************/	
//请先了解ADC0832模数转换的串行协议，再来读本函数，主要是对应时序图来理解，本函数是模拟0832的串行协议进行的
						//  1  1  0 通道
						//  1  1  1 通道 
unsigned char ad0832read(bit SGL,bit ODD)
{
	unsigned char i=0,value=0,value1=0;		
		SCL=0;
		DO=1;
		CS=0;		//开始
		SCL=1;		//第一个上升沿	
		SCL=0;
		DO=SGL;
		SCL=1;  	//第二个上升沿
		SCL=0;
		DO=ODD;
		SCL=1;	   //第三个上升沿
		SCL=0;	   //第三个下降沿
		DO=1;
		for(i=0;i&lt;8;i++)
		{
			SCL=1;
			SCL=0; //开始从第四个下降沿接收数据
			value&lt;&lt;=1;
			if(DO)
				value++;						
		}
		for(i=0;i&lt;8;i++)
		{			//接收校验数据
			value1&gt;&gt;=1;
			if(DO)
				value1+=0x80;
			SCL=1;
			SCL=0;
		}
		CS=1;
		DO=1;
		SCL=1;	
		if(value==value1)				//与校验数据比较，正确就返回数据，否则返回0	
			return value;
	return 0;
}

void penquan()	  //PWM调压
{
    date=ad0832read(1,0); //读取ad值
	
    h1=(255-date);	//转换
    out=0;	 		//水泵清零
    delay(h1);
	if(h1&gt;70)  led1=1; else led1=0; //ad值对比 点亮相应的灯
	if(h1&gt;80)  led2=1; else led2=0;	  //ad值对比 点亮相应的灯
	if(h1&gt;90) led3=1; else led3=0;	   //ad值对比 点亮相应的灯
	if(h1&gt;100) led4=1; else led4=0;	  //ad值对比 点亮相应的灯
	if(h1&gt;110) led5=1; else led5=0;	 //ad值对比 点亮相应的灯
	if(h1&gt;115) led6=1; else led6=0;	 //ad值对比 点亮相应的灯
	if(h1&gt;120) led7=1; else led7=0;	 //ad值对比 点亮相应的灯
	if(h1&gt;130) led8=1; else led8=0;	  //ad值对比 点亮相应的灯

	out=1;	    //关闭水泵
	delay(date);   //延时时间

}
void main()	//主函数
{
   
   while(1)
   {	
       
		penquan();		   //给定个延时次数
	   
	 	
   }
}

</code></pre> 
<p>.</p> 
<p>.</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/04060ce5bf329f4e6557aae0224ff3c0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">YOLOv8/YOLOv7/YOLOv5注意力机制全家福，内涵多尺度空洞注意力、大型分离卷积、多尺度双视觉、可变形大核注意力、通道优先卷积注意力、多维协作注意、可变形自注意力、EMA等</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/253c81932cf31db65da55992c76a5822/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于51单片机的全自动洗衣机控制系统仿真设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>