<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SSM框架整合 完整版 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SSM框架整合 完整版" />
<meta property="og:description" content="目录
SSM框架整合 项目结构 一、搭建数据库环境二、基本环境搭建1. 创建maven项目2、导入依赖3、建立项目基本结构 三、MyBatis层编写1、编写数据库配置文件2、IDEA关联数据库3、编写MyBatis核心配置文件4、编写pojo实体类5、编写dao(mapper)层1. 编写Mapper接口2. 编写Mapper接口对应的Mapper.xml 6、编写service层编写service层接口实现类 四、Spring层编写1、Spring整合dao层2、Spring整合service层 五、SpringMVC层编写1、编写spring-mvc.xml2、Spring配置文件整合3、配置web.xml4、编写Controller5、编写视图层1. 编写index.jsp2. 编写展示所有书籍页面allBooks.jsp 6、运行测试 项目结构 项目结构
数据库表格
一、搭建数据库环境 创建数据库表
CREATE DATABASE `ssmbuild`; USE `ssmbuild`; DROP TABLE IF EXISTS `books`; CREATE TABLE `books` ( `bookID` INT(10) NOT NULL AUTO_INCREMENT COMMENT &#39;书id&#39;, `bookName` VARCHAR(100) NOT NULL COMMENT &#39;书名&#39;, `bookCounts` INT(11) NOT NULL COMMENT &#39;数量&#39;, `detail` VARCHAR(200) NOT NULL COMMENT &#39;描述&#39;, KEY `bookID` (`bookID`) ) ENGINE=INNODB DEFAULT CHARSET=utf8 INSERT INTO `books`(`bookID`,`bookName`,`bookCounts`,`detail`)VALUES (1,&#39;Java&#39;,1,&#39;从入门到放弃&#39;), (2,&#39;MySQL&#39;,10,&#39;从删库到跑路&#39;), (3,&#39;Linux&#39;,5,&#39;从进门到进牢&#39;); 二、基本环境搭建 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/848b21943d79b5a9daeb8e23d59e734e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-06T10:21:42+08:00" />
<meta property="article:modified_time" content="2020-11-06T10:21:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SSM框架整合 完整版</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>目录</p> 
<p></p> 
<div class="toc"> 
 <h4>SSM框架整合</h4> 
 <ul><li><ul><li><a href="#_3" rel="nofollow">项目结构</a></li></ul> 
  </li><li><a href="#_9" rel="nofollow">一、搭建数据库环境</a></li><li><a href="#_32" rel="nofollow">二、基本环境搭建</a></li><li><ul><li><ul><li><a href="#1__maven_33" rel="nofollow">1. 创建maven项目</a></li><li><a href="#2_36" rel="nofollow">2、导入依赖</a></li><li><a href="#3_137" rel="nofollow">3、建立项目基本结构</a></li></ul> 
  </li></ul> 
  </li><li><a href="#MyBatis_145" rel="nofollow">三、MyBatis层编写</a></li><li><ul><li><ul><li><a href="#1_146" rel="nofollow">1、编写数据库配置文件</a></li><li><a href="#2IDEA_158" rel="nofollow">2、IDEA关联数据库</a></li><li><a href="#3MyBatis_162" rel="nofollow">3、编写MyBatis核心配置文件</a></li><li><a href="#4pojo_178" rel="nofollow">4、编写pojo实体类</a></li><li><a href="#5daomapper_181" rel="nofollow">5、编写dao(mapper)层</a></li><li><ul><li><a href="#1_Mapper_183" rel="nofollow">1. 编写Mapper接口</a></li><li><a href="#2_MapperMapperxml_206" rel="nofollow">2. 编写Mapper接口对应的Mapper.xml</a></li></ul> 
    </li><li><a href="#6service_267" rel="nofollow">6、编写service层</a></li><li><a href="#service_295" rel="nofollow">编写service层接口实现类</a></li></ul> 
  </li></ul> 
  </li><li><a href="#Spring_346" rel="nofollow">四、Spring层编写</a></li><li><ul><li><ul><li><a href="#1Springdao_347" rel="nofollow">1、Spring整合dao层</a></li><li><a href="#2Springservice_415" rel="nofollow">2、Spring整合service层</a></li></ul> 
  </li></ul> 
  </li><li><a href="#SpringMVC_449" rel="nofollow">五、SpringMVC层编写</a></li><li><ul><li><ul><li><a href="#1springmvcxml_450" rel="nofollow">1、编写spring-mvc.xml</a></li><li><a href="#2Spring_487" rel="nofollow">2、Spring配置文件整合</a></li><li><a href="#3webxml_504" rel="nofollow">3、配置web.xml</a></li><li><a href="#4Controller_554" rel="nofollow">4、编写Controller</a></li><li><a href="#5_576" rel="nofollow">5、编写视图层</a></li><li><ul><li><a href="#1_indexjsp_578" rel="nofollow">1. 编写index.jsp</a></li><li><a href="#2_allBooksjsp_595" rel="nofollow">2. 编写展示所有书籍页面allBooks.jsp</a></li></ul> 
    </li><li><a href="#6_610" rel="nofollow">6、运行测试</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_3"></a>项目结构</h3> 
<blockquote> 
 <p>项目结构<br> <img src="https://images2.imgbox.com/62/62/XxQbsGLo_o.png" alt="在这里插入图片描述"><br> 数据库表格<br> <img src="https://images2.imgbox.com/fc/01/emrDdtLN_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h2><a id="_9"></a>一、搭建数据库环境</h2> 
<p><strong>创建数据库表</strong></p> 
<pre><code class="prism language-java">CREATE DATABASE `ssmbuild`<span class="token punctuation">;</span>

USE `ssmbuild`<span class="token punctuation">;</span>

DROP TABLE IF EXISTS `books`<span class="token punctuation">;</span>

CREATE TABLE `books` <span class="token punctuation">(</span>
`bookID` <span class="token function">INT</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> NOT NULL AUTO_INCREMENT COMMENT <span class="token string">'书id'</span><span class="token punctuation">,</span>
`bookName` <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> NOT NULL COMMENT <span class="token string">'书名'</span><span class="token punctuation">,</span>
`bookCounts` <span class="token function">INT</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> NOT NULL COMMENT <span class="token string">'数量'</span><span class="token punctuation">,</span>
`detail` <span class="token function">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> NOT NULL COMMENT <span class="token string">'描述'</span><span class="token punctuation">,</span>
KEY `bookID` <span class="token punctuation">(</span>`bookID`<span class="token punctuation">)</span>
<span class="token punctuation">)</span> ENGINE<span class="token operator">=</span>INNODB DEFAULT CHARSET<span class="token operator">=</span>utf8
INSERT  INTO `books`<span class="token punctuation">(</span>`bookID`<span class="token punctuation">,</span>`bookName`<span class="token punctuation">,</span>`bookCounts`<span class="token punctuation">,</span>`detail`<span class="token punctuation">)</span>VALUES
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'Java'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'从入门到放弃'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'MySQL'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">'从删库到跑路'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'Linux'</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'从进门到进牢'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h2><a id="_32"></a>二、基本环境搭建</h2> 
<h4><a id="1__maven_33"></a>1. 创建maven项目</h4> 
<p><img src="https://images2.imgbox.com/ea/9d/Ts8xdB0r_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_36"></a>2、导入依赖</h4> 
<p>pom.xml</p> 
<pre><code class="prism language-java"><span class="token generics function"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Junit<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>junit<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>junit<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">4.13</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>数据库驱动<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mysql<span class="token operator">-</span>connector<span class="token operator">-</span>java<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">8.0</span><span class="token number">.21</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 数据库连接池<span class="token operator">:</span>c3p0 <span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>mchange<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>c3p0<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">0.9</span><span class="token number">.5</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Servlet<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>servlet<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>servlet<span class="token operator">-</span>api<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>JSP<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>jsp<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>jsp<span class="token operator">-</span>api<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>jstl<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>javax<span class="token punctuation">.</span>servlet<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>jstl<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.2</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Mybatis<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">3.5</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Mybatis<span class="token operator">-</span>Spring<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>mybatis<span class="token operator">-</span>spring<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">2.0</span><span class="token number">.5</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>

   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Spring<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>webmvc<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">5.2</span><span class="token number">.8</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Spring操作数据库<span class="token punctuation">,</span>还需要spring<span class="token operator">-</span>jdbc<span class="token operator">--</span><span class="token operator">&gt;</span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>jdb	c<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">5.2</span><span class="token number">.6</span><span class="token punctuation">.</span>RELEASE<span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    
   <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>lombok<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>projectlombok<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>lombok<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token generics function"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.18</span><span class="token number">.12</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
</code></pre> 
<blockquote> 
 <p>防止 maven 配置文件无法被导出或生效 添加一下代码在依赖下面</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token generics function"><span class="token punctuation">&lt;</span>build<span class="token punctuation">&gt;</span></span>
   <span class="token generics function"><span class="token punctuation">&lt;</span>resources<span class="token punctuation">&gt;</span></span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>resource<span class="token punctuation">&gt;</span></span>
           <span class="token generics function"><span class="token punctuation">&lt;</span>directory<span class="token punctuation">&gt;</span></span>src<span class="token operator">/</span>main<span class="token operator">/</span>java<span class="token operator">&lt;</span><span class="token operator">/</span>directory<span class="token operator">&gt;</span>
           <span class="token generics function"><span class="token punctuation">&lt;</span>includes<span class="token punctuation">&gt;</span></span>
               <span class="token generics function"><span class="token punctuation">&lt;</span>include<span class="token punctuation">&gt;</span></span><span class="token operator">*</span><span class="token operator">*</span><span class="token comment">/*.properties&lt;/include&gt;
               &lt;include&gt;**/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml<span class="token operator">&lt;</span><span class="token operator">/</span>include<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>includes<span class="token operator">&gt;</span>
           <span class="token generics function"><span class="token punctuation">&lt;</span>filtering<span class="token punctuation">&gt;</span></span><span class="token boolean">false</span><span class="token operator">&lt;</span><span class="token operator">/</span>filtering<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>resource<span class="token operator">&gt;</span>
       <span class="token generics function"><span class="token punctuation">&lt;</span>resource<span class="token punctuation">&gt;</span></span>
           <span class="token generics function"><span class="token punctuation">&lt;</span>directory<span class="token punctuation">&gt;</span></span>src<span class="token operator">/</span>main<span class="token operator">/</span>resources<span class="token operator">&lt;</span><span class="token operator">/</span>directory<span class="token operator">&gt;</span>
           <span class="token generics function"><span class="token punctuation">&lt;</span>includes<span class="token punctuation">&gt;</span></span>
               <span class="token generics function"><span class="token punctuation">&lt;</span>include<span class="token punctuation">&gt;</span></span><span class="token operator">*</span><span class="token operator">*</span><span class="token comment">/*.properties&lt;/include&gt;
               &lt;include&gt;**/</span><span class="token operator">*</span><span class="token punctuation">.</span>xml<span class="token operator">&lt;</span><span class="token operator">/</span>include<span class="token operator">&gt;</span>
           <span class="token operator">&lt;</span><span class="token operator">/</span>includes<span class="token operator">&gt;</span>
           <span class="token generics function"><span class="token punctuation">&lt;</span>filtering<span class="token punctuation">&gt;</span></span><span class="token boolean">false</span><span class="token operator">&lt;</span><span class="token operator">/</span>filtering<span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">/</span>resource<span class="token operator">&gt;</span>
   <span class="token operator">&lt;</span><span class="token operator">/</span>resources<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>build<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="3_137"></a>3、建立项目基本结构</h4> 
<p><img src="https://images2.imgbox.com/cc/9b/jyBW5czf_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>在src/main/java目录下新建以下四个包，为后续实验准备</p> 
</blockquote> 
<p><strong>pojo</strong>：用来放实体类<br> <strong>dao</strong>：数据访问层，data access object<br> <strong>service</strong>：服务层，调用dao层<br> <strong>controller</strong>：控制层，调用service层</p> 
<h2><a id="MyBatis_145"></a>三、MyBatis层编写</h2> 
<h4><a id="1_146"></a>1、编写数据库配置文件</h4> 
<blockquote> 
 <p>在 resource 目录下新建 database.properties<br> <img src="https://images2.imgbox.com/39/9b/YSgQNnoV_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<blockquote> 
 <p>在 resources 下创建 database.properties 关于数据库信息</p> 
</blockquote> 
<pre><code class="prism language-java">jdbc<span class="token punctuation">.</span>driver<span class="token operator">=</span>com<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>jdbc<span class="token punctuation">.</span>Driver
jdbc<span class="token punctuation">.</span>url<span class="token operator">=</span>jdbc<span class="token operator">:</span>mysql<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token operator">:</span><span class="token number">3306</span><span class="token operator">/</span>ssmbuild<span class="token operator">?</span>
jdbc<span class="token punctuation">.</span>username<span class="token operator">=</span>root
jdbc<span class="token punctuation">.</span>password<span class="token operator">=</span><span class="token number">200024</span>
</code></pre> 
<h4><a id="2IDEA_158"></a>2、IDEA关联数据库</h4> 
<p><img src="https://images2.imgbox.com/de/43/H3F8TxQq_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/2b/28/naTjE6Pd_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3MyBatis_162"></a>3、编写MyBatis核心配置文件</h4> 
<p><strong>resources 的配置文件 mybatis-config.xml</strong></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE configuration
        PUBLIC <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token operator">&gt;</span>
<span class="token generics function"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>别名<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>typeAliases<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>pojo 的位置<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token keyword">package</span> name<span class="token operator">=</span><span class="token string">"pojo"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>typeAliases<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="4pojo_178"></a>4、编写pojo实体类</h4> 
<blockquote> 
 <p>连接数据库之后可以用 idea 反射 pojo类<br> <img src="https://images2.imgbox.com/3f/4d/HcRonnRi_o.png" alt="在这里插入图片描述">找到存放pojo的类 就可以 自带 get set 方法</p> 
</blockquote> 
<h4><a id="5daomapper_181"></a>5、编写dao(mapper)层</h4> 
<p>dao 层存放 mapper(Interface) 与 mapper.xml(对应的sql代码)</p> 
<h5><a id="1_Mapper_183"></a>1. 编写Mapper接口</h5> 
<blockquote> 
 <p>在dao包下新建BookMapper接口，编写增删改查四种业务对应的方法</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookMapper</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//增加一本书</span>
    <span class="token keyword">int</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Books books<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//删除一本书</span>
    <span class="token comment">//@Param注解指定传入参数的名称</span>
    <span class="token keyword">int</span> <span class="token function">deleteBookByID</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"bookID"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//更新一本书</span>
    <span class="token keyword">int</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Books books<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//查询一本书</span>
    <span class="token comment">//@Param注解指定传入参数的名称</span>
    Books <span class="token function">queryByID</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">"bookID"</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//查询全部的书</span>
    List<span class="token generics function"><span class="token punctuation">&lt;</span>Books<span class="token punctuation">&gt;</span></span> <span class="token function">queryAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="2_MapperMapperxml_206"></a>2. 编写Mapper接口对应的Mapper.xml</h5> 
<blockquote> 
 <p>一个Mapper.xml对应一个Mapper接口，要用namespace绑定上述接口</p> 
</blockquote> 
<p><strong>实现上述接口里的所有方法</strong></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE mapper
        PUBLIC <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"dao.BookMapper"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>增加一本书<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>insert id<span class="token operator">=</span><span class="token string">"addBook"</span> parameterType<span class="token operator">=</span><span class="token string">"pojo.Books"</span><span class="token operator">&gt;</span>
        insert into ssmbuild<span class="token punctuation">.</span><span class="token function">books</span><span class="token punctuation">(</span>bookName<span class="token punctuation">,</span>bookCount<span class="token punctuation">,</span>detail<span class="token punctuation">)</span>
        values <span class="token punctuation">(</span>#<span class="token punctuation">{<!-- --></span>bookName<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{<!-- --></span>bookCount<span class="token punctuation">}</span><span class="token punctuation">,</span>#<span class="token punctuation">{<!-- --></span>detail<span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>insert<span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>删除一本书<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>delete id<span class="token operator">=</span><span class="token string">"deleteBookByID"</span> parameterType<span class="token operator">=</span><span class="token string">"int"</span><span class="token operator">&gt;</span>
        delete from ssmbuild<span class="token punctuation">.</span>books where bookID<span class="token operator">=</span>#<span class="token punctuation">{<!-- --></span>bookID<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>delete<span class="token operator">&gt;</span>
    
     <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>更新一本书<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>update id<span class="token operator">=</span><span class="token string">"updateBook"</span> parameterType<span class="token operator">=</span><span class="token string">"pojo.Books"</span><span class="token operator">&gt;</span>
        update ssmbuild<span class="token punctuation">.</span>books set
        bookName<span class="token operator">=</span>#<span class="token punctuation">{<!-- --></span>bookName<span class="token punctuation">}</span><span class="token punctuation">,</span>bookCounts<span class="token operator">=</span>#<span class="token punctuation">{<!-- --></span>bookCounts<span class="token punctuation">}</span><span class="token punctuation">,</span>detail<span class="token operator">=</span>#<span class="token punctuation">{<!-- --></span>detail<span class="token punctuation">}</span>
        where bookID<span class="token operator">=</span>#<span class="token punctuation">{<!-- --></span>bookID<span class="token punctuation">}</span> <span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>update<span class="token operator">&gt;</span>

     <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>查询一本书<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"queryByID"</span> resultType<span class="token operator">=</span><span class="token string">"pojo.Books"</span><span class="token operator">&gt;</span>
        select <span class="token operator">*</span> from ssmbuild<span class="token punctuation">.</span>books where bookID<span class="token operator">=</span>#<span class="token punctuation">{<!-- --></span>bookID<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>

     <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>查询所有书<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"queryAllBooks"</span> resultType<span class="token operator">=</span><span class="token string">"pojo.Books"</span><span class="token operator">&gt;</span>
        select <span class="token operator">*</span> from ssmbuild<span class="token punctuation">.</span>books
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>然后到mybatis核心配置文件中注册上述mapper.xml</strong></p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span> <span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE configuration
        PUBLIC <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>
        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token operator">&gt;</span>
<span class="token generics function"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>别名<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>typeAliases<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span><span class="token keyword">package</span> name<span class="token operator">=</span><span class="token string">"pojo"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>typeAliases<span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>注册mapper<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>mappers<span class="token punctuation">&gt;</span></span>
    	<span class="token operator">&lt;</span>mapper <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dao.BookMapper"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>mappers<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="6service_267"></a>6、编写service层</h4> 
<blockquote> 
 <p><strong>在service包下新建BookService接口，同Mapper接口里的方法一致</strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">package</span> service<span class="token punctuation">;</span>

<span class="token keyword">import</span> pojo<span class="token punctuation">.</span>Books<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BookService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//增加一本书</span>
    <span class="token keyword">int</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Books books<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//删除一本书</span>
    <span class="token keyword">int</span> <span class="token function">deleteBookByID</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//更新一本书</span>
    <span class="token keyword">int</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Books books<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//查询一本书</span>
    Books <span class="token function">queryByID</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//查询全部的书</span>
    List<span class="token generics function"><span class="token punctuation">&lt;</span>Books<span class="token punctuation">&gt;</span></span> <span class="token function">queryAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="service_295"></a>编写service层接口实现类</h4> 
<blockquote> 
 <p><strong>然后再service包下新建上述接口的实现类BookServiceImpl</strong></p> 
</blockquote> 
<p><strong>service层用来调用dao层，所以内置私有属性为dao层的Mapper接口对象</strong></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> service<span class="token punctuation">;</span>

<span class="token keyword">import</span> dao<span class="token punctuation">.</span>BookMapper<span class="token punctuation">;</span>
<span class="token keyword">import</span> pojo<span class="token punctuation">.</span>Books<span class="token punctuation">;</span>

<span class="token keyword">import</span> java<span class="token punctuation">.</span>awt<span class="token punctuation">.</span>print<span class="token punctuation">.</span>Book<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>List<span class="token punctuation">;</span>

<span class="token comment">//service层调用dao层</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">BookService</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//dao层的Mapper接口对象</span>
    <span class="token keyword">private</span> BookMapper bookMapper<span class="token punctuation">;</span>

    <span class="token comment">//set方法，为后续Spring注入准备</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBookMapper</span><span class="token punctuation">(</span>BookMapper bookMapper<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>bookMapper <span class="token operator">=</span> bookMapper<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">addBook</span><span class="token punctuation">(</span>Books books<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//调用dao层的方法</span>
        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">addBook</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">deleteBookByID</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//调用dao层的方法</span>
        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">deleteBookByID</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">updateBook</span><span class="token punctuation">(</span>Books books<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//调用dao层的方法</span>
        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">updateBook</span><span class="token punctuation">(</span>books<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> Books <span class="token function">queryByID</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//调用dao层的方法</span>
        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">queryByID</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>Books<span class="token punctuation">&gt;</span></span> <span class="token function">queryAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//调用dao层的方法</span>
        <span class="token keyword">return</span> bookMapper<span class="token punctuation">.</span><span class="token function">queryAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="Spring_346"></a>四、Spring层编写</h2> 
<h4><a id="1Springdao_347"></a>1、Spring整合dao层</h4> 
<blockquote> 
 <p>在resource目录下新建spring-dao.xml<br> <img src="https://images2.imgbox.com/e4/39/R3JWA8HE_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<ol><li> <p>关联数据库配置文件database.properties，要引入context约束</p> </li><li> <p>配置MyBatis数据源，这里使用第三方的c3p0，还可以附加一些私有属性</p> </li><li> <p>java 连接池<img src="https://images2.imgbox.com/4c/b9/3KnEgph8_o.png" alt="在这里插入图片描述"></p> </li><li> <p>创建sqlSessionFactory，在 MyBatis-Spring 中，则使用 SqlSessionFactoryBean 来创建，要配置两个重要属性</p> </li></ol> 
<p>1 configLocation绑定MyBatis核心配置文件<br> 2 dataSource指定数据源（必要）</p> 
<ol start="5"><li>配置自动扫描包dao，动态实现了dao层接口可以注入到Spring容器中</li></ol> 
<p>（在原来我们是创建sqlSessionTemplate对象，然后再创建一个Mapper接口实现类，其中内置sqlSessionTemplate私有对象，通过该对象进行操作）</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
       http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">1.</span>关联数据库配置文件<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>context<span class="token operator">:</span>property<span class="token operator">-</span>placeholder location<span class="token operator">=</span><span class="token string">"classpath:database.properties"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">2.</span>数据库连接池
       		dbcp 半自动化操作 不能自动连接
       		c3p0 自动化操作（自动的加载配置文件 并且设置到对象里面）
       		druid、hikari<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"dataSource"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.mchange.v2.c3p0.ComboPooledDataSource"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>配置连接池属性，使用了EL表达式<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"driverClass"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.driver}"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"jdbcUrl"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.url}"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"user"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.username}"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"password"</span> value<span class="token operator">=</span><span class="token string">"${jdbc.password}"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        
       <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> c3p0连接池的私有属性 <span class="token operator">--</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"maxPoolSize"</span> value<span class="token operator">=</span><span class="token string">"30"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"minPoolSize"</span> value<span class="token operator">=</span><span class="token string">"10"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 关闭连接后不自动commit <span class="token operator">--</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"autoCommitOnClose"</span> value<span class="token operator">=</span><span class="token string">"false"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 获取连接超时时间 <span class="token operator">--</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"checkoutTimeout"</span> value<span class="token operator">=</span><span class="token string">"10000"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 当获取连接失败重试次数 <span class="token operator">--</span><span class="token operator">&gt;</span>
       <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"acquireRetryAttempts"</span> value<span class="token operator">=</span><span class="token string">"2"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">3.</span>sqlSessionFactory<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"sqlSessionFactory"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.mybatis.spring.SqlSessionFactoryBean"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>引用上述数据源<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"dataSource"</span> ref<span class="token operator">=</span><span class="token string">"dataSource"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>绑定MyBatis配置文件<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"configLocation"</span> value<span class="token operator">=</span><span class="token string">"classpath:mybatis-config.xml"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">4.</span>配置dao接口扫描包，动态实现了Dao接口可以注入到Spring容器中<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>注入sqlSessionFactory<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"sqlSessionFactoryBeanName"</span> value<span class="token operator">=</span><span class="token string">"sqlSessionFactory"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>要扫描的dao包<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"basePackage"</span> value<span class="token operator">=</span><span class="token string">"dao"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="2Springservice_415"></a>2、Spring整合service层</h4> 
<blockquote> 
 <p>在 resource目录下新建spring-service.xml<br> <img src="https://images2.imgbox.com/cb/97/e5vG2b1M_o.png" alt="在这里插入图片描述"><br> 1 配置扫描service包，使该包下的注解生效<br> 2 将所有业务类注入到Spring中<br> 3 配置声明式事务，需要注入数据源</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
       http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">1.</span>扫描service下的包<span class="token punctuation">,</span>这个包下的注解就会生效<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"service"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>将所有的业务类注入到Spring，可以通过配置或者注解实现<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"BookServiceImpl"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"service.BookServiceImpl"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>这里的ref指向spring<span class="token operator">-</span>dao<span class="token punctuation">.</span>xml最后Spring注入的dao接口<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"bookMapper"</span> ref<span class="token operator">=</span><span class="token string">"bookMapper"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>声明式事务配置<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"transactionManager"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>注入数据源<span class="token operator">--</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"dataSource"</span> ref<span class="token operator">=</span><span class="token string">"dataSource"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="SpringMVC_449"></a>五、SpringMVC层编写</h2> 
<h4><a id="1springmvcxml_450"></a>1、编写spring-mvc.xml</h4> 
<p><img src="https://images2.imgbox.com/7f/ed/dWzm1Z7n_o.png" alt="在这里插入图片描述"><br> 1 自动扫描包<br> 2 过滤静态资源<br> 3 支持mvc注解驱动<br> 4 视图解析器</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns<span class="token operator">:</span>mvc<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/mvc"</span>
       xmlns<span class="token operator">:</span>context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
       http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd
       http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>mvc
       http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>mvc<span class="token operator">/</span>spring<span class="token operator">-</span>mvc<span class="token punctuation">.</span>xsd 
       http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context
       https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>context<span class="token operator">/</span>spring<span class="token operator">-</span>context<span class="token punctuation">.</span>xsd"<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>开启SpringMVC注解驱动<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>mvc<span class="token operator">:</span>annotation<span class="token operator">-</span>driven<span class="token operator">/</span><span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>静态资源过滤<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>mvc<span class="token operator">:</span><span class="token keyword">default</span><span class="token operator">-</span>servlet<span class="token operator">-</span>handler<span class="token operator">/</span><span class="token operator">&gt;</span>
    
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>扫描包controller<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>context<span class="token operator">:</span>component<span class="token operator">-</span>scan base<span class="token operator">-</span><span class="token keyword">package</span><span class="token operator">=</span><span class="token string">"controller"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>视图解析器<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"prefix"</span> value<span class="token operator">=</span><span class="token string">"/WEB-INF/jsp/"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"suffix"</span> value<span class="token operator">=</span><span class="token string">".jsp"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="2Spring_487"></a>2、Spring配置文件整合</h4> 
<p><img src="https://images2.imgbox.com/6b/11/CCI9J8qM_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>applicationContext.xml 导入上述配置文件，作为整体的配置文件</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span>"http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans
       http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>org<span class="token operator">/</span>schema<span class="token operator">/</span>beans<span class="token operator">/</span>spring<span class="token operator">-</span>beans<span class="token punctuation">.</span>xsd"<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token keyword">import</span> resource<span class="token operator">=</span><span class="token string">"spring-dao.xml"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token keyword">import</span> resource<span class="token operator">=</span><span class="token string">"spring-service.xml"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token keyword">import</span> resource<span class="token operator">=</span><span class="token string">"spring-mvc.xml"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="3webxml_504"></a>3、配置web.xml</h4> 
<p><img src="https://images2.imgbox.com/de/c8/Vs7Yz4AI_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>1 注册DispatcherServlet，需要绑定SpringMVC配置文件，这里一<br> 定要绑定整体的配置文件applicationContext.xml，并设置启动级别<br> 2 增加乱码过滤<br> 3 设置session过期时间</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>web<span class="token operator">-</span>app xmlns<span class="token operator">=</span><span class="token string">"http://xmlns.jcp.org/xml/ns/javaee"</span>
         xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd"</span>
         version<span class="token operator">=</span><span class="token string">"4.0"</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>DispatcherServlet<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>servlet<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>servlet<span class="token operator">-</span>name<span class="token operator">&gt;</span>springmvc<span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span>name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>servlet<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>DispatcherServlet<span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>init<span class="token operator">-</span>param<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>param<span class="token operator">-</span>name<span class="token operator">&gt;</span>contextConfigLocation<span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">-</span>name<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>param<span class="token operator">-</span>value<span class="token operator">&gt;</span>classpath<span class="token operator">:</span>applicationContext<span class="token punctuation">.</span>xml<span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">-</span>value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>init<span class="token operator">-</span>param<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>load<span class="token operator">-</span>on<span class="token operator">-</span>startup<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>load<span class="token operator">-</span>on<span class="token operator">-</span>startup<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>servlet<span class="token operator">-</span>mapping<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>servlet<span class="token operator">-</span>name<span class="token operator">&gt;</span>springmvc<span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span>name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>url<span class="token operator">-</span>pattern<span class="token operator">&gt;</span><span class="token operator">/</span><span class="token operator">&lt;</span><span class="token operator">/</span>url<span class="token operator">-</span>pattern<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>servlet<span class="token operator">-</span>mapping<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>乱码过滤<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>filter<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>filter<span class="token operator">-</span>name<span class="token operator">&gt;</span>encodingFilter<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">-</span>name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>filter<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>filter<span class="token punctuation">.</span>CharacterEncodingFilter<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>init<span class="token operator">-</span>param<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>param<span class="token operator">-</span>name<span class="token operator">&gt;</span>encoding<span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">-</span>name<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>param<span class="token operator">-</span>value<span class="token operator">&gt;</span>utf<span class="token operator">-</span><span class="token number">8</span><span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">-</span>value<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>init<span class="token operator">-</span>param<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>filter<span class="token operator">-</span>mapping<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>filter<span class="token operator">-</span>name<span class="token operator">&gt;</span>encodingFilter<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">-</span>name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>url<span class="token operator">-</span>pattern<span class="token operator">&gt;</span><span class="token comment">/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;

    &lt;!--session过期时间--&gt;
    &lt;session-config&gt;
        &lt;session-timeout&gt;15&lt;/session-timeout&gt;
    &lt;/session-config&gt;
&lt;/web-app&gt;
</span></code></pre> 
<h4><a id="4Controller_554"></a>4、编写Controller</h4> 
<blockquote> 
 <p><strong>再controller包下新建BookController类</strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BookController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">//controller层调用service层</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"BookServiceImpl"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> BookService bookService<span class="token punctuation">;</span>

    <span class="token comment">//查询全部书籍，并且返回到一个页面进行显示</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/allBooks"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">list</span><span class="token punctuation">(</span>Model model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>Books<span class="token punctuation">&gt;</span></span> books <span class="token operator">=</span> bookService<span class="token punctuation">.</span><span class="token function">queryAllBooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">,</span> books<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">"allBooks"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="5_576"></a>5、编写视图层</h4> 
<blockquote> 
 <p><strong>在web/WEB-INF/目录下新建jsp包，用来存放我们自定义视图页面</strong></p> 
</blockquote> 
<h5><a id="1_indexjsp_578"></a>1. 编写index.jsp</h5> 
<blockquote> 
 <p><strong>超链接跳转到我们自定的展示所有书籍页面allBooks.jsp</strong></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token generics function"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
<span class="token generics function"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span>首页<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token generics function"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
<span class="token generics function"><span class="token punctuation">&lt;</span>h5<span class="token punctuation">&gt;</span></span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"${pageContext.request.contextPath}/book/allBooks"</span><span class="token operator">&gt;</span>进入书籍页面<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="2_allBooksjsp_595"></a>2. 编写展示所有书籍页面allBooks.jsp</h5> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">"text/html;charset=UTF-8"</span> language<span class="token operator">=</span><span class="token string">"java"</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token generics function"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
<span class="token generics function"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    <span class="token generics function"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span>全部书籍展示<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token generics function"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
<span class="token generics function"><span class="token punctuation">&lt;</span>h1<span class="token punctuation">&gt;</span></span>全部书籍展示<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
$<span class="token punctuation">{<!-- --></span>list<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> 
<h4><a id="6_610"></a>6、运行测试</h4> 
<p><strong>配置Tomcat启动测试，记得添加lib目录，否则Tomcat启动不来</strong><br> <img src="https://images2.imgbox.com/c2/4e/QljSCLqR_o.png" alt="在这里插入图片描述"></p> 
<p>启动Tomcat后，默认进入的index.jsp<br> 点击跳转<br> <img src="https://images2.imgbox.com/51/e4/fuGbmJH7_o.png" alt="在这里插入图片描述"><br> SSM 整合 记得一件三连 给个面子 可以问我要资源的😍👌</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a8f4fd4219c9f8733b5a2162c3313135/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">brew 镜像_黑苹果APFS纯净恢复版镜像 macOS Catalina 10.15.7(19H2)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7f48e4bea0edf3f326ddcf00e64ed73c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">采购流程控制的六个重点环节</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>