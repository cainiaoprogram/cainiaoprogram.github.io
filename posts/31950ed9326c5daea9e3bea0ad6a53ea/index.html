<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>How To:配置Linux iSCSI客户端 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="How To:配置Linux iSCSI客户端" />
<meta property="og:description" content="1、安装客户端
[root@node01 Packages]# rpm -Uvh iscsi-initiator-utils-6.2.0.873-2.el6.x86_64.rpm warning: iscsi-initiator-utils-6.2.0.873-2.el6.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID fd431d51: NOKEY Preparing... ########################################### [100%] 1:iscsi-initiator-utils ########################################### [100%] [root@node01 Packages]# rpm -q iscsi-initiator-utils iscsi-initiator-utils-6.2.0.873-2.el6.x86_64 2、设置服务自启动
[root@node01 Packages]# chkconfig --list | grep iscsi iscsi 0:off 1:off 2:off 3:on 4:on 5:on 6:off iscsid 0:off 1:off 2:off 3:on 4:on 5:on 6:off [root@node01 ~]# chkconfig iscsid on [root@node01 ~]# chkconfig iscsi on [root@node01 ~]# chkconfig --list | grep iscsi iscsi 0:off 1:off 2:on 3:on 4:on 5:on 6:off iscsid 0:off 1:off 2:on 3:on 4:on 5:on 6:off 【此处Linux的版本为RHEL 6." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/31950ed9326c5daea9e3bea0ad6a53ea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-11-01T14:48:00+08:00" />
<meta property="article:modified_time" content="2015-11-01T14:48:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">How To:配置Linux iSCSI客户端</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p><span lang="en-us">1<span lang="zh-cn">、安装客户端</span></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre class="brush:bash;gutter:true;">[root@node01 Packages]# rpm -Uvh iscsi-initiator-utils-6.2.0.873-2.el6.x86_64.rpm

warning: iscsi-initiator-utils-6.2.0.873-2.el6.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID fd431d51: NOKEY

Preparing...                ########################################### [100%]

   1:iscsi-initiator-utils  ########################################### [100%]

[root@node01 Packages]# rpm -q iscsi-initiator-utils

iscsi-initiator-utils-6.2.0.873-2.el6.x86_64
</pre> 
 </div> 
 <p>　　</p> 
 <p> </p> 
 <p> </p> 
 <p><span lang="en-us">2<span lang="zh-cn">、设置服务自启动</span></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre class="brush:bash;gutter:true;">[root@node01 Packages]# chkconfig --list | grep iscsi

iscsi           0:off   1:off   2:off   3:on    4:on    5:on    6:off

iscsid          0:off   1:off   2:off   3:on    4:on    5:on    6:off

[root@node01 ~]# chkconfig iscsid on

[root@node01 ~]# chkconfig iscsi on

[root@node01 ~]# chkconfig --list | grep iscsi

iscsi           0:off   1:off   2:on    3:on    4:on    5:on    6:off

iscsid          0:off   1:off   2:on    3:on    4:on    5:on    6:off
</pre> 
 </div> 
 <p>　　</p> 
 <p> </p> 
 <p><span lang="zh-cn">【此处<span lang="en-us">Linux<span lang="zh-cn">的版本为<span lang="en-us">RHEL<span lang="en-us"> 6.4<span lang="zh-cn">，<span lang="en-us">iSCSI<span lang="zh-cn">的操作已于以往不同】</span></span></span></span></span></span></span></span></p> 
 <p><span lang="en-us">3<span lang="zh-cn">、发现<span lang="en-us">iSCSI Targets</span></span></span></p> 
 <div class="cnblogs_Highlighter"> 
  <pre class="brush:bash;gutter:true;">[root@node01 ~]# iscsiadm -m discovery -t sendtargets -p 172.1.2.200:3260

[  OK  ] iscsid: [  OK  ]

172.1.2.200:3260,1 iqn.syksky.com.openfiler:tsn.7b99cc2f92ee
</pre> 
 </div> 
 <p>　　</p> 
 <p> </p> 
 <p>4、启动服务</p> 
 <div class="cnblogs_code"> 
  <pre>[root@node01 ~<span style="color:#000000;">]# service iscsi start

Starting iscsi: [  OK  ]</span></pre> 
 </div> 
 <p> </p> 
 <p> </p> 
 <p><span lang="en-us">5<span lang="zh-cn">、查看会话状态</span></span></p> 
 <p><span lang="zh-cn">【此处新版本，原先<span lang="en-us">-i<span lang="zh-cn">的参数已被替换，<span lang="en-us">-P<span lang="zh-cn">是<span lang="en-us">print<span lang="en-us"> level<span lang="zh-cn">，取值<span lang="en-us">0-3<span lang="zh-cn">，具体可以查看帮助】</span></span></span></span></span></span></span></span></span></span></p> 
 <div class="cnblogs_code"> 
  <pre>[root@node01 ~]# iscsiadm -m session -P <span style="color:#800080;">3</span><span style="color:#000000;">

iSCSI Transport Class version </span><span style="color:#800080;">2.0</span>-<span style="color:#800080;">870</span><span style="color:#000000;">

version </span><span style="color:#800080;">6.2</span>.<span style="color:#800080;">0</span>-<span style="color:#800080;">873.2</span><span style="color:#000000;">.el6

Target: iqn.syksky.com.openfiler:tsn.7b99cc2f92ee

        Current Portal: </span><span style="color:#800080;">172.1</span>.<span style="color:#800080;">2.200</span>:<span style="color:#800080;">3260</span>,<span style="color:#800080;">1</span><span style="color:#000000;">

        Persistent Portal: </span><span style="color:#800080;">172.1</span>.<span style="color:#800080;">2.200</span>:<span style="color:#800080;">3260</span>,<span style="color:#800080;">1</span>

                **********<span style="color:#000000;">

                Interface:

                </span>**********<span style="color:#000000;">

                Iface Name: default

                Iface Transport: tcp

                Iface Initiatorname: iqn.</span><span style="color:#800080;">1994</span>-<span style="color:#800080;">05</span><span style="color:#000000;">.com.redhat:89ccf9f3abc

                Iface IPaddress: </span><span style="color:#800080;">172.1</span>.<span style="color:#800080;">2.101</span><span style="color:#000000;">

                Iface HWaddress: </span>&lt;empty&gt;<span style="color:#000000;">

                Iface Netdev: </span>&lt;empty&gt;<span style="color:#000000;">

                SID: </span><span style="color:#800080;">2</span><span style="color:#000000;">

                iSCSI Connection State: LOGGED IN

                iSCSI Session State: LOGGED_IN

                Internal iscsid Session State: NO CHANGE

                </span>*********<span style="color:#000000;">

                Timeouts:

                </span>*********<span style="color:#000000;">

                Recovery Timeout: </span><span style="color:#800080;">120</span><span style="color:#000000;">

                Target Reset Timeout: </span><span style="color:#800080;">30</span><span style="color:#000000;">

                LUN Reset Timeout: </span><span style="color:#800080;">30</span><span style="color:#000000;">

                Abort Timeout: </span><span style="color:#800080;">15</span>

                *****<span style="color:#000000;">

                CHAP:

                </span>*****<span style="color:#000000;">

                username: </span>&lt;empty&gt;<span style="color:#000000;">

                password: </span>********<span style="color:#000000;">

                username_in: </span>&lt;empty&gt;<span style="color:#000000;">

                password_in: </span>********

                ************************<span style="color:#000000;">

                Negotiated iSCSI params:

                </span>************************<span style="color:#000000;">

                HeaderDigest: None

                DataDigest: None

                MaxRecvDataSegmentLength: </span><span style="color:#800080;">262144</span><span style="color:#000000;">

                MaxXmitDataSegmentLength: </span><span style="color:#800080;">131072</span><span style="color:#000000;">

                FirstBurstLength: </span><span style="color:#800080;">262144</span><span style="color:#000000;">

                MaxBurstLength: </span><span style="color:#800080;">262144</span><span style="color:#000000;">

                ImmediateData: No

                InitialR2T: Yes

                MaxOutstandingR2T: </span><span style="color:#800080;">1</span>

                ************************<span style="color:#000000;">

                Attached SCSI devices:

                </span>************************<span style="color:#000000;">

                Host Number: </span><span style="color:#800080;">4</span><span style="color:#000000;">  State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">0</span><span style="color:#000000;">

                        Attached scsi disk sdb          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">1</span><span style="color:#000000;">

                        Attached scsi disk sdc          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">10</span><span style="color:#000000;">

                        Attached scsi disk sdl          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">11</span><span style="color:#000000;">

                        Attached scsi disk sdm          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">12</span><span style="color:#000000;">

                        Attached scsi disk sdn          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">13</span><span style="color:#000000;">

                        Attached scsi disk sdo          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">14</span><span style="color:#000000;">

                        Attached scsi disk sdp          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">15</span><span style="color:#000000;">

                        Attached scsi disk sdq          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">2</span><span style="color:#000000;">

                        Attached scsi disk sdd          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">3</span><span style="color:#000000;">

                        Attached scsi disk sde          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">4</span><span style="color:#000000;">

                        Attached scsi disk sdf          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">5</span><span style="color:#000000;">

                        Attached scsi disk sdg          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">6</span><span style="color:#000000;">

                        Attached scsi disk sdh          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">7</span><span style="color:#000000;">

                        Attached scsi disk sdi          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">8</span><span style="color:#000000;">

                        Attached scsi disk sdj          State: running

                scsi4 Channel </span><span style="color:#800080;">00</span> Id <span style="color:#800080;">0</span> Lun: <span style="color:#800080;">9</span><span style="color:#000000;">

                        Attached scsi disk sdk          State: running

 </span></pre> 
 </div> 
 <p> </p> 
 <p><span lang="en-us">6<span lang="zh-cn">、发现的新磁盘</span></span></p> 
 <div class="cnblogs_code"> 
  <pre>[root@node01 ~]# fdisk -l | <span style="color:#0000ff;">grep</span> <span style="color:#800000;">"</span><span style="color:#800000;">Disk /dev</span><span style="color:#800000;">"</span><span style="color:#000000;">

Disk </span>/dev/sda: <span style="color:#800080;">42.9</span> GB, <span style="color:#800080;">42949672960</span><span style="color:#000000;"> bytes

Disk </span>/dev/mapper/vg_node01-lv_root: <span style="color:#800080;">38.2</span> GB, <span style="color:#800080;">38193332224</span><span style="color:#000000;"> bytes

Disk </span>/dev/mapper/vg_node01-lv_swap: <span style="color:#800080;">4227</span> MB, <span style="color:#800080;">4227858432</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdb: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdc: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdf: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sde: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdd: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdg: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdh: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdj: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdi: <span style="color:#800080;">1073</span> MB, <span style="color:#800080;">1073741824</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdl: <span style="color:#800080;">4294</span> MB, <span style="color:#800080;">4294967296</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdk: <span style="color:#800080;">4294</span> MB, <span style="color:#800080;">4294967296</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdn: <span style="color:#800080;">4294</span> MB, <span style="color:#800080;">4294967296</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdm: <span style="color:#800080;">4294</span> MB, <span style="color:#800080;">4294967296</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdo: <span style="color:#800080;">4294</span> MB, <span style="color:#800080;">4294967296</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdp: <span style="color:#800080;">4294</span> MB, <span style="color:#800080;">4294967296</span><span style="color:#000000;"> bytes

Disk </span>/dev/sdq: <span style="color:#800080;">4294</span> MB, <span style="color:#800080;">4294967296</span> bytes</pre> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/syksky/p/4927686.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f60be4996676ee4873373aa45580cad6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32F103C8T6低功耗测试（待机模式）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bc54189d734e54044025f93120f4c36c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mac 邮件自动归类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>