<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring MVC框架解析 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring MVC框架解析" />
<meta property="og:description" content="一、Spring MVC依赖的包
spring-context
spring-aspects
spring-jdbc
spring-test
spring-web
spring-webmvc
在pom.xml文件中添加依赖
&lt;properties&gt; &lt;spring.version&gt;5.2.13.RELEASE&lt;/spring.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-aspects&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-test&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-web&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt; &lt;version&gt;${spring.version}&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 二、在resource中创建spring-servlet.xml文件
添加MVC命名空间
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xmlns:context=&#34;http://www.springframework.org/schema/context&#34; xmlns:aop=&#34;http://www.springframework.org/schema/aop&#34; xmlns:mvc=&#34;http://www.springframework.org/schema/mvc&#34; xsi:schemaLocation=&#34;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd&#34;&gt; &lt;context:annotation-config/&gt; &lt;context:component-scan base-package=&#34;com.qfedu&#34;/&gt; &lt;!--声明MVC使用注解驱动--&gt; &lt;mvc:annotation-driven/&gt; &lt;/beans&gt; 三、在web." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/18660e3a413ceb8605620711dd885e6a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-31T21:30:12+08:00" />
<meta property="article:modified_time" content="2021-03-31T21:30:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring MVC框架解析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>一、Spring MVC依赖的包<br> spring-context<br> spring-aspects<br> spring-jdbc<br> spring-test<br> spring-web<br> spring-webmvc</p> 
<p><strong>在pom.xml文件中添加依赖</strong></p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>properties<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>spring.version<span class="token operator">&gt;</span>5.2.13.RELEASE<span class="token operator">&lt;</span>/spring.version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/properties<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>dependencies<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.springframework<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring-context<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token variable">${spring.version}</span><span class="token operator">&lt;</span>/version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.springframework<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring-aspects<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token variable">${spring.version}</span><span class="token operator">&lt;</span>/version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.springframework<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring-jdbc<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token variable">${spring.version}</span><span class="token operator">&lt;</span>/version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.springframework<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring-test<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token variable">${spring.version}</span><span class="token operator">&lt;</span>/version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.springframework<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring-web<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token variable">${spring.version}</span><span class="token operator">&lt;</span>/version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>org.springframework<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>spring-webmvc<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span><span class="token variable">${spring.version}</span><span class="token operator">&lt;</span>/version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>/dependencies<span class="token operator">&gt;</span>
</code></pre> 
<p>二、在resource中创建spring-servlet.xml文件<br> 添加MVC命名空间</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span>?<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>beans xmlns<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans"</span>
       xmlns:xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xmlns:context<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/context"</span>
       xmlns:aop<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/aop"</span>
       xmlns:mvc<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/mvc"</span>
       xsi:schemaLocation<span class="token operator">=</span><span class="token string">"http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/aop
        http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc.xsd"</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>context:annotation-config/<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>context:component-scan base-package<span class="token operator">=</span><span class="token string">"com.qfedu"</span>/<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>--声明MVC使用注解驱动--<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>mvc:annotation-driven/<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/beans<span class="token operator">&gt;</span>
</code></pre> 
<p>三、在web.xml中配置spring MVC的前端控制器<br> spring mvc提供了一个名为DispatcherServlet的类（Spring MVC的前端控制器），用于拦截用户请求交由spring MVC处理</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>?xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span>?<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>web-app xmlns<span class="token operator">=</span><span class="token string">"http://xmlns.jcp.org/xml/ns/javaee"</span>
         xmlns:xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         xsi:schemaLocation<span class="token operator">=</span><span class="token string">"http://xmlns.jcp.org/xml/ns/javaee
                      http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span>
         version<span class="token operator">=</span><span class="token string">"3.1"</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>servlet<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>servlet-name<span class="token operator">&gt;</span>Spring MVC<span class="token operator">&lt;</span>/servlet-name<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>servlet-class<span class="token operator">&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="token operator">&lt;</span>/servlet-class<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>init-param<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>param-name<span class="token operator">&gt;</span>contextConfigLocation<span class="token operator">&lt;</span>/param-name<span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>param-value<span class="token operator">&gt;</span>classpath:spring-servlet.xml<span class="token operator">&lt;</span>/param-value<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>/init-param<span class="token operator">&gt;</span>
         <span class="token operator">&lt;</span>load-on-startup<span class="token operator">&gt;</span>1<span class="token operator">&lt;</span>/load-on-startup<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/servlet<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>servlet-mapping<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>servlet-name<span class="token operator">&gt;</span>Spring MVC<span class="token operator">&lt;</span>/servlet-name<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>url-patter<span class="token operator">&gt;</span>/*<span class="token operator">&lt;</span>/url-patter<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/servlet-mapping<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>/web-app<span class="token operator">&gt;</span>
</code></pre> 
<p>四、创建控制器类</p> 
<pre><code class="prism language-bash">@Controller  //声明此类为spring MVC的控制器类
@RequestMapping<span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>//声明此控制器类请求的url
public class BookController<span class="token punctuation">{<!-- --></span>

<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash">@controller
@RequsetMapping<span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>
public class BookController<span class="token punctuation">{<!-- --></span>

@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
public void addBook<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  System.out.println<span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

@RequestMapping<span class="token punctuation">(</span><span class="token string">"/list"</span><span class="token punctuation">)</span>
public void listBooks<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
 System.out.println<span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>//访问的URL</p> 
<ul><li>http://localhost:8080/springmvc_demo2/book/add</li><li>http://localhost:8080/springmvc_demo2/book/list</li></ul> 
<p>/*：拦截所有的HTTP请求，包含.jsp的请求，都作为控制器类的请求路径来处理</p> 
<p>/：拦截所有的HTTP请求，但是不包括.jsp的请求，但是不会放行静态资源的请求</p> 
<p>五、前端提交数据到控制器<br> 表单提交</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>图书信息<span class="token operator">&lt;</span>/h3<span class="token operator">&gt;</span>
     <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"/book/add"</span> method<span class="token operator">=</span><span class="token string">"post"</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
                 <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
</code></pre> 
<p>超链接提交</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>a herf<span class="token operator">=</span><span class="token string">"localhost:8080/md?account=806563&amp;password=122345"</span><span class="token operator">&gt;</span>
</code></pre> 
<p>AJAX提交(请求头，请求行，请求体)都可以被用来传值</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"ajax提交"</span> id<span class="token operator">=</span>”btn1“<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"js/jquery-3.4.1.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">&gt;</span>
   <span class="token variable"><span class="token variable">$(</span><span class="token string">"#btn1"</span><span class="token variable">)</span></span>.click<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     var obj<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
     obj.name<span class="token operator">=</span><span class="token string">"炸那个死鬼"</span>；
     obj.author<span class="token operator">=</span><span class="token string">"死鬼"</span><span class="token punctuation">;</span>
     obj.bookprice<span class="token operator">=</span>12.6<span class="token punctuation">;</span>
     $.ajax<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        url:<span class="token string">"/book/add"</span>,
        type:<span class="token string">"post"</span>,
        headers:<span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>,
        contentType:<span class="token string">"application.json"</span>,
        data:obj,
        success:function<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console.log<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
</code></pre> 
<p>六、控制器接收前端的数据</p> 
<ol><li>表单提交</li><li>URL提交</li><li>$.ajax()请求的url的值</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          . 
         
        
          p 
         
        
          o 
         
        
          s 
         
        
          t 
         
        
          ( 
         
        
          ) 
         
        
          / 
         
        
       
         .post()/ 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord">.</span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mord mathdefault">t</span><span class="mopen">(</span><span class="mclose">)</span><span class="mord">/</span></span></span></span></span>.get()中的{}的值</li></ol> 
<p>@RequestParam：注解用于接收请求行传递的数据</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"book/add"</span> method<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>图书名称:<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"name"</span>/<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>图书作者:<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"author"</span>/<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>图书价格:<span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"price"</span>/<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"提交"</span>/<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/form<span class="token operator">&gt;</span>
</code></pre> 
<p>控制器接收数据</p> 
<pre><code class="prism language-bash">@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
public void book<span class="token punctuation">(</span>@RequestParam <span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> String a,@RequestParam<span class="token punctuation">(</span><span class="token string">"author"</span><span class="token punctuation">)</span> String b,@RequestParam<span class="token punctuation">(</span><span class="token string">"price"</span><span class="token punctuation">)</span> double c<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

 System.out.println<span class="token punctuation">(</span><span class="token string">"---book add"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>注意：如果控制器方法接收的请求数据的参数名与请求行传值的key一致时，则@RequestParam注解可以省略</p> 
<pre><code class="prism language-bash">@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
public void addBook<span class="token punctuation">(</span>String name,String author, double price<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    System.out.println<span class="token punctuation">(</span><span class="token string">"---book add"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>author<span class="token punctuation">)</span><span class="token punctuation">;</span>
    System.out.println<span class="token punctuation">(</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>@RequestHander 请求头传值，用于接收请求头传递的数据</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"ajax提交"</span> id<span class="token operator">=</span><span class="token string">"btn1"</span>/<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"js/jquery-3.4.1.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">&gt;</span>
        <span class="token variable"><span class="token variable">$(</span><span class="token string">"#btn1"</span><span class="token variable">)</span></span>.click<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            $.ajax<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                url:<span class="token string">"book/list"</span>,
                type:<span class="token string">"post"</span>,
                <span class="token comment">#请求头</span>
                headers:<span class="token punctuation">{<!-- --></span>
                    token:<span class="token string">"wahahaawahaha"</span>
                <span class="token punctuation">}</span>,
                success:function<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    console.log<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
</code></pre> 
<pre><code class="prism language-bash">@RequestMapping（<span class="token string">"/book"</span>）
public class book<span class="token punctuation">(</span>@RequestHeader String a<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>

System.out.println<span class="token punctuation">(</span><span class="token string">"---list---"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>七、请求体传值<br> @RequestBody注解用于接收请求体传递的数据</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"button"</span> value<span class="token operator">=</span><span class="token string">"ajax提交"</span> id<span class="token operator">=</span><span class="token string">"btn1"</span>/<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span> src<span class="token operator">=</span><span class="token string">"js/jquery-3.4.1.min.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">&gt;</span>
        <span class="token variable"><span class="token variable">$(</span><span class="token string">"#btn1"</span><span class="token variable">)</span></span>.click<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            var obj <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            obj.bookName <span class="token operator">=</span> <span class="token string">"Python"</span><span class="token punctuation">;</span>
            obj.bookAuthor<span class="token operator">=</span><span class="token string">"杰哥"</span><span class="token punctuation">;</span>
            obj.bookPrice <span class="token operator">=</span> 2.22<span class="token punctuation">;</span>

            var s <span class="token operator">=</span> JSON.stringify<span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> //将对象转换成JSON格式
      
            $.ajax<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                url:<span class="token string">"book/update"</span>,
                type:<span class="token string">"post"</span>,
                contentType:<span class="token string">"application/json"</span>,
                //请求体
                data:s,   //如果data的值为json格式字符串，contentType必须设置为<span class="token string">"application/json"</span>
                success:function<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
                    console.log<span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span>/script<span class="token operator">&gt;</span>
</code></pre> 
<p>注意一定要导入依赖jackjson</p> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>groupId<span class="token operator">&gt;</span>com.fasterxml.jackson.core<span class="token operator">&lt;</span>/groupId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>artifactId<span class="token operator">&gt;</span>jackson-databind<span class="token operator">&lt;</span>/artifactId<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>2.12.1<span class="token operator">&lt;</span>/version<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/dependency<span class="token operator">&gt;</span>
</code></pre> 
<pre><code class="prism language-bash">@RequestMapping（<span class="token string">"book"</span>）
public class book<span class="token punctuation">(</span>@RequestBody String a<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
System.out.prinln<span class="token punctuation">(</span><span class="token string">"list"</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>八、控制器响应前端请求</p> 
<pre><code class="prism language-bash">同步请求：form表单，超链接
处理同步请求返回类型定义为String，ModelAndView，以实现页面的跳转
</code></pre> 
<pre><code class="prism language-bash">返回类型为String 
</code></pre> 
<pre><code class="prism language-bash">转发
@RequestMapping（<span class="token string">"/book"</span>）
public class BookController<span class="token punctuation">{<!-- --></span>
	@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
	public String AddBook<span class="token punctuation">(</span>String name,String Author,double price<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	System.out.println<span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">"/book.jsp"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash">重定向
@RequestMapping（”/add“）
public class BookController<span class="token punctuation">{<!-- --></span>
	@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
	public String AddBook<span class="token punctuation">(</span>String name,String Author,double price<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	System.out.println<span class="token punctuation">(</span><span class="token string">"book"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">"redirect:/book.jsp"</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash">返回类型为ModelAndView
</code></pre> 
<pre><code class="prism language-bash">转发
</code></pre> 
<pre><code class="prism language-bash">@RequestMapping<span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>
public class BookController<span class="token punctuation">{<!-- --></span>
@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
public ModelAndView addBook<span class="token punctuation">(</span>String name,String Author,double price<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     System.out.println<span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     ModelAndView modelAndView <span class="token operator">=</span>new ModelAndView<span class="token punctuation">(</span><span class="token string">"/tips.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash">重定向
</code></pre> 
<pre><code class="prism language-bash">@RequestMapping（<span class="token string">"/book"</span>）
public class BookController<span class="token punctuation">{<!-- --></span>
	@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
	public ModelAndView addBook<span class="token punctuation">(</span>String name,String Author,double price<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	System.out.println<span class="token punctuation">(</span><span class="token string">"add"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	ModelAndView modelAndView <span class="token operator">=</span>new ModelAndView<span class="token punctuation">(</span><span class="token string">"redirect:/book"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>	
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>九、控制器响应异步请求</p> 
<pre><code class="prism language-bash">异步请求：ajax请求
使用response中的输出流响应请求
控制器返回类型为void
控制器方法中添加HttpResponse response参数
在方法中通过response获取输出流，使用流响应ajax请求
</code></pre> 
<pre><code class="prism language-bash">@RequsetMapping（<span class="token string">"/update"</span>）
public void update<span class="token punctuation">(</span>@Requestbody Book book,HttpResponseServlet response<span class="token punctuation">)</span> throws IOException<span class="token punctuation">{<!-- --></span>
System.out.println<span class="token punctuation">(</span><span class="token string">"addbook"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
System.out.println<span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>

//使用ObjectMapper将对象转换为Json格式
String s<span class="token operator">=</span>new ObjectMapper.writeValueAsString<span class="token punctuation">(</span>book<span class="token punctuation">)</span><span class="token punctuation">;</span>
response.setCharacterEnCoding<span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response.setContentType<span class="token punctuation">(</span><span class="token string">"application/json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
PrintWriter out <span class="token operator">=</span>response.getWrite<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out.println<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
out.flush<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
out.close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span> 
</code></pre> 
<pre><code class="prism language-bash">直接在控制器中返回控制对象
</code></pre> 
<pre><code class="prism language-bash">控制器方法的返回类型设置响应请求为ajax请求对象
在控制器前添加@Requestbody，将返回的对象转换成JSON响应给ajax对象
如果控制器里所有的请求都是ajax对象请求，则可以直接在控制器前添加@RequestBody注解
</code></pre> 
<pre><code class="prism language-bash">@RequestMapping（<span class="token string">"/book"</span>）
@RequestBody
pdublic List<span class="token operator">&lt;</span>Book<span class="token operator">&gt;</span> addBook<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
System.out.println<span class="token punctuation">(</span><span class="token string">"*************"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
List<span class="token operator">&lt;</span>Book<span class="token operator">&gt;</span> book<span class="token operator">=</span>new ArrayList<span class="token operator">&lt;</span>Book<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
book.add<span class="token punctuation">(</span>new Book<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
book.add<span class="token punctuation">(</span>new Book<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> book<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash">控制器响应同步数据的请求
</code></pre> 
<pre><code class="prism language-bash">返回类型为String
</code></pre> 
<pre><code class="prism language-bash">//在控制器中定义一个Model参数
//在return之前，向model中添加键值对，添加的键值对被传递到转发的界面
</code></pre> 
<pre><code class="prism language-bash">@Controller
@RequestMapping<span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>
pulic String addBook<span class="token punctuation">(</span>String name,String Author,double price,Model model<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	model.addAttribute<span class="token punctuation">(</span><span class="token string">"key1"</span>,<span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	model.addAttribute<span class="token punctuation">(</span><span class="token string">"book"</span>,new Book<span class="token punctuation">(</span>1,<span class="token string">"hello"</span>,<span class="token string">"to"</span>,26.3,<span class="token punctuation">))</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">"tips.jps"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash">除了直接使用model对象传值，还可以直接使用HttpServeltRequest对象
@RequestMapping<span class="token punctuation">(</span><span class="token string">"/add"</span><span class="token punctuation">)</span>
public String addBook<span class="token punctuation">(</span>String name,String author,double price,HttpServletRequest request<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
	request.setAttribute<span class="token punctuation">(</span><span class="token string">"key1"</span>,<span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	request.setAttribute<span class="token punctuation">(</span><span class="token string">"book"</span>,new Book<span class="token punctuation">(</span>1,<span class="token string">"Java"</span>,<span class="token string">"老张"</span>,2.22<span class="token punctuation">))</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token string">"tips.jsp"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash">返回类型ModelAndView
</code></pre> 
<pre><code class="prism language-bash">@RequestMapping<span class="token punctuation">(</span><span class="token string">"/book"</span><span class="token punctuation">)</span>
public MOdelAndView addBook<span class="token punctuation">(</span>String name,String author,double price<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      ModelAndView modelAndView<span class="token operator">=</span>new ModelAndView<span class="token punctuation">(</span><span class="token string">"/tips.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      modelAndView.addObject<span class="token punctuation">(</span><span class="token string">"key1"</span>,<span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      modelAndView.addObject<span class="token punctuation">(</span><span class="token string">"book"</span>,new Book<span class="token punctuation">(</span>1,<span class="token string">"Java"</span>,<span class="token string">"老张"</span>,2.22<span class="token punctuation">))</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-bash"><span class="token variable">${pageContext.request.contextPath}</span>//打印当前项目路径名
<span class="token operator">&lt;</span>base href<span class="token operator">=</span>$<span class="token punctuation">{<!-- --></span>pageContext.request.contextPath+<span class="token string">'/'</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/163f660bd861b91a0f7b26ad82a15e73/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Matlab双目标定与python-opencv配置标定参数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bdf8c7afc0e3a60b26d85a09c4298189/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用vant中tab组件报错问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>