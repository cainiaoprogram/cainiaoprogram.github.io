<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Packet Tracer - Configure AAA Authentication on Cisco Routers - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Packet Tracer - Configure AAA Authentication on Cisco Routers" />
<meta property="og:description" content="Packet Tracer - 在思科路由器上配置 AAA 认证 地址表 目标 在R1上配置本地用户账户，并使用本地AAA进行控制台和vty线路的身份验证。从R1控制台和PC-A客户端验证本地AAA身份验证功能。配置基于服务器的AAA身份验证，采用TACACS&#43;协议。从PC-B客户端验证基于服务器的AAA（TACACS&#43;）身份验证。配置基于服务器的AAA身份验证，采用RADIUS协议。从PC-C客户端验证基于服务器的AAA（RADIUS）身份验证。 背景/场景 网络拓扑图显示了路由器R1、R2和R3。目前，所有管理安全性都基于enable secret密码。您的任务是配置并测试本地及基于服务器的AAA解决方案。
您将在路由器R1上创建一个本地用户账户，并配置本地AAA以测试控制台和vty登录：
用户账户：Admin1，密码admin1pa55
接下来，将配置路由器R2以支持通过TACACS&#43;协议实现的基于服务器的身份验证。TACACS&#43;服务器已经预先配置了以下信息：
客户端：R2，关键字为tacacspa55
用户账户：Admin2，密码admin2pa55
最后，您将配置路由器R3以支持通过RADIUS协议实现的基于服务器的身份验证。RADIUS服务器已预先配置如下信息：
客户端：R3，关键字为radiuspa55
用户账户：Admin3，密码admin3pa55
此外，路由器还预配置了以下内容：
启用秘密密码：ciscoenpa55
使用MD5认证的OSPF路由协议，密码为：MD5pa55
注意：控制台和vty线路尚未预先配置。
注意：尽管IOS版本15.3使用了更为安全的加密哈希算法SCRYPT，但在Packet Tracer当前支持的IOS版本中仍使用MD5。请始终在您的设备上使用最安全的选项。
第一部分：在R1上配置本地AAA认证以实现控制台访问 步骤1：测试连通性
从PC-A向PC-B执行Ping操作。从PC-A向PC-C执行Ping操作。从PC-B向PC-C执行Ping操作。 步骤2：在R1上配置本地用户名
在R1上配置一个名为Admin1的用户名，设置秘密密码为admin1pa55。 R1(config)# username Admin1 secret admin1pa55
步骤3：在R1上为控制台访问配置本地AAA认证
在R1上启用AAA功能，并配置控制台登录时使用本地数据库进行AAA身份验证。 R1(config)# aaa new-model
R1(config)# aaa authentication login default local
步骤4：配置控制台线路使用定义的AAA认证方法
在R1上针对控制台登录启用AAA，并配置其使用默认方法列表进行AAA身份验证。 R1(config)# line console 0
R1(config-line)# login authentication default
步骤5：验证AAA认证方法
使用本地数据库验证用户EXEC登录过程。 通过以上配置后，可以在R1的控制台上用Admin1账户和对应的密码admin1pa55进行登录，验证本地AAA身份验证是否生效。
第二部分：在R1上配置本地AAA认证以实现vty线路访问 步骤1：配置域名和加密密钥以配合SSH使用
a. 在R1上将ccnasecurity.com设置为域名。
b. 创建一个1024位的RSA加密密钥。
R1(config)#ip domain-name ccnasecurity.com" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5d6235173e3560f7b1ddaffca6da9e4b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-07T21:03:44+08:00" />
<meta property="article:modified_time" content="2024-01-07T21:03:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Packet Tracer - Configure AAA Authentication on Cisco Routers</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Packet_Tracer___AAA__0"></a>Packet Tracer - 在思科路由器上配置 AAA 认证</h2> 
<h3><a id="_1"></a>地址表</h3> 
<p><img src="https://images2.imgbox.com/f8/7c/G00b7EnC_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_6"></a>目标</h3> 
<ul><li>在R1上配置本地用户账户，并使用本地AAA进行控制台和vty线路的身份验证。</li><li>从R1控制台和PC-A客户端验证本地AAA身份验证功能。</li><li>配置基于服务器的AAA身份验证，采用TACACS+协议。</li><li>从PC-B客户端验证基于服务器的AAA（TACACS+）身份验证。</li><li>配置基于服务器的AAA身份验证，采用RADIUS协议。</li><li>从PC-C客户端验证基于服务器的AAA（RADIUS）身份验证。</li></ul> 
<h3><a id="_15"></a>背景/场景</h3> 
<p>网络拓扑图显示了路由器R1、R2和R3。目前，所有管理安全性都基于enable secret密码。您的任务是配置并测试本地及基于服务器的AAA解决方案。</p> 
<p>您将在路由器R1上创建一个本地用户账户，并配置本地AAA以测试控制台和vty登录：</p> 
<ul><li> <p>用户账户：Admin1，密码admin1pa55<br> 接下来，将配置路由器R2以支持通过TACACS+协议实现的基于服务器的身份验证。TACACS+服务器已经预先配置了以下信息：</p> </li><li> <p>客户端：R2，关键字为tacacspa55</p> </li><li> <p>用户账户：Admin2，密码admin2pa55<br> 最后，您将配置路由器R3以支持通过RADIUS协议实现的基于服务器的身份验证。RADIUS服务器已预先配置如下信息：</p> </li><li> <p>客户端：R3，关键字为radiuspa55</p> </li><li> <p>用户账户：Admin3，密码admin3pa55<br> 此外，路由器还预配置了以下内容：</p> </li><li> <p>启用秘密密码：ciscoenpa55</p> </li><li> <p>使用MD5认证的OSPF路由协议，密码为：MD5pa55<br> 注意：控制台和vty线路尚未预先配置。</p> </li></ul> 
<p>注意：尽管IOS版本15.3使用了更为安全的加密哈希算法SCRYPT，但在Packet Tracer当前支持的IOS版本中仍使用MD5。请始终在您的设备上使用最安全的选项。</p> 
<hr> 
<h3><a id="R1AAA_41"></a>第一部分：在R1上配置本地AAA认证以实现控制台访问</h3> 
<p><strong>步骤1：测试连通性</strong></p> 
<ul><li>从PC-A向PC-B执行Ping操作。</li><li>从PC-A向PC-C执行Ping操作。</li><li>从PC-B向PC-C执行Ping操作。</li></ul> 
<p><strong>步骤2：在R1上配置本地用户名</strong></p> 
<ul><li>在R1上配置一个名为<strong>Admin1</strong>的用户名，设置秘密密码为<strong>admin1pa55</strong>。</li></ul> 
<blockquote> 
 <p>R1(config)# username Admin1 secret admin1pa55</p> 
</blockquote> 
<p><strong>步骤3：在R1上为控制台访问配置本地AAA认证</strong></p> 
<ul><li>在R1上启用AAA功能，并配置控制台登录时使用本地数据库进行AAA身份验证。</li></ul> 
<blockquote> 
 <p>R1(config)# aaa new-model<br> R1(config)# aaa authentication login default local</p> 
</blockquote> 
<p><strong>步骤4：配置控制台线路使用定义的AAA认证方法</strong></p> 
<ul><li>在R1上针对控制台登录启用AAA，并配置其使用默认方法列表进行AAA身份验证。</li></ul> 
<blockquote> 
 <p>R1(config)# line console 0<br> R1(config-line)# login authentication default</p> 
</blockquote> 
<p><strong>步骤5：验证AAA认证方法</strong></p> 
<ul><li>使用本地数据库验证用户EXEC登录过程。</li></ul> 
<p>通过以上配置后，可以在R1的控制台上用Admin1账户和对应的密码admin1pa55进行登录，验证本地AAA身份验证是否生效。</p> 
<p><img src="https://images2.imgbox.com/17/57/fPJIxR1W_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="R1AAAvty_77"></a>第二部分：在R1上配置本地AAA认证以实现vty线路访问</h3> 
<p><strong>步骤1：配置域名和加密密钥以配合SSH使用</strong><br> a. 在R1上将<strong>ccnasecurity.com</strong>设置为域名。<br> b. 创建一个1024位的RSA加密密钥。</p> 
<blockquote> 
 <p>R1(config)#ip domain-name ccnasecurity.com<br> R1(config)# crypto key generate rsa</p> 
</blockquote> 
<pre><code class="prism language-shell">R1<span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment"># crypto key generate rsa</span>
The name <span class="token keyword">for</span> the keys will be: R3.ccnasecurity.com
Choose the size of the key modulus <span class="token keyword">in</span> the range of <span class="token number">360</span> to <span class="token number">2048</span> <span class="token keyword">for</span> your
General Purpose Keys. Choosing a key modulus greater than <span class="token number">512</span> may take
a few minutes.
 
How many bits <span class="token keyword">in</span> the modulus <span class="token punctuation">[</span><span class="token number">512</span><span class="token punctuation">]</span>: <span class="token number">1024</span>
% Generating <span class="token number">1024</span> bit RSA keys, keys will be non-exportable<span class="token punctuation">..</span>.<span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
</code></pre> 
<p><strong>步骤2：为R1上的vty线路配置命名列表AAA认证方法</strong></p> 
<ul><li>配置名为<strong>SSH-LOGIN</strong>的命名列表，用于使用本地AAA进行登录认证。</li></ul> 
<blockquote> 
 <p>R1(config)# aaa authentication login SSH-LOGIN local</p> 
</blockquote> 
<p><strong>步骤3：配置vty线路使用定义的AAA认证方法</strong></p> 
<ul><li>配置vty线路使用已定义的AAA方法，并只允许通过SSH进行远程访问。</li></ul> 
<blockquote> 
 <p>R1(config)# line vty 0 4<br> R1(config-line)# transport input ssh<br> R1(config-line)# login authentication SSH-LOGIN</p> 
</blockquote> 
<p><strong>步骤4：验证AAA认证方法</strong></p> 
<ul><li>从PC-A的命令提示符处通过SSH连接到R1，验证SSH配置及AAA身份验证。<br> <img src="https://images2.imgbox.com/05/3c/AHD8zIEU_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="R2TACACSAAA_116"></a>第三部分：在R2上配置基于TACACS+服务器的AAA认证</h3> 
<p><strong>步骤1：配置备用本地数据库条目（Admin）</strong></p> 
<ul><li>为了备份目的，在R2上配置一个本地用户名<strong>Admin2</strong>，密码为<strong>admin2pa55</strong>。</li></ul> 
<blockquote> 
 <p>R2(config)# username Admin2 secret admin2pa55</p> 
</blockquote> 
<p><strong>步骤2：验证TACACS+服务器配置</strong></p> 
<ul><li>点击TACACS+ Server，查看“服务”选项卡中的AAA设置，确认存在针对R2的网络配置条目和针对Admin2的用户设置条目。</li></ul> 
<p><img src="https://images2.imgbox.com/94/44/YlxOcsMj_o.png" alt="在这里插入图片描述"></p> 
<p><strong>步骤3：在R2上配置TACACS+服务器详细信息</strong></p> 
<ul><li>在R2上配置AAA TACACS+服务器IP地址和共享密钥。</li></ul> 
<p>注意：尽管<code>tacacs-server host</code> 和 <code>tacacs-server key</code> 命令已过时，但目前Packet Tracer暂不支持新命令<code>tacacs server</code>。此处依然使用旧命令进行配置。</p> 
<blockquote> 
 <p>R2(config)# tacacs-server host 192.168.2.2<br> R2(config)# tacacs-server key tacacspa55</p> 
</blockquote> 
<p><strong>步骤4：为R2的控制台访问配置AAA登录认证</strong></p> 
<ul><li>启用R2上的AAA，并配置所有登录通过AAA TACACS+服务器进行认证，若服务器不可用，则使用本地数据库。</li></ul> 
<blockquote> 
 <p>R2(config)# aaa new-model<br> R2(config)# aaa authentication login default group tacacs+ local</p> 
</blockquote> 
<p><strong>步骤5：配置控制台线路使用定义的AAA认证方法</strong></p> 
<ul><li>配置控制台登录使用默认的AAA认证方法。</li></ul> 
<blockquote> 
 <p>R2(config)#line console 0<br> R2(config-line)#login authentication default</p> 
</blockquote> 
<p>由于之前已经全局配置了AAA和TACACS+，此处不再需要单独配置console线路。</p> 
<p><strong>步骤6：验证AAA认证方法</strong></p> 
<ul><li>通过AAA TACACS+服务器验证用户EXEC登录。可以尝试从另一设备通过console或SSH等方式登录R2并观察其是否成功通过TACACS+服务器进行身份验证。<br> <img src="https://images2.imgbox.com/48/d0/drlZ5nGK_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="R3RADIUSAAA_161"></a>第四部分：在R3上配置基于RADIUS服务器的AAA认证</h3> 
<p><strong>步骤1：配置备用本地数据库条目（Admin）</strong></p> 
<ul><li>为了备份目的，在R3上配置一个本地用户名<strong>Admin3</strong>，密码为<strong>admin3pa55</strong>。</li></ul> 
<blockquote> 
 <p>R3(config)# username Admin3 secret admin3pa55</p> 
</blockquote> 
<p><strong>步骤2：验证RADIUS服务器配置</strong></p> 
<ul><li>点击RADIUS服务器，并查看“服务”选项卡中的AAA设置。注意其中包含针对R3的网络配置条目和针对Admin3的用户设置条目。</li></ul> 
<p><img src="https://images2.imgbox.com/35/3c/tVfijRww_o.png" alt="在这里插入图片描述"></p> 
<p><strong>步骤3：在R3上配置RADIUS服务器详细信息</strong></p> 
<ul><li>在R3上配置AAA RADIUS服务器IP地址和共享密钥。</li></ul> 
<p>注意：虽然<code>radius-server host</code> 和 <code>radius-server key</code> 命令可能已过时，但当前Packet Tracer版本暂不支持新的<code>radius server</code>命令。此处仍使用旧命令进行配置。</p> 
<blockquote> 
 <p>R3(config)# radius-server host 192.168.3.2<br> R3(config)# radius-server key radiuspa55</p> 
</blockquote> 
<p><strong>步骤4：为R3的控制台访问配置AAA登录认证</strong></p> 
<ul><li>启用R3上的AAA，并配置所有登录通过AAA RADIUS服务器进行认证，若服务器不可用，则使用本地数据库。</li></ul> 
<blockquote> 
 <p>R3(config)# aaa new-model<br> R3(config)# aaa authentication login default group radius local</p> 
</blockquote> 
<p><strong>步骤5：配置控制台线路使用定义的AAA认证方法</strong></p> 
<ul><li>配置控制台登录使用默认的AAA认证方法。</li></ul> 
<blockquote> 
 <p>R3(config)#line console 0<br> R3(config-line)#login authentication default</p> 
</blockquote> 
<p>由于之前已经全局配置了AAA和RADIUS，此处不再需要单独配置console线路。</p> 
<p><strong>步骤6：验证AAA认证方法</strong></p> 
<ul><li>通过AAA RADIUS服务器验证用户EXEC登录。可以尝试从另一设备通过console或SSH等方式登录R3并观察其是否成功通过RADIUS服务器进行身份验证。<br> <img src="https://images2.imgbox.com/7e/ab/diMAjP4v_o.png" alt="在这里插入图片描述"></li></ul> 
<p><strong>步骤7：检查结果</strong></p> 
<ul><li>您的完成度应达到100%。点击“检查结果”以查看反馈和已完成所需组件的验证情况。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00bbffad3f5f8a2614581ab68e300758/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">自动驾驶记忆泊车功能规范</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/84e62c050260a98a4c38d75610ebeecc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java：Stream流</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>