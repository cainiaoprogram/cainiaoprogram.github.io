<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mycat入门教程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mycat入门教程" />
<meta property="og:description" content="mycat介绍 介绍在官方网站上有比较详细的介绍，在这里复制粘贴没什么意思，大家到官网上看官网链接 前置条件 本教程是在window环境下运行的，实际生产推荐在Linux上运行。 必备条件(自行安装,如果不会装请先打好基础在来学习)：
JDK：建议是1.7及其以上。MySQL：必须是5.5及其以上。 拓扑结构 两张表users和item，三个数据库db01,db02,db03（三个库在一个数据库实例上）users只在db01中存储。item表被分割到db02和db03中存储。 create database db01; CREATE TABLE users ( id INT NOT NULL AUTO_INCREMENT, name varchar(50) NOT NULL default &#39;&#39;, indate DATETIME NOT NULL default &#39;0000-00-00 00:00:00&#39;, PRIMARY KEY (id) )AUTO_INCREMENT= 1 ENGINE=InnoDB DEFAULT CHARSET=utf8; 在db02和db03中分别创建item表，SQL脚本如下
create database db02; CREATE TABLE item ( id INT NOT NULL AUTO_INCREMENT, value INT NOT NULL default 0, indate DATETIME NOT NULL default &#39;0000-00-00 00:00:00&#39;, PRIMARY KEY (id) )AUTO_INCREMENT= 1 ENGINE=InnoDB DEFAULT CHARSET=utf8; create database db03; CREATE TABLE item ( id INT NOT NULL AUTO_INCREMENT, value INT NOT NULL default 0, indate DATETIME NOT NULL default &#39;0000-00-00 00:00:00&#39;, PRIMARY KEY (id) )AUTO_INCREMENT= 1 ENGINE=InnoDB DEFAULT CHARSET=utf8; 开始使用 先打mycat官方网站上下载安装包，网址为mycat 下载图如下所示： 然后在conf目录下编辑service." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3c784df3157d8ac8ab06a4c0eceacb8b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-02-24T22:50:51+08:00" />
<meta property="article:modified_time" content="2017-02-24T22:50:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mycat入门教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3 id="mycat介绍">mycat介绍</h3> 
<ul><li>介绍在官方网站上有比较详细的介绍，在这里复制粘贴没什么意思，大家到官网上看</li><li><a href="http://www.mycat.org.cn/" rel="nofollow">官网链接</a></li></ul> 
<h3 id="前置条件">前置条件</h3> 
<p>本教程是在window环境下运行的，实际生产推荐在Linux上运行。 <br> 必备条件(自行安装,如果不会装请先打好基础在来学习)：</p> 
<ul><li>JDK：建议是1.7及其以上。</li><li>MySQL：必须是5.5及其以上。</li></ul> 
<h3 id="拓扑结构">拓扑结构</h3> 
<p><img src="https://images2.imgbox.com/14/6f/2JY7ujQH_o.png" alt="这里写图片描述" title=""></p> 
<ul><li>两张表users和item，三个数据库db01,db02,db03（三个库在一个数据库实例上）</li><li>users只在db01中存储。</li><li>item表被分割到db02和db03中存储。</li></ul> 
<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> db01;</span> 

 <span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (  
    id <span class="hljs-keyword">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,  
    name <span class="hljs-keyword">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">default</span> <span class="hljs-string">''</span>,  
    indate DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">default</span> <span class="hljs-string">'0000-00-00 00:00:00'</span>,  
    <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (id)  
)AUTO_INCREMENT= <span class="hljs-number">1</span> ENGINE=InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET=utf8;</span>  </code></pre> 
<p>在db02和db03中分别创建item表，SQL脚本如下</p> 
<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> db02;</span>  
 <span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> item (  
    id <span class="hljs-keyword">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,  
    <span class="hljs-keyword">value</span> <span class="hljs-keyword">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>,  
    indate DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">default</span> <span class="hljs-string">'0000-00-00 00:00:00'</span>,  
    <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (id)  
)AUTO_INCREMENT= <span class="hljs-number">1</span> ENGINE=InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET=utf8;</span>

<span class="hljs-operator"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> db03;</span>  
<span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> item (  
    id <span class="hljs-keyword">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,  
    <span class="hljs-keyword">value</span> <span class="hljs-keyword">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">default</span> <span class="hljs-number">0</span>,  
    indate DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">default</span> <span class="hljs-string">'0000-00-00 00:00:00'</span>,  
    <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (id)  
)AUTO_INCREMENT= <span class="hljs-number">1</span> ENGINE=InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET=utf8;</span> </code></pre> 
<h3 id="开始使用">开始使用</h3> 
<ul><li>先打mycat官方网站上下载安装包，网址为<a href="http://dl.mycat.io/1.6-RELEASE/" rel="nofollow">mycat</a> 下载图如下所示： <br> <img src="https://images2.imgbox.com/73/bc/fWpBTSbJ_o.png" alt="下载图示" title=""></li><li>然后在conf目录下编辑service.xml，rule.xml，schema.xml三个文件。 </li><li>service.xml主要配置mycat服务的参数，比如端口号，myact用户名和密码使用的逻辑数据库等</li><li>role.xml主要配置路由策略，主要有分片的片键，拆分的策略（取模还是按区间划分等）</li><li>schema.xml文件主要配置数据库的信息，例如逻辑数据库名称，物理上真实的数据源以及表和数据源之间的对应关系和路由策略等。</li><li><p>配置如下所示：</p></li><li><p>server.xml</p></li></ul> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  
<span class="hljs-doctype">&lt;!DOCTYPE mycat:server SYSTEM "server.dtd"&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">mycat:server</span> <span class="hljs-attribute">xmlns:mycat</span>=<span class="hljs-value">"http://io.mycat/"</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-title">system</span>&gt;</span>  
            <span class="hljs-comment">&lt;!--   
                &lt;property name="processors"&gt;32&lt;/property&gt;  
                &lt;property name="processorExecutor"&gt;32&lt;/property&gt;   
                &lt;property name="bindIp"&gt;0.0.0.0&lt;/property&gt;   
                &lt;property name="frontWriteQueueSize"&gt;4096&lt;/property&gt;  
                &lt;property name="idleTimeout"&gt;300000&lt;/property&gt;  
                &lt;property name="mutiNodePatchSize"&gt;100&lt;/property&gt;  
            --&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"defaultSqlParser"</span>&gt;</span>druidparser<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"mutiNodeLimitType"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"serverPort"</span>&gt;</span>8066<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"managerPort"</span>&gt;</span>9066<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>   
        <span class="hljs-tag">&lt;/<span class="hljs-title">system</span>&gt;</span>  
        <span class="hljs-comment">&lt;!-- 任意设置登陆 mycat 的用户名,密码,数据库  --&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-title">user</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"test"</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"schemas"</span>&gt;</span>TESTDB<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
        <span class="hljs-tag">&lt;/<span class="hljs-title">user</span>&gt;</span>  

        <span class="hljs-tag">&lt;<span class="hljs-title">user</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"user"</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span>&gt;</span>user<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"schemas"</span>&gt;</span>TESTDB<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
                <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"readOnly"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
        <span class="hljs-tag">&lt;/<span class="hljs-title">user</span>&gt;</span>  
        <span class="hljs-comment">&lt;!--   
        &lt;quarantine&gt;   
           &lt;whitehost&gt;  
              &lt;host host="127.0.0.1" user="mycat"/&gt;  
              &lt;host host="127.0.0.2" user="mycat"/&gt;  
           &lt;/whitehost&gt;  
       &lt;blacklist check="false"&gt;&lt;/blacklist&gt;  
        &lt;/quarantine&gt;  
        --&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-title">mycat:server</span>&gt;</span>  
</code></pre> 
<ul><li>role.xml <br> 该路由表表明采用mod2的方式进行路由。通过下面可知是对item表的id键进行取模分表的，取模分到db02和db03，而users表直接路由到db01中。</li></ul> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-comment">&lt;!-- - - Licensed under the Apache License, Version 2.0 (the "License"); 
    - you may not use this file except in compliance with the License. - You 
    may obtain a copy of the License at - - http://www.apache.org/licenses/LICENSE-2.0 
    - - Unless required by applicable law or agreed to in writing, software - 
    distributed under the License is distributed on an "AS IS" BASIS, - WITHOUT 
    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. - See the 
    License for the specific language governing permissions and - limitations 
    under the License. --&gt;</span>
<span class="hljs-doctype">&lt;!DOCTYPE mycat:rule SYSTEM "rule.dtd"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">mycat:rule</span> <span class="hljs-attribute">xmlns:mycat</span>=<span class="hljs-value">"http://io.mycat/"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">tableRule</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"role1"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">rule</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">columns</span>&gt;</span>id<span class="hljs-tag">&lt;/<span class="hljs-title">columns</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">algorithm</span>&gt;</span>mod-long<span class="hljs-tag">&lt;/<span class="hljs-title">algorithm</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">rule</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tableRule</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">function</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"mod-long"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"io.mycat.route.function.PartitionByMod"</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- how many data nodes --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"count"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">function</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">mycat:rule</span>&gt;</span>
</code></pre> 
<ul><li>schema.xml 数据库的url,usename,password按实际情况填写。</li></ul> 
<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0"?&gt;</span>  
<span class="hljs-doctype">&lt;!DOCTYPE mycat:schema SYSTEM "schema.dtd"&gt;</span>  
<span class="hljs-tag">&lt;<span class="hljs-title">mycat:schema</span> <span class="hljs-attribute">xmlns:mycat</span>=<span class="hljs-value">"http://io.mycat/"</span>&gt;</span>  

    <span class="hljs-comment">&lt;!-- 设置表的存储方式.schema name="TESTDB" 与 server.xml中的 TESTDB 设置一致  --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-title">schema</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"TESTDB"</span> <span class="hljs-attribute">checkSQLschema</span>=<span class="hljs-value">"false"</span> <span class="hljs-attribute">sqlMaxLimit</span>=<span class="hljs-value">"100"</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-title">table</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"users"</span> <span class="hljs-attribute">primaryKey</span>=<span class="hljs-value">"id"</span>  <span class="hljs-attribute">dataNode</span>=<span class="hljs-value">"node_db01"</span> /&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-title">table</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"item"</span> <span class="hljs-attribute">primaryKey</span>=<span class="hljs-value">"id"</span> <span class="hljs-attribute">dataNode</span>=<span class="hljs-value">"node_db02,node_db03"</span> <span class="hljs-attribute">rule</span>=<span class="hljs-value">"role1"</span> /&gt;</span>  

    <span class="hljs-tag">&lt;/<span class="hljs-title">schema</span>&gt;</span>  

    <span class="hljs-comment">&lt;!-- 设置dataNode 对应的数据库,及 mycat 连接的地址dataHost --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-title">dataNode</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"node_db01"</span> <span class="hljs-attribute">dataHost</span>=<span class="hljs-value">"dataHost01"</span> <span class="hljs-attribute">database</span>=<span class="hljs-value">"db01"</span> /&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-title">dataNode</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"node_db02"</span> <span class="hljs-attribute">dataHost</span>=<span class="hljs-value">"dataHost01"</span> <span class="hljs-attribute">database</span>=<span class="hljs-value">"db02"</span> /&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-title">dataNode</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"node_db03"</span> <span class="hljs-attribute">dataHost</span>=<span class="hljs-value">"dataHost01"</span> <span class="hljs-attribute">database</span>=<span class="hljs-value">"db03"</span> /&gt;</span>  

    <span class="hljs-comment">&lt;!-- mycat 逻辑主机dataHost对应的物理主机.其中也设置对应的mysql登陆信息 --&gt;</span>  
    <span class="hljs-tag">&lt;<span class="hljs-title">dataHost</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"dataHost01"</span> <span class="hljs-attribute">maxCon</span>=<span class="hljs-value">"1000"</span> <span class="hljs-attribute">minCon</span>=<span class="hljs-value">"10"</span> <span class="hljs-attribute">balance</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">writeType</span>=<span class="hljs-value">"0"</span> <span class="hljs-attribute">dbType</span>=<span class="hljs-value">"mysql"</span> <span class="hljs-attribute">dbDriver</span>=<span class="hljs-value">"native"</span>&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-title">heartbeat</span>&gt;</span>select user()<span class="hljs-tag">&lt;/<span class="hljs-title">heartbeat</span>&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-title">writeHost</span> <span class="hljs-attribute">host</span>=<span class="hljs-value">"server1"</span> <span class="hljs-attribute">url</span>=<span class="hljs-value">"127.0.0.1:3306"</span> <span class="hljs-attribute">user</span>=<span class="hljs-value">"root"</span> <span class="hljs-attribute">password</span>=<span class="hljs-value">"123456"</span>/&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-title">dataHost</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-title">mycat:schema</span>&gt;</span></code></pre> 
<h3 id="启动测试">启动测试</h3> 
<ul><li>在命令行切换到bin目录下，然后执行如下命令： <br> <img src="https://images2.imgbox.com/a5/5d/uoEnYtv8_o.png" alt="这里写图片描述" title=""> <br> 正确启动后会显示如下命令： <br> <img src="https://images2.imgbox.com/a0/40/6dX8WAdr_o.png" alt="这里写图片描述" title=""> <br> 然后表示我们启动服务成功。</li></ul> 
<h3 id="验证结果">验证结果</h3> 
<ul><li>在命令行访问mycat逻辑数据库，采用如下的命令：</li></ul> 
<blockquote> 
 <p>mysql -utest -ptest -h127.0.0.1 -P8066 -DTESTDB </p> 
</blockquote> 
<ul><li><p>现在通过数据库查询数据库和表，发现只有逻辑数据库TESTDB而不是db01, db02, db03；而且表也是统一显示的，而不是分布在不同的实际数据库中。参考图片如下： <br> <img src="https://images2.imgbox.com/08/7d/DxmNiUoP_o.png" alt="这里写图片描述" title=""></p> 
  <ul><li>现在在访问Mycat在数据库中插入数据，看数据能否按照前面配置的路由规则进行分表。</li><li>现在执行如下的SQL语句进行数据的插入。</li></ul></li></ul> 
<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> users(name,indate) <span class="hljs-keyword">values</span>(<span class="hljs-string">'kk'</span>,now());</span>
<span class="hljs-operator"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> users(name,indate) <span class="hljs-keyword">values</span>(<span class="hljs-string">'ss'</span>,now());</span>
<span class="hljs-operator"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> item(id,<span class="hljs-keyword">value</span>,indate) <span class="hljs-keyword">values</span>(<span class="hljs-number">1</span>,<span class="hljs-number">100</span>,now());</span>
<span class="hljs-operator"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> item(id,<span class="hljs-keyword">value</span>,indate) <span class="hljs-keyword">values</span>(<span class="hljs-number">2</span>,<span class="hljs-number">100</span>,now());</span></code></pre> 
<ul><li>然后在mycat上查看是否插入成功，下图显示插入成功。 <br> <img src="https://images2.imgbox.com/2d/6e/zJxMsPVk_o.png" alt="这里写图片描述" title=""></li><li>然后登录实际的数据库，看分表是否成功。下图显示分表成功。 <br> <img src="https://images2.imgbox.com/33/cf/t6NPjY8l_o.png" alt="这里写图片描述" title=""> <br> 图上显示，插入的users表中的数据全部在db01中，而item表中的数据通过Id取模后均匀的分布在db02和db03中。这样就根据实际的路由策略进行了分表。</li><li><strong>测试完成！！~数据进行了分库分表！</strong></li></ul> 
<h3 id="参考文章">参考文章</h3> 
<p><a href="http://blog.csdn.net/kk185800961/article/details/51147029">1. MySQL 高可用：mysql+mycat实现数据库分片（分库分表）</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/268860688ae4acd278727bea40709330/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">恢复回收站删除的文件？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/358c5019fd80e0332678421a5c9a8acd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于C语言的malloc函数以及内存泄漏的问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>