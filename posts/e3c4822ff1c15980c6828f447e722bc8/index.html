<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Kafka的安装以及出现的问题整合 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Kafka的安装以及出现的问题整合" />
<meta property="og:description" content="首先发一下kafka安装包
链接：https://pan.baidu.com/s/1zPuA1kdBYp8AdpXwRGjzcw 提取码：sv0v kafka的安装 上传压缩包到虚拟机中 将压缩文件移动到/root/目录：mv kafka_2.12-1.1.0.tgz /root/kafka_2.12-1.1.0.tgz进入 /root/目录：cd root解压：tar zxvf kafka_2.12-1.1.0.tgz重命名：mv kafka_2.12-1.1.0 kafka 编辑 server.properties 文件： vi /root/kafka/config/server.properties在 server.properties 中加入以下代码：listeners=PLAINTEXT://192.168.141.1:9092（一定要用绝对地址） 配置对外开放端口: iptables -I INPUT 1 -p tcp --dport 9092 -j ACCEPT(用阿里云的需要这样配置) kafka的使用 启动服务 (运行 kafka 需要使用 Zookeeper，所以需要先启动一个 Zookeeper 服务器，可以使用 kafka 自带打包和配置好
的 Zookeeper)
进入 kafka 目录：cd /root/kafka启动 Zookeeper 服务器：bin/zookeeper-server-start.sh config/zookeeper.properties打开一个新窗口进入 /root/kafka/目录 cd /root/kafka (启动 kafka、zookeeper 服务都要在此目录）启动 kafka 服务: bin/kafka-server-start.sh config/server.properties &amp;打开一个新窗口，进入/root/kafka 目录: cd /root/kafka创建一个名为“test”的 Topic，只有一个分区和一个备份: bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e3c4822ff1c15980c6828f447e722bc8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-08T23:16:27+08:00" />
<meta property="article:modified_time" content="2019-07-08T23:16:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Kafka的安装以及出现的问题整合</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>首先发一下kafka安装包</strong></p> 
<p> 链接：<a href="https://pan.baidu.com/s/1zPuA1kdBYp8AdpXwRGjzcw" rel="nofollow">https://pan.baidu.com/s/1zPuA1kdBYp8AdpXwRGjzcw</a> <br>  提取码：sv0v </p> 
<h2 id="kafka%E7%9A%84%E5%AE%89%E8%A3%85"><strong>kafka的安装</strong></h2> 
<p> </p> 
<ul><li style="margin-left:0pt;">上传压缩包到虚拟机中</li></ul> 
<p style="margin-left:0pt;"><img alt="" class="has" height="248" src="https://images2.imgbox.com/5f/3e/TP8CKwRM_o.png" width="554"></p> 
<ul><li style="margin-left:0pt;">将压缩文件移动到/root/目录：</li><li style="margin-left:0pt;">mv kafka_2.12-1.1.0.tgz /root/kafka_2.12-1.1.0.tgz</li><li style="margin-left:0pt;">进入 /root/目录：cd root</li><li style="margin-left:0pt;">解压：tar zxvf kafka_2.12-1.1.0.tgz</li><li style="margin-left:0pt;">重命名：mv kafka_2.12-1.1.0 kafka</li></ul> 
<p style="margin-left:0pt;"><img alt="" class="has" height="67" src="https://images2.imgbox.com/83/34/BJ4UIslE_o.png" width="354"></p> 
<ul><li style="margin-left:0pt;">编辑 server.properties 文件： vi /root/kafka/config/server.properties</li><li style="margin-left:0pt;">在 server.properties 中加入以下代码：listeners=PLAINTEXT://192.168.141.1:9092（一定要用绝对地址）</li></ul> 
<p style="margin-left:0pt;"><img alt="" class="has" height="171" src="https://images2.imgbox.com/b8/f1/bny63eya_o.png" width="503"></p> 
<ul><li style="margin-left:0pt;">配置对外开放端口: iptables -I INPUT 1 -p tcp --dport 9092 -j ACCEPT(用阿里云的需要这样配置)</li></ul> 
<p style="margin-left:0pt;"><img alt="" class="has" height="156" src="https://images2.imgbox.com/39/d6/zMnNCdXs_o.png" width="554"></p> 
<p style="margin-left:0pt;"> </p> 
<p style="margin-left:0pt;"> </p> 
<p> </p> 
<h2 id="kafka%E7%9A%84%E4%BD%BF%E7%94%A8"><strong>kafka的使用</strong></h2> 
<ul><li style="margin-left:0pt;">启动服务</li></ul> 
<p style="margin-left:0pt;">(运行 kafka 需要使用 Zookeeper，所以需要先启动一个 Zookeeper 服务器，可以使用 kafka 自带打包和配置好</p> 
<p style="margin-left:0pt;">的 Zookeeper)</p> 
<ul><li style="margin-left:0pt;">进入 kafka 目录：cd /root/kafka</li><li style="margin-left:0pt;">启动 Zookeeper 服务器：bin/zookeeper-server-start.sh config/zookeeper.properties</li><li style="margin-left:0pt;">打开一个新窗口</li><li style="margin-left:0pt;">进入 /root/kafka/目录 cd /root/kafka (启动 kafka、zookeeper 服务都要在此目录）</li><li style="margin-left:0pt;">启动 kafka 服务: bin/kafka-server-start.sh config/server.properties &amp;</li><li style="margin-left:0pt;">打开一个新窗口，进入/root/kafka 目录: cd /root/kafka</li><li style="margin-left:0pt;">创建一个名为“test”的 Topic，只有一个分区和一个备份:</li></ul> 
<p style="margin-left:0pt;">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic</p> 
<p style="margin-left:0pt;">test</p> 
<p style="margin-left:0pt;">通过以下命令查看已创建的 topic 信息:</p> 
<p style="margin-left:0pt;">bin/kafka-topics.sh --list --zookeeper localhost:2181test</p> 
<ul><li style="margin-left:0pt;">发送消息：</li></ul> 
<p style="margin-left:0pt;">bin/kafka-console-producer.sh --broker-list localhost:9092 --topic test</p> 
<ul><li style="margin-left:0pt;">消费消息：</li></ul> 
<p style="margin-left:0pt;">bin/kafka-console-consumer.sh --zookeeper localhost:2181 --topic test --from-beginning</p> 
<h2 id="%E6%8A%A5%E9%94%99">报错</h2> 
<ul><li style="margin-left:0pt;">kafka-run-class.sh:line 271:/usr/local/java/jdk/bin/java</li></ul> 
<p style="margin-left:0pt;">没有安装jdk，或者jdk环境配置错误</p> 
<ul><li style="margin-left:0pt;">kafka-run-class.sh:line 252 ，Unrecognized VM option 'PrintGCDateStamps'</li></ul> 
<p style="margin-left:0pt;">启动PrintGCDateStamps异常</p> 
<p style="margin-left:0pt;">解决：</p> 
<p style="margin-left:0pt;">方法1：修改kafka-run-class.sh文件，将PrintGCDateStamps相关注释(这个我尝试了，但是没有成功)</p> 
<p style="margin-left:0pt;">方法2：（这个可以用）</p> 
<p style="margin-left:0pt;">将</p> 
<p style="margin-left:0pt;">JAVA_MAJOR_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -E -n 's/.* version "([^.-]*).*"/\1/p')</p> 
<p style="margin-left:0pt;"> 修改为</p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="kafka%E7%9A%84%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#kafka%E7%9A%84%E5%AE%89%E8%A3%85" rel="nofollow">kafka的安装</a></p> 
<p id="kafka%E7%9A%84%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#kafka%E7%9A%84%E4%BD%BF%E7%94%A8" rel="nofollow">kafka的使用</a></p> 
<p id="%E6%8A%A5%E9%94%99-toc" style="margin-left:0px;"><a href="#%E6%8A%A5%E9%94%99" rel="nofollow">报错</a></p> 
<hr id="hr-toc"> 
<p style="margin-left:0pt;">JAVA_MAJOR_VERSION=$($JAVA -version 2&gt;&amp;1 | sed -E -n 's/.* version "([^.-]*).*/\1/p')</p> 
<p style="margin-left:0pt;">然后 chmod +x kafka-run-class.sh 添加执行权限</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/985b3891e069fbcc9213b68db79f8e7c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Integer和int的运算</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/25024f1f9997aba4e5edeee8bc9eecaa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue filters过滤器传2个或多个参数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>