<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android 二维码ZXing使用详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android 二维码ZXing使用详解" />
<meta property="og:description" content="二维码 (QRCode)：最早是日本的一家公司，所定义的一个编码标准，全称 Quick Response Code。它通过在一个矩形区域内使用黑白两种像素来进行编码，它具有高纠错性、高可用性、高识别性。
现在二维码在世界上的使用非常常见，很多app都把它作为信息传递的方式。而且使用起来也非常的方便。也正是因为手机的普及，二维码才可以去广泛传播
二维码的实现和解析是非常复杂的，但是现在有很多的第三方的库已经将这样一个解析的过程封装起来了，而开发者只需要调用其封装好的API即可完成二维码的生成和解析。
这样的二维码的第三方有很多，做的比较出色的那就是ZXing。
ZXing是一个开放源码的，用Java实现的多种格式的1D/2D条码图像处理库，它包含了联系到其他语言的端口。ZXing可以实现使用手机的内置的摄像头完成条形码的扫描及解码。
ZXing的项目地址：https://github.com/zxing/zxing
首先，打开GitHub项目地址，下载项目
这个项目非常大，有120多兆，然而这并没有什么卵用，因为ZXing的功能是非常强大的，不仅仅是对扫描二维码，还可以扫描很多其他的编码，同时也不光在Android上可以使用，在其他比如JavaSE，JavaScript等很多平台上都可以使用，所以这样一个很庞大的源代码，我们很难去对他进行使用，所以必须对这个源代码进行精简。也就是把没有的给干掉。
当然，网上也有很多人，把仅仅在Android 端的编码，解码，扫码部分的工能代码抽取了出来，来作为Android 端的一个库来使用。不过需要注意的是，大部分都基于ZXing旧的版本精简的，很多功能已经过时了。
这里我已经为大家精简好了：http://download.csdn.net/detail/a704225995/9693642
打开AndroidStudio，创建新的项目，并导入库文件，开始开发。
1.创建布局文件
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; xmlns:tools=&#34;http://schemas.android.com/tools&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:orientation=&#34;vertical&#34; tools:context=&#34;com.example.smart.newapp.MainActivity&#34;&gt; &lt;Button android:id=&#34;@&#43;id/main_btn_scan&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;扫一扫!&#34; android:onClick=&#34;scan&#34; /&gt; &lt;TextView android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;扫描结果：&#34; /&gt; &lt;TextView android:id=&#34;@&#43;id/main_tv_scan_result&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:textSize=&#34;18sp&#34; /&gt; &lt;EditText android:id=&#34;@&#43;id/main_et_input&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:textSize=&#34;16sp&#34; android:hint=&#34;输入生成二维码的文字&#34; /&gt; &lt;Button android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;点击生产二维码&#34; android:onClick=&#34;makeQRCode&#34; /&gt; &lt;CheckBox android:id=&#34;@&#43;id/main_cb_is_add_logo&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:text=&#34;是否添加Logo&#34; /&gt; &lt;ImageView android:id=&#34;@&#43;id/main_iv_qrcode&#34; android:layout_width=&#34;wrap_content&#34; android:layout_height=&#34;wrap_content&#34; android:layout_gravity=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a46d2966499bbe368c0cd561a2da0a78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-11-24T17:27:52+08:00" />
<meta property="article:modified_time" content="2016-11-24T17:27:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android 二维码ZXing使用详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>二维码 (QRCode)：最早是日本的一家公司，所定义的一个编码标准，全称 Quick Response Code。它通过在一个矩形区域内使用黑白两种像素来进行编码，它具有高纠错性、高可用性、高识别性。</span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>现在二维码在世界上的使用非常常见，很多app都把它作为信息传递的方式。而且使用起来也非常的方便。也正是因为手机的普及，二维码才可以去广泛传播</span></p> 
<p><span style="font-family:Microsoft YaHei"><img src="https://images2.imgbox.com/80/00/9GL84IZF_o.png" alt=""><br> </span></p> 
<p><span style="font-family:Microsoft YaHei"><br> </span></p> 
<p><span style="font-family:'Microsoft YaHei'; white-space:pre"></span><span style="font-family:Microsoft YaHei">二维码的实现和解析是非常复杂的，但是现在有很多的第三方的库已经将这样一个解析的过程封装起来了，而开发者只需要调用其封装好的API即可完成二维码的生成和解析。</span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>这样的二维码的第三方有很多，做的比较出色的那就是ZXing。</span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>ZXing是一个开放源码的，用Java实现的多种格式的1D/2D条码图像处理库，它包含了联系到其他语言的端口。ZXing可以实现使用手机的内置的摄像头完成条形码的扫描及解码。</span></p> 
<p><span style="font-family:Microsoft YaHei">ZXing的项目地址：<a target="_blank" href="https://github.com/zxing/zxing" rel="noopener noreferrer">https://github.com/zxing/zxing</a></span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>首先，打开GitHub项目地址，下载项目</span></p> 
<p><span style="font-family:Microsoft YaHei"><img src="https://images2.imgbox.com/59/7b/wN8DKwne_o.png" alt=""><br> </span></p> 
<p><span style="font-family:Microsoft YaHei"><br> </span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>这个项目非常大，有120多兆，然而这并没有什么卵用，因为ZXing的功能是非常强大的，不仅仅是对扫描二维码，还可以扫描很多其他的编码，同时也不光在Android上可以使用，在其他比如JavaSE，JavaScript等很多平台上都可以使用，所以这样一个很庞大的源代码，我们很难去对他进行使用，所以必须对这个源代码进行精简。也就是把没有的给干掉。</span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>当然，网上也有很多人，把仅仅在Android 端的编码，解码，扫码部分的工能代码抽取了出来，来作为Android 端的一个库来使用。不过需要注意的是，大部分都基于ZXing旧的版本精简的，很多功能已经过时了。</span></p> 
<p><span style="font-family:Microsoft YaHei"><br> </span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>这里我已经为大家精简好了：<a target="_blank" href="http://download.csdn.net/detail/a704225995/9693642" rel="noopener noreferrer">http://download.csdn.net/detail/a704225995/9693642</a></span></p> 
<p><br> </p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span><span style="white-space:pre">打开AndroidStudio，创建新的项目，并导入库文件，开始开发。</span></span></p> 
<p><span style="white-space:pre"><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span>1.创建布局文件</span></span></p> 
<p><span style="white-space:pre"><span style="white-space:pre"><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span><img src="https://images2.imgbox.com/53/31/hghhqlmr_o.png" width="200" height="350" alt=""><br> </span></span></span></p> 
<pre><code class="language-java"><span style="font-family:Courier New;">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context="com.example.smart.newapp.MainActivity"&gt;

    &lt;Button
        android:id="@+id/main_btn_scan"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="扫一扫!"
        android:onClick="scan"
        /&gt;

    &lt;TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="扫描结果："
        /&gt;
    &lt;TextView
        android:id="@+id/main_tv_scan_result"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="18sp"
        /&gt;

    &lt;EditText
        android:id="@+id/main_et_input"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textSize="16sp"
        android:hint="输入生成二维码的文字"
        /&gt;
    &lt;Button
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="点击生产二维码"
        android:onClick="makeQRCode"
        /&gt;
    &lt;CheckBox
        android:id="@+id/main_cb_is_add_logo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="是否添加Logo"
        /&gt;

    &lt;ImageView
        android:id="@+id/main_iv_qrcode"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:background="@mipmap/ic_launcher"
        /&gt;
&lt;/LinearLayout&gt;</span><span style="font-family:Microsoft YaHei;">
</span></code></pre> 
<span style="font-family:'Microsoft YaHei'; white-space:pre"> </span> 
<span style="font-family:Microsoft YaHei">2</span> 
<span style="font-family:Microsoft YaHei">.逻辑代码。</span> 
<p></p> 
<p></p> 
<pre><code class="language-java"><span style="font-family:Courier New;">public class MainActivity extends AppCompatActivity {

    /**显示扫描结果的TextView*/
    private TextView mTvScanResult;
    /**输入文字用来生成二维码*/
    private EditText mEtInput;
    /**显示生成的二维码*/
    private ImageView mIvShowQRCode;
    /**是否添加logo的checkBox*/
    private CheckBox mCbIsAddLogo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mTvScanResult = (TextView) findViewById(R.id.main_tv_scan_result);
        mEtInput = (EditText) findViewById(R.id.main_et_input);
        mIvShowQRCode = (ImageView) findViewById(R.id.main_iv_qrcode);
        mCbIsAddLogo = (CheckBox) findViewById(R.id.main_cb_is_add_logo);
    }
    /**
     * 扫描按钮的点击方法
     * @param view
     */
    public void scan(View view){
        /**
         * CaptureActivity是类库中的一个Activity可以在这个界面完成扫描并解析的操作
         * */
        startActivityForResult(new Intent(MainActivity.this, CaptureActivity.class),0);
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if(resultCode == RESULT_OK){
            //创建Bundel对象获取从二维码中扫描解析出的数据
            Bundle bundle = data.getExtras();
            String result = bundle.getString("result");
            //将数据显示在TextView上
            mTvScanResult.setText(result);
        }
    }
    /**
     * 生成二维码按钮点击事件
     * @param view
     */
    public void makeQRCode(View view){
        String input = mEtInput.getText().toString().trim();
        if(input.equals("")){
            Toast.makeText(this,"输入为空,无法生成二维码",Toast.LENGTH_SHORT).show();
            return;
        }
        //创建Logo的Bitmap图片
        Bitmap logo = BitmapFactory.decodeResource(getResources(),R.mipmap.ic_launcher);
        //调用类库中的createQRCode生成二维码
        Bitmap bitmap = EncodingUtils.createQRCode(input,500,500,mCbIsAddLogo.isChecked()?logo:null);
        //将二维码显示的ImageView上
        mIvShowQRCode.setImageBitmap(bitmap);
    }
}</span>
</code></pre> 
<span style="font-family:Microsoft YaHei"><span style="white-space:pre"> </span>3.不需要添加权限，因为类库中已经帮我们做了。点击运行项目</span> 
<p></p> 
<p><span style="white-space:pre"></span><img src="https://images2.imgbox.com/25/28/LQwxnx4f_o.png" width="200" height="350" alt=""><span style="white-space:pre"> </span><img src="https://images2.imgbox.com/89/91/ALXsI3Vp_o.png" width="200" height="350" alt=""><span style="white-space:pre"> </span><img src="https://images2.imgbox.com/5d/ce/cAF5IaBc_o.png" width="200" height="350" alt=""></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"></span></span><br> <br> </p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"><br> </span></span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"><br> </span></span></p> 
<p><span style="font-family:Microsoft YaHei"><span style="white-space:pre"><br> </span></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/523b715e5c02bc7117dc94a3dca04d2c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">UTC时间与北京时间相互转换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/36a8d6c749325bc2beb932888a57393b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">宏定义与宏替换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>