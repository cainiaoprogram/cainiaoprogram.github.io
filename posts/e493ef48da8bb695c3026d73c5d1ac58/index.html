<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Pandas中loc和iloc函数（提取某几列或者行的数据） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Pandas中loc和iloc函数（提取某几列或者行的数据）" />
<meta property="og:description" content="loc函数：通过行索引（列名、行名） 中的具体值来取行数据（如取&#34;Index&#34;为&#34;A&#34;的行）
iloc函数：通过行号（数字）来取行数据（如取第二行的数据）
需要知道：
data[&#39;A&#39;] 是选取data表中的列名为A的所有数据，这个只对列有效，对行没有用，因为列有列名，而行没有行名
例如此时，data[&#39;a&#39;] 就是错的
一、iloc data.iloc[ A:B ,C:D ]
用法：逗号前面表示的是取哪些行，逗号后面表示取哪些列
例如1：data.iloc[ 0:2 ,1:2 ] # 取第0-2行和1-2列交叉的所有的数据
例如2：data.iloc[ : ,1:2 ] # 取所有行和1-2列交叉的所有的数据
例如3：data.iloc[ : , : ] # 取所有行和所有列的所有的数据
例如4：data.iloc[ : , [1,2,3] ] # 取所有行和第1,2,3列交叉的所有的数据
二、loc 想要得到某行的所有值，只需要data.loc[&#39;该行的第一个元素&#39;]]，这里是一个[]
想要得到某列的所有值，通过data.loc[: , [&#39;该列的第一个元素&#39;]]
例如1：data.loc[ : ,&#39;A&#39; ] # 取列名为A的该列的所有数据
例如2：data.iloc[ &#39;a&#39;:&#39;c&#39; ,&#39;A&#39; ] # 取行号为a、c的列为A的所有数据
data.loc[data[&#39;A&#39;]==0] # A列中数字为0所在的行数据
1. 利用loc、iloc提取某一行数据 import numpy as np import pandas as pd #创建一个Dataframe data=pd." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e493ef48da8bb695c3026d73c5d1ac58/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-23T12:20:16+08:00" />
<meta property="article:modified_time" content="2023-03-23T12:20:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Pandas中loc和iloc函数（提取某几列或者行的数据）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>loc函数</strong>：通过行索引（<span style="color:#fe2c24;"><strong>列名、行名</strong></span>） 中的具体值来取行数据（<strong>如取"Index"为"A"的行</strong>）</p> 
<p><strong>iloc函数</strong>：通过行号（<span style="color:#fe2c24;"><strong>数字</strong></span>）来取行数据（<strong>如取第二行的数据</strong>）</p> 
<p></p> 
<p><span style="color:#fe2c24;"><strong>需要知道：</strong></span></p> 
<p>data['A'] 是选取data表中的列名为A的所有数据，这个只对列有效，对行没有用，因为列有列名，而行没有行名</p> 
<p>例如此时，data['a'] 就是错的</p> 
<p></p> 
<h2><span style="color:#956fe7;">一、iloc</span></h2> 
<p><span style="color:#fe2c24;">data.iloc[ A:B ,C:D ]</span></p> 
<p><span style="color:#38d8f0;"><strong>用法：逗号前面表示的是取哪些行，逗号后面表示取哪些列</strong></span></p> 
<blockquote> 
 <p>例如1：data.iloc[ 0:2 ,1:2 ]  # 取第0-2行和1-2列交叉的所有的数据</p> 
 <p>例如2：data.iloc[ : ,1:2 ]  # 取所有行和1-2列交叉的所有的数据</p> 
 <p>例如3：data.iloc[ : , : ]  # 取所有行和所有列的所有的数据</p> 
 <p>例如4：data.iloc[ : , [1,2,3] ]  # 取所有行和第1,2,3列交叉的所有的数据</p> 
</blockquote> 
<h2><span style="color:#956fe7;"> 二、loc</span></h2> 
<p>想要得到某行的所有值，只需要data.loc['该行的第一个元素']]，这里是一个[]</p> 
<p>想要得到某列的所有值，通过data.loc[: , ['该列的第一个元素']]</p> 
<blockquote> 
 <p>例如1：data.loc[ : ,'A' ]  # 取列名为A的该列的所有数据</p> 
 <p>例如2：data.iloc[ 'a':'c' ,'A' ]  # 取行号为a、c的列为A的所有数据</p> 
 <p><br>  </p> 
 <p>data.loc[data['A']==0]  # A列中数字为0所在的行数据</p> 
</blockquote> 
<p></p> 
<hr> 
<h2>1. 利用loc、iloc提取某一行数据</h2> 
<pre><code class="language-python">import numpy as np
import pandas as pd
#创建一个Dataframe
data=pd.DataFrame(np.arange(16).reshape(4,4),index=list('abcd'),columns=list('ABCD'))
 
In[1]: data
Out[1]: 
    A   B   C   D
a   0   1   2   3
b   4   5   6   7
c   8   9  10  11
d  12  13  14  15
 
#取索引为'a'的行
In[2]: data.loc['a']
Out[2]:
A    0
B    1
C    2
D    3
 
#取第一行数据，索引为'a'的行就是第一行，所以结果相同
In[3]: data.iloc[0]
Out[3]:
A    0
B    1
C    2
D    3</code></pre> 
<h2>2. 利用loc、iloc提取某一列或者几列数据</h2> 
<p></p> 
<pre><code class="language-python">In[4]:data.loc[:,['A']] #取'A'列所有行，多取几列格式为 data.loc[:,['A','B']]
Out[4]: 
    A
a   0
b   4
c   8
d  12
 
In[5]:data.iloc[:,[0]] #取第0列所有行，多取几列格式为 data.iloc[:,[0,1]]，取第0列和第1列的所有行
Out[5]: 
    A
a   0
b   4
c   8
d  12
 </code></pre> 
<h2>4.利用loc、iloc提取所有数据</h2> 
<pre><code class="language-python">In[8]:data.loc[:,:] #取A,B,C,D列的所有行
Out[8]: 
    A   B   C   D
a   0   1   2   3
b   4   5   6   7
c   8   9  10  11
d  12  13  14  15
 
In[9]:data.iloc[:,:] #取第0,1,2,3列的所有行
Out[9]: 
    A   B   C   D
a   0   1   2   3
b   4   5   6   7
c   8   9  10  11
d  12  13  14  15</code></pre> 
<h2>5.利用loc函数，根据某个数据来提取数据所在的行</h2> 
<pre><code class="language-python">In[10]: data.loc[data['A']==0] #提取data数据(筛选条件: A列中数字为0所在的行数据)
Out[10]: 
   A  B  C  D
a  0  1  2  3
 
In[11]: data.loc[(data['A']==0)&amp;(data['B']==2)] #提取data数据(多个筛选条件)
Out[11]: 
   A  B  C  D
a  0  1  2  3</code></pre> 
<p>利用loc函数的时候，当index相同时，会将相同的Index全部提取出来，</p> 
<p>优点是：如果index是人名，数据框为所有人的数据，那么我可以将某个人的多条数据提取出来分析；</p> 
<p>缺点是：如果index不具有特定意义，而且重复，那么提取的数据需要进一步处理,可用.reset_index()函数重置index</p> 
<p></p> 
<h2>这里给一个实际场景：</h2> 
<p>Excel中的某一部分如下所示：</p> 
<p><img alt="" height="429" src="https://images2.imgbox.com/4e/5c/rZUeQnNi_o.png" width="1200"></p> 
<p>此时我们想取到Excel表格的第2列到倒数第二列所有的数据，那么我使用以下代码：</p> 
<pre><code class="language-python">o_train = pd.read_csv('./dataset/train.csv')
o_test = pd.read_csv('./dataset/test.csv')

print(o_train.shape) #(1314, 81)
print(o_test.shape)  #(146, 81)

### 'MSSubClass':'SaleCondition'是第二列到倒数第二列
all_features = pd.concat((o_train.loc[:, 'MSSubClass':'SaleCondition'], o_test.loc[:, 'MSSubClass':'SaleCondition'])) # [1460 rows x 79 columns]

all_labels   = pd.concat((o_train.loc[:, 'SalePrice'], o_test.loc[:, 'SalePrice'])) # Length: 1460,</code></pre> 
<p> 得到如下结果：</p> 
<p><img alt="" height="273" src="https://images2.imgbox.com/bf/2b/LGU7lmB8_o.png" width="621"></p> 
<p></p> 
<p>参考下文：<a href="https://blog.csdn.net/W_weiying/article/details/81411257" title="Pandas中loc和iloc函数用法详解（源码+实例）_我是二师兄的博客-CSDN博客_iloc函数用法">Pandas中loc和iloc函数用法详解（源码+实例）_我是二师兄的博客-CSDN博客_iloc函数用法</a></p> 
<p><a href="https://zhuanlan.zhihu.com/p/62034672" rel="nofollow" title="【python】pandas中 loc &amp; iloc用法及区别 - 知乎">【python】pandas中 loc &amp; iloc用法及区别 - 知乎</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/551af55f600cb6692bcf91a6ef67d4f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第一篇：rk1808编译buildroot,增加ros支持问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c9fbdb733c257331a8cd367a94c4c488/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">YMatrix 在PSQL命令行设置timing</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>