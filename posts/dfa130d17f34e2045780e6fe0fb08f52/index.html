<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[shell]shell中if语句的使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[shell]shell中if语句的使用" />
<meta property="og:description" content="bash中如何实现条件判断？
条件测试类型：
整数测试
字符测试
文件测试
一、条件测试的表达式：
[ expression ] 括号两端必须要有空格
[[ expression ]] 括号两端必须要有空格
test expression
组合测试条件：
-a: and-o: or!: 非 二、整数比较：
-eq 测试两个整数是否相等-ne 测试两个整数是否不等-gt 测试一个数是否大于另一个数-lt 测试一个数是否小于另一个数-ge 大于或等于-le 小于或等于 命令间的逻辑关系
逻辑与：&amp;&amp; 第一个条件为假 第二个条件不用在判断，最总结果已经有
第一个条件为真，第二个条件必须得判断
逻辑或：|| 三、字符串比较
== 等于 两边要有空格!= 不等&gt; 大于&lt; 小于 四、文件测试
-z string 测试指定字符是否为空，空着真，非空为假-n string 测试指定字符串是否为不空，空为假 非空为真-e FILE 测试文件是否存在-f file 测试文件是否为普通文件-d file 测试指定路径是否为目录-r file 测试文件对当前用户是否可读-w file 测试文件对当前用户是否可写-x file 测试文件对当前用户是都可执行-z 是否为空 为空则为真-a 是否不空 五、if语法
if 判断条件 0为真 其他都为假" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/dfa130d17f34e2045780e6fe0fb08f52/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-19T19:15:42+08:00" />
<meta property="article:modified_time" content="2023-02-19T19:15:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[shell]shell中if语句的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>bash中如何实现条件判断？<br><strong>条件测试类型</strong>：<br>     整数测试<br>     字符测试<br>     文件测试</p> 
<p><strong>一、条件测试的表达式：</strong><br>     [ expression ]  括号两端必须要有空格<br>     [[ expression ]] 括号两端必须要有空格<br>     test expression<br><strong>组合测试条件</strong>：</p> 
<ul><li>-a: and</li><li>-o: or</li><li>!:  非</li></ul> 
<p><strong>二、整数比较：</strong></p> 
<ul><li>-eq 测试两个整数是否相等</li><li>-ne 测试两个整数是否不等</li><li>-gt 测试一个数是否大于另一个数</li><li>-lt 测试一个数是否小于另一个数</li><li>-ge 大于或等于</li><li>-le 小于或等于</li></ul> 
<p><strong>命令间的逻辑关系</strong></p> 
<ul><li>逻辑与：&amp;&amp;</li></ul> 
<p>        第一个条件为假 第二个条件不用在判断，最总结果已经有<br>         第一个条件为真，第二个条件必须得判断</p> 
<ul><li>逻辑或：||</li></ul> 
<p><strong>三、字符串比较</strong></p> 
<ul><li>== 等于  两边要有空格</li><li>!= 不等</li><li>&gt;  大于</li><li>&lt;  小于</li></ul> 
<p><strong>四、文件测试</strong></p> 
<ul><li>-z string 测试指定字符是否为空，空着真，非空为假</li><li>-n string 测试指定字符串是否为不空，空为假 非空为真</li><li>-e FILE 测试文件是否存在</li><li>-f file 测试文件是否为普通文件</li><li>-d file 测试指定路径是否为目录</li><li>-r file 测试文件对当前用户是否可读</li><li>-w file 测试文件对当前用户是否可写</li><li>-x file 测试文件对当前用户是都可执行</li><li>-z  是否为空  为空则为真</li><li>-a  是否不空</li></ul> 
<p><strong>五、if语法</strong></p> 
<p>if 判断条件 0为真 其他都为假</p> 
<ul><li>.单分支if语句</li></ul> 
<pre><code class="language-html">if 判断条件；then
    statement1
    statement2
    .......
fi</code></pre> 
<ul><li>.双分支的if语句：</li></ul> 
<p><img alt="复制代码" src="https://images2.imgbox.com/fb/f6/dhQ1DBbu_o.gif"></p> 
<pre><code class="language-html">if 判断条件；then
    statement1
    statement2
    .....
    else
    statement3
    statement4
fi</code></pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/4e/f3/0zMqc8Cd_o.gif"></p> 
<p><strong>Note:</strong><br> if语句进行判断是否为空<br>  [ "$name” = "" ] <br> 等同于</p> 
<pre><code class="language-html">[ ! "$name" ]
[ -z "$name" ]    </code></pre> 
<p><strong>Note:</strong><br> 使用if语句的时候进行判断如果是进行<strong>数值类</strong>的判断，建议<strong>使用</strong>let(())进行判断，对于<strong>字符串</strong>等<strong>使用</strong>test[ ] or [[ ]] 进行判断<br> (())中变量是可以不使用$来引用的</p> 
<p>example：表述数字范围的时候 可以使用if可以是使用case</p> 
<pre><code class="language-html">if [ $x -gt 90 -o $x -lt 100 ]
case $x in
100)
9[0-9]) </code></pre> 
<p>这个语句的意思是如果$name为空，那么X=X成立折执行下面的结果；</p> 
<pre><code class="language-html">if [ "X$name" != "x" ]</code></pre> 
<p>写脚本的时候很多时候需要用到回传命令，<strong>$?如果上一个命令执行成功</strong>，回传值为0，否则为1~255之间的任何一个</p> 
<ul><li>0为真</li><li>非0为假</li></ul> 
<p><strong>条件测试的写法</strong>：</p> 
<p>1、执行一个命令的结果<br>  if grep -q "rm" fs.sh;then </p> 
<p>2、传回一个命令执行结果的相反值<br>  if ！grep -q "rm" fs.sh;then </p> 
<p>3、使用复合命令（（算式））<br>  if ((a&gt;b));then </p> 
<p>4、使用bash关键字 [[判断式]]<br>  if [[ str &gt; xyz ]];then </p> 
<p>5、使用内置命令：test 判断式<br>  if test "str" \&gt; "xyz";then </p> 
<p>6、使用内置命令：[判断式]  类似test<br>  if [ "str" \&gt; "xyz" ];then </p> 
<p>7、使用-a -o进行逻辑组合<br>  [ -r filename -a -x filename ] </p> 
<p>8、命令&amp;&amp;命令<br>  if grep -q "rm" fn.sh &amp;&amp; [ $a -lt 100 ];then </p> 
<p>9、命令||命令<br>  if grep -q "rm" fn.sh || [ $a -lt 100 ];then <br><br> 示例脚本（</p> 
<p>写一段脚本，输入一个测验成绩，根据下面的标准，输出他的评分</p> 
<p>成绩（A-F）。</p> 
<p>A: 90–100</p> 
<p>B: 80–89</p> 
<p>C: 70–79</p> 
<p>D: 60–69</p> 
<p>F: &lt;60</p> 
<p>）    </p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/3a/75/5Zmu9Cna_o.gif"></p> 
<pre><code class="language-html">#/bin/bash
#Verson:0.1
#Auther:lovelace
#Pragram:This pragram is calculation your grade
#import an argument
read -p "Please input your grade:" x
declare -i x
#jugemet $x value is none or not
if [ "$x" == "" ];then
    echo "You don't input your grade...."
    exit 5
fi
#jugement the gread level
if [[ "$x" -ge "90" &amp;&amp; "$x" -le "100" ]];then
    echo "Congratulation,Your grade is A."
elif [[ "$x" -ge "80" &amp;&amp; "$x" -le "89" ]];then
    echo "Good,Your grade is B."
elif [[ "$x" -ge "70" &amp;&amp; "$x" -le "79" ]];then
    echo "Ok.Your grade is C."
elif [[ "$x" -ge "60" &amp;&amp; "$x" -le "69" ]];then
    echo "Yeah,Your grade is D."
elif [[ "$x" -lt "60" ]];then
    echo "Right,Your grade is F."
else
    echo "Unknow argument...."
fi</code></pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/cb/7a/WDF3gv5h_o.gif"></p> 
<p>执行结果：</p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/97/8d/VmWAHfYj_o.gif"></p> 
<pre><code class="language-html">[root@lovelace if]# ./grade.sh
    Please input your grade:
    You don't input your grade....
[root@lovelace if]# ./grade.sh
    Please input your grade:53
    Right,Your grade is F.
[root@lovelace if]# ./grade.sh
    Please input your grade:88
    Good,Your grade is B.</code></pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/5b/54/dgdGvANX_o.gif"></p> 
<p>if语句中使用占位符</p> 
<p>比较nginx中的modules脚本</p> 
<pre><code class="language-bash">    if :; then
        ngx_module_name=ngx_http_write_filter_module
        ngx_module_incs=
        ngx_module_deps=
        ngx_module_srcs=src/http/ngx_http_write_filter_module.c
        ngx_module_libs=
        ngx_module_link=YES

        . auto/module
    fi</code></pre> 
<p>总结：条件判断在shell语句中经常用到，需要熟练掌握，在此基础上才能练就一手很好的脚本编写能力。祝各位每天都能获得很大的进步.</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a44be332224b4f9481b576615abae57b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Unity 实现贴花/投影效果</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0b2972cf25ccd5fb51b155062e389ae9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">我在公司里，为什么访问不了家里电脑的 IP 地址？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>