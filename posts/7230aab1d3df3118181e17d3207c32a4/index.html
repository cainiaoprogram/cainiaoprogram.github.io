<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>open_vins 安装（ubuntu18.04 opencv3.2.0） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="open_vins 安装（ubuntu18.04 opencv3.2.0）" />
<meta property="og:description" content="openvins官网
Getting Started » Installation Guide (ROS1 and ROS2) | OpenVINS
Ubuntu 18.04 ROS 1 Melodic (uses OpenCV 3.2)
这里他指的是ros1 melodic，他们用的opencv3.2测试过。
open_vins 官方给的组合Ubuntu 18.04 ROS 1 Melodic (uses OpenCV 3.2)
Ubuntu 18.04 opencv 3.2.0 我本机是3.4.8其实，别人的博客用的3.4.6,肯定是没限定，但是你得踩坑。
opencv默认没有aruco
SourceURL:file:///home/hqw/openvins.docx
openvins官网
Getting Started » Installation Guide (ROS1 and ROS2) | OpenVINS
Ubuntu 18.04 ROS 1 Melodic (uses OpenCV 3.2)
这里他指的是ros1 melodic，他们用的opencv3.2测试过。
open_vins 官方给的组合Ubuntu 18.04 ROS 1 Melodic (uses OpenCV 3.2)
Ubuntu 18.04 opencv 3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7230aab1d3df3118181e17d3207c32a4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T17:25:15+08:00" />
<meta property="article:modified_time" content="2023-12-27T17:25:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">open_vins 安装（ubuntu18.04 opencv3.2.0）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#24292f;"><strong>openvins官网</strong></span></strong></p> 
<p style="margin-left:0;text-align:left;"><a href="https://docs.openvins.com/gs-installing.html" rel="nofollow" title="Getting Started » Installation Guide (ROS1 and ROS2) | OpenVINS">Getting Started » Installation Guide (ROS1 and ROS2) | OpenVINS</a></p> 
<p style="margin-left:0;text-align:left;"><a href="http://wiki.ros.org/melodic/Installation/Ubuntu" rel="nofollow" title="Ubuntu 18.04 ROS 1 Melodic">Ubuntu 18.04 ROS 1 Melodic</a><span style="background-color:#ffffff;"><span style="color:#000000;"> (uses OpenCV 3.2)</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">这里他指的是ros1 melodic，他们用的opencv3.2测试过。</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#24292f;">open_vins 官方给的组合</span><a href="http://wiki.ros.org/melodic/Installation/Ubuntu" rel="nofollow" title="Ubuntu 18.04 ROS 1 Melodic">Ubuntu 18.04 ROS 1 Melodic</a><span style="background-color:#ffffff;"><span style="color:#000000;"> (uses OpenCV 3.2)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#24292f;">Ubuntu 18.04   opencv 3.2.0   </span></p> 
<ul><li style="text-align:justify;"></ul> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">我本机是3.4.8其实，别人的博客用的3.4.6,肯定是没限定，但是你得踩坑。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">opencv默认没有aruco</p> 
<p style="margin-left:.0001pt;text-align:justify;">SourceURL:file:///home/hqw/openvins.docx</p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><strong><span style="color:#24292f;"><strong>openvins官网</strong></span></strong></p> 
<p style="margin-left:0;text-align:left;"><a href="https://docs.openvins.com/gs-installing.html" rel="nofollow" title="Getting Started » Installation Guide (ROS1 and ROS2) | OpenVINS">Getting Started » Installation Guide (ROS1 and ROS2) | OpenVINS</a></p> 
<p style="margin-left:0;text-align:left;"><a href="http://wiki.ros.org/melodic/Installation/Ubuntu" rel="nofollow" title="Ubuntu 18.04 ROS 1 Melodic">Ubuntu 18.04 ROS 1 Melodic</a><span style="background-color:#ffffff;"><span style="color:#000000;"> (uses OpenCV 3.2)</span></span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">这里他指的是ros1 melodic，他们用的opencv3.2测试过。</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#24292f;">open_vins 官方给的组合</span><a href="http://wiki.ros.org/melodic/Installation/Ubuntu" rel="nofollow" title="Ubuntu 18.04 ROS 1 Melodic">Ubuntu 18.04 ROS 1 Melodic</a><span style="background-color:#ffffff;"><span style="color:#000000;"> (uses OpenCV 3.2)</span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#24292f;">Ubuntu 18.04   opencv 3.2.0   </span></p> 
<ul><li style="text-align:justify;"></ul> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">我本机是3.4.8其实，别人的博客用的3.4.6,肯定是没限定，但是你得踩坑。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">opencv默认没有aruco</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="257" src="https://images2.imgbox.com/ae/bb/XfCmxeJi_o.png" width="554"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">opencv参考命令</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#000000;"><span style="background-color:#000000;"><span style="color:#ffffff;">git clone https://github.com/opencv/opencv/git clone https://github.com/opencv/opencv_contrib/mkdir opencv/build/cd opencv/build/cmake -DOPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules ..make -j8sudo make install</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">实际根据需求去git找的release，没用官方这个命令。</p> 
<p style="margin-left:.0001pt;text-align:justify;"><img alt="" height="212" src="https://images2.imgbox.com/86/09/kmtRVMr5_o.png" width="554"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><a href="https://blog.csdn.net/weixin_51134241/article/details/122196269" title="ubuntu18.04安装运行OpenVINS_openvins运行-CSDN博客">ubuntu18.04安装运行OpenVINS_openvins运行-CSDN博客</a></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">这个博客也是</span><span style="color:#24292f;">3.2</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">指定一个独立目录</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ cmake -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=/usr/local/opencv320 -D E</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<h2 style="margin-left:0px;text-align:left;"><span style="color:#24292f;">各种报错</span></h2> 
<h3 style="margin-left:0px;text-align:left;"><span style="color:#24292f;">可选错误——CUDA报错</span></h3> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">CMake Error at cmake/OpenCVCompilerOptions.cmake:21 (else):</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  A duplicate ELSE command was found inside an IF block.</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">Call Stack (most recent call first):</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  CMakeLists.txt:495 (include)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">这种问题很简单了，直接打开cmake/OpenCVCompilerOptions.cmake:21 ，找到21行，他就是多了一行多余的endif，直接删除掉就好了</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#2d2d2d;"><span style="color:#ffffff;"># else() # message(STATUS "Looking for ccache - not found")</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">CMake Error: The following variables are used in this project, but they are set to NOTFOUND.</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">Please set them or make sure they are set and tested correctly in the CMake files:</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">CUDA_nppi_LIBRARY (ADVANCED)</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="222" src="https://images2.imgbox.com/1f/11/UyheRi3J_o.png" width="553"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">因为本机安装过cuda</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">解决方法:</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">第一步:在  opencv-3.2.0/cmake  文件夹下找到  FindCUDA.cmake 文件,对其进行修改</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><s><span style="color:#24292f;"><s>cd /home/zqzy/software/opencv-3.2.0/cmake</s></span></s></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">/home/hqw/hqw_opt/opencv/cmake/FindCUDA.cmake</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">sudo gedit FindCUDA.cmake</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">1）找到行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">find_cuda_helper_libs(nppi)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppial)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppicc)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppicom)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppidei)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppif)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppig)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppim)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppist)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppisu)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppitc)</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="199" src="https://images2.imgbox.com/1b/c0/mXhO7h4P_o.png" width="316"></p> 
<p style="margin-left:0;text-align:left;">上边那一对就是，但是需要把下边这个替换了?（-- CUDA detected: 11.4</p> 
<p style="margin-left:0;text-align:left;">）其实这一步我的版本不必（下边是5.5），按需操作</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="257" src="https://images2.imgbox.com/93/04/E7LDKqHL_o.png" width="350"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">2）找到行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">set(CUDA_npp_LIBRARY "${CUDA_nppc_LIBRARY};${CUDA_nppi_LIBRARY};${CUDA_npps_LIBRARY}")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">set(CUDA_npp_LIBRARY "${CUDA_nppc_LIBRARY};${CUDA_nppial_LIBRARY};${CUDA_nppicc_LIBRARY};${CUDA_nppicom_LIBRARY};${CUDA_nppidei_LIBRARY};${CUDA_nppif_LIBRARY};${CUDA_nppig_LIBRARY};${CUDA_nppim_LIBRARY};${CUDA_nppist_LIBRARY};${CUDA_nppisu_LIBRARY};${CUDA_nppitc_LIBRARY};${CUDA_npps_LIBRARY}")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">3）找到行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppi_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppial_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppicc_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppicom_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppidei_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppif_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppig_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppim_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppist_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppisu_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppitc_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">第二步:  在  opencv-3.2.0/cmake  文件夹下找到文件  OpenCVDetectCUDA.cmake,对其进行修改</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">cd /home/zqzy/software/opencv-3.2.0/cmake</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">sudo gedit OpenCVDetectCUDA.cmake</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  修改以下几行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;"> ...</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  set(__cuda_arch_ptx "")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  if(CUDA_GENERATION STREQUAL "Fermi")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "2.0")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  elseif(CUDA_GENERATION STREQUAL "Kepler")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "3.0 3.5 3.7")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  ...</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  ...</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  set(__cuda_arch_ptx "")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  if(CUDA_GENERATION STREQUAL "Kepler")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "3.0 3.5 3.7")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  elseif(CUDA_GENERATION STREQUAL "Maxwell")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "5.0 5.2")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  ...</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="284" src="https://images2.imgbox.com/8b/ab/HjmA3zYO_o.png" width="554"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">第三步: Cuda9或者Cuda10及以后的版本 中有一个单独的halffloat(cuda_fp16.h)头文件,也应该被包括在opencv的目录里</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">将头文件cuda_fp16.h添加至 opencv/modules/cudev/include/opencv2/cudev/common.hpp</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">cd /home/zqzy/software/opencv-3.2.0/modules/cudev/include/opencv2/cudev</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">sudo gedit common.hpp</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">即在common.hpp中添加</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">#include &lt;cuda_fp16.h&gt;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">重新生成即可 </span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">最后都试了，不行，不知道本机环境什么情况，毕竟不是我新装的机器，docker、cuda、ros、opencv</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">不带cuda</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF   ..</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">undefined reference to `cblas_sgemm</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">缺库</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#282c34;"><span style="color:#ffffff;">sudo apt-get install libopenblas-dev</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#282c34;"><span style="color:#ffffff;">$ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF  -DCMAKE_EXE_LINKER_FLAGS=-lcblas   ..</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#dd4a68;">make</span><span style="background-color:#fafafa;"><span style="color:#000000;"> -j8 </span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#dd4a68;">sudo</span> <span style="color:#dd4a68;">make</span> <span style="color:#dd4a68;">install</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ ls /usr/local/opencv320/</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">bin  include  lib  share</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><a href="https://github.com/opencv/opencv_contrib/releases/tag/3.2.0" title="Release 3.2.0 · opencv/opencv_contrib · GitHub">Release 3.2.0 · opencv/opencv_contrib · GitHub</a></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">忘了带contrib和aruco，删除/usr/local/opencv320，重装</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF  -DCMAKE_EXE_LINKER_FLAGS=-lcblas -DOPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.2.0   ..</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">opencv编译不过</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">fatal error: linux/videodev.h: No such file or directory</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#61aeee;">sudo</span> <span style="color:#61aeee;">apt-get</span> <span style="color:#61aeee;">install</span><span style="background-color:#282c34;"><span style="color:#ffffff;"> libv4l-dev </span></span><span style="color:#61aeee;">sudo</span> <span style="color:#61aeee;">ln</span><span style="background-color:#282c34;"><span style="color:#ffffff;"> -s /usr/include/libv4l1-videodev.h /usr/include/linux/videodev.h</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">fatal error: sys/videoio.h: No such file or directory</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">其实是/modules/没写进去</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF  -DCMAKE_EXE_LINKER_FLAGS=-lcblas -DOPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.2.0/modules/   ..</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">-- Configuring done</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">-- Generating done</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">-- Build files have been written to: /home/hqw/hqw_opt/opencv-3.2.0/build</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">配置成功</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">编译失败</span></p> 
<p style="margin-left:.0001pt;text-align:left;"> <span style="background-color:#eef0f4;"><span style="color:#555666;">fatal error: LAPACKE_H_PATH-NOTFOUND/lapacke.h: No such file or directory #include “LAPACKE_H_PATH-NOTFOUND/lapacke.h”</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#f9f2f4;"><span style="color:#c7254e;">sudo apt-get install liblapacke-dev checkinstall</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#eef0f4;"><span style="color:#555666;">修改出现问题的文件，例如我的文件是</span></span><a href="https://so.csdn.net/so/search?q=opencv&amp;spm=1001.2101.3001.7020" title="opencv">opencv</a><span style="background-color:#eef0f4;"><span style="color:#555666;">-3.2.0/build/opencv_lapack.h</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="124" src="https://images2.imgbox.com/bc/5e/WeGqKNbX_o.png" width="554"><br><br><span style="background-color:#eef0f4;"><span style="color:#555666;">将第二行中的</span></span><span style="background-color:#f9f2f4;"><span style="color:#c7254e;">#include"LAPACKE_H_PATH-NOTFOUND/lapacke.h"</span></span><span style="background-color:#eef0f4;"><span style="color:#555666;"> 修改为</span></span><span style="background-color:#f9f2f4;"><span style="color:#c7254e;">#include"lapacke.h"</span></span><span style="background-color:#eef0f4;"><span style="color:#555666;">即可</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">报错</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">fatal error: unsupported/Eigen/MatrixFunctions: No such file or directory</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">首先确保Eigen已经安装了，然后找到Eigen所在的路径。我的在/usr/include/eigen3这里</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">然后将报错的文件中的下面句子</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">include &lt;unsupported/Eigen/MatrixFunctions&gt;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改成</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">include &lt;/usr/include/eigen3/unsupported/Eigen/MatrixFunctions&gt;</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#1e1e1e;"><span style="background-color:#1e1e1e;"><span style="color:#ffffff;">// #include &lt;unsupported/Eigen/MatrixFunctions&gt;</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#1e1e1e;"><span style="background-color:#1e1e1e;"><span style="color:#ffffff;">#include</span></span> <span style="background-color:#1e1e1e;"><span style="color:#ffffff;">&lt;/usr/include/eigen3/unsupported/Eigen/MatrixFunctions&gt;</span></span></span></p> 
<p style="margin-left:0;text-align:left;">编译成功</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="288" src="https://images2.imgbox.com/c5/b0/y1FsTcKw_o.png" width="554"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">安装</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="291" src="https://images2.imgbox.com/7b/8f/oyBf0sRe_o.png" width="554"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">看到openvins引用新编译的opencv库，新的是3.2.0，默认是3.4.8，虽然我没替换3.4.8，制定了/usr/local/opencv320/，但是执行了make install。。。。</span></p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="225" src="https://images2.imgbox.com/bb/c4/5j13GvZW_o.png" width="553"></p> 
<p style="margin-left:0;text-align:left;">被install以后被自动找到直接就编译成功了，如果找不到就改一下cmakelists.txt</p> 
<p style="margin-left:0;text-align:left;"><img alt="" height="290" src="https://images2.imgbox.com/6f/55/pID53Tcu_o.png" width="554"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;">opencv参考命令</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#000000;"><span style="background-color:#000000;"><span style="color:#ffffff;">git clone https://github.com/opencv/opencv/git clone https://github.com/opencv/opencv_contrib/mkdir opencv/build/cd opencv/build/cmake -DOPENCV_EXTRA_MODULES_PATH=../../opencv_contrib/modules ..make -j8sudo make install</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:justify;">实际根据需求去git找的release，没用官方这个命令。</p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/8a/b7/qYdaKFlS_o.png" width="534"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><a href="https://blog.csdn.net/weixin_51134241/article/details/122196269" title="ubuntu18.04安装运行OpenVINS_openvins运行-CSDN博客">ubuntu18.04安装运行OpenVINS_openvins运行-CSDN博客</a></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">这个博客也是</span><span style="color:#24292f;">3.2</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">指定一个独立目录</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ cmake -D CMAKE_BUILD_TYPE=Release -D CMAKE_INSTALL_PREFIX=/usr/local/opencv320 -D E</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">各种报错</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">CMake Error at cmake/OpenCVCompilerOptions.cmake:21 (else):</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  A duplicate ELSE command was found inside an IF block.</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">Call Stack (most recent call first):</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  CMakeLists.txt:495 (include)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">这种问题很简单了，直接打开cmake/OpenCVCompilerOptions.cmake:21 ，找到21行，他就是多了一行多余的endif，直接删除掉就好了</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#2d2d2d;"><span style="color:#ffffff;"># else() # message(STATUS "Looking for ccache - not found")</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">CMake Error: The following variables are used in this project, but they are set to NOTFOUND.</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">Please set them or make sure they are set and tested correctly in the CMake files:</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">CUDA_nppi_LIBRARY (ADVANCED)</span></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/25/5b/yqrikvdo_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">因为本机安装过cuda</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">解决方法:</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">第一步:在  opencv-3.2.0/cmake  文件夹下找到  FindCUDA.cmake 文件,对其进行修改</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><s><span style="color:#24292f;"><s>cd /home/zqzy/software/opencv-3.2.0/cmake</s></span></s></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">/home/hqw/hqw_opt/opencv/cmake/FindCUDA.cmake</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">sudo gedit FindCUDA.cmake</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">1）找到行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">find_cuda_helper_libs(nppi)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppial)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppicc)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppicom)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppidei)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppif)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppig)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppim)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppist)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppisu)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  find_cuda_helper_libs(nppitc)</span></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/06/ba/PVxVqRAE_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;">上边那一对就是，但是需要把下边这个替换了?（-- CUDA detected: 11.4</p> 
<p style="margin-left:0;text-align:left;">）其实这一步我的版本不必（下边是5.5），按需操作</p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/67/2f/BAmkCEhX_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">2）找到行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">set(CUDA_npp_LIBRARY "${CUDA_nppc_LIBRARY};${CUDA_nppi_LIBRARY};${CUDA_npps_LIBRARY}")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">set(CUDA_npp_LIBRARY "${CUDA_nppc_LIBRARY};${CUDA_nppial_LIBRARY};${CUDA_nppicc_LIBRARY};${CUDA_nppicom_LIBRARY};${CUDA_nppidei_LIBRARY};${CUDA_nppif_LIBRARY};${CUDA_nppig_LIBRARY};${CUDA_nppim_LIBRARY};${CUDA_nppist_LIBRARY};${CUDA_nppisu_LIBRARY};${CUDA_nppitc_LIBRARY};${CUDA_npps_LIBRARY}")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">3）找到行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppi_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppial_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppicc_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppicom_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppidei_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppif_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppig_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppim_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppist_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppisu_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">unset(CUDA_nppitc_LIBRARY CACHE)</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">第二步:  在  opencv-3.2.0/cmake  文件夹下找到文件  OpenCVDetectCUDA.cmake,对其进行修改</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">cd /home/zqzy/software/opencv-3.2.0/cmake</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">sudo gedit OpenCVDetectCUDA.cmake</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  修改以下几行</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;"> ...</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  set(__cuda_arch_ptx "")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  if(CUDA_GENERATION STREQUAL "Fermi")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "2.0")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  elseif(CUDA_GENERATION STREQUAL "Kepler")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "3.0 3.5 3.7")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  ...</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改为</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  ...</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  set(__cuda_arch_ptx "")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  if(CUDA_GENERATION STREQUAL "Kepler")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "3.0 3.5 3.7")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  elseif(CUDA_GENERATION STREQUAL "Maxwell")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">    set(__cuda_arch_bin "5.0 5.2")</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">  ...</span></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/cf/a4/Rhb1ja7u_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">第三步: Cuda9或者Cuda10及以后的版本 中有一个单独的halffloat(cuda_fp16.h)头文件,也应该被包括在opencv的目录里</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">将头文件cuda_fp16.h添加至 opencv/modules/cudev/include/opencv2/cudev/common.hpp</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">cd /home/zqzy/software/opencv-3.2.0/modules/cudev/include/opencv2/cudev</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">sudo gedit common.hpp</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">即在common.hpp中添加</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">#include &lt;cuda_fp16.h&gt;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">重新生成即可 </span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">最后都试了，不行，不知道本机环境什么情况，毕竟不是我新装的机器，docker、cuda、ros、opencv</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">不带cuda</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF   ..</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">undefined reference to `cblas_sgemm</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">缺库</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#282c34;"><span style="color:#ffffff;">sudo apt-get install libopenblas-dev</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#282c34;"><span style="color:#ffffff;">$ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF  -DCMAKE_EXE_LINKER_FLAGS=-lcblas   ..</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#dd4a68;">make</span><span style="background-color:#fafafa;"><span style="color:#000000;"> -j8 </span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#dd4a68;">sudo</span> <span style="color:#dd4a68;">make</span> <span style="color:#dd4a68;">install</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ ls /usr/local/opencv320/</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">bin  include  lib  share</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><a href="https://github.com/opencv/opencv_contrib/releases/tag/3.2.0" title="Release 3.2.0 · opencv/opencv_contrib · GitHub">Release 3.2.0 · opencv/opencv_contrib · GitHub</a></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">忘了带contrib和aruco，删除/usr/local/opencv320，重装</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF  -DCMAKE_EXE_LINKER_FLAGS=-lcblas -DOPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.2.0   ..</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">opencv编译不过</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">fatal error: linux/videodev.h: No such file or directory</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#61aeee;">sudo</span> <span style="color:#61aeee;">apt-get</span> <span style="color:#61aeee;">install</span><span style="background-color:#282c34;"><span style="color:#ffffff;"> libv4l-dev </span></span><span style="color:#61aeee;">sudo</span> <span style="color:#61aeee;">ln</span><span style="background-color:#282c34;"><span style="color:#ffffff;"> -s /usr/include/libv4l1-videodev.h /usr/include/linux/videodev.h</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">fatal error: sys/videoio.h: No such file or directory</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">其实是/modules/没写进去</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">$ cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX=/usr/local/opencv320  -DWITH_CUDA=OFF  -DCMAKE_EXE_LINKER_FLAGS=-lcblas -DOPENCV_EXTRA_MODULES_PATH=../../opencv_contrib-3.2.0/modules/   ..</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">-- Configuring done</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">-- Generating done</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">-- Build files have been written to: /home/hqw/hqw_opt/opencv-3.2.0/build</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">配置成功</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">编译失败</span></p> 
<p style="margin-left:.0001pt;text-align:left;"> <span style="background-color:#eef0f4;"><span style="color:#555666;">fatal error: LAPACKE_H_PATH-NOTFOUND/lapacke.h: No such file or directory #include “LAPACKE_H_PATH-NOTFOUND/lapacke.h”</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#f9f2f4;"><span style="color:#c7254e;">sudo apt-get install liblapacke-dev checkinstall</span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#eef0f4;"><span style="color:#555666;">修改出现问题的文件，例如我的文件是</span></span><a href="https://so.csdn.net/so/search?q=opencv&amp;spm=1001.2101.3001.7020" title="opencv">opencv</a><span style="background-color:#eef0f4;"><span style="color:#555666;">-3.2.0/build/opencv_lapack.h</span></span></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/b6/ac/XvbQCWoC_o.png" width="534"></p> 
<p style="margin-left:.0001pt;text-align:left;"><br><br><span style="background-color:#eef0f4;"><span style="color:#555666;">将第二行中的</span></span><span style="background-color:#f9f2f4;"><span style="color:#c7254e;">#include"LAPACKE_H_PATH-NOTFOUND/lapacke.h"</span></span><span style="background-color:#eef0f4;"><span style="color:#555666;"> 修改为</span></span><span style="background-color:#f9f2f4;"><span style="color:#c7254e;">#include"lapacke.h"</span></span><span style="background-color:#eef0f4;"><span style="color:#555666;">即可</span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">报错</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">fatal error: unsupported/Eigen/MatrixFunctions: No such file or directory</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">首先确保Eigen已经安装了，然后找到Eigen所在的路径。我的在/usr/include/eigen3这里</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">然后将报错的文件中的下面句子</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">include &lt;unsupported/Eigen/MatrixFunctions&gt;</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">改成</span></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">include &lt;/usr/include/eigen3/unsupported/Eigen/MatrixFunctions&gt;</span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#1e1e1e;"><span style="background-color:#1e1e1e;"><span style="color:#ffffff;">// #include &lt;unsupported/Eigen/MatrixFunctions&gt;</span></span></span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#1e1e1e;"><span style="background-color:#1e1e1e;"><span style="color:#ffffff;">#include</span></span> <span style="background-color:#1e1e1e;"><span style="color:#ffffff;">&lt;/usr/include/eigen3/unsupported/Eigen/MatrixFunctions&gt;</span></span></span></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/ff/d5/GKOQCUtP_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">安装</span></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/b5/cd/GiddGt1T_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:0;text-align:left;"><span style="color:#24292f;">openvins引用新编译的opencv库</span></p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/fe/e2/cl96OLxT_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;">被install以后被自动找到，如果找不到就改一下cmakelists.txt</p> 
<p class="img-center"><img alt="" height="299" src="https://images2.imgbox.com/f5/41/sYq3xdqY_o.png" width="534"></p> 
<p style="margin-left:0;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p> 
<p style="margin-left:.0001pt;text-align:justify;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/61fc6dea37fcf2373e86d08d969dde1f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">黑客入门指南（超详细），学习黑客必须掌握的技术</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/de2dc9a6e3825f7adf38822a2dbb4917/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">TensorFlow的实战（详细代码）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>