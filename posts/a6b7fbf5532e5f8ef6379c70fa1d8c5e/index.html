<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>How to plot scikit learn classification report? - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="How to plot scikit learn classification report?" />
<meta property="og:description" content="````
import matplotlib.pyplot as plt
import numpy as np
def show_values(pc, fmt=&#34;%.2f&#34;, **kw):
&#39;&#39;&#39;
Heatmap with text in each cell with matplotlib&#39;s pyplot
Source: https://stackoverflow.com/a/25074150/395857 By HYRY
&#39;&#39;&#39;
from itertools import izip
pc.update_scalarmappable()
#ax = pc.get_axes()
ax = pc.axes
for p, color, value in izip(pc.get_paths(), pc.get_facecolors(), pc.get_array()):
x, y = p.vertices[:-2, :].mean(0)
if np.all(color[:3] &gt; 0.5):
color = (0.0, 0.0, 0.0)
else:
color = (1.0, 1.0, 1.0)
ax.text(x, y, fmt % value, ha=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a6b7fbf5532e5f8ef6379c70fa1d8c5e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-28T17:38:04+08:00" />
<meta property="article:modified_time" content="2018-03-28T17:38:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">How to plot scikit learn classification report?</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>````</p> 
<p>import matplotlib.pyplot as plt<br>import numpy as np<br><br>def show_values(pc, fmt="%.2f", **kw):<br>    '''<br>    Heatmap with text in each cell with matplotlib's pyplot<br>    Source: https://stackoverflow.com/a/25074150/395857 <br>    By HYRY<br>    '''<br>    from itertools import izip<br>    pc.update_scalarmappable()<br></p> 
<p>    #ax = pc.get_axes()</p> 
<p>   ax = pc.axes<br></p> 
<p>    for p, color, value in izip(pc.get_paths(), pc.get_facecolors(), pc.get_array()):<br>        x, y = p.vertices[:-2, :].mean(0)<br>        if np.all(color[:3] &gt; 0.5):<br>            color = (0.0, 0.0, 0.0)<br>        else:<br>            color = (1.0, 1.0, 1.0)<br>        ax.text(x, y, fmt % value, ha="center", va="center", color=color, **kw)<br><br><br>def cm2inch(*tupl):<br>    '''<br>    Specify figure size in centimeter in matplotlib<br>    Source: https://stackoverflow.com/a/22787457/395857<br>    By gns-ank<br>    '''<br>    inch = 2.54<br>    if type(tupl[0]) == tuple:<br>        return tuple(i/inch for i in tupl[0])<br>    else:<br>        return tuple(i/inch for i in tupl)<br><br><br>def heatmap(AUC, title, xlabel, ylabel, xticklabels, yticklabels, figure_width=40, figure_height=20, correct_orientation=False, cmap='RdBu'):<br>    '''<br>    Inspired by:<br>    - https://stackoverflow.com/a/16124677/395857 <br>    - https://stackoverflow.com/a/25074150/395857<br>    '''<br><br>    # Plot it out<br>    fig, ax = plt.subplots()    <br>    #c = ax.pcolor(AUC, edgecolors='k', linestyle= 'dashed', linewidths=0.2, cmap='RdBu', vmin=0.0, vmax=1.0)<br>    c = ax.pcolor(AUC, edgecolors='k', linestyle= 'dashed', linewidths=0.2, cmap=cmap)<br><br>    # put the major ticks at the middle of each cell<br>    ax.set_yticks(np.arange(AUC.shape[0]) + 0.5, minor=False)<br>    ax.set_xticks(np.arange(AUC.shape[1]) + 0.5, minor=False)<br><br>    # set tick labels<br>    #ax.set_xticklabels(np.arange(1,AUC.shape[1]+1), minor=False)<br>    ax.set_xticklabels(xticklabels, minor=False)<br>    ax.set_yticklabels(yticklabels, minor=False)<br><br>    # set title and x/y labels<br>    plt.title(title)<br>    plt.xlabel(xlabel)<br>    plt.ylabel(ylabel)      <br><br>    # Remove last blank column<br>    plt.xlim( (0, AUC.shape[1]) )<br><br>    # Turn off all the ticks<br>    ax = plt.gca()    <br>    for t in ax.xaxis.get_major_ticks():<br>        t.tick1On = False<br>        t.tick2On = False<br>    for t in ax.yaxis.get_major_ticks():<br>        t.tick1On = False<br>        t.tick2On = False<br><br>    # Add color bar<br>    plt.colorbar(c)<br><br>    # Add text in each cell <br>    show_values(c)<br><br>    # Proper orientation (origin at the top left instead of bottom left)<br>    if correct_orientation:<br>        ax.invert_yaxis()<br>        ax.xaxis.tick_top()       <br><br>    # resize <br>    fig = plt.gcf()<br>    #fig.set_size_inches(cm2inch(40, 20))<br>    #fig.set_size_inches(cm2inch(40*4, 20*4))<br>    fig.set_size_inches(cm2inch(figure_width, figure_height))<br><br><br><br>def plot_classification_report(classification_report, title='Classification report ', cmap='RdBu'):<br>    '''<br>    Plot scikit-learn classification report.<br>    Extension based on https://stackoverflow.com/a/31689645/395857 <br>    '''<br>    lines = classification_report.split('\n')<br><br>    classes = []<br>    plotMat = []<br>    support = []<br>    class_names = []<br>    for line in lines[2 : (len(lines) - 2)]:<br>        t = line.strip().split()<br>        if len(t) &lt; 2: continue<br>        classes.append(t[0])<br>        v = [float(x) for x in t[1: len(t) - 1]]<br>        support.append(int(t[-1]))<br>        class_names.append(t[0])<br>        print(v)<br>        plotMat.append(v)<br><br>    print('plotMat: {0}'.format(plotMat))<br>    print('support: {0}'.format(support))<br><br>    xlabel = 'Metrics'<br>    ylabel = 'Classes'<br>    xticklabels = ['Precision', 'Recall', 'F1-score']<br>    yticklabels = ['{0} ({1})'.format(class_names[idx], sup) for idx, sup  in enumerate(support)]<br>    figure_width = 25<br>    figure_height = len(class_names) + 7<br>    correct_orientation = False<br>    heatmap(np.array(plotMat), title, xlabel, ylabel, xticklabels, yticklabels, figure_width, figure_height, correct_orientation, cmap=cmap)<br></p> 
<p>````</p> 
<p><br></p> 
<p><br></p> 
<p>```</p> 
<p>sampleClassificationReport = """             precision    recall  f1-score   support<br><br>      Acacia       0.62      1.00      0.76        66<br>      Blossom       0.93      0.93      0.93        40<br>      Camellia       0.59      0.97      0.73        67<br>      Daisy       0.47      0.92      0.62       272<br>      Echium       1.00      0.16      0.28       413<br><br>    avg / total       0.77      0.57      0.49       858"""<br></p> 
<p><br></p> 
<p>```</p> 
<p><br></p> 
<p>```</p> 
<p>plot_classification_report(sampleClassificationReport)<br>plt.savefig('test_plot_classif_report.png', dpi=200, format='png', bbox_inches='tight')<br></p> 
<p>```</p> 
<p><br></p> 
<p>#参考文献</p> 
<p></p> 
<h2><a href="https://stackoverflow.com/questions/28200786/how-to-plot-scikit-learn-classification-report" rel="nofollow" class="question-hyperlink">How to plot scikit learn classification report?</a></h2> 
<br> 
<p><br></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/89d83b32accfaf4d75eb2175da890f31/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于面试的问题---拷贝构造函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aa6f8d6fa6424e1da7389c00b408a431/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PID参数的调整方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>