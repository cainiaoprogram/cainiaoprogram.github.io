<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>项目八总结：数据库的安全性维护 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="项目八总结：数据库的安全性维护" />
<meta property="og:description" content="数据库除了数据管理之外，安全管理也是很重要的部分，其中的用户权限管理可以有效保证数据的安全访问，防止数据被非必要用户泄露、修改或删除。因此，MySQL提供了用户管理来保证数据的安全性。
MySQL 安全管理通过创建用户、用户授权、 用户登录3个步骤的用户管理来实现。MySQL 安全系统非常灵活，可以通过命令或界面化登录，而用户权限也可以从数据库、表、列及其他数据库对象的不同授权来达到，既满足用户的需求，又限制用户不能超出访问、操作的权限。
1.添加数据库用户 1.MySQL 的权限表 MySQL通过权限表来控制用户对数据库的访问，MySQL数据库在安装时会自动安装多个数据库。MySQL权限表存放在名称为MySQL的数据库中。常用的权限表有 user、db、host、table_priv、columns_priv和 procs_ priv。
(1)user权限表。user是MySQL中最重要的一个权限表，user列主要分为4个部分:用户列、权限列、安全列和资源控制列。
①用户列:用户登录时通过表中的Host、User和Password列判断连接的IP、用户名称和密码是否存在于表中来通过身份验证或拒绝连接。
②权限列:user表中包含多个以“_priv”结尾的字段，这些字段决定了该用户的权限，既包括查询权限、插入权限、更新权限、删除权限等普通权限，也包括关闭服务器和加载用户等高级管理权限。
③ 安全列:ssl(加密)、x509(标识用户)开头的字段，以及 plugin 和 authentication string字段(验证用户身份、授权的插件)。
④资源控制列:max(最大允许次数，0表示无限制)开头的字段。 max_questions:表示每小时允许执行查询数据库的次数。
max_updates:表示每小时允许执行更新数据库的次数。
max_connections:表示每小时允许执行连接数据库的次数。 max_user_conntions:表示单个用户同时连接数据库的次数。
(2)db、host权限表。db权限表存储用户在各个数据库上的操作权限，决定哪些用户可以从哪些主机访问哪些数据库。
host 权限表是db权限表的扩展，配合db权限表对给定主机上数据库级操作权限做更细致的控制。host 权限表很少使用，只有在db表的范围内扩展一个条目时才会用到。
(3)table_priv权限表。记录数据表级别的操作权限。table_priv权限表与db权限表相似，不同之处是它用于数据表而不是数据库。
(4)columns_priv权限表。记录数据字段级别的操作权限。columns_priv权限表的作用与table_priv权限表类似，不同之处是它针对某些表的特定字段的权限。
(5)procs_priv权限表。该权限表存储用户在存储过程和函数上的操作权限。
2.添加用户 新安装的MySQL 中只有一个名称为root的用户。这个用户是安装服务器时由系统创建并赋予了 MySQL 的所有权限。在对 MySQL 的实际操作中，通常需要创建不同层次要求的用户来确保数据的安全访问。添加用户可以通过 CREATE USER INSERT和 GRANT语句来实现。
(1)CREATE USER语句的语法格式为:
CREATE USER &lt;&#39;用户名&gt;@&lt;&#39;主机&#39;&gt; [IDENTIFIED BY[PASSWORI[&lt;&#39;密码&#39;&gt;]];
说明:
①使用 CREATE USER 语句可以创建一个或多个用户，用户之间用逗号分隔。
②“主机”可以是主机名或IP 地址，本地主机名可以使用localhost,“%”表示一组主机。
③“IDENTIFIED BY”关键字用于设置用户的密码，若指定用户登录不需要密码，则可以省略该选项。
④“PASSWORD”关键字指定使用哈希值设置密码。密码的哈希值可以使用 PASSWORDO 函数获取。
(2)INSERT语句的语法格式为:
INSERT INTO mysql.user(User,Host,Password
Values(&lt;&#39;用户名&#39;&gt;，&lt;&#39;主机&#39;&gt;,PASSWORD(&lt;&#39;密码 &#39;&gt;));" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2073f895a4de5c821977747126775900/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-26T14:38:15+08:00" />
<meta property="article:modified_time" content="2022-05-26T14:38:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">项目八总结：数据库的安全性维护</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        数据库除了数据管理之外，安全管理也是很重要的部分，其中的用户权限管理可以有效保证数据的安全访问，防止数据被非必要用户泄露、修改或删除。因此，MySQL提供了用户管理来保证数据的安全性。</p> 
<p>        MySQL 安全管理通过创建用户、用户授权、 用户登录3个步骤的用户管理来实现。MySQL 安全系统非常灵活，可以通过命令或界面化登录，而用户权限也可以从数据库、表、列及其他数据库对象的不同授权来达到，既满足用户的需求，又限制用户不能超出访问、操作的权限。</p> 
<h3>1.添加数据库用户</h3> 
<h4>        1.MySQL 的权限表</h4> 
<p>        MySQL通过权限表来控制用户对数据库的访问，MySQL数据库在安装时会自动安装多个数据库。MySQL权限表存放在名称为MySQL的数据库中。常用的权限表有 user、db、host、table_priv、columns_priv和 procs_ priv。</p> 
<p><br>         (1)user权限表。user是MySQL中最重要的一个权限表，user列主要分为4个部分:用户列、权限列、安全列和资源控制列。</p> 
<p><br>       <em> </em><strong> ①用户列:用户登录时通过表中的Host、User和Password列判断连接的IP、用户名称和密码是否存在于表中来通过身份验证或拒绝连接。<br>         ②权限列:user表中包含多个以“_priv”结尾的字段，这些字段决定了该用户的权限，既包括查询权限、插入权限、更新权限、删除权限等普通权限，也包括关闭服务器和加载用户等高级管理权限。<br>         ③ 安全列:ssl(加密)、x509(标识用户)开头的字段，以及 plugin 和 authentication string字段(验证用户身份、授权的插件)。<br>         ④资源控制列:max(最大允许次数，0表示无限制)开头的字段。 <br> max_questions:表示每小时允许执行查询数据库的次数。<br>  max_updates:表示每小时允许执行更新数据库的次数。</strong></p> 
<p><strong>max_connections:表示每小时允许执行连接数据库的次数。 max_user_conntions:表示单个用户同时连接数据库的次数。</strong></p> 
<p><br>         (2)db、host权限表。db权限表存储用户在各个数据库上的操作权限，决定哪些用户可以从哪些主机访问哪些数据库。<br>         host 权限表是db权限表的扩展，配合db权限表对给定主机上数据库级操作权限做更细致的控制。host 权限表很少使用，只有在db表的范围内扩展一个条目时才会用到。</p> 
<p><br>         (3)table_priv权限表。记录数据表级别的操作权限。table_priv权限表与db权限表相似，不同之处是它用于数据表而不是数据库。</p> 
<p><br>         (4)columns_priv权限表。记录数据字段级别的操作权限。columns_priv权限表的作用与table_priv权限表类似，不同之处是它针对某些表的特定字段的权限。</p> 
<p><br>         (5)procs_priv权限表。该权限表存储用户在存储过程和函数上的操作权限。</p> 
<h4><br>         2.添加用户</h4> 
<p>        新安装的MySQL 中只有一个名称为root的用户。这个用户是安装服务器时由系统创建并赋予了 MySQL 的所有权限。在对 MySQL 的实际操作中，通常需要创建不同层次要求的用户来确保数据的安全访问。添加用户可以通过 CREATE USER INSERT和 GRANT语句来实现。</p> 
<p>       <strong> (1)CREATE USER语句的语法格式为:</strong></p> 
<p>CREATE USER &lt;'用户名&gt;@&lt;'主机'&gt; [IDENTIFIED BY[PASSWORI[&lt;'密码'&gt;]];</p> 
<p>        说明:<br>         ①使用 CREATE USER 语句可以创建一个或多个用户，用户之间用逗号分隔。</p> 
<p>        ②“主机”可以是主机名或IP 地址，本地主机名可以使用localhost,“%”表示一组主机。<br>         ③“IDENTIFIED BY”关键字用于设置用户的密码，若指定用户登录不需要密码，则可以省略该选项。<br>         ④“PASSWORD”关键字指定使用哈希值设置密码。密码的哈希值可以使用 PASSWORDO 函数获取。</p> 
<p><br>      <strong>   (2)INSERT语句的语法格式为:</strong></p> 
<p>INSERT INTO mysql.user(User,Host,Password<br> Values(&lt;'用户名'&gt;，&lt;'主机'&gt;,PASSWORD(&lt;'密码 '&gt;));</p> 
<p>        说明:通常语句只能添加 Host、User、Password字段的值，分别表示 user 数据表中的主机名字段、用户名字段和密码字段。<br>         注意，GRANT语句在授予用户权限任务部分详细讲解。</p> 
<h3>3.授予、回收数据库用户权限</h3> 
<p>        新添加的数据库用户既不允许访问其他用户的数据库，也不能创建自己的数据库，只有在授予了相应的权限后才能访问或创建数据库，为满足 MySQL 服务器的安全需要考虑以下内容。<br>         ①多数用户只需要对数据表进行读、写操作，只有少数用户需要创建、删除数据表。<br>         ② 某些用户需要读、写数据而不需要修改数据。③某些用户允许添加数据而不允许删除数据。<br>         ④ 管理员用户需要有管理用户的权力，而其他用户则不需要。<br>         ⑤ 某些用户允许通过存储过程来访问数据，而不允许直接访问数据表。</p> 
<h4>         1.授予用户权限</h4> 
<p>        GRANT语句仅是语句，可以达到添加新用户或修改用户密码的作用。<br> GRANT 语句的语法格式为:</p> 
<p>GRANT&lt;权限名称&gt;[(字段列表)]ON&lt;对象名&gt;TO&lt;'用户名'&gt;@&lt;'主机'&gt; [IDENTIFIED BY[PASSWORD]&lt;'新密码 '&gt;] [WITH GRANT OPTION];</p> 
<p>说明:<br>         ①“权限名称”中常用的权限如下。</p> 
<p><br> ALL [PRIVILEGES]:除GRANT OPTION之外的所有简单权限。 </p> 
<blockquote> 
 <p>CREATE:允许创建数据表。</p> 
 <p>ALTER:允许修改数据表。</p> 
 <p>DROP:允许删除数据表。</p> 
 <p>SELECT:允许检索数据表。</p> 
 <p>INSERT:允许在数据表中插入数据。</p> 
 <p>DELETE:允许在数据表中删除数据</p> 
 <p>UPDATE:允许在数据表中更新数据。</p> 
 <p>INDEX:允许在数据表中定义索引。</p> 
 <p>CREATE VIEW:允许创建视图。</p> 
 <p>EXECUTE:允许运行指定的存储过程。</p> 
</blockquote> 
<p>        ②“对象名”有以下权限级别。</p> 
<p>        全局权限:适用于一个给定服务器中的所有数据库，可以用“*.*”来表示。</p> 
<p>数据库权限:适用于一个给定数据库中的所有数据库对象，可以用“数据库名·*”来表示。<br> 表权限:适用于一个给定表中的所有列，可以用“数据库名:表名”来表示。<br> 列权限:适用于一个给定表中的单一列，可以先用“数据库名·表名”来表示，再在权限名称后加上“[(字段列表)]”可选项，如 SELECT(员工 ID，姓名)。<br> 子程序权限;适用于给定存储过程或函数，可以用“PROCEDURE | FUNCTION数据库名·过程名”来表示。</p> 
<p>        ③“&lt;' 用户名&gt;@&lt;'主机'&gt;”中若“用户名”不存在则添加用户。“[IDENTIFIED BY[PASSWORD]&lt;'新密码'&gt;]”可选项可以设置新用户的密码，若“用户名”已经存在，则此选项可以修改用户的密码。</p> 
<p>        ④“[WITH GRANT OPTION]”可选项表示允许用户将获得的权限授予其他用户。</p> 
<h4><br>         2. 查看用户权限</h4> 
<p>      (1)使用SHOWGRANTS语句查看授权信息，其语法格式为:</p> 
<p>SHOW GRANTS FOR&lt;‘用户名’&gt;@&lt;‘主机’&gt;</p> 
<p>        (2)使用SELECT 语句查看mysql.user表中用户的全局权限，其语法格式为:</p> 
<p>SELECT&lt;权限字段&gt; FROM mysql.user<br> [WHERE User=&lt;'用户名'&gt; AND Host=&lt;' 主机 '&gt;];</p> 
<p>        说明:“mysql.user”表可以查询到用户的全局权限，“&lt;权限字段&gt;”中常用的权限字段有 Select_priv、Insert_priv、Create_priv等，mysql.db中可以查询到用户的数据库权限。</p> 
<h4>        3. 回收用户权限</h4> 
<p>       使用REVOKE语句回收用户权限，其语法格式为:</p> 
<p>REVOKE&lt;权限名称&gt;[(字段列表)]ON&lt;对象名&gt;FROM&lt;'用户名' &gt;@&lt;主机'&gt;;</p> 
<p>        说明:REVOKE 语句用来取消指定用户的某些指定权限，与 GRANT 语句类似。</p> 
<h3>4.数据库用户管理</h3> 
<p>        当管理员在MySQL添加了用户后，因为各种问题可能需要对用户进行改名、修改密码或删除用户来实现对用户的管理。</p> 
<h4>        1.修改用户的名称</h4> 
<p>        使用RENAME USER语句可以修改用户的名称，其语法格式为:</p> 
<p>RENAME USER &lt;'旧的用户名'&gt;@&lt;'主机’&gt; TO&lt;'新的用户名'&gt;@&lt;主机'&gt;;</p> 
<p>        说明:RENAMEUSER语句可以对用户进行重命名，该语句可以同时对多个已存在的用户进行重命名，各个用户之间使用逗号分隔，重命名时“旧的用户名”必须已经存在，并且“新的用户名”还不存在，使用者必须拥有“RENAME USER”权限。</p> 
<h4>        2.修改用户的密码</h4> 
<p>       (1)使用mysqladmin命令修改用户密码的语法格式为:</p> 
<p>mysqladmin-u&lt;用户名&gt;[-h&lt;主机&gt;]-p password[&lt;新密码&gt;]</p> 
<p>        说明:“mysqladmin”是一条外部命令，必须在服务器端的“命令提示符”下执行。</p> 
<p>        (2)使用SET PASSWORD语句修改用户密码的语法格式为:</p> 
<p>SET PASSWORD[FOR&lt;'用户名&gt;@&lt;主机'&gt;]=PASSWORD&lt;‘新密码’&gt;);</p> 
<p>        说明:SET PASSWORD语句可以修改用户的密码，语句中若不加“[FOR&lt;'用户名'&gt;@&lt;'主机'&gt;]”可选项，则修改当前用户密码。</p> 
<p>        (3)使用UPDATE语句修改用户密码的语法格式为:</p> 
<p>UPDATE mysql. user SET Password=PASSWORD(&lt;'新密码'&gt;)</p> 
<p>WHERE User=&lt;'用户名'&gt; AND Host=&lt;'主机'&gt;;</p> 
<p>        说明:“新密码”需要用“PASSWORDO)”函数来加密。</p> 
<h4>       3.删除用户</h4> 
<p>        (1)使用DROP USER 语句删除用户的语法格式为:</p> 
<p>DROP USER&lt;'用户名'&gt;@&lt;'主机'&gt;;</p> 
<p>说明:DROP USER语句可以删除一个或多个普通用户，各用户之间用逗号分隔如果删除用户已经创建的数据库对象，那么该用户将继续保留。使用者必须拥有“DROP USER”权限。</p> 
<p>        (2)使用DELETE语句删除用户的语法格式为:</p> 
<p>DELETE FROM mysql. user WHERE User &lt;'用户名'&gt;AND Host=&lt;'主机'&gt;; </p> 
<p>说明:使用 DELETE语句删除用户时，使用者必须拥有“mysql.user”的“Delete”权限。<br>  </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c5b8e88bb9679885b43a7f0d97bf8144/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Dbus通信及使用方法介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1a16bef186848f1b88f92b66d2dccfbe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">0基础使用php五分钟实现数据库增删改查功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>