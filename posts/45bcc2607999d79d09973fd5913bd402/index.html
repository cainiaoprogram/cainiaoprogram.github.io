<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>车联网场景中的MQTT协议应用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="车联网场景中的MQTT协议应用" />
<meta property="og:description" content="基本概念解释 MQTT解释 MQTT（Message Queuing Telemetry Transport）是一种轻量级、基于TCP/IP协议栈构建的异步通信，和发布-订阅模式的消息传输协议。适用于资源受限的设备和低带宽、高延迟或不稳定的网络环境。它在物联网应用中广受欢迎，能够实现传感器、执行器和其它设备之间的高效通信。MQTT已逐渐成为物联网（IoT）领域最热门的协议，也是国内外各大物联网平台最主流的传输协议，阿里云物联网平台很多设备都是通过MQTT接入。
车联网定义 车联网是指车辆与周围环境中的一切物体（包括其他车辆、道路基础设施、行人、交通管理系统等）之间的互联互通系统。Vehicle-to-Everything (V2X)是车联网中的一个重要概念，旨在通过交互式通信和数据共享，提高交通安全性、流量效率和驾驶体验。简单来说，V2X技术主要基于车载通信设备和传感器，通过通信技术将车辆与周围环境中的其他实体连接起来。车辆通过传感器（如雷达、摄像头、激光雷达等）采集实时数据，如车速、位置、方向、加速度等，并通过通信设备将这些数据传输到周围的实体。而运行于其中的通信协议就成为车联网系统建设的关键和核心。
车联网作为一个高速发展中的物联网平台，现在很多车辆已经具备基础的车联网功能，能够实现T-Box远程升级（OTA）与部分信号的传输。随着5G时代的到来与通信技术不断进步，车联网将会以非常快的速度进入每一台车。
阿里云物联网平台对车联网的支持 全球亿级连接高并发架构：依靠全球2800&#43;加速节点和亿级连接架构，车辆可根据实时位置就近接入，助力客户轻松应对全球各地百万级车辆并发稳定在线的问题。多种车辆接入协议灵活选择：尊享型实例的云网关提供了如GB/T 32960、JT/T 808等车联网领域国标/行标的接入能力，并支持MQTT 3.1.1/5.0协议的绝大部分特性。车辆双向认证保障数据安全：尊享型实例的云网关支持车辆和平台间使用X.509证书双向认证，打通了阿里云数字证书产品的PCA服务，可直接选择证书进行配置，同时支持第三方证书导入认证。 阿里云物联网平台下车联网的系统架构 阿里云车联网系统架构通过设备端、云平台、通信模块、数据存储、数据分析与处理、业务应用和安全认证与权限控制等组成部分，实现了从设备到云端的全链路的车联网服务。该架构可以支持大规模的车辆连接和数据处理，提供高效、安全和智能的车联网解决方案。
设备端：车载设备、传感器和智能终端等，用于采集车辆和环境数据，并通过通信模块将数据发送到云平台。云平台：阿里云提供的云计算平台，承载车联网系统的核心功能。云平台提供设备管理、数据存储、数据分析、业务逻辑处理、安全认证等服务。通信模块：位于设备端和云平台之间，负责设备与云平台之间的数据传输和通信。通信模块可以使用不同的通信协议，如MQTT、HTTPS等。数据存储：云平台提供的高可靠、可扩展的数据存储服务，用于存储车辆和环境数据。阿里云提供的存储服务包括云数据库（RDS）、对象存储（OSS）等。数据分析与处理：云平台通过大数据分析和人工智能技术，对车辆和环境数据进行实时和离线分析，提取有价值的信息和洞察，并支持业务逻辑的处理。业务应用：基于云平台和数据分析结果，开发应用程序和服务，如车辆远程监控、诊断、驾驶行为分析、智能导航、车辆共享等。安全认证与权限控制：云平台提供身份认证和权限控制服务，确保只有授权的用户或设备可以访问车联网系统，并对数据进行安全的传输和存储。 车联网系统一般包含几个重要部分。其中，主机主要用于影音娱乐，以及车辆信息显示；汽车T-Box主要用于和后台系统/手机APP互联通信，实现后台系统/手机APP的车辆信息显示与控制。
车联网中对MQTT的使用 MQTT在车联网应用中的业务场景 车辆实时监控：通过使用MQTT协议，车辆可以实时将其位置、速度、状态等信息发布到一个或多个监控中心。监控中心可以订阅这些信息并进行实时监控和分析，以提供实时的车辆位置跟踪和监控。车辆远程控制：通过使用MQTT协议，车辆可以接收来自远程控制中心的指令，并执行相应的操作，如开关车门、启动引擎、调整车辆参数等。这样可以实现远程监控和控制车辆的功能。车辆数据采集与共享：通过使用MQTT协议，车辆可以将其传感器和系统收集到的数据发布到一个或多个数据中心。数据中心可以订阅这些数据，并进行分析和共享，以支持车辆管理、故障诊断、预测维护等功能。车辆交互和通信：通过使用MQTT协议，车辆可以与其他车辆、交通设施和智能交通系统进行实时交互和通信。例如，车辆可以发布其位置和行驶意图，以提供给其他车辆和交通设施，从而实现车辆之间的协同行驶和交通流优化。 车联网体系中的车辆、手机APP端、路侧等设备端连接到车载设备T-Box， 通过MQTT接入，实现对千万量级的以上终端的并发接入能力。
MQTT在车联网应用中的优势 低能耗：车联网设备通常需要长时间运行，并且能耗要求较低。根据MQTT消息格式，消息头部最小只需要占用2个字节，达到带宽消耗最小化。开放性：目前市场上已经有了大量成熟的软件库与硬件模组，可以极大减少开发的成本，降低接入难度。可靠性：根据QoS传输质量等级，确保对有效性要求高的数据不会丢失，且有效性要求低的数据不占资源。异步通信：MQTT支持异步通信，可以在车联网应用中实现实时的消息传递。这对于需要及时响应的车联网应用来说非常重要。灵活性：根据主题名称/过滤规则，可以自由设计主题Topic，应用于大量的车联网业务场景。实时性：MQTT的会话保持和在线状态感知功能，可以提高车辆在离线状态下的消息完整性。安全性：MQTT可以通过加密和身份验证等机制来确保消息的安全传输。这对于车联网应用来说非常重要，保护车辆和用户的数据安全。 相比于其他HTTPS/TCP等私有协议，MQTT具有开放性，多平台使用等优点，适用于多种业务场景，且不受资源限制，能随意扩展以处理海量数据。因此MQTT协议顺理成章地成为最适合车联网领域的主流协议。
MQTT消息主题Topic设计 MQTT主题Topic定义 MQTT协议根据主题来转发消息。MQTT的主题是不要预先创建的，发布者发送消息到某个主题、或者订阅者订阅某个主题的时候，Broker就会自动创建这个主题。
主题Topic通配符：
正斜杠（“/”U&#43;002F）用于分隔主题树中的每个级别，并为主题名称提供层次结构，类似于URL路径。数字符号 (&#39;#&#39; U&#43;0023) 是一个通配符，可匹配主题中任意数量的级别。多级通配符代表父级和任意数量的子级。加号 (&#39;&#43;&#39; U&#43;002B) 是仅匹配一个主题级别的通配符。 主题Topic规则：
所有主题名称和主题过滤器的长度必须至少为一个字符主题名称和主题过滤器区分大小写主题名称和主题过滤器可以包含空格字符前导或尾随“/”创建不同的主题名称或主题过滤器仅包含“/”字符的主题名称或主题过滤器有效主题名称和主题过滤器不得包含空字符 (Unicode U&#43;0000) [Unicode]主题名称和主题过滤器是UTF-8编码的字符串；它们不得编码超过 65,535 字节。除了 UTF-8 编码字符串的总长度所施加的限制之外，主题名称或主题过滤器中的级别数没有限制。 车联网场景中对MQTT主题设计的应用 主动上报车辆数据：设备端T-Box通过控制器传感器等收集车辆运行数据及车况数据，例如车况运行数据、电池状态数据、车舱环境数据等，以指定频率将数据发送到平台端。此类数据可以按照上报数据的车型、车架号、业务数据类型等多个层级进行设计。 示例：/sys/product/{产品KEY}/device/{设备ID}/uplink/battery
请求上报车辆数据：当云平台需要获取车辆的最新状态数据时，例如位置信息等，可以主动下发命令到车辆端，要求上报数据。此类场景一般可以按照车架号、业务类型等层级进行主题设计。 示例：/req/product/{产品KEY}/device/{设备ID}/report/location
指令下发到车辆：用户可以在手机App中操作各种远程控制功能，例如远程启动、远程开车门、远程闪灯鸣笛等。该功能是车辆是车联网业务中最常见、最典型的业务场景。该业务场景下，由手机App发送控制命令至云平台，平台应用通过MQTT将命令下发至车辆，车辆端执行命令成功后，可选择异步发送执行结果到平台。 示例：/ord/product/{产品KEY}/device/{设备ID}/lockAllDoors
请求下发平台数据：车辆配置数据，如数据采集规则、安全访问规则，会根据实际路况或位置的不同做到动态变化的，在软件定义汽车-SDV的背景下更是如此。所以车辆侧可主动请求平台匹配最新的配置信息，以保证车辆侧和平台侧的配置信息一致。 示例：/req/tsp/notify/product/{产品KEY}/device/{设备ID}/roadSecurity
MQTT数据传输质量 MQTT QoS定义 MQTT提供了三种服务质量（QoS），在不同网络环境下保证消息的可靠性。
QoS 0：消息最多传送一次。MQTT Broker发送出一条消息后，无需关心客户端是否接收到。如果当前客户端丢失该消息，也不做任何处理。QoS 1：消息至少传送一次。包含简单的重发机制，若发送方认为消息未被成功发送或接受，会执行重发操作。但这种模式只能保证消息成功到达，但无法保证消息重复到达。QoS 2：消息只传送一次。该模式设计了复杂的重发和重复消息发现机制，保证消息能成功到达对方，并且严格控制只到达一次。 注意点1：QoS级别越高，虽然可以增加消息可靠性，但设计的消息交互模式就越复杂，同时也使资源消耗和消息时延大幅增加。所以QoS等级并非最高最优。平台和终端可以根据自己的网络级别和业务场景来选择合适的QoS。
注意点2：MQTT发布与订阅操作中的QoS是分开设置的，若双方设置的QoS等级不一致，则会下向兼容发生消费降级。发布时的QoS等级表示消息发送到MQTT Broker时使用的QoS等级，订阅时的QoS等级表示MQTT Broker向自己发送消息时使用的最大QoS等级。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/45bcc2607999d79d09973fd5913bd402/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-10T18:28:19+08:00" />
<meta property="article:modified_time" content="2023-11-10T18:28:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">车联网场景中的MQTT协议应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="V6GRv">基本概念解释</h2> 
<p> </p> 
<h3 id="k4frK">MQTT解释</h3> 
<p id="uae4d6811">        MQTT（Message Queuing Telemetry Transport）是一种轻量级、基于TCP/IP协议栈构建的异步通信，和发布-订阅模式的消息传输协议。适用于资源受限的设备和低带宽、高延迟或不稳定的网络环境。它在物联网应用中广受欢迎，能够实现传感器、执行器和其它设备之间的高效通信。MQTT已逐渐成为物联网（IoT）领域最热门的协议，也是国内外各大物联网平台最主流的传输协议，阿里云物联网平台很多设备都是通过MQTT接入。</p> 
<h3 id="oiwhk">车联网定义</h3> 
<p id="ubd2f473b">        车联网是指车辆与周围环境中的一切物体（包括其他车辆、道路基础设施、行人、交通管理系统等）之间的互联互通系统。Vehicle-to-Everything (V2X)是车联网中的一个重要概念，旨在通过交互式通信和数据共享，提高交通安全性、流量效率和驾驶体验。简单来说，V2X技术主要基于车载通信设备和传感器，通过通信技术将车辆与周围环境中的其他实体连接起来。车辆通过传感器（如雷达、摄像头、激光雷达等）采集实时数据，如车速、位置、方向、加速度等，并通过通信设备将这些数据传输到周围的实体。而运行于其中的通信协议就成为车联网系统建设的关键和核心。</p> 
<p id="u081e5667">        车联网作为一个高速发展中的物联网平台，现在很多车辆已经具备基础的车联网功能，能够实现T-Box远程升级（OTA）与部分信号的传输。随着5G时代的到来与通信技术不断进步，车联网将会以非常快的速度进入每一台车。</p> 
<p></p> 
<h4 id="ozjLA">阿里云物联网平台对车联网的支持</h4> 
<ul><li id="u013e0e97">全球亿级连接高并发架构：依靠全球2800+加速节点和亿级连接架构，车辆可根据实时位置就近接入，助力客户轻松应对全球各地百万级车辆并发稳定在线的问题。</li><li id="u79a3184c">多种车辆接入协议灵活选择：尊享型实例的云网关提供了如GB/T 32960、JT/T 808等车联网领域国标/行标的接入能力，并支持MQTT 3.1.1/5.0协议的绝大部分特性。</li><li id="u0185fb2e">车辆双向认证保障数据安全：尊享型实例的云网关支持车辆和平台间使用X.509证书双向认证，打通了阿里云数字证书产品的PCA服务，可直接选择证书进行配置，同时支持第三方证书导入认证。</li></ul> 
<p id="u130b748d"></p> 
<h4 id="avjC2">阿里云物联网平台下车联网的系统架构</h4> 
<p id="u8ee82096">        阿里云车联网系统架构通过设备端、云平台、通信模块、数据存储、数据分析与处理、业务应用和安全认证与权限控制等组成部分，实现了从设备到云端的全链路的车联网服务。该架构可以支持大规模的车辆连接和数据处理，提供高效、安全和智能的车联网解决方案。</p> 
<ul><li id="ua363db93">设备端：车载设备、传感器和智能终端等，用于采集车辆和环境数据，并通过通信模块将数据发送到云平台。</li><li id="uf955aa38">云平台：阿里云提供的云计算平台，承载车联网系统的核心功能。云平台提供设备管理、数据存储、数据分析、业务逻辑处理、安全认证等服务。</li><li id="u99895bc6">通信模块：位于设备端和云平台之间，负责设备与云平台之间的数据传输和通信。通信模块可以使用不同的通信协议，如MQTT、HTTPS等。</li><li id="udf4f5442">数据存储：云平台提供的高可靠、可扩展的数据存储服务，用于存储车辆和环境数据。阿里云提供的存储服务包括云数据库（RDS）、对象存储（OSS）等。</li><li id="uf185f217">数据分析与处理：云平台通过大数据分析和人工智能技术，对车辆和环境数据进行实时和离线分析，提取有价值的信息和洞察，并支持业务逻辑的处理。</li><li id="u27c9faa6">业务应用：基于云平台和数据分析结果，开发应用程序和服务，如车辆远程监控、诊断、驾驶行为分析、智能导航、车辆共享等。</li><li id="u1460b909">安全认证与权限控制：云平台提供身份认证和权限控制服务，确保只有授权的用户或设备可以访问车联网系统，并对数据进行安全的传输和存储。</li></ul> 
<p id="ub5732851">        车联网系统一般包含几个重要部分。其中，主机主要用于影音娱乐，以及车辆信息显示；汽车T-Box主要用于和后台系统/手机APP互联通信，实现后台系统/手机APP的车辆信息显示与控制。</p> 
<p id="uf49827db"></p> 
<p class="img-center"><img alt="" height="1200" id="vcPej" src="https://images2.imgbox.com/78/73/A1wtkgSQ_o.png" width="1200"></p> 
<p id="ua9b7866d"></p> 
<h2 id="tXkuz">车联网中对MQTT的使用</h2> 
<p></p> 
<h3 id="qhT4k">MQTT在车联网应用中的业务场景</h3> 
<ul><li id="u622339e4">车辆实时监控：通过使用MQTT协议，车辆可以实时将其位置、速度、状态等信息发布到一个或多个监控中心。监控中心可以订阅这些信息并进行实时监控和分析，以提供实时的车辆位置跟踪和监控。</li><li id="uef583e45">车辆远程控制：通过使用MQTT协议，车辆可以接收来自远程控制中心的指令，并执行相应的操作，如开关车门、启动引擎、调整车辆参数等。这样可以实现远程监控和控制车辆的功能。</li><li id="ue68460c6">车辆数据采集与共享：通过使用MQTT协议，车辆可以将其传感器和系统收集到的数据发布到一个或多个数据中心。数据中心可以订阅这些数据，并进行分析和共享，以支持车辆管理、故障诊断、预测维护等功能。</li><li id="ubc15af74">车辆交互和通信：通过使用MQTT协议，车辆可以与其他车辆、交通设施和智能交通系统进行实时交互和通信。例如，车辆可以发布其位置和行驶意图，以提供给其他车辆和交通设施，从而实现车辆之间的协同行驶和交通流优化。</li></ul> 
<p id="u6066b714">        车联网体系中的车辆、手机APP端、路侧等设备端连接到车载设备T-Box， 通过MQTT接入，实现对千万量级的以上终端的并发接入能力。</p> 
<p id="u4c1b8089"></p> 
<p class="img-center"><img alt="" height="1148" id="uc2a1e5d3" src="https://images2.imgbox.com/c8/ee/cf7xHzw6_o.png" width="1200"></p> 
<p id="u559d37a8"></p> 
<h3 id="PsQR5">MQTT在车联网应用中的优势</h3> 
<ul><li id="ue390b59c">低能耗：车联网设备通常需要长时间运行，并且能耗要求较低。根据MQTT消息格式，消息头部最小只需要占用2个字节，达到带宽消耗最小化。</li><li id="u652bf289">开放性：目前市场上已经有了大量成熟的软件库与硬件模组，可以极大减少开发的成本，降低接入难度。</li><li id="u2e33d288">可靠性：根据QoS传输质量等级，确保对有效性要求高的数据不会丢失，且有效性要求低的数据不占资源。</li><li id="uf13d5bd5">异步通信：MQTT支持异步通信，可以在车联网应用中实现实时的消息传递。这对于需要及时响应的车联网应用来说非常重要。</li><li id="u9833b99c">灵活性：根据主题名称/过滤规则，可以自由设计主题Topic，应用于大量的车联网业务场景。</li><li id="u6ded7696">实时性：MQTT的会话保持和在线状态感知功能，可以提高车辆在离线状态下的消息完整性。</li><li id="u4d6c658e">安全性：MQTT可以通过加密和身份验证等机制来确保消息的安全传输。这对于车联网应用来说非常重要，保护车辆和用户的数据安全。</li></ul> 
<p id="uf48648e6">        相比于其他HTTPS/TCP等私有协议，MQTT具有开放性，多平台使用等优点，适用于多种业务场景，且不受资源限制，能随意扩展以处理海量数据。因此MQTT协议顺理成章地成为最适合车联网领域的主流协议。</p> 
<p id="u1dc4c8d1"></p> 
<h3 id="HQvLS">MQTT消息主题Topic设计</h3> 
<h4 id="EJX2S">MQTT主题Topic定义</h4> 
<p id="u89832045">        MQTT协议根据主题来转发消息。MQTT的主题是不要预先创建的，发布者发送消息到某个主题、或者订阅者订阅某个主题的时候，Broker就会自动创建这个主题。</p> 
<p id="ucc7606e4"><strong>主题Topic通配符：</strong></p> 
<ul><li id="uaa8137a6">正斜杠（“/”U+002F）用于分隔主题树中的每个级别，并为主题名称提供层次结构，类似于URL路径。</li><li id="u258db691">数字符号 ('#' U+0023) 是一个通配符，可匹配主题中任意数量的级别。多级通配符代表父级和任意数量的子级。</li><li id="ue5b592a5">加号 ('+' U+002B) 是仅匹配一个主题级别的通配符。</li></ul> 
<p id="u5ad12cfc"><strong>主题Topic规则：</strong></p> 
<ul><li id="u82d5879f">所有主题名称和主题过滤器的长度必须至少为一个字符</li><li id="uacf57d61">主题名称和主题过滤器区分大小写</li><li id="u1fc57fda">主题名称和主题过滤器可以包含空格字符</li><li id="u31409815">前导或尾随“/”创建不同的主题名称或主题过滤器</li><li id="u7df63b89">仅包含“/”字符的主题名称或主题过滤器有效</li><li id="u55a0e273">主题名称和主题过滤器不得包含空字符 (Unicode U+0000) [Unicode]</li><li id="uc249ae50">主题名称和主题过滤器是UTF-8编码的字符串；它们不得编码超过 65,535 字节。</li><li id="uedbee883">除了 UTF-8 编码字符串的总长度所施加的限制之外，主题名称或主题过滤器中的级别数没有限制。</li></ul> 
<p id="ued104f4b"></p> 
<h4 id="NURCK">车联网场景中对MQTT主题设计的应用</h4> 
<p id="u991f1147"></p> 
<p class="img-center"><img alt="" height="796" id="u9d879eba" src="https://images2.imgbox.com/e9/6a/yLE8KsWi_o.png" width="1200"></p> 
<ul><li id="uaff1c165">主动上报车辆数据：设备端T-Box通过控制器传感器等收集车辆运行数据及车况数据，例如车况运行数据、电池状态数据、车舱环境数据等，以指定频率将数据发送到平台端。此类数据可以按照上报数据的车型、车架号、业务数据类型等多个层级进行设计。</li></ul> 
<p id="uacb42c56">        示例：/sys/product/{产品KEY}/device/{设备ID}/uplink/battery</p> 
<ul><li id="uc1b0dbf2">请求上报车辆数据：当云平台需要获取车辆的最新状态数据时，例如位置信息等，可以主动下发命令到车辆端，要求上报数据。此类场景一般可以按照车架号、业务类型等层级进行主题设计。</li></ul> 
<p id="uae58ffa9">        示例：/req/product/{产品KEY}/device/{设备ID}/report/location</p> 
<ul><li id="u89a32ca0">指令下发到车辆：用户可以在手机App中操作各种远程控制功能，例如远程启动、远程开车门、远程闪灯鸣笛等。该功能是车辆是车联网业务中最常见、最典型的业务场景。该业务场景下，由手机App发送控制命令至云平台，平台应用通过MQTT将命令下发至车辆，车辆端执行命令成功后，可选择异步发送执行结果到平台。</li></ul> 
<p id="ubc509111">        示例：/ord/product/{产品KEY}/device/{设备ID}/lockAllDoors</p> 
<ul><li id="u57b973e0">请求下发平台数据：车辆配置数据，如数据采集规则、安全访问规则，会根据实际路况或位置的不同做到动态变化的，在软件定义汽车-SDV的背景下更是如此。所以车辆侧可主动请求平台匹配最新的配置信息，以保证车辆侧和平台侧的配置信息一致。</li></ul> 
<p id="uf383744e">        示例：/req/tsp/notify/product/{产品KEY}/device/{设备ID}/roadSecurity</p> 
<p id="ud1172fe2"></p> 
<h3 id="j4WKM">MQTT数据传输质量</h3> 
<p></p> 
<h4 id="Uf7Mf">MQTT QoS定义</h4> 
<p id="u1cb5fcce">MQTT提供了三种服务质量（QoS），在不同网络环境下保证消息的可靠性。</p> 
<ul><li id="u9e6b5524">QoS 0：消息最多传送一次。MQTT Broker发送出一条消息后，无需关心客户端是否接收到。如果当前客户端丢失该消息，也不做任何处理。</li><li id="ucb9276f3">QoS 1：消息至少传送一次。包含简单的重发机制，若发送方认为消息未被成功发送或接受，会执行重发操作。但这种模式只能保证消息成功到达，但无法保证消息重复到达。</li><li id="u7f54c91e">QoS 2：消息只传送一次。该模式设计了复杂的重发和重复消息发现机制，保证消息能成功到达对方，并且严格控制只到达一次。</li></ul> 
<p id="u2b3b1311">        注意点1：QoS级别越高，虽然可以增加消息可靠性，但设计的消息交互模式就越复杂，同时也使资源消耗和消息时延大幅增加。所以QoS等级并非最高最优。平台和终端可以根据自己的网络级别和业务场景来选择合适的QoS。</p> 
<p id="u4e18d1a6">        注意点2：MQTT发布与订阅操作中的QoS是分开设置的，若双方设置的QoS等级不一致，则会下向兼容发生消费降级。发布时的QoS等级表示消息发送到MQTT Broker时使用的QoS等级，订阅时的QoS等级表示MQTT Broker向自己发送消息时使用的最大QoS等级。</p> 
<p id="u22f9966a"></p> 
<h4 id="HHEhI">车联网场景中选择MQTT QoS建议方案</h4> 
<p id="ud567e726"><strong>QoS 0：可以接受消息偶尔丢失的场景。</strong></p> 
<p id="ue9dfd5c0">        该业务场景为非必须，如音乐播放，天气预报，等与娱乐相关的多媒体服务数据。即使偶尔有丢失也不影响业务使用。</p> 
<p id="u1e0f71bf"><strong>QoS 1：消息</strong><strong>最少发送一次，保证消息不丢失，但可能会重复</strong><strong>。</strong></p> 
<p id="u89fe7e93">        该业务使用于车联网大部分场景，对消息实时性要求高，且对资源性能也有要求，如控制车辆命令，车辆行驶中的数据上报、以及交通安全管控类数据，和道路安全相关的数据下发。但也不接受占用大量的系统资源做消息去重。</p> 
<p id="ufdd270f1"><strong>QoS 2：消息不可丢失，且不可重复，对数据完整性与及时性要求较高的场景。</strong></p> 
<p id="uf672810a">        该业务场景在车联网使用中并不多见，只能是具体情况具体分析。</p> 
<p id="u6f881125"></p> 
<h2 id="S31jt">写在最后</h2> 
<p id="ue5607de2">        从国家政策层面来看，2015年起就开始布局智慧交通，自2020年以来，有关智能网联汽车的政策更是密集推出。按照当前的政策指引，预计在2025年，我国将会实现有条件的自动驾驶智能汽车规模化生产，在2035年基本实现交通强国的战略目标。同时，有关智能汽车和车联网的相关技术标准体系也在不断完善的过程中。</p> 
<p id="udc24ba4f">        作为一个发展了二十多年的标准消息传输协议，MQTT的重要性正在持续增长。随着物联网在各行业被越来越广泛地应用，MQTT协议也在不断发展以应对新的挑战，满足更低延迟的连接、更便捷的MQTT服务部署、复杂场景或大规模物联网应用下灵活管理以及智能设备接入的需求。OASIS现在已经发布了官方的MQTT v5.0标准， 这对于已经为物联网（IoT）所用的消息传输协议来说，这是一个改进和功能的巨大飞跃。作为庞大物联网的神经系统，在2023年及更远的未来，MQTT必将在车联网等关键领域中发挥重要作用。</p> 
<p id="u63b61d3e"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f0dcca0fda4ae3546854ac897e00cb6e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">npm install 报错 chromedriver 安装失败的解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c010591abc8bb2f9b73bcc94a5617618/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Opencv图像处理总结（持续更新）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>