<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决ArcMap中栅格的统计问题，提高工作效率 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="解决ArcMap中栅格的统计问题，提高工作效率" />
<meta property="og:description" content="1 问题描述 针对下载或处理得到的栅格图，如何进一步的提取分析栅格数据是关键？本次解决的问题是：根据技术要求，将栅格数据按照某一分类方法进行4分类，需要提取斜坡单元内某一类栅格属性最多的值作为该单元的最终分类结果。
2 用到的工具 ArcMap&#43;Excel
3 转换思想 统计分类值数最多作为分类结果，可以统计分类面积的大小，到达相同的效果
4 处理过程 4.1 将栅格数据转换为矢量“面” 4.1.1 栅格重分类 栅格一般是连续值，需要根据分类标准，对栅格数据重分类。如果直接转矢量“面”会报错，提示：The input is not within the defined domain.ERROR 000889:Invalid field type.（输入的图层没有定义范围。错误000889：无效的字段类型。）
点击Spatial Analyst Tools，选择Reclass，双击Reclassify，在classify可以选择分类方法和个数。点击OK。
4.1.2 栅格转矢量 依此选择Conversion Tools、From Raster、Raster to Polygon，这时工具不再提示错误。
4.2 相交分析 依此选择：转换得到的面与要统计的矢量面，进行相交分析，得到两个图层的相交面，查看属性表信息，有对应的分类结果和面积。
4.3 图斑打散 得到的相交图层，需要进行打散操作，在开始编辑状态下，可以发现打散后，图斑个数由30变成39个。
5 使用Excel统计 5.1 数据透视表工具 在Excel中选择插入，点击数据透视表，行表示斜坡单元的编号，列表示分类结果值，求和值表示落在某个斜坡单元内，各类的面积之和。
5.2 使用INDEX（）函数，返回引用 =INDEX($B$4:$E$4,MATCH(MAX(B5:E5),B5:E5,0))，得到分类结果。
5.3 在ArcMap中Join链接分类结果 将打开的dbf另存为excel，存为Excel 97-2003 工作薄（*.xls）格式
根据唯一值进行属性表链接，比如斜坡单元编号，将分类结果进行显示。右击图层，依此选择Joins and Relates、Join。
选择刚才保存的（*.xls）文件，找到对应的唯一值“value”，确定。属性表里已经链接好。
根据分类结果进行符号显示，得到最终的分类结果。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4c96e2d894d6fa0d46f9ba11ea5fbfbb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-24T17:34:20+08:00" />
<meta property="article:modified_time" content="2022-05-24T17:34:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决ArcMap中栅格的统计问题，提高工作效率</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1 问题描述</h2> 
<p>针对下载或处理得到的栅格图，如何进一步的提取分析栅格数据是关键？本次解决的问题是：<strong>根据技术要求，将栅格数据按照某一分类方法进行4分类，需要提取斜坡单元内某一类栅格属性最多的值作为该单元的最终分类结果。</strong></p> 
<p><img alt="541754416ad749b98a894c43096e2ac4.png" src="https://images2.imgbox.com/e2/04/oGccJW9D_o.png"></p> 
<h2>2 用到的工具</h2> 
<p>ArcMap+Excel</p> 
<h3>3 转换思想</h3> 
<p>统计分类值数最多作为分类结果，可以统计分类面积的大小，到达相同的效果</p> 
<h2>4 处理过程</h2> 
<h3>4.1 将栅格数据转换为矢量“面”</h3> 
<h4>4.1.1 栅格重分类</h4> 
<p>栅格一般是连续值，需要根据分类标准，对栅格数据重分类。如果直接转矢量“面”会报错，提示：The input is not within the defined domain.ERROR 000889:Invalid field type.（输入的图层没有定义范围。错误000889：无效的字段类型。）</p> 
<p><img alt="f64656c88c144d9f96b316b23dfc85d3.png" src="https://images2.imgbox.com/e1/79/xx18Hn1f_o.png"></p> 
<p></p> 
<p>        点击Spatial Analyst Tools，选择Reclass，双击Reclassify，在classify可以选择分类方法和个数。点击OK。</p> 
<p><img alt="4d6d2e9f79f543fd9e1d0422d596abda.png" src="https://images2.imgbox.com/7e/6d/ggNDmE8H_o.png"></p> 
<p><img alt="ec38560609ce4280896f7d2838a3c2bd.png" class="right" src="https://images2.imgbox.com/66/1c/1iAMvpD5_o.png"><img alt="55b830fa4d6848058facd2b157514966.png" class="left" src="https://images2.imgbox.com/2e/28/hJHxhkh0_o.png"></p> 
<h3> 4.1.2 栅格转矢量</h3> 
<p>依此选择Conversion Tools、From Raster、Raster to Polygon，这时工具不再提示错误。</p> 
<p><img alt="d9448904a04f491c9daa7133c24bd30b.png" src="https://images2.imgbox.com/b4/b1/hS6u7t0n_o.png">        <img alt="70a739367fbe4c538cfde2ccfcb29c41.png" src="https://images2.imgbox.com/d4/8c/ZZfPEjJe_o.png"></p> 
<h3>4.2 相交分析</h3> 
<p>依此选择：转换得到的面与要统计的矢量面，进行相交分析，得到两个图层的相交面，查看属性表信息，有对应的分类结果和面积。</p> 
<p><img alt="4398053af1de40df82af932eab694231.png" src="https://images2.imgbox.com/e2/55/V8uxnngz_o.png"></p> 
<p><img alt="99800ad513cb48f58b51cca610ad9958.png" src="https://images2.imgbox.com/39/6e/JB9OY6Tb_o.png">           <img alt="3d9a4b4f45df48ff95b92570b61f765a.png" src="https://images2.imgbox.com/6b/d1/3TdmAVTt_o.png"></p> 
<p></p> 
<p></p> 
<p><img alt="91f44f4718dc4abe9fa493a7192e8020.png" src="https://images2.imgbox.com/f5/19/JGN7heCJ_o.png"></p> 
<h3><img alt="ea03a4c32e9243288f69590714c89e4e.png" src="https://images2.imgbox.com/82/0b/6LemvVQq_o.png">4.3 图斑打散 </h3> 
<p>得到的相交图层，需要进行打散操作，在开始编辑状态下，可以发现打散后，图斑个数由30变成39个。</p> 
<p><img alt="82811c5c7f3643f3b8a635dce2686a53.png" src="https://images2.imgbox.com/0d/28/AASeC6Wh_o.png"><img alt="786df600920d450f81854426c70ddcea.png" src="https://images2.imgbox.com/76/ef/qDpIFidI_o.png"><img alt="db17205fbbc74ae6ad89f0ddf0dc40df.png" src="https://images2.imgbox.com/1c/f1/P17hRK9X_o.png"></p> 
<h2>5 使用Excel统计</h2> 
<h3>5.1 数据透视表工具</h3> 
<p>在Excel中选择插入，点击数据透视表，<strong>行表示</strong>斜坡单元的编号，<strong>列表示</strong>分类结果值，<strong>求和值表示</strong>落在某个斜坡单元内，各类的面积之和。</p> 
<p><img alt="3363be53662b4de7ad15da695b5b2dc7.png" src="https://images2.imgbox.com/34/42/4ytklm5r_o.png"><img alt="f11c6a348c914740aa78801b48d973ad.png" src="https://images2.imgbox.com/b6/23/g6YEbzEt_o.png"></p> 
<h3>5.2 使用INDEX（）函数，返回引用</h3> 
<p>=INDEX($B$4:$E$4,MATCH(MAX(B5:E5),B5:E5,0))，得到分类结果。</p> 
<p><img alt="e10b41e3e67a4746bdfeeead6dff610c.png" src="https://images2.imgbox.com/53/a6/u3D0hydN_o.png"></p> 
<h3> 5.3 在ArcMap中Join链接分类结果</h3> 
<p>将打开的dbf另存为excel，存为Excel 97-2003 工作薄（*.xls）格式</p> 
<p><img alt="5864c4e181e74e2b94402b2ced7b9134.png" src="https://images2.imgbox.com/d0/90/l8NEvLNa_o.png"></p> 
<p> 根据唯一值进行属性表链接，比如斜坡单元编号，将分类结果进行显示。右击图层，依此选择Joins and Relates、Join。</p> 
<p><img alt="a916db903d344d10894b26cbb3bad290.png" src="https://images2.imgbox.com/19/96/0DqCEbvI_o.png"></p> 
<p>选择刚才保存的（*.xls）文件，找到对应的唯一值“value”，确定。属性表里已经链接好。</p> 
<p><img alt="27e031b68e1c4b1c90015128294210ee.png" src="https://images2.imgbox.com/06/84/zh9RUOE3_o.png">  <img alt="e1e09a470be44a189b8a331458342d05.png" src="https://images2.imgbox.com/e6/2c/3ePyF2g3_o.png"></p> 
<p>根据分类结果进行符号显示，得到最终的分类结果。</p> 
<p><img alt="628c39d2af054d0781bc88f877caa7c5.png" src="https://images2.imgbox.com/f5/3d/MfumMu5y_o.png"></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/44d7bb76b0ff49d6519cffd794e4e258/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PowerMock(一)：PowerMock的基本使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/78fd7739eb97787a3f37abcb7ddb258a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">多个事务并发的场景及可能遇到的问题及解决方法（一）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>