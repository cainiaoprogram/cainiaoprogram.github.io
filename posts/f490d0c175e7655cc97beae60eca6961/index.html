<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>GCC编译源码出错error: Building GCC requires GMP 4.2&#43;, MPFR 2.3.1&#43; and MPC 0.8. - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="GCC编译源码出错error: Building GCC requires GMP 4.2&#43;, MPFR 2.3.1&#43; and MPC 0.8." />
<meta property="og:description" content="使用gem5时需要更换内核，但是编译内核需要低版本的GCC。原系统gcc版本是5.6.0，需要更换成gcc4.4.0.
在编译安装gcc过程中出错，error: Building GCC requires GMP 4.2&#43;, MPFR 2.3.1&#43; and MPC 0.8.0
，出错原因是需要这些库的支持，所以解决方法就是寻找相应的源码库安装即可，下面是解决方法。
首先下载GMP、MPC、MPFR源码库： 下载GMP 直接使用命令： wget ftp://ftp.gnu.org/gnu/gmp/gmp-5.0.1.tar.bz2；即可下载到本地。下载MPC 打开http://www.multiprecision.org/mpc，下载mpc-1.1.0.tar.gz
下载MPFR http://ftp.gnu.org/gnu/mpfr/； 下载mpfr-3.1.4.tar.xz
安装各个库。
注意安装顺序，因为依赖问题，所以首先安装GMP，然后是MPFR,然后是MPC 下面是每一个库的安装过程： 1、安装GMP
1. 创建安装目录： mkdir /opt/gmp5.0.1 2. 解压缩源码包 tar -jxvf gmp-5.0.1.tar.bz2 3. 进入源码文件夹，执行配置 cd gmp-5.0.1 ./configure --prefix=/opt/gmp-5.0.1 --build=x86_64-linux sudo make &amp;&amp;　make install 在安装GMP过程会出现一些小错误，不影响最后的编译。
2、安装MPFR
mkdir /opt/mpfr-3.1.4 tar -zxvf mpfr-3.1.4.tar.xz cd mpfr-3.1.4 ./configure --prefix=/opt/mpfr-3.1.4 --with-gmp=/opt/gmp-5.0.1 --build=x86_64-linux sudo make &amp;&amp; make install 3、安装MPC
mkdir /opt/mpc-1.1.0 tar -zxvf mpc-1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f490d0c175e7655cc97beae60eca6961/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-02T19:49:08+08:00" />
<meta property="article:modified_time" content="2018-07-02T19:49:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">GCC编译源码出错error: Building GCC requires GMP 4.2&#43;, MPFR 2.3.1&#43; and MPC 0.8.</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>使用gem5时需要更换内核，但是编译内核需要低版本的GCC。原系统gcc版本是5.6.0，需要更换成gcc4.4.0.</p> 
<p>在编译安装gcc过程中出错，error: Building GCC requires GMP 4.2+, MPFR 2.3.1+ and MPC 0.8.0</p> 
<p>，出错原因是需要这些库的支持，所以解决方法就是寻找相应的源码库安装即可，下面是解决方法。</p> 
<hr> 
<h6 id="首先下载gmpmpcmpfr源码库">首先下载GMP、MPC、MPFR源码库：</h6> 
<ol><li>下载GMP <br> 直接使用命令： <br> <code>wget ftp://ftp.gnu.org/gnu/gmp/gmp-5.0.1.tar.bz2</code>；即可下载到本地。</li><li><p>下载MPC <br> 打开<a href="http://www.multiprecision.org/mpc" rel="nofollow">http://www.multiprecision.org/mpc</a>，下载mpc-1.1.0.tar.gz</p></li><li><p>下载MPFR <br> <a href="http://ftp.gnu.org/gnu/mpfr/" rel="nofollow">http://ftp.gnu.org/gnu/mpfr/</a>； 下载mpfr-3.1.4.tar.xz</p></li></ol> 
<p>安装各个库。</p> 
<h6 id="注意安装顺序因为依赖问题所以首先安装gmp然后是mpfr然后是mpc">注意安装顺序，因为依赖问题，所以首先安装GMP，然后是MPFR,然后是MPC</h6> 
<hr> 
<h6 id="下面是每一个库的安装过程">下面是每一个库的安装过程：</h6> 
<p>1、安装GMP</p> 
<pre><code>1. 创建安装目录：
</code></pre> 
<pre class="prettyprint"><code class=" hljs perl">      <span class="hljs-keyword">mkdir</span>   /opt/gmp5.<span class="hljs-number">0</span>.<span class="hljs-number">1</span></code></pre> 
<pre><code>2. 解压缩源码包
</code></pre> 
<pre class="prettyprint"><code class=" hljs avrasm">       tar -jxvf gmp-<span class="hljs-number">5.0</span><span class="hljs-number">.1</span><span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.bz</span>2</code></pre> 
<pre><code>3. 进入源码文件夹，执行配置
</code></pre> 
<pre class="prettyprint"><code class=" hljs bash">        <span class="hljs-built_in">cd</span> gmp-<span class="hljs-number">5.0</span>.<span class="hljs-number">1</span>
        ./configure --prefix=/opt/gmp-<span class="hljs-number">5.0</span>.<span class="hljs-number">1</span>  --build=x86_64-linux
        <span class="hljs-built_in">sudo</span> make &amp;&amp;　make install</code></pre> 
<p>在安装GMP过程会出现一些小错误，不影响最后的编译。</p> 
<p>2、安装MPFR</p> 
<pre class="prettyprint"><code class=" hljs lasso">     mkdir   /opt/mpfr<span class="hljs-subst">-</span><span class="hljs-number">3.1</span><span class="hljs-number">.4</span>
     tar <span class="hljs-attribute">-zxvf</span> mpfr<span class="hljs-subst">-</span><span class="hljs-number">3.1</span><span class="hljs-number">.4</span><span class="hljs-built_in">.</span>tar<span class="hljs-built_in">.</span>xz
     cd mpfr<span class="hljs-subst">-</span><span class="hljs-number">3.1</span><span class="hljs-number">.4</span>                     
     <span class="hljs-built_in">.</span>/configure <span class="hljs-subst">--</span>prefix<span class="hljs-subst">=</span>/opt/mpfr<span class="hljs-subst">-</span><span class="hljs-number">3.1</span><span class="hljs-number">.4</span>  <span class="hljs-subst">--</span><span class="hljs-keyword">with</span><span class="hljs-attribute">-gmp</span><span class="hljs-subst">=</span>/opt/gmp<span class="hljs-subst">-</span><span class="hljs-number">5.0</span><span class="hljs-number">.1</span>  <span class="hljs-subst">--</span>build<span class="hljs-subst">=</span>x86_64<span class="hljs-attribute">-linux</span>
     sudo make <span class="hljs-subst">&amp;&amp;</span> make install</code></pre> 
<p>3、安装MPC</p> 
<pre class="prettyprint"><code class=" hljs lasso">    mkdir   /opt/mpc<span class="hljs-subst">-</span><span class="hljs-number">1.1</span><span class="hljs-number">.0</span>
    tar <span class="hljs-attribute">-zxvf</span>  mpc<span class="hljs-subst">-</span><span class="hljs-number">1.1</span><span class="hljs-number">.0</span><span class="hljs-built_in">.</span>tar<span class="hljs-built_in">.</span>gz
    cd mpc<span class="hljs-subst">-</span><span class="hljs-number">1.1</span><span class="hljs-number">.0</span>                     
    <span class="hljs-built_in">.</span>/configure <span class="hljs-subst">--</span>prefix<span class="hljs-subst">=</span>/opt/mpc<span class="hljs-subst">-</span><span class="hljs-number">1.1</span><span class="hljs-number">.0</span>  <span class="hljs-subst">--</span><span class="hljs-keyword">with</span><span class="hljs-attribute">-gmp</span><span class="hljs-subst">=</span>/opt/gmp<span class="hljs-subst">-</span><span class="hljs-number">5.0</span><span class="hljs-number">.1</span> <span class="hljs-attribute">-with</span><span class="hljs-attribute">-mpfr</span><span class="hljs-subst">=</span>/opt/mpfr<span class="hljs-subst">-</span><span class="hljs-number">3.1</span><span class="hljs-number">.4</span>  <span class="hljs-subst">--</span>build<span class="hljs-subst">=</span>x86_64<span class="hljs-attribute">-linux</span>
    sudo make <span class="hljs-subst">&amp;&amp;</span> make install</code></pre> 
<p>4、配置刚刚安装好的库路径 <br> 配置好如上的过程，就可以接着编译安装gcc了。</p> 
<pre class="prettyprint"><code class=" hljs lasso">    export LD_LIBRARY_PATH<span class="hljs-subst">=</span>/opt/gmp<span class="hljs-subst">-</span><span class="hljs-number">5.0</span><span class="hljs-number">.1</span>/lib:/opt/mpfr<span class="hljs-subst">-</span><span class="hljs-number">3.1</span><span class="hljs-number">.4</span>/lib<span class="hljs-subst">/</span>:/opt/mpc<span class="hljs-subst">-</span><span class="hljs-number">1.1</span><span class="hljs-number">.0</span>:<span class="hljs-variable">$LD_LIBRARY_PATH</span> 
    tar <span class="hljs-attribute">-jxvf</span>  gcc<span class="hljs-subst">-</span><span class="hljs-number">4.4</span><span class="hljs-number">.0</span><span class="hljs-built_in">.</span>tar<span class="hljs-built_in">.</span>bz2
    mkdir /opt/gcc<span class="hljs-subst">-</span><span class="hljs-number">4.4</span><span class="hljs-number">.0</span>
    cd gcc<span class="hljs-subst">-</span><span class="hljs-number">4.4</span><span class="hljs-number">.0</span>
    <span class="hljs-built_in">.</span>/configure <span class="hljs-subst">--</span>prefix<span class="hljs-subst">=</span>/opt/gcc<span class="hljs-subst">-</span><span class="hljs-number">4.4</span><span class="hljs-number">.0</span>  <span class="hljs-subst">--</span>enable<span class="hljs-attribute">-threads</span><span class="hljs-subst">=</span>posix <span class="hljs-subst">--</span>disable<span class="hljs-attribute">-checking</span> <span class="hljs-subst">--</span>disable<span class="hljs-attribute">-multilib</span> <span class="hljs-subst">--</span>enable<span class="hljs-attribute">-languages</span><span class="hljs-subst">=</span>c,c<span class="hljs-subst">++</span> <span class="hljs-subst">--</span><span class="hljs-keyword">with</span><span class="hljs-attribute">-gmp</span><span class="hljs-subst">=</span>/opt/gmp<span class="hljs-subst">-</span><span class="hljs-number">5.0</span><span class="hljs-number">.1</span> <span class="hljs-subst">--</span><span class="hljs-keyword">with</span><span class="hljs-attribute">-mpfr</span><span class="hljs-subst">=</span>/opt/mpfr<span class="hljs-subst">-</span><span class="hljs-number">3.1</span><span class="hljs-number">.4</span> <span class="hljs-subst">--</span><span class="hljs-keyword">with</span><span class="hljs-attribute">-mpc</span><span class="hljs-subst">=</span>/opt/mpc<span class="hljs-subst">-</span><span class="hljs-number">1.1</span><span class="hljs-number">.0</span> <span class="hljs-subst">--</span>build<span class="hljs-subst">=</span>x86_64<span class="hljs-attribute">-linux</span>
    sudo make <span class="hljs-attribute">-j4</span> <span class="hljs-subst">&amp;&amp;</span> make install</code></pre> 
<p>5、经过漫长的等待，最后验证 </p> 
<pre class="prettyprint"><code class=" hljs lasso">     /opt/gcc<span class="hljs-subst">-</span><span class="hljs-number">4.4</span><span class="hljs-number">.0</span>/bin/gcc <span class="hljs-attribute">-v</span></code></pre> 
<hr> 
<p>似乎没成功！伤心了！ <br> 不过有另一种方法，不要着急！！！ <br> 见<a href="https://blog.csdn.net/jasonLee_lijiaqi/article/details/80889459">这一篇博客</a>！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b4703b964277b9a9e472618d8adbdbd8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SAS 对单个数据集的处理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4bfee3a13295e4b1d56454f8940b483d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux （乌班图）防火墙配置 ufw-iptables</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>