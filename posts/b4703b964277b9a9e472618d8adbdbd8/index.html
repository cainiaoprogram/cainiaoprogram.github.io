<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SAS 对单个数据集的处理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SAS 对单个数据集的处理" />
<meta property="og:description" content="-- 查询 SAS 已安装模块
proc setinit noalias;
run;
在DATA中可以使用SET、MERGE、MODIFY或UPDATE语句对数据集进行加工。
a、选取部分变量：
1、在 SET 语句中使用 data work.shos_part1;
set sashelp.shoes (keep=Product Sales)
run;
当然使用 DROP= 可以起到同样的效果。
2、在数据集选项中使用 KEEP= 或 DROP=
data work.shos_part1 (keep=Product Sales)；
run;
*两种方法虽然起到的效果是一样的，但由于在 SET语句中使用 KEEP= 是把所选定的变量读入PDV,而 数据集选项 KEEP= 语句是把所有的变量读入PDV，在读取数据进行筛选，所以在进行大规模数据运算时， SET语句 KEEP= 选项方法效率更高。
3、使用 KEEP 或 DROP 语句
data work.shos_part1;
set sashelp.shoes;
keep Product Sales;
run;
drop 语句同样也行。
b、 SAS 操作符：
运算操作符
比较操作符
逻辑操作符
其他操作符
c、选取部分观测：
在建立新数据集时，有以下两种方式可以通过已有的数据集选取适合的观测记录到新数据集：
1、只选择满足条件的观测
2、删除不符合条件的挂测
1、使用 DELETE语句删除不满足条件观测：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b4703b964277b9a9e472618d8adbdbd8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-07-02T18:04:09+08:00" />
<meta property="article:modified_time" content="2018-07-02T18:04:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SAS 对单个数据集的处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p><strong>-- 查询 SAS 已安装模块</strong></p> 
<p>proc setinit noalias;</p> 
<p>run;</p> 
<p><br></p> 
<p>在DATA中可以使用SET、MERGE、MODIFY或UPDATE语句对数据集进行加工。</p> 
<p><strong><span style="font-size:18px;">a、选取部分变量：</span></strong></p> 
<p>    1、在 SET 语句中使用 <br></p> 
<p>    data work.shos_part1;</p> 
<p>        set sashelp.shoes (keep=Product Sales)</p> 
<p>    run;</p> 
<p>    当然使用 DROP= 可以起到同样的效果。</p> 
<p>    2、在数据集选项中使用 KEEP= 或 DROP=<br></p> 
<p>    data work.shos_part1 (keep=Product Sales)；<br></p> 
<p>    run;<br></p> 
<p>*两种方法虽然起到的效果是一样的，但由于在 SET语句中使用 KEEP= 是把所选定的变量读入PDV,而 数据集选项 KEEP= 语句是把所有的变量读入PDV，在读取数据进行筛选，所以在进行大规模数据运算时， SET语句 KEEP= 选项方法效率更高。<br></p> 
<p>    3、使用 KEEP 或 DROP 语句<br></p> 
<p>    data work.shos_part1;<br></p> 
<p>        set sashelp.shoes;<br></p> 
<p>        keep Product Sales;<br></p> 
<p>    run;<br></p> 
<p>    drop 语句同样也行。</p> 
<p><br></p> 
<p><strong><span style="font-size:18px;">b、 SAS 操作符：</span></strong></p> 
<p>    运算操作符<br></p> 
<p><img src="https://images2.imgbox.com/9a/89/un3FFCZH_o.png" alt=""><br></p> 
<p>    比较操作符<br></p> 
<p><img src="https://images2.imgbox.com/15/85/W1JTqkLc_o.png" alt=""><br></p> 
<p>    逻辑操作符<br></p> 
<p><img src="https://images2.imgbox.com/51/91/yqHes9Dl_o.png" alt=""><br></p> 
<p>    其他操作符<br></p> 
<p><img src="https://images2.imgbox.com/07/2e/j1lz7ENt_o.png" alt=""><br></p> 
<p><strong><span style="font-size:18px;">c、选取部分观测：</span></strong></p> 
<p>    在建立新数据集时，有以下两种方式可以通过已有的数据集选取适合的观测记录到新数据集：<br></p> 
<p>        1、只选择满足条件的观测<br></p> 
<p>        2、删除不符合条件的挂测<br></p> 
<p>    <strong>1、使用 DELETE语句删除不满足条件观测：</strong><br></p> 
<p><strong>        </strong>data work.address;<br></p> 
<p>            set saslib.contact;<br></p> 
<p>            if address  = "" then delete;<br></p> 
<p>        run;<br></p> 
<p>    <strong>2、使用 IF 语句选取满足条件的观测：</strong><br></p> 
<p>        data work.manager;<br></p> 
<p>            set saslib.contact;<br></p> 
<p>            if position='Manager' ;<br></p> 
<p>        run;<br></p> 
<p>   <strong> 3、使用 output 语句建立多个数据集：</strong><br></p> 
<p>    使用OUTPUT语句将符合条件观测写入到数据集，其数据集必须是data步中出现的数据集<br></p> 
<p>        data work.contact_manager;<br></p> 
<p>        data work.contact_others;<br></p> 
<p>            set saslib.contact;<br></p> 
<p>            if position='Manager' then output work.contact_manager;<br></p> 
<p>            else output work.contact_others;</p> 
<p>          run;</p> 
<p><strong>操作所选取观测对应的变量：</strong></p> 
<p><strong>    </strong>data work.inventory2;<br></p> 
<p>        set saslib.inventory;<br></p> 
<p>        if region='BJ' THEN   price = price * 1.2;</p> 
<p>        else price = price * 1.05;   #无 else 语句也行<br></p> 
<p>    run;<br></p> 
<p><strong>do 语句：根据 if 条件执行 do 语句组合</strong></p> 
<p><strong>    </strong>data work.inventory4;<br></p> 
<p>        set saslib.inventory;<br></p> 
<p>        if region='BJ' THEN do;<br></p> 
<p>            Price = Price * 1.3;<br></p> 
<p>            Instock = Instock * 2;</p> 
<p>        END;</p> 
<p>        else  do ;<br></p> 
<p>            ---------<br></p> 
<p>        end;<br></p> 
<p>run;</p> 
<p><br></p> 
<p><strong>分组与排序  --- sort 过程</strong></p> 
<p><strong>    </strong>分组之前必须排序。<br></p> 
<p>    proc sort data=sashelp.class out=class_qw;<br> by sex height /* 分组项必须在排序里面 */<br>run;<br><br><br>data work.class_qw; /* 获取第一个和最后一个项 */<br> set work.class_fl;<br> by sex; <br> if first.sex or last.sex; <br></p> 
<p>run;</p> 
<p><br></p> 
<p><strong>变量重命名： rename语句和 rename= 选项  -- 3种方法</strong></p> 
<p><strong>    </strong>data newanme (rename=(name=full_name));<br></p> 
<p>        set sashelp.class (rename=(name=full_name));<br></p> 
<p>        rename name=full_name;<br></p> 
<p>    run;<br></p> 
<p>** 数据集选项 rename= ，新变量名在data步中就已经导入 PDV 中，如在data 中 需要使用 该变量时应用新变量名称；在其他方法中，由于其是在输出数据集时改变变量名，因此在data步中使用该变量时，还是用旧变量名称。</p> 
<p><strong>--SAS使用已有变量进行运算可直接创建新变量</strong></p> 
<p><strong><br></strong></p> 
<p><strong>--累加求和</strong></p> 
<p><strong>    </strong>data ex2;<br> set ex1(obs=5);<br> total_age+age; /* only use the way or use retain state */<br></p> 
<p>    run;</p> 
<p>---- 未完待续</p> 
<p><br></p> 
<p><br></p> 
<p><strong>    <br></strong></p> 
<p>        <br></p> 
<p><br></p> 
<p><br></p> 
<p><br></p> 
<p><br></p> 
<p><br></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f14a0a0ede82de110344d7fa4840f517/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">序列化二叉树（思路与实现）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f490d0c175e7655cc97beae60eca6961/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">GCC编译源码出错error: Building GCC requires GMP 4.2&#43;, MPFR 2.3.1&#43; and MPC 0.8.</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>