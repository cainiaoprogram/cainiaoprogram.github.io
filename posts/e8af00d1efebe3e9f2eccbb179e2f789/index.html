<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Struts 2详细工作流程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Struts 2详细工作流程" />
<meta property="og:description" content="Struts 2框架本身大致可以分为3个部分：核心控制器FilterDispatcher、业务控制器Action和用户实现的企业业务逻辑组件。
3.1.1 核心控制器FilterDispatcher 核心控制器FilterDispatcher是Struts 2框架的基础，包含了框架内部的控制流程和处理机制。业务控制器Action和业务逻辑组件是需要用户来自己实现的。用户在开发Action和业务逻辑组件的同时，还需要编写相关的配置文件，供核心控制器FilterDispatcher来使用。
Struts 2的工作流程相对于Struts 1要简单，与WebWork框架基本相同，所以说Struts 2是WebWork的升级版本。Struts 2框架按照模块来划分，可以分为Servlet Filters、Struts核心模块、拦截器和用户实现部分。Struts 2框架结构图如图3.1所示。
图3.1 Struts 2框架结构图
一个请求在Struts 2框架中的处理大概分为以下几个步骤。
客户端提交一个（HttpServletRequest）请求，如上文在浏览器中输入http://localhost: 8080/bookcode/ch2/Reg.action就是提交一个（HttpServletRequest）请求。
请求被提交到一系列（主要是3层）的过滤器（Filter），如（ActionContextCleanUp、其他过滤器（SiteMesh等）、 FilterDispatcher）。注意：这里是有顺序的，先ActionContext CleanUp，再其他过滤器（Othter Filters、SiteMesh等），最后到FilterDispatcher。
FilterDispatcher是控制器的核心，就是MVC的Struts 2实现中控制层（Controller）的核心。
FilterDispatcher询问ActionMapper是否需要调用某个Action来处理这个（HttpServlet Request）请求，如果ActionMapper决定需要调用某个Action，FilterDispatcher则把请求的处理交给ActionProxy。
ActionProxy通过Configuration Manager（struts.xml）询问框架的配置文件，找到需要调用的Action类。例如，用户注册示例将找到UserReg类。
ActionProxy创建一个ActionInvocation实例，同时ActionInvocation通过代理模式调用Action。但在调用之前，ActionInvocation会根据配置加载Action相关的所有Interceptor（拦截器）。
一旦Action执行完毕，ActionInvocation负责根据struts.xml中的配置找到对应的返回结果result。
Struts 2的核心控制器是FilterDispatcher，有3个重要的方法：destroy()、doFilter()和Init()，可以在Struts 2的下载文件夹中找到源代码，如代码3.1所示。
代码3.1 核心控制器FilterDispatcher
public class FilterDispatcher implements StrutsStatics, Filter ... {
/** *//**
* 定义一个Log实例
*/
private static final Log LOG = LogFactory.getLog(FilterDispatcher.class);
… ...
/** *//**
* 存放属性文件中的.STRUTS_I18N_ENCODING值
*/
private static String encoding;
/** *//**" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e8af00d1efebe3e9f2eccbb179e2f789/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-03-05T19:47:00+08:00" />
<meta property="article:modified_time" content="2009-03-05T19:47:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Struts 2详细工作流程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> <span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架本身大致可以分为</span><span lang="EN-US"><span style="font-family: Times New Roman;">3</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个部分：核心控制器</span><span lang="EN-US"><span style="font-family: Times New Roman;">FilterDispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、业务控制器</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和用户实现的企业业务逻辑组件。</span></p> 
<h4 style="margin: 14.4pt 0cm 9.6pt 5.25pt;"><a name="_Toc186012770"></a><a name="_Toc144629395"></a><a name="_Toc114154735"></a><a name="_Toc189040216"><span style="mso-bookmark: _Toc114154735;"></span></a><span style="font-size: small;"><span style="mso-bookmark: _Toc186012770;"><span style="mso-bookmark: _Toc144629395;"><span style="mso-bookmark: _Toc114154735;"><span style="mso-bookmark: _Toc189040216;"><span style="background: white; mso-no-proof: yes;" lang="EN-US">3.1.1</span></span></span></span></span><span style="mso-bookmark: _Toc186012770;"><span style="mso-bookmark: _Toc144629395;"><span style="mso-bookmark: _Toc114154735;"><span style="mso-bookmark: _Toc189040216;"><span lang="EN-US"><span style="mso-spacerun: yes;">  </span></span></span></span></span></span><span style="mso-bookmark: _Toc186012770;"><span style="mso-bookmark: _Toc144629395;"><span style="mso-bookmark: _Toc114154735;"><span style="mso-bookmark: _Toc189040216;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">核心控制器</span><span lang="EN-US">FilterDispatcher </span></span></span></span></span></span></h4> 
<p> </p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">核心控制器</span><span lang="EN-US"><span style="font-family: Times New Roman;">FilterDispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">是</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架的基础，包含了框架内部的控制流程和处理机制。业务控制器</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和业务逻辑组件是需要用户来自己实现的。用户在开发</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和业务逻辑组件的同时，还需要编写相关的配置文件，供核心控制器</span><span lang="EN-US"><span style="font-family: Times New Roman;">FilterDispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">来使用。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的工作流程相对于</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 1</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">要简单，与</span><span lang="EN-US"><span style="font-family: Times New Roman;">WebWork</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架基本相同，所以说</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">是</span><span lang="EN-US"><span style="font-family: Times New Roman;">WebWork</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的升级版本。</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架按照模块来划分，可以分为</span><span lang="EN-US"><span style="font-family: Times New Roman;">Servlet Filters</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">核心模块、拦截器和用户实现部分。</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架结构图如图</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.1</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><img src="https://images2.imgbox.com/54/9a/PuJPyWq6_o.jpg" alt=""></span></span></p> 
<p class="a" style="margin: 7.2pt 0cm 3.6pt;"><span lang="EN-US"></span></p> 
<p class="a0" style="margin: 0cm 0cm 6pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">图</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.1<span style="mso-spacerun: yes;">  </span>Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架结构图</span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">一个请求在</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架中的处理大概分为以下几个步骤。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span lang="EN-US"><span style="position: relative; top: 2pt; mso-text-raise: -2.0pt;"><span style="mso-spacerun: yes;"><span style="font-size: small; font-family: Times New Roman;"> </span></span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">客户端提交一个（</span><span lang="EN-US"><span style="font-family: Times New Roman;">HttpServletRequest</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）请求，如上文在浏览器中输入</span><span lang="EN-US"><span style="font-family: Times New Roman;">http://localhost: 8080/bookcode/ch2/Reg.action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">就是提交一个（</span><span lang="EN-US"><span style="font-family: Times New Roman;">HttpServletRequest</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）请求。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span lang="EN-US"><span style="position: relative; top: 2pt; mso-text-raise: -2.0pt;"><span style="mso-spacerun: yes;"><span style="font-size: small; font-family: Times New Roman;"> </span></span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">请求被提交到一系列（主要是</span><span lang="EN-US"><span style="font-family: Times New Roman;">3</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">层）的过滤器（</span><span lang="EN-US"><span style="font-family: Times New Roman;">Filter</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">），如（</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionContextCleanUp</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、其他过滤器（</span><span lang="EN-US"><span style="font-family: Times New Roman;">SiteMesh</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">等）、</span><span lang="EN-US"><span style="font-family: Times New Roman;"> FilterDispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）。注意：这里是有顺序的，先</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionContext CleanUp</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，再其他过滤器（</span><span lang="EN-US"><span style="font-family: Times New Roman;">Othter Filters</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">SiteMesh</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">等），最后到</span><span lang="EN-US"><span style="font-family: Times New Roman;">FilterDispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-family: Times New Roman;"><span style="font-size: 5pt; position: relative; top: 2pt; mso-text-raise: -2.0pt; mso-bidi-font-size: 12.0pt;" lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span lang="EN-US"><span style="font-size: small;">FilterDispatcher</span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">是控制器的核心，就是</span><span lang="EN-US"><span style="font-family: Times New Roman;">MVC</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">实现中控制层（</span><span lang="EN-US"><span style="font-family: Times New Roman;">Controller</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）的核心。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-family: Times New Roman;"><span style="font-size: 5pt; position: relative; top: 2pt; mso-text-raise: -2.0pt; mso-bidi-font-size: 12.0pt;" lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span lang="EN-US"><span style="font-size: small;">FilterDispatcher</span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">询问</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionMapper</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">是否需要调用某个</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">来处理这个（</span><span lang="EN-US"><span style="font-family: Times New Roman;">HttpServlet Request</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）请求，如果</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionMapper</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">决定需要调用某个</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，</span><span lang="EN-US"><span style="font-family: Times New Roman;">FilterDispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">则把请求的处理交给</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionProxy</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-family: Times New Roman;"><span style="font-size: 5pt; position: relative; top: 2pt; mso-text-raise: -2.0pt; mso-bidi-font-size: 12.0pt;" lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span lang="EN-US"><span style="font-size: small;">ActionProxy</span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">通过</span><span lang="EN-US"><span style="font-family: Times New Roman;">Configuration Manager</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（</span><span lang="EN-US"><span style="font-family: Times New Roman;">struts.xml</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）询问框架的配置文件，找到需要调用的</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类。例如，用户注册示例将找到</span><span lang="EN-US"><span style="font-family: Times New Roman;">UserReg</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-family: Times New Roman;"><span style="font-size: 5pt; position: relative; top: 2pt; mso-text-raise: -2.0pt; mso-bidi-font-size: 12.0pt;" lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span lang="EN-US"><span style="font-size: small;">ActionProxy</span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">创建一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionInvocation</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">实例，同时</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionInvocation</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">通过代理模式调用</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。但在调用之前，</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionInvocation</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">会根据配置加载</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">相关的所有</span><span lang="EN-US"><span style="font-family: Times New Roman;">Interceptor</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（拦截器）。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span lang="EN-US"><span style="position: relative; top: 2pt; mso-text-raise: -2.0pt;"><span style="mso-spacerun: yes;"><span style="font-size: small; font-family: Times New Roman;"> </span></span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">一旦</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">执行完毕，</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionInvocation</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">负责根据</span><span lang="EN-US"><span style="font-family: Times New Roman;">struts.xml</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中的配置找到对应的返回结果</span><span lang="EN-US"><span style="font-family: Times New Roman;">result</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的核心控制器是</span><span lang="EN-US"><span style="font-family: Times New Roman;">FilterDispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，有</span><span lang="EN-US"><span style="font-family: Times New Roman;">3</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个重要的方法：</span><span lang="EN-US"><span style="font-family: Times New Roman;">destroy()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">doFilter()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US"><span style="font-family: Times New Roman;">Init()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，可以在</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的下载文件夹中找到源代码，如代码</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.1</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示。</span></span></p> 
<div style="border-right: medium none; padding-right: 0cm; border-top: medium none; padding-left: 0cm; padding-bottom: 1pt; border-left: medium none; padding-top: 0cm; border-bottom: windowtext 1pt solid; mso-element: para-border-div; mso-border-bottom-alt: solid windowtext .5pt;"> 
 <p class="a5" style="margin: 6pt 0cm 3.6pt;"><span style="font-size: small;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial; mso-bidi-font-weight: bold;">代码</span><span style="mso-bidi-font-weight: bold;" lang="EN-US">3.1<span style="mso-spacerun: yes;">  </span></span><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial; mso-bidi-font-weight: bold;">核心控制器</span><span lang="EN-US">FilterDispatcher</span></span></p> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"> </p> 
<div style="padding-right: 5.4pt; padding-left: 5.4pt; background: #e6e6e6; padding-bottom: 4px; width: 95%; word-break: break-all; padding-top: 4px; border: windowtext 0.5pt solid;"> 
 <div> 
  <img id="_63_3613_Open_Image" src="https://images2.imgbox.com/b8/37/OyqyJeT7_o.gif" alt="" align="top"> 
  <img id="_63_3613_Closed_Image" style="display: none;" src="https://images2.imgbox.com/78/d2/hoZiXHYV_o.gif" alt="" align="top"> 
  <span style="color: #0000ff;">public</span> 
  <span style="color: #000000;"> </span> 
  <span style="color: #0000ff;">class</span> 
  <span style="color: #000000;"> FilterDispatcher </span> 
  <span style="color: #0000ff;">implements</span> 
  <span style="color: #000000;"> StrutsStatics, Filter </span> 
  <span id="_63_3613_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span> 
  <span id="_63_3613_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/e5/7d/yJeTCQyW_o.gif" alt="" align="top"><br><img id="_70_99_Open_Image" src="https://images2.imgbox.com/d0/cd/IW4E9j5s_o.gif" alt="" align="top"><img id="_70_99_Closed_Image" style="display: none;" src="https://images2.imgbox.com/85/e9/O5WYb3U5_o.gif" alt="" align="top">    </span><span id="_70_99_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">/** */</span><span id="_70_99_Open_Text"><span style="color: #008000;">/**</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/95/9c/lvCXB2MJ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f3/7f/ZgkBGHCh_o.gif" alt="" align="top">     * 定义一个Log实例<br><img src="https://images2.imgbox.com/76/03/3oBYEd9x_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/6e/81/TZ6gO1PD_o.gif" alt="" align="top">     </span><span style="color: #008000;">*/</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/27/a9/9n7Vzt7J_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/42/f2/VPO8j2lP_o.gif" alt="" align="top"></span><span style="color: #0000ff;">private</span><span style="color: #000000;"> </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> </span><span style="color: #0000ff;">final</span><span style="color: #000000;"> Log LOG </span><span style="color: #000000;">=</span><span style="color: #000000;"> LogFactory.getLog(FilterDispatcher.</span><span style="color: #0000ff;">class</span><span style="color: #000000;">);<br><img src="https://images2.imgbox.com/39/36/qSQlXghZ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/71/0e/jualqCPM_o.gif" alt="" align="top">… ...<br><img src="https://images2.imgbox.com/31/80/xjEOTTnk_o.gif" alt="" align="top"><br><img id="_188_238_Open_Image" src="https://images2.imgbox.com/da/5e/IsZrYZjh_o.gif" alt="" align="top"><img id="_188_238_Closed_Image" style="display: none;" src="https://images2.imgbox.com/ef/cb/DfafYRXB_o.gif" alt="" align="top">    </span><span id="_188_238_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">/** */</span><span id="_188_238_Open_Text"><span style="color: #008000;">/**</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/3c/bc/DPSoTFLR_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/db/aa/hNDdGiHL_o.gif" alt="" align="top">     * 存放属性文件中的.STRUTS_I18N_ENCODING值<br><img src="https://images2.imgbox.com/b8/91/uuB1dQdj_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c2/ba/HeS5duOM_o.gif" alt="" align="top">     </span><span style="color: #008000;">*/</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/19/9d/JQVca7Xf_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/4c/c3/YSEW4z3i_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> String encoding;<br><img src="https://images2.imgbox.com/81/db/OUybuO8T_o.gif" alt="" align="top"><br><img id="_282_318_Open_Image" src="https://images2.imgbox.com/f7/78/ZOjaAZey_o.gif" alt="" align="top"><img id="_282_318_Closed_Image" style="display: none;" src="https://images2.imgbox.com/69/87/v3FX8HrS_o.gif" alt="" align="top">    </span><span id="_282_318_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">/** */</span><span id="_282_318_Open_Text"><span style="color: #008000;">/**</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/f5/e7/xIAhVpHn_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ad/2f/pKhA0Jpo_o.gif" alt="" align="top">     * 定义ActionMapper实例<br><img src="https://images2.imgbox.com/46/3b/3OrMvlca_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/a2/14/KmNGnrtl_o.gif" alt="" align="top">     </span><span style="color: #008000;">*/</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/e6/70/raEQom89_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/87/56/bt6TBsP5_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> </span><span style="color: #0000ff;">static</span><span style="color: #000000;"> ActionMapper actionMapper;<br><img src="https://images2.imgbox.com/85/a7/IgPlfX62_o.gif" alt="" align="top"><br><img id="_372_408_Open_Image" src="https://images2.imgbox.com/53/65/DJFRPtgk_o.gif" alt="" align="top"><img id="_372_408_Closed_Image" style="display: none;" src="https://images2.imgbox.com/d0/01/90a6bEe6_o.gif" alt="" align="top">    </span><span id="_372_408_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">/** */</span><span id="_372_408_Open_Text"><span style="color: #008000;">/**</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/8d/63/11pWJvqA_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/01/8d/nM0ORqkq_o.gif" alt="" align="top">     * 定义FilterConfig实例<br><img src="https://images2.imgbox.com/c5/37/n50GTgPu_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/84/3a/gaC6LaNm_o.gif" alt="" align="top">     </span><span style="color: #008000;">*/</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/ad/3c/8gBSTBK1_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/79/3f/eOiFFqBa_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> FilterConfig filterConfig;<br><img src="https://images2.imgbox.com/37/e4/579iakZs_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/19/1a/KJWvwt5l_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">protected</span><span style="color: #000000;"> Dispatcher dispatcher;<br><img src="https://images2.imgbox.com/5b/53/WCkcsIWV_o.gif" alt="" align="top"><br><img id="_493_568_Open_Image" src="https://images2.imgbox.com/75/a7/aaeB6gtP_o.gif" alt="" align="top"><img id="_493_568_Closed_Image" style="display: none;" src="https://images2.imgbox.com/49/6b/m4WXJh2s_o.gif" alt="" align="top">    </span><span id="_493_568_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">/** */</span><span id="_493_568_Open_Text"><span style="color: #008000;">/**</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/f1/df/LRuWoJab_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/74/0d/mVrx7dBJ_o.gif" alt="" align="top">     * 创建一个默认的dispatcher，初始化filter<br><img src="https://images2.imgbox.com/6b/74/xz9y575Q_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d3/e8/1X4xXHN9_o.gif" alt="" align="top">     * 设置默认的packages     *<br><img src="https://images2.imgbox.com/2e/b7/FGDyWMea_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/14/cd/qeet3An3_o.gif" alt="" align="top">     </span><span style="color: #008000;">*/</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/94/60/qqmw9Kvb_o.gif" alt="" align="top"><br><img id="_643_1079_Open_Image" src="https://images2.imgbox.com/98/2a/herVaFZW_o.gif" alt="" align="top"><img id="_643_1079_Closed_Image" style="display: none;" src="https://images2.imgbox.com/01/87/rOUY8Hmy_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> init(FilterConfig filterConfig) </span><span style="color: #0000ff;">throws</span><span style="color: #000000;"> ServletException </span><span id="_643_1079_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_643_1079_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/9a/aa/dQWeBreC_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/03/05/m7xZgWyK_o.gif" alt="" align="top">     </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.filterConfig </span><span style="color: #000000;">=</span><span style="color: #000000;"> filterConfig;<br><img src="https://images2.imgbox.com/ad/d1/JQkVqq4V_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/58/91/7LpCg35j_o.gif" alt="" align="top">       dispatcher </span><span style="color: #000000;">=</span><span style="color: #000000;"> createDispatcher(filterConfig);<br><img src="https://images2.imgbox.com/70/97/s7RDPCCQ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/1a/9f/OncjV4eX_o.gif" alt="" align="top">        dispatcher.init();<br><img src="https://images2.imgbox.com/60/34/SRgHbB2R_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f4/6c/IT7H8C6f_o.gif" alt="" align="top">        String param </span><span style="color: #000000;">=</span><span style="color: #000000;"> filterConfig.getInitParameter(</span><span style="color: #000000;">"</span><span style="color: #000000;">packages</span><span style="color: #000000;">"</span><span style="color: #000000;">);<br><img src="https://images2.imgbox.com/93/fc/8OyldShD_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/eb/ca/BbZDobj8_o.gif" alt="" align="top">        String packages </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">"</span><span style="color: #000000;">org.apache.struts2.static template org.apache.struts2.interceptor.debugging</span><span style="color: #000000;">"</span><span style="color: #000000;">;<br><img src="https://images2.imgbox.com/ff/db/VEb1HXOY_o.gif" alt="" align="top"><br><img id="_967_1026_Open_Image" src="https://images2.imgbox.com/76/3b/ruOGXkHy_o.gif" alt="" align="top"><img id="_967_1026_Closed_Image" style="display: none;" src="https://images2.imgbox.com/94/a6/uxviIibr_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (param </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">null</span><span style="color: #000000;">) </span><span id="_967_1026_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_967_1026_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/b7/87/oXfn2dnY_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c9/b2/V3gF2yh3_o.gif" alt="" align="top">            packages </span><span style="color: #000000;">=</span><span style="color: #000000;"> param </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #000000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">"</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> packages;<br><img src="https://images2.imgbox.com/f7/b6/eYkCp45M_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/53/dc/bzz8vZeG_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/ee/1f/vKmqX05g_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/52/db/3Quj17dI_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.pathPrefixes </span><span style="color: #000000;">=</span><span style="color: #000000;"> parse(packages);<br><img src="https://images2.imgbox.com/10/49/8aEhk8wc_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ac/24/ZcXPyTKt_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/31/d5/zUd19qOy_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/a4/d3/noBIPToQ_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">销毁filter方法</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/2c/7f/1PXXvHoU_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img id="_1125_1325_Open_Image" src="https://images2.imgbox.com/9a/50/guzsT0w8_o.gif" alt="" align="top"><img id="_1125_1325_Closed_Image" style="display: none;" src="https://images2.imgbox.com/df/48/7jw7MBth_o.gif" alt="" align="top">   </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> destroy() </span><span id="_1125_1325_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_1125_1325_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/e0/de/CPzwMXkL_o.gif" alt="" align="top"><br><img id="_1160_1265_Open_Image" src="https://images2.imgbox.com/d9/5d/mYqey08l_o.gif" alt="" align="top"><img id="_1160_1265_Closed_Image" style="display: none;" src="https://images2.imgbox.com/d5/a7/rDgQg36I_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (dispatcher </span><span style="color: #000000;">==</span><span style="color: #000000;"> </span><span style="color: #0000ff;">null</span><span style="color: #000000;">) </span><span id="_1160_1265_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_1160_1265_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/63/07/uOrj1qEt_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/31/6c/QttktNW2_o.gif" alt="" align="top">            LOG.warn(</span><span style="color: #000000;">"</span><span style="color: #000000;">something is seriously wrong, Dispatcher is not initialized (null) </span><span style="color: #000000;">"</span><span style="color: #000000;">);<br><img src="https://images2.imgbox.com/56/af/CreGWFaO_o.gif" alt="" align="top"><br><img id="_1272_1318_Open_Image" src="https://images2.imgbox.com/75/2f/eP9JAqqk_o.gif" alt="" align="top"><img id="_1272_1318_Closed_Image" style="display: none;" src="https://images2.imgbox.com/0c/c7/hCKoxZjN_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"> </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span id="_1272_1318_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_1272_1318_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/41/8d/cYGMLdE5_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/4a/b1/QgNc5d7A_o.gif" alt="" align="top">            dispatcher.cleanup();<br><img src="https://images2.imgbox.com/59/5f/s6ryRGc8_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/75/2f/iHzI3Nlh_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/4c/fb/9lUQe6sQ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/65/c1/AXONXr9W_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/a3/e3/lgcoBJVq_o.gif" alt="" align="top"><br><img id="_1332_3613_Open_Image" src="https://images2.imgbox.com/3d/32/IkNE5s0t_o.gif" alt="" align="top"><img id="_1332_3613_Closed_Image" style="display: none;" src="https://images2.imgbox.com/fe/c6/U9yV3U4t_o.gif" alt="" align="top">    </span><span id="_1332_3613_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">/** */</span><span id="_1332_3613_Open_Text"><span style="color: #008000;">/**</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/91/cb/ndK8iy4z_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c7/01/iAQfyKhr_o.gif" alt="" align="top">     * 处理一个Action或者资源请求<br><img src="https://images2.imgbox.com/77/38/wCHTJSAI_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/e6/0a/3YGwEeKl_o.gif" alt="" align="top">     * &lt;p/&gt;<br><img src="https://images2.imgbox.com/59/d0/sDfYIHsg_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/78/cd/BsYGad4E_o.gif" alt="" align="top">     * filter尝试将请求同action mapping相匹配<br><img src="https://images2.imgbox.com/70/6d/BUJ3s4R4_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d2/ab/lOiCCoSK_o.gif" alt="" align="top">     * 如果找到，将执行dispatcher的serviceAction方法<br><img src="https://images2.imgbox.com/46/7c/Biopjo4x_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c6/55/OPmPGBeZ_o.gif" alt="" align="top">     * 如果Action处理失败, doFilter将建立一个异常<br><img src="https://images2.imgbox.com/1c/36/8wlOC56y_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/5c/1c/7DCHl1P4_o.gif" alt="" align="top">     * &lt;p/&gt;<br><img src="https://images2.imgbox.com/3b/ac/EQaBhn0s_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ca/ee/8wFv1MYm_o.gif" alt="" align="top">     * 如果请求静态资源<br><img src="https://images2.imgbox.com/82/7c/xcuY6E9U_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/84/99/H5FMxzI3_o.gif" alt="" align="top">     * 资源将被直接复制给 response<br><img src="https://images2.imgbox.com/6f/98/CGLypbCL_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/53/d7/MRtbzXHe_o.gif" alt="" align="top">     * &lt;p/&gt;<br><img src="https://images2.imgbox.com/61/cb/GVfcLWEy_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ac/89/A1NNoHQD_o.gif" alt="" align="top">     * 如果找不到匹配Action 或者静态资源，则直接跳出<br><img src="https://images2.imgbox.com/62/9c/Z7OPnBYJ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/a6/e4/lO9Uus99_o.gif" alt="" align="top">     public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {<!-- --><br><img src="https://images2.imgbox.com/19/f9/PQexKhZD_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/df/32/VVzO4eq4_o.gif" alt="" align="top">        HttpServletRequest request = (HttpServletRequest) req;<br><img src="https://images2.imgbox.com/d2/74/9Gp58Ler_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f9/cd/AXWoVjJq_o.gif" alt="" align="top">        HttpServletResponse response = (HttpServletResponse) res;<br><img src="https://images2.imgbox.com/01/1e/BOjBYR2E_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/22/01/QTGE0VKw_o.gif" alt="" align="top">        ServletContext servletContext = getServletContext();<br><img src="https://images2.imgbox.com/f5/ca/UM0EX7t5_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/80/aa/FXcK2tKG_o.gif" alt="" align="top">        String timerKey = "FilterDispatcher_doFilter: ";<br><img src="https://images2.imgbox.com/0a/cb/1aYD1Y9U_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/32/c0/6aVl3KXX_o.gif" alt="" align="top">        try {<!-- --><br><img src="https://images2.imgbox.com/dc/70/YSdia8Y2_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/84/84/TVQZA2i8_o.gif" alt="" align="top">            UtilTimerStack.push(timerKey);<br><img src="https://images2.imgbox.com/3e/75/J5a5kGmE_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/99/00/vOsT3U7S_o.gif" alt="" align="top">            request = prepareDispatcherAndWrapRequest(request, response);<br><img src="https://images2.imgbox.com/cc/50/SvDg23mV_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b8/90/E4rFHLxI_o.gif" alt="" align="top">            ActionMapping mapping;<br><img src="https://images2.imgbox.com/3a/a6/pLMcsLji_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/52/e5/w5xv5dTY_o.gif" alt="" align="top">            try {<!-- --><br><img src="https://images2.imgbox.com/a9/a8/bLiSn9OV_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/1a/c6/6i7OcllS_o.gif" alt="" align="top">                mapping=actionMapper.getMapping(request, dispatcher.getConfigurationManager());<br><img src="https://images2.imgbox.com/4e/0b/71xuHSkM_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/98/1b/Al87Ueyq_o.gif" alt="" align="top">            } catch (Exception ex) {<!-- --><br><img src="https://images2.imgbox.com/68/fb/3NgOnbp0_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/2a/07/0LU7FI6E_o.gif" alt="" align="top">                LOG.error("error getting ActionMapping", ex);<br><img src="https://images2.imgbox.com/75/61/y9oTJuPb_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/44/65/XBEBwcCd_o.gif" alt="" align="top">                dispatcher.sendError(request, response, servletContext, HttpServletResponse.SC_INTERNAL_SERVER_ERROR, ex);<br><img src="https://images2.imgbox.com/8a/c2/6YE6TXOl_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/00/a2/nFbcznuN_o.gif" alt="" align="top">                return;<br><img src="https://images2.imgbox.com/3a/5f/esjRdwym_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ab/3b/U7ZvbVeP_o.gif" alt="" align="top">            }<br><img src="https://images2.imgbox.com/ee/44/jp4EPoJN_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/de/b9/OflAGSKp_o.gif" alt="" align="top">            if (mapping == null) {<!-- --><br><img src="https://images2.imgbox.com/05/7d/u7jEgnf4_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/74/c7/whXoIiJ3_o.gif" alt="" align="top">                String resourcePath = RequestUtils.getServletPath(request);<br><img src="https://images2.imgbox.com/26/54/flcLTm6w_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/54/da/SxlrF7ig_o.gif" alt="" align="top">                if ("".equals(resourcePath) &amp;&amp; null != request.getPathInfo()) {<!-- --><br><img src="https://images2.imgbox.com/d6/4c/yxqow04e_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d2/b1/UtRuLMbg_o.gif" alt="" align="top">                    resourcePath = request.getPathInfo();<br><img src="https://images2.imgbox.com/ed/dd/2CpUphWm_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d4/0c/jMC7X2Mf_o.gif" alt="" align="top">                }<br><img src="https://images2.imgbox.com/7d/63/E6juUL99_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/de/ef/FRHDhXbn_o.gif" alt="" align="top">                if (serveStatic &amp;&amp; resourcePath.startsWith("/struts")) {<!-- --><br><img src="https://images2.imgbox.com/69/ec/285sf3lB_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f6/65/4bd9SuF4_o.gif" alt="" align="top">                    String name = resourcePath.substring("/struts".length());<br><img src="https://images2.imgbox.com/da/14/BAjVr7GM_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/a3/06/lCTS9b5V_o.gif" alt="" align="top">                    findStaticResource(name, request, response);<br><img src="https://images2.imgbox.com/f8/02/Z642HfGo_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/57/50/gXhfZLhD_o.gif" alt="" align="top">                } else {<!-- --><br><img src="https://images2.imgbox.com/af/a5/x5qRDyru_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b0/37/c5ZHVa9R_o.gif" alt="" align="top">                    //为一个普通的request, 则通过<br><img src="https://images2.imgbox.com/19/21/OfpmwZZo_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/32/bf/03ntIrqd_o.gif" alt="" align="top">                    chain.doFilter(request, response);<br><img src="https://images2.imgbox.com/0a/05/RCwXoNMc_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/79/43/n15JMT2H_o.gif" alt="" align="top">                }<br><img src="https://images2.imgbox.com/a5/3e/cwnUHRSP_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/8f/86/ahWImvf5_o.gif" alt="" align="top">                return;<br><img src="https://images2.imgbox.com/8e/05/eUGzw2Tn_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c5/27/oOsbFkGD_o.gif" alt="" align="top">            }<br><img src="https://images2.imgbox.com/06/ba/33kkldWD_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/37/75/VQQg9uwF_o.gif" alt="" align="top">/**<br><img src="https://images2.imgbox.com/c3/f7/n5SDPVCC_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b0/9e/oY06noW8_o.gif" alt="" align="top">*这个方法询问ActionMapper是否需要调用某个Action来处理这个（request）请求，<br><img src="https://images2.imgbox.com/59/b5/1tXt1pbY_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/07/d4/ujbLLit5_o.gif" alt="" align="top">*如果ActionMapper决定需要调用某个Action，<br><img src="https://images2.imgbox.com/04/f9/0V4pdHsc_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b9/da/gLvQ0hub_o.gif" alt="" align="top">*FilterDispatcher则把请求的处理交给ActionProxy<br><img src="https://images2.imgbox.com/05/bf/lbixKsiy_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/7e/53/9OnFaCtF_o.gif" alt="" align="top">            dispatcher.serviceAction(request, response, servletContext, mapping);<br><img src="https://images2.imgbox.com/81/c9/Px94BJ7O_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f5/d6/oFHlEBwl_o.gif" alt="" align="top">        } finally {<!-- --><br><img src="https://images2.imgbox.com/3b/d3/p0eAXhlS_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/af/d0/MHr4zOmO_o.gif" alt="" align="top">            try {<!-- --><br><img src="https://images2.imgbox.com/80/eb/30eoX0EF_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/82/93/AxxSustC_o.gif" alt="" align="top">                ActionContextCleanUp.cleanUp(req);<br><img src="https://images2.imgbox.com/13/ae/lWiVt24u_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/9d/15/k3Z5S63t_o.gif" alt="" align="top">            } finally {<!-- --><br><img src="https://images2.imgbox.com/84/e5/WOoB5iS7_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/70/bd/EQB62e5O_o.gif" alt="" align="top">                UtilTimerStack.pop(timerKey);<br><img src="https://images2.imgbox.com/54/fb/1HffjMU0_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f6/e5/PE7tJN5B_o.gif" alt="" align="top">            }<br><img src="https://images2.imgbox.com/01/3a/1agtbHJF_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ba/a9/qTGRaUg1_o.gif" alt="" align="top">        }<br><img src="https://images2.imgbox.com/ea/27/xU7s2IwN_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/aa/61/dRe4nGJ3_o.gif" alt="" align="top">}<br><img src="https://images2.imgbox.com/3c/79/ej2QZsMr_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ae/0e/GIXlBhhF_o.gif" alt="" align="top">… …<br><img src="https://images2.imgbox.com/99/03/aJ6czvmC_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c6/4a/1o5qW5Ig_o.gif" alt="" align="top">}<br><img src="https://images2.imgbox.com/7d/6b/BBC03EMB_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/0e/62/NetL94C5_o.gif" alt="" align="top"></span></span></span> 
 </div> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"> </p> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">在</span><span lang="EN-US"><span style="font-family: Times New Roman;">doFilter()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">方法中，将调用</span><span lang="EN-US"><span style="font-family: Times New Roman;">dispatcher.serviceAction</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，该方法如果找到相应的</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，将把用户请求交给</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionProxy</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span><span lang="EN-US"><span style="font-family: Times New Roman;">serviceAction()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">代码在</span><span lang="EN-US"><span style="font-family: Times New Roman;">Dispatcher.java</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中，如代码</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示。</span></span></p> 
<div style="border-right: medium none; padding-right: 0cm; border-top: medium none; padding-left: 0cm; padding-bottom: 1pt; border-left: medium none; padding-top: 0cm; border-bottom: windowtext 1pt solid; mso-element: para-border-div; mso-border-bottom-alt: solid windowtext .5pt;"> 
 <p class="a5" style="margin: 6pt 0cm 3.6pt;"><span style="font-size: small;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">代码</span><span lang="EN-US">3.2<span style="mso-spacerun: yes;">  </span>Dispatcher</span><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">类</span></span></p> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 20.6pt;"> </p> 
<div style="padding-right: 5.4pt; padding-left: 5.4pt; background: #e6e6e6; padding-bottom: 4px; width: 95%; word-break: break-all; padding-top: 4px; border: windowtext 0.5pt solid;"> 
 <div> 
  <img id="_24_2265_Open_Image" src="https://images2.imgbox.com/90/49/GvfLN8fD_o.gif" alt="" align="top"> 
  <img id="_24_2265_Closed_Image" style="display: none;" src="https://images2.imgbox.com/b6/be/57evursi_o.gif" alt="" align="top"> 
  <span style="color: #0000ff;">public</span> 
  <span style="color: #000000;"> </span> 
  <span style="color: #0000ff;">class</span> 
  <span style="color: #000000;"> Dispatcher </span> 
  <span id="_24_2265_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span> 
  <span id="_24_2265_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/4d/1a/wOjOUjre_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/6c/ff/8ioS6hPf_o.gif" alt="" align="top">...<br><img src="https://images2.imgbox.com/cf/4c/1s6fdVny_o.gif" alt="" align="top"><br><img id="_32_218_Open_Image" src="https://images2.imgbox.com/fd/17/08aT4a1b_o.gif" alt="" align="top"><img id="_32_218_Closed_Image" style="display: none;" src="https://images2.imgbox.com/91/8b/VQDMQlWz_o.gif" alt="" align="top"></span><span id="_32_218_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">/** */</span><span id="_32_218_Open_Text"><span style="color: #008000;">/**</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/ec/a1/noWclCXo_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/40/e4/PukSC5Bq_o.gif" alt="" align="top">     * 为mapping加载类，并调用相应的方法或者直接返回result<br><img src="https://images2.imgbox.com/7b/c6/PNNP7tFT_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/da/62/qSdE0vke_o.gif" alt="" align="top">     * &lt;p/&gt;<br><img src="https://images2.imgbox.com/52/c7/ZQTh1PHL_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/7c/6e/Bvf3fdnT_o.gif" alt="" align="top">     * 根据用户请求的参数，建立Action上下文<br><img src="https://images2.imgbox.com/13/8d/UkNcwx79_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/21/2a/CO9piUNR_o.gif" alt="" align="top">     * 根据指定的Action’名称和包空间名称，加载一个Action代理 &lt;tt&gt;ActionProxy&lt;/tt&gt; <br><img src="https://images2.imgbox.com/03/0d/3Ki1eAlh_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/29/ec/6pR1HGuj_o.gif" alt="" align="top">     * 然后Action的相应方法将被执行，<br><img src="https://images2.imgbox.com/78/02/bKhmv1zV_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/e1/80/chyDVqHC_o.gif" alt="" align="top">     </span><span style="color: #008000;">*/</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/ce/3f/BRvnjNLu_o.gif" alt="" align="top"><br><img id="_380_2256_Open_Image" src="https://images2.imgbox.com/fe/d3/MbEjzx3j_o.gif" alt="" align="top"><img id="_380_2256_Closed_Image" style="display: none;" src="https://images2.imgbox.com/13/01/a0Z39r0d_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> serviceAction(HttpServletRequest request, HttpServletResponse response, ServletContext context, ActionMapping mapping) </span><span style="color: #0000ff;">throws</span><span style="color: #000000;"> ServletException </span><span id="_380_2256_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_380_2256_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/25/f9/7Gte5mJz_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/dd/f7/UhFJEw3N_o.gif" alt="" align="top">        Map</span><span style="color: #000000;">&lt;</span><span style="color: #000000;">String, Object</span><span style="color: #000000;">&gt;</span><span style="color: #000000;"> extraContext </span><span style="color: #000000;">=</span><span style="color: #000000;"> createContextMap(request, response, mapping, context);<br><img src="https://images2.imgbox.com/a3/13/mEIxt8cw_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/da/b3/oT1aSuYp_o.gif" alt="" align="top">        </span><span style="color: #008000;">//</span><span style="color: #008000;">如果存在一个值栈，则建立一个新的并复制以备Action使用</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/a3/ce/ZvymRIvl_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/f4/47/Vijiy6Ig_o.gif" alt="" align="top">        ValueStack stack </span><span style="color: #000000;">=</span><span style="color: #000000;"> (ValueStack) request.getAttribute(ServletActionContext.STRUTS_VALUESTACK_KEY);<br><img src="https://images2.imgbox.com/1b/26/fmER6xub_o.gif" alt="" align="top"><br><img id="_656_781_Open_Image" src="https://images2.imgbox.com/6a/b7/2qjmOdsL_o.gif" alt="" align="top"><img id="_656_781_Closed_Image" style="display: none;" src="https://images2.imgbox.com/00/ec/hz7XEP6O_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (stack</span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">null</span><span style="color: #000000;">) </span><span id="_656_781_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_656_781_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/8b/a9/BpEPlzxA_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/6d/dd/ZGofoiTV_o.gif" alt="" align="top">            extraContext.put(ActionContext.VALUE_STACK, ValueStackFactory.getFactory().createValueStack(stack));<br><img src="https://images2.imgbox.com/75/58/hd4mF1md_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/20/6f/qCBOZYrC_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/0b/66/wsqcBsyR_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d0/f2/U4mgpHhi_o.gif" alt="" align="top">        String timerKey </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #000000;">"</span><span style="color: #000000;">Handling request from Dispatcher</span><span style="color: #000000;">"</span><span style="color: #000000;">;<br><img src="https://images2.imgbox.com/5e/98/bCMp8nBn_o.gif" alt="" align="top"><br><img id="_859_1911_Open_Image" src="https://images2.imgbox.com/c5/7e/Ez1aYhoD_o.gif" alt="" align="top"><img id="_859_1911_Closed_Image" style="display: none;" src="https://images2.imgbox.com/4a/a0/OxokOfqn_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> </span><span id="_859_1911_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_859_1911_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/34/6e/XOVtb1za_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/3c/52/lnd9rGnl_o.gif" alt="" align="top">            UtilTimerStack.push(timerKey);<br><img src="https://images2.imgbox.com/b8/56/umLnoDCU_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f2/8c/0o7XxYG5_o.gif" alt="" align="top">            String namespace </span><span style="color: #000000;">=</span><span style="color: #000000;"> mapping.getNamespace();<br><img src="https://images2.imgbox.com/df/3f/Ty7FGpIC_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/05/e4/xaao5a6K_o.gif" alt="" align="top">            String name </span><span style="color: #000000;">=</span><span style="color: #000000;"> mapping.getName();<br><img src="https://images2.imgbox.com/56/90/ZL5Dd0fA_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/7f/e3/PptlqYxK_o.gif" alt="" align="top">            String method </span><span style="color: #000000;">=</span><span style="color: #000000;"> mapping.getMethod();<br><img src="https://images2.imgbox.com/09/9b/g04UoqdF_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d0/c8/8oevugS4_o.gif" alt="" align="top">            Configuration config </span><span style="color: #000000;">=</span><span style="color: #000000;"> configurationManager.getConfiguration();<br><img src="https://images2.imgbox.com/76/cb/Lvzw0LgF_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/85/ae/W3DkiPmL_o.gif" alt="" align="top">            </span><span style="color: #008000;">//</span><span style="color: #008000;">FilterDispatcher把请求的处理交给ActionProxy</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/bc/b7/bOA0kbEI_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/4e/ae/IjLBvMa8_o.gif" alt="" align="top">            ActionProxy proxy </span><span style="color: #000000;">=</span><span style="color: #000000;"> config.getContainer().getInstance(ActionProxyFactory.</span><span style="color: #0000ff;">class</span><span style="color: #000000;">).createActionProxy(namespace, name, extraContext, </span><span style="color: #0000ff;">true</span><span style="color: #000000;">, </span><span style="color: #0000ff;">false</span><span style="color: #000000;">);<br><img src="https://images2.imgbox.com/fa/af/65o2DUuf_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d0/03/T3qiGVZB_o.gif" alt="" align="top">            proxy.setMethod(method);<br><img src="https://images2.imgbox.com/98/0d/6xkimyfs_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/2b/3f/A8snhXij_o.gif" alt="" align="top">            request.setAttribute(ServletActionContext.STRUTS_VALUESTACK_KEY, proxy.getInvocation().getStack());<br><img src="https://images2.imgbox.com/2f/9d/7pTQA2bk_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/2c/64/MH5HsKWt_o.gif" alt="" align="top">            </span><span style="color: #008000;">//</span><span style="color: #008000;">ActionMapping 直接返回一个result</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/44/a1/u6JdrIUX_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img id="_1580_1705_Open_Image" src="https://images2.imgbox.com/0e/b3/OUM3cx9O_o.gif" alt="" align="top"><img id="_1580_1705_Closed_Image" style="display: none;" src="https://images2.imgbox.com/1f/bc/kqGkUkm4_o.gif" alt="" align="top">            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (mapping.getResult() </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">null</span><span style="color: #000000;">) </span><span id="_1580_1705_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_1580_1705_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/b1/ef/gTVI3Uwv_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/84/27/kuEohJTR_o.gif" alt="" align="top">                Result result </span><span style="color: #000000;">=</span><span style="color: #000000;"> mapping.getResult();<br><img src="https://images2.imgbox.com/04/1e/TN3MP4cN_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/23/16/E53ACOGQ_o.gif" alt="" align="top">                result.execute(proxy.getInvocation());<br><img src="https://images2.imgbox.com/f5/08/PiJR9vcl_o.gif" alt="" align="top"><br><img id="_1712_1761_Open_Image" src="https://images2.imgbox.com/6c/ce/sZv0sq8R_o.gif" alt="" align="top"><img id="_1712_1761_Closed_Image" style="display: none;" src="https://images2.imgbox.com/26/bf/Bbs3LO2N_o.gif" alt="" align="top">            }</span></span><span style="color: #000000;"> </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> </span><span id="_1712_1761_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_1712_1761_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/1f/6f/GevQNV1S_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/64/b8/fw2TJKwL_o.gif" alt="" align="top">                proxy.execute();<br><img src="https://images2.imgbox.com/fa/94/dsmOLi4r_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ce/a4/yDeVX5Ub_o.gif" alt="" align="top">            }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/4c/01/FSwkiplt_o.gif" alt="" align="top"><br><img id="_1795_1900_Open_Image" src="https://images2.imgbox.com/37/8d/HVgndlMh_o.gif" alt="" align="top"><img id="_1795_1900_Closed_Image" style="display: none;" src="https://images2.imgbox.com/1e/4a/hGRiHKqh_o.gif" alt="" align="top">            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (stack </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000ff;">null</span><span style="color: #000000;">) </span><span id="_1795_1900_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_1795_1900_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/52/ac/3jloF0rK_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/89/40/kGgZvA5c_o.gif" alt="" align="top">                request.setAttribute(ServletActionContext.STRUTS_VALUESTACK_KEY, stack);<br><img src="https://images2.imgbox.com/be/78/nbwT9f12_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/e5/38/J9c9XMNM_o.gif" alt="" align="top">            }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/5e/6a/fmbnjP3h_o.gif" alt="" align="top"><br><img id="_1946_2108_Open_Image" src="https://images2.imgbox.com/86/c3/kM9swq1Q_o.gif" alt="" align="top"><img id="_1946_2108_Closed_Image" style="display: none;" src="https://images2.imgbox.com/7a/de/FwZdS16m_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"> </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (ConfigurationException e) </span><span id="_1946_2108_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_1946_2108_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/15/9d/dhYBQPYQ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/3d/2a/ORXpyTAV_o.gif" alt="" align="top">            LOG.error(</span><span style="color: #000000;">"</span><span style="color: #000000;">Could not find action or result</span><span style="color: #000000;">"</span><span style="color: #000000;">, e);<br><img src="https://images2.imgbox.com/16/53/OSE1tfnw_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/90/d2/DgKq6F4j_o.gif" alt="" align="top">            sendError(request, response, context, HttpServletResponse.SC_NOT_FOUND, e);<br><img src="https://images2.imgbox.com/53/54/Hm3Th4Y4_o.gif" alt="" align="top"><br><img id="_2130_2185_Open_Image" src="https://images2.imgbox.com/da/12/cIKAJMm6_o.gif" alt="" align="top"><img id="_2130_2185_Closed_Image" style="display: none;" src="https://images2.imgbox.com/91/dd/QVYGm9Bb_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"> </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) </span><span id="_2130_2185_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_2130_2185_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/da/94/YM4oI5hm_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/26/ee/dWYOCzKu_o.gif" alt="" align="top">            </span><span style="color: #0000ff;">throw</span><span style="color: #000000;"> </span><span style="color: #0000ff;">new</span><span style="color: #000000;"> ServletException(e);<br><img src="https://images2.imgbox.com/44/c2/8GalEe15_o.gif" alt="" align="top"><br><img id="_2195_2249_Open_Image" src="https://images2.imgbox.com/57/2a/0JeDG6ez_o.gif" alt="" align="top"><img id="_2195_2249_Closed_Image" style="display: none;" src="https://images2.imgbox.com/92/9b/fVVAMsdJ_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"> </span><span style="color: #0000ff;">finally</span><span style="color: #000000;"> </span><span id="_2195_2249_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_2195_2249_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/72/4c/tNXhRq2Y_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/74/d4/QGERRAuy_o.gif" alt="" align="top">            UtilTimerStack.pop(timerKey);<br><img src="https://images2.imgbox.com/b8/3c/ul3N0hXu_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/58/76/IirBKVXa_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/82/5d/WyAtKdnY_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/51/b2/pEcgP3jC_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/61/a3/ogrLGIOR_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b8/67/ucSzy7AZ_o.gif" alt="" align="top">…<br><img src="https://images2.imgbox.com/6d/d7/Q8TFGtDy_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/de/55/FFauBBPL_o.gif" alt="" align="top">｝<br><img src="https://images2.imgbox.com/2a/19/01WWlSeG_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/94/19/UcHlQNux_o.gif" alt="" align="top"></span></span> 
 </div> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 20.6pt;"> </p> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 20.6pt;"><span style="font-size: small;"><span style="font-family: 宋体; letter-spacing: -0.1pt; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">从上面代码中可以看出来，</span><span style="letter-spacing: -0.1pt;" lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; letter-spacing: -0.1pt; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">用于处理用户请求的</span><span style="letter-spacing: -0.1pt;" lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; letter-spacing: -0.1pt; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">实例，并不是用户实现的业务控制器，而是</span><span style="letter-spacing: -0.1pt;" lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; letter-spacing: -0.1pt; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">代理。关于</span><span style="letter-spacing: -0.1pt;" lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; letter-spacing: -0.1pt; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">代理相关内容，读者可以参考拦截器章节的介绍。</span></span></p> 
<p class="MsoNormal" style="margin: 6pt 0cm 9.6pt 21pt; text-indent: 0cm; mso-char-indent-count: 0; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .8gd; mso-para-margin-left: 2.0gd;"><span style="font-size: 11pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">★</span><span style="font-size: 11pt; mso-bidi-font-size: 12.0pt;"><span style="font-family: Times New Roman;"> </span></span><span style="font-size: 11pt; font-family: 黑体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">提示</span><span style="font-size: 11pt; mso-bidi-font-size: 12.0pt;"><span style="font-family: Times New Roman;"> </span></span><span style="font-size: 11pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">★</span></p> 
<p class="a3" style="margin: 0cm 10.5pt 0pt;"><span style="font-size: small;"><span style="font-family: Times New Roman;"><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">前面一直在说</span><span lang="EN-US">Action</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">可以是一个普通的</span><span lang="EN-US">Java</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">类，与</span><span lang="EN-US">Servlet API</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">完全分离，但是为了实现业务逻辑，</span><span lang="EN-US">Action</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">需要使用</span><span lang="EN-US">HttpServletRequest</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">内容。</span></span></span></p> 
<p class="MsoNormalIndent" style="margin: 0cm 0cm 0pt; line-height: 15.6pt; mso-char-indent-count: 2.0; punctuation-trim: leading;"><span style="mso-bidi-font-size: 12.0pt;" lang="EN-US"><span style="font-size: small; font-family: Times New Roman;"> </span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">设计的精巧之处就是使用了</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">代理，</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">代理可以根据系统的配置，加载一系列的拦截器，由拦截器将</span><span lang="EN-US"><span style="font-family: Times New Roman;">HttpServletRequest</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">参数解析出来，传入</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。同样，</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">处理的结果也是通过拦截器传入</span><span lang="EN-US"><span style="font-family: Times New Roman;">HttpServletResponse</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，然后由</span><span lang="EN-US"><span style="font-family: Times New Roman;">HttpServletRequest</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">传给用户。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">其实，该处理过程是典型的</span><span lang="EN-US"><span style="font-family: Times New Roman;">AOP</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（面向切面编程）的方式，读者可以在后面详细了解到。</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">处理过程模型如图</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><img src="https://images2.imgbox.com/f3/18/6d3D2jDM_o.jpg" alt=""></span></span></p> 
<p class="a" style="page-break-before: always; margin: 7.2pt 0cm 3.6pt;"><span lang="EN-US"></span></p> 
<p class="a0" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">图</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.2<span style="mso-spacerun: yes;">  </span>Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">处理过程模型</span></p> 
<p class="MsoNormal" style="margin: 6pt 0cm 9.6pt 21pt; text-indent: 0cm; mso-char-indent-count: 0; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .8gd; mso-para-margin-left: 2.0gd;"><span style="font-size: 11pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">★</span><span style="font-size: 11pt; mso-bidi-font-size: 12.0pt;"><span style="font-family: Times New Roman;"> </span></span><span style="font-size: 11pt; font-family: 黑体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">说明</span><span style="font-size: 11pt; mso-bidi-font-size: 12.0pt;"><span style="font-family: Times New Roman;"> </span></span><span style="font-size: 11pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">★</span></p> 
<p class="a3" style="margin: 0cm 10.5pt 0pt;"><span style="font-size: small;"><span style="font-family: Times New Roman;"><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">拦截器是</span><span lang="EN-US">Struts 2</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">框架的核心，通过拦截器，实现了</span><span lang="EN-US">AOP</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">（面向切面编程）。使用拦截器，可以简化</span><span lang="EN-US">Web</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">开发中的某些应用，例如，权限拦截器可以简化</span><span lang="EN-US">Web</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">应用中的权限检查。</span></span></span></p> 
<p class="MsoNormalIndent" style="margin: 0cm 0cm 0pt; line-height: 15.6pt; mso-char-indent-count: 2.0; punctuation-trim: leading;"><span style="mso-bidi-font-size: 12.0pt;" lang="EN-US"><span style="font-size: small; font-family: Times New Roman;"> </span></span></p> 
<h4 style="margin: 14.4pt 0cm 9.6pt 5.25pt;"><a name="_Toc189040217"></a><span style="font-size: small;"><span style="mso-bookmark: _Toc189040217;"><span style="background: white; mso-no-proof: yes;" lang="EN-US">3.1.2</span></span><span style="mso-bookmark: _Toc189040217;"><span lang="EN-US"><span style="mso-spacerun: yes;">  </span></span></span><span style="mso-bookmark: _Toc189040217;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">业务控制器</span><span lang="EN-US">Action </span></span></span></h4> 
<p> </p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">业务控制器</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">是由开发者自己编写实现的，</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类可以是一个简单的</span><span lang="EN-US"><span style="font-family: Times New Roman;">Java</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类，与</span><span lang="EN-US"><span style="font-family: Times New Roman;">Servlet API</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">完全分离。</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">一般都有一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">execute()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">方法，也可以定义其他业务控制方法，详细内容将在后面介绍。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的</span><span lang="EN-US"><span style="font-family: Times New Roman;">execute()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">返回一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">String</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类型值，这与</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 1</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">返回的</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionForward</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">相比，简单易懂。</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">提供了一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionSupport</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">工具类，该类实现了</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">接口和</span><span lang="EN-US"><span style="font-family: Times New Roman;">validate()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">方法，一般开发者编写</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">可以直接继承</span><span lang="EN-US"><span style="font-family: Times New Roman;">ActionSupport</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类。编写</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类后，开发者还必须在配置文件中配置</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的配置应该包含下面几个元素：</span></span></p> 
<p class="a1" style="margin: 0cm 0cm 0pt 32.35pt; text-indent: -11.35pt;"><span style="font-family: 'Wingdings 2'; mso-fareast-font-family: 'Wingdings 2'; mso-bidi-font-family: 'Wingdings 2';" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-size: small;"></span><span style="font: 7pt 'Times New Roman';"> </span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">该</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的</span><span lang="EN-US"><span style="font-family: Times New Roman;">name</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，即用户请求所指向的</span><span lang="EN-US"><span style="font-family: Times New Roman;">URL</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></p> 
<p class="a1" style="margin: 0cm 0cm 0pt 32.35pt; text-indent: -11.35pt;"><span style="font-family: 'Wingdings 2'; mso-fareast-font-family: 'Wingdings 2'; mso-bidi-font-family: 'Wingdings 2';" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-size: small;"></span><span style="font: 7pt 'Times New Roman';"> </span></span></span><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所对应的</span><span lang="EN-US"><span style="font-family: Times New Roman;">class</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">元素，对应</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类的位置。</span></span></p> 
<p class="a1" style="margin: 0cm 0cm 0pt 32.35pt; text-indent: -11.35pt;"><span style="font-family: 'Wingdings 2'; mso-fareast-font-family: 'Wingdings 2'; mso-bidi-font-family: 'Wingdings 2';" lang="EN-US"><span style="mso-list: Ignore;"><span style="font-size: small;"></span><span style="font: 7pt 'Times New Roman';"> </span></span></span><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指定</span><span lang="EN-US"><span style="font-family: Times New Roman;">result</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">逻辑名称和实际资源的定位。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">是业务控制器，笔者建议在编写</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的时候，尽量避免将业务逻辑放到其中，尽量减少</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">与业务逻辑模块或者组件的耦合程度。</span></span></p> 
<h4 style="margin: 14.4pt 0cm 9.6pt 5.25pt;"><a name="_Toc189040218"></a><span style="font-size: small;"><span style="mso-bookmark: _Toc189040218;"><span style="background: white; mso-no-proof: yes;" lang="EN-US">3.1.3</span></span><span style="mso-bookmark: _Toc189040218;"><span lang="EN-US"><span style="mso-spacerun: yes;">  </span></span></span><span style="mso-bookmark: _Toc189040218;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">业务模型组件</span><span lang="EN-US"> </span></span></span></h4> 
<p> </p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">业务模型组件可以是实现业务逻辑的模块，可以是</span><span lang="EN-US"><span style="font-family: Times New Roman;">EJB</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">POJO</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">或者</span><span lang="EN-US"><span style="font-family: Times New Roman;">JavaBean</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，在实际开发中，对业务模型组件的区分和定义也是比较模糊的，实际上也超出了</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架的范围。不同的开发者或者团队，都有自己的方式来实现业务逻辑模块，</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架的目的就是使用</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">来调用业务逻辑模块。例如一个银行存款的业务逻辑模块，如代码</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.3</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示。</span></span></p> 
<div style="border-right: medium none; padding-right: 0cm; border-top: medium none; padding-left: 0cm; padding-bottom: 1pt; border-left: medium none; padding-top: 0cm; border-bottom: windowtext 1pt solid; mso-element: para-border-div; mso-border-bottom-alt: solid windowtext .5pt;"> 
 <p class="a5" style="margin: 6pt 0cm 3.6pt;"><span style="font-size: small;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">代码</span><span lang="EN-US">3.3<span style="mso-spacerun: yes;">  </span></span><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">模拟一个银行业务的实现模块</span></span></p> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"> </p> 
<div style="padding-right: 5.4pt; padding-left: 5.4pt; background: #e6e6e6; padding-bottom: 4px; width: 95%; word-break: break-all; padding-top: 4px; border: windowtext 0.5pt solid;"> 
 <div> 
  <img src="https://images2.imgbox.com/d1/99/AHkGndl2_o.gif" alt="" align="top"> 
  <span style="color: #0000ff;">package</span> 
  <span style="color: #000000;"> ch3;<br><img src="https://images2.imgbox.com/b5/b9/HJ96Jr1O_o.gif" alt="" align="top"><br><img id="_32_584_Open_Image" src="https://images2.imgbox.com/68/e2/69x3UTK0_o.gif" alt="" align="top"><img id="_32_584_Closed_Image" style="display: none;" src="https://images2.imgbox.com/bb/b1/zO2ZhTGz_o.gif" alt="" align="top"></span> 
  <span style="color: #0000ff;">public</span> 
  <span style="color: #000000;"> </span> 
  <span style="color: #0000ff;">class</span> 
  <span style="color: #000000;"> Bank </span> 
  <span id="_32_584_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span> 
  <span id="_32_584_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/b8/6a/p4ebdzxm_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ef/a0/M9JHmZ3X_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">定义银行账户</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/f6/7c/DBoNlxiP_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/14/7f/BzykuYAB_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String accounts;<br><img src="https://images2.imgbox.com/1d/5a/0OZeJlfg_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/78/c9/NXxwxTQl_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">定义操作金额</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/7c/b4/ro1xnF05_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/fb/76/xUJZu7OJ_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> money;<br><img src="https://images2.imgbox.com/61/9d/HLgweWq4_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c0/3c/1f7oMA7K_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">属性的getter和setter方法</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/1b/a7/hlh9u9rX_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img id="_178_211_Open_Image" src="https://images2.imgbox.com/c8/15/jjJqpwC6_o.gif" alt="" align="top"><img id="_178_211_Closed_Image" style="display: none;" src="https://images2.imgbox.com/6b/e0/UV52ChnJ_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getAccounts() </span><span id="_178_211_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_178_211_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/c8/09/vBs0Lqww_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b3/c3/0LNditZc_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> accounts;<br><img src="https://images2.imgbox.com/2d/72/oZWoajv8_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b0/0b/kukXfzze_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/9e/6c/KdrftLeI_o.gif" alt="" align="top"><br><img id="_259_301_Open_Image" src="https://images2.imgbox.com/0a/bc/dWtNGtqd_o.gif" alt="" align="top"><img id="_259_301_Closed_Image" style="display: none;" src="https://images2.imgbox.com/3f/33/mkBKjkia_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setAccounts(String accounts) </span><span id="_259_301_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_259_301_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/64/ef/25RjnRp6_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/5f/a6/oyphdH38_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.accounts </span><span style="color: #000000;">=</span><span style="color: #000000;"> accounts;<br><img src="https://images2.imgbox.com/3c/12/uCFPOwwv_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/a7/f9/RabSe97Z_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/5a/b4/p5YYr30M_o.gif" alt="" align="top"><br><img id="_333_363_Open_Image" src="https://images2.imgbox.com/86/0b/K9ogO6rr_o.gif" alt="" align="top"><img id="_333_363_Closed_Image" style="display: none;" src="https://images2.imgbox.com/51/7e/0OjRtdvW_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> getMoney() </span><span id="_333_363_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_333_363_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/9d/9b/eG1CDUYd_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/9a/77/yxE28xOw_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> money;<br><img src="https://images2.imgbox.com/5e/aa/5bxvPzlh_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b3/d1/r5ib16CQ_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/81/75/aaaackJB_o.gif" alt="" align="top"><br><img id="_405_441_Open_Image" src="https://images2.imgbox.com/af/c6/zwVp2MVk_o.gif" alt="" align="top"><img id="_405_441_Closed_Image" style="display: none;" src="https://images2.imgbox.com/6f/b9/g5pvooVo_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setMoney(</span><span style="color: #0000ff;">double</span><span style="color: #000000;"> money) </span><span id="_405_441_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_405_441_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/73/53/6WwZyzkK_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/77/0e/0624qevn_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.money </span><span style="color: #000000;">=</span><span style="color: #000000;"> money;<br><img src="https://images2.imgbox.com/10/d7/k3iCrCdO_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/df/94/t8PQB4bc_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/94/cd/5x789JRX_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d3/55/uMl09F7I_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">模拟银行存款方法</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/6a/5a/hO4f66e4_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img id="_517_578_Open_Image" src="https://images2.imgbox.com/9d/d7/mUgiJb5E_o.gif" alt="" align="top"><img id="_517_578_Closed_Image" style="display: none;" src="https://images2.imgbox.com/b5/3e/jQNRwfw5_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">boolean</span><span style="color: #000000;"> saving(String accounts, </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> money) </span><span id="_517_578_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_517_578_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/10/65/2ZBEhzG2_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/c7/da/KIzWnumA_o.gif" alt="" align="top">        </span><span style="color: #008000;">//</span><span style="color: #008000;">调用DAO等模块读写数据库</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/e7/9f/oONx3wNw_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/72/ab/4q5rbz1E_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> dosomeing();<br><img src="https://images2.imgbox.com/96/cb/iPlYqGPy_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ca/f2/a0WTxFh5_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/13/fc/BmRr9YJR_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/59/96/pdmW8BGD_o.gif" alt="" align="top"> <br><img src="https://images2.imgbox.com/51/f0/ySj4dtv0_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/b6/57/xmTVBaMD_o.gif" alt="" align="top">}</span></span> 
  <span style="color: #000000;"><br><img src="https://images2.imgbox.com/db/05/J44YMyaM_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d1/e9/alLwRGwN_o.gif" alt="" align="top"></span> 
 </div> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"> </p> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">上面实例在实际开发中没有任何意义，这里只是作为业务逻辑模块来说明，在执行</span><span lang="EN-US"><span style="font-family: Times New Roman;">saving(String accounts,double money)</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">方法时，可以调用相应的数据库访问其他组件，来实现存款操作。使用</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">调用该业务逻辑组件可以在</span><span lang="EN-US"><span style="font-family: Times New Roman;">execute()</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">方法中实现，如代码</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.4</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示。</span></span></p> 
<div style="border-right: medium none; padding-right: 0cm; border-top: medium none; padding-left: 0cm; padding-bottom: 1pt; border-left: medium none; padding-top: 0cm; border-bottom: windowtext 1pt solid; mso-element: para-border-div; mso-border-bottom-alt: solid windowtext .5pt;"> 
 <p class="a5" style="margin: 6pt 0cm 3.6pt;"><span style="font-size: small;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">代码</span><span lang="EN-US">3.4<span style="mso-spacerun: yes;">  </span></span><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">业务控制器</span><span lang="EN-US">Bank_Saving_Action</span></span></p> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"></span></p> 
<div style="padding-right: 5.4pt; padding-left: 5.4pt; background: #e6e6e6; padding-bottom: 4px; width: 95%; word-break: break-all; padding-top: 4px; border: windowtext 0.5pt solid;"> 
 <div> 
  <img src="https://images2.imgbox.com/6e/ef/v48jpGo2_o.gif" alt="" align="top"> 
  <span style="color: #0000ff;">package</span> 
  <span style="color: #000000;"> ch3;<br><img src="https://images2.imgbox.com/3d/41/5QpyJZxu_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/29/ff/P5doqLo0_o.gif" alt="" align="top"></span> 
  <span style="color: #0000ff;">import</span> 
  <span style="color: #000000;"> java.util.Map;<br><img src="https://images2.imgbox.com/f6/bb/FnoxDSas_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/df/55/euZkDFHf_o.gif" alt="" align="top"></span> 
  <span style="color: #0000ff;">import</span> 
  <span style="color: #000000;"> com.opensymphony.xwork2.ActionContext;<br><img src="https://images2.imgbox.com/88/1e/hk2ZwLM5_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/72/bc/RDSbaLUo_o.gif" alt="" align="top"></span> 
  <span style="color: #0000ff;">import</span> 
  <span style="color: #000000;"> com.opensymphony.xwork2.ActionSupport;<br><img src="https://images2.imgbox.com/92/82/YhldIWb4_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f1/0e/LGgfAMih_o.gif" alt="" align="top"> <br><img src="https://images2.imgbox.com/61/10/0yTugUj2_o.gif" alt="" align="top"><br><img id="_188_850_Open_Image" src="https://images2.imgbox.com/de/5b/cCUva5Rb_o.gif" alt="" align="top"><img id="_188_850_Closed_Image" style="display: none;" src="https://images2.imgbox.com/06/cf/5NOSXaVM_o.gif" alt="" align="top"></span> 
  <span style="color: #0000ff;">public</span> 
  <span style="color: #000000;"> </span> 
  <span style="color: #0000ff;">class</span> 
  <span style="color: #000000;"> Bank_Saving_Action </span> 
  <span style="color: #0000ff;">extends</span> 
  <span style="color: #000000;"> ActionSupport </span> 
  <span id="_188_850_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span> 
  <span id="_188_850_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/98/27/vGlrCXte_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d5/e6/Qdb1jsL6_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">定义银行账户</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/29/1c/WVEInLRz_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/94/32/Kwt0qX8e_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> String accounts;<br><img src="https://images2.imgbox.com/7b/bd/pBHVpIWl_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/73/72/Oo5T4nNJ_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">定义操作金额</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/13/b6/HAJLoJLf_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/12/14/XDoAkAta_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> money;<br><img src="https://images2.imgbox.com/1f/63/wFGpljJw_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/ae/45/OTUjPpZ9_o.gif" alt="" align="top">    <br><img src="https://images2.imgbox.com/a4/cd/Lee2gCyF_o.gif" alt="" align="top"><br><img id="_327_514_Open_Image" src="https://images2.imgbox.com/c1/4e/Cl05mXhU_o.gif" alt="" align="top"><img id="_327_514_Closed_Image" style="display: none;" src="https://images2.imgbox.com/12/06/0IuXPbru_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String execute() </span><span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception </span><span id="_327_514_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_327_514_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/ea/b2/vdxbell8_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/2f/80/cuHTdHNJ_o.gif" alt="" align="top">        </span><span style="color: #008000;">//</span><span style="color: #008000;">创建Bank实例</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/d2/0b/7d73OIZO_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/3c/77/zc9h6qRO_o.gif" alt="" align="top">        Bank bk</span><span style="color: #000000;">=</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> Bank();<br><img src="https://images2.imgbox.com/12/a8/owf6PrRJ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/3b/b7/rHsgRY9D_o.gif" alt="" align="top">        </span><span style="color: #008000;">//</span><span style="color: #008000;">调用存款方法</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/73/27/jhE94pM1_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img id="_436_472_Open_Image" src="https://images2.imgbox.com/61/1b/K6kOiEIG_o.gif" alt="" align="top"><img id="_436_472_Closed_Image" style="display: none;" src="https://images2.imgbox.com/c0/06/HEakWWPg_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (bk.saving(accounts, money))</span><span id="_436_472_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_436_472_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/b2/ab/Ac7vvuJW_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/69/43/Q1jcMJyR_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> SUCCESS;<br><img src="https://images2.imgbox.com/aa/c5/9qIS6mSO_o.gif" alt="" align="top"><br><img id="_477_511_Open_Image" src="https://images2.imgbox.com/22/c6/LIF4Tu3q_o.gif" alt="" align="top"><img id="_477_511_Closed_Image" style="display: none;" src="https://images2.imgbox.com/f2/16/R5IUSItc_o.gif" alt="" align="top">        }</span></span><span style="color: #0000ff;">else</span><span id="_477_511_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_477_511_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/33/78/lzzgMVHA_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/e3/e1/GhNQjPLf_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> ERROR;<br><img src="https://images2.imgbox.com/93/63/awLRJkVp_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/14/f7/A9jgahfP_o.gif" alt="" align="top">        }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/95/53/XELAlSbT_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/27/d7/LW2aawqL_o.gif" alt="" align="top">}</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/08/2a/i3dubp6x_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/d5/ad/KbrC7NKQ_o.gif" alt="" align="top">    </span><span style="color: #008000;">//</span><span style="color: #008000;">属性的getter和setter方法</span><span style="color: #008000;"><br><img src="https://images2.imgbox.com/e8/ba/mBRD7e58_o.gif" alt="" align="top"></span><span style="color: #000000;"><br><img id="_575_608_Open_Image" src="https://images2.imgbox.com/ac/28/JgEbObBa_o.gif" alt="" align="top"><img id="_575_608_Closed_Image" style="display: none;" src="https://images2.imgbox.com/3a/00/BM11AUNO_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> String getAccounts() </span><span id="_575_608_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_575_608_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/f4/c8/cWvewgHQ_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/46/92/ZWpB26kO_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> accounts;<br><img src="https://images2.imgbox.com/cc/7a/Do51NWBX_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f1/9b/LzSv7tGk_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/fa/7d/TbOYnoIu_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/09/16/8Z0cylKj_o.gif" alt="" align="top"> <br><img src="https://images2.imgbox.com/57/85/MGAwtFMJ_o.gif" alt="" align="top"><br><img id="_659_701_Open_Image" src="https://images2.imgbox.com/ba/67/lDODWCQI_o.gif" alt="" align="top"><img id="_659_701_Closed_Image" style="display: none;" src="https://images2.imgbox.com/04/36/QLuJzKBq_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setAccounts(String accounts) </span><span id="_659_701_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_659_701_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/cb/e6/gnroUdHk_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/44/c1/TSHRlFcS_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.accounts </span><span style="color: #000000;">=</span><span style="color: #000000;"> accounts;<br><img src="https://images2.imgbox.com/c6/5f/dVzXKYJf_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f2/ea/qLmhwpcR_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/68/d8/AWE2bRgv_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/32/1a/NR7lyW37_o.gif" alt="" align="top"> <br><img src="https://images2.imgbox.com/2b/22/tE7AQ7OH_o.gif" alt="" align="top"><br><img id="_736_766_Open_Image" src="https://images2.imgbox.com/b8/4b/fSxY6NWe_o.gif" alt="" align="top"><img id="_736_766_Closed_Image" style="display: none;" src="https://images2.imgbox.com/7c/bd/uNUTcLXZ_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">double</span><span style="color: #000000;"> getMoney() </span><span id="_736_766_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_736_766_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/93/48/kaK85Qzv_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/96/04/pGXSY1Z0_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> money;<br><img src="https://images2.imgbox.com/66/d0/CssFzfcF_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/f9/22/pMCXUWHS_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/a9/76/nokidrZn_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/94/c0/mSofyK3L_o.gif" alt="" align="top"> <br><img src="https://images2.imgbox.com/8d/75/3qW3Su8s_o.gif" alt="" align="top"><br><img id="_811_847_Open_Image" src="https://images2.imgbox.com/5a/09/o5iW3BEG_o.gif" alt="" align="top"><img id="_811_847_Closed_Image" style="display: none;" src="https://images2.imgbox.com/85/9f/DRfTVVvO_o.gif" alt="" align="top">    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> </span><span style="color: #0000ff;">void</span><span style="color: #000000;"> setMoney(</span><span style="color: #0000ff;">double</span><span style="color: #000000;"> money) </span><span id="_811_847_Closed_Text" style="display: none; background-color: #ffffff; border: #808080 1px solid;">...</span><span id="_811_847_Open_Text"><span style="color: #000000;">{<!-- --><br><img src="https://images2.imgbox.com/e0/91/NKyRETiq_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/6e/f2/BNKb4Kiq_o.gif" alt="" align="top">        </span><span style="color: #0000ff;">this</span><span style="color: #000000;">.money </span><span style="color: #000000;">=</span><span style="color: #000000;"> money;<br><img src="https://images2.imgbox.com/5e/99/rTiydSIj_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/4e/ac/6E5VVBH3_o.gif" alt="" align="top">    }</span></span><span style="color: #000000;"><br><img src="https://images2.imgbox.com/25/23/bVEYYFYk_o.gif" alt="" align="top"><br><img src="https://images2.imgbox.com/55/7f/ox22f3lA_o.gif" alt="" align="top"></span></span> 
 </div> 
</div> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"> </p> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Bank_Saving_Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">演示了对银行存款业务逻辑组件的调用，这里是通过在</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中创建业务逻辑组件实例的方式实现的。在实际开发中，可以使用静态工厂获得业务逻辑组件的实例或者使用</span><span lang="EN-US"><span style="font-family: Times New Roman;">IoC</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">容器来管理。</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中不实现任何业务逻辑，只是负责组织调度业务逻辑组件。调用关系如图</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.3</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示。</span></span></p> 
<p class="a4" style="margin: 6pt 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><img src="https://images2.imgbox.com/75/5e/FElFpkur_o.jpg" alt=""></span></span></p> 
<p class="a" style="margin: 7.2pt 0cm 3.6pt;"><span lang="EN-US"></span></p> 
<p class="a0" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">图</span><span lang="EN-US"><span style="font-family: Times New Roman;">3.3<span style="mso-spacerun: yes;">  </span></span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">调用业务逻辑组件</span></p> 
<p class="MsoNormal" style="page-break-before: always; margin: 6pt 0cm 9.6pt 21pt; text-indent: 0cm; mso-char-indent-count: 0; mso-para-margin-top: .5gd; mso-para-margin-right: 0cm; mso-para-margin-bottom: .8gd; mso-para-margin-left: 2.0gd;"><span style="font-size: 11pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">★</span><span style="font-size: 11pt; mso-bidi-font-size: 12.0pt;"><span style="font-family: Times New Roman;"> </span></span><span style="font-size: 11pt; font-family: 黑体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">说明</span><span style="font-size: 11pt; mso-bidi-font-size: 12.0pt;"><span style="font-family: Times New Roman;"> </span></span><span style="font-size: 11pt; font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman'; mso-bidi-font-size: 12.0pt;">★</span></p> 
<p class="a3" style="margin: 0cm 10.5pt 0pt;"><span style="font-size: small;"><span style="font-family: Times New Roman;"><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">业务控制器</span><span lang="EN-US">Action</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">一般情况下不是直接创建业务逻辑组件实例，而是使用工厂模式或者是从</span><span lang="EN-US">Spring</span><span style="font-family: 方正楷体简体; mso-ascii-font-family: 'Times New Roman';">容器中获得业务逻辑组件实例，这样可以提高系统的性能。</span></span></span></p> 
<p class="MsoNormalIndent" style="margin: 0cm 0cm 0pt; line-height: 15.6pt; mso-char-indent-count: 2.0; punctuation-trim: leading;"><span style="mso-bidi-font-size: 12.0pt;" lang="EN-US"><span style="font-size: small; font-family: Times New Roman;"> </span></span></p> 
<h4 style="margin: 14.4pt 0cm 9.6pt 5.25pt;"><a name="_Toc189040219"></a><span style="font-size: small;"><span style="mso-bookmark: _Toc189040219;"><span style="background: white; mso-no-proof: yes;" lang="EN-US">3.1.4</span></span><span style="mso-bookmark: _Toc189040219;"><span lang="EN-US"><span style="mso-spacerun: yes;">  </span></span></span><span style="mso-bookmark: _Toc189040219;"><span style="font-family: 黑体; mso-ascii-font-family: Arial; mso-hansi-font-family: Arial;">视图组件</span><span lang="EN-US"> </span></span></span></h4> 
<p> </p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 1</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">只能支持</span><span lang="EN-US"><span style="font-family: Times New Roman;">JSP</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">作为视图资源，而</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的进步之处就是可以使用其他视图技术，如</span><span lang="EN-US"><span style="font-family: Times New Roman;">FreeMarker</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US"><span style="font-family: Times New Roman;">Velocity</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">等。通过前面的学习和示例，读者会知道</span><span lang="EN-US"><span style="font-family: Times New Roman;">Action</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的返回结果只是一个简单的字符串，也就是一个逻辑上的视图名称，要与实际视图资源对应，必须通过配置文件来实现。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">在</span><span lang="EN-US"><span style="font-family: Times New Roman;">struts.xml</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">配置文件中，每一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">Aciton</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">定义都有</span><span lang="EN-US"><span style="font-family: Times New Roman;">name</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US"><span style="font-family: Times New Roman;">class</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">属性，同时还要指定</span><span lang="EN-US"><span style="font-family: Times New Roman;">result</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">元素。</span><span lang="EN-US"><span style="font-family: Times New Roman;">result</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">元素指定了逻辑视图名称和实际视图的对应关系。每个</span><span lang="EN-US"><span style="font-family: Times New Roman;">result</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">都有一个</span><span lang="EN-US"><span style="font-family: Times New Roman;">type</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">属性，前面介绍的</span><span lang="EN-US"><span style="font-family: Times New Roman;">struts.xml</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中并没有显式指定</span><span lang="EN-US"><span style="font-family: Times New Roman;">type</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">值，即使用了默认的</span><span lang="EN-US"><span style="font-family: Times New Roman;">type</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">类型：</span><span lang="EN-US"><span style="font-family: Times New Roman;">dispatcher</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，该结果类型支持</span><span lang="EN-US"><span style="font-family: Times New Roman;">JSP</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所谓视图资源。</span></span></p> 
<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 21pt;"><span style="font-size: small;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">对于</span><span lang="EN-US"><span style="font-family: Times New Roman;">Struts 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的视图技术和</span><span lang="EN-US"><span style="font-family: Times New Roman;">result</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">返回类型，后面将详细介绍。总结</span><span lang="EN-US"><span style="font-family: Times New Roman;">Strurs 2</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的框架工作流程，发现与</span><span lang="EN-US"><span style="font-family: Times New Roman;">WebWork</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">基本相同，可以参考第</span><span lang="EN-US"><span style="font-family: Times New Roman;">1</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">章关于</span><span lang="EN-US"><span style="font-family: Times New Roman;">WebWork</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">框架的介绍和流程图（如图</span><span lang="EN-US"><span style="font-family: Times New Roman;">1.8</span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">所示）。</span></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0b53fd769ee7a43e5cf62586013e9e23/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Struts2 表单提交 POJO</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f8bef302c3f45449884c9e444a5e21fd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">还没整理的一些编码转换代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>