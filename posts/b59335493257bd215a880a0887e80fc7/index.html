<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>matlab算2个数组的关系,匹配不用MATLAB中的函数,两个矩阵互相关系数怎么求? - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="matlab算2个数组的关系,匹配不用MATLAB中的函数,两个矩阵互相关系数怎么求?" />
<meta property="og:description" content="%% 互相关函数，获取到输入块block1 在block2中相关最高的位置及对应的相关函数结果
% 输入参数
% Block1：需要匹配的块，在Block2中检索与该快相似性最高的块；大小小于等于Block2
% Block2：大于等于Block1
% 其中Block1与Block2的正中心重合，即Block1的位置在Block2的正中心
% lateralstep：互相关过程中，横向移动步进，单位为像素点的整数倍
% axialstep：互相关过程中，纵向移动步进，单位为像素点的整数倍
% halflateralnum：横向块移动次数的一半，负数向左，正数向右
% halfaxialnum：纵向块移动次数的一半，负数向上，正数向下
% 输出参数
% x：在Block2中，与Block1最相似的块移动的横向距离,单位为像素点
% y：在Block2中，与Block1最相似的块移动的纵向距离，单位为像素点
% R12：Block1与Block2中最相似的块之间的互相关结果(复数)
%% 对Block2是有要求的，BLock2是Block1步进的偶数倍，即要保证Block1在Block2中的移动是对称的
function [x y R12] = ZPP_CrossCorrelation(Block1,Block2,lateralstep,axialstep,halflateralnum,halfaxialnum)
[m1 n1] = size(Block1);
[m2 n2] = size(Block2);
Ra = zeros(halfaxialnum*2&#43;1,halflateralnum*2&#43;1);
pro_data = Block1;
for i = 1 : halfaxialnum*2&#43;1
for j = 1 : halflateralnum*2&#43;1
clear temp;
clear post_data;
axial_num = (1:m1) &#43; (i - 1)*axialstep;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b59335493257bd215a880a0887e80fc7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-16T14:22:34+08:00" />
<meta property="article:modified_time" content="2021-03-16T14:22:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">matlab算2个数组的关系,匹配不用MATLAB中的函数,两个矩阵互相关系数怎么求?</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>%% 互相关函数，获取到输入块block1 在block2中相关最高的位置及对应的相关函数结果</p> 
 <p>% 输入参数</p> 
 <p>% Block1：需要匹配的块，在Block2中检索与该快相似性最高的块；大小小于等于Block2</p> 
 <p>% Block2：大于等于Block1</p> 
 <p>% 其中Block1与Block2的正中心重合，即Block1的位置在Block2的正中心</p> 
 <p>% lateralstep：互相关过程中，横向移动步进，单位为像素点的整数倍</p> 
 <p>% axialstep：互相关过程中，纵向移动步进，单位为像素点的整数倍</p> 
 <p>% halflateralnum：横向块移动次数的一半，负数向左，正数向右</p> 
 <p>% halfaxialnum：纵向块移动次数的一半，负数向上，正数向下</p> 
 <p>% 输出参数</p> 
 <p>% x：在Block2中，与Block1最相似的块移动的横向距离,单位为像素点</p> 
 <p>% y：在Block2中，与Block1最相似的块移动的纵向距离，单位为像素点</p> 
 <p>% R12：Block1与Block2中最相似的块之间的互相关结果(复数)</p> 
 <p>%% 对Block2是有要求的，BLock2是Block1步进的偶数倍，即要保证Block1在Block2中的移动是对称的</p> 
 <p>function [x y R12] = ZPP_CrossCorrelation(Block1,Block2,lateralstep,axialstep,halflateralnum,halfaxialnum)</p> 
 <p>[m1 n1] = size(Block1);</p> 
 <p>[m2 n2] = size(Block2);</p> 
 <p>Ra = zeros(halfaxialnum*2+1,halflateralnum*2+1);</p> 
 <p>pro_data = Block1;</p> 
 <p>for i = 1 : halfaxialnum*2+1</p> 
 <p>for j = 1 : halflateralnum*2+1</p> 
 <p>clear temp;</p> 
 <p>clear post_data;</p> 
 <p>axial_num = (1:m1) + (i - 1)*axialstep;</p> 
 <p>lateral_num = (1:n1) + (j - 1)*lateralstep;</p> 
 <p>post_data = Block2(axial_num,lateral_num);</p> 
 <p>temp = pro_data.*conj(post_data);</p> 
 <p>Ra(i,j) = sum(temp(:));</p> 
 <p>% 加上相关系数，使用相关系数去解</p> 
 <p>temp1 = abs(Ra(i,j));</p> 
 <p>temp_2 = pro_data.^2;</p> 
 <p>temp2 = sum(temp_2(:));</p> 
 <p>temp_3 = post_data.^2;</p> 
 <p>temp3 = sum(temp_3(:));</p> 
 <p>temp4 = sqrt(temp2*temp3);</p> 
 <p>RA_Ctn(i,j) = temp1/temp4;</p> 
 <p>end</p> 
 <p>end</p> 
 <p>% [temp_y temp_x] = find(abs(Ra) == max(abs(Ra(:)))); % 找出最大值的点</p> 
 <p>[temp_y temp_x] = find(abs(RA_Ctn) == max(abs(RA_Ctn(:)))); % 找出最大值的点</p> 
 <p>x = (temp_x - 1 - halflateralnum) * lateralstep; % 横向移动的间距为第几列</p> 
 <p>y = (temp_y - 1 - halfaxialnum) * axialstep; % 纵向移动的间距为第几行</p> 
 <p>R12 = Ra(temp_y,temp_x);</p> 
 <p>end</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f418ec886409f4c2d62fbe7877c0cfec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ADC输入接地输出不为0，ADC值跳动厉害</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a23ac1b71c3c1e205263c305427f2824/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序页面如何滚动到底部</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>