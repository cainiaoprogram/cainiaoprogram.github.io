<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>快速安装部署hadoop-3.3.1-单机版 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="快速安装部署hadoop-3.3.1-单机版" />
<meta property="og:description" content="文章目录 前言一、准备工作1、下载hadoop-3.3.12、修改环境变量配置文件3、服务器免密登录4、脚本文件在文件夹信息 二、安装创建/修改配置文件1、创建`core-site.xml`文件2、创建`hdfs-site.xml`文件3、创建运行脚本文件`install_shell.sh`4、上传并运行脚本5、访问`NameNode`的网页界面 前言 本文只是对hadoop进行单机版简单安装使用，并使用脚本快速安装hadoop单机版，有一些配置如yarn配置没有修改，但是会进行简单说明。全程使用root用户。
一、准备工作 1、下载hadoop-3.3.1 阿里镜像hadoop3.3.1
下载安装jdk：略
2、修改环境变量配置文件 vim /etc/profile 移动到文件末尾，按小写字母i进入插入模式，添加或修改下面的内容：
export HADOOP_HOME=/root/soft/hadoop-3.3.1 export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin 注意：PATH是修改之前配置JDK的那个，仅较之前添加了:$HADOOP_HOME/bin！
修改完大概是这样的：
使环境变量生效
source /etc/profile 3、服务器免密登录 ssh-keygen -t rsa -P &#39;&#39; -f ~/.ssh/id_rsa cat ~/.ssh/id_rsa.pub &gt;&gt; ~/.ssh/authorized_keys chmod 0600 ~/.ssh/authorized_keys 4、脚本文件在文件夹信息 文件内容（需上传到服务器或虚拟机上）
二、安装 创建/修改配置文件 在要上传的文件夹下操作
1、创建core-site.xml文件 &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;?xml-stylesheet type=&#34;text/xsl&#34; href=&#34;configuration.xsl&#34;?&gt; &lt;!-- Licensed under the Apache License, Version 2.0 (the &#34;License&#34;); you may not use this file except in compliance with the License." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2b0dbfe6bb09df444b75ae8136a85abb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-06T10:45:08+08:00" />
<meta property="article:modified_time" content="2023-02-06T10:45:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">快速安装部署hadoop-3.3.1-单机版</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_5" rel="nofollow">前言</a></li><li><a href="#_10" rel="nofollow">一、准备工作</a></li><li><ul><li><ul><li><a href="#1hadoop331_12" rel="nofollow">1、下载hadoop-3.3.1</a></li><li><a href="#2_15" rel="nofollow">2、修改环境变量配置文件</a></li><li><a href="#3_32" rel="nofollow">3、服务器免密登录</a></li><li><a href="#4_39" rel="nofollow">4、脚本文件在文件夹信息</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_44" rel="nofollow">二、安装</a></li><li><ul><li><a href="#_46" rel="nofollow">创建/修改配置文件</a></li><li><ul><li><a href="#1coresitexml_48" rel="nofollow">1、创建`core-site.xml`文件</a></li><li><a href="#2hdfssitexml_88" rel="nofollow">2、创建`hdfs-site.xml`文件</a></li><li><a href="#3install_shellsh_128" rel="nofollow">3、创建运行脚本文件`install_shell.sh`</a></li><li><a href="#4_174" rel="nofollow">4、上传并运行脚本</a></li><li><a href="#5NameNode_184" rel="nofollow">5、访问`NameNode`的网页界面</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_5"></a>前言</h2> 
<p>本文只是对hadoop进行单机版简单安装使用，并使用脚本快速安装hadoop单机版，有一些配置如yarn配置没有修改，但是会进行简单说明。全程使用root用户。</p> 
<hr> 
<h2><a id="_10"></a>一、准备工作</h2> 
<h4><a id="1hadoop331_12"></a>1、下载hadoop-3.3.1</h4> 
<p><a href="https://mirrors.aliyun.com/apache/hadoop/core/hadoop-3.3.1/hadoop-3.3.1.tar.gz?spm=a2c6h.25603864.0.0.7cf829d9kHmMTn" rel="nofollow">阿里镜像hadoop3.3.1</a><br> 下载安装jdk：略</p> 
<h4><a id="2_15"></a>2、修改环境变量配置文件</h4> 
<pre><code class="prism language-shell"><span class="token function">vim</span> /etc/profile
</code></pre> 
<p>移动到文件末尾，按小写字母i进入插入模式，添加或修改下面的内容：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/root/soft/hadoop-3.3.1
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/bin
</code></pre> 
<p>注意：PATH是修改之前配置JDK的那个，仅较之前添加了:$HADOOP_HOME/bin！<br> 修改完大概是这样的：<br> <img src="https://images2.imgbox.com/cc/d8/UtqIEPL0_o.png" alt="在这里插入图片描述"><br> 使环境变量生效</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<h4><a id="3_32"></a>3、服务器免密登录</h4> 
<pre><code class="prism language-shell">ssh-keygen <span class="token parameter variable">-t</span> rsa <span class="token parameter variable">-P</span> <span class="token string">''</span> <span class="token parameter variable">-f</span> ~/.ssh/id_rsa
<span class="token function">cat</span> ~/.ssh/id_rsa.pub <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
<span class="token function">chmod</span> 0600 ~/.ssh/authorized_keys
</code></pre> 
<h4><a id="4_39"></a>4、脚本文件在文件夹信息</h4> 
<blockquote> 
 <p>文件内容（需上传到服务器或虚拟机上）</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/21/6f/Iswdpekh_o.png" alt="需要上服务器的文件夹"></p> 
<h2><a id="_44"></a>二、安装</h2> 
<h3><a id="_46"></a>创建/修改配置文件</h3> 
<p><code>在要上传的文件夹下操作</code></p> 
<h4><a id="1coresitexml_48"></a>1、创建<code>core-site.xml</code>文件</h4> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token prolog">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span>
<span class="token comment">&lt;!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
--&gt;</span>

<span class="token comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.default.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://127.0.0.1:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://127.0.0.1:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/root/soft/hadoop-3.3.1/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<h4><a id="2hdfssitexml_88"></a>2、创建<code>hdfs-site.xml</code>文件</h4> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token prolog">&lt;?xml-stylesheet type="text/xsl" href="configuration.xsl"?&gt;</span>
<span class="token comment">&lt;!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License. See accompanying LICENSE file.
--&gt;</span>

<span class="token comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.name.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/root/soft/hadoop-3.3.1/hdfs/name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.data.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/root/soft/hadoop-3.3.1/hdfs/data<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="3install_shellsh_128"></a>3、创建运行脚本文件<code>install_shell.sh</code></h4> 
<blockquote> 
 <p><strong>注意</strong>:启动脚本需要加入自己本地的jdk路径，默认hadoop安装路径为 <code>/root/soft</code></p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Hello, we will install hadoop3.3.1"</span>

<span class="token comment"># hadoop 3.3.1安装脚本文件夹的位置</span>
<span class="token assign-left variable">path_shell</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">cd</span> `dirname $0`<span class="token punctuation">;</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>

<span class="token builtin class-name">echo</span> <span class="token variable">$path_shell</span>

<span class="token comment"># hadoop安装目录，这个是固定的，要是修改也要改hdfs-site.xml和 core-site.xml</span>
<span class="token builtin class-name">cd</span> /root/soft
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> <span class="token variable">$path_shell</span>/hadoop-3.3.1.tar.gz
<span class="token function">sleep</span> <span class="token number">1</span>
<span class="token builtin class-name">cd</span> ./hadoop-3.3.1
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> hdfs/data
<span class="token function">mkdir</span> hdfs/name
<span class="token function">mkdir</span> tmp

<span class="token comment"># 设置自己的jvm，这里要修改为自己的jdk位置</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'38 i export JAVA_HOME=/usr/local/jdk8'</span> /root/soft/hadoop-3.3.1/etc/hadoop/hadoop-env.sh


<span class="token builtin class-name">cd</span> etc/hadoop

<span class="token function">mv</span> <span class="token variable">$path_shell</span>/core-site.xml ./
<span class="token function">mv</span> <span class="token variable">$path_shell</span>/hdfs-site.xml ./

<span class="token comment"># root 用户启动要修改启动文件的权限</span>
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_DATANODE_USER=root'</span> /root/soft/hadoop-3.3.1/sbin/start-dfs.sh
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_DATANODE_SECURE_USER=hdfs'</span> /root/soft/hadoop-3.3.1/sbin/start-dfs.sh
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_NAMENODE_USER=root'</span> /root/soft/hadoop-3.3.1/sbin/start-dfs.sh
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_SECONDARYNAMENODE_USER=root'</span> /root/soft/hadoop-3.3.1/sbin/start-dfs.sh

<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_DATANODE_USER=root'</span> /root/soft/hadoop-3.3.1/sbin/stop-dfs.sh
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_DATANODE_SECURE_USER=hdfs'</span> /root/soft/hadoop-3.3.1/sbin/stop-dfs.sh
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_NAMENODE_USER=root'</span> /root/soft/hadoop-3.3.1/sbin/stop-dfs.sh
<span class="token function">sed</span> <span class="token parameter variable">-i</span> <span class="token string">'33 i HDFS_SECONDARYNAMENODE_USER=root'</span> /root/soft/hadoop-3.3.1/sbin/stop-dfs.sh

<span class="token builtin class-name">cd</span> /root/soft/hadoop/bin
./hdfs namenode <span class="token parameter variable">-format</span>

</code></pre> 
<h4><a id="4_174"></a>4、上传并运行脚本</h4> 
<p><img src="https://images2.imgbox.com/e7/6d/IoLNUTXx_o.png" alt="在这里插入图片描述"></p> 
<p>①压缩文件<br> ②上传 rz 或 scp<br> ③ 解压缩 unzip ./hadoop-install.zip<br> ④ 运行 cd hadoop-install, sh install_shell.sh</p> 
<h4><a id="5NameNode_184"></a>5、访问<code>NameNode</code>的网页界面</h4> 
<p><code>http://localhost:9870/</code><br> 注意：老版本的Hadoop应该访问http://localhost:50070/</p> 
<p>借鉴文章：<a href="https://www.cnblogs.com/crpfs/articles/15474488.html#3-%E9%85%8D%E7%BD%AEhadoop" rel="nofollow">https://www.cnblogs.com/crpfs/articles/15474488.html#3-%E9%85%8D%E7%BD%AEhadoop</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1d221ac3129bed0c478ff30209bbbf7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#内存泄漏原因整理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fd34e93c6cf52d632a9404d674a6a820/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Excel文件导入数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>