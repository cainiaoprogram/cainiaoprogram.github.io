<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Zookeeper 分布式服务协调治理框架介绍入门 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Zookeeper 分布式服务协调治理框架介绍入门" />
<meta property="og:description" content="文章目录 为甚么需要Zookeeper一、Zookeeper 介绍1.1 介绍1.2 Zookeeper中的一些概念1.2.1 集群角色1.2.2 会话 session1.2.3 数据节点 Znode1.2.4 版本1.2.5 事件监听器 Watcher1.2.6 ACL 权限控制表(Access Control Lists) 二、 Zookeeper的系统模型2.1.1 ZNode节点2.1.2 ZNode的分类2.1.3 事务ID2.1.4 ZNode的状态信息2.1.5 Watcher 数据变更通知2.1.6 ACL 保障数据的安全 Zookeeper最主要的使用场景，是作为分布式系统的分布式协同服务
资料：
zookeeper官方文档 https://zookeeper.apache.org/doc/r3.7.0/zookeeperInternals.html#sc_consistency 其他：
3.5支持动态节点扩容，之前要么全部停止，要么一个一个停止更新zookeeper的核心 zab协议，是一个最终一致性的协议，因为除了主节点外其他节点都是异步写入的数据，客户端如果在未同步完成前读取数据，就有可能出现数据不一致。如果要保证强一致性，那么写入性能将大受影响。如过要保证最新的值，那么客户端API提供了sync()方法，读取节点数据前调用一下，节点就会和主节点进行最新的同步。 为甚么需要Zookeeper 分布式系统的信息传输不可靠可能导致信息不一致
分布式系统使用n个服务器组成集群，可以增强系统的计算能力，但是服务器之间的信息传输协调，依靠的是不可靠的网络传输。需要考虑网络延迟、中断、服务器之间的信息不对等等问题。所以需要通过某种方式，让每个服务器之间能够信息同步和共享。
让分布式系统信息同步和共享
方式1：通过网络进行信息共享 通过网络进行信息共享，每次有数据变动时直接通知给每台服务器。出现网络问题的话，可能就会数据不一致，并且后续加入的服务器无法得知之前的消息。**方式2：通过共享存储进行信息共享 **例如对于需要共享的数据，放在可以共享访问的数据库中，各个服务器定期主动拉取数据。方式2优化 对于需要共享的数据，放在所有服务器都能共享访问的地方。并且当数据发生改变时，主动通知关注的服务器，这样各个服务器都能第一时间获取到最新的数据。Zookeeper就是这种方式实现的对分布式系统的协调。 一、Zookeeper 介绍 1.1 介绍 zookeeper 是一个开源的**分布式协调服务，**是一个典型的分布式数据一致性的解决方案。实现了分布式数据的强一致性！基于Zookeeper可以实现数据发布/订阅，负载均衡、命名服务、集群管理、分布式锁、分布式队列等功能。
1.2 Zookeeper中的一些概念 1.2.1 集群角色 在通常的集群方式中，最典型的就是Master/Slave模式(主备) ，这种模式对能够处理写操作的机器称为Master通过异步复制获取最新数据的称为Slave机器。Zookeeper没有直接使用M/S模式，引入了Leader、Follower、Observer三种角色。Zookeeper集群中所有机器通过Leader选举，选出Leader、Leader能提供事务写入服务，其他节点则仅提供读取服务，并且负责转发客户端写入事务到Leader节点。Observer和Follower节点的区别就是，Observer节点不参与投票，也不参与选举。Observer类型节点可以提升选举和投票的效率。 1.2.2 会话 session Session指的是客户端会话，zookeeper使用的是基于TCP的自己实现的通信协议。会话指的就是客户端和服务端之间的一次TCP长连接的创建和销毁。客户端通过这个TCP长连接来和服务器保持有效的会话，也能向服务器发送请求接受响应，同时还能接受来自服务器的Watch事件。 1.2.3 数据节点 Znode 在分布式系统中，“节点”往往是指代一台机器，但是 Zookeeper中，节点可以指代构成集群的机器称为“机器节点”,另外往往指代zookeeper的一中数据模型的数据单元**，** 称为数据节点。Zookeeper 将所有数据存储在内存中，数据模型是一棵树 ZNode Tree，由斜杠 / 进行分割的路径，就是一个Znode，例如 /lock/app 。每个ZNode可以保存自己的数据内容，同时还会保存一系列属性信息。 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/70827c58fe289fb9e2471a30c2feca91/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T23:11:45+08:00" />
<meta property="article:modified_time" content="2024-01-03T23:11:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Zookeeper 分布式服务协调治理框架介绍入门</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Zookeeper_10" rel="nofollow">为甚么需要Zookeeper</a></li><li><a href="#Zookeeper__21" rel="nofollow">一、Zookeeper 介绍</a></li><li><ul><li><a href="#11__22" rel="nofollow">1.1 介绍</a></li><li><a href="#12_Zookeeper_24" rel="nofollow">1.2 Zookeeper中的一些概念</a></li><li><ul><li><a href="#121__25" rel="nofollow">1.2.1 集群角色</a></li><li><a href="#122__session_31" rel="nofollow">1.2.2 会话 session</a></li><li><a href="#123__Znode_35" rel="nofollow">1.2.3 数据节点 Znode</a></li><li><a href="#124__39" rel="nofollow">1.2.4 版本</a></li><li><a href="#125__Watcher_45" rel="nofollow">1.2.5 事件监听器 Watcher</a></li><li><a href="#126_ACL_Access_Control_Lists_48" rel="nofollow">1.2.6 ACL 权限控制表(Access Control Lists)</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_Zookeeper_57" rel="nofollow">二、 Zookeeper的系统模型</a></li><li><ul><li><ul><li><a href="#211_ZNode_60" rel="nofollow">2.1.1 ZNode节点</a></li><li><a href="#212_ZNode_68" rel="nofollow">2.1.2 ZNode的分类</a></li><li><a href="#213__ID_75" rel="nofollow">2.1.3 事务ID</a></li><li><a href="#214_ZNode_80" rel="nofollow">2.1.4 ZNode的状态信息</a></li><li><a href="#215_Watcher__108" rel="nofollow">2.1.5 Watcher 数据变更通知</a></li><li><a href="#216_ACL__117" rel="nofollow">2.1.6 ACL 保障数据的安全</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<blockquote> 
 <p>Zookeeper最主要的使用场景，是作为分布式系统的分布式协同服务<br> 资料：</p> 
 <ul><li>zookeeper官方文档 <a href="https://zookeeper.apache.org/doc/r3.7.0/zookeeperInternals.html#sc_consistency" rel="nofollow">https://zookeeper.apache.org/doc/r3.7.0/zookeeperInternals.html#sc_consistency</a></li></ul> 
</blockquote> 
<p>其他：</p> 
<blockquote> 
 <ul><li>3.5支持动态节点扩容，之前要么全部停止，要么一个一个停止更新</li><li>zookeeper的核心 zab协议，是一个最终一致性的协议，因为除了主节点外其他节点都是异步写入的数据，客户端如果在未同步完成前读取数据，就有可能出现数据不一致。如果要保证强一致性，那么写入性能将大受影响。如过要保证最新的值，那么客户端API提供了sync()方法，读取节点数据前调用一下，节点就会和主节点进行最新的同步。</li></ul> 
</blockquote> 
<h2><a id="Zookeeper_10"></a>为甚么需要Zookeeper</h2> 
<p><strong>分布式系统的信息传输不可靠可能导致信息不一致</strong><br> 分布式系统使用n个服务器组成集群，可以增强系统的计算能力，但是服务器之间的信息传输协调，依靠的是不可靠的网络传输。需要考虑网络延迟、中断、服务器之间的信息不对等等问题。所以需要通过某种方式，让每个服务器之间能够信息同步和共享。<br> <strong>让分布式系统信息同步和共享</strong></p> 
<ul><li><strong>方式1：通过网络进行信息共享</strong> 通过网络进行信息共享，每次有数据变动时直接通知给每台服务器。出现网络问题的话，可能就会数据不一致，并且后续加入的服务器无法得知之前的消息。</li><li>**方式2：通过共享存储进行信息共享 **例如对于需要共享的数据，放在可以共享访问的数据库中，各个服务器定期主动拉取数据。</li><li><strong>方式2优化</strong> 对于需要共享的数据，放在所有服务器都能共享访问的地方。并且当数据发生改变时，主动通知关注的服务器，这样各个服务器都能第一时间获取到最新的数据。<strong>Zookeeper</strong>就是这种方式实现的对<strong>分布式系统的协调。</strong></li></ul> 
<h2><a id="Zookeeper__21"></a>一、Zookeeper 介绍</h2> 
<h3><a id="11__22"></a>1.1 介绍</h3> 
<p>zookeeper 是一个开源的**分布式协调服务，**是一个典型的分布式数据一致性的解决方案。实现了分布式数据的强一致性！基于Zookeeper可以实现数据发布/订阅，负载均衡、命名服务、集群管理、分布式锁、分布式队列等功能。</p> 
<h3><a id="12_Zookeeper_24"></a>1.2 Zookeeper中的一些概念</h3> 
<h4><a id="121__25"></a>1.2.1 集群角色</h4> 
<ul><li>在通常的集群方式中，最典型的就是Master/Slave模式(主备) ，这种模式对能够处理写操作的机器称为Master通过异步复制获取最新数据的称为Slave机器。</li><li>Zookeeper没有直接使用M/S模式，引入了<strong>Leader、Follower、Observer</strong>三种角色。</li><li>Zookeeper集群中所有机器通过Leader选举，选出Leader、Leader能提供事务写入服务，其他节点则仅提供读取服务，并且负责转发客户端写入事务到Leader节点。</li><li>Observer和Follower节点的区别就是，Observer节点不参与投票，也不参与选举。Observer类型节点可以提升选举和投票的效率。</li></ul> 
<h4><a id="122__session_31"></a>1.2.2 会话 session</h4> 
<ul><li>Session指的是客户端会话，zookeeper使用的是基于TCP的自己实现的通信协议。</li><li>会话指的就是客户端和服务端之间的一次TCP长连接的创建和销毁。客户端通过这个TCP长连接来和服务器保持有效的会话，也能向服务器发送请求接受响应，同时还能接受来自服务器的Watch事件。</li></ul> 
<h4><a id="123__Znode_35"></a>1.2.3 数据节点 Znode</h4> 
<ul><li>在分布式系统中，“节点”往往是指代一台机器，但是 Zookeeper中，节点可以指代构成集群的机器称为“<strong>机器节点</strong>”,另外往往指代zookeeper的一中数据模型的数据单元**，** 称为<strong>数据节点。</strong></li><li>Zookeeper 将所有数据存储在内存中，数据模型是一棵树 ZNode Tree，由斜杠 / 进行分割的路径，就是一个Znode，例如 /lock/app 。每个ZNode可以保存自己的数据内容，同时还会保存一系列属性信息。</li></ul> 
<h4><a id="124__39"></a>1.2.4 版本</h4> 
<ul><li>每个Znode会存储数据，并且Zookeeper会为其维护一个叫做叫做Stat的数据结构，Stat记录了这个ZNode的三个数据版本。</li><li>version 指代当前的 Znode 保存的数据内容版本。</li><li>cversion 指代当前ZNode子节点的版本</li><li>aversion 当前ZNode的ACL版本</li></ul> 
<h4><a id="125__Watcher_45"></a>1.2.5 事件监听器 Watcher</h4> 
<p>Watcher是Zookeeper很重要的特性，Zookeeper允许客户端在指定节点上注册一些Watcher，并且在对应事件触发时主动通知到监听的客户端。这也是Zookeeper实现分布式协调服务的重要特性。</p> 
<h4><a id="126_ACL_Access_Control_Lists_48"></a>1.2.6 ACL 权限控制表(Access Control Lists)</h4> 
<p>Zookeeper 使用ACL (Access Control Lists) 策略来进行权限控制其包含了下面五种权限</p> 
<ol><li>CREATE 创建子节点的权限</li><li>READ 获取子节点和子节点列表的权限</li><li>WRITE 更新节点数据的权限</li><li>DELETE 删除子节点的权限</li><li>ADMIN 设置节点ACL的权限</li></ol> 
<h2><a id="_Zookeeper_57"></a>二、 Zookeeper的系统模型</h2> 
<h4><a id="211_ZNode_60"></a>2.1.1 ZNode节点</h4> 
<ul><li>ZooKeeper中，数据信息被保存在一个个的数据节点上，这些节点称为znode</li><li>ZNode是Zookeeper中最小的数据单位</li><li>ZNode一层层可以往下挂Znode，最后形成一颗ZNode树，类似文件系统的层级树状结构。</li><li>ZNode使用 / 来分割，/ 也表示根目录。</li><li><img src="https://images2.imgbox.com/f5/8b/imi3MFna_o.png" alt="image.png"></li></ul> 
<h4><a id="212_ZNode_68"></a>2.1.2 ZNode的分类</h4> 
<p>ZooKeeper 的节点类型可以分为三类</p> 
<ul><li>持久性节点 Presistent 是Zookeeper中最常见的一种节点类型，节点被创建后除非主动删除否则会一直存在ZooKeeper服务中。</li><li>临时性节点 Ephemeral 会被自动清理的节点，生命周期和客户端会话绑定，一旦会话结束节点就会被删除。并且临时节点无法再创建子节点。</li><li>顺序节点 Sequential 顺序节点也分为临时顺序节点和持久顺序节点，顺序节点在创建后，会自动加上数字后缀，能体现节点的顺序。</li></ul> 
<h4><a id="213__ID_75"></a>2.1.3 事务ID</h4> 
<ul><li><strong>什么是事务</strong>：这里的事务不是指数据库的事务而是指能够改变ZooKeeper服务器状态的操作。称之为 实务操作，或者更新操作，一般包含数据节点的创建、删除、更新等等。</li><li>对于每一个事务请求，ZooKeeper 都会为其分配一个全局唯一的<strong>事务ID</strong></li><li>事务ID用ZXID来标识，通常是一个64位的数字，每一个ZXID对应一次更新操作，从这些XZID中可以间接的识别出ZooKeeper处理这些更新操作请求的全局顺序。</li></ul> 
<h4><a id="214_ZNode_80"></a>2.1.4 ZNode的状态信息</h4> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>zk: localhost:15881<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">8</span><span class="token punctuation">]</span> <span class="token function">stat</span> /zk-premament
cZxid <span class="token operator">=</span> 0x100000006
ctime <span class="token operator">=</span> Fri Jun <span class="token number">30</span> <span class="token number">11</span>:02:24 CST <span class="token number">2023</span>
mZxid <span class="token operator">=</span> 0x100000008
mtime <span class="token operator">=</span> Fri Jun <span class="token number">30</span> <span class="token number">11</span>:03:38 CST <span class="token number">2023</span>
pZxid <span class="token operator">=</span> 0x100000006
cversion <span class="token operator">=</span> <span class="token number">0</span>
dataVersion <span class="token operator">=</span> <span class="token number">1</span>
aclVersion <span class="token operator">=</span> <span class="token number">0</span>
ephemeralOwner <span class="token operator">=</span> 0x0
dataLength <span class="token operator">=</span> <span class="token number">3</span>
numChildren <span class="token operator">=</span> <span class="token number">0</span>
</code></pre> 
<ul><li>查看ZNode的状态 stat /zk-premament</li><li><strong>cZxid</strong> Create ZXID 节点被创建时的事务ID</li><li><strong>ctime</strong> Create Time 标识节点创建的事件</li><li>mZxid Modified ZXID 节点最后一次被修改时的事务ID</li><li>mtime Modified Time 节点最后一次被修改的事件</li><li>pZxid 子节点<strong>列表</strong>最后一次被更新时的事务ID。注意子节点内容变化这个id不会改变。</li><li>cversion 标识子节点的版本号</li><li>dataVersion 表示节点内容版本号</li><li>acVersion 表示acl策略版本号</li><li>ephemeralOwner 表示创建该临时节点的会话 sessionId 如果是持久性节点那么值为0</li><li>dataLength 表示数据长度</li><li>numChildren 表示直系子节点数</li></ul> 
<h4><a id="215_Watcher__108"></a>2.1.5 Watcher 数据变更通知</h4> 
<ul><li>ZooKeeper使用Watcher机制实现了分布式数据发布/订阅功能</li><li>在 ZooKeeper 中，引⼊了 Watcher 机制来实现这种分布式的通知功能。ZooKeeper 允许客户端向服务端注册⼀个 Watcher 监听，当服务端的⼀些指定事件触发了这个 Watcher，那么就会向指定客户端发送⼀个事件通知来实现分布式的通知功能。</li><li><img src="https://images2.imgbox.com/e6/51/6jVfKibW_o.png" alt="image.png"></li><li>Zookeeper的Watcher机制主要包括<strong>客户端线程</strong>、<strong>客户端WatcherManager</strong>、<strong>Zookeeper服务器</strong>三部分</li><li>具体⼯作流程为： 
  <ol><li>客户端在向Zookeeper服务器注册的同时，会将Watcher对象存储在客户端的WatcherManager当中。</li><li>当Zookeeper服务器触发Watcher事件后，会向客户端发送通知，客户端线程从WatcherManager中取出对应的Watcher对象来执⾏回调逻辑。</li></ol> </li></ul> 
<h4><a id="216_ACL__117"></a>2.1.6 ACL 保障数据的安全</h4> 
<blockquote> 
 <p>Zookeeper作为⼀个分布式协调框架，其内部存储了分布式系统运⾏时状态的元数据，这些元数据会直接影响基于Zookeeper进⾏构造的分布式系统的运⾏状态，因此，如何保障系统中数据的安全，从⽽避免因误操作所带来的数据随意变更⽽导致的数据库异常⼗分重要，在Zookeeper中，提供了⼀套完善的ACL（Access Control List）权限控制机制来保障数据的安全。</p> 
</blockquote> 
<ul><li>我们可以从三个⽅⾯来理解ACL机制： 
  <ul><li>权限模式（Scheme）</li><li>授权对象（ID）</li><li>权限（Permission），</li></ul> </li><li>通常使⽤"scheme: id : permission"来标识⼀个有效的ACL信息。</li></ul> 
<p>**权限模式 Scheme **<br> 用来确定权限验证过程中使用的检验策略，可以分成IP/IP段和账号密码，细分的话可以分为如下四种。</p> 
<ol><li><strong>IP</strong> 通过ip地址的粒度来进行权限控制，可以配置某个IP也可以配置某个ip网段。</li><li>**Digest **是最常用的权限控制模式，更符合我们对权限控制的认识，使用“username:password”形式的权限标识来进行权限配置，可以区分不同的应用来进行权限控制。当我们通过username:password”配置了权限标识后，Zookeper会对其进行SHA-1加密和BASE64编码</li><li>**World **是一种开放的权限控制模式，即数据节点的权限对所有用户开放。也可以看成Digest的一种特殊形式。即 <code>“world:anyone”</code></li><li><strong>super</strong> 就是超级用户授权，启动zookeeper时修改zkServer.sh的启动命令脚本开启super模式，登录后添加超级管理员账户即可操作管理所有节点。</li><li>**Auth **授权用户，用户名:密码 ，需要先添加ACL账户</li></ol> 
<pre><code class="prism language-bash"><span class="token comment">#1添加ACL账户</span>
<span class="token comment"># addauth digest 用户名：密码</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">4</span><span class="token punctuation">]</span> addauth digest test:test123

<span class="token comment">#2创建测试节点</span>
<span class="token comment"># create 测试节点 测试节点值</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">3</span><span class="token punctuation">]</span> create /test_acl value_of_test_acl

<span class="token comment">#3给测试节点设置Auth权限</span>
<span class="token comment"># setAcl 测试节点 auth:用户名:crawd （权限）</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">(</span>CONNECTED<span class="token punctuation">)</span> <span class="token number">5</span><span class="token punctuation">]</span> setAcl /test_acl auth:test:crawd

</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#第一步：将要设置的密码进行base64编码可以使用linux命令，也可以使用其他语言自己实现</span>
<span class="token operator">&gt;&gt;</span>echo <span class="token parameter variable">-n</span> test:test <span class="token operator">|</span> openssl dgst <span class="token parameter variable">-binary</span> <span class="token parameter variable">-sha1</span> <span class="token operator">|</span> openssl base64
<span class="token operator">&gt;&gt;</span>V28q/NynI4JI3Rk54h0r8O5kMug<span class="token operator">=</span>

<span class="token comment">#第二步：创建测试节点</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">]</span> create /digest user
<span class="token comment">#第三步：给节点设置 digest授权</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">]</span> setAcl /digest digest:test:V28q/NynI4JI3Rk54h0r8O5kMug<span class="token operator">==</span>:rwadc
<span class="token comment">#第四步：查询ACL</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">]</span> getAcl /digest
<span class="token comment">#ACL输出结果</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">]</span> addauth digest user:passwd
</code></pre> 
<pre><code class="prism language-bash"><span class="token comment">#开启SuperDigest超级管理员举例 </span>
 
<span class="token comment">#1、修改zkServer.sh，加入super权限设置</span>
<span class="token assign-left variable">SUPER_ACL</span><span class="token operator">=</span><span class="token string">"-Dzookeeper.DigestAuthenticationProvider.superDigest=super:gG7s8t3oDEtIqF6DM9LlI/R+9Ss="</span>
 
<span class="token comment">#2、重新启动Zookeeper</span>
<span class="token comment"># ./zkServer.sh restart</span>
 
<span class="token comment"># 添加认证前无法访问节点</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">]</span> <span class="token function">ls</span> /test
Authentication is not valid <span class="token builtin class-name">:</span> /test

<span class="token comment">#3、使用super:super进行认证，添加super认证</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">)</span> <span class="token punctuation">]</span> addauth digest super:super
<span class="token comment">#获得了节点权限</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">)</span> <span class="token punctuation">]</span> <span class="token function">ls</span> /test
<span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>zk: localhost:2181<span class="token punctuation">)</span><span class="token punctuation">]</span> get /test
</code></pre> 
<p><strong>权限ID</strong><br> 就是权限模式对应的内容，例如权限模式是IP那么对应的ID就是IP地址或网段</p> 
<p>**权限Permission **<br> zookeeper中权限可以分为五大类</p> 
<ul><li>CREATE（C）：数据节点的创建权限，允许授权对象在该数据节点下创建⼦节点</li><li>DELETE（D）：⼦节点的删除权限，允许授权对象删除该数据节点的⼦节点。</li><li>READ（R）：数据节点的读取权限，允许授权对象访问该数据节点并读取其数据内容或⼦节点列表等。</li><li>WRITE（W）：数据节点的更新权限，允许授权对象对该数据节点进⾏更新操作。</li><li>ADMIN（A）：数据节点的管理权限，允许授权对象对该数据节点进⾏ ACL 相关的设置操作。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e5d382cd5a4952d5503424e068c4da13/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用 openpyxl 库读取 Excel 文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/439199acf236b17cfc7f3233bc6f9c3b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【笔记】Mac M1上miniforge3与tushare的安装</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>