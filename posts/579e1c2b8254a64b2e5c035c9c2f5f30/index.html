<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>numpy的文件存储与处理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="numpy的文件存储与处理" />
<meta property="og:description" content="import numpy as np from io import StringIO
第二部分 ndarray 文件存储与读取 一维二维数组 可以采用csv（Comma Separated Value 逗号分割值） ”’ 1)np.savetxt np.loadtxt
numpy.savetxt(fname, X, fmt=’%.18e’, delimiter=’ ‘, newline=’\n’, header=”, footer=”, comments=’# ‘) fname : filename or file handle 指定要存入的文件名,支持gzip （.gz .bz2）格式 If the filename ends in .gz, the file is automatically saved in compressed gzip format. loadtxt understands gzipped files transparently(易察觉的).
X : array_like 一个ndarray对象 Data to be saved to a text file." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/579e1c2b8254a64b2e5c035c9c2f5f30/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-08-01T19:54:16+08:00" />
<meta property="article:modified_time" content="2017-08-01T19:54:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">numpy的文件存储与处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>import numpy as np <br> from io import StringIO</p> 
<h2 id="第二部分-ndarray-文件存储与读取">第二部分 ndarray 文件存储与读取</h2> 
<h2 id="一维二维数组-可以采用csvcomma-separated-value-逗号分割值">一维二维数组 可以采用csv（Comma Separated Value 逗号分割值）</h2> 
<p>”’ <br> 1)np.savetxt np.loadtxt</p> 
<h2 id="numpysavetxtfname-x-fmt18e-delimiter-newlinen-header-footer-comments">numpy.savetxt(fname, X, fmt=’%.18e’, delimiter=’ ‘, newline=’\n’, header=”, footer=”, comments=’# ‘)</h2> 
<p>fname : filename or file handle 指定要存入的文件名,支持gzip （.gz .bz2）格式 <br> If the filename ends in .gz, the file is automatically saved in compressed gzip format. loadtxt understands gzipped files transparently(易察觉的).</p> 
<p>X : array_like 一个ndarray对象 <br> Data to be saved to a text file.</p> 
<p>fmt : str or sequence of strs, optional 制定每个元素要存入的格式 <br> e.g. [‘%.3e + %.3ej’, ‘(%.15e%+.15ej)’] for 2 columns (复数可以这么写 多列)</p> 
<p>delimiter : str, optional 每个元素之间的分割符 <br> String or character separating columns.</p> 
<p>newline : str, optional 每行的换行符 <br> String or character separating lines. <br> New in version 1.5.0. <br> header : str, optional 文件开始时的文本 <br> String that will be written at the beginning of the file. <br> New in version 1.7.0. <br> footer : str, optional 文件结束时的文本 <br> String that will be written at the end of the file. <br> New in version 1.7.0. <br> comments : str, optional 将header and footer 标注为注释 <br> String that will be prepended to the header and footer strings, to mark them as comments. Default: ‘# ‘, as expected by e.g. numpy.loadtxt. <br> New in version 1.7.0. <br> ”’ <br> x=np.array([[1,2,3,4],[2,3,4]])#不可存储，用loadtxt读取不了,因为loadtxt必须保证列数相同 <br> np.savetxt(fname=”test1.out”,fmt=”%s”,header=”This is test1.txt”,X=x) <br> y=np.array([[1,2],[3,4]]) <br> np.savetxt(fname=”test2.out”,fmt=”%d” ,footer=”This is test2.txt”,X=y) <br> ”’</p> 
<h2 id="numpyloadtxtfname-dtypefloat-comments-delimiternone-convertersnone-skiprows0-usecolsnone-unpackfalse-ndmin0">numpy.loadtxt(fname, dtype=float, comments=’#’, delimiter=None, converters=None, skiprows=0, usecols=None, unpack=False, ndmin=0)</h2> 
<p>Parameters: <br> fname : file, str, or pathlib.Path <br> File, filename, or generator to read. If the filename extension is .gz or .bz2, the file is first decompressed. Note that generators should return byte strings for Python 3k.</p> 
<p>dtype : data-type, optional <br> Data-type of the resulting array; default: float. If this is a structured data-type, the resulting array will be 1-dimensional, and each row will be interpreted as an element of the array. In this case, the number of columns used must match the number of fields in the data-type.</p> 
<p>comments : str or sequence, optional（注释类型 要和savetxt的相对应） <br> The characters or list of characters used to indicate the start of a comment; default: ‘#’. <br> delimiter : str, optional <br> The string used to separate values. By default, this is any whitespace.</p> 
<p>converters : dict, optional(解析函数） <br> A dictionary mapping column number to a function that will convert that column to a float. E.g., if column 0 is a date string: converters = {0: datestr2num}. Converters can also be used to provide a default value for missing data (but see also genfromtxt): converters = {3: lambda s: float(s.strip() or 0)}. Default: None. <br> skiprows : int, optional <br> Skip the first skiprows lines; default: 0. <br> usecols : int or sequence, optional（要提取的列） <br> Which columns to read, with 0 being the first. For example, usecols = (1,4,5) will extract the 2nd, 5th and 6th columns. The default, None, results in all columns being read. <br> New in version 1.11.0.</p> 
<p>Also when a single column has to be read it is possible to use an integer instead of a tuple. E.g usecols = 3 reads the fourth column the same way as usecols = (3,)` would. <br> unpack : bool, optional(打包？) <br> If True, the returned array is transposed, so that arguments may be unpacked using x, y, z = loadtxt(…). When used with a structured data-type, arrays are returned for each field. Default is False. <br> ndmin : int, optional <br> The returned array will have at least ndmin dimensions. Otherwise mono-dimensional axes will be squeezed. Legal values: 0 (default), 1 or 2. <br> New in version 1.6.0.</p> 
<p>Returns: <br> out : ndarray <br> Data read from the text file. <br> ”’</p> 
<p>test1=np.loadtxt(fname=”test2.out”,dtype=int) <br> print(“test2:”,test1) <br> x1,x2=np.loadtxt(fname=”test2.out”,dtype=int,unpack=True) <br> print(“x1,x2:”,x1,x2) <br> str=StringIO(“Zhang 20 boy\nYu 20 girl”) <br> struct_dtype=np.dtype({‘names’:(‘name’,’age’,’gender’), ‘formats’:(‘S32’,’i4’,’S32’)},align=True) <br> str_array=np.loadtxt(fname=str,dtype=struct_dtype) <br> print(“str_array:”,str_array)</p> 
<h2 id="2多维数组">2)多维数组</h2> 
<p>”’</p> 
<h2 id="tofileself-fid-sep-formats">tofile(self, fid, sep=”“, format=”%s”)</h2> 
<p>fid : file or str <br> An open file object, or a string containing a filename. <br> sep : str 如果为空，则默认为二进制存储 <br> Separator between array items for text output. <br> If “” (empty), a binary file is written, equivalent to <br> <code>file.write(a.tobytes())</code>. <br> format : str 元素类型 <br> Format string for text file output. <br> Each entry in the array is formatted to text by first converting <br> it to the closest Python type, and then using “format” % item.</p> 
<pre><code>            This is a convenience function for quick storage(存储) of array data.
        Information on endianness(字节序) and precision(精确度) is lost, so this method is not a
        good choice for files intended to(打算) archive data or transport data between
        machines with different endianness. Some of these problems can be overcome
        by outputting the data as text files, at the expense of(在损失....的情况下) speed and file
        size.
</code></pre> 
<p>”’ <br> y.tofile(file=”tofile.txt”,format=”%d” ,sep=” “) <br> from_file_array=np.fromfile(file=”tofile.txt”,dtype=int,count=-1,sep=” “)#count=-1默认读取整个文件 <br> print(“from_file_array:”,from_file_array) <br> reshape_from_file_array=from_file_array.reshape((2,2)) <br> print(“reshape_from_file_array:”,reshape_from_file_array)</p> 
<h2 id="3numpy-自定义格式">3)numpy 自定义格式</h2> 
<p>np.save(file=”np_save”,arr=y)#默认.npy后缀 其实这个文件打开看一看，第一行是明文的这个ndarray数组的信息，第二行开始是二进制的数据存储 <br> print(“np.load:”,np.load(file=”np_save.npy”)) <br> np.savez_compressed(file=”np_save_compressed”,Y=y)#默认为压缩的.npz格式 y的名字为Y <br> print(“np.load:”,np.load(file=”np_save_compressed.npz”)[‘Y’])#数组以字典方式进行存储 <br> np.savez(file=”np_save_uncompressed”,Y=y)#默认为非压缩的.npz格式 <br> print(“np.load:”,np.load(file=”np_save_uncompressed.npz”,)[‘Y’])</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3d9f38108d188932abc8df59f0b29917/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springMVC jsp传送两个不同对象给Controller</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3e9db3329d61fb7743ed0c0bef6cf81c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">bugfree安装教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>