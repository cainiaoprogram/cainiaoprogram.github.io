<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python数据分析之清洗数据：缺失值处理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python数据分析之清洗数据：缺失值处理" />
<meta property="og:description" content="在使用python进行数据分析时，如果数据集中出现缺失值、空值、异常值，那么数据清洗就是尤为重要的一步，本文将重点讲解如何利用python处理缺失值
创建数据 为了方便理解，我们先创建一组带有缺失值的简单数据用于讲解
检查缺失值 对于现在的数据量，我们完全可以直接查看整个数据来检查是否存在缺失值看到有两列含有缺失值。当然如果数据集比较大的话，就需要使用data.isnull().sum()来检查缺失值
或者使用data.info()来检查所有数据
可以看到一共有7行，但是有两列的非空值都不到7行
缺失值处理 一种常见的办法是用单词或符号填充缺少的值。例如，将丢失的数据替换为&#39;*&#39;。我们可以使用.fillna(&#39;*&#39;) 将所有缺失值替换为*
当然也可以针对某一列的缺失值进行填充，比如选择score列进行填充
还有一种办法是将其替换为平均值。如果是数字，则可以包括均值；如果是字符串，则可以选择众数。比如可以将score列的缺失值填充为该列的均值
当然也可以使用插值函数来填写数字的缺失值。比如取数据框中缺失值上下的数字平均值。
或者data.fillna(axis=1,method=&#39;ffill&#39;)来横向/纵向用缺失值前面的值替换缺失值
除了对缺失值进行填充，另一种更省事的办法是直接删除缺失值所在行
上面是删除所有缺失值所在行，当然也可以指定删除某列的缺失值比如将score列的缺失值所在行删除
处理非标准缺失值
有时候缺失值会以其他形式出现，比如在录入数据的时候由于失误将数据输错等，那么这种类型的数据也可以作为缺失值去处理。我们来看看
可以看到，score列本应该是数字，但是却出现两个并不是数字也不是nan的异常值，当我们使用data.isnull()函数时，可以看到只有一个空值。
所以我们可以通过使用replace函数先将其转换为NaN来处理此问题，然后根据需要，使用上面的方法处理缺失值。
真实数据实战 上面我们用自己创建的数据进行示例，那么在这一节我们看在真实的数据分析案例数据来进行缺失值处理。使用的数据为之前文章使用过的NBA数据(可以查看早起python历史文章获取数据与更多分析)，我们先导入数据并检查缺失值
可以看到其他列的数据都很完美，只有notes列仅有5424行非空，意味着我们的数据集中超过120,000行在此列中具有空值。我们先考虑删除缺失值。
可以看到只剩下5424条数据，但是这种形式的数据清洗对数据集没有意义的，因为notes只是记录了一些比赛的说明，缺少注释对分析NBA来说不会有太大影响。并且如果我们的数据集包含一百万条有效记录，而一百条缺少相关数据，那么删除不完整的记录可能是一个合理的解决方案。
这样，生成的DataFrame包含所有126,314场比赛记录，但不包括有缺失值的notes列。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b39c0c67ba9c6208ba045f91aa7957bb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-29T15:59:31+08:00" />
<meta property="article:modified_time" content="2020-02-29T15:59:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python数据分析之清洗数据：缺失值处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>在使用python进行数据分析时，如果数据集中出现缺失值、空值、异常值，那么数据清洗就是尤为重要的一步，本文将重点讲解如何利用python处理缺失值</p> 
<h3><strong>创建数据</strong></h3> 
<p>为了方便理解，我们先创建一组带有缺失值的简单数据用于讲解</p> 
<p><img alt="" src="https://images2.imgbox.com/ae/0d/ZM2q4qxW_o.png" width="1080"></p> 
<h3><strong>检查缺失值</strong></h3> 
<p>对于现在的数据量，我们完全可以直接查看整个数据来检查是否存在缺失值看到有两列含有缺失值。当然如果数据集比较大的话，就需要使用data.isnull().sum()来检查缺失值</p> 
<p><img alt="" src="https://images2.imgbox.com/79/fd/d66l0ut7_o.png" width="984"></p> 
<p>或者使用<a href="https://link.zhihu.com/?target=http%3A//data.info%28%29" rel="nofollow">data.info()</a>来检查所有数据</p> 
<p><img alt="" src="https://images2.imgbox.com/40/ef/SRwFf4Q8_o.png" width="1072"></p> 
<p>可以看到一共有7行，但是有两列的非空值都不到7行</p> 
<h3><strong>缺失值处理</strong></h3> 
<p>一种常见的办法是用单词或符号填充缺少的值。例如，将丢失的数据替换为'*'。我们可以使用.fillna('*') 将所有缺失值替换为*</p> 
<p><img alt="" src="https://images2.imgbox.com/d1/1c/QvzdnPYb_o.png" width="1080"></p> 
<p>当然也可以针对某一列的缺失值进行填充，比如选择score列进行填充</p> 
<p><img alt="" src="https://images2.imgbox.com/05/b5/RnfTiRxj_o.png" width="1074"></p> 
<p>还有一种办法是将其替换为平均值。如果是数字，则可以包括均值；如果是字符串，则可以选择众数。比如可以将score列的缺失值填充为该列的均值</p> 
<p><img alt="" src="https://images2.imgbox.com/3e/1a/lmRBZUsI_o.png" width="1080"></p> 
<p>当然也可以使用插值函数来填写数字的缺失值。比如取数据框中缺失值上下的数字平均值。</p> 
<p><img alt="" src="https://images2.imgbox.com/a9/d6/JtMj1N8G_o.png" width="1080"></p> 
<p>或者data.fillna(axis=1,method='ffill')来横向/纵向用缺失值前面的值替换缺失值</p> 
<p><img alt="" src="https://images2.imgbox.com/a4/4b/nWWZSXu7_o.png" width="1080"></p> 
<p>除了对缺失值进行填充，另一种更省事的办法是直接删除缺失值所在行</p> 
<p><img alt="" src="https://images2.imgbox.com/fe/02/SSoAnlWD_o.png" width="1080"></p> 
<p>上面是删除所有缺失值所在行，当然也可以指定删除某列的缺失值比如将score列的缺失值所在行删除</p> 
<p><img alt="" src="https://images2.imgbox.com/b5/08/ApUf2a30_o.png" width="1080"></p> 
<p><strong>处理非标准缺失值</strong></p> 
<p>有时候缺失值会以其他形式出现，比如在录入数据的时候由于失误将数据输错等，那么这种类型的数据也可以作为缺失值去处理。我们来看看</p> 
<p><img alt="" src="https://images2.imgbox.com/21/b7/OmADYXkK_o.png" width="1080"></p> 
<p>可以看到，score列本应该是数字，但是却出现两个并不是数字也不是nan的异常值，当我们使用data.isnull()函数时，可以看到只有一个空值。</p> 
<p><img alt="" src="https://images2.imgbox.com/9f/b0/mEtgvC5c_o.png" width="1080"></p> 
<p>所以我们可以通过使用replace函数先将其转换为NaN来处理此问题，然后根据需要，使用上面的方法处理缺失值。</p> 
<p><img alt="" src="https://images2.imgbox.com/30/ac/IwDEnx2j_o.png" width="1080"></p> 
<h3><strong>真实数据实战</strong></h3> 
<p>上面我们用自己创建的数据进行示例，那么在这一节我们看在真实的数据分析案例数据来进行缺失值处理。使用的数据为之前文章使用过的NBA数据(可以查看早起python历史文章获取数据与更多分析)，我们先导入数据并检查缺失值</p> 
<p><img alt="" src="https://images2.imgbox.com/02/51/gtOh1ZFE_o.png" width="1080"></p> 
<p>可以看到其他列的数据都很完美，只有notes列仅有5424行非空，意味着我们的数据集中超过120,000行在此列中具有空值。我们先考虑删除缺失值。</p> 
<p><img alt="" src="https://images2.imgbox.com/d1/22/F3NUmxQe_o.png" width="1080"></p> 
<p>可以看到只剩下5424条数据，但是这种形式的数据清洗对数据集没有意义的，因为notes只是记录了一些比赛的说明，缺少注释对分析NBA来说不会有太大影响。并且如果我们的数据集包含一百万条有效记录，而一百条缺少相关数据，那么删除不完整的记录可能是一个合理的解决方案。</p> 
<p><img alt="" src="https://images2.imgbox.com/9a/d7/9Fdjp20c_o.png" width="1030"></p> 
<p>这样，生成的DataFrame包含所有126,314场比赛记录，但不包括有缺失值的notes列。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/06091d764cc28d61c0d439e71f8f40d1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vue 自定义事件传参</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a5e36467f063b12c0ea0a5a1b3ae9564/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IDEA 导入模块</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>