<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Dither(抖动): Bayer Matrix(Bayer ordered dither matrix)与Bayer Filter(拜尔滤镜) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Dither(抖动): Bayer Matrix(Bayer ordered dither matrix)与Bayer Filter(拜尔滤镜)" />
<meta property="og:description" content="1.参考(我的示例代码在页面底端)
可参考8x8 Bayer matrix: https://github.com/libretro/glsl-shaders/blob/master/dithering/shaders/bayer-matrix-dithering.glsl
BayerFilter: https://en.wikipedia.org/wiki/Bayer_filter
2.Ordered Dithering(有序抖动法,It is an image dithering algorithm)
wiki:https://en.wikipedia.org/wiki/Ordered_dithering
一篇不错的抖动算法描述:https://blog.csdn.net/paris_he/article/details/40341233
Arbitrary size threshold maps can be devised with a simple rule: First fill each slot with a successive integers. Then reorder them such that the average distance between two successive numbers in the map is as large as possible, ensuring that the table &#34;wraps&#34; around at edges.[citation needed] For threshold maps whose dimensions are a power of two, the map can be generated recursively via:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/890d8f5bea385caa2a355fb55bcc9950/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-30T21:32:03+08:00" />
<meta property="article:modified_time" content="2019-01-30T21:32:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Dither(抖动): Bayer Matrix(Bayer ordered dither matrix)与Bayer Filter(拜尔滤镜)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1.参考(我的示例代码在页面底端)</p> 
<p>可参考8x8 Bayer matrix: <a href="https://github.com/libretro/glsl-shaders/blob/master/dithering/shaders/bayer-matrix-dithering.glsl">https://github.com/libretro/glsl-shaders/blob/master/dithering/shaders/bayer-matrix-dithering.glsl</a></p> 
<p>BayerFilter: <a href="https://en.wikipedia.org/wiki/Bayer_filter" rel="nofollow">https://en.wikipedia.org/wiki/Bayer_filter</a></p> 
<p>2.Ordered Dithering(有序抖动法,It is an image <a href="https://en.wikipedia.org/wiki/Dithering" rel="nofollow">dithering</a> algorithm)</p> 
<p>    wiki:<a href="https://en.wikipedia.org/wiki/Ordered_dithering" rel="nofollow">https://en.wikipedia.org/wiki/Ordered_dithering</a></p> 
<p>    一篇不错的抖动算法描述:<a href="https://blog.csdn.net/paris_he/article/details/40341233">https://blog.csdn.net/paris_he/article/details/40341233</a></p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/bc/2f/as2SWhpW_o.png"></p> 
<p>Arbitrary size threshold maps can be devised with a simple rule: First fill each slot with a successive integers. Then reorder them such that the average distance between two successive numbers in the map is as large as possible, ensuring that the table "wraps" around at edges.[<em><a href="https://en.wikipedia.org/wiki/Wikipedia:Citation_needed" rel="nofollow">citation needed</a></em>] For threshold maps whose dimensions are a power of two, the map can be generated recursively via:</p> 
<p><img alt="" class="has" height="66" src="https://images2.imgbox.com/7d/49/RzHmqU00_o.png" width="371"></p> 
<p><img alt="" class="has" height="101" src="https://images2.imgbox.com/e9/c9/wq8cKfE6_o.png" width="375"></p> 
<p>上图的 U 为元素都为1的对应方阵</p> 
<p>M3(8×8阵)比较特殊，称为Bayer抖动表(上面的1/64图所表示的矩阵就是)</p> 
<p>3.应用Ordered Dither在Banding效果图上的示例:</p> 
<p>原图</p> 
<p><img alt="" class="has" height="256" src="https://images2.imgbox.com/eb/49/vFUOW2Ut_o.png" width="256"></p> 
<p>4 x 4 Bayer matrix  Dithered效果:</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/12/c4/SV9WAT7Z_o.png"></p> 
<p>8 x 8 Bayer matrix Dithered效果:</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/a3/20/ElO1njyl_o.png"></p> 
<p>原理示例代码(JS):</p> 
<pre class="has"><code>

        let type = 8;
        // 4x4 Bayer Matrix
        let threshold = [
            [0,8,2,10,0],
            [12,4,14,6,12],
            [3,11,1,9,3],
            [15,7,13,5,15]
        ];
        if(type != 4)
        {
            // 8 x 8 Bayer Matrix
            threshold = [
                [0,48,12,60,3,51,15,63],
                [32,16,44,28,35,19,47,31],
                [8,56,4,52,11,59,7,55],
                [40,24,36,20,43,27,39,23],
                [2,50,14,62,1,49,13,61],
                [34,18,46,30,33,17,45,29],
                [10,58,6,54,9,57,5,53],
                [42,26,38,22,41,25,37,21]
            ];
        }
        //
        let i = 0;
        let j = 0;
        let k = 0;
        let value = 0;
        for(; i &lt; m_img.height; ++i)
        {
            for(j = 0; j &lt; m_img.width; ++j)
            {
                k = (i * m_img.width + j) * 4;
                value = Math.floor(0.333 * (pixData[k] + pixData[k+1] + pixData[k + 2]));
                if(type != 4)
                {                    
                    if ((value&gt;&gt;2) &gt; threshold[i&amp;7][j&amp;7])
                    {
                        value = 255;
                    }else
                    {
                        value = 0;
                    }
                }else{                                        
                    if ((value&gt;&gt;2) &gt; threshold[i&amp;3][j&amp;3])
                    {
                        value = 255;
                    }else
                    {
                        value = 0;
                    }
                }
                pixData[k] = value;
                pixData[k+1] = value;
                pixData[k+2] = value;
                pixData[k+3] = 255;
            }
        }
</code></pre> 
<p>4.Floyd–Steinberg Dithering</p> 
<p>   Wiki: <a href="https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering" rel="nofollow">https://en.wikipedia.org/wiki/Floyd%E2%80%93Steinberg_dithering</a></p> 
<p>   Error diffusion: <a href="https://en.wikipedia.org/wiki/Error_diffusion" rel="nofollow">https://en.wikipedia.org/wiki/Error_diffusion</a></p> 
<p>   原图:<img alt="" class="has" height="256" src="https://images2.imgbox.com/f0/b8/0piv5wWA_o.jpg" width="256"></p> 
<p>   抖动之后的图:</p> 
<p><img alt="" class="has" height="255" src="https://images2.imgbox.com/ac/73/p2RaM73C_o.png" width="255"></p> 
<p>如果用更少的色阶来表示这两张图，抖动之后的图效果要比原图好很多(可以用色调分离和模糊这两个操作来做实验)</p> 
<p> </p> 
<p><strong>关于Dither技术的小故事</strong>: 据说最早源自二战，当时的轰炸机飞行员使用机械计算机来进行导航和bomb轨道计算。奇怪的是，这些计算机(由上百机械零件组成)在飞机甲板上要比在地面上工作地更为准确。工程师们意识到飞机的震动降低了它的一些活动部件所导致的误差。为了让它们更好的工作，工程师基于这个原理为这种计算机安装了震动马达，他们把这些马达的震动叫做Dither</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cc392ce1675c0db5000e5274dee04c72/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python3 多线程、多进程的使用场景</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f199dd3eaa9da14473a56816bb1558f1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ORACLE 11g 数据库  java jdk版本匹配</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>