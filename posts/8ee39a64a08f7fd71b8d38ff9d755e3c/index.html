<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FreeRTOS实时操作系统来写一个程序 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="FreeRTOS实时操作系统来写一个程序" />
<meta property="og:description" content="首先安装STM32CubeMX，CubeMX是ST公司出品的一款图形化代码生成工具，通过图形化界面，可以非常直观的配置好各种片上外设，时钟，中断，DMA等等各种设备的参数，并直接生成初始化代码
官网下载链接：STM32CubeMX | STMCU中文官网
本章写一个程序，建立两个LED灯闪烁任务，先在cubemx中新建工程，然后进入keil5对程序修改，编译，生成的文件通过unlink连接开发板进行烧录
首先进入CubeMX， 新建工程，进入后选择芯片处理器，本文选择的stmf051r8t6处理器
接下来先配置SYS，勾选debug serial wire调试接口，timebase选择TIM1定时器
然后配置RCC，这两个时钟源都选择Crystal/Ceramic Resonator（外部晶振时钟）
然后配置GPIO，选择PC8和PC9两个引脚，设置GPIO_Output作为两个输出，来控制LED灯闪烁
接下来选中Middleware...下的FREERTOS，选择CMSIS_V1，然后切换到Task and Queue页面，点击Add添加任务，添加时只改变任务的优先级为High，其他默认就行了,同理添加第二个任务，也只改变任务优先级为High
成功添加后，有我们添加的两个任务和一个default任务，如图所示
接下来切换到Clock Configuration界面，选择外部时钟，设置到最高时钟频率，如下
接下来切换到Project Manager界面，设置工程文件名和保存路径，keil5开发就选择MDK-ARM
然后点开Code...栏，勾选为每个外设建立.c和.h文件，最后点击右上角Generate Code生成项目
接下来我们用keil5打开新建的工程，打开LED/Applicstion/User/Core下的freertos.c文件
更改freertos.c文件代码最下面刚新建的两个任务的代码，如下图代码，然后就直接编译
然后打开ST-Link Utility软件，连接开发板，打开我们刚生成的hex文件，hex文件所在地址一般在创的LED文件里面，然后点击Start开始烧录
如下图闪烁，已经将写的连个任务程序烧录成功" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8ee39a64a08f7fd71b8d38ff9d755e3c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-09T09:57:23+08:00" />
<meta property="article:modified_time" content="2023-08-09T09:57:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">FreeRTOS实时操作系统来写一个程序</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>首先安装STM32CubeMX，CubeMX是ST公司出品的一款图形化代码生成工具，通过图形化界面，可以非常直观的配置好各种片上外设，时钟，中断，DMA等等各种设备的参数，并直接生成初始化代码</p> 
<p>官网下载链接：<a href="https://www.stmcu.com.cn/Designresource/detail/software/711298" rel="nofollow" title="STM32CubeMX | STMCU中文官网">STM32CubeMX | STMCU中文官网</a></p> 
<p>本章写一个程序，建立两个LED灯闪烁任务，先在cubemx中新建工程，然后进入keil5对程序修改，编译，生成的文件通过unlink连接开发板进行烧录</p> 
<p>首先进入CubeMX， 新建工程，进入后选择芯片处理器，本文选择的stmf051r8t6处理器</p> 
<p><img alt="" height="980" src="https://images2.imgbox.com/01/8d/KwiwPhvx_o.png" width="1200"></p> 
<p> <img alt="" height="694" src="https://images2.imgbox.com/96/ed/scPEgnmW_o.png" width="1200"></p> 
<p> 接下来先配置SYS，勾选debug serial wire调试接口，timebase选择TIM1定时器</p> 
<p><img alt="" height="592" src="https://images2.imgbox.com/9b/15/1VKZH24r_o.png" width="1200"></p> 
<p> 然后配置RCC，这两个时钟源都选择Crystal/Ceramic Resonator（外部晶振时钟）</p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/b9/9b/KYVcEln6_o.png" width="1200">然后配置GPIO，选择PC8和PC9两个引脚，设置GPIO_Output作为两个输出，来控制LED灯闪烁</p> 
<p><img alt="" height="540" src="https://images2.imgbox.com/cc/93/Osfo2qyj_o.png" width="1200"> </p> 
<p> 接下来选中Middleware...下的FREERTOS，选择CMSIS_V1，然后切换到Task and Queue页面，点击Add添加任务，添加时只改变任务的优先级为High，其他默认就行了,同理添加第二个任务，也只改变任务优先级为High<img alt="" height="621" src="https://images2.imgbox.com/6c/d1/b6aYDO0n_o.png" width="1200"></p> 
<p><img alt="" height="520" src="https://images2.imgbox.com/fc/ab/VCV01Eck_o.png" width="1200"> </p> 
<p><img alt="" height="649" src="https://images2.imgbox.com/be/f6/kYzjT8Bg_o.png" width="1200"> 成功添加后，有我们添加的两个任务和一个default任务，如图所示</p> 
<p><img alt="" height="463" src="https://images2.imgbox.com/e4/5c/Ku0sGUWh_o.png" width="1072"></p> 
<p> 接下来切换到Clock Configuration界面，选择外部时钟，设置到最高时钟频率，如下</p> 
<p><img alt="" height="774" src="https://images2.imgbox.com/95/98/aRbIolvj_o.png" width="1200"></p> 
<p> 接下来切换到Project Manager界面，设置工程文件名和保存路径，keil5开发就选择MDK-ARM</p> 
<p><img alt="" height="484" src="https://images2.imgbox.com/5d/04/P4Xj5GLn_o.png" width="1200"></p> 
<p> 然后点开Code...栏，勾选为每个外设建立.c和.h文件，最后点击右上角Generate Code生成项目</p> 
<p><img alt="" height="547" src="https://images2.imgbox.com/74/b4/WVz8uF5b_o.png" width="1200"></p> 
<p> <img alt="" height="565" src="https://images2.imgbox.com/c6/8c/cik1vzuA_o.png" width="1200"></p> 
<p> 接下来我们用keil5打开新建的工程，打开LED/Applicstion/User/Core下的freertos.c文件</p> 
<p><img alt="" height="568" src="https://images2.imgbox.com/44/8a/26grWgpl_o.png" width="1149"></p> 
<p> 更改freertos.c文件代码最下面刚新建的两个任务的代码，如下图代码，然后就直接编译</p> 
<p><img alt="" height="807" src="https://images2.imgbox.com/ba/3c/SNchWmW1_o.png" width="746"></p> 
<p> 然后打开ST-Link Utility软件，连接开发板，打开我们刚生成的hex文件，hex文件所在地址一般在创的LED文件里面，然后点击Start开始烧录</p> 
<p><img alt="" height="746" src="https://images2.imgbox.com/1b/55/CGebVBma_o.png" width="1018"></p> 
<p> 如下图闪烁，已经将写的连个任务程序烧录成功</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/17/e3/YNvOrN35_o.jpg"></p> 
<p> </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/e8/41/ex6y6ARi_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bc9a6f71db78bc40cad4f09cf627fa80/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">若依-plus-vue启动显示Redis连接错误</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f81d84a91bfd2d2300ad1fb5d95cdd25/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RT-Thread系列09——Finsh自定义命令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>