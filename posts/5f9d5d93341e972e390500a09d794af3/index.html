<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vtkInteractorStyleRubberBandPick 类简介 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vtkInteractorStyleRubberBandPick 类简介" />
<meta property="og:description" content="类的继承图
简介：
该类主要用橡皮筋矩形拾取 props.
Like TrackBallCamera, but this can pick props underneath a rubber band selection rectangle.
用户可以通过鼠标左键或者“r”键画一个矩形。当鼠标释放的时候，附加的拾取器可以操作所选矩形中间的像素值。 如果拾取器是 vtkAreaPicker，可以操作整个所选的矩形。
键盘“P”： 1*1 的矩形框。
This interactor style allows the user to draw a rectangle in the render window by hitting &#39;r&#39; and then using the left mouse button. When the mouse button is released, the attached picker operates on the pixel in the center of the selection rectangle. If the picker happens to be a vtkAreaPicker it will operate on the entire selection rectangle." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5f9d5d93341e972e390500a09d794af3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-08-30T18:01:52+08:00" />
<meta property="article:modified_time" content="2016-08-30T18:01:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vtkInteractorStyleRubberBandPick 类简介</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:24px"><a target="_blank" href="http://www.vtk.org/doc/nightly/html/classvtkInteractorStyleRubberBandPick.html" rel="nofollow noopener noreferrer">类</a>的继承图</span></p> 
<p><span style="font-size:24px"><img src="https://images2.imgbox.com/ff/f9/bmR6UitS_o.png" alt=""><br> </span></p> 
<p><span style="font-size:24px">简介：</span></p> 
<p><span style="font-size:24px"></span></p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif">该类主要用橡皮筋矩形拾取 props.</p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif">Like TrackBallCamera, but this can pick props underneath a rubber band selection rectangle.</p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif">用户可以通过鼠标左键或者“r”键画一个矩形。当鼠标释放的时候，附加的拾取器可以操作所选矩形中间的像素值。 如果拾取器是 vtkAreaPicker，可以操作整个所选的矩形。</p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif">键盘“P”： 1*1 的矩形框。</p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif">This interactor style allows the user to draw a rectangle in the render window by hitting 'r' and then using the left mouse button. When the mouse button is released, the attached picker operates on the pixel in the center of the selection rectangle. If the picker happens to be a <a target="_blank" class="el" href="http://www.vtk.org/doc/nightly/html/classvtkAreaPicker.html" rel="nofollow noopener noreferrer" title="Picks props behind a selection rectangle on a viewport. " style="color:rgb(70,101,162); font-weight:bold; text-decoration:none">vtkAreaPicker</a> it will operate on the entire selection rectangle. When the 'p' key is hit the above pick operation occurs on a 1x1 rectangle. In other respects it behaves the same as its parent class.</p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif">示例一</p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif"></p> 
<pre><code class="language-cpp">#include &lt;vtkVersion.h&gt;
#include &lt;vtkSmartPointer.h&gt;
#include &lt;vtkPoints.h&gt;
#include &lt;vtkXMLPolyDataWriter.h&gt;
#include &lt;vtkPolyData.h&gt;
#include &lt;vtkCellArray.h&gt;
#include &lt;vtkPolyDataMapper.h&gt;
#include &lt;vtkActor.h&gt;
#include &lt;vtkRenderWindow.h&gt;
#include &lt;vtkRenderer.h&gt;
#include &lt;vtkRenderWindowInteractor.h&gt;
#include &lt;vtkInteractorStyleRubberBandPick.h&gt;
#include &lt;vtkInteractorStyleTrackballCamera.h&gt;
#include &lt;vtkInteractorStyleTrackball.h&gt;
#include &lt;vtkAreaPicker.h&gt;
#include &lt;vtkCallbackCommand.h&gt;
#include &lt;vtkProp3DCollection.h&gt;

void PickCallbackFunction ( vtkObject* caller, long unsigned int eventId, void* clientData, void* callData );

int main(int, char *[])
{
	// Create a set of points
	vtkSmartPointer&lt;vtkPoints&gt; points = vtkSmartPointer&lt;vtkPoints&gt;::New();
	vtkSmartPointer&lt;vtkCellArray&gt; vertices = vtkSmartPointer&lt;vtkCellArray&gt;::New();
	vtkIdType pid[1];
	pid[0] = points-&gt;InsertNextPoint ( 1.0, 0.0, 0.0 );
	vertices-&gt;InsertNextCell ( 1,pid );
	pid[0] = points-&gt;InsertNextPoint ( 0.0, 0.0, 0.0 );
	vertices-&gt;InsertNextCell ( 1,pid );
	pid[0] = points-&gt;InsertNextPoint ( 0.0, 1.0, 0.0 );
	vertices-&gt;InsertNextCell ( 1,pid );

	// Create a polydata
	vtkSmartPointer&lt;vtkPolyData&gt; polydata = vtkSmartPointer&lt;vtkPolyData&gt;::New();
	polydata-&gt;SetPoints ( points );
	polydata-&gt;SetVerts ( vertices );

	// Visualize
	vtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper = vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();
#if VTK_MAJOR_VERSION &lt;= 5
	mapper-&gt;SetInput(polydata);
#else
	mapper-&gt;SetInputData(polydata);
#endif
	vtkSmartPointer&lt;vtkActor&gt; actor = vtkSmartPointer&lt;vtkActor&gt;::New();
	actor-&gt;SetMapper(mapper);

	vtkSmartPointer&lt;vtkRenderer&gt; renderer =	vtkSmartPointer&lt;vtkRenderer&gt;::New();
	vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow = vtkSmartPointer&lt;vtkRenderWindow&gt;::New();
	renderWindow-&gt;AddRenderer(renderer);

	vtkSmartPointer&lt;vtkAreaPicker&gt; areaPicker = vtkSmartPointer&lt;vtkAreaPicker&gt;::New();

	vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor =	vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::New();
	renderWindowInteractor-&gt;SetRenderWindow(renderWindow);
	renderWindowInteractor-&gt;SetPicker(areaPicker);

	renderer-&gt;AddActor(actor);
	renderer-&gt;SetBackground(0,0,0.2); // Background color dark blue

	renderWindow-&gt;Render();

	// For vtkInteractorStyleRubberBandPick - use 'r' and left-mouse to draw a selection box used to pick
	vtkSmartPointer&lt;vtkInteractorStyleRubberBandPick&gt; style = vtkSmartPointer&lt;vtkInteractorStyleRubberBandPick&gt;::New();

	// For vtkInteractorStyleTrackballCamera - use 'p' to pick at the current mouse position
	//vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt; style = vtkSmartPointer&lt;vtkInteractorStyleTrackballCamera&gt;::New(); //like paraview
	style-&gt;SetCurrentRenderer(renderer);
	renderWindowInteractor-&gt;SetInteractorStyle( style );

	vtkSmartPointer&lt;vtkCallbackCommand&gt; pickCallback = vtkSmartPointer&lt;vtkCallbackCommand&gt;::New();
	pickCallback-&gt;SetCallback ( PickCallbackFunction );

	areaPicker-&gt;AddObserver ( vtkCommand::EndPickEvent, pickCallback );

	renderWindowInteractor-&gt;Start();

	return EXIT_SUCCESS;
}


void PickCallbackFunction(vtkObject* caller,
	long unsigned int vtkNotUsed(eventId),
	void* vtkNotUsed(clientData),
	void* vtkNotUsed(callData))
{
	std::cout &lt;&lt; "Pick." &lt;&lt; std::endl;
	vtkAreaPicker* areaPicker = static_cast&lt;vtkAreaPicker*&gt;(caller);
	vtkProp3DCollection* props = areaPicker-&gt;GetProp3Ds();

	for(vtkIdType i = 0; i &lt; props-&gt;GetNumberOfItems(); i++)
	{
		vtkProp3D* prop = props-&gt;GetNextProp3D();
		std::cout &lt;&lt; "Picked prop: " &lt;&lt; prop &lt;&lt; std::endl;
	}
}</code></pre>这个就非常简单了，vtkInteractorStyleRubberBandPick 是 vtkInteractorStyle 的子类，使用时，加入到 vtkRenderWinderInteractor 的对象中，同时需要设置该 style 的当前 renderer. 
<p></p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif"><br> </p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif"><br> </p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif"><a target="_blank" href="http://www.vtk.org/Wiki/VTK/Examples/Cxx/Picking/HighlightSelection" rel="nofollow noopener noreferrer">示例二</a>：</p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif"></p> 
<pre><code class="language-cpp">#include &lt;vtkVersion.h&gt;

#include &lt;vtkActor.h&gt;
#include &lt;vtkAreaPicker.h&gt;
#include &lt;vtkDataSetMapper.h&gt;
#include &lt;vtkDataSetSurfaceFilter.h&gt;
#include &lt;vtkExtractPolyDataGeometry.h&gt;
#include &lt;vtkIdFilter.h&gt;
#include &lt;vtkIdTypeArray.h&gt;
#include &lt;vtkInteractorStyleRubberBandPick.h&gt;
#include &lt;vtkObjectFactory.h&gt;
#include &lt;vtkPlanes.h&gt;
#include &lt;vtkPointData.h&gt;
#include &lt;vtkPolyData.h&gt;
#include &lt;vtkPolyDataMapper.h&gt;
#include &lt;vtkProperty.h&gt;
#include &lt;vtkRenderer.h&gt;
#include &lt;vtkRendererCollection.h&gt;
#include &lt;vtkRenderWindow.h&gt;
#include &lt;vtkRenderWindowInteractor.h&gt;
#include &lt;vtkSmartPointer.h&gt;
#include &lt;vtkSphereSource.h&gt;
#include &lt;vtkUnstructuredGrid.h&gt;
#include &lt;vtkVersion.h&gt;
#include &lt;vtkVertexGlyphFilter.h&gt;

#define VTKISRBP_ORIENT 0
#define VTKISRBP_SELECT 1

// Define interaction style
class HighlightInteractorStyle : public vtkInteractorStyleRubberBandPick
{
public:
	static HighlightInteractorStyle* New();
	vtkTypeMacro(HighlightInteractorStyle,vtkInteractorStyleRubberBandPick);

	HighlightInteractorStyle() : vtkInteractorStyleRubberBandPick()
	{
		this-&gt;SelectedMapper = vtkSmartPointer&lt;vtkDataSetMapper&gt;::New();
		this-&gt;SelectedActor = vtkSmartPointer&lt;vtkActor&gt;::New();
		this-&gt;SelectedActor-&gt;SetMapper(SelectedMapper);
	}

	virtual void OnLeftButtonUp()
	{
		// Forward events
		vtkInteractorStyleRubberBandPick::OnLeftButtonUp();

		if(this-&gt;CurrentMode == VTKISRBP_SELECT)
		{
			vtkPlanes* frustum = static_cast&lt;vtkAreaPicker*&gt;(this-&gt;GetInteractor()-&gt;GetPicker())-&gt;GetFrustum();

			vtkSmartPointer&lt;vtkExtractPolyDataGeometry&gt; extractPolyDataGeometry = vtkSmartPointer&lt;vtkExtractPolyDataGeometry&gt;::New();
#if VTK_MAJOR_VERSION &lt;= 5
			extractPolyDataGeometry-&gt;SetInput(this-&gt;PolyData);
#else
			extractPolyDataGeometry-&gt;SetInputData(this-&gt;PolyData);
#endif
			extractPolyDataGeometry-&gt;SetImplicitFunction(frustum);
			extractPolyDataGeometry-&gt;Update();

			std::cout &lt;&lt; "Extracted " &lt;&lt; extractPolyDataGeometry-&gt;GetOutput()-&gt;GetNumberOfCells() &lt;&lt; " cells." &lt;&lt; std::endl;

#if VTK_MAJOR_VERSION &lt;= 5
			this-&gt;SelectedMapper-&gt;SetInputConnection(
				extractPolyDataGeometry-&gt;GetOutputPort());
#else
			this-&gt;SelectedMapper-&gt;SetInputData(extractPolyDataGeometry-&gt;GetOutput());
#endif
			this-&gt;SelectedMapper-&gt;ScalarVisibilityOff();

			//        vtkIdTypeArray* ids = vtkIdTypeArray::SafeDownCast(selected-&gt;GetPointData()-&gt;GetArray("OriginalIds"));

			this-&gt;SelectedActor-&gt;GetProperty()-&gt;SetColor(1.0, 0.0, 0.0); //(R,G,B)
			this-&gt;SelectedActor-&gt;GetProperty()-&gt;SetPointSize(5);

			this-&gt;GetInteractor()-&gt;GetRenderWindow()-&gt;GetRenderers()-&gt;GetFirstRenderer()-&gt;AddActor(SelectedActor);
			this-&gt;GetInteractor()-&gt;GetRenderWindow()-&gt;Render();
			this-&gt;HighlightProp(NULL);
		}
	}

	void SetPolyData(vtkSmartPointer&lt;vtkPolyData&gt; polyData) {this-&gt;PolyData = polyData;}
private:
	vtkSmartPointer&lt;vtkPolyData&gt; PolyData;
	vtkSmartPointer&lt;vtkActor&gt; SelectedActor;
	vtkSmartPointer&lt;vtkDataSetMapper&gt; SelectedMapper;

};
vtkStandardNewMacro(HighlightInteractorStyle);

int main (int, char *[])
{
	vtkSmartPointer&lt;vtkSphereSource&gt; sphereSource = vtkSmartPointer&lt;vtkSphereSource&gt;::New();
	sphereSource-&gt;Update();

	vtkSmartPointer&lt;vtkIdFilter&gt; idFilter =	vtkSmartPointer&lt;vtkIdFilter&gt;::New();
	idFilter-&gt;SetInputConnection(sphereSource-&gt;GetOutputPort());
	idFilter-&gt;SetIdsArrayName("OriginalIds");
	idFilter-&gt;Update();

	// This is needed to convert the ouput of vtkIdFilter (vtkDataSet) back to vtkPolyData
	vtkSmartPointer&lt;vtkDataSetSurfaceFilter&gt; surfaceFilter = vtkSmartPointer&lt;vtkDataSetSurfaceFilter&gt;::New();
	surfaceFilter-&gt;SetInputConnection(idFilter-&gt;GetOutputPort());
	surfaceFilter-&gt;Update();

	vtkPolyData* input = surfaceFilter-&gt;GetOutput();

	// Create a mapper and actor
	vtkSmartPointer&lt;vtkPolyDataMapper&gt; mapper =	vtkSmartPointer&lt;vtkPolyDataMapper&gt;::New();
	mapper-&gt;SetInputConnection(sphereSource-&gt;GetOutputPort());
	mapper-&gt;ScalarVisibilityOff();

	vtkSmartPointer&lt;vtkActor&gt; actor = vtkSmartPointer&lt;vtkActor&gt;::New();
	actor-&gt;SetMapper(mapper);
	actor-&gt;GetProperty()-&gt;SetPointSize(500);

	// Visualize
	vtkSmartPointer&lt;vtkRenderer&gt; renderer =	vtkSmartPointer&lt;vtkRenderer&gt;::New();
	vtkSmartPointer&lt;vtkRenderWindow&gt; renderWindow =	vtkSmartPointer&lt;vtkRenderWindow&gt;::New();
	renderWindow-&gt;AddRenderer(renderer);

	vtkSmartPointer&lt;vtkAreaPicker&gt; areaPicker =	vtkSmartPointer&lt;vtkAreaPicker&gt;::New();
	vtkSmartPointer&lt;vtkRenderWindowInteractor&gt; renderWindowInteractor =	vtkSmartPointer&lt;vtkRenderWindowInteractor&gt;::New();
	renderWindowInteractor-&gt;SetPicker(areaPicker);
	renderWindowInteractor-&gt;SetRenderWindow(renderWindow);

	renderer-&gt;AddActor(actor);
	//renderer-&gt;SetBackground(1,1,1); // Background color white

	renderWindow-&gt;Render();

	vtkSmartPointer&lt;HighlightInteractorStyle&gt; style = vtkSmartPointer&lt;HighlightInteractorStyle&gt;::New();
	style-&gt;SetPolyData(input);
	renderWindowInteractor-&gt;SetInteractorStyle( style );

	renderWindowInteractor-&gt;Start();

	return EXIT_SUCCESS;
}</code></pre> 
<br> 
<p></p> 
<p style="font-size:14px; line-height:22px; font-family:Roboto,sans-serif"><br> <br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d16194fe66e4caa974c86c32455ffbb7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Codeforces 711D  dfs找环</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a8223d7198e23eff0c4d6cee28d1a940/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">P图两张</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>