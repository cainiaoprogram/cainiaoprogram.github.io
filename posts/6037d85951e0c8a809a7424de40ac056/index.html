<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>redis连接Unable to connect to Redis - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="redis连接Unable to connect to Redis" />
<meta property="og:description" content="简介 今天本地springboot项目配置连接redis，一直报连接失败
Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379 Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379 Caused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO AUTH &lt;user&gt; &lt;pass&gt; option can be used to authenticate the client and select the RESP protocol version at the same time 这样保持报错
下面来看如何解决的
解决方法 修改redis配置
1、设置可连接redis的网卡 指定了bind，则说明只允许来自指定网卡的Redis请求。如果没有指定或者指定为：0.0.0.0，就说明可以接受来自任意一个网卡的Redis请求。
查看网卡指令：ifconfig
bind 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6037d85951e0c8a809a7424de40ac056/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-22T14:34:57+08:00" />
<meta property="article:modified_time" content="2023-05-22T14:34:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">redis连接Unable to connect to Redis</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>简介</h2> 
<p>今天本地springboot项目配置连接redis，一直报连接失败</p> 
<pre><code>Unable to connect to Redis; nested exception is io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
</code></pre> 
<pre><code>Caused by: io.lettuce.core.RedisConnectionException: Unable to connect to localhost:6379
</code></pre> 
<pre><code>Caused by: io.lettuce.core.RedisCommandExecutionException: NOAUTH HELLO must be called with the client already authenticated, otherwise the HELLO AUTH &lt;user&gt; &lt;pass&gt; option can be used to authenticate the client and select the RESP protocol version at the same time
</code></pre> 
<p>这样保持报错<br> 下面来看如何解决的</p> 
<h2><a id="_16"></a>解决方法</h2> 
<p>修改redis配置</p> 
<h3><a id="1redis_18"></a>1、设置可连接redis的网卡</h3> 
<p>指定了bind，则说明只允许来自指定网卡的Redis请求。如果没有指定或者指定为：0.0.0.0，就说明可以接受来自任意一个网卡的Redis请求。<br> 查看网卡指令：<code>ifconfig</code></p> 
<pre><code>bind 0.0.0.0
</code></pre> 
<p>0.0.0.0代表所有服务器均可连接<br> <img src="https://images2.imgbox.com/72/b4/JfjuBRw5_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2yes_27"></a>2、设置保护模式为：yes</h3> 
<p>同样因为本机调试，避免掉误连的情况发上</p> 
<pre><code>protected-mode yes
</code></pre> 
<p><img src="https://images2.imgbox.com/a9/2c/ppe1wZht_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_33"></a>3、设置连接密码</h3> 
<pre><code>requirepass redis
</code></pre> 
<p><img src="https://images2.imgbox.com/3e/77/hucncYb7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4redis_38"></a>4、重启redis</h3> 
<h3><a id="5redis_39"></a>5、设置本地项目连接redis密码</h3> 
<p><img src="https://images2.imgbox.com/0f/f3/SFULhunk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6_42"></a>6、重启项目</h3> 
<p>连接未报错，项目启动成功</p> 
<h2><a id="_44"></a>总结：</h2> 
<p>出现连接错误的排查方向<br> 1、redis服务配置的网卡限制：bind命令是否允许连接<br> 2、redis的保护模式是否允许远程连接：protected-mode命令（yes为开启保护模式，不允许远程连接，no为关闭保护模式，允许远程连接）<br> 3、是否设置redis连接密码及同项目配置密码是否一致，<code>我此次连接失败的主要原因是配置文件的password: redis的配置中冒号后面少了空格，配置未能正确读取</code><br> 错误配置：<code>password:redis</code><br> 正确配置：<code>password: redis</code></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a57b1e7972d007cbf4d132b0b9900217/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">什么是单域名证书</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/64133c1dd913637d879cf63e689efad6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue3 封装组件 ——懒加载</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>