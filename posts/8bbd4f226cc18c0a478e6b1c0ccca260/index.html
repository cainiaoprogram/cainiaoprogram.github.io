<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>深度学习：batch normlization - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="深度学习：batch normlization" />
<meta property="og:description" content="https://www.zhihu.com/question/38102762/answer/607815171
数据经过归一化和标准化后可以加快梯度下降的求解速度，这就是Batch Normalization等技术非常流行的原因，它使得可以使用更大的学习率更稳定地进行梯度传播，甚至增加网络的泛化能力.
一、什么是归一化/标准化 Normalization是一个统计学中的概念，我们可以叫它归一化或者规范化，它并不是一个完全定义好的数学操作(如加减乘除)。它通过将数据进行偏移和尺度缩放调整，在数据预处理时是非常常见的操作，在网络的中间层如今也很频繁的被使用。
1. 线性归一化
最简单来说，归一化是指将数据约束到固定的分布范围，比如8位图像的0～255像素值，比如0～1。
在数字图像处理领域有一个很常见的线性对比度拉伸操作： x减最小 除 最大减最小
X=(x-xmin)/(xmax-mxin)
它常常可以实现下面的增强对比度的效果。不过这个的归一化方法有个非常致命的缺陷，当X最大值或者最小值为孤立的极值点，会影响性能。
2. 零均值归一化/Z-score标准化 减均值 除方差
零均值归一化也是一个常见的归一化方法，被称为标准化方法，即每一变量值与其平均值之差除以该变量的标准差。
经过处理后的数据符合均值为0，标准差为1的分布，如果原始的分布是正态分布，那么z-score标准化就将原始的正态分布转换为标准正态分布，机器学习中的很多问题都是基于正态分布的假设，这是更加常用的归一化方法。
以上两种方法都是线性变换，对输入向量X按比例压缩再进行平移，操作之后原始有量纲的变量变成无量纲的变量。不过它们不会改变分布本身的形状，下面以一个指数分布为例：
如果要改变分布本身的形状，下面也介绍两种。
3.正态分布Box-Cox变换
box-cox变换可以将一个非正态分布转换为正态分布，使得分布具有对称性，变换公式如下：
在这里lamda是一个基于数据求取的待定变换参数，Box-Cox的效果如下。
4. 直方图均衡化
直方图均衡也可以将某一个分布归一化到另一个分布，它通过图像的灰度值分布，即图像直方图来对图像进行对比度进调整，可以增强局部的对比度。
它的变换步骤如下：
(1)计算概率密度和累积概率密度。
(2)创建累积概率到灰度分布范围的单调线性映射T。
(3)根据T进行原始灰度值到新灰度值的映射。
直方图均衡化将任意的灰度范围映射到全局灰度范围之间，对于8位的图像就是(0,255)，它相对于直接线性拉伸，让分布更加均匀，对于增强相近灰度的对比度很有效，如下图。
综上，归一化数据的目标，是为了让数据的分布变得更加符合期望，增强数据的表达能力。
在深度学习中，因为网络的层数非常多，如果数据分布在某一层开始有明显的偏移，随着网络的加深这一问题会加剧(这在BN的文章中被称之为internal covariate shift)，进而导致模型优化的难度增加，甚至不能优化。所以，归一化就是要减缓这个问题。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8bbd4f226cc18c0a478e6b1c0ccca260/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-03-03T17:25:55+08:00" />
<meta property="article:modified_time" content="2019-03-03T17:25:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">深度学习：batch normlization</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a href="https://www.zhihu.com/question/38102762/answer/607815171" rel="nofollow">https://www.zhihu.com/question/38102762/answer/607815171</a></p> 
<p>数据经过归一化和标准化后可以<strong>加快梯度下降</strong>的求解速度，这就是Batch Normalization等技术非常流行的原因，<strong>它使得可以使用更大的学习率更稳定地进行梯度传播，甚至增加网络的泛化能力.</strong></p> 
<h2>一、什么是归一化/标准化</h2> 
<p>Normalization是一个统计学中的概念，我们可以叫它<strong>归一化或者规范化</strong>，它并不是一个完全定义好的数学操作(如加减乘除)。它通过将数据进行偏移和尺度缩放调整，在数据预处理时是非常常见的操作，在网络的中间层如今也很频繁的被使用。</p> 
<p><strong>1. 线性归一化</strong></p> 
<p>最简单来说，<strong>归一化是指将数据约束到固定的分布范围</strong>，比如8位图像的0～255像素值，<strong>比如0～1。</strong></p> 
<p>在数字图像处理领域有一个很常见的线性对比度拉伸操作： <strong> x减最小 除 最大减最小</strong></p> 
<blockquote> 
 <p>X=(x-xmin)/(xmax-mxin)</p> 
</blockquote> 
<p>它常常可以实现下面的增强对比度的效果。<strong>不过这个的归一化方法有个非常致命的缺陷，当X最大值或者最小值为孤立的极值点，会影响性能。</strong></p> 
<p><img alt="" class="has" height="429" src="https://images2.imgbox.com/bf/6a/bH0RcMJ2_o.png" width="646"></p> 
<p> </p> 
<p><strong>2. 零均值归一化/Z-score标准化 <span style="color:#f33b45;">减均值 除方差</span></strong></p> 
<p>零均值归一化也是一个常见的归一化方法，被称为标准化方法，即每一变量值与其平均值之差除以该变量的标准差。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/75/d4/xjTzwkxD_o.jpg" width="238"></p> 
<p>经过处理后的数据符合均值为0，标准差为1的分布，<strong>如果原始的分布是正态分布，那么z-score标准化就将原始的正态分布转换为标准正态分布</strong>，机器学习中的很多问题都是基于正态分布的假设，这是更加常用的归一化方法。</p> 
<p>以上两种方法都是线性变换，对输入向量X按比例压缩再进行平移，操作之后原始有量纲的变量变成无量纲的变量。不过它们不会改变分布本身的形状，下面以一个指数分布为例：</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/b4/e8/9xrJVVuG_o.jpg" width="1080"></p> 
<p>如果要改变分布本身的形状，下面也介绍两种。</p> 
<p><strong>3.正态分布Box-Cox变换</strong></p> 
<p>box-cox变换可以将一个非正态分布转换为正态分布，使得分布具有对称性，变换公式如下：</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/d6/44/wxR9wAw6_o.jpg" width="404"></p> 
<p>在这里lamda是一个基于数据求取的待定变换参数，Box-Cox的效果如下。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/41/af/ClfmhS0Z_o.jpg" width="1080"></p> 
<p><strong>4. 直方图均衡化</strong></p> 
<p>直方图均衡也可以将某一个分布归一化到另一个分布，它通过图像的灰度值分布，即图像直方图来对图像进行对比度进调整，可以增强局部的对比度。</p> 
<p>它的变换步骤如下：</p> 
<p>(1)计算概率密度和累积概率密度。</p> 
<p>(2)创建累积概率到灰度分布范围的单调线性映射T。</p> 
<p>(3)根据T进行原始灰度值到新灰度值的映射。</p> 
<p>直方图均衡化将任意的灰度范围映射到全局灰度范围之间，对于8位的图像就是(0,255)，它相对于直接线性拉伸，让分布更加均匀，对于增强相近灰度的对比度很有效，如下图。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/98/7e/j5Bes8GU_o.jpg" width="561"></p> 
<p>综上，<strong>归一化数据的目标，是为了让数据的分布变得更加符合期望，增强数据的表达能力</strong>。</p> 
<p><strong>在深度学习中，因为网络的层数非常多，如果数据分布在某一层开始有明显的偏移，随着网络的加深这一问题会加剧(这在BN的文章中被称之为internal covariate shift)，进而导致模型优化的难度增加，甚至不能优化。所以，归一化就是要减缓这个问题。</strong></p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ec3fedf78cd90b978904be3bd37cdf89/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">初步使用gstreamer</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ef64ed22406804235aa251372f108dde/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">绘制sklearn分类结果图</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>