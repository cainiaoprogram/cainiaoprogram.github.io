<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>12.30更新5$key！2023最新Python搭建个人ChatGPT流式输出网站（包含源码、免费gpt3.5/4网址、以及免费测试apikey）快来体验吧！！！ - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="12.30更新5$key！2023最新Python搭建个人ChatGPT流式输出网站（包含源码、免费gpt3.5/4网址、以及免费测试apikey）快来体验吧！！！" />
<meta property="og:description" content="ps:在这里提前祝各位小伙伴们新年快乐哦！！！ 本期文章为纯免费资源分享，欢迎交流分享你的学习经验！2023年12月30日最新python实现流式输出gpt网站搭建的源码：
目录
1.python源码
2.网站效果演示
3.html源码
1.python后端源码 如下为python后端源码：
from flask import Flask, render_template, request, Response, jsonify import openai #openai使用0.28.0版本，urllib3使用1.26.2版本 import random # 设置代理网址 openai.api_base = &#34;https://api.openai-proxy.com/v1&#34; # 替换为您自己的OpenAI API密钥列表，如下key供各位测试，12.30已更新，新年快乐！用完提醒我，哈哈~~~ api_keys = [ &#34;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&#34;, ] # 创建Flask应用程序 app = Flask(__name__) # 定义可供选择的模型，已经更新gpt所有14个模型 available_models = { &#34;gpt-3.5-turbo-1106&#34;: &#34;GPT-3.5-Turbo-1106(4096tokens)&#34;, &#34;gpt-3.5-turbo&#34;: &#34;GPT-3.5-Turbo(4096tokens)&#34;, &#34;gpt-3.5-turbo-16k&#34;: &#34;GPT-3.5-Turbo-16k(16385tokens)&#34;, &#34;gpt-3.5-turbo-0613&#34;: &#34;GPT-3.5-Turbo-0613(4096tokens)&#34;, &#34;gpt-3.5-turbo-16k-0613&#34;: &#34;GPT-3.5-Turbo-16k-0613(16385tokens)&#34;, &#34;gpt-3.5-turbo-0301&#34;: &#34;GPT-3.5-Turbo-0301(4096tokens)&#34;, &#34;gpt-4-1106-preview&#34;: &#34;GPT-4-1106-preview(4096tokens,max:128000tokens)&#34;, &#34;gpt-4-vision-preview&#34;: &#34;GPT-4-vision-preview(4096tokens,max:128000tokens)&#34;, &#34;gpt-4&#34;: &#34;GPT-4(8192tokens)&#34;, &#34;gpt-4-0613&#34;: &#34;GPT-4-0613(8192tokens)&#34;, &#34;gpt-4-32k&#34;: &#34;GPT-4-32k(32768tokens)&#34;, &#34;gpt-4-32k-0613&#34;: &#34;GPT-4-32k-0613(32768tokens)&#34;, &#34;gpt-4-0314&#34;: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b0c429249a08a1d917be809035e7652a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-30T02:44:42+08:00" />
<meta property="article:modified_time" content="2023-12-30T02:44:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">12.30更新5$key！2023最新Python搭建个人ChatGPT流式输出网站（包含源码、免费gpt3.5/4网址、以及免费测试apikey）快来体验吧！！！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h6>ps:在这里提前祝各位小伙伴们新年快乐哦！！！</h6> 
<hr> 
<p>本期文章为纯免费资源分享，欢迎交流分享你的学习经验！2023年12月30日最新python实现流式输出gpt网站搭建的源码：</p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="1.python%E6%BA%90%E7%A0%81-toc" style="margin-left:0px;"><a href="#1.python%E6%BA%90%E7%A0%81" rel="nofollow">1.python源码</a></p> 
<p id="2.%E7%BD%91%E7%AB%99%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA-toc" style="margin-left:0px;"><a href="#2.%E7%BD%91%E7%AB%99%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA" rel="nofollow">2.网站效果演示</a></p> 
<p id="3.html%E6%BA%90%E7%A0%81-toc" style="margin-left:0px;"><a href="#3.html%E6%BA%90%E7%A0%81" rel="nofollow">3.html源码</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.python%E6%BA%90%E7%A0%81"><strong>1.python后端源码</strong></h2> 
<p>如下为python后端源码：</p> 
<pre><code class="language-python">from flask import Flask, render_template, request,  Response, jsonify
import openai  #openai使用0.28.0版本，urllib3使用1.26.2版本
import random

# 设置代理网址
openai.api_base = "https://api.openai-proxy.com/v1"

# 替换为您自己的OpenAI API密钥列表，如下key供各位测试，12.30已更新，新年快乐！用完提醒我，哈哈~~~
api_keys = [
    "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",

]
# 创建Flask应用程序
app = Flask(__name__)
# 定义可供选择的模型，已经更新gpt所有14个模型
available_models = {
    "gpt-3.5-turbo-1106": "GPT-3.5-Turbo-1106(4096tokens)",
    "gpt-3.5-turbo": "GPT-3.5-Turbo(4096tokens)",
    "gpt-3.5-turbo-16k": "GPT-3.5-Turbo-16k(16385tokens)",
    "gpt-3.5-turbo-0613": "GPT-3.5-Turbo-0613(4096tokens)",
    "gpt-3.5-turbo-16k-0613": "GPT-3.5-Turbo-16k-0613(16385tokens)",
    "gpt-3.5-turbo-0301": "GPT-3.5-Turbo-0301(4096tokens)",
    "gpt-4-1106-preview": "GPT-4-1106-preview(4096tokens,max:128000tokens)",
    "gpt-4-vision-preview": "GPT-4-vision-preview(4096tokens,max:128000tokens)",
    "gpt-4": "GPT-4(8192tokens)",
    "gpt-4-0613": "GPT-4-0613(8192tokens)",
    "gpt-4-32k": "GPT-4-32k(32768tokens)",
    "gpt-4-32k-0613": "GPT-4-32k-0613(32768tokens)",
    "gpt-4-0314": "GPT-4-0314(8192tokens)",
    "gpt-4-32k-0314": "GPT-4-32k-0314(32768tokens)",
}

messages = []

@app.route('/')
def index():
    return render_template('8.html', models=available_models)

@app.route('/clear_history', methods=['POST'])
def clear_history():
    messages.clear()  # 清除所有对话历史
    return jsonify({"message": "对话历史已清除"})

@app.route('/get_response', methods=['POST'])
def get_response():
    user_input = request.json.get('user_input')
    selected_model = request.json.get('selected_model')
    system_message = request.json.get('system_message')
    temperature = float(request.json.get('temperature'))
    max_tokens = int(request.json.get('max_tokens'))
    continuous_chat = request.json.get('continuous_chat')
    print("用户输入内容：", user_input)

    if continuous_chat == "false":
        messages.clear()  # 只有在禁用连续对话时清空消息列表
        messages.append({"role": "system", "content": system_message})
        messages.append({"role": "user", "content": user_input})
    else:
        messages.append({"role": "system", "content": system_message})
        messages.append({"role": "user", "content": user_input})
    selected_api_key = random.choice(api_keys)
    openai.api_key = selected_api_key.strip()
    print(openai.api_key)

    if len(messages) &gt; 2:
        messages.pop(0)

    response = openai.ChatCompletion.create(
        model=selected_model,
        messages=messages,
        temperature=temperature,
        max_tokens=max_tokens,
        stream=True
    )

    def get_stream(tar_get_response):
        for chunk in tar_get_response:
            chunk_message = chunk['choices'][0]['delta']
            print(chunk_message)
            if chunk_message != "":
                try:
                    content = chunk_message["content"]
                    for line in content.split("\n"):
                        messages.append({"role": "assistant", "content": line})
                        yield line
                        print("GPT回复内容：", line)
                except:
                    yield "\n"
    response = Response(get_stream(response),content_type='text/html')
    return response

if __name__ == '__main__':
    app.run('0.0.0.0', 80)</code></pre> 
<h2 id="2.%E7%BD%91%E7%AB%99%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA">2.网站效果演示</h2> 
<p>源码如上（12.09已更新测试apikey），包括连续对话等功能，功能展示如下图，如下网站分别为gpt3.5和gpt4（余额有限，速来体验！），均为本人自己搭建网站，可免费使用。</p> 
<p>GPT-3.5-Turbo：</p> 
<p><img alt="" height="1035" src="https://images2.imgbox.com/e7/f2/fAWg0umN_o.png" width="1200"></p> 
<p></p> 
<p>GPT-4-Turbo：</p> 
<p><img alt="" height="1053" src="https://images2.imgbox.com/90/79/cP7SS2sD_o.png" width="1200"></p> 
<p></p> 
<p><span style="color:#0d0016;"><strong>ps：免费福利放送中，欢迎体验：</strong></span></p> 
<p><a class="link-info has-card" href="https://6.ccfgpt.cn" rel="nofollow" title="supergpt shop"><span class="link-card-box"><span class="link-title">supergpt shop</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/b9/24/fG6mXnnc_o.png" alt="icon-default.png?t=N7T8">https://6.ccfgpt.cn</span></span></a><img alt="" height="1039" src="https://images2.imgbox.com/2a/ca/clSpzWVw_o.png" width="1200"></p> 
<p></p> 
<p>下面也是本人搭建的几个gpt网站，分别是GPT3.5（余额总共400$,12.26更新：nextweb添加gemini模型，12.30更新另一种风格的gpt3.5网页）和GPT4、Gemini Pro，比较实用，目前完全免费，可以使用所有gpt模型，无须翻墙和填写密钥，目前GPT4的余额有限(12.26充值!!！余额10$，解锁dalle3以及各种插件体验)，先到先体验哦！！设置好gpt模型（推荐1106模型，速度快）等参数直接就可以使用gpt进行对话，欢迎各位朋友们前来体验，可以加q群学习交流（226848325）：</p> 
<p><a class="has-card" href="https://ccf666.cn" rel="nofollow" title="ChatGPT-3.5"><span class="link-card-box"><span class="link-title">ChatGPT-3.5</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/00/78/Y636xjN3_o.png" alt="icon-default.png?t=N7T8">https://ccf666.cn</span></span></a></p> 
<p><a class="link-info has-card" href="https://supergpt.shop" rel="nofollow" title="ChatGPT-bot"><span class="link-card-box"><span class="link-title">ChatGPT-bot</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/ed/f6/VJV95APp_o.png" alt="icon-default.png?t=N7T8">https://supergpt.shop</span></span></a> </p> 
<p></p> 
<p><img alt="" height="1018" src="https://images2.imgbox.com/34/86/6vj5rt2G_o.png" width="1200"></p> 
<p> <img alt="" height="1032" src="https://images2.imgbox.com/14/74/Yl8hk5v9_o.png" width="1200"></p> 
<h2></h2> 
<h2 id="3.html%E6%BA%90%E7%A0%81"><a class="link-info has-card" href="https://chatpro.icu" rel="nofollow" title="ChatGPT-4"><span class="link-card-box"><span class="link-title">ChatGPT-4</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/d9/c8/DLPsYieR_o.png" alt="icon-default.png?t=N7T8">https://chatpro.icu</span></span></a></h2> 
<p></p> 
<p><img alt="" height="933" src="https://images2.imgbox.com/b6/1d/koIaS7AJ_o.png" width="1200"></p> 
<p><img alt="" height="982" src="https://images2.imgbox.com/9f/6c/s8MVoVf0_o.png" width="1200"></p> 
<p>无限制使用gemini模型：</p> 
<p><a class="link-info has-card" href="http://ccfgpt.cn" rel="nofollow" title="Gemini Pro"><span class="link-card-box"><span class="link-title">Gemini Pro</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/4d/be/EonvN6of_o.png" alt="icon-default.png?t=N7T8">http://ccfgpt.cn</span></span></a></p> 
<p></p> 
<p><img alt="" height="894" src="https://images2.imgbox.com/89/96/fZaIRqNr_o.png" width="1200"></p> 
<p></p> 
<h2>3.html前端源码</h2> 
<p>最后html前端的基本模板如下，可以添加自己需要的样式和风格：</p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;GPT-3.5&lt;/title&gt;
    &lt;style&gt;
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="container"&gt;
&lt;h1&gt;GPT-3.5&lt;/h1&gt;
&lt;div&gt;
&lt;label class="conversation-label"&gt;系统角色：&lt;/label&gt;&lt;br&gt;
&lt;input type="text" id="system-message" class="input-box" placeholder="输入gpt的预设角色"&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;label class="conversation-label"&gt;用户输入框：&lt;/label&gt;&lt;br&gt;
&lt;textarea id="user-input" class="input-box" placeholder="2023.11.08已更流式快速响应，快来体验吧！！！   "&gt;&lt;/textarea&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;label class="conversation-label"&gt;选择GPT模型（5种）：&lt;/label&gt;&lt;br&gt;
&lt;select id="model-select" class="input-box"&gt;
{% for key, value in models.items() %}
&lt;option value="{<!-- -->{ key }}"&gt;{<!-- -->{ value }}&lt;/option&gt;
{% endfor %}
&lt;/select&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;label class="conversation-label"&gt;温度（Temperature）：&lt;/label&gt;&lt;br&gt;
&lt;input type="float" id="temperature" class="input-box" placeholder="范围&gt;=0，接近0倾向连贯性，越大倾向多样性，建议0-1"&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;label class="conversation-label"&gt;最大令牌数（Max-Tokens）：&lt;/label&gt;&lt;br&gt;
&lt;input type="int" id="max-tokens" class="input-box" placeholder="最大范围4000/16000，默认模型最大不超过4000，代表对话总字数"&gt;
&lt;/div&gt;
&lt;div&gt;
  &lt;div class="checkbox-container"&gt;
    &lt;label for="continuous-chat" class="conversation-label"&gt;开启连续对话：&lt;/label&gt;
    &lt;input type="checkbox" id="continuous-chat"&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;label class="response-label"&gt;对话消息记录框：&lt;/label&gt;&lt;br&gt;
&lt;!-- 修改逐个字显示的文本框 --&gt;
&lt;div id="response-text" class="response-box"&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;br&gt;
&lt;div class="button-container"&gt;
&lt;button id="send-button" class="button"&gt;发送&lt;/button&gt;
&lt;button id="clear-button" class="button clear-button"&gt;清空&lt;/button&gt;
&lt;/div&gt;
&lt;!-- 嵌入base64编码的音频数据 --&gt;
&lt;audio id="notification-audio" preload="auto"&gt;
&lt;source src="data:audio/mp3;base64,base64编码" type="audio/mp3" /&gt;
&lt;/audio&gt;
&lt;/div&gt;
&lt;div class="author-info"&gt;BY-中北锋哥-2023.12.08&lt;/div&gt;
&lt;script&gt;
  document.addEventListener("DOMContentLoaded", function(event) {
    // 设置默认值
    document.getElementById("system-message").value = "You are a helpful assistant.";
    document.getElementById("temperature").value = "0.5";
    document.getElementById("max-tokens").value = "3600";
  });

  document.getElementById("send-button").addEventListener("click", function () {
    // 获取用户输入和选定的模型
    var user_input = document.getElementById("user-input").value;
    var selected_model = document.getElementById("model-select").value;
    var system_message = document.getElementById("system-message").value;
    var temperature = parseFloat(document.getElementById("temperature").value);
    var max_tokens = parseInt(document.getElementById("max-tokens").value);
    var continuous_chat = document.getElementById("continuous-chat").checked; // 获取连续对话复选框状态

    // 检查用户输入是否为空
    if (user_input === "") {
      alert("请输入有效的消息内容。");
      return; // 不发送请求
    }

    // 发送请求到服务器
    fetch("/get_response", {
      method: "POST",
      body: JSON.stringify({
        user_input: user_input,
        selected_model: selected_model,
        system_message: system_message,
        temperature: temperature,
        max_tokens: max_tokens,
        continuous_chat: continuous_chat
      }),
      headers: {
        "Content-Type": "application/json" // 更新 Content-Type
      }
    })
    .then(response =&gt; response.body.getReader()) // 获取可读流
    .then(reader =&gt; {
      // 获取要逐个字显示的文本框
      var responseTextElement = document.getElementById("response-text");

      // 创建一个包含用户消息的新对话条目
      var userMessage = document.createElement("div");
      userMessage.className = "user-message";
      userMessage.textContent = "用户：" + user_input;
      responseTextElement.appendChild(userMessage);

      // 创建一个包含GPT回复的新对话条目
      var gptResponse = document.createElement("div");
      gptResponse.className = "gpt-response";
      gptResponse.textContent = "GPT3.5: ";
      responseTextElement.appendChild(gptResponse);

      // 逐个字逐个字地将GPT回复添加到对话框中
      const decoder = new TextDecoder();
      reader.read().then(function processText({ done, value }) {
        if (done) {
          return;
        }
        gptResponse.textContent += decoder.decode(value);
        responseTextElement.scrollTop = responseTextElement.scrollHeight; // 滚动到底部
        reader.read().then(processText);
      });

      // 清空用户输入框
      document.getElementById("user-input").value = "";
    })
    .catch(error =&gt; {
      console.error(error);
      // 如果发生错误，弹出错误提示框
      alert("发生错误：" + error.message);
    });
  });
//清除tokens
 document.addEventListener("DOMContentLoaded", function () {
  const clearButton = document.getElementById("clear-button");

  clearButton.addEventListener("click", function () {
    // 向服务器发送清除请求
    fetch("/clear_history", {
      method: "POST",
    })
      .then((response) =&gt; response.json())
      .then((data) =&gt; {
// 清空用户输入和逐个字显示的文本框
            document.getElementById("user-input").value = "";
            document.getElementById("response-text").innerHTML = "";
      })
      .catch((error) =&gt; {
        console.error("清除请求失败: ", error);
      });
  });
});

 
&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>感谢各位朋友阅读，下期再见！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e0a40d3dfafba83c581bcf09405323ad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">重新认识Word——自动目录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/063b17fa0623c9ff9e051f801bab0d91/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据结构(五)——初识线性表</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>