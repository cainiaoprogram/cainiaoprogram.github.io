<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>iBatis resultMap报错　nullValue完美解决 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="iBatis resultMap报错　nullValue完美解决" />
<meta property="og:description" content="错误信息：
SQLErrorCodesFactory - Database product name cached for DataSource [org.apache.commons.dbcp.BasicDataSource@19c5048]: name is &#39;MySQL&#39;
SQLErrorCodesFactory - SQL error codes for &#39;MySQL&#39; found
SQLErrorCodeSQLExceptionTranslator - Unable to translate SQLException with Error code &#39;0&#39;, will now try the fallback translator
DataSourceUtils - Returning JDBC Connection to DataSource
Exception in thread &#34;main&#34; org.springframework.jdbc.UncategorizedSQLException: SqlMapClient operation; uncategorized SQLException for SQL []; SQL state [null]; error code [0]; --- The error occurred in net/jbbs/dao/ibatis/map/user.xml. --- The error occurred while applying a result map." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e7a0928b5d078b3de69ee6b66db985c5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-03-31T13:34:00+08:00" />
<meta property="article:modified_time" content="2009-03-31T13:34:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">iBatis resultMap报错　nullValue完美解决</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>错误信息：</p> 
<p><span style="color: #ff0000;">SQLErrorCodesFactory - Database product name cached for DataSource [org.apache.commons.dbcp.BasicDataSource@19c5048]: name is 'MySQL'<br>SQLErrorCodesFactory - SQL error codes for 'MySQL' found<br>SQLErrorCodeSQLExceptionTranslator - Unable to translate SQLException with Error code '0', will now try the fallback translator<br>DataSourceUtils - Returning JDBC Connection to DataSource<br>Exception in thread "main" org.springframework.jdbc.UncategorizedSQLException: SqlMapClient operation; uncategorized SQLException for SQL []; SQL state [null]; error code [0];   <br>--- The error occurred in net/jbbs/dao/ibatis/map/user.xml. <br>--- The error occurred while applying a result map. <br>--- Check the user.userResult. <br>--- The error happened while setting a property on the result object. <br>--- Cause: net.sf.cglib.beans.BulkBeanException; nested exception is com.ibatis.common.jdbc.exception.NestedSQLException:   <br>--- The error occurred in net/jbbs/dao/ibatis/map/user.xml. <br>--- The error occurred while applying a result map. <br>--- Check the user.userResult. <br>--- The error happened while setting a property on the result object. <br>--- Cause: net.sf.cglib.beans.BulkBeanException<br>Caused by: com.ibatis.common.jdbc.exception.NestedSQLException:   <br>--- The error occurred in net/jbbs/dao/ibatis/map/user.xml. <br>--- The error occurred while applying a result map. <br>--- Check the user.userResult. <br>--- The error happened while setting a property on the result object. <br>--- Cause: net.sf.cglib.beans.BulkBeanException<br>at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryWithCallback(GeneralStatement.java:188)<br>at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryForObject(GeneralStatement.java:104)<br>at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForObject(SqlMapExecutorDelegate.java:566)<br>at com.ibatis.sqlmap.engine.impl.SqlMapExecutorDelegate.queryForObject(SqlMapExecutorDelegate.java:541)<br>at com.ibatis.sqlmap.engine.impl.SqlMapSessionImpl.queryForObject(SqlMapSessionImpl.java:106)<br>at org.springframework.orm.ibatis.SqlMapClientTemplate$1.doInSqlMapClient(SqlMapClientTemplate.java:243)<br>at org.springframework.orm.ibatis.SqlMapClientTemplate.execute(SqlMapClientTemplate.java:193)<br>at org.springframework.orm.ibatis.SqlMapClientTemplate.queryForObject(SqlMapClientTemplate.java:241)<br>at net.jbbs.dao.ibatis.UserDAOImpl.findByEmail(UserDAOImpl.java:54)<br>at net.jbbs.test.UserTest.findByEmail(UserTest.java:42)<br>at net.jbbs.test.UserTest.main(UserTest.java:34)<br>Caused by: net.sf.cglib.beans.BulkBeanException<br>at net.jbbs.domain.User$$BulkBeanByCGLIB$$88b6b34d.setPropertyValues(&lt;generated&gt;)<br>at com.ibatis.sqlmap.engine.accessplan.EnhancedPropertyAccessPlan.setProperties(EnhancedPropertyAccessPlan.java:33)<br>at com.ibatis.sqlmap.engine.exchange.JavaBeanDataExchange.setData(JavaBeanDataExchange.java:112)<br>at com.ibatis.sqlmap.engine.mapping.result.BasicResultMap.setResultObjectValues(BasicResultMap.java:373)<br>at com.ibatis.sqlmap.engine.mapping.statement.RowHandlerCallback.handleResultObject(RowHandlerCallback.java:64)<br>at com.ibatis.sqlmap.engine.execution.SqlExecutor.handleResults(SqlExecutor.java:382)<br>at com.ibatis.sqlmap.engine.execution.SqlExecutor.handleMultipleResults(SqlExecutor.java:301)<br>at com.ibatis.sqlmap.engine.execution.SqlExecutor.executeQuery(SqlExecutor.java:190)<br>at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.sqlExecuteQuery(GeneralStatement.java:205)<br>at com.ibatis.sqlmap.engine.mapping.statement.GeneralStatement.executeQueryWithCallback(GeneralStatement.java:173)<br>... 10 more</span></p> 
<p>这个错误指出resultMap里有问题。说错误发生在设置某一个属性的时候，但是没有具体说明是一个怎么样的错误&lt;NULL错误&gt;。由于对于iBatis了解还不是很深，所以一时不知如何事好。只有在resultMap里面作文章，把里面的&lt;result&gt;注释掉一些，哈哈，程序居然正常跑起来了。看来我快要找到错误了，接着继续排除其它的&lt;result&gt;，终于让我找到出错的一行&lt;result&gt;了：<span style="color: #808080;">  &lt;result column="ORDER_NUM" property="orderNum" jdbcType="long" /&gt;</span><span style="color: #800000;">&lt;!--</span><br>　　接下来得弄清楚是一个什么样的错误，怎么去修复它。查找数据库表，发现"<span style="color: #808080;">orderNum</span>"这一列是nullable,并且没有为它设置默认值。所以表里面<span style="color: #808080;">orderNum</span>这一列有许多都为NULL。我大概明白了，肯定是iBatis试图把从数据库读出来的NULL 值写入对象属性的时候出现异常。采取的补救措施就是：<br><span style="color: #339966;"><span style="color: #808080;">  &lt;result column="ORDER_NUM" property="orderNum" jdbcType="long" </span> nullValue="0"/&gt;<br></span>对从数据库读出来的NULL值采用一个相应可转换为<span style="font-size: x-small; color: #808080;">orderNum</span>类型的值来替换<br><br><span style="color: #808080;">附：<br> &lt;resultMap id="pageStaticItemMap" class="PageStaticItem"&gt;<br>  &lt;result column="ITEMID" property="itemId" jdbcType="long"/&gt;<br>  &lt;result column="ITEMNAME" property="itemName" jdbcType="String"/&gt;<br>  &lt;result column="SERVERID" property="serverId" jdbcType="long"/&gt;<br>  &lt;result column="SOURCE" property="source" jdbcType="String"/&gt;  <br>  &lt;result column="TARGET_PATH" property="targetPath" jdbcType="String"/&gt;<br>  &lt;result column="TARGET_FILE" property="targetFile" jdbcType="String"/&gt;<br>  &lt;result column="LOCAL_PATH" property="localPath" jdbcType="String"/&gt;<br>  &lt;result column="FTP_PATH" property="ftpPath" jdbcType="String"/&gt;<br>  &lt;result column="ITEMTYPE" property="itemType" jdbcType="String"/&gt;  <br>  &lt;result column="EXT1" property="ext1" jdbcType="String"/&gt;<br>  &lt;result column="EXT2" property="ext2" jdbcType="String"/&gt;<br>  &lt;result column="EXT3" property="ext3" jdbcType="String"/&gt;<br>  &lt;result column="EXT4" property="ext4" jdbcType="String"/&gt;<br>  &lt;result column="ORDER_NUM" property="orderNum" jdbcType="long" /&gt;<span style="color: #800000;">&lt;!--这一行加一个nullValue="0"就OK了--&gt;</span><br>  &lt;result column="ITEM_TYPE" property="item_Type" jdbcType="String"/&gt;<br>  &lt;result column="SERVER_PROPERTIES" property="serverProperties" jdbcType="String"/&gt;<br>  &lt;result column="GET_SQL" property="getSql" jdbcType="String"/&gt; <br> &lt;/resultMap&gt;</span></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0a9824294bdff4e115d0db93264572da/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HTTP中的301重定向和302暂重定向重定</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e728159da9aaa4fbfeb05f95ab79567d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">什么是幂等操作(http,xcap)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>