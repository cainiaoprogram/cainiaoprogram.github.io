<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>5G NR协议栈 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="5G NR协议栈" />
<meta property="og:description" content="一、无线协议栈 NR无线协议栈分为两个平面：用户面和控制面。用户面(User Plane, UP)协议栈即用户数据传输采用的协议簇，控制面(Control Plane, CP)协议栈即系统的控制信令传输采用的协议簇。5G NR(New Radio，新空口)，基于OFDM(正交频分复用)的全新空口设计的全球性5G标准，也是下一代非常重要的蜂窝移动技术基础，5G技术将实现超低时延、高可靠性。 1.1 用户面
NR用户平面相比LTE协议栈多了一层SDAP层，用户面协议从上到下依次是：
SDAP层：Service Data Adaptation ProtocolPDCP层：Packet Data Convergence ProtocolRLC层：Radio Link ControlMAC层：Medium Access ControlPHY层：Physical 1.2 控制面
NR控制面协议几乎与LTE协议栈一模一样，从上到下依次为：
NAS层：Non-Access StratumRRC层：Radio Resource ControlPDCP层：Packet Data Convergence ProtocolRLC层：Radio Link ControlMAC层：Medium Access ControlPHY层：Physical UE所有的协议栈都位于UE内。在网络侧，NAS层不位于基站gNB上，而是在核心网的AMF (Access and Mobility Management
Function)实体上。控制面协议栈不包含SDAP层。 二、层2功能介绍 NR层2包含SDAP、PDCP、RLC和MAC层。
2.1 MAC层
1、服务和功能
逻辑信道与传输信道之间的映射。复用、解复用。将来自一个或多个逻辑信道的MAC SDU复用到一个传输块并传递给PHY，将从物理层传来的传输块解复用成多个MAC SDU并传递给一个或多个逻辑信道报告调度信息。通过HARQ进行错误纠正。在载波聚合中，每个载波对应一个HARQ实体通过动态调度管理用户间的优先级。逻辑信道优先级管理。填充。 2、逻辑信道
逻辑信道根据传输信息的类型来区分。逻辑信道主要分为两类：控制信道和业务信道。
控制信道用于传输控制平面的信息，包含以下逻辑信道：
Broadcast Control Channel (BCCH)：用于广播系统控制信息的下行信道Paging Control Channel (PCCH)：用于转发寻呼消息和系统信息变更的下行信道Common Control Channel (CCCH)：当UE与网络没有建立RRC Connection时，UE与网络间传输控制信息的信道Dedicated Control Channel (DCCH)：当UE与网络已经建立RRC Connection时，UE与网络间传输控制信息的一对一信道 业务信道用于传输用户平面的信息，包含以下逻辑信道：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/adbbd73bb201c4524857570c0c6b541f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-23T10:17:19+08:00" />
<meta property="article:modified_time" content="2020-04-23T10:17:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">5G NR协议栈</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>一、无线协议栈</h3> 
<ul><li>NR无线协议栈分为两个平面：用户面和控制面。用户面(User Plane, UP)协议栈即用户数据传输采用的协议簇，控制面(Control Plane, CP)协议栈即系统的控制信令传输采用的协议簇。</li><li>5G NR(New Radio，新空口)，基于OFDM(正交频分复用)的全新空口设计的全球性5G标准，也是下一代非常重要的蜂窝移动技术基础，5G技术将实现超低时延、高可靠性。</li></ul> 
<p><strong>1.1 用户面</strong></p> 
<p>NR用户平面相比LTE协议栈多了一层SDAP层，用户面协议从上到下依次是：</p> 
<ul><li>SDAP层：Service Data Adaptation Protocol</li><li>PDCP层：Packet Data Convergence Protocol</li><li>RLC层：Radio Link Control</li><li>MAC层：Medium Access Control</li><li>PHY层：Physical</li></ul> 
<p><img src="https://images2.imgbox.com/ec/08/uMQHkoDL_o.png" alt="在这里插入图片描述"></p> 
<p><strong>1.2 控制面</strong></p> 
<p>NR控制面协议几乎与LTE协议栈一模一样，从上到下依次为：</p> 
<ul><li>NAS层：Non-Access Stratum</li><li>RRC层：Radio Resource Control</li><li>PDCP层：Packet Data Convergence Protocol</li><li>RLC层：Radio Link Control</li><li>MAC层：Medium Access Control</li><li>PHY层：Physical</li></ul> 
<p><img src="https://images2.imgbox.com/52/4a/yNPZ8Ptk_o.png" alt="在这里插入图片描述"></p> 
<ul><li>UE所有的协议栈都位于UE内。</li><li>在网络侧，NAS层不位于基站gNB上，而是在核心网的AMF (Access and Mobility Management<br> Function)实体上。</li><li>控制面协议栈不包含SDAP层。</li></ul> 
<h3><a id="2_35"></a>二、层2功能介绍</h3> 
<p>NR层2包含SDAP、PDCP、RLC和MAC层。</p> 
<p><img src="https://images2.imgbox.com/05/3d/O3CCRjmX_o.png" alt="在这里插入图片描述"></p> 
<p><strong>2.1 MAC层</strong></p> 
<p>1、服务和功能</p> 
<ul><li>逻辑信道与传输信道之间的映射。</li><li>复用、解复用。将来自一个或多个逻辑信道的MAC SDU复用到一个传输块并传递给PHY，将从物理层传来的传输块解复用成多个MAC SDU并传递给一个或多个逻辑信道</li><li>报告调度信息。</li><li>通过HARQ进行错误纠正。在载波聚合中，每个载波对应一个HARQ实体</li><li>通过动态调度管理用户间的优先级。</li><li>逻辑信道优先级管理。</li><li>填充。</li></ul> 
<p>2、逻辑信道</p> 
<p>逻辑信道根据传输信息的类型来区分。逻辑信道主要分为两类：控制信道和业务信道。</p> 
<p>控制信道用于传输控制平面的信息，包含以下逻辑信道：</p> 
<ul><li>Broadcast Control Channel (BCCH)：用于广播系统控制信息的下行信道</li><li>Paging Control Channel (PCCH)：用于转发寻呼消息和系统信息变更的下行信道</li><li>Common Control Channel (CCCH)：当UE与网络没有建立RRC Connection时，UE与网络间传输控制信息的信道</li><li>Dedicated Control Channel (DCCH)：当UE与网络已经建立RRC Connection时，UE与网络间传输控制信息的一对一信道</li></ul> 
<p>业务信道用于传输用户平面的信息，包含以下逻辑信道：</p> 
<ul><li>DedicatedTraffic Channel (DTCH)：一对一信道，指向一个UE，传输UE的业务数据，在上下行中都存在</li></ul> 
<p>3、逻辑信道、传输信道与物理信道映射</p> 
<p>逻辑信道按照传输信息类型区分，所以不存在上下行。</p> 
<p><img src="https://images2.imgbox.com/f0/45/U3G3antz_o.png" alt="在这里插入图片描述"></p> 
<p>4、HARQ保证物理层对等实体间传输的准确性。当没有空分复用时，一个HARQ进程处理一个传输块，当配置空分复用时，一个HARQ进程可以处理一个或多个传输块。</p> 
<p><strong>2.2 RLC层</strong></p> 
<p>1、传输模式</p> 
<p>与LTE系统一样，NR RLC也包含三种传输模式：</p> 
<ul><li>TransparentMode （TM）</li><li>UnacknowledgedMode (UM)</li><li>AcknowledgedMode (AM)</li></ul> 
<p>每个逻辑信道对应一种RLC配置，RLC配置和ARQ都不依赖于物理层子载波间隔、CP类型和TTI长度等。</p> 
<ul><li>SRB0承载、寻呼和系统信息广播采用TM传输模式</li><li>其他SRB承载采用AM传输模式</li><li>DRB承载可以采用AM或UM模式</li></ul> 
<p>2、服务和功能</p> 
<ul><li>传输上层的PDU</li><li>编号（与PDCP层编码独立）（UM与AM模式）</li><li>通过ARQ纠错（AM模式）</li><li>对RLC SDU进行分割（UM与AM模式）和重分割（AM模式重传时）</li><li>重组RLC SDU（UM与AM模式）</li><li>重复检测（根据编号进行，AM模式）</li><li>RLC SDU丢弃（UM与AM模式）</li><li>RLC层重建</li><li>协议错误检测（AM模式）</li></ul> 
<p>3、ARQ(Automatic Repeat-reQuest)</p> 
<ul><li>RLC根据RLC Status Report重传RLC PDU或者RLC PDU的分段</li><li>可以根据需要请求RLC Status Report</li><li>RLC接收侧也能发起RLC Status Report请求</li></ul> 
<p><strong>2.3 PDCP层</strong></p> 
<p>1、用户面服务和功能</p> 
<ul><li>编号</li><li>头压缩和解压缩（ROHC算法）</li><li>传输用户数据</li><li>重排序和重复检测</li><li>PDCP PDU路由（当存在Bear Split时）</li><li>PDCP SDU重传</li><li>加密、解密和完整性保护</li><li>PDCP SDU丢弃</li><li>PDCP重建、为RLC AM恢复数据</li><li>PDCP PDU复制</li></ul> 
<p>2、控制面功能</p> 
<ul><li>编号</li><li>加密、解密和完整性保护</li><li>传输控制面数据</li><li>重排序和重复检测</li><li>PDCP PDU复制</li></ul> 
<p><strong>2.4 SDAP层</strong></p> 
<p>每个PDU Session对应一个SDAP实体：</p> 
<ul><li>QoS(Quality of Service)流与无线承载之间的映射</li><li>在上下行数据包中标识QoS flow ID (QFI)</li></ul> 
<h3><a id="_140"></a>三、小结</h3> 
<p>从无线协议栈来看，NR控制面协议栈与LTE控制面协议栈一致，而NR用户面协议栈相比LTE用户面协议栈在PDCP层之上多了一个SDAP层，SDAP层主要用于QoS流与无线承载之间的映射。</p> 
<p><img src="https://images2.imgbox.com/bb/a6/qXgnqWl1_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/edf1839bb8280bc809438b7c54a1e471/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">冒泡排序之改进版——C与C&#43;&#43;实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/22e23d0b2ec5eecb203d77b4eda56f1c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">创建临时文件夹</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>