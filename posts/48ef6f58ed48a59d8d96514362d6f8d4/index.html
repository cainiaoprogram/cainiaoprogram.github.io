<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Quartz使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Quartz使用" />
<meta property="og:description" content="简单的任务管理类 import java.text.ParseException;
import org.quartz.CronTrigger;
import org.quartz.Job;
import org.quartz.JobDetail;
import org.quartz.Scheduler;
import org.quartz.SchedulerException;
import org.quartz.SchedulerFactory;
import org.quartz.Trigger;
import org.quartz.impl.StdSchedulerFactory;
/** *//**
* @Title:Quartz管理类
* * @Description:
* * @Copyright: * @author zz 2008-10-8 14:19:01
* @version 1.00.000
*
*/
public class QuartzManager {
private static SchedulerFactory sf = new StdSchedulerFactory();
private static String JOB_GROUP_NAME = &#34;group1&#34;;
private static String TRIGGER_GROUP_NAME = &#34;trigger1&#34;;
/** *//**
* 添加一个定时任务，使用默认的任务组名，触发器名，触发器组名
* @param jobName 任务名" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/48ef6f58ed48a59d8d96514362d6f8d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2010-03-28T19:55:40+08:00" />
<meta property="article:modified_time" content="2010-03-28T19:55:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Quartz使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    简单的任务管理类 
<br> 
<pre><code class="language-java"><br>import java.text.ParseException;<br>import org.quartz.CronTrigger;<br>import org.quartz.Job;<br>import org.quartz.JobDetail;<br>import org.quartz.Scheduler;<br>import org.quartz.SchedulerException;<br>import org.quartz.SchedulerFactory;<br>import org.quartz.Trigger;<br>import org.quartz.impl.StdSchedulerFactory;<br><br>/** *//**<br> * @Title:Quartz管理类<br> * <br> * @Description:<br> * <br> * @Copyright: <br> * @author zz  2008-10-8 14:19:01<br> * @version 1.00.000<br> *<br> */<br>public class QuartzManager {<!-- --><br>   private static SchedulerFactory sf = new StdSchedulerFactory();<br>   private static String JOB_GROUP_NAME = "group1";<br>   private static String TRIGGER_GROUP_NAME = "trigger1";<br><br><br>   /** *//**<br>    *  添加一个定时任务，使用默认的任务组名，触发器名，触发器组名<br>    * @param jobName 任务名<br>    * @param job     任务<br>    * @param time    时间设置，参考quartz说明文档<br>    * @throws SchedulerException<br>    * @throws ParseException<br>    */<br>   public static void addJob(String jobName,Job job,String time) <br>                               throws SchedulerException, ParseException{<!-- --><br>       Scheduler sched = sf.getScheduler();<br>       JobDetail jobDetail = new JobDetail(jobName, JOB_GROUP_NAME, job.getClass());//任务名，任务组，任务执行类<br>       //触发器<br>       CronTrigger  trigger = <br>            new CronTrigger(jobName, TRIGGER_GROUP_NAME);//触发器名,触发器组<br>       trigger.setCronExpression(time);//触发器时间设定<br>       sched.scheduleJob(jobDetail,trigger);<br>       //启动<br>       if(!sched.isShutdown())<br>          sched.start();<br>   }<br><br>   /** *//**<br>    * 添加一个定时任务<br>    * @param jobName 任务名<br>    * @param jobGroupName 任务组名<br>    * @param triggerName  触发器名<br>    * @param triggerGroupName 触发器组名<br>    * @param job     任务<br>    * @param time    时间设置，参考quartz说明文档<br>    * @throws SchedulerException<br>    * @throws ParseException<br>    */<br>   public static void addJob(String jobName,String jobGroupName,<br>                             String triggerName,String triggerGroupName,<br>                             Job job,String time) <br>                               throws SchedulerException, ParseException{<!-- --><br>       Scheduler sched = sf.getScheduler();<br>       JobDetail jobDetail = new JobDetail(jobName, jobGroupName, job.getClass());//任务名，任务组，任务执行类<br>       //触发器<br>       CronTrigger  trigger = <br>            new CronTrigger(triggerName, triggerGroupName);//触发器名,触发器组<br>       trigger.setCronExpression(time);//触发器时间设定<br>       sched.scheduleJob(jobDetail,trigger);<br>       if(!sched.isShutdown())<br>          sched.start();<br>   }<br><br>   /** *//**<br>    * 修改一个任务的触发时间(使用默认的任务组名，触发器名，触发器组名)<br>    * @param jobName<br>    * @param time<br>    * @throws SchedulerException<br>    * @throws ParseException<br>    */<br>   public static void modifyJobTime(String jobName,String time) <br>                                  throws SchedulerException, ParseException{<!-- --><br>       Scheduler sched = sf.getScheduler();<br>       Trigger trigger =  sched.getTrigger(jobName,TRIGGER_GROUP_NAME);<br>       if(trigger != null){<!-- --><br>           CronTrigger  ct = (CronTrigger)trigger;<br>           ct.setCronExpression(time);<br>           sched.resumeTrigger(jobName,TRIGGER_GROUP_NAME);<br>       }<br>   }<br><br>   /** *//**<br>    * 修改一个任务的触发时间<br>    * @param triggerName<br>    * @param triggerGroupName<br>    * @param time<br>    * @throws SchedulerException<br>    * @throws ParseException<br>    */<br>   public static void modifyJobTime(String triggerName,String triggerGroupName,<br>                                    String time) <br>                                  throws SchedulerException, ParseException{<!-- --><br>       Scheduler sched = sf.getScheduler();<br>       Trigger trigger =  sched.getTrigger(triggerName,triggerGroupName);<br>       if(trigger != null){<!-- --><br>           CronTrigger  ct = (CronTrigger)trigger;<br>           //修改时间<br>           ct.setCronExpression(time);<br>           //重启触发器<br>           sched.resumeTrigger(triggerName,triggerGroupName);<br>       }<br>   }<br><br>   /** *//**<br>    * 移除一个任务(使用默认的任务组名，触发器名，触发器组名)<br>    * @param jobName<br>    * @throws SchedulerException<br>    */<br>   public static void removeJob(String jobName) <br>                               throws SchedulerException{<!-- --><br>       Scheduler sched = sf.getScheduler();<br>       sched.pauseTrigger(jobName,TRIGGER_GROUP_NAME);//停止触发器<br>       sched.unscheduleJob(jobName,TRIGGER_GROUP_NAME);//移除触发器<br>       sched.deleteJob(jobName,JOB_GROUP_NAME);//删除任务<br>   }<br><br>   /** *//**<br>    * 移除一个任务<br>    * @param jobName<br>    * @param jobGroupName<br>    * @param triggerName<br>    * @param triggerGroupName<br>    * @throws SchedulerException<br>    */<br>   public static void removeJob(String jobName,String jobGroupName,<br>                                String triggerName,String triggerGroupName) <br>                               throws SchedulerException{<!-- --><br>       Scheduler sched = sf.getScheduler();<br>       sched.pauseTrigger(triggerName,triggerGroupName);//停止触发器<br>       sched.unscheduleJob(triggerName,triggerGroupName);//移除触发器<br>       sched.deleteJob(jobName,jobGroupName);//删除任务<br>   }<br>}<br></code></pre> 
<br> 
<br>测试工作类 
<br> 
<pre><code class="language-java"><br> import org.quartz.Job;<br>import org.quartz.JobExecutionContext;<br>import org.quartz.JobExecutionException;<br><br>public class TestJob implements Job {<!-- --><br><br>    public void execute(JobExecutionContext arg0) throws JobExecutionException {<!-- --><br>        // TODO Auto-generated method stub<br>        System.out.println("★★★★★★★★★★★");<br>    }<br><br>}<br><br></code></pre> 
<br> 
<br>测试类 
<br> 
<pre><code class="language-java"><br>public class QuartzTest {<!-- --><br><br>    /** *//**<br>     * @param args<br>     */<br>    public static void main(String[] args) {<!-- --><br>        // TODO Auto-generated method stub<br>        TestJob job = new TestJob();<br>        String job_name ="11";<br>        try {<!-- --><br>            System.out.println("【系统启动】");<br>            QuartzManager.addJob(job_name,job,"0/5 * * * * ?");<br><br>            Thread.sleep(10000);<br>            System.out.println("【修改时间】");<br>            QuartzManager.modifyJobTime(job_name,"0/10 * * * * ?");<br>            Thread.sleep(20000);<br>            System.out.println("【移除定时】");<br>            QuartzManager.removeJob(job_name);<br>            Thread.sleep(10000);<br><br>            System.out.println("\n【添加定时任务】");<br>            QuartzManager.addJob(job_name,job,"0/5 * * * * ?");<br><br>        }  catch (Exception e) {<!-- --><br>            e.printStackTrace();<br>        }<br>    }<br>}<br></code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/13c134a28cf13ede5eff265abf7ff035/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">获取数据库表中所有字段名称</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/957be1ce80bf8995b764dd65813f2f23/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IBM X366服务器维修(实战供友借鉴)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>