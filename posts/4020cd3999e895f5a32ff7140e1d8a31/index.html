<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python ddddocr实现验证码签到、登录、点击、按顺序点击，通过验证码识别 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python ddddocr实现验证码签到、登录、点击、按顺序点击，通过验证码识别" />
<meta property="og:description" content="先上代码
import ddddocr import cv2 # ↓这行代码是本地库,可以不写,但需要引入其他库 from lib.init import * # 去掉上面的代码,改成引入os,time,pyautogui # 然后修改下面的代码 # 尝试通过不停的试验试出来 # pyautogui检测识图,不通过重新反复识别 # 然后继续识图,直到通过为止,再进行下一步 w(5) # 等待5秒 def yz(): screenshot(&#39;test.jpg&#39;,region=(721, 358, 460, 459)) # 在屏幕的721,358(左上)截图,长宽为460,459(到右下) # 截图的范围在721,358到1181,817 det = ddddocr.DdddOcr(det=True) with open(&#34;test.jpg&#34;, &#39;rb&#39;) as f: image = f.read() # 把截图的图片识别 poses = det.detection(image) print(poses) # 打印识别出来的位置 im = cv2.imread(&#34;test.jpg&#34;) for box in poses: x1, y1, x2, y2 = box im = cv2.rectangle(im, (x1, y1), (x2, y2), color=(0, 0, 255), thickness=2) click(x1&#43;721&#43;20, y1&#43;358&#43;20) # 读取test." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4020cd3999e895f5a32ff7140e1d8a31/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-30T10:56:22+08:00" />
<meta property="article:modified_time" content="2022-04-30T10:56:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python ddddocr实现验证码签到、登录、点击、按顺序点击，通过验证码识别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>先上代码</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> ddddocr
<span class="token keyword">import</span> cv2
<span class="token comment"># ↓这行代码是本地库,可以不写,但需要引入其他库</span>
<span class="token keyword">from</span> lib<span class="token punctuation">.</span>init <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token comment"># 去掉上面的代码,改成引入os,time,pyautogui</span>
<span class="token comment"># 然后修改下面的代码</span>

<span class="token comment"># 尝试通过不停的试验试出来</span>
<span class="token comment"># pyautogui检测识图,不通过重新反复识别</span>
<span class="token comment"># 然后继续识图,直到通过为止,再进行下一步</span>

w<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token comment"># 等待5秒</span>

<span class="token keyword">def</span> <span class="token function">yz</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    screenshot<span class="token punctuation">(</span><span class="token string">'test.jpg'</span><span class="token punctuation">,</span>region<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">721</span><span class="token punctuation">,</span> <span class="token number">358</span><span class="token punctuation">,</span> <span class="token number">460</span><span class="token punctuation">,</span> <span class="token number">459</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 在屏幕的721,358(左上)截图,长宽为460,459(到右下)</span>
<span class="token comment"># 截图的范围在721,358到1181,817</span>

    det <span class="token operator">=</span> ddddocr<span class="token punctuation">.</span>DdddOcr<span class="token punctuation">(</span>det<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
    
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">"test.jpg"</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        image <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 把截图的图片识别</span>
    poses <span class="token operator">=</span> det<span class="token punctuation">.</span>detection<span class="token punctuation">(</span>image<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>poses<span class="token punctuation">)</span>
<span class="token comment"># 打印识别出来的位置</span>
    im <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span><span class="token string">"test.jpg"</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> box <span class="token keyword">in</span> poses<span class="token punctuation">:</span>
        x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2 <span class="token operator">=</span> box
        im <span class="token operator">=</span> cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>im<span class="token punctuation">,</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>x2<span class="token punctuation">,</span> y2<span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span> thickness<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>
        click<span class="token punctuation">(</span>x1<span class="token operator">+</span><span class="token number">721</span><span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">,</span> y1<span class="token operator">+</span><span class="token number">358</span><span class="token operator">+</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token comment"># 读取test.jpg,然后框选出汉字部分,然后挨个点击</span>
    click<span class="token punctuation">(</span>locateOnScreen<span class="token punctuation">(</span><span class="token string">r'.\img\g.png'</span><span class="token punctuation">,</span>grayscale<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span><span class="token string">"result.jpg"</span><span class="token punctuation">,</span> im<span class="token punctuation">)</span>
    remove<span class="token punctuation">(</span><span class="token string">'test.jpg'</span><span class="token punctuation">)</span>
    remove<span class="token punctuation">(</span><span class="token string">'result.jpg'</span><span class="token punctuation">)</span>
<span class="token comment"># 如果不需要保留图片,可以删除</span>
yz<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 执行上面的函数</span>
w<span class="token punctuation">(</span><span class="token number">0.3</span><span class="token punctuation">)</span>

<span class="token comment"># 这个作用就是按顺序点击的方法</span>
<span class="token comment"># sb.png就是验证码点击失败后的图片</span>
<span class="token comment"># 如果检测到验证码点击失败了,则重新执行</span>
<span class="token comment"># 直到通过为止</span>
<span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> locateOnScreen<span class="token punctuation">(</span><span class="token string">r'.\img\sb.png'</span><span class="token punctuation">,</span>grayscale<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        w<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        yz<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"完成"</span><span class="token punctuation">)</span>
<span class="token comment"># 此验证码在mcbbs.net试过,可以使用</span>
<span class="token comment"># 基本重复2-4遍就过了</span>

<span class="token comment"># 屏幕1080p,浏览器缩放级别为150%</span>
<span class="token comment"># 建议自行改一下代码</span>

</code></pre> 
<p>这里w(5)等于time.sleep(5)，给简写了</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a234644246901fb259e3aa3ada596ff0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SkeyeVSS综合安防监控录像回放控制之自定义可拖动时间轴组件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/259cd2199412aea7409c712b0fbd9c98/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OceanBase数据库的日志类型</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>