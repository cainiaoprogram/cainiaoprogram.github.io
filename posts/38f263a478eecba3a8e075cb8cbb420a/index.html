<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>探讨getchar与scanf的区别 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="探讨getchar与scanf的区别" />
<meta property="og:description" content="前言
说到scanf与getchar，想必大家都不陌生，在学习C语言的第一天起我们就开始接触它们，但我们对它们在输入方面可能有点模棱两可，分不清scanf与getchar真正有什么区别，下面就来分别探讨一下scanf与getchar在输入上的特点。
scanf在输入上的特点
当我们在运用scanf这个函数需要输入字符串或者数字时，scanf并不是直接从我们的键盘当中直接获取输入的信息，而是从缓冲区中获取信息，这个所谓的缓冲区，是我们在键盘上输入后暂时保存输入信息的地方。当对于输入的信息放在缓冲区中存在空格时，scanf函数只能获取空格前的信息(正常情况下)。这是scanf函数的弊端。
getchar在输入上的特点
在输入字符或数字时运用getchar，它只能向缓冲区中读取单个字符，能够读取的内容非常地少，因此我们在运用getchar时大多时候要利用循环来进行读取，但它并不是没有优点，它能够弥补scanf在输入上读取字符的不足。当getchar向缓冲区读取字符时，&#39;\0&#39;与&#39; &#39;它都能够读取，因此我们有时利用循环来判断ch = getchar() != EOF来读取字符。
以上的ch其实是int类型的，总是有不少人会问getchar读取的不是字符吗，为什么会用int去接收呢？仔细思考，getchar只能读取单个字符，那单个字符一定会有它的ASCII码值，那么就要用int类型的变量去接收。
举例体现scanf与getchar特点
例题：利用scanf与getchar来输入密码，输入密码后需要确认密码，选择Y则确认成功，否则确认失败。
大部分人的思路：先用scanf输入密码保存在一个数组中，再用getchar输入Y或N确认密码。(错误示范)代码如下:
#include &lt;stdio.h&gt; int main() { char password[20] = { 0 }; printf(&#34;请输入密码-&gt;:\n&#34;); scanf(&#34;%s&#34;, password); printf(&#34;请确认密码:(Y/N):\n&#34;); int ch = getchar(); if (ch == &#39;Y&#39;) { printf(&#34;确认成功\n&#34;); } else { printf(&#34;确认失败\n&#34;); } return 0; } 当我们运行时结果为：
我们可以看到，当我们输入密码后还没来得及输入Y或N运行结果就显示确认失败，其实就是缓冲区的问题，当我们输入abcdef再输入一个回车时，scanf就在缓冲区内读取了abcdef，而回车也代表一个字符&#39;\n&#39;，getchar就从缓冲区上读取了这个回车，回车不等于Y，则确认失败。正确的代码应该为：
#include &lt;stdio.h&gt; int main() { char password[20] = { 0 }; printf(&#34;请输入密码-&gt;:\n&#34;); scanf(&#34;%s&#34;, password); getchar(); printf(&#34;请确认密码:(Y/N):\n&#34;); int ch = getchar(); if (ch == &#39;Y&#39;) { printf(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/38f263a478eecba3a8e075cb8cbb420a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-02T22:16:07+08:00" />
<meta property="article:modified_time" content="2021-08-02T22:16:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">探讨getchar与scanf的区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><strong>前言</strong></p> 
</blockquote> 
<p>     说到scanf与getchar，想必大家都不陌生，在学习C语言的第一天起我们就开始接触它们，但我们对它们在输入方面可能有点模棱两可，分不清scanf与getchar真正有什么区别，下面就来分别探讨一下scanf与getchar在输入上的特点。</p> 
<blockquote> 
 <p><strong>scanf在输入上的特点</strong></p> 
</blockquote> 
<p>     当我们在运用scanf这个函数需要输入字符串或者数字时，<span style="color:#fe2c24;">scanf并不是直接从我们的键盘当中直接获取输入的信息，而是从缓冲区中获取信息，这个所谓的缓冲区，是我们在键盘上输入后暂时保存输入信息的地方。当对于输入的信息放在缓冲区中存在空格时，scanf函数只能获取空格前的信息(正常情况下)。</span><span style="color:#0d0016;">这是scanf函数的弊端。</span></p> 
<blockquote> 
 <p><strong>getchar在输入上的特点</strong></p> 
</blockquote> 
<p>     在输入字符或数字时运用getchar，<span style="color:#fe2c24;">它只能向缓冲区中读取单个字符</span>，能够读取的内容非常地少，因此我们在运用getchar时大多时候要利用循环来进行读取，但它并不是没有优点，它能够弥补scanf在输入上读取字符的不足。<span style="color:#fe2c24;">当getchar向缓冲区读取字符时，'\0'与' '它都能够读取，因此我们有时利用循环来判断ch = getchar() != EOF来读取字符。</span></p> 
<p>     以上的<span style="color:#fe2c24;">ch其实是int类型的，总是有不少人会问getchar读取的不是字符吗，为什么会用int去接收呢？</span><span style="color:#0d0016;">仔细思考，getchar只能读取单个字符，那单个字符一定会有它的ASCII码值，那么就要用int类型的变量去接收。</span></p> 
<blockquote> 
 <p><span style="color:#0d0016;">举例体现scanf与getchar特点</span></p> 
</blockquote> 
<p>       例题：利用scanf与getchar来输入密码，输入密码后需要确认密码，选择Y则确认成功，否则确认失败。</p> 
<p>       大部分人的思路：先用scanf输入密码保存在一个数组中，再用getchar输入Y或N确认密码。(错误示范)代码如下:</p> 
<pre><code>#include &lt;stdio.h&gt;
int main()
{
	char password[20] = { 0 };
	printf("请输入密码-&gt;:\n");
	scanf("%s", password);
	printf("请确认密码:(Y/N):\n");
	int ch = getchar();
	if (ch == 'Y')
	{
		printf("确认成功\n");
	}
	else
	{
		printf("确认失败\n");
	}
		return 0;
}</code></pre> 
<p>当我们运行时结果为：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4d/81/yBYXlgPs_o.png"></p> 
<p>       我们可以看到，当我们输入密码后还没来得及输入Y或N运行结果就显示确认失败，其实就是缓冲区的问题，<span style="color:#fe2c24;">当我们输入abcdef再输入一个回车时，scanf就在缓冲区内读取了abcdef，而回车也代表一个字符'\n'，getchar就从缓冲区上读取了这个回车，回车不等于Y，则确认失败。</span><span style="color:#0d0016;">正确的代码应该为：</span></p> 
<pre><code>#include &lt;stdio.h&gt;
int main()
{
	char password[20] = { 0 };
	printf("请输入密码-&gt;:\n");
	scanf("%s", password);
	getchar();
	printf("请确认密码:(Y/N):\n");
	int ch = getchar();
	if (ch == 'Y')
	{
		printf("确认成功\n");
	}
	else
	{
		printf("确认失败\n");
	}
		return 0;
}</code></pre> 
<p>运行结果为：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9c/fe/hr2dNg0w_o.png"></p> 
<p>       我们修改的地方只是在scanf的后面加了一个getchar读取走输入abcdef后的回车，此时缓冲区内没有任何字符，这时我们就能在确认密码时输入Y或N，但它仍有一定的弊端，在我们输入ab cd时问题又会出现，运行时又会在没有输入Y或N就确认失败，结果如图： </p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d9/59/n7VudcW5_o.png"></p> 
<p><span style="color:#fe2c24;">       出现bug的原因在于scanf只会在缓冲区内接收ab，空格和cd它并没有接受，当只有一个getchar时只能读取空格，这时我们应该利用循环，多次用getchar来读取字符，直到读取的是\0为止。</span>代码如下:</p> 
<pre><code>#include &lt;stdio.h&gt;
int main()
{
	char password[20] = { 0 };
	printf("请输入密码-&gt;:\n");
	scanf("%s", password);
	getchar();
	while (getchar() != '\n')
	{
		;
	}
	printf("请确认密码:(Y/N):\n");
	int ch = getchar();
	if (ch == 'Y')
	{
		printf("确认成功\n");
	}
	else
	{
		printf("确认失败\n");
	}
		return 0;
}</code></pre> 
<p>这时当我们输入ab cd就能够确认密码：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7a/c8/HjyInUId_o.png"></p> 
<p>       <span style="color:#ff9900;">看到此处我相信你一定对scanf与getchar在输入的特点上有了比较充分的理解，如果博客对您有帮助请点个赞支持作者，后续仍然会发表C语言学习的文章谢谢。</span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3003a275a8ec9b58a5fe04adc7e7552d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">绝地求生服务器维护多久,绝地求生更新维护公告最新 5月18日维护到几点</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bcecdab015bd217124b86969e3fa451d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">鸿蒙系统有推送服务器吗,鸿蒙系统已经大面积推送，是否更新，原因分三点望周知...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>