<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>laravel框架后台内容管理系统项目搭建心得分享 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="laravel框架后台内容管理系统项目搭建心得分享" />
<meta property="og:description" content="laravel框架后台内容管理系统项目搭建心得分享
前期准备 一、后台用户登录
1、创建用户表
2、显示登录页面
3、Ajax交互
4、验证用户登录
5、用户退出
二、后台首页 1、后台页面布局
2、显示后台首页
3、判断登录状态
三、栏目管理 1、创建栏目表
2、添加栏目
3、显示栏目列表
4、编辑栏目
5、删除栏目
四、内容管理
1、创建内容表
2、添加内容
3、上传图片
4、显示内容列表
5、编辑内容
6、删除内容
五、广告位管理
1、创建广告位表
2、添加广告位
3、显示、编辑、删除广告位列表
六、广告内容管理
1、创建广告内容表
2、添加、显示、编辑、删除广告
七、 总结
1、学习laravel的难点
2、学习laravel收获到了什么
3、内容管理系统项目心得总结
Larvel框架可以开发各种不同类型的项目，内容管理系统( Contet Mangement Sstem, CMS )是一种比较典型的项目，常见的网站类型(如门户、新闻、博客、文章等)都可以利用CMS进行:搭建。CMS用于对信息进行分类管理，将信息有序、及时地呈现在用户面前，满足人们发布信息、获取信息的需求，保证信息的共享更加快捷和方便。本章将讲解如何使用Laravel框架开发内容管理系统。
（1）本项目分为前台和后台。前台的功能包括用户登录与注册、内容列表、内容详细页、广告展示、评论和热门内容等。
（2）后台在未登录的状态下会自动跳转至登录页面。输入用户名“admin”、密码“123456”和验证码后，单击“登录”按钮，即可进行登录。
（3）登录后，页面顶部右侧显示了当前登录的用户名“admin”和“退出”按钮，单击“退出”按钮即可退出后台系统。
（4）后台页面的左侧有一个菜单栏，用户可以在菜单栏中选择一个菜单项进行操作。
项目中需要使用到的技术点包括文件上传、分页和会话技术。整个项目开发基于实现功能的步骤来完成，先实现后台开发，提供数据支持，再完成前台的数据展示。
前期准备 （1）在C:\web\apache2.4\htdocs\cms目录下打开终端，执行如下命令，安装Laravel。
composer create-project --prefer-dist laravel/laravel ./ 5.8.*
或下载地址：https://getcomposer.org/download/
（2）Laravel安装完成后，在Apache的conf\extra\httpd-vhosts.conf配置文件中创建一个虚拟主机。然后，编辑Windows系统的hosts文件，添加一条解析记录“lhm.com”。
（3）在本书的配套源代码包中，将内容管理系统的前台和后台的静态资源复制到项目对应的目录下。
（4）登录MySQL服务器，创建数据库cms，将cms作为内容管理系统的数据库。
（5）打开项目，在config\database.php数据库配置文件中，将数据库名称修改为lhm。
（6）在.env文件中配置正确的数据库配置信息。完成上述步骤后，即可在项目中访问数据库。
目录作用App包含了应用的核心代码，此外你为应用编写的代码绝大多数也会放到这里；Bootstrap用于框架的启动和自动载入配置；Config包含了应用所有的配置文件Database包含了数据迁移及填充文件PublicPublicResourcesresources目录包含了视图文件及原生资源文件Routes包含了应用的所有路由定义Storage存放编译后的模板、session文件、缓存文件、日志文件等；Tests自动化测试文件Vendor存放通过Composer加载的依赖 一、后台用户登录 1、创建用户表 （1）在命令行中执行如下命令创建迁移文件，具体命令如下：
php artisan make:migration create_admin_user_table （2）执行完上述命令后，会在database\migrations目录下生成文件名称为时间前缀_create_admin_user_table." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/08e9349809529041fd7d35a6b210e4f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-28T11:27:15+08:00" />
<meta property="article:modified_time" content="2023-06-28T11:27:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">laravel框架后台内容管理系统项目搭建心得分享</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>laravel框架后台内容管理系统项目搭建心得分享</strong></p> 
<p id="%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%C2%A0-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%C2%A0" rel="nofollow">前期准备 </a></p> 
<p id="%E4%B8%80%E3%80%81%E5%90%8E%E5%8F%B0%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%90%8E%E5%8F%B0%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95" rel="nofollow">一、后台用户登录</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%A1%A8-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%A1%A8" rel="nofollow">1、创建用户表</a></p> 
<p id="2.%E6%98%BE%E7%A4%BA%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2-toc" style="margin-left:40px;"><a href="#2.%E6%98%BE%E7%A4%BA%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2" rel="nofollow">2、显示登录页面</a></p> 
<p id="3%E3%80%81Ajax%E4%BA%A4%E4%BA%92-toc" style="margin-left:40px;"><a href="#3%E3%80%81Ajax%E4%BA%A4%E4%BA%92" rel="nofollow">3、Ajax交互</a></p> 
<p id="%C2%A04%E3%80%81%E9%AA%8C%E8%AF%81%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95-toc" style="margin-left:40px;"><a href="#%C2%A04%E3%80%81%E9%AA%8C%E8%AF%81%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95" rel="nofollow"> 4、验证用户登录</a></p> 
<p id="5%E3%80%81%E7%94%A8%E6%88%B7%E9%80%80%E5%87%BA-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E7%94%A8%E6%88%B7%E9%80%80%E5%87%BA" rel="nofollow">5、用户退出</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5%C2%A0" rel="nofollow">二、后台首页 </a></p> 
<p id="1%E3%80%81%E5%90%8E%E5%8F%B0%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%90%8E%E5%8F%B0%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80" rel="nofollow">1、后台页面布局</a></p> 
<p id="2%E3%80%81%E6%98%BE%E7%A4%BA%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E6%98%BE%E7%A4%BA%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5" rel="nofollow">2、显示后台首页</a></p> 
<p id="3%E3%80%81%E5%88%A4%E6%96%AD%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E5%88%A4%E6%96%AD%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81" rel="nofollow">3、判断登录状态</a></p> 
<p id="%E4%B8%89%E3%80%81%E6%A0%8F%E7%9B%AE%E7%AE%A1%E7%90%86%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E6%A0%8F%E7%9B%AE%E7%AE%A1%E7%90%86%C2%A0" rel="nofollow">三、栏目管理 </a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E6%A0%8F%E7%9B%AE%E8%A1%A8-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E6%A0%8F%E7%9B%AE%E8%A1%A8" rel="nofollow">1、创建栏目表</a></p> 
<p id="%C2%A02%E3%80%81%E6%B7%BB%E5%8A%A0%E6%A0%8F%E7%9B%AE-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E6%B7%BB%E5%8A%A0%E6%A0%8F%E7%9B%AE" rel="nofollow">2、添加栏目</a></p> 
<p id="3%E3%80%81%E6%98%BE%E7%A4%BA%E6%A0%8F%E7%9B%AE%E5%88%97%E8%A1%A8-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E6%98%BE%E7%A4%BA%E6%A0%8F%E7%9B%AE%E5%88%97%E8%A1%A8" rel="nofollow">3、显示栏目列表</a></p> 
<p id="4%E3%80%81%E7%BC%96%E8%BE%91%E6%A0%8F%E7%9B%AE-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E7%BC%96%E8%BE%91%E6%A0%8F%E7%9B%AE" rel="nofollow">4、编辑栏目</a></p> 
<p id="5%E3%80%81%E5%88%A0%E9%99%A4%E6%A0%8F%E7%9B%AE-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E5%88%A0%E9%99%A4%E6%A0%8F%E7%9B%AE" rel="nofollow">5、删除栏目</a></p> 
<p id="%C2%A0%E5%9B%9B%E3%80%81%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-toc" style="margin-left:0px;"><a href="#%C2%A0%E5%9B%9B%E3%80%81%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86" rel="nofollow"> 四、内容管理</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E5%86%85%E5%AE%B9%E8%A1%A8-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E5%86%85%E5%AE%B9%E8%A1%A8" rel="nofollow">1、创建内容表</a></p> 
<p id="2%E3%80%81%E6%B7%BB%E5%8A%A0%E5%86%85%E5%AE%B9-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E6%B7%BB%E5%8A%A0%E5%86%85%E5%AE%B9" rel="nofollow">2、添加内容</a></p> 
<p id="%C2%A03%E3%80%81%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87-toc" style="margin-left:40px;"><a href="#%C2%A03%E3%80%81%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87" rel="nofollow">3、上传图片</a></p> 
<p id="4%E3%80%81%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9%E5%88%97%E8%A1%A8-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9%E5%88%97%E8%A1%A8" rel="nofollow">4、显示内容列表</a></p> 
<p id="5%E3%80%81%E7%BC%96%E8%BE%91%E5%86%85%E5%AE%B9-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E7%BC%96%E8%BE%91%E5%86%85%E5%AE%B9" rel="nofollow">5、编辑内容</a></p> 
<p id="6%E3%80%81%E5%88%A0%E9%99%A4%E5%86%85%E5%AE%B9-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E5%88%A0%E9%99%A4%E5%86%85%E5%AE%B9" rel="nofollow">6、删除内容</a></p> 
<p id="%C2%A0%E4%BA%94%E3%80%81%E5%B9%BF%E5%91%8A%E4%BD%8D%E7%AE%A1%E7%90%86-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%BA%94%E3%80%81%E5%B9%BF%E5%91%8A%E4%BD%8D%E7%AE%A1%E7%90%86" rel="nofollow"> 五、广告位管理</a></p> 
<p id="%C2%A01%E3%80%81%E5%88%9B%E5%BB%BA%E5%B9%BF%E5%91%8A%E4%BD%8D%E8%A1%A8-toc" style="margin-left:40px;"><a href="#%C2%A01%E3%80%81%E5%88%9B%E5%BB%BA%E5%B9%BF%E5%91%8A%E4%BD%8D%E8%A1%A8" rel="nofollow"> 1、创建广告位表</a></p> 
<p id="2%E3%80%81%E6%B7%BB%E5%8A%A0%E5%B9%BF%E5%91%8A%E4%BD%8D-toc" style="margin-left:40px;"> <a href="#2%E3%80%81%E6%B7%BB%E5%8A%A0%E5%B9%BF%E5%91%8A%E4%BD%8D" rel="nofollow">2、添加广告位</a></p> 
<p style="margin-left:40px;"><a href="#%C2%A03%E3%80%81%E6%98%BE%E7%A4%BA%E3%80%81%E7%BC%96%E8%BE%91%E3%80%81%E5%88%A0%E9%99%A4%E5%B9%BF%E5%91%8A%E4%BD%8D%E5%88%97%E8%A1%A8" rel="nofollow"> 3、显示、编辑、删除广告位列表</a></p> 
<p id="%E5%85%AD%E3%80%81%E5%B9%BF%E5%91%8A%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81%E5%B9%BF%E5%91%8A%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86" rel="nofollow">六、广告内容管理</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B9%BF%E5%91%8A%E5%86%85%E5%AE%B9%E8%A1%A8-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B9%BF%E5%91%8A%E5%86%85%E5%AE%B9%E8%A1%A8" rel="nofollow">1、创建广告内容表</a></p> 
<p id="2.%E6%B7%BB%E5%8A%A0%E3%80%81%E6%98%BE%E7%A4%BA%E3%80%81%E7%BC%96%E8%BE%91%E3%80%81%E5%88%A0%E9%99%A4%E5%B9%BF%E5%91%8A-toc" style="margin-left:40px;"><a href="#2.%E6%B7%BB%E5%8A%A0%E3%80%81%E6%98%BE%E7%A4%BA%E3%80%81%E7%BC%96%E8%BE%91%E3%80%81%E5%88%A0%E9%99%A4%E5%B9%BF%E5%91%8A" rel="nofollow">2、添加、显示、编辑、删除广告</a></p> 
<p id="%E4%B8%83%E3%80%81%20%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E4%B8%83%E3%80%81%20%E6%80%BB%E7%BB%93" rel="nofollow">七、 总结</a></p> 
<p id="1%E3%80%81%E5%AD%A6%E4%B9%A0laravel%E7%9A%84%E9%9A%BE%E7%82%B9-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%AD%A6%E4%B9%A0laravel%E7%9A%84%E9%9A%BE%E7%82%B9" rel="nofollow">1、学习laravel的难点</a></p> 
<p id="2%E3%80%81%E5%AD%A6%E4%B9%A0laravel%E6%94%B6%E8%8E%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E5%AD%A6%E4%B9%A0laravel%E6%94%B6%E8%8E%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88" rel="nofollow">2、学习laravel收获到了什么</a></p> 
<p id="%C2%A03%E3%80%81%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E5%BF%83%E5%BE%97%E6%80%BB%E7%BB%93-toc" style="margin-left:40px;"><a href="#%C2%A03%E3%80%81%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E5%BF%83%E5%BE%97%E6%80%BB%E7%BB%93" rel="nofollow">3、内容管理系统项目心得总结</a></p> 
<hr id="hr-toc"> 
<p></p> 
<blockquote> 
 <p><span style="background-color:#ffd900;">Larvel框架</span>可以开发各种不同类型的项目，<span style="color:#fe2c24;">内容管理系统( Contet Mangement Sstem, CMS )</span>是一种比较典型的项目，常见的网站类型(如门户、新闻、博客、文章等)都可以利用CMS进行:搭建。CMS用于对信息进行分类管理，将信息有序、及时地呈现在用户面前，满足人们发布信息、获取信息的需求，保证信息的共享更加快捷和方便。本章将讲解如何使用Laravel框架开发内容管理系统。</p> 
</blockquote> 
<p><br> （1）本项目分为前台和后台。前台的功能包括用户登录与注册、内容列表、内容详细页、广告展示、评论和热门内容等。</p> 
<p>（2）后台在未登录的状态下会自动跳转至登录页面。输入用户名“admin”、密码“123456”和验证码后，单击“登录”按钮，即可进行登录。</p> 
<p>（3）登录后，页面顶部右侧显示了当前登录的用户名“admin”和“退出”按钮，单击“退出”按钮即可退出后台系统。</p> 
<p>（4）后台页面的左侧有一个菜单栏，用户可以在菜单栏中选择一个菜单项进行操作。</p> 
<p>项目中需要使用到的技术点包括文件上传、分页和会话技术。整个项目开发基于实现功能的步骤来完成，先实现后台开发，提供数据支持，再完成前台的数据展示。</p> 
<h2 id="%E5%89%8D%E6%9C%9F%E5%87%86%E5%A4%87%C2%A0">前期准备 </h2> 
<p>（1）在C:\web\apache2.4\htdocs\cms目录下打开终端，执行如下命令，安装Laravel。</p> 
<p><span style="color:#fe2c24;">composer create-project --prefer-dist laravel/laravel ./ 5.8.*</span></p> 
<p><span style="color:#0d0016;">或下载地址：<a class="link-info" href="https://getcomposer.org/download/" rel="nofollow" title="https://getcomposer.org/download/">https://getcomposer.org/download/</a></span></p> 
<p>（2）Laravel安装完成后，在Apache的conf\extra\httpd-vhosts.conf配置文件中创建一个虚拟主机。然后，编辑Windows系统的hosts文件，添加一条解析记录“lhm.com”。</p> 
<p>（3）在本书的配套源代码包中，将内容管理系统的前台和后台的静态资源复制到项目对应的目录下。</p> 
<p>（4）登录MySQL服务器，创建数据库cms，将cms作为内容管理系统的数据库。</p> 
<p>（5）打开项目，在config\database.php数据库配置文件中，将数据库名称修改为lhm。</p> 
<p>（6）<span style="background-color:#ffd900;">在.env文件中配置正确的数据库配置信息。完成上述步骤后，即可在项目中访问数据库。</span></p> 
<table align="center" border="1" cellpadding="1" cellspacing="1"><thead><tr><th style="width:204px;">目录</th><th style="width:594px;">作用</th></tr></thead><tbody><tr><td style="width:204px;">App</td><td style="width:594px;">包含了应用的核心代码，此外你为应用编写的代码绝大多数也会放到这里；</td></tr><tr><td style="width:204px;">Bootstrap</td><td style="width:594px;">用于框架的启动和自动载入配置；</td></tr><tr><td style="width:204px;">Config</td><td style="width:594px;">包含了应用所有的配置文件</td></tr><tr><td style="width:204px;">Database</td><td style="width:594px;">包含了数据迁移及填充文件</td></tr><tr><td style="width:204px;">Public</td><td style="width:594px;">Public</td></tr><tr><td style="width:204px;">Resources</td><td style="width:594px;">resources目录包含了视图文件及原生资源文件</td></tr><tr><td style="width:204px;">Routes</td><td style="width:594px;">包含了应用的所有路由定义</td></tr><tr><td style="width:204px;">Storage</td><td style="width:594px;">存放编译后的模板、session文件、缓存文件、日志文件等；</td></tr><tr><td style="width:204px;">Tests</td><td style="width:594px;">自动化测试文件</td></tr><tr><td style="width:204px;">Vendor</td><td style="width:594px;">存放通过Composer加载的依赖</td></tr></tbody></table> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%90%8E%E5%8F%B0%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95">一、后台用户登录</h2> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%A1%A8">1、创建用户表</h3> 
<p>（1）在命令行中执行如下命令创建迁移文件，具体命令如下：</p> 
<pre><code>php artisan make:migration create_admin_user_table</code></pre> 
<p> （2）执行完上述命令后，会在<strong>database\migrations</strong>目录下生成文件名称为时间前缀<strong>_create_admin_user_table.php</strong>的文件 。</p> 
<p>（3）在迁移文件的<strong>up()</strong>方法中添加表结构信息，具体代码如下：</p> 
<pre><code> public function up()
    {
        Schema::create('admin_user', function (Blueprint $table) {
            $table-&gt;increments('id')-&gt;comment('主键');
            $table-&gt;string('username', 32)-&gt;comment('用户名')-&gt;unique();
            $table-&gt;string('password', 32)-&gt;comment('密码');
            $table-&gt;char('salt', 32)-&gt;comment('密码salt');
            $table-&gt;timestamps();
 
        });
    }</code></pre> 
<p>（5）上述命令会执行迁移文件中的<strong>up()</strong>方法，来完成数据表的创建。</p> 
<p>（6）创建填充文件，具体命令如下：</p> 
<pre><code>php artisan migrate</code></pre> 
<p>（7）执行完上述命令后，会在<strong>database\seeds</strong>目录下生成对应的迁移文件，文件名为AdminuserTableSeeder.php。</p> 
<p>（8）在填充文件的run()方法中编写填充代码：</p> 
<pre><code>public function run()
{
    $salt = md5(uniqid(microtime(), true));
    $password = md5(md5('123456') . $salt);
    DB::table('admin_user')-&gt;insert([
        [
            'id' =&gt; 1,
            'username' =&gt; 'admin',
            'password' =&gt; $password,
            'salt' =&gt; $salt
        ],
    ]);
}</code></pre> 
<p>（9）执行填充文件命令：</p> 
<pre><code>php artisan db:seed --class=AdminuserTableSeeder</code></pre> 
<p>（10）数据库创建成功后，创建用户模型：</p> 
<pre><code>php artisan make:model Admin
</code></pre> 
<p>（11）打开<strong>app\Admin.php</strong>,在模型中指定要操作的表名，具体代码如下：</p> 
<pre><code>&lt;?php
 
namespace App;
 
use Illuminate\Database\Eloquent\Model;
 
class Admin extends Model
{
    protected $table = 'admin_user';
    public $fillable = ['username', 'password'];
}</code></pre> 
<h3 id="2.%E6%98%BE%E7%A4%BA%E7%99%BB%E5%BD%95%E9%A1%B5%E9%9D%A2">2、显示登录页面</h3> 
<p>（1）创建User控制器。</p> 
<pre><code>php artisan make:controller Admin/UserController</code></pre> 
<p>（2）打开UserController.php，创建login()方法。</p> 
<pre><code>public function login(){
    return view('admin/login');
}</code></pre> 
<p>（3）在routes\web.php文件中添加路由规则。</p> 
<pre><code>Route::get('/admin/login','Admin\UserController@login');</code></pre> 
<p>（4）在resources\views目录下创建admin目录，该目录用于存放后台相关的模板文件。然后在admin目录中创建login.blade.php文件。</p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;!-- 引入静态文件 --&gt;
    &lt;title&gt;登录&lt;/title&gt;
&lt;/head&gt;
&lt;body class="login"&gt;
&lt;div class="container"&gt;
&lt;!-- 登录表单 --&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>（5）在login.blade.php文件中引入静态文件。</p> 
<pre><code>    &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/common/twitter-bootstrap/4.4.1/css/bootstrap.min.css"&gt;
    &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/common/font-awesome-4.2.0/css/font-awesome.min.css"&gt;
    &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/common/toastr.js/2.1.4/toastr.min.css"&gt;
    &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/css/main.css"&gt;
    &lt;script src="{<!-- -->{asset('admin')}}/common/jquery/1.12.4/jquery.min.js"&gt;&lt;/script&gt;
    &lt;script src="{<!-- -->{asset('admin')}}/common/twitter-bootstrap/4.4.1/js/bootstrap.min.js"&gt;&lt;/script&gt;
    &lt;script src="{<!-- -->{asset('admin')}}/common/toastr.js/2.1.4/toastr.min.js"&gt;&lt;/script&gt;
    &lt;script src="{<!-- -->{asset('admin')}}/js/main.js"&gt;&lt;/script&gt;</code></pre> 
<p>（6）在login.blade.php文件中定义登录表单。</p> 
<pre><code>&lt;form action="" method="post" class="j-login"&gt;
    &lt;h1&gt;后台管理系统&lt;/h1&gt;
    &lt;div class="form-group"&gt;
      &lt;input type="text" name="username" class="form-control" placeholder="用户名" required&gt;
    &lt;/div&gt;
    &lt;div class="form-group"&gt;
      &lt;input type="password" name="password" class="form-control" placeholder="密码" required&gt;
    &lt;/div&gt;
    &lt;div class="form-group"&gt;
      &lt;input type="text" name="captcha" class="form-control" placeholder="验证码" required&gt;
    &lt;/div&gt;
    &lt;!-- 验证码 --&gt;
    &lt;div class="form-group"&gt;
      {<!-- -->{csrf_field()}}
      &lt;input type="submit" class="btn btn-lg btn-block btn-success" value="登录"&gt;
    &lt;/div&gt;
&lt;/form&gt;
 </code></pre> 
<p>（7）使用Composer载入mews/captcha验证码库。</p> 
<pre><code>composer require mews/captcha=3.0</code></pre> 
<p>（8）创建验证码的配置文件。</p> 
<pre><code>php artisan vendor:publish</code></pre> 
<p>（9）编辑config\captcha.php文件，将字符个数改为4。</p> 
<pre><code>'default' =&gt; [
        'length' =&gt; 4, //字符个数
        'width' =&gt; 120, //图片宽度
        'height' =&gt; 36, //图片高度
        'quality' =&gt; 90, //图片质量
        'math' =&gt; false, //数学计算
    ],</code></pre> 
<p>（10）在config\app.php文件中将验证码服务注册到服务容器中。</p> 
<pre><code>'providers' =&gt; [
     ...(原有代码)
     Mews\Captcha\CaptchaServiceProvider::class,
     ...(原有代码)
]</code></pre> 
<p>（11）在config\app.php文件中给验证码服务注册别名。</p> 
<pre><code>'aliases' =&gt; [
     ...(原有代码)
    'Captcha' =&gt;Mews\Captcha\Facades\Captcha::class,
]</code></pre> 
<p>（12）在登录表单中添加验证码。</p> 
<pre><code>&lt;div class="form-group"&gt;
      &lt;div class="login-captcha"&gt;&lt;img src="{<!-- -->{ captcha_src() }}" alt="captcha"&gt;&lt;/div&gt;
 &lt;/div&gt;</code></pre> 
<p>（13）实现单击验证码图片后更换验证码的功能，在模板中编写JavaScript 代码。</p> 
<pre><code> &lt;script&gt;
    $('.login-captcha img').click(function() {
    $(this).attr('src', '{<!-- -->{ captcha_src()}}' + '?_=' + Math.random());
  });
&lt;/script&gt; </code></pre> 
<p>（14）运行效果图如下：</p> 
<p><img alt="" src="https://images2.imgbox.com/cf/81/CXCHZnKv_o.png"></p> 
<h3 id="3%E3%80%81Ajax%E4%BA%A4%E4%BA%92"><strong>3、Ajax</strong><strong>交互</strong></h3> 
<p>Ajax交互封装的开发思路：</p> 
<p>① 将Ajax操作的代码封装到一个对象中，该对象可以随意命名，这里命名为main。</p> 
<p>② 通过main.ajax()方法发送Ajax请求，该方法有3个参数，第1个参数可以是对象或字符串，如果是对象，则用于传递给$.ajax()，如果是字符串，则表示请求地址；第2个参数表示当服务器返回成功结果时执行的回调函数；第3个参数表示当服务器返回失败结果时执行的回调函数。</p> 
<p>③ 当开始发送Ajax请求时，在页面中显示加载提示，并在收到服务器响应后，隐藏加载提示。</p> 
<p>④ 当Ajax请求失败，或服务器响应错误信息时，通过toastr对象将错误信息显示在页面中。</p> 
<p>在分析了要完成的主要功能后，下面开始进行代码编写：</p> 
<p>① 打开public\admin\js\main.js文件，编写window.main对象。</p> 
<p>② 在main对象中编写ajaxPost()方法，用于发送POST请求。</p> 
<p>在main.js中编写ajaxForm()方法，用于将表单改为Ajax提交方式</p> 
<blockquote> 
 <p><span style="color:#fe2c24;">ajax知识拓展：</span></p> 
 <p><span style="background-color:#ffd900;">Ajax (Asynchronous JavaScript and XML) 是一种使用已有的标准技术，通过 JavaScript 实现浏览器与服务器之间异步数据传输的方法。它的主要特点是在不刷新整个页面的情况下，可以与服务器交换数据并更新部分页面内容，从而提升用户体验。</span></p> 
 <p></p> 
 <p>Ajax 技术的核心是 XMLHttpRequest 对象，通过该对象可以实现异步请求数据和更新部分页面内容。当用户与 Web 应用程序交互时，JavaScript 会发送异步请求到服务器端，服务器响应请求并返回需要的数据，JavaScript 再根据返回的数据更新页面。</p> 
 <p></p> 
 <p>Ajax 技术的应用非常广泛，如实现自动补全、实时搜索等功能，提高了用户的体验感和操作效率。同时，Ajax 还可以用于异步上传文件、处理表单数据等场景。</p> 
</blockquote> 
<p></p> 
<h3 id="%C2%A04%E3%80%81%E9%AA%8C%E8%AF%81%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"> 4、<strong>验证用户登录</strong></h3> 
<p>（1）设置&lt;form&gt;标签的action属性设置表单的提交地址，给登录表单的action属性添加属性值，指定表单的提交地址为“{<!-- -->{ url('admin/check') }}”，表示UserController的check()方法。</p> 
<p>（2）编写代码完成验证用户登录。</p> 
<p>① 在routes\web.php文件中添加路由规则。</p> 
<pre><code>//登录验证
Route::post('/admin/check','Admin\UserController@check');</code></pre> 
<p>② 在UserController.php中创建check()方法。</p> 
<pre><code>public function check(Request $request)
    {
        //声明自动验证规则
        $rule = [
            'username' =&gt; 'required',
            'password' =&gt; 'required|min:6',
            'captcha' =&gt; 'required|captcha'
        ];
        // 声明自动验证规则对应的提示信息（验证失败返回信息）
        $message = [
            'username.required' =&gt; '用户名不能为空',
            'password.required' =&gt; '密码不能为空',
            'password.min'     =&gt; '密码最少为6位',
            'captcha.required' =&gt; '验证码不能为空',
            'captcha.captcha' =&gt; '验证码有误'
        ];
        //进行自动验证，验证表单提交数据
        $validator = Validator::make($request-&gt;all(), $rule, $message);
        // 输出验证结果并返回给浏览器
        if ($validator-&gt;fails()) {   //验证失败fails()方法
            foreach ($validator-&gt;getMessageBag()-&gt;toArray() as $v) {
                $msg = $v[0];
            }
            return response()-&gt;json(['code' =&gt; 0, 'msg' =&gt; $msg]);
        }
        // 获取用户输入的用户名、密码信息，以及数据表中用户名、密码信息
        $username = $request-&gt;get('username');
        $password = $request-&gt;get('password');
        $theUser = Admin::where('username',$username)-&gt;first();
        // 对用户输入的密码与数据库中的密码进行比较，如果密码正确则登录成功，并将用户信息保存在session中
        // 跳转至后台首页，如果登录失败，则显示“登录失败”
        if($theUser-&gt;password == md5(md5($password). $theUser-&gt;salt))
        {
            Session::put('user', ['id'=&gt;$theUser-&gt;id,'name'=&gt;$username]);
            return response()-&gt;json(['code' =&gt; 1, 'msg' =&gt; '登录成功']);
        }else{
            return response()-&gt;json(['code' =&gt; 0, 'msg' =&gt; '登录失败']);
        }
    }</code></pre> 
<p>③ 导入Admin模型、Session、Validator的命名空间。</p> 
<pre><code>use App\Admin;
use Illuminate\Support\Facades\Session;
use Illuminate\Support\Facades\Validator;</code></pre> 
<p>（3）通过浏览器访问，输入小于6 位的密码，页面会出现“密码最少为6 位”的错误提示；如果提交正确的用户名（admin）和密码（123456），页面中会出现“登录成功”的提示。</p> 
<h3 id="5%E3%80%81%E7%94%A8%E6%88%B7%E9%80%80%E5%87%BA"><strong>5、用户退出</strong></h3> 
<p>（1）在User控制器中添加logout()方法。</p> 
<pre><code> public function logout(){
        if(request()-&gt;session()-&gt;has('user')){
            request()-&gt;session()-&gt;pull('user',session('user'));
        }
        return redirect('/admin/login');
    }</code></pre> 
<p>（2）在routes\web.php文件中添加路由规则。</p> 
<pre><code>//用户退出
Route::get('/admin/logout','Admin\UserController@logout');</code></pre> 
<p>通过浏览器访问，在确保用户已经登录以后，访问http://cms.test/admin/logout，浏览器会自动跳转到登录页面，说明当前用户已经成功退出。</p> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5%C2%A0">二、后台首页 </h2> 
<p>在用户登录成功后，就会进入到后台首页。网站的后台首页一般会显示一些欢迎信息、系统信息、统计数据等系统信息。本节将实现上述功能。</p> 
<h3 id="1%E3%80%81%E5%90%8E%E5%8F%B0%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80"><strong>1、后台页面布局</strong></h3> 
<p>在后台管理系统的页面中，一般都会包含顶部、菜单和内容区域这3 个部分，可将后台页面的顶部和左侧菜单提取出来，作为公共文件供其他模板调用，在 resources\views\admin下创建 layouts目录，此目录将作为公共文件的存放目录。开发步骤如下。</p> 
<p>（1）在layouts目录下创建admin.blade.php文件。</p> 
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
&lt;!--引入静态文件--&gt;
  &lt;title&gt;@yield('title')&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;nav class="navbar navbar-expand-md navbar-light bg-light main-navbar"&gt;
  &lt;a class="navbar-brand" href="#"&gt;后台管理系统&lt;/a&gt;
  &lt;div class="collapse navbar-collapse" id="navbarSupportedContent"&gt;
    &lt;ul class="nav ml-auto main-nav-right"&gt;
      &lt;li&gt;
        &lt;a href="#" class="j-layout-pwd"&gt;
          &lt;i class="fa fa-user fa-fw"&gt;&lt;/i&gt;{<!-- -->{session()-&gt;get('user.name')}}
        &lt;/a&gt;
      &lt;/li&gt;
      &lt;li&gt;
        &lt;a href="{<!-- -->{url('admin/logout')}}"&gt;
          &lt;i class="fa fa-power-off fa-fw"&gt;&lt;/i&gt;退出
        &lt;/a&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/div&gt;
&lt;/nav&gt;
&lt;!-- 后台页面的首页部分 --&gt;
&lt;div class="main-container"&gt;
  &lt;div class="main-content"&gt;
    &lt;div&gt;@yield('main')&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre> 
<p>（2）在页面中引入静态资源。</p> 
<pre><code>  &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/common/twitter-bootstrap/4.4.1/css/bootstrap.min.css"&gt;
  &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/common/font-awesome-4.2.0/css/font-awesome.min.css"&gt;
  &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/common/toastr.js/2.1.4/toastr.min.css"&gt;
  &lt;link rel="stylesheet" href="{<!-- -->{asset('admin')}}/css/main.css"&gt;
  &lt;script src="{<!-- -->{asset('admin')}}/common/jquery/1.12.4/jquery.min.js"&gt;&lt;/script&gt;
  &lt;script src="{<!-- -->{asset('admin')}}/common/twitter-bootstrap/4.4.1/js/bootstrap.min.js"&gt;&lt;/script&gt;
  &lt;script src="{<!-- -->{asset('admin')}}/common/toastr.js/2.1.4/toastr.min.js"&gt;&lt;/script&gt;
  &lt;script src="{<!-- -->{asset('admin')}}/js/main.js"&gt;&lt;/script&gt;</code></pre> 
<p>（3）在页面中定义左侧导航栏。</p> 
<pre><code>&lt;div class="main-sidebar"&gt;
      &lt;ul class="nav flex-column main-menu"&gt;
      
&lt;/div&gt;</code></pre> 
<p>（4）添加首页菜单。</p> 
<pre><code>        &lt;li class=""&gt;
          &lt;a href="{<!-- -->{url('admin/index')}}" class="active"&gt;
            &lt;i class="fa fa-home fa-fw"&gt;&lt;/i&gt;首页
          &lt;/a&gt;
        &lt;/li&gt;</code></pre> 
<p>（5）添加栏目菜单。</p> 
<pre><code>        &lt;li class="main-sidebar-collapse"&gt;  &lt;!-- 被收起的双层项 --&gt;
          &lt;a href="#" class="main-sidebar-collapse-btn"&gt;   &lt;!-- 链接用于展开或收起子菜单 --&gt;
              &lt;i class="fa fa-list-alt fa-fw"&gt;&lt;/i&gt;栏目
              &lt;span class="fa main-sidebar-arrow"&gt;&lt;/span&gt;  &lt;!-- 双层项的右侧小箭头 --&gt;
          &lt;/a&gt;
          &lt;ul class="nav"&gt;
            &lt;!-- 设置子菜单 --&gt;
            &lt;li&gt;
              &lt;a href="#" data-name="addcategory"&gt;
              &lt;i class="fa fa-list fa-fw"&gt;&lt;/i&gt;添加&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
              &lt;a href="#" data-name="category"&gt;
                &lt;i class="fa fa-table fa-fw"&gt;&lt;/i&gt;列表&lt;/a&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;</code></pre> 
<p>（6）添加内容菜单。</p> 
<pre><code>        &lt;li class="main-sidebar-collapse"&gt;
          &lt;a href="#" class="main-sidebar-collapse-btn"&gt;
            &lt;i class="fa fa-list-alt fa-fw"&gt;&lt;/i&gt;内容
            &lt;span class="fa main-sidebar-arrow"&gt;&lt;/span&gt;
          &lt;/a&gt;
          &lt;ul class="nav"&gt;
            &lt;li&gt;
              &lt;a href="#" data-name="addcontent"&gt;
              &lt;i class="fa fa-list fa-fw"&gt;&lt;/i&gt;添加&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
              &lt;a href="#" data-name="content"&gt;
                &lt;i class="fa fa-table fa-fw"&gt;&lt;/i&gt;列表&lt;/a&gt;
            &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;</code></pre> 
<p>（7）添加广告菜单。</p> 
<pre><code>         &lt;li class="main-sidebar-collapse"&gt;
          &lt;a href="#" class="main-sidebar-collapse-btn"&gt;
            &lt;i class="fa fa-cog fa-fw"&gt;&lt;/i&gt;广告
            &lt;span class="fa main-sidebar-arrow"&gt;&lt;/span&gt;
          &lt;/a&gt;
          &lt;ul class="nav"&gt;
            &lt;li&gt;
              &lt;a href="#" data-name="adv"&gt;
                &lt;i class="fa fa-list fa-fw"&gt;&lt;/i&gt;广告位&lt;/a&gt;
            &lt;/li&gt;
            &lt;li&gt;
              &lt;a href="#" data-name="advcontent"&gt;
                &lt;i class="fa fa-list-alt fa-fw"&gt;&lt;/i&gt;广告内容&lt;/a&gt;
           &lt;/li&gt;
          &lt;/ul&gt;
        &lt;/li&gt;</code></pre> 
<p>（8）添加消息提示模板。</p> 
<pre><code>@if(!empty(session('message')))
  &lt;div class="alert alert-success" role="alert"
    style="text-align:center;margin:0 auto;width: 400px"&gt;
      {<!-- -->{session('message')}}
  &lt;/div&gt;
@endif
@if(!empty(session('tip')))
  &lt;div class="alert alert-warning" role="alert"
  style="text-align:center;margin:0 auto;width: 400px"&gt;
    {<!-- -->{session('tip')}}
  &lt;/div&gt;
@endif</code></pre> 
<p>（9）在&lt;body&gt;标签结束前的位置添加&lt;script&gt;标签，控制消息模板的显示时间。</p> 
<pre><code>&lt;script&gt;
  // setInterval(myFunction，myTimeLapse)，每隔myTimeLapse（毫秒）执行一次myFunction()函数
  setInterval(function(){
    $('.alert').remove();
  },3000);
&lt;/script&gt;</code></pre> 
<p>（10）修改public\admin\js\main.js文件，编写layout()方法。</p> 
<pre><code> layout: function() {
      $('.main-sidebar-collapse-btn').click(function() {
        $(this).parent().find('.nav').slideToggle(200);
        $(this).parent().toggleClass('main-sidebar-collapse').siblings().
            addClass('main-sidebar-collapse').find('.nav').slideUp(200);
        return false;
      });
    },</code></pre> 
<p>（11）在main.js中增加menuActive()方法，用于将指定菜单项设为选中效果。</p> 
<p>在&lt;script&gt;标签中调用layout()方法。</p> 
<pre><code>menuActive: function(name) {
      var menu = $('.main-menu');
      menu.find('a').removeClass('active');
      menu.find('a[data-name=\'' + name + '\']').addClass('active');
      menu.find('a[data-name=\'' + name + '\']').parent().parent().show();
    }</code></pre> 
<h3 id="2%E3%80%81%E6%98%BE%E7%A4%BA%E5%90%8E%E5%8F%B0%E9%A6%96%E9%A1%B5"><strong>2、显示后台首页</strong></h3> 
<p>（1）公共文件创建完成后，接下来创建后台首页admin\index.blade.php。</p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '后台首页')
@section('main')
  &lt;div&gt;
    &lt;div class="main-title"&gt;
      &lt;h2&gt;首页&lt;/h2&gt;
    &lt;/div&gt;
    &lt;div class="main-section"&gt;
      &lt;div class="card"&gt;
        &lt;div class="card-header"&gt;服务器信息&lt;/div&gt;
        &lt;ul class="list-group list-group-flush"&gt;
          &lt;li class="list-group-item"&gt;系统环境：{<!-- -->{ $server_version }}&lt;/li&gt;
          &lt;li class="list-group-item"&gt;Laravel版本：{<!-- -->{ $laravel_version }}&lt;/li&gt;
          &lt;li class="list-group-item"&gt;MySQL版本：{<!-- -->{ $mysql_version }}&lt;/li&gt;
          &lt;li class="list-group-item"&gt;服务器时间：{<!-- -->{ $server_time }}&lt;/li&gt;
          &lt;li class="list-group-item"&gt;文件上传限制：{<!-- -->{ $upload_max_filesize }}&lt;/li&gt;
          &lt;li class="list-group-item"&gt;脚本执行时限：{<!-- -->{ $max_execution_time }}&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
@endsection</code></pre> 
<p>（2）创建Index控制器。</p> 
<pre><code>php artisan make:controller Admin\IndexController</code></pre> 
<p>（3）在Index控制器中添加index()方法。</p> 
<pre><code>    public function index(Request $request){
        $data = [
            'server_version' =&gt; $request-&gt;server('SERVER_SOFTWARE'),
            'laravel_version' =&gt; app()::VERSION,
            'mysql_version' =&gt; $this-&gt;getMySQLVer(),
            'server_time' =&gt; date('Y-m-d H:i:s', time()),
            'upload_max_filesize' =&gt; ini_get('file_uploads') ?
                ini_get('upload_max_filesize') : '已禁用',
            'max_execution_time' =&gt; ini_get('max_execution_time') . '秒'
        ];
        return view('admin\index', $data);
    }</code></pre> 
<p>（4）在上述代码中，第6行代码调用getMySQLVer()方法获取MySQL的版本，创建getMySQLVer()方法。</p> 
<pre><code>private function getMySQLVer()
    {
        $res = DB::select('SELECT VERSION() AS ver');
        return $res[0]-&gt;ver ?? '未知';
    }</code></pre> 
<p>（5）在getMySQLVer()方法中，使用DB类执行SQL，获取MySQL的版本，导入DB类的命名空间。</p> 
<p>（6）在routes\web.php文件中添加路由规则，通过浏览器访问后台首页。</p> 
<pre><code>Route::get('/admin/index', 'Admin\IndexController@index');</code></pre> 
<p>（7）通过浏览器访问后台首页，其效果如下图：</p> 
<p><img alt="" src="https://images2.imgbox.com/bd/5e/FeXHR2gY_o.png"></p> 
<h3 id="3%E3%80%81%E5%88%A4%E6%96%AD%E7%99%BB%E5%BD%95%E7%8A%B6%E6%80%81"><strong>3、判断登录状态</strong></h3> 
<p>在用户登录成功以后，需要通过Session 来记住登录状态，并在下次请求中判断用户有没有登录。由于后台是给内部人员使用的，除了登录功能外，其他功能都必须在用户登录后才能使用。为了便于判断用户的登录状态，利用中间件来实现。在明确了需求后，下面开始完成判断登录状态的逻辑功能。</p> 
<p>（1）创建Admin中间件，用于验证用户是否登录。</p> 
<p>（2）打开app\Http\Middleware\Admin.php，添加验证用户登录的代码。</p> 
<pre><code> public function handle($request, Closure $next)
    {
        if (request()-&gt;session()-&gt;has('user')) {
            $user = request()-&gt;session()-&gt;get('user');
            view()-&gt;share('user', $user);
        } else {
            return redirect('/admin/login');
        }
        return $next($request);
    }</code></pre> 
<p>（3）在app\Http\Kernel.php文件中注册路由中间件。</p> 
<pre><code>protected $routeMiddleware = [
    ...(原有代码)
    'Admin' =&gt; \App\Http\Middleware\Admin::class,
];</code></pre> 
<p>（4）修改首页的路由规则，为后台首页添加用户验证。</p> 
<pre><code>Route::get('/admin/index', 'Admin\IndexController@index')-&gt;middleware(['Admin']);
</code></pre> 
<p>通过浏览器直接访问后台首页时，如果处于未登录状态，就会自动跳转至登录页面。</p> 
<p></p> 
<h2 id="%E4%B8%89%E3%80%81%E6%A0%8F%E7%9B%AE%E7%AE%A1%E7%90%86%C2%A0">三、栏目管理 </h2> 
<p>在内容管理系统中，栏目用于对内容进行分类，如生活类、咨询类、编程类。对内容进行分类，可以使用户更高效地找到需要的信息。本节将会讲解如何完成栏目管理功能的开发，实现栏目的查询、添加、修改和删除功能。</p> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E6%A0%8F%E7%9B%AE%E8%A1%A8">1、创建栏目表</h3> 
<p>（1）创建栏目表迁移文件，然后打开栏目表的迁移文件，在该文件的up()方法中添加表结构信息。</p> 
<pre><code> public function up()
    {
        
        Schema::create('category', function (Blueprint $table) {
            $table-&gt;increments('id')-&gt;comment('主键');
            $table-&gt;integer('pid')-&gt;comment('父类id') -&gt;default('0');
            $table-&gt;string('name', 32)-&gt;comment('分类名称');
            $table-&gt;integer('sort')-&gt;comment('排序值') -&gt;default('0');
            $table-&gt;timestamps();
        });
 
 
    }</code></pre> 
<p>（2）栏目表创建完成后，为了在项目中操作栏目表，下面创建栏目表对应的模型文件。</p> 
<pre><code>php artisan make:model Category</code></pre> 
<p>（3）打开app\Category.php文件，配置模型。</p> 
<pre><code>&lt;?php
 
namespace App;
 
use Illuminate\Database\Eloquent\Model;
 
class Category extends Model
{
    protected $table = "category";
    public $fillable = ['pid', 'name', 'sort'];
}</code></pre> 
<h3 id="%C2%A02%E3%80%81%E6%B7%BB%E5%8A%A0%E6%A0%8F%E7%9B%AE"> 2、<strong>添加栏目</strong></h3> 
<p>栏目分为两级，即父栏目和子栏目。父栏目下包含多个子栏目，子栏目不能选择其他子栏目作为自己的父栏目。</p> 
<p>（1）创建Category控制器。</p> 
<p>（2）在控制器中添加add()方法，用于实现添加栏目的功能。</p> 
<pre><code>&lt;?php
 
namespace App\Http\Controllers\Admin;
 
use Illuminate\Http\Request;
use App\Http\Controllers\Controller;
use App\Category;
 
class CategoryController extends Controller
{
    public function add(){
        $category = Category::where('pid', 0)-&gt;get();
        return view('admin.category.add', ['category' =&gt; $category] );
    }
}</code></pre> 
<p>（3）创建admin\category\add.blade.php视图文件。</p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', ' 添加栏目')
@section('main')
&lt;div class="main-title"&gt;&lt;h2&gt;添加栏目&lt;/h2&gt;&lt;/div&gt;
&lt;div class="main-section"&gt;
  &lt;div style="width:543px"&gt;
    &lt;!-- 添加栏目表单 --&gt;
    &lt;form method="post" action="{<!-- -->{ url('/category/save') }}"&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;序号&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;input type="number" name="sort" class="form-control" value="0" style="width:80px;"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;上级栏目&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;select name="pid" class="form-control" style="width:200px;"&gt;
            &lt;option value="0"&gt;---&lt;/option&gt;
            @foreach ($category as $v)
              &lt;option value="{<!-- -->{ $v-&gt;id }}"&gt; {<!-- -->{ $v-&gt;name }}&lt;/option&gt;
            @endforeach
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;名称&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;input type="text" name="name" class="form-control" style="width:200px;"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;div class="col-sm-10"&gt;
          {<!-- -->{csrf_field()}}
          &lt;button type="submit" class="btn btn-primary mr-2"&gt;提交表单&lt;/button&gt;
          &lt;a href="{<!-- -->{url('category')}}" class="btn btn-secondary"&gt;返回列表&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;script&gt;
  main.menuActive('addcategory');
&lt;/script&gt;
@endsection</code></pre> 
<p>（4）在上一步代码中的第7行的位置添加表单。</p> 
<p>（5）在routes\web.php文件中添加路由规则。</p> 
<pre><code>// 栏目
Route::prefix('category')-&gt;namespace('Admin')-&gt;middleware(['Admin'])-&gt;group(function () {
    Route::get('add', 'CategoryController@add');
});</code></pre> 
<p>（6）修改布局文件admin.blade.php，为添加栏目的导航添加链接。</p> 
<pre><code>&lt;a href="{<!-- -->{ url('category/add') }}" data-name="addcategory"&gt;&lt;i class="fa fa-list fa-fw"&gt;&lt;/i&gt;添加&lt;/a&gt;</code></pre> 
<p>（7）在Category控制器中编写save()方法，用于接收添加栏目的表单数据。</p> 
<pre><code> public function save(Request $request){
        $data = $request-&gt;all();
        $this-&gt;validate($request,[
            'name'=&gt;'required|unique:category'.$rule,
        ],[
            'name.required'=&gt;'栏目名称不能为空',
            'name.unique'=&gt;'栏目名称不能重复'
        ]);
        $re = Category::create($data);
        if($re){
            return redirect('category')-&gt;with('message','添加成功');
        }else{
            return redirect('category/add')-&gt;with('tip','添加失败');
        }
    }</code></pre> 
<p>（8）在routes\web.php文件中栏目的路由组中添加路由规则。</p> 
<pre><code>Route::post('save', 'CategoryController@save');</code></pre> 
<p>（9）通过浏览器访问，添加栏目后，查看数据表中是否有新增的栏目数据</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/47/85/JjhZarYS_o.png"></p> 
<p></p> 
<h3 id="3%E3%80%81%E6%98%BE%E7%A4%BA%E6%A0%8F%E7%9B%AE%E5%88%97%E8%A1%A8"><strong>3、显示栏目列表</strong></h3> 
<p>（1）在Category控制器中创建index()方法。</p> 
<pre><code>    public function index(){
        $category = $this-&gt;getTreeListCheckLeaf($data);
        return view('admin.category.index', ['category' =&gt; $category]);
    }</code></pre> 
<p>（2）在Category模型中添加getTreeList()方法、getTreeListCheckLeaf()方法和treeList()方法。</p> 
<pre><code> public function getTreeListCheckLeaf($data, $name = 'isLeaf')
    {
        $data = $this-&gt;treeList($data);
        foreach ($data as $k =&gt; $v) {
            foreach ($data as $vv) {
                $data[$k][$name] = true;
                if ($v['id'] === $vv['pid']) {
                    $data[$k][$name] = false;
                    break;
                }
            }
        }
        return $data;
    }
 
    public function treeList($data, $pid = 0, $level = 0, &amp;$tree = [])
    {
        foreach ($data as $v) {
            if ($v['pid'] == $pid) {
                $v['level'] = $level;
                $tree[] = $v;
                $this-&gt;treeList($data, $v['id'], $level + 1, $tree);
            }
        }
        return $tree;
    }</code></pre> 
<p>（3）创建视图文件index.blade.php。</p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '栏目列表')
@section('main')
&lt;div class="main-title"&gt;&lt;h2&gt;栏目管理&lt;/h2&gt;&lt;/div&gt;
&lt;div class="main-section form-inline"&gt;
  &lt;a href="{<!-- -->{ url('category/add') }}" class="btn btn-success"&gt;+ 新增&lt;/a&gt;
&lt;/div&gt;
&lt;div class="main-section"&gt;
  &lt;form method="post" action="" class="j-form"&gt;
    &lt;table class="table table-striped table-bordered table-hover"&gt;
      &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="75"&gt;序号&lt;/th&gt;&lt;th&gt;名称&lt;/th&gt;&lt;th width="100"&gt;操作&lt;/th&gt;
      &lt;/tr&gt;
      &lt;/thead&gt;
      &lt;tbody&gt;
      &lt;!-- 栏目列表 --&gt;
      @foreach($category)
        &lt;tr class="j-pid-{<!-- -->{ $v['pid'] }}"
          @if($v['level'])style="display:none"@endif&gt;
          &lt;td&gt;&lt;input type="text" class="form-control j-sort" maxlength="5" value="{<!-- -->{$v['sort']}}" data-name="sort[{<!-- -->{$v['id']}}]" style="height:25px;font-size:12px;padding:0 5px;"&gt;&lt;/td&gt;
          &lt;td&gt;
            @if($v['level'])
              &lt;small class="text-muted"&gt;├──&lt;/small&gt; {<!-- -->{$v['name']}}
            @else
              &lt;a href="#" class="j-toggle" data-id="{<!-- -->{$v['id']}}"&gt;
                @if(!$v['isLeaf'])
                  &lt;i class="fa fa-plus-square-o fa-minus-square-o fa-fw"&gt;&lt;/i&gt;
                @endif
                {<!-- -->{$v['name']}}
              &lt;/a&gt;
            @endif
          &lt;/td&gt;
          &lt;td&gt;
            &lt;a href="{<!-- -->{ url('category/edit', ['id' =&gt; $v['id']]) }}" style="margin-right:5px;"&gt;编辑&lt;/a&gt;
            &lt;a href="{<!-- -->{ url('category/delete', ['id' =&gt; $v['id']]) }}" class="j-del text-danger"&gt;删除&lt;/a&gt;
          &lt;/td&gt;
        &lt;/tr&gt;
      @endforeach
      @if(empty($category))
        &lt;tr&gt;&lt;td colspan="4" class="text-center"&gt;还没有添加栏目&lt;/td&gt;&lt;/tr&gt;
      @endif
      &lt;/tbody&gt;
    &lt;/table&gt;
    {<!-- -->{csrf_field()}}
    &lt;input type="submit" value="改变排序" class="btn btn-primary"&gt;
  &lt;/form&gt;
&lt;/div&gt;
&lt;script&gt;
  main.menuActive('category');
  $('.j-toggle').click(function() {
    var id = $(this).attr('data-id');
    $(this).find('i').toggleClass('fa-plus-square-o');
    $('.j-pid-' + id).toggle();
    return false;
  });
  $('.j-sort').change(function() {
    $(this).attr('name', $(this).attr('data-name'));
  });
  $('.j-del').click(function() {
    if (confirm('您确定要删除此项？')) {
      var data = { _token: '{<!-- -->{ csrf_token() }}' };
      main.ajaxPost({url:$(this).attr('href'), data: data}, function(){
        location.reload();
      });
    }
    return false;
  });
&lt;/script&gt;
@endsection</code></pre> 
<p>（4）添加栏目列表。</p> 
<p>（5）在页面中添加JavaScript代码，实现单击栏目展开该栏目下的子栏目的功能。</p> 
<p>（6）在routes\web.php文件中栏目的路由组中添加栏目列表的路由规则。</p> 
<p>（7）修改admin.blade.php，为列表菜单项添加链接。</p> 
<pre><code>    Route::get('', 'CategoryController@index');
</code></pre> 
<p>（8）在栏目列表页中，为了实现修改栏目的排序，需要设置栏目列表页中表单的提交地址。</p> 
<pre><code>  &lt;form method="post" action="{<!-- -->{ url('category/sort')}}" class="j-form"&gt;</code></pre> 
<p>（9）在routes\web.php文件中栏目的路由组中添加排序的路由规则。</p> 
<pre><code>    Route::post('sort', 'CategoryController@sort');
</code></pre> 
<p>（10）添加JavaScript代码，修改排序值后，为input输入框设置name属性。</p> 
<p>（11）在Category控制器中添加sort()方法。</p> 
<p>通过浏览器访问，观察栏目排序功能是否正确执行。</p> 
<pre><code>public function sort(Request $request){
        $sort = $request-&gt;input('sort');
        foreach ($sort as $k =&gt; $v) {
            Category::where('id', (int)$k)-&gt;update(['sort' =&gt; (int)$v]);
        }
        return redirect('category')-&gt;with('message','改变排序成功');
    }</code></pre> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/3d/0f/r16SwhNH_o.png"></p> 
<p></p> 
<h3 id="4%E3%80%81%E7%BC%96%E8%BE%91%E6%A0%8F%E7%9B%AE"><strong>4、编辑栏目</strong></h3> 
<p>（1）在列表页单击每条栏目对应的“编辑”按钮，即可对此栏目进行编辑。下面在列表页中为“编辑”按钮添加链接。</p> 
<pre><code>&lt;a href="{<!-- -->{ url('category/edit', ['id' =&gt; $v['id']]) }}" style="margin-right:5px;"&gt;编辑&lt;/a&gt;
</code></pre> 
<p>（2）在routes\web.php文件中栏目的路由组中添加编辑栏目的路由规则。</p> 
<pre><code>    Route::get('edit/{id}', 'CategoryController@edit');
</code></pre> 
<p>（3）在Category控制器中添加edit()方法。</p> 
<pre><code>public function edit($id){
        $data = [];
        if ($id) {
            if (!$data = Category::find($id)) {
                return back()-&gt;with('tip', '记录不存在。');
            }
        }
        $category = Category::where('pid', 0)-&gt;get();
        return view('admin.category.edit', ['id'=&gt;$id, 'data'=&gt;$data, 'category' =&gt; $category]);
    }</code></pre> 
<p>（4）创建视图文件edit.blade.php。</p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '栏目列表')
@section('main')
&lt;div class="main-title"&gt;&lt;h2&gt;编辑分类&lt;/h2&gt;&lt;/div&gt;
&lt;div class="main-section"&gt;
  &lt;div style="width:543px"&gt;
    &lt;!-- 编辑表单 --&gt;
    &lt;form method="post" action="{<!-- -->{ url('/category/save') }}"&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;序号&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;input type="number" name="sort" class="form-control" value="{<!-- -->{$data-&gt;sort}}" style="width:80px;"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;上级分类&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;select name="pid" class="form-control" style="width:200px;"&gt;
            &lt;option value="0"&gt;---&lt;/option&gt;
            @foreach($category as $v)
              &lt;option value="{<!-- -->{ $v-&gt;id }}" @if($data['pid'] == $v['id']) selected @endif&gt; {<!-- -->{ $v-&gt;name }}&lt;/option&gt;
            @endforeach
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;名称&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;input type="text" name="name" class="form-control" value="{<!-- -->{$data-&gt;name}}" style="width:200px;"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;div class="col-sm-10"&gt;
          {<!-- -->{csrf_field()}}
          &lt;input type="hidden" name="id" value="{<!-- -->{$id}}"&gt;
          &lt;button type="submit" class="btn btn-primary mr-2"&gt;提交表单&lt;/button&gt;
          &lt;a href="{<!-- -->{url('category')}}" class="btn btn-secondary"&gt;返回列表&lt;/a&gt;
          {<!-- -->{--&lt;a href="{<!-- -->{url('category')}}"&gt;--}}
            {<!-- -->{--&lt;button class="btn btn-secondary"&gt;返回列表&lt;/button&gt;--}}
          {<!-- -->{--&lt;/a&gt;--}}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;script&gt;
  main.menuActive('category');
&lt;/script&gt;
@endsection</code></pre> 
<p>（5）添加编辑栏目的表单。</p> 
<p>（6）修改save()方法，根据栏目id更新栏目内容。</p> 
<p>通过浏览器访问，观察编辑栏目功能是否正确执行。</p> 
<pre><code>public function save(Request $request){
        $data = $request-&gt;all();
        $rule = isset($data['id']) ? ',name,'.$data['id'] : '';
        $this-&gt;validate($request,[
            'name'=&gt;'required|unique:category'.$rule,
        ],[
            'name.required'=&gt;'栏目名称不能为空',
            'name.unique'=&gt;'栏目名称不能重复'
        ]);
        if(isset($data['id'])){
            $id = $data['id'];
            unset($data['id']);
            unset($data['_token']);
            $res = Category::where('id',$id)-&gt;update($data);
            $type = $res ? "message" : "tip";
            $message = $res ? "修改成功" : "修改失败";
            return redirect('category')-&gt;with($type, $message);
        }
        $re = Category::create($data);
        if($re){
            return redirect('category')-&gt;with('message','添加成功');
        }else{
            return redirect('category/add')-&gt;with('tip','添加失败');
        }
    }</code></pre> 
<p></p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/54/c1/CjVH7crr_o.png"></p> 
<p></p> 
<h3 id="5%E3%80%81%E5%88%A0%E9%99%A4%E6%A0%8F%E7%9B%AE"><strong>5、删除栏目</strong></h3> 
<p>（1）在列表页中为“删除”按钮添加链接。</p> 
<p>（2）在Category控制器中添加delete()方法。</p> 
<pre><code>public function delete($id){
        if (!$category = Category::find($id)) {
            return response()-&gt;json(['code' =&gt; 0, 'msg' =&gt; '删除失败，记录不存在。' ]);
        }
        $category-&gt;delete();
        return response()-&gt;json(['code' =&gt; 1, 'msg' =&gt; '删除成功' ]);
    }</code></pre> 
<p>（3）在routes\web.php文件的栏目路由组中添加删除栏目的路由规则。</p> 
<pre><code>    Route::post('delete/{id}', 'CategoryController@delete');
</code></pre> 
<p>（4）通过浏览器访问，观察删除栏目功能是否成功实现。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/48/2e/mqSNbR0h_o.png"></p> 
<p></p> 
<h2 id="%C2%A0%E5%9B%9B%E3%80%81%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86"> 四、内容管理</h2> 
<p> 在内容管理系统中可以管理的内容有很多，如文章、图片、商品、电影、音乐等，本节主要实现内容管理功能。内容管理功能的开发思路与栏目管理功能类似，但内容管理功能还需要支持上传文件功能，例如，用户可以上传封面图用于在前台中展示。此外，还应考虑到将来内容会越来越多，需要提供分页查询功能，以便于用户进行浏览。</p> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E5%86%85%E5%AE%B9%E8%A1%A8"><strong>1、创建内容表</strong></h3> 
<p>（1）创建内容表对应的迁移文件后，在迁移文件的up()方法中添加表结构信息。内容表的字段有id、cid（栏目id）、title（标题）、content（内容）、image（图片）和status（状态）等字段。</p> 
<pre><code> public function up()
    {
        Schema::create('content', function (Blueprint $table) {
            $table-&gt;increments('id')-&gt;comment('主键');
            $table-&gt;integer('cid')-&gt;comment('栏目id')-&gt;default(0);
            $table-&gt;string('title', 255)-&gt;comment('标题');
            $table-&gt;text('content', 255)-&gt;comment('内容');
            $table-&gt;char('image', 255)-&gt;comment('图片');
            $table-&gt;tinyInteger('status')-&gt;comment('状态默认1推荐2')-&gt;default(1);
            $table-&gt;timestamps();
        });
 
    }</code></pre> 
<p>（2）创建内容表对应的模型文件app\Content.php。</p> 
<pre><code>php artisan make:model Content</code></pre> 
<h3 id="2%E3%80%81%E6%B7%BB%E5%8A%A0%E5%86%85%E5%AE%B9"><strong>2、添加内容</strong></h3> 
<p>（1）创建Content 控制器。</p> 
<p>（2）在控制器中添加add( )方法，用于实现添加内容的功能。</p> 
<pre><code> public function add()
    {
        $data = Category::orderBy('sort', 'asc')-&gt;get()-&gt;toArray();
        $cate = new CategoryController();
        $category = $cate-&gt;getTreeListCheckLeaf($data);
        return view('admin.content.add', ['category' =&gt; $category]);
    }
 
    public function save(Request $request)
    {
        $data = $request-&gt;all();
        $this-&gt;validate($request,[
            'cid'=&gt;'required',
            'title'=&gt;'required'
        ],[
            'cid.require'=&gt;'分类不能为空',
            'title.require'=&gt;'标题不能为空'
        ]);
        if(isset($data['id'])){
            $id = $data['id'];
            unset($data['id']);
            unset($data['_token']);
            $res = Content::where('id',$id)-&gt;update($data);
            $type = $res ? "message" : "tip";
            $message = $res ? "修改成功" : "修改失败";
            return redirect('content')-&gt;with($type, $message);
        }
 
        $re = Content::create($data);
        if($re){
            return redirect('content')-&gt;with('message','添加成功');
        }else{
            return redirect('content/add')-&gt;with('tip','添加失败');
        }
    }</code></pre> 
<p>（3）在控制器中导入Category 模型的命名空间。</p> 
<p>（4）创建resources\views\admin\content\add.blade.php视图文件。</p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '添加内容')
@section('main')
&lt;div class="main-title"&gt;&lt;h2&gt;添加内容&lt;/h2&gt;&lt;/div&gt;
&lt;div class="main-section"&gt;
  &lt;div style="width:80%"&gt;
    &lt;!-- 添加内容表单 --&gt;
    &lt;form method="post" action="{<!-- -->{ url('/content/save') }}" class="j-form"&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;所属分类&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;select name="cid" class="form-control" style="width:200px;"&gt;
            &lt;!-- 分类下拉列表 --&gt;
            @foreach($category as $v)
              @if($v['level'])
                &lt;option value="{<!-- -->{$v['id']}}"&gt;
                  &lt;small class="text-muted"&gt;├──&lt;/small&gt;{<!-- -->{$v['name']}}
                &lt;/option&gt;
              @else
                &lt;option value="{<!-- -->{$v['id']}}"&gt; {<!-- -->{$v['name']}}&lt;/option&gt;
              @endif
            @endforeach
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;标题&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;input type="text" name="title" class="form-control" style="width:200px;"&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;!-- 上传图片按钮 --&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;图片&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;input type="file" id="file1" name="image" value="上传图片" multiple="true"&gt;
        &lt;/div&gt;
        &lt;div class="col-sm-10 offset-sm-2"&gt;
          &lt;div class="upload-img-box" id="uploadImg"&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;简介&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;!-- &lt;textarea class="j-goods-content" name="content" style="height:500px"&gt;&lt;/textarea&gt; --&gt;
          &lt;script type="text/plain" class="j-goods-content" name="content" style="height:500px"&gt;&lt;/script&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;状态&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;div class="form-check form-check-inline" style="height:38px"&gt;
            &lt;input class="form-check-input" id="inlineRadio1" type="radio" name="status" value="1" checked&gt;
            &lt;label class="form-check-label" for="inlineRadio1"&gt;默认&lt;/label&gt;
          &lt;/div&gt;
          &lt;div class="form-check form-check-inline" style="height:38px"&gt;
            &lt;input class="form-check-input" id="inlineRadio2" type="radio" name="status" value="2"&gt;
            &lt;label class="form-check-label" for="inlineRadio2"&gt;推荐&lt;/label&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;div class="col-sm-10"&gt;
          {<!-- -->{csrf_field()}}
          &lt;button type="submit" class="btn btn-primary mr-2"&gt;提交表单&lt;/button&gt;
          &lt;a href="{<!-- -->{url('content')}}" class="btn btn-secondary"&gt;返回列表&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;link href="{<!-- -->{asset('admin')}}/common/uploader/uploadifive.css" rel="stylesheet" /&gt;
&lt;script src="{<!-- -->{asset('admin')}}/common/uploader/jquery.uploadifive.js"&gt;&lt;/script&gt;
&lt;script src="{<!-- -->{asset('admin')}}/common/editor/ueditor1.4.3.3/ueditor.config.js"&gt;&lt;/script&gt;
&lt;script src="{<!-- -->{asset('admin')}}/common/editor/ueditor1.4.3.3/ueditor.all.min.js"&gt;&lt;/script&gt;
&lt;script src="{<!-- -->{asset('admin')}}/common/editor/main.editor.js"&gt;&lt;/script&gt;
&lt;script&gt;
    main.menuActive('addcontent');
    $(function() {
      $('#file1').uploadifive({
        'auto'            : true,
        'fileObjName'     : 'image',
        'fileType'        : 'image',
        'buttonText'      : '上传图片',
        'formData'        : { '_token' : "{<!-- -->{ csrf_token() }}" },
        'method'          : 'post',
        'queueID'         : 'uploadImg',
        'removeCompleted' : true,
        'uploadScript'    : '{<!-- -->{ url('content/upload')}}',
        'onUploadComplete': uploadPicture_icon
      });
    });
    function uploadPicture_icon(file, data) {
      var obj = $.parseJSON(data);
      var src = '';
      if (obj.code) {
        filename = obj.data.filename;
        path = obj.data.path;
        $('.upload-img-box').empty();
        $('.upload-img-box').html(
          '&lt;div class="upload-pre-item" style="max-height:100%;"&gt;&lt;img src="' + path + '" style="width:100px;height:100px"/&gt; &lt;input type="hidden" name="image" value="'+filename+'" class="icon_banner"/&gt;&lt;/div&gt;'
        );
      } else {
        alert(data.info);
      }
    }
    main.editor($('.j-goods-content'), 'goods_edit', function(opt) {
      opt.UEDITOR_HOME_URL = '{<!-- -->{asset('admin')}}/common/editor/ueditor1.4.3.3/';
    }, function(editor) {
      $('.j-form').submit(function() {
        editor.sync();
      });
    });
&lt;/script&gt;
@endsection</code></pre> 
<p>（5）在视图中添加内容表单。</p> 
<p>（6）在视图中添加栏目下拉列表。</p> 
<p>（7）在Content 控制器中添加save()方法保存添加的内容。</p> 
<p>（8）在控制器中引入Content的命名空间。</p> 
<p>（9）在Routes\web.php中添加内容管理的路由组。</p> 
<pre><code>Route::prefix('content')-&gt;namespace('Admin')-&gt;middleware(['Admin'])-&gt;group(function () {
 
    Route::get('add', 'ContentController@add');
    Route::post('save', 'ContentController@save');
});</code></pre> 
<p>（10）修改admin.blade.php，为添加内容的菜单项添加链接。</p> 
<pre><code>&lt;a href="{<!-- -->{ url('content/add') }}" data-name="addcontent"&gt;
              &lt;i class="fa fa-list fa-fw"&gt;&lt;/i&gt;添加&lt;/a&gt;</code></pre> 
<p>（11）通过浏览器访问，观察添加内容功能是否正确执行。</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/48/a8/Jv5Sv3c4_o.png"></p> 
<p></p> 
<h3 id="%C2%A03%E3%80%81%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87"> <strong>3、上传图片</strong></h3> 
<p>（1）在添加内容的视图中添加上传图片的按钮。</p> 
<pre><code>&lt;div class="form-group row"&gt;
        &lt;label class="col-sm-2 col-form-label"&gt;图片&lt;/label&gt;
        &lt;div class="col-sm-10"&gt;
          &lt;input type="file" id="file1" name="image" value="上传图片" multiple="true"&gt;
        &lt;/div&gt;
        &lt;div class="col-sm-10 offset-sm-2"&gt;
          &lt;div class="upload-img-box" id="uploadImg"&gt;&lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;</code></pre> 
<p>（2）在视图中引入上传文件所需的样式和JavaScript代码。</p> 
<pre><code>&lt;link href="{<!-- -->{asset('admin')}}/common/uploader/uploadifive.css" rel="stylesheet" /&gt;
&lt;script src="{<!-- -->{asset('admin')}}/common/uploader/jquery.uploadifive.js"&gt;&lt;/script&gt;
&lt;script src="{<!-- -->{asset('admin')}}/common/uploader/jquery.uploadifive.min.js"&gt;&lt;/script&gt;</code></pre> 
<p>（3）在&lt;script&gt;标签中配置“上传图片”按钮。</p> 
<p>（4）在Content控制器中编写upload()方法。</p> 
<pre><code> public function upload(Request $request)
    {
        if ($request-&gt;hasFile('image')) {
            $image = $request-&gt;file('image');
            if ($image-&gt;isValid()) {
                $name = md5(microtime(true)) . '.' . $image-&gt;extension();
                $image-&gt;move('static/upload', $name);
                $path = '/static/upload/' . $name;
                $returndata  = array(
                    'filename' =&gt; $name,
                    'path' =&gt; $path
                );
                $result = [
                    'code' =&gt; 1,
                    'msg'  =&gt; '上传成功',
                    'time' =&gt; time(),
                    'data' =&gt; $returndata,
                ];
                return response()-&gt;json($result);
            }
            return $image-&gt;getErrorMessage();
        }
        return '文件上传失败';
    }</code></pre> 
<p>（5）在routes\web.php文件中内容的路由组中添加上传图片的路由规则。</p> 
<p>（6）通过浏览器访问测试。在添加内容时，单击“上传图片”按钮，选择一张图片进行上传。</p> 
<p>（7）由于图片文件通常都比较小，上传速度很快，为了更好地看到上传进度的变化，在浏览器的开发者工具中切换到“Network”面板。</p> 
<p>（8）更改网速后，选择图片进行上传，就可以看到图片的上传进度。</p> 
<p>（9）当上传完图片后，就会显示已经上传的图片。</p> 
<h3 id="4%E3%80%81%E6%98%BE%E7%A4%BA%E5%86%85%E5%AE%B9%E5%88%97%E8%A1%A8"><strong>4、显示内容列表</strong></h3> 
<p>（1）在Content控制器中编写index()方法。</p> 
<pre><code>public function index($id = 0)
    {
        $data = Category::orderBy('sort', 'asc')-&gt;get()-&gt;toArray();
        $cate = new CategoryController();
        $category = $cate-&gt;getTreeListCheckLeaf($data);
        $content = Content::get();
        if ($id) {
            $content = Content::where('cid', $id)-&gt;get();
        }
        return view('admin.content.index', ['category' =&gt; $category, 'content' =&gt; $content, 'cid' =&gt; $id]);
    }</code></pre> 
<p>（2）在展示内容时，需要显示内容对应的栏目，因此在Content模型中添加关联模型。</p> 
<pre><code>public function category()
    {
        return $this-&gt;belongsTo('App\Category', 'cid', 'id');
    }</code></pre> 
<p>（3）创建resources\views\admin\content\index.blade.php文件。</p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '内容列表')
@section('main')
  &lt;div class="main-title"&gt;&lt;h2&gt;内容管理&lt;/h2&gt;&lt;/div&gt;
  &lt;div class="main-section form-inline"&gt;
    &lt;a href="{<!-- -->{ url('content/add') }}" class="btn btn-success"&gt;+ 新增&lt;/a&gt;
    &lt;!-- 此处编写分类下拉菜单 --&gt;
    &lt;select class="j-select form-control" style="min-width:120px;margin-left:8px"&gt;
      &lt;option value="{<!-- -->{ url('content', ['id' =&gt; 0]) }}"&gt;所有分类&lt;/option&gt;
      @foreach($category as $v)
        @if($v['level'])
        &lt;option value="{<!-- -->{ url('content', ['d' =&gt; $v['id']]) }}" data-id="{<!-- -->{$v['id']}}"&gt;
          &lt;small class="text-muted"&gt;--&lt;/small&gt; {<!-- -->{$v['name']}}
        &lt;/option&gt;
        @else
        &lt;option value="{<!-- -->{ url('content', ['id' =&gt; $v['id']]) }}" data-id="{<!-- -->{$v['id']}}"&gt;
          {<!-- -->{$v['name']}}
        &lt;/option&gt;
        @endif
      @endforeach
    &lt;/select&gt;
  &lt;/div&gt;
  &lt;div class="main-section"&gt;
    &lt;form method="post" action="{<!-- -->{ url('category/sort')}}" class="j-form"&gt;
      &lt;table class="table table-striped table-bordered table-hover"&gt;
        &lt;thead&gt;
        &lt;tr&gt;
          &lt;th width="75"&gt;序号&lt;/th&gt;&lt;th&gt;分类&lt;/th&gt;&lt;th&gt;图片&lt;/th&gt;&lt;th&gt;标题&lt;/th&gt;
          &lt;th&gt;状态&lt;/th&gt;&lt;th&gt;创建时间&lt;/th&gt;&lt;th width="100"&gt;操作&lt;/th&gt;
        &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;
        @foreach($content as $v)
          &lt;!-- 此处编写内容列表代码 --&gt;
          &lt;tr class="j-pid-{<!-- -->{ $v-&gt;pid }}" @if($v-&gt;level)style="display:none"@endif&gt;
            &lt;td&gt;{<!-- -->{ $v-&gt;id }}&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ $v-&gt;category-&gt;name}}&lt;/td&gt;
            &lt;td&gt;&lt;img @if($v-&gt;image) src="/static/upload/{<!-- -->{ $v-&gt;image}}" @else src="{<!-- -->{asset('admin')}}/img/noimg.png" @endif width="50" height="50"&gt;&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ $v-&gt;title }}&lt;/td&gt;
            &lt;td&gt;@if($v-&gt;status==1) 默认  @else 推荐 @endif&lt;/td&gt;
            &lt;td&gt;{<!-- -->{ $v-&gt;created_at }}&lt;/td&gt;
            &lt;td&gt;&lt;a href="{<!-- -->{ url('content/edit', ['id' =&gt; $v-&gt;id ]) }}" style="margin-right:5px;"&gt;编辑&lt;/a&gt;
              &lt;a href="{<!-- -->{ url('content/delete', ['id' =&gt; $v-&gt;id ]) }}" class="j-del text-danger"&gt;删除&lt;/a&gt;
            &lt;/td&gt;
          &lt;/tr&gt;
        @endforeach
        @if(empty($content))
          &lt;tr&gt;&lt;td colspan="7" class="text-center"&gt;还没有添加内容&lt;/td&gt;&lt;/tr&gt;
        @endif
        &lt;/tbody&gt;
      &lt;/table&gt;
      {<!-- -->{csrf_field()}}
    &lt;/form&gt;
  &lt;/div&gt;
  &lt;script&gt;
    main.menuActive('content');
    $('.j-select').change(function() {
      location.href = $(this).val();
    });
    $('option[data-id=' + {<!-- -->{$cid}} + ']').attr('selected', true);
    $('.j-del').click(function() {
      if (confirm('您确定要删除此项？')) {
        var data = { _token: '{<!-- -->{ csrf_token() }}' };
        main.ajaxPost({url:$(this).attr('href'), data: data}, function(){
          location.reload();
        });
      }
      return false;
    });
  &lt;/script&gt;
@endsection</code></pre> 
<p>（4）在foreach中输出内容列表。</p> 
<p>（5）编写栏目下拉列表。</p> 
<p>（6）在页面的&lt;script&gt;标签中编写代码实现下拉列表的切换。</p> 
<p>（7）在routes\web.php中添加内容列表页的路由。</p> 
<pre><code>    Route::get('{id?}', 'ContentController@index');
</code></pre> 
<p>（8）修改admin.blade.php，为内容列表添加链接。通过浏览器访问，查看内容列表页面效果</p> 
<p><img alt="" src="https://images2.imgbox.com/68/4d/Yj2gRw49_o.png"></p> 
<h3 id="5%E3%80%81%E7%BC%96%E8%BE%91%E5%86%85%E5%AE%B9"><strong>5、编辑内容</strong></h3> 
<p>（1）在内容列表页面单击每条内容对应的“编辑”按钮，即可对此条内容进行编辑。</p> 
<pre><code>&lt;a href="{<!-- -->{ url('content/edit', ['id' =&gt; $v-&gt;id ]) }}" style="margin-right:5px;"&gt;编辑&lt;/a&gt;
</code></pre> 
<p>（2）在Content控制器中添加edit()方法。</p> 
<pre><code> public function edit(Request $request)
    {
        $id = $request-&gt;id;
        $data = Category::orderBy('sort', 'asc')-&gt;get()-&gt;toArray();
        $cate = new CategoryController();
        $category = $cate-&gt;getTreeListCheckLeaf($data);
        $content = Content::find($id);
        return view('admin.content.edit', ['category' =&gt; $category, 'content' =&gt; $content]);
    }</code></pre> 
<p>（3）修改save()方法，接收栏目id。</p> 
<p>（4）在routes\web.php文件中添加内容列表页的路由。</p> 
<pre><code>    Route::get('edit/{id}', 'ContentController@edit');
</code></pre> 
<p>（5）通过浏览器访问，观察编辑内容功能是否能正确执行。</p> 
<p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/16/5a/V3dVaDdA_o.png"></p> 
<p></p> 
<h3 id="6%E3%80%81%E5%88%A0%E9%99%A4%E5%86%85%E5%AE%B9"><strong>6、删除内容</strong></h3> 
<p>（1）在内容列表页面单击每条内容对应的“删除”按钮，即可删除此条内容，下面在内容列表页面中为“删除”按钮添加链接。</p> 
<p>（2）在routes\web.php文件中添加删除内容的路由。</p> 
<pre><code>    Route::post('delete/{id}', 'ContentController@delete');
</code></pre> 
<p>（3）在列表页中找到&lt;script&gt;标签。</p> 
<p>（4）在Content控制器中添加delete()方法。</p> 
<pre><code> public function delete($id)
    {
        if (!$content = Content::find($id)) {
            return response()-&gt;json(['code' =&gt; 0, 'msg' =&gt; '删除失败，记录不存在。' ]);
        }
        $content-&gt;delete();
        return response()-&gt;json(['code' =&gt; 1, 'msg' =&gt; '删除成功' ]);
    }</code></pre> 
<p>（5）通过浏览器访问，观察删除内容功能是否成功实现。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c0/30/KJRrdaBw_o.png"></p> 
<p></p> 
<h2 id="%C2%A0%E4%BA%94%E3%80%81%E5%B9%BF%E5%91%8A%E4%BD%8D%E7%AE%A1%E7%90%86"> 五、广告位管理</h2> 
<p>在网站中常会看到一些广告，这些广告都是在网站的广告位上显示的，目前，在网站建站需求中，添加广告信息已经是重要的需求，因此CMS提供了广告管理模块，广告管理模块主要包括广告位管理和广告内容管理，本节讲解广告位管理的实现。</p> 
<h3 id="%C2%A01%E3%80%81%E5%88%9B%E5%BB%BA%E5%B9%BF%E5%91%8A%E4%BD%8D%E8%A1%A8"> <strong>1、创建广告位表</strong></h3> 
<p>（1）创建广告位表对应的迁移文件后，在迁移文件的up()方法中添加表结构信息。广告位表的字段有id 和name（广告位名称）等字段。</p> 
<pre><code> public function up()
    {
        Schema::create('adv', function (Blueprint $table) {
            $table-&gt;increments('id')-&gt;comment('主键');
            $table-&gt;string('name', 32)-&gt;comment('广告位名称');
            $table-&gt;timestamps();
        });
    }</code></pre> 
<p>（2）创建广告位表对应的模型文件app\Adv.php。</p> 
<pre><code>php artisan make:model Adv</code></pre> 
<h3 id="2%E3%80%81%E6%B7%BB%E5%8A%A0%E5%B9%BF%E5%91%8A%E4%BD%8D"><strong>2、添加广告位</strong></h3> 
<p>（1）创建Adv控制器。</p> 
<pre><code>php artisan make:controller Admin\AdvController</code></pre> 
<p>（2）在控制器中添加add()方法，用于实现添加广告位的功能。</p> 
<pre><code>  public function add($id = 0){
        $data = [];
        if($id &gt; 0){
            $data = Adv::find($id);
        }
        return view('admin.adv.add', ['data' =&gt; $data]);
    }
 
    public function save(Request $request){
        $data = $request-&gt;all();
 
        $this-&gt;validate($request,[
            'name'=&gt;'required'
        ],[
            'name.require'=&gt;'名称不能为空'
        ]);
        if(isset($data['id'])){
            $id = $data['id'];
            unset($data['id']);
            unset($data['_token']);
            $res = Adv::where('id',$id)-&gt;update($data);
            $type = $res ? "message" : "tip";
            $message = $res ? "修改成功" : "修改失败";
            return redirect('adv')-&gt;with($type, $message);
        }
 
        $re = Adv::create($data);
        if($re){
            return redirect('adv')-&gt;with('message','添加成功');
        }else{
            return redirect('adv/add')-&gt;with('tip','添加失败');
        }
    }</code></pre> 
<p>（3）创建resources\views\admin\adv\add.blade.php视图文件。</p> 
<p>（4）在Adv控制器中添加save()方法保存添加的广告位。</p> 
<p>（5）在控制器中引入Adv的命名空间。</p> 
<pre><code>use App\Adv;
</code></pre> 
<p>（6）在routes\web.php中添加广告位管理的路由组。</p> 
<pre><code>//广告
Route::prefix('adv')-&gt;namespace('Admin')-&gt;middleware(['Admin'])-&gt;group(function () {
    Route::get('add/{id?}', 'AdvController@add');
    Route::post('save', 'AdvController@save');
});</code></pre> 
<p>（7）通过浏览器访问，观察添加广告位功能是否能正确执行。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/74/59/iZz70f5e_o.png"></p> 
<h4 id="%C2%A03%E3%80%81%E6%98%BE%E7%A4%BA%E3%80%81%E7%BC%96%E8%BE%91%E3%80%81%E5%88%A0%E9%99%A4%E5%B9%BF%E5%91%8A%E4%BD%8D%E5%88%97%E8%A1%A8"> 3、显示、编辑、删除广告位列表</h4> 
<p>（1）修改admin.blade.php，为广告位菜单项添加链接。</p> 
<pre><code>&lt;a href="{<!-- -->{url('adv')}}" data-name="adv"&gt;
    &lt;i class="fa fa-list fa-fw"&gt;&lt;/i&gt;广告位&lt;/a&gt;</code></pre> 
<p>（2）在routes\web.php 中添加广告位列表的路由。</p> 
<pre><code>    Route::get('', 'AdvController@index');
    route::post('delete/{id}','AdvController@delete');</code></pre> 
<p>（3）在Adv控制器中编写index()和delete()方法。</p> 
<pre><code>public function index(){
        $adv = Adv::all();
        return view('admin.adv.index', ['adv' =&gt; $adv]);
    }
 
 public function delete($id){
 
        if (!$content = Adv::find($id)) {
            return response()-&gt;json(['code' =&gt; 0, 'msg' =&gt; '删除失败，记录不存在。' ]);
        }
        if(Advcontent::where('advid', '=', $id)-&gt;exists()){
            return response()-&gt;json(['code' =&gt; 0, 'msg' =&gt; '该广告位下有广告记录，请先删除广告内容。' ]);
        }
        $content-&gt;delete();
 
        return response()-&gt;json(['code' =&gt; 1, 'msg' =&gt; '删除成功' ]);
    }</code></pre> 
<p>（4）创建index.blade.php文件。</p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '广告位列表')
@section('main')
&lt;div class="main-title"&gt;&lt;h2&gt;广告位管理&lt;/h2&gt;&lt;/div&gt;
&lt;div class="main-section form-inline"&gt;
  &lt;a href="{<!-- -->{ url('adv/add') }}" class="btn btn-success"&gt;+ 新增&lt;/a&gt;
&lt;/div&gt;
&lt;div class="main-section"&gt;
  &lt;table class="table table-striped table-bordered table-hover"&gt;
    &lt;thead&gt;
      &lt;tr&gt;
        &lt;th width="75"&gt;序号&lt;/th&gt;&lt;th&gt;广告位名称&lt;/th&gt;&lt;th width="100"&gt;操作&lt;/th&gt;
      &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
      &lt;!-- 广告位列表--&gt;
      @foreach($adv as $v)
      &lt;tr class="j-pid-{<!-- -->{ $v['pid'] }}"&gt;
        &lt;td&gt;&lt;input type="text" value="{<!-- -->{$v-&gt;id}}" class="form-control j-sort" maxlength="5" style="height:25px;font-size:12px;padding:0 5px;"&gt;&lt;/td&gt;
        &lt;td&gt;{<!-- -->{$v-&gt;name}}&lt;/td&gt;
        &lt;td&gt;
          &lt;a href="{<!-- -->{ url('adv/add', ['id' =&gt; $v-&gt;id]) }}" style="margin-right:5px;"&gt;编辑&lt;/a&gt;
          &lt;a href="{<!-- -->{ url('adv/delete', ['id' =&gt; $v-&gt;id]) }}" class="j-del text-danger"&gt;删除&lt;/a&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
      @endforeach
      @if(empty($adv))
      &lt;tr&gt;&lt;td colspan="4" class="text-center"&gt;还没有添加广告位&lt;/td&gt;&lt;/tr&gt;
      @endif
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/div&gt;
&lt;script&gt;
main.menuActive('adv');
$('.j-del').click(function() {
    if (confirm('您确定要删除此项？')) {
    var data = { _token: '{<!-- -->{ csrf_token() }}' };
    main.ajaxPost({url:$(this).attr('href'), data: data}, function(){
        location.reload();
    });
    }
    return false;
});
&lt;/script&gt;
@endsection</code></pre> 
<p>（5）在视图中输出广告位列表。</p> 
<p>（6）通过浏览器访问，查看广告列列表的页面效果。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2c/b7/wZttLBmW_o.png"></p> 
<p></p> 
<h2 id="%E5%85%AD%E3%80%81%E5%B9%BF%E5%91%8A%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86">六、广告内容管理</h2> 
<p>在内容管理系统中，添加广告内容时需要选择广告所属的广告位，从而设置广告的显示位置。在前面章节中已经介绍了广告位模块的开发，下面对广告内容管理模块的功能进行详细讲解。</p> 
<h3 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B9%BF%E5%91%8A%E5%86%85%E5%AE%B9%E8%A1%A8"><strong>1、创建广告内容表</strong></h3> 
<p>（1）创建广告内容表的迁移文件后，在迁移文件的 up()方法中添加表结构信息。</p> 
<pre><code>public function up()
    {
        Schema::create('adcontent', function (Blueprint $table) {
            $table-&gt;increments('id')-&gt;comment('主键');
            $table-&gt;integer('advid')-&gt;comment('广告位id');
            $table-&gt;integer('path')-&gt;comment('图片路径');
            $table-&gt;timestamps();
        });
 
    }</code></pre> 
<p>（2）创建内容表对应的模型文件。</p> 
<pre><code>php artisan make:model Advcontent</code></pre> 
<p>（3）打开自动创建的app\Advcontent.php模型文件，对模型进行配置。</p> 
<pre><code>&lt;?php
 
namespace App;
 
use Illuminate\Database\Eloquent\Model;
 
class Advcontent extends Model
{
    protected $table = "adcontent";
    public $fillable = ['advid','path'];
}</code></pre> 
<h3 id="2.%E6%B7%BB%E5%8A%A0%E3%80%81%E6%98%BE%E7%A4%BA%E3%80%81%E7%BC%96%E8%BE%91%E3%80%81%E5%88%A0%E9%99%A4%E5%B9%BF%E5%91%8A">2、添加、显示、编辑、删除广告</h3> 
<p>(1)创建<strong>Advcontent</strong>控制器，具体代码如下：</p> 
<pre><code>php artisan make:controller Admin\AdvcontentController</code></pre> 
<p>(2)在控制器中添加<strong>add()</strong>方法用于实现添加广告的功能，添加<strong>save()</strong>方法用于保存广告内容，添加<strong>upload()</strong>方法用于保存上传的广告图片，添加<strong>index()</strong>方法，添加<strong>delete()</strong>方法，具体代码如下： </p> 
<pre><code>public function add($id = 0){
        $data = [];
        if($id &gt; 0){
            $data = Advcontent::find($id);
            if($data['path']){
                $data['path'] = explode("|", $data['path']);
            }else{
                $data['path'] = [];
            }
        }
        $position = Adv::all();
        return view('admin.advcontent.add', ['data' =&gt; $data, 'position' =&gt; $position]);
    }
 
    public function save(Request $request){
        $data = $request-&gt;all();
        $path = '';
        foreach($data['path'] as $v){
            $path .= $v . "|";
        }
        $data['path'] = substr($path,0,-1);
        if(isset($data['id'])){
            $id = $data['id'];
            unset($data['id']);
            unset($data['_token']);
            $res = Advcontent::where('id',$id)-&gt;update($data);
            $type = $res ? "message" : "tip";
            $message = $res ? "修改成功" : "修改失败";
            return redirect('advcontent')-&gt;with($type, $message);
        }
 
        $re = Advcontent::create($data);
        if($re){
            return redirect('advcontent')-&gt;with('message','添加成功');
        }else{
            return redirect('advcontent/add')-&gt;with('tip','添加失败');
        }
    }
 
    public function upload(Request $request){
        if ($request-&gt;hasFile('image')) {
            $image = $request-&gt;file('image');
            if ($image-&gt;isValid()) {
                $name = md5(microtime(true)) . '.' . $image-&gt;extension();
                $image-&gt;move('static/upload', $name);
                $path = '/static/upload/' . $name;
                $returndata  = array(
                    'filename' =&gt; $name,
                    'path' =&gt; $path
                );
                $result = [
                    'code' =&gt; 1,
                    'msg'  =&gt; '上传成功',
                    'time' =&gt; time(),
                    'data' =&gt; $returndata,
                ];
 
                return response()-&gt;json($result);
            }
            return $image-&gt;getErrorMessage();
        }
        return '文件上传失败';
 
    }
 
    public function index(){
        $adv = Advcontent::all();
        foreach($adv as $v){
            if($v['path']){
                $v['path'] = explode("|", $v['path']);
            }else{
                $v['path'] = [];
            }
        }
        return view('admin.advcontent.index', ['adv' =&gt; $adv]);
    }
 
    public function delete($id){
        if (!$content = Advcontent::find($id)) {
            return response()-&gt;json(['code' =&gt; 0, 'msg' =&gt; '删除失败，记录不存在。' ]);
        }
        $content-&gt;delete();
        return response()-&gt;json(['code' =&gt; 1, 'msg' =&gt; '删除成功' ]);
    }</code></pre> 
<p>(3)在控制器中引入广告位的命名空间，具体代码如下： </p> 
<pre><code>use App\Advcontent;
use App\Adv;</code></pre> 
<p>(4)创建<strong>resources\views\admin\advcontent\add.blade.php</strong>视图文件，具体代码如下： </p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '添加广告')
@section('main')
&lt;div class="main-title"&gt;&lt;h2&gt;&lt;div class="main-title"&gt;&lt;h2&gt;@if(!empty($data))编辑@else添加@endif广告&lt;/h2&gt;&lt;/div&gt;
&lt;div class="main-section"&gt;
  &lt;div style="width:543px"&gt;
    &lt;form method="post" action="{<!-- -->{ url('/advcontent/save') }}"&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-3 col-form-label"&gt;选择广告位&lt;/label&gt;
        &lt;div class="col-sm-9"&gt;
          &lt;!-- 广告位列表 --&gt;
          &lt;select name="advid" class="form-control" style="width:200px;"&gt;
            @foreach ($position as $v)
            &lt;option value="{<!-- -->{ $v-&gt;id }}" @if(isset($data-&gt;advposid) &amp;&amp; $data-&gt;advposid == $v-&gt;id) selected @endif&gt;
              {<!-- -->{ $v-&gt;name }}
            &lt;/option&gt;
            @endforeach
          &lt;/select&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;label class="col-sm-3 col-form-label"&gt;上传图片&lt;/label&gt;
        &lt;div class="col-sm-9"&gt;
          &lt;input type="file" id="file1" name="path" value="上传图片"&gt;
        &lt;/div&gt;
        &lt;div class="col-sm-9 offset-sm-3"&gt;
          &lt;div class="upload-img-box" id="uploadImg"&gt;
            @if(isset($data-&gt;path))
            &lt;div class="upload-pre-item" style="max-height:100%;"&gt;
                @foreach ($data-&gt;path as $val)
                &lt;img src="/static/upload/{<!-- -->{$val}}"
                    style="width:100px;height:100px"/&gt;
                &lt;input type="hidden" name="path[]" value="{<!-- -->{$val}}"
                        class="icon_banner"/&gt;
                @endforeach
            &lt;/div&gt;
            @endif
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class="form-group row"&gt;
        &lt;div class="col-sm-9"&gt;
          {<!-- -->{csrf_field()}}
          @if(isset($data['id'])) &lt;input type="hidden" name="id" value="{<!-- -->{$data-&gt;id}}"&gt; @endif
          &lt;button type="submit" class="btn btn-primary mr-2"&gt;提交表单&lt;/button&gt;
          &lt;a href="{<!-- -->{ url('advcontent') }}" class="btn btn-secondary"&gt;返回列表&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/form&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;link href="{<!-- -->{asset('admin')}}/common/uploader/uploadifive.css" rel="stylesheet" /&gt;
&lt;script src="{<!-- -->{asset('admin')}}/common/uploader/jquery.uploadifive.js"&gt;&lt;/script&gt;
&lt;script&gt;
main.menuActive('advcontent');
$(function(){
  $('#file1').uploadifive({
    'auto'       : true,
    'fileObjName'    : 'image',
    'fileType'     : 'image',
    'buttonText'     : '上传图片',
    'formData'     : { '_token' : "{<!-- -->{ csrf_token() }}" },
    'method'       : 'post',
    'queueID'      : 'uploadImg',
    'removeCompleted'  : true,
    'uploadScript'   : '{<!-- -->{ url('advcontent/upload')}}',
    'onUploadComplete' : uploadPicture_icon
  });
});
function uploadPicture_icon(file, data) {
  var obj = $.parseJSON(data);
  var src = '';
  if (obj.code) {
    filename = obj.data.filename;
    path = obj.data.path;
    if ($('.upload-pre-item').length &gt; 0) {
        $('.upload-pre-item').append(
            '&lt;img src="' + path + '" style="width:100px;height:100px"/&gt; &lt;input type="hidden" name="path[]" value="'+filename+'" class="icon_banner"/&gt;'
        );
    } else {
      $('.upload-img-box').append(
        '&lt;div class="upload-pre-item" style="max-height:100%;"&gt;&lt;img src="' + path + '" style="width:100px;height:100px"/&gt; &lt;input type="hidden" name="path[]" value="'+filename+'" class="icon_banner"/&gt;&lt;/div&gt;'
      );
    }
  } else {
    alert(data.info);
  }
}
&lt;/script&gt;
@endsection</code></pre> 
<p>(5)创建<strong>index.php</strong>文件，具体代码如下： </p> 
<pre><code>@extends('admin/layouts/admin')
@section('title', '广告内容管理')
@section('main')
&lt;div class="main-title"&gt;&lt;h2&gt;广告内容管理&lt;/h2&gt;&lt;/div&gt;
&lt;div class="main-section form-inline"&gt;
  &lt;a href="{<!-- -->{ url('advcontent/add') }}" class="btn btn-success"&gt;+ 新增&lt;/a&gt;
&lt;/div&gt;
&lt;div class="main-section"&gt;
  &lt;table class="table table-striped table-bordered table-hover"&gt;
    &lt;thead&gt;
    &lt;tr&gt;
      &lt;th width="75"&gt;序号&lt;/th&gt;&lt;th&gt;广告位名称&lt;/th&gt;&lt;th&gt;广告图片&lt;/th&gt;&lt;th width="100"&gt;操作&lt;/th&gt;
    &lt;/tr&gt;
    &lt;/thead&gt;
    &lt;tbody&gt;
    &lt;!-- 广告位列表 --&gt;
    @foreach($adv as $v)
      &lt;tr class="j-pid-{<!-- -->{ $v['pid'] }}"&gt;
        &lt;td&gt;&lt;input type="text" value="{<!-- -->{$v-&gt;id}}" class="form-control j-sort" maxlength="5" style="height:25px;font-size:12px;padding:0 5px;"&gt;&lt;/td&gt;
        &lt;td&gt;{<!-- -->{$v-&gt;position-&gt;name}}&lt;/td&gt;
        &lt;td&gt;
          @foreach($v-&gt;path as $val)
            &lt;img src="/static/upload/{<!-- -->{$val}}" style="height:40px;width: 50px"&gt;
          @endforeach
        &lt;/td&gt;
        &lt;td&gt;&lt;a href="{<!-- -->{ url('advcontent/add', ['id' =&gt; $v-&gt;id]) }}" style="margin-right:5px;"&gt;编辑&lt;/a&gt;
          &lt;a href="{<!-- -->{ url('advcontent/delete', ['id' =&gt; $v-&gt;id]) }}" class="j-del text-danger"&gt;删除&lt;/a&gt;
        &lt;/td&gt;
      &lt;/tr&gt;
    @endforeach
    @if(empty($adv))
      &lt;tr&gt;&lt;td colspan="4" class="text-center"&gt;还没有添加广告内容&lt;/td&gt;&lt;/tr&gt;
    @endif
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/div&gt;
&lt;script&gt;
  main.menuActive('advcontent');
  $('.j-del').click(function() {
    if (confirm('您确定要删除此项？')) {
      var data = { _token: '{<!-- -->{ csrf_token() }}' };
      main.ajaxPost({url:$(this).attr('href'), data: data}, function(){
        location.reload();
      });
    }
    return false;
  });
&lt;/script&gt;
@endsection</code></pre> 
<p>(6)在<strong>routes\web.php</strong>中添加广告位管理的路由组，具体代码如下： </p> 
<pre><code>//广告列表
Route::prefix('advcontent')-&gt;namespace('Admin')-&gt;middleware(['Admin'])-&gt;group(function () {
    Route::get('add/{id?}', 'AdvcontentController@add');
    Route::post('save', 'AdvcontentController@save');
    Route::post('upload','AdvcontentController@upload');
    Route::get('', 'AdvcontentController@index');
    route::post('delete/{id}','AdvcontentController@delete');
});</code></pre> 
<p>(7)修改<strong>app\Advcontent.php</strong>，设置关联模型，获取广告位信息，具体代码如下：</p> 
<pre><code>  public function position()
    {
        return $this-&gt;belongsTo('App\Adv', 'advid', 'id');
    }</code></pre> 
<p>（8）在Adv控制器中引入Advcontent的命名空间，具体代码如下：</p> 
<pre><code>use App\Content;</code></pre> 
<p>(9)通过浏览器访问，可以对广告内容进行显示、编辑、删除的操作。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/97/9e/JpVVB0u0_o.png"></p> 
<p></p> 
<h2 id="%E4%B8%83%E3%80%81%20%E6%80%BB%E7%BB%93">七、 总结</h2> 
<blockquote> 
 <h3 id="1%E3%80%81%E5%AD%A6%E4%B9%A0laravel%E7%9A%84%E9%9A%BE%E7%82%B9">1、学习laravel的难点</h3> 
 <p>MVC 模式：Laravel 是一个基于 MVC 模式的 Web 框架，它将应用程序分为三部分：模型（Model）、视图（View）和控制器（Controller）。掌握 MVC 模式并理解如何在 Laravel 中使用它需要比较长时间的学习和实践。</p> 
 <p></p> 
 <p>命名空间和自动加载：Laravel 使用 Composer 的自动加载机制来加载所有类和文件。这意味着你需要理解 Laravel 应用程序的命名空间和 Composer 自动加载器的工作原理。</p> 
 <p></p> 
 <p>Eloquent ORM：Laravel 的 Eloquent ORM 是一个功能强大的 ORM 工具，用于在应用程序和数据库之间进行交互。你需要熟悉 Eloquent ORM 的API和查询语法才能有效地使用它。</p> 
 <p></p> 
 <p>Blade 模板引擎：Laravel 使用 Blade 模板引擎来生成 HTML 响应。你需要理解 Blade 的基本语法、模板继承和控制指令。</p> 
 <p></p> 
 <p>artisan 命令行工具：Laravel 的 artisan 命令行工具提供了许多便捷的命令，如数据库迁移、生成模型、生成控制器等。你需要了解如何使用和扩展这些命令。</p> 
</blockquote> 
<blockquote> 
 <h3 id="2%E3%80%81%E5%AD%A6%E4%B9%A0laravel%E6%94%B6%E8%8E%B7%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88">2、学习laravel收获到了什么</h3> 
 <p>熟练掌握流行的PHP框架。Laravel是一个流行的PHP框架，熟练掌握它可以让你成为一名优秀的PHP开发人员，并拥有更好的职业前景。</p> 
 <p></p> 
 <p>更高效的开发。Laravel提供了许多有用的工具和插件，可以帮助开发人员更快地开发Web应用程序和API，并提高开发效率。</p> 
 <p></p> 
 <p>构建高质量的Web应用程序和API。Laravel提供了许多有用的功能，例如身份验证、授权、缓存、队列处理和命令行工具等，可以帮助开发人员构建高质量的Web应用程序和API。</p> 
 <p></p> 
 <p>学习面向对象编程。Laravel采用了面向对象编程的方法，让开发人员更好地理解OO编程的概念和原则，并增强了代码的可重用性和可维护性。</p> 
 <p></p> 
 <p>参与到开源社区中。Laravel是一个开源框架，并拥有庞大的社区。学习Laravel可以帮助你更好地参与到开源社区中，并与其他开发人员合作学习和交流。</p> 
</blockquote> 
<blockquote> 
 <h3 id="%C2%A03%E3%80%81%E5%86%85%E5%AE%B9%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E5%BF%83%E5%BE%97%E6%80%BB%E7%BB%93"> 3、内容管理系统项目心得总结</h3> 
 <p>       内容管理系统项目的学习，让我掌握了内容管理系统中常见的功能的开发，理解框架在开发中的作用，体会项目开发的完整流程 ，能够根据实际需要对项目中的功能进行修改和扩展，为以后开发更加复杂的项目打下基础。</p> 
 <p>        通过laravel框架实现内容管理系统项目，我深刻认识到了Laravel框架的优秀特性。它不仅提供了丰富的功能集，同时也能够大大提高开发效率和代码可读性，并且在安全方面也考虑得非常周到。</p> 
 <p>        总之，使用 <a href="https://so.csdn.net/so/search?q=Laravel&amp;spm=1001.2101.3001.7020" title="Laravel">Laravel</a> 框架实现内容管理系统可以带来很多便利和灵活性，同时也需要注意安全性和性能优化等问题。Laravel 框架提供了丰富的组件和工具，使得内容管理系统的开发变得更加简单和高效。以上就是我对laravel框架学习的心得体会<br><br>  </p> 
</blockquote> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f5947c2f42bc9b70108b11dd6e2be9e2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux 下 telnet 的替代方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/144dddd19ba843d13cd2efc76e2bd1e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">uni-app优乐购商城小程序搭建</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>