<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue&#43;element-ui实现搜索文字并高亮定位显示 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue&#43;element-ui实现搜索文字并高亮定位显示" />
<meta property="og:description" content="首先看一下效果，定位到画布上的节点
先上代码
代码模块1
// 搜索框html代码 &lt;el-input placeholder=&#34;请输入节点名称&#34; prefix-icon=&#34;el-icon-search&#34; v-model=&#34;searchNodeInput&#34; @input=&#34;changeSearchNodeInput&#34; @keyup.down.native=&#34;inputDown&#34; @keyup.up.native=&#34;inputUp&#34; @keyup.enter.native=&#34;inputDown&#34; clearable &gt; &lt;template slot=&#34;append&#34;&gt; &lt;div class=&#34;searchRight&#34;&gt; &lt;span class=&#34;item&#34;&gt;{{nowNum}}/{{totalNum}}&lt;/span&gt; &lt;el-tooltip class=&#34;item&#34; effect=&#34;dark&#34; content=&#34;上一个&#34; placement=&#34;top&#34;&gt; &lt;el-button @click=&#34;inputUp&#34; :disabled=&#34;inputUpDisable&#34; icon=&#34;el-icon-arrow-up&#34; circle type=&#34;text&#34;&gt;&lt;/el-button&gt; &lt;/el-tooltip&gt; &lt;el-tooltip class=&#34;item&#34; effect=&#34;dark&#34; content=&#34;下一个&#34; placement=&#34;top&#34;&gt; &lt;el-button @click=&#34;inputDown&#34; :disabled=&#34;inputDownDisable&#34; icon=&#34;el-icon-arrow-down&#34; circle type=&#34;text&#34;&gt;&lt;/el-button&gt; &lt;/el-tooltip&gt; &lt;/div&gt; &lt;/template&gt; &lt;/el-input&gt; 其中涉及到的@keyup事件
代码模块2
// 上一个 inputUp () { if (this.totalNum &gt;= 1) { this.inputUpDisable = false if (this.currentNodeIndex === 0) { this.currentNodeIndex = Number(this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a614928e924293701be2ab501f528c87/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-05T11:36:14+08:00" />
<meta property="article:modified_time" content="2020-06-05T11:36:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue&#43;element-ui实现搜索文字并高亮定位显示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>首先看一下效果，定位到画布上的节点<br> <img src="https://images2.imgbox.com/8f/09/B2CwUN4y_o.png" alt="在这里插入图片描述"><br> 先上代码<br> <mark>代码模块1</mark></p> 
<pre><code>// 搜索框html代码
&lt;el-input
	placeholder="请输入节点名称"
	prefix-icon="el-icon-search"
	v-model="searchNodeInput"
	@input="changeSearchNodeInput"
	@keyup.down.native="inputDown"
	@keyup.up.native="inputUp"
	@keyup.enter.native="inputDown"
	clearable
	&gt;
	&lt;template slot="append"&gt;
	  &lt;div class="searchRight"&gt;
	    &lt;span class="item"&gt;{<!-- -->{nowNum}}/{<!-- -->{totalNum}}&lt;/span&gt;
	    &lt;el-tooltip class="item" effect="dark" content="上一个" placement="top"&gt;
	      &lt;el-button @click="inputUp" :disabled="inputUpDisable" icon="el-icon-arrow-up" circle type="text"&gt;&lt;/el-button&gt;
	    &lt;/el-tooltip&gt;
	    &lt;el-tooltip class="item" effect="dark" content="下一个" placement="top"&gt;
	      &lt;el-button @click="inputDown" :disabled="inputDownDisable" icon="el-icon-arrow-down" circle type="text"&gt;&lt;/el-button&gt;
	    &lt;/el-tooltip&gt;
	  &lt;/div&gt;
	&lt;/template&gt;
&lt;/el-input&gt;
</code></pre> 
<p>其中涉及到的@keyup事件<br> <img src="https://images2.imgbox.com/cd/a5/zL9ZZcOD_o.png" alt="在这里插入图片描述"><br> <mark>代码模块2</mark></p> 
<pre><code>// 上一个
    inputUp () {
      if (this.totalNum &gt;= 1) {
        this.inputUpDisable = false
        if (this.currentNodeIndex === 0) {
          this.currentNodeIndex = Number(this.totalNum) - 1
          this.nowNum = String(this.currentNodeIndex + 1)
          this.currentLabel = this.nodeSearchArr[this.currentNodeIndex].label
        } else {
          this.currentNodeIndex = this.currentNodeIndex - 1
          this.nowNum = String(this.currentNodeIndex + 1)
          this.currentLabel = this.nodeSearchArr[this.currentNodeIndex].label
        }
      } else {
        // 这里向上的按钮要disable掉
        this.inputUpDisable = true
      }
    },
    // 下一个
    inputDown () {
      if (this.totalNum &gt;= 1) {
        this.inputDownDisable = false
        if (this.currentNodeIndex === this.totalNum - 1) {
          this.currentNodeIndex = 0
          this.nowNum = String(this.currentNodeIndex + 1)
          this.currentLabel = this.nodeSearchArr[this.currentNodeIndex].label
        } else {
          this.currentNodeIndex = this.currentNodeIndex + 1
          this.nowNum = String(this.currentNodeIndex + 1)
          this.currentLabel = this.nodeSearchArr[this.currentNodeIndex].label
        }
      } else {
        // 这里向下的按钮要disable掉
        this.inputDownDisable = true
      }
    },
    // 改变搜索框中的值
    changeSearchNodeInput (value) {
      const Reg = new RegExp(value, 'i')
      const arr = []
      for (const i of this.nodesData.nodeList) {
        if (i.label.search(Reg) !== -1) {
          arr.push(i)
        }
      }
      this.nodeSearchArr = arr
      this.totalNum = arr.length
      if (this.totalNum &gt;= 1) {
        this.nowNum = '1'
        this.currentLabel = arr[0].label
        this.currentNodeIndex = 0
        this.inputUpDisable = false
        this.inputDownDisable = false
      } else {
        this.nowNum = '0'
        this.inputUpDisable = true
        this.inputDownDisable = true
      }
    },
</code></pre> 
<p>然后在画布上的节点上需要</p> 
<p><mark>代码模块3</mark></p> 
<pre><code>&lt;div
   v-html="brightenKeyword(node.label, searchNodeInput)"
   class="node-label-failure"
 &gt;
   {<!-- -->{ node.label }}
 &lt;/div&gt;
</code></pre> 
<p><mark>代码模块4</mark></p> 
<pre><code>	// node节点搜索高亮
    brightenKeyword(val, keyword) {
      // 方法1：筛选变色（区分大小写）
      // val = val + '';
      // if (val.indexOf(keyword) !== -1 &amp;&amp; keyword !== '') {
      //   if (val === this.currentNodeLabel) {
      //     const resCurrent = val.replace(keyword, `&lt;span style="color: #000;background-color: orange;"&gt;${keyword}&lt;/span&gt;`)
      //     return resCurrent
      //   } else {
      //     const res = val.replace(keyword, `&lt;span style="color: #000;background-color: yellow;"&gt;${keyword}&lt;/span&gt;`)
      //     return res
      //   }
      // } else {
      //   return val
      // }
      // 方法2：用正则表达式 （不区分大小写）
      const Reg = new RegExp(keyword, 'i')
      if (val) {
        if (val === this.currentNodeLabel) {
          // 这里为什么使用$&amp;不使用keyword，因为这里使用正则表达式不区分大小写，如果是文本时大写，搜索的关键字是小写也是会被匹配的，这样匹配替换掉的话，文本内的文字会被替换成搜索的keyword，也就是改成了小写，这样不太合理
          // const resCurrent = val.replace(Reg, `&lt;span style="color: #000;background-color: orange;"&gt;${keyword}&lt;/span&gt;`)
          const resCurrent = val.replace(Reg, `&lt;span style="color: #000;background-color: orange;"&gt;$&amp;&lt;/span&gt;`)
          return resCurrent
        } else {
          const res = val.replace(Reg, `&lt;span style="color: #000;background-color: yellow;"&gt;$&amp;&lt;/span&gt;`)
          return res
        }
      }
    },
</code></pre> 
<p>代码中的currentNodeLabel是从父节点传过来的，因为开发过程中节点是单独抽离的组件，然后这里的val === this.currentNodeLabel是为了判断当前定位的是哪一个node节点，进行不同的高亮与定位。</p> 
<p>我的操作流程是先用“代码模块1”和“代码模块3和4”实现的高亮，这个很简单，但是后面需要定位到当前的节点，并且可以上下翻动，因此增加了代码模块2也修改了一点代码模块1和4</p> 
<p>主要参考了这两篇文章实现<br> 1、https://blog.csdn.net/qq_35366269/article/details/94390643 vue中的keyup事件<br> 2、https://blog.csdn.net/weixin_43961899/article/details/100580629 这篇参考了通过按键触发节点定位<br> 3、https://blog.csdn.net/qq_38543537/article/details/96426047 搜索及高亮参考这篇文章</p> 
<p>还有一些知识需要查看JS相关的知识<br> <img src="https://images2.imgbox.com/f9/c1/qHjKkWnW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/08/2f/g4iwxE0A_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cb43d5df1066b95a94768c5a8bc128ab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java并发学习笔记（九）：Semaphore、CountdownLatch、CyclicBarrier</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/00e7afdd036ce5e02cf8f15b2e794702/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">随机矩阵stochastic matrix和双随机矩阵 doubly stochastic matrix 和bistochastic matrix</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>