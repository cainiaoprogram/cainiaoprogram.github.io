<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用vue&#43;el-upload&#43;new FormData()实现多图片上传 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用vue&#43;el-upload&#43;new FormData()实现多图片上传" />
<meta property="og:description" content="用vue&#43;el-upload&#43;new FormData()实现多图片上传
如图
&lt;div class=&#34;relicsImage_content&#34;&gt; &lt;el-upload class=&#34;upload_reilcimg&#34; ref=&#34;uploadImg&#34; :action=&#34;baseurl &#43; &#39;/antique/batch_img&#39;&#34; list-type=&#34;picture-card&#34; :headers=&#34;headers&#34; :before-upload=&#34;beforeAvatarUploadMore&#34; :on-success=&#34;handleAvatarSuccess&#34; :on-remove=&#34;handleRemove&#34; :on-change=&#34;changeUpload&#34; :show-file-list=&#34;true&#34; accept=&#34;image/png, image/jpeg, application/pdf&#34; :multiple=&#34;true&#34; :auto-upload=&#34;false&#34; &gt; &lt;i class=&#34;el-icon-plus&#34; /&gt; &lt;/el-upload&gt; &lt;p style=&#34;font-size: 12px; color: #ccc; margin-top: 20px&#34;&gt; 可上传pdf、jpg、jpeg、png格式，不能超过50M &lt;/p&gt; &lt;/div&gt; &lt;div&gt; &lt;el-button type=&#34;primary&#34; @click=&#34;uploadSumit()&#34;&gt;确定&lt;/el-button&gt; &lt;el-button @click=&#34;reset()&#34;&gt;重置&lt;/el-button&gt; &lt;/div&gt; data() { return { ssd: [], isActive: false, forma: { copyReportCode: &#34;&#34;, }, list: [], page: 1, limit: 5, // total: 0, id: &#34;&#34;, //代表选中某一行的id multipleSelection: [], uploadMoreimg: { fileList: [], }, url: this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b74f84c89455510e6ffb87e4b9c9feee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-02T17:39:07+08:00" />
<meta property="article:modified_time" content="2022-09-02T17:39:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用vue&#43;el-upload&#43;new FormData()实现多图片上传</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>用vue+el-upload+new FormData()实现多图片上传<br> 如图<br> <img src="https://images2.imgbox.com/6c/37/vnozsBQs_o.png" alt="在这里插入图片描述"></p> 
<pre><code>   &lt;div class="relicsImage_content"&gt;
      &lt;el-upload
        class="upload_reilcimg"
        ref="uploadImg"
        :action="baseurl + '/antique/batch_img'"
        list-type="picture-card"
        :headers="headers"
        :before-upload="beforeAvatarUploadMore"
        :on-success="handleAvatarSuccess"
        :on-remove="handleRemove"
        :on-change="changeUpload"
        :show-file-list="true"
        accept="image/png, image/jpeg, application/pdf"
        :multiple="true"
        :auto-upload="false"
      &gt;
        &lt;i class="el-icon-plus" /&gt;
      &lt;/el-upload&gt;
      &lt;p style="font-size: 12px; color: #ccc; margin-top: 20px"&gt;
        可上传pdf、jpg、jpeg、png格式，不能超过50M
      &lt;/p&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;el-button type="primary" @click="uploadSumit()"&gt;确定&lt;/el-button&gt;
      &lt;el-button @click="reset()"&gt;重置&lt;/el-button&gt;
    &lt;/div&gt;
</code></pre> 
<pre><code>  data() {
    return {
      ssd: [],
      isActive: false,
      forma: {
        copyReportCode: "",
      },
      list: [],
      page: 1,
      limit: 5, //
      total: 0,
      id: "", //代表选中某一行的id
      multipleSelection: [],
      uploadMoreimg: {
        fileList: [],
      },
      url: this.baseurl + "/antique_levy/upload",
      headers: {
        Authorization: sessionStorage.getItem("token"),
      },
    };
  },
  created() {},
  methods: {
    reset() {
      this.$refs.uploadImg.clearFiles();
    },
    uploadSumit() {
      // 创建新的数据对象
      let formData = new FormData();
      // 将上传的文件放到数据对象中
      this.uploadMoreimg.fileList.forEach((file) =&gt; {
        formData.append("file", file.raw);
      });
      console.log("提交前", formData.getAll("file"));
      // 自定义上传
      this.axios
        .post("/antique/batch_img", formData)
        .then((response) =&gt; {
          console.log(response);
          this.isshowMoreimg = false;
          // if(response.code == 200){
          //   this.$refs.uploadImg.clearFiles();
          //   this.msgSuccess('上传成功！');
          // }else{
          //   this.$message.error(response.msg);
          // }
        })
        .catch((error) =&gt; {
          this.$message.error("上传失败！");
        });
    },
    openDialog(employeeId) {
      this.isshowMoreimg = true;
    },
    downLoad(row) {
      this.downloadByA({
        url: this.baseurl + "/collection_copy_report/print?id=" + row.id,
        name: "藏品编目",
      });
    },
    downloadByA({ url, name = "temp" }) {
      // 生成一个a元素
      const a = document.createElement("a");
      // 创建一个单击事件
      const event = new MouseEvent("click");
      // 设置图片名称
      a.download = name;
      // 如果跳转页面，则在其他页面跳转
      a.target = "_blank";
      // 将生成的URL设置为a.href属性
      a.href = url;
      // 触发a的单击事件
      a.dispatchEvent(event);
    },

    // 上传之前
    beforeAvatarUploadMore(file) {
      const isJPG = file.type === "image/jpeg";
      const isPng = file.type === "image/png";
      const isPdf = file.type === "application/pdf";
      //   const isLt50M = file.size / 1024 / 1024 &lt; 50;
      //   if (!isLt50M) {
      //     this.$message.warning("上传文件大小不能超过 50MB!");
      //     return false;
      //   }
      //   if (!isJPG &amp;&amp; !isPng &amp;&amp; !isPdf) {
      //     this.$message.warning("只能上传 JPG/PNG/PDF/JPEG 格式!");
      //     return false;
      //   }
    },
    // 上传成功
    handleAvatarSuccess() {},
    // 删除
    handleRemove(file, fileList) {
      this.uploadMoreimg.fileList = fileList;
    },
    // 文件状态改变时的钩子，添加文件、上传成功和上传失败时都会被调用
    changeUpload(file, fileList) {
      this.uploadMoreimg.fileList = fileList;
    },
  },
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3bfaf6246abb3cccc39788ed393b5d54/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">容器知识点总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5edeec0b895935538c9d2e5aae1918b0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">从无到有的基于QT软件的DIY桌面番茄钟(上)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>