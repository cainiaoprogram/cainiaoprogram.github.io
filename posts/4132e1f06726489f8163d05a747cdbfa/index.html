<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python&#43;scrcpy&#43;pyminitouch实现自动化（二）——pyminitouch的安装 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python&#43;scrcpy&#43;pyminitouch实现自动化（二）——pyminitouch的安装" />
<meta property="og:description" content="一、什么是pyminitouch？
minitouch是openstf基于ndk &#43; Android开发的用于模拟人类点击行为的操作库。这个库以高稳定性、反应快著称，比起adb操作与uiautomator（两分钟搞懂UiAutomator自动化测试框架 - 知乎）都要更灵敏，被广泛应用于Android设备的精细操作。
然而它的使用与其安装方式都较为繁琐，无法定位打元素，使得它在自动化的应用领域上远远比不上uiautomator。它的体验感也较为一般，么此都要给手机重复安装指定版本的minitouch、建立、socket、然后再编辑操作命令，而且操作命令也很难阅读清楚。
pyminitouch = python &#43; minitouch，降低使用成本，直接使用简洁的API调用
二、安装minitouch
准备工作：
（1）minitouch需要ndk，ndk下载：NDK 下载 | Android NDK | Android Developers
（2）下载相应的压缩包后进行解压。
（3）讲解压的目录添加到path环境变量中。
右击我的电脑-&gt;属性-&gt;高级系统设置-&gt;环境变量-&gt;找到path变量-&gt;新建-&gt;将文件目录路径粘贴进去
（4）运行ndk -build看是否运行成功，若像下面一样运行成功则说明安装成功。
最后出那个错是因为它找不到Android项目。
（5）安装adb：https://dl.google.com/android/repository/platform-tools-latest-windows.zip
将下载下来的文件添加到环境变量中，方法如上面的步骤。如果安装成功执行adb会有相应的提示。
minitouch的下载：
下载需要自行安装git，windows系统不像Linux自带git功能：
下载地址： Git - Downloads
打开后进入安装页面：
一直往下安装就可以了
下载项目源码
git clone https://github.com/openstf/minitouch.git 进入minitouch的目录，执行下面的命令： cd C:\Users\auus\minitouch 进入文件夹后，按顺序执行下面两句：
git submodule init git submodule update 执行到这一步后，再次执行ndk-build：
在文件中出现以上则说明安装成功。
三、安装pyminitouch
需要在python 3 上安装：
pip install pyminitouch 四、开始研究任务
在cmd中输入下面语句查询自己设备的平台：
adb shell getprop ro.product.cpu.abi 将minitouch文件push到设备上（注意：Android的有些目录是无法之心结果二进制文件的，所以一般放在/data/local/tmp目录中） adb push minitouch /data/local/tmp 进入文件夹查看文件，进入shell模式 adb shell 切换到/data/local/tmp目录 cd /data/local/tmp 执行命令查看minitouch是否存在，存在则就安装完成 ls 如果使用时提示没有权限，使用shell模式进入/data/local/tmp目录执行 chmod 751 minitouch 在上面的步骤我们已经实现将minitouch push到手机上了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4132e1f06726489f8163d05a747cdbfa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-22T14:42:17+08:00" />
<meta property="article:modified_time" content="2022-02-22T14:42:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python&#43;scrcpy&#43;pyminitouch实现自动化（二）——pyminitouch的安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一、什么是pyminitouch？</p> 
<p>minitouch是openstf基于ndk + Android开发的<strong>用于模拟人类点击行为的操作库</strong>。这个库以高稳定性、反应快著称，比起adb操作与<strong>uiautomator</strong>（<a href="https://zhuanlan.zhihu.com/p/128058291" rel="nofollow" title="两分钟搞懂UiAutomator自动化测试框架 - 知乎">两分钟搞懂UiAutomator自动化测试框架 - 知乎</a>）都要更灵敏，被广泛应用于Android设备的精细操作。</p> 
<p>然而它的使用与其安装方式都较为繁琐，无法定位打元素，使得它在自动化的应用领域上远远比不上uiautomator。它的体验感也较为一般，么此都要给手机重复安装指定版本的minitouch、建立、socket、然后再编辑操作命令，而且操作命令也很难阅读清楚。</p> 
<p>pyminitouch = python + minitouch，降低使用成本，直接使用简洁的API调用</p> 
<p>二、安装minitouch</p> 
<p><strong>准备工作：</strong></p> 
<p>（1）minitouch需要ndk，ndk下载：<a href="https://developer.android.google.cn/ndk/downloads/" rel="nofollow" title="NDK 下载  |  Android NDK  |  Android Developers">NDK 下载  |  Android NDK  |  Android Developers</a></p> 
<p><img alt="" height="717" src="https://images2.imgbox.com/e7/93/J3xHJ3PP_o.png" width="1200"></p> 
<p>（2）下载相应的压缩包后进行解压。</p> 
<p>（3）讲解压的目录添加到path环境变量中。</p> 
<p>右击我的电脑-&gt;属性-&gt;高级系统设置-&gt;环境变量-&gt;找到path变量-&gt;新建-&gt;将文件目录路径粘贴进去</p> 
<p>（4）运行<strong>ndk -build</strong>看是否运行成功，若像下面一样运行成功则说明安装成功。</p> 
<p><img alt="" height="132" src="https://images2.imgbox.com/ea/5b/AhHOHunP_o.png" width="1200"></p> 
<p>最后出那个错是因为它找不到Android项目。</p> 
<p>（5）安装adb：<a href="https://dl.google.com/android/repository/platform-tools-latest-windows.zip" rel="nofollow" title="https://dl.google.com/android/repository/platform-tools-latest-windows.zip">https://dl.google.com/android/repository/platform-tools-latest-windows.zip</a></p> 
<p>将下载下来的文件添加到环境变量中，方法如上面的步骤。如果安装成功执行adb会有相应的提示。</p> 
<p><strong>minitouch的下载：</strong></p> 
<p>下载需要自行安装git，windows系统不像Linux自带git功能：</p> 
<ul><li> <p>下载地址： <a href="https://www.git-scm.com/download" rel="nofollow" title="Git - Downloads">Git - Downloads</a></p> </li><li> <p>打开后进入安装页面：</p> </li></ul> 
<p> <img alt="" height="490" src="https://images2.imgbox.com/54/47/XnHinRdH_o.png" width="598"></p> 
<ul><li> <p>一直往下安装就可以了</p> </li><li> <p>下载项目源码</p> </li></ul> 
<pre><code>git clone https://github.com/openstf/minitouch.git</code></pre> 
<p><img alt="" height="324" src="https://images2.imgbox.com/27/19/5h0gkVzo_o.png" width="1200"></p> 
<ul><li> 进入minitouch的目录，执行下面的命令：</li></ul> 
<p><img alt="" height="721" src="https://images2.imgbox.com/fb/c0/7spYUUyg_o.png" width="1183"></p> 
<pre><code>cd C:\Users\auus\minitouch</code></pre> 
<p>进入文件夹后，按顺序执行下面两句：</p> 
<pre><code>git submodule init</code></pre> 
<pre><code>git submodule update</code></pre> 
<p><img alt="" height="383" src="https://images2.imgbox.com/7a/c8/yO3EX9lW_o.png" width="1200"></p> 
<p>执行到这一步后，再次执行<strong>ndk-build</strong>：</p> 
<p><img alt="" height="457" src="https://images2.imgbox.com/8f/33/LZBxnPJj_o.png" width="925"></p> 
<p><img alt="" height="722" src="https://images2.imgbox.com/0b/12/LoHgWHEN_o.png" width="934"></p> 
<p> </p> 
<p>在文件中出现以上则说明安装成功。</p> 
<p>三、安装pyminitouch</p> 
<p>需要在python 3 上安装：</p> 
<pre><code>pip install pyminitouch</code></pre> 
<p>四、开始研究任务</p> 
<ul><li> <p>在cmd中输入下面语句查询自己设备的平台：</p> </li></ul> 
<pre><code>adb shell getprop ro.product.cpu.abi</code></pre> 
<p><img alt="" height="79" src="https://images2.imgbox.com/d1/0b/CmhrbJgd_o.png" width="562"></p> 
<ul><li> 将minitouch文件push到设备上（注意：Android的有些目录是无法之心结果二进制文件的，所以一般放在/data/local/tmp目录中）</li></ul> 
<pre><code>adb push minitouch /data/local/tmp</code></pre> 
<p><img alt="" height="70" src="https://images2.imgbox.com/d5/dd/3d5GPNNF_o.png" width="785"></p> 
<ul><li> 进入文件夹查看文件，进入shell模式</li></ul> 
<pre><code>adb shell</code></pre> 
<ul><li>切换到/data/local/tmp目录</li></ul> 
<pre><code>cd /data/local/tmp</code></pre> 
<ul><li>执行命令查看minitouch是否存在，存在则就安装完成</li></ul> 
<pre><code>ls</code></pre> 
<p><img alt="" height="140" src="https://images2.imgbox.com/c5/28/Cq23ki6c_o.png" width="383"></p> 
<ul><li> 如果使用时提示没有权限，使用shell模式进入/data/local/tmp目录执行</li></ul> 
<pre><code>chmod 751 minitouch</code></pre> 
<p>在上面的步骤我们已经实现将minitouch push到手机上了。</p> 
<ul><li> <p>使用pyminitouch</p> </li></ul> 
<p>首先，我想使用pyminitouch显示出我手机支持最大的x以及最大的y也就是屏幕的分辨率：</p> 
<pre><code class="language-python">from pyminitouch import safe_connection, safe_device, MNTDevice, CommandBuilder

_DEVICE_ID = '35501e57'

device = MNTDevice(_DEVICE_ID)

# print the maximum x and Y coordinates
print("max x:", device.connection.max_x)
print("max y:", device.connection.max_y)</code></pre> 
<p> 虽然代码看起来没什么问题，但是它运行起来有这个报错：</p> 
<blockquote> 
 <p>AssertionError: minitouch did not work.</p> 
</blockquote> 
<p> 那就是我刚刚装进去的minitouch并没有工作，输入以下命令：</p> 
<pre><code>adb kill-server
adb start-server</code></pre> 
<p>之后再次编译发现...好的，问题并没有解决...</p> 
<hr> 
<p>最后，我要准备去考研啦，考完研再继续学习把！！希望我考研顺利！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/25491b2306fe1460c83c3fde0286db82/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Windows下使用Doxygen&#43;GrapViz生成类图和调用图</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/434f11d7906ce1c2170461eb5acd7412/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">2.《剑指Java面试-Offer直通车》--数据库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>