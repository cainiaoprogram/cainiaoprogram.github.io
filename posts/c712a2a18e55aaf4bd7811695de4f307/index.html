<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>介绍Vue router的history模式以及如何配置history模式 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="介绍Vue router的history模式以及如何配置history模式" />
<meta property="og:description" content="引言 Vue router给我们提供了两种路由模式，分别是hash模式和history模式。其中默认是使用hash模式，即URL中带有一个#符号，但是处于业务或个人喜爱的差别，Vue router也提供了history模式。但是由于Vue是单页SPA应用，所以每个路由并没有对应的html文件。
什么是history模式 history模式特点 history模式使用浏览器的history API来管理路由状态，而不是依赖于URL中的哈希。在history模式下，URL看起来更加整洁，没有#符号。例如，http://example.com/user/profile。history模式可以在不刷新整个页面的情况下，通过改变URL来切换页面，实现更加流畅的用户体验 history模式的优缺点 优点： 更友好的URL：history模式下的URL看起来更加整洁，没有特殊字符（如#），给用户提供了更好的阅读体验。无刷新页面切换：使用history模式时，页面切换不会导致整个页面的刷新，仅仅改变URL，从而实现更加流畅的用户体验。更好的SEO：搜索引擎对于history模式下的页面更容易进行抓取和索引，因为URL更加直观、语义化。路由传参更方便：相比hash模式的URL传参，history模式下的传参更加直观简洁，参数可以直接通过URL的路径进行表示。 缺点： 服务器配置要求：使用history模式需要服务器的支持，因为URL改变时，要确保服务器能正确地展示相应的页面，需要进行一些额外的服务器配置。兼容性问题：history模式在一些旧版本的浏览器（如IE9及以下）中不被支持，如果要兼容这些浏览器，可能需要降级为hash模式。开发环境要求：当使用history模式时，需要在开发环境中配置一个服务器来模拟URL的请求，以确保路由正常运行，相比hash模式需要更多的配置。 如何配置Vue Router使用history模式 - 首先我们需要创建一个Vue项目
- 安装Vue Router
npm i vue-router - 在Vue项目中配置Vue Router使用history模式
import Vue from &#39;vue&#39;;import VueRouter from &#39;vue-router&#39;;Vue.use(VueRouter);const router = new VueRouter({ mode: &#39;history&#39;, routes: [ // 路由配置 ]});export default router; 服务器配置
- 配置服务器，使得所有路由的URL都指向入口页面，我们用nginx配置举例： server { listen 80; server_name your_domain.com; root /path/to/your/vue_app/dist; index index.html; location / { try_files $uri $uri/ /index.html; }}# 在以上配置中，需要进行以下调整：# 1. server_name：将your_domain." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c712a2a18e55aaf4bd7811695de4f307/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-08T10:25:53+08:00" />
<meta property="article:modified_time" content="2023-07-08T10:25:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">介绍Vue router的history模式以及如何配置history模式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="引言">引言</h2> 
<p>Vue router给我们提供了两种路由模式，分别是hash模式和history模式。其中默认是使用hash模式，即URL中带有一个#符号，但是处于业务或个人喜爱的差别，Vue router也提供了history模式。但是由于Vue是单页SPA应用，所以每个路由并没有对应的html文件。</p> 
<h2 id="什么是history模式">什么是history模式</h2> 
<h3 id="blogTitle0">history模式特点</h3> 
<ul><li>history模式使用浏览器的history API来管理路由状态，而不是依赖于URL中的哈希。</li><li>在history模式下，URL看起来更加整洁，没有#符号。例如，<a href="http://example.com/user/profile%E3%80%82" rel="nofollow" title="http://example.com/user/profile。">http://example.com/user/profile。</a></li><li>history模式可以在不刷新整个页面的情况下，通过改变URL来切换页面，实现更加流畅的用户体验</li></ul> 
<h3 id="blogTitle1">history模式的优缺点</h3> 
<h4 id="blogTitle2">优点：</h4> 
<ol><li>更友好的URL：history模式下的URL看起来更加整洁，没有特殊字符（如#），给用户提供了更好的阅读体验。</li><li>无刷新页面切换：使用history模式时，页面切换不会导致整个页面的刷新，仅仅改变URL，从而实现更加流畅的用户体验。</li><li>更好的SEO：搜索引擎对于history模式下的页面更容易进行抓取和索引，因为URL更加直观、语义化。</li><li>路由传参更方便：相比hash模式的URL传参，history模式下的传参更加直观简洁，参数可以直接通过URL的路径进行表示。</li></ol> 
<h4 id="blogTitle3">缺点：</h4> 
<ol><li>服务器配置要求：使用history模式需要服务器的支持，因为URL改变时，要确保服务器能正确地展示相应的页面，需要进行一些额外的服务器配置。</li><li>兼容性问题：history模式在一些旧版本的浏览器（如IE9及以下）中不被支持，如果要兼容这些浏览器，可能需要降级为hash模式。</li><li>开发环境要求：当使用history模式时，需要在开发环境中配置一个服务器来模拟URL的请求，以确保路由正常运行，相比hash模式需要更多的配置。</li></ol> 
<h2 id="如何配置vue-router使用history模式">如何配置Vue Router使用history模式</h2> 
<p>- 首先我们需要创建一个Vue项目<br>    - 安装Vue Router</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>npm i vue-router</code></td></tr></tbody></table> 
<p>- 在Vue项目中配置Vue Router使用history模式</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>import Vue from 'vue';</code></td></tr><tr><td></td><td><code>import VueRouter from 'vue-router';</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>Vue.use(VueRouter);</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>const router = new VueRouter({<!-- --></code></td></tr><tr><td></td><td><code>  mode: 'history',</code></td></tr><tr><td></td><td><code>  routes: [</code></td></tr><tr><td></td><td><code>    // 路由配置</code></td></tr><tr><td></td><td><code>  ]</code></td></tr><tr><td></td><td><code>});</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>export default router;</code></td></tr></tbody></table> 
<ol><li>服务器配置<br>    - 配置服务器，使得所有路由的URL都指向入口页面，我们用nginx配置举例：</li></ol> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>server {<!-- --></code></td></tr><tr><td></td><td><code>  listen 80;</code></td></tr><tr><td></td><td><code>  server_name your_domain.com;</code></td></tr><tr><td></td><td><code>  root /path/to/your/vue_app/dist;</code></td></tr><tr><td></td><td><code>  index index.html;</code></td></tr><tr><td></td><td><code>  location / {<!-- --></code></td></tr><tr><td></td><td><code>    try_files $uri $uri/ /index.html;</code></td></tr><tr><td></td><td><code>  }</code></td></tr><tr><td></td><td><code>}</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code># 在以上配置中，需要进行以下调整：</code></td></tr><tr><td></td><td><code># 1. server_name：将your_domain.com替换为您的域名。</code></td></tr><tr><td></td><td><code># 2. root：将/path/to/your/vue_app/dist替换为您的Vue应用的编译输出目录。</code></td></tr><tr><td></td><td><code># 3. index：确保index.html是您的Vue应用的入口页面。</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code># 配置解释：</code></td></tr><tr><td></td><td><code># • location /：此处表示对所有的请求都生效。</code></td></tr><tr><td></td><td><code># • try_files $uri $uri/ /index.html：当请求的文件或目录不存在时，将请求重定向到index.html。这使得所有的路由请求都指向了Vue应用的入口页面，使得应用能够正确地处理动态路由。</code></td></tr></tbody></table> 
<h2 id="处理404页面">处理404页面</h2> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>// 在路由配置中定义一个名为NotFound的路由</code></td></tr><tr><td></td><td><code>const routes = [</code></td></tr><tr><td></td><td><code>  // 其他路由配置...</code></td></tr><tr><td></td><td><code>  { path: '/404', name: 'NotFound', component: NotFoundComponent },</code></td></tr><tr><td></td><td><code>  { path: '*', redirect: '/404' }</code></td></tr><tr><td></td><td><code>]</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>// 创建Vue Router实例并将路由配置应用于它</code></td></tr><tr><td></td><td><code>const router = new VueRouter({<!-- --></code></td></tr><tr><td></td><td><code>  mode: 'history',</code></td></tr><tr><td></td><td><code>  routes</code></td></tr><tr><td></td><td><code>})</code></td></tr><tr><td></td><td></td></tr><tr><td></td><td><code>// 导航守卫用于捕获404错误</code></td></tr><tr><td></td><td><code>router.beforeEach((to, from, next) =&gt; {<!-- --></code></td></tr><tr><td></td><td><code>  // 如果目标路由不存在，重定向到404页面</code></td></tr><tr><td></td><td><code>  if (to.matched.length === 0) {<!-- --></code></td></tr><tr><td></td><td><code>    next('/404');</code></td></tr><tr><td></td><td><code>  } else {<!-- --></code></td></tr><tr><td></td><td><code>    next();</code></td></tr><tr><td></td><td><code>  }</code></td></tr><tr><td></td><td><code>})</code></td></tr></tbody></table> 
<h2 id="配置publicpath">配置publicPath</h2> 
<p>如果你希望你的Vue应用打完包以后，所有路由的前缀都加上/v1/test，那么你需要对原有的配置做一下修改</p> 
<h3 id="blogTitle4">vue.config.js</h3> 
<p>publicPath这里需要判断一下是否为生产环境，如果是生产环境，我们需要加上前缀，这样在读取js、css等文件时才能访问到正确的路径。如果是开发环境，基本URL配置为'/'即可。在开发环境中，我们的应用通常运行在一个本地的开发服务器上（例如：localhost:8080），而不是真实的生产环境服务器（例如：<a href="https://www.example.com/" rel="nofollow" title="https://www.example.com">https://www.example.com</a>）。因此，<code>'/'</code>可以作为根路径来访问我们的应用，而不需要添加任何前缀。</p> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>module.exports = {<!-- --></code></td></tr><tr><td></td><td><code>  // 部署应用包的基本URL</code></td></tr><tr><td></td><td><code>  publicPath: process.env.NODE_ENV === 'production' ? '/v1/test/' : '/',</code></td></tr><tr><td></td><td><code>  devServer: {<!-- --></code></td></tr><tr><td></td><td><code>    port: 8080,</code></td></tr><tr><td></td><td><code>    open: true,</code></td></tr><tr><td></td><td><code>    proxy: {}</code></td></tr><tr><td></td><td><code>  }</code></td></tr><tr><td></td><td><code>}</code></td></tr></tbody></table> 
<h3 id="blogTitle5">nginx配置</h3> 
<pre></pre> 
<table><tbody><tr><td></td><td><code>server {<!-- --></code></td></tr><tr><td></td><td><code>  listen 80;</code></td></tr><tr><td></td><td><code>  server_name your_domain.com;</code></td></tr><tr><td></td><td><code>  root /path/to/your/vue_app/dist;</code></td></tr><tr><td></td><td><code>  index index.html;</code></td></tr><tr><td></td><td><code>  location /v1/test { # 这里location需要加上/v1/test</code></td></tr><tr><td></td><td><code>    try_files $uri $uri/ /index.html;</code></td></tr><tr><td></td><td><code>  }</code></td></tr><tr><td></td><td><code>}</code></td></tr></tbody></table> 
<p>合集: <a href="https://www.cnblogs.com/azoux/collections/3865" rel="nofollow" title="Vue">Vue</a></p> 
<p>分类: <a href="https://www.cnblogs.com/azoux/category/2125700.html" rel="nofollow" title="Vue2">Vue2</a></p> 
<p>标签: <a href="https://www.cnblogs.com/azoux/tag/JavaScript/" rel="nofollow" title="JavaScript">JavaScript</a> , <a href="https://www.cnblogs.com/azoux/tag/Vue2/" rel="nofollow" title="Vue2">Vue2</a> , <a href="https://www.cnblogs.com/azoux/tag/Vue-router/" rel="nofollow" title="Vue-router">Vue-router</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/900c6b23a0c511620984a774f8826eeb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">jar包运行</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/996f5c4fe9c94dfd69f275b1c5dc255c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">什么是提示工程？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>