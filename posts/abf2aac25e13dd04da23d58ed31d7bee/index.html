<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【书生·浦语大模型实战营02】《轻松玩转书生·浦语大模型趣味Demo》学习笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【书生·浦语大模型实战营02】《轻松玩转书生·浦语大模型趣味Demo》学习笔记" />
<meta property="og:description" content="《轻松玩转书生·浦语大模型趣味Demo》 教程文档：《轻松玩转书生·浦语大模型趣味 Demo·文档》
致谢 感谢助教 MING·X 的帮助～
1、InternLM-Chat-7B 智能对话：生成 300 字的小故事 本节中我们将使用InternLM-Chat-7B 模型部署一个智能对话 Demo。
1.1 环境准备 在InternStudio平台中选择 A100(1/4) 的配置，镜像选择 Cuda11.7-conda，选择的配置如下图所示：
申请成功后，可以看到开发机的状态，
然后点击【进入开发机】；
从本地克隆包含pytorch2.0.1的环境 conda create --name internlm-demo --clone=/root/share/conda_envs/internlm-base 激活环境 conda activate internlm-demo 2、熟悉 hugging face 下载功能，使用 huggingface_hub python 包，下载 InternLM-20B 的 config.json 文件到本地 2.1 设置国内镜像源 export HF_ENDPOINT=https://hf-mirror.com Note：更多信息请访问 hf-mirror.com - Huggingface 镜像站。
3、在激活conda环境之前执行bash命令 3.1 Q：为什么要在激活环境前执行bash呢？ 我们猜测有以下几个可能的原因；
原因一：初始化环境变量和设置 新的 Bash 实例会读取并执行 ~/.bashrc 文件，从而进行对特定的环境变量进行设置；
原因二：清晰的会话开始 在一些情况下，可能想要一个干净的、未受之前命令影响的shell环境。执行 bash 命令可以提供一个新的、干净的工作环境。
南溪：这个效果有点像恢复出厂设置；
ChatGPT4：将 bash 命令比作“手机上的恢复出厂设置”是一个有趣的类比，但它们之间还是有一定的差异；执行 bash 命令会给你一个新的、未受之前会话影响的命令行环境，但它不会对你的整个系统或用户数据进行重置。它更像是打开一个新的、未受旧会话影响的页面，而不是完全把整个“书”恢复到原始状态。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/abf2aac25e13dd04da23d58ed31d7bee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-08T21:23:28+08:00" />
<meta property="article:modified_time" content="2024-01-08T21:23:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【书生·浦语大模型实战营02】《轻松玩转书生·浦语大模型趣味Demo》学习笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="DemohttpswwwbilibilicomvideoBV1Ci4y1z72Hshare_sourcecopy_webvd_source6ff5137c251d743b329d9bce0689e141_0"></a><a href="https://www.bilibili.com/video/BV1Ci4y1z72H/?share_source=copy_web&amp;vd_source=6ff5137c251d743b329d9bce0689e141" rel="nofollow">《轻松玩转书生·浦语大模型趣味Demo》</a></h2> 
<p>教程文档：<a href="https://github.com/InternLM/tutorial/blob/main/helloworld/hello_world.md">《轻松玩转书生·浦语大模型趣味 Demo·文档》</a></p> 
<h2><a id="_2"></a>致谢</h2> 
<p>感谢助教 MING·X 的帮助～</p> 
<h2><a id="1InternLMChat7B__300__4"></a>1、InternLM-Chat-7B 智能对话：生成 300 字的小故事</h2> 
<p>本节中我们将使用<code>InternLM-Chat-7B</code> 模型部署一个智能对话 Demo。</p> 
<h3><a id="11__6"></a>1.1 环境准备</h3> 
<p>在<a href="https://studio.intern-ai.org.cn/" rel="nofollow">InternStudio</a>平台中选择 A100(1/4) 的配置，镜像选择 <code>Cuda11.7-conda</code>，选择的配置如下图所示：<br> <img src="https://images2.imgbox.com/81/74/5QrY6e7w_o.png" alt="在这里插入图片描述"><br> 申请成功后，可以看到开发机的状态，<br> <img src="https://images2.imgbox.com/a6/58/4jcOsqtX_o.png" alt="在这里插入图片描述"><br> 然后点击【进入开发机】；</p> 
<h4><a id="pytorch201_12"></a>从本地克隆包含pytorch2.0.1的环境</h4> 
<pre><code class="prism language-bash">conda create <span class="token parameter variable">--name</span> internlm-demo <span class="token parameter variable">--clone</span><span class="token operator">=</span>/root/share/conda_envs/internlm-base
</code></pre> 
<h4><a id="_16"></a>激活环境</h4> 
<pre><code class="prism language-bash">conda activate internlm-demo
</code></pre> 
<h2><a id="2_hugging_face__huggingface_hub_python__InternLM20B__configjson__20"></a>2、熟悉 hugging face 下载功能，使用 huggingface_hub python 包，下载 InternLM-20B 的 config.json 文件到本地</h2> 
<h3><a id="21__21"></a>2.1 设置国内镜像源</h3> 
<pre><code class="prism language-bash"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HF_ENDPOINT</span><span class="token operator">=</span>https://hf-mirror.com
</code></pre> 
<blockquote> 
 <p><b>Note：</b>更多信息请访问 <a href="https://hf-mirror.com/" rel="nofollow">hf-mirror.com - Huggingface 镜像站</a>。</p> 
</blockquote> 
 
<h2><a id="3condabash_28"></a>3、在激活conda环境之前执行<code>bash</code>命令</h2> 
<h3><a id="31_Qbash_29"></a>3.1 Q：为什么要在激活环境前执行<code>bash</code>呢？</h3> 
<p>我们猜测有以下几个可能的原因；</p> 
<h4><a id="_31"></a>原因一：初始化环境变量和设置</h4> 
<p>新的 Bash 实例会读取并执行 <code>~/.bashrc</code> 文件，从而进行对特定的环境变量进行设置；</p> 
<h4><a id="_33"></a>原因二：清晰的会话开始</h4> 
<p>在一些情况下，可能想要一个干净的、未受之前命令影响的shell环境。执行 <code>bash</code> 命令可以提供一个新的、干净的工作环境。</p> 
<blockquote> 
 <p><b>南溪：</b>这个效果有点像恢复出厂设置；<br> <b>ChatGPT4：</b>将 <code>bash</code> 命令比作“手机上的恢复出厂设置”是一个有趣的类比，但它们之间还是有一定的差异；执行 <code>bash</code> 命令会给你一个新的、未受之前会话影响的命令行环境，但它不会对你的整个系统或用户数据进行重置。它更像是打开一个新的、未受旧会话影响的页面，而不是完全把整个“书”恢复到原始状态。</p> 
</blockquote> 
 
<h4><a id="conda_39"></a>原因三：启用conda环境配置</h4> 
<h3><a id="32__bashrc__40"></a>3.2 开发机中 <code>~/.bashrc</code> 文件的主要作用</h3> 
<p>此文件对Bash环境进行了以下主要配置：</p> 
<ol><li><strong>命令历史管理</strong>： 
  <ul><li>避免重复和以空格开头的命令出现在历史记录中，有助于保持历史记录的清洁和相关性。</li><li>设置历史记录的大小，确保重要的命令不会因为历史限制而丢失。</li></ul> </li><li><strong>自动检测窗口大小</strong>： 
  <ul><li>自动更新命令行窗口的大小信息，保证输出格式的正确。</li></ul> </li><li><strong>彩色提示符</strong>： 
  <ul><li>根据终端类型，提供了一个彩色的命令行提示符，增加了可读性。</li></ul> </li><li><strong>命令别名</strong>： 
  <ul><li>提供了一些常用命令的别名，如 <code>ll</code>、<code>la</code> 和 <code>l</code>，简化了文件系统导航。</li><li>特别有用的 <code>alert</code> 别名，用于长时间运行命令完成后的通知。</li></ul> </li><li><strong>Conda 环境管理</strong>： 
  <ul><li>自动初始化和管理 Conda 环境，这对于管理不同的 Python 版本和依赖包非常关键。</li><li>根据指定的环境（如 <code>xtuner</code> 或 <code>base</code>）自动激活 Conda 环境，方便切换到不同的项目或实验。</li></ul> </li><li><strong>网络代理配置</strong>： 
  <ul><li>设置了网络代理，对于访问互联网资源和下载依赖时非常有用，尤其是在需要魔法或企业内网环境中。</li></ul> </li><li><strong>自定义欢迎信息</strong>： 
  <ul><li>显示自定义的欢迎信息或其他重要信息，提供有关当前环境的即时反馈。</li></ul> </li></ol> 

                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/77fa3acabc22d448d17007303bfe40dd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">React Hooks的useState、useRef使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ca6d2a4ba4f94eba5f717cbefe79372c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">吃透这68个 Python 内置函数，你的 Python 基础就算非常扎实了</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>