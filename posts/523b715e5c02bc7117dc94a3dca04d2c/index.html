<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>UTC时间与北京时间相互转换 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="UTC时间与北京时间相互转换" />
<meta property="og:description" content="第一种方法 时间戳是指格林威治时间1970年01月01日00时00分00秒(北京时间1970年01月01日08时00分00秒)起至现在的总秒数。
public class HomeController : Controller { public ActionResult Index() { //本地时间(北京时间) DateTime dt = Convert.ToDateTime(&#34;2016-06-11 23:59:59&#34;); //TimeZone类表示时区，TimeZone.CurrentTimeZone方法：获取当前计算机的时区。 TimeZone tz = TimeZone.CurrentTimeZone; //获取当前计算机的时区与utc时间的时间差（北京时间和utc时间相差8个小时） TimeSpan ts = tz.GetUtcOffset(dt); //将当前计算机所在时区的时间(即:北京时间) 转换成UTC时间 DateTime dtGMT = tz.ToUniversalTime(dt); //将UTC时间转换成本地时间 DateTime localtime = tz.ToLocalTime(dtGMT); return View(); } } 第二种方法 public class HomeController : Controller { public ActionResult Index() { //本地时间(北京时间) DateTime dt = Convert.ToDateTime(&#34;2016-06-11 23:59:59&#34;); //将北京时间转换成utc时间 （北京时间是utc时间&#43;8小时，所以此时utc时间应该是 2016-06-11 15:59:59） DateTime utcNow = dt.ToUniversalTime(); //将utc时间转换成秒 (即将1970-01-01 00:00:00 到 2016-06-11 15:59:59的时间转换成秒) double utc = ConvertDateTimeInt(utcNow); //将秒数转换成北京时间 (其实就是将utc时间转换成北京时间),所以又得到2016-06-11 23:59:59 DateTime dtime = ConvertIntDatetime(utc); return View(); } /// &lt;summary&gt; /// 将时间转换成秒(这个秒是指1970-1-1 00:00:00 到你指定的时间之间的秒数) /// &lt;/summary&gt; /// &lt;param name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/523b715e5c02bc7117dc94a3dca04d2c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-11-23T23:34:17+08:00" />
<meta property="article:modified_time" content="2016-11-23T23:34:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">UTC时间与北京时间相互转换</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="color:#cc0000">第一种方法</span></h2> 
<div> 
 <span style="color:#cc0000"><span style="color:rgb(51,51,51); font-family:arial,宋体,sans-serif; font-size:14px; line-height:24px; text-indent:28px">时间戳是指格林威治时间1970年01月01日00时00分00秒(北京时间1970年01月01日08时00分00秒)起至现在的总秒数。</span><br> </span> 
</div> 
<p></p> 
<pre><code class="language-csharp">public class HomeController : Controller
{
    public ActionResult Index()
    {
        //本地时间(北京时间)
        DateTime dt = Convert.ToDateTime("2016-06-11 23:59:59");

        //TimeZone类表示时区，TimeZone.CurrentTimeZone方法：获取当前计算机的时区。
        TimeZone tz = TimeZone.CurrentTimeZone;

        //获取当前计算机的时区与utc时间的时间差（北京时间和utc时间相差8个小时）
        TimeSpan ts = tz.GetUtcOffset(dt);

        //将当前计算机所在时区的时间(即:北京时间) 转换成UTC时间
        DateTime dtGMT = tz.ToUniversalTime(dt);

        //将UTC时间转换成本地时间
        DateTime localtime = tz.ToLocalTime(dtGMT);

        return View();
    }
}</code></pre> 
<br> 
<p></p> 
<h2><span style="color:#cc0000">第二种方法</span></h2> 
<p></p> 
<pre><code class="language-csharp">public class HomeController : Controller
{
    public ActionResult Index()
    {
        //本地时间(北京时间)
        DateTime dt = Convert.ToDateTime("2016-06-11 23:59:59");

        //将北京时间转换成utc时间 （北京时间是utc时间+8小时，所以此时utc时间应该是 2016-06-11 15:59:59）
        DateTime utcNow = dt.ToUniversalTime();

        //将utc时间转换成秒 (即将1970-01-01 00:00:00 到 2016-06-11 15:59:59的时间转换成秒)
        double utc = ConvertDateTimeInt(utcNow);

        //将秒数转换成北京时间 (其实就是将utc时间转换成北京时间),所以又得到2016-06-11 23:59:59
        DateTime dtime = ConvertIntDatetime(utc);
        
        return View();
    }


    /// &lt;summary&gt;
    /// 将时间转换成秒(这个秒是指1970-1-1 00:00:00 到你指定的时间之间的秒数)
    /// &lt;/summary&gt;
    /// &lt;param name="time"&gt;指定时间&lt;/param&gt;
    /// &lt;returns&gt;秒数&lt;/returns&gt;
    public double ConvertDateTimeInt(System.DateTime time)
    {
        double intResult = 0;
        System.DateTime startTime = TimeZone.CurrentTimeZone.ToLocalTime(new System.DateTime(1970, 1, 1));
        intResult = (time - startTime).TotalSeconds;
        return intResult;
    }

    /// &lt;summary&gt;
    /// 将秒数转换成北京时间
    /// &lt;/summary&gt;
    /// &lt;param name="utc"&gt;秒数&lt;/param&gt;
    /// &lt;returns&gt;北京时间&lt;/returns&gt;
    public DateTime ConvertIntDatetime(double utc)
    {
        System.DateTime startTime = TimeZone.CurrentTimeZone.ToLocalTime(new System.DateTime(1970, 1, 1));
        startTime = startTime.AddSeconds(utc);
        startTime = startTime.AddHours(8);//转化为北京时间(北京时间=UTC时间+8小时 )
        return startTime;
    }
}</code></pre> 
<br> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7fbb2b9aabc1cd4d0020776399e11c42/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">手机的IMEI、MEID、ICCID、UDID、IMSI</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a46d2966499bbe368c0cd561a2da0a78/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android 二维码ZXing使用详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>