<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt/C&#43;&#43;编写视频监控系统82-自定义音柱显示 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt/C&#43;&#43;编写视频监控系统82-自定义音柱显示" />
<meta property="og:description" content="一、前言 通过音柱控件实时展示当前播放的声音产生的振幅的大小，得益于音频播放组件内置了音频振幅的计算，可以动态开启和关闭，开启后会对发送过来的要播放的声音数据，进行运算得到当前这个音频数据的振幅，类似于分贝，分贝越大，听到的声音越大，振幅越大。在如何摆放音柱控件这个问题上，考虑过多种方案，比如一开始做的是固定放在视频控件的右侧，也就是在一个垂直布局中先放一个视频控件，然后放左通道音柱，最后放一个右通道音柱，三个控件之间设置好间距。后面用户又提出来直接音柱控件悬浮在视频控件上方，这样可以节约位置，以便视频控件争取最大的地方展示，所以近期又专门重新搞了下，音柱可以放置在左侧、右侧、顶部、底部、两侧、悬浮等位置，然后还可以设置音柱的尺寸，如果是垂直摆放对应尺寸就是宽度，如果是上下摆放对应尺寸就是高度，还有个难点就是纯音频的通道，音量条需要摆放在中间位置，比如音量条左右两侧是一个弹簧，音量条尺寸取宽度的四分之一，这样看起来就非常美观了。
由于视频控件还有悬浮条，所以这个音柱的摆放位置，还需要留出足够的位置给悬浮条展示，然而呢悬浮条又有多种位置，比如也可以设置在底部，所以需要根据悬浮条的位置，再留出对应的间隙。在Qt的便利性，要设计这样一个带视频带悬浮带音柱，而且还支持非常灵活的各种参数设置，还是非常方便的，比如就新建个frmVideoWidgetVolume带音柱的视频窗体，悬浮条也是一个独立的widget，根据尺寸变化对应移来移去。音柱控件这边，通过表格布局来插入对应的控件。比如需要两侧显示音柱，则先插入左声道音柱，然后插入视频控件，最后插入右声道音柱控件。难点就在纯音频的音道控件，他需要根据尺寸占比自动拉伸，而且一个窗体需要根据打开的地址来区分当前是否是纯音频，所以需要在解码完成和结束的时候去做判断处理，打完收工。
二、效果图 三、体验地址 国内站点：https://gitee.com/feiyangqingyun国际站点：https://github.com/feiyangqingyun个人作品：https://blog.csdn.net/feiyangqingyun/article/details/97565652体验地址：https://pan.baidu.com/s/1d7TH_GEYl5nOecuNlWJJ7g 提取码：01jf 文件名：bin_video_system。 四、相关代码 #include &#34;frmvideowidgetvolume.h&#34; #include &#34;ui_frmvideowidgetvolume.h&#34; #include &#34;qthelper.h&#34; #include &#34;videowidgetx.h&#34; #include &#34;barvolume.h&#34; frmVideoWidgetVolume::frmVideoWidgetVolume(int position, VideoWidget *videoWidget, QWidget *parent) : QWidget(parent), ui(new Ui::frmVideoWidgetVolume) { ui-&gt;setupUi(this); this-&gt;position = position; this-&gt;videoWidget = videoWidget; bgText = videoWidget-&gt;getBgText(); isVertical = true; if (position == 2 || position == 4) { isVertical = false; } //实例化音柱控件并设置方向 leftVolume = new BarVolume; rightVolume = new BarVolume; leftVolume-&gt;setVertical(isVertical); rightVolume-&gt;setVertical(isVertical); //实例化布局并设置边距间距 QGridLayout *layout = new QGridLayout(this); layout-&gt;setContentsMargins(0, 0, 0, 0); layout-&gt;setSpacing(3); //将音柱控件和视频控件插入到对应位置/可以自行拓展各种布局 if (position == 1) { layout-&gt;addWidget(leftVolume, 0, 0); layout-&gt;addWidget(rightVolume, 0, 1); layout-&gt;addWidget(videoWidget, 0, 2); } else if (position == 2) { layout-&gt;addWidget(leftVolume, 0, 0); layout-&gt;addWidget(rightVolume, 1, 0); layout-&gt;addWidget(videoWidget, 2, 0); } else if (position == 3) { layout-&gt;addWidget(videoWidget, 0, 0); layout-&gt;addWidget(leftVolume, 0, 1); layout-&gt;addWidget(rightVolume, 0, 2); } else if (position == 4) { layout-&gt;addWidget(videoWidget, 0, 0); layout-&gt;addWidget(leftVolume, 1, 0); layout-&gt;addWidget(rightVolume, 2, 0); } else if (position == 5) { layout-&gt;addWidget(leftVolume, 0, 0); layout-&gt;addWidget(videoWidget, 0, 1); layout-&gt;addWidget(rightVolume, 0, 2); } else if (position == 6) { //实例化弹簧控件 spaceLeft = new QSpacerItem(0, 0, QSizePolicy::Expanding, QSizePolicy::Preferred); spaceCenter = new QSpacerItem(0, 0, QSizePolicy::Expanding, QSizePolicy::Preferred); spaceRight = new QSpacerItem(0, 0, QSizePolicy::Expanding, QSizePolicy::Preferred); //实例化布局并插入控件 hlayout = new QHBoxLayout; hlayout-&gt;addWidget(leftVolume); hlayout-&gt;addItem(spaceCenter); hlayout-&gt;addWidget(rightVolume); videoWidget-&gt;setLayout(hlayout); layout-&gt;addWidget(videoWidget); } //关联音频振幅信号 connect(videoWidget, SIGNAL(sig_receiveLevel(qreal, qreal)), this, SLOT(receiveLevel(qreal, qreal))); //打开和关闭后需要清空下(有可能残留上一次的数据) connect(videoWidget, SIGNAL(sig_receivePlayStart(int)), this, SLOT(reset())); connect(videoWidget, SIGNAL(sig_receivePlayFinsh()), this, SLOT(reset())); //音柱窗体参数变化后需要重置 connect(AppEvent::Instance(), SIGNAL(changeVolumeWidget()), this, SLOT(reset())); } frmVideoWidgetVolume::~frmVideoWidgetVolume() { delete ui; } void frmVideoWidgetVolume::resizeEvent(QResizeEvent *) { int width = this-&gt;width(); int height = this-&gt;height(); //根据宽度动态设置音量条宽度或者高度/也可以设置成固定值 int size = (isVertical ?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/42a81b65bd765ceab0f4ac1f1d4f4617/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T09:31:55+08:00" />
<meta property="article:modified_time" content="2024-01-03T09:31:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt/C&#43;&#43;编写视频监控系统82-自定义音柱显示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_1"></a>一、前言</h3> 
<p>通过音柱控件实时展示当前播放的声音产生的振幅的大小，得益于音频播放组件内置了音频振幅的计算，可以动态开启和关闭，开启后会对发送过来的要播放的声音数据，进行运算得到当前这个音频数据的振幅，类似于分贝，分贝越大，听到的声音越大，振幅越大。在如何摆放音柱控件这个问题上，考虑过多种方案，比如一开始做的是固定放在视频控件的右侧，也就是在一个垂直布局中先放一个视频控件，然后放左通道音柱，最后放一个右通道音柱，三个控件之间设置好间距。后面用户又提出来直接音柱控件悬浮在视频控件上方，这样可以节约位置，以便视频控件争取最大的地方展示，所以近期又专门重新搞了下，音柱可以放置在左侧、右侧、顶部、底部、两侧、悬浮等位置，然后还可以设置音柱的尺寸，如果是垂直摆放对应尺寸就是宽度，如果是上下摆放对应尺寸就是高度，还有个难点就是纯音频的通道，音量条需要摆放在中间位置，比如音量条左右两侧是一个弹簧，音量条尺寸取宽度的四分之一，这样看起来就非常美观了。</p> 
<p>由于视频控件还有悬浮条，所以这个音柱的摆放位置，还需要留出足够的位置给悬浮条展示，然而呢悬浮条又有多种位置，比如也可以设置在底部，所以需要根据悬浮条的位置，再留出对应的间隙。在Qt的便利性，要设计这样一个带视频带悬浮带音柱，而且还支持非常灵活的各种参数设置，还是非常方便的，比如就新建个frmVideoWidgetVolume带音柱的视频窗体，悬浮条也是一个独立的widget，根据尺寸变化对应移来移去。音柱控件这边，通过表格布局来插入对应的控件。比如需要两侧显示音柱，则先插入左声道音柱，然后插入视频控件，最后插入右声道音柱控件。难点就在纯音频的音道控件，他需要根据尺寸占比自动拉伸，而且一个窗体需要根据打开的地址来区分当前是否是纯音频，所以需要在解码完成和结束的时候去做判断处理，打完收工。</p> 
<h3><a id="_6"></a>二、效果图</h3> 
<p><img src="https://images2.imgbox.com/ae/58/6Qq6TwEk_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="_10"></a>三、体验地址</h3> 
<ol><li>国内站点：<a href="https://gitee.com/feiyangqingyun" rel="nofollow">https://gitee.com/feiyangqingyun</a></li><li>国际站点：<a href="https://github.com/feiyangqingyun">https://github.com/feiyangqingyun</a></li><li>个人作品：<a href="https://blog.csdn.net/feiyangqingyun/article/details/97565652">https://blog.csdn.net/feiyangqingyun/article/details/97565652</a></li><li>体验地址：<a href="https://pan.baidu.com/s/1d7TH_GEYl5nOecuNlWJJ7g" rel="nofollow">https://pan.baidu.com/s/1d7TH_GEYl5nOecuNlWJJ7g</a> 提取码：01jf 文件名：bin_video_system。</li></ol> 
<h3><a id="_16"></a>四、相关代码</h3> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"frmvideowidgetvolume.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"ui_frmvideowidgetvolume.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"qthelper.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"videowidgetx.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"barvolume.h"</span></span>

frmVideoWidgetVolume<span class="token double-colon punctuation">::</span><span class="token function">frmVideoWidgetVolume</span><span class="token punctuation">(</span><span class="token keyword">int</span> position<span class="token punctuation">,</span> VideoWidget <span class="token operator">*</span>videoWidget<span class="token punctuation">,</span> QWidget <span class="token operator">*</span>parent<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">QWidget</span><span class="token punctuation">(</span>parent<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">ui</span><span class="token punctuation">(</span><span class="token keyword">new</span> Ui<span class="token double-colon punctuation">::</span>frmVideoWidgetVolume<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    ui<span class="token operator">-&gt;</span><span class="token function">setupUi</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token operator">-&gt;</span>position <span class="token operator">=</span> position<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span>videoWidget <span class="token operator">=</span> videoWidget<span class="token punctuation">;</span>
    bgText <span class="token operator">=</span> videoWidget<span class="token operator">-&gt;</span><span class="token function">getBgText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    isVertical <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">||</span> position <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        isVertical <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//实例化音柱控件并设置方向</span>
    leftVolume <span class="token operator">=</span> <span class="token keyword">new</span> BarVolume<span class="token punctuation">;</span>
    rightVolume <span class="token operator">=</span> <span class="token keyword">new</span> BarVolume<span class="token punctuation">;</span>
    leftVolume<span class="token operator">-&gt;</span><span class="token function">setVertical</span><span class="token punctuation">(</span>isVertical<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rightVolume<span class="token operator">-&gt;</span><span class="token function">setVertical</span><span class="token punctuation">(</span>isVertical<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//实例化布局并设置边距间距</span>
    QGridLayout <span class="token operator">*</span>layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QGridLayout</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    layout<span class="token operator">-&gt;</span><span class="token function">setSpacing</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//将音柱控件和视频控件插入到对应位置/可以自行拓展各种布局</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//实例化弹簧控件</span>
        spaceLeft <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSpacerItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Expanding<span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Preferred<span class="token punctuation">)</span><span class="token punctuation">;</span>
        spaceCenter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSpacerItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Expanding<span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Preferred<span class="token punctuation">)</span><span class="token punctuation">;</span>
        spaceRight <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">QSpacerItem</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Expanding<span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Preferred<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//实例化布局并插入控件</span>
        hlayout <span class="token operator">=</span> <span class="token keyword">new</span> QHBoxLayout<span class="token punctuation">;</span>
        hlayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>
        hlayout<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span>spaceCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        hlayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>
        videoWidget<span class="token operator">-&gt;</span><span class="token function">setLayout</span><span class="token punctuation">(</span>hlayout<span class="token punctuation">)</span><span class="token punctuation">;</span>
        layout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//关联音频振幅信号</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">sig_receiveLevel</span><span class="token punctuation">(</span>qreal<span class="token punctuation">,</span> qreal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">receiveLevel</span><span class="token punctuation">(</span>qreal<span class="token punctuation">,</span> qreal<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//打开和关闭后需要清空下(有可能残留上一次的数据)</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">sig_receivePlayStart</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">connect</span><span class="token punctuation">(</span>videoWidget<span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">sig_receivePlayFinsh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//音柱窗体参数变化后需要重置</span>
    <span class="token function">connect</span><span class="token punctuation">(</span><span class="token class-name">AppEvent</span><span class="token double-colon punctuation">::</span><span class="token function">Instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">SIGNAL</span><span class="token punctuation">(</span><span class="token function">changeVolumeWidget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">SLOT</span><span class="token punctuation">(</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">frmVideoWidgetVolume</span><span class="token double-colon punctuation">::</span><span class="token operator">~</span><span class="token function">frmVideoWidgetVolume</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">delete</span> ui<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> frmVideoWidgetVolume<span class="token double-colon punctuation">::</span><span class="token function">resizeEvent</span><span class="token punctuation">(</span>QResizeEvent <span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> width <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> height <span class="token operator">=</span> <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//根据宽度动态设置音量条宽度或者高度/也可以设置成固定值</span>
    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token punctuation">(</span>isVertical <span class="token operator">?</span> width <span class="token operator">:</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>AppConfig<span class="token double-colon punctuation">::</span>VolumeSize <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        size <span class="token operator">=</span> size <span class="token operator">*</span> <span class="token number">0.05</span><span class="token punctuation">;</span>
        size <span class="token operator">=</span> <span class="token punctuation">(</span>size <span class="token operator">&gt;</span> <span class="token number">20</span> <span class="token operator">?</span> <span class="token number">20</span> <span class="token operator">:</span> size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        size <span class="token operator">=</span> AppConfig<span class="token double-colon punctuation">::</span>VolumeSize<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>isVertical<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        leftVolume<span class="token operator">-&gt;</span><span class="token function">setMaximumWidth</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        rightVolume<span class="token operator">-&gt;</span><span class="token function">setMaximumWidth</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        leftVolume<span class="token operator">-&gt;</span><span class="token function">setMaximumHeight</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        rightVolume<span class="token operator">-&gt;</span><span class="token function">setMaximumHeight</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//根据高度动态设置音量格子数量(一般高度越小格子数越少)</span>
    <span class="token keyword">int</span> step <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">6</span> <span class="token operator">?</span> <span class="token number">10</span> <span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    leftVolume<span class="token operator">-&gt;</span><span class="token function">setStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rightVolume<span class="token operator">-&gt;</span><span class="token function">setStep</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//根据音柱位置摆放控件</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>videoWidget<span class="token operator">-&gt;</span><span class="token function">getIsRunning</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> videoWidget<span class="token operator">-&gt;</span><span class="token function">getVideoThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">getIsOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            leftVolume<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rightVolume<span class="token operator">-&gt;</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//根据悬浮条的位置留出空余的地方</span>
            <span class="token keyword">int</span> offset <span class="token operator">=</span> <span class="token number">35</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>AppConfig<span class="token double-colon punctuation">::</span>BannerPosition <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> offset<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>AppConfig<span class="token double-colon punctuation">::</span>BannerPosition <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span>offset<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>AppConfig<span class="token double-colon punctuation">::</span>BannerPosition <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> offset<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">setContentsMargins</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> offset<span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//先把布局中的挨个移除</span>
            hlayout<span class="token operator">-&gt;</span><span class="token function">removeItem</span><span class="token punctuation">(</span>spaceLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
            hlayout<span class="token operator">-&gt;</span><span class="token function">removeItem</span><span class="token punctuation">(</span>spaceCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            hlayout<span class="token operator">-&gt;</span><span class="token function">removeItem</span><span class="token punctuation">(</span>spaceRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
            hlayout<span class="token operator">-&gt;</span><span class="token function">removeWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>
            hlayout<span class="token operator">-&gt;</span><span class="token function">removeWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//纯音频需要占用比较大的面积</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>videoWidget<span class="token operator">-&gt;</span><span class="token function">getOnlyAudio</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                videoWidget<span class="token operator">-&gt;</span><span class="token function">setBgText</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                size <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">;</span>
                leftVolume<span class="token operator">-&gt;</span><span class="token function">setMaximumWidth</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
                rightVolume<span class="token operator">-&gt;</span><span class="token function">setMaximumWidth</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">;</span>
                leftVolume<span class="token operator">-&gt;</span><span class="token function">setSizePolicy</span><span class="token punctuation">(</span>QSizePolicy<span class="token double-colon punctuation">::</span>Expanding<span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Ignored<span class="token punctuation">)</span><span class="token punctuation">;</span>
                rightVolume<span class="token operator">-&gt;</span><span class="token function">setSizePolicy</span><span class="token punctuation">(</span>QSizePolicy<span class="token double-colon punctuation">::</span>Expanding<span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Ignored<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span>spaceLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span>spaceRight<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                leftVolume<span class="token operator">-&gt;</span><span class="token function">setSizePolicy</span><span class="token punctuation">(</span>QSizePolicy<span class="token double-colon punctuation">::</span>Preferred<span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Ignored<span class="token punctuation">)</span><span class="token punctuation">;</span>
                rightVolume<span class="token operator">-&gt;</span><span class="token function">setSizePolicy</span><span class="token punctuation">(</span>QSizePolicy<span class="token double-colon punctuation">::</span>Preferred<span class="token punctuation">,</span> QSizePolicy<span class="token double-colon punctuation">::</span>Ignored<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>leftVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">addItem</span><span class="token punctuation">(</span>spaceCenter<span class="token punctuation">)</span><span class="token punctuation">;</span>
                hlayout<span class="token operator">-&gt;</span><span class="token function">addWidget</span><span class="token punctuation">(</span>rightVolume<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            leftVolume<span class="token operator">-&gt;</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            rightVolume<span class="token operator">-&gt;</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            videoWidget<span class="token operator">-&gt;</span><span class="token function">setBgText</span><span class="token punctuation">(</span>bgText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> frmVideoWidgetVolume<span class="token double-colon punctuation">::</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    leftVolume<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rightVolume<span class="token operator">-&gt;</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token operator">-&gt;</span><span class="token function">resizeEvent</span><span class="token punctuation">(</span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> frmVideoWidgetVolume<span class="token double-colon punctuation">::</span><span class="token function">receiveLevel</span><span class="token punctuation">(</span>qreal leftLevel<span class="token punctuation">,</span> qreal rightLevel<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    leftVolume<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>leftLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rightVolume<span class="token operator">-&gt;</span><span class="token function">setValue</span><span class="token punctuation">(</span>rightLevel<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_191"></a>五、功能特点</h3> 
<h4><a id="51__192"></a>5.1 软件模块</h4> 
<ol><li>视频监控模块，各种停靠小窗体子模块，包括设备列表、图文警情、窗口信息、云台控制、预置位、巡航设置、设备控制、悬浮地图、网页浏览等。</li><li>视频回放模块，包括本地回放、远程回放、设备播放、图片回放、视频上传等。</li><li>电子地图模块，包括图片地图、在线地图、离线地图、路径规划等。</li><li>日志查询模块，包括本地日志、设备日志等。</li><li>系统设置模块，包括系统设置（基本设置、视频参数、数据库设置、地图配置、串口配置等）、录像机管理、摄像机管理、轮询配置、录像计划、用户管理等。</li></ol> 
<h4><a id="52__199"></a>5.2 基础功能</h4> 
<ol><li>支持各种视频流（rtsp、rtmp、http等）、视频文件（mp4、rmvb、avi等）、本地USB摄像机播放。</li><li>支持多画面切换，包括1、4、6、8、9、13、16、25、36、64画面切换。</li><li>支持全屏切换，多种切换方式包括鼠标右键菜单、工具栏按钮、快捷键（alt+enter全屏，esc退出全屏）。</li><li>支持视频轮询，包括1、4、9、16画面轮询，可设置轮询分组（轮询预案）、轮询间隔、码流类型等。</li><li>支持onvif协议，包括设备搜索、云台控制、预置位、设备控制（图片参数、校对时间、系统重启，抓拍图片等）。</li><li>支持权限管理，不同的用户可以对应不同的模块权限，比如删除日志、关闭系统等。</li><li>数据库支持多种，包括sqlite、mysql、sqlserver、postgresql、oracle、人大金仓等。</li><li>本地USB摄像机支持设置分辨率、帧率等参数。</li><li>所有停靠模块都自动生成对应的菜单用来控制显示和隐藏，在标题栏右键可以弹出。</li><li>支持显示所有模块、隐藏所有模块、复位普通布局、复位全屏布局。</li><li>双击设备弹出实时预览视频，支持图片地图、在线地图、离线地图等。</li><li>摄像机节点拖曳到对应窗体播放视频，同时支持拖曳本地文件直接播放。</li><li>删除视频支持鼠标右键删除、悬浮条关闭删除、拖曳到视频监控面板外删除等多种方式。</li><li>图片地图上设备按钮可自由拖动，自动保存位置信息。百度地图上可以鼠标单击获取经纬度信息，用来更新设备位置。</li><li>视频监控面板窗体中任意通道支持拖曳交换，瞬间响应。</li><li>封装了百度地图，视图切换，运动轨迹，设备点位，鼠标按下获取经纬度等。</li><li>双击节点、拖曳节点、拖曳窗体交换位置等操作，均自动更新保存最后的播放地址，下次软件打开自动应用。</li><li>右下角音量条控件，失去焦点自动隐藏，音量条带静音图标。</li><li>支持视频截图，可指定单个或者对所有通道截图，底部小工具栏也有截图按钮。</li><li>支持超时自动隐藏鼠标指针、自动全屏机制。</li><li>支持onvif云台控制，可上下左右移动云台摄像机，包括复位和焦距调整等。</li><li>支持onvif预置位，可以添加、删除、修改预置位，可以调用起始位。</li><li>支持onvif图像参数设置，包括明亮度、对比度、饱和度、尖锐度等。</li><li>支持onvif其他操作，包括抓图、网络设置、校时、重启、事件订阅等。</li><li>支持任意onvif摄像机，包括但不限于海康、大华、宇视、天地伟业、华为等。</li><li>可保存视频，可选定时存储或者单文件存储，可选存储间隔时间。</li><li>可设置视频流通信方式tcp+udp，可设置视频解码是速度优先、质量优先、均衡等。</li><li>可设置软件中文名称、英文名称、LOGO图标等。</li><li>存储的视频文件支持导出到指定目录，支持批量上传到服务器。</li><li>完善的录像计划设置，支持每个通道7 * 24小时每半小时设置是否存储录像。</li></ol> 
<h4><a id="53__231"></a>5.3 特色功能</h4> 
<ol><li>主界面采用停靠窗体模式，各种组件以小模块的形式加入，可自定义任意模块加入。</li><li>停靠模块可拖动任意位置嵌入和悬浮，支持最大化全屏，支持多屏幕。</li><li>双重布局文件存储机制，正常模式、全屏模式都对应不同的布局方案，自动切换和保存，比如全屏模式可以突出几个模块透明显示在指定位置，更具科幻感现代化。</li><li>原创onvif协议机制，采用底层协议解析（udp广播搜索+http请求执行命令）更轻量易懂易学习拓展，不依赖任何第三方组件比如gsoap。</li><li>原创数据导入、导出、打印机制，跨平台不依赖任何组件，瞬间导出数据。</li><li>内置多个原创组件，宇宙超值超级牛逼，包括数据导入导出组件（导出到xls、pdf、打印）、数据库组件（数据库管理线程、自动清理数据线程、万能分页、数据请求等）、地图组件、视频监控组件、文件多线程收发组件、onvif通信组件、通用浏览器内核组件等。</li><li>自定义信息框+错误框+询问框+右下角提示框（包含多种格式）等。</li><li>精美换肤，高达17套皮肤样式随意更换，所有样式全部统一，包括菜单等。</li><li>视频控件悬浮条可以自行增加多个按钮，监控界面底部小工具栏也可自行增加按钮。</li><li>双击摄像机节点自动播放视频，双击节点自动依次添加视频，会自动跳到下一个，双击父节点自动添加该节点下的所有视频。可选主码流、子码流。</li><li>录像机管理、摄像机管理，可添加删除修改导入导出打印信息，立即应用新的设备信息生成树状列表，不需重启。</li><li>可选多种内核自由切换，ffmpeg、vlc、mpv等，均可在pro中设置。推荐用ffmpeg，跨平台最多，默认提供好了linux和mac平台上编译好的库。</li><li>支持硬解码，可设置硬解码类型（qsv、dxva2、d3d11va等）。</li><li>默认采用opengl绘制视频，超低的CPU资源占用，支持yuyv和nv12两种格式绘制，性能爆表。</li><li>标签和图形信息支持三种绘制方式，绘制到遮罩层、绘制到图片、源头绘制（对应信息可以存储到文件）。</li><li>高度可定制化，用户可以很方便的在此基础上衍生自己的功能，比如增加自定义模块，增加运行模式、机器人监控、无人机监控、挖掘机监控等。</li><li>支持xp、win7、win10、win11、linux、mac、各种国产系统（UOS、中标麒麟、银河麒麟等）、嵌入式linux等系统。</li><li>注释完整，项目结构清晰，超级详细完整的使用开发手册，精确到每个代码文件的功能说明，不断持续迭代版本。</li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9d5f52fed53e81ae1276893d6c851c60/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决Gitlab Prometheus导致的磁盘空间不足问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/125c61d55a6b701911995604c8bcb46f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于SpringBoot的康复中心管理系统 JAVA简易版</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>