<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Docker容器操作 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Docker容器操作" />
<meta property="og:description" content="文章目录 Docker安装更换镜像源 Docker 基本操作拉取镜像创建容器启动容器创建 &#43; 启动停止容器查看当前运行的容器查看所有容器查看最新创建的容器查看最新创建的N个容器删除容器容器重启查看端口查看容器信息查看进程查看日志容器内执行命令导出容器导入容器 你能在浪费时间中获得乐趣，就不是浪费时间。 ---- 罗素
Docker安装 Linux（CentOS、Ubuntu）：
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun MacOS:
前往网站：https://docs.docker.com/desktop/mac/install 进行安装
Windows：
前往网站：https://hub.docker.com/editions/community/docker-ce-desktop-windows 进行安装
安装完成后执行docker -v，当显示版本后表示安装成功。
更换镜像源 避免国外镜像拉取时出现卡顿的情况，可以将镜像换成国内仓库。可以在/etc/docker/docker.json或安装好的Docker软件中找到设置中的daemon.json配置。
{ &#34;registry-mirrors&#34;:[&#34;https://reg-mirror.qiniu.com/&#34;] } 镜像网址：
科大镜像：https://docker.mirrors.ustc.edu.cn网易云镜像：https://hub-mirror.c.163.com七牛云加速器：https://reg-mirror.qiniu.com 配置完成后执行docker info命令，看到Registry Mirrors表示配置成功。
Docker 基本操作 拉取镜像 当本地没有的镜像的话通过docker pull命令去仓库拉取镜像。
docker pull ubuntu 创建容器 通过docker create创建容器。
docker create --name myUbuntu ubuntu --name myUbuntu表示给创建的容器起别名，此时的容器还没有启动。
启动容器 docker run -it ubuntu /bin/bash 此时已经进入到创建的ubuntu中，可以执行Liunx的ll命令查看目录，使用exit退出。
这里的-it参数中，i 表示开发容器的标准输入（STDIN），t 则表示告诉 docker，为容器创建一个命令行终端。
对于已经通过create创建的容器，也可以通过docker start name来启动。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/dcc865dc386d84f94fa5e0ded0c090d5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-27T23:14:05+08:00" />
<meta property="article:modified_time" content="2021-11-27T23:14:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Docker容器操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#Docker_3" rel="nofollow">Docker安装</a></li><li><ul><li><a href="#_23" rel="nofollow">更换镜像源</a></li></ul> 
   </li><li><a href="#Docker__44" rel="nofollow">Docker 基本操作</a></li><li><ul><li><a href="#_46" rel="nofollow">拉取镜像</a></li><li><a href="#_57" rel="nofollow">创建容器</a></li><li><a href="#_69" rel="nofollow">启动容器</a></li><li><a href="#___95" rel="nofollow">创建 + 启动</a></li><li><a href="#_105" rel="nofollow">停止容器</a></li><li><a href="#_115" rel="nofollow">查看当前运行的容器</a></li><li><a href="#_138" rel="nofollow">查看所有容器</a></li><li><a href="#_147" rel="nofollow">查看最新创建的容器</a></li><li><a href="#N_156" rel="nofollow">查看最新创建的N个容器</a></li><li><a href="#_165" rel="nofollow">删除容器</a></li><li><a href="#_176" rel="nofollow">容器重启</a></li><li><a href="#_188" rel="nofollow">查看端口</a></li><li><a href="#_192" rel="nofollow">查看容器信息</a></li><li><a href="#_217" rel="nofollow">查看进程</a></li><li><a href="#_227" rel="nofollow">查看日志</a></li><li><a href="#_241" rel="nofollow">容器内执行命令</a></li><li><a href="#_253" rel="nofollow">导出容器</a></li><li><a href="#_264" rel="nofollow">导入容器</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<blockquote> 
 <p>你能在浪费时间中获得乐趣，就不是浪费时间。 ---- 罗素</p> 
</blockquote> 
<h3><a id="Docker_3"></a>Docker安装</h3> 
<ul><li> <p>Linux（CentOS、Ubuntu）：</p> <pre><code>curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
</code></pre> </li><li> <p>MacOS:</p> <p>前往网站：https://docs.docker.com/desktop/mac/install 进行安装</p> </li><li> <p>Windows：</p> <p>前往网站：https://hub.docker.com/editions/community/docker-ce-desktop-windows 进行安装</p> </li></ul> 
<p>安装完成后执行<code>docker -v</code>，当显示版本后表示安装成功。</p> 
<p><img src="https://images2.imgbox.com/62/6d/a59nLmlE_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-C2STNTHn-1638017190644)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127194943475.png)]"></p> 
<h4><a id="_23"></a>更换镜像源</h4> 
<p>避免国外镜像拉取时出现卡顿的情况，可以将镜像换成国内仓库。可以在/etc/docker/docker.json或安装好的Docker软件中找到设置中的<code>daemon.json</code>配置。</p> 
<pre><code>{
"registry-mirrors":["https://reg-mirror.qiniu.com/"]
}
</code></pre> 
<p>镜像网址：</p> 
<ul><li>科大镜像：<strong>https://docker.mirrors.ustc.edu.cn</strong></li><li>网易云镜像：<strong>https://hub-mirror.c.163.com</strong></li><li>七牛云加速器：<strong>https://reg-mirror.qiniu.com</strong></li></ul> 
<p>配置完成后执行<code>docker info</code>命令，看到Registry Mirrors表示配置成功。</p> 
<p><img src="https://images2.imgbox.com/92/30/PlQpE1S8_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-vJcprsQi-1638016951869)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127180740983.png)]"></p> 
<h3><a id="Docker__44"></a>Docker 基本操作</h3> 
<h4><a id="_46"></a>拉取镜像</h4> 
<p>当本地没有的镜像的话通过<code>docker pull</code>命令去仓库拉取镜像。</p> 
<pre><code>docker pull ubuntu
</code></pre> 
<p><img src="https://images2.imgbox.com/0e/12/zdCUomI3_o.png" alt="]"></p> 
<h4><a id="_57"></a>创建容器</h4> 
<p>通过<code>docker create</code>创建容器。</p> 
<pre><code>docker create --name myUbuntu ubuntu
</code></pre> 
<p><img src="https://images2.imgbox.com/ae/36/Gc1LxBqJ_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-A7C0XIdw-1638016951872)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127185227856.png)]"></p> 
<p><code>--name myUbuntu</code>表示给创建的容器起别名，此时的容器还没有启动。</p> 
<h4><a id="_69"></a>启动容器</h4> 
<pre><code>docker run -it ubuntu /bin/bash
</code></pre> 
<p><img src="https://images2.imgbox.com/de/41/UtZ8uQrI_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-MfiKjWWo-1638016951872)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127185844612.png)]"></p> 
<p>此时已经进入到创建的ubuntu中，可以执行Liunx的<code>ll</code>命令查看目录，使用<code>exit</code>退出。</p> 
<p>这里的-it参数中，i 表示开发容器的标准输入（STDIN），t 则表示告诉 docker，为容器创建一个命令行终端。</p> 
<p>对于已经通过<code>create</code>创建的容器，也可以通过<code>docker start name</code>来启动。</p> 
<pre><code>docker start myredis
</code></pre> 
<p><img src="https://images2.imgbox.com/35/20/jTACGSXo_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-AGox2tfI-1638016951873)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127190459709.png)]"></p> 
<p>此时<code>--name xxx</code>的作用就出来，因为<code>docker start</code>后面可以通过和生成的ID来进行启动，由于ID是docker自动生成，所以可以通过定义别名来进行更加便捷的启动。</p> 
<h4><a id="___95"></a>创建 + 启动</h4> 
<p>拉取镜像、创建容器、启动容器这些步骤可以通过<code>docker run</code>命令来进行一起执行。</p> 
<pre><code>docker run --name nginx001 -d -p 8080:80 nginx
</code></pre> 
<p><img src="https://images2.imgbox.com/9a/13/4i1AOfeH_o.png" alt="在这里插入图片描述"></p> 
<p>通过run可以把拉取创建启动同时执行，一步到位。如果没有镜像，会去拉取，存在的话就不会拉取了。</p> 
<p>-d 表示容器在后台运行，-p 表示将容器的 80 端口映射到宿主机的 8080 端口。</p> 
<h4><a id="_105"></a>停止容器</h4> 
<p>通过<code>docker stop</code>可以停止容器。</p> 
<pre><code>docker stop myredis
</code></pre> 
<p><img src="https://images2.imgbox.com/f5/5e/vJyN7EfW_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jQt6P1gC-1638016951874)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127192127878.png)]"></p> 
<h4><a id="_115"></a>查看当前运行的容器</h4> 
<pre><code>docker ps
</code></pre> 
<p><img src="https://images2.imgbox.com/20/8d/9RQWLAkG_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-HcpJUqgI-1638016951875)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127191149959.png)]"></p> 
<ul><li>CONTAINER ID：随机生成的唯一64位的十六进制整数</li><li>IMAGE: 创建该容器使用的镜像</li><li>COMMAND: 容器最后运行的命令</li><li>CREATED: 容器创建的时间</li><li>STATUS：容器的状态 
  <ul><li>created（已创建）</li><li>restarting（重启中）</li><li>running（运行中）</li><li>removing（迁移中）</li><li>paused（暂停）</li><li>exited（停止）</li><li>dead（死亡）</li></ul> </li><li>PORTS：容器的端口信息和使用的连接类型</li><li>NAMES：容器的别名</li></ul> 
<h4><a id="_138"></a>查看所有容器</h4> 
<pre><code>docker ps -a
</code></pre> 
<p><img src="https://images2.imgbox.com/17/44/xy7OkL6y_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-0F4Hj8G3-1638016951875)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127191400987.png)]"></p> 
<h4><a id="_147"></a>查看最新创建的容器</h4> 
<pre><code>docker ps -l
</code></pre> 
<p><img src="https://images2.imgbox.com/31/29/OQoZdIRM_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-lpwSDyBz-1638016951876)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127191425675.png)]"></p> 
<h4><a id="N_156"></a>查看最新创建的N个容器</h4> 
<pre><code>docker ps -n=number   
</code></pre> 
<p><img src="https://images2.imgbox.com/94/ba/CEnO3B64_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ihn0QG7e-1638016951876)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127191457515.png)]"></p> 
<h4><a id="_165"></a>删除容器</h4> 
<pre><code>docker rm myUbuntu
</code></pre> 
<p><img src="https://images2.imgbox.com/ff/dd/EqNsYzmc_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-eVYNJIQ4-1638016951876)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127191617911.png)]"></p> 
<p>也可以把name换成id来进行删除，如果是删除正在运行的容器，需要加上<code>-f</code>指令。</p> 
<h4><a id="_176"></a>容器重启</h4> 
<p>restart参数提供了特殊情况下容器的重启策略。</p> 
<ul><li>on：不自动重启容器，默认即此</li><li>on:failure:[max-retries]：在退出状态为非0时才会重启（非正常退出），有一个可选择参数：最大重启次数，可以设置最大重启次数，重启次数达到上限后就会放弃重启</li><li>always：始终重启容器，当docker守护进程启动时，也会无论容器当时的状态为何，都会尝试重启容器</li><li>unless-stopped：始终重启容器，但是当docker守护进程启动时，如果容器已经停止运行，则不会去重启它</li></ul> 
<p>创建新容器可以加上restart参数来设置策略，如果已经创建好的容器，执行<code>docker container update --restart=always myredis</code>来设置重启策略。<br> <img src="https://images2.imgbox.com/ee/8b/PziAo38O_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Mtx5niLc-1638016951877)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127194202653.png)]"></p> 
<h4><a id="_188"></a>查看端口</h4> 
<p>通过<code>docker port</code>可以查看容器端口。<br> <img src="https://images2.imgbox.com/e3/be/i6G7S31l_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_192"></a>查看容器信息</h4> 
<p>通过<code>docker inspect</code>命令可以查看已创建容器的信息。</p> 
<pre><code>docker inspect myredis 
</code></pre> 
<p><img src="https://images2.imgbox.com/aa/bc/qgJR1EVD_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-CQgCYLRH-1638025357205)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127213346131.png)]"></p> 
<p>如果觉得信息过多，可以通过输入format参数来过滤信息，获取自己只想看到的信息。</p> 
<pre><code>//查看容器ID
docker inspect -f={<!-- -->{.ID}} myredis
//对于JSON中的数组，则会返回map格式
docker inspect -f={<!-- -->{.NetworkSettings.Networks}} myredis
//查看容器IP地址
docker inspect -f={<!-- -->{.NetworkSettings.Networks.bridge.IPAddress}} myredis
</code></pre> 
<p><img src="https://images2.imgbox.com/7e/9c/NOYTg9Fy_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-UyvsxSt2-1638025357205)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127214737849.png)]"></p> 
<h4><a id="_217"></a>查看进程</h4> 
<p>Docker中的查看容器的进程和Linux的一样，通过<code>docker top</code>命令进行查看，但是要保证查看的进程处于运行状态。</p> 
<pre><code>docker top myredis
</code></pre> 
<p><img src="https://images2.imgbox.com/1a/7b/6MSOsaM0_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-U5ff10Bw-1638025357206)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127215439719.png)]"></p> 
<h4><a id="_227"></a>查看日志</h4> 
<p>对于后台型的容器，通过<code>docker logs</code>可以查看日志内容。</p> 
<pre><code>docker logs myredis
</code></pre> 
<p><img src="https://images2.imgbox.com/a6/94/jGlP91L3_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-kGAEVk4K-1638025357206)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127220717484.png)]"></p> 
<p>如果想查看实时的日志而不是历史日志，可以使用<code>-f</code>参数，<code>--tail = number</code>表示日志的输出行数，<code>-t</code>表示日志输出时间。</p> 
<p><img src="https://images2.imgbox.com/07/d3/q948Sybn_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-fcGLuPXv-1638025357206)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127221224451.png)]"></p> 
<h4><a id="_241"></a>容器内执行命令</h4> 
<p>通过<code>docker exec</code>可以进到容器里执行命令。</p> 
<pre><code>docker exec -it myubuntu bash
</code></pre> 
<p><img src="https://images2.imgbox.com/b0/77/0ckniTqc_o.png" alt="在这里插入图片描述"><br> <code>docker attach</code>和<code>docker exec</code>拥有相同的效果，不同的是使用 <code>docker exec</code> 即使用户从终端退出，容器也不会停止运行，而使用 <code>docker attach</code> 时，如果用户从终端退出，则容器会停止运行，所以推荐使用<code>docker exec</code> 。</p> 
<h4><a id="_253"></a>导出容器</h4> 
<p>容器导出为我们提供了可以像其他系统一样可以拷贝的功能，通过<code>docker export</code>命令可以导出本地容器。</p> 
<pre><code>docker export myredis &gt; myredis.tar
</code></pre> 
<p><img src="https://images2.imgbox.com/f0/8b/5CCN4TlY_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wnHcPACb-1638110200708)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127222522469.png)]"></p> 
<h4><a id="_264"></a>导入容器</h4> 
<p>通过<code>docker import</code>命令可以导出本地容器。</p> 
<pre><code>cat myredis.tar | docker import - jerryRedis
</code></pre> 
<p><img src="https://images2.imgbox.com/74/f8/qoPVabsD_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-7dR3XKbM-1638110200726)(/Users/chenruijie/Library/Application Support/typora-user-images/image-20211127224234899.png)]"><br> 此时镜像仓库就有了jerryredis的镜像，这时就可以创建使用了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d354c5374cb6e2e6ccefe9423bf0e71f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mmdetection-anchor_head-loss</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b6f087fb475cb9cabb8a243fa9014cdd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">试题 算法训练 车的放置 java 题解 996</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>