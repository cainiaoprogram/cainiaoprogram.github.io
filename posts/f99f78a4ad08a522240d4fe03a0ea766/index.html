<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[KeyarchOS]Chkrootkit后门检测工具的安装 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[KeyarchOS]Chkrootkit后门检测工具的安装" />
<meta property="og:description" content="目录
1 概述
2 安装环境
2.1 操作系统环境
2.2 Chkrootkit版本
3 安装Chkrootkit
3.1 准备gcc编译环境
3.2 编译安装Chkrootkit
3.3 检测当前版本
4 Chkrootkit基本使用
4.1 运行Chkrootkit
4.2 执行静默扫描
4.3 运行Chkrootkit并保存结果到文件
4.4 以详细模式运行Chkrootkit
4.5 显示可能被感染的项目
4.6 检查系统命令是否受感染
4.7 检查网络接口
1 概述 chkrootkit 是一种开源工具，旨在帮助检测 Linux 系统中是否存在 rootkit 和恶意软件。rootkit 是一种用于隐藏恶意活动的恶意软件，它能够有效地掩盖自身和其他恶意行为，使攻击者可以在受感染的系统上保持持久的访问权限。它通过搜索常见的 rootkit 文件和代码，包括 Linux 内核模块 (LKM) 和用户空间 rootkit，来识别潜在的威胁。当 chkrootkit 扫描完成后，它会生成一个报告，列出任何被发现的可疑文件、隐藏进程和异常端口等。报告提供了识别码、文件路径和详细描述，帮助用户评估系统的安全情况。总之，chkrootkit 是一款可以帮助检测 Linux 系统中 rootkit 和恶意软件的开源工具，它简单易用，可以提供对系统安全性的初步评估。
浪潮信息KOS是浪潮信息基于Linux Kernel、OpenAnolis等开源技术自主研发的一款服务器操作系统，支持x86、ARM等主流架构处理器，性能和稳定性居于行业领先地位，具备成熟的 CentOS 迁移和替换能力，可满足云计算、大数据、分布式存储、人工智能、边缘计算等应用场景需求。详细介绍见官网链接浪潮信息KOS服务器操作系统-服务器操作系统-浪潮信息。
2 安装环境 2.1 操作系统环境 版本信息：KeyarchOS 5.8。
硬件平台：X86_64。
2.2 Chkrootkit版本 chkrootkit version 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f99f78a4ad08a522240d4fe03a0ea766/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-13T15:39:27+08:00" />
<meta property="article:modified_time" content="2023-09-13T15:39:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[KeyarchOS]Chkrootkit后门检测工具的安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>目录</strong></p> 
<p id="1%20%E6%A6%82%E8%BF%B0-toc" style="margin-left:0px;"><a href="#1%20%E6%A6%82%E8%BF%B0" rel="nofollow">1 概述</a></p> 
<p id="2%20%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83-toc" style="margin-left:0px;"><a href="#2%20%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83" rel="nofollow">2 安装环境</a></p> 
<p id="2.1%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#2.1%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83" rel="nofollow">2.1 操作系统环境</a></p> 
<p id="2.2%C2%A0Chkrootkit%E7%89%88%E6%9C%AC-toc" style="margin-left:40px;"><a href="#2.2%C2%A0Chkrootkit%E7%89%88%E6%9C%AC" rel="nofollow">2.2 Chkrootkit版本</a></p> 
<p id="3%20%E5%AE%89%E8%A3%85Chkrootkit-toc" style="margin-left:0px;"><a href="#3%20%E5%AE%89%E8%A3%85Chkrootkit" rel="nofollow">3 安装Chkrootkit</a></p> 
<p id="3.1%20%E5%87%86%E5%A4%87gcc%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83-toc" style="margin-left:40px;"><a href="#3.1%20%E5%87%86%E5%A4%87gcc%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83" rel="nofollow">3.1 准备gcc编译环境</a></p> 
<p id="3.2%20%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Chkrootkit-toc" style="margin-left:40px;"><a href="#3.2%20%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Chkrootkit" rel="nofollow">3.2 编译安装Chkrootkit</a></p> 
<p id="3.3%20%E6%A3%80%E6%B5%8B%E5%BD%93%E5%89%8D%E7%89%88%E6%9C%AC-toc" style="margin-left:40px;"><a href="#3.3%20%E6%A3%80%E6%B5%8B%E5%BD%93%E5%89%8D%E7%89%88%E6%9C%AC" rel="nofollow">3.3 检测当前版本</a></p> 
<p id="4%C2%A0Chkrootkit%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-toc" style="margin-left:0px;"><a href="#4%C2%A0Chkrootkit%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8" rel="nofollow">4 Chkrootkit基本使用</a></p> 
<p id="4.1%20%E8%BF%90%E8%A1%8CChkrootkit-toc" style="margin-left:40px;"><a href="#4.1%20%E8%BF%90%E8%A1%8CChkrootkit" rel="nofollow">4.1 运行Chkrootkit</a></p> 
<p id="4.2%20%E6%89%A7%E8%A1%8C%E9%9D%99%E9%BB%98%E6%89%AB%E6%8F%8F-toc" style="margin-left:40px;"><a href="#4.2%20%E6%89%A7%E8%A1%8C%E9%9D%99%E9%BB%98%E6%89%AB%E6%8F%8F" rel="nofollow">4.2 执行静默扫描</a></p> 
<p id="4.3%20%E8%BF%90%E8%A1%8CChkrootkit%E5%B9%B6%E4%BF%9D%E5%AD%98%E7%BB%93%E6%9E%9C%E5%88%B0%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#4.3%20%E8%BF%90%E8%A1%8CChkrootkit%E5%B9%B6%E4%BF%9D%E5%AD%98%E7%BB%93%E6%9E%9C%E5%88%B0%E6%96%87%E4%BB%B6" rel="nofollow">4.3 运行Chkrootkit并保存结果到文件</a></p> 
<p id="4.4%20%E4%BB%A5%E8%AF%A6%E7%BB%86%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8CChkrootkit-toc" style="margin-left:40px;"><a href="#4.4%20%E4%BB%A5%E8%AF%A6%E7%BB%86%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8CChkrootkit" rel="nofollow">4.4 以详细模式运行Chkrootkit</a></p> 
<p id="4.5%20%E6%98%BE%E7%A4%BA%E5%8F%AF%E8%83%BD%E8%A2%AB%E6%84%9F%E6%9F%93%E7%9A%84%E9%A1%B9%E7%9B%AE-toc" style="margin-left:40px;"><a href="#4.5%20%E6%98%BE%E7%A4%BA%E5%8F%AF%E8%83%BD%E8%A2%AB%E6%84%9F%E6%9F%93%E7%9A%84%E9%A1%B9%E7%9B%AE" rel="nofollow">4.5 显示可能被感染的项目</a></p> 
<p id="4.6%20%E6%A3%80%E6%9F%A5%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%98%AF%E5%90%A6%E5%8F%97%E6%84%9F%E6%9F%93-toc" style="margin-left:40px;"><a href="#4.6%20%E6%A3%80%E6%9F%A5%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%98%AF%E5%90%A6%E5%8F%97%E6%84%9F%E6%9F%93" rel="nofollow">4.6 检查系统命令是否受感染</a></p> 
<p id="4.7%20%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3-toc" style="margin-left:40px;"><a href="#4.7%20%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3" rel="nofollow">4.7 检查网络接口</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2>1 概述</h2> 
<p><span style="color:#000000;">chkrootkit </span><span style="color:#000000;">是一种开源工具，旨在帮助检测 Linux 系统中是否存在 rootkit 和恶意软件。rootkit 是一种用于隐藏恶意活动的恶意软件，它能够有效地掩盖自身和其他恶意行为，使攻击者可以在受感染的系统上保持持久的访问权限。它通过搜索常见的 rootkit 文件和代码，包括 Linux 内核模块 (LKM) 和用户空间 rootkit，来识别潜在的威胁。当 chkrootkit 扫描完成后，它会生成一个报告，列出任何被发现的可疑文件、隐藏进程和异常端口等。报告提供了识别码、文件路径和详细描述，帮助用户评估系统的安全情况。总之，chkrootkit 是一款可以帮助检测 Linux 系统中 rootkit 和恶意软件的开源工具，它简单易用，可以提供对系统安全性的初步评估。</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">浪潮信息KOS是浪潮信息基于Linux Kernel、OpenAnolis等开源技术自主研发的一款服务器操作系统，支持x86、ARM等主流架构处理器，性能和稳定性居于行业领先地位，具备成熟的 CentOS 迁移和替换能力，可满足云计算、大数据、分布式存储、人工智能、边缘计算等应用场景需求。详细介绍见官网链接<a href="https://zh.ieisystem.com/product/kos/9453.html" rel="nofollow" title="浪潮信息KOS服务器操作系统-服务器操作系统-浪潮信息">浪潮信息KOS服务器操作系统-服务器操作系统-浪潮信息</a>。</p> 
<h2 id="2%20%E5%AE%89%E8%A3%85%E7%8E%AF%E5%A2%83">2 安装环境</h2> 
<h3 id="2.1%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83">2.1 操作系统环境</h3> 
<p style="margin-left:.0001pt;text-align:justify;">版本信息：KeyarchOS 5.8。</p> 
<p style="margin-left:.0001pt;text-align:justify;">硬件平台：X86_64。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="98" src="https://images2.imgbox.com/af/5b/j08HExAD_o.png" width="1200"></p> 
<h3 id="2.2%C2%A0Chkrootkit%E7%89%88%E6%9C%AC">2.2 Chkrootkit版本</h3> 
<p style="margin-left:.0001pt;text-align:justify;">chkrootkit version 0.58b。</p> 
<h2 id="3%20%E5%AE%89%E8%A3%85Chkrootkit">3 安装Chkrootkit</h2> 
<h3 id="3.1%20%E5%87%86%E5%A4%87gcc%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83">3.1 准备gcc编译环境</h3> 
<p style="margin-left:.0001pt;text-align:justify;">执行下述三条命令：</p> 
<p style="margin-left:.0001pt;text-align:justify;">yum -y install gcc</p> 
<p style="margin-left:.0001pt;text-align:justify;">yum -y install gcc-c++</p> 
<p style="margin-left:.0001pt;text-align:justify;">yum -y install make</p> 
<h3 id="3.2%20%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Chkrootkit">3.2 编译安装Chkrootkit</h3> 
<p style="margin-left:.0001pt;text-align:justify;">1.下载源码包：wget ftp://ftp.pangeia.com.br/pub/seg/pac/chkrootkit.tar.gz</p> 
<p style="margin-left:.0001pt;text-align:justify;">2. 解压：tar zxf chkrootkit.tar.gz</p> 
<p style="margin-left:.0001pt;text-align:justify;">3. 编译安装：make sense</p> 
<p style="margin-left:.0001pt;text-align:justify;">4. 把编译好的文件部署到/usr/local/目录中，并删除遗留的文件：</p> 
<p style="margin-left:.0001pt;text-align:justify;">cp -r chkrootkit-* /usr/local/chkrootkit</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="363" src="https://images2.imgbox.com/f9/30/ih9UPTHS_o.png" width="880"></p> 
<p style="margin-left:.0001pt;text-align:justify;">至此，安装完毕。</p> 
<h3 id="3.3%20%E6%A3%80%E6%B5%8B%E5%BD%93%E5%89%8D%E7%89%88%E6%9C%AC" style="background-color:transparent;">3.3 检测当前版本</h3> 
<p style="margin-left:.0001pt;text-align:justify;">检测当前版本：/usr/local/chkrootkit/chkrootkit -V</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="50" src="https://images2.imgbox.com/dc/e2/HS7uDytA_o.png" width="816"></p> 
<h2 id="4%C2%A0Chkrootkit%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8">4 Chkrootkit基本使用</h2> 
<h3 id="4.1%20%E8%BF%90%E8%A1%8CChkrootkit">4.1 运行Chkrootkit</h3> 
<p style="margin-left:.0001pt;text-align:justify;">执行命令：/usr/local/chkrootkit/chkrootkit</p> 
<p style="margin-left:.0001pt;text-align:justify;">扫描结果后面如果是：not infected/not tested/nothing found/nothing deleted 之类的就表示正常，可以不用管。如果是INFECTED那就要小心了。infected表示已经感染，not infected表示未感染。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="733" src="https://images2.imgbox.com/3b/39/puOev5Z8_o.png" width="525"><img alt="" class="left" height="807" src="https://images2.imgbox.com/5f/21/Y2rjYxbC_o.png" width="631"></p> 
<h3 id="4.2%20%E6%89%A7%E8%A1%8C%E9%9D%99%E9%BB%98%E6%89%AB%E6%8F%8F">4.2 执行静默扫描</h3> 
<p style="margin-left:.0001pt;text-align:justify;">运行 /usr/local/chkrootkit/chkrootkit -q 命令将使chkrootkit以“静默”模式运行，并只输出检测结果的摘要信息，而不显示每个检测项目的详细指标。具体来说，-q选项将启用chkrootkit的“简易”模式，以便更容易地集成到自动化脚本和报告中。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="651" src="https://images2.imgbox.com/8a/84/RBWV6fel_o.png" width="580"></p> 
<h3 id="4.3%20%E8%BF%90%E8%A1%8CChkrootkit%E5%B9%B6%E4%BF%9D%E5%AD%98%E7%BB%93%E6%9E%9C%E5%88%B0%E6%96%87%E4%BB%B6">4.3 运行Chkrootkit并保存结果到文件</h3> 
<p style="margin-left:.0001pt;text-align:justify;">运行 /usr/local/chkrootkit/chkrootkit &gt; scan_result.txt 命令将把chkrootkit的扫描结果保存到名为scan_result.txt的文本文件中。这条命令通过重定向操作符“&gt;”将chkrootkit的输出定向到指定的文件中，而不是在终端上显示结果。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="421" src="https://images2.imgbox.com/c8/23/fZQh4rJX_o.png" width="820"></p> 
<h3 id="4.4%20%E4%BB%A5%E8%AF%A6%E7%BB%86%E6%A8%A1%E5%BC%8F%E8%BF%90%E8%A1%8CChkrootkit">4.4 以详细模式运行Chkrootkit</h3> 
<p style="margin-left:.0001pt;text-align:justify;">运行 /usr/local/chkrootkit/chkrootkit -x 命令将以详细模式运行chkrootkit，并显示每个检测项目的详细信息。使用 -x 选项会输出更详细的结果，其中包含有关每个检测项目的更多信息和解释。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="600" src="https://images2.imgbox.com/81/5f/WdrHkRtS_o.png" width="615"></p> 
<h3 id="4.5%20%E6%98%BE%E7%A4%BA%E5%8F%AF%E8%83%BD%E8%A2%AB%E6%84%9F%E6%9F%93%E7%9A%84%E9%A1%B9%E7%9B%AE">4.5 显示可能被感染的项目</h3> 
<p style="margin-left:.0001pt;"><span style="color:#000000;">运行 /usr/local/chkrootkit/chkrootkit | grep INFECTED 命令来筛选出含有 "INFECTED" 字样的chkrootkit扫描结果。该命令通过使用管道操作符 | 将chkrootkit的输出传递给grep命令，然后使用grep命令筛选出包含 "INFECTED" 的行。这样可以直接显示可能被感染的项目。这里是刚装的新系统，chkrootkit没有报结果，表示没有被感染。</span></p> 
<p><img alt="" class="left" height="44" src="https://images2.imgbox.com/35/38/dH4e9kwu_o.png" width="865"></p> 
<h3 id="4.6%20%E6%A3%80%E6%9F%A5%E7%B3%BB%E7%BB%9F%E5%91%BD%E4%BB%A4%E6%98%AF%E5%90%A6%E5%8F%97%E6%84%9F%E6%9F%93">4.6 检查系统命令是否受感染</h3> 
<p style="margin-left:.0001pt;text-align:left;">Chkrootkit也可检查系统命令是否受感染，例如ps、ls：</p> 
<p style="margin-left:.0001pt;text-align:left;">执行命令：/usr/local/chkrootkit/chkrootkit ps ls</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" class="left" height="84" src="https://images2.imgbox.com/23/19/OtDs6OAq_o.png" width="778"></p> 
<h3 id="4.7%20%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E6%8E%A5%E5%8F%A3">4.7 检查网络接口</h3> 
<p style="margin-left:.0001pt;"><span style="color:#000000;">chkrootkit</span><span style="color:#000000;">可传入sniffer参数来检查网络接口是否处于混杂模式，混杂模式下的网络接口会接受所有经过自己的数据流，一般管理员调试或者黑客入侵搜集信息时会用到，而正常情况下网络接口都处于非混杂模式，即只接受目标地址是自己的数据流，wireshark抓包即混杂模式接受所有数据流。</span></p> 
<p style="margin-left:.0001pt;"><span style="color:#000000;">执行命令： /usr/local/chkrootkit/chkrootkit sniffer</span></p> 
<p><img alt="" height="142" src="https://images2.imgbox.com/91/04/cPlnfML3_o.png" width="865"></p> 
<p><img alt="" height="371" src="https://images2.imgbox.com/43/fa/ZmXiUXPF_o.png" width="900"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/786095ee75f8b4fb1e95010249f1ead7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;：多态 ( 语法 )</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d81485cf82441ef8d878cbe942f92038/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Nuxt系列文章】一文读懂Nuxt3的网络请求</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>