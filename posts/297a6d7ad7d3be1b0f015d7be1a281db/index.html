<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Centos8中Hadoop3.3.1安装详细过程（含图文） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Centos8中Hadoop3.3.1安装详细过程（含图文）" />
<meta property="og:description" content="目录 Hadoop介绍：
一、创建hadoop用户
二、安装SSH、配置SSH无密码登录
三、卸载jdk环境
四、安装新的java版本
五、安装 Hadoop 3
六、配置hadoop环境变量
七、Hadoop伪分布式配置
1、Hadoop 环境变量设置
2、Hadoop 配置文件的修改
（1）修改配置文件 core-site.xml
（2）修改配置文件 hdfs-site.xml：
（3）修改配置文件 hadoop-env.sh
（4）配置 mapred-site.xml
（5）配置yarn-site.xml
（6）进入前面创建的data对hdfs namenode初始化
（7）启动hadoop 使用“ start-dfs.sh ”开启 NaneNode 和 DataNode 守护进程
（8）使用“ start-yarn.sh ”开启 ResourceManager 和 NodeManager 守护进程
Hadoop介绍： Hadoop的核心由3个部分组成：
HDFS: Hadoop Distributed File System，分布式文件系统，hdfs还可以再细分为NameNode、SecondaryNameNode、DataNode。
YARN: Yet Another Resource Negotiator，资源管理调度系统
Mapreduce：分布式运算框架
下面介绍安装 Hadoop
虚拟机： VMware 环境： Linux 系统 centos8 hadoop： hadoop-3.3.1 ​​​​​​​ 一、创建hadoop用户 VM上安装centos8的主机，设置初始内存为2G，硬盘为50G，安装成功后新建用户hadoop，设置hadoop的密码并授予hadoop用户sudo权限(不过后面主要还是用root操作)
如果你安装 CentOS 的时候不是用的 “hadoop” 用户，那么需要增加一个名为 hadoop 的用户。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/297a6d7ad7d3be1b0f015d7be1a281db/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-02T11:26:41+08:00" />
<meta property="article:modified_time" content="2022-12-02T11:26:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Centos8中Hadoop3.3.1安装详细过程（含图文）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong> </p> 
<p id="Hadoop%E4%BB%8B%E7%BB%8D%EF%BC%9A-toc" style="margin-left:0px;"><a href="#Hadoop%E4%BB%8B%E7%BB%8D%EF%BC%9A" rel="nofollow">Hadoop介绍：</a></p> 
<p id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BAhadoop%E7%94%A8%E6%88%B7-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BAhadoop%E7%94%A8%E6%88%B7" rel="nofollow">一、创建hadoop用户</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85SSH%E3%80%81%E9%85%8D%E7%BD%AESSH%E6%97%A0%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85SSH%E3%80%81%E9%85%8D%E7%BD%AESSH%E6%97%A0%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95" rel="nofollow">二、安装SSH、配置SSH无密码登录</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85jdk%E7%8E%AF%E5%A2%83-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85jdk%E7%8E%AF%E5%A2%83" rel="nofollow">三、卸载jdk环境</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E6%96%B0%E7%9A%84java%E7%89%88%E6%9C%AC-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E6%96%B0%E7%9A%84java%E7%89%88%E6%9C%AC" rel="nofollow">四、安装新的java版本</a></p> 
<p id="%E5%9B%9B%E3%80%81%E5%AE%89%E8%A3%85%20Hadoop%203-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E5%AE%89%E8%A3%85%20Hadoop%203" rel="nofollow">五、安装 Hadoop 3</a></p> 
<p id="%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AEhadoop%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AEhadoop%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F" rel="nofollow">六、配置hadoop环境变量</a></p> 
<p id="%E5%85%AD%E3%80%81Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE" rel="nofollow">七、Hadoop伪分布式配置</a></p> 
<p id="1.Hadoop%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AE%BE%E7%BD%AE-toc" style="margin-left:40px;"><a href="#1.Hadoop%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AE%BE%E7%BD%AE" rel="nofollow">1、Hadoop 环境变量设置</a></p> 
<p id="main-toc-toc" style="margin-left:40px;"><a href="#main-toc" rel="nofollow">2、Hadoop 配置文件的修改</a></p> 
<p id="%EF%BC%881%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20core-site.xml-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20core-site.xml" rel="nofollow">（1）修改配置文件 core-site.xml</a></p> 
<p id="(2)%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20hdfs-site.xml%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%282%29%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20hdfs-site.xml%EF%BC%9A" rel="nofollow">（2）修改配置文件 hdfs-site.xml：</a></p> 
<p id="%EF%BC%883%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20hadoop-env.sh-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20hadoop-env.sh" rel="nofollow">（3）修改配置文件 hadoop-env.sh</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AE%20mapred-site.xml-toc" style="margin-left:80px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%91%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AE%20mapred-site.xml" rel="nofollow">（4）配置 mapred-site.xml</a></p> 
<p id="%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AEyarn-site.xml-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AEyarn-site.xml" rel="nofollow">（5）配置yarn-site.xml</a></p> 
<p id="%EF%BC%886%EF%BC%89%E8%BF%9B%E5%85%A5%E5%89%8D%E9%9D%A2%E5%88%9B%E5%BB%BA%E7%9A%84data%E5%AF%B9hdfs%20namenode%E5%88%9D%E5%A7%8B%E5%8C%96-toc" style="margin-left:80px;"><a href="#%EF%BC%886%EF%BC%89%E8%BF%9B%E5%85%A5%E5%89%8D%E9%9D%A2%E5%88%9B%E5%BB%BA%E7%9A%84data%E5%AF%B9hdfs%20namenode%E5%88%9D%E5%A7%8B%E5%8C%96" rel="nofollow">（6）进入前面创建的data对hdfs namenode初始化</a></p> 
<p id="%EF%BC%887%EF%BC%89%E5%90%AF%E5%8A%A8hadoop%C2%A0%E4%BD%BF%E7%94%A8%E2%80%9C%20start-dfs.sh%20%E2%80%9D%E5%BC%80%E5%90%AF%20NaneNode%20%E5%92%8C%20DataNode%20%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%EF%BC%887%EF%BC%89%E5%90%AF%E5%8A%A8hadoop%C2%A0%E4%BD%BF%E7%94%A8%E2%80%9C%20start-dfs.sh%20%E2%80%9D%E5%BC%80%E5%90%AF%20NaneNode%20%E5%92%8C%20DataNode%20%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B" rel="nofollow">（7）启动hadoop 使用“ start-dfs.sh ”开启 NaneNode 和 DataNode 守护进程</a></p> 
<p id="%EF%BC%888%EF%BC%89%E4%BD%BF%E7%94%A8%E2%80%9C%20start-yarn.sh%20%E2%80%9D%E5%BC%80%E5%90%AF%20ResourceManager%20%E5%92%8C%20NodeManager%20%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B-toc" style="margin-left:80px;"><a href="#%EF%BC%888%EF%BC%89%E4%BD%BF%E7%94%A8%E2%80%9C%20start-yarn.sh%20%E2%80%9D%E5%BC%80%E5%90%AF%20ResourceManager%20%E5%92%8C%20NodeManager%20%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B" rel="nofollow">（8）使用“ start-yarn.sh ”开启 ResourceManager 和 NodeManager 守护进程</a></p> 
<hr> 
<h2 id="Hadoop%E4%BB%8B%E7%BB%8D%EF%BC%9A"><strong>Hadoop介绍：</strong></h2> 
<p>Hadoop的核心由3个部分组成：</p> 
<p>HDFS: Hadoop Distributed File System，分布式文件系统，hdfs还可以再细分为NameNode、SecondaryNameNode、DataNode。</p> 
<p>YARN: Yet Another Resource Negotiator，资源管理调度系统</p> 
<p>Mapreduce：分布式运算框架</p> 
<p>下面介绍安装 Hadoop</p> 
<pre><code class="language-cpp">虚拟机：   VMware
环境：      Linux 系统 centos8
hadoop： hadoop-3.3.1
​​​​​​​</code></pre> 
<h2 id="%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BAhadoop%E7%94%A8%E6%88%B7">一、创建hadoop用户</h2> 
<p>VM上安装centos8的主机，设置初始内存为2G，硬盘为50G，安装成功后新建用户hadoop，设置hadoop的密码并授予hadoop用户sudo权限(不过后面主要还是用root操作)</p> 
<p>如果你安装 CentOS 的时候不是用的 “hadoop” 用户，那么需要增加一个名为 hadoop 的用户。</p> 
<p>首先点击左上角的 “应用程序” -&gt; “系统工具” -&gt; “终端”，首先在终端中输入 su ，按回车，输入 root 密码以 root 用户登录，接着执行命令创建新用户</p> 
<pre><code class="language-cpp">su              # 上述提到的以 root 用户登录
useradd -m hadoop -s /bin/bash   # 创建新用户hadoop，并使用 /bin/bash 作为shell。
passwd hadoop</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/15/2f/UEZ252Y7_o.png"><br> 可为 hadoop 用户增加管理员权限，方便部署，避免一些对新手来说比较棘手的权限问题，执行：</p> 
<pre><code class="language-cpp">visudo</code></pre> 
<p>如下图，找到 root ALL=(ALL) ALL 这行（应该在第98行，可以先按一下键盘上的 ESC 键，然后输入 :98 (按一下冒号，接着输入98，再按回车键)，可以直接跳到第98行 ），然后按i，进入插入模式，在这行下面增加一行内容：</p> 
<pre><code class="language-cpp">hadoop    ALL=(ALL)    ALL </code></pre> 
<p>如下图所示：<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/26/85/FaFb6n5W_o.png"></p> 
<p>添加上一行内容后，先按一下键盘上的 ESC 键，然后输入 :wq (输入冒号还有wq，这是vi/vim编辑器的保存方法)，再按回车键保存退出就可以了。</p> 
<p>最后注销当前用户(点击屏幕右上角的用户名，选择退出-&gt;注销)，在登陆界面使用刚创建的 hadoop 用户进行登陆。（如果已经是 hadoop 用户，且在终端中使用 su 登录了 root 用户，那么需要执行 exit 退出 root 用户状态）</p> 
<p><img alt="" src="https://images2.imgbox.com/38/1c/L7qYqKR2_o.png"></p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85SSH%E3%80%81%E9%85%8D%E7%BD%AESSH%E6%97%A0%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95">二、安装SSH、配置SSH无密码登录</h2> 
<p><br> 集群、单节点模式都需要用到 SSH 登陆（类似于远程登陆，你可以登录某台 Linux 主机，并且在上面运行命令），一般情况下，CentOS 默认已安装了 SSH client、SSH server，打开终端执行如下命令进行检验：</p> 
<pre><code class="language-cpp">rpm -qa | grep ssh</code></pre> 
<p>如果返回的结果如下图所示，包含了 SSH client 跟 SSH server，则不需要再安装。</p> 
<p><img alt="" src="https://images2.imgbox.com/6d/18/s8oE5moS_o.png"></p> 
<p>若需要安装，则可以通过 yum 进行安装（安装过程中会让你输入 [y/N]，输入 y 即可）：</p> 
<pre><code class="language-cpp">sudo yum install openssh-clients
sudo yum install openssh-server</code></pre> 
<p>接着执行如下命令测试一下 SSH 是否可用：</p> 
<pre><code class="language-cpp">ssh localhost</code></pre> 
<p>此时会有如下提示(SSH首次登陆提示)，输入 yes 。然后按提示输入密码 hadoop，这样就登陆到本机了。</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/ca/13/axxeQhQX_o.png"></p> 
<p> 但这样登陆是需要每次输入密码的，我们需要配置成SSH无密码登陆比较方便。</p> 
<p>首先输入 exit 退出刚才的 ssh，就回到了我们原先的终端窗口，然后利用 ssh-keygen 生成密钥，并将密钥加入到授权中：</p> 
<pre><code class="language-cpp">    exit                           # 退出刚才的 ssh localhost
    cd ~/.ssh/                     # 若没有该目录，请先执行一次ssh localhost
    ssh-keygen -t rsa              # 会有提示，都按回车就可以
    cat id_rsa.pub &gt;&gt; authorized_keys  # 加入授权
    chmod 600 ./authorized_keys    # 修改文件权限
    ssh-copy-id localhost          # 分发秘钥给主机(主机名)
    ssh-copy-id localhost          # 再次分发秘钥给主机(终端中默认的主机民称)</code></pre> 
<p><img alt="" height="848" src="https://images2.imgbox.com/0d/03/SpU7FGzT_o.png" width="1200">测试ssh是否分配给自定义的主机上</p> 
<pre><code class="language-cpp">ssh localhost </code></pre> 
<p>此时再用 ssh hjk 命令，无需输入密码就可以直接登陆了，如下图所示。</p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/b4/5b/7kyDiPfV_o.png" width="978"></p> 
<h2 id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85jdk%E7%8E%AF%E5%A2%83">三、卸载jdk环境</h2> 
<p>因为 Hadoop 是以 java 开发的，所以必须先安装 java 环境</p> 
<p>安装之前先卸载centos8自带的OpenJDK</p> 
<p>1、建议切换到root 账户</p> 
<pre><code># 切换到root账户
su -
</code></pre> 
<p>2、<strong>查询系统是否以安装jdk</strong></p> 
<pre><code>rpm -qa|grep java
</code></pre> 
<p><img alt="image-20220418224602797" src="https://images2.imgbox.com/0b/0e/7SkqQObQ_o.png"></p> 
<p></p> 
<p>3、卸载已安装的jdk</p> 
<pre><code class="language-cpp"># 温馨提示，文件名仅供参考，具体以自己的为准
rpm -e --nodeps java-1.8.0-openjdk-1.8.0.161-2.b14.el7.x86_64
rpm -e --nodeps java-1.8.0-openjdk-headless-1.8.0.161-2.b14.el7.x86_64
</code></pre> 
<p>4、卸载可能存在的CentOS自带的java环境</p> 
<pre><code class="language-cpp">pm -qa|grep java

rpm -qa|grep jdk

rpm -qa|grep gcj 
</code></pre> 
<p><img alt="**在这里插入图片描述**" src="https://images2.imgbox.com/d0/0a/YH3dDlBK_o.png"></p> 
<p>5、验证一下是否还有jdk</p> 
<pre><code class="language-cpp">java -version    # 查看版本</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/76/be/zyHPQm2F_o.png"></p> 
<p></p> 
<pre><code class="language-cpp">java -version</code></pre> 
<h2 id="%E4%B8%89%E3%80%81%E5%AE%89%E8%A3%85%E6%96%B0%E7%9A%84java%E7%89%88%E6%9C%AC">四、安装新的java版本</h2> 
<p><br> 下载JDK环境<br> 首先登陆oracle官网下载java源码包：<br> https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html<br> 这里使用下载选择的是以tar.gz结尾的，即下载安装包</p> 
<p><img alt="" src="https://images2.imgbox.com/59/6a/bfYMwY31_o.png"><br> 目前，官网下载JDK安装包需要注册oracle账号，需要自己注册一个才能使用。<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/fd/7c/zdXdCAFc_o.png"></p> 
<p> 因为本机是M1的,经过测试需要下载的是第二个为jdk-8u351-linux-aarch64.tar.gz</p> 
<p>2.用远程传输文件的FileZilla软件将下载好的jdk-8u351-linux-aarch64.tar.gz上传到centos8下 /opt</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/06/30/MQ5qd4Gp_o.png" width="1200"></p> 
<p>3.解压JDK安装包</p> 
<p>打开终端，输入如下解压命令</p> 
<pre><code class="language-cpp">cd /opt     #定位到目标目录

tar xf jdk-8u351-linux-aarch64.tar.gz   #解压文件

ls          # 查看目录下文件</code></pre> 
<p>4.在 usr 中创建合适的文件夹存放解压后的文件，注意新建的文件夹需要后期配置环境路径使用。</p> 
<p>新建文件夹命令：（mkdir后面一定要加空格）</p> 
<pre><code class="language-cpp">cd /usr

mkdir /usr/soft

mkdir /usr/soft/java</code></pre> 
<p>验证是否创建</p> 
<pre><code class="language-cpp">cd /usr/soft

ls</code></pre> 
<p>5.将解压后的文件移动到相应文件夹</p> 
<pre><code class="language-cpp">cd /opt

mv jdk1.8.0_351 /usr/soft/java</code></pre> 
<p>安装完成之后要进行环境配置，这里需要编辑编辑/etc/profile文件<br> 编辑命令：</p> 
<pre><code class="language-cpp">vim /etc/profile</code></pre> 
<p><br> 在执行完上方命令之后点击i键位让文件可以修改，进行文件编写</p> 
<p><img alt="" src="https://images2.imgbox.com/60/c0/yYrmVVUh_o.png"><br> 在文件末尾添加如下配置：</p> 
<pre><code class="language-XML">export JAVA_HOME=/usr/soft/java/jdk1.8.0_351  #指定自己的jdk文件路径
export CLASSPATH=.:$JAVA_HOME/jre/lib/rt.jar:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
export PATH=$PATH:$JAVA_HOME/bin</code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/3d/44/Yco5d1QG_o.png"></p> 
<p>编写完成以后，我们要保存退出，那么我们就要使用底部模式，这时候使用ESC键退出插入模式回到命令模式。</p> 
<p>（1） 按一下Esc</p> 
<p>然后注意窗口的最下方一行（此时还是空白或者有一串默认的字符），</p> 
<p><br> （2）输入一个冒号:<br> 输入冒号: 需要是使用 “shirt” +" : "<br> 这时最下面那行就会显示出一个冒号<br> （3）输入：wq 就会自动关闭文件并保存文件。</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/39/a7/2keRTzW3_o.png"><br> 3. 文件生效<br> 对于/etc/profile编写完成之后是不够的，还需要最后一个步骤，就是让刚刚我们修改的文件变成有效起来，所以我们再输入一个命令，让修改生效。</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/8f/33/aKwGhWlr_o.png">  </p> 
<p>生效命令：</p> 
<pre><code class="language-cpp">source /etc/profile</code></pre> 
<p><br><img alt="" src="https://images2.imgbox.com/68/24/7YvOAhS6_o.png"></p> 
<p></p> 
<p>最后我们来进行一下测试，验证是否安装成功及环境变量是否配置成功</p> 
<p>测试命令：</p> 
<pre><code>java -version
</code></pre> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/c1/37/lWvaZ9m9_o.png"></p> 
<h2 id="%E5%9B%9B%E3%80%81%E5%AE%89%E8%A3%85%20Hadoop%203">五、安装 Hadoop 3</h2> 
<p>Hadoop 3 可以通过下面两个链接下载：</p> 
<p>https://mirrors.cnnic.cn/apache/hadoop/common/<br> http://mirror.bit.edu.cn/apache/hadoop/common/</p> 
<p>网盘下载：</p> 
<p>本教程选择的是 3.3.0 版本，下载时会有多个版本<br> hadoop-3.x.y.tar.gz 这是编译好的文件<br> hadoop-3.x.y.src.tar.gz 包含 的是 Hadoop 源代码，需要进行编译才可使用。</p> 
<p><img alt="" height="1098" src="https://images2.imgbox.com/65/88/MipxwoVa_o.png" width="1200"></p> 
<p><img alt="" height="802" src="https://images2.imgbox.com/87/64/HAl1Os8h_o.png" width="1200"><br> 这里下载hadoop-3.3.1-aarch64.tar.gz</p> 
<p>将下载好的安装包解压：</p> 
<pre><code class="language-cpp">cd /opt
tar -zxvf hadoop-3.3.1-aarch64.tar.gz
</code></pre> 
<p> 在 usr 中创建合适的文件夹存放解压后的文件，注意新建的文件夹需要后期配置环境路径使用。（本教程按本人所习惯的存放在 soft 文件夹中）</p> 
<p>新建文件夹命令：（mkdir后面一定要加空格）</p> 
<pre><code>mkdir /usr/soft/hadoop
</code></pre> 
<p>将解压后的文件移动到相应文件夹</p> 
<pre><code class="language-XML">mv hadoop-3.3.1 /usr/soft/hadoop</code></pre> 
<p> !!!注意:查看下移动过去是否是整个文件夹复制过去的,还是复制文件没有带目录对后面配置环境变量很重要</p> 
<h2 id="%E4%BA%94%E3%80%81%E9%85%8D%E7%BD%AEhadoop%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">六、配置hadoop<a href="https://so.csdn.net/so/search?q=%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F&amp;spm=1001.2101.3001.7020" title="环境变量">环境变量</a></h2> 
<ol><li>安装完成之后要进行环境配置，这里需要编辑编辑/etc/profile文件</li></ol> 
<p>编辑命令：</p> 
<pre><code class="language-cpp">vim /etc/profile
</code></pre> 
<p>在执行完上方命令之后点击i键位让文件可以修改，进行文件编写</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/40/ec/ihp9YtCV_o.png"></p> 
<p></p> 
<p>2. 在文件末尾添加如下配置：</p> 
<pre><code class="language-cpp">export HADOOP_HOME=/usr/soft/hadoop     #配置Hadoop的路径
export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH
</code></pre> 
<p>如果带目录复制的即为</p> 
<pre><code class="language-cpp">export HADOOP_HOME=/usr/soft/hadoop/hadoop-3.3.1
export PATH=$HADOOP_HOME/bin:$HADOOP_HOME/sbin:$PATH</code></pre> 
<p><br> 编写完成以后，我们要保存退出，那么我们就要使用底部模式，这时候使用ESC键退出插入模式回到命令模式。<br> （1）按一下Esc<br> （2）输入一个冒号: 输入冒号需要是使用 “shirt” +" : "<br> （3）输入：wq 就会自动关闭文件并保存文件。</p> 
<p>!!注意： 这里可能会由于设置全局变量导致 后边运行datanode出错</p> 
<p>文件生效<br> 对于/etc/profile编写完成之后是不够的，还需要最后一个步骤，就是让刚刚我们修改的文件变成有效起来，所以我们再输入一个命令，让修改生效。<br> 生效命令：</p> 
<pre><code class="language-cpp">source /etc/profile       #刷新环境变量配置</code></pre> 
<p><br> 验证是否安装成功, 最后我们来进行一下测试，看看我们的环境变量是否配置成功</p> 
<p>测试命令：</p> 
<pre><code class="language-cpp">hadoop version</code></pre> 
<p><img alt="" height="360" src="https://images2.imgbox.com/6e/93/Dp0yV8Fx_o.png" width="1200"></p> 
<h2 id="%E5%85%AD%E3%80%81Hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E9%85%8D%E7%BD%AE">七、Hadoop伪分布式配置</h2> 
<h3 id="1.Hadoop%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E8%AE%BE%E7%BD%AE"><a name="t8"></a><a id="Hadoop__244"></a>1、Hadoop 环境变量设置</h3> 
<p>(1) 为了避免hadoop启动时报错hadoop启动报错：Attempting to operate on hdfs namenode as root</p> 
<p>解决方案1：</p> 
<p>编辑命令：</p> 
<pre><code class="language-cpp">vim /etc/profile          #配置环境启动hadoop, 都以root启动
source /etc/profile       #刷新环境变量配置</code></pre> 
<pre><code class="language-cpp">export HDFS_NAMENODE_USER=root
export HDFS_DATANODE_USER=root
export HDFS_SECONDARYNAMENODE_USER=root
export YARN_RESOURCEMANAGER_USER=root
export YARN_NODEMANAGER_USER=root
</code></pre> 
<p> 解决方案2：</p> 
<p>写在最前注意：<br> 1、master(用户)，slave(用户)都需要修改start-dfs.sh，stop-dfs.sh，start-yarn.sh，stop-yarn.sh四个文件<br> 2、如果你的Hadoop是另外启用其它用户来启动，记得将root改为对应用户</p> 
<p>HDFS格式化后启动dfs出现以下错误：</p> 
<pre><code class="language-cpp">[root@master sbin]# ./start-dfs.sh
Starting namenodes on [master]
ERROR: Attempting to operate on hdfs namenode as root
ERROR: but there is no HDFS_NAMENODE_USER defined. Aborting operation.
Starting datanodes
ERROR: Attempting to operate on hdfs datanode as root
ERROR: but there is no HDFS_DATANODE_USER defined. Aborting operation.
Starting secondary namenodes [slave1]
ERROR: Attempting to operate on hdfs secondarynamenode as root
ERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting operation.</code></pre> 
<p>路径为下：</p> 
<pre><code class="language-cpp">cd /usr/soft/hadoop/sbin/</code></pre> 
<p> vim模式修改配置文件</p> 
<pre><code class="language-cpp">vi start-dfs.sh
vi stop-dfs.sh</code></pre> 
<p>将start-dfs.sh，stop-dfs.sh两个文件顶部添加以下参数</p> 
<pre><code class="language-cpp">#!/usr/bin/env bash
HDFS_DATANODE_USER=root
HADOOP_SECURE_DN_USER=hdfs
HDFS_NAMENODE_USER=root
HDFS_SECONDARYNAMENODE_USER=root</code></pre> 
<p>还有，start-yarn.sh，stop-yarn.sh顶部也需添加以下：<br> 将 /usr/soft/hadoop/sbin下各进程的启动命令用户设为root </p> 
<p>vim模式修改配置文件</p> 
<pre><code class="language-cpp">vi start-yarn.sh 
vi stop-yarn.sh </code></pre> 
<p> 在#!/usr/bin/env bash下添加如下内容 </p> 
<pre><code class="language-cpp">#!/usr/bin/env bash
YARN_RESOURCEMANAGER_USER=root
HADOOP_SECURE_DN_USER=yarn
YARN_NODEMANAGER_USER=root</code></pre> 
<h3 id="main-toc">2、Hadoop 配置文件的修改</h3> 
<p><br> Hadoop 可以在单节点上以伪分布式的方式运行，Hadoop 进程以分离的 Java 进程来运行，节点既作为 NameNode 也作为 DataNode，同时，读取的是 HDFS 中的文件。</p> 
<p>Hadoop的配置文件是 xml 格式，每个配置以声明 property 的 name 和 value 的方式来实现。</p> 
<p>打开hadoop配置文件：</p> 
<pre><code class="language-cpp">cd /usr/soft/hadoop/sbin/</code></pre> 
<pre><code class="language-cpp">#或者写成
cd ../   #退回上一个目录文件夹</code></pre> 
<p>新建一个文件夹用来存放()文件</p> 
<pre><code class="language-cpp"># 目录为cd /usr/soft/hadoop  (pwd 为显示路径)
cd ../          #退回到前一个文件夹
mkdir data      # 新建文件夹
ll              # 查看所有目录</code></pre> 
<p><img alt="" height="540" src="https://images2.imgbox.com/37/b6/IvzCAmeb_o.png" width="794"><br> 其中最好修改其中的五个配置文件</p> 
<h4 id="%EF%BC%881%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20core-site.xml">（1）修改配置文件 core-site.xml</h4> 
<p>如上图查看配置文件可知， core-site.xml 文件读写权限较低，修改配置文件之前需要修改文件权限</p> 
<p>为了方便不细分权限，设置为允许所有操作</p> 
<pre><code class="language-cpp">cd /usr/soft/hadoop/etc/hadoop/
chmod 777 core-site.xml   # 直接用root操作,即不需要</code></pre> 
<p>Vim模式修改配置文件</p> 
<pre><code class="language-cpp">vim core-site.xml   </code></pre> 
<p><img alt="" height="832" src="https://images2.imgbox.com/15/95/T3XKCeGU_o.png" width="966"></p> 
<p>添加如下配置</p> 
<pre><code class="language-cpp">&lt;configuration&gt;
&lt;property&gt;
       &lt;name&gt;fs.defaultFS&lt;/name&gt;
       &lt;!--这里填你自己的主机名端口默认(注释)--&gt;
       &lt;value&gt;hdfs://hjk:9000&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
       &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
       &lt;value&gt;/usr/soft/hadoop/data&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<h4 id="(2)%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20hdfs-site.xml%EF%BC%9A">（2）修改配置文件 hdfs-site.xml：</h4> 
<p><br> 同样先修改文件权限：</p> 
<pre><code class="language-cpp">chmod 777  hdfs-site.xml</code></pre> 
<p>vim模式修改配置文件</p> 
<pre><code class="language-cpp">vim hdfs-site.xml</code></pre> 
<p>添加如下配置：</p> 
<pre><code class="language-cpp">&lt;configuration&gt;

&lt;property&gt;
       &lt;name&gt;dfs.replication&lt;/name&gt;
       &lt;value&gt;1&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<h4 id="%EF%BC%883%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%20hadoop-env.sh"><br> （3）修改配置文件 hadoop-env.sh</h4> 
<pre><code class="language-cpp">vim hadoop-env.sh      #配置成你自己的jdk安装路径</code></pre> 
<pre><code class="language-cpp">export JAVA_HOME=/usr/soft/java/jdk1.8.0_351   #配置jdk安装路径 将前面#注释</code></pre> 
<p> <img alt="" height="1200" src="https://images2.imgbox.com/d7/8e/8666D2DD_o.png" width="1066"></p> 
<h4 id="%E2%80%8B%E7%BC%96%E8%BE%91%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AE%20mapred-site.xml">（4）配置 mapred-site.xml</h4> 
<p>mapred-site.xml 指定MapReduce程序应该放在哪个资源调度集群上运行。若不指定为yarn，那么MapReduce程序就只会在本地运行而非在整个集群中运行。</p> 
<pre><code class="language-cpp">chmod 777 mapred-site.xml  </code></pre> 
<p>vim模式修改配置文件</p> 
<pre><code class="language-cpp">vim mapred-site.xml</code></pre> 
<p><img alt="" height="784" src="https://images2.imgbox.com/ce/e1/rOI8BqK5_o.png" width="984"><br> 添加如下配置：</p> 
<pre><code class="language-cpp">&lt;configuration&gt;

&lt;property&gt;
       &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
       &lt;value&gt;yarn&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<h4 id="%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AEyarn-site.xml">（5）配置yarn-site.xml</h4> 
<pre><code class="language-cpp">chmod 777 yarn-site.xml</code></pre> 
<p>vim模式修改配置文件</p> 
<pre><code class="language-cpp">vim yarn-site.xml</code></pre> 
<p><img alt="" height="814" src="https://images2.imgbox.com/95/75/fDPFaO9F_o.png" width="902">添加如下配置：</p> 
<pre><code class="language-cpp">&lt;configuration&gt;

&lt;!-- Site specific YARN configuration properties --&gt;

&lt;property&gt;
       &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
       &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
&lt;/property&gt;
&lt;property&gt;
        &lt;!-- reducer获取数据的方式 --&gt;
        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;
        &lt;!-- 填写主机名 --&gt;
        &lt;value&gt;hjk&lt;/value&gt;
&lt;/property&gt;
&lt;/configuration&gt;</code></pre> 
<h4 id="%EF%BC%886%EF%BC%89%E8%BF%9B%E5%85%A5%E5%89%8D%E9%9D%A2%E5%88%9B%E5%BB%BA%E7%9A%84data%E5%AF%B9hdfs%20namenode%E5%88%9D%E5%A7%8B%E5%8C%96">（6）进入前面创建的data对hdfs namenode初始化</h4> 
<pre><code class="language-cpp">cd ../../data/  #基于当前文件夹相回退到data( cd /use/soft/hadoop/data)
ll  #查看data下有没有文件,有得删掉
hdfs namenode -format     #对hdfs namenode初始化</code></pre> 
<h4 id="%EF%BC%887%EF%BC%89%E5%90%AF%E5%8A%A8hadoop%C2%A0%E4%BD%BF%E7%94%A8%E2%80%9C%20start-dfs.sh%20%E2%80%9D%E5%BC%80%E5%90%AF%20NaneNode%20%E5%92%8C%20DataNode%20%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B">（7）启动hadoop 使用“ start-dfs.sh ”开启 NaneNode 和 DataNode 守护进程</h4> 
<p>然后输入命令 ’ jps ’ 查看已成功启动的进程。(stop--dfs.sh--停止进程   -- 启动命令需要在hadoop安装路径下执行并且是root用户)此处安装路径为 cd /usr/soft/hadoop</p> 
<p><img alt="" height="418" src="https://images2.imgbox.com/61/0c/pAT7RqR8_o.png" width="994"></p> 
<h4 id="%EF%BC%888%EF%BC%89%E4%BD%BF%E7%94%A8%E2%80%9C%20start-yarn.sh%20%E2%80%9D%E5%BC%80%E5%90%AF%20ResourceManager%20%E5%92%8C%20NodeManager%20%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B">（8）使用“ start-yarn.sh ”开启 ResourceManager 和 NodeManager 守护进程</h4> 
<p>然后输入命令 ’ jps ’ 查看已成功启动的进程。 (stop--yarn.sh--停止进程​​​​​​​)<img alt="" height="334" src="https://images2.imgbox.com/c8/14/XSjjwXg9_o.png" width="848"></p> 
<p>至此六个进程全部启动 ，成功启动后，可以访问 Web 界面 http:hjk:50070 查看 NameNode 和 Datanode 信息，还可以在线查看 HDFS 中的文件。</p> 
<p>查看hadoop后台界面ip端口，命令如下：</p> 
<pre><code class="language-cpp">hdfs dfs -ls /                 # 是查看的根目录的文件
cat /etc/hosts                 # 显示hosts文件内容
netstat -nlp |grep 50070       # 查看进程-如果没有说明没有配置web界面的端口
netstat -nlp |grep 9870        # 查看进程-如果有则说明配置率web界面的端口

#最后访问链接为 192.168.121.129:9870</code></pre> 
<p><img alt="" height="948" src="https://images2.imgbox.com/13/89/WHQ35qIw_o.png" width="1200"></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/b8/72/LGHNMvNl_o.png" width="1200"></p> 
<p> 安装虚拟机+Centos8-4参考链接：<a class="link-info" href="https://mp.csdn.net/mp_blog/creation/" title="https://mp.csdn.net/mp_blog/creation/">https://mp.csdn.net/mp_blog/creation/</a>​​​​​​​</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/68b442078129563d7d1cbf61271a596e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">电脑黑屏按什么键恢复？只需要3个键就可以解决黑屏</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/226e6c052c38def218cc33441bdf7641/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Web3.0 的特点及你一定要学会的应用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>