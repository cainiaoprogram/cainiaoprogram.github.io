<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>利用QT实现主界面APP应用开发之经典 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="利用QT实现主界面APP应用开发之经典" />
<meta property="og:description" content="在嵌入式的开发过程中，利用好应用开发也是不错的选择。
今天主要和大家聊一聊，如何利用Qt来开发APP主界面，在Qt中提供了QStackedWdget与QTableView这样的控件方便页面切换，但是这种方法比较生硬，体验感较差。也可以自己实现对应滑动界面的设计。
第一：滑动界面的设计基础
#include &#34;slidepage.h&#34;#include &lt;QDebug&gt;#include &lt;QPropertyAnimation&gt;​SlidePage::SlidePage(QWidget *parent):QWidget(parent),pageIndex(0),pageCount(0),draggingFlag(false){ pageIndicator.clear(); this-&gt;setMinimumSize(400, 300); this-&gt;setAttribute(Qt::WA_TranslucentBackground, true);​ scrollArea = new QScrollArea(this); scrollArea-&gt;setAlignment(Qt::AlignCenter);​ mainWidget = new QWidget(); mainWidget-&gt;setStyleSheet(&#34;background: transparent&#34;);​ scrollArea-&gt;setWidget(mainWidget); scrollArea-&gt;setStyleSheet(&#34;background: transparent&#34;);​ bottomWidget = new QWidget(this); bottomWidget-&gt;setStyleSheet(&#34;background: transparent&#34;);​ bottomHBoxLayout = new QHBoxLayout(); bottomWidget-&gt;setLayout(bottomHBoxLayout); bottomHBoxLayout-&gt;setContentsMargins(0, 0, 0, 0); bottomHBoxLayout-&gt;setAlignment(Qt::AlignCenter);/* 关闭滚动条显示 */ scrollArea-&gt;setVerticalScrollBarPolicy( Qt::ScrollBarAlwaysOff); scrollArea-&gt;setHorizontalScrollBarPolicy( Qt::ScrollBarAlwaysOff);​ /* 滚屏对象 */ scroller = QScroller::scroller(scrollArea); QScroller::ScrollerGestureType gesture = QScroller::LeftMouseButtonGesture; scroller-&gt;grabGesture(scrollArea, gesture);​/* 获取属性 */ QScrollerProperties properties = scroller-&gt;scrollerProperties();​/* 设置滑动的时间，值越大，时间越短 */ properties." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6dc6940625be33b6fb5e1380228a526e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-06T15:30:41+08:00" />
<meta property="article:modified_time" content="2022-07-06T15:30:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">利用QT实现主界面APP应用开发之经典</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>      在嵌入式的开发过程中，利用好应用开发也是不错的选择。</p> 
<p>     今天主要和大家聊一聊，如何利用Qt来开发APP主界面，在Qt中提供了QStackedWdget与QTableView这样的控件方便页面切换，但是这种方法比较生硬，体验感较差。也可以自己实现对应滑动界面的设计。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/0a/fb/ln65jmDl_o.png"></p> 
<p></p> 
<p><strong>第一：滑动界面的设计基础</strong></p> 
<pre><code>#include "slidepage.h"</code><code>#include &lt;QDebug&gt;</code><code>#include &lt;QPropertyAnimation&gt;</code><code>​</code><code>SlidePage::SlidePage(QWidget *parent):QWidget(parent),pageIndex(0),pageCount(0),draggingFlag(false)</code><code>{<!-- --></code><code> pageIndicator.clear();</code><code> this-&gt;setMinimumSize(400, 300);</code><code> this-&gt;setAttribute(Qt::WA_TranslucentBackground, true);</code><code>​</code><code> scrollArea = new QScrollArea(this);</code><code> scrollArea-&gt;setAlignment(Qt::AlignCenter);</code><code>​</code><code> mainWidget = new QWidget();</code><code> mainWidget-&gt;setStyleSheet("background: transparent");</code><code>​</code><code> scrollArea-&gt;setWidget(mainWidget);</code><code> scrollArea-&gt;setStyleSheet("background: transparent");</code><code>​</code><code> bottomWidget = new QWidget(this);</code><code> bottomWidget-&gt;setStyleSheet("background: transparent");</code><code>​</code><code> bottomHBoxLayout = new QHBoxLayout();</code><code> bottomWidget-&gt;setLayout(bottomHBoxLayout);</code><code> bottomHBoxLayout-&gt;setContentsMargins(0, 0, 0, 0);</code><code> bottomHBoxLayout-&gt;setAlignment(Qt::AlignCenter);</code><code>/* 关闭滚动条显示 */</code><code> scrollArea-&gt;setVerticalScrollBarPolicy(</code><code> Qt::ScrollBarAlwaysOff);</code><code> scrollArea-&gt;setHorizontalScrollBarPolicy(</code><code> Qt::ScrollBarAlwaysOff);</code><code>​</code><code> /* 滚屏对象 */</code><code> scroller = QScroller::scroller(scrollArea);</code><code> QScroller::ScrollerGestureType gesture =</code><code> QScroller::LeftMouseButtonGesture;</code><code> scroller-&gt;grabGesture(scrollArea, gesture);</code><code>​</code><code>/* 获取属性 */</code><code> QScrollerProperties properties = scroller-&gt;scrollerProperties();</code><code>​</code><code>/* 设置滑动的时间，值越大，时间越短 */</code><code> properties.setScrollMetric(QScrollerProperties::SnapTime, 0.5);</code><code>​</code><code>/* 设置滑动速度 */</code><code> properties.setScrollMetric(QScrollerProperties::MinimumVelocity, 1);</code><code> scroller-&gt;setScrollerProperties(properties);</code><code>​</code><code>/* 布局 */</code><code> hBoxLayout = new QHBoxLayout();</code><code>​</code><code> hBoxLayout-&gt;setContentsMargins(0, 0, 0, 0);</code><code> hBoxLayout-&gt;setSpacing(0);</code><code>​</code><code> mainWidget-&gt;setLayout(hBoxLayout);</code><code>​</code><code>/* 定时器，用于判断用户是否是拖动屏幕，区分滑动，超过 300ms 表示拖动 */</code><code> timer = new QTimer(this);</code><code> connect(scrollArea-&gt;horizontalScrollBar(),SIGNAL(valueChanged(int)), this, SLOT(hScrollBarValueChanged(int)));</code><code> connect(scroller, SIGNAL(stateChanged(QScroller::State)), this,</code><code>SLOT(onStateChanged(QScroller::State)));</code><code> connect(timer, SIGNAL(timeout()), this, SLOT(onTimerTimeOut()));</code><code> connect(this, SIGNAL(currentPageIndexChanged(int)), this,SLOT(onCurrentPageIndexChanged(int)));</code><code>}</code></pre> 
<p></p> 
<p>    上面的这些描述，只是一个滑动界面的类，如果需要控制的话，还需要往里面添加对应的内容。</p> 
<p></p> 
<p><strong>第二：APP主界面实现方法</strong></p> 
<p>     在项目正常运行之后，可以看到一个APP主界面，这个界面不能点击，如果需要控制的话再通过链接到界面上的按钮点击信号，可以是点击按钮之后打开一个新界面，完成事件的交互。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b0/43/VhFqPM1X_o.png"></p> 
<p>项目文件夹下内容解释：</p> 
<p><strong>03_appmainview.pro 项目下：</strong></p> 
<p><strong>1、appdemo 文件夹为车载音乐 APP 页面，只是界面，不带实际功能！</strong></p> 
<p><strong>2、slidepage 文件夹为笔者原创的一个滑动页面类，在这个类里，我们可以使用 addPage()方法来添加页面，当添加的页面大于 2 页时，就可以滑动切换页面了。</strong></p> 
<p><strong>3、Headers 文件夹为 03_appmainview.pro 的头文件。</strong></p> 
<p><strong>4、Sources 文件夹为 03_appmainview.pro 的源文件。</strong></p> 
<p><strong>5、Resource 文件夹为 03_appmainview.pro 的源文件。主要是存放一张背景图片。</strong></p> 
<p>实例参考链接：</p> 
<p><a class="link-info has-card" href="https://download.csdn.net/download/weixin_41114301/85930012" title="https://download.csdn.net/download/weixin_41114301/85930012"><span class="link-card-box"><span class="link-title">https://download.csdn.net/download/weixin_41114301/85930012</span><span class="link-link"><img class="link-link-icon" src="https://images2.imgbox.com/b5/1f/XrEwas6C_o.png" alt="icon-default.png?t=M5H6">https://download.csdn.net/download/weixin_41114301/85930012</span></span></a></p> 
<p><strong>第三：实现分析</strong></p> 
<p>    在运行的过程中，会有三个界面，可以利用利用手动的方式进行滑动，从运行效果上来说，还是不错的。</p> 
<p></p> 
<p><strong>总结：在编写实现APP的过程中，需要对其中的API函数的非常熟悉，这个就要投入大量的精力在里面，学习各个函数的用法。</strong></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/777f8748a29e7638b84f8d6b48acc874/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Latex 爬过的坑(4)——Latex中插入Emoji</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d6e99f7b6f399ef7ca246ecdd26cae31/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【注意力】ESE：Effective Squeeze-and-Excitation Block</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>