<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL之数据查询 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL之数据查询" />
<meta property="og:description" content="目录 1.单表查询1.1 查询所有字段1.2 查询指定字段1.3 查询指定数据1.4 带关键字in的查询1.5 带关键字between...and的范围查询1.6 带like的字符匹配查询1.7 用关键子is null查询空值1.8 带关键字and的多条件查询1.9 带关键字or的多条件查询1.10 用关键字distinct去除结果中的重复行1.11 用关键字order by对查询结果排序1.12 用关键字limit限制查询结果的数量 2.聚合函数查询2.1 count()函数2.2 sum()函数2.3 avg()函数2.4 min()函数和max()函数 3.连接查询3.1 内连接查询(inner join/join)3.2 外连接查询3.3 复合条件连接查询3.4 交叉连接(cross join) 4.合并查询结果4.1 union4.2 union all 5.使用正则表达式查询5.1 匹配指定字符中的任意一个5.2 匹配以指定字符开头和结束的记录 6.case when语句 数据查询是指从数据库中获取所需要的数据。数据查询是数据库操作中最常用，也是最重要的操作。通过不同的查询方式可以获得不同的数据。用户可以根据自己对数据的需求使用不同的查询方式。 1.单表查询 单表查询是指从一张表中查询所需要的数据。
1.1 查询所有字段 语法：select * from 数据表名;
1.2 查询指定字段 语法：select 字段名 from 数据表名;
如果是查询多个字段，可以使用“,”对字段进行分隔。
例如：查询tb_one中的name和score字段
1.3 查询指定数据 如果要从很多记录中查询出指定的记录，那么就需要一个查询的条件。设置查询条件应用的是where子句。
语法：select 字段 from 数据表名 where 条件;
例如：向tb_one表中查询name=小明的数据
1.4 带关键字in的查询 关键字in可以判断某个字段的值是否在指定的集合中。如果字段的值在集合中，则满足查询条件，该记录将被查询出来；如果不在集合中，则不满足查询条件。
语法：select 字段 from 数据表名 where 条件 [not] in(元素1，元素2…);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/35fce80fa793e4526f4e03aba7b4551b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-02T22:34:52+08:00" />
<meta property="article:modified_time" content="2023-06-02T22:34:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL之数据查询</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#1_3" rel="nofollow">1.单表查询</a></li><li><ul><li><ul><li><a href="#11__5" rel="nofollow">1.1 查询所有字段</a></li><li><a href="#12__9" rel="nofollow">1.2 查询指定字段</a></li><li><a href="#13__16" rel="nofollow">1.3 查询指定数据</a></li><li><a href="#14_in_23" rel="nofollow">1.4 带关键字in的查询</a></li><li><a href="#15_betweenand_34" rel="nofollow">1.5 带关键字between...and的范围查询</a></li><li><a href="#16_like_43" rel="nofollow">1.6 带like的字符匹配查询</a></li><li><a href="#17_is_null_53" rel="nofollow">1.7 用关键子is null查询空值</a></li><li><a href="#18_and_60" rel="nofollow">1.8 带关键字and的多条件查询</a></li><li><a href="#19_or_67" rel="nofollow">1.9 带关键字or的多条件查询</a></li><li><a href="#110_distinct_74" rel="nofollow">1.10 用关键字distinct去除结果中的重复行</a></li><li><a href="#111_order_by_79" rel="nofollow">1.11 用关键字order by对查询结果排序</a></li><li><a href="#112_limit_86" rel="nofollow">1.12 用关键字limit限制查询结果的数量</a></li></ul> 
  </li></ul> 
  </li><li><a href="#2_92" rel="nofollow">2.聚合函数查询</a></li><li><ul><li><ul><li><a href="#21_count_94" rel="nofollow">2.1 count()函数</a></li><li><a href="#22_sum_103" rel="nofollow">2.2 sum()函数</a></li><li><a href="#23_avg_110" rel="nofollow">2.3 avg()函数</a></li><li><a href="#24_minmax_117" rel="nofollow">2.4 min()函数和max()函数</a></li></ul> 
  </li></ul> 
  </li><li><a href="#3_122" rel="nofollow">3.连接查询</a></li><li><ul><li><ul><li><a href="#31_inner_joinjoin_125" rel="nofollow">3.1 内连接查询(inner join/join)</a></li><li><a href="#32__140" rel="nofollow">3.2 外连接查询</a></li><li><a href="#33__151" rel="nofollow">3.3 复合条件连接查询</a></li><li><a href="#34_cross_join_157" rel="nofollow">3.4 交叉连接(cross join)</a></li></ul> 
  </li></ul> 
  </li><li><a href="#4_159" rel="nofollow">4.合并查询结果</a></li><li><ul><li><ul><li><a href="#41_union_164" rel="nofollow">4.1 union</a></li><li><a href="#42_union_all_168" rel="nofollow">4.2 union all</a></li></ul> 
  </li></ul> 
  </li><li><a href="#5_172" rel="nofollow">5.使用正则表达式查询</a></li><li><ul><li><ul><li><a href="#51__182" rel="nofollow">5.1 匹配指定字符中的任意一个</a></li><li><a href="#52__185" rel="nofollow">5.2 匹配以指定字符开头和结束的记录</a></li></ul> 
  </li></ul> 
  </li><li><a href="#6case_when_189" rel="nofollow">6.case when语句</a></li></ul> 
</div> 
<br> 数据查询是指从数据库中获取所需要的数据。数据查询是数据库操作中最常用，也是最重要的操作。通过不同的查询方式可以获得不同的数据。用户可以根据自己对数据的需求使用不同的查询方式。 
<p></p> 
<h2><a id="1_3"></a>1.单表查询</h2> 
<p>单表查询是指从一张表中查询所需要的数据。</p> 
<h4><a id="11__5"></a>1.1 查询所有字段</h4> 
<blockquote> 
 <p><strong>语法：select * from 数据表名;</strong></p> 
</blockquote> 
<h4><a id="12__9"></a>1.2 查询指定字段</h4> 
<blockquote> 
 <p><strong>语法：select 字段名 from 数据表名;</strong><br> 如果是查询多个字段，可以使用“,”对字段进行分隔。</p> 
</blockquote> 
<p>例如：查询tb_one中的name和score字段<br> <img src="https://images2.imgbox.com/32/8a/KKZ2hDnF_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="13__16"></a>1.3 查询指定数据</h4> 
<blockquote> 
 <p>如果要从很多记录中查询出指定的记录，那么就需要一个查询的条件。设置查询条件应用的是where子句。<br> <strong>语法：select 字段 from 数据表名 where 条件;</strong></p> 
</blockquote> 
<p>例如：向tb_one表中查询name=小明的数据<br> <img src="https://images2.imgbox.com/7f/c3/A4KMPY8d_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="14_in_23"></a>1.4 带关键字in的查询</h4> 
<blockquote> 
 <p>关键字in可以判断某个字段的值是否在指定的集合中。如果字段的值在集合中，则满足查询条件，该记录将被查询出来；如果不在集合中，则不满足查询条件。</p> 
</blockquote> 
<blockquote> 
 <p><strong>语法：select 字段 from 数据表名 where 条件 [not] in(元素1，元素2…);</strong><br> 其中[not]是可选项，加上not表示不在集合内满足条件</p> 
</blockquote> 
<p>例如：查询tb_one表中name为小明和张三的记录<br> <img src="https://images2.imgbox.com/3b/e7/Nri72c25_o.png" alt="在这里插入图片描述"><br> 例如：使用not查询tb_one表中name不是小明和张三的记录<br> <img src="https://images2.imgbox.com/d9/2c/frPlIybM_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="15_betweenand_34"></a>1.5 带关键字between…and的范围查询</h4> 
<blockquote> 
 <p>关键字between…and可以判断某个字段的值是否在指定的范围内。如果字段的值在指定范围内，则满足查询条件，该记录将被查询出来；如果不在指定范围内，则不满足指定条件。</p> 
</blockquote> 
<blockquote> 
 <p><strong>语法：select * from 数据表名 where 条件 [not] between 取值1 and 取值2;</strong><br> 其中[not]是可选项，跟关键字in里的用法一样；取值1和取值2分别代表范围的起始值和终止值。</p> 
</blockquote> 
<p>例如：查询tb_one表中id在2~5之间的数据<br> <img src="https://images2.imgbox.com/29/c9/o42BF7al_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="16_like_43"></a>1.6 带like的字符匹配查询</h4> 
<blockquote> 
 <p>like属于较常用的比较运算符，通过它可以实现模糊查询。它有两种通配符：“%”和下划线“—”。<br> (1)“%”可以匹配一个或多个字符，可以代表任意长度的字符串。例如“a%b”表示以a开头b结尾的任意长度字符串。<br> (2)下划线“—“只匹配一个字符。</p> 
</blockquote> 
<blockquote> 
 <p><strong>语法：select * from 数据表名 where 字段 like ‘条件’;</strong></p> 
</blockquote> 
<p>例如：查询tb_one中name包含哥字符的数据<br> <img src="https://images2.imgbox.com/9b/ed/v175auY0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="17_is_null_53"></a>1.7 用关键子is null查询空值</h4> 
<blockquote> 
 <p><strong>语法：select * from 数据表名 where 字段 is [not] null;</strong></p> 
</blockquote> 
<p>例如：查询tb_one表中name字段的值为空的记录<br> <img src="https://images2.imgbox.com/98/38/MvdQrSEA_o.png" alt="在这里插入图片描述"><br> 上图说明name字段的值都不为空。</p> 
<h4><a id="18_and_60"></a>1.8 带关键字and的多条件查询</h4> 
<blockquote> 
 <p>关键字and可以用来联合多个条件进行查询。使用关键字and时，只有同时满足所有查询条件的记录会被查询出来。<br> <strong>语法：select * from 数据表名 where 条件1 and 条件2[and 条件3…];</strong></p> 
</blockquote> 
<p>例如：查询tb_one表中id&gt;3且score&lt;60的数据<br> <img src="https://images2.imgbox.com/a4/4d/TFY8TMds_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="19_or_67"></a>1.9 带关键字or的多条件查询</h4> 
<blockquote> 
 <p>关键字or也可以联合多条件进行查询，但与and关键字不同的是，关键字or只需要满足查询条件中的一个就行。<br> <strong>语法：select * from 数据表名 where 条件1 or 条件2[or 条件3…];</strong></p> 
</blockquote> 
<p>例如：查询tb_one表中score为100或90的数据<br> <img src="https://images2.imgbox.com/72/57/laIcU3do_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="110_distinct_74"></a>1.10 用关键字distinct去除结果中的重复行</h4> 
<blockquote> 
 <p>使用distinct可以去除查询结果中的重复记录。<br> <strong>语法：select distinct 字段 from 数据表名;</strong></p> 
</blockquote> 
<h4><a id="111_order_by_79"></a>1.11 用关键字order by对查询结果排序</h4> 
<blockquote> 
 <p>使用关键字order by 可以对查询的结果进行升序(asc)和降序(desc)，在默认情况下，order by按升序输出结果。<br> <strong>语法：select * from 数据表名 order by 字段 [asc|desc];</strong></p> 
</blockquote> 
<p>例如：对tb_one表中score字段按降序排列<br> <img src="https://images2.imgbox.com/8e/5a/nAIqFqLW_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="112_limit_86"></a>1.12 用关键字limit限制查询结果的数量</h4> 
<blockquote> 
 <p>查询数据时，可能会查询出很多数据，而用户需要记录的数据可能只是很少的一部分，这样就需要来限制查询结果的数量。<strong>关键字limit</strong>可以对查询结果的记录进行限定，控制它输出的行数。</p> 
</blockquote> 
<p>例如：对tb_one表中score字段进行降序排列，显示前三行记录<br> <img src="https://images2.imgbox.com/09/70/akCuo4tX_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2_92"></a>2.聚合函数查询</h2> 
<p>聚合函数最大的特点是它们根据一组数据求出一个值。聚合函数的结果值只根据选定行中非null的值进行计算，null值被忽略。</p> 
<h4><a id="21_count_94"></a>2.1 count()函数</h4> 
<blockquote> 
 <p>count()函数，对于除“*”以外的任何参数，返回选择集合中非null值的行的数目；对于参数星号，返回选择集合中所有行的数目，包含null值的行。<br> <strong>语法：select count(字段) from tb_one;</strong></p> 
</blockquote> 
<p>例如：统计tb_one表中的记录数<br> <img src="https://images2.imgbox.com/e0/29/7rcHcSLF_o.png" alt="在这里插入图片描述"><br> 这里采用的参数是“*”，包含了null值的行。</p> 
<h4><a id="22_sum_103"></a>2.2 sum()函数</h4> 
<blockquote> 
 <p>sum()函数可以求出表中某个字段取值的总和。<br> <strong>语法：select sum(字段) from 数据表名;</strong></p> 
</blockquote> 
<p>例如：统计tb_one表中score字段的总和<br> <img src="https://images2.imgbox.com/f7/3f/jDolYNoh_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="23_avg_110"></a>2.3 avg()函数</h4> 
<blockquote> 
 <p>avg()函数可以求出表中某个字段取值的平均值。<br> <strong>语法：select avg(字段) from 数据表名;</strong></p> 
</blockquote> 
<p>例如：求出tb_one表中score字段值的平均值<br> <img src="https://images2.imgbox.com/49/f5/CibVBZTs_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="24_minmax_117"></a>2.4 min()函数和max()函数</h4> 
<blockquote> 
 <p>min()函数可以求出某个字段取值的最小值。<br> max()函数可以求出某个字段取值的最大值。<br> <strong>语法：select min(字段)|max(字段) from 数据表名;</strong></p> 
</blockquote> 
<h2><a id="3_122"></a>3.连接查询</h2> 
<blockquote> 
 <p>连接查询是关系数据库中最主要的查询，主要包括内连接，外连接等，通过连接运算符可以实现多个表查询。</p> 
</blockquote> 
<h4><a id="31_inner_joinjoin_125"></a>3.1 内连接查询(inner join/join)</h4> 
<p>内连接查询是最普遍的连接类型，而且是最匀称的，因为它们要求构成连接的每一部分的每个表的匹配，不匹配的行将被排除。</p> 
<p>例如：下面有两个表tb_book1和tb_book2，先查看各表的数据。<br> tb_book1：<br> <img src="https://images2.imgbox.com/21/da/gXRl8bkx_o.png" alt="在这里插入图片描述"><br> tb_book2：<br> <img src="https://images2.imgbox.com/dc/af/y9Cy1dpj_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>从上面的查询结果可以看出，<strong>两个表存在一个连接——id字段</strong>，它在两个表中是等同的，tb_book1表的id字段与tb_book2表的id字段相等，因此可以创建两个表的一个连接。查询语句如下：<br> <strong>select name1,user1,name2,user2 from tb_book1,tb_book2 where<br> tb_book1.id=tb_book2.id;</strong></p> 
</blockquote> 
<p>查询结果：<br> <img src="https://images2.imgbox.com/b5/fc/kIq7t9A6_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="32__140"></a>3.2 外连接查询</h4> 
<blockquote> 
 <p>外连接生成的结果集不仅包含符合连接条件的行数据，而且还包括左表(左外连接时的表)，右表(右外连接时的表)或两边连接表(全外连接时的表)中的所有数据行。<br> <strong>语法：select 字段 from 数据表名1 left|right join 数据表名2 on 数据表名1.字段=数据表名2.属性名2;</strong><br> 外连接分为左外连接(left join)，右外连接(right join)和全外连接(full join)三种。</p> 
</blockquote> 
<blockquote> 
 <p>(1)左外连接：是指将左表中的所有数据分别与右表中的每条数据进行连接组合，返回的结果除内连接的数据外，还包括左表中不符合条件的数据，并在右表的相应列中添加null值。</p> 
</blockquote> 
<blockquote> 
 <p>(2)右外连接：是指将右表中的所有数据分别与左表中的每条数据进行连接组合，返回的结果除内连接的数据外，还包括右表中不符合条件的数据，并在左表的相应列中添加null值。</p> 
</blockquote> 
<h4><a id="33__151"></a>3.3 复合条件连接查询</h4> 
<blockquote> 
 <p>在连接查询时，也可以增加其他的限制条件。</p> 
</blockquote> 
<p>例如：下面使用内连接查询tb_book1和tb_book2，限制只显示1行记录。<br> <img src="https://images2.imgbox.com/c9/0f/0zYn4oEs_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="34_cross_join_157"></a>3.4 交叉连接(cross join)</h4> 
<p>笛卡尔效应，即不加任何条件，达到M*N的结果集。</p> 
<h2><a id="4_159"></a>4.合并查询结果</h2> 
<blockquote> 
 <p>合并查询结果是将多个select语句的查询结果合并到一起。合并查询结果使用关键字union和union all。<br> <strong>其中union是将所有的查询结果合并到一起，然后去除相同的记录；而union all则只是简单地把结果合并到一起。</strong></p> 
</blockquote> 
<h4><a id="41_union_164"></a>4.1 union</h4> 
<p>例如：将tb_book1和tb_book2中的id字段用union关键字合并查询结果。两个表中的id都为1~5。<br> <img src="https://images2.imgbox.com/c7/d1/Bdgq0052_o.png" alt="在这里插入图片描述"><br> 结果显示，合并后将所有结果合并到了一起，并去除了重复值。</p> 
<h4><a id="42_union_all_168"></a>4.2 union all</h4> 
<p>例如：查询tb_book1和tb_book2中的id字段，使用关键字union all合并，限制显示前7行。<br> <img src="https://images2.imgbox.com/0c/8b/kiTip962_o.png" alt="在这里插入图片描述"><br> 结果显示，使用union all并不会去除重复值。</p> 
<h2><a id="5_172"></a>5.使用正则表达式查询</h2> 
<blockquote> 
 <p>正则表达式是用某种模式去匹配一类字符串的一个方式。正则表达式的查询能力比通配字符的查询能力更加强大，而且更加灵活。<br> <strong>语法：字段 regexp ‘匹配方式’</strong><br> (1)字段：表示需要查询的字段名称。<br> (2)匹配方式：表示以哪种方式来进行匹配查询。</p> 
</blockquote> 
<p>正则表达式的模式字符<br> <img src="https://images2.imgbox.com/e7/89/beSk25wq_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="51__182"></a>5.1 匹配指定字符中的任意一个</h4> 
<p>例如：从tb_book1中的name1字段中查询包含”完美长生“四个字中任意一个字的记录。<br> <img src="https://images2.imgbox.com/31/75/cxVsbAiN_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="52__185"></a>5.2 匹配以指定字符开头和结束的记录</h4> 
<p>例如：在tb_book1中查找name1字段以‘深’开头‘岸’结尾，中间包含两个字符的记录。<br> <img src="https://images2.imgbox.com/00/ce/8qytwwjD_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="6case_when_189"></a>6.case when语句</h2> 
<p>case when语句，用于计算条件列表并返回多个可能结果表达式之一。支持else参数。</p> 
<p>例如：将用户划分为25岁以下和25岁及以上两个年龄段，分别查看这两个年龄段用户数量<br> <img src="https://images2.imgbox.com/16/04/VrQVp64u_o.png" alt="在这里插入图片描述"><br> 或者：<br> <img src="https://images2.imgbox.com/9e/dd/6qbD8dAU_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/de302b9a0ed41e6c7cf58d06529e6e92/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言学习-循环语句，if-else循环，while循环</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cdab8ef1e887e3984d1bb54b7aa7736c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SDF(Signed-distance-field: 有向距离场)(7): 距离场函数-基于CUBE计算方式产生的若干变体A</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>