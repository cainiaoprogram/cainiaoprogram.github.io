<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Zabbix笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Zabbix笔记" />
<meta property="og:description" content="Zabbix笔记 监控项 创建监控项 [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-DenKI1yb-1655547267051)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014190625793.png)]
键值
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Ph9cTW9e-1655547267052)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014190702136.png)]
监测—&gt;最新数据
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Cc8sJD8J-1655547267053)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014190921646.png)]
监控项的值映射 [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mkS6rMez-1655547267054)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014191141037.png)]
创建值映射
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-3B9u2quf-1655547267054)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014191232685.png)]
运用到监控器
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ki7uR9cN-1655547267055)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014191435888.png)]
自定义监控项 配置
[root@web-01 ~]# cat /etc/zabbix/zabbix_agent2.d/default.conf UserParameter=sda.tps,iostat | grep sda | awk &#39;{print $2}&#39; UserParameter=mem.used,free -m | awk &#39;/^Mem/ {print $3/$2*100}’ UserParameter=mem.ava,free -m | awk &#39;/^Mem/ {print 100-$3/$2*100}‘ systemctl restart zabbix_agent2 测试
[root@web-01 ~]# zabbix_agent2 -t mem.ava mem.ava [s|67.9494] [root@web-01 ~]# zabbix_agent2 -t mem.used mem.used [s|31.8857] [root@web-01 ~]# server获取数据
安装zabbix-get数据包
yum -y install zabbix-get 获取数据" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/82b2e2b824362a48f1dd87a75a3c3c99/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-01T12:05:14+08:00" />
<meta property="article:modified_time" content="2022-08-01T12:05:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Zabbix笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Zabbix_0"></a>Zabbix笔记</h2> 
<h3><a id="_2"></a>监控项</h3> 
<h4><a id="_4"></a>创建监控项</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-DenKI1yb-1655547267051)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014190625793.png)]</p> 
<p>键值</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Ph9cTW9e-1655547267052)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014190702136.png)]</p> 
<p>监测—&gt;最新数据</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Cc8sJD8J-1655547267053)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014190921646.png)]</p> 
<h4><a id="_20"></a>监控项的值映射</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mkS6rMez-1655547267054)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014191141037.png)]</p> 
<p><strong>创建值映射</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-3B9u2quf-1655547267054)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014191232685.png)]</p> 
<p><strong>运用到监控器</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ki7uR9cN-1655547267055)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014191435888.png)]</p> 
<h4><a id="_38"></a>自定义监控项</h4> 
<p><strong>配置</strong></p> 
<pre><code>[root@web-01 ~]# cat /etc/zabbix/zabbix_agent2.d/default.conf 
UserParameter=sda.tps,iostat | grep sda | awk '{print $2}'
UserParameter=mem.used,free -m | awk '/^Mem/ {print $3/$2*100}’
UserParameter=mem.ava,free -m | awk '/^Mem/ {print 100-$3/$2*100}‘
systemctl restart zabbix_agent2
</code></pre> 
<p><strong>测试</strong></p> 
<pre><code>[root@web-01 ~]# zabbix_agent2 -t mem.ava
mem.ava                                       [s|67.9494]
[root@web-01 ~]# zabbix_agent2 -t mem.used
mem.used                                      [s|31.8857]
[root@web-01 ~]# 
</code></pre> 
<p><strong>server获取数据</strong></p> 
<p>安装zabbix-get数据包</p> 
<pre><code>yum -y install zabbix-get
</code></pre> 
<p>获取数据</p> 
<pre><code>[root@zabbix-42 ~]# zabbix_get -s 172.16.1.7 -p 10050 -k mem.used
31.3359
[root@zabbix-42 ~]# zabbix_get -s 172.16.1.7 -p 10050 -k mem.used
31.2809
</code></pre> 
<p>创建监控项</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-x76a9Ehs-1655547267055)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014193408272.png)]</p> 
<p>查看效果</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-hFbNMJfz-1655547267056)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014193721564.png)]</p> 
<h4><a id="_87"></a>单位和参数引入</h4> 
<p><strong>单位</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-l6keBZzy-1655547267056)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014203820553.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xlFlRh1z-1655547267057)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211014203851108.png)]</p> 
<p><strong>参数</strong></p> 
<p>web1配置键值</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-qiji927c-1655547267057)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015100401193.png)]</p> 
<p>创建模板</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-X57X2zBi-1655547267057)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015100503825.png)]</p> 
<p>添加监控项</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-kojMU6fQ-1655547267058)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015100534821.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-YZ3afKPw-1655547267058)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015100559162.png)]</p> 
<p>主机链接模板</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-VFdZg2yE-1655547267058)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015100700892.png)]</p> 
<h3><a id="_119"></a>触发器</h3> 
<h4><a id="_121"></a>配置触发器</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Zc0JpGTL-1655547267059)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015102840979.png)]</p> 
<p>点击添加；表达式并测试</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-tSPhioSx-1655547267059)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015104017640.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-1H8xdw8k-1655547267059)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015103844470.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-gzW5zJ8W-1655547267059)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015104338071.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-S0kmCz7D-1655547267060)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015105219762.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-WXA5LaMk-1655547267060)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015105232623.png)]</p> 
<h4><a id="_143"></a>触发器滞后</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rTAYe2yU-1655547267060)(C:\Users\zwp\AppData\Roaming\Typora\typora-user-images\image-20211015115028287.png)]</p> 
<p>剩余内存小于30告警 大于60恢复</p> 
<h4><a id="_149"></a>配置多条件触发器</h4> 
<p>配置触发器，剩余内存小于等于30%，swap使用率达到1%告警（两条同时实现才会告警）</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-6hyPCN2x-1655547267061)(Zabbix笔记.assets/image-20211015172021078.png)]</p> 
<p><img src="https://images2.imgbox.com/58/78/IRhXuu2a_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/22/c3/QOo50Zmk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c7/f6/9SQCva3e_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b4/da/rT704gf8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7a/d1/eFQVyznG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/53/2b/zIjvfmBk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d5/38/PQNm3Xb8_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_164"></a>触发器依赖</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-tMTmYzYl-1655547267061)(Zabbix笔记.assets/image-20211015173332322.png)]</p> 
<p>首先克隆172.16.1.7 取消无用组–对比</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-SD5tZO0C-1655547267061)(Zabbix笔记.assets/image-20211015172822914.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-wgG9avWv-1655547267062)(Zabbix笔记.assets/image-20211015172833659.png)]</p> 
<p>web2设置监控项</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-bvYSZGfs-1655547267062)(Zabbix笔记.assets/image-20211015173015209.png)]</p> 
<p>设置web2触发</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-WUugomki-1655547267062)(Zabbix笔记.assets/image-20211015173102723.png)]</p> 
<p>设置依赖</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-MhVysDdi-1655547267062)(Zabbix笔记.assets/image-20211015173132752.png)]</p> 
<p>效果如下</p> 
<p>web1短线 web2短线只有web1告警</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-m0GVcSnG-1655547267063)(Zabbix笔记.assets/image-20211015173528449.png)]</p> 
<p>web1恢复后web2短线</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-K7nv97TP-1655547267063)(Zabbix笔记.assets/image-20211015173839010.png)]</p> 
<h3><a id="_198"></a>通知告警</h3> 
<h4><a id="QQ_200"></a>QQ邮箱</h4> 
<h4><a id="_208"></a>微信</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-9ky5Xw3S-1655547267063)(Zabbix笔记.assets/image-20211015192733604.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-6BkHxj1I-1655547267064)(Zabbix笔记.assets/image-20211015211343807.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-fZuUNKIm-1655547267064)(Zabbix笔记.assets/image-20211015211407207.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-cWn0AQNe-1655547267064)(Zabbix笔记.assets/image-20211015211527729.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-8sow1ja7-1655547267065)(Zabbix笔记.assets/image-20211015212004047.png)]</p> 
<p>设置报警类型</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Ho5avzxy-1655547267065)(Zabbix笔记.assets/image-20211015211806938.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-j1l0ZAfS-1655547267065)(Zabbix笔记.assets/image-20211015211832097.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-XKWy7eL5-1655547267065)(Zabbix笔记.assets/image-20211015211844520.png)]</p> 
<p>配置动作</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Uyv4OZVH-1655547267066)(Zabbix笔记.assets/image-20211015211653959.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-pNVgDBqa-1655547267066)(Zabbix笔记.assets/image-20211015211625360.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-odPEfcQD-1655547267066)(Zabbix笔记.assets/image-20211015211636040.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jZFyskEB-1655547267067)(Zabbix笔记.assets/image-20211015212811539.png)]</p> 
<p>配置完成验证</p> 
<h3><a id="_250"></a>通知升级</h3> 
<p>（待补充）</p> 
<h3><a id="_256"></a>故障自愈功能</h3> 
<pre><code>vim /etc/zabbix/zabbix_agent2.conf
UnsafeUserParameters=1
AllowKey=system.run[*]
systemctl restart zabbix-agent2
echo "zabbix ALL=(ALL) NOPASSWD:ALL" &gt;&gt; /etc/sudoers
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-GlGKzmnj-1655547267067)(Zabbix笔记.assets/image-20211016105734522.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ZuNpCWoi-1655547267067)(Zabbix笔记.assets/image-20211016105820352.png)]</p> 
<p>操作配置炜</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-sjhuyYHI-1655547267068)(Zabbix笔记.assets/image-20211016105851808.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-sg4e6dm2-1655547267068)(Zabbix笔记.assets/image-20211016105903703.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-DUUW4vKs-1655547267068)(Zabbix笔记.assets/image-20211016105917071.png)]</p> 
<h3><a id="_282"></a>图形</h3> 
<p><strong>给模板</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-r6SQgW7l-1655547267069)(Zabbix笔记.assets/image-20211016110513850.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-ho60bhP1-1655547267069)(Zabbix笔记.assets/image-20211016110831665.png)]</p> 
<p>https://note3-1312555106.cos.ap-beijing.myqcloud.com/image-20220527164037621.png</p> 
<h3><a id="_294"></a>聚合图形</h3> 
<p><strong>同样是模板</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-8IxRL8pj-1655547267069)(Zabbix笔记.assets/image-20211016111207975.png)]</p> 
<p>添加列表函数</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-xwJ0f0S1-1655547267070)(Zabbix笔记.assets/image-20211016111232565.png)]</p> 
<p><strong>可基于集群添加</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-lhfSn1pt-1655547267070)(Zabbix笔记.assets/image-20211016111640871.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-WKbBQTTP-1655547267070)(Zabbix笔记.assets/image-20211016111707835.png)]</p> 
<p><strong>幻灯片</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Sb1AyydZ-1655547267071)(Zabbix笔记.assets/image-20211016111741560.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-nrDa3LUk-1655547267071)(Zabbix笔记.assets/image-20211016111755103.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-bC0Bc0zj-1655547267071)(Zabbix笔记.assets/image-20211016111814286.png)]</p> 
<p>#备注：幻灯片这里的的聚合图形必须是基于群组或主机添加的聚合图形，模板里的聚合图形无法引用</p> 
<h3><a id="_322"></a>模板</h3> 
<h4><a id="_324"></a>主机监控项复制到模板</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jFiQWhCo-1655547267072)(Zabbix笔记.assets/image-20211016112951782.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-1AtDhSky-1655547267072)(Zabbix笔记.assets/image-20211016113017421.png)]</p> 
<p>在配置–&gt;模板查看监控项</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-hmFQh1ld-1655547267072)(Zabbix笔记.assets/image-20211016113044225.png)]</p> 
<p><strong>批量修改应用集</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-7BQx4H4d-1655547267073)(Zabbix笔记.assets/image-20211016113135024.png)]</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-CmqowtWo-1655547267073)(Zabbix笔记.assets/image-20211016113242198.png)]</p> 
<p><strong>效果</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Oo8NUYRF-1655547267073)(Zabbix笔记.assets/image-20211016113256023.png)]</p> 
<h4><a id="_344"></a>链接模板</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-WNvyOicU-1655547267073)(Zabbix笔记.assets/image-20211016113829479.png)]</p> 
<p>备注：克隆是只克隆模板 全克隆是连同链接模板一同克隆</p> 
<h4><a id="_350"></a>模板参数解释</h4> 
<pre><code>agent.hostname	客户端主机名。返回字符串
agent.ping	客户端可达性检查。返回 nothing - 不可达；1 - 可达
agent.version	zabbix客户端（agent）的版本。返回字符串
kernel.maxfiles	操作系统最大的文件打开数量。返回整数
kernel.maxproc	操作系统最大的进程数。返回整数
net.dns[&lt;ip&gt;,name,&lt;type&gt;,&lt;timeout&gt;,&lt;count&gt;,&lt;protocol&gt;]	检查 DNS 服务是否开启。返回 0 - DNS 服务关闭（服务未响应或DNS解析失败）；1 - DNS 服务开启
net.dns.record[&lt;ip&gt;,name,&lt;type&gt;,&lt;timeout&gt;,&lt;count&gt;,&lt;protocol&gt;]	执行DNS查询。返回字符串信息
net.if.collisions[if]	网络冲突数量。返回整型
net.if.discovery	List of network interfaces. Returns JSON
net.if.in[if,&lt;mode&gt;]	网络接口上传流量统计。返回 整数
net.if.list	网络接口列表（包括接口类型，状态，IPv4地址，说明）。返回文本
net.if.out[if,&lt;mode&gt;]	上行流量统计。返回整数
net.if.total[if,&lt;mode&gt;]	网络接口上传下载的流量总和。返回整数
net.tcp.listen[port]	检查 TCP 端口 是否处于侦听状态。返回 0 - 未侦听；1 - 正在侦听
net.tcp.port[&lt;ip&gt;,port]	检查是否能建立 TCP 连接到指定端口。返回 0 - 不能连接；1 - 可以连接
net.tcp.service[service,&lt;ip&gt;,&lt;port&gt;]	检查服务是否运行并接受 TCP 连接。返回 0 - 服务关闭；1 - 服务运行
net.tcp.service.perf[service,&lt;ip&gt;,&lt;port&gt;]	检查 TCP 服务的性能，当服务 down 时返回 0，否则返回连接服务花费的秒数
net.udp.listen[port]	检查 UDP 端口 是否处于侦听状态。返回 0 - 未侦听；1 - 正在侦听
net.udp.service[service,&lt;ip&gt;,&lt;port&gt;]	检查服务是否运行并响应 UDP 请求。返回 0 - 服务关闭；1 - 服务运行
net.udp.service.perf[service,&lt;ip&gt;,&lt;port&gt;]	检查 UDP 服务的性能，当服务 down 时返回 0，否则返回连接到服务花费的秒数
perf_instance.discovery[object]	List of object instances of Windows performance counters. Returns JSON
perf_instance_en.discovery[object]	List of object instances of Windows performance counters, discovered using object names in English. Returns JSON
perf_counter[counter,&lt;interval&gt;]	所有Windows计数器值。返回 整形、浮点、字符串、文本
perf_counter_en[counter,&lt;interval&gt;]	Value of any Windows performance counter in English. Returns integer, float, string or text (depending on the request)
proc.cpu.util[&lt;name&gt;,&lt;user&gt;,&lt;type&gt;,&lt;cmdline&gt;,&lt;mode&gt;,&lt;zone&gt;]	CPU进程百分比。返回浮点值
proc.mem[&lt;name&gt;,&lt;user&gt;,&lt;mode&gt;,&lt;cmdline&gt;,&lt;memtype&gt;]	进程内存，以字节为单位。返回整数
proc.num[&lt;name&gt;,&lt;user&gt;,&lt;state&gt;,&lt;cmdline&gt;,&lt;zone&gt;]	进程数。返回整数
proc_info[process,&lt;attribute&gt;,&lt;type&gt;]	具体处理的各个信息。返回浮点数
sensor[device,sensor,&lt;mode&gt;]	硬件传感器读数。返回浮点型
service.info[service,&lt;param&gt;]	有关服务的信息。返回整数字段表示状态，启动状态；字符串 - 以字段作为显示名，路径，用户; 文本 - 使用字段作为描述； 状态码：0 - 运行，1 - 暂停，2 - 启动挂起，3 - 暂停挂起，4 - 继续挂起，5 - 停止挂起，6 - 停止，7 - 未知，255 - 没有这个服务；启动码：0 - 自动，1 - 自动延迟，2 - 手动, 3 - 禁用，4 - 未知
services[&lt;type&gt;,&lt;state&gt;,&lt;exclude&gt;]	列表服务。返回0表示空，如果是列表则是每行一个内容
system.boottime	系统启动时间。返回时间戳
system.cpu.discovery	List of detected CPUs/CPU cores. Returns JSON
system.cpu.intr	设备的中断数。返回整数
system.cpu.load[&lt;cpu&gt;,&lt;mode&gt;]	CPU 负载。返回浮点数
system.cpu.num[&lt;type&gt;]	CPU 数量，返回整数
system.cpu.switches	上下文的数量进行切换。它返回一个整数值。
system.cpu.util[&lt;cpu&gt;,&lt;type&gt;,&lt;mode&gt;,&lt;logical_or_physical&gt;]	CPU 使用率。返回浮点数
system.hostname[&lt;type&gt;]	系统主机名。返回字符串
system.hw.chassis[&lt;info&gt;]	机架信息。返回字符串
system.hw.cpu[&lt;cpu&gt;,&lt;info&gt;]	CPU 信息。返回字符串或整数
system.hw.devices[&lt;type&gt;]	PCI或者USB设备列表。返回文本
system.hw.macaddr[&lt;interface&gt;,&lt;format&gt;]	MAC地址。返回字符串
system.localtime[&lt;type&gt;]	系统时间。返回的是UTC整数。是服务器本地的时间
system.run[command,&lt;mode&gt;]	即在主机上指定的命令的执行。返回命令执行结果的文本值。如果指定NOWAIT的模式，这将返回执行命令的结果1。
system.stat[resource,&lt;type&gt;]	系统统计数据。返回整数值或者浮点值
system.sw.arch	软件架构信息。返回字符串
system.sw.os[&lt;info&gt;]	操作系统信息。返回字符串
system.sw.packages[&lt;package&gt;,&lt;manager&gt;,&lt;format&gt;]	安装包列表。返回文本
system.swap.in[&lt;device&gt;,&lt;type&gt;]	在交换分区(swap)（从设备到内存）统计数据。返回整数
system.swap.out[&lt;device&gt;,&lt;type&gt;]	交换分区（从内存到设备）的统计数据。返回整数
system.swap.size[&lt;device&gt;,&lt;type&gt;]	交换分区空间大小，字节或从总百分比。从字节返回整数;对于浮动比例
system.uname	识别系统。返回 字符串
system.uptime	系统启动时间。返回整数
system.users.num	已登录的用户数量，返回整数
vfs.dev.discovery	List of block devices and their type. Returns JSON
vfs.dev.read[&lt;device&gt;,&lt;type&gt;,&lt;mode&gt;]	磁盘读取数据。类型是sectors, operations, bytes;返回整数，类型是 sps, ops, bps则返回浮点。
vfs.dev.write[&lt;device&gt;,&lt;type&gt;,&lt;mode&gt;]	磁盘写入数据。类型是sectors, operations, bytes;返回整数，类型是 sps, ops, bps则返回浮点。
vfs.dir.count[dir,&lt;regex_incl&gt;,&lt;regex_excl&gt;,&lt;types_incl&gt;,&lt;types_excl&gt;,&lt;max_depth&gt;,&lt;min_size&gt;,&lt;max_size&gt;,&lt;min_age&gt;,&lt;max_age&gt;,&lt;regex_excl_dir&gt;]	目录递归的条目数量。返回整数
vfs.dir.size[dir,&lt;regex_incl&gt;,&lt;regex_excl&gt;,&lt;mode&gt;,&lt;max_depth&gt;,&lt;regex_excl_dir&gt;]	目录大小（bytes）。返回整数
vfs.file.cksum[file]	文件效验，unix标准算法。返回整数
vfs.file.contents[file,&lt;encoding&gt;]	搜索文件内容。返回文本
vfs.file.exists[file,&lt;types_incl&gt;,&lt;types_excl&gt;]	Checks if file exists. Returns 0 - not found; 1 - file of the specified type exists
vfs.file.md5sum[file]	文件的MD5校验。返回字符串（该文件的MD5哈希值）
vfs.file.regexp[file,regexp,&lt;encoding&gt;,&lt;start line&gt;,&lt;end line&gt;,&lt;output&gt;]	查找文件中的字符串，返回内容是被匹配内容的整行字符串，或者其他可选参数
vfs.file.regmatch[file,regexp,&lt;encoding&gt;,&lt;start line&gt;,&lt;end line&gt;]	查找文件中的字符串，如果有则返回1，没有则返回0。
vfs.file.size[file]	文件大小（单位bytes）。返回整数
vfs.file.time[file,&lt;mode&gt;]	文件事件信息，返回的是时间戳 整数
vfs.fs.discovery	List of mounted filesystems and their types. Returns JSON
vfs.fs.get	List of mounted filesystems, their types, disk space and inode statistics. Returns JSON
vfs.fs.inode[fs,&lt;mode&gt;]	数或inode的百分比。返回数字，如果是浮点则是百分比
vfs.fs.size[fs,&lt;mode&gt;]	磁盘容量。如果返回的是字节则是整数，如果返回的是百分比则是浮点。
vm.memory.size[&lt;mode&gt;]	从字节或总百分比的内存大小。它返回一个整数值，如果字节，只要百分比返回浮点值。
vm.vmemory.size[&lt;type&gt;]	虚拟空间大小（以字节计）或百分比（总计）。 返回整型字节; 浮点百分比
web.page.get[host,&lt;path&gt;,&lt;port&gt;]	获取网页。返回信息为网页源码或者TXT
web.page.perf[host,&lt;path&gt;,&lt;port&gt;]	全网页加载时间（秒）。返回浮点型
web.page.regexp[host,&lt;path&gt;,&lt;port&gt;,regexp,&lt;length&gt;,&lt;output&gt;]	查找网页中的字符串，返回内容是被匹配内容的整行字符串，或者其他可选参数
wmi.get[&lt;namespace&gt;,&lt;query&gt;]	执行 WMI 查询返回第一个对象。返回整形、浮点、字符串或者文本内容
wmi.getall[&lt;namespace&gt;,&lt;query&gt;]	Execute WMI query and return the JSON document with all selected objects
zabbix.stats[&lt;ip&gt;,&lt;port&gt;]	Returns a JSON object containing Zabbix server or proxy internal metrics.
zabbix.stats[&lt;ip&gt;,&lt;port&gt;,queue,&lt;from&gt;,&lt;to&gt;]	Number of items in the queue which are delayed in Zabbix server or proxy by "from" till "to" seconds, inclusive.
</code></pre> 
<p>例子1：</p> 
<pre><code>{Template OS Linux by Zabbix agent zwp:system.cpu.load[all,avg1].min(5m)}/{Template OS Linux by Zabbix agent zwp:system.cpu.num.last()}&gt;{$LOAD_AVG_PER_CPU.MAX.WARN} and {Template OS Linux by Zabbix agent zwp:system.cpu.load[all,avg5].last()}&gt;0 and {Template OS Linux by Zabbix agent zwp:system.cpu.load[all,avg15].last()}&gt;0

system.cpu.load[&lt;cpu&gt;,&lt;mode&gt;]	CPU 负载。返回浮点数
{$LOAD_AVG_PER_CPU.MAX.WARN} 宏



</code></pre> 
<h3><a id="_460"></a>总结</h3> 
<pre><code>{Template OS Linux by Zabbix agent zwp:system.cpu.load[all,avg1].min(5m)}/{Template OS Linux by Zabbix agent zwp:system.cpu.num.last()}&gt;{$LOAD_AVG_PER_CPU.MAX.WARN} and {Template OS Linux by Zabbix agent zwp:system.cpu.load[all,avg5].last()}&gt;0 and {Template OS Linux by Zabbix agent zwp:system.cpu.load[all,avg15].last()}&gt;0

system.cpu.load[&lt;cpu&gt;,&lt;mode&gt;]	CPU 负载。返回浮点数
{$LOAD_AVG_PER_CPU.MAX.WARN} 宏



</code></pre> 
<h3><a id="_488"></a>总结</h3>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/92f989edcf955887ae9861415750659d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">思科RSTP组网实验（快速生成树协议）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4bf44891f2370e79956d30429595fcc3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">System类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>