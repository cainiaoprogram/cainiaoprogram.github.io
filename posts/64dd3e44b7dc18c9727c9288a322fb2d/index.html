<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Jetson nanoéƒ¨ç½²YOLOv7 - èœé¸Ÿç¨‹åºå‘˜åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Jetson nanoéƒ¨ç½²YOLOv7" />
<meta property="og:description" content="ç›®å½• å‰è¨€ä¸€ã€YOLOv7æ¨¡å‹è®­ç»ƒ1. é¡¹ç›®çš„å…‹éš†å’Œå¿…è¦çš„ç¯å¢ƒä¾èµ–1.1 é¡¹ç›®çš„å…‹éš†1.2 é¡¹ç›®ä»£ç ç»“æ„æ•´ä½“ä»‹ç»1.3 ç¯å¢ƒå®‰è£… 2. æ•°æ®é›†å’Œé¢„è®­ç»ƒæƒé‡çš„å‡†å¤‡2.1 æ•°æ®é›†2.2 é¢„è®­ç»ƒæƒé‡å‡†å¤‡ 3 è®­ç»ƒæ¨¡å‹3.1 ä¿®æ”¹æ¨¡å‹é…ç½®æ–‡ä»¶3.2 ä¿®æ”¹æ•°æ®é…ç½®æ–‡ä»¶3.3 è®­ç»ƒæ¨¡å‹3.4 æ¨ç†æµ‹è¯• äºŒã€YOLOv7æ¨¡å‹éƒ¨ç½²1. æºç ä¸‹è½½2. ç¯å¢ƒé…ç½®2.1 Jtop(option)2.1.1 é…ç½®pip2.1.2 å®‰è£…jtop2.1.3 ä½¿ç”¨jtop 2.2 ç¼–è¯‘Protobuf2.2.1 è§£å‹2.2.2 ç¼–è¯‘2.2.3 å®‰è£…2.2.4 ç¯å¢ƒé…ç½®(option) 2.3 é…ç½®CMakeLists.txt 3. ONNXå¯¼å‡º3.1 æºç ä¸‹è½½3.2 ä¿®æ”¹ä»£ç 3.3 å¯¼å‡ºONNXæ¨¡å‹3.4 æ‹“å±•-æ­£ç¡®å¯¼å‡ºONNXæ–‡ä»¶ 4. è¿è¡Œ4.1 æºç ä¿®æ”¹4.2 ç¼–è¯‘4.3 æ¨¡å‹æ„å»ºå’Œæ¨ç†4.4 æ‹“å±•-æ‘„åƒå¤´æ£€æµ‹ ç»“è¯­ä¸‹è½½é“¾æ¥å‚è€ƒ å‰è¨€ yolov7æ¨¡å‹éƒ¨ç½²æµç¨‹å’Œyolov5å‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å…ˆæŸ¥çœ‹æˆ‘ä¹‹å‰çš„JetsonåµŒå…¥å¼ç³»åˆ—æ¨¡å‹éƒ¨ç½²æ•™ç¨‹ã€‚è€ƒè™‘åˆ°nanoçš„ç®—åŠ›ï¼Œè¿™é‡Œé‡‡ç”¨yolov7-tiny.ptæ¨¡å‹ï¼Œæœ¬æ–‡ä¸»è¦åˆ†äº«yolov7æ¨¡å‹è®­ç»ƒå’Œjetson nanoéƒ¨ç½²yolov7æ¨¡å‹ä¸¤æ–¹é¢çš„å†…å®¹ã€‚è‹¥æœ‰é—®é¢˜æ¬¢è¿å„ä½çœ‹å®˜æ‰¹è¯„æŒ‡æ­£!!!â€‹ğŸ˜ƒ
ä¸€ã€YOLOv7æ¨¡å‹è®­ç»ƒ yolov7çš„ä»£ç é£æ ¼å’Œyolov5éå¸¸åƒï¼Œè®­ç»ƒæµç¨‹å¯å‚è€ƒyolov5çš„è®­ç»ƒã€‚åšä¸»ä¸»è¦å‚è€ƒç‚®å“¥å¸¦ä½ å­¦çš„åˆ©ç”¨yolov5è®­ç»ƒè‡ªå·±çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹ä»¥åŠæ·±åº¦å­¦ä¹ éº‹äº†é¹¿çš„yolov7è®­ç»ƒæµ‹è¯•è‡ªå·±çš„æ•°æ®é›†
1. é¡¹ç›®çš„å…‹éš†å’Œå¿…è¦çš„ç¯å¢ƒä¾èµ– 1.1 é¡¹ç›®çš„å…‹éš† yolov7çš„ä»£ç æ˜¯å¼€æºçš„å¯ç›´æ¥ä»githubå®˜ç½‘ä¸Šä¸‹è½½ï¼Œæºç ä¸‹è½½åœ°å€æ˜¯https://github.com/WongKinYiu/yolov7ï¼Œç”±äºyolov7åˆšå‘å¸ƒä¸ä¹…ç›®å‰å°±åªå›ºå®šv0.1ä¸€ä¸ªç‰ˆæœ¬ï¼Œè€Œv0.1ç‰ˆæœ¬å¹¶æœªæä¾›è®­ç»ƒçš„è¯¦ç»†è¯´æ˜ï¼Œæ•…é‡‡ç”¨ä¸»åˆ†æ”¯è¿›è¡Œæ¨¡å‹çš„è®­ç»ƒå’Œéƒ¨ç½²å·¥ä½œã€‚Linuxä¸‹ä»£ç å…‹éš†æŒ‡ä»¤å¦‚ä¸‹
git clone https://github.com/WongKinYiu/yolov7.git ä¹Ÿå¯æ‰‹åŠ¨ç‚¹å‡»ä¸‹è½½ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç»¿è‰²çš„CodeæŒ‰é”®ï¼Œå°†ä»£ç ä¸‹è½½ä¸‹æ¥ã€‚è‡³æ­¤æ•´ä¸ªé¡¹ç›®å°±å·²ç»å‡†å¤‡å¥½äº†ã€‚ä¹Ÿå¯ä»¥ç‚¹å‡»here[password:yolo]ä¸‹è½½åšä¸»å‡†å¤‡å¥½çš„ä»£ç (æ³¨æ„è¯¥ä»£ç ä¸‹è½½äº2022/8/31æ—¥ï¼Œè‹¥æœ‰æ”¹åŠ¨è¯·å‚è€ƒæœ€æ–°)
1.2 é¡¹ç›®ä»£ç ç»“æ„æ•´ä½“ä»‹ç» å°†ä¸‹è½½åçš„yolov7çš„ä»£ç è§£å‹ï¼Œå…¶ä»£ç ç›®å½•å¦‚ä¸‹å›¾
ç°åœ¨æ¥å¯¹ä»£ç çš„æ•´ä½“ç›®å½•åšä¸€ä¸ªä»‹ç»
|-cfgï¼šå­˜æ”¾yolov7ä¸åŒæ¨¡å‹çš„yamlæ–‡ä»¶ï¼Œå¦‚yolov7.yamlã€yolov7-tiny.yamlç­‰ï¼ŒåŒ…æ‹¬è®­ç»ƒå’Œéƒ¨ç½²æ—¶çš„yolov7æ¨¡å‹yaml|-dataï¼šå­˜æ”¾ä¸€äº›è¶…å‚æ•°çš„é…ç½®æ–‡ä»¶ä»¥åŠé…ç½®è®­ç»ƒé›†å’ŒéªŒè¯é›†è·¯å¾„çš„coco.yamlæ–‡ä»¶ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è‡ªå·±çš„æ•°æ®é›†ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹å…¶ä¸­çš„yamlæ–‡ä»¶|-deployï¼šé’ˆå¯¹éƒ¨ç½²çš„æ–‡ä»¶å¤¹|-figureï¼šå­˜æ”¾yolov7æµ‹è¯•çš„æ•ˆæœå›¾ç‰‡|-inferenceï¼šå­˜æ”¾æ¨ç†æ—¶çš„å›¾ç‰‡|-modelsï¼šå­˜æ”¾yolov7æ•´ä½“ç½‘ç»œæ¨¡å‹æ­å»ºçš„pyæ–‡ä»¶|-paperï¼šå­˜æ”¾yolov7è®ºæ–‡|-scriptsï¼šè„šæœ¬æ–‡ä»¶ï¼Œç”¨äºè·å–cocoæ•°æ®é›†|-toolsï¼šè¯¥æ–‡ä»¶å¤¹ä¸»è¦å­˜æ”¾ä¸€äº›ç¤ºä¾‹æ•™ç¨‹ï¼Œå¦‚yolov7å…³é”®ç‚¹æ£€æµ‹ã€yolov7å®ä¾‹åˆ†å‰²ã€yolov7onnxç­‰ç­‰|-utilsï¼šå­˜æ”¾å·¥å…·ç±»å‡½æ•°ï¼ŒåŒ…æ‹¬lossã€metricsã€plotså‡½æ•°ç­‰|- detect.pyï¼šæ£€æµ‹ä»£ç ï¼ŒåŒ…æ‹¬å›¾åƒæ£€æµ‹ã€è§†é¢‘æµæ£€æµ‹ç­‰export.pyï¼šæ¨¡å‹å¯¼å‡ºä»£ç ï¼Œå¦‚onnxå¯¼å‡ºhubconf.pyï¼špytorchæ‰©å±•æ¨¡å‹requirements.txtï¼šæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«ä½¿ç”¨yolov7é¡¹ç›®çš„ç¯å¢ƒä¾èµ–åŒ…ä»¥åŠç›¸åº”çš„ç‰ˆæœ¬å·test.pyï¼šæµ‹è¯•ä»£ç train.pyï¼šè®­ç»ƒä»£ç train_aux.pyï¼šè®­ç»ƒè¾…åŠ©å¤´ä»£ç (ä¸ç¡®å®š) 1.3 ç¯å¢ƒå®‰è£… å…³äºæ·±åº¦å­¦ä¹ çš„ç¯å¢ƒå®‰è£…å¯å‚è€ƒç‚®å“¥çš„åˆ©ç”¨Anacondaå®‰è£…pytorchå’Œpaddleæ·±åº¦å­¦ä¹ ç¯å¢ƒ&#43;pycharmå®‰è£…â€”å…é¢å¤–å®‰è£…CUDAå’Œcudnn(é€‚åˆå°ç™½çš„ä¿å§†çº§æ•™å­¦)ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚å¦‚æœä¹‹å‰é…ç½®è¿‡yolov5çš„ç¯å¢ƒï¼Œyolov7å¯ç›´æ¥ä½¿ç”¨ã€‚
2. æ•°æ®é›†å’Œé¢„è®­ç»ƒæƒé‡çš„å‡†å¤‡ 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/64dd3e44b7dc18c9727c9288a322fb2d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-26T21:50:16+08:00" />
<meta property="article:modified_time" content="2023-03-26T21:50:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="èœé¸Ÿç¨‹åºå‘˜åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">èœé¸Ÿç¨‹åºå‘˜åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Jetson nanoéƒ¨ç½²YOLOv7</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ç›®å½•</h4> 
 <ul><li><ul><li><a href="#_2" rel="nofollow">å‰è¨€</a></li><li><a href="#YOLOv7_6" rel="nofollow">ä¸€ã€YOLOv7æ¨¡å‹è®­ç»ƒ</a></li><li><ul><li><a href="#1__10" rel="nofollow">1. é¡¹ç›®çš„å…‹éš†å’Œå¿…è¦çš„ç¯å¢ƒä¾èµ–</a></li><li><ul><li><a href="#11__12" rel="nofollow">1.1 é¡¹ç›®çš„å…‹éš†</a></li><li><a href="#12__25" rel="nofollow">1.2 é¡¹ç›®ä»£ç ç»“æ„æ•´ä½“ä»‹ç»</a></li><li><a href="#13__52" rel="nofollow">1.3 ç¯å¢ƒå®‰è£…</a></li></ul> 
    </li><li><a href="#2__56" rel="nofollow">2. æ•°æ®é›†å’Œé¢„è®­ç»ƒæƒé‡çš„å‡†å¤‡</a></li><li><ul><li><a href="#21__58" rel="nofollow">2.1 æ•°æ®é›†</a></li><li><a href="#22__255" rel="nofollow">2.2 é¢„è®­ç»ƒæƒé‡å‡†å¤‡</a></li></ul> 
    </li><li><a href="#3__261" rel="nofollow">3 è®­ç»ƒæ¨¡å‹</a></li><li><ul><li><a href="#31__267" rel="nofollow">3.1 ä¿®æ”¹æ¨¡å‹é…ç½®æ–‡ä»¶</a></li><li><a href="#32__274" rel="nofollow">3.2 ä¿®æ”¹æ•°æ®é…ç½®æ–‡ä»¶</a></li><li><a href="#33__287" rel="nofollow">3.3 è®­ç»ƒæ¨¡å‹</a></li><li><a href="#34__310" rel="nofollow">3.4 æ¨ç†æµ‹è¯•</a></li></ul> 
   </li></ul> 
   </li><li><a href="#YOLOv7_333" rel="nofollow">äºŒã€YOLOv7æ¨¡å‹éƒ¨ç½²</a></li><li><ul><li><a href="#1__337" rel="nofollow">1. æºç ä¸‹è½½</a></li><li><a href="#2__349" rel="nofollow">2. ç¯å¢ƒé…ç½®</a></li><li><ul><li><a href="#21_Jtopoption_353" rel="nofollow">2.1 Jtop(option)</a></li><li><ul><li><a href="#211_pip_363" rel="nofollow">2.1.1 é…ç½®pip</a></li><li><a href="#212_jtop_388" rel="nofollow">2.1.2 å®‰è£…jtop</a></li><li><a href="#213_jtop_394" rel="nofollow">2.1.3 ä½¿ç”¨jtop</a></li></ul> 
     </li><li><a href="#22_Protobuf_414" rel="nofollow">2.2 ç¼–è¯‘Protobuf</a></li><li><ul><li><a href="#221__418" rel="nofollow">2.2.1 è§£å‹</a></li><li><a href="#222__425" rel="nofollow">2.2.2 ç¼–è¯‘</a></li><li><a href="#223__433" rel="nofollow">2.2.3 å®‰è£…</a></li><li><a href="#224_option_442" rel="nofollow">2.2.4 ç¯å¢ƒé…ç½®(option)</a></li></ul> 
     </li><li><a href="#23_CMakeListstxt_479" rel="nofollow">2.3 é…ç½®CMakeLists.txt</a></li></ul> 
    </li><li><a href="#3_ONNX_500" rel="nofollow">3. ONNXå¯¼å‡º</a></li><li><ul><li><a href="#31__505" rel="nofollow">3.1 æºç ä¸‹è½½</a></li><li><a href="#32__513" rel="nofollow">3.2 ä¿®æ”¹ä»£ç </a></li><li><a href="#33_ONNX_580" rel="nofollow">3.3 å¯¼å‡ºONNXæ¨¡å‹</a></li><li><a href="#34_ONNX_601" rel="nofollow">3.4 æ‹“å±•-æ­£ç¡®å¯¼å‡ºONNXæ–‡ä»¶</a></li></ul> 
    </li><li><a href="#4__617" rel="nofollow">4. è¿è¡Œ</a></li><li><ul><li><a href="#41__619" rel="nofollow">4.1 æºç ä¿®æ”¹</a></li><li><a href="#42__641" rel="nofollow">4.2 ç¼–è¯‘</a></li><li><a href="#43__680" rel="nofollow">4.3 æ¨¡å‹æ„å»ºå’Œæ¨ç†</a></li><li><a href="#44__703" rel="nofollow">4.4 æ‹“å±•-æ‘„åƒå¤´æ£€æµ‹</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_788" rel="nofollow">ç»“è¯­</a></li><li><a href="#_792" rel="nofollow">ä¸‹è½½é“¾æ¥</a></li><li><a href="#_803" rel="nofollow">å‚è€ƒ</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_2"></a>å‰è¨€</h3> 
<blockquote> 
 <p>yolov7æ¨¡å‹éƒ¨ç½²æµç¨‹å’Œyolov5å‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å…ˆæŸ¥çœ‹æˆ‘ä¹‹å‰çš„<a href="https://blog.csdn.net/qq_40672115/category_11970990.html?spm=1001.2014.3001.5482">JetsonåµŒå…¥å¼ç³»åˆ—æ¨¡å‹éƒ¨ç½²æ•™ç¨‹</a>ã€‚è€ƒè™‘åˆ°nanoçš„ç®—åŠ›ï¼Œè¿™é‡Œé‡‡ç”¨yolov7-tiny.ptæ¨¡å‹ï¼Œæœ¬æ–‡ä¸»è¦åˆ†äº«yolov7æ¨¡å‹è®­ç»ƒå’Œjetson nanoéƒ¨ç½²yolov7æ¨¡å‹ä¸¤æ–¹é¢çš„å†…å®¹ã€‚è‹¥æœ‰é—®é¢˜æ¬¢è¿å„ä½çœ‹å®˜æ‰¹è¯„æŒ‡æ­£!!!â€‹ğŸ˜ƒ</p> 
</blockquote> 
<h3><a id="YOLOv7_6"></a>ä¸€ã€YOLOv7æ¨¡å‹è®­ç»ƒ</h3> 
<p>yolov7çš„ä»£ç é£æ ¼å’Œyolov5éå¸¸åƒï¼Œè®­ç»ƒæµç¨‹å¯å‚è€ƒyolov5çš„è®­ç»ƒã€‚åšä¸»ä¸»è¦å‚è€ƒç‚®å“¥å¸¦ä½ å­¦çš„<a href="https://blog.csdn.net/didiaopao/article/details/119954291?spm=1001.2014.3001.5501">åˆ©ç”¨yolov5è®­ç»ƒè‡ªå·±çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹</a>ä»¥åŠæ·±åº¦å­¦ä¹ éº‹äº†é¹¿çš„<a href="https://www.bilibili.com/video/BV1kU4y1i7Ts?spm_id_from=333.999.0.0&amp;vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">yolov7è®­ç»ƒæµ‹è¯•è‡ªå·±çš„æ•°æ®é›†</a></p> 
<h4><a id="1__10"></a>1. é¡¹ç›®çš„å…‹éš†å’Œå¿…è¦çš„ç¯å¢ƒä¾èµ–</h4> 
<h5><a id="11__12"></a>1.1 é¡¹ç›®çš„å…‹éš†</h5> 
<p>yolov7çš„ä»£ç æ˜¯å¼€æºçš„å¯ç›´æ¥ä»githubå®˜ç½‘ä¸Šä¸‹è½½ï¼Œæºç ä¸‹è½½åœ°å€æ˜¯<a href="https://github.com/WongKinYiu/yolov7">https://github.com/WongKinYiu/yolov7</a>ï¼Œç”±äºyolov7åˆšå‘å¸ƒä¸ä¹…ç›®å‰å°±åªå›ºå®šv0.1ä¸€ä¸ªç‰ˆæœ¬ï¼Œè€Œv0.1ç‰ˆæœ¬å¹¶æœªæä¾›è®­ç»ƒçš„è¯¦ç»†è¯´æ˜ï¼Œæ•…é‡‡ç”¨<strong>ä¸»åˆ†æ”¯è¿›è¡Œæ¨¡å‹çš„è®­ç»ƒå’Œéƒ¨ç½²å·¥ä½œ</strong>ã€‚Linuxä¸‹ä»£ç å…‹éš†æŒ‡ä»¤å¦‚ä¸‹</p> 
<pre><code class="prism language-shell"><span class="token function">git</span> clone https://github.com/WongKinYiu/yolov7.git
</code></pre> 
<p>ä¹Ÿå¯æ‰‹åŠ¨ç‚¹å‡»ä¸‹è½½ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ç»¿è‰²çš„<code>Code</code>æŒ‰é”®ï¼Œå°†ä»£ç ä¸‹è½½ä¸‹æ¥ã€‚è‡³æ­¤æ•´ä¸ªé¡¹ç›®å°±å·²ç»å‡†å¤‡å¥½äº†ã€‚ä¹Ÿå¯ä»¥ç‚¹å‡»<a href="https://pan.baidu.com/s/1OmR4bCoRhGD_D8HrPbcVhQ" rel="nofollow">here[password:yolo]</a>ä¸‹è½½åšä¸»å‡†å¤‡å¥½çš„ä»£ç (<strong>æ³¨æ„è¯¥ä»£ç ä¸‹è½½äº2022/8/31æ—¥ï¼Œè‹¥æœ‰æ”¹åŠ¨è¯·å‚è€ƒæœ€æ–°</strong>)</p> 
<p><img src="https://images2.imgbox.com/a6/6f/pXq8BKNO_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="12__25"></a>1.2 é¡¹ç›®ä»£ç ç»“æ„æ•´ä½“ä»‹ç»</h5> 
<p>å°†ä¸‹è½½åçš„yolov7çš„ä»£ç è§£å‹ï¼Œå…¶ä»£ç ç›®å½•å¦‚ä¸‹å›¾</p> 
<p><img src="https://images2.imgbox.com/64/a8/aq2EjmSt_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ç°åœ¨æ¥å¯¹ä»£ç çš„æ•´ä½“ç›®å½•åšä¸€ä¸ªä»‹ç»</p> 
<ul><li><strong>|-cfg</strong>ï¼šå­˜æ”¾yolov7ä¸åŒæ¨¡å‹çš„yamlæ–‡ä»¶ï¼Œå¦‚yolov7.yamlã€yolov7-tiny.yamlç­‰ï¼ŒåŒ…æ‹¬è®­ç»ƒå’Œéƒ¨ç½²æ—¶çš„yolov7æ¨¡å‹yaml</li><li><strong>|-data</strong>ï¼šå­˜æ”¾ä¸€äº›è¶…å‚æ•°çš„é…ç½®æ–‡ä»¶ä»¥åŠé…ç½®è®­ç»ƒé›†å’ŒéªŒè¯é›†è·¯å¾„çš„coco.yamlæ–‡ä»¶ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è‡ªå·±çš„æ•°æ®é›†ï¼Œé‚£ä¹ˆéœ€è¦ä¿®æ”¹å…¶ä¸­çš„yamlæ–‡ä»¶</li><li><strong>|-deploy</strong>ï¼šé’ˆå¯¹éƒ¨ç½²çš„æ–‡ä»¶å¤¹</li><li><strong>|-figure</strong>ï¼šå­˜æ”¾yolov7æµ‹è¯•çš„æ•ˆæœå›¾ç‰‡</li><li><strong>|-inference</strong>ï¼šå­˜æ”¾æ¨ç†æ—¶çš„å›¾ç‰‡</li><li><strong>|-models</strong>ï¼šå­˜æ”¾yolov7æ•´ä½“ç½‘ç»œæ¨¡å‹æ­å»ºçš„pyæ–‡ä»¶</li><li><strong>|-paper</strong>ï¼šå­˜æ”¾yolov7è®ºæ–‡</li><li><strong>|-scripts</strong>ï¼šè„šæœ¬æ–‡ä»¶ï¼Œç”¨äºè·å–cocoæ•°æ®é›†</li><li><strong>|-tools</strong>ï¼šè¯¥æ–‡ä»¶å¤¹ä¸»è¦å­˜æ”¾ä¸€äº›ç¤ºä¾‹æ•™ç¨‹ï¼Œå¦‚yolov7å…³é”®ç‚¹æ£€æµ‹ã€yolov7å®ä¾‹åˆ†å‰²ã€yolov7onnxç­‰ç­‰</li><li><strong>|-utils</strong>ï¼šå­˜æ”¾å·¥å…·ç±»å‡½æ•°ï¼ŒåŒ…æ‹¬lossã€metricsã€plotså‡½æ•°ç­‰</li><li>|- 
  <ul><li><strong>detect.py</strong>ï¼šæ£€æµ‹ä»£ç ï¼ŒåŒ…æ‹¬å›¾åƒæ£€æµ‹ã€è§†é¢‘æµæ£€æµ‹ç­‰</li><li><strong>export.py</strong>ï¼šæ¨¡å‹å¯¼å‡ºä»£ç ï¼Œå¦‚onnxå¯¼å‡º</li><li><strong>hubconf.py</strong>ï¼špytorchæ‰©å±•æ¨¡å‹</li><li><strong>requirements.txt</strong>ï¼šæ–‡æœ¬æ–‡ä»¶ï¼Œé‡Œé¢åŒ…å«ä½¿ç”¨yolov7é¡¹ç›®çš„ç¯å¢ƒä¾èµ–åŒ…ä»¥åŠç›¸åº”çš„ç‰ˆæœ¬å·</li><li><strong>test.py</strong>ï¼šæµ‹è¯•ä»£ç </li><li><strong>train.py</strong>ï¼šè®­ç»ƒä»£ç </li><li><strong>train_aux.py</strong>ï¼šè®­ç»ƒè¾…åŠ©å¤´ä»£ç (<strong>ä¸ç¡®å®š</strong>)</li></ul> </li></ul> 
<h5><a id="13__52"></a>1.3 ç¯å¢ƒå®‰è£…</h5> 
<p>å…³äºæ·±åº¦å­¦ä¹ çš„ç¯å¢ƒå®‰è£…å¯å‚è€ƒç‚®å“¥çš„<a href="https://blog.csdn.net/didiaopao/article/details/119787139?spm=1001.2014.3001.5501">åˆ©ç”¨Anacondaå®‰è£…pytorchå’Œpaddleæ·±åº¦å­¦ä¹ ç¯å¢ƒ+pycharmå®‰è£…â€”å…é¢å¤–å®‰è£…CUDAå’Œcudnn(é€‚åˆå°ç™½çš„ä¿å§†çº§æ•™å­¦)</a>ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚å¦‚æœä¹‹å‰é…ç½®è¿‡yolov5çš„ç¯å¢ƒï¼Œyolov7å¯ç›´æ¥ä½¿ç”¨ã€‚</p> 
<h4><a id="2__56"></a>2. æ•°æ®é›†å’Œé¢„è®­ç»ƒæƒé‡çš„å‡†å¤‡</h4> 
<h5><a id="21__58"></a>2.1 æ•°æ®é›†</h5> 
<p>è¿™é‡Œé‡‡ç”¨çš„æ•°æ®é›†æ˜¯å£ç½©è¯†åˆ«ï¼Œæ¥æºäº<a href="https://space.bilibili.com/73270408" rel="nofollow">Bç«™UPä¸»HamlinZheng</a>çš„<a href="https://www.bilibili.com/video/BV1i7411376y?spm_id_from=333.337.search-card.all.click&amp;vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">å£ç½©è¯†åˆ«æ•°æ®é›†</a>ï¼Œè¿™é‡Œç»™å‡ºä¸‹è½½é“¾æ¥<a href="https://pan.baidu.com/s/1oeBugM-bqRN6QFnVgXi5HQ" rel="nofollow">Baidu Drive[password:yolo]</a>ï¼Œåšä¸»å°†åŸæ•°æ®é›†æ•´åˆäº†ä¸‹ï¼Œæ–¹ä¾¿åç»­çš„è®­ç»ƒï¼Œè§£å‹åæ•´ä¸ªæ•°æ®é›†ç›®å½•ç»“æ„å¦‚ä¸‹</p> 
<pre><code class="prism language-shell">VOCdevkit
   â””â”€VOC2007
       â”œâ”€Annotations
       â””â”€JPEGImages
</code></pre> 
<p>å…¶ä¸­JPEGImagesä¸­å­˜æ”¾çš„æ˜¯å›¾åƒæ–‡ä»¶ï¼ŒAnnotationså­˜æ”¾çš„æ˜¯å¯¹åº”çš„XMLæ ‡ç­¾æ–‡ä»¶ã€‚å…³äºæ ‡ç­¾çš„åˆ¶ä½œå¯å‚è€ƒ<a href="https://space.bilibili.com/18161609?spm_id_from=333.337.0.0" rel="nofollow">Bç«™UPä¸»éœ¹é›³å§å•¦Wz</a>çš„<a href="https://www.bilibili.com/video/BV1kV411k7D8?vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">PASCAL VOC2012æ•°æ®é›†è®²è§£ä¸åˆ¶ä½œè‡ªå·±çš„æ•°æ®é›†</a>ï¼Œ<strong>ç”±äºlabelimgæ ‡æ³¨çš„æ˜¯VOCæ ¼å¼æ ‡ç­¾çš„XMLæ–‡ä»¶ï¼Œéœ€è¦è½¬åŒ–ä¸ºYOLOæ ¼å¼æ ‡ç­¾çš„txtæ–‡ä»¶</strong>ï¼Œå…³äºè½¬æ¢çš„ä»£ç å¯å‚è€ƒç‚®å“¥çš„<a href="https://blog.csdn.net/didiaopao/article/details/120022845?spm=1001.2014.3001.5502">ç›®æ ‡æ£€æµ‹â€”æ•°æ®é›†æ ¼å¼è½¬åŒ–åŠè®­ç»ƒé›†å’ŒéªŒè¯é›†åˆ’åˆ†</a>ï¼Œä¸‹é¢ç»™å‡ºVOCæ ¼å¼è½¬YOLOæ ¼å¼çš„ä»£ç ï¼š</p> 
<pre><code class="prism language-python"><span class="token comment"># voc2yolo.py</span>
<span class="token keyword">import</span> xml<span class="token punctuation">.</span>etree<span class="token punctuation">.</span>ElementTree <span class="token keyword">as</span> ET
<span class="token keyword">import</span> pickle
<span class="token keyword">import</span> os
<span class="token keyword">from</span> os <span class="token keyword">import</span> listdir<span class="token punctuation">,</span> getcwd
<span class="token keyword">from</span> os<span class="token punctuation">.</span>path <span class="token keyword">import</span> join
<span class="token keyword">import</span> random
<span class="token keyword">from</span> shutil <span class="token keyword">import</span> copyfile

<span class="token comment"># 1. ä¿®æ”¹ä¸ºè‡ªåˆ¶æ•°æ®é›†éœ€æ£€æµ‹çš„ç±»åˆ«æ•°</span>
classes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"have_mask"</span><span class="token punctuation">,</span> <span class="token string">"no_mask"</span><span class="token punctuation">]</span>

<span class="token comment"># 2. è®­ç»ƒé›†å’ŒéªŒè¯é›†çš„æ¯”ä¾‹</span>
TRAIN_RATIO <span class="token operator">=</span> <span class="token number">80</span>


<span class="token keyword">def</span> <span class="token function">clear_hidden_files</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    dir_list <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> dir_list<span class="token punctuation">:</span>
        abspath <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isfile<span class="token punctuation">(</span>abspath<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> i<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">"._"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>abspath<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            clear_hidden_files<span class="token punctuation">(</span>abspath<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">convert</span><span class="token punctuation">(</span>size<span class="token punctuation">,</span> box<span class="token punctuation">)</span><span class="token punctuation">:</span>
    dw <span class="token operator">=</span> <span class="token number">1.</span> <span class="token operator">/</span> size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    dh <span class="token operator">=</span> <span class="token number">1.</span> <span class="token operator">/</span> size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    x <span class="token operator">=</span> <span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> box<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span>
    y <span class="token operator">=</span> <span class="token punctuation">(</span>box<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">+</span> box<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span>
    w <span class="token operator">=</span> box<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> box<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    h <span class="token operator">=</span> box<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">-</span> box<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
    x <span class="token operator">=</span> x <span class="token operator">*</span> dw
    w <span class="token operator">=</span> w <span class="token operator">*</span> dw
    y <span class="token operator">=</span> y <span class="token operator">*</span> dh
    h <span class="token operator">=</span> h <span class="token operator">*</span> dh
    <span class="token keyword">return</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">convert_annotation</span><span class="token punctuation">(</span>image_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
    in_file <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'VOCdevkit/VOC2007/Annotations/%s.xml'</span> <span class="token operator">%</span> image_id<span class="token punctuation">)</span>
    out_file <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'VOCdevkit/VOC2007/YOLOLabels/%s.txt'</span> <span class="token operator">%</span> image_id<span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
    tree <span class="token operator">=</span> ET<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>in_file<span class="token punctuation">)</span>
    root <span class="token operator">=</span> tree<span class="token punctuation">.</span>getroot<span class="token punctuation">(</span><span class="token punctuation">)</span>
    size <span class="token operator">=</span> root<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'size'</span><span class="token punctuation">)</span>
    w <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>size<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>
    h <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>size<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span>

    <span class="token keyword">for</span> obj <span class="token keyword">in</span> root<span class="token punctuation">.</span><span class="token builtin">iter</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        difficult <span class="token operator">=</span> obj<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'difficult'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        cls <span class="token operator">=</span> obj<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        <span class="token keyword">if</span> cls <span class="token keyword">not</span> <span class="token keyword">in</span> classes <span class="token keyword">or</span> <span class="token builtin">int</span><span class="token punctuation">(</span>difficult<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            <span class="token keyword">continue</span>
        cls_id <span class="token operator">=</span> classes<span class="token punctuation">.</span>index<span class="token punctuation">(</span>cls<span class="token punctuation">)</span>
        xmlbox <span class="token operator">=</span> obj<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'bndbox'</span><span class="token punctuation">)</span>
        b <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'xmax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymin'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">,</span>
             <span class="token builtin">float</span><span class="token punctuation">(</span>xmlbox<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'ymax'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">)</span>
        bb <span class="token operator">=</span> convert<span class="token punctuation">(</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span>
        out_file<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>cls_id<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token keyword">for</span> a <span class="token keyword">in</span> bb<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
    in_file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
    out_file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>


wd <span class="token operator">=</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span>
wd <span class="token operator">=</span> os<span class="token punctuation">.</span>getcwd<span class="token punctuation">(</span><span class="token punctuation">)</span>
data_base_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>wd<span class="token punctuation">,</span> <span class="token string">"VOCdevkit/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>data_base_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>data_base_dir<span class="token punctuation">)</span>
work_sapce_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>data_base_dir<span class="token punctuation">,</span> <span class="token string">"VOC2007/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>work_sapce_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>work_sapce_dir<span class="token punctuation">)</span>
annotation_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>work_sapce_dir<span class="token punctuation">,</span> <span class="token string">"Annotations/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>annotation_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>annotation_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>annotation_dir<span class="token punctuation">)</span>
image_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>work_sapce_dir<span class="token punctuation">,</span> <span class="token string">"JPEGImages/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>image_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>image_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>image_dir<span class="token punctuation">)</span>
yolo_labels_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>work_sapce_dir<span class="token punctuation">,</span> <span class="token string">"YOLOLabels/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>yolo_labels_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>yolo_labels_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>yolo_labels_dir<span class="token punctuation">)</span>
yolov5_images_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>data_base_dir<span class="token punctuation">,</span> <span class="token string">"images/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>yolov5_images_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>yolov5_images_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>yolov5_images_dir<span class="token punctuation">)</span>
yolov5_labels_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>data_base_dir<span class="token punctuation">,</span> <span class="token string">"labels/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>yolov5_labels_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>yolov5_labels_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>yolov5_labels_dir<span class="token punctuation">)</span>
yolov5_images_train_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>yolov5_images_dir<span class="token punctuation">,</span> <span class="token string">"train/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>yolov5_images_train_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>yolov5_images_train_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>yolov5_images_train_dir<span class="token punctuation">)</span>
yolov5_images_test_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>yolov5_images_dir<span class="token punctuation">,</span> <span class="token string">"val/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>yolov5_images_test_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>yolov5_images_test_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>yolov5_images_test_dir<span class="token punctuation">)</span>
yolov5_labels_train_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>yolov5_labels_dir<span class="token punctuation">,</span> <span class="token string">"train/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>yolov5_labels_train_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>yolov5_labels_train_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>yolov5_labels_train_dir<span class="token punctuation">)</span>
yolov5_labels_test_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>yolov5_labels_dir<span class="token punctuation">,</span> <span class="token string">"val/"</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isdir<span class="token punctuation">(</span>yolov5_labels_test_dir<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>mkdir<span class="token punctuation">(</span>yolov5_labels_test_dir<span class="token punctuation">)</span>
clear_hidden_files<span class="token punctuation">(</span>yolov5_labels_test_dir<span class="token punctuation">)</span>

train_file <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>wd<span class="token punctuation">,</span> <span class="token string">"yolov5_train.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
test_file <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>wd<span class="token punctuation">,</span> <span class="token string">"yolov5_val.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
train_file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
test_file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
train_file <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>wd<span class="token punctuation">,</span> <span class="token string">"yolov5_train.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
test_file <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>wd<span class="token punctuation">,</span> <span class="token string">"yolov5_val.txt"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span>
list_imgs <span class="token operator">=</span> os<span class="token punctuation">.</span>listdir<span class="token punctuation">(</span>image_dir<span class="token punctuation">)</span>  <span class="token comment"># list image files</span>
prob <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Probability: %d"</span> <span class="token operator">%</span> prob<span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>list_imgs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>image_dir<span class="token punctuation">,</span> list_imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>isfile<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        image_path <span class="token operator">=</span> image_dir <span class="token operator">+</span> list_imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        voc_path <span class="token operator">=</span> list_imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token punctuation">(</span>nameWithoutExtention<span class="token punctuation">,</span> extention<span class="token punctuation">)</span> <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>image_path<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span>voc_nameWithoutExtention<span class="token punctuation">,</span> voc_extention<span class="token punctuation">)</span> <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>splitext<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>voc_path<span class="token punctuation">)</span><span class="token punctuation">)</span>
        annotation_name <span class="token operator">=</span> nameWithoutExtention <span class="token operator">+</span> <span class="token string">'.xml'</span>
        annotation_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>annotation_dir<span class="token punctuation">,</span> annotation_name<span class="token punctuation">)</span>
        label_name <span class="token operator">=</span> nameWithoutExtention <span class="token operator">+</span> <span class="token string">'.txt'</span>
        label_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>yolo_labels_dir<span class="token punctuation">,</span> label_name<span class="token punctuation">)</span>
    prob <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Probability: %d"</span> <span class="token operator">%</span> prob<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>prob <span class="token operator">&lt;</span> TRAIN_RATIO<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># train dataset</span>
        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>annotation_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            train_file<span class="token punctuation">.</span>write<span class="token punctuation">(</span>image_path <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
            convert_annotation<span class="token punctuation">(</span>nameWithoutExtention<span class="token punctuation">)</span>  <span class="token comment"># convert label</span>
            copyfile<span class="token punctuation">(</span>image_path<span class="token punctuation">,</span> yolov5_images_train_dir <span class="token operator">+</span> voc_path<span class="token punctuation">)</span>
            copyfile<span class="token punctuation">(</span>label_path<span class="token punctuation">,</span> yolov5_labels_train_dir <span class="token operator">+</span> label_name<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># test dataset</span>
        <span class="token keyword">if</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>annotation_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
            test_file<span class="token punctuation">.</span>write<span class="token punctuation">(</span>image_path <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>
            convert_annotation<span class="token punctuation">(</span>nameWithoutExtention<span class="token punctuation">)</span>  <span class="token comment"># convert label</span>
            copyfile<span class="token punctuation">(</span>image_path<span class="token punctuation">,</span> yolov5_images_test_dir <span class="token operator">+</span> voc_path<span class="token punctuation">)</span>
            copyfile<span class="token punctuation">(</span>label_path<span class="token punctuation">,</span> yolov5_labels_test_dir <span class="token operator">+</span> label_name<span class="token punctuation">)</span>
train_file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
test_file<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>ä»£ç æ€»å…±éœ€è¦ä¿®æ”¹ä¸¤å¤„</p> 
<ul><li><strong>ç¬¬11è¡Œï¼Œä¿®æ”¹è¦æ£€æµ‹çš„ç±»åˆ«åç§°</strong></li><li><strong>ç¬¬14è¡Œï¼Œä¿®æ”¹è®­ç»ƒé›†å’ŒéªŒè¯é›†çš„åˆ’åˆ†æ¯”ä¾‹</strong></li></ul> 
<p>æ•´ä¸ªç›®å½•ç»“æ„å¦‚ä¸‹ï¼Œæ³¨æ„<code>voc2yolo.py</code>ä¸<code>VOCdevkit</code>å¤„äº<strong>åŒä¸€çº§ç›®å½•</strong></p> 
<pre><code class="prism language-shell">VOCdevkit
   â””â”€VOC2007
       â”œâ”€Annotations
       â””â”€JPEGImages
voc2yolo.py
</code></pre> 
<p><strong>æ³¨</strong>ï¼šç›®å½•ç»“æ„ä¸€å®šè¦ä¸åšä¸»çš„ä¸€è‡´ï¼Œå› ä¸ºç¨‹åºå·²ç»å°†å¯¹åº”ç›®å½•å†™æ­»ã€‚</p> 
<p>è¿è¡Œ<code>voc2yolo.py</code>ä»£ç ä¹‹åå¾—åˆ°å¦‚ä¸‹ç»“æœ</p> 
<p><img src="https://images2.imgbox.com/ae/56/Mo9Gtn0z_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>å¯ä»¥çœ‹åˆ°ç›®å½•ä¸‹æœ‰ä¸€äº›æ–°çš„æ–‡ä»¶ç”Ÿæˆï¼Œé¦–å…ˆVOCdevkitæ–‡ä»¶å¤¹ä¸‹åˆ†åˆ«ç”Ÿæˆäº†imageså’Œlabelsæ–‡ä»¶å¤¹ï¼Œåˆ†åˆ«å­˜æ”¾ç€å›¾åƒå’Œå¯¹åº”çš„<strong>yoloæ ¼å¼çš„æ ‡ç­¾æ–‡ä»¶</strong>ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä¸‹åˆ†åˆ«åŒ…å«trainå’Œvalä¸¤ä¸ªå­æ–‡ä»¶å¤¹ï¼Œä»£è¡¨å„è‡ªå¯¹åº”çš„è®­ç»ƒé›†å’ŒéªŒè¯é›†ã€‚VOC2007æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†YOLOLabelsæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç€å¯¹åº”yoloæ ¼å¼çš„æ ‡ç­¾æ–‡ä»¶ã€‚ç„¶åè¿˜ç”Ÿæˆäº†<code>yolov5_train.txt</code>ä»¥åŠ<code>yolov5_val.txt</code>ä¸¤ä¸ªtxtæ–‡ä»¶ï¼Œå­˜æ”¾ç€è®­ç»ƒé›†å’ŒéªŒè¯é›†å›¾ç‰‡çš„å®Œæ•´è·¯å¾„ã€‚<strong>yolov7çš„è®­ç»ƒåªéœ€è¦VOCdevkitç›®å½•ä¸‹çš„imageså’Œlabelsä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå…¶å®ƒå‡ä¸éœ€è¦</strong>ï¼Œæ•…æœ€ç»ˆçš„ç›®å½•ç»“æ„å¦‚ä¸‹</p> 
<pre><code class="prism language-shell">VOCdevkit
    â”œâ”€images
    â”‚  â”œâ”€train
    â”‚  â””â”€val
    â””â”€labels
        â”œâ”€train
        â””â”€val
</code></pre> 
<p>è‡³æ­¤ï¼Œæ•°æ®é›†çš„å‡†å¤‡å·¥ä½œå®Œæ¯•ã€‚</p> 
<h5><a id="22__255"></a>2.2 é¢„è®­ç»ƒæƒé‡å‡†å¤‡</h5> 
<p>yolov7é¢„è®­ç»ƒæƒé‡å¯ä»¥é€šè¿‡<a href="https://github.com/WongKinYiu/yolov7/releases/tag/v0.1">here</a>ä¸‹è½½ï¼Œåšä¸»ä¹Ÿæä¾›ä¸‹è½½å¥½çš„ä¸¤ä¸ªé¢„è®­ç»ƒæƒé‡<a href="https://pan.baidu.com/s/1l4gekCq9_EHyfaRvlD8dgw" rel="nofollow">Baidu Drive[password:yolo]</a>ï¼Œ<strong>æ³¨æ„è¿™æ˜¯yolov7-v0.1ç‰ˆæœ¬çš„é¢„è®­ç»ƒæƒé‡ï¼Œè‹¥åç»­æœ‰ç‰ˆæœ¬æ›´æ–°ï¼Œè®°å¾—æ›¿æ¢</strong>ã€‚æœ¬æ¬¡è®­ç»ƒè‡ªå·±çš„æ•°æ®é›†ä½¿ç”¨çš„é¢„è®­ç»ƒæƒé‡ä¸º<code>yolov7-tiny.pt</code>ã€‚</p> 
<p><img src="https://images2.imgbox.com/37/ad/m8E4qgu6_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="3__261"></a>3 è®­ç»ƒæ¨¡å‹</h4> 
<p>å°†å‡†å¤‡å¥½çš„æ•°æ®é›†æ–‡ä»¶å¤¹å³VOCdevkitå¤åˆ¶åˆ°yolov7é¡¹ç›®ç¯å¢ƒä¸­ï¼Œå°†å‡†å¤‡å¥½çš„é¢„è®­ç»ƒæƒé‡<code>yolov7-tiny.pt</code>å¤åˆ¶åˆ°yolov7é¡¹ç›®ç¯å¢ƒä¸­ï¼Œå®Œæ•´çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚è®­ç»ƒç›®æ ‡æ£€æµ‹æ¨¡å‹ä¸»è¦ä¿®æ”¹cfgæ–‡ä»¶å¤¹ä¸‹çš„æ¨¡å‹é…ç½®æ–‡ä»¶<code>yolov7-tiny.ymal</code>ä»¥åŠdataæ–‡ä»¶å¤¹ä¸‹çš„æ•°æ®é…ç½®æ–‡ä»¶<code>coco.yaml</code></p> 
<p><img src="https://images2.imgbox.com/45/5d/Ee6lVy8a_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="31__267"></a>3.1 ä¿®æ”¹æ¨¡å‹é…ç½®æ–‡ä»¶</h5> 
<p>ç”±äºè¯¥é¡¹ç›®ä½¿ç”¨çš„æ˜¯<code>yolov7-tiny.pt</code>è¿™ä¸ªé¢„è®­ç»ƒæƒé‡ï¼Œæ‰€æœ‰éœ€è¦ä½¿ç”¨cfg/trainingç›®å½•ä¸‹çš„<code>yolov7-tiny.yaml</code>è¿™ä¸ªæ–‡ä»¶å¤¹(ç”±äºä¸åŒçš„é¢„è®­ç»ƒæƒé‡å¯¹åº”ä¸åŒçš„ç½‘ç»œç»“æ„ï¼Œæ‰€ä»¥ç”¨é”™é¢„è®­ç»ƒæƒé‡ä¼šæŠ¥é”™)ã€‚ä¸»è¦ä¿®æ”¹<code>yolov7-tiny.yaml</code>æ–‡ä»¶çš„ç¬¬äºŒè¡Œï¼Œå³éœ€è¦è¯†åˆ«çš„ç±»åˆ«æ•°ï¼Œç”±äºè¿™é‡Œè¯†åˆ«ä½©æˆ´å£ç½©å’Œä¸ä½©æˆ´å£ç½©ä¸¤ä¸ªç±»åˆ«ï¼Œæ•…ä¿®æ”¹ä¸º2å³å¯ï¼Œå¦‚ä¸‹æ‰€ç¤º</p> 
<p><img src="https://images2.imgbox.com/05/61/lAGYwbE7_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="32__274"></a>3.2 ä¿®æ”¹æ•°æ®é…ç½®æ–‡ä»¶</h5> 
<p>ä¿®æ”¹dataç›®å½•ä¸‹ç›¸åº”çš„yamlæ–‡ä»¶ï¼Œæ‰¾åˆ°ç›®å½•ä¸‹çš„<code>coco.yaml</code>æ–‡ä»¶ï¼Œä¸»è¦ä¿®æ”¹å¦‚ä¸‹</p> 
<ul><li><strong>1.æ³¨é‡Šç¬¬4è¡Œ</strong></li><li><strong>2.ä¿®æ”¹ç¬¬7è¡Œè®­ç»ƒé›†çš„è·¯å¾„</strong></li><li><strong>3.ä¿®æ”¹ç¬¬8è¡ŒéªŒè¯é›†çš„è·¯å¾„</strong></li><li><strong>4.æ³¨é‡Šç¬¬9è¡Œï¼Œå› ä¸ºæœªä½¿ç”¨åˆ°æµ‹è¯•é›†</strong></li><li><strong>5.ä¿®æ”¹ç¬¬12è¡Œéœ€è¦æ£€æµ‹çš„ç±»åˆ«æ•°ä¸ªæ•°</strong></li><li><strong>6.ä¿®æ”¹ç¬¬15è¡Œéœ€è¦æ£€æµ‹çš„ç±»åˆ«æ•°åç§°</strong></li></ul> 
<p><img src="https://images2.imgbox.com/0e/0e/AUN3qGpA_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="33__287"></a>3.3 è®­ç»ƒæ¨¡å‹</h5> 
<p>åœ¨ç»ˆç«¯æ‰§è¡Œå¦‚ä¸‹æŒ‡ä»¤å³å¯å¼€å§‹è®­ç»ƒï¼Œå‚è€ƒè‡ªyolov7çš„<a href="https://github.com/WongKinYiu/yolov7">README.md/Training</a></p> 
<pre><code class="prism language-shell">python train.py --workers <span class="token number">8</span> --device <span class="token number">0</span> --batch-size <span class="token number">32</span> --data data/coco.yaml --img <span class="token number">640</span> <span class="token number">640</span> --cfg cfg/training/yolov7-tiny.yaml --weights <span class="token string">'yolov7-tiny.pt'</span> --name yolov7 --hyp data/hyp.scratch.p5.yaml
</code></pre> 
<p>åšä¸»è®­ç»ƒçš„æ¨¡å‹ä¸ºp5 modelsä¸”ä½¿ç”¨çš„æ˜¯å•ä¸ªGPUè¿›è¡Œè®­ç»ƒï¼Œæ˜¾å¡ä¸º2080Tiï¼Œæ“ä½œç³»ç»Ÿä¸ºUbuntu20.04ï¼Œpytorchç‰ˆæœ¬ä¸º1.7ï¼Œè®­ç»ƒæ—¶é•¿å¤§æ¦‚1ä¸ªå°æ—¶ã€‚è®­ç»ƒå‚æ•°çš„æŒ‡å®šå’Œyolov5å·®ä¸å¤šï¼Œç®€è¦è§£é‡Šå¦‚ä¸‹ï¼š</p> 
<ul><li><strong>â€“workers æœ€å¤§å·¥ä½œæ ¸å¿ƒæ•°</strong></li><li><strong>â€“device æŒ‡å®šè®­ç»ƒçš„è®¾å¤‡ï¼Œcpuï¼Œ0(ä»£è¡¨ç¬¬ä¸€ä¸ªgpuè®¾å¤‡)</strong></li><li><strong>â€“batch-size æ¯æ¬¡è¾“å…¥åˆ°ç½‘ç»œçš„å›¾ç‰‡æ•°</strong></li><li><strong>â€“data æ•°æ®é…ç½®æ–‡ä»¶çš„è·¯å¾„</strong></li><li><strong>â€“img è¾“å…¥å›¾åƒçš„å°ºå¯¸</strong></li><li><strong>â€“cfg æ¨¡å‹é…ç½®æ–‡ä»¶è·¯å¾„</strong></li><li><strong>â€“weights é¢„è®­ç»ƒæƒé‡è·¯å¾„</strong></li><li><strong>â€“name è®­ç»ƒä¿å­˜çš„æ–‡ä»¶å¤¹åå­—</strong></li><li><strong>â€“hyp è¶…å‚æ•°æ–‡ä»¶è·¯å¾„</strong></li></ul> 
<p>è¿˜æœ‰å…¶å®ƒå‚æ•°åšä¸»å¹¶æœªè®¾ç½®ï¼Œ<strong>å¦‚â€“epochsè®­ç»ƒè½®æ•°</strong>ç­‰ã€‚<strong>å¤§å®¶ä¸€å®šè¦æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µ(å¦‚æ˜¾å¡ç®—åŠ›)æŒ‡å®šä¸åŒçš„å‚æ•°</strong>ï¼Œå¦‚æœä½ ä¹‹å‰è®­ç»ƒè¿‡yolov5ï¼Œé‚£æˆ‘ç›¸ä¿¡è¿™å¯¹ä½ æ¥è¯´åº”è¯¥æ˜¯å°caseğŸ˜„<br> è®­ç»ƒå®Œæˆåçš„æ¨¡å‹æƒé‡ä¿å­˜åœ¨run/train/weightsæ–‡ä»¶å¤¹ä¸‹ï¼Œå’Œyolov5ä¸åŒçš„æ˜¯å®ƒä¿å­˜äº†å¤šä¸ªæƒé‡æ–‡ä»¶ï¼Œä½¿ç”¨<code>best.pt</code>è¿›è¡Œåç»­æ¨¡å‹éƒ¨ç½²å³å¯ï¼Œè¿™é‡Œæä¾›åšä¸»è®­ç»ƒå¥½çš„æƒé‡æ–‡ä»¶ä¸‹è½½é“¾æ¥<a href="https://pan.baidu.com/s/1QWkXmvBNhdaXonm6pUtbLg" rel="nofollow">Baidu Drive[password:yolo]</a></p> 
<h5><a id="34__310"></a>3.4 æ¨ç†æµ‹è¯•</h5> 
<p>åˆ©ç”¨é¡¹ç›®ä¸­çš„<code>detect.py</code>æ–‡ä»¶è¿›è¡Œæµ‹è¯•ï¼Œå°†éœ€è¦æ¨ç†çš„å›¾ç‰‡æ”¾å…¥inference/imagesæ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡ŒæŒ‡ä»¤å¦‚ä¸‹</p> 
<pre><code class="prism language-shell">python detect.py --weights runs/train/yolov7/weights/best.pt --conf <span class="token number">0.25</span> --img-size <span class="token number">640</span> --source inference/images/mask.png
</code></pre> 
<p>æ¨ç†å®Œæˆååœ¨runä¸‹é¢ä¼šç”Ÿæˆä¸€ä¸ªdetectç›®å½•ï¼Œæ¨ç†çš„ç»“æœä¿å­˜åœ¨expç›®å½•ä¸‹ï¼Œæ¨ç†ç»“æœå¦‚ä¸‹æ‰€ç¤º</p> 
<p><img src="https://images2.imgbox.com/6f/c8/aNDC60nQ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/c6/83/GLrdCj4Y_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¹Ÿå¯è¿›è¡Œè§†é¢‘æˆ–è€…æ‘„åƒå¤´æ¨ç†ï¼Œæ‰§è¡ŒæŒ‡ä»¤å¦‚ä¸‹ï¼Œ0ä»£è¡¨æœ¬åœ°æ‘„åƒå¤´</p> 
<pre><code class="prism language-shell">python detect.py --weights runs/train/yolov7/weights/best.pt --conf <span class="token number">0.25</span> --img-size <span class="token number">640</span> --source <span class="token number">0</span>
</code></pre> 
<p>è‡³æ­¤ï¼Œyolov7æ¨¡å‹è®­ç»ƒå·²ç»å®Œæ¯•ï¼Œä¸‹é¢å¼€å§‹jetson nanoä¸Šçš„æ¨¡å‹éƒ¨ç½²å·¥ä½œã€‚</p> 
<h3><a id="YOLOv7_333"></a>äºŒã€YOLOv7æ¨¡å‹éƒ¨ç½²</h3> 
<blockquote> 
 <p>Jetson nanoä¸Šyolov7æ¨¡å‹éƒ¨ç½²æµç¨‹å’Œyolov5åŸºæœ¬ä¸€è‡´ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰å‘çš„<a href="https://blog.csdn.net/qq_40672115/category_11970990.html?spm=1001.2014.3001.5482">JetsonåµŒå…¥å¼ç³»åˆ—æ¨¡å‹éƒ¨ç½²</a>æ–‡ç« ï¼Œåœ¨è¿™é‡Œå†é‡æ–°copyä¸€ä¸‹å§ï¼Œéƒ¨ç½²ä½¿ç”¨åˆ°çš„Githubä»“åº“æ˜¯<a href="https://github.com/shouxieai/tensorRT_Pro">tensorRT_Pro</a>ã€‚è¯¥ä»“åº“é€šè¿‡<code>TensorRT</code>çš„<code>ONNX parser</code>è§£æONNXæ–‡ä»¶æ¥å®Œæˆæ¨¡å‹çš„æ„å»ºå·¥ä½œã€‚å¯¹æ¨¡å‹éƒ¨ç½²æœ‰ç–‘é—®çš„å¯ä»¥å‚è€ƒ<a href="https://blog.csdn.net/qq_40672115/article/details/126386680?spm=1001.2014.3001.5502">JetsonåµŒå…¥å¼ç³»åˆ—æ¨¡å‹éƒ¨ç½²-1</a>ï¼Œæƒ³äº†è§£é€šè¿‡<code>TensorRT</code>çš„<code>Layer API</code>ä¸€å±‚å±‚å®Œæˆæ¨¡å‹çš„æ­å»ºå·¥ä½œå¯å‚è€ƒ<a href="https://blog.csdn.net/qq_40672115/article/details/126368779?spm=1001.2014.3001.5502">JetsonåµŒå…¥å¼ç³»åˆ—æ¨¡å‹éƒ¨ç½²-2</a>ã€‚æœ¬æ–‡ä¸»è¦æ˜¯é’ˆå¯¹äº<a href="https://github.com/shouxieai/tensorRT_Pro">tensorRT_Pro</a>é¡¹ç›®ä¸­çš„yolov7å®ŒæˆåµŒå…¥å¼æ¨¡å‹éƒ¨ç½²ï¼Œæœ¬æ–‡å‚è€ƒè‡ª<a href="https://github.com/shouxieai/tensorRT_Pro/blob/main/tutorial/README.zh-cn.md">tensorRT_Proçš„README.md</a>ï¼Œå…·ä½“æ“ä½œæµç¨‹ä½œè€…æè¿°éå¸¸è¯¦ç»†ï¼Œè¿™é‡Œå†ç®€å•è¿‡ä¸€éï¼Œæœ¬æ¬¡è®­ç»ƒçš„æ¨¡å‹ä½¿ç”¨yolov7-tinyï¼Œç±»åˆ«æ•°ä¸º2ï¼Œä¸ºå£ç½©è¯†åˆ«ğŸ˜·ã€‚</p> 
</blockquote> 
<h4><a id="1__337"></a>1. æºç ä¸‹è½½</h4> 
<p>ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤</p> 
<pre><code class="prism language-shell">$ <span class="token function">git</span> clone https://github.com/shouxieai/tensorRT_Pro.git
</code></pre> 
<p>æ–‡ä»¶è¾ƒå¤§ä¸‹è½½å¯èƒ½æ¯”è¾ƒæ…¢ï¼Œç»™å‡ºä¸‹è½½å¥½çš„æºç é“¾æ¥<a href="https://pan.baidu.com/s/1DuJG99J3lY21Hfj_Qeb4oA" rel="nofollow">Baidu Drive[password:yolo]</a>ï¼Œ<strong>è‹¥æœ‰æ”¹åŠ¨è¯·å‚è€ƒæœ€æ–°</strong></p> 
<p>åˆ é™¤ä¸å¿…è¦çš„æ–‡ä»¶ï¼Œç»™å‡ºç®€åŒ–åçš„æºç é“¾æ¥<a href="https://pan.baidu.com/s/18zralGjexrVqOI-b6cD1xg" rel="nofollow">Baidu Drive[password:yolo]</a>ï¼Œ<strong>è‹¥æœ‰æ”¹åŠ¨è¯·å‚è€ƒæœ€æ–°</strong></p> 
<h4><a id="2__349"></a>2. ç¯å¢ƒé…ç½®</h4> 
<blockquote> 
 <p>éœ€è¦ä½¿ç”¨çš„è½¯ä»¶ç¯å¢ƒæœ‰<code>TensorRTã€CUDAã€CUDNNã€OpenCVã€Protobuf</code>ã€‚å‰å››ä¸ªè½¯ä»¶ç¯å¢ƒåœ¨JetPacké•œåƒä¸­å·²ç»å®‰è£…å®Œæˆï¼Œæ•…åªéœ€è¦é…ç½®protobufå³å¯ã€‚åšä¸»ä½¿ç”¨çš„jetpackç‰ˆæœ¬ä¸ºJetPack4.6.1(PS:å…³äºjetson nanoåˆ·æœºå°±ä¸å†èµ˜è¿°äº†ï¼Œéœ€è¦å„ä½çœ‹å®˜è‡ªè¡Œé…ç½®å¥½ç›¸å…³ç¯å¢ƒğŸ˜„ï¼Œå¤–ç½‘è®¿é—®è¾ƒæ…¢ï¼Œè¿™é‡Œæä¾›Jetson nanoçš„<a href="https://pan.baidu.com/s/1RW8Z-EQK--NtPgIe6mmKIQ?_at_=1660636990470#list/path=%2F" rel="nofollow">JetPacké•œåƒä¸‹è½½é“¾æ¥Baidu Drive[password:nano]ã€æ›´æ–°å®Œæ¯•!!!ã€‘</a>(<strong>PS:æä¾›4.6å’Œ4.6.1ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæ³¨æ„4GBå’Œ2GBçš„åŒºåˆ«ï¼Œä¸è¦åˆ·é”™äº†</strong>)ï¼Œå…³äºJetson Nano 2GBå’Œ4GBçš„åŒºåˆ«å¯å‚è€ƒé“¾æ¥<a href="https://zhuanlan.zhihu.com/p/339225116" rel="nofollow">Jetson NANOæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é€‰ï¼Ÿ</a>ã€‚(åæ§½ä¸‹è¿™ç©æ„ä¸Šä¼ å¿’æ…¢äº†ï¼Œè¶…çº§ä¼šå‘˜ä¸é¡¶ç”¨å‘€ï¼Œç»ˆäºä¸Šä¼ å®Œäº†ï¼ŒæŠ˜ç£¨!!!)</p> 
</blockquote> 
<h5><a id="21_Jtopoption_353"></a>2.1 Jtop(option)</h5> 
<p>å¯ä½¿ç”¨å¦‚ä¸‹æŒ‡ä»¤æŸ¥çœ‹è‡ªå·±çš„JetPackç‰ˆæœ¬ç®€å•ä¿¡æ¯</p> 
<pre><code class="prism language-shell">$ <span class="token function">cat</span> /etc/nv_tegra_release
</code></pre> 
<p>ä½¿ç”¨Jtopå¯æŸ¥çœ‹<strong>JetPackè¯¦ç»†ä¿¡æ¯</strong>ã€‚Jtopæ˜¯ä¸€ä¸ªç”±ç¬¬ä¸‰æ–¹å¼€å‘ï¼Œç”¨äºæ˜¾ç¤ºJetsonå¼€å‘æ¿ä¿¡æ¯çš„åŒ…ï¼Œå¯ä»¥æŸ¥è¯¢å½“å‰æ¿å­CPUï¼ŒGPUä½¿ç”¨ç‡ï¼Œå®æ—¶åŠŸè€—ï¼Œ<strong>Jetpackè½¯ä»¶åŒ…ä¿¡æ¯</strong>ç­‰ï¼Œå‚è€ƒè‡ª<a href="https://blog.csdn.net/xgd2016/article/details/105501745">Jetson nanoå®‰è£…jtop</a>ï¼Œ<a href="https://blog.csdn.net/qq_45772756/article/details/115433921">Jetson nanoå®‰è£…pipå¹¶æ¢æº</a></p> 
<h6><a id="211_pip_363"></a>2.1.1 é…ç½®pip</h6> 
<pre><code class="prism language-shell">$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> python-pip python3-pip
$ pip3 <span class="token function">install</span> --upgrade pip
$ pip <span class="token function">install</span> --upgrade pip
</code></pre> 
<p>pipæ¢æºï¼ŒæŒ‡ä»¤å¦‚ä¸‹</p> 
<pre><code class="prism language-shell">$ <span class="token function">sudo</span> <span class="token function">mkdir</span> .pip <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> .pip
$ <span class="token function">sudo</span> <span class="token function">touch</span> pip.conf
$ <span class="token function">sudo</span> <span class="token function">vim</span> pip.conf
</code></pre> 
<p>æ·»åŠ å¦‚ä¸‹å†…å®¹</p> 
<pre><code class="prism language-shell"><span class="token punctuation">[</span>global<span class="token punctuation">]</span>
<span class="token function">timeout</span> <span class="token operator">=</span> <span class="token number">6000</span>
index-url <span class="token operator">=</span> https://pypi.tuna.tsinghua.edu.cn/simple
trusted-host <span class="token operator">=</span> pypi.tuna.tsinghua.edu.cn
</code></pre> 
<h6><a id="212_jtop_388"></a>2.1.2 å®‰è£…jtop</h6> 
<pre><code class="prism language-shell">$ <span class="token function">sudo</span> pip3 <span class="token function">install</span> -U jetson-stats
</code></pre> 
<h6><a id="213_jtop_394"></a>2.1.3 ä½¿ç”¨jtop</h6> 
<pre><code class="prism language-shell">$ <span class="token function">sudo</span> jtop
The jetson_stats.service is not active. Please run:
<span class="token function">sudo</span> systemctl restart jetson_stats.service
</code></pre> 
<p>éœ€è¦å¯åŠ¨ç›¸å…³æœåŠ¡ï¼ŒæŒ‡ä»¤å¦‚ä¸‹</p> 
<pre><code class="prism language-jtop">$ sudo systemctl restart jetson_stats.service
$ jtop
</code></pre> 
<p>åšä¸»Jtopæ˜¾ç¤ºçš„jetson nanoè½¯ä»¶åŒ…ä¿¡æ¯é¡µé¢å¦‚ä¸‹</p> 
<p><img src="https://images2.imgbox.com/16/0f/0HSWXUdR_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="22_Protobuf_414"></a>2.2 ç¼–è¯‘Protobuf</h5> 
<p><a href="https://github.com/shouxieai/tensorRT_Pro">tensorRT_Pro</a>éœ€è¦<code>Protobuf</code>ç”¨äº<strong>ONNXè§£æå™¨</strong>ï¼Œéœ€è¦ä¸‹è½½å¹¶ç¼–è¯‘protobufæºç ã€‚è¿™é‡Œä½¿ç”¨çš„<strong>protobufç‰ˆæœ¬ä¸º3.11.4</strong>ï¼Œè‹¥éœ€è¦ä¿®æ”¹ä¸ºå…¶ä»–ç‰ˆæœ¬ï¼Œè¯·å‚ç…§<a href="https://github.com/shouxieai/tensorRT_Pro/blob/main/tutorial/README.zh-cn.md">README/ç¯å¢ƒé…ç½®/é€‚é…Protobufç‰ˆæœ¬</a>ã€‚å…³äºprotobufçš„ç›¸å…³ä»‹ç»è¯·å‚è€ƒ<a href="https://blog.csdn.net/qq_40672115/article/details/126386680?spm=1001.2014.3001.5502">protubufç®€ä»‹</a>ï¼Œç»™å‡ºprotobufçš„å®‰è£…åŒ…ä¸‹è½½é“¾æ¥<a href="https://pan.baidu.com/s/1f3UCcJeOoUaEFSCYUXcL1Q" rel="nofollow">Baidu Drive[password:yolo]</a>ã€‚å‚è€ƒè‡ª<a href="https://blog.csdn.net/xp178171640/article/details/122597777?spm=1001.2014.3001.5502">Linuxä¸‹ç¼–è¯‘protobuf</a>ï¼Œ<a href="https://blog.csdn.net/weixin_32829077/article/details/116832775">Linuxä¸‹æ·»åŠ protobufç¯å¢ƒå˜é‡</a></p> 
<h6><a id="221__418"></a>2.2.1 è§£å‹</h6> 
<pre><code class="prism language-shell">$ <span class="token function">mkdir</span> protobuf-3.11.4 <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> protobuf-3.11.4    // åˆ›å»ºprotobufç¼–è¯‘çš„æ–‡ä»¶å¤¹
$ uzip protobuf-3.11.4.zip    // è§£å‹protobufå‹ç¼©åŒ…
</code></pre> 
<h6><a id="222__425"></a>2.2.2 ç¼–è¯‘</h6> 
<pre><code class="prism language-shell">$ <span class="token builtin class-name">cd</span> protobuf-3.11.4/cmake
$ cmake <span class="token builtin class-name">.</span> -Dprotobuf_BUILD_TESTS<span class="token operator">=</span>OFF
$ cmake --build <span class="token builtin class-name">.</span>
</code></pre> 
<h6><a id="223__433"></a>2.2.3 å®‰è£…</h6> 
<pre><code class="prism language-shell">$ <span class="token function">mkdir</span> protobuf  // åˆ›å»ºprotobufå®‰è£…çš„æ–‡ä»¶å¤¹
$ <span class="token function">make</span> <span class="token function">install</span> <span class="token assign-left variable">DESTDIR</span><span class="token operator">=</span>/home/nvidia/protobuf // æŒ‡å®šprotobufå®‰è£…çš„è·¯å¾„
</code></pre> 
<p><strong>æ³¨ï¼š<strong>ç¼–è¯‘å®Œæˆä¹‹åprotobufæ–‡ä»¶å¤¹ä¸‹ä»…ä»…åªæœ‰</strong>user</strong>ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œéœ€è¦å°†ç¼–è¯‘å¥½çš„<code>protobuf/user/local</code>ä¸‹çš„<strong>binã€includeã€lib</strong>æ–‡ä»¶å¤¹å¤åˆ¶åˆ°<code>protobuf</code>å½“å‰æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–¹ä¾¿åç»­<a href="https://github.com/shouxieai/tensorRT_Pro">tensorRT_Pro</a>é¡¹ç›®CMakeLists.txtçš„æŒ‡å®šã€‚</p> 
<h6><a id="224_option_442"></a>2.2.4 ç¯å¢ƒé…ç½®(option)</h6> 
<ul><li> <p>é…ç½®ç¯å¢ƒå˜é‡</p> <pre><code class="prism language-shell">$ <span class="token function">sudo</span> <span class="token function">vim</span> /etc/profile
</code></pre> <p>æ·»åŠ å¦‚ä¸‹å†…å®¹ä¿å­˜å¹¶é€€å‡ºï¼Œ<strong>æ³¨æ„è·¯å¾„ä¿®æ”¹ä¸ºè‡ªå·±çš„è·¯å¾„</strong></p> <pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/home/nvidia/protobuf/bin
<span class="token builtin class-name">export</span> <span class="token assign-left variable">PKG_CONFIG_PATH</span><span class="token operator">=</span>/home/nvidia/protobuf/lib/pkgconfig/
</code></pre> <p>sourceç”Ÿæ•ˆ</p> <pre><code class="prism language-shell">$ <span class="token builtin class-name">source</span> /etc/profile
</code></pre> </li><li> <p>é…ç½®åŠ¨æ€è·¯å¾„</p> <pre><code class="prism language-shell">$ <span class="token function">sudo</span> <span class="token function">vim</span> /etc/ld.so.conf
</code></pre> <p><strong>è¿½åŠ </strong>å¦‚ä¸‹å†…å®¹ï¼Œ<strong>æ³¨æ„è·¯å¾„ä¿®æ”¹ä¸ºè‡ªå·±çš„è·¯å¾„</strong></p> <pre><code class="prism language-shell">/home/nvidia/protobuf/lib
</code></pre> </li><li> <p>éªŒè¯</p> <p><code>protoc --version</code>è¾“å‡ºå¯¹åº”ç‰ˆæœ¬ä¿¡æ¯è¯´æ˜å®‰è£…æˆåŠŸ</p> </li></ul> 
<h5><a id="23_CMakeListstxt_479"></a>2.3 é…ç½®CMakeLists.txt</h5> 
<p>ä¸»è¦ä¿®æ”¹ä¸‰å¤„</p> 
<ul><li> 
  <ol><li><strong>ä¿®æ”¹ç¬¬10è¡Œï¼Œé€‰æ‹©ä¸æ”¯æŒpython(ä¹Ÿå¯é€‰æ‹©æ”¯æŒ)</strong></li></ol> <pre><code class="prism language-cpp"><span class="token function">set</span><span class="token punctuation">(</span>HAS_PYTHON OFF<span class="token punctuation">)</span>
</code></pre> </li><li> 
  <ol start="2"><li><strong>ä¿®æ”¹ç¬¬20è¡Œï¼Œä¿®æ”¹CUDAè·¯å¾„</strong></li></ol> <pre><code class="prism language-cpp"><span class="token function">set</span><span class="token punctuation">(</span>CUDA_TOOLKIT_ROOT_DIR  <span class="token string">"/usr/local/cuda-10.2"</span><span class="token punctuation">)</span>
</code></pre> </li><li> 
  <ol start="3"><li><strong>ä¿®æ”¹ç¬¬33è¡Œï¼Œä¿®æ”¹è‡ªç¼–è¯‘çš„protobufçš„è·¯å¾„</strong></li></ol> </li></ul> 
<p><img src="https://images2.imgbox.com/68/ed/fUlK7EBC_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h4><a id="3_ONNX_500"></a>3. ONNXå¯¼å‡º</h4> 
<ul><li>è®­ç»ƒçš„æ¨¡å‹ä½¿ç”¨yolov7-tinyï¼Œtorchç‰ˆæœ¬1.7</li><li>å‚è€ƒè‡ª<a href="https://github.com/shouxieai/tensorRT_Pro/blob/main/tutorial/README.zh-cn.md">tensorRT_Pro/README/å„é¡¹ä»»åŠ¡æ”¯æŒ/YoloV7æ”¯æŒ</a>ï¼Œå¯¼å‡ºç»†èŠ‚çš„è¯´æ˜å·²ç»éå¸¸è¯¦ç»†äº†ï¼Œè¿™é‡Œç®€å•è¿‡ä¸€é</li></ul> 
<h5><a id="31__505"></a>3.1 æºç ä¸‹è½½</h5> 
<pre><code class="prism language-shell">$ <span class="token function">git</span> clone https://github.com/WongKinYiu/yolov7.git
</code></pre> 
<p>å¹¶å°†è®­ç»ƒå¥½çš„æƒé‡æ–‡ä»¶å¤åˆ¶åˆ°yolov7æ–‡ä»¶å¤¹ä¸­ï¼Œç»™å‡ºæƒé‡ä¸‹è½½é“¾æ¥<a href="https://pan.baidu.com/s/1QWkXmvBNhdaXonm6pUtbLg" rel="nofollow">Baidu Drive[password:yolo]</a></p> 
<h5><a id="32__513"></a>3.2 ä¿®æ”¹ä»£ç </h5> 
<p>ä¸»è¦ä¿®æ”¹ä»¥ä¸‹ä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹</p> 
<ul><li><strong>1. yolov7/models/yolo.py</strong></li><li><strong>2. yolov7/export.py</strong></li></ul> 
<p><strong>ç‰¹åˆ«æ³¨æ„!!!ï¼Œç”±äºä½¿ç”¨çš„æ¨¡å‹æ˜¯yolov7-tiny.ptï¼Œè®­ç»ƒå‡ºæ¥çš„æ£€æµ‹å¤´ä¸ºIDetectè€Œééƒ¨ç½²æ—¶çš„Detectï¼Œå¯ä»¥åˆ©ç”¨<a href="https://netron.app/" rel="nofollow">Netronå·¥å…·</a>æŸ¥çœ‹å®˜æ–¹yolov7-tiny.ptå’Œbest.ptäºŒè€…é—´åŒºåˆ«ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</strong></p> 
<p><img src="https://images2.imgbox.com/9c/78/Tr1b5XwZ_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<blockquote> 
 <p>ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹è¯´æ˜</p> 
 <p>1.å¯ä»¥æŸ¥çœ‹yolov7é¡¹ç›®ä¸­çš„cfgæ–‡ä»¶å¤¹ä¸­çš„trainingå’Œdeployæ–‡ä»¶å¤¹ä¸‹çš„<code>yolov7-tiny.yaml</code>æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°è®­ç»ƒå’Œéƒ¨ç½²æ—¶äºŒè€…çš„æ£€æµ‹å¤´ä¸ä¸€è‡´ï¼Œè®­ç»ƒæ—¶ä¸ºIDetectæ£€æµ‹å¤´ï¼Œéƒ¨ç½²æ—¶ä¸ºDetectæ£€æµ‹å¤´ï¼Œè¿™ä¹Ÿæ˜¯export.pyå¯¼å‡ºonnxæ–‡ä»¶æ—¶éœ€è¦åŠ ä¸Š<code>--grid</code>å‚æ•°çš„åŸå› </p> 
 <p>2.<code>yolov7-tiny.pt</code>è®­ç»ƒå‡ºçš„æ£€æµ‹å¤´ä¸ºIDetectï¼Œæ•…ä»£ç ä¿®æ”¹çš„åœ°æ–¹ä¸<a href="https://github.com/shouxieai/tensorRT_Pro">tensorRT_Pro</a>é¡¹ç›®ä¿®æ”¹åœ°æ–¹æœ‰å‡ºå…¥ï¼Œä½†å†…å®¹å¤§ä½“ä¸€è‡´</p> 
 <p>3.<code>yolo.py</code>æ–‡ä»¶ä¸­Modelç±»å‰å‘ä¼ æ’­è¿‡ç¨‹ä¸­(706è¡Œ)ï¼Œæ‰§è¡Œçš„å‰å‘ä¼ æ’­ä¸ºm.fuseforwardè€Œém.forward</p> 
 <p>4.<strong>æœ€ç»ˆå®šä½ä¿®æ”¹ä»£ç çš„åœ°æ–¹åœ¨IDetectç±»ä¸­çš„fuseforwardå‡½æ•°ä¸­å³<code>yolo.py</code>æ–‡ä»¶ç¬¬140è¡Œ</strong></p> 
 <p>å…·ä½“ä¿®æ”¹å¯å‚è€ƒä¸‹é¢ã€‚<strong>è‹¥æœ‰æ›´æ–°è¯·å‚è€ƒæœ€æ–°!!!</strong></p> 
</blockquote> 
<pre><code class="prism language-python"><span class="token comment"># åœ¨yolov7/models/yolo.pyçš„ç¬¬146è¡Œ</span>
<span class="token comment"># bs, _, ny, nx = x[i].shape  # x(bs,255,20,20) to x(bs,3,20,20,85)</span>
<span class="token comment"># x[i] = x[i].view(bs, self.na, self.no, ny, nx).permute(0, 1, 3, 4, 2).contiguous()</span>
<span class="token comment"># ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼Œä¿è¯viewéƒ¨åˆ†ä¸ä¼šæ“ä½œbatch sizeï¼Œå¯¹äºbatchç»´åº¦ä¸€å®šæ˜¯-1ï¼š</span>

bs<span class="token punctuation">,</span> _<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>shape<span class="token punctuation">)</span>  <span class="token comment"># x(bs,255,20,20) to x(bs,3,20,20,85)</span>
bs <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>
x<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span>bs<span class="token punctuation">,</span> self<span class="token punctuation">.</span>na<span class="token punctuation">,</span> self<span class="token punctuation">.</span>no<span class="token punctuation">,</span> ny<span class="token punctuation">,</span> nx<span class="token punctuation">)</span><span class="token punctuation">.</span>permute<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>contiguous<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># åœ¨yolov7/models/yolo.pyçš„ç¬¬153è¡Œ</span>
<span class="token comment"># y = x[i].sigmoid()</span>
<span class="token comment"># if not torch.onnx.is_in_onnx_export():</span>
<span class="token comment"># 	 y[..., 0:2] = (y[..., 0:2] * 2. - 0.5 + self.grid[i]) * self.stride[i]  # xy</span>
<span class="token comment"># 	 y[..., 2:4] = (y[..., 2:4] * 2) ** 2 * self.anchor_grid[i]  # wh</span>
<span class="token comment"># else:</span>
<span class="token comment">#    xy, wh, conf = y.split((2, 2, self.nc + 1), 4)  # y.tensor_split((2, 4, 5), 4)  # torch 1.8.0</span>
<span class="token comment">#    xy = xy * (2. * self.stride[i]) + (self.stride[i] * (self.grid[i] - 0.5))  # new xy</span>
<span class="token comment">#    wh = wh ** 2 * (4 * self.anchor_grid[i].data)  # new wh</span>
<span class="token comment">#    y = torch.cat((xy, wh, conf), 4)</span>
<span class="token comment"># z.append(y.view(bs, -1, self.no))</span>
<span class="token comment"># ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼Œç›®çš„å»æ‰ScatterNDã€å»æ‰Gatherã€Shapeç­‰èŠ‚ç‚¹ï¼š</span>
y <span class="token operator">=</span> x<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>sigmoid<span class="token punctuation">(</span><span class="token punctuation">)</span>
xy <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2.</span> <span class="token operator">-</span> <span class="token number">0.5</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>stride<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token comment"># xy</span>
wh <span class="token operator">=</span> <span class="token punctuation">(</span>y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">*</span> self<span class="token punctuation">.</span>anchor_grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>view<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># wh</span>
classif <span class="token operator">=</span> y<span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
y <span class="token operator">=</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span><span class="token punctuation">[</span>xy<span class="token punctuation">,</span> wh<span class="token punctuation">,</span> classif<span class="token punctuation">]</span><span class="token punctuation">,</span> dim<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
z<span class="token punctuation">.</span>append<span class="token punctuation">(</span>y<span class="token punctuation">.</span>view<span class="token punctuation">(</span>bs<span class="token punctuation">,</span> self<span class="token punctuation">.</span>na <span class="token operator">*</span> ny <span class="token operator">*</span> nx<span class="token punctuation">,</span> self<span class="token punctuation">.</span>no<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># åœ¨yolov7/models/yolo.pyçš„ç¬¬176è¡Œ</span>
<span class="token comment"># return out</span>
<span class="token comment"># ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼Œå»æ‰å¤šä½™çš„è¾“å‡ºéƒ¨åˆ†ï¼š</span>
<span class="token keyword">return</span> x <span class="token keyword">if</span> self<span class="token punctuation">.</span>training <span class="token keyword">else</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>z<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>


<span class="token comment"># åœ¨yolov7/export.pyç¬¬126è¡Œ</span>
<span class="token comment"># dynamic_axes = {'images': {0: 'batch', 2: 'height', 3: 'width'},  # size(1,3,640,640)</span>
<span class="token comment">#  'output': {0: 'batch', 2: 'y', 3: 'x'}}</span>
<span class="token comment"># ä¿®æ”¹ä¸ºå¦‚ä¸‹ä»£ç ï¼Œä½¿å¾—åŠ¨æ€ç»´åº¦åªå‡ºç°åœ¨batchä¸Šï¼š</span>
dynamic_axes<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token string">'images'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'batch'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment"># size(1,3,640,640)</span>
              <span class="token string">'output'</span><span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'batch'</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre> 
<h5><a id="33_ONNX_580"></a>3.3 å¯¼å‡ºONNXæ¨¡å‹</h5> 
<p>ONNXæ¨¡å‹å¯¼å‡ºæŒ‡ä»¤å¦‚ä¸‹</p> 
<pre><code class="prism language-shell">$ <span class="token builtin class-name">cd</span> yolov7
$ python export.py --dynamic --grid --weights<span class="token operator">=</span>best.pt
</code></pre> 
<p>å¯¼å‡ºçš„ONNXæ¨¡å‹å¯ä½¿ç”¨<a href="https://netron.app/" rel="nofollow">Netronå¯è§†åŒ–å·¥å…·</a>æŸ¥çœ‹ï¼Œç»™å‡ºONNXæ–‡ä»¶ä¸‹è½½é“¾æ¥<a href="https://pan.baidu.com/s/1QWkXmvBNhdaXonm6pUtbLg" rel="nofollow">Baidu Drive[password:yolo]</a>ã€‚<br> ä¸‹å›¾å¯¹æ¯”å±•ç¤ºäº†<strong>åŸå§‹onnxè¾“å‡º</strong>(ä¸åŠ ä¿®æ”¹ç›´æ¥å¯¼å‡º)å’Œ<strong>ç®€åŒ–åonnxè¾“å‡º</strong>(æŒ‰ç…§ä»¥ä¸Šè¦æ±‚ä¿®æ”¹åå¯¼å‡º)çš„éƒ¨åˆ†å·®åˆ«(<strong>ç¬¬ä¸€å¼ æœªä¿®æ”¹ç›´æ¥å¯¼å‡ºï¼Œç¬¬äºŒå¼ ä¿®æ”¹åå¯¼å‡º</strong>)ã€‚ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ç‚¹ï¼š</p> 
<ul><li>ä¿®æ”¹åçš„onnxå¯¼å‡ºæ–‡ä»¶æ›´åŠ ç®€æ´</li><li>ä¸å¿…è¦çš„èŠ‚ç‚¹å¦‚Shapeã€Gatherã€Unsqueezeç­‰å»é™¤</li><li>batchç»´åº¦æŒ‡å®šä¸ºåŠ¨æ€ï¼Œå…¶å®ƒç»´åº¦ä¸æŒ‡å®š</li></ul> 
<p><img src="https://images2.imgbox.com/6a/f6/eJ7akssW_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/3d/c2/5r4sypdP_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="34_ONNX_601"></a>3.4 æ‹“å±•-æ­£ç¡®å¯¼å‡ºONNXæ–‡ä»¶</h5> 
<p>å¦‚ä½•æ­£ç¡®å¯¼å‡ºONNXæ–‡ä»¶ï¼Ÿä¸»è¦åŒ…å«ä»¥ä¸‹å‡ æ¡ï¼š</p> 
<blockquote> 
 <ol><li> <p>å¯¹äºä»»ä½•ç”¨åˆ°shapeã€sizeè¿”å›å€¼çš„å‚æ•°æ—¶ï¼Œä¾‹å¦‚ï¼š<code>tensor.view(tensor.size(0),-1)</code>è¿™ç±»æ“ä½œï¼Œé¿å…ç›´æ¥ä½¿ç”¨tensor.sizeçš„è¿”å›å€¼ï¼Œè€Œæ˜¯åŠ ä¸Šintè½¬æ¢å¦‚<code>tensor.view(int(tensor(0)),-1)</code>ï¼Œæ–­å¼€è·Ÿè¸ª</p> </li><li> <p>å¯¹äºnn.Unsampleæˆ–nn.functional.interpolateå‡½æ•°ï¼Œä½¿ç”¨scale_factoræŒ‡å®šå€ç‡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨sizeå‚æ•°æŒ‡å®šå¤§å°</p> </li><li> <p>å¯¹äºreshapeã€viewæ“ä½œæ—¶ï¼Œ-1çš„æŒ‡å®šéœ€æ”¾åˆ°batchç»´åº¦ã€‚å…¶ä»–ç»´åº¦è®¡ç®—å‡ºæ¥å³å¯ã€‚batchç»´åº¦ç¦æ­¢æŒ‡å®šä¸ºå¤§äº-1çš„æ˜ç¡®æ•°å­—</p> </li><li> <p>torch.onnx.exportæŒ‡å®šdynamic_axeså‚æ•°ï¼Œå¹¶ä¸”åªæŒ‡å®šbatchç»´åº¦ï¼Œç¦æ­¢å…¶ä»–åŠ¨æ€</p> </li><li> <p>ä½¿ç”¨opset_version=11ï¼Œä¸è¦ä½äº11</p> </li><li> <p>é¿å…ä½¿ç”¨inplaceæ“ä½œï¼Œå¦‚<code>y[...,0:2] = y[..., 0:2] * 2 - 0.5</code></p> </li><li> <p>å°½é‡å°‘çš„å‡ºç°5ä¸ªç»´åº¦ï¼Œä¾‹å¦‚ShuffleNet Moduleï¼Œå¯ç”¨è€ƒè™‘åˆå¹¶whé¿å…å‡ºç°5ç»´</p> </li><li> <p>å°½é‡å°†åå¤„ç†éƒ¨åˆ†åœ¨onnxæ¨¡å‹ä¸­å®ç°ï¼Œé™ä½åå¤„ç†å¤æ‚åº¦</p> </li></ol> 
</blockquote> 
<p><strong>æ³¨</strong>ï¼šå‚è€ƒè‡ª<a href="https://www.bilibili.com/video/BV1Xw411f7FW?p=7&amp;vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">æ‰‹å†™AIçš„è¯¦è§£TensorRTé«˜æ€§èƒ½éƒ¨ç½²è§†é¢‘</a>ï¼Œè¿™äº›åšæ³•çš„å¿…è¦æ€§ä½“ç°åœ¨ï¼Œç®€åŒ–è¿‡ç¨‹çš„å¤æ‚åº¦ï¼Œå»æ‰Gatherã€Shapeç±»èŠ‚ç‚¹ï¼Œå¾ˆå¤šæ—¶å€™ä¸è¿™ä¹ˆæ”¹çœ‹ä¼¼ä¹Ÿå¯ä»¥æˆåŠŸï¼Œä½†æ˜¯éœ€æ±‚å¤æ‚åï¼Œä¾æ—§å­˜åœ¨å„ç±»é—®é¢˜ã€‚æŒ‰ç…§ä¸Šè¿°è¦æ±‚ä¿®æ”¹åï¼ŒåŸºæœ¬æ€»èƒ½æˆï¼Œå°±ä¸éœ€è¦ä½¿ç”¨onnx-simpliferäº†ã€‚å…·ä½“æ›´å¤šç»†èŠ‚æè¿°è¯·è§‚çœ‹<a href="https://www.bilibili.com/video/BV1Xw411f7FW?p=7&amp;vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">è§†é¢‘</a>ã€‚</p> 
<h4><a id="4__617"></a>4. è¿è¡Œ</h4> 
<h5><a id="41__619"></a>4.1 æºç ä¿®æ”¹</h5> 
<blockquote> 
 <p>yoloæ¨¡å‹çš„æ¨ç†ä»£ç ä¸»è¦åœ¨<code>src/application/app_yolo.cpp</code>æ–‡ä»¶ä¸­ï¼Œéœ€è¦æ¨ç†çš„å›¾ç‰‡æ”¾åœ¨<code>workspace/inference</code>æ–‡ä»¶å¤¹ä¸­ï¼Œå°†ä¸Šè¿°ä¿®æ”¹åå¯¼å‡ºçš„ONNXæ–‡ä»¶æ”¾åœ¨<code>workspace/</code>æ–‡ä»¶å¤¹ä¸‹ã€‚æºç ä¿®æ”¹è¾ƒç®€å•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p> 
</blockquote> 
<ul><li><strong>1. app_yolo.cpp 177è¡Œ â€œyolov7"æ”¹æˆ"bestâ€ï¼Œæ„å»ºbest.ptæ¨¡å‹</strong></li><li><strong>2. app_yolo.cpp 100è¡Œ cocolabelsä¿®æ”¹ä¸ºmylabels</strong></li><li><strong>3. app_yolo.cpp 25è¡Œ æ–°å¢mylabelsæ•°ç»„ï¼Œæ·»åŠ è‡ªè®­ç»ƒæ¨¡å‹çš„ç±»åˆ«åç§°</strong></li></ul> 
<p>å…·ä½“ä¿®æ”¹å¦‚ä¸‹</p> 
<pre><code class="prism language-cpp"><span class="token function">test</span><span class="token punctuation">(</span>Yolo<span class="token double-colon punctuation">::</span>Type<span class="token double-colon punctuation">::</span>V7<span class="token punctuation">,</span> TRT<span class="token double-colon punctuation">::</span>Mode<span class="token double-colon punctuation">::</span>FP32<span class="token punctuation">,</span> <span class="token string">"best"</span><span class="token punctuation">)</span>				<span class="token comment">//ä¿®æ”¹1 177è¡Œ"yolov7"æ”¹æˆ"best"</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">auto</span><span class="token operator">&amp;</span> obj <span class="token operator">:</span> boxes<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
     <span class="token keyword">auto</span> name    <span class="token operator">=</span> mylabels<span class="token punctuation">[</span>obj<span class="token punctuation">.</span>class_label<span class="token punctuation">]</span><span class="token punctuation">;</span>	 			<span class="token comment">//ä¿®æ”¹2 100è¡Œcocolabelsä¿®æ”¹ä¸ºmylabels</span>
	 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> mylabels<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">"have_mask"</span><span class="token punctuation">,</span> <span class="token string">"no_mask"</span><span class="token punctuation">}</span><span class="token punctuation">;</span>	<span class="token comment">//ä¿®æ”¹3 25è¡Œæ–°å¢ä»£ç ï¼Œä¸ºè‡ªè®­ç»ƒæ¨¡å‹çš„ç±»åˆ«åç§°</span>
</code></pre> 
<h5><a id="42__641"></a>4.2 ç¼–è¯‘</h5> 
<p>ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶<code>.pro</code>ï¼Œä¿å­˜åœ¨<code>workspace/</code>æ–‡ä»¶å¤¹ä¸‹ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-shell">$ <span class="token builtin class-name">cd</span> tensorRT_Pro-main
$ <span class="token function">mkdir</span> build <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> build
$ cmake <span class="token punctuation">..</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> -j8
</code></pre> 
<p>è€å¿ƒç­‰å¾…ç¼–è¯‘å®Œæˆ(<strong>PS:éœ€è¦ä¸€æ®µæ—¶é—´</strong>)ï¼Œmake -jå‚æ•°çš„é€‰å–ä¸€èˆ¬æ—¶ä»¥<strong>CPUæ ¸å¿ƒæ•°ä¸¤å€ä¸ºå®œ</strong>ï¼Œå‚è€ƒè‡ª<a href="https://blog.csdn.net/clarkness/article/details/86633681?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166063241916780366554449%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=166063241916780366554449&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-86633681-null-null.nonecase&amp;utm_term=make%20-j&amp;spm=1018.2226.3001.4450">make -jå‚æ•°ç®€ä»‹</a>ï¼ŒLinuxä¸‹CPUæ ¸å¿ƒæ•°å¯é€šè¿‡<code>lscpu</code>æŒ‡ä»¤æŸ¥çœ‹ï¼Œjetson nanoçš„cpuæ ¸å¿ƒæ•°ä¸º4ã€‚</p> 
<pre><code class="prism language-shell">$ lscpu
Architecture:        aarch64
Byte Order:          Little Endian
CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:              <span class="token number">4</span>
On-line CPU<span class="token punctuation">(</span>s<span class="token punctuation">)</span> list: <span class="token number">0</span>-3
Thread<span class="token punctuation">(</span>s<span class="token punctuation">)</span> per core:  <span class="token number">1</span>
Core<span class="token punctuation">(</span>s<span class="token punctuation">)</span> per socket:  <span class="token number">4</span>
Socket<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:           <span class="token number">1</span>
Vendor ID:           ARM
Model:               <span class="token number">1</span>
Model name:          Cortex-A57
Stepping:            r1p1
CPU max MHz:         <span class="token number">1479.0000</span>
CPU min MHz:         <span class="token number">102.0000</span>
BogoMIPS:            <span class="token number">38.40</span>
L1d cache:           32K
L1i cache:           48K
L2 cache:            2048K
Flags:               fp asimd evtstrm aes pmull sha1 sha2 crc32
</code></pre> 
<p>ç¼–è¯‘å›¾è§£å¦‚ä¸‹æ‰€ç¤º</p> 
<p><img src="https://images2.imgbox.com/17/2a/KmS41PYh_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="43__680"></a>4.3 æ¨¡å‹æ„å»ºå’Œæ¨ç†</h5> 
<p>ç¼–è¯‘å®Œæˆåçš„å¯æ‰§è¡Œæ–‡ä»¶<code>.pro</code>å­˜æ”¾åœ¨<code>workspace/</code>æ–‡ä»¶å¤¹ä¸‹ï¼Œæ•…è¿›å…¥workspaceæ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤</p> 
<pre><code class="prism language-shell">$ <span class="token builtin class-name">cd</span> workspace    // è¿›å…¥å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•ä¸‹
$ <span class="token function">ls</span>			  // æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶
$ ./pro yolo	  // æ„å»ºæ¨¡å‹å¹¶æ¨ç† 
</code></pre> 
<p>æ¨¡å‹æ„å»ºå’Œæ¨ç†å›¾è§£å¦‚ä¸‹æ‰€ç¤ºã€‚åœ¨<code>workspace/</code>æ–‡ä»¶å¤¹ä¸‹ä¼šç”Ÿæˆ<code>best.FP32.trtmodel</code>å¼•æ“æ–‡ä»¶ç”¨äºæ¨¡å‹æ¨ç†ï¼Œä¼šç”Ÿæˆ<code>best_Yolov7_FP32_result</code>æ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹ä¿å­˜äº†æ¨ç†çš„å›¾ç‰‡ã€‚</p> 
<p><img src="https://images2.imgbox.com/88/09/IsSAdoBl_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>æ¨¡å‹æ¨ç†æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º</p> 
<p><img src="https://images2.imgbox.com/c8/28/kOUxrlwY_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><img src="https://images2.imgbox.com/d0/d6/7fwHmIPU_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h5><a id="44__703"></a>4.4 æ‹“å±•-æ‘„åƒå¤´æ£€æµ‹</h5> 
<blockquote> 
 <p>ç®€å•å†™äº†ä¸€ä¸ªæ‘„åƒå¤´æ£€æµ‹çš„demoï¼Œä¸»è¦ä¿®æ”¹ä»¥ä¸‹å‡ ç‚¹:</p> 
</blockquote> 
<ul><li><strong>1. app_yolo.cpp æ–°å¢app_yolo_video_demo()å‡½æ•°ï¼Œå…·ä½“å†…å®¹å‚è€ƒä¸‹é¢</strong></li><li><strong>2. app_yolo.cpp 177è¡Œ æ³¨é‡Š</strong></li><li><strong>3. app_yolo.cpp 176è¡Œ æ–°å¢è°ƒç”¨app_yolo_video_demo()å‡½æ•°ä»£ç ï¼Œå…·ä½“å†…å®¹å‚è€ƒä¸‹é¢</strong></li></ul> 
<pre><code class="prism language-cpp"><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">app_yolo_video_demo</span><span class="token punctuation">(</span><span class="token keyword">const</span> string<span class="token operator">&amp;</span> engine_file<span class="token punctuation">,</span> TRT<span class="token double-colon punctuation">::</span>Mode mode<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  <span class="token comment">// ä¿®æ”¹1 æ–°å¢å‡½æ•°</span>
    <span class="token keyword">auto</span> yolo <span class="token operator">=</span> <span class="token class-name">Yolo</span><span class="token double-colon punctuation">::</span><span class="token function">create_infer</span><span class="token punctuation">(</span>
        engine_file<span class="token punctuation">,</span>                    <span class="token comment">// engine file</span>
        Yolo<span class="token double-colon punctuation">::</span>Type<span class="token double-colon punctuation">::</span>V7<span class="token punctuation">,</span>                 <span class="token comment">// yolo type, Yolo::Type::V5 / Yolo::Type::X</span>
        <span class="token number">0</span><span class="token punctuation">,</span>                              <span class="token comment">// gpu_id</span>
        <span class="token number">0.5f</span><span class="token punctuation">,</span>                           <span class="token comment">// confidence threshold</span>
        <span class="token number">0.5f</span><span class="token punctuation">,</span>                           <span class="token comment">// nms threshold</span>
        Yolo<span class="token double-colon punctuation">::</span>NMSMethod<span class="token double-colon punctuation">::</span>FastGPU<span class="token punctuation">,</span>       <span class="token comment">// NMS method, fast GPU / CPU</span>
        <span class="token number">1024</span><span class="token punctuation">,</span>                           <span class="token comment">// max objects</span>
        <span class="token boolean">false</span>                           <span class="token comment">// preprocess use multi stream</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>      
    <span class="token keyword">if</span> <span class="token punctuation">(</span>yolo <span class="token operator">==</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">INFO</span><span class="token punctuation">(</span><span class="token string">"Engine is nullptr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    cv<span class="token double-colon punctuation">::</span>Mat frame<span class="token punctuation">;</span>
    cv<span class="token double-colon punctuation">::</span>VideoCapture <span class="token function">cap</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cap<span class="token punctuation">.</span><span class="token function">isOpened</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">INFO</span><span class="token punctuation">(</span><span class="token string">"Engine is nullptr"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        cap<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> t0 <span class="token operator">=</span> iLogger<span class="token double-colon punctuation">::</span><span class="token function">timestamp_now_float</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        time_t now <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> boxes <span class="token operator">=</span> yolo<span class="token operator">-&gt;</span><span class="token function">commit</span><span class="token punctuation">(</span>frame<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">auto</span> <span class="token operator">&amp;</span>obj <span class="token operator">:</span> boxes<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token keyword">uint8_t</span> b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r<span class="token punctuation">;</span>
            <span class="token function">tie</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> g<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=</span> iLogger<span class="token double-colon punctuation">::</span><span class="token function">random_color</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>class_label<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cv<span class="token double-colon punctuation">::</span><span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>left<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>right<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>bottom<span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">auto</span> name <span class="token operator">=</span> mylabels<span class="token punctuation">[</span>obj<span class="token punctuation">.</span>class_label<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">auto</span> caption <span class="token operator">=</span> iLogger<span class="token double-colon punctuation">::</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%s %.2f"</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>confidence<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">int</span> width <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">getTextSize</span><span class="token punctuation">(</span>caption<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">.</span>width <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
            cv<span class="token double-colon punctuation">::</span><span class="token function">rectangle</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>left <span class="token operator">-</span> <span class="token number">3</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>left <span class="token operator">+</span> width<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>top<span class="token punctuation">)</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Scalar</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> g<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cv<span class="token double-colon punctuation">::</span><span class="token function">putText</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> caption<span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token function">Point</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>left<span class="token punctuation">,</span> obj<span class="token punctuation">.</span>top <span class="token operator">-</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> cv<span class="token double-colon punctuation">::</span><span class="token class-name">Scalar</span><span class="token double-colon punctuation">::</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"frame"</span><span class="token punctuation">,</span> frame<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">auto</span> fee <span class="token operator">=</span> iLogger<span class="token double-colon punctuation">::</span><span class="token function">timestamp_now_float</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t0<span class="token punctuation">;</span>
        <span class="token function">INFO</span><span class="token punctuation">(</span><span class="token string">"fee %.2f ms, fps = %.2f"</span><span class="token punctuation">,</span> fee<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">/</span> fee <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> key <span class="token operator">=</span> cv<span class="token double-colon punctuation">::</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token number">27</span><span class="token punctuation">)</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    cap<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cv<span class="token double-colon punctuation">::</span><span class="token function">destroyAllWindows</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">INFO</span><span class="token punctuation">(</span><span class="token string">"Done"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    yolo<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">app_yolo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token function">app_yolo_video_demo</span><span class="token punctuation">(</span><span class="token string">"best.FP32.trtmodel"</span><span class="token punctuation">,</span> TRT<span class="token double-colon punctuation">::</span>Mode<span class="token double-colon punctuation">::</span>FP32<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// ä¿®æ”¹3 176è¡Œæ–°å¢</span>
    <span class="token comment">// test(Yolo::Type::V7, TRT::Mode::FP32, "yolov7");					// ä¿®æ”¹2 æ³¨é‡Š177è¡Œ</span>
    <span class="token comment">// test(Yolo::Type::V5, TRT::Mode::FP32, "yolov5s");</span>
    <span class="token comment">// test(Yolo::Type::V3, TRT::Mode::FP32, "yolov3");</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>è¿›å…¥<code>build/</code>æ–‡ä»¶å¤¹ä¸‹ç¼–è¯‘ï¼Œç„¶åè¿›è¡Œ<code>workspace/</code>æ–‡ä»¶å¤¹ä¸‹è¿è¡Œå³å¯è°ƒç”¨æ‘„åƒå¤´æ£€æµ‹ï¼ŒæŒ‡ä»¤å¦‚ä¸‹</p> 
<pre><code class="prism language-shell">$ <span class="token builtin class-name">cd</span> build
$ <span class="token function">make</span> -j8
$ <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/workspace
$ ./pro yolo
</code></pre> 
<p>å›¾è§£å¦‚ä¸‹æ‰€ç¤º</p> 
<p><img src="https://images2.imgbox.com/ff/25/YQBEiK5t_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_788"></a>ç»“è¯­</h3> 
<blockquote> 
 <p>æœ¬ç¯‡åšå®¢ä»‹ç»äº†å…³äºyolov7æ¨¡å‹è®­ç»ƒçš„æµç¨‹ï¼Œä»¥åŠåœ¨jetson nanoåµŒå…¥å¼ä¸Šçš„éƒ¨ç½²å·¥ä½œã€‚åšä¸»åœ¨è¿™é‡Œåªåšäº†æœ€åŸºç¡€çš„æ¼”ç¤ºï¼Œå¦‚æœæœ‰æ›´å¤šçš„éœ€æ±‚éœ€è¦å„ä½çœ‹å®˜è‡ªå·±å»æŒ–æ˜å•¦ğŸ˜„ã€‚æ„Ÿè°¢å„ä½çœ‹åˆ°æœ€åï¼Œåˆ›ä½œä¸æ˜“ï¼Œè¯»åæœ‰æ”¶è·çš„çœ‹å®˜è¯·å¸®å¿™ç‚¹ä¸ªğŸ‘â­ï¸ã€‚</p> 
</blockquote> 
<h3><a id="_792"></a>ä¸‹è½½é“¾æ¥</h3> 
<ul><li><a href="https://pan.baidu.com/s/1OmR4bCoRhGD_D8HrPbcVhQ" rel="nofollow">yolov7æºç [password:yolo]</a></li><li><a href="https://pan.baidu.com/s/1oeBugM-bqRN6QFnVgXi5HQ" rel="nofollow">å£ç½©è¯†åˆ«æ•°æ®é›†[password:yolo]</a></li><li><a href="https://pan.baidu.com/s/1l4gekCq9_EHyfaRvlD8dgw" rel="nofollow">yolov7-v0.1é¢„è®­ç»ƒæƒé‡[password:yolo]</a></li><li><a href="https://pan.baidu.com/s/1QWkXmvBNhdaXonm6pUtbLg" rel="nofollow">yolov7å£ç½©è¯†åˆ«æ¨¡å‹æƒé‡[password:yolo]</a></li><li><a href="https://pan.baidu.com/s/1DuJG99J3lY21Hfj_Qeb4oA" rel="nofollow">tensorRT_Proæºç [password:yolo]</a></li><li><a href="https://pan.baidu.com/s/18zralGjexrVqOI-b6cD1xg" rel="nofollow">tensorRT_Proç®€åŒ–æºç [password:yolo]</a></li><li><a href="https://pan.baidu.com/s/1RW8Z-EQK--NtPgIe6mmKIQ?_at_=1660636990470#list/path=%2F" rel="nofollow">JetPacké•œåƒ[password:nano]</a></li><li><a href="https://pan.baidu.com/s/1f3UCcJeOoUaEFSCYUXcL1Q" rel="nofollow">protobufå®‰è£…åŒ…[password:yolo]</a></li></ul> 
<h3><a id="_803"></a>å‚è€ƒ</h3> 
<ul><li><a href="https://blog.csdn.net/qq_40672115/category_11970990.html?spm=1001.2014.3001.5482">JetsonåµŒå…¥å¼ç³»åˆ—æ¨¡å‹éƒ¨ç½²æ•™ç¨‹</a></li><li><a href="https://blog.csdn.net/didiaopao/article/details/119954291?spm=1001.2014.3001.5501">åˆ©ç”¨yolov5è®­ç»ƒè‡ªå·±çš„ç›®æ ‡æ£€æµ‹æ¨¡å‹</a></li><li><a href="https://www.bilibili.com/video/BV1kU4y1i7Ts?spm_id_from=333.999.0.0&amp;vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">yolov7è®­ç»ƒæµ‹è¯•è‡ªå·±çš„æ•°æ®é›†</a></li><li><a href="https://github.com/WongKinYiu/yolov7">yolov7</a></li><li><a href="https://blog.csdn.net/didiaopao/article/details/119787139?spm=1001.2014.3001.5501">åˆ©ç”¨Anacondaå®‰è£…pytorchå’Œpaddleæ·±åº¦å­¦ä¹ ç¯å¢ƒ+pycharmå®‰è£…â€”å…é¢å¤–å®‰è£…CUDAå’Œcudnn(é€‚åˆå°ç™½çš„ä¿å§†çº§æ•™å­¦)</a></li><li><a href="https://www.bilibili.com/video/BV1i7411376y?spm_id_from=333.337.search-card.all.click&amp;vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">å£ç½©ä½©æˆ´è¯†åˆ«Demo</a></li><li><a href="https://www.bilibili.com/video/BV1kV411k7D8?vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">PASCAL VOC2012æ•°æ®é›†è®²è§£ä¸åˆ¶ä½œè‡ªå·±çš„æ•°æ®é›†</a></li><li><a href="https://blog.csdn.net/didiaopao/article/details/120022845?spm=1001.2014.3001.5502">ç›®æ ‡æ£€æµ‹â€”æ•°æ®é›†æ ¼å¼è½¬åŒ–åŠè®­ç»ƒé›†å’ŒéªŒè¯é›†åˆ’åˆ†</a></li><li><a href="https://github.com/shouxieai/tensorRT_Pro">tensorRT_Pro</a></li><li><a href="https://zhuanlan.zhihu.com/p/339225116" rel="nofollow">Jetson NANOæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•é€‰ï¼Ÿ</a></li><li><a href="https://blog.csdn.net/xgd2016/article/details/105501745">Jetson nanoå®‰è£…jtop</a></li><li><a href="https://blog.csdn.net/qq_45772756/article/details/115433921">Jetson nanoå®‰è£…pipå¹¶æ¢æº</a></li><li><a href="https://blog.csdn.net/xp178171640/article/details/122597777?spm=1001.2014.3001.5502">Linuxä¸‹ç¼–è¯‘protobuf</a></li><li><a href="https://blog.csdn.net/weixin_32829077/article/details/116832775">Linuxä¸‹æ·»åŠ protobufç¯å¢ƒå˜é‡</a></li><li><a href="https://netron.app/" rel="nofollow">Netronå¯è§†åŒ–å·¥å…·</a></li><li><a href="https://www.bilibili.com/video/BV1Xw411f7FW?p=7&amp;vd_source=2306b3f342c070c8a11931c94eafa8e3" rel="nofollow">æ‰‹å†™AIçš„è¯¦è§£TensorRTé«˜æ€§èƒ½éƒ¨ç½²è§†é¢‘</a> <strong>åšä¸»å¼ºçƒˆæ¨è</strong>!!!ğŸ‘ğŸ‘ğŸ‘</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d1570be407782b12156fba959817118e/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">jsæ±‚æ•°ç»„æœ€å¤§å€¼æœ‰å“ªäº›æ–¹å¼</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f2ae7e5e76ad4540801cce8fda0fbffa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">JetsonåµŒå…¥å¼ç³»åˆ—æ¨¡å‹éƒ¨ç½²-1</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 èœé¸Ÿç¨‹åºå‘˜åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>