<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ArcMap中构建金字塔详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ArcMap中构建金字塔详解" />
<meta property="og:description" content="1.金字塔 1.1 定义 金字塔可用于改善性能。它们是原始栅格数据集的缩减采样版本，可包含多个缩减采样图层。金字塔的各个连续图层均以 2:1 的比例进行缩减采样。如下图所示。从金字塔的底层开始每四个相邻的像素经过重采样生成一个新的像素，依此重复进行，直到金字塔的顶层。重采样的方法一般有以下三种: 双线性插值（BILINEAR）、最临近像元法（NEAREST）、三次卷积法（CUBIC）。其中最临近像元法速度最快，如果对图像的边缘要求不是很高，最适合使用该方法。三次卷积由于考虑的参考点数太多、运算较复杂等原因，速度最慢，但是重采样后图像的灰度效果较好。
1.2 作用 金字塔通过仅检索使用指定分辨率(取决于显示要求)的数据，可以加快栅格数据的显示速度。利用金字塔，可在绘制整个数据集时快速显示较低分辨率的数据副本。而随着放大操作的进行，各个更精细的分辨率等级将逐渐得到绘制;但性能将保持不变，因为您在连续绘制更小的各个区域。数据库服务器会根据用户的显示比例自动选择最适合的金字塔等级。如果不使用金字塔 (pyramid)，则必须从磁盘中读取整个数据集，然后将其重采样为更小的大小。这便称为“显示重采样”，发生在刷新 ArcGIS 显示内容时。
每个栅格数据集只需构建一次金字塔，之后每次查看栅格数据集时都会访问这些金字塔。栅格数据集越大，创建金字塔集所花费的时间就越长。但是，这也就意味着可以为将来节省更多的时间。
尽管无法为栅格目录构建金字塔，但是可以为栅格目录中的每个栅格数据集构建金字塔。镶嵌数据集与栅格目录类似。您可以为镶嵌数据集中的每个栅格数据集构建金字塔;而为镶嵌数据集构建金字塔时只能使用镶嵌数据集工具集中的特定工具。
2.构建方法 2.1单景影像金字塔构建 ArcToolbox-&gt;Data ManagementTools-&gt;Raster-&gt;Raster Properties-&gt;Build Pyramids
对于尚未构建金字塔的单景影像，在影像添加至ArcMap窗口时，会得到“是否构建金字塔”的提示，这个时候也可以选择构建金字塔。
2.2批量影像金字塔构建 ArcToolbox-&gt;Data ManagementTools-&gt;Raster-&gt;Raster Properties-&gt; Build Pyramids And Statistics
对于数据量比较大的影像，推荐利用批量工具进行金字塔构建
或者ArcToolbox-&gt;Data ManagementTools-&gt;Raster-&gt;Raster Properties-&gt; Batch Build Pyramids
3 提速金字塔构建
金字塔构建过程中有几个可设的参数，它们正是提速金字塔构建的秘密所在。如上图所示
（1）金字塔级别 Pyramidlevels (optional)
金字塔等级是指建立的金字塔层级数量。默认的级别是-1，此时会构建完整的影像金字塔。如果这里设成空值，得到的效果和-1相同。
如果设为0，那么将不会建立金字塔。同时，这也是删除影像金字塔的方法。
金字塔最高级别可以设为29，任何高于29的值都会当作-1处理。
如果按照默认的设置，完整的构建出影像金字塔，耗费的时间一定会较长，所以可以根据需要进行金字塔级别设置。
（2）重采样方法 Pyramidresampling technique (optional)
重采样的方法一般有以下三种: 双线性插值（BILINEAR）、最临近像元法（NEAREST）、三次卷积法（CUBIC）。其中最临近像元法速度最快，如果对图像的边缘要求不是很高，最适合使用该方法。三次卷积由于考虑的参考点数太多、运算较复杂等原因，速度最慢，但是重采样后图像的灰度效果较好。
对于影像，建议采用双线性差值法；对于离散数据，建议采用最邻近像元法。
（3）压缩方式 Pyramidcompression type (optional)
提供了5种压缩方式：
默认——如果源数据采用了小波压缩，金字塔将采用JPEG的压缩方法；否则，则采用LZ77的压缩方法。
LZ77——无损压缩方式，适合于任何类型的数据。
JPEG——有损压缩方式，选择了JPEG压缩，可以设置压缩质量。对于影像数据，通常选择此种压缩方式，如果对影像质量要求不高，可以将压缩比设置为25。
JPEG_YCbCr——种有损压缩，使用亮度（Y）和色度（ Cb和Cr ）色彩空间组件。
NONE——不对金字塔进行压缩。
（4） 设置环境变量 Parallel Processing Factor" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bf759d0476ea0edd0b4ecff92cf14013/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-08T12:38:41+08:00" />
<meta property="article:modified_time" content="2023-12-08T12:38:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ArcMap中构建金字塔详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>1.金字塔</h3> 
<h4><a id="11__1"></a>1.1 定义</h4> 
<p>金字塔可用于改善性能。它们是原始栅格数据集的缩减采样版本，可包含多个缩减采样图层。金字塔的各个连续图层均以 2:1 的比例进行缩减采样。如下图所示。从金字塔的底层开始每四个相邻的像素经过重采样生成一个新的像素，依此重复进行，直到金字塔的顶层。重采样的方法一般有以下三种: 双线性插值（BILINEAR）、最临近像元法（NEAREST）、三次卷积法（CUBIC）。其中最临近像元法速度最快，如果对图像的边缘要求不是很高，最适合使用该方法。三次卷积由于考虑的参考点数太多、运算较复杂等原因，速度最慢，但是重采样后图像的灰度效果较好。<br> <img src="https://images2.imgbox.com/92/d0/wV7ijO8E_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="12__6"></a>1.2 作用</h4> 
<p>金字塔通过仅检索使用指定分辨率(取决于显示要求)的数据，可以加快栅格数据的显示速度。利用金字塔，可在绘制整个数据集时快速显示较低分辨率的数据副本。而随着放大操作的进行，各个更精细的分辨率等级将逐渐得到绘制;但性能将保持不变，因为您在连续绘制更小的各个区域。数据库服务器会根据用户的显示比例自动选择最适合的金字塔等级。如果不使用金字塔 (pyramid)，则必须从磁盘中读取整个数据集，然后将其重采样为更小的大小。这便称为“显示重采样”，发生在刷新 ArcGIS 显示内容时。</p> 
<p>每个栅格数据集只需构建一次金字塔，之后每次查看栅格数据集时都会访问这些金字塔。栅格数据集越大，创建金字塔集所花费的时间就越长。但是，这也就意味着可以为将来节省更多的时间。</p> 
<p>尽管无法为栅格目录构建金字塔，但是可以为栅格目录中的每个栅格数据集构建金字塔。镶嵌数据集与栅格目录类似。您可以为镶嵌数据集中的每个栅格数据集构建金字塔;而为镶嵌数据集构建金字塔时只能使用镶嵌数据集工具集中的特定工具。</p> 
<h3><a id="2_14"></a>2.构建方法</h3> 
<h4><a id="21_16"></a>2.1单景影像金字塔构建</h4> 
<p>ArcToolbox-&gt;Data ManagementTools-&gt;Raster-&gt;Raster Properties-&gt;Build Pyramids</p> 
<p>对于尚未构建金字塔的单景影像，在影像添加至ArcMap窗口时，会得到“是否构建金字塔”的提示，这个时候也可以选择构建金字塔。<br> <img src="https://images2.imgbox.com/00/d8/7Mhr8LwL_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22_22"></a>2.2批量影像金字塔构建</h4> 
<p>ArcToolbox-&gt;Data ManagementTools-&gt;Raster-&gt;Raster Properties-&gt; Build Pyramids And Statistics</p> 
<p>对于数据量比较大的影像，推荐利用批量工具进行金字塔构建<br> <img src="https://images2.imgbox.com/77/ba/UEp7X80m_o.png" alt="在这里插入图片描述"></p> 
<p>或者ArcToolbox-&gt;Data ManagementTools-&gt;Raster-&gt;Raster Properties-&gt; Batch Build Pyramids<br> 3 提速金字塔构建</p> 
<p>金字塔构建过程中有几个可设的参数，它们正是提速金字塔构建的秘密所在。如上图所示</p> 
<p>（1）金字塔级别 Pyramidlevels (optional)</p> 
<p>金字塔等级是指建立的金字塔层级数量。默认的级别是-1，此时会构建完整的影像金字塔。如果这里设成空值，得到的效果和-1相同。</p> 
<p>如果设为0，那么将不会建立金字塔。同时，这也是删除影像金字塔的方法。</p> 
<p>金字塔最高级别可以设为29，任何高于29的值都会当作-1处理。</p> 
<p>如果按照默认的设置，完整的构建出影像金字塔，耗费的时间一定会较长，所以可以根据需要进行金字塔级别设置。</p> 
<p>（2）重采样方法 Pyramidresampling technique (optional)</p> 
<p>重采样的方法一般有以下三种: 双线性插值（BILINEAR）、最临近像元法（NEAREST）、三次卷积法（CUBIC）。其中最临近像元法速度最快，如果对图像的边缘要求不是很高，最适合使用该方法。三次卷积由于考虑的参考点数太多、运算较复杂等原因，速度最慢，但是重采样后图像的灰度效果较好。</p> 
<p>对于影像，建议采用双线性差值法；对于离散数据，建议采用最邻近像元法。</p> 
<p>（3）压缩方式 Pyramidcompression type (optional)</p> 
<p>提供了5种压缩方式：</p> 
<p>默认——如果源数据采用了小波压缩，金字塔将采用JPEG的压缩方法；否则，则采用LZ77的压缩方法。<br> LZ77——无损压缩方式，适合于任何类型的数据。<br> JPEG——有损压缩方式，选择了JPEG压缩，可以设置压缩质量。对于影像数据，通常选择此种压缩方式，如果对影像质量要求不高，可以将压缩比设置为25。<br> JPEG_YCbCr——种有损压缩，使用亮度（Y）和色度（ Cb和Cr ）色彩空间组件。<br> NONE——不对金字塔进行压缩。</p> 
<p>（4） 设置环境变量 Parallel Processing Factor</p> 
<p>我们的电脑都是多核的，通过环境变量的并行处理因子设置可以提升GP工具处理速度。</p> 
<p>具体设置位置：GP工具面板——&gt;Environments——&gt;ParallelProcessing</p> 
<p><img src="https://images2.imgbox.com/b1/08/QDjadyYx_o.png" alt="在这里插入图片描述"></p> 
<p>并行处理因子以数字或者百分数的形式进行设置。如果以百分数的形式设置，最终的进程数将是电脑CPU核数与百分比相乘的结果或近似结果。比如说，4核的电脑。</p> 
<ul><li>如果设置为50%，那么将启用2个进程。（50% * 4 = 2）</li><li>如果设置为66%，那么将启用3个进程。（66% * 4 = 2.64，近似为3）</li><li>如果设置为100%，那么将启用4个进程。（100% * 4 = 4）</li></ul> 
<p>当然，也可以直接进行数值设置。</p> 
<ul><li>空值——默认设置，不同的工具会进行不同进程数的设置。</li><li>0——不进行并行设置。</li><li>n——指定具体进程数，进程数设置不超过CPU核数。</li></ul> 
<h4><a id="4_80"></a>4.删除构建</h4> 
<p>删除金字塔文件。Img格式为最常见的影像格式，影像数据小于2G时，img存储影像，rrd是生成的影像金字塔文件；当影像数据大于2G时，img就变成索引文件，arcmap产生ige的影像格式存储栅格数据，rrd是生成的影像金字塔文件，当金字塔文件(rrd)超过2GB时，又会创建rde文件来存储金字塔。所以，重建金字塔时，需要删除rrd和rde文件。为了防止重建金字塔失败，可以先把数据备份一下。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1550f4b19213c8d979cee206b79d1c0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Docker部署.NET6项目</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/47712e5599696dfdd5438a2dcff01adc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">脚本修改linux时间</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>