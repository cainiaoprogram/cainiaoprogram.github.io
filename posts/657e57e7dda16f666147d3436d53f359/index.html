<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL之视图&amp;内连接、外连接、子查询案例 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL之视图&amp;内连接、外连接、子查询案例" />
<meta property="og:description" content="目录
一.视图
1.1 含义
1.2 操作
二.案例
三.思维导图
一.视图 1.1 含义 虚拟表，查询方面和普通表一样使用。
1.2 操作 1.创建视图：
create or replace view 视图名
as
查询语句； 2.视图的修改：
方式1 create or replace view 视图名
as
查询语句；方式2 alter view 视图名
as
查询语句； 3.删除视图：
drop view 视图名,视图名,... 4.查看视图：
DESC 视图名; —— 查看视图相关字段SHOW CREATE VIEW 视图名; —— 查看视图相关语句 二.案例 01）查询&#34; 01 &#34;课程比&#34; 02 &#34;课程成绩高的学生的信息及课程分数
1.涉及表：t_mysql_student, t_mysql_score2.连接方式：内连接3.行转列：流程函数SELECT
s.*,
(case when t1.cid = &#39;01&#39; then t1.score end) 语文,
(case when t2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/657e57e7dda16f666147d3436d53f359/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-06T21:51:50+08:00" />
<meta property="article:modified_time" content="2024-01-06T21:51:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL之视图&amp;内连接、外连接、子查询案例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80.%E8%A7%86%E5%9B%BE-toc" style="margin-left:0px;"><a href="#%E4%B8%80.%E8%A7%86%E5%9B%BE" rel="nofollow">一.视图</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201.1%20%E5%90%AB%E4%B9%89-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201.1%20%E5%90%AB%E4%B9%89" rel="nofollow">        1.1 含义</a></p> 
<p id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201.2%20%E6%93%8D%E4%BD%9C-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201.2%20%E6%93%8D%E4%BD%9C" rel="nofollow">        1.2 操作</a></p> 
<p id="%E4%BA%8C.%E6%A1%88%E4%BE%8B-toc" style="margin-left:0px;"><a href="#%E4%BA%8C.%E6%A1%88%E4%BE%8B" rel="nofollow">二.案例</a></p> 
<p id="%E4%B8%89.%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE-toc" style="margin-left:0px;"><a href="#%E4%B8%89.%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE" rel="nofollow">三.思维导图</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 style="background-color:transparent;">一.视图</h2> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201.1%20%E5%90%AB%E4%B9%89">        1.1 含义</h3> 
<blockquote> 
 <p>虚拟表，查询方面和普通表一样使用。</p> 
</blockquote> 
<h3 id="%C2%A0%20%C2%A0%20%C2%A0%20%C2%A0%201.2%20%E6%93%8D%E4%BD%9C">        1.2 操作</h3> 
<blockquote> 
 <p>1.创建视图：</p> 
 <ul><li>create or replace view 视图名<br> as<br> 查询语句；</li></ul> 
 <p>2.视图的修改：</p> 
 <ul><li>方式1 
   <ul><li>create or replace view 视图名<br> as<br> 查询语句；</li></ul></li><li>方式2 
   <ul><li>alter view 视图名<br> as<br> 查询语句；</li></ul></li></ul> 
 <p>3.删除视图：</p> 
 <ul><li>drop view 视图名,视图名,...</li></ul> 
 <p>4.查看视图：</p> 
 <ul><li>DESC 视图名; —— 查看视图相关字段</li><li>SHOW CREATE VIEW 视图名; —— 查看视图相关语句</li></ul> 
</blockquote> 
<h2 id="%E4%BA%8C.%E6%A1%88%E4%BE%8B">二.案例</h2> 
<blockquote> 
 <p><strong>01）</strong>查询" 01 "课程比" 02 "课程成绩高的学生的信息及课程分数</p> 
 <ul><li>1.涉及表：t_mysql_student, t_mysql_score</li><li>2.连接方式：内连接</li><li>3.行转列：流程函数</li><li>SELECT<br>     s.*,<br>     (case when t1.cid = '01' then t1.score end) 语文,<br>     (case when t2.cid = '02' then t2.score end) 数学<br> FROM<br>     t_mysql_student s,<br>     ( SELECT * FROM t_mysql_score WHERE cid = '01' ) t1,<br>     ( SELECT * FROM t_mysql_score WHERE cid = '02' ) t2 <br> WHERE<br>     s.sid = t1.sid <br>     AND t1.sid = t2.sid <br>     AND t1.score &gt; t2.score</li><li><img alt="" height="902" src="https://images2.imgbox.com/a6/0f/4rbYpWKC_o.png" width="1163"></li></ul> 
 <p><strong>02）</strong>查询同时存在" 01 "课程和" 02 "课程的情况</p> 
 <ul><li>SELECT<br>     s.*,<br>     (case when t1.cid = '01' then t1.score end) 语文,<br>     (case when t2.cid = '02' then t2.score end) 数学<br> FROM<br>     t_mysql_student s,<br>     ( SELECT * FROM t_mysql_score WHERE cid = '01' ) t1,<br>     ( SELECT * FROM t_mysql_score WHERE cid = '02' ) t2 <br> WHERE<br>     s.sid = t1.sid <br>     AND t1.sid = t2.sid </li><li><img alt="" height="620" src="https://images2.imgbox.com/51/ea/kLmipvjC_o.png" width="727"></li></ul> 
 <p><strong>03）</strong>查询存在" 01 "课程但可能不存在" 02 "课程的情况(不存在时显示为 null )</p> 
 <ul><li>连接方式：外连接</li><li>SELECT<br>     s.*,<br>     ( CASE WHEN t1.cid = '01' THEN t1.score END ) 语文,<br>     ( CASE WHEN t2.cid = '02' THEN t2.score END ) 数学 <br> FROM<br>     t_mysql_student s<br>     INNER JOIN ( SELECT * FROM t_mysql_score WHERE cid = '01' ) t1 ON s.sid = t1.sid<br>     LEFT JOIN ( SELECT * FROM t_mysql_score WHERE cid = '02' ) t2 ON t1.sid = t2.sid</li><li><img alt="" height="567" src="https://images2.imgbox.com/64/24/uvoPf1WA_o.png" width="836"></li></ul> 
 <p><strong>04）</strong>查询不存在" 01 "课程但存在" 02 "课程的情况</p> 
 <ul><li>考核：子查询</li><li>SELECT<br>     s.*,<br>     ( CASE WHEN sc.cid = '01' THEN sc.score END ) 语文,<br>     ( CASE WHEN sc.cid = '02' THEN sc.score END ) 数学 <br> FROM<br>     t_mysql_student s,<br>     t_mysql_score sc <br> WHERE<br>     s.sid = sc.sid <br>     AND s.sid NOT IN ( SELECT sid FROM t_mysql_score WHERE cid = '01' ) <br>     AND cid = '02'</li><li><img alt="" height="606" src="https://images2.imgbox.com/60/68/P7dDzDAt_o.png" width="842"></li></ul> 
 <p><strong>05）</strong>查询平均成绩大于等于 60 分的同学的学生编号和学生姓名和平均成绩</p> 
 <ul><li>考核：聚合函数意味着分组，外连接</li><li>SELECT<br>     s.sid,<br>     s.sname,<br>     ROUND( avg( sc.score ), 2 ) n <br> FROM<br>     t_mysql_student s<br>     LEFT JOIN t_mysql_score sc ON s.sid = sc.sid <br> GROUP BY<br>     s.sid,<br>     s.sname <br> HAVING<br>     n &gt;= 60</li><li><img alt="" height="680" src="https://images2.imgbox.com/3a/b3/rzQMNb5a_o.png" width="715"></li></ul> 
 <p><strong>06）</strong>查询在t_mysql_score表存在成绩的学生信息</p> 
 <ul><li>SELECT<br>     s.sid,<br>     s.sname <br> FROM<br>     t_mysql_student s<br>     INNER JOIN t_mysql_score sc ON s.sid = sc.sid <br> GROUP BY<br>     s.sid,<br>     s.sname</li><li><img alt="" height="502" src="https://images2.imgbox.com/c0/3c/jY5NYJem_o.png" width="620"></li></ul> 
 <p><strong>07）</strong>查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩(没成绩的显示为 null )</p> 
 <ul><li>考核：聚合函数，外连接</li><li>SELECT<br>     s.sid,<br>     s.sname,<br>     count( sc.score ) 选课总数,<br>     sum( sc.score ) 总成绩 <br> FROM<br>     t_mysql_student s<br>     LEFT JOIN t_mysql_score sc ON s.sid = sc.sid <br> GROUP BY<br>     s.sid,<br>     s.sname</li><li><img alt="" height="657" src="https://images2.imgbox.com/06/a3/aq6usycg_o.png" width="960"></li></ul> 
 <p><strong>08）</strong>查询「李」姓老师的数量</p> 
 <ul><li>SELECT<br>     count(*) <br> FROM<br>     t_mysql_teacher <br> WHERE<br>     tname LIKE '李%'</li></ul> 
</blockquote> 
<h2 id="%E4%B8%89.%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE">三.思维导图</h2> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/17/c2/c2lDqtmj_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6ca1b75429ff8933156c2a5f32527371/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css弹性布局flex</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9691bd216f3d17537ce5f19ddb2fe1dd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">金蝶云星空WebApi菜单授权，必须是系统管理员角色</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>