<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>这份 pip 使用方法，应该算是全网最全了 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="这份 pip 使用方法，应该算是全网最全了" />
<meta property="og:description" content="Python 之所以如此受欢迎，能够在众多高级语言中，脱颖而出，除了语法简单，上手容易之外，更多还要归功于 Python 生态的完备，有数以万计的 Python 爱好者愿意以 Python 为基础封装出各种有利于开发的第三方工具包。
说到 pip ，大家都不会陌生。但我相信不少人，只是熟悉几个常用的用法，而对于其他几个低频且实用的用法，却知之甚少，这两天，我把这些用法整理了一下，应该是网络上比较全的介绍。
注：为方便 Python 技术交流，文末提供技术交流群
1. 查询软件包 查询当前环境安装的所有软件包
$ pip list 查询 pypi 上含有某名字的包
$ pip search pkg 查询当前环境中可升级的包
$ pip list --outdated 查询一个包的详细内容
$ pip show pkg 2. 下载软件包 在不安装软件包的情况下下载软件包到本地
$ pip download --destination-directory /local/wheels -r requirements.txt 下载完，总归是要安装的，可以指定这个目录中安装软件包，而不从 pypi 上安装。
$ pip install --no-index --find-links=/local/wheels -r requirements.txt 当然你也从你下载的包中，自己构建生成 wheel 文件
$ pip install wheel $ pip wheel --wheel-dir=/local/wheels -r requirements." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a861e7a6279db43a3666d15ded6a821b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-08T14:20:38+08:00" />
<meta property="article:modified_time" content="2021-12-08T14:20:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">这份 pip 使用方法，应该算是全网最全了</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>Python 之所以如此受欢迎，能够在众多高级语言中，脱颖而出，除了语法简单，上手容易之外，更多还要归功于 Python 生态的完备，有数以万计的 Python 爱好者愿意以 Python 为基础封装出各种有利于开发的第三方工具包。</p> 
<p>说到 pip ，大家都不会陌生。但我相信不少人，只是熟悉几个常用的用法，而对于其他几个低频且实用的用法，却知之甚少，这两天，我把这些用法整理了一下，应该是网络上比较全的介绍。</p> 
<p><strong>注：为方便 Python 技术交流，文末提供技术交流群</strong></p> 
<h3><a id="1__6"></a>1. 查询软件包</h3> 
<p>查询当前环境安装的所有软件包</p> 
<pre><code class="prism language-bash">$ pip list
</code></pre> 
<p>查询 pypi 上含有某名字的包</p> 
<pre><code class="prism language-bash">$ pip search pkg
</code></pre> 
<p>查询当前环境中可升级的包</p> 
<pre><code class="prism language-bash">$ pip list --outdated
</code></pre> 
<p>查询一个包的详细内容</p> 
<pre><code class="prism language-bash">$ pip show pkg
</code></pre> 
<h3><a id="2__33"></a>2. 下载软件包</h3> 
<p>在不安装软件包的情况下下载软件包到本地</p> 
<pre><code class="prism language-bash">$ pip download --destination-directory /local/wheels -r requirements.txt
</code></pre> 
<p>下载完，总归是要安装的，可以指定这个目录中安装软件包，而不从 pypi 上安装。</p> 
<pre><code class="prism language-bash">$ pip <span class="token function">install</span> --no-index --find-links<span class="token operator">=</span>/local/wheels -r requirements.txt
</code></pre> 
<p>当然你也从你下载的包中，自己构建生成 wheel 文件</p> 
<pre><code class="prism language-bash">$ pip <span class="token function">install</span> wheel
$ pip wheel --wheel-dir<span class="token operator">=</span>/local/wheels -r requirements.txt
</code></pre> 
<h3><a id="3__55"></a>3. 安装软件包</h3> 
<p>使用 <code>pip install &lt;pkg&gt;</code> 可以很方便地从 pypi 上搜索下载并安装 python 包。</p> 
<p>如下所示</p> 
<pre><code class="prism language-bash">$ pip <span class="token function">install</span> requests
</code></pre> 
<p>这是安装包的基本格式，我们也可以为其添加更多参数来实现不同的效果。</p> 
<p><strong>3.1 只从本地安装，而不从 pypi 安装</strong></p> 
<pre><code class="prism language-bash"><span class="token comment"># 前提你得保证你已经下载 pkg 包到 /local/wheels 目录下</span>
$ pip <span class="token function">install</span> --no-index --find-links<span class="token operator">=</span>/local/wheels pkg
</code></pre> 
<p><strong>3.2 限定版本进行软件包安装</strong></p> 
<p>以下三种，对单个 python 包的版本进行了约束</p> 
<pre><code class="prism language-bash"><span class="token comment"># 所安装的包的版本为 2.1.2</span>
$ pip <span class="token function">install</span> <span class="token assign-left variable">pkg</span><span class="token operator">==</span><span class="token number">2.1</span>.2

<span class="token comment"># 所安装的包必须大于等于 2.1.2</span>
$ pip <span class="token function">install</span> pkg<span class="token operator">&gt;</span><span class="token operator">=</span><span class="token number">2.1</span>.2

<span class="token comment"># 所安装的包必须小于等于 2.1.2</span>
$ pip <span class="token function">install</span> pkg<span class="token operator">&lt;</span><span class="token operator">=</span><span class="token number">2.1</span>.2
</code></pre> 
<p>以下命令用于管理/控制整个 python 环境的包版本</p> 
<pre><code class="prism language-bash"><span class="token comment"># 导出依赖包列表</span>
pip freeze <span class="token operator">&gt;</span>requirements.txt

<span class="token comment"># 从依赖包列表中安装</span>
pip <span class="token function">install</span> -r requirements.txt

<span class="token comment"># 确保当前环境软件包的版本(并不确保安装)</span>
pip <span class="token function">install</span> -c constraints.txt
</code></pre> 
<p><strong>3.3 限制不使用二进制包安装</strong></p> 
<p>由于默认情况下，wheel 包的平台是运行 pip download 命令 的平台，所以可能出现平台不适配的情况。</p> 
<p>比如在 MacOS 系统下得到的 pymongo-2.8-cp27-none-macosx_10_10_intel.whl 就不能在 linux_x86_64 安装。</p> 
<p>使用下面这条命令下载的是 tar.gz 的包，可以直接使用 pip install 安装。</p> 
<p>比 wheel 包，这种包在安装时会进行编译，所以花费的时间会长一些。</p> 
<pre><code class="prism language-bash"><span class="token comment"># 下载非二进制的包</span>
$ pip download --no-binary<span class="token operator">=</span>:all: pkg

<span class="token comment">#　安装非二进制的包</span>
$ pip <span class="token function">install</span> pkg --no-binary
</code></pre> 
<p><strong>3.4 指定代理服务器安装</strong></p> 
<p>当你身处在一个内网环境中时，无法直接连接公网。这时候你使用<code>pip install</code> 安装包，就会失败。</p> 
<p>面对这种情况，可以有两种方法：</p> 
<ol><li> <p>下载离线包拷贝到内网机器中安装</p> </li><li> <p>使用代理服务器转发请求</p> </li></ol> 
<p>第一种方法，虽说可行，但有相当多的弊端</p> 
<ul><li> <p>步骤繁杂，耗时耗力</p> </li><li> <p>无法处理包的依赖问题</p> </li></ul> 
<p>这里重点来介绍，第二种方法：</p> 
<pre><code class="prism language-bash">$ pip <span class="token function">install</span> --proxy <span class="token punctuation">[</span>user:passwd@<span class="token punctuation">]</span>http_server_ip:port pkg
</code></pre> 
<p>每次安装包就发输入长长的参数，未免有些麻烦，为此你可以将其写入配置文件中：<code>$HOME/.config/pip/pip.conf</code></p> 
<p>对于这个路径，说明几点</p> 
<ul><li>不同的操作系统，路径各不相同</li></ul> 
<pre><code class="prism language-bash"><span class="token comment"># Linux/Unix:</span>
/etc/pip.conf
~/.pip/pip.conf
~/.config/pip/pip.conf

<span class="token comment"># Mac OSX:</span>
~/Library/Application Support/pip/pip.conf
~/.pip/pip.conf
/Library/Application Support/pip/pip.conf

<span class="token comment"># Windows:</span>
%APPDATA%<span class="token punctuation">\</span>pip<span class="token punctuation">\</span>pip.ini
%<span class="token environment constant">HOME</span>%<span class="token punctuation">\</span>pip<span class="token punctuation">\</span>pip.ini
C:<span class="token punctuation">\</span>Documents and Settings<span class="token punctuation">\</span>All Users<span class="token punctuation">\</span>Application Data<span class="token punctuation">\</span>PyPA<span class="token punctuation">\</span>pip<span class="token punctuation">\</span>pip.conf <span class="token punctuation">(</span>Windows XP<span class="token punctuation">)</span>
C:<span class="token punctuation">\</span>ProgramData<span class="token punctuation">\</span>PyPA<span class="token punctuation">\</span>pip<span class="token punctuation">\</span>pip.conf <span class="token punctuation">(</span>Windows <span class="token number">7</span>及以后<span class="token punctuation">)</span> 
</code></pre> 
<ul><li>若在你的机子上没有此文件，则自行创建即可</li></ul> 
<p>如何配置，这边给个样例：</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>global<span class="token punctuation">]</span>
index-url <span class="token operator">=</span> http://mirrors.aliyun.com/pypi/simple/ 

<span class="token comment"># 替换出自己的代理地址，格式为[user:passwd@]proxy.server:port</span>
<span class="token assign-left variable">proxy</span><span class="token operator">=</span>http://xxx.xxx.xxx.xxx:8080 

<span class="token punctuation">[</span>install<span class="token punctuation">]</span>
<span class="token comment"># 信任阿里云的镜像源，否则会有警告</span>
trusted-host<span class="token operator">=</span>mirrors.aliyun.com 
</code></pre> 
<p><strong>3.5 安装用户私有软件包</strong></p> 
<p>很多人可能还不清楚，python 的安装包是可以用户隔离的。</p> 
<p>如果你拥有管理员权限，你可以将包安装在全局环境中。在全局环境中的这个包可被该机器上的所有拥有管理员权限的用户使用。</p> 
<p>如果一台机器上的使用者不只一样，自私地将在全局环境中安装或者升级某个包，是不负责任且危险的做法。</p> 
<p>面对这种情况，我们就想能否安装单独为我所用的包呢？</p> 
<p>庆幸的是，还真有。</p> 
<p>我能想到的有两种方法：</p> 
<ol><li> <p>使用虚拟环境</p> </li><li> <p>将包安装在用户的环境中</p> </li></ol> 
<p>虚拟环境，之前写过几篇文章，这里不再展开讲。</p> 
<p>今天的重点是第二种方法，教你如何安装用户私有的包？</p> 
<p>命令也很简单，只要加上 <code>--user</code> 参数，pip 就会将其安装在当前用户的 <code>~/.local/lib/python3.x/site-packages</code> 下，而其他用户的 python 则不会受影响。</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> --user pkg
</code></pre> 
<p>来举个例子</p> 
<pre><code class="prism language-bash"><span class="token comment"># 在全局环境中未安装 requests</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># pip list | grep requests   </span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># su - wangbm</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token comment"># 由于用户环境继承自全局环境，这里也未安装</span>
<span class="token punctuation">[</span>wangbm@localhost ~<span class="token punctuation">]</span><span class="token comment"># pip list | grep requests </span>
<span class="token punctuation">[</span>wangbm@localhost ~<span class="token punctuation">]</span><span class="token comment"># pip install --user requests  </span>
<span class="token punctuation">[</span>wangbm@localhost ~<span class="token punctuation">]</span><span class="token comment"># pip list | grep requests </span>
requests <span class="token punctuation">(</span><span class="token number">2.22</span>.0<span class="token punctuation">)</span>
<span class="token punctuation">[</span>wangbm@localhost ~<span class="token punctuation">]</span><span class="token comment"># </span>

<span class="token comment"># 从 Location 属性可发现 requests 只安装在当前用户环境中</span>
<span class="token punctuation">[</span>wangbm@ws_compute01 ~<span class="token punctuation">]</span>$ pip show requests
---
Metadata-Version: <span class="token number">2.1</span>
Name: requests
Version: <span class="token number">2.22</span>.0
Summary: Python HTTP <span class="token keyword">for</span> Humans.
Home-page: http://python-requests.org
Author: Kenneth Reitz
Author-email: me@kennethreitz.org
Installer: pip
License: Apache <span class="token number">2.0</span>
Location: /home/wangbm/.local/lib/python2.7/site-packages
<span class="token punctuation">[</span>wangbm@localhost ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">exit</span>
<span class="token builtin class-name">logout</span>

<span class="token comment"># 退出 wangbm 用户，在 root 用户环境中发现 requests 未安装</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span>$ pip list <span class="token operator">|</span> <span class="token function">grep</span> requests
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span>$ 
</code></pre> 
<p>当你身处个人用户环境中，python 导包时会先检索当前用户环境中是否已安装这个包，已安装则优先使用，未安装则使用全局环境中的包。</p> 
<p>验证如下：</p> 
<pre><code class="prism language-bash"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> sys
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> from pprint <span class="token function">import</span> pprint 
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> pprint<span class="token punctuation">(</span>sys.path<span class="token punctuation">)</span>
<span class="token punctuation">[</span><span class="token string">''</span>,
 <span class="token string">'/usr/lib64/python27.zip'</span>,
 <span class="token string">'/usr/lib64/python2.7'</span>,
 <span class="token string">'/usr/lib64/python2.7/plat-linux2'</span>,
 <span class="token string">'/usr/lib64/python2.7/lib-tk'</span>,
 <span class="token string">'/usr/lib64/python2.7/lib-old'</span>,
 <span class="token string">'/usr/lib64/python2.7/lib-dynload'</span>,
 <span class="token string">'/home/wangbm/.local/lib/python2.7/site-packages'</span>,
 <span class="token string">'/usr/lib64/python2.7/site-packages'</span>,
 <span class="token string">'/usr/lib64/python2.7/site-packages/gtk-2.0'</span>,
 <span class="token string">'/usr/lib/python2.7/site-packages'</span>,
 <span class="token string">'/usr/lib/python2.7/site-packages/pip-18.1-py2.7.egg'</span>,
 <span class="token string">'/usr/lib/python2.7/site-packages/lockfile-0.12.2-py2.7.egg'</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> 
</code></pre> 
<p><strong>3.6 延长超时时间</strong></p> 
<p>若网络情况不是很好，在安装某些包时经常会因为 ReadTimeout 而失败。</p> 
<p>对于这种情况，一般重试几次就好了。</p> 
<p>但是这样难免有些麻烦，有没有更好的解决方法呢？</p> 
<p>有的，可以通过延长超时时间。</p> 
<pre><code class="prism language-bash">$ pip <span class="token function">install</span> --default-timeout<span class="token operator">=</span><span class="token number">100</span> <span class="token operator">&lt;</span>packages<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="4__290"></a>4. 卸载软件包</h3> 
<p>就一条命令，不再赘述</p> 
<pre><code class="prism language-bash">$ pip uninstall pkg
</code></pre> 
<h3><a id="5__299"></a>5. 升级软件包</h3> 
<p>想要对现有的 python 进行升级，其本质上也是先从 pypi 上下载最新版本的包，再对其进行安装。所以升级也是使用 <code>pip install</code>，只不过要加一个参数 <code>--upgrade</code>。</p> 
<pre><code class="prism language-bash">$ pip <span class="token function">install</span> --upgrade pkg
</code></pre> 
<p>在升级的时候，其实还有一个不怎么用到的选项 <code>--upgrade-strategy</code>，它是用来指定升级策略。</p> 
<p>它的可选项只有两个：</p> 
<ul><li> <p><code>eager</code> ：升级全部依赖包</p> </li><li> <p><code>only-if-need</code>：只有当旧版本不能适配新的父依赖包时，才会升级。</p> </li></ul> 
<p>在 pip 10.0 版本之后，这个选项的默认值是 <code>only-if-need</code>，因此如下两种写法是一互致的。</p> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> --upgrade pkg1 
pip <span class="token function">install</span> --upgrade pkg1 --upgrade-strategy only-if-need
</code></pre> 
<h3><a id="6__324"></a>6. 配置文件</h3> 
<p>由于在使用 pip 安装一些包时，默认会使用 pip 的官方源，所以经常会报网络超时失败。</p> 
<p>常用的解决办法是，在安装包时，使用 <code>-i</code> 参数指定一个国内的镜像源。但是每次指定就很麻烦呀，还要打超长的一串字母。</p> 
<p>这时候，其实可以将这个源写进 pip 的配置文件里。以后安装的时候，就默认从你配置的这个 源里安装了。</p> 
<p>那怎么配置呢？文件文件在哪？</p> 
<p>使用<code>win+r</code> 输入 <code>%APPDATA%</code> 进入用户资料文件夹，查看有没有一个 pip 的文件夹，若没有则创建之。</p> 
<p>然后进入这个 文件夹，新建一个 <code>pip.ini</code> 的文件，内容如下</p> 
<pre><code class="prism language-bash"><span class="token punctuation">[</span>global<span class="token punctuation">]</span>
time-out<span class="token operator">=</span><span class="token number">60</span>
index-url<span class="token operator">=</span>https://pypi.tuna.tsinghua.edu.cn/simple/
<span class="token punctuation">[</span>install<span class="token punctuation">]</span>
trusted-host<span class="token operator">=</span>tsinghua.edu.cn
</code></pre> 
<p>以上几乎包含了 pip 的所有使用场景，也许有不少用法你还没有用过，不过没关系，你只要收藏本文，等到要用的时候再来查阅即可。</p> 
<hr> 
<h3><a id="_350"></a>技术交流</h3> 
<p>欢迎转载、收藏、有所收获点赞支持一下！</p> 
<p><img src="https://images2.imgbox.com/11/d2/MtLF0Y8N_o.png" alt="在这里插入图片描述"></p> 
<p>目前开通了技术交流群，群友已超过<strong>2000人</strong>，添加时最好的备注方式为：来源+兴趣方向，方便找到志同道合的朋友</p> 
<ul><li>方式①、发送如下图片至微信，长按识别，后台回复：加群；</li><li>方式②、添加微信号：<strong>dkl88191</strong>，备注：来自CSDN</li><li>方式③、微信搜索公众号：<strong>Python学习与数据挖掘</strong>，后台回复：加群</li></ul> 
<h3><a id="httpsimgblogcsdnimgcn20210617234928176pngpic_center_360"></a><img src="https://images2.imgbox.com/2c/48/e38Cw4Pp_o.png" alt="长按关注"></h3> 
<h3><a id="_362"></a>技术交流</h3> 
<p>欢迎转载、收藏、有所收获点赞支持一下！</p> 
<p><img src="https://images2.imgbox.com/f2/0c/q1Oq4M8L_o.png" alt="在这里插入图片描述"></p> 
<p>目前开通了技术交流群，群友已超过<strong>2000人</strong>，添加时最好的备注方式为：来源+兴趣方向，方便找到志同道合的朋友</p> 
<ul><li>方式①、发送如下图片至微信，长按识别，后台回复：加群；</li><li>方式②、添加微信号：<strong>dkl88191</strong>，备注：来自CSDN</li><li>方式③、微信搜索公众号：<strong>Python学习与数据挖掘</strong>，后台回复：加群</li></ul> 
<p><img src="https://images2.imgbox.com/9b/e5/uKfpqYXx_o.png" alt="长按关注"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5c9e206284a25caf4c7b46bfd5daa449/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL中创建四种不同类型索引的方法：</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23159a1e55be8f72c8b0291b477ba7a9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">飞鱼CRM如何同步数据到第三方系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>