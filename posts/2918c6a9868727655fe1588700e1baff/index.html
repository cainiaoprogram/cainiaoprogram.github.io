<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>16.Linux Bash Shell通过`read`命令读取用户输入 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="16.Linux Bash Shell通过`read`命令读取用户输入" />
<meta property="og:description" content="文章目录 Linux Shell获取用户输入处理简单输入控制等待隐藏输入从文件中读取 欢迎访问个人网络日志🌹🌹知行空间🌹🌹
Linux Shell获取用户输入 处理简单输入 shell与用户交互式输入使用的是read命令，一个简单的例子：
#!/bin/bash echo &#34;Please Input Your Name: &#34; read name echo &#34;The Input Name Is $name&#34; 执行，
bash test.sh # Please Input Your Name: # Lee # The Input Name Is Lee read命令本身支持多种选项，使用-p选项可以将输入提示符&#34;Please Input Your Name: &#34;放到read命令那一行：
#!/bin/bash echo read -p &#34;Please Input Your Name: &#34; name echo &#34;The Input Name Is $name&#34; 这样输入和提示符就都放在同一行了，
执行，
bash test.sh # Please Input Your Name: Job Lee # The Input Name Is Job Lee 不过从上面的输入可以看到，Job Lee被解析成了一个值，虽然中间有空格。这是因为read命令后面只有一个变量接收参数，如果期望接收多个参数，就在read命令后面多放几个变量即可，如果输入的参数比接收的变量多，那么多余的参数都会被放在最后一个变量中。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2918c6a9868727655fe1588700e1baff/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T23:29:20+08:00" />
<meta property="article:modified_time" content="2024-01-04T23:29:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">16.Linux Bash Shell通过`read`命令读取用户输入</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-kimbie-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Linux_Shell_8" rel="nofollow">Linux Shell获取用户输入</a></li><li><ul><li><a href="#_10" rel="nofollow">处理简单输入</a></li><li><a href="#_90" rel="nofollow">控制等待</a></li><li><a href="#_144" rel="nofollow">隐藏输入</a></li><li><a href="#_167" rel="nofollow">从文件中读取</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<p>欢迎访问个人网络日志🌹🌹<a href="https://foobarweb.net/" rel="nofollow">知行空间</a>🌹🌹</p> 
<hr> 
<h2><a id="Linux_Shell_8"></a>Linux Shell获取用户输入</h2> 
<h3><a id="_10"></a>处理简单输入</h3> 
<p><code>shell</code>与用户交互式输入使用的是<code>read</code>命令，一个简单的例子：</p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">echo</span> <span class="token string">"Please Input Your Name: "</span>
<span class="token builtin class-name">read</span> name
<span class="token builtin class-name">echo</span> <span class="token string">"The Input Name Is <span class="token variable">$name</span>"</span>

</code></pre> 
<p>执行，</p> 
<pre><code class="prism language-sh"><span class="token function">bash</span> test.sh
<span class="token comment"># Please Input Your Name: </span>
<span class="token comment"># Lee</span>
<span class="token comment"># The Input Name Is Lee</span>
</code></pre> 
<p><code>read</code>命令本身支持多种选项，使用<code>-p</code>选项可以将输入提示符<code>"Please Input Your Name: "</code>放到<code>read</code>命令那一行：</p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> 
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Please Input Your Name: "</span> name
<span class="token builtin class-name">echo</span> <span class="token string">"The Input Name Is <span class="token variable">$name</span>"</span>
</code></pre> 
<p>这样<strong>输入和提示符就都放在同一行</strong>了，<br> 执行，</p> 
<pre><code class="prism language-sh"><span class="token function">bash</span> test.sh
<span class="token comment"># Please Input Your Name: Job Lee</span>
<span class="token comment"># The Input Name Is Job Lee</span>
</code></pre> 
<p>不过从上面的输入可以看到，<code>Job Lee</code>被解析成了一个值，虽然中间有空格。这是因为<code>read</code>命令后面只有一个变量接收参数，<strong>如果期望接收多个参数，就在<code>read</code>命令后面多放几个变量即可</strong>，<strong>如果输入的参数比接收的变量多，那么多余的参数都会被放在最后一个变量中。</strong></p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Input Values:"</span> value1 value2 value3
<span class="token builtin class-name">echo</span> <span class="token string">"The Value1 is <span class="token variable">$value1</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"The Value2 is <span class="token variable">$value2</span>"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"The value3 is <span class="token variable">$value3</span>"</span>

</code></pre> 
<p>执行，</p> 
<pre><code class="prism language-sh"><span class="token function">bash</span> test.sh
<span class="token comment"># Input Values:value1 value2 value3 value4 value5</span>
<span class="token comment"># The Value1 is value1</span>
<span class="token comment"># The Value2 is value2</span>
<span class="token comment"># The value3 is value3 value4 value5</span>
</code></pre> 
<p><strong><code>read</code>命令后面也可以不跟参数，此时用户输入的值就都放在环境变量<code>REPLY</code>中。</strong></p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>

<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Input Values:"</span>
<span class="token builtin class-name">echo</span> <span class="token string">"The Values are <span class="token environment constant">$REPLY</span>"</span>
</code></pre> 
<p>执行，</p> 
<pre><code class="prism language-sh"><span class="token function">bash</span> test.sh

<span class="token comment"># Input Values:v1 v2 v3</span>
<span class="token comment"># The Values are v1 v2 v3</span>
</code></pre> 
<h3><a id="_90"></a>控制等待</h3> 
<p>**<code>read</code>命令支持<code>-t</code>参数,控制等待输入时间,单位是秒数,如果超时,<code>read</code> 命令会返回一个非零退出状态码。**这通常可以用于<code>if</code>和<code>while</code>的条件。</p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>

<span class="token keyword">if</span> <span class="token builtin class-name">read</span> <span class="token parameter variable">-t</span> <span class="token number">3</span> <span class="token parameter variable">-p</span> <span class="token string">"Input Value: "</span> value<span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"The Input Value Is <span class="token variable">$value</span>"</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Timeout."</span>
<span class="token keyword">fi</span>
</code></pre> 
<p>执行，</p> 
<pre><code class="prism language-sh"><span class="token function">bash</span> test.sh
<span class="token comment"># Input Value: 1 </span>
<span class="token comment"># The Input Value Is 1</span>
<span class="token function">bash</span> test.sh
<span class="token comment"># Input Value: Timeout.</span>
</code></pre> 
<p>也可以不对输入过程计时，而是让 <code>read</code> 命令来统计输入的字符数。当输入的字符达到预设<br> 的字符数时，就自动退出，将输入的数据赋给变量。</p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>
<span class="token comment">#</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-n1</span> <span class="token parameter variable">-p</span> <span class="token string">"Do you want to continue [Y/N]? "</span> answer
<span class="token keyword">case</span> <span class="token variable">$answer</span> <span class="token keyword">in</span>
    Y <span class="token operator">|</span> y<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"fine, continue on…"</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    N <span class="token operator">|</span> n<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span>
        <span class="token builtin class-name">echo</span> OK, goodbye
    <span class="token builtin class-name">exit</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">esac</span>
<span class="token builtin class-name">echo</span> <span class="token string">"This is the end of the script"</span>
</code></pre> 
<p>执行，</p> 
<pre><code class="prism language-sh"><span class="token function">bash</span> test.sh
<span class="token comment"># Do you want to continue [Y/N]? Y</span>
<span class="token comment"># fine, continue on…</span>
<span class="token comment"># This is the end of the script</span>
</code></pre> 
<p>本例中将 <code>-n</code> 选项和值 <code>1</code> 一起使用，告诉 <code>read</code> 命令在接受单个字符后退出。只要按下单个字符回答后,<code>read</code> 命令就会接受输入并将它传给变量，无需按回车键。</p> 
<p>通过<code>read --help</code>命令可以查看到<code>read</code>支持的选项参数<code>-n nchars</code>读取 <code>nchars</code> 个字符之后返回，而不是等到读取换行符。</p> 
<h3><a id="_144"></a>隐藏输入</h3> 
<p>上面介绍的输入值都会实时显示在屏幕上，在输入密码等隐私数据时，通常希望输入内容能够隐藏。</p> 
<p><code>-s</code>选项可以避免在 <code>read</code> 命令中输入的数据出现在显示器上（实际上，数据会被显示，只是<br> <code>read</code> 命令会将文本颜色设成跟背景色一样）。</p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-s</span> <span class="token parameter variable">-p</span> <span class="token string">"Enter your password: "</span> pass
<span class="token builtin class-name">echo</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Is your password really <span class="token variable">$pass</span>? "</span>
</code></pre> 
<p>执行，</p> 
<pre><code class="prism language-sh"><span class="token function">bash</span> test.sh

<span class="token comment"># Enter your password: </span>
<span class="token comment"># Is your password really yhih? </span>
</code></pre> 
<h3><a id="_167"></a>从文件中读取</h3> 
<p>也可以用 <code>read</code>命令来读取<code>Linux</code>系统上文件里保存的数据。</p> 
<p>每次调用 <code>read</code> 命令，它都<br> 会从文件中读取一行文本。当文件中再没有内容时， <code>read</code> 命令会退出并返回非零退出状态码。</p> 
<p>最难的部分是将文件中的数据传给 <code>read</code> 命令。最常见的方法是对文件使用 <code>cat</code> 命令，将<br> 结果通过管道直接传给含有 <code>read</code> 命令的 <code>while</code> 命令。</p> 
<pre><code class="prism language-sh"><span class="token shebang important">#!/bin/bash</span>
<span class="token assign-left variable">count</span><span class="token operator">=</span><span class="token number">1</span>
<span class="token function">cat</span> <span class="token builtin class-name">test</span> <span class="token operator">|</span> <span class="token keyword">while</span> <span class="token builtin class-name">read</span> line
<span class="token keyword">do</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Line <span class="token variable">$count</span>: <span class="token variable">$line</span>"</span>
    <span class="token assign-left variable">count</span><span class="token operator">=</span>$<span class="token punctuation">[</span> <span class="token variable">$count</span> + <span class="token number">1</span><span class="token punctuation">]</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Finished processing the file"</span>
</code></pre> 
<p>执行，</p> 
<pre><code class="prism language-sh"><span class="token function">cat</span> <span class="token builtin class-name">test</span>
<span class="token comment"># this is line1</span>
<span class="token comment"># this is line2</span>

<span class="token function">bash</span> test.sh
<span class="token comment"># Line 1: this is line1</span>
<span class="token comment"># Line 2: this is line2</span>
<span class="token comment"># Line 3: </span>
<span class="token comment"># Finished processing the file</span>
</code></pre> 
<p><code>while</code> 循环会持续通过 <code>read</code> 命令处理文件中的行，直到 <code>read</code> 命令以非零退出状态码退出。</p> 
<p><br> </p> 
<hr> 
<p>欢迎访问个人网络日志🌹🌹<a href="https://foobarweb.net/" rel="nofollow">知行空间</a>🌹🌹</p> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fa613db33845e063dfaf9a116634e61e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MySQL：约束&amp;主键&amp;唯一键</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d262fa61cb124cfd748fddef2aa84b7b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机毕业设计 基于Java的供应商管理系统的设计与实现 Java实战项目 附源码&#43;文档&#43;视频讲解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>