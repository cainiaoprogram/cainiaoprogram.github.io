<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Mybatis】我抄袭了Mybatis，手写一套MyMybatis框架：编写一个引入MyMybatis框架的正常项目 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Mybatis】我抄袭了Mybatis，手写一套MyMybatis框架：编写一个引入MyMybatis框架的正常项目" />
<meta property="og:description" content="上一篇文章中，我们学习了使用mybatis框架连接mysql。在这篇文章中，我们将聚焦于我们的调用方，即相应的实际项目，其中包含了对mymybatis框架的引用。以一个常见而又典型的例子来说明这一点——制作一款学生管理系统（伪）。这个所谓的“项目”显然无法像之前那样，依靠创建jdbc连接并且一条一条地编写SQL语句来解决问题，因为任何一项正常的开发流程都不应该如此生硬。
我们需要根据实际情况，创造性地制定并设置一份含有相关内容的文档文件（也被称为“配置文件”）。其中，包含了各种数据库的具体参数信息。接下来，我们只需专注于编写具体的功能性代码以及正确传递所需的参数，并在这个基础上编写适当的SQL语句即可，与我们平常使用mybatis框架的场景无异，即和上一篇文章无太大的差别。
首先我们需要创建一个正常的maven项目。这里我们就叫做：my-mybatis-demo
正常的项目都会像我们这样引入一个jar包在pom文件中。
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;com.masiyi&lt;/groupId&gt; &lt;artifactId&gt;my-mybatis&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;groupId&gt;com.masiyi&lt;/groupId&gt; &lt;artifactId&gt;my-mybatis-demo&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.masiyi&lt;/groupId&gt; &lt;artifactId&gt;my-mybatis-core&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/project&gt; 这里面我们先暂且取名叫做my-mybatis-core，最基础的我们要有一个对应表数据结构的一个实体类。就是我们在上一篇中的user表。这里我们使用驼峰命名法。
package com.masiyi.entity; import lombok.Data; @Data public class User { private Integer id; private String name; private Integer age; } 这里的@Data是lombok中的注解，待会我们会在我们框架中引入，我们先不管。
之后我们需要有一个接口去定义我们的方法以实现SQL的编写。这里我们就叫userdao，里面定义了两个方法，一个是findAll()查询全部，一个是findById(Integer id)根据id查询。返回值则全是 List&lt;User&gt;。
package com.masiyi.dao; import com.masiyi.entity.User; import java.util.List; public interface UserDao { /** * 查询全部 * @return */ List&lt;User&gt; findAll(); /** * 根据id查询 * @param id * @return */ List&lt;User&gt; findById(Integer id); } 用过mybatis框架的同学肯定知道每一个dao接口肯定是有一个xml文件去对应的。而xml文件里面就是写我们sql的地方,这里面我们取名叫做UserMapper." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/dca4c93436da461836af1bf3611a4144/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T20:12:30+08:00" />
<meta property="article:modified_time" content="2024-01-04T20:12:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Mybatis】我抄袭了Mybatis，手写一套MyMybatis框架：编写一个引入MyMybatis框架的正常项目</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>上一篇文章中，我们学习了使用mybatis框架连接mysql。在这篇文章中，我们将聚焦于我们的调用方，即相应的实际项目，其中包含了对<code>mymybatis</code>框架的引用。以一个常见而又典型的例子来说明这一点——制作一款学生管理系统（<strong>伪</strong>）。这个所谓的“项目”显然无法像之前那样，依靠创建jdbc连接并且一条一条地编写SQL语句来解决问题，因为任何一项正常的开发流程都不应该如此生硬。</p> 
<p>我们需要根据实际情况，创造性地制定并设置一份含有相关内容的文档文件（也被称为“<strong>配置文件</strong>”）。其中，包含了各种数据库的具体参数信息。接下来，我们只需专注于编写具体的功能性代码以及正确传递所需的参数，并在这个基础上编写适当的SQL语句即可，与我们平常使用<code>mybatis</code>框架的场景无异，即和上一篇文章无太大的差别。</p> 
<p>首先我们需要创建一个正常的maven项目。这里我们就叫做：<code>my-mybatis-demo</code></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/bd/83/c08P1M2b_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>正常的项目都会像我们这样引入一个jar包在pom文件中。</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/ce/2c/N97uKyQf_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>project xmlns<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0"</span>
         xmlns<span class="token operator">:</span>xsi<span class="token operator">=</span><span class="token string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         xsi<span class="token operator">:</span>schemaLocation<span class="token operator">=</span><span class="token string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>modelVersion<span class="token punctuation">&gt;</span></span><span class="token number">4.0</span><span class="token number">.0</span><span class="token operator">&lt;</span><span class="token operator">/</span>modelVersion<span class="token operator">&gt;</span>


    <span class="token generics"><span class="token punctuation">&lt;</span>parent<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>masiyi<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>my<span class="token operator">-</span>mybatis<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>parent<span class="token operator">&gt;</span>


    <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>masiyi<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>my<span class="token operator">-</span>mybatis<span class="token operator">-</span>demo<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>

    <span class="token generics"><span class="token punctuation">&lt;</span>dependencies<span class="token punctuation">&gt;</span></span>
        <span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            <span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>com<span class="token punctuation">.</span>masiyi<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>my<span class="token operator">-</span>mybatis<span class="token operator">-</span>core<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
            <span class="token generics"><span class="token punctuation">&lt;</span>version<span class="token punctuation">&gt;</span></span><span class="token number">1.0</span><span class="token operator">-</span><span class="token constant">SNAPSHOT</span><span class="token operator">&lt;</span><span class="token operator">/</span>version<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dependencies<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>project<span class="token operator">&gt;</span>
</code></pre> 
<p>这里面我们先暂且取名叫做<code>my-mybatis-core</code>，最基础的我们要有一个对应表数据结构的一个实体类。就是我们在上一篇中的user表。这里我们使用驼峰命名法。</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>entity</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>这里的@Data是lombok中的注解，待会我们会在我们框架中引入，我们先不管。</p> 
<p>之后我们需要有一个接口去定义我们的方法以实现SQL的编写。这里我们就叫<code>userdao</code>，里面定义了两个方法，一个是<code>findAll()</code>查询全部，一个是<code>findById(Integer id)</code>根据id查询。返回值则全是<code> List&lt;User&gt;</code>。</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>dao</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 查询全部
     * @return
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 根据id查询
     * @param id
     * @return
     */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

</code></pre> 
<p>用过mybatis框架的同学肯定知道每一个dao接口肯定是有一个xml文件去对应的。而xml文件里面就是写我们sql的地方,这里面我们取名叫做<code>UserMapper.xml</code>。其中我们可以自定义一个类似mybatis中的标签，叫什么都无所谓，但是方别大家与mybatis相比较，我们还是使用mybatis的命名方式取名叫<code>mapper </code>，<code>namespace="com.masiyi.dao.UserDao"</code>这里就是对应着<code>UserDao</code>接口的类全路径。</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span>mapper namespace<span class="token operator">=</span><span class="token string">"com.masiyi.dao.UserDao"</span><span class="token operator">&gt;</span>


    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"findAll"</span> resultType<span class="token operator">=</span><span class="token string">"com.masiyi.entity.User"</span><span class="token operator">&gt;</span>
        select <span class="token operator">*</span> from user
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>select id<span class="token operator">=</span><span class="token string">"findById"</span> resultType<span class="token operator">=</span><span class="token string">"com.masiyi.entity.User"</span> parameterType<span class="token operator">=</span><span class="token string">"java.lang.Integer"</span><span class="token operator">&gt;</span>
        select <span class="token operator">*</span> from user where id <span class="token operator">=</span> #<span class="token punctuation">{<!-- --></span>id<span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
</code></pre> 
<p>这里面的<code> &lt;select&gt;</code>标签也是可以自定义比如叫<code>myselect</code>都行，最后我们在自定义框架中解析就行了，里面也和mybatis一样使用一个<code>id</code>属性来对应着里面的方法，最后写一个<code>resultType</code>返回值和<code>parameterType</code>传进来的参数值。</p> 
<p>在对应的select标签中我们写上我们的sql，就像上面我们的代码里面的sql一样就行了。</p> 
<p>除了写sql的xml文件，我们还需要一个写我们数据库信息的配置文件。这里我们就叫他<code>myMybatisConfig.xml</code></p> 
<pre><code class="prism language-java"><span class="token generics"><span class="token punctuation">&lt;</span>configuration<span class="token punctuation">&gt;</span></span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">1.</span>配置数据库信息<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>dataSource<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"driverClassName"</span> value<span class="token operator">=</span><span class="token string">"com.mysql.jdbc.Driver"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"url"</span> value<span class="token operator">=</span><span class="token string">"jdbc:mysql://localhost:3306/test_ob"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"username"</span> value<span class="token operator">=</span><span class="token string">"rootmsy"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"password"</span> value<span class="token operator">=</span><span class="token string">"root"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>dataSource<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token number">2.</span>引入映射配置文件<span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token generics"><span class="token punctuation">&lt;</span>mappers<span class="token punctuation">&gt;</span></span>
        <span class="token operator">&lt;</span>mapper resource<span class="token operator">=</span><span class="token string">"mapper/UserMapper.xml"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>mapper resource<span class="token operator">=</span><span class="token string">"mapper/UserMapperCopy.xml"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>mapper<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>mappers<span class="token operator">&gt;</span>


<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>配置数据库信息</strong>，里面我们主要写的也是和mybatis一模一样的：<code>驱动类，url地址，用户名，密码</code>.注意这里的名字和里面的标签也可以随便写，我们也使用name和value值做一个区分。到时候我们自己再写框架的时候，取对应的数据就行了，这里只是做一个示范，我们暂时就叫我们上面的名字。</p> 
<p><strong>引入映射配置文件</strong>,这里我们把我们上面装sql的xml文件给拿过来，假如我们的框架有很多的mapper文件，我都将他们引入进来，注意这里都是写在<code>resource</code>目录下面。就像我们现在的项目架构一样：</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/2d/28/ma4sHw6e_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>最后我们可以编写一个测试文件，来测试我们的自己写的框架。</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>masiyi</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>dao<span class="token punctuation">.</span></span><span class="token class-name">UserDao</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>executor<span class="token punctuation">.</span></span><span class="token class-name">SimpleSqlSession</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Resources</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>parse<span class="token punctuation">.</span></span><span class="token class-name">ConfigParse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>masiyi<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">MyMybatisUtil</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @Author masiyi
 * @Date 2023/11/10
 * @PackageName:com.masiyi
 * @ClassName: MybatisTest
 * @Description: TODO
 * @Version 1.0
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisTest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token class-name">InputStream</span> resourceAsSteam <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"myMybatisConfig.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfigParse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>resourceAsSteam<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SimpleSqlSession</span> simpleSqlSession <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleSqlSession</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> simpleSqlSession<span class="token punctuation">.</span><span class="token function">newProxyClass</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        userDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 释放资源</span>
        simpleSqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token punctuation">}</span>

</code></pre> 
<p>这里是使用MyMybatis框架进行数据库操作，给大家做一个解释。</p> 
<p>首先，通过Resources.getResourceAsStream(“myMybatisConfig.xml”)方法获取了一个名为myMybatisConfig.xml的配置文件的输入流。这个配置文件包含了MyMybatis框架的相关配置信息，比如数据库连接信息、映射文件等。</p> 
<pre><code class="prism language-java">  <span class="token class-name">InputStream</span> resourceAsSteam <span class="token operator">=</span> <span class="token class-name">Resources</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"myMybatisConfig.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>接下来，通过ConfigParse().parse(resourceAsSteam)方法将配置文件的输入流解析成一个Configuration对象。Configuration对象包含了框架的配置信息，比如数据库连接信息、映射文件等。</p> 
<pre><code class="prism language-java">  <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConfigParse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>resourceAsSteam<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后，创建了一个SimpleSqlSession对象，将上一步解析得到的Configuration对象传入。SimpleSqlSession是MyMybatis框架中的核心类，它负责管理数据库连接和执行SQL语句。</p> 
<pre><code class="prism language-java">  <span class="token class-name">SimpleSqlSession</span> simpleSqlSession <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleSqlSession</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>接着，通过simpleSqlSession.newProxyClass(UserDao.class)方法创建了一个UserDao接口的代理类。代理类是MyMybatis框架根据接口定义和映射文件自动生成的，它封装了数据库操作的具体实现。</p> 
<pre><code class="prism language-java"> <span class="token class-name">UserDao</span> userDao <span class="token operator">=</span> simpleSqlSession<span class="token punctuation">.</span><span class="token function">newProxyClass</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>最后，通过调用userDao.findAll()方法执行数据库查询操作，并使用forEach(System.out::println)打印查询结果。</p> 
<pre><code class="prism language-java"> userDao<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token operator">::</span><span class="token function">println</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>最后，调用simpleSqlSession.close()方法释放资源，关闭数据库连接。</p> 
<pre><code class="prism language-java">  simpleSqlSession<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>编写几个重要的文件完成之后，我们项目的情况结构大体就是这样：</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/66/a8/vyOw9nZA_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>今天这篇文章我们就先写到这里。下一篇文章我们开始根据测试类里面的方法去构建我们的自定义框架<code>MyMybatis</code>，最后给大家看一下我们这个框架实现的效果：</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/85/3d/XqSwKP7C_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p><strong>findById（）</strong> 方法</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/33/a4/vfDaXIjc_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>数据库里面的数据：</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/d0/5d/3hfsbOiU_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>可以看到和我们上一篇文章里面达到的效果是一样的。如果说大家对这篇文章有兴趣的话，大家可以先点一波关注，最后我们在下一篇文章与大家再见。</p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/dd/a4/DvuN67W2_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p>另外如果对Elastic Search感兴趣的话，推荐一下我的专栏，这篇专栏介绍了Elasticsearch的Restful API的入门指南。学习如何使用API进行索引、搜索和分析，包括创建索引、定义映射、添加文档、执行查询等。通过实例和代码片段，快速上手Elasticsearch的Restful API，构建强大的搜索功能。感谢大家支持：</p> 
<p><a href="https://blog.csdn.net/csdnerm/category_12497418.html">Elastic Search的RestFul API入门<br> </a></p> 
<blockquote> 
 <p><img src="https://images2.imgbox.com/ba/e2/GzkrEhYd_o.jpg" alt="在这里插入图片描述"></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9d864954579aa50145146ab8c97a388/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">批量插入数据库数据脚本</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/76ce650c5bfdf6b007471a8110e68fdd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux安全之iptables的target</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>