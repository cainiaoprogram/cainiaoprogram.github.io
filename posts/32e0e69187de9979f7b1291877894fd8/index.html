<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Linux中搭建Zabbix监控环境（MariaDB&#43;httpd&#43;Zabbix） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在Linux中搭建Zabbix监控环境（MariaDB&#43;httpd&#43;Zabbix）" />
<meta property="og:description" content="在公网IP为x.x.x.x，安装CentOS8（Alibaba Cloud Linux 3.2104 LTS 64位）系统的服务器上进行zabbix-server安装。
在公网IP为y.y.y.y，安装CentOS8（Alibaba Cloud Linux 3.2104 LTS 64位）系统的服务器上进行zabbix-agent安装。
mariadb-10.5&#43;httpd-2.4安装在公网IP为x.x.x.x的服务器上。yum安装的软件版本：mariadb-10.5&#43;httpd-2.4&#43;zabbix-5.0。
httpd安装 第一步，安装httpd并开启httpd服务。（Web中间件模块）
命令：yum -y install httpd
systemctl start httpd
systemctl enable httpd
# 查看apache服务状态是否为“Active: active (running)”
systemctl status httpd
systemctl stop httpd
systemctl restart httpd
第二步，启动后需要关闭服务器防火墙。
命令：systemctl stop firewalld
第三步，测试httpd服务是否安装成功。
浏览器访问: PHP 7.4.6 - phpinfo()，若页面显示“Welcome to HTTP Server Test Page!”，则说明httpd服务安装成功。
MariaDB配置 linux系统版本：CentOS8 64位
安装源文件版本：mariadb-10.5
第一步，安装前，检测系统是否自带安装MySQL。
命令：rpm -qa | grep mysql
若结果显示类似“mysql-libs-5.1.52-1.el6_0.1.x86_64”，则可以选择进行卸载。
# 普通删除模式
rpm -e mysql-libs-5.1.52-1.el6_0.1.x86_64" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/32e0e69187de9979f7b1291877894fd8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-21T11:42:26+08:00" />
<meta property="article:modified_time" content="2022-11-21T11:42:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Linux中搭建Zabbix监控环境（MariaDB&#43;httpd&#43;Zabbix）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:.0001pt;text-align:left;">在公网IP为x.x.x.x，安装CentOS8（Alibaba Cloud Linux  3.2104 LTS 64位）系统的服务器上进行zabbix-server安装。</p> 
<p style="margin-left:.0001pt;text-align:left;">在公网IP为y.y.y.y，安装CentOS8（Alibaba Cloud Linux  3.2104 LTS 64位）系统的服务器上进行zabbix-agent安装。</p> 
<p style="margin-left:.0001pt;text-align:left;">mariadb-10.5+httpd-2.4安装在公网IP为x.x.x.x的服务器上。yum安装的软件版本：mariadb-10.5+httpd-2.4+zabbix-5.0。</p> 
<h3 style="text-align:left;"><strong><strong><strong>httpd安装</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第一步，安装httpd并开启httpd服务。（</strong></strong><strong><strong>Web中间件模块</strong></strong><strong><strong>）</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：yum -y install httpd</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl start httpd</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl enable httpd</p> 
<p style="margin-left:.0001pt;text-align:left;"># 查看apache服务状态是否为“Active: active (running)”</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl status httpd</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl stop httpd</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl restart httpd</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第二步，启动后需要关闭服务器防火墙。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：systemctl stop firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第三步，测试httpd服务是否安装成功。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">浏览器访问: <a href="http://120.55.73.145/" rel="nofollow" title="PHP 7.4.6 - phpinfo()">PHP 7.4.6 - phpinfo()</a>，若页面显示“Welcome to HTTP Server Test Page!”，则说明httpd服务安装成功。</p> 
<h3 style="text-align:left;"><strong><strong><strong>MariaDB配置</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;">linux系统版本：CentOS8 64位</p> 
<p style="margin-left:.0001pt;text-align:left;">安装源文件版本：mariadb-10.5</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第一步，安装前，检测系统是否自带安装MySQL。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：rpm -qa | grep mysql</p> 
<p style="margin-left:.0001pt;text-align:left;">若结果显示类似“mysql-libs-5.1.52-1.el6_0.1.x86_64”，则可以选择进行卸载。</p> 
<p style="margin-left:.0001pt;text-align:left;"># 普通删除模式</p> 
<p style="margin-left:.0001pt;text-align:left;">rpm -e mysql-libs-5.1.52-1.el6_0.1.x86_64</p> 
<p style="margin-left:.0001pt;text-align:left;"># 如果使用普通删除模式命令删除时，提示有依赖的其它文件，则用强力删除模式命令对其进行强力删除</p> 
<p style="margin-left:.0001pt;text-align:left;">rpm -e --nodeps mysql-libs-5.1.52-1.el6_0.1.x86_64</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第二步，检查否存在mariadb数据库。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：rpm -qa | grep mariadb</p> 
<p style="margin-left:.0001pt;text-align:left;">若结果显示类似“mariadb-libs-5.5.56-2.el7.x86_64”，则可以选择进行卸载。</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：rpm -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64</p> 
<h3 style="text-align:left;"><strong><strong><strong>MariaDB</strong></strong><strong><strong>安装和初始化</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第一步，安装MariaDB。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：sudo yum install mariadb-server mariadb</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第二步，启动数据库并设置为开机自启动</strong></strong><strong><strong>。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：sudo systemctl start mariadb</p> 
<p style="margin-left:.0001pt;text-align:left;">sudo systemctl enable mariadb</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第三步，初始化数据库根管理员账号root。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：mysqladmin -u root password "123456"</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第四步，测试登录数据库。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：mysql -u root -p123456</p> 
<p style="margin-left:.0001pt;text-align:left;">若结果显示“MariaDB [(none)]&gt; ”，则说明数据库登录成功了。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第五步，</strong></strong><strong><strong>数据库安装设置，重置数据库root账号密码，执行该命令前必须开启mysql服务。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：mysql_secure_installation</p> 
<pre><code>若结果显示“Enter current password for root (enter for none):”，

则输入当前root账号密码，刚安装默认为空，直接回车即可。

“Set root password? [Y/n]”，输入y回车。

“New password:”，输入密码。

“Re-enter new password:”，重复输入密码。

“Remove anonymous users? [Y/n]”，输入y回车。

“Disallow root login remotely? [Y/n]”，输入y回车。

“Remove test database and access to it? [Y/n]”，输入y回车。

“Reload privilege tables now? [Y/n]”，输入y回车。</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第六步，</strong></strong><strong><strong>登陆测试，执行登录命令并输入密码。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：mysql -uroot -p</p> 
<p style="margin-left:.0001pt;text-align:left;">输入登录密码“123456”，进入MariaDB shell状态。</p> 
<h3 style="text-align:left;"><strong><strong><strong>Zabbix服务器端安装</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第一步，登录网址：</strong></strong><a href="https://www.zabbix.com/download" rel="nofollow" title="Download and install Zabbix">Download and install Zabbix</a><strong><strong>，</strong></strong><strong><strong>按照下图的示意以及官方的安装步骤进行软件安装。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:center;"><strong><strong><img alt="" src="https://images2.imgbox.com/ac/6b/b8CfwqX4_o.png"></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第二步，安装Zabbix仓库（Install Zabbix repository）。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"># 若存在旧版残留需提前卸载</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：rpm -qa | grep zabbix</p> 
<p style="margin-left:.0001pt;text-align:left;">若结果显示类似“zabbix-release-4.4-1.el8.noarch”，则可以选择进行卸载。</p> 
<p style="margin-left:.0001pt;text-align:left;"># 普通删除模式</p> 
<p style="margin-left:.0001pt;text-align:left;">rpm -e zabbix-release-4.4-1.el8.noarch</p> 
<p style="margin-left:.0001pt;text-align:left;"># 如果使用普通删除模式命令删除时，提示有依赖的其它文件，则用强力删除模式命令对其进行强力删除</p> 
<p style="margin-left:.0001pt;text-align:left;">rpm -e --nodeps zabbix-release-4.4-1.el8.noarch</p> 
<p style="margin-left:.0001pt;text-align:left;"># 安装zabbix的rpm</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：rpm -Uvh  <a href="https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm" rel="nofollow" title="https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm">https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm</a></p> 
<p style="margin-left:.0001pt;text-align:left;"># 重建缓存</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：yum clean all &amp;&amp; yum makecache</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第三步，安装Zabbix服务端、前端服务和代理端（Install Zabbix server, frontend, agent）。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：<span style="color:#ff0000;">yum -y install zabbix-server-mysql zabbix-web-mysql zabbix-apache-conf zabbix-agent</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第四步，创建和配置Zabbix数据库。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：mysql -uroot -p123456</p> 
<p style="margin-left:.0001pt;text-align:left;">MariaDB [(none)]&gt; create database zabbix character set utf8 collate utf8_bin;</p> 
<p style="margin-left:.0001pt;text-align:left;">MariaDB [(none)]&gt; create user zabbix@localhost identified by '<span style="color:#ff0000;">zabbix</span><span style="color:#ff0000;">123</span>';</p> 
<p style="margin-left:.0001pt;text-align:left;">MariaDB [(none)]&gt; grant all privileges on zabbix.* to zabbix@localhost;</p> 
<p style="margin-left:.0001pt;text-align:left;">MariaDB [(none)]&gt; flush privileges;</p> 
<p style="margin-left:.0001pt;text-align:left;">MariaDB [(none)]&gt; quit;</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第五步，导入Zabbix数据库结构。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：zcat /usr/share/doc/zabbix-server-mysql*/create.sql.gz | mysql -u zabbix -p <span style="color:#ff0000;">zabbix</span></p> 
<p style="margin-left:.0001pt;text-align:left;">注意：最后的<span style="color:#ff0000;">zabbix</span>千万不要删掉。</p> 
<p style="margin-left:.0001pt;text-align:left;">输入密码“<span style="color:#ff0000;">zabbix</span><span style="color:#ff0000;">123</span>”。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第六步，设置Zabbix配置文件参数。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">编辑/etc/zabbix/zabbix_server.conf文件，把</p> 
<p style="margin-left:.0001pt;text-align:left;">“<span style="color:#ff0000;">DBHost=localhost</span>”前面的注释符号去掉，</p> 
<p style="margin-left:.0001pt;text-align:left;">“# DBPassword=password”修改为“<span style="color:#ff0000;">DBPassword=</span><span style="color:#ff0000;">zabbix123</span>”。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第七步，设置并启用Web中间件模块。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">编辑/etc/php-fpm.d/zabbix.conf文件，把</p> 
<p style="margin-left:.0001pt;text-align:left;">"; php_value[date.timezone] = Europe/Riga" 改为</p> 
<p style="margin-left:.0001pt;text-align:left;">"<span style="color:#ff0000;">php_value[date.timezone] = Asia/Shanghai</span>" 。</p> 
<p style="margin-left:.0001pt;text-align:left;">注意：去掉 ";" 表示取消注释该行代码。</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第八步，</strong></strong><strong><strong>关闭selinux和防火墙。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：<span style="color:#ff0000;">sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config</span></p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl stop firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl disable --now firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第九步，启动Zabbix相关服务，并设置为开启自启动。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：systemctl start zabbix-server zabbix-agent httpd php-fpm</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl enable zabbix-server zabbix-agent httpd php-fpm</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第十步，设置防火墙端口，允许"80"、"10051"、"10050"端口（Zabbix 默认端口）访问服务器。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：systemctl start firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;">firewall-cmd --zone=public --add-port=10051/tcp --permanent</p> 
<p style="margin-left:.0001pt;text-align:left;">firewall-cmd --zone=public --add-port=10050/tcp --permanent</p> 
<p style="margin-left:.0001pt;text-align:left;">firewall-cmd --zone=public --add-port=80/tcp --permanent</p> 
<p style="margin-left:.0001pt;text-align:left;">firewall-cmd --reload</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl stop firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第十一步，重启服务器。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：init 6</p> 
<h3 style="text-align:left;"><strong><strong><strong>Zabbix服务器端配置</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第一步，</strong></strong><strong><strong>访问</strong></strong><strong><u><span style="color:#0000ff;"><strong><u>http://</u></strong></span></u></strong><strong><u><span style="color:#0000ff;"><strong><u>x.x.x.x</u></strong></span></u></strong><strong><u><span style="color:#0000ff;"><strong><u>/zabbix/setup.php</u></strong></span></u></strong><strong><strong>。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">在浏览器访问<u><span style="color:#0000ff;"><u>http://</u></span></u><u><span style="color:#0000ff;"><u>x.x.x.x</u></span></u><u><span style="color:#0000ff;"><u>/zabbix/setup.php</u></span></u>即进入zabbix网页安装模式。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/ab/cf/aahIRIGf_o.png"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;">然后点击“Next step”，输入设置好的数据库密码“<span style="color:#ff0000;">zabbix123</span>”。</p> 
<p style="margin-left:.0001pt;text-align:left;">“Zabbix server name”填写“webserver”。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/b1/e8/8JsNxnZ0_o.png"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;">一直点击“finish”，等出现登录界面就可以了。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/97/c4/wbeoOH0W_o.png"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;">进入登陆界面，初始登录账号是“Admin”（<span style="color:#ff0000;">注意A大写</span>）,初始登录密码是“zabbix”。</p> 
<p style="margin-left:.0001pt;text-align:left;">通过命令：mysql -uroot -pzabbix123 -e "select * from zabbix.users\G"查看具体情况。</p> 
<p style="margin-left:.0001pt;text-align:left;">Zabbix的登录界面网址：<a href="http://120.27.134.193/zabbix/" rel="nofollow" title="http://x.x.x.x/zabbix/">http://x.x.x.x/zabbix/</a></p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/03/e9/1hBb9psM_o.png"></p> 
<p style="margin-left:.0001pt;"><img alt="" src="https://images2.imgbox.com/2f/f4/dnUEKsoq_o.png"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;">设置中文：点击左下角的“user settings”,选择“zh_CN”即可。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/9d/f1/2oIl7Ds3_o.png"></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/55/eb/p8bYCRgL_o.png"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<h3 style="text-align:left;"><strong><strong><strong>Zabbix客户端安装和配置</strong></strong><strong><strong>（安装方式与服务端相同）</strong></strong></strong></h3> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第一步，登录网址：</strong></strong><a href="https://www.zabbix.com/download" rel="nofollow" title="Download and install Zabbix">Download and install Zabbix</a><strong><strong>，</strong></strong><strong><strong>按照下图的示意以及官方的安装步骤进行软件安装。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:center;"><strong><strong><img alt="" src="https://images2.imgbox.com/93/0f/IjtdIy2A_o.png"></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第二步，安装Zabbix仓库。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"># 若存在旧版残留需提前卸载</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：rpm -qa | grep zabbix</p> 
<p style="margin-left:.0001pt;text-align:left;">若结果显示类似“zabbix-release-4.4-1.el8.noarch”，则可以选择进行卸载。</p> 
<p style="margin-left:.0001pt;text-align:left;"># 普通删除模式</p> 
<p style="margin-left:.0001pt;text-align:left;">rpm -e zabbix-release-4.4-1.el8.noarch</p> 
<p style="margin-left:.0001pt;text-align:left;"># 如果使用普通删除模式命令删除时，提示有依赖的其它文件，则用强力删除模式命令对其进行强力删除</p> 
<p style="margin-left:.0001pt;text-align:left;">rpm -e --nodeps zabbix-release-4.4-1.el8.noarch</p> 
<p style="margin-left:.0001pt;text-align:left;"># 安装zabbix的rpm</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：rpm -Uvh <a href="https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm" rel="nofollow" title="https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm">https://repo.zabbix.com/zabbix/5.0/rhel/8/x86_64/zabbix-release-5.0-1.el8.noarch.rpm</a></p> 
<p style="margin-left:.0001pt;text-align:left;"># 重建缓存</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：yum clean all &amp;&amp; yum makecache</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第三步，安装Zabbix代理端。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：yum -y install zabbix-agent</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第四步，设置Zabbix配置文件参数。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">编辑/etc/zabbix/zabbix_agentd.conf文件，得到下面的代码：</p> 
<pre><code># 日志文件路径

LogFile=/var/log/zabbix/zabbix_agentd.log

# 运行时文件路径

PidFile=/var/run/zabbix/zabbix_agentd.pid

# Zabbix服务器端IP地址

Server=x.x.x.x

# Zabbix主动检查本机数据接收服务器IP地址

ServerActive=127.0.0.1

# 客户端主机名称（也可以写IP地址）

Hostname=Zabbix server

# 代理端口号，默认值是10050

ListenPort=10050</code></pre> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第五步，</strong></strong><strong><strong>关闭selinux和防火墙。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：<span style="color:#ff0000;">sed -i 's/SELINUX=enforcing/SELINUX=disabled/' /etc/selinux/config</span></p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl stop firewalld.service</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl disable --now firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第六步，启动Zabbix相关服务，并设置为开启自启动。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：systemctl start zabbix-agent</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl enable zabbix-agent</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第七步，设置防火墙端口，允许"10050"端口（Zabbix Agent默认端口）访问服务器。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：systemctl start firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;">firewall-cmd --zone=public --add-port=10050/tcp --permanent</p> 
<p style="margin-left:.0001pt;text-align:left;">firewall-cmd --reload</p> 
<p style="margin-left:.0001pt;text-align:left;">systemctl stop firewalld</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">注意：所有客户端都需按照以上步骤配置。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第八步，</strong></strong><strong><strong>重启服务器。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">命令：init 6</p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第九步，</strong></strong><strong><strong>在Zabbix监控系统中配置客户端主机。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;">登录Zabbix网址：<a href="http://120.27.134.193/zabbix/" rel="nofollow" title="http://x.x.x.x/zabbix/">http://x.x.x.x/zabbix/</a></p> 
<p style="margin-left:.0001pt;text-align:left;">初始登录账号是“Admin”（<span style="color:#ff0000;">注意A大写</span>）,初始登录密码是“zabbix”。账号和口令都区分大小写。</p> 
<p style="margin-left:.0001pt;text-align:left;">1）在“配置 --&gt; 主机 --&gt; 创建主机”页面中创建新的主机，填写客户端主机基本信息，<span style="color:#ff0000;">注意：这一步不点击“添加”</span>。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/8d/9a/D2aJ9IX6_o.png"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;">2）在“配置 --&gt; 主机 --&gt; 创建主机 --&gt; 模板”页面中，选择监控点模块并添加。</p> 
<p style="margin-left:.0001pt;"><img alt="" src="https://images2.imgbox.com/85/fb/y19O4esu_o.png"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;">3）在“配置 --&gt; 主机”页面中可以看到刚刚添加好的主机信息。</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#ff0000;">注意：</span>添加完成后，需要等待大约3分钟才能建立服务器和客户端的数据通信，之后刷新一下页面，如果发现该主机的可用性标记为下图状态，则表示客户端已受控。</p> 
<p style="margin-left:.0001pt;text-align:center;"><img alt="" src="https://images2.imgbox.com/0d/92/Uur25Ndt_o.png"></p> 
<p style="margin-left:.0001pt;text-align:center;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><strong>第十步，</strong></strong><strong><strong>常见问题</strong></strong><strong><strong>。</strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"># 更改Zabbix用户</p> 
<p style="margin-left:.0001pt;text-align:left;">命令：mysql -uroot -p123456</p> 
<p style="margin-left:.0001pt;text-align:left;">MariaDB [(none)]&gt; use zabbix;</p> 
<p style="margin-left:.0001pt;text-align:left;">MariaDB [(none)]&gt; update users set passwd=md5('<span style="color:#ff0000;">password</span>') where alias= 'Admin';</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/801b4c75dee8d15454eeaf39ee17e936/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Qt - 属性窗口编辑器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/83d002883f5206d783d99492e101e080/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VMware虚拟机扩展磁盘容量【绝对简单的傻瓜式操作】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>