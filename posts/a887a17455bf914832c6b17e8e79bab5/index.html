<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>非均衡设计评价两个批次的数据一致性 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="非均衡设计评价两个批次的数据一致性" />
<meta property="og:description" content="任务描述 第一批次的药物实验设置了三个剂量（0.2，0.6，1.8）mg/kg，每个剂量水平有十个受试者。
第二批次的药物实验设置了其他三个剂量(1.2,2.4,4.8) mk/kg，每个剂量水平有两个受试者。
问：这两个数据一致性怎么样？
其实我不理解这个一致性如何评价！！！
我理解是不是这两批数据可以用一个方程表示？或者说第二批次数据落在第一批次方程的置信区间内？
数据 getwd() rm(list=ls()) list.files() library(tidyverse) df &lt;- read.table(&#34;AUClast1.csv&#34;,header = T,sep=&#34;,&#34;,encoding = &#34;UTF-8&#34;) head(df) 代码 # 重新整理一下数据 dose &lt;- as.numeric(df[,1]) resp &lt;- c(27.33,88.06,351.4,487.5,1046,2520) df &lt;- as.data.frame(cbind(dose,resp)) df &lt;- df %&gt;% arrange(dose) head(df) # dose resp #1 0.2 27.33 #2 0.6 88.06 #3 1.2 487.50 #4 1.8 351.40 #5 2.4 1046.00 #6 4.8 2520.00 plot(log10(dose),log10(resp)) # 散点图可以看到数据取log后基本上是线性相关的，那就做线性拟合好了 # 然后第一批次的数据就三个点，什么正态分布，方差齐性，强影响点，都不考虑了，直接干 # 把第一批的数据拿出来 df1 &lt;- df[c(1,2,4),] model &lt;- lm(log10(resp)~log10(dose),df1) summary(model) # 模型的截距和系数都有意义，继续 Call:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a887a17455bf914832c6b17e8e79bab5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T15:28:14+08:00" />
<meta property="article:modified_time" content="2024-01-09T15:28:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">非均衡设计评价两个批次的数据一致性</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>任务描述</h2> 
<p>第一批次的药物实验设置了三个剂量（0.2，0.6，1.8）mg/kg，每个剂量水平有十个受试者。<br> 第二批次的药物实验设置了其他三个剂量(1.2,2.4,4.8) mk/kg，每个剂量水平有两个受试者。<br> 问：这两个数据一致性怎么样？</p> 
<p><strong>其实我不理解这个一致性如何评价！！！</strong><br> 我理解是不是这两批数据可以用一个方程表示？或者说第二批次数据落在第一批次方程的置信区间内？</p> 
<h2><a id="_7"></a>数据</h2> 
<pre><code class="prism language-R">getwd()
rm(list=ls())
list.files()
library(tidyverse)

df &lt;- read.table("AUClast1.csv",header = T,sep=",",encoding = "UTF-8")
head(df)
</code></pre> 
<p><img src="https://images2.imgbox.com/dd/4c/XzsflTyy_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_18"></a>代码</h2> 
<pre><code class="prism language-R"># 重新整理一下数据
dose &lt;- as.numeric(df[,1])
resp &lt;- c(27.33,88.06,351.4,487.5,1046,2520)
df &lt;- as.data.frame(cbind(dose,resp))
df &lt;- df %&gt;% arrange(dose)
head(df)
#  dose    resp
#1  0.2   27.33
#2  0.6   88.06
#3  1.2  487.50
#4  1.8  351.40
#5  2.4 1046.00
#6  4.8 2520.00

plot(log10(dose),log10(resp))
</code></pre> 
<p><img src="https://images2.imgbox.com/21/4d/CWVpfh4l_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-R"># 散点图可以看到数据取log后基本上是线性相关的，那就做线性拟合好了
# 然后第一批次的数据就三个点，什么正态分布，方差齐性，强影响点，都不考虑了，直接干
# 把第一批的数据拿出来
df1 &lt;- df[c(1,2,4),]

model &lt;- lm(log10(resp)~log10(dose),df1)
summary(model)
# 模型的截距和系数都有意义，继续
</code></pre> 
<blockquote> 
 <p>Call:<br> lm(formula = log10(resp) ~ log10(dose), data = df1<br> Residuals:<br> 1 2 4<br> 0.0155 -0.0310 0.0155<br> Coefficients:<br> Estimate Std. Error t value Pr(&gt;|t|)<br> (Intercept) 2.2336 0.0252 88.7 0.0072<br> log10(dose) 1.1623 0.0562 20.7 0.0308<br> Residual standard error: 0.0379 on 1 degrees of freedom<br> Multiple R-squared: 0.998, Adjusted R-squared: 0.995<br> F-statistic: 428 on 1 and 1 DF, p-value: 0.0308</p> 
</blockquote> 
<pre><code class="prism language-R"># 用上面的模型预测六个剂量水平的响应值，以及95%的置信区间
p1 &lt;- predict(model,df,interval = "confidence", level = 0.95)
p1
#  fit    lwr   upr
#1 1.421 0.9813 1.861
#2 1.976 1.6976 2.254
#3 2.326 1.9741 2.677
#4 2.530 2.0905 2.970
#5 2.676 2.1635 3.188
#6 3.025 2.3231 3.728

# 把dose，response，fit，lwr，upr构造一个数据框作图
df &lt;- cbind(df,p1)
df %&gt;% 
  ggplot(aes(x = log10(dose), y = log10(resp))) +
  geom_point(colour = "midnightblue", alpha = 0.5,size=1) +
  geom_line(aes(y = lwr), lty = 2,color = "blue") +
  geom_line(aes(y = upr), lty = 2,color = "green") +
  labs(x = "log10(Dose)", y = "log10(Response)", color = NULL) +
  theme_test() 
</code></pre> 
<p><img src="https://images2.imgbox.com/bf/f5/RD38YKTR_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-R"># 置信区间用色带表示
# 坐标轴改一下
# fit值用红线表示
# 真实数据点 用散点表示
dose02 &lt;- as.numeric(df[1,2:11])
dose06 &lt;- as.numeric(df[2,2:11])
dose18 &lt;- as.numeric(df[3,2:11])
dose12 &lt;- as.numeric(df[4,12:13])
dose24 &lt;- as.numeric(df[5,12:13])
dose48 &lt;- as.numeric(df[6,12:13])
df2 &lt;- cbind(rep(0.2,10),dose02)
df2 &lt;- rbind(df2,cbind(rep(0.6,10),dose06))
df2 &lt;- rbind(df2,cbind(rep(1.2,2),dose12))
df2 &lt;- rbind(df2,cbind(rep(1.8,10),dose18))
df2 &lt;- rbind(df2,cbind(rep(2.4,2),dose24))
df2 &lt;- rbind(df2,cbind(rep(4.8,2),dose48))
df2 &lt;- as.data.frame(df2)
colnames(df2) &lt;- c("dose","resp")
df &lt;- merge(df2,df,all.x = T,by = "dose")

xlabs &lt;- unique(df$dose)
ylabs &lt;- unique(df$resp.y)
head(df,10)
#  dose resp.x resp.y   fit    lwr   upr
#1   0.2   24.9  27.33 1.421 0.9813 1.861
#2   0.2   19.7  27.33 1.421 0.9813 1.861
#3   0.2   27.3  27.33 1.421 0.9813 1.861
#4   0.2   26.8  27.33 1.421 0.9813 1.861
#5   0.2   30.8  27.33 1.421 0.9813 1.861
#6   0.2   30.2  27.33 1.421 0.9813 1.861
#7   0.2   31.5  27.33 1.421 0.9813 1.861
#8   0.2   22.5  27.33 1.421 0.9813 1.861
#9   0.2   24.6  27.33 1.421 0.9813 1.861
#10  0.2   35.0  27.33 1.421 0.9813 1.861

df %&gt;% 
  ggplot(aes(x = log10(dose), y = fit)) +
  geom_line(colour = "red", alpha = 0.5) +
  geom_point(aes( y = log10(resp.x)),color="darkblue")+
  geom_ribbon(aes(ymin = lwr, ymax = upr), fill = "blue", alpha = 0.3)+
  labs(x = "Dose,mg/kg", y = "AUG_last.(h*ug/mL)", color = NULL) +
  scale_x_continuous(breaks = log10(xlabs),labels = xlabs)+
  scale_y_continuous(breaks = log10(ylabs),labels = ylabs)+
  theme_test()+
  labs(title = "AUC-dose relationship")
</code></pre> 
<p><img src="https://images2.imgbox.com/34/12/5ghK64aR_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_134"></a>结论</h2> 
<p>使用第一批数据拟合的方程，用于预测第二批次数据，使用第二批次的剂量作为因变量，在95%的置信区间内，第二批次的response落在了预测区间内。<br> 凑合能说第二个批次的数据 与 第一批数据具有一致性。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1de6ad61856b582c267a93b89073e405/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java基础之Map集合</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/40f5539e8b0bc599e453b252333c8ac8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">IRF540资料手册数据分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>