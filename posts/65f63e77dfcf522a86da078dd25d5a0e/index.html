<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在Ubuntu 20.04中安装ROS2最新版本Foxy Fitzroy - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在Ubuntu 20.04中安装ROS2最新版本Foxy Fitzroy" />
<meta property="og:description" content="ROS2 是新一代机器人操作系统。2020年6月5日，ROS2 的最新版本 Foxy Fitzroy 正式发布了， 支持到2023年的3月！
ROS2 支持的平台 Linux (Ubuntu Focal(20.04))macOSWindows ROS2 真正是跨平台了，ROS1 只支持 Linux。
有大神说，不要搞 ROS1 了，直接上 ROS2 ~~
安装ROS2 我们按照 官方的文档 在 Ubuntu 20.04中安装 ROS2 Foxy Fitzroy：
Setup Locale 确保系统要支持 UTF-8:
sudo locale-gen en_US en_US.UTF-8 sudo update-locale LC_ALL=en_US.UTF-8 LANG=en_US.UTF-8 export LANG=en_US.UTF-8 Setup Sources 添加ROS2的源：
sudo apt update sudo apt install curl gnupg2 lsb-release # 下面这条语句，我的输出错误： gpg: no valid OpenPGP data found # curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add - # 解决上面的问题，可以换成下面这条语句： $ curl http://repo." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/65f63e77dfcf522a86da078dd25d5a0e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-08T10:50:15+08:00" />
<meta property="article:modified_time" content="2020-06-08T10:50:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在Ubuntu 20.04中安装ROS2最新版本Foxy Fitzroy</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>ROS2 是新一代机器人操作系统。2020年6月5日，ROS2 的最新版本 <code>Foxy Fitzroy</code> 正式发布了， 支持到2023年的3月！<br> <img src="https://images2.imgbox.com/8b/08/Y7XBEyFb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="ROS2__3"></a>ROS2 支持的平台</h3> 
<ul><li>Linux (Ubuntu Focal(20.04))</li><li>macOS</li><li>Windows</li></ul> 
<p>ROS2 真正是跨平台了，ROS1 只支持 Linux。</p> 
<p>有大神说，不要搞 ROS1 了，直接上 ROS2 ~~</p> 
<h3><a id="ROS2_12"></a>安装ROS2</h3> 
<p>我们按照 <a href="https://index.ros.org/doc/ros2/Installation/Foxy/Linux-Install-Debians/" rel="nofollow">官方的文档</a> 在 Ubuntu 20.04中安装 ROS2 Foxy Fitzroy：</p> 
<h4><a id="Setup_Locale_14"></a>Setup Locale</h4> 
<p>确保系统要支持 <code>UTF-8</code>:</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> locale-gen en_US en_US.UTF-8
<span class="token function">sudo</span> update-locale LC_ALL<span class="token operator">=</span>en_US.UTF-8 LANG<span class="token operator">=</span>en_US.UTF-8
<span class="token function">export</span> LANG<span class="token operator">=</span>en_US.UTF-8
</code></pre> 
<h4><a id="Setup_Sources_22"></a>Setup Sources</h4> 
<p>添加ROS2的源：</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> apt update
<span class="token function">sudo</span> apt <span class="token function">install</span> <span class="token function">curl</span> gnupg2 lsb-release

<span class="token comment"># 下面这条语句，我的输出错误： gpg: no valid OpenPGP data found</span>
<span class="token comment"># curl -s https://raw.githubusercontent.com/ros/rosdistro/master/ros.asc | sudo apt-key add -</span>
<span class="token comment"># 解决上面的问题，可以换成下面这条语句：</span>
$ <span class="token function">curl</span> http://repo.ros2.org/repos.key <span class="token operator">|</span> <span class="token function">sudo</span> apt-key add - 

<span class="token comment"># 之后再添加源:</span>
<span class="token function">sudo</span> sh -c <span class="token string">'echo "deb http://packages.ros.org/ros2/ubuntu <span class="token variable"><span class="token variable">`</span>lsb_release -cs<span class="token variable">`</span></span> main" &gt; /etc/apt/sources.list.d/ros2-latest.list'</span>
</code></pre> 
<h4><a id="Install_ROS_2_packages_37"></a>Install ROS 2 packages</h4> 
<p>（1）更新源</p> 
<pre><code class="prism language-bash"><span class="token comment"># 执行更新后，出现问题了</span>
<span class="token function">sudo</span> apt update
N: Skipping acquire of configured <span class="token function">file</span> <span class="token string">'main/binary-i386/Packages'</span> as repository <span class="token string">'http://packages.ros.org/ros2/ubuntu focal InRelease'</span> doesn<span class="token string">'t support architecture '</span>i386'
</code></pre> 
<p>参照 <a href="https://zhuanlan.zhihu.com/p/125717611" rel="nofollow">ROS 2 安装后BUG</a>，解决方法是：</p> 
<pre><code class="prism language-bash">$ <span class="token function">cd</span> /etc/apt/sources.list.d
$ <span class="token function">sudo</span> gedit ros2-latest.list

<span class="token comment"># 打开文本后出现:</span>
deb http://packages.ros.org/ros2/ubuntu bionic main

<span class="token comment"># 在deb后插入[arch=amd64]变成:</span>
deb <span class="token punctuation">[</span>arch<span class="token operator">=</span>amd64<span class="token punctuation">]</span> http://packages.ros.org/ros2/ubuntu bionic main

<span class="token comment"># 保存并关闭</span>

<span class="token comment"># 再次更新即可</span>
<span class="token function">sudo</span> apt update
</code></pre> 
<blockquote> 
 <p>注： 如果更新出现问题了，试试更新多几次</p> 
</blockquote> 
<p>（2）推荐安装ROS2桌面版本（包括ROS, RViz, demos, tutorials）</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> apt <span class="token function">install</span> ros-foxy-desktop
</code></pre> 
<blockquote> 
 <p>注：如果出现问题，试试多重复几次</p> 
</blockquote> 
<h4><a id="Environment_setup_73"></a>Environment setup</h4> 
<p>（1）使用脚本来设置<br> 如果你的SHELL是用bash，就是：</p> 
<pre><code class="prism language-bash"><span class="token function">source</span> /opt/ros/foxy/setup.bash
</code></pre> 
<p>如果你的SHELL是用zsh的，就是：</p> 
<pre><code class="prism language-bash"><span class="token function">source</span> /opt/ros/foxy/setup.zsh
</code></pre> 
<p>以后每次打开终端都需要输入一次上面的语句，比较麻烦。我们以zsh为例，解决方法：</p> 
<pre><code class="prism language-bash">$ <span class="token keyword">echo</span> <span class="token string">"source /opt/ros/foxy/setup.zsh"</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc 
$ <span class="token function">source</span> ~/.zshrc
</code></pre> 
<p>这样，以后每次新打开终端，就不需要输入这条烦人的语句了<code>source /opt/ros/foxy/setup.zsh</code>, 终端会自动帮你加载这条语句，设置好ROS2的环境变量。</p> 
<p>（2）安装argcomplete（可选）</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> apt <span class="token function">install</span> python3-argcomplete

（3）安装RMW implementation
```bash
<span class="token function">sudo</span> apt update
<span class="token function">sudo</span> apt <span class="token function">install</span> ros-foxy-rmw-connext-cpp
</code></pre> 
<p>（4）安装ROS1 packages（可选）</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> apt update
<span class="token function">sudo</span> apt <span class="token function">install</span> ros-foxy-ros1-bridge
Reading package lists<span class="token punctuation">..</span>. Done
Building dependency tree       
Reading state information<span class="token punctuation">..</span>. Done
Some packages could not be installed. This may mean that you have
requested an impossible situation or <span class="token keyword">if</span> you are using the unstable
distribution that some required packages have not yet been created
or been moved out of Incoming.
The following information may <span class="token function">help</span> to resolve the situation:

The following packages have unmet dependencies:
 ros-foxy-ros1-bridge <span class="token keyword">:</span> Depends: ros-noetic-actionlib-msgs but it is not installable
                        Depends: ros-noetic-catkin but it is not installable
                        Depends: ros-noetic-common-msgs but it is not installable
                        Depends: ros-noetic-gazebo-msgs but it is not installable
                        Depends: ros-noetic-geometry-msgs but it is not installable
                        Depends: ros-noetic-nav-msgs but it is not installable
                        Depends: ros-noetic-rosbash but it is not installable
                        Depends: ros-noetic-roscpp but it is not installable
                        Depends: ros-noetic-roscpp-tutorials but it is not installable
                        Depends: ros-noetic-roslaunch but it is not installable
                        Depends: ros-noetic-rosmsg but it is not installable
                        Depends: ros-noetic-rospy-tutorials but it is not installable
                        Depends: ros-noetic-sensor-msgs but it is not installable
                        Depends: ros-noetic-std-msgs but it is not installable
                        Depends: ros-noetic-std-srvs but it is not installable
                        Depends: ros-noetic-stereo-msgs but it is not installable
                        Depends: ros-noetic-tf but it is not installable
                        Depends: ros-noetic-tf2-msgs but it is not installable
                        Depends: ros-noetic-trajectory-msgs but it is not installable
                        Depends: ros-noetic-visualization-msgs but it is not installable
E: Unable to correct problems, you have held broken packages.
</code></pre> 
<p>这些问题应该是我没有事先安装好 ROS1， 我也暂时不用ROS1，所以暂时也不用理会了。</p> 
<h3><a id="_141"></a>试试例子</h3> 
<p>我们通过一个例子来看看ROS2有无安装成功：</p> 
<p>（1）打开第一个终端，运行C++ talker：<br> （2）打开第两个终端，运行Python listener：<br> <img src="https://images2.imgbox.com/39/45/QJSqL22M_o.png" alt="在这里插入图片描述"></p> 
<p>我们看到，终端1不断地发送[Hello World: xx]， 终端2则不断地接收终端1发送的信息。</p> 
<h3><a id="ROS2_150"></a>卸载ROS2</h3> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> apt remove ros-foxy-*
<span class="token function">sudo</span> apt autoremove
</code></pre> 
<p>OVER~~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d29005a4e4b8ba9f4646555f5c68d402/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ignite和SpringBoot整合时出现Failed to initialize system DB connection......MULTI_THREADED问题解决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f175d4d76eb9940460eb389aaac66320/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用Python和Numpy进行波士顿房价预测任务（二）【深度学习入门_学习笔记】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>