<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nginx使用ssl模块配置HTTPS支持 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nginx使用ssl模块配置HTTPS支持" />
<meta property="og:description" content="默认情况下ssl模块并未被安装，如果要使用该模块则需要在编译时指定–with-http_ssl_module参数。 1.安装基础支持包 yum -y install openssl openssl-devel 2.备份原nginx.conf文件为nginx.conf.bak以防万一 3.安装ssl模块 cd /home/nginx-1.10.2 ../configure --with-http_ssl_module make make install 4.生成证书 可以通过以下步骤生成一个简单的证书： 首先，进入你想创建证书和私钥的目录，例如： $ cd /usr/local/nginx/conf 创建服务器私钥，命令会让你输入一个口令： $ openssl genrsa -des3 -out server.key 1024 创建签名请求的证书（CSR）： $ openssl req -new -key server.key -out server.csr 在这一命令执行的过程中，系统会要求您填写如下信息： Country Name (2 letter code) 使用国际标准组织(ISO)国码格式，填写2个字母的国家代号。中国请填写CN。 State or Province Name (full name) 省份，比如填写Shanghai Locality Name (eg, city) 城市，比如填写Shanghai Organization Name (eg, company) 组织单位，比如填写公司名称的拼音 Organizational Unit Name (eg, section) 比如填写IT Dept Common Name (eg, your websites domain name): 行使 SSL 加密的网站地址。请注意这里并不是单指您的域名，而是直接使用 SSL 的网站名称 例如:pay." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4aa56f3bf598f9a502c7c9ea878fbb1c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-12-13T14:56:47+08:00" />
<meta property="article:modified_time" content="2016-12-13T14:56:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx使用ssl模块配置HTTPS支持</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    默认情况下ssl模块并未被安装，如果要使用该模块则需要在编译时指定–with-http_ssl_module参数。 
<br> 1.安装基础支持包 
<br> yum -y install openssl openssl-devel 
<br> 2.备份原nginx.conf文件为nginx.conf.bak以防万一 
<br> 3.安装ssl模块 
<br> cd /home/nginx-1.10.2 
<br> ../configure --with-http_ssl_module 
<br> make 
<br> make install 
<br> 4.生成证书 
<br> 可以通过以下步骤生成一个简单的证书： 
<br> 首先，进入你想创建证书和私钥的目录，例如： 
<br> $ cd /usr/local/nginx/conf 
<br> 创建服务器私钥，命令会让你输入一个口令： 
<br> $ openssl genrsa -des3 -out server.key 1024 
<br> 创建签名请求的证书（CSR）： 
<br> $ openssl req -new -key server.key -out server.csr 
<br> 在这一命令执行的过程中，系统会要求您填写如下信息： 
<br> Country Name (2 letter code) 
<span style="white-space:pre"> </span>使用国际标准组织(ISO)国码格式，填写2个字母的国家代号。中国请填写CN。 
<br> State or Province Name (full name) 
<span style="white-space:pre"> </span>省份，比如填写Shanghai 
<br> Locality Name (eg, city) 
<span style="white-space:pre"> </span>城市，比如填写Shanghai 
<br> Organization Name (eg, company) 
<span style="white-space:pre"> </span>组织单位，比如填写公司名称的拼音 
<br> Organizational Unit Name (eg, section) 
<span style="white-space:pre"> </span>比如填写IT Dept 
<br> Common Name (eg, your websites domain name): 
<span style="white-space:pre"> </span> 行使 SSL 加密的网站地址。请注意这里并不是单指您的域名，而是直接使用 SSL 的网站名称 例如:pay.abc.com。 一个网站这里定义是：  
<br> abc.com 是一个网站；  
<br> www.abc.com 是另外一个网站；  
<br> pay.abc.com 又是另外一个网站。  
<br> Email Address 
<span style="white-space:pre"> </span>邮件地址，可以不填 
<br> A challenge password 
<span style="white-space:pre"> </span>可以不填 
<br> An optional company name 
<span style="white-space:pre"> </span>可以不填 
<br> 在加载SSL支持的Nginx并使用上述私钥时除去必须的口令： 
<br> $ cp server.key server.key.org 
<br> $ openssl rsa -in server.key.org -out server.key 
<br> 最后标记证书使用上述私钥和CSR： 
<br> $ openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt 
<br> 5.配置nginx 
<br> 修改Nginx配置文件，让其包含新标记的证书和私钥： 
<br> server { 
<br>     server_name YOUR_DOMAINNAME_HERE; 
<br>     listen 443; 
<br>     ssl on; 
<br>     ssl_certificate /usr/local/nginx/conf/server.crt; 
<br>     ssl_certificate_key /usr/local/nginx/conf/server.key; 
<br> } 
<br> 重启nginx。 
<br> 这样就可以通过以下方式访问： 
<br> https://YOUR_DOMAINNAME_HERE 
<br> 另外还可以加入如下代码实现80端口重定向到443 
<br> server { 
<br> listen 80; 
<br> server_name www.ahggwl.com; 
<br> rewrite ^(.*) https://$server_name$1 permanent; 
<br> 
<p>}</p> 
<p>参考资料：</p> 
<p>https://www.centos.bz/2011/12/nginx-ssl-https-support/<br> </p> 
<p>http://www.myssl.cn/guide/ssl_nginx.asp#001<br> </p> 
<p>http://blog.csdn.net/testcs_dn/article/details/51461999<br> </p> 
<p>https://my.oschina.net/u/923772/blog/716172<br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c13e0afd1bcf604e03ccada4a34171b3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">将 ICDAR 2015 的 Ground Truth 标注在图像数据上</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/177810ccf0c26fa0d975efe6429e7965/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">实现div的大小随着内容进行动态改变</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>