<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>在渲染element plus 中的el-tree 通过判断渲染数据的状态来进行特定颜色的变化 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="在渲染element plus 中的el-tree 通过判断渲染数据的状态来进行特定颜色的变化" />
<meta property="og:description" content="在处理el-tree的这个渲染问题最重要的就是数据结构的类型，在这个小项目中，我所处理的后端数据是一个一维的对象数组，每一项数组的children中包含了一个数组。
在我通过dom来操作想要改变el-tree的css样式的同时，发现获取到的是空数组，数据没有如愿的获取到的情况有很多，在这里遇到的是渲染是基于后端数据接口调用完成后在调用a（）函数，而解决的办法是通过async和await来进行处理的，在处理完成后继续来看我们获取到的数据，我们发现获取到的是一个htmlcollection，即一个动态类型的数组，那么我们在下面生成的htmlCollectionToArray函数就是来进行处理htmlcollection成为一个array数组，在数组的数据类型基础上，在进行操作处理。
处理成数组后会发现一个是一维数组，一个是二维数组（不太严谨但可以这么理解），通过flattenArray函数（代码块第三个函数）来将二维数组转换成一维数组，再通过遍历结合判断语句来进行赋值操作。
最后处理好之后，通过arrayToHtmlCollection来将array转成htmlcollection动态数组
//通过a来进行调用函数 const a= async () =&gt; { let tree = document.getElementsByClassName(&#34;想要修改的class&#34;); let array = htmlCollectionToArray(tree); let newnode = flattenArray(treedata.value.value); for (let i = 0; i &lt; newnode.length; i&#43;&#43;) { if (newnode[i].auditResult == false) { array[i][0].style.color = &#34;black&#34;; } if (newnode[i].auditResult == true) { array[i][0].style.color = &#34;green&#34;; } } tree = arrayToHtmlCollection(array); }; //数组扁平化 function flattenArray(array) { let result = []; let beforeResult = [&#34;1&#34;]; for (let i = 0; i &lt; array." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b78b8a0a32bb971cea427b327715011a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-08T13:18:49+08:00" />
<meta property="article:modified_time" content="2024-01-08T13:18:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">在渲染element plus 中的el-tree 通过判断渲染数据的状态来进行特定颜色的变化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> 在处理el-tree的这个渲染问题最重要的就是数据结构的类型，在这个小项目中，我所处理的后端数据是一个一维的对象数组，每一项数组的children中包含了一个数组。</p> 
<p>在我通过dom来操作想要改变el-tree的css样式的同时，发现获取到的是空数组，数据没有如愿的获取到的情况有很多，在这里遇到的是渲染是基于后端数据接口调用完成后在调用a（）函数，而解决的办法是通过async和await来进行处理的，在处理完成后继续来看我们获取到的数据，我们发现获取到的是一个htmlcollection，即一个动态类型的数组，那么我们在下面生成的htmlCollectionToArray函数就是来进行处理htmlcollection成为一个array数组，在数组的数据类型基础上，在进行操作处理。</p> 
<p>处理成数组后会发现一个是一维数组，一个是二维数组（不太严谨但可以这么理解），通过flattenArray函数（代码块第三个函数）来将二维数组转换成一维数组，再通过遍历结合判断语句来进行赋值操作。</p> 
<p>最后处理好之后，通过arrayToHtmlCollection来将array转成htmlcollection动态数组</p> 
<pre><code class="language-javascript">//通过a来进行调用函数
const a= async () =&gt; {
  let tree = document.getElementsByClassName("想要修改的class");
 let array = htmlCollectionToArray(tree);
  let newnode = flattenArray(treedata.value.value);
  for (let i = 0; i &lt; newnode.length; i++) {
    if (newnode[i].auditResult == false) {
      array[i][0].style.color = "black";
    }
    if (newnode[i].auditResult == true) {
      array[i][0].style.color = "green";
    }
  }
  tree = arrayToHtmlCollection(array);
};
//数组扁平化
function flattenArray(array) {
  let result = [];
  let beforeResult = ["1"];
  for (let i = 0; i &lt; array.length; i++) {
    console.log(i, "i的值");
    console.log(typeof array[i] ==="undefined");
     result = result.concat(beforeResult);
    if (typeof array[i].children !=="undefined") {
      console.log("进来");
     
      result = result.concat(array[i].children);
    }
      console.log(result,"result");
  }
  return result;
}
// 将array转换成htmlcollection
function arrayToHtmlCollection(array) {
  let collection = document.createDocumentFragment();
  for (let i = 0; i &lt; array.length; i++) {
    let element = document.createElement("div");
    element.innerHTML = array[i].join("");
    collection.appendChild(element);
 }
  return collection;
}//将htmlcollection转换成array
function htmlCollectionToArray(collection) {
  let result = [];
  for (let i = 0; i &lt; collection.length; i++) {
    let elements = collection[i].getElementsByTagName("*") result.push(Array.from(elements));
  }
  return result;
}    </code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cda03b70a15b32792316e51fcaaabc8d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">借助 ControlNet 生成艺术二维码 – 基于 Stable Diffusion 的 AI 绘画方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/df86fbbe7bd752494596503b32c0ccfd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据通讯平台建设方案（物联网数据采集平台）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>