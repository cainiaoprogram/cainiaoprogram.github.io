<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用Origin绘制弦图全流程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用Origin绘制弦图全流程" />
<meta property="og:description" content="弦图是一种常用的进行表示一种成分向另一种成分转移或表示占比情况等的图。最常接触到的是在生物、医学等论文中，在地理学论文中发现也有人使用，做粮食安全、土地利用转移等。
本科时候就给老师干活，画过弦图，现在自己做一个类似于土地利用转移矩阵的图，所以也想使用弦图进行绘制。
关于弦图有很多介绍的代码，19年当时会用R语言画，现在已经都忘记了，再从头学代码太麻烦，所以使用Origin出图会简单很多。
当时使用的R语言代码 当时啥也不懂，也没有写代码的注释，导致自己现在再看的时候，除了知道修改输入和输出以及相关的行列名，里面的参数都不知道干啥的了。所以代码还是要有注释才行啊
library(statnet) library(circlize) data&lt;-read.csv(&#34;liangshi.csv&#34;,header=T,row=1) my.data&lt;-as.matrix(data) grid.col = NULL colnames(my.data) &lt;-c(&#34;X&#34;, &#34;N&#34;, &#34;C&#34;, &#34;W&#34;) rownames(my.data) &lt;-c(&#34;S1&#34;, &#34;S2&#34;, &#34;S3&#34;, &#34;S4&#34;,&#34;S5&#34;) grid.col[c(&#34;S1&#34;, &#34;S2&#34;, &#34;S3&#34;, &#34;S4&#34;,&#34;S5&#34;] = c(&#34;PowderBlue&#34;, &#34;DeepSkyBlue&#34;, &#34;CornflowerBlue&#34;, &#34;Blue&#34;,&#34;MidnightBlue&#34;); grid.col[colnames(my.data)] = c(&#34;lavender&#34;, &#34;khaki&#34;,&#34;mistyrose&#34;, &#34;sienna1&#34;) circos.par(gap.degree = c(rep(2, nrow(my.data)-1), 10, rep(2, ncol(my.data)-1), 10), start.degree = 180) chordDiagram(my.data, directional = TRUE, diffHeight = 0.06, grid.col = grid.col, transparency = 0.5) legend(&#34;bottomright&#34;,pch=20,legend=colnames(my.data), col=grid.col[colnames(my.data)],bty=&#34;n&#34;, cex=1,pt.cex=3,border=&#34;black&#34;) legend(&#34;topright&#34;,pch=20,legend=rownames(my.data), col=grid.col[rownames(my.data)],bty=&#34;n&#34;, cex=1,pt.cex=3,border=&#34;black&#34;) pdf(file=&#34;liangshi.pdf&#34;, width=8, height=5, pointsize=8) chordDiagram(my." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7554a089e86d98dc7a32dc13928a5aaa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-11T15:39:51+08:00" />
<meta property="article:modified_time" content="2022-07-11T15:39:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用Origin绘制弦图全流程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>弦图是一种常用的进行表示一种成分向另一种成分转移或表示占比情况等的图。最常接触到的是在生物、医学等论文中，在地理学论文中发现也有人使用，做粮食安全、土地利用转移等。<br> <img src="https://images2.imgbox.com/7b/b3/vDfwjNW4_o.png" alt="在这里插入图片描述"><br> 本科时候就给老师干活，画过弦图，现在自己做一个类似于土地利用转移矩阵的图，所以也想使用弦图进行绘制。</p> 
<p>关于弦图有很多介绍的代码，19年当时会用R语言画，现在已经都忘记了，再从头学代码太麻烦，所以使用Origin出图会简单很多。</p> 
<h3><a id="R_6"></a>当时使用的R语言代码</h3> 
<p>当时啥也不懂，也没有写代码的注释，导致自己现在再看的时候，除了知道修改输入和输出以及相关的行列名，里面的参数都不知道干啥的了。所以代码还是要有注释才行啊</p> 
<pre><code class="prism language-r">library<span class="token punctuation">(</span>statnet<span class="token punctuation">)</span>
library<span class="token punctuation">(</span>circlize<span class="token punctuation">)</span> 
data<span class="token operator">&lt;-</span>read.csv<span class="token punctuation">(</span><span class="token string">"liangshi.csv"</span><span class="token punctuation">,</span>header<span class="token operator">=</span>T<span class="token punctuation">,</span>row<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span> 
my.data<span class="token operator">&lt;-</span>as.matrix<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
grid.col <span class="token operator">=</span> <span class="token keyword">NULL</span>
colnames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span> <span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"X"</span><span class="token punctuation">,</span> <span class="token string">"N"</span><span class="token punctuation">,</span> <span class="token string">"C"</span><span class="token punctuation">,</span> <span class="token string">"W"</span><span class="token punctuation">)</span>
rownames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span> <span class="token operator">&lt;-</span>c<span class="token punctuation">(</span><span class="token string">"S1"</span><span class="token punctuation">,</span> <span class="token string">"S2"</span><span class="token punctuation">,</span> <span class="token string">"S3"</span><span class="token punctuation">,</span> <span class="token string">"S4"</span><span class="token punctuation">,</span><span class="token string">"S5"</span><span class="token punctuation">)</span>
grid.col<span class="token punctuation">[</span>c<span class="token punctuation">(</span><span class="token string">"S1"</span><span class="token punctuation">,</span> <span class="token string">"S2"</span><span class="token punctuation">,</span> <span class="token string">"S3"</span><span class="token punctuation">,</span> <span class="token string">"S4"</span><span class="token punctuation">,</span><span class="token string">"S5"</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"PowderBlue"</span><span class="token punctuation">,</span> <span class="token string">"DeepSkyBlue"</span><span class="token punctuation">,</span> <span class="token string">"CornflowerBlue"</span><span class="token punctuation">,</span> <span class="token string">"Blue"</span><span class="token punctuation">,</span><span class="token string">"MidnightBlue"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
grid.col<span class="token punctuation">[</span>colnames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> c<span class="token punctuation">(</span><span class="token string">"lavender"</span><span class="token punctuation">,</span> <span class="token string">"khaki"</span><span class="token punctuation">,</span><span class="token string">"mistyrose"</span><span class="token punctuation">,</span> <span class="token string">"sienna1"</span><span class="token punctuation">)</span>
circos.par<span class="token punctuation">(</span>gap.degree <span class="token operator">=</span> c<span class="token punctuation">(</span>rep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> nrow<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> rep<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> ncol<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
start.degree <span class="token operator">=</span> <span class="token number">180</span><span class="token punctuation">)</span>
chordDiagram<span class="token punctuation">(</span>my.data<span class="token punctuation">,</span>
directional <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
diffHeight <span class="token operator">=</span> <span class="token number">0.06</span><span class="token punctuation">,</span>
grid.col <span class="token operator">=</span> grid.col<span class="token punctuation">,</span> 
transparency <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> 
legend<span class="token punctuation">(</span><span class="token string">"bottomright"</span><span class="token punctuation">,</span>pch<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>legend<span class="token operator">=</span>colnames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">,</span>
col<span class="token operator">=</span>grid.col<span class="token punctuation">[</span>colnames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bty<span class="token operator">=</span><span class="token string">"n"</span><span class="token punctuation">,</span>
cex<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>pt.cex<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token string">"black"</span><span class="token punctuation">)</span>
legend<span class="token punctuation">(</span><span class="token string">"topright"</span><span class="token punctuation">,</span>pch<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>legend<span class="token operator">=</span>rownames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">,</span>
col<span class="token operator">=</span>grid.col<span class="token punctuation">[</span>rownames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bty<span class="token operator">=</span><span class="token string">"n"</span><span class="token punctuation">,</span>
cex<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>pt.cex<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token string">"black"</span><span class="token punctuation">)</span>
pdf<span class="token punctuation">(</span>file<span class="token operator">=</span><span class="token string">"liangshi.pdf"</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> pointsize<span class="token operator">=</span><span class="token number">8</span><span class="token punctuation">)</span>
chordDiagram<span class="token punctuation">(</span>my.data<span class="token punctuation">,</span>directional <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>diffHeight <span class="token operator">=</span> <span class="token number">0.06</span><span class="token punctuation">,</span>grid.col <span class="token operator">=</span> grid.col<span class="token punctuation">,</span> transparency <span class="token operator">=</span> <span class="token number">0.5</span><span class="token punctuation">)</span> 
legend<span class="token punctuation">(</span><span class="token string">"bottomright"</span><span class="token punctuation">,</span>pch<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>legend<span class="token operator">=</span>colnames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span>grid.col<span class="token punctuation">[</span>colnames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bty<span class="token operator">=</span><span class="token string">"n"</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>pt.cex<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token string">"black"</span><span class="token punctuation">)</span>
legend<span class="token punctuation">(</span><span class="token string">"topright"</span><span class="token punctuation">,</span>pch<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">,</span>legend<span class="token operator">=</span>rownames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">,</span>col<span class="token operator">=</span>grid.col<span class="token punctuation">[</span>rownames<span class="token punctuation">(</span>my.data<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>bty<span class="token operator">=</span><span class="token string">"n"</span><span class="token punctuation">,</span>cex<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>pt.cex<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span>border<span class="token operator">=</span><span class="token string">"black"</span><span class="token punctuation">)</span>  
dev.off<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>Origin中，弦图是分组图的一种，提供了绘图模板，关于一些详细介绍，可以看其他人的博文：<br> <a href="http://t.csdn.cn/VU3Xf" rel="nofollow">http://t.csdn.cn/VU3Xf</a>或者Origin官方论坛等。<br> <img src="https://images2.imgbox.com/cd/90/aQnskPuJ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="1_43"></a>1、数据预处理</h3> 
<p>首先要将数据预处理成类似于土地利用转移矩阵的格式<br> <img src="https://images2.imgbox.com/18/a2/mgvYr9sb_o.png" alt="在这里插入图片描述"><br> 如果是栅格数据等，关于求转移矩阵的方法就不再仔细介绍。最重要的是得到一个如图所示的表格进行绘图。</p> 
<p>处理后得到一个类似于此的矩阵，当然也可以参考上面的其他人的教程。<br> <img src="https://images2.imgbox.com/83/a9/pPuWlAcu_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_51"></a>2、绘图</h3> 
<p>将数据复制到Origin中，<br> <img src="https://images2.imgbox.com/2f/bb/xlWS0765_o.png" alt="在这里插入图片描述"><br> 全都选中后，打开绘图——分组图——弦图或比例弦图（比例弦图能显示比例）<br> <img src="https://images2.imgbox.com/db/4b/QY3P51BV_o.png" alt="在这里插入图片描述"><br> 要修改的是数据布局与X值和Y值的位置。<br> 数据布局，如果是类似于我的<br> <img src="https://images2.imgbox.com/4a/b6/yAAncv3f_o.png" alt="在这里插入图片描述"><br> 那就是从列到行连接，如果是反过来就是从行到列。从X到Y，从行到列**，多试一下就行**。<br> <img src="https://images2.imgbox.com/98/4e/5y2c1Uv5_o.png" alt="在这里插入图片描述"><br> 将鼠标光标放在图上，能显示从哪种情况到哪种情况，有多少转移，看是否和自己真实情况相符，不相符就是方向弄错了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6c4642d337e8d54ae5cf9dc7f6606c3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【记录】docker容器无法启动后,如何修改里面的配置文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6582b4ae9fef05ef7803f4e48e387a2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mac 设置ll命令始终生效</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>