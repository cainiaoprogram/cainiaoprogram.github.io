<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PeopleSoft技术（PeopleCode学习1） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PeopleSoft技术（PeopleCode学习1）" />
<meta property="og:description" content="本片文章主要讲一些PeopleCode的基础知识，后面会有PeopleCode练习的篇章
一、PeopleCode概述 当业务数据自身的约束不能满足业务需求时，使用PeopleCode实现复杂的业务逻辑当业务数据的保存逻辑过于复杂，无法通过Component Processing实现时，使用PeopleCode＋SQL实现复杂的数据保存逻辑PeopleCode Definition是存放在数据库中的事件（Event）驱动，面向操作（用户的业务处理）的编程语言 二、PeopleCode对象和事件 （1）PeopleCode中的对象 Record Field Component Record Field Component Record Component Page Menu Item 几乎用不到 注意：我们在写代码的时候优先级是从下往上的，可以在Component Record中写的不在Record中写，因为如果你把Code写在Record中，别人用这个Record时也会执行该Code，除非你的Code在所有用到这个Record时都可以用到，否则不建议使用。
（2）PeopleCode中的事件 （a）下面是PeopleCode中的所有事件 （b）下面是用户更改FIELD后触发的事件顺序 （c）用户点击Save按钮时触发的事件顺序 （d）FieldEdit VS FieldChange FieldEdit比FieldChange先触发，并且是所有Field的FieldEdit事件触发完之后才触发FieldChange事件 一边情况，数据校验类型的code会放在FieldEdit事件中去写，按钮点击等方法会在FieldChange事件中去写。 FieldEdit事件会根据代码执行情况对当前字段进行特殊标记 （e）SaveEdit VS SavePreChange VS SavePostChange 触发的顺序是SaveEdit&gt;&gt;SavePreChange&gt;&gt;SavePostChange，并且是所有Field的某个事件都触发完之后再触发下一个事件 SaveEdit一般是在保存前字段信息校验时写在该事件中；SavePreChange保存在数据库之前进行数据合法性校验，比如已有该员工身份证号则不能录入；SavePostChange一般是保存到数据库之后触发，比如保存到数据库后给用户一个友好型提示。
三、PeopleCode语法 分隔符：PeopleCode和大多数编程语言一样都是用分号(;)结束的 赋值语句：Varname = expression 数据声明：数据范围 数据类型 变量名 例如：
Local number &amp;NUM; Local Field &amp;DATE; Local array of number &amp;AN； 条件语句：
if 条件 then 语句; end-if; Evaluate left_term When [relop_1] right_term_1 [statement_list] ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ed59aa3a70ddb96f64c54070b92a897d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-17T15:15:59+08:00" />
<meta property="article:modified_time" content="2018-04-17T15:15:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PeopleSoft技术（PeopleCode学习1）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本片文章主要讲一些PeopleCode的基础知识，后面会有PeopleCode练习的篇章</p> 
<h3 id="一peoplecode概述">一、PeopleCode概述</h3> 
<ul><li>当业务数据自身的约束不能满足业务需求时，使用PeopleCode实现复杂的业务逻辑</li><li>当业务数据的保存逻辑过于复杂，无法通过Component Processing实现时，使用PeopleCode＋SQL实现复杂的数据保存逻辑</li><li>PeopleCode Definition是存放在数据库中的</li><li>事件（Event）驱动，面向操作（用户的业务处理）的编程语言</li></ul> 
<h3 id="二peoplecode对象和事件">二、PeopleCode对象和事件</h3> 
<p><strong>（1）PeopleCode中的对象</strong> <br> Record Field <br> Component Record Field <br> Component Record <br> Component <br> Page <br> Menu Item 几乎用不到 <br> <strong>注意</strong>：我们在写代码的时候优先级是从下往上的，可以在Component Record中写的不在Record中写，因为如果你把Code写在Record中，别人用这个Record时也会执行该Code，除非你的Code在所有用到这个Record时都可以用到，否则不建议使用。</p> 
<p><strong>（2）PeopleCode中的事件</strong> <br> （a）下面是PeopleCode中的所有事件 <br> <img src="https://images2.imgbox.com/8c/58/TsK5RWh6_o.png" alt="这里写图片描述" title=""> <br> （b）下面是用户更改FIELD后触发的事件顺序 <br> <img src="https://images2.imgbox.com/fc/e0/wnMTFwNC_o.png" alt="这里写图片描述" title=""> <br> （c）用户点击Save按钮时触发的事件顺序 <br> <img src="https://images2.imgbox.com/a9/4d/BSvjcwpm_o.png" alt="这里写图片描述" title=""> <br> （d）FieldEdit VS FieldChange <br> FieldEdit比FieldChange先触发，并且是所有Field的FieldEdit事件触发完之后才触发FieldChange事件 <br> 一边情况，数据校验类型的code会放在FieldEdit事件中去写，按钮点击等方法会在FieldChange事件中去写。 <br> FieldEdit事件会根据代码执行情况对当前字段进行特殊标记 <br> （e）SaveEdit VS SavePreChange VS SavePostChange <br> 触发的顺序是SaveEdit&gt;&gt;SavePreChange&gt;&gt;SavePostChange，并且是所有Field的某个事件都触发完之后再触发下一个事件 <br> SaveEdit一般是在保存前字段信息校验时写在该事件中；SavePreChange保存在数据库之前进行数据合法性校验，比如已有该员工身份证号则不能录入；SavePostChange一般是保存到数据库之后触发，比如保存到数据库后给用户一个友好型提示。</p> 
<h3 id="三peoplecode语法">三、PeopleCode语法</h3> 
<p>分隔符：PeopleCode和大多数编程语言一样都是用分号(;)结束的 <br> 赋值语句：Varname = expression <br> 数据声明：数据范围 数据类型 变量名 <br> 例如：</p> 
<pre class="prettyprint"><code class=" hljs lasso">        <span class="hljs-built_in">Local</span> number <span class="hljs-subst">&amp;</span>NUM;
        <span class="hljs-built_in">Local</span> Field <span class="hljs-subst">&amp;</span><span class="hljs-built_in">DATE</span>; 
        <span class="hljs-built_in">Local</span> <span class="hljs-built_in">array</span> of number <span class="hljs-subst">&amp;</span>AN；</code></pre> 
<p>条件语句：</p> 
<pre class="prettyprint"><code class=" hljs vbnet"> <span class="hljs-keyword">if</span>  条件  <span class="hljs-keyword">then</span>
    语句;
 <span class="hljs-keyword">end</span>-<span class="hljs-keyword">if</span>;

Evaluate left_term 
<span class="hljs-keyword">When</span> [relop_1] right_term_1 [statement_list] . . .
<span class="hljs-keyword">When</span> [relop_n] right_term_n [statement_list] 
[<span class="hljs-keyword">When</span>-other [statement_list]] 
<span class="hljs-keyword">End</span>-evaluate;</code></pre> 
<p>循环语句：</p> 
<pre class="prettyprint"><code class=" hljs oxygene"><span class="hljs-keyword">Repeat</span> statement_list 
<span class="hljs-keyword">Until</span> &lt;logical_expression&gt;;

<span class="hljs-keyword">While</span> &lt;logical_expression &gt;
statement_list 
<span class="hljs-keyword">End</span>-<span class="hljs-keyword">while</span>; 

<span class="hljs-keyword">For</span> &lt;&amp;<span class="hljs-keyword">var</span>&gt;= &lt;start-value&gt; <span class="hljs-keyword">to</span> &lt;<span class="hljs-keyword">end</span>-value&gt; [<span class="hljs-keyword">Step</span> i]; 
    statement_list 
<span class="hljs-keyword">End</span>-<span class="hljs-keyword">for</span>; 
</code></pre> 
<p>PeopleCode的数据类型：加粗的是常用的数据类型 <br> Any、<strong>String</strong>、<strong>Boolean</strong>、<strong>Number</strong>、Float、Integer、<strong>Date</strong>、DateTime、Time</p> 
<p>用户自定义常量：constant &amp;str = “A”; <br> 用户自定义变量：Local Field &amp;DATE; <br> &amp;DATE = GetRecord(RECORD.DERIVED_HR);</p> 
<p>变量有效范围： <br> Global: 全局变量，在整个session中有效 <br> Component: 在被激活的Component中包含的所有页面有效 <br> Local: 在被定义的程序段或函数中有效</p> 
<p>常用系统变量： <br> %Date 当前时间 <br> %EmployeeId 当前登录员工id</p> 
<p>运行操作： <br> 数学运算:+ - * / <br> 日期和时间的运算: <br> Time +/- Number (seconds) = Time <br> Time – Time = Number (seconds) <br> Date +/- Number (days) = Date <br> Date – Date = Number (days) <br> Date + Time = Datetime (Date and Time combined) <br> 字符串连接运算: | <br> @ 操作. <br> 比较操作: &gt;,=,&lt;,&gt;=,&lt;=,&lt;&gt; <br> 逻辑操作: And, Or, Not</p> 
<p>PeopleCode的函数 <br> Function_name([parameter-list]); <br> PeopleCode 中使用的函数 <br> Build-in函数 (不用声明，直接使用) <br> Internal 函数 (在Peoplesoft程序中声明、定义的函数). <br> External PeopleCode (defined outside the calling program-generally contained in record definitions serving as function libraries) <br> External non-PeopleCode（外部函数）</p> 
<p>常用的系统Build-in函数 <br> Warning <br> Error <br> All <br> None <br> GetLevel0 <br> GetRowSet <br> GetRow <br> SQLEXEC</p> 
<p>自定义函数的声明： <br> 在Formula事件中定义函数 <br> 格式： <br> Function name [(paramlist)] [Returns data_type] <br> [statements] <br> End-function </p> 
<p>PeopleCode中的注释： <br> 单行注释： REM XXXXXXXX ; <br> 多行注释： &lt;* <br> XXXX <br> XXXXX <br> XXXXX <br> *&gt; <br> 多行注释： /* XXXXXXXX */</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/25e585767a2f22709081d5bbf10d4c49/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Hybird APP （混合开发）简介</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6daa5231038a311c7100a07ec7b1beaf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java Web开发常见异常及排查方法记录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>