<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>华为HCIE课堂笔记第十三章 IPv6地址配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="华为HCIE课堂笔记第十三章 IPv6地址配置" />
<meta property="og:description" content="目录
第十三章 IPv6地址配置
13.1 IPv6地址无状态自动配置
13.1.1 RS和RA报文格式
13.1.2 RA的Flags字段
13.1.3 地址的生存周期
13.1.4 RA报文中前缀中的Flags
13.2 DHCPv6
13.2.1 DHCPV6的概念
13.2.2 DCHPv6的报文
第十三章 IPv6地址配置 13.1 IPv6地址无状态自动配置 使用RS和RA报文实现
13.1.1 RS和RA报文格式 RA报文的目的IPv6地址：所有的IPv6节点组播地址FF02::1
RS报文的目的IPv6地址：所有路由器节点的组播地址FF02::2
两个报文的源IPv6地址：链路本地地址
无状态自动配置的过程：
单播地址配置后都需要进行DAD检测PC自动生成链路本地地址。PC已自己的链路本地地址为源地址发送RS请求报文。路由器收到RS报文后回复RA报文，携带前缀信息PC收到前缀信息，根据前缀信息&#43;自己产生的接口ID生成IPV6 13.1.2 RA的Flags字段 Mbit位（Managed）：管理地址配置标识：两种取值
M取值为0：表示通过无状态自动配置配置IPv6地址和参数信息 Obit位：其他有状态配置标识，其他的参数如何配置。 取值为0：其他参数通过无状态自动配置实现。取值为1：其他参数通过DHCPv6配置实现。M取值为1：表示通过DHCPv6有状态配置配置IPV6地址和参数信息。 Obit位：忽略，无论是否取值，都使用DHCPv6获取地址和其他参数。 Router preference：路由器优先级，终端收到多个RA报文，来自不同的路由器，可以通过该字段选择缺省网关，生成缺省路由。优先级字段取值高、中、低，优先级越高越优。
13.1.3 地址的生存周期 两个计时器：优选时间，有效时间；优选时间被包含在有效时间内。有效时间=优选时间&#43;Deprecated阶段的时间
单播地址被配置在接口后，进入到实验地址阶段，地址状态标记为实验地址经过DAD（重复地址检测），该地址进入到优选时间，成为优选地址 优选地址可以新建连接，正常收发报文优选地址超过优选时间计时器，则进入到Deprecated阶段，成为Deprecated状态地址。 改地址可以继续使用，但不建议使用，不能用于新的连接的建立。当地址的使用时间超过了有效时间，则从Deprecated状态切换到invalid状态，成为不可用地址。无法使用该地址进行通信。 13.1.4 RA报文中前缀中的Flags 1、Autonomouns Addr-conf flag：自动配置位，默认置位，置位后，其他设备收到了该RA报文，可以根据该前缀进行无状态自动配置。如果不置位，表示收到该报文之后，不使用该前缀进行无状态自动配置。
2、一个RA报文中可以携带同一个链路的多个前缀信息。
13.2 DHCPv6 13.2.1 DHCPV6的概念 T1时间：只IPV6的租期剩余0.5的时候，需要进行地址的重新续租操作。
T2时间：IPV6地址的租期剩余0.2（到达0.8）的时候，需要进行地址重绑定操作。
13.2.2 DCHPv6的报文 DHCPv6有状态交互的四步：与IPV4类似
DHCPv6 有状态交互两步：携带rapid commit选项，如果服务器支持，则进行两步交互，直接回复reply报文，携带参数；不支持，则进行四步交换，使用Solicit、advertise、request、reply报文实现。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e165e6d7022fb44f402f1202df5e2e94/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-07T16:48:03+08:00" />
<meta property="article:modified_time" content="2024-01-07T16:48:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">华为HCIE课堂笔记第十三章 IPv6地址配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0%20%C2%A0IPv6%E5%9C%B0%E5%9D%80%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0%20%C2%A0IPv6%E5%9C%B0%E5%9D%80%E9%85%8D%E7%BD%AE" rel="nofollow">第十三章  IPv6地址配置</a></p> 
<p id="13.1%20IPv6%E5%9C%B0%E5%9D%80%E6%97%A0%E7%8A%B6%E6%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#13.1%20IPv6%E5%9C%B0%E5%9D%80%E6%97%A0%E7%8A%B6%E6%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE" rel="nofollow">13.1 IPv6地址无状态自动配置</a></p> 
<p id="13.1.1%20RS%E5%92%8CRA%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F-toc" style="margin-left:80px;"><a href="#13.1.1%20RS%E5%92%8CRA%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F" rel="nofollow">13.1.1 RS和RA报文格式</a></p> 
<p id="13.1.2%20RA%E7%9A%84Flags%E5%AD%97%E6%AE%B5-toc" style="margin-left:80px;"><a href="#13.1.2%20RA%E7%9A%84Flags%E5%AD%97%E6%AE%B5" rel="nofollow">13.1.2 RA的Flags字段</a></p> 
<p id="13.1.3%20%E5%9C%B0%E5%9D%80%E7%9A%84%E7%94%9F%E5%AD%98%E5%91%A8%E6%9C%9F-toc" style="margin-left:80px;"><a href="#13.1.3%20%E5%9C%B0%E5%9D%80%E7%9A%84%E7%94%9F%E5%AD%98%E5%91%A8%E6%9C%9F" rel="nofollow">13.1.3 地址的生存周期</a></p> 
<p id="13.1.4%20RA%E6%8A%A5%E6%96%87%E4%B8%AD%E5%89%8D%E7%BC%80%E4%B8%AD%E7%9A%84Flags-toc" style="margin-left:80px;"><a href="#13.1.4%20RA%E6%8A%A5%E6%96%87%E4%B8%AD%E5%89%8D%E7%BC%80%E4%B8%AD%E7%9A%84Flags" rel="nofollow">13.1.4 RA报文中前缀中的Flags</a></p> 
<p id="13.2%20DHCPv6-toc" style="margin-left:40px;"><a href="#13.2%20DHCPv6" rel="nofollow">13.2 DHCPv6</a></p> 
<p id="13.2.1%20DHCPV6%E7%9A%84%E6%A6%82%E5%BF%B5-toc" style="margin-left:80px;"><a href="#13.2.1%20DHCPV6%E7%9A%84%E6%A6%82%E5%BF%B5" rel="nofollow">13.2.1 DHCPV6的概念</a></p> 
<p id="13.2.2%20DCHPv6%E7%9A%84%E6%8A%A5%E6%96%87-toc" style="margin-left:80px;"><a href="#13.2.2%20DCHPv6%E7%9A%84%E6%8A%A5%E6%96%87" rel="nofollow">13.2.2 DCHPv6的报文</a></p> 
<hr id="hr-toc"> 
<h2 id="%E7%AC%AC%E5%8D%81%E4%B8%89%E7%AB%A0%20%C2%A0IPv6%E5%9C%B0%E5%9D%80%E9%85%8D%E7%BD%AE" style="margin-left:0;text-align:center;"><a name="_Toc153389982">第十三章  IPv6</a>地址配置</h2> 
<h3 id="13.1%20IPv6%E5%9C%B0%E5%9D%80%E6%97%A0%E7%8A%B6%E6%80%81%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE" style="margin-left:0;"><a name="_Toc153389983">13.1 IPv6</a>地址无状态自动配置</h3> 
<p style="margin-left:0;text-align:justify;">使用RS和RA报文实现</p> 
<h4 id="13.1.1%20RS%E5%92%8CRA%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F" style="margin-left:0;">13.1.1 RS和RA报文格式</h4> 
<p style="margin-left:0;text-align:justify;">RA报文的目的IPv6地址：所有的IPv6节点组播地址FF02::1</p> 
<p style="margin-left:0;text-align:justify;">RS报文的目的IPv6地址：所有路由器节点的组播地址FF02::2</p> 
<p style="margin-left:0;text-align:justify;">两个报文的源IPv6地址：链路本地地址</p> 
<p style="margin-left:0;text-align:justify;">无状态自动配置的过程：</p> 
<ol><li>单播地址配置后都需要进行DAD检测</li><li>PC自动生成链路本地地址。</li><li>PC已自己的链路本地地址为源地址发送RS请求报文。</li><li>路由器收到RS报文后回复RA报文，携带前缀信息</li><li>PC收到前缀信息，根据前缀信息+自己产生的接口ID生成IPV6</li></ol> 
<h4 id="13.1.2%20RA%E7%9A%84Flags%E5%AD%97%E6%AE%B5" style="margin-left:0;">13.1.2 RA的Flags字段</h4> 
<p style="margin-left:0;text-align:justify;">Mbit位（Managed）：管理地址配置标识：两种取值</p> 
<ol><li>M取值为0：表示通过无状态自动配置配置IPv6地址和参数信息 
  <ol><li>Obit位：其他有状态配置标识，其他的参数如何配置。 
    <ol><li>取值为0：其他参数通过无状态自动配置实现。</li><li>取值为1：其他参数通过DHCPv6配置实现。</li></ol></li></ol></li><li>M取值为1：表示通过DHCPv6有状态配置配置IPV6地址和参数信息。 
  <ol><li>Obit位：忽略，无论是否取值，都使用DHCPv6获取地址和其他参数。</li></ol></li></ol> 
<p style="margin-left:0;text-align:justify;">Router preference：路由器优先级，终端收到多个RA报文，来自不同的路由器，可以通过该字段选择缺省网关，生成缺省路由。优先级字段取值高、中、低，优先级越高越优。</p> 
<h4 id="13.1.3%20%E5%9C%B0%E5%9D%80%E7%9A%84%E7%94%9F%E5%AD%98%E5%91%A8%E6%9C%9F" style="margin-left:0;">13.1.3 地址的生存周期</h4> 
<p style="margin-left:0;text-align:justify;">两个计时器：优选时间，有效时间；优选时间被包含在有效时间内。有效时间=优选时间+Deprecated阶段的时间</p> 
<ol><li>单播地址被配置在接口后，进入到实验地址阶段，地址状态标记为实验地址</li><li>经过DAD（重复地址检测），该地址进入到优选时间，成为优选地址 
  <ol><li>优选地址可以新建连接，正常收发报文</li></ol></li><li>优选地址超过优选时间计时器，则进入到Deprecated阶段，成为Deprecated状态地址。 
  <ol><li>改地址可以继续使用，但不建议使用，不能用于新的连接的建立。</li></ol></li><li>当地址的使用时间超过了有效时间，则从Deprecated状态切换到invalid状态，成为不可用地址。无法使用该地址进行通信。</li></ol> 
<h4 id="13.1.4%20RA%E6%8A%A5%E6%96%87%E4%B8%AD%E5%89%8D%E7%BC%80%E4%B8%AD%E7%9A%84Flags" style="margin-left:0;">13.1.4 RA报文中前缀中的Flags</h4> 
<p style="margin-left:0;text-align:justify;">1、Autonomouns Addr-conf flag：自动配置位，默认置位，置位后，其他设备收到了该RA报文，可以根据该前缀进行无状态自动配置。如果不置位，表示收到该报文之后，不使用该前缀进行无状态自动配置。</p> 
<p style="margin-left:0;text-align:justify;">2、一个RA报文中可以携带同一个链路的多个前缀信息。</p> 
<h3 id="13.2%20DHCPv6" style="margin-left:0;"><a name="_Toc153389984">13.2 DHCPv6</a></h3> 
<h4 id="13.2.1%20DHCPV6%E7%9A%84%E6%A6%82%E5%BF%B5" style="margin-left:0;">13.2.1 DHCPV6的概念</h4> 
<p style="margin-left:0;text-align:justify;">T1时间：只IPV6的租期剩余0.5的时候，需要进行地址的重新续租操作。</p> 
<p style="margin-left:0;text-align:justify;">T2时间：IPV6地址的租期剩余0.2（到达0.8）的时候，需要进行地址重绑定操作。</p> 
<h4 id="13.2.2%20DCHPv6%E7%9A%84%E6%8A%A5%E6%96%87" style="margin-left:0;">13.2.2 DCHPv6的报文</h4> 
<p style="margin-left:0;text-align:justify;">DHCPv6有状态交互的四步：与IPV4类似</p> 
<p style="margin-left:0;text-align:justify;">DHCPv6 有状态交互两步：携带rapid commit选项，如果服务器支持，则进行两步交互，直接回复reply报文，携带参数；不支持，则进行四步交换，使用Solicit、advertise、request、reply报文实现。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b22e95af2ce6649ba53dd9e660db2ea3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PostgreSQL 低级错误集锦 （不定时更新）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a0cae69c6dd096011ecb3090758c0746/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">案例103:基于微信小程序的移动网赚项目设计与实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>