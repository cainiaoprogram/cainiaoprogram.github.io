<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>docker || 启动mysql容器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="docker || 启动mysql容器" />
<meta property="og:description" content="第1步：拉取mysql镜像。
[root@docker ~]# docker pull mysql:5.7.41 第2步：启动mysql容器。
[root@docker ~]# docker run -d --name sc-mysql-1 -p 33060:3306 -e MYSQL_ROOT_PASSWORD=&#39;sc123456&#39; mysql:5.7.41 5a758962f18df44b0d8c8377b9652bfb791690fa0d15b495f3377ea73dca1463 [root@docker ~]# docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 5a758962f18d mysql:5.7.41 &#34;docker-entrypoint.s…&#34; 3 seconds ago Up 2 seconds 33060/tcp, 0.0.0.0:33060-&gt;3306/tcp, :::33060-&gt;3306/tcp sc-mysql-1 [root@docker ~]# docker images REPOSITORY TAG IMAGE ID CREATED SIZE mysql 5.7.41 0018a8d83892 11 hours ago 455MB [root@docker ~]# netstat -anplut|grep 3306 tcp 0 0 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fd06e7d8b4e9171ee338fb6382ef31fa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-23T10:20:07+08:00" />
<meta property="article:modified_time" content="2023-07-23T10:20:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">docker || 启动mysql容器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <p style="">第1步：拉取mysql镜像。</p> 
 <pre class="kdocs-bash"><code class="language-bash">[root@docker ~]# docker pull mysql:5.7.41</code></pre> 
 <p style="">第2步：启动mysql容器。</p> 
 <pre class="kdocs-bash"><code class="language-bash">[root@docker ~]# docker run -d --name sc-mysql-1 -p 33060:3306  -e MYSQL_ROOT_PASSWORD='sc123456'  mysql:5.7.41
5a758962f18df44b0d8c8377b9652bfb791690fa0d15b495f3377ea73dca1463

[root@docker ~]# docker ps
CONTAINER ID   IMAGE          COMMAND                   CREATED         STATUS         PORTS                                                    NAMES
5a758962f18d   mysql:5.7.41   "docker-entrypoint.s…"   3 seconds ago   Up 2 seconds   33060/tcp, 0.0.0.0:33060-&gt;3306/tcp, :::33060-&gt;3306/tcp   sc-mysql-1

[root@docker ~]#  docker images
REPOSITORY   TAG       IMAGE ID       CREATED        SIZE
mysql        5.7.41    0018a8d83892   11 hours ago   455MB

[root@docker ~]#  netstat -anplut|grep 3306
tcp        0      0 0.0.0.0:33060           0.0.0.0:*               LISTEN      11118/docker-proxy        
tcp6       0      0 :::33060                :::*                    LISTEN      11123/docker-proxy </code></pre> 
 <p style=""><span class="kdocs-color" style="color:#C21C13;">docker-proxy 是docker底层帮助宿主机和容器之间网络通信的，做端口映射。</span></p> 
 <p style="">第3步：进入容器内部；在容器内部登录mysql服务。</p> 
 <pre class="kdocs-bash"><code class="language-bash">[root@docker ~]#  docker exec -it sc-mysql-1 bash
bash-4.2# ls
bin   dev  entrypoint.sh  home  lib64  mnt  proc  run   srv  tmp  var
boot  docker-entrypoint-initdb.d  etc lib   media  opt  root  sbin  sys  usr
bash-4.2# cat /etc/issue
\S
Kernel \r on an \m
bash-4.2# mysql -uroot -p'sc123456'
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.7.41 MySQL Community Server (GPL)

Copyright (c) 2000, 2023, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.00 sec)

mysql&gt; create database sanchuang;
Query OK, 1 row affected (0.00 sec)

mysql&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sanchuang          |
| sys                |
+--------------------+
5 rows in set (0.01 sec)

mysql&gt; show tables;
+---------------------+
| Tables_in_sanchuang |
+---------------------+
| t1                  |
+---------------------+
1 row in set (0.00 sec)

mysql&gt; exit
Bye</code></pre> 
 <hr> 
 <p style="">在宿主机上安装mariadb和mariadb-server</p> 
 <pre class="kdocs-bash"><code class="language-bash">[root@docker ~]#  yum install mariadb mariadb-server -y</code></pre> 
 <p style="">mysql -h 192.168.102.136 -P33060 -uroot -p'sc123456'</p> 
 <blockquote class="kdocs-blockquote" style="">
   -h 192.168.223.131 指定远程连接的mysql服务器的ip地址 host 
  <br> -P 指定端口 port 
  <br> -p 指定密码 password 
  <br> -u 指定用户名 user 
 </blockquote> 
 <pre class="kdocs-bash"><code class="language-bash">[root@MySQL ~]# mysql -h 192.168.102.136 -P33060  -uroot -p'sc123456'
mysql: [Warning] Using a password on the command line interface can be insecure.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 7
Server version: 5.7.41 MySQL Community Server (GPL)

Copyright (c) 2000, 2022, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

root@(none) 16:18  mysql&gt;use mysql
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
root@mysql 16:19  mysql&gt;select user,host from user;
+---------------+-----------+
| user          | host      |
+---------------+-----------+
| root          | %         |
| mysql.session | localhost |
| mysql.sys     | localhost |
| root          | localhost |
+---------------+-----------+
4 rows in set (0.00 sec)

root@mysql 16:19  mysql&gt;create user 'wjl'@'%'identified by 'sc123456';
Query OK, 0 rows affected (0.00 sec)

root@mysql 16:20  mysql&gt;grant all on *.* to 'wjl'@'%';
Query OK, 0 rows affected (0.00 sec)

root@mysql 16:20  mysql&gt;</code></pre> 
 <blockquote class="kdocs-blockquote" style=""> 
  <span class="kdocs-color" style="color:#C21C13;">grant 是mysql里的授权的命令</span> 
  <br> 
  <span class="kdocs-color" style="color:#C21C13;">all 所有的权限： select insert update delete等</span> 
  <br> 
  <span class="kdocs-color" style="color:#C21C13;"> on *.* 在所有的库里的所有的表都可以操作 第一个*表示库 第2个*表示表</span> 
 </blockquote> 
 <pre class="kdocs-bash"><code class="language-bash">MySQL [mysql]&gt; create database  sanchuang;  
Query OK, 1 row affected (0.00 sec)

MySQL [mysql]&gt; use sanchuang
Database changed
MySQL [sanchuang]&gt; create table t1(id int);
Query OK, 0 rows affected (0.02 sec)</code></pre> 
 <p style="">进入容器内部进行查看文件夹和文件</p> 
 <blockquote class="kdocs-blockquote" style=""> 
  <span class="kdocs-color" style="color:#C21C13;">exec 执行</span> 
  <br> 
  <span class="kdocs-color" style="color:#C21C13;">-it 开启一个交互式的终端，进行操作</span> 
  <br> 
  <span class="kdocs-color" style="color:#C21C13;"> interaction terminal</span> 
  <br> 
  <span class="kdocs-color" style="color:#C21C13;">sc-mysql-1 容器的名字</span> 
  <br> 
  <span class="kdocs-color" style="color:#C21C13;">bash 进入容器里面执行的程序</span> 
 </blockquote> 
 <pre class="kdocs-bash"><code class="language-bash">[root@docker ~]#  docker exec  -it  sc-mysql-1  bash
bash-4.2# cd /var/lib/mysql
bash-4.2# ls
auto.cnf    client-cert.pem  ib_logfile0  ibtmp1      performance_schema  sanchuang    sys
ca-key.pem  client-key.pem   ib_logfile1  mysql       private_key.pem   server-cert.pem
ca.pem      ib_buffer_pool   ibdata1    mysql.sock  public_key.pem    server-key.pem
bash-4.2# ls sanchuang/
db.opt  t1.frm  t1.ibd
bash-4.2# </code></pre> 
 <hr> 
 <p style="">在Ubuntu的机器上远程登录容器的mysql</p> 
 <pre class="kdocs-bash"><code class="language-bash">wei@docker:~$ sudo mysql -h 192.168.102.136 -P33060 -uroot -p'sc123456'
[sudo] password for wei: 
Welcome to the MariaDB monitor.  Commands end with ; or \g.
Your MySQL connection id is 12
Server version: 5.7.41 MySQL Community Server (GPL)

Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MySQL [(none)]&gt; show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sanchuang          |
| sys                |
+--------------------+
5 rows in set (0.003 sec)

MySQL [(none)]&gt;</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d5efd3e6153f6f6d76e039ae7615c2a7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">项目安全问题-SM4加解密</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/69009789535e952c9f5367257a59a61e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一张图转3D质量起飞！GitHub刚建空仓就有300&#43;人赶来标星</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>