<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>测试开发 | 相比 Selenium，Web 自动化测试框架 Playwright 有哪些强大的优势？ - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="测试开发 | 相比 Selenium，Web 自动化测试框架 Playwright 有哪些强大的优势？" />
<meta property="og:description" content="Playwright 是由微软的研发团队所开发的一款 Web 自动化测试框架，这个框架具有多平台、跨语言的特点。除了基本的自动化测试能力之外，同时它还具备非常强大的录制功能、追踪功能。以下是 Playwright 与 Selenium 的对比。
​
由此可见，Playwright 不仅具备 Selenium 多语言、跨平台、多浏览器的优点。相较于 Selenium，Playwright 还有更加强大的优势。
Playwright 有哪些优点 支持所有流行的浏览器。
速度更快，更可靠的执行。
更强大的自动化测试配置。
强大的工具库：
Codegen：通过记录你的操作来生成测试。 将它们保存为任何语言。
Playwright inspector： 检查页面、生成选择器、逐步执行测试、查看点击点、探索执行日志。
Trace Viewer：捕获所有信息以调查测试失败，Playwright 跟踪包含测试执行截屏、实时 DOM 快照、动作资源管理器、测试源等等。
环境安装 Python 版本
安装 playwright 插件：pip install pytest-playwright
安装所需的浏览器：playwright install
Java 版本
在 pom.xml 中添加依赖。
&lt;!-- playwright依赖 --&gt; &lt;dependency&gt; &lt;groupId&gt;com.microsoft.playwright&lt;/groupId&gt; &lt;artifactId&gt;playwright&lt;/artifactId&gt; &lt;version&gt;1.29.0&lt;/version&gt; &lt;/dependency&gt; &lt;!-- maven编译使用的插件 --&gt; &lt;plugin&gt; &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt; &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt; &lt;version&gt;3.10.1&lt;/version&gt; &lt;/plugin&gt; 创建一个项目
import com.microsoft.playwright.*; import java.nio.file.Paths; public class App { public static void main(String[] args) { try (Playwright playwright = Playwright." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/db79329fab58b22a379653c23be94dde/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-28T15:43:27+08:00" />
<meta property="article:modified_time" content="2023-01-28T15:43:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">测试开发 | 相比 Selenium，Web 自动化测试框架 Playwright 有哪些强大的优势？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="activity-name"></h2> 
<p>Playwright 是由微软的研发团队所开发的一款 Web 自动化测试框架，这个框架具有多平台、跨语言的特点。除了基本的自动化测试能力之外，同时它还具备非常强大的录制功能、追踪功能。以下是 Playwright 与 Selenium 的对比。</p> 
<div> 
 <p class="img-center"><img alt="" src="https://images2.imgbox.com/77/16/ngtUS5vY_o.png"><span title="点击并拖拽以改变尺寸">​</span></p> 
</div> 
<p>由此可见，Playwright 不仅具备 Selenium 多语言、跨平台、多浏览器的优点。相较于 Selenium，Playwright 还有更加强大的优势。</p> 
<h4>Playwright 有哪些优点</h4> 
<ul><li> <p>支持所有流行的浏览器。</p> </li><li> <p>速度更快，更可靠的执行。</p> </li><li> <p>更强大的自动化测试配置。</p> </li><li> <p>强大的工具库：</p> 
  <ul><li> <p>Codegen：通过记录你的操作来生成测试。 将它们保存为任何语言。</p> </li><li> <p>Playwright inspector： 检查页面、生成选择器、逐步执行测试、查看点击点、探索执行日志。</p> </li><li> <p>Trace Viewer：捕获所有信息以调查测试失败，Playwright 跟踪包含测试执行截屏、实时 DOM 快照、动作资源管理器、测试源等等。</p> </li></ul></li></ul> 
<h4>环境安装</h4> 
<p>Python 版本</p> 
<ol><li> <p>安装 playwright 插件：<code>pip install pytest-playwright</code></p> </li><li> <p>安装所需的浏览器：<code>playwright install</code></p> </li></ol> 
<p>Java 版本</p> 
<ol><li> <p>在 pom.xml 中添加依赖。</p> </li></ol> 
<div> 
 <pre><code class="hljs">&lt;!-- playwright依赖 --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;com.microsoft.playwright&lt;/groupId&gt;
  &lt;artifactId&gt;playwright&lt;/artifactId&gt;
  &lt;version&gt;1.29.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- maven编译使用的插件 --&gt;
&lt;plugin&gt;
  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
  &lt;version&gt;3.10.1&lt;/version&gt;
&lt;/plugin&gt;</code></pre> 
</div> 
<ol><li> <p>创建一个项目</p> </li></ol> 
<div> 
 <pre><code class="hljs">import com.microsoft.playwright.*;
import java.nio.file.Paths;

public class App {
  public static void main(String[] args) {
    try (Playwright playwright = Playwright.create()) {
      Browser browser = playwright.webkit().launch();
      Page page = browser.newPage();
      page.navigate("http://whatsmyuseragent.org/");
      page.screenshot(new Page.ScreenshotOptions().setPath(Paths.get("example.png")));
    }
  }
}</code></pre> 
</div> 
<ol><li> <p>编译并执行（注意：第一次编译执行的时候需要下载对应的依赖，耗时比较久。）</p> </li></ol> 
<div> 
 <pre><code class="hljs">mvn compile exec:java -Dexec.mainClass="包名.文件名"</code></pre> 
</div> 
<h4>Codegen 录制功能</h4> 
<p>Codegen 在启动录制的时候，可以针对于不同的场景，设定不同的参数。比如设置一个特殊的窗口分辨率、颜色主题、指定手机设备等操作。</p> 
<p>设定展示窗口大小</p> 
<p>通过命令的<code>--viewport-size</code>参数可以指定录制时窗口展示的尺寸。用来测试当指定一个特殊的窗口展示尺寸时，界面显示是否还正常。</p> 
<div> 
 <p class="img-center"><img alt="" src="https://images2.imgbox.com/2c/68/JuMLAliz_o.png"><span title="点击并拖拽以改变尺寸">​</span></p> 
</div> 
<ul><li> <p>Python 版本命令：</p> </li></ul> 
<div> 
 <pre><code class="hljs"># 设定展示窗口大小
playwright codegen --viewport-size=800,600 地址</code></pre> 
</div> 
<ul><li> <p>Java 版本命令：</p> </li></ul> 
<div> 
 <pre><code class="hljs"># 设定展示窗口大小
mvn exec:java -e -Dexec.mainClass=com.microsoft.playwright.CLI -Dexec.args="codegen --viewport-size=800,600 地址"</code></pre> 
</div> 
<p>指定设备</p> 
<p>通过命令的<code>--device</code>参数可以指定录制时手机的设备型号。用来测试在使用手机浏览时，界面展示是否正常。</p> 
<div> 
 <p class="img-center"><img alt="" src="https://images2.imgbox.com/a3/96/0e6beOAu_o.png"><span title="点击并拖拽以改变尺寸">​</span></p> 
</div> 
<ul><li> <p>Python 版本命令：</p> </li></ul> 
<div> 
 <pre><code class="hljs"># 指定设备
playwright codegen --device="iPhone 11" 地址</code></pre> 
</div> 
<ul><li> <p>Java 版本命令：</p> </li></ul> 
<div> 
 <pre><code class="hljs"># 指定设备
mvn exec:java -e -Dexec.mainClass=com.microsoft.playwright.CLI -Dexec.args='codegen --device="iPhone 11" 地址'</code></pre> 
</div> 
<p>解决登录认证问题</p> 
<p>通过参数<code>--save-storage</code>可以将认证信息保存在一个文件中。在执行命令后，会自动启动窗口，登录账号之后，手动关闭窗口。即可将认证信息保存下来：</p> 
<div> 
 <p class="img-center"><img alt="" src="https://images2.imgbox.com/d3/39/dqn1pvgR_o.png"><span title="点击并拖拽以改变尺寸">​</span></p> 
</div> 
<p>然后通过<code>--load-storage</code>参数，可以再次启动浏览器，进入上次登录后的网站，发现已经登录成功：</p> 
<div> 
 <p class="img-center"><img alt="" src="https://images2.imgbox.com/eb/0d/mIemWhZQ_o.png"><span title="点击并拖拽以改变尺寸">​</span></p> 
</div> 
<ul><li> <p>Python 版本完整命令：</p> </li></ul> 
<div> 
 <pre><code class="hljs"># 保存登录状态
playwright codegen --save-storage=auth.json
# 加载认证信息
playwright codegen --load-storage=auth.json 地址</code></pre> 
</div> 
<ul><li> <p>Java 版本完整命令：</p> </li></ul> 
<div> 
 <pre><code class="hljs"># 保存登录状态
mvn exec:java -e -Dexec.mainClass=com.microsoft.playwright.CLI -Dexec.args="codegen  --save-storage=auth.json"
# 加载认证信息
mvn exec:java -e -Dexec.mainClass=com.microsoft.playwright.CLI -Dexec.args="codegen --load-storage=auth.json github.com/microsoft/playwright"</code></pre> 
</div> 
<h4>编写测试用例</h4> 
<p>以下为测试人论坛搜索功能的测试步骤，请使用 Playwright 自动化测试代码实现：</p> 
<ol><li> <p>打开测试人论坛https://ceshiren.com/。</p> </li><li> <p>点击搜索按钮。</p> </li><li> <p>输入搜索信息，按下回车键。</p> </li><li> <p>查看搜索的结果是否包含搜索的信息。</p> </li></ol> 
<ul><li> <p>Python 版本的实现</p> </li></ul> 
<div> 
 <pre><code class="hljs">from playwright.sync_api import sync_playwright, expect
def test_playwright():
    # 实例化playwright
    playwright = sync_playwright().start()
    # 打开chrome浏览器,headless默认是True,无头模式,这里设置为False方便查看效果
    browser = playwright.chromium.launch(headless=False)
    # 打开一个窗口页面
    page = browser.new_page()
    # 在当前窗口页面打开测试人网站
    page.goto("https://ceshiren.com/")
    # 定位搜索按钮并点击
    page.locator("#search-button").click()
    # 定位搜索框并输入web自动化
    page.locator("#search-term").fill("web自动化")
    # 使用keyboard.down模拟键盘的enter事件
    page.keyboard.down("Enter")
    # 断言搜索结果
    result = page.locator(".list&gt;li:nth-child(1) .topic-title&gt;span")
    expect(result).to_contain_text("自动化测试")
    # 截图
    page.screenshot(path='screenshot.png')
    # 用例完成后先关闭浏览器
    browser.close()
    # 然后关闭playwright服务
    playwright.stop()</code></pre> 
</div> 
<ul><li> <p>Java 版本的实现</p> </li></ul> 
<div> 
 <pre><code class="hljs">import com.microsoft.playwright.*;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;

import java.nio.file.Paths;

import static com.microsoft.playwright.Playwright.create;
import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertTrue;

public class PlaywrightTest {
    public static Playwright playwright;
    @BeforeAll
    static void setupClass(){
        playwright = create();
    }
    @Test
    void playwrightDemo() {
        // 初始化一个浏览器实例
        Browser browser = playwright.chromium().launch(new BrowserType.LaunchOptions().setHeadless(false));
        // 初始化一个page实例
        Page page = browser.newPage();
        // 打开 ceshiren 页面
        page.navigate("https://ceshiren.com/");
        // 点击搜索按钮
        page.locator("#search-button").click();
        // 输入搜索信息
        page.locator("#search-term").fill("Appium");
        // 按下回车按钮
        page.keyboard().down("Enter");
        // 获取搜索结果的第一条
        Locator result = page.locator(".results .item:nth-child(1) .topic-title");
        // 断言搜索结果是否包含关键字
        assertTrue(result.innerText().contains("Appium"));
    }
}</code></pre> 
</div> 
<h4>Trace Viewer 追踪功能</h4> 
<p>在做自动化测试过程中，常常会碰到的一个痛点问题：自动化测试明明发现了代码的 BUG，但是复现比较困难，研发又不认账。</p> 
<p>碰到这种场景，Playwright 的 Trace 功能可以完美的解决。因为一旦设定了 Trace，代码执行过程中的每一个步骤，都有详细的截图，日志，时长的信息，比起功能测试的过程记录信息还要更加全面。</p> 
<p>而且 Trace 的使用也非常简单，整体来说只需要两个步骤：</p> 
<ol><li> <p>在代码中添加 Trace 配置。</p> </li><li> <p>打开 trace 记录文件，查看 trace 记录。</p> </li></ol> 
<p>在代码中添加配置主要注意以下几点：</p> 
<ol><li> <p>通过 browser 实例生成一个 context 实例</p> </li><li> <p>通过 context 实例的 tracing 配置启动参数</p> </li><li> <p>通过 context 实例生成 page 实例对象。并且想要 trace 的操作，必须都使用这个 page 实例对象</p> </li><li> <p>在想要结束追踪的地方，添加 tracing 的结束配置。</p> </li></ol> 
<ul><li> <p>Python 版本实现</p> </li></ul> 
<div> 
 <pre><code class="hljs">from playwright.sync_api import sync_playwright, expect


def test_ceshiren():
    # 实例化一个playwright对象
    playwright = sync_playwright().start()
    # 启动谷歌浏览器，模式使用无头模式
    browser = playwright.chromium.launch(headless=False)
    # =========== trace 的配置
    # 1. 生成 一个 context 实例
    context = browser.new_context()
    # 2. 添加 trace 的配置信息
    context.tracing.start(screenshots=True, snapshots=True, sources=True)
    # 3. 使用填加了trace 配置的 context 实例，去实例化一个page对象
    page = context.new_page()
    # 跳转到ceshiren页面
    page.goto("https://ceshiren.com/")
    # 点击搜索按钮， 输入css定位
    page.locator("#search-button").click()
    # 输入搜索的内容， 输入css定位
    page.locator("#search-term").fill("Appium")
    # 按下回车键
    page.keyboard.down("Enter")
    # time.sleep(3)
    result = page.locator(".results .item:nth-child(1) .topic-title")
    expect(result).to_contain_text("Appium")
    # 4. 在关闭浏览器之前，一定要结束trace
    context.tracing.stop(path="ceshiren.zip")
    browser.close()</code></pre> 
</div> 
<ul><li> <p>Java 版本实现</p> </li></ul> 
<p>注意：Java 版本需要配置临时环境变量<code>PLAYWRIGHT_JAVA_SRC=src/test/java</code></p> 
<div> 
 <pre><code class="hljs">import com.microsoft.playwright.*;
import org.junit.jupiter.api.BeforeAll;
import org.junit.jupiter.api.Test;

import java.nio.file.Paths;

import static org.junit.jupiter.api.Assertions.assertTrue;
// 直接调用 trace 报错，报错原因是 trace 需要设置 PLAYWRIGHT_JAVA_SRC 一个环境变量
// com.microsoft.playwright.PlaywrightException: Source root directory must be specified via PLAYWRIGHT_JAVA_SRC environment variable when source collection is enabled
// 解决方案： 设置 PLAYWRIGHT_JAVA_SRC=src/test/java
public class PlaywrightTraceTest {
    public static Playwright playwright;

    @BeforeAll
    static void setupClass(){
        playwright = Playwright.create();

    }
    @Test
    void ceshiren(){
        // 默认是使用无头模式，添加 false 的配置
        Browser browser = playwright.chromium().launch(new BrowserType.LaunchOptions().setHeadless(false));
        BrowserContext context = browser.newContext();
        // 添加trace 的配置
        // 添加trace配置
        context.tracing().start(new Tracing.StartOptions()
                .setScreenshots(true)
                .setSnapshots(true)
                .setSources(true));
        Page page = context.newPage();
//        Page page = browser.newPage();
        page.navigate("https://ceshiren.com/");
        // 使用css定位
        // 点击搜索框
        page.locator("#search-button").click();
        // 输入搜索内容
        page.locator("#search-term").fill("Appium");
        // 按下回车键
        page.keyboard().down("Enter");
        // 找到第一个标题
        String res = page.locator(".results .item:nth-child(1) .topic-title").innerText();
//        System.out.println(res);
        page.screenshot(new Page.ScreenshotOptions()
                .setPath(Paths.get("ceshiren.png")));
        // 在测试用例执行完成之后，结束追踪
        context.tracing().stop(new Tracing.StopOptions()
                .setPath(Paths.get("ceshiren.zip")));
        // 断言找到的标题里面包含Appium关键字
        assertTrue(res.contains("Appium"));
    }

}</code></pre> 
</div> 
<p>在执行完成之后，查看项目根目录是否有生成对应的追踪文件夹。如果正常生成，即可使用以下命令查看 trace 的结果。</p> 
<div> 
 <p class="img-center"><img alt="" src="https://images2.imgbox.com/06/95/9ken68uQ_o.png"><span title="点击并拖拽以改变尺寸">​</span></p> 
</div> 
<p><strong><em> </em></strong><strong><code>最后：</code></strong> 如果你平时有很多问题想要解决，你的测试职业规划也需要一点光亮，你也想跟着大家一起分享探讨，我给你推荐一个 <strong>「软件测试学习交流群：746506216」</strong> 你缺的知识这里有，你少的技能这里有，你要的大牛也在这里……</p> 
<hr> 
<h3><a id="httpsmpweixinqqcoms__bizMzA3NjgzNzMwNQmid2247488615idx1sn224b86d25074573f836bdf008409de52chksm9f5a6cb1a82de5a7e0e86708a061c274ac4676617a675f319c753b219806b1d8161daf83f855token2114296175langzh_CNrd_7"></a>资源分享【<a href="https://mp.weixin.qq.com/s?__biz=MzA3NjgzNzMwNQ==&amp;mid=2247488615&amp;idx=1&amp;sn=224b86d25074573f836bdf008409de52&amp;chksm=9f5a6cb1a82de5a7e0e86708a061c274ac4676617a675f319c753b219806b1d8161daf83f855&amp;token=2114296175&amp;lang=zh_CN#rd" rel="nofollow" title="这份资料必须领取~">这份资料必须领取~</a>】</h3> 
<p><strong>下方这份完整的软件测试视频学习教程已经上传CSDN官方认证的二维码，朋友们如果需要可以自行免费领取 <code>【保证100%免费】</code></strong></p> 
<p style="text-align:center;"><strong><code><img alt="" src="https://images2.imgbox.com/ae/ba/7RVGHee3_o.png"><span title="点击并拖拽以改变尺寸">​</span></code></strong></p> 
<p style="text-align:center;"> <img alt="在这里插入图片描述" src="https://images2.imgbox.com/37/94/1VwjIomB_o.png"><span title="点击并拖拽以改变尺寸">​</span></p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4d3f785a3556e850ad67bf9ef50b7776/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用Vite安装并初始化Vue2 &#43; pinia &#43; vue-router项目</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/680367cc06cdc642e99717e7e262f0ac/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">个人流媒体服务搭建</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>