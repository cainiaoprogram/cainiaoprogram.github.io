<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vueä½¿ç”¨piniaç®¡ç†æ•°æ® pinia æŒä¹…åŒ–å­˜å‚¨ - èœé¸Ÿç¨‹åºå‘˜åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vueä½¿ç”¨piniaç®¡ç†æ•°æ® pinia æŒä¹…åŒ–å­˜å‚¨" />
<meta property="og:description" content="Vueä½¿ç”¨piniaç®¡ç†æ•°æ® Vue3 &#43; TS æ­¥éª¤ï¼š åœ¨main.tsä¸­æ³¨å†Œ pinia
import { createPinia } from &#39;pinia&#39; const pinia = createPinia() app.use(pinia) åˆ›å»ºæ–‡ä»¶store/modules/home.ts,ç”¨äºç®¡ç†homeæ¨¡å—çš„æ•°æ®
import { defineStore } from &#39;pinia&#39; const useHomeStore = defineStore(&#39;home&#39;,{ state:()=&gt;({ name:&#39;tony&#39; }) }) export default useHomeStore åˆ›å»ºstore/index.tsç»Ÿä¸€ç®¡ç†æ‰€æœ‰çš„æ¨¡å—
import useHomeStore from &#39;./modules/home&#39; const useStore = () =&gt; { return { home:useHomeStore() } } export default useStore æµ‹è¯•
import useStore from &#39;@/store&#39; const { home } = useStore() console.log(home.tony) å®é™…æ“ä½œï¼šä½¿ç”¨ Pinia è·å–å¤´éƒ¨åˆ†ç±»å¯¼èˆª åœ¨store/modules/home." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a0eb3a8b2fbb04ec7bd36d9eddc4ee2d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-20T15:14:43+08:00" />
<meta property="article:modified_time" content="2022-08-20T15:14:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="èœé¸Ÿç¨‹åºå‘˜åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">èœé¸Ÿç¨‹åºå‘˜åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vueä½¿ç”¨piniaç®¡ç†æ•°æ® pinia æŒä¹…åŒ–å­˜å‚¨</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Vuepinia_0"></a>Vueä½¿ç”¨<code>pinia</code>ç®¡ç†æ•°æ®</h2> 
<h4><a id="Vue3__TS_2"></a>Vue3 + TS</h4> 
<h5><a id="_4"></a>æ­¥éª¤ï¼š</h5> 
<ol><li> <p>åœ¨<code>main.ts</code>ä¸­æ³¨å†Œ <code>pinia</code></p> <pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createPinia <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span>
</code></pre> </li><li> <p>åˆ›å»ºæ–‡ä»¶<code>store/modules/home.ts</code>,ç”¨äºç®¡ç†homeæ¨¡å—çš„æ•°æ®</p> <pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">const</span> useHomeStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">state</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        name<span class="token operator">:</span><span class="token string">'tony'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useHomeStore
</code></pre> </li><li> <p>åˆ›å»º<code>store/index.ts</code>ç»Ÿä¸€ç®¡ç†æ‰€æœ‰çš„æ¨¡å—</p> <pre><code class="prism language-ts"><span class="token keyword">import</span> useHomeStore <span class="token keyword">from</span> <span class="token string">'./modules/home'</span>

<span class="token keyword">const</span> <span class="token function-variable function">useStore</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
        home<span class="token operator">:</span><span class="token function">useHomeStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useStore
</code></pre> </li><li> <p>æµ‹è¯•</p> <pre><code class="prism language-ts"><span class="token keyword">import</span> useStore <span class="token keyword">from</span> <span class="token string">'@/store'</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> home <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>home<span class="token punctuation">.</span>tony<span class="token punctuation">)</span>
</code></pre> </li></ol> 
<h5><a id="_Pinia__52"></a>å®é™…æ“ä½œï¼šä½¿ç”¨ <code>Pinia</code> è·å–å¤´éƒ¨åˆ†ç±»å¯¼èˆª</h5> 
<ol><li> <p>åœ¨<code>store/modules/home.ts</code>ä¸­æä¾› state å’Œ actions</p> <pre><code class="prism language-ts"><span class="token keyword">const</span> useHomeStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">,</span><span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">state</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        categoryList<span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    actions<span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
     aysnc <span class="token function">getAllCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> rquest<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/home/category/head'</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>categoryList <span class="token operator">=</span> data<span class="token punctuation">.</span>result                        
     <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> </li><li> <p>åœ¨<code>Layout/index.vue</code>ä¸­å‘é€è¯·æ±‚</p> <pre><code class="prism language-ts"><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">"ts"</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> useStore <span class="token keyword">from</span> <span class="token string">'@/store'</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> home <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
home<span class="token punctuation">.</span><span class="token function">getAllCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> </li></ol> 
<h4><a id="TS__80"></a>TS ç±»å‹å£°æ˜æ–‡ä»¶</h4> 
<h5><a id="_82"></a>å®šä¹‰ç±»å‹å£°æ˜</h5> 
<ul><li>åœ¨<code>src\types\api\home.d.ts</code>ä¸­å®šä¹‰æ•°æ®ç±»å‹</li></ul> 
<pre><code class="prism language-ts"><span class="token comment">// åˆ†ç±»æ•°æ®å•é¡¹ç±»å‹</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Goods</span> <span class="token punctuation">{<!-- --></span>
  desc<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  picture<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  price<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  title<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  alt<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Children</span> <span class="token punctuation">{<!-- --></span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  picture<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  goods<span class="token operator">:</span> Goods<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Category</span> <span class="token punctuation">{<!-- --></span>
  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  picture<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  children<span class="token operator">:</span> Children<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  goods<span class="token operator">:</span> Goods<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ†ç±»æ•°æ®åˆ—è¡¨ç±»å‹</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">CategoryList</span> <span class="token operator">=</span> Category<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_117"></a>ç±»å‹å‡ºå£ç»Ÿä¸€</h5> 
<ul><li>æ–°å»º <code>src\types\index.d.ts</code></li></ul> 
<pre><code class="prism language-ts"><span class="token comment">// ç»Ÿä¸€å¯¼å‡ºæ‰€æœ‰ç±»å‹æ–‡ä»¶</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">"./api/home"</span><span class="token punctuation">;</span>
</code></pre> 
<h5><a id="_126"></a>åº”ç”¨</h5> 
<ul><li>ä¿®æ”¹<code>store/modules/home.ts</code>ï¼Œç»™ <code>axios</code> è¯·æ±‚å¢åŠ æ³›å‹</li></ul> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"pinia"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> request <span class="token keyword">from</span> <span class="token string">"@/utils/request"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{<!-- --></span> CategoryList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@/types"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> useHomeStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">"home"</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    categoryList<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> CategoryList<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  actions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">async</span> <span class="token function">getAllCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span>data<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"/home/category/head"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>categoryList <span class="token operator">=</span> data<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> useHomeStore<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="Axios__152"></a>Axios äºŒæ¬¡å°è£…</h4> 
<p><code>src\utils\request.ts</code></p> 
<pre><code class="prism language-diff">-import axios from "axios";
+import axios, { type Method } from "axios";

const instance = axios.create({
  baseURL: "xxx",
  timeout: 5000,
});

// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨
instance.interceptors.request.use(
  function (config) {
    // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ
    return config;
  },
  function (error) {
    // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ
    return Promise.reject(error);
  }
);

// æ·»åŠ å“åº”æ‹¦æˆªå™¨
instance.interceptors.response.use(
  function (response) {
    return response;
  },
  function (error) {
    // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ
    return Promise.reject(error);
  }
);

+ // åç«¯è¿”å›çš„æ¥å£æ•°æ®æ ¼å¼
+ interface ApiRes&lt;T = unknown&gt; {
+    msg: string;
+    result: T;
+ }

+/**
+ * axios äºŒæ¬¡å°è£…ï¼Œæ•´åˆ TS ç±»å‹
+ * @param url  è¯·æ±‚åœ°å€
+ * @param method  è¯·æ±‚ç±»å‹
+ * @param submitData  å¯¹è±¡ç±»å‹ï¼Œæäº¤æ•°æ®
+ */
+export const http = &lt;T&gt;(method: Method, url: string, submitData?: object) =&gt; {
+  return instance.request&lt;ApiRes&lt;T&gt;&gt;({
+    url,
+    method,
+    // ğŸ”” è‡ªåŠ¨è®¾ç½®åˆé€‚çš„ params/data é”®åç§°ï¼Œå¦‚æœ method ä¸º get ç”¨ params ä¼ è¯·æ±‚å‚æ•°ï¼Œå¦åˆ™ç”¨ data
+    [method.toUpperCase() === "GET" ? "params" : "data"]: submitData,
+  });
+};

export default instance;

</code></pre> 
<p>ä½¿ç”¨<code>store/modules/home.ts</code></p> 
<pre><code class="prism language-diff">import { defineStore } from 'pinia'
-import request from "@/utils/request";
+import { http } from "@/utils/request";

const useHomeStore = defineStore('home',{
    state:()=&gt;({
        name:'tony'
    })ï¼Œ
    actions: {
    async getAllCategory() {
-    const res = await request.get&lt;ApiRes&lt;CategoryList&gt;&gt;("/home/category/head");
+    // ä½¿ç”¨èµ·æ¥ç®€æ´å¾ˆå¤š
+    const res = await http&lt;CategoryList&gt;("GET", "/home/category/head");
     this.categoryList = res.data.result;
    },
  },
})

export default useHomeStore
</code></pre> 
<h2><a id="pinia__239"></a>pinia æŒä¹…åŒ–å­˜å‚¨</h2> 
<p><strong>ç›®æ ‡ï¼š</strong> é€šè¿‡ <code>Pinia</code> æ’ä»¶å¿«é€Ÿå®ç°æŒä¹…åŒ–å­˜å‚¨ã€‚</p> 
<p>æ’ä»¶æ–‡æ¡£ï¼š<a href="https://www.npmjs.com/package/pinia-plugin-persistedstate" rel="nofollow">ç‚¹å‡»æŸ¥çœ‹</a></p> 
<h4><a id="_245"></a>ç”¨æ³•</h4> 
<p><strong>å®‰è£…</strong></p> 
<pre><code class="prism language-shell"><span class="token function">yarn</span> <span class="token function">add</span> pinia-plugin-persistedstate
<span class="token comment"># æˆ–</span>
<span class="token function">npm</span> i pinia-plugin-persistedstate
</code></pre> 
<p><strong>ä½¿ç”¨æ’ä»¶</strong></p> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> piniaPluginPersistedstate <span class="token keyword">from</span> <span class="token string">'pinia-plugin-persistedstate'</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pinia<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>piniaPluginPersistedstate<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p><strong>æ¨¡å—å¼€å¯æŒä¹…åŒ–</strong></p> 
<pre><code class="prism language-ts"><span class="token keyword">const</span> useHomeStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">"home"</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{<!-- --></span>
<span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// defineStore ç¬¬ä¸‰ä¸ªå‚æ•°</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// æ·»åŠ é…ç½®å¼€å¯ state/ref æŒä¹…åŒ–å­˜å‚¨</span>
    <span class="token comment">// æ’ä»¶é»˜è®¤å­˜å‚¨å…¨éƒ¨ state/ref</span>
    persist<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="_282"></a>å¸¸è§ç–‘é—®</h4> 
<ul><li><code>Vue2</code> èƒ½ä¸èƒ½ç”¨ <code>Pinia</code> å’Œ æŒä¹…åŒ–å­˜å‚¨æ’ä»¶ã€‚ 
  <ul><li>å¯ä»¥ä½¿ç”¨ï¼Œéœ€é…åˆ <code>@vue/composition-api</code> å…ˆè®© <code>Vue2</code> è€é¡¹ç›®æ”¯æŒ <code>ç»„åˆå¼API</code>ã€‚</li><li><code>Pinia</code> èƒ½åœ¨ <code>ç»„åˆå¼API</code> ä¸­ä½¿ç”¨ã€‚</li></ul> </li><li>æ¨¡å—åšäº†æŒä¹…åŒ–åï¼Œä»¥åæ•°æ®ä¼šä¸ä¼šå˜ï¼Œæ€ä¹ˆåŠï¼Ÿ 
  <ul><li>å…ˆè¯»å–æœ¬åœ°çš„æ•°æ®ï¼Œå¦‚æœæ–°çš„è¯·æ±‚è·å–åˆ°æ–°æ•°æ®ï¼Œä¼šè‡ªåŠ¨æŠŠæ–°æ•°æ®è¦†ç›–æ‰æ—§çš„æ•°æ®ã€‚</li><li>æ— éœ€é¢å¤–å¤„ç†ï¼Œæ’ä»¶ä¼šè‡ªå·±æ›´æ–°åˆ°æœ€æ–°æ•°æ®ã€‚</li></ul> </li></ul> 
<h4><a id="_291"></a>è¿›é˜¶ç”¨æ³•ï¼ˆæŒ‰éœ€æŒä¹…åŒ–æ‰€éœ€æ•°æ®ï¼‰</h4> 
<p>éœ€æ±‚ï¼šä¸æƒ³æ‰€æœ‰æ•°æ®éƒ½æŒä¹…åŒ–å¤„ç†ï¼Œèƒ½ä¸èƒ½æŒ‰éœ€æŒä¹…åŒ–æ‰€éœ€æ•°æ®ï¼Œæ€ä¹ˆåŠï¼Ÿ</p> 
<ul><li>å¯ä»¥ç”¨é…ç½®å¼å†™æ³•ï¼ŒæŒ‰éœ€ç¼“å­˜æŸäº›æ¨¡å—çš„æ•°æ®ã€‚</li></ul> 
<pre><code class="prism language-ts"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> defineStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      someState<span class="token operator">:</span> <span class="token string">'hello pinia'</span><span class="token punctuation">,</span>
      nested<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        data<span class="token operator">:</span> <span class="token string">'nested pinia'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// æ‰€æœ‰æ•°æ®æŒä¹…åŒ–</span>
  <span class="token comment">// persist: true,</span>
  <span class="token comment">// æŒä¹…åŒ–å­˜å‚¨æ’ä»¶å…¶ä»–é…ç½®</span>
  persist<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// æŒ‰éœ€å­˜å‚¨ state/ref</span>
    <span class="token comment">// ä¿®æ”¹å­˜å‚¨ä¸­ä½¿ç”¨çš„é”®åç§°ï¼Œé»˜è®¤ä¸ºå½“å‰ Storeçš„ id</span>
    key<span class="token operator">:</span> <span class="token string">'storekey'</span><span class="token punctuation">,</span>
    <span class="token comment">// ä¿®æ”¹ä¸º sessionStorageï¼Œé»˜è®¤ä¸º localStorage</span>
    storage<span class="token operator">:</span> window<span class="token punctuation">.</span>sessionStorage<span class="token punctuation">,</span>
    <span class="token comment">// ğŸ‰æŒ‰éœ€æŒä¹…åŒ–ï¼Œé»˜è®¤ä¸å†™ä¼šå­˜å‚¨å…¨éƒ¨</span>
    paths<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'nested.data'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/db9febd80adb2fc8ee9709381eb29f93/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">ã€Šæ·±å…¥æµ…å‡ºWPFã€‹â€”â€”èµ„æºå­¦ä¹ </p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/78dc81b559c182a1a2a4a43159670c89/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">openbmcå¼€å‘47ï¼šwebuiå¼€å‘â€”å¢åŠ æ“ä½œlog</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 èœé¸Ÿç¨‹åºå‘˜åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>