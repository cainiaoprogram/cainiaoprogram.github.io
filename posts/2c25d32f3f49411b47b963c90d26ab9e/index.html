<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python压缩图片大小 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python压缩图片大小" />
<meta property="og:description" content="今天遇到一个问题，制作的网站因为图片尺寸比较大导致加载很慢，所以想通过压缩图片的方式来加快页面的加载速度（当然也可以选择cdn和oss的方式来加快页面加载速度）
话不多说，Python肯定是首选项嘛，那么PIL（Python Imaging Library）库肯定是要用到的，下面一起看下怎么操作吧
一、安装PIL库
pip install Pillow Pillow对python的版本有一定要求，详见下图：
二、检验是否安装成功
from PIL import Image print(Image.__version__) 三、打开图片
img = Image.open(&#34;test.jpg&#34;) # 如果文件不存在或格式不支持，会抛出异常。所以我们可以用try-except语句来捕获异常，并打印错误信息 try: img = Image.open(&#34;test.jpg&#34;) except IOError as e: print(e) 四、保存图片
img.save(&#34;new.jpg&#34;) # 如果要指定保存的格式，可以传入format参数，例如： img.save(&#34;new.png&#34;, format=&#34;PNG&#34;) # 如果要指定保存的质量，可以传入quality参数，取值范围是1-95，默认是75。质量越高，文件越大，压缩效果越差；质量越低，文件越小，压缩效果越好。例如： img.save(&#34;new.jpg&#34;, quality=50) 五、获取图片信息
在对图像进行压缩之前，我们可能需要获取一些图像的基本信息，例如大小、格式、模式等。这些信息可以通过Image对象的属性来获取
# size属性：返回一个元组，表示图像的宽度和高度（单位是像素），例如(800, 600) print(img.size) # (800, 600) # format属性：返回一个字符串，表示图像的格式，例如&#34;JPEG&#34; print(img.format) # JPEG # mode属性：返回一个字符串，表示图像的模式，例如&#34;RGB&#34; print(img.mode) # RGB 六、修改图片
如果要修改图像的大小、格式或模式，可以使用Image对象的方法
# resize方法：接受一个元组作为参数，表示新的宽度和高度（单位是像素），返回一个新的Image对象 new_img = img.resize((400, 300)) # convert方法：接受一个字符串作为参数，表示新的模式，返回一个新的Image对象 new_img = img." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2c25d32f3f49411b47b963c90d26ab9e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-02T21:37:12+08:00" />
<meta property="article:modified_time" content="2024-01-02T21:37:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python压缩图片大小</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p class="img-center"><img alt="" height="329" src="https://images2.imgbox.com/17/4d/AIr4K7Uh_o.png" width="464"></p> 
<p>今天遇到一个问题，制作的网站因为图片尺寸比较大导致加载很慢，所以想通过压缩图片的方式来加快页面的加载速度（当然也可以选择cdn和oss的方式来加快页面加载速度）</p> 
<p>话不多说，Python肯定是首选项嘛，那么PIL（Python Imaging Library）库肯定是要用到的，下面一起看下怎么操作吧</p> 
<p><img alt="" height="320" src="https://images2.imgbox.com/3f/6a/hWUfaHYL_o.png" width="800"></p> 
<p>一、安装PIL库</p> 
<pre><code class="language-python">pip install Pillow
</code></pre> 
<p>Pillow对python的版本有一定要求，详见下图：</p> 
<p><img alt="" height="370" src="https://images2.imgbox.com/f9/4b/sXZ8Wjlq_o.png" width="661"></p> 
<p>二、检验是否安装成功</p> 
<pre><code class="language-python">from PIL import Image
print(Image.__version__)</code></pre> 
<p>三、打开图片</p> 
<pre><code class="language-python">img = Image.open("test.jpg")



# 如果文件不存在或格式不支持，会抛出异常。所以我们可以用try-except语句来捕获异常，并打印错误信息
try:
    img = Image.open("test.jpg")
except IOError as e:
    print(e)</code></pre> 
<p>四、保存图片</p> 
<pre><code class="language-python">img.save("new.jpg")

# 如果要指定保存的格式，可以传入format参数，例如：
img.save("new.png", format="PNG")

# 如果要指定保存的质量，可以传入quality参数，取值范围是1-95，默认是75。质量越高，文件越大，压缩效果越差；质量越低，文件越小，压缩效果越好。例如：
img.save("new.jpg", quality=50)




</code></pre> 
<p>五、获取图片信息</p> 
<blockquote> 
 <p>在对图像进行压缩之前，我们可能需要获取一些图像的基本信息，例如大小、格式、模式等。这些信息可以通过Image对象的属性来获取</p> 
</blockquote> 
<pre><code class="language-python"># size属性：返回一个元组，表示图像的宽度和高度（单位是像素），例如(800, 600)
print(img.size) # (800, 600)

# format属性：返回一个字符串，表示图像的格式，例如"JPEG"
print(img.format) # JPEG

# mode属性：返回一个字符串，表示图像的模式，例如"RGB"
print(img.mode) # RGB</code></pre> 
<p>六、修改图片</p> 
<blockquote> 
 <p>如果要修改图像的大小、格式或模式，可以使用Image对象的方法</p> 
</blockquote> 
<pre><code class="language-python"># resize方法：接受一个元组作为参数，表示新的宽度和高度（单位是像素），返回一个新的Image对象
new_img = img.resize((400, 300))


# convert方法：接受一个字符串作为参数，表示新的模式，返回一个新的Image对象
new_img = img.convert("L") #转化为为灰色图像

# transpose方法：接受一个常量作为参数，表示旋转或翻转的方式，返回一个新的Image对象
new_img = img.transpose(Image.ROTATE_90) #旋转90度

</code></pre> 
<p>七、压缩图片</p> 
<blockquote> 
 <p>有了上面的知识，我们就可以开始压缩图像了。压缩图像的本质就是减少图像的大小和质量，从而减少图像占用的空间和带宽。我们可以通过以下几种方式来压缩图像</p> 
</blockquote> 
<p>1、改变图片大小resize</p> 
<pre><code class="language-python"># 改变图像的大小：通过resize方法，我们可以将图像的宽度和高度缩小一半或更多，这样就可以大幅度减少图像的像素数，从而减少图像的大小。例如：

img = Image.open("test.jpg")
print(img.size) # (640, 640)
new_img = img.resize((400, 300))
print(new_img.size) # (400, 300)
new_img.save("new.jpg")
</code></pre> 
<p>2、该片图片格式format</p> 
<blockquote> 
 <p>改变图像的格式：通过save方法，我们可以将图像保存为不同的格式，不同的格式有不同的压缩算法和效率</p> 
</blockquote> 
<pre><code class="language-python"># 一般来说：
# JPEG格式比PNG格式更适合压缩彩色图像
# PNG格式比JPEG格式更适合压缩黑白或透明图像

img = Image.open("test.png")
print(img.format) # PNG
img.save("new.jpg", format="JPEG")
print(new_img.format) # JPEG
</code></pre> 
<p>3、改变图片质量quality</p> 
<blockquote> 
 <p>改变图像的质量：通过save方法，我们可以指定quality参数，来控制图像保存时的质量。质量越低，压缩效果越好，但是也会损失一些细节和清晰度。我们可以根据需要，选择一个合适的质量值</p> 
</blockquote> 
<pre><code class="language-python">img = Image.open("test.jpg")
img.save("new.jpg", quality=50)</code></pre> 
<p>4、改变图片模式convert</p> 
<blockquote> 
 <p>改变图像的模式：通过convert方法，我们可以将图像转换为不同的模式。不同的模式有不同的颜色数和位深度，一般来说，颜色数越少，位深度越低，压缩效果越好。</p> 
 <p></p> 
 <p>例如：</p> 
 <p>RGB模式有16777216种颜色，每个像素占用24位；</p> 
 <p>L模式只有256种颜色，每个像素占用8位；</p> 
 <p>1模式只有2种颜色（黑白），每个像素占用1位。</p> 
</blockquote> 
<pre><code class="language-python"># 我们可以将彩色图像转换为灰度或黑白图像来压缩

img = Image.open("test.jpg")
print(img.mode) # RGB
new_img = img.convert("L")
print(new_img.mode) # L
new_img.save("new.jpg")</code></pre> 
<p>关于批量压缩图片可以看我之前的文章：<a class="link-info" href="https://blog.csdn.net/weixin_42019349/article/details/132689515" title="https://blog.csdn.net/weixin_42019349/article/details/132689515">https://blog.csdn.net/weixin_42019349/article/details/132689515</a>希望对你有所帮助 __</p> 
<pre><code class="hljs">var code = "5ed8037e-ba45-4bed-b5f7-d9c7cae0a9f8"
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f73059b7e581d2796b0e7b2d74023eb9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">UE5 VR版增强输入初体验 官方模板学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bb800725f0e5b6d13b9d3b7101874093/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Github排名前10的Java Decompiler</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>