<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot - 获取POST请求参数详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot - 获取POST请求参数详解" />
<meta property="og:description" content="介绍了 Controller 如何接收通过 GET 方式传递过来的参数，下面接着演示如何接收通过 POST 方式传递过来的参数。
一、接收 Form 表单数据 1，基本的接收方法 （1）下面样例 Controller 接收 form-data 格式的 POST 数据：
package com.example.demo; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestParam; import org.springframework.web.bind.annotation.RestController; @RestController public class HelloController { @PostMapping(&#34;/hello&#34;) public String hello(@RequestParam(&#34;name&#34;) String name, @RequestParam(&#34;age&#34;) Integer age) { return &#34;name：&#34; &#43; name &#43; &#34;\nage：&#34; &#43; age; } } 2，参数没有传递的情况 （1）如果没有传递参数 Controller 将会报错，这个同样有如下两种解决办法：
使用 required = false 标注参数是非必须的。使用 defaultValue 给参数指定个默认值。 package com.example.demo; import org.springframework.web.bind.annotation.PostMapping; import org.springframework.web.bind.annotation.RequestParam; import org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ec9a47a3953bd8da19c9c2ec5fda4fea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-16T14:33:52+08:00" />
<meta property="article:modified_time" content="2021-08-16T14:33:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot - 获取POST请求参数详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>介绍了 Controller 如何接收通过 GET 方式传递过来的参数，下面接着演示如何接收通过 POST 方式传递过来的参数。</p> 
<h3><a id="_Form__2"></a>一、接收 Form 表单数据</h3> 
<h4><a id="1_4"></a>1，基本的接收方法</h4> 
<p>（1）下面样例 Controller 接收 form-data 格式的 POST 数据：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@RequestParam("name") String name,
                        @RequestParam("age") Integer age) {
        return "name：" + name + "\nage：" + age;
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/99/cc/khR20GCD_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_28"></a>2，参数没有传递的情况</h4> 
<p>（1）如果没有传递参数 Controller 将会报错，这个同样有如下两种解决办法：</p> 
<ul><li>使用 required = false 标注参数是非必须的。</li><li>使用 defaultValue 给参数指定个默认值。</li></ul> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@RequestParam(name = "name", defaultValue = "xxx") String name,
                        @RequestParam(name = "age", required = false) Integer age) {
        return "name：" + name + "\nage：" + age;
    }
}
</code></pre> 
<h4><a id="3_map__58"></a>3，使用 map 来接收参数</h4> 
<p>（1）Controller 还可以直接使用 map 来接收所有的请求参数：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
 
import java.util.Map;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@RequestParam Map&lt;String,Object&gt; params) {
        return "name：" + params.get("name") + "\nage：" + params.get("age");
    }
}
</code></pre> 
<h4><a id="4_82"></a>4，接收一个数组</h4> 
<p>（1）表单中有多个同名参数，Controller 这边可以定义一个数据进行接收：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;
 
import java.util.Map;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@RequestParam("name") String[] names) {
        String result = "";
        for(String name:names){
            result += name + "\n";
        }
        return result;
    }
}
</code></pre> 
<h4><a id="5_110"></a>5，使用对象来接收参数</h4> 
<p>（1）如果一个 post 请求的参数太多，我们构造一个对象来简化参数的接收方式：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(User user) {
        return "name：" + user.getName() + "\nage：" + user.getAge();
    }
}
</code></pre> 
<p>（2）User 类的定义如下，到时可以直接将多个参数通过 getter、setter 方法注入到对象中去：</p> 
<pre><code>package com.example.demo;
 
public class User {
    private String name;
    private Integer age;
 
    public String getName() {
        return name;
    }
 
    public void setName(String name) {
        this.name = name;
    }
 
    public Integer getAge() {
        return age;
    }
 
    public void setAge(Integer age) {
        this.age = age;
    }
}
</code></pre> 
<p>（3）下面是一个简单的测试样例：</p> 
<p>（4）如果传递的参数有前缀，且前缀与接收实体类的名称相同，那么参数也是可以正常传递的</p> 
<p>（5）如果一个 get 请求的参数分属不同的对象，也可以使用多个对象来接收参数：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(User user, Phone phone) {
        return "name：" + user.getName() + "\nage：" + user.getAge()
                + "\nnumber：" + phone.getNumber();
    }
}
</code></pre> 
<h4><a id="6_182"></a>6，使用对象接收时指定参数前缀</h4> 
<p>（1）如果传递的参数有前缀，且前缀与接收实体类的名称不同相，那么参数无法正常传递：</p> 
<p>（2）我们可以结合 @InitBinder 解决这个问题，通过参数预处理来指定使用的前缀为 u.</p> 
<pre><code>    除了在 Controller 里单独定义预处理方法外，我们还可以通过 @ControllerAdvice 结合 @InitBinder 来定义全局的参数预处理方法，方便各个 Controller 使用
</code></pre> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.WebDataBinder;
import org.springframework.web.bind.annotation.*;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@ModelAttribute("u") User user) {
        return "name：" + user.getName() + "\nage：" + user.getAge();
    }
 
    @InitBinder("u")
    private void initBinder(WebDataBinder binder) {
        binder.setFieldDefaultPrefix("u.");
    }
}
</code></pre> 
<p>（3）重启程序再次发送请求，可以看到参数已经成功接收了：</p> 
<h3><a id="_220"></a>二、接收字符串文本数据</h3> 
<p>（1）如果传递过来的是 Text 文本，我们可以通过 HttpServletRequest 获取输入流从而读取文本内容。</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RestController;
 
import javax.servlet.ServletInputStream;
import javax.servlet.http.HttpServletRequest;
import java.io.IOException;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(HttpServletRequest request) {
        ServletInputStream is = null;
        try {
            is = request.getInputStream();
            StringBuilder sb = new StringBuilder();
            byte[] buf = new byte[1024];
            int len = 0;
            while ((len = is.read(buf)) != -1) {
                sb.append(new String(buf, 0, len));
            }
            System.out.println(sb.toString());
            return "获取到的文本内容为：" + sb.toString();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (is != null) {
                    is.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return null;
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/d2/b6/ztxTR7m0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_JSON__268"></a>三、接收 JSON 数据</h3> 
<h4><a id="1_Map__270"></a>1，使用 Map 来接收数据</h4> 
<p>（1）如果把 json 作为参数传递，我们可以使用 @requestbody 接收参数，将数据转换 Map：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;
 
import java.util.Map;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@RequestBody Map params) {
        return "name：" + params.get("name") + "\n age：" + params.get("age");
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/46/3f/QjYaBRng_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="2_Bean__295"></a>2，使用 Bean 对象来接收数据</h4> 
<p>（1）如果把 json 作为参数传递，我们可以使用 @requestbody 接收参数，将数据直接转换成对象：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@RequestBody User user){
        return user.getName() + " " + user.getAge();
    }
}
</code></pre> 
<p>（2）User 类定义如下：</p> 
<pre><code>package com.example.demo;
 
public class User {
    private String name;
    private Integer age;
 
    public String getName() {
        return name;
    }
 
    public void setName(String name) {
        this.name = name;
    }
 
    public Integer getAge() {
        return age;
    }
 
    public void setAge(Integer age) {
        this.age = age;
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/3b/1a/P5JvrEBh_o.png" alt="在这里插入图片描述"></p> 
<p>（4）如果传递的 JOSN 数据是一个数组也是可以的，Controller 做如下修改：</p> 
<pre><code>package com.example.demo;
 
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RestController;
 
import java.util.List;
 
@RestController
public class HelloController {
    @PostMapping("/hello")
    public String hello(@RequestBody List&lt;User&gt; users){
        String result = "";
        for(User user:users){
            result += user.getName() + " " + user.getAge() + "\n";
        }
        return result;
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/c4/7e/e6hBenPo_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2ca16ecd77ee9e098162443e87c9a0b2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">导出DMP文件实现数据库备份、数据迁移流程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d906f4f4f8a00bc7cd4a518ab157d4be/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">redis跳表的层数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>