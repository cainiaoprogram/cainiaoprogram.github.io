<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>将 ICDAR 2015 的 Ground Truth 标注在图像数据上 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="将 ICDAR 2015 的 Ground Truth 标注在图像数据上" />
<meta property="og:description" content="因为要标注数据，数据集是 ICDAR 2015 比赛中的 Challenge 4: Incidental Scene Text。
原图及标注的图像，还有给定的 ground truth 文件如下所示： 最左边是原图，中间是标注的图像，右边是 ground truth 文件内容，按顺时针顺序的坐标： x1,y1,x2,y2,x3,y3,x4,y4 ，最后是 words，但是如果是 ### 这种表示的，则表示不 care 文字的内容。
用 Python 将 ground truth 框住文字，代码如下：
import os import path import glob import Image, ImageDraw # ground truth directory gt_text_dir = &#34;/home/chenxp/Documents/Hitachi/ICDAR_2015/ICDAR2015_ch4/ch4_training_localization_transcription_gt&#34; # original images directory image_dir = &#34;/home/chenxp/Documents/Hitachi/ICDAR_2015/ICDAR2015_ch4/*.jpg&#34; imgDirs = [] imgLists = glob.glob(image_dir) # where to save the images with ground truth boxes imgs_save_dir = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c13e0afd1bcf604e03ccada4a34171b3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-12-13T10:48:18+08:00" />
<meta property="article:modified_time" content="2016-12-13T10:48:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">将 ICDAR 2015 的 Ground Truth 标注在图像数据上</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 因为要标注数据，数据集是 <a target="_blank" href="http://2015.icdar.org/" rel="nofollow noopener noreferrer" style="color:rgb(106,57,6); text-decoration:none">ICDAR 2015</a> 比赛中的 <a target="_blank" href="http://rrc.cvc.uab.es/?ch=4&amp;com=tasks#end-to-end" rel="nofollow noopener noreferrer" style="color:rgb(106,57,6); text-decoration:none">Challenge 4: Incidental Scene Text</a>。</p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 原图及标注的图像，还有给定的 ground truth 文件如下所示： <br style=""> </p> 
<center style="color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 
 <img src="https://images2.imgbox.com/54/44/zedBdUVM_o.png" alt="这里写图片描述" title="" style="border:none; max-width:100%"> 
</center> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 最左边是原图，中间是标注的图像，右边是 ground truth 文件内容，按顺时针顺序的坐标：<span class="MathJax_Preview" style="color:rgb(136,136,136)"></span><span class="MathJax" id="MathJax-Element-1-Frame" style="display:inline; line-height:normal; word-spacing:normal; word-wrap:normal; white-space:nowrap; float:none; direction:ltr; max-width:none; max-height:none; min-width:0px; min-height:0px; border:0px; padding:0px; margin:0px"> 
   
   <span class="math" id="MathJax-Span-1" style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:14.397em"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:10.879em; height:0px; font-size:18.48px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-2.27em; left:0.003em"><span class="mrow" id="MathJax-Span-2" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px"><span class="msubsup" id="MathJax-Span-3" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-4" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">x</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.621em; left:0.544em"><span class="mn" id="MathJax-Span-5" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">1</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span><span class="mo" id="MathJax-Span-6" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Main">,</span><span class="msubsup" id="MathJax-Span-7" style="display:inline; position:static; border:0px; padding:0px 0px 0px 0.165em; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-8" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">y<span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; overflow:hidden; height:1px; width:0.003em"></span></span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.567em; left:0.544em"><span class="mn" id="MathJax-Span-9" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">1</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span><span class="mo" id="MathJax-Span-10" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Main">,</span><span class="msubsup" id="MathJax-Span-11" style="display:inline; position:static; border:0px; padding:0px 0px 0px 0.165em; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-12" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">x</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.621em; left:0.544em"><span class="mn" id="MathJax-Span-13" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">2</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span><span class="mo" id="MathJax-Span-14" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Main">,</span><span class="msubsup" id="MathJax-Span-15" style="display:inline; position:static; border:0px; padding:0px 0px 0px 0.165em; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-16" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">y<span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; overflow:hidden; height:1px; width:0.003em"></span></span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.567em; left:0.544em"><span class="mn" id="MathJax-Span-17" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">2</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span><span class="mo" id="MathJax-Span-18" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Main">,</span><span class="msubsup" id="MathJax-Span-19" style="display:inline; position:static; border:0px; padding:0px 0px 0px 0.165em; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-20" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">x</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.621em; left:0.544em"><span class="mn" id="MathJax-Span-21" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">3</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span><span class="mo" id="MathJax-Span-22" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Main">,</span><span class="msubsup" id="MathJax-Span-23" style="display:inline; position:static; border:0px; padding:0px 0px 0px 0.165em; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-24" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">y<span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; overflow:hidden; height:1px; width:0.003em"></span></span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.567em; left:0.544em"><span class="mn" id="MathJax-Span-25" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">3</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span><span class="mo" id="MathJax-Span-26" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Main">,</span><span class="msubsup" id="MathJax-Span-27" style="display:inline; position:static; border:0px; padding:0px 0px 0px 0.165em; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-28" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">x</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.621em; left:0.544em"><span class="mn" id="MathJax-Span-29" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">4</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span><span class="mo" id="MathJax-Span-30" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Main">,</span><span class="msubsup" id="MathJax-Span-31" style="display:inline; position:static; border:0px; padding:0px 0px 0px 0.165em; margin:0px; vertical-align:0px"><span style="display:inline-block; position:relative; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0.977em; height:0px"><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.945em; left:0.003em"><span class="mi" id="MathJax-Span-32" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-family:MathJax_Math-italic">y<span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; overflow:hidden; height:1px; width:0.003em"></span></span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.951em"></span></span><span style="position:absolute; border:0px; padding:0px; margin:0px; vertical-align:0px; top:-1.567em; left:0.544em"><span class="mn" id="MathJax-Span-33" style="display:inline; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; font-size:13.0654px; font-family:MathJax_Main">4</span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:1.788em"></span></span></span></span></span><span style="display:inline-block; position:static; border:0px; padding:0px; margin:0px; vertical-align:0px; width:0px; height:2.275em"></span></span></span><span style="display:inline-block; position:static; border-width:0px 0px 0px 0.004em; border-left-style:solid; border-color:initial; padding:0px; margin:0px; vertical-align:-0.425em; overflow:hidden; width:0px; height:1.075em; color:rgb(255,255,255)"></span></span> 
  </span>，最后是 words，但是如果是 ### 这种表示的，则表示不 care 文字的内容。</p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 用 <a target="_blank" href="http://lib.csdn.net/base/python" rel="nofollow noopener noreferrer" class="replace_word" title="Python知识库" style="color:rgb(223,52,52); text-decoration:none; font-weight:bold">Python</a> 将 ground truth 框住文字，代码如下：</p> 
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="language-python hljs  has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> os
<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> path
<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> glob
<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> Image, ImageDraw

<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># ground truth directory</span>
gt_text_dir = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"/home/chenxp/Documents/Hitachi/ICDAR_2015/ICDAR2015_ch4/ch4_training_localization_transcription_gt"</span>

<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># original images directory</span>
image_dir = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"/home/chenxp/Documents/Hitachi/ICDAR_2015/ICDAR2015_ch4/*.jpg"</span>
imgDirs = []
imgLists = glob.glob(image_dir)

<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># where to save the images with ground truth boxes</span>
imgs_save_dir = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"/home/chenxp/Documents/Hitachi/ICDAR_2015/ICDAR_with_GT"</span>

<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">for</span> item <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> imgLists:
    imgDirs.append(item)

<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">for</span> img_dir <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> imgDirs:
    img = Image.open(img_dir)
    dr = ImageDraw.Draw(img)    

    img_basename = os.path.basename(img_dir)
    (img_name, temp2) = os.path.splitext(img_basename)
    <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># open the ground truth text file</span>
    img_gt_text_name = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"gt_"</span> + img_name + <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">".txt"</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">print</span> img_gt_text_name

    bf = open(os.path.join(gt_text_dir, img_gt_text_name)).read().decode(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"utf-8-sig"</span>).encode(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"utf-8"</span>).splitlines()

    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">for</span> idx <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> bf:
        rect = []
        spt = idx.split(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">','</span>)
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span>]))
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>]))
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>]))
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span>]))
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">4</span>]))
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">5</span>]))
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">6</span>]))
        rect.append(float(spt[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">7</span>]))

        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># draw the polygon with (x_1, y_1, x_2, y_2, x_3, y_3, x_4, y_4)</span>
        dr.polygon((rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span>], rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>], rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>], rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span>], rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">4</span>], rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">5</span>], rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">6</span>], rect[<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">7</span>]), outline=<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"red"</span>)

    img.save(os.path.join(imgs_save_dir, img_basename))</code>
 
 </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li><li style="box-sizing: border-box; padding: 0px 5px;">31</li><li style="box-sizing: border-box; padding: 0px 5px;">32</li><li style="box-sizing: border-box; padding: 0px 5px;">33</li><li style="box-sizing: border-box; padding: 0px 5px;">34</li><li style="box-sizing: border-box; padding: 0px 5px;">35</li><li style="box-sizing: border-box; padding: 0px 5px;">36</li><li style="box-sizing: border-box; padding: 0px 5px;">37</li><li style="box-sizing: border-box; padding: 0px 5px;">38</li><li style="box-sizing: border-box; padding: 0px 5px;">39</li><li style="box-sizing: border-box; padding: 0px 5px;">40</li><li style="box-sizing: border-box; padding: 0px 5px;">41</li><li style="box-sizing: border-box; padding: 0px 5px;">42</li><li style="box-sizing: border-box; padding: 0px 5px;">43</li><li style="box-sizing: border-box; padding: 0px 5px;">44</li><li style="box-sizing: border-box; padding: 0px 5px;">45</li><li style="box-sizing: border-box; padding: 0px 5px;">46</li><li style="box-sizing: border-box; padding: 0px 5px;">47</li></ul>
 
 <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li><li style="box-sizing: border-box; padding: 0px 5px;">31</li><li style="box-sizing: border-box; padding: 0px 5px;">32</li><li style="box-sizing: border-box; padding: 0px 5px;">33</li><li style="box-sizing: border-box; padding: 0px 5px;">34</li><li style="box-sizing: border-box; padding: 0px 5px;">35</li><li style="box-sizing: border-box; padding: 0px 5px;">36</li><li style="box-sizing: border-box; padding: 0px 5px;">37</li><li style="box-sizing: border-box; padding: 0px 5px;">38</li><li style="box-sizing: border-box; padding: 0px 5px;">39</li><li style="box-sizing: border-box; padding: 0px 5px;">40</li><li style="box-sizing: border-box; padding: 0px 5px;">41</li><li style="box-sizing: border-box; padding: 0px 5px;">42</li><li style="box-sizing: border-box; padding: 0px 5px;">43</li><li style="box-sizing: border-box; padding: 0px 5px;">44</li><li style="box-sizing: border-box; padding: 0px 5px;">45</li><li style="box-sizing: border-box; padding: 0px 5px;">46</li><li style="box-sizing: border-box; padding: 0px 5px;">47</li></ul> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 上面代码中间有一句话：</p> 
<pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="language-python hljs  has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">bf = open(os.path.join(gt_text_dir, img_gt_text_name)).read().decode(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"utf-8-sig"</span>).encode(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"utf-8"</span>).splitlines()</code>
 
 </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
 
 <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 如果没有 <code style="font-family:'Source Code Pro',monospace; padding:2px 4px; font-size:12.6px; color:rgb(63,63,63); white-space:nowrap">decode("utf-8-sig").encode("utf-8")</code> 这句话，那么在解析 ground truth 的 txt 文件时，会在首行多处下面的东西，如下所示： <br style=""> </p> 
<center style="color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 
 <img src="https://images2.imgbox.com/a0/24/F9ARlNyq_o.png" alt="这里写图片描述" title="" style="border:none; max-width:100%"> 
</center> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 看到了吗？第一行 <code style="font-family:'Source Code Pro',monospace; padding:2px 4px; font-size:12.6px; color:rgb(63,63,63); white-space:nowrap">\xef\xbb\xbf</code> ，这是什么鬼？</p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> Google 一下，在 stackoverflow 上有个问答：<a target="_blank" href="http://stackoverflow.com/questions/18664712/split-function-add-xef-xbb-xbf-n-to-my-list" rel="nofollow noopener noreferrer" style="color:rgb(106,57,6); text-decoration:none">Split function add: \xef\xbb\xbf…\n to my list</a>： <br style=""> </p> 
<center style="color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 
 <img src="https://images2.imgbox.com/2d/42/0eNDs84y_o.png" alt="这里写图片描述" title="" style="border:none; max-width:100%"> 
</center> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 原来是 txt 文件编码包含了 <a target="_blank" href="https://en.wikipedia.org/wiki/Byte_order_mark" rel="nofollow noopener noreferrer" style="color:rgb(106,57,6); text-decoration:none">UTF-8 BOM</a>。</p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 最后标注的结果如下： <br style=""> </p> 
<center style="color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 
 <img src="https://images2.imgbox.com/46/76/CqaKnQrY_o.jpg" alt="这里写图片描述" title="" style="border:none; max-width:100%"> 
</center> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> </p> 
<p style="margin-top:0px; margin-bottom:1.1em; color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> </p> 
<center style="color:rgb(54,46,43); font-family:'microsoft yahei'; font-size:14px; line-height:26px"> 
 <img src="https://images2.imgbox.com/49/85/BidFLbgY_o.jpg" alt="这里写图片描述" title="" style="border:none; max-width:100%"> 
</center>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/13596caa227f9fc5e23b9ccf81d86cd4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">获取当前时间的前一天或后一天时间</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4aa56f3bf598f9a502c7c9ea878fbb1c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Nginx使用ssl模块配置HTTPS支持</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>