<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>嵌入式教程_数字信号处理：2-18 模数转换（AD）实验（采集波形） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="嵌入式教程_数字信号处理：2-18 模数转换（AD）实验（采集波形）" />
<meta property="og:description" content="实验目的： 本节视频的目的是掌握EMIFA的使用，了解AD7606的芯片特性和使用，并实现基于AD7606采集正弦波。
AD9833原理图 找到波形发生器，可查看相关控制引脚。本次实验采集的波形是由AD9833输出的。
AD7606原理图 找到AD采集，可查看相关控制引脚，同时可看到ADC输入的V1~V8通道分别对应CON29 - CON36口。
波形发生器 TL6748-PlusTEB实验箱采用板载波形信号发生器，波形信号发生器采用的芯片是AD9833。
AD9833是一款低功耗、可编程波形发生器，能够产生正弦波、三角波和方波输出。各种类型的检测、信号激励和时域反射应用都需要波形发生器。输出频率和相位可通过软件进行编程，调整简单。频率寄存器为28位，时钟速率为25MHz时，可以实现0.1Hz的分辨率；而时钟速率为1MHz时，则可以实现0.004Hz的分辨率。AD9833的输出电源范围是38mV~650mV。
AD9833 AD9833具有一个标准串行接口，使得该器件可以直接与数个微处理器接口。该器件采用外部串行时钟来向器件中写入数据或控制信息。通过该串行接口DSP可使用程序控制AD9833产生正弦波、三角波和方波输出。
A/D转换 A/D转换，即模数转换，是指将一个输入电压信号转换为一个输出的数字信号。一般分为四个步骤进行：取样、保持、量化和编码。前两个步骤在取样-保持电路中完成，后两步骤则在ADC中完成。
AD7606 TL6748-PlusTEB实验箱上的AD采集是基于 ADI AD7606 芯片进行设计的，具体特性如下：
· 八通道；
· 16bit采样；
· 支持串行和并行读取方式；
· 支持全部通道200K 采样率并行采集和转换；
· 支持真正±10V 或±5V 的双极性信号输入。
模数转换工作过程 AD7606上8个通道的数据是同时采集，轮流转换的。
模数转换模块接到启动转换信号后，按照排序器的设置，开始转换第一个通道的数据；经过一个采样时间的延迟后，将采样结果放入转换结果寄存器保存；按顺序进行下一个通道的转换；如果为连续转换方式则从新开始转换过程；否则等待下一个启动信号。
EMIFA （External Memory Interface）
即外部存储器接口，可实现DSP与不同类型存储器（SRAM、Flash RAM、DDR-RAM等）的连接。具体可以分为EMIFA和EMIFB。
外部存储器接口主要用来同并行存储器连接，这些存储器包括SDRAM、SBSRAM、Flash、SRAM存储器等，外部存储器接口还可以同外部并行设备进行连接，这些设备包括并行A/D、D/A转换器、具有异步并行接口的专用芯片，并可以通过外部存储器接口同FPGA、CPLD等连接。
EMIFA接口特性 （1）异步操作： 支持SRAM，NAND Flash ，NOR Flash，FPGA等，包括AD7606
最大支持16位数据总线 和23位地址总线，在C6748中只能支持到16位
具有4个片选（EMA_CS[5:2]），只能用于异步操作
连接NAND Flash时， NAND Flash控制器支持1-bit和4-bit的ECC校验
（2）同步操作： 支持16-bit的SDRAM
有一个单独的SDRAM（EMA_CS[0]）
EMIFA功能框图 EMIFA的请求信号的有三个来源：CPU、EDMA和主外设。
右侧的三部分接口分别是：SDRAM的控制信号管脚和异步操作模式下的控制信号管脚以及共用部分的数据总线和地址总线。
EMIFA与AD7606的连接 连接异步设备时可以有4个片选：EMA_CS[n]，n=2,3,4,5
控制信号引脚要根据外设的时序要求使用，AD7606的连接中只用到了片选信号，其他的没有用到。
程序流程设计 程序流程设计中首先要进行外设使能配置和DSP中断初始化，接着初始化LCD的显示与触摸，然后初始化AD7606，接着初始化AD9833并输出波形，启动AD7606采集并将采集的波形显示到LCD上。最后进行触摸检测，控制AD7606启动和暂停。
方向配置源码 管脚方向配置 使用StarterWare 库函数将 GPIO 口配置为输出模式。相关函数通过“gpio." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/734b66558886f94e017ea1801095a982/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-21T14:57:14+08:00" />
<meta property="article:modified_time" content="2023-08-21T14:57:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">嵌入式教程_数字信号处理：2-18 模数转换（AD）实验（采集波形）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="_0">实验目的：</h2> 
<p>本节视频的目的是掌握EMIFA的使用，了解AD7606的芯片特性和使用，并实现基于AD7606采集正弦波。</p> 
<h3 id="_2">AD9833原理图</h3> 
<p>找到波形发生器，可查看相关控制引脚。本次实验采集的波形是由AD9833输出的。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="166" src="https://images2.imgbox.com/c0/00/poqY3ym5_o.png" width="378"></p> 
<h3 id="_5">AD7606原理图</h3> 
<p>找到AD采集，可查看相关控制引脚，同时可看到ADC输入的V1~V8通道分别对应CON29 - CON36口。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="199" src="https://images2.imgbox.com/d1/fb/G3YVB0fw_o.png" width="303"></p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="116" src="https://images2.imgbox.com/db/49/Zg9pC5ui_o.png" width="378"></p> 
<h3 id="_9">波形发生器</h3> 
<p>TL6748-PlusTEB实验箱采用板载波形信号发生器，波形信号发生器采用的芯片是AD9833。</p> 
<p>AD9833是一款低功耗、可编程波形发生器，能够产生正弦波、三角波和方波输出。各种类型的检测、信号激励和时域反射应用都需要波形发生器。输出频率和相位可通过软件进行编程，调整简单。频率寄存器为28位，时钟速率为25MHz时，可以实现0.1Hz的分辨率；而时钟速率为1MHz时，则可以实现0.004Hz的分辨率。AD9833的输出电源范围是38mV~650mV。</p> 
<h3 id="_12">AD9833</h3> 
<p>AD9833具有一个标准串行接口，使得该器件可以直接与数个微处理器接口。该器件采用外部串行时钟来向器件中写入数据或控制信息。通过该串行接口DSP可使用程序控制AD9833产生正弦波、三角波和方波输出。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="243" src="https://images2.imgbox.com/64/7b/mClA74cZ_o.png" width="454"></p> 
<h3 id="_15">A/D转换</h3> 
<p>A/D转换，即模数转换，是指将一个输入电压信号转换为一个输出的数字信号。一般分为四个步骤进行：取样、保持、量化和编码。前两个步骤在取样-保持电路中完成，后两步骤则在ADC中完成。</p> 
<h3 id="_17">AD7606</h3> 
<p>TL6748-PlusTEB实验箱上的AD采集是基于 ADI AD7606 芯片进行设计的，具体特性如下：</p> 
<p>· 八通道；</p> 
<p>· 16bit采样；</p> 
<p>· 支持串行和并行读取方式；</p> 
<p>· 支持全部通道200K 采样率并行采集和转换；</p> 
<p>· 支持真正±10V 或±5V 的双极性信号输入。</p> 
<h3 id="_24">模数转换工作过程</h3> 
<p>AD7606上8个通道的数据是同时采集，轮流转换的。</p> 
<p>模数转换模块接到启动转换信号后，按照排序器的设置，开始转换第一个通道的数据；经过一个采样时间的延迟后，将采样结果放入转换结果寄存器保存；按顺序进行下一个通道的转换；如果为连续转换方式则从新开始转换过程；否则等待下一个启动信号。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="306" src="https://images2.imgbox.com/d6/be/ojgHUhiT_o.png" width="454"></p> 
<h3 id="_28">EMIFA</h3> 
<p>（External Memory Interface）</p> 
<p>即外部存储器接口，可实现DSP与不同类型存储器（SRAM、Flash RAM、DDR-RAM等）的连接。具体可以分为EMIFA和EMIFB。</p> 
<p>外部存储器接口主要用来同并行存储器连接，这些存储器包括SDRAM、SBSRAM、Flash、SRAM存储器等，外部存储器接口还可以同外部并行设备进行连接，这些设备包括并行A/D、D/A转换器、具有异步并行接口的专用芯片，并可以通过外部存储器接口同FPGA、CPLD等连接。</p> 
<h3 id="_32">EMIFA接口特性</h3> 
<h4 id="_33">（1）异步操作：</h4> 
<p>支持SRAM，NAND Flash ，NOR Flash，FPGA等，包括AD7606</p> 
<p>最大支持16位数据总线 和23位地址总线，在C6748中只能支持到16位</p> 
<p>具有4个片选（EMA_CS[5:2]），只能用于异步操作</p> 
<p>连接NAND Flash时， NAND Flash控制器支持1-bit和4-bit的ECC校验</p> 
<h4 id="_38">（2）同步操作：</h4> 
<p>支持16-bit的SDRAM</p> 
<p>有一个单独的SDRAM（EMA_CS[0]）</p> 
<h3 id="_41">EMIFA功能框图</h3> 
<p>EMIFA的请求信号的有三个来源：CPU、EDMA和主外设。</p> 
<p>右侧的三部分接口分别是：SDRAM的控制信号管脚和异步操作模式下的控制信号管脚以及共用部分的数据总线和地址总线。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="268" src="https://images2.imgbox.com/e4/3f/guHqAwNg_o.png" width="553"></p> 
<h3 id="_45">EMIFA与AD7606的连接</h3> 
<p>连接异步设备时可以有4个片选：EMA_CS[n]，n=2,3,4,5</p> 
<p>控制信号引脚要根据外设的时序要求使用，AD7606的连接中只用到了片选信号，其他的没有用到。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="267" src="https://images2.imgbox.com/25/03/1hD2xR9K_o.png" width="227"></p> 
<h3 id="_49">程序流程设计</h3> 
<p>程序流程设计中首先要进行外设使能配置和DSP中断初始化，接着初始化LCD的显示与触摸，然后初始化AD7606，接着初始化AD9833并输出波形，启动AD7606采集并将采集的波形显示到LCD上。最后进行触摸检测，控制AD7606启动和暂停。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="374" src="https://images2.imgbox.com/0f/80/0dFxnPjf_o.png" width="341"></p> 
<h3 id="_52">方向配置源码</h3> 
<h4 id="_53">管脚方向配置</h4> 
<p>使用StarterWare 库函数将 GPIO 口配置为输出模式。相关函数通过“gpio.h”文件引用。</p> 
<p>StarterWare API 接口。</p> 
<p>GPIODirModeSet(SOC_GPIO_0_REGS, 1, GPIO_DIR_OUTPUT);</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="235" src="https://images2.imgbox.com/c9/8b/IskNhgHd_o.png" width="303"></p> 
<h3 id="_58">数据配置源码</h3> 
<h4 id="_59">数据寄存器配置</h4> 
<p>使用StarterWare 库函数设置GPIO输出值。</p> 
<p>相关函数通过“gpio.h”文件引用。</p> 
<h4 id="_62">StarterWare API 接口</h4> 
<p>GPIOPinWrite(SOC_GPIO_0_REGS, 3, GPIO_PIN_LOW);</p> 
<p>配置GPIO输出值的函数源码和函数使用说明可以查看gpio.c。其中，第一个参数是GPIO的基地址，第二个参数是GPIO的编号，第三个参数设置GPIO的电平。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="243" src="https://images2.imgbox.com/bc/50/6KqdRcmg_o.png" width="303"></p> 
<h2 id="_66">操作现象</h2> 
<h3 id="_67">实验设备</h3> 
<p></p> 
<p class="img-center"><img alt="image.png" height="257" src="https://images2.imgbox.com/ee/20/urlsRkV9_o.png" width="554"></p> 
<h3 id="_69">硬件连接</h3> 
<p>（1）使用公头对公头SMA数据线连接波形发生器和ADC输入的V1通道</p> 
<p>（2）连接仿真器和电脑的USB接口，</p> 
<p>（3）将拨码开关拨到DEBUG模式01111，</p> 
<p>（4）连接实验箱电源，拨动电源开关上电。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="312" src="https://images2.imgbox.com/10/c1/1LwrMyin_o.png" width="553"></p> 
<h3 id="_75">软件操作</h3> 
<p>导入工程，选择Demo文件夹下的对应工程</p> 
<p>编译工程</p> 
<p>将CCS连接实验箱并加载程序</p> 
<p>点击运行程序</p> 
<p>LCD屏幕会显示采集的正弦波</p> 
<p>点击一下LCD屏，采集将停止，再次点击恢复采集。</p> 
<p>实验结束后，先点击黄色按钮暂停程序运行，再点击红色按钮退出CCS与实验箱的连接，最后实验箱断电即可。</p> 
<p></p> 
<p class="img-center"><img alt="image.png" height="312" src="https://images2.imgbox.com/14/7b/z09pPMev_o.png" width="545"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4792c11c3eeaa902bf67de9a1fb79a9f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">详讲js中的模块和导入导出</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1d9ea8bcfff889b4fa77b76a9102ef76/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VisualStudio运行程序拒绝访问【终极解决方案】</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>