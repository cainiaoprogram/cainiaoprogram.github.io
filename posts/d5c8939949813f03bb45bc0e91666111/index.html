<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python数据分析实战：使用pyecharts进行数据可视化 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python数据分析实战：使用pyecharts进行数据可视化" />
<meta property="og:description" content="前言
本文的文字及图片来源于网络,仅供学习、交流使用,不具有任何商业用途,版权归原作者所有,如有问题请及时联系我们以作处理。
作者：刘早起
开始使用
基本套路就是先创建一个你需要的空图层，然后使用.set_global_opts修改全局项再用.set_series_opts修改具体的相关配置就可以。当然最好的学习地址一定是官方文档，但是里面介绍的太过复杂了，这里仅以快速上手使用为目标进行几个例子来说明套路。
地图 pyecharts比较好的就是绘制地图，这里以2019-nCov项目中安徽省地图绘制为例。
首先导入需要的包
from pyecharts.charts import Pie ,Grid,Bar,Line from pyecharts.faker import Faker #数据包from pyecharts.charts import Map,Geo from pyecharts import options as opts from pyecharts.globals import ThemeType OK，我现在有一个省份的一组数据，大概长这样
locate =[&#39;合肥市&#39;, &#39;阜阳市&#39;, &#39;亳州市&#39;, &#39;安庆市&#39;, &#39;马鞍山市&#39;, &#39;铜陵市&#39;, &#39;六安市&#39;, &#39;滁州市&#39;, &#39;池州市&#39;,&#39;蚌埠市&#39;,&#39;芜湖市&#39;,&#39;宿州市&#39;,&#39;宣城市&#39;,&#39;淮北市&#39;,&#39;淮南市&#39;,&#39;黄山市&#39;]` data =[&#39;115&#39;,&#39;105&#39;,&#39;72&#39;,&#39;66&#39;,&#39;30&#39;,&#39;22&#39;,&#39;41&#39;,&#39;11&#39;,&#39;11&#39;,&#39;88&#39;,&#39;27&#39;,&#39;27&#39;,&#39;5&#39;,&#39;22&#39;,&#39;14&#39;,&#39;9&#39;] 这也是接触到的需要绘制地图的数据格式，两个list，一个是地名，一个是每个城市对应的数据，现在执行以下代码就可以得到安徽省的疫情地图。
list1 = [[locate[i],data[i]] for i in range(len(locate))] #首先创建数据 map_1 = Map(init_opts=opts.InitOpts(width=&#34;400px&#34;, height=&#34;460px&#34;)) #创建地图，其中括号内可以调整大小，也可以修改主题颜色。 map_1.add(&#34;安徽疫情&#34;, list1, maptype=&#34;安徽&#34;) #添加安徽地图 map_1.set_global_opts( #设置全局配置项#title_opts=opts.TitleOpts(title=&#34;安徽疫情&#34;), 添加标题 visualmap_opts=opts.VisualMapOpts(max_=120, is_piecewise=True),#最大数据范围 并且使用分段 legend_opts=opts.LegendOpts(is_show=False), #是否显示图例 ) map_1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d5c8939949813f03bb45bc0e91666111/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-15T14:12:54+08:00" />
<meta property="article:modified_time" content="2020-07-15T14:12:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python数据分析实战：使用pyecharts进行数据可视化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>前言</strong></p> 
<p>本文的文字及图片来源于网络,仅供学习、交流使用,不具有任何商业用途,版权归原作者所有,如有问题请及时联系我们以作处理。</p> 
<p>作者：刘早起</p> 
<p><img alt="" src="https://images2.imgbox.com/b1/52/DYrYJQwf_o.png"></p> 
<p> </p> 
<p>开始使用</p> 
<p>基本套路就是先创建一个你需要的空图层，然后使用.set_global_opts修改全局项再用.set_series_opts修改具体的相关配置就可以。当然最好的学习地址一定是官方文档，但是里面介绍的太过复杂了，这里仅以快速上手使用为目标进行几个例子来说明套路。</p> 
<h4>地图</h4> 
<p>pyecharts比较好的就是绘制地图，这里以2019-nCov项目中安徽省地图绘制为例。</p> 
<p>首先导入需要的包</p> 
<pre><code class="language-python">from pyecharts.charts import Pie ,Grid,Bar,Line
from pyecharts.faker import Faker #数据包from pyecharts.charts import Map,Geo
from pyecharts import options as opts
from pyecharts.globals import ThemeType</code></pre> 
<p>OK，我现在有一个省份的一组数据，大概长这样</p> 
<pre><code class="language-python">locate =['合肥市', '阜阳市', '亳州市', '安庆市', '马鞍山市', '铜陵市', '六安市', '滁州市', '池州市','蚌埠市','芜湖市','宿州市','宣城市','淮北市','淮南市','黄山市']`
data =['115','105','72','66','30','22','41','11','11','88','27','27','5','22','14','9']</code></pre> 
<p>这也是接触到的需要绘制地图的数据格式，两个list，一个是地名，一个是每个城市对应的数据，现在执行以下代码就可以得到安徽省的疫情地图。</p> 
<pre><code class="language-python">list1 = [[locate[i],data[i]] for i in range(len(locate))] #首先创建数据
map_1 = Map(init_opts=opts.InitOpts(width="400px", height="460px")) #创建地图，其中括号内可以调整大小，也可以修改主题颜色。
map_1.add("安徽疫情", list1, maptype="安徽") #添加安徽地图
map_1.set_global_opts( #设置全局配置项#title_opts=opts.TitleOpts(title="安徽疫情"), 添加标题
    visualmap_opts=opts.VisualMapOpts(max_=120, is_piecewise=True),#最大数据范围 并且使用分段
    legend_opts=opts.LegendOpts(is_show=False), #是否显示图例
    )
map_1.render_notebook() #直接在notebook中显示# map_1.render('map1.html') 将地图以html形式保存在工作目录下</code></pre> 
<p> </p> 
<p><img alt="" src="https://images2.imgbox.com/f1/3b/08VjOgVf_o.png"></p> 
<p> </p> 
<p> </p> 
<p>当然地图还有很多可以自定义的配置项，选择需要的配置项添加到对应的函数中即可。</p> 
<pre><code class="language-python"># 数据项 (坐标点名称，坐标点值)
    data_pair: Sequence,

    # 地图类型，具体参考 pyecharts.datasets.map_filenames.json 文件
    maptype: str = "china",

    # 是否选中图例
    is_selected: bool = True,

    # 是否开启鼠标缩放和平移漫游。
    is_roam: bool = True,

    # 当前视角的中心点，用经纬度表示
    center: Optional[Sequence] = None,

    # 当前视角的缩放比例。
    zoom: Optional[Numeric] = 1,

    # 自定义地区的名称映射
    name_map: Optional[dict] = None,

    # 标记图形形状
    symbol: Optional[str] = None,

    # 是否显示标记图形
    is_map_symbol_show: bool = True,

    # 标签配置项，参考 `series_options.LabelOpts`
    label_opts: Union[opts.LabelOpts, dict] = opts.LabelOpts(),

    # 提示框组件配置项，参考 `series_options.TooltipOpts`
    tooltip_opts: Union[opts.TooltipOpts, dict, None] = None,

    # 图元样式配置项，参考 `series_options.ItemStyleOpts`
    itemstyle_opts: Union[opts.ItemStyleOpts, dict, None] = None,

    # 高亮标签配置项，参考 `series_options.LabelOpts`
    emphasis_label_opts: Union[opts.LabelOpts, dict, None] = None,

    # 高亮图元样式配置项，参考 `series_options.ItemStyleOpts`
    emphasis_itemstyle_opts: Union[opts.ItemStyleOpts, dict, None] = None,</code></pre> 
<h4>饼图</h4> 
<p>继续使用地图里的数据绘制饼图，现在想看安徽各地区疫情分布比，就可以考虑使用饼图（玫瑰图）。详细代码</p> 
<pre> </pre> 
<pre><code class="language-python">map_2 = (
    Pie(init_opts=opts.InitOpts(width="600px", height="500px")) 创建一个饼图
    .add(
        "", #图名
        [[locate[i],data[i]] for i in range(len(locate))], #添加数据
        radius=["40%", "75%"], # 调整半径
    )
    .set_global_opts(
        legend_opts=opts.LegendOpts(
            orient="vertical", pos_top="10%", pos_left="88%"#图例设置
        ),
    )
    .set_series_opts(label_opts=opts.LabelOpts(formatter="{b}: {c}")) #设置标签
)
map_2.render_notebook() #直接在notebook中显示#map_2.render('map2.html') #保存到本地柱状图</code></pre> 
<p> </p> 
<p><img alt="" src="https://images2.imgbox.com/46/73/vw7Nmz5c_o.png"></p> 
<p> </p> 
<p> </p> 
<p>demo</p> 
<pre><code class="language-python">c = (
    Bar()
    .add_xaxis(Faker.choose())
    .add_yaxis("商家A", Faker.values()) #数据配置
    .add_yaxis("商家B", Faker.values()) #数据配置
    .set_global_opts(title_opts=opts.TitleOpts(title="Bar-基本示例", subtitle="我是副标题")) #全局配置标题
)
c.render_notebook()通过添加配置项可以调整标题、图例、粗细、位置、背景图等等</code></pre> 
<p> </p> 
<p><img alt="" src="https://images2.imgbox.com/ff/45/3yGFqvGf_o.png"></p> 
<p> </p> 
<pre> </pre> 
<pre><code class="language-python"># 系列数据
    yaxis_data: Sequence[Numeric, opts.BarItem, dict],

    # 是否选中图例
    is_selected: bool = True,

    # 使用的 x 轴的 index，在单个图表实例中存在多个 x 轴的时候有用。
    xaxis_index: Optional[Numeric] = None,

    # 使用的 y 轴的 index，在单个图表实例中存在多个 y 轴的时候有用。
    yaxis_index: Optional[Numeric] = None,

    # 系列 label 颜色
    color: Optional[str] = None,

    # 数据堆叠，同个类目轴上系列配置相同的　stack　值可以堆叠放置。
    stack: Optional[str] = None,

    # 同一系列的柱间距离，默认为类目间距的 20%，可设固定值
    category_gap: Union[Numeric, str] = "20%",

    # 不同系列的柱间距离，为百分比（如 '30%'，表示柱子宽度的 30%）。# 如果想要两个系列的柱子重叠，可以设置 gap 为 '-100%'。这在用柱子做背景的时候有用。
    gap: Optional[str] = None,

    # 标签配置项，参考 `series_options.LabelOpts`
    label_opts: Union[opts.LabelOpts, dict] = opts.LabelOpts(),

    # 标记点配置项，参考 `series_options.MarkPointOpts`
    markpoint_opts: Union[opts.MarkPointOpts, dict, None] = None,

    # 标记线配置项，参考 `series_options.MarkLineOpts`
    markline_opts: Union[opts.MarkLineOpts, dict, None] = None,

    # 提示框组件配置项，参考 `series_options.TooltipOpts`
    tooltip_opts: Union[opts.TooltipOpts, dict, None] = None,

    # 图元样式配置项，参考 `series_options.ItemStyleOpts`
    itemstyle_opts: Union[opts.ItemStyleOpts, dict, None] = None,</code></pre> 
<h4>同一图层绘制多图</h4> 
<p>如果想要同时叠加绘制图形可以采用参考以下方法</p> 
<pre><code class="language-python">def two_pic() -&gt; Bar: 
    x = Faker.choose() #选择数据
    bar = (  #先绘制bar
        Bar()
        .add_xaxis(x)
        .add_yaxis("商家A", Faker.values())
        .add_yaxis("商家B", Faker.values())
        .set_global_opts(title_opts=opts.TitleOpts(title="Overlap-line+scatter"))
    )
    line = ( #再添加line
        Line()
        .add_xaxis(x)
        .add_yaxis("商家A", Faker.values())
        .add_yaxis("商家B", Faker.values())
    )
    bar.overlap(line)
    return bar
two_pic().render_notebook()总结</code></pre> 
<p> </p> 
<p><img alt="" src="https://images2.imgbox.com/82/b5/MXTiyXXR_o.png"></p> 
<p> </p> 
<p>使用新版pyecharts并不难，基本套路都和上面一样，只要先学会画图套路，再多读官方文档就可以。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b87ca1cb5fd5e254a85476fabedff8b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于Cisco Packet Tracer的中小型网吧组网设计方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/29c39fc35f2cbf1a6362fda25f557b9a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">百度Echarts时间轴的注意事项</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>