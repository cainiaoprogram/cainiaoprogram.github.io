<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ADC driver 项目总结 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ADC driver 项目总结" />
<meta property="og:description" content="项目场景： 目前经过了一个半月，ADC的项目也已经告一段落了，后面还会接触这一方面，所以做一个阶段性总结，来回顾一下，后面用到的话也可以回顾。
整个一个DCU框图如下
问题描述 1.在ADC中测试代码无法去进行测试，写入的数据无法readgroup出来
APP 中接收数据代码： https://blog.csdn.net/qq_44775824/article/details/125601486?spm=1001.2014.3001.5502
2.在配置EB的时候勾选了这个选项，导致后续的ADC Group直接报错。
3.当在AdcGroupTriggSrc 中勾选ADC_TRIGG_SRC_HW以后，再对AdcGroupConversionMode进行ADC_CONV_MODE_ONESHOT/ADC_CONV_MODE_CONTINUOUS的切换，当在HW的条件下切换成ADC_CONV_MODE_CONTINUOUS会报错。
原因分析： AdcNotification is the callback function for this group. Note: This parameter can be used when a configuration parameter AdcInterruptMode is enabled. Otherwise, this parameter is disabled. 2. Determines, if SARMUX1 (SARMUX of hardware unit of ADC_SAR_0_1) is connected tohardware unit of ADC_SAR_0_0.
The ADC driver provides the AdcSarMux1ConnectToAdc0 , AdcSarMux2ConnectToAdc0 , and AdcSarMux3ConnectToAdc0 configuration parameters to support this use case." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/69ec91ed3cd6b13b7c154b59b6f3dceb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-04T17:24:05+08:00" />
<meta property="article:modified_time" content="2022-07-04T17:24:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ADC driver 项目总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><a id="_0"></a>项目场景：</h2> 
<p>目前经过了一个半月，ADC的项目也已经告一段落了，后面还会接触这一方面，所以做一个阶段性总结，来回顾一下，后面用到的话也可以回顾。</p> 
<p>整个一个DCU框图如下</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c0/00/eNZDJlS4_o.png"></p> 
<hr> 
<p></p> 
<h2><a id="_7"></a>问题描述</h2> 
<p>1.在ADC中测试代码无法去进行测试，写入的数据无法readgroup出来<br> APP 中接收数据代码： </p> 
<p><a class="link-info" href="https://blog.csdn.net/qq_44775824/article/details/125601486?spm=1001.2014.3001.5502" title="https://blog.csdn.net/qq_44775824/article/details/125601486?spm=1001.2014.3001.5502">https://blog.csdn.net/qq_44775824/article/details/125601486?spm=1001.2014.3001.5502</a></p> 
<p>2.在配置EB的时候勾选了这个选项，导致后续的ADC Group直接报错。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0c/45/zQ8EZCen_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/da/5b/8l9BFhh3_o.png"></p> 
<p>3.当在AdcGroupTriggSrc 中勾选ADC_TRIGG_SRC_HW以后，再对AdcGroupConversionMode进行ADC_CONV_MODE_ONESHOT/ADC_CONV_MODE_CONTINUOUS的切换，当在HW的条件下切换成ADC_CONV_MODE_CONTINUOUS会报错。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c6/13/wapz7CiU_o.png"></p> 
<p></p> 
<h2><a id="_23"></a>原因分析：</h2> 
<blockquote> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/67/f9/RXhMLEnU_o.png"></p> 
 <p></p> 
</blockquote> 
<div> 
 <span style="color:#000000;">AdcNotification </span> 
 <span style="color:#000000;">is the callback function for this group. </span> 
</div> 
<div> 
 <span style="color:#000000;"><em>Note: </em></span> 
</div> 
<div> 
 <span style="color:#000000;"><em>This parameter can be used when a configuration parameter </em></span> 
 <span style="color:#000000;"><em>AdcInterruptMode </em></span> 
 <span style="color:#000000;"><em>is enabled. </em></span> 
</div> 
<div> 
 <span style="color:#000000;"><em>Otherwise, this parameter is disabled. </em></span> 
</div> 
<div>
  2. 
</div> 
<div style="text-align:center;"> 
 <img alt="" src="https://images2.imgbox.com/32/55/Fwvzx8tw_o.png"> 
</div> 
<p></p> 
<div> 
 <p>Determines, if SARMUX1 (SARMUX of hardware unit of ADC_SAR_0_1) is connected tohardware unit of ADC_SAR_0_0.</p> 
 <div> 
  <span style="color:#000000;">The ADC driver provides the </span> 
  <span style="color:#000000;">AdcSarMux1ConnectToAdc0</span> 
  <span style="color:#000000;">, </span> 
  <span style="color:#000000;">AdcSarMux2ConnectToAdc0</span> 
  <span style="color:#000000;">, and </span> 
 </div> 
 <div> 
  <span style="color:#000000;">AdcSarMux3ConnectToAdc0 </span> 
  <span style="color:#000000;">configuration parameters to support this use case. </span> 
 </div> 
 <div></div> 
 <div> 
  <span style="color:#000000;">3.</span> 
 </div> 
 <div> 
  <p>在文档SWS ADC Driver 里面：10 Configuration specification</p> 
  <p>AdcGroupTriggSrc: Continuous conversion mode only available for <span style="color:#000000;">software triggered groups.(from </span>On page <span style="color:#000000;">120)</span></p> 
 </div> 
</div> 
<hr> 
<h2><a id="_30"></a>解决方案：</h2> 
<blockquote> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c2/9a/4Amw1Ftc_o.png"></p> 
 <p>这个是勾选了AdcInterruptMode后lrq的代码，取消勾选的话因为没有回调函数，所以就无法去调用ADC的vector和channel。</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ba/21/Uz4qjOVP_o.png"></p> 
 <p></p> 
 <p>2.ADC-&gt;AdcConfigset-&gt;AdcHwunit-&gt;AdcHwunit_0-&gt;AdcSarMux1ConnectToAdc0(取消勾选)</p> 
 <p>ADC-&gt;AdcConfigset-&gt;AdcHwunit-&gt;AdcHwunit_0-&gt;AdcSarMux2ConnectToAdc0(取消勾选)</p> 
 <p>ADC-&gt;AdcConfigset-&gt;AdcHwunit-&gt;AdcHwunit_1-&gt;AdcSarMux1ConnectToAdc0(取消勾选)</p> 
 <p>ADC-&gt;AdcConfigset-&gt;AdcHwunit-&gt;AdcHwunit_1-&gt;AdcSarMux2ConnectToAdc0(取消勾选)</p> 
 <p>ADC-&gt;AdcConfigset-&gt;AdcHwunit-&gt;AdcHwunit_2-&gt;AdcSarMux1ConnectToAdc0(取消勾选)</p> 
 <p>ADC-&gt;AdcConfigset-&gt;AdcHwunit-&gt;AdcHwunit_2-&gt;AdcSarMux2ConnectToAdc0(取消勾选)</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/03/33/fpDIK4af_o.png"></p> 
 <p style="text-align:center;"> <img alt="" src="https://images2.imgbox.com/45/ca/pRPP8rz7_o.png"></p> 
 <p> 3.</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b3/c5/xo58AstV_o.png"></p> 
 <p>这样就可以了，其实主要还是看客户那边的需求，这里只是参考。 </p> 
</blockquote> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/18c680d58aedef08f3eab9682d2f725f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">单步预测与多步与预测的联系与区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9afeeac260ccdbe5f6bafedd8fc96afb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">拓扑排序１图文详解面试常考算法 —— 拓扑排序</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>