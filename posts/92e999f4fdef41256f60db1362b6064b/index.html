<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用Tableau做数据分析的一些思考 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用Tableau做数据分析的一些思考" />
<meta property="og:description" content=" 文章目录 使用Tableau做数据分析的一些思考问题分析Tableau使用技巧 使用Tableau做数据分析的一些思考 参考：
Tableau数据分析训练营之LOD专题
15 大详细级别表达式
对于Tableau数据分析有两句话非常重要：
分析即聚合。维度是聚合依据。 问题分析 需要理解复杂问题的层级关系，通常与当前层级有：向上/向下，两种关系
向下的层级问题，需要用fixed固定层级关系，也可以使用INCLUDE向上的层级问题，有三种方法： 表计算：window_sum/total
建议使用，因为表计算是计算展示出来的数据，计算速度比较快fixed：直接指定需要计算的层级exclude：排除当前视图的层级，排除之后就根据更高级一级的维度聚合。
exclude：是按照排除指定层级之后，最小层级聚合的，比如说有三个层级，A、B、C，将B层级排除之后，将按照C层级进行聚合。 例如：
简单的问题是可以直接从明细表中将维度提取出来，比如说每个国家的销量，每个国家就可以直接从明细表中group by出来。复杂问题是引用了其他聚合的结果作为维度。比如说销售量1、2...N的客户数，这里的1、2...N，无法直接从明细表中提取出来，需要先进行聚合，将聚合的结果作为维度(一般使用Fixed)，再一步的聚合。 那么遇到复杂问题该怎么办呢？
首先应该做的是问题分析。将问题拆解为三个内容：
问题范围问题描述（维度）问题答案（度量） 例如问题：
有多少客户购买了1次、2次、3次…N次订单？
现在看一下这个问题的描述，思考三个问题，问题的范围是什么？问题描述是什么？问题的答案又是什么？
问题范围：可以看到，该问题没有设定范围，也就是所有数据。
问题描述（维度）：它需要的是，购买了1次、2次、3次....N次订单的XXX，所以它的维度是不同频次。
问题答案（度量）：它最后需要什么，多少客户，因此客户数量就是它的结果。
综上，将问题转换为标准问题结果：（no filter），不同购买频次的客户数量？
将问题转换为标准问题之后，就根据维度，度量，范围，做一定的数据分析。
遇到问题最主要的是能够分解问题，主要是对于问题维度的思考，适合这个问题的维度。
Tableau使用技巧 对于表的计算，window_sum，在使用目前视图中已经有的数据很有效。比如使用IIF判断得到的数据，若想要都进行赋值，可以使用window_sum，来计算。对于赋予想要筛选的值/不确定的值，可以将这个字段转换为参数，之后在公式中使用这个参数，就可以根据这个参数进行筛选了。在tableau中，交互条件也可以进行设置，设置交互条件之后，点击某个值，可以修改参数的值。对于sum和相减，建议先sum再相减，若先相减再sum，性能会较差SUM(IIF({INCLUDE [Product]:SUM([Profit])-SUM([Target Profit])}&gt;0,1,0)) 可以判断LOD的结果，它与SUM({INCLUDE [Product]:IIF(SUM([Profit])-SUM([Target Profit])&gt;0,1,0)})结果相同 先从熟悉的层次开始，从交叉表开始，最后转换为图形。
对于综合问题的层次、筛选的影响，合理的选择计算。
FIXED是绝对的引用，不收视图的影响INCLUDE是相对的引用，通常用于更低层次的聚合。INCLUDE为空，相当于当前视图完成聚合，并可以根据当前视图的变换而变化。同理，EXCLUED为空，也是基于当前视图完场聚合。 表计算是聚合的聚合，而LOD是在指定层级的聚合。
表计算，可以进行辅助计算，设定辅助计算的维度，以及计算的方法。
在实际业务中，关于周的数据需要多一点考虑，例如日期虽然同步了，但是每周的数量不一致。这是在实际业务中需要注意的地方。
将筛选器添加到上下文，会将筛选的优先级提高到最高，例如字段中有fixed，默认筛选器在fixed优先级之后，所以筛选之后不会影响fixed的计算结果。将筛选器添加到上下文之后，筛选器的优先级会高于fixed，筛选之后的结果会影响fixed的计算结果。有一种特殊情况，当筛选器的对象和fixed定义的层级是一一对应的，这时是否将筛选器添加到上下文，对fixed的计算都没有影响了。
tableau中集合的运用是，可以理解成多个参数，在一个仪表盘中，可以创建一个操作，用来更新集合的值。
默认的窗口函数的累加是从头开始累加的。WINDOW_SUM(COUNTD([Customer ID]),0,LAST())，注意后面两个参数，可以实现从后往前加，利用的类似与sql中的窗口函数，将末尾固定，每次累计当前行到最后一行。 " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/92e999f4fdef41256f60db1362b6064b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-12T15:07:33+08:00" />
<meta property="article:modified_time" content="2022-04-12T15:07:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用Tableau做数据分析的一些思考</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Tableau_6" rel="nofollow">使用Tableau做数据分析的一些思考</a></li><li><ul><li><a href="#_26" rel="nofollow">问题分析</a></li><li><a href="#Tableau_78" rel="nofollow">Tableau使用技巧</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><br><br></p> 
<h2><a id="Tableau_6"></a>使用Tableau做数据分析的一些思考</h2> 
<br> 
<p>参考：</p> 
<p><a href="https://www.bilibili.com/video/BV1ZR4y157ka" rel="nofollow">Tableau数据分析训练营之LOD专题</a></p> 
<p><a href="https://www.tableau.com/zh-cn/about/blog/LOD-expressions" rel="nofollow">15 大详细级别表达式</a></p> 
<p><br><br></p> 
<p>对于Tableau数据分析有两句话非常重要：</p> 
<ul><li><strong>分析即聚合。</strong></li><li><strong>维度是聚合依据。</strong></li></ul> 
<p><br><br></p> 
<h3><a id="_26"></a>问题分析</h3> 
<p><strong>需要理解复杂问题的层级关系</strong>，通常与当前层级有：向上/向下，两种关系</p> 
<ul><li><strong>向下</strong>的层级问题，需要用<code>fixed</code>固定层级关系，也可以使用<code>INCLUDE</code></li><li><strong>向上</strong>的层级问题，有三种方法： 
  <ol><li>表计算：window_sum/total<br> 建议使用，因为表计算是计算展示出来的数据，计算速度比较快</li><li>fixed：直接指定需要计算的层级</li><li>exclude：<strong>排除</strong>当前视图的层级，排除之后就根据更高级一级的维度聚合。<br> exclude：是按照排除指定层级之后，最小层级聚合的，比如说有三个层级，A、B、C，将B层级排除之后，将按照C层级进行聚合。</li></ol> </li></ul> 
<p>例如：</p> 
<ul><li>简单的问题是可以直接从明细表中将维度提取出来，比如说每个国家的销量，每个国家就可以直接从明细表中<code>group by</code>出来。</li><li>复杂问题是引用了其他聚合的结果作为维度。比如说销售量<code>1、2...N</code>的客户数，这里的<code>1、2...N</code>，无法直接从明细表中提取出来，需要先进行聚合，将聚合的结果作为维度(一般使用Fixed)，再一步的聚合。</li></ul> 
<br> 
<p><strong>那么遇到复杂问题该怎么办呢？</strong></p> 
<p>首先应该做的是问题分析。将问题拆解为三个内容：</p> 
<ol><li>问题范围</li><li>问题描述（维度）</li><li>问题答案（度量）</li></ol> 
<p>例如问题：</p> 
<p>有多少客户购买了1次、2次、3次…N次订单？</p> 
<p>现在看一下这个问题的描述，思考三个问题，问题的范围是什么？问题描述是什么？问题的答案又是什么？</p> 
<p>问题范围：可以看到，该问题没有设定范围，也就是所有数据。</p> 
<p>问题描述（维度）：它需要的是，<code>购买了1次、2次、3次....N次订单</code>的XXX，所以它的维度是<code>不同频次</code>。</p> 
<p>问题答案（度量）：它最后需要什么，<code>多少客户</code>，因此<code>客户数量</code>就是它的结果。</p> 
<p>综上，将问题转换为标准问题结果：（no filter），不同购买频次的客户数量？</p> 
<p><img src="https://images2.imgbox.com/c5/b3/15n02iJE_o.png" alt="在这里插入图片描述"></p> 
<p>将问题转换为标准问题之后，就根据维度，度量，范围，做一定的数据分析。</p> 
<p>遇到问题最主要的是能够分解问题，主要是对于问题<strong>维度</strong>的思考，适合这个问题的维度。</p> 
<p><br><br></p> 
<h3><a id="Tableau_78"></a>Tableau使用技巧</h3> 
<ul><li>对于表的计算，<code>window_sum</code>，在使用目前视图中<strong>已经有的数据</strong>很有效。比如使用<code>IIF</code>判断得到的数据，若想要都进行赋值，可以使用<code>window_sum</code>，来计算。</li><li>对于赋予想要筛选的值/不确定的值，可以将这个字段转换为参数，之后在公式中使用这个参数，就可以根据这个参数进行筛选了。</li><li>在tableau中，交互条件也可以进行设置，设置交互条件之后，点击某个值，可以修改参数的值。</li><li>对于sum和相减，建议先sum再相减，若先相减再sum，性能会较差</li><li><code>SUM(IIF({INCLUDE [Product]:SUM([Profit])-SUM([Target Profit])}&gt;0,1,0))</code> 可以判断LOD的结果，它与<code>SUM({INCLUDE [Product]:IIF(SUM([Profit])-SUM([Target Profit])&gt;0,1,0)})</code>结果相同</li></ul> 
<br> 
<ul><li> <p>先从熟悉的层次开始，从交叉表开始，最后转换为图形。</p> </li><li> <p>对于综合问题的层次、筛选的影响，合理的选择计算。</p> 
  <ul><li><code>FIXED</code>是绝对的引用，不收视图的影响</li><li><code>INCLUDE</code>是相对的引用，通常用于更低层次的聚合。</li><li><code>INCLUDE</code>为空，相当于当前视图完成聚合，并可以根据当前视图的变换而变化。同理，<code>EXCLUED</code>为空，也是基于当前视图完场聚合。</li></ul> </li><li> <p>表计算是聚合的聚合，而LOD是在指定层级的聚合。</p> </li><li> <p>表计算，可以进行辅助计算，设定辅助计算的维度，以及计算的方法。</p> </li><li> <p><strong>在实际业务中，关于周的数据需要多一点考虑</strong>，例如日期虽然同步了，但是每周的数量不一致。这是在实际业务中需要注意的地方。</p> </li><li> <p>将筛选器添加到上下文，会将筛选的优先级提高到最高，例如字段中有fixed，默认筛选器在fixed优先级之后，所以筛选之后不会影响fixed的计算结果。将筛选器添加到上下文之后，筛选器的优先级会高于fixed，筛选之后的结果会影响fixed的计算结果。有一种特殊情况，当筛选器的对象和fixed定义的层级是一一对应的，这时是否将筛选器添加到上下文，对fixed的计算都没有影响了。</p> </li><li> <p>tableau中集合的运用是，可以理解成多个参数，在一个仪表盘中，可以创建一个操作，用来更新集合的值。</p> </li></ul> 
<br> 
<ul><li>默认的窗口函数的累加是从头开始累加的。<code>WINDOW_SUM(COUNTD([Customer ID]),0,LAST())</code>，注意后面两个参数，可以实现从后往前加，利用的类似与sql中的窗口函数，将末尾固定，每次累计当前行到最后一行。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4eaa7e39dbd53a4c9bebfcf1af54cb80/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JS 合并数组的三大方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2e7917b53b2f9c2791dc3ac91767d5f1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">DO、DTO、BO、VO、POJO等各种O浅学（总结）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>