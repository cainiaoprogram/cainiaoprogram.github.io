<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于FusionCompute中Ubuntu16.04.5 Server虚拟机安装Nvidia T4 GPU卡 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于FusionCompute中Ubuntu16.04.5 Server虚拟机安装Nvidia T4 GPU卡" />
<meta property="og:description" content="环境如下：
华为FusionCompute，采用虚拟机GPU直通的方式进行部署4块T4卡，全部资源关联给一台虚拟机；
使用的英伟达驱动版本为：NVIDIA-Linux-x86_64-410.104.run
坑点在于：
虚拟化平台本来是6.3.1版本，得知如需使用T4卡，虚拟化平台需升级到8.0.0；后经过评审流程，最终实施升级到了最新8.0.0；但是
我算法平台测试版本为Ubuntu16.04.1 Desktop，经查，虚拟化版本不支持此操作系统，只支持Windows系统相关操作系统，GPU资源组
关联不了测试虚拟机，此刻心中一万个羊驼奔腾而过；继续联系华为处理，后终于得知，版本Ubuntu16.04.5 Server内部测试过可行，
赶紧和算法厂家进行沟通，得知算法平台也支持之后，又在线对虚拟化平台VRM和CNA平台进行了插件升级，终于Ubuntu16.04.5
Server关联到了GPU资源组；
接下来就是安装驱动了！对了，在安装Ubuntu16.04.5时，记得勾选openssh（自己下openssh安装包，老是安装错误）！
将NVIDIA-Linux-x86_64-410.104.run传入/root下
首先需要禁用nouveau；
1.添加conf 文件：cat /etc/modprobe.d/blacklist-nouveau.conf
blacklist nouveau
options nouveau modeset=0
2. 重新生成 kernel initramfs:
update-initramfs -u
3. 重启：
reboot
接下来安装驱动；
chmod -x NVIDIA-Linux-x86_64-410.104.run
sh NVIDIA-Linux-x86_64-410.104.run
安装错误，提醒缺少GCC，此为离线安装，无法上网；也下载了gcc5.4.0，但是安装时依旧报错，最后干脆将镜像挂载，以下参考大神；
关于ubuntu server装上后没有make gcc等的方法_ubuntu gcc 13_竺蠡的博客-CSDN博客
这里感谢博主解决了一下大问题！
安装gcc、make后！安装nvidia驱动正常！
不容易啊，撒花。。。。结束！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fe170f2c30f795a6754c8843cf292f60/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-09T23:43:46+08:00" />
<meta property="article:modified_time" content="2023-05-09T23:43:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于FusionCompute中Ubuntu16.04.5 Server虚拟机安装Nvidia T4 GPU卡</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>环境如下：</p> 
<p>        华为FusionCompute，采用虚拟机GPU直通的方式进行部署4块T4卡，全部资源关联给一台虚拟机；</p> 
<p>        使用的英伟达驱动版本为：NVIDIA-Linux-x86_64-410.104.run</p> 
<p>坑点在于：</p> 
<p>        虚拟化平台本来是6.3.1版本，得知如需使用T4卡，虚拟化平台需升级到8.0.0；后经过评审流程，最终实施升级到了最新8.0.0；但是</p> 
<p>我算法平台测试版本为Ubuntu16.04.1 Desktop，经查，虚拟化版本不支持此操作系统，只支持Windows系统相关操作系统，GPU资源组</p> 
<p>关联不了测试虚拟机，此刻心中一万个羊驼奔腾而过；继续联系华为处理，后终于得知，版本Ubuntu16.04.5 Server内部测试过可行，</p> 
<p>赶紧和算法厂家进行沟通，得知算法平台也支持之后，又在线对虚拟化平台VRM和CNA平台进行了插件升级，终于Ubuntu16.04.5</p> 
<p>Server关联到了GPU资源组；</p> 
<p>        接下来就是安装驱动了！对了，在安装Ubuntu16.04.5时，记得勾选openssh（自己下openssh安装包，老是安装错误）！</p> 
<p>        将NVIDIA-Linux-x86_64-410.104.run传入/root下</p> 
<p>        首先需要禁用nouveau；</p> 
<p>        1.添加conf 文件：cat /etc/modprobe.d/blacklist-nouveau.conf</p> 
<p>        blacklist nouveau</p> 
<p>        options nouveau modeset=0</p> 
<p>        2. 重新生成 kernel initramfs:<br>         update-initramfs -u</p> 
<p>        3. 重启：<br>         reboot</p> 
<p>        接下来安装驱动；</p> 
<p>        chmod -x NVIDIA-Linux-x86_64-410.104.run</p> 
<p>        sh NVIDIA-Linux-x86_64-410.104.run</p> 
<p>        安装错误，提醒缺少GCC，此为离线安装，无法上网；也下载了gcc5.4.0，但是安装时依旧报错，最后干脆将镜像挂载，以下参考大神；</p> 
<p>        <a href="https://blog.csdn.net/hzd12368/article/details/78503315" title="关于ubuntu server装上后没有make gcc等的方法_ubuntu gcc 13_竺蠡的博客-CSDN博客">关于ubuntu server装上后没有make gcc等的方法_ubuntu gcc 13_竺蠡的博客-CSDN博客</a></p> 
<p>        这里感谢博主解决了一下大问题！</p> 
<p>        安装gcc、make后！安装nvidia驱动正常！</p> 
<p>       <img alt="" height="403" src="https://images2.imgbox.com/37/7a/MPRMGwCd_o.png" width="801"></p> 
<p>       不容易啊，撒花。。。。结束！</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/44235bdc07ebb0c70062453d182d5961/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Pandas DataFrame 列切片的5种方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/662501e29cfb2419275a858030f3a13e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ubuntu上安装显卡</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>