<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CUDA之nvidia-smi命令详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CUDA之nvidia-smi命令详解" />
<meta property="og:description" content="nvidia-smi是用来查看GPU使用情况的。我常用这个命令判断哪几块GPU空闲，但是最近的GPU使用状态让我很困惑，于是把nvidia-smi命令显示的GPU使用表中各个内容的具体含义解释一下。
这是服务器上特斯拉K80的信息。 上面的表格中： 第一栏的Fan：N/A是风扇转速，从0到100%之间变动，这个速度是计算机期望的风扇转速，实际情况下如果风扇堵转，可能打不到显示的转速。有的设备不会返回转速，因为它不依赖风扇冷却而是通过其他外设保持低温（比如我们实验室的服务器是常年放在空调房间里的）。 第二栏的Temp：是温度，单位摄氏度。 第三栏的Perf：是性能状态，从P0到P12，P0表示最大性能，P12表示状态最小性能。 第四栏下方的Pwr：是能耗，上方的Persistence-M：是持续模式的状态，持续模式虽然耗能大，但是在新的GPU应用启动时，花费的时间更少，这里显示的是off的状态。 第五栏的Bus-Id是涉及GPU总线的东西，domain:bus:device.function 第六栏的Disp.A是Display Active，表示GPU的显示是否初始化。 第五第六栏下方的Memory Usage是显存使用率。 第七栏是浮动的GPU利用率。 第八栏上方是关于ECC的东西。 第八栏下方Compute M是计算模式。 下面一张表示每个进程占用的显存使用率。
显存占用和GPU占用是两个不一样的东西，显卡是由GPU和显存等组成的，显存和GPU的关系有点类似于内存和CPU的关系。我跑caffe代码的时候显存占得少，GPU占得多，师弟跑TensorFlow代码的时候，显存占得多，GPU占得少。
背景 qgzang@ustc:~$ nvidia-smi -h 输出如下信息：
NVIDIA System Management Interface – v352.79
NVSMI provides monitoring information for Tesla and select Quadro devices. The data is presented in either a plain text or an XML format, via stdout or a file. NVSMI also provides several management operations for changing the device state.
Note that the functionality of NVSMI is exposed through the NVML C-based library." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9768338fe893a3926195ce1363b510b2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-05T13:23:13+08:00" />
<meta property="article:modified_time" content="2018-12-05T13:23:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CUDA之nvidia-smi命令详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>nvidia-smi是用来查看GPU使用情况的。我常用这个命令判断哪几块GPU空闲，但是最近的GPU使用状态让我很困惑，于是把nvidia-smi命令显示的GPU使用表中各个内容的具体含义解释一下。</p> 
<p><img alt="" class="has" height="516" src="https://images2.imgbox.com/7e/0b/zoAHCmf3_o.jpg" width="725"></p> 
<p> </p> 
<p>这是服务器上特斯拉K80的信息。 <br> 上面的表格中： <br> 第一栏的Fan：N/A是风扇转速，从0到100%之间变动，这个速度是计算机期望的风扇转速，实际情况下如果风扇堵转，可能打不到显示的转速。有的设备不会返回转速，因为它不依赖风扇冷却而是通过其他外设保持低温（比如我们实验室的服务器是常年放在空调房间里的）。 <br> 第二栏的Temp：是温度，单位摄氏度。 <br> 第三栏的Perf：是性能状态，从P0到P12，P0表示最大性能，P12表示状态最小性能。 <br> 第四栏下方的Pwr：是能耗，上方的Persistence-M：是持续模式的状态，持续模式虽然耗能大，但是在新的GPU应用启动时，花费的时间更少，这里显示的是off的状态。 <br> 第五栏的Bus-Id是涉及GPU总线的东西，domain:bus:device.function <br> 第六栏的Disp.A是Display Active，表示GPU的显示是否初始化。 <br> 第五第六栏下方的Memory Usage是显存使用率。 <br> 第七栏是浮动的GPU利用率。 <br> 第八栏上方是关于ECC的东西。 <br> 第八栏下方Compute M是计算模式。 <br> 下面一张表示每个进程占用的显存使用率。</p> 
<p><strong>显存占用和GPU占用是两个不一样的东西</strong>，显卡是由GPU和显存等组成的，显存和GPU的关系有点类似于内存和CPU的关系。我跑caffe代码的时候显存占得少，GPU占得多，师弟跑TensorFlow代码的时候，显存占得多，GPU占得少。</p> 
<p> </p> 
<h2>背景</h2> 
<pre class="has"><code>qgzang@ustc:~$ nvidia-smi -h</code></pre> 
<p>输出如下信息：</p> 
<blockquote> 
 <p>NVIDIA System Management Interface – v352.79</p> 
 <p>NVSMI provides monitoring information for Tesla and select Quadro devices. <br> The data is presented in either a plain text or an XML format, via stdout or a file. <br> NVSMI also provides several management operations for changing the device state.</p> 
 <p>Note that the functionality of NVSMI is exposed through the NVML C-based <br> library. See the NVIDIA developer website for more information about NVML. <br><a href="http://lib.csdn.net/base/python" rel="nofollow">Python</a> wrappers to NVML are also available. The output of NVSMI is <br> not guaranteed to be backwards compatible; NVML and the bindings are backwards <br> compatible.</p> 
 <p><a href="http://developer.nvidia.com/nvidia-management-library-nvml/" rel="nofollow">http://developer.nvidia.com/nvidia-management-library-nvml/</a> <br><a href="http://pypi.python.org/pypi/nvidia-ml-py/" rel="nofollow">http://pypi.python.org/pypi/nvidia-ml-py/</a></p> 
 <p>Supported products:</p> 
 <ul><li>Full Support  
   <ul><li>All Tesla products, starting with the Fermi architecture</li><li>All Quadro products, starting with the Fermi architecture</li><li>All GRID products, starting with the Kepler architecture</li><li>GeForce Titan products, starting with the Kepler architecture</li></ul></li><li>Limited Support  
   <ul><li>All Geforce products, starting with the Fermi architecture</li></ul></li></ul> 
</blockquote> 
<h2 id="命令"><a name="t0"></a><a name="t1"></a>命令</h2> 
<pre class="has"><code>nvidia-smi [OPTION1 [ARG1]] [OPTION2 [ARG2]] ...</code></pre> 
<h2><a name="t2"></a>参数</h2> 
<table><thead><tr><th>参数</th><th>详解</th></tr></thead><tbody><tr><td>-h, –help</td><td>Print usage information and exit.</td></tr></tbody></table> 
<h3 id="list-options"><a name="t3"></a>LIST OPTIONS:</h3> 
<table><thead><tr><th>参数</th><th>详解</th></tr></thead><tbody><tr><td>-L, –list-gpus</td><td>Display a list of GPUs connected to the system.</td></tr></tbody></table> 
<pre class="has"><code class="language-bash">qgzang@ustc:~$ nvidia-smi -L</code></pre> 
<p><span style="color:#7c79e5;"><strong><code>GPU 0: GeForce GTX TITAN X (UUID: GPU-xxxxx-xxx-xxxxx-xxx-xxxxxx)</code></strong></span></p> 
<h3 id="summary-options"><a name="t4"></a>SUMMARY OPTIONS:</h3> 
<table><thead><tr><th>参数</th><th>详解</th></tr></thead><tbody><tr><td>-i,–id=</td><td>Target a specific GPU.</td></tr><tr><td>-f,–filename=</td><td>Log to a specified file, rather than to stdout.</td></tr><tr><td>-l,–loop=</td><td>Probe until Ctrl+C at specified second interval.</td></tr></tbody></table> 
<h3 id="query-options"><a name="t5"></a>QUERY OPTIONS:</h3> 
<table><thead><tr><th>参数</th><th>详解</th></tr></thead><tbody><tr><td>-q,</td><td>–query</td></tr><tr><td>-u,–unit</td><td>Show unit, rather than GPU, attributes.</td></tr><tr><td>-i,–id=</td><td>Target a specific GPU or Unit.</td></tr><tr><td>-f,–filename=</td><td>Log to a specified file, rather than to stdout.</td></tr><tr><td>-x,–xml-format</td><td>Produce XML output.</td></tr><tr><td>–dtd</td><td>When showing xml output, embed DTD.</td></tr><tr><td>-d,–display=</td><td>Display only selected information: MEMORY,</td></tr><tr><td>-l, –loop=</td><td>Probe until Ctrl+C at specified second interval.</td></tr><tr><td>-lms, –loop-ms=</td><td>Probe until Ctrl+C at specified millisecond interval.</td></tr></tbody></table> 
<h3 id="selective-query-options"><a name="t6"></a>SELECTIVE QUERY OPTIONS:</h3> 
<table><thead><tr><th>参数</th><th>详解</th><th>补充</th></tr></thead><tbody><tr><td>–query-gpu=</td><td>Information about GPU.</td><td>Call –help-query-gpu for more info.</td></tr><tr><td>–query-supported-clocks=</td><td>List of supported clocks.</td><td>Call –help-query-supported-clocks for more info.</td></tr><tr><td>–query-compute-apps=</td><td>List of currently active compute processes.</td><td>Call –help-query-compute-apps for more info.</td></tr><tr><td>–query-accounted-apps=</td><td>List of accounted compute processes.</td><td>Call –help-query-accounted-apps for more info.</td></tr><tr><td>–query-retired-pages=</td><td>List of device memory pages that have been retired.</td><td>Call –help-query-retired-pages for more info.</td></tr></tbody></table> 
<h3 id="mandatory"><a name="t7"></a>[mandatory]</h3> 
<table><thead><tr><th>参数</th><th>命令</th></tr></thead><tbody><tr><td>-i, –id=</td><td>Target a specific GPU or Unit.</td></tr><tr><td>-f, –filename=</td><td>Log to a specified file, rather than to stdout.</td></tr><tr><td>-l, –loop=</td><td>Probe until Ctrl+C at specified second interval.</td></tr><tr><td>-lms, –loop-ms=</td><td>Probe until Ctrl+C at specified millisecond interval.</td></tr></tbody></table> 
<h3 id="device-modification-options"><a name="t8"></a>DEVICE MODIFICATION OPTIONS:</h3> 
<table><thead><tr><th>参数</th><th>命令</th><th>补充</th></tr></thead><tbody><tr><td>-pm, –persistence-mode=</td><td>Set persistence mode: 0/DISABLED, 1/ENABLED</td><td> </td></tr><tr><td>-e, –ecc-config=</td><td>Toggle ECC support: 0/DISABLED, 1/ENABLED</td><td> </td></tr><tr><td>-p, –reset-ecc-errors=</td><td>Reset ECC error counts: 0/VOLATILE, 1/AGGREGATE</td><td> </td></tr><tr><td>-c, –compute-mode=</td><td>Set MODE for compute applications:</td><td>0/DEFAULT,1/EXCLUSIVE_THREAD (deprecated),2/PROHIBITED, 3/EXCLUSIVE_PROCESS</td></tr><tr><td>–gom=</td><td>Set GPU Operation Mode:</td><td>0/ALL_ON, 1/COMPUTE, 2/LOW_DP</td></tr><tr><td>-r –gpu-reset</td><td>Trigger reset of the GPU.</td><td> </td></tr></tbody></table> 
<h3 id="unit-modification-options"><a name="t9"></a>UNIT MODIFICATION OPTIONS:</h3> 
<table><thead><tr><th>参数</th><th>命令</th></tr></thead><tbody><tr><td>-t, –toggle-led=</td><td>Set Unit LED state: 0/GREEN, 1/AMBER</td></tr><tr><td>-i, –id=</td><td>Target a specific Unit.</td></tr></tbody></table> 
<h3 id="show-dtd-options"><a name="t10"></a>SHOW DTD OPTIONS:</h3> 
<table><thead><tr><th>参数</th><th>命令</th></tr></thead><tbody><tr><td>–dtd</td><td>Print device DTD and exit.</td></tr><tr><td>-f, –filename=</td><td>Log to a specified file, rather than to stdout.</td></tr><tr><td>-u, –unit</td><td>Show unit, rather than device, DTD.</td></tr><tr><td>–debug=</td><td>Log encrypted debug information to a specified file.</td></tr></tbody></table> 
<h3 id="process-monitoring"><a name="t11"></a>Process Monitoring:</h3> 
<table><thead><tr><th>参数</th><th>命令</th><th>补充</th></tr></thead><tbody><tr><td>pmon</td><td>Displays process stats in scrolling format.</td><td>“nvidia-smi pmon -h” for more information.</td></tr></tbody></table> 
<h3 id="topology-experimental"><a name="t12"></a>TOPOLOGY: (EXPERIMENTAL)</h3> 
<table><thead><tr><th>参数</th><th>命令</th><th>补充</th></tr></thead><tbody><tr><td>topo</td><td>Displays device/system topology. “nvidia-smi topo -h” for more information.</td><td>Please see the nvidia-smi(1) manual page for more detailed information.</td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fcd24cd6438d7fca276fbf52e0706578/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">k-fold与交叉验证</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58bdc7e07a0bda77d06a81c149149f4c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java反射介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>