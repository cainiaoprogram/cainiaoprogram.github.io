<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MATLAB如何画三轴图 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MATLAB如何画三轴图" />
<meta property="og:description" content="MATLAB如何画三轴图 前言 使用MATLAB绘图非常方便，它提供了非常丰富的图形，如：line，bar，stem等，用户可以直接调用相应的函数，但有时直接使用这些“高级”的函数不能满足我们的绘图要求，比如，如何绘制三Y轴的图形？，即一个figure中有一个X轴，三个Y轴，分别对应三个数据曲线（line或bar等），比如下图：
绘制这些图的技巧就是学会操纵对象句柄，掌握了方法之后可以非常灵活的绘制各种你想要的图形。
下面我以第一幅图像为例，介绍它的画法。
目录 文章目录 MATLAB如何画三轴图前言目录1. 预备知识2. 创建数据，并建一个figure3. 画第一个bar4. 画第二个线5. 画第三个线图6. 加label7. 封装成函数8. 常用绘图对象属性表1 Axes常用的属性2 Line的常用的属性3 text对象的属性4 bar对象属性5 control legend6 对象通用属性 1. 预备知识 MATLAB绘图实际上是在创建一些资源对象，这里的对象包括：图（figure）、轴（axes）、线（line）、柱状图（bar）以及其他标注对象（如文字（text）、图例（legend）等）等。这些对象各自都与唯一的一个句柄（handle）想关联。对象创建之后，通过 get(handle, ‘property name’) 获取对象指定的属性值，通过set(handle, ‘property name’, ‘property value’) 设置属性值。它们之间有一定的所属关系，如下图
2. 创建数据，并建一个figure % 第一个bar的数据 x1=0:.5:10; y1=sin(x1); % 第二个line的数据 x2=0:.1:10; y2=log(x2); % 第三个line的数据 x3=x2; y3 = tan(x3); figure; 3. 画第一个bar % 建第一个axes ha(1) = axes(&#39;ycolor&#39;,&#39;b&#39;,&#39;yminortick&#39;,&#39;on&#39;,&#39;xminortick&#39;,&#39;off&#39;); hold on; % 保持以上属性，因为下面的bar有自动调整axes属性的作用 h(1) = bar(x1, y1,&#39;parent&#39;,ha(1),&#39;facecolor&#39;,&#39;b&#39;); % 画第一个bar图 xlim1 = get(ha(1),&#39;xlim&#39;); % 获取第一个axes的x轴的范围，这个值很关键 得到如下图：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/43d78959a64588619d347143f2d7b1e9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-09T10:59:39+08:00" />
<meta property="article:modified_time" content="2018-04-09T10:59:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MATLAB如何画三轴图</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="MATLAB_0"></a>MATLAB如何画三轴图</h2> 
<h3><a id="_2"></a>前言</h3> 
<p>使用MATLAB绘图非常方便，它提供了非常丰富的图形，如：line，bar，stem等，用户可以直接调用相应的函数，但有时直接使用这些“高级”的函数不能满足我们的绘图要求，比如，如何绘制三Y轴的图形？，即一个figure中有一个X轴，三个Y轴，分别对应三个数据曲线（line或bar等），比如下图：<br> <img src="https://images2.imgbox.com/a0/ad/ng8y1xvy_o.png" alt="这里写图片描述"><br> <img src="https://images2.imgbox.com/57/45/oPTBJiwy_o.png" alt="这里写图片描述"><br> 绘制这些图的技巧就是学会操纵对象句柄，掌握了方法之后可以非常灵活的绘制各种你想要的图形。</p> 
<p>下面我以第一幅图像为例，介绍它的画法。</p> 
<h3><a id="_11"></a>目录</h3> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#MATLAB_0" rel="nofollow">MATLAB如何画三轴图</a></li><li><ul><li><a href="#_2" rel="nofollow">前言</a></li><li><a href="#_11" rel="nofollow">目录</a></li><li><a href="#1__14" rel="nofollow">1. 预备知识</a></li><li><a href="#2_figure_20" rel="nofollow">2. 创建数据，并建一个figure</a></li><li><a href="#3_bar_35" rel="nofollow">3. 画第一个bar</a></li><li><a href="#4__49" rel="nofollow">4. 画第二个线</a></li><li><a href="#5__62" rel="nofollow">5. 画第三个线图</a></li><li><a href="#6_label_99" rel="nofollow">6. 加label</a></li><li><a href="#7__114" rel="nofollow">7. 封装成函数</a></li><li><a href="#8__184" rel="nofollow">8. 常用绘图对象属性表</a></li><li><ul><li><a href="#1____Axes_186" rel="nofollow">1 Axes常用的属性</a></li><li><a href="#2____Line_260" rel="nofollow">2 Line的常用的属性</a></li><li><a href="#3____text_278" rel="nofollow">3 text对象的属性</a></li><li><a href="#4____bar_290" rel="nofollow">4 bar对象属性</a></li><li><a href="#5____control_legend_312" rel="nofollow">5 control legend</a></li><li><a href="#6_____320" rel="nofollow">6 对象通用属性</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1__14"></a>1. 预备知识</h3> 
<p>MATLAB绘图实际上是在创建一些资源对象，这里的对象包括：图（figure）、轴（axes）、线（line）、柱状图（bar）以及其他标注对象（如文字（text）、图例（legend）等）等。这些对象各自都与唯一的一个句柄（handle）想关联。对象创建之后，通过 get(handle, ‘property name’) 获取对象指定的属性值，通过set(handle, ‘property name’, ‘property value’) 设置属性值。它们之间有一定的所属关系，如下图</p> 
<p><img src="https://images2.imgbox.com/17/87/jzwzYRHy_o.png" alt="这里写图片描述"></p> 
<h3><a id="2_figure_20"></a>2. 创建数据，并建一个figure</h3> 
<pre><code class="prism language-matlab">% 第一个bar的数据
x1=0:.5:10;
y1=sin(x1);
% 第二个line的数据
x2=0:.1:10;
y2=log(x2);
% 第三个line的数据
x3=x2;
y3 = tan(x3);
figure;
</code></pre> 
<h3><a id="3_bar_35"></a>3. 画第一个bar</h3> 
<pre><code class="prism language-matlab">% 建第一个axes
ha(1) = axes('ycolor','b','yminortick','on','xminortick','off');
hold on; % 保持以上属性，因为下面的bar有自动调整axes属性的作用
h(1) = bar(x1, y1,'parent',ha(1),'facecolor','b'); % 画第一个bar图
xlim1 = get(ha(1),'xlim'); % 获取第一个axes的x轴的范围，这个值很关键
</code></pre> 
<p>得到如下图：</p> 
<p><img src="https://images2.imgbox.com/c7/0d/Llmqdtpi_o.png" alt="这里写图片描述"></p> 
<h3><a id="4__49"></a>4. 画第二个线</h3> 
<pre><code class="prism language-matlab">% 建立第二个轴，要与第一个轴重合，并且透明，轴的范围相同
pos1=get(ha(1),'position');
ha(2) = axes('position',pos1,'color','none','ycolor','r','yaxislocation','right','xlim',xlim1,  'xtick', []);

% 画线
h(2) = line(x2,y2,'color','r','parent',ha(2),'linewidth',1.2,'linestyle','-');
</code></pre> 
<p><img src="https://images2.imgbox.com/d1/32/7bBEXeRY_o.png" alt="这里写图片描述"></p> 
<h3><a id="5__62"></a>5. 画第三个线图</h3> 
<pre><code class="prism language-matlab">% 建立第三个轴，左侧与前两个轴对齐，右侧要长出一部分，因此该轴的范围要比前轴的范围大，根据范围与轴的长度成正 % 比来计算
pos1(1)=pos1(1)-0.02;
pos1(3) = pos1(3)*.86;
set([ha(1);ha(2)],'position',pos1);
pos3 = pos1;
pos3(3) = pos3(3)+.12;
xlim3 = xlim1;
xlim3(2) = xlim3(1)+(xlim1(2)-xlim1(1))/pos1(3)*pos3(3);
ha(3) = axes('position',pos3, 'color','none','ycolor',[0,0.5,0],'xlim',xlim3, ...
    'xtick',[],'yaxislocation','right','yminortick','on');
</code></pre> 
<p><img src="https://images2.imgbox.com/74/98/4BsipM7k_o.png" alt="这里写图片描述"></p> 
<pre><code class="prism language-matlab">% 截去多余数据点，并画线
[x3, ind] = sort(x3, 2, 'ascend');
y3 = y3(ind);
ind2 =  (x3&lt;=xlim1(2));
y3 = y3(ind2);
x3 = x3(ind2);
h(3) = line(x3, y3,'color',[0,.5,0],'linewidth',1.2,'linestyle','-','parent',ha(3));
</code></pre> 
<p><img src="https://images2.imgbox.com/74/09/wNTHmcan_o.png" alt="这里写图片描述"></p> 
<pre><code class="prism language-matlab">% 隐藏第三个横轴伸出来的部分
ylim3 = get(ha(3), 'ylim');
line([xlim1(2),xlim3(2)],[ylim3(1),ylim3(1)],'parent',ha(3),'color','w');
</code></pre> 
<p><img src="https://images2.imgbox.com/1b/db/ydksHEWo_o.png" alt="这里写图片描述"></p> 
<h3><a id="6_label_99"></a>6. 加label</h3> 
<pre><code class="prism language-matlab">% 加ylabel
hylab = get([ha(1);ha(2);ha(3)],'ylabel');
hxlab = get(ha(1),'xlabel');
set(hylab{1},'string','bar');
set(hylab{2},'string','log(x)');
set(hylab{3},'string','tan(x)');
% 加xlabel
set(hxlab,'string', 'x');
</code></pre> 
<p>最终，如上面第一个图所示。</p> 
<h3><a id="7__114"></a>7. 封装成函数</h3> 
<p>为了今后方便调用，编写成函数如下：</p> 
<pre><code class="prism language-matlab">function [ha, h] = barplotplot(x1,y1,x2,y2,x3,y3,xlim1, xlab, ylab)
% [ha, h] = barplot(x1,y1,x2,y2,x3,y3,xlim1, xlab, ylab)

ha(1) = axes('ycolor','b','yminortick','on','xminortick','off');
hold on;
h(1) = bar(x1, y1,'parent',ha(1),'facecolor','b');
if ~isempty(xlim1)
    set(ha(1), 'xlim', xlim1); 
end
xlim1 = get(ha(1),'xlim');

% 画第二条线
pos1=get(ha(1),'position');
ha(2) = axes('position',pos1,'color','none','ycolor','r','yaxislocation','right','xlim',xlim1, 'xtick', []);

h(2) = line(x2,y2,'color','r','parent',ha(2),'linewidth',1.2,'linestyle','-');

% 画第三条线
pos1(1)=pos1(1)-0.02;
pos1(3) = pos1(3)*.86;
set([ha(1);ha(2)],'position',pos1);
pos3 = pos1;
pos3(3) = pos3(3)+.12;
xlim3 = xlim1;
xlim3(2) = xlim3(1)+(xlim1(2)-xlim1(1))/pos1(3)*pos3(3);
ha(3) = axes('position',pos3, 'color','none','ycolor',[0,0.5,0],'xlim',xlim3, ...
    'xtick',[],'yaxislocation','right','yminortick','on');
% 截取多余部分
[x3, ind] = sort(x3, 2, 'ascend');
y3 = y3(ind);
ind2 =  (x3&lt;=xlim1(2));
y3 = y3(ind2);
x3 = x3(ind2);
h(3) = line(x3, y3,'color',[0,.5,0],'linewidth',1.2,'linestyle','-','parent',ha(3));
% 隐藏多余的轴
ylim3 = get(ha(3), 'ylim');
line([xlim1(2),xlim3(2)],[ylim3(1),ylim3(1)],'parent',ha(3),'color','w');

if nargin == 7; return; end
% 加ylabels
hylab = get([ha(1);ha(2);ha(3)],'ylabel');
hxlab = get(ha(1),'xlabel');
set(hylab{1},'string',ylab{1});
set(hylab{2},'string',ylab{2});
set(hylab{3},'string',ylab{3});
set(hxlab,'string', xlab);
hold off;
end
</code></pre> 
<p>调用时执行：</p> 
<pre><code class="prism language-matlab">% 第一个bar的数据
x1=0:.5:10;
y1=sin(x1);
% 第二个line的数据
x2=0:.1:10;
y2=log(x2);
% 第三个line的数据
x3=x2;
y3 = tan(x3);
[ha,h] = barplotplot(x1,y1,x2,y2,x3,y3,[],{'x'},{'sin(x)','log(x)','tan(x)'}); % xlim可以指定， % 为[]表示采用默认值
</code></pre> 
<h3><a id="8__184"></a>8. 常用绘图对象属性表</h3> 
<h4><a id="1____Axes_186"></a>1 Axes常用的属性</h4> 
<p>Box ‘on’(default) , ‘off’</p> 
<p>GridLineStyle ‘-’ ‘:’ ‘-.’ ‘none’</p> 
<p>LineStyleOrder LineSpec</p> 
<p>LineWidth .5(default)</p> 
<p>TickDir ‘in’(default), ‘out’</p> 
<p>TickDirMode ‘auto’(default), ‘manual’</p> 
<p>Visible ‘on’(default), ‘off’</p> 
<p>XGrid,YGrid,ZGrid ‘on’, ‘off’(default)</p> 
<p>Children Handles of images, lights, lines, …</p> 
<p>Parent Handler of the figure window</p> 
<p>Position 设置轴在figure中的大小与位置，[left bottom width height] (归一化的单位)</p> 
<p>FontAngle ‘normal’(de), ‘italic’, ‘oblique’</p> 
<p>FontName 字体类型</p> 
<p>FontSize 10(de)</p> 
<p>FontWeight 字体粗细 ‘normal’, ‘bold’, ‘light’</p> 
<p>Title 标题 text句柄 注意：可以用text(x,y,’…’)函数创建text对象</p> 
<p>XLabel,YLabel,ZLabel 轴标签 text句柄</p> 
<p>XTick,YTick,ZTick 轴的划分</p> 
<p>XTickMode,… ‘auto’,‘manual’</p> 
<p>XTickLabel,… 轴刻度的标签</p> 
<p>XTickLabelMode ‘auto’, ‘manual’</p> 
<p>XAxisLocation x轴的位置 ‘bottom’, ‘top’</p> 
<p>YAxisLocation y轴的位置 ‘left’, ‘right’</p> 
<p>XLim,YLim,ZLim 轴的范围</p> 
<p>XLimMode,… ‘auto’, ‘manual’</p> 
<p>XScale,… 指定是线性刻度’linear’，或对数刻度’log’</p> 
<p>Color 背景颜色ColorSpec ‘none’(de)</p> 
<p>ColorOrder 指定线的颜色顺序 m行3列的RGB矩阵</p> 
<p>XColor,YColor 轴的颜色ColorSpec</p> 
<p>XMinorTick,YMinorTick ‘on’, ‘off’</p> 
<p>Units 单位 inches | centimeters |{normalized} | points | pixels</p> 
<p>| characters</p> 
<h4><a id="2____Line_260"></a>2 Line的常用的属性</h4> 
<p>Parent 父轴</p> 
<p>LineStyle {-} | – | : | -. | none</p> 
<p>LineWidth .5(de)</p> 
<p>Marker ‘+’ | ‘o’ | ‘*’ | ‘.’ | ‘x’ | 'square’or ‘s’ | ‘diamond’ or ‘d’ | ‘^’ | ‘v’ | ‘&gt;’ | ‘&lt;’ | ‘pentagram’ or ‘p’ | 'hexagram’or ‘h’ | {‘none’}</p> 
<p>MarkerEdgeColor 由ColorSpec指定</p> 
<p>MarkerFaceColor …</p> 
<p>MarkerSize 6(de)</p> 
<p>Color 线的颜色 ColorSpec指定</p> 
<h4><a id="3____text_278"></a>3 text对象的属性</h4> 
<p>FontSize</p> 
<p>FontAngle ‘normal’, ‘italic’</p> 
<p>Color</p> 
<p>Interpreter tex, latex</p> 
<h4><a id="4____bar_290"></a>4 bar对象属性</h4> 
<p>BarLayout 布局{grouped} | stacked</p> 
<p>BarWidth bar宽scalar in range [0 1]</p> 
<p>BaseLine 基准线句柄</p> 
<p>BaseValue 基准线的位置</p> 
<p>EdgeColor {[0 0 0]} | none | ColorSpec</p> 
<p>FaceColor {flat} | none | ColorSpec</p> 
<p>LineStyle {-} | – | : | -. | none</p> 
<p>LineWidth sizein points</p> 
<p>Parent 父轴</p> 
<h4><a id="5____control_legend_312"></a>5 control legend</h4> 
<p>hle =legend([h1,h2,…], {‘sin(x)’,’cos(x)’, …});</p> 
<p>set(hle, ‘propertyname’,propertyvalue, …);</p> 
<p>get(hle, ‘type’)返回 ‘axes’，legend对象实际上是“轴”</p> 
<h4><a id="6_____320"></a>6 对象通用属性</h4> 
<p>Parent 父对象句柄</p> 
<p>Children 子对象句柄</p> 
<p>Type 对象类型</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/34bc0bea7b4858fe377a0a9c8ab0502a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">numpy矩阵中令小于0的元素改为0</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e8a06fbb7c991f8065867b6cb601670/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">用python实现将文件拷贝到指定目录</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>