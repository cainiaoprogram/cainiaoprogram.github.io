<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python爬虫--获取POI - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python爬虫--获取POI" />
<meta property="og:description" content="一、爬虫简介 爬虫是一种自动化获取互联网信息的程序。通过模拟人类浏览器行为，自动抓取网页上的数据，并进行处理和分析。他能够获取常规的网页HTML源代码，CSS、JavaScript文件，图片、视频等二进制文件，还有很多API接口类的信息像JSON类信息等。
二、如何通过python获取POI POI表示某个地理位置周边的信息。本文使用高德地图api，以获取广东财经大学周边5000米范围内的粤菜馆为例进行阐述。
（声明：本人非计算机相关专业，编程基础也寥寥无几，文章仅是作为选修课学习内容和个人爱好，分享和记录学习过程。）
具体流程主要分为三步：
1.获取所需网页信息
2.将信息进行解析、提取 3.将数据保存为自己想要的格式。
（一）获取所需网页信息。 这里我也将其分为三小步：首先确定广财的具体位置，其次获取地点信息，最后对其进行周边搜索，获取网页信息。
1.确定具体位置 要获得广财大周边信息，首先我们要确认广财大的具体位置，这里有两种方法。
方法一：利用高德地图拾取器确认其坐标位置。
网址如下：
高德地图APIhttps://lbs.amap.com/tools/picker*温馨提示：如果只是作为游客查询，查询地点的坐标精度只有两位数，其实是不够精确的。将”按关键字搜索“获取到的广财大的坐标重新输入”按坐标搜索“，会发现显示出的地址与原来想要查询的有偏差。如图所示：
这里只要在高德地图进行登录及认证，就可以获得更精确的坐标了。
结果如图所示，可以精确到小数点后六位：
方法二：关键字搜索POI
高德地图为我们提供了搜索POI功能，能够通过文本关键字搜索想要的地点信息。
具体步骤如下：
第一步，申请wed服务api类型key。
点击高德地图api控制台—管理应用—我的应用
创建新应用-添加key
这里服务平台选web服务
所需key创建完成
第二步，发起请求。
我们通过高德地图关键字搜索api提供的url访问地点信息，代码如下：
（URL是对互联网上得到的资源的位置和访问方法的一种简洁表示，是互联网上标准资源的地址。）
https://restapi.amap.com/v5/place/text?parameters
其中parameters替换为图中所示必填的参数key和keywords（或types）
在本文例子下完整代码如下：
https://restapi.amap.com/v5/place/text?key=48a31ebd6dd0a05b15b97f23393f7895（这里换成自己创建的key）&amp;keyword=广东财经大学
(用&amp;连接各个参数)
写好之后可以将url输入浏览器，可以访问一个包含广财大的地址信息的json文件，如下图所示。同时可以通过此检查url是否正确。
到这里我们获得了广财大的坐标信息就足够了，不用进行第三步，到后面获取我们想要的周边粤菜馆信息时候再进行解析即可。
2.获取周边信息
这里和上一步步骤几乎相同，不过多赘述，这里几个参数进行解释：
types：由于我们要查询的是粤菜馆，所以必须要填写参数types作为制定类型。types的规则说明中有“POI分类码表”excel表。可以查询想要的地点类型。这里types=050103,如果需要查询多个类型，用|将代码隔开。
radius、page_size和page_num:分别表示要搜索的半径范围，每页25条数据，第几页。这些参数也可以不填，则默认为缺省值
此步url为：
https://restapi.amap.com/v5/place/around?key= 48a31ebd6dd0a05b15b97f23393f7895（这里换成自己创建的key）&amp;types=05103&amp;location=113.354053,23.090164&amp;radius=5000&amp;page_size=25&amp;page_num=1
访问结果如图：
到这里我们已经以json文件的形式获得到我们想要的信息了，但看起来并不整齐直观，接下来我们需要将它解析出来。
（二）将信息进行解析、提取 这里我们用python对所获得的json文件进行解析、提取。
需要用到几个库：
requests，请求访问json文件
pandas，用于存储、处理数据
openpyxl，将数据导入excel
代码如下（按自己理解写的注释，可能解释的不专业）：
*最后导入的excel表格需要自己先创建好，再将路径写入代码。
（三）将数据保存为自己想要的格式 这里我们将数据保存在excel中，结果如图所示：
以上为本案例所有过程，希望大家批评指正。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/43578fb2f708deb7b747cd9c3791410d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-16T10:59:20+08:00" />
<meta property="article:modified_time" content="2023-11-16T10:59:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python爬虫--获取POI</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><strong>一、爬虫简介</strong></h2> 
<p>    爬虫是一种自动化获取互联网信息的程序。通过模拟人类浏览器行为，自动抓取网页上的数据，并进行处理和分析。他能够获取常规的网页HTML源代码，CSS、JavaScript文件，图片、视频等二进制文件，还有很多API接口类的信息像JSON类信息等。</p> 
<h2>二、如何通过python获取POI</h2> 
<p>POI表示某个地理位置周边的信息。本文使用高德地图api，以获取广东财经大学周边5000米范围内的粤菜馆为例进行阐述。</p> 
<p>（声明：本人非计算机相关专业，编程基础也寥寥无几，文章仅是作为选修课学习内容和个人爱好，分享和记录学习过程。）</p> 
<p>具体流程主要分为三步：</p> 
<p>1.获取所需网页信息</p> 
<p>2.将信息进行解析、提取 </p> 
<p>3.将数据保存为自己想要的格式。</p> 
<p> </p> 
<h3>（一）获取所需网页信息。</h3> 
<p>这里我也将其分为三小步：首先确定广财的具体位置，其次获取地点信息，最后对其进行周边搜索，获取网页信息。</p> 
<h4>1.确定具体位置</h4> 
<p>要获得广财大周边信息，首先我们要确认广财大的具体位置，这里有两种方法。</p> 
<p>方法一：利用高德地图拾取器确认其坐标位置。</p> 
<p>网址如下：</p> 
<p><a class="has-card" href="https://lbs.amap.com/tools/picker" rel="nofollow" title="高德地图API"><span class="link-card-box"><span class="link-title">高德地图API</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/b3/4b/zHGB6PQk_o.png">https://lbs.amap.com/tools/picker</span></span></a>*温馨提示：如果只是作为游客查询，查询地点的坐标精度只有两位数，其实是不够精确的。将”按关键字搜索“获取到的广财大的坐标重新输入”按坐标搜索“，会发现显示出的地址与原来想要查询的有偏差。如图所示：</p> 
<p><img src="https://images2.imgbox.com/3d/84/DUPaMttF_o.png" alt="be8b91d6eb4b434d92c24e304c9da395.png"></p> 
<p><img src="https://images2.imgbox.com/1b/fa/QbNvBUqj_o.png" alt="a790b750855b4ec491fb1714a5ecb295.png"></p> 
<p>这里只要在高德地图进行登录及认证，就可以获得更精确的坐标了。</p> 
<p>结果如图所示，可以精确到小数点后六位：</p> 
<p><img src="https://images2.imgbox.com/bd/1e/LOsjW6VQ_o.png" alt="405040f3edbf4ef8a6d495386b250f41.png"></p> 
<p> </p> 
<p>方法二：关键字搜索POI</p> 
<p>高德地图为我们提供了搜索POI功能，能够通过文本关键字搜索想要的地点信息。</p> 
<p><img src="https://images2.imgbox.com/fe/25/y7vUeXCk_o.png" alt="3d7fdec20d4e45a0b297494b366e2c4c.png"></p> 
<p>具体步骤如下：</p> 
<p><img src="https://images2.imgbox.com/1a/5d/jbeIpTzj_o.png" alt="7bf78fd82b054fa396214777d7aafe64.png"></p> 
<p>第一步，申请wed服务api类型key。</p> 
<p>点击高德地图api控制台—管理应用—我的应用</p> 
<p><img src="https://images2.imgbox.com/25/2f/a4EWUh17_o.png" alt="db44ed9e6aca4935bdb57c7b337dc19b.png"></p> 
<p>创建新应用-添加key</p> 
<p><img src="https://images2.imgbox.com/98/c6/bjR2pwHh_o.png" alt="230c09fa6460474c8832c011a9c9b886.png"></p> 
<p>这里服务平台选web服务</p> 
<p><img src="https://images2.imgbox.com/39/55/p4iG9kgf_o.png" alt="6d7eab0544184c56b6acba3e7dd479c3.png"></p> 
<p>所需key创建完成</p> 
<p><img src="https://images2.imgbox.com/ec/23/LI6mCxSg_o.png" alt="12305313a4bc4a4da6148507a82b5a8d.png"></p> 
<p> </p> 
<p>第二步，发起请求。</p> 
<p>我们通过高德地图关键字搜索api提供的url访问地点信息，代码如下：</p> 
<p>（<em>URL是对互联网上得到的资源的位置和访问方法的一种简洁表示，是互联网上标准资源的地址</em>。）</p> 
<blockquote> 
 <p><a href="https://restapi.amap.com/v5/place/text?parameters" rel="nofollow" title="https://restapi.amap.com/v5/place/text?parameters">https://restapi.amap.com/v5/place/text?parameters</a></p> 
</blockquote> 
<p>其中parameters替换为图中所示必填的参数key和keywords（或types）<img src="https://images2.imgbox.com/cb/46/GbV4NefQ_o.png" alt="1f695c8c30194085a4536272f52dfbde.png"></p> 
<p>在本文例子下完整代码如下：</p> 
<blockquote> 
 <p> </p> 
 <p><a href="https://restapi.amap.com/v5/place/text?key=e31b85e0706d287897024ebe59c4354b&amp;keyword" rel="nofollow" title="https://restapi.amap.com/v5/place/text?key=48a31ebd6dd0a05b15b97f23393f7895（这里换成自己创建的key）&amp;keyword=广东财经大学">https://restapi.amap.com/v5/place/text?key=48a31ebd6dd0a05b15b97f23393f7895（这里换成自己创建的key）&amp;keyword=广东财经大学</a></p> 
 <p>(用&amp;连接各个参数)</p> 
</blockquote> 
<p>写好之后可以将url输入浏览器，可以访问一个包含广财大的地址信息的json文件，如下图所示。同时可以通过此检查url是否正确。</p> 
<p><img src="https://images2.imgbox.com/04/c8/I929GTZI_o.png" alt="2b872afef1c84defb058b85550c80f74.png"></p> 
<p>到这里我们获得了广财大的坐标信息就足够了，不用进行第三步，到后面获取我们想要的周边粤菜馆信息时候再进行解析即可。</p> 
<p> </p> 
<h4>2.获取周边信息<br><img src="https://images2.imgbox.com/16/89/EfMU6uOS_o.png" alt="1ec2bed9d2054f3f92177d3ca527a3bd.png"></h4> 
<p> </p> 
<p>这里和上一步步骤几乎相同，不过多赘述，这里几个参数进行解释：</p> 
<p>types：由于我们要查询的是粤菜馆，所以必须要填写参数types作为制定类型。types的规则说明中有“POI分类码表”excel表。可以查询想要的地点类型。这里types=050103,如果需要查询多个类型，用|将代码隔开。</p> 
<p><img src="https://images2.imgbox.com/cd/1a/oTX8fGda_o.png" alt="d8e4177f9d9e43cc850a05f61bed3877.png"></p> 
<p>radius、page_size和page_num:分别表示要搜索的半径范围，每页25条数据，第几页。这些参数也可以不填，则默认为缺省值</p> 
<p> </p> 
<p>此步url为：</p> 
<blockquote> 
 <p style="margin-left:.0001pt;text-align:justify;">https://restapi.amap.com/v5/place/around?key= 48a31ebd6dd0a05b15b97f23393f7895（这里换成自己创建的key）&amp;types=05103&amp;location=113.354053,23.090164&amp;radius=5000&amp;page_size=25&amp;page_num=1</p> 
</blockquote> 
<p>访问结果如图：</p> 
<p><img src="https://images2.imgbox.com/87/22/GkJyAOCN_o.png" alt="171daab1e848444ca91ed87e0b1f0b49.png"></p> 
<p>到这里我们已经以json文件的形式获得到我们想要的信息了，但看起来并不整齐直观，接下来我们需要将它解析出来。</p> 
<h3>（二）将信息进行解析、提取 </h3> 
<p>这里我们用python对所获得的json文件进行解析、提取。</p> 
<p>需要用到几个库：</p> 
<p>requests，请求访问json文件</p> 
<p>pandas，用于存储、处理数据</p> 
<p>openpyxl，将数据导入excel</p> 
<p>代码如下（按自己理解写的注释，可能解释的不专业）：</p> 
<p>*最后导入的excel表格需要自己先创建好，再将路径写入代码。</p> 
<p><img src="https://images2.imgbox.com/63/33/rBClirci_o.png" alt="e016a3881f244790b6066a3cf384f8bc.png"></p> 
<p> </p> 
<h3>（三）将数据保存为自己想要的格式</h3> 
<p>这里我们将数据保存在excel中，结果如图所示：</p> 
<p><img src="https://images2.imgbox.com/38/72/fjDTSNLE_o.png" alt="db19a88e5f19474f8345d47806333f82.png"></p> 
<p>以上为本案例所有过程，希望大家批评指正。</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e2bd863251f1892c921397c6d5b15c54/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">时间序列预测之卷积神经网络CNN</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/587cb9eb23565f3fb25c512d137e3d6f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">国内最受欢迎的电商API接口调用京东商品详情数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>