<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用MATLAB实现串联超前校正附带校正失效时的补偿策略 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用MATLAB实现串联超前校正附带校正失效时的补偿策略" />
<meta property="og:description" content="本题的例题为：
题目中给出的是时域指标，在进行频域法校正的时候要将时域指标转换成频域指标，转换的公式是根据，胡寿松第五版《自控原理》第239页高阶系统经验公式来进行的，在matlab中解方程即可：
clc; clear; % 超前校正例题 % 时域指标 rou = 0.275; ts = 1.7; K_gain = 10; % 根据要求： 首先将时域指标转化成频域指标并得出K % r(t)=t,ess&lt;0.1,K=10 % 超调量&lt;=27.5%，根据经验公式计算要求的相位裕度r_star syms r_star equa_0= rou==0.16&#43;0.4*(1/sind(r_star)-1); r_star = solve(equa_0); r_star = vpa(r_star(2),3); % 调整时间ts&lt;=1.7，根据经验公式估算： K0_exp = 2&#43;1.5*(1/sind(r_star)-1)&#43;2.5*(1/sind(r_star)-1)^2; syms omega_c_star equa_1 = (K0_exp)*pi/omega_c_star==ts; omega_c_star = solve(equa_1); omega_c_star = vpa(omega_c_star,3); % 开始实施串联超前校正 num = 10; den = conv([1,0],[conv([1/2,1],[1/30,1])]); G0 = tf(num,den); [Gm,Pm,wcg,wcp] = margin(num,den); margin(G0);hold on % 直接用相位裕度求解fai_m，进而求解倍频比 % 需要设定补偿量delta delta = 13." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/604759c6f7370f1a5da2826e7994b3eb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-07T20:38:57+08:00" />
<meta property="article:modified_time" content="2023-10-07T20:38:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用MATLAB实现串联超前校正附带校正失效时的补偿策略</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>本题的例题为：<br> <img src="https://images2.imgbox.com/76/4f/coYiu6Js_o.png" alt="在这里插入图片描述"></p> 
<p>题目中给出的是时域指标，在进行频域法校正的时候要将时域指标转换成频域指标，转换的公式是根据，胡寿松第五版《自控原理》第239页高阶系统经验公式来进行的，在matlab中解方程即可：<br> <img src="https://images2.imgbox.com/18/f5/xPm3le3j_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-matlab">clc<span class="token punctuation">;</span>
clear<span class="token punctuation">;</span>
<span class="token comment">% 超前校正例题</span>
<span class="token comment">% 时域指标</span>
rou <span class="token operator">=</span> <span class="token number">0.275</span><span class="token punctuation">;</span>
ts <span class="token operator">=</span> <span class="token number">1.7</span><span class="token punctuation">;</span>
K_gain <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token comment">% 根据要求： 首先将时域指标转化成频域指标并得出K</span>
<span class="token comment">% r(t)=t,ess&lt;0.1,K=10</span>
<span class="token comment">% 超调量&lt;=27.5%，根据经验公式计算要求的相位裕度r_star</span>
syms r_star
equa_0<span class="token operator">=</span> rou<span class="token operator">==</span><span class="token number">0.16</span><span class="token operator">+</span><span class="token number">0.4</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token function">sind</span><span class="token punctuation">(</span>r_star<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
r_star <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>equa_0<span class="token punctuation">)</span><span class="token punctuation">;</span>
r_star <span class="token operator">=</span> <span class="token function">vpa</span><span class="token punctuation">(</span><span class="token function">r_star</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% 调整时间ts&lt;=1.7，根据经验公式估算：</span>
K0_exp <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">+</span><span class="token number">1.5</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token function">sind</span><span class="token punctuation">(</span>r_star<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2.5</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token function">sind</span><span class="token punctuation">(</span>r_star<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token punctuation">;</span>
syms omega_c_star
equa_1 <span class="token operator">=</span> <span class="token punctuation">(</span>K0_exp<span class="token punctuation">)</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token operator">/</span>omega_c_star<span class="token operator">==</span>ts<span class="token punctuation">;</span>
omega_c_star <span class="token operator">=</span> <span class="token function">solve</span><span class="token punctuation">(</span>equa_1<span class="token punctuation">)</span><span class="token punctuation">;</span>
omega_c_star <span class="token operator">=</span> <span class="token function">vpa</span><span class="token punctuation">(</span>omega_c_star<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% 开始实施串联超前校正</span>
num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
den <span class="token operator">=</span> <span class="token function">conv</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token function">conv</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
G0 <span class="token operator">=</span> <span class="token function">tf</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>den<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>Gm<span class="token punctuation">,</span>Pm<span class="token punctuation">,</span>wcg<span class="token punctuation">,</span>wcp<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">margin</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>den<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">margin</span><span class="token punctuation">(</span>G0<span class="token punctuation">)</span><span class="token punctuation">;</span>hold on

<span class="token comment">% 直接用相位裕度求解fai_m，进而求解倍频比</span>
<span class="token comment">% 需要设定补偿量delta</span>
delta <span class="token operator">=</span> <span class="token number">13.5</span><span class="token punctuation">;</span>
<span class="token comment">% 计算最大拉起量：</span>
fai_m <span class="token operator">=</span> r_star <span class="token operator">-</span> Pm <span class="token operator">+</span> delta<span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token function">sind</span><span class="token punctuation">(</span><span class="token function">vpa</span><span class="token punctuation">(</span>fai_m<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">-</span><span class="token function">sind</span><span class="token punctuation">(</span><span class="token function">vpa</span><span class="token punctuation">(</span>fai_m<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token function">vpa</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
baselin_10loga <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token operator">*</span><span class="token function">log10</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>Mag<span class="token punctuation">,</span>phase<span class="token punctuation">,</span>w<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">bode</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>den<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%注意要将幅值转换成分贝dB的形式</span>
mag_db <span class="token operator">=</span> <span class="token function">mag2db</span><span class="token punctuation">(</span>Mag<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%模拟作图计算的环节</span>
omega_A <span class="token operator">=</span> <span class="token function">spline</span><span class="token punctuation">(</span>mag_db<span class="token punctuation">,</span>w<span class="token punctuation">,</span><span class="token function">double</span><span class="token punctuation">(</span>baselin_10loga<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
omega_C <span class="token operator">=</span> <span class="token punctuation">(</span>wcp<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>omega_A<span class="token punctuation">)</span><span class="token punctuation">;</span>
omega_D <span class="token operator">=</span> <span class="token punctuation">(</span>omega_A<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>omega_C<span class="token punctuation">)</span><span class="token punctuation">;</span>
num_correct <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">/</span>omega_C<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
den_correct <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">/</span>omega_D<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">%得到校正环节的传函</span>
Gcs <span class="token operator">=</span> <span class="token function">tf</span><span class="token punctuation">(</span>num_correct<span class="token punctuation">,</span>den_correct<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">margin</span><span class="token punctuation">(</span>Gcs<span class="token punctuation">)</span><span class="token punctuation">;</span>hold on
<span class="token comment">% 串联得到校正后的系统传函</span>
G_star <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>G0<span class="token punctuation">,</span>Gcs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%进行验算，是否能满足频域指标</span>
<span class="token punctuation">[</span>Gmf<span class="token punctuation">,</span>Pmf<span class="token punctuation">,</span>Wcgf<span class="token punctuation">,</span>Wcpf<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">margin</span><span class="token punctuation">(</span>G_star<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">margin</span><span class="token punctuation">(</span>G_star<span class="token punctuation">)</span><span class="token punctuation">;</span> hold on
</code></pre> 
<p>这里其实出现了两种校正的补偿的方式，</p> 
<h4><a id="delta_64"></a>增加delta的补偿量</h4> 
<p>上述代码使用的是增加超前相位补偿delta的量，正常应该取值为4~10。但是本例题中使用delta为10 的时候仍然达不到频域指标中的51相位裕度，所以持续增加，不断尝试，在delta取值为13.5时，此时矫正后的相位裕度为<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          P 
         
        
          m 
         
        
          f 
         
        
          = 
         
        
          51.0358 
         
        
       
         Pmf=51.0358 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord mathnormal">m</span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">51.0358</span></span></span></span></span></span><br> 其三个传递函数的bode图像图下图所示：<br> <img src="https://images2.imgbox.com/57/90/T55DAvCg_o.png" alt="在这里插入图片描述"></p> 
<p>得到了相对正确的校正传函，经过simulink的验证，矫正之后的系统是稳定的</p> 
<p><img src="https://images2.imgbox.com/7b/cc/2ZJIRaKd_o.png" alt="在这里插入图片描述"></p> 
<p>矫正之后的系统传函是：</p> 
<p><img src="https://images2.imgbox.com/5b/97/TN4bBhVn_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_83"></a>偷“只因“法（卢老师真传）</h4> 
<p>将校正装置的传递函数中的omega_D逐渐放大，拉长BD线段，在不充分发挥校正装置的情况下逐渐满足频域指标，因此只需要修改omega_D的赋值语句即可，在原有的基础上向右偏移D个单位，然后看bode图，满足相位裕度即可</p> 
<pre><code class="prism language-matlab"><span class="token comment">%模拟作图计算的环节</span>
D <span class="token operator">=</span> <span class="token number">3.9</span><span class="token punctuation">;</span>
<span class="token comment">% 对Omega_D进行向右偏移，偏移量为D</span>
omega_A <span class="token operator">=</span> <span class="token function">spline</span><span class="token punctuation">(</span>mag_db<span class="token punctuation">,</span>w<span class="token punctuation">,</span><span class="token function">double</span><span class="token punctuation">(</span>baselin_10loga<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
omega_C <span class="token operator">=</span> <span class="token punctuation">(</span>wcp<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>omega_A<span class="token punctuation">)</span><span class="token punctuation">;</span>
omega_D <span class="token operator">=</span> <span class="token punctuation">(</span>omega_A<span class="token punctuation">)</span><span class="token operator">^</span><span class="token number">2</span><span class="token operator">/</span><span class="token punctuation">(</span>omega_C<span class="token punctuation">)</span><span class="token operator">+</span>D<span class="token punctuation">;</span>
num_correct <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">/</span>omega_C<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
den_correct <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">/</span>omega_D<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">%得到校正环节的传函</span>
Gcs <span class="token operator">=</span> <span class="token function">tf</span><span class="token punctuation">(</span>num_correct<span class="token punctuation">,</span>den_correct<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% margin(Gcs);hold on</span>
<span class="token comment">% 串联得到校正后的系统传函</span>
G_star <span class="token operator">=</span> <span class="token function">series</span><span class="token punctuation">(</span>G0<span class="token punctuation">,</span>Gcs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">%进行验算，是否能满足频域指标</span>
<span class="token punctuation">[</span>Gmf<span class="token punctuation">,</span>Pmf<span class="token punctuation">,</span>Wcgf<span class="token punctuation">,</span>Wcpf<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">margin</span><span class="token punctuation">(</span>G_star<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">margin</span><span class="token punctuation">(</span>G_star<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/e3/8c/Nq4LjATr_o.png" alt="在这里插入图片描述"></p> 
<p>此时校正后的系统经过simulink的验证仍然是稳定的：</p> 
<p><img src="https://images2.imgbox.com/ed/51/o7Mv7vQ0_o.png" alt="在这里插入图片描述"></p> 
<p>此时校正后的系统传函是：</p> 
<p><img src="https://images2.imgbox.com/69/6f/LsCFC571_o.png" alt="在这里插入图片描述"><br> 两种方式都可以，但是在工程商更倾向于使用第二种投机的方式，因为一般情况下相角补偿量delta的取值范围在4~10，越大的delta其起到的作用更小，呈现边际效应递减的效果。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e5111462a8a9dd3518be5a5c050b237/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python与Conda创建虚拟环境</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/397a82051959ee5d537530909e2c7b2d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人工智障购买双色球（未开奖）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>