<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VNC SERVER 安装 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VNC SERVER 安装" />
<meta property="og:description" content="1. 用root用户身份运行以下命令
yum install tigervnc-server 2. 停用防火墙
systemctl stop firewalld.service systemctl disable firewalld.service 3. run服务
which vncserver 结果：/usr/bin/vncserver
/usr/bin/vncserver 2. 停用防火墙 VNC SERVER 配置： 1. 创建一个新的配置文件，以第一个连接为例（也可以同时开启多个连接，修改数字即可。类似windows的多用户连接），方法如下：
cp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:1.service cp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:2.service 2. 查看以上创建的配置：
ls /lib/systemd/system 3. 编辑配置文件/lib/systemd/system/vncserver@:1.service. 用你需要连接的用户名代替&lt;USER&gt;， 一般建议第一个连接给root用户。
vi /lib/systemd/system/vncserver@:1.service [Unit] Description=Remote desktop service (VNC) After=syslog.target network.target [Service] Type=forking # Clean any existing files in /tmp/.X11-unix environment ExecStartPre=/bin/sh -c &#39;/usr/bin/vncserver -kill %i &gt; /dev/null 2&gt;&amp;1 || :&#39; ExecStart=/sbin/runuser -l root -c &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2694bac1b9027c8b79aa79c1d3622c6d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-11T10:48:39+08:00" />
<meta property="article:modified_time" content="2021-06-11T10:48:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VNC SERVER 安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3> </h3> 
<p>1. 用root用户身份运行以下命令</p> 
<pre><code class="language-html hljs">yum install tigervnc-server</code></pre> 
<p>2. 停用防火墙</p> 
<pre><code class="language-html hljs">systemctl stop firewalld.service
systemctl disable firewalld.service</code></pre> 
<p>3. run服务</p> 
<pre><code class="language-html hljs">which vncserver</code></pre> 
<p>结果：/usr/bin/vncserver</p> 
<p> </p> 
<pre><code class="language-html hljs">/usr/bin/vncserver</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/16/6f/QI3yzwqP_o.png"></p> 
<p> </p> 
<h3>2. 停用防火墙</h3> 
<h3> </h3> 
<h3>VNC SERVER 配置：</h3> 
<p>1. 创建一个新的配置文件，以第一个连接为例（也可以同时开启多个连接，修改数字即可。类似windows的多用户连接），方法如下：</p> 
<pre><code class="language-html hljs">cp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:1.service</code></pre> 
<pre><code class="language-html hljs">cp /lib/systemd/system/vncserver@.service /lib/systemd/system/vncserver@:2.service</code></pre> 
<p>2. 查看以上创建的配置：</p> 
<p> </p> 
<pre><code class="language-html hljs">ls /lib/systemd/system</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/c2/22/Tbl4tRy1_o.png"></p> 
<p> </p> 
<p>3.  编辑配置文件/lib/systemd/system/vncserver@:1.service. 用你需要连接的用户名代替&lt;USER&gt;， 一般建议第一个连接给root用户。</p> 
<pre><code class="language-html hljs">vi /lib/systemd/system/vncserver@:1.service</code></pre> 
<p> </p> 
<p> </p> 
<p><img alt="复制代码" src="https://images2.imgbox.com/18/74/wpb8tXv1_o.png"></p> 
<pre><code class="language-html hljs">[Unit]
Description=Remote desktop service (VNC)
After=syslog.target network.target
[Service]
Type=forking
# Clean any existing files in /tmp/.X11-unix environment
ExecStartPre=/bin/sh -c '/usr/bin/vncserver -kill %i &gt; /dev/null 2&gt;&amp;1 || :'
ExecStart=/sbin/runuser -l root -c "/usr/bin/vncserver %i"
PIDFile=/root/.vnc/%H%i.pid
ExecStop=/bin/sh -c '/usr/bin/vncserver -kill %i &gt; /dev/null 2&gt;&amp;1 || :'</code></pre> 
<p><img alt="复制代码" src="https://images2.imgbox.com/0b/ae/hjSacxXe_o.png"></p> 
<p> </p> 
<h3> 保存更新VNC配置：</h3> 
<p> 1. 保存</p> 
<pre><code class="language-html hljs">systemctl daemon-reload </code></pre> 
<p> </p> 
<p>2. 设置vncserver密码</p> 
<pre><code class="language-html hljs">vncpasswd root</code></pre> 
<p> </p> 
<p>3.启动和关闭 vnc server</p> 
<pre><code class="language-html hljs">systemctl start vncserver@:1.service
systemctl stop vncserver@:1.service</code></pre> 
<p> 4.查看vnc的运行转态</p> 
<p> </p> 
<pre><code class="language-html hljs">systemctl status vncserver@:1.service</code></pre> 
<p> </p> 
<p>5.开机自动开启</p> 
<pre><code class="language-html hljs">systemctl enable vncserver@:1.service</code></pre> 
<p>6. 查看vnc 端口号</p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> </td><td> <p><code>ss -tulpn|grep vnc</code></p> </td></tr></tbody></table> 
<p>　　</p> 
<h3>开启VNC server常遇到的问题：</h3> 
<pre><code class="language-html hljs">Job for vncserver@:1.service failed because the control process exited with error code. See "systemctl status vncserver@:1.service" and "journalctl -xe" for details.
[root@localhost jesse]# vi /lib/systemd/system/vncserver@:2.service</code></pre> 
<p><img alt="" src="https://images2.imgbox.com/6d/7b/EwXXXRzZ_o.png"></p> 
<p> </p> 
<p>修改vncserver@:1.service 中的 Type 改为 simple </p> 
<p> </p> 
<p>再执行</p> 
<pre><code class="language-html hljs">systemctl daemon-reload </code></pre> 
<p> </p> 
<h3>VNC viewer 连接</h3> 
<p>1.下载安装 vnc viewer：</p> 
<p>https://www.realvnc.com/en/connect/download/viewer/</p> 
<p>2. 配置</p> 
<p><img alt="" src="https://images2.imgbox.com/7f/f6/mXKe7nBw_o.png"></p> 
<p>注意： 端口号5901，是第一个连接。默认是590+连接号。可以手动修改端口。</p> 
<p> </p> 
<p> <img alt="" src="https://images2.imgbox.com/05/92/5Od2ggDn_o.png"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5551f1ecd9b58b55bc11d268f703ce63/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">高等数学-线性代数：正交投影和正交分量</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e53e74cc671db2d9953e1aef2c36c2b3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Emerging Properties in Self-Supervised Vision Transformers(2021)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>