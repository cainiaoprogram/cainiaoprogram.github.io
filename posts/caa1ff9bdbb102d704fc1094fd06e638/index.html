<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Redis入门-redis的五大数据类型&#43;三种特殊的数据类型 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Redis入门-redis的五大数据类型&#43;三种特殊的数据类型" />
<meta property="og:description" content="前言：Redis有五大基本类型与三种特殊类型的介绍 Redis有五大基本类型：字符串（string）、哈希（hash）、列表（list）、集合（set）和有序集合（sorted set）。
字符串（string）是Redis最基本的类型，可以存储任意类型的数据，如整数、浮点数、二进制数据等。字符串类型的操作包括设置键值对、获取值、增减值等。
哈希（hash）是一个键值对的集合，类似于关联数组。哈希类型适合存储对象，对象的属性作为键，属性值作为值。哈希类型的操作包括设置键值对、获取值、删除键值对等。
列表（list）是一个链表结构，可以存储有序的字符串元素。列表类型的操作包括向列表中添加元素、获取元素、删除元素等。列表类型也可以实现队列或栈的功能。
集合（set）是一个无序的字符串元素的集合，不允许重复元素。集合类型的操作包括添加元素、获取元素、删除元素等。集合类型还支持交集、并集、差集等操作。
有序集合（sorted set）是一个有序的字符串元素的集合，每个元素都有一个分数，根据分数的大小对元素进行排序。有序集合类型的操作包括添加元素、获取元素、删除元素等。有序集合类型可以用于按分数排序的场景。
除了这五种基本类型，Redis还有三种特殊类型：比特图（bitmap）、超时哈希（hyperloglog）和地理位置（geospatial）。
比特图（bitmap）是一种位操作类型，可以在一个字符串中存储位的序列，支持对位进行操作，如设置位、获取位、统计位等。比特图类型可以实现布隆过滤器、统计在线用户等功能。
超时哈希（hyperloglog）是一种基数估计算法，可以估计一个集合中的不同元素的个数。超时哈希类型的操作包括添加元素、估计基数等。超时哈希类型适用于需要统计去重后的数据量的场景。
地理位置（geospatial）是一种可以存储地理位置信息的类型，支持地理位置的存储、计算距离等操作。地理位置类型可以用于地图相关的应用，如附近的人、附近的商家等。
三、五大数据类型 Redis是一个开源（BSD许可），内存存储的数据结构服务器，可用作数据库，高速缓存和消息队列MQ代理。它支持字符串、哈希表、列表、集合、有序集合，位图，hyperloglogs等数据类型。内置复制、Lua脚本、LRU收回、事务以及不同级别磁盘持久化功能，同时通过Redis Sentinel提供高可用，通过Redis Cluster提供自动分区。
先开启Redis
Redis-key 在redis中无论什么数据类型，在数据库中都是以key-value形式保存，通过进行对Redis-key的操作，来完成对数据库中数据的操作。
下面学习的命令：
exists key：判断键是否存在del key：删除键值对move key db：将键值对移动到指定数据库expire key second：设置键值对的过期时间type key：查看value的数据类型 127.0.0.1:6379&gt; keys * # 查看当前数据库所有key (empty list or set) 127.0.0.1:6379&gt; set name qinjiang # set key OK 127.0.0.1:6379&gt; set age 20 OK 127.0.0.1:6379&gt; keys * 1) &#34;age&#34; 2) &#34;name&#34; 127.0.0.1:6379&gt; move age 1 # 将键值对移动到指定数据库 (integer) 1 127.0.0.1:6379&gt; EXISTS age # 判断键是否存在 (integer) 0 # 不存在 127." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/caa1ff9bdbb102d704fc1094fd06e638/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T01:26:32+08:00" />
<meta property="article:modified_time" content="2024-01-10T01:26:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Redis入门-redis的五大数据类型&#43;三种特殊的数据类型</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="Redis_2"></a>前言：Redis有五大基本类型与三种特殊类型的介绍</h3> 
<p>Redis有<strong>五大基本类型</strong>：<code>字符串（string）</code>、<code>哈希（hash）</code>、<code>列表（list）</code>、<code>集合（set）</code>和<code>有序集合（sorted set）</code>。</p> 
<ol><li> <p><strong>字符串（string）是Redis最基本的类型，可以存储任意类型的数据</strong>，如整数、浮点数、二进制数据等。字符串类型的操作包括设置键值对、获取值、增减值等。</p> </li><li> <p><strong>哈希（hash）是一个键值对的集合，类似于关联数组</strong>。哈希类型适合存储对象，对象的属性作为键，属性值作为值。哈希类型的操作包括设置键值对、获取值、删除键值对等。</p> </li><li> <p><strong>列表（list）是一个链表结构，可以存储有序的字符串元素</strong>。列表类型的操作包括向列表中添加元素、获取元素、删除元素等。列表类型也可以实现队列或栈的功能。</p> </li><li> <p><strong>集合（set）是一个无序的字符串元素的集合，不允许重复元素</strong>。集合类型的操作包括添加元素、获取元素、删除元素等。集合类型还支持交集、并集、差集等操作。</p> </li><li> <p><strong>有序集合（sorted set）是一个有序的字符串元素的集合，每个元素都有一个分数，根据分数的大小对元素进行排序</strong>。有序集合类型的操作包括添加元素、获取元素、删除元素等。有序集合类型可以用于按分数排序的场景。</p> </li></ol> 
<p>除了这五种基本类型，Redis还有<strong>三种特殊类型</strong>：<code>比特图（bitmap）</code>、<code>超时哈希（hyperloglog）</code>和<code>地理位置（geospatial）</code>。</p> 
<ol><li> <p><strong>比特图（bitmap）是一种位操作类型，可以在一个字符串中存储位的序列，支持对位进行操作</strong>，如设置位、获取位、统计位等。比特图类型可以实现布隆过滤器、统计在线用户等功能。</p> </li><li> <p><strong>超时哈希（hyperloglog）是一种基数估计算法，可以估计一个集合中的不同元素的个数</strong>。超时哈希类型的操作包括添加元素、估计基数等。超时哈希类型适用于需要统计去重后的数据量的场景。</p> </li><li> <p><strong>地理位置（geospatial）是一种可以存储地理位置信息的类型，支持地理位置的存储、计算距离等操作</strong>。地理位置类型可以用于地图相关的应用，如附近的人、附近的商家等。</p> </li></ol> 
<h3><a id="_23"></a>三、五大数据类型</h3> 
<p>Redis是一个开源（BSD许可），内存存储的数据结构服务器，可用作<strong>数据库</strong>，<strong>高速缓存</strong>和<strong>消息队列MQ</strong>代理。它支持<code>字符串、哈希表、列表、集合、有序集合，位图，hyperloglogs</code>等数据类型。内置复制、<strong>Lua脚本</strong>、LRU收回、<strong>事务</strong>以及不同级别磁盘持久化功能，同时通过<strong>Redis Sentinel提供高可用</strong>，通过<strong>Redis Cluster提供自动分区</strong>。</p> 
<p><strong>先开启Redis</strong></p> 
<p><img src="https://images2.imgbox.com/26/84/yJx92mmM_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Rediskey_30"></a>Redis-key</h4> 
<blockquote> 
 <p>在redis中无论什么数据类型，<strong>在数据库中都是以key-value形式保存</strong>，<strong>通过进行对Redis-key的操作，来完成对数据库中数据的操作</strong>。</p> 
</blockquote> 
<p>下面学习的命令：</p> 
<ul><li><code>exists key</code>：判断键是否存在</li><li><code>del key</code>：删除键值对</li><li><code>move key db</code>：将键值对移动到指定数据库</li><li><code>expire key second</code>：设置键值对的过期时间</li><li><code>type key</code>：查看value的数据类型</li></ul> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys * <span class="token comment"># 查看当前数据库所有key</span>
<span class="token punctuation">(</span>empty list or <span class="token builtin class-name">set</span><span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> name qinjiang <span class="token comment"># set key</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">20</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"age"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"name"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> move age <span class="token number">1</span> <span class="token comment"># 将键值对移动到指定数据库</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS age <span class="token comment"># 判断键是否存在</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span> <span class="token comment"># 不存在</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXISTS name
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> <span class="token comment"># 存在</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SELECT <span class="token number">1</span>
OK
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"age"</span>
<span class="token number">127.0</span>.0.1:6379<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> del age <span class="token comment"># 删除键值对</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> <span class="token comment"># 删除个数</span>


<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> age <span class="token number">20</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> EXPIRE age <span class="token number">15</span> <span class="token comment"># 设置键值对的过期时间</span>

<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> <span class="token comment"># 设置成功 开始计数</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl age <span class="token comment"># 查看key的过期剩余时间</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">13</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl age
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">11</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl age
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">9</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl age
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token parameter variable">-2</span> <span class="token comment"># -2 表示key过期，-1表示key未设置过期时间</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get age <span class="token comment"># 过期的key 会被自动delete</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"name"</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">type</span> name <span class="token comment"># 查看value的数据类型</span>
string
</code></pre> 
<p><strong>关于TTL命令</strong></p> 
<p>Redis的key，通过TTL命令返回key的过期时间，一般来说有3种：</p> 
<ul><li>当前key没有设置过期时间，所以会返回-1.</li><li>当前key有设置过期时间，而且key已经过期，所以会返回-2.</li><li>当前key有设置过期时间，且key还没有过期，故会返回key的正常剩余时间.</li></ul> 
<p><strong>关于重命名RENAME和RENAMENX</strong></p> 
<ul><li>RENAME key newkey修改 key 的名称</li><li>RENAMENX key newkey仅当 newkey 不存在时，将 key 改名为 newkey 。</li></ul> 
<p><strong>更多命令学习：https://www.redis.net.cn/order/</strong></p> 
<p><img src="https://images2.imgbox.com/a9/a9/AoMBCqdO_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="String_115"></a>String(字符串)</h4> 
<ul><li>追加字符串APPEND key value</li><li>获取字符串的长度STRLEN</li><li>自增/自减运算 INCR/DECR</li><li>自增/自减指定的值 INCRBY/DECRBY</li><li>获取某个范围GETRANGE的字符串</li><li>替换某个范围的字符串SETRANGE</li><li>设置过期时间SETEX</li><li>不存在的时候才设置SETNX</li><li>批量设置/获取值MSET,MSETNX/MGET</li><li>获取当前的值的同时设置一个新值GETSET</li></ul> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 v1   <span class="token comment"># 设置值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1      <span class="token comment"># 获得值</span>
<span class="token string">"v1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *      <span class="token comment"># 获取所有的key</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"k1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists k1   <span class="token comment"># 判断某个key是否存在</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append k1 hello <span class="token comment"># 追加字符串，如果当前的key不存在，就相当于set</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">"v1hello"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen k1       <span class="token comment"># 获取字符串的长度</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> append k1 xiaofan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">14</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> strlen k1
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">14</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">"v1helloxiaofan"</span>
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> views <span class="token number">0</span>     <span class="token comment"># 初始浏览量为0</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">"0"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views      <span class="token comment"># 自增1，浏览量增加1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incr views
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">"2"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decr views      <span class="token comment"># 自减1， 浏览量减1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decr views
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get views
<span class="token string">"0"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby views <span class="token number">10</span> <span class="token comment"># 可以设置步长，指定增量</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> incrby views <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">20</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> decrby views <span class="token number">5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">15</span>
<span class="token comment">######################################################################</span>
<span class="token comment"># 字符串范围 range</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 hello,kuangshen      <span class="token comment"># 设置k1的值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">"hello,kuangshen"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getrange k1 <span class="token number">0</span> <span class="token number">3</span>             <span class="token comment"># 截取字符串[0,3]</span>
<span class="token string">"hell"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getrange k1 <span class="token number">0</span> <span class="token parameter variable">-1</span>            <span class="token comment"># 获取全部的字符串</span>
<span class="token string">"hello,kuangshen"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> <span class="token builtin class-name">set</span> k1 abcdefg
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">"abcdefg"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setrange k1 <span class="token number">1</span> xx            <span class="token comment"># 替换指定位置开始的字符串</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k1
<span class="token string">"axxdefg"</span>
<span class="token comment">######################################################################</span>
<span class="token comment"># setex （set with expire） 设置过期时间</span>
<span class="token comment"># setnx (set if not exist) 不存在再设置(分布式锁会经常用到)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setex k3 <span class="token number">30</span> hello
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl k3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">27</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k3
<span class="token string">"hello"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey redis   <span class="token comment"># 如果mykey不存在，创建mykey</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"mykey"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"k3"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ttl k3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setnx mykey mongodb <span class="token comment"># mykey存在创建失败</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get mykey
<span class="token string">"redis"</span>
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mset k1 v1 k2 v2 k3 v3  <span class="token comment"># 同时设置多个值</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> keys *
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"k3"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"k2"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"k1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> mget k1 k2 k3   <span class="token comment"># 同时获取多个值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"v1"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"v2"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"v3"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> msetnx k1 v1 k4 v4  <span class="token comment"># msetnx是一个原子操作，要么一起成功，要么一起失败</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get k4
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/c5/53/KX0koYbn_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token comment"># getset    # 先get然后set</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset db redis     <span class="token comment"># 如果不存在值，则返回nil</span>
<span class="token punctuation">(</span>nil<span class="token punctuation">)</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">"redis"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getset db mongodb     <span class="token comment"># 如果存在值，则返回原来的值，并设置新的值</span>
<span class="token string">"redis"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> get db
<span class="token string">"mongodb"</span>
</code></pre> 
<p>String类似的使用场景：value除了是字符串还可以是数字，用途举例：</p> 
<ul><li>计数器</li><li>统计多单位的数量：uid:123666：follow 0</li><li>粉丝数</li><li>对象存储缓存</li></ul> 
<h4><a id="List_259"></a>List类型(列表)</h4> 
<p><strong>所有的List命令都是以l开头的，在redis里面我们可以把List玩成，栈、队列、阻塞队列！</strong></p> 
<ul><li>List当中插入一个元素LPUSH/RPUSH</li><li>List当中获取指定元素LRANGE</li><li>移出List集合中的一个元素LPOP/RPOP</li><li>移出List集合中指定的元素LREM</li><li>根据索引（下标）获取集合中元素值LINDEX</li><li>获取List的长度LLEN</li><li>ltrim裁剪List为原来的一部分（直接修改原有List集合）</li><li>移出列表的最后一个元素，并移动到新的列表中RPOPLPUSH</li><li>将列表中指定的下标值替换为另一个值，更新操作，如果下标不存在就会报错</li><li>在list集合中的指定元素前面插入值linsert lst before world xiaofan</li></ul> 
<p><img src="https://images2.imgbox.com/ff/fa/Sz8v6unn_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list one  <span class="token comment"># 将一个值或者多个值，插入到列表头部（左）</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list two
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>    <span class="token comment"># 获取list中的值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"one"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token number">1</span>     <span class="token comment"># 通过区间获取具体的值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush list four <span class="token comment"># 将一个值或者多个值，插入到列表尾部（右）</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"one"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"four"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpop list       <span class="token comment"># 移出list的第一个元素（左）</span>
<span class="token string">"three"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpop list       <span class="token comment"># 移出list的最后一个元素（右）</span>
<span class="token string">"four"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"one"</span>
 
<span class="token comment">######################################################################</span>
<span class="token comment"># lindex 根据下标获取元素</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lindex list <span class="token number">0</span>
<span class="token string">"two"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lindex list <span class="token number">1</span>
<span class="token string">"one"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> llen list   <span class="token comment"># 获取长度</span>
<span class="token comment">######################################################################</span>
<span class="token comment"># 移出指定的值！</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list one two three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"one"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrem list <span class="token number">1</span> one     <span class="token comment"># 移除list集合中指定个数的value，精确匹配</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrem list <span class="token number">2</span> three
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token comment">######################################################################</span>
<span class="token comment"># 截断</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>        
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"d"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ltrim list <span class="token number">1</span> <span class="token number">2</span>  <span class="token comment"># 通过下标截取指定的长度，这个list已经改变了，截断了，只剩下截取的元素</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
 
<span class="token comment">######################################################################</span>
<span class="token comment"># rpoplpush 移除列表的最后一个元素，将他移动到新的列表当中</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpush list1 a b c d
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list1 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"d"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpoplpush list1 list2   <span class="token comment"># 移除列表的最后一个元素，将他移动到新的列表中！</span>
<span class="token string">"d"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> rpoplpush list1 list2
<span class="token string">"c"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list1 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list2 <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"d"</span>
<span class="token comment">######################################################################</span>
<span class="token comment"># lset 更新list当中存在的元素</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> exists list
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset list <span class="token number">0</span> item
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR no such key
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lpush list a 
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset list <span class="token number">0</span> item    <span class="token comment"># 如果存在当前下标值，则更新</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"item"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lset list <span class="token number">1</span> value   <span class="token comment"># 如果不存在当前下标值，则报错</span>
<span class="token punctuation">(</span>error<span class="token punctuation">)</span> ERR index out of range
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> linsert list before b xxx
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">6</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xxx"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"d"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> linsert list after b yyy
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">7</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> lrange list <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xxx"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"yyy"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"d"</span>
<span class="token number">7</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
</code></pre> 
<h4><a id="set_404"></a>set(无序集合)</h4> 
<ul><li>集合中添加元素sadd myset hello kuangshen lovekuangshen</li><li>查看集合中的元素SMEMBERS</li><li>判断某个元素是否存在于集合中SISMEMBER myset hello</li><li>获取集合中元素个数SCARD</li><li>移出集合中指定的元素值SREM</li><li>随机获取Set集合中的值SRANDMEMBER</li><li>随机删除集合中的一个元素SPOP</li><li>移动指定的元素到另一个集合当中去SMOVE</li><li>差集/交集/并集SDIFF/SINTER/SUNION</li></ul> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset LBJ        <span class="token comment"># set集合中添加值 </span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset KD
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset CURRY
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset      <span class="token comment"># 遍历set集合   </span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"lovexiaofan"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaofan"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"hello"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sismember myset xiaofan <span class="token comment"># 判断某个值是不是在集合中 </span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sismember myset xf
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> scard myset <span class="token comment"># 获取set集合中元素的个数</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srem myset hello    <span class="token comment"># 删除set中的指定的元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"lovexiaofan"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaofan"</span>
<span class="token comment">######################################################################</span>
<span class="token comment"># set是无序集合，随机抽取元素</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset  
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wenfeiyang"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"lovexiaofan"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"xiaofan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">1</span>     <span class="token comment"># 随机抽取一个元素</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wenfeiyang"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wenfeiyang"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"lovexiaofan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> srandmember myset <span class="token number">1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xiaofan"</span>
<span class="token comment">#####################################################################随机删除一些set集合中的值</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wenfeiyang"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"lovexiaofan"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"xiaofan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> spop myset <span class="token number">1</span>    <span class="token comment"># 随机删除一些set集合中的值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"lovexiaofan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> spop myset
<span class="token string">"xiaofan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wenfeiyang"</span>
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset a b c
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> sadd myset1 xiaofan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"xiaofan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smove myset myset1 a    <span class="token comment"># 把指定元素从一个set集合移动到另一个set集合</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset1
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"xiaofan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
</code></pre> 
<pre><code class="prism language-shell">---------------SADD--SCARD--SMEMBERS--SISMEMBER--------------------

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SADD myset m1 m2 m3 m4 <span class="token comment"># 向myset中增加成员 m1~m4</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SCARD myset <span class="token comment"># 获取集合的成员数目</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> smembers myset <span class="token comment"># 获取集合中所有成员</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m3"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"m2"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"m1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SISMEMBER myset m5 <span class="token comment"># 查询m5是否是myset的成员</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span> <span class="token comment"># 不是，返回0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SISMEMBER myset m2
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span> <span class="token comment"># 是，返回1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SISMEMBER myset m3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>

---------------------SRANDMEMBER--SPOP----------------------------------

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SRANDMEMBER myset <span class="token number">3</span> <span class="token comment"># 随机返回3个成员</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m2"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m3"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SRANDMEMBER myset <span class="token comment"># 随机返回1个成员</span>
<span class="token string">"m3"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SPOP myset <span class="token number">2</span> <span class="token comment"># 随机移除并返回2个成员</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m1"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token comment"># 将set还原到{m1,m2,m3,m4}</span>

---------------------SMOVE--SREM----------------------------------------

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMOVE myset newset m3 <span class="token comment"># 将myset中m3成员移动到newset集合</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS myset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m2"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"m1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS newset
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m3"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SREM newset m3 <span class="token comment"># 从newset中移除m3元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SMEMBERS newset
<span class="token punctuation">(</span>empty list or <span class="token builtin class-name">set</span><span class="token punctuation">)</span>

<span class="token comment"># 下面开始是多集合操作,多集合操作中若只有一个参数默认和自身进行运算</span>
<span class="token comment"># setx=&gt;{m1,m2,m4,m6}, sety=&gt;{m2,m5,m6}, setz=&gt;{m1,m3,m6}</span>

-----------------------------SDIFF 不同的地方------------------------------------

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SDIFF setx sety setz <span class="token comment"># 等价于setx-sety-setz</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SDIFF setx sety <span class="token comment"># setx - sety</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SDIFF sety setx <span class="token comment"># sety - setx</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m5"</span>


-------------------------SINTER---------------------------------------
<span class="token comment"># 共同关注（交集）</span>

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SINTER setx sety setz <span class="token comment"># 求 setx、sety、setx的交集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m6"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SINTER setx sety <span class="token comment"># 求setx sety的交集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m2"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m6"</span>

-------------------------SUNION---------------------------------------

<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SUNION setx sety setz <span class="token comment"># setx sety setz的并集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m6"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"m3"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"m2"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"m1"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"m5"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> SUNION setx sety <span class="token comment"># setx sety 并集</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"m4"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"m6"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"m2"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"m1"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"m5"</span>

</code></pre> 
<h4><a id="Hash_583"></a>Hash集合</h4> 
<p><img src="https://images2.imgbox.com/25/3e/7m4y3Evs_o.png" alt="在这里插入图片描述"></p> 
<ul><li>设置一个具体的字段值hset myhash field2 value2</li><li>设置多个个具体的字段值hmset myhash field2 value2 field3 value3</li><li>获取多个指定的字段值hmget myhash field1 field2</li><li>获取全部的值hgetall myhash</li><li>删除hash指定的键HDEL myhash field1</li><li>获取键值对的个数HLEN判断hash中指定字段是否存在HEXISTS</li><li>获取所有的key、valueHKEYS/HVALS</li></ul> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash field1 kuangshen    <span class="token comment"># set一个具体的值key-value</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hget myhash field1              <span class="token comment"># 获取一个字段值</span>
<span class="token string">"kuangshen"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmset myhash field1 hello field2 world  <span class="token comment"># 设置多个key-value</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hmget myhash field1 field2      <span class="token comment"># 获取多个字段值</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"hello"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"world"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash                  <span class="token comment"># 获取全部数据</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"field1"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"hello"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"field2"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"world"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hdel myhash field1              <span class="token comment"># 删除某个指定的key字段，对应的value值也就消失了</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"field2"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"world"</span>
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash field1 hello field2 world
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"field2"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"world"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"field1"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"hello"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hlen myhash <span class="token comment"># 获取hash表键值对的数量</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hexists myhash field1       <span class="token comment"># 判断指定hash中的字段是否存在</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hexists myhash field3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
 
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hkeys myhash    <span class="token comment"># 获取所有的key</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"field2"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"field1"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hvals myhash    <span class="token comment"># 获取所有的value</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"world"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"hello"</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hset myhash field3 <span class="token number">10</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hincrby myhash field3 <span class="token number">2</span>     <span class="token comment"># 增量运算</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">12</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hgetall myhash
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"field2"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"world"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"field1"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"hello"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"field3"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"12"</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash field4 value4     <span class="token comment"># 如果不存在设置成功</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> hsetnx myhash field4 abc        <span class="token comment"># 如果存在则设置失败</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
 
<span class="token comment">######################################################################</span>
</code></pre> 
<h4><a id="Zset_664"></a>Zset有序集合</h4> 
<ul><li>添加元素zadd myset 1 one 2 two 3 three</li><li>获取所有元素zrange myset 0 -1</li><li>排序ZREVRANGEBYSCORE key max min WITHSCORES LIMIT offset count</li><li>升序/降序zrange myzset 0 -1/ZREVRANGE myzset 0 -1</li><li>获取指定区间的元素个数zcount myzset 1 4</li></ul> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd myset <span class="token number">1</span> one <span class="token number">2</span> two <span class="token number">3</span> three      <span class="token comment"># 添加值</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange myset <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"one"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"two"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"three"</span>
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd salary <span class="token number">2500</span> a <span class="token number">5000</span> b <span class="token number">500</span> c
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> <span class="token parameter variable">-1</span>      <span class="token comment"># 显示全部用户，从小到大</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrangebyscore salary <span class="token parameter variable">-inf</span> +inf      <span class="token comment"># zrangebyscore 从小到大</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrangebyscore salary +inf <span class="token parameter variable">-inf</span>   <span class="token comment"># zrevrangebyscore 从大到小</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrevrangebyscore salary +inf <span class="token parameter variable">-inf</span> withscores    <span class="token comment"># 显示全部用户并且附带成绩</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"5000"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"a"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"2500"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"500"</span>
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrem salary a       <span class="token comment"># 移出某个元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zrange salary <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"c"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"b"</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcard salary    <span class="token comment"># 有序集合中的个数</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
 
<span class="token comment">######################################################################</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zadd myset <span class="token number">1</span> hello <span class="token number">2</span> world <span class="token number">3</span> xiaofan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount myset <span class="token number">1</span> <span class="token number">3</span>    <span class="token comment"># 获取指定区间之间的成员数量</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">3</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount myset <span class="token number">1</span> <span class="token number">2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">2</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> zcount myset <span class="token number">1</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre> 
<h3><a id="_724"></a>四、三种特殊的数据类型</h3> 
<h4><a id="geospatial__726"></a>geospatial 地理位置</h4> 
<ul><li> <p>获取经纬度的测试数据：http://www.jsons.cn/lngcode/</p> </li><li> <p>官方文档：[geoadd - <a href="https://www.php.cn/manual/view/36388.html" rel="nofollow"> Redis中文开发手册 ] - 在线原生手册 - php中文网</a></p> </li></ul> 
<p><strong>1、geoadd 添加地理位置</strong></p> 
<pre><code class="prism language-shell"><span class="token comment"># 注意</span>
<span class="token comment"># 1. 经纬度</span>
<span class="token comment"># 2. 官方文档</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">116.405285</span> <span class="token number">39.904989</span> beijing
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">121.472644</span> <span class="token number">31.231706</span> shanghai
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">106.504962</span> <span class="token number">29.533155</span> chongqing
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">120.153576</span> <span class="token number">30.287459</span> hangzhou
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">125.14904</span> <span class="token number">42.927</span> xian
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geoadd china:city <span class="token number">112.549248</span> <span class="token number">37.857014</span> taiyuan
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
</code></pre> 
<p><strong>2、geopos 获取指定城市的经纬度</strong></p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geopos china:city taiyuan
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"112.54924803972244263"</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"37.85701483724372451"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geopos china:city beijing
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"116.40528291463851929"</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"39.9049884229125027"</span>
</code></pre> 
<p><strong>3、geodist 获取两个位置之间的距离</strong></p> 
<pre><code class="prism language-shell">m 为米。
km 为千米。
mi 为英里。
ft 为英尺。
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geodist china:city beijing taiyuan km
<span class="token string">"404.1120"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geodist china:city beijing shanghai
<span class="token string">"1067597.9668"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geodist china:city beijing shanghai km
<span class="token string">"1067.5980"</span>
</code></pre> 
<p><strong>4、GEORADIUS具体指定位置多少范围内的所有城市</strong></p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUS china:city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"chongqing"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"hangzhou"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"taiyuan"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUS china:city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">500</span> km
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"chongqing"</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUS china:city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km withcoord
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"chongqing"</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"106.50495976209640503"</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"29.53315530684997015"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"hangzhou"</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"120.15357345342636108"</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"30.28745790721532671"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"taiyuan"</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"112.54924803972244263"</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"37.85701483724372451"</span>
      
<span class="token comment"># 获取指定的个数，最近的count</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUS china:city <span class="token number">110</span> <span class="token number">30</span> <span class="token number">1000</span> km withcoord count <span class="token number">2</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"chongqing"</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"106.50495976209640503"</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"29.53315530684997015"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"taiyuan"</span>
   <span class="token number">2</span><span class="token punctuation">)</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"112.54924803972244263"</span>
      <span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"37.85701483724372451"</span>
</code></pre> 
<p><strong>5、GEORADIUSBYMEMBER 找出位于指定元素周围的其他元素</strong></p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> GEORADIUSBYMEMBER china:city beijing <span class="token number">1000</span> km 
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"taiyuan"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"beijing"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"xian"</span>
</code></pre> 
<p><strong>6、geohash 命令，返回一个或者多个位置元素的geohash表示</strong></p> 
<p>geohash 命令，返回一个或者多个位置元素的geohash表示</p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> geohash china:city beijing chongqing
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"wx4g0b7xrt0"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"wm78p86e170"</span>
</code></pre> 
<p><strong>7、 GEO 底层的实现原理其实就是Zset！我们可以使用Zset命令来操作geo！</strong></p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZRANGE china:city <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"chongqing"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"hangzhou"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"shanghai"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"taiyuan"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"beijing"</span>
<span class="token number">6</span><span class="token punctuation">)</span> <span class="token string">"xian"</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZREM china:city xian
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> ZRANGE china:city <span class="token number">0</span> <span class="token parameter variable">-1</span>
<span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">"chongqing"</span>
<span class="token number">2</span><span class="token punctuation">)</span> <span class="token string">"hangzhou"</span>
<span class="token number">3</span><span class="token punctuation">)</span> <span class="token string">"shanghai"</span>
<span class="token number">4</span><span class="token punctuation">)</span> <span class="token string">"taiyuan"</span>
<span class="token number">5</span><span class="token punctuation">)</span> <span class="token string">"beijing"</span>
</code></pre> 
<h4><a id="Hyperloglog__870"></a>Hyperloglog 基数统计</h4> 
<p><img src="https://images2.imgbox.com/82/f4/zFBkAdy7_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFADD mykey a b c d e f g h i j     <span class="token comment"># 创建第一组元素 mykey</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFCOUNT mykey   <span class="token comment"># 统计第一组元素的个数，会移除相同元素</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">10</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFADD mykey2 i j z x c <span class="token function">v</span> b n m      <span class="token comment"># 创建第二组元素 mykey2</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFCOUNT mykey2  <span class="token comment"># 统计第二组元素的个数</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">9</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFMERGE mykey3 mykey mykey2     <span class="token comment"># 合并第一组元素和第二组元素，去掉一个相同的元素</span>
OK
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> PFCOUNT mykey3
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">15</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/cf/8b/RdGpfkNw_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Bitmaps_897"></a>Bitmaps</h4> 
<p><img src="https://images2.imgbox.com/a6/a9/NUwTIuFk_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-shell"><span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">0</span> <span class="token number">0</span>     <span class="token comment"># 设置数据</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">1</span> <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">2</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">3</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">4</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">5</span> <span class="token number">0</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> setbit sign <span class="token number">6</span> <span class="token number">1</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit sign <span class="token number">6</span>   <span class="token comment"># 获取指定数据</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">1</span>
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> getbit sign <span class="token number">5</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">0</span>
 
<span class="token number">127.0</span>.0.1:637<span class="token operator"><span class="token file-descriptor important">9</span>&gt;</span> bitcount sign   <span class="token comment"># 统计1的个数</span>
<span class="token punctuation">(</span>integer<span class="token punctuation">)</span> <span class="token number">4</span>
</code></pre> 
<p><strong>Redis入门-redis的五大数据类型+三种特殊的数据类型 到此完结，笔者归纳、创作不易，大佬们给个3连再起飞吧</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/209578735b5e9d886817b78527dcb35d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言中关于函数递归的理解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/514405d7a5efb1fd6994d9e1236792a3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Leetcode 1367. Linked List in Binary Tree (二叉树好题)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>