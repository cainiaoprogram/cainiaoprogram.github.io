<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python 爬虫进阶必备 | 某电影站视频采集加密参数逻辑分析 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python 爬虫进阶必备 | 某电影站视频采集加密参数逻辑分析" />
<meta property="og:description" content="点击上方“咸鱼学Python”，选择“加为星标”
第一时间关注Python技术干货！
今日网站 aHR0cHM6Ly96MS5tMTkwNy5jbi8/ang9JUU1JTkzJTg4JUU1JTg4JUE5JUMyJUI3JUU2JUIzJUEyJUU3JTg5JUI5JUU0JUI4JThFJUU1JUFGJTg2JUU1JUFFJUE0
加密定位与分析 分析的网站是一个电影播放站，有良心的是竟然没有多少广告，
这个请求返回的内容里包含了m3u8的链接，m3u8大家应该都知道是啥吧，我们获取到之后就可以解析出视频了。
所以我们需要的就是构造出这个请求链接，以及下面的几个参数
直接通过Initiator调用栈分析
最后一个请求点击进去，可以看到
这不就是要分析的请求接口嘛
我们要分析的是z、s1ig、g
如上图基本就囊括了全部的参数逻辑
接下来一个一个看下
第一个是z，上面一整串的逗号表达式
c = new Date l = c.getTime() u = 6e4 * c.getTimezoneOffset() d = l &#43; u &#43; 36e5 * 8 m = new Date(d) p = (p = m).getDate() &#43; 9 &#43; 9 ^ 10 p = (p = Et()(String(p))).substring(0, 10) p = Et()(p) 看了下都和时间戳有关，取完时间戳之后经过了Et方法然后得出了p的值
打上断点追进去，可以看到如下逻辑
先是Et方法
这里的d、f、p都是独立的方法，扣一下就可以了，得出结果之后又经过了m方法
以上方法的出结果之后取前 10 位，然后再传入Et方法得出最后z的值
s1ig的值是f
c = new Date l = c." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3f841f4b1621347394eb86db17982d99/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-19T19:08:00+08:00" />
<meta property="article:modified_time" content="2021-08-19T19:08:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python 爬虫进阶必备 | 某电影站视频采集加密参数逻辑分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align: center">点击上方“咸鱼学Python”，选择“加为星标”</p> 
 <p style="text-align: center">第一时间关注Python技术干货！</p> 
 <h3>今日网站</h3> 
 <p>aHR0cHM6Ly96MS5tMTkwNy5jbi8/ang9JUU1JTkzJTg4JUU1JTg4JUE5JUMyJUI3JUU2JUIzJUEyJUU3JTg5JUI5JUU0JUI4JThFJUU1JUFGJTg2JUU1JUFFJUE0</p> 
 <h5>加密定位与分析</h5> 
 <p>分析的网站是一个电影播放站，有良心的是竟然没有多少广告，</p> 
 <img src="https://images2.imgbox.com/ee/31/gwmHhhRq_o.png"> 
 <p>这个请求返回的内容里包含了<code>m3u8</code>的链接，<code>m3u8</code>大家应该都知道是啥吧，我们获取到之后就可以解析出视频了。</p> 
 <p>所以我们需要的就是构造出这个请求链接，以及下面的几个参数</p> 
 <img src="https://images2.imgbox.com/f1/9b/97lH1mcR_o.png"> 
 <p>直接通过<code>Initiator</code>调用栈分析</p> 
 <img src="https://images2.imgbox.com/d0/12/JsCpZ3CU_o.png"> 
 <p>最后一个请求点击进去，可以看到</p> 
 <img src="https://images2.imgbox.com/35/db/QYWbpNrA_o.png"> 
 <p>这不就是要分析的请求接口嘛</p> 
 <p>我们要分析的是<code>z</code>、<code>s1ig</code>、<code>g</code></p> 
 <img src="https://images2.imgbox.com/8f/ff/8dDOQEOn_o.png"> 
 <p>如上图基本就囊括了全部的参数逻辑</p> 
 <p>接下来一个一个看下</p> 
 <p>第一个是<code>z</code>，上面一整串的逗号表达式</p> 
 <pre class="has"><code class="language-go">c = new Date
l = c.getTime()
u = 6e4 * c.getTimezoneOffset()
d = l + u + 36e5 * 8
m = new Date(d)
p = (p = m).getDate() + 9 + 9 ^ 10
p = (p = Et()(String(p))).substring(0, 10)
p = Et()(p)
</code></pre> 
 <p>看了下都和时间戳有关，取完时间戳之后经过了<code>Et</code>方法然后得出了<code>p</code>的值</p> 
 <p>打上断点追进去，可以看到如下逻辑</p> 
 <p>先是<code>Et</code>方法</p> 
 <img src="https://images2.imgbox.com/bc/6b/XbBJR8pw_o.png"> 
 <img src="https://images2.imgbox.com/53/96/NIretrCA_o.png"> 
 <p>这里的<code>d</code>、<code>f</code>、<code>p</code>都是独立的方法，扣一下就可以了，得出结果之后又经过了<code>m</code>方法</p> 
 <p>以上方法的出结果之后取前 10 位，然后再传入<code>Et</code>方法得出最后<code>z</code>的值</p> 
 <p><code>s1ig</code>的值是<code>f</code></p> 
 <pre class="has"><code class="language-go">c = new Date
l = c.getTime()
u = 6e4 * c.getTimezoneOffset()
d = l + u + 36e5 * 8
m = new Date(d)
f = m.getDay() + 11397
</code></pre> 
 <p>这个完全就是时间戳的操作，之后的<code>g</code>的逻辑取是<code>fe.getAll</code>的结果并用<code>,</code>拼接</p> 
 <img src="https://images2.imgbox.com/c4/80/Uu5MI2sf_o.png"> 
 <p>现在所有的逻辑都分析清楚了，直接开整</p> 
 <p>先是<code>z</code>的逻辑</p> 
 <img src="https://images2.imgbox.com/04/53/xZ7bmOWH_o.png"> 
 <p>其实不扣也可以，就是个<code>md5</code></p> 
 <p>然后直接在<code>Python</code>里面开搞，请求就完事了</p> 
 <img src="https://images2.imgbox.com/b8/05/M48fRxs8_o.png"> 
 <br> 
 <strong><img src="https://images2.imgbox.com/03/65/H8qPb7eE_o.png">对了，看完记得一键四连，这个对我真的很重要。</strong> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/89987af3fb655e6c1c50d8faf05aa934/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">pip 安装模块时报错：ImportError: cannot import name ‘InvalidSchemeCombination‘ ......</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6e4f67f77b500606ebb72e4c3178d6e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">（5）机器学习_K折交叉验证(iris数据集实例)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>