<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>构建YOCTO项目详细教程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="构建YOCTO项目详细教程" />
<meta property="og:description" content="系统要求 最少 4-8 GB 内存磁盘剩余空间至少 60-80 GB CentOS 7.6 或者其他支持Linux发行版
安装软件依赖（ CentOS-7）：
sudo yum install -y epel-release sudo yum makecache sudo yum install gawk make wget tar bzip2 gzip python3 unzip perl patch diffutils diffstat git cpp gcc gcc-c&#43;&#43; glibc-devel texinfo chrpath socat perl-Data-Dumper perl-Text-ParseWords perl-Thread-Queue python36-pip xz which SDL-devel xterm mesa-libGL-devel zstd lz4 -y sudo pip3 install GitPython jinja2 如果要构建Yocto项目文档手册，所需的包:
sudo yum install make python3-pip which -y sudo pip3 install sphinx sphinx_rtd_theme pyyaml 为了使用构建系统，主机开发系统必须满足Git、tar和Python的以下版本要求：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/03185afc2c385d719a58dd716b210934/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-21T19:00:49+08:00" />
<meta property="article:modified_time" content="2022-02-21T19:00:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">构建YOCTO项目详细教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>系统要求</h2> 
<ul><li>最少 4-8 GB 内存</li><li>磁盘剩余空间至少 60-80 GB</li><li> <p>CentOS 7.6 或者其他支持Linux发行版</p> </li></ul> 
<p> 安装软件依赖（ CentOS-7）：</p> 
<pre><code>sudo yum install -y epel-release
sudo yum makecache
sudo yum install gawk make wget tar bzip2 gzip python3 unzip perl patch diffutils diffstat git cpp gcc gcc-c++ glibc-devel texinfo chrpath socat perl-Data-Dumper perl-Text-ParseWords perl-Thread-Queue python36-pip xz which SDL-devel xterm mesa-libGL-devel zstd lz4 -y
sudo pip3 install GitPython jinja2</code></pre> 
<p>如果要构建Yocto项目文档手册，所需的包:</p> 
<pre><code>sudo yum install make python3-pip which -y
sudo pip3 install sphinx sphinx_rtd_theme pyyaml</code></pre> 
<p>为了使用构建系统，主机开发系统必须满足<strong>Git</strong>、<strong>tar</strong>和<strong>Python</strong>的以下版本要求：</p> 
<ul><li> <p>Git 1.8.3.1 or greater</p> </li><li> <p>tar 1.28 or greater</p> </li><li> <p>Python 3.6.0 or greater</p> </li><li> <p>gcc 5.0 or greater</p> </li></ul> 
<p> 拉取poky代码</p> 
<pre><code>git clone git://git.yoctoproject.org/poky</code></pre> 
<p>进入poky目录，选择一个发行代码名(如<code>honister</code>)，对应于最新的稳定版本或长期支持版本。</p> 
<pre><code>cd poky
git branch -a

git checkout -t origin/honister -b my-honister
</code></pre> 
<p><strong>初始化构建环境</strong></p> 
<p>        进入 <code>poky</code> 目录，然后运行下面的命令为 Yocto 开发环境设置（设置/导出）一些环境变量。</p> 
<pre><code>source oe-init-build-env</code></pre> 
<p>        如下所示，在运行了 open embedded (oe) 的构建环境脚本之后，终端里的路径会自动切换到 <code>build</code> 目录，以便进行之后行发行版的的配置和构建。</p> 
<p><img alt="" height="406" src="https://images2.imgbox.com/e2/dc/UFsGpjHP_o.png" width="939"></p> 
<p><strong>检查本地配置文件</strong></p> 
<p><strong>        </strong>设置生成环境时，在conf目录下存在一个local.conf文件，这是 Yocto 用来设置目标机器细节和 SDK 的目标架构的配置文件。后续会详细讲解这个文件的作用。</p> 
<p><strong>启动构建</strong></p> 
<p><strong>        </strong>现在运行下面的 <code>bitbake</code> 工具命令开始为选定的目标机器下载和编译软件包。</p> 
<p>        需要再普通用户下执行，不能在root用户下执行，否则会报错</p> 
<pre><code>bitbake core-image-sato</code></pre> 
<p><img alt="" height="593" src="https://images2.imgbox.com/c6/07/cAJCm7GI_o.png" width="1200"></p> 
<p>        在下载了 SDK 和必要的库之后，下一步工作是下载并编译软件包。如下截图展示了为构建新发行版而执行的任务。这一步将会执行 2-3 小时，因为首先要下载需要的软件包，然后还要为新的 Linux 发行版编译这些软件包。</p> 
<p><strong>启动构建</strong></p> 
<pre><code>runqemu qemux86-64</code></pre> 
<p>一旦构建了这个特定映像，就可以启动QEMU，QEMU是Yocto项目附带的一个快速仿真器。</p> 
<p>我本机磁盘空间太小了，最后没有执行完命令，磁盘就满了，后续的验证请自己参考验证。</p> 
<p>参考：</p> 
<p><a href="https://docs.yoctoproject.org/ref-manual/system-requirements.html#required-git-tar-python-and-gcc-versions" rel="nofollow" title="1 System Requirements — The Yocto Project ® dev documentation">1 System Requirements — The Yocto Project ® dev documentation</a></p> 
<p><a href="https://docs.yoctoproject.org/brief-yoctoprojectqs/index.html" rel="nofollow" title="Yocto Project Quick Build — The Yocto Project ® dev documentation">Yocto Project Quick Build — The Yocto Project ® dev documentation</a></p> 
<p><a href="https://linux.cn/article-8268-1.html?amputm_medium=rss" rel="nofollow" title="技术|如何在 Ubuntu 上用 Yocto 创建你自己的嵌入式 Linux 发行版">技术|如何在 Ubuntu 上用 Yocto 创建你自己的嵌入式 Linux 发行版</a></p> 
<h2><span style="color:#fe2c24;">FAQ:</span></h2> 
<p><span style="color:#0d0016;">1. </span><span style="color:#fe2c24;">FATAL: The knotty ui could not load the required curses python module.</span></p> 
<p>        解决方法参考：<a class="has-card" href="https://blog.csdn.net/hhs_1996/article/details/121315421" title="FATAL: The knotty ui could not load the required curses python module._大帅的博客-CSDN博客"><span class="link-card-box"><span class="link-title">FATAL: The knotty ui could not load the required curses python module._大帅的博客-CSDN博客</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/ef/99/18T7nx03_o.png">https://blog.csdn.net/hhs_1996/article/details/121315421</span></span></a></p> 
<p>2. <span style="color:#fe2c24;">ERROR: Unable to connect to bitbake server, or start one (server startup failures would be in bitbake-cookerdaemon.log). </span></p> 
<p><img alt="" height="656" src="https://images2.imgbox.com/95/2a/bSHJBc0R_o.png" width="1200"></p> 
<p>解决方法： 删除bitbake.lock文件</p> 
<pre><code>rm -rf ./bitbake.lock</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0b3103e03a749f68649b584d6c0422ef/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于FPGA的MobileNet V2卷积神经网络加速器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/984406388207441f9b1e0bed9d859118/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">1.《剑指Java面试-Offer直通车》--计算机网络</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>