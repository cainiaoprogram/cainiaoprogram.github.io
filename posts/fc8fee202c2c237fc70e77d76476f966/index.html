<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ROS 2官方文档（基于humble版本）学习笔记（三） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ROS 2官方文档（基于humble版本）学习笔记（三）" />
<meta property="og:description" content="ROS 2官方文档（基于humble版本）学习笔记（三） 理解参数（parameter）ros2 param listros2 param getros2 param setros2 param dumpros2 param load在节点启动时加载参数文件 理解动作（action）ros2 node inforos2 action listros2 action list -tros2 action inforos2 interface showros2 actiong send_goal 使用rqt_console查看日志设置默认日志级别 启动节点记录和回放数据记录多个话题ros2 bag inforos2 bag play 今天继续总结CLI 工具章的学习
理解参数（parameter） 参数是一个节点的配置值，可以把参数看成是节点的配置。节点可以存储整型，浮点型，布尔型，字符串型，列表型的参数。每个节点维护自己的参数。
ros2 param list 此命令用于显示所有节点的参数。
每个节点都有use_sim_time
ros2 param get 此命令用于显示一个参数的类型和当前值。
ros2 param get &lt;node_name&gt; &lt;parameter_name&gt; ros2 param set 此命令在运行时改变参数的值。
ros2 param set &lt;node_name&gt; &lt;parameter_name&gt; &lt;value&gt; ros2 param dump 此命令查看所有节点的参数值。
ros2 param dump &lt;node_name&gt; 默认打印到标准输出，可以将参数值打印到文件中，比如：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fc8fee202c2c237fc70e77d76476f966/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-24T22:33:41+08:00" />
<meta property="article:modified_time" content="2023-09-24T22:33:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ROS 2官方文档（基于humble版本）学习笔记（三）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ROS 2官方文档（基于humble版本）学习笔记（三）</h4> 
 <ul><li><ul><li><ul><li><a href="#parameter_4" rel="nofollow">理解参数（parameter）</a></li><li><ul><li><a href="#ros2_param_list_6" rel="nofollow">ros2 param list</a></li><li><a href="#ros2_param_get_10" rel="nofollow">ros2 param get</a></li><li><a href="#ros2_param_set_16" rel="nofollow">ros2 param set</a></li><li><a href="#ros2_param_dump_22" rel="nofollow">ros2 param dump</a></li><li><a href="#ros2_param_load_33" rel="nofollow">ros2 param load</a></li><li><a href="#_40" rel="nofollow">在节点启动时加载参数文件</a></li></ul> 
    </li><li><a href="#action_46" rel="nofollow">理解动作（action）</a></li><li><ul><li><a href="#ros2_node_info_49" rel="nofollow">ros2 node info</a></li><li><a href="#ros2_action_list_55" rel="nofollow">ros2 action list</a></li><li><a href="#ros2_action_list_t_57" rel="nofollow">ros2 action list -t</a></li><li><a href="#ros2_action_info_60" rel="nofollow">ros2 action info</a></li><li><a href="#ros2_interface_show_63" rel="nofollow">ros2 interface show</a></li><li><a href="#ros2_actiong_send_goal_67" rel="nofollow">ros2 actiong send_goal</a></li></ul> 
    </li><li><a href="#rqt_console_80" rel="nofollow">使用rqt_console查看日志</a></li><li><ul><li><a href="#_98" rel="nofollow">设置默认日志级别</a></li></ul> 
    </li><li><a href="#_103" rel="nofollow">启动节点</a></li><li><a href="#_111" rel="nofollow">记录和回放数据</a></li><li><ul><li><a href="#_119" rel="nofollow">记录多个话题</a></li><li><a href="#ros2_bag_info_126" rel="nofollow">ros2 bag info</a></li><li><a href="#ros2_bag_play_129" rel="nofollow">ros2 bag play</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p>今天继续总结CLI 工具章的学习</p> 
<h4><a id="parameter_4"></a>理解参数（parameter）</h4> 
<p>参数是一个节点的配置值，可以把参数看成是节点的配置。节点可以存储整型，浮点型，布尔型，字符串型，列表型的参数。每个节点维护自己的参数。</p> 
<h5><a id="ros2_param_list_6"></a>ros2 param list</h5> 
<p>此命令用于显示所有节点的参数。<br> <img src="https://images2.imgbox.com/5a/ca/RfaHm6DE_o.png" alt="在这里插入图片描述"><br> 每个节点都有<code>use_sim_time</code></p> 
<h5><a id="ros2_param_get_10"></a>ros2 param get</h5> 
<p>此命令用于显示一个参数的类型和当前值。</p> 
<pre><code class="prism language-bash">ros2 param get <span class="token operator">&lt;</span>node_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>parameter_name<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="ros2_param_set_16"></a>ros2 param set</h5> 
<p>此命令在运行时改变参数的值。</p> 
<pre><code class="prism language-bash">ros2 param <span class="token builtin class-name">set</span> <span class="token operator">&lt;</span>node_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>parameter_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="ros2_param_dump_22"></a>ros2 param dump</h5> 
<p>此命令查看所有节点的参数值。</p> 
<pre><code class="prism language-bash">ros2 param dump <span class="token operator">&lt;</span>node_name<span class="token operator">&gt;</span>
</code></pre> 
<p>默认打印到标准输出，可以将参数值打印到文件中，比如：</p> 
<pre><code class="prism language-bash">ros2 param dump /turtlesim <span class="token operator">&gt;</span> turtlesim.yaml
</code></pre> 
<h5><a id="ros2_param_load_33"></a>ros2 param load</h5> 
<p>此命令可以把保存在文件中的参数加载到正在运行的节点中。</p> 
<pre><code class="prism language-bash">ros2 param load <span class="token operator">&lt;</span>node_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>parameter_file<span class="token operator">&gt;</span>
</code></pre> 
<p>注意：只读参数只能在启动时修改，所以执行此命令时只读参数会打印失败信息。</p> 
<h5><a id="_40"></a>在节点启动时加载参数文件</h5> 
<pre><code class="prism language-bash">ros2 run <span class="token operator">&lt;</span>package_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>executable_name<span class="token operator">&gt;</span> --ros-args --params-file <span class="token operator">&lt;</span>file_name<span class="token operator">&gt;</span>
</code></pre> 
<p>注意：在启动时加载参数文件所有参数包括只读参数都将被更新。</p> 
<h4><a id="action_46"></a>理解动作（action）</h4> 
<p>动作是ROS 2一种通信类型，用于长时间运行的任务。它包含三部分：一个目标，反馈，一个结果。动作是基于话题和服务构建的。动作的功能除了可以取消外，和服务很类似。与服务返回一个单一的回应不同，动作也提供持续的反馈。动作使用客户端-服务器模式，一个“动作客户”节点发送一个目标给一个“动作服务”节点，“动作服务”确认这个目标并且返回一个反馈流和一个结果。<br> <img src="https://images2.imgbox.com/7d/b7/bG0uDi1d_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ros2_node_info_49"></a>ros2 node info</h5> 
<p>此命令用来查看一个节点提供的动作列表。<br> <img src="https://images2.imgbox.com/53/47/lGr7fNTg_o.png" alt="在这里插入图片描述"><br> 注意：/turtlesim节点的<code>/turtle1/rotate_absolute</code>动作是在Action Servers下面的，这意味着/turtlesim为/turtle1/rotate_absolute动作，响应和提供反馈。<br> <img src="https://images2.imgbox.com/10/99/KnfKO3pN_o.png" alt="在这里插入图片描述"><br> 注意：/teleop_turtle节点的<code>/turtle1/rotate_absolute</code>动作是在Action Clients下面的，这意味着他将为这个动作发送目标。</p> 
<h5><a id="ros2_action_list_55"></a>ros2 action list</h5> 
<p>此命令发现ROS图中所有的动作。</p> 
<h5><a id="ros2_action_list_t_57"></a>ros2 action list -t</h5> 
<p>此命令可以将类型也显示出来。如下：<br> <img src="https://images2.imgbox.com/cb/3f/5BR5Bi2a_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ros2_action_info_60"></a>ros2 action info</h5> 
<p>此命令可以获取动作的相关信息。<br> <img src="https://images2.imgbox.com/97/bd/LRq4M6g4_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ros2_interface_show_63"></a>ros2 interface show</h5> 
<p>在发送或者执行动作目标之前，你需要的另一个信息是动作类型的具体结构。参数为<code>ros2 action list -t</code>输出的类型。<br> <img src="https://images2.imgbox.com/df/b6/wuvSvvZJ_o.png" alt="在这里插入图片描述"><br> 第一个—上面是目标的结构（数据类型和名字），第二个—上面是结果的结构，最后是反馈的结构。</p> 
<h5><a id="ros2_actiong_send_goal_67"></a>ros2 actiong send_goal</h5> 
<p>此命令可以发送一个动作目标。</p> 
<pre><code class="prism language-bash">ros2 action send_goal <span class="token operator">&lt;</span>action_name<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>action_type<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>values<span class="token operator">&gt;</span>
</code></pre> 
<p><code>&lt;values&gt;</code>需要使用YAML格式。<br> <img src="https://images2.imgbox.com/47/58/Kq1HSr76_o.png" alt="在这里插入图片描述"><br> 所有的目标都有一个唯一的ID，会在返回的消息里显示。也会显示出结果。可以在后面加上<code>--feedback</code>参数查看反馈信息。<br> <img src="https://images2.imgbox.com/41/17/ZGxEsOif_o.png" alt="在这里插入图片描述"><br> 你将会持续接收到反馈，指导目标完成。</p> 
<p>一个机器人系统可能使用动作用于导航。动作目标可以告诉机器人前往位置。当机器人导航到该位置时，它可以沿途发送更新（即反馈），然后一旦到达目的地，就可以发送最终结果消息。</p> 
<h4><a id="rqt_console_80"></a>使用rqt_console查看日志</h4> 
<p>rqt_console是ROS 2中用于自查日志消息的可视化工具。通常日志消息在终端打印。使用rqt_console，您可以随着时间的推移收集这些消息，以更有条理的方式查看它们，过滤，保存它们，甚至将保存的文件重新加载到不同的时间内。<br> 节点以各种方式输出日志关于事件和状态的消息。对用户而言，通常是蕴含信息的。<br> ROS 2日志级别按严重程度顺序排列如下：</p> 
<pre><code class="prism language-bash">Fatal
Error
Warn
Info
Debug
</code></pre> 
<p>Fatal消息表示系统将要终止以保护自己不受伤害。<br> Error消息表示不是必然会损害系统的重大错误，但会组织系统正常运行。<br> Warn消息表示意外的活动或非理想结果，可能代表更深层次的问题，但不会彻底损坏功能。<br> Info消息表示事件或状态更新，可以看到系统正在稳定运行。<br> Debug消息详细说明系统执行的整个逐步过程。<br> 默认日志级别是Info，您只会看到默认严重程度级别和更高级别级别的消息。</p> 
<h5><a id="_98"></a>设置默认日志级别</h5> 
<p>通过–ros-args --log-level参数设置执行的日志级别。</p> 
<pre><code class="prism language-bash">ros2 run turtlesim turtlesim_node --ros-args --log-level WARN
</code></pre> 
<h4><a id="_103"></a>启动节点</h4> 
<p>使用命令行工具一次启动多个节点。<br> 启动文件允许你同时启动和配置多个包含ROS 2节点的可执行程序。</p> 
<pre><code class="prism language-bash">ros2 launch 
</code></pre> 
<p><img src="https://images2.imgbox.com/ac/76/VJsXW73n_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_111"></a>记录和回放数据</h4> 
<p><code>ros2 bag</code> 是一个命令行工具，用于记录系统中发布的话题数据。它累积了通过的任何数量的话题数据，并将其保存在数据库中。然后，您可以重播数据以重现测试和实验的结果。录制话题也是分享您的作品并允许其他人重新创建它的好方法。</p> 
<pre><code class="prism language-bash">ros2 bag record <span class="token operator">&lt;</span>topic_name<span class="token operator">&gt;</span>
</code></pre> 
<p>此命令会在运行命令的当前目录下创建 rosbag文件。<br> <img src="https://images2.imgbox.com/83/63/1m66zYEq_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_119"></a>记录多个话题</h5> 
<pre><code class="prism language-bash">ros2 bag record <span class="token parameter variable">-o</span> subset /turtle1/cmd_vel /turtle1/pose
</code></pre> 
<p>-o选项用来定义一个独特名字的bag文件，然后在后面以空格隔开每一个话题。<br> -a选项用来记录系统里的所有话题。</p> 
<h5><a id="ros2_bag_info_126"></a>ros2 bag info</h5> 
<p>此命令用于查看记录文件的详情。<br> <img src="https://images2.imgbox.com/c0/dc/bhkJ088W_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ros2_bag_play_129"></a>ros2 bag play</h5> 
<p>此命令用来播放记录文件。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9cacef9fd8d836dd50909e747d8e9b68/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Git 分支简介-创建-合并-解决冲突-删除</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f71dfb22ebff3d3e15c9d51730257830/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python知识点（六）自定义函数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>