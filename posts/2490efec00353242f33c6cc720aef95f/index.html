<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>机器人力控入门——牛顿欧拉法动力学建模 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="机器人力控入门——牛顿欧拉法动力学建模" />
<meta property="og:description" content=" 建立机器人的动力学模型是完成力控的基础，常用的动力学模型建模法有拉格朗日法和牛顿-欧拉法，其中牛顿-欧拉采用递推形式，计算更为简便，使用也更为广泛。本文就来介绍下牛顿-欧拉的动力学建模方法，
PS，网上关于动力学建模的参考资料很多，看了一圈还是感觉《机器人学导论 Craig》写的最清楚，建议刚学习的时候还是看这种经典的书籍。下面的公式和图也都是来自《机器人学导论》，后续看书学习的时候也不会陌生。
我的知乎原文：机器人力控入门——牛顿欧拉法动力学建模 - 知乎
外推
理解牛顿-欧拉法建模有两个要点，其中一个是搞清楚连杆之间的速度/加速度传递关系（建立起 和以及 和的关系），这是后面求解连杆间力/力矩的基础。
首先明确一下定义：和
这两个变量分别是连杆的线速度和角速度在坐标系上表示，如图 1所示，
只有在同一个坐标系中，速度才能加减，也就是说，对于角速度和线速度：
看一下公式（1），坐标系 i&#43;1原点处的角速度除了自身的角速度，还包含上一个坐标系 原点处角速度的叠加。这里 表示关节角速度是沿着z轴方向的
公式（2）：坐标系 i&#43;1原点处的线速度除了上一个坐标系 原点处的线速度，还包括由于坐标系 旋转带来的线速度。
这两个公式理解没有问题的话，下面的肯定也都能看懂。
对公式(1)和(2)求导，可得：
这个公式中可能会对这个部分有疑问：
可以参考：旋转矩阵的导数（机器人学）_旋转矩阵求导_cuntou0906的博客-CSDN博客 或者以旋转矩阵的导数为关键词自行搜索。
同理，对原点处的线速度做平移，得到连杆 i质心处 的线速度，因为质心坐标系和连杆坐标系姿态相同，因此： 对(3)和(4)做坐标变换（乘以一个旋转矩阵），可以得到如下加速度传递关系:
内推
理解牛顿-欧拉法建模的另一个要点是要搞清楚连杆之间力/力矩的传递关系
同样的，先明确下力和力矩的定义，
如图 2所示， 表示由连杆 i-1作用在连杆 i上的力， 表示由连杆 i-1作用在连杆 i上的力矩。
连杆运动所需的力是关于加速度及其质量的函数，计算出每个连杆质心处的线加速度和角加速度之后，运用牛顿-欧拉公式，计算出作用在连杆质心 上的惯性力 和力矩 ，由牛顿方程可得：
由欧拉方程可得： 是连杆 的转动惯量，分析作用在连杆 上的力平衡关系： 从内推和外推的公式中可以看出动力学模型中有一些变量时恒定不变的，如 ，这些参数被称为机器人的动力学参数，而后续在机器人平台上实现力控的下一个关键步骤就是要把这些变量辨识出来，这样就可以准确算出伺服系统要提供多大的转矩，从而实现机械臂（连杆）的运动控制。
如果把所有公式都带入到（13）式中展开，把它表示成 的函数，那么就有了拉格朗日形式的动力学方程：
细心的朋友可能会发现这里面没有包含摩擦力矩，在上面牛顿-欧拉递推的过程中，确实是忽略了摩擦的，这可能是因为摩擦力本身模型不确定，单独加到关节上会更加简洁些。在辨识的时候会把摩擦力加上，或者单独辨识摩擦力。拉格朗日形式的动力学方程也会加上摩擦力矩，变成这样的形式
最后再贴一个学习资料sympybotics GitHub - cdsousa/SymPyBotics: [UNMAINTAINED] Symbolic Framework for Modeling and Identification of Robot Dynamics，这是一个用python的开源机器人运动学和动力学的符号推导工具包，可以去里面读读代码，看看人家是怎么实现的，这对理解机器人动力学会有很大帮助。（PS,这个工具包也是后面做辨识必不可少的，可以先阅读了解下） " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2490efec00353242f33c6cc720aef95f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-23T22:03:48+08:00" />
<meta property="article:modified_time" content="2023-08-23T22:03:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">机器人力控入门——牛顿欧拉法动力学建模</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>建立机器人的动力学模型是完成力控的基础，常用的动力学模型建模法有<strong>拉格朗日法和牛顿-欧拉法</strong>，其中牛顿-欧拉采用递推形式，计算更为简便，使用也更为广泛。本文就来介绍下牛顿-欧拉的动力学建模方法，</p> 
<p>PS，网上关于动力学建模的参考资料很多，<strong>看了一圈还是感觉《机器人学导论 Craig》写的最清楚，建议刚学习的时候还是看这种经典的书籍</strong>。下面的公式和图也都是来自《机器人学导论》，后续看书学习的时候也不会陌生。</p> 
<p>我的知乎原文：<a href="https://zhuanlan.zhihu.com/p/650396199" rel="nofollow" title="机器人力控入门——牛顿欧拉法动力学建模 - 知乎">机器人力控入门——牛顿欧拉法动力学建模 - 知乎</a></p> 
<hr> 
<p><strong>外推</strong></p> 
<p>理解牛顿-欧拉法建模有两个要点，其中一个是搞清楚<strong>连杆之间的速度/加速度传递关系</strong>（建立起 <img alt="^{i+1}v_{i+1}" class="mathcode" src="https://images2.imgbox.com/a9/05/Z8AzUJF2_o.png">和<img alt="^iv_i" class="mathcode" src="https://images2.imgbox.com/52/da/rUSggPVR_o.png">以及 <img alt="^{i+1}\omega_{i+1}" class="mathcode" src="https://images2.imgbox.com/90/86/T1rMvP8l_o.png">和<img alt="^i\omega_i" class="mathcode" src="https://images2.imgbox.com/76/a1/xCEJpCMe_o.png">的关系），这是后面求解连杆间力/力矩的基础。</p> 
<p><strong>首先明确一下定义</strong>：<img alt="^iv_i" class="mathcode" src="https://images2.imgbox.com/1e/e9/BLNlqaIa_o.png">和<img alt="^i\omega_i" class="mathcode" src="https://images2.imgbox.com/db/49/f9Jn5XWV_o.png"></p> 
<p>这两个变量分别是连杆<img alt="i" class="mathcode" src="https://images2.imgbox.com/88/75/rVYIf2Nz_o.png">的线速度和角速度在坐标系<img alt="i" class="mathcode" src="https://images2.imgbox.com/c7/fa/E7bMgjtz_o.png">上表示，如图 1所示，</p> 
<p></p> 
<p class="img-center"><img alt="" height="405" src="https://images2.imgbox.com/ec/d3/t0FzhuKN_o.png" width="720"></p> 
<p> <strong>只有在同一个坐标系中，速度才能加减，</strong>也就是说<strong>，</strong>对于角速度<img alt="^{i}\omega_{i+1}" class="mathcode" src="https://images2.imgbox.com/b6/28/nSHdP02w_o.png">和线速度<img alt="^{i}v_{i+1}" class="mathcode" src="https://images2.imgbox.com/bc/c9/KTGMTod6_o.png">：</p> 
<p></p> 
<p class="img-center"><img alt="" height="151" src="https://images2.imgbox.com/fb/0f/jwDRygjK_o.png" width="1200"></p> 
<p>看一下公式（1），<strong>坐标系 i+1原点处的角速度除了自身的角速度，还包含上一个坐标系 原点处角速度的叠加。</strong>这里<img alt="" height="20" src="https://images2.imgbox.com/d7/ad/LmOgtLn5_o.png" width="102">  表示关节角速度是沿着z轴方向的</p> 
<p><strong>公式（2）：坐标系 i+1原点处的线速度除了上一个坐标系 原点处的线速度，还包括由于坐标系 旋转带来的线速度。</strong></p> 
<p>这两个公式理解没有问题的话，下面的肯定也都能看懂。</p> 
<p>对公式(1)和(2)求导，可得：</p> 
<p></p> 
<p class="img-center"><img alt="" height="275" src="https://images2.imgbox.com/c1/63/RW8oue0B_o.png" width="1200"></p> 
<p> 这个公式中可能会对这个部分有疑问：</p> 
<p><img alt="" height="96" src="https://images2.imgbox.com/fa/28/k3G5LjmX_o.png" width="1200"></p> 
<p>可以参考：<a href="https://link.zhihu.com/?target=https%3A//blog.csdn.net/weixin_44231148/article/details/121159042%3Fydreferer%3DaHR0cHM6Ly9jbi5iaW5nLmNvbS8%253D" rel="nofollow" title="旋转矩阵的导数（机器人学）_旋转矩阵求导_cuntou0906的博客-CSDN博客">旋转矩阵的导数（机器人学）_旋转矩阵求导_cuntou0906的博客-CSDN博客</a> 或者以旋转矩阵的导数为关键词自行搜索。</p> 
<p>同理，对原点处的线速度做平移，得到连杆 i质心处 <img alt="C_i" class="mathcode" src="https://images2.imgbox.com/46/4b/Y6gRYcCF_o.png">的线速度，因为质心坐标系和连杆坐标系姿态相同，因此： </p> 
<p class="img-center"><img alt="" height="86" src="https://images2.imgbox.com/ba/ee/wjN2Unwb_o.png" width="1200"></p> 
<p>对(3)和(4)做坐标变换（乘以一个旋转矩阵），可以得到如下加速度传递关系:</p> 
<p></p> 
<p class="img-center"><img alt="" height="143" src="https://images2.imgbox.com/c0/f5/T5A29NHj_o.png" width="1200"></p> 
<p></p> 
<hr> 
<p><strong>内推</strong></p> 
<p>理解牛顿-欧拉法建模的另一个要点是要搞清楚<strong>连杆之间力/力矩的传递关系</strong></p> 
<p>同样的，先明确下力和力矩的定义，</p> 
<p>如图 2所示， <img alt="f_i" class="mathcode" src="https://images2.imgbox.com/3b/43/sVZIg5zL_o.png">表示由连杆  i-1作用在连杆  i上的力，<img alt="n_i" class="mathcode" src="https://images2.imgbox.com/ae/69/6ePTzOOv_o.png"> 表示由连杆  i-1作用在连杆  i上的力矩。</p> 
<p></p> 
<p class="img-center"><img alt="" height="619" src="https://images2.imgbox.com/36/8e/eTpFH4do_o.png" width="950"></p> 
<p> 连杆运动所需的力是关于加速度及其质量的函数，<strong>计算出每个连杆质心处的线加速度和角加速度之后，运用牛顿-欧拉公式，计算出作用在连杆质心  <img alt="C_i" class="mathcode" src="https://images2.imgbox.com/a1/b5/yCg7SzDc_o.png">上的惯性力 <img alt="^iF_i" class="mathcode" src="https://images2.imgbox.com/04/cb/lysJMScS_o.png">和力矩<img alt="^iN_i" class="mathcode" src="https://images2.imgbox.com/32/fe/MSnjHdaC_o.png"> </strong> ，由牛顿方程可得：<img alt="" height="100" src="https://images2.imgbox.com/00/4c/GYgMk6A4_o.png" width="1200"></p> 
<p>由欧拉方程可得： </p> 
<p><img alt="" height="110" src="https://images2.imgbox.com/9b/88/DyhTknRK_o.png" width="1200"></p> 
<p> <img alt="^{C_i}I" class="mathcode" src="https://images2.imgbox.com/fd/a9/023UCjEW_o.png">是连杆 的转动惯量，分析作用在连杆 上的力平衡关系： </p> 
<p></p> 
<p class="img-center"><img alt="" height="148" src="https://images2.imgbox.com/d9/0a/nlLUDywZ_o.png" width="1200"></p> 
<p></p> 
<p><img alt="" height="874" src="https://images2.imgbox.com/7f/ab/No0yI847_o.png" width="1200"></p> 
<p></p> 
<p class="img-center"><img alt="" height="387" src="https://images2.imgbox.com/e3/a9/pyw0GrhL_o.png" width="720"></p> 
<p></p> 
<p>从内推和外推的公式中可以看出动力学模型中有一些变量时恒定不变的，如  <img alt="" height="30" src="https://images2.imgbox.com/33/1b/JHLuKbaN_o.png" width="113">，<strong>这些参数被称为机器人的动力学参数，</strong>而后续在机器人平台上实现力控的下一个关键步骤就是要把这些变量辨识出来，这样就可以准确算出伺服系统要提供多大的转矩，从而实现机械臂（连杆）的运动控制。</p> 
<p>如果把所有公式都带入到（13）式中展开，把它表示成  <img alt="" height="25" src="https://images2.imgbox.com/3d/72/M4DEVMRN_o.png" width="66">的函数，那么就有了<strong>拉格朗日形式的动力学方程：</strong></p> 
<p><img alt="" height="114" src="https://images2.imgbox.com/4f/e1/MVrZQf2x_o.png" width="1200"></p> 
<p>细心的朋友可能会发现这里面没有包含摩擦力矩，在上面牛顿-欧拉递推的过程中，确实是忽略了摩擦的，这可能是因为摩擦力本身模型不确定，单独加到关节上会更加简洁些。在辨识的时候会把摩擦力加上，或者单独辨识摩擦力。拉格朗日形式的动力学方程也会加上摩擦力矩，变成这样的形式<img alt="" height="90" src="https://images2.imgbox.com/a1/4a/erDg120M_o.png" width="1200"></p> 
<p>最后再贴一个学习资料sympybotics <a href="https://link.zhihu.com/?target=https%3A//github.com/cdsousa/SymPyBotics" rel="nofollow" title="GitHub - cdsousa/SymPyBotics: [UNMAINTAINED] Symbolic Framework for Modeling and Identification of Robot Dynamics">GitHub - cdsousa/SymPyBotics: [UNMAINTAINED] Symbolic Framework for Modeling and Identification of Robot Dynamics</a>，这是一个用python的开源机器人运动学和动力学的符号推导工具包，可以去里面读读代码，看看人家是怎么实现的，这对理解机器人动力学会有很大帮助。（PS,这个工具包也是后面做辨识必不可少的，可以先阅读了解下） </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/10a93224c7e51ae7cdf0dee6733346f4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redis中的序列化器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/086d8ab57641dac1842ce5921857d181/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Redis 序列化器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>