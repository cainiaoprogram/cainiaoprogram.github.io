<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ES6 JS 关于字符串和数组之间的转换 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ES6 JS 关于字符串和数组之间的转换" />
<meta property="og:description" content="ES6 JS 关于字符串和数组之间的转换 // ArrayBuffer转16进度字符串示例 function ab2hex(buffer) { var hexArr = Array.prototype.map.call( new Uint8Array(buffer), function(bit) { return (&#39;00&#39; &#43; bit.toString(16)).slice(-2) } ) return hexArr.join(&#39;&#39;); } // 16进制字符串转ArrayBuffer function hex2ab(value) { var typedArray = new Uint8Array(value.match(/[\da-f]{2}/gi).map(function(h) { return parseInt(h, 16) })) var buffer = typedArray.buffer; var bufLen = buffer.byteLength; if (Math.floor(bufLen % 20) != 0) { var fillBuffer = new Uint8Array(Math.ceil(bufLen / 20) * 20); fillBuffer.set(typedArray); buffer = fillBuffer.buffer; } return buffer; } /** * 字符串转16进制(只支持16进制的字符串) */ function strToHexCharCode(str) {　if (str === &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b31540c38904e81a9d4251ca939f63dc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-28T16:01:12+08:00" />
<meta property="article:modified_time" content="2018-06-28T16:01:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ES6 JS 关于字符串和数组之间的转换</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2 id="es6-js-关于字符串和数组之间的转换">ES6 JS 关于字符串和数组之间的转换</h2> 
<pre class="prettyprint"><code class=" hljs php"><span class="hljs-comment">// ArrayBuffer转16进度字符串示例</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ab2hex</span><span class="hljs-params">(buffer)</span> {<!-- --></span>
  <span class="hljs-keyword">var</span> hexArr = <span class="hljs-keyword">Array</span>.prototype.map.call(
    <span class="hljs-keyword">new</span> Uint8Array(buffer),
    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(bit)</span> {<!-- --></span>
      <span class="hljs-keyword">return</span> (<span class="hljs-string">'00'</span> + bit.toString(<span class="hljs-number">16</span>)).slice(-<span class="hljs-number">2</span>)
    }
  )
  <span class="hljs-keyword">return</span> hexArr.join(<span class="hljs-string">''</span>);
}

<span class="hljs-comment">// 16进制字符串转ArrayBuffer</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hex2ab</span><span class="hljs-params">(value)</span> {<!-- --></span>
  <span class="hljs-keyword">var</span> typedArray = <span class="hljs-keyword">new</span> Uint8Array(value.match(/[\da-f]{<!-- --><span class="hljs-number">2</span>}/gi).map(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(h)</span> {<!-- --></span>
    <span class="hljs-keyword">return</span> parseInt(h, <span class="hljs-number">16</span>)
  }))
  <span class="hljs-keyword">var</span> buffer = typedArray.buffer;
  <span class="hljs-keyword">var</span> bufLen = buffer.byteLength;
  <span class="hljs-keyword">if</span> (Math.floor(bufLen % <span class="hljs-number">20</span>) != <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">var</span> fillBuffer = <span class="hljs-keyword">new</span> Uint8Array(Math.ceil(bufLen / <span class="hljs-number">20</span>) * <span class="hljs-number">20</span>);
    fillBuffer.set(typedArray);
    buffer = fillBuffer.buffer;
  }
  <span class="hljs-keyword">return</span> buffer;
}

<span class="hljs-comment">/**
 * 字符串转16进制(只支持16进制的字符串)
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">strToHexCharCode</span><span class="hljs-params">(str)</span> {<!-- --></span>　　
  <span class="hljs-keyword">if</span> (str === <span class="hljs-string">""</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;　　
  <span class="hljs-keyword">var</span> hexCharCode = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; str.length; i++) {
    hexCharCode.push((str.charCodeAt(i)).toString(<span class="hljs-number">16</span>));　　
  }
  <span class="hljs-keyword">return</span> hexCharCode.join(<span class="hljs-string">""</span>);
}

<span class="hljs-comment">// 异或</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">XOR</span><span class="hljs-params">(b, len)</span> {<!-- --></span>
  <span class="hljs-keyword">var</span> tmp = b[<span class="hljs-number">0</span>];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">1</span>; i &lt; len; i++) {
    tmp ^= b[i];
  }
  <span class="hljs-keyword">return</span> tmp;
}

<span class="hljs-comment">// byte[]转整形</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bytesToLong</span><span class="hljs-params">(bytValue)</span> {<!-- --></span>
  <span class="hljs-keyword">var</span> ret = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; bytValue.length; i++) {
    ret += (bytValue[bytValue.length - i - <span class="hljs-number">1</span>] &amp; <span class="hljs-number">0xFF</span>) &lt;&lt; (i * <span class="hljs-number">8</span>);
  }
  <span class="hljs-keyword">return</span> ret;
}

<span class="hljs-comment">/**
 * 十六进制转字符串
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexCharCodeToStr</span><span class="hljs-params">(hexCharCodeStr)</span> {<!-- --></span>　　
  <span class="hljs-keyword">var</span> trimedStr = hexCharCodeStr.trim();　　
  <span class="hljs-keyword">var</span> rawStr = trimedStr;　　
  <span class="hljs-keyword">var</span> len = rawStr.length;　　
  <span class="hljs-keyword">if</span> (len % <span class="hljs-number">2</span> !== <span class="hljs-number">0</span>) {
    console.log(<span class="hljs-string">"Illegal Format ASCII Code!"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>;　　
  }　　
  <span class="hljs-keyword">var</span> curCharCode;　　
  <span class="hljs-keyword">var</span> resultStr = [];　　
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; len; i = i + <span class="hljs-number">2</span>) {　　　　
    curCharCode = parseInt(rawStr.substr(i, <span class="hljs-number">2</span>), <span class="hljs-number">16</span>); <span class="hljs-comment">// ASCII Code Value</span>
    　　　　
    resultStr.push(String.fromCharCode(curCharCode));　　
  }　　
  <span class="hljs-keyword">return</span> resultStr.join(<span class="hljs-string">""</span>);
}

<span class="hljs-comment">#//================================js=============================</span>



 <span class="hljs-keyword">var</span> str = <span class="hljs-string">"ABCD,;'/,][;'85*&amp;%$#@!}{\nABCD,;'/,][;'';/.,&lt;{]~`!85*&amp;%$#@!}{\n"</span>;

    let intArray = strToIntArray(str);
    let toStr = byteArrayToStr(intArray);
    console.log(<span class="hljs-string">"toStr==数组转字符串===="</span> + toStr)
    let toHex = byteArrayToHex(intArray);
    console.log(<span class="hljs-string">"===数组转十六进制字符串======"</span> + toHex)
    let toByte = hexStrToByte(toHex);
    let toStrOld = byteArrayToStr(toByte);
    console.log(<span class="hljs-string">"toStr==数组转字符串==toStrOld=="</span> + toStrOld)

    <span class="hljs-comment">/**
     *byte[] 数组转十六进制字符串
     *<span class="hljs-phpdoc"> @param</span> strValue byte[] 数组
     *<span class="hljs-phpdoc"> @returns</span> {string}
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byteArrayToHex</span><span class="hljs-params">(arrayValue)</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> hexStr = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> arrayItem of arrayValue) {
            <span class="hljs-keyword">var</span> charHex = arrayItem.toString(<span class="hljs-number">16</span>);
            charHex = (Math.floor(charHex.length % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>) ? charHex : `<span class="hljs-number">0</span>${charHex}`;
            hexStr = `${hexStr}${charHex}`;
        }
        <span class="hljs-keyword">return</span> hexStr.toLocaleUpperCase();
    }

    <span class="hljs-comment">/**
     * 十六进制字符串转byte[]
     *<span class="hljs-phpdoc"> @param</span> hexStrValue 十六进制字符串
     *
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hexStrToByte</span><span class="hljs-params">(hexStrValue)</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> hexValueLen = hexStrValue.length;
        <span class="hljs-keyword">var</span> arrayCode = [];
        <span class="hljs-keyword">if</span> (Math.floor(hexValueLen%<span class="hljs-number">2</span>)!=<span class="hljs-number">0</span>){
            hexStrValue = `${hexStrValue}<span class="hljs-number">0</span>`;
        }
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;hexValueLen;i+=<span class="hljs-number">2</span>){
            <span class="hljs-keyword">var</span> itemValue = hexStrValue.substring(i,i+<span class="hljs-number">2</span>);
            arrayCode.push(parseInt(itemValue,<span class="hljs-number">16</span>))
        }
        <span class="hljs-keyword">return</span> arrayCode;
    }


    <span class="hljs-comment">/**
     * byte[] 转字符串
     *<span class="hljs-phpdoc"> @param</span> byteArrayValue 数组
     *<span class="hljs-phpdoc"> @returns</span> {string}
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">byteArrayToStr</span><span class="hljs-params">(byteArrayValue)</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> str = <span class="hljs-string">""</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> arrayItem of byteArrayValue) {
            str = `${str}${String.fromCharCode(arrayItem)}`;
        }
        <span class="hljs-keyword">return</span> str;
    }

    <span class="hljs-comment">/**
     * 字符串转byte[]
     *<span class="hljs-phpdoc"> @param</span> strValue ASCII字符串
     *<span class="hljs-phpdoc"> @returns</span> {Array}数组
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">strToIntArray</span><span class="hljs-params">(strValue)</span> {<!-- --></span>
        <span class="hljs-keyword">var</span> intAray = [];
        <span class="hljs-keyword">var</span> valueLen = strValue.length;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; valueLen; i++) {
            intAray.push(strValue.charCodeAt(i));
        }
        <span class="hljs-keyword">return</span> intAray;
    }

<span class="hljs-comment">//结果</span>
toStr==数组转字符串====ABCD,;<span class="hljs-string">'/,][;'</span><span class="hljs-number">85</span>*&amp;%$<span class="hljs-comment">#@!}{<!-- --></span>
ABCD,;<span class="hljs-string">'/,][;'</span><span class="hljs-string">';/.,&lt;{]~`!85*&amp;%$#@!}{

Conversion.html?_ijt=ol6i0r2lhnq35vp2tllh27lcug:19 ===数组转十六进制字符串======414243442C3B272F2C5D5B3B2738352A2625242340217D7B0A414243442C3B272F2C5D5B3B27273B2F2E2C3C7B5D7E602138352A2625242340217D7B0A
Conversion.html?_ijt=ol6i0r2lhnq35vp2tllh27lcug:22 toStr==数组转字符串==toStrOld==ABCD,;'</span>/,][;<span class="hljs-string">'85*&amp;%$#@!}{
ABCD,;'</span>/,][;<span class="hljs-string">''</span>;/.,&lt;{]~`!<span class="hljs-number">85</span>*&amp;%$<span class="hljs-comment">#@!}{<!-- --></span></code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/add591fbc8c7f7a4816ab0823e6f553a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">60万餐厅数据为你画出全国美食地图（附技术讲解）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c393afc455a10735e7e44a05941c421b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">R写入和读取csv</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>