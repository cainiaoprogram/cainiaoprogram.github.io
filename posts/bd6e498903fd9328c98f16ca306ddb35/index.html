<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>5G学习之寻呼 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="5G学习之寻呼" />
<meta property="og:description" content="寻呼（一） 1.为什么需要寻呼？ 为了尽可能实现低功耗，在UE没有激活业务时，会切换到节能的状态（LTE中时空闲状态，NR中空闲、非激活状态），都会缩减UE的功能（比如断开控制面连接），这时候核心网不知道UE的精确位置（在哪个小区），没办法进行数据传输。所以核心网有UE的数据到达时，需要通过某种机制找到UE
2.寻呼需要解决什么问题？ 在什么范围内寻呼UE? 在什么时间寻呼UE？ UE怎么简单快速有没有被寻呼、谁在寻呼？
3.寻呼的基本原理： 网络侧：NG-RAN/核心网传递过来寻呼消息，网络侧利用PDCCH指示的PDSCH承载寻呼消息
UE：在非连续周期内（DRX）对PDCCH进行监控，接受发送给自己的寻呼消息并触发RACH进入连接状态
从物理层看：寻呼消息和普通消息的流程和处理方法相同：通过PDCCH通知UE在对应的PDSCH获得用户数据（区别：寻呼PDSCH承载的是上层信令，数据传输PDSCH承载用户数据）
4.UE接收寻呼信号的流程： 计算出可能发出寻呼的位置PO、PF =&gt; 监控对应子帧的PDCCH =&gt; 存在P-RNTI =&gt; 根据PDCCH指示的RB分配和调制编码格式，从对应的PDSCH上获得寻呼消息 =&gt; 根据寻呼消息里携带的UE ID判断寻呼消息是不是寻呼的自己
名词解释：
寻呼时机（PO）是一个子帧，其中可以在PDCCH上发送寻址寻呼消息的P-RNTI。PF是一个无线电帧，可以包含一个或多个POP-RNTI：PNTI是NR中用作某种目的的临时标识符（有许多种：P-RNTI、SI-RNTI（用来标识系统信息广播）、RA-RNTI（用来标识随机接入应答）等等等等），P-RNTI用来标识寻呼和系统信息更新通知。 5.怎么得到PF、PO？ 通过计算： PF：（SNF&#43;PF_offset）mod T = （T div N）* （UE_ID mod N）
PO： i_s = floor(UE_ID / N) mod Ns
参数解释：
SFN：（变量）系统帧号
T：（常量）UE的非连续接收周期；如果系统设置了，则T为最小周期值，没配置就是系统默认值；意义：周期为T，则周期T内有T个系统帧
N：（变量）DRX周期T内PF的数量（称为PF密度）
UE_ID：（变量）IMSI mod 1024 （IMSI：国际移动用户识别码）
Ns：（变量）在一个PF的PO数目
PO：36.304 对PO的定义如下
表格解释： 当Ns＝1时，在一个寻呼帧内只能有一个寻呼机位置（只有一个子帧承载寻呼消息），子帧编号为9。 当Ns＝2时，在寻呼帧内可以有两个寻呼位置（其中携带寻呼消息的两个子帧），并且子帧号是4和9。 当Ns＝4时，在寻呼帧内可以有四个寻呼位置（其中携带寻呼消息的四个子帧），并且子帧编号为0、4、5和9。 6.公式意义： PF：SNF mod T = （T div N）* （UE_ID mod N）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bd6e498903fd9328c98f16ca306ddb35/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-02T11:26:47+08:00" />
<meta property="article:modified_time" content="2022-09-02T11:26:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">5G学习之寻呼</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>寻呼（一）</h2> 
<h3><a id="1_2"></a><strong>1.为什么需要寻呼？</strong></h3> 
<p>为了尽可能实现低功耗，在UE没有激活业务时，会切换到节能的状态（LTE中时空闲状态，NR中空闲、非激活状态），都会缩减UE的功能（比如断开控制面连接），这时候核心网不知道UE的精确位置（在哪个小区），没办法进行数据传输。所以核心网有UE的数据到达时，需要通过某种机制找到UE</p> 
<h3><a id="2_6"></a>2.寻呼需要解决什么问题？</h3> 
<p>在什么范围内寻呼UE? 在什么时间寻呼UE？ UE怎么简单快速有没有被寻呼、谁在寻呼？</p> 
<h3><a id="3_10"></a><strong>3.寻呼的基本原理：</strong></h3> 
<p>网络侧：NG-RAN/核心网传递过来寻呼消息，网络侧利用PDCCH指示的PDSCH承载寻呼消息</p> 
<p>UE：在非连续周期内（DRX）对PDCCH进行监控，接受发送给自己的寻呼消息并触发RACH进入连接状态</p> 
<p>从物理层看：寻呼消息和普通消息的流程和处理方法相同：通过PDCCH通知UE在对应的PDSCH获得用户数据（区别：寻呼PDSCH承载的是上层信令，数据传输PDSCH承载用户数据）</p> 
<h3><a id="4UE_18"></a><strong>4.UE接收寻呼信号的流程：</strong></h3> 
<p>计算出可能发出寻呼的位置PO、PF =&gt; 监控对应子帧的PDCCH =&gt; 存在P-RNTI =&gt; 根据PDCCH指示的RB分配和调制编码格式，从对应的PDSCH上获得寻呼消息 =&gt; 根据寻呼消息里携带的UE ID判断寻呼消息是不是寻呼的自己</p> 
<p>名词解释：</p> 
<ul><li>寻呼时机（PO）是一个子帧，其中可以在PDCCH上发送寻址寻呼消息的P-RNTI。</li><li>PF是一个无线电帧，可以包含一个或多个PO</li><li>P-RNTI：PNTI是NR中用作某种目的的临时标识符（有许多种：P-RNTI、SI-RNTI（用来标识系统信息广播）、RA-RNTI（用来标识随机接入应答）等等等等），P-RNTI用来标识寻呼和系统信息更新通知。</li></ul> 
<h3><a id="5PFPO__27"></a><strong>5.怎么得到PF、PO？ 通过计算</strong>：</h3> 
<p>PF：（<em>SNF</em>+<em>PF</em>_<em>offset</em>）mod T = （<em>T</em> div <em>N</em>）* （<em>UE_ID</em> mod <em>N</em>）</p> 
<p>PO： <em>i_s</em> = floor(<em>UE_ID / N</em>) mod <em>Ns</em></p> 
<p>参数解释：</p> 
<ul><li> <p>SFN：（变量）系统帧号</p> </li><li> <p>T：（常量）UE的非连续接收周期；如果系统设置了，则T为最小周期值，没配置就是系统默认值；意义：周期为T，则周期T内有T个系统帧</p> </li><li> <p>N：（变量）DRX周期T内PF的数量（称为PF密度）</p> </li><li> <p>UE_ID：（变量）IMSI mod 1024 （IMSI：国际移动用户识别码）</p> </li><li> <p>Ns：（变量）在一个PF的PO数目</p> </li><li> <p>PO：36.304 对PO的定义如下<br> <img src="https://images2.imgbox.com/b3/c5/mYK9xgBi_o.png" alt="在这里插入图片描述"></p> <pre><code>  表格解释：
  
  当Ns＝1时，在一个寻呼帧内只能有一个寻呼机位置（只有一个子帧承载寻呼消息），子帧编号为9。
  
  当Ns＝2时，在寻呼帧内可以有两个寻呼位置（其中携带寻呼消息的两个子帧），并且子帧号是4和9。
  
  当Ns＝4时，在寻呼帧内可以有四个寻呼位置（其中携带寻呼消息的四个子帧），并且子帧编号为0、4、5和9。
</code></pre> </li></ul> 
<h3><a id="6_59"></a><strong>6.公式意义：</strong></h3> 
<p>PF：<em>SNF</em> mod T = （<em>T</em> div <em>N</em>）* （<em>UE_ID</em> mod <em>N</em>）</p> 
<ul><li> <p>（<em>UE_ID</em> mod <em>N</em>）：对UE_ID取N的模；实际意义：将不同UE_ID编号的UE均匀分配到N个PF中。</p> </li><li> <p>（<em>T</em> div <em>N</em>）：把T个系统帧等分成N份，返回每份包含的帧数；实际意义：N个PF平均的分配到T的系统帧内。</p> </li><li> <p>（<em>SNF</em> mod <em>T</em> ）：对SNF取T的模；实际意义：将不同SNF编号的帧均匀分配到T个小组中。</p> </li></ul> 
<p>实际意义：将不同的UE_ID的UE均匀分布在N个PF中，且N个PF也均匀地分布在T内。</p> 
<p>PO： <em>i_s</em> = floor(<em>UE_ID / N</em>) mod <em>Ns</em></p> 
<ul><li>本终端的PO在PF上的位置编码</li></ul> 
<h3><a id="7_75"></a><strong>7.对公式的举例说明：</strong></h3> 
<p>​ 参数设置：T=320ms(32个系统帧)；N=<em>half</em> T，（16个PF）</p> 
<p>​ 问题：给出UE_ID从0-47的UE在SFN#1~#160对应的PF</p> 
<p><img src="https://images2.imgbox.com/4f/34/MVmvCDRX_o.png" alt="在这里插入图片描述"></p> 
<p>等号左值（上面表格）：将SFN#1~#160对应的PF均匀的分布到32个帧内</p> 
<p>等号右值（下面表格）：将UE_ID从0~47的UE均匀的分布到16个PF中</p> 
<p>结论：UE_ID=0，16，32的UE对应的PF在帧#1，#33，#65，#97和#129处。UE在一个T内只有一个PF，不同UE的PF均匀的分布在16个PF内，16个PF均匀的分布在32个帧内。</p> 
<p><img src="https://images2.imgbox.com/ea/f8/IylVhan8_o.png" alt="在这里插入图片描述"></p> 
<p>PO内用作监控寻呼PDCCH的监控时机和基站发送的SSB的数量一致，用 <em>i_s</em> 来标记其监控时机。为了实现寻呼信号监控的方向性，UE监控的寻呼PDCCH的波束方向和其选择的最好波束的方向一致。<br> <img src="https://images2.imgbox.com/64/49/k5pD3ETV_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-A7RMZyT5-1662085824184)(C:\Users\majing\AppData\Roaming\Typora\typora-user-images\image-20220902094250259.png)]"></p> 
<p>如上图中，选择SSB index=1的方向。</p> 
<h3><a id="8UE_100"></a><strong>8.UE处于通信状态时的寻呼</strong></h3> 
<p>需要考虑的是：UE以什么频率去监听寻呼</p> 
<p>LTE中，无论处于空闲模式还是连接模式，UE通过PCCH获得寻呼，所以在连接模式下也需要考虑寻呼的定时</p> 
<p>有两种类型的寻呼：针对特性UE的寻呼、适用于特定区域中所有UE的寻呼；</p> 
<ul><li> <p>对特定UE的寻呼：</p> <p>UE：按照上文所述方法定时监控寻呼</p> <p>网络侧：按照上文所述方式定时发送寻呼</p> </li><li> <p>对所有UE共用的寻呼：</p> <p>UE：RRC_CONNECTED中的ETWS和（或）支持CMAS的UE应尝试在每个默认寻呼周期至少读取寻呼一次，检查是否存在ETWS和（或）CMAS通知</p> <p>网络侧：网络不知道区域中的哪个UE支持CMA/ETW以及哪个UE驻留，所以需要在小区中使用每个寻呼时机发送寻呼消息，为了让UE知道正在广播的ETWS或CMAS通知。</p> </li></ul> 
<p>注：以上自己看书总结，有错请指正，侵删。</p> 
<p>​</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8e49f24a2ce7b1c69ae71cebc01f1b58/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C-数据结构与算法】408必背算法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a00dfeea75ae5874c78d361e85a1118c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【学习vite &#43; vue3 &#43; pinia &#43; ts】pinia应用 store的创建及应用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>