<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue使用实现录音功能js-audio-recorder - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue使用实现录音功能js-audio-recorder" />
<meta property="og:description" content="前言 最近项目中需要实现一个录音上传功能，用于语音评论可以上录音。
下载插件：
npm i js-audio-recorder 完整代码
&lt;template&gt; &lt;div style=&#34;padding: 20px;&#34;&gt; &lt;h3&gt;录音上传&lt;/h3&gt; &lt;div style=&#34;font-size:14px&#34;&gt; &lt;h3&gt;录音时长：{{ recorder &amp;&amp; recorder.duration.toFixed(4) }}&lt;/h3&gt; &lt;br /&gt; &lt;el-button type=&#34;primary&#34; @click=&#34;handleStart&#34;&gt;开始录音&lt;/el-button&gt; &lt;el-button type=&#34;info&#34; @click=&#34;handlePause&#34;&gt;暂停录音&lt;/el-button&gt; &lt;el-button type=&#34;success&#34; @click=&#34;handleResume&#34;&gt;继续录音&lt;/el-button&gt; &lt;el-button type=&#34;warning&#34; @click=&#34;handleStop&#34;&gt;停止录音&lt;/el-button&gt; &lt;br /&gt; &lt;br /&gt; &lt;h3&gt; 播放时长：{{ recorder &amp;&amp; (playTime &gt; recorder.duration ? recorder.duration.toFixed(4) : playTime.toFixed(4)) }} &lt;/h3&gt; &lt;br /&gt; &lt;el-button type=&#34;primary&#34; @click=&#34;handlePlay&#34;&gt;播放录音&lt;/el-button&gt; &lt;el-button type=&#34;info&#34; @click=&#34;handlePausePlay&#34;&gt;暂停播放&lt;/el-button&gt; &lt;el-button type=&#34;success&#34; @click=&#34;handleResumePlay&#34;&gt;继续播放&lt;/el-button&gt; &lt;el-button type=&#34;warning&#34; @click=&#34;handleStopPlay&#34;&gt;停止播放&lt;/el-button&gt; &lt;el-button type=&#34;error&#34; @click=&#34;handleDestroy&#34;&gt;销毁录音&lt;/el-button&gt; &lt;el-button type=&#34;primary&#34; @click=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b562955828f6e42512b1bba47b6b8b66/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-01T15:56:47+08:00" />
<meta property="article:modified_time" content="2023-12-01T15:56:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue使用实现录音功能js-audio-recorder</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3 style="margin-left:0;"><span style="color:#4f4f4f;"><span style="background-color:#ffffff;">前言</span></span></h3> 
<p style="margin-left:0;"><span style="color:#4d4d4d;"><span style="background-color:#ffffff;"><span style="color:#999aaa;">最近项目中需要实现一个录音上传功能，用于语音评论可以上录音。</span></span></span></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><img alt="" height="446" src="https://images2.imgbox.com/fd/18/mooqq4KM_o.png" width="907"></p> 
<p style="margin-left:0;">下载插件：</p> 
<div> 
 <pre><code class="hljs language-javascript">npm i js-audio-recorder
</code></pre> 
</div> 
<p>完整代码</p> 
<div> 
 <pre><code class="hljs language-html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"padding: 20px;"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>录音上传<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"font-size:14px"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>录音时长：{<!-- -->{ recorder &amp;&amp; recorder.duration.toFixed(4) }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleStart"</span>&gt;</span>开始录音<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"info"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handlePause"</span>&gt;</span>暂停录音<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"success"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleResume"</span>&gt;</span>继续录音<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"warning"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleStop"</span>&gt;</span>停止录音<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>
        播放时长：{<!-- -->{
          recorder &amp;&amp;
            (playTime &gt; recorder.duration
              ? recorder.duration.toFixed(4)
              : playTime.toFixed(4))
        }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handlePlay"</span>&gt;</span>播放录音<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"info"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handlePausePlay"</span>&gt;</span>暂停播放<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"success"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleResumePlay"</span>&gt;</span>继续播放<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"warning"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleStopPlay"</span>&gt;</span>停止播放<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"error"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleDestroy"</span>&gt;</span>销毁录音<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"uploadRecord"</span>&gt;</span>上传<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">
<span class="hljs-keyword">import</span> <span class="class_ hljs-title">Recorder</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'js-audio-recorder'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="function_ hljs-title">data</span>() {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">recorder</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">playTime</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">src</span>: <span class="hljs-literal">null</span>
    }
  },
  <span class="function_ hljs-title">created</span>() {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span> = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Recorder</span>()
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// 开始录音</span>
    <span class="function_ hljs-title">handleStart</span>() {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span> = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Recorder</span>()
      <span class="class_ hljs-title">Recorder</span>.<span class="function_ hljs-title">getPermission</span>().<span class="function_ hljs-title">then</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'开始录音'</span>)
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">start</span>() <span class="hljs-comment">// 开始录音</span>
      }, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.$message({
          <span class="hljs-attr">message</span>: <span class="hljs-string">'请先允许该网页使用麦克风'</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>
        })
        <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">`<span class="hljs-subst">${error.name}</span> : <span class="hljs-subst">${error.message}</span>`</span>)
      })
    },
    <span class="function_ hljs-title">handlePause</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'暂停录音'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">pause</span>() <span class="hljs-comment">// 暂停录音</span>
    },
    <span class="function_ hljs-title">handleResume</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'恢复录音'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">resume</span>() <span class="hljs-comment">// 恢复录音</span>
    },
    <span class="function_ hljs-title">handleStop</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'停止录音'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">stop</span>() <span class="hljs-comment">// 停止录音</span>
    },
    <span class="function_ hljs-title">handlePlay</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'播放录音'</span>)
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">play</span>() <span class="hljs-comment">// 播放录音</span>

      <span class="hljs-comment">// 播放时长</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">playTime</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">getPlayTime</span>()
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-literal">null</span>
        }
      }, <span class="hljs-number">100</span>)
    },
    <span class="function_ hljs-title">handlePausePlay</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'暂停播放'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">pausePlay</span>() <span class="hljs-comment">// 暂停播放</span>

      <span class="hljs-comment">// 播放时长</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">playTime</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">getPlayTime</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">time</span> = <span class="hljs-literal">null</span>
    },
    <span class="function_ hljs-title">handleResumePlay</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'恢复播放'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">resumePlay</span>() <span class="hljs-comment">// 恢复播放</span>

      <span class="hljs-comment">// 播放时长</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">playTime</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">getPlayTime</span>()
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-literal">null</span>
        }
      }, <span class="hljs-number">100</span>)
    },
    <span class="function_ hljs-title">handleStopPlay</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'停止播放'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">stopPlay</span>() <span class="hljs-comment">// 停止播放</span>

      <span class="hljs-comment">// 播放时长</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">playTime</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">getPlayTime</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-literal">null</span>
    },
    <span class="function_ hljs-title">handleDestroy</span>() {
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'销毁实例'</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">destroy</span>() <span class="hljs-comment">// 毁实例</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-literal">null</span>
    },
    <span class="function_ hljs-title">uploadRecord</span>() {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span> == <span class="hljs-literal">null</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="hljs-property">duration</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.$message({
          <span class="hljs-attr">message</span>: <span class="hljs-string">'请先录音'</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>
        })
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
      }
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">pause</span>() <span class="hljs-comment">// 暂停录音</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-literal">null</span>
      <span class="hljs-variable language_">console</span>.<span class="function_ hljs-title">log</span>(<span class="hljs-string">'上传录音'</span>)<span class="hljs-comment">// 上传录音</span>

      <span class="hljs-keyword">const</span> formData = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">FormData</span>()
      <span class="hljs-keyword">const</span> blob = <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">getWAVBlob</span>()<span class="hljs-comment">// 获取wav格式音频数据</span>
      <span class="hljs-comment">// 此处获取到blob对象后需要设置fileName满足当前项目上传需求，其它项目可直接传把blob作为file塞入formData</span>
      <span class="hljs-keyword">const</span> newbolb = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Blob</span>([blob], { <span class="hljs-attr">type</span>: <span class="hljs-string">'audio/wav'</span> })
      <span class="hljs-keyword">const</span> fileOfBlob = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">File</span>([newbolb], <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Date</span>().<span class="function_ hljs-title">getTime</span>() + <span class="hljs-string">'.wav'</span>)
      formData.<span class="function_ hljs-title">append</span>(<span class="hljs-string">'file'</span>, fileOfBlob)
      <span class="hljs-keyword">const</span> url = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="function_ hljs-title">createObjectURL</span>(fileOfBlob)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">src</span> = url
      <span class="hljs-comment">// const axios = require('axios')</span>
      <span class="hljs-comment">// axios.post(url, formData).then(res =&gt; {<!-- --></span>
      <span class="hljs-comment">//   console.log(res.data.data[0].url)</span>
      <span class="hljs-comment">// })</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

</code></pre> 
</div> 
<p><br> 播放通过audio标签控制，可以上传到公司服务器获取线上地址，还可以通过blob对象获取到播放url</p> 
<div> 
 <pre><code class="hljs language-javascript">  <span class="hljs-keyword">const</span> blob = <span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span>.<span class="function_ hljs-title">getWAVBlob</span>()
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">url</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">URL</span>.<span class="function_ hljs-title">createObjectURL</span>(blob)</code></pre> 
</div> 
<ol><li> <p></p> </li></ol> 
<h4>注意</h4> 
<p>注意，调试环境这里会报错，所以开始解决报错问题：<br> 报错：error:浏览器不支持getUserMedia !</p> 
<p>其实这是因为浏览器不支持http：IP开头的路径，认为这个路径不安全</p> 
<p>浏览器只支持file:,https:,http://localhost，</p> 
<p>解决办法：</p> 
<p>chrome浏览器</p> 
<p>地址栏输入：<span style="color:#fe2c24;">chrome://flags/#unsafely-treat-insecure-origin-as-secure</span></p> 
<p>输入你的本地网址，改为enabled，选择重启浏览器按钮【生产环境当中由于是使用域名进行访问，所以就不会报错。】</p> 
<p><img alt="" height="660" src="https://images2.imgbox.com/76/68/QqU874rU_o.png" width="1200"><span title="点击并拖拽以改变尺寸">​</span></p> 
<h4>然后就OK了</h4> 
<p></p> 
<h4>总结</h4> 
<p><br> 1.录音时长duration是recorder的属性，可以实时获取；但播放时长需要通过方法getPlayTime()获取，播放时不能实时改变，此处我用了个100ms延迟的定时器假装实时获取，如果有更好的办法，欢迎指教。<br> 2.getWAVBlob()获取录音数据的方法获取的时blob对象，当前项目中需要验证fileName，所以需要把blob转成file，改变fileName上传。<br> 3.官网提供的demo中还有波形图，可以参考。</p> 
<p>官网地址：<a class="link-info" href="https://recorder-api.zhuyuntao.cn/" rel="nofollow" title="https://recorder-api.zhuyuntao.cn/">https://recorder-api.zhuyuntao.cn/</a><br> 官网项目演示地址：<a class="link-info" href="https://recorder.zhuyuntao.cn/" rel="nofollow" title="https://recorder.zhuyuntao.cn/">https://recorder.zhuyuntao.cn/</a><br>  </p> 
<h3>更新</h3> 
<p>客户说录音文件太大，20s就有2M左右，需要压缩。<br> 查看文档降低采样位数，采样率，单声道可以降低音频质量，测试20s大概只有200k左右，只需获取record对象时申明即可。</p> 
<div> 
 <pre><code class="hljs language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">recorder</span> = <span class="hljs-keyword">new</span> <span class="class_ hljs-title">Recorder</span>({
                    <span class="hljs-attr">sampleBits</span>: <span class="hljs-number">8</span>, <span class="hljs-comment">// 采样位数，支持 8 或 16，默认是16</span>
                    <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">11025</span>, <span class="hljs-comment">// 采样率，支持 11025、16000、22050、24000、44100、48000，根据浏览器默认值，我的chrome是48000</span>
                    <span class="hljs-attr">numChannels</span>: <span class="hljs-number">1</span> <span class="hljs-comment">// 声道，支持 1 或 2， 默认是1</span>
                    <span class="hljs-comment">// compiling: false,(0.x版本中生效,1.x增加中)  // 是否边录边转换，默认是false</span>
                })
</code></pre> 
</div> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4335accca3c2e737f882a00a8e6c07a1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Backend Qt5Agg is interactive backend. Turning interactive mode on.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/250b248a29ea0713347c20bd3a5b9e47/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CMake如何添加编译选项(debug和release分别选择对应的库)?</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>