<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SpringBoot学习(八)-SpringBoot &#43; Dubbo &#43; zookeeper - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SpringBoot学习(八)-SpringBoot &#43; Dubbo &#43; zookeeper" />
<meta property="og:description" content="分布式Dubbo&#43;Zookeeper 1、分布式理论 1）什么是分布式系统？ 在《分布式系统原理与范型》一书中有如下定义：“分布式系统是若干独立计算机的集合，这些计算机对于用户来说就像单个相关系统”；
分布式系统是由一组通过网络进行通信、为了完成共同的任务而协调工作的计算机节点组成的系统。分布式系统的出现是为了用廉价的、普通的机器完成单个计算机无法完成的计算、存储任务。其目的是利用更多的机器，处理更多的数据。
分布式系统（distributed system）是建立在网络之上的软件系统。
首先需要明确的是，只有当单个节点的处理能力无法满足日益增长的计算、存储任务的时候，且硬件的提升（加内存、加磁盘、使用更好的CPU）高昂到得不偿失的时候，应用程序也不能进一步优化的时候，我们才需要考虑分布式系统。因为，分布式系统要解决的问题本身就是和单机系统一样的，而由于分布式系统多节点、通过网络通信的拓扑结构，会引入很多单机系统没有的问题，为了解决这些问题又会引入更多的机制、协议，带来更多的问题。。。
2）Dubbo文档 随着互联网的发展，网站应用的规模不断扩大，常规的垂直应用架构已无法应对，分布式服务架构以及流动计算架构势在必行，急需一个治理系统确保架构有条不紊的演进。
在Dubbo的官网文档有这样一张图
①单一应用架构 当网站流量很小时，只需一个应用，将所有功能都部署在一起，以减少部署节点和成本。此时，用于简化增删改查工作量的数据访问框架(ORM)是关键。
适用于小型网站，小型管理系统，将所有功能都部署到一个功能里，简单易用。
缺点：
1、性能扩展比较难
2、协同开发问题
3、不利于升级维护
②垂直应用架构 当访问量逐渐增大，单一应用增加机器带来的加速度越来越小，将应用拆成互不相干的几个应用，以提升效率。此时，用于加速前端页面开发的Web框架(MVC)是关键。
通过切分业务来实现各个模块独立部署，降低了维护和部署的难度，团队各司其职更易管理，性能扩展也更方便，更有针对性。
缺点：公用模块无法重复利用，开发性的浪费
③分布式服务架构 当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。此时，用于提高业务复用及整合的**分布式服务框架(RPC)**是关键。
④流动计算架构 当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。此时，用于提高机器利用率的资源调度和治理中心(SOA)[ Service Oriented Architecture]是关键。
2、RPC RPC【Remote Procedure Call】是指远程过程调用，是一种进程间通信方式，他是一种技术的思想，而不是规范。它允许程序调用另一个地址空间（通常是共享网络的另一台机器上）的过程或函数，而不用程序员显式编码这个远程调用的细节。即程序员无论是调用本地的还是远程的函数，本质上编写的调用代码基本相同。
也就是说两台服务器A，B，一个应用部署在A服务器上，想要调用B服务器上应用提供的函数/方法，由于不在一个内存空间，不能直接调用，需要通过网络来表达调用的语义和传达调用的数据。为什么要用RPC呢？就是无法在一个进程内，甚至一个计算机内通过本地调用的方式完成的需求，比如不同的系统间的通讯，甚至不同的组织间的通讯，由于计算能力需要横向扩展，需要在多台机器组成的集群上部署应用。RPC就是要像调用本地的函数一样去调远程函数；
1）RPC基本原理 步骤解析：
RPC两个核心模块：通讯，序列化。
3、测试环境搭建 1）Dubbo Apache Dubbo |ˈdʌbəʊ| 是一款高性能、轻量级的开源Java RPC框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。
dubbo官网 http://dubbo.apache.org/zh-cn/index.html
1.了解Dubbo的特性
2.查看官方文档
dubbo基本概念
服务提供者（Provider）：暴露服务的服务提供方，服务提供者在启动时，向注册中心注册自己提供的服务。
服务消费者（Consumer）：调用远程服务的服务消费方，服务消费者在启动时，向注册中心订阅自己所需的服务，服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。
注册中心（Registry）：注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者
监控中心（Monitor）：服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心
调用关系说明
l 服务容器负责启动，加载，运行服务提供者。
l 服务提供者在启动时，向注册中心注册自己提供的服务。
l 服务消费者在启动时，向注册中心订阅自己所需的服务。
l 注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。
l 服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。
l 服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。
2）Dubbo环境搭建 点进dubbo官方文档，推荐我们使用Zookeeper 注册中心" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/54d3851bd57116d0fe29c692cc318220/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-07T09:56:43+08:00" />
<meta property="article:modified_time" content="2024-01-07T09:56:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SpringBoot学习(八)-SpringBoot &#43; Dubbo &#43; zookeeper</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="DubboZookeeper_3"></a>分布式Dubbo+Zookeeper</h2> 
<h3><a id="1_5"></a>1、分布式理论</h3> 
<h4><a id="1_7"></a>1）什么是分布式系统？</h4> 
<p>在《分布式系统原理与范型》一书中有如下定义：“<strong>分布式系统是若干独立计算机的集合</strong>，这些计算机对于用户来说就<strong>像单个相关系统</strong>”；</p> 
<p><strong>分布式系统是由一组通过网络进行通信、为了完成共同的任务而协调工作的计算机节点组成的系统</strong>。分布式系统的出现是为了用廉价的、普通的机器完成单个计算机无法完成的计算、存储任务。其目的是<strong>利用更多的机器，处理更多的数据</strong>。</p> 
<p>分布式系统（distributed system）是建立在网络之上的软件系统。</p> 
<p>首先需要明确的是，<strong>只有当单个节点的处理能力无法满足日益增长的计算、存储任务的时候，且硬件的提升（加内存、加磁盘、使用更好的CPU）高昂到得不偿失的时候，应用程序也不能进一步优化的时候，我们才需要考虑分布式系统</strong>。因为，分布式系统要解决的问题本身就是和单机系统一样的，而由于分布式系统多节点、通过网络通信的拓扑结构，会引入很多单机系统没有的问题，为了解决这些问题又会引入更多的机制、协议，带来更多的问题。。。</p> 
<h4><a id="2Dubbo_19"></a>2）Dubbo文档</h4> 
<p>随着互联网的发展，网站应用的规模不断扩大，<strong>常规的垂直应用架构已无法应对</strong>，<strong>分布式服务架构以及流动计算架构势在必行</strong>，急需<strong>一个治理系统</strong>确保架构有条不紊的演进。</p> 
<p>在Dubbo的官网文档有这样一张图</p> 
<p><img src="https://images2.imgbox.com/3c/b8/8tFYtlV4_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_30"></a>①单一应用架构</h5> 
<p>当<strong>网站流量很小</strong>时，<strong>只需一个应用</strong>，将所有功能都部署在一起，以减少部署节点和成本。此时，用于<strong>简化增删改查工作量的数据访问框架(ORM)是关键</strong>。</p> 
<p><img src="https://images2.imgbox.com/e4/22/6vJmrPIh_o.png" alt="在这里插入图片描述"></p> 
<p><strong>适用于小型网站，小型管理系统，将所有功能都部署到一个功能里，简单易用。</strong></p> 
<p><strong>缺点：</strong></p> 
<p>1、性能扩展比较难</p> 
<p>2、协同开发问题</p> 
<p>3、不利于升级维护</p> 
<h5><a id="_49"></a>②垂直应用架构</h5> 
<p>当<strong>访问量逐渐增大</strong>，<strong>单一应用增加机器带来的加速度越来越小</strong>，<strong>将应用拆成互不相干的几个应用</strong>，以<strong>提升效率</strong>。此时，用于<strong>加速前端页面开发的Web框架(MVC)是关键</strong>。</p> 
<p><img src="https://images2.imgbox.com/96/45/KdskPheZ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>通过切分业务来实现各个模块独立部署，降低了维护和部署的难度，团队各司其职更易管理，性能扩展也更方便，更有针对性。</strong></p> 
<p><strong>缺点</strong>：公用模块无法重复利用，开发性的浪费</p> 
<h5><a id="_62"></a>③分布式服务架构</h5> 
<p><strong>当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求</strong>。此时，用于提高业务复用及整合的**分布式服务框架(RPC)**是关键。</p> 
<p><img src="https://images2.imgbox.com/d3/56/VCzS1agv_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_71"></a>④流动计算架构</h5> 
<p><strong>当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现</strong>，<strong>此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率</strong>。此时，用于<strong>提高机器利用率的资源调度和治理中心</strong>(SOA)[ Service Oriented Architecture]是关键。</p> 
<p><img src="https://images2.imgbox.com/6c/79/04dxA7Rl_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2RPC_80"></a>2、RPC</h3> 
<p><strong>RPC</strong>【Remote Procedure Call】是指<strong>远程过程调用</strong>，是一种<strong>进程间通信方式</strong>，他是一种技术的思想，而不是规范。它<strong>允许程序调用另一个地址空间（通常是共享网络的另一台机器上）的过程或函数，而不用程序员显式编码这个远程调用的细节</strong>。即程序员<strong>无论是调用本地的还是远程的函数，本质上编写的调用代码基本相同</strong>。</p> 
<p>也就是说两台服务器A，B，一个应用部署在A服务器上，想要调用B服务器上应用提供的函数/方法，由于不在一个内存空间，不能直接调用，需要<strong>通过网络来表达调用的语义和传达调用的数据</strong>。为什么要用RPC呢？就是无法在一个进程内，甚至一个计算机内通过本地调用的方式完成的需求，比如不同的系统间的通讯，甚至不同的组织间的通讯，<strong>由于计算能力需要横向扩展，需要在多台机器组成的集群上部署应用。RPC就是要像调用本地的函数一样去调远程函数；</strong></p> 
<p><img src="https://images2.imgbox.com/1e/ab/ayilIRA9_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="1RPC_89"></a><strong>1）RPC基本原理</strong></h4> 
<p><img src="https://images2.imgbox.com/28/34/d9hB9SAo_o.png" alt="在这里插入图片描述"></p> 
<p><strong>步骤解析：</strong></p> 
<p><img src="https://images2.imgbox.com/6f/5d/Eff7UvfD_o.png" alt="在这里插入图片描述"></p> 
<p><strong>RPC两个核心模块：通讯，序列化。</strong></p> 
<h3><a id="3_106"></a>3、测试环境搭建</h3> 
<h5><a id="1Dubbo_108"></a>1）Dubbo</h5> 
<p>Apache Dubbo |ˈdʌbəʊ| 是一款<strong>高性能、轻量级的开源Java RPC框架</strong>，它提供了三大核心能力：<strong>面向接口的远程方法调用</strong>，<strong>智能容错</strong>和<strong>负载均衡</strong>，以及<strong>服务自动注册和发现</strong>。</p> 
<p>dubbo官网 http://dubbo.apache.org/zh-cn/index.html</p> 
<p>1.了解Dubbo的特性</p> 
<p>2.查看官方文档</p> 
<p><strong>dubbo基本概念</strong></p> 
<p><img src="https://images2.imgbox.com/27/34/unRy9q4P_o.png" alt="在这里插入图片描述"></p> 
<p><strong>服务提供者</strong>（Provider）：暴露服务的服务提供方，服务提供者在启动时，向注册中心注册自己提供的服务。</p> 
<p><strong>服务消费者</strong>（Consumer）：调用远程服务的服务消费方，服务消费者在启动时，向注册中心订阅自己所需的服务，服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。</p> 
<p><strong>注册中心</strong>（Registry）：注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者</p> 
<p><strong>监控中心</strong>（Monitor）：服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心</p> 
<p><strong>调用关系说明</strong></p> 
<p>l 服务容器负责启动，加载，运行服务提供者。</p> 
<p>l 服务提供者在启动时，向注册中心注册自己提供的服务。</p> 
<p>l 服务消费者在启动时，向注册中心订阅自己所需的服务。</p> 
<p>l 注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。</p> 
<p>l 服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。</p> 
<p>l 服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。</p> 
<h5><a id="2Dubbo_151"></a>2）Dubbo环境搭建</h5> 
<p>点进dubbo官方文档，推荐我们使用<strong>Zookeeper 注册中心</strong></p> 
<p>什么是zookeeper呢？可以查看官方文档</p> 
<h6><a id="Windowzookeeper_157"></a>①Window下安装zookeeper</h6> 
<p><strong>①下载zookeeper ：地址， 我们下载3.4.14 ， 最新版！解压zookeeper</strong></p> 
<p><strong>②运行/bin/zkServer.cmd ，初次运行会报错，没有zoo.cfg配置文件；</strong></p> 
<p>可能遇到问题：<strong>闪退 !</strong></p> 
<p>解决方案：<strong>编辑zkServer.cmd文件末尾添加pause</strong> 。这样运行出错就不会退出，<strong>会提示错误信息，方便找到原因</strong>。</p> 
<p><img src="https://images2.imgbox.com/8e/69/F0oF6ebt_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/14/9c/FWYS8Efh_o.png" alt="在这里插入图片描述"></p> 
<p><strong>zoo.cfg文件</strong></p> 
<p><img src="https://images2.imgbox.com/3b/15/k8kMSpmA_o.png" alt="在这里插入图片描述"></p> 
<p><strong>③修改zoo.cfg配置文件</strong></p> 
<p>将conf文件夹下面的zoo_sample.cfg复制一份改名为zoo.cfg即可。</p> 
<p>注意几个重要位置：</p> 
<p><strong>dataDir=./ 临时数据存储的目录（可写相对路径）</strong></p> 
<p><strong>clientPort=2181 zookeeper的端口号</strong></p> 
<p><strong>修改完成后再次启动zookeeper</strong></p> 
<p><img src="https://images2.imgbox.com/ad/2e/Q1jagapz_o.png" alt="在这里插入图片描述"></p> 
<p><strong>注：先开启服务，再连接</strong></p> 
<p><strong>④使用zkCli.cmd测试</strong></p> 
<p>ls /：列出zookeeper根下保存的所有节点</p> 
<pre><code>[zk: 127.0.0.1:2181(CONNECTED) 4] ls /[zookeeper]
</code></pre> 
<p>create –e /kuangshen 123：创建一个kuangshen节点，值为123</p> 
<p>get /kuangshen：获取/kuangshen节点的值</p> 
<p><img src="https://images2.imgbox.com/01/c0/Sy3B3H1S_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="windowdubboadmin_218"></a>②window下安装dubbo-admin(选用)</h6> 
<p><strong>dubbo本身并不是一个服务软件</strong>。<strong>它其实就是一个jar包</strong>，<strong>能够帮你的java程序连接到zookeeper</strong>，并<strong>利用zookeeper消费、提供服务</strong>。</p> 
<p>但是<strong>为了让用户更好的管理监控众多的dubbo服务</strong>，官方提供了一个<strong>可视化的监控程序dubbo-admin</strong>，<strong>不过这个监控即使不装也不影响使用。</strong></p> 
<p>我们这里来安装一下：</p> 
<p><strong>①下载dubbo-admin</strong></p> 
<p>地址 ：https://github.com/apache/dubbo-admin/tree/master</p> 
<p><img src="https://images2.imgbox.com/f6/03/sHTlPP1m_o.png" alt="在这里插入图片描述"></p> 
<p><strong>②解压进入目录</strong></p> 
<p>修改 dubbo-admin\src\main\resources \application.properties 指定zookeeper地址</p> 
<p><img src="https://images2.imgbox.com/d8/9e/hNYXWNr5_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-properties">server.port=7001
spring.velocity.cache=false
spring.velocity.charset=UTF-8
spring.velocity.layout-url=/templates/default.vm
spring.messages.fallback-to-system-locale=false
spring.messages.basename=i18n/message
spring.root.password=root
spring.guest.password=guest

dubbo.registry.address=zookeeper://127.0.0.1:2181
</code></pre> 
<p><img src="https://images2.imgbox.com/56/04/xCdgBThS_o.png" alt="在这里插入图片描述"></p> 
<p><strong>③在项目目录下</strong>打包dubbo-admin</p> 
<pre><code class="prism language-shell">mvn clean package <span class="token parameter variable">-Dmaven.test.skip</span><span class="token operator">=</span>true
</code></pre> 
<p><strong>第一次打包的过程有点慢，需要耐心等待！直到成功！</strong></p> 
<p><img src="https://images2.imgbox.com/1a/f9/5hpNZJUH_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ee/9b/YImKwbfN_o.png" alt="在这里插入图片描述"></p> 
<p><strong>④执行 dubbo-admin\target 下的dubbo-admin-0.0.1-SNAPSHOT.jar</strong></p> 
<pre><code>java -jar dubbo-admin-0.0.1-SNAPSHOT.jar
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/1b/RpyvwQDc_o.png" alt="在这里插入图片描述"></p> 
<p><strong>没开zookeeper报错：</strong></p> 
<p><img src="https://images2.imgbox.com/c7/37/0WdS6q16_o.png" alt="在这里插入图片描述"></p> 
<p><strong>先打开zookeeper，再打包</strong></p> 
<p>【注意：zookeeper的服务一定要打开！】</p> 
<p><img src="https://images2.imgbox.com/a9/64/fBWihQAO_o.png" alt="在这里插入图片描述"></p> 
<p><strong>成功执行</strong></p> 
<p><img src="https://images2.imgbox.com/48/72/wkp1osWV_o.png" alt="在这里插入图片描述"></p> 
<p>执行完毕，我们去访问一下 http://localhost:7001/ ， 这时候我们需要输入登录账户和密码，我们都是<strong>默认的root-root</strong>；</p> 
<p><strong>登录成功后，查看界面</strong></p> 
<p><img src="https://images2.imgbox.com/37/93/KiZ86gRj_o.png" alt="在这里插入图片描述"></p> 
<p><strong>安装完成！</strong></p> 
<h3><a id="4SpringBoot__Dubbo__zookeeper_315"></a>4、SpringBoot + Dubbo + zookeeper</h3> 
<h4><a id="1_317"></a>1）框架搭建</h4> 
<p><strong>1. 启动zookeeper ！</strong></p> 
<p><strong>2. IDEA创建一个空项目；</strong></p> 
<p><strong>3.创建一个模块，实现服务提供者：provider-server ， 选择web依赖即可</strong></p> 
<p><strong>4.项目创建完毕，我们写一个服务，比如卖票的服务；</strong></p> 
<p><strong>编写接口</strong></p> 
<p><img src="https://images2.imgbox.com/a1/1f/oNokdnJY_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>kuang<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TicketService</span> <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>编写实现类</strong></p> 
<p><img src="https://images2.imgbox.com/ed/31/4l4BWXDM_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>kuang<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TicketServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TicketService</span> <span class="token punctuation">{<!-- --></span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">return</span> <span class="token string">"《狂神说Java》"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>5.创建一个模块，实现服务消费者：consumer-server ， 选择web依赖即可</strong></p> 
<p><img src="https://images2.imgbox.com/d7/b9/Vhk4fIVo_o.png" alt="在这里插入图片描述"></p> 
<p><strong>6.项目创建完毕，我们写一个服务，比如用户的服务；</strong></p> 
<p><strong>编写service</strong></p> 
<p><img src="https://images2.imgbox.com/3c/4f/tFNuteLZ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>kuang<span class="token punctuation">.</span>consumer<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{<!-- --></span>
   <span class="token comment">//我们需要去拿去注册中心的服务</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>设置各模块的端口号</strong></p> 
<p><img src="https://images2.imgbox.com/43/aa/lEsvB8Il_o.png" alt="在这里插入图片描述"></p> 
<p><strong>删除多余的类</strong></p> 
<p><img src="https://images2.imgbox.com/b1/c1/xO04b683_o.png" alt="在这里插入图片描述"></p> 
<p><strong>需求：现在我们的用户想使用买票的服务，这要怎么弄呢 ？</strong></p> 
<h4><a id="_396"></a>②服务提供者</h4> 
<p><strong>注意：需要先启动zookeeper，并能访问到dubbo的UI界面后，才启动项目，如果启动和访问UI界面失败，注意端口号问题。实在解决不了，多重启几次zookeeper和dubbo的UI</strong></p> 
<p><strong>①将服务提供者注册到注册中心，我们需要整合Dubbo和zookeeper，所以需要导包</strong></p> 
<p><strong>我们从dubbo官网进入github，看下方的帮助文档，找到dubbo-springboot，找到依赖包</strong></p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    
</code></pre> 
<p><strong>zookeeper的包我们去maven仓库下载，zkclient；</strong></p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.sgroschupf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zkclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>【新版的坑】zookeeper及其依赖包，解决日志冲突，还需要剔除日志依赖；</strong></p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- 引入zookeeper --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-framework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.12.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-recipes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.12.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!--排除这个slf4j-log4j12--&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>②在springboot配置文件中配置dubbo相关属性！</strong></p> 
<pre><code class="prism language-properties">#当前应用名字
dubbo.application.name=provider-server
#注册中心地址
dubbo.registry.address=zookeeper://127.0.0.1:2181
#扫描指定包下服务
dubbo.scan.base-packages=com.kuang.provider.service
</code></pre> 
<p><strong>③ 在service的实现类中配置服务注解，发布服务！注意导包问题</strong></p> 
<p><img src="https://images2.imgbox.com/94/96/jTh4grC8_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span> <span class="token comment">//将服务发布出去</span>
<span class="token annotation punctuation">@Component</span> <span class="token comment">//放在容器中</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TicketServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TicketService</span> <span class="token punctuation">{<!-- --></span>
   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       <span class="token keyword">return</span> <span class="token string">"《狂神说Java》"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>逻辑理解 ：应用启动起来，dubbo就会扫描指定的包下带有@component注解的服务，将它发布在指定的注册中心中！</strong></p> 
<p><strong>④先访问8001端口，再查看dubbo-admin，发布成功</strong></p> 
<p><img src="https://images2.imgbox.com/80/0c/w1bxYtmc_o.png" alt="在这里插入图片描述"></p> 
<p><strong>注意：需要先启动zookeeper，并能访问到dubbo的UI界面后，才启动项目，如果启动和访问UI界面失败，注意端口号问题。实在解决不了，多重启几次zookeeper和dubbo的UI</strong></p> 
<p><img src="https://images2.imgbox.com/64/48/79s6qjIq_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_501"></a>③服务消费者</h4> 
<p><strong>①导入依赖，和之前的依赖一样；</strong></p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!--dubbo--&gt;</span>
<span class="token comment">&lt;!-- Dubbo Spring Boot Starter --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.dubbo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dubbo-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--zookeeper--&gt;</span>
<span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.github.sgroschupf/zkclient --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.sgroschupf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zkclient<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 引入zookeeper --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-framework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.12.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-recipes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.12.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>zookeeper<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.14<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!--排除这个slf4j-log4j12--&gt;</span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
           <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>②配置参数</strong></p> 
<p><img src="https://images2.imgbox.com/05/ae/ibVdBK74_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-properties">#当前应用名字
dubbo.application.name=consumer-server
#注册中心地址
dubbo.registry.address=zookeeper://127.0.0.1:2181
</code></pre> 
<p><strong>③本来正常步骤是需要将服务提供者的接口打包，然后用pom文件导入，我们这里使用简单的方式，直接将服务的接口拿过来，路径必须保证正确，即和服务提供者相同；</strong></p> 
<p><img src="https://images2.imgbox.com/b2/ad/fu2O8j90_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ec/10/ZGfSsKZA_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/6c/af/DlTNXwHj_o.png" alt="在这里插入图片描述"></p> 
<p><strong>④完善消费者的服务类</strong></p> 
<p><img src="https://images2.imgbox.com/7d/cd/8wlqq7Dq_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>kuang<span class="token punctuation">.</span>consumer<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>kuang<span class="token punctuation">.</span>provider<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">TicketService</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>dubbo<span class="token punctuation">.</span>config<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Reference</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span> <span class="token comment">//注入到容器中</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{<!-- --></span>

   <span class="token annotation punctuation">@Reference</span> <span class="token comment">//远程引用指定的服务，他会按照全类名进行匹配，看谁给注册中心注册了这个全类名</span>
   <span class="token class-name">TicketService</span> ticketService<span class="token punctuation">;</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bugTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token class-name">String</span> ticket <span class="token operator">=</span> ticketService<span class="token punctuation">.</span><span class="token function">getTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在注册中心买到"</span><span class="token operator">+</span>ticket<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p><strong>⑤测试类编写；</strong></p> 
<p><img src="https://images2.imgbox.com/99/a9/QmilFtrN_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConsumerServerApplicationTests</span> <span class="token punctuation">{<!-- --></span>

   <span class="token annotation punctuation">@Autowired</span>
   <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Test</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

       userService<span class="token punctuation">.</span><span class="token function">bugTicket</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p><strong>访问8002端口</strong></p> 
<p><img src="https://images2.imgbox.com/db/2f/Vejhw8at_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>启动测试</p> 
</blockquote> 
<p><strong>1. 开启zookeeper</strong></p> 
<p><strong>2. 打开dubbo-admin实现监控【可以不用做】</strong></p> 
<p><strong>3. 开启服务者</strong></p> 
<p><strong>4. 消费者消费测试，结果：</strong></p> 
<p><img src="https://images2.imgbox.com/12/9f/wJsNPteI_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_643"></a>④总结</h4> 
<p><strong>①报错：</strong></p> 
<p><img src="https://images2.imgbox.com/72/60/3oeB5XwZ_o.png" alt="在这里插入图片描述"></p> 
<p><strong>服务提供者的扫描指定包下的服务的路径，一定要对</strong></p> 
<p><strong>②@Reference</strong></p> 
<p>​ <strong>使用这个属性，可以让两个模块的上的service层相同名文件的同步绑定，操作一样</strong>。如：<strong>这个注解可以使服务的消费者可以远程调用引入服务提供者的接口方法</strong></p> 
<p><strong>在dubbo+springboot 使用时，在需要调用的服务接口上使用 @Reference 即可直接调用远程服务</strong></p> 
<p><strong>SpringBoot学习(八)-SpringBoot + Dubbo + zookeeper 的学习笔记到此完结，笔者归纳、创作不易，大佬们给个3连再起飞吧</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9febacc62b4335580eb7192527643033/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Spring Boot项目 目录结构</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aa05b4610ed29428dc2952cb832a8e74/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Kubernetes 学习总结（43）—— Kubernetes 从提交 deployment 到 pod 运行的全过程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>