<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>codevs 2190 有理逼近  题解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="codevs 2190 有理逼近  题解" />
<meta property="og:description" content="题目描述 Description 对于一个素数P，我们可以用一系列有理分数(分子、分母都是不大于N的自然数)来逼近sqrt(p)，例如P=2，N=5的时候：1/1&lt;5/4&lt;4/3&lt;sqrt(2)&lt;3/2&lt;5/3&lt;2/1。 任　务　： 给定P、N（N&gt;sqrt(p)），求X、Y、U、V，使x/y&lt;sqrt(p)&lt;u/v且x/y与sqrt(p)之间、sqrt(p)与u/v之间都不能再插入满足题意的有理分数。
输入描述 Input Description 输入文件的第一行为P、N
输出描述 Output Description 输出文件只有一行，格式为“X/Y U/V”。注意，答案必须是既约的，也就是说分子、分母的最大公约数必须等于1。
样例输入 Sample Input 样例1： 2 5 样例2： 5 100
样例输出 Sample Output 样例1： 4/3 3/2
样例2： 38/17 85/38
数据范围及提示 Data Size &amp; Hint P、N&lt;30000
&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43; 说实话，这道题真的把我唬住了……
刚看到这道题，感觉明显的二分，可是如何分？怎么分？是一个问题。
于是我想我没可以枚举分子和分母，然后找最接近的，然而 P、N&lt;30000这的把我唬住了…
…尽管我看见了gcd（分子，分母）=1这个提示，但是我还是没有去写它（事实证明，这题很水，暴力可以a）
在时间竟破的情况下，我选择了放弃……
中午评测完以后，我发现，我们可以枚举固定区间内的分子，因为分母是从2-n的，那些远大于 分母*(p）^(1/2)的分子
是没有必要去枚举的。所以我们可以取(p）^(1/2)的上界和下界（即上下取整）这样我们可以把每一个分母的分子限制
在一个很小的区间内，再加上gcd（分子，分母）=1，还有二分枚举答案，这题就可以过了。
由于本人不会写二分，所以，我开了一个大根堆，一个小根堆来维护。看来，今晚还要补习一下二分了！！
注意：有可能输出如1/1或者2/1的情况！！
&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;代码如下&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;&#43;
&lt;span style=&#34;font-family:Comic Sans MS;font-size:18px;&#34;&gt;#include &lt;iostream&gt; #include &lt;cstdio&gt; #include &lt;algorithm&gt; #include &lt;cmath&gt; #include &lt;queue&gt; #include &lt;vector&gt; using namespace std; struct node1{ int son,mot;double w; bool operator &lt; (const node1 &amp;a) const { return w&lt;a." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/225bfc2ed70c9db07c2572149cae02a1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2014-10-21T20:02:21+08:00" />
<meta property="article:modified_time" content="2014-10-21T20:02:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">codevs 2190 有理逼近  题解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<div class="panel panel-default" style=""> 
 <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
  <span style=""><span style="font-family:Comic Sans MS; font-size:18px"><br> 题目描述 <small style="">Description</small></span></span> 
 </div> 
 <div class="panel-body" style="padding:15px"> 
  <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">对于一个素数P，我们可以用一系列有理分数(分子、分母都是不大于N的自然数)来逼近sqrt(p)，例如P=2，N=5的时候：1/1&lt;5/4&lt;4/3&lt;sqrt(2)&lt;3/2&lt;5/3&lt;2/1。<br style=""> 任　务　：<br style=""> 给定P、N（N&gt;sqrt(p)），求X、Y、U、V，使x/y&lt;sqrt(p)&lt;u/v且x/y与sqrt(p)之间、sqrt(p)与u/v之间都不能再插入满足题意的有理分数。</span></p> 
 </div> 
</div> 
<div class="panel panel-default" style=""> 
 <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
  <span style=""><span style="font-family:Comic Sans MS; font-size:18px">输入描述 <small style="">Input Description</small></span></span> 
 </div> 
 <div class="panel-body" style="padding:15px"> 
  <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">输入文件的第一行为P、N</span></p> 
 </div> 
</div> 
<div class="panel panel-default" style=""> 
 <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
  <span style=""><span style="font-family:Comic Sans MS; font-size:18px">输出描述 <small style="">Output Description</small></span></span> 
 </div> 
 <div class="panel-body" style="padding:15px"> 
  <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">输出文件只有一行，格式为“X/Y U/V”。注意，答案必须是既约的，也就是说分子、分母的最大公约数必须等于1。</span></p> 
 </div> 
</div> 
<div class="panel panel-default" style=""> 
 <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
  <span style=""><span style="font-family:Comic Sans MS; font-size:18px">样例输入 <small style="">Sample Input</small></span></span> 
 </div> 
 <div class="panel-body" style="padding:15px"> 
  <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">样例1：<br style=""> 2 5<br style=""> 样例2：<br style=""> 5 100</span></p> 
 </div> 
</div> 
<div class="panel panel-default" style=""> 
 <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
  <span style=""><span style="font-family:Comic Sans MS; font-size:18px">样例输出 <small style="">Sample Output</small></span></span> 
 </div> 
 <div class="panel-body" style="padding:15px"> 
  <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">样例1：<br style=""> 4/3 3/2</span></p> 
  <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">样例2：<br style=""> 38/17 85/38</span></p> 
 </div> 
</div> 
<div class="panel panel-default" style=""> 
 <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
  <span style=""><span style="font-family:Comic Sans MS; font-size:18px">数据范围及提示 <small style="">Data Size &amp; Hint</small></span></span> 
 </div> 
 <div class="panel-body" style="padding:15px"> 
  <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px"> P、N&lt;30000</span></p> 
 </div> 
</div> 
<span style="font-family:Comic Sans MS; font-size:18px">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span> 
<p></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px">说实话，这道题真的把我唬住了……</span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px">刚看到这道题，感觉明显的二分，可是如何分？怎么分？是一个问题。</span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px">于是我想我没可以枚举分子和分母，然后找最接近的，然而<span style="color:rgb(88,102,110); line-height:20px"> P、N&lt;30000这的把我唬住了…</span></span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px"><span style="color:rgb(88,102,110); line-height:20px">…尽管我看见了gcd（分子，分母）=1这个提示，但是我还是没有去写它（事实证明，这题很水，暴力可以a）</span></span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px; color:#58666e"><span style="line-height:20px">在时间竟破的情况下，我选择了放弃……</span></span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px; color:#58666e"><span style="line-height:20px">中午评测完以后，我发现，我们可以枚举固定区间内的分子，因为分母是从2-n的，那些远大于 分母*(p）^(1/2)的分子</span></span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px; color:#58666e"><span style="line-height:20px">是没有必要去枚举的。所以我们可以取<span style="color:rgb(88,102,110); line-height:20px">(p）^(1/2)的上界和下界（即上下取整）这样我们可以把每一个分母的分子限制</span></span></span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px; color:#58666e"><span style="line-height:20px"><span style="color:rgb(88,102,110); line-height:20px">在一个很小的区间内，再加上<span style="color:rgb(88,102,110); line-height:20px">gcd（分子，分母）=1，还有二分枚举答案，这题就可以过了。</span></span></span></span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px">由于本人不会写二分，所以，我开了一个大根堆，一个小根堆来维护。看来，今晚还要补习一下二分了！！</span></p> 
<p><span style="font-family:Comic Sans MS; font-size:24px; color:#ff0000">注意：有可能输出如1/1或者2/1的情况！！</span></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px">+++++++++++++++++++++代码如下++++++++++++++++++++++++++++++++++++</span></p> 
<p></p> 
<pre><code class="language-cpp">&lt;span style="font-family:Comic Sans MS;font-size:18px;"&gt;#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;algorithm&gt;
#include &lt;cmath&gt;
#include &lt;queue&gt;
#include &lt;vector&gt;
using namespace std;
struct node1{
	int son,mot;double w;
	bool operator &lt; (const node1 &amp;a) const 
    {  
       return w&lt;a.w; 
    }
}a[3001000];
int n,q;
double p;
struct node2{
	int son,mot;double w;
	bool operator &lt; (const node2 &amp;a) const 
    {  
       return w&gt;a.w;//×îÐ¡ÖµÓÅÏÈ   
    }  
}b[3001000];
priority_queue&lt;node1&gt;q1;
priority_queue&lt;node2&gt;q2;

int gcd(int x,int y)
{
	return y?gcd(y,x%y):x;
}

int main()
{
	cin&gt;&gt;q&gt;&gt;n;p=sqrt(q);
	int l=floor(sqrt(q)),r=ceil(sqrt(q));
	for(int k=1,kk=1,i=2;i&lt;=n;i++)
	  for(int j=i*l;j&lt;=min(n,i*r);j++)
	  if(gcd(i,j)==1)
	  {
	  	double jj,ii,z;
	  	jj=(double)j;
	  	ii=(double)i;
	  	z=jj/ii;//cout&lt;&lt;&lt;&lt;endl;
		if(z&lt;p)
		{
			a[k].son=j;
			a[k].mot=i;
			a[k].w=z;
			q1.push(a[k]);k++;
		}
		if(z&gt;p)
		{
			b[kk].son=j;
			b[kk].mot=i;
			b[kk].w=z;
			q2.push(b[kk]);kk++;
		}
		
	  }
	if(!q1.empty())
	cout&lt;&lt;q1.top().son&lt;&lt;"/"&lt;&lt;q1.top().mot&lt;&lt;" ";
	else cout&lt;&lt;l&lt;&lt;"/"&lt;&lt;1&lt;&lt;" ";
	
	if(!q2.empty())
	cout&lt;&lt;q2.top().son&lt;&lt;"/"&lt;&lt;q2.top().mot;
	else cout&lt;&lt;r&lt;&lt;"/"&lt;&lt;1;
	
	return 0;
}&lt;/span&gt;</code></pre> 
<span style="font-family:Comic Sans MS; font-size:18px"><br> <br> </span> 
<p></p> 
<p><span style="font-family:Comic Sans MS; font-size:18px"><br> </span></p> 
<div style="top:0px"> 
 <div class="panel panel-default" style=""> 
  <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
   <span style=""><span style="font-family:Comic Sans MS; font-size:18px">题目描述 <small style="">Description</small></span></span> 
  </div> 
  <div class="panel-body" style="padding:15px"> 
   <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">对于一个素数P，我们可以用一系列有理分数(分子、分母都是不大于N的自然数)来逼近sqrt(p)，例如P=2，N=5的时候：1/1&lt;5/4&lt;4/3&lt;sqrt(2)&lt;3/2&lt;5/3&lt;2/1。<br style=""> 任　务　：<br style=""> 给定P、N（N&gt;sqrt(p)），求X、Y、U、V，使x/y&lt;sqrt(p)&lt;u/v且x/y与sqrt(p)之间、sqrt(p)与u/v之间都不能再插入满足题意的有理分数。</span></p> 
  </div> 
 </div> 
 <div class="panel panel-default" style=""> 
  <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
   <span style=""><span style="font-family:Comic Sans MS; font-size:18px">输入描述 <small style="">Input Description</small></span></span> 
  </div> 
  <div class="panel-body" style="padding:15px"> 
   <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">输入文件的第一行为P、N</span></p> 
  </div> 
 </div> 
 <div class="panel panel-default" style=""> 
  <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
   <span style=""><span style="font-family:Comic Sans MS; font-size:18px">输出描述 <small style="">Output Description</small></span></span> 
  </div> 
  <div class="panel-body" style="padding:15px"> 
   <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">输出文件只有一行，格式为“X/Y U/V”。注意，答案必须是既约的，也就是说分子、分母的最大公约数必须等于1。</span></p> 
  </div> 
 </div> 
 <div class="panel panel-default" style=""> 
  <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
   <span style=""><span style="font-family:Comic Sans MS; font-size:18px">样例输入 <small style="">Sample Input</small></span></span> 
  </div> 
  <div class="panel-body" style="padding:15px"> 
   <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">样例1：<br style=""> 2 5<br style=""> 样例2：<br style=""> 5 100</span></p> 
  </div> 
 </div> 
 <div class="panel panel-default" style=""> 
  <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
   <span style=""><span style="font-family:Comic Sans MS; font-size:18px">样例输出 <small style="">Sample Output</small></span></span> 
  </div> 
  <div class="panel-body" style="padding:15px"> 
   <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">样例1：<br style=""> 4/3 3/2</span></p> 
   <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px">样例2：<br style=""> 38/17 85/38</span></p> 
  </div> 
 </div> 
 <div class="panel panel-default" style=""> 
  <div class="panel-heading font-bold" style="border-color:rgb(237,241,242); background-color:rgb(246,248,248); font-weight:700; padding:10px 15px; border-bottom-width:1px; border-bottom-style:solid; color:rgb(51,51,51)"> 
   <span style=""><span style="font-family:Comic Sans MS; font-size:18px">数据范围及提示 <small style="">Data Size &amp; Hint</small></span></span> 
  </div> 
  <div class="panel-body" style="padding:15px"> 
   <p style="margin-top:0px; margin-bottom:10px"><span style="font-family:Comic Sans MS; font-size:18px"> P、N&lt;30000</span></p> 
  </div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f67503d6db49cea27eedb00eb0faab05/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ArcCatalog连接ArcSDE连接报：unable to create new database connection file,permission is denied</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f590d9126ed65cf75dda5957b3970a3c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">系统级性能分析工具 — Perf</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>