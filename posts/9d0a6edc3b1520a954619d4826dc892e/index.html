<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FFmpeg源码分析：avcodec_find_decoder()查找解码器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="FFmpeg源码分析：avcodec_find_decoder()查找解码器" />
<meta property="og:description" content="FFmpeg提供两种方式查找解码器，通过codecId查找avcodec_find_decoder()与通过名字查找avcodec_find_decoder_by_name()。同样地，也提供两种方式查找编码器，通过codecId查找avcodec_find_encoder()与通过名字查找avcodec_find_encoder_by_name()。源码位于libavcodec/allcodecs.c中。
查找编解码器过程如下图所示：
一、查找解码器 1、avcodec_find_decoder
通codecId来查找解码器的方法如下：
AVCodec *avcodec_find_decoder(enum AVCodecID id) { return find_codec(id, av_codec_is_decoder); } 函数体只有一行代码，就是调用find_codec()来查找，第一个参数为codecId，第二个参数为属于解码器类型，具体方法如下：
static AVCodec *find_codec(enum AVCodecID id, int (*x)(const AVCodec *)) { const AVCodec *p, *experimental = NULL; void *i = 0; id = remap_deprecated_codec_id(id); while ((p = av_codec_iterate(&amp;i))) { if (!x(p)) continue; if (p-&gt;id == id) { if (p-&gt;capabilities &amp; AV_CODEC_CAP_EXPERIMENTAL &amp;&amp; !experimental) { experimental = p; } else return (AVCodec*)p; } } return (AVCodec*)experimental; } 可以看到，是通过while循环调用av_codec_iterate()来迭代遍历，获取AVCodec，然后用id判断是否相等。如果id相等，就返回对应的AVCodec。我们来看下av_codec_iterate()的实现：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9d0a6edc3b1520a954619d4826dc892e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-24T16:21:41+08:00" />
<meta property="article:modified_time" content="2022-09-24T16:21:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">FFmpeg源码分析：avcodec_find_decoder()查找解码器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>FFmpeg提供两种方式查找解码器，通过codecId查找avcodec_find_decoder()与通过名字查找avcodec_find_decoder_by_name()。同样地，也提供两种方式查找编码器，通过codecId查找avcodec_find_encoder()与通过名字查找avcodec_find_encoder_by_name()。源码位于libavcodec/allcodecs.c中。</p> 
<p>查找编解码器过程如下图所示：<br> <img src="https://images2.imgbox.com/0e/13/I8jlG93h_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_5"></a>一、查找解码器</h3> 
<p><strong>1、avcodec_find_decoder</strong><br> 通codecId来查找解码器的方法如下：</p> 
<pre><code class="prism language-c">AVCodec <span class="token operator">*</span><span class="token function">avcodec_find_decoder</span><span class="token punctuation">(</span><span class="token keyword">enum</span> <span class="token class-name">AVCodecID</span> id<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">find_codec</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> av_codec_is_decoder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>函数体只有一行代码，就是调用find_codec()来查找，第一个参数为codecId，第二个参数为属于解码器类型，具体方法如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">static</span> AVCodec <span class="token operator">*</span><span class="token function">find_codec</span><span class="token punctuation">(</span><span class="token keyword">enum</span> <span class="token class-name">AVCodecID</span> id<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> AVCodec <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> AVCodec <span class="token operator">*</span>p<span class="token punctuation">,</span> <span class="token operator">*</span>experimental <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token operator">*</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
 
    id <span class="token operator">=</span> <span class="token function">remap_deprecated_codec_id</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token function">av_codec_iterate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">x</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>id <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>p<span class="token operator">-&gt;</span>capabilities <span class="token operator">&amp;</span> AV_CODEC_CAP_EXPERIMENTAL <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>experimental<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                experimental <span class="token operator">=</span> p<span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span>
                <span class="token keyword">return</span> <span class="token punctuation">(</span>AVCodec<span class="token operator">*</span><span class="token punctuation">)</span>p<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">return</span> <span class="token punctuation">(</span>AVCodec<span class="token operator">*</span><span class="token punctuation">)</span>experimental<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看到，是通过while循环调用av_codec_iterate()来迭代遍历，获取AVCodec，然后用id判断是否相等。如果id相等，就返回对应的AVCodec。我们来看下av_codec_iterate()的实现：</p> 
<pre><code class="prism language-c"><span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">av_codec_init_static</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> codec_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>codec_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span>init_static_data<span class="token punctuation">)</span>
            codec_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">init_static_data</span><span class="token punctuation">(</span><span class="token punctuation">(</span>AVCodec<span class="token operator">*</span><span class="token punctuation">)</span>codec_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token keyword">const</span> AVCodec <span class="token operator">*</span><span class="token function">av_codec_iterate</span><span class="token punctuation">(</span><span class="token keyword">void</span> <span class="token operator">*</span><span class="token operator">*</span>opaque<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token class-name">uintptr_t</span> i <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">uintptr_t</span><span class="token punctuation">)</span><span class="token operator">*</span>opaque<span class="token punctuation">;</span>
    <span class="token keyword">const</span> AVCodec <span class="token operator">*</span>c <span class="token operator">=</span> codec_list<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
 
    <span class="token function">ff_thread_once</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>av_codec_static_init<span class="token punctuation">,</span> av_codec_init_static<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">if</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span>
        <span class="token operator">*</span>opaque <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
    <span class="token keyword">return</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>2、avcodec_find_decoder_by_name</strong><br> 通过名字查找解码器的方法如下：</p> 
<pre><code class="prism language-c">AVCodec <span class="token operator">*</span><span class="token function">avcodec_find_decoder_by_name</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">find_codec_by_name</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> av_codec_is_decoder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>主要调用find_codec_by_name()，第一个参数为解码器名字，第二个参数为属于解码器类型，具体方法如下：</p> 
<pre><code class="prism language-c"><span class="token keyword">static</span> AVCodec <span class="token operator">*</span><span class="token function">find_codec_by_name</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">,</span> <span class="token keyword">int</span> <span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">const</span> AVCodec <span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">void</span> <span class="token operator">*</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> AVCodec <span class="token operator">*</span>p<span class="token punctuation">;</span>
 
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>name<span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
 
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>p <span class="token operator">=</span> <span class="token function">av_codec_iterate</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">x</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">strcmp</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> p<span class="token operator">-&gt;</span>name<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>AVCodec<span class="token operator">*</span><span class="token punctuation">)</span>p<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
 
    <span class="token keyword">return</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看到，是通过while循环调用av_codec_iterate()来迭代遍历，获取AVCodec，然后用名字进行比较。如果匹配成功，就返回对应的AVCodec。</p> 
<h3><a id="_95"></a>二、查找编码器</h3> 
<p><strong>1、avcodec_find_encoder</strong><br> 通过codecId查找编码器的方法如下：</p> 
<pre><code class="prism language-c">AVCodec <span class="token operator">*</span><span class="token function">avcodec_find_encoder</span><span class="token punctuation">(</span><span class="token keyword">enum</span> <span class="token class-name">AVCodecID</span> id<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">find_codec</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> av_codec_is_encoder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>2、avcodec_find_encoder_by_name</strong><br> 通过名字查找编码器的方法如下：</p> 
<pre><code class="prism language-c">AVCodec <span class="token operator">*</span><span class="token function">avcodec_find_encoder_by_name</span><span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span>name<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token function">find_codec_by_name</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> av_codec_is_encoder<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="id_118"></a>三、编解码器列表与id</h3> 
<p><strong>1、 编解码器列表</strong><br> 编解码器列表来自libavcodec/allcodecs.c，有声明全局变量(详情可查看：avcodec注册与介绍)：</p> 
<pre><code class="prism language-c"><span class="token keyword">extern</span> AVCodec ff_flv_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_flv_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_hevc_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mpeg4_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mpeg4_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_msmpeg4v1_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_msmpeg4v2_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_msmpeg4v2_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_msmpeg4v3_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_msmpeg4v3_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vp8_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vp9_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmv1_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmv1_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmv2_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmv2_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmv3_decoder<span class="token punctuation">;</span>
 
<span class="token comment">/* audio codecs */</span>
<span class="token keyword">extern</span> AVCodec ff_aac_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_aac_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ac3_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ac3_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_amrnb_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_amrwb_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ape_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_eac3_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_eac3_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_flac_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_flac_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mp3_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_opus_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_opus_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_truehd_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_truehd_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vorbis_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vorbis_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmav1_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmav1_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmav2_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_wmav2_decoder<span class="token punctuation">;</span>
 
<span class="token comment">/* PCM codecs */</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_alaw_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_alaw_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_mulaw_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_mulaw_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s8_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s8_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s16le_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s16le_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s16le_planar_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s16le_planar_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s24le_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s24le_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s32le_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s32le_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s64le_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_s64le_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_u8_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pcm_u8_decoder<span class="token punctuation">;</span>
 
<span class="token comment">/* ADPCM codecs */</span>
<span class="token keyword">extern</span> AVCodec ff_adpcm_ima_wav_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_adpcm_ima_wav_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_adpcm_ms_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_adpcm_ms_decoder<span class="token punctuation">;</span>
 
<span class="token comment">/* subtitles */</span>
<span class="token keyword">extern</span> AVCodec ff_ssa_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ssa_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ass_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ass_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_movtext_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_movtext_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_pgssub_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_sami_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_srt_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_srt_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_subrip_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_subrip_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ttml_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_webvtt_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_webvtt_decoder<span class="token punctuation">;</span>
 
<span class="token comment">/* external libraries */</span>
<span class="token keyword">extern</span> AVCodec ff_aac_at_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_aac_at_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_ac3_at_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_amr_nb_at_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_eac3_at_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mp3_at_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libaom_av1_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libdav1d_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libfdk_aac_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libfdk_aac_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libmp3lame_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libopencore_amrnb_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libopencore_amrwb_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libopus_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libopus_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libshine_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libspeex_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libspeex_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libvorbis_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libvorbis_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libvpx_vp8_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libvpx_vp8_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libvpx_vp9_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libvpx_vp9_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libwebp_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libx264_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libx265_encoder<span class="token punctuation">;</span>
 
<span class="token comment">/* hwaccel hooks only, so prefer external decoders */</span>
<span class="token keyword">extern</span> AVCodec ff_av1_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_av1_cuvid_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_av1_qsv_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libopenh264_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_libopenh264_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_cuvid_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_nvenc_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_omx_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_qsv_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_v4l2m2m_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_vaapi_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_h264_videotoolbox_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_hevc_mediacodec_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_hevc_nvenc_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_hevc_qsv_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_hevc_v4l2m2m_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_hevc_vaapi_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_hevc_videotoolbox_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mp3_mf_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mpeg4_cuvid_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mpeg4_mediacodec_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mpeg4_omx_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_mpeg4_v4l2m2m_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vp9_cuvid_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vp9_mediacodec_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vp9_qsv_decoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vp9_vaapi_encoder<span class="token punctuation">;</span>
<span class="token keyword">extern</span> AVCodec ff_vp9_qsv_encoder<span class="token punctuation">;</span>
</code></pre> 
<p>2、编解码器id<br> 编解码器id是个枚举类型AVCodecId，定义位于libavcodec/codec_id.h(有删减)：</p> 
<pre><code class="prism language-c"><span class="token keyword">enum</span> <span class="token class-name">AVCodecID</span> <span class="token punctuation">{<!-- --></span>
    AV_CODEC_ID_NONE<span class="token punctuation">,</span>
 
    <span class="token comment">/* video codecs */</span>
    AV_CODEC_ID_MPEG1VIDEO<span class="token punctuation">,</span>
    AV_CODEC_ID_MPEG2VIDEO<span class="token punctuation">,</span> <span class="token comment">///&lt; preferred ID for MPEG-1/2 video decoding</span>
    AV_CODEC_ID_MPEG4<span class="token punctuation">,</span>
    AV_CODEC_ID_MSMPEG4V1<span class="token punctuation">,</span>
    AV_CODEC_ID_MSMPEG4V2<span class="token punctuation">,</span>
    AV_CODEC_ID_MSMPEG4V3<span class="token punctuation">,</span>
    AV_CODEC_ID_WMV1<span class="token punctuation">,</span>
    AV_CODEC_ID_WMV2<span class="token punctuation">,</span>
    AV_CODEC_ID_FLV1<span class="token punctuation">,</span>
    AV_CODEC_ID_H264<span class="token punctuation">,</span>
    AV_CODEC_ID_PNG<span class="token punctuation">,</span>
    AV_CODEC_ID_VC1<span class="token punctuation">,</span>
    AV_CODEC_ID_WMV3<span class="token punctuation">,</span>
    AV_CODEC_ID_AVS<span class="token punctuation">,</span>
    AV_CODEC_ID_JPEG2000<span class="token punctuation">,</span>
    AV_CODEC_ID_GIF<span class="token punctuation">,</span>
    AV_CODEC_ID_VP8<span class="token punctuation">,</span>
    AV_CODEC_ID_VP9<span class="token punctuation">,</span>
    AV_CODEC_ID_HEVC<span class="token punctuation">,</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AV_CODEC_ID_H265</span> <span class="token expression">AV_CODEC_ID_HEVC</span></span>
    AV_CODEC_ID_VVC<span class="token punctuation">,</span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">AV_CODEC_ID_H266</span> <span class="token expression">AV_CODEC_ID_VVC</span></span>
    AV_CODEC_ID_AV1<span class="token punctuation">,</span>
 
    <span class="token comment">/* various PCM "codecs" */</span>
    AV_CODEC_ID_PCM_S16LE <span class="token operator">=</span> <span class="token number">0x10000</span><span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S16BE<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S8<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_U8<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_MULAW<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_ALAW<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S32LE<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S24LE<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S24DAUD<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S16LE_PLANAR<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_F32LE<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_F64LE<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S8_PLANAR<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S24LE_PLANAR<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S32LE_PLANAR<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_S64LE <span class="token operator">=</span> <span class="token number">0x10800</span><span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_F16LE<span class="token punctuation">,</span>
    AV_CODEC_ID_PCM_F24LE<span class="token punctuation">,</span>
 
    <span class="token comment">/* various ADPCM codecs */</span>
    AV_CODEC_ID_ADPCM_IMA_QT <span class="token operator">=</span> <span class="token number">0x11000</span><span class="token punctuation">,</span>
    AV_CODEC_ID_ADPCM_IMA_WAV<span class="token punctuation">,</span>
    AV_CODEC_ID_ADPCM_MS<span class="token punctuation">,</span>
 
    AV_CODEC_ID_ADPCM_AFC <span class="token operator">=</span> <span class="token number">0x11800</span><span class="token punctuation">,</span>
    AV_CODEC_ID_ADPCM_IMA_OKI<span class="token punctuation">,</span>
 
    <span class="token comment">/* AMR */</span>
    AV_CODEC_ID_AMR_NB <span class="token operator">=</span> <span class="token number">0x12000</span><span class="token punctuation">,</span>
    AV_CODEC_ID_AMR_WB<span class="token punctuation">,</span>
 
    <span class="token comment">/* audio codecs */</span>
    AV_CODEC_ID_MP2 <span class="token operator">=</span> <span class="token number">0x15000</span><span class="token punctuation">,</span>
    AV_CODEC_ID_MP3<span class="token punctuation">,</span> <span class="token comment">///&lt; preferred ID for decoding MPEG audio layer 1, 2 or 3</span>
    AV_CODEC_ID_AAC<span class="token punctuation">,</span>
    AV_CODEC_ID_AC3<span class="token punctuation">,</span>
    AV_CODEC_ID_VORBIS<span class="token punctuation">,</span>
    AV_CODEC_ID_WMAV1<span class="token punctuation">,</span>
    AV_CODEC_ID_WMAV2<span class="token punctuation">,</span>
    AV_CODEC_ID_FLAC<span class="token punctuation">,</span>
    AV_CODEC_ID_APE<span class="token punctuation">,</span>
    AV_CODEC_ID_EAC3<span class="token punctuation">,</span>
    AV_CODEC_ID_TRUEHD<span class="token punctuation">,</span>
    AV_CODEC_ID_OPUS<span class="token punctuation">,</span>
 
    <span class="token comment">/* subtitle codecs */</span>
    AV_CODEC_ID_DVD_SUBTITLE <span class="token operator">=</span> <span class="token number">0x17000</span><span class="token punctuation">,</span>
    AV_CODEC_ID_DVB_SUBTITLE<span class="token punctuation">,</span>
    AV_CODEC_ID_SSA<span class="token punctuation">,</span>
    AV_CODEC_ID_MOV_TEXT<span class="token punctuation">,</span>
    AV_CODEC_ID_SRT<span class="token punctuation">,</span>
 
    AV_CODEC_ID_MICRODVD   <span class="token operator">=</span> <span class="token number">0x17800</span><span class="token punctuation">,</span>
    AV_CODEC_ID_SAMI<span class="token punctuation">,</span>
    AV_CODEC_ID_SUBRIP<span class="token punctuation">,</span>
    AV_CODEC_ID_WEBVTT<span class="token punctuation">,</span>
    AV_CODEC_ID_ASS<span class="token punctuation">,</span>
    AV_CODEC_ID_TTML<span class="token punctuation">,</span>
 
    AV_CODEC_ID_TTF <span class="token operator">=</span> <span class="token number">0x18000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a43cf2afa726e568433d663b1f07b147/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">一个公司如果某个岗位常年招人，说明这家公司就是有问题的？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/66581983c47fbfbf75353a6823aa6952/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">BUUCTF admin</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>