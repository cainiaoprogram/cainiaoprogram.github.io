<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux 服务器 cuda安装 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux 服务器 cuda安装" />
<meta property="og:description" content="Linux 服务器 cuda安装 1. 驱动安装 驱动下载地址：
https://www.nvidia.com/Download/index.aspx 安装方法：
sudo sh 文件名 遇到问题，X服务没关闭问题：
ERROR: You appear to be running an X server; please exit X before installing. For further details, please see the section INSTALLING THE NVIDIA DRIVER in the README available on the Linux driver download page at www.nvidia.com. 解决办法：
在上面的安装指令后加 -no-x-check
仍然报错：
ERROR: Unable to find the development tool `cc` in your path; please make sure that you have the package &#39;gcc&#39; installed." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/031798f8237a149b6a90bb1050f98f7c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-13T14:04:24+08:00" />
<meta property="article:modified_time" content="2023-12-13T14:04:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux 服务器 cuda安装</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Linux__cuda_0"></a>Linux 服务器 cuda安装</h2> 
<h3><a id="1__2"></a>1. 驱动安装</h3> 
<p>驱动下载地址：</p> 
<pre><code>https://www.nvidia.com/Download/index.aspx
</code></pre> 
<p>安装方法：</p> 
<pre><code>sudo sh 文件名
</code></pre> 
<p>遇到问题，X服务没关闭问题：</p> 
<pre><code class="prism language-Python">ERROR: You appear to be running an X server; please exit X before            
         installing.  For further details, please see the section INSTALLING   
         THE NVIDIA DRIVER in the README available on the Linux driver         
         download page at www.nvidia.com.
</code></pre> 
<p>解决办法：</p> 
<p>在上面的安装指令后加 -no-x-check</p> 
<p>仍然报错：</p> 
<pre><code class="prism language-Python">ERROR: Unable to find the development tool `cc` in your path; please make sure that you have the package 'gcc' installed.  If gcc is installed on your system, then please check that `cc` is in your PATH. 
</code></pre> 
<p>没有gcc，安装</p> 
<pre><code class="prism language-Python">sudo yum install gcc

gcc --version #检查是否安装成功
</code></pre> 
<p>仍然报错：</p> 
<pre><code class="prism language-Python">ERROR: Unable to find the kernel source tree for the currently running kernel.  Please make sure you have installed the kernel source files for your kernel and that they are properly configured; on Red Hat      
         Linux systems, for example, be sure you have the 'kernel-source' or 'kernel-devel' RPM installed.  If you know the correct kernel source files are installed, you may specify the kernel source path with   
         the '--kernel-source-path' command line option.
</code></pre> 
<p>安装内核：</p> 
<pre><code class="prism language-Python">sudo yum install kernel-devel-$(uname -r)
</code></pre> 
<p>再次执行安装指令：</p> 
<pre><code class="prism language-Python">sudo sh NVIDIA-Linux-x86_64-535.129.03.run -no-x-check

#安装成功后使用
nvidia-smi检查是否成功
</code></pre> 
<h3><a id="2_Cuda__66"></a>2. Cuda 安装</h3> 
<h4><a id="21__68"></a>2.1 安装</h4> 
<p>cuda安装链接：</p> 
<pre><code class="prism language-Python">https://developer.nvidia.com/cuda-toolkit-archive
</code></pre> 
<p>选择如下配置：</p> 
<p><img src="https://images2.imgbox.com/76/55/MLzegsMv_o.png" alt="在这里插入图片描述"></p> 
<p>下载安装指令：</p> 
<pre><code class="prism language-Python">wget https://developer.download.nvidia.com/compute/cuda/12.2.2/local_installers/cuda_12.2.2_535.104.05_linux.run
sudo sh cuda_12.2.2_535.104.05_linux.run
</code></pre> 
<p><img src="https://images2.imgbox.com/27/09/SY7LtiqW_o.png" alt="在这里插入图片描述"></p> 
<p>安装失败：</p> 
<pre><code>Installation failed. See log at /var/log/cuda-installer.log for details.

[INFO]: Driver not installed.
[INFO]: Checking compiler version...
[INFO]: gcc location: /bin/gcc

[INFO]: gcc version: gcc 版本 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC) 

[INFO]: Initializing menu
[INFO]: nvidia-fs.setKOVersion(2.17.5)
[INFO]: Setup complete
[INFO]: Installing: Driver
[INFO]: Installing: 535.104.05
[INFO]: Executing NVIDIA-Linux-x86_64-535.104.05.run --ui=none --no-questions --accept-license --disable-nouveau --no-cc-version-check --install-libglvnd  2&gt;&amp;1
[INFO]: Finished with code: 256
[ERROR]: Install of driver component failed. Consult the driver log at /var/log/nvidia-installer.log for more details.
[ERROR]: Install of 535.104.05 failed, quitting
</code></pre> 
<p>原因是我们之前已经安装过显卡驱动了，因此在如下界面时要将Driver中的X按一下回车去掉，否则安装失败</p> 
<p><img src="https://images2.imgbox.com/2e/fa/bW3WlQ2q_o.png" alt="在这里插入图片描述"></p> 
<p>显示下面样例就是安装成功了：</p> 
<p><img src="https://images2.imgbox.com/d7/6d/dDvn8zO7_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="22__123"></a>2.2 配置环境变量</h4> 
<p>配置命令：</p> 
<pre><code>vim ~/.bashrc
export CUDA_HOME=/usr/local/cuda-12.2# 在上图中有显示位置
export LD_LIBRARY_PATH=${CUDA_HOME}/lib64 
export PATH=${CUDA_HOME}/bin:${PATH}
source ~/.bashrc
nvcc -V
</code></pre> 
<h3><a id="3_cuDNN_138"></a>3. cuDNN安装</h3> 
<p>地址：</p> 
<pre><code>https://developer.nvidia.com/rdp/cudnn-archive
</code></pre> 
<p>选择对应的cuda版本，下载可能很慢，需要一些方法</p> 
<pre><code>xz -d  cudnn-linux-x86_64-8.9.5.30_cuda12-archive.tar.xz
tar xvf cudnn-linux-x86_64-8.9.5.30_cuda12-archive.tar

# 将文件mv一下
mv /root/cu122/cudnn-linux-x86_64-8.9.5.30_cuda12-archive/include/* /usr/local/cuda-12.2/include/
mv /root/cu122/cudnn-linux-x86_64-8.9.5.30_cuda12-archive/lib/* /usr/local/cuda-12.2/lib64/

#查看cudnn版本：
cat /usr/local/cuda/include/cudnn_version.h
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f7cd9ef6f3ba043d4b29193fb6ed310f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSK6环境搭建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f3bcc53cb6aec9ffd8365b4c344a1779/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ChatGPT变懒原因：正在给自己放寒假！已被网友测出</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>