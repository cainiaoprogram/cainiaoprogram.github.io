<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>laravel-admin搭建后台管理系统 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="laravel-admin搭建后台管理系统" />
<meta property="og:description" content="最近有个搭建后台管理系统的需求，这里选用的是在laravel框架下的laravel-admin扩展，安装步骤如下：
#安装laravel，项目名称temp composer create-project --prefer-dist laravel/laravel temp &#34;5.5.*&#34; 如果提示没安装composer，可执行下述命令，并将其移到指定目录下即可。
# 下载composer.phar curl -sS https://getcomposer.org/installer | php # 移动composer.phar到环境变量，可直接运行 mv composer.phar /usr/bin/composer 再重新执行composer安装命令，执行该命令后需要一些时间，之后会在当前目录下生产temp文件夹，进入该目录后会看到一个.env文件，打开并编辑数据库配置：
DB_HOST=127.0.0.1 DB_PORT=3306 DB_DATABASE=temp DB_USERNAME=root DB_PASSWORD=123456 然后再依次运行一下命令：
#安装laravel-admin扩展 composer require encore/laravel-admin #发布资源 php artisan vendor:publish --provider=&#34;Encore\Admin\AdminServiceProvider&#34; #安装 php artisan admin:install 在执行第三步安装时候，碰到了如下问题：
SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; max key length is 767 bytes (SQL: alter table `users` add unique `users_email_unique`(`email`)) ，这时只需在如下文件中添加这么一句：
use Illuminate\Support\Facades\Schema;//新添加 class AppServiceProvider extends ServiceProvider { public function boot() { Schema::defaultStringLength(191);//新添加 } ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3d75dbb3de0eacad59b6e8952dd383ae/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-26T09:12:32+08:00" />
<meta property="article:modified_time" content="2022-09-26T09:12:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">laravel-admin搭建后台管理系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近有个搭建后台管理系统的需求，这里选用的是在laravel框架下的laravel-admin扩展，安装步骤如下：</p> 
<pre><code class="language-bash">#安装laravel，项目名称temp
composer create-project --prefer-dist laravel/laravel temp "5.5.*"</code></pre> 
<p>如果提示没安装composer，可执行下述命令，并将其移到指定目录下即可。</p> 
<pre><code># 下载composer.phar 
curl -sS https://getcomposer.org/installer | php
# 移动composer.phar到环境变量，可直接运行 
mv composer.phar /usr/bin/composer</code></pre> 
<p>再重新执行<strong>composer</strong>安装命令，执行该命令后需要一些时间，之后会在当前目录下生产temp文件夹，进入该目录后会看到一个.env文件，打开并编辑数据库配置：</p> 
<pre><code>DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=temp
DB_USERNAME=root
DB_PASSWORD=123456</code></pre> 
<p>然后再依次运行一下命令：</p> 
<pre><code>#安装laravel-admin扩展
composer require encore/laravel-admin
#发布资源
php artisan vendor:publish --provider="Encore\Admin\AdminServiceProvider"
#安装
php artisan admin:install</code></pre> 
<p>在执行第三步安装时候，碰到了如下问题：</p> 
<pre><code class="language-bash">SQLSTATE[42000]: Syntax error or access violation: 1071 Specified key was too long; 
max key length is 767 bytes (SQL: alter table `users` add unique `users_email_unique`(`email`))</code></pre> 
<p>，这时只需在如下文件中添加这么一句：</p> 
<pre><code class="language-php">use Illuminate\Support\Facades\Schema;//新添加

class AppServiceProvider extends ServiceProvider
{
    public function boot()
    {
        Schema::defaultStringLength(191);//新添加
    }
    ...
}</code></pre> 
<p>然后删掉temp库下新建的两张表migrations和user表，此时不删除也没关系，待重新执行php artisan admin:install命令时就会提示这两张表已经存在了。</p> 
<p>接下来既可以直接执行php artisan serve，也可以在nginx中配置，我是在nginx配置的，配置内容如下：</p> 
<pre><code>server {
        listen       8888;
        server_name  temp.com.cn;
        root         /usr/home/www/temp/public;
        index index.php index.html index.htm;
        client_max_body_size 8M;
        client_body_buffer_size 128k;
        fastcgi_intercept_errors on;

        location / {
            try_files $uri $uri/ /index.php?$query_string;
        }
        location ~ \.php$ {
            fastcgi_pass 127.0.0.1:9000;
            fastcgi_index index.php;
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
            include fastcgi_params;
        }
        error_page 404 /404.html;
            location = /40x.html {
        }
        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
}</code></pre> 
<p>配置好后重新启动nginx。补充一下，如果是在windows下搭建，应该不会遇到下面这个问题。由于我这里是在测试服务器中搭建的，这时如果在浏览器中打开的话，会报404错误，如下：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/53/e9/wzecDvd5_o.png"></p> 
<p>这地方是因为项目目录下的storage文件夹不可写造成的，这里可以将该文件夹权限改成777即可。</p> 
<p>至此，在浏览器充再次打开就跳出登录页，输入admin:admin就可以啦！</p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ea3840f60a88b251b363f5f35185ee14/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">鸿蒙开发实例 ｜ 分布式涂鸦</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b2e84dfaa2952d11ae15b323d992c2af/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【计算机网络】数据链路层（二）—— 差错控制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>