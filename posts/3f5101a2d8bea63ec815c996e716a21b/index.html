<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【打造家庭服务器系列01】无桌面版Ubuntu 22.04 连接wifi - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【打造家庭服务器系列01】无桌面版Ubuntu 22.04 连接wifi" />
<meta property="og:description" content="一、背景 最近有一台笔记本一直放在哪没用了，就想着拿来做个服务器用吧。
如何安装Ubuntu系统，大家可以百度搜索一下很多。
主要分三步：
制作U盘启动盘（推荐使用rufus工具，轻量方便）设置BIOS引导 （开机按delete键或 F2 或 F12等）安装系统（直接安装，注意lvm选项，磁盘空间小建议关闭） 二、连接WiFi 2.1 使用network-manager 通过查询资料发现，可以通过安装network-manager 工具，使用nmtui 来连接WiFi。
nmtui 你将会看见如下图形，通过点击Edit a connection 来连接一个WiFi。
2.2 配置netplan 文件连接WiFi 上面说了第一种方式，但是如果一开始就没有安装network-manager 工具，然后笔记本还无法插网线，那咋办呢？
所以此时就需要通过配置netplan下的yaml文件来指定WiFi
1. 查看WiFi网卡名称
输入ip addr 查看网卡名称，lo 是回环地址接口，下面的wlps20就是我们WiFi网卡名称了。
# 输入 ip a 和 ip addr 效果是一样的。 root@rion-mi:~# ip addr 1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever inet6 ::1/128 scope host valid_lft forever preferred_lft forever 2: wlp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000 link/ether f8:94:c2:eb:cf:58 brd ff:ff:ff:ff:ff:ff inet 192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3f5101a2d8bea63ec815c996e716a21b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-11T13:58:27+08:00" />
<meta property="article:modified_time" content="2023-03-11T13:58:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【打造家庭服务器系列01】无桌面版Ubuntu 22.04 连接wifi</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>一、背景</h2> 
<p>最近有一台笔记本一直放在哪没用了，就想着拿来做个服务器用吧。<br> 如何安装Ubuntu系统，大家可以百度搜索一下很多。<br> 主要分三步：</p> 
<ol><li>制作U盘启动盘（推荐使用rufus工具，轻量方便）</li><li>设置BIOS引导 （开机按delete键或 F2 或 F12等）</li><li>安装系统（直接安装，注意lvm选项，磁盘空间小建议关闭）</li></ol> 
<h2><a id="WiFi_8"></a>二、连接WiFi</h2> 
<h3><a id="21_networkmanager_9"></a>2.1 使用network-manager</h3> 
<p>通过查询资料发现，可以通过安装<code>network-manager</code> 工具，使用<code>nmtui</code> 来连接WiFi。</p> 
<pre><code>nmtui
</code></pre> 
<p>你将会看见如下图形，通过点击Edit a connection 来连接一个WiFi。<br> <img src="https://images2.imgbox.com/a9/7c/DBXX6XY5_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22_netplan_WiFi_17"></a>2.2 配置netplan 文件连接WiFi</h3> 
<p>上面说了第一种方式，但是如果一开始就没有安装<code>network-manager</code> 工具，然后笔记本还无法插网线，那咋办呢？<br> 所以此时就需要通过配置netplan下的yaml文件来指定WiFi</p> 
<p><strong>1. 查看WiFi网卡名称</strong><br> 输入<code>ip addr</code> 查看网卡名称，<code>lo</code> 是回环地址接口，下面的wlps20就是我们WiFi网卡名称了。</p> 
<pre><code># 输入 ip a 和 ip addr 效果是一样的。
root@rion-mi:~# ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host
       valid_lft forever preferred_lft forever
2: wlp2s0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether f8:94:c2:eb:cf:58 brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.199/24 brd 192.168.1.255 scope global wlp2s0
       valid_lft forever preferred_lft forever
</code></pre> 
<p><strong>2. 配置yaml文件</strong></p> 
<pre><code>root@rion-mi:~# cd /etc/netplan/
# 注意查看自己的yaml文件名称
root@rion-mi:/etc/netplan# ls -l
total 8
-rw------- 1 root root 387 Mar 10 15:25 00-installer-config-wifi.yaml
-rw-r--r-- 1 root root  74 Mar 10  2023 00-installer-config.yaml
root@rion-mi:/etc/netplan# cat 00-installer-config-wifi.yaml
# This is the network config written by 'subiquity'
network:
  version: 2
  wifis:
    wlp2s0:         # 此处为WiFi网卡名称
      #dhcp4: true  # dhcp代理，若想配置动态IP则取消注释这行，并把后续的6行都注释。
      addresses: [192.168.1.199/24]    # 固定IP
      routes:            # 配置路由，以前叫gateway4，现在官方推荐使用routes这种写法。
        - to: default    # 设置为默认网关
          via: 192.168.1.1      # 网关IP地址
      nameservers:              # 域名dns
        addresses: [192.168.1.1, 8.8.8.8]  
      optional: true
      access-points:            # 指向WiFi
        "ChinaNet-CWnJ":        # ssid 名称
          password: "ceuywunh"  # wifi密码
</code></pre> 
<p>如何查询WiFi的<code>ssid</code>呢？已window11为例，window10 也差不多。<br> <img src="https://images2.imgbox.com/c5/dc/3SMKbYAM_o.png" alt="在这里插入图片描述"></p> 
<p><strong>3. 应用WiFi配置文件</strong></p> 
<pre><code>netplan apply
</code></pre> 
<p><strong>4. 查看IP和测试网络</strong></p> 
<pre><code># 如果没有ifconfig 可以使用 ip a 查看IP地址
ifconfig

ping www.baidu.com 
</code></pre> 
<h2><a id="ssh_84"></a>三、ssh连接服务器</h2> 
<p><strong>1. 连接ssh</strong><br> 测试IP地址没问题后，通过ssh连接服务器</p> 
<pre><code>ssh rion@192.168.1.199

# 切换root用户
sudo su
</code></pre> 
<p><strong>2. 添加ssh-key 到服务器实现免密登录</strong><br> 本机生成ssh私钥</p> 
<pre><code># Windows 系统可以使用git工具生成
ssh-keygen
cat ~/.ssh/id_rsa.pub
</code></pre> 
<p>添加公钥到服务器</p> 
<pre><code>vim ~/.ssh/authorized_keys
</code></pre> 
<p>后续直接连接服务器即可，不需要再输入密码了。</p> 
<blockquote> 
 <p>详细使用：https://blog.csdn.net/m0_56966142/article/details/115974312</p> 
</blockquote> 
<blockquote> 
 <p>下一篇：【打造家庭服务器系列02】笔记本安装Ubuntu后的一些配置<br> 跳转链接 -&gt; <a href="https://blog.csdn.net/m0_56966142/article/details/129462205">【打造家庭服务器系列02】笔记本安装Ubuntu后的一些配置</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/448c1d58c6e0021b8d0a3750e64671c4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">@JsonFormat与@DateTimeFormat注解的使用。JsonFormat 相差8小时问题。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3c1f49765f6a2f2bf7038f106dedfa04/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CVPR 2023 | GigaGAN：效果不差Stable Diffusion，速度远优！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>