<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Deep Learning】空洞卷积(膨胀卷积)解析 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Deep Learning】空洞卷积(膨胀卷积)解析" />
<meta property="og:description" content="前言：在阅读SSD网络的时候，看到conv6层中pad=6，且有个参数dilation: 6。在平时没怎么注意到整个参数，今天对其进行记录。
layer { name: &#34;fc6&#34; type: &#34;Convolution&#34; bottom: &#34;pool5&#34; top: &#34;fc6&#34; param { lr_mult: 1.0 decay_mult: 1.0 } param { lr_mult: 2.0 decay_mult: 0.0 } convolution_param { num_output: 1024 pad: 6 kernel_size: 3 weight_filler { type: &#34;xavier&#34; } bias_filler { type: &#34;constant&#34; value: 0.0 } dilation: 6 } } caffe源码中conv_layer.cpp关于空洞卷积的计算：
const int kernel_extent = dilation_data[i] * (kernel_shape_data[i] - 1) &#43; 1; caffe源码中caffe.proto关于dilation的定义：
// Factor used to dilate the kernel, (implicitly) zero-filling the resulting // holes." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a6e4947947ee50f67a0807edd1e949b6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-10-12T11:53:04+08:00" />
<meta property="article:modified_time" content="2019-10-12T11:53:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Deep Learning】空洞卷积(膨胀卷积)解析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> 前言：在阅读SSD网络的时候，看到conv6层中pad=6，且有个参数dilation: 6。在平时没怎么注意到整个参数，今天对其进行记录。</p> 
<pre class="has"><code class="language-bash">layer {
  name: "fc6"
  type: "Convolution"
  bottom: "pool5"
  top: "fc6"
  param {
    lr_mult: 1.0
    decay_mult: 1.0
  }
  param {
    lr_mult: 2.0
    decay_mult: 0.0
  }
  convolution_param {
    num_output: 1024
    pad: 6
    kernel_size: 3
    weight_filler {
      type: "xavier"
    }
    bias_filler {
      type: "constant"
      value: 0.0
    }
    dilation: 6
  }
}</code></pre> 
<p> caffe源码中<strong>conv_layer.cpp</strong>关于空洞卷积的计算：</p> 
<pre class="has"><code class="language-cpp">const int kernel_extent = dilation_data[i] * (kernel_shape_data[i] - 1) + 1;</code></pre> 
<p><strong>caffe源码中caffe.proto关于dilation的定义：</strong></p> 
<pre class="has"><code class="language-cpp">  // Factor used to dilate the kernel, (implicitly) zero-filling the resulting
  // holes. (Kernel dilation is sometimes referred to by its use in the
  // algorithme à trous from Holschneider et al. 1987.)
  repeated uint32 dilation = 18; // The dilation; defaults to 1</code></pre> 
<p>下面以卷积核3*3为例，膨胀系数为2，那么卷积核膨胀之后，卷积核的单边尺寸就变成了2*(3-1)+1，即卷积核的尺寸变成了5*5。</p> 
<p> </p> 
<p>              <img alt="" class="has" height="252" src="https://images2.imgbox.com/b6/c2/PkRHPdxM_o.png" width="500"></p> 
<p> <strong>卷积核膨胀是将卷积核扩张到膨胀尺度约束的尺度中，并将原卷积核没有占用的区域填充零</strong></p> 
<p>上图中，卷积核由3*3膨胀到了5*5，从图中可以看到，膨胀后的卷积核中空洞的部分填充了一些0，在caffe源码中具体的膨胀操作是在img2col中实现。</p> 
<p>1）下面分析一下<em>膨胀系数</em>与<em>卷积核膨胀</em>的关系，首先回顾卷积核膨胀公式：</p> 
<p><span style="color:#3399ea;"><em><strong>               </strong></em></span>膨胀后卷积核尺寸 = 膨胀系数 * (原始卷积核尺寸 - 1) + 1</p> 
<p>2）卷积核的膨胀系数等于卷积核高和宽方向的扩张倍数，将上式中1移到等式左侧：</p> 
<p>               膨胀的卷积核尺寸 - 1 =<span style="color:#3399ea;"> <strong>膨胀系数</strong></span> * (原始卷积核尺寸 - 1)</p> 
<p>3）原始卷积核在膨胀后，元素间的空洞间隔与膨胀系数的关系：</p> 
<p>               元素间隔 = 膨胀系数 - 1</p> 
<p>例如：上图中膨胀系数为2，那么膨胀后卷积核元素间的空洞间隔为2-1=1.</p> 
<p><span style="color:#f33b45;"><strong>空洞卷积的作用：</strong></span></p> 
<p>①：使输出变得更稠密。</p> 
<p>②：在不增加计算量的情况下，扩大了卷积核视野（卷积核尺寸变大）。<br>  </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/678b38d4de6f647691cebbd6e6f2e1de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vsftpd 启动异常 (code=exited, status=2)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c55233b65c98bfbb0464bcdbc50e0ee7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">es 索引导出导入（elasticsearch-dump） docker方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>