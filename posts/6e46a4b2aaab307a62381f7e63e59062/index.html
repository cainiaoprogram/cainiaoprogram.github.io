<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【QT】计算器-模拟实现 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【QT】计算器-模拟实现" />
<meta property="og:description" content="目录
准本工作
槽函数实现
数字按键槽函数
退格槽函数
运算符 按键 槽函数
等号槽函数
初始化及计算器页面布局
整体代码
widget.h
widget.cpp
准本工作 工程创建：
计算器模拟实现需求分析：
样式预览：
🎠主要功能：能够完成 加减乘除 运算。
🎠其他：
●文本框显示运算数以及运算结果。
●提供退格键，功能是清除已经输入到文本框中的数字。
由上述需求分析及预览效果图可知，我们需要显示的内容大致分为一下几个部分：
1.显示数据的文本框 和 删除数据的 “&lt;” 按钮。
2.【0，9】 数字按钮显示。
3.【加 减 乘 除 等号】按钮显示。
●整体结构预览
槽函数实现 数字按键槽函数 函数介绍：
●QLineEdit是一个单行文本编辑控件。通过该控件可以 编辑单行文本，比如撤销、恢复、剪切、粘贴以及拖放等。
常用方法包括：
sender()是Qbject类的方法，如果在由信号激活的插槽中调用该函数，返回指向发送信号的对象的指针，否则返回0，该指针仅在从该对象的线程上下文调用此函数的槽执行期间有效。
代码实现：
void Widget::num_pressed() { //提取按键信息 QPushButton* xbt = static_cast&lt;QPushButton*&gt;( sender() ); //显示数据再文本框中 lcd-&gt;setText( lcd-&gt;text().append(xbt-&gt;text()) ); } 退格槽函数 代码实现：
void Widget::del_num() { QString str = lcd-&gt;text(); str." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6e46a4b2aaab307a62381f7e63e59062/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-08T16:16:02+08:00" />
<meta property="article:modified_time" content="2024-01-08T16:16:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【QT】计算器-模拟实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%87%86%E6%9C%AC%E5%B7%A5%E4%BD%9C-toc" style="margin-left:0px;"><a href="#%E5%87%86%E6%9C%AC%E5%B7%A5%E4%BD%9C" rel="nofollow">准本工作</a></p> 
<p id="%E6%A7%BD%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0-toc" style="margin-left:0px;"><a href="#%E6%A7%BD%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0" rel="nofollow">槽函数实现</a></p> 
<p id="%E6%95%B0%E5%AD%97%E6%8C%89%E9%94%AE%E6%A7%BD%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#%E6%95%B0%E5%AD%97%E6%8C%89%E9%94%AE%E6%A7%BD%E5%87%BD%E6%95%B0" rel="nofollow">数字按键槽函数</a></p> 
<p id="%E9%80%80%E6%A0%BC%E6%A7%BD%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#%E9%80%80%E6%A0%BC%E6%A7%BD%E5%87%BD%E6%95%B0" rel="nofollow">退格槽函数</a></p> 
<p id="%E8%BF%90%E7%AE%97%E7%AC%A6%20%E6%8C%89%E9%94%AE%20%E6%A7%BD%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#%E8%BF%90%E7%AE%97%E7%AC%A6%20%E6%8C%89%E9%94%AE%20%E6%A7%BD%E5%87%BD%E6%95%B0" rel="nofollow">运算符 按键 槽函数</a></p> 
<p id="%E7%AD%89%E5%8F%B7%E6%A7%BD%E5%87%BD%E6%95%B0-toc" style="margin-left:40px;"><a href="#%E7%AD%89%E5%8F%B7%E6%A7%BD%E5%87%BD%E6%95%B0" rel="nofollow">等号槽函数</a></p> 
<p id="%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E8%AE%A1%E7%AE%97%E5%99%A8%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80-toc" style="margin-left:40px;"><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E8%AE%A1%E7%AE%97%E5%99%A8%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80" rel="nofollow">初始化及计算器页面布局</a></p> 
<p id="%E6%95%B4%E4%BD%93%E4%BB%A3%E7%A0%81-toc" style="margin-left:0px;"><a href="#%E6%95%B4%E4%BD%93%E4%BB%A3%E7%A0%81" rel="nofollow">整体代码</a></p> 
<p id="widget.h-toc" style="margin-left:40px;"><a href="#widget.h" rel="nofollow">widget.h</a></p> 
<p id="widget.cpp-toc" style="margin-left:40px;"><a href="#widget.cpp" rel="nofollow">widget.cpp</a></p> 
<hr id="hr-toc"> 
<h2>准本工作</h2> 
<p>工程创建：</p> 
<p class="img-center"><img alt="" height="177" src="https://images2.imgbox.com/de/b0/GDjsmVzF_o.png" width="162"></p> 
<p>计算器模拟实现需求分析：</p> 
<p>样式预览：<br><img alt="" height="503" src="https://images2.imgbox.com/59/e1/GwOmZboL_o.png" width="794"><br> 🎠主要功能：能够完成 加减乘除 运算。<br> 🎠其他：<br> ●文本框显示运算数以及运算结果。<br> ●提供退格键，功能是清除已经输入到文本框中的数字。</p> 
<p>由上述需求分析及预览效果图可知，我们需要显示的内容大致分为一下几个部分：<br> 1.显示数据的文本框 和 删除数据的 “&lt;” 按钮。<br> 2.【0，9】 数字按钮显示。<br> 3.【加 减 乘 除 等号】按钮显示。</p> 
<p>●整体结构预览</p> 
<p class="img-center"><img alt="" height="654" src="https://images2.imgbox.com/6e/5c/orKFEr72_o.png" width="457"></p> 
<h2 id="%E6%A7%BD%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0">槽函数实现</h2> 
<h3 id="%E6%95%B0%E5%AD%97%E6%8C%89%E9%94%AE%E6%A7%BD%E5%87%BD%E6%95%B0">数字按键槽函数</h3> 
<p>函数介绍：<br> ●QLineEdit是一个单行文本编辑控件。通过该控件可以 编辑单行文本，比如撤销、恢复、剪切、粘贴以及拖放等。</p> 
<p>常用方法包括：</p> 
<p class="img-center"><img alt="" height="169" src="https://images2.imgbox.com/5c/29/T6FyZvyz_o.png" width="456"></p> 
<p>sender()是Qbject类的方法，如果在由信号激活的插槽中调用该函数，返回指向发送信号的对象的指针，否则返回0，该指针仅在从该对象的线程上下文调用此函数的槽执行期间有效。</p> 
<p>代码实现：</p> 
<div> 
 <pre><code class="hljs">void Widget::num_pressed()
{
    //提取按键信息
    QPushButton* xbt = static_cast&lt;QPushButton*&gt;( sender() );

    //显示数据再文本框中
    lcd-&gt;setText( lcd-&gt;text().append(xbt-&gt;text()) );
}</code></pre> 
</div> 
<h3 id="%E9%80%80%E6%A0%BC%E6%A7%BD%E5%87%BD%E6%95%B0">退格槽函数</h3> 
<p>代码实现：</p> 
<div> 
 <pre><code class="hljs">void Widget::del_num()
{
    QString str = lcd-&gt;text();
    str.chop(1);//一次删除1个数据
    lcd-&gt;setText(str);
}</code></pre> 
</div> 
<h3 id="%E8%BF%90%E7%AE%97%E7%AC%A6%20%E6%8C%89%E9%94%AE%20%E6%A7%BD%E5%87%BD%E6%95%B0">运算符 按键 槽函数</h3> 
<p><br> 代码实现：</p> 
<div> 
 <pre><code class="hljs">void Widget::get_op()
{
    //提取按键
    QPushButton* xbt = static_cast&lt;QPushButton*&gt;( sender() );
    //保存符号
    this-&gt;op = xbt-&gt;text().toStdString().c_str()[0];
    //提取文本框中的第一个运算数
    this-&gt;num1 = lcd-&gt;text().toInt();
    //是否把运算符显示再文本框中
    //lcd-&gt;setText( lcd-&gt;text().append(xbt-&gt;text()) );

    //文本框内容清除
    lcd-&gt;clear();
}</code></pre> 
</div> 
<p></p> 
<h3 id="%E7%AD%89%E5%8F%B7%E6%A7%BD%E5%87%BD%E6%95%B0">等号槽函数</h3> 
<p>函数介绍：<br> 代码实现：</p> 
<div> 
 <pre><code class="hljs">void Widget::calculate()
{
    //获取到第二个运算数
    num2 = lcd-&gt;text().toInt();
    //2. 计算
    int answer = 0;
    switch (op) {
    case '+':
        answer = num1 + num2;
        break;
    case '-':
        answer = num1 - num2;
        break;
    case '*':
        answer = num1 * num2;
        break;
    case '/':
        answer = num1 / num2;
        break;
    default:
        break;
    }
    //把运算结果显示
    lcd-&gt;setText(QString::number(answer));
 }</code></pre> 
</div> 
<p></p> 
<h3 id="%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E8%AE%A1%E7%AE%97%E5%99%A8%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80">初始化及计算器页面布局</h3> 
<p>QHBoxLayout：水平布局，在水平方向上排列控件，即：左右排列。<br> QVBoxLayout：垂直布局，在垂直方向上排列控件，即：上下排列。</p> 
<pre><code class="hljs">    QHBoxLayout* hbox = new QHBoxLayout;//水平布局
    hbox-&gt;addWidget(lcd);
    hbox-&gt;addWidget(chop);</code></pre> 
<p class="img-center"><img alt="" height="100" src="https://images2.imgbox.com/1b/a5/5BnC42bc_o.png" width="800"></p> 
<p>QGridLayout 类将控件放置到网格中布局。</p> 
<pre><code class="hljs">    QGridLayout* gbox = new QGridLayout;

    int i = 0;
    //0-8  三行三列
    for(int y=0; y&lt;3; y++)
    {
        for(int x=0; x&lt;3; x++)
        {
            gbox-&gt;addWidget(num[i++], y, x);
        }
    }
    //数字9 + - * / =
    gbox-&gt;addWidget(num[9],3,0);
    gbox-&gt;addWidget(add, 0, 3);
    gbox-&gt;addWidget(sub, 1, 3);
    gbox-&gt;addWidget(mul, 2, 3);
    gbox-&gt;addWidget(div, 3, 1);
    //等号占两个位置
    gbox-&gt;addWidget(calc, 3, 2, 1, 2);</code></pre> 
<p class="img-center"><img alt="" height="172" src="https://images2.imgbox.com/4d/c5/Mgcqx1lM_o.png" width="792"></p> 
<h2 id="%E6%95%B4%E4%BD%93%E4%BB%A3%E7%A0%81">整体代码</h2> 
<h3 id="widget.h">widget.h</h3> 
<div> 
 <pre><code class="hljs">#ifndef WIDGET_H
#define WIDGET_H

#include &lt;QWidget&gt;
#include &lt;QPushButton&gt;
#include &lt;QLineEdit&gt;


QT_BEGIN_NAMESPACE
namespace Ui { class Widget; }
QT_END_NAMESPACE

class Widget : public QWidget
{
    Q_OBJECT
//槽函数
public slots:
    //按键槽函数
    void num_pressed(void);
    //删除槽函数
    void del_num(void);
    //运算符按键槽
    void get_op(void);
    //计算槽函数
    void calculate();
public:
    Widget(QWidget *parent = nullptr);
    ~Widget();
//控件声明
public:
    QLineEdit* lcd;//单行文本编辑控件

    QPushButton* num[10];//存储0-9的数组
    QPushButton* add;//加法按钮
    QPushButton* sub;//减法按钮
    QPushButton* mul;//乘法按钮
    QPushButton* div;//除法按钮
    QPushButton* calc;//等号按钮
    QPushButton* chop;//删除按钮

    char op;
    int num1;
    int num2;
private:
    Ui::Widget *ui;
};

#endif // WIDGET_H
</code></pre> 
</div> 
<h3 id="widget.cpp">widget.cpp</h3> 
<div> 
 <pre><code class="hljs">#include "widget.h"
#include "ui_widget.h"
#include &lt;QHBoxLayout&gt;
#include &lt;QVBoxLayout&gt;
#include &lt;QGridLayout&gt;
#include &lt;QDebug&gt;
#include &lt;ostream&gt;

Widget::Widget(QWidget *parent)
    : QWidget(parent)
    , ui(new Ui::Widget)
{
    ui-&gt;setupUi(this);
    //1.控件初始化
    //文本框 &amp;&amp; 删除按钮
    lcd = new QLineEdit;
    chop = new QPushButton("&lt;");
    //数字按钮
    for(int i = 0; i&lt;10;++i)
    {
        num[i] = new QPushButton(QString::number(i));
    }
    //运算符按钮
    add = new QPushButton("+");
    sub = new QPushButton("-");
    mul = new QPushButton("*");
    div = new QPushButton("/");
    calc = new QPushButton("=");
    //2.布局
    QHBoxLayout* hbox = new QHBoxLayout;//水平布局
    hbox-&gt;addWidget(lcd);
    hbox-&gt;addWidget(chop);

    QGridLayout* gbox = new QGridLayout;

    int i = 0;
    //0-8  三行三列
    for(int y=0; y&lt;3; y++)
    {
        for(int x=0; x&lt;3; x++)
        {
            gbox-&gt;addWidget(num[i++], y, x);
        }
    }
    //数字9 + - * / =
    gbox-&gt;addWidget(num[9],3,0);
    gbox-&gt;addWidget(add, 0, 3);
    gbox-&gt;addWidget(sub, 1, 3);
    gbox-&gt;addWidget(mul, 2, 3);
    gbox-&gt;addWidget(div, 3, 1);
    //等号占两个位置
    gbox-&gt;addWidget(calc, 3, 2, 1, 2);

    QVBoxLayout *mainbox = new QVBoxLayout;
    mainbox-&gt;addLayout(hbox);
    mainbox-&gt;addLayout(gbox);
    setLayout(mainbox);

    //3.按钮点击 和 槽函数关联起来
    for(int i = 0;i&lt;10;++i)
    {
        connect(num[i],&amp;QPushButton::clicked,this,&amp;Widget::num_pressed);
    }
    //删除文本行内容
    connect(chop,&amp;QPushButton::clicked,this,&amp;Widget::del_num);
    //算数运算
    connect(calc,&amp;QPushButton::clicked,this,&amp;Widget::calculate);

    connect(add,&amp;QPushButton::clicked,this,&amp;Widget::get_op);
    connect(sub,&amp;QPushButton::clicked,this,&amp;Widget::get_op);
    connect(mul,&amp;QPushButton::clicked,this,&amp;Widget::get_op);
    connect(div,&amp;QPushButton::clicked,this,&amp;Widget::get_op);

}

//按键槽函数
void Widget::num_pressed()
{
    //提取按键信息
    QPushButton* xbt = static_cast&lt;QPushButton*&gt;( sender() );

    //显示数据再文本框中
    lcd-&gt;setText( lcd-&gt;text().append(xbt-&gt;text()) );
}
//删除数字槽函数
void Widget::del_num()
{
    QString str = lcd-&gt;text();
    qDebug() &lt;&lt;str;
    str.chop(1);//一次删除1个数据
    lcd-&gt;setText(str);
}
//获取运算符槽函数
void Widget::get_op()
{
    //提取按键
    QPushButton* xbt = static_cast&lt;QPushButton*&gt;( sender() );
    //保存符号
    this-&gt;op = xbt-&gt;text().toStdString().c_str()[0];
    //提取文本框中的第一个运算数
    this-&gt;num1 = lcd-&gt;text().toInt();
    //是否把运算符显示再文本框中
    //lcd-&gt;setText( lcd-&gt;text().append(xbt-&gt;text()) );

    //文本框内容清除
    lcd-&gt;clear();
}
//运算槽函数
void Widget::calculate()
{
    //获取到第二个运算数
    num2 = lcd-&gt;text().toInt();
    //2. 计算
    int answer = 0;
    switch (op) {
    case '+':
        answer = num1 + num2;
        break;
    case '-':
        answer = num1 - num2;
        break;
    case '*':
        answer = num1 * num2;
        break;
    case '/':
        answer = num1 / num2;
        break;
    default:
        break;
    }
    //把运算结果显示
    lcd-&gt;setText(QString::number(answer));
 }
Widget::~Widget()
{
    delete ui;
}


</code></pre> 
</div> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1fa21129407e7665f5257db5b2f52d43/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MFC结合GDI&#43;</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f521751f9f02609131392f523f8c7b2a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">猫头虎博主第9期赠书活动:《YOLO目标检测》计算机AI视觉实战YOLO人工智能目标检测与跟踪图像处理深度学习图像检测书籍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>