<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>plantUml活动图(新语法) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="plantUml活动图(新语法)" />
<meta property="og:description" content="活动图(新语法) 当前活动图(activity diagram)的语法有诸多限制和缺点，比如代码难以维护。
所以从V7947开始提出一种全新的、更好的语法格式和软件实现供用户使用(beta版)。
就像序列图一样，新的软件实现的另一个优点是它不再依赖于Graphviz。
新的语法将会替换旧的语法。然而考虑到兼容性，旧的语法仍被能够使用以确保向前兼容。
但是我们鼓励用户使用新的语法格式。
简单活动图 活动标签(activity label)以冒号开始，以分号结束。
文本格式支持creole wiki语法。
活动默认安装它们定义的顺序就行连接。
@startuml :Hello world; :This is on defined on several **lines**; @enduml 开始/结束 你可以使用关键字start和stop表示图示的开始和结束。
@startuml start :Hello world; :This is on defined on several **lines**; stop @enduml 也可以使用 end 关键字。
@startuml start :Hello world; :This is on defined on several **lines**; end @enduml 转存失败重新上传取消
条件语句 在图示中可以使用关键字if，then和else设置分支测试。标注文字则放在括号中。
@startuml start if (Graphviz installed?) then (yes) :process all\ndiagrams; else (no) :process only __sequence__ and __activity__ diagrams; endif stop @enduml 转存失败重新上传取消" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2bfc4c46e3d4b1e61e75b2d6783529b0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-27T15:37:41+08:00" />
<meta property="article:modified_time" content="2020-03-27T15:37:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">plantUml活动图(新语法)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>活动图(新语法)</h2> 
<p><a href="https://plantuml.com/zh/activity-diagram-legacy" rel="nofollow">当前活动图(activity diagram)</a>的语法有诸多限制和缺点，比如代码难以维护。</p> 
<p>所以从V7947开始提出一种全新的、更好的语法格式和软件实现供用户使用(beta版)。</p> 
<p>就像序列图一样，新的软件实现的另一个优点是它不再依赖于Graphviz。</p> 
<p>新的语法将会替换旧的语法。然而考虑到兼容性，旧的语法仍被能够使用以确保<em>向前兼容</em>。</p> 
<p>但是我们鼓励用户使用新的语法格式。</p> 
<p> </p> 
<p><a id="2"></a></p> 
<p> </p> 
<h3>简单活动图</h3> 
<p>活动标签(activity label)以冒号开始，以分号结束。</p> 
<p>文本格式支持<a href="https://plantuml.com/zh/creole" rel="nofollow">creole wiki</a>语法。</p> 
<p>活动默认安装它们定义的顺序就行连接。</p> 
<pre><code>@startuml
:Hello world;
:This is on defined on
several **lines**;
@enduml
</code></pre> 
<p><img alt="" height="125" src="https://images2.imgbox.com/d1/02/NJbbu9b2_o.png" width="155"></p> 
<p><a id="3"></a></p> 
<p> </p> 
<h3>开始/结束</h3> 
<p>你可以使用关键字<code>start</code>和<code>stop</code>表示图示的开始和结束。</p> 
<p> </p> 
<pre><code>@startuml
start
:Hello world;
:This is on defined on
several **lines**;
stop
@enduml
</code></pre> 
<p><img alt="" height="207" src="https://images2.imgbox.com/cf/f6/m9UQICgl_o.png" width="155"></p> 
<p>也可以使用 <code>end</code> 关键字。</p> 
<pre><code>@startuml
start
:Hello world;
:This is on defined on
several **lines**;
end
@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-nzgoslxb.webp" class="preview" src="https://images2.imgbox.com/ff/6e/qCKJl0bt_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/65/1d/5hsJWgre_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="205" src="https://images2.imgbox.com/f8/c6/KfCi5LVE_o.png" width="155"></p> 
<p><a id="4"></a></p> 
<p> </p> 
<h3>条件语句</h3> 
<p>在图示中可以使用关键字<code>if</code>，<code>then</code>和<code>else</code>设置分支测试。标注文字则放在括号中。</p> 
<p> </p> 
<pre><code>@startuml

start

if (Graphviz installed?) then (yes)
  :process all\ndiagrams;
else (no)
  :process only
  __sequence__ and __activity__ diagrams;
endif

stop

@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-nhisozdz.webp" class="preview" src="https://images2.imgbox.com/43/cc/w0FImAu1_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/e8/25/xVU9UjcU_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="216" src="https://images2.imgbox.com/69/3c/WAHxpyAm_o.png" width="314"></p> 
<p>也可以使用关键字<code>elseif</code>设置多个分支测试。</p> 
<p> </p> 
<pre><code>@startuml
start
if (condition A) then (yes)
  :Text 1;
elseif (condition B) then (yes)
  :Text 2;
  stop
elseif (condition C) then (yes)
  :Text 3;
elseif (condition D) then (yes)
  :Text 4;
else (nothing)
  :Text else;
endif
stop
@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-3i0hrd08.webp" class="preview" src="https://images2.imgbox.com/45/df/LJu2juOh_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/cb/d8/eGK0GJij_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="271" src="https://images2.imgbox.com/a7/45/a7qjpuh6_o.png" width="488"></p> 
<p><a id="5"></a></p> 
<p> </p> 
<h3>重复循环</h3> 
<p>你可以使用关键字<code>repeat</code>和<code>repeatwhile</code>进行重复循环。</p> 
<p> </p> 
<pre><code>@startuml

start

repeat
  :read data;
  :generate diagrams;
repeat while (more data?)

stop

@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-abjdbmop.webp" class="preview" src="https://images2.imgbox.com/80/77/3dz1IX9m_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/34/2b/3ePPj8PS_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="287" src="https://images2.imgbox.com/3f/77/jbAxu0LT_o.png" width="172"></p> 
<p><a id="6"></a></p> 
<p> </p> 
<h3>while循环</h3> 
<p>可以使用关键字<code>while</code>和<code>end while</code>进行while循环。</p> 
<p> </p> 
<pre><code>@startuml

start

while (data available?)
  :read data;
  :generate diagrams;
endwhile

stop

@enduml
</code></pre> 
<p><img alt="" height="232" src="https://images2.imgbox.com/f9/5b/hBRzrACF_o.png" width="207"></p> 
<p>还可以在关键字<code>endwhile</code>后添加标注，还有一种方式是使用关键字<code>is</code>。</p> 
<p> </p> 
<pre><code>@startuml
while (check filesize ?) is (not empty)
  :read file;
endwhile (empty)
:close file;
@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-k7yfso1a.webp" class="preview" src="https://images2.imgbox.com/11/24/p5fdZtTF_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/05/76/J9nmmgH5_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="191" src="https://images2.imgbox.com/6f/8f/pbnVNFvP_o.png" width="175"></p> 
<p><a id="7"></a></p> 
<p> </p> 
<h3>并行处理</h3> 
<p>你可以使用关键字<code>fork</code>，<code>fork again</code>和<code>end fork</code>表示并行处理。</p> 
<p> </p> 
<pre><code>@startuml

start

if (multiprocessor?) then (yes)
  fork
	:Treatment 1;
  fork again
	:Treatment 2;
  end fork
else (monoproc)
  :Treatment 1;
  :Treatment 2;
endif

@enduml
</code></pre> 
<p><img alt="" height="230" src="https://images2.imgbox.com/78/15/xerjz3Dl_o.png" width="352"></p> 
<p><a id="8"></a></p> 
<p> </p> 
<h4>= 注释 =</h4> 
<p>文本格式支持<a href="https://plantuml.com/zh/creole" rel="nofollow">creole wiki</a>语法。</p> 
<p>A note can be floating, using <code>floating</code> keyword.</p> 
<pre><code>@startuml

start
:foo1;
floating note left: This is a note
:foo2;
note right
  This note is on several
  //lines// and can
  contain &lt;b&gt;HTML&lt;/b&gt;
  ====
  * Calling the method ""foo()"" is prohibited
end note
stop

@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-fzkpsbxw.webp" class="preview" src="https://images2.imgbox.com/b8/84/N1nxKQQu_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/85/76/QOEOIXLn_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="233" src="https://images2.imgbox.com/70/c1/dfuw4D7c_o.png" width="454"></p> 
<p><a id="9"></a></p> 
<p> </p> 
<h4>= 颜色 =</h4> 
<p>你可以为活动(activity)指定一种<a href="https://plantuml.com/zh/color" rel="nofollow">颜色</a>。</p> 
<p> </p> 
<pre><code>@startuml

start
:starting progress;
#HotPink:reading configuration files
These files should edited at this point!;
#AAAAAA:ending of the process;

@enduml
</code></pre> 
<p><img alt="" height="220" src="https://images2.imgbox.com/4c/b9/0jW2Jxf4_o.png" width="248"></p> 
<p><a id="10"></a></p> 
<p> </p> 
<h4>= 箭头 =</h4> 
<p>使用<code>-&gt;</code>标记，你可以给箭头添加文字或者修改箭头<a href="https://plantuml.com/zh/color" rel="nofollow">颜色</a>。</p> 
<p>同时，你也可以选择点状 (dotted)，条状(dashed)，加粗或者是隐式箭头</p> 
<p> </p> 
<pre><code>@startuml
:foo1;
-&gt; You can put text on arrows;
if (test) then
  -[#blue]-&gt;
  :foo2;
  -[#green,dashed]-&gt; The text can
  also be on several lines
  and **very** long...;
  :foo3;
else
  -[#black,dotted]-&gt;
  :foo4;
endif
-[#gray,bold]-&gt;
:foo5;
@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-bxg1icfm.webp" class="preview" src="https://images2.imgbox.com/7c/ce/N0fPnI2m_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/37/ed/1t5pEy2E_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="356" src="https://images2.imgbox.com/e7/c6/1YcZswzV_o.png" width="261"></p> 
<p><a id="11"></a></p> 
<p> </p> 
<h3>连接器(Connector)</h3> 
<p>你可以使用括号定义连接器。</p> 
<p> </p> 
<pre><code>@startuml
start
:Some activity;
(A)
detach
(A)
:Other activity;
@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-7xgudqnf.webp" class="preview" src="https://images2.imgbox.com/1b/55/jTo5V8MR_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/1b/eb/kS7SOYuE_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="220" src="https://images2.imgbox.com/96/bf/5WTpOAss_o.png" width="111"></p> 
<p><a id="12"></a></p> 
<p> </p> 
<h3>组合(grouping)</h3> 
<p>通过定义分区(partition)，你可以把多个活动组合(group)在一起。</p> 
<p> </p> 
<pre><code>@startuml
start
partition Initialization {
	:read config file;
	:init internal variable;
}
partition Running {
	:wait for user interaction;
	:print information;
}

stop
@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-hdb0pw7y.webp" class="preview" src="https://images2.imgbox.com/03/53/iz8W8kzi_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/6c/16/gz7B81IL_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="382" src="https://images2.imgbox.com/89/74/379lwoWQ_o.png" width="187"></p> 
<p><a id="13"></a></p> 
<p> </p> 
<h3>泳道(Swimlanes)</h3> 
<p>你可以使用管道符<code>|</code>来定义泳道。</p> 
<p>还可以改变泳道的<a href="https://plantuml.com/zh/color" rel="nofollow">颜色</a>。</p> 
<pre><code>@startuml
|Swimlane1|
start
:foo1;
|#AntiqueWhite|Swimlane2|
:foo2;
:foo3;
|Swimlane1|
:foo4;
|Swimlane2|
:foo5;
stop
@enduml
</code></pre> 
<p><img alt="activity-diagram-beta-3ok6dcdx.webp" class="preview" src="https://images2.imgbox.com/9d/ad/dcjxNHXB_o.png"><img alt="uploading.4e448015.gif" class="img-loading" src="https://images2.imgbox.com/88/91/8u5A7Y61_o.gif">转存失败<a class="btn btn-redo">重新上传</a><a class="btn btn-cancle">取消</a><img alt="" height="388" src="https://images2.imgbox.com/15/c5/g6ljqKei_o.png" width="235"></p> 
<p><a id="14"></a></p> 
<p> </p> 
<h3>分离(detach)</h3> 
<p>可以使用关键字<code>detach</code>移除箭头。</p> 
<p> </p> 
<pre><code>@startuml
 :start;
 fork
   :foo1;
   :foo2;
 fork again
   :foo3;
   detach
 endfork
 if (foo4) then
   :foo5;
   detach
 endif
 :foo6;
 detach
 :foo7;
 stop
@enduml
</code></pre> 
<p><img alt="" height="495" src="https://images2.imgbox.com/01/e6/hCh72MUG_o.png" width="160"></p> 
<p><a id="15"></a></p> 
<p> </p> 
<h3>特殊领域语言(SDL)</h3> 
<p>通过修改活动标签最后的分号分隔符(<code>;</code>)，可以为活动设置不同的形状。</p> 
<ul><li><code>|</code></li><li><code>&lt;</code></li><li><code>&gt;</code></li><li><code>/</code></li><li><code>]</code></li><li><code>}</code></li></ul> 
<pre><code>@startuml
:Ready;
:next(o)|
:Receiving;
split
 :nak(i)&lt;
 :ack(o)&gt;
split again
 :ack(i)&lt;
 :next(o)
 on several line|
 :i := i + 1]
 :ack(o)&gt;
split again
 :err(i)&lt;
 :nak(o)&gt;
split again
 :foo/
split again
 :i &gt; 5}
stop
end split
:finish;
@enduml
</code></pre> 
<p><img alt="" height="510" src="https://images2.imgbox.com/fe/63/CXPYqZ6Y_o.png" width="398"></p> 
<p><a id="16"></a></p> 
<p> </p> 
<h3>一个完整的例子</h3> 
<p> </p> 
<p> </p> 
<pre><code>@startuml

start
:ClickServlet.handleRequest();
:new page;
if (Page.onSecurityCheck) then (true)
  :Page.onInit();
  if (isForward?) then (no)
	:Process controls;
	if (continue processing?) then (no)
	  stop
	endif
	
	if (isPost?) then (yes)
	  :Page.onPost();
	else (no)
	  :Page.onGet();
	endif
	:Page.onRender();
  endif
else (false)
endif

if (do redirect?) then (yes)
  :redirect process;
else
  if (do forward?) then (yes)
	:Forward request;
  else (no)
	:Render page template;
  endif
endif

stop

@enduml</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/45c6f4cef1e3b3f047c3167853781d6c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决vue-i18n在非.vue文件中，在其他js文件，譬如axios拦截器等js文件中如何使用的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bb7641a7fa36c5ed8e5c43b240821163/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring事务UnexpectedRollbackException异常抛出原因深度分析及解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>