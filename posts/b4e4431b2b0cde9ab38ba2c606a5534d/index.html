<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>青龙脚本分享（不断更新完善） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="青龙脚本分享（不断更新完善）" />
<meta property="og:description" content="目录 开篇详细的使用教程可以往下看其他签到脚本青龙京东脚本分享6dylan6（集合库）【√可用】gys619（集合库）【√可用】fake2助力池版（集合库）【√可用】Faker3 纯净版【√可用】Akali5【√可用】KingRan 【√可用】zero205【√可用】smiek2121【√可用】curtinlv【√可用】 青龙其他签到脚本准备工作新建脚本消息通知pushplus设置环境变量安装依赖定时任务定时规则 阿里云签到（只签到不领取奖励）阿里云盘签到（js文件，有时候不推送消息bug，但是领取奖励）bilbil签到1. 步骤1.1. 登录青龙面板并修改配置1.2. 在青龙面板中添加拉库定时任务1.2.1. 订阅管理1.2.2. 定时任务拉库1.3. 登录PushPlus的Token,参考[pushplus的官网](http://www.pushplus.plus/doc/)PushPlus的Topic,参考[pushplus的官网](http://www.pushplus.plus/doc/) 天翼云盘签到(不需要环境变量版)天翼云盘签到（修改版，环境变量版）什么值得买签到脚本内容青龙拉库脚本NodeJS 依赖抓包青龙环境变量 恩山签到每日天气提醒下一个节假日每天60s小米社区签到代码 epic消息提醒欢迎大家投稿 开篇 当你们打开这篇文章的时候，大概率是已经配置好环境了，如果没有配置好青龙环境，看我之前的文章，安装docker、青龙和青龙卸载更新，lxc安装docker青龙，安装ubuntu-server系统等。
详细的使用教程可以往下看其他签到脚本 青龙京东脚本分享 脚本库-Hi科技玩家
6dylan6（集合库）【√可用】 github地址
拉库指令
国内机用下面指令（带代理）：
ql repo https://js.nbplay.site/https://github.com/6dylan6/jdpro.git &#34;jd_|jx_|jddj_&#34; &#34;backUp&#34; &#34;^jd[^_]|USER|JD|function|sendNotify&#34; 国外机（无需代理）用下面指令：
ql repo https://github.com/6dylan6/jdpro.git &#34;jd_|jx_|jddj_&#34; &#34;backUp&#34; &#34;^jd[^_]|USER|JD|function|sendNotify&#34; 使用流程
1、青龙部署。
2、登录青龙配置管理config.sh修改，差不多在17行（特别注意，没有修改此配置，任务拉不全，一键部署可忽略此处）；
RepoFileExtensions=&#34;js py&#34;修改为 RepoFileExtensions=“js py sh ts” 保存；
3、新建拉库任务或订阅，并执行，刷新浏览器即可看到添加的任务；
4、添加CK环境变量，多CK不要写在一起，每个都新建JD_COOKIE变量；
5，通知key变量请添加到配置管理config.sh文件，否则收不到通知；
支持的通知方式
server酱，go-cqhttp，pushdeer，Bark App，tg bot，钉钉bot，企业微信bot，企业微信应用消息，飞书，iGot，push plus，WxPusher，gotify
请在配置管理config文件里写变量
gys619（集合库）【√可用】 github地址
评价：脚本很多，但是好多失效脚本
拉库指令
ql repo https://github.com/gys619/Absinthe.git “jd_|jx_|jddj_|gua_|jddj_|getJDCookie|wskey” “activity|backUp” “^jd[^_]|USER|utils|ZooFaker|JDJRValidator_|^sign|jddj_cookie|function|ql” “main” fake2助力池版（集合库）【√可用】 github地址" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b4e4431b2b0cde9ab38ba2c606a5534d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-14T09:03:55+08:00" />
<meta property="article:modified_time" content="2023-11-14T09:03:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">青龙脚本分享（不断更新完善）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">开篇</a></li><li><a href="#_3" rel="nofollow">详细的使用教程可以往下看其他签到脚本</a></li><li><a href="#_4" rel="nofollow">青龙京东脚本分享</a></li><li><ul><li><a href="#6dylan6_6" rel="nofollow">6dylan6（集合库）【√可用】</a></li><li><a href="#gys619_35" rel="nofollow">gys619（集合库）【√可用】</a></li><li><a href="#fake2_45" rel="nofollow">fake2助力池版（集合库）【√可用】</a></li><li><a href="#Faker3__60" rel="nofollow">Faker3 纯净版【√可用】</a></li><li><a href="#Akali5_75" rel="nofollow">Akali5【√可用】</a></li><li><a href="#KingRan__85" rel="nofollow">KingRan 【√可用】</a></li><li><a href="#zero205_95" rel="nofollow">zero205【√可用】</a></li><li><a href="#smiek2121_97" rel="nofollow">smiek2121【√可用】</a></li><li><a href="#curtinlv_100" rel="nofollow">curtinlv【√可用】</a></li></ul> 
  </li><li><a href="#_104" rel="nofollow">青龙其他签到脚本</a></li><li><ul><li><a href="#_105" rel="nofollow">准备工作</a></li><li><ul><li><a href="#_106" rel="nofollow">新建脚本</a></li><li><a href="#pushplus_110" rel="nofollow">消息通知pushplus</a></li><li><a href="#_112" rel="nofollow">设置环境变量</a></li><li><a href="#_115" rel="nofollow">安装依赖</a></li><li><a href="#_117" rel="nofollow">定时任务</a></li><li><a href="#_120" rel="nofollow">定时规则</a></li></ul> 
   </li><li><a href="#_123" rel="nofollow">阿里云签到（只签到不领取奖励）</a></li><li><a href="#jsbug_213" rel="nofollow">阿里云盘签到（js文件，有时候不推送消息bug，但是领取奖励）</a></li><li><a href="#bilbil_219" rel="nofollow">bilbil签到</a></li><li><ul><li><a href="#1__221" rel="nofollow">1. 步骤</a></li><li><ul><li><a href="#11__222" rel="nofollow">1.1. 登录青龙面板并修改配置</a></li><li><a href="#12__229" rel="nofollow">1.2. 在青龙面板中添加拉库定时任务</a></li><li><a href="#121__232" rel="nofollow">1.2.1. 订阅管理</a></li><li><a href="#122__244" rel="nofollow">1.2.2. 定时任务拉库</a></li><li><a href="#13__256" rel="nofollow">1.3. 登录</a></li><li><a href="#PushPlusTokenpushplushttpwwwpushplusplusdoc_267" rel="nofollow">PushPlus的Token,参考[pushplus的官网](http://www.pushplus.plus/doc/)</a></li><li><a href="#PushPlusTopicpushplushttpwwwpushplusplusdoc_277" rel="nofollow">PushPlus的Topic,参考[pushplus的官网](http://www.pushplus.plus/doc/)</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_291" rel="nofollow">天翼云盘签到(不需要环境变量版)</a></li><li><a href="#_511" rel="nofollow">天翼云盘签到（修改版，环境变量版）</a></li><li><a href="#_735" rel="nofollow">什么值得买签到</a></li><li><ul><li><a href="#_736" rel="nofollow">脚本内容</a></li><li><a href="#_754" rel="nofollow">青龙拉库脚本</a></li><li><a href="#NodeJS__758" rel="nofollow">NodeJS 依赖</a></li><li><a href="#_760" rel="nofollow">抓包</a></li><li><a href="#_770" rel="nofollow">青龙环境变量</a></li></ul> 
   </li><li><a href="#_780" rel="nofollow">恩山签到</a></li><li><a href="#_808" rel="nofollow">每日天气提醒</a></li><li><a href="#_868" rel="nofollow">下一个节假日</a></li><li><a href="#60s_901" rel="nofollow">每天60s</a></li><li><a href="#_932" rel="nofollow">小米社区签到</a></li><li><ul><li><a href="#_941" rel="nofollow">代码</a></li></ul> 
   </li><li><a href="#epic_960" rel="nofollow">epic消息提醒</a></li><li><a href="#_1075" rel="nofollow">欢迎大家投稿</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>开篇</h2> 
<p>当你们打开这篇文章的时候，大概率是已经配置好环境了，如果没有配置好青龙环境，看我之前的文章，<a href="https://blog.csdn.net/qq_44774198/article/details/132379989">安装docker、青龙和青龙卸载更新</a>，<a href="https://blog.csdn.net/qq_44774198/article/details/133267038">lxc安装docker青龙</a>，<a href="https://blog.csdn.net/qq_44774198/article/details/132379402">安装ubuntu-server系统</a>等。</p> 
<h2><a id="_3"></a>详细的使用教程可以往下看其他签到脚本</h2> 
<h2><a id="_4"></a>青龙京东脚本分享</h2> 
<p><a href="https://hi.kejiwanjia.net/favorites/scripts" rel="nofollow">脚本库-Hi科技玩家</a></p> 
<h3><a id="6dylan6_6"></a>6dylan6（集合库）【√可用】</h3> 
<p><a href="https://js.nbplay.site/https://github.com/6dylan6/jdpro.git">github地址</a></p> 
<hr> 
<p><strong>拉库指令</strong><br> 国内机用下面指令（带代理）：</p> 
<pre><code class="prism language-bash">ql repo https://js.nbplay.site/https://github.com/6dylan6/jdpro.git <span class="token string">"jd_|jx_|jddj_"</span> <span class="token string">"backUp"</span> <span class="token string">"^jd[^_]|USER|JD|function|sendNotify"</span>
</code></pre> 
<p>国外机（无需代理）用下面指令：</p> 
<pre><code class="prism language-bash">ql repo https://github.com/6dylan6/jdpro.git <span class="token string">"jd_|jx_|jddj_"</span> <span class="token string">"backUp"</span> <span class="token string">"^jd[^_]|USER|JD|function|sendNotify"</span>
</code></pre> 
<hr> 
<p><strong>使用流程</strong></p> 
<blockquote> 
 <p>1、青龙部署。<br> 2、登录青龙配置管理config.sh修改，差不多在17行（特别注意，没有修改此配置，任务拉不全，一键部署可忽略此处）；<br> RepoFileExtensions="js py"修改为 RepoFileExtensions=“js py sh ts” 保存；<br> 3、新建拉库任务或订阅，并执行，刷新浏览器即可看到添加的任务；<br> 4、添加CK环境变量，多CK不要写在一起，每个都新建JD_COOKIE变量；<br> 5，通知key变量请添加到配置管理config.sh文件，否则收不到通知；</p> 
</blockquote> 
<hr> 
<p><strong>支持的通知方式</strong></p> 
<blockquote> 
 <p>server酱，go-cqhttp，pushdeer，Bark App，tg bot，钉钉bot，企业微信bot，企业微信应用消息，飞书，iGot，push plus，WxPusher，gotify<br> <mark>请在配置管理config文件里写变量</mark></p> 
</blockquote> 
<h3><a id="gys619_35"></a>gys619（集合库）【√可用】</h3> 
<p><a href="https://github.com/gys619/Thread.git">github地址</a><br> 评价：脚本很多，但是好多失效脚本</p> 
<hr> 
<p><strong>拉库指令</strong></p> 
<pre><code class="prism language-bash">ql repo https://github.com/gys619/Absinthe.git “jd_<span class="token operator">|</span>jx_<span class="token operator">|</span>jddj_<span class="token operator">|</span>gua_<span class="token operator">|</span>jddj_<span class="token operator">|</span>getJDCookie<span class="token operator">|</span>wskey” “activity<span class="token operator">|</span>backUp” “^jd<span class="token punctuation">[</span>^_<span class="token punctuation">]</span><span class="token operator">|</span><span class="token environment constant">USER</span><span class="token operator">|</span>utils<span class="token operator">|</span>ZooFaker<span class="token operator">|</span>JDJRValidator_<span class="token operator">|</span>^sign<span class="token operator">|</span>jddj_cookie<span class="token operator">|</span><span class="token keyword">function</span><span class="token operator">|</span>ql” “main”
</code></pre> 
<h3><a id="fake2_45"></a>fake2助力池版（集合库）【√可用】</h3> 
<p><a href="https://github.com/shufflewzc/faker2">github地址</a></p> 
<hr> 
<p><strong>拉库指令</strong></p> 
<pre><code class="prism language-bash">ql repo https://github.com/shufflewzc/faker2.git “jd_<span class="token operator">|</span>jx_<span class="token operator">|</span>gua_<span class="token operator">|</span>jddj_<span class="token operator">|</span>jdCookie” “activity<span class="token operator">|</span>backUp” “^jd<span class="token punctuation">[</span>^_<span class="token punctuation">]</span><span class="token operator">|</span><span class="token environment constant">USER</span><span class="token operator">|</span><span class="token keyword">function</span><span class="token operator">|</span>utils<span class="token operator">|</span>sendNotify<span class="token operator">|</span>ZooFaker_Necklace.js<span class="token operator">|</span>JDJRValidator_<span class="token operator">|</span>sign_graphics_validate<span class="token operator">|</span>ql<span class="token operator">|</span>JDSignValidator” “main”
</code></pre> 
<hr> 
<p><strong>助力池版</strong><br> 日常任务带有助力池，助力池助力量充足，相互助力。</p> 
<h3><a id="Faker3__60"></a>Faker3 纯净版【√可用】</h3> 
<p><a href="https://github.com/shufflewzc/faker3.git">github地址</a></p> 
<hr> 
<p><strong>拉库指令</strong></p> 
<pre><code class="prism language-bash">ql repo https://github.com/shufflewzc/faker3.git “jd_<span class="token operator">|</span>jx_<span class="token operator">|</span>gua_<span class="token operator">|</span>jddj_<span class="token operator">|</span>jdCookie” “activity<span class="token operator">|</span>backUp” “^jd<span class="token punctuation">[</span>^_<span class="token punctuation">]</span><span class="token operator">|</span><span class="token environment constant">USER</span><span class="token operator">|</span><span class="token keyword">function</span><span class="token operator">|</span>utils<span class="token operator">|</span>sendNotify<span class="token operator">|</span>ZooFaker_Necklace.js<span class="token operator">|</span>JDJRValidator_<span class="token operator">|</span>sign_graphics_validate<span class="token operator">|</span>ql<span class="token operator">|</span>JDSignValidator” “main”
</code></pre> 
<hr> 
<p><strong>纯净版</strong><br> 无任何自带助力码。</p> 
<h3><a id="Akali5_75"></a>Akali5【√可用】</h3> 
<p><a href="https://github.com/Akali5/jd-depot">github地址</a></p> 
<hr> 
<p><strong>拉库指令</strong></p> 
<pre><code class="prism language-bash">ql repo https://github.com/Akali5/jd-depot.git <span class="token string">"jd_|jx_|jddj_|gua_|getJDCookie|wskey"</span> <span class="token string">"activity|backUp"</span> <span class="token string">"^jd[^_]|USER|utils|ZooFaker_Necklace|JDJRValidator_|sign_graphics_validate|jddj_cookie|function|ql|magic|JDJR|sendNotify|depend|h5|jdspider"</span>
</code></pre> 
<h3><a id="KingRan__85"></a>KingRan 【√可用】</h3> 
<p><a href="https://github.com/KingRan/KR">github地址</a></p> 
<hr> 
<p><strong>拉库指令</strong></p> 
<pre><code class="prism language-bash">ql repo https://github.com/KingRan/KR.git <span class="token string">"jd_|jx_|jdCookie"</span> <span class="token string">"activity|backUp"</span> <span class="token string">"^jd[^_]|USER|utils|function|sign|sendNotify|ql|JDJR"</span>
</code></pre> 
<h3><a id="zero205_95"></a>zero205【√可用】</h3> 
<h3><a id="smiek2121_97"></a>smiek2121【√可用】</h3> 
<p><a href="https://github.com/smiek2121/scripts.git">github地址</a></p> 
<h3><a id="curtinlv_100"></a>curtinlv【√可用】</h3> 
<p><a href="https://github.com/curtinlv/JD-Script.git">github地址</a></p> 
<hr> 
<h2><a id="_104"></a>青龙其他签到脚本</h2> 
<h3><a id="_105"></a>准备工作</h3> 
<h4><a id="_106"></a>新建脚本</h4> 
<p>签到脚本的使用教程：<br> 可以在青龙脚本下面新建新的文件夹<br> <img src="https://images2.imgbox.com/15/1c/aY0FfDF0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="pushplus_110"></a>消息通知pushplus</h4> 
<p>copy一个<code>notify.py</code>，主要用于pushplus推送消息用</p> 
<h4><a id="_112"></a>设置环境变量</h4> 
<p>脚本需要的环境变量，在环境变量里面设置<br> <img src="https://images2.imgbox.com/1a/99/lzy1NujO_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_115"></a>安装依赖</h4> 
<p><code>重点</code>：确保import 的库依赖已经安装，否则会报错，没有安装去依赖里面安装即可</p> 
<h4><a id="_117"></a>定时任务</h4> 
<p><img src="https://images2.imgbox.com/c0/fd/tuaAp7et_o.png" alt="在这里插入图片描述"><br> 命令必须<code>task</code>开头 后面跟着是现金脚本的路径</p> 
<h4><a id="_120"></a>定时规则</h4> 
<p><a href="http://cron.ciding.cc/" rel="nofollow">在线Cron表达式生成器</a><br> <a href="https://blog.csdn.net/xinyflove/article/details/83178876">讲解【csdn】</a></p> 
<h3><a id="_123"></a>阿里云签到（只签到不领取奖励）</h3> 
<p><mark>大概一个多月就得重新更新一次token，会显示签到失败</mark></p> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/python3</span>
<span class="token comment"># -- coding: utf-8 --</span>
<span class="token comment"># @Time : 2023/4/8 10:23</span>
<span class="token comment"># -------------------------------</span>
<span class="token comment"># cron "30 5 * * *" script-path=xxx.py,tag=匹配cron用</span>
<span class="token comment"># const $ = new Env('阿里云盘签到');</span>

<span class="token keyword">import</span> json
<span class="token keyword">import</span>  requests
<span class="token keyword">import</span>  os
<span class="token keyword">import</span> notify

<span class="token comment">##变量export ali_refresh_token=''</span>
ali_refresh_token<span class="token operator">=</span>os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"ali_refresh_token"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span>
<span class="token comment">#refresh_token是一成不变的呢，我们使用它来更新签到需要的access_token</span>
<span class="token comment">#refresh_token获取教程：https://github.com/bighammer-link/Common-scripts/wiki/%E9%98%BF%E9%87%8C%E4%BA%91%E7%9B%98refresh_token%E8%8E%B7%E5%8F%96%E6%96%B9%E6%B3%95</span>
<span class="token comment"># ali_refresh_token = os.getenv("ali_refresh_token")</span>




<span class="token comment">#签到函数</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>ali_refresh_token<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'开始帐号</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string">签到'</span></span><span class="token punctuation">)</span>
    <span class="token keyword">def</span> <span class="token function">daily_check</span><span class="token punctuation">(</span>access_token<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string">'https://member.aliyundrive.com/v1/activity/sign_in_list'</span>
        headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'Authorization'</span><span class="token punctuation">:</span> access_token
        <span class="token punctuation">}</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> json<span class="token operator">=</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text
        result <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>response<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token string">'success'</span> <span class="token keyword">in</span> result<span class="token punctuation">:</span>
            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'签到成功'</span><span class="token punctuation">)</span>
            <span class="token keyword">for</span> i<span class="token punctuation">,</span> j <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token string">'result'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'signInLogs'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> j<span class="token punctuation">[</span><span class="token string">'status'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'miss'</span><span class="token punctuation">:</span>
                    day_json <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token string">'result'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'signInLogs'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
                    <span class="token comment"># print(day_json)</span>
                    <span class="token keyword">if</span> <span class="token keyword">not</span> day_json<span class="token punctuation">[</span><span class="token string">'isReward'</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
                        contents <span class="token operator">=</span> <span class="token string">'签到成功，今日未获得奖励'</span>
                    <span class="token keyword">else</span><span class="token punctuation">:</span>
                        contents <span class="token operator">=</span> <span class="token string">'本月累计签到{}天,今日签到获得{}{}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span><span class="token string">'result'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'signInCount'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                                         day_json<span class="token punctuation">[</span><span class="token string">'reward'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                                         day_json<span class="token punctuation">[</span><span class="token string">'reward'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                    <span class="token keyword">print</span><span class="token punctuation">(</span>contents<span class="token punctuation">)</span>

                    <span class="token keyword">return</span> contents


    <span class="token comment"># 使用refresh_token更新access_token</span>
    <span class="token keyword">def</span> <span class="token function">update_token</span><span class="token punctuation">(</span>refresh_token<span class="token punctuation">)</span><span class="token punctuation">:</span>
        url <span class="token operator">=</span> <span class="token string">'https://auth.aliyundrive.com/v2/account/token'</span>
        data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">'grant_type'</span><span class="token punctuation">:</span> <span class="token string">'refresh_token'</span><span class="token punctuation">,</span>
            <span class="token string">'refresh_token'</span><span class="token punctuation">:</span> ali_refresh_token<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">,</span> json<span class="token operator">=</span>data<span class="token punctuation">)</span><span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>
        access_token <span class="token operator">=</span> response<span class="token punctuation">[</span><span class="token string">'access_token'</span><span class="token punctuation">]</span>
<span class="token comment">#         print('获取的access_token为{}'.format(access_token))</span>
        <span class="token keyword">return</span> access_token


    <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token comment">#         print('更新access_token')</span>
        access_token <span class="token operator">=</span> update_token<span class="token punctuation">(</span>ali_refresh_token<span class="token punctuation">)</span>
<span class="token comment">#         print('更新成功，开始进行签到')</span>
        content <span class="token operator">=</span> daily_check<span class="token punctuation">(</span>access_token<span class="token punctuation">)</span>
        notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">"阿里云盘签到"</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>

    <span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
        main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>在环境变量里面设置<code>ali_refresh_toke</code></p> 
</blockquote> 
<p>获取阿里云盘的ali_refresh_toke教程：<br> <mark>方法一：</mark></p> 
<blockquote> 
 <p>网页登录阿里云盘，键盘<code>F12</code>，刷新一下网页，然后找到如下：<br> <img src="https://images2.imgbox.com/fb/55/iQxOV7eg_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<p><mark>方法二</mark><br> <code>F12</code>下找到<code>控制台</code>，输入命令,弹窗显示refresh_token</p> 
<pre><code class="prism language-python">alert<span class="token punctuation">(</span>JSON<span class="token punctuation">.</span>parse<span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span>refresh_token<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2f/6b/vPsb2KDP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="jsbug_213"></a>阿里云盘签到（js文件，有时候不推送消息bug，但是领取奖励）</h3> 
<p>采用订阅的方式，订阅地址如下：</p> 
<pre><code class="prism language-python">https<span class="token punctuation">:</span><span class="token operator">//</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>mrabit<span class="token operator">/</span>aliyundriveDailyCheck<span class="token punctuation">.</span>git
</code></pre> 
<h3><a id="bilbil_219"></a>bilbil签到</h3> 
<p>采用的是<code>BiliBiliToolPro</code>，来源<a href="https://github.com/RayWangQvQ/BiliBiliToolPro">github</a></p> 
<h4><a id="1__221"></a>1. 步骤</h4> 
<h5><a id="11__222"></a>1.1. 登录青龙面板并修改配置</h5> 
<p>青龙面板，配置文件页。</p> 
<p>修改 RepoFileExtensions=“js py” 为 RepoFileExtensions=“js py sh”</p> 
<p>保存配置。</p> 
<h5><a id="12__229"></a>1.2. 在青龙面板中添加拉库定时任务</h5> 
<p>两种方式：</p> 
<h5><a id="121__232"></a>1.2.1. 订阅管理</h5> 
<blockquote> 
 <p>名称：Bilibili<br> 类型：公开仓库<br> 链接：https://github.com/RayWangQvQ/BiliBiliToolPro.git<br> 定时类型：crontab<br> 定时规则：2 2 28 * *<br> 白名单：bili_task_.+.sh<br> 文件后缀：sh<br> 没提到的不要动。</p> 
</blockquote> 
<p>保存后，点击运行按钮，运行拉库。</p> 
<h5><a id="122__244"></a>1.2.2. 定时任务拉库</h5> 
<p>青龙面板，定时任务页，右上角添加任务，填入以下信息：</p> 
<blockquote> 
 <p>名称：拉取Bili库<br> 命令：ql repo https://github.com/RayWangQvQ/BiliBiliToolPro.git “bili_task_”<br> 定时规则：2 2 28 * *<br> 点击确定。</p> 
</blockquote> 
<p>保存成功后，找到该定时任务，点击运行按钮，运行拉库。</p> 
<p>如果正常，拉库成功后，同时也会自动添加bilibili相关的task任务。</p> 
<h5><a id="13__256"></a>1.3. 登录</h5> 
<p>在青龙定时任务中，点击运行bili扫码登录任务，查看运行日志，扫描日志中的二维码进行登录。<br> 登录成功后，会将cookie保存到青龙的环境变量中：</p> 
<p>首次运行会自动安装dotnet环境，时间久点，之后就不需要重复安装了。</p> 
<blockquote> 
 <p><mark>说明</mark>，采用的方式为订阅，会每天自动拉取脚本，第一次运行会比较慢，等待即可。<code>需要配置通知，默认不发送通知</code></p> 
</blockquote> 
<p>这里讲解配置pushplus的方式，如果采用其他推送方式可以自行查阅<a href="https://github.com/RayWangQvQ/BiliBiliToolPro/blob/main/docs/configuration.md">文档地址</a>，或者找我一起学习。</p> 
<h5><a id="PushPlusTokenpushplushttpwwwpushplusplusdoc_267"></a>PushPlus的Token,参考<a href="http://www.pushplus.plus/doc/" rel="nofollow">pushplus的官网</a></h5> 
<table><thead><tr><th>TITLE</th><th>CONTENT</th></tr></thead><tbody><tr><td>配置Key</td><td>Serilog:WriteTo:9:Args:token</td></tr><tr><td>值域</td><td>一串字符串</td></tr><tr><td>默认值</td><td>空</td></tr><tr><td>环境变量</td><td>Ray_Serilog__WriteTo__9__Args__token</td></tr><tr><td>GitHub Secrets</td><td>PUSHPLUSTOKEN</td></tr></tbody></table> 
<h5><a id="PushPlusTopicpushplushttpwwwpushplusplusdoc_277"></a>PushPlus的Topic,参考<a href="http://www.pushplus.plus/doc/" rel="nofollow">pushplus的官网</a></h5> 
<table><thead><tr><th>TITLE</th><th>CONTENT</th></tr></thead><tbody><tr><td>配置Key</td><td>Serilog:WriteTo:9:Args:topic</td></tr><tr><td>值域</td><td>一串字符串</td></tr><tr><td>默认值</td><td>空</td></tr><tr><td>环境变量</td><td>Ray_Serilog__WriteTo__9__Args__topic</td></tr><tr><td>GitHub Secrets</td><td>PUSHPLUSTOPIC</td></tr></tbody></table> 
<p>一般来说，这两个配置就够用了，如果需要更详细的配置，可以自行查阅文档。</p> 
<p><img src="https://images2.imgbox.com/66/d1/39HALJ0p_o.png" alt="在这里插入图片描述"><br> 配置完成的截图如上。</p> 
<h3><a id="_291"></a>天翼云盘签到(不需要环境变量版)</h3> 
<pre><code class="prism language-python"><span class="token comment"># 来自吾爱论坛，在原作者的基础上把推送消息换成了青龙自带的通知，如有侵权请告知，将立即删除。</span>
<span class="token comment"># @author Sten</span>
<span class="token comment"># 我的仓库:https://github.com/aefa6/QinglongScript.git</span>
<span class="token comment"># 觉得不错麻烦点个star谢谢</span>
<span class="token keyword">import</span> notify
<span class="token keyword">import</span> time
<span class="token keyword">import</span> re
<span class="token keyword">import</span> json
<span class="token keyword">import</span> base64
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>hmac
<span class="token keyword">import</span> rsa
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> random
 
BI_RM <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">"0123456789abcdefghijklmnopqrstuvwxyz"</span><span class="token punctuation">)</span>
 
B64MAP <span class="token operator">=</span> <span class="token string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"</span>
 
s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment"># 在下面两行的引号内贴上账号（仅支持手机号）和密码</span>
username <span class="token operator">=</span> <span class="token string">"xxxxxx"</span>
password <span class="token operator">=</span> <span class="token string">"xxxxxx"</span>
 
_ <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
if(username == "" or password == ""):
    username = input("账号：")
    password = input("密码：")
# """</span>
 
<span class="token keyword">assert</span> username <span class="token keyword">and</span> password<span class="token punctuation">,</span> <span class="token string">"在第23、24行填入有效账号和密码"</span>

<span class="token keyword">def</span> <span class="token function">int2char</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> BI_RM<span class="token punctuation">[</span>a<span class="token punctuation">]</span>
 
 
<span class="token keyword">def</span> <span class="token function">b64tohex</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    d <span class="token operator">=</span> <span class="token string">""</span>
    e <span class="token operator">=</span> <span class="token number">0</span>
    c <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">list</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"="</span><span class="token punctuation">:</span>
            v <span class="token operator">=</span> B64MAP<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">==</span> e<span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">1</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>v <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                c <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">&amp;</span> v
            <span class="token keyword">elif</span> <span class="token number">1</span> <span class="token operator">==</span> e<span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">2</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token operator">|</span> v <span class="token operator">&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span>
                c <span class="token operator">=</span> <span class="token number">15</span> <span class="token operator">&amp;</span> v
            <span class="token keyword">elif</span> <span class="token number">2</span> <span class="token operator">==</span> e<span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">3</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c<span class="token punctuation">)</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>v <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                c <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">&amp;</span> v
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">0</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token operator">|</span> v <span class="token operator">&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span><span class="token number">15</span> <span class="token operator">&amp;</span> v<span class="token punctuation">)</span>
    <span class="token keyword">if</span> e <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> d
 
 
<span class="token keyword">def</span> <span class="token function">rsa_encode</span><span class="token punctuation">(</span>j_rsakey<span class="token punctuation">,</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span>
    rsa_key <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"-----BEGIN PUBLIC KEY-----\n</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>j_rsakey<span class="token punctuation">}</span></span><span class="token string">\n-----END PUBLIC KEY-----"</span></span>
    pubkey <span class="token operator">=</span> rsa<span class="token punctuation">.</span>PublicKey<span class="token punctuation">.</span>load_pkcs1_openssl_pem<span class="token punctuation">(</span>rsa_key<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> b64tohex<span class="token punctuation">(</span><span class="token punctuation">(</span>base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>rsa<span class="token punctuation">.</span>encrypt<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>string<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pubkey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
 
 
<span class="token keyword">def</span> <span class="token function">calculate_md5_sign</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#https://m.cloud.189.cn/login2014.jsp?redirectURL=https://m.cloud.189.cn/zhuanti/2021/shakeLottery/index.html</span>
    url<span class="token operator">=</span><span class="token string">""</span>
    urlToken<span class="token operator">=</span><span class="token string">"https://m.cloud.189.cn/udb/udb_login.jsp?pageId=1&amp;pageKey=default&amp;clientType=wap&amp;redirectURL=https://m.cloud.189.cn/zhuanti/2021/shakeLottery/index.html"</span>
    s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>urlToken<span class="token punctuation">)</span>
    pattern <span class="token operator">=</span> <span class="token string">r"https?://[^\s'\"]+"</span>  <span class="token comment"># 匹配以http或https开头的url</span>
    <span class="token keyword">match</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>  <span class="token comment"># 在文本中搜索匹配</span>
    <span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>  <span class="token comment"># 如果找到匹配</span>
        url <span class="token operator">=</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 获取匹配的字符串</span>
        <span class="token comment"># print(url)  # 打印url</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># 如果没有找到匹配</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"没有找到url"</span><span class="token punctuation">)</span>
 
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token comment"># print(r.text)</span>
    pattern <span class="token operator">=</span> <span class="token string">r"&lt;a id=\"j-tab-login-link\"[^&gt;]*href=\"([^\"]+)\""</span>  <span class="token comment"># 匹配id为j-tab-login-link的a标签，并捕获href引号内的内容</span>
    <span class="token keyword">match</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>  <span class="token comment"># 在文本中搜索匹配</span>
    <span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>  <span class="token comment"># 如果找到匹配</span>
        href <span class="token operator">=</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 获取捕获的内容</span>
        <span class="token comment"># print("href:" + href)  # 打印href链接</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># 如果没有找到匹配</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"没有找到href链接"</span><span class="token punctuation">)</span>
 
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>href<span class="token punctuation">)</span>
    captchaToken <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r"captchaToken' value='(.+?)'"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    lt <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'lt = "(.+?)"'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    returnUrl <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r"returnUrl= '(.+?)'"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    paramId <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'paramId = "(.+?)"'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    j_rsakey <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'j_rsaKey" value="(\S+)"'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>M<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    s<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"lt"</span><span class="token punctuation">:</span> lt<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
    username <span class="token operator">=</span> rsa_encode<span class="token punctuation">(</span>j_rsakey<span class="token punctuation">,</span> username<span class="token punctuation">)</span>
    password <span class="token operator">=</span> rsa_encode<span class="token punctuation">(</span>j_rsakey<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    url <span class="token operator">=</span> <span class="token string">"https://open.e.189.cn/api/logbox/oauth2/loginSubmit.do"</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0'</span><span class="token punctuation">,</span>
        <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'https://open.e.189.cn/'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"appKey"</span><span class="token punctuation">:</span> <span class="token string">"cloud"</span><span class="token punctuation">,</span>
        <span class="token string">"accountType"</span><span class="token punctuation">:</span> <span class="token string">'01'</span><span class="token punctuation">,</span>
        <span class="token string">"userName"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"{<!-- -->{RSA}}</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>username<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"{<!-- -->{RSA}}</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>password<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token string">"validateCode"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token string">"captchaToken"</span><span class="token punctuation">:</span> captchaToken<span class="token punctuation">,</span>
        <span class="token string">"returnUrl"</span><span class="token punctuation">:</span> returnUrl<span class="token punctuation">,</span>
        <span class="token string">"mailSuffix"</span><span class="token punctuation">:</span> <span class="token string">"@189.cn"</span><span class="token punctuation">,</span>
        <span class="token string">"paramId"</span><span class="token punctuation">:</span> paramId
    <span class="token punctuation">}</span>
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'result'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    redirect_url <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'toUrl'</span><span class="token punctuation">]</span>
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>redirect_url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> s
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    s<span class="token operator">=</span>login<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    rand <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    surl <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://api.cloud.189.cn/mkt/userSign.action?rand=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>rand<span class="token punctuation">}</span></span><span class="token string">&amp;clientType=TELEANDROID&amp;version=8.6.3&amp;model=SM-G930K'</span></span>
    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_SIGNIN&amp;activityId=ACT_SIGNIN'</span></span>
    url2 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_SIGNIN_PHOTOS&amp;activityId=ACT_SIGNIN'</span></span>
    url3 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_2022_FLDFS_KJ&amp;activityId=ACT_SIGNIN'</span></span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6'</span><span class="token punctuation">,</span>
        <span class="token string">"Referer"</span><span class="token punctuation">:</span> <span class="token string">"https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"</span><span class="token punctuation">,</span>
        <span class="token string">"Host"</span><span class="token punctuation">:</span> <span class="token string">"m.cloud.189.cn"</span><span class="token punctuation">,</span>
        <span class="token string">"Accept-Encoding"</span><span class="token punctuation">:</span> <span class="token string">"gzip, deflate"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>surl<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    netdiskBonus <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'netdiskBonus'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'isSign'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"未签到，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span><span class="token punctuation">)</span>
        res1 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"未签到，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"已经签到过了，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span><span class="token punctuation">)</span>
        res1 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"已经签到过了，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span>
 
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6'</span><span class="token punctuation">,</span>
        <span class="token string">"Referer"</span><span class="token punctuation">:</span> <span class="token string">"https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"</span><span class="token punctuation">,</span>
        <span class="token string">"Host"</span><span class="token punctuation">:</span> <span class="token string">"m.cloud.189.cn"</span><span class="token punctuation">,</span>
        <span class="token string">"Accept-Encoding"</span><span class="token punctuation">:</span> <span class="token string">"gzip, deflate"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"errorCode"</span> <span class="token keyword">in</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        res2 <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        description <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        res2 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span>
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url2<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"errorCode"</span> <span class="token keyword">in</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        res3 <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        description <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        res3 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span>
 
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url3<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"errorCode"</span> <span class="token keyword">in</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        res4 <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        description <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"链接3抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        res4 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"链接3抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span>

    title <span class="token operator">=</span> <span class="token string">"天翼云签到"</span>
    content <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"""
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res1<span class="token punctuation">}</span></span><span class="token string">
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res2<span class="token punctuation">}</span></span><span class="token string">
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res3<span class="token punctuation">}</span></span><span class="token string">
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res4<span class="token punctuation">}</span></span><span class="token string">
    """</span></span>
    notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span>title<span class="token punctuation">,</span> content<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">lambda_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># aws default</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># tencent default</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># aliyun default</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># time.sleep(random.randint(5, 30))</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="_511"></a>天翼云盘签到（修改版，环境变量版）</h3> 
<pre><code class="prism language-python"><span class="token comment"># 来自吾爱论坛，在原作者的基础上把推送消息换成了青龙自带的通知，如有侵权请告知，将立即删除。</span>
<span class="token comment"># @author Sten</span>
<span class="token comment"># 我的仓库:https://github.com/aefa6/QinglongScript.git</span>
<span class="token comment"># 觉得不错麻烦点个star谢谢</span>
<span class="token keyword">import</span> notify
<span class="token keyword">import</span> time
<span class="token keyword">import</span> re
<span class="token keyword">import</span> json
<span class="token keyword">import</span> base64
<span class="token keyword">import</span> hashlib
<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">,</span>hmac
<span class="token keyword">import</span> rsa
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> random
<span class="token keyword">import</span> os
 
BI_RM <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token string">"0123456789abcdefghijklmnopqrstuvwxyz"</span><span class="token punctuation">)</span>
 
B64MAP <span class="token operator">=</span> <span class="token string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"</span>
 
s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment"># 在下面两行的引号内贴上账号（仅支持手机号）和密码</span>
<span class="token comment"># username = "15612510963"</span>
<span class="token comment"># password = "Gao15227020648an"</span>
username  <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"cloud189_username"</span><span class="token punctuation">)</span>
password <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"cloud189_password"</span><span class="token punctuation">)</span>
 
_ <span class="token operator">=</span> <span class="token triple-quoted-string string">"""
if(username == "" or password == ""):
    username = input("账号：")
    password = input("密码：")
# """</span>
 
<span class="token keyword">assert</span> username <span class="token keyword">and</span> password<span class="token punctuation">,</span> <span class="token string">"在第23、24行填入有效账号和密码"</span>

<span class="token keyword">def</span> <span class="token function">int2char</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> BI_RM<span class="token punctuation">[</span>a<span class="token punctuation">]</span>
 
 
<span class="token keyword">def</span> <span class="token function">b64tohex</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">:</span>
    d <span class="token operator">=</span> <span class="token string">""</span>
    e <span class="token operator">=</span> <span class="token number">0</span>
    c <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">list</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">"="</span><span class="token punctuation">:</span>
            v <span class="token operator">=</span> B64MAP<span class="token punctuation">.</span>index<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">==</span> e<span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">1</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>v <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                c <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">&amp;</span> v
            <span class="token keyword">elif</span> <span class="token number">1</span> <span class="token operator">==</span> e<span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">2</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token operator">|</span> v <span class="token operator">&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span>
                c <span class="token operator">=</span> <span class="token number">15</span> <span class="token operator">&amp;</span> v
            <span class="token keyword">elif</span> <span class="token number">2</span> <span class="token operator">==</span> e<span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">3</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c<span class="token punctuation">)</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>v <span class="token operator">&gt;&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
                c <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">&amp;</span> v
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                e <span class="token operator">=</span> <span class="token number">0</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c <span class="token operator">&lt;&lt;</span> <span class="token number">2</span> <span class="token operator">|</span> v <span class="token operator">&gt;&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span>
                d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span><span class="token number">15</span> <span class="token operator">&amp;</span> v<span class="token punctuation">)</span>
    <span class="token keyword">if</span> e <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        d <span class="token operator">+=</span> int2char<span class="token punctuation">(</span>c <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> d
 
 
<span class="token keyword">def</span> <span class="token function">rsa_encode</span><span class="token punctuation">(</span>j_rsakey<span class="token punctuation">,</span> string<span class="token punctuation">)</span><span class="token punctuation">:</span>
    rsa_key <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"-----BEGIN PUBLIC KEY-----\n</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>j_rsakey<span class="token punctuation">}</span></span><span class="token string">\n-----END PUBLIC KEY-----"</span></span>
    pubkey <span class="token operator">=</span> rsa<span class="token punctuation">.</span>PublicKey<span class="token punctuation">.</span>load_pkcs1_openssl_pem<span class="token punctuation">(</span>rsa_key<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    result <span class="token operator">=</span> b64tohex<span class="token punctuation">(</span><span class="token punctuation">(</span>base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>rsa<span class="token punctuation">.</span>encrypt<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>string<span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> pubkey<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> result
 
 
<span class="token keyword">def</span> <span class="token function">calculate_md5_sign</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> hashlib<span class="token punctuation">.</span>md5<span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">sorted</span><span class="token punctuation">(</span>params<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>hexdigest<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">login</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#https://m.cloud.189.cn/login2014.jsp?redirectURL=https://m.cloud.189.cn/zhuanti/2021/shakeLottery/index.html</span>
    url<span class="token operator">=</span><span class="token string">""</span>
    urlToken<span class="token operator">=</span><span class="token string">"https://m.cloud.189.cn/udb/udb_login.jsp?pageId=1&amp;pageKey=default&amp;clientType=wap&amp;redirectURL=https://m.cloud.189.cn/zhuanti/2021/shakeLottery/index.html"</span>
    s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>urlToken<span class="token punctuation">)</span>
    pattern <span class="token operator">=</span> <span class="token string">r"https?://[^\s'\"]+"</span>  <span class="token comment"># 匹配以http或https开头的url</span>
    <span class="token keyword">match</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>  <span class="token comment"># 在文本中搜索匹配</span>
    <span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>  <span class="token comment"># 如果找到匹配</span>
        url <span class="token operator">=</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 获取匹配的字符串</span>
        <span class="token comment"># print(url)  # 打印url</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># 如果没有找到匹配</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"没有找到url"</span><span class="token punctuation">)</span>
 
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>
    <span class="token comment"># print(r.text)</span>
    pattern <span class="token operator">=</span> <span class="token string">r"&lt;a id=\"j-tab-login-link\"[^&gt;]*href=\"([^\"]+)\""</span>  <span class="token comment"># 匹配id为j-tab-login-link的a标签，并捕获href引号内的内容</span>
    <span class="token keyword">match</span> <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>  <span class="token comment"># 在文本中搜索匹配</span>
    <span class="token keyword">if</span> <span class="token keyword">match</span><span class="token punctuation">:</span>  <span class="token comment"># 如果找到匹配</span>
        href <span class="token operator">=</span> <span class="token keyword">match</span><span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 获取捕获的内容</span>
        <span class="token comment"># print("href:" + href)  # 打印href链接</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>  <span class="token comment"># 如果没有找到匹配</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"没有找到href链接"</span><span class="token punctuation">)</span>
 
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>href<span class="token punctuation">)</span>
    captchaToken <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r"captchaToken' value='(.+?)'"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    lt <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'lt = "(.+?)"'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    returnUrl <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r"returnUrl= '(.+?)'"</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    paramId <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'paramId = "(.+?)"'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    j_rsakey <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">r'j_rsaKey" value="(\S+)"'</span><span class="token punctuation">,</span> r<span class="token punctuation">.</span>text<span class="token punctuation">,</span> re<span class="token punctuation">.</span>M<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    s<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"lt"</span><span class="token punctuation">:</span> lt<span class="token punctuation">}</span><span class="token punctuation">)</span>
 
    username <span class="token operator">=</span> rsa_encode<span class="token punctuation">(</span>j_rsakey<span class="token punctuation">,</span> username<span class="token punctuation">)</span>
    password <span class="token operator">=</span> rsa_encode<span class="token punctuation">(</span>j_rsakey<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    url <span class="token operator">=</span> <span class="token string">"https://open.e.189.cn/api/logbox/oauth2/loginSubmit.do"</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:74.0) Gecko/20100101 Firefox/76.0'</span><span class="token punctuation">,</span>
        <span class="token string">'Referer'</span><span class="token punctuation">:</span> <span class="token string">'https://open.e.189.cn/'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    data <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">"appKey"</span><span class="token punctuation">:</span> <span class="token string">"cloud"</span><span class="token punctuation">,</span>
        <span class="token string">"accountType"</span><span class="token punctuation">:</span> <span class="token string">'01'</span><span class="token punctuation">,</span>
        <span class="token string">"userName"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"{<!-- -->{RSA}}</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>username<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string-interpolation"><span class="token string">f"{<!-- -->{RSA}}</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>password<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span>
        <span class="token string">"validateCode"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token string">"captchaToken"</span><span class="token punctuation">:</span> captchaToken<span class="token punctuation">,</span>
        <span class="token string">"returnUrl"</span><span class="token punctuation">:</span> returnUrl<span class="token punctuation">,</span>
        <span class="token string">"mailSuffix"</span><span class="token punctuation">:</span> <span class="token string">"@189.cn"</span><span class="token punctuation">,</span>
        <span class="token string">"paramId"</span><span class="token punctuation">:</span> paramId
    <span class="token punctuation">}</span>
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>data<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'result'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    redirect_url <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'toUrl'</span><span class="token punctuation">]</span>
    r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>redirect_url<span class="token punctuation">)</span>
    <span class="token keyword">return</span> s
 
 
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    s<span class="token operator">=</span>login<span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span>
    rand <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    surl <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://api.cloud.189.cn/mkt/userSign.action?rand=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>rand<span class="token punctuation">}</span></span><span class="token string">&amp;clientType=TELEANDROID&amp;version=8.6.3&amp;model=SM-G930K'</span></span>
    url <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_SIGNIN&amp;activityId=ACT_SIGNIN'</span></span>
    url2 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_SIGNIN_PHOTOS&amp;activityId=ACT_SIGNIN'</span></span>
    url3 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f'https://m.cloud.189.cn/v2/drawPrizeMarketDetails.action?taskId=TASK_2022_FLDFS_KJ&amp;activityId=ACT_SIGNIN'</span></span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6'</span><span class="token punctuation">,</span>
        <span class="token string">"Referer"</span><span class="token punctuation">:</span> <span class="token string">"https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"</span><span class="token punctuation">,</span>
        <span class="token string">"Host"</span><span class="token punctuation">:</span> <span class="token string">"m.cloud.189.cn"</span><span class="token punctuation">,</span>
        <span class="token string">"Accept-Encoding"</span><span class="token punctuation">:</span> <span class="token string">"gzip, deflate"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>surl<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    netdiskBonus <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'netdiskBonus'</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'isSign'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">"false"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"未签到，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span><span class="token punctuation">)</span>
        res1 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"未签到，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"已经签到过了，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span><span class="token punctuation">)</span>
        res1 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"已经签到过了，签到获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>netdiskBonus<span class="token punctuation">}</span></span><span class="token string">M空间"</span></span>
 
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Linux; Android 5.1.1; SM-G930K Build/NRD90M; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/74.0.3729.136 Mobile Safari/537.36 Ecloud/8.6.3 Android/22 clientId/355325117317828 clientModel/SM-G930K imsi/460071114317824 clientChannelId/qq proVersion/1.0.6'</span><span class="token punctuation">,</span>
        <span class="token string">"Referer"</span><span class="token punctuation">:</span> <span class="token string">"https://m.cloud.189.cn/zhuanti/2016/sign/index.jsp?albumBackupOpened=1"</span><span class="token punctuation">,</span>
        <span class="token string">"Host"</span><span class="token punctuation">:</span> <span class="token string">"m.cloud.189.cn"</span><span class="token punctuation">,</span>
        <span class="token string">"Accept-Encoding"</span><span class="token punctuation">:</span> <span class="token string">"gzip, deflate"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"errorCode"</span> <span class="token keyword">in</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        res2 <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        description <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        res2 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span>
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url2<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"errorCode"</span> <span class="token keyword">in</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        res3 <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        description <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        res3 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span>
 
    response <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url3<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"errorCode"</span> <span class="token keyword">in</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
        res4 <span class="token operator">=</span> <span class="token string">""</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        description <span class="token operator">=</span> response<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'description'</span><span class="token punctuation">]</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"链接3抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
        res4 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"链接3抽奖获得</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>description<span class="token punctuation">}</span></span><span class="token string">"</span></span>

    title <span class="token operator">=</span> <span class="token string">"天翼云签到"</span>
    content <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"""
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res1<span class="token punctuation">}</span></span><span class="token string">
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res2<span class="token punctuation">}</span></span><span class="token string">
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res3<span class="token punctuation">}</span></span><span class="token string">
    </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>res4<span class="token punctuation">}</span></span><span class="token string">
    """</span></span>
    notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span>title<span class="token punctuation">,</span> content<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">lambda_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># aws default</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">main_handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># tencent default</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">def</span> <span class="token function">handler</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># aliyun default</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
 
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># time.sleep(random.randint(5, 30))</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="_735"></a>什么值得买签到</h3> 
<h4><a id="_736"></a>脚本内容</h4> 
<blockquote> 
 <p>每日签到<br> 每日抽奖<br> 生活频道转盘抽奖<br> 值会员转盘抽奖<br> 每日任务（指的是签到页面中的任务）<br> 浏览文章<br> 收藏文章<br> 点赞文章<br> 评论文章<br> 分享<br> 抽奖<br> 免费抽奖<br> 5 碎银子抽奖<br> 关注用户<br> 关注栏目<br> 关注品牌<br> 限时累计活动</p> 
</blockquote> 
<h4><a id="_754"></a>青龙拉库脚本</h4> 
<pre><code class="prism language-python">ql repo https<span class="token punctuation">:</span><span class="token operator">//</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span><span class="token builtin">hex</span><span class="token operator">-</span>ci<span class="token operator">/</span>smzdm_script<span class="token punctuation">.</span>git <span class="token string">""</span> <span class="token string">"env.js|bot.js|sendNotify.js"</span> <span class="token string">"env.js|bot.js|sendNotify.js"</span>
</code></pre> 
<h4><a id="NodeJS__758"></a>NodeJS 依赖</h4> 
<p><mark>crypto-js</mark></p> 
<h4><a id="_760"></a>抓包</h4> 
<p>建议使用 Android 手机抓包（iOS 也可以）域名为 user-api.smzdm.com 的任意链接，把所有 Cookie 取出来放到青龙面板的 SMZDM_COOKIE 环境变量中，多用户请添加多个同名环境变量或者用 &amp; 符号分隔。<br> 如果手机实在抓不到，也可以用浏览器的 Cookie，但是强烈建议使用手机端的 Cookie。<br> 抓包教程<br> 以下教程请大家自行尝试，本人没有亲自尝试，如有问题可以进群交流。<br> https://www.jianshu.com/p/5e5524868442<br> https://www.zqh.plus/2022/03/19/Android-Capture/<br> https://jishuin.proginn.com/p/763bfbd5f92e<br> https://juejin.cn/post/7091524392005566471<br> https://www.caq98i.top/article/?page=38</p> 
<h4><a id="_770"></a>青龙环境变量</h4> 
<p>环境变量请使用环境变量列表直接添加，不要使用 <code>export xxx=""</code>这种方式添加环境变量。</p> 
<p><code>SMZDM_COOKIE:</code> 抓包抓到的 Cookie 内容，需要所有 Cookie 内容，多用户可以用 &amp; 分隔，或者使用多个同名环境变量。<br> <code>SMZDM_SK: </code>这个值是可选值，会自动计算，如果你一定想用自己的，可以抓取，是从安卓 App 的 <code>https://user-api.smzdm.com/checkin </code>请求参数中抓包抓到的，多用户可以用 &amp; 分隔，或者使用多个同名环境变量，顺序要保持与 SMZDM_COOKIE 多用户顺序一致。<br> <code>SMZDM_USER_AGENT_APP:</code> 这个值是可选值，是指 APP 的 User-Agent，从 APP 的 API 请求头中抓包得到，建议抓取 <code>Android 的 User-Agent</code>，不填使用脚本默认值。<br> <code>SMZDM_USER_AGENT_WEB: </code>这个值是可选值，是指 APP 中访问网页的 User-Agent，一般在 APP 内的转盘网页中抓包得到，建议抓取 Android 的 User-Agent，不填使用脚本默认值。<br> <code>SMZDM_COMMENT: </code>如果要完成评论文章的任务请设置这个环境变量，环境变量的内容是评论的文案，文案要大于 10 个汉字，建议用比较个性化的文案，脚本发布评论后会删除这条评论，但是为防止删除失败的情况，请尽量用好一点的文案，防止被判定为恶意灌水。<br> <code>SMZDM_CROWD_SILVER_5: </code>每日抽奖任务默认只进行免费抽奖，如要进行 5 碎银子的抽奖，请设置这个环境变量的值为 <code>yes</code>。<br> <code>SMZDM_CROWD_KEYWORD: </code>抽奖关键词，执行非免费抽奖时，会优先选择包含此关键词的抽奖，如果未找到包含此关键词的抽奖，则会随机选择一个。</p> 
<h3><a id="_780"></a>恩山签到</h3> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/python3</span>
<span class="token comment"># -- coding: utf-8 -- </span>
<span class="token comment"># const $ = new Env('恩山签到')</span>
<span class="token keyword">import</span> requests<span class="token punctuation">,</span>re<span class="token punctuation">,</span>os
<span class="token keyword">import</span> notify

<span class="token comment">#配置恩山的cookie 到配置文件config.sh export enshanck='' 需要推送配置推送加token export plustoken=''</span>
enshanck <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"enshanck"</span><span class="token punctuation">)</span>

headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string">"User-Agent"</span><span class="token punctuation">:</span> <span class="token string">"Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.5359.125 Safari/537.36"</span><span class="token punctuation">,</span>
    <span class="token string">"Cookie"</span><span class="token punctuation">:</span> enshanck<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
session <span class="token operator">=</span> requests<span class="token punctuation">.</span>session<span class="token punctuation">(</span><span class="token punctuation">)</span>
response <span class="token operator">=</span> session<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://www.right.com.cn/FORUM/home.php?mod=spacecp&amp;ac=credit&amp;showcredit=1'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    coin <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"恩山币: &lt;/em&gt;(.*?)nb &amp;nbsp;"</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    point <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">"&lt;em&gt;积分: &lt;/em&gt;(.*?)&lt;span"</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    res <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"恩山币：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>coin<span class="token punctuation">}</span></span><span class="token string">\n积分：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>point<span class="token punctuation">}</span></span><span class="token string">"</span></span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
    notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">"恩山签到"</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
    res <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</code></pre> 
<p><mark>说明</mark>:配置恩山的环境变量，<code>enshanck</code>,把获取到的cookies全部复制。</p> 
<h3><a id="_808"></a>每日天气提醒</h3> 
<pre><code class="prism language-python"><span class="token comment">#!/usr/bin/python3</span>
<span class="token comment"># -- coding: utf-8 --</span>
<span class="token comment"># -------------------------------</span>
<span class="token comment"># @Author : github@wd210010 https://github.com/wd210010/just_for_happy</span>
<span class="token comment"># @Time : 2023/2/27 13:23</span>
<span class="token comment"># -------------------------------</span>
<span class="token comment"># cron "30 7 * * *" script-path=xxx.py,tag=匹配cron用</span>
<span class="token comment"># const $ = new Env('天气推送')</span>

<span class="token keyword">import</span> requests<span class="token punctuation">,</span> json <span class="token punctuation">,</span>os<span class="token punctuation">,</span>notify

<span class="token comment"># 城市code 自己城市的code https://fastly.jsdelivr.net/gh/Oreomeow/checkinpanel@master/city.json 这个网址查看</span>
<span class="token comment"># city_code = ''</span>

<span class="token comment"># 青龙变量 city_code</span>
city_code <span class="token operator">=</span> os<span class="token punctuation">.</span>getenv<span class="token punctuation">(</span><span class="token string">"city_code"</span><span class="token punctuation">)</span>


r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>
    <span class="token string-interpolation"><span class="token string">f"http://t.weather.itboy.net/api/weather/city/</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>city_code<span class="token punctuation">}</span></span><span class="token string">"</span></span>
<span class="token punctuation">)</span>
d <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
result2 <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'cityInfo'</span><span class="token punctuation">]</span>

msg <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token string-interpolation"><span class="token string">f' 城市：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"cityInfo"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"parent"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"cityInfo"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"city"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 日期：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"ymd"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"week"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 天气：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 温度：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"high"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"low"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 湿度：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"shidu"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 空气质量：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"quality"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' PM2.5：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"pm25"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' PM10：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"pm10"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 风力风向 </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"fx"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"fl"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 感冒指数：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"ganmao"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 温馨提示：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"data"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"forecast"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"notice"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">\n'</span></span>
    <span class="token string-interpolation"><span class="token string">f' 更新时间：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">[</span><span class="token string">"time"</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">'</span></span>
<span class="token punctuation">)</span>


w_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">list</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        d<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'forecast'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'ymd'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        d<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'forecast'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'week'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        d<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'forecast'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        d<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'forecast'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'low'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        d<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'forecast'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'high'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        d<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'forecast'</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'notice'</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
    w_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
seven_days_weather <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>w_list<span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'], ['</span><span class="token punctuation">,</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">', '</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'['</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">']'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'\''</span><span class="token punctuation">,</span><span class="token string">' '</span><span class="token punctuation">)</span>
msg_total <span class="token operator">=</span> <span class="token punctuation">(</span>msg <span class="token operator">+</span> <span class="token string">'\n\n'</span><span class="token operator">+</span> seven_days_weather<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>msg_total<span class="token punctuation">)</span>
notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">"保定天气"</span><span class="token punctuation">,</span> msg_total<span class="token punctuation">)</span>
</code></pre> 
<p><mark>说明</mark>需要配置环境变量<code>cityInfo</code>，<a href="https://fastly.jsdelivr.net/gh/Oreomeow/checkinpanel@master/city.json" rel="nofollow">查看自己城市代码地址</a></p> 
<h3><a id="_868"></a>下一个节假日</h3> 
<pre><code class="prism language-python"><span class="token comment"># @author Sten</span>
<span class="token comment"># 作者仓库:https://github.com/aefa6/QinglongScript.git</span>
<span class="token comment"># 觉得不错麻烦点个star谢谢</span>

<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json
<span class="token keyword">import</span> notify

title <span class="token operator">=</span> <span class="token string">"下个节假日"</span> 

dateurl <span class="token operator">=</span> <span class="token string">'https://date.appworlds.cn/next'</span>
date1url <span class="token operator">=</span> <span class="token string">'https://date.appworlds.cn/next/days'</span>
holiday <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>dateurl<span class="token punctuation">)</span>
holiday1 <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>date1url<span class="token punctuation">)</span>

desc <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>holiday<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
desc1 <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>holiday1<span class="token punctuation">.</span>text<span class="token punctuation">)</span>

daytime <span class="token operator">=</span> desc<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'date'</span><span class="token punctuation">]</span>
dayname <span class="token operator">=</span> desc<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">]</span>
Remain <span class="token operator">=</span> desc1<span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span>

info <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"""
下个节假日是</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>Remain<span class="token punctuation">}</span></span><span class="token string">天后的</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>dayname<span class="token punctuation">}</span></span><span class="token string">（</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>daytime<span class="token punctuation">}</span></span><span class="token string">）
"""</span></span>
<span class="token keyword">print</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span>title<span class="token punctuation">,</span> info<span class="token punctuation">)</span>

</code></pre> 
<h3><a id="60s_901"></a>每天60s</h3> 
<pre><code class="prism language-python"><span class="token comment"># @author Sten</span>
<span class="token comment"># 作者仓库:https://github.com/aefa6/QinglongScript.git</span>
<span class="token comment"># 觉得不错麻烦点个star谢谢</span>
<span class="token comment"># 使用青龙自带的通知</span>
<span class="token keyword">import</span> requests
<span class="token keyword">import</span> json
<span class="token keyword">import</span> notify

url <span class="token operator">=</span> <span class="token string">'https://60s.viki.moe/?encoding=text'</span>
resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">)</span>

<span class="token comment"># 分片处理</span>
pieces <span class="token operator">=</span> resp<span class="token punctuation">.</span>text<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>
content1 <span class="token operator">=</span> <span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>pieces<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  
content2 <span class="token operator">=</span> <span class="token string">'\n'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>pieces<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

info1 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"""
</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>content1<span class="token punctuation">}</span></span><span class="token string">   
"""</span></span>
info2 <span class="token operator">=</span> <span class="token string-interpolation"><span class="token string">f"""
</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>content2<span class="token punctuation">}</span></span><span class="token string">   
"""</span></span>

<span class="token comment"># 发送分片推送  </span>
notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">"每天60s读懂世界"</span><span class="token punctuation">,</span> info1 <span class="token operator">+</span> <span class="token string">"\n\n"</span><span class="token punctuation">)</span>
notify<span class="token punctuation">.</span>send<span class="token punctuation">(</span><span class="token string">"每天60s读懂世界"</span><span class="token punctuation">,</span> info2<span class="token punctuation">)</span>

</code></pre> 
<h3><a id="_932"></a>小米社区签到</h3> 
<p><a href="https://github.com/0-8-4/miui-auto-tasks">github地址</a><br> <mark>截止到2023.11.12，问题出现：人机校验失败</mark><br> <img src="https://images2.imgbox.com/ef/74/EMLl1qy7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bb/3b/QNXyC88j_o.png" alt="在这里插入图片描述"><br> <code>问题等待大佬解决中。。。</code><br> <mark>2023.11.14</mark>问题解决，这就是效率！！！<br> <img src="https://images2.imgbox.com/86/c3/igV5KFkq_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_941"></a>代码</h4> 
<p><img src="https://images2.imgbox.com/9e/7c/cwxvzUD0_o.png" alt="在这里插入图片描述"><br> 打开<code>requirement.txt</code>文件，按照里面的需求<code>安装对应的依赖</code>。</p> 
<blockquote> 
 <p>requests&gt;=2.25.1<br> python-dotenv&gt;=0.19.2<br> PyYAML&gt;=6.0<br> onepush</p> 
</blockquote> 
<p>文件只需要<code>utils包、config.yml、miuitask.py</code>下载<br> 查看代码默认的推行方式好像是onepush，如果想更改为pushplus，进行如下的代码修改：</p> 
<blockquote> 
 <ol><li>复制一个<code>notify.py</code>文件到最外面文件，即跟utils在同一个包下。【这个只要用来消息提醒的】</li><li><code>import notify</code>在<code>untils.py</code>中引入</li><li>代码修改：<img src="https://images2.imgbox.com/87/72/3sQQsUyk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/66/47/kzrBWku7_o.png" alt="在这里插入图片描述"><br> 去掉<code>x</code>部分，然后添加代码<code>notify.send(“标题”,content)</code></li></ol> 
</blockquote> 
<h3><a id="epic_960"></a>epic消息提醒</h3> 
<p>暂时只找到epic的每周消息提醒，没找到自动签到领取，需要手动进行领取。<br> <a href="https://github.com/hypersport/Epic-Weekly-Free-Games">github地址</a><br> 只需要下载<code>mian.py</code>即可</p> 
<pre><code class="prism language-bash"><span class="token function">import</span> json
<span class="token function">import</span> requests
from datetime <span class="token function">import</span> datetime


def get_free_games<span class="token punctuation">(</span><span class="token punctuation">)</span> -<span class="token operator">&gt;</span> dict:
    timestamp <span class="token operator">=</span> datetime.timestamp<span class="token punctuation">(</span>datetime.now<span class="token punctuation">(</span><span class="token punctuation">))</span>
    games <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'timestamp'</span><span class="token builtin class-name">:</span> timestamp, <span class="token string">'free_now'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>, <span class="token string">'free_next'</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
    base_store_url <span class="token operator">=</span> <span class="token string">'https://store.epicgames.com'</span>
    api_url <span class="token operator">=</span> <span class="token string">'https://store-site-backend-static.ak.epicgames.com/freeGamesPromotions?country=CN'</span>
    resp <span class="token operator">=</span> requests.get<span class="token punctuation">(</span>api_url<span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">element</span> <span class="token keyword">in</span> resp.json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'data'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'Catalog'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'searchStore'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'elements'</span><span class="token punctuation">]</span>:
        <span class="token keyword">if</span> promotions :<span class="token operator">=</span> element<span class="token punctuation">[</span><span class="token string">'promotions'</span><span class="token punctuation">]</span>:
            game <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
            game<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span>
            game<span class="token punctuation">[</span><span class="token string">'images'</span><span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">[</span><span class="token string">'keyImages'</span><span class="token punctuation">]</span>
            game<span class="token punctuation">[</span><span class="token string">'origin_price'</span><span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'totalPrice'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'fmtPrice'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'originalPrice'</span><span class="token punctuation">]</span>
            game<span class="token punctuation">[</span><span class="token string">'discount_price'</span><span class="token punctuation">]</span> <span class="token operator">=</span> element<span class="token punctuation">[</span><span class="token string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'totalPrice'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'fmtPrice'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'discountPrice'</span><span class="token punctuation">]</span>
            game<span class="token punctuation">[</span><span class="token string">'store_url'</span><span class="token punctuation">]</span> <span class="token operator">=</span> f<span class="token string">"{base_store_url}/p/{element['catalogNs']['mappings'][0]['pageSlug']}"</span> <span class="token keyword">if</span> element<span class="token punctuation">[</span><span class="token string">'catalogNs'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'mappings'</span><span class="token punctuation">]</span> <span class="token keyword">else</span> base_store_url
            <span class="token keyword">if</span> offers :<span class="token operator">=</span> promotions<span class="token punctuation">[</span><span class="token string">'promotionalOffers'</span><span class="token punctuation">]</span>:
                game<span class="token punctuation">[</span><span class="token string">'start_date'</span><span class="token punctuation">]</span> <span class="token operator">=</span> offers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'promotionalOffers'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'startDate'</span><span class="token punctuation">]</span>
                game<span class="token punctuation">[</span><span class="token string">'end_date'</span><span class="token punctuation">]</span> <span class="token operator">=</span> offers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'promotionalOffers'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'endDate'</span><span class="token punctuation">]</span>
                games<span class="token punctuation">[</span><span class="token string">'free_now'</span><span class="token punctuation">]</span>.append<span class="token punctuation">(</span>game<span class="token punctuation">)</span>
            <span class="token keyword">if</span> offers :<span class="token operator">=</span> promotions<span class="token punctuation">[</span><span class="token string">'upcomingPromotionalOffers'</span><span class="token punctuation">]</span>:
                game<span class="token punctuation">[</span><span class="token string">'start_date'</span><span class="token punctuation">]</span> <span class="token operator">=</span> offers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'promotionalOffers'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'startDate'</span><span class="token punctuation">]</span>
                game<span class="token punctuation">[</span><span class="token string">'end_date'</span><span class="token punctuation">]</span> <span class="token operator">=</span> offers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'promotionalOffers'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'endDate'</span><span class="token punctuation">]</span>
                games<span class="token punctuation">[</span><span class="token string">'free_next'</span><span class="token punctuation">]</span>.append<span class="token punctuation">(</span>game<span class="token punctuation">)</span>
    <span class="token builtin class-name">return</span> games


def generate_json<span class="token punctuation">(</span>games: dict, filename: str<span class="token punctuation">)</span>:
    with open<span class="token punctuation">(</span>filename, <span class="token string">'w'</span><span class="token punctuation">)</span> as f:
        json.dump<span class="token punctuation">(</span>games, f<span class="token punctuation">)</span>
        <span class="token comment"># json.dump(obj=games, fp=f, ensure_ascii=False, indent=4)</span>


def generate_markdown<span class="token punctuation">(</span>games: dict, filename: str<span class="token punctuation">)</span>:
    images <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    data <span class="token operator">=</span> games<span class="token punctuation">[</span><span class="token string">'free_now'</span><span class="token punctuation">]</span> + games<span class="token punctuation">[</span><span class="token string">'free_next'</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> <span class="token for-or-select variable">game</span> <span class="token keyword">in</span> data:
        <span class="token keyword">for</span> <span class="token for-or-select variable">image</span> <span class="token keyword">in</span> game<span class="token punctuation">[</span><span class="token string">'images'</span><span class="token punctuation">]</span>:
            <span class="token keyword">if</span> image<span class="token punctuation">[</span><span class="token string">'type'</span><span class="token punctuation">]</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">'OfferImageWide'</span>, <span class="token string">'VaultClosed'</span><span class="token punctuation">]</span>:
                images<span class="token punctuation">[</span>game<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">[</span><span class="token string">'url'</span><span class="token punctuation">]</span>
                <span class="token builtin class-name">break</span>

    content <span class="token operator">=</span> <span class="token string">''</span>'<span class="token comment"># Epic 每周限免</span>

- <span class="token comment">## 本周限免</span>

<span class="token string">''</span>'

    <span class="token keyword">for</span> <span class="token for-or-select variable">game</span> <span class="token keyword">in</span> games<span class="token punctuation">[</span><span class="token string">'free_now'</span><span class="token punctuation">]</span>:
        content <span class="token operator">+=</span> f<span class="token string">''</span>'
  - <span class="token comment">### [{game['title']}]({game['store_url']} "{game['title']}")</span>

    原价: <span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'origin_price'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>

    购买链接: <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'store_url'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'store_url'</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token string">"{game['title']}"</span><span class="token punctuation">)</span>

    <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>images<span class="token punctuation">[</span>game<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token string">''</span>'

    content <span class="token operator">+=</span> f<span class="token string">''</span>'
- <span class="token comment">## 下周限免</span>

<span class="token string">''</span>'

    <span class="token keyword">for</span> <span class="token for-or-select variable">game</span> <span class="token keyword">in</span> games<span class="token punctuation">[</span><span class="token string">'free_next'</span><span class="token punctuation">]</span>:
        content <span class="token operator">+=</span> f<span class="token string">''</span>'
  - <span class="token comment">### [{game['title']}]({game['store_url']} "{game['title']}")</span>

    原价: <span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'origin_price'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>

    购买链接: <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'store_url'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'store_url'</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token string">"{game['title']}"</span><span class="token punctuation">)</span>

    <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>game<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>images<span class="token punctuation">[</span>game<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token string">''</span>'

    with open<span class="token punctuation">(</span>filename, <span class="token string">'w'</span><span class="token punctuation">)</span> as f:
        f.write<span class="token punctuation">(</span>content<span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token builtin class-name">:</span>
    games <span class="token operator">=</span> get_free_games<span class="token punctuation">(</span><span class="token punctuation">)</span>
    generate_json<span class="token punctuation">(</span>games, <span class="token string">'./epic_free_games.json'</span><span class="token punctuation">)</span>
    generate_markdown<span class="token punctuation">(</span>games, <span class="token string">'./README.md'</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <p>代码优化：</p> 
 <ol><li><code>import notify</code>引入到main.py中【消息提醒】</li><li>修改代码：最后加上<br> file = open(‘help.md’,‘r’,encoding=‘utf-8’).read()<br> html = markdown(file)<br> notify.send(“标题”,html)</li></ol> 
</blockquote> 
<p>效果图：<br> <img src="https://images2.imgbox.com/13/2e/IMjPjy60_o.png" alt="在这里插入图片描述"></p> 
<p><a href="https://blog.csdn.net/weixin_42081389/article/details/103290014">md转html链接【csdn】</a></p> 
<hr> 
<h3><a id="_1075"></a>欢迎大家投稿</h3>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/49c924f6a25d79c493bd5ce1e228ee39/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">FPGA\CPLD 设计学习笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d330f93d1b31ef624dce59d4184ab2ee/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">antlr4错误处理(came as a complete surprise to me while matching alternative LeftRecursiveRuleTransforme)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>