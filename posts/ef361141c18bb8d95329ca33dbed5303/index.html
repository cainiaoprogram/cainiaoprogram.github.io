<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue-video-player 一款vue的前端视频播放插件 支持m3u8 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue-video-player 一款vue的前端视频播放插件 支持m3u8" />
<meta property="og:description" content="项目进行时, 对视频模块需要进行组件开发，结合当前使用的开发框架是vuecli。 于是寻找到vue-video-player 根据github上的文档进行开发，发现并不能实现播放功能，于是在网站上进行寻找发现，vue-video-player依赖于videojs
效果图
1、安装： npm install vue-video-player --save
推流/m3u8 需要：npm install --save videojs-contrib-hls
2、当前版本： &#34;vue&#34;: &#34;^2.6.11&#34;, &#34;vue-video-player&#34;: &#34;^5.0.2&#34;, &#34;videojs-contrib-hls&#34;: &#34;^5.15.0&#34;, 3、vue-video-player 官方文档： &lt;template&gt; &lt;!-- video-player-box ==&gt; video-player vjs-custom-skin --&gt; &lt;video-player class=&#34;video-player vjs-custom-skin&#34; ref=&#34;videoPlayer&#34; :options=&#34;playerOptions&#34; :playsinline=&#34;true&#34;&gt; &lt;/video-player&gt; &lt;/template&gt; &lt;script&gt; // 需要添加的配置 // videojs -- videoPlayer 核心 import videojs from &#39;video.js&#39; import &#39;vue-video-player/src/custom-theme.css&#39;; // 根据官方文档配置发现没有效果 import &#39;video.js/dist/video-js.css&#39; import { videoPlayer } from &#39;vue-video-player&#39; export default { components: { videoPlayer }, data() { return { playerOptions: { // videojs options muted: true, language: &#39;en&#39;, playbackRates: [0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ef361141c18bb8d95329ca33dbed5303/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-06T18:53:20+08:00" />
<meta property="article:modified_time" content="2023-04-06T18:53:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue-video-player 一款vue的前端视频播放插件 支持m3u8</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>项目进行时, 对视频模块需要进行组件开发，结合当前使用的开发框架是vuecli。 于是寻找到<a href="https://github.com/surmon-china/vue-video-player#readme"><code>vue-video-player</code></a> 根据github上的文档进行开发，发现并不能实现播放功能，于是在网站上进行寻找发现，<a href="https://github.com/surmon-china/vue-video-player#readme"><code>vue-video-player</code></a>依赖于<a href="https://github.com/videojs/video.js"><code>videojs</code></a></p> 
</blockquote> 
<p>效果图<br> <img src="https://images2.imgbox.com/1f/0a/JiLX6m08_o.png" alt="在这里插入图片描述"></p> 
<p><font size="3">1、安装： </font><br> <code>npm install vue-video-player --save</code><br> 推流/m3u8 需要：<code>npm install --save videojs-contrib-hls</code></p> 
<p><font size="3">2、当前版本： </font></p> 
<pre><code class="prism language-javascript">	<span class="token string-property property">"vue"</span><span class="token operator">:</span> <span class="token string">"^2.6.11"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"vue-video-player"</span><span class="token operator">:</span> <span class="token string">"^5.0.2"</span><span class="token punctuation">,</span>
	<span class="token string-property property">"videojs-contrib-hls"</span><span class="token operator">:</span> <span class="token string">"^5.15.0"</span><span class="token punctuation">,</span>
</code></pre> 
<p><font size="3">3、vue-video-player 官方文档： </font></p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> video<span class="token operator">-</span>player<span class="token operator">-</span>box <span class="token operator">==</span><span class="token operator">&gt;</span> video<span class="token operator">-</span>player vjs<span class="token operator">-</span>custom<span class="token operator">-</span>skin <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>video<span class="token operator">-</span>player  
		<span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"video-player vjs-custom-skin"</span>
		ref<span class="token operator">=</span><span class="token string">"videoPlayer"</span>
		<span class="token operator">:</span>options<span class="token operator">=</span><span class="token string">"playerOptions"</span>
		<span class="token operator">:</span>playsinline<span class="token operator">=</span><span class="token string">"true"</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>video<span class="token operator">-</span>player<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>  
<span class="token comment">// 需要添加的配置</span>
<span class="token comment">// videojs -- videoPlayer 核心  </span>
<span class="token keyword">import</span> videojs <span class="token keyword">from</span> <span class="token string">'video.js'</span>
<span class="token keyword">import</span> <span class="token string">'vue-video-player/src/custom-theme.css'</span><span class="token punctuation">;</span>
<span class="token comment">// 根据官方文档配置发现没有效果</span>
<span class="token keyword">import</span> <span class="token string">'video.js/dist/video-js.css'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> videoPlayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-video-player'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    videoPlayer
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  	<span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
  		<span class="token literal-property property">playerOptions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
		   <span class="token comment">// videojs options</span>
		   <span class="token literal-property property">muted</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
		   <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'en'</span><span class="token punctuation">,</span>
		   <span class="token literal-property property">playbackRates</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		   <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
		     <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"video/mp4"</span><span class="token punctuation">,</span>
		     <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://cdn.theguardian.tv/webM/2015/07/20/150716YesMen_synd_768k_vp8.webm"</span>
		   <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
		   <span class="token literal-property property">poster</span><span class="token operator">:</span> <span class="token string">"/static/images/author.jpg"</span><span class="token punctuation">,</span>
		 <span class="token punctuation">}</span>
  	<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 <span class="token operator">...</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p><font size="3">4、注意点 </font></p> 
<blockquote> 
 <p>1、video-player标签的<code>class</code>必须设置成<code>“video-player vjs-custom-skin”</code>，你引入的样式才能起作用。我刚开始做时，直接拷贝的github页的代码，那个代码的class是video-player-box。<br> 2、vue-video-player 是根据 <code>videojs</code> 进行了封装 所以<code>必须导入video.js</code> (video.js 已经被vue-video-player安装不需要重新安装 直接导入即可)<br> 3、vue-video-player 安装完 可以在<code>node_modules</code>中查看 部分视频播放插件</p> 
</blockquote> 
<p><font size="3">5、vue-video-player 组件 根据自己的需求进行开发即可</font></p> 
<pre><code class="prism language-javascript">
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"video"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>video<span class="token operator">-</span>player  
      <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"video-player vjs-custom-skin"</span>
      ref<span class="token operator">=</span><span class="token string">"videoPlayer"</span>
      <span class="token operator">:</span>playsinline<span class="token operator">=</span><span class="token string">"playsinline"</span>
      <span class="token operator">:</span>options<span class="token operator">=</span><span class="token string">"playerOptions"</span>

      @play<span class="token operator">=</span><span class="token string">"onPlayerPlay($event)"</span>
      @pause<span class="token operator">=</span><span class="token string">"onPlayerPause($event)"</span>
      @ended<span class="token operator">=</span><span class="token string">"onPlayerEnded($event)"</span>
      @waiting<span class="token operator">=</span><span class="token string">"onPlayerWaiting($event)"</span>
      @playing<span class="token operator">=</span><span class="token string">"onPlayerPlaying($event)"</span>
      @loadeddata<span class="token operator">=</span><span class="token string">"onPlayerLoadeddata($event)"</span>
      @timeupdate<span class="token operator">=</span><span class="token string">"onPlayerTimeupdate($event)"</span>
      @canplay<span class="token operator">=</span><span class="token string">"onPlayerCanplay($event)"</span>
      @canplaythrough<span class="token operator">=</span><span class="token string">"onPlayerCanplaythrough($event)"</span>
      @statechanged<span class="token operator">=</span><span class="token string">"playerStateChanged($event)"</span>
      @ready<span class="token operator">=</span><span class="token string">"playerReadied"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>video<span class="token operator">-</span>player<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">/* eslint-disable */</span>
<span class="token keyword">import</span> <span class="token string">'video.js/dist/video-js.css'</span>
<span class="token keyword">import</span> <span class="token string">'vue-video-player/src/custom-theme.css'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'videojs-contrib-hls'</span> <span class="token comment">// 直播推流</span>

<span class="token keyword">import</span> videojs <span class="token keyword">from</span> <span class="token string">'video.js'</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> videoPlayer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-video-player'</span>


<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'videoComponents'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    videoPlayer
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 当前的options 配置</span>
    <span class="token literal-property property">selfOptions</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
    <span class="token comment">// 播放速度</span>
    <span class="token literal-property property">playbackRates</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token number">0.7</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 封面</span>
    <span class="token literal-property property">poster</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token comment">// https://cz-video-photo.oss-cn-beijing.aliyuncs.com/20191108/aca6e6915d369e07db055127d3e3738c00001.jpg</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 视频无法播放时提示信息</span>
    <span class="token literal-property property">notSupportedMessage</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'此视频暂无法播放，请稍后再试!!!'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 视频显示比例</span>
    <span class="token literal-property property">aspectRatio</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'16:9'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 语言设置</span>
    <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'zh-CN'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 设置controBar </span>
    <span class="token literal-property property">controlBar</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Object<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">timeDivider</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当前时间和持续时间的分隔符</span>
        <span class="token literal-property property">durationDisplay</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 时长显示</span>
        <span class="token literal-property property">remainingTimeDisplay</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 剩下时间</span>
        <span class="token literal-property property">currentTimeDisplay</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当前时间</span>
        <span class="token literal-property property">volumeControl</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 声音控制键</span>
        <span class="token literal-property property">playToggle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 暂停和播放键</span>
        <span class="token literal-property property">progressControl</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 进度条</span>
        <span class="token literal-property property">fullscreenToggle</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 全屏按钮</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 数据源</span>
    <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>
      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
        <span class="token punctuation">[</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"video/mp4"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://cdn.theguardian.tv/webM/2015/07/20/150716YesMen_synd_768k_vp8.webm"</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 是否循环播放</span>
    <span class="token literal-property property">loop</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token comment">// 是否在不全屏状态下外放声音</span>
    <span class="token literal-property property">muted</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token comment">// 是否浏览器 准备好后自动播放</span>
    <span class="token literal-property property">autoplay</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token comment">// 是否直播</span>
    <span class="token literal-property property">isLive</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">playbackRates</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>playbackRates<span class="token punctuation">,</span> <span class="token comment">// 播放速度</span>
        <span class="token literal-property property">autoplay</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>autoplay<span class="token punctuation">,</span> <span class="token comment">// 如果true,浏览器准备好时开始回放。</span>
        <span class="token literal-property property">muted</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>muted<span class="token punctuation">,</span> <span class="token comment">// 默认情况下将会消除任何音频。--- 不全屏播放的时候是否禁止声音外放</span>
        <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>loop<span class="token punctuation">,</span> <span class="token comment">// 导致视频一结束就重新开始。</span>
        <span class="token literal-property property">preload</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span> <span class="token comment">// 建议浏览器在&lt;video&gt;加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）</span>
        <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>language<span class="token punctuation">,</span>
        <span class="token literal-property property">aspectRatio</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>aspectRatio<span class="token punctuation">,</span> <span class="token comment">// 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如"16:9"或"4:3"）</span>
        <span class="token literal-property property">fluid</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。</span>
        <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sources<span class="token punctuation">,</span>
        <span class="token literal-property property">poster</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>poster<span class="token punctuation">,</span> <span class="token comment">// 你的封面地址</span>
        <span class="token literal-property property">width</span><span class="token operator">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span> <span class="token comment">// 播放器宽度</span>
        <span class="token literal-property property">notSupportedMessage</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>notSupportedMessage<span class="token punctuation">,</span> <span class="token comment">// 允许覆盖Video.js无法播放媒体源时显示的默认信息。</span>
        <span class="token literal-property property">controlBar</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>controlBar<span class="token punctuation">,</span>
        <span class="token literal-property property">hls</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 记录当前播放时间</span>
      <span class="token literal-property property">nowPlayer</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 当前播放对象实例</span>
    <span class="token function">videoObj</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>videoPlayer<span class="token punctuation">.</span>player
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// true表示默认情况下应尝试内联播放-false表示我们应使用浏览器的默认播放模式</span>
    <span class="token function">playsinline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">var</span> ua <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLocaleLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">tencenttraveler</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">||</span> ua<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">qqbrowse</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token boolean">true</span>             
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token comment">// vue-video-player</span>
    <span class="token function">playerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isLive<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">playbackRates</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//可选择的播放速度</span>
          <span class="token literal-property property">autoplay</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//如果true,浏览器准备好时开始回放。</span>
          <span class="token literal-property property">muted</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 默认情况下将会消除任何音频。</span>
          <span class="token literal-property property">loop</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 视频一结束就重新开始。</span>
          <span class="token literal-property property">preload</span><span class="token operator">:</span> <span class="token string">"auto"</span><span class="token punctuation">,</span> <span class="token comment">// 建议浏览器在&lt;video&gt;加载元素后是否应该开始下载视频数据。auto浏览器选择最佳行为,立即开始加载视频（如果浏览器支持）</span>
          <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">"zh-CN"</span><span class="token punctuation">,</span>
          <span class="token literal-property property">aspectRatio</span><span class="token operator">:</span> <span class="token string">"16:9"</span><span class="token punctuation">,</span> <span class="token comment">// 将播放器置于流畅模式，并在计算播放器的动态大小时使用该值。值应该代表一个比例 - 用冒号分隔的两个数字（例如"16:9"或"4:3"）</span>
          <span class="token literal-property property">fluid</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当true时，Video.js player将拥有流体大小。换句话说，它将按比例缩放以适应其容器。</span>
          <span class="token literal-property property">sources</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{<!-- --></span>
              <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'application/x-mpegURL'</span><span class="token punctuation">,</span> <span class="token comment">// 这里的种类支持很多种：基本视频格式、直播、流媒体等</span>
              <span class="token literal-property property">src</span><span class="token operator">:</span> <span class="token string">"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8"</span><span class="token punctuation">,</span> <span class="token comment">//url地址</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token literal-property property">poster</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">//你的封面地址</span>
          <span class="token comment">// width: document.documentElement.clientWidth,</span>
          <span class="token literal-property property">notSupportedMessage</span><span class="token operator">:</span> <span class="token string">"此视频暂无法播放，请稍后再试"</span><span class="token punctuation">,</span> <span class="token comment">//允许覆盖Video.js无法播放媒体源时显示的默认信息。</span>
          <span class="token literal-property property">controlBar</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">timeDivider</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//当前时间和持续时间的分隔符</span>
            <span class="token literal-property property">durationDisplay</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//显示持续时间</span>
            <span class="token literal-property property">remainingTimeDisplay</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//是否显示剩余时间功能</span>
            <span class="token literal-property property">fullscreenToggle</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//全屏按钮</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>selfOptions<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>selfOptions<span class="token punctuation">)</span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">watch</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">// 播放回调</span>
    <span class="token function">onPlayerPlay</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 播放</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nowPlayer<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        player<span class="token punctuation">.</span><span class="token function">currentTime</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>nowPlayer<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 暂停回调</span>
    <span class="token function">onPlayerPause</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 视频播完回调</span>
    <span class="token function">onPlayerEnded</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>nowPlayer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// DOM元素上的readyState更改导致播放停止</span>
    <span class="token function">onPlayerWaiting</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 已开始播放回调</span>
    <span class="token function">onPlayerPlaying</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 当播放器在当前播放位置下载数据时触发</span>
    <span class="token function">onPlayerLoadeddata</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
      <span class="token comment">// 直播每次播放都会调用--录播只是刚开始调用一次 </span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 当前播放位置发生变化时触发。</span>
    <span class="token function">onPlayerTimeupdate</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 获取到当前的播放时间</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>nowPlayer <span class="token operator">=</span> player<span class="token punctuation">.</span><span class="token function">currentTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//媒体的readyState为HAVE_FUTURE_DATA或更高</span>
    <span class="token function">onPlayerCanplay</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//媒体的readyState为HAVE_ENOUGH_DATA或更高。这意味着可以在不缓冲的情况下播放整个媒体文件。</span>
    <span class="token function">onPlayerCanplaythrough</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//播放状态改变回调</span>
    <span class="token function">playerStateChanged</span><span class="token punctuation">(</span><span class="token parameter">playerCurrentState</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//将侦听器绑定到组件的就绪状态。与事件监听器的不同之处在于，如果ready事件已经发生，它将立即触发该函数。。</span>
    <span class="token function">playerReadied</span><span class="token punctuation">(</span><span class="token parameter">player</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Add <span class="token string">"scoped"</span> attribute to limit <span class="token constant">CSS</span> to <span class="token keyword">this</span> component only <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style scoped<span class="token operator">&gt;</span>
<span class="token comment">/* 播放按钮换成圆形 */</span>
<span class="token operator">/</span>deep<span class="token operator">/</span><span class="token punctuation">.</span>vjs<span class="token operator">-</span>custom<span class="token operator">-</span>skin <span class="token operator">&gt;</span> <span class="token punctuation">.</span>video<span class="token operator">-</span>js <span class="token punctuation">.</span>vjs<span class="token operator">-</span>big<span class="token operator">-</span>play<span class="token operator">-</span>button <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">height</span><span class="token operator">:</span> 2em<span class="token punctuation">;</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> 2em<span class="token punctuation">;</span>
  line<span class="token operator">-</span>height<span class="token operator">:</span> 2em<span class="token punctuation">;</span>
  border<span class="token operator">-</span>radius<span class="token operator">:</span> 1em<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>





</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f5955c6cfa21cc98404869291097ab38/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">stable-diffusion-webui安装（2）：扩展模块extensions——汉化、双语等</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a9b9f07649601956641e0942f6067883/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">搭建WeCross跨链平台，并编写跨链智能合约</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>