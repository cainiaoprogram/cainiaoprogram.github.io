<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何吃，少花钱又营养丰富？可用MindOpt线性规划求解来决策 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何吃，少花钱又营养丰富？可用MindOpt线性规划求解来决策" />
<meta property="og:description" content="文章目录 问题定义问题类型集合参数决策变量目标函数约束条件 数据 使用MindOpt求解器的API方法1：cell中直接输入代码运行方法2：命令行直接运行.py文件方法3:复制案例广场的例子 求解结果联系我们 不知大家小时候有没有和我一样的经历，爸妈说我挑食，这不吃那不吃，这个有营养多吃点，哪个吃多了不好…，后来我们长大了，才发现，他们不是不挑食，而且他们买的都是他们喜欢吃的。当然也有跟着爷爷奶奶过日子的时候，爷爷奶奶平时就比较节俭，讲究一个便宜。我们能不能用科学的方法来设定菜单，达到少花钱又营养呢？
本篇将介绍使用MindOpt来优化营养调配问题。（本例数据是假设的，决策值不能作为参考，仅为讲解决策算法用。）
营养调配问题的的目标是利用优化模型来设定每日饮食菜单，在满足各类营养的需求同时更能优化总成本．营养调配问题是可用线性优化来表达
决策 变量 为：以下食物调配多少量：起司汉堡 (Cheeseburger)、汉堡 (Hamburger)、火腿三明治 (Ham-sandwich)、鱼肉三民治 (Fish-sandwich)、鸡肉三民治 (Chicken-sandwich)、薯条 (Fries)、香肠比司吉 (Sausage biscuit)、低脂牛乳 (Low-fat milk)、和橙汁 (Orange juice)；约束 条件为：卡路里 (Cal.)、碳水化合物 (Carbo.)、蛋白质 (Portien)、维生素A/D (Vit. A/D)、铁 (Iron)和钙质 (Calc.)的每日摄取上/下限制，以及总量 (Volume) 限制；目标 函数则为：总成本的最小化． 问题定义 问题类型 线性优化问题，我们用先用集合和参数标明后面变量的取值关联信息。
集合 J : = { Cheeseburger, HamSandwich, Hamburger, FishSandwich, J := \{ \text{Cheeseburger, HamSandwich, Hamburger, FishSandwich, } J:={Cheeseburger, HamSandwich, Hamburger, FishSandwich, ChickenSandwich, Fries, SausageBiscuit, LowfatMilk, OrangeJuice } \text{ChickenSandwich, Fries, SausageBiscuit, LowfatMilk, OrangeJuice} \} ChickenSandwich, Fries, SausageBiscuit, LowfatMilk, OrangeJuice}" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c8993ab82b0183835406919896f3a782/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-03T17:39:36+08:00" />
<meta property="article:modified_time" content="2023-11-03T17:39:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何吃，少花钱又营养丰富？可用MindOpt线性规划求解来决策</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_12" rel="nofollow">问题定义</a></li><li><ul><li><a href="#_13" rel="nofollow">问题类型</a></li><li><ul><li><a href="#_16" rel="nofollow">集合</a></li><li><a href="#_24" rel="nofollow">参数</a></li><li><a href="#_33" rel="nofollow">决策变量</a></li><li><a href="#_37" rel="nofollow">目标函数</a></li><li><a href="#_41" rel="nofollow">约束条件</a></li></ul> 
   </li><li><a href="#_56" rel="nofollow">数据</a></li></ul> 
  </li><li><a href="#MindOptAPI_65" rel="nofollow">使用MindOpt求解器的API</a></li><li><ul><li><a href="#1cell_72" rel="nofollow">方法1：cell中直接输入代码运行</a></li><li><a href="#2py_345" rel="nofollow">方法2：命令行直接运行.py文件</a></li><li><a href="#3_361" rel="nofollow">方法3:复制案例广场的例子</a></li></ul> 
  </li><li><a href="#_365" rel="nofollow">求解结果</a></li><li><a href="#_387" rel="nofollow">联系我们</a></li></ul> 
</div> 
<p></p> 
<p>不知大家小时候有没有和我一样的经历，爸妈说我挑食，这不吃那不吃，这个有营养多吃点，哪个吃多了不好…，后来我们长大了，才发现，他们不是不挑食，而且他们买的都是他们喜欢吃的。当然也有跟着爷爷奶奶过日子的时候，爷爷奶奶平时就比较节俭，讲究一个便宜。我们能不能用科学的方法来设定菜单，达到少花钱又营养呢？</p> 
<p>本篇将介绍使用MindOpt来优化营养调配问题。（<strong>本例数据是假设的，决策值不能作为参考，仅为讲解决策算法用。</strong>）</p> 
<p>营养调配问题的的目标是利用优化模型来设定每日<strong>饮食菜单</strong>，在满足各类营养的需求同时更能优化总成本．营养调配问题是可用线性优化来表达</p> 
<ul><li>决策 <strong>变量</strong> 为：以下食物调配多少量：起司汉堡 (Cheeseburger)、汉堡 (Hamburger)、火腿三明治 (Ham-sandwich)、鱼肉三民治 (Fish-sandwich)、鸡肉三民治 (Chicken-sandwich)、薯条 (Fries)、香肠比司吉 (Sausage biscuit)、低脂牛乳 (Low-fat milk)、和橙汁 (Orange juice)；</li><li><strong>约束</strong> 条件为：卡路里 (Cal.)、碳水化合物 (Carbo.)、蛋白质 (Portien)、维生素A/D (Vit. A/D)、铁 (Iron)和钙质 (Calc.)的每日摄取上/下限制，以及总量 (Volume) 限制；</li><li><strong>目标</strong> 函数则为：总成本的最小化．</li><li><img src="https://images2.imgbox.com/22/b0/VLZLAsoT_o.png" alt="image.png"></li></ul> 
<h2><a id="_12"></a>问题定义</h2> 
<h3><a id="_13"></a>问题类型</h3> 
<p>线性优化问题，我们用先用集合和参数标明后面变量的取值关联信息。</p> 
<h4><a id="_16"></a>集合</h4> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          J 
         
        
          : 
         
        
          = 
         
        
          { 
         
        
          Cheeseburger, HamSandwich, Hamburger, FishSandwich,  
         
        
       
         J := \{ \text{Cheeseburger, HamSandwich, Hamburger, FishSandwich, } 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0962em;">J</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord text"><span class="mord">Cheeseburger, HamSandwich, Hamburger, FishSandwich, </span></span></span></span></span></span></li></ul> 
<p><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ChickenSandwich, Fries, SausageBiscuit, LowfatMilk, OrangeJuice 
        
       
         } 
        
       
      
        \text{ChickenSandwich, Fries, SausageBiscuit, LowfatMilk, OrangeJuice} \} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord">ChickenSandwich, Fries, SausageBiscuit, LowfatMilk, OrangeJuice</span></span><span class="mclose">}</span></span></span></span></span></p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          I 
         
        
          : 
         
        
          = 
         
         
         
           { 
          
         
           Cal 
          
         
           , 
          
         
           Carbo 
          
         
           , 
          
         
           Protein 
          
         
           , 
          
         
           VitA 
          
         
           , 
          
         
           VitC 
          
         
           , 
          
         
           Calc 
          
         
           , 
          
         
           Iron 
          
         
           , 
          
         
           Volume 
          
         
           } 
          
         
        
          . 
         
        
       
         I := \left \{ \text{Cal}, \text{Carbo}, \text{Protein}, \text{VitA}, \text{VitC}, \text{Calc}, \text{Iron}, \text{Volume} \right \}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0785em;">I</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;">{<!-- --></span><span class="mord text"><span class="mord">Cal</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord">Carbo</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord">Protein</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord">VitA</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord">VitC</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord">Calc</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord">Iron</span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord text"><span class="mord">Volume</span></span><span class="mclose delimcenter" style="top: 0em;">}</span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">.</span></span></span></span></span></li></ul> 
<h4><a id="_24"></a>参数</h4> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           c 
          
         
           j 
          
         
        
            
         
        
          ∀ 
         
        
          j 
         
        
          ∈ 
         
        
          J 
         
        
          : 
         
        
          食物  
         
        
          j 
         
        
           的单位成本 
         
        
          . 
         
        
       
         c_j~\forall j \in J: \text{食物}~j~\text{的单位成本}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9805em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord">∀</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0962em;">J</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord cjk_fallback">食物</span></span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord cjk_fallback">的单位成本</span></span><span class="mord">.</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           a 
          
          
          
            i 
           
          
            j 
           
          
         
        
            
         
        
          ∀ 
         
        
          i 
         
        
          ∈ 
         
        
          I 
         
        
          , 
         
        
          ∀ 
         
        
          j 
         
        
          ∈ 
         
        
          J 
         
        
          : 
         
        
          每单位的食物  
         
        
          j 
         
        
           中所富含的营养  
         
        
          i 
         
        
           总量 
         
        
          . 
         
        
       
         a_{ij}~\forall i \in I, \forall j \in J: \text{每单位的食物}~j~\text{中所富含的营养}~i~\text{总量}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9805em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0785em;">I</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">∀</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0962em;">J</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord cjk_fallback">每单位的食物</span></span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord cjk_fallback">中所富含的营养</span></span><span class="mspace nobreak"> </span><span class="mord mathnormal">i</span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord cjk_fallback">总量</span></span><span class="mord">.</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           l 
          
         
           i 
          
         
        
           and  
         
         
         
           u 
          
         
           i 
          
         
        
          , 
         
        
          ∀ 
         
        
          i 
         
        
          ∈ 
         
        
          I 
         
        
          : 
         
        
          营养  
         
        
          i 
         
        
           的单日摄取上限和下限 
         
        
          . 
         
        
       
         l_i~\text{and}~u_i, \forall i \in I: \text{营养 } i~\text{的单日摄取上限和下限}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0197em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord">and</span></span><span class="mspace nobreak"> </span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0785em;">I</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">营养</span><span class="mord"> </span></span><span class="mord mathnormal">i</span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord cjk_fallback">的单日摄取上限和下限</span></span><span class="mord">.</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           v 
          
         
           j 
          
         
        
            
         
        
          ∀ 
         
        
          j 
         
        
          ∈ 
         
        
          J 
         
        
          : 
         
        
          食物  
         
        
          j 
         
        
           的容积 
         
        
          . 
         
        
       
         v_j~\forall j \in J: \text{食物}~j~\text{的容积}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9805em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord">∀</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0962em;">J</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord cjk_fallback">食物</span></span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord cjk_fallback">的容积</span></span><span class="mord">.</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          v 
         
        
          : 
         
        
          所有食物的容积总量上界 
         
        
          . 
         
        
       
         v: \text{所有食物的容积总量上界}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">所有食物的容积总量上界</span></span><span class="mord">.</span></span></span></span></span></li></ul> 
<p>然后这个线性规划问题定义如下：</p> 
<h4><a id="_33"></a>决策变量</h4> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           x 
          
         
           j 
          
         
        
            
         
        
          ∀ 
         
        
          j 
         
        
          ∈ 
         
        
          J 
         
        
          : 
         
        
          食物  
         
        
          j 
         
        
            所摄取的单位量 
         
        
          . 
         
        
       
         x_j~\forall j \in J: \text{食物}~j~\text{ 所摄取的单位量}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9805em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace nobreak"> </span><span class="mord">∀</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0962em;">J</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord cjk_fallback">食物</span></span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord"> </span><span class="mord cjk_fallback">所摄取的单位量</span></span><span class="mord">.</span></span></span></span></span></li></ul> 
<h4><a id="_37"></a>目标函数</h4> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
          
          
            min 
           
          
            ⁡ 
           
          
          
          
            j 
           
          
            ∈ 
           
          
            J 
           
          
         
         
         
           c 
          
         
           j 
          
         
         
         
           x 
          
         
           j 
          
         
        
          : 
         
        
          总成本最小化 
         
        
          . 
         
        
       
         \min_{j \in J} c_j x_j: \text{总成本最小化}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.954em; vertical-align: -0.2861em;"></span><span class="mop"><span class="mop">min</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span><span class="mrel mtight">∈</span><span class="mord mathnormal mtight" style="margin-right: 0.0962em;">J</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">总成本最小化</span></span><span class="mord">.</span></span></span></span></span></li></ul> 
<h4><a id="_41"></a>约束条件</h4> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           l 
          
         
           i 
          
         
        
          ≤ 
         
         
         
           ∑ 
          
          
          
            j 
           
          
            ∈ 
           
          
            J 
           
          
         
         
         
           a 
          
          
          
            i 
           
          
            j 
           
          
         
         
         
           x 
          
         
           j 
          
         
        
          ≤ 
         
         
         
           u 
          
         
           i 
          
         
        
          , 
         
        
          ∀ 
         
        
          i 
         
        
          ∈ 
         
        
          I 
         
        
          : 
         
        
          营养  
         
        
          i 
         
        
           的摄取上下界 
         
        
          . 
         
        
       
         l_i \leq \sum_{j \in J} a_{ij} x_j \leq u_i, \forall i \in I: \text{营养 } i \text{ 的摄取上下界}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0197em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1858em; vertical-align: -0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: 0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1786em;"><span class="" style="top: -2.4003em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span><span class="mrel mtight">∈</span><span class="mord mathnormal mtight" style="margin-right: 0.0962em;">J</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4358em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">∀</span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0785em;">I</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord text"><span class="mord cjk_fallback">营养</span><span class="mord"> </span></span><span class="mord mathnormal">i</span><span class="mord text"><span class="mord"> </span><span class="mord cjk_fallback">的摄取上下界</span></span><span class="mord">.</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           ∑ 
          
          
          
            j 
           
          
            ∈ 
           
          
            J 
           
          
         
         
         
           v 
          
         
           j 
          
         
         
         
           x 
          
         
           j 
          
         
        
          ≤ 
         
        
          v 
         
        
          : 
         
        
          食物  
         
        
          j 
         
        
           摄取总量的上界 
         
        
          . 
         
        
       
         \sum_{j \in J} v_{j} x_j \leq v: \text{食物 }j \text{ 摄取总量的上界}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1858em; vertical-align: -0.4358em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position: relative; top: 0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1786em;"><span class="" style="top: -2.4003em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span><span class="mrel mtight">∈</span><span class="mord mathnormal mtight" style="margin-right: 0.0962em;">J</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4358em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8778em; vertical-align: -0.1944em;"></span><span class="mord text"><span class="mord cjk_fallback">食物</span><span class="mord"> </span></span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mord text"><span class="mord"> </span><span class="mord cjk_fallback">摄取总量的上界</span></span><span class="mord">.</span></span></span></span></span></li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           x 
          
         
           j 
          
         
        
          ≥ 
         
        
          0 
         
        
          , 
         
        
          ∀ 
         
        
          j 
         
        
          ∈ 
         
        
          J 
         
        
          : 
         
        
          食物  
         
        
          j 
         
        
           的攝取下界 (不可為負數) 
         
        
          . 
         
        
       
         x_j \geq 0, \forall j \in J: \text{食物}~j~\text{的攝取下界 (不可為負數)}. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9221em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0572em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">∀</span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0962em;">J</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord text"><span class="mord cjk_fallback">食物</span></span><span class="mspace nobreak"> </span><span class="mord mathnormal" style="margin-right: 0.0572em;">j</span><span class="mspace nobreak"> </span><span class="mord text"><span class="mord cjk_fallback">的攝取下界</span><span class="mord"> (</span><span class="mord cjk_fallback">不可為負數</span><span class="mord">)</span></span><span class="mord">.</span></span></span></span></span></li></ul> 
<p>总结下这个模型的数学公式为：</p> 
<hr> 
<p><img src="https://images2.imgbox.com/d5/a4/yAHlSk67_o.png" alt=""></p> 
<hr> 
<h3><a id="_56"></a>数据</h3> 
<p><img src="https://images2.imgbox.com/92/c9/S6CWKc0F_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/e9/22/yO1YfNsT_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="MindOptAPI_65"></a>使用MindOpt求解器的API</h2> 
<p>直接采用求解器的API，需要查阅API文档来理解API的意思，没有建模语言可读性高。请参阅<a href="https://solver.damo.alibaba.com/doc/html/API%20reference/API-python/index.html" rel="nofollow">https://solver.damo.alibaba.com/doc/html/API%20reference/API-python/index.html</a>来查看PythonAPI的使用说明。</p> 
<p>关于Python的例子，在<a href="https://developer.aliyun.com/group/opt?spm=a2c6h.12873639.article-detail.65.1500459ct5OJ17#/?_k=sd8lkn" rel="nofollow">达摩院 MindOpt优化</a>中文社区中有Python的示例。这里是个LP的问题，我们可以参考：<a href="https://developer.aliyun.com/article/1090860?spm=a2c6h.26396819.creator-center.8.14fb3e182y9iZl" rel="nofollow">https://developer.aliyun.com/article/1090860?spm=a2c6h.26396819.creator-center.8.14fb3e182y9iZl</a></p> 
<p>下面我们分三种方式描述在本平台环境中的运行方法：</p> 
<h3><a id="1cell_72"></a>方法1：cell中直接输入代码运行</h3> 
<p>示例：进入<a href="https://opt.aliyun.com" rel="nofollow">官网</a>&gt;进入线上平台&gt;创建项目&gt;输入代码<img src="https://images2.imgbox.com/70/d5/aZNkvqg7_o.gif" alt="云上平台运行python案例.gif"><br> 请运行下面cell中的代码，点击本窗口上面的播放△运行，或者摁shift+enter键运行:</p> 
<pre><code># LP_2_diet.py

"""
/**
 *  example_2_py1.py
 *  Description 
 *  -----------
 *
 *  Linear optimization (diet problem).
 * 
 *  The goal is to select foods that satisfy daily nutritional requirements while minimizing the total cost. 
 *  The constraints in this problem limit the number of calories, the volume of good consumed, and the amount of 
 *  vitamins, protein, carbohydrates, calcium, and iron in the diet.
 *
 *  Note
 *  ----
 * 
 *  The model below will be inputted in a row-wise order.
 *
 *  Formulation
 *  -----------
 *
 * Minimize
 * Obj:        1.840000000 Cheeseburger + 2.190000000 HamSandwich + 1.840000000 Hamburger + 1.440000000 FishSandwich +
 *             2.290000000 ChickenSandwich + 0.770000000 Fries + 1.290000000 SausageBiscuit + 0.600000000 LowfatMilk + 
 *             0.720000000 OrangeJuice
 * Subject To
 * Cal:        510 Cheeseburger + 370 HamSandwich + 500 Hamburger + 370 FishSandwich +
 *             400 ChickenSandwich + 220 Fries + 345 SausageBiscuit + 110 LowfatMilk + 80 OrangeJuice &gt;= 2000
 * Carbo:      34 Cheeseburger + 35 HamSandwich + 42 Hamburger + 38 FishSandwich + 42 ChickenSandwich + 
 *             26 Fries + 27 SausageBiscuit + 12 LowfatMilk + 20 OrangeJuice &lt;= 375
 * Carbo_low:  34 Cheeseburger + 35 HamSandwich + 42 Hamburger + 38 FishSandwich + 42 ChickenSandwich + 
 *             26 Fries + 27 SausageBiscuit + 12 LowfatMilk + 20 OrangeJuice &gt;= 350
 * Protein:    28 Cheeseburger + 24 HamSandwich + 25 Hamburger + 14 FishSandwich + 31 ChickenSandwich + 
 *             3 Fries + 15 SausageBiscuit + 9 LowfatMilk + OrangeJuice &gt;= 55
 * VitA:       15 Cheeseburger + 15 HamSandwich + 6 Hamburger + 2 FishSandwich + 8 ChickenSandwich + 
 *             4 SausageBiscuit + 10 LowfatMilk + 2 OrangeJuice &gt;= 100
 * VitC:       6 Cheeseburger + 10 HamSandwich + 2 Hamburger + 15 ChickenSandwich + 
 *             15 Fries + 4 LowfatMilk + 120 OrangeJuice &gt;= 100
 * Calc:       30 Cheeseburger + 20 HamSandwich + 25 Hamburger + 15 FishSandwich + 
 *             15 ChickenSandwich + 20 SausageBiscuit + 30 LowfatMilk + 2 OrangeJuice &gt;= 100
 * Iron:       20 Cheeseburger + 20 HamSandwich + 20 Hamburger + 10 FishSandwich + 
 *             8 ChickenSandwich + 2 Fries + 15 SausageBiscuit + 2 OrangeJuice &gt;= 100
 * Volume:     4 Cheeseburger + 7.500000000 HamSandwich + 3.500000000 Hamburger + 5 FishSandwich + 
 *             7.300000000 ChickenSandwich + 2.600000000 Fries + 4.100000000 SausageBiscuit + 8 LowfatMilk + 12 OrangeJuice &lt;= 75
 * Bounds
 * End
 */
"""
from mindoptpy import *


if __name__ == "__main__":

    MDO_INFINITY = MdoModel.get_infinity()

    req = \
    {   
        # requirement: ( lower bound,   upper bound)
        "Cal"        : (         2000, MDO_INFINITY), 
        "Carbo"      : (          350,          375),
        "Protein"    : (           55, MDO_INFINITY), 
        "VitA"       : (          100, MDO_INFINITY),
        "VitC"       : (          100, MDO_INFINITY),
        "Calc"       : (          100, MDO_INFINITY), 
        "Iron"       : (          100, MDO_INFINITY), 
        "Volume"     : (-MDO_INFINITY,           75)
    }

    food = \
    {
        # food            : ( lower bound,  upper bound, cost)
        "Cheeseburger"    : (           0, MDO_INFINITY, 1.84),
        "HamSandwich"     : (           0, MDO_INFINITY, 2.19),
        "Hamburger"       : (           0, MDO_INFINITY, 1.84),
        "FishSandwich"    : (           0, MDO_INFINITY, 1.44),
        "ChickenSandwich" : (           0, MDO_INFINITY, 2.29),
        "Fries"           : (           0, MDO_INFINITY, 0.77),
        "SausageBiscuit"  : (           0, MDO_INFINITY, 1.29),
        "LowfatMilk"      : (           0, MDO_INFINITY, 0.60),
        "OrangeJuice"     : (           0, MDO_INFINITY, 0.72)
    }
    
    req_value = \
    {  
        # (requirement, food              ) : value
        ( "Cal",        "Cheeseburger"    ) : 510,
        ( "Cal",        "HamSandwich"     ) : 370,
        ( "Cal",        "Hamburger"       ) : 500,
        ( "Cal",        "FishSandwich"    ) : 370,
        ( "Cal",        "ChickenSandwich" ) : 400,
        ( "Cal",        "Fries"           ) : 220,
        ( "Cal",        "SausageBiscuit"  ) : 345,
        ( "Cal",        "LowfatMilk"      ) : 110,
        ( "Cal",        "OrangeJuice"     ) : 80,

        ( "Carbo",      "Cheeseburger"    ) : 34,
        ( "Carbo",      "HamSandwich"     ) : 35,
        ( "Carbo",      "Hamburger"       ) : 42,
        ( "Carbo",      "FishSandwich"    ) : 38,
        ( "Carbo",      "ChickenSandwich" ) : 42,
        ( "Carbo",      "Fries"           ) : 26,
        ( "Carbo",      "SausageBiscuit"  ) : 27,
        ( "Carbo",      "LowfatMilk"      ) : 12,
        ( "Carbo",      "OrangeJuice"     ) : 20,

        ( "Protein",    "Cheeseburger"    ) : 28,
        ( "Protein",    "HamSandwich"     ) : 24,
        ( "Protein",    "Hamburger"       ) : 25,
        ( "Protein",    "FishSandwich"    ) : 14,
        ( "Protein",    "ChickenSandwich" ) : 31,
        ( "Protein",    "Fries"           ) : 3,
        ( "Protein",    "SausageBiscuit"  ) : 15,
        ( "Protein",    "LowfatMilk"      ) : 9,
        ( "Protein",    "OrangeJuice"     ) : 1,

        ( "VitA",       "Cheeseburger"    ) : 15,
        ( "VitA",       "HamSandwich"     ) : 15,
        ( "VitA",       "Hamburger"       ) : 6,
        ( "VitA",       "FishSandwich"    ) : 2,
        ( "VitA",       "ChickenSandwich" ) : 8,
        ( "VitA",       "Fries"           ) : 0,
        ( "VitA",       "SausageBiscuit"  ) : 4,
        ( "VitA",       "LowfatMilk"      ) : 10,
        ( "VitA",       "OrangeJuice"     ) : 2,

        ( "VitC",       "Cheeseburger"    ) : 6,
        ( "VitC",       "HamSandwich"     ) : 10,
        ( "VitC",       "Hamburger"       ) : 2,
        ( "VitC",       "FishSandwich"    ) : 0,
        ( "VitC",       "ChickenSandwich" ) : 15,
        ( "VitC",       "Fries"           ) : 15,
        ( "VitC",       "SausageBiscuit"  ) : 0,
        ( "VitC",       "OrangeJuice"     ) : 4,
        ( "VitC",       "LowfatMilk"      ) : 120,

        ( "Calc",       "Cheeseburger"    ) : 30,
        ( "Calc",       "HamSandwich"     ) : 20,
        ( "Calc",       "Hamburger"       ) : 25,
        ( "Calc",       "FishSandwich"    ) : 15,
        ( "Calc",       "ChickenSandwich" ) : 15,
        ( "Calc",       "Fries"           ) : 0,
        ( "Calc",       "SausageBiscuit"  ) : 20,
        ( "Calc",       "LowfatMilk"      ) : 30,
        ( "Calc",       "OrangeJuice"     ) : 2,

        ( "Iron",       "Cheeseburger"    ) : 20,
        ( "Iron",       "HamSandwich"     ) : 20,
        ( "Iron",       "Hamburger"       ) : 20,
        ( "Iron",       "FishSandwich"    ) : 10,
        ( "Iron",       "ChickenSandwich" ) : 8,
        ( "Iron",       "Fries"           ) : 2,
        ( "Iron",       "SausageBiscuit"  ) : 15,
        ( "Iron",       "LowfatMilk"      ) : 0,
        ( "Iron",       "OrangeJuice"     ) : 2,

        ( "Volume",     "Cheeseburger"    ) : 4,
        ( "Volume",     "HamSandwich"     ) : 7.5,
        ( "Volume",     "Hamburger"       ) : 3.5,
        ( "Volume",     "FishSandwich"    ) : 5,
        ( "Volume",     "ChickenSandwich" ) : 7.3,
        ( "Volume",     "Fries"           ) : 2.6,
        ( "Volume",     "SausageBiscuit"  ) : 4.1,
        ( "Volume",     "LowfatMilk"      ) : 8,
        ( "Volume",     "OrangeJuice"     ) : 12
    }

    # ----Step 1. Create a model and change the parameters.
    model = MdoModel()

    try:
        # ----Step 2. Input model.
        # Change to minimization problem.
        model.set_int_attr("MinSense", 1)
        
        # Add variables.
        var = {}
        for food_name, food_data in food.items():
            var[food_name] = model.add_var(food_data[0], food_data[1], food_data[2], None, food_name, False)

        # Add constraints.
        cons = {}
        for req_name, req_data in req.items():
            expr = MdoExprLinear()
            for food_name in food.keys():
                expr += req_value[req_name, food_name] * var[food_name]
            cons[req_name] = model.add_cons(req_data[0], req_data[1], expr, req_name)

        # ----Step 3. Solve the problem and populate the result.
        model.solve_prob()
        model.display_results()
        time.sleep(1) #for print
  
        status_code, status_msg = model.get_status()
        if status_msg == "OPTIMAL":
            print("----\n")
            print("The solver terminated with an OPTIMAL status (code {0}).".format(status_code))

            print("目标函数总收益是: {0}".format(model.get_real_attr("PrimalObjVal")))
            
            print("原始解是：")
            for var_name,var_val in var.items():
                primal_soln = var_val.get_real_attr("PrimalSoln")
                print("{0:&gt;20} : {1}".format(var_name,primal_soln))
    
        else:
            print("Optimizer terminated with a(n) {0} status (code {1}).".format(status_msg, status_code))
     
    except MdoError as e:
        print("Received Mindopt exception.")
        print(" - Code          : {}".format(e.code))
        print(" - Reason        : {}".format(e.message))
    except Exception as e:
        print("Received exception.")
        print(" - Reason        : {}".format(e))
    finally:
        # Step 4. Free the model.
        model.free_mdl()
</code></pre> 
<p>点击运行后，得到的结果如下：</p> 
<pre><code>Start license validation (current time : 17-JAN-2023 23:54:14).
License validation terminated. Time : 0.003s

Model summary.
 - Num. variables     : 9
 - Num. constraints   : 8
 - Num. nonzeros      : 67
 - Bound range        : [5.5e+01,2.0e+03]
 - Objective range    : [6.0e-01,2.3e+00]
 - Matrix range       : [1.0e+00,5.1e+02]

Presolver started.
Presolver terminated. Time : 0.000s

Simplex method started.
Model fingerprint: =IGYvFmb5d2dgF2dud3b

    Iteration       Objective       Dual Inf.     Primal Inf.     Time
            0     0.00000e+00      0.0000e+00      4.0937e+01     0.00s    
            3     1.48557e+01      0.0000e+00      0.0000e+00     0.00s    
Postsolver started.
Simplex method terminated. Time : 0.001s

Optimizer summary.
 - Optimizer used     : Simplex method
 - Optimizer status   : OPTIMAL
 - Total time         : 0.002s

Solution summary.       Primal solution
 - Objective          : 1.4855737705e+01 
----

The solver terminated with an OPTIMAL status (code 1).
目标函数总收益是: 14.855737704918033
原始解是：
        Cheeseburger : 4.385245901639344
         HamSandwich : 0.0
           Hamburger : 0.0
        FishSandwich : 0.0
     ChickenSandwich : 0.0
               Fries : 6.147540983606558
      SausageBiscuit : 0.0
          LowfatMilk : 3.422131147540985
         OrangeJuice : 0.0
</code></pre> 
<hr> 
<h3><a id="2py_345"></a>方法2：命令行直接运行.py文件</h3> 
<p>上面是直接在cell中运行所有的脚本，我们也可以建立个新文档，将Python代码存在<code>src/python_src</code>文件夹的LP_2_diet.py文件。然后在Launcher中打开Terminal，执行<code>python xx.py</code>文件来运行。</p> 
<blockquote> 
 <p>您也可以下载本.py文件，在自己的电脑上安装<a href="https://blog.csdn.net/MindOpt_003/article/details/128865712">MindOpt求解器</a>，然后在自己电脑的环境运行。</p> 
</blockquote> 
<p>Luancher可以点击左上角的+打方块打开，Terminal在最下方，如截图示意。打开的窗口可以拖动调整位置。<br> <img src="https://images2.imgbox.com/70/2f/TFwF3SSz_o.png" alt="image.png"></p> 
<p>然后在Terminal命令行里运行如下指令:</p> 
<pre><code>cd src/python_src
python LP_2_diet.py
</code></pre> 
<p>运行得到的结果同方法1：<br> <img src="https://images2.imgbox.com/b7/ef/OptueTiv_o.png" alt="image.png"></p> 
<h3><a id="3_361"></a>方法3:复制案例广场的例子</h3> 
<p>这个例子已经在MindOpt的案例广场，可以直接复制：<a href="https://opt.aliyun.com/platform/share/detail/src/LP02_%E8%90%A5%E5%85%BB%E8%B0%83%E9%85%8D_solver_Python_api.ipynb?path=76B24C0A-E655-4CF6-90EA-F4CBBA236A3F" rel="nofollow">营养调配</a><br> 直接点击复制项目，会将配置的文件全部复制过来，可以直接运行。（如上图所示）<br> <img src="https://images2.imgbox.com/8f/f6/CoOFB3Cy_o.png" alt="image.png"></p> 
<h2><a id="_365"></a>求解结果</h2> 
<p>运行结果里面打印有：</p> 
<hr> 
<pre><code>目标函数总收益是: 14.855737704918033
原始解是：
        Cheeseburger : 4.385245901639344
         HamSandwich : 0.0
           Hamburger : 0.0
        FishSandwich : 0.0
     ChickenSandwich : 0.0
               Fries : 6.147540983606558
      SausageBiscuit : 0.0
          LowfatMilk : 3.422131147540985
         OrangeJuice : 0.0
</code></pre> 
<hr> 
<p>代表求解结果的目标函数（每日饮食餐费）最低解为：$14.86元，包含了4.39份起司汉堡，6.15份薯条，以及3.42份低脂牛乳。</p> 
<h2><a id="_387"></a>联系我们</h2> 
<p>钉钉答疑群：32451444<br> 钉钉活动群：18890022111（精彩好礼等你来拿！）<br> 邮箱地址：solver.damo<a href="https://blog.csdn.net/list.alibaba-inc.com">@list.alibaba-inc.com</a><br> 更多更新通知：<a href="https://solver.damo.alibaba.com/" rel="nofollow">https://solver.damo.alibaba.com</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1945132b884ebb43799c7cb9e3ea4ea8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MindOpt——优化虚拟电厂智能调度问题(一)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b046d728654cf15139874cf3739466fb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue项目使用vite设置proxy代理，vite.config.js配置，解决本地跨域问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>