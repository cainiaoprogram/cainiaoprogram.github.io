<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android ConstraintLayout使用详解—手把手教你 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android ConstraintLayout使用详解—手把手教你" />
<meta property="og:description" content="一、说在前面的话 在这里预祝大家2019年：猪事顺利，青春永猪，猪圆玉润，猪笼入水—八面来财
对于这个已经出现了两年的新布局ConstraintLayout，之前只是作为知识了解并未在真正的使用它，今天让我们来从几个方面解读ConstraintLayout并对它的性能做细致化分析。
二、ConstraintLayout是什么？ ConstraintLayout是Google在2016年的I/O大会上推出一款新型布局方式，也是Android Studio 2.2中主要的新增的功能之一。目的是为了解决由于布局嵌套过于复杂而带来的页面渲染性能问题。
可以这么说，ConstraintLayout是RelativeLayout的升级版，它允许我们在Layout上设计子控件与子控件之间的位置关系，而且它远比RelativeLayout在Android Studio中表现的效果更灵活、更容易使用。
下面是官网对它描述：
ConstraintLayout allows you to create large and complex layouts with a flat view hierarchy (no nested view groups). It’s similar to RelativeLayout in that all views are laid out according to relationships between sibling views and the parent layout, but it’s more flexible than RelativeLayout and easier to use with Android Studio’s Layout Editor.
三、为什么要用ConstraintLayout？ 我们都知道，在传统的Android开发中，界面基本上都是靠编写XAL代码完成的，虽然Android Studio也支持可视化的方式编写界面，但是操作起来异常的麻烦，而且布局展示效果也达不到预想的效果，所以也不建议大家使用可视化编写Android程序的界面布局。
但是ConstraintLayout出现就为了打破这一现状。它和传统编写界面的方式恰恰相反，ConstraintLayout非常适合使用可视化的方式来编写界面，但是不太适合使用XAL的方式来进行编写。当然，可视化的背后仍然还是使用了XAL代码来实现的，只不过这些代码是由Android Studio根据我们的操作自动生成相应的布局。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/eadd2639e220b28dc23b756a4e044429/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-11-28T14:18:29+08:00" />
<meta property="article:modified_time" content="2018-11-28T14:18:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android ConstraintLayout使用详解—手把手教你</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>一、说在前面的话</h4> 
<p>在这里预祝大家2019年：猪事顺利，青春永猪，猪圆玉润，猪笼入水—八面来财</p> 
<p>对于这个已经出现了两年的新布局ConstraintLayout，之前只是作为知识了解并未在真正的使用它，今天让我们来从几个方面解读ConstraintLayout并对它的性能做细致化分析。</p> 
<h4><a id="ConstraintLayout_5"></a>二、ConstraintLayout是什么？</h4> 
<p>ConstraintLayout是Google在2016年的I/O大会上推出一款新型布局方式，也是Android Studio 2.2中主要的新增的功能之一。目的是为了解决由于布局嵌套过于复杂而带来的页面渲染性能问题。</p> 
<p>可以这么说，ConstraintLayout是RelativeLayout的升级版，它允许我们在Layout上设计子控件与子控件之间的位置关系，而且它远比RelativeLayout在Android Studio中表现的效果更灵活、更容易使用。</p> 
<p>下面是官网对它描述：</p> 
<blockquote> 
 <p>ConstraintLayout allows you to create large and complex layouts with a flat view hierarchy (no nested view groups). It’s similar to RelativeLayout in that all views are laid out according to relationships between sibling views and the parent layout, but it’s more flexible than RelativeLayout and easier to use with Android Studio’s Layout Editor.</p> 
</blockquote> 
<h4><a id="ConstraintLayout_13"></a>三、为什么要用ConstraintLayout？</h4> 
<p>我们都知道，在传统的Android开发中，界面基本上都是靠编写XAL代码完成的，虽然Android Studio也支持可视化的方式编写界面，但是操作起来异常的麻烦，而且布局展示效果也达不到预想的效果，所以也不建议大家使用可视化编写Android程序的界面布局。</p> 
<p>但是ConstraintLayout出现就为了打破这一现状。它和传统编写界面的方式恰恰相反，ConstraintLayout非常适合使用可视化的方式来编写界面，但是不太适合使用XAL的方式来进行编写。当然，可视化的背后仍然还是使用了XAL代码来实现的，只不过这些代码是由Android Studio根据我们的操作自动生成相应的布局。</p> 
<p>另一方面，ConstraintLayout还有一个比较重要的优点，它可以有效地解决布局嵌套过多的效果。平时我们在编写界面时，复杂的布局往往会伴随着多层布局的嵌套，而嵌套越多，程序的性能也就越差。ConstraintLayout则是使用约束的方式来指定各个控件的位置和关系，它有点类似于RelativeLayout，但功能远远比RelativeLayout要强大。可以这样说，RelativeLayout和LinearLayout能实现的效果，在ConstraintLayout完成都可以胜任，而且它们做不到的ConstraintLayout同样也能做到，性能也会有很高的提升，关于性能的对比会在后面讲到。</p> 
<h4><a id="	_21"></a>四、 让我们愉快的开始</h4> 
<p>如果你使用的是Android Studio 2.3版本及以上版本时，在创建项目时默认会自动导入ConstraintLayout的依赖并在创建布局时默认布局也会使用ConstraintLayout。但如果是使用Android Studio 2.2版本时可能就需要手动添加依赖，如下所示：</p> 
<pre><code class="prism language-java">dependencies <span class="token punctuation">{<!-- --></span>
    implementation <span class="token string">'com.android.support.constraint:constraint-layout:1.1.3'</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果我们创建布局时默认布局不是ConstraintLayout时，我们可以通过将其转换为ConstraintLayout：<br> <img src="https://images2.imgbox.com/e1/25/RfNvDcaG_o.gif" alt="在这里插入图片描述"><br> <strong>需要注意一点时，转换后之前的布局样式会失效，需要重新调整。</strong></p> 
<p>我们可以看到，现在主操作区域内有两个类似于手机屏幕的界面，左边的是预览界面，右边的是蓝图界面。这两部分都可以用于进行布局编辑工作，区别是左边部分主要用于预览最终的界面效果，右边部分主要用于观察界面内各个控件的约束情况。当然，如果不想看这样预览界面，可以在左上角点击<img src="https://images2.imgbox.com/5d/68/iWP4vAhn_o.png" alt="在这里插入图片描述">这个图标，它分为三种模式：Design、BluePrint、Design+BluePrint，至于它们的展示界面可以自行体会。</p> 
<h5><a id="_36"></a>基本操作</h5> 
<p>下面让我们动起自己的小手开始具体操作吧。ConstraintLayout的基本用法很简单，比如我们想要向布局中添加一个按钮，那么只需要从左侧的Palette区域拖一个Button进去就可以了，如下图所示。<br> <img src="https://images2.imgbox.com/c6/a1/EBwbPNLv_o.gif" alt="在这里插入图片描述"><br> 虽然现在Button已经添加到界面上了，但是由于我们没有给Button添加任何的约束，因此Button并不知道自己应该出现在什么位置。现在我们在预览界面上看到的Button位置并不是它最终运行后的实际位置，如果一个控件没有添加任何约束的话，它在运行之后自动位于界面的左上角。</p> 
<p>那么下面我们就来给Button添加约束，每个控件的约束都分为垂直和水平两类，一共可以在四个方向上给控件添加约束，如下图所示。<br> <img src="https://images2.imgbox.com/46/2c/kjRw9d5E_o.png" alt="在这里插入图片描述"><br> 上图中Button的上下左右各有一个圆圈，这圆圈就是用来添加约束的，我们可以将约束添加到ConstraintLayout，也可以将约束添加到另一个控件。比如说，想让Button位于布局的右下角，就可以这样添加约束，如下图所示。<br> <img src="https://images2.imgbox.com/3a/ee/c9s64xmN_o.gif" alt="在这里插入图片描述"><br> 我们给Button的右边和下边添加了约束，因此Button就会将自己定位到布局的右下角了。类似地，如果我们想要让Button居中显示，那么就需要给它的上下左右都添加约束，如下图所示。<br> <img src="https://images2.imgbox.com/3a/a5/iAMraFux_o.gif" alt="在这里插入图片描述"><br> 这就是添加约束最基本的用法了。</p> 
<p>除此之外，我们还可以使用约束让一个控件相对于另一个控件进行定位。比如说，我们希望再添加一个Button，让它位于第一个Button的正下方，并且间距64dp，那么操作如下所示。<br> <img src="https://images2.imgbox.com/a4/a4/jyDshIH5_o.gif" alt="在这里插入图片描述"><br> 现在添加约束的方式我们已经学完了，那么该怎样删除约束呢？其实也很简单，删除约束的方式一共有三种，第一种用于删除一个单独的约束，将鼠标悬浮在某个约束的圆圈上，然后该圆圈会变成红色，这个时候单击一下就能删除了，如下图所示。<br> <img src="https://images2.imgbox.com/df/ff/vSt33hRH_o.gif" alt="在这里插入图片描述"><br> 第二种用于删除某一个控件的所有约束，选中一个控件，然后它的左下角会出现一个删除约束的图标，点击该图标就能删除当前控件的所有约束了，如下所示。<br> <img src="https://images2.imgbox.com/09/be/FABYFGY1_o.gif" alt="在这里插入图片描述"></p> 
<p>第三种用于删除当前界面中的所有约束，点击工具栏中的删除约束图标即可，如下图所示。<br> <img src="https://images2.imgbox.com/e7/6a/olLd9T3Z_o.png" alt="在这里插入图片描述"></p> 
<p>至此我们把ConstraintLayout基本用法学完了，恭喜你现在就可以使用ConstraintLayout开发界面布局了。不过有的同学可能发现了右边的Properties区域中的<strong>Inspector</strong>。那就让我们继续吧。</p> 
<h5><a id="Inspector_61"></a>Inspector</h5> 
<p>当我们选中任意一个控件的时候，在右边的Properties区域中就会出现很多的属性选项，如下图所示：<br> <img src="https://images2.imgbox.com/d6/b2/tpz0RKGm_o.png" alt="在这里插入图片描述"></p> 
<p>在这里我们就可以设置当前控件的所有属性，如文本内容、颜色、点击事件等等。这些功能都非常简单，我就不再进行详细介绍，大家自己点一点就会操作了。</p> 
<p>需要我们重点掌握的是Properties区域的上半部分，这部分也被称为Inspector。<br> <img src="https://images2.imgbox.com/9d/f4/BSBQpEhe_o.png" alt="在这里插入图片描述"></p> 
<p>首先可以看到，在Inspector中有一个纵向的轴和一个横向的轴，这两个轴也是用于确认控件的位置。我们可以给Button的上下左右各加了一个约束，然后Button就能看居中显示了，其实就是因为这里的纵横轴的值都是50。如果调整了纵横轴的比例，那么Button的位置也会随之改变，如下图所示：<br> <img src="https://images2.imgbox.com/a5/59/cXgnQQ4D_o.gif" alt="在这里插入图片描述"><br> 不过，虽然我们将横轴的值拖动到了100，但是Button并没有紧贴到布局的最右侧，这是为什么呢？实际上，Android Studio给控件的每个方向上的约束都默认添加了一个8dp的间距，从Inspector上面也可以明显地看出来这些间距的值。如果这些默认值并不是你想要的，可以直接在Inspector上进行修改，如下图所示：<img src="https://images2.imgbox.com/8f/fd/k2NoRxVN_o.gif" alt="在这里插入图片描述"><br> 可以看到，修改成0之后Button右侧的间距就没了。</p> 
<p>接下来我们再来学习一下位于Inspector最中间的那个正方形区域，它是用来控制控件大小的。一共有三种模式可选，每种模式都使用了一种不同的符号表示，点击符号即可进行切换。</p> 
<ul><li><img src="https://images2.imgbox.com/b8/df/PmgmLdiM_o.png" alt="在这里插入图片描述"> 表示wrap content，这个我们很熟悉了，不需要进行什么解释。</li><li><img src="https://images2.imgbox.com/81/55/zTSy11Ne_o.png" alt="在这里插入图片描述"> 表示固定值，也就是给控件指定了一个固定的长度或者宽度值。</li><li><img src="https://images2.imgbox.com/b5/f1/XMbjlEpQ_o.png" alt="在这里插入图片描述">表示any size，它有点类似于match parent，但和match parent并不一样，是属于ConstraintLayout中特有的一种大小控制方式，下面我们来重点讲解一下。<br> 首先需要说明，在ConstraintLayout中是有match parent的，只不过用的比较少，因为ConstraintLayout的一大特点就是为了解决布局嵌套，既然没有了布局嵌套，那么match parent也就没有多大意义了。</li></ul> 
<p>而any size就是用于在ConstraintLayout中顶替match parent的，先看一下我们怎样使用any size实现和match parent同样的效果吧。比如说我想让Button的宽度充满整个布局，操作如下图所示。<br> <img src="https://images2.imgbox.com/d0/f8/lsBZIfso_o.gif" alt="在这里插入图片描述"><br> 可以看到，我们将Button的宽度指定成any size，它就会自动充满整个布局了。当然还要记得将Button左侧的间距设置成0才行。</p> 
<p>那有的朋友可能会问了，这和match parent有什么区别呢？其实最大的区别在于，match parent是用于填充满当前控件的父布局，而any size是用于填充满当前控件的约束规则。举个例子更好理解，如果我们有一个新的Button，它的其中一个约束是添加到当前这个Button上的，那么any size的效果也会发生改变，如下图所示。<br> <img src="https://images2.imgbox.com/16/89/BdCJFupK_o.gif" alt="在这里插入图片描述"><br> 通过上图的演示，相信你已经很好地理解any size的作用了。</p> 
<h5><a id="Guideline_90"></a>Guideline</h5> 
<p>现在你已经对ConstraintLayout比较熟悉，并且能使用ConstraintLayout来编写一些简单的界面了。不过目前有一个问题可能还比较头疼，刚才我们已经实现了让一个按钮居中对齐的功能，如果我们想让两个按钮共同居中对齐该怎么实现呢？</p> 
<p>其实这个需求很常见，比如说在应用的登录界面，都会有一个登录按钮和一个注册按钮，不管它们是水平居中也好还是垂直居中也好，但肯定都是两个按钮共同居中的。</p> 
<p>想要实现这个功能，仅仅用我们刚刚学的那些知识是不够的，这需要用到ConstraintLayout中的一个新的功能，Guideline。</p> 
<p>下面我们还是通过实际操作来学习一下Guidelines的用法吧。比如现在已经向界面中添加了登录和注册这两个按钮，如下图所示。<br> <img src="https://images2.imgbox.com/8c/b8/MFcAXNLA_o.png" alt="在这里插入图片描述"><br> 然后我们希望让这两个按钮在水平方向上居中显示，在垂直方向上都距离底部64dp，那么就需要先添加一个垂直方向上的Guideline，如下图所示。<br> <img src="https://images2.imgbox.com/a0/a4/ativcOpD_o.gif" alt="在这里插入图片描述"><br> 我来对上图中的操作进行一下解释。首先点击通知栏中的Guidelines图标可以添加一个垂直或水平方向上的Guideline，这里我们需要的是垂直方向上的。而Guideline默认是使用的dp尺，我们需要选中Guideline，并点击一下最上面的箭头图标将它改成百分比尺，然后将垂直方向上的Guideline调整到50%的位置，这样就将准备工作做好了。</p> 
<p>接下来我们开始实现让两个按钮在水平方向上居中显示，并距离底部64dp的功能，如下图所示。<br> <img src="https://images2.imgbox.com/a1/5c/8UD6mS0I_o.gif" alt="在这里插入图片描述"><br> 可以看到，我们给登录按钮的右边向Guideline添加约束，登录按钮的下面向底部添加约束，并拖动按钮让它距离底部64dp。然后给注册按钮的左边向Guideline添加约束，注册按钮的下面向登录按钮的下面添加约束。这样就实现了让两个按钮在水平方向上居中显示，在垂直方向上都距离底部64dp的功能了。</p> 
<p>至此整个ConstraintLayout的使用都已经讲解完毕。下面会讲述布局中每个属性的具体含义，有兴趣的同学可以查看<a href="https://blog.csdn.net/weixin_37618354/article/details/84583507">Android ConstraintLayout属性详解</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c0e1038224da092d1e270bf4638422c5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Intellij关闭双击shift打开全局搜索</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bdbf3c2af211cf23929b97135eb76db9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">COSO企业风险管理综合框架主要关注8大层面的企业风险</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>