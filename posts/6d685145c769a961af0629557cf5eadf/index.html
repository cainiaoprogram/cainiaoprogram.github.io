<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android开发：基于Kotlin编写一个简易计算器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android开发：基于Kotlin编写一个简易计算器" />
<meta property="og:description" content="目录 前言Kotlin学习tips界面绘制及控件绑定UI界面绘制控件绑定Button点击事件 运算逻辑整体逻辑边界情况输入展示点击数字键点击运算符键点击“=”点击“clean”键在`onCreate()`方法里调用 成果展示后记 前言 本着程序员“拥抱变化”的思想，最近开始学Kotlin了。感觉还是得通过实战来入门一门新语言，所以打算写一个基于Kotlin语言的计算器，本文对开发过程以及学习Kotlin的一些知识进行了记录。
计算器的全部源码已经放到了我的Github中，需要的伙伴自取：Calculator
Kotlin学习tips Kotlin中文站：https://www.kotlincn.net/
这是Kotlin的官方中文网站，里面有Kotlin的介绍、入门使用以及Kotlin官方文档中文版等；Android开发者平台内对Kotlin编程的介绍页面：https://developer.android.google.cn/kotlin/first
Kotlin目前已经是Android官方推荐的编程语言，因此在Android开发者平台也有对使用Kotlin进行Android编程的方法介绍以及使用入门等。 界面绘制及控件绑定 UI界面绘制 使用TextView控件进行输入以及结果展示，使用Button控件充当按键。由于时间限制，这里直接使用LinearLayout布局进行实现，缺点是布局层级嵌套太多，总共嵌套了三层LinearLayout，有空的小伙伴们可以自行优化一下。布局文件代码如下：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;LinearLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; android:orientation=&#34;vertical&#34; android:padding=&#34;15dp&#34; &gt; &lt;TextView android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;0dp&#34; android:layout_weight=&#34;1&#34; android:text=&#34;Hello World!&#34; android:textAllCaps=&#34;false&#34; android:textSize=&#34;30sp&#34; android:gravity=&#34;right|bottom&#34; android:background=&#34;@drawable/bg_frame&#34; android:padding=&#34;15dp&#34; android:id=&#34;@&#43;id/mtv_result&#34; /&gt; &lt;LinearLayout android:layout_weight=&#34;3&#34; android:layout_height=&#34;0dp&#34; android:layout_width=&#34;match_parent&#34; android:layout_marginTop=&#34;15dp&#34; android:background=&#34;@drawable/bg_frame&#34; android:orientation=&#34;vertical&#34;&gt; &lt;LinearLayout android:layout_height=&#34;0dp&#34; android:layout_width=&#34;match_parent&#34; android:layout_weight=&#34;1&#34; android:orientation=&#34;horizontal&#34;&gt; &lt;Button android:textSize=&#34;28sp&#34; android:layout_margin=&#34;5dp&#34; android:padding=&#34;5dp&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;match_parent&#34; android:layout_weight=&#34;1&#34; android:background=&#34;@drawable/bg_frame&#34; android:text=&#34;&#43;&#34; android:id=&#34;@&#43;id/btn_add&#34;/&gt; &lt;Button android:textSize=&#34;28sp&#34; android:layout_margin=&#34;5dp&#34; android:layout_width=&#34;0dp&#34; android:layout_height=&#34;match_parent&#34; android:layout_weight=&#34;1&#34; android:background=&#34;@drawable/bg_frame&#34; android:text=&#34;-&#34; android:id=&#34;@&#43;id/btn_subtract&#34;/&gt; &lt;Button android:textSize=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6d685145c769a961af0629557cf5eadf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-14T15:36:45+08:00" />
<meta property="article:modified_time" content="2022-05-14T15:36:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android开发：基于Kotlin编写一个简易计算器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">前言</a></li><li><a href="#Kotlintips_4" rel="nofollow">Kotlin学习tips</a></li><li><a href="#_9" rel="nofollow">界面绘制及控件绑定</a></li><li><ul><li><a href="#UI_10" rel="nofollow">UI界面绘制</a></li><li><a href="#_236" rel="nofollow">控件绑定</a></li><li><a href="#Button_263" rel="nofollow">Button点击事件</a></li></ul> 
  </li><li><a href="#_318" rel="nofollow">运算逻辑</a></li><li><ul><li><a href="#_319" rel="nofollow">整体逻辑</a></li><li><a href="#_321" rel="nofollow">边界情况</a></li><li><a href="#_326" rel="nofollow">输入展示</a></li><li><a href="#_342" rel="nofollow">点击数字键</a></li><li><a href="#_363" rel="nofollow">点击运算符键</a></li><li><a href="#_381" rel="nofollow">点击“=”</a></li><li><a href="#clean_447" rel="nofollow">点击“clean”键</a></li><li><a href="#onCreate_461" rel="nofollow">在`onCreate()`方法里调用</a></li></ul> 
  </li><li><a href="#_477" rel="nofollow">成果展示</a></li><li><a href="#_479" rel="nofollow">后记</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>前言</h2> 
<p>本着程序员“拥抱变化”的思想，最近开始学Kotlin了。感觉还是得通过实战来入门一门新语言，所以打算写一个基于Kotlin语言的计算器，本文对开发过程以及学习Kotlin的一些知识进行了记录。<br> 计算器的全部源码已经放到了我的Github中，需要的伙伴自取：<a href="https://github.com/baowenbeizi/Calculator">Calculator</a></p> 
<h2><a id="Kotlintips_4"></a>Kotlin学习tips</h2> 
<ol><li>Kotlin中文站：https://www.kotlincn.net/<br> 这是Kotlin的官方中文网站，里面有Kotlin的介绍、入门使用以及Kotlin官方文档中文版等；</li><li>Android开发者平台内对Kotlin编程的介绍页面：https://developer.android.google.cn/kotlin/first<br> Kotlin目前已经是Android官方推荐的编程语言，因此在Android开发者平台也有对使用Kotlin进行Android编程的方法介绍以及使用入门等。</li></ol> 
<h2><a id="_9"></a>界面绘制及控件绑定</h2> 
<h3><a id="UI_10"></a>UI界面绘制</h3> 
<p>使用<code>TextView</code>控件进行输入以及结果展示，使用<code>Button</code>控件充当按键。由于时间限制，这里直接使用<code>LinearLayout</code>布局进行实现，缺点是布局层级嵌套太多，总共嵌套了三层<code>LinearLayout</code>，有空的小伙伴们可以自行优化一下。布局文件代码如下：</p> 
<pre><code class="prism language-java"><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token class-name">LinearLayout</span> xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span>
    android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
    android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
    android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"vertical"</span>
    android<span class="token operator">:</span>padding<span class="token operator">=</span><span class="token string">"15dp"</span>
    <span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token class-name">TextView</span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"0dp"</span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"Hello World!"</span>
        android<span class="token operator">:</span>textAllCaps<span class="token operator">=</span><span class="token string">"false"</span>
        android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"30sp"</span>
        android<span class="token operator">:</span>gravity<span class="token operator">=</span><span class="token string">"right|bottom"</span>
        android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
        android<span class="token operator">:</span>padding<span class="token operator">=</span><span class="token string">"15dp"</span>
        android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/mtv_result"</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token class-name">LinearLayout</span>
        android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"3"</span>
        android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"0dp"</span>
        android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
        android<span class="token operator">:</span>layout_marginTop<span class="token operator">=</span><span class="token string">"15dp"</span>
        android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
        android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token class-name">LinearLayout</span>
            android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"0dp"</span>
            android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
            android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
            android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"horizontal"</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>padding<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"+"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_add"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"-"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_subtract"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"*"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_multiply"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"/"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_divide"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">LinearLayout</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token class-name">LinearLayout</span>
            android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"0dp"</span>
            android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
            android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
            android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"horizontal"</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_one"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"2"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_two"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"3"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_three"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"0"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_zero"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">LinearLayout</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token class-name">LinearLayout</span>
            android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"0dp"</span>
            android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
            android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
            android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"horizontal"</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"4"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_four"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"5"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_five"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"6"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_six"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"C"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_clean"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">LinearLayout</span><span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token class-name">LinearLayout</span>
            android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"0dp"</span>
            android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"match_parent"</span>
            android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
            android<span class="token operator">:</span>orientation<span class="token operator">=</span><span class="token string">"horizontal"</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"7"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_seven"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"8"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_eight"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"9"</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_nine"</span><span class="token operator">/</span><span class="token operator">&gt;</span>

            <span class="token operator">&lt;</span><span class="token class-name">Button</span>
                android<span class="token operator">:</span>textSize<span class="token operator">=</span><span class="token string">"28sp"</span>
                android<span class="token operator">:</span>layout_margin<span class="token operator">=</span><span class="token string">"5dp"</span>
                android<span class="token operator">:</span>layout_width<span class="token operator">=</span><span class="token string">"0dp"</span>
                android<span class="token operator">:</span>layout_height<span class="token operator">=</span><span class="token string">"match_parent"</span>
                android<span class="token operator">:</span>layout_weight<span class="token operator">=</span><span class="token string">"1"</span>
                android<span class="token operator">:</span>background<span class="token operator">=</span><span class="token string">"@drawable/bg_frame"</span>
                android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"="</span>
                android<span class="token operator">:</span>id<span class="token operator">=</span><span class="token string">"@+id/btn_calculate"</span><span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">LinearLayout</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">LinearLayout</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token class-name">LinearLayout</span><span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_236"></a>控件绑定</h3> 
<p>在<code>MainActivity</code>内，首先对UI控件进行绑定。我们单独写一个<code>init()</code>方法，并在<code>onCreate()</code>里进行调用，<code>init()</code>方法代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 对控件进行初始化
 * */</span>
fun <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    mTvResult <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>mtv_result<span class="token punctuation">)</span>
    mBtnAdd <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_add<span class="token punctuation">)</span>
    mBtnSubtract <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_subtract<span class="token punctuation">)</span>
    mBtnMultiply <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_multiply<span class="token punctuation">)</span>
    mBtnDivide <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_divide<span class="token punctuation">)</span>
    mBtnCalculate <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_calculate<span class="token punctuation">)</span>
    mBtnOne <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_one<span class="token punctuation">)</span>
    mBtnTwo <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_two<span class="token punctuation">)</span>
    mBtnThree <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_three<span class="token punctuation">)</span>
    mBtnFour <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_four<span class="token punctuation">)</span>
    mBtnFive <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_five<span class="token punctuation">)</span>
    mBtnSix <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_six<span class="token punctuation">)</span>
    mBtnSeven <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_seven<span class="token punctuation">)</span>
    mBtnEight <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_eight<span class="token punctuation">)</span>
    mBtnNine <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_nine<span class="token punctuation">)</span>
    mBtnZero <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_zero<span class="token punctuation">)</span>
    mBtnCln <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_clean<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="Button_263"></a>Button点击事件</h3> 
<p>为了使代码简洁，我们使<code>MainActivity</code>实现<code>View.OnClickListener</code>接口并重写<code>onClick()</code>方法，在该方法内对每个<code>Button</code>的点击事件进行编程，代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 点击事件的具体代码
 * */</span>
override fun <span class="token function">onClick</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> <span class="token class-name">View</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"baowenbei"</span><span class="token punctuation">,</span> <span class="token string">"click"</span><span class="token punctuation">)</span>
    when <span class="token punctuation">(</span>p0<span class="token operator">?</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_zero <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_one <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_two <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_three <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_four <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_five <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_six <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_seven <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_eight <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_nine <span class="token operator">-&gt;</span> <span class="token function">addNum</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_calculate <span class="token operator">-&gt;</span> <span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_add <span class="token operator">-&gt;</span> <span class="token function">addOperate</span><span class="token punctuation">(</span><span class="token char">'+'</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_subtract <span class="token operator">-&gt;</span> <span class="token function">addOperate</span><span class="token punctuation">(</span><span class="token char">'-'</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_multiply <span class="token operator">-&gt;</span> <span class="token function">addOperate</span><span class="token punctuation">(</span><span class="token char">'*'</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_divide <span class="token operator">-&gt;</span> <span class="token function">addOperate</span><span class="token punctuation">(</span><span class="token char">'/'</span><span class="token punctuation">)</span>
        <span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>btn_clean <span class="token operator">-&gt;</span> <span class="token function">cln</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>需要注意的是，Kotlin并不支持<code>switch</code>语句，但Kotlin的<code>when</code>关键字能够起到类似功能。<br> 之后，我们给每个<code>Button</code>设置点击事件监听，为了代码美观，我们仍封装到单独的方法里，代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 1. 设置点击事件
 2. */</span>
fun <span class="token function">setClickEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    mBtnCalculate<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnAdd<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnMultiply<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnSubtract<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnDivide<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnOne<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnTwo<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnThree<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnFour<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnFive<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnSix<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnSeven<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnEight<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnNine<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnZero<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    mBtnCln<span class="token punctuation">.</span><span class="token function">setOnClickListener</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_318"></a>运算逻辑</h2> 
<h3><a id="_319"></a>整体逻辑</h3> 
<p>本计算器可以将按键分为数字、运算符、“=”、“clean”四个类型，根据四个类型分别编写对应的代码逻辑；同时，需要编写一个<code>show()</code>方法进行输入展示。我们新建一个<code>mixList</code>用于存储已经输入的运算符及数字。最后，在<code>onCreate()</code>方法里进行调用。</p> 
<h3><a id="_321"></a>边界情况</h3> 
<p>首先需要考虑输入的合法性：</p> 
<ol><li>运算符合法性问题。包括表达式第1位必须是数字、不能连续输入多个运算符、表达式不能以运算符结尾等。我们通过设置两个变量<code>numCount</code>与<code>operateCount</code>分别表示已输入的数字个数以及运算符个数，并确保<code>operateCount &lt; numCount</code>来保证运算符合法性。</li><li>运算符优先级问题。不同的运算符具有不同的优先级。在本文提出的计算器中，只实现了加减乘除4个功能，因此优先级可以分为两步，即“先乘除、再加减”。我通过两个for循环实现。</li><li>除0问题。这也需要进行特殊判断。</li></ol> 
<h3><a id="_326"></a>输入展示</h3> 
<p>我们使用一个<code>StringBuilder</code>变量对<code>mixList</code>里的所有元素进行拼接，并进行显示，代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 构建表达式的String形式并展示
 * */</span>
fun <span class="token function">show</span><span class="token punctuation">(</span>list<span class="token operator">:</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>list<span class="token punctuation">.</span>size <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> mTvResult<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> sb <span class="token operator">=</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>item in list<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    mTvResult<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>sb<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_342"></a>点击数字键</h3> 
<p>点击数字键，需要将情况区分为当前输入的是1位数字还是已经输入了多位数字两种情况，具体代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 点击数字时调用此函数
 * */</span>
fun <span class="token function">addNum</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token class-name">Long</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>operateCount <span class="token operator">==</span> numCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 当前为1位的数字</span>
        numCount<span class="token operator">++</span>
        mixList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 当前为多位的数字</span>
        val numPlus<span class="token operator">:</span> <span class="token class-name">Long</span> <span class="token operator">=</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>mixList<span class="token punctuation">.</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> num
        mixList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>mixList<span class="token punctuation">.</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> numPlus<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 实时展示界面变化</span>
    <span class="token function">show</span><span class="token punctuation">(</span>mixList<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_363"></a>点击运算符键</h3> 
<p>点击运算符键，需要对运算符的输入合法性进行判断，具体代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 点击运算符时调用此函数
 * */</span>
fun <span class="token function">addOperate</span><span class="token punctuation">(</span>operate<span class="token operator">:</span> <span class="token class-name">Char</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>numCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>operateCount <span class="token operator">&lt;</span> numCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        operateCount<span class="token operator">++</span>
        mixList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>operate<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>operateCount <span class="token operator">==</span> numCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        mixList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>mixList<span class="token punctuation">.</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> operate<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">show</span><span class="token punctuation">(</span>mixList<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_381"></a>点击“=”</h3> 
<p>点击“=”，即需要进行输入判断，具体代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 点击“=”后调用此函数
 * */</span>
fun <span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 当前只输入数字，不需要计算，直接返回</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>operateCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token comment">// 当前最后一位为运算符，不合法，对最后一位运算符进行删除</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>operateCount <span class="token operator">==</span> numCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>mixList<span class="token punctuation">.</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 计算表达式的值</span>
    <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 进行界面展示</span>
    <span class="token function">show</span><span class="token punctuation">(</span>mixList<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>其中，calculate()为表达式计算方法，需要根据运算符优先级进行编程实现，具体代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 具体的计算函数
 * */</span>
fun <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 优先进行乘除运算</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i in mixList<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 兜底判断，防止后续的删除操作导致List长度减小，导致下标溢出</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> mixList<span class="token punctuation">.</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"*"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 计算“乘”</span>
            val tmp<span class="token operator">:</span> <span class="token class-name">Long</span> <span class="token operator">=</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token comment">// 更新值并删除相关操作数</span>
            mixList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> tmp<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 对非法输入“除0”进行判断</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            val tmp<span class="token operator">:</span> <span class="token class-name">Long</span> <span class="token operator">=</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> tmp<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 进行加减运算</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i in mixList<span class="token punctuation">.</span>indices<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 兜底判断，防止后续的删除操作导致List长度减小，导致下标溢出</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> mixList<span class="token punctuation">.</span>size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"+"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            val tmp<span class="token operator">:</span> <span class="token class-name">Long</span> <span class="token operator">=</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> tmp<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            val tmp<span class="token operator">:</span> <span class="token class-name">Long</span> <span class="token operator">=</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> mixList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLong</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> tmp<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
            mixList<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="clean_447"></a>点击“clean”键</h3> 
<p>点击“clean”键，即对程序进行重置，具体代码如下：</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 重置操作
 * */</span>
fun <span class="token function">cln</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    operateCount <span class="token operator">=</span> <span class="token number">0</span>
    numCount <span class="token operator">=</span> <span class="token number">0</span>
    mixList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    mTvResult<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">"0"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="onCreate_461"></a>在<code>onCreate()</code>方法里调用</h3> 
<p>所有子方法编写完成后，我们在<code>onCreate()</code>方法里调用<code>init()</code>方法以及为<code>Button</code>设置监听事件，具体代码如下：</p> 
<pre><code class="prism language-java">override fun <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> <span class="token class-name">Bundle</span><span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
    <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>
    <span class="token comment">// 进行控件绑定</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 设置点击事件</span>
    <span class="token function">setClickEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// 首次进入，重置一次程序</span>
    <span class="token function">cln</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<h2><a id="_477"></a>成果展示</h2> 
<p><img src="https://images2.imgbox.com/ba/eb/gJ2WiquS_o.gif" alt="效果"></p> 
<h2><a id="_479"></a>后记</h2> 
<ol><li>本文的运算逻辑部分参考了博文：https://blog.csdn.net/m0_46651408/article/details/117030022，并对它的一些边界情况进行了修改；</li><li>由于时间有限，这个计算器只实现了加减乘除4个功能，也没有添加退格等功能，感兴趣的小伙伴可以自行完善；</li><li>最后贴一下个人公众号：<strong>Android开发二三事</strong> ，平时会发一些编程相关的推文，二维码如下，欢迎关注~<br> <img src="https://images2.imgbox.com/4a/c2/eAdqI5Gs_o.jpg" alt="公众号"></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1687aa83d5ce3265e2a6108a4f23e6b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HashMap中put方法（白话加源码分析）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2b72269e0d822da883e42e214811f812/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Debugger executable ‘/usr/local/bin/x86_64-elf-gdb‘ is not signed. &amp;&amp; 在汇编文件中打断点</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>