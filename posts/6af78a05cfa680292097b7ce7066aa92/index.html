<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nuxt&#43;Vue3&#43;TS&#43;Vite入门教程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nuxt&#43;Vue3&#43;TS&#43;Vite入门教程" />
<meta property="og:description" content="介绍 什么是Nuxt3 Nuxt3是一个基于Vue.js的应用框架，它提供了一些默认的配置和约定，使得开发者可以更快速地构建出高质量的Vue.js应用程序。Nuxt3是Nuxt.js的下一代版本，它采用了全新的架构和设计，提供了更好的性能和可扩展性。
Nuxt3 的优势 1、更快的启动和渲染速度
2、更好的性能和可扩展性
3、更灵活的配置和插件系统
4、更好的开发体验和文档支持
Nuxt3 的生态 Nuxt3的生态非常丰富，包括了许多插件、模块、组件库、工具等等。可以在Nuxt3官方网站的生态页面（https://nuxt.com/modules）上找到相关的Nuxt3生态。
安装 安装 Nuxt3 在安装Nuxt3之前，你需要保证你的node.js大于16.10.0 或者最新版本
创建一个nuxt项目
npx nuxi init &lt;project-name&gt; 切换到刚创建的项目根目录
cd &lt;project-name&gt; 下载相关依赖
npm install 基础 Nuxt3 的目录结构 assets/: 存放静态资源文件，如样式、图片、字体等。components/: 存放组件文件，可以在页面中引用。layouts/: 存放布局文件，可以在页面中引用。middleware/: 存放中间件文件，可以在路由中使用。composables/: 存放可重用的逻辑代码，可以在页面、组件和插件中使用。pages/: 存放页面文件，每个文件对应一个路由。plugins/: 存放插件文件，可以在应用程序中使用。static/: 存放静态文件，如 robots.txt、favicon.ico 等。store/: 存放 Vuex store 文件。server/: 存放服务器端代码，包括中间件、API、插件等等。utils/: 存放工具函数文件。nuxt.config.ts: Nuxt3 的配置文件，使用 TypeScript 编写。package.json: 项目的依赖和脚本配置文件。tsconfig.json: TypeScript 的配置文件。 页面和路由 Nuxt3的页面和路由是基于文件系统的路由系统，它允许开发者通过在pages目录下创建.vue文件来定义页面和路由。每个.vue文件对应一个路由，Nuxt3会根据文件名自动生成路由路径。例如，pages/index.vue对应的路由路径为/，pages/about.vue对应的路由路径为/about。此外，Nuxt3还支持动态路由和嵌套路由，可以通过在文件名中使用[]和_来定义动态路由和嵌套路由。例如，pages/posts/[id].vue对应的动态路由路径为/posts/:id，pages/posts/_slug/comments.vue对应的嵌套路由路径为/posts/:slug/comments。
动态路由 -| pages/ ---| index.vue ---| users-[group]/ -----| [id].vue // 你可以通过使用$route.params来获取传递的参数 &lt;template&gt; &lt;p&gt;{{ $route." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6af78a05cfa680292097b7ce7066aa92/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-27T18:10:38+08:00" />
<meta property="article:modified_time" content="2023-03-27T18:10:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nuxt&#43;Vue3&#43;TS&#43;Vite入门教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>介绍</h3> 
<h5><a id="Nuxt3_2"></a>什么是Nuxt3</h5> 
<p>Nuxt3是一个基于Vue.js的应用框架，它提供了一些默认的配置和约定，使得开发者可以更快速地构建出高质量的Vue.js应用程序。Nuxt3是Nuxt.js的下一代版本，它采用了全新的架构和设计，提供了更好的性能和可扩展性。</p> 
<h5><a id="Nuxt3__5"></a>Nuxt3 的优势</h5> 
<p>1、更快的启动和渲染速度<br> 2、更好的性能和可扩展性<br> 3、更灵活的配置和插件系统<br> 4、更好的开发体验和文档支持</p> 
<h5><a id="Nuxt3__11"></a>Nuxt3 的生态</h5> 
<p>Nuxt3的生态非常丰富，包括了许多插件、模块、组件库、工具等等。可以在Nuxt3官方网站的生态页面（<a href="https://nuxt.com/modules" rel="nofollow">https://nuxt.com/modules</a>）上找到相关的Nuxt3生态。</p> 
<h3><a id="_14"></a>安装</h3> 
<h5><a id="_Nuxt3_16"></a>安装 Nuxt3</h5> 
<p>在安装Nuxt3之前，你需要保证你的node.js大于16.10.0 或者最新版本</p> 
<p>创建一个nuxt项目</p> 
<pre><code>npx nuxi init &lt;project-name&gt;
</code></pre> 
<p>切换到刚创建的项目根目录</p> 
<pre><code>cd &lt;project-name&gt;
</code></pre> 
<p>下载相关依赖</p> 
<pre><code>npm install
</code></pre> 
<h3><a id="_34"></a>基础</h3> 
<h4><a id="Nuxt3__36"></a>Nuxt3 的目录结构</h4> 
<ul><li>assets/: 存放静态资源文件，如样式、图片、字体等。</li><li>components/: 存放组件文件，可以在页面中引用。</li><li>layouts/: 存放布局文件，可以在页面中引用。</li><li>middleware/: 存放中间件文件，可以在路由中使用。</li><li>composables/: 存放可重用的逻辑代码，可以在页面、组件和插件中使用。</li><li>pages/: 存放页面文件，每个文件对应一个路由。</li><li>plugins/: 存放插件文件，可以在应用程序中使用。</li><li>static/: 存放静态文件，如 robots.txt、favicon.ico 等。</li><li>store/: 存放 Vuex store 文件。</li><li>server/: 存放服务器端代码，包括中间件、API、插件等等。</li><li>utils/: 存放工具函数文件。</li><li>nuxt.config.ts: Nuxt3 的配置文件，使用 TypeScript 编写。</li><li>package.json: 项目的依赖和脚本配置文件。</li><li>tsconfig.json: TypeScript 的配置文件。</li></ul> 
<h4><a id="_54"></a>页面和路由</h4> 
<p>Nuxt3的页面和路由是基于文件系统的路由系统，它允许开发者通过在pages目录下创建.vue文件来定义页面和路由。每个.vue文件对应一个路由，Nuxt3会根据文件名自动生成路由路径。例如，pages/index.vue对应的路由路径为/，pages/about.vue对应的路由路径为/about。此外，Nuxt3还支持动态路由和嵌套路由，可以通过在文件名中使用[]和_来定义动态路由和嵌套路由。例如，pages/posts/[id].vue对应的动态路由路径为/posts/:id，pages/posts/_slug/comments.vue对应的嵌套路由路径为/posts/:slug/comments。</p> 
<h5><a id="_57"></a>动态路由</h5> 
<pre><code>-| pages/
---| index.vue
---| users-[group]/
-----| [id].vue
</code></pre> 
<pre><code class="prism language-html">// 你可以通过使用$route.params来获取传递的参数
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{<!-- -->{ $route.params.group }} - {<!-- -->{ $route.params.id }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>如果要使用组合 API 访问路由，有一个全局函数允许您像在选项 API 中一样访问路由。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>group <span class="token operator">===</span> <span class="token string">'admins'</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Warning! Make sure user is authenticated!'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>如果希望参数是可选的，则必须将其括在双方括号中 - 例如，或者将同时匹配和. ~/pages/[[slug]]/index.vue ~/pages/[[slug]].vue</p> 
<h5><a id="_86"></a>嵌套路由</h5> 
<p>文件名和目录同名 nuxt3 就会自动给你制造成嵌套路由,父组件中使用NuxtChild组件显示嵌套子组件内容</p> 
<pre><code>比如下面目录结构：
-| pages/
---| parent/
------| child.vue
---| parent.vue
</code></pre> 
<pre><code class="prism language-html">// pages/parent.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>I am the parent view<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtPage</span> <span class="token attr-name">:foobar</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre> 
<h5><a id="_108"></a>导航</h5> 
<p>要在应用的页面之间导航，您应该使用 组件。此组件包含在Nuxt中，因此您不必像导入其他组件那样导入它。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Home page<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_116"></a>编程导航</h5> 
<p>Nuxt 3 允许通过实用程序方法进行编程导航。使用此实用工具方法，你将能够以编程方式在应用中导航用户。这非常适合从用户那里获取输入并在整个应用程序中动态导航它们。<br> 在此示例中，我们有一个名为navigate()的简单方法，当用户提交搜索表单时调用该方法。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">navigate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/search'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> name<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
      <span class="token literal-property property">type</span><span class="token operator">:</span> type<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_138"></a>布局和组件</h4> 
<h5><a id="_140"></a>默认布局</h5> 
<p>Nuxt提供了一个可自定义的布局框架，您可以在整个应用程序中使用，非常适合将常见的UI或代码模式提取到可重用的布局组件中。布局放置在目录中，并在使用时通过异步导入自动加载。</p> 
<pre><code class="prism language-html">// ~/layouts/default.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    Some default layout shared across all pages
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>在布局文件中，布局的内容将在中加载，而不是使用特殊的组件。</p> 
<p>如果您使用，还需要在app.vue添加</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
    some page content
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_164"></a>使用其它自定义组件</h5> 
<pre><code>-| layouts/
---| default.vue
---| custom.vue
</code></pre> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLayout</span> <span class="token attr-name">:name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>layout<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtPage</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLayout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// You might choose this based on an API call or logged-in status</span>
<span class="token keyword">const</span> layout <span class="token operator">=</span> <span class="token string">"custom"</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_185"></a>动态修改布局组件</h5> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enableCustomLayout<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Update layout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">function</span> <span class="token function">enableCustomLayout</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setPageLayout</span><span class="token punctuation">(</span><span class="token string">'custom'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">definePageMeta</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">layout</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><a href="https://nuxt.com/docs/guide/directory-structure/layouts" rel="nofollow">更多介绍请看</a></p> 
<h5><a id="_205"></a>组件目录</h5> 
<p>components/目录是你放置所有 Vue 组件的地方，然后可以将它们导入到你的页面或其他组件中，Nuxt会自动导入目录中的任何组件（以及您可能正在使用的任何模块组件）</p> 
<pre><code>| components/
--| TheHeader.vue
--| TheFooter.vue
</code></pre> 
<pre><code class="prism language-html">// layouts/default.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TheHeader</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TheFooter</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_225"></a>自定义目录</h5> 
<p>默认情况下，只扫描components目录进行自动导入。如果您想添加其他目录，或更改在此目录的子文件夹中扫描组件的方式，可以将其他目录添加到配置中</p> 
<pre><code class="prism language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  components<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span> path<span class="token operator">:</span> <span class="token string">'~/components/special-components'</span><span class="token punctuation">,</span> prefix<span class="token operator">:</span> <span class="token string">'Special'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'~/components'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="_237"></a>组件名称</h5> 
<p>如果嵌套目录中有如下的组件，例如：</p> 
<pre><code>| components/
--| base/
----| foo/
------| Button.vue
</code></pre> 
<p>然后，组件的名称将基于其自己的路径目录和文件名，并删除重复的段。因此，组件的名称将为:</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>BaseFooButton</span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<h5><a id="_252"></a>动态组件</h5> 
<p>如果您想使用Vue语法，则需要使用Vue提供的API</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>clickable ? MyButton : <span class="token punctuation">'</span>div<span class="token punctuation">'</span><span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> MyButton <span class="token operator">=</span> <span class="token function">resolveComponent</span><span class="token punctuation">(</span><span class="token string">'MyButton'</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_266"></a>动态导入（延迟加载组件）</h5> 
<p>要动态导入组件（也称为延迟加载组件），您只需要将前缀lazy添加到组件的名称即可。</p> 
<pre><code class="prism language-html">// layouts/default.vue
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TheHeader</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LazyTheFooter</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Mountains<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LazyMountainsList</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!show<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show = true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Show List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h5><a id="_301"></a>显式导入组件</h5> 
<p>您还可以从中显式导入组件，如果您想要或需要绕过Nuxt的自动导入功能。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Mountains<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LazyMountainsList</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>!show<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>show = true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Show List<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NuxtLink</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NuxtLink</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> NuxtLink<span class="token punctuation">,</span> LazyMountainsList <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'#components'</span>
  <span class="token keyword">const</span> show <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><a href="https://nuxt.com/docs/guide/directory-structure/components" rel="nofollow">更多内容请移步</a></p> 
<h4><a id="_321"></a>数据获取和渲染</h4> 
<h5><a id="_323"></a>获取数据</h5> 
<p>Nuxt 提供了四个API useFetch, useLazyFetch, useAsyncData 和 useLazyAsyncData 来处理数据请求.</p> 
<h6><a id="useFetch_327"></a>useFetch</h6> 
<p>在您的页面、组件和插件中，您可以使用 useFetch 从任何 URL 通用地获取数据。这个API是由useAsyncData和$fetch组成的。它基于URL和fetch选项自动生成密钥，根据服务器路由提供请求URL的类型提示，并推断API响应类型。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">data</span><span class="token operator">:</span> count <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useFetch</span><span class="token punctuation">(</span><span class="token string">'/api/count'</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  Page visits: {<!-- -->{ count }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h6><a id="useLazyFetch_341"></a>useLazyFetch</h6> 
<p>此可组合对象的行为与使用带有 lazy： true 选项集的 Fetch 相同。换句话说，异步函数不会阻止导航。这意味着您将需要处理数据为 null（或您在自定义默认工厂函数中提供的任何值）的情况。</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- you will need to handle a loading state --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pending<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    Loading ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post in posts<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- do something --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> pending<span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> posts <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLazyFetch</span><span class="token punctuation">(</span><span class="token string">'/api/posts'</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newPosts</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// Because posts starts out null, you will not have access</span>
  <span class="token comment">// to its contents immediately, but you can watch it.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h6><a id="useAsyncData_367"></a>useAsyncData</h6> 
<p>在您的页面、组件和插件中，您可以使用它来访问异步解析的数据</p> 
<pre><code class="prism language-typescript"><span class="token comment">// server/api/count.ts</span>
<span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  counter<span class="token operator">++</span>
  <span class="token keyword">return</span> counter
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">useAsyncData</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'/api/count'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  Page visits: {<!-- -->{ data }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h6><a id="useLazyAsyncData_390"></a>useLazyAsyncData</h6> 
<p>此可组合对象的行为与选项集相同。换句话说，异步函数不会阻止导航。这意味着您将需要处理数据所在的情况（或您在自定义工厂函数中提供的任何值）</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {<!-- -->{ pending ? 'Loading' : count }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> pending<span class="token punctuation">,</span> <span class="token literal-property property">data</span><span class="token operator">:</span> count <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLazyAsyncData</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">$fetch</span><span class="token punctuation">(</span><span class="token string">'/api/count'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// Because count starts out null, you won't have access</span>
  <span class="token comment">// to its contents immediately, but you can watch it.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><a href="https://nuxt.com/docs/getting-started/data-fetching" rel="nofollow">更多内容请移步</a></p> 
<h3><a id="_412"></a>进阶</h3> 
<h5><a id="_413"></a>插件和模块</h5> 
<h6><a id="_414"></a>插件目录</h6> 
<p>Nuxt3的插件是用来扩展应用程序功能的，它们可以在应用程序启动之前或之后运行，并且可以访问Nuxt3的上下文对象。插件可以用来添加第三方库、设置全局变量、添加实例方法、添加Vue组件等等。插件可以在plugins目录中定义，并在nuxt.config.ts文件中配置。<br> Nuxt自动读取插件目录中的文件，并在创建Vue应用程序时加载它们。您可以在文件名中使用.server或.client后缀，以便仅在服务器端或客户端加载插件。</p> 
<p>只有目录顶层的文件（或任何子目录中的索引文件）才会注册为插件。</p> 
<pre><code>plugins
 | - myPlugin.ts  // scanned
 | - myOtherPlugin
 | --- supportingFile.ts   // not scanned
 | --- componentToRegister.vue   // not scanned
 | --- index.ts  // currently scanned but deprecated
</code></pre> 
<h6><a id="_429"></a>新建一个插件</h6> 
<pre><code class="prism language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtPlugin</span><span class="token punctuation">(</span>nuxtApp <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// Doing something with nuxtApp</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><a href="https://nuxt.com/docs/guide/directory-structure/plugins" rel="nofollow">更多内容请移步</a></p> 
<h5><a id="_437"></a>模块目录</h5> 
<p>Nuxt扫描modules/目录并在启动之前加载它们。在构建应用程序时，您开发的任何本地模块都可以放置在这里。<br> 自动注册的文件模式为：</p> 
<pre><code>modules/*/index.ts
modules/*.ts
</code></pre> 
<p>您不需要将这些本地模块单独添加到nuxt.config.ts中。</p> 
<pre><code class="prism language-typescript"><span class="token comment">// modules/hello/index.ts</span>

<span class="token comment">// `nuxt/kit` is a helper subpath import you can use when defining local modules</span>
<span class="token comment">// that means you do not need to add `@nuxt/kit` to your project's dependencies</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createResolver<span class="token punctuation">,</span> defineNuxtModule<span class="token punctuation">,</span> addServerHandler <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nuxt/kit'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtModule</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  meta<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    name<span class="token operator">:</span> <span class="token string">'hello'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> resolve <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">createResolver</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span>

    <span class="token comment">// Add an API route</span>
    <span class="token function">addServerHandler</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      route<span class="token operator">:</span> <span class="token string">'/api/hello'</span><span class="token punctuation">,</span>
      handler<span class="token operator">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./runtime/api-route'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> hello<span class="token operator">:</span> <span class="token string">'world'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>当启动Nuxt时，hello模块将被注册，/api/hello路由将可用。</p> 
<h5><a id="_478"></a>中间件和拦截器</h5> 
<h6><a id="_479"></a>中间件</h6> 
<p>Nuxt的中间件是一种可定制的路由中间件框架，可以在整个应用程序中使用。它非常适合在导航到特定路由之前提取要运行的代码。中间件可以用于验证用户身份、检查权限、预取数据等。在Nuxt中，中间件可以在middleware/目录中定义，并在nuxt.config.ts文件中配置。中间件可以是全局的，也可以是特定页面的。全局中间件将在每个页面上运行，而特定页面的中间件将仅在该页面上运行。在中间件中，您可以访问上下文对象，例如context.app、context.store和context.route。</p> 
<p>通过中间件封装的一个简单的拦截器案例：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> api <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/api/api'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> userStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'~/stores/user'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtRouteMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span> from<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> <span class="token function">useCookie</span><span class="token punctuation">(</span><span class="token string">'token'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">userStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token punctuation">(</span>token<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    api<span class="token punctuation">.</span>user<span class="token punctuation">.</span><span class="token function">getInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>info <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>info<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            store<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                isLogin<span class="token operator">:</span> <span class="token operator">!</span>store<span class="token punctuation">.</span>isLogin
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            store<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                isLogin<span class="token operator">:</span> <span class="token boolean">false</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            token<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">undefined</span>
            store<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
                showLogin<span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><a href="https://nuxt.com/docs/guide/directory-structure/middleware" rel="nofollow">更多内容请移步</a></p> 
<h5><a id="Hooks_516"></a>Hooks和服务端</h5> 
<h6><a id="composablesHooks_518"></a>composables(Hooks)</h6> 
<p>Nuxt的composables(Hooks)是一种可重用的逻辑代码块，可以在不同的页面、组件和插件中使用。它们是基于Vue 3的Composition API构建的，可以让您更轻松地管理和共享状态、副作用和计算逻辑。Nuxt提供了一些内置的composables，例如useAsyncData、useFetch和useRoute，您也可以创建自己的composables。使用composables可以使代码更加模块化和可维护，同时也可以提高代码的可重用性和可测试性。</p> 
<p>在服务端渲染方面，Nuxt的composables可以在服务器端和客户端上运行，因为它们是基于Vue 3的Composition API构建的。但是，需要注意的是，某些composables可能会在服务器端和客户端上产生不同的行为，因此您需要仔细测试您的代码以确保它们在两个环境中都能正常工作。另外，由于服务器端渲染的特殊性，某些composables可能无法在服务器端上运行，因此您需要仔细阅读Nuxt的文档以了解哪些composables适用于服务器端渲染。</p> 
<p>总之，Nuxt的composables是一种非常有用的工具，可以帮助您更轻松地管理和共享状态、副作用和计算逻辑。无论您是在客户端还是服务器端上编写代码，都可以使用composables来提高代码的可重用性和可测试性。</p> 
<p>Nuxt3使用compositables/目录使用自动导入将Vue可组合文件自动导入到应用程序中！</p> 
<pre><code class="prism language-typescript"><span class="token comment">// 方法1：使用命名导出</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useFoo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-typescript"><span class="token comment">// 方法2：使用默认导出</span>
<span class="token comment">// It will be available as useFoo() (camelCase of file name without extension)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'bar'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>用法：您现在可以在.js、.ts和.vue文件中使用自动导入的可组合文件</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    {<!-- -->{ foo }}
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">useFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><a href="https://nuxt.com/docs/guide/directory-structure/composables" rel="nofollow">更多内容请移步</a></p> 
<h6><a id="_558"></a>服务端</h6> 
<p>server/ 目录是 Nuxt 项目中用于服务器端渲染（SSR）和服务器中间件的文件夹。当 Nuxt 在 SSR 模式下运行时，它使用 Node.js 在服务器上渲染 Vue 组件并将生成的 HTML 发送到客户端。server/ 目录包含用于配置服务器和处理请求的文件。<br> server/ 目录中一个重要的文件是routes，它用于创建服务器实例并配置中间件。该文件导出一个函数，该函数以 nuxtApp 对象作为参数，可以用于访问 Nuxt 应用程序实例并配置服务器。<br> server/ 目录中另一个重要的文件是middleware，它用于定义服务器中间件。服务器中间件类似于客户端中间件，但它在服务器上运行而不是在客户端上。服务器中间件可用于处理请求、修改响应或执行其他服务器端任务。<br> 除了这些文件之外，server/ 目录可能包含其他用于配置服务器或处理请求的文件。例如，server/api 文件可以用于定义客户端可以访问的 API 端点。<br> 总之，server/ 目录是 Nuxt 项目的重要部分，用于在 SSR 模式下配置服务器和处理请求。</p> 
<p>在server/api/hello.ts中创建一个新文件：</p> 
<pre><code class="prism language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    api<span class="token operator">:</span> <span class="token string">'works'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p>现在，您可以使用wait$fetch（“/API/hello”）来普遍调用此API。</p> 
<h6><a id="_577"></a>服务器路由</h6> 
<p><sub>/server/api中的文件在其路由中会自动以/api作为前缀。要添加不带/api前缀的服务器路由，您可以将它们放在</sub>/server/routes目录中。</p> 
<p>在server/routes/hello.ts中创建一个新文件</p> 
<pre><code class="prism language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">'Hello World!'</span><span class="token punctuation">)</span>
</code></pre> 
<p>给定上面的示例，/hello路由将在http://localhost:3000/hello.</p> 
<h6><a id="_588"></a>服务器中间件</h6> 
<p>Nuxt将自动读取~/server/middleware中的任何文件，为您的项目创建服务器中间件。<br> 中间件处理程序将在任何其他服务器路由之前对每个请求运行，以添加或检查标头、记录请求或扩展事件的请求对象。</p> 
<pre><code class="prism language-typescript"><span class="token comment">// server/middleware/log.ts</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'New request: '</span> <span class="token operator">+</span> event<span class="token punctuation">.</span>node<span class="token punctuation">.</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-typescript"><span class="token comment">// server/middleware/auth.ts</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineEventHandler</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  event<span class="token punctuation">.</span>context<span class="token punctuation">.</span>auth <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> user<span class="token operator">:</span> <span class="token number">123</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><a href="https://nuxt.com/docs/guide/directory-structure/server" rel="nofollow">更多内容请移步</a></p> 
<h5><a id="_608"></a>配置环境变量</h5> 
<p>要配置Nuxt环境变量，您需要了解以下几个知识点：<br> Nuxt的环境变量配置文件：Nuxt使用.env文件来配置环境变量。您可以在项目根目录下创建.env文件，并在其中定义您的环境变量。例如，您可以在.env文件中定义一个名为API_URL的环境变量，其值为您的API的URL。<br> 环境变量的访问方式：您可以使用process.env对象来访问您在.env文件中定义的环境变量。例如，如果您在.env文件中定义了一个名为API_URL的环境变量，您可以在代码中使用process.env.API_URL来访问它。<br> 环境变量的作用域：Nuxt的环境变量可以在客户端和服务器端上使用。如果您需要在客户端和服务器端上使用相同的环境变量，您可以将其定义在.env文件中。如果您需要在客户端和服务器端上使用不同的环境变量，您可以将其定义在.env.client和.env.server文件中。<br> 环境变量的注入：Nuxt会将您在.env文件中定义的环境变量注入到客户端和服务器端的JavaScript代码中。这意味着您可以在客户端和服务器端的JavaScript代码中使用process.env对象来访问</p> 
<pre><code># 请求接口地址
VITE_REQUEST_BASE_URL = 'https://www.xxxxxx.net'
VITE_SERVER_NAME = 'https://www.xxxxxx.net/api'
# VITE开头的变量才会被暴露出去
</code></pre> 
<pre><code class="prism language-typescript"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> loadEnv <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">const</span> envName <span class="token operator">=</span> <span class="token function">loadEnv</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'./env'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">VITE_SERVER_NAME</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineNuxtConfig</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  app<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    head<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      meta<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span> name<span class="token operator">:</span> <span class="token string">'viewport'</span><span class="token punctuation">,</span> content<span class="token operator">:</span> <span class="token string">'width=device-width, initial-scale=1'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      script<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// { src: 'http://xxx.js' }</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      link<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// { rel: 'stylesheet', href: 'https://awesome-lib.css' }</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  srcDir<span class="token operator">:</span> <span class="token string">'src/'</span><span class="token punctuation">,</span>
  css<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">'@/assets/styles/reset.css'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  modules<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token string">'@pinia/nuxt'</span><span class="token punctuation">,</span>
    <span class="token string">'@vueuse/nuxt'</span><span class="token punctuation">,</span>
    <span class="token string">'@element-plus/nuxt'</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  vite<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    css<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      preprocessorOptions<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        scss<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          additionalData<span class="token operator">:</span> <span class="token string">'@import "@/assets/styles/default.scss";'</span>	
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  runtimeConfig<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 运行时常量</span>
    <span class="token keyword">public</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">// 客户端-服务的都能访问</span>
      baseUrl<span class="token operator">:</span> envName
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<p><a href="https://nuxt.com/docs/api/configuration/nuxt-config" rel="nofollow">更多内容请移步</a></p> 
<h3><a id="_669"></a>部署</h3> 
<p>Nuxt.js有两种打包方式：静态和服务器端渲染（SSR）。静态打包方式生成的是静态HTML文件，可以直接部署到任何静态文件服务器上。而SSR打包方式则需要在服务器上运行Node.js，将Vue组件渲染为HTML并将其发送到客户端。因此，SSR打包方式需要在支持Node.js的服务器上部署。<br> 关于部署到服务器和云平台，您可以将打包后的文件上传到服务器或云平台上，并在服务器上运行Node.js来启动Nuxt.js应用程序。您可以使用PM2等进程管理工具来管理Node.js进程，并使用Nginx等反向代理服务器来处理HTTP请求。</p> 
<h4><a id="_673"></a>打包</h4> 
<p>对于静态打包方式，您可以使用以下命令进行打包：</p> 
<pre><code>npm run generate
</code></pre> 
<p>对于SSR打包方式，您可以使用以下命令进行打包：</p> 
<pre><code>npm run build
</code></pre> 
<p>这将生成一个.nuxt目录，其中包含所有的服务器端渲染代码和相关的资源文件。您可以将这些文件上传到支持Node.js的服务器上，并使用以下命令启动Nuxt.js应用程序：</p> 
<h4><a id="_685"></a>部署到服务器</h4> 
<p>1、在服务器上安装Node.js和Nginx等必要的软件。可以使用以下命令在Ubuntu上安装Node.js：</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nodejs
</code></pre> 
<p>2、可以使用以下命令在Ubuntu上安装Nginx：</p> 
<pre><code class="prism language-shell"><span class="token function">sudo</span> <span class="token function">apt-get</span> update
<span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> nginx
</code></pre> 
<p>3、配置Nginx反向代理服务器。您需要将Nginx配置为将HTTP请求转发到Node.js服务器。可以使用以下配置文件作为参考：</p> 
<pre><code>server {
    listen 80;
    server_name example.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
</code></pre> 
<p>4.配置完了重启nginx</p> 
<pre><code class="prism language-shell">nginx -s reload
</code></pre> 
<p>5、启动Nuxt.js应用程序。您可以使用以下命令启动Nuxt.js应用程序：</p> 
<pre><code>npm run start
</code></pre> 
<p>6、使用PM2等进程管理工具来管理Node.js进程。可以使用以下命令安装PM2：</p> 
<pre><code>npm install pm2 -g
</code></pre> 
<p>7、可以使用以下命令启动Nuxt.js应用程序并使用PM2管理进程,进入到nuxt项目对应的文件夹，执行：</p> 
<pre><code>pm2 --name=你的服务名 start npm -- run start
</code></pre> 
<h6><a id="pm2_734"></a>pm2常用命令</h6> 
<pre><code class="prism language-shell">pm2 list                             查看所有进程
pm2 show <span class="token number">0</span>                           查看进程详细信息，0为PM2进程id 
pm2 stop all                         停止PM2列表中所有的进程
pm2 stop <span class="token number">0</span>                           停止PM2列表中进程为0的进程
pm2 reload all                       重载PM2列表中所有的进程
pm2 reload <span class="token number">0</span>                         重载PM2列表中进程为0的进程
pm2 delete <span class="token number">0</span>                         删除PM2列表中进程为0的进程
pm2 delete all                       删除PM2列表中所有的进程
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/805c9b6935f05d26c6a959bbe961f5ca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">通俗易懂讲解，彻底弄懂 https 原理本质（一）加密知识</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d57a64c998550fb07780d48154e7a0e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">各种硬件对应”位数“，各种字长，编址方式的区分。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>