<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>原生微信小程序自定义组件以及组件间通讯 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="原生微信小程序自定义组件以及组件间通讯" />
<meta property="og:description" content="文章目录 前言一、新建组件二、文件介绍1.index.json2.index.js 三、在父组件中引入子组件四、父子组件通讯属性绑定事件绑定获取组件实例 总结 前言 当我们在开发项目时，有时候会发现，在不同的页面中会用到相同的功能模块，,此时我们就可以将这些相同的部分提取出来并且单独设为一个&#34;页面&#34;,然后在要应用到它的地方引用就可以了， 在vue 、react 等框架中，组件化开发的概念相信大家都很熟悉了，下面我来介绍介绍原生微信小程序如何定义组件，如果有纰漏欢迎大家指正。
一、新建组件 首先在根目录下新建一个 components 文件夹用来盛放我们所有的自定义组件，在文件夹下建立第一个自定义组件 cptDemo
二、文件介绍 以下文件都为 cptDemo 下的文件。
1.index.json 要在自定义组件的 json 中进行自定义组件声明,也就是告诉开发者这是一个组件:
{ &#34;component&#34;: true } 2.index.js data：用于定义组件模板渲染的私有数据；methods方法：定义事件处理函数和自定义方法；properties属性：用来接受外部数据； //子组件 wxml &lt;view&gt; {{cliname}} &lt;/view&gt; //子组件 js properties：{ cliname: { type:String, value: &#39;&#39; } } //父组件 wxml &lt;cpt-demo cliname=&#39;{{cliname}}&#39;&gt;&lt;/cpt-demo&gt; //父组件 js data:{ cliname:&#34;传递给子组件的值&#34; } observers：属性监听器，用于监听和响应任何属性和数据字段的变化，从而执行特定的操作 //数据监听器支持监听对象中单个或多个属性的变化 //使用通配符**来监听对象所有属性的变化 observers:{ &#39;字段A,字段B&#39;:function(字段A的的新值，字段B的新值){ //do something } } 自定义组件的生命周期 lifetimes Component({ //新的写法 lifetimes: { created:function(){ //在组件实例刚刚创建时执行 //此时不能调用setData //只能给组件的this添加一些自定义的属性字段 }, ready: function() { // 在组件在视图层布局完成后执行 }, moved: function() { // 在组件实例被移动到节点树另一个位置时执行 }, attached: function() { // 在组件实例进入页面节点树时执行 //this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8940caafc28197fb2c8ce1cd942925b6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-10T18:14:39+08:00" />
<meta property="article:modified_time" content="2022-06-10T18:14:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">原生微信小程序自定义组件以及组件间通讯</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_6" rel="nofollow">前言</a></li><li><a href="#_14" rel="nofollow">一、新建组件</a></li><li><a href="#_19" rel="nofollow">二、文件介绍</a></li><li><ul><li><ul><li><a href="#1indexjson_21" rel="nofollow">1.index.json</a></li><li><a href="#2indexjs_30" rel="nofollow">2.index.js</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_155" rel="nofollow">三、在父组件中引入子组件</a></li><li><a href="#_171" rel="nofollow">四、父子组件通讯</a></li><li><ul><li><ul><li><a href="#_181" rel="nofollow">属性绑定</a></li><li><a href="#_203" rel="nofollow">事件绑定</a></li><li><a href="#_245" rel="nofollow">获取组件实例</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_270" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_6"></a>前言</h2> 
<p>        当我们在开发项目时，有时候会发现，在不同的页面中会用到相同的功能模块，,此时我们就可以将这些相同的部分提取出来并且单独设为一个"页面",然后在要应用到它的地方引用就可以了， 在vue 、react 等框架中，组件化开发的概念相信大家都很熟悉了，下面我来介绍介绍原生微信小程序如何定义组件，如果有纰漏欢迎大家指正。</p> 
<hr> 
<h2><a id="_14"></a>一、新建组件</h2> 
<p>首先在根目录下新建一个 components 文件夹用来盛放我们所有的自定义组件，在文件夹下建立第一个自定义组件 cptDemo<br> <img src="https://images2.imgbox.com/96/f4/0dDiGXgZ_o.jpg" alt="在这里插入图片描述"></p> 
<h2><a id="_19"></a>二、文件介绍</h2> 
<p>以下文件都为 cptDemo 下的文件。</p> 
<h4><a id="1indexjson_21"></a>1.index.json</h4> 
<p>要在自定义组件的 json 中进行自定义组件声明,也就是告诉开发者这是一个组件:</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"component"</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="2indexjs_30"></a>2.index.js</h4> 
<ul><li>data：用于定义组件模板渲染的私有数据；</li><li>methods方法：定义事件处理函数和自定义方法；</li><li>properties属性：用来接受外部数据；</li></ul> 
<pre><code class="prism language-javascript"><span class="token comment">//子组件 wxml</span>
<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>
    <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>cliname<span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

<span class="token comment">//子组件 js</span>
properties：<span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">cliname</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
            <span class="token literal-property property">type</span><span class="token operator">:</span>String<span class="token punctuation">,</span>
            <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//父组件 wxml</span>
<span class="token operator">&lt;</span>cpt<span class="token operator">-</span>demo cliname<span class="token operator">=</span><span class="token string">'{<!-- -->{cliname}}'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cpt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>

<span class="token comment">//父组件 js</span>
<span class="token literal-property property">data</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">cliname</span><span class="token operator">:</span><span class="token string">"传递给子组件的值"</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li>observers：属性监听器，用于监听和响应任何属性和数据字段的变化，从而执行特定的操作</li></ul> 
<pre><code class="prism language-javascript"><span class="token comment">//数据监听器支持监听对象中单个或多个属性的变化</span>
<span class="token comment">//使用通配符**来监听对象所有属性的变化</span>
    <span class="token literal-property property">observers</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">'字段A,字段B'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">字段<span class="token constant">A</span>的的新值，字段<span class="token constant">B</span>的新值</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
            <span class="token comment">//do something</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<ul><li>自定义组件的生命周期 lifetimes</li></ul> 
<pre><code class="prism language-javascript"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
<span class="token comment">//新的写法</span>
  <span class="token literal-property property">lifetimes</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
     <span class="token function-variable function">created</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token comment">//在组件实例刚刚创建时执行</span>
      <span class="token comment">//此时不能调用setData</span>
      <span class="token comment">//只能给组件的this添加一些自定义的属性字段</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     
     <span class="token function-variable function">ready</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 在组件在视图层布局完成后执行</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     
     <span class="token function-variable function">moved</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 在组件实例被移动到节点树另一个位置时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
       
    <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 在组件实例进入页面节点树时执行</span>
      <span class="token comment">//this.data已经被初始化完毕</span>
      <span class="token comment">//绝大多数的初始化工作都在这里完成（发送获取初始数据...）</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token function-variable function">detached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 在组件实例被从页面节点树移除时执行</span>
      <span class="token comment">//退出一个页面时，会触发页面内每个自定义组件的detached生命周期函数</span>
      <span class="token comment">//适合做一些清理工作</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 每当组件方法抛出错误时执行</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 以下是旧式的定义方式，可以保持对 &lt;2.2.3 版本基础库的兼容</span>
  <span class="token function-variable function">attached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在组件实例进入页面节点树时执行</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">detached</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 在组件实例被从页面节点树移除时执行</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<ul><li>组件页面的生命周期 pageLifetimes</li></ul> 
<pre><code class="prism language-javascript"><span class="token comment">//当页面发生变化时触发函数</span>
   <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
       <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//页面被展示</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'show'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//页面被隐藏</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hide'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token punctuation">,</span>
       <span class="token function">resize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span> <span class="token comment">//页面尺寸发生变化</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
</code></pre> 
<ul><li>插槽</li></ul> 
<pre><code class="prism language-javascript"><span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//开启多slot支持</span>
        <span class="token literal-property property">multipleSlots</span><span class="token operator">:</span><span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token comment">//自定义组件</span>
 <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>components<span class="token operator">/</span>test4<span class="token operator">/</span>test4<span class="token punctuation">.</span>wxml<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>test4组件<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>slot<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">"m1"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>

<span class="token comment">//使用组件</span>
<span class="token operator">&lt;</span>test4<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view<span class="token operator">&gt;</span>slot<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view slot<span class="token operator">=</span><span class="token string">"m1"</span><span class="token operator">&gt;</span>m1<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>test4<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="_155"></a>三、在父组件中引入子组件</h2> 
<p>在父组件的 json文件中引入，这种方式叫局部引用，全局引用可在 app.js</p> 
<pre><code class="prism language-javascript"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"cpt-demo"</span><span class="token operator">:</span><span class="token string">"/components/cptDemo/index"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在父组件wxml文件使用</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>cpt<span class="token operator">-</span>demo<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cpt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="_171"></a>四、父子组件通讯</h2> 
<p>我总结了下面三种组件通讯方式：</p> 
<ul><li><strong>属性绑定</strong><br> 用于父组件向子组件的指定属性设置数据，仅能设置 JSON 兼容的数据(只能传递数据，不能传递方法)</li><li><strong>事件绑定</strong><br> 用于子组件向父组件传递数据，可以传递任意数据(包括数据和方法)</li><li><strong>获取组件实例</strong><br> 父组件还可以通过 this.selectComponent() 获取子组件实例对象，这样就可以直接访问子组件的任意数据和方法</li></ul> 
<h4><a id="_181"></a>属性绑定</h4> 
<ul><li>属性绑定用于实现<strong>父向子传值</strong>，而且只能传递普通类型的数据，无法将方法传递给子组件;</li><li><strong>实现</strong>： 通过父组件向子组件传递数据，子组件通过 properties 接收;</li></ul> 
<pre><code class="prism language-javascript"><span class="token comment">//父组件 .js - 定义要传递的值</span>
 <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span>
 <span class="token punctuation">}</span>
   
<span class="token comment">//父组件 .wxml - 将名为count的值传递給子组件cpt-demo</span>
 <span class="token operator">&lt;</span>cpt<span class="token operator">-</span>demo count<span class="token operator">=</span><span class="token string">"{<!-- -->{count}}"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cpt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>

<span class="token comment">//子组件通过 properties 接收父组件传递过来的 count</span>
 <span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token literal-property property">type</span><span class="token operator">:</span>Number
<span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h4><a id="_203"></a>事件绑定</h4> 
<ul><li> <p>事件绑定用于实现<strong>子向父传值</strong>，可以传递任何类型的数据;</p> </li><li> <p><strong>实现：</strong><br>         在子组件的 js 中，在特定的时机通过调用 <strong>this.triggerEvent (‘自定义事件名称’, { 参数对象 })</strong> 产生一个自定义事件，并且可以带上事件参数对象<br>         在父组件的 wxml 中的子组件标签中，使用 <strong>bind :自定义事件名称=“事件处理函数”</strong> 来监听自定义事件;<br>         在父组件的 js 中，定义一个接收传递自定义事件的函数，并通过 e.detail 获取到子组件传递过来的数据;</p> </li></ul> 
<p>子组件 - 在特定的时机通过调用 <strong>this.triggerEvent</strong> 产生一个自定义事件</p> 
<pre><code class="prism language-javascript"><span class="token comment">// .wxml - 绑定点击事件，每次点击时触发子组件向传递父组件的方法</span>
 <span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"sonCount"</span><span class="token operator">&gt;</span>点我传递<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
 ​
 <span class="token comment">// .js - 定义触发的方法</span>
 <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">11</span> <span class="token punctuation">}</span>
 <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
   <span class="token function">sonCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
       <span class="token comment">// 使用 triggerEvent 来通过定义事件 sync 传递属性值 value </span>
       <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">triggerEvent</span><span class="token punctuation">(</span><span class="token string">'sync'</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>count<span class="token punctuation">}</span> <span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>父组件 - 使用 bind :自定义事件名称=“事件处理函数” 监听自定义事件</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>test bind<span class="token operator">:</span>sync<span class="token operator">=</span><span class="token string">"syncCount"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>test<span class="token operator">&gt;</span>
</code></pre> 
<p>父组件 - 定义一个接收传递自定义事件的函数，并通过 e.detail 获取到子组件传递过来的数据</p> 
<pre><code class="prism language-javascript"> <span class="token function">syncCount</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行 syncCount'</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
       
     <span class="token comment">// 通过 e.detail.value 获取获取子组件传递过来的数据 value</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token comment">// 11</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<h4><a id="_245"></a>获取组件实例</h4> 
<ul><li>通过在子组件标签上定义 <strong>id或class选择器</strong>，并在父组件里调用 this.selectComponent(“标签选择器”) 来获取子组件的实例对象，从而 <strong>直接访问子组件的任意数据和方法;</strong></li><li><strong>实现</strong>：定义标签选择器并通过 this.selectComponent(“标签选择器”) 来获取子组件实例对象;</li></ul> 
<pre><code class="prism language-javascript"><span class="token comment">//父组件 wxml 定义子组件的class选择器或id选择器</span>
 <span class="token operator">&lt;</span>cpt<span class="token operator">-</span>demo <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span> id<span class="token operator">=</span><span class="token string">"sonID"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>cpt<span class="token operator">-</span>demo<span class="token operator">&gt;</span>
 <span class="token operator">&lt;</span>button bindtap<span class="token operator">=</span><span class="token string">"getChild"</span><span class="token operator">&gt;</span>获取<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span> 

<span class="token comment">//父组件 .js</span>
   <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
     <span class="token comment">// 通过 selectComponent('#sonID') 获取 id 为sonID的实例对象</span>
     <span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">selectComponent</span><span class="token punctuation">(</span><span class="token string">'#sonID'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
     <span class="token comment">// --- 获取到子组件的实例对象，就可以对子组件的属性方法进行操作</span>
     
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查看子组件实例对象</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>data<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 查看 count 属性</span>
     child<span class="token punctuation">.</span><span class="token function">addCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用子组件上的方法</span>
   <span class="token punctuation">}</span>
</code></pre> 
<hr> 
<h2><a id="_270"></a>总结</h2> 
<p>        以上就是在原生微信小程序中如何自定义组件，以及组件间的通讯，如果有纰漏的地方，欢迎大家来指正……<br> <img src="https://images2.imgbox.com/27/33/QFqSYmVQ_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a887e1cc1a32e375df013e8a76b0aa84/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">手撕迪杰斯特拉算法（Dijkstra）及代码（附图解）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/88862990d6c5ba6df46aaa87131d7d7b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">dma_buf_export</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>