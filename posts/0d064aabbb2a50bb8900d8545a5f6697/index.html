<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Jenkins离线部署方法 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Jenkins离线部署方法" />
<meta property="og:description" content="一、前言 1、在项目开发过程中以及UAT测试阶段，为解决频繁发布问题，往往我们会安装一个jenkins部署工具，减少我们频繁发布等问题，在测试阶段我们需要客户提供一台服务器安装此插件，由于客户服务器网络限制等问题，Linux系统服务器不能连接外网导致在安装jenkins过程中不能正常的安装我们需要的插件，由于jenkins从官网下载后，默认是没有插件的，需要我们自己安装对应的插件，安装插件过程中需要连接外网进行下载，如果是有网络的情况下安装是非常方便的，但是如果是离线安装会多出几步操作，官方给出了离线安装方法，但是给出的文档有的小伙伴看不懂，网上详细资料也非常少，今天借此机会在参照官方的给出的安装方法再次进行补充，今天在这里做下记录分享给在项目中需要的小伙伴仅做参考。
一、jenkins下载 1、jenkins下载地址：War Jenkins Packages
2、选择对应的安装版本、注意每个版本支持的jdk
3、选择对应的版本号，本次安装采用war包方式启动 二、jenkins离线下载插件 1、官方提供的离线安装方法：Installing Jenkins
2、下载离线安装插件工具
3、进入plugin-installation-manager-tool：注意、最新的插件工具默认jdk最低要求只支持jdk11上GitHub - jenkinsci/plugin-installation-manager-tool: Plugin Manager CLI tool for Jenkins
4、第三步是自己下载源码自己打jar包，也可以采用第四步官方下载一个打包的jar包，下载地址：
5、下载插件工具包地址：
Release 2.12.11 · jenkinsci/plugin-installation-manager-tool · GitHub 6、下载后放到wind本地使用命令启动
java -jar jenkins-plugin-manager-2.12.11.jar --war C:\Users\xunliu\Desktop\jenkins\jenkins.war --plugin-file C:\Users\xunliu\Desktop\jenkins\plugins.txt --plugins delivery-pipeline-plugin:1.3.2 deployit-plugin
输入命令后，会读取C:\Users\xunliu\Desktop\jenkins\plugins.txt文件内容对应的插件名称，在输入上面命令前，需要先把需要的插件名称写入到plugins.txt后，在执行此命令会自动去官网下载war包对应的插件依赖，第一次有点久需要等待几分钟不要关闭窗口，下载完成后会自动关闭jar服务。
ant antisamy-markup-formatter batch-task credentials cvs external-monitor-job javadoc junit ldap mailer matrix-auth matrix-project maven-plugin pam-auth powershell publish-over-ftp publish-over-ssh rebuild role-strategy script-security ssh-credentials ssh-slaves subversion translation view-job-filters windows-slaves Localization Localization: Chinese (Simplified) 下载完成后的插件路径：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/0d064aabbb2a50bb8900d8545a5f6697/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-24T11:17:33+08:00" />
<meta property="article:modified_time" content="2023-03-24T11:17:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Jenkins离线部署方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、前言</h2> 
<p>1、在项目开发过程中以及UAT测试阶段，为解决频繁发布问题，往往我们会安装一个jenkins部署工具，减少我们频繁发布等问题，在测试阶段我们需要客户提供一台服务器安装此插件，由于客户服务器网络限制等问题，Linux系统服务器不能连接外网导致在安装jenkins过程中不能正常的安装我们需要的插件，由于jenkins从官网下载后，默认是没有插件的，需要我们自己安装对应的插件，安装插件过程中需要连接外网进行下载，如果是有网络的情况下安装是非常方便的，但是如果是离线安装会多出几步操作，官方给出了离线安装方法，但是给出的文档有的小伙伴看不懂，网上详细资料也非常少，今天借此机会在参照官方的给出的安装方法再次进行补充，今天在这里做下记录分享给在项目中需要的小伙伴仅做参考。</p> 
<h2>一、jenkins下载</h2> 
<p>1、jenkins下载地址：<a href="https://get.jenkins.io/war-stable/" rel="nofollow" title="War Jenkins Packages">War Jenkins Packages</a></p> 
<p>2、选择对应的安装版本、注意每个版本支持的jdk</p> 
<p><img alt="" height="775" src="https://images2.imgbox.com/0f/cc/Z9VsZdpf_o.png" width="828"></p> 
<p>3、选择对应的版本号，本次安装采用war包方式启动 </p> 
<p><img alt="" height="595" src="https://images2.imgbox.com/ea/b2/cYfjGWm8_o.png" width="489"></p> 
<h2>二、jenkins离线下载插件</h2> 
<p>1、官方提供的离线安装方法：<a href="https://www.jenkins.io/doc/book/installing/" rel="nofollow" title="Installing Jenkins">Installing Jenkins</a></p> 
<p><img alt="" height="974" src="https://images2.imgbox.com/a7/59/EdYzq9tk_o.png" width="1200"></p> 
<p> 2、下载离线安装插件工具</p> 
<p><img alt="" height="811" src="https://images2.imgbox.com/d4/c2/CZPVTNb0_o.png" width="1200"></p> 
<p> 3、进入plugin-installation-manager-tool：注意、最新的插件工具默认jdk最低要求只支持jdk11上<a href="https://github.com/jenkinsci/plugin-installation-manager-tool" title="GitHub - jenkinsci/plugin-installation-manager-tool: Plugin Manager CLI tool for Jenkins">GitHub - jenkinsci/plugin-installation-manager-tool: Plugin Manager CLI tool for Jenkins</a></p> 
<p><img alt="" height="837" src="https://images2.imgbox.com/14/0d/bVCYwAd4_o.png" width="1200"></p> 
<p> 4、第三步是自己下载源码自己打jar包，也可以采用第四步官方下载一个打包的jar包，下载地址：</p> 
<p><img alt="" height="913" src="https://images2.imgbox.com/0d/56/M0g0c52A_o.png" width="1200"></p> 
<p>5、下载插件工具包地址：</p> 
<p><a href="https://github.com/jenkinsci/plugin-installation-manager-tool/releases/tag/2.12.11" title="Release 2.12.11 · jenkinsci/plugin-installation-manager-tool · GitHub">Release 2.12.11 · jenkinsci/plugin-installation-manager-tool · GitHub</a> </p> 
<p><img alt="" height="859" src="https://images2.imgbox.com/6e/fc/sM9OJnYR_o.png" width="1200"></p> 
<p> 6、下载后放到wind本地使用命令启动</p> 
<p>java -jar jenkins-plugin-manager-2.12.11.jar --war C:\Users\xunliu\Desktop\jenkins\jenkins.war --plugin-file C:\Users\xunliu\Desktop\jenkins\plugins.txt --plugins delivery-pipeline-plugin:1.3.2 deployit-plugin</p> 
<p><img alt="" height="387" src="https://images2.imgbox.com/33/cd/FnxlUc14_o.png" width="1200"></p> 
<p>输入命令后，会读取C:\Users\xunliu\Desktop\jenkins\plugins.txt文件内容对应的插件名称，在输入上面命令前，需要先把需要的插件名称写入到plugins.txt后，在执行此命令会自动去官网下载war包对应的插件依赖，第一次有点久需要等待几分钟不要关闭窗口，下载完成后会自动关闭jar服务。</p> 
<p><img alt="" height="748" src="https://images2.imgbox.com/a6/70/mpQPm40Q_o.png" width="403"></p> 
<p> </p> 
<pre><code class="language-bash">ant
antisamy-markup-formatter
batch-task
credentials
cvs
external-monitor-job
javadoc
junit
ldap
mailer
matrix-auth
matrix-project
maven-plugin
pam-auth
powershell
publish-over-ftp
publish-over-ssh
rebuild
role-strategy
script-security
ssh-credentials
ssh-slaves
subversion
translation
view-job-filters
windows-slaves
Localization
Localization: Chinese (Simplified)</code></pre> 
<p>下载完成后的插件路径：</p> 
<p><img alt="" height="920" src="https://images2.imgbox.com/46/1a/A9DhBZK8_o.png" width="1195"></p> 
<p> </p> 
<p></p> 
<p></p> 
<p>7、第六步命令解释：</p> 
<ul><li><code>--plugin-file</code> or <code>-f</code>: (optional) Path to the plugins.txt, or plugins.yaml file, which contains a list of plugins to install. If this file does not exist, or if the file exists, but does not have a .txt or .yaml/.yml extension, then an error will be thrown.</li><li><code>--plugin-download-directory</code> or <code>-d</code>: (optional) Directory in which to install plugins. This configuration can also be made via the PLUGIN_DIR environment variable. The directory will be first deleted, then recreated. If no directory configuration is provided, the defaults are C:\ProgramData\Jenkins\Reference\Plugins if the detected operating system is Microsoft Windows, or /usr/share/jenkins/ref/plugins otherwise.</li><li><code>--plugins</code> or <code>-p</code>: (optional) List of plugins to install (see plugin format below), separated by a space.</li><li><code>--clean-download-directory</code>: (optional) If sets, cleans the plugin download directory before plugin installation. Otherwise the tool performs plugin download and reports compatibility issues, if any.</li><li><code>--jenkins-version</code>: (optional) Version of Jenkins to be used. If not specified, the plugin manager will try to extract it from the WAR file or other sources. The argument can be also set using the <code>JENKINS_VERSION</code> environment variable.</li><li><code>--war</code> or <code>-w</code>: (optional) Path to Jenkins war file. If no war file is entered, will default to /usr/share/jenkins/jenkins.war or C:\ProgramData\Jenkins\jenkins.war, depending on the user's OS. Plugins that are already included in the Jenkins war will only be downloaded if their required version is newer than the one included.</li><li><code>--list</code> or <code>-l</code>: (optional) Lists plugin names and versions of: installed plugins (plugins that already exist in the plugin directory), bundled plugins (non-detached plugins that exist in the war file), plugins that will be downloaded (highest required versions of the requested plugins and dependencies that are not already installed), and the effective plugin set (the highest versions of all plugins that are already installed or will be installed)</li><li><code>--verbose</code>: (optional) Show additional information about plugin dependencies and the download process</li><li><code>--hide-security-warnings</code>: (optional) Hide if any of the user specified plugins have security warnings</li><li><code>--view-all-security-warnings</code>: (optional) Show all plugins that have security warnings.</li><li><code>--available-updates</code>: (optional) Show if any requested plugins have newer versions available. If a Jenkins version-specific update center is available, the latest plugin version will be determined based on that update center's data.</li><li><code>--output {stdout,yaml,txt}</code>: (optional) Format to output plugin updates file in, stdout is the default.</li><li><code>--latest {true,false}</code>: (optional) Set to false to download the minimum required version of all dependencies.</li><li><code>--latest-specified</code>: (optional) (advanced) Download latest dependencies of any plugin that is requested to have the latest version. All other plugin dependency versions are determined by the update center metadata or the plugin MANIFEST.MF.</li><li><code>--jenkins-update-center</code>: (optional) Sets the main update center filename, which can also be set via the JENKINS_UC environment variable. If a CLI option is entered, it will override what is set in the environment variable. If not set via CLI option or environment variable, will default to <a href="https://updates.jenkins.io/update-center.actual.json" rel="nofollow" title="https://updates.jenkins.io/update-center.actual.json">https://updates.jenkins.io/update-center.actual.json</a></li><li><code>--jenkins-experimental-update-center</code>: (optional) Sets the experimental update center, which can also be set via the JENKINS_UC_EXPERIMENTAL environment variable. If a CLI option is entered, it will override what is set in the environment variable. If not set via CLI option or environment variable, will default to <a href="https://updates.jenkins.io/experimental/update-center.actual.json" rel="nofollow" title="https://updates.jenkins.io/experimental/update-center.actual.json">https://updates.jenkins.io/experimental/update-center.actual.json</a></li><li><code>--jenkins-incrementals-repo-mirror</code>: (optional) Sets the incrementals repository mirror, which can also be set via the JENKINS_INCREMENTALS_REPO_MIRROR environment variable. If a CLI option is entered, it will override what is set in the environment variable. If not set via CLI option or environment variable, will default to <a href="https://repo.jenkins-ci.org/incrementals" rel="nofollow" title="Index of incrementals/">Index of incrementals/</a>.</li><li><code>--jenkins-plugin-info</code>: (optional) Sets the location of plugin information, which can also be set via the JENKINS_PLUGIN_INFO environment variable. If a CLI option is provided, it will override what is set in the environment variable. If not set via CLI option or environment variable, will default to <a href="https://updates.jenkins.io/current/plugin-versions.json" rel="nofollow" title="https://updates.jenkins.io/current/plugin-versions.json">https://updates.jenkins.io/current/plugin-versions.json</a>.</li><li><code>--version</code> or <code>-v</code>: (optional) Displays the plugin management tool version and exits.</li><li><code>--no-download</code>: (optional) Do not download plugins. By default plugins will be downloaded.</li><li><code>--skip-failed-plugins</code>: (optional) Adds the option to skip plugins that fail to download - CAUTION should be used when passing this flag as it could leave Jenkins in a broken state.</li><li><code>--credentials</code>: (optional) Comma-separated list of credentials to use for Basic Authentication for specific hosts (and optionally ports). Each value must adhere to format <code>&lt;host&gt;[:port]:&lt;username&gt;:&lt;password&gt;</code>. The password must not contain a <code>,</code>! The credentials are not used preemptively.</li></ul> 
<h2>三、jenkins离线安装步骤</h2> 
<p>1、以上把插件与war包准备好后，准备开始安装jenkins了</p> 
<p>2、在安装jenkins需要的必备软件，jdk8环境,tomcat9服务环境，把jenkins.war包放入到tomcat /webapps目录下 启动成功后，系统会自动创建目录/root/.jenkins/plugins。</p> 
<p>3、把上面下载好的插件C:\ProgramData\Jenkins\Reference\Plugins 目录文件上传到linux服务器路径下：/root/.jenkins/plugins</p> 
<p>4、打开地址登录：http://192.168.1.102:8080/jenkins</p> 
<p><img alt="" height="638" src="https://images2.imgbox.com/6d/73/eA0cvNJK_o.png" width="929"></p> 
<p> 5、输入密码后根据提示安装，这里就不在赘述，安装时不要选择推荐插件，选择自定义插件安装，并且把已经勾选的推荐插件去掉，选择无。</p> 
<p></p> 
<p> </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ab422d36f0f65be9836dc1c0f86134b0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">jmeter如何进行websocket压测？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/60388e51bbd821126df29e2cfa1ec42c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python报错：ModuleNotFoundError: No module named ‘xxx‘可能的解决方案大全</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>