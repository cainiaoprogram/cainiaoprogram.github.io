<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Openwrt编译问题:Libnettle 3.1 was not found. - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Openwrt编译问题:Libnettle 3.1 was not found." />
<meta property="og:description" content="最近在编译Openwrt固件，遇到一个libnettle的问题。对Openwrt不是很熟悉，折腾了几天，解决了，下面说一下思路。
问题日志如下：
checking for inline... inline checking for ANSI C header files... (cached) yes checking for getrandom... no checking for getentropy... no checking for NETTLE... no configure: error: *** *** Libnettle 3.1 was not found. make[3]: *** [/home/huqian/openwrt-sdk-v1.3.5/trunk/build_dir/target-mipsel_24kec&#43;dsp_uClibc-0.9.33.2/gnutls-3.4.7/.configured_yynynyynnynn] Error 1 make[3]: Leaving directory `/home/huqian/openwrt-sdk-v1.3.5/trunk/feeds/packages/libs/gnutls&#39; make[2]: *** [package/feeds/packages/gnutls/compile] Error 2 make[2]: Leaving directory `/home/huqian/openwrt-sdk-v1.3.5/trunk&#39; make[1]: *** [/home/huqian/openwrt-sdk-v1.3.5/trunk/staging_dir/target-mipsel_24kec&#43;dsp_uClibc-0.9.33.2/stamp/.package_compile] Error 2 make[1]: Leaving directory `/home/huqian/openwrt-sdk-v1.3.5/trunk&#39; make: *** [world] Error 2查看日志发现，是在编译gnutls-3.4.7时出现问题。继续查看该目录trunk/build_dir/target-mipsel_24kec&#43;dsp_uClibc-0.9.33.2/gnutls-3.4.7/下的config.log文件，寻找与nettle相关的信息，得如下： configure:8496: checking for NETTLE configure:8504: $PKG_CONFIG --exists --print-errors &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/17b8bcca01e925ccf64fa5a346d9f62a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-12-27T17:12:09+08:00" />
<meta property="article:modified_time" content="2015-12-27T17:12:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Openwrt编译问题:Libnettle 3.1 was not found.</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>最近在编译Openwrt固件，遇到一个libnettle的问题。对Openwrt不是很熟悉，折腾了几天，解决了，下面说一下思路。</p> 
<p>问题日志如下：</p> 
<p></p> 
<pre><code class="language-plain">checking for inline... inline
checking for ANSI C header files... (cached) yes
checking for getrandom... no
checking for getentropy... no
checking for NETTLE... no
configure: error: 
  ***
  *** Libnettle 3.1 was not found.

make[3]: *** [/home/huqian/openwrt-sdk-v1.3.5/trunk/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/gnutls-3.4.7/.configured_yynynyynnynn] Error 1
make[3]: Leaving directory `/home/huqian/openwrt-sdk-v1.3.5/trunk/feeds/packages/libs/gnutls'
make[2]: *** [package/feeds/packages/gnutls/compile] Error 2
make[2]: Leaving directory `/home/huqian/openwrt-sdk-v1.3.5/trunk'
make[1]: *** [/home/huqian/openwrt-sdk-v1.3.5/trunk/staging_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/stamp/.package_compile] Error 2
make[1]: Leaving directory `/home/huqian/openwrt-sdk-v1.3.5/trunk'
make: *** [world] Error 2</code></pre>查看日志发现，是在编译gnutls-3.4.7时出现问题。继续查看该目录trunk/build_dir/target-mipsel_24kec+dsp_uClibc-0.9.33.2/gnutls-3.4.7/下的config.log文件，寻找与nettle相关的信息，得如下： 
<p></p> 
<p><span style="background-color:rgb(240,240,240)"></span></p> 
<pre><code class="language-plain">configure:8496: checking for NETTLE
configure:8504: $PKG_CONFIG --exists --print-errors "nettle &gt;= 3.1"
Requested 'nettle &gt;= 3.1' but version of Nettle is 2.7.1
You may find new versions of Nettle at http://www.lysator.liu.se/~nisse/nettle
configure:8507: $? = 1
configure:8522: $PKG_CONFIG --exists --print-errors "nettle &gt;= 3.1"
Requested 'nettle &gt;= 3.1' but version of Nettle is 2.7.1
You may find new versions of Nettle at http://www.lysator.liu.se/~nisse/nettle
configure:8525: $? = 1
Requested 'nettle &gt;= 3.1' but version of Nettle is 2.7.1
You may find new versions of Nettle at http://www.lysator.liu.se/~nisse/nettle
configure:8553: result: no
configure:8556: error:
  ***
  *** Libnettle 3.1 was not found.</code></pre> 
<p>问题清楚了，编译需要的nettle&gt;=3.1，而当前为2.7.1。接下来配置修改nettle版本就可以了。</p> 
<p>该文件位置在trunk/package/libs/nettle/Makefile，可以参照<a target="_blank" href="http://permalink.gmane.org/gmane.comp.embedded.openwrt.scm/10779" rel="nofollow noopener noreferrer">此链接</a>(nettle从2.7.1升级到3.1的日志文件)，修改Makefile 即可。</p> 
<p>链接内容转载如下：</p> 
<p></p> 
<pre><code class="language-plain">r45526 - trunk/package/libs/nettle

Author: cyrus
Date: 2015-04-20 22:47:42 +0200 (Mon, 20 Apr 2015)
New Revision: 45526

Removed:
   trunk/package/libs/nettle/patches/
Modified:
   trunk/package/libs/nettle/Makefile
Log:
nettle: bump to 3.1

Signed-off-by: Steven Barth &lt;steven &lt;at&gt; midlink.org&gt;

Modified: trunk/package/libs/nettle/Makefile
===================================================================
--- trunk/package/libs/nettle/Makefile	2015-04-20 15:01:21 UTC (rev 45525)
+++ trunk/package/libs/nettle/Makefile	2015-04-20 20:47:42 UTC (rev 45526)
 &lt;at&gt;  &lt;at&gt;  -8,19 +8,16  &lt;at&gt;  &lt;at&gt; 
 include $(TOPDIR)/rules.mk

 PKG_NAME:=nettle
-PKG_VERSION:=2.7.1
+PKG_VERSION:=3.1
 PKG_RELEASE:=1
 PKG_USE_MIPS16:=0

 PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.gz
 PKG_SOURCE_URL:= &lt;at&gt; GNU/nettle
-PKG_MD5SUM:=003d5147911317931dd453520eb234a5
-PKG_MAINTAINER:=Nikos Mavrogiannopoulos &lt;nmav &lt;at&gt; gnutls.org&gt;
+PKG_MD5SUM:=075a3699cbab48ffa2ea6f9aad91e123

 PKG_LICENSE:=GPL-2.0+
 PKG_LICENSE_FILES:=COPYING
-
-PKG_FIXUP:=autoreconf
 PKG_BUILD_PARALLEL:=0

 PKG_CONFIG_DEPENDS := CONFIG_LIBNETTLE_MINI</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cdf14a5726ba362ddf5aefb6bee40ab9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">netty 通过端口调用关闭</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/90e7ae35d653cdf3a3ff78ccec817e0b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LeetCode 1. Two Sum 解题报告</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>