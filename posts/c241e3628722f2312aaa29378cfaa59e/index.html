<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【记录】smartctl｜Linux如何通过smartctl查看有没有坏的磁盘？以及使用时长、电源周期、故障记录等 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【记录】smartctl｜Linux如何通过smartctl查看有没有坏的磁盘？以及使用时长、电源周期、故障记录等" />
<meta property="og:description" content="smartctl是一个用于监测和分析硬盘健康状态的工具，可以用于检测是否存在坏的磁盘。以下是使用smartctl检查磁盘健康状态的步骤：
安装smartctl软件
在Linux系统中，smartctl通常包含在smartmontools软件包中。如果您还没有安装smartmontools，可以使用以下命令安装（大部分NAS自带，如TrueNas）：
sudo apt-get install smartmontools # Debian/Ubuntu sudo yum install smartmontools # RedHat/CentOS 查找磁盘设备名称
使用以下命令查找磁盘设备名称：
sudo fdisk -l 运行smartctl检查磁盘
使用以下命令运行smartctl检查磁盘：
sudo smartctl -a /dev/sda 将/dev/sda替换为您要检查的磁盘设备名称。该命令将列出有关磁盘健康状态的详细信息，包括错误计数和预测故障时间等。请注意，您可能需要使用root权限才能运行smartctl。
检查smartctl输出
在smartctl输出中查找关于磁盘健康状态的信息。重点关注以下字段：
SMART overall-health self-assessment test result：如果该字段的值为“PASSED”，则磁盘没有发现健康问题。如果该字段的值为“FAILED”或“UNKNOWN”，则磁盘存在健康问题。
Reallocated_Sector_Ct：这是已经重新分配的扇区的数量。如果该值不为0，则磁盘存在坏扇区。正常情况的RAW_VALUE如下：ID# ATTRIBUTE_NAME FLAG VALUE WORST THRESH TYPE UPDATED WHEN_FAILED RAW_VALUE 5 Reallocated_Sector_Ct 0x0033 100 100 010 Pre-fail Always - 0 Current_Pending_Sector：这是目前正在等待重新分配的扇区数量。如果该值不为0，则磁盘存在潜在的坏扇区。 如果smartctl输出中没有发现健康问题，那么磁盘应该是正常的。否则，您可能需要更深入地分析问题或考虑更换磁盘。
以下是我个人在检测过程中遇到的一些问题。
文章目录 1 什么情况下需要使用`smartctl -t`？2 如何查看我的磁盘的类型，以及其支持的SMART属性？3 电源周期和故障计数怎么看？4 在输出信息里没有看到Error_Counters属性？5 Seek_Error_Rate非常多是正常的吗？ 1 什么情况下需要使用smartctl -t？ smartctl命令的“-t”选项用于执行一次磁盘自检测，以便发现磁盘上的任何潜在问题。使用“-t”选项后，smartctl将在后台启动自检测，并在完成后提供结果。因此，如果您想要获得磁盘的最新自检测结果，您需要使用“-t”选项运行smartctl。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c241e3628722f2312aaa29378cfaa59e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-15T14:57:04+08:00" />
<meta property="article:modified_time" content="2023-02-15T14:57:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【记录】smartctl｜Linux如何通过smartctl查看有没有坏的磁盘？以及使用时长、电源周期、故障记录等</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>  smartctl是一个用于监测和分析硬盘健康状态的工具，可以用于检测是否存在坏的磁盘。以下是使用smartctl检查磁盘健康状态的步骤：</p> 
<ol><li> <p>安装smartctl软件<br> 在Linux系统中，smartctl通常包含在smartmontools软件包中。如果您还没有安装smartmontools，可以使用以下命令安装（大部分NAS自带，如TrueNas）：</p> <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> smartmontools    <span class="token comment"># Debian/Ubuntu</span>
<span class="token function">sudo</span> yum <span class="token function">install</span> smartmontools        <span class="token comment"># RedHat/CentOS</span>
</code></pre> </li><li> <p>查找磁盘设备名称<br> 使用以下命令查找磁盘设备名称：</p> <pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">fdisk</span> <span class="token parameter variable">-l</span>
</code></pre> </li><li> <p>运行smartctl检查磁盘<br> 使用以下命令运行smartctl检查磁盘：</p> <pre><code class="prism language-bash"><span class="token function">sudo</span> smartctl <span class="token parameter variable">-a</span> /dev/sda
</code></pre> <p>将<code>/dev/sda</code>替换为您要检查的磁盘设备名称。该命令将列出有关磁盘健康状态的详细信息，包括错误计数和预测故障时间等。请注意，您可能需要使用root权限才能运行smartctl。</p> </li><li> <p>检查smartctl输出<br> 在smartctl输出中查找关于磁盘健康状态的信息。重点关注以下字段：</p> 
  <ul><li>SMART overall-health self-assessment test result：如果该字段的值为“PASSED”，则磁盘没有发现健康问题。如果该字段的值为“FAILED”或“UNKNOWN”，则磁盘存在健康问题。<br> <img src="https://images2.imgbox.com/be/05/TQihsgVJ_o.png" alt="在这里插入图片描述"></li><li>Reallocated_Sector_Ct：这是已经重新分配的扇区的数量。如果该值不为0，则磁盘存在坏扇区。正常情况的RAW_VALUE如下：<pre><code class="prism language-bash">ID<span class="token comment"># ATTRIBUTE_NAME          FLAG     VALUE WORST THRESH TYPE      UPDATED  WHEN_FAILED RAW_VALUE</span>
  <span class="token number">5</span> Reallocated_Sector_Ct   0x0033   <span class="token number">100</span>   <span class="token number">100</span>   010    Pre-fail  Always       -       <span class="token number">0</span>
</code></pre> </li><li>Current_Pending_Sector：这是目前正在等待重新分配的扇区数量。如果该值不为0，则磁盘存在潜在的坏扇区。</li></ul> </li></ol> 
<p>  如果smartctl输出中没有发现健康问题，那么磁盘应该是正常的。否则，您可能需要更深入地分析问题或考虑更换磁盘。</p> 
<p>  以下是我个人在检测过程中遇到的一些问题。</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1_smartctl_t_42" rel="nofollow">1 什么情况下需要使用`smartctl -t`？</a></li><li><a href="#2_SMART_49" rel="nofollow">2 如何查看我的磁盘的类型，以及其支持的SMART属性？</a></li><li><a href="#3__82" rel="nofollow">3 电源周期和故障计数怎么看？</a></li><li><a href="#4_Error_Counters_107" rel="nofollow">4 在输出信息里没有看到Error_Counters属性？</a></li><li><a href="#5_Seek_Error_Rate_114" rel="nofollow">5 Seek_Error_Rate非常多是正常的吗？</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1_smartctl_t_42"></a>1 什么情况下需要使用<code>smartctl -t</code>？</h2> 
<p>  smartctl命令的“-t”选项用于执行一次磁盘自检测，以便发现磁盘上的任何潜在问题。使用“-t”选项后，smartctl将在后台启动自检测，并在完成后提供结果。因此，<strong>如果您想要获得磁盘的最新自检测结果</strong>，您需要使用“-t”选项运行smartctl。</p> 
<p>  但是，如果您只是想检查磁盘的当前状态，而不需要运行一次自检测，您可以直接运行“smartctl -a”命令来获取磁盘的健康状态信息。这个命令将列出有关磁盘的当前状态和属性信息，例如温度、电源周期、故障计数等等。</p> 
<p>  综上所述，如果您想要运行自检测以获取最新的磁盘状态信息，您应该使用“smartctl -t”命令。如果您只是想获取磁盘的当前状态信息，您可以直接使用“smartctl -a”命令。</p> 
<h2><a id="2_SMART_49"></a>2 如何查看我的磁盘的类型，以及其支持的SMART属性？</h2> 
<p>  您可以使用smartctl命令来查看您的磁盘类型和支持的SMART属性。以下是如何查看它们的方法：</p> 
<ol><li> <p>运行“smartctl -i”命令，以获取磁盘的基本信息。该命令将列出磁盘的制造商、型号和序列号等信息。例如：</p> <pre><code class="prism language-bash">$ <span class="token function">sudo</span> smartctl <span class="token parameter variable">-i</span> /dev/sda
smartctl <span class="token number">7.1</span> <span class="token number">2019</span>-12-30 r5022 <span class="token punctuation">[</span>x86_64-linux-5.4.0-89-generic<span class="token punctuation">]</span> <span class="token punctuation">(</span>local build<span class="token punctuation">)</span>
Copyright <span class="token punctuation">(</span>C<span class="token punctuation">)</span> <span class="token number">2002</span>-19, Bruce Allen, Christian Franke, www.smartmontools.org

<span class="token operator">==</span><span class="token operator">=</span> START OF INFORMATION SECTION <span class="token operator">==</span><span class="token operator">=</span>
Model Family:     Samsung based SSDs
Device Model:     Samsung SSD <span class="token number">970</span> EVO Plus 500GB
Serial Number:    S5H7NX0N659415D
LU WWN Device Id: <span class="token number">5</span> 002538 8b0c6d96d
Firmware Version: 2B2QEXM7
User Capacity:    <span class="token number">500,107</span>,862,016 bytes <span class="token punctuation">[</span><span class="token number">500</span> GB<span class="token punctuation">]</span>
Sector Size:      <span class="token number">512</span> bytes logical/physical
Rotation Rate:    Solid State Device
Form Factor:      M.2
TRIM Command:     Available, deterministic, zeroed
Device is:        Not <span class="token keyword">in</span> smartctl database <span class="token punctuation">[</span>for details use: <span class="token parameter variable">-P</span> showall<span class="token punctuation">]</span>
ATA Version is:   ACS-4, ATA8-ACS T13/1699-D revision <span class="token number">4</span>
SATA Version is:  SATA <span class="token number">3.3</span>, <span class="token number">6.0</span> Gb/s <span class="token punctuation">(</span>current: <span class="token number">6.0</span> Gb/s<span class="token punctuation">)</span>
Local Time is:    Tue Feb <span class="token number">15</span> <span class="token number">19</span>:48:47 <span class="token number">2022</span> CET
SMART support is: Available - device has SMART capability.
SMART support is: Enabled
</code></pre> </li><li> <p>查找“Device Model”属性，以获取磁盘型号。例如，在上面的输出中，“Device Model”属性的值为“Samsung SSD 970 EVO Plus 500GB”。</p> </li><li> <p>运行“smartctl -A”命令，以获取磁盘支持的SMART属性列表。该命令将列出磁盘支持的SMART自检测和报告属性。例如：<br> <img src="https://images2.imgbox.com/a2/f0/Rab0Y3tR_o.png" alt="在这里插入图片描述"></p> </li></ol> 
<h2><a id="3__82"></a>3 电源周期和故障计数怎么看？</h2> 
<p>  电源周期（Power-On Hours，缩写为POH）和故障计数（Error Counters）是smartctl命令输出中的两个常见磁盘属性。以下是如何查看它们的方法：</p> 
<p>  运行“smartctl -a”命令以获取磁盘的详细信息。在命令输出的最后一部分，您可以看到所有SMART属性及其当前值。</p> 
<p>  查找“<strong>Power_On_Hours</strong>”属性。它是磁盘的电源周期属性，表示磁盘启动以来的累计使用时间，以小时为单位。</p> 
<p><img src="https://images2.imgbox.com/31/84/p2kUzXNJ_o.png" alt="在这里插入图片描述"></p> 
<p>  查找“Error_Counters”属性。这是一个包含多个子属性的属性，它们记录磁盘的错误计数。例如：</p> 
<ol><li>“Raw_Read_Error_Rate”记录从磁盘读取数据时未能纠正的错误数。</li><li>“Seek_Error_Rate”记录寻道时出现错误的数量。</li><li>“Spin_Retry_Count”记录在旋转磁盘时需要重新尝试读取数据的次数。</li><li>“Reallocated_Sector_Ct”记录已经重新分配的坏扇区数。</li><li>“Current_Pending_Sector”记录当前未能读取的坏扇区数。</li><li>“Offline_Uncorrectable”记录离线状态下发现的无法校正的坏扇区数。</li></ol> 
<p><img src="https://images2.imgbox.com/12/d4/VAv2v97W_o.png" alt="在这里插入图片描述"></p> 
<p>  这些属性中的任何一个都可能表示磁盘存在问题，需要进一步检查或更换。</p> 
<p>  请注意，<strong>不同的磁盘可能会使用不同的属性名称和计数单位</strong>。在查看SMART属性时，请务必查看smartctl命令输出的完整内容，并<strong>仔细查看所有可能表示磁盘问题的属性</strong>。</p> 
<h2><a id="4_Error_Counters_107"></a>4 在输出信息里没有看到Error_Counters属性？</h2> 
<p>  如果您在运行“smartctl -a”命令后未看到“Error_Counters”属性，则可能是因为您的磁盘不支持该属性，或者该属性未被正确报告。<strong>不同的磁盘可能支持不同的SMART属性</strong>，因此某些属性可能不适用于您的磁盘。</p> 
<p>  在这种情况下，您可以查看“smartctl -a”命令输出的其他部分，以查找其他可能指示磁盘问题的属性。例如，您可以查看与磁盘健康状况相关的属性，例如温度、噪音、振动、磁盘旋转速度等等。您还可以查看任何报告磁盘错误或警告的消息。</p> 
<p>  请注意，如果您认为磁盘存在问题，但无法通过SMART属性来确认它们，您可以使用其他工具来进行更全面的磁盘诊断和测试。例如，您可以使用磁盘制造商提供的磁盘测试工具，或者使用第三方工具来进行全面的磁盘扫描和测试。</p> 
<h2><a id="5_Seek_Error_Rate_114"></a>5 Seek_Error_Rate非常多是正常的吗？</h2> 
<p>  在 SMART 报告中看到大量的 Seek_Error_Rate 值<strong>通常是不正常的</strong>。该属性指的是磁盘寻道时发生错误的频率，是一个关键的SMART指标之一。值越高通常意味着出现问题的可能性越高，应引起注意。</p> 
<p>  <strong>但是，应该根据磁盘制造商的建议来解释磁盘SMART属性</strong>。不同的制造商可能会使用不同的算法和尺度来计算SMART属性值。此外，一些磁盘可能具有自动纠正错误的功能，这意味着即使 SMART 报告中出现了一些错误，磁盘仍然可以正常工作。</p> 
<p>  因此，建议您查看磁盘制造商的文档，以了解有关SMART属性值的详细信息，或者您可以将SMART报告提供给制造商进行分析，以获得更准确的解释。如果您对磁盘的健康状况感到担忧，最好备份重要数据，并考虑更换磁盘。</p> 
<blockquote> 
 <p>我的硬件型号是：ST16000NM000J-2TW103。希捷对Seek_Error_Rate的计算方式不同，详见b站文章：<a href="https://www.bilibili.com/read/cv15153028/" rel="nofollow">希捷机械硬盘读取错误率和寻道错误率很高？让我们看看到底是怎么计算的吧！</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/76737cefcf8b2eb29f4f4144c0f7e0a6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">DELL游匣ubuntu2004系统 RTX3060显卡，cuda11.4，cudnn8.2.4安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/379c728ad26a9f84a7938755c69b59c0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JAVA数据转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>