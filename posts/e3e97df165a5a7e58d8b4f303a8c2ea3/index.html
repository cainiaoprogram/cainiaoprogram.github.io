<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>鸿蒙HarmonyOS兼容JS的类Web开发-开发指导 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="鸿蒙HarmonyOS兼容JS的类Web开发-开发指导" />
<meta property="og:description" content="鸿蒙HarmonyOS兼容JS的类Web开发-开发指导 文章目录 鸿蒙HarmonyOS兼容JS的类Web开发-开发指导常用组件开发指导list开发指导创建list组件添加滚动条添加侧边索引栏实现列表折叠和展开场景示例 dialog开发指导创建dialog组件设置弹窗响应场景示例 form开发指导创建form组件实现表单缩放设置form样式添加响应事件场景示例 stepper开发指导创建stepper组件设置index属性设置样式添加事件场景示例 tabs开发指导创建tabs设置样式显示页签索引场景示例 swiper开发指导创建swiper组件添加属性设置样式绑定事件场景示例 Canvas开发指南Canvas对象创建Canvas组件添加样式添加事件 2D对象画线段画边框填充渐变色填充文字添加图片添加方法画线段画图形判断位置 Svg开发指导基础知识创建Svg组件设置属性 绘制图形绘制路径绘制文本文本沿路径绘制文本 动效开发指导属性样式动画transform样式动画设置静态动画设置平移动画设置旋转动画设置缩放动画设置matrix属性整合transform属性 background-position样式动画svg动画属性样式动画路径动画animateTransform动画 JS动画组件动画获取动画对象设置动画参数 插值器动画创建动画对象添加动画事件和调用接口 动画帧请求动画帧取消动画帧 常用组件开发指导 list开发指导 list是用来显示列表的组件，包含一系列相同宽度的列表项，适合连续、多行地呈现同类数据。具体用法请参考list API。
创建list组件 在pages/index目录下的hml文件中创建一个list组件。
&lt;!-- xxx.hml --&gt; &lt;div class=&#34;container&#34;&gt; &lt;list&gt; &lt;list-item class=&#34;listItem&#34;&gt;&lt;/list-item&gt; &lt;list-item class=&#34;listItem&#34;&gt;&lt;/list-item&gt; &lt;list-item class=&#34;listItem&#34;&gt;&lt;/list-item&gt; &lt;list-item class=&#34;listItem&#34;&gt;&lt;/list-item&gt; &lt;/list&gt; &lt;/div&gt; /* xxx.css */ .container { width:100%; height:100%; flex-direction: column; align-items: center; background-color: #F1F3F5; } .listItem{ height: 20%; background-color:#d2e0e0; margin-top: 20px; } 说明
是的子组件，实现列表分组功能，不能再嵌套，可以嵌套。是的子组件，展示列表的具体项。 添加滚动条 设置scrollbar属性为on即可在屏幕右侧生成滚动条，实现长列表或者屏幕滚动等效果。
&lt;!-- xxx.hml --&gt; &lt;div class=&#34;container&#34;&gt; &lt;list class=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e3e97df165a5a7e58d8b4f303a8c2ea3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-11T13:28:01+08:00" />
<meta property="article:modified_time" content="2024-01-11T13:28:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">鸿蒙HarmonyOS兼容JS的类Web开发-开发指导</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="HarmonyOSJSWeb_0"></a>鸿蒙HarmonyOS兼容JS的类Web开发-开发指导</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#HarmonyOSJSWeb_0" rel="nofollow">鸿蒙HarmonyOS兼容JS的类Web开发-开发指导</a></li><li><ul><li><a href="#_5" rel="nofollow">常用组件开发指导</a></li><li><ul><li><a href="#list_7" rel="nofollow">list开发指导</a></li><li><ul><li><a href="#list_11" rel="nofollow">创建list组件</a></li><li><a href="#_50" rel="nofollow">添加滚动条</a></li><li><a href="#_88" rel="nofollow">添加侧边索引栏</a></li><li><a href="#_121" rel="nofollow">实现列表折叠和展开</a></li><li><a href="#_202" rel="nofollow">场景示例</a></li></ul> 
    </li><li><a href="#dialog_315" rel="nofollow">dialog开发指导</a></li><li><ul><li><a href="#dialog_319" rel="nofollow">创建dialog组件</a></li><li><a href="#_380" rel="nofollow">设置弹窗响应</a></li><li><a href="#_462" rel="nofollow">场景示例</a></li></ul> 
    </li><li><a href="#form_628" rel="nofollow">form开发指导</a></li><li><ul><li><a href="#form_636" rel="nofollow">创建form组件</a></li><li><a href="#_663" rel="nofollow">实现表单缩放</a></li><li><a href="#form_676" rel="nofollow">设置form样式</a></li><li><a href="#_700" rel="nofollow">添加响应事件</a></li><li><a href="#_762" rel="nofollow">场景示例</a></li></ul> 
    </li><li><a href="#stepper_845" rel="nofollow">stepper开发指导</a></li><li><ul><li><a href="#stepper_853" rel="nofollow">创建stepper组件</a></li><li><a href="#index_890" rel="nofollow">设置index属性</a></li><li><a href="#_989" rel="nofollow">设置样式</a></li><li><a href="#_1033" rel="nofollow">添加事件</a></li><li><a href="#_1134" rel="nofollow">场景示例</a></li></ul> 
    </li><li><a href="#tabs_1249" rel="nofollow">tabs开发指导</a></li><li><ul><li><a href="#tabs_1253" rel="nofollow">创建tabs</a></li><li><a href="#_1299" rel="nofollow">设置样式</a></li><li><a href="#_1353" rel="nofollow">显示页签索引</a></li><li><a href="#_1393" rel="nofollow">场景示例</a></li></ul> 
    </li><li><a href="#swiper_1519" rel="nofollow">swiper开发指导</a></li><li><ul><li><a href="#swiper_1521" rel="nofollow">创建swiper组件</a></li><li><a href="#_1575" rel="nofollow">添加属性</a></li><li><a href="#_1634" rel="nofollow">设置样式</a></li><li><a href="#_1690" rel="nofollow">绑定事件</a></li><li><a href="#_1788" rel="nofollow">场景示例</a></li></ul> 
    </li><li><a href="#Canvas_1871" rel="nofollow">Canvas开发指南</a></li><li><ul><li><a href="#Canvas_1873" rel="nofollow">Canvas对象</a></li><li><ul><li><a href="#Canvas_1875" rel="nofollow">创建Canvas组件</a></li><li><a href="#_1908" rel="nofollow">添加样式</a></li><li><a href="#_1937" rel="nofollow">添加事件</a></li></ul> 
     </li><li><a href="#2D_2003" rel="nofollow">2D对象</a></li><li><ul><li><a href="#_2007" rel="nofollow">画线段</a></li><li><a href="#_2203" rel="nofollow">画边框</a></li><li><a href="#_2295" rel="nofollow">填充渐变色</a></li><li><a href="#_2417" rel="nofollow">填充文字</a></li><li><a href="#_2549" rel="nofollow">添加图片</a></li><li><a href="#_2724" rel="nofollow">添加方法</a></li><li><a href="#_2814" rel="nofollow">画线段</a></li><li><a href="#_2887" rel="nofollow">画图形</a></li><li><a href="#_3012" rel="nofollow">判断位置</a></li></ul> 
    </li></ul> 
    </li><li><a href="#Svg_3112" rel="nofollow">Svg开发指导</a></li><li><ul><li><a href="#_3114" rel="nofollow">基础知识</a></li><li><ul><li><a href="#Svg_3123" rel="nofollow">创建Svg组件</a></li><li><a href="#_3151" rel="nofollow">设置属性</a></li></ul> 
     </li><li><a href="#_3190" rel="nofollow">绘制图形</a></li><li><a href="#_3232" rel="nofollow">绘制路径</a></li><li><a href="#_3277" rel="nofollow">绘制文本</a></li><li><ul><li><a href="#_3281" rel="nofollow">文本</a></li><li><a href="#_3305" rel="nofollow">沿路径绘制文本</a></li></ul> 
    </li></ul> 
   </li></ul> 
   </li><li><a href="#_3329" rel="nofollow">动效开发指导</a></li><li><ul><li><ul><li><a href="#_3331" rel="nofollow">属性样式动画</a></li><li><a href="#transform_3422" rel="nofollow">transform样式动画</a></li><li><ul><li><a href="#_3426" rel="nofollow">设置静态动画</a></li><li><a href="#_3514" rel="nofollow">设置平移动画</a></li><li><a href="#_3592" rel="nofollow">设置旋转动画</a></li><li><a href="#_3728" rel="nofollow">设置缩放动画</a></li><li><a href="#matrix_3840" rel="nofollow">设置matrix属性</a></li><li><a href="#transform_3884" rel="nofollow">整合transform属性</a></li></ul> 
     </li><li><a href="#backgroundposition_3999" rel="nofollow">background-position样式动画</a></li><li><a href="#svg_4085" rel="nofollow">svg动画</a></li><li><ul><li><a href="#_4087" rel="nofollow">属性样式动画</a></li><li><a href="#_4123" rel="nofollow">路径动画</a></li><li><a href="#animateTransform_4143" rel="nofollow">animateTransform动画</a></li></ul> 
     </li><li><a href="#JS_4184" rel="nofollow">JS动画</a></li><li><ul><li><a href="#_4186" rel="nofollow">组件动画</a></li><li><ul><li><a href="#_4188" rel="nofollow">获取动画对象</a></li><li><a href="#_4250" rel="nofollow">设置动画参数</a></li></ul> 
      </li><li><a href="#_4404" rel="nofollow">插值器动画</a></li><li><ul><li><a href="#_4406" rel="nofollow">创建动画对象</a></li><li><a href="#_4483" rel="nofollow">添加动画事件和调用接口</a></li></ul> 
      </li><li><a href="#_4635" rel="nofollow">动画帧</a></li><li><ul><li><a href="#_4637" rel="nofollow">请求动画帧</a></li><li><a href="#_4736" rel="nofollow">取消动画帧</a></li></ul> 
     </li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_5"></a>常用组件开发指导</h3> 
<h4><a id="list_7"></a>list开发指导</h4> 
<p>list是用来显示列表的组件，包含一系列相同宽度的列表项，适合连续、多行地呈现同类数据。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-container-list-0000001427584924-V2" rel="nofollow">list API</a>。</p> 
<h5><a id="list_11"></a>创建list组件</h5> 
<p>在pages/index目录下的hml文件中创建一个list组件。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt; 
 &lt;list&gt;    
   &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
   &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
   &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
   &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
 &lt;/list&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  flex-direction: column;
  align-items: center;
  background-color: #F1F3F5;
}
.listItem{
  height: 20%;
  background-color:#d2e0e0;
  margin-top: 20px;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/65/e2/IlqjdAdf_o.png" alt="img"></p> 
<p>说明</p> 
<ul><li>是的子组件，实现列表分组功能，不能再嵌套，可以嵌套。</li><li>是的子组件，展示列表的具体项。</li></ul> 
<h5><a id="_50"></a>添加滚动条</h5> 
<p>设置scrollbar属性为on即可在屏幕右侧生成滚动条，实现长列表或者屏幕滚动等效果。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;list class="listCss" scrollbar="on" &gt;
    &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
    &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
    &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
    &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
    &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
    &lt;list-item class="listItem"&gt;&lt;/list-item&gt;
 &lt;/list&gt;
&lt;/div&gt; 
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  background-color: #F1F3F5;
}
.listItem{
  height: 20%;
  background-color:#d2e0e0;
  margin-top: 20px;
}
.listCss{
  height: 100%;
  scrollbar-color: #8e8b8b;
  scrollbar-width: 50px;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/38/3b/cSlL5BVA_o.gif" alt="img"></p> 
<h5><a id="_88"></a>添加侧边索引栏</h5> 
<p>设置indexer属性为自定义索引时，索引栏会显示在列表右边界处，indexer属性设置为true,默认为字母索引表。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;   
  &lt;list class="listCss"  indexer="{<!-- -->{['#','1','2','3','4','5','6','7','8']}}" &gt;  
    &lt;list-item class="listItem"  section="#" &gt;&lt;/list-item&gt;   
  &lt;/list&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  flex-direction: column;
  background-color: #F1F3F5;
 } 
.listCss{
  height: 100%;    
  flex-direction: column;
  columns: 1
}
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/48/33aOzuCf_o.png" alt="img"></p> 
<p>说明</p> 
<ul><li>indexer属性生效需要flex-direction属性配合设置为column，且columns属性设置为1。</li><li>indexer可以自定义索引表，自定义时"#"必须要存在。</li></ul> 
<h5><a id="_121"></a>实现列表折叠和展开</h5> 
<p>为list组件添加groupcollapse和groupexpand事件实现列表的折叠和展开。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="doc-page"&gt;
  &lt;list style="width: 100%;" id="mylist"&gt;
    &lt;list-item-group for="listgroup in list" id="{<!-- -->{listgroup.value}}" ongroupcollapse="collapse" ongroupexpand="expand"&gt;
      &lt;list-item type="item" style="background-color:#FFF0F5;height:95px;"&gt;
        &lt;div class="item-group-child"&gt;
          &lt;text&gt;One---{<!-- -->{listgroup.value}}&lt;/text&gt;
        &lt;/div&gt;
      &lt;/list-item&gt;
      &lt;list-item type="item" style="background-color: #87CEFA;height:145px;" primary="true"&gt;
        &lt;div class="item-group-child"&gt;
          &lt;text&gt;Primary---{<!-- -->{listgroup.value}}&lt;/text&gt;
        &lt;/div&gt;
      &lt;/list-item&gt;
    &lt;/list-item-group&gt;
  &lt;/list&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.doc-page {
  flex-direction: column;
  background-color: #F1F3F5;
}
list-item{
margin-top:30px;
}
.top-list-item {
  width:100%;
  background-color:#D4F2E7;
}
.item-group-child {
  justify-content: center;
  align-items: center;
  width:100%;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  data: {
    direction: 'column',
    list: []
  },
  onInit() {
    this.list = []
    this.listAdd = []
    for (var i = 1; i &lt;= 2; i++) {
      var dataItem = {
        value: 'GROUP' + i,
      };
        this.list.push(dataItem);
    }
  },
  collapse(e) {
    promptAction.showToast({
      message: 'Close ' + e.groupid
    })
  },
  expand(e) {
    promptAction.showToast({
    message: 'Open ' + e.groupid
    })
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/cc/1f/9ty0NcUp_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>groupcollapse和groupexpand事件仅支持list-item-group组件使用。</li></ul> 
<h5><a id="_202"></a>场景示例</h5> 
<p>在本场景中，开发者可以根据字母索引表查找对应联系人。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="doc-page"&gt; 
  &lt;text style="font-size: 35px; font-weight: 500; text-align: center; margin-top: 20px; margin-bottom: 20px;"&gt; 
      &lt;span&gt;Contacts&lt;/span&gt; 
  &lt;/text&gt; 
  &lt;list class="list" indexer="true"&gt; 
    &lt;list-item class="item" for="{<!-- -->{namelist}}" type="{<!-- -->{$item.section}}" section="{<!-- -->{$item.section}}"&gt; 
      &lt;div class="container"&gt; 
        &lt;div class="in-container"&gt; 
          &lt;text class="name"&gt;{<!-- -->{$item.name}}&lt;/text&gt; 
          &lt;text class="number"&gt;18888888888&lt;/text&gt; 
        &lt;/div&gt; 
      &lt;/div&gt; 
    &lt;/list-item&gt; 
    &lt;list-item type="end" class="item"&gt; 
      &lt;div style="align-items:center;justify-content:center;width:750px;"&gt; 
        &lt;text style="text-align: center;"&gt;Total: 10&lt;/text&gt; 
      &lt;/div&gt; 
    &lt;/list-item&gt; 
  &lt;/list&gt; 
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.doc-page {
  width: 100%;
  height: 100%;
  flex-direction: column;
  background-color: #F1F3F5;
}
.list {
  width: 100%;
  height: 90%;
  flex-grow: 1;
}
.item {
  height: 120px;
  padding-left: 10%;
  border-top: 1px solid #dcdcdc;
}
.name {
  color: #000000;
  font-size: 39px;
}
.number {
  color: black;
  font-size: 25px;
}
.container {
  flex-direction: row;
  align-items: center;
}
.in-container {
  flex-direction: column;
  justify-content: space-around;
}
</code></pre> 
<pre><code>// xxx.js
export default { 
   data: { 
     namelist:[{ 
       name: 'Zoey', 
       section:'Z' 
     },{ 
       name: 'Quin', 
       section:'Q' 
     },{ 
       name:'Sam', 
       section:'S' 
     },{ 
       name:'Leo', 
       section:'L' 
     },{ 
       name:'Zach', 
       section:'Z' 
     },{ 
       name:'Wade', 
       section:'W' 
     },{ 
       name:'Zoe', 
       section:'Z' 
     },{ 
        name:'Warren', 
        section:'W' 
     },{ 
        name:'Kyle', 
        section:'K' 
     },{ 
       name:'Zaneta', 
       section:'Z' 
     }] 
   }, 
   onInit() { 
   } 
 }
</code></pre> 
<p><img src="https://images2.imgbox.com/c9/1d/YLkFVYjQ_o.gif" alt="img"></p> 
<h4><a id="dialog_315"></a>dialog开发指导</h4> 
<p>dialog组件用于创建自定义弹窗，通常用来展示用户当前需要或用户必须关注的信息或操作。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-container-dialog-0000001477981249-V2" rel="nofollow">dialog API</a>。</p> 
<h5><a id="dialog_319"></a>创建dialog组件</h5> 
<p>在pages/index目录下的hml文件中创建一个dialog组件，并添加Button组件来触发dialog。dialog组件仅支持width、height、margin、margin-[left|top|right|bottom]、margin-[start|end]样式。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="doc-page"&gt;
  &lt;dialog class="dialogClass" id="dialogId" dragable="true"&gt;
    &lt;div class="content"&gt;
      &lt;text&gt;this is a dialog&lt;/text&gt;
    &lt;/div&gt;
  &lt;/dialog&gt;
  &lt;button value="click me" onclick="opendialog"&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.doc-page {
  width:100%;
  height:100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #F1F3F5;
}
.dialogClass{
  width: 80%;
  height: 250px;
  margin-start: 1%;
}
.content{
  width: 100%;
  height: 250px;
  justify-content: center;
  background-color: #e8ebec;
  border-radius: 20px;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
}
button{
  width: 70%;
  height: 60px;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  //Touch to open the dialog box.
  opendialog(){
    this.$element('dialogId').show()
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/64/6d/We3nV9Sc_o.gif" alt="img"></p> 
<h5><a id="_380"></a>设置弹窗响应</h5> 
<p>开发者点击页面上非dialog的区域时，将触发cancel事件而关闭弹窗。同时也可以通过对dialog添加show和close方法来显示和关闭弹窗。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="doc-page"&gt;
  &lt;dialog class="dialogClass" id="dialogId" oncancel="canceldialog"&gt;
    &lt;div class="dialogDiv"&gt;
      &lt;text&gt;dialog&lt;/text&gt;
      &lt;button value="confirm" onclick="confirmClick"&gt;&lt;/button&gt;
    &lt;/div&gt;
  &lt;/dialog&gt;
  &lt;button value="click me" onclick="opendialog"&gt;&lt;/button&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.doc-page {
  width:100%;
  height:100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #F1F3F5;
}
.dialogClass{
  width: 80%;
  height: 300px;
  margin-start: 1%;
}
.dialogDiv{
  width: 100%;
  flex-direction: column;
  justify-content: center;
  align-self: center;
}
text{
  height: 100px;
  align-self: center;
}
button{
  align-self: center;
  margin-top: 20px;
  width: 60%;
  height: 80px;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  canceldialog(e){
    promptAction.showToast({
      message: 'dialogCancel'
    })
  },
  opendialog(){
    this.$element('dialogId').show()
     promptAction.showToast({
      message: 'dialogShow'
    })
  },
  confirmClick(e) {
    this.$element('dialogId').close()
    promptAction.showToast({
      message: 'dialogClose'
    })
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/3b/8e/2jZJ9Sdu_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>仅支持单个子组件。</li><li>dialog属性、样式均不支持动态更新。</li><li>dialog组件不支持focusable、click-effect属性。</li></ul> 
<h5><a id="_462"></a>场景示例</h5> 
<p>在本场景中，开发者可以通过dialog组件实现一个日程表。弹窗在打开状态下，利用<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-basic-textarea-0000001477981269-V2" rel="nofollow">Textarea组件</a>输入当前日程，点击确认按钮后获取当前时间并保存输入文本。最后以列表形式将各日程进行展示。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="doc-page"&gt;
  &lt;text style="margin-top: 60px;margin-left: 30px;"&gt;
    &lt;span&gt;{<!-- -->{date}} events&lt;/span&gt;
  &lt;/text&gt;
  &lt;div class="btndiv"&gt;
    &lt;button type="circle" class="btn" onclick="addschedule"&gt;+&lt;/button&gt;
  &lt;/div&gt;
&lt;!--  for Render events data  --&gt;
  &lt;list style="width: 100%;"&gt;
    &lt;list-item type="item" for="schedulelist" style="width:100%;height: 200px;"&gt;
      &lt;div class="schedulediv"&gt;
        &lt;text class="text1"&gt;{<!-- -->{date}}  event&lt;/text&gt;
        &lt;text class="text2"&gt;{<!-- -->{$item.schedule}}&lt;/text&gt;
      &lt;/div&gt;
    &lt;/list-item&gt;
  &lt;/list&gt;
  &lt;dialog id="datedialog" oncancel="canceldialog" &gt;
    &lt;div class="dialogdiv"&gt;
      &lt;div class="innertxt"&gt;
        &lt;text class="text3"&gt;{<!-- -->{date}}&lt;/text&gt;
        &lt;text class="text4"&gt;New event&lt;/text&gt;
      &lt;/div&gt;
      &lt;textarea placeholder="Event information" onchange="getschedule" class="area" extend="true"&gt;&lt;/textarea&gt;
      &lt;div class="innerbtn"&gt;
        &lt;button type="text" value="Cancel" onclick="cancelschedule" class="btntxt"&gt;&lt;/button&gt;
        &lt;button type="text" value="OK" onclick="setschedule" class="btntxt"&gt;&lt;/button&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/dialog&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.doc-page {
  flex-direction: column;
  background-color: #F1F3F5;
}
.btndiv {
  width: 100%;
  height: 200px;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.btn {
  radius:60px;
  font-size: 100px;
  background-color: #1E90FF;
}
.schedulediv {
  width: 100%;
  height: 200px;
  flex-direction: column;
  justify-content: space-around;
  padding-left: 55px;
}
.text1 {
  color: #000000;
  font-weight: bold;
  font-size: 39px;
}
.text2 {
  color: #a9a9a9;
  font-size: 30px;
}
.dialogdiv {
  flex-direction: column;
  align-items: center;
}
.innertxt {
  width: 320px;
  height: 160px;
  flex-direction: column;
  align-items: center;
  justify-content: space-around;
}
.text3 {
  font-family: serif;
  color: #1E90FF;
  font-size: 38px;
}
.text4 {
  color: #a9a9a9;
  font-size: 33px;
}
.area {
  width: 320px;
  border-bottom: 1px solid #1E90FF;
}
.innerbtn {
  width: 320px;
  height: 120px;
  justify-content: space-around;
}
.btntxt {
  text-color: #1E90FF;
}
</code></pre> 
<pre><code>// xxx.js
var info = null;
import promptAction from '@ohos.promptAction';

export default {
  data: {
    curYear:'',
    curMonth:'',
    curDay:'',
    date:'',
    schedule:'',
    schedulelist:[]
  },
  onInit() {
    // Obtain the current date. 
    var date = new Date();
    this.curYear = date.getFullYear();
    this.curMonth = date.getMonth() + 1;
    this.curDay = date.getDate();
    this.date = this.curYear + '-' + this.curMonth + '-' + this.curDay;
    this.schedulelist = []
  },
  addschedule(e) {
    this.$element('datedialog').show()
  },
  canceldialog(e) {
    promptAction.showToast({
      message: 'Event setting canceled.'
    })
  },
  getschedule(e) {
    info = e.value
  },
  cancelschedule(e) {
    this.$element('datedialog').close()
    promptAction.showToast({
      message: 'Event setting canceled.'
    })
  },
//    Touch OK to save the data.
  setschedule(e) {
    if (e.text === '') {
      this.schedule = info
    } else {
      this.schedule = info
      var addItem =  {schedule: this.schedule,}
      this.schedulelist.push(addItem)
    }
    this.$element('datedialog').close()
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/53/16/sh09t6kh_o.gif" alt="img"></p> 
<h4><a id="form_628"></a>form开发指导</h4> 
<p>form是一个表单容器，支持容器内<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-basic-input-0000001478341213-V2" rel="nofollow">Input</a>组件内容的提交和重置。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-container-form-0000001428061792-V2" rel="nofollow">form API</a>。</p> 
<p>说明</p> 
<p>从 API Version 6 开始支持。</p> 
<h5><a id="form_636"></a>创建form组件</h5> 
<p>在pages/index目录下的hml文件中创建一个form组件。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;form style="width: 100%; height: 20%"&gt;  
    &lt;input type="text" style="width:80%"&gt;&lt;/input&gt;
  &lt;/form&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/10/49/xAhbU0kc_o.png" alt="img"></p> 
<h5><a id="_663"></a>实现表单缩放</h5> 
<p>为form组件添加click-effect属性，实现点击表单后的缩放效果，click-effect枚举值请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-common-attributes-0000001427744868-V2" rel="nofollow">通用属性</a>。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;form  id="formId" class="formClass" click-effect="spring-large"&gt;
    &lt;input type="text"&gt;&lt;/input&gt;  
  &lt;/form&gt;
&lt;/div&gt;
</code></pre> 
<h5><a id="form_676"></a>设置form样式</h5> 
<p>通过为form添加background-color和border属性，来设置表单的背景颜色和边框。</p> 
<pre><code>/* xxx.css */
.container {
  width: 100%;
  height: 100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #F1F3F5;
}
.formClass{
  width: 80%;
  height: 100px;
  padding: 10px;
  border: 1px solid #cccccc;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/6a/dWH7SJEo_o.gif" alt="img"></p> 
<h5><a id="_700"></a>添加响应事件</h5> 
<p>为form组件添加submit和reset事件，来提交表单内容或重置表单选项。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;form onsubmit='onSubmit' onreset='onReset' class="form"&gt;
    &lt;div style="width: 100%;justify-content: center;"&gt;
      &lt;label&gt;Option 1&lt;/label&gt;
      &lt;input type='radio' name='radioGroup' value='radio1'&gt;&lt;/input&gt;
      &lt;label&gt;Option 2&lt;/label&gt;
      &lt;input type='radio' name='radioGroup' value='radio2'&gt;&lt;/input&gt;
    &lt;/div&gt;
    &lt;div style="width: 100%;justify-content: center; margin-top: 20px"&gt;
      &lt;input type="submit" value="Submit" style="width:120px; margin-right:20px;" &gt;   
      &lt;/input&gt;
      &lt;input type="reset" value="Reset" style="width:120px;"&gt;&lt;/input&gt;
    &lt;/div&gt;
  &lt;/form&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* index.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-items: center;
  align-items: center;
  background-color: #F1F3F5;
}
.form{
  width: 100%;
  height: 30%;
  margin-top: 40%;
  flex-direction: column;
  justify-items: center;
  align-items: center;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default{
  onSubmit(result) {
    promptAction.showToast({
      message: result.value.radioGroup
    })
  },
  onReset() {
    promptAction.showToast({
      message: 'Reset All'
    })
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/99/HfdWopey_o.gif" alt="img"></p> 
<h5><a id="_762"></a>场景示例</h5> 
<p>在本场景中，开发者可以选择相应选项并提交或重置数据。</p> 
<p>创建<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-basic-input-0000001478341213-V2" rel="nofollow">Input</a>组件，分别设置type属性为checkbox（多选框）和radio（单选框），再使用form组件的onsubmit和onreset事件实现表单数据的提交与重置。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
   &lt;form onsubmit="formSubmit" onreset="formReset"&gt;
 &lt;text style="font-size: 30px; margin-bottom: 20px; margin-top: 100px;"&gt;
      &lt;span &gt; Form &lt;/span&gt;
  &lt;/text&gt;
    &lt;div style="flex-direction: column;width: 90%;padding: 30px 0px;"&gt;
     &lt;text class="txt"&gt;Select 1 or more options&lt;/text&gt;
      &lt;div style="width: 90%;height: 150px;align-items: center;justify-content: space-around;"&gt;
        &lt;label target="checkbox1"&gt;Option 1&lt;/label&gt;
        &lt;input id="checkbox1" type="checkbox" name="checkbox1"&gt;&lt;/input&gt;
        &lt;label target="checkbox2"&gt;Option 2&lt;/label&gt;
        &lt;input id="checkbox2" type="checkbox" name="checkbox2"&gt;&lt;/input&gt;
       &lt;/div&gt;
       &lt;divider style="margin: 20px 0px;color: pink;height: 5px;"&gt;&lt;/divider&gt;
       &lt;text class="txt"&gt;Select 1 option&lt;/text&gt;
       &lt;div style="width: 90%;height: 150px;align-items: center;justify-content: space-around;"&gt;
         &lt;label target="radio1"&gt;Option 1&lt;/label&gt;
         &lt;input id="radio1" type="radio" name="myradio"&gt;&lt;/input&gt;
         &lt;label target="radio2"&gt;Option 2&lt;/label&gt;
         &lt;input id="radio2" type="radio" name="myradio"&gt;&lt;/input&gt;
       &lt;/div&gt;
       &lt;divider style="margin: 20px 0px;color: pink;height: 5px;"&gt;&lt;/divider&gt;
       &lt;text class="txt"&gt;Text box&lt;/text&gt;
       &lt;input type="text" placeholder="Enter content." style="margin-top: 50px;"&gt;&lt;/input&gt;
       &lt;div style="width: 90%;align-items: center;justify-content: space-between;margin: 40px;"&gt;
         &lt;input type="submit"&gt;Submit&lt;/input&gt;
         &lt;input type="reset"&gt;Reset&lt;/input&gt;
       &lt;/div&gt;
    &lt;/div&gt;
  &lt;/form&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* index.css */
.container {
  width: 100%;
  height: 100%;
  flex-direction:column;
  align-items:center;
  background-color:#F1F3F5;
}
.txt {
  font-size:33px;
  font-weight:bold;
  color:darkgray;
}
label{
  font-size: 20px;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  formSubmit() {
    promptAction.showToast({
      message: 'Submitted.'
    })
  },
  formReset() {
    promptAction.showToast({
      message: 'Reset.'
    })
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/1e/a7/0F1l9P6Z_o.gif" alt="img"></p> 
<h4><a id="stepper_845"></a>stepper开发指导</h4> 
<p>当一个任务需要多个步骤时，可以使用stepper组件展示当前进展。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-container-stepper-0000001428061796-V2" rel="nofollow">stepper API</a>。</p> 
<p>说明</p> 
<p>从API Version 5 开始支持。</p> 
<h5><a id="stepper_853"></a>创建stepper组件</h5> 
<p>在pages/index目录下的hml文件中创建一个stepper组件。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt; 
 &lt;stepper&gt;    
   &lt;stepper-item&gt;     
     &lt;text&gt;Step 1&lt;/text&gt;
   &lt;/stepper-item&gt; 
   &lt;stepper-item&gt;     
     &lt;text&gt;Step 2&lt;/text&gt;
   &lt;/stepper-item&gt; 
 &lt;/stepper&gt; 
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/f9/3c/DyNtsw9T_o.gif" alt="img"></p> 
<h5><a id="index_890"></a>设置index属性</h5> 
<p>页面默认显示索引值为index的步骤。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt; 
 &lt;stepper index="2"&gt;    
   &lt;stepper-item&gt;     
     &lt;text&gt;stepper-item1&lt;/text&gt;
   &lt;/stepper-item&gt; 
   &lt;stepper-item&gt;     
     &lt;text&gt;stepper-item2&lt;/text&gt;
   &lt;/stepper-item&gt; 
   &lt;stepper-item&gt;     
     &lt;text&gt;stepper-item3&lt;/text&gt;
   &lt;/stepper-item&gt; 
  &lt;/stepper&gt; 
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  flex-direction: column;
  background-color: #F1F3F5;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/72/7d/dQo1ZZ9H_o.gif" alt="img"></p> 
<p>通过设置label属性，自定义stepper-item的提示按钮。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt; 
 &lt;stepper index="1"&gt;    
   &lt;stepper-item label="{<!-- -->{label_1}}"&gt;     
     &lt;text&gt;stepper-item1&lt;/text&gt;
   &lt;/stepper-item&gt; 
   &lt;stepper-item label="{<!-- -->{label_2}}"&gt;     
     &lt;text&gt;stepper-item2&lt;/text&gt;
   &lt;/stepper-item&gt; 
   &lt;stepper-item label="{<!-- -->{label_3}}"&gt;     
     &lt;text&gt;stepper-item3&lt;/text&gt;
   &lt;/stepper-item&gt;
   &lt;stepper-item&gt;     
     &lt;text&gt;stepper-item4&lt;/text&gt;
   &lt;/stepper-item&gt; 
 &lt;/stepper&gt; 
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {  
  width:100%;
  height:100%;
  flex-direction: column;
  background-color: #F1F3F5;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
}
</code></pre> 
<pre><code>// xxx.js
export default { 
  data: {
    label_1:{
      nextLabel: 'NEXT',      
      status: 'normal'    
    },
    label_2:{
      prevLabel: 'BACK',
      nextLabel: 'NEXT',
      status: 'normal'
    },
    label_3:{
      prevLabel: 'BACK',
      nextLabel: 'END',
      status: 'disabled'
    },
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/f3/42/DkxZNnHc_o.gif" alt="img"></p> 
<h5><a id="_989"></a>设置样式</h5> 
<p>stepper组件默认填充父容器，通过border和background-color设置边框、背景色。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container" &gt; 
  &lt;div class="stepperContent"&gt;
    &lt;stepper class="stepperClass"&gt;    
      &lt;stepper-item&gt;     
        &lt;text&gt;stepper-item1&lt;/text&gt;
      &lt;/stepper-item&gt; 
    &lt;/stepper&gt; 
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color:#F1F3F5;
}
.stepperContent{
  width: 300px;
  height: 300px;
}
.stepperClass{
  border:1px solid silver ;
  background-color: white;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/1f/53/97MyRKkV_o.png" alt="img"></p> 
<h5><a id="_1033"></a>添加事件</h5> 
<p>stepper分别添加finish，change，next，back，skip事件。</p> 
<ul><li>当change与next或back同时存在时，会先执行next或back事件再去执行change事件。</li><li>重新设置index属性值时要先清除index的值再重新设置，否则检测不到值的改变。</li></ul> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"  style="background-color:#F1F3F5;"&gt;
  &lt;div &gt;
    &lt;stepper onfinish="stepperFinish" onchange="stepperChange" onnext="stepperNext" onback="stepperBack" onskip="stepperSkip" id="stepperId" index="{<!-- -->{index}}"&gt;
      &lt;stepper-item&gt;
        &lt;text&gt;stepper-item1&lt;/text&gt;
        &lt;button value="skip" onclick="skipClick"&gt;&lt;/button&gt;
      &lt;/stepper-item&gt;
      &lt;stepper-item&gt;
         &lt;text&gt;stepper-item2&lt;/text&gt;
         &lt;button value="skip" onclick="skipClick"&gt;&lt;/button&gt;
      &lt;/stepper-item&gt;
      &lt;stepper-item&gt;
        &lt;text&gt;stepper-item3&lt;/text&gt;
      &lt;/stepper-item&gt;
    &lt;/stepper&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.doc-page {
  width:100%;
  height:100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
stepper-item{
  width: 100%;
  flex-direction: column;
  align-self: center;
  justify-content: center;
}
text{
  margin-top: 45%;
  justify-content: center;
  align-self: center;
  margin-bottom: 50px;
}
button{
  width: 80%;
  height: 60px;
  margin-top: 20px;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  data: {
    index:0,
  },
   stepperSkip(){
    this.index = null;
    this.index=2;
  },
   skipClick(){
    this.$element('stepperId').setNextButtonStatus({status: 'skip', label: 'SKIP'});
  },
  stepperFinish(){
    promptAction.showToast({
      message: 'All Finished'
    })
  },
  stepperChange(e){
    console.log("stepperChange"+e.index)
    promptAction.showToast({
      // index表示当前步骤的序号
      message: 'Previous step: '+e.prevIndex+"-------Current step:"+e.index
    })
  },
  stepperNext(e){
    console.log("stepperNext"+e.index)
    promptAction.showToast({
      // pendingIndex表示将要跳转的序号
      message: 'Current step:'+e.index+"-------Next step:"+e.pendingIndex
    })
    var index = {pendingIndex:e.pendingIndex }
    return index;
  },
  stepperBack(e){
    console.log("stepperBack"+e.index)
    var index = {pendingIndex: e.pendingIndex }
    return index;
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/0a/7c/88REyJEk_o.gif" alt="img"></p> 
<h5><a id="_1134"></a>场景示例</h5> 
<p>在本场景中，开发者可以在界面上点击选择并实时显示选择结果，点击下一步按钮后可动态修改页面的字体颜色和字体大小。</p> 
<p>用stepper组件实现分步，再创建<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-basic-toggle-0000001427584944-V2" rel="nofollow">Toggle</a>组件实现选择显示功能，再使用<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-basic-select-0000001427584940-V2" rel="nofollow">Select</a>组件实现改变选中值动态修改字体颜色或大小。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;stepper id="mystep" index="0" onfinish="back" style="text-color: indigo;"&gt;
    &lt;stepper-item label="{<!-- -->{label1}}"&gt;
      &lt;div style="flex-direction: column;padding: 0px 10px;"&gt;
        &lt;text class="text" style="margin-top: 10%;text-align: center;width: 100%;"&gt;Select error types:&lt;/text&gt;
        &lt;text style="margin-top: 20px;padding: 10px"&gt;
          &lt;span&gt;{<!-- -->{error}}&lt;/span&gt;
        &lt;/text&gt;
        &lt;div style="justify-content: space-around;flex-wrap: wrap;"&gt;
          &lt;toggle for="{<!-- -->{togglelist1}}" value="{<!-- -->{$item}}" class="tog" onchange="multiTog({<!-- -->{$item}})"&gt;&lt;/toggle&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/stepper-item&gt;
    &lt;stepper-item label="{<!-- -->{label2}}"&gt;
      &lt;div style="flex-direction: column;align-items: center;"&gt;
        &lt;text class="txt" style="margin-top: 10%;"&gt;Toggle&lt;/text&gt;
        &lt;div style="justify-content: space-around;flex-wrap: wrap;;margin-top:10%"&gt;
          &lt;toggle class="tog" for="{<!-- -->{togglelist1}}" value="{<!-- -->{$item}}" style="text-color: {<!-- -->{tcolor}};font-size: {<!-- -->{tsize}}; font-style: {<!-- -->{tstyle}};font-weight: {<!-- -->{tweight}};font-family: {<!-- -->{tfamily}};"&gt;
          &lt;/toggle&gt;
        &lt;/div&gt;
        &lt;div style="flex-wrap: wrap;width: 700px;margin-top:10%"&gt;
          &lt;div style="flex-direction: column;width: 350px;height: 185px;align-items: center;"&gt;
            &lt;text class="txt"&gt;text-color&lt;/text&gt;
            &lt;select onchange="settcolor"&gt;
              &lt;option for="{<!-- -->{color_list}}" value="{<!-- -->{$item}}"&gt;{<!-- -->{$item}}&lt;/option&gt;
            &lt;/select&gt;
          &lt;/div&gt;
          &lt;div style="flex-direction: column;width: 350px;height: 185px;align-items: center;"&gt;
            &lt;text class="txt"&gt;font-size&lt;/text&gt;
            &lt;select onchange="settsize"&gt;
              &lt;option for="{<!-- -->{size_list}}" value="{<!-- -->{$item}}"&gt;{<!-- -->{$item}}&lt;/option&gt;
            &lt;/select&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/stepper-item&gt;
  &lt;/stepper&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color:#F1F3F5;
}
.dvd {
  stroke-width: 8px;
  color: orangered;
  margin: 65px;
}
.tog{
  margin-right: 20px;
  margin-top: 30px;
}
</code></pre> 
<pre><code>// xxx.js
let myset = new Set();
export default {
  data: {
    error: '',
    tcolor:'#FF4500',
    color_list:['#FF4500','#5F9EA0','#0000FF'],
    tsize: '12px',
    size_list: ['12px', '30px', '8px', '50px'],
    label1: {
      prevLabel: 'The text on the left of the starting step is invalid.',
      nextLabel: 'Toggle'
    },
    label2: {
      prevLabel: 'toggle',
      nextLabel: 'END'
    },
    togglelist1:['Program error', 'Software', 'System', 'Application'],
  },
  multiTog(arg, e) {
    this.error = ' '
    if (e.checked) {
      myset.add(arg)
    } else {
      myset.delete(arg)
    }
    for (let item of myset) {
      this.error += item + ' '
    }
  },
  settcolor(e) {
    this.tcolor = e.newValue
  },
  settsize(e) {
    this.tsize = e.newValue
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/e8/75/A9gWS4uM_o.gif" alt="img"></p> 
<h4><a id="tabs_1249"></a>tabs开发指导</h4> 
<p>tabs是一种常见的界面导航结构。通过页签容器，用户可以快捷地访问应用的不同模块。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-container-tabs-0000001478181469-V2" rel="nofollow">tabs API</a>。</p> 
<h5><a id="tabs_1253"></a>创建tabs</h5> 
<p>在pages/index目录下的hml文件中创建一个tabs组件。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
    &lt;tabs&gt;
        &lt;tab-bar&gt;
            &lt;text&gt;item1&lt;/text&gt;
            &lt;text&gt;item2&lt;/text&gt;
        &lt;/tab-bar&gt;
        &lt;tab-content class="tabContent"&gt;
            &lt;div class="text"&gt;
                &lt;text&gt;content1&lt;/text&gt;
            &lt;/div&gt;
            &lt;div class="text"&gt;
                &lt;text&gt;content2&lt;/text&gt;
            &lt;/div&gt;
        &lt;/tab-content&gt;
    &lt;/tabs&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
.tabContent{
  width: 100%;
  height: 100%;
}
.text{
  width: 100%;
  height: 100%;
  justify-content: center;
  align-items: center;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/be/30/6PJvhzXC_o.gif" alt="img"></p> 
<h5><a id="_1299"></a>设置样式</h5> 
<p>设置tabs背景色及边框和tab-content布局。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;tabs class="tabs"&gt;
    &lt;tab-bar class="tabBar"&gt;
      &lt;text class="tabBarItem"&gt;item1&lt;/text&gt;
      &lt;text class="tabBarItem"&gt;item2&lt;/text&gt;
    &lt;/tab-bar&gt;
    &lt;tab-content class="tabContent"&gt;
      &lt;div class="tabContent"&gt;
        &lt;text&gt;content1&lt;/text&gt;
      &lt;/div&gt;
      &lt;div class="tabContent" &gt;
        &lt;text&gt;content2&lt;/text&gt;
      &lt;/div&gt;
    &lt;/tab-content&gt;
  &lt;/tabs&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
 background-color:#F1F3F5;
}
.tabs{
  margin-top: 20px;
 border: 1px solid #2262ef;
  width: 99%;
  padding: 10px;
}
.tabBar{
  width: 100%;
  border: 1px solid #78abec;
}
.tabContent{
  width: 100%;
  margin-top: 10px;
  height: 300px;
  color: blue;   
  justify-content: center;  
  align-items: center;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/92/d2/0IOKFIva_o.gif" alt="img"></p> 
<h5><a id="_1353"></a>显示页签索引</h5> 
<p>开发者可以为tabs添加change事件，实现页签切换后显示当前页签索引的功能。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container" style="background-color:#F1F3F5;"&gt;
  &lt;tabs class="tabs" onchange="tabChange"&gt;
    &lt;tab-bar class="tabBar"&gt;
      &lt;text class="tabBarItem"&gt;item1&lt;/text&gt;
      &lt;text class="tabBarItem"&gt;item2&lt;/text&gt;
    &lt;/tab-bar&gt;
    &lt;tab-content class="tabContent"&gt;
      &lt;div&gt;
        &lt;image src="common/images/bg-tv.jpg" style="object-fit: contain;"&gt; &lt;/image&gt;
      &lt;/div&gt;
      &lt;div&gt;
        &lt;image src="common/images/img1.jpg" style="object-fit: contain;"&gt; &lt;/image&gt;
      &lt;/div&gt;
    &lt;/tab-content&gt;
  &lt;/tabs&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  tabChange(e){
    promptAction.showToast({
      message: "Tab index: " + e.index
    })
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/ea/16/Np2HMlFE_o.gif" alt="img"></p> 
<h5><a id="_1393"></a>场景示例</h5> 
<p>在本场景中，开发者可以点击标签切换内容，选中后标签文字颜色变红，并显示下划线。</p> 
<p>用tabs、tab-bar和tab-content实现点击切换功能，再定义数组，设置属性。使用change事件改变数组内的属性值实现变色及下划线的显示。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;tabs onchange="changeTabactive"&gt;
    &lt;tab-content&gt;
      &lt;div class="item-container" for="datas.list"&gt;
        &lt;div if="{<!-- -->{$item.title=='List1'?true:false}}"&gt;
          &lt;image src="common/images/bg-tv.jpg" style="object-fit: contain;"&gt; &lt;/image&gt;
        &lt;/div&gt;
        &lt;div if="{<!-- -->{$item.title=='List2'?true:false}}"&gt;
          &lt;image src="common/images/img1.jpg" style="object-fit: none;"&gt; &lt;/image&gt;
        &lt;/div&gt;
        &lt;div if="{<!-- -->{$item.title=='List3'?true:false}}"&gt;
          &lt;image src="common/images/img2.jpg" style="object-fit: contain;"&gt; &lt;/image&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/tab-content&gt;
    &lt;tab-bar class="tab_bar mytabs" mode="scrollable"&gt;
      &lt;div class="tab_item" for="datas.list"&gt;
        &lt;text style="color: {<!-- -->{$item.color}};"&gt;{<!-- -->{$item.title}}&lt;/text&gt;
        &lt;div class="underline-show" if="{<!-- -->{$item.show}}"&gt;&lt;/div&gt;
        &lt;div class="underline-hide" if="{<!-- -->{!$item.show}}"&gt;&lt;/div&gt;
      &lt;/div&gt;
    &lt;/tab-bar&gt;
  &lt;/tabs&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
width: 100%;
height: 100%;
background-color:#F1F3F5;
}
.tab_bar {
  width: 100%;
  height: 150px;
}
.tab_item {
  height: 30%;
  flex-direction: column;
  align-items: center;
}
.tab_item text {
  font-size: 32px;
}
.item-container {
  justify-content: center;
  flex-direction: column;
}
.underline-show {
  height: 2px;
  width: 160px;
  background-color: #FF4500;
  margin-top: 7.5px;
}
.underline-hide {
  height: 2px;
  margin-top: 7.5px;
  width: 160px;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data() {
    return {
      datas: {
        color_normal: '#878787',
        color_active: '#ff4500',
        show: true,
        list: [{
          i: 0,
          color: '#ff4500',
          show: true,
          title: 'List1'
        }, {
          i: 1,
          color: '#878787',
          show: false,
          title: 'List2'
        }, {
           i: 2,
           color: '#878787',
           show: false,
           title: 'List3'
        }]
      }
    }
  },
  changeTabactive (e) {
    for (let i = 0; i &lt; this.datas.list.length; i++) {
      let element = this.datas.list[i];
      element.show = false;
      element.color = this.datas.color_normal;
      if (i === e.index) {
        element.show = true;
        element.color = this.datas.color_active;
      }
    }
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/c2/ec/UbYxva0S_o.gif" alt="img"></p> 
<h4><a id="swiper_1519"></a>swiper开发指导</h4> 
<h5><a id="swiper_1521"></a>创建swiper组件</h5> 
<p>在pages/index目录下的hml文件中创建一个swiper组件。</p> 
<pre><code>&lt;!-- xxx.hml--&gt;
&lt;div class="container"&gt;
  &lt;swiper&gt;
    &lt;div class="item" style="background-color: #bf45ea;"&gt;
      &lt;text&gt;item1&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #088684;"&gt;
      &lt;text&gt;item2&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #7786ee;"&gt;
      &lt;text&gt;item3&lt;/text&gt;
    &lt;/div&gt;
  &lt;/swiper&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  background-color: #F1F3F5;
  align-items: center;
  justify-content: center;
  width: 100%;
}
swiper{
  height: 30%;
}
.item{
  width: 100%;
  height: 500px;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
  font-size: 50px;
  color: white;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/48/c0/Cpmde9Eb_o.gif" alt="img"></p> 
<p>说明</p> 
<p>swiper组件支持除之外的子组件。</p> 
<h5><a id="_1575"></a>添加属性</h5> 
<p>swiper组件当不开启循环播放（loop=“false”）时添加自动播放属性（autoplay），设置自动播放时播放时间间隔（interval），页面会自动切换并停留在最后一个子组件页面。添加digital属性启用数字导航点，设置切换时为渐隐滑动效果（scrolleffect=“fade”））。</p> 
<pre><code>&lt;!-- xxx.hml--&gt;
&lt;div class="container"&gt;
  &lt;swiper index="1"  autoplay="true" interval="2000" indicator="true" digital="true" duration="500"
  scrolleffect="fade" loop="false"&gt;
    &lt;div class="item" style="background-color: #bf45ea;"&gt;
      &lt;text&gt;item1&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #088684;"&gt;
      &lt;text&gt;item2&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #7786ee;"&gt;
      &lt;text&gt;item3&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #c88cee;"&gt;
      &lt;text&gt;item4&lt;/text&gt;
    &lt;/div&gt;
  &lt;/swiper&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  background-color: #F1F3F5;
  align-items: center;
  justify-content: center;
}
swiper{
  height: 30%;
}
.item{
  width: 100%;
  height: 500px;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
  font-size: 50px;
  color: white;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/51/0f/RrSo5IVF_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>设置indicator（是否启用导航点指示器）属性为true时digital（是否启用数字导航点）属性才会生效。</li><li>swiper子组件的个数大于等于2时设置的loop属性才会生效。</li><li>scrolleffect属性仅在loop属性值为false时生效。</li></ul> 
<h5><a id="_1634"></a>设置样式</h5> 
<p>设置swiper组件的宽高，导航点指示器的直径大小（indicator-size）、颜色（indicator-color）、相对位置（ndicator-top）及选中时的颜色（indicator-selected-color）。</p> 
<pre><code>&lt;!-- xxx.hml--&gt;
&lt;div class="container"&gt;
    &lt;swiper index="1" autoplay="true" interval="2000"  duration="500" &gt;
        &lt;div class="item" style="background-color: bisque;"&gt;
            &lt;text&gt;item1&lt;/text&gt;
        &lt;/div&gt;
        &lt;div class="item" style="background-color: darkkhaki;"&gt;
            &lt;text&gt;item2&lt;/text&gt;
        &lt;/div&gt;
        &lt;div class="item" style="background-color: cadetblue;"&gt;
            &lt;text&gt;item3&lt;/text&gt;
        &lt;/div&gt;
    &lt;/swiper&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  background-color: #F1F3F5;
  align-items: center;
  justify-content: center;
}
swiper{
  width:  500px;
  height: 500px;
  border-radius: 250px;
  indicator-color: white;
  indicator-selected-color: blue;
  indicator-size: 40px;
  indicator-top: 100px;
  overflow: hidden ;
}
.item{
  width: 100%;
  height: 500px;
}
text{
  width: 100%;
  text-align: center;
  margin-top: 150px;
  font-size: 50px;
  color: white;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/23/64/e158KGTB_o.gif" alt="img"></p> 
<h5><a id="_1690"></a>绑定事件</h5> 
<p>创建两个text组件添加点击事件，当点击后就调用showPrevious（显示上一个子组件）或showNext（显示下一个子组件）方法。添加select组件下拉选择时触发change事件后调用swiperTo方法跳转到指定轮播页面。swiper组件绑定change（当前显示的组件索引变化时触发）和finish（切换动画结束时触发）事件。</p> 
<pre><code>&lt;!-- xxx.hml--&gt;
&lt;div class="container"&gt;
  &lt;swiper interval="2000" onchange="change" loop="false" onanimationfinish="finish" id="swiper"&gt;
    &lt;div class="item" style="background-color: #bf45ea"&gt;
      &lt;text&gt;item1&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #088684;"&gt;
      &lt;text&gt;item2&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #7786ee;"&gt;
      &lt;text&gt;item3&lt;/text&gt;
    &lt;/div&gt;
    &lt;div class="item" style="background-color: #c88cee;"&gt;
      &lt;text&gt;item4&lt;/text&gt;
    &lt;/div&gt;
  &lt;/swiper&gt;
  &lt;div class="content"&gt;
      &lt;button class="pnbtn" onclick="previous"&gt;Previous&lt;/button&gt;
      &lt;select onchange="selectChange"&gt;
          &lt;option value="0"&gt;swipeTo 1&lt;/option&gt;
          &lt;option value="1"&gt;swipeTo 2&lt;/option&gt;
          &lt;option value="2"&gt;swipeTo 3&lt;/option&gt;
          &lt;option value="3"&gt;swipeTo 4&lt;/option&gt;
      &lt;/select&gt;
    &lt;button class="pnbtn" onclick="next"&gt;Next&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  background-color: #F1F3F5;
  align-items: center;
  justify-content: center;
}
swiper{
  height: 30%;
}
.item{
  width: 100%;
  height: 500px;
}
text{
  width: 100%;
  height: 100%;
  text-align: center;
  font-size: 50px;
  color: white;
}
select{
  background-color: white;
  width: 250px;
  height: 80px;
}
.content{
  margin-top: 100px;
  justify-content: space-around;
}
.pnbtn{
  width: 200px;
  height: 80px;
  font-size: 30px; 
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default{
  change(e){
    promptAction.showToast({duration:2000,message:"current index:"+e.index});
  },
  finish(){
    promptAction.showToast({duration:2000,message:"切换动作结束"});
  },
  selectChange(e){
    this.$element('swiper').swipeTo({index: Number(e.newValue)});
  },
  previous(){
    this.$element('swiper').showPrevious();
  },
  next(){
    this.$element('swiper').showNext();
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/87/fa/2Gnz5hFg_o.gif" alt="img"></p> 
<h5><a id="_1788"></a>场景示例</h5> 
<p>本场景中使用swiper创建一个轮播图，在轮播图底部制作一个缩略图，点击缩略图后调用swipeTo方法切换到对应的轮播图。</p> 
<pre><code>&lt;!-- xxx.hml--&gt;
&lt;div class="container"&gt;
  &lt;swiper duration="500" indicator="false" id="swiper" onchange="change"&gt;
    &lt;div class="item" for="item in list"&gt;
      &lt;image src="{<!-- -->{item.src}}"&gt;&lt;/image&gt;
    &lt;/div&gt;
  &lt;/swiper&gt;
  &lt;div class="content"&gt;
    &lt;div class="content_item {<!-- -->{index == $idx?'actived':''}}" for="item in list" onclick="imageTo({<!-- -->{$idx}})"&gt;
      &lt;image src="{<!-- -->{item.src}}"&gt;&lt;/image&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  flex-direction: column;
  background-color: #F1F3F5;
  align-items: center;
  justify-content: center;
  width: 100%;
}
swiper{
  width: 100%;
  height: 500px;
}
.item{
  width: 100%;
  height: 500px;
}
.content{
  margin-top: -120px;
  width: 70%;
  display: flex;
  justify-content: space-around;
  height: 100px;
}
.content_item{
  padding: 5px;
  transform: scale(0.5);
}
.actived{
  transform: scale(1);
  border: 1px solid #b20937ea;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data:{
    index: 0,
    list:[
      {src: 'common/images/1.png'},
      {src: 'common/images/2.png'},
      {src: 'common/images/3.png'},
      {src: 'common/images/4.png'},]
    },
  imageTo(index){
    this.index = index;
    this.$element('swiper').swipeTo({index: index});
  },
  change(e){
    this.index = e.index;
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/1c/58/CIwU07vY_o.gif" alt="img"></p> 
<h4><a id="Canvas_1871"></a>Canvas开发指南</h4> 
<h5><a id="Canvas_1873"></a>Canvas对象</h5> 
<h6><a id="Canvas_1875"></a>创建Canvas组件</h6> 
<p>在pages/index目录下的hml文件中创建一个Canvas组件。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;canvas&gt;&lt;/canvas&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
canvas{
  background-color: #00ff73;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/c8/58/ASzCS1JO_o.png" alt="img"></p> 
<p>说明</p> 
<ul><li>Canvas组件默认背景色与父组件的背景色一致。</li><li>Canvas默认宽高为width: 300px，height: 150px。</li></ul> 
<h6><a id="_1908"></a>添加样式</h6> 
<p>Canvas组件设置宽（width）、高（height）、背景色（background-color）及边框样式（border）。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;canvas&gt;&lt;/canvas&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
canvas{
  width: 500px;
  height: 500px;  
  background-color: #fdfdfd;  
  border: 5px solid red;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/13/4f/O0F1nkMa_o.png" alt="img"></p> 
<h6><a id="_1937"></a>添加事件</h6> 
<p>Canvas添加长按事件，长按后可获取Canvas组件的dataUrl值（toDataURL方法返回的图片信息），打印在下方文本区域内。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;canvas ref="canvas1" onlongpress="getUrl"&gt;&lt;/canvas&gt;
  &lt;text&gt;dataURL&lt;/text&gt;
  &lt;text class="content"&gt;{<!-- -->{dataURL}}&lt;/text&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width:100%;
  height:100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
  }
  canvas{  
    width: 500px;  
    height: 500px;
    background-color: #fdfdfd;
    border: 5px solid red;
    margin-bottom: 50px;
}
.content{
  border: 5px solid blue;
  padding: 10px;
  width: 90%;
  height: 400px; 
  overflow: scroll;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  data:{
    dataURL:null,
  },
  onShow(){
    let el = this.$refs.canvas1;
    let ctx = el.getContext("2d"); 
    ctx.strokeRect(100,100,300,300);
  },
  getUrl(){
    let el = this.$refs.canvas1
    let dataUrl = el.toDataURL()
    this.dataURL = dataUrl;
    promptAction.showToast({duration:2000,message:"long press,get dataURL"})
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/25/58/7GD0Xyts_o.gif" alt="img"></p> 
<p>说明</p> 
<p>画布不支持在onInit和onReady中进行创建。</p> 
<h5><a id="2D_2003"></a>2D对象</h5> 
<p>使用CanvasRenderingContext2D在Canvas画布组件上进行绘制，绘制对象可以是图形、文本、线段、图片等。具体请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-canvas-canvasrenderingcontext2d-0000001428061816-V2" rel="nofollow">CanvasRenderingContext2D对象</a>。</p> 
<h6><a id="_2007"></a>画线段</h6> 
<p>使用moveTo和lineTo画出一条线段，当使用closePath方法时会结束当前路径形成一个封闭图形 。设置quadraticCurveTo（二次贝赛尔曲线）或bezierCurveTo（三次贝赛尔曲线）的值组成图形。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;canvas ref="canvas1"&gt;&lt;/canvas&gt;
  &lt;select @change="change"&gt;
    &lt;option value="value1"&gt; line &lt;/option&gt;
    &lt;option value="value2"&gt; quadratic &lt;/option&gt;
    &lt;option value="value3"&gt; bezier &lt;/option&gt;
    &lt;option value="value4"&gt; arc/ellipse &lt;/option&gt;
    &lt;option value="value5"&gt; lineJoin/miterLimit &lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
canvas{
  width: 600px;
  height: 500px;
  background-color: #fdfdfd;
  border: 5px solid red;
}
select{
  margin-top: 50px;
  width: 250px;
  height: 100px;
  background-color: white;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data:{
    el: null,
    ctx: null,
  },
  onShow(){
    this.el = this.$refs.canvas1;
    this.ctx = this.el.getContext("2d",{antialias: true});
    // 清除画布上的内容
    this.ctx.clearRect(0, 0, 600, 500);
    // 创建一个新的绘制路径
    this.ctx.beginPath();
    // 线端点以方形结束
    this.ctx.lineCap = 'butt';
    // 描边的宽度
    this.ctx.lineWidth = 15;
    // 创建一个新的绘制路径
    this.ctx.beginPath();
    // 路径从当前点移动到指定点
    this.ctx.moveTo(200, 100);
    // 从当前点到指定点进行路径连接
    this.ctx.lineTo(400, 100);
    // 边框绘制
    this.ctx.stroke();
    this.ctx.beginPath();
    // 线端点以圆形结束
    this.ctx.lineCap = 'round';
    this.ctx.moveTo(200, 200);
    this.ctx.lineTo(400, 200);
    this.ctx.stroke();
    // 线端点以方形结束
    this.ctx.beginPath();
    this.ctx.lineCap = 'square';
    this.ctx.moveTo(200, 300);
    this.ctx.lineTo(400, 300);
    this.ctx.stroke();
  },
  change(e){
    if(e.newValue == 'value1'){
      this.el = this.$refs.canvas1;
      this.ctx = this.el.getContext("2d",{antialias: true});
      this.ctx.clearRect(0, 0, 600, 500);
      // 上
      this.ctx.beginPath();
      this.ctx.lineCap = 'butt';
      this.ctx.moveTo(200, 100);
      this.ctx.lineTo(400, 100);
      this.ctx.stroke();
      // 中
      this.ctx.beginPath();
      this.ctx.lineCap = 'round';
      this.ctx.moveTo(200, 200);
      this.ctx.lineTo(400, 200);
      this.ctx.stroke();
      // 下
      this.ctx.beginPath();
      this.ctx.lineCap = 'square';
      this.ctx.moveTo(200, 300);
      this.ctx.lineTo(400, 300);
      this.ctx.stroke();
    }else if(e.newValue == 'value2'){
      this.ctx.clearRect(0, 0, 600, 500);
      // 上
      this.ctx.beginPath();
      this.ctx.moveTo(100, 150);
      // 二次贝赛尔曲线的路径
      this.ctx.quadraticCurveTo(300, 50, 500, 150);
      this.ctx.stroke();
      // 左
      this.ctx.beginPath();
      this.ctx.moveTo(200, 150);
      this.ctx.quadraticCurveTo(250, 250, 250, 400);
      this.ctx.stroke();
      // 右
      this.ctx.beginPath();
      this.ctx.moveTo(400, 150);
      this.ctx.quadraticCurveTo(350, 250, 350, 400);
      this.ctx.stroke();
    }else if(e.newValue == 'value3'){
      this.ctx.clearRect(0, 0, 600, 500);
      // 下
      this.ctx.beginPath();
      this.ctx.moveTo(100, 200);
      // 三次贝赛尔曲线的路径
      this.ctx.bezierCurveTo(150, 100, 200, 100,250, 200);
      this.ctx.stroke();
      // 左
      this.ctx.beginPath();
      this.ctx.moveTo(350, 200);
      this.ctx.bezierCurveTo(400, 100, 450, 100,500, 200);
      this.ctx.stroke();
      // 右
      this.ctx.beginPath();
      this.ctx.moveTo(200, 350);
      this.ctx.bezierCurveTo(250, 500, 350, 500, 400, 350);
      this.ctx.stroke();
    }else if(e.newValue == 'value4'){
      this.ctx.clearRect(0, 0, 600, 500);
      this.ctx.beginPath();
      this.ctx.moveTo(100, 200);
      // 弧线
      this.ctx.arcTo(150, 300, 350, 300, 150);
      this.ctx.stroke();
      this.ctx.beginPath();
      // 椭圆
      this.ctx.ellipse(400, 250, 50, 100, Math.PI * 0.25, Math.PI * 0.5 , Math.PI , 1);
      this.ctx.stroke();
    }else if(e.newValue == 'value5'){
      this.ctx.clearRect(0, 0, 600, 500);
      // 左上
      this.ctx.beginPath();
      // 在线段相连处绘制一个扇形
      this.ctx.lineJoin = 'round';
      this.ctx.moveTo(100, 100);
      this.ctx.lineTo(200, 200);
      this.ctx.lineTo(100, 250);
      this.ctx.stroke();
      // 左下
      this.ctx.beginPath();
      // 在线段相连处使用三角形为底填充
      this.ctx.lineJoin = 'bevel';
      this.ctx.moveTo(100, 300);
      this.ctx.lineTo(200, 400);
      this.ctx.lineTo(100, 450);
      this.ctx.stroke();
      // 右上
      this.ctx.beginPath();
      //线条相交处内角和外角的距离
      this.ctx.lineJoin = 'miter';
      this.ctx.miterLimit = 3;
      this.ctx.moveTo(400, 100);
      this.ctx.lineTo(450, 200);
      this.ctx.lineTo(400, 250);
      // 结束当前路径形成一个封闭路径
      this.ctx.closePath();
      this.ctx.stroke();
      // 右下
      this.ctx.beginPath();
      this.ctx.lineJoin = 'miter';
      this.ctx.miterLimit = 10;
      this.ctx.moveTo(400, 300);
      this.ctx.lineTo(450, 400);
      this.ctx.lineTo(400, 450);
      this.ctx.closePath();
      this.ctx.stroke();
    }
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/5b/4f/mSWqhToi_o.gif" alt="img"></p> 
<h6><a id="_2203"></a>画边框</h6> 
<p>全局定义画布（el）及画笔（ctx），初始化创建一个边框宽度为5的长方形。对边框的宽度（lineWidth）、颜色（strokeStyle）、虚化程度（setLineDash）进行改变，选用select组件添加change事件，下拉选择时触发change事件后画出改变后的图形。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;canvas ref="canvas1"&gt;&lt;/canvas&gt;
  &lt;select @change="change"&gt;
    &lt;option value="value1"&gt;strokeRect&lt;/option&gt;
    &lt;option value="value2"&gt;arc&lt;/option&gt;
    &lt;option value="value3"&gt;lineDashRect&lt;/option&gt;
    &lt;option value="value4"&gt;fillRect&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
canvas{
  width: 600px;
  height: 500px;
  background-color: #fdfdfd;
  border: 5px solid red;
}
select{
  margin-top: 50px;
  width: 250px;
  height: 100px;
  background-color: white;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data:{
    el: null,
    ctx: null,
  },
  onShow(){
    this.el = this.$refs.canvas1;
    this.ctx = this.el.getContext("2d",{antialias: true});
    this.ctx.lineWidth = 5;
    this.ctx.strokeRect(200, 150, 200, 200);
  },
  change(e){
    if(e.newValue == 'value1'){
      // 清除画布上的内容
      this.ctx.clearRect(0,0,600,500);
      // 边框宽度
      this.ctx.lineWidth = 5;
      // 边框颜色
      this.ctx.strokeStyle = '#110000';
      // 边框的虚化程度
      this.ctx.setLineDash([0,0]);
      // 画具有边框的矩形
      this.ctx.strokeRect(200, 150, 200, 200);
    }else if (e.newValue == 'value2'){
      this.ctx.clearRect(0,0,600,500);
      this.ctx.lineWidth = 30;
      this.ctx.strokeStyle = '#0000ff';
      this.ctx.setLineDash([0,0]);
      // 画圆
      this.ctx.arc(300, 250, 150,0,6.28);
      //进行边框绘制
      this.ctx.stroke();
    }else if (e.newValue == 'value3'){
      this.ctx.clearRect(0,0,600,500);
      this.ctx.lineWidth = 5;
      this.ctx.setLineDash([5,5]);
      this.ctx.strokeRect(200, 150, 200, 200);
    }else if (e.newValue == 'value4'){
      this.ctx.clearRect(0,0,600,500);
      // 画一个有填充颜色的矩形
      this.ctx.fillStyle = '#0000ff';
      this.ctx.fillRect(200, 150, 200, 200);
    }
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/08/c5/ivDZQ7QF_o.gif" alt="img"></p> 
<h6><a id="_2295"></a>填充渐变色</h6> 
<p>添加createLinearGradient和createRadialGradient属性创建渐变容器，接着用addColorStop方法添加多个色块组成渐变色，再设置fillStyle为gradient将渐变色填充到矩形中，最后设置阴影的模糊级别（shadowBlur）、阴影颜色（shadowColor）及阴影偏移量（shadowOffset）。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;canvas ref="canvas1"&gt;&lt;/canvas&gt;
  &lt;select @change="change"&gt;
    &lt;option value="value1"&gt;LinearGradient&lt;/option&gt;
    &lt;option value="value2"&gt;RadialGradient&lt;/option&gt;
    &lt;option value="value3"&gt;shadowBlur&lt;/option&gt;
    &lt;option value="value4"&gt;shadowOffset&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
canvas{
  width: 600px;
  height: 500px;
  background-color: #fdfdfd;
  border: 5px solid red;
}
select{
  margin-top: 50px;
  width: 250px;
  height: 100px;
  background-color: white;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data:{
    el: null,
    ctx: null,
  },
  onShow(){
    this.el = this.$refs.canvas1;
    this.ctx = this.el.getContext("2d",{antialias: true});
    // 创建一个线性渐变色
    let gradient = this.ctx.createLinearGradient(100,100, 400,300);
    // 添加渐变颜色
    gradient.addColorStop(0.0, 'red');
    gradient.addColorStop(0.7, 'white');
    gradient.addColorStop(1.0, 'green');
    // 填充颜色为渐变色
    this.ctx.fillStyle = gradient;
    this.ctx.fillRect(100, 100, 400, 300);
  },
  change(e){
    if(e.newValue == 'value1'){
      // 清除画布上的内容
      this.ctx.clearRect(0,0,600,500);
      let gradient = this.ctx.createLinearGradient(100,100, 400,300);
      gradient.addColorStop(0.0, 'red');
      gradient.addColorStop(0.7, 'white');
      gradient.addColorStop(1.0, 'green');
      this.ctx.fillStyle = gradient;
      // 设置绘制阴影时的模糊级别
      this.ctx.shadowBlur = 0;
      // 绘制阴影时和原有对象的垂直偏移值
      this.ctx.shadowOffsetY = 0;
      // 绘制阴影时和原有对象的水平偏移值
      this.ctx.shadowOffsetX = 0;
      this.ctx.fillRect(100, 100, 400, 300);
    }else if(e.newValue == 'value2'){
      this.ctx.clearRect(0,0,600,500);
      // 创建一个径向渐变色
      let gradient = this.ctx.createRadialGradient(300,250,20,300,250,100);
      gradient.addColorStop(0.0, 'red');
      gradient.addColorStop(0.7, 'white');
      gradient.addColorStop(1.0, 'green');
      this.ctx.shadowBlur = 0;
      this.ctx.shadowOffsetY = 0;
      this.ctx.shadowOffsetX = 0;
      this.ctx.fillStyle = gradient;
      this.ctx.fillRect(100, 100, 400, 300);
    }else if(e.newValue == 'value3'){
      this.ctx.clearRect(0,0,600,500);
      let gradient = this.ctx.createLinearGradient(100,100, 400,400);             
      gradient.addColorStop(0.0, 'red');    
      gradient.addColorStop(0.5, 'white');    
      gradient.addColorStop(1, '#17ea35');
      // 设置绘制阴影时的模糊级别
      this.ctx.shadowBlur = 30;
      // 绘制阴影时的阴影颜色
      this.ctx.shadowColor = 'rgb(229, 16, 16)';
      this.ctx.fillStyle = gradient;
      this.ctx.fillRect(100, 100, 400, 300);
    }else if(e.newValue == 'value4'){
      this.ctx.clearRect(0,0,600,500);
      this.ctx.clearRect(0,0,600,500);
      let gradient = this.ctx.createRadialGradient(300,250,20,300,250,200);      
      gradient.addColorStop(0.0, 'red');     
      gradient.addColorStop(0.5, 'white');     
      gradient.addColorStop(1, '#17ea35');
      // 设置绘制阴影时的模糊级别
      this.ctx.shadowBlur = 30;     
      this.ctx.shadowOffsetY = 30;
      // 绘制阴影时的阴影颜色
      this.ctx.shadowColor = 'rgb(23, 1, 1)';
      this.ctx.fillStyle = gradient;
      this.ctx.fillRect(100, 100, 400, 300);
    }
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/06/56/1VMh9Pq6_o.gif" alt="img"></p> 
<h6><a id="_2417"></a>填充文字</h6> 
<p>先创建文本，再用fillText方法把文字写在画布上。通过globalAlpha属性改变基线透明度，使基线不会挡住文字，再设置textAlign和textBaseline属性确定文字基于基线的位置。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;canvas ref="canvas1"&gt;&lt;/canvas&gt;
  &lt;select @change="change"&gt;
    &lt;option value="value1"&gt;text&lt;/option&gt;
    &lt;option value="value2"&gt;textBaseline&lt;/option&gt;
    &lt;option value="value3"&gt;textAlign&lt;/option&gt;
  &lt;/select&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
canvas{
  width: 600px;
  height: 500px;
  background-color: #fdfdfd;
  border: 5px solid red;
}
select{
  margin-top: 50px;
  width: 250px;
  height: 100px;
  background-color: white;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data:{
    el: null,
    ctx: null,
  },
  onShow(){
    this.el = this.$refs.canvas1;
    this.ctx = this.el.getContext("2d",{antialias: true});
    // 创建文本
    let text = "Hello World";
    // 设置字体
    this.ctx.font = '30px';
    this.ctx.fillText("with:"+this.ctx.measureText(text).width, 200, 300);
    // 填充字体文本
    this.ctx.fillText(text, 200, 250);
  },
  change(e){
    if(e.newValue == 'value1'){
      // 清除画布上的内容
      this.ctx.clearRect(0,0,600,500);
      // 开始新的路径
      this.ctx.beginPath();
      // 初始化textAlign值
      this.ctx.textAlign = 'left';
      // 初始化textBaseline
      this.ctx.textBaseline = 'alphabetic';
      // 设置字体
      this.ctx.font = '30px';
      let text = "Hello World";
      // 获取字体width
      this.ctx.fillText("with:"+this.ctx.measureText(text).width, 200, 300);
      // 填充字体文本
      this.ctx.fillText(text, 200, 250);
    }else if(e.newValue == 'value2'){
      this.ctx.clearRect(0,0,600,500);
      this.ctx.beginPath();
      // 设置透明度
      this.ctx.globalAlpha = 0.1;
      // 设置线宽度
      this.ctx.lineWidth = 10;
      // 设置线段颜色
      this.ctx.strokeStyle = '#0000ff';
      // 从当前点移动到指定点
      this.ctx.moveTo(0, 240);
      // 当前点到指定点进行路径连接
      this.ctx.lineTo(600, 240);
      this.ctx.stroke();
      this.ctx.font = '35px';
      this.ctx.globalAlpha = 1;
      // 初始化textAlign值
      this.ctx.textAlign = 'left';
      // 设置textBaseline
      this.ctx.textBaseline = 'top';
      this.ctx.fillText('Top', 50, 240);
      this.ctx.textBaseline = 'bottom';
      this.ctx.fillText('Bottom', 200, 240);
      this.ctx.textBaseline = 'middle';
      this.ctx.fillText('Middle', 400, 240);
    }else if(e.newValue == 'value3'){
      // 清除画布上的内容
      this.ctx.clearRect(0,0,600,500);
      this.ctx.beginPath();
      this.ctx.globalAlpha = 0.1;
      this.ctx.lineWidth = 10;
      this.ctx.strokeStyle = '#0000ff';
      this.ctx.moveTo(300, 0);
      this.ctx.lineTo(300, 500);
      this.ctx.stroke();
      this.ctx.font = '35px';
      this.ctx.globalAlpha = 1;
      // 初始化 textBaseline
      this.ctx.textBaseline = 'alphabetic';
      // 设置textAlign
      this.ctx.textAlign = 'left';
      this.ctx.fillText('textAlign=left',300, 100);
      this.ctx.textAlign = 'center';
      this.ctx.fillText('textAlign=center',300, 250);
      this.ctx.textAlign = 'right';
      this.ctx.fillText('textAlign=right',300, 400);
    }
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/76/0a/AcmqnNgw_o.gif" alt="img"></p> 
<p>说明</p> 
<p>ltr布局模式下start和left一致，rtl布局模式下start和right一致·。</p> 
<h6><a id="_2549"></a>添加图片</h6> 
<p>创建图片对象后使用drawImage属性画出图片，给图片设置一些动画样式如scale（缩放）、translate（平移）或rotate（旋转）。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="content"&gt;
    &lt;canvas ref="canvas0"&gt;&lt;/canvas&gt;
    &lt;text onclick="change"&gt;change&lt;/text&gt;
    &lt;canvas ref="canvas1"&gt;&lt;/canvas&gt;
    &lt;text onclick="rotate"&gt;rotate&lt;/text&gt;
    &lt;canvas ref="canvas2"&gt;&lt;/canvas&gt;
    &lt;text onclick="scale"&gt;scale&lt;/text&gt;
    &lt;canvas ref="canvas3"&gt;&lt;/canvas&gt;
    &lt;text onclick="translate" style="width: 300px;"&gt;translate&lt;/text&gt;
    &lt;canvas ref="canvas4"&gt;&lt;/canvas&gt;
    &lt;text onclick="transform" style="width: 300px;"&gt;transform&lt;/text&gt;
    &lt;canvas ref="canvas5"&gt;&lt;/canvas&gt;
    &lt;text onclick="setTransform" style="width: 300px;"&gt;setTransform&lt;/text&gt;
    &lt;canvas ref="canvas6"&gt;&lt;/canvas&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  flex-direction: column;
  background-color: #F1F3F5;
  align-items: center;
}
canvas{
  width: 600px;
  height: 300px;
  margin-bottom: 100px;
  background-color: #fdfdfd;
  border: 5px solid red;
}
.content{
  width: 80%;
  margin-top: 50px;
  margin-bottom: 50px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
}
text{
  font-size: 35px;
  width: 200px;
  height: 80px;
  color: white;
  border-radius: 20px;
  text-align: center;
  background-color: #6060e7;
  margin-bottom: 30px;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  data:{
    compositeOperation: 'source-over'
  },
  onShow(){
    let ctx = this.$refs.canvas0.getContext("2d");
    // 创建图片对象
    let img = new Image();
    // 设置图片路径
    img.src = 'common/images/2.png';
    // 设置图片宽度
    img.width= 150;
    // 设置图片高度
    img.height=150;
    // 图片平铺容器
    var pat = ctx.createPattern(img, 'repeat');ctx.fillStyle = pat;
    ctx.fillRect(0, 0, 600, 300);
  },
  change(){
    // 创建画布后得到画笔
    let ctx = this.$refs.canvas1.getContext("2d");
    ctx.clearRect(0,0,600,1000);
    if(this.compositeOperation == "source-over"){
      this.compositeOperation = "destination-over";
    }else{
      this.compositeOperation = "source-over";
    }
    ctx.globalCompositeOperation = this.compositeOperation;
    let img = new Image();
    img.src = 'common/images/2.png';
    // 图片成功获取触发方法
    img.onload = function() {
      ctx.drawImage(img, 150, 20, 200, 200);
    };
    let img1 = new Image();
    img1.src = 'common/images/3.png';
    img1.onload = function() {
      // 画上图片
      ctx.drawImage(img1, 250, 80, 200, 200);
    };
    // 图片获取失败触发方法
    img1.onerror = function() {
      promptAction.showToast({message:"error",duration:2000})
    };
  },
  rotate(){
    let ctx = this.$refs.canvas2.getContext("2d");
    ctx.clearRect(0,0,600,300);
    // 旋转
    ctx.rotate(10 * Math.PI / 180);
    let img = new Image();
    img.src = 'common/images/2.png';
    img.onload = function() {
      ctx.drawImage(img, 300, 0, 100, 100);
    };
  },
  scale(){
    let ctx = this.$refs.canvas3.getContext("2d");
    ctx.clearRect(0,0,600,200);
    // 缩放
    ctx.scale(1.3,1.2);
    let img = new Image();
    img.src = 'common/images/2.png';
    img.onload = function() {
      ctx.drawImage(img, 0, 0, 50, 50);
    };
  },
  translate(){
    let ctx = this.$refs.canvas4.getContext("2d");
    ctx.clearRect(0,0,600,300);
    ctx.translate(10,0);
    let img = new Image();
    img.src = 'common/images/2.png';
    img.onload = function() {
      ctx.drawImage(img, 0, 50, 300, 200);
    };
  },
  transform(){
    let ctx = this.$refs.canvas5.getContext("2d");
    ctx.clearRect(0,0,600,300);
    ctx.transform(1.1, 0.1, 0.1, 1, 10, 0);
    let img = new Image();
    img.src = 'common/images/2.png';
    img.onload = function() {
      ctx.drawImage(img, 0, 50, 100, 100);
     };
  },
  setTransform(){
    let ctx = this.$refs.canvas6.getContext("2d");
    ctx.clearRect(0,0,600,300);
    ctx.setTransform(1.1, 0.1, 0.1, 1, 10, 0);
    let img = new Image();
    img.src = 'common/images/2.png';
    img.onload = function() {
      ctx.drawImage(img, 0, 50, 100, 100);
    };
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/52/19/vldOwgup_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li> <p>setTransfrom方法使用的参数和transform()方法相同，但setTransform()方法会重置现有的变换矩阵并创建新的变换矩阵。</p> </li><li> <p>变换后的坐标计算方式（x和y为变换前坐标，x’和y’为变换后坐标）：</p> <p>x’ = scaleX * x + skewY * y + translateX</p> <p>y’ = skewX * x + scaleY * y + translateY</p> </li></ul> 
<h6><a id="_2724"></a>添加方法</h6> 
<p>save方法可对画笔样式进行存储，restore可对存储的画笔进行恢复。如下面的示例，先设置画笔为红色，在保存画笔后对画布进行清除并改变画笔为蓝色，当我们直接使用画笔时会画出一个蓝色矩形，对存储的画笔进行恢复后就可画出红色矩形。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="content"&gt;
    &lt;canvas ref="canvas"&gt;&lt;/canvas&gt;
  &lt;/div&gt;
  &lt;div class="content"&gt;
    &lt;text onclick="save"&gt;save&lt;/text&gt;
    &lt;text onclick="clear"&gt;clear&lt;/text&gt;
    &lt;text onclick="restore"&gt;restore&lt;/text&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  background-color: #F1F3F5;
  align-items: center;
}
canvas{
  margin-top: 300px;
  width: 600px;
  height: 500px;
  background-color: #fdfdfd;
  border: 5px solid red;
}
.content{
  width: 80%;
  margin-top: 50px;
  margin-bottom: 50px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
}
text{
  width: 150px;
  height: 80px;
  color: white;
  border-radius: 20px;
  text-align: center;
  background-color: #6060e7;
  margin-bottom: 30px;
}
</code></pre> 
<pre><code>// xxx.js
import promptAction from '@ohos.promptAction';
export default {
  data:{
    ctx: '',
  },
  onShow(){
    this.ctx = this.$refs.canvas.getContext("2d");
    this.ctx.fillStyle = "red"
    this.ctx.fillRect(200, 150, 200, 200);
  },
  save(){
    // 画笔储存
    this.ctx.save();
    promptAction.showToast({message:"save succeed"});
  },
  clear(){ 
    this.ctx.clearRect(0,0,600,500);
    // 该变画笔颜色
    this.ctx.fillStyle = "#2133d2";
  },
  restore(){
    this.ctx.beginPath();
    // 画笔恢复
    this.ctx.restore();    
    this.ctx.fillRect(200, 150, 200, 200);
  },
}
</code></pre> 
<p><img src="https://images2.imgbox.com/97/92/TwyskTIs_o.gif" alt="img"></p> 
<h6><a id="_2814"></a>画线段</h6> 
<p>创建Path2D，使用多条线段组合图形。</p> 
<pre><code>&lt;!-- xxx.hml --&gt; 
&lt;div class="container"&gt;
  &lt;canvas ref="canvas"&gt;&lt;/canvas&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
    flex-direction: column;
    background-color: #F1F3F5;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}

canvas {
    width: 600px;
    height: 600px;
    background-color: #fdfdfd;
    border: 5px solid red;
}
</code></pre> 
<pre><code>// xxx.js
export default {
    onShow() {
        let ctx = this.$refs.canvas.getContext('2d', {
            antialias: true
        });
        let path = ctx.createPath2D();
        // 房顶
        path.moveTo(10, 300);
        path.lineTo(210, 100);
        path.lineTo(410, 300);
        // 屋子
        path.moveTo(10, 300);
        path.lineTo(410, 300);
        path.lineTo(410, 600);
        path.lineTo(10, 600);
        path.closePath();
        // 窗子
        path.moveTo(50, 450);
        path.bezierCurveTo(70, 350, 130, 350, 150, 450);
        path.closePath();
        // 门
        path.moveTo(250, 450);
        path.rect(250, 450, 100, 600);
        path.closePath();
        // 烟囱
        path.moveTo(365, 250);
        path.ellipse(310, 215, 30, 130, 0, Math.PI * 0.04, Math.PI * 1.1, 1);
        // 树
        path.moveTo(485, 450);
        path.quadraticCurveTo(510, 500, 485, 600);
        path.moveTo(550, 450);
        path.quadraticCurveTo(525, 500, 550, 600);
        path.moveTo(600, 535);
        path.arc(520, 450, 85, 0, 6);
        ctx.stroke(path);
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/5a/fe/RVvdZcKo_o.png" alt="img"></p> 
<h6><a id="_2887"></a>画图形</h6> 
<p>先使用createPath2D创建出路径对象，只对path1路径进行描边，所以画布上就只会出现path1的路径图形。点击text组件触发addPath方法会把path2路径对象当参数传入path1中，再对path1对象进行描边（stroke）操作后画布出现path1和path2两个图形。点击change文本改变setTransform属性值为setTransform(2, 0.1, 0.1, 2, 0,0)，图形变大并向左倾斜。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
    &lt;canvas ref="canvas"&gt;&lt;/canvas&gt;
    &lt;div class="content"&gt;
        &lt;text onclick="addPath"&gt;{<!-- -->{ isAdd }}&lt;/text&gt;
        &lt;text onclick="setTransform"&gt;{<!-- -->{ textName }}&lt;/text&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
    flex-direction: column;
    background-color: #F1F3F5;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}

canvas {
    width: 600px;
    height: 600px;
    background-color: #fdfdfd;
    border: 5px solid red;
}

.content {
    width: 80%;
    margin-top: 50px;
    margin-bottom: 50px;
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
}

text {
    width: 150px;
    height: 80px;
    color: white;
    border-radius: 20px;
    text-align: center;
    background-color: #6060e7;
    margin-bottom: 30px;
}
</code></pre> 
<pre><code>// xxx.js
export default {
    data: {
        ctx: null,
        path1: null,
        path2: null,
        path3: null,
        isAdd: "addPath2",
        isChange: true,
        textName: 'change'
    },
    onShow() {
        this.ctx = this.$refs.canvas.getContext('2d', {
            antialias: true
        });
        this.path1 = this.ctx.createPath2D();
        // 正方形
        this.path1.moveTo(200, 200);
        this.path1.lineTo(400, 200);
        this.path1.lineTo(400, 400);
        this.path1.lineTo(200, 400);
        this.path1.closePath();
        this.path2 = this.ctx.createPath2D();
        // 圆形
        this.path2.arc(300, 300, 75, 0, 6.28);
        this.ctx.stroke(this.path1);
    },
    addPath() {
        if (this.isAdd == "addPath2") {
            // 删除指定指定区域的绘制内容
            this.ctx.clearRect(0, 0, 600, 600);
            this.ctx.beginPath();
            // 将另一个的路径添加到当前路径对象中
            this.path2.addPath(this.path1);
            this.ctx.stroke(this.path2);
            this.isAdd = "clearPath2";
        } else {
            this.ctx.clearRect(0, 0, 600, 600);
            this.ctx.stroke(this.path1);
            this.isAdd = "addPath2";
        }
    },
    setTransform() {
        if (this.isChange) {
            this.ctx.clearRect(0, 0, 600, 600);
            this.path3 = this.ctx.createPath2D();
            this.path3.arc(150, 150, 100, 0, 6.28);
            // 重置现有的变换矩阵并创建新的变换矩阵
            this.path3.setTransform(2, 0.1, 0.1, 2, 0, 0);
            this.ctx.stroke(this.path3);
            this.isChange = !this.isChange;
            this.textName = "back"
        } else {
            this.ctx.clearRect(0, 0, 600, 600);
            this.path3.setTransform(0.5, -0.1, -0.1, 0.5, 0, 0);
            this.ctx.stroke(this.path3);
            this.isChange = !this.isChange;
            this.textName = "change";
        }
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/e2/69/8Ymn2j14_o.gif" alt="img"></p> 
<h6><a id="_3012"></a>判断位置</h6> 
<p>使用isPointInPath判断坐标点是否在路径的区域内，使用isPointInStroke判断坐标点是否在路径的边缘线上，并在页面上显示返回结果。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="content"&gt;
    &lt;text&gt;坐标：{<!-- -->{X}}, {<!-- -->{Y}}&lt;/text&gt;
    &lt;text&gt;In path:{<!-- -->{textValue}}&lt;/text&gt;
    &lt;text&gt;In stroke:{<!-- -->{textValue1}}&lt;/text&gt;
  &lt;/div&gt;
  &lt;canvas ref="canvas"&gt;&lt;/canvas&gt;
  &lt;button onclick="change"&gt;Add(50)&lt;/button&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
canvas{
  width: 600px;
  height: 500px;
  background-color: #fdfdfd;
  border: 5px solid red;
}
.content{
  flex-direction: column;
  justify-content: center;
  align-items: center; 
}
text{
  font-size: 30px;
  width: 300px;
  height: 80px;
  text-align: center;
}
button{
  width: 180px;
  height: 75px;
  margin-top: 50px;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data: {
    textValue: 0,
    textValue1: 0,
    X:0,
    Y:250,
  },
  onShow(){
    let canvas = this.$refs.canvas.getContext('2d');
    let offscreen = new OffscreenCanvas(500,500);
    let offscreenCanvasCtx = offscreen.getContext("2d");
    let offscreenCanvasCtx1 = offscreen.getContext("2d");
    offscreenCanvasCtx1.arc(this.X, this.Y, 2, 0, 6.28);
    offscreenCanvasCtx.lineWidth=20;
    offscreenCanvasCtx.rect(200,150, 200, 200);
    offscreenCanvasCtx.stroke();
    this.textValue1 = offscreenCanvasCtx.isPointInStroke(this.X, this.Y)?'true':'false';
    this.textValue = offscreenCanvasCtx.isPointInPath(this.X, this.Y)?'true':'false';
    let bitmap = offscreen.transferToImageBitmap();
    canvas.transferFromImageBitmap(bitmap);
  },
  change(){
    if(this.X &lt; 500){
      this.X = this.X+50;
    }else{
      this.X = 0;
    }
    let canvas = this.$refs.canvas.getContext('2d');
    let offscreen = new OffscreenCanvas(500,500);
    let offscreenCanvasCtx = offscreen.getContext("2d");
    let offscreenCanvasCtx1 = offscreen.getContext("2d");
    offscreenCanvasCtx1.arc(this.X, this.Y, 1, 0, 6.28)
    offscreenCanvasCtx.lineWidth=20
    offscreenCanvasCtx.rect(200,150, 200, 200);
    offscreenCanvasCtx.stroke();
    this.textValue1 = offscreenCanvasCtx.isPointInStroke(this.X, this.Y)?'true':'false';
    this.textValue = offscreenCanvasCtx.isPointInPath(this.X, this.Y)?'true':'false';
    let bitmap = offscreen.transferToImageBitmap();
    canvas.transferFromImageBitmap(bitmap);
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/97/Hm5O29pT_o.gif" alt="img"></p> 
<h4><a id="Svg_3112"></a>Svg开发指导</h4> 
<h5><a id="_3114"></a>基础知识</h5> 
<p>Svg组件主要作为svg画布的根节点使用，也可以在svg中嵌套使用。具体用法请参考<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-svg-0000001427902544-V2" rel="nofollow">Svg</a>。</p> 
<p>说明</p> 
<ul><li>从API version 7开始支持。</li><li>svg父组件或者svg组件需要定义宽高值，否则不进行绘制。</li></ul> 
<h6><a id="Svg_3123"></a>创建Svg组件</h6> 
<p>在pages/index目录下的hml文件中创建一个Svg组件。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg width="400" height="400"&gt;  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #F1F3F5;
}
svg{
  background-color: blue;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/16/44/VMwxlv3e_o.png" alt="img"></p> 
<h6><a id="_3151"></a>设置属性</h6> 
<p>通过设置width、height、x、y和viewBox属性为Svg设置宽度、高度、x轴坐标、y轴坐标和Svg视口。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg width="200" height="200" viewBox="0 0 100 100"&gt;    
    &lt;svg class="rect" width="200" height="200" x="20" y="10"&gt;    
    &lt;/svg&gt;  
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  width: 100%;
  height: 100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #F1F3F5;
}
svg{
  background-color: yellow;
}
.rect{
  background-color: red;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/1b/DXyMpEji_o.png" alt="img"></p> 
<p>说明</p> 
<ul><li>x和y设置的是当前Svg的x轴和y轴坐标，如果当前Svg为根节点，x轴和y轴属性无效。</li><li>viewBox的宽高和svg的宽高不一致，会以中心对齐进行缩放</li></ul> 
<h5><a id="_3190"></a>绘制图形</h5> 
<p>Svg组件可以用来绘制常见图形和线段，如矩形（ 
 <rect>
   ）、圆形（ 
  <circle>
    ）、线条( 
   <line>
     ）等，具体支持图形样式还请参考svg组件。 
   </line> 
  </circle> 
 </rect></p> 
<p>在本场景中，绘制各种图形拼接组成一个小房子。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg width="1000" height="1000"&gt;
    &lt;polygon points="100,400 300,200 500,400" fill="red"&gt;&lt;/polygon&gt;     //屋顶
    &lt;polygon points="375,275 375,225 425,225 425,325" fill="orange"&gt;&lt;/polygon&gt;   //烟囱
    &lt;rect width="300" height="300" x="150" y="400" fill="orange"&gt;      //房子
    &lt;/rect&gt;
    &lt;rect width="100" height="100" x="180" y="450" fill="white"&gt;    //窗户
    &lt;/rect&gt;
    &lt;line x1="180" x2="280" y1="500" y2="500" stroke-width="4" fill="white" stroke="black"&gt;&lt;/line&gt;     //窗框
    &lt;line x1="230" x2="230" y1="450" y2="550" stroke-width="4" fill="white" stroke="black"&gt;&lt;/line&gt;     //窗框
    &lt;polygon points="325,700 325,550 400,550 400,700" fill="red"&gt;&lt;/polygon&gt;     //门
    &lt;circle cx="380" cy="625" r="20" fill="black"&gt;&lt;/circle&gt;      //门把手
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width: 100%;
  height: 100%;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  background-color: #F1F3F5;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/45/f1/kc1arSZ7_o.png" alt="img"></p> 
<h5><a id="_3232"></a>绘制路径</h5> 
<p>Svg组件绘制路径时，通过Path中的M(起点)、H（水平线）、a（绘制弧形到指定位置）路径控制指令，并填充颜色实现 饼状图效果。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg fill="#00FF00" x="100" y="400"&gt;
    &lt;path d="M300,200 h-150 a150 150 0 1 0 150 -150 z" fill="red" stroke="blue" stroke-width="5" &gt;    
    &lt;/path&gt; 
    &lt;path d="M275,175 v-150 a150 150 0 0 0 -150 150 z" fill="yellow" stroke="blue" stroke-width="5"&gt;    
    &lt;/path&gt;
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: row;
  justify-content: flex-start;
  align-items: flex-start;
  height: 1200px;
  width: 600px;
  background-color: #F1F3F5;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/26/4c/0TPK4HU8_o.png" alt="img"></p> 
<p>说明</p> 
<ul><li>M/m = moveto 参数x和y表示需要移动到点的x轴和y轴的坐标。在使用M命令移动画笔后，只会移动画笔，但不会在两点之间画线。所以M命令经常出现在路径的开始处，用来指明从何处开始画。</li><li>L/l = lineto 参数x和y表示一个点的x轴和y轴坐标，L命令将会在当前位置和新位置（L前面画笔所在的点）之间画一条线段。</li><li>H/h = horizontal lineto 绘制平行线。</li><li>V/v = vertical lineto 绘制垂直线。</li><li>C/c = curveto 三次贝塞尔曲线 设置三组坐标参数： x1 y1, x2 y2, x y。</li><li>S/s = smooth curveto 三次贝塞尔曲线命令 设置两组坐标参数： x2 y2, x y。</li><li>Q/q = quadratic Belzier curve 二次贝塞尔曲线 设置两组坐标参数： x1 y1, x y。</li><li>T/t = smooth quadratic Belzier curveto 二次贝塞尔曲线命令 设置参数： x y。</li><li>A/a = elliptical Arc 弧形命令 设置参数： rx ry x-axis-rotation（旋转角度）large-arc-flag（角度大小） sweep-flag（弧线方向） x y。large-arc-flag决定弧线是大于还是小于180度，0表示小角度弧，1表示大角度弧。sweep-flag表示弧线的方向，0表示从起点到终点沿逆时针画弧，1表示从起点到终点沿顺时针画弧。</li><li>Z/z = closepath 从当前点画一条直线到路径的起点。</li></ul> 
<h5><a id="_3277"></a>绘制文本</h5> 
<p>Svg组件还可以绘制文本。</p> 
<h6><a id="_3281"></a>文本</h6> 
<p>说明</p> 
<ul><li>文本的展示内容需要写在元素标签text内，可嵌套tspan子元素标签分段。</li><li>只支持被父元素标签svg嵌套。</li><li>只支持默认字体sans-serif。</li></ul> 
<p>通过设置x（x轴坐标）、y（y轴坐标）、dx（文本x轴偏移）、dy（文本y轴偏移）、fill（字体填充颜色）、stroke（文本边框颜色）、stroke-width（文本边框宽度）等属性实现文本的不同展示样式。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg&gt;
    &lt;text x="200" y="300" font-size="80px" fill="blue" &gt;Hello World&lt;/text&gt;    &lt;text x="200" y="300" dx="20" dy="80" font-size="80px" fill="blue" fill-opacity="0.5" stroke="red" stroke-width="2"&gt;Hello World&lt;/text&gt;
    &lt;text x="20" y="550" fill="#D2691E"&gt;
      &lt;tspan dx="40" fill="red" font-size="80" fill-opacity="0.4"&gt;Hello World &lt;/tspan&gt;
    &lt;/text&gt;
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<p><img src="https://images2.imgbox.com/ca/5f/gtsretdn_o.png" alt="img"></p> 
<h6><a id="_3305"></a>沿路径绘制文本</h6> 
<p>textpath文本内容沿着属性path中的路径绘制文本。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg fill="#00FF00" x="100" y="400"&gt;
    &lt;path d="M40,360 Q360,360 360,180 Q360,20 200,20 Q40,40 40,160 Q40,280 180,180 Q180,180 200,100" stroke="red" fill="none"&gt;&lt;/path&gt;
      &lt;text&gt;
        &lt;textpath fill="blue" startOffset="20%" path="M40,360 Q360,360 360,180 Q360,20 200,20 Q40,40 40,160 Q40,280 180,180 Q180,180 200,100" font-size="30px"&gt;
          This is textpath test.
        &lt;/textpath&gt;
      &lt;/text&gt;
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<p><img src="https://images2.imgbox.com/8c/10/jhrzeJNy_o.png" alt="img"></p> 
<h3><a id="_3329"></a>动效开发指导</h3> 
<h5><a id="_3331"></a>属性样式动画</h5> 
<p>在关键帧（Keyframes）中动态设置父组件的width和height，实现组件变大缩小。子组件设置scale属性使父子组件同时缩放，再设置opacity实现父子组件的显示与隐藏。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="fade"&gt;
    &lt;text&gt;fading away&lt;/text&gt;
  &lt;/div&gt;
  &lt;div class="bigger"&gt;
    &lt;text&gt;getting bigger&lt;/text&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  background-color:#F1F3F5;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  width: 100%;
  height: 100%;
}
.fade {
  width: 30%;
  height: 200px;
  left: 35%;
  top: 25%;
  position: absolute;
  animation: 2s change infinite friction;
}
.bigger {
  width: 20%;
  height: 100px;
  background-color: blue;
  animation: 2s change1 infinite linear-out-slow-in;
}
text {
  width: 100%;
  height: 100%;
  text-align: center;
  color: white;
  font-size: 35px;
  animation: 2s change2 infinite linear-out-slow-in;
}
/* 颜色变化 */
@keyframes change{
  from {
    background-color: #f76160;
    opacity: 1;
  }
  to {
    background-color: #09ba07;
    opacity: 0;
  }
}
/* 父组件大小变化 */
@keyframes change1 {
  0% {
    width: 20%;
    height: 100px;
  }
  100% {
    width: 80%;
    height: 200px;
  }
}
/* 子组件文字缩放 */
@keyframes change2 {
  0% {
    transform: scale(0);
  }
  100% {
    transform: scale(1.5);
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/0a/06/D28mN9uQ_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>animation取值不区分先后，duration （动画执行时间）/ delay （动画延迟执行时间）按照出现的先后顺序解析。</li><li>必须设置animation-duration样式，否则时长为0则不会有动画效果。当设置animation-fill-mode属性为forwards时，组件直接展示最后一帧的样式。</li></ul> 
<h5><a id="transform_3422"></a>transform样式动画</h5> 
<p>设置transform属性对组件进行旋转、缩放、移动和倾斜。</p> 
<h6><a id="_3426"></a>设置静态动画</h6> 
<p>创建一个正方形并旋转90°变成菱形，并用下方的长方形把菱形下半部分遮盖形成屋顶，设置长方形translate属性值为(150px,-150px)确定坐标位置形成门，再使用position属性使横纵线跟随父组件（正方形）移动到指定坐标位置，接着设置scale属性使父子组件一起变大形成窗户大小，最后使用skewX属性使组件倾斜后设置坐标translate(200px,-710px)得到烟囱。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="top"&gt;&lt;/div&gt;
  &lt;div class="content"&gt;&lt;/div&gt;
  &lt;div class="door"&gt;&lt;/div&gt;
  &lt;!-- 窗户 --&gt;
  &lt;div class="window"&gt;
    &lt;div class="horizontal"&gt;&lt;/div&gt;
    &lt;div class="vertical"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;div class="chimney"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  background-color:#F1F3F5;
  align-items: center;
  flex-direction: column;
}
.top{
  z-index: -1;
  position: absolute;
  width: 428px;
  height: 428px;
  background-color: #860303;
  transform: rotate(45deg);
  margin-top: 284px;
  margin-left: 148px;
}
.content{
  margin-top: 500px;
  width: 600px;
  height: 400px;
  background-color: white;
  border:  1px solid black;
}
.door{
  width: 100px;
  height: 135px;
  background-color: #1033d9;
  transform: translate(150px,-137px);
}
.window{
  z-index: 1;
  position: relative;   
  width: 100px;
  height: 100px;
  background-color: white;
  border: 1px solid black;
  transform: translate(-150px,-400px) scale(1.5);
}
/* 窗户的横轴 */
.horizontal{
  position: absolute;
  top: 50%;
  width: 100px;
  height: 5px;
  background-color: black;
}
/* 窗户的纵轴 */
.vertical{
  position: absolute;
  left: 50%;
  width: 5px;
  height: 100px;
  background-color: black;
}
.chimney{
  z-index: -2;
  width: 40px;
  height: 100px;
  border-radius: 15px;
  background-color: #9a7404;
  transform: translate(200px,-710px) skewX(-5deg);
}
</code></pre> 
<p><img src="https://images2.imgbox.com/de/87/vfkmpvGa_o.png" alt="img"></p> 
<h6><a id="_3514"></a>设置平移动画</h6> 
<p>小球下降动画，改变小球的Y轴坐标实现小球下落，在下一段是时间内减小Y轴坐标实现小球回弹，让每次回弹的高度逐次减小直至回弹高度为0，就模拟出了小球下降的动画。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="circle"&gt;&lt;/div&gt;
  &lt;div class="flower"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  background-color:#F1F3F5;
  display: flex;
  justify-content: center;
}
.circle{
  width: 100px;
  height: 100px;
  border-radius: 50px;
  background-color: red;
  /* forwards停在动画的最后一帧 */
  animation: down 3s fast-out-linear-in forwards;
}
.flower{
  position: fixed;
  width: 80%;
  margin-left: 10%;
  height: 5px;
  background-color: black;
  top: 1000px;
}
@keyframes down {
  0%{
    transform: translate(0px,0px);
  }
  /* 下落 */
  15%{
    transform: translate(10px,900px);
  }
  /* 开始回弹 */
  25%{
    transform: translate(20px,500px);
  }
  /* 下落 */
  35%{
    transform: translate(30px,900px);
  }
  /* 回弹 */
  45%{
    transform: translate(40px,700px);
  }
  55%{
    transform: translate(50px,900px);
  }
  65%{
    transform: translate(60px,800px);
  }
  80%{
    transform: translate(70px,900px);
  }
  90%{
    transform: translate(80px,850px);
  }
  /* 停止 */
  100%{
    transform: translate(90px,900px);
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/98/12/GdcxsOu9_o.gif" alt="img"></p> 
<h6><a id="_3592"></a>设置旋转动画</h6> 
<p>设置不同的原点位置（transform-origin）改变元素所围绕的旋转中心。rotate3d属性前三个参数值分别为X轴、Y轴、Z轴的旋转向量，第四个值为旋转角度，旋转向角度可为负值，负值则代表旋转方向为逆时针方向。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="rotate"&gt;
    &lt;div class="rect rect1"&gt;&lt;/div&gt;
    &lt;div class="rect rect2"&gt;&lt;/div&gt;
    &lt;div class="rect rect3"&gt;&lt;/div&gt;
  &lt;/div&gt;
  &lt;!-- 3d属性 --&gt;
  &lt;div class="rotate3d"&gt;
    &lt;div class="content"&gt;
        &lt;div class="rect4"&gt;&lt;/div&gt;
        &lt;div class="rect5"&gt; &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="mouse"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
    flex-direction: column;
    background-color:#F1F3F5;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
}
.rect {
    width: 100px;
    height: 100px;
    animation: rotate 3s infinite;
    margin-left: 30px;
}
.rect1 {
    background-color: #f76160;
}
.rect2 {
    background-color: #60f76f;
/* 改变原点位置*/
    transform-origin: 10% 10px;
}
.rect3 {
    background-color: #6081f7;
/*  改变原点位置*/
    transform-origin: right bottom;
}
@keyframes rotate {
    from {
        transform: rotate(0deg)
    }
    to {
        transform: rotate(360deg);
    }
}
/* 3d示例样式 */
.rotate3d {
    margin-top: 150px;
    flex-direction: column;
    background-color:#F1F3F5;
    display: flex;
    align-items: center;
    width: 80%;
    height: 600px;
    border-radius: 300px;
    border: 1px solid #ec0808;
}
.content {
    padding-top: 150px;
    display: flex;
    align-items: center;
    justify-content: center;
}
/* react4 react5 翻转形成眼睛 */
.rect4 {
    width: 100px;
    height: 100px;
    animation: rotate3d1 1000ms infinite;
    background-color: darkmagenta;
}
.rect5 {
    width: 100px;
    height: 100px;
    animation: rotate3d1 1000ms infinite;
    margin-left: 100px;
    background-color: darkmagenta;
}
.mouse {
    margin-top: 150px;
    width: 200px;
    height: 100px;
    border-radius: 50px;
    border: 1px solid #e70303;
    animation: rotate3d2 1000ms infinite;
}
/* 眼睛的动效 */
@keyframes rotate3d1 {
    0% {
        transform:rotate3d(0,0,0,0deg)
    }
    50% {
        transform:rotate3d(20,20,20,360deg);
    }
    100% {
        transform:rotate3d(0,0,0,0deg);
    }
}
/* 嘴的动效 */
@keyframes rotate3d2 {
    0% {
        transform:rotate3d(0,0,0,0deg)
    }
    33% {
        transform:rotate3d(0,0,10,30deg);
    }
    66% {
        transform:rotate3d(0,0,10,-30deg);
    }
    100% {
        transform:rotate3d(0,0,0,0deg);
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/cb/b3/jRgleWqi_o.gif" alt="img"></p> 
<p>说明</p> 
<p>transform-origin变换对象的原点位置，如果仅设置一个值，另一个值为50%，若设置两个值第一个值表示X轴的位置，第二个值表示Y轴的位置。</p> 
<h6><a id="_3728"></a>设置缩放动画</h6> 
<p>设置scale样式属性实现涟漪动画，先使用定位确定元素的位置，确定坐标后创建多个组件实现重合效果，再设置opacity属性改变组件不透明度实现组件隐藏与显示，同时设置scale值使组件可以一边放大一边隐藏，最后设置两个组件不同的动画执行时间，实现扩散的效果。</p> 
<p>设置sacle3d中X轴、Y轴、Z轴的缩放参数实现动画。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="circle"&gt;
    &lt;text&gt;ripple&lt;/text&gt;
  &lt;/div&gt;
  &lt;div class="ripple"&gt;&lt;/div&gt;
  &lt;div class="ripple ripple2"&gt;&lt;/div&gt;
  &lt;!-- 3d --&gt;
  &lt;div class="content"&gt;
    &lt;text&gt;spring&lt;/text&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
    flex-direction: column;
    background-color:#F1F3F5;
    width: 100%;
    position: relative;
}
.circle{
    margin-top: 400px;
    margin-left: 40%;
    width: 100px;
    height: 100px;
    border-radius: 50px;
    background-color: mediumpurple;
    z-index: 1;  position: absolute;
}
.ripple{
    margin-top: 400px;
    margin-left: 40%;
    position: absolute;  z-index: 0;
    width: 100px;
    height: 100px;
    border-radius: 50px;
    background-color: blueviolet;
    animation: ripple 5s infinite;
}
/* 设置不同的动画时间 */
.ripple2{
    animation-duration: 2.5s;
}
@keyframes ripple{
    0%{
        transform: scale(1);
        opacity: 0.5;
    }
    50%{
        transform: scale(3);
        opacity: 0;
    }
    100%{
        transform: scale(1);
        opacity: 0.5;
    }
}
text{
    color: white;
    text-align: center;
    height: 100%;
    width: 100%;
}
.content {
    margin-top: 700px;
    margin-left: 33%;
    width: 200px;
    height: 100px;
    animation:rubberBand 1s infinite;
    background-color: darkmagenta;
    position: absolute;
}
@keyframes rubberBand {
    0% {
        transform: scale3d(1, 1, 1);
    }
    30% {
        transform: scale3d(1.25, 0.75, 1.1);
    }
    40% {
        transform: scale3d(0.75, 1.25, 1.2);
    }
    50% {
        transform: scale3d(1.15, 0.85, 1.3);
    }
    65% {
        transform: scale3d(.95, 1.05, 1.2);
    }
    75% {
        transform: scale3d(1.05, .95, 1.1);
    }
    100%{
        transform: scale3d(1, 1, 1);
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/b0/a2/pchBfzmF_o.gif" alt="img"></p> 
<p>说明</p> 
<p>设置transform属性值后，子元素会跟着父元素一起改变，若只改变父元素其他属性值时（如：height，width），子元素不会改变。</p> 
<h6><a id="matrix_3840"></a>设置matrix属性</h6> 
<p>matrix是一个入参为六个值的矩阵，6个值分别代表：scaleX, skewY, skewX, scaleY, translateX, translateY。下面示例中设置 了matrix属性为matrix(1,0,0,1,0,200)使组件移动和倾斜。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="rect"&gt; &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
  background-color:#F1F3F5;
  display: flex;
  justify-content: center;
  width: 100%;
  height: 100%;
}
.rect{
  width: 100px;
  height: 100px;
  background-color: red;
  animation: down 3s infinite forwards;
}
@keyframes down{
  0%{
    transform: matrix(1,0,0,1,0,0);
  }
  10%{
    transform: matrix(1,0,0,1,0,200);
  }
  60%{
    transform: matrix(2,1.5,1.5,2,0,700);
  }
  100%{
    transform: matrix(1,0,0,1,0,0);
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/e8/4e/IaoslEzB_o.gif" alt="img"></p> 
<h6><a id="transform_3884"></a>整合transform属性</h6> 
<p>transform可以设置多个值并且多个值可同时设置，下面案例中展示同时设置缩放（scale），平移（translate），旋转（rotate）属性时的动画效果。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="rect1"&gt;&lt;/div&gt;
  &lt;div class="rect2"&gt;&lt;/div&gt;
  &lt;div class="rect3"&gt;&lt;/div&gt;
  &lt;div class="rect4"&gt;&lt;/div&gt;
  &lt;div class="rect5"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container{
    width: 100%;
    height: 100%;
    flex-direction:column;
    background-color:#F1F3F5;
    padding:50px;
}
.rect1{
    width: 100px;
    height: 100px;
    background-color: red;
    animation: change1 3s infinite forwards;
}
.rect2{
    margin-top: 50px;
    width: 100px;
    height: 100px;
    background-color: darkblue;
    animation: change2 3s infinite forwards;
}
.rect3{
    margin-top: 50px;
    width: 100px;
    height: 100px;
    background-color: darkblue;
    animation: change3 3s infinite;
}
.rect4{
    align-self: center;
    margin-left: 50px;
    margin-top: 200px;
    width: 100px;
    height: 100px;
    background-color: darkmagenta;
    animation: change4 3s infinite;
}
.rect5{
    margin-top: 300px;
    width: 100px;
    height: 100px;
   background-color: cadetblue;
    animation: change5 3s infinite;
}
/* change1 change2 对比 */
@keyframes change1{
    0%{
        transform: translate(0,0);    transform: rotate(0deg)
    }
    100%{
        transform: translate(0,500px);
        transform: rotate(360deg)
    }
}
/* change2 change3 对比属性顺序不同的动画效果 */
@keyframes change2{
    0%{
        transform:translate(0,0) rotate(0deg) ;
    }
    100%{
        transform: translate(300px,0) rotate(360deg);
    }
}
@keyframes change3{
    0%{
        transform:rotate(0deg) translate(0,0);
    }
    100%{
        transform:rotate(360deg)  translate(300px,0);
    }
}
/* 属性值不对应的情况 */
@keyframes change4{
    0%{
        transform: scale(0.5);
    }
    100%{
        transform:scale(2) rotate(45deg);
    }
}
/* 多属性的写法 */
@keyframes change5{
    0%{
        transform:scale(0) translate(0,0) rotate(0);
    }
    100%{
        transform: scale(1.5) rotate(360deg) translate(200px,0);
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/69/3d/s6EiRjGO_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>当设置多个transform时，后续的transform值会把前面的覆盖掉。若想同时使用多个动画样式可用复合写法，例：transform: scale(1) rotate(0) translate(0,0)。</li><li>transform进行复合写法时，变化样式内多个样式值顺序的不同会呈现不一样的动画效果。</li><li>transform属性设置的样式值要一一对应，若前后不对应，则该动画不生效。若设置多个样式值则只会呈现出已对应值的动画效果。</li></ul> 
<h5><a id="backgroundposition_3999"></a>background-position样式动画</h5> 
<p>通过改变background-position属性（第一个值为X轴的位置，第二个值为Y轴的位置）移动背景图片位置，若背景图位置超出组件则超出部分的背景图不显示。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div class="content"&gt;&lt;/div&gt;
  &lt;div class="content1"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  height: 100%;
  background-color:#F1F3F5;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
}
.content{
  width: 400px;
  height: 400px;
  /* 不建议图片长宽比为1:1 */
  background-image: url('common/images/bg-tv.jpg');
  background-size: 100%;
  background-repeat: no-repeat;
  animation: change 3s infinite;
  border: 1px solid black;
}
.content1{
  margin-top:50px;
  width: 400px;
  height: 400px;
  background-image: url('common/images/bg-tv.jpg');
  background-size: 50%;
  background-repeat: no-repeat;
  animation: change1 5s infinite;
  border: 1px solid black;
}
/* 背景图片移动出组件 */
@keyframes change{
  0%{
    background-position:0px top;
  }
  25%{
    background-position:400px top;
  }
  50%{
    background-position:0px top;
  }
  75%{
    background-position:0px bottom;
  }
  100%{
    background-position:0px top;
  }
}
/* 背景图片在组件内移动 */
@keyframes change1{
  0%{
    background-position:left top;
  }
  25%{
    background-position:50% 50%;
  }
  50%{
    background-position:right bottom;
  }
  100%{
    background-position:left top;;
  }
}
</code></pre> 
<p>说明</p> 
<p>background-position仅支持背景图片的移动，不支持背景颜色（background-color）。</p> 
<p><img src="https://images2.imgbox.com/28/34/swYYw4FE_o.gif" alt="img"></p> 
<h5><a id="svg_4085"></a>svg动画</h5> 
<h6><a id="_4087"></a>属性样式动画</h6> 
<p>在Svg的子组件<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-svg-animate-0000001427744912-V2" rel="nofollow">animate</a>中，通过attributeName设置需要进行动效的属性，from设置开始值，to设置结束值。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg&gt;
    &lt;text x="300" y="300" fill="blue"&gt;
      Hello
      &lt;animate attributeName="font-size" from="30" to="60" dur="3s" repeatCount="indefinite"&gt;
      &lt;/animate&gt;
      &lt;animate attributeName="fill" from="red" to="blue" dur="3s" repeatCount="indefinite"&gt;
      &lt;/animate&gt;
      &lt;animate attributeName="opacity" from="1" to="0.3" dur="3s" repeatCount="indefinite"&gt;
      &lt;/animate&gt;
    &lt;/text&gt;
    &lt;text x="300" y="600" fill="blue"&gt;
      World
      &lt;animate attributeName="font-size" from="30" to="60" values="30;80" dur="3s" repeatCount="indefinite"&gt;
      &lt;/animate&gt;
      &lt;animate attributeName="fill" from="red" to="blue"  dur="3s" repeatCount="indefinite"&gt;
      &lt;/animate&gt;
      &lt;animate attributeName="opacity" from="0.3" to="1" dur="3s" repeatCount="indefinite"&gt;
      &lt;/animate&gt;
    &lt;/text&gt;
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<p><img src="https://images2.imgbox.com/ca/84/9rz0Sr3Y_o.gif" alt="img"></p> 
<p>说明</p> 
<p>在设置动画变化值时，如果已经设置了values属性，则from和to都失效。</p> 
<h6><a id="_4123"></a>路径动画</h6> 
<p>在Svg的子组件<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-svg-animatemotion-0000001478181505-V2" rel="nofollow">animateMotion</a>中，通过path设置动画变化的路径。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;svg fill="white" width="800" height="900"&gt;
    &lt;path d="M300,200 h-150 a150 150 0 1 0 150 -150 z" fill="white" stroke="blue" stroke-width="5" &gt;
    &lt;/path&gt;
    &lt;path fill="red" d="M-5,-5 L10,0 L-5,5 L0,0 Z"  &gt;
      &lt;animateMotion dur="2000" repeatCount="indefinite" rotate="auto-reverse"path="M300,200 h-150 a150 150 0 1 0 150 -150 z"&gt;
      &lt;/animateMotion&gt;
    &lt;/path&gt;
  &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<p><img src="https://images2.imgbox.com/23/28/qVWPIIvn_o.gif" alt="img"></p> 
<h6><a id="animateTransform_4143"></a>animateTransform动画</h6> 
<p>在Svg的子组件<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-components-svg-animatetransform-0000001478341241-V2" rel="nofollow">animateTransform</a>中，通过attributeName绑定transform属性，type设置动画类型，from设置开始值，to设置结束值。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container" style=""&gt;
    &lt;svg&gt;
        &lt;line x1="90" y1="300" x2="90" y2="730" stroke-width="10" stroke="black" stroke-linecap="round"&gt;
            &lt;animateTransform attributeName="transform" attributeType="XML" type="translate"  dur="3s" values="0;30;10;30;20;30;25;30" keyTimes="0;0.3;0.5;0.7;0.8;0.9;1.0;1.1"
                              fill="freeze"&gt;
            &lt;/animateTransform&gt;
        &lt;/line&gt;
        &lt;circle cx="500" cy="500" r="50" stroke-width="15" fill="red" stroke="#e70d0d"&gt;
            &lt;animateTransform attributeName="transform" attributeType="XML" type="rotate"  dur="3s" values="0;30;10;30;20;30;25;30" keyTimes="0;0.3;0.5;0.7;0.8;0.9;1.0;1.1" fill="freeze"&gt;
            &lt;/animateTransform&gt;
            &lt;animateTransform attributeName="transform" attributeType="XML" type="scale"  dur="6s" values="1;1;1.3" keyTimes="0;0.5;1" fill="freeze"&gt;&lt;/animateTransform&gt;
            &lt;animateTransform attributeName="transform" attributeType="XML" type="translate"  dur="9s" values="0;0;300 7" keyTimes="0;0.6;0.9" fill="freeze"&gt;&lt;/animateTransform&gt;
        &lt;/circle&gt;
        &lt;line x1="650" y1="300" x2="650" y2="600" stroke-width="20" stroke="blue" stroke-linecap="round"&gt;
            &lt;animateTransform attributeName="transform" attributeType="XML" type="translate"  dur="9s" values="0;0;0 800" keyTimes="0;0.6;1" fill="freeze"&gt;&lt;/animateTransform&gt;
        &lt;/line&gt;
    &lt;/svg&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 100%;
  background-color: #F1F3F5;
}
</code></pre> 
<p><img src="https://images2.imgbox.com/2c/ee/oiolpw0k_o.gif" alt="img"></p> 
<h5><a id="JS_4184"></a>JS动画</h5> 
<h6><a id="_4186"></a>组件动画</h6> 
<h6><a id="_4188"></a>获取动画对象</h6> 
<p>通过调用animate方法获得animation对象，animation对象支持动画属性、动画方法和动画事件。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div id="content" class="box" onclick="Show"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
}
.box{
  width: 200px;
  height: 200px;
  background-color: #ff0000;
  margin-top: 30px;
}
</code></pre> 
<pre><code>/* xxx.js */
export default {
  data: {
    animation: '',
  },
  onInit() {
  },
  onShow() {
    var options = {
      duration: 1500,
    };
    var frames = [
      {
        width:200,height:200,
      },
      {
        width:300,height:300,
      }
    ];
    this.animation = this.$element('content').animate(frames, options);  //获取动画对象
  },
  Show() {   
    this.animation.play();
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/cf/b8/WOtmxkBW_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>使用animate方法时必须传入Keyframes和Options参数。</li><li>多次调用animate方法时，采用replace策略，即最后一次调用时传入的参数生效。</li></ul> 
<h6><a id="_4250"></a>设置动画参数</h6> 
<p>在获取动画对象后，通过设置参数Keyframes设置动画在组件上的样式。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
   &lt;div id="content" class="box" onclick="Show"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}
.box{
  width: 200px;
  height: 200px;
  background-color: #ff0000;
  margin-top: 30px;
}
</code></pre> 
<pre><code>/* xxx.js */
export default {
  data: {
    animation: '',
    keyframes:{},
    options:{}
  },
  onInit() {
    this.options = {
      duration: 4000,
    }
    this.keyframes = [
    {
      transform: {
        translate: '-120px -0px',   
        scale: 1,        
        rotate: 0
        },   
        transformOrigin: '100px 100px',  
        offset: 0.0, 
        width: 200,  
        height: 200   
      }, 
      {
        transform: {      
          translate: '120px 0px',     
          scale: 1.5,     
          rotate: 90   
          },
          transformOrigin: '100px 100px',
          offset: 1.0,
          width: 300,
          height: 300   
      }    
    ]
  },
  Show() {
    this.animation = this.$element('content').animate(this.keyframes, this.options)
    this.animation.play()
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/e8/71/MPdbh0xx_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>translate、scale和rtotate的先后顺序会影响动画效果。</li><li>transformOrigin只对scale和rtotate起作用。</li></ul> 
<p>在获取动画对象后，通过设置参数Options来设置动画的属性。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
   &lt;div id="content" class="box" onclick="Show"&gt;&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
}
.box{
  width: 200px;
  height: 200px;
  background-color: #ff0000;
  margin-top: 30px;
}
</code></pre> 
<pre><code>/* xxx.js */
export default {
  data: {
    animation: '',
  },
  onInit() {
  },
  onShow() {
    var options = {      
        duration: 1500,      
        easing: 'ease-in',      
        delay: 5,      
        iterations: 2,      
        direction: 'normal',    
    };
    var frames = [
      {
        transform: {
          translate: '-150px -0px'
        }
      },
      {
        transform: {
          translate: '150px 0px'
        }
      }
    ];
    this.animation = this.$element('content').animate(frames, options);
  },
  Show() {
    this.animation.play();
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/2a/46/6cItna9g_o.gif" alt="img"></p> 
<p>说明</p> 
<p>direction：指定动画的播放模式。</p> 
<p>normal： 动画正向循环播放。</p> 
<p>reverse： 动画反向循环播放。</p> 
<p>alternate：动画交替循环播放，奇数次正向播放，偶数次反向播放。</p> 
<p>alternate-reverse：动画反向交替循环播放，奇数次反向播放，偶数次正向播放。</p> 
<h6><a id="_4404"></a>插值器动画</h6> 
<h6><a id="_4406"></a>创建动画对象</h6> 
<p>通过createAnimator创建一个动画对象，通过设置参数options来设置动画的属性。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;div style="width: 300px;height: 300px;margin-top: 100px;background: linear-gradient(pink, purple);transform: translate({<!-- -->{translateVal}});"&gt;
  &lt;/div&gt;
  &lt;div class="row"&gt;
    &lt;button type="capsule" value="play" onclick="playAnimation"&gt;&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  width:100%;
  height:100%;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
button{
  width: 200px;
}
.row{
  width: 65%;
  height: 100px;
  align-items: center;
  justify-content: space-between;
  margin-top: 50px;
  margin-left: 260px;
}
</code></pre> 
<pre><code>// xxx.js
import animator from '@ohos.animator';
export default {
  data: {
    translateVal: 0,
    animation: null
  },
  onInit() {},
  onShow(){
    var options = {
      duration: 3000,
      easing:"friction",
      delay:"1000",
      fill: 'forwards',
      direction:'alternate',
      iterations: 2,
      begin: 0,
      end: 180
    };//设置参数
    this.animation = animator.createAnimator(options)//创建动画
  },
  playAnimation() {
    var _this = this;
    this.animation.onframe = function(value) {
      _this.translateVal= value
    };
    this.animation.play();
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/65/ae/fq9CK2Yk_o.gif" alt="img"></p> 
<p>说明</p> 
<ul><li>使用createAnimator创建动画对象时必须传入options参数。</li><li>begin插值起点，不设置时默认为0。</li><li>end插值终点，不设置时默认为1。</li></ul> 
<h6><a id="_4483"></a>添加动画事件和调用接口</h6> 
<p>animator支持事件和接口，可以通过添加frame、cancel、repeat、finish事件和调用update、play、pause、cancel、reverse、finish接口自定义动画效果。animator支持的事件和接口具体见动画中的<a href="https://developer.huawei.com/consumer/cn/doc/development/harmonyos-references-V2/js-apis-animator-0000001428061932-V2" rel="nofollow">createAnimator</a>。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div style="flex-direction: column;align-items: center;width: 100%;height: 100%;"&gt;
  &lt;div style="width:200px;height: 200px;margin-top: 100px;background: linear-gradient(#b30d29, #dcac1b);
  transform: scale({<!-- -->{scaleVal}});"&gt;&lt;/div&gt;
  &lt;div style="width: {<!-- -->{DivWidth}};height: {<!-- -->{DivHeight}};margin-top: 200px;
  background: linear-gradient(pink, purple);margin-top: 200px;transform:translateY({<!-- -->{translateVal}});"&gt;
  &lt;/div&gt;
  &lt;div class="row"&gt;
    &lt;button type="capsule" value="play" onclick="playAnimation"&gt;&lt;/button&gt;
    &lt;button type="capsule" value="update" onclick="updateAnimation"&gt;&lt;/button&gt;
  &lt;/div&gt;
  &lt;div class="row1"&gt;
    &lt;button type="capsule" value="pause" onclick="pauseAnimation"&gt;&lt;/button&gt;
    &lt;button type="capsule" value="finish" onclick="finishAnimation"&gt;&lt;/button&gt;
  &lt;/div&gt;
  &lt;div class="row2"&gt;
    &lt;button type="capsule" value="cancel" onclick="cancelAnimation"&gt;&lt;/button&gt;
    &lt;button type="capsule" value="reverse" onclick="reverseAnimation"&gt;&lt;/button&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
button{
  width: 200px;
}
.row{
  width: 65%;
  height: 100px;
  align-items: center;
  justify-content: space-between;
  margin-top: 150px;
  position: fixed;
  top: 52%;
  left: 120px;
}
.row1{
  width: 65%;
  height: 100px;
  align-items: center;
  justify-content: space-between;
  margin-top: 120px;
  position: fixed;
  top: 65%;
  left: 120px;
}
.row2{
  width: 65%;
  height: 100px;
  align-items: center;
  justify-content: space-between;
  margin-top: 100px;
  position: fixed;
  top: 75%;
  left: 120px;
}
</code></pre> 
<pre><code>// xxx.js
import animator from '@ohos.animator';
import promptAction from '@ohos.promptAction';
export default {
  data: {
    scaleVal:1,
    DivWidth:200,
    DivHeight:200,
    translateVal:0,
    animation: null
  },
  onInit() {
    var options = {
      duration: 3000,
      fill: 'forwards',
      begin: 200,
      end: 270
    };
    this.animation = animator.createAnimator(options);
  },
  onShow() {
    var _this= this;
    //添加动画重放事件
    this.animation.onrepeat = function() {
      promptAction.showToast({
        message: 'repeat'
      });
      var repeatoptions = {
        duration: 2000,
        iterations: 1,
         direction: 'alternate',
         begin: 180,
         end: 240
       };
        _this.animation.update(repeatoptions);
        _this.animation.play();
      };
  },
  playAnimation() {
    var _this= this;
    //添加动画逐帧插值回调事件
    this.animation.onframe = function(value) {
      _this. scaleVal= value/150,
      _this.DivWidth = value,
      _this.DivHeight = value,
      _this.translateVal = value-180
    };
    this.animation.play();
  },
  updateAnimation() {
    var newoptions = {
      duration: 5000,
      iterations: 2,
      begin: 120,
      end: 180
    };
    this.animation.update(newoptions);
    this.animation.play();//调用动画播放接口
  },
  pauseAnimation() {
    this.animation.pause();//调用动画暂停接口
  },
  finishAnimation() {
    var _this= this;
   //添加动画完成事件
    this.animation.onfinish = function() {
      promptAction.showToast({
        message: 'finish'
      })
    };
    this.animation.finish(); //调用动画完成接口
  },
  cancelAnimation() {
    this.animation.cancel(); //调用动画取消接口
  },
  reverseAnimation() {
    this.animation.reverse(); //调用动画倒放接口
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/cd/65/vQxJ6QFW_o.gif" alt="img"></p> 
<p>说明</p> 
<p>在调用update接口的过程中可以使用这个接口更新动画参数，入参与createAnimator一致。</p> 
<h6><a id="_4635"></a>动画帧</h6> 
<h6><a id="_4637"></a>请求动画帧</h6> 
<p>请求动画帧时通过requestAnimationFrame函数逐帧回调，在调用该函数时传入一个回调函数。</p> 
<p>runframe在调用requestAnimationFrame时传入带有timestamp参数的回调函数step，将step中的timestamp赋予起始的startTime。当timestamp与startTime的差值小于规定的时间时将再次调用requestAnimationFrame，最终动画将会停止。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;tabs onchange="changecontent"&gt;
    &lt;tab-content&gt;
      &lt;div class="container"&gt;
        &lt;stack style="width: 300px;height: 300px;margin-top: 100px;margin-bottom: 100px;"&gt;
          &lt;canvas id="mycanvas" style="width: 100%;height: 100%;background-color: coral;"&gt;
          &lt;/canvas&gt;
          &lt;div style="width: 50px;height: 50px;border-radius: 25px;background-color: indigo;position: absolute;left: {<!-- -->{left}};top: {<!-- -->{top}};"&gt;
          &lt;/div&gt;
        &lt;/stack&gt;
        &lt;button type="capsule" value="play" onclick="runframe"&gt;&lt;/button&gt;
      &lt;/div&gt;
    &lt;/tab-content&gt;
  &lt;/tabs&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}
button{
  width: 300px;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data: {
    timer: null,
    left: 0,
    top: 0,
    flag: true,
    animation: null,
    startTime: 0,
  },
  onShow() {
    var test = this.$element("mycanvas");
    var ctx = test.getContext("2d");
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.lineTo(300, 300);
    ctx.lineWidth = 5;
    ctx.strokeStyle = "red";
    ctx.stroke();
  },
  runframe() {
    this.left = 0;
    this.top = 0;
    this.flag = true;
    this.animation = requestAnimationFrame(this.step);
  },
  step(timestamp) {
    if (this.flag) {
      this.left += 5;
      this.top += 5;
      if (this.startTime == 0) {
        this.startTime = timestamp;
      }
      var elapsed = timestamp - this.startTime;
        if (elapsed &lt; 500) {
          console.log('callback step timestamp: ' + timestamp);
          this.animation = requestAnimationFrame(this.step);
        }
      } else {
        this.left -= 5;
        this.top -= 5;
        this.animation = requestAnimationFrame(this.step);
      }
      if (this.left == 250 || this.left == 0) {
        this.flag = !this.flag
     }
    },
    onDestroy() {
      cancelAnimationFrame(this.animation);
    }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/46/c5/2j9EH6qB_o.gif" alt="img"></p> 
<p>说明</p> 
<p>requestAnimationFrame函数在调用回调函数时在第一个参数位置传入timestamp时间戳，表示requestAnimationFrame开始去执行回调函数的时刻。</p> 
<h6><a id="_4736"></a>取消动画帧</h6> 
<p>通过cancelAnimationFrame函数取消逐帧回调，在调用cancelAnimationFrame函数时取消requestAnimationFrame函数的请求。</p> 
<pre><code>&lt;!-- xxx.hml --&gt;
&lt;div class="container"&gt;
  &lt;tabs onchange="changecontent"&gt;
    &lt;tab-content&gt;
      &lt;div class="container"&gt;
        &lt;stack style="width: 300px;height: 300px;margin-top: 100px;margin-bottom: 100px;"&gt;
          &lt;canvas id="mycanvas" style="width: 100%;height: 100%;background-color: coral;"&gt;
          &lt;/canvas&gt;
          &lt;div style="width: 50px;height: 50px;border-radius: 25px;background-color: indigo;position: absolute;left: {<!-- -->{left}};top: {<!-- -->{top}};"&gt;
          &lt;/div&gt;
        &lt;/stack&gt;
        &lt;button type="capsule" value="play" onclick="runframe"&gt;&lt;/button&gt;
      &lt;/div&gt;
    &lt;/tab-content&gt;
  &lt;/tabs&gt;
&lt;/div&gt;
</code></pre> 
<pre><code>/* xxx.css */
.container {
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}
button{
  width: 300px;
}
</code></pre> 
<pre><code>// xxx.js
export default {
  data: {
    timer: null,
    left: 0,
    top: 0,
    flag: true,
    animation: null
  },
  onShow() {
    var test = this.$element("mycanvas");
    var ctx = test.getContext("2d");
    ctx.beginPath();
    ctx.moveTo(0, 0);
    ctx.lineTo(300, 300);
    ctx.lineWidth = 5;
    ctx.strokeStyle = "red";
    ctx.stroke();
  },
  runframe() {
    this.left = 0;
    this.top = 0;
    this.flag = true;
    this.animation = requestAnimationFrame(this.step);
  },
  step(timestamp) {
    if (this.flag) {
      this.left += 5;
      this.top += 5;
      this.animation = requestAnimationFrame(this.step);
    } else {
      this.left -= 5;
      this.top -= 5;
      this.animation = requestAnimationFrame(this.step);
    }
    if (this.left == 250 || this.left == 0) {
      this.flag = !this.flag
    }
  },
  onDestroy() {
    cancelAnimationFrame(this.animation);
  }
}
</code></pre> 
<p><img src="https://images2.imgbox.com/8f/e0/6eHxC6rF_o.gif" alt="img"></p> 
<p>说明</p> 
<p>在调用该函数时需传入一个具有标识id的参数。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3eef6539f89ebec7f9daf9b03a983d55/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">从0开始python学习-47.pytest框架之解决Template替换无法进行二次处理的问题之热加载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4137ea9d5f6aa7275b106b5ab266da6a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ceph、gluster、longhorn选型对比</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>