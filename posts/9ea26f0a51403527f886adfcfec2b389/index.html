<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Part6-1-2 uniapp - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Part6-1-2 uniapp" />
<meta property="og:description" content="[插件市场](https://ext.dcloud.net.cn/?orderBy=WeekDownload) 下载开发工具 [HBuilderX](https://www.dcloud.io/)
目录结构 应用配置 manifest.json manifest.json 是应用的配置文件，用于指定应用的名称、图标、权限等，我们也可以在这里为 Vue 为 H5 设置跨域拦截处理器
编译配置 vue.config.js vue.config.js 是一个可选的配置文件，如果项目的根目录中存在这个文件，那么它会被自动加载，一般用于配置 webpack 等编译选项
[官方文档](https://uniapp.dcloud.io/collocation/vue-config)
全局配置 page.json page.json 文件用来对 uni-app 进行全局配置，决定页面文件的路径、窗口样式、原生的导航栏、底部的原生 tabbar 等。它类似微信小程序中 app.json 的页面管理部分。
[官方文档](https://uniapp.dcloud.io/collocation/pages)
全局样式 uni.scss `uni.scss`文件的用途是为了方便整体控制应用的风格。比如按钮颜色、边框风格，`uni.scss`文件里预置了一批scss变量预置。[官方文档](https://uniapp.dcloud.io/collocation/uni-scss)
`uni-app` 官方扩展插件（uni ui）及 [插件市场](https://ext.dcloud.net.cn/) 上很多三方插件均使用了这些样式变量，如果你是插件开发者，建议你使用 scss 预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App。
`uni.scss`是一个特殊文件，在代码中无需 import 这个文件即可在scss代码中使用这里的样式变量。uni-app的编译器在webpack配置中特殊处理了这个 uni.scss，使得每个 scss 文件都被注入这个uni.scss，达到全局可用的效果。如果开发者想要less、stylus的全局使用，需要在vue.config.js中自行配置webpack策略。
主组件 App.vue `App.vue`是uni-app的主组件，所有页面都是在`App.vue`下进行切换的，是页面入口文件。但`App.vue`本身不是页面，这里不能编写视图元素。
这个文件的作用包括：调用应用生命周期函数、配置全局样式、配置全局的存储globalData
应用生命周期仅可在`App.vue`中监听，在页面监听无效。
入口文件 main.js main.js 是 uni-app 的入口文件，主要作用是初始化 vue 实例、定义全局组件、使用需要的插件，如vuex。
uniapp 开发规范及资源路径 1、开发规范约定
页面文件向导 Vue 单文件组件 (SFC) 规范" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9ea26f0a51403527f886adfcfec2b389/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-18T19:01:15+08:00" />
<meta property="article:modified_time" content="2021-11-18T19:01:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Part6-1-2 uniapp</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4><strong>[插件市场](https://ext.dcloud.net.cn/?orderBy=WeekDownload)</strong></h4> 
<p>下载开发工具 [HBuilderX](https://www.dcloud.io/)</p> 
<p></p> 
<h2>目录结构</h2> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/2f/84/xuDt33hC_o.jpg"></p> 
<h2></h2> 
<h2>应用配置 manifest.json</h2> 
<p> manifest.json 是应用的配置文件，用于指定应用的名称、图标、权限等，我们也可以在这里为 Vue 为 H5 设置跨域拦截处理器</p> 
<p></p> 
<h2>编译配置 vue.config.js</h2> 
<p>vue.config.js 是一个可选的配置文件，如果项目的根目录中存在这个文件，那么它会被自动加载，一般用于配置 webpack 等编译选项</p> 
<p>[官方文档](https://uniapp.dcloud.io/collocation/vue-config)</p> 
<p></p> 
<h2>全局配置 page.json</h2> 
<p>page.json 文件用来对 uni-app 进行全局配置，决定页面文件的路径、窗口样式、原生的导航栏、底部的原生 tabbar 等。它类似微信小程序中 app.json 的页面管理部分。</p> 
<p>[官方文档](https://uniapp.dcloud.io/collocation/pages)</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/4a/37/u8NcbaSc_o.jpg"></p> 
<p></p> 
<h2>全局样式 uni.scss </h2> 
<p>`uni.scss`文件的用途是为了方便整体控制应用的风格。比如按钮颜色、边框风格，`uni.scss`文件里预置了一批scss变量预置。[官方文档](https://uniapp.dcloud.io/collocation/uni-scss)</p> 
<p>`uni-app` 官方扩展插件（uni ui）及 [插件市场](https://ext.dcloud.net.cn/) 上很多三方插件均使用了这些样式变量，如果你是插件开发者，建议你使用 scss 预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App。</p> 
<p> `uni.scss`是一个特殊文件，在代码中无需 import 这个文件即可在scss代码中使用这里的样式变量。uni-app的编译器在webpack配置中特殊处理了这个 uni.scss，使得每个 scss 文件都被注入这个uni.scss，达到全局可用的效果。如果开发者想要less、stylus的全局使用，需要在vue.config.js中自行配置webpack策略。</p> 
<p></p> 
<h2>主组件 App.vue</h2> 
<p>`App.vue`是uni-app的主组件，所有页面都是在`App.vue`下进行切换的，是页面入口文件。但`App.vue`本身不是页面，这里不能编写视图元素。</p> 
<p>这个文件的作用包括：调用应用生命周期函数、配置全局样式、配置全局的存储globalData</p> 
<p>应用生命周期仅可在`App.vue`中监听，在页面监听无效。</p> 
<p></p> 
<h2>入口文件 main.js</h2> 
<p>main.js 是 uni-app  的入口文件，主要作用是初始化 vue 实例、定义全局组件、使用需要的插件，如vuex。</p> 
<p></p> 
<h2>uniapp 开发规范及资源路径</h2> 
<p><strong>1、开发规范约定</strong></p> 
<p>        页面文件向导 Vue 单文件组件 (SFC) 规范</p> 
<p>        组件标签靠近小程序规范，详见 uni-app 组件规范</p> 
<p>        互联能力 （JS API）靠近微信小程序规范，但需要将 wx 替换为 uni，详见 uni-app 接口规范</p> 
<p>        数据绑定及事件处理同 vue.js 规范，同时补充了 App 和 页面的生命周期</p> 
<p>        为兼容多端运行，建议使用 flex 布局进行开发</p> 
<p></p> 
<p><strong>2、资源路径说明</strong></p> 
<p>template 内使用静态资源，如 image, video等标签的 src 属性时，可以使用相对路径或绝对路径，形式如下：</p> 
<pre><code>```html
&lt;!-- 绝对路径，/static指根目录下的static目录，在cli项目中/static指src目录下的static目录 --&gt;
&lt;image class="logo" src="/static/logo.png"&gt;&lt;/image&gt;
&lt;image class="logo" src="@/static/logo.png"&gt;&lt;/image&gt;
&lt;!-- 相对路径 --&gt;
&lt;image class="logo" src="../../static/logo.png"&gt;&lt;/image&gt;
```</code></pre> 
<p style="text-align:center;"></p> 
<p> 注意：</p> 
<p>        @ 初始的绝对路径以及相对路径会通过 base64 转换规则校验</p> 
<p>        使用的静态资源在非 h5 平台，均不转为 base64</p> 
<p>        h5平台，小于 4kb 的资源会被转换成 base64，其余不转</p> 
<p></p> 
<p>js 文件或 script 标签内，可以使用相对路径和绝对路径，形式如下：</p> 
<pre><code>```js
// 绝对路径，@指向项目根目录，在cli项目中@指向src目录
import add from '@/common/add.js'
// 相对路径
import add from '../../common/add.js'
```</code></pre> 
<p style="text-align:center;"></p> 
<p>css 文件或 style 标签内，可以使用相对路径和绝对路径，形式如下：</p> 
<pre><code>```css
/* 绝对路径 */
@import url('/common/uni.css');
@import url('@/common/uni.css');
/* 相对路径 */
@import url('../../common/uni.css');
```</code></pre> 
<p style="text-align:center;"></p> 
<p>css 文件或 style 标签内引用的图片路径，可以使用相对路径，也可以使用绝对路径，形式如下：</p> 
<pre><code>```css
/* 绝对路径 */
background-image: url(/static/logo.png);
background-image: url(@/static/logo.png);
/* 相对路径 */
background-image: url(../../static/logo.png);
```</code></pre> 
<p style="text-align:center;"></p> 
<h2>UniAPP 生命周期 </h2> 
<p> `uni-app` 完整支持 `Vue` 实例的生命周期，</p> 
<p>同时还新增 [应用生命周期](https://uniapp.dcloud.io/frame?id=应用生命周期)</p> 
<p>及 [页面生命周期](https://uniapp.dcloud.io/frame?id=页面生命周期)。</p> 
<p><strong> （1）应用生命周期</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/27/ed/wOuYcfrw_o.jpg"></p> 
<p><strong>（2）页面生命周期 </strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ed/10/hyggPMAX_o.jpg"></p> 
<p></p> 
<h2>UniAPP 路由配置及页面跳转</h2> 
<p><strong>（1）路由配置</strong></p> 
<p>uni-app 页面路由全部交给**框架**统一管理，开发者需要在[pages.json](https://links.jianshu.com/goto=https%3A%2F%2Funiapp.dcloud.io%2Fcollocation%2Fpages%3Fid%3Dpages)里配置每个路由页面的路径及页面样式（类似小程序在 app.json 中配置页面路由）。</p> 
<p></p> 
<p><strong>pages.json</strong></p> 
<pre><code>"pages": [
		{
			"path": "pages/index",
			"style": {
				"navigationBarTitleText": "路由配置",
				"navigationBarBackgroundColor": "#FFFFFF",
				"navigationBarTextStyle": "black",
				"backgroundColor": "#FFFFFF",
				"enablePullDownRefresh": true
			}
		},
		{
			"path": "pages/user",
			"style": {
				"navigationBarTitleText": "路由配置",
				"navigationBarBackgroundColor": "#FFFFFF",
				"navigationBarTextStyle": "black",
				"backgroundColor": "#FFFFFF",
				"enablePullDownRefresh": true
			}
		}
]</code></pre> 
<p></p> 
<p><strong>（2）路由跳转</strong></p> 
<p>`uni-app` 有两种页面路由跳转方式：</p> 
<p>使用[navigator](https://uniapp.dcloud.io/component/navigator)组件跳转（标签式导航）、</p> 
<p>调用[API](https://uniapp.dcloud.io/api/router)跳转（编程式导航）</p> 
<p></p> 
<p><strong>编程式导航</strong></p> 
<pre><code>uni.navigateTo({
    url: '/pages/index/index'
})</code></pre> 
<p><strong>标签式导航</strong></p> 
<pre><code>&lt;navigator url="/pages/index/index"&gt;首页&lt;/navigator&gt;</code></pre> 
<p><strong>pages.json 设置 底部 tab</strong></p> 
<pre><code>"tabBar": {
		"color": "#7A7E83",
		"selectedColor": "#3cc51f",
		"borderStyle": "black",
		"backgroundColor": "#ffffff",
		"list": [{
			"pagePath": "pages/index/index",
			"iconPath": "static/tabbar-icons/wx.png",
			"selectedIconPath": "static/tabbar-icons/wx_s.png",
			"text": "微信"
		}, {
			"pagePath": "pages/list/list",
			"iconPath": "static/tabbar-icons/list.png",
			"selectedIconPath": "static/tabbar-icons/list_s.png",
			"text": "通讯录"
		}, {
			"pagePath": "pages/finder/finder",
			"iconPath": "static/tabbar-icons/find.png",
			"selectedIconPath": "static/tabbar-icons/find_s.png",
			"text": "发现"
		}, {
			"pagePath": "pages/me/me",
			"iconPath": "static/tabbar-icons/me.png",
			"selectedIconPath": "static/tabbar-icons/me_s.png",
			"text": "我"
		}]
	}</code></pre> 
<p><strong>切换tab</strong></p> 
<pre><code>uni.switchTab({
	url:'/pages/index/index'
})</code></pre> 
<p></p> 
<p>框架以栈的形式管理当前所有页面， 当发生路由切换的时候，页面栈的表现如下：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/32/b7/lSZKarXS_o.jpg"></p> 
<p></p> 
<p><strong>（3）获取当前页面栈</strong></p> 
<p>getCurrentPages() 函数用于获取当前页面栈的实例，以数组形式按栈的顺序给出，第一个元素为首页，最后一个元素为当前页面。</p> 
<p>`注意`： getCurrentPages() 仅用于展示页面栈的情况，请勿修改页面栈，以免造成页面状态错误。</p> 
<p></p> 
<p><strong>（4）路由传参与接收</strong></p> 
<p>说明：页面生命周期的 onLoad(）监听页面加载，其参数为上个页面传递的数据，如： </p> 
<pre><code>//页面跳转并传递参数
uni.navigateTo({
    url: 'page2?name=liy&amp;message=Hello'
});</code></pre> 
<p>url为将要跳转的页面路径 ，路径后可以带参数。参数与路径之间使用`?`分隔，参数键与参数值用`=`相连，不同参数用`&amp;`分隔。如 'path?key1=value2&amp;key2=value2'，path为下一个页面的路径，下一个页面的onLoad函数可得到传递的参数。</p> 
<pre><code>// 页面 2 接收参数
onLoad: function (option) { //option为object类型，会序列化上个页面传递的参数
	console.log(option.name); //打印出上个页面传递的参数。
	console.log(option.message); //打印出上个页面传递的参数。
}</code></pre> 
<p>`注意`：url 有长度限制，太长的字符串会传递失败，并且不规范的字符格式也可能导致传递失败，所以对于复杂参数建议使用 encodeURI、decodeURI 进行处理后传递</p> 
<p></p> 
<p><strong>（5）小程序路由分包配置</strong></p> 
<p>因小程序有体积和资源加载限制，各家小程序平台提供了分包方式，优化小程序的下载和启动速度。</p> 
<p>所谓的主包，即放置默认启动页面及 TabBar 页面，而分包则是根据 pages.json 的配置进行划分。</p> 
<p>在小程序启动时，默认会下载主包并启动主包内页面，当用户进入分包内某个页面时，会把对应分包自动下载下来，下载完成后再进行展示，此时终端界面会有等待提示。</p> 
<p></p> 
<p>创建 subpages 文件夹</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f8/c3/S53YK3N1_o.jpg"></p> 
<p> pages.json</p> 
<pre><code>"subPackages": [{
		"root": "subpages",
		"pages": [{
			"path": "news/news",
			"style": {
				"navigationBarTitleText": "新闻中心",
				"enablePullDownRefresh": false
			}
		}    
       ]
	}],



// 预下载分包设置
"preloadRule": {
		"pages/index": {
			"network": "all",
			"packages": ["activities"]
		}
}</code></pre> 
<p></p> 
<h2>UniAPP 常用组件简介</h2> 
<p>uni-app 为开发者提供了一系列基础组件，类似 HTML 里的基础标签元素，但 uni-app 的组件与 HTML 不同，而是与小程序相同，更适合手机端使用。</p> 
<p>虽然不推荐使用 HTML 标签，但实际上如果开发者写了`div`等标签，在编译到非H5平台时也会被编译器转换为 `view` 标签，类似的还有 `span` 转 `text`、`a` 转`navigator`等，包括 css 里的元素选择器也会转，但为了管理方便、策略统一，新写代码时仍然建议使用view等组件。</p> 
<p>开发者可以通过组合这些基础组件进行快速开发， 基于内置的基础组件，可以开发各种扩展组件，组件规范与vue组件相同。</p> 
<p></p> 
<h2>UniAPP 常用 API 简介</h2> 
<p>`uni-app`的 js 代码，h5 端运行于浏览器中，非 h5 端 Android 平台运行在 v8 引擎中，iOS 平台运行在 iOS 自带的 jscore 引擎中。所以，`uni-app`的 jsAPI 由标准 ECMAScript 的 js API 和 uni 扩展 API 这两部分组成。</p> 
<p>ECMAScript 由 Ecma 国际管理，是基础 js 语法。浏览器基于标准 js 扩充了window、document 等 js API；Node.js 基于标准 js 扩充了 fs 等模块；小程序也基于标准 js 扩展了各种 wx.xx、my.xx、swan.xx 的 API。</p> 
<p>标准 ecmascript 的 API 非常多，比如：console、settimeout等等。</p> 
<p>非 H5 端，虽然不支持 window、document、navigator 等浏览器的 js API，但也支持标准 ECMAScript。</p> 
<p>开发者不要把浏览器里的 js 等价于标准 js。</p> 
<p>所以 uni-app 的非 H5 端，一样支持标准 js，支持 if、for 等语法，支持字符串、数组、时间等变量及各种处理方法，仅仅是不支持浏览器专用对象。</p> 
<p></p> 
<p><strong>uni.chooseImage</strong></p> 
<p>选择相册图片或打开相机</p> 
<p>API --&gt;  媒体 --&gt;  图片</p> 
<p><strong>uni.pageScrollTo</strong></p> 
<p>指定滚动条滚动位置</p> 
<p><strong>uni.setStorageSync </strong></p> 
<p>持久化存储</p> 
<p>API --&gt; 数据缓存</p> 
<pre><code>uni.chooseImage({
					count: 1,
					sizeType: ['original', 'compressed'],
					sourceType: ['album', 'camera'],
					success: res =&gt; {
						console.log(res.tempFilePaths[0])
						
						uni.pageScrollTo({
							scrollTop: 999999,
							duration: 0
						})
						
						uni.setStorageSync('chatList', JSON.stringify(this.chatList))
						
					}
				})</code></pre> 
<p></p> 
<h2>UniAPP 自定义组件与通信</h2> 
<p><strong>（1）自定义组件概念</strong></p> 
<p>组件是 `vue` 技术中非常重要的部分，组件使得与ui相关的轮子可以方便的制造和共享，进而使得vue使用者的开发效率大幅提升，在项目的` component `目录下存放组件，`uni-app` 只支持 `vue` 单文件组件（.vue 组件）</p> 
<p>组件可以使用「全局注册」和「页面引入」两种方式进行使用，使用分为三步：</p> 
<p>导入 `import xxx from 'xxx'`</p> 
<p>注册 `Vue.use('xx',xx)` `components:{ xxx }`</p> 
<p>使用 ` &lt;xx /&gt;`</p> 
<p><strong>（2）父子组件通信</strong></p> 
<p>1. 父组件通过自定义属性向子组件传递数据</p> 
<p>2. 子组件通过 `props` 接收父组件传递的数据</p> 
<p></p> 
<p>1. 父组件通过自定义事件标签向子组件传递事件</p> 
<p>2. 子组件通过触发父组件定义事件方式修改父组件数据</p> 
<p></p> 
<p><strong>（3）slot 数据分发与作用域插槽</strong></p> 
<p>1. 父组件通过调用子组件内部嵌套 html 内容作为` slot `分发给子组件</p> 
<p>2. 子组件通过在 `slot` 标签上添加属性，向父组件通信数据，作用域插槽</p> 
<p></p> 
<p><strong>（4）全局事件定义及通信</strong></p> 
<p>1. 在整个应用的任何地方均可以使用` uni.$on `创建一个全局事件</p> 
<p>2. 在整个应用的任何地方也均可以使用 `uni.$emit` 来触发全局事件，实现多组件间的数据通信</p> 
<p></p> 
<h2>UniAPP Vuex 状态管理</h2> 
<p><strong>1. 概念</strong></p> 
<p>Vuex 是一个专为 Vue.js 应用程序开发的状态管理模式。它采用集中式存储管理应用的所有组件的状态，并以相应的规则保证状态以一种可预测的方式发生变化。</p> 
<p><strong>2. 应用场景</strong></p> 
<p>Vue多个组件之间需要共享数据或状态。</p> 
<p><strong>3. 关键规则</strong></p> 
<p>State：存储状态数据</p> 
<p>Getter：从状态数据派生数据，相当于 State 的计算属性</p> 
<p>Mutation：存储用于同步更改状态数据的方法，默认传入的参数为 state</p> 
<p>Action：存储用于异步更改状态数据，但不是直接更改，而是通过触发 Mutation 方法实现，默认参数为context</p> 
<p>Module：Vuex 模块化</p> 
<p><strong>4. 交互关系</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d2/4b/5ZTFRvY7_o.jpg"></p> 
<p></p> 
<p><strong>5. 使用方式</strong></p> 
<pre><code>&lt;template&gt;
	&lt;view&gt;
		&lt;text&gt;通讯录&lt;/text&gt;
		&lt;view&gt;{<!-- -->{userName}}&lt;/view&gt;
		&lt;view&gt;
			&lt;button type="default" @click="login('蜡笔小新')"&gt;登陆&lt;/button&gt;
			&lt;button type="default" @click="logout"&gt;退出&lt;/button&gt;
		&lt;/view&gt;
	&lt;/view&gt;
&lt;/template&gt;

&lt;script&gt;
	import {
		mapState,
		mapActions
	} from 'vuex' 
	export default {
		data() {
			return {
				
			}
		},
		onLoad(){
			
		},
		computed:{
			...mapState(['userName'])
		},
		methods: {
			...mapActions(['login', 'logout'])
		}
	}
&lt;/script&gt;

&lt;style&gt;

&lt;/style&gt;
</code></pre> 
<p></p> 
<h2>运行环境判断与跨端兼容</h2> 
<p><strong>（1）开发环境和生产环境</strong></p> 
<p>`uni-app` 可通过 `process.env.NODE_ENV` 判断当前环境是开发环境还是生产环境，一般用于连接测试服务器或生产服务器的动态切换。</p> 
<p>在HBuilderX 中，点击「运行」编译出来的代码是开发环境，点击「发行」编译出来的代码是生产环境</p> 
<pre><code>if(process.env.NODE_ENV === 'development'){
    console.log('开发环境')
}else{
    console.log('生产环境')
}</code></pre> 
<p><strong>（2）判断平台</strong></p> 
<p>平台判断有2种场景，一种是在编译期判断，一种是在运行期判断。</p> 
<p>编译期判断编译期判断，即[条件编译](https://uniapp.dcloud.io/platform)，不同平台在编译出包后已经是不同的代码</p> 
<pre><code>// #ifdef H5
  alert("只有h5平台才有alert方法")
// #endif
// 如上代码只会编译到H5的发行包里，其他平台的包不会包含如上代码。</code></pre> 
<p>运行期判断 运行期判断是指代码已经打入包中，仍然需要在运行期判断平台，此时可使用 `uni.getSystemInfoSync().platform` 判断客户端环境是 Android、iOS 还是小程序开发工具</p> 
<pre><code> switch(uni.getSystemInfoSync().platform){
    case 'android':
       console.log('运行Android上')
       break;
    case 'ios':
       console.log('运行iOS上')
       break;
    default:
       console.log('运行在开发者工具上')
       break;
 }</code></pre> 
<p><strong>（3）跨端兼容](https://uniapp.dcloud.io/platform?id=跨端兼容)</strong></p> 
<p>uni-app 已将常用的组件、JS API 封装到框架中，开发者按照 uni-app 规范开发即可保证多平台兼容，大部分业务均可直接满足，但每个平台有自己的一些特性，因此会存在一些无法跨平台的情况。</p> 
<p>大量写 if else，会造成代码执行性能低下和管理混乱。</p> 
<p>编译到不同的工程后二次修改，会让后续升级变的很麻烦。</p> 
<p>在 C 语言中，通过 #ifdef、#ifndef 的方式，为 windows、mac 等不同 os 编译不同的代码。</p> 
<p>`uni-app` 参考这个思路，为 `uni-app` 提供了条件编译手段，在一个工程里优雅的完成了平台个性化实现。</p> 
<p>条件编译是用特殊的注释作为标记，在编译时根据这些特殊的注释，将注释里面的代码编译到不同平台。</p> 
<p>**写法：**以 #ifdef 或 #ifndef 加 **%PLATFORM%** 开头，以 #endif 结尾。</p> 
<p>`\#ifdef`：if defined 仅在某平台存在</p> 
<p>`\#ifndef`：if not defined 除了某平台均存在</p> 
<p>**%PLATFORM%**：平台名称</p> 
<p>**%PLATFORM%** **可取值如下：**</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/1b/be/K001ewsn_o.jpg"></p> 
<p> </p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p>1</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ce9d886c35fd2c473523766aff8aa687/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android简单适配9.0~12.0</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a9802d5745cbda1a55772cc85e8b6334/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android——一个简单的闹钟APP</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>