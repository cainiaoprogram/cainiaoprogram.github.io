<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>初识Stable Diffusion - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="初识Stable Diffusion" />
<meta property="og:description" content="界面选项解读
这是在趋动云上部署的Stable Diffusion
txt2img prompt （1）分割符号：使用逗号 , 用于分割词缀，且有一定权重排序功能，逗号前权重高，逗号后权重低
（2）建议的通用范式：建议用以下归类的三大部分来准备相关提示词：前缀（画质词&#43;画风词&#43;镜头效果&#43;光照效果） &#43; 主体（人物&amp;对象&#43;姿势&#43;服装&#43;道具） &#43; 场景（环境&#43;细节）
（3）更改提示词权重：使用小括号（）增加模型对被括住提示词的注意 (提高权重)。用 (xxx: ) 语法形式来提升权重，其中 xxx 是你要强调的词 1.x 代表要提升的比例，如 1.5 就是提升 150% 的权重。权重取值范围 0.4-1.6，权重太小容易被忽视，太大容易拟合图像出错。例：(beautiful:1.3) 。叠加权重：通过叠加小括号方式提高权重，每加一层相当于提高1.1倍权重，例：((((beautiful eyes))))相当于(beautiful eyes: 1.1*1.1*1.1)
(PromptA:权重)：用于提高或降低该提示词的权重比例，注：数值大于1提高，小于1降低(PromptB)：PromptB的权重为1.1=(PromptA:1.1){PromptC}: PromptC的权重为1.05=(PromptB:1.05)[PromptD]: PromptD的权重减弱0.952=(PromptC:0.952)((PromptE)=(PromptE:1.1*1.1){{PromptF}}=(PromptF:1.05*1.05)[[PromptG]]=(PromptG:0.952*0.952) （4）调取 LoRA &amp; Hypernetworks 模型：使用尖括号 &lt;&gt; 调取LoRA或超网络模型。
按照下述形式输入：&lt;lora:filename:multiplier&gt; 或 &lt;hypernet:filename:multiplier&gt; 可调取相应模型，例：&lt;lora:cuteGirlMix4_v10:0.5&gt; 。
注：要先确保在【...\models\lora】或【...\models\hypernetworks】文件夹已保存好相关模型文件
（5）分布与交替渲染：使用方框号 [] 可应用较为复杂的分布与交替需求。
[A:B:step] 代表执行A效果到多少进度，然后开始执行B。例：[blue:red:0.4]，渲染蓝色到40%进度渲染红色。注：step &gt; 1 时表示该组合在前多少步时做为 A 渲染，之后作为 B 渲染。step &lt; 1 时表示迭代步数百分比。[A:0.5] 这样写的含义是从50%进度开始渲染A[A::step] 渲染到多少进度的时候去除A[A|B] A和B交替混合渲染 （6）反向提示词：反向提示词（Negative prompt），就是我们不想出现什么的描述。例：NSFW 不适合在工作时看的内容，包括限制级，还有低画质相关和一些容易变形身体部位的描述等。
注：在C站可下载一个叫 Easynegative 的文件，它的作用是把一些常用的反向提示词整合在一起了，让我们只需输入简单的关键词就能得到较好效果。把它放到 xxx/enbeddings 文件夹，需要触发时在 negative prompt 中输入 easynegative 即可生效。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/de723a8b347dfb9f75e1bd0a3bad37f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-22T17:53:09+08:00" />
<meta property="article:modified_time" content="2023-12-22T17:53:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">初识Stable Diffusion</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>界面选项解读</p> 
<p>这是在趋动云上部署的Stable Diffusion</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/69/1d/DRGVLojs_o.png" width="1200"></p> 
<h3>t<span style="color:#0d0016;">xt2img</span></h3> 
<h4 style="background-color:transparent;"><span style="color:#0d0016;">prompt</span></h4> 
<p><span style="color:#0d0016;">（1）<strong>分割符号：</strong>使用逗号 , 用于分割词缀，且有一定权重排序功能，逗号前权重高，逗号后权重低</span></p> 
<p><span style="color:#0d0016;">（2）<strong>建议的通用范式：</strong>建议用以下归类的三大部分来准备相关提示词：前缀（画质词+画风词+镜头效果+光照效果） + 主体（人物&amp;对象+姿势+服装+道具） + 场景（环境+细节）</span></p> 
<p><span style="color:#0d0016;">（3）<strong>更改提示词权重：</strong>使用小括号（）增加模型对被括住提示词的注意 (提高权重)。用 (xxx: ) 语法形式来提升权重，其中 xxx 是你要强调的词 1.x 代表要提升的比例，如 1.5 就是提升 150% 的权重。权重取值范围 0.4-1.6，权重太小容易被忽视，太大容易拟合图像出错。例：(beautiful:1.3) 。叠加权重：通过叠加小括号方式提高权重，每加一层相当于提高1.1倍权重，例：((((beautiful eyes))))相当于(beautiful eyes: 1.1*1.1*1.1)</span></p> 
<ul><li><span style="color:#0d0016;">(PromptA:权重)：用于提高或降低该提示词的权重比例，注：数值大于1提高，小于1降低</span></li><li><span style="color:#0d0016;">(PromptB)：PromptB的权重为1.1=(PromptA:1.1)</span></li><li><span style="color:#0d0016;">{PromptC}: PromptC的权重为1.05=(PromptB:1.05)</span></li><li><span style="color:#0d0016;">[PromptD]: PromptD的权重减弱0.952=(PromptC:0.952)</span></li><li><span style="color:#0d0016;">((PromptE)=(PromptE:1.1*1.1)</span></li><li><span style="color:#0d0016;">{<!-- -->{PromptF}}=(PromptF:1.05*1.05)</span></li><li><span style="color:#0d0016;">[[PromptG]]=(PromptG:0.952*0.952)</span></li></ul> 
<p><span style="color:#0d0016;">（4）<strong>调取 LoRA &amp; Hypernetworks 模型：</strong>使用尖括号 &lt;&gt; 调取LoRA或超网络模型。<br> 按照下述形式输入：<code>&lt;lora:filename:multiplier&gt;</code> 或 <code>&lt;hypernet:filename:multiplier&gt;</code> 可调取相应模型，例：&lt;lora:cuteGirlMix4_v10:0.5&gt; 。<br> 注：要先确保在【...\models\lora】或【...\models\hypernetworks】文件夹已保存好相关模型文件</span></p> 
<p><span style="color:#0d0016;">（5）<strong>分布与交替渲染：</strong>使用方框号 [] 可应用较为复杂的分布与交替需求。</span></p> 
<ul><li><span style="color:#0d0016;">[A:B:step] 代表执行A效果到多少进度，然后开始执行B。例：[blue:red:0.4]，渲染蓝色到40%进度渲染红色。注：step &gt; 1 时表示该组合在前多少步时做为 A 渲染，之后作为 B 渲染。step &lt; 1 时表示迭代步数百分比。</span></li><li><span style="color:#0d0016;">[A:0.5] 这样写的含义是从50%进度开始渲染A</span></li><li><span style="color:#0d0016;">[A::step] 渲染到多少进度的时候去除A</span></li><li><span style="color:#0d0016;">[A|B] A和B交替混合渲染</span></li></ul> 
<p><span style="color:#0d0016;">（6）</span><strong>反向提示词：</strong><span style="color:#0d0016;">反向提示词（Negative prompt），就是我们不想出现什么的描述。例：NSFW 不适合在工作时看的内容，包括限制级，还有低画质相关和一些容易变形身体部位的描述等。<br> 注：在C站可下载一个叫 Easynegative 的文件，它的作用是把一些常用的反向提示词整合在一起了，让我们只需输入简单的关键词就能得到较好效果。把它放到 xxx/enbeddings 文件夹，需要触发时在 negative prompt 中输入 easynegative 即可生效。</span></p> 
<p>（7）<strong>一些注意说明：</strong></p> 
<ol><li>AI 会按照 prompt 提示词输入的先后顺序和所分配权重来执行去噪工作；</li><li>AI 也会依照概率来选择性执行，如提示词之间有冲突，AI 会根据权重确定的概率来随机选择执行哪个提示词。</li><li>越靠前的 Tag 权重越大；比如景色Tag在前，人物就会小，相反的人物会变大或半身。</li><li>生成图片的大小会影响 Prompt 的效果，图片越大需要的 Prompt 越多，不然 Prompt 会相互污染。</li><li>Prompt 支持使用 emoji，且表现力较好，可通过添加 emoji 图来达到效果。如 形容喜欢表情， 可修手。</li><li>连接符号，使用 +, and, |, _ 都可连接描述词，但各自细节效果有所不同。</li></ol> 
<p>文章链接：<a href="https://zhuanlan.zhihu.com/p/619247417" rel="nofollow" title="【Stable Diffusion】Prompt 篇 - 知乎 (zhihu.com)">【Stable Diffusion】Prompt 篇 - 知乎 (zhihu.com)</a></p> 
<h4>采样器</h4> 
<p>先放结论：</p> 
<ol><li>如果只是想得到一些较为简单的结果，选用欧拉（Eular)或者Heun，并可适当减少Heun的步骤数以减少时间</li><li>对于侧重于速度、融合、新颖且质量不错的结果，建议选择：</li></ol> 
<ul><li>DPM++ 2M Karras， Step Range：20-30</li><li>UniPc, Step Range: 20-30</li></ul> 
<p>     3. 期望得到高质量的图像，且不关心图像是否收敛：</p> 
<ul><li>DPM ++ SDE Karras， Step Range：8-12</li><li>DDIM， Step Range：10-15</li></ul> 
<p>     4. 如果期望得到稳定、可重现的图像，避免采用任何祖先采样器</p> 
<h5><strong>Sampling steps</strong></h5> 
<p>增加采样步数，会缩小每一步的降噪幅度，有助于减少采样的截断误差</p> 
<p>每一步迭代都是基于前一步的图像进行细化，理论上步数越多，图像越精细。但是，过多的步数会导致资源消耗增加和生成速度变慢，而且在达到一定步数后，图像质量的提升会逐渐减少</p> 
<h5><strong>Sampling method</strong></h5> 
<h6 id="h_621083328_2">经典ODE求解器</h6> 
<ul><li>Euler采样器：欧拉采样方法。</li><li>Heun采样器：欧拉的一个更准确但是较慢的版本。</li><li>LMS采样器：线性多步法，与欧拉采样器速度相仿，但是更准确。</li></ul> 
<h6 id="h_621083328_3">祖先采样器</h6> 
<p>名称中带有a标识的采样器表示这一类采样器是祖先采样器。这一类采样器在每个采样步骤中都会向图像添加噪声，采样结果具有一定的随机性。</p> 
<ul><li>Euler a</li><li>DPM2 a</li><li>DPM++ 2S a</li><li>DPM++ 2S a Karras</li></ul> 
<p>由于这一类采样器的特性，图像不会收敛。因此为了保证重现性，例如在通过多帧组合构建动画时，应当尽量避免采用具有随机性的采样器。需要注意的是，部分采样器的名字中虽然没有明确标识属于祖先采样器，但也属于随机采样器。如果希望生成的图像具有细微的变化，推荐使用variation seed进行调整。</p> 
<h6 id="h_621083328_4">Karras</h6> 
<p>带有Karras字样的采样器，最大的特色是使用了Karras论文中建议的噪音计划表。主要的表现在于噪点步长在接近尾声时会更小，有助于图像的质量提升。</p> 
<h6 id="h_621083328_5">DDIM与PLMS（已过时，不再使用）</h6> 
<p>DDIM（去噪扩散隐式模型）和PLMS（伪线性多步方法）是伴随Stable Diffusion v1提出的采样方法，DDIM也是最早被用于扩散模型的采样器。PLMS是DDIM的一种更快的替代方案。当前这两种采样方法都不再广泛使用。</p> 
<h6 id="h_621083328_6">DPM与DPM++</h6> 
<p>DPM（扩散概率模型求解器）这一系列的采样器于2022年发布，代表了具有类似体系结构的求解器系列。</p> 
<p>由于DPM会自适应调整步长，不能保证在约定的采样步骤内完成任务，整体速度可能会比较慢。<strong>对Tag的利用率较高</strong>，在使用时建议适当放大采样的步骤数以获得较好的效果。</p> 
<p>DPM++是对DPM的改进，DPM2采用二阶方法，其结果<strong>更准确</strong>，但是相应的也会<strong>更慢</strong>一些。</p> 
<h6 id="h_621083328_7">UniPC</h6> 
<p>UniPC（统一预测校正器），一种可以在5-10个步骤中实现高质量图像生成的方法。</p> 
<h6 id="h_621083328_8">K-diffusion</h6> 
<p>用于指代Katherine Crowson's k-diffusion项目中实现的Karras 2022论文中提及的的相关采样器。当前常用的采样器中，除了DDIM、PLMS与UniPC之外的采样器均来自于k-diffusion</p> 
<h6>DPM++ Family</h6> 
<p>DPM++ SDE与DPM++ SDE Karras的收敛能力较差，图像的波动情况较为显著。</p> 
<p>DPM++ 2M与DPM++ 2M Karras表现较好，当步数足够大时，Karras方法收敛的更快。</p> 
<p>文章链接：<a href="https://zhuanlan.zhihu.com/p/621083328" rel="nofollow" title="Stable Diffusion-采样器篇 - 知乎 (zhihu.com)">Stable Diffusion-采样器篇 - 知乎 (zhihu.com)</a></p> 
<h4 style="background-color:transparent;">Hires.fix</h4> 
<p>提供了一个方便的选项，可以部分地以较低分辨率呈现图像，然后将其放大，最后在高分辨率下添加细节。换句话说，这相当于在txt2img中生成图像，通过自己选择的方法将其放大，然后在img2img中对现在已经放大的图像进行第二次处理，以进一步完善放大效果并创建最终结果。</p> 
<h4>Width&amp;Height</h4> 
<p>图像的宽度和高度直接决定了其尺寸和分辨率。更大的图像能够包含更多细节和信息，但同时也要求更高的处理能力和更长的生成时间</p> 
<h4>Batch count&amp;Batch size</h4> 
<p>这两个参数控制生成图像的数量和频率。通过调整它们，可以批量生成多个图像，提高效率。适当的批次数和数量设置可以帮助你更快地获取所需的图像，特别是在寻找那“完美一张”时</p> 
<h4>CFG Scale</h4> 
<p>CFG Scale参数控制提示词与生成图像之间的相关性。更高的数值意味着模型会更加专注于提示词的内容，生成更加符合描述的图像。这个参数对于调整生成图像的创意程度和精确度非常有用</p> 
<h4>Seed</h4> 
<p>种子值控制了图像生成的随机性。通过固定种子值，可以重现特定的图像结果，这对于复现喜欢的图像或进行微调非常有用</p> 
<p>文章链接：<a href="https://www.bilibili.com/read/cv28686842/" rel="nofollow" title="Stable Diffusion参数设置介绍看这一篇就够了 - 哔哩哔哩 (bilibili.com)">Stable Diffusion参数设置介绍看这一篇就够了 - 哔哩哔哩 (bilibili.com)</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/eddb9f3f056ee54f4c599fb45ca253ed/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">以良好的架构方式在亚马逊云科技上构建安全应用程序</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/99118c0b7905d509670825c6ad50a12c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Win系统修改Nginx配置结合内网穿透实现远程访问多个Web站点</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>