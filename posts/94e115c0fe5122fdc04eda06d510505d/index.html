<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>eCongnition 图像分割分类初学者保姆教程含多种工具介绍 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="eCongnition 图像分割分类初学者保姆教程含多种工具介绍" />
<meta property="og:description" content="易康，启动 首先打开它
在工具栏的1、2、3、4的那个工具那里我们选择4，这是四种不同的工作区，实测4最好用，大家尽可以试试123.然后点击第一个按钮create project，选择数据
给你的project一个名字。右侧勾选use geocooding就会考虑坐标系，不勾选就会当作普通图像处理，输出的结果就没有坐标系，再用arcgis开的时候就对不上。
subselect可以选取一部分图像来操作。
下面的框框可以remove掉一些不需要的数据，但是再insert的时候一加进来就会全部加进来，不能选加哪个波段。
然后ok打开它，这时候可以存一下这个project，以便这次没做完下次接着做，类似于arcgis的xmd文件。要和数据存在同一目录下，打开时选择工具栏第二个按钮open project，选择dpr后缀的文件就可以打开。
调整波段显示。
第一个按钮single layer gray就是单波段显示 ，点开倒数第二个可以看到是哪个波段。第二个可以开三波段rgb显示。第三个第四个按钮，加减就是顺次往后推一个或者往前推一个波段。比如本来是123，加一下就变成234。如果要具体调整还是要打开倒数第二个按钮，在下图右侧RGB那里调整。左下角可以调整拉升方法 。linear：所有数据拉到0~255，如果有极端值就会效果很差。但是一般用这个。
econgnition是没有toolbox的，在process tree里右键append new，所有的功能都在这里添加。
分割 首先用分割，推荐多尺度分割。这种方法会根据你的参数不断合并小的对象，合成大的对象。当合并以后方差超过我们设的阈值scale parameter的时候，就不合并。不超过就合并。这个阈值一般是多试几次试出来的。咱们先试个200。layer weight可以设置考虑多少个图层以及权重。levelname就是这一步操作的名字，咱们叫做seg200。最下面的shape0.1就是考虑形状和值的权重，数字越大shape权重越大，值的权重越小，一般形状的权重会小一些。compactness0.5是调整分割结果的形状破碎还是完整，越大越完整，越小越破碎。
点击excute就会直接执行，但是也可以点击ok先保存到咱们的process tree里，然后右键excute。可以选择任意时刻来执行你的任意操作。然后看看结果图发现很多东西都没分开哈哈哈说明parament太大了，小一点。首先删掉这一次的分割：
也可以在工具栏那个叉叉那里删：
然后把parament改成100再试试。可以双击或者右键上一个的那个seg200直接改，然后excute，也可以新建一个seg100
好像好多了。
这几个按钮可以调整显示，鼠标悬停可以看到显示的是什么东东，后文会说
分类 分割完以后就分类。
在这里右键给他新建几个类，右键空白处新建就可以，命名调颜色。
建好以后拖进去就可以变成二级类。调色永远很快乐哈哈哈
但是这里咱们不做复杂了，右键delete二级类。 还可以右键存一下这个类（如果十几个类很复杂并且以后还要用的话），然后load就可以加进来。
接下来给他训练样本。
点击这个water就可以开始选了。双击就会被选出来。如果你看起来跟我不一样，可能是因为之前那几个可以调整显示的按钮跟我按的不一样。
具体来说：
第一个是看该波段，第二个是看原始影像，第三个是看样本。马赛克那个是……就是马赛克。后面是显示轮廓、显示填充。我上面的图是显示轮廓。 选样本的时候，尽量在各个地方都选一些样本，选到一些长得不一样的。比如我的建筑类，可能包括看起来白白的商业用地，也可能有灰色的城中村，如果只选择到了其中一种，就可能造成分类误差。每一类尽量选50个以上，除非总量就很小，但是尽可能多。
如果想批量选择可以看这个：eCognition易康面向对象分类批量选择样本，批量导出shp_econgnition-CSDN博客
咱们进行一个样本的选。开432假彩色（在前文调整波段那里），选完记得存，工具栏第三个按钮
然后就
手动修改分类结果：最后一个工具manual editing toolbar。用法跟选样本一样（工具栏的那个选类别）。有一些建筑阴影分成了水体就可以手动改一下。
自动改：assign class将满足一定条件的对象变成另一个类。比如把面积小于150的water变成lake（新增一个lake）
精度评价 理论上需要一套跟训练样本不一样的验证样本。在sample菜单栏里delete all sample（这里最好备份一个project）。然后再select sample。这里有办法避免选取重复的样本，可以看这个：
econgnition选择面向对象的样本，输出shp并在arcmap里打开，随机平均分为训练样本和测试样本_econgnition选择某一类-CSDN博客
第三个是基于像素的，第四个是基于对象的。然后就会输出混淆矩阵。KIA就是kappa系数。OA一般用百分比表示，kappa一般小数。然后save statistic就可以保存成csv。如果使用基于对象的，可能会因为面积差太多而导致偏差，所以可以用基于像素的。但要用这个首先就要在sample里create TTA mask，相当于矢量转栅格，可以选下面的save保存成tiff。然后就可以用它了。
面积相差不大就可以用基于对象的，但用基于像素的肯定不会错。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/94e115c0fe5122fdc04eda06d510505d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-19T12:22:46+08:00" />
<meta property="article:modified_time" content="2023-10-19T12:22:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">eCongnition 图像分割分类初学者保姆教程含多种工具介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>易康，启动</h3> 
<p><img alt="" height="227" src="https://images2.imgbox.com/fd/23/5oEra40b_o.png" width="204"></p> 
<p>首先打开它</p> 
<p> <img alt="" height="193" src="https://images2.imgbox.com/77/f6/O9yav4Fy_o.png" width="306"></p> 
<p>在工具栏的1、2、3、4的那个工具那里我们选择4，这是四种不同的工作区，实测4最好用，大家尽可以试试123.然后点击第一个按钮create project，选择数据</p> 
<p><img alt="" height="449" src="https://images2.imgbox.com/4c/6a/9EXEo630_o.png" width="607"> <img alt="" height="604" src="https://images2.imgbox.com/a1/48/QaXwAm9p_o.png" width="441"></p> 
<p></p> 
<p> 给你的project一个名字。右侧勾选use geocooding就会考虑坐标系，不勾选就会当作普通图像处理，输出的结果就没有坐标系，再用arcgis开的时候就对不上。</p> 
<p>subselect可以选取一部分图像来操作。</p> 
<p>下面的框框可以remove掉一些不需要的数据，但是再insert的时候一加进来就会全部加进来，不能选加哪个波段。</p> 
<p>然后ok打开它，这时候可以存一下这个project，以便这次没做完下次接着做，类似于arcgis的xmd文件。要和数据存在同一目录下，打开时选择工具栏第二个按钮open project，选择dpr后缀的文件就可以打开。</p> 
<p><img alt="" height="377" src="https://images2.imgbox.com/33/90/pAsQosDS_o.png" width="212"></p> 
<p>调整波段显示。</p> 
<p><img alt="" height="77" src="https://images2.imgbox.com/63/b4/l38cuvJM_o.png" width="293"></p> 
<p>第一个按钮single layer gray就是单波段显示 ，点开倒数第二个可以看到是哪个波段。第二个可以开三波段rgb显示。第三个第四个按钮，加减就是顺次往后推一个或者往前推一个波段。比如本来是123，加一下就变成234。如果要具体调整还是要打开倒数第二个按钮，在下图右侧RGB那里调整。左下角可以调整拉升方法 。linear：所有数据拉到0~255，如果有极端值就会效果很差。但是一般用这个。</p> 
<p><img alt="" height="356" src="https://images2.imgbox.com/c6/8b/ejlVQhkQ_o.png" width="417"></p> 
<p>econgnition是没有toolbox的，在process tree里右键append new，所有的功能都在这里添加。</p> 
<p><img alt="" height="369" src="https://images2.imgbox.com/73/30/Iw9bsZcS_o.png" width="313"></p> 
<h3> 分割</h3> 
<p>首先用分割，推荐多尺度分割。这种方法会根据你的参数不断合并小的对象，合成大的对象。当合并以后方差超过我们设的阈值scale parameter的时候，就不合并。不超过就合并。这个阈值一般是多试几次试出来的。咱们先试个200。layer weight可以设置考虑多少个图层以及权重。levelname就是这一步操作的名字，咱们叫做seg200。最下面的shape0.1就是考虑形状和值的权重，数字越大shape权重越大，值的权重越小，一般形状的权重会小一些。compactness0.5是调整分割结果的形状破碎还是完整，越大越完整，越小越破碎。</p> 
<p><img alt="" height="285" src="https://images2.imgbox.com/c5/ff/21sblipy_o.png" width="452"></p> 
<p> 点击excute就会直接执行，但是也可以点击ok先保存到咱们的process tree里，然后右键excute。可以选择任意时刻来执行你的任意操作。然后看看结果图发现很多东西都没分开哈哈哈说明parament太大了，小一点。首先删掉这一次的分割：</p> 
<p><img alt="" height="263" src="https://images2.imgbox.com/bd/e1/4VWf3Bzl_o.png" width="417"></p> 
<p>也可以在工具栏那个叉叉那里删：</p> 
<p><img alt="" height="339" src="https://images2.imgbox.com/a0/b8/8Czz6UsR_o.png" width="264"></p> 
<p>然后把parament改成100再试试。可以双击或者右键上一个的那个seg200直接改，然后excute，也可以新建一个seg100</p> 
<p> <img alt="" height="261" src="https://images2.imgbox.com/46/b2/vDku0LRz_o.png" width="275"></p> 
<p>好像好多了。</p> 
<p><img alt="" height="88" src="https://images2.imgbox.com/a7/c1/PEpnRIiU_o.png" width="394"></p> 
<p>这几个按钮可以调整显示，鼠标悬停可以看到显示的是什么东东，后文会说</p> 
<h3>分类</h3> 
<p>分割完以后就分类。</p> 
<p><img alt="" height="195" src="https://images2.imgbox.com/cd/aa/TGttjwTg_o.png" width="306"></p> 
<p> 在这里右键给他新建几个类，右键空白处新建就可以，命名调颜色。</p> 
<p><img alt="" height="194" src="https://images2.imgbox.com/5d/52/gHDmXc2Q_o.png" width="157"></p> 
<p>建好以后拖进去就可以变成二级类。调色永远很快乐哈哈哈</p> 
<p>但是这里咱们不做复杂了，右键delete二级类。 还可以右键存一下这个类（如果十几个类很复杂并且以后还要用的话），然后load就可以加进来。</p> 
<p>接下来给他训练样本。</p> 
<p><img alt="" height="227" src="https://images2.imgbox.com/1a/f4/fa71fG40_o.png" width="470"></p> 
<p><img alt="" height="126" src="https://images2.imgbox.com/0c/04/9dIwlrly_o.png" width="123"></p> 
<p>点击这个water就可以开始选了。双击就会被选出来。如果你看起来跟我不一样，可能是因为之前那几个可以调整显示的按钮跟我按的不一样。</p> 
<p><img alt="" height="220" src="https://images2.imgbox.com/87/16/yqA5YKv6_o.png" width="434"></p> 
<p></p> 
<p> 具体来说：<img alt="" height="60" src="https://images2.imgbox.com/e2/fe/aLYpyxKW_o.png" width="287"></p> 
<p>第一个是看该波段，第二个是看原始影像，第三个是看样本。马赛克那个是……就是马赛克。后面是显示轮廓、显示填充。我上面的图是显示轮廓。 </p> 
<p>选样本的时候，尽量在各个地方都选一些样本，选到一些长得不一样的。比如我的建筑类，可能包括看起来白白的商业用地，也可能有灰色的城中村，如果只选择到了其中一种，就可能造成分类误差。每一类尽量选50个以上，除非总量就很小，但是尽可能多。</p> 
<p>如果想批量选择可以看这个：<a href="https://blog.csdn.net/qq_61845364/article/details/129546751?spm=1001.2014.3001.5501" title="eCognition易康面向对象分类批量选择样本，批量导出shp_econgnition-CSDN博客">eCognition易康面向对象分类批量选择样本，批量导出shp_econgnition-CSDN博客</a></p> 
<p>咱们进行一个样本的选。开432假彩色（在前文调整波段那里），选完记得存，工具栏第三个按钮</p> 
<p><img alt="" height="206" src="https://images2.imgbox.com/e1/61/IPiTeYaD_o.png" width="295"></p> 
<p>然后就</p> 
<p><img alt="" height="958" src="https://images2.imgbox.com/52/4d/jeiAAOIV_o.png" width="1200"></p> 
<p><img alt="" height="960" src="https://images2.imgbox.com/cc/93/GkF5X17h_o.png" width="1200"></p> 
<p> 手动修改分类结果：最后一个工具manual editing toolbar。用法跟选样本一样（工具栏的那个选类别）。有一些建筑阴影分成了水体就可以手动改一下。</p> 
<p>自动改：assign class将满足一定条件的对象变成另一个类。比如把面积小于150的water变成lake（新增一个lake）</p> 
<p><img alt="" height="967" src="https://images2.imgbox.com/41/da/Qv3aZwio_o.png" width="1200"></p> 
<p> <img alt="" height="960" src="https://images2.imgbox.com/07/6c/5FSb0tgo_o.png" width="1200"></p> 
<h3> 精度评价</h3> 
<p>理论上需要一套跟训练样本不一样的验证样本。在sample菜单栏里delete all sample（这里最好备份一个project）。然后再select sample。这里有办法避免选取重复的样本，可以看这个：</p> 
<p><a href="https://blog.csdn.net/qq_61845364/article/details/128320685?spm=1001.2014.3001.5501" title="econgnition选择面向对象的样本，输出shp并在arcmap里打开，随机平均分为训练样本和测试样本_econgnition选择某一类-CSDN博客">econgnition选择面向对象的样本，输出shp并在arcmap里打开，随机平均分为训练样本和测试样本_econgnition选择某一类-CSDN博客</a></p> 
<p><img alt="" height="274" src="https://images2.imgbox.com/40/24/OBUbdLfQ_o.png" width="232"></p> 
<p>第三个是基于像素的，第四个是基于对象的。然后就会输出混淆矩阵。KIA就是kappa系数。OA一般用百分比表示，kappa一般小数。然后save statistic就可以保存成csv。如果使用基于对象的，可能会因为面积差太多而导致偏差，所以可以用基于像素的。但要用这个首先就要在sample里create TTA mask，相当于矢量转栅格，可以选下面的save保存成tiff。然后就可以用它了。</p> 
<p>面积相差不大就可以用基于对象的，但用基于像素的肯定不会错。</p> 
<p><img alt="" height="386" src="https://images2.imgbox.com/cb/8d/d9V10ZRr_o.png" width="277"></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/02e6bad945f5222053faf25e7e963853/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android获取当前设备的内存和CPU使用情况</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9d414653edfa5b474a37cd416016e596/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MiniGPT-v2：多任务视觉模型新升级</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>