<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python基础四： python字符串操作与正则初探 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python基础四： python字符串操作与正则初探" />
<meta property="og:description" content="1. 写在前面 今天这篇文章整理python有关字符串的一些知识， 主要包括字符串的一些基本操作， 像字符串的翻转， 切片， 串联， 分割， 替换等。 然后再整理正则的一些基本知识。依然是从使用的角度， 并后期不断补充。
Ok, let’s go!
2. 字符串的基本操作 python字符串的基本操作还是有必要掌握的， 并且非常有用， 常见的像字符串的反转， 切片， 串联， 分割替换等。
s = &#39;python&#39; ##反转操作有两种方式 re = &#39;&#39;.join(reversed(s)) re1 = s[::-1] # &#39;nohtyp&#39; # 字符串的切片操作 # 在指定的索引处生成字符串 # FizzBuzz是一个简单的小游戏。游戏规则如下：从1开始往上数数， # 当遇到3的倍数的时候，说fizz，当遇到5的倍数，说buzz，当遇到15的倍数，就说fizzbuzz，其他情况下则正常数数。 java, python = &#39;fizz&#39;, &#39;buzz&#39; jl, pl = len(java), len(python) [str(java[i%3*jl:]&#43;python[i%5*pl:] or i) for i in range(1, 20)] # 这个写法牛逼 字符串的串联与分割， join和split可以看做一对互逆操作。
# join串联字符串 mystr = [&#39;I&#39;, &#39;love&#39;, &#39;python&#39;] res = &#39;_&#39;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ace04de0661ff81f221dd4823fee72a9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-07-13T08:22:16+08:00" />
<meta property="article:modified_time" content="2020-07-13T08:22:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python基础四： python字符串操作与正则初探</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1__0"></a>1. 写在前面</h3> 
<p>今天这篇文章整理python有关字符串的一些知识， 主要包括字符串的一些基本操作， 像字符串的翻转， 切片， 串联， 分割， 替换等。 然后再整理正则的一些基本知识。依然是从使用的角度， 并后期不断补充。<br> Ok, let’s go!</p> 
<h3><a id="2__4"></a>2. 字符串的基本操作</h3> 
<p>python字符串的基本操作还是有必要掌握的， 并且非常有用， 常见的像字符串的反转， 切片， 串联， 分割替换等。</p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token string">'python'</span>

<span class="token comment">##反转操作有两种方式</span>
re <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token builtin">reversed</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">)</span>
re1 <span class="token operator">=</span> s<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token comment"># 'nohtyp'</span>

<span class="token comment"># 字符串的切片操作   </span>
<span class="token comment"># 在指定的索引处生成字符串</span>
<span class="token comment"># FizzBuzz是一个简单的小游戏。游戏规则如下：从1开始往上数数，</span>
<span class="token comment"># 当遇到3的倍数的时候，说fizz，当遇到5的倍数，说buzz，当遇到15的倍数，就说fizzbuzz，其他情况下则正常数数。</span>

java<span class="token punctuation">,</span> python <span class="token operator">=</span> <span class="token string">'fizz'</span><span class="token punctuation">,</span> <span class="token string">'buzz'</span>

jl<span class="token punctuation">,</span> pl <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>java<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>python<span class="token punctuation">)</span>

<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">(</span>java<span class="token punctuation">[</span>i<span class="token operator">%</span><span class="token number">3</span><span class="token operator">*</span>jl<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token operator">+</span>python<span class="token punctuation">[</span>i<span class="token operator">%</span><span class="token number">5</span><span class="token operator">*</span>pl<span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">or</span> i<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token comment"># 这个写法牛逼</span>
</code></pre> 
<p>字符串的串联与分割， <code>join</code>和<code>split</code>可以看做一对互逆操作。</p> 
<pre><code class="prism language-python"><span class="token comment"># join串联字符串  </span>
mystr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'I'</span><span class="token punctuation">,</span> <span class="token string">'love'</span><span class="token punctuation">,</span> <span class="token string">'python'</span><span class="token punctuation">]</span>
res <span class="token operator">=</span> <span class="token string">'_'</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>mystr<span class="token punctuation">)</span>   <span class="token comment"># 下划线_连接mystr     'I_love_python'</span>

<span class="token comment"># 字符串分割split   根据指定的字符或者字符串   join和split可以看做一对互逆操作</span>
res<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span>    <span class="token comment"># ['I', 'love', 'python']</span>
</code></pre> 
<p>字符串的替换操作<code>replace</code></p> 
<pre><code class="prism language-python"><span class="token comment"># 替换replace</span>
<span class="token comment"># 把下面的小写o换成大写的O</span>
s <span class="token operator">=</span> <span class="token string">'i love python'</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'o'</span><span class="token punctuation">,</span> <span class="token string">'O'</span><span class="token punctuation">)</span>
s <span class="token comment"># 'i lOve pythOn'</span>
</code></pre> 
<p>判断串a是否是串b的子串</p> 
<pre><code class="prism language-python"><span class="token comment"># 法一：  使用in</span>
a <span class="token operator">=</span> <span class="token string">'our'</span>
b <span class="token operator">=</span> <span class="token string">'flour'</span>
a <span class="token keyword">in</span> b

<span class="token comment"># 法二： 使用find直接返回a的最小索引</span>
c <span class="token operator">=</span> <span class="token string">'mo'</span>
b<span class="token punctuation">.</span>find<span class="token punctuation">(</span>a<span class="token punctuation">)</span>      <span class="token comment"># 2</span>
b<span class="token punctuation">.</span>find<span class="token punctuation">(</span>c<span class="token punctuation">)</span>   <span class="token comment"># -1  表示没找到， 就不是子串</span>
</code></pre> 
<p><code>strip()</code>函数去掉字符串两段的空格</p> 
<pre><code class="prism language-python"><span class="token comment"># 去空格  清洗字符串时，位于字符串开始和结尾的空格，有时需要去掉，strip 方法能实现。</span>
a <span class="token operator">=</span> <span class="token string">'    \tI love python \b\n'</span>
a<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 'I love python \x08'</span>

<span class="token comment"># 字符串的字节长度</span>
<span class="token builtin">len</span><span class="token punctuation">(</span><span class="token string">'I love python'</span><span class="token punctuation">)</span>    <span class="token comment"># 13</span>
<span class="token builtin">len</span><span class="token punctuation">(</span><span class="token string">'我爱中国 '</span><span class="token punctuation">)</span>  <span class="token comment"># 5</span>
</code></pre> 
<h3><a id="3__67"></a>3. 正则初探</h3> 
<p>字符串封装的方法，处理一般的字符串操作，还能应付。但是，稍微复杂点的字符串处理任务，需要靠正则表达式，简洁且强大。</p> 
<p>首先， 要认识常用的元字符：</p> 
<ul><li><code>.</code>: 匹配除"\n"和"\r"之外的任何单个字符。</li><li><code>^</code>: 匹配字符串开始位置</li><li><code>$</code>: 匹配字符串中结束的位置</li><li><code>*</code>： 前面的原子重复0次、1次、多次</li><li><code>?</code>: 前面的原子重复0次或者1次</li><li><code>+</code>: 前面的原子重复1次或者多次</li><li><code>{n}</code>: 前面的原子出现了n次</li><li><code>{n,}</code>: 前面的原子至少出现n次</li><li><code>{n, m}</code>: 前面原子出现次数介于n-m之间</li><li><code>()</code>分组， 输出需要的部分</li></ul> 
<p>再认识常用的通用字符：</p> 
<ul><li><code>\s</code>: 匹配空白字符</li><li><code>\w</code>: 匹配任意字母/数字/下划线</li><li><code>\W</code>: 和小写w相反， 匹配任意字母/数字/下划线以外的字符</li><li><code>\d</code>: 匹配十进制数字</li><li><code>\D</code>: 匹配除了十进制以外的值</li><li><code>[0-9]</code>: 匹配一个0-9之间的数字</li><li><code>[a-z]</code>: 匹配小写英文字母</li><li><code>[A-Z]</code>: 匹配大写英文字母</li></ul> 
<p>正则表达式，常会涉及到以上这些元字符或通用字符，下面通过 14 个细分的与正则相关的小功能，讨论正则表达式。<br><br>首先先导入包：<code>import re</code></p> 
<h4><a id="31_searchmatch_94"></a>3.1 search和match</h4> 
<p>search方法， 找到子串中第一个匹配的位置， 在字符串的任意位置进行匹配， 而match方法啊， 只在原字符串的开始位置匹配。</p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token string">'flourish'</span>

<span class="token comment"># 寻找模式串our, 使用match方法</span>
recom <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">'our'</span><span class="token punctuation">)</span>
m <span class="token operator">=</span> recom<span class="token punctuation">.</span>match<span class="token punctuation">(</span>s<span class="token punctuation">)</span>   <span class="token comment"># # 返回 None，找不到匹配, 这是因为match只能匹配以our开头的字符串， 比如ourself</span>
<span class="token builtin">type</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>

<span class="token comment"># search方法</span>
res <span class="token operator">=</span> recom<span class="token punctuation">.</span>search<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
res<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># OK, 匹配成功，our 在原字符串的起始索引为 2  (2, 5)</span>

s1 <span class="token operator">=</span> <span class="token string">'ourselfves'</span>

recom <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span><span class="token string">'our'</span><span class="token punctuation">)</span>  <span class="token comment"># 编译一个正则表达式模式，返回一个模式对象</span>
m <span class="token operator">=</span> recom<span class="token punctuation">.</span>match<span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
m<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="32_finditer_116"></a>3.2 finditer匹配迭代器</h4> 
<p>使用正则模块，<code>finditer</code> 方法，返回所有子串匹配位置的迭代器。 通过返回的对象 re.Match，使用它的方法 <code>span()</code> 找出匹配位置。</p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token string">'hello world hello how are you helloool'</span>
pat <span class="token operator">=</span> <span class="token string">'hello'</span>

r <span class="token operator">=</span> re<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>pat<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> r<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">## 结果   三个hello的起始和终止字符位置</span>
<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>    
<span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="33_findall_132"></a>3.3 findall所有匹配</h4> 
<p>正则模块，<code>findall</code> 方法能查找出子串的所有匹配。</p> 
<pre><code class="prism language-python"><span class="token comment"># 我这里有个字符串， 目标时找出所有数字</span>
s <span class="token operator">=</span> <span class="token string">'一共20行代码运行时间13.59s'</span>

pat <span class="token operator">=</span> r<span class="token string">'\d+'</span>     <span class="token comment"># 这个表示找里面的数字</span>
r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pat<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>     <span class="token comment"># 找到了['20', '13', '59'],  但是我们期望找到[20, 13.59]</span>
</code></pre> 
<p>所以上面我们的正则表达式写法有点问题， 可以简单分析一下， 如果找出上面的20和13.50呢？</p> 
<p>案例1： <strong>匹配浮点数和整数</strong></p> 
<ul><li><code>?</code>: 表示前一个字符匹配0次或者1次</li><li><code>.?</code>: 表示匹配小数点0次或者1次</li></ul> 
<p>匹配浮点数和整数的第一版正则表达式： <code>r'\d+\.?\d+'</code><br> <img src="https://images2.imgbox.com/4d/ee/NrgtefRv_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python"><span class="token comment"># 所以需要修改正则表达式</span>
s <span class="token operator">=</span> <span class="token string">'一共20行代码运行时间13.59s'</span>

pat <span class="token operator">=</span> r<span class="token string">'\d+\.?\d+'</span>
r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pat<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
r <span class="token comment"># ['20', '13.59']</span>
</code></pre> 
<p>但是上面这种写法有个问题， 由于出现了两个\d+， 这个表示至少有一位数字， 因此上面的表达式至少匹配两位数。 所以需要把后面的+改成*。<br> <img src="https://images2.imgbox.com/bb/2f/6YxvZ8DM_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token string">'一共2行代码运行时间13.59s'</span>

pat <span class="token operator">=</span> r<span class="token string">'\d+\.?\d+'</span>
r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pat<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
r      <span class="token comment"># 13.59</span>

pat1 <span class="token operator">=</span> r<span class="token string">'\d+\.?\d*'</span>
r1 <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>pat1<span class="token punctuation">,</span> s<span class="token punctuation">)</span>
r1    <span class="token comment"># ['2', '13.59']</span>
</code></pre> 
<p>案例二： <strong>匹配所有正整数</strong><br> 下面三种方式， 先分析一下哪个正确：</p> 
<ul><li><code>^\d*$</code>: 这个会匹配到0</li><li><code>^[1-9]</code>*: 会匹配到1.的1， 不是完全匹配</li><li><code>^[1-9]\d*$</code>: 这个是正确的<br> <img src="https://images2.imgbox.com/7e/f7/efC5O2bA_o.png" alt="在这里插入图片描述"><br> 代码如下：<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">11.43</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
pat <span class="token operator">=</span> r<span class="token string">'^[1-9]\d*$'</span>
<span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> s <span class="token keyword">if</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span>pat<span class="token punctuation">,</span> <span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>   <span class="token comment"># [10, 5]</span>
</code></pre> </li></ul> 
<h4><a id="34_reI__186"></a>3.4 re.I 忽略大小写</h4> 
<p>查找字符串中字符位置的时候， <code>re.I</code>是方法的可选参数， 表示忽略大小写</p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token string">'That'</span>
pat <span class="token operator">=</span> r<span class="token string">'t'</span>

r <span class="token operator">=</span> re<span class="token punctuation">.</span>finditer<span class="token punctuation">(</span>pat<span class="token punctuation">,</span> s<span class="token punctuation">,</span> re<span class="token punctuation">.</span>I<span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> r<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>i<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment"># (0,1) (3,4)</span>
</code></pre> 
<h4><a id="35_split_197"></a>3.5 split分割单词</h4> 
<p>正则模块中 <code>split</code> 函数强大，能够处理复杂的字符串分割任务。如果一个规则简单的字符串， 直接使用字符串的<code>split</code>函数</p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token string">'id\tname\taddress'</span>

<span class="token comment"># 根据字符串\t分割</span>
s<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'\t'</span><span class="token punctuation">)</span>      <span class="token comment"># ['id', 'name', 'address']</span>
</code></pre> 
<p>字符串中的split函数只能处理一些简单的分割操作， 对于复杂的字符串， 就需要用到正则里面的split。</p> 
<pre><code class="prism language-python"><span class="token comment"># 但是对于复杂的字符串， split函数就不行了</span>
s <span class="token operator">=</span> <span class="token string">'This,,,   module ; \t   provides|| regular;'</span>

<span class="token comment"># 这个如果要出单词来的话， 就得研究研究字符串的规则了。 每个单词用了不同的符号进行分割， 并且有的出现还不止一次</span>
<span class="token comment"># 所以得用个正则表达式匹配这些符号  看一下有[,\s;|]这是那些字符，\s表示空字符。 有的还不止出现一次， 那么就是[,\s;|] +</span>
words <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'[,\s;|]+'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>
words   <span class="token comment"># ['This', 'module', 'provides', 'regular', '']</span>
</code></pre> 
<h4><a id="36_sub_217"></a>3.6 sub替换字符串</h4> 
<p>正则模块，sub 方法，替换匹配到的子串。</p> 
<pre><code class="prism language-python">content <span class="token operator">=</span> <span class="token string">'hello 1234, hello 1234'</span>
pat <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">'\d+'</span><span class="token punctuation">)</span>     <span class="token comment"># 表示一位或者多位的十进制数</span>
m <span class="token operator">=</span> pat<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'555'</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
m        <span class="token comment"># 'hello 555, hello 555'</span>
</code></pre> 
<h4><a id="37_compile_226"></a>3.7 compile预编译</h4> 
<p>如果要用同一匹配模式， 做很多次匹配， 可以使用compile预先编译串。</p> 
<p>案例：<strong>从一系列字符串中，挑选出所有正浮点数</strong>。</p> 
<p>正则表达式为：<code>^[1-9]\d.\d|0.\d*[1-9]\d*$</code>，字符 a|b 表示 a 串匹配失败后，才执行 b 串，正则分解图见下：<br> <img src="https://images2.imgbox.com/d9/2a/JmVwRla8_o.png" alt="在这里插入图片描述"><br> 代码如下：</p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token string">'good'</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token string">'11.43'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'5e10'</span><span class="token punctuation">,</span> <span class="token number">.8</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token string">'0.0'</span><span class="token punctuation">]</span>

rec <span class="token operator">=</span> re<span class="token punctuation">.</span><span class="token builtin">compile</span><span class="token punctuation">(</span>r<span class="token string">'^[1-9]*\.\d*|0\.\d*[1-9]\d*$'</span><span class="token punctuation">)</span>

<span class="token punctuation">[</span>i <span class="token keyword">for</span> i <span class="token keyword">in</span> s <span class="token keyword">if</span> rec<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token comment"># [1.5, 0.2, '11.43', 0.8, 8.0]  </span>
</code></pre> 
<h4><a id="38__242"></a>3.8 贪心捕获</h4> 
<p>正则模块中，根据某个模式串，匹配到结果。</p> 
<pre><code class="prism language-python">content <span class="token operator">=</span> <span class="token triple-quoted-string string">"""&lt;h&gt;ddedadsad&lt;/h&gt;&lt;div&gt;graph&lt;/div&gt;&lt;div&gt;dafaf&lt;/div&gt;&lt;div&gt;math&lt;/div&gt;"""</span>

<span class="token comment"># 下面匹配&lt;div&gt;标签里的内容</span>
result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>r<span class="token string">'&lt;div&gt;.*&lt;/div&gt;'</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
result   <span class="token comment"># ['&lt;div&gt;graph&lt;/div&gt;&lt;div&gt;dafaf&lt;/div&gt;&lt;div&gt;math&lt;/div&gt;']</span>

<span class="token comment"># 如果不想保留开始和结尾的&lt;div&gt;&lt;/div&gt;, 需要用一对()去捕获</span>
result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>r<span class="token string">'&lt;div&gt;(.*)&lt;/div&gt;'</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
result        <span class="token comment"># 少了两头的&lt;div&gt;&lt;/div&gt; </span>
</code></pre> 
<p><code>(.*)</code> 表示捕获任意多个字符， 尽可能多的匹配字符， 也被称为贪心捕获。 <code>.</code>表示匹配除换行外的任意字符。 所以上面的结果中，会把<code>div、/div</code>也看成字符<br> <img src="https://images2.imgbox.com/0f/d6/mmfF7nLJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="39__258"></a>3.9 非贪心捕获</h4> 
<p>上面如果只想得到<code>&lt;div&gt;&lt;/div&gt;</code>中间的内容， 可以使用非贪心捕获。</p> 
<pre><code class="prism language-python">result <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>r<span class="token string">'&lt;div&gt;(.*?)&lt;/div'</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>
result   <span class="token comment"># ['graph', 'dafaf', 'math']</span>
</code></pre> 
<p><code>(.*?)</code>: 被称为非贪心捕获， 加了个问号， 就表示着要捕捉前面的这种模式0次或者多次， 这时候<code>()</code>分组的时候，就把<code>div, /div</code>分成了一组， 里面的内容分成了一组。 可以和上面的贪心对比一下， 上面的贪心在分组的时候， 只把最外面的一组<code>div, /div</code>单独分成了一组。</p> 
<p>下面对比一下贪心捕获和非贪心捕获：</p> 
<pre><code class="prism language-python">s <span class="token operator">=</span> <span class="token string">'abcabdecd'</span>
res <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>r<span class="token string">'ab.*?c'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span> <span class="token comment"># 非贪婪</span>
res1 <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span>r<span class="token string">'ab.*c'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>  <span class="token comment"># 贪婪</span>
res  <span class="token comment"># ['abc', 'abdec']</span>
<span class="token comment">#res1  # ['abcabdc']</span>
</code></pre> 
<p>感觉贪婪搜索想一遍找完尽可能多的， 而非贪婪搜索多次找尽可能少的。</p> 
<blockquote> 
 <p>比如上面这个例子， 贪婪搜索的匹配过程是看到了前两个字符ab, 然后看到了第一个c， 做个标记，这时候其实匹配成功， 但是它不死心， 依然往后找， 想看看还有没有c， 这样能匹配更多的字符， 结果看到了后面的c， 挺高兴，做个标记，但依然不死心，还往后找， 发现后面没有能匹配的了，所以就返回来了上次做标记的那一串。但这样也比单纯的abc长。<br> <br>非贪婪搜索是这样的： 从头开始看到了ab, 然后又看到了c很知足了，先返回来一个结果abc, 然后再从返回的这个地方再往后找， 又看到了ab，再往后看到了c， 又符合规则， 再返回一个结果来abdc, 再从返回的地方往后找发现没了，结束。</p> 
</blockquote> 
<p><a href="https://regex101.com/" rel="nofollow">https://regex101.com/</a> 这个网站上输入字符串， 输入写的正则表达式就可以匹配出字符，这样就能看到自己写的正则表达式是不是正确</p> 
<h3><a id="3_pythonstring_281"></a>3. python的string模块</h3> 
<p>这里面有一些非常常用的字符长处理函数和方法， 如果知道的话，对于日常的应用还是非常方便的。这里记录一些常用方法和常用的字符串常量。</p> 
<h4><a id="31__284"></a>3.1 常用方法</h4> 
<p>查找：</p> 
<ul><li><code>str.count(s)</code> 返回字符串s在str中出现的次数</li><li><code>str.endswith(s)</code> 判断字符串str是否以字符串s结尾</li><li><code>str.find(s)</code> 返回字符串s在字符串str中的位置索引，没有则返回-1</li><li><code>str.index(s)</code> 和find()方法一样，但是如果s不存在于str中则会抛出异常</li><li><code>str.rfind(s)</code> 类似于 find()函数，不过是从右边开始查找</li><li><code>str.rindex(s)</code> 类似于 index()，不过是从右边开始</li></ul> 
<p>判断：</p> 
<ul><li><code>str.isalnum()</code> 如果str至少有一个字符并且都是字母或数字则返回True,否则返回False</li><li><code>str.isalpha()</code> 如果str至少有一个字符并且都是字母则返回True,否则返回False</li><li><code>str.isdigit()</code> 如果str只包含数字则返回 True 否则返回 False</li><li><code>str.islower()</code> 如果str存在区分大小写的字符，并且都是小写则返回True 否则返回False</li><li><code>str.isupper()</code> 如果str存在区分大小写的字符，并且都是大写则返回True 否则返回False</li></ul> 
<p>转换：</p> 
<ul><li><code>str.capitalize()</code> 把字符串的首字母大写</li><li><code>str.lower()</code> 转换str中所有大写字符为小写</li><li><code>str.upper()</code> 返回str所有字符为大写的字符串</li><li><code>str.lstrip()</code> 去掉str左边的不可见字符</li><li><code>str.strip()</code> 等于同时执行rstrip()和lstrip()</li><li><code>str.replace(a, b)</code> 将字符串str中的a替换成b</li></ul> 
<p>切分：</p> 
<ul><li><code>str.split(s)</code> 以s为分隔符切片str</li><li><code>str.partition(s)</code> 用s将str切分成三个值</li></ul> 
<h4><a id="32__311"></a>3.2 字符串常量</h4> 
<ul><li><code>string.ascii_lowercase</code> 小写字母’abcdefghijklmnopqrstuvwxyz’</li><li><code>string.ascii_uppercase</code> 大写的字母’ABCDEFGHIJKLMNOPQRSTUVWXYZ’</li><li><code>string.digits</code> 数字0到9的字符串:’0123456789’</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f3fc429f85801133622362d75b05faf8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">分布式定时任务-XXLJOB</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2646c2441311e95f5a5b729ab72dee5b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">从入门到入土（九）手摸手教你搭建RocketMQ双主双从同步集群，不信学不会！...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>