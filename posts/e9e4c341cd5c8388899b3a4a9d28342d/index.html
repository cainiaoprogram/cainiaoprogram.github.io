<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>静态路由详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="静态路由详解" />
<meta property="og:description" content="目录
一，静态路由中的相关配置
查看路由表中路由信息
查看路由表中是由静态写的路由
查看路由器的端口的ip情况
手写静态路由：
创建回环接口和配置地址
配置缺省路由
配置空接口
配置浮动静态路由
二，名词解释
1.路由
2.路由器的工作原理
3.路由器生成路由条的方法：
4.获取未知网段的方法：
5.次优路径
6.负载均衡
7.回环接口
8.手工汇总——子网汇总
9.路由黑洞（黑洞路由）
10.缺省路由(默认路由)
11.空接口
12.浮动静态路由
13.VLSM--无类域间路由(子网划分)
做法：通过借用主机位来充当网络位
14.CIDR(子网汇总)
15.代理ARP
16.ICMP重定向
一，静态路由中的相关配置 查看路由表中路由信息 [r1]display ip routing-table
查看路由表中是由静态写的路由 [r1]display ip routing-table protocol static 查看路由器的端口的ip情况 [Huawei]display ip interface brief 手写静态路由： MA网络中：
[ri] ip route-static 192.168.3.0 24 192.168.2.2
目标网路号 下一跳
点到点网络中
[ri] ip route-static 192.168.3.0 24 192.168.2.2
目标网路号 出接口
写法区别：
建议在MA网络中使用下一跳写法：在点到点网络中使用出接口写法
MA：一个网段中节点的数量不限制----以太网
点到点：一个网段中只能有两个节点
1.若在MA网络中使用了出接口写法
设备为获取下一跳的MAC地址，将自动使用代理ARP和ICMP重定向来进行：---该工程将消耗网络资源，增加网络延时，故建议直接使用下一跳写法" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e9e4c341cd5c8388899b3a4a9d28342d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-12T17:48:12+08:00" />
<meta property="article:modified_time" content="2023-08-12T17:48:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">静态路由详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%EF%BC%8C%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%E4%B8%80%EF%BC%8C%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE" rel="nofollow">一，静态路由中的相关配置</a></p> 
<p id="%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;"><a href="#%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF" rel="nofollow">查看路由表中路由信息</a></p> 
<p id="%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E6%98%AF%E7%94%B1%E9%9D%99%E6%80%81%E5%86%99%E7%9A%84%E8%B7%AF%E7%94%B1-toc" style="margin-left:80px;"><a href="#%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E6%98%AF%E7%94%B1%E9%9D%99%E6%80%81%E5%86%99%E7%9A%84%E8%B7%AF%E7%94%B1" rel="nofollow">查看路由表中是由静态写的路由</a></p> 
<p id="%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E7%9A%84ip%E6%83%85%E5%86%B5-toc" style="margin-left:80px;"><a href="#%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E7%9A%84ip%E6%83%85%E5%86%B5" rel="nofollow">查看路由器的端口的ip情况</a></p> 
<p id="%E6%89%8B%E5%86%99%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E6%89%8B%E5%86%99%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%EF%BC%9A" rel="nofollow">手写静态路由：</a></p> 
<p id="%C2%A0%E5%88%9B%E5%BB%BA%E5%9B%9E%E7%8E%AF%E6%8E%A5%E5%8F%A3%E5%92%8C%E9%85%8D%E7%BD%AE%E5%9C%B0%E5%9D%80-toc" style="margin-left:80px;"><a href="#%C2%A0%E5%88%9B%E5%BB%BA%E5%9B%9E%E7%8E%AF%E6%8E%A5%E5%8F%A3%E5%92%8C%E9%85%8D%E7%BD%AE%E5%9C%B0%E5%9D%80" rel="nofollow"> 创建回环接口和配置地址</a></p> 
<p id="%C2%A0%E9%85%8D%E7%BD%AE%E7%BC%BA%E7%9C%81%E8%B7%AF%E7%94%B1-toc" style="margin-left:80px;"><a href="#%C2%A0%E9%85%8D%E7%BD%AE%E7%BC%BA%E7%9C%81%E8%B7%AF%E7%94%B1" rel="nofollow"> 配置缺省路由</a></p> 
<p id="%C2%A0%E9%85%8D%E7%BD%AE%E7%A9%BA%E6%8E%A5%E5%8F%A3-toc" style="margin-left:80px;"><a href="#%C2%A0%E9%85%8D%E7%BD%AE%E7%A9%BA%E6%8E%A5%E5%8F%A3" rel="nofollow"> 配置空接口</a></p> 
<p id="%C2%A0%E9%85%8D%E7%BD%AE%E6%B5%AE%E5%8A%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1-toc" style="margin-left:80px;"><a href="#%C2%A0%E9%85%8D%E7%BD%AE%E6%B5%AE%E5%8A%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1" rel="nofollow"> 配置浮动静态路由</a></p> 
<p id="%E4%BA%8C%EF%BC%8C%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%EF%BC%8C%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A" rel="nofollow">二，名词解释</a></p> 
<p id="1.%E8%B7%AF%E7%94%B1-toc" style="margin-left:80px;"><a href="#1.%E8%B7%AF%E7%94%B1" rel="nofollow">1.路由</a></p> 
<p id="2.%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:80px;"><a href="#2.%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">2.路由器的工作原理</a></p> 
<p id="3.%E8%B7%AF%E7%94%B1%E5%99%A8%E7%94%9F%E6%88%90%E8%B7%AF%E7%94%B1%E6%9D%A1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:80px;"><a href="#3.%E8%B7%AF%E7%94%B1%E5%99%A8%E7%94%9F%E6%88%90%E8%B7%AF%E7%94%B1%E6%9D%A1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">3.路由器生成路由条的方法：</a></p> 
<p id="4.%E8%8E%B7%E5%8F%96%E6%9C%AA%E7%9F%A5%E7%BD%91%E6%AE%B5%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A-toc" style="margin-left:80px;"><a href="#4.%E8%8E%B7%E5%8F%96%E6%9C%AA%E7%9F%A5%E7%BD%91%E6%AE%B5%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A" rel="nofollow">4.获取未知网段的方法：</a></p> 
<p id="5.%E6%AC%A1%E4%BC%98%E8%B7%AF%E5%BE%84-toc" style="margin-left:80px;"><a href="#5.%E6%AC%A1%E4%BC%98%E8%B7%AF%E5%BE%84" rel="nofollow">5.次优路径</a></p> 
<p id="6.%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1-toc" style="margin-left:80px;"><a href="#6.%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1" rel="nofollow">6.负载均衡</a></p> 
<p id="7.%E5%9B%9E%E7%8E%AF%E6%8E%A5%E5%8F%A3-toc" style="margin-left:80px;"><a href="#7.%E5%9B%9E%E7%8E%AF%E6%8E%A5%E5%8F%A3" rel="nofollow">7.回环接口</a></p> 
<p id="8.%E6%89%8B%E5%B7%A5%E6%B1%87%E6%80%BB%E2%80%94%E2%80%94%E5%AD%90%E7%BD%91%E6%B1%87%E6%80%BB-toc" style="margin-left:80px;"><a href="#8.%E6%89%8B%E5%B7%A5%E6%B1%87%E6%80%BB%E2%80%94%E2%80%94%E5%AD%90%E7%BD%91%E6%B1%87%E6%80%BB" rel="nofollow">8.手工汇总——子网汇总</a></p> 
<p id="9.%E8%B7%AF%E7%94%B1%E9%BB%91%E6%B4%9E%EF%BC%88%E9%BB%91%E6%B4%9E%E8%B7%AF%E7%94%B1%EF%BC%89-toc" style="margin-left:80px;"><a href="#9.%E8%B7%AF%E7%94%B1%E9%BB%91%E6%B4%9E%EF%BC%88%E9%BB%91%E6%B4%9E%E8%B7%AF%E7%94%B1%EF%BC%89" rel="nofollow">9.路由黑洞（黑洞路由）</a></p> 
<p id="10.%E7%BC%BA%E7%9C%81%E8%B7%AF%E7%94%B1(%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1)-toc" style="margin-left:80px;"><a href="#10.%E7%BC%BA%E7%9C%81%E8%B7%AF%E7%94%B1%28%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1%29" rel="nofollow">10.缺省路由(默认路由)</a></p> 
<p id="11.%E7%A9%BA%E6%8E%A5%E5%8F%A3-toc" style="margin-left:80px;"><a href="#11.%E7%A9%BA%E6%8E%A5%E5%8F%A3" rel="nofollow">11.空接口</a></p> 
<p id="12.%E6%B5%AE%E5%8A%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1-toc" style="margin-left:80px;"><a href="#12.%E6%B5%AE%E5%8A%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1" rel="nofollow">12.浮动静态路由</a></p> 
<p id="13.VLSM--%E6%97%A0%E7%B1%BB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1(%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86)-toc" style="margin-left:80px;"><a href="#13.VLSM--%E6%97%A0%E7%B1%BB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1%28%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%29" rel="nofollow">13.VLSM--无类域间路由(子网划分)</a></p> 
<p id="%E5%81%9A%E6%B3%95%EF%BC%9A%E9%80%9A%E8%BF%87%E5%80%9F%E7%94%A8%E4%B8%BB%E6%9C%BA%E4%BD%8D%E6%9D%A5%E5%85%85%E5%BD%93%E7%BD%91%E7%BB%9C%E4%BD%8D-toc" style="margin-left:80px;"><a href="#%E5%81%9A%E6%B3%95%EF%BC%9A%E9%80%9A%E8%BF%87%E5%80%9F%E7%94%A8%E4%B8%BB%E6%9C%BA%E4%BD%8D%E6%9D%A5%E5%85%85%E5%BD%93%E7%BD%91%E7%BB%9C%E4%BD%8D" rel="nofollow">做法：通过借用主机位来充当网络位</a></p> 
<p id="14.CIDR(%E5%AD%90%E7%BD%91%E6%B1%87%E6%80%BB)-toc" style="margin-left:80px;"><a href="#14.CIDR%28%E5%AD%90%E7%BD%91%E6%B1%87%E6%80%BB%29" rel="nofollow">14.CIDR(子网汇总)</a></p> 
<p id="15.%E4%BB%A3%E7%90%86ARP-toc" style="margin-left:80px;"><a href="#15.%E4%BB%A3%E7%90%86ARP" rel="nofollow">15.代理ARP</a></p> 
<p id="16.ICMP%E9%87%8D%E5%AE%9A%E5%90%91-toc" style="margin-left:80px;"><a href="#16.ICMP%E9%87%8D%E5%AE%9A%E5%90%91" rel="nofollow">16.ICMP重定向</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%EF%BC%8C%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%AD%E7%9A%84%E7%9B%B8%E5%85%B3%E9%85%8D%E7%BD%AE">一，静态路由中的相关配置</h2> 
<h4 id="%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E8%B7%AF%E7%94%B1%E4%BF%A1%E6%81%AF">查看路由表中路由信息</h4> 
<blockquote> 
 <p>[r1]display ip routing-table</p> 
</blockquote> 
<h4 id="%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%AD%E6%98%AF%E7%94%B1%E9%9D%99%E6%80%81%E5%86%99%E7%9A%84%E8%B7%AF%E7%94%B1">查看路由表中是由静态写的路由</h4> 
<blockquote> 
 <p>[r1]display ip routing-table protocol static </p> 
</blockquote> 
<h4 id="%E6%9F%A5%E7%9C%8B%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%AB%AF%E5%8F%A3%E7%9A%84ip%E6%83%85%E5%86%B5">查看路由器的端口的ip情况</h4> 
<blockquote> 
 <p>[Huawei]display  ip interface brief </p> 
</blockquote> 
<h4 id="%E6%89%8B%E5%86%99%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%EF%BC%9A">手写静态路由：</h4> 
<blockquote> 
 <p>MA网络中：</p> 
 <p>[ri] ip route-static 192.168.3.0 24 192.168.2.2</p> 
 <p>                                目标网路号     下一跳</p> 
 <p>点到点网络中</p> 
 <p>[ri] ip route-static 192.168.3.0 24 192.168.2.2</p> 
 <p>                                目标网路号     出接口</p> 
 <p>写法区别：</p> 
 <p>建议在MA网络中使用下一跳写法：在点到点网络中使用出接口写法</p> 
 <p>MA：一个网段中节点的数量不限制----以太网</p> 
 <p>点到点：一个网段中只能有两个节点</p> 
 <p><span style="color:#fe2c24;">1.若在MA网络中使用了出接口写法</span></p> 
 <p>设备为获取下一跳的MAC地址，将自动使用代理ARP和ICMP重定向来进行：---该工程将消耗网络资源，增加网络延时，故建议直接使用下一跳写法</p> 
 <p><strong>代理ARP</strong>--当路由器的路由表为出接口写法时，将自动向目标ip地址进行ARP请求；路由器处于A网段，却接收到了B网段的ARP请求，将查询本地路由表，若表中存在到达B网段的路由，将代理成为目标IP地址进行ARP应答</p> 
 <p><strong>ICMP重定向</strong>--流量从路由器A口进入，查询路由表后依然从A口转出，那么路由器判断本地不是最佳路径，将向上一跳设备反应最佳下一跳地址</p> 
 <p><span style="color:#fe2c24;">2.在点到点网络中，若使用下一跳写法</span></p> 
 <p>由于路由器的查表规则为最长匹配和递归查找。故下一跳写法在点到点网络将没有出接口写法查表更快</p> 
</blockquote> 
<h4 id="%C2%A0%E5%88%9B%E5%BB%BA%E5%9B%9E%E7%8E%AF%E6%8E%A5%E5%8F%A3%E5%92%8C%E9%85%8D%E7%BD%AE%E5%9C%B0%E5%9D%80"> 创建回环接口和配置地址</h4> 
<blockquote> 
 <p>[Huawei]interface LoopBack 0<br> [Huawei-LoopBack0]</p> 
 <p>[Huawei-LoopBack0]ip address 192.168.2.1 24</p> 
</blockquote> 
<h4 id="%C2%A0%E9%85%8D%E7%BD%AE%E7%BC%BA%E7%9C%81%E8%B7%AF%E7%94%B1"> 配置缺省路由</h4> 
<blockquote> 
 <p>[Huawei]ip route-static 0.0.0.0 0 12.0.0.1</p> 
 <p>                                     目标网络号  下一跳</p> 
</blockquote> 
<h4 id="%C2%A0%E9%85%8D%E7%BD%AE%E7%A9%BA%E6%8E%A5%E5%8F%A3"> 配置空接口</h4> 
<blockquote> 
 <p>[Huawei]ip route-static 192.168.1.0 24 NULL 0</p> 
</blockquote> 
<h4 id="%C2%A0%E9%85%8D%E7%BD%AE%E6%B5%AE%E5%8A%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1"> 配置浮动静态路由</h4> 
<blockquote> 
 <p>ip route-static 1.1.1.0 24 13.1.1.1 preference 61</p> 
</blockquote> 
<h2 id="%E4%BA%8C%EF%BC%8C%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A">二，名词解释</h2> 
<h4 id="1.%E8%B7%AF%E7%94%B1">1.路由</h4> 
<p>从源主机到目标主机的转发过程（指示路由器去往网段的方法）</p> 
<h4 id="2.%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">2.路由器的工作原理</h4> 
<p>        根据路由表进行转发数据，当一个数据包来到路由器，路由器将基于数据包中的目标ip地址，查询自身的路由表，如果路由表中有相应的记录则无条件根据路由表进行转发，如果没有路由表中没有记录，则直接放弃</p> 
<h4 id="3.%E8%B7%AF%E7%94%B1%E5%99%A8%E7%94%9F%E6%88%90%E8%B7%AF%E7%94%B1%E6%9D%A1%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A">3.路由器生成路由条的方法：</h4> 
<blockquote> 
 <p>                1.直连路由——直连网段的信息初始存在(直接和路由器相连的网段)</p> 
 <p>                2.静态路由——手写路由表</p> 
 <p>                手写静态路由：</p> 
 <p>                [ri] ip route-static 192.168.3.0 24 192.168.2.2</p> 
 <p>                                目标网路号     下一跳</p> 
 <p>                下一跳：流量从本地发出后经过的下一个路由器的入接口ip地址</p> 
</blockquote> 
<h4 id="4.%E8%8E%B7%E5%8F%96%E6%9C%AA%E7%9F%A5%E7%BD%91%E6%AE%B5%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%9A">4.获取未知网段的方法：</h4> 
<blockquote> 
 <p>1.静态路由——手写路由表</p> 
 <p>2.动态路由器——路由器沟通后自动计算</p> 
</blockquote> 
<p>注意：</p> 
<blockquote> 
 <p>1.骨干链路:  最好不要连设备</p> 
 <p>2.网络通讯：双向联系</p> 
 <p>3.路由器默认以一个网段为目标进行记录，默认路由器仅存在直连网段的路由，非直连网段为未知网段</p> 
 <p>4.如何看广播域</p> 
 <p>看路由器有几个接口</p> 
</blockquote> 
<h4 id="5.%E6%AC%A1%E4%BC%98%E8%B7%AF%E5%BE%84">5.次优路径</h4> 
<p>        次优路径容易导致形成环路问题</p> 
<p>        TTL——生存时间：防止出现环路，导致数据出现循环，当数据出现一定的次数，且一直无人应答后该数据将会被抛弃</p> 
<h4 id="6.%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1">6.负载均衡</h4> 
<p>        当路由器访问同一个目标，具有多条开销相似路径时，可以让设备将流量拆分后延多条路径同时传输，起到带宽叠加的作用(去往一个目标网段存在多条路径)</p> 
<h4 id="7.%E5%9B%9E%E7%8E%AF%E6%8E%A5%E5%8F%A3">7.回环接口</h4> 
<p>        在路由器上创建回环接口，并配置ip地址，通过访问该地址，可以和pc上的127.0.0.1环回网卡一样，用于测试该设备的TCP/IP网络组件是否正常：同时在实验环境下，用于模拟连接终端的物理接口，省去物理环境的成本</p> 
<blockquote> 
 <p>具体操作</p> 
 <p>[Huawei]interface LoopBack 0<br> [Huawei-LoopBack0]</p> 
 <p>[Huawei-LoopBack0]ip address 192.168.2.1 24</p> 
</blockquote> 
<h4 id="8.%E6%89%8B%E5%B7%A5%E6%B1%87%E6%80%BB%E2%80%94%E2%80%94%E5%AD%90%E7%BD%91%E6%B1%87%E6%80%BB">8.手工汇总——子网汇总</h4> 
<p>        当服务器去访问多个连续的子网，<span style="color:#fe2c24;">并且这些子网具备<strong>相同</strong>的下一跳</span>，那么就可以进行子网汇总，加快网络的收敛（减少了路由条目的数量）</p> 
<blockquote> 
 <p>访问这两个网段  192.168.1.0/24   192.168.2.0/24</p> 
 <p>[ri]ip route-static 192.168.0.0 22  192.168.3.2</p> 
 <p>                               汇总网段           下一跳</p> 
</blockquote> 
<h4 id="9.%E8%B7%AF%E7%94%B1%E9%BB%91%E6%B4%9E%EF%BC%88%E9%BB%91%E6%B4%9E%E8%B7%AF%E7%94%B1%EF%BC%89">9.路由黑洞（黑洞路由）</h4> 
<p>        如果网络中包含实际不存在的网段，并且我们做了手工汇总，就会导致某些流量有去无回，<span style="color:#fe2c24;"><strong>浪费链路资源</strong></span>，合理的地址规划，可以减少路由黑洞的产生</p> 
<h4 id="10.%E7%BC%BA%E7%9C%81%E8%B7%AF%E7%94%B1(%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1)">10.缺省路由(默认路由)</h4> 
<p>       <span style="color:#fe2c24;"><strong> 一条不限定目标的路由条目</strong></span>；路由器在查询完本地所有的直连，静态，动态路由后若依然没有可达路径，才使用该条目，具体是用来访问互联网</p> 
<blockquote> 
 <p>具体操作</p> 
 <p>0.0.0.0 0可以代表<span style="color:#fe2c24;"><strong>所有IP地址</strong></span></p> 
 <p>[Huawei]ip route-static 0.0.0.0 0 12.0.0.1</p> 
</blockquote> 
<h4 id="11.%E7%A9%BA%E6%8E%A5%E5%8F%A3">11.空接口</h4> 
<p>      <span style="color:#fe2c24;">  缺省路由和黑洞相遇100%成环</span>：使用空接口路由来避免环路的产生，在<span style="color:#fe2c24;"><strong>黑洞路由器上配置到达</strong></span><span style="color:#0d0016;"><strong>汇总网段</strong></span><span style="color:#fe2c24;"><strong>的空接口路由</strong></span></p> 
<p><span style="color:#fe2c24;">最长掩码匹配原则</span>：先走掩码长的路径（路由器最优先的规则）</p> 
<p>        192.168.1.32 27 的掩码比0.0.0.0的掩码长当192.168.1.32  28来了之后在路由表中没有找到，则进入空接口而不匹配缺省</p> 
<blockquote> 
 <p>具体操作</p> 
 <p>[Huawei]ip route-static 192.168.0.0 22 NULL 0</p> 
</blockquote> 
<h4 id="12.%E6%B5%AE%E5%8A%A8%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1">12.浮动静态路由</h4> 
<p>        路由表中路由条目存在优先级，<span style="color:#fe2c24;">直连为0，静态默认为60 </span>取值范围0-255，<span style="color:#fe2c24;"><strong>小优</strong></span>；</p> 
<p>若出现了两条到达相同目标的路由，但优先级不同，那么优先级小的条目加载到路由表中使用，大的仅存储在设备的缓存中</p> 
<p><span style="color:#fe2c24;"><strong>通过修改静态的优先级，可以</strong></span><span style="color:#0d0016;"><strong>实现路径的备份</strong></span><span style="color:#fe2c24;"><strong>的使用</strong></span></p> 
<blockquote> 
 <p>具体操作</p> 
 <p>[Huawei]ip route-static 1.1.1.0 24 13.1.1.1 preference 61</p> 
</blockquote> 
<h4 id="13.VLSM--%E6%97%A0%E7%B1%BB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1(%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86)">13.VLSM--无类域间路由(子网划分)</h4> 
<p>可变长子网掩码：192.168.1.0/24</p> 
<h4 id="%E5%81%9A%E6%B3%95%EF%BC%9A%E9%80%9A%E8%BF%87%E5%80%9F%E7%94%A8%E4%B8%BB%E6%9C%BA%E4%BD%8D%E6%9D%A5%E5%85%85%E5%BD%93%E7%BD%91%E7%BB%9C%E4%BD%8D">做法：通过借用主机位来充当网络位</h4> 
<h4 id="14.CIDR(%E5%AD%90%E7%BD%91%E6%B1%87%E6%80%BB)" style="background-color:transparent;">14.CIDR(子网汇总)</h4> 
<p>做法：母网号一致，保留相同位，去除不同位</p> 
<p>192.168.1.0/24  192.168.2.0/24  192.168.3.0/24</p> 
<p>超网：192.168.0.0/22--</p> 
<p>超网--汇总后的子网掩码长度<strong>小于</strong>主类网子网掩码长度</p> 
<p>子网汇总--汇总后的子网掩码长<strong>大于或等于</strong>主类网子网掩码长度</p> 
<h4 id="15.%E4%BB%A3%E7%90%86ARP"><strong>15.代理ARP</strong></h4> 
<p>当路由器的路由表为出接口写法时，将自动向目标ip地址进行ARP请求；路由器处于A网段，却接收到B网段的ARP请求，将查询本地路由表，若表中存在到达B网段的路由，将代理成为目标ip地址进行ARP应答</p> 
<h4 id="16.ICMP%E9%87%8D%E5%AE%9A%E5%90%91">16.ICMP重定向</h4> 
<p>流量从路由器A口进入，查询路由表后依然从A口转出，那么路由器判断本地不是最佳路径，将向上一跳设备反映最佳下一跳地址；</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dc0e81df21783d4587763672a496a9a5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">HCIA中OSI的网络基础</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/255fe76579e687ce99dba03b859d6176/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">服务器常见问题答疑</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>