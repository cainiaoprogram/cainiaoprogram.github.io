<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FPGA - 基于FPGA的HDMI显示 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="FPGA - 基于FPGA的HDMI显示" />
<meta property="og:description" content="写在前面 HDMI接口很早之前就想调试了，由于没有时间，就拖到了现在，而且毕业设计也是和视频处理系统有关，就趁这个机会把这个接口调试下。
开发环境 vivado 18.3
pynq - z2
HDMI简介 高清晰度多媒体接口(英文:High Definition Multimedia Interface，HDMI)是一种数字化视频/音频接口技术，是适合影像传输的专用型数字化接口，其可同时传送音频和影像信号，最高数据传输速度为2.25GB/s，同时无需在信号传送前进行数/模或者模/数转换。
HDMI接口设计说明 HDMI输出驱动接口在FPGA方面应用时，主要有两种方式：
一种是采用HDMI（ DVI）编码芯片。这种操作只需要对对应芯片进行操作配置即可实现功能。
另外一种方式就是使用FPGA进行编写，由 IO 模拟方式实现。这里贴出我所使用的pynq-z2的对应模块的电路图并给出板子对应的信号引脚分配信息。
##HDMI Tx set_property -dict { PACKAGE_PIN L17 IOSTANDARD TMDS_33 } [get_ports { TMDS_Clk_n }]; #IO_L11N_T1_SRCC_35 Sch=hdmi_tx_clk_n set_property -dict { PACKAGE_PIN L16 IOSTANDARD TMDS_33 } [get_ports { TMDS_Clk_p }]; #IO_L11P_T1_SRCC_35 Sch=hdmi_tx_clk_p set_property -dict { PACKAGE_PIN K18 IOSTANDARD TMDS_33 } [get_ports { TMDS_Data_n[0] }]; #IO_L12N_T1_MRCC_35 Sch=hdmi_tx_d_n[0] set_property -dict { PACKAGE_PIN K17 IOSTANDARD TMDS_33 } [get_ports { TMDS_Data_p[0] }]; #IO_L12P_T1_MRCC_35 Sch=hdmi_tx_d_p[0] set_property -dict { PACKAGE_PIN J19 IOSTANDARD TMDS_33 } [get_ports { TMDS_Data_n[1] }]; #IO_L10N_T1_AD11N_35 Sch=hdmi_tx_d_n[1] set_property -dict { PACKAGE_PIN K19 IOSTANDARD TMDS_33 } [get_ports { TMDS_Data_p[1] }]; #IO_L10P_T1_AD11P_35 Sch=hdmi_tx_d_p[1] set_property -dict { PACKAGE_PIN H18 IOSTANDARD TMDS_33 } [get_ports { TMDS_Data_n[2] }]; #IO_L14N_T2_AD4N_SRCC_35 Sch=hdmi_tx_d_n[2] set_property -dict { PACKAGE_PIN J18 IOSTANDARD TMDS_33 } [get_ports { TMDS_Data_p[2] }]; #IO_L14P_T2_AD4P_SRCC_35 Sch=hdmi_tx_d_p[2] set_property -dict { PACKAGE_PIN R19 IOSTANDARD LVCMOS33 } [get_ports { HDMI_OEN[0] }]; #IO_0_34 Sch=hdmi_tx_hpdn HDMI和DVI（Digital Visual Interface）数字视频接口这两种数字视频传输标准的要求几乎完全相同，并同时处理一组高频和低频信号。这两种标准均采用TMDS(最小跳变差分信号又称最小化传输差分信号)技术来传输数据的高频(视频)部分。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fbe9a9f9078cf381b5b220382b372a27/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-22T01:21:48+08:00" />
<meta property="article:modified_time" content="2021-01-22T01:21:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">FPGA - 基于FPGA的HDMI显示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>写在前面</h2> 
<p>HDMI接口很早之前就想调试了，由于没有时间，就拖到了现在，而且毕业设计也是和视频处理系统有关，就趁这个机会把这个接口调试下。</p> 
<h2><a id="_2"></a>开发环境</h2> 
<p>vivado 18.3<br> pynq - z2</p> 
<h2><a id="HDMI_5"></a>HDMI简介</h2> 
<p>高清晰度多媒体接口(英文:High Definition Multimedia Interface，HDMI)是一种数字化视频/音频接口技术，是适合影像传输的专用型数字化接口，其可同时传送音频和影像信号，最高数据传输速度为2.25GB/s，同时无需在信号传送前进行数/模或者模/数转换。<br> <img src="https://images2.imgbox.com/a6/61/8ewmyYvi_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="HDMI_8"></a>HDMI接口设计说明</h2> 
<p>HDMI输出驱动接口在FPGA方面应用时，主要有两种方式：<br> 一种是采用HDMI（ DVI）编码芯片。这种操作只需要对对应芯片进行操作配置即可实现功能。<br> <img src="https://images2.imgbox.com/17/4d/iMcB6wVU_o.png" alt="在这里插入图片描述"></p> 
<p>另外一种方式就是使用FPGA进行编写，由 IO 模拟方式实现。这里贴出我所使用的pynq-z2的对应模块的电路图并给出板子对应的信号引脚分配信息。<br> <img src="https://images2.imgbox.com/b1/14/8H9ac1G6_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-c">##HDMI Tx

set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN L17   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Clk_n <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L11N_T1_SRCC_35 Sch<span class="token operator">=</span>hdmi_tx_clk_n
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN L16   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Clk_p <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L11P_T1_SRCC_35 Sch<span class="token operator">=</span>hdmi_tx_clk_p
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN K18   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Data_n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L12N_T1_MRCC_35 Sch<span class="token operator">=</span>hdmi_tx_d_n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN K17   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Data_p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L12P_T1_MRCC_35 Sch<span class="token operator">=</span>hdmi_tx_d_p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN J19   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Data_n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L10N_T1_AD11N_35 Sch<span class="token operator">=</span>hdmi_tx_d_n<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN K19   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Data_p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L10P_T1_AD11P_35 Sch<span class="token operator">=</span>hdmi_tx_d_p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN H18   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Data_n<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L14N_T2_AD4N_SRCC_35 Sch<span class="token operator">=</span>hdmi_tx_d_n<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN J18   IOSTANDARD TMDS_33  <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> TMDS_Data_p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_L14P_T2_AD4P_SRCC_35 Sch<span class="token operator">=</span>hdmi_tx_d_p<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
set_property <span class="token operator">-</span>dict <span class="token punctuation">{<!-- --></span> PACKAGE_PIN R19   IOSTANDARD LVCMOS33 <span class="token punctuation">}</span> <span class="token punctuation">[</span>get_ports <span class="token punctuation">{<!-- --></span> HDMI_OEN<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span> #IO_0_34 Sch<span class="token operator">=</span>hdmi_tx_hpdn

</code></pre> 
<p>HDMI和DVI（Digital Visual Interface）数字视频接口这两种数字视频传输标准的要求几乎完全相同，并同时处理一组高频和低频信号。这两种标准均采用TMDS(最小跳变差分信号又称最小化传输差分信号)技术来传输数据的高频(视频)部分。<br> HDMI/DVI数字视频接口的设计思想采用了DVI用于至数字显示器的高速数字连接。DVI采用了TMDS技术来传输数据的高频(视频)信号(见图1红色块所示)。<br> <img src="https://images2.imgbox.com/cb/4d/5YN5Yt31_o.png" alt="在这里插入图片描述"><br> 要实现HDMI和DVI系统中的“即插即用”功能，源端(通常是一台电脑、DVD播放器或游戏机)和接收端(通常是监视器或接收机)必须连接起来。HDMI 和DVI借用VESA (视频电子标准协会)的开放标准，采用DDC(数字显示通道)、一个称为<strong>HPD的新信号(热插拔检测)</strong></p> 
<h3><a id="HDMI_35"></a>标准HDMI接口</h3> 
<p><img src="https://images2.imgbox.com/d0/78/6x4Ke5J1_o.png" alt="在这里插入图片描述"></p> 
<p>TYPE A，包括19个PIN，主要是4对差分信号线</p> 
<table><thead><tr><th>TMDS clock+</th><th>TMDS clock-</th></tr></thead><tbody><tr><td>TMDS data0+</td><td>TMDS data0-</td></tr><tr><td>TMDS data1+</td><td>TMDS data1-</td></tr><tr><td>TMDS data2+</td><td>TMDS data2-</td></tr></tbody></table> 
<h3><a id="TMDS_45"></a>TMDS(最小跳变差分信号)</h3> 
<p>最小化传输差分信号(TMDS)作为电气电平的标准。被应用于发送数字视频接口(DVl)及高清晰度多媒体接口(HDMl)的数据。其设计考虑因素之包括：</p> 
<p>对内偏斜(Intra-Pai rSkew)。在给定的一对差分信号上，真(true)信号及其互补信号之间的时间差应尽可能的小；</p> 
<p>残余抖动(Residual Jitter)。测试点与信号源之间所测量到的抖动数量的差异。可接受的最大残余抖动等价于发射机与接收机之间最小的抖动预计量(budget)；</p> 
<p>静电放电(ESD)。外部连接器因曝露于外界，因而更易受到静电放电的影响。更高的静电放电率可提供更良好的保护。</p> 
<p>TMDS 包括3个RGB数据和1个时钟，共计4个通道(称为1个TMDS连接或Single-link)的传输回路。TMDS是把8位的RGB视频数据变换成10 位转换最小化、DC平衡的数据，再完成数据的串行处理；接收端设备对串行数据解串行变成并行数据，再转换成8位视频信号。因此，传输数字RGB数据需要3 个转换最小化差分采样信号构成一个TMDS连接。</p> 
<h3><a id="HDMI_56"></a>HDMI系统框图</h3> 
<p><img src="https://images2.imgbox.com/c6/d1/bRG0UHg7_o.png" alt="在这里插入图片描述"><br> HDMI传输由三组TMDS通道和一组TMDS clock通道组成，TMDS clock的运行频率是video信号的pixel频率，在每个cycle，每个TMDS data通道发送10bit数据。<br> <img src="https://images2.imgbox.com/30/08/Md7UATYl_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_60"></a>项目设计</h2> 
<p>整体的项目结构（因为也只是验证别人写好的程序为后续的毕设做准备，就没有直接移植的别人写好的程序）：<br> <img src="https://images2.imgbox.com/b5/92/3v2lcU2g_o.png" alt="在这里插入图片描述"></p> 
<p>hdmi的驱动这里使用的是迪芝伦的github上面开源的ip，链接如下：<br> <a href="https://gitee.com/Williamwxh/ip-library" rel="nofollow">hdmi ip链接</a><br> ip系统框图：<br> <img src="https://images2.imgbox.com/bb/43/Wkeiluab_o.png" alt="在这里插入图片描述"><br> 添加ip进入工程，后设置时钟ip的参数<br> <img src="https://images2.imgbox.com/bb/d4/AfkQ7AgD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_70"></a>彩条测试文件</h3> 
<pre><code class="prism language-c">module <span class="token function">color_bar</span><span class="token punctuation">(</span>
	input clk<span class="token punctuation">,</span>            <span class="token comment">//像素时钟输入，1280x720@60P的像素时钟为74.25</span>
	input rst<span class="token punctuation">,</span>            <span class="token comment">//复位,高有效</span>
	output hs<span class="token punctuation">,</span>            <span class="token comment">//行同步、高有效</span>
	output vs<span class="token punctuation">,</span>            <span class="token comment">//场同步、高有效</span>
	output de<span class="token punctuation">,</span>            <span class="token comment">//数据有效</span>
	output<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rgb_r<span class="token punctuation">,</span>    <span class="token comment">//像素数据、红色分量</span>
	output<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rgb_g<span class="token punctuation">,</span>    <span class="token comment">//像素数据、绿色分量</span>
	output<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rgb_b     <span class="token comment">//像素数据、蓝色分量</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*********视频时序参数定义******************************************/</span>
parameter H_ACTIVE <span class="token operator">=</span> <span class="token number">16</span>'d1280<span class="token punctuation">;</span>  <span class="token comment">//行有效长度（像素时钟周期个数）</span>
parameter H_FP <span class="token operator">=</span> <span class="token number">16</span>'d110<span class="token punctuation">;</span>       <span class="token comment">//行同步前肩长度</span>
parameter H_SYNC <span class="token operator">=</span> <span class="token number">16</span>'d40<span class="token punctuation">;</span>      <span class="token comment">//行同步长度</span>
parameter H_BP <span class="token operator">=</span> <span class="token number">16</span>'d220<span class="token punctuation">;</span>       <span class="token comment">//行同步后肩长度</span>
parameter V_ACTIVE <span class="token operator">=</span> <span class="token number">16</span>'d720<span class="token punctuation">;</span>   <span class="token comment">//场有效长度（行的个数）</span>
parameter V_FP 	<span class="token operator">=</span> <span class="token number">16</span>'d5<span class="token punctuation">;</span>        <span class="token comment">//场同步前肩长度</span>
parameter V_SYNC  <span class="token operator">=</span> <span class="token number">16</span>'d5<span class="token punctuation">;</span>      <span class="token comment">//场同步长度</span>
parameter V_BP	<span class="token operator">=</span> <span class="token number">16</span>'d20<span class="token punctuation">;</span>       <span class="token comment">//场同步后肩长度</span>

<span class="token comment">//parameter H_FP = 16'd88;</span>
<span class="token comment">//parameter H_SYNC = 16'd44;</span>
<span class="token comment">//parameter H_BP = 16'd148; </span>
<span class="token comment">//parameter V_ACTIVE = 16'd1080;</span>
<span class="token comment">//parameter V_FP 	= 16'd4;</span>
<span class="token comment">//parameter V_SYNC  = 16'd5;</span>
<span class="token comment">//parameter V_BP	= 16'd36;</span>
parameter H_TOTAL <span class="token operator">=</span> H_ACTIVE <span class="token operator">+</span> H_FP <span class="token operator">+</span> H_SYNC <span class="token operator">+</span> H_BP<span class="token punctuation">;</span><span class="token comment">//行总长度</span>
parameter V_TOTAL <span class="token operator">=</span> V_ACTIVE <span class="token operator">+</span> V_FP <span class="token operator">+</span> V_SYNC <span class="token operator">+</span> V_BP<span class="token punctuation">;</span><span class="token comment">//场总长度</span>
<span class="token comment">/*********彩条RGB color bar颜色参数定义*****************************/</span>
parameter WHITE_R 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter WHITE_G 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter WHITE_B 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter YELLOW_R 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter YELLOW_G 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter YELLOW_B 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>                              	
parameter CYAN_R 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter CYAN_G 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter CYAN_B 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>                             	
parameter GREEN_R 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter GREEN_G 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter GREEN_B 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter MAGENTA_R 	<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter MAGENTA_G 	<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter MAGENTA_B 	<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter RED_R 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter RED_G 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter RED_B 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter BLUE_R 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter BLUE_G 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter BLUE_B 		<span class="token operator">=</span> <span class="token number">8</span>'hff<span class="token punctuation">;</span>
parameter BLACK_R 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter BLACK_G 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
parameter BLACK_B 		<span class="token operator">=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
reg hs_reg<span class="token punctuation">;</span><span class="token comment">//定义一个寄存器,用于行同步</span>
reg vs_reg<span class="token punctuation">;</span><span class="token comment">//定义一个寄存器,用户场同步</span>
reg hs_reg_d0<span class="token punctuation">;</span><span class="token comment">//hs_reg一个时钟的延迟</span>
              <span class="token comment">//所有以_d0、d1、d2等为后缀的均为某个寄存器的延迟</span>
reg vs_reg_d0<span class="token punctuation">;</span><span class="token comment">//vs_reg一个时钟的延迟</span>
reg<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> h_cnt<span class="token punctuation">;</span><span class="token comment">//用于行的计数器</span>
reg<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> v_cnt<span class="token punctuation">;</span><span class="token comment">//用于场（帧）的计数器</span>
reg<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> active_x<span class="token punctuation">;</span><span class="token comment">//有效图像的的坐标x</span>
reg<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> active_y<span class="token punctuation">;</span><span class="token comment">//有效图像的坐标y</span>
reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rgb_r_reg<span class="token punctuation">;</span><span class="token comment">//像素数据r分量</span>
reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rgb_g_reg<span class="token punctuation">;</span><span class="token comment">//像素数据g分量</span>
reg<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> rgb_b_reg<span class="token punctuation">;</span><span class="token comment">//像素数据b分量</span>
reg h_active<span class="token punctuation">;</span><span class="token comment">//行图像有效</span>
reg v_active<span class="token punctuation">;</span><span class="token comment">//场图像有效</span>
wire video_active<span class="token punctuation">;</span><span class="token comment">//一帧内图像的有效区域h_active &amp; v_active</span>
reg video_active_d0<span class="token punctuation">;</span>
assign hs <span class="token operator">=</span> hs_reg_d0<span class="token punctuation">;</span>
assign vs <span class="token operator">=</span> vs_reg_d0<span class="token punctuation">;</span>
assign video_active <span class="token operator">=</span> h_active <span class="token operator">&amp;</span> v_active<span class="token punctuation">;</span>
assign de <span class="token operator">=</span> video_active_d0<span class="token punctuation">;</span>
assign rgb_r <span class="token operator">=</span> rgb_r_reg<span class="token punctuation">;</span>
assign rgb_g <span class="token operator">=</span> rgb_g_reg<span class="token punctuation">;</span>
assign rgb_b <span class="token operator">=</span> rgb_b_reg<span class="token punctuation">;</span>
always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		begin
			hs_reg_d0 <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
			vs_reg_d0 <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
			video_active_d0 <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
		end
	<span class="token keyword">else</span>
		begin
			hs_reg_d0 <span class="token operator">&lt;=</span> hs_reg<span class="token punctuation">;</span>
			vs_reg_d0 <span class="token operator">&lt;=</span> vs_reg<span class="token punctuation">;</span>
			video_active_d0 <span class="token operator">&lt;=</span> video_active<span class="token punctuation">;</span>
		end
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		h_cnt <span class="token operator">&lt;=</span> <span class="token number">12</span>'d0<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_TOTAL <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//行计数器到最大值清零</span>
		h_cnt <span class="token operator">&lt;=</span> <span class="token number">12</span>'d0<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		h_cnt <span class="token operator">&lt;=</span> h_cnt <span class="token operator">+</span> <span class="token number">12</span>'d1<span class="token punctuation">;</span>
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		active_x <span class="token operator">&lt;=</span> <span class="token number">12</span>'d0<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>h_cnt <span class="token operator">&gt;=</span> H_FP <span class="token operator">+</span> H_SYNC <span class="token operator">+</span> H_BP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//计算图像的x坐标</span>
		active_x <span class="token operator">&lt;=</span> h_cnt <span class="token operator">-</span> <span class="token punctuation">(</span>H_FP<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> H_SYNC<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> H_BP<span class="token punctuation">[</span><span class="token number">11</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">12</span>'d1<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		active_x <span class="token operator">&lt;=</span> active_x<span class="token punctuation">;</span>
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		v_cnt <span class="token operator">&lt;=</span> <span class="token number">12</span>'d0<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP  <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//在行数计算器为H_FP - 1的时候场计数器+1或清零</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>v_cnt <span class="token operator">==</span> V_TOTAL <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//场计数器到最大值了，清零</span>
			v_cnt <span class="token operator">&lt;=</span> <span class="token number">12</span>'d0<span class="token punctuation">;</span>
		<span class="token keyword">else</span>
			v_cnt <span class="token operator">&lt;=</span> v_cnt <span class="token operator">+</span> <span class="token number">12</span>'d1<span class="token punctuation">;</span><span class="token comment">//没到最大值，+1</span>
	<span class="token keyword">else</span>
		v_cnt <span class="token operator">&lt;=</span> v_cnt<span class="token punctuation">;</span>
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		hs_reg <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//行同步开始了...</span>
		hs_reg <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP <span class="token operator">+</span> H_SYNC <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">//行同步这时候要结束了</span>
		hs_reg <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		hs_reg <span class="token operator">&lt;=</span> hs_reg<span class="token punctuation">;</span>
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		h_active <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP <span class="token operator">+</span> H_SYNC <span class="token operator">+</span> H_BP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
		h_active <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_TOTAL <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
		h_active <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>
	<span class="token keyword">else</span>
		h_active <span class="token operator">&lt;=</span> h_active<span class="token punctuation">;</span>
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		vs_reg <span class="token operator">&lt;=</span> <span class="token number">1</span>'d0<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v_cnt <span class="token operator">==</span> V_FP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		vs_reg <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v_cnt <span class="token operator">==</span> V_FP <span class="token operator">+</span> V_SYNC <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		vs_reg <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>	
	<span class="token keyword">else</span>
		vs_reg <span class="token operator">&lt;=</span> vs_reg<span class="token punctuation">;</span>
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		v_active <span class="token operator">&lt;=</span> <span class="token number">1</span>'d0<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v_cnt <span class="token operator">==</span> V_FP <span class="token operator">+</span> V_SYNC <span class="token operator">+</span> V_BP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		v_active <span class="token operator">&lt;=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>v_cnt <span class="token operator">==</span> V_TOTAL <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>h_cnt <span class="token operator">==</span> H_FP <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		v_active <span class="token operator">&lt;=</span> <span class="token number">1</span>'b0<span class="token punctuation">;</span>	
	<span class="token keyword">else</span>
		v_active <span class="token operator">&lt;=</span> v_active<span class="token punctuation">;</span>
end

always@<span class="token punctuation">(</span>posedge clk or posedge rst<span class="token punctuation">)</span>
begin
	<span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span>
		begin
			rgb_r_reg <span class="token operator">&lt;=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
			rgb_g_reg <span class="token operator">&lt;=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
			rgb_b_reg <span class="token operator">&lt;=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
		end
	<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>video_active<span class="token punctuation">)</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token number">12</span>'d0<span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> WHITE_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> WHITE_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> WHITE_B<span class="token punctuation">;</span>
			end
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token punctuation">(</span>H_ACTIVE<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> YELLOW_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> YELLOW_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> YELLOW_B<span class="token punctuation">;</span>
			end			
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token punctuation">(</span>H_ACTIVE<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> CYAN_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> CYAN_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> CYAN_B<span class="token punctuation">;</span>
			end
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token punctuation">(</span>H_ACTIVE<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> GREEN_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> GREEN_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> GREEN_B<span class="token punctuation">;</span>
			end
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token punctuation">(</span>H_ACTIVE<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> MAGENTA_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> MAGENTA_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> MAGENTA_B<span class="token punctuation">;</span>
			end
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token punctuation">(</span>H_ACTIVE<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">5</span><span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> RED_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> RED_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> RED_B<span class="token punctuation">;</span>
			end
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token punctuation">(</span>H_ACTIVE<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> BLUE_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> BLUE_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> BLUE_B<span class="token punctuation">;</span>
			end	
		<span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>active_x <span class="token operator">==</span> <span class="token punctuation">(</span>H_ACTIVE<span class="token operator">/</span><span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">7</span><span class="token punctuation">)</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> BLACK_R<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> BLACK_G<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> BLACK_B<span class="token punctuation">;</span>
			end
		<span class="token keyword">else</span>
			begin
				rgb_r_reg <span class="token operator">&lt;=</span> rgb_r_reg<span class="token punctuation">;</span>
				rgb_g_reg <span class="token operator">&lt;=</span> rgb_g_reg<span class="token punctuation">;</span>
				rgb_b_reg <span class="token operator">&lt;=</span> rgb_b_reg<span class="token punctuation">;</span>
			end			
	<span class="token keyword">else</span>
		begin
			rgb_r_reg <span class="token operator">&lt;=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
			rgb_g_reg <span class="token operator">&lt;=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
			rgb_b_reg <span class="token operator">&lt;=</span> <span class="token number">8</span>'h00<span class="token punctuation">;</span>
		end
end

endmodule 
</code></pre> 
<h3><a id="_320"></a>顶层模块</h3> 
<pre><code class="prism language-c">`timescale <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps
module <span class="token function">pro_hdmi_top</span><span class="token punctuation">(</span>
	input 				clk<span class="token punctuation">,</span>
	output 		<span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>	HDMI_OEN<span class="token punctuation">,</span>
	output 				TMDS_Clk_n<span class="token punctuation">,</span>
	output 				TMDS_Clk_p<span class="token punctuation">,</span>
	output 		<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>	TMDS_Data_n<span class="token punctuation">,</span>
	output 		<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>	TMDS_Data_p
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

wire			Pixel_clk<span class="token punctuation">;</span>
wire			Serial_clk<span class="token punctuation">;</span>
wire			video_hs<span class="token punctuation">;</span>
wire			video_vs<span class="token punctuation">;</span>
wire			video_de<span class="token punctuation">;</span>
wire	<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>	video_r<span class="token punctuation">;</span>
wire	<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>	video_g<span class="token punctuation">;</span>
wire	<span class="token punctuation">[</span><span class="token number">7</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">]</span>	video_b<span class="token punctuation">;</span>

assign HDMI_OEN <span class="token operator">=</span> <span class="token number">1</span>'b1<span class="token punctuation">;</span>

<span class="token comment">//实例化色彩模?</span>
color_bar <span class="token function">uut_color_bar</span><span class="token punctuation">(</span>
	<span class="token punctuation">.</span><span class="token function">clk</span>			<span class="token punctuation">(</span>Pixel_clk<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">rst</span>			<span class="token punctuation">(</span><span class="token number">1</span>'b0<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">hs</span>				<span class="token punctuation">(</span>video_hs<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">vs</span>				<span class="token punctuation">(</span>video_vs<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">de</span>				<span class="token punctuation">(</span>video_de<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">rgb_r</span>			<span class="token punctuation">(</span>video_r<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">rgb_g</span>			<span class="token punctuation">(</span>video_g<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token function">rgb_b</span>			<span class="token punctuation">(</span>video_b<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//时钟信号</span>
  clk_wiz_0 <span class="token function">uut_clk</span><span class="token punctuation">(</span>
    <span class="token comment">// Clock out ports</span>
    <span class="token punctuation">.</span><span class="token function">clk_out1</span><span class="token punctuation">(</span>Pixel_clk<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">// output clk_out1</span>
    <span class="token punctuation">.</span><span class="token function">clk_out2</span><span class="token punctuation">(</span>Serial_clk<span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">// output clk_out2</span>
    <span class="token comment">// Status and control signals</span>
    <span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token number">1</span>'b0<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// input reset</span>
    <span class="token punctuation">.</span><span class="token function">locked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       <span class="token comment">// output locked</span>
   <span class="token comment">// Clock in ports</span>
    <span class="token punctuation">.</span><span class="token function">clk_in1</span><span class="token punctuation">(</span>clk<span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// input clk_in1</span>


<span class="token comment">//hdmi驱动</span>
hdmi_disp_0 <span class="token function">uut_hdmi_disp_0</span> <span class="token punctuation">(</span>
  <span class="token punctuation">.</span><span class="token function">TMDS_Clk_p</span><span class="token punctuation">(</span>TMDS_Clk_p<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// output wire TMDS_Clk_p</span>
  <span class="token punctuation">.</span><span class="token function">TMDS_Clk_n</span><span class="token punctuation">(</span>TMDS_Clk_n<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// output wire TMDS_Clk_n</span>
  <span class="token punctuation">.</span><span class="token function">TMDS_Data_p</span><span class="token punctuation">(</span>TMDS_Data_p<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// output wire [2 : 0] TMDS_Data_p</span>
  <span class="token punctuation">.</span><span class="token function">TMDS_Data_n</span><span class="token punctuation">(</span>TMDS_Data_n<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// output wire [2 : 0] TMDS_Data_n</span>
  <span class="token punctuation">.</span><span class="token function">aRst</span><span class="token punctuation">(</span><span class="token number">1</span>'b0<span class="token punctuation">)</span><span class="token punctuation">,</span>                <span class="token comment">// input wire aRst</span>
  <span class="token punctuation">.</span><span class="token function">aRst_n</span><span class="token punctuation">(</span><span class="token number">1</span>'b1<span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment">// input wire aRst_n</span>
  <span class="token punctuation">.</span><span class="token function">vid_pData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>video_r<span class="token punctuation">,</span>video_b<span class="token punctuation">,</span>video_g<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>      <span class="token comment">// input wire [23 : 0] vid_pData</span>
  <span class="token punctuation">.</span><span class="token function">vid_pVDE</span><span class="token punctuation">(</span>video_de<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token comment">// input wire vid_pVDE</span>
  <span class="token punctuation">.</span><span class="token function">vid_pHSync</span><span class="token punctuation">(</span>video_hs<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// input wire vid_pHSync</span>
  <span class="token punctuation">.</span><span class="token function">vid_pVSync</span><span class="token punctuation">(</span>video_vs<span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token comment">// input wire vid_pVSync</span>
  <span class="token punctuation">.</span><span class="token function">PixelClk</span><span class="token punctuation">(</span>Pixel_clk<span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token comment">// input wire PixelClk</span>
  <span class="token punctuation">.</span><span class="token function">SerialClk</span><span class="token punctuation">(</span>Serial_clk<span class="token punctuation">)</span>      <span class="token comment">// input wire SerialClk</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
endmodule

</code></pre> 
<h3><a id="_387"></a>实验效果</h3> 
<p><img src="https://images2.imgbox.com/24/1f/PWzNtWNm_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="reference_390"></a>reference</h2> 
<p><a href="https://www.21ic.com/embed/hardware/processor/201901/85092.html" rel="nofollow">HDMI/DVI新技术与芯片及其应用</a><br> <a href="https://blog.csdn.net/qq_37989552/article/details/83188684">HDMI的FPGA实现（一）</a><br> <a href="https://blog.csdn.net/rainbowbirds_aes/article/details/90200339?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_baidulandingword-2&amp;spm=1001.2101.3001.4242">基于FPGA的HDMI高清显示接口驱动</a><br> <a href="https://suisuisi.blog.csdn.net/article/details/103554268" rel="nofollow">基于FPGA的HDMI显示（二）</a><br> <a href="https://blog.csdn.net/Pieces_thinking/article/details/103553983">基于FPGA的HDMI显示（一）</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5f1622050a1c436f7b97583edc1f874e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">lotus version 1.4.1 AddPiece 优化</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0f24d83aaf272322790901da0b9b6994/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Jetbrains 软件代码无提示解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>