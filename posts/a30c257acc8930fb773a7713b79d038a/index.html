<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>3_Docker 常用命令 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="3_Docker 常用命令" />
<meta property="og:description" content="进程命令 启动docker服务:
systemctl start docker 停止docker服务:
systemctl stop docker 重启docker服务:
systemctl restart docker 查看docker服务状态:
systemctl status docker 设置开机启动docker服务:
systemctl enable docker 帮助命令 查看 docker 版本
docker version 查看 docker 镜像数、Register等详细信息
docker info 更多指令查看
docker --help 镜像命令 （1）查看 docker 本地主机镜像 docker images 各个选项说明:
REPOSITORY：表示镜像的仓库源 TAG：镜像的标签[类似版本号] IMAGE ID：镜像ID[唯一] CREATED：镜像创建时间 SIZE：镜像大小 同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本，我们使用 REPOSITORY:TAG来定义不同的镜像。如果你不指定一个镜像的版本标签，例如你只使用 ubuntu，docker 将默认使用ubuntu:latest镜像
OPTIONS说明： -a :列出本地所有的镜像（含中间映像层）[一个镜像可能不止一层，类似千层饼] -q :只显示镜像ID [在删除镜像时,可能要 -qa 结合使用] --digests :显示镜像的摘要信息 --no-trunc :显示完整的镜像信息 （2）docker search 某个XXX镜像名字 网站：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a30c257acc8930fb773a7713b79d038a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-11T14:45:12+08:00" />
<meta property="article:modified_time" content="2020-11-11T14:45:12+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">3_Docker 常用命令</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="_0"></a>进程命令</h3> 
<p>启动docker服务:</p> 
<pre><code>systemctl start docker
</code></pre> 
<p>停止docker服务:</p> 
<pre><code>systemctl stop docker
</code></pre> 
<p>重启docker服务:</p> 
<pre><code>systemctl restart docker
</code></pre> 
<p>查看docker服务状态:</p> 
<pre><code>systemctl status docker
</code></pre> 
<p>设置开机启动docker服务:</p> 
<pre><code>systemctl enable docker
</code></pre> 
<h3><a id="_32"></a>帮助命令</h3> 
<p>查看 docker 版本</p> 
<pre><code>docker version
</code></pre> 
<p>查看 docker 镜像数、Register等详细信息</p> 
<pre><code>docker info
</code></pre> 
<p>更多指令查看</p> 
<pre><code>docker --help
</code></pre> 
<hr> 
<h3><a id="_54"></a>镜像命令</h3> 
<h4><a id="1_docker__56"></a>（1）查看 docker 本地主机镜像</h4> 
<pre><code>docker images
</code></pre> 
<p><img src="https://images2.imgbox.com/d4/ba/gcOigmYq_o.png" alt="           "></p> 
<p><strong>各个选项说明:</strong></p> 
<pre><code>REPOSITORY：表示镜像的仓库源
TAG：镜像的标签[类似版本号]
IMAGE ID：镜像ID[唯一]
CREATED：镜像创建时间
SIZE：镜像大小
</code></pre> 
<p>同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本，我们使用 <code>REPOSITORY:TAG</code>来定义不同的镜像。如果你不指定一个镜像的版本标签，例如你只使用 ubuntu，docker 将默认使用<code>ubuntu:latest</code>镜像</p> 
<pre><code>OPTIONS说明：
	-a :列出本地所有的镜像（含中间映像层）[一个镜像可能不止一层，类似千层饼]
	-q :只显示镜像ID [在删除镜像时,可能要 -qa 结合使用]
	--digests :显示镜像的摘要信息
	--no-trunc :显示完整的镜像信息
</code></pre> 
<h4><a id="2docker_search_XXX_85"></a>（2）docker search 某个XXX镜像名字</h4> 
<p><strong>网站：</strong></p> 
<pre><code>https://hub.docker.com
</code></pre> 
<p><img src="https://images2.imgbox.com/ff/ea/rww6Nav8_o.png" alt="在这里插入图片描述"></p> 
<p>命令：搜索镜像是从 docker Hub 官网</p> 
<pre><code>docker search [OPTIONS] 镜像名字
</code></pre> 
<pre><code>OPTIONS说明：
	--no-trunc : 显示完整的镜像描述
	-s : 列出收藏数不小于指定值的镜像
	--automated : 只列出 automated build类型的镜像；
</code></pre> 
<p><img src="https://images2.imgbox.com/7a/b7/TTkKHUF9_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="3docker__pull__XXX_112"></a>（3）docker pull 某个XXX镜像名字</h4> 
<p>下载镜像：如果不指定版本，则默认下载 latest 最新版</p> 
<pre><code>docker pull 镜像名字[:TAG]
</code></pre> 
<h4><a id="4docker__rmi__XXX_ID_120"></a>（4）docker rmi 某个XXX镜像名字 ID</h4> 
<p>删除镜像：如果不指定版本，则默认删除 latest 最新版</p> 
<p>删除单个：</p> 
<pre><code>docker rmi -f 镜像ID/镜像名字
</code></pre> 
<p>删除多个：</p> 
<pre><code>docker rmi -f 镜像名1:TAG 镜像名2:TAG 
</code></pre> 
<p>删除全部：先找到所有镜像 ID，再进行删除</p> 
<pre><code>docker rmi -f $(docker images -qa)
</code></pre> 
<hr> 
<h3><a id="_144"></a>容器命令</h3> 
<p>根本前提：必须要有镜像才能创建容器</p> 
<p><strong>CentOS 镜像演示</strong></p> 
<h5><a id="_150"></a>从仓库下载镜像</h5> 
<pre><code>docker pull centos
</code></pre> 
<h5><a id="_156"></a>查看镜像</h5> 
<pre><code>docker images
</code></pre> 
<p><img src="https://images2.imgbox.com/67/1f/oJljZ0hF_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_165"></a>新建并启动容器</h5> 
<pre><code>docker run -it centos /bin/bash
</code></pre> 
<p><img src="https://images2.imgbox.com/d9/b4/hYq9sDDi_o.png" alt="在这里插入图片描述"></p> 
<pre><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]


OPTIONS说明（常用）：有些是一个减号，有些是两个减号

--name="容器新名字": 为容器指定一个名称；[不指定时,会默认给1个名字]
-d: 后台运行容器，并返回容器ID，也即启动守护式容器；[后台启动]

-i：以交互模式运行容器，通常与 -t 同时使用；
-t：为容器重新分配一个伪输入终端，通常与 -i 同时使用；[两者结合使用,启动并显示伪终端]

-P: 随机端口映射；[不指定时,会默认给定端口,使用 docker ps 查看]
-p: 指定端口映射，有以下四种格式[一般使用第三种,主机端口:容器端口]
      ip:hostPort:containerPort
      ip::containerPort
      hostPort:containerPort
      containerPort
</code></pre> 
<pre><code>启动交互式容器:
	可简单理解为:要显示伪终端, /bin/bash 可加可不加,这是因为在构建时加上了CMD 末尾有这个命令；同时如果不指定版本，默认启动 latest 
</code></pre> 
<h5><a id="_199"></a>列出当前所有正在运行的容器</h5> 
<pre><code>docker ps
</code></pre> 
<p><img src="https://images2.imgbox.com/46/88/xBzVy3eJ_o.png" alt="在这里插入图片描述"></p> 
<pre><code>OPTIONS说明（常用）：


-a :列出当前所有正在运行的容器+历史上运行过的 [列出所有容器]

-l :显示最近创建的容器。

-n：显示最近n个创建的容器。

-q :静默模式，只显示容器编号。[配合 -aq 使用，用于删除所有容器]

--no-trunc :不截断输出。
</code></pre> 
<h5><a id="_223"></a>退出容器</h5> 
<h6><a id="_1_225"></a>方式 1：容器停止退出</h6> 
<pre><code>exit   容器就停止运行了
</code></pre> 
<h6><a id="_2_231"></a>方式 2：容器不停止退出</h6> 
<pre><code>ctrl + P + Q    容器在后台运行
</code></pre> 
<p>如何再次进入正在运行中的容器也有两种方式，看后面介绍 。</p> 
<h5><a id="_239"></a>启动容器</h5> 
<pre><code>docker start 容器ID或者容器名
</code></pre> 
<h5><a id="_245"></a>重启容器</h5> 
<pre><code>docker restart 容器ID或者容器名
</code></pre> 
<h5><a id="_251"></a>停止容器</h5> 
<pre><code>docker stop 容器ID或者容器名
</code></pre> 
<h5><a id="_257"></a>强制停止容器</h5> 
<p>有时候需要停止正在运行的容器，就是用这个命令 。</p> 
<pre><code>docker kill 容器ID或者容器名
</code></pre> 
<h5><a id="_265"></a>删除已停止的容器</h5> 
<pre><code>删除一个容器:
	docker rm 容器ID
一次性删除多个容器:
	方式 1: docker rm -f $(docker ps -a -q)
	方式 2: docker ps -a -q | xargs docker rm
</code></pre> 
<hr> 
<h5><a id="_277"></a>重要</h5> 
<h6><a id="_279"></a>启动守护式容器</h6> 
<pre><code>docker run -d 容器名
</code></pre> 
<p><strong>说明：</strong></p> 
<p>以后台模式启动一个容器</p> 
<pre><code>docker run -d centos
</code></pre> 
<p>查看</p> 
<pre><code>docker ps 
</code></pre> 
<p>会发现容器已经退出！！！</p> 
<p>很重要的要说明的一点: Docker 容器后台运行,就必须有一个前台进程，容器运行的命令如果不是那些一直挂起的命令（比如运行top，tail），就是会自动退出的。</p> 
<p>这个是 docker 的机制问题,比如你的 web 容器,我们以 nginx 为例，正常情况下,我们配置启动服务只需要启动响应的 service 即可。例如 service nginx start</p> 
<p>但是,这样做,nginx 为后台进程模式运行,就导致 docker 前台没有运行的应用,</p> 
<p>这样的容器后台启动后,会立即自杀因为他觉得他没事可做了.</p> 
<p>所以，最佳的解决方案是,将你要运行的程序以前台进程的形式运行 。</p> 
<hr> 
<h6><a id="_313"></a>查看容器日志</h6> 
<pre><code>docker logs -f -t --tail 容器ID

*   -t 是加入时间戳
*   -f 跟随最新的日志打印
*   --tail 数字 显示最后多少条
</code></pre> 
<p><strong>实例：</strong></p> 
<p>运行容器，并让其不断输出语句</p> 
<pre><code>docker run -d centos /bin/sh -c "while true;do echo hello zzyy;sleep 2;done"
</code></pre> 
<p><img src="https://images2.imgbox.com/6c/d6/3JUAOBam_o.png" alt="在这里插入图片描述"></p> 
<p>查看每个时间下，日志尾的最新 10 条</p> 
<p><img src="https://images2.imgbox.com/11/81/0Mq2yy6P_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_338"></a>查看容器内运行的进程</h6> 
<pre><code>docker top 容器ID
</code></pre> 
<h6><a id="_344"></a>查看容器内部细节</h6> 
<p>此命令可以用来查看该容器进行数据卷的主机</p> 
<pre><code>docker inspect 容器ID
</code></pre> 
<h6><a id="_352"></a>进入正在运行的容器并以命令行交互</h6> 
<p>前面提到 使用 ctrl + Q + P 退出伪终端后，想要再次进入该怎么办，</p> 
<p><strong>方式 1：</strong></p> 
<pre><code>docker exec -it 容器ID bashShell
</code></pre> 
<p><img src="https://images2.imgbox.com/c2/d7/ABfCDZFp_o.png" alt="在这里插入图片描述"></p> 
<p><strong>方式 2：</strong></p> 
<pre><code>docker attach 容器ID
</code></pre> 
<p><img src="https://images2.imgbox.com/3c/e6/sZgdsV1J_o.png" alt="在这里插入图片描述"></p> 
<p><strong>上述两个区别</strong></p> 
<p>attach 直接进入容器启动命令的终端，不会启动新的进程 。</p> 
<p>exec 是在容器中打开新的终端，并且可以启动新的进程 【隔山打牛】。</p> 
<p><img src="https://images2.imgbox.com/b1/8a/XBg3k7X6_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<p><strong>容器命令总结：</strong></p> 
<p>查看容器 ：</p> 
<pre><code>docker ps # 查看正在运行的容器 
docker ps –a # 查看所有容器
</code></pre> 
<p>创建并启动容器 ：</p> 
<pre><code>docker run 参数

i：保持容器运行。通常与-t 同时使用。加入it这两个参数后，容器创建后自动进入容器中，退出容器后，容 器自动关闭。 
-t：为容器重新分配一个伪输入终端，通常与 -i 同时使用。
-d：以守护（后台）模式运行容器。创建一个容器在后台运行，需要使用docker exec 进入容器。退出后，容 器不会关闭。
-it 创建的容器一般称为交互式容器，-id 创建的容器一般称为守护式容器
--name：为创建的容器命名。
</code></pre> 
<pre><code>docker run -it --name=c1 centos:7 /bin/bash #创建交互式容器 
docker run -id --name=c2 centos:7 #创建守护式容器
</code></pre> 
<p><strong>注意：</strong> 交互式容器，exit后容器自动关闭，守护式容器会在后台执行</p> 
<p>进入容器：</p> 
<pre><code>docker exec -it c2 /bin/bash #进入容器
</code></pre> 
<p>停止容器：</p> 
<pre><code>docker stop 容器名称
</code></pre> 
<p>启动容器：</p> 
<pre><code>docker start 容器名称
</code></pre> 
<p>删除容器：如果容器是运行状态则删除失败，需要停止容器才能删除：</p> 
<pre><code>docker rm 容器名称
</code></pre> 
<p>查看容器信息：</p> 
<pre><code>docker inspect 容器名称
</code></pre> 
<hr> 
<h6><a id="_442"></a>从容器内拷贝文件到主机上</h6> 
<pre><code>docker cp  容器ID:容器内路径 目的主机路径
</code></pre> 
<p><img src="https://images2.imgbox.com/fa/c9/DAaLUShG_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="_453"></a>小总结</h3> 
<p>常用命令</p> 
<p><img src="https://images2.imgbox.com/a4/ad/AtpESVF6_o.png" alt="在这里插入图片描述"></p> 
<pre><code>attach  Attach to a running container  # 当前 shell 下 attach 连接指定运行镜像

build   Build an image from a Dockerfile   # 通过 Dockerfile 定制镜像

commit  Create a new image from a container changes  # 提交当前容器为新的镜像

cp   Copy files/folders from the containers filesystem to the host path   #从容器中拷贝指定文件或者目录到宿主机中

create  Create a new container   # 创建一个新的容器，同 run，但不启动容器

diff  Inspect changes on a container's filesystem  # 查看 docker 容器变化

events Get real time events from the server   # 从 docker 服务获取容器实时事件

exec   Run a command in an existing container    # 在已存在的容器上运行命令

export Stream the contents of a container as a tar archive   # 导出容器的内容流作为一个 tar 归档文件[对应 import ]

history  Show the history of an image     # 展示一个镜像形成历史

images    List images                          # 列出系统当前镜像

import    Create a new filesystem image from the contents of a tarball # 从tar包中的内容创建一个新的文件系统映像[对应export]

info      Display system-wide information               # 显示系统相关信息

inspect   Return low-level information on a container   # 查看容器详细信息

kill      Kill a running container                      # kill 指定 docker 容器

load      Load an image from a tar archive              # 从一个 tar 包中加载一个镜像[对应 save]

login     Register or Login to the docker registry server    # 注册或者登陆一个 docker 源服务器

logout    Log out from a Docker registry server          # 从当前 Docker registry 退出

logs      Fetch the logs of a container                 # 输出当前容器日志信息

port      Lookup the public-facing port which is NAT-ed to PRIVATE_PORT    # 查看映射端口对应的容器内部源端口

pause     Pause all processes within a container        # 暂停容器

ps        List containers                               # 列出容器列表

pull      Pull an image or a repository from the docker registry server   # 从docker镜像源服务器拉取指定镜像或者库镜像

push      Push an image or a repository to the docker registry server    # 推送指定镜像或者库镜像至docker源服务器

restart   Restart a running container                   # 重启运行的容器

rm        Remove one or more containers                 # 移除一个或者多个容器

rmi       Remove one or more images             # 移除一个或多个镜像[无容器使用该镜像才可删除，否则需删除相关容器才可继续或 -f 强制删除]

run       Run a command in a new container              # 创建一个新的容器并运行一个命令

save      Save an image to a tar archive                # 保存一个镜像为一个 tar 包[对应 load]

search    Search for an image on the Docker Hub         # 在 docker hub 中搜索镜像

start     Start a stopped containers                    # 启动容器

stop      Stop a running containers                     # 停止容器

tag       Tag an image into a repository                # 给源中镜像打标签

top       Lookup the running processes of a container   # 查看容器中运行的进程信息

unpause   Unpause a paused container                    # 取消暂停容器

version   Show the docker version information           # 查看 docker 版本号

wait      Block until a container stops, then print its exit code   # 截取容器停止时的退出状态值
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/908969f24980dd75b4d2783c2ca419ce/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">easyUI 在datagrid中进行单元格编辑，并在单元格加入自定义combobox下拉框</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5b1625dcada347df49506638b50b478a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">创建docker镜像并push到docker hub上</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>