<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32CubeMx之硬件SPI驱动W25Q64 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32CubeMx之硬件SPI驱动W25Q64" />
<meta property="og:description" content="STM32CubeMx之硬件SPI驱动W25Q64 1.SPI简介 SPI是串行外设接口（Serial Peripheral Interface）的缩写，是一种高速的，全双工，同步的通信总线，并且在芯片的管脚上只占用四根线，节约了芯片的管脚，同时为PCB的布局上节省空间，提供方便，正是出于这种简单易用的特性，越来越多的芯片集成了这种通信协议。
SPI：高速同步串行口。是一种标准的四线同步双向串行总线，是串行外围设备接口。是Motorola首先在其MC68HCXX系列处理器上定义的。SPI接口主要应用在 EEPROM，FLASH，实时时钟，AD转换器，还有数字信号处理器和数字信号解码器之间。
该接口一般使用4条线：串行时钟线（SCLK）、主机输入/从机输出数据线MISO、主机输出/从机输入数据线MOSI和低电平有效的从机选择线SS（有的SPI接口芯片带有中断信号线INT、有的SPI接口芯片没有主机输出/从机输入数据线MOSI）。
SPI根据时钟极性(CPOL)和时钟相位(CPHA)的不同，能够产生4时钟时序。时钟极性(CPOL)控制时钟线空闲电平状态，时钟相位(CPHA)用来控制数据采样极性。
模式0：CPOL=0,CPHA=0
时钟线空闲电平为低电平，第一个边沿采样数据，第二个边沿发送数据；
模式1：CPOL=0,CPHA=1
时钟线空闲电平为低电平，第一个边沿发送数据，第二个边沿采样数据；
模式2：CPOL=1,CPHA=0
时钟线空闲电平为高电平，第一个边沿采样数据，第二个边沿发送数据；
模式3：CPOL=1,CPHA=1
时钟线空闲电平为高电平，第一个边沿发送数据，第二个边沿采样数据；
2 硬件接口 CPU：STM32F103ZE 屏幕：3.5寸TFTLCD屏 Flash： W25Q64(SPI方式) 软件平台： STM32CubeMx 2.1 W25Q64简介 W25Q64(64M-bit)，W25Q16(16M-bit)和W25Q32(32M-bit)是为系统提供一个最小的空间、引脚和功耗的存储器解决方案的串行Flash存储器。25Q系列比普通的串行Flash存储器更灵活，性能更优越。基于双倍/四倍的SPI，它们能够可以立即完成提供数据给RAM，包括存储声音、文本和数据。芯片支持的工作电压2.7V到3.6V，正常工作时电流小于5mA，掉电时低于1uA。所有芯片提供标准的封装。
W25Q64/16/32由每页256字节组成。每页的256字节用一次页编程指令即可完成。每次可以擦除16页(1个扇区)、128 页(32KB块)、256页(64KB块)和全片擦除。
W25Q64的内存空间结构：一页256字节，4K(4096字节)为一个扇区，16个扇区为1块，容量为8M字节,共有128个块,2048个扇区。
W25Q64可擦写周期至少10万次，数据保存20年。
W25Q64驱动方式为SPI，支持SPI总线的工作模式0(0，0)和3( 1，1)。模式0和模式3。
2.2 硬件接口 引脚说明CS片选(低电平选中) PB12SPI2_MISO主机输入从机输出PB14SPI2_MOSI主机输出从机输入PB15SPI_SCK时钟线PB13 2.3 软件设置 SPI2配置:
NSS引脚配置：
3 代码生成 3.1 SPI初始化 SPI配置信息可参考STM32中文参考手册第23.5.1SPI控制寄存器小结。
3.2 SPI读写一字节函数 uint8_t SPI2_WROneByte(uint8_t data) { uint8_t dat_rx=0; HAL_SPI_TransmitReceive(&amp;hspi2,&amp;data,&amp;dat_rx,1,100); return dat_rx; } 3.3 W25Q64 编程 3.3.1 读取W25Q64制造商/芯片ID 示例代码：
/*获取W25Q64设备ID*/ uint16_t W25Q64_GetDeviceID(void) { uint16_t id; W25Q64_CS(0);//选中W25Q64 SPI2_WROneByte(0x90);//发送指令0x90 //发送24位地址 SPI2_WROneByte(0); SPI2_WROneByte(0); SPI2_WROneByte(0); id=SPI2_WROneByte(0xff);//制造商ID:0xef id&lt;&lt;=8; id|=SPI2_WROneByte(0xff);//设备ID:0x16 W25Q64_CS(1);//取消选中 return id; } 3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/14a87fa2117fed14f4b4c0454af0d590/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-26T19:18:39+08:00" />
<meta property="article:modified_time" content="2023-06-26T19:18:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32CubeMx之硬件SPI驱动W25Q64</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="STM32CubeMxSPIW25Q64_0"></a>STM32CubeMx之硬件SPI驱动W25Q64</h2> 
<h3><a id="1SPI_1"></a>1.SPI简介</h3> 
<blockquote> 
 <p>  SPI是串行外设接口（Serial Peripheral Interface）的缩写，是一种高速的，全双工，同步的通信总线，并且在芯片的管脚上只占用四根线，节约了芯片的管脚，同时为PCB的布局上节省空间，提供方便，正是出于这种简单易用的特性，越来越多的芯片集成了这种通信协议。<br>   SPI：高速同步串行口。是一种标准的四线同步双向串行总线，是串行外围设备接口。是Motorola首先在其MC68HCXX系列处理器上定义的。SPI接口主要应用在 EEPROM，FLASH，实时时钟，AD转换器，还有数字信号处理器和数字信号解码器之间。<br>   该接口一般使用4条线：串行时钟线（SCLK）、主机输入/从机输出数据线MISO、主机输出/从机输入数据线MOSI和低电平有效的从机选择线SS（有的SPI接口芯片带有中断信号线INT、有的SPI接口芯片没有主机输出/从机输入数据线MOSI）。<br>   SPI根据时钟极性(CPOL)和时钟相位(CPHA)的不同，能够产生4时钟时序。时钟极性(CPOL)控制时钟线空闲电平状态，时钟相位(CPHA)用来控制数据采样极性。</p> 
</blockquote> 
<p>  <mark>模式0：CPOL=0,CPHA=0</mark><br>   <mark>时钟线空闲电平为低电平，第一个边沿采样数据，第二个边沿发送数据；</mark><br> <img src="https://images2.imgbox.com/77/15/pAUN88KL_o.png" alt="在这里插入图片描述"><br>   <mark>模式1：CPOL=0,CPHA=1</mark><br>   <mark>时钟线空闲电平为低电平，第一个边沿发送数据，第二个边沿采样数据；</mark><br> <img src="https://images2.imgbox.com/24/fb/JEbRj8WC_o.png" alt="在这里插入图片描述"><br>   <mark>模式2：CPOL=1,CPHA=0</mark><br>   <mark>时钟线空闲电平为高电平，第一个边沿采样数据，第二个边沿发送数据；</mark><br> <img src="https://images2.imgbox.com/98/28/KGznrEax_o.png" alt="在这里插入图片描述"><br>   <mark>模式3：CPOL=1,CPHA=1</mark><br>   <mark>时钟线空闲电平为高电平，第一个边沿发送数据，第二个边沿采样数据；</mark><br> <img src="https://images2.imgbox.com/9e/67/tO3HKjMh_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2__19"></a>2 硬件接口</h3> 
<blockquote> 
 <ul><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled> <strong>CPU：</strong><font color="#ff0000">STM32F103ZE</font></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled> <strong>屏幕：</strong><font color="#ff0000">3.5寸TFTLCD屏</font></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled> <strong>Flash：</strong> <font color="#ff0000">W25Q64(SPI方式)</font></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled> <strong>软件平台：</strong><font color="#ff0000"> STM32CubeMx</font></li></ul> 
</blockquote> 
<h4><a id="21_W25Q64_26"></a>2.1 W25Q64简介</h4> 
<p>  W25Q64(64M-bit)，W25Q16(16M-bit)和W25Q32(32M-bit)是为系统提供一个最小的空间、引脚和功耗的存储器解决方案的串行Flash存储器。25Q系列比普通的串行Flash存储器更灵活，性能更优越。基于双倍/四倍的SPI，它们能够可以立即完成提供数据给RAM，包括存储声音、文本和数据。芯片支持的工作电压2.7V到3.6V，正常工作时电流小于5mA，掉电时低于1uA。所有芯片提供标准的封装。<br>   W25Q64/16/32由每页256字节组成。每页的256字节用一次页编程指令即可完成。每次可以擦除<font color="#ff0000">16页(1个扇区)</font>、<font color="#ff0000">128 页(32KB块)</font>、<font color="#ff0000">256页(64KB块)</font>和<font color="#ff0000">全片擦除</font>。<br>   W25Q64的内存空间结构：<font color="#ff0000">一页256字节</font>，<font color="#ff0000">4K(4096字节)</font>为一个<font color="#ff0000">扇区</font>，<font color="#ff0000">16个扇区</font>为<font color="#ff0000">1块</font>，容量为<font color="#ff0000">8M字节</font>,共有<font color="#ff0000">128</font>个块,<font color="#ff0000">2048</font>个扇区。<br>   W25Q64可擦写周期至少10万次，数据保存20年。<br>   W25Q64驱动方式为SPI，支持SPI总线的工作<font color="#ff0000">模式0(0，0)</font>和<font color="#ff0000">3( 1，1)</font>。模式0和模式3。</p> 
<h4><a id="22__32"></a>2.2 硬件接口</h4> 
<p><img src="https://images2.imgbox.com/20/76/1aZDiWA4_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th>引脚</th><th>说明</th></tr></thead><tbody><tr><td>CS</td><td>片选(低电平选中) <font color="#ff0000">PB12</font></td></tr><tr><td>SPI2_MISO</td><td>主机输入从机输出<font color="#ff0000">PB14</font></td></tr><tr><td>SPI2_MOSI</td><td>主机输出从机输入<font color="#ff0000">PB15</font></td></tr><tr><td>SPI_SCK</td><td>时钟线<font color="#ff0000">PB13</font></td></tr></tbody></table> 
<h4><a id="23__41"></a>2.3 软件设置</h4> 
<p>  <strong>SPI2配置:</strong><br> <img src="https://images2.imgbox.com/55/74/uG7ALeT4_o.png" alt="在这里插入图片描述"><br> <strong>  NSS引脚配置：</strong><br> <img src="https://images2.imgbox.com/a9/a0/CgBHDIEs_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3__46"></a>3 代码生成</h3> 
<h4><a id="31_SPI_47"></a>3.1 SPI初始化</h4> 
<p>  SPI配置信息可参考STM32中文参考手册第23.5.1SPI控制寄存器小结。<br> <img src="https://images2.imgbox.com/11/69/Y1jHSvhY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fc/4d/GErjEkRZ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="32_SPI_51"></a>3.2 SPI读写一字节函数</h4> 
<pre><code class="prism language-c"><span class="token class-name">uint8_t</span> <span class="token function">SPI2_WROneByte</span><span class="token punctuation">(</span><span class="token class-name">uint8_t</span> data<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">uint8_t</span> dat_rx<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token function">HAL_SPI_TransmitReceive</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>hspi2<span class="token punctuation">,</span><span class="token operator">&amp;</span>data<span class="token punctuation">,</span><span class="token operator">&amp;</span>dat_rx<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> dat_rx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="33_W25Q64__60"></a>3.3 W25Q64 编程</h4> 
<h5><a id="331_W25Q64ID_61"></a>3.3.1 读取W25Q64制造商/芯片ID</h5> 
<p><img src="https://images2.imgbox.com/b5/4b/PWKilQZD_o.png" alt="在这里插入图片描述"><br> <strong>  示例代码：</strong></p> 
<pre><code class="prism language-c"><span class="token comment">/*获取W25Q64设备ID*/</span>
<span class="token class-name">uint16_t</span> <span class="token function">W25Q64_GetDeviceID</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token class-name">uint16_t</span> id<span class="token punctuation">;</span>
	<span class="token function">W25Q64_CS</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//选中W25Q64</span>
	<span class="token function">SPI2_WROneByte</span><span class="token punctuation">(</span><span class="token number">0x90</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//发送指令0x90</span>
	<span class="token comment">//发送24位地址</span>
	<span class="token function">SPI2_WROneByte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SPI2_WROneByte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">SPI2_WROneByte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	id<span class="token operator">=</span><span class="token function">SPI2_WROneByte</span><span class="token punctuation">(</span><span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//制造商ID:0xef</span>
	id<span class="token operator">&lt;&lt;=</span><span class="token number">8</span><span class="token punctuation">;</span>
	id<span class="token operator">|=</span><span class="token function">SPI2_WROneByte</span><span class="token punctuation">(</span><span class="token number">0xff</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设备ID:0x16</span>
	<span class="token function">W25Q64_CS</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//取消选中</span>
	<span class="token keyword">return</span> id<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="332_W25Q640x02_83"></a>3.3.2 W25Q64页编程0x02</h5> 
<p><img src="https://images2.imgbox.com/d1/7d/SUomV4YK_o.png" alt="在这里插入图片描述"><br>   页编程指令允许从一个字节到256字节的数据编程(一页)(编程之前必须保证内存空间是 0XFF)。允许写入指令之前,必须先发送设备写使能指令。写使能开启后，设备才能接收编程指令。开启页编程先拉底/ CS， 然后发送指令代码“02 h”，接着发送一个 24 位地址(A23-A0)(发送3次，每次 8 位) 和至少一个数据字节(数据字节不能超过256字节)。数据字节发送完毕，需要拉高片选线 CS/，并判断状态位，等待写入结束。<br>   进行页编程时，如果数据字节数超过了256字节，地址将自动回到页的起始地址，覆盖掉之前的数据。在某些情况下,数据字节小于256字节(同一页内)， 也可以正常对其他字节存放，不会有任何影响。如果存放超过256字节的数据，需要分次编程存放。</p> 
<h5><a id="333_W25Q640x03_87"></a>3.3.3 W25Q64读数据0x03</h5> 
<p><img src="https://images2.imgbox.com/6e/3e/7XdPgB7V_o.png" alt="在这里插入图片描述"><br>   读取数据指令允许按顺序读取一个字节的内存数据。当片选CS/拉低之后， 发送读取指令0x03，紧随其后是一个24位的地址(A23-A0)(需要发送3次，每次8位，先发高位)。芯片收到地址后，将要读的数据按字节大小转移出去，数据是先转移高位，对于单片机，时钟下降沿发送数据，上升沿接收数据。读数据时，地址会自动增加，允许连续的读取数据。这意味着读取整个内存的数据,只要用一个指令就可以读完。数据读取完成之后，片选信号/ CS 拉高。读取数据的指令序列,如上图所示。如果一个读数据指令而发出的时候，设备正在擦除扇区,或者(忙= 1)，该读指令将被忽略,也不会对当前周期有什么影响。</p> 
<h5><a id="334_0x20_90"></a>3.3.4 扇区擦除0x20</h5> 
<p><img src="https://images2.imgbox.com/68/52/SqYRCK7Z_o.png" alt="在这里插入图片描述"><br>   扇区擦除指令可以擦除指定一个扇区(4 k字节)内所有数据，将内存空间恢复到 0xFF 状态。写入扇区擦除指令之前必须执行设备写使能(发送设备写使能指令 0x06)，并判断状态寄存器(状态寄存器位最低位必须等于0才能操作)。发送的扇区擦除指令前，先拉低/ CS， 接着发送扇区擦除指令码”20 h”，和24位地址(A23-A0)，地址发送完毕后，拉高片选线 CS/，并判断状态位，等待擦除结束。擦除一个扇区的最少需要 150ms 时间。</p> 
<h5><a id="335_0x050x35_93"></a>3.3.5 读状态0x05和0x35</h5> 
<p><img src="https://images2.imgbox.com/99/d8/ocJy6RDM_o.png" alt="在这里插入图片描述"><br>   读取状态寄存器的指令是8位的指令。发送指令之前，先将/ CS 拉低，再发送指令码“05 h”或者“35h”。设备收到读取状态寄存器的指令后，将状态信息(高位)依次移位发送出去，读出的状态信息，最低位为1代表忙，最低位为0代表可以操作，状态信息读取完毕，将片选线拉高。<br>   读状态寄存器指令可以使用在任何时候，即使程序在擦除的过程中或者写状态寄存器周期正在进行中。这可以检测忙碌状态来确定周期是否完成，以确定设备是否可以接受另一个指令。</p> 
<h5><a id="336_W25Q64_97"></a>3.3.6 W25Q64指令表</h5> 
<p><img src="https://images2.imgbox.com/65/3f/WAhIfBGD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4__99"></a>4 主函数</h3> 
<pre><code class="prism language-c">  <span class="token function">MX_GPIO_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">MX_FSMC_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">MX_USART1_UART_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">MX_SPI2_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* USER CODE BEGIN 2 */</span>
<span class="token keyword">char</span> buff<span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> buff_tx<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"HAL库配置SPI硬件时序驱动W25Q64S数据读写测试 -- Ver1.0"</span><span class="token punctuation">;</span>
<span class="token keyword">char</span> buf_rx<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">NT35310_Init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//LCD初始化</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span>LCD_WIDTH<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token string">"W25Q64初始化"</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"W25Q64初始化"</span><span class="token punctuation">,</span>BLACK<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"W25Q64 OK"</span><span class="token punctuation">,</span>RED<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">uint16_t</span> id<span class="token operator">=</span><span class="token function">W25Q64_GetDeviceID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">snprintf</span><span class="token punctuation">(</span>buff<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>buff<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">"ID信息：%#x"</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">60</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span>buff<span class="token punctuation">,</span>RED<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span>LCD_WIDTH<span class="token operator">/</span><span class="token number">2</span><span class="token operator">-</span><span class="token function">strlen</span><span class="token punctuation">(</span><span class="token string">"W25Q64读写测试"</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">2</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"W25Q64读写测试"</span><span class="token punctuation">,</span>BLACK<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">W25Q64_WriteData</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span>buf_tx<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>buf_tx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">W25Q64_ReadData</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span>buf_rx<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span>buf_tx<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">120</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"W25Q64写数据：OK"</span><span class="token punctuation">,</span>RED<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"W25Q64读数据：OK"</span><span class="token punctuation">,</span>RED<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">160</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span><span class="token string">"数据内容："</span><span class="token punctuation">,</span>RED<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">LCD_Display_Str</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">180</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token punctuation">(</span>u8 <span class="token operator">*</span><span class="token punctuation">)</span>buf_rx<span class="token punctuation">,</span>BLUE<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/3d/b0/7vrQwCSB_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1c044b44a84c316efac6f0c691c368e4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android Studio直接install系统签名的apk到设备</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/37518e9468c57551a11a023e42c06497/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">AIGC论文串烧！从GAN和Diffusion讲起</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>