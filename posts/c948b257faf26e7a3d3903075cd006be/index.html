<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>解决element组件位置偏移 , 包含 下拉框、 级联选择器、 popover组件、时间选择器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="解决element组件位置偏移 , 包含 下拉框、 级联选择器、 popover组件、时间选择器" />
<meta property="og:description" content="一 Select组件下拉位置错乱
在select标签里写
二 Popover组件位置偏移
如果el-popover里面的数据是动态的，有时候会出现位置偏移不在可视区域范围内的情况，主要是popper-options这个参数要设置，还请大家看看popper.js的文档
&lt;el-popover ref=&#34;dcPopover&#34; placement=&#34;left&#34; width=&#34;797&#34; trigger=&#34;hover&#34; :popper-options=&#34;{ boundariesElement: &#39;viewport&#39;, removeOnDestroy: true }&#34; @show=&#34;handleShow(scope)&#34; :open-delay=&#34;300&#34; &gt; 重点是 :popper-options=“{ boundariesElement: ‘viewport’, removeOnDestroy: true }”
boundariesElement 默认的是body!如果里面数据动态化之后有问题，需获取到数据之后要this.$refs.popover.updatePopper()一下（用来重新计算位置的） 三 时间选择器组件位置偏移
DOM结构中，溢出(overflow: scroll/auto;)容器以下，el-date-picker的输入框（动图中焦点所处位置）以上，存在一个overflow/overflow-x/overflow-y是auto/scroll的容器
为了让我们的fixed定位的控件在el-dialog里可以指哪打哪，我把项目引用的element-ui版本从1.x升级到了2.x（原因见 CSS Transform对定位的影响）
升级之后带来了一个问题：之前在el-dialog老老实实长到24px的控件莫名其妙的长高了2px（这里是另一个问题，下一篇再谈），demo在即，就临时给这些长高的控件的父容器加了overflow-y:hidden;（同时心里充满了膈应），demo过后我偶然发现，el-date-picker出现了上边动图的情况。
首先，弹出的这个日期picker是fixed定位的，如果想要让它能够跟随页面滚动，实现原理就一定是：在溢出容器上绑定scroll事件，回调方法中计算输入框相对窗口的offset，减去滚动offset(scrollTop,scrollLeft)，作为picker的offset。
这其中的重点是：如何找到这个溢出容器。element-ui的方式是在弹出的picker生成的时候，在DOM树种递归向上查找第一个overflow/overflow-x/overflow-y是auto/scroll的容器，在其上绑定scroll事件。详解
解决办法：
找到最外层的元素 加一个样式 ，overflow-y:auto ,亲测解决上图情况以及element-ui里任何以弹出的形式的组件会跟随鼠标滚动而滚动的问题** 四 Cascader级联选择器下拉位置错乱
忘了." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c948b257faf26e7a3d3903075cd006be/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-20T15:58:58+08:00" />
<meta property="article:modified_time" content="2023-08-20T15:58:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">解决element组件位置偏移 , 包含 下拉框、 级联选择器、 popover组件、时间选择器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>一 Select组件下拉位置错乱</strong><br> <img src="https://images2.imgbox.com/0a/4e/H24Oo0a2_o.png" alt="在这里插入图片描述"><br> 在select标签里写<br> <img src="https://images2.imgbox.com/47/a2/IXdV83ya_o.png" alt="在这里插入图片描述"></p> 
<p><strong>二 Popover组件位置偏移</strong></p> 
<p>如果el-popover里面的数据是动态的，有时候会出现位置偏移不在可视区域范围内的情况，主要是popper-options这个参数要设置，还请大家看看<a href="https://popper.js.org/" rel="nofollow">popper.js</a>的文档</p> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>el<span class="token operator">-</span>popover
  ref<span class="token operator">=</span><span class="token string">"dcPopover"</span>
  placement<span class="token operator">=</span><span class="token string">"left"</span>
  width<span class="token operator">=</span><span class="token string">"797"</span>
  trigger<span class="token operator">=</span><span class="token string">"hover"</span>
  <span class="token operator">:</span>popper<span class="token operator">-</span>options<span class="token operator">=</span><span class="token string">"{ boundariesElement: 'viewport', removeOnDestroy: true }"</span>
  @show<span class="token operator">=</span><span class="token string">"handleShow(scope)"</span>
  <span class="token operator">:</span>open<span class="token operator">-</span>delay<span class="token operator">=</span><span class="token string">"300"</span>
<span class="token operator">&gt;</span>
</code></pre> 
<p>重点是 :popper-options=“{ boundariesElement: ‘viewport’, removeOnDestroy: true }”</p> 
<ul><li>boundariesElement 默认的是body!</li><li>如果里面数据动态化之后有问题，需获取到数据之后要</li><li>this.$refs.popover.updatePopper()一下（用来重新计算位置的）</li></ul> 
<p><strong>三 时间选择器组件位置偏移</strong><br> <img src="https://images2.imgbox.com/ea/b5/dYaXCboE_o.gif" alt="在这里插入图片描述"><br> DOM结构中，溢出(overflow: scroll/auto;)容器以下，el-date-picker的输入框（动图中焦点所处位置）以上，存在一个overflow/overflow-x/overflow-y是auto/scroll的容器</p> 
<p>为了让我们的fixed定位的控件在el-dialog里可以指哪打哪，我把项目引用的element-ui版本从1.x升级到了2.x（原因见 CSS Transform对定位的影响）</p> 
<p>升级之后带来了一个问题：之前在el-dialog老老实实长到24px的控件莫名其妙的长高了2px（这里是另一个问题，下一篇再谈），demo在即，就临时给这些长高的控件的父容器加了overflow-y:hidden;（同时心里充满了膈应），demo过后我偶然发现，el-date-picker出现了上边动图的情况。</p> 
<p>首先，弹出的这个日期picker是fixed定位的，如果想要让它能够跟随页面滚动，实现原理就一定是：在溢出容器上绑定scroll事件，回调方法中计算输入框相对窗口的offset，减去滚动offset(scrollTop,scrollLeft)，作为picker的offset。</p> 
<p>这其中的重点是：如何找到这个溢出容器。element-ui的方式是在弹出的picker生成的时候，在DOM树种递归向上查找第一个overflow/overflow-x/overflow-y是auto/scroll的容器，在其上绑定scroll事件。<a href="https://zhuanlan.zhihu.com/p/32760390?from_voters_page=true" rel="nofollow">详解</a></p> 
<p><strong>解决办法：</strong></p> 
<ul><li>找到最外层的元素 加一个样式 ，overflow-y:auto ,</li><li>亲测解决上图情况</li><li>以及element-ui里任何以弹出的形式的组件<strong>会跟随鼠标滚动而滚动</strong>的问题**</li></ul> 
<p><strong>四 Cascader级联选择器下拉位置错乱</strong></p> 
<p>忘了.<br> <img src="https://images2.imgbox.com/d8/bb/DKbtYxeP_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/828bef98b5ee032c706d3863e0fa337e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Vue &#43; Element UI&#43;Scss &#43; Vuex一键换肤 , 一键换字体大小 ,动态替换全局主题颜色</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/171eeb9e7002e26b564ccb2dad5f7eb8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">解决npm安装错误:No matching version found for XXX@3.3.6</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>