<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【数据库】 mysql用户授权详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【数据库】 mysql用户授权详解" />
<meta property="og:description" content="目录
MySQL用户授权
一，密码策略
1，查看临时密码
2，查看数据库当前密码策略：
二， 用户授权和撤销授权
1、创建用户
2，删除用户
3，授权和回收权限
MySQL用户授权 一，密码策略 mysql刚安装时，临时密码会存储在 /var/log/mysqld.log
1，查看临时密码 方法一：直接给出密码
[root@localhost ~]# awk &#39;/temporary password/ {print $NF}&#39; /var/log/mysqld.log *2D):irrJ_!_ 方法二：查到的语句的最后为密码
[root@localhost ~]# grep &#39;password&#39; /var/log/mysqld.log 2023-02-07T13:07:17.842453Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: *2D):irrJ_!_ 2，查看数据库当前密码策略： mysql8.0.30 [(none)]&gt;show VARIABLES like&#34;%password%&#34;; 二， 用户授权和撤销授权 MySql8有新的安全要求，不能像之前的版本那样一次性创建用户并授权。需要先创建用户，再进行授权操作。
mysql8.0.30 [(none)]&gt;grant all privileges on *.* to &#39;xiaoming&#39;@&#39;%&#39;;
ERROR 1410 (42000): You are not allowed to create a user with GRANT" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/06a1d5e0772da42673c9ad6d87b1d816/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-11T20:00:00+08:00" />
<meta property="article:modified_time" content="2023-02-11T20:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【数据库】 mysql用户授权详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="MySQL%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83-toc" style="margin-left:0px;"><a href="#MySQL%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83" rel="nofollow">MySQL用户授权</a></p> 
<p id="%E4%B8%80%EF%BC%8C%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5-toc" style="margin-left:40px;"><a href="#%E4%B8%80%EF%BC%8C%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5" rel="nofollow">一，密码策略</a></p> 
<p id="1%EF%BC%8C%E6%9F%A5%E7%9C%8B%E4%B8%B4%E6%97%B6%E5%AF%86%E7%A0%81-toc" style="margin-left:80px;"><a href="#1%EF%BC%8C%E6%9F%A5%E7%9C%8B%E4%B8%B4%E6%97%B6%E5%AF%86%E7%A0%81" rel="nofollow">1，查看临时密码</a></p> 
<p id="2%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BD%93%E5%89%8D%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5%EF%BC%9A-toc" style="margin-left:80px;"><a href="#2%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BD%93%E5%89%8D%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5%EF%BC%9A" rel="nofollow">2，查看数据库当前密码策略：</a></p> 
<p id="%E4%BA%8C%EF%BC%8C%20%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%E5%92%8C%E6%92%A4%E9%94%80%E6%8E%88%E6%9D%83-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%EF%BC%8C%20%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%E5%92%8C%E6%92%A4%E9%94%80%E6%8E%88%E6%9D%83" rel="nofollow">二， 用户授权和撤销授权</a></p> 
<p id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7" rel="nofollow">1、创建用户</a></p> 
<p id="2%EF%BC%8C%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7-toc" style="margin-left:80px;"><a href="#2%EF%BC%8C%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7" rel="nofollow">2，删除用户</a></p> 
<p id="3%EF%BC%8C%E6%8E%88%E6%9D%83%E5%92%8C%E5%9B%9E%E6%94%B6%E6%9D%83%E9%99%90-toc" style="margin-left:80px;"><a href="#3%EF%BC%8C%E6%8E%88%E6%9D%83%E5%92%8C%E5%9B%9E%E6%94%B6%E6%9D%83%E9%99%90" rel="nofollow">3，授权和回收权限</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="MySQL%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83" style="margin-left:0;"><span style="color:#0d0016;">MySQL用户授权</span></h2> 
<h3 id="%E4%B8%80%EF%BC%8C%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5" style="margin-left:0;"><span style="color:#0d0016;">一，密码策略</span></h3> 
<p style="margin-left:0;">mysql刚安装时，临时密码会存储在 /var/log/mysqld.log</p> 
<p style="margin-left:0;"></p> 
<h4 id="1%EF%BC%8C%E6%9F%A5%E7%9C%8B%E4%B8%B4%E6%97%B6%E5%AF%86%E7%A0%81" style="margin-left:0px;"><span style="color:#0d0016;">1，查看临时密码</span></h4> 
<p style="margin-left:0;"><strong><span style="color:#0d0016;">方法一：直接给出密码</span></strong></p> 
<pre><code class="hljs">[root@localhost ~]# awk '/temporary password/ {print $NF}' /var/log/mysqld.log

*2D):irrJ_!_</code></pre> 
<p><img alt="" height="98" src="https://images2.imgbox.com/ae/f8/m2hTvCt9_o.png" width="1175"></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><strong><span style="color:#0d0016;">方法二：查到的语句的最后为密码</span></strong></p> 
<pre><code class="hljs">[root@localhost ~]# grep 'password' /var/log/mysqld.log

2023-02-07T13:07:17.842453Z 6 [Note] [MY-010454] [Server] A temporary password is generated for root@localhost: *2D):irrJ_!_</code></pre> 
<p><img alt="" height="129" src="https://images2.imgbox.com/82/38/4Gv04I9o_o.png" width="1200"></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<h4 id="2%EF%BC%8C%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BD%93%E5%89%8D%E5%AF%86%E7%A0%81%E7%AD%96%E7%95%A5%EF%BC%9A" style="margin-left:0px;"><span style="color:#0d0016;">2，查看数据库当前密码策略：</span></h4> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;show VARIABLES like"%password%";</code></pre> 
<p><img alt="" height="905" src="https://images2.imgbox.com/0a/30/TEwagFHv_o.png" width="1008"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<h3 id="%E4%BA%8C%EF%BC%8C%20%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83%E5%92%8C%E6%92%A4%E9%94%80%E6%8E%88%E6%9D%83" style="margin-left:0;"><span style="color:#0d0016;">二， 用户授权和撤销授权</span></h3> 
<p style="margin-left:0;"><span style="color:#333333;">MySql8有新的安全要求，不能像之前的版本那样一次性创建用户并授权。需要先创建用户，再进行授权操作。</span></p> 
<p style="margin-left:0;">mysql8.0.30 [(none)]&gt;grant all privileges on *.* to 'xiaoming'@'%';</p> 
<p style="margin-left:0;">ERROR 1410 (42000): You are not allowed to create a user with GRANT</p> 
<p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
<p><img alt="" height="103" src="https://images2.imgbox.com/b8/fc/VO3QFsv3_o.png" width="1019"></p> 
<p style="margin-left:0;"></p> 
<h4 id="1%E3%80%81%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7" style="margin-left:0px;"><span style="color:#0d0016;"><strong>1、创建用户</strong></span></h4> 
<blockquote> 
 <p style="margin-left:0;"><span style="color:#0d0016;">创建新用户，语法：create user 'username'@'host' identified by 'password';</span></p> 
 <p style="margin-left:0;">说明：username为自定义的用户名，host为客户端的域名或者IP，如果host为<span style="color:#aa1111;">'%'</span>时表示为任意IP，password为密码。</p> 
</blockquote> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（1）创建一个用户名为</strong><strong>xiaoming</strong><strong>，客户端的</strong><strong>ip</strong><strong>为任意，密码为</strong><strong>Guest123!</strong><strong>的新用户</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;create user xiaoming@'%' identified by 'Guest123!';

Query OK, 0 rows affected (0.01 sec)</code></pre> 
<p><img alt="" height="132" src="https://images2.imgbox.com/e8/8b/Hv5JRKDW_o.png" width="1068"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（2）查看刚创建的的用户信息</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;select user,host from mysql.user;

+------------------+-----------+

| user             | host      |

+------------------+-----------+

| root             | %         |

| xiaoming         | %         |

| mysql.infoschema | localhost |

| mysql.session    | localhost |

| mysql.sys        | localhost |

+------------------+-----------+

5 rows in set (0.00 sec)</code></pre> 
<p><img alt="" height="417" src="https://images2.imgbox.com/66/35/T9F1dnT9_o.png" width="810"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（3）使用xiaoming用户登录一下数据库：</strong></p> 
<pre><code class="hljs">[root@localhost ~]# mysql -uxiaoming -p'Guest123!';

mysql: [Warning] Using a password on the command line interface can be insecure.

Welcome to the MySQL monitor.  Commands end with ; or \g.

Your MySQL connection id is 12

Server version: 8.0.32 MySQL Community Server - GPL



Copyright (c) 2000, 2023, Oracle and/or its affiliates.



Oracle is a registered trademark of Oracle Corporation and/or its

affiliates. Other names may be trademarks of their respective

owners.



Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.</code></pre> 
<p style="margin-left:0;"><img alt="" height="439" src="https://images2.imgbox.com/9d/a8/OsX9qCrp_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（4）使用xiaoming用户查看所有的数据库：</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;show databases;

+--------------------+

| Database           |

+--------------------+

| information_schema |

| performance_schema |

+--------------------+

2 rows in set (0.01 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="312" src="https://images2.imgbox.com/ae/04/vqcivqgf_o.png" width="595"></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><strong>（5）也可以在windows端登录xiaoming用户：</strong></p> 
<p><img alt="" height="551" src="https://images2.imgbox.com/9d/66/IlG1tpdN_o.png" width="1020"></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<h4 id="2%EF%BC%8C%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7" style="margin-left:0px;"><span style="color:#0d0016;">2，删除用户</span></h4> 
<p><strong><span style="color:#0d0016;">（1）删除用户名为xiaoming，客户端的ip为任意，密码为Guest123!的用户</span></strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;drop user xiaoming@'%';

Query OK, 0 rows affected (0.01 sec)</code></pre> 
<p><img alt="" height="135" src="https://images2.imgbox.com/e0/21/uxb50gI7_o.png" width="694"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（2）删除后的user表中已经没了xiaoming的信息</strong></span></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;select user,host from mysql.user;

+------------------+-----------+

| user             | host      |

+------------------+-----------+

| root             | %         |

| mysql.infoschema | localhost |

| mysql.session    | localhost |

| mysql.sys        | localhost |

+------------------+-----------+

4 rows in set (0.00 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="360" src="https://images2.imgbox.com/a1/8e/7CwBYTK5_o.png" width="857"></p> 
<p style="margin-left:0;"><span style="color:#aa5500;">  </span></p> 
<blockquote> 
 <p style="margin-left:0;"><span style="color:#0d0016;">注意，如果删除用户时显示如下提示：</span></p> 
 <p style="margin-left:0;"><span style="color:#0d0016;">mysql8.0[mysql]&gt;drop user xiaoming;</span></p> 
 <p style="margin-left:0;"><span style="color:#0d0016;">ERROR 1227(42000): Access denied; you need (atleast oneof) the SYSTEM_USER privilege(s) forthis operation</span></p> 
 <p style="margin-left:0;"></p> 
 <p style="margin-left:0;"><span style="color:#0d0016;">需要执行该语句：</span></p> 
 <p style="margin-left:0;"><span style="color:#0d0016;">【mysql8.0 [(none)]&gt;grant  system_user  on *.*  to  root@'%';】</span></p> 
</blockquote> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<h4 id="3%EF%BC%8C%E6%8E%88%E6%9D%83%E5%92%8C%E5%9B%9E%E6%94%B6%E6%9D%83%E9%99%90" style="margin-left:0px;"><span style="color:#0d0016;"><strong>3，授权和回收权限</strong></span></h4> 
<p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
<p style="margin-left:0;"><strong><span style="color:#333333;">授予权限的原则：</span></strong></p> 
<p style="margin-left:0;"><span style="color:#333333;">（1）只授予能满足需要的最小权限 ，防止用户干坏事。比如用户只是需要查</span></p> 
<p style="margin-left:0;"><span style="color:#333333;">          询，那就只给 select 权限就可以了，不要给用户赋予update 、 insert 或</span></p> 
<p style="margin-left:0;"><span style="color:#333333;">           者 delete 权限 </span></p> 
<p style="margin-left:0;"><span style="color:#333333;">（2）创建用户的时候限制用户的登录主机 ，一般是限制成指定 IP 或者内网</span></p> 
<p style="margin-left:0;"><span style="color:#333333;">           IP 段。 </span></p> 
<p style="margin-left:0;"><span style="color:#333333;">（3）为每个用户设置满足密码复杂度的密码 。</span></p> 
<p style="margin-left:0;"><span style="color:#333333;">（4）定期清理不需要的用户 ，回收权限或者删除用户。</span></p> 
<p style="margin-left:0;"><span style="color:#333333;"> </span></p> 
<blockquote> 
 <p style="margin-left:0;"><span style="color:#333333;">授权语法：<span style="background-color:#f3f4f4;">grant 权限列表 on 库名.表名 to 用户名@'主机' [with GRANT option];</span></span></p> 
 <p style="margin-left:0;"><strong><span style="color:#333333;"><span style="background-color:#f3f4f4;">没有</span><span style="background-color:#f3f4f4;">with GRANT option</span><span style="background-color:#f3f4f4;">,</span><span style="background-color:#f3f4f4;">被授权者无法授权于下一个人用户</span></span></strong></p> 
</blockquote> 
<div> 
 <table cellspacing="0"><tbody><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.8125in;"> <p style="margin-left:0;"><strong>mysql</strong><strong>用户常用权限列表</strong></p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.327in;"> <p style="margin-left:0;"><strong>说明</strong></p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">all 或者all privileges</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.3465in;"> <p style="margin-left:0;">授予用户所有权限</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">create</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.3465in;"> <p style="margin-left:0;">授予用户创建新数据库和表的权限</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">drop</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.3465in;"> <p style="margin-left:0;">授予用户删除数据库和表的权限</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">delete</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.3465in;"> <p style="margin-left:0;">授予用户删除表中的行的权限</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">alter</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.3465in;"> <p style="margin-left:0;">授予用户修改表结构的权限</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">insert</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.3465in;"> <p style="margin-left:0;">授予用户在表中插入行（add）的权限</p> </td></tr><tr><td style="border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">select</p> </td><td style="border-color:#a3a3a3;vertical-align:top;width:3.4159in;"> <p style="margin-left:0;">授予用户运行select命令以从表中读取数据的权限</p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:1.793in;"> <p style="margin-left:0;">update</p> </td><td style="background-color:#f8f8f8;border-color:#a3a3a3;vertical-align:top;width:3.3465in;"> <p style="margin-left:0;">授予用户更新表中的数据的权限</p> </td></tr></tbody></table> 
</div> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#6eaad7;"><strong>查看授予用户的权限的四种方法：</strong></span></p> 
<p style="margin-left:0;"><span style="color:#0d0016;">（1）</span><span style="color:#aa5500;"> </span><strong>查看root</strong><strong>用户的权限（方法一）</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;show grants;

+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

| Grants for root@%                                                                                                                                                                                                                                                                                                                                                                                |

+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

| GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, SHUTDOWN, PROCESS, FILE, REFERENCES, INDEX, ALTER, SHOW DATABASES, SUPER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION SLAVE, REPLICATION CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, TRIGGER, CREATE TABLESPACE, CREATE ROLE, DROP ROLE ON *.* TO `root`@`%` WITH GRANT OPTION |

+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

1 row in set (0.00 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="710" src="https://images2.imgbox.com/ca/3b/hw7YF6yx_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（2）查看</strong><strong>xiaoming</strong><strong>用户的权限（方法二）</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;show grants for xiaoming@'%';

+--------------------------------------+

| Grants for xiaoming@%                |

+--------------------------------------+

| GRANT USAGE ON *.* TO `xiaoming`@`%` |

+--------------------------------------+

1 row in set (0.00 sec)</code></pre> 
<p><br><img alt="" height="274" src="https://images2.imgbox.com/3a/85/z03r7D4J_o.png" width="784"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（3）mysql8</strong><strong>.0</strong><strong>[mysql]&gt;</strong><strong>select</strong><strong>* </strong><strong>from </strong><strong>mysql</strong><strong>.user</strong><strong>;</strong><strong>（方法三）</strong></span></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（4）方法四：</strong></span></p> 
<p><img alt="" height="297" src="https://images2.imgbox.com/93/c0/rSyD4TGl_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#fe2c24;"><strong>授权操作</strong></span></p> 
<p style="margin-left:0;"><span style="color:#6eaad7;"><strong>不具有授予下一个人权限的权利的授权</strong></span></p> 
<p style="margin-left:0;"><strong><span style="color:#0d0016;">（1）此时，xiaoming用户可以访问以下两个数据库，须授予其他数据库的访问权限，才能对其</span></strong></p> 
<p style="margin-left:0;"><strong><span style="color:#0d0016;">         它数据库进行操作</span></strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;show databases;

+--------------------+

| Database           |

+--------------------+

| information_schema |

| performance_schema |

+--------------------+

2 rows in set (0.01 sec)</code></pre> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span> <img alt="" height="312" src="https://images2.imgbox.com/9e/ca/CKrnSaQg_o.png" width="595"></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#aa5500;"> </span></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（2）给</strong><strong>xiaoming</strong><strong>用户授予所有权限</strong></span></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>*.*中第一个*表示所有数据库，第二个*表示所有数据表</strong></span></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;grant all privileges on *.* to xiaoming@'%';

Query OK, 0 rows affected (0.01 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="142" src="https://images2.imgbox.com/8a/c4/gVPsH6to_o.png" width="948"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（3）此时</strong><strong>xiaoming</strong><strong>用户拥有和</strong><strong>root</strong><strong>用户一样的权限，可以访问其它数据库的权限</strong></span></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;show databases;

+--------------------+

| Database           |

+--------------------+

| chap03             |

| information_schema |

| mysql              |

| performance_schema |

| sys                |

+--------------------+

5 rows in set (0.00 sec)</code></pre> 
<p><br><img alt="" height="396" src="https://images2.imgbox.com/86/ba/sXSI2HWB_o.png" width="588"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（4）此时的</strong><strong>xiaoming</strong><strong>用户没有赋予下一个人权限的权利</strong></span></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;grant all privileges on *.* to xiaohei@'%';

ERROR 1045 (28000): Access denied for user 'xiaoming'@'%' (using password: YES)

mysql8.0.30 [(none)]&gt;</code></pre> 
<p style="margin-left:0;"><img alt="" height="108" src="https://images2.imgbox.com/3c/ea/kOGMzqFt_o.png" width="1160"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#6eaad7;"><strong>具有授予下一个人权限的权利的授权</strong></span></p> 
<p style="margin-left:0;"><strong>（1）重新授予</strong><strong>xiaoming</strong><strong>用户授予其他用户权限的权利</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;grant all privileges on *.* to xiaoming@'%' with GRANT option;

Query OK, 0 rows affected (0.00 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="130" src="https://images2.imgbox.com/da/98/NaBuhews_o.png" width="1200"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（2）使用</strong><strong>xiaoming</strong><strong>用户为</strong><strong>xiaohei </strong><strong>用户授权</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;grant all privileges on *.* to xiaohei@'%';

Query OK, 0 rows affected (0.01 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="124" src="https://images2.imgbox.com/c4/23/m1dM195j_o.png" width="952"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（3）此时</strong><strong>xiaohei</strong><strong>用户拥有访问所有数据库的权利</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;select user();       （查看当前的用户）

+-------------------+

| user()            |

+-------------------+

| xiaohei@localhost |

+-------------------+

1 row in set (0.00 sec)



mysql8.0.30 [(none)]&gt;show databases;     （此用户可以访问以下数据库的权利）

+--------------------+

| Database           |

+--------------------+

| chap03             |

| information_schema |

| mysql              |

| performance_schema |

| sys                |

+--------------------+

5 rows in set (0.00 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="622" src="https://images2.imgbox.com/de/23/fneHmHBT_o.png" width="809"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#fe2c24;"><strong>收回权限</strong></span></p> 
<blockquote> 
 <p style="margin-left:0;"><strong><span style="color:#0d0016;">收回权限(不包含赋权权限)</span></strong></p> 
 <p style="margin-left:0;">REVOKE ALL PRIVILEGES ON *.* FROM username;</p> 
 <p style="margin-left:0;"><strong><span style="color:#0d0016;">收回赋权权限</span></strong></p> 
 <p style="margin-left:0;">REVOKE GRANT OPTION ON *.* FROM username;</p> 
</blockquote> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#6eaad7;"><strong>收回赋权权限</strong></span></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（1）收回</strong><strong>xiaoming</strong><strong>用户授予其他用户权限的权利</strong></span></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;revoke grant option on *.* from xiaoming;

Query OK, 0 rows affected (0.00 sec)</code></pre> 
<p style="margin-left:0;"><img alt="" height="133" src="https://images2.imgbox.com/a3/1f/kMJ8oCZi_o.png" width="924"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><strong>（2）此时，xiaoming用户不在拥有授予其他用户的权限</strong></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;grant all privileges on *.* to xiaohei@'%';

ERROR 1045 (28000): Access denied for user 'xiaoming'@'%' (using password: YES)

mysql8.0.30 [(none)]&gt;</code></pre> 
<p style="margin-left:0;"><img alt="" height="108" src="https://images2.imgbox.com/fc/79/KGcczcMF_o.png" width="1160"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#6eaad7;"><strong>收回权限(不包含赋权权限)</strong></span></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（1）收回</strong><strong>xiaoming</strong><strong>用户的所有权限</strong></span></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;revoke all privileges on *.* from xiaoming@'%';

Query OK, 0 rows affected (0.00 sec)</code></pre> 
<p><img alt="" height="139" src="https://images2.imgbox.com/f2/ab/iLNeVrqu_o.png" width="989"></p> 
<p style="margin-left:0;"></p> 
<p style="margin-left:0;"><span style="color:#0d0016;"><strong>（2）此时</strong><strong>xiaoming</strong><strong>用户不在拥有访问其它数据库的权限</strong></span></p> 
<pre><code class="hljs">mysql8.0.30 [(none)]&gt;show databases;

+--------------------+

| Database           |

+--------------------+

| information_schema |

| performance_schema |

+--------------------+

2 rows in set (0.00 sec)</code></pre> 
<p><img alt="" height="306" src="https://images2.imgbox.com/e6/b4/LwZGRsX7_o.png" width="575"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0a14fb2531e131abc6bfb8b984575fcb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">英语发音规则</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/efc58d6182d683768e84354a8b4424fa/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python获取搜索引擎结果</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>