<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>自定义圆角布局和圆角TextView - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="自定义圆角布局和圆角TextView" />
<meta property="og:description" content="用到的资源文件，在res下面values文件夹创建attrs.xml资源文件：
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;resources xmlns:tools=&#34;http://schemas.android.com/tools&#34; tools:ignore=&#34;ResourceName&#34;&gt; &lt;!-- 以下是重用attr的正确姿势,一切为了在布局中可以自动提示--&gt; &lt;!-- 圆角矩形背景色 --&gt; &lt;attr name=&#34;rv_backgroundColor&#34; format=&#34;color&#34;/&gt; &lt;!-- 圆角矩形背景色press --&gt; &lt;attr name=&#34;rv_backgroundPressColor&#34; format=&#34;color&#34;/&gt; &lt;!-- 圆角弧度,单位dp--&gt; &lt;attr name=&#34;rv_cornerRadius&#34; format=&#34;dimension&#34;/&gt; &lt;!-- 圆角弧度,单位dp--&gt; &lt;attr name=&#34;rv_strokeWidth&#34; format=&#34;dimension&#34;/&gt; &lt;!-- 圆角边框颜色--&gt; &lt;attr name=&#34;rv_strokeColor&#34; format=&#34;color&#34;/&gt; &lt;!-- 圆角边框颜色press --&gt; &lt;attr name=&#34;rv_strokePressColor&#34; format=&#34;color&#34;/&gt; &lt;!-- 文字颜色press--&gt; &lt;attr name=&#34;rv_textPressColor&#34; format=&#34;color&#34;/&gt; &lt;!-- 圆角弧度是高度一半--&gt; &lt;attr name=&#34;rv_isRadiusHalfHeight&#34; format=&#34;boolean&#34;/&gt; &lt;!-- 圆角矩形宽高相等,取较宽高中大值--&gt; &lt;attr name=&#34;rv_isWidthHeightEqual&#34; format=&#34;boolean&#34;/&gt; &lt;!-- 圆角弧度,单位dp,TopLeft--&gt; &lt;attr name=&#34;rv_cornerRadius_TL&#34; format=&#34;dimension&#34;/&gt; &lt;!-- 圆角弧度,单位dp,TopRight--&gt; &lt;attr name=&#34;rv_cornerRadius_TR&#34; format=&#34;dimension&#34;/&gt; &lt;!-- 圆角弧度,单位dp,BottomLeft--&gt; &lt;attr name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/45d2952480dc103d465d5cd203b66904/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T15:49:15+08:00" />
<meta property="article:modified_time" content="2024-01-04T15:49:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">自定义圆角布局和圆角TextView</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>用到的资源文件，在res下面values文件夹创建attrs.xml资源文件：</p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources xmlns:tools="http://schemas.android.com/tools"
           tools:ignore="ResourceName"&gt;

    &lt;!-- 以下是重用attr的正确姿势,一切为了在布局中可以自动提示--&gt;
    &lt;!-- 圆角矩形背景色 --&gt;
    &lt;attr name="rv_backgroundColor" format="color"/&gt;
    &lt;!-- 圆角矩形背景色press --&gt;
    &lt;attr name="rv_backgroundPressColor" format="color"/&gt;
    &lt;!-- 圆角弧度,单位dp--&gt;
    &lt;attr name="rv_cornerRadius" format="dimension"/&gt;
    &lt;!-- 圆角弧度,单位dp--&gt;
    &lt;attr name="rv_strokeWidth" format="dimension"/&gt;
    &lt;!-- 圆角边框颜色--&gt;
    &lt;attr name="rv_strokeColor" format="color"/&gt;
    &lt;!-- 圆角边框颜色press --&gt;
    &lt;attr name="rv_strokePressColor" format="color"/&gt;
    &lt;!-- 文字颜色press--&gt;
    &lt;attr name="rv_textPressColor" format="color"/&gt;
    &lt;!-- 圆角弧度是高度一半--&gt;
    &lt;attr name="rv_isRadiusHalfHeight" format="boolean"/&gt;
    &lt;!-- 圆角矩形宽高相等,取较宽高中大值--&gt;
    &lt;attr name="rv_isWidthHeightEqual" format="boolean"/&gt;
    &lt;!-- 圆角弧度,单位dp,TopLeft--&gt;
    &lt;attr name="rv_cornerRadius_TL" format="dimension"/&gt;
    &lt;!-- 圆角弧度,单位dp,TopRight--&gt;
    &lt;attr name="rv_cornerRadius_TR" format="dimension"/&gt;
    &lt;!-- 圆角弧度,单位dp,BottomLeft--&gt;
    &lt;attr name="rv_cornerRadius_BL" format="dimension"/&gt;
    &lt;!-- 圆角弧度,单位dp,BottomRight--&gt;
    &lt;attr name="rv_cornerRadius_BR" format="dimension"/&gt;
    &lt;!-- 是否有Ripple效果,api21+有效--&gt;
    &lt;attr name="rv_isRippleEnable" format="boolean"/&gt;

    &lt;declare-styleable name="RoundTextView"&gt;
        &lt;attr name="rv_backgroundColor"/&gt;
        &lt;attr name="rv_backgroundPressColor"/&gt;
        &lt;attr name="rv_cornerRadius"/&gt;
        &lt;attr name="rv_strokeWidth"/&gt;
        &lt;attr name="rv_strokeColor"/&gt;
        &lt;attr name="rv_strokePressColor"/&gt;
        &lt;attr name="rv_textPressColor"/&gt;
        &lt;attr name="rv_isRadiusHalfHeight"/&gt;
        &lt;attr name="rv_isWidthHeightEqual"/&gt;
        &lt;attr name="rv_cornerRadius_TL"/&gt;
        &lt;attr name="rv_cornerRadius_TR"/&gt;
        &lt;attr name="rv_cornerRadius_BL"/&gt;
        &lt;attr name="rv_cornerRadius_BR"/&gt;
        &lt;attr name="rv_isRippleEnable"/&gt;
    &lt;/declare-styleable&gt;

    &lt;declare-styleable name="RoundLinearLayout"&gt;
        &lt;attr name="rv_backgroundColor"/&gt;
        &lt;attr name="rv_backgroundPressColor"/&gt;
        &lt;attr name="rv_cornerRadius"/&gt;
        &lt;attr name="rv_strokeWidth"/&gt;
        &lt;attr name="rv_strokeColor"/&gt;
        &lt;attr name="rv_strokePressColor"/&gt;
        &lt;attr name="rv_isRadiusHalfHeight"/&gt;
        &lt;attr name="rv_isWidthHeightEqual"/&gt;
        &lt;attr name="rv_cornerRadius_TL"/&gt;
        &lt;attr name="rv_cornerRadius_TR"/&gt;
        &lt;attr name="rv_cornerRadius_BL"/&gt;
        &lt;attr name="rv_cornerRadius_BR"/&gt;
        &lt;attr name="rv_isRippleEnable"/&gt;
    &lt;/declare-styleable&gt;

    &lt;declare-styleable name="RoundRelativeLayout"&gt;
        &lt;attr name="rv_backgroundColor"/&gt;
        &lt;attr name="rv_backgroundPressColor"/&gt;
        &lt;attr name="rv_cornerRadius"/&gt;
        &lt;attr name="rv_strokeWidth"/&gt;
        &lt;attr name="rv_strokeColor"/&gt;
        &lt;attr name="rv_strokePressColor"/&gt;
        &lt;attr name="rv_isRadiusHalfHeight"/&gt;
        &lt;attr name="rv_isWidthHeightEqual"/&gt;
        &lt;attr name="rv_cornerRadius_TL"/&gt;
        &lt;attr name="rv_cornerRadius_TR"/&gt;
        &lt;attr name="rv_cornerRadius_BL"/&gt;
        &lt;attr name="rv_cornerRadius_BR"/&gt;
        &lt;attr name="rv_isRippleEnable"/&gt;
    &lt;/declare-styleable&gt;

    &lt;declare-styleable name="RoundFrameLayout"&gt;
        &lt;attr name="rv_backgroundColor"/&gt;
        &lt;attr name="rv_backgroundPressColor"/&gt;
        &lt;attr name="rv_cornerRadius"/&gt;
        &lt;attr name="rv_strokeWidth"/&gt;
        &lt;attr name="rv_strokeColor"/&gt;
        &lt;attr name="rv_strokePressColor"/&gt;
        &lt;attr name="rv_isRadiusHalfHeight"/&gt;
        &lt;attr name="rv_isWidthHeightEqual"/&gt;
        &lt;attr name="rv_cornerRadius_TL"/&gt;
        &lt;attr name="rv_cornerRadius_TR"/&gt;
        &lt;attr name="rv_cornerRadius_BL"/&gt;
        &lt;attr name="rv_cornerRadius_BR"/&gt;
        &lt;attr name="rv_isRippleEnable"/&gt;
    &lt;/declare-styleable&gt;



&lt;/resources&gt;</code></pre> 
<p></p> 
<p>基类RoundViewDelegate ：</p> 
<pre><code class="language-java">
import android.annotation.TargetApi;
import android.content.Context;
import android.content.res.ColorStateList;
import android.content.res.TypedArray;
import android.graphics.Color;
import android.graphics.drawable.GradientDrawable;
import android.graphics.drawable.RippleDrawable;
import android.graphics.drawable.StateListDrawable;
import android.os.Build;
import android.util.AttributeSet;
import android.view.View;
import android.widget.TextView;

import com.artvrpro.yiwei.R;


public class RoundViewDelegate {
    private View view;
    private Context context;
    private GradientDrawable gd_background = new GradientDrawable();
    private GradientDrawable gd_background_press = new GradientDrawable();
    private int backgroundColor;
    private int backgroundPressColor;
    private int cornerRadius;
    private int cornerRadius_TL;
    private int cornerRadius_TR;
    private int cornerRadius_BL;
    private int cornerRadius_BR;
    private int strokeWidth;
    private int strokeColor;
    private int strokePressColor;
    private int textPressColor;
    private boolean isRadiusHalfHeight;
    private boolean isWidthHeightEqual;
    private boolean isRippleEnable;
    private float[] radiusArr = new float[8];

    public RoundViewDelegate(View view, Context context, AttributeSet attrs) {
        this.view = view;
        this.context = context;
        obtainAttributes(context, attrs);
    }

    private void obtainAttributes(Context context, AttributeSet attrs) {
        TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.RoundTextView);
        backgroundColor = ta.getColor(R.styleable.RoundTextView_rv_backgroundColor, Color.TRANSPARENT);
        backgroundPressColor = ta.getColor(R.styleable.RoundTextView_rv_backgroundPressColor, Integer.MAX_VALUE);
        cornerRadius = ta.getDimensionPixelSize(R.styleable.RoundTextView_rv_cornerRadius, 0);
        strokeWidth = ta.getDimensionPixelSize(R.styleable.RoundTextView_rv_strokeWidth, 0);
        strokeColor = ta.getColor(R.styleable.RoundTextView_rv_strokeColor, Color.TRANSPARENT);
        strokePressColor = ta.getColor(R.styleable.RoundTextView_rv_strokePressColor, Integer.MAX_VALUE);
        textPressColor = ta.getColor(R.styleable.RoundTextView_rv_textPressColor, Integer.MAX_VALUE);
        isRadiusHalfHeight = ta.getBoolean(R.styleable.RoundTextView_rv_isRadiusHalfHeight, false);
        isWidthHeightEqual = ta.getBoolean(R.styleable.RoundTextView_rv_isWidthHeightEqual, false);
        cornerRadius_TL = ta.getDimensionPixelSize(R.styleable.RoundTextView_rv_cornerRadius_TL, 0);
        cornerRadius_TR = ta.getDimensionPixelSize(R.styleable.RoundTextView_rv_cornerRadius_TR, 0);
        cornerRadius_BL = ta.getDimensionPixelSize(R.styleable.RoundTextView_rv_cornerRadius_BL, 0);
        cornerRadius_BR = ta.getDimensionPixelSize(R.styleable.RoundTextView_rv_cornerRadius_BR, 0);
        isRippleEnable = ta.getBoolean(R.styleable.RoundTextView_rv_isRippleEnable, true);

        ta.recycle();
    }

    public void setBackgroundColor(int backgroundColor) {
        this.backgroundColor = backgroundColor;
        setBgSelector();
    }

    public void setBackgroundPressColor(int backgroundPressColor) {
        this.backgroundPressColor = backgroundPressColor;
        setBgSelector();
    }

    public void setCornerRadius(int cornerRadius) {
        this.cornerRadius = dp2px(cornerRadius);
        setBgSelector();
    }

    public void setStrokeWidth(int strokeWidth) {
        this.strokeWidth = dp2px(strokeWidth);
        setBgSelector();
    }

    public void setStrokeColor(int strokeColor) {
        this.strokeColor = strokeColor;
        setBgSelector();
    }

    public void setStrokePressColor(int strokePressColor) {
        this.strokePressColor = strokePressColor;
        setBgSelector();
    }

    public void setTextPressColor(int textPressColor) {
        this.textPressColor = textPressColor;
        setBgSelector();
    }

    public void setIsRadiusHalfHeight(boolean isRadiusHalfHeight) {
        this.isRadiusHalfHeight = isRadiusHalfHeight;
        setBgSelector();
    }

    public void setIsWidthHeightEqual(boolean isWidthHeightEqual) {
        this.isWidthHeightEqual = isWidthHeightEqual;
        setBgSelector();
    }

    public void setCornerRadius_TL(int cornerRadius_TL) {
        this.cornerRadius_TL = cornerRadius_TL;
        setBgSelector();
    }

    public void setCornerRadius_TR(int cornerRadius_TR) {
        this.cornerRadius_TR = cornerRadius_TR;
        setBgSelector();
    }

    public void setCornerRadius_BL(int cornerRadius_BL) {
        this.cornerRadius_BL = cornerRadius_BL;
        setBgSelector();
    }

    public void setCornerRadius_BR(int cornerRadius_BR) {
        this.cornerRadius_BR = cornerRadius_BR;
        setBgSelector();
    }

    public int getBackgroundColor() {
        return backgroundColor;
    }

    public int getBackgroundPressColor() {
        return backgroundPressColor;
    }

    public int getCornerRadius() {
        return cornerRadius;
    }

    public int getStrokeWidth() {
        return strokeWidth;
    }

    public int getStrokeColor() {
        return strokeColor;
    }

    public int getStrokePressColor() {
        return strokePressColor;
    }

    public int getTextPressColor() {
        return textPressColor;
    }

    public boolean isRadiusHalfHeight() {
        return isRadiusHalfHeight;
    }

    public boolean isWidthHeightEqual() {
        return isWidthHeightEqual;
    }

    public int getCornerRadius_TL() {
        return cornerRadius_TL;
    }

    public int getCornerRadius_TR() {
        return cornerRadius_TR;
    }

    public int getCornerRadius_BL() {
        return cornerRadius_BL;
    }

    public int getCornerRadius_BR() {
        return cornerRadius_BR;
    }

    protected int dp2px(float dp) {
        final float scale = context.getResources().getDisplayMetrics().density;
        return (int) (dp * scale + 0.5f);
    }

    protected int sp2px(float sp) {
        final float scale = this.context.getResources().getDisplayMetrics().scaledDensity;
        return (int) (sp * scale + 0.5f);
    }

    private void setDrawable(GradientDrawable gd, int color, int strokeColor) {
        gd.setColor(color);

        if (cornerRadius_TL &gt; 0 || cornerRadius_TR &gt; 0 || cornerRadius_BR &gt; 0 || cornerRadius_BL &gt; 0) {
            /**The corners are ordered top-left, top-right, bottom-right, bottom-left*/
            radiusArr[0] = cornerRadius_TL;
            radiusArr[1] = cornerRadius_TL;
            radiusArr[2] = cornerRadius_TR;
            radiusArr[3] = cornerRadius_TR;
            radiusArr[4] = cornerRadius_BR;
            radiusArr[5] = cornerRadius_BR;
            radiusArr[6] = cornerRadius_BL;
            radiusArr[7] = cornerRadius_BL;
            gd.setCornerRadii(radiusArr);
        } else {
            gd.setCornerRadius(cornerRadius);
        }

        gd.setStroke(strokeWidth, strokeColor);
    }

    public void setBgSelector() {
        StateListDrawable bg = new StateListDrawable();

        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP &amp;&amp; isRippleEnable) {
            setDrawable(gd_background, backgroundColor, strokeColor);
            RippleDrawable rippleDrawable = new RippleDrawable(
                    getPressedColorSelector(backgroundColor, backgroundPressColor), gd_background, null);
            view.setBackground(rippleDrawable);
        } else {
            setDrawable(gd_background, backgroundColor, strokeColor);
            bg.addState(new int[]{-android.R.attr.state_pressed}, gd_background);
            if (backgroundPressColor != Integer.MAX_VALUE || strokePressColor != Integer.MAX_VALUE) {
                setDrawable(gd_background_press, backgroundPressColor == Integer.MAX_VALUE ? backgroundColor : backgroundPressColor,
                        strokePressColor == Integer.MAX_VALUE ? strokeColor : strokePressColor);
                bg.addState(new int[]{android.R.attr.state_pressed}, gd_background_press);
            }

            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.JELLY_BEAN) {//16
                view.setBackground(bg);
            } else {
                //noinspection deprecation
                view.setBackgroundDrawable(bg);
            }
        }

        if (view instanceof TextView) {
            if (textPressColor != Integer.MAX_VALUE) {
                ColorStateList textColors = ((TextView) view).getTextColors();
//              Log.d("AAA", textColors.getColorForState(new int[]{-android.R.attr.state_pressed}, -1) + "");
                ColorStateList colorStateList = new ColorStateList(
                        new int[][]{new int[]{-android.R.attr.state_pressed}, new int[]{android.R.attr.state_pressed}},
                        new int[]{textColors.getDefaultColor(), textPressColor});
                ((TextView) view).setTextColor(colorStateList);
            }
        }
    }

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    private ColorStateList getPressedColorSelector(int normalColor, int pressedColor) {
        return new ColorStateList(
                new int[][]{
                        new int[]{android.R.attr.state_pressed},
                        new int[]{android.R.attr.state_focused},
                        new int[]{android.R.attr.state_activated},
                        new int[]{}
                },
                new int[]{
                        pressedColor,
                        pressedColor,
                        pressedColor,
                        normalColor
                }
        );
    }
}</code></pre> 
<p><strong>圆角相对布局RoundRelativeLayout:</strong></p> 
<pre><code class="language-java">
import android.content.Context;
import android.util.AttributeSet;
import android.widget.RelativeLayout;

/** 用于需要圆角矩形框背景的RelativeLayout的情况,减少直接使用RelativeLayout时引入的shape资源文件 */
public class RoundRelativeLayout extends RelativeLayout {
    private RoundViewDelegate delegate;

    public RoundRelativeLayout(Context context) {
        this(context, null);
    }

    public RoundRelativeLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        delegate = new RoundViewDelegate(this, context, attrs);
    }

    /** use delegate to set attr */
    public RoundViewDelegate getDelegate() {
        return delegate;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        if (delegate.isWidthHeightEqual() &amp;&amp; getWidth() &gt; 0 &amp;&amp; getHeight() &gt; 0) {
            int max = Math.max(getWidth(), getHeight());
            int measureSpec = MeasureSpec.makeMeasureSpec(max, MeasureSpec.EXACTLY);
            super.onMeasure(measureSpec, measureSpec);
            return;
        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        if (delegate.isRadiusHalfHeight()) {
            delegate.setCornerRadius(getHeight() / 2);
        }else {
            delegate.setBgSelector();
        }
    }
}</code></pre> 
<p><strong>圆角线性布局RoundLinearLayout：</strong></p> 
<pre><code class="language-java">
import android.content.Context;
import android.util.AttributeSet;
import android.widget.LinearLayout;

/** 用于需要圆角矩形框背景的LinearLayout的情况,减少直接使用LinearLayout时引入的shape资源文件 */
public class RoundLinearLayout extends LinearLayout {
    private RoundViewDelegate delegate;

    public RoundLinearLayout(Context context) {
        this(context, null);
    }

    public RoundLinearLayout(Context context, AttributeSet attrs) {
        super(context, attrs);
        delegate = new RoundViewDelegate(this, context, attrs);
    }

    /** use delegate to set attr */
    public RoundViewDelegate getDelegate() {
        return delegate;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (delegate.isWidthHeightEqual() &amp;&amp; getWidth() &gt; 0 &amp;&amp; getHeight() &gt; 0) {
            int max = Math.max(getWidth(), getHeight());
            int measureSpec = MeasureSpec.makeMeasureSpec(max, MeasureSpec.EXACTLY);
            super.onMeasure(measureSpec, measureSpec);
            return;
        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        if (delegate.isRadiusHalfHeight()) {
            delegate.setCornerRadius(getHeight() / 2);
        }else {
            delegate.setBgSelector();
        }
    }
}
</code></pre> 
<p>圆角TextView RoundTextView:</p> 
<pre><code class="language-java">
import android.content.Context;
import android.util.AttributeSet;

import androidx.appcompat.widget.AppCompatTextView;

/** 用于需要圆角矩形框背景的TextView的情况,减少直接使用TextView时引入的shape资源文件 */
    public class RoundTextView extends AppCompatTextView {
    private RoundViewDelegate delegate;

    public RoundTextView(Context context) {
        this(context, null);
    }

    public RoundTextView(Context context, AttributeSet attrs) {
        this(context, attrs, 0);
    }

    public RoundTextView(Context context, AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        delegate = new RoundViewDelegate(this, context, attrs);
    }

    /** use delegate to set attr */
    public RoundViewDelegate getDelegate() {
        return delegate;
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (delegate.isWidthHeightEqual() &amp;&amp; getWidth() &gt; 0 &amp;&amp; getHeight() &gt; 0) {
            int max = Math.max(getWidth(), getHeight());
            int measureSpec = MeasureSpec.makeMeasureSpec(max, MeasureSpec.EXACTLY);
            super.onMeasure(measureSpec, measureSpec);
            return;
        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        if (delegate.isRadiusHalfHeight()) {
            delegate.setCornerRadius(getHeight() / 2);
        } else {
            delegate.setBgSelector();
        }
    }
}</code></pre> 
<p>=================分割线================</p> 
<p><strong>圆角渐变色矩形：</strong></p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle"&gt;&lt;!--rectangle ：矩形--&gt;

    &lt;!--
android:startColor="#aa000000"  渐变起始色值
android:centerColor=""      渐变中间色值
android:endColor="#ffffffff"    渐变结束颜色
android:angle="45"      渐变的方向 默认为0 从做向右 ，90时从下向上 必须为45的整数倍
android:type="radial"       渐变类型 有三种 线性linear 放射渐变radial 扫描线性渐变sweep
android:centerX="0.5"       渐变中心相对X坐标只有渐变类型为放射渐变时有效
android:centerY="0.5"       渐变中心相对Y坐标只有渐变类型为放射渐变时有效
android:gradientRadius="100"    渐变半径 非线性放射有效
 --&gt;


    &lt;corners android:radius="10dp" /&gt;
    &lt;gradient
        android:startColor="#7167FF"

        android:endColor="#A1DAFF"
        android:angle="90"
        android:type="linear"
        /&gt;
    &lt;!--android:centerColor="#0c8ef9"--&gt;
&lt;/shape&gt;</code></pre> 
<p><strong>渐变色圆形：</strong></p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval"&gt;&lt;!-- oval：圆形--&gt;
    &lt;solid android:color="#4A6DED" /&gt;
    &lt;size
        android:width="66dp"
        android:height="66dp"&gt;&lt;/size&gt;
    &lt;!--
android:startColor="#aa000000"  渐变起始色值
android:centerColor=""      渐变中间色值
android:endColor="#ffffffff"    渐变结束颜色
android:angle="45"      渐变的方向 默认为0 从做向右 ，90时从下向上 必须为45的整数倍
android:type="radial"       渐变类型 有三种 线性linear 放射渐变radial 扫描线性渐变sweep
android:centerX="0.5"       渐变中心相对X坐标只有渐变类型为放射渐变时有效
android:centerY="0.5"       渐变中心相对Y坐标只有渐变类型为放射渐变时有效
android:gradientRadius="100"    渐变半径 非线性放射有效
 --&gt;

    &lt;gradient
        android:centerX="0.5"
        android:centerY="0.5"
        android:startColor="#4A6DED"
        android:endColor="#A1DAFF"
        android:angle="90"
        android:type="radial"
        android:gradientRadius="100"
        /&gt;
    &lt;!--android:centerColor="#0c8ef9"--&gt;
&lt;/shape&gt;</code></pre> 
<p><strong>圆角纯色带边框矩形：</strong></p> 
<pre><code class="language-XML">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;shape xmlns:android="http://schemas.android.com/apk/res/android"&gt;

    &lt;!-- 设置圆角 --&gt;
    &lt;corners android:radius="30dp" /&gt;
    &lt;!--  设置边框的 厚度和颜色--&gt;
    &lt;stroke
        android:width="2dp"
        android:color="#ffffff" /&gt;
    &lt;solid android:color="#FFC627" /&gt;
&lt;/shape&gt;
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/260f31f5622cc89d0ba5c2cbdcffd5f2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">目标检测中的常见指标</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b9c204898c138a31833c2f7f0cb1e278/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Leetcode12-统一一致字符串的数目（1684）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>