<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32开发——简介、开发环境（Keil5、CubeMX）、HAL库 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32开发——简介、开发环境（Keil5、CubeMX）、HAL库" />
<meta property="og:description" content="目录
1.简介-初识STM32
2.开发环境
2.1使用Keil5
2.2使用STM32CubeMX 3.标准库与HAL库区别
4.推挽输出与开漏输出
1.简介-初识STM32 什么是单片机？
单片机（Single-Chip Microcomputer）是一种集成电路芯片，把具有数据处理能力的中央处
理器CPU、随机存储器RAM、只读存储器ROM、多种I/O口和中断系统、定时器/计数器等功
能（可能还包括显示驱动电路、脉宽调制电路、模拟多路转换器、A/D转换器等电路）集成
到一块硅片上构成的一个小而完善的微型计算机系统，在工业控制领域广泛应用。 STM系列单片机命名规则
ST -- 意法半导体M -- Microelectronics 微电子32 -- 总线宽度 项目 介绍内核 Cortex-M3Flash64K x 8bitSRAM 20K x 8bitGPIO 37个GPIO，分别为PA0-PA15、PBO-PB15、PC13-PC15、PDO-PD1ADC2个12bit ADC合计12路通道，外部通道: PAO到PA7&#43;PBO到PB1内部通道: 温度传感器通道ADC Channel 16和内部参考电压通道ADC Channel 17定时器/计数器4个16bit定时器/计数器，分别为TIM1、TIM2、TIM3、TIM4TM1带死区插入，常用于产生PWM控制电机看门狗定时器2个看门狗定时器 (独立看门狗IWDG、窗口看门狗WWDG)滴答定时器1个24bit向下计数的滴答定时器systick工作电压、温度2V —3.6V、-40°—C85°C通信串口2 * IIC，2 * SPI，3 * USART，1 * CAN系统时钟内部8MHz时钟HSI最高可倍频到64MHZ，外部8MHZ时钟HSE最高可倍频到72MHZ 2.开发环境 2.1使用Keil5 1.安装MDK
地址选择
2.破戒
3.安装芯片对应的固件包——F1固件包
双击固件包直接安装即可
4.创建STM32F1模板工程
在魔术棒中的C/C&#43;&#43;需要添加文件头文件路径 5.接线
烧录工具有很多种，比如：串口、J-Link、ST-Link、U-Link 等等，本教程使用 ST-Link。
安装驱动
官网下载（慢）https://www.st.com/en/development-tools/stsw-link009.html资料包 接线
6.编译及下载
后两个编译生成hex文件
LOAD就是下载程序到开发板
需要程序运行，需要按一下开发班的复位按钮。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fabad127b82bab0def252fa8016e193a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-05T16:30:02+08:00" />
<meta property="article:modified_time" content="2023-06-05T16:30:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32开发——简介、开发环境（Keil5、CubeMX）、HAL库</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1.%E7%AE%80%E4%BB%8B-%E5%88%9D%E8%AF%86STM32-toc" style="margin-left:0px;"><a href="#1.%E7%AE%80%E4%BB%8B-%E5%88%9D%E8%AF%86STM32" rel="nofollow">1.简介-初识STM32</a></p> 
<p id="2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83-toc" style="margin-left:0px;"><a href="#2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83" rel="nofollow">2.开发环境</a></p> 
<p id="2.1%E4%BD%BF%E7%94%A8Keil5-toc" style="margin-left:40px;"><a href="#2.1%E4%BD%BF%E7%94%A8Keil5" rel="nofollow">2.1使用Keil5</a></p> 
<p id="%C2%A02.2%E4%BD%BF%E7%94%A8STM32CubeMX%C2%A0-toc" style="margin-left:40px;"><a href="#%C2%A02.2%E4%BD%BF%E7%94%A8STM32CubeMX%C2%A0" rel="nofollow"> 2.2使用STM32CubeMX </a></p> 
<p id="3.%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%8EHAL%E5%BA%93%E5%8C%BA%E5%88%AB-toc" style="margin-left:0px;"><a href="#3.%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%8EHAL%E5%BA%93%E5%8C%BA%E5%88%AB" rel="nofollow">3.标准库与HAL库区别</a></p> 
<p id="4.%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%E4%B8%8E%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA-toc" style="margin-left:0px;"><a href="#4.%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%E4%B8%8E%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA" rel="nofollow">4.推挽输出与开漏输出</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="1.%E7%AE%80%E4%BB%8B-%E5%88%9D%E8%AF%86STM32">1.简介-初识STM32</h2> 
<p>什么是单片机？</p> 
<ul><li>单片机（Single-Chip Microcomputer）是一种集成电路芯片，把具有数据处理能力的中央处<br> 理器CPU、随机存储器RAM、只读存储器ROM、多种I/O口和中断系统、定时器/计数器等功<br> 能（可能还包括显示驱动电路、脉宽调制电路、模拟多路转换器、A/D转换器等电路）集成<br> 到一块硅片上构成的一个小而完善的微型计算机系统，在工业控制领域广泛应用。</li></ul> 
<p>STM系列单片机命名规则</p> 
<ul><li>ST -- 意法半导体</li><li>M -- Microelectronics 微电子</li><li>32 -- 总线宽度</li></ul> 
<p><img alt="" height="892" src="https://images2.imgbox.com/44/e3/XWNwSXRI_o.png" width="1200"></p> 
<table border="1" cellpadding="1" cellspacing="1" style="width:700px;"><tbody><tr><td style="width:87px;"><strong>项目 </strong></td><td style="width:411px;"><strong>介绍</strong></td></tr><tr><td style="width:87px;">内核 </td><td style="width:411px;">Cortex-M3</td></tr><tr><td style="width:87px;">Flash</td><td style="width:411px;">64K x 8bit</td></tr><tr><td style="width:87px;">SRAM </td><td style="width:411px;">20K x 8bit</td></tr><tr><td style="width:87px;">GPIO </td><td style="width:411px;">37个GPIO，分别为PA0-PA15、PBO-PB15、PC13-PC15、PDO-PD1</td></tr><tr><td style="width:87px;">ADC</td><td style="width:411px;">2个12bit ADC合计12路通道，外部通道: PAO到PA7+PBO到PB1内部通道: 温度传感器通道ADC Channel 16和内部参考电压通道ADC Channel 17</td></tr><tr><td style="width:87px;">定时器/计数器</td><td style="width:411px;">4个16bit定时器/计数器，分别为TIM1、TIM2、TIM3、TIM4TM1带死区插入，常用于产生PWM控制电机</td></tr><tr><td style="width:87px;">看门狗定时器</td><td style="width:411px;">2个看门狗定时器 (独立看门狗IWDG、窗口看门狗WWDG)</td></tr><tr><td style="width:87px;">滴答定时器</td><td style="width:411px;">1个24bit向下计数的滴答定时器systick</td></tr><tr><td style="width:87px;">工作电压、温度</td><td style="width:411px;">2V —3.6V、-40°—C85°C</td></tr><tr><td style="width:87px;">通信串口</td><td style="width:411px;">2 * IIC，2 * SPI，3 * USART，1 * CAN</td></tr><tr><td style="width:87px;">系统时钟</td><td style="width:411px;">内部8MHz时钟HSI最高可倍频到64MHZ，外部8MHZ时钟HSE最高可倍频到72MHZ</td></tr></tbody></table> 
<p></p> 
<h2 id="2.%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83">2.开发环境</h2> 
<h3 id="2.1%E4%BD%BF%E7%94%A8Keil5">2.1使用Keil5</h3> 
<p>1.安装MDK</p> 
<p>地址选择</p> 
<p><img alt="" height="385" src="https://images2.imgbox.com/b6/c6/QULuEDUa_o.png" width="567"></p> 
<p>2.破戒</p> 
<p>3.安装芯片对应的固件包——F1固件包</p> 
<p>双击固件包直接安装即可</p> 
<p><img alt="" height="482" src="https://images2.imgbox.com/4f/23/AyAXpfoS_o.png" width="581"></p> 
<p> 4.创建STM32F1模板工程</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/ec/46/t86s6IIX_o.png" width="984"></p> 
<p>在魔术棒中的C/C++需要添加文件头文件路径 </p> 
<p><img alt="" height="477" src="https://images2.imgbox.com/2f/cd/ZLcGH2hm_o.png" width="640"></p> 
<p> 5.接线</p> 
<p>烧录工具有很多种，比如：串口、J-Link、ST-Link、U-Link 等等，本教程使用 ST-Link。</p> 
<p>安装驱动</p> 
<ul><li>官网下载（慢）https://www.st.com/en/development-tools/stsw-link009.html</li><li>资料包</li></ul> 
<p>接线</p> 
<p><img alt="" height="245" src="https://images2.imgbox.com/65/88/BLrHtlRa_o.png" width="591"></p> 
<p></p> 
<p> 6.编译及下载</p> 
<p><img alt="" height="106" src="https://images2.imgbox.com/50/6d/i1CQaMDu_o.png" width="321"></p> 
<p> 后两个编译生成hex文件</p> 
<p><img alt="" height="155" src="https://images2.imgbox.com/13/e1/6qtW4KvE_o.png" width="565"></p> 
<p>LOAD就是下载程序到开发板</p> 
<p>需要程序运行，需要按一下开发班的复位按钮。</p> 
<p>F12：查看对应函数的具体信息</p> 
<p></p> 
<h3 id="%C2%A02.2%E4%BD%BF%E7%94%A8STM32CubeMX%C2%A0"> 2.2使用STM32CubeMX </h3> 
<p>作用：通过界面的方式，快速生成工程文件。</p> 
<p>缺点：只能对IO口进行操作，不能生成复杂代码。</p> 
<p>下载：官网（慢）https://www.st.com/zh/development-tools/stm32cubemx.html#overview</p> 
<p>安装：一路下一步，建议不要安装在C盘</p> 
<p>配置：更新固件包位置（比较大，默认在C盘，可以更改到其它盘）</p> 
<ul><li>help ---&gt; update settings --&gt; Firmware Repository</li></ul> 
<p>步骤：</p> 
<p>1. 点击「ACCESS TO MCU SELECTOR」；<br> 2. 左上角搜索对应的芯片，并在右侧双击对应的芯片；</p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/49/09/qpSWiqO4_o.png" width="1200"></p> 
<p>3. 点击芯片对应的引脚，并进行配置；<br> 4. 配置工程名称及位置：</p> 
<p><img alt="" height="692" src="https://images2.imgbox.com/da/ab/VRF9sqFo_o.png" width="1200"></p> 
<p> 1. 按下图配置 Coder Generator ：</p> 
<p><img alt="" height="666" src="https://images2.imgbox.com/6b/dc/xqUccSdV_o.png" width="1200"></p> 
<p> 6. 点击右上角 generate code :</p> 
<p><img alt="" height="439" src="https://images2.imgbox.com/7c/40/1OR2HBmL_o.png" width="712"></p> 
<p> 7. 点击 Open Project 即可调用 Keil5 打开自动生成的工程文件。</p> 
<p></p> 
<h2 id="3.%E6%A0%87%E5%87%86%E5%BA%93%E4%B8%8EHAL%E5%BA%93%E5%8C%BA%E5%88%AB">3.标准库与HAL库区别</h2> 
<p>1. 寄存器</p> 
<ul><li>寄存器众多，需要经常翻阅芯片手册，费时费力；</li><li>更大灵活性，可以随心所欲达到自己的目的；</li><li>深入理解单片机的运行原理，知其然更知其所以然。</li></ul> 
<p>2. 标准库</p> 
<ul><li>将寄存器底层操作都封装起来，提供一整套接口（API）供开发者调用</li><li>每款芯片都编写了一份库文件，也就是工程文件里stm32F1xx…之类的；</li><li>配置结构体变量成员就可以修改外设的配置寄存器，从而选择不同的功能；</li><li>大大降低单片机开发难度，但是在不同芯片间不方便移植。</li></ul> 
<p>3. HAL库</p> 
<ul><li>ST公司目前主力推的开发方式，新的芯片已经不再提供标准库；</li><li>为了实现在不同芯片之间移植代码；</li><li>为了兼容所有芯片，导致代码量庞大，执行效率低下。</li></ul> 
<p></p> 
<h2 id="4.%E6%8E%A8%E6%8C%BD%E8%BE%93%E5%87%BA%E4%B8%8E%E5%BC%80%E6%BC%8F%E8%BE%93%E5%87%BA">4.推挽输出与开漏输出</h2> 
<p><img alt="" height="417" src="https://images2.imgbox.com/18/e5/nZRNtP6Z_o.png" width="689"></p> 
<p><strong>推挽输出：</strong> 可以真正能真正的输出高电平和低电平。<br><strong>开漏输出：</strong> 开漏输出无法真正输出高电平，即高电平时没有驱动能力，需要借助外部上拉电阻完<br> 成对外驱动。</p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a89b8a5e1a7cda6cdd8b0cfd39adf4b1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android-Fragment详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/760e311340ece119a2938f93243df3b9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【单片机】基于STM32的UART串口通信</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>