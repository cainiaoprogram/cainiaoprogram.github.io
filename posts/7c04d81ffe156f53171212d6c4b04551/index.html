<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue3&#43;echart绘制中国地图并根据后端返回的坐标实现涟漪动画效果 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue3&#43;echart绘制中国地图并根据后端返回的坐标实现涟漪动画效果" />
<meta property="og:description" content="1.效果图 2.前期准备 main.js app.use(BaiduMap, { // ak 是在百度地图开发者平台申请的密钥 详见 http://lbsyun.baidu.com/apiconsole/key */ ak: &#39;sRDDfAKpCSG5iF1rvwph4Q95M6tDCApL&#39;, // v:&#39;3.0&#39;, // 默认使用3.0 // type: &#39;WebGL&#39; // ||API 默认API (使用此模式 BMap=BMapGL) }); index.html &lt;script type=&#34;text/javascript&#34; src=&#34;https://api.map.baidu.com/getscript?v=3.0&amp;ak=sRDDfAKpCSG5iF1rvwph4Q95M6tDCApL&#34;&gt;&lt;/script&gt; &lt;div&gt; &lt;div id=&#34;main6&#34; style=&#34;width:650px;height:400px;&#34;&gt;&lt;/div&gt; &lt;/div&gt; 3.js，注意:import &#39;echarts/map/js/china.js&#39;; 引入时需要注意当前echart是否为4.&#43;版本，如否降级 npm install echarts@4.1.0 --save &lt;script setup&gt; import * as echarts from &#39;echarts&#39;; import &#39;echarts/extension/bmap/bmap&#39;; import {onMounted,defineProps} from &#39;vue&#39;; import &#39;echarts/map/js/china.js&#39;; //关键引入china.js const props = defineProps([&#39;data&#39;]) var initData = JSON.parse(JSON.stringify(props)).data const initMap = () =&gt;{ var chartDom = document." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7c04d81ffe156f53171212d6c4b04551/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T13:59:03+08:00" />
<meta property="article:modified_time" content="2024-01-03T13:59:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue3&#43;echart绘制中国地图并根据后端返回的坐标实现涟漪动画效果</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.效果图</h2> 
<p><img alt="" src="https://images2.imgbox.com/6a/55/dhx3zvmf_o.png"></p> 
<p><img alt="" src="https://images2.imgbox.com/73/0e/JcrKnLED_o.png"></p> 
<h2>2.前期准备</h2> 
<pre><code class="language-javascript">main.js
app.use(BaiduMap, {
    // ak 是在百度地图开发者平台申请的密钥 详见 http://lbsyun.baidu.com/apiconsole/key */
    ak: 'sRDDfAKpCSG5iF1rvwph4Q95M6tDCApL',
    // v:'3.0',  // 默认使用3.0
    // type: 'WebGL' // ||API 默认API  (使用此模式 BMap=BMapGL)
});

  

index.html
&lt;script type="text/javascript" src="https://api.map.baidu.com/getscript?v=3.0&amp;ak=sRDDfAKpCSG5iF1rvwph4Q95M6tDCApL"&gt;&lt;/script&gt;</code></pre> 
<pre><code class="language-html"> &lt;div&gt;
        &lt;div id="main6"
             style="width:650px;height:400px;"&gt;&lt;/div&gt;
    &lt;/div&gt;</code></pre> 
<h2>3.js，注意:import 'echarts/map/js/china.js'; 引入时需要注意当前echart是否为4.+版本，如否降级</h2> 
<h2>npm install echarts@4.1.0 --save</h2> 
<pre><code class="language-javascript">&lt;script setup&gt;
import * as echarts from 'echarts';
import 'echarts/extension/bmap/bmap';
import {onMounted,defineProps} from 'vue';
import 'echarts/map/js/china.js';  //关键引入china.js    
  const props = defineProps(['data'])
       var initData = JSON.parse(JSON.stringify(props)).data
       const initMap = () =&gt;{
            var chartDom = document.getElementById('main6');
            var myChart = echarts.init(chartDom);
            
            var option;
            option = {
            backgroundColor: 'rgba(0,0,0,.1)',
            title: {
                text: '当前服务地区',
                left: 'center',
                textStyle: {
                   color: '#fff'
                }
            },
            tooltip: {
                trigger: 'item'
            },
   
            geo: {            //绘制中国地图
                 map: 'china',//关键必须写
                 zoom: 10,//地图缩放比例
                 center: [120.22221, 30.2084],//地图位置
                  roam: true, //是否允许鼠标放大缩小，拖拽功能
                 itemStyle: {  //地图省份的样式；包括板块颜色和边框颜色
                     areaColor: 'rgba(0,0,0,.5)', //地图区域的颜色
                     borderColor: "#ffffff",        //地图省份边框颜色
                 },
                
                 label: {  //省份字体样式；包括是否展示，字体大小和颜色
                     normal: {
                         show:true,
                         fontSize: "11.5",
                         color: "rgb(107,102,102)"
                     }
                 },
                 
                 emphasis: { //鼠标划过的高亮设置；包括省份板块颜色和字体等
                     itemStyle: {
                         areaColor: '#ffffff',
                     },
                     label: {
                         show: true,
                         color:"rgb(0,0,0)"
                     }
                 }
             },
      
            series: [
                {
                name: '地理坐标', 
                type: 'effectScatter', //样式，带有涟漪特效动画气泡图
                coordinateSystem: 'geo', //该系列使用的坐标系,客官往上看
                data:[],  // data的数据格式为[{name:'海门',value:['121.15','31.89',200]}，{name:'海门111',value:['121.15','31.89',200]}...] 
                encode: {
                    value: 2
                },
                showEffectOn: 'render', //绘制完成后显示特效
                rippleEffect: { //涟漪特效相关配置。
                    brushType: 'stroke' //波纹的绘制方式
                },
                symbolSize: 10,  //标记的大小,可以设置数组或函数返回值的形式
                hoverAnimation: true, // 鼠标移入放大圆
                label: {   //图形上的文本标签，可用于说明图形的一些数据信息，比如值，名称等
                    formatter: '{b}',
                    position: 'right',
                    show: true
                },
                itemStyle: {    //样式
                    color: '#f4e925',
                    shadowBlur: 10,
                    shadowColor: '#333'
                },
                emphasis: { //高亮状态下的多边形和标签样式
                    scale: true
                },
                zlevel: 1
                }
            ]
            };
            // 处理数据 将数据转换成echart可以识别的数据格式,例如[{name:'海门',value:['121.15','31.89',200]}，{name:'海门111',value:['121.15','31.89',200]}...]，详情请查echart地图坐标
            let result = []
            initData.map((item,index)=&gt; {
                let child = {name: '', value:['','']}
                child.name = item.commName
                child.value[0] = Number(item.mapX)
                child.value[1] = Number(item.mapY)
                child.value[2] = Number(item.mapY)
                result.push(child)
            })
            option.series[0].data = result
            // myChart.registerMap('china', { geoJSON: chinaMap })
            option &amp;&amp; myChart.setOption(option);
            // 窗口自适应
            (window.onresize = function () {
                myChart.resize();
            })
        }

        onMounted(() =&gt; {   
            initMap()
        }) 
&lt;/script&gt;</code></pre> 
<h2>4.end:本人查阅资料百度花了大量时间，资料都是大同小异，由于自己过于浮躁，对资料研究不彻底，只想着复制粘贴完事，导致出现问题就换一个案例，并没有查找bug的原因，还需静下心来，踩过的坑希望老铁们直接跳过。</h2> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/02/d4/hLtCF4tc_o.jpg"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f95e11f9b967ab944385c2cea13983a0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Redhat7系统配置阿里源失败问题及解决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bfdb3340da59c3b9a7eab3fd9648cb76/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nginx将xxx.com重定向到www.xxx.com配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>