<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring MVC - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring MVC" />
<meta property="og:description" content="文章目录 Spring MVC 是什么什么是 MVC如何学习 Spring MVCSpring MVC 创建和连接获取参数传统方式简便的方式获取一个自定义类的对象从 json 字符串获取对象获取文件获取 Cookie/Session/Header参数重命名非必传参数获取url路径中的参数 请求转发和请求重定向 Spring MVC 是什么 Spring MVC 全称 Spring Web MVC，又称为 Spring Web
Spring MVC 是一个 Web 框架Spring MVC 是基于 Servlet API 构建的 什么是 MVC “MVC” 代表模型-视图-控制器（Model-View-Controller）。这是一种设计模式，用于构建具有良好组织结构的应用程序，以便更好地管理代码和提高可维护性。
Model 代表应用程序中处理数据和业务逻辑的部分。在Spring MVC中，模型通常由Java对象组成，这些对象负责封装和处理数据，以及执行与应用程序相关的业务逻辑。View 负责渲染和显示模型的数据。在Web应用中，视图通常是用户界面的一部分，负责将模型的数据以用户友好的方式呈现出来。视图不处理业务逻辑，它只关注如何正确地显示数据。Controller 是模型和视图之间的中介，负责接收用户的输入，处理用户请求，并更新模型和视图。它将用户的请求路由到适当的模型处理程序，然后将模型的数据传递给适当的视图进行显示。控制器的目标是保持模型和视图之间的解耦，使应用程序更加灵活和易于扩展。 如何学习 Spring MVC 学习 Spring MVC 最关注以下 3 个功能：
连接：将用户（浏览器）和 Java 程序连接起来，也就是访问一个地址能够调用到我们的 Spring 程序。获取参数：用户访问的时候会带一些参数，在程序中要想办法获取到参数输出数据：执行业务逻辑之后，把程序执行的结果返回给用户 Spring MVC 创建和连接 在创建 Spring Boot 项目的时候，我们已经引入了 Spring Web 依赖，引入这个依赖，我们的项目就是一个 Spring MVC 项目。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7fb35380b60c5a2028c98119886b9a6d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-08T21:35:51+08:00" />
<meta property="article:modified_time" content="2023-12-08T21:35:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring MVC</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Spring_MVC__1" rel="nofollow">Spring MVC 是什么</a></li><li><a href="#_MVC_8" rel="nofollow">什么是 MVC</a></li><li><a href="#_Spring_MVC_18" rel="nofollow">如何学习 Spring MVC</a></li><li><a href="#Spring_MVC__26" rel="nofollow">Spring MVC 创建和连接</a></li><li><a href="#_102" rel="nofollow">获取参数</a></li><li><ul><li><a href="#_104" rel="nofollow">传统方式</a></li><li><a href="#_120" rel="nofollow">简便的方式</a></li><li><a href="#_146" rel="nofollow">获取一个自定义类的对象</a></li><li><a href="#_json__175" rel="nofollow">从 json 字符串获取对象</a></li><li><a href="#_198" rel="nofollow">获取文件</a></li><li><a href="#_CookieSessionHeader_216" rel="nofollow">获取 Cookie/Session/Header</a></li><li><a href="#_277" rel="nofollow">参数重命名</a></li><li><a href="#_290" rel="nofollow">非必传参数</a></li><li><a href="#url_319" rel="nofollow">获取url路径中的参数</a></li></ul> 
  </li><li><a href="#_336" rel="nofollow">请求转发和请求重定向</a></li></ul> 
</div> 
<p></p> 
<h2><a id="Spring_MVC__1"></a>Spring MVC 是什么</h2> 
<p>Spring MVC 全称 Spring Web MVC，又称为 Spring Web</p> 
<ul><li>Spring MVC 是一个 Web 框架</li><li>Spring MVC 是基于 Servlet API 构建的</li></ul> 
<h2><a id="_MVC_8"></a>什么是 MVC</h2> 
<p>“MVC” 代表模型-视图-控制器（Model-View-Controller）。这是一种设计模式，用于构建具有良好组织结构的应用程序，以便更好地管理代码和提高可维护性。</p> 
<p><img src="https://images2.imgbox.com/df/aa/f4GC9TUz_o.png" alt="img"></p> 
<ul><li><strong>Model</strong> 代表应用程序中处理数据和业务逻辑的部分。在Spring MVC中，模型通常由Java对象组成，这些对象负责封装和处理数据，以及执行与应用程序相关的业务逻辑。</li><li><strong>View</strong> 负责渲染和显示模型的数据。在Web应用中，视图通常是用户界面的一部分，负责将模型的数据以用户友好的方式呈现出来。视图不处理业务逻辑，它只关注如何正确地显示数据。</li><li><strong>Controller</strong> 是模型和视图之间的中介，负责接收用户的输入，处理用户请求，并更新模型和视图。它将用户的请求路由到适当的模型处理程序，然后将模型的数据传递给适当的视图进行显示。控制器的目标是保持模型和视图之间的解耦，使应用程序更加灵活和易于扩展。</li></ul> 
<h2><a id="_Spring_MVC_18"></a>如何学习 Spring MVC</h2> 
<p>学习 Spring MVC 最关注以下 3 个功能：</p> 
<ol><li><strong>连接</strong>：将用户（浏览器）和 Java 程序连接起来，也就是访问一个地址能够调用到我们的 Spring 程序。</li><li><strong>获取参数</strong>：用户访问的时候会带一些参数，在程序中要想办法获取到参数</li><li><strong>输出数据</strong>：执行业务逻辑之后，把程序执行的结果返回给用户</li></ol> 
<h2><a id="Spring_MVC__26"></a>Spring MVC 创建和连接</h2> 
<p>在创建 Spring Boot 项目的时候，我们已经引入了 Spring Web 依赖，引入这个依赖，我们的项目就是一个 Spring MVC 项目。</p> 
<p>例：通过访问 http://127.0.0.1:8080/web/hi 来返回 Hello</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>spring_mvc_demo<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Controller</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ResponseBody</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span> <span class="token comment">// 类注解，在 Spring 启动的时候加载并注册</span>
<span class="token annotation punctuation">@ResponseBody</span> <span class="token comment">// 当前类返回的非静态页面</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/web"</span><span class="token punctuation">)</span> <span class="token comment">// 当使用 /web 可以访问到当前类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hi"</span><span class="token punctuation">)</span> <span class="token comment">// 当使用 /web/hi 可以访问到当前方法</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<ul><li><code>@ResponseBody</code> 用于标识控制器方法的返回值应该直接作为 HTTP 响应的主体部分，而不是视图解析器渲染成视图。</li><li><code>@RequestMapping</code> 可以应用在类级别和方法级别，用于定义 URL 映射规则，将 HTTP 请求映射到相应的控制器方法上。</li></ul> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/d5/fc/7SesLXhA_o.png" alt="img"></p> 
<p>注意：</p> 
<ul><li>如果不加 <code>@ResponseBody</code>，那么返回的就是一个视图，也就是 html 文件的路径</li><li><code>@Controller</code> 不可替换为其他类注解（如 <code>@Service</code>、<code>@Component</code>）</li></ul> 
<p><code>@RestController</code>，相当于 <code>@Controller</code> + <code>@ResponseBody</code></p> 
<p>更简单的写法：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>spring_mvc_demo<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hi"</span><span class="token punctuation">)</span> <span class="token comment">// 当使用 /hi 可以访问到当前方法</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>访问 http://127.0.0.1:8080/hi 就可以看到 Hello 了。</p> 
<p><code>@RequestMapping</code> 默认支持所有请求方法，可以通过指定 <code>method</code> 属性使其只匹配某一种请求方法：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/greet"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"greet"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在较新的 Spring 版本中，<code>@RequestMapping</code> 已经被更具体的注解取代，例如 <code>@GetMapping</code>、<code>@PostMapping</code>、<code>@PutMapping</code> 和 <code>@DeleteMapping</code>，它们分别用于处理 <code>GET</code>、<code>POST</code>、<code>PUT</code> 和 <code>DELETE</code> 请求。这些注解提供了更清晰和简洁的方式来定义映射规则</p> 
<p>如：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/greet"</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token constant">GET</span><span class="token punctuation">)</span>
<span class="token comment">// 等效于</span>
<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/greet"</span><span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_102"></a>获取参数</h2> 
<h3><a id="_104"></a>传统方式</h3> 
<p>Spring MVC 兼容 Servlet 的用法</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/hi"</span><span class="token punctuation">)</span> <span class="token comment">// 当使用 /hi 可以访问到当前方法</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"Hello"</span> <span class="token operator">+</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在 Spring MVC 中默认内置隐藏了两个参数，HttpServletRequest 和 HttpServletResponse，想要用只要声明这两个参数即可</p> 
<h3><a id="_120"></a>简便的方式</h3> 
<p>直接声明要获取的参数，参数名和查询字符串的参数名一致</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/get1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getParam1</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"value: "</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>结果：</p> 
<p><img src="https://images2.imgbox.com/c7/f7/6iBBue9G_o.png" alt="img"></p> 
<p>参数的类型也可以写成其他的，比如 int 或 Integer，类型会自动转换</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/get1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getParam1</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> age<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"value: "</span> <span class="token operator">+</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果查询字符串中没有指定 age 参数，那么这里会显示 null，如果 int 类型，则会报错，因为 int 无法接收 null</p> 
<h3><a id="_146"></a>获取一个自定义类的对象</h3> 
<p>先定义一个类：</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>spring_mvc_demo<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>然后就可以获取这个类的对象，对象的属性会自动从查询字符串中获取</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/get2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getParam2</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> student<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/27/dd/mhe18bW8_o.png" alt="img"></p> 
<h3><a id="_json__175"></a>从 json 字符串获取对象</h3> 
<p>上面的方式，传输的数据都是 <code>application/x-www-form-urlencoded</code> 格式，也就是查询字符串的格式。</p> 
<p>Json 字符串是另外一种格式，要获取其解析后的对象，只要在参数的声明前加 <code>@RequestBody</code> 注解</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/login3"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">login3</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
   <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">,</span> student<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> student<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   result<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"age"</span><span class="token punctuation">,</span> student<span class="token punctuation">.</span><span class="token function">getAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们使用 <code>HashMap</code> 作为返回类型，Spring 会自动将其转换为 JSON 格式作为 HTTP 响应返回给客户端</p> 
<p>使用 Postman 构造请求并验证：</p> 
<p><img src="https://images2.imgbox.com/2b/54/NXjoK2Ls_o.png" alt="img"></p> 
<h3><a id="_198"></a>获取文件</h3> 
<p>使用 <code>MultipartFile</code> 类来描述一个文件，前面加上 @RequestPart 注解</p> 
<p><code>@RequestPart</code>注解，用于处理HTTP请求中的"multipart/form-data"类型的数据来支持文件上传</p> 
<p>该注解可以传入参数，比如，<code>@RequestPart("myfile")</code>注解表示将请求中名为"file"的部分映射到 <code>MultipartFile file</code> 参数上</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">"/reg"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">reg</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">"myfile"</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> file<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{<!-- --></span>
    file<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"d:/img.png"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用 <code>MultipartFile</code> 中的方法 <code>transferTo</code>，将文件保存到硬盘。</p> 
<h3><a id="_CookieSessionHeader_216"></a>获取 Cookie/Session/Header</h3> 
<p><strong>获取 Cookie</strong></p> 
<p><code>@CookieValue</code> 注解，用于从 HTTP 请求中提取特定 Cookie 的值，并将其映射到控制器方法的参数上。</p> 
<p>注解中传入参数，比如 <code>@CookieValue("cookie")</code> 表示提取名为"cookie"的 Cookie 的值</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getck"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getCookie</span><span class="token punctuation">(</span><span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">"cookie"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> cookie<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"cookie: "</span> <span class="token operator">+</span> cookie<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在浏览器中手动添加 cookie，可以看到服务端成功获取并返回了：</p> 
<p><img src="https://images2.imgbox.com/00/86/boiHHzGP_o.png" alt="img"></p> 
<hr> 
<p><strong>获取 Header</strong></p> 
<p><code>@RequestHeader</code> 注解 用于从 HTTP 请求头中提取特定的信息，并将其映射到控制器方法的参数上。</p> 
<p>传入参数指定要提取的请求头的名称。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/gethead"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getHead</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"User-Agent: "</span> <span class="token operator">+</span> userAgent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<hr> 
<p><strong>session 存储和获取</strong></p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/setSession"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">setSession</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 获取 HttpSession 对象</span>
    <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 存储数据到会话中</span>
    session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> <span class="token string">"john_doe"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">"redirect:/getSession"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/getSession"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSession</span><span class="token punctuation">(</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 从会话中获取数据</span>
    <span class="token class-name">String</span> username <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token string">"sessionResult: "</span> <span class="token operator">+</span> username<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>和原始的 Servlet 没有区别，这里不做赘述。</p> 
<h3><a id="_277"></a>参数重命名</h3> 
<p><code>@RequestParam</code> 用于指定要提取的参数名称，这样，参数名和前端的查询字符串的名称就可以不一样了。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/gettime"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getTime</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">"t"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> time<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"time: "</span> <span class="token operator">+</span> time<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/77/35/UaXAixKw_o.png" alt="img"></p> 
<h3><a id="_290"></a>非必传参数</h3> 
<p>在Spring MVC中，你可以通过在方法参数上使用 <code>@RequestParam</code> 注解，并设置 <code>required</code> 属性为 <code>false</code> 来表示一个参数是非必传的。默认情况下，<code>@RequestParam</code> 的 <code>required</code> 属性是 <code>true</code>，即参数是必传的。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/example"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">exampleMethod</span><span class="token punctuation">(</span>
            <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"optionalParam"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> optionalParam<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 处理参数</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>optionalParam <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 参数存在时的处理逻辑</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Optional Parameter: "</span> <span class="token operator">+</span> optionalParam<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 参数不存在时的处理逻辑</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Optional Parameter is not provided"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 其他业务逻辑</span>

        <span class="token keyword">return</span> <span class="token string">"exampleView"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>如果请求中包含了该参数，则参数值会被传递到方法中；如果请求中没有包含该参数，方法中的 <code>optionalParam</code> 将为 <code>null</code>。</p> 
<h3><a id="url_319"></a>获取url路径中的参数</h3> 
<p>如下代码 其中 <code>{name}</code> 和 <code>{password}</code> 是占位符，表示路径中的变量</p> 
<p><code>@PathVariable</code> 注解：用于将 URI 模板变量映射到方法的参数上。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/login4/{name}/{password}"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login4</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token string">"name: "</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", password: "</span> <span class="token operator">+</span> password<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/6f/dd/iwXUyBV4_o.png" alt="img"></p> 
<h2><a id="_336"></a>请求转发和请求重定向</h2> 
<p><strong>区别</strong></p> 
<ol><li>请求重定向（redirect）将请求重新定位到资源；请求转发（forward）服务端转发</li><li>请求重定向地址发生变化；请求转发地址不发生变化</li><li>请求重定向与直接访问新地址效果一样，不存在原来的外部资源不能访问；请求转发服务端转发有可能造成原外部资源不能访问</li></ol> 
<p>在Spring MVC中，“forward:” 和 “redirect:” 是用于控制器方法返回视图的两个关键字。</p> 
<p>例：</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestController</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 请求转发</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello1"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">hello1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"forward:/login.html"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 请求重定向</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hello2"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">hello2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"redirect:https://www.baidu.com"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1d762bf08cb01782993fb1fa5cc2eebb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">uniapp如何监听页面滚动</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec3b2fd24adb2b2056337e6587308e8b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">分享最简单注册GPT，采用API分发通道模型端口</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>