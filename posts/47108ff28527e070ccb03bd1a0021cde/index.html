<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue&#43;Springboot视频压缩&amp;清晰播放的前后端技术实现要点 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue&#43;Springboot视频压缩&amp;清晰播放的前后端技术实现要点" />
<meta property="og:description" content="思路介绍 在互联网应用中，视频是一种常见的媒体形式，但是视频文件往往占用较大的存储空间和网络带宽，影响用户的体验和效率。为了解决这个问题，我们可以使用视频压缩技术，将视频文件的大小和质量进行平衡，减少视频传输和存储的成本。同时，我们也需要保证视频的清晰度和流畅度，让用户能够观看高质量的视频内容。
本文将介绍如何使用Vue&#43;Springboot框架实现一个视频压缩&amp;清晰播放的前后端应用，主要包括以下几个方面：
前端使用Vue框架搭建一个简单的视频上传和播放界面，使用Element UI组件库提供美观的样式和交互。后端使用Springboot框架搭建一个RESTful API服务，提供视频上传、压缩、下载和播放的功能，使用FFmpeg工具进行视频压缩处理，使用H2数据库存储视频元数据。使用axios库实现前后端的数据交互，使用video.js库实现视频播放器的自定义和控制。 技术要点讲解 前端部分 1. 创建Vue项目 我们可以使用Vue CLI工具创建一个Vue项目，命令如下：
vue create video-compression 复制
选择默认的配置即可，等待项目创建完成后，进入项目目录，运行以下命令启动开发服务器：
npm run serve 复制
打开浏览器访问http://localhost:8080/，可以看到一个简单的欢迎页面。
2. 安装依赖库 我们需要安装以下几个依赖库：
axios：用于实现前后端的数据交互element-ui：用于提供美观的UI组件video.js：用于实现视频播放器的自定义和控制 运行以下命令安装这些库：
npm install axios element-ui video.js --save 复制
3. 配置Element UI 在main.js文件中，引入element-ui的样式文件和组件库，并注册为全局组件：
import Vue from &#39;vue&#39; import App from &#39;./App.vue&#39; import ElementUI from &#39;element-ui&#39; import &#39;element-ui/lib/theme-chalk/index.css&#39; Vue.use(ElementUI) Vue.config.productionTip = false new Vue({ render: h =&gt; h(App), }).$mount(&#39;#app&#39;) 复制
4. 创建视频上传和播放界面 在src目录下创建一个components文件夹，并在其中创建一个VideoUpload.vue文件，这个文件是我们的视频上传和播放组件。在这个文件中，我们需要定义以下几个数据和方法：
videoFile：用于存储用户选择的视频文件对象videoUrl：用于存储用户上传的视频文件的URL地址compressedVideoUrl：用于存储用户下载的压缩后的视频文件的URL地址uploadVideo：用于实现视频文件的上传功能，调用后端的/upload接口，并将返回的URL地址赋值给videoUrlcompressVideo：用于实现视频文件的压缩功能，调用后端的/compress接口，并将返回的URL地址赋值给compressedVideoUrldownloadVideo：用于实现视频文件的下载功能，调用后端的/download接口，并将压缩后的视频文件保存到本地playVideo：用于实现视频文件的播放功能，使用video.js库创建一个视频播放器，并将videoUrl或compressedVideoUrl作为视频源 在&lt;template&gt;标签中，我们需要使用element-ui的组件来构建一个简单的界面，包括以下几个部分：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/47108ff28527e070ccb03bd1a0021cde/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-07T00:56:43+08:00" />
<meta property="article:modified_time" content="2023-07-07T00:56:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue&#43;Springboot视频压缩&amp;清晰播放的前后端技术实现要点</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>思路介绍</h3> 
<p>在互联网应用中，视频是一种常见的媒体形式，但是视频文件往往占用较大的存储空间和网络带宽，影响用户的体验和效率。为了解决这个问题，我们可以使用视频压缩技术，将视频文件的大小和质量进行平衡，减少视频传输和存储的成本。同时，我们也需要保证视频的清晰度和流畅度，让用户能够观看高质量的视频内容。</p> 
<p>本文将介绍如何使用Vue+Springboot框架实现一个视频压缩&amp;清晰播放的前后端应用，主要包括以下几个方面：</p> 
<ul><li>前端使用Vue框架搭建一个简单的视频上传和播放界面，使用Element UI组件库提供美观的样式和交互。</li><li>后端使用Springboot框架搭建一个RESTful API服务，提供视频上传、压缩、下载和播放的功能，使用FFmpeg工具进行视频压缩处理，使用H2数据库存储视频元数据。</li><li>使用axios库实现前后端的数据交互，使用video.js库实现视频播放器的自定义和控制。</li></ul> 
<h3>技术要点讲解</h3> 
<h4>前端部分</h4> 
<h5>1. 创建Vue项目</h5> 
<p>我们可以使用Vue CLI工具创建一个Vue项目，命令如下：</p> 
<pre><code>vue create video-compression
</code></pre> 
<p>复制</p> 
<p>选择默认的配置即可，等待项目创建完成后，进入项目目录，运行以下命令启动开发服务器：</p> 
<pre><code>npm run serve
</code></pre> 
<p>复制</p> 
<p>打开浏览器访问http://localhost:8080/，可以看到一个简单的欢迎页面。</p> 
<h5>2. 安装依赖库</h5> 
<p>我们需要安装以下几个依赖库：</p> 
<ul><li>axios：用于实现前后端的数据交互</li><li>element-ui：用于提供美观的UI组件</li><li>video.js：用于实现视频播放器的自定义和控制</li></ul> 
<p>运行以下命令安装这些库：</p> 
<pre><code>npm install axios element-ui video.js --save
</code></pre> 
<p>复制</p> 
<h5>3. 配置Element UI</h5> 
<p>在main.js文件中，引入element-ui的样式文件和组件库，并注册为全局组件：</p> 
<pre><code>import Vue from 'vue'
import App from './App.vue'
import ElementUI from 'element-ui'
import 'element-ui/lib/theme-chalk/index.css'

Vue.use(ElementUI)

Vue.config.productionTip = false

new Vue({
  render: h =&gt; h(App),
}).$mount('#app')
</code></pre> 
<p>复制</p> 
<h5>4. 创建视频上传和播放界面</h5> 
<p>在src目录下创建一个components文件夹，并在其中创建一个VideoUpload.vue文件，这个文件是我们的视频上传和播放组件。在这个文件中，我们需要定义以下几个数据和方法：</p> 
<ul><li>videoFile：用于存储用户选择的视频文件对象</li><li>videoUrl：用于存储用户上传的视频文件的URL地址</li><li>compressedVideoUrl：用于存储用户下载的压缩后的视频文件的URL地址</li><li>uploadVideo：用于实现视频文件的上传功能，调用后端的/upload接口，并将返回的URL地址赋值给videoUrl</li><li>compressVideo：用于实现视频文件的压缩功能，调用后端的/compress接口，并将返回的URL地址赋值给compressedVideoUrl</li><li>downloadVideo：用于实现视频文件的下载功能，调用后端的/download接口，并将压缩后的视频文件保存到本地</li><li>playVideo：用于实现视频文件的播放功能，使用video.js库创建一个视频播放器，并将videoUrl或compressedVideoUrl作为视频源</li></ul> 
<p>在&lt;template&gt;标签中，我们需要使用element-ui的组件来构建一个简单的界面，包括以下几个部分：</p> 
<ul><li>一个el-upload组件，用于选择和上传视频文件，绑定videoFile数据和uploadVideo方法</li><li>一个el-button组件，用于触发视频文件的压缩功能，绑定compressVideo方法</li><li>一个el-button组件，用于触发视频文件的下载功能，绑定downloadVideo方法</li><li>一个el-button组件，用于触发视频文件的播放功能，绑定playVideo方法</li><li>一个div元素，用于显示视频播放器，设置id为video-player</li></ul> 
<p>VideoUpload.vue文件的完整代码如下：</p> 
<pre><code>&lt;template&gt;
  &lt;div class="video-upload"&gt;
    &lt;el-upload
      action="#"
      :auto-upload="false"
      :show-file-list="false"
      :before-upload="uploadVideo"
    &gt;
      &lt;el-button type="primary"&gt;选择视频&lt;/el-button&gt;
    &lt;/el-upload&gt;
    &lt;el-button type="success" @click="compressVideo" :disabled="!videoUrl"&gt;压缩视频&lt;/el-button&gt;
    &lt;el-button type="info" @click="downloadVideo" :disabled="!compressedVideoUrl"&gt;下载视频&lt;/el-button&gt;
    &lt;el-button type="warning" @click="playVideo" :disabled="!videoUrl &amp;&amp; !compressedVideoUrl"&gt;播放视频&lt;/el-button&gt;
    &lt;div id="video-player"&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import axios from 'axios'
import videojs from 'video.js'
import 'video.js/dist/video-js.css'

export default {
  name: 'VideoUpload',
  data() {
    return {
      videoFile: null,
      videoUrl: '',
      compressedVideoUrl: ''
    }
  },
  methods: {
    uploadVideo(file) {
      this.videoFile = file
      let formData = new FormData()
      formData.append('file', file)
      axios.post('http://localhost:8081/upload', formData, {
        headers: {
          'Content-Type': 'multipart/form-data'
        }
      }).then(res =&gt; {
        this.videoUrl = res.data
        this.$message.success('上传成功')
      }).catch(err =&gt; {
        console.error(err)
        this.$message.error('上传失败')
      })
      return false
    },
    compressVideo() {
      axios.get('http://localhost:8081/compress', {
        params: {
          url: this.videoUrl
        }
      }).then(res =&gt; {
        this.compressedVideoUrl = res.data
        this.$message.success('压缩成功')
      }).catch(err =&gt; {
        console.error(err)
        this.$message.error('压缩失败')
      })
    },
    downloadVideo() {
      axios.get('http://localhost:8081/download', {
        params: {
          url: this.compressedVideoUrl
        },
        responseType: 'blob'
      }).then(res =&gt; {
        let blob = res.data
        let url = window.URL.createObjectURL(blob)
        let link = document.createElement('a')
        link.href = url
        link.download = this.videoFile.name.replace(/\.\w+$/, '-compressed.mp4')
        link.click()
        window.URL.revokeObjectURL(url)
        this.$message.success('下载成功')
      }).catch(err =&gt; {
        console.error(err)
        this.$message.error('下载失败')
      })
    },
    playVideo() {
      let player = videojs('video-player', {
        controls: true,
        autoplay: true,
        preload: 'auto',
        fluid: true,
        sources: [{
          src: this.compressedVideoUrl || this.videoUrl,
          type: 'video/mp4'
        }]
      })
    }
  }
}
&lt;/script&gt;

&lt;style scoped&gt;
.video-upload {
  margin: 20px;
}
#video-player {
  width: 800px;
  height: 450px;
}
&lt;/style&gt;</code></pre> 
<h4>如何用FFmpeg进行视频压缩</h4> 
<p>FFmpeg是一个强大的视频处理工具，可以用来进行视频压缩。视频压缩的原理是降低视频的比特率、分辨率、帧率或编码格式，从而减少视频文件的大小，但同时也会损失一定的视频质量。FFmpeg可以通过命令行参数来控制视频压缩的各种选项，例如：</p> 
<ul><li><code>-vcodec</code>：指定视频编码格式，例如libx264（H.264）、libx265（H.265）、libvpx（VP8/VP9）等</li><li><code>-crf</code>：指定压缩质量因子，取值范围为0-51，0表示无损，23为默认值，数值越大质量越低</li><li><code>-b:v</code>：指定视频比特率，例如1M、500k等</li><li><code>-s</code>：指定视频分辨率，例如1280x720、640x480等</li><li><code>-r</code>：指定视频帧率，例如30、24、15等</li></ul> 
<p>以下是一些使用FFmpeg进行视频压缩的示例：</p> 
<ul><li> <p>使用H.264编码格式和23的压缩质量因子压缩视频：</p> <pre><code>ffmpeg -i input.mp4 -vcodec libx264 -crf 23 output.mp4
</code></pre> </li><li> <p>使用H.265编码格式和28的压缩质量因子压缩视频：</p> <pre><code>ffmpeg -i input.mp4 -vcodec libx265 -crf 28 output.mp4
</code></pre> </li><li> <p>使用VP9编码格式和1M的比特率压缩视频：</p> <pre><code>ffmpeg -i input.mp4 -vcodec libvpx-vp9 -b:v 1M output.webm
</code></pre> </li><li> <p>将视频分辨率降低为640x480：</p> <pre><code>ffmpeg -i input.mp4 -s 640x480 output.mp4
</code></pre> </li><li> <p>将视频帧率降低为15：</p> <pre><code>ffmpeg -i input.mp4 -r 15 output.mp4</code></pre> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1408b2b6f106e1eb808dd7f3b605a9bb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">kubernetes Pod Lifecycle生命周期与livenessProbe、 readinessProbe探测方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7f3591e5f6fa76cc10d7d828d0675f7d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">系统监控(ps、htop等)、网络监控系列(jnettop、nmap、netstat等)、日志监控、系统工具</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>