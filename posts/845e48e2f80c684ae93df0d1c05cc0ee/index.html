<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>xilinx FPGA在线调试方法总结（vivado&#43;ila&#43;vio） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="xilinx FPGA在线调试方法总结（vivado&#43;ila&#43;vio）" />
<meta property="og:description" content="本文主要介绍xilinx FPGA开发过程中常用的调试方法，包括ILA、VIO和TCL命令等等，详细介绍了如何使用。 一、FPGA调试基本原则 根据实际的输出结果表现，来推测可能的原因，再在模块中加ILA信号，设置抓信号条件，逐步定位问题模块和原因，最终解决bug。
二、FPGA常用调试方法 1、调用IP （1）ILA
第1步：在vivado中，打开IP核目录（IP Catalog），在搜索框中输入ILA（不区分大小写），按图示方式进行选择即可。
第2步：设置ILA参数
探针数根据需要采集的信号数设定，或者直接设定一个信号；
采样数据深度可根据实际需要和资源消耗情况进行设置，一般选择默认的1024即可；
第3步：测量信号的位宽进行设置
第4步：在IP source区，打开ILA，添加例化模板, 在代码中插入例化，把VIO的输出口连接到模块的输入。
ila_0 u_ila( .clk(clk), .probe0(probe0), .probe1(probe1), .probe2(probe2)); （2）VIO IP VIO的输出可以控制测试模块的输入，VIO的输入可以显示模块的输出值。
第1步: 例化一个VIO核，根据需要设定输入输出的数目
第2步：设置vio输出端口的位宽与初始值：
第3步：在代码中插入例化，把VIO的输出口连接到模块的输入。
vio_0 u_vio( .clk(clk), .probe_out0(probe_out0)); 2、添加调试信号 （1）在Verilog HDL文件中直接添加，特点是防止信号被优化，最大可能保留信号原本的名称。
在input/output前或在声明变量前添加(* mark_debug = “true” *)
(* mark_debug = &#34;true&#34; *) wire done;(* mark_debug = &#34;true&#34; *) reg cnt; （2）标记Debug mark方法，可以在原理图（block design）或在综合后的网表（Netlist）中添加。
A、在原理图（block design）右击添加“Mark Debug”，工程综合后，在SYNTHESIS &gt; Open Synthesized Design，在Netlist窗口中选择需要调试的网络节点，进行调试。
右键单击任意网络节点，点击Mark Debug，该网络节点会出现小甲虫标记。
对于已经选中Mark Debug的网络节点，也可以取消调试。右键单击该网络节点，选择Unmark Debug即可" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/845e48e2f80c684ae93df0d1c05cc0ee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-21T22:25:50+08:00" />
<meta property="article:modified_time" content="2023-02-21T22:25:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">xilinx FPGA在线调试方法总结（vivado&#43;ila&#43;vio）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">本文主要介绍xilinx FPGA开发过程中常用的调试方法，包括ILA、VIO和TCL命令等等，详细介绍了如何使用。</span></h3> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">一、FPGA调试基本原则</span></h3> 
 <p style="">根据实际的输出结果表现，来推测可能的原因，再在模块中加ILA信号，设置抓信号条件，逐步定位问题模块和原因，最终解决bug。</p> 
 <h3 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">二、FPGA常用调试方法</span></h3> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">1、调用IP</span></h4> 
 <p style=""><span class="kdocs-bold" style="font-weight:bold;">（1）ILA</span></p> 
 <p style="">第1步：在vivado中，打开IP核目录（IP Catalog），在搜索框中输入ILA（不区分大小写），按图示方式进行选择即可。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:717px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:31.101812%;height:0;"> 
    <img src="https://images2.imgbox.com/13/a9/3TysE95j_o.png" style="margin-left:;display:block;width:717px;margin-top:-31.101812%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">第2步：设置ILA参数</p> 
 <p style="">探针数根据需要采集的信号数设定，或者直接设定一个信号；</p> 
 <p style="">采样数据深度可根据实际需要和资源消耗情况进行设置，一般选择默认的1024即可；</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:717px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:61.645744%;height:0;"> 
    <img src="https://images2.imgbox.com/ab/9c/O9lqOc3v_o.png" style="margin-left:;display:block;width:717px;margin-top:-61.645744%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">第3步：测量信号的位宽进行设置</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:717px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:46.722454%;height:0;"> 
    <img src="https://images2.imgbox.com/ef/da/CvFCIKCn_o.png" style="margin-left:;display:block;width:717px;margin-top:-46.722454%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:384px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:134.1146%;height:0;"> 
    <img src="https://images2.imgbox.com/67/38/kLSr6buY_o.png" style="margin-left:;display:block;width:384px;margin-top:-134.1146%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">第4步：在IP source区，打开ILA，添加例化模板, 在代码中插入例化，把VIO的输出口连接到模块的输入。</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">ila_0 u_ila( .clk(clk), .probe0(probe0), .probe1(probe1), .probe2(probe2));</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">（2）VIO IP</span></h4> 
 <p style="">VIO的输出可以控制测试模块的输入，VIO的输入可以显示模块的输出值。</p> 
 <p style="">第1步: 例化一个VIO核，根据需要设定输入输出的数目</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:688px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:86.773254%;height:0;"> 
    <img src="https://images2.imgbox.com/d2/b2/lj168cVH_o.png" style="margin-left:;display:block;width:688px;margin-top:-86.773254%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">第2步：设置vio输出端口的位宽与初始值：</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:695px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:85.899284%;height:0;"> 
    <img src="https://images2.imgbox.com/21/9f/151KyfN0_o.png" style="margin-left:;display:block;width:695px;margin-top:-85.899284%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">第3步：在代码中插入例化，把VIO的输出口连接到模块的输入。</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">vio_0 u_vio( .clk(clk), .probe_out0(probe_out0));</code></pre> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">2、添加调试信号</span></h4> 
 <p style="">（1）在Verilog HDL文件中直接添加，特点是防止信号被优化，最大可能保留信号原本的名称。</p> 
 <p style=""> 在input/output前或在声明变量前添加(* mark_debug = “true” *)</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">(* mark_debug = "true" *) wire done;(* mark_debug = "true" *) reg cnt;</code></pre> 
 <p style="">（2）标记Debug mark方法，可以在原理图（block design）或在综合后的网表（Netlist）中添加。</p> 
 <p style="">A、在原理图（block design）右击添加“Mark Debug”，工程综合后，在SYNTHESIS &gt; Open Synthesized Design，在Netlist窗口中选择需要调试的网络节点，进行调试。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:414px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:90.09662%;height:0;"> 
    <img src="https://images2.imgbox.com/db/e4/9MaBFSwN_o.png" style="margin-left:;display:block;width:414px;margin-top:-90.09662%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">右键单击任意网络节点，点击Mark Debug，该网络节点会出现小甲虫标记。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:207px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:63.285027%;height:0;"> 
    <img src="https://images2.imgbox.com/f5/a9/Twntr8Sb_o.png" style="margin-left:;display:block;width:207px;margin-top:-63.285027%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">对于已经选中Mark Debug的网络节点，也可以取消调试。右键单击该网络节点，选择Unmark Debug即可</p> 
 <p style="">B、在综合后，Flow Navigator &gt; SYNTHESIS &gt; Open Synthesized Design &gt; Schematic下打开的原理图（Schematic）中通过右键单击选中线路，添加Mark Debug信号，和Unmark Debug信号</p> 
 <p style="">点击 Windows &gt; Debug，即可出现Debug窗口，在这里可以观察到已经mark debug的信号。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:370px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:89.45946%;height:0;"> 
    <img src="https://images2.imgbox.com/9b/31/jjHact5z_o.png" style="margin-left:;display:block;width:370px;margin-top:-89.45946%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="">（3）使用Tcl命令，直接修改*.xdc文件，和添加ILA（ Integrated Logic Analyzer） IP核完成.</p> 
 <pre class="kdocs-plaintext"><code class="language-plaintext">set_property MARK_DEBUG true [get_nets [list {control_reg[0]} {control_reg[1]} \   {control_reg[2]} {control_reg[3]} {control_reg[4]} {control_reg[5]} \   {control_reg[6]} {control_reg[7]} {control_reg[8]} {control_reg[9]} \   {control_reg[10]} {control_reg[11]} {control_reg[12]} {control_reg[13]} \   {control_reg[14]} {control_reg[15]} {control_reg[16]} {control_reg[17]} \   {control_reg[18]} {control_reg[19]} {control_reg[20]} {control_reg[21]} \   {control_reg[22]} {control_reg[23]} {control_reg[24]} {control_reg[25]} \   {control_reg[26]} {control_reg[27]} {control_reg[28]} {control_reg[29]} \   {control_reg[30]} {control_reg[31]}]]create_debug_core u_ila_0 ilaset_property port_width 1 [get_debug_ports u_ila_0/CLK]connect_debug_port u_ila_0/CLK [get_nets [list wbClk ]]set_property port_width 32 [get_debug_ports u_ila_0/PROBE0]connect_debug_port u_ila_0/PROBE0 [get_nets [list {control_reg[0]}   {control_reg[1]} {control_reg[2]} {control_reg[3]} {control_reg[4]} \   {control_reg[5]} {control_reg[6]} {control_reg[7]} {control_reg[8]} \   {control_reg[9]} {control_reg[10]} {control_reg[11]} {control_reg[12]} \   {control_reg[13]} {control_reg[14]} {control_reg[15]} {control_reg[16]} \   {control_reg[17]} {control_reg[18]} {control_reg[19]} {control_reg[20]} \   {control_reg[21]} {control_reg[22]} {control_reg[23]} {control_reg[24]} \   {control_reg[25]} {control_reg[26]} {control_reg[27]} {control_reg[28]} \   {control_reg[29]} {control_reg[30]} {control_reg[31]} ]]</code></pre> 
 <p style=""></p> 
 <hr> 
 <p style="">以上就是本次分享的xilinx FPGA调试方法总结，希望大家阅读完后，有所收获。</p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:299px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:114.04682%;height:0;"> 
    <img src="https://images2.imgbox.com/a5/88/gzog9fCe_o.png" style="margin-left:;display:block;width:299px;margin-top:-114.04682%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style=""></p> 
 <p style=""></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f60be25cac31429ae1e7f5373f1cc4ea/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">VSCode 出现 正在保存“xxxx.vue”: 从 “‘Vetur‘, ‘ESLint‘“(configure)中获取代码操作。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/51808bbc744910f9639ed2589aab3f34/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ELK 详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>