<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JBOSS之性能优化 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JBOSS之性能优化" />
<meta property="og:description" content="为了优化jboss的性能，对jboss服务器做如下改动：
设置jvm 参数 安装jboss-native 降低jboss输出日志的等级 起用了jboss内的tomcat对传输数据的压缩功能 使用ehcache做hibernate的二级缓存 下面就以上的各改动做详细说明，为了表述方便&lt;jboss&gt;代表jboss的安装目录：
设置 jvm 参数
编辑&lt;jboss&gt;/bin/run.conf, 在文件的底部找到对参数JAVA_OPTS进行设置的地方。这个参数会最后传到jvm里。其中 -Xms512m 代表jvm最少用 512m内存 -Xmx1024m 代表jvm最多使用 1024m内存
修改这个两参数，给jvm分配适当的内存，一般为服务器的3/4内存量，推荐至少使用4G内存。
另外添加两个参数 -XX:&#43;UseParallelGC -XX:&#43;UseParallelOldGC 这两个让服务并行回收内存空间。修改完成后，大致
为 JAVA_OPTS = “-Xms4096m -Xmx8192m -XX:&#43;UseParallelGC -XX:&#43;UseParallelOldGC -Dsum…….
安装jbossNative
jboss的web container使用的 apache tomcat (http://www.apache.org)。 apache tomcat 有一个扩展包，使tomcat可以通过 java native interface 使用 apache portable runtime (APR)，而APR则是大名顶顶的apache httpd 网络服务器的运行时环境。用了这个扩展之后，就使得tomcat可以借助于apache httpd的力量，性能得以提升，尤其是处理静态文件时效率更高。Jboss native，实际上就是tomcat的这个native的扩展，只不过被jboss又添进了一些为了和jboss更好协作而加进去的东西。
要安装jboss native, 按以下步骤进行:
请到jboss的网站上下载，地址是 http://www.jboss.org/jbossweb/downloads/jboss-native/?action=a&amp;windowstate=maximized, 依据服务器环境选择合适的版本。
解压下载后的压缩包到某个目录，比如 jbossNative目录
将jbossNative/bin/META-INF/bin/linux2/x86/openssl 复制到&lt;jboss&gt;/bin
在&lt;jboss&gt;/bin目录里建一个文件夹，名为 native
把jbossNative/bin/META-INF/lib/linux2/x86/ 目录下所有内容复制到上一步建好的&lt;jboss&gt;/bin/native目录下
降低jboss输出日志的等级
打开 &lt;jboss&gt;/server/default/conf/jboss-log4j." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ea8df3c0630c194348dcafc399bbec5f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-06-23T16:56:00+08:00" />
<meta property="article:modified_time" content="2011-06-23T16:56:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JBOSS之性能优化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> </p> 
<p>    为了优化jboss的性能，对jboss服务器做如下改动：<br></p> 
<ul><li>设置jvm 参数</li></ul> 
<ul><li>安装jboss-native </li></ul> 
<ul><li>降低jboss输出日志的等级 </li></ul> 
<ul><li>起用了jboss内的tomcat对传输数据的压缩功能 </li></ul> 
<ul><li>使用ehcache做hibernate的二级缓存</li></ul> 
<p>    下面就以上的各改动做详细说明，为了表述方便&lt;jboss&gt;代表jboss的安装目录：<br></p> 
<ol><li>设置 jvm 参数<br> 编辑&lt;jboss&gt;/bin/run.conf,  在文件的底部找到对参数JAVA_OPTS进行设置的地方。这个参数会最后传到jvm里。其中 <p>-Xms512m 代表jvm最少用 512m内存 <br> -Xmx1024m 代表jvm最多使用 1024m内存</p> <p><br>       修改这个两参数，给jvm分配适当的内存，一般为服务器的3/4内存量，推荐至少使用4G内存。<br> 另外添加两个参数 -XX:+UseParallelGC -XX:+UseParallelOldGC 这两个让服务并行回收内存空间。修改完成后，大致</p> 为  JAVA_OPTS = “-Xms4096m -Xmx8192m -XX:+UseParallelGC -XX:+UseParallelOldGC -Dsum…….<br> </li><li>安装jbossNative<br>      jboss的web container使用的 apache tomcat (http://www.apache.org)。 apache tomcat 有一个扩展包，使tomcat可以通过 java native interface 使用 apache portable runtime (APR)，而APR则是大名顶顶的apache httpd 网络服务器的运行时环境。用了这个扩展之后，就使得tomcat可以借助于apache httpd的力量，性能得以提升，尤其是处理静态文件时效率更高。Jboss native，实际上就是tomcat的这个native的扩展，只不过被jboss又添进了一些为了和jboss更好协作而加进去的东西。<br> <br> 要安装jboss native, 按以下步骤进行:<br>       请到jboss的网站上下载，地址是 http://www.jboss.org/jbossweb/downloads/jboss-native/?action=a&amp;windowstate=maximized, 依据服务器环境选择合适的版本。<br> 解压下载后的压缩包到某个目录，比如 jbossNative目录<br> 将jbossNative/bin/META-INF/bin/linux2/x86/openssl 复制到&lt;jboss&gt;/bin<br> 在&lt;jboss&gt;/bin目录里建一个文件夹，名为 native<br> 把jbossNative/bin/META-INF/lib/linux2/x86/ 目录下所有内容复制到上一步建好的&lt;jboss&gt;/bin/native目录下<br> </li><li>降低jboss输出日志的等级<br>       打开 &lt;jboss&gt;/server/default/conf/jboss-log4j.xml ，这是一个log4j的配置文件。log4j的详细配置说明请参看  http://logging.apache.org/log4j/1.2/index.html  。日志输出的太多，会导致服务器性能降低，所以减少不必要的日志输出。方法大体如下：<br> <br> 找到 name=”org.jboss” 的category 元素，设置里面的priority元素为 &lt;priority value=”INFO” /&gt;<br> 建一个新的category，内容为 &lt;category name=”javax.faces”&gt;&lt;priority value=”INFO” /&gt;&lt;/category&gt;<br> <br> log4j 还能够将不同的日志输入到不同的地方，为了以后维护方便，应该将不同 category的日志输入到不同的文件里。详细方法参看上面的网站里的说明。<br> </li><li>起用了jboss内的tomcat对传输数据的压缩功能<br> 当使用大量的javascript、css等静态文件时，为了减少传输时间，可以起用压缩功能。方法是：<br> <br> 打开&lt;jboss&gt;/server/default/deploy/jboss-web.deployer/server.xml<br> <br> 找到 protocol=”HTTP/1.1″的 Connector元素，<br> 添加属性 URIEncoding=”utf-8″ compression=”on” compressionMinSize=”2048″ noCompressionUserAgents=”gozilla, traviata” compressableMimeType=”text/html,text/xml,text/javascript, text/css, text/plain,application/xhtml+xml,application/x-javascript,application/javascript,text/xhtml”<br> 添加完后类似于：<br> &lt;Connector port=”8080″ address=”${jboss.bind.address}”  <br> maxThreads=”250″ maxHttpHeaderSize=”8192″<br> emptySessionPath=”true” protocol=”HTTP/1.1″<br> enableLookups=”false” redirectPort=”8443″ acceptCount=”100″<br> connectionTimeout=”20000″ disableUploadTimeout=”true” URIEncoding=”utf-8″ compression=”on” compressionMinSize=”2048″ noCompressionUserAgents=”gozilla, traviata” compressableMimeType=”text/html,text/xml,text/javascript, text/css, text/plain,application/xhtml+xml,application/x-javascript,application/javascript,text/xhtml”/&gt;<br> </li><li>使用ehcache做hibernate的二级缓存<br> 起用二级缓存，可以大大提高hibernate的运行效率。<br> <br> 到http://ehcache.sourceforge.net/ 网站下载 ehcache-1.4.1.tgz <br> 解压到某个目录，例如ehcache目录 <br> 复 制 ehcache/ehcache-1.4.1/ehcache-1.4.1.jar, ehcache/ehcache-1.4.1/lib/backport-util-concurrent-3.0.jar和 ehcache/ehcache-1.4.1/lib/jsr107cache-1.0.jar到 &lt;jboss&gt;/server/default/lib目录<br> <br> 文章来源自：<a href="http://jameswxx.iteye.com/blog/250753" rel="nofollow">http://jameswxx.iteye.com/blog/250753</a> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2731386ac3a98b4af35aae66426248f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ios上libevent在dns解析时崩溃的解决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/432b633a0ac90c2b6e516e65089ffd77/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">维度建模中处理空值的策略</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>