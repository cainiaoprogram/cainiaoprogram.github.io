<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Kali系统学习：弱点扫描工具NMAP实战演示 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Kali系统学习：弱点扫描工具NMAP实战演示" />
<meta property="og:description" content="Kali系统学习：弱点扫描工具NMAP实战演示 目录 Kali系统学习：弱点扫描工具NMAP实战演示1 Nmap介绍2 Nmap常用命令3 实战演练3.1 搜寻网络内活跃的主机3.2 扫描目标主机3.3 查找漏洞使用方法（可跳过）3.4 端口扫描3.5 利用脚本检查漏洞 4 后话 1 Nmap介绍 Nmap，是 Network Mapper 的缩写，由 Gordon Lyon 维护(更多关于作者 Mr. Lyon 的信息可以访问这个网页: http://insecure.org/fyodor/) ，并被世界各地许多的安全专业人员使用。它被默认安装于我们的kali系统中，无需另外安装，使用起来非常方便，再因其功能的强大，深受网络安全有关从业人员的喜爱。
其实有关Nmap还有一个图形化界面的前端版本，名为Zenmap，Zenmap是Nmap的GUI版本，由Nmap官方提供，通常随着Nmap安装包一起发布。Zenmap是用Python语言编写的，能够在Windows、Linux、UNIX、Mac OS等不同系统上运行。开发Zenmap的目的主要是为Nmap提供更加简单的操作方式。
但是在我还是由衷的建议大家学习命令行版本的Nmap，首先做主要的原因还是我个人认为命令行版本的Nmap使用起来比Zenmap更灵活，其次作为一名网络相关行业的人员，命令行（还有掉发…）是一个无法绕开的经历，如果你是老手了，命令行自然不会陌生，也没有难度，那么为什么不选择更灵活的Nmap呢？而如果你是一个新手，那么使用Nmap能帮助你更快熟悉Kali系统的使用，帮助你迅速进阶！
Nmap的基本功能主要有4个；
1、主机发现（Host Discovery）
2、端口扫描（Port Scanning）
3、版本侦测（Version Detection）
4、操作系统侦测（Operating System Detection）
2 Nmap常用命令 Nmap的功能十分强大，内含的各种参数也比较多，大家可以使用 nmap -h 查看详细操作说明
nmap -h #查看Nmap操作说明
结合我们的日常使用，在此我只列举些常用的参数供大家使用和参考：
参数注释-p指定扫描的端口号-v显示扫描过程-F执行快速扫描-n禁止反向域名解析-R反向域名解析-6启动ipv6扫描-Pn跳过主机发现的过程进行端口扫描-A全面扫描，该命令会扫描ip/域名的操作系统信息，版本信息，路径跟踪等等的内容，不过扫描速度嘛…，dddd-sSTCP SYN扫描-sUUDP扫描-sTTCP扫描-sV扫描系统版本可程序版本号检测–script=vuln全面的漏洞扫描-PA/-PS/-PR扫描局域网下包含的主机 3 实战演练 3.1 搜寻网络内活跃的主机 在渗透前期，我们首先先要确定在对应目标网段目前有多少的主机还&#34;活着&#34;，以方便我们寻找目标，在这里由于我们是以演示为目的，我们的目标主机为我的Metasploitable 2，这里我们可以使用 nmap &lt;目标ip&gt; &lt;参数&gt; 的方式对我们的目标进行扫描
nmap 192.168.254.0/24 #对192.168.254.0/24网段内所有ip地址进行扫描
可以看见，我们在这个网段里共扫描出了4个在活动的主机，其中包括了这个主机正在开放的服务、端口、IP地址等等信息，非常的详细。
但是在日常的渗透测试中我们会发现，许多的操作系统都会对端口扫描流量进行处理，这将会导致我们出现下面这种情况
什么主机都扫不出来
所以，我在此分享一下日常使用的一个小技巧，我们可以添加 -sn 参数，禁用 nmap 对主机端口扫描的默认行为，让 nmap 只尝试 ping 主机，这样就可以扫描出来了，用这样的方式进行扫描相比于什么参数都不加，首先就是可以速度上有优势，其次就是防止主机对端口扫描数据进行处理导致我们什么都扫不出来这种现状。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/38ceaee1ee28d1ac427998812effe70b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-25T12:33:36+08:00" />
<meta property="article:modified_time" content="2022-08-25T12:33:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Kali系统学习：弱点扫描工具NMAP实战演示</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="KaliNMAP_0"></a>Kali系统学习：弱点扫描工具NMAP实战演示</h2> 
<p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#KaliNMAP_0" rel="nofollow">Kali系统学习：弱点扫描工具NMAP实战演示</a></li><li><ul><li><a href="#1_Nmap_5" rel="nofollow">1 Nmap介绍</a></li><li><a href="#2_Nmap_23" rel="nofollow">2 Nmap常用命令</a></li><li><a href="#3__51" rel="nofollow">3 实战演练</a></li><li><ul><li><a href="#31__53" rel="nofollow">3.1 搜寻网络内活跃的主机</a></li><li><a href="#32__80" rel="nofollow">3.2 扫描目标主机</a></li><li><a href="#33__91" rel="nofollow">3.3 查找漏洞使用方法（可跳过）</a></li><li><a href="#34__127" rel="nofollow">3.4 端口扫描</a></li><li><a href="#35__136" rel="nofollow">3.5 利用脚本检查漏洞</a></li></ul> 
   </li><li><a href="#4__164" rel="nofollow">4 后话</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1_Nmap_5"></a>1 Nmap介绍</h3> 
<p>Nmap，是 Network Mapper 的缩写，由 Gordon Lyon 维护(更多关于作者 Mr. Lyon 的信息可以访问这个网页: <a href="http://insecure.org/fyodor/" rel="nofollow">http://insecure.org/fyodor/</a>) ，并被世界各地许多的安全专业人员使用。它被默认安装于我们的kali系统中，无需另外安装，使用起来非常方便，再因其功能的强大，深受网络安全有关从业人员的喜爱。</p> 
<p>其实有关Nmap还有一个图形化界面的前端版本，名为Zenmap，Zenmap是Nmap的GUI版本，由Nmap官方提供，通常随着Nmap安装包一起发布。Zenmap是用Python语言编写的，能够在Windows、Linux、UNIX、Mac OS等不同系统上运行。开发Zenmap的目的主要是为Nmap提供更加简单的操作方式。</p> 
<p>但是在我还是由衷的建议大家学习命令行版本的Nmap，首先做主要的原因还是我个人认为命令行版本的Nmap使用起来比Zenmap更灵活，其次作为一名网络相关行业的人员，命令行（还有掉发…）是一个无法绕开的经历，如果你是老手了，命令行自然不会陌生，也没有难度，那么为什么不选择更灵活的Nmap呢？而如果你是一个新手，那么使用Nmap能帮助你更快熟悉Kali系统的使用，帮助你迅速进阶！</p> 
<p>Nmap的基本功能主要有4个；</p> 
<p>1、主机发现（Host Discovery）</p> 
<p>2、端口扫描（Port Scanning）</p> 
<p>3、版本侦测（Version Detection）</p> 
<p>4、操作系统侦测（Operating System Detection）</p> 
<h3><a id="2_Nmap_23"></a>2 Nmap常用命令</h3> 
<p>Nmap的功能十分强大，内含的各种参数也比较多，大家可以使用 nmap -h 查看详细操作说明</p> 
<p><code>nmap -h </code>#查看Nmap操作说明</p> 
<p><img src="https://images2.imgbox.com/03/17/ueSF8flO_o.png" alt="在这里插入图片描述"></p> 
<p>结合我们的日常使用，在此我只列举些常用的参数供大家使用和参考：</p> 
<table><thead><tr><th align="center">参数</th><th align="center">注释</th></tr></thead><tbody><tr><td align="center">-p</td><td align="center">指定扫描的端口号</td></tr><tr><td align="center">-v</td><td align="center">显示扫描过程</td></tr><tr><td align="center">-F</td><td align="center">执行快速扫描</td></tr><tr><td align="center">-n</td><td align="center">禁止反向域名解析</td></tr><tr><td align="center">-R</td><td align="center">反向域名解析</td></tr><tr><td align="center">-6</td><td align="center">启动ipv6扫描</td></tr><tr><td align="center">-Pn</td><td align="center">跳过主机发现的过程进行端口扫描</td></tr><tr><td align="center">-A</td><td align="center">全面扫描，该命令会扫描ip/域名的操作系统信息，版本信息，路径跟踪等等的内容，不过扫描速度嘛…，dddd</td></tr><tr><td align="center">-sS</td><td align="center">TCP SYN扫描</td></tr><tr><td align="center">-sU</td><td align="center">UDP扫描</td></tr><tr><td align="center">-sT</td><td align="center">TCP扫描</td></tr><tr><td align="center">-sV</td><td align="center">扫描系统版本可程序版本号检测</td></tr><tr><td align="center">–script=vuln</td><td align="center">全面的漏洞扫描</td></tr><tr><td align="center">-PA/-PS/-PR</td><td align="center">扫描局域网下包含的主机</td></tr></tbody></table> 
<h3><a id="3__51"></a>3 实战演练</h3> 
<h4><a id="31__53"></a>3.1 搜寻网络内活跃的主机</h4> 
<p>在渗透前期，我们首先先要确定在对应目标网段目前有多少的主机还"活着"，以方便我们寻找目标，在这里由于我们是以演示为目的，我们的目标主机为我的Metasploitable 2，这里我们可以使用 nmap &lt;目标ip&gt; &lt;参数&gt; 的方式对我们的目标进行扫描</p> 
<p><code>nmap 192.168.254.0/24 </code>#对192.168.254.0/24网段内所有ip地址进行扫描</p> 
<p><img src="https://images2.imgbox.com/16/74/2RmS0yRY_o.png" alt="在这里插入图片描述"></p> 
<p>可以看见，我们在这个网段里共扫描出了4个在活动的主机，其中包括了这个主机正在开放的服务、端口、IP地址等等信息，非常的详细。</p> 
<p>但是在日常的渗透测试中我们会发现，许多的操作系统都会对端口扫描流量进行处理，这将会导致我们出现下面这种情况</p> 
<p><img src="https://images2.imgbox.com/a9/e6/ugxQq909_o.png" alt="在这里插入图片描述"></p> 
<p>什么主机都扫不出来</p> 
<p>所以，我在此分享一下日常使用的一个小技巧，我们可以添加 -sn 参数，禁用 nmap 对主机端口扫描的默认行为，让 nmap 只尝试 ping 主机，这样就可以扫描出来了，用这样的方式进行扫描相比于什么参数都不加，首先就是可以速度上有优势，其次就是防止主机对端口扫描数据进行处理导致我们什么都扫不出来这种现状。</p> 
<p><code>nmap 192.168.254.0/24 -sn</code> #对192.168.254.0网段的所有IP地址，跳过端口扫描功能，直接ping主机</p> 
<p><img src="https://images2.imgbox.com/e3/ba/nlvfhpfD_o.png" alt="在这里插入图片描述"></p> 
<p>欸嘿，查询的结果一下就出来了。</p> 
<h4><a id="32__80"></a>3.2 扫描目标主机</h4> 
<p>现在我们可以确定我们的目标主机就是192.168.254.129，那么现在我们就可以加参数 -sV 扫描特定的主机，并获取它所开放的服务和端口，同时尝试确定它所开启的服务的版本号</p> 
<p><code>nmap -sV 192.168.254.129 </code>#扫描192.168.254.129端口信息和服务版本号</p> 
<p><img src="https://images2.imgbox.com/44/46/VKPFZkgg_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到我们的扫描非常的成功，黄色方框部分是是目标主机的操作系统和主机名，而红色方框部分就是我们本次扫描重点了！</p> 
<h4><a id="33__91"></a>3.3 查找漏洞使用方法（可跳过）</h4> 
<p>我们可以看到我们成功扫描出了目标主机所开启服务的版本号，有了版本号那就好办了，在这里我教大家两种比较有代表性的方法，以ftp服务为例，我们可以看到，根据Nmap的说法，vsftpd 2.3.4正在这台主机上运行。</p> 
<p>方法一：我们可以直接去ExploitDB（网址在这：<a href="https://www.exploit-db.com/" rel="nofollow"><span class="underline">https://www.exploit-db.com/</span></a>)去搜索这个vsftpd2.3.4版本的漏洞和利用方法，在弹出的结果中，选择自己需要的方法进行利用就可以了。</p> 
<p><img src="https://images2.imgbox.com/56/81/XouQ9lbJ_o.png" alt="在这里插入图片描述"></p> 
<p>但是这种方法虽热搜索出来的比较全面，但是毕竟是要转用外部浏览器，稍微有点麻烦，所以咱们也可以选择偷懒一点，直接使用使用kali系统自带的searchsploit漏洞查找工具。</p> 
<p>方法二：来到我们的工具菜单栏，找到searchsploit，点击运行</p> 
<p><img src="https://images2.imgbox.com/c5/35/JMThQ3BR_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f0/e1/wWhy3rA4_o.png" alt="在这里插入图片描述"></p> 
<p>按照searchsploit工具的提示，我们可以可以直接输入searchsploit &lt;关键词&gt; 进行漏洞的搜索</p> 
<p><code>searchsploit vsftpd 2.3.4</code> #查找有关vsftpd 2.3.4版本的漏洞</p> 
<p><img src="https://images2.imgbox.com/87/36/mn23hnl9_o.png" alt="在这里插入图片描述"></p> 
<p>返回两个结果，我们可以根据右边的路径，利用less查看这些漏洞的利用方法</p> 
<p><code>less /usr/share/exploitdb/exploits/unix/remote/49757.py</code> #查看有关vsftpd2.3.4的漏洞利用方法</p> 
<p><img src="https://images2.imgbox.com/91/4c/d1VoL8Fg_o.png" alt="在这里插入图片描述"></p> 
<p>一目了然，非常的方便！</p> 
<h4><a id="34__127"></a>3.4 端口扫描</h4> 
<p>继续回到我们的Nmap，我们可以使用Nmap加 -p 参数加 -sC 参数对指定端口运行Nmap默认脚本。</p> 
<p><code>Nmap -sC 192.168.254.129 -p 21</code>#对ip为192.168.254.129的主机的21端口运行Nmap默认脚本</p> 
<p><img src="https://images2.imgbox.com/9b/02/K2xhr8Nd_o.png" alt="在这里插入图片描述"><br> 通过返回的结果，我们可以很明显的看到这台主机的ftp服务是允许匿名登陆的，看到这里，这就已经可以给我们无限的想象空间了。所以，这就应该引起管理员的重视了。</p> 
<h4><a id="35__136"></a>3.5 利用脚本检查漏洞</h4> 
<p>上面由于是使用默认脚本进行的扫描，互联网千变万化，为了进一步扫描，我们可以查找一下Nmap有没有对应服务的扫描脚本</p> 
<p><code>locate .nse | grep ftp </code>#查找有关ftp的脚本</p> 
<p><img src="https://images2.imgbox.com/da/09/Sg8dEf8O_o.png" alt="在这里插入图片描述"></p> 
<p>有！让我们来看看这个脚本这个脚本能为我们干些什么，我们可以继续通过less查看对应文件的描述</p> 
<p><code>less /usr/share/nmap/scripts/ftp-vsftpd-backdoor.nse</code> #查看对应文件</p> 
<p><img src="https://images2.imgbox.com/5d/ed/YHPIpeIz_o.png" alt="在这里插入图片描述"></p> 
<p>通过描述我们可以看到，很明显，这个脚本可以用来试图查看这个特定的机器是否容易受到先前识别的 ExploitDB 问题的影响，而注意该脚本下面的内容，正是我们之前在3.3章节提到的漏洞使用方法！</p> 
<p>那么现在脚本已经找到，也知道了它的使用原理和内容了，我们现在就可以开始尝试对目标主机使用这个脚本了</p> 
<p><code>nmap --script=ftp-vsftpd-backdoor.nse 192.168.254.129 -p 21</code>#对ip地址为192.168.254.129的主机的21端口执行指定脚本</p> 
<p><img src="https://images2.imgbox.com/ae/49/7hDiuWis_o.png" alt="在这里插入图片描述"></p> 
<p>nice！Nmap返回的报告中告诉了我们非常多的信息，比如红框中提示的，vsftpd 2.3.4版本后门状态是非常脆弱的，还有后续内容包括，漏洞被发现的日期，使用方法，后果等，非常的详细，安全人员就可以根据这一份报告进行维护，同样的，那些不怀好意的人自然也将可以跟着这一份报告进行渗透。这值得我们引起必要的关注。</p> 
<h3><a id="4__164"></a>4 后话</h3> 
<p>还是那句老话：kali学得好，牢饭少不了。不得不说Nmap确实是一个非常不错的漏洞扫描工具，它便携，它使用方便，它灵活，它功能全面，它具有极高的选择性，非常平稳。 到目前为止已经做的大多数扫描， nmap 的网络流量都保持适度平稳。但是就如同我上一章所说，这个工具既然可以帮助安全从业人员完善自己的服务，同样的也能帮助到那些不怀好意的人。工具是无罪的，好与坏取决于使用它的人，此片文章仅作学习交流之用，欢迎各位看官留言或私信交流，但切记学习之余，慎用！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/afd992c1fde9e82e6b9edef50260daa6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">汽车产业与技术链分析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/53ac81b6ecd7e41efb799967391477f6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android免Root执行脚本，无Root可以修改权限的目录 :/data/local/tmp</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>