<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>文件服务器存储解决方案探索 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="文件服务器存储解决方案探索" />
<meta property="og:description" content="1 定义 文件服务器(file servers)是一种器件，它的功能就是向服务器提供文件。
它加强了存储器的功能，简化了网络数据的管理。
它一则改善了系统的性能，提高了数据的可用性，二则减少了管理的复杂程度，降低了运营费用。
2 简介 在C/S模式下，文件服务器（file server）是一台对中央存储和数据文件管理负责的计算机，这样在同一网络中的其他计算机就可以访问这些文件.
文件服务器允许用户在网络上共享信息，而不用通过软盘或一些其它外部存储设备来物理地移动文件;
任何计算机都能被设置为主机，并作为文件服务器（file server）运行
最简单的形式是，文件服务器可以是一台普通的个人计算机，它处理文件要求并在网络中发送它们;
在更复杂的网络中，文件服务器也可以是一台专门的网络附加存储（NAS）设备，它也可以作为其他计算机的远程硬盘驱动器来运行，并允许网络中的人像在他们自己的硬盘中一样在服务器中存储文件.
文件服务器具有分时系统文件管理的全部功能，提供网络用户访问文件、目录的并发控制和安全保密措施的局域网（LAN）服务器.
3 常见开源服务器 3.1 EasyFS 支持缩略图，支持单选、多选，下载支持中文名，不依赖其它容器，可独立部署，使用Java语言、SpringBoot框架开发.
3.2 FastDFS 是一个开源的分布式文件系统，对文件进行管理
功能 文件存储、文件同步、文件访问（文件上传、文件下载）等，解决了大容量存储和负载均衡的问题.
特别适合以文件为载体的在线服务，如相册网站、视频网站等等.
主要是针对互联网中的小文件系统，没有文件索引数据库，整体性能很高 原理 3.3 HDFS 简介 优点 高可靠性。Hadoop按位存储和处理数据的能力值得人们信赖。
高扩展性。Hadoop是在可用的计算机集簇间分配数据并完成计算任务的，这些集簇可以方便地扩展到数以千计的节点中。
高效性。Hadoop能够在节点之间动态地移动数据，并保证各个节点的动态平衡，因此处理速度非常快。
高容错性。Hadoop能够自动保存数据的多个副本，并且能够自动将失败的任务重新分配。
低成本。与一体机、商用数据仓库以及QlikView、Yonghong Z-Suite等数据集市相比，hadoop是开源的，项目的软件成本因此会大大降低。
Hadoop带有用Java语言编写的框架，因此运行在 Linux生产平台上是非常理想的。Hadoop上的应用程序也可以使用其他语言编写，比如 C&#43;&#43;。
Hadoop是目前最流行的的分布式文件系统之一，能找到的资料相当丰富。
从使用的角度说，Hadoop的使用和使用FTP有点类似
3.4 TFS 淘宝使用的文件系统，用于图片存储，在小文件存储上比较有优势，但随着写的增加，读文件的效率会降低.
TFS（Taobao FileSystem）是一个高可扩展、高可用、高性能、面向互联网服务的分布式文件系统，主要针对海量的非结构化数据，它构筑在普通的Linux机器集群上，可为外部提供高可靠和高并发的存储访问.
TFS为淘宝提供海量小文件存储，通常文件大小不超过1M，满足了淘宝对小文件存储的需求，被广泛地应用在淘宝各项应用中。它采用了HA架构和平滑扩容，保证了整个文件系统的可用性和扩展性。同时扁平化的数据组织结构，可将文件名映射到文件的物理地址，简化了文件的访问流程，一定程度上为TFS提供了良好的读写性能。
总体结构 一个TFS集群由两个NameServer节点（一主一备）和多个DataServer节点组成。这些服务程序都是作为一个用户级的程序运行在普通Linux机器上的。
在TFS中，将大量的小文件(实际数据文件)合并成为一个大文件，这个大文件称为块(Block), 每个Block拥有在集群内唯一的编号(Block Id), Block Id在NameServer在创建Block的时候分配, NameServer维护block与DataServer的关系。Block中的实际数据都存储在DataServer上。而一台DataServer服务器一般会有多个独立DataServer进程存在，每个进程负责管理一个挂载点，这个挂载点一般是一个独立磁盘上的文件目录，以降低单个磁盘损坏带来的影响。
NameServer主要功能是: 管理维护Block和DataServer相关信息,包括DataServer加入，退出, 心跳信息, block和DataServer的对应关系建立，解除。正常情况下，一个块会在DataServer上存在， 主NameServer负责Block的创建，删除，复制，均衡，整理，NameServer不负责实际数据的读写，实际数据的读写由DataServer完成。
DataServer主要功能是: 负责实际数据的存储和读写。
同时为了考虑容灾，NameServer采用了HA结构，即两台机器互为热备，同时运行，一台为主，一台为备，主机绑定到对外vip，提供服务；当主机器宕机后，迅速将vip绑定至备份NameServer，将其切换为主机，对外提供服务。图中的HeartAgent就完成了此功能" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4ad9f3b6996c7218dc511124664b4186/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-02-25T21:49:54+08:00" />
<meta property="article:modified_time" content="2019-02-25T21:49:54+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">文件服务器存储解决方案探索</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1__0"></a>1 定义</h2> 
<p>文件服务器(file servers)是一种器件，它的功能就是向服务器提供文件。<br> 它加强了存储器的功能，简化了网络数据的管理。<br> 它一则改善了系统的性能，提高了数据的可用性，二则减少了管理的复杂程度，降低了运营费用。</p> 
<h2><a id="2__5"></a>2 简介</h2> 
<p>在C/S模式下，文件服务器（file server）是一台对<code>中央存储和数据文件管理</code>负责的计算机，这样在同一网络中的其他计算机就可以访问这些文件.<br> 文件服务器允许用户在网络上共享信息，而不用通过软盘或一些其它外部存储设备来物理地移动文件;<br> <code>任何计算机都能被设置为主机，并作为文件服务器（file server）运行</code><br> 最简单的形式是，文件服务器可以是一台普通的个人计算机，它处理文件要求并在网络中发送它们;<br> 在更复杂的网络中，文件服务器也可以是一台专门的网络附加存储（NAS）设备，它也可以作为其他计算机的远程硬盘驱动器来运行，并允许网络中的人像在他们自己的硬盘中一样在服务器中存储文件.<br> 文件服务器具有分时系统文件管理的全部功能，提供网络用户访问文件、目录的并发控制和安全保密措施的局域网（LAN）服务器.</p> 
<h2><a id="3__13"></a>3 常见开源服务器</h2> 
<h3><a id="31__EasyFShttpsgiteecomwhvseeasyfs_14"></a>3.1 <a href="https://gitee.com/whvse/easy-fs" rel="nofollow">EasyFS</a></h3> 
<p>支持缩略图，支持单选、多选，下载支持中文名，不依赖其它容器，可独立部署，使用Java语言、SpringBoot框架开发.</p> 
<h3><a id="32_FastDFShttpswwwoschinanetpfastdfs_17"></a>3.2 <a href="https://www.oschina.net/p/fastdfs" rel="nofollow">FastDFS</a></h3> 
<p>是一个开源的分布式文件系统，对文件进行管理</p> 
<h4><a id="_19"></a>功能</h4> 
<p>文件存储、文件同步、文件访问（文件上传、文件下载）等，解决了大容量存储和负载均衡的问题.<br> 特别适合以文件为载体的在线服务，如相册网站、视频网站等等.</p> 
<h4><a id="_23"></a>主要是针对互联网中的小文件系统，没有文件索引数据库，整体性能很高</h4> 
<h3><a id="httpos51ctocomart201205335144htm_25"></a><a href="http://os.51cto.com/art/201205/335144.htm" rel="nofollow">原理</a></h3> 
<h3><a id="33_HDFShttpshadoopapacheorgdocsr104cnhdfs_designhtml_27"></a>3.3 <a href="https://hadoop.apache.org/docs/r1.0.4/cn/hdfs_design.html" rel="nofollow">HDFS</a></h3> 
<h4><a id="httpos51ctocomart201208355082htm_28"></a><a href="http://os.51cto.com/art/201208/355082.htm" rel="nofollow">简介</a></h4> 
<h4><a id="_29"></a>优点</h4> 
<p>高可靠性。Hadoop按位存储和处理数据的能力值得人们信赖。</p> 
<p>高扩展性。Hadoop是在可用的计算机集簇间分配数据并完成计算任务的，这些集簇可以方便地扩展到数以千计的节点中。</p> 
<p>高效性。Hadoop能够在节点之间动态地移动数据，并保证各个节点的动态平衡，因此处理速度非常快。</p> 
<p>高容错性。Hadoop能够自动保存数据的多个副本，并且能够自动将失败的任务重新分配。</p> 
<p>低成本。与一体机、商用数据仓库以及QlikView、Yonghong Z-Suite等数据集市相比，hadoop是开源的，项目的软件成本因此会大大降低。</p> 
<p>Hadoop带有用Java语言编写的框架，因此运行在 Linux生产平台上是非常理想的。Hadoop上的应用程序也可以使用其他语言编写，比如 C++。</p> 
<p>Hadoop是目前最流行的的分布式文件系统之一，能找到的资料相当丰富。</p> 
<p>从使用的角度说，Hadoop的使用和使用FTP有点类似</p> 
<h3><a id="34_TFShttpsgithubcomalibabatfs_46"></a>3.4 <a href="https://github.com/alibaba/tfs">TFS</a></h3> 
<p>淘宝使用的文件系统，用于图片存储，在小文件存储上比较有优势，但随着写的增加，读文件的效率会降低.</p> 
<p>TFS（Taobao FileSystem）是一个高可扩展、高可用、高性能、面向互联网服务的分布式文件系统，主要针对海量的非结构化数据，它构筑在普通的Linux机器集群上，可为外部提供高可靠和高并发的存储访问.</p> 
<p>TFS为淘宝提供海量小文件存储，通常文件大小不超过1M，满足了淘宝对小文件存储的需求，被广泛地应用在淘宝各项应用中。它采用了HA架构和平滑扩容，保证了整个文件系统的可用性和扩展性。同时扁平化的数据组织结构，可将文件名映射到文件的物理地址，简化了文件的访问流程，一定程度上为TFS提供了良好的读写性能。</p> 
<h4><a id="_53"></a>总体结构</h4> 
<p>一个TFS集群由两个NameServer节点（一主一备）和多个DataServer节点组成。这些服务程序都是作为一个用户级的程序运行在普通Linux机器上的。<br> 在TFS中，将大量的小文件(实际数据文件)合并成为一个大文件，这个大文件称为块(Block), 每个Block拥有在集群内唯一的编号(Block Id), Block Id在NameServer在创建Block的时候分配, NameServer维护block与DataServer的关系。Block中的实际数据都存储在DataServer上。而一台DataServer服务器一般会有多个独立DataServer进程存在，每个进程负责管理一个挂载点，这个挂载点一般是一个独立磁盘上的文件目录，以降低单个磁盘损坏带来的影响。<br> NameServer主要功能是: 管理维护Block和DataServer相关信息,包括DataServer加入，退出, 心跳信息, block和DataServer的对应关系建立，解除。正常情况下，一个块会在DataServer上存在， 主NameServer负责Block的创建，删除，复制，均衡，整理，NameServer不负责实际数据的读写，实际数据的读写由DataServer完成。<br> DataServer主要功能是: 负责实际数据的存储和读写。<br> 同时为了考虑容灾，NameServer采用了HA结构，即两台机器互为热备，同时运行，一台为主，一台为备，主机绑定到对外vip，提供服务；当主机器宕机后，迅速将vip绑定至备份NameServer，将其切换为主机，对外提供服务。图中的HeartAgent就完成了此功能<br> <img src="https://images2.imgbox.com/3e/31/VGDHTGoU_o.png" alt=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/69d8cafc453686259028e0903cef95a2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">struts2文件上传大小限制问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6f0d55e6cc91ecbd502f2369bfc4c08/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Mockito框架@Mock, @InjectMocks注解使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>