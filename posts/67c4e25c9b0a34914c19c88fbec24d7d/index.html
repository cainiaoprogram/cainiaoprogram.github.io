<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>新版IDEA中Git的使用（三） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="新版IDEA中Git的使用（三）" />
<meta property="og:description" content="说明：前面介绍了在新版IDEA中Git的基本操作、分支操作，本文介绍一下在新版IDEA中，如何回滚代码；
分以下三个阶段来介绍：
未Commit的文件；
已经Commit，但未push的文件；
已经push的文件；
未Commit 对于未Commit的文件，回滚代码，可以在Commit窗口，选中文件，鼠标右键，选择Rollback，即可回滚代码，恢复到未修改状态；
弹出窗口，选择Rollback
文件恢复到未修改状态的黑色；
而对于新增的文件，直接在Commit界面里删掉即可，当然，也可以选中，点Rollback，但文件会加入到未追踪状态，还是会出现在IDEA中，就不如直接删除掉。
未push 比如，我新增了一个文件、修改了一个文件，提交了，但是还没有push到远程仓库（可以看到分支名后面有箭头），此时我想回滚这次提交；
可以选择这次提交前面的提交，鼠标右键，点击Reset Current Branch to Here，表示将代码回滚到这次提交的状态；
点击后，会出现下面几种模式，选择如何处理回退的文件；
Soft：修改的文件、新增的文件都恢复到暂存区；
Mixed（默认）：修改的文件加入到暂存区，新增的文件恢复到未追踪；
Hard：修改的文件、新增的文件都丢失，并且当前分支未commit的文件也恢复（新增的删掉，修改的恢复原样）；
Keep：修改的文件、新增的文件都丢失，当前分支未commit的文件，新增的文件恢复到未追踪，修改的文件保持原样；
可以根据自己的需要进行选择，选择前想清楚，回退的这部分代码是怎么来的：
如果是push的，那么应该选择Soft、Mixed，避免回退后代码丢失；
如果是pull的，那么应该选择Hard、Keep，避免多出来的代码，影响自己分支；
回滚未push的代码，除此之外，还有以下几种：
Undo Commit…：回滚最近一次提交；
Revert Commit：回滚某一次提交，并留下回滚记录；
Drop Commit：回滚某一次提交，并不留下回滚记录；
以上操作，均是单次操作的回滚，即仅回滚此次操作的文件，例如A提交创建了文件，B提交修改了文件，如果回滚A提交，B提交中修改的文件就不存在了，就会发生冲突。
已push 例如现在，我将新增的代码，add.txt文件push到远程仓库。push上去后发现这段代码有问题，或者我想修改一下comment内容；
可以这么做，首先回滚本地的提交；
修改代码或者修改Comment信息后，再push
这次选择Push下面的这个操作，Force Push；
选择Force Push
远程仓库的代码就被本次push冲掉了；
已经push的提交不推荐使用回滚，建议修改代码、文件后重新push一次。如果该分支有其他同事在push代码，上面这种方法可能会冲掉同事push的代码，有风险。
总结 本文介绍在新版IDEA中Git关于回滚的操作，参考B站UP主【小陈努力码代码】的视频 IDEA小技巧-Git的回滚&amp;&amp;强推&amp;&amp;代码找回" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/67c4e25c9b0a34914c19c88fbec24d7d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-25T11:18:40+08:00" />
<meta property="article:modified_time" content="2023-12-25T11:18:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">新版IDEA中Git的使用（三）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>说明：前面介绍了在新版IDEA中Git的<a href="https://blog.csdn.net/qq_42108331/article/details/135175966?spm=1001.2014.3001.5501">基本操作</a>、<a href="https://blog.csdn.net/qq_42108331/article/details/135182484">分支操作</a>，本文介绍一下在新版IDEA中，如何回滚代码；</p> 
<p>分以下三个阶段来介绍：</p> 
<ul><li> <p>未Commit的文件；</p> </li><li> <p>已经Commit，但未push的文件；</p> </li><li> <p>已经push的文件；</p> </li></ul> 
<h3><a id="Commit_10"></a>未Commit</h3> 
<p>对于未Commit的文件，回滚代码，可以在Commit窗口，选中文件，鼠标右键，选择<code>Rollback</code>，即可回滚代码，恢复到未修改状态；</p> 
<p><img src="https://images2.imgbox.com/c2/49/m8VxnWis_o.png" alt="在这里插入图片描述"></p> 
<p>弹出窗口，选择<code>Rollback</code></p> 
<p><img src="https://images2.imgbox.com/d6/27/gAwCvZqI_o.png" alt="在这里插入图片描述"></p> 
<p>文件恢复到未修改状态的黑色；</p> 
<p><img src="https://images2.imgbox.com/36/e5/FZqZd32V_o.png" alt="在这里插入图片描述"></p> 
<p>而对于<mark>新增的文件</mark>，直接在Commit界面里删掉即可，当然，也可以选中，<mark>点<code>Rollback</code></mark>，但文件<mark>会加入到未追踪状态</mark>，还是会出现在IDEA中，就不如直接删除掉。</p> 
<p><img src="https://images2.imgbox.com/49/c7/d0sKscxK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="push_28"></a>未push</h3> 
<p>比如，我新增了一个文件、修改了一个文件，提交了，但是还没有push到远程仓库（可以看到分支名后面有箭头），此时我想回滚这次提交；</p> 
<p><img src="https://images2.imgbox.com/21/16/pniCNl4N_o.png" alt="在这里插入图片描述"></p> 
<p>可以<mark>选择这次提交前面的提交</mark>，鼠标右键，点击<code>Reset Current Branch to Here</code>，表示将代码回滚到这次提交的状态；</p> 
<p><img src="https://images2.imgbox.com/55/15/TSCqi80N_o.png" alt="在这里插入图片描述"></p> 
<p>点击后，会出现下面几种模式，选择如何处理回退的文件；</p> 
<p><img src="https://images2.imgbox.com/b1/de/lzQQ43Dd_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>Soft：修改的文件、新增的文件都恢复到暂存区；</p> </li><li> <p>Mixed（默认）：修改的文件加入到暂存区，新增的文件恢复到未追踪；</p> </li><li> <p>Hard：修改的文件、新增的文件都丢失，并且当前分支未commit的文件也恢复（新增的删掉，修改的恢复原样）；</p> </li><li> <p>Keep：修改的文件、新增的文件都丢失，当前分支未commit的文件，新增的文件恢复到未追踪，修改的文件保持原样；</p> </li></ul> 
<p>可以根据自己的需要进行选择，选择前想清楚，回退的这部分代码是怎么来的：</p> 
<ul><li> <p>如果是push的，那么应该选择Soft、Mixed，避免回退后代码丢失；</p> </li><li> <p>如果是pull的，那么应该选择Hard、Keep，避免多出来的代码，影响自己分支；</p> </li></ul> 
<hr> 
<p>回滚未push的代码，除此之外，还有以下几种：</p> 
<p><img src="https://images2.imgbox.com/b5/bb/U24J5BE0_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>Undo Commit…：回滚最近一次提交；</p> </li><li> <p>Revert Commit：回滚某一次提交，并留下回滚记录；</p> </li><li> <p>Drop Commit：回滚某一次提交，并不留下回滚记录；</p> </li></ul> 
<p>以上操作，均是单次操作的回滚，即仅回滚此次操作的文件，例如A提交创建了文件，B提交修改了文件，如果回滚A提交，B提交中修改的文件就不存在了，就会发生冲突。</p> 
<h3><a id="push_78"></a>已push</h3> 
<p>例如现在，我将新增的代码，add.txt文件push到远程仓库。push上去后发现这段代码有问题，或者我想修改一下comment内容；</p> 
<p><img src="https://images2.imgbox.com/53/f9/t4jdRw5n_o.png" alt="在这里插入图片描述"></p> 
<p>可以这么做，首先回滚本地的提交；</p> 
<p><img src="https://images2.imgbox.com/f4/09/f8Gm92K2_o.png" alt="在这里插入图片描述"></p> 
<p>修改代码或者修改Comment信息后，再push</p> 
<p><img src="https://images2.imgbox.com/0d/3e/ladJKRqc_o.png" alt="在这里插入图片描述"></p> 
<p>这次选择Push下面的这个操作，<code>Force Push</code>；</p> 
<p><img src="https://images2.imgbox.com/05/32/3zAaquyh_o.png" alt="在这里插入图片描述"></p> 
<p>选择<code>Force Push</code></p> 
<p><img src="https://images2.imgbox.com/0d/7c/Z8ZvE3Ui_o.png" alt="在这里插入图片描述"></p> 
<p>远程仓库的代码就被本次push冲掉了；</p> 
<p><img src="https://images2.imgbox.com/ca/5c/SJOTFt3y_o.png" alt="在这里插入图片描述"></p> 
<p>已经push的提交不推荐使用回滚，建议修改代码、文件后重新push一次。如果该分支有其他同事在push代码，上面这种方法可能会冲掉同事push的代码，有风险。</p> 
<h3><a id="_107"></a>总结</h3> 
<p>本文介绍在新版IDEA中Git关于回滚的操作，参考B站UP主<a href="https://space.bilibili.com/13673106" rel="nofollow">【小陈努力码代码】</a>的视频 <a href="https://www.bilibili.com/video/BV1Wa411a7Ek/?spm_id_from=333.1007.top_right_bar_window_history.content.click&amp;vd_source=23aeedb785ea62561a096a6f3906feb2" rel="nofollow">IDEA小技巧-Git的回滚&amp;&amp;强推&amp;&amp;代码找回</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/da89534337343ab82e9b7894d94cd8b5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">思科模拟器(SDN控制器使用教程二)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7db3122ef47b2a20416c01ce40034f35/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python风格规范之do not compare types, for exact checks use `is` / `is not`, for instance chec</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>