<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MyBatisPuls中注解开发一对多和多对多开发 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MyBatisPuls中注解开发一对多和多对多开发" />
<meta property="og:description" content="在使用MyBatisPlus的时候，相信很多小伙伴也很不喜欢一大堆的配置文件，看起来眼花缭乱的，一点的不舒服，而且巧了，我也是不喜欢配置文件的编程。如果你是学习使用MyBatis，我不建议你使用MyBatisPlus的自动封装的操作，虽然很方便，但是会让人变的懒惰，从而对SQL的陌生成度也会大大增加，彻底的变为工具人。学习，就是在不断的踩坑，然后再不断的填坑，让及非常的抗揍，这才是学习的乐趣与意义。
扯远了，接下来我们看一下注解式开发中一对一的情况：
one=@One(select(&#34;namespace&#34;))，这句的意思是一对多或者一对一（MyBatis官方将其称作一对一），它的大概意思就是一个对象中的属性或者JavaBean对应其他多个对象，如下
@NoArgsConstructor @Data @ToString @TableName(&#34;t_bolg&#34;) public class Bolg implements Serializable { @TableId(&#34;id&#34;) private Long id;//id private String title;//标题 private String content;//内容 private String firstPicture;//首图 private String classType;//分类 private Integer views;//浏览次数 private String appreciation;//赞赏开启 private String shareInfo;//分享 private String commentable;//评论开启 private String published;//发布或者保存 private String recommend;//是否推荐 private String createDateTime;//发布时间 private String updateDateTime;//更新时间 private String username;//用户名 private String original;//是否原创 private String tTagList;//博客标签 @TableField(exist = false) private List&lt;String&gt; tagList;//获得所有标签 @TableField(exist = false) private List&lt;String&gt; typeList;//获得所有分类 @TableField(exist = false) private Admin admin;//管理员 @TableField(exist = false) private List&lt;Comment&gt; commentList; } 这是一个实体类，对应数据库中的一个表，其中@TableField(exist = false)表示这个属性不是数据库字段，我们看一下具体的操作" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5093e5b9f8832e8290723e4e9e94dc73/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-09T23:00:26+08:00" />
<meta property="article:modified_time" content="2022-05-09T23:00:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MyBatisPuls中注解开发一对多和多对多开发</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在使用MyBatisPlus的时候，相信很多小伙伴也很不喜欢一大堆的配置文件，看起来眼花缭乱的，一点的不舒服，而且巧了，我也是不喜欢配置文件的编程。如果你是学习使用MyBatis，我不建议你使用MyBatisPlus的自动封装的操作，虽然很方便，但是会让人变的懒惰，从而对SQL的陌生成度也会大大增加，彻底的变为工具人。学习，就是在不断的踩坑，然后再不断的填坑，让及非常的抗揍，这才是学习的乐趣与意义。<br> 扯远了，接下来我们看一下注解式开发中一对一的情况：<br> <code>one=@One(select("namespace"))</code>，这句的意思是一对多或者一对一（MyBatis官方将其称作一对一），它的大概意思就是一个对象中的属性或者JavaBean对应其他多个对象，如下</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@NoArgsConstructor</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@ToString</span>
<span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"t_bolg"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bolg</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span><span class="token comment">//id</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span><span class="token comment">//标题</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//内容</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> firstPicture<span class="token punctuation">;</span><span class="token comment">//首图</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> classType<span class="token punctuation">;</span><span class="token comment">//分类</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> views<span class="token punctuation">;</span><span class="token comment">//浏览次数</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> appreciation<span class="token punctuation">;</span><span class="token comment">//赞赏开启</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> shareInfo<span class="token punctuation">;</span><span class="token comment">//分享</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> commentable<span class="token punctuation">;</span><span class="token comment">//评论开启</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> published<span class="token punctuation">;</span><span class="token comment">//发布或者保存</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> recommend<span class="token punctuation">;</span><span class="token comment">//是否推荐</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> createDateTime<span class="token punctuation">;</span><span class="token comment">//发布时间</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> updateDateTime<span class="token punctuation">;</span><span class="token comment">//更新时间</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span><span class="token comment">//用户名</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> original<span class="token punctuation">;</span><span class="token comment">//是否原创</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tTagList<span class="token punctuation">;</span><span class="token comment">//博客标签</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tagList<span class="token punctuation">;</span><span class="token comment">//获得所有标签</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> typeList<span class="token punctuation">;</span><span class="token comment">//获得所有分类</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Admin</span> admin<span class="token punctuation">;</span><span class="token comment">//管理员</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Comment</span><span class="token punctuation">&gt;</span></span> commentList<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>这是一个实体类，对应数据库中的一个表，其中@TableField(exist = false)表示这个属性不是数据库字段，我们看一下具体的操作</p> 
<pre><code class="prism language-sql"><span class="token variable">@Select</span><span class="token punctuation">(</span><span class="token string">"select id,title,content,first_picture,username,class_type from t_bolg where id = #{id}"</span><span class="token punctuation">)</span>
    <span class="token variable">@Results</span><span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">=</span> {
<span class="token comment">//            这里的colum可以传上面结果不需要的值，否则下面的值为空，必要的值不用传入，否则上面结果传入的值需要定义</span>
            <span class="token variable">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"tagList"</span><span class="token punctuation">,</span><span class="token keyword">column</span> <span class="token operator">=</span> <span class="token string">"username"</span><span class="token punctuation">,</span>one <span class="token operator">=</span> <span class="token variable">@One</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">=</span> <span class="token string">"cn.edu.gues.mapper.AdminBolgMapper.selectTagList"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token variable">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"typeList"</span><span class="token punctuation">,</span><span class="token keyword">column</span> <span class="token operator">=</span> <span class="token string">"class_type"</span><span class="token punctuation">,</span>one <span class="token operator">=</span> <span class="token variable">@One</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">=</span> <span class="token string">"cn.edu.gues.mapper.AdminBolgMapper.selectTypeList"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    }<span class="token punctuation">)</span>
    TagBolg selectByIdBolg<span class="token punctuation">(</span>Long id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from t_type"</span><span class="token punctuation">)</span>
    List<span class="token operator">&lt;</span><span class="token keyword">Type</span><span class="token operator">&gt;</span> selectTypeList<span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from t_tag"</span><span class="token punctuation">)</span>
    List<span class="token operator">&lt;</span>Tag<span class="token operator">&gt;</span> selectTagList<span class="token punctuation">(</span>String id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>最上面的select是总的查询语句，也就是selectByIdBolg(Long id)的最后结果，<code>@Results</code>的意思是对上面的select结果进行处理，对于字段和属性一致的我们不需要指定，MyBatis会自动帮我们完成，我们需要关心的就是就<code>@Results</code>里面的语句（这里讲一下一个小坑，看下图）<br> <img src="https://images2.imgbox.com/50/7c/L9K28Wqh_o.png" alt="在这里插入图片描述"><br> 上面的username其实是我不需要，但是有要作为参数传进去做的一个演示，比如我们需要的是id，那就将上面的username改为id传递进去即可，再看一下数据库中对应的两个表（这里使用的是lombok，就不介绍了）<br> Type类</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"t_type"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Type</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@TableId</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@TableField</span><span class="token punctuation">(</span>exist <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> size<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>Tag类</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@TableName</span><span class="token punctuation">(</span><span class="token string">"t_tag"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tag</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> tType<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>看一下运行的结果，由于数据过多，我们使用两张进行观看<br> <img src="https://images2.imgbox.com/1c/f0/YWl9TEeJ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d1/e5/RTYwKd1y_o.png" alt="在这里插入图片描述"><br> 这里得到的结果和我们预想的一样，但是这样的SQL语句并没有优化，会导致性能下降，可以使用条件和需要的字段进行删选即可<br> 接下来我们看一下多对多的情况，其实和上面的差不多many=@Many(select(namespace)),这就是多对多的语句，其实jpa就比较操作这些，但是jpa可能会让一个人变懒，不爱探究。</p> 
<pre><code class="prism language-java"> <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select id,substr(content,1,300) as content,title,update_date_time,views,type,first_picture,username from t_tag where class_type=#{type} limit #{page},#{size}"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">"typeList"</span><span class="token punctuation">,</span>column <span class="token operator">=</span> <span class="token string">"type"</span><span class="token punctuation">,</span> many <span class="token operator">=</span> <span class="token annotation punctuation">@Many</span><span class="token punctuation">(</span>select <span class="token operator">=</span> <span class="token string">"cn.edu.gues.mapper.AdminBolgMapper.queryBolg"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token class-name">Integer</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">"select * from t_bolg where type = #{type}"</span><span class="token punctuation">)</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Type</span><span class="token punctuation">&gt;</span></span><span class="token function">queryType</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>上面的 语句就是一个集合对应另一个集合，也就是我们说的多对多的情况，由于这里没有数据，就不进行演示了，最上面的@Select是查询博客的信息，但是一个博客可能有多个分类，我们查询出的博客可能又很多，每个分类又对应多个标签，这就是多对多的应用。其中result就是我们要操作的属性，其中和我们分别查询出的数据进行整理是一个意思的，刚开始用的时候，可能理解不了，但是使用多了就掌握了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/04b321c4a72e87b16cd711299f6a4f53/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何缩小png图片大小kb?如何让png图片变小?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fe617620f6465efe0b3eedc1561b8cd8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">OpenCV入门（十）——图像分割技术</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>