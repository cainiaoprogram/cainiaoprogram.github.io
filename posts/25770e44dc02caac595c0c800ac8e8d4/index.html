<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java ocr引擎_java 实现 OCR 图片文字识别 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="java ocr引擎_java 实现 OCR 图片文字识别" />
<meta property="og:description" content="OCR图像识别技术的JAVA实现
最近有个需求需要用图像识别，学习记录一下。
目前网络上的开源的图像识别技术有很多，例如 OCRE(OCR Easy)、Clara OCR、OCRAD、TESSERACT-OCR 等。
今天本blog将记录下tesseract-ocr的JAVA实现，便于以后查阅使用。
开源 ocr 引擎
我们本次直接以排名第一的 TESSERACT-OCR 作为例子。
TESSERACT-OCR 安装
本次测试的环境为 windows10，所以下载 windows 相关的安装包。
windows 下载地址
安装
安装完毕后，目录下：
直接双击 exe，然后安装。
指定安装特定语言包
这里我们安装一下中文的语言训练包。
【chinese】相关的四个，简体，繁体(分别对应的默认和垂直。)
比较悲催的是全部下载失败。
安装路径
使用默认路径：
C:\Program Files (x86)\Tesseract-OCR
结果
λ ls
ambiguous_words.exe* libcairo-2.dll* libgomp-1.dll* libpangocairo-1.0-0.dll* libwebp-7.dll* tesseract.exe*
classifier_tester.exe* libexpat-1.dll* libharfbuzz-0.dll* libpangoft2-1.0-0.dll* libwinpthread-1.dll* tesseract-uninstall.exe*
cntraining.exe* libffi-6.dll* libintl-8.dll* libpangowin32-1.0-0.dll* lstmeval.exe* text2image.exe*
combine_lang_model.exe* libfontconfig-1.dll* libjbig-2.dll* libpcre-1.dll* lstmtraining.exe* unicharset_extractor.exe*
combine_tessdata.exe* libfreetype-6.dll* libjpeg-8.dll* libpixman-1-0.dll* merge_unicharsets.exe* wordlist2dawg.exe*
dawg2wordlist.exe* libgcc_s_seh-1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/25770e44dc02caac595c0c800ac8e8d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-24T06:58:00+08:00" />
<meta property="article:modified_time" content="2021-02-24T06:58:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java ocr引擎_java 实现 OCR 图片文字识别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>OCR图像识别技术的JAVA实现</p> 
 <p>最近有个需求需要用图像识别，学习记录一下。</p> 
 <p>目前网络上的开源的图像识别技术有很多，例如 OCRE(OCR Easy)、Clara OCR、OCRAD、TESSERACT-OCR 等。</p> 
 <p>今天本blog将记录下tesseract-ocr的JAVA实现，便于以后查阅使用。</p> 
 <p>开源 ocr 引擎</p> 
 <p>我们本次直接以排名第一的 TESSERACT-OCR 作为例子。</p> 
 <p>TESSERACT-OCR 安装</p> 
 <p>本次测试的环境为 windows10，所以下载 windows 相关的安装包。</p> 
 <p>windows 下载地址</p> 
 <p>安装</p> 
 <p>安装完毕后，目录下：</p> 
 <p>直接双击 exe，然后安装。</p> 
 <p align="center"><img src="https://images2.imgbox.com/b3/f6/YGOPRpGe_o.png" alt="878be4b0c2e5f44907d1c67cd22e6450.png"></p> 
 <p>指定安装特定语言包</p> 
 <p>这里我们安装一下中文的语言训练包。</p> 
 <p>【chinese】相关的四个，简体，繁体(分别对应的默认和垂直。)</p> 
 <p>比较悲催的是全部下载失败。</p> 
 <p>安装路径</p> 
 <p>使用默认路径：</p> 
 <p>C:\Program Files (x86)\Tesseract-OCR</p> 
 <p>结果</p> 
 <p>λ ls</p> 
 <p>ambiguous_words.exe* libcairo-2.dll* libgomp-1.dll* libpangocairo-1.0-0.dll* libwebp-7.dll* tesseract.exe*</p> 
 <p>classifier_tester.exe* libexpat-1.dll* libharfbuzz-0.dll* libpangoft2-1.0-0.dll* libwinpthread-1.dll* tesseract-uninstall.exe*</p> 
 <p>cntraining.exe* libffi-6.dll* libintl-8.dll* libpangowin32-1.0-0.dll* lstmeval.exe* text2image.exe*</p> 
 <p>combine_lang_model.exe* libfontconfig-1.dll* libjbig-2.dll* libpcre-1.dll* lstmtraining.exe* unicharset_extractor.exe*</p> 
 <p>combine_tessdata.exe* libfreetype-6.dll* libjpeg-8.dll* libpixman-1-0.dll* merge_unicharsets.exe* wordlist2dawg.exe*</p> 
 <p>dawg2wordlist.exe* libgcc_s_seh-1.dll* liblept-5.dll* libpng16-16.dll* mftraining.exe* zlib1.dll*</p> 
 <p>doc/ libgif-7.dll* liblzma-5.dll* libstdc++-6.dll* set_unicharset_properties.exe*</p> 
 <p>iconv.dll* libglib-2.0-0.dll* libopenjp2.dll* libtesseract-4.dll* shapeclustering.exe*</p> 
 <p>libbz2-1.dll* libgobject-2.0-0.dll* libpango-1.0-0.dll* libtiff-5.dll* tessdata/</p> 
 <p>验证版本</p> 
 <p>&gt;tesseract --version</p> 
 <p>tesseract v4.0.0.20181030</p> 
 <p>leptonica-1.76.0</p> 
 <p>libgif 5.1.4 : libjpeg 8d (libjpeg-turbo 1.5.3) : libpng 1.6.34 : libtiff 4.0.9 : zlib 1.2.11 : libwebp 0.6.1 : libopenjp2 2.2.0</p> 
 <p>转换测试</p> 
 <p>tesseract D:\code\ocr\src\main\resources\hello.png 1</p> 
 <p>报错</p> 
 <p>C:\Users\binbin.hou&gt;tesseract D:\code\ocr\src\main\resources\hello.png 1</p> 
 <p>Error opening data file C:\Program Files (x86)\Tesseract-OCR/eng.traineddata</p> 
 <p>Please make sure the TESSDATA_PREFIX environment variable is set to your "tessdata" directory.</p> 
 <p>Failed loading language 'eng'</p> 
 <p>Tesseract couldn't load any languages!</p> 
 <p>Could not initialize tesseract.</p> 
 <p>配置环境变量</p> 
 <p>简单就是说把tessdata拷贝到exe的所在目录，或者设置 TESSDATA_PREFIX 环境变量</p> 
 <p>(1)设置系统变量 TESSDATA_PREFIX 值为安装路径对应的 data 路径 C:\Program Files (x86)\Tesseract-OCR\tessdata。</p> 
 <p>(2)设置 exe 路径 C:\Program Files (x86)\Tesseract-OCR 添加到 path</p> 
 <p>然后重启电脑即可。</p> 
 <p>再次验证</p> 
 <p>C:\Users\binbin.hou&gt;tesseract D:\code\ocr\src\main\resources\hello.png 1</p> 
 <p>Tesseract Open Source OCR Engine v4.0.0.20181030 with Leptonica</p> 
 <p>其中文本信息为：</p> 
 <p>hello ocr</p> 
 <p>训练集数据</p> 
 <p>tessdata 这个文件夹用来放各种语言的训练集合数据。</p> 
 <p>因为中文下载失败，目前里面只有英文的：</p> 
 <p>λ ls</p> 
 <p>configs/ eng.user-patterns jaxb-api-2.3.1.jar pdf.ttf piccolo2d-extras-3.0.jar ScrollView.jar</p> 
 <p>eng.traineddata eng.user-words osd.traineddata piccolo2d-core-3.0.jar script/ tessconfigs/</p> 
 <p>各种语言库的下载地址 tessdata</p> 
 <p>本节暂时不讨论中文相关的处理。</p> 
 <p>代码测试</p> 
 <p>maven 引入</p> 
 <p>实际原理就是利用 java 指定 cmder 进行调用，为了方便，我们直接引入一个 jar 便于调用。</p> 
 <p>net.sourceforge.tess4j</p> 
 <p>tess4j</p> 
 <p>4.2.1</p> 
 <p>这里的 tess4j 的版本和我们安装的版本是有对应关系的，个人就是因为这个问题排查了半天。</p> 
 <p>这个 jar 使用的 jdk 为 1.8，请使用 jdk 1.8+ 测试，否则会报错 Unsupported major.minor version 52.0</p> 
 <p>应该有适合 jdk1.7 的版本，时间有限，后面尝试。</p> 
 <p>图片</p> 
 <p>直接以如下图片做测试：</p> 
 <p align="center"><img src="https://images2.imgbox.com/8c/92/vkNhnvQ3_o.png" alt="4d76854356d6b0a6e0a3c6341c17c8a8.png"></p> 
 <p>测试代码</p> 
 <p>package com.github.houbb.ocr;</p> 
 <p>import net.sourceforge.tess4j.ITesseract;</p> 
 <p>import net.sourceforge.tess4j.Tesseract;</p> 
 <p>import net.sourceforge.tess4j.TesseractException;</p> 
 <p>import java.io.File;</p> 
 <p>public class Main {<!-- --></p> 
 <p>public static void main(String[] args) throws TesseractException {<!-- --></p> 
 <p>ITesseract instance = new Tesseract();</p> 
 <p>// 指定训练数据集合的路径</p> 
 <p>instance.setDatapath("C:\\Program Files (x86)\\Tesseract-OCR\\tessdata");</p> 
 <p>// 指定识别图片</p> 
 <p>File imgDir = new File("D:\\code\\ocr\\src\\main\\resources\\hello.png");</p> 
 <p>long startTime = System.currentTimeMillis();</p> 
 <p>String ocrResult = instance.doOCR(imgDir);</p> 
 <p>// 输出识别结果</p> 
 <p>System.out.println("OCR Result: \n" + ocrResult + "\n 耗时：" + (System.currentTimeMillis() - startTime) + "ms");</p> 
 <p>}</p> 
 <p>}</p> 
 <p>结果</p> 
 <p>OCR Result:</p> 
 <p>hello ocr</p> 
 <p>耗时：1530ms</p> 
 <p>Process finished with exit code 0</p> 
 <p>个人理解这个耗时其实意义不是很大，因为一开始需要加载训练集合文本，所以耗时会较多。</p> 
 <p>总结</p> 
 <p>本节使用 java 实现了最基本的文本识别，应用场景还是很多的，等待大家的自己挖掘。</p> 
 <p>当然默认这里是不支持中文的，下一节将进行中文的实现学习。</p> 
 <p>拓展阅读</p> 
 <p>参考资料</p> 
 <p>环境配置</p> 
 <p>错误</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ec02a80251d75f94469dd76df246df19/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">女生适合学习java什么_女生不适合学习java吗？其实不是这样的，女生往往更有优势！...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cd76ee89eceedd2b7ea25e5d05eefab0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">一条命令解决win7开机重启一直卡在Windows Update 35%</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>