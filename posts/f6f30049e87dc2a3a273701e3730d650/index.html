<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Sharding-JDBC分库分表-自定义分片算法-4 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Sharding-JDBC分库分表-自定义分片算法-4" />
<meta property="og:description" content="默认分片算法 Sharding JDBC通过org.apache.shardingsphere.sharding.spi.ShardingAlgorithm接口定义了数据分片算法，5.2.1版本默认提供了如下的分片算法
配置标识自动分片算法详细说明类名MODY基于取模的分片算法ModShardingAlgorithmHASH_MODY基于哈希取模的分片算法HashModShardingAlgorithmBOUNDARY_RANGEY基于分片边界的范围分片算法BoundaryBasedRangeShardingAlgorithmVOLUME_RANGEY基于分片容量的范围分片算法VolumeBasedRangeShardingAlgorithmAUTO_INTERVALY基于可变时间范围的分片算法AutoIntervalShardingAlgorithmINTERVALN基于固定时间范围的分片算法IntervalShardingAlgorithmCLASS_BASEDN基于自定义类的分片算法ClassBasedShardingAlgorithmINLINEN基于行表达式的分片算法InlineShardingAlgorithmCOMPLEX_INLINEN基于行表达式的复合分片算法ComplexInlineShardingAlgorithmHINT_INLINEN基于行表达式的 Hint 分片算法HintInlineShardingAlgorithm 默认算法的继承关系如下
分片算法参考官方用户文档：默认分片算法介绍
自定义分片算法 自定义分片算法时通过配置分片策略类型和算法类名，实现自定义扩展。 CLASS_BASED 允许向算法类内传入额外的自定义属性，传入的属性可以通过属性名为 props 的 java.util.Properties 类实例取出。
自定义分片算法有三种类型
标准分片算法复杂分片算法hint分片算法 对应需要实现的接口分别为：
算法分类需要实现接口说明标准StandardShardingAlgorithm支持单个分片键，需要实现精确和范围分片接口复杂ComplexShardingAlgorithm支持多个分片键，但是分片键数据类型需要一样hintHintShardingAlgorithm没有分片键，分片值通过hint注入而不是SQL 分片算法开发 以标准算法为例，对下面的order_t进行分表
CREATE TABLE `order_t` ( `order_id` bigint(20) NOT NULL COMMENT &#39;order_id主键&#39;, `order_no` varchar(32) DEFAULT NULL COMMENT &#39;订单编号&#39;, `user_id` bigint(10) NOT NULL COMMENT &#39;用户ID&#39;, `order_date` date NOT NULL COMMENT &#39;下单时间&#39;, `order_amount` decimal(16,2) NOT NULL COMMENT &#39;订单金额&#39;, `delivery_amount` decimal(16,2) DEFAULT &#39;0.00&#39; COMMENT &#39;运费&#39;, `total_amount` decimal(16,2) NOT NULL COMMENT &#39;汇总金额&#39;, `receiver_id` bigint(10) NOT NULL COMMENT &#39;收货地址ID&#39;, `status` tinyint(4) DEFAULT &#39;1&#39; COMMENT &#39;状态，1：已提交，2：已付款，3：待发货，4：已发货，5：已收货，6：已完成&#39;, `deleted` tinyint(4) DEFAULT &#39;0&#39; COMMENT &#39;删除标志，0：未删除，1：已删除&#39;, `create_by` bigint(10) DEFAULT NULL COMMENT &#39;创建人&#39;, `creation_date` datetime DEFAULT NULL COMMENT &#39;创建时间&#39;, `last_update_by` bigint(10) DEFAULT NULL COMMENT &#39;修改人&#39;, `last_update_date` datetime DEFAULT NULL COMMENT &#39;修改时间&#39;, PRIMARY KEY (`order_id`), KEY `idx_useId` (`user_id`), KEY `idx_orderNo` (`order_no`), KEY `idx_orderDate` (`order_date`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT=&#39;订单表&#39;; 分表规则为" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f6f30049e87dc2a3a273701e3730d650/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-01T21:06:31+08:00" />
<meta property="article:modified_time" content="2023-10-01T21:06:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Sharding-JDBC分库分表-自定义分片算法-4</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_1"></a>默认分片算法</h4> 
<p>Sharding JDBC通过org.apache.shardingsphere.sharding.spi.ShardingAlgorithm接口定义了数据分片算法，5.2.1版本默认提供了如下的分片算法</p> 
<table><thead><tr><th align="left"><em>配置标识</em></th><th align="left"><em>自动分片算法</em></th><th align="left"><em>详细说明</em></th><th align="left"><em>类名</em></th></tr></thead><tbody><tr><td align="left">MOD</td><td align="left">Y</td><td align="left">基于取模的分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/mod/ModShardingAlgorithm.java"><code>ModShardingAlgorithm</code></a></td></tr><tr><td align="left">HASH_MOD</td><td align="left">Y</td><td align="left">基于哈希取模的分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/mod/HashModShardingAlgorithm.java"><code>HashModShardingAlgorithm</code></a></td></tr><tr><td align="left">BOUNDARY_RANGE</td><td align="left">Y</td><td align="left">基于分片边界的范围分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/range/BoundaryBasedRangeShardingAlgorithm.java"><code>BoundaryBasedRangeShardingAlgorithm</code></a></td></tr><tr><td align="left">VOLUME_RANGE</td><td align="left">Y</td><td align="left">基于分片容量的范围分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/range/VolumeBasedRangeShardingAlgorithm.java"><code>VolumeBasedRangeShardingAlgorithm</code></a></td></tr><tr><td align="left">AUTO_INTERVAL</td><td align="left">Y</td><td align="left">基于可变时间范围的分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/datetime/AutoIntervalShardingAlgorithm.java"><code>AutoIntervalShardingAlgorithm</code></a></td></tr><tr><td align="left">INTERVAL</td><td align="left">N</td><td align="left">基于固定时间范围的分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/datetime/IntervalShardingAlgorithm.java"><code>IntervalShardingAlgorithm</code></a></td></tr><tr><td align="left">CLASS_BASED</td><td align="left">N</td><td align="left">基于自定义类的分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/classbased/ClassBasedShardingAlgorithm.java"><code>ClassBasedShardingAlgorithm</code></a></td></tr><tr><td align="left">INLINE</td><td align="left">N</td><td align="left">基于行表达式的分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/inline/InlineShardingAlgorithm.java"><code>InlineShardingAlgorithm</code></a></td></tr><tr><td align="left">COMPLEX_INLINE</td><td align="left">N</td><td align="left">基于行表达式的复合分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/inline/ComplexInlineShardingAlgorithm.java"><code>ComplexInlineShardingAlgorithm</code></a></td></tr><tr><td align="left">HINT_INLINE</td><td align="left">N</td><td align="left">基于行表达式的 Hint 分片算法</td><td align="left"><a href="https://github.com/apache/shardingsphere/blob/master/features/sharding/core/src/main/java/org/apache/shardingsphere/sharding/algorithm/sharding/hint/HintInlineShardingAlgorithm.java"><code>HintInlineShardingAlgorithm</code></a></td></tr></tbody></table> 
<p>默认算法的继承关系如下</p> 
<p><img src="https://images2.imgbox.com/53/05/iYkTjlFX_o.png" alt="在这里插入图片描述"></p> 
<p>分片算法参考官方用户文档：<a href="https://shardingsphere.apache.org/document/5.2.1/cn/user-manual/common-config/builtin-algorithm/sharding/" rel="nofollow"><code>默认分片算法介绍</code></a></p> 
<h4><a id="_25"></a>自定义分片算法</h4> 
<p>自定义分片算法时通过配置分片策略类型和算法类名，实现自定义扩展。 <code>CLASS_BASED</code> 允许向算法类内传入额外的自定义属性，传入的属性可以通过属性名为 <code>props</code> 的 <code>java.util.Properties</code> 类实例取出。</p> 
<p>自定义分片算法有三种类型</p> 
<ul><li>标准分片算法</li><li>复杂分片算法</li><li>hint分片算法</li></ul> 
<p>对应需要实现的接口分别为：</p> 
<table><thead><tr><th>算法分类</th><th>需要实现接口</th><th>说明</th></tr></thead><tbody><tr><td>标准</td><td>StandardShardingAlgorithm</td><td>支持单个分片键，需要实现精确和范围分片接口</td></tr><tr><td>复杂</td><td>ComplexShardingAlgorithm</td><td>支持多个分片键，但是分片键数据类型需要一样</td></tr><tr><td>hint</td><td>HintShardingAlgorithm</td><td>没有分片键，分片值通过hint注入而不是SQL</td></tr></tbody></table> 
<h5><a id="_43"></a>分片算法开发</h5> 
<p>以标准算法为例，对下面的order_t进行分表</p> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>order_t<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>order_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'order_id主键'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>order_no<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'订单编号'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'用户ID'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>order_date<span class="token punctuation">`</span></span> <span class="token keyword">date</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'下单时间'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>order_amount<span class="token punctuation">`</span></span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'订单金额'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>delivery_amount<span class="token punctuation">`</span></span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0.00'</span> <span class="token keyword">COMMENT</span> <span class="token string">'运费'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>total_amount<span class="token punctuation">`</span></span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'汇总金额'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>receiver_id<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'收货地址ID'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>status<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'1'</span> <span class="token keyword">COMMENT</span> <span class="token string">'状态，1：已提交，2：已付款，3：待发货，4：已发货，5：已收货，6：已完成'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>deleted<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'0'</span> <span class="token keyword">COMMENT</span> <span class="token string">'删除标志，0：未删除，1：已删除'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>create_by<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建人'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>creation_date<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>last_update_by<span class="token punctuation">`</span></span> <span class="token keyword">bigint</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'修改人'</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">`</span>last_update_date<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'修改时间'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>order_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_useId<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>user_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_orderNo<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>order_no<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_orderDate<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>order_date<span class="token punctuation">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8 <span class="token keyword">COMMENT</span><span class="token operator">=</span><span class="token string">'订单表'</span><span class="token punctuation">;</span>
</code></pre> 
<p>分表规则为</p> 
<ul><li>按照下单时间order_date分表</li><li>一个季度分一个表</li><li>只分2023年</li></ul> 
<p>目标表有：order_t1，order_t2，order_t3，order_t4</p> 
<p>配置如下：</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">shardingsphere</span><span class="token punctuation">:</span>
    <span class="token key atrule">rules</span><span class="token punctuation">:</span>
      <span class="token key atrule">sharding</span><span class="token punctuation">:</span>
        <span class="token key atrule">tables</span><span class="token punctuation">:</span> <span class="token comment"># 需要分库表的规则配置</span>
          <span class="token key atrule">order_t</span><span class="token punctuation">:</span>
            <span class="token key atrule">actual-data-nodes</span><span class="token punctuation">:</span> ds0.order_t$<span class="token punctuation">-</span><span class="token punctuation">&gt;</span><span class="token punctuation">{<!-- --></span>1..4<span class="token punctuation">}</span>  <span class="token comment"># 待选数据节点：ds0.order_t1、ds0.order_t2、ds0.order_t3</span>
            <span class="token key atrule">key-generate-strategy</span><span class="token punctuation">:</span>  <span class="token comment"># 分布式ID列，一般是主键</span>
              <span class="token key atrule">column</span><span class="token punctuation">:</span> order_id
              <span class="token key atrule">key-generator-name</span><span class="token punctuation">:</span> beautySnowflake <span class="token comment"># 使用自定义分布式ID算法是</span>
            <span class="token key atrule">table-strategy</span><span class="token punctuation">:</span> <span class="token comment"># 分库策略配置</span>
              <span class="token key atrule">standard</span><span class="token punctuation">:</span> <span class="token comment"># 标准算法</span>
                <span class="token key atrule">sharding-column</span><span class="token punctuation">:</span> order_date <span class="token comment"># 分片列</span>
                <span class="token key atrule">sharding-algorithm-name</span><span class="token punctuation">:</span> quarter_std <span class="token comment"># 分片算法</span>
        <span class="token key atrule">key-generators</span><span class="token punctuation">:</span> <span class="token comment"># 分布式ID生成算法</span>
          <span class="token key atrule">beautySnowflake</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> BEAUTY_SNOWFLAKE
        <span class="token key atrule">sharding-algorithms</span><span class="token punctuation">:</span> <span class="token comment"># 分片算法，配置后可以在分片表的分片策略中被引用</span>
          <span class="token key atrule">quarter_std</span><span class="token punctuation">:</span>
            <span class="token key atrule">type</span><span class="token punctuation">:</span> CLASS_BASED
            <span class="token key atrule">props</span><span class="token punctuation">:</span>
              <span class="token key atrule">strategy</span><span class="token punctuation">:</span> standard <span class="token comment"># 标准算法</span>
              <span class="token key atrule">algorithmClassName</span><span class="token punctuation">:</span> com.xlt.sharding.startegy.DateStdShardingAlgorithm <span class="token comment"># 自定义算法类路径</span>
              <span class="token key atrule">lowerLimit</span><span class="token punctuation">:</span> <span class="token string">"2023-01-01 00:00:00"</span> <span class="token comment"># 分片时间下限</span>
              <span class="token key atrule">upperLimit</span><span class="token punctuation">:</span> <span class="token string">"2023-12-31 24:00:00"</span> <span class="token comment"># 分片时间上限</span>
              <span class="token key atrule">interval</span><span class="token punctuation">:</span> <span class="token number">3</span>  <span class="token comment"># 分片间隔月数</span>
</code></pre> 
<p>自定义标准分片算法DateStdShardingAlgorithm需要实现StandardShardingAlgorithm接口，实现其精确分片和范围分片doSharding方法，除此之外还要实现init、getProps、getType等方法。</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DateStdShardingAlgorithm</span> <span class="token keyword">implements</span> <span class="token class-name">StandardShardingAlgorithm</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">Date</span> lowerDate<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Date</span> upperDate<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> interval<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Properties</span> properties<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> <span class="token constant">DATE_PATTERN</span> <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">Properties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">String</span> lowerLimit <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> properties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"lowerLimit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> upperLimit <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> properties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"upperLimit"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> interval <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> properties<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"interval"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>lowerLimit<span class="token punctuation">,</span> <span class="token string">"lowerLimit can't be empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>upperLimit<span class="token punctuation">,</span> <span class="token string">"upperLimit can't be empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isNull</span><span class="token punctuation">(</span>interval<span class="token punctuation">,</span> <span class="token string">"interval can't be empty"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>lowerDate <span class="token operator">=</span> <span class="token function">parseDate</span><span class="token punctuation">(</span>lowerLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>upperDate <span class="token operator">=</span> <span class="token function">parseDate</span><span class="token punctuation">(</span>upperLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>interval <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">Date</span> <span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token class-name">String</span> lowerLimit<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token constant">DATE_PATTERN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            date <span class="token operator">=</span> sdf<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>lowerLimit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"String date parse error:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">CommonException</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> date<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">formatDate</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token constant">DATE_PATTERN</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">getYear</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        calendar<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        calendar<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">MONTH</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Get properties.
     *
     * @return properties
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Properties</span> <span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> properties<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Get type.
     *
     * @return type
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token string">"QUARTER_DATE"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Sharding.
     *
     * @param tableNames    available data sources or table names
     * @param shardingValue sharding value
     * @return sharding result for data source or table name
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">doSharding</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tableNames<span class="token punctuation">,</span> <span class="token class-name">PreciseShardingValue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> shardingValue<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"tableNames={},shardingValue={},properties={}"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>tableNames<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>shardingValue<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Date</span> date <span class="token operator">=</span> shardingValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> lowerDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is before lowerLimit: "</span> <span class="token operator">+</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>lowerDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> upperDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is after upperLimit: "</span> <span class="token operator">+</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>upperDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> idx <span class="token operator">=</span> <span class="token function">calTableIdx</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"idx={}"</span><span class="token punctuation">,</span> idx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> targetTable <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> tableName <span class="token operator">:</span> tableNames<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">String</span> tblIdxStr <span class="token operator">=</span> tableName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>tableName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"t"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> tblIdx <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>tblIdxStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>tblIdx <span class="token operator">==</span> idx<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                targetTable <span class="token operator">=</span> tableName<span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"targetTable={}"</span><span class="token punctuation">,</span> targetTable<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> targetTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">calTableIdx</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">int</span> months <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">getYear</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">getYear</span><span class="token punctuation">(</span>lowerDate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token function">getMonth</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> flag <span class="token operator">=</span> months <span class="token operator">%</span> interval <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> months <span class="token operator">/</span> interval <span class="token operator">+</span> flag<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * Sharding.
     *
     * @param tableNames    available data sources or table names
     * @param shardingValue sharding value
     * @return sharding results for data sources or table names
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">doSharding</span><span class="token punctuation">(</span><span class="token class-name">Collection</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> tableNames<span class="token punctuation">,</span> <span class="token class-name">RangeShardingValue</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> shardingValue<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"tableNames={},shardingValue={},properties={}"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>tableNames<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>shardingValue<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Date</span> lowDate <span class="token operator">=</span> shardingValue<span class="token punctuation">.</span><span class="token function">getValueRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lowerEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Date</span> upDate <span class="token operator">=</span> shardingValue<span class="token punctuation">.</span><span class="token function">getValueRange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">upperEndpoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>lowDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> upDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>lowDate<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is after upperEndpoint: "</span> <span class="token operator">+</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>upDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>lowDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> lowerDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>lowDate<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is before lowerLimit: "</span> <span class="token operator">+</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>lowerDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AssertUtil</span><span class="token punctuation">.</span><span class="token function">isTrue</span><span class="token punctuation">(</span>upDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> upperDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>upDate<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" is after upperLimit: "</span> <span class="token operator">+</span> <span class="token function">formatDate</span><span class="token punctuation">(</span>upperDate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> lowIdx <span class="token operator">=</span> <span class="token function">calTableIdx</span><span class="token punctuation">(</span>lowDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> upIdx <span class="token operator">=</span>  <span class="token function">calTableIdx</span><span class="token punctuation">(</span>upDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"lowIdx={},upIdx={}"</span><span class="token punctuation">,</span> lowIdx<span class="token punctuation">,</span> upIdx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> targetTbls <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> tableName <span class="token operator">:</span> tableNames<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">String</span> dsIdxStr <span class="token operator">=</span> tableName<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span>tableName<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"t"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> dsIdx <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>dsIdxStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>dsIdx <span class="token operator">&gt;=</span> lowIdx <span class="token operator">&amp;&amp;</span> dsIdx <span class="token operator">&lt;=</span> upIdx<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                targetTbls<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>tableName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"target table names={}"</span><span class="token punctuation">,</span> targetTbls<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> targetTbls<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="_254"></a>测试用例设计</h5> 
<p>针对以上的分片算法设计测试用例对其进行验证</p> 
<p>1、新增订单数据</p> 
<p>使用JMockData和Faker生成100条随机数据进行插入测试</p> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ShardingJdbcTest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">IOrderMapper</span> mapper<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 新增订单
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name">OrderPo</span> orderPo <span class="token operator">=</span> <span class="token class-name">JMockData</span><span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token class-name">OrderPo</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            orderPo<span class="token punctuation">.</span><span class="token function">setOrderId</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">long</span><span class="token punctuation">)</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            orderPo<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            orderPo<span class="token punctuation">.</span><span class="token function">setDeleted</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Faker</span> faker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Faker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Calendar</span> fromDate <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            fromDate<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">JANUARY</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Calendar</span> toDate <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            toDate<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">2023</span><span class="token punctuation">,</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token constant">DECEMBER</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            orderPo<span class="token punctuation">.</span><span class="token function">setOrderDate</span><span class="token punctuation">(</span>faker<span class="token punctuation">.</span><span class="token function">date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span>fromDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> toDate<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"add new order:{}"</span><span class="token punctuation">,</span> orderPo<span class="token punctuation">)</span><span class="token punctuation">;</span>
            mapper<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>orderPo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>生成数据情况，order_t1中order_date为1-3月：</p> 
<p><img src="https://images2.imgbox.com/85/e2/HS26Y5OX_o.png" alt="在这里插入图片描述"></p> 
<p>order_t2中order_date为4-6月：</p> 
<p><img src="https://images2.imgbox.com/e1/04/gB6kdJz1_o.png" alt="在这里插入图片描述"></p> 
<p>2、查询订单数据-等值查询</p> 
<p>使用分片键查询单一时间的数据</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 单个查询
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryOrder_1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderPo</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        queryWrapper<span class="token punctuation">.</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">"order_date"</span><span class="token punctuation">,</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"2023-03-12"</span><span class="token punctuation">,</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token constant">DATE_PATTERN_2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderPo</span><span class="token punctuation">&gt;</span></span> orderPos <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"orderPos={}"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>orderPos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>从日志中看，找到目标表之后，查到了对应的数据</p> 
<p><img src="https://images2.imgbox.com/72/ea/mOGXzb1n_o.png" alt="在这里插入图片描述"></p> 
<p>3、范围查询订单数据</p> 
<p>使用分片键查询一定时间范围内的数据</p> 
<pre><code class="prism language-java"><span class="token comment">/**
 * 范围查询
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">queryOrder_2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderPo</span><span class="token punctuation">&gt;</span></span> queryWrapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueryWrapper</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    queryWrapper<span class="token punctuation">.</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token string">"order_date"</span><span class="token punctuation">,</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"2023-05-01"</span><span class="token punctuation">,</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token constant">DATE_PATTERN_2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">parseDate</span><span class="token punctuation">(</span><span class="token string">"2023-08-01"</span><span class="token punctuation">,</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token constant">DATE_PATTERN_2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">OrderPo</span><span class="token punctuation">&gt;</span></span> orderPos <span class="token operator">=</span> mapper<span class="token punctuation">.</span><span class="token function">selectList</span><span class="token punctuation">(</span>queryWrapper<span class="token punctuation">)</span><span class="token punctuation">;</span>
    log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"orderPos={}"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>orderPos<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看到查询过程中，根据order_date的范围，经过分片算法的计算，路由到了order_t_2和order_t_3表，然后查回相应的数据</p> 
<p><img src="https://images2.imgbox.com/e6/c5/Xsw3vEBt_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_347"></a>分库分表运行过程</h4> 
<p>分库分表算法执行顺序</p> 
<div class="mermaid"> 
 <svg id="mermaid-svg-iiQl42PVjQKypaXp" width="783.90185546875" xmlns="http://www.w3.org/2000/svg" height="1240" viewbox="0.0000019073486328125 0.0000019073486328125 783.90185546875 1240" class="mermaid-svg"> 
  <style>#mermaid-svg-iiQl42PVjQKypaXp {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-iiQl42PVjQKypaXp .error-icon{fill:#552222;}#mermaid-svg-iiQl42PVjQKypaXp .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-iiQl42PVjQKypaXp .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-iiQl42PVjQKypaXp .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-iiQl42PVjQKypaXp .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-iiQl42PVjQKypaXp .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-iiQl42PVjQKypaXp .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-iiQl42PVjQKypaXp .marker{fill:#333333;stroke:#333333;}#mermaid-svg-iiQl42PVjQKypaXp .marker.cross{stroke:#333333;}#mermaid-svg-iiQl42PVjQKypaXp svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-iiQl42PVjQKypaXp .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-iiQl42PVjQKypaXp .cluster-label text{fill:#333;}#mermaid-svg-iiQl42PVjQKypaXp .cluster-label span{color:#333;}#mermaid-svg-iiQl42PVjQKypaXp .label text,#mermaid-svg-iiQl42PVjQKypaXp span{fill:#333;color:#333;}#mermaid-svg-iiQl42PVjQKypaXp .node rect,#mermaid-svg-iiQl42PVjQKypaXp .node circle,#mermaid-svg-iiQl42PVjQKypaXp .node ellipse,#mermaid-svg-iiQl42PVjQKypaXp .node polygon,#mermaid-svg-iiQl42PVjQKypaXp .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-iiQl42PVjQKypaXp .node .label{text-align:center;}#mermaid-svg-iiQl42PVjQKypaXp .node.clickable{cursor:pointer;}#mermaid-svg-iiQl42PVjQKypaXp .arrowheadPath{fill:#333333;}#mermaid-svg-iiQl42PVjQKypaXp .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-iiQl42PVjQKypaXp .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-iiQl42PVjQKypaXp .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-iiQl42PVjQKypaXp .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-iiQl42PVjQKypaXp .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-iiQl42PVjQKypaXp .cluster text{fill:#333;}#mermaid-svg-iiQl42PVjQKypaXp .cluster span{color:#333;}#mermaid-svg-iiQl42PVjQKypaXp div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-iiQl42PVjQKypaXp :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-MybatisSimpleExecutor LE-RoutingStatementHandler" style="opacity: 1;" id="L-MybatisSimpleExecutor-RoutingStatementHandler"> 
      <path class="path" d="M402.6496124267578,54.000003814697266L402.6496124267578,58.16667048136393C402.6496124267578,62.3333371480306,402.6496124267578,70.66667048136394,402.6496124267578,79.00000381469727C402.6496124267578,87.3333371480306,402.6496124267578,95.66667048136394,402.6496124267578,99.8333371480306L402.6496124267578,104.00000381469727" marker-end="url(#arrowhead303)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead303" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-RoutingStatementHandler LE-PreparedStatementHandler" style="opacity: 1;" id="L-RoutingStatementHandler-PreparedStatementHandler"> 
      <path class="path" d="M402.6496124267578,150.00000762939453L402.6496124267578,154.1666742960612C402.6496124267578,158.33334096272787,402.6496124267578,166.6666742960612,402.6496124267578,175.00000762939453C402.6496124267578,183.33334096272787,402.6496124267578,191.6666742960612,402.6496124267578,195.83334096272787L402.6496124267578,200.00000762939453" marker-end="url(#arrowhead304)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead304" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-PreparedStatementHandler LE-ShardingSpherePreparedStatement#createExecutionContext" style="opacity: 1;" id="L-PreparedStatementHandler-ShardingSpherePreparedStatement#createExecutionContext"> 
      <path class="path" d="M402.6496124267578,246.0000114440918L402.6496124267578,250.16667811075845C402.6496124267578,254.33334477742514,402.6496124267578,262.6666781107585,402.6496124267578,271.0000114440918C402.6496124267578,279.3333447774251,402.6496124267578,287.6666781107585,402.6496124267578,291.8333447774251L402.6496124267578,296.0000114440918" marker-end="url(#arrowhead305)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead305" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-ShardingSpherePreparedStatement#createExecutionContext LE-KernelProcessor#generateExecutionContext" style="opacity: 1;" id="L-ShardingSpherePreparedStatement#createExecutionContext-KernelProcessor#generateExecutionContext"> 
      <path class="path" d="M402.6496124267578,342.00001525878906L402.6496124267578,346.16668192545575C402.6496124267578,350.3333485921224,402.6496124267578,358.66668192545575,402.6496124267578,367.00001525878906C402.6496124267578,375.3333485921224,402.6496124267578,383.66668192545575,402.6496124267578,387.8333485921224L402.6496124267578,392.00001525878906" marker-end="url(#arrowhead306)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead306" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-KernelProcessor#generateExecutionContext LE-KernelProcessor#route" style="opacity: 1;" id="L-KernelProcessor#generateExecutionContext-KernelProcessor#route"> 
      <path class="path" d="M402.6496124267578,438.0000190734863L402.6496124267578,442.166685740153C402.6496124267578,446.33335240681964,402.6496124267578,454.666685740153,402.6496124267578,463.0000190734863C402.6496124267578,471.33335240681964,402.6496124267578,479.666685740153,402.6496124267578,483.83335240681964L402.6496124267578,488.0000190734863" marker-end="url(#arrowhead307)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead307" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-KernelProcessor#route LE-SQLRouteEngine#route" style="opacity: 1;" id="L-KernelProcessor#route-SQLRouteEngine#route"> 
      <path class="path" d="M402.6496124267578,534.0000228881836L402.6496124267578,538.1666895548502C402.6496124267578,542.333356221517,402.6496124267578,550.6666895548502,402.6496124267578,559.0000228881836C402.6496124267578,567.333356221517,402.6496124267578,575.6666895548502,402.6496124267578,579.833356221517L402.6496124267578,584.0000228881836" marker-end="url(#arrowhead308)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead308" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-SQLRouteEngine#route LE-PartialSQLRouteExecutor#route" style="opacity: 1;" id="L-SQLRouteEngine#route-PartialSQLRouteExecutor#route"> 
      <path class="path" d="M402.6496124267578,630.0000267028809L402.6496124267578,634.1666933695475C402.6496124267578,638.3333600362142,402.6496124267578,646.6666933695475,402.6496124267578,655.0000267028809C402.6496124267578,663.3333600362142,402.6496124267578,671.6666933695475,402.6496124267578,675.8333600362142L402.6496124267578,680.0000267028809" marker-end="url(#arrowhead309)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead309" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-PartialSQLRouteExecutor#route LE-ShardingSQLRouter#createRouteContext" style="opacity: 1;" id="L-PartialSQLRouteExecutor#route-ShardingSQLRouter#createRouteContext"> 
      <path class="path" d="M402.6496124267578,726.0000305175781L402.6496124267578,730.1666971842448C402.6496124267578,734.3333638509115,402.6496124267578,742.6666971842448,402.6496124267578,751.0000305175781C402.6496124267578,759.3333638509115,402.6496124267578,767.6666971842448,402.6496124267578,771.8333638509115L402.6496124267578,776.0000305175781" marker-end="url(#arrowhead310)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead310" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-ShardingSQLRouter#createRouteContext LE-ShardingStandardRoutingEngine#route" style="opacity: 1;" id="L-ShardingSQLRouter#createRouteContext-ShardingStandardRoutingEngine#route"> 
      <path class="path" d="M402.6496124267578,822.0000343322754L402.6496124267578,826.166700998942C402.6496124267578,830.3333676656088,402.6496124267578,838.666700998942,402.6496124267578,847.0000343322754C402.6496124267578,855.3333676656088,402.6496124267578,863.666700998942,402.6496124267578,867.8333676656088L402.6496124267578,872.0000343322754" marker-end="url(#arrowhead311)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead311" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-ShardingStandardRoutingEngine#route LE-ShardingStandardRoutingEngine#route0" style="opacity: 1;" id="L-ShardingStandardRoutingEngine#route-ShardingStandardRoutingEngine#route0"> 
      <path class="path" d="M402.6496124267578,918.0000381469727L402.6496124267578,922.1667048136393C402.6496124267578,926.333371480306,402.6496124267578,934.6667048136393,402.6496124267578,943.0000381469727C402.6496124267578,951.333371480306,402.6496124267578,959.6667048136393,402.6496124267578,963.833371480306L402.6496124267578,968.0000381469727" marker-end="url(#arrowhead312)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead312" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-ShardingStandardRoutingEngine#route0 LE-ShardingStandardRoutingEngine#routeDataSources" style="opacity: 1;" id="L-ShardingStandardRoutingEngine#route0-ShardingStandardRoutingEngine#routeDataSources"> 
      <path class="path" d="M304.6717817585614,1014.0000419616699L286.9221762253962,1018.1667086283366C269.17257069223103,1022.3333752950033,233.67335962590064,1030.6667086283367,215.9237540927355,1039.00004196167C198.1741485595703,1047.3333752950032,198.1741485595703,1055.6667086283367,198.1741485595703,1059.8333752950032L198.1741485595703,1064.00004196167" marker-end="url(#arrowhead313)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead313" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-ShardingStandardRoutingEngine#routeDataSources LE-StandardShardingStrategy#doSharding" style="opacity: 1;" id="L-ShardingStandardRoutingEngine#routeDataSources-StandardShardingStrategy#doSharding"> 
      <path class="path" d="M198.1741485595703,1110.0000457763672L198.1741485595703,1116.3333795865376C198.1741485595703,1122.6667133967082,198.1741485595703,1135.333381017049,219.40384146824718,1148.0000486373901C240.63353437692408,1160.6667162577312,283.0929201942778,1173.333383878072,304.3226131029547,1179.6667176882427L325.5523060116315,1186.000051498413" marker-end="url(#arrowhead314)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead314" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-ShardingStandardRoutingEngine#route0 LE-ShardingStandardRoutingEngine#routeTables" style="opacity: 1;" id="L-ShardingStandardRoutingEngine#route0-ShardingStandardRoutingEngine#routeTables"> 
      <path class="path" d="M500.62744309495423,1014.0000419616699L518.3770486281194,1018.1667086283366C536.1266541612846,1022.3333752950033,571.625865227615,1030.6667086283367,589.3754707607801,1039.00004196167C607.1250762939453,1047.3333752950032,607.1250762939453,1055.6667086283367,607.1250762939453,1059.8333752950032L607.1250762939453,1064.00004196167" marker-end="url(#arrowhead315)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead315" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-ShardingStandardRoutingEngine#routeTables LE-StandardShardingStrategy#doSharding" style="opacity: 1;" id="L-ShardingStandardRoutingEngine#routeTables-StandardShardingStrategy#doSharding"> 
      <path class="path" d="M607.1250762939453,1110.0000457763672L607.1250762939453,1116.3333795865376C607.1250762939453,1122.6667133967082,607.1250762939453,1135.333381017049,585.8953833852685,1148.0000486373901C564.6656904765915,1160.6667162577312,522.2063046592378,1173.333383878072,500.97661175056095,1179.6667176882427L479.7469188418841,1186.000051498413" marker-end="url(#arrowhead316)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead316" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-MybatisSimpleExecutor-RoutingStatementHandler" class="edgeLabel L-LS-MybatisSimpleExecutor' L-LE-RoutingStatementHandler"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-RoutingStatementHandler-PreparedStatementHandler" class="edgeLabel L-LS-RoutingStatementHandler' L-LE-PreparedStatementHandler"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-PreparedStatementHandler-ShardingSpherePreparedStatement#createExecutionContext" class="edgeLabel L-LS-PreparedStatementHandler' L-LE-ShardingSpherePreparedStatement#createExecutionContext"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-ShardingSpherePreparedStatement#createExecutionContext-KernelProcessor#generateExecutionContext" class="edgeLabel L-LS-ShardingSpherePreparedStatement#createExecutionContext' L-LE-KernelProcessor#generateExecutionContext"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-KernelProcessor#generateExecutionContext-KernelProcessor#route" class="edgeLabel L-LS-KernelProcessor#generateExecutionContext' L-LE-KernelProcessor#route"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-KernelProcessor#route-SQLRouteEngine#route" class="edgeLabel L-LS-KernelProcessor#route' L-LE-SQLRouteEngine#route"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-SQLRouteEngine#route-PartialSQLRouteExecutor#route" class="edgeLabel L-LS-SQLRouteEngine#route' L-LE-PartialSQLRouteExecutor#route"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-PartialSQLRouteExecutor#route-ShardingSQLRouter#createRouteContext" class="edgeLabel L-LS-PartialSQLRouteExecutor#route' L-LE-ShardingSQLRouter#createRouteContext"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-ShardingSQLRouter#createRouteContext-ShardingStandardRoutingEngine#route" class="edgeLabel L-LS-ShardingSQLRouter#createRouteContext' L-LE-ShardingStandardRoutingEngine#route"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-ShardingStandardRoutingEngine#route-ShardingStandardRoutingEngine#route0" class="edgeLabel L-LS-ShardingStandardRoutingEngine#route' L-LE-ShardingStandardRoutingEngine#route0"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-ShardingStandardRoutingEngine#route0-ShardingStandardRoutingEngine#routeDataSources" class="edgeLabel L-LS-ShardingStandardRoutingEngine#route0' L-LE-ShardingStandardRoutingEngine#routeDataSources"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform="translate(198.1741485595703,1148.0000486373901)"> 
      <g transform="translate(-32,-13.00000286102295)" class="label"> 
       <rect rx="0" ry="0" width="64" height="26.0000057220459"></rect> 
       <foreignobject width="64" height="26.000003814697266"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-ShardingStandardRoutingEngine#routeDataSources-StandardShardingStrategy#doSharding" class="edgeLabel L-LS-ShardingStandardRoutingEngine#routeDataSources' L-LE-StandardShardingStrategy#doSharding">分库算法</span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-ShardingStandardRoutingEngine#route0-ShardingStandardRoutingEngine#routeTables" class="edgeLabel L-LS-ShardingStandardRoutingEngine#route0' L-LE-ShardingStandardRoutingEngine#routeTables"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform="translate(607.1250762939453,1148.0000486373901)"> 
      <g transform="translate(-32,-13.00000286102295)" class="label"> 
       <rect rx="0" ry="0" width="64" height="26.0000057220459"></rect> 
       <foreignobject width="64" height="26.000003814697266"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-ShardingStandardRoutingEngine#routeTables-StandardShardingStrategy#doSharding" class="edgeLabel L-LS-ShardingStandardRoutingEngine#routeTables' L-LE-StandardShardingStrategy#doSharding">分表算法</span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" style="opacity: 1;" id="flowchart-MybatisSimpleExecutor-196" transform="translate(402.6496124267578,31.000001907348633)"> 
      <rect rx="0" ry="0" x="-92.48661041259766" y="-23.00000286102295" width="184.9732208251953" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-82.48661041259766,-13.00000286102295)"> 
        <foreignobject width="164.9732208251953" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           MybatisSimpleExecutor 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-RoutingStatementHandler-197" transform="translate(402.6496124267578,127.0000057220459)"> 
      <rect rx="0" ry="0" x="-102.24107360839844" y="-23.00000286102295" width="204.48214721679688" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-92.24107360839844,-13.00000286102295)"> 
        <foreignobject width="184.48214721679688" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           RoutingStatementHandler 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-PreparedStatementHandler-199" transform="translate(402.6496124267578,223.00000953674316)"> 
      <rect rx="0" ry="0" x="-107.55357360839844" y="-23.00000286102295" width="215.10714721679688" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-97.55357360839844,-13.00000286102295)"> 
        <foreignobject width="195.10714721679688" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           PreparedStatementHandler 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-ShardingSpherePreparedStatement#createExecutionContext-201" transform="translate(402.6496124267578,319.00001335144043)"> 
      <rect rx="0" ry="0" x="-225.25897216796875" y="-23.00000286102295" width="450.5179443359375" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-215.25897216796875,-13.00000286102295)"> 
        <foreignobject width="430.5179138183594" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           ShardingSpherePreparedStatement#createExecutionContext 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-KernelProcessor#generateExecutionContext-203" transform="translate(402.6496124267578,415.0000171661377)"> 
      <rect rx="0" ry="0" x="-166.0402069091797" y="-23.00000286102295" width="332.0804138183594" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-156.0402069091797,-13.00000286102295)"> 
        <foreignobject width="312.08038330078125" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           KernelProcessor#generateExecutionContext 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-KernelProcessor#route-205" transform="translate(402.6496124267578,511.00002098083496)"> 
      <rect rx="0" ry="0" x="-90.12053680419922" y="-23.00000286102295" width="180.24107360839844" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-80.12053680419922,-13.00000286102295)"> 
        <foreignobject width="160.24107360839844" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           KernelProcessor#route 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-SQLRouteEngine#route-207" transform="translate(402.6496124267578,607.0000247955322)"> 
      <rect rx="0" ry="0" x="-91.03125" y="-23.00000286102295" width="182.0625" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-81.03125,-13.00000286102295)"> 
        <foreignobject width="162.0625" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           SQLRouteEngine#route 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-PartialSQLRouteExecutor#route-209" transform="translate(402.6496124267578,703.0000286102295)"> 
      <rect rx="0" ry="0" x="-122.31697845458984" y="-23.00000286102295" width="244.6339569091797" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-112.31697845458984,-13.00000286102295)"> 
        <foreignobject width="224.63394165039062" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           PartialSQLRouteExecutor#route 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-ShardingSQLRouter#createRouteContext-211" transform="translate(402.6496124267578,799.0000324249268)"> 
      <rect rx="0" ry="0" x="-153.6652069091797" y="-23.00000286102295" width="307.3304138183594" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-143.6652069091797,-13.00000286102295)"> 
        <foreignobject width="287.33038330078125" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           ShardingSQLRouter#createRouteContext 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-ShardingStandardRoutingEngine#route-213" transform="translate(402.6496124267578,895.000036239624)"> 
      <rect rx="0" ry="0" x="-146.50448608398438" y="-23.00000286102295" width="293.00897216796875" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-136.50448608398438,-13.00000286102295)"> 
        <foreignobject width="273.0089416503906" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           ShardingStandardRoutingEngine#route 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-ShardingStandardRoutingEngine#route0-215" transform="translate(402.6496124267578,991.0000400543213)"> 
      <rect rx="0" ry="0" x="-150.70089721679688" y="-23.00000286102295" width="301.40179443359375" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-140.70089721679688,-13.00000286102295)"> 
        <foreignobject width="281.40179443359375" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           ShardingStandardRoutingEngine#route0 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-ShardingStandardRoutingEngine#routeDataSources-217" transform="translate(198.1741485595703,1087.0000438690186)"> 
      <rect rx="0" ry="0" x="-190.17413330078125" y="-23.00000286102295" width="380.3482666015625" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-180.17413330078125,-13.00000286102295)"> 
        <foreignobject width="360.3482360839844" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           ShardingStandardRoutingEngine#routeDataSources 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-StandardShardingStrategy#doSharding-219" transform="translate(402.6496124267578,1209.0000534057617)"> 
      <rect rx="0" ry="0" x="-145.90625" y="-23.00000286102295" width="291.8125" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-135.90625,-13.00000286102295)"> 
        <foreignobject width="271.8125" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           StandardShardingStrategy#doSharding 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-ShardingStandardRoutingEngine#routeTables-221" transform="translate(607.1250762939453,1087.0000438690186)"> 
      <rect rx="0" ry="0" x="-168.77679443359375" y="-23.00000286102295" width="337.5535888671875" height="46.0000057220459" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-158.77679443359375,-13.00000286102295)"> 
        <foreignobject width="317.5535888671875" height="26.000003814697266"> 
         <div style="display: inline-block; white-space: nowrap;">
           ShardingStandardRoutingEngine#routeTables 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/76e8365eaf0d806ff493f3a58ac2b9af/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第二十四周周报：文献阅读&#43;监督学习之回归和分类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/72b8b34f4cabf9194945abea5d3c39a2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">redis使用学习笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>