<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网络测试常用的命令-比较ping,tracert和pathping等命令之间的关系 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网络测试常用的命令-比较ping,tracert和pathping等命令之间的关系" />
<meta property="og:description" content="无论你是一个网络维护人员，还是正在学习TCP/IP协议，了解和掌握一些常用的网络测试命令将会有助于您更快地检测到网络故障所在，同时也会有助你您了解网络通信的内幕。
下面我们逐步介绍几个常用的命令：
1、Ping命令。 当您的机器不能访问Internet，首先确认是否是本地局域网的故障。假定局域网的代理服务器IP地址为202.168.0.1，您可以使用ping 202.168.0.1命令查看本机是否和代理服务器联通。此外可以测试本机的网卡是否正常工作，使用 ping 127.0.0.1命令。一般返回ping的信息就表示本地到该主机的网络线路连通。
但是很多服务器为了防止攻击，一般会关闭对ping的响应。所以ping一般作为测试连通性使用。ping命令后，会接收到对方发送的回馈信息，其中记录着对方的IP地址和TTL。TTL是该字段指定IP包被路由器丢弃之前允许通过的最大网段数量。TTL是IPv4包头的一个8 bit字段。例如IP包在服务器中发送前设置的TTL是64，你使用ping命令后，得到服务器反馈的信息，其中的TTL为56，说明途中一共经过了8道路由器的转发，每经过一个路由，TTL减1。
2、Tracert Tracert命令用来显示数据包到达目标主机所经过的路径（路由器），并显示到达每个节点（路由器）的时间。命令功能同Ping类似，但它所获得的信息要比Ping命令详细得多，它把数据包所走的全部路径、节点的IP以及花费的时间都显示出来。该命令比较适用于大型网络。
Tracert 先发送 TTL 为 1 的回应数据包，当数据包上的 TTL在路由器收到后TTL自动减1 ，一旦某个服务器将TTL减1后，等于了0，路由器应该将“ICMP Time Exceeded”的消息发回源计算机，源计算机就根据收到的信息判断达到的路由器和所用时间。下次再次发送数据包时，将TTL递增 1，继续上述测试，直到目标响应或 TTL 达到最大值，从而确定路由。通过检查中间路由器发回的“ICMP 已超时”的消息确定路由。某些路由器不经询问直接丢弃 TTL过期的数据包，这在 Tracert 实用程序中看不到，我们会显示请求超时的请求信息。下图所示，我们测试到新浪的路经过了8道路由，同时根据上图测试ping 新浪时候，TTL=56，说明新浪的TTL初始设置为64，经过8道路由后到达我们客户机，还剩下64-8 = 56。下图中请求超时的反馈信息是因为路由器对ping命令做了处理，关闭了ping的响应，所以我们收不到发给他的反馈信息。
3、pathping pathping 命令是一个路由跟踪工具，它将 ping 和 tracert 命令的功能与这两个工具所不提供的其他信息结合起来，综合了二者的功能。pathping会先显示中间的通过的路由器（类似tracert命令得到的信息），然后对每个中间路由器（节点）发送一定数量的ping包，通过统计他们对ping包响应的数据包来分析通信质量。上面也提到了，有的路由器对ping关闭了响应，所以有的节点的丢包率会达到100%，所以这种一般就是关闭了ping回复。你可以自己ping试一下。还有，对ping包丢弃程度只是节点本身对ping的处理，并不一定影响他的通信，你可以看到，关闭ping命令节点的下一个节点返回到数据是正常的，说明回复的包都成功发送回来。总之，pathping 命令在一段时间内将数据包发送到将到达最终目标的路径上的每个路由器，然后根据从每个跃点返回的数据包计算结果。由于命令显示数据包在任何给定路由器或链接上丢失的程度，因此可以很容易地确定可能导致网络问题的路由器或链接。下图所示，我们看到，达到第二个就终止了，因为第二道节点（路由器），不支持ping，然后，程序就终止不在继续往下探测了。
4、 nslookup Nslookup命令用于解析域名，一般用来检测本机的DNS设置是否配置正确。如： nslookup 网站域名，即可解析出网站的IP地址。如图，可以看出解析www.163.com的时候，可以解析出它所有的IP地址，而如果网路出现异常或者无法收到服务器发送来的信息时候，会出现下面第二张图片的显示。服务器和Address代表是解析这些IP地址和域名的DNS服务器信息。比如我使用的DNS是jtjndc007.home.langchao.com, DNS服务器地址是10.100.1.11." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/37dcb389db452a597d5c7b508bea87b2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-01-20T14:03:39+08:00" />
<meta property="article:modified_time" content="2016-01-20T14:03:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网络测试常用的命令-比较ping,tracert和pathping等命令之间的关系</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-family:Arial; font-size:14px; line-height:24px; widows:auto">     <strong>    无论你是一个</strong></span><strong><a target="_blank" href="http://www.yesky.com/key/2210/147210.html" rel="nofollow noopener noreferrer" class="bluekey" style="color:rgb(10,80,161); text-decoration:none; font-family:Arial; font-size:14px; line-height:24px; widows:auto">网络维护</a><span style="font-family:Arial; font-size:14px; line-height:24px; widows:auto">人员，还是正在学习TCP/IP协议，了解和掌握一些常用的网络测试命令将会有助于您更快地检测到网络故障所在，同时也会有助你您了解网络通信的内幕。</span></strong></p> 
<p><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><strong>        下面我们逐步介绍几个常用的命令：</strong></span></span></p> 
<h3><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><strong>        1、Ping命令。</strong></span></span></h3> 
<p><span style="font-family:Arial"><span style="font-size:14px; line-height:24px">             </span><span style="line-height:24px"><span style="font-size:14px">当您的机器不能访问Internet，首先确认是否是本地局域网的故障。假定局域网的代理服务器IP地址为202.168.0.1，您可以使用ping 202.168.0.1命令查看本机是否和代理服务器联通。此外可以测试本机的网卡是否正常工作，使用 ping 127.0.0.1命令。一般返回ping的信息就表示本地到该主机的网络线路连通。</span></span></span></p> 
<p><span style="font-family:Arial"><span style="line-height:24px"><span style="font-size:14px">           但是很多服务器为了防止攻击，一般会关闭对ping的响应。所以ping一般作为测试连通性使用。ping命令后，会接收到对方发送的回馈信息，其中记录着对方的IP地址和TTL。TTL是该字段指定IP包被路由器丢弃之前允许通过的最大网段数量。TTL是IPv4包头的一个8 bit字段。例如IP包在服务器中发送前设置的TTL是64，你使用ping命令后，得到服务器反馈的信息，其中的TTL为56，说明途中一共经过了8道路由器的转发，每经过一个路由，TTL减1。</span></span></span><span style="widows:auto"><span style="font-family:Arial"></span></span><span style="font-family:Arial"></span></p> 
<p><span style="font-family:Arial"><span style="font-size:14px; line-height:24px">                     <img src="https://images2.imgbox.com/65/28/JkGuYE1q_o.png" alt=""><img src="" alt=""><br> </span></span></p> 
<h3><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><strong>        2、<span style="font-family:Arial; font-size:14px; line-height:24px; widows:auto">Tracert</span></strong></span></span></h3> 
<p><span style="font-family:Arial"><span style="font-size:14px; line-height:24px; font-family:Arial">       </span><span style="line-height:24px; font-family:Arial"><span style="font-size:14px">      Tracert命令用来显示数据包到达目标主机所经过的路径（路由器），并显示到达每个节点（路由器）的时间。命令功能同Ping类似，但它所获得的信息要比Ping命令详细得多</span></span></span><span style="font-size:14px">，它把数据包所走的全部路径、节点的IP以及花费的时间都显示出来。该命令比较适用于大型网络。<br>            Tracert 先发送 TTL 为 1 的回应数据包，当数据包上的 TTL在路由器收到后TTL自动减1 ，一旦某个服务器将TTL减1后，等于了0，路由器应该将“ICMP Time Exceeded”的消息发回源计算机，源计算机就根据收到的信息判断达到的路由器和所用时间。下次再次发送数据包时，将TTL递增 1，继续上述测试，直到目标响应或 TTL 达到最大值，从而确定路由。通过检查中间路由器发回的“ICMP 已超时”的消息确定路由。某些路由器不经询问直接丢弃 TTL过期的数据包，这在 Tracert 实用程序中看不到，我</span><span style="font-family:Arial"><span style="line-height:24px; font-family:Arial"><span style="font-size:14px">们会显示请求超时的请求信息。下图所示，我们测试到新浪的路经过了8道路由，同时根据上图测试ping 新浪时候，TTL=56，说明新浪的TTL初始设置为64，经过8道路由后到达我们客户机，还剩下64-8 = 56。下图中请求超时的反馈信息是因为路由器对ping命令做了处理，关闭了ping的响应，所以我们收不到发给他的反馈信息。</span></span><br> </span></p> 
<p><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><span style="font-family:Arial; font-size:14px; line-height:24px">                                        <img src="https://images2.imgbox.com/aa/a6/FycaIR5d_o.png" alt=""><img src="" alt=""><br> </span></span></span></p> 
<h3><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><span style="font-family:Arial; font-size:14px; line-height:24px"><strong><span style="font-family:Arial; font-size:14px; line-height:23.9999980926514px">           3、pathping</span></strong></span></span></span></h3> 
<p><span style="font-size:14px">        pathping 命令是一个路由跟踪工具，它将 ping 和 tracert 命令的功能与这两个工具所不提供的其他信息结合起来，综合了二者的功能。pathping会先显示中间的通过的路由器（类似tracert命令得到的信息），然后对每个中间路由器（节点）发送一定数量的ping包，通过统计他们对ping包响应的数据包来分析通信质量。上面也提到了，有的路由器对ping关闭了响应，所以有的节点的丢包率会达到100%，所以这种一般就是关闭了ping回复。你可以自己ping试一下。还有，对ping包丢弃程度只是节点本身对ping的处理，并不一定影响他的通信，你可以看到，关闭ping命令节点的下一个节点返回到数据是正常的，说明回复的包都成功发送回来。总之，pathping 命令在一段时间内将数据包发送到将到达最终目标的路径上的每个路由器，然后根据从每个跃点返回的数据包计算结果。由于命令显示数据包在任何给定路由器或链接上丢失的程度，因此可以很容易地确定可能导致网络问题的路由器或链接。下图所示，我们看到，达到第二个就终止了，因为第二道节点（路由器），不支持ping，然后，程序就终止不在继续往下探测了。</span><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><span style="font-family:Arial; font-size:14px; line-height:24px"><strong><span style="font-family:Arial; font-size:14px; line-height:23.9999980926514px"><span style="line-height:24px"></span></span></strong></span></span></span></p> 
<p><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><span style="font-family:Arial; font-size:14px; line-height:24px">                                           <img src="https://images2.imgbox.com/1c/4e/k3m7R1mU_o.png" alt="">  <img src="" alt=""><br> </span></span></span></p> 
<p><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><span style="font-family:Arial; font-size:14px; line-height:24px"><br> </span></span></span></p> 
<h3><span style="font-family:Arial"><span style="font-size:14px; line-height:24px"><span style="font-family:Arial; font-size:14px; line-height:24px"><strong>   4、<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; font-size:16px; line-height:28px; text-align:justify; widows:auto"> nslookup</span></strong></span></span></span></h3> 
<div> 
 <span style="font-family:Arial"><span style="line-height:24px"><span style="font-family:Arial; line-height:24px"><span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; line-height:28px; text-align:justify; widows:auto"><span style="font-size:14px">        Nslookup命令用于解析域名，一般用来检测本机的DNS设置是否配置正确。如： nslookup 网站域名，即可解析出网站的IP地址。如图，可以看出解析www.163.com的时候，可以解析出它所有的IP地址</span><span style="font-size:18px">，而如果网路出现异常或者无法收到服务器发送来的信息时候，会出现下面第二张图片的显示。服务器和Address代表是解析这些IP地址和域名的DNS服务器信息。比如我使用的DNS是jtjndc007.home.langchao.com, DNS服务器地址是10.100.1.11.</span><br> </span></span></span></span> 
</div> 
<div> 
 <span style="font-family:Arial"><span style="line-height:24px"><span style="font-family:Arial; line-height:24px"><span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; line-height:28px; text-align:justify; widows:auto"><span style="font-size:18px"> </span></span></span></span></span> 
</div> 
<div> 
 <span style="font-family:Arial"><span style="line-height:24px"><span style="font-family:Arial; line-height:24px"><span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; line-height:28px; text-align:justify; widows:auto"><span style="font-size:18px">                         <img src="https://images2.imgbox.com/2a/71/h0xiSgHo_o.png" alt="">              <img src="" alt=""><br> </span></span></span></span></span> 
</div> 
<div> 
 <span style="font-family:Arial"><span style="line-height:24px"><span style="font-family:Arial; line-height:24px"><span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',微软雅黑,arial,宋体,sans-serif; line-height:28px; text-align:justify; widows:auto"><span style="font-size:18px">                                      <img src="" alt=""><br> </span></span></span></span></span> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ec2647e040fcc12c1b997d47807eec48/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">-webkit-overflow-scrolling 实现快速滚动和回弹</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c6eff81368ebf1377ccf6f9f55293eb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux 双物理网卡绑定成一个虚拟网卡</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>