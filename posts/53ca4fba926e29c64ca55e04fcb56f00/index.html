<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>路由基础实验二：VLAN组网配置与管理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="路由基础实验二：VLAN组网配置与管理" />
<meta property="og:description" content="目录
预备知识
步骤
第一步：完成设备基本配置
第二步：交换机VLAN配置
第三步：检查VLAN配置信息
第四步：交换机管理VLAN配置
第五步：交换机接口类型及VLAN配置
命令
预备知识 （1）交换机接口工作状态有Access和Trunk。Access端口仅属于一个VLAN，进入和离开该接口时数据帧无变化（不增加或删除标签）；Trunk端口默认允许所有VLAN通过，进入Trunk链路时，除本征VLAN （Native VLAN）外都需要增加相应的VLAN标记，离开Trunk链路进入设备时，收到不带标记的数据包将被认为是属于本征VLAN的数据包，其它VLAN的数据帧通过识别VLAN标签字段送向不同的子网接口。
（2）思科交换机端口默认工作在dynamic模式（DynamicAuto和DynamicDesirable），通过DTP协议协商确定端口的工作状态（Trunk或者Access）。
步骤 参考配置网络拓扑图：
完整拓扑图资源已上传。
第一步：完成设备基本配置 SWA、SWB、SWC设备更名，enable、telnet、console口令配置等
参考命令:
Switch&gt;enable Switch#configure terminal Switch(config)#hostname SWA SWA(config)#enable secret cisco SWA(config)#line vty 0 15 SWA(config-line)#password cisco SWA(config-line)#login SWA(config-line)#line console 0 SWA(config-line)#password cisco SWA(config-line)#login SWA(config-line)#exit SWA(config)#service password-encryption 第二步：交换机VLAN配置 参考命令:
/* 创建vlan 配置vlan名 */ Switch(config)#vlan id Switch(config-vlan)#name word 配置任务：配置三个VLAN，VLAN信息如下：
（1）VLAN10：Computer，192.168.10.0/24
（2）VLAN20：Network，192.168.20.0/24
（3）VLAN100：Management，192.168.100.0/24
【交换机SWA参考配置】
SWA(config)#vlan 10 SWA(config-vlan)#name computer SWA(config-vlan)#vlan 20 SWA(config-vlan)#name network SWA(config-vlan)#vlan 100 SWA(config-vlan)#name management 第三步：检查VLAN配置信息 分别在每一台交换机上使用show vlan brief查看VLAN配置信息。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/53ca4fba926e29c64ca55e04fcb56f00/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-24T11:27:24+08:00" />
<meta property="article:modified_time" content="2023-06-24T11:27:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">路由基础实验二：VLAN组网配置与管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:40px;"></p> 
<p id="%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86-toc" style="margin-left:40px;"><a href="#%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86" rel="nofollow">预备知识</a></p> 
<p id="%E6%AD%A5%E9%AA%A4-toc" style="margin-left:40px;"><a href="#%E6%AD%A5%E9%AA%A4" rel="nofollow">步骤</a></p> 
<p id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AE%8C%E6%88%90%E8%AE%BE%E5%A4%87%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AE%8C%E6%88%90%E8%AE%BE%E5%A4%87%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE" rel="nofollow">第一步：完成设备基本配置</a></p> 
<p id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE" rel="nofollow">第二步：交换机VLAN配置</a></p> 
<p id="%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%A3%80%E6%9F%A5VLAN%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%A3%80%E6%9F%A5VLAN%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF" rel="nofollow">第三步：检查VLAN配置信息</a></p> 
<p id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AE%A1%E7%90%86VLAN%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AE%A1%E7%90%86VLAN%E9%85%8D%E7%BD%AE" rel="nofollow">第四步：交换机管理VLAN配置</a></p> 
<p id="%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B%E5%8F%8AVLAN%E9%85%8D%E7%BD%AE-toc" style="margin-left:80px;"><a href="#%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B%E5%8F%8AVLAN%E9%85%8D%E7%BD%AE" rel="nofollow">第五步：交换机接口类型及VLAN配置</a></p> 
<p id="%E5%91%BD%E4%BB%A4-toc" style="margin-left:40px;"><a href="#%E5%91%BD%E4%BB%A4" rel="nofollow">命令</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86">预备知识</h3> 
<p>（1）交换机接口工作状态有Access和Trunk。Access端口仅属于一个VLAN，进入和离开该接口时数据帧无变化（不增加或删除标签）；Trunk端口默认允许所有VLAN通过，进入Trunk链路时，除本征VLAN （Native VLAN）外都需要增加相应的VLAN标记，离开Trunk链路进入设备时，收到不带标记的数据包将被认为是属于本征VLAN的数据包，其它VLAN的数据帧通过识别VLAN标签字段送向不同的子网接口。</p> 
<p>（2）思科交换机端口默认工作在dynamic模式（DynamicAuto和DynamicDesirable），通过DTP协议协商确定端口的工作状态（Trunk或者Access）。</p> 
<p></p> 
<h3 id="%E6%AD%A5%E9%AA%A4">步骤</h3> 
<p>参考配置网络拓扑图：</p> 
<p><img alt="" height="594" src="https://images2.imgbox.com/5d/5e/4SYHKrBE_o.png" width="1060"></p> 
<p> </p> 
<p>完整拓扑图资源已上传。</p> 
<p></p> 
<h4 id="%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E5%AE%8C%E6%88%90%E8%AE%BE%E5%A4%87%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><strong>第一步：完成设备基本配置</strong></h4> 
<p>SWA、SWB、SWC设备更名，enable、telnet、console口令配置等</p> 
<p>参考命令:</p> 
<pre><code>Switch&gt;enable
Switch#configure terminal
Switch(config)#hostname SWA
SWA(config)#enable secret cisco
SWA(config)#line vty 0 15
SWA(config-line)#password cisco
SWA(config-line)#login
SWA(config-line)#line console 0
SWA(config-line)#password cisco
SWA(config-line)#login
SWA(config-line)#exit
SWA(config)#service password-encryption</code></pre> 
<p></p> 
<h4 id="%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BAVLAN%E9%85%8D%E7%BD%AE"><strong>第二步：交换机VLAN配置</strong></h4> 
<p>参考命令:</p> 
<pre><code>/*
创建vlan
配置vlan名
*/
Switch(config)#vlan id
Switch(config-vlan)#name word</code></pre> 
<p>配置任务：配置三个VLAN，VLAN信息如下：<br> （1）VLAN10：Computer，192.168.10.0/24<br> （2）VLAN20：Network，192.168.20.0/24<br> （3）VLAN100：Management，192.168.100.0/24</p> 
<p></p> 
<p>【交换机SWA参考配置】<br>  </p> 
<pre><code class="hljs">SWA(config)#vlan 10
SWA(config-vlan)#name computer
SWA(config-vlan)#vlan 20
SWA(config-vlan)#name network
SWA(config-vlan)#vlan 100
SWA(config-vlan)#name management</code></pre> 
<p></p> 
<p></p> 
<h4 id="%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E6%A3%80%E6%9F%A5VLAN%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><strong>第三步：检查VLAN配置信息</strong></h4> 
<p>分别在每一台交换机上使用show vlan brief查看VLAN配置信息。</p> 
<p></p> 
<h4 id="%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%AE%A1%E7%90%86VLAN%E9%85%8D%E7%BD%AE"><strong>第四步：交换机管理VLAN配置</strong></h4> 
<p>参考命令：</p> 
<pre><code>/*
进入特定vlan(定为管理vlan)
配置ip和掩码
配置网关（只需配一次）
*/
Switch(config)#interface vlan id
Switch(config-if)#ip address ip-addresssubnet-mask
Switch(config)#ip default-gateway default-gateway-address
//example
SWA(config)#interface vlan 100
SWA(config-if)#ip address 192.168.100.1 255.255.255.0 
SWA(config-if)#exit
SWA(config)#ip default-gateway 192.168.100.251</code></pre> 
<p>配置任务：配置交换机的管理地址，SWA使用192.168.100.1/24、SWB使用192.168.100.2/24、SWC使用192.168.100.3/24，网关为192.168.100.251。</p> 
<p>【交换机SWA参考配置】</p> 
<pre><code class="hljs">SWA(config)#interface vlan 100
SWA(config-if)#ip address 192.168.100.1 255.255.255.0 
SWA(config-if)#exit
SWA(config)#ip default-gateway 192.168.100.251</code></pre> 
<p><br> 【交换机SWB参考配置】</p> 
<pre><code class="hljs">SWB(config)#interface vlan 100
SWB(config-if)#ip address 192.168.100.2 255.255.255.0 
SWB(config-if)#exit
SWB(config)#ip default-gateway 192.168.100.251 </code></pre> 
<p><br> 【交换机SWC参考配置】</p> 
<pre><code class="hljs">SWC(config)#interface vlan 100
SWC(config-if)#ip address 192.168.100.3 255.255.255.0 
SWC(config-if)#exit
SWC(config)#ip default-gateway 192.168.100.251</code></pre> 
<p> </p> 
<p></p> 
<h4 id="%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%8E%A5%E5%8F%A3%E7%B1%BB%E5%9E%8B%E5%8F%8AVLAN%E9%85%8D%E7%BD%AE">第五步：交换机接口类型及VLAN配置</h4> 
<p>参考命令：</p> 
<pre><code>/*
交换机接口工作模式设置
（若模式为trunk则要配置dot1q协议）
哪个vlan(若模式为access则只能写一个)设置为这种状态
*/
SWA(config)#interface switchport
Switch(config-if)#switchport mode access 
Switch(config-if)#switchport access vlan id 
​
//为trunk模式时
Switch(config-if)#switchport trunk encapsulation [dot1q| isl |negotiate]
/*说明：配置Trunk链路封装的中继协议，最新的IOS都不支持该指令，因为默认封装且仅支持802.1Q
协议，PacketTracer模拟器中部分设备（例如3560、3650）需要先配置此指令，再执行下列指令。*/
Switch(config-if)#switchport mode trunk 
Switch(config-if)#switchport trunk allowed vlan [vlan-id-range| addvlan-id| remove vlan-id]
Switch(config-if)#switchport trunk native vlan id</code></pre> 
<p>配置任务：实验中三台交换机的端口Gi0/1或者Gi0/2为Trunk端口，允许VLAN10,20,100通过，<br> 本征VLAN为100；端口Fa0/1为Access端口，允许VLAN10通过；端口Fa0/2为Access端口，允许<br> VLAN20通过；另外在SWB增加配置，端口Fa0/24为Access端口，允许VLAN100通过。参考配置<br> 如下：</p> 
<p>【SWA配置示例】<br>  </p> 
<pre><code class="hljs">SWA(config)#interface GigabitEthernet 0/1
SWA(config-if)#switchport mode trunk
SWA(config-if)#switchport trunk allowed vlan 10,20,100
SWA(config-if)#switchport trunk native vlan 100
SWA(config-if)#interface fastEthernet 0/1
SWA(config-if)#switchport mode access
SWA(config-if)#switchport access vlan 10
SWA(config-if)#interface fastEthernet0/2
SWA(config-if)#switchport mode access
SWA(config-if)#switchport access vlan 20</code></pre> 
<p>【SWB配置示例】</p> 
<pre><code class="hljs">SWB(config)#interface GigabitEthernet 0/1
SWB(config-if)#switchport mode trunk
SWB(config-if)#switchport trunk allowed vlan 10,20,100
SWB(config-if)#switchport trunk native vlan 100
SWB(config)#interface GigabitEthernet 0/2
SWB(config-if)#switchport mode trunk
SWB(config-if)#switchport trunk allowed vlan 10,20,100
SWB(config-if)#switchport trunk native vlan 100
SWB(config)#interface fastEthernet 0/24
SWB(config-if)#switchport mode access
SWB(config-if)#switchport access vlan 100</code></pre> 
<p>【SWC配置示例】</p> 
<p>参照上面方法配置</p> 
<p></p> 
<p><strong>第六步：检查交换机端口状态及VLAN配置信息</strong></p> 
<p>（1）配置完成后使用show vlan brief查看VLAN信息；</p> 
<p>（2）使用show running-config查看设备基本配置；</p> 
<p>（3）使用show interfacegigabitethernet0/1 switchport、show interfacefastethernet0/1 switchport 查看端口状态，重点关注Administrative Mode（管理模式：access、trunk）和Operational Mode（操作模式：down、static access、trunk）工作状态。</p> 
<p></p> 
<p><strong>第七步：完成PC网络参数配置，测试连通性</strong></p> 
<p>为pc配置ip和网关，测试连通性。</p> 
<p></p> 
<h3 id="%E5%91%BD%E4%BB%A4">命令</h3> 
<table><thead><tr><th>指令</th><th>含义</th><th>模式</th></tr></thead><tbody><tr><td>show vlan brief</td><td>查看VLAN配置信息</td><td></td></tr><tr><td>show running-config</td><td>查看设备基本配置</td><td></td></tr><tr><td>show interface 端口 switchport</td><td>查看端口状态</td><td></td></tr><tr><td>show interfaces[interface-id]</td><td>显示接口状态信息和配置信息</td><td></td></tr><tr><td>show startup-config</td><td>显示当前启动配置</td><td></td></tr><tr><td>show running-config</td><td>显示当前运行配置</td><td></td></tr><tr><td>show flash</td><td>显示有关闪存文件系统的信息。</td><td></td></tr><tr><td>show version</td><td>显示系统硬件和软件状态。</td><td></td></tr><tr><td>s1#show history</td><td>显示输入的命令历史记录。</td><td></td></tr><tr><td>s1#show ip[interface-id]</td><td>显示接口的IP信息。</td><td></td></tr><tr><td>show mac-address-tableOR show mac address-table</td><td>显示MAC地址表。</td><td></td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2b7acd805701f49be0ca5f6fb4bc9ef2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">屏蔽百度首页“推荐”</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d5c69b87ede618330e32972aebc8a6a1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">rancher 节点重启无感发布</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>