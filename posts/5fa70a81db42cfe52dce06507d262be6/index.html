<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>傻瓜都能看懂的高并发量服务器架构 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="傻瓜都能看懂的高并发量服务器架构" />
<meta property="og:description" content="https://blog.csdn.net/daogla/article/details/72877153
服务器架构，说简单不简单，说复杂不复杂，前段时间我们请到了国内服务器顶级攻城狮，他把服务器那点事讲得如此通透简单。
对于一个刚起步的创业公司，不需要考虑太多复杂的服务器架构，能把业务跑起来就行了。但是在早期业务逻辑设计时，懂一些稍微复杂的服务器架构的逻辑，后面可以少走很多弯路。
下面这个图估计大家都明白，这就是最基础的服务器架构。傻瓜式的方法是把应用服务器、文件服务器、数据库服务器全部混合在一起，呵呵呵！但这并不是最科学的。
当业务量持续增加到一定量以后，执行应用程序、读写文件、访问数据库应该有所区分，保证各自的需求都能得到满足，这时候你需要考虑把应用服务器、文件服务器、数据库服务器分离，这个时候的服务器架构应该是下面这样的，它是由三个独立的服务器组成，各司其职。
随着业务量持续增加，应用程序访问缓存数据会成为瓶颈，这个时候需要增加本地缓存，有的也需要分布式缓存。分布式缓存是指缓存部署在多个服务器组成的服务器集群中，以集群的方式提供缓存服务，其架构方式主要有两种，一种是以JBoss Cache为代表的需要同步更新的分布式缓存，一种是以Memchached为代表的互不通信的分布式缓存。如下图：
接下来，应用服务器需要更多台以应对复杂的业务逻辑，那么就需要负载均衡调度服务器来调度和分配应用服务器的工作任务。
再往后，需要考虑数据库服务器的承压能力，通常可以采用主从式数据库服务器架构，把读、写两部分分开，既可以提高数据访问的安全性，也能提高数据读写的效率。
随着业务量暴增，单一区域的服务器带宽将不能承载全国的业务需求，这时候需要增加反向代理和CDN服务器。CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可就近取得所需内容，解决 Internet网络拥挤的状况，提高用户访问网站的响应速度。
同样，服务器架构师应该分析文件服务器和数据库服务器的网络读写速度，进一步部署分布式的架构。
对于有搜索和大量查询的网络业务，还需要增加独立的搜索引擎和NoSQL服务器。
对于更复杂的系统，还需要进一步拆分应用服务器，增加消息队列服务器。增加消息队列服务器有以下几点好处：
1，由于消息队列服务器的速度远远高于数据库服务器，所以能够快递处理并返回数据；
2，消息队列服务器具有更好的扩展性；
3，在高并发的情况下，延迟写入数据库，可以有效降低数据库的压力。
对于一些超大型综合互联网业务，应用服务器也需要分布式的架构，这个时候在不同业务的应用服务器之间做好消息协同会有较大的挑战。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5fa70a81db42cfe52dce06507d262be6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-01T11:17:38+08:00" />
<meta property="article:modified_time" content="2018-08-01T11:17:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">傻瓜都能看懂的高并发量服务器架构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a href="https://blog.csdn.net/daogla/article/details/72877153">https://blog.csdn.net/daogla/article/details/72877153</a></p> 
<p> </p> 
<p>服务器架构，说简单不简单，说复杂不复杂，前段时间我们请到了国内服务器顶级攻城狮，他把服务器那点事讲得如此通透简单。</p> 
<p> </p> 
<p>对于一个刚起步的创业公司，不需要考虑太多复杂的服务器架构，能把业务跑起来就行了。但是在早期业务逻辑设计时，懂一些稍微复杂的服务器架构的逻辑，后面可以少走很多弯路。</p> 
<p> </p> 
<p>下面这个图估计大家都明白，这就是最基础的服务器架构。傻瓜式的方法是把应用服务器、文件服务器、数据库服务器全部混合在一起，呵呵呵！但这并不是最科学的。</p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/9e/f9/GGbbR0sB_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p>当业务量持续增加到一定量以后，执行应用程序、读写文件、访问数据库应该有所区分，保证各自的需求都能得到满足，这时候你需要考虑把应用服务器、文件服务器、数据库服务器分离，这个时候的服务器架构应该是下面这样的，它是由三个独立的服务器组成，各司其职。</p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/25/78/bwmTUadt_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p>随着业务量持续增加，应用程序访问缓存数据会成为瓶颈，这个时候需要增加本地缓存，有的也需要分布式缓存。分布式缓存是指缓存部署在多个服务器组成的服务器集群中，以集群的方式提供缓存服务，其架构方式主要有两种，一种是以JBoss Cache为代表的需要同步更新的分布式缓存，一种是以Memchached为代表的互不通信的分布式缓存。如下图：</p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/66/38/xP9ebxR6_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p>接下来，应用服务器需要更多台以应对复杂的业务逻辑，那么就需要负载均衡调度服务器来调度和分配应用服务器的工作任务。</p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/d6/6d/wTT7F9QO_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p>再往后，需要考虑数据库服务器的承压能力，通常可以采用主从式数据库服务器架构，把读、写两部分分开，既可以提高数据访问的安全性，也能提高数据读写的效率。</p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/5f/77/WS5JWixs_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>随着业务量暴增，单一区域的服务器带宽将不能承载全国的业务需求，这时候需要增加反向代理和CDN服务器。CDN系统能够实时地根据<a href="http://baike.baidu.com/view/411702.htm" rel="nofollow">网络流量</a>和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上。其目的是使用户可就近取得所需内容，解决 Internet<a href="http://baike.baidu.com/view/2774663.htm" rel="nofollow">网络拥挤</a>的状况，提高用户访问网站的响应速度。</p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/41/5a/pQQSEFQU_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>同样，服务器架构师应该分析文件服务器和数据库服务器的网络读写速度，进一步部署分布式的架构。</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/2b/d3/8Orgi2l4_o.jpg"></p> 
<p> </p> 
<p>对于有搜索和大量查询的网络业务，还需要增加独立的搜索引擎和NoSQL服务器。</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/58/0f/PNGsLn18_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>对于更复杂的系统，还需要进一步拆分应用服务器，增加消息队列服务器。增加消息队列服务器有以下几点好处：</p> 
<p> </p> 
<p>1，由于消息队列服务器的速度远远高于数据库服务器，所以能够快递处理并返回数据；</p> 
<p> </p> 
<p>2，消息队列服务器具有更好的扩展性；</p> 
<p> </p> 
<p>3，在高并发的情况下，延迟写入数据库，可以有效降低数据库的压力。</p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/f4/ae/8T8iA23C_o.jpg"></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>对于一些超大型综合互联网业务，应用服务器也需要分布式的架构，这个时候在不同业务的应用服务器之间做好消息协同会有较大的挑战。</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/29/c4/4AC86SPs_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d8469a17cb1ede5cda6d7bd11898f576/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">台阶问题（动态规划）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a4d0a6aa5178d1ffac86b58c5def4c32/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Deep Learning Object Detection</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>