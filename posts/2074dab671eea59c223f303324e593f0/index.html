<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>将网易云API通过宝塔面板布署到云服务器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="将网易云API通过宝塔面板布署到云服务器" />
<meta property="og:description" content="将网易云API通过宝塔布署到云服务器 购买云服务器&amp;创建实例购买云服务器创建云服务器实例 放行端口远程连接安装宝塔面板系统通过宝塔面板将文件托管到云服务器登陆宝塔面板绑定宝塔账号安装LNMP添加端口规则上传文件解决Nginx安装失败添加Node项目 其他错误启动Node项目失败将进程通过虚拟终端挂载 购买云服务器&amp;创建实例 购买云服务器 我选择的是阿里云服务器（学生免费白嫖一个月版），选择免费领取一台ECS云服务器（我已经领取过了，完成下列相关任务还可延长6个月），如下图所示
若未进行学生认证的，需要通过支付宝辅助完成学生认证，完成学生认证后，可购买对应云服务器（支付0元），操作系统可选择自己喜欢的，我选择的操作系统版本是Ubuntu 22.04 64，其余选项默认即可
创建云服务器实例 进入到如下界面，云服务器实例已经创立好了（自动创立），主要关注的内容包括：实例ID/名称（点击可查看更多关于此实例的详细信息）、IP地址（公网IP地址是我们外部访问的地址）以及远程连接
放行端口 点击上述实例ID/名称-&gt;安全组-&gt;管理规则
进入到此界面后，点击快速添加，可以把所有端口全部勾选。然后在可单独添加自己需要的端口，例如我的云服务器默认端口为3000，则我需要放行一个3000的端口
请根据实际场景设置授权对象的CIDR，另外，0.0.0.0/0或者掩码为0，代表允许或拒绝所有IP的访问，设置时请务必谨慎。支持输入多种授权对象，以&#34;,&#34;隔开，支持安全组名称模糊搜索。跨账号安全组以“账号ID/安全组id”格式输入,请填写账号ID而不是账号信息
远程连接 点击远程连接，我选择的是默认方式Workbench
点击立即登陆之后，进入下列界面，用户名默认是root，这个无需更改。一开始只有默认密码，可以通过下列重置密码将密码改为自己熟悉的
下列为重置实例密码界面，改完之后，登陆即可
安装宝塔面板系统 我选择的是Ubuntu系统，进入下列界面输入安装Ubuntu系统的脚本指令即可
wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec 若遇yum相关错误，请移步此文章解决阿里云远程连接yum无法安装问题（Ubuntu 22.04）若遇yum相关错误，请移步此文章解决阿里云远程连接yum无法安装问题（Ubuntu 22.04）若遇yum相关错误，请移步此文章解决阿里云远程连接yum无法安装问题（Ubuntu 22.04）
其余系统脚本指令如下
Centos安装脚本 yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec Debian安装脚本 wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh ed8484bec 万能安装脚本 if [ -f /usr/bin/curl ];then curl -sSO https://download.bt.cn/install/install_panel.sh;else wget -O install_panel." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2074dab671eea59c223f303324e593f0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-28T10:33:02+08:00" />
<meta property="article:modified_time" content="2023-12-28T10:33:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">将网易云API通过宝塔面板布署到云服务器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>将网易云API通过宝塔布署到云服务器</h4> 
 <ul><li><ul><li><a href="#_1" rel="nofollow">购买云服务器&amp;创建实例</a></li><li><ul><li><a href="#_3" rel="nofollow">购买云服务器</a></li><li><a href="#_10" rel="nofollow">创建云服务器实例</a></li></ul> 
   </li><li><a href="#_13" rel="nofollow">放行端口</a></li><li><a href="#_21" rel="nofollow">远程连接</a></li><li><a href="#_28" rel="nofollow">安装宝塔面板系统</a></li><li><a href="#_59" rel="nofollow">通过宝塔面板将文件托管到云服务器</a></li><li><ul><li><a href="#_60" rel="nofollow">登陆宝塔面板</a></li><li><a href="#_63" rel="nofollow">绑定宝塔账号</a></li><li><a href="#LNMP_67" rel="nofollow">安装LNMP</a></li><li><a href="#_71" rel="nofollow">添加端口规则</a></li><li><a href="#_75" rel="nofollow">上传文件</a></li><li><a href="#Nginx_78" rel="nofollow">解决Nginx安装失败</a></li><li><a href="#Node_99" rel="nofollow">添加Node项目</a></li></ul> 
   </li><li><a href="#_106" rel="nofollow">其他错误</a></li><li><ul><li><a href="#Node_107" rel="nofollow">启动Node项目失败</a></li><li><a href="#_140" rel="nofollow">将进程通过虚拟终端挂载</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_1"></a>购买云服务器&amp;创建实例</h3> 
<h4><a id="_3"></a>购买云服务器</h4> 
<p>我选择的是阿里云服务器（学生免费白嫖一个月版），选择免费领取一台ECS云服务器（我已经领取过了，完成下列相关任务还可延长6个月），如下图所示</p> 
<p><img src="https://images2.imgbox.com/ed/00/tJELgVEp_o.png" alt="在这里插入图片描述"><br> 若未进行学生认证的，需要通过支付宝辅助完成学生认证，完成学生认证后，可购买对应云服务器（支付0元），操作系统可选择自己喜欢的，我选择的操作系统版本是<code>Ubuntu 22.04 64</code>，其余选项默认即可<br> <img src="https://images2.imgbox.com/d5/3b/r9hcHvzh_o.png" height="500"></p> 
<h4><a id="_10"></a>创建云服务器实例</h4> 
<p>进入到如下界面，云服务器实例已经创立好了（自动创立），主要关注的内容包括：实例ID/名称（点击可查看更多关于此实例的详细信息）、IP地址（公网IP地址是我们外部访问的地址）以及远程连接<br> <img src="https://images2.imgbox.com/45/27/RNvnboMk_o.png"></p> 
<h3><a id="_13"></a>放行端口</h3> 
<p>点击上述实例ID/名称-&gt;安全组-&gt;管理规则<br> <img src="https://images2.imgbox.com/eb/d0/8H6meADv_o.png"></p> 
<p>进入到此界面后，点击快速添加，可以把所有端口全部勾选。然后在可单独添加自己需要的端口，例如我的云服务器默认端口为3000，则我需要放行一个3000的端口</p> 
<blockquote> 
 <p>请根据实际场景设置授权对象的CIDR，另外，0.0.0.0/0或者掩码为0，代表允许或拒绝所有IP的访问，设置时请务必谨慎。支持输入多种授权对象，以","隔开，支持安全组名称模糊搜索。跨账号安全组以“账号ID/安全组id”格式输入,请填写账号ID而不是账号信息<br> <img src="https://images2.imgbox.com/f8/2f/FHWyZHpM_o.png"></p> 
</blockquote> 
<h3><a id="_21"></a>远程连接</h3> 
<p>点击远程连接，我选择的是默认方式Workbench<br> <img src="https://images2.imgbox.com/b5/b1/yv5ShNJn_o.png"><br> 点击<code>立即登陆</code>之后，进入下列界面，用户名默认是root，这个无需更改。一开始只有默认密码，可以通过下列<code>重置密码</code>将密码改为自己熟悉的<br> <img src="https://images2.imgbox.com/6a/3f/riIyMi1b_o.png"><br> 下列为重置实例密码界面，改完之后，登陆即可<br> <img src="https://images2.imgbox.com/af/a0/J0AasYxb_o.png"></p> 
<h3><a id="_28"></a>安装宝塔面板系统</h3> 
<p>我选择的是Ubuntu系统，进入下列界面输入安装Ubuntu系统的脚本指令即可</p> 
<pre><code>wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec
</code></pre> 
<ul><li>若遇<code>yum</code>相关错误，请移步此文章<a href="https://franzliszt1847.blog.csdn.net/article/details/135241790" rel="nofollow">解决阿里云远程连接yum无法安装问题（Ubuntu 22.04）</a></li><li>若遇<code>yum</code>相关错误，请移步此文章<a href="https://franzliszt1847.blog.csdn.net/article/details/135241790" rel="nofollow">解决阿里云远程连接yum无法安装问题（Ubuntu 22.04）</a></li><li>若遇<code>yum</code>相关错误，请移步此文章<a href="https://franzliszt1847.blog.csdn.net/article/details/135241790" rel="nofollow">解决阿里云远程连接yum无法安装问题（Ubuntu 22.04）</a><br> <img src="https://images2.imgbox.com/e6/c2/zRuowDwO_o.png"></li></ul> 
<p>其余系统脚本指令如下</p> 
<ul><li>Centos安装脚本</li></ul> 
<pre><code>yum install -y wget &amp;&amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec
</code></pre> 
<ul><li>Debian安装脚本</li></ul> 
<pre><code>wget -O install.sh https://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; bash install.sh ed8484bec
</code></pre> 
<ul><li>万能安装脚本</li></ul> 
<pre><code>if [ -f /usr/bin/curl ];then curl -sSO https://download.bt.cn/install/install_panel.sh;else wget -O install_panel.sh https://download.bt.cn/install/install_panel.sh;fi;bash install_panel.sh ed8484bec
</code></pre> 
<ul><li>国产龙芯架构安装脚本（其他CPU请勿使用）</li></ul> 
<pre><code>wget -O install_panel.sh https://download.bt.cn/install/0/loongarch64/loongarch64_install_panel.sh &amp;&amp; bash install_panel.sh ed8484bec
</code></pre> 
<p>出现如下界面，代表系统安装成功，可以通过外网面板地址进入宝塔面板，下列<code>username</code>和<code>password</code>为宝塔面板登陆的账号和密码<br> <img src="https://images2.imgbox.com/8a/e3/eCtH3uty_o.png"></p> 
<h3><a id="_59"></a>通过宝塔面板将文件托管到云服务器</h3> 
<h4><a id="_60"></a>登陆宝塔面板</h4> 
<p>通过上述给予的账号密码登陆即可<br> <img src="https://images2.imgbox.com/b9/09/pNBkLOfd_o.png"></p> 
<h4><a id="_63"></a>绑定宝塔账号</h4> 
<p>如果之前没有注册过宝塔账号，可以通过注册宝塔账号，绑定此服务器<br> 注意区分和上述账号密码的区别，上述为宝塔服务器实例账号密码，此处为宝塔网站的账号密码<br> <img src="https://images2.imgbox.com/b6/cb/bKX6u3s0_o.png"></p> 
<h4><a id="LNMP_67"></a>安装LNMP</h4> 
<p>登陆完成之后，成功进入宝塔面板，可以选择推荐的LNMP进行安装，可以省去很多麻烦<br> <img src="https://images2.imgbox.com/d0/81/VufUrT4K_o.png"></p> 
<h4><a id="_71"></a>添加端口规则</h4> 
<p>然后点击左侧<code>导航栏</code>-&gt;<code>安全</code>-&gt;<code>系统防火墙</code>-&gt;<code>添加端口规则</code>，因为我所托管项目的服务器端口为3000，所以我需要添加一个3000的端口，以供使用<br> <img src="https://images2.imgbox.com/0e/01/Zaj7sTiw_o.png"></p> 
<h4><a id="_75"></a>上传文件</h4> 
<p>点击左侧<code>导航栏</code>-&gt;<code>文件</code>，上传需要托管的文件<br> <img src="https://images2.imgbox.com/eb/78/Npw37qmC_o.png"></p> 
<h4><a id="Nginx_78"></a>解决Nginx安装失败</h4> 
<p>当我们添加Node项目的时候，一直提示我们未安装Nginx，可是我们在一开始默认推荐的LNMP已经安装过了，随即我们可以通过观看错误日志，进行原因分析<br> <img src="https://images2.imgbox.com/81/dc/1GtLUqmh_o.png"><br> 通过观察错误日志，我所遇见的错误提示如下，大意为缺乏库文件，安装即可</p> 
<pre><code class="prism language-c"><span class="token punctuation">.</span><span class="token operator">/</span>configure<span class="token operator">:</span> error<span class="token operator">:</span> the HTTP XSLT module requires the libxml2<span class="token operator">/</span>libxslt
libraries<span class="token punctuation">.</span> You can either <span class="token keyword">do</span> not enable the module or install the libraries<span class="token punctuation">.</span>
</code></pre> 
<p>依次输入如下指令即可（注意：下列指令为Ubuntu系统所用）</p> 
<pre><code class="prism language-c">apt<span class="token operator">-</span>get update
apt<span class="token operator">-</span>get install libxml2 libxml2<span class="token operator">-</span>dev libxslt<span class="token operator">-</span>dev
</code></pre> 
<p>其他Nginx相关问题或者其他系统相关指令，请参考以下链接</p> 
<pre><code class="prism language-c">https<span class="token operator">:</span><span class="token comment">//www.bt.cn/bbs/thread-100610-1-1.html</span>
</code></pre> 
<h4><a id="Node_99"></a>添加Node项目</h4> 
<p><code>运行用户</code>如果没有特别要求，选择<code>www</code>即可，其他的根据自己的需求填写即可，其中端口要尤为注意，记得要在自己放行的端口范围内<br> <img src="https://images2.imgbox.com/3d/85/h15U3I6q_o.png"><br> 创建成功之后，出现如下界面，即文件托管成功<br> <img src="https://images2.imgbox.com/4d/ec/qMgZbdkR_o.png"><br> 最后我们在访问服务器公网ip，测试是否成功，出现如下界面，代码我们操作成功啦<br> <img src="https://images2.imgbox.com/23/18/1CenSNTG_o.png"></p> 
<h3><a id="_106"></a>其他错误</h3> 
<h4><a id="Node_107"></a>启动Node项目失败</h4> 
<p>当启动Node项目时，发生启动错误<br> <img src="https://images2.imgbox.com/2e/f5/b8B6zQpC_o.png"><br> 通过观察日志，可以了解到具体错误日志如下，大意是<code>/tmp</code>文件权限不足</p> 
<pre><code>2023-12-27T17:28:51: Error: EACCES: permission denied, open '/tmp/anonymous_token'
2023-12-27T17:28:51:
at Object.openSync (fs.¡s:498:3)
2023-12-27T17:28:51:
at Object.writeFileSync (fs.js:1524:35)
2023-12-27T17:28:51:
at generateConfig(/www/wwwroot/NeteaseCloudMusicApi/generateConfig.js:13:10)
2023-12-2717:28:51:
at processTicksAndRejections (internal/process/task_ queues.js:95:5)
2023-12-27T17:28:51:
at async start (/www/ wwwroot/NeteaseCloudMusicApi/app.js:13:3)f
2023-12-27T17:28:51:
errno: -13,
2023-12-27T17:28:51: syscall:'open',
2023-12-27T17:28:51:
code: 'EACCES'
2023-12-27T17:28:51: path: '/tmp/anonymous token'
2023-12-27T17:28:51:}
</code></pre> 
<p>通过进入ssh终端，输入如下命令，修改其访问权限即可，然后在运行Node即可成功</p> 
<pre><code>chmod -R 777 /tmp
</code></pre> 
<img src="https://images2.imgbox.com/d5/8e/Kske2EOh_o.png"> 
<h4><a id="_140"></a>将进程通过虚拟终端挂载</h4> 
<p>进入宝塔面板ssh终端</p> 
<p>创建一个虚拟终端，xxx为任意名字</p> 
<pre><code>screen -S XXX
</code></pre> 
<p>然后进入此终端后，运行项目（启动命令根据自己设定的输入）</p> 
<pre><code>node app.js
</code></pre> 
<p>最后按如下快捷键，挂起当前screen并退出</p> 
<pre><code>ctrl+a+d
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2bd2fd38826b28a4e2ea7166e8487a7c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">解决阿里云远程连接yum无法安装问题（Ubuntu 22.04）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56b66c9b80f3bfff24f4444a00414d48/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">5G-A关键技术</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>