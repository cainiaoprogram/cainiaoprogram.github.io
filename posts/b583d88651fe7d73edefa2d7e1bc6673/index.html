<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hadoop集群搭建，基于3.3.4hadoop和centos8【图文教程-从零开始搭建Hadoop集群】，常见问题解决 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Hadoop集群搭建，基于3.3.4hadoop和centos8【图文教程-从零开始搭建Hadoop集群】，常见问题解决" />
<meta property="og:description" content="Hadoop集群搭建，基于3.3.4hadoop和centos8【小白图文教程-从零开始搭建Hadoop集群】，常见问题解决 Hadoop集群搭建，基于3.3.4hadoop1.虚拟机的创建1.1 第一台虚拟机的创建1.2 第一台虚拟机的安装1.3 第一台虚拟机的网络配置1.3.1 主机名和IP映射配置1.3.2 网络参数配置 1.4 第一台虚拟机的Java,Hadoop环境搭建1.4.1 Java环境搭建1.4.2 Hadoop环境搭建1、修改core-site.xml2、修改hdfs-site.xml，添加以下内容3、修改mapred-site.xml4、修改yarn-site.xml,添加以下内容5、修改 slaves文件 2、克隆另外两台虚拟机及网络配置2.1 克隆虚拟机2.2 克隆虚拟机网络配置 3、设置node-01到其余两台虚拟机的SSH免密登录3、格式化NameNode5、启动hadoop6、启动和关闭Hadoop集群6、通过UI查看Hadoop运行状态遇到的问题 Hadoop集群搭建，基于3.3.4hadoop Hadoop集群搭建，我这里采用的是Hadoop3.3.4，Jdk1.8，centos8,vmware16版本的。
1.虚拟机的创建 首先我们需要创建三台虚拟机,先创建第一台虚拟机，然后对第一台虚拟机进行配置（网络配置，免密配置，jdk,hadoop环境的安装），然后进行克隆，将第一台虚拟机克隆两个虚拟机出来，最后开始搭建集群。
一些目录说明 ：
/export/data/ :存放数据类的文件 /export/servers/ :存放服务类软件 /export/software/ :存放安装包文件 1.1 第一台虚拟机的创建 打开VMware进行第一台虚拟机的创建，点击新建虚拟机
选择典型，下一步
我这里因为提前已经准备好了centos8的镜像资源，所以直接将光盘驱动文件选择了，然后点击下一步
然后自定义虚拟机名称，已经安装的位置，我这里使用node-01（主虚拟机）作为第一台虚拟机的名称，然后点击下一步
磁盘空间默认20GB即可，下一步
点击自定义硬件，对虚拟机的内存和cpu进行一定的配置
这里我只将虚拟机的内存进行了更改，由默认的1GB改到了2GB,然后点击关闭
点击完成
1.2 第一台虚拟机的安装 然后进入到虚拟机安装的环节，通过上下键切换，选择Install Centos stream 8-stream
选择语言，中文，然后点击继续
选择root密码，对root账户的密码进行初始化设定
点击完成
接着我们再对网络进行配置，选择网络和主机名
将网络开启，然后设定主机名，并且应用，然后点击完成
然后选择时区，将时区设为ASia/Shanghai
点击完成
然后选择分区，默认分区也可以
然后进行软件的选择
因为我是小白，所以还是选择了带GUI图形界面的，然后选择网络服务器，传统的UNIX兼容性和基本的开发工具即可
然后开始安装即可，大概几分钟左右
点击重启系统即可
重新启动后，它会让你确认是否接受服务，选择接受即可，然后创建用户这项根据个人需求我就暂时不创建了。
初始界面，如下，第一台虚拟机搭建完毕
1.3 第一台虚拟机的网络配置 我们可以使用XShell来进行远程登录，使用Xftp来进行文件的传输和下载，我这里就不过多赘述，在我的另外一篇文章中都有详细的介绍。
(1条消息) Xshell和Xftp的下载和在linux虚拟机中的使用_xshell和xftp下载_杀死一只知更鸟debug的博客-CSDN博客
1.3.1 主机名和IP映射配置 配置主机名
vi /etc/sysconfig/network 将虚拟机主机名称设为 node-01,node-02,node-03" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b583d88651fe7d73edefa2d7e1bc6673/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-06T22:54:14+08:00" />
<meta property="article:modified_time" content="2023-03-06T22:54:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Hadoop集群搭建，基于3.3.4hadoop和centos8【图文教程-从零开始搭建Hadoop集群】，常见问题解决</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Hadoop集群搭建，基于3.3.4hadoop和centos8【小白图文教程-从零开始搭建Hadoop集群】，常见问题解决</h4> 
 <ul><li><a href="#Hadoop334hadoop_2" rel="nofollow">Hadoop集群搭建，基于3.3.4hadoop</a></li><li><a href="#1_8" rel="nofollow">1.虚拟机的创建</a></li><li><ul><li><a href="#11__26" rel="nofollow">1.1 第一台虚拟机的创建</a></li><li><a href="#12__98" rel="nofollow">1.2 第一台虚拟机的安装</a></li><li><a href="#13__195" rel="nofollow">1.3 第一台虚拟机的网络配置</a></li><li><ul><li><a href="#131_IP_201" rel="nofollow">1.3.1 主机名和IP映射配置</a></li><li><a href="#132__232" rel="nofollow">1.3.2 网络参数配置</a></li></ul> 
   </li><li><a href="#14_JavaHadoop_270" rel="nofollow">1.4 第一台虚拟机的Java,Hadoop环境搭建</a></li><li><ul><li><a href="#141_Java_272" rel="nofollow">1.4.1 Java环境搭建</a></li><li><a href="#142_Hadoop_349" rel="nofollow">1.4.2 Hadoop环境搭建</a></li><li><ul><li><a href="#1coresitexml_467" rel="nofollow">1、修改core-site.xml</a></li><li><a href="#2hdfssitexml_502" rel="nofollow">2、修改hdfs-site.xml，添加以下内容</a></li><li><a href="#3mapredsitexml_531" rel="nofollow">3、修改mapred-site.xml</a></li><li><a href="#4yarnsitexml_555" rel="nofollow">4、修改yarn-site.xml,添加以下内容</a></li><li><a href="#5_slaves_583" rel="nofollow">5、修改 slaves文件</a></li></ul> 
   </li></ul> 
   </li><li><a href="#2_596" rel="nofollow">2、克隆另外两台虚拟机及网络配置</a></li><li><ul><li><a href="#21__598" rel="nofollow">2.1 克隆虚拟机</a></li><li><a href="#22__627" rel="nofollow">2.2 克隆虚拟机网络配置</a></li></ul> 
   </li><li><a href="#3node01SSH_658" rel="nofollow">3、设置node-01到其余两台虚拟机的SSH免密登录</a></li><li><a href="#3NameNode_709" rel="nofollow">3、格式化NameNode</a></li><li><a href="#5hadoop_721" rel="nofollow">5、启动hadoop</a></li><li><a href="#6Hadoop_789" rel="nofollow">6、启动和关闭Hadoop集群</a></li><li><a href="#6UIHadoop_836" rel="nofollow">6、通过UI查看Hadoop运行状态</a></li><li><a href="#_874" rel="nofollow">遇到的问题</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="Hadoop334hadoop_2"></a>Hadoop集群搭建，基于3.3.4hadoop</h2> 
<p>Hadoop集群搭建，我这里采用的是Hadoop3.3.4，Jdk1.8，centos8,vmware16版本的。</p> 
<h2><a id="1_8"></a>1.虚拟机的创建</h2> 
<p>首先我们需要创建三台虚拟机,先创建第一台虚拟机，然后对第一台虚拟机进行配置（网络配置，免密配置，jdk,hadoop环境的安装），然后进行克隆，将第一台虚拟机克隆两个虚拟机出来，最后开始搭建集群。</p> 
<p>一些目录说明 ：</p> 
<pre><code class="prism language-shell">/export/data/ :存放数据类的文件
/export/servers/ :存放服务类软件
/export/software/ :存放安装包文件
</code></pre> 
<h3><a id="11__26"></a>1.1 第一台虚拟机的创建</h3> 
<p>打开VMware进行第一台虚拟机的创建，点击新建虚拟机</p> 
<p><img src="https://images2.imgbox.com/82/75/gwPV9UQ5_o.png" alt="在这里插入图片描述"></p> 
<p>选择典型，下一步</p> 
<p><img src="https://images2.imgbox.com/42/17/7isllqVM_o.png" alt="在这里插入图片描述"></p> 
<p>我这里因为提前已经准备好了centos8的镜像资源，所以直接将光盘驱动文件选择了，然后点击下一步</p> 
<p><img src="https://images2.imgbox.com/41/dd/iKkUm1aV_o.png" alt="在这里插入图片描述"></p> 
<p>然后自定义虚拟机名称，已经安装的位置，我这里使用node-01（主虚拟机）作为第一台虚拟机的名称，然后点击下一步</p> 
<p><img src="https://images2.imgbox.com/33/b0/8vNwYHT8_o.png" alt="在这里插入图片描述"></p> 
<p>磁盘空间默认20GB即可，下一步</p> 
<p><img src="https://images2.imgbox.com/88/e4/NmficyG9_o.png" alt="在这里插入图片描述"></p> 
<p>点击自定义硬件，对虚拟机的内存和cpu进行一定的配置</p> 
<p><img src="https://images2.imgbox.com/8f/2e/5dgiRJjY_o.png" alt="在这里插入图片描述"></p> 
<p>这里我只将虚拟机的内存进行了更改，由默认的1GB改到了2GB,然后点击关闭</p> 
<p><img src="https://images2.imgbox.com/2b/4b/WoKaDwx4_o.png" alt="在这里插入图片描述"></p> 
<p>点击完成</p> 
<p><img src="https://images2.imgbox.com/4b/c2/sgm7TDsq_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12__98"></a>1.2 第一台虚拟机的安装</h3> 
<p>然后进入到虚拟机安装的环节，通过上下键切换，选择Install Centos stream 8-stream</p> 
<p><img src="https://images2.imgbox.com/8d/6e/2gHCHd2X_o.png" alt="在这里插入图片描述"></p> 
<p>选择语言，中文，然后点击继续</p> 
<p><img src="https://images2.imgbox.com/e4/a7/oAozfD4n_o.png" alt="在这里插入图片描述"></p> 
<p>选择root密码，对root账户的密码进行初始化设定</p> 
<p><img src="https://images2.imgbox.com/40/29/p1HXAfyI_o.png" alt="在这里插入图片描述"></p> 
<p>点击完成</p> 
<p><img src="https://images2.imgbox.com/cf/d9/GNJp4eWX_o.png" alt=""></p> 
<p>接着我们再对网络进行配置，选择网络和主机名</p> 
<p><img src="https://images2.imgbox.com/9c/95/kMOgVG7G_o.png" alt="在这里插入图片描述"></p> 
<p>将网络开启，然后设定主机名，并且应用，然后点击完成</p> 
<p><img src="https://images2.imgbox.com/9e/1f/wbz6c2Bz_o.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-SCi6iw8q-1678112318718)(C:\Users\robin\AppData\Roaming\Typora\typora-user-images\image-20230306143654062.png)]"></p> 
<p>然后选择时区，将时区设为ASia/Shanghai</p> 
<p><img src="https://images2.imgbox.com/a9/e2/SdW8zQZ8_o.png" alt="在这里插入图片描述"></p> 
<p>点击完成</p> 
<p><img src="https://images2.imgbox.com/6c/6d/BFyGaiYW_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/18/82/4uZ6YY4B_o.png" alt="在这里插入图片描述"></p> 
<p>然后选择分区，默认分区也可以</p> 
<p><img src="https://images2.imgbox.com/0c/3d/LYVyF0Fw_o.png" alt="在这里插入图片描述"></p> 
<p>然后进行软件的选择</p> 
<p><img src="https://images2.imgbox.com/56/21/f5RmDIpg_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/82/fd/y8f0kJst_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/57/48/gA4kSScp_o.png" alt="在这里插入图片描述"></p> 
<p>因为我是小白，所以还是选择了带GUI图形界面的，然后选择网络服务器，传统的UNIX兼容性和基本的开发工具即可</p> 
<p>然后开始安装即可，大概几分钟左右<br> <img src="https://images2.imgbox.com/af/b1/0zk6585d_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/45/8a/9gvzkpVO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9a/d1/wZpqSt1z_o.png" alt="在这里插入图片描述"></p> 
<p>点击重启系统即可</p> 
<p><img src="https://images2.imgbox.com/c8/d3/KS878mq7_o.png" alt="在这里插入图片描述"></p> 
<p>重新启动后，它会让你确认是否接受服务，选择接受即可，然后创建用户这项根据个人需求我就暂时不创建了。</p> 
<p><img src="https://images2.imgbox.com/b0/01/qt61LSZ8_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/db/37/O9PcEd02_o.png" alt="在这里插入图片描述"></p> 
<p>初始界面，如下，第一台虚拟机搭建完毕</p> 
<p><img src="https://images2.imgbox.com/25/ab/W5Jgo6wa_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13__195"></a>1.3 第一台虚拟机的网络配置</h3> 
<p>我们可以使用XShell来进行远程登录，使用Xftp来进行文件的传输和下载，我这里就不过多赘述，在我的另外一篇文章中都有详细的介绍。</p> 
<p><a href="https://blog.csdn.net/m0_63622279/article/details/129027903">(1条消息) Xshell和Xftp的下载和在linux虚拟机中的使用_xshell和xftp下载_杀死一只知更鸟debug的博客-CSDN博客</a></p> 
<h4><a id="131_IP_201"></a>1.3.1 主机名和IP映射配置</h4> 
<p>配置主机名</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/sysconfig/network
</code></pre> 
<p>将虚拟机主机名称设为 node-01,node-02,node-03</p> 
<p><img src="https://images2.imgbox.com/69/1e/6C6dhWQV_o.png" alt="在这里插入图片描述"></p> 
<p>配置IP映射</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/hosts
</code></pre> 
<p>将IP地址与主机名，进行关联,对/etc/hosts文件进行下面的添加</p> 
<pre><code class="prism language-shell"><span class="token number">192.168</span>.197.133 node-01
<span class="token number">192.168</span>.197.134 node-02
<span class="token number">192.168</span>.197.135 node-03
</code></pre> 
<p><img src="https://images2.imgbox.com/f3/0d/dSUZ3l3V_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="132__232"></a>1.3.2 网络参数配置</h4> 
<p>修改IP地址</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/sysconfig/network-scripts/ifcfg-ens33 
</code></pre> 
<p>默认配置如下图</p> 
<p><img src="https://images2.imgbox.com/69/3b/8wZFTZyb_o.png" alt="在这里插入图片描述"></p> 
<p>将BOOTPROTO的值改为static，静态路由协议，保持IP的固定</p> 
<pre><code class="prism language-shell"><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>static

<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.197.133
<span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token number">192.168</span>.197.2
<span class="token assign-left variable">NETMASK</span><span class="token operator">=</span><span class="token number">255.255</span>.255.0
<span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token number">8.8</span>.8.8
</code></pre> 
<p><img src="https://images2.imgbox.com/48/e3/j77swJ56_o.png" alt="在这里插入图片描述"></p> 
<p>重启网络配置使其生效</p> 
<pre><code class="prism language-shell"><span class="token function">service</span> network restart
</code></pre> 
<p>然后可以使用 ifconfig指令查看网络是否配置成功。</p> 
<h3><a id="14_JavaHadoop_270"></a>1.4 第一台虚拟机的Java,Hadoop环境搭建</h3> 
<h4><a id="141_Java_272"></a>1.4.1 Java环境搭建</h4> 
<p>去到Java的官网，然后下载对应的Linux版本的Jdk</p> 
<p><img src="https://images2.imgbox.com/cc/ab/ffzOSgvY_o.png" alt="在这里插入图片描述"></p> 
<p>创建一个目录，用于存放java的环境,上面已经说过了，要将软件包存放到/export/software文件夹中</p> 
<pre><code class="prism language-shell"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /export/data/ <span class="token comment"># 存放数据类的文件</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /export/servers/ <span class="token comment"># 存放服务类软件</span>
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /export/software/ <span class="token comment">#存放安装包文件</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/9b/8c/xK7mpEV4_o.png" alt="在这里插入图片描述"></p> 
<p>将Jdk通过Xftp传入到Linux虚拟机上刚刚创建的目录下，然后进行解压安装及环境配置</p> 
<p><img src="https://images2.imgbox.com/fb/10/11dMC8IW_o.png" alt="在这里插入图片描述"></p> 
<p>接着切换到java目录下，对压缩包进行解压</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/software <span class="token comment"># 切换目录</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> jdk-8u141-linux-x64.tar.gz -C/export/servers <span class="token comment"># 解压</span>
</code></pre> 
<p>配置Java的环境变量，用vi 打开/etc/profile 文件进行配置</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/profile
</code></pre> 
<p>将下面的配置信息，写入到 /etc/profile目录中（注意你安装的Java版本及解压的名称）。</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/export/servers/jdk1.8.0_141
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar
</code></pre> 
<p><img src="https://images2.imgbox.com/b9/b7/csHGUUtq_o.png" alt="在这里插入图片描述"></p> 
<p>然后保存退出 <code>Esc : wq</code></p> 
<p>接着重新加载配置文件：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p>然后输入</p> 
<pre><code class="prism language-shell"><span class="token function">java</span> <span class="token parameter variable">-version</span>
</code></pre> 
<p>此时就可以看到Java环境安装好啦</p> 
<p><img src="https://images2.imgbox.com/0a/5a/9ZBjcAu9_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="142_Hadoop_349"></a>1.4.2 Hadoop环境搭建</h4> 
<p>同样，安装Linux中的Hadoop环境，先需要去其官网下载对应的Hadoop版本 <a href="https://hadoop.apache.org/" rel="nofollow">Apache Hadoop</a></p> 
<p><img src="https://images2.imgbox.com/09/61/LQnTb2pA_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/92/a7/gKX40GHD_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/3f/ed/zF1QhaCh_o.png" alt="在这里插入图片描述"></p> 
<p>找到压缩包后，将其传输到Linux虚拟机中的 /export/software 目录下，我这里使用的是最新的hadoop3.3.4</p> 
<p><a href="https://www.apache.org/dyn/closer.cgi/hadoop/common/hadoop-3.3.4/hadoop-3.3.4.tar.gz" rel="nofollow">Apache Downloads</a></p> 
<p><img src="https://images2.imgbox.com/44/f6/rXrhhtkh_o.png" alt="在这里插入图片描述"></p> 
<p>然后解压该压缩包到 /export/servers 目录下</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/software
<span class="token comment">#如果不存在 modules目录则进行创建 mkdir modules</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> hadoop-3.3.4.tar.gz <span class="token parameter variable">-C</span> /export/servers
</code></pre> 
<p>接着开始对 /etc/profile 开始配置hadoop系统环境</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/profile
</code></pre> 
<p>将下面的内容插入到 /etc/profile 的底部</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/export/servers/hadoop-3.3.4
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_CONF_DIR</span><span class="token operator">=</span><span class="token variable">$HADOOP_HOME</span>/etc/hadoop
</code></pre> 
<p><img src="https://images2.imgbox.com/22/1a/JyZviSUA_o.png" alt="在这里插入图片描述"></p> 
<p>然后保存退出 <code>Esc : wq</code></p> 
<p>同样需要重新加载一下配置文件使其生效</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">source</span> /etc/profile
</code></pre> 
<p>输入<code>hadoop -version</code>，查看其输出，可见此时hadoop已经安装完毕</p> 
<p><img src="https://images2.imgbox.com/e6/7d/3qVDNsdl_o.png" alt="在这里插入图片描述"></p> 
<p><strong>配置环境变量：</strong></p> 
<p>hadoop所有配置文件都存在安装目录下的/etc/hadoop目录中（我这里是**/export/servers/hadoop-3.3.4/etc/hadoop**），在该目录下的hadoop-env.sh、mapred-env.sh、yarn-env.sh中添加JAVA_HOME环境变量：</p> 
<pre><code class="prism language-text">export JAVA_HOME=/export/servers/jdk1.8.0_141
</code></pre> 
<p>如下图：</p> 
<p>进入到其安装目录下的/etc/hadoop的目录中，然后对hadoop-env.sh、mapred-env.sh、yarn-env.sh中添加JAVA_HOME环境变量</p> 
<p><img src="https://images2.imgbox.com/5f/5b/OAWDgtz8_o.png" alt="在这里插入图片描述"></p> 
<p><strong>1. 修改hadoop-env.sh</strong></p> 
<pre><code class="prism language-she">vi hadoop-env.sh
</code></pre> 
<p>找到 export JAVA_HOME 然后添加/export/servers/javajdk1.8.0_141（<strong>jdk目录位置</strong>）</p> 
<p><img src="https://images2.imgbox.com/eb/b6/bTomNBQR_o.png" alt="在这里插入图片描述"></p> 
<p>然后保存退出 <code>Esc :wq</code></p> 
<p><strong>yarn-env.sh</strong></p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> yarn-env.sh
</code></pre> 
<p><img src="https://images2.imgbox.com/71/d0/c0UXLOKB_o.png" alt="在这里插入图片描述"></p> 
<p>保存退出</p> 
<h5><a id="1coresitexml_467"></a>1、修改core-site.xml</h5> 
<p>Hadoop的核心配置文件，其目的是配置HdFS地址，端口号，以及临时文件目录</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> core-site.xml <span class="token comment"># 使用vi对其xml进行配置</span>
</code></pre> 
<p>添加以下内容</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 配置Hadoop 的临时目录 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file:/export/servers/hadoop-3.3.4/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- 配置Hadoop的文件系统，由URI指定 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 这里我之前配置过主机名和IP映射所以写成主机名即可，
		没配置过的话，写完整的IP地址即可 192.168.197.133
	--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://node-01:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>参数说明：</p> 
<ul><li>fs.defaultFS：默认文件系统，HDFS的客户端访问HDFS需要此参数</li><li>hadoop.tmp.dir：指定Hadoop数据存储的临时目录，其它目录会基于此路径, 建议设置到一个足够空间的地方，而不是默认的/tmp下</li></ul> 
<p><img src="https://images2.imgbox.com/7e/c8/J7I8eseC_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2hdfssitexml_502"></a>2、修改hdfs-site.xml，添加以下内容</h5> 
<pre><code class="prism language-shell"><span class="token function">vi</span> hdfs-site.xml 
</code></pre> 
<p>hdfs-site.xml 用于设置HDFS的NameNode和DataNode两大进程</p> 
<pre><code class="prism language-xml"><span class="token comment">&lt;!-- 指定hdfs副本的数量 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.replication<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- secondary 所在的主机IP和端口号  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.secondary.http-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node-02:50090<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>参数说明：</p> 
<ul><li>dfs.replication：数据块副本数 - dfs.name.dir：指定namenode节点的文件存储目录</li><li>dfs.data.dir：指定datanode节点的文件存储目录</li></ul> 
<p><img src="https://images2.imgbox.com/6a/20/RnGLa2Mp_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3mapredsitexml_531"></a>3、修改mapred-site.xml</h5> 
<p>mapred-site.xml是MapReduce的核心配置文件，用于指定MapReduce运行时框架。</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> marped-site.xml
</code></pre> 
<p>添加以下内容</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
	  <span class="token comment">&lt;!-- 指定MapReduce运行时框架，指定yarn，默认是local --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/a6/9a/OBFVTRcb_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="4yarnsitexml_555"></a>4、修改yarn-site.xml,添加以下内容</h5> 
<p>yarn-site.xml是YARN框架的核心配置文件，需要指定YARN集群的管理者。</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> yarn-site.xml
</code></pre> 
<p>添加如下配置：</p> 
<pre><code class="prism language-xml">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 指定YARN集群的管理者Resoucemanage的地址--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node-01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>参数说明：</p> 
<p>- yarn.nodemanager.aux-services：NodeManager上运行的附属服务，需配置成mapreduce_shuffle才可以运行Mapreduce程序。yarn提供了该配置用于在nodemanager上扩展自定已服务，MapReduce的Shuffle功能正式一种扩展服务。</p> 
<p><img src="https://images2.imgbox.com/cf/e1/AldYZufd_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="5_slaves_583"></a>5、修改 slaves文件</h5> 
<p>slaves文件用于记录Hadoop集群的所有从节点（HDFSde DataNode 和 YARN 的 NodeManager所在主机）的主机名，用来配合一键启动脚本集群从节点（保证配置了SSH免密登录）。打开该配置文件，先删除里面的默认内容（localhost），然后配置如下内容</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> slaves

<span class="token comment"># 添加如下内容</span>
node-01
node-02
node-03
</code></pre> 
<h3><a id="2_596"></a>2、克隆另外两台虚拟机及网络配置</h3> 
<h4><a id="21__598"></a>2.1 克隆虚拟机</h4> 
<p>右键，选择管理，然后点击克隆</p> 
<p>流程如下：<br> <img src="https://images2.imgbox.com/b6/c5/XDOoYFQD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3e/93/qiKqCxZn_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a9/66/JyyrcUJu_o.png" alt="在这里插入图片描述"></p> 
<p>选择完整克隆，点击下一步</p> 
<p><img src="https://images2.imgbox.com/6f/80/yVh7vm68_o.png" alt="在这里插入图片描述"></p> 
<p>虚拟机名称和位置，自定义</p> 
<p><img src="https://images2.imgbox.com/a4/cd/jW7aW5ZS_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/c6/c2/rjo1O78R_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/da/ce/dQp1MIrk_o.png" alt="在这里插入图片描述"></p> 
<p>此时第二台虚拟机已经克隆完毕，接着我们再以相同的方式克隆第三台虚拟机node-03</p> 
<h4><a id="22__627"></a>2.2 克隆虚拟机网络配置</h4> 
<p>配置主机名</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/sysconfig/network
<span class="token comment"># 或者使用 </span>
hostnamectl set-hostname 主机名
</code></pre> 
<p>主机名配置后，使用reboot指令进行重启才会生效</p> 
<p>将新克隆的虚拟机主机名称分别设为 node-02,node-03</p> 
<p>修改IP地址</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> /etc/sysconfig/network-scripts/ifcfg-ens33 
</code></pre> 
<p>修改IPADDR即可</p> 
<p>node-02 对应 192.168.197.134</p> 
<p>node-03 对应 192.168.197.135</p> 
<p><img src="https://images2.imgbox.com/94/09/PNCnrxj8_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3node01SSH_658"></a>3、设置node-01到其余两台虚拟机的SSH免密登录</h3> 
<p>1、在各个节点中生成密钥文件</p> 
<pre><code class="prism language-text">$ cd ~/.ssh/    # 若没有该目录，执行ssh localhsot
$ ssh-keygen -t rsa  # 生成密钥文件，提示输出加密信息，一直回车即可
</code></pre> 
<p><img src="https://images2.imgbox.com/48/73/NJBy21cU_o.png" alt="在这里插入图片描述"></p> 
<p><strong>tip:如果提示说不存在ssh目录，直接执行 ssh-keygen -t rsa 即可</strong></p> 
<p>2、分别在三个节点中心以下命令，将公钥信息复制并追加到对方节点的授权文件authorized.key中</p> 
<pre><code class="prism language-text">$ ssh-copy-id node-01
$ ssh-copy-id node-02
$ ssh-copy-id node-03
</code></pre> 
<p>这里记得将每个虚拟机开启，然后在远程登录软件中进行免密配置</p> 
<p><img src="https://images2.imgbox.com/ed/35/Xa6rPz5K_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/19/ef/UnmoogAo_o.png" alt="在这里插入图片描述"></p> 
<p>3、修改授权文件权限</p> 
<pre><code class="prism language-text">$ chmod 700 ~/.ssh
$ chmod 600 ~/.ssh/authorized_keys
</code></pre> 
<p>4、测试无密钥登陆</p> 
<pre><code class="prism language-shell"><span class="token function">ssh</span> node-02
<span class="token builtin class-name">exit</span>
<span class="token function">ssh</span> node-03
<span class="token builtin class-name">exit</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/59/f0/7ciZPpV6_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3NameNode_709"></a>3、格式化NameNode</h3> 
<p><strong>在主节点进行格式化即可（node-01）</strong>，启动Hadoop之前需要格式化NameNode，格式化NameNode可以初始化HDFS文件系统的一些目录和文件，在node-01上执行:</p> 
<pre><code class="prism language-text"># 必须在NameNode节点上进行format操作
$ hadoop namenode -format
</code></pre> 
<h3><a id="5hadoop_721"></a>5、启动hadoop</h3> 
<pre><code class="prism language-text"># 启动hadoop
$ start-all.sh  

# 停止hadoop
$ stop-all.sh  

# 查看节点角色
$ jps
</code></pre> 
<p>启动 Hadoop 服务时权限异常，strat-all .sh</p> 
<pre><code class="prism language-txt">Starting namenodes on [node-01]
ERROR: Attempting to operate on hdfs namenode as root
ERROR: but there is no HDFS_NAMENODE_USER defined. Aborting operation.
Starting datanodes
ERROR: Attempting to operate on hdfs datanode as root
ERROR: but there is no HDFS_DATANODE_USER defined. Aborting operation.
Starting secondary namenodes [node-02]
ERROR: Attempting to operate on hdfs secondarynamenode as root
ERROR: but there is no HDFS_SECONDARYNAMENODE_USER defined. Aborting operation.
Starting resourcemanager
ERROR: Attempting to operate on yarn resourcemanager as root
ERROR: but there is no YARN_RESOURCEMANAGER_USER defined. Aborting operation.
Starting nodemanagers
ERROR: Attempting to operate on yarn nodemanager as root
ERROR: but there is no YARN_NODEMANAGER_USER defined. Aborting operation.
</code></pre> 
<p>如果出现<strong>没有定义HDFS_NAMENODE_USER</strong></p> 
<p>则在环境变量中在添加：</p> 
<p>1.进入环境变量</p> 
<pre><code class="prism language-shell"><span class="token function">vi</span> ~/.bash_profile
</code></pre> 
<p>2.添加：</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable">HDFS_NAMENODE_USER</span><span class="token operator">=</span>root
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HDFS_DATANODE_USER</span><span class="token operator">=</span>root
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HDFS_JOURNALNODE_USER</span><span class="token operator">=</span>root
<span class="token builtin class-name">export</span> <span class="token assign-left variable">HDFS_SECONDARYNAMENODE_USER</span><span class="token operator">=</span>root
<span class="token builtin class-name">export</span> <span class="token assign-left variable">YARN_RESOURCEMANAGER_USER</span><span class="token operator">=</span>root
<span class="token builtin class-name">export</span> <span class="token assign-left variable">YARN_NODEMANAGER_USER</span><span class="token operator">=</span>root
</code></pre> 
<p><img src="https://images2.imgbox.com/52/b1/ijpREKdU_o.png" alt="在这里插入图片描述"></p> 
<p>3.环境变量生效</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> ~/.bash_profile
</code></pre> 
<h3><a id="6Hadoop_789"></a>6、启动和关闭Hadoop集群</h3> 
<p>1.单节点逐个启动和关闭</p> 
<p>主节点启动HDFS NameNode节点</p> 
<pre><code class="prism language-shell">hadoop-daemon.sh start namenode
</code></pre> 
<p>从节点启动HDFS DataNode节点</p> 
<pre><code class="prism language-shell">hadoop-daemon.sh start datanode
</code></pre> 
<p>主节点启动YARNResourceManager进程</p> 
<pre><code class="prism language-shell">yarn-daemon.sh start resourcemanager
</code></pre> 
<p>从节点上启动YARN nodemanager进程</p> 
<pre><code class="prism language-shell">yarn-daemon.sh start nodemanager
</code></pre> 
<p>规划节点node-02启动SecondaryNameNode进程</p> 
<pre><code class="prism language-shell">hadoop-daemon.sh start secondarynamenode
</code></pre> 
<p>停止则使用stop替换掉start即可</p> 
<p>2.脚本一键启动和关闭</p> 
<pre><code class="prism language-shell">start-dfs.sh
start-yarn.sh
</code></pre> 
<p>这个需要在配置了slaves文件和SSH免密登录（双向的免密登录，即从节点的虚拟机也需要进行SSH免密配置）</p> 
<h3><a id="6UIHadoop_836"></a>6、通过UI查看Hadoop运行状态</h3> 
<p>在windows下的<code>C:\Windows\System32\drivers\etc</code>中的hosts文件添加集群服务的IP映射</p> 
<pre><code class="prism language-shell"><span class="token number">192.168</span>.197.133 node-01
<span class="token number">192.168</span>.197.134 node-02
<span class="token number">192.168</span>.197.135 node-03
</code></pre> 
<p><img src="https://images2.imgbox.com/49/ac/ghp0tuM7_o.png" alt="在这里插入图片描述"></p> 
<p>注意先关闭防火墙，然后再进行测试查看运行状态</p> 
<p>一下指令需要对主从节点都进行更改：</p> 
<pre><code class="prism language-shell">systemctl stop firewalld

systemctl status firewalld

systemctl disable firewalld

systemctl <span class="token builtin class-name">enable</span> firewalld
</code></pre> 
<p>此时我们可以从windows的窗口进行查看了 <code>http://node-01:50090(集群服务IP+端口号)</code>和<code>htpp://node-01:8088 </code>查看YARN和HFDS的集群状态。</p> 
<p><img src="https://images2.imgbox.com/7f/37/bFGQ1vFc_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/27/02/s0NiUlFF_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_874"></a>遇到的问题</h3> 
<p>以下纯属个人问题，已在文章中改了正确的配置：</p> 
<p>这里我报错了</p> 
<pre><code class="prism language-txt">log4j:WARN No appenders could be found for logger (org.apache.hadoop.conf.Configuration).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
Exception in thread "Thread-2" java.lang.RuntimeException: com.ctc.wstx.exc.WstxParsingException: Unexpected close tag &lt;/property&gt;; expected &lt;/configuration&gt;.
 at [row,col,system-id]: [25,10,"file:/export/servers/hadoop-3.3.4/etc/hadoop/mapred-site.xml"]
	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:3092)
	at org.apache.hadoop.conf.Configuration.loadResources(Configuration.java:3036)
	at org.apache.hadoop.conf.Configuration.loadProps(Configuration.java:2914)
	at org.apache.hadoop.conf.Configuration.getProps(Configuration.java:2896)
	at org.apache.hadoop.conf.Configuration.get(Configuration.java:1246)
	at org.apache.hadoop.conf.Configuration.getTimeDuration(Configuration.java:1863)
	at org.apache.hadoop.conf.Configuration.getTimeDuration(Configuration.java:1840)
	at org.apache.hadoop.util.ShutdownHookManager.getShutdownTimeout(ShutdownHookManager.java:183)
	at org.apache.hadoop.util.ShutdownHookManager.shutdownExecutor(ShutdownHookManager.java:145)
	at org.apache.hadoop.util.ShutdownHookManager.access$300(ShutdownHookManager.java:65)
	at org.apache.hadoop.util.ShutdownHookManager$1.run(ShutdownHookManager.java:102)
Caused by: com.ctc.wstx.exc.WstxParsingException: Unexpected close tag &lt;/property&gt;; expected &lt;/configuration&gt;.
 at [row,col,system-id]: [25,10,"file:/export/servers/hadoop-3.3.4/etc/hadoop/mapred-site.xml"]
	at com.ctc.wstx.sr.StreamScanner.constructWfcException(StreamScanner.java:634)
	at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:504)
	at com.ctc.wstx.sr.StreamScanner.throwParseError(StreamScanner.java:488)
	at com.ctc.wstx.sr.BasicStreamReader.reportWrongEndElem(BasicStreamReader.java:3352)
	at com.ctc.wstx.sr.BasicStreamReader.readEndElem(BasicStreamReader.java:3279)
	at com.ctc.wstx.sr.BasicStreamReader.nextFromTree(BasicStreamReader.java:2900)
	at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1121)
	at org.apache.hadoop.conf.Configuration$Parser.parseNext(Configuration.java:3396)
	at org.apache.hadoop.conf.Configuration$Parser.parse(Configuration.java:3182)
	at org.apache.hadoop.conf.Configuration.loadResource(Configuration.java:3075)
	... 10 more
</code></pre> 
<p>提示我说：</p> 
<pre><code class="prism language-txt">/export/servers/hadoop-3.3.4/etc/hadoop/mapred-site.xml 这里配置有问题去看看
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/9b/3EHnuKAo_o.png" alt="在这里插入图片描述"></p> 
<p>多了一个poperty结束标记。。。</p> 
<p>第二个问题 <strong>namenode格式化失败：java.lang.IllegalArgumentException: URI has an authority component</strong>：</p> 
<pre><code class="prism language-txt">java.lang.IllegalArgumentException: URI has an authority component
	at java.io.File.&lt;init&gt;(File.java:423)
	at org.apache.hadoop.hdfs.server.namenode.NNStorage.getStorageDirectory(NNStorage.java:353)
	at org.apache.hadoop.hdfs.server.namenode.FSEditLog.initJournals(FSEditLog.java:293)
	at org.apache.hadoop.hdfs.server.namenode.FSEditLog.initJournalsForWrite(FSEditLog.java:264)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.format(NameNode.java:1257)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1726)
	at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1834)
2023-03-06 20:47:32,697 INFO util.ExitUtil: Exiting with status 1: java.lang.IllegalArgumentException: URI has an authority component

</code></pre> 
<p>解决方案，是core-site.xml中的一个配置好像不太一样，3.x和2.x不太一样</p> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> /export/servers/hadoop-3.3.4/etc/hadoop/
<span class="token function">vi</span> core-site.xml
</code></pre> 
<p>我的配置是：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 配置Hadoop 的临时目录 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>file:/export/servers/hadoop-3.3.4/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- 配置Hadoop的文件系统，由URI指定 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 这里我之前配置过主机名和IP映射所以写成主机名即可，
                没配置过的话，写完整的IP地址即可 192.168.197.133
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://node-01:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>正确的配置应为：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 配置Hadoop 的临时目录 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/export/servers/hadoop-3.3.4/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- 配置Hadoop的文件系统，由URI指定 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 这里我之前配置过主机名和IP映射所以写成主机名即可，
                没配置过的话，写完整的IP地址即可 192.168.197.133
        --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://node-01:9000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bbce3e30f37d6309c6a70cdace02caf1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">（小甲鱼python）函数笔记合集七 函数(IX)总结 python实现汉诺塔详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bbc7ef340989d8d498446f8661cc798c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">springboot&#43;springsecurity&#43;mybatis&#43;jwt实现单点登录（详细到爆了）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>