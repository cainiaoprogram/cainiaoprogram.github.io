<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>原生ajax的post方法,原生js实现ajax及get post方法 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="原生ajax的post方法,原生js实现ajax及get post方法" />
<meta property="og:description" content="ajax原生实现，含 post与get方法。原码如下:
/*
* ajax
* type === GET: data格式 name=baukh&amp;age=29
* type === POST: data格式 { name: &#39;baukh&#39;, age:29 }
* 与 jquery 不同的是,[success, error, complete]返回的第二个参数, 并不是返回错误信息, 而是错误码
* */
var extend = require(&#39;./extend&#39;);
var utilities = require(&#39;./utilities&#39;);
function ajax(options) {
var defaults = {
url: null,// 请求地址
type: &#39;GET&#39;,// 请求类型
data: null,// 传递数据
headers: {},// 请求头信息
async: true,// 是否异步执行
beforeSend: utilities.noop,// 请求发送前执行事件
complete: utilities.noop,// 请求发送后执行事件
success: utilities.noop,// 请求成功后执行事件" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/74e940778f758165ebfd4285a6599b4e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-06T20:27:08+08:00" />
<meta property="article:modified_time" content="2021-08-06T20:27:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">原生ajax的post方法,原生js实现ajax及get post方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>ajax原生实现，含 post与get方法。原码如下:</p> 
 <p>/*</p> 
 <p>* ajax</p> 
 <p>* type === GET: data格式 name=baukh&amp;age=29</p> 
 <p>* type === POST: data格式 { name: 'baukh', age:29 }</p> 
 <p>* 与 jquery 不同的是,[success, error, complete]返回的第二个参数, 并不是返回错误信息, 而是错误码</p> 
 <p>* */</p> 
 <p>var extend = require('./extend');</p> 
 <p>var utilities = require('./utilities');</p> 
 <p>function ajax(options) {<!-- --></p> 
 <p>var defaults = {<!-- --></p> 
 <p>url: null,// 请求地址</p> 
 <p>type: 'GET',// 请求类型</p> 
 <p>data: null,// 传递数据</p> 
 <p>headers: {},// 请求头信息</p> 
 <p>async: true,// 是否异步执行</p> 
 <p>beforeSend: utilities.noop,// 请求发送前执行事件</p> 
 <p>complete: utilities.noop,// 请求发送后执行事件</p> 
 <p>success: utilities.noop,// 请求成功后执行事件</p> 
 <p>error: utilities.noop// 请求失败后执行事件</p> 
 <p>};</p> 
 <p>options = extend(defaults, options);</p> 
 <p>if (!options.url) {<!-- --></p> 
 <p>utilities.error('jTool ajax: url不能为空');</p> 
 <p>return;</p> 
 <p>}</p> 
 <p>var xhr = new XMLHttpRequest();</p> 
 <p>var formData = '';</p> 
 <p>if (utilities.type(options.data) === 'object') {<!-- --></p> 
 <p>utilities.each(options.data, function (key, value) {<!-- --></p> 
 <p>if(formData !== '') {<!-- --></p> 
 <p>formData += '&amp;';</p> 
 <p>}</p> 
 <p>formData += key + '=' + value;</p> 
 <p>});</p> 
 <p>}else {<!-- --></p> 
 <p>formData = options.data;</p> 
 <p>}</p> 
 <p>if(options.type === 'GET' &amp;&amp; formData) {<!-- --></p> 
 <p>options.url = options.url + (options.url.indexOf('?') === -1 ? '?' : '&amp;') + formData;</p> 
 <p>formData = null;</p> 
 <p>}</p> 
 <p>xhr.open(options.type, options.url, options.async);</p> 
 <p>for (var key in options.headers) {<!-- --></p> 
 <p>xhr.setRequestHeader(key, options.headers[key]);</p> 
 <p>}</p> 
 <p>// xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");</p> 
 <p>// 执行发送前事件</p> 
 <p>options.beforeSend(xhr);</p> 
 <p>// 监听onload并执行完成事件</p> 
 <p>xhr.onload = function() {<!-- --></p> 
 <p>// jquery complete(XHR, TS)</p> 
 <p>options.complete(xhr, xhr.status);</p> 
 <p>};</p> 
 <p>// 监听onreadystatechange并执行成功失败事件</p> 
 <p>xhr.onreadystatechange = function() {<!-- --></p> 
 <p>if (xhr.readyState !== 4) {<!-- --></p> 
 <p>return;</p> 
 <p>}</p> 
 <p>if (xhr.status &gt;= 200 &amp;&amp; xhr.status &lt; 300 || xhr.status === 304) {<!-- --></p> 
 <p>// jquery success(XHR, TS)</p> 
 <p>options.success(xhr.response, xhr.status);</p> 
 <p>} else {<!-- --></p> 
 <p>// jquery error(XHR, TS, statusText)</p> 
 <p>options.error(xhr, xhr.status, xhr.statusText);</p> 
 <p>}</p> 
 <p>};</p> 
 <p>xhr.send(formData);</p> 
 <p>}</p> 
 <p>function post(url, data, callback) {<!-- --></p> 
 <p>ajax({ url: url, type: 'POST', data: data, success: callback });</p> 
 <p>}</p> 
 <p>function get(url, data, callback) {<!-- --></p> 
 <p>ajax({ url: url, type: 'GET', data: data, success: callback });</p> 
 <p>}</p> 
 <p>module.exports = {<!-- --></p> 
 <p>ajax: ajax,</p> 
 <p>post: post,</p> 
 <p>get: get</p> 
 <p>};</p> 
 <p>代码中调用了 extend与 utilities类，如果想了解更多，请关注jTool</p> 
 <p>《野生前端工程师》专辑中所有文章均为@拭目以待 原创，转载请注明出处。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/035b49f375b96cf69d783075f226f59d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">京东云无线宝可以服务器吗,京东云无线宝哪种上网方式收益最高，这点你一定得知道...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b97b3debd5c1bbca179de18e85a008d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">服务器整机性能测试实验室,运行 Project Server 2010 性能测试实验室</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>