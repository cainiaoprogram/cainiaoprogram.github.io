<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python opencv入门 轮廓特征（18） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python opencv入门 轮廓特征（18）" />
<meta property="og:description" content="内容来自OpenCV-Python Tutorials 自己翻译整理
目标 轮廓的面积、周长、重心、边界 相关函数
矩 图像矩可以计算图像的质心，面积等等。 图像的矩
函数 cv2.moments()会计算图像的矩，并返回一个字典 （findContours应该返回三个参数，样例里的代码只返回两个，报错了）
import cv2 import numpy as np img = cv2.imread(&#39;3.jpg&#39;,0) ret,thresh = cv2.threshold(img,127,255,0) img,contours,hierarchy = cv2.findContours(thresh, 1, 2) cnt = contours[0] M = cv2.moments(cnt) print(M) 结果
{&#39;m00&#39;: 0.0, &#39;m10&#39;: 0.0, &#39;m01&#39;: 0.0, &#39;m20&#39;: 0.0, &#39;m11&#39;: 0.0, &#39;m02&#39;: 0.0, &#39;m30&#39;: 0.0, &#39;m21&#39;: 0.0, &#39;m12&#39;: 0.0, &#39;m03&#39;: 0.0, &#39;mu20&#39;: 0.0, &#39;mu11&#39;: 0.0, &#39;mu02&#39;: 0.0, &#39;mu30&#39;: 0.0, &#39;mu21&#39;: 0.0, &#39;mu12&#39;: 0.0, &#39;mu03&#39;: 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/40df49f367c051cf1f41a2bcb8ee84c2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-08-03T15:50:49+08:00" />
<meta property="article:modified_time" content="2017-08-03T15:50:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python opencv入门 轮廓特征（18）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>内容来自OpenCV-Python Tutorials 自己翻译整理</p> 
<p><strong>目标</strong> <br> 轮廓的面积、周长、重心、边界 <br> 相关函数</p> 
<p><strong>矩</strong> <br> 图像矩可以计算图像的质心，面积等等。 <br> <a href="https://en.wikipedia.org/wiki/Image_moment" rel="nofollow noopener noreferrer" target="_blank">图像的矩</a></p> 
<p>函数 cv2.moments()会计算图像的矩，并返回一个字典 <br> （findContours应该返回三个参数，样例里的代码只返回两个，报错了）</p> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">'3.jpg'</span>,<span class="hljs-number">0</span>)
ret,thresh = cv2.threshold(img,<span class="hljs-number">127</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)
img,contours,hierarchy = cv2.findContours(thresh, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

cnt = contours[<span class="hljs-number">0</span>]
M = cv2.moments(cnt)
print(M)</code></pre> 
<p>结果</p> 
<pre class="prettyprint"><code class="language-text hljs bash">{<!-- --><span class="hljs-string">'m00'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m10'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m01'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m20'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m11'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m02'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m30'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m21'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m12'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'m03'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'mu20'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'mu11'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'mu02'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'mu30'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'mu21'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'mu12'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'mu03'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'nu20'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'nu11'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'nu02'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'nu30'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'nu21'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'nu12'</span>: <span class="hljs-number">0.0</span>, <span class="hljs-string">'nu03'</span>: <span class="hljs-number">0.0</span>}</code></pre> 
<p>(结果居然全是0，轮廓找的不好）</p> 
<p>根据这些矩的值可以得到重心 <br> <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame"> 
   
   <span class="math" id="MathJax-Span-1" style="width: 5.176em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.109em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.603em 1000em 3.629em -0.424em); top: -2.771em; left: 0.003em;"><span class="mrow" id="MathJax-Span-2"><span class="msubsup" id="MathJax-Span-3"><span style="display: inline-block; position: relative; width: 1.229em; height: 0px;"><span style="position: absolute; clip: rect(1.709em 1000em 2.723em -0.424em); top: -2.557em; left: 0.003em;"><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span><span style="position: absolute; top: -2.237em; left: 0.696em;"><span class="mi" id="MathJax-Span-5" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span></span></span><span class="mo" id="MathJax-Span-6" style="font-family: MathJax_Main; padding-left: 0.269em;">=</span><span class="mfrac" id="MathJax-Span-7" style="padding-left: 0.269em;"><span style="display: inline-block; position: relative; width: 1.443em; height: 0px; margin-right: 0.109em; margin-left: 0.109em;"><span style="position: absolute; clip: rect(3.363em 1000em 4.269em -0.477em); top: -4.531em; left: 50%; margin-left: -0.637em;"><span class="msubsup" id="MathJax-Span-8"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(1.763em 1000em 2.563em -0.477em); top: -2.397em; left: 0.003em;"><span class="mi" id="MathJax-Span-9" style="font-size: 70.7%; font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span><span style="position: absolute; top: -2.291em; left: 0.643em;"><span class="texatom" id="MathJax-Span-10"><span class="mrow" id="MathJax-Span-11"><span class="mn" id="MathJax-Span-12" style="font-size: 50%; font-family: MathJax_Main;">10</span></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.363em 1000em 4.429em -0.477em); top: -3.624em; left: 50%; margin-left: -0.637em;"><span class="msubsup" id="MathJax-Span-13"><span style="display: inline-block; position: relative; width: 1.336em; height: 0px;"><span style="position: absolute; clip: rect(1.763em 1000em 2.563em -0.477em); top: -2.397em; left: 0.003em;"><span class="mi" id="MathJax-Span-14" style="font-size: 70.7%; font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.643em;"><span class="texatom" id="MathJax-Span-15"><span class="mrow" id="MathJax-Span-16"><span class="msubsup" id="MathJax-Span-17"><span style="display: inline-block; position: relative; width: 0.643em; height: 0px;"><span style="position: absolute; clip: rect(3.843em 1000em 4.163em -0.477em); top: -3.997em; left: 0.003em;"><span class="mi" id="MathJax-Span-18" style="font-size: 50%;"></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -2.237em; left: 0.003em;"><span class="texatom" id="MathJax-Span-19"><span class="mrow" id="MathJax-Span-20"><span class="mn" id="MathJax-Span-21" style="font-size: 50%; font-family: MathJax_Main;">00</span></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.856em 1000em 1.229em -0.477em); top: -1.277em; left: 0.003em;"><span style="border-left: 1.443em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.069em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.776em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 2.27em; vertical-align: -0.93em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-1">C_x=\frac{M_{10}}{M_{_{00}}}</script> <br> <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame"> 
   
   <span class="math" id="MathJax-Span-22" style="width: 5.069em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.056em; height: 0px; font-size: 125%;"><span style="position: absolute; clip: rect(1.603em 1000em 3.629em -0.424em); top: -2.771em; left: 0.003em;"><span class="mrow" id="MathJax-Span-23"><span class="msubsup" id="MathJax-Span-24"><span style="display: inline-block; position: relative; width: 1.123em; height: 0px;"><span style="position: absolute; clip: rect(1.709em 1000em 2.723em -0.424em); top: -2.557em; left: 0.003em;"><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math-italic;">C<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.563em;"></span></span><span style="position: absolute; top: -2.237em; left: 0.696em;"><span class="mi" id="MathJax-Span-26" style="font-size: 70.7%; font-family: MathJax_Math-italic;">y<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span></span></span><span class="mo" id="MathJax-Span-27" style="font-family: MathJax_Main; padding-left: 0.269em;">=</span><span class="mfrac" id="MathJax-Span-28" style="padding-left: 0.269em;"><span style="display: inline-block; position: relative; width: 1.443em; height: 0px; margin-right: 0.109em; margin-left: 0.109em;"><span style="position: absolute; clip: rect(3.363em 1000em 4.269em -0.477em); top: -4.531em; left: 50%; margin-left: -0.637em;"><span class="msubsup" id="MathJax-Span-29"><span style="display: inline-block; position: relative; width: 1.283em; height: 0px;"><span style="position: absolute; clip: rect(1.763em 1000em 2.563em -0.477em); top: -2.397em; left: 0.003em;"><span class="mi" id="MathJax-Span-30" style="font-size: 70.7%; font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span><span style="position: absolute; top: -2.291em; left: 0.643em;"><span class="texatom" id="MathJax-Span-31"><span class="mrow" id="MathJax-Span-32"><span class="mn" id="MathJax-Span-33" style="font-size: 50%; font-family: MathJax_Main;">01</span></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(3.363em 1000em 4.429em -0.477em); top: -3.624em; left: 50%; margin-left: -0.637em;"><span class="msubsup" id="MathJax-Span-34"><span style="display: inline-block; position: relative; width: 1.336em; height: 0px;"><span style="position: absolute; clip: rect(1.763em 1000em 2.563em -0.477em); top: -2.397em; left: 0.003em;"><span class="mi" id="MathJax-Span-35" style="font-size: 70.7%; font-family: MathJax_Math-italic;">M<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.056em;"></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span><span style="position: absolute; top: -3.891em; left: 0.643em;"><span class="texatom" id="MathJax-Span-36"><span class="mrow" id="MathJax-Span-37"><span class="msubsup" id="MathJax-Span-38"><span style="display: inline-block; position: relative; width: 0.643em; height: 0px;"><span style="position: absolute; clip: rect(3.843em 1000em 4.163em -0.477em); top: -3.997em; left: 0.003em;"><span class="mi" id="MathJax-Span-39" style="font-size: 50%;"></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; top: -2.237em; left: 0.003em;"><span class="texatom" id="MathJax-Span-40"><span class="mrow" id="MathJax-Span-41"><span class="mn" id="MathJax-Span-42" style="font-size: 50%; font-family: MathJax_Main;">00</span></span></span><span style="display: inline-block; width: 0px; height: 2.403em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.003em;"></span></span><span style="position: absolute; clip: rect(0.856em 1000em 1.229em -0.477em); top: -1.277em; left: 0.003em;"><span style="border-left: 1.443em solid; display: inline-block; overflow: hidden; width: 0px; height: 1.25px; vertical-align: 0.003em;"></span><span style="display: inline-block; width: 0px; height: 1.069em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.776em;"></span></span></span><span style="border-left: 0.003em solid; display: inline-block; overflow: hidden; width: 0px; height: 2.27em; vertical-align: -0.93em;"></span></span> 
  </span><script type="math/tex" id="MathJax-Element-2">C_y=\frac{M_{01}}{M_{_{00}}}</script></p> 
<pre class="prettyprint"><code class="language-python hljs ">cx = int(M[<span class="hljs-string">'m10'</span>]/M[<span class="hljs-string">'m00'</span>])
cy = int(M[<span class="hljs-string">'m01'</span>]/M[<span class="hljs-string">'m00'</span>])</code></pre> 
<p><strong>轮廓面积</strong> <br> cv2.contourArea()函数可以计算面积，也可以使用矩 M[‘m00’]</p> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">'3.jpg'</span>,<span class="hljs-number">0</span>)
ret,thresh = cv2.threshold(img,<span class="hljs-number">127</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)
img,contours,hierarchy = cv2.findContours(thresh, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

cnt = contours[<span class="hljs-number">1</span>]
area = cv2.contourArea(cnt)<span class="hljs-comment">#计算面积</span>
print(area)</code></pre> 
<p><strong>轮廓周长</strong></p> 
<p>使用 cv2.arcLength()计算，第二个参数表示轮廓是闭合（True）还是打开的</p> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">'3.jpg'</span>,<span class="hljs-number">0</span>)
ret,thresh = cv2.threshold(img,<span class="hljs-number">127</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)
img,contours,hierarchy = cv2.findContours(thresh, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

cnt = contours[<span class="hljs-number">1</span>]
perimeter = cv2.arcLength(cnt,<span class="hljs-keyword">True</span>)
print(perimeter)</code></pre> 
<p><strong>轮廓近似</strong> <br> 将得到的轮廓近似为更少点组成的形状，使用<a href="https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm" rel="nofollow noopener noreferrer" target="_blank"> Douglas-Peucker algorithm</a> <br> 例如要在图像中寻找一个矩形，由于种种原因，不能得到一个完整矩形，现在可以使用此函数，函数的第二个参数epsilon是从原始轮廓到近似轮廓的最大距离，epsilon对结果影响很大。</p> 
<pre class="prettyprint"><code class="language-python hljs ">epsilon = <span class="hljs-number">0.1</span>*cv2.arcLength(cnt,<span class="hljs-keyword">True</span>)
approx = cv2.approxPolyDP(cnt,epsilon,<span class="hljs-keyword">True</span>)</code></pre> 
<p><strong>凸包</strong> <br> 使用cv2.convexHull()来计算凸包，所谓凸包，打个比方，给你一个木板，在木板上面钉一大堆钉子，然后找一根皮筋在上面一围，形成的图形就是凸包。</p> 
<p>函数介绍</p> 
<pre class="prettyprint"><code class=" hljs bash">hull = cv2.convexHull(points[, hull[, clockwise[, <span class="hljs-keyword">return</span>Points]]</code></pre> 
<p>参数</p> 
<ul><li>points为传入轮廓</li><li>hull为输出，通常不需要</li><li>clockwise设置为真顺时针输出凸包</li><li>returnPoints默认为真，返回凸包上的点</li></ul> 
<pre class="prettyprint"><code class="language-python hljs "><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">'3.jpg'</span>,<span class="hljs-number">0</span>)
ret,thresh = cv2.threshold(img,<span class="hljs-number">127</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)
img,contours,hierarchy = cv2.findContours(thresh, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

cnt = contours[<span class="hljs-number">1</span>]
hull = cv2.convexHull(cnt)

print(hull)</code></pre> 
<p>结果如下</p> 
<pre class="prettyprint"><code class=" hljs lua"><span class="hljs-string">[[[ 44 217]]</span>

 <span class="hljs-string">[[ 43 218]]</span>

 <span class="hljs-string">[[ 39 221]]</span>

 <span class="hljs-string">[[ 36 223]]</span>

 <span class="hljs-string">[[ 35 223]]</span>

 <span class="hljs-string">[[ 33 221]]</span>

 <span class="hljs-string">[[ 28 212]]</span>

 <span class="hljs-string">[[ 26 208]]</span>

 <span class="hljs-string">[[ 23 201]]</span>

 <span class="hljs-string">[[ 18 187]]</span>

 <span class="hljs-string">[[ 17 183]]</span>

 <span class="hljs-string">[[ 17 181]]</span>

 <span class="hljs-string">[[ 26 181]]</span>

 <span class="hljs-string">[[ 32 184]]</span>

 <span class="hljs-string">[[ 39 188]]</span>

 <span class="hljs-string">[[ 42 190]]</span>

 <span class="hljs-string">[[ 43 191]]</span>

 <span class="hljs-string">[[ 44 202]]</span>]</code></pre> 
<p>将returnPoints设置为False则会输出点的索引</p> 
<pre class="prettyprint"><code class=" hljs python"><span class="hljs-keyword">import</span> cv2
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

img = cv2.imread(<span class="hljs-string">'3.jpg'</span>,<span class="hljs-number">0</span>)
ret,thresh = cv2.threshold(img,<span class="hljs-number">127</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>)
img,contours,hierarchy = cv2.findContours(thresh, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

cnt = contours[<span class="hljs-number">1</span>]
hull = cv2.convexHull(cnt,returnPoints=<span class="hljs-keyword">False</span>)

print(hull)</code></pre> 
<p>结果如下</p> 
<pre class="prettyprint"><code class=" hljs json">[[<span class="hljs-number">36</span>]
 [<span class="hljs-number">35</span>]
 [<span class="hljs-number">33</span>]
 [<span class="hljs-number">31</span>]
 [<span class="hljs-number">30</span>]
 [<span class="hljs-number">29</span>]
 [<span class="hljs-number">21</span>]
 [<span class="hljs-number">19</span>]
 [<span class="hljs-number">13</span>]
 [ <span class="hljs-number">3</span>]
 [ <span class="hljs-number">1</span>]
 [ <span class="hljs-number">0</span>]
 [<span class="hljs-number">54</span>]
 [<span class="hljs-number">48</span>]
 [<span class="hljs-number">42</span>]
 [<span class="hljs-number">40</span>]
 [<span class="hljs-number">39</span>]
 [<span class="hljs-number">37</span>]]</code></pre> 
<p><strong>凸检测</strong></p> 
<p>检测一个曲线是否是凸的 <br> 返回bool值</p> 
<pre class="prettyprint"><code class=" hljs fix"><span class="hljs-attribute">k </span>=<span class="hljs-string"> cv2.isContourConvex(cnt)</span></code></pre> 
<p><strong>边界矩形（包围盒）</strong></p> 
<p>直边界包围盒（AABB包围盒） <br> 就是找到图形对象最高点、最低点、最左点、最右点，画出一个矩形边界 <br> 使用函数 cv2.boundingRect()计算 <br> （x，y）为矩形左上角的坐标，（w，h）是矩形的宽和高</p> 
<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-built_in">x</span>,<span class="hljs-built_in">y</span>,w,h = cv2<span class="hljs-preprocessor">.boundingRect</span>(cnt)
img = cv2<span class="hljs-preprocessor">.rectangle</span>(img,(<span class="hljs-built_in">x</span>,<span class="hljs-built_in">y</span>),(<span class="hljs-built_in">x</span>+w,<span class="hljs-built_in">y</span>+h),(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span></code></pre> 
<p>旋转边界包围盒（OBB包围盒）</p> 
<p>矩形包围盒的面积最小，考虑到了对象的旋转（原理使用到到了PCA方法，可以去搜） <br> 使用函数cv2.minAreaRect()获得 <br> 返回Box2D结构，包含左上角坐标（x,y）矩形宽，高（w,h），以及旋转角度</p> 
<p>可以通过cv2.boxPoints()函数绘制</p> 
<pre class="prettyprint"><code class=" hljs avrasm">rect = cv2<span class="hljs-preprocessor">.minAreaRect</span>(cnt)
box = cv2<span class="hljs-preprocessor">.boxPoints</span>(rect)
box = np<span class="hljs-preprocessor">.int</span>0(box)
cv2<span class="hljs-preprocessor">.drawContours</span>(img,[box],<span class="hljs-number">0</span>,(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span>),<span class="hljs-number">2</span>)</code></pre> 
<p><img src="https://images2.imgbox.com/97/bd/YKZ92oFp_o.png" alt="这里写图片描述" title=""> <br> 绿色的就是直边界包围盒，红色的是最小矩形包围盒</p> 
<p><strong>最小外接圆</strong> <br> 使用函数 cv2.minEnclosingCircle()得到 <br> 返回圆心和半径</p> 
<pre class="prettyprint"><code class=" hljs mel">(x,y),radius = cv2.minEnclosingCircle(cnt)
center = (<span class="hljs-keyword">int</span>(x),<span class="hljs-keyword">int</span>(y))
radius = <span class="hljs-keyword">int</span>(radius)
img = cv2.<span class="hljs-keyword">circle</span>(img,center,radius,(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>)</code></pre> 
<p><img src="https://images2.imgbox.com/01/97/m5D5DAE9_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>椭圆拟合</strong> <br> 旋转边界的内切圆</p> 
<pre class="prettyprint"><code class=" hljs avrasm">ellipse = cv2<span class="hljs-preprocessor">.fitEllipse</span>(cnt)
cv2<span class="hljs-preprocessor">.ellipse</span>(img,ellipse,(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>)</code></pre> 
<p><img src="https://images2.imgbox.com/4c/66/6BbRlPLi_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>直线拟合</strong> <br> 根据图像中的点拟合出一条直线</p> 
<pre class="prettyprint"><code class=" hljs perl">rows,cols = img.shape[:<span class="hljs-number">2</span>]
[vx,vy,<span class="hljs-keyword">x</span>,<span class="hljs-keyword">y</span>] = cv2.fitLine(cnt, cv2.DIST_L2,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>.<span class="hljs-number">01</span>,<span class="hljs-number">0</span>.<span class="hljs-number">01</span>)
lefty = <span class="hljs-keyword">int</span>((-<span class="hljs-keyword">x</span><span class="hljs-variable">*vy</span>/vx) + <span class="hljs-keyword">y</span>)
righty = <span class="hljs-keyword">int</span>(((cols-<span class="hljs-keyword">x</span>)<span class="hljs-variable">*vy</span>/vx)+<span class="hljs-keyword">y</span>)
cv2.line(img,(cols-<span class="hljs-number">1</span>,righty),(<span class="hljs-number">0</span>,lefty),(<span class="hljs-number">0</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0</span>),<span class="hljs-number">2</span>)</code></pre> 
<p><img src="https://images2.imgbox.com/81/83/c3ZzcelX_o.png" alt="这里写图片描述" title=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3e9db3329d61fb7743ed0c0bef6cf81c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">bugfree安装教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/97628647db79a0a615467a17c81c555c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人体姿态识别之RMPE（AlphaPose）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>