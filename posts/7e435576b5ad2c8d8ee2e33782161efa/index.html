<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>视觉学习笔记10——opencv的卸载、安装与多版本管理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="视觉学习笔记10——opencv的卸载、安装与多版本管理" />
<meta property="og:description" content="系列文章目录 参考文献
参考文献
参考文献
参考文献
文章目录 系列文章目录前言一、opencv卸载二、opencv安装1、下载opencv2、cmake-gui编译3、终端编译安装4、配置环境变量报错一报错二报错三报错四 5、opencv的多版本安装与管理多版本安装环境变量管理 前言 之前在ubuntu18系统上已经安装了opencv4.4.0和扩展库opencv_contrib，但是最近需要跑一个SLAM的源代码，而这个SLAM系统是基于opencv3.4.2开发的，直接运行会出现很多opencv版本不兼容的问题。因此想再安装opencv3.4.2和扩展库opencv_contrib3.4.2，过程中出现了很多问题，写这篇文章记录一下。
一、opencv卸载 卸载原有Opencv
在ubuntu终端命令行输入以下命令进入安装opencv的build目录并进行卸载操作。
cd build sudo make uninstall cd .. sudo rm -r build 最后在输入以下命令清理/usr中所有opencv相关项即可。(此步骤可不需要)
sudo rm -r /usr/local/include/opencv2 /usr/local/include/opencv /usr/include/opencv /usr/include/opencv2 /usr/local/share/opencv /usr/local/share/OpenCV /usr/share/opencv /usr/share/OpenCV /usr/local/bin/opencv* /usr/local/lib/libopencv* 二、opencv安装 1、下载opencv 以opencv3.4.2为例，进入官网和github分别下载Opencv3.4.2 Sources和openc_contrib，注意两者的版本一定是对应的，最后将contrib压缩包解压后放进之前解压好的Opencv Sources的文件夹下。
在这里提前打个补丁，因为在后面编译OpenCV 以及 openc_contrib 时很容易出现提示：缺少boostdesc_bgm.i文件出错。可能是因为墙的问题，有一些文件下载不全
总共缺了以下几个文件：
boostdesc_bgm.i boostdesc_bgm_bi.i boostdesc_bgm_hd.i boostdesc_lbgm.i boostdesc_binboost_064.i boostdesc_binboost_128.i boostdesc_binboost_256.i vgg_generated_120.i vgg_generated_64.i vgg_generated_80.i vgg_generated_48.i 所以需要手动打补丁。
这里感谢这位博主贡献的资源，自行下载。
https://blog.csdn.net/AlexWang30/article/details/99612188 下载的补丁解压到对应的opencv-3.4.2/opencv_contrib-3.4.2/modules/xfeatures2d/boostdesc_vgg_11/目录下，并更改opencv-3.4.2/opencv_contrib-3.4.2/modules/xfeatures2d/cmake下的两个文件，修改它的下载路径，指向本地。
2、cmake-gui编译 官网下载cmake（我用的是3.14，直接终端下载的话版本很低，且听说会有点问题）,解压后打开cmake-gui。
在opencv3.4.2中创建一个build文件夹,打开自己的cmake-gui，选择打开对应路径，然后点击configure按键。
注意，这个安装位置就很重要，如果你是有多opencv的需求那么一定要修改默认位置，不然会有大问题，如果你只用一个那么你可以修改也可以不用修改。因为我接下来是需要实现多opencv的，所以我这里就进行了修改。
修改CMAKE_INSTALL_PREFIX的默认安装目录为/usr/local/opencv/opencv3.4.2
在OPENCV_EXTRA_MODULES_PATH处，选择opencv_contrib3.4.5扩展库的输入目录（单击这一行后方空白处即可选中）然后选择opencv_contrib-3.2.0文件夹中的modules文件夹，注意，不是只选中opencv_contrib-3.2.0文件夹就好了，需要选中里面的modules文件夹！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7e435576b5ad2c8d8ee2e33782161efa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-15T23:18:20+08:00" />
<meta property="article:modified_time" content="2023-03-15T23:18:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">视觉学习笔记10——opencv的卸载、安装与多版本管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>系列文章目录</h2> 
<p><a href="https://blog.csdn.net/qq_36275734/article/details/81158966">参考文献</a><br> <a href="https://blog.csdn.net/xiao_qs/article/details/126650329?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=ubuntu%20%E5%A4%9Aopencv&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~sobaiduweb~default-3-126650329.blog_rank_default&amp;spm=1018.2226.3001.4450">参考文献</a><br> <a href="https://blog.csdn.net/Boys_Wu/article/details/123085433?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522167845007416782428640732%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=167845007416782428640732&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~sobaiduend~default-2-123085433-null-null.blog_rank_default&amp;utm_term=ubuntu%20%E5%A4%9Aopencv&amp;spm=1018.2226.3001.4450">参考文献</a><br> <a href="https://blog.csdn.net/qq_45848817/article/details/117987514?spm=1001.2014.3001.5501#t8">参考文献</a></p> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_0" rel="nofollow">系列文章目录</a></li><li><a href="#_16" rel="nofollow">前言</a></li><li><a href="#opencv_24" rel="nofollow">一、opencv卸载</a></li><li><a href="#opencv_42" rel="nofollow">二、opencv安装</a></li><li><ul><li><a href="#1opencv_43" rel="nofollow">1、下载opencv</a></li><li><a href="#2cmakegui_78" rel="nofollow">2、cmake-gui编译</a></li><li><a href="#3_98" rel="nofollow">3、终端编译安装</a></li><li><a href="#4_110" rel="nofollow">4、配置环境变量</a></li><li><ul><li><a href="#_141" rel="nofollow">报错一</a></li><li><a href="#_184" rel="nofollow">报错二</a></li><li><a href="#_226" rel="nofollow">报错三</a></li><li><a href="#_241" rel="nofollow">报错四</a></li></ul> 
   </li><li><a href="#5opencv_263" rel="nofollow">5、opencv的多版本安装与管理</a></li><li><ul><li><a href="#_266" rel="nofollow">多版本安装</a></li><li><a href="#_297" rel="nofollow">环境变量管理</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_16"></a>前言</h2> 
<p>之前在ubuntu18系统上已经安装了opencv4.4.0和扩展库opencv_contrib，但是最近需要跑一个SLAM的源代码，而这个SLAM系统是基于opencv3.4.2开发的，直接运行会出现很多opencv版本不兼容的问题。因此想再安装opencv3.4.2和扩展库opencv_contrib3.4.2，过程中出现了很多问题，写这篇文章记录一下。</p> 
<hr> 
<h2><a id="opencv_24"></a>一、opencv卸载</h2> 
<p>卸载原有Opencv<br> 在ubuntu终端命令行输入以下命令进入安装opencv的build目录并进行卸载操作。</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">cd</span> build
<span class="token function">sudo</span> <span class="token function">make</span> uninstall
<span class="token builtin class-name">cd</span>  <span class="token punctuation">..</span> 
<span class="token function">sudo</span> <span class="token function">rm</span> -r build
</code></pre> 
<p>最后在输入以下命令清理/usr中所有opencv相关项即可。(此步骤可不需要)</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">rm</span> -r /usr/local/include/opencv2 /usr/local/include/opencv /usr/include/opencv /usr/include/opencv2 /usr/local/share/opencv /usr/local/share/OpenCV /usr/share/opencv /usr/share/OpenCV /usr/local/bin/opencv* /usr/local/lib/libopencv*
</code></pre> 
<h2><a id="opencv_42"></a>二、opencv安装</h2> 
<h3><a id="1opencv_43"></a>1、下载opencv</h3> 
<p>以opencv3.4.2为例，进入官网和github分别下载<a href="https://opencv.org/releases/" rel="nofollow">Opencv3.4.2 Sources</a>和<a href="https://github.com/opencv/opencv_contrib/releases">openc_contrib</a>，注意两者的版本一定是对应的，最后将contrib压缩包解压后放进之前解压好的Opencv Sources的文件夹下。</p> 
<p>在这里提前打个补丁，因为在后面编译OpenCV 以及 openc_contrib 时很容易出现提示：缺少boostdesc_bgm.i文件出错。可能是因为墙的问题，有一些文件下载不全</p> 
<p>总共缺了以下几个文件：</p> 
<pre><code class="prism language-bash">boostdesc_bgm.i
boostdesc_bgm_bi.i
boostdesc_bgm_hd.i
boostdesc_lbgm.i
boostdesc_binboost_064.i
boostdesc_binboost_128.i
boostdesc_binboost_256.i
vgg_generated_120.i
vgg_generated_64.i
vgg_generated_80.i
vgg_generated_48.i
</code></pre> 
<p>所以需要手动打补丁。</p> 
<p>这里感谢这位博主贡献的资源，自行下载。</p> 
<pre><code class="prism language-bash">https://blog.csdn.net/AlexWang30/article/details/99612188
</code></pre> 
<p>下载的补丁解压到对应的opencv-3.4.2/opencv_contrib-3.4.2/modules/xfeatures2d/boostdesc_vgg_11/目录下，并更改opencv-3.4.2/opencv_contrib-3.4.2/modules/xfeatures2d/cmake下的两个文件，修改它的下载路径，指向本地。<br> <img src="https://images2.imgbox.com/9d/7c/qe0PIh7Y_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6f/da/abq7eIiG_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2cmakegui_78"></a>2、cmake-gui编译</h3> 
<p><a href="https://cmake.org/files/v3.14/" rel="nofollow">官网下载cmake</a>（我用的是3.14，直接终端下载的话版本很低，且听说会有点问题）,解压后打开cmake-gui。</p> 
<p>在opencv3.4.2中创建一个build文件夹,打开自己的cmake-gui，选择打开对应路径，然后点击configure按键。</p> 
<p><img src="https://images2.imgbox.com/04/3a/5srJe4FR_o.png" alt="在这里插入图片描述"></p> 
<p>注意，这个安装位置就很重要，如果你是有多opencv的需求那么一定要修改默认位置，不然会有大问题，如果你只用一个那么你可以修改也可以不用修改。因为我接下来是需要实现多opencv的，所以我这里就进行了修改。</p> 
<blockquote> 
 <p>修改CMAKE_INSTALL_PREFIX的默认安装目录为/usr/local/opencv/opencv3.4.2</p> 
</blockquote> 
<p>在OPENCV_EXTRA_MODULES_PATH处，选择opencv_contrib3.4.5扩展库的输入目录（单击这一行后方空白处即可选中）然后选择opencv_contrib-3.2.0文件夹中的modules文件夹，注意，不是只选中opencv_contrib-3.2.0文件夹就好了，需要选中里面的modules文件夹！</p> 
<blockquote> 
 <p>修改OPENCV_EXTRA_MODULES_PATH的目录为/home/xxx/opencv-3.4.2/opencv_contrib-3.4.2/modules</p> 
</blockquote> 
<p>然后点击configure按键，如果没有错误那就继续，有就参考下面的报错解决。</p> 
<p>最后点击Generate按键，写入build文件夹生成配置文件。</p> 
<h3><a id="3_98"></a>3、终端编译安装</h3> 
<p>在build目录下打开终端，输入:</p> 
<pre><code class="prism language-bash"><span class="token function">make</span> -j4
</code></pre> 
<p>编译成功之后，再输入</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">make</span> <span class="token function">install</span>
</code></pre> 
<h3><a id="4_110"></a>4、配置环境变量</h3> 
<p>终端打开</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> gedit  ~/.bashrc
</code></pre> 
<p>文件底部写入</p> 
<pre><code class="prism language-bash"><span class="token comment">## opencv3.4.2</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">PKG_CONFIG_PATH</span><span class="token operator">=</span>/usr/local/opencv/opencv3.4.2/lib/pkgconfig
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span>/usr/local/opencv/opencv3.4.2/lib 
</code></pre> 
<p>使配置文件生效</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> ~/.bashrc
</code></pre> 
<p>如果想使用之前的版本，在~/.bashrc中注释掉增加的内容，然后source ~/.bashrc即可。</p> 
<p>查询OpenCV版本</p> 
<pre><code class="prism language-bash">pkg-config --modversion opencv
pkg-config --modversion opencv4
</code></pre> 
<p><img src="https://images2.imgbox.com/19/7f/W7WVfCxt_o.png" alt="在这里插入图片描述"><br> 到这里我们已经成功配置好了一个 opencv，已经可以使用了。</p> 
<h4><a id="_141"></a>报错一</h4> 
<blockquote> 
 <p>IPPICV: Download: ippicv_2017u3_lnx_intel64_general_20180518.tgz CMake<br> Warning at cmake/OpenCVDownload.cmake:190 (message): IPPICV:<br> Download failed: 28;“Timeout was reached”</p> 
 <p>For details please refer to the download log file:</p> 
 <p>/home/llw/jcsz/opencv/opencv-3.4.2/build/CMakeDownloadLog.txt</p> 
 <p>Call Stack (most recent call first): 3rdparty/ippicv/ippicv.cmake:42<br> (ocv_download) cmake/OpenCVFindIPP.cmake:243 (download_ippicv)<br> cmake/OpenCVFindLibsPerf.cmake:12 (include) CMakeLists.txt:634<br> (include)</p> 
</blockquote> 
<p><strong>解决方法：</strong><br> <a href="https://github.com/opencv/opencv_3rdparty/tree/ippicv/master_20180518/ippicv">手动下载 ippicv_2017u3_lnx_intel64_general_20180518.tgz</a></p> 
<p>保存路径随意，我是放在路径/home/llw下</p> 
<p>2，修改opencv里相关配置文件<br> 打开终端，输入</p> 
<pre><code class="prism language-bash">gedit /home/xxx/opencv_source/opencv/3rdparty/ippicv/ippicv.cmake <span class="token comment">#记得lc换成自己的用户名</span>
</code></pre> 
<p>将47行的</p> 
<blockquote> 
 <pre><code>"https://raw.githubusercontent.com/opencv/opencv_3rdparty/${IPPICV_COMMIT}/ippicv/"
</code></pre> 
</blockquote> 
<p>改为步骤1中手动下载的文件的本地路径：</p> 
<pre><code class="prism language-bash"> <span class="token string">"file:///home/llw/"</span> <span class="token comment">#（仅供参考，根据自己的路径填写）</span>
</code></pre> 
<p>编辑完成保存退出。</p> 
<p><img src="https://images2.imgbox.com/aa/3c/dnRkY29H_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_184"></a>报错二</h4> 
<blockquote> 
 <p>CMake Warning at cmake/OpenCVDownload.cmake:190 (message): data:<br> Download failed: 28;“Timeout was reached”</p> 
 <p>For details please refer to the download log file:</p> 
 <p>/home/llw/jcsz/opencv/opencv-3.4.2/build/CMakeDownloadLog.txt</p> 
 <p>Call Stack (most recent call first):<br> opencv_contrib-3.4.2/modules/face/CMakeLists.txt:13 (ocv_download)</p> 
 <p>CMake Warning at opencv_contrib-3.4.2/modules/face/CMakeLists.txt:26<br> (message): Face: Can’t get model file for face alignment.</p> 
</blockquote> 
<p><strong>解决方法：</strong><br> 卡在face_landmark_model.dat下载的地方，因为在国外所以一直下载不下来。</p> 
<p>手动下载 face_landmark_model.dat ，<a href="https://blog.csdn.net/qq_53756803/article/details/122908598">这篇博客提供了网盘链接资源</a></p> 
<p>也可以直接下载：https://raw.githubusercontent.com/opencv/opencv_3rdparty/8afa57abc8229d611c4937165d20e2a2d9fc5a12/face_landmark_model.dat</p> 
<p>修改相应的配置文件</p> 
<pre><code class="prism language-bash">gedit /home/xxx/opencv-3.4.2/opencv_contrib-3.4.2/modules/face/CMakeLists.txt
</code></pre> 
<p>换成自己源码对应的文件夹<br> 将CMakeLists.txt文件的第19行修改为本地路径，即将原来的网址修改为下载的文件保存的路径</p> 
<pre><code class="prism language-bash"><span class="token string">"file:///home/xxx/"</span>
</code></pre> 
<p>路径记得替换为自己face_landmark_model所在的文件夹，不需要直接到face_landmark_model<br> 我将下载下来的face_landmark_model.dat 放在 /home/usrname/install/ 下，所以把下载网址换为本地， 如上所示。<br> <img src="https://images2.imgbox.com/5d/64/Km4ZKGSQ_o.png" alt="face_landmark_model"><br> 重新编译即可。</p> 
<h4><a id="_226"></a>报错三</h4> 
<blockquote> 
 <p>xfeatures2d/boostdesc: Download: boostdesc_binboost_064.i CMake<br> Warning at cmake/OpenCVDownload.cmake:207 (message):<br> xfeatures2d/boostdesc: Hash mismatch: f6cd2116631666e2f719ead236b82f53<br> Call Stack (most recent call first):<br> opencv_contrib-3.4.2/modules/xfeatures2d/cmake/download_boostdesc.cmake:22<br> (ocv_download)<br> opencv_contrib-3.4.2/modules/xfeatures2d/CMakeLists.txt:8<br> (download_boost_descriptors)</p> 
</blockquote> 
<p><strong>解决方法：</strong><br> 064的哈希对不上，以前没遇过这种问题，可能下载的版本不对，不过不管那么多了，我直接把哈希跟换为它要的值，如果以后出问题也可以直接本地更换就行。<br> <img src="https://images2.imgbox.com/4e/6c/AWFBojqP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_241"></a>报错四</h4> 
<blockquote> 
 <p>…/…/lib/libopencv_ts.a(ts_gtest.cpp.o)：在函数‘testing::internal::RE::PartialMatch(char<br> const*, testing::internal::RE const&amp;)’中：<br> ts_gtest.cpp:(.text.<em>ZN7testing8internal2RE12PartialMatchEPKcRKS1</em>+0x32)：对‘regexecA’未定义的引用 collect2: error: ld returned 1 exit status<br> modules/core/CMakeFiles/opencv_test_core.dir/build.make:769: recipe<br> for target ‘bin/opencv_test_core’ failed make[2]: ***<br> [bin/opencv_test_core] Error 1 CMakeFiles/Makefile2:3895: recipe for<br> target ‘modules/core/CMakeFiles/opencv_test_core.dir/all’ failed<br> make[1]: *** [modules/core/CMakeFiles/opencv_test_core.dir/all] Error<br> 2 Makefile:165: recipe for target ‘all’ failed make: *** [all] Error 2</p> 
</blockquote> 
<p><strong>解决方法：</strong><br> 在安装opencv4.4.0时的错误，经过查找发现是因为boost 和linux系统自身都有regex.h导致了冲突，导致识别到boost的regex.h文件，可是没找到cmake-gui的regex.h路径更改，于是使用笨办法，临时把/usr/include/boost/regex.h改名可以编译通过，然后改回来。</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">mv</span> regex.h regex111.h
</code></pre> 
<p>编译且安装完成后，将文件名对调改回去就行。</p> 
<h3><a id="5opencv_263"></a>5、opencv的多版本安装与管理</h3> 
<p>在开发不同工程时可能会需要不同版本的OpenCV，因此在电脑上安装多个版本的OpenCV很有必要。成功的关键是安装到不同的路径，并在CMakeLists.txt中找到需要的版本。</p> 
<h4><a id="_266"></a>多版本安装</h4> 
<p>在安装了opencv3.4.2后在安装opencv4.4，主要的步骤还是和上面一样，一定要注意编译安装所在的那个路径，区分好了才可以更好的管理。</p> 
<p>这里涉及一个问题， OpenCV4以上默认不使用pkg-config，所以需要在cmake-gui里开启OPENCV_GENERATE_PKGCONFIG，该编译选项开启后编译安装就会生成opencv4.pc文件，支持pkg-config功能。</p> 
<p>我一开始忘了opencv4编译不会生成pkg-config使用的pc文件，没打勾就编译安装了，我使用以下步骤进行补救：<br> 回到cmake-gui配置的阶段，增加这个步骤</p> 
<blockquote> 
 <p>OPENCV_GENERATE_PKGCONFIG 打勾</p> 
</blockquote> 
<p>因为安装时编译的临时文件都还在，所以直接重复make -j和sudo make install步骤即可生成/usr/local/opencv/opencv4.4.0/lib/pkgconfig/opencv4.pc文件。<br> <img src="https://images2.imgbox.com/a4/51/KEnuohjJ_o.png" alt="在这里插入图片描述"><br> 在CMakeLists.txt中可设置手动寻找OpenCV的指定路径，如下：</p> 
<pre><code class="prism language-bash">set<span class="token punctuation">(</span>OpenCV_DIR /usr/local/opencv/opencv4.4.0/lib/cmake/opencv4<span class="token punctuation">)</span>
find_package<span class="token punctuation">(</span>OpenCV <span class="token number">4</span> REQUIRED<span class="token punctuation">)</span>
</code></pre> 
<p>其中，设置在 set(OpenCV_DIR /usr/local/opencv/opencv4.4.0/lib/cmake/opencv4) 的目的主要是：设置opencv路径的时候，找有OpenCVConfig.cmake文件的文件夹，在我的安装目录下，OpenCVConfig.cmake文件在上述的路径中找到了，因此添加这个路径。</p> 
<p>如果不进行手动寻找OpenCV的指定路径的话，而只是自动寻找系统路径下配置的OpenCV的话，只需如下指令：<br> 第一个表示自动寻找系统库里版本4以上的，第二个表示找系统库里的最低版本。</p> 
<pre><code class="prism language-bash">find_package<span class="token punctuation">(</span>OpenCV <span class="token number">4</span> REQUIRED<span class="token punctuation">)</span>
或者
find_package<span class="token punctuation">(</span>OpenCV REQUIRED<span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_297"></a>环境变量管理</h4> 
<p>添加到系统环境变量<br> 修改~/.bashrc：</p> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> gedit ~/.bashrc
</code></pre> 
<p>像下面这样加入新的内容：</p> 
<pre><code class="prism language-bash"><span class="token comment">##OpenCV_4.4.0</span>
<span class="token comment">#export PKG_CONFIG_PATH= /usr/local/opencv/opencv4.4.0/lib/pkgconfig</span>
<span class="token comment">#export LD_LIBRARY_PATH= /usr/local/opencv/opencv4.4.0/lib</span>

<span class="token comment">##OpenCV_3.4.2</span>
<span class="token comment">#export PKG_CONFIG_PATH= /usr/local/opencv/opencv3.4.2/lib/pkgconfig</span>
<span class="token comment">#export LD_LIBRARY_PATH= /usr/local/opencv/opencv3.4.2/lib</span>

</code></pre> 
<p>新加入OpenCV版本或者暂时不使用的OpenCV版本的建议注释掉。<br> 对需要使用OpenCV_4.4.0，就可以把上面的#去掉。</p> 
<p>每次切换后，都需要更新~/.bashrc</p> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> ~/.bashrc 
</code></pre> 
<p>查询OpenCV版本</p> 
<pre><code class="prism language-bash">pkg-config --modversion opencv
pkg-config --modversion opencv4
</code></pre> 
<p><img src="https://images2.imgbox.com/a3/0a/wY0A86iN_o.png" alt="在这里插入图片描述"><br> 这样唯一的缺点就是每次只能使用一个版本的opencv,而且每次切换版本需要修改bashrc文件<br> 目前我也没有想到更好的解决办法。当然写一个脚本来更改版本也是方便的</p> 
<p>希望能够对大家有一些帮助！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e4db822cd11bc0c5695125a6bd4564f7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言程序设计经典例题100道（二）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d63adbe2c667c893535f0b856be57b40/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">《解构领域驱动设计》- 软件复杂度解析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>