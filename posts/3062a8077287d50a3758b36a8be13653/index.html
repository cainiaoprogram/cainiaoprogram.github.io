<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C&#43;&#43; ofstream和ifstream详细用法 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C&#43;&#43; ofstream和ifstream详细用法" />
<meta property="og:description" content="ofstream 和 ifstream 详细用法 导读一、打开文件二、关闭文件三、读写文件1、文本文件的读写2、二进制文件的读写 四、检测EOF五、文件定位格式化输入输出：1 整数数据的输入输出2 字符数据的输入3 字符串数据的输入4 浮点数5 二进制文件6 随机存取文件 导读 ofstream是从内存到硬盘，ifstream是从硬盘到内存，其实所谓的流缓冲就是内存空间
在C&#43;&#43;中，有一个stream这个类，所有的I/O都以这个“流”类为基础的，包括我们要认识的文件I/O.
stream这个类有两个重要的运算符：
1、插入器 &lt;&lt;
向流输出数据。比如说系统有一个默认的标准输出流(cout)，一般情况下就是指的显示器，所以，cout &lt;&lt; &#34;Write Stdout&#34; &lt;&lt; &#39;\n&#39;; 就表示把字符串&#34;Write Stdout&#34;和换行字符(’\n’)输出到标准输出流。
2、析取器 &gt;&gt;
从流中输入数据。比如说系统有一个默认的标准输入流(cin)，一般情况下就是指的键盘，所以，cin &gt;&gt; x; 就表示从标准输入流中读取一个指定类型的数据。
在C&#43;&#43;中，对文件的操作是通过stream的子类fstream(file stream)来实现的，所以，要用这种方式操作文件，就必须加入头文件fstream.h。
一、打开文件 在fstream类中，有一个成员函数open()，就是用来打开文件的，其原型是：
void open(const char* filename,int mode,int access);
参数：
filename：　要打开的文件名 mode：　要打开文件的方式 access：　打开文件的属性 打开文件的方式在类ios(是所有流式I/O类的基类)中定义.
常用的值如下：
ios::app：　以追加的方式打开文件 ios::ate：　文件打开后定位到文件尾，ios:app就包含有此属性 ios::binary：　以二进制方式打开文件，缺省的方式是文本方式。两种方式的区别见前文 ios::in：　文件以输入方式打开(文件数据输入到内存) ios::out：　文件以输出方式打开(内存数据输出到文件) ios::nocreate： 不建立文件，所以文件不存在时打开失败 ios::noreplace：不覆盖文件，所以打开文件时如果文件存在失败 ios::trunc：　如果文件存在，把文件长度设为0 可以用“或”把以上属性连接起来，如ios::out|ios::binary
打开文件的属性取值是：
0：普通文件，打开访问" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3062a8077287d50a3758b36a8be13653/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-30T23:16:13+08:00" />
<meta property="article:modified_time" content="2022-03-30T23:16:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C&#43;&#43; ofstream和ifstream详细用法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ofstream 和 ifstream 详细用法</h4> 
 <ul><li><a href="#_2" rel="nofollow">导读</a></li><li><a href="#_28" rel="nofollow">一、打开文件</a></li><li><a href="#_104" rel="nofollow">二、关闭文件</a></li><li><a href="#_112" rel="nofollow">三、读写文件</a></li><li><ul><li><a href="#1_120" rel="nofollow">1、文本文件的读写</a></li><li><a href="#2_210" rel="nofollow">2、二进制文件的读写</a></li></ul> 
  </li><li><a href="#EOF_248" rel="nofollow">四、检测EOF</a></li><li><a href="#_258" rel="nofollow">五、文件定位</a></li><li><a href="#_295" rel="nofollow">格式化输入输出：</a></li><li><ul><li><a href="#1__298" rel="nofollow">1 整数数据的输入输出</a></li><li><a href="#2__332" rel="nofollow">2 字符数据的输入</a></li><li><a href="#3__366" rel="nofollow">3 字符串数据的输入</a></li><li><a href="#4__395" rel="nofollow">4 浮点数</a></li><li><a href="#5__400" rel="nofollow">5 二进制文件</a></li><li><a href="#6__448" rel="nofollow">6 随机存取文件</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_2"></a>导读</h2> 
<p>ofstream是从内存到硬盘，ifstream是从硬盘到内存，其实所谓的流缓冲就是内存空间</p> 
<p>在C++中，有一个stream这个类，所有的I/O都以这个“流”类为基础的，包括我们要认识的文件I/O.</p> 
<p>stream这个类有两个重要的运算符：</p> 
<p>1、插入器 <code>&lt;&lt;</code></p> 
<p>向流输出数据。比如说系统有一个默认的标准输出流(cout)，一般情况下就是指的显示器，所以，<code>cout &lt;&lt; "Write Stdout" &lt;&lt; '\n';</code> 就表示把字符串"Write Stdout"和换行字符(’\n’)输出到标准输出流。</p> 
<p>2、析取器 <code>&gt;&gt;</code></p> 
<p>从流中输入数据。比如说系统有一个默认的标准输入流(cin)，一般情况下就是指的键盘，所以，<code>cin &gt;&gt; x;</code> 就表示从标准输入流中读取一个指定类型的数据。</p> 
<p>在C++中，对文件的操作是通过stream的子类fstream(file stream)来实现的，所以，要用这种方式操作文件，就必须加入头文件fstream.h。</p> 
<h2><a id="_28"></a>一、打开文件</h2> 
<p>在fstream类中，有一个成员函数open()，就是用来打开文件的，其原型是：</p> 
<p><code>void open(const char* filename,int mode,int access);</code></p> 
<p>参数：</p> 
<pre><code>　　filename：　　要打开的文件名
　　mode：　　　　要打开文件的方式
　　access：　　　打开文件的属性
</code></pre> 
<p>打开文件的方式在类ios(是所有流式I/O类的基类)中定义.</p> 
<p>常用的值如下：</p> 
<pre><code>　　ios::app：　　　以追加的方式打开文件
　　ios::ate：　　　文件打开后定位到文件尾，ios:app就包含有此属性
　　ios::binary：　以二进制方式打开文件，缺省的方式是文本方式。两种方式的区别见前文
　　ios::in：　　　 文件以输入方式打开(文件数据输入到内存)
　　ios::out：　　　文件以输出方式打开(内存数据输出到文件)
　　ios::nocreate： 不建立文件，所以文件不存在时打开失败
　　ios::noreplace：不覆盖文件，所以打开文件时如果文件存在失败
　　ios::trunc：　　如果文件存在，把文件长度设为0
</code></pre> 
<p>可以用“或”把以上属性连接起来，如<code>ios::out|ios::binary</code></p> 
<p>打开文件的属性取值是：<br> 　　0：普通文件，打开访问<br> 　　1：只读文件<br> 　　2：隐含文件<br> 　　4：系统文件</p> 
<p>可以用“或”或者“+”把以上属性连接起来，如3或1|2就是以只读和隐含属性打开文件。</p> 
<p>例如：以二进制输入方式打开文件 c:\config.sys</p> 
<pre><code>　　fstream file1;
　　file1.open("c:\\config.sys",ios::binary|ios::in,0);
</code></pre> 
<p>如果open函数只有文件名一个参数，则是以读/写普通文件打开，即：<br> 　　<br> 　　<code>file1.open("c:\\config.sys");</code><br> 　　&lt;=&gt;<br> 　　<code>file1.open("c:\\config.sys",ios::in|ios::out,0);</code></p> 
<p>另外，fstream 还有和 open( )一样的构造函数，对于上例，在定义的时侯就可以打开文件了：<br> 　　<br> 　　<code>fstream file1("c:\\config.sys");</code></p> 
<p>特别提出的是，fstream 有两个子类：</p> 
<p><strong>ifstream(input file stream)</strong> 和 <strong>ofstream(outpu file stream)</strong></p> 
<p>ifstream默认以输入方式打开文件</p> 
<p>ofstream默认以输出方式打开文件。</p> 
<pre><code>　　ifstream file2("c:\\pdos.def");//以输入方式打开文件
　　ofstream file3("c:\\x.123");//以输出方式打开文件　　
</code></pre> 
<p>所以，在实际应用中，根据需要的不同，选择不同的类来定义：</p> 
<p>如果想以输入方式打开，就用ifstream来定义;</p> 
<p>如果想以输出方式打开，就用ofstream来定义;</p> 
<p>如果想以输入/输出方式来打开，就用fstream来定义。</p> 
<h2><a id="_104"></a>二、关闭文件</h2> 
<p>打开的文件使用完成后一定要关闭，fstream提供了成员函数close()来完成此操作，</p> 
<p>如：file1.close();</p> 
<p>就把file1相连的文件关闭。</p> 
<h2><a id="_112"></a>三、读写文件</h2> 
<p>读写文件分为文本文件和二进制文件的读取.</p> 
<p>对于文本文件的读取比较简单，用插入器和析取器就可以了;</p> 
<p>对于二进制的读取就要复杂些，下要就详细的介绍这两种方式</p> 
<h3><a id="1_120"></a>1、文本文件的读写</h3> 
<p>文本文件的读写很简单：</p> 
<p>用插入器 &lt;&lt; 向文件输出;</p> 
<p>用析取器 &gt;&gt; 从文件输入。</p> 
<p>假设file1是以输入方式打开，file2以输出打开。</p> 
<p>示例如下：</p> 
<pre><code class="prism language-c">	file2 <span class="token operator">&lt;&lt;</span> <span class="token string">"I Love You"</span><span class="token punctuation">;</span>		<span class="token comment">//向文件写入字符串"I Love You"</span>

　　<span class="token keyword">int</span> i<span class="token punctuation">;</span>
　　file1 <span class="token operator">&gt;&gt;</span> i<span class="token punctuation">;</span>	<span class="token comment">//从文件输入一个整数值。</span>
</code></pre> 
<p>这种方式还有一种简单的格式化能力，比如可以指定输出为16进制等等，具体的格式有以下一些</p> 
<p>操纵符 功能 输入/输出</p> 
<pre><code>	dec 格式化为十进制数值数据 输入和输出
	endl 输出一个换行符并刷新此流 输出
	ends 输出一个空字符 输出
	hex 格式化为十六进制数值数据 输入和输出
	oct 格式化为八进制数值数据 输入和输出
	setpxecision( int p) 设置浮点数的精度位数输出
</code></pre> 
<p>示例:</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span> </span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span> </span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span> 

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token comment">//利用ofstream类的构造函数创建一个文件输出流对象来打开文件 </span>
	ofstream <span class="token function">fout</span><span class="token punctuation">(</span> <span class="token string">"d:\\mytest.txt"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>fout <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"文件不能打开"</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 输出到磁盘文件</span>
		fout <span class="token operator">&lt;&lt;</span> <span class="token string">"Learning C++ is very useful."</span><span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span> 
		<span class="token comment">//关闭文件输出流</span>
		fout<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           
	<span class="token punctuation">}</span>
	<span class="token comment">//利用ifstream类的构造函数创建一个文件输入流对象</span>
	ifstream <span class="token function">fin</span><span class="token punctuation">(</span> <span class="token string">"d:\\mytest.txt"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>   
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>fin <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"文件不能打开"</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span> buffer<span class="token punctuation">[</span><span class="token number">80</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  
	    <span class="token comment">// 从磁盘文件输入</span>
		fin <span class="token operator">&gt;&gt;</span> buffer<span class="token punctuation">;</span>  
		<span class="token comment">// 关闭文件输入流      </span>
		fin<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
		cout <span class="token operator">&lt;&lt;</span> buffer <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	ofstream file1<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>file1 <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"文件不能打开"</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">//open函数只有文件名一个参数，则是以读/写普通文件打开</span>
		file1<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"d:\\mytest.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//相当于file1.open("d:\\mytest.txt",ios::out|ios::in,0);</span>
		<span class="token comment">//文本文件的写:用插入器(&lt;&lt;)向文件输出.</span>
        file1<span class="token operator">&lt;&lt;</span><span class="token string">"写入文件操作!"</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
        file1<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	ifstream <span class="token function">file2</span><span class="token punctuation">(</span><span class="token string">"d:\\mytest.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>file2 <span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"文件不能打开"</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
	<span class="token punctuation">}</span> 
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">char</span> ch1<span class="token punctuation">[</span><span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token comment">//文本文件的读:用析取器(&gt;&gt;)从文件输入.</span>
		file2<span class="token operator">&gt;&gt;</span>ch1<span class="token punctuation">;</span>

		cout<span class="token operator">&lt;&lt;</span>ch1<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>
		file2<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2_210"></a>2、二进制文件的读写</h3> 
<p>① put()<br> 　　<br> 　　put()函数向流写入一个字符，其原型是ofstream &amp;put(char ch)，使用也比较简单，如file1.put(‘c’);就是向流写一个字符’c’。</p> 
<p>② get()<br> 　　<br> 　　get()函数比较灵活，有3种常用的重载形式：</p> 
<p>一种就是和put()对应的形式：<code>ifstream &amp;get(char &amp;ch);</code> 功能是从流中读取一个字符，结果保存在引用ch中，如果到文件尾，返回空字符。如 <code>file2.get(x);</code> 表示从文件中读取一个字符，并把读取的字符保存在x中。</p> 
<p>另一种重载形式的原型是：<code>int get();</code> 这种形式是从流中返回一个字符，如果到达文件尾，返回EOF，如 <code>x=file2.get();</code> 和上例功能是一样的。</p> 
<p>还有一种形式的原型是：<code>ifstream &amp;get(char *buf,int num,char delim='\n');</code> 这种形式把字符读入由 buf 指向的数组，直到读入了 num 个字符或遇到了由 delim 指定的字符，如果没使用 delim 这个参数，将使用缺省值换行符’\n’。例如：</p> 
<p><code>file2.get(str1,127,'A');</code> //从文件中读取字符到字符串str1，当遇到字符’A’或读取了127个字符时终止。</p> 
<p>③读写数据块</p> 
<p>要读写二进制数据块，使用成员函数read()和write()成员函数，它们原型如下：</p> 
<pre><code>　　read(unsigned char *buf,int num);
　　write(const unsigned char *buf,int num);
</code></pre> 
<p>read()从文件中读取 num 个字符到 buf 指向的缓存中，如果在还未读入 num 个字符时就到了文件尾，可以用成员函数<code>int gcount();</code>来取得实际读取的字符数; 而 write( ) 从buf 指向的缓存写 num 个字符到文件中，值得注意的是缓存的类型是 unsigned char *，有时可能需要类型转换。</p> 
<p>例：</p> 
<pre><code>　　unsigned char str1[]="I Love You";
　　int n[5];
　　ifstream in("xxx.xxx");
　　ofstream out("yyy.yyy");
　　out.write(str1,strlen(str1));						//把字符串str1全部写到yyy.yyy中
　　in.read((unsigned char*)n,sizeof(n));				//从xxx.xxx中读取指定个整数，注意类型转换
　　in.close();out.close(); 
</code></pre> 
<h2><a id="EOF_248"></a>四、检测EOF</h2> 
<p>成员函数eof()用来检测是否到达文件尾，如果到达文件尾返回非0值，否则返回0。原型是int eof();</p> 
<p>例：　　<code>if(in.eof()) ShowMessage("已经到达文件尾!");</code></p> 
<h2><a id="_258"></a>五、文件定位</h2> 
<p></p> 
<p>和C的文件操作方式不同的是，C++ I/O系统管理两个与一个文件相联系的指针。一个是读指针，它说明输入操作在文件中的位置;另一个是写指针，它下次写操作的位置。每次执行输入或输出时，相应的指针自动变化。所以，C++的文件定位分为读位置和写位置的定位，对应的成员函数是seekg()和seekp()。seekg()是设置读位置， seekp是设置写位置。它们最通用的形式如下：</p> 
<pre><code>　　istream &amp;seekg(streamoff offset,seek_dir origin);
　　ostream &amp;seekp(streamoff offset,seek_dir origin);
</code></pre> 
<p>streamoff 定义于 iostream.h 中，定义有偏移量 offset 所能取得的最大值，seek_dir 表示移动的基准位置，是一个有以下值的枚举：</p> 
<pre><code>	ios::beg：　　文件开头
	ios::cur：　　文件当前位置
	ios::end：　　文件结尾
</code></pre> 
<p>这两个函数一般用于二进制文件，因为文本文件会因为系统对字符的解释而可能与预想的值不同。例：</p> 
<pre><code>　　file1.seekg(1234,ios::cur); //把文件的读指针从当前位置向后移1234个字节
　　file2.seekp(1234,ios::beg); //把文件的写指针从文件开头向后移1234个字节
</code></pre> 
<p>c++中输出和输入导屏幕和键盘的类别声明包含再标题文件&lt;iostrream.h&gt;中，而磁盘类文件的 I/O则声明再包含标题文件&lt;fstream.h&gt;内。</p> 
<p>输入和输出格式：</p> 
<pre><code>	输出到磁盘 ofsteam 识别字（“文件名”）
	
	从磁盘读文件 ifsteam 识别字（"文件名“）
</code></pre> 
<p>例如：</p> 
<pre><code>	ofstream outfile("data.txt"); //写入到磁盘的data.txt中
</code></pre> 
<h2><a id="_295"></a>格式化输入输出：</h2> 
<h3><a id="1__298"></a>1 整数数据的输入输出</h3> 
<p>整数数据存储再磁盘内，每个文字各占一个字节。</p> 
<p>例如：</p> 
<pre><code class="prism language-c">	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span><span class="token expression"><span class="token punctuation">]</span></span></span>
	using namespace std<span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		ofstream <span class="token function">outfile</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 			<span class="token comment">//写入文件</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			outfile <span class="token operator">&lt;&lt;</span> i <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span> 				<span class="token comment">//空格是为了避免数值连接在一起加上去的，此文件大小为20字节</span>
		<span class="token punctuation">}</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"ok,press a key!"</span><span class="token punctuation">;</span>
		<span class="token function">gerch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<p>程序执行后用记事本打开可以看到数据</p> 
<p>0 1 2 3 4 5 6 7 8 9</p> 
<p>同样读取文件语句为：</p> 
<pre><code class="prism language-c">	<span class="token keyword">int</span> data<span class="token punctuation">;</span>
	
	ifstream <span class="token function">infile</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		infile <span class="token operator">&gt;&gt;</span> data <span class="token punctuation">;</span> 					<span class="token comment">//读数据的时候因为数据间有一个空格才能完整的读出</span>
		cout <span class="token operator">&lt;&lt;</span> data <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>				<span class="token comment">//输出到屏幕，加上空格是为了分开数字</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2__332"></a>2 字符数据的输入</h3> 
<p>字符的输出方式以 put(ch) 为存入语句，读取语句为 get(ch)</p> 
<p>例如：</p> 
<pre><code class="prism language-c">	<span class="token keyword">char</span> str<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"hello this is a c++ programe!\n"</span>

				 <span class="token string">"i know this difference \n"</span>

			 	 <span class="token string">"and mocive"</span><span class="token punctuation">;</span>

	ofstream <span class="token function">ofs</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">strlen</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>

		ofs<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>读取：</p> 
<pre><code class="prism language-c">	<span class="token keyword">char</span> ch<span class="token punctuation">;</span>

	ifstream <span class="token function">ifs</span><span class="token punctuation">(</span><span class="token string">"data.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span><span class="token punctuation">(</span>ifs<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

		infile<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span><span class="token punctuation">;</span>

		cout <span class="token operator">&lt;&lt;</span> ch<span class="token punctuation">;</span>

		<span class="token function">getch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="3__366"></a>3 字符串数据的输入</h3> 
<p>数据多的时候读写速度比较快，输入时以整行字符串加上换行符号一次写入。读取的时候以语句 getline(buffer, max)，来读取整行数据，直到遇到换行符，每行结尾的\n并不读入，所以在 输出的时候需要加上换行符号，否则数据会连接在一起。</p> 
<p>例子：</p> 
<pre><code class="prism language-c">	ofstream <span class="token function">outfile</span><span class="token punctuation">(</span><span class="token string">"strdata.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	outfile <span class="token operator">&lt;&lt;</span> <span class="token string">"use your vote\n"</span>；

	outfile <span class="token operator">&lt;&lt;</span> <span class="token string">"ouse your weise\n"</span><span class="token punctuation">;</span>
</code></pre> 
<p>读取：</p> 
<pre><code class="prism language-c">
	<span class="token keyword">const</span> MAX <span class="token operator">=</span> <span class="token number">80</span><span class="token punctuation">;</span>

	<span class="token keyword">char</span> buffer<span class="token punctuation">[</span>MAX<span class="token punctuation">]</span><span class="token punctuation">;</span>

	ifstream <span class="token function">infile</span><span class="token punctuation">(</span><span class="token string">"strdata.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">while</span><span class="token punctuation">(</span>infile<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

	infile<span class="token punctuation">.</span><span class="token function">getline</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> MAX<span class="token punctuation">)</span><span class="token punctuation">;</span>

	cout <span class="token operator">&lt;&lt;</span> buffer <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="4__395"></a>4 浮点数</h3> 
<p>浮点数因为有小数点，在存储数据时与整数相同，只要每个数据加上一个空格就可以区隔相邻的数据</p> 
<h3><a id="5__400"></a>5 二进制文件</h3> 
<p>上述的格式化文件比较占用硬盘控件，采用二进制存储就可以节约很多控件。它使用write,read()来存储和读取。</p> 
<pre><code>	ofstream 识别字（”文件名“，ios::binary);

	write( 写入地址，写入大小）

	ifstream 识别字（”文件名“，ios:binary);

	识别字.read(读取地址，读取大小）；
</code></pre> 
<p>例如：</p> 
<pre><code>	infile.read((char*)buffer,sizeof(数据类型));
	
	关闭文件
	
	识别字.close();
</code></pre> 
<p>例子：</p> 
<pre><code class="prism language-c">	ofstream <span class="token function">outfile</span><span class="token punctuation">(</span><span class="token string">"data.dat"</span><span class="token punctuation">,</span>ios<span class="token operator">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

		n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>

		outfile<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Char<span class="token operator">*</span><span class="token punctuation">)</span>n<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//还可以用变量和数组为例</span>

		<span class="token comment">// outfile.write((Char*)&amp;i,sizeof(int)); i 为变量</span>

		<span class="token comment">// outfile.write((Char*)n,sizeof(int)); n为数组</span>

<span class="token punctuation">}</span>

	outfile<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	ifstream <span class="token function">inifile</span><span class="token punctuation">(</span><span class="token string">"data.dat"</span><span class="token punctuation">,</span>ios<span class="token operator">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> 

		inifile<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Char<span class="token operator">*</span><span class="token punctuation">)</span>n<span class="token punctuation">,</span><span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		cout <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="6__448"></a>6 随机存取文件</h3> 
<p>文件能够随意读出，读出后又可以更新，更新后可以回存到源文件内。fstream file ;</p> 
<pre><code>file.open("文件名",存取模式）；

file.open("x.dat",ios::app|ios::in|ios::out|ios::binary);

in 打开文件输入或者读取 ifstream

out 打开文件输出或者写入 ofstream

ate 从文件尾开始写入或者读取

app 加在文件尾

arunc 若文件存在，讲其长度设为0

binary 打开二进制文件
</code></pre> 
<p>二进制文件中有一个指针，指向当前数据在文件中的位置，这个文件指针和一般的指针变量不一样，它只是一个纯粹的指示器。</p> 
<p>函数介绍</p> 
<pre><code>seekg()

seekg(0) 指针移到文件的最前面

seekg(0,ios::cur);把当前的指针当作0

seekg(0,ios::end);将指针移到文件尾，若再配合file.tellg()则可以求出文件的大小为多少bytes
</code></pre> 
<p>以下两个操作都必须在文件关闭后才可以使用</p> 
<pre><code>remove("文件名”）；把这个文件删除

rename("旧文件名","新文件名");
</code></pre> 
<pre><code class="prism language-c">	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
	<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fstream&gt;</span></span>
	using namespace std<span class="token punctuation">;</span>

	<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 		<span class="token keyword">int</span> n<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">register</span> <span class="token keyword">int</span> i<span class="token punctuation">;</span>

		ofstream <span class="token function">out</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> ios<span class="token operator">::</span>out <span class="token operator">|</span> ios<span class="token operator">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>out<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
 			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file.\n"</span><span class="token punctuation">;</span>
 			<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>

 	out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token keyword">sizeof</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

 	out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 	<span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">// clear array</span>
 		n<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

 	ifstream <span class="token function">in</span><span class="token punctuation">(</span><span class="token string">"test"</span><span class="token punctuation">,</span> ios<span class="token operator">::</span>in <span class="token operator">|</span> ios<span class="token operator">::</span>binary<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>in<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Cannot open file.\n"</span><span class="token punctuation">;</span>
 		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

 	in<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">char</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>n<span class="token punctuation">,</span> <span class="token keyword">sizeof</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>

 	<span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">// show values read from file</span>
 		cout <span class="token operator">&lt;&lt;</span> n<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>

 	in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1f3809252c0015939cd451e0decb2eda/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">[蓝桥杯python] 车的放置:在一个n*n的棋盘中，每个格子中至多放置一个车，且要保证任何两个车都不能相互攻击，有多少中放法(车与车之间是没有差别的)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e7344389728232a646c67166c9ef6739/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">shardingsphere5.0.0整合分布式柔性事务seata1.4.2示例步骤</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>