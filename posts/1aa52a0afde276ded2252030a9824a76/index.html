<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ios的vn服务器未响应,iOS应用程序导致内部服务器错误 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ios的vn服务器未响应,iOS应用程序导致内部服务器错误" />
<meta property="og:description" content="我有一个很奇怪的问题。我的应用程序正在导致我的服务器狂暴。iOS应用程序导致内部服务器错误
我的iOS应用程序使用TFHPPLE解析来自服务器上的PHP页面的数据。它从页面抓取一个名称，并检查该广告系列剩余多少时间。
NSString *URL1 = @&#34;http://alefdev.com/tzedakah/current.php&#34;;
NSData *webPage = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat: URL1]]];
TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:webPage];
NSArray *elements = [xpathParser search:@&#34;//name&#34;];
if([elements count] == 0)
{
NSLog(@&#34;array is empty&#34;);
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@&#34;Connection Error&#34; message:@&#34;Cannot connect to server.&#34;
delegate:self cancelButtonTitle:@&#34;OK&#34; otherButtonTitles:nil];
[alert show];
[alert release];
[adupdate invalidate];
rc.enabled = YES;
rc.hidden = NO;
}
else{
TFHppleElement *element = [elements objectAtIndex:0];
NSString *ttl = [element content];" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1aa52a0afde276ded2252030a9824a76/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-06T14:23:21+08:00" />
<meta property="article:modified_time" content="2021-08-06T14:23:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ios的vn服务器未响应,iOS应用程序导致内部服务器错误</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>我有一个很奇怪的问题。我的应用程序正在导致我的服务器狂暴。iOS应用程序导致内部服务器错误</p> 
 <p>我的iOS应用程序使用TFHPPLE解析来自服务器上的PHP页面的数据。它从页面抓取一个名称，并检查该广告系列剩余多少时间。</p> 
 <p>NSString *URL1 = @"http://alefdev.com/tzedakah/current.php";</p> 
 <p>NSData *webPage = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat: URL1]]];</p> 
 <p>TFHpple *xpathParser = [[TFHpple alloc] initWithHTMLData:webPage];</p> 
 <p>NSArray *elements = [xpathParser search:@"//name"];</p> 
 <p>if([elements count] == 0)</p> 
 <p>{<!-- --></p> 
 <p>NSLog(@"array is empty");</p> 
 <p>UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Connection Error" message:@"Cannot connect to server."</p> 
 <p>delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];</p> 
 <p>[alert show];</p> 
 <p>[alert release];</p> 
 <p>[adupdate invalidate];</p> 
 <p>rc.enabled = YES;</p> 
 <p>rc.hidden = NO;</p> 
 <p>}</p> 
 <p>else{<!-- --></p> 
 <p>TFHppleElement *element = [elements objectAtIndex:0];</p> 
 <p>NSString *ttl = [element content];</p> 
 <p>NSLog(@"Charity Name: %@", ttl);</p> 
 <p>todayscharity.text = ttl;</p> 
 <p>}</p> 
 <p>每隔10秒钟，它会调用服务器，获取所需信息并将其放入数组中。如果数组为空，则定时器失效，并出现“重新连接”按钮。 '重新连接'按钮重新启动计时器。</p> 
 <p>定时器：</p> 
 <p>-(void)starttimer{<!-- --></p> 
 <p>adupdate = [NSTimer scheduledTimerWithTimeInterval:(10.0) target:self selector:@selector(updateAd) userInfo:nil repeats:YES];</p> 
 <p>NSLog(@"starttimer called");}</p> 
 <p>重启功能</p> 
 <p>- (IBAction)reconnect:(id)sender</p> 
 <p>{<!-- --></p> 
 <p>[self starttimer];</p> 
 <p>}</p> 
 <p>如果失败(空数组)，然后重新启动，再次试图从我的服务器抓取信息，但不能。整个站点发出内部服务器错误(500)。</p> 
 <p>PHP脚本获取当前日期</p> 
 <p>$today = getdate();</p> 
 <p>$todayfull = $today['year'].$today['mon'].$today['mday'];</p> 
 <p>检查日期：</p> 
 <p>if(($todayfull == 201192)||($todayfull == 201193))</p> 
 <p>然后呼应一些文本和天吻合后运行倒计时功能。</p> 
 <p>function countdown($year, $month, $day, $hour, $minute)</p> 
 <p>{<!-- --></p> 
 <p>$the_countdown_date = mktime($hour, $minute, 0, $month, $day, $year, -1);</p> 
 <p>$today = time();</p> 
 <p>$difference = $the_countdown_date - $today;</p> 
 <p>if ($difference &lt; 0) $difference = 0;</p> 
 <p>$days_left = floor($difference/60/60/24);</p> 
 <p>$hours_left = floor(($difference - $days_left*60*60*24)/60/60);</p> 
 <p>$minutes_left = floor(($difference - $days_left*60*60*24 - $hours_left*60*60)/60);</p> 
 <p>if($minutes_left &lt; 1)</p> 
 <p>{<!-- --></p> 
 <p>echo "Less than 1 minute";</p> 
 <p>}</p> 
 <p>else{<!-- --></p> 
 <p>echo "".$days_left." day ".$hours_left." hours ".$minutes_left." minutes";</p> 
 <p>}</p> 
 <p>错误日志显示：</p> 
 <p>[Sun Sep 4 14:01:53 2011] [error] [client 184.100.79.143] File does not exist: /home/alefdev2/public_html/error_500.htm</p> 
 <p>[Sun Sep 4 14:01:53 2011] [error] [client 184.100.79.143] Premature end of script headers: /home/alefdev2/public_html/tzedakah/current.php</p> 
 <p>[Sun Sep 4 14:01:43 2011] [error] [client 184.100.79.143] File does not exist: /home/alefdev2/public_html/error_500.htm</p> 
 <p>[Sun Sep 4 14:01:43 2011] [error] [client 184.100.79.143] Premature end of script headers: /home/alefdev2/public_html/tzedakah/current.php</p> 
 <p>[Sun Sep 4 14:01:43 2011] [error] [client 184.100.79.143] File does not exist: /home/alefdev2/public_html/error_500.htm</p> 
 <p>[Sun Sep 4 14:01:43 2011] [error] [client 184.100.79.143] Premature end of script headers: /home/alefdev2/public_html/tzedakah/current.php</p> 
 <p>[Sun Sep 4 14:00:25 2011] [error] [client 184.100.79.143] File does not exist: /home/alefdev2/public_html/error_500.htm</p> 
 <p>完整的PHP脚本是：</p> 
 <p>$today = getdate();</p> 
 <p>$todayfull = $today['year'].$today['mon'].$today['mday'];</p> 
 <p>echo "Todayfull: $todayfull";</p> 
 <p>if(($todayfull == 201192)||($todayfull == 201193))</p> 
 <p>{<!-- --></p> 
 <p>echo "The Lone Soldier Center in memory of Michael Levin</p> 
 <p>Lone Soldier Center desc.</p> 
 <p>";</p> 
 <p>countdown(2011,9,4,0,0);</p> 
 <p>}</p> 
 <p>else if(($todayfull == 201194)||($todayfull == 201195)){<!-- --></p> 
 <p>echo "Friends of Itamar</p> 
 <p>Friends of Itamar desc.</p> 
 <p>";</p> 
 <p>countdown(2011,9,6,0,0);</p> 
 <p>}</p> 
 <p>else{<!-- --></p> 
 <p>echo "Error: Could not match dates.";</p> 
 <p>}</p> 
 <p>?&gt;</p> 
 <p>function countdown($year, $month, $day, $hour, $minute)</p> 
 <p>{<!-- --></p> 
 <p>$the_countdown_date = mktime($hour, $minute, 0, $month, $day, $year, -1);</p> 
 <p>$today = time();</p> 
 <p>$difference = $the_countdown_date - $today;</p> 
 <p>if ($difference &lt; 0) $difference = 0;</p> 
 <p>$days_left = floor($difference/60/60/24);</p> 
 <p>$hours_left = floor(($difference - $days_left*60*60*24)/60/60);</p> 
 <p>$minutes_left = floor(($difference - $days_left*60*60*24 - $hours_left*60*60)/60);</p> 
 <p>if($minutes_left &lt; 1)</p> 
 <p>{<!-- --></p> 
 <p>echo "Less than 1 minute";</p> 
 <p>}</p> 
 <p>else{<!-- --></p> 
 <p>echo "".$days_left." day ".$hours_left." hours ".$minutes_left." minutes";</p> 
 <p>}</p> 
 <p>}</p> 
 <p>?&gt;</p> 
 <p>我的主机(SiteGround)说，我只是有太多的IMAP进程在运行，但该网站只有当我尝试重新连接这个应用程序时才会崩溃。</p> 
 <p>2011-09-04</p> 
 <p>bfost</p> 
 <p>+0</p> 
 <p>服务器日志文件在获得500时会说什么？另外，你可以发布完整的服务器端代码吗？ –</p> 
 <p>+0</p> 
 <p>我已经添加了日志条目和php脚本。 –</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fe0f41fe96b1512875d19750fd9f8109/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">tgp登录dnf一直显示连接服务器失败,DNF总网络连接失败是为什么?</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4a84c99fb15e99e1e2949ad245887053/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ajax非异步请求,如何让jQuery执行同步而非异步的Ajax请求？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>