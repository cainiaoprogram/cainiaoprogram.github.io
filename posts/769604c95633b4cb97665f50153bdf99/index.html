<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL一文教你学会视图（包含with check option检查选项） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL一文教你学会视图（包含with check option检查选项）" />
<meta property="og:description" content="目录
视图概念介绍
视图语法
检查选项（with check option）
视图的更新
视图的作用
​编辑 总结
视图概念介绍 视图（View）只不过是通过相关的名称存储在数据库中的一个 SQL 语句。视图（View）实际上是一个以预定义的 SQL 查询形式存在的表的组合。
视图（View）可以包含一个表的所有行或从一个或多个表选定行。视图（View）可以从一个或多个表创建，这取决于要创建视图的 SQL 查询。
视图（View）是一种虚表，允许用户实现以下几点：
用户或用户组查找结构数据的方式更自然或直观。
限制数据访问，用户只能看到有限的数据，而不是完整的表。
汇总各种表中的数据，用于生成报告。
视图中的数据并不在数据库中实际存在，行和列数据来自自定义视图的查询中使用的表，并且是在使用视图时动态生成的。 通俗的讲，视图只保存了sql语句的逻辑。
视图语法 演示示例：
首先我们先创建演示所用的表和插入数据：
-- 创建表---------------------- create table student( id int auto_increment primary key comment &#39;id&#39;, name varchar(30) not null comment &#39;姓名&#39;, sid varchar(20) not null unique comment &#39;学号&#39; )comment &#39;学生表&#39;; INSERT INTO student(name, sid) VALUES (&#39;张三&#39;, &#39;20190001&#39;); INSERT INTO student(name, sid) VALUES (&#39;李四&#39;, &#39;20190002&#39;); INSERT INTO student(name, sid) VALUES (&#39;王五&#39;, &#39;20190003&#39;); INSERT INTO student(name, sid) VALUES (&#39;赵六&#39;, &#39;20190004&#39;); INSERT INTO student(name, sid) VALUES (&#39;刘七&#39;, &#39;20190005&#39;); INSERT INTO student(name, sid) VALUES (&#39;周八&#39;, &#39;20190006&#39;); INSERT INTO student(name, sid) VALUES (&#39;吴九&#39;, &#39;20190007&#39;); INSERT INTO student(name, sid) VALUES (&#39;郑十&#39;, &#39;20190008&#39;); INSERT INTO student(name, sid) VALUES (&#39;钱十一&#39;, &#39;20190009&#39;); INSERT INTO student(name, sid) VALUES (&#39;孙十二&#39;, &#39;20190010&#39;); 然后我们利用上面的语法来创建，查询，修改并且删除视图。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/769604c95633b4cb97665f50153bdf99/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-23T12:14:28+08:00" />
<meta property="article:modified_time" content="2023-04-23T12:14:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL一文教你学会视图（包含with check option检查选项）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="%E8%A7%86%E5%9B%BE%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><a href="#%E8%A7%86%E5%9B%BE%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D" rel="nofollow">视图概念介绍</a></p> 
<p id="%E8%A7%86%E5%9B%BE%E8%AF%AD%E6%B3%95-toc" style="margin-left:0px;"><a href="#%E8%A7%86%E5%9B%BE%E8%AF%AD%E6%B3%95" rel="nofollow">视图语法</a></p> 
<p id="%E6%A3%80%E6%9F%A5%E9%80%89%E9%A1%B9%EF%BC%88with%20check%20option%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E6%A3%80%E6%9F%A5%E9%80%89%E9%A1%B9%EF%BC%88with%20check%20option%EF%BC%89" rel="nofollow">检查选项（with check option）</a></p> 
<p id="%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9B%B4%E6%96%B0-toc" style="margin-left:0px;"><a href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9B%B4%E6%96%B0" rel="nofollow">视图的更新</a></p> 
<p id="%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8-toc" style="margin-left:0px;"><a href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8" rel="nofollow">视图的作用</a></p> 
<p id="%E2%80%8B%E7%BC%96%E8%BE%91%C2%A0-toc" style="margin-left:0px;"><a href="#%E2%80%8B%E7%BC%96%E8%BE%91%C2%A0" rel="nofollow">​编辑 </a></p> 
<p id="%E6%80%BB%E7%BB%93-toc" style="margin-left:0px;"><a href="#%E6%80%BB%E7%BB%93" rel="nofollow">总结</a></p> 
<p id="%C2%A0-toc" style="margin-left:0px;"><a href="#%C2%A0" rel="nofollow"> </a></p> 
<p id="%C2%A0-toc" style="margin-left:0px;"><a href="#%C2%A0" rel="nofollow"> </a></p> 
<p id="%C2%A0-toc" style="margin-left:0px;"><a href="#%C2%A0" rel="nofollow"> </a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E8%A7%86%E5%9B%BE%E6%A6%82%E5%BF%B5%E4%BB%8B%E7%BB%8D">视图概念介绍</h2> 
<p>视图（View）只不过是通过相关的名称存储在数据库中的一个 SQL 语句。视图（View）实际上是一个以预定义的 SQL 查询形式存在的表的组合。</p> 
<p>视图（View）可以包含一个表的所有行或从一个或多个表选定行。视图（View）可以从一个或多个表创建，这取决于要创建视图的 SQL 查询。</p> 
<p>视图（View）是一种虚表，允许用户实现以下几点：</p> 
<ul><li> <p>用户或用户组查找结构数据的方式更自然或直观。</p> </li><li> <p>限制数据访问，用户只能看到有限的数据，而不是完整的表。</p> </li><li> <p>汇总各种表中的数据，用于生成报告。</p> </li></ul> 
<p><strong>视图中的数据并不在数据库中实际存在，行和列数据来自自定义视图的查询中使用的表，并且是在使用视图时动态生成的。 通俗的讲，视图只保存了sql语句的逻辑。</strong></p> 
<hr> 
<h2 id="%E8%A7%86%E5%9B%BE%E8%AF%AD%E6%B3%95">视图语法</h2> 
<p><img alt="" height="641" src="https://images2.imgbox.com/76/cc/CUrBggFr_o.png" width="809"></p> 
<p>演示示例：</p> 
<p>首先我们先创建演示所用的表和插入数据：</p> 
<pre><code class="language-sql">-- 创建表----------------------
create table student(
    id int auto_increment primary key comment 'id',
    name varchar(30) not null comment '姓名',
    sid varchar(20) not null unique comment '学号'
)comment '学生表';

INSERT INTO student(name, sid) VALUES ('张三', '20190001');
INSERT INTO student(name, sid) VALUES ('李四', '20190002');
INSERT INTO student(name, sid) VALUES ('王五', '20190003');
INSERT INTO student(name, sid) VALUES ('赵六', '20190004');
INSERT INTO student(name, sid) VALUES ('刘七', '20190005');
INSERT INTO student(name, sid) VALUES ('周八', '20190006');
INSERT INTO student(name, sid) VALUES ('吴九', '20190007');
INSERT INTO student(name, sid) VALUES ('郑十', '20190008');
INSERT INTO student(name, sid) VALUES ('钱十一', '20190009');
INSERT INTO student(name, sid) VALUES ('孙十二', '20190010');</code></pre> 
<p>然后我们利用上面的语法来创建，查询，修改并且删除视图。</p> 
<pre><code class="language-sql">-- 创建视图---------------------------
create or replace view stu_v_1 as select id,name from student where id&lt;=15;

-- 查询视图---------------------------
show create view stu_v_1;

select * from stu_v_1 where id&lt;5;

-- 修改视图------------------------------
create or replace view stu_v_1 as select id,name,sid from student where id&lt;=15;

alter view stu_v_1 as select id,name from student where id&lt;=15;

-- 删除视图--------------------------------
drop view stu_v_1;</code></pre> 
<p> 自上而下我们执行一下：</p> 
<p><img alt="" height="61" src="https://images2.imgbox.com/09/42/vlL3SXEw_o.png" width="348"></p> 
<p>我们可以看到在views里已经可以看到了我们创建的视图。</p> 
<p><img alt="" height="75" src="https://images2.imgbox.com/42/bf/CmO8g7F8_o.png" width="1200"> <img alt="" height="162" src="https://images2.imgbox.com/65/cd/Tn9s5PTD_o.png" width="341"></p> 
<p><img alt="" height="161" src="https://images2.imgbox.com/b0/7b/sXl6J3ty_o.png" width="395"> </p> 
<p> <img alt="" height="89" src="https://images2.imgbox.com/71/bd/HUmN3Ziz_o.png" width="499"></p> 
<p>视图删除成功。</p> 
<hr> 
<p>我们上面介绍了视图的创建，查询，修改，删除，那么我们能否通过视图来插入，更新数据呢？</p> 
<p>接下来，做一个测试：</p> 
<pre><code class="language-sql">insert into stu_view_2 values (11,'TOM'); #报错 not null

insert into stu_view_2 values (33,'tom');</code></pre> 
<p> <span style="background-color:#4da8ee;">当我们插入数据时候会发现报错，原因时我们创建表结构的时候设置了not null字段在sid里。所以会报错，当我们取消就不会报错了。</span></p> 
<p><img alt="" height="373" src="https://images2.imgbox.com/b4/a1/opF8OOpM_o.png" width="483"></p> 
<p><img alt="" height="397" src="https://images2.imgbox.com/86/d8/9m1Yd1Dk_o.png" width="383"> </p> 
<p> 可以看到原本的表和基于表的视图都插入成功了。</p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/59/16/fX5PNHux_o.png" width="506"></p> 
<p><img alt="" height="372" src="https://images2.imgbox.com/3a/fd/LxHOqXho_o.png" width="404"> </p> 
<p>当我们插入第二条数据的时候，我们发现表里面确实增加了，但是视图里面却没增加，原因就是视图创建的时候后面的条件是id&lt;=15 。所以在视图中查询不出来。那我们有没有什么方法来保持插入数据的正确性呢？</p> 
<hr> 
<h2 id="%E6%A3%80%E6%9F%A5%E9%80%89%E9%A1%B9%EF%BC%88with%20check%20option%EF%BC%89">检查选项（with check option）</h2> 
<p><img alt="" height="169" src="https://images2.imgbox.com/cc/bd/CtnwqP9u_o.png" width="779"></p> 
<p> (1)CASCADED(级联）</p> 
<p><img alt="" height="376" src="https://images2.imgbox.com/61/9f/QZYP8seR_o.png" width="790"></p> 
<p>举例说明：</p> 
<p></p> 
<pre><code class="language-sql">create view v1 as select id,name from student where id&lt;=15;
create view v2 as select id,name from v1 where id&gt;=10 with cascaded check option ;


insert into v2 values (9,'nine');
insert into v2 values (12,'th');
insert into v2 values (18,'ei');</code></pre> 
<p> </p> 
<p><img alt="" height="152" src="https://images2.imgbox.com/a9/78/Rkyvn65L_o.png" width="1159"> <img alt="" height="42" src="https://images2.imgbox.com/43/a5/YwSkoQxt_o.png" width="461"></p> 
<p><img alt="" height="49" src="https://images2.imgbox.com/1b/c0/vP69l1GF_o.png" width="494"> </p> 
<p>可以看到插入数据所满足的条件必须为v1和v2的共同条件。即使v1没有设立检查选项。</p> 
<p>（2）LOCAL（本地）</p> 
<p><img alt="" height="390" src="https://images2.imgbox.com/5a/2b/tgkPL3rm_o.png" width="782"></p> 
<p> </p> 
<pre><code class="language-sql">create view v1 as select id,name from student where id&lt;=15;
create view v2 as select id,name from v1 where id&gt;=10 with local check option ;
create view v3 as select id,name from student where id&lt;20;

insert into v2 values (9,'nine');
insert into v2 values (12,'th');
insert into v2 values (18,'ei');</code></pre> 
<p> <img alt="" height="33" src="https://images2.imgbox.com/36/c3/84yNDb5p_o.png" width="452"></p> 
<p> 可以看到插入成功。</p> 
<hr> 
<h2 id="%E8%A7%86%E5%9B%BE%E7%9A%84%E6%9B%B4%E6%96%B0">视图的更新</h2> 
<p><img alt="" height="685" src="https://images2.imgbox.com/78/54/i6aDXKi4_o.png" width="806"> </p> 
<hr> 
<h2 id="%E8%A7%86%E5%9B%BE%E7%9A%84%E4%BD%9C%E7%94%A8">视图的作用</h2> 
<h2 id="%E2%80%8B%E7%BC%96%E8%BE%91%C2%A0"><img alt="" height="467" src="https://images2.imgbox.com/df/c5/0kx4RPk1_o.png" width="817"> </h2> 
<hr> 
<h2 id="%E6%80%BB%E7%BB%93">总结</h2> 
<p>以上就是视图的所有内容，希望对你有帮助！ </p> 
<h2 id="%C2%A0"> </h2> 
<h2> </h2> 
<h2> </h2> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d91435bba0ff2660007d7f0365be9341/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python 画降雨图，mash 数据掩膜 裁剪出想要的区域，根据shp文件裁剪tif数据</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/625975945f98864aa7cd1511c8191f4c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">富文本编辑器TinyMCE使用方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>