<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CentOS7学习笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CentOS7学习笔记" />
<meta property="og:description" content="一. VM下安装CentOS 在Vmware中安装CentOS。
VM三种网络连接模式 桥接模式 虚拟系统可以和外部系统通讯，但是容易造成IP冲突。
NAT模式 网络地址转换模式，虚拟系统可以和外部系统通讯，而且不造成IP冲突。
仅主机模式 独立的系统，不和外部发生联系。
VM常用操作 拍摄快照和克隆。
安装vmtools 安装vmtools，能让我们在windows下更好的管理虚拟机。
安装步骤： 进入CentOS。 点击vm菜单的-&gt;install vmware tools。 centos会出现一个vm安装包，xx.tar.gz。 拷贝到/opt。 使用解压命令tar，得到一个安装文件。 cd/opt [进入到opt目录]。 tar -zxvf xx.tar.gz。 进入vm解压的目录，/opt目录下cd vmware... 安装 ./vmware-install.pl 全部使用默认设置即可，就可以安装成功。 注意：安装vmtools，需要有gcc。 设置共享文件夹 步骤： 菜单 -&gt; vm -&gt; setting -&gt; 选项 -&gt; 共享文件 共享文件夹在CentOS的/mnt/hgfs/下。
二. CentOS文件系统 在Linux世界里，一切皆文件。
linux的文件系统是采用级层式的树状目录结构，在此结构中的最上层是跟目录“/”，然后在此目录下再创建其他的目录。
深刻理解linux树状文件目录是非常重要的。
具体目录结构 /bin [常用] （/usr/bin、/usr/local/bin） 是Binary的缩写，这个目录存放着最经常使用的命令。 /sbin [常用] （/usr/sbin、/usr/local/sbin） s就是super user的意思，这里存放的是系统管理员使用的系统管理程序。 /home [常用] 存放普通用户的主目录，在Linux中每个用户都有自己的目录，一般该目录名是以用户的账号命名。 /root [常用] 该目录为系统管理员，也称作超级权限者的主目录。 /lib [常用] 系统开机所需要的最基本的动态连接共享库。其作用类似于Windows里的DLL文件。几乎所有应用程序都需要用到这些共享库。 /lost&#43;found 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。 /etc [常用] 所有系统管理所需要的配置文件和子目录。 /usr [常用] 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program file文件。 /boot [常用] 存放的是启动linux时使用的一些核心文件，包括一些连接文件以及镜像文件。 /proc 这个目录是一个虚拟目录，它是系统内存的映射，访问这个目录来获取系统信息。 /srv service缩写，该目录存放一些服务启动之后需要提取的数据。 /sys 这是linux2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/69f25ec6a0a75317b8d97fa701f342a1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-31T19:10:28+08:00" />
<meta property="article:modified_time" content="2021-03-31T19:10:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CentOS7学习笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_VMCentOS_0"></a>一. VM下安装CentOS</h2> 
<p>在Vmware中安装CentOS。</p> 
<h3><a id="VM_4"></a>VM三种网络连接模式</h3> 
<h4><a id="_6"></a>桥接模式</h4> 
<p>虚拟系统可以和外部系统通讯，但是容易造成IP冲突。</p> 
<h4><a id="NAT_10"></a>NAT模式</h4> 
<p>网络地址转换模式，虚拟系统可以和外部系统通讯，而且不造成IP冲突。</p> 
<h4><a id="_14"></a>仅主机模式</h4> 
<p>独立的系统，不和外部发生联系。</p> 
<h3><a id="VM_18"></a>VM常用操作</h3> 
<p>拍摄快照和克隆。</p> 
<h3><a id="vmtools_22"></a>安装vmtools</h3> 
<p>安装vmtools，能让我们在windows下更好的管理虚拟机。</p> 
<pre><code class="prism language-txt">安装步骤：
    进入CentOS。
    点击vm菜单的-&gt;install vmware tools。
    centos会出现一个vm安装包，xx.tar.gz。
    拷贝到/opt。
    使用解压命令tar，得到一个安装文件。
    cd/opt [进入到opt目录]。
    tar -zxvf xx.tar.gz。
    进入vm解压的目录，/opt目录下cd vmware...
    安装 ./vmware-install.pl
    全部使用默认设置即可，就可以安装成功。
    注意：安装vmtools，需要有gcc。
</code></pre> 
<h3><a id="_41"></a>设置共享文件夹</h3> 
<pre><code class="prism language-txt">步骤：
	菜单 -&gt; vm -&gt; setting -&gt; 选项 -&gt; 共享文件
</code></pre> 
<p>共享文件夹在CentOS的/mnt/hgfs/下。</p> 
<h2><a id="_CentOS_50"></a>二. CentOS文件系统</h2> 
<p>在Linux世界里，一切皆文件。</p> 
<p>linux的文件系统是采用级层式的树状目录结构，在此结构中的最上层是跟目录“/”，然后在此目录下再创建其他的目录。</p> 
<p>深刻理解linux树状文件目录是非常重要的。</p> 
<h3><a id="_58"></a>具体目录结构</h3> 
<pre><code class="prism language-linux">/bin [常用] （/usr/bin、/usr/local/bin） 是Binary的缩写，这个目录存放着最经常使用的命令。
/sbin [常用] （/usr/sbin、/usr/local/sbin） s就是super user的意思，这里存放的是系统管理员使用的系统管理程序。
/home [常用] 存放普通用户的主目录，在Linux中每个用户都有自己的目录，一般该目录名是以用户的账号命名。
/root [常用] 该目录为系统管理员，也称作超级权限者的主目录。
/lib [常用] 系统开机所需要的最基本的动态连接共享库。其作用类似于Windows里的DLL文件。几乎所有应用程序都需要用到这些共享库。
/lost+found 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文件。
/etc [常用] 所有系统管理所需要的配置文件和子目录。
/usr [常用] 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似于windows下的program file文件。
/boot [常用] 存放的是启动linux时使用的一些核心文件，包括一些连接文件以及镜像文件。
/proc 这个目录是一个虚拟目录，它是系统内存的映射，访问这个目录来获取系统信息。
/srv service缩写，该目录存放一些服务启动之后需要提取的数据。
/sys 这是linux2.6内核的一个很大的变化。该目录下安装了2.6内核中新出现的一个文件系统sysfs。
/tmp 这个目录存放一些临时文件。
/dev 类似于Windows的设备管理器，把所有的硬件用文件形式存储。
/media [常用] linux系统会自动识别一些设备，例如U盘，光驱等等。当识别后，linux会把识别的设备挂载到这个目录下。
/mnt [常用] 系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将外部的存储挂载在/mnt/上，然后进入该目录就可以查看里面的内容了。
/opt 这是给主机额外安装软件所摆放的目录。
/usr/local [常用] 这是另一个给主机额外安装软件所安装的目录。一般通过编译源码方式安装程序。
/var [常用] 这个目录中存放着在不断扩充着的东西，习惯将经常被修改的目录放在这个目录下。包括各种日志文件。
/selinux selinux是一种安全子系统，它能控制程序只能访问特定的文件，有三种工作模式，可以自行设置。
</code></pre> 
<h2><a id="__83"></a>三. 远程连接</h2> 
<p>使用xshell与xftp工具。</p> 
<h2><a id="_ViVim_87"></a>四. Vi与Vim</h2> 
<h3><a id="_89"></a>三种模式</h3> 
<h4><a id="_91"></a>正常模式</h4> 
<p>以vim打开一个文档就直接进入了一般模式（这是默认的模式）。在这个模式中，你可以使用[上下左右]按键来移动光标，你可以使用[删除字符]或[整行删除]来处理文档内容，可以使用[复制、粘贴]来处理你的文件数据。</p> 
<h4><a id="_95"></a>插入模式</h4> 
<p>按下i、I、o、O、a、A、r、R等任何一个字母之后才会进入编辑模式，一般来说按i即可。</p> 
<h4><a id="_99"></a>命令行模式</h4> 
<p>在这个模式中，可以提供你相关的指令，完成读取、存盘、替换、离开vim、显示行号等动作则是在此模式中达成的。</p> 
<h4><a id="_103"></a>模式转换</h4> 
<p><img src="https://images2.imgbox.com/86/ba/XIEt9tSu_o.jpg" alt="在这里插入图片描述"></p> 
<h4><a id="vimvi_105"></a>vim/vi命令</h4> 
<pre><code class="prism language-vim">拷贝当前行 yy，拷贝当前行向下的5行 5yy ,并粘贴 p。
删除当前行 dd，删除当前行向下的5行 5dd。
在文件中查找某个单词。命令行/关键字，回车查找，输入n就是查找下一个。
设置文件的行号，set nu；取消文件的行号，set nonu。
在一般模式下，使用快捷键G到该文档的最末尾行,gg到最首行。
在一般模式下使用快捷键u，撤销修改。
在一般模式下，输入行号，在输入shift+g，快速跳转到改=该行号。
更多操作可以查看更多文档。
</code></pre> 
<h4><a id="vimvi_118"></a>vim/vi键盘图</h4> 
<p><img src="https://images2.imgbox.com/f9/5c/28RFpRWc_o.jpg" alt="在这里插入图片描述"></p> 
<h2><a id="__121"></a>五. 关机&amp;重启</h2> 
<h3><a id="_123"></a>基本介绍</h3> 
<pre><code class="prism language-linux">shutdown -h now 	立刻进行关机。
shutdown -h 1 		给所有用户发送通知，在一分钟后进行关机。
shutdown -r now 	立即重启计算机。
shutdown = shutdown -h 1
halt 				关机。
reboot				重启计算机。
sync 				把内存和数据同步到磁盘。
</code></pre> 
<h3><a id="_135"></a>注意细节</h3> 
<ol><li>不管是重启系统还是关闭系统，首先要运行sync命令，把内存中的数据写到磁盘。</li><li>目前的shutdown/reboot/halt等命令均已经在关机前执行了sync。</li></ol> 
<h2><a id="__140"></a>六. 用户管理</h2> 
<h3><a id="_142"></a>用户登录&amp;注销</h3> 
<h4><a id="_144"></a>基本介绍</h4> 
<ol><li> <p>登录时尽量少用root账号登录，因为它是系统管理员，最大的权限，避免操作失误。可以利用普通用户登录，登录后再用“su - 用户名”命令来切换成系统管理员身份。</p> </li><li> <p>在提示符下输入logout即可注销用户。</p> </li></ol> 
<h4><a id="_150"></a>注意细节</h4> 
<ol><li>logout注销指令在图形运行级别无效，在 运行级别3 下有效。</li></ol> 
<h3><a id="_154"></a>添加用户</h3> 
<h4><a id="_156"></a>语法</h4> 
<pre><code class="prism language-linux">useradd 用户名；
useradd -d 指定家目录 用户名；
pwd -&gt; 查看当前路径。
</code></pre> 
<h4><a id="_164"></a>细节说明</h4> 
<p>当用户创建成功以后，会自动创建和用户同名的家目录。</p> 
<h3><a id="_168"></a>删除用户</h3> 
<pre><code class="prism language-linux">userdel 用户名	-&gt;	删除用户，但是保留家目录。
userdel -r 用户名	-&gt;	删除用户以及用户主目录。
</code></pre> 
<h3><a id="_175"></a>修改密码</h3> 
<pre><code class="prism language-linux">passwd 用户名	-&gt; 如果不加用户名修改当前用户。
</code></pre> 
<h3><a id="_181"></a>查询用户信息</h3> 
<h4><a id="_183"></a>基本语法</h4> 
<pre><code class="prism language-linux">id 用户名
</code></pre> 
<h4><a id="_189"></a>细节说明</h4> 
<p>当用户不存在时，返回无此用户。</p> 
<h3><a id="_193"></a>切换用户</h3> 
<p>在linux中，如果当前用户的权限不够，可以通过su指令，切换到高权限用户。</p> 
<h4><a id="_197"></a>基本语法</h4> 
<pre><code class="prism language-linux">su - 用户名
</code></pre> 
<h4><a id="_203"></a>细节说明</h4> 
<ol><li> <p>从高权限的用户切换到低权限用户，不需要输入密码，反之需要。</p> </li><li> <p>当需要返回到原来用户时，使用exit/logout指令。</p> </li></ol> 
<h3><a id="_209"></a>查看当前用户</h3> 
<pre><code class="prism language-linux">who am i
whoami
</code></pre> 
<h3><a id="_216"></a>用户组</h3> 
<p>类似于角色，系统可以对有共性（权限）的多个用户进行统一管理。</p> 
<h4><a id="_220"></a>新增组</h4> 
<pre><code class="prism language-linux">groupadd 组名
</code></pre> 
<h4><a id="_226"></a>删除组</h4> 
<pre><code class="prism language-linux">groupdel 组名
</code></pre> 
<h4><a id="_232"></a>增加用户时直接加上组</h4> 
<pre><code class="prism language-linux">useradd -g 用户组 用户名
</code></pre> 
<p>如果增加用户时没有选择组，则自动创建一个与用户同名的组，并将用户添加进入组中。</p> 
<h4><a id="_240"></a>修改用户的组</h4> 
<pre><code class="prism language-linux">usermod -g 用户组 用户名
</code></pre> 
<h3><a id="_246"></a>用户和组相关的文件</h3> 
<pre><code class="prism language-linux">/etc/passwd 文件
用户的配置文件，记录用户的各种信息。
每行的含义：用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录shell

/etc/shadow 文件
口令配置文件。
每行的含义：登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志

/etc/group 文件
组（group）的配置文件，记录linux包含的组的信息。
每行含义：组名:口令:组标识号:组内用户列表
</code></pre> 
<h2><a id="__262"></a>七. 运行级别</h2> 
<h3><a id="_264"></a>基本介绍</h3> 
<pre><code class="prism language-linux">0：关机。
1：单用户。
2：多用户状态没有网络服务。
3：多用户状态有网络服务。
4：系统未使用保留给用户。
5：图形界面。
6：系统重启。
</code></pre> 
<p>常用的运行级别是3和5，也可以指定默认运行级别。</p> 
<h3><a id="_278"></a>切换运行级别</h3> 
<pre><code class="prism language-linux">init [0 1 2 3 4 5 6]
</code></pre> 
<h3><a id="_284"></a>指定运行级别</h3> 
<p>CentOS7以前，/etc/inittab文件中指定。</p> 
<p>CentOS7以后进行了简化</p> 
<pre><code class="prism language-linux">multi-user.target:analogous to runlevel 3
graphical.target:analogous to runlevel 5
</code></pre> 
<p>To view current default target,run:</p> 
<pre><code class="prism language-linux">systemctl get-default
</code></pre> 
<p>To set a default target,run:</p> 
<pre><code class="prism language-linux">systemctl set-default TARGET.target
</code></pre> 
<h3><a id="_307"></a>面试</h3> 
<p>如何找回root用户密码？</p> 
<pre><code class="prism language-txt">1.首先启动系统，进入开机界面，在界面中按“e”进入编辑界面。
2.进入编辑界面，使用键盘上的上下键把光标往下移，找到以“linux16”开头内容所在行数，在最后面输入：init=/bin/sh。
3.接着，输入完成后，直接按快捷键：Ctrl + x进入单用户模式。
4.接着，在光标闪烁的位置中输入：mount -o remount,rw/(注意：各个但单词间有空格)，完成后按键盘的回车键。
5.在新的一行最后面输入：passwd，完成后按键盘的回车键。输入密码，然后再次确认密码即可，密码修改成功后，会显示passwd的样式，说明密码修改成功。
6.接着，在鼠标闪烁的位置中（最后一行中）输入：touch /.autorelabel（注意：touch与/后面有一个空格），完成后按键盘的回车键。
7.继续在光标闪烁的位置中，输入：exec /sbin/init(注意：exec与/后面有一个空格)，完成后按键盘的回车键，等待系统自动修改密码，完成后系统会自动重启，新的密码生效了。
</code></pre> 
<h2><a id="__321"></a>八. 帮助指令</h2> 
<h3><a id="man_323"></a>man获得帮助信息</h3> 
<h4><a id="_325"></a>基本语法</h4> 
<pre><code class="prism language-linux">man [命令或配置文件] -&gt; 获得帮助信息。
</code></pre> 
<p>在linux下，隐藏文件是以.开头，选项可以组合使用。例如：ls -al, ls -al /root。</p> 
<h3><a id="help_333"></a>help指令</h3> 
<h4><a id="_335"></a>基本语法</h4> 
<pre><code class="prism language-linux">help 命令 -&gt; 获得shell内置命令的帮助信息。
</code></pre> 
<h2><a id="__341"></a>九. 文件指令</h2> 
<h3><a id="_343"></a>文件查询</h3> 
<pre><code class="prism language-linux">pwd -&gt; 显示当前工作目录的绝对路径。
ls [选项] [目录或者文件] -&gt; 显示当前目录下的文件。
	-a：显示当前目录所有的文件和目录，包括隐藏的。
	-l：以列表的方式显示信息
cd -&gt; 切换到指定的目录。
	cd ~：回到自己的家目录。
	cd..：回到当前目录的上一级目录。
</code></pre> 
<h3><a id="_355"></a>文件创建</h3> 
<pre><code class="prism language-linux">mkdir [选项] 要创建的目录 -&gt; 创建目录。
		-p 创建多级目录
touch 文件名称 -&gt; 创建一个非空文件。
</code></pre> 
<h3><a id="_363"></a>文件删除</h3> 
<pre><code class="prism language-linux">rmdir [选项] 要删除的空目录。 -&gt; 只能删除空目录，有内容时无法删除。
rm [选项] 要删除的目录。 -&gt; 删除非空目录。
	-r：递归删除整个文件。
	-f：强制删除不提示。
</code></pre> 
<h3><a id="_372"></a>文件复制</h3> 
<pre><code class="prism language-linux">cp [选项] source dest
	-r：递归复制整个文件夹。
\cp -&gt; 强制覆盖不提示。
</code></pre> 
<h3><a id="_380"></a>文件移动</h3> 
<pre><code class="prism language-linux">mv oldNameFile newNameFile -&gt; 重命名
mv sourceFolder targetFolder -&gt; 移动文件或者文件名。 
</code></pre> 
<h3><a id="_387"></a>文件查看</h3> 
<pre><code class="prism language-linux">cat [选项] 要查看的文件
	-n 显示行号。
</code></pre> 
<h4><a id="_394"></a>使用细节</h4> 
<p>cat只能浏览文件，而不能修改文件，为了浏览方便，一般会带上 管道命令 | more。</p> 
<pre><code class="prism language-linux">cat -n 文件 | more [进行交互]
</code></pre> 
<h3><a id="more_402"></a>more指令</h3> 
<p>more指令是一个基于vi编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。more指令中内置了若干快捷键（交互指令）。</p> 
<p><img src="https://images2.imgbox.com/04/19/qhefTBnc_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="less_409"></a>less指令</h3> 
<p>less指令用来分屏查看文件内容，它的功能与more指令类似，但是比more指令更加强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载的内容，对于显示大型文件具有较高的效率。</p> 
<p><img src="https://images2.imgbox.com/43/65/Wm4LvP0I_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="echo_416"></a>echo指令</h3> 
<p>echo输出内容到控制台。</p> 
<h4><a id="_420"></a>案例</h4> 
<pre><code class="prism language-linux">使用echo输出环境变量：
	echo $PATH $HOSTNAME
使用echo输出字符串：
	echo ""
</code></pre> 
<h3><a id="head_429"></a>head指令</h3> 
<p>head用于显示文件的开头部分内容，默认情况下head指令显示文件前10行内容。</p> 
<h4><a id="_433"></a>基本语法</h4> 
<pre><code class="prism language-linux">head 文件
head -n 5 文件 -&gt; 查看文件前5行。
</code></pre> 
<h3><a id="tail_440"></a>tail指令</h3> 
<p>tail用于输出文件中尾部的内容，默认情况下tail指令显示文件最后10行内容。</p> 
<h4><a id="_444"></a>基本语法</h4> 
<pre><code class="prism language-linux">tail 文件 -&gt; 查看文件尾10行内容。
tail -n 5 文件 -&gt; 查看文件尾5行的内容，5可以是任意数。
tail -f -&gt; 实时跟踪文档所有的更新。
</code></pre> 
<h3><a id="_452"></a>&gt;指令与&gt;&gt;指令</h3> 
<p>&gt;输出重定向&gt;&gt;追加</p> 
<h4><a id="_456"></a>基本语法</h4> 
<pre><code class="prism language-linux">[输出内容] &gt; 文件 -&gt; 覆盖写。
[输出内容] &gt;&gt; 文件 -&gt; 追加写。
</code></pre> 
<h3><a id="ln_463"></a>ln指令</h3> 
<p>软链接也称为符号链接，类似于windows里的快捷方式，主要存放了链接其它文件的路径。</p> 
<h4><a id="_467"></a>基本语法</h4> 
<pre><code class="prism language-linux">ln -s [源文件或目录] [软链接名] -&gt; 给源文件创建一个软链接。
</code></pre> 
<h4><a id="_473"></a>细节说明</h4> 
<p>当我们使用pwd指令查看目录时，任然看到的是软链接所在的目录。</p> 
<h3><a id="history_477"></a>history指令</h3> 
<p>查看已经执行过历史命令，也可以执行历史命令。</p> 
<h4><a id="_481"></a>基本语法</h4> 
<pre><code class="prism language-linux">history -&gt; 查看已经执行过的历史命令。
![编号] -&gt; 执行编号对应的历史命令。
</code></pre> 
<h2><a id="__488"></a>十. 时间日期指令</h2> 
<h3><a id="date_490"></a>date指令</h3> 
<h4><a id="_492"></a>基本语法</h4> 
<pre><code class="prism language-linux">date -&gt; 显示当前时间。
date +%Y -&gt; 显示当前年份。
date +%m -&gt; 显示当前月份。
date +%d -&gt; 显示当前是哪一天。
date "+%Y-%m-%d %H:%M:%S" -&gt; 显示年月日时分秒。
date -s 字符串时间  -&gt; 设置时间。
</code></pre> 
<h3><a id="cal_503"></a>cal指令</h3> 
<h4><a id="_505"></a>基本语法</h4> 
<pre><code class="prism language-linux">cal [选项] -&gt; 不加选项，显示本月月历。
显示2021年历：cal 年份
</code></pre> 
<h2><a id="__512"></a>十一. 搜索查找指令</h2> 
<h3><a id="find_514"></a>find指令</h3> 
<p>find指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或者目录显示在终端。</p> 
<h4><a id="_518"></a>基本语法</h4> 
<pre><code class="prism language-linux">find [搜索范围] [选项]
				-name&lt;文件名&gt; :按照指定的文件名查找模式查找文件。
				-user&lt;用户名&gt; :查找属于指定用户名所有文件。
				-size&lt;文件大小&gt; :按照指定的文件大小查找文件。
</code></pre> 
<h3><a id="locate_527"></a>locate指令</h3> 
<p>locate指令可以快速定位文件路径。locate指令利用事先建立的系统中所有文件名称及路径的locate数据库实现快速定位给定的文件。locate指令无需遍历整个文件系统，查询速度较快。为了保证查询结果准确度，管理员必须定期更新locate时刻。</p> 
<h4><a id="_531"></a>基本语法</h4> 
<pre><code class="prism language-linux">updatedb    -&gt; 创建locate数据库
locate 搜索文件
</code></pre> 
<h4><a id="_538"></a>特别说明</h4> 
<p>由于locate指令基于数据库进行查询，所以第一次运行前，必须使用updatedb指令创建locate数据库。</p> 
<h3><a id="which_542"></a>which指令</h3> 
<p>which指令，可以查看某个指令在哪个目录下，比如ls指令在哪个目录下。</p> 
<pre><code class="prism language-linux">which 指令名称
</code></pre> 
<h3><a id="grep_550"></a>grep指令和管道符|</h3> 
<p>grep过滤查找，管道符|，表示将前一个命令的处理结果输出传递给后面的命令处理。</p> 
<h4><a id="_554"></a>基本语法</h4> 
<pre><code class="prism language-linux">grep [选项] 查找内容 源文件
	-n 显示匹配行以及行号。
	-i 忽略字母大小写。
</code></pre> 
<h4><a id="_562"></a>应用实例</h4> 
<pre><code class="prism language-linux">输出指令 | grep "查找字符"
grep -n "查找字符" 源文件
</code></pre> 
<h2><a id="__569"></a>十二. 解压指令</h2> 
<h3><a id="gzipgunzip_571"></a>gzip/gunzip指令</h3> 
<p>gzip用于压缩文件，gunzip用于解压文件。</p> 
<h4><a id="_575"></a>基本语法</h4> 
<pre><code class="prism language-linux">gzip 文件 (功能描述：压缩文件，只能将文件压缩为*.gz文件。)
gunzip 文件.gz（功能描述：解压缩文件命令。）
</code></pre> 
<h3><a id="zipunzip_582"></a>zip/unzip指令</h3> 
<p>zip用于压缩文件，unzip用于解压的，这个在项目打包发布中很有用。</p> 
<h4><a id="_586"></a>基本语法</h4> 
<pre><code class="prism language-linux">zip [选项] xxx.zip 将要压缩的内容 -&gt; 压缩文件目录和命令。
	-r -&gt; 递归压缩，即压缩目录。
unzip [选项] xxx.zip 
	-d -&gt; 指定文件解压后存放的目录。
</code></pre> 
<h3><a id="tar_595"></a>tar指令</h3> 
<p>tar指令是打包指令，最后打包后的文件是.tar.gz的文件。</p> 
<h4><a id="_599"></a>基本语法</h4> 
<pre><code class="prism language-linux">tar [选项] xxx.tar.gz 打包内容 [-C 指定解压目录]
	-c 产生.tar打包文件。
	-v 显示详细信息。
	-f 指定压缩后的文件名。
	-z 打包同时压缩。
	-x 解压.tar文件。
</code></pre> 
<h2><a id="__610"></a>十三. 组</h2> 
<p>在linux中的每个用户必须属于一个组，不能独立于组外。在linux中每个文件所有者、所在组、其它组的概念。</p> 
<h3><a id="_614"></a>所有者与所在组</h3> 
<h4><a id="_616"></a>查看文件的所有者</h4> 
<pre><code class="prism language-linux">ls -ahl
</code></pre> 
<h4><a id="_622"></a>修改文件所有者</h4> 
<pre><code class="prism language-linux">chown 用户名 文件名
</code></pre> 
<h4><a id="_628"></a>修改文件所在组</h4> 
<p>当某个用户创建了一个文件后，这个文件的所在组就是该用户所在组。</p> 
<pre><code class="prism language-linux">chgrp 组名 文件名
</code></pre> 
<h3><a id="_636"></a>组的创建</h3> 
<pre><code class="prism language-linux">groupadd 组名
</code></pre> 
<h3><a id="_642"></a>其它组</h3> 
<p>除文件所有者和所在组的用户外，系统的其它用户都是文件的其它组。</p> 
<h3><a id="_646"></a>改变用户所在组</h3> 
<pre><code class="prism language-linux">usermod -g 新组名 用户名 -&gt; 改变用户所在的组。
usermod -d 目录名 用户名 -&gt; 改变用户的初始目录。
特别说明：用户需要有进入到新目录的权限。
</code></pre> 
<h2><a id="__654"></a>十四. 权限</h2> 
<p>ls -l查询出来的结果前10个字符确定不同用户能对文件干什么。</p> 
<pre><code class="prism language-txt">第1位确定文件类型：d,-,l,c,b
	d是目录，相当于windows的文件夹。
	-是普通文件。
	l是链接，相当于windows的快捷方式。
	c是字符设备文件，鼠标，键盘。
	b是块设备，比如硬盘。
第2-4位确定所有者（该文件的所有者）拥有该文件的权限。
第5-7位确定所属组（同用户组的）拥有该文件的权限。
第8-10位确定其它用户拥有该文件的权限。
</code></pre> 
<h3><a id="rwx_670"></a>rwx作用到文件</h3> 
<pre><code class="prism language-linux">[r]代表可读：可以查看读取。
[w]代表可写：可以修改，但是不代表可以删除该文件，删除一个文件的前提条件是对该文件所在的目录有写权限。
[x]代表可执行：可以被执行。
</code></pre> 
<h3><a id="rwx_678"></a>rwx作用到目录</h3> 
<pre><code class="prism language-linux">[r]代表可读：可以读取，ls查看目录内容。
[w]代表可写：可以修改，对目录内创建+删除+重命名目录。
[x]代表可执行：可以进入该目录。
</code></pre> 
<h3><a id="_686"></a>其它说明</h3> 
<pre><code class="prism language-linux">-rw-r--r--. 1 fox  monster 4.0K Mar 18 16:21 ok.txt
1：文件：硬连接数。目录：子目录数。
fox：用户。
monster：文件所在组。
4.0K：文件大小。
Mar 18 16:21：最后修改日期。
ok.txt：文件名。
</code></pre> 
<h3><a id="_698"></a>修改权限</h3> 
<p>通过chmod指令，可以修改文件或者目录的权限。</p> 
<h4><a id="_702"></a>第一种方式</h4> 
<p>使用+、-、=变更权限。</p> 
<p>u：所有者，g：所有组，o：其它人，a：所有人（u、g、o总和）。</p> 
<p>使用实例：</p> 
<pre><code class="prism language-linux">chmod u=rwx,g=rx,o=x 文件/目录名
chmod o+w 文件/目录名
chmod a-x 文件/目录名
</code></pre> 
<h4><a id="_716"></a>第二种方式</h4> 
<p>通过数字变更权限。</p> 
<p>r=4,w=2,x=1</p> 
<p>使用实例：</p> 
<pre><code class="prism language-linux">chmod 751 文件目录名。
</code></pre> 
<h3><a id="_728"></a>修改文件所有者</h3> 
<h4><a id="_730"></a>基本介绍</h4> 
<pre><code class="prism language-linux">chown newowner 文件/目录 -&gt; 改变所有者。
chown newowner:newgroup 文件/目录 -&gt; 改变所有者和所在组。
chown -R newowner 目录 -&gt; 改变所有者，使其下所有子文件或目录递归生效。
</code></pre> 
<h3><a id="_738"></a>修改文件所在组</h3> 
<h4><a id="_740"></a>基本介绍</h4> 
<pre><code class="prism language-linux">chgrp newgroup 文件/目录 -&gt; 改变所在组。
chgrp -R newgroup 目录 -&gt; 改变所在组，使其下所有子文件或目录递归生效。
</code></pre> 
<h3><a id="_747"></a>权限管理应用实例</h3> 
<pre><code class="prism language-linux">x:表示可以进入到该目录，比如cd。
r:表示可以ls，将目录的内容显示。
w:表示可以在该目录，删除或者创建文件。
</code></pre> 
<h2><a id="_crond_755"></a>十五. crond任务调度</h2> 
<p>crontab进行任务调度。</p> 
<h3><a id="_759"></a>概述</h3> 
<h4><a id="_761"></a>任务调度</h4> 
<p>是指系统在某个时间执行的特定的命令或程序。</p> 
<h4><a id="_765"></a>任务调度分类</h4> 
<h5><a id="_767"></a>系统工作</h5> 
<p>有些重要的工作必须周而复始的执行</p> 
<h5><a id="_771"></a>个别用户工作</h5> 
<p>个别用户可能希望执行某些程序。</p> 
<h3><a id="_775"></a>基本语法</h3> 
<pre><code class="prism language-linux">crontab [选项]
		-e 编辑crontab定时任务。
		-l 查询crontab任务。
		-r 删除当前用户所有的crontab任务。
service crond restart -&gt; 重启任务调度。
</code></pre> 
<h3><a id="_785"></a>快速入门</h3> 
<pre><code class="prism language-linux">*/1 * * * * ls -l /etc/ &gt; /tmp/to.txt
</code></pre> 
<h3><a id="_791"></a>参数细节说明</h3> 
<p><img src="https://images2.imgbox.com/be/8b/0cJthNwm_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="_796"></a>特殊符号</h3> 
<p><img src="https://images2.imgbox.com/10/a9/oJ1hYn7a_o.jpg" alt="在这里插入图片描述"></p> 
<h2><a id="_at_800"></a>十六. at定时任务</h2> 
<p>at命令是一次性定时任务，at的守护进程atd会以后台模式运行，检查作业队列来运行。</p> 
<p>默认情况下，atd守护进程会每60秒检查作业队列，有作业时，会检查作业运行时间，如果时间与当前时间匹配，则运行此作业。</p> 
<p>at命令是一次性定时计划任务，执行完一个任务后不再执行此任务了。</p> 
<p>在使用at命令的时候，一定要保证atd进程启动，可以使用相关指令来查看。</p> 
<pre><code class="prism language-linux">ps -ef | grep atd
</code></pre> 
<h3><a id="at_814"></a>at命令格式</h3> 
<pre><code class="prism language-linux">at [选项] [时间]
	-m:当指定的任务完成后，给用户发邮件，即使没有标准输出。
	-I:atq别名。
	-d:atrm别名。
	-v:显示任务将被执行的时间。
	-c:打印任务的内容到标准输出。
	-V:显示版本信息。
	-q&lt;队列&gt;:使用指定的队列。
	-f&lt;文件&gt;:从指定文件读入任务，而不是从标准输入读入。
	-t&lt;时间参数&gt;:以时间参数的形式提交要运行的任务。
</code></pre> 
<h3><a id="at_829"></a>at时间定义</h3> 
<p>at指定时间的方法</p> 
<pre><code class="prism language-txt">1.接受在当天的hh:mm(小时:分钟)式的时间指定。假如该时间已过去，那么就放在第二天执行。
2.使用midnight(深夜)、noon(中午)、teatime(饮茶时间一般是下午四点)等比较模糊的词语来指定时间。
3.采用12小时进制，即在时间后面加上AM(上午)、PM(下午)来说明是上午还是下午。
4.指定命令执行的具体日期，指定格式位month、day或mm/dd/yy(月/日/年)或dd.mm.yy(日.月.年)，指定日期必须更在指定时间后面。
5.使用相对计时法。格式为：now + count time-units, now就是当前时间，time-units是时间单位，这里能够是minutes、hours、days、weeks。count是时间的数量，几天，几小时。
6.直接使用today、tomorrow来指定完成命令的时间。
</code></pre> 
<p>Ctrl + D结束at命令输入，输入2次。</p> 
<h2><a id="_Linux_844"></a>十七. Linux分区</h2> 
<p>linux来说无论有几个分区，分给哪一个目录使用，它归根结底就只有一个根目录，一个独立且唯一的文件结构，linux中每个分区都是用来组成整个文件系统的一部份。</p> 
<p>linux采用了一种叫“载入”的处理方法，它的整个文件系统中包含了一整套的文件和目录，且将一个分区和一个目录联系起来。这时要载入的一个分区将使它的存储空间在一个目录下获得。</p> 
<h3><a id="_850"></a>硬盘说明</h3> 
<p>linux硬盘分IDE硬盘和SCSI硬盘，目前基本上是SCSI硬盘。</p> 
<pre><code class="prism language-linux">对于IDE硬盘，驱动器标识符为“hdx~”，其中“hd”表明分区所在的设备的类型，这里是指IDE硬盘了。“x”为盘号（a为基本盘，b为基本从属盘，c为辅助主盘，d为辅助从属盘），"~”代表分区，前四个分区用数字1到4表示，它们是主分区或者扩展分区，从5开始就是逻辑分区。
对于SCSI硬盘则标识为“sdx~”,SCSI硬盘是用"sd"来表示分区所在设备类型的，其余则和IDE硬盘的表示方法一样。
</code></pre> 
<h3><a id="_859"></a>查看分区</h3> 
<pre><code class="prism language-linux">lsblk
lsblk -f
</code></pre> 
<h3><a id="_866"></a>添加硬盘</h3> 
<pre><code class="prism language-txt">虚拟机里添加一块新硬盘。
fdisk /dev/sdb -&gt; 分区命令 
开始对/sdb分区
    m 显示命令列表
    p 显示磁盘分区 同fdisk -l
    n 新增分区
    d 删除分区
    w 写入并退出
    说明：开始分区后输入n，新增分区，然后选择p，分区类型为主分区。两次回车默认剩余全部空间。最后输入w写入分区并退出，若不保存退出输入q。
格式化分区
	mkfs -t ext4 /dev/sdb2
挂载分区
	mkdir newdisk
	mount /dev/sdb2 /newdisk/
卸载分区
	umount /dev/sdb2 或 umount /newdisk
注意：
	命令行挂载重启以后会失效。
永久挂载
	通过修改/etc/fstab实现挂载
	添加完成后执行mount -a即刻生效
</code></pre> 
<h3><a id="_892"></a>磁盘情况查询</h3> 
<h4><a id="_894"></a>查询整体磁盘使用情况</h4> 
<pre><code class="prism language-linux">df -h -&gt; 查询系统整体磁盘使用情况。
</code></pre> 
<h4><a id="_900"></a>查询指定目录的磁盘占用情况</h4> 
<pre><code class="prism language-linux">du -h -&gt; 查询指定目录的磁盘大小情况，默认为当前目录。
	-s:指定目录占用大小汇总。
	-h:带计量单位。
	-a:含文件。
	--max-depth=1:子目录深度。
	-c:列出明细的同时，增加汇总值。
</code></pre> 
<h4><a id="_911"></a>工作实用指令</h4> 
<pre><code class="prism language-linux">1. 统计/opt文件夹下文件的个数
	ls -l /opt | grep "^-" | wc -l
2. 统计/opt文件夹下目录的个数
	ls -l /opt | grep "^d" | wc -l
3. 统计/opt文件夹下文件的个数，包括子文件夹里的
	ls -lR /opt | grep "^-" | wc -l
4. 统计/opt文件夹下目录的个数，包括子文件夹里的
	ls -lR /opt | grep "^d" | wc -l
5. 以树状显示目录结构tree目录，注意，如果没有tree，则使用yum install tree安装
</code></pre> 
<h2><a id="__925"></a>十八. 网络配置</h2> 
<h3><a id="ip_927"></a>查看网络ip和网关</h3> 
<pre><code class="prism language-linux">ipconfig -&gt; windows下
ifconfig -&gt; linux下
ping 目的主机 -&gt; 测试当前服务器是否可以连接目的主机。
</code></pre> 
<h3><a id="ip_935"></a>配置ip地址</h3> 
<h4><a id="_937"></a>第一种方案</h4> 
<p>图形界面。</p> 
<h4><a id="_941"></a>第二种方案</h4> 
<p>直接修改配置文件来指定ip，并可以连接到外网。</p> 
<p>编辑 /etc/sysconfig/network-scripts/ifcfg-ens33文件。</p> 
<h5><a id="ifcfgens33_947"></a>ifcfg-ens33文件说明</h5> 
<pre><code class="prism language-txt">TYPE="Ethernet"
PROXY_METHOD="none"
BROWSER_ONLY="no"
BOOTPROTO="static"
DEFROUTE="yes"
IPV4_FAILURE_FATAL="no"
IPV6INIT="yes"
IPV6_AUTOCONF="yes"
IPV6_DEFROUTE="yes"
IPV6_FAILURE_FATAL="no"
IPV6_ADDR_GEN_MODE="stable-privacy"
NAME="ens33"
UUID="c54e7807-4853-4402-9de9-cb6ef5cbc45c"
DEVICE="ens33"
ONBOOT="yes"
#IP地址
IPADDR=192.168.200.130
#网关
GATEWAY=192.168.200.2
#域名解析器
DNS1=192.168.200.2
</code></pre> 
<p>重启网络服务或者重启系统生效。</p> 
<h4><a id="host_975"></a>设置主机名和host映射</h4> 
<h5><a id="_977"></a>设置主机名</h5> 
<p>为了方便记忆，可以给linux系统设置主机名，也可以根据需要修改主机名。</p> 
<p>指令hostname：查看主机名。</p> 
<p>修改文件在/etc/hostname指定。</p> 
<p>修改后重启生效。</p> 
<h5><a id="hosts_987"></a>设置hosts映射</h5> 
<h6><a id="windows_989"></a>windows</h6> 
<pre><code class="prism language-txt">在c:\Windows\System32\drivers\etc\hosts文件指定即可
</code></pre> 
<h6><a id="linux_995"></a>linux</h6> 
<pre><code class="prism language-txt">在/etc/hosts文件指定
</code></pre> 
<h2><a id="__1001"></a>十九. 进程（重点）</h2> 
<h3><a id="_1003"></a>基本介绍</h3> 
<p>在linux中，每个执行的程序都称为一个进程。每一个进程都分配一个id号。</p> 
<p>每个进程都可以以两种方式存在的，前台与后台。所谓前台进程就是用户目前的屏幕上可以进行操作的。后台进程则是实际在操作的，但由于屏幕上无法看到进程，通常使用后台方式执行。</p> 
<p>一般系统的服务都是以后台进程的方式存在，而且都会常驻在系统中。直到关机才结束。</p> 
<h3><a id="_1011"></a>进程查询</h3> 
<h4><a id="PS_1013"></a>PS指令</h4> 
<p>ps命令是用来查看目前系统中，有哪些正在执行，以及它们的执行情况。可以不加任何参数。</p> 
<pre><code class="prism language-linux">ps [选项]
	-a：显示当前终端的所有进程信息。
	-u：以用户的格式显示进程信息。
	-x：显示后台进程运行的参数
	
	-e：显示所有进程。
	-f：全格式。
	
使用方式：
	ps -aux | grep xxx -&gt; 查看有没有我需要的指令。
显示结果：
	USER：用户名称。
	PID：进程号。
	%CPU：进程占用的cpu百分比。
	%MEM：进程占用物理内存的百分比。
	VSZ：进程占用虚拟内存的大小（单位：KB）。
	RSS：进程占用物理内存的大小（单位：KB）。
	TT：终端名称，缩写。
	STAT：进程状态，其中S-睡眠，s-表示该进程是会话的先导进程，N-表示进程拥有比普通优先级更低的优先级，R-正在运行，D-短期等待，Z-僵死进程，T-被跟踪或者被停止等等。
	STARTED：进程启动时间。
	TIME：cpu时间，即进程使用cpu的总时间。
	COMMAND:启动进程所用的命令和参数，如果过长会被截断显示。

使用方式：
	ps -ef是以全格式显示当前所有进程。
		-e：显示所有进程。
		-f：全格式。
显示结果：
	UID：用户ID。
	PID：进程ID。
	PPID：父进程ID。
	C：CPU用于计算执行优先级的因子。数值越大，表明进程是CPU密集型运算。执行优先级会越低；数值越小，表明进程是I/O密集型运算，执行优先级会提高。
	STIME：进程启动时间。
	TTY：完整的终端名称。
	TIME：CPU时间。
	CMD：启动进程所用的命令和参数。
</code></pre> 
<h4><a id="pstree_1056"></a>pstree指令</h4> 
<p>查看进程树。</p> 
<pre><code class="prism language-linux">pstree [选项] 可以更加直观的来查看进程信息。
		-p：显示进程的PID。
		-u：显示进程的所属用户。
</code></pre> 
<h3><a id="_1066"></a>终止进程</h3> 
<p>若是某个进程执行一般需要停止时，或是已消了很多资源时，可以考虑停止该进程。使用kill命令来完成此项任务。</p> 
<h4><a id="killkillall_1070"></a>kill和killall</h4> 
<pre><code class="prism language-linux">kill [选项] 进程号 -&gt; 通过进程号杀死/终止进程。
killall 进程名称 -&gt; 通过进程名称杀死进程，也支持通配符，这在系统因负载过大而变得很慢时很有用。
	-9：表示强迫进程立即停止。
/bin/systemctl start [服务名] -&gt; 重启服务。
</code></pre> 
<h3><a id="service_1079"></a>服务（service）管理</h3> 
<p>服务（service）本质就是进程，但是是在后台的，通常都会监听某个端口，等待其它程序请求，比如（mysql，sshd 防火墙等），因此我们又称为守护进程，是linux中非常重要的知识点。【原理图】</p> 
<h4><a id="service_1083"></a>service指令</h4> 
<pre><code class="prism language-linux">service 服务名 [start | stop | restart | reload | status]
CentOS7.0以后很多服务不再使用service，而是systemctl。
</code></pre> 
<h4><a id="_1090"></a>查看服务</h4> 
<pre><code class="prism language-linux">service指令管理的服务在/etc/init.d/查看。
setup -&gt; 看到系统的所有服务。
</code></pre> 
<h4><a id="_1097"></a>服务的运行级别</h4> 
<p>linux系统有7种运行级别：常用的级别是3和5。</p> 
<pre><code class="prism language-linux">运行级别0：系统停机状态，系统默认运行级别不能设为0，否则不能正常启动。
运行级别1：单用户工作状态，root权限，用于系统维护，禁止远程登录。
运行级别2：多用户工作状态（没有NFS），不支持网络。
运行级别3：完全的多用户状态（有NFS），登录后进入控制台命令行模式,无界面。
运行级别4：系统未使用，保留。
运行级别5：X11控制台，登录后进入图形GUI模式。
运行级别6：系统正常关闭并重启，默认运行级别不能设为6，否则不能正常启动。
</code></pre> 
<h4><a id="_1111"></a>开机流程说明</h4> 
<pre><code class="prism language-linux">开机 -&gt; BIOS -&gt; /boot -&gt; systemmd进程1 -&gt; 运行级别 -&gt; 运行级对应的运行服务
</code></pre> 
<h4><a id="chkconfig_1117"></a>chkconfig指令</h4> 
<p>通过chkconfig命令可以给服务的各个运行级别设置自启动/关闭。</p> 
<p>chkconfig指令管理的服务在/etc/init.d/中查看。</p> 
<p>注意：CentOS7.0后，很多服务使用systemctl管理。</p> 
<h5><a id="_1125"></a>基本语法</h5> 
<pre><code class="prism language-linux">chkconfig --list [| grep xxx]
chkconfig 服务名 --list
chkconfig --level 5 服务名 on/off
</code></pre> 
<p><em><strong>chkconfig重新设置服务后自启动或关闭，需要重启机器reboot生效。</strong></em></p> 
<h4><a id="systemctl_1135"></a>systemctl管理指令</h4> 
<h5><a id="_1137"></a>基本语法</h5> 
<pre><code class="prism language-linux">systemctl [start | stop | restart | status] 服务名 （临时生效）
</code></pre> 
<p>systemctl指令管理的服务在/usr/lib/systemd/system查看。</p> 
<h5><a id="_1145"></a>设置服务自启动</h5> 
<pre><code class="prism language-linux">systemctl list-unit-files [| grep 服务名]（查看服务开机启动状态，gerp可以进行过滤）
systemctl enable 服务名（设置服务开机启动，在运行状态3和5永久生效。服务名可以写一半。）
systemctl disable 服务名 （关闭服务开机启动，在运行状态3和5永久生效.服务名可以写一半。）
systemctl is-enable 服务名 （查询某个服务是否是自动启动.服务名可以写一半。）
</code></pre> 
<h5><a id="_1154"></a>细节讨论</h5> 
<p>关闭或者启用防火墙后，立即生效。[telnet测试某个端口即可]</p> 
<p>这种关闭方式只是临时生效，当系统重启后，还是回归以前对服务的设置。</p> 
<p>如果希望设置某个服务自启动或关闭永久生效，要使用systemctl [enable|disable] 服务名.[演示]</p> 
<h4><a id="_1162"></a>打开或者关闭指定端口</h4> 
<p>在真正的生产环境，往往需要将防火墙打开，但问题来了，如果我们把防火墙打开，那么外部请求数据包就不能跟服务器监听端口通讯。这时，需要打开指定的端口。比如80、22、8080等。</p> 
<h5><a id="firewall_1166"></a>firewall指令</h5> 
<pre><code class="prism language-linux">firewall-cmd --permanent --add-port=端口号/协议 -&gt; 打开端口。
firewall-cmd --permanent --remove-port=端口号/协议 -&gt; 关闭端口。
firewall-cmd --reload -&gt; 重新载入，才能生效。
firewall-cmd --query-port=端口号/协议 -&gt; 查询端口是否生效。
</code></pre> 
<h5><a id="_1175"></a>应用案例</h5> 
<pre><code class="prism language-linux">1.启用防火墙，测试111端口是否能telnet。
	不行
2.开放111端口。
	firewall-cmd --permanent --add-port=111/tcp;
	firewall-cmd --reload;
3.再次关闭111端口
	firewall-cmd --permanent --remove-port=111/tcp；
	firewall-cmd --reload;
</code></pre> 
<h3><a id="_1188"></a>动态进程监控</h3> 
<p>top与ps命令很相似。它们都用来显示当前正在执行的进程。top与ps最大的不同之处，在于top在执行一段时间可以更新正在运行的进程。</p> 
<h4><a id="_1192"></a>基本语法</h4> 
<pre><code class="prism language-linux">top [选项]
	-d -&gt; 指定top命令每隔几秒更新，默认是3秒。
	-i -&gt; 使top不显示任何闲置或者僵死进程。
	-p -&gt; 通过指定监控进程ID来仅仅监控某个进程的状态。
</code></pre> 
<h4><a id="_1201"></a>交互操作</h4> 
<pre><code class="prism language-linux">操作		功能
P		以CPU使用量排序，默认就是此项。
M		以内存的使用率排序。
N		以PID排序。
q		退出top。
</code></pre> 
<h4><a id="_1211"></a>应用实例</h4> 
<pre><code class="prism language-linux">案例1.监视特定用户，比如我们监控tom用户。
	top：输入此命令，按回车键，查看执行进程。
	u：然后输入"u"回车，再输入用户名即可。
案例2.终止指定的进程，比如我们要结束tom登录。
	top：输入此命令，按回车键，查看执行进程。
	k:然后输入k回车，再输入要结束的进程ID。
</code></pre> 
<h3><a id="netstat_1222"></a>查看系统网络情况netstat</h3> 
<h4><a id="_1224"></a>基本语法</h4> 
<pre><code class="prism language-linux">netstat [选项]
		-an -&gt; 按一定的顺序排列输出。
		-p -&gt; 显示哪个进程在调用。
</code></pre> 
<h3><a id="ping_1232"></a>检测主机连接命令ping</h3> 
<p>是一种网络测试工具，它主要是用来检测远程主机是否正常，或是两部主机间的网线或网卡故障。</p> 
<pre><code class="prism language-linux">ping 对方的ip地址
</code></pre> 
<h2><a id="_rpmyum_1240"></a>二十. rpm与yum包</h2> 
<p>rpm用于互联网下载包的打包及安装工具，它包含在某些linux分发版本中。它生成具有.RPM扩展名的文件。RPM是ReDHat Package Manager（RedHat软件包管理工具）的缩写，类似windows的setup.exe，这一文件格式名称虽然打上了RedHat的标志，但理念是通用的。</p> 
<p>Linux分发版本都有采用（suse，redhat，centos等），可以算是公认的行业标准了。</p> 
<h3><a id="rpm_1246"></a>rpm包的简单查询指令</h3> 
<pre><code class="prism language-linux">查询已安装的rpm列表：
	rpm -qa | grep xxx
</code></pre> 
<h3><a id="rpm_1253"></a>rpm包名的基本格式</h3> 
<pre><code class="prism language-txt">一个rpm包名：firefox-60.2.2-1.el7.centos.x86_64
名称：firefox
版本号：60.2.2-1
适用操作系统：el7.centos.x86_64 -&gt; 表示centos7.x的64位操作系统，如果是i686、i386表示32位操作系统，noarch表示通用。
</code></pre> 
<h3><a id="rpm_1262"></a>rpm包的其它查询指令</h3> 
<pre><code class="prism language-linux">rpm -qa -&gt; 查询所安装的所有rpm软件包。
rpm -qa | more
rpm -qa | grep X 

rpm -q 软件包名 -&gt; 查询软件包是否安装。

rpm -qi 软件包名 -&gt; 查询软件包信息。

rpm -ql 软件包名 -&gt; 查询软件包中的文件。

rpm -qf 文件全路径名 查询文件所属的软件包 
</code></pre> 
<h3><a id="rpm_1278"></a>rpm包的删除</h3> 
<h4><a id="_1280"></a>基本语法</h4> 
<pre><code class="prism language-linux">rpm -e rpm包的名称 //erase
</code></pre> 
<h4><a id="_1286"></a>细节讨论</h4> 
<pre><code class="prism language-txt">1. 如果其它软件包依赖于您要卸载的软件包，卸载时会产生错误信息。
2. 如果我们就是要删除foo这个rpm包，可以增加参数--nodeps，就可以强制删除，但是一般不推荐这样做，因为依赖于该软件包的程序可能无法运行。
</code></pre> 
<h3><a id="rpm_1293"></a>rpm包的安装</h3> 
<h4><a id="_1295"></a>基本语法</h4> 
<pre><code class="prism language-linux">rpm -ivh rpm全路径名称
</code></pre> 
<h4><a id="_1301"></a>参数说明</h4> 
<pre><code class="prism language-linux">i = install 安装
v = verbose 提示
h = hash 进度条
</code></pre> 
<h3><a id="yum_1309"></a>yum</h3> 
<p>Yum是一个Shell前端软件包管理器。基于RPM包管理，能够从指定的服务器自动下载RPM包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包。</p> 
<h4><a id="yum_1313"></a>yum基本指令</h4> 
<h5><a id="yum_1315"></a>查询yum服务器是否有需要安装的软件。</h5> 
<pre><code class="prism language-linux">yum list | grep 软件
</code></pre> 
<h5><a id="yum_1321"></a>安装指定yum包</h5> 
<pre><code class="prism language-linux">yum install 软件名 
</code></pre> 
<h2><a id="_javaEE_1327"></a>二十一. javaEE环境搭建</h2> 
<h3><a id="JDK_1329"></a>安装JDK</h3> 
<pre><code class="prism language-linux">1. mkdir/opt/jdk。
2. 通过xftp6上传到/opt/jdk下。
3. cd /opt/jdk。
4. 解压tar -zxvf jdk-8u281-linux-x64.tar.gz
5. mkdir /usr/local/java
6. mv /opt/jdk/jdk1.8.0_281 /usr/local/java
7. 配置环境变量的配置文件vim /etc/profile
8. export JAVA_HOME=/usr/local/java/jdk1.8.0_281
9. export PATH = $JAVA_HOME/bin:$PATH
10. source /etc/profile [让新的环境变量生效]
11. 测试是否安装成功。
</code></pre> 
<h3><a id="Tomcat_1345"></a>安装Tomcat</h3> 
<pre><code class="prism language-linux">1. 上传安装文件，并解压缩到/opt/tomcat。
2. 进入解压目录/bin，启动tomcat。./startup.sh。
3. 开放端口8080。

测试是否安装成功：
	在windows或者linux下访问http://linuxip:8080。
</code></pre> 
<h3><a id="Idea_1356"></a>安装Idea</h3> 
<p>运行idea.sh。</p> 
<h3><a id="MySQL57_1360"></a>安装MySQL5.7</h3> 
<pre><code class="prism language-linux">1. 新建文件夹/opt/mysql,并cd进去。
2. 运行wget http://dev.mysql.com/get/mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar。
ps：centos6.7自带的类mysql数据库是mariadb，会和mysql冲突，要先删除。
3. 运行tar -xvf mysql-5.7.26-1.el7.x86_64.rpm-bundle.tar。
4. 运行rpm -qa | grep mari，查询mariadb相关包。
5. 运行rpm -e -nodeps mariadb-libs卸载。
6. 开始真正安装mysql，依次运行以下几条。
	rpm -ivh mysql-community-common-5.7.26-1.el7.x86_64.rpm
	rpm -ivh mysql-community-libs-5.7.26-1.el7.x86_64.rpm 
	rpm -ivh mysql-community-client-5.7.26-1.el7.x86_64.rpm
	rpm -ivh mysql-community-server-5.7.26-1.el7.x86_64.rpm
7. 运行systemctl start mysqld.service，启动mysql。
8. 然后开始设置root用户秘密。
	mysql自动给root用户设置随机密码，运行grep “password” /var/log/mysqld.log可以看到当前密码。
9. 运行mysql -u root -p，用root用户登录，输入上述密码，可进入mysql。
10. 谁知root密码，对于个人开发环境，如果要设比较简单的密码（生产服务环境要设比较复杂的密码），可以运行set 		global validate_password_policy=0;提示密码设置策略。（validate_password_policy默认为1）.
11. set password for 'root'@'localhost'=password('root');
12. 运行flush privileges; 使密码生效。
</code></pre> 
<h2><a id="_Shell_1383"></a>二十二. Shell编程</h2> 
<p>Linux运维工程师在进行服务器集群管理时，需要编写Shell程序来进行服务器管理。</p> 
<p>对于JavaEE和Python程序员来说，工作的需要，你的老大会要求你编写一些Shell脚本进行程序或者是服务器的维护，比如编写一个定时备份数据库的脚本。</p> 
<p>对于大数据程序员来说，需要编写Shell程序来管理集群。</p> 
<h3><a id="Shell_1391"></a>Shell是什么</h3> 
<p>Shell是一个命令行解释器，它为用户提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启动、挂起、停止甚至是编写一些程序。</p> 
<p><img src="https://images2.imgbox.com/00/30/tUwv5TXO_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="Shell_1398"></a>Shell脚本执行方法</h3> 
<h4><a id="_1400"></a>脚本格式要求</h4> 
<p>脚本以#!/bin/bash开头。</p> 
<p>脚本需要有可执行权限。</p> 
<h4><a id="_1406"></a>脚本执行方式</h4> 
<pre><code class="prism language-linux">方式一：
	输入脚本的绝对路径或者相对路径。
	前提：
		需要获得x权限。
方式二：
	sh 脚本
	提示：
		不用获得x权限，直接执行即可。
</code></pre> 
<h3><a id="Shell_1419"></a>Shell变量介绍</h3> 
<p>Linux Shell中的变量分为，系统变量和用户定义变量。</p> 
<p>系统变量：$HOME、$PWD、$SHELL、$USER等等。</p> 
<p>显示当前shell中的变量set。</p> 
<h3><a id="Shell_1427"></a>Shell变量的定义</h3> 
<h4><a id="_1429"></a>基本语法</h4> 
<p>定义变量：变量名=值</p> 
<p>撤销变量：unset 变量名</p> 
<p>声明静态变量：readonly 变量。 ps：静态变量不能被unset。</p> 
<h3><a id="Shell_1437"></a>Shell变量命名规则</h3> 
<p>变量名称可以由字母、数字、下划线组成。但是不能以数字开头。</p> 
<p>等号两侧不能有空格。</p> 
<p>变量名称一般习惯为大写，这是一个规范，我们遵守即可。</p> 
<h3><a id="_1445"></a>将命令的返回值赋给变量</h3> 
<p>A=<code>命令</code>反引号，运行里面的命令，并把结果返回给变量A。</p> 
<p>A=$(date)等价于反引号。</p> 
<h3><a id="_1451"></a>设置环境变量</h3> 
<h4><a id="_1453"></a>基本语法</h4> 
<pre><code class="prism language-linux">export 变量名 = 变量值 -&gt; 将shell便变量输出为环境变量/全局变量。
source 配置文件 -&gt; 让修改后的配置信息立即生效。
echo $变量名 -&gt; 查询环境变量的值。
</code></pre> 
<h3><a id="Shell_1461"></a>Shell中的注释</h3> 
<pre><code class="prism language-linux"># -&gt; 单行注释。
:&lt;&lt;! 内容 ! -&gt; 多行注释。
</code></pre> 
<h3><a id="_1468"></a>位置参数</h3> 
<p>当我们执行一个shell脚本时，如果希望获取到命令行的参数信息，就可以使用到位置参数变量</p> 
<h4><a id="_1472"></a>基本语法</h4> 
<pre><code class="prism language-linux">$n -&gt; n为数字，$0代表命令行本身，$1-$9代表第一到第九个参数，十以上的参数需要用大括号包含，如${10}。
$* -&gt; 这个变量代表命令行中所有参数，$*把所有参数看成一个整体。
$@ -&gt; 这个变量也代表命令行中所有的参数，不过$@把每个参数区分对待。
$# -&gt; 这个变量代表命令行中所有参数的个数。
</code></pre> 
<h3><a id="_1481"></a>预定义变量</h3> 
<p>就是shell设计者事先已经定义好的变量，可以直接在shell脚本中使用。</p> 
<h4><a id="_1485"></a>基本语法</h4> 
<pre><code class="prism language-linux">$$ -&gt; 当前进程的进程号（PID）。
$! -&gt; 后台运行的最后一个进程的进程号（PID）。
$? -&gt; 最后一次执行命令的返回状态。如果这个变量的值为0，证明上一个命令正确执行。如果这个变量的值为非0（具体哪个数，由命令自己来决定）则证明上一个命令执行不正确。
</code></pre> 
<h3><a id="_1493"></a>运算符</h3> 
<p>学习在shell中进行各种运算操作。</p> 
<h4><a id="_1497"></a>基本语法</h4> 
<pre><code class="prism language-linux">"$((运算式))"或"$[运算式]"或者expr m + n
注意expr运算符间要有空格，如果希望将expr的结果赋值给某个变量，使用``
\* -&gt; 乘
/ -&gt; 除
% -&gt; 取余
</code></pre> 
<h3><a id="_1507"></a>条件判断</h3> 
<h4><a id="_1509"></a>基本语法</h4> 
<pre><code class="prism language-linux">[ condition ] 注意：condition前后要有空格。非空返回true，可使用$？验证。
</code></pre> 
<h4><a id="_1515"></a>判断语句</h4> 
<pre><code class="prism language-linux">1. 字符串判断
	=
2. 两个整数的比较
	-lt 小于
	-le 小于等于
	-eq 等于
	-gt 大于
	-ge 大于等于
	-ne 不等于
3. 按照文件权限进行判断
	-r 有读的权限
	-w 有写的权限
	-x 有执行的权限
4. 按照文件类型进行判断
	-f 文件存在并且是一个常规文件。
	-e 文件存在。
	-d 文件存在并是一个目录。
	
实例
	if [ condition ]
	then 
		action
	fi
</code></pre> 
<h3><a id="_1543"></a>流程控制</h3> 
<h4><a id="_1545"></a>单分支</h4> 
<pre><code class="prism language-linux">if [ 条件判断式 ]
then
    代码
fi
</code></pre> 
<h4><a id="_1554"></a>多分支</h4> 
<pre><code class="prism language-linux">if [ 条件判断式 
then
	代码
elif [ 条件判断式 ]
then
	代码
fi
</code></pre> 
<h4><a id="_1566"></a>注意事项</h4> 
<p>中括号和条件判断式之间必须有空格。</p> 
<h4><a id="case_1570"></a>case语句</h4> 
<pre><code class="prism language-linux">case $变量名 in
"值1" )
	如果变量的值等于值1，则执行程序1
;;
"值2" )
	如果变量的值等于值2，则执行程序2
;;
...省略其它分支...
* )
	如果变量值都不是以上值则执行次程序。
;;
esac
</code></pre> 
<h4><a id="for_1587"></a>for循环</h4> 
<h5><a id="_1589"></a>基本语法</h5> 
<pre><code class="prism language-linux">一.
    for 变量 in 值1 值2 值3...
    do
    程序/代码
    done
二.
	for((初始值;循环控制条件;变量变化))
	do
	程序/代码
	done
</code></pre> 
<h4><a id="while_1604"></a>while循环</h4> 
<h5><a id="_1606"></a>基本语法</h5> 
<pre><code class="prism language-linux">while [ 条件判断式 ]
do
	程序
done
注意：while和[有空格，条件判断式和[也有空格。
</code></pre> 
<h3><a id="read_1616"></a>read语句</h3> 
<p>read读取控制台输入</p> 
<h4><a id="_1620"></a>基本语法</h4> 
<pre><code class="prism language-linux">read (选项) (参数)
选项
	-p：指定读取值时的提示符。
	-t：指定读取时等待的时间（秒），如果没有在指定的时间内输入，就不用再等了。
参数
	变量：指定读取值的变量名。
</code></pre> 
<h3><a id="_1631"></a>函数</h3> 
<p>shell编程和其它编程语言一样，有系统函数，也可以自定义函数。</p> 
<h4><a id="_1635"></a>系统函数</h4> 
<h5><a id="basename_1637"></a>basename基本语法</h5> 
<p>返回完整路径最后/的部分，常用于获取文件名。</p> 
<pre><code class="prism language-linux">basename [pathname] [suffix]
	basename命令会删掉所有前缀包括最后一个/字符，然后将字符串显示出来。
选项：
	suffix为后缀，如果suffix被指定了，basename会将pathname中的suffix去掉。
</code></pre> 
<h5><a id="dirname_1648"></a>dirname基本语法</h5> 
<p>返回完整路径最后/的前面部分，常用于返回路径部分。</p> 
<pre><code class="prism language-linux">dirname 文件绝对路径
	从给定的包含绝对路径的文件中去除文件名（非目录的部分），然后返回剩下的路径（目录的部分）。
</code></pre> 
<h4><a id="_1657"></a>自定义函数</h4> 
<h5><a id="_1659"></a>基本语法</h5> 
<pre><code class="prism language-linux">function funname[()]{
	Action;
	[return int;]
}

调用直接写函数名：funname [值]
</code></pre> 
<p><img src="https://images2.imgbox.com/04/5c/ACnKds2t_o.jpg" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8aca0a2d5526fbfda0ecebe2e7312744/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序 云开发 WeUI组件Uploader 报错upload file fail, urls not found</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/163f660bd861b91a0f7b26ad82a15e73/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Matlab双目标定与python-opencv配置标定参数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>