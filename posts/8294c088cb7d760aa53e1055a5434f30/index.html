<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>元胞自动机的道路交通模拟 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="元胞自动机的道路交通模拟" />
<meta property="og:description" content="元胞自动机的道路交通模拟 1.直行单行道--概率P进入研究区域道路交通模拟元胞自动机原理：直行单行道代码模拟: 2.直行交叉口（含红绿灯）--概率P进入研究区域道路交通模拟交叉口原理：交叉口代码模拟： 3.小区道路开放前的三角形道路模拟：解释： 4.小区道路开放后的三角形道路模拟：解释： 5.其它类型小区示意图（可根据上面描述及自己的创新拓展） 1.直行单行道–概率P进入研究区域道路交通模拟 元胞自动机原理： 元胞自动机(cellular automata，CA) 是一种时间、空间、状态都离散，空间相互作用和时间因果关系为局部的网格动力学模型，具有模拟复杂系统时空演化过程的能力。
直行单行道代码模拟: 车辆以一定的概率进入车道内，当车辆前后距离较近时，车速为V1。当车辆前后距离较远时，车辆为V2，V2&gt;V1；
参考示意图：
下面展示一些 内联代码片。
%直行进入研究区域 %function []=in_yuanbao(p,long) %p 车辆驶入的概率 %long 道路长度 m %n执行的步长 为1000次 p=20; long=500; n=1000; L=zeros(1,long/5&#43;1); V=zeros(1,long/5&#43;1); flag=0;%flag 用于判断是否有车在等待区即将离开该区域 a=0; figure(); H=imshow(L,[]); set(gcf,&#39;position&#39;,[241 132 560 420]) ;%241 132 560 420(设定plot输出图片的尺寸) set(gcf,&#39;doublebuffer&#39;,&#39;on&#39;); %设定为双缓冲模式 title(&#39;元胞自动机交通模拟&#39;,&#39;color&#39;,&#39;b&#39;); for i=1:n flag=L(1,long/5&#43;1); if p&gt;=rand(1)*100 L(1,1)=1; end %速度设定 V(1,L(1,1:end-2)==1&amp;L(1,2:end-1)==0&amp;L(1,3:end)==0)=2; V(1,L(1,1:end-2)==1&amp;L(1,2:end-1)==0&amp;L(1,3:end)==1)=1; V(1,L(1,1:end-2)==1&amp;L(1,2:end-1)==1)=0; if flag==1 a=a&#43;1; flag=0; L(1,long/5&#43;1)=0; V(1,long/5)=0; elseif L(1,long/5)==1; V(1,long/5)=1; end L([zeros(1,1) V(1,1:end-1)]==1)=1; L([zeros(1,2) V(1,1:end-2)]==2)=1; L(V(1,1:end)==2|V(1,1:end)==1)=0; %L(1,(V(1,1:end)==2)&#43;2)=1; %L(1,(V(1,1:end)==2)&#43;1)=0; %L(1,V(1,1:end)==1&#43;1)=1; V=zeros(1,long/5&#43;1); set(H,&#39;CData&#39;,L); pause(0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8294c088cb7d760aa53e1055a5434f30/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-31T12:45:42+08:00" />
<meta property="article:modified_time" content="2019-08-31T12:45:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">元胞自动机的道路交通模拟</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>元胞自动机的道路交通模拟</h4> 
 <ul><li><ul><li><a href="#1P_1" rel="nofollow">1.直行单行道--概率P进入研究区域道路交通模拟</a></li><li><ul><li><a href="#_2" rel="nofollow">元胞自动机原理：</a></li><li><a href="#_4" rel="nofollow">直行单行道代码模拟:</a></li></ul> 
   </li><li><a href="#2P_62" rel="nofollow">2.直行交叉口（含红绿灯）--概率P进入研究区域道路交通模拟</a></li><li><ul><li><a href="#_63" rel="nofollow">交叉口原理：</a></li><li><a href="#_70" rel="nofollow">交叉口代码模拟：</a></li></ul> 
   </li><li><a href="#3_208" rel="nofollow">3.小区道路开放前的三角形道路模拟：</a></li><li><ul><li><a href="#_209" rel="nofollow">解释：</a></li></ul> 
   </li><li><a href="#4_213" rel="nofollow">4.小区道路开放后的三角形道路模拟：</a></li><li><ul><li><a href="#_214" rel="nofollow">解释：</a></li></ul> 
   </li><li><a href="#5_218" rel="nofollow">5.其它类型小区示意图（可根据上面描述及自己的创新拓展）</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1P_1"></a>1.直行单行道–概率P进入研究区域道路交通模拟</h3> 
<h4><a id="_2"></a>元胞自动机原理：</h4> 
<p>元胞自动机(cellular automata，CA) 是一种时间、空间、状态都离散，空间相互作用和时间因果关系为局部的网格动力学模型，具有模拟复杂系统时空演化过程的能力。</p> 
<h4><a id="_4"></a>直行单行道代码模拟:</h4> 
<p>车辆以一定的概率进入车道内，当车辆前后距离较近时，车速为V1。当车辆前后距离较远时，车辆为V2，V2&gt;V1；<br> <strong>参考示意图：</strong><br> <img src="https://images2.imgbox.com/fe/0a/bn16Vr8I_o.gif" alt="在这里插入图片描述"><br> 下面展示一些 <code>内联代码片</code>。</p> 
<pre><code class="prism language-java"><span class="token operator">%</span>直行进入研究区域
<span class="token operator">%</span>function <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">in_yuanbao</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token keyword">long</span><span class="token punctuation">)</span>
<span class="token operator">%</span>p 车辆驶入的概率
<span class="token operator">%</span><span class="token keyword">long</span> 道路长度 m
<span class="token operator">%</span>n执行的步长 为<span class="token number">1000</span>次
p<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">long</span><span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">;</span>
n<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
L<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
V<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">%</span>flag 用于判断是否有车在等待区即将离开该区域
a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token function">figure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 H<span class="token operator">=</span><span class="token function">imshow</span><span class="token punctuation">(</span>L<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">set</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">241</span> <span class="token number">132</span> <span class="token number">560</span> <span class="token number">420</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token operator">%</span><span class="token number">241</span> <span class="token number">132</span> <span class="token number">560</span> <span class="token function">420</span><span class="token punctuation">(</span>设定plot输出图片的尺寸<span class="token punctuation">)</span>
 <span class="token function">set</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'doublebuffer'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">%</span>设定为双缓冲模式
 <span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'元胞自动机交通模拟'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
    flag<span class="token operator">=</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span>   p<span class="token operator">&gt;=</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span>
         <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    end
    <span class="token operator">%</span>速度设定
    <span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> flag<span class="token operator">==</span><span class="token number">1</span>
        a<span class="token operator">=</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
        flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    elseif  <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    end
    <span class="token function">L</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L</span><span class="token punctuation">(</span><span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token operator">|</span><span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token operator">%</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token operator">%</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token operator">%</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token function">V</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    V<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    

    <span class="token function">set</span><span class="token punctuation">(</span>H<span class="token punctuation">,</span><span class="token string">'CData'</span><span class="token punctuation">,</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pause</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span>
end
<span class="token operator">%</span>end
</code></pre> 
<h3><a id="2P_62"></a>2.直行交叉口（含红绿灯）–概率P进入研究区域道路交通模拟</h3> 
<h4><a id="_63"></a>交叉口原理：</h4> 
<p>我们可以分为四条道路，对其编号为 1、2、3、4号。<br> 1号道路即为十字交叉口之前的直行道路。<br> 2号道路为左转道路。<br> 3号道路为十字交叉口后的直行道路。<br> 4号道路为右转道路。<br> 通过对if语句的调控来设置道路口的红绿灯。也可以通过随机概率来设定汽车直行左转右转的概率。若概率为0及为关闭该方向。例如若设置右转概率为0，则汽车将只会直行和左转，不会发生右转。</p> 
<h4><a id="_70"></a>交叉口代码模拟：</h4> 
<p><strong>参考示意图：</strong><br> <img src="https://images2.imgbox.com/4c/4b/kk5nbTcy_o.gif" alt="qiqi专属图片"><br> <strong>参考代码</strong></p> 
<pre><code class="prism language-java"><span class="token operator">%</span>有交叉口的车辆模拟情况
<span class="token operator">%</span>直行进入研究区域
<span class="token operator">%</span>function <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">in_yuanbao</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token keyword">long</span><span class="token punctuation">)</span>
<span class="token operator">%</span>p 车辆驶入的概率
<span class="token operator">%</span><span class="token keyword">long</span> 道路长度 m
<span class="token operator">%</span>width 小区宽度 m
<span class="token operator">%</span>n执行的步长 为<span class="token number">1000</span>次
<span class="token operator">%</span>主道路均为<span class="token number">4</span>条
<span class="token operator">%</span>小区道路为两条
p<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">long</span><span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">;</span>
width<span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">;</span>
n<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">;</span>
L_car<span class="token operator">=</span><span class="token function">ones</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>*<span class="token number">1.2</span><span class="token punctuation">;</span>
V_car<span class="token operator">=</span><span class="token function">ones</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span>*<span class="token number">1.2</span><span class="token punctuation">;</span>
<span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token function">L_car</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
flag<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span><span class="token operator">%</span>flag 用于判断是否有车在等待区即将离开该区域
a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
 <span class="token function">figure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 H<span class="token operator">=</span><span class="token function">imshow</span><span class="token punctuation">(</span>L_car<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">set</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'position'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">241</span> <span class="token number">132</span> <span class="token number">560</span> <span class="token number">420</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token operator">%</span><span class="token number">241</span> <span class="token number">132</span> <span class="token number">560</span> <span class="token function">420</span><span class="token punctuation">(</span>设定plot输出图片的尺寸<span class="token punctuation">)</span>
 <span class="token function">set</span><span class="token punctuation">(</span>gcf<span class="token punctuation">,</span><span class="token string">'doublebuffer'</span><span class="token punctuation">,</span><span class="token string">'on'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">%</span>设定为双缓冲模式
 <span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'元胞自动机交通模拟'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Tred<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
Tgreen<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span><span class="token operator">%</span>红绿灯时间
 L<span class="token operator">=</span><span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 V<span class="token operator">=</span><span class="token function">V_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 L_1<span class="token operator">=</span><span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>直行路段统计
 V_1<span class="token operator">=</span><span class="token function">V_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token punctuation">;</span>
 bL_2<span class="token operator">=</span><span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>右转路段统计
 bV_2<span class="token operator">=</span><span class="token function">V_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 bL_3<span class="token operator">=</span><span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">%</span>左转路段统计
 bV_3<span class="token operator">=</span><span class="token function">V_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 L_2<span class="token operator">=</span>bL_2'<span class="token punctuation">;</span>
 L_3<span class="token operator">=</span>bL_3'<span class="token punctuation">;</span>
 V_2<span class="token operator">=</span>bV_2'<span class="token punctuation">;</span>
 V_3<span class="token operator">=</span>bV_3'<span class="token punctuation">;</span>
 gs1<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> i<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n
    a<span class="token operator">=</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token operator">%</span>用于计时，当作红绿灯计算
        <span class="token function">V</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">V_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">V_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token function">V_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span>   p<span class="token operator">&gt;=</span><span class="token function">rand</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">100</span>
         <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    end  
    <span class="token operator">%</span>速度设定
    <span class="token function">V</span><span class="token punctuation">(</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">V</span><span class="token punctuation">(</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token operator">%</span>    a<span class="token operator">=</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>      
       <span class="token operator">%</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">5</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span>
    <span class="token operator">%</span>end
    <span class="token keyword">if</span> <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;&amp;</span><span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span>
        <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    end
    <span class="token function">L</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">V</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L</span><span class="token punctuation">(</span><span class="token function">V</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token operator">|</span><span class="token function">V</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

<span class="token operator">%</span>以上为之前的直行路段。
    <span class="token keyword">if</span> a<span class="token operator">&gt;</span>Tred
        <span class="token keyword">if</span> a<span class="token operator">&lt;</span>Tred<span class="token operator">+</span>Tgreen               
            <span class="token keyword">if</span> <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span> <span class="token operator">%</span>如果有车等待
                <span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
                <span class="token function">L</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
                turn<span class="token operator">=</span><span class="token function">randperm</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token keyword">if</span> turn<span class="token operator">==</span><span class="token number">1</span>
              <span class="token operator">%</span>判断为直线
                <span class="token function">L_1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>   
                end
              <span class="token keyword">if</span> turn<span class="token operator">==</span><span class="token number">2</span>
              <span class="token operator">%</span>判断为右转
                <span class="token function">L_2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>   
              end
                <span class="token keyword">if</span> turn<span class="token operator">==</span><span class="token number">3</span>
              <span class="token operator">%</span>判断为左转
                <span class="token function">L_3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>   
                end
            end
        <span class="token keyword">else</span>
            a<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
        end                             
    end
    <span class="token operator">%</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token function">V_1</span><span class="token punctuation">(</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">V_1</span><span class="token punctuation">(</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">V_1</span><span class="token punctuation">(</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token function">L_1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">V_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L_1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">V_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L_1</span><span class="token punctuation">(</span><span class="token function">V_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token operator">|</span><span class="token function">V_1</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    
    <span class="token operator">%</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token function">V_2</span><span class="token punctuation">(</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">V_2</span><span class="token punctuation">(</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">V_2</span><span class="token punctuation">(</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">V_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L_2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">V_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L_2</span><span class="token punctuation">(</span><span class="token function">V_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token operator">|</span><span class="token function">V_2</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token operator">%</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
    <span class="token function">V_3</span><span class="token punctuation">(</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token function">V_3</span><span class="token punctuation">(</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">0</span><span class="token operator">&amp;</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">V_3</span><span class="token punctuation">(</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token operator">&amp;</span><span class="token function">L_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_3</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token function">V_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L_3</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">V_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">L_3</span><span class="token punctuation">(</span><span class="token function">V_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">2</span><span class="token operator">|</span><span class="token function">V_3</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">L_3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    
    
    <span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span>L<span class="token punctuation">;</span>
    <span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">)</span><span class="token operator">=</span>L_1<span class="token punctuation">;</span>
    <span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>end<span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">=</span>L_2'<span class="token punctuation">;</span><span class="token operator">%</span>右转路段统计
    <span class="token function">L_car</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token keyword">long</span><span class="token operator">/</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token operator">=</span>L_3'<span class="token punctuation">;</span>
    <span class="token function">set</span><span class="token punctuation">(</span>H<span class="token punctuation">,</span><span class="token string">'CData'</span><span class="token punctuation">,</span>L_car<span class="token punctuation">)</span><span class="token punctuation">;</span>
    n1<span class="token operator">=</span><span class="token function">find</span><span class="token punctuation">(</span>L<span class="token operator">&gt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">gs1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">length</span><span class="token punctuation">(</span>n1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">pause</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end
<span class="token operator">%</span>end
</code></pre> 
<h3><a id="3_208"></a>3.小区道路开放前的三角形道路模拟：</h3> 
<h4><a id="_209"></a>解释：</h4> 
<p>小区开放前，及斜着的那条路不会通车，可得到其道路通车情况。<br> <strong>参考示意图：</strong><br> <img src="https://images2.imgbox.com/8c/86/c8gmiMku_o.gif" alt="qiqi"></p> 
<h3><a id="4_213"></a>4.小区道路开放后的三角形道路模拟：</h3> 
<h4><a id="_214"></a>解释：</h4> 
<p>小区开放后，及斜着的那条路会通车，可得到其道路通车情况。<br> <strong>参考示意图：</strong><br> <img src="https://images2.imgbox.com/19/1f/fg9TqPbL_o.gif" alt="qiqi"></p> 
<h3><a id="5_218"></a>5.其它类型小区示意图（可根据上面描述及自己的创新拓展）</h3> 
<p><strong>举例示意：</strong><br> <img src="https://images2.imgbox.com/82/68/dZeqQw4d_o.gif" alt="qiqi"><br> <img src="https://images2.imgbox.com/2f/ce/jfjVIFCY_o.gif" alt="qiqi"><br> 备注：最后一张图的代码非作者原创，由于时间过久，忘记代码来源。故不在贴出。<br> 后面的三角形小区及展示图的代码均会上传到CSDN下载专区供大家下载查阅。若该贴未展示下载链接，可评论取提醒作者。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8b534e1004d41ada91ed7619e9bd67ec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Node：找不到模块Error: Cannot find module</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/822343d4c9354d4633d1e9c6d7ef11e2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">torch.nn到底是什么？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>