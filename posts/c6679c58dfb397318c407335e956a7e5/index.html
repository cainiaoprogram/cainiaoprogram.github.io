<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Common.js 和 ES6 Module 中模块引入的区别 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Common.js 和 ES6 Module 中模块引入的区别" />
<meta property="og:description" content="CommonJS和ES6 Module CommonJS是一种模块规范，最初被应用于Nodejs,成为Nodejs的模块规范。运行在浏览器端的javaScript由于也缺少类似的规范，在ES6出来之前，前端也实现了一套相同的模块规范（例如：AMD），用来对前端模块进行管理。
自ES6起，引入了一套新的ES6 Module规范，在语言标准层面实现了模块功能，而且实现得相当简单，有望成为浏览器和服务器通用的模块解决方案。但目前浏览器对ES6 Module兼容还不够友好，我们平时在Webpack中使用export和import，会经过Babel转换为CommonJS规范。
差异 1、语法差异 CommonJS: 使用require语句引入模块，使用module.exports导出模块。
// 引入模块 const moduleA = require(&#39;./moduleA&#39;); // 导出模块 module.exports = someFunction; ES6: 使用import语句引入模块，使用export语句导出模块。
// 引入模块 import moduleA from &#39;./moduleA&#39;; // 导出模块 export default someFunction; 2、动态导入 CommonJS: 是同步加载的，无法在运行时根据条件动态加载模块。
// CommonJS 中的同步加载 const moduleA = require(&#39;./moduleA&#39;); ES6: 支持动态导入，可以在运行时根据条件异步加载模块。
// ES6 中的动态导入 import(&#39;./moduleA&#39;).then(moduleA =&gt; { // 处理 moduleA }); 3、静态分析 CommonJS: 运行时加载，无法在静态阶段进行优化。ES6: 可以在静态分析阶段进行优化，提高性能。 4、运行环境 CommonJS: 适用于服务器端开发和Node.js环境。ES6: 是ECMAScript标准的一部分，适用于现代浏览器和一些构建工具（如Webpack、Rollup等）。 5、模块的默认导出 // CommonJS 中导出默认模块 module.exports = someFunction; // ES6 中导出默认模块 export default someFunction; 6、CommonJs 是动态语法可以写在判断里，ES6 Module 静态语法只能写在顶层 在下面的例子中，require(‘." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c6679c58dfb397318c407335e956a7e5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-05T07:00:00+08:00" />
<meta property="article:modified_time" content="2023-12-05T07:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Common.js 和 ES6 Module 中模块引入的区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="CommonJSES6_Module_0"></a>CommonJS和ES6 Module</h3> 
<p>CommonJS是一种模块规范，最初被应用于Nodejs,成为Nodejs的模块规范。运行在浏览器端的javaScript由于也缺少类似的规范，在ES6出来之前，前端也实现了一套相同的模块规范（例如：AMD），用来对前端模块进行管理。</p> 
<p>自ES6起，引入了一套新的ES6 Module规范，在语言标准层面实现了模块功能，而且实现得相当简单，有望成为浏览器和服务器通用的模块解决方案。但目前浏览器对ES6 Module兼容还不够友好，我们平时在Webpack中使用export和import，会经过Babel转换为CommonJS规范。</p> 
<h3><a id="_5"></a>差异</h3> 
<h4><a id="1_6"></a>1、语法差异</h4> 
<p>CommonJS: 使用require语句引入模块，使用module.exports导出模块。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 引入模块</span>
<span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./moduleA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 导出模块</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> someFunction<span class="token punctuation">;</span>
</code></pre> 
<p>ES6: 使用import语句引入模块，使用export语句导出模块。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// 引入模块</span>
<span class="token keyword">import</span> moduleA <span class="token keyword">from</span> <span class="token string">'./moduleA'</span><span class="token punctuation">;</span>

<span class="token comment">// 导出模块</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> someFunction<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="2_25"></a>2、动态导入</h4> 
<p>CommonJS: 是同步加载的，无法在运行时根据条件动态加载模块。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// CommonJS 中的同步加载</span>
<span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./moduleA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>ES6: 支持动态导入，可以在运行时根据条件异步加载模块。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// ES6 中的动态导入</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./moduleA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">moduleA</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 处理 moduleA</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h4><a id="3_40"></a>3、静态分析</h4> 
<ul><li>CommonJS: 运行时加载，无法在静态阶段进行优化。</li><li>ES6: 可以在静态分析阶段进行优化，提高性能。</li></ul> 
<h4><a id="4_44"></a>4、运行环境</h4> 
<ul><li>CommonJS: 适用于服务器端开发和Node.js环境。</li><li>ES6: 是ECMAScript标准的一部分，适用于现代浏览器和一些构建工具（如Webpack、Rollup等）。</li></ul> 
<h4><a id="5_47"></a>5、模块的默认导出</h4> 
<pre><code class="prism language-javascript"><span class="token comment">// CommonJS 中导出默认模块</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> someFunction<span class="token punctuation">;</span>
</code></pre> 
<pre><code class="prism language-javascript"><span class="token comment">// ES6 中导出默认模块</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> someFunction<span class="token punctuation">;</span>
</code></pre> 
<h4><a id="6CommonJs_ES6_Module__58"></a>6、CommonJs 是动态语法可以写在判断里，ES6 Module 静态语法只能写在顶层</h4> 
<p>在下面的例子中，require(‘./moduleA’)的执行是在运行时发生的，取决于someCondition的值。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// CommonJS 中的动态引入</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>someCondition<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> moduleA <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./moduleA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 使用 moduleA</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>相反，ES6模块系统采用静态语法，模块的导入和导出关系在代码解析阶段就已经确定。这就意味着你不能在代码的其他部分（如函数、条件语句内）中使用import语句。import语句必须位于模块的顶层。例如：</p> 
<pre><code class="prism language-javascript"><span class="token comment">// ES6 中的导入，只能写在模块的顶层</span>
<span class="token keyword">import</span> moduleA <span class="token keyword">from</span> <span class="token string">'./moduleA'</span><span class="token punctuation">;</span>

<span class="token comment">// 这是不允许的，会导致语法错误</span>
<span class="token comment">// if (someCondition) {<!-- --></span>
<span class="token comment">//   import moduleA from './moduleA';</span>
<span class="token comment">// }</span>
</code></pre> 
<h4><a id="7CommonJs__this_ES6_Module_this__undefined_78"></a>7、CommonJs 的 this 是当前模块，ES6 Module的 this 是 undefined</h4> 
<p>在CommonJS和ES6模块系统中，this的指向确实有一些差异，这涉及到模块中代码执行上下文的不同。</p> 
<p>在CommonJS模块中，this指向当前模块的导出对象。也就是说，this在CommonJS模块中是指向模块本身的。</p> 
<pre><code class="prism language-javascript"><span class="token comment">// CommonJS 模块</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>someValue <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>someValue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre> 
<p>在ES6模块中，this的值是undefined。这是因为ES6模块是在严格模式下执行的，而在严格模式下，全局对象的this值是undefined。、</p> 
<pre><code class="prism language-javascript"><span class="token comment">// ES6 模块</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// 下面的代码会导致错误，因为不能在严格模式下给 undefined 赋值</span>
<span class="token comment">// this.someValue = 42;</span>
</code></pre> 
<h4><a id="8CommonJs_ES6_Module_97"></a>8、CommonJs 是单个值导出，ES6 Module可以导出多个</h4>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4ed876cf8056939fa187a8f43878893c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">以太网链路聚合（手工负载分担及LACP配置）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d2bd61e88f6852d0940a635dc563d95b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RT-Thread 三步实现利用DMA进行串口发送</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>