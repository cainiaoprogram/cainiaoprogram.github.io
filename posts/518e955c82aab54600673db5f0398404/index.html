<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Abaqus和Python结合实例 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Abaqus和Python结合实例" />
<meta property="og:description" content="目标 利用 p y t h o n python python中的循环大大简化 A b a q u s Abaqus Abaqus中参数的输入过程。
问题 已知某物体有50个箱形截面，每个截面相关参数如图所示：
宽度和高度可以通过 m a t l a b matlab matlab根据转动惯量和面积相同求出（具体过程在此处不做推导）。
在 A b a q u s Abaqus Abaqus中的过程为 1、部件 2、材料 3、剖面 此时需要手动将50个剖面的高度和宽度输入。（厚度已知为1mm）
4、截面 需要在剖面名称中手动选择50个之前定义好的剖面。
5、指派截面 指派 → \rightarrow →截面。
手动选择每一段 s e c t i o n section section，如上图所示，直至指派完50个截面。
6、指派截面方向 指派 → \rightarrow →梁截面方向。
选中整个梁
直接回车确定即可。
7、创建分析步 双击steps
8、装配 → \rightarrow →实例 9、边界条件、载荷 边界条件：使梁的一端完全固定即可。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/518e955c82aab54600673db5f0398404/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-14T21:44:47+08:00" />
<meta property="article:modified_time" content="2019-12-14T21:44:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Abaqus和Python结合实例</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>目标</h2> 
<p>利用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         y 
        
       
         t 
        
       
         h 
        
       
         o 
        
       
         n 
        
       
      
        python 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">p</span><span style="margin-right: 0.03588em;" class="mord mathdefault">y</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span></span></span></span></span>中的循环大大简化<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         b 
        
       
         a 
        
       
         q 
        
       
         u 
        
       
         s 
        
       
      
        Abaqus 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span style="margin-right: 0.03588em;" class="mord mathdefault">q</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span></span></span></span></span>中参数的输入过程。</p> 
<h2><a id="_2"></a>问题</h2> 
<p>已知某物体有50个箱形截面，每个截面相关参数如图所示：<br> <img src="https://images2.imgbox.com/54/77/ckLcAggj_o.png" alt="在这里插入图片描述"><br> 宽度和高度可以通过<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         m 
        
       
         a 
        
       
         t 
        
       
         l 
        
       
         a 
        
       
         b 
        
       
      
        matlab 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">t</span><span style="margin-right: 0.01968em;" class="mord mathdefault">l</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span></span></span></span></span>根据转动惯量和面积相同求出（具体过程在此处不做推导）。</p> 
<h3><a id="Abaqus_6"></a>在<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         b 
        
       
         a 
        
       
         q 
        
       
         u 
        
       
         s 
        
       
      
        Abaqus 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span style="margin-right: 0.03588em;" class="mord mathdefault">q</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span></span></span></span></span>中的过程为</h3> 
<h5><a id="1_7"></a>1、部件</h5> 
<p><img src="https://images2.imgbox.com/cc/0b/gEREMUU9_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2_9"></a>2、材料</h5> 
<p><img src="https://images2.imgbox.com/44/81/Z9jouX4h_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_11"></a>3、剖面</h5> 
<p><img src="https://images2.imgbox.com/ab/f6/RCu2jsCd_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/08/c0/CZzFP94V_o.png" alt="在这里插入图片描述"><br> 此时需要手动将50个剖面的高度和宽度输入。（厚度已知为1mm）</p> 
<h5><a id="4_16"></a>4、截面</h5> 
<p><img src="https://images2.imgbox.com/ba/f5/XhU7WIQY_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/a1/ab/jB81vWPp_o.png" alt="在这里插入图片描述"><br> 需要在剖面名称中手动选择50个之前定义好的剖面。</p> 
<h5><a id="5_21"></a>5、指派截面</h5> 
<p><img src="https://images2.imgbox.com/31/c9/MWlpr6ok_o.png" alt="在这里插入图片描述"><br> 指派<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         → 
        
       
      
        \rightarrow 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">→</span></span></span></span></span>截面。<br> <img src="https://images2.imgbox.com/68/4a/NWw92yFv_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a3/03/Zs6cIcy7_o.png" alt="在这里插入图片描述"><br> 手动选择每一段<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         s 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         i 
        
       
         o 
        
       
         n 
        
       
      
        section 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.65952em; vertical-align: 0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span></span></span></span></span>，如上图所示，直至指派完50个截面。</p> 
<h5><a id="6_27"></a>6、指派截面方向</h5> 
<p>指派<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         → 
        
       
      
        \rightarrow 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">→</span></span></span></span></span>梁截面方向。<br> <img src="https://images2.imgbox.com/ef/1a/SBDdFhUA_o.png" alt="在这里插入图片描述"><br> 选中整个梁<br> <img src="https://images2.imgbox.com/e5/bf/j5ikuO3q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/dd/f7/4bJLLbN5_o.png" alt="在这里插入图片描述"><br> 直接回车确定即可。</p> 
<h5><a id="7_34"></a>7、创建分析步</h5> 
<p>双击steps<br> <img src="https://images2.imgbox.com/5a/59/D2Mnf049_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/38/6c/WneOWNo8_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="8rightarrow_38"></a>8、装配<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         → 
        
       
      
        \rightarrow 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">→</span></span></span></span></span>实例</h5> 
<p><img src="https://images2.imgbox.com/ae/a4/FtVoAMbv_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="9_40"></a>9、边界条件、载荷</h5> 
<p><img src="https://images2.imgbox.com/b5/db/GxufYwny_o.png" alt="在这里插入图片描述"><br> 边界条件：使梁的一端完全固定即可。<br> 载荷：线载荷，每个<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         s 
        
       
         e 
        
       
         c 
        
       
         t 
        
       
         i 
        
       
         o 
        
       
         n 
        
       
      
        section 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.65952em; vertical-align: 0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">i</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span></span></span></span></span>的载荷不同，需要手动输入50次。</p> 
<h5><a id="10_44"></a>10、划分网格</h5> 
<p><img src="https://images2.imgbox.com/ad/96/wvnWmO7E_o.png" alt="在这里插入图片描述"><br> 依次点击此栏中左边一列的第一个，第二个和第四个，按照步骤继续即可，不用改动。</p> 
<h5><a id="11_47"></a>11、提交作业，得到结果。</h5> 
<p>以上关于手动输入数据的过程十分繁琐，可以通过<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         y 
        
       
         t 
        
       
         h 
        
       
         o 
        
       
         n 
        
       
      
        python 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">p</span><span style="margin-right: 0.03588em;" class="mord mathdefault">y</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">o</span><span class="mord mathdefault">n</span></span></span></span></span>代码实现。</p> 
<h3><a id="python_49"></a>python代码</h3> 
<p>这里直接把代码给出，具体为什么是这么写我也不是很清楚，可以通过<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         A 
        
       
         b 
        
       
         a 
        
       
         q 
        
       
         u 
        
       
         s 
        
       
      
        Abaqus 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.88888em; vertical-align: -0.19444em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">b</span><span class="mord mathdefault">a</span><span style="margin-right: 0.03588em;" class="mord mathdefault">q</span><span class="mord mathdefault">u</span><span class="mord mathdefault">s</span></span></span></span></span>菜单栏中的文件<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         → 
        
       
      
        \rightarrow 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">→</span></span></span></span></span>宏管理器（文章最后会讲）查看每步操作所对应的代码。即每进行一次操作就观察abaqusMacros.py中的代码变化。这个文件在D:\SIMULIA\Commands里。（要是找不到就搜索一下吧……）</p> 
<pre><code class="prism language-python"><span class="token comment"># -*- coding: mbcs -*-</span>
<span class="token comment"># Do not delete the following import lines</span>
<span class="token keyword">from</span> abaqus <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">from</span> abaqusConstants <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">import</span> __main__

<span class="token keyword">import</span> section
<span class="token keyword">import</span> regionToolset
<span class="token keyword">import</span> displayGroupMdbToolset <span class="token keyword">as</span> dgm
<span class="token keyword">import</span> part
<span class="token keyword">import</span> material
<span class="token keyword">import</span> assembly
<span class="token keyword">import</span> step
<span class="token keyword">import</span> interaction
<span class="token keyword">import</span> load
<span class="token keyword">import</span> mesh
<span class="token keyword">import</span> optimization
<span class="token keyword">import</span> job
<span class="token keyword">import</span> sketch
<span class="token keyword">import</span> visualization
<span class="token keyword">import</span> xyPlot
<span class="token keyword">import</span> displayGroupOdbToolset <span class="token keyword">as</span> dgo
<span class="token keyword">import</span> connectorBehavior
<span class="token comment"># 画线</span>
num_section <span class="token operator">=</span> <span class="token number">50</span>
line_length <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0.01046</span><span class="token punctuation">,</span><span class="token number">0.02092</span><span class="token punctuation">,</span><span class="token number">0.03138</span><span class="token punctuation">,</span><span class="token number">0.04184</span><span class="token punctuation">,</span><span class="token number">0.0523</span><span class="token punctuation">,</span><span class="token number">0.06276</span><span class="token punctuation">,</span><span class="token number">0.07322</span><span class="token punctuation">,</span><span class="token number">0.08368</span><span class="token punctuation">,</span><span class="token number">0.09414</span><span class="token punctuation">,</span><span class="token number">0.1046</span><span class="token punctuation">,</span><span class="token number">0.11506</span><span class="token punctuation">,</span><span class="token number">0.12552</span><span class="token punctuation">,</span><span class="token number">0.13598</span><span class="token punctuation">,</span><span class="token number">0.14644</span><span class="token punctuation">,</span><span class="token number">0.1569</span><span class="token punctuation">,</span><span class="token number">0.16736</span><span class="token punctuation">,</span><span class="token number">0.17782</span><span class="token punctuation">,</span><span class="token number">0.18828</span><span class="token punctuation">,</span><span class="token number">0.19874</span><span class="token punctuation">,</span><span class="token number">0.2092</span><span class="token punctuation">,</span><span class="token number">0.21966</span><span class="token punctuation">,</span><span class="token number">0.23012</span><span class="token punctuation">,</span><span class="token number">0.24058</span><span class="token punctuation">,</span><span class="token number">0.25104</span><span class="token punctuation">,</span><span class="token number">0.2615</span><span class="token punctuation">,</span><span class="token number">0.27196</span><span class="token punctuation">,</span><span class="token number">0.28242</span><span class="token punctuation">,</span><span class="token number">0.29288</span><span class="token punctuation">,</span><span class="token number">0.30334</span><span class="token punctuation">,</span><span class="token number">0.3138</span><span class="token punctuation">,</span><span class="token number">0.32426</span><span class="token punctuation">,</span><span class="token number">0.33472</span><span class="token punctuation">,</span><span class="token number">0.34518</span><span class="token punctuation">,</span><span class="token number">0.35564</span><span class="token punctuation">,</span><span class="token number">0.3661</span><span class="token punctuation">,</span><span class="token number">0.37656</span><span class="token punctuation">,</span><span class="token number">0.38702</span><span class="token punctuation">,</span><span class="token number">0.39748</span><span class="token punctuation">,</span><span class="token number">0.40794</span><span class="token punctuation">,</span><span class="token number">0.4184</span><span class="token punctuation">,</span><span class="token number">0.42886</span><span class="token punctuation">,</span><span class="token number">0.43932</span><span class="token punctuation">,</span><span class="token number">0.44978</span><span class="token punctuation">,</span><span class="token number">0.46024</span><span class="token punctuation">,</span><span class="token number">0.4707</span><span class="token punctuation">,</span><span class="token number">0.48116</span><span class="token punctuation">,</span><span class="token number">0.49162</span><span class="token punctuation">,</span><span class="token number">0.50208</span><span class="token punctuation">,</span><span class="token number">0.51254</span><span class="token punctuation">,</span><span class="token number">0.523</span><span class="token punctuation">]</span>
s <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>ConstrainedSketch<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'__profile__'</span><span class="token punctuation">,</span> sheetSize<span class="token operator">=</span><span class="token number">1.2</span><span class="token punctuation">)</span>
g<span class="token punctuation">,</span> v<span class="token punctuation">,</span> d<span class="token punctuation">,</span> c <span class="token operator">=</span> s<span class="token punctuation">.</span>geometry<span class="token punctuation">,</span> s<span class="token punctuation">.</span>vertices<span class="token punctuation">,</span> s<span class="token punctuation">.</span>dimensions<span class="token punctuation">,</span> s<span class="token punctuation">.</span>constraints
s<span class="token punctuation">.</span>setPrimaryObject<span class="token punctuation">(</span>option<span class="token operator">=</span>STANDALONE<span class="token punctuation">)</span>
s<span class="token punctuation">.</span>Line<span class="token punctuation">(</span>point1<span class="token operator">=</span><span class="token punctuation">(</span>line_length<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> point2<span class="token operator">=</span><span class="token punctuation">(</span>line_length<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>HorizontalConstraint<span class="token punctuation">(</span>entity<span class="token operator">=</span>g<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> addUndoState<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_section<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    s<span class="token punctuation">.</span>Line<span class="token punctuation">(</span>point1<span class="token operator">=</span><span class="token punctuation">(</span>line_length<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> point2<span class="token operator">=</span><span class="token punctuation">(</span>line_length<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    s<span class="token punctuation">.</span>HorizontalConstraint<span class="token punctuation">(</span>entity<span class="token operator">=</span>g<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> addUndoState<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
    s<span class="token punctuation">.</span>ParallelConstraint<span class="token punctuation">(</span>entity1<span class="token operator">=</span>g<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> entity2<span class="token operator">=</span>g<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> addUndoState<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Part<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Part-1'</span><span class="token punctuation">,</span> dimensionality<span class="token operator">=</span>TWO_D_PLANAR<span class="token punctuation">,</span>
    <span class="token builtin">type</span><span class="token operator">=</span>DEFORMABLE_BODY<span class="token punctuation">)</span>
p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parts<span class="token punctuation">[</span><span class="token string">'Part-1'</span><span class="token punctuation">]</span>
p<span class="token punctuation">.</span>BaseWire<span class="token punctuation">(</span>sketch<span class="token operator">=</span>s<span class="token punctuation">)</span>
s<span class="token punctuation">.</span>unsetPrimaryObject<span class="token punctuation">(</span><span class="token punctuation">)</span>
p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parts<span class="token punctuation">[</span><span class="token string">'Part-1'</span><span class="token punctuation">]</span>
<span class="token keyword">del</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>sketches<span class="token punctuation">[</span><span class="token string">'__profile__'</span><span class="token punctuation">]</span>

<span class="token comment"># 剖面</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.020047</span><span class="token punctuation">,</span><span class="token number">0.020303</span><span class="token punctuation">,</span><span class="token number">0.02056</span><span class="token punctuation">,</span><span class="token number">0.020816</span><span class="token punctuation">,</span><span class="token number">0.021073</span><span class="token punctuation">,</span><span class="token number">0.02133</span><span class="token punctuation">,</span><span class="token number">0.021586</span><span class="token punctuation">,</span><span class="token number">0.021843</span><span class="token punctuation">,</span><span class="token number">0.022099</span><span class="token punctuation">,</span><span class="token number">0.022356</span><span class="token punctuation">,</span><span class="token number">0.022613</span><span class="token punctuation">,</span><span class="token number">0.022869</span><span class="token punctuation">,</span><span class="token number">0.023126</span><span class="token punctuation">,</span><span class="token number">0.023382</span><span class="token punctuation">,</span><span class="token number">0.023639</span><span class="token punctuation">,</span><span class="token number">0.023895</span><span class="token punctuation">,</span><span class="token number">0.024152</span><span class="token punctuation">,</span><span class="token number">0.024408</span><span class="token punctuation">,</span><span class="token number">0.024665</span><span class="token punctuation">,</span><span class="token number">0.024922</span><span class="token punctuation">,</span><span class="token number">0.025178</span><span class="token punctuation">,</span><span class="token number">0.025435</span><span class="token punctuation">,</span><span class="token number">0.025691</span><span class="token punctuation">,</span><span class="token number">0.025948</span><span class="token punctuation">,</span><span class="token number">0.026204</span><span class="token punctuation">,</span><span class="token number">0.026461</span><span class="token punctuation">,</span><span class="token number">0.026717</span><span class="token punctuation">,</span><span class="token number">0.026974</span><span class="token punctuation">,</span><span class="token number">0.027231</span><span class="token punctuation">,</span><span class="token number">0.027487</span><span class="token punctuation">,</span><span class="token number">0.027744</span><span class="token punctuation">,</span><span class="token number">0.028</span><span class="token punctuation">,</span><span class="token number">0.028257</span><span class="token punctuation">,</span><span class="token number">0.028513</span><span class="token punctuation">,</span><span class="token number">0.02877</span><span class="token punctuation">,</span><span class="token number">0.029026</span><span class="token punctuation">,</span><span class="token number">0.029283</span><span class="token punctuation">,</span><span class="token number">0.029539</span><span class="token punctuation">,</span><span class="token number">0.029796</span><span class="token punctuation">,</span><span class="token number">0.030052</span><span class="token punctuation">,</span><span class="token number">0.030309</span><span class="token punctuation">,</span><span class="token number">0.030565</span><span class="token punctuation">,</span><span class="token number">0.030822</span><span class="token punctuation">,</span><span class="token number">0.031078</span><span class="token punctuation">,</span><span class="token number">0.031335</span><span class="token punctuation">,</span><span class="token number">0.031591</span><span class="token punctuation">,</span><span class="token number">0.031848</span><span class="token punctuation">,</span><span class="token number">0.032105</span><span class="token punctuation">,</span><span class="token number">0.032361</span><span class="token punctuation">,</span><span class="token number">0.032618</span><span class="token punctuation">]</span>
a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.14295</span><span class="token punctuation">,</span><span class="token number">0.14486</span><span class="token punctuation">,</span><span class="token number">0.14677</span><span class="token punctuation">,</span><span class="token number">0.14868</span><span class="token punctuation">,</span><span class="token number">0.15059</span><span class="token punctuation">,</span><span class="token number">0.1525</span><span class="token punctuation">,</span><span class="token number">0.15441</span><span class="token punctuation">,</span><span class="token number">0.15632</span><span class="token punctuation">,</span><span class="token number">0.15823</span><span class="token punctuation">,</span><span class="token number">0.16014</span><span class="token punctuation">,</span><span class="token number">0.16205</span><span class="token punctuation">,</span><span class="token number">0.16396</span><span class="token punctuation">,</span><span class="token number">0.16587</span><span class="token punctuation">,</span><span class="token number">0.16778</span><span class="token punctuation">,</span><span class="token number">0.16969</span><span class="token punctuation">,</span><span class="token number">0.1716</span><span class="token punctuation">,</span><span class="token number">0.17351</span><span class="token punctuation">,</span><span class="token number">0.17542</span><span class="token punctuation">,</span><span class="token number">0.17733</span><span class="token punctuation">,</span><span class="token number">0.17924</span><span class="token punctuation">,</span><span class="token number">0.18115</span><span class="token punctuation">,</span><span class="token number">0.18306</span><span class="token punctuation">,</span><span class="token number">0.18497</span><span class="token punctuation">,</span><span class="token number">0.18688</span><span class="token punctuation">,</span><span class="token number">0.18879</span><span class="token punctuation">,</span><span class="token number">0.1907</span><span class="token punctuation">,</span><span class="token number">0.19261</span><span class="token punctuation">,</span><span class="token number">0.19452</span><span class="token punctuation">,</span><span class="token number">0.19643</span><span class="token punctuation">,</span><span class="token number">0.19834</span><span class="token punctuation">,</span><span class="token number">0.20025</span><span class="token punctuation">,</span><span class="token number">0.20216</span><span class="token punctuation">,</span><span class="token number">0.20407</span><span class="token punctuation">,</span><span class="token number">0.20598</span><span class="token punctuation">,</span><span class="token number">0.20789</span><span class="token punctuation">,</span><span class="token number">0.2098</span><span class="token punctuation">,</span><span class="token number">0.21171</span><span class="token punctuation">,</span><span class="token number">0.21362</span><span class="token punctuation">,</span><span class="token number">0.21553</span><span class="token punctuation">,</span><span class="token number">0.21744</span><span class="token punctuation">,</span><span class="token number">0.21935</span><span class="token punctuation">,</span><span class="token number">0.22126</span><span class="token punctuation">,</span><span class="token number">0.22317</span><span class="token punctuation">,</span><span class="token number">0.22508</span><span class="token punctuation">,</span><span class="token number">0.22699</span><span class="token punctuation">,</span><span class="token number">0.2289</span><span class="token punctuation">,</span><span class="token number">0.23081</span><span class="token punctuation">,</span><span class="token number">0.23272</span><span class="token punctuation">,</span><span class="token number">0.23463</span><span class="token punctuation">,</span><span class="token number">0.23654</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_section<span class="token punctuation">)</span><span class="token punctuation">:</span>
    mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>BoxProfile<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Profile-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> b<span class="token operator">=</span>b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> a<span class="token operator">=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                     uniformThickness<span class="token operator">=</span>ON<span class="token punctuation">,</span> t1<span class="token operator">=</span><span class="token number">0.001</span><span class="token punctuation">)</span>

<span class="token comment"># 材料</span>
mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Material<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Material-1'</span><span class="token punctuation">)</span>
mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>materials<span class="token punctuation">[</span><span class="token string">'Material-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Elastic<span class="token punctuation">(</span>table<span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">69000000000.0</span><span class="token punctuation">,</span>
    <span class="token number">0.3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 截面</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_section<span class="token punctuation">)</span><span class="token punctuation">:</span>
    mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>BeamSection<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Section-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            integration<span class="token operator">=</span>DURING_ANALYSIS<span class="token punctuation">,</span> poissonRatio<span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation">,</span> profile<span class="token operator">=</span><span class="token string">'Profile-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            material<span class="token operator">=</span><span class="token string">'Material-1'</span><span class="token punctuation">,</span> temperatureVar<span class="token operator">=</span>LINEAR<span class="token punctuation">,</span>
            consistentMassMatrix<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

<span class="token comment"># 指派</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_section<span class="token punctuation">)</span><span class="token punctuation">:</span>
    p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parts<span class="token punctuation">[</span><span class="token string">'Part-1'</span><span class="token punctuation">]</span>
    e <span class="token operator">=</span> p<span class="token punctuation">.</span>edges
    edges <span class="token operator">=</span> e<span class="token punctuation">.</span>findAt<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>line_length<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    region <span class="token operator">=</span> p<span class="token punctuation">.</span>Set<span class="token punctuation">(</span>edges<span class="token operator">=</span>edges<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Set-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parts<span class="token punctuation">[</span><span class="token string">'Part-1'</span><span class="token punctuation">]</span>
    p<span class="token punctuation">.</span>SectionAssignment<span class="token punctuation">(</span>region<span class="token operator">=</span>region<span class="token punctuation">,</span> sectionName<span class="token operator">=</span><span class="token string">'Section-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> offset<span class="token operator">=</span><span class="token number">0.0</span><span class="token punctuation">,</span>
                        offsetType<span class="token operator">=</span>MIDDLE_SURFACE<span class="token punctuation">,</span> offsetField<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>
                        thicknessAssignment<span class="token operator">=</span>FROM_SECTION<span class="token punctuation">)</span>

<span class="token comment"># 指派截面方向</span>
p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parts<span class="token punctuation">[</span><span class="token string">'Part-1'</span><span class="token punctuation">]</span>
e <span class="token operator">=</span> p<span class="token punctuation">.</span>edges
edges <span class="token operator">=</span> e<span class="token punctuation">.</span>getSequenceFromMask<span class="token punctuation">(</span>mask<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'[#ffffffff #3ffff ]'</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
region<span class="token operator">=</span>p<span class="token punctuation">.</span>Set<span class="token punctuation">(</span>edges<span class="token operator">=</span>edges<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Set-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>num_section<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parts<span class="token punctuation">[</span><span class="token string">'Part-1'</span><span class="token punctuation">]</span>
p<span class="token punctuation">.</span>assignBeamSectionOrientation<span class="token punctuation">(</span>region<span class="token operator">=</span>region<span class="token punctuation">,</span> method<span class="token operator">=</span>N1_COSINES<span class="token punctuation">,</span> n1<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 装配</span>
a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
a<span class="token punctuation">.</span>DatumCsysByDefault<span class="token punctuation">(</span>CARTESIAN<span class="token punctuation">)</span>
p <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>parts<span class="token punctuation">[</span><span class="token string">'Part-1'</span><span class="token punctuation">]</span>
a<span class="token punctuation">.</span>Instance<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Part-1-1'</span><span class="token punctuation">,</span> part<span class="token operator">=</span>p<span class="token punctuation">,</span> dependent<span class="token operator">=</span>OFF<span class="token punctuation">)</span>

<span class="token comment"># 分析步</span>
a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
session<span class="token punctuation">.</span>viewports<span class="token punctuation">[</span><span class="token string">'Viewport: 1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>setValues<span class="token punctuation">(</span>displayedObject<span class="token operator">=</span>a<span class="token punctuation">)</span>
session<span class="token punctuation">.</span>viewports<span class="token punctuation">[</span><span class="token string">'Viewport: 1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>assemblyDisplay<span class="token punctuation">.</span>setValues<span class="token punctuation">(</span>
    adaptiveMeshConstraints<span class="token operator">=</span>ON<span class="token punctuation">,</span> optimizationTasks<span class="token operator">=</span>OFF<span class="token punctuation">,</span>
    geometricRestrictions<span class="token operator">=</span>OFF<span class="token punctuation">,</span> stopConditions<span class="token operator">=</span>OFF<span class="token punctuation">)</span>
mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>StaticStep<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Step-1'</span><span class="token punctuation">,</span> previous<span class="token operator">=</span><span class="token string">'Initial'</span><span class="token punctuation">)</span>
session<span class="token punctuation">.</span>viewports<span class="token punctuation">[</span><span class="token string">'Viewport: 1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>assemblyDisplay<span class="token punctuation">.</span>setValues<span class="token punctuation">(</span>step<span class="token operator">=</span><span class="token string">'Step-1'</span><span class="token punctuation">)</span>

<span class="token comment"># 边界条件</span>
a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
v1 <span class="token operator">=</span> a<span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token string">'Part-1-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>vertices
verts1 <span class="token operator">=</span> v1<span class="token punctuation">.</span>getSequenceFromMask<span class="token punctuation">(</span>mask<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'[#100000 ]'</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
region <span class="token operator">=</span> a<span class="token punctuation">.</span>Set<span class="token punctuation">(</span>vertices<span class="token operator">=</span>verts1<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Set-1'</span><span class="token punctuation">)</span>
mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>EncastreBC<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'BC-1'</span><span class="token punctuation">,</span> createStepName<span class="token operator">=</span><span class="token string">'Initial'</span><span class="token punctuation">,</span>
    region<span class="token operator">=</span>region<span class="token punctuation">,</span> localCsys<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>

<span class="token comment"># 力</span>
session<span class="token punctuation">.</span>viewports<span class="token punctuation">[</span><span class="token string">'Viewport: 1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>assemblyDisplay<span class="token punctuation">.</span>setValues<span class="token punctuation">(</span>step<span class="token operator">=</span><span class="token string">'Step-1'</span><span class="token punctuation">)</span>
load <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">178.06</span><span class="token punctuation">,</span><span class="token number">180.46</span><span class="token punctuation">,</span><span class="token number">182.85</span><span class="token punctuation">,</span><span class="token number">185.25</span><span class="token punctuation">,</span><span class="token number">187.65</span><span class="token punctuation">,</span><span class="token number">190.04</span><span class="token punctuation">,</span><span class="token number">192.44</span><span class="token punctuation">,</span><span class="token number">194.84</span><span class="token punctuation">,</span><span class="token number">197.23</span><span class="token punctuation">,</span><span class="token number">199.63</span><span class="token punctuation">,</span><span class="token number">202.02</span><span class="token punctuation">,</span><span class="token number">204.42</span><span class="token punctuation">,</span><span class="token number">206.82</span><span class="token punctuation">,</span><span class="token number">209.21</span><span class="token punctuation">,</span><span class="token number">211.61</span><span class="token punctuation">,</span><span class="token number">214</span><span class="token punctuation">,</span><span class="token number">216.4</span><span class="token punctuation">,</span><span class="token number">218.8</span><span class="token punctuation">,</span><span class="token number">221.19</span><span class="token punctuation">,</span><span class="token number">223.59</span><span class="token punctuation">,</span><span class="token number">225.99</span><span class="token punctuation">,</span><span class="token number">228.38</span><span class="token punctuation">,</span><span class="token number">230.78</span><span class="token punctuation">,</span><span class="token number">233.17</span><span class="token punctuation">,</span><span class="token number">235.57</span><span class="token punctuation">,</span><span class="token number">237.97</span><span class="token punctuation">,</span><span class="token number">240.36</span><span class="token punctuation">,</span><span class="token number">242.76</span><span class="token punctuation">,</span><span class="token number">245.16</span><span class="token punctuation">,</span><span class="token number">247.55</span><span class="token punctuation">,</span><span class="token number">249.95</span><span class="token punctuation">,</span><span class="token number">252.34</span><span class="token punctuation">,</span><span class="token number">254.74</span><span class="token punctuation">,</span><span class="token number">257.14</span><span class="token punctuation">,</span><span class="token number">259.53</span><span class="token punctuation">,</span><span class="token number">261.93</span><span class="token punctuation">,</span><span class="token number">264.33</span><span class="token punctuation">,</span><span class="token number">266.72</span><span class="token punctuation">,</span><span class="token number">269.12</span><span class="token punctuation">,</span><span class="token number">271.51</span><span class="token punctuation">,</span><span class="token number">273.91</span><span class="token punctuation">,</span><span class="token number">276.31</span><span class="token punctuation">,</span><span class="token number">278.7</span><span class="token punctuation">,</span><span class="token number">281.1</span><span class="token punctuation">,</span><span class="token number">283.5</span><span class="token punctuation">,</span><span class="token number">285.89</span><span class="token punctuation">,</span><span class="token number">288.29</span><span class="token punctuation">,</span><span class="token number">290.68</span><span class="token punctuation">,</span><span class="token number">293.08</span><span class="token punctuation">,</span><span class="token number">295.48</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>num_section<span class="token punctuation">)</span><span class="token punctuation">:</span>
    a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
    e1 <span class="token operator">=</span> a<span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token string">'Part-1-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>edges
    edges1 <span class="token operator">=</span> e1<span class="token punctuation">.</span>findAt<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>line_length<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    region <span class="token operator">=</span> a<span class="token punctuation">.</span>Set<span class="token punctuation">(</span>edges<span class="token operator">=</span>edges1<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'Set-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>LineLoad<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Load-'</span><span class="token operator">+</span><span class="token builtin">str</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> createStepName<span class="token operator">=</span><span class="token string">'Step-1'</span><span class="token punctuation">,</span>
                                   region<span class="token operator">=</span>region<span class="token punctuation">,</span> comp2<span class="token operator">=</span>load<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># 网格</span>
a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
partInstances <span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token string">'Part-1-1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
a<span class="token punctuation">.</span>seedPartInstance<span class="token punctuation">(</span>regions<span class="token operator">=</span>partInstances<span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">0.0026</span><span class="token punctuation">,</span> deviationFactor<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">,</span>
    minSizeFactor<span class="token operator">=</span><span class="token number">0.1</span><span class="token punctuation">)</span>
a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
partInstances <span class="token operator">=</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token string">'Part-1-1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
a<span class="token punctuation">.</span>generateMesh<span class="token punctuation">(</span>regions<span class="token operator">=</span>partInstances<span class="token punctuation">)</span>
elemType1 <span class="token operator">=</span> mesh<span class="token punctuation">.</span>ElemType<span class="token punctuation">(</span>elemCode<span class="token operator">=</span>B23<span class="token punctuation">,</span> elemLibrary<span class="token operator">=</span>STANDARD<span class="token punctuation">)</span>
a <span class="token operator">=</span> mdb<span class="token punctuation">.</span>models<span class="token punctuation">[</span><span class="token string">'Model-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>rootAssembly
e1 <span class="token operator">=</span> a<span class="token punctuation">.</span>instances<span class="token punctuation">[</span><span class="token string">'Part-1-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>edges
edges1 <span class="token operator">=</span> e1<span class="token punctuation">.</span>getSequenceFromMask<span class="token punctuation">(</span>mask<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'[#fffff ]'</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">)</span>
pickedRegions <span class="token operator">=</span><span class="token punctuation">(</span>edges1<span class="token punctuation">,</span> <span class="token punctuation">)</span>
a<span class="token punctuation">.</span>setElementType<span class="token punctuation">(</span>regions<span class="token operator">=</span>pickedRegions<span class="token punctuation">,</span> elemTypes<span class="token operator">=</span><span class="token punctuation">(</span>elemType1<span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment"># 作业</span>
session<span class="token punctuation">.</span>viewports<span class="token punctuation">[</span><span class="token string">'Viewport: 1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>assemblyDisplay<span class="token punctuation">.</span>setValues<span class="token punctuation">(</span>mesh<span class="token operator">=</span>OFF<span class="token punctuation">)</span>
session<span class="token punctuation">.</span>viewports<span class="token punctuation">[</span><span class="token string">'Viewport: 1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>assemblyDisplay<span class="token punctuation">.</span>meshOptions<span class="token punctuation">.</span>setValues<span class="token punctuation">(</span>
    meshTechnique<span class="token operator">=</span>OFF<span class="token punctuation">)</span>
mdb<span class="token punctuation">.</span>Job<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Job-1'</span><span class="token punctuation">,</span> model<span class="token operator">=</span><span class="token string">'Model-1'</span><span class="token punctuation">,</span> description<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span>ANALYSIS<span class="token punctuation">,</span>
        atTime<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> waitMinutes<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> waitHours<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">,</span> queue<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> memory<span class="token operator">=</span><span class="token number">90</span><span class="token punctuation">,</span>
        memoryUnits<span class="token operator">=</span>PERCENTAGE<span class="token punctuation">,</span> getMemoryFromAnalysis<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
        explicitPrecision<span class="token operator">=</span>SINGLE<span class="token punctuation">,</span> nodalOutputPrecision<span class="token operator">=</span>SINGLE<span class="token punctuation">,</span> echoPrint<span class="token operator">=</span>OFF<span class="token punctuation">,</span>
        modelPrint<span class="token operator">=</span>OFF<span class="token punctuation">,</span> contactPrint<span class="token operator">=</span>OFF<span class="token punctuation">,</span> historyPrint<span class="token operator">=</span>OFF<span class="token punctuation">,</span> userSubroutine<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span>
        scratch<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">,</span> resultsFormat<span class="token operator">=</span>ODB<span class="token punctuation">,</span> multiprocessingMode<span class="token operator">=</span>DEFAULT<span class="token punctuation">,</span> numCpus<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
        numGPUs<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
mdb<span class="token punctuation">.</span>jobs<span class="token punctuation">[</span><span class="token string">'Job-1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>writeInput<span class="token punctuation">(</span>consistencyChecking<span class="token operator">=</span>OFF<span class="token punctuation">)</span>
</code></pre> 
<p>值得注意的是：在abaqusMacros.py文件中给出的都是函数的形式，需要重建一个py文件（如script.py），将函数形式写成上面我展示的形式（就是把def那一行删了……）<br> 注：在abaqusMacros.py文件中，有很多涉及getSequenceFromMask的地方，这个函数不好用，在我的代码中部分已经用findAt函数代替，有些保留的（如指派界面方向时）和繁琐的手动输入过程无关，可以用宏管理器自行调试，从abaqusMacros.py文件中复制粘贴过来即可。</p> 
<h3><a id="excelpython_199"></a>关于怎样把excel中的数据粘贴到python中的问题</h3> 
<p>matlab中可以得到相关数据，如a值，b值等，先将它们保存到excel文件中（或csv文件中）。得到：<br> <img src="https://images2.imgbox.com/6a/91/bzeLtowb_o.png" alt="在这里插入图片描述">但是abaqus兼容的是python2.7，没有直接读取这些文件的库。所以需要先在excel中处理好之后再粘贴到python相应位置。<br> 则我们需要在数字与数字之间加一个逗号，如果不加逗号直接放到python中会出错。<br> 此时，选中任意一个空格，输入"="，然后选中所有值：<br> <img src="https://images2.imgbox.com/de/cc/tBsGXIaR_o.png" alt="在这里插入图片描述">点击"F9"(或Fn+F9)，得到：<br> <img src="https://images2.imgbox.com/88/b9/Ndp2rx7L_o.png" alt="在这里插入图片描述">然后复制粘贴到python中相关位置即可。</p> 
<h3><a id="_206"></a>运行脚本</h3> 
<p>文件<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         → 
        
       
      
        \rightarrow 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">→</span></span></span></span></span>运行脚本<br> 选择刚刚写好的python文件（script.py），运行即可。</p> 
<h3><a id="_209"></a>关于宏管理器</h3> 
<p>文件<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         → 
        
       
      
        \rightarrow 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.36687em; vertical-align: 0em;"></span><span class="mrel">→</span></span></span></span></span>宏管理器<br> <img src="https://images2.imgbox.com/ef/a7/nxDcO4L6_o.png" alt="在这里插入图片描述"><br> 图中内容就是我为了得到每一步的python指令所创建的，点击创建按钮后到录制阶段，每完成一个步骤即结束录制，之后宏管理器中将出现一个条目。在abaqusMacros.py文件中也会出现一个函数代表刚才的操作。点击运行时即重复一遍刚才的步骤。当在py文件中更改参数时，需要点击重新加载后才可以按照更改后的操作运行。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6f7b00f5e0dbed777b236fca832bdaac/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">实力败给流量的时代</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/86c587393fbd36ac8a59783194f7acc8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Redis学习之getrange命令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>