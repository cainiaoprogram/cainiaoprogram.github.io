<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【UE5 多人联机教程】05-生成玩家 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【UE5 多人联机教程】05-生成玩家" />
<meta property="og:description" content="步骤 1. 新建一个游戏模式基础
命名为“GM_Lobby”
2. 新建一个玩家控制器，命名为“PC_Lobby”
3. 新建一个游戏状态基础
命名为“GS_Lobby”
重新设置游戏模式重载、玩家控制器类、游戏状态类
4. 新建一个控件蓝图，命名为“UMG_Lobby”
打开“UMG_Lobby”，添加如下控件：
5. 打开关卡“Lobby”
6. 打开关卡“Lobby”的关卡蓝图添加如下节点，将控件蓝图进行显示
此时运行可以看到控件蓝图已经可以正常显示：
7. 打开游戏模式“GM_Lobby”
新建一个数组，命名为“PC_List”，用于存放所有玩家控制器
在事件图表中添加如下节点，表示当有玩家加入时，就把它的玩家控制器加入数组“PC_List”
继续添加如下节点，当玩家登出时从数组“PC_List”中删除相应的玩家控制器。
8. 打开“UMG_MainMenu”，添加一个可编辑文本
设置可编辑文本的填充值、提示文本、字体尺寸等
9. 打开游戏实例“GI_Main”，添加一个文本类型的变量
10. 回到“UMG_MainMenu”，找到开始游戏的点击事件
在点击“开始游戏”按钮后，判断可编辑文本内容是否为空，如果为空就打印提示信息，否则就切换显示的控件，并设置游戏实例中的文本变量“PlayerName”的值。
11. 打开玩家控制器“PC_Lobby”，添加一个自定义事件，命名为“EVE_Spawn_Player”表示生成玩家的事件。
12. 打开第三人称角色模板蓝图“BP_ThirdPersonCharacter”，添加一个文本类型变量，命名为“PlayerName”
复制选择“RepNotify”，这样每当变量“PlayerName”发生变化时，就会调用函数“OnRep_PlayerName”
勾选可编辑实例、生成时公开
再添加一个字符串类型的变量，命名为“PlayerID” 勾选可编辑实例、生成时公开，复制选择“Replicated”
13. 回到玩家控制器“PC_Lobby”中，在自定义事件“EVE_Spawn_Player”的细节面板中，复制选择“在服务器上运行”，勾选可靠函数。
“EVE_Spawn_Player”逻辑如下，首先获取玩家出生点的transform，然后生成“BP_ThirdPersonCharacter”
“EVE_Spawn_Player”添加一个输入，命名为“PlayerName”
连接到“从类生成Actor”节点的引脚上
“PlayerID”就用时间表示
控制生成的Pawn
当事件开始运行时，获取游戏实例，转为我们自定的游戏实例后，获取存储的变量“PlayerName”作为“EVE_Spawn_Player”方法的参数的值" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/004661ecf73e496116ecde71e558f580/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-26T19:58:21+08:00" />
<meta property="article:modified_time" content="2023-07-26T19:58:21+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【UE5 多人联机教程】05-生成玩家</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>步骤</h2> 
<p>1. 新建一个游戏模式基础</p> 
<p><img alt="" height="352" src="https://images2.imgbox.com/fa/bd/7tYrWzVf_o.png" width="626"></p> 
<p>命名为“GM_Lobby”</p> 
<p><img alt="" height="225" src="https://images2.imgbox.com/3c/a0/86RidP0c_o.png" width="362"></p> 
<p>2. 新建一个玩家控制器，命名为“PC_Lobby”</p> 
<p> <img alt="" height="241" src="https://images2.imgbox.com/46/1e/KFLwfqOK_o.png" width="466"></p> 
<p> 3. 新建一个游戏状态基础</p> 
<p><img alt="" height="742" src="https://images2.imgbox.com/d5/83/PwHxW11c_o.png" width="626"></p> 
<p> 命名为“GS_Lobby”</p> 
<p><img alt="" height="248" src="https://images2.imgbox.com/f0/e0/8NdufnSb_o.png" width="560"></p> 
<p> 重新设置游戏模式重载、玩家控制器类、游戏状态类</p> 
<p><img alt="" height="375" src="https://images2.imgbox.com/e8/a5/v7Erxsbf_o.png" width="429"></p> 
<p> 4. 新建一个控件蓝图，命名为“UMG_Lobby”</p> 
<p><img alt="" height="251" src="https://images2.imgbox.com/de/5d/YvHwrvkz_o.png" width="315"></p> 
<p> 打开“UMG_Lobby”，添加如下控件：</p> 
<p><img alt="" height="458" src="https://images2.imgbox.com/24/6b/igWPRkiM_o.png" width="1001"></p> 
<p>5. 打开关卡“Lobby”</p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/b8/e9/RwUQclqH_o.png" width="445"></p> 
<p> 6. 打开关卡“Lobby”的关卡蓝图添加如下节点，将控件蓝图进行显示</p> 
<p><img alt="" height="432" src="https://images2.imgbox.com/64/64/hvsnDP3P_o.png" width="976"></p> 
<p> 此时运行可以看到控件蓝图已经可以正常显示：</p> 
<p><img alt="" height="587" src="https://images2.imgbox.com/43/e5/Ikm97xFf_o.png" width="1156"></p> 
<p> 7. 打开游戏模式“GM_Lobby”</p> 
<p>新建一个数组，命名为“PC_List”，用于存放所有玩家控制器</p> 
<p><img alt="" height="109" src="https://images2.imgbox.com/d8/37/jFIoqo10_o.png" width="287"></p> 
<p> 在事件图表中添加如下节点，表示当有玩家加入时，就把它的玩家控制器加入数组“PC_List”</p> 
<p><img alt="" height="283" src="https://images2.imgbox.com/f8/b4/mMD3UFJQ_o.png" width="746"></p> 
<p> 继续添加如下节点，当玩家登出时从数组“PC_List”中删除相应的玩家控制器。</p> 
<p><img alt="" height="681" src="https://images2.imgbox.com/a4/41/0JN3Tg0t_o.png" width="858"></p> 
<p> 8. 打开“UMG_MainMenu”，添加一个可编辑文本</p> 
<p><img alt="" height="655" src="https://images2.imgbox.com/65/e1/QnPMn5sd_o.png" width="662"></p> 
<p> 设置可编辑文本的填充值、提示文本、字体尺寸等</p> 
<p><img alt="" height="759" src="https://images2.imgbox.com/2b/80/Kyf5lfHS_o.png" width="1200"></p> 
<p> 9. 打开游戏实例“GI_Main”，添加一个文本类型的变量</p> 
<p><img alt="" height="339" src="https://images2.imgbox.com/eb/a9/hTLUcyKA_o.png" width="360"></p> 
<p>10. 回到“UMG_MainMenu”，找到开始游戏的点击事件</p> 
<p><img alt="" height="311" src="https://images2.imgbox.com/d7/64/jrUF7VC9_o.png" width="295"></p> 
<p> 在点击“开始游戏”按钮后，判断可编辑文本内容是否为空，如果为空就打印提示信息，否则就切换显示的控件，并设置游戏实例中的文本变量“PlayerName”的值。</p> 
<p><img alt="" height="600" src="https://images2.imgbox.com/66/9a/KAfY1ftV_o.png" width="1200"></p> 
<p> 11. 打开玩家控制器“PC_Lobby”，添加一个自定义事件，命名为“EVE_Spawn_Player”表示生成玩家的事件。</p> 
<p><img alt="" height="252" src="https://images2.imgbox.com/82/b1/5y3ZhDlr_o.png" width="396"></p> 
<p> 12. 打开第三人称角色模板蓝图“BP_ThirdPersonCharacter”，添加一个文本类型变量，命名为“PlayerName”</p> 
<p><img alt="" height="121" src="https://images2.imgbox.com/ee/89/snbmqDne_o.png" width="301"></p> 
<p> 复制选择“RepNotify”，这样每当变量“PlayerName”发生变化时，就会调用函数“OnRep_PlayerName”</p> 
<p><img alt="" height="338" src="https://images2.imgbox.com/e8/29/UXtK6pW8_o.png" width="326"></p> 
<p> <img alt="" height="94" src="https://images2.imgbox.com/55/60/yCDbK2jT_o.png" width="249"></p> 
<p>勾选可编辑实例、生成时公开</p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/a0/13/5KKeukNP_o.png" width="364"></p> 
<p>再添加一个字符串类型的变量，命名为“PlayerID” </p> 
<p><img alt="" height="143" src="https://images2.imgbox.com/7a/09/kgefMGF7_o.png" width="295"></p> 
<p> 勾选可编辑实例、生成时公开，复制选择“Replicated”</p> 
<p><img alt="" height="438" src="https://images2.imgbox.com/06/e5/yj98AkHg_o.png" width="369"></p> 
<p> 13. 回到玩家控制器“PC_Lobby”中，在自定义事件“EVE_Spawn_Player”的细节面板中，复制选择“在服务器上运行”，勾选可靠函数。</p> 
<p><img alt="" height="381" src="https://images2.imgbox.com/f1/ab/Bl2viv2P_o.png" width="831"></p> 
<p> “EVE_Spawn_Player”逻辑如下，首先获取玩家出生点的transform，然后生成“BP_ThirdPersonCharacter”</p> 
<p><img alt="" height="464" src="https://images2.imgbox.com/31/92/53fuAi3R_o.png" width="1200"></p> 
<p> “EVE_Spawn_Player”添加一个输入，命名为“PlayerName”</p> 
<p><img alt="" height="352" src="https://images2.imgbox.com/3b/6e/PMuEtLbo_o.png" width="346"></p> 
<p> 连接到“从类生成Actor”节点的引脚上</p> 
<p><img alt="" height="436" src="https://images2.imgbox.com/af/9c/QiZXrKk6_o.png" width="1200"></p> 
<p> “PlayerID”就用时间表示</p> 
<p><img alt="" height="632" src="https://images2.imgbox.com/6d/ca/TRwI4ijH_o.png" width="1200"></p> 
<p> 控制生成的Pawn</p> 
<p><img alt="" height="665" src="https://images2.imgbox.com/82/71/S0vbfcKN_o.png" width="1200"></p> 
<p> 当事件开始运行时，获取游戏实例，转为我们自定的游戏实例后，获取存储的变量“PlayerName”作为“EVE_Spawn_Player”方法的参数的值</p> 
<p><img alt="" height="356" src="https://images2.imgbox.com/7d/df/y4UniZEa_o.png" width="1037"></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/387c7ce2b2a184ea03af92fd4c2c47ec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ipopt&#43;cppad求解遇到sqrt时求解失败</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c6c38c489f17c4045856d36546520451/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Java--运算符</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>