<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue-cli3打包上线时遇到的坑（打包后页面空白、接口404、进入二级页面刷新404） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue-cli3打包上线时遇到的坑（打包后页面空白、接口404、进入二级页面刷新404）" />
<meta property="og:description" content="前言: 刚开始以为打包上线挺简单的，不就是 cnpm run build 打包然后把代码往服务器一扔吗。但是打包后发现遇到了各种问题，首先就是页面空白的问题，页面空白有两个原因，第一个是因为路径找不到造成的页面空白，第二个是渲染问题。其次就是后台接口404错误。在这里，我会建一个新的vue3项目，来重新走一遍打包时遇到的坑。 vue-cli3打包上线后页面空白 vue-cli3打包上线后调用后台接口404错误 首先，创建一个新项目，创建项目过程太过简单，毕竟是基础，就不写在这里了，我创建一个新项目名为 test01,创建成功后的项目如下：
接下来打开终端，输入 cnpm run serve 运行这个项目查看效果：
现在来进入正题：项目打包。 首先，在终端输入 cnpm run build 进行项目打包，等待片刻后提示如下：
打包成功后，会在项目文件夹下创建一个新的文件夹：dist 在这个文件夹下就是test01这个项目打包后的内容了，内容如下：
接下来我们双击index.html看一下效果：
现在，我们发现打开后页面是一片空白，打开F12查看控制台
可以发现，报错找不到文件，后面的路径显示的是/F:/css/与/F:/js/。看到这里应该明白原因了，这是路径错误，我们想要的路径是从打包后的项目根目录查找，也就是从dist文件夹下查找，但是这里却是从/F:查找，也就是说是从绝对路径查找，并非相对路径，这个问题解决方法就是，回到test01项目，在test01项目下新建一个vue.config.js文件，默认是不存在这个文件的。创建成功后，在vue.config.js中输入：
module.exports = { publicPath: &#39;./&#39; } 重新打包：cnpm run build
再来看一下效果：
dist文件夹下的index.html直接打开控制台没有报错了，页面也完整显示了。
但是呢！有个地方让我很难受！那就是url里面有个#，而且这个#在进入下一级子页面时还会卡在前面：
在经过度娘的调教下，我进入了 test01项目下的 src/router/index.js 文件下的 new VueRouter{} 下，加入了下面一句代码：
mode:&#39;history&#39; 这里可以直接输入 cnpm run serve 运行查看效果，在这里就不要打包看效果了
现在这样就舒服多了，但是呢，知道我为什么说不打包看效果吗，直接上图：
就两个按钮在这里了，其他的样式什么的全都没了，控制台也没有错误，这就是我之前说的渲染问题，因为用的history模式，url是更美观了，开发模式下也没有什么问题，但是打包后直接在index.html打开就会什么都看不到,不仅如此，现在这样放到服务器上也会是一片空白。所以现在需要回到项目中，继续在index.js中的 mode:&#39;history&#39; 前添加一行代码 base:&#39;/dist&#39; 。：
base:&#39;/dist&#39; 添加这一行的目的是为了给模式为history时提供一个路径，vue项目打包后，会生成一个dist文件夹，而这里的/dist就是指的打包后生成的dist文件夹，不添加这个路径，在使用history模式的就无法获取到正确的地址，无法渲染网页。当然，这个dist也可以改成别的，比如我在index.js中修改base的内容为/abc，那么在打包完成后，就需要将dist文件夹的名字重命名为abc，否则页面还是无法渲染。
我打包后的vue项目是放在nginx服务器上发布的，nginx可以在这里下载：
http://nginx.org/en/download.html
在Mainline version下下载对应版本的nginx下载就行，我是windows系统，所以下载的nginx/Windows-1.17.6 ，可直接点击下载，下载成功直接解压缩，配置一下环境变量就行了，nginx目录如下：
启动可以双击nginx.exe，或者在命令行进入到nginx文件夹下输入start nginx，在这里我要提醒一下，直接双击nginx.exe是一直启动，除非你主动去关闭它或者电脑关机，否则会一直启动，哪怕你把dos窗口关闭，它也不会结束进程，所以如果只是测试用的话，建议还是打开命令行输入start nginx。
另外，再补充下nginx的一点小知识，nginx默认启动端口是80，如果你想修改默认启动端口，那么请移步到nginx文件夹下找到conf文件夹，找到nginx.conf文件，打开这个文件，找到server{}，下面有一个listen，表示端口监听，我这里已经修改为了8888，保存就行了，在修改这个配置文件后，需要重启nginx，可以在命令行输入nginx -s reload。补充一下关闭nginx的命令：nginx -s stop" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d94672ffaca27432f636b3b367abd5ab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-06-15T00:19:03+08:00" />
<meta property="article:modified_time" content="2021-06-15T00:19:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue-cli3打包上线时遇到的坑（打包后页面空白、接口404、进入二级页面刷新404）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <div id="article_content" class="article_content clearfix"> 
 <div id="content_views" class="htmledit_views"> 
  <h4>前言:</h4> 
  <h4>    刚开始以为打包上线挺简单的，不就是 <strong>cnpm run build</strong> 打包然后把代码往服务器一扔吗。但是打包后发现遇到了各种问题，首先就是页面空白的问题，页面空白有两个原因，第一个是因为路径找不到造成的页面空白，第二个是渲染问题。其次就是后台接口404错误。在这里，我会建一个新的vue3项目，来重新走一遍打包时遇到的坑。</h4> 
  <h4><a href="https://blog.csdn.net/qq_37021104/article/details/103641257">vue-cli3打包上线后页面空白</a></h4> 
  <h4><a href="https://blog.csdn.net/qq_37021104/article/details/103641442">vue-cli3打包上线后调用后台接口404错误</a></h4> 
  <p> </p> 
  <p><strong>首先，创建一个新项目，创建项目过程太过简单，毕竟是基础，就不写在这里了，我创建一个新项目名为 test01,创建成功后的项目如下：</strong></p> 
  <p><strong>                                                                             <img alt="" class="has" height="252" src="https://images2.imgbox.com/b0/01/8X5qzZD1_o.png" width="254"></strong>  </p> 
  <p><strong>接下来打开终端，输入 cnpm run serve 运行这个项目查看效果：</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/17/db/htdtk0pl_o.png"></p> 
  <h4><strong>现在来进入正题：项目打包。</strong></h4> 
  <p><strong>首先，在终端输入 cnpm run build 进行项目打包，等待片刻后提示如下：<img alt="" class="has" height="193" src="https://images2.imgbox.com/e7/89/bv9gya9w_o.png" width="688"></strong></p> 
  <p><strong>打包成功后，会在项目文件夹下创建一个新的文件夹：dist </strong></p> 
  <p><strong>在这个文件夹下就是test01这个项目打包后的内容了，内容如下：</strong></p> 
  <p><strong>                                                <img alt="" class="has" height="156" src="https://images2.imgbox.com/29/f4/RZn7gZ0j_o.png" width="263"></strong></p> 
  <p><strong>接下来我们双击index.html看一下效果：</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/03/8e/etbaPQZy_o.png"></p> 
  <p><strong>现在，我们发现打开后页面是一片空白，打开F12查看控制台</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/91/db/gcZd0YRi_o.png"></p> 
  <p><strong>可以发现，报错找不到文件，后面的路径显示的是/F:/css/与/F:/js/。看到这里应该明白原因了，这是路径错误，我们想要的路径是从打包后的项目根目录查找，也就是从dist文件夹下查找，但是这里却是从/F:查找，也就是说是从绝对路径查找，并非相对路径，这个问题解决方法就是，回到test01项目，在test01项目下新建一个vue.config.js文件，默认是不存在这个文件的。创建成功后，在vue.config.js中输入：</strong></p> 
  <pre class="has"><code class="language-javascript hljs"></code>
   
   <ol class="hljs-ln"><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       <span class="hljs-built_in">module</span>.exports = {
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">    
       
       <span class="hljs-attr">publicPath</span>:
       
       <span class="hljs-string">'./'</span>
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       }
      
      </div>
     
     </div></li></ol>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/6a/2f/VLJMx7Op_o.png"></p> 
  <p><strong>重新打包：cnpm run build</strong></p> 
  <p><strong>再来看一下效果：</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/eb/ad/pVkLLCSD_o.png"></p> 
  <p><strong>dist文件夹下的index.html直接打开控制台没有报错了，页面也完整显示了。</strong></p> 
  <p><strong>但是呢！有个地方让我很难受！那就是url里面有个#，而且这个#在进入下一级子页面时还会卡在前面：</strong></p> 
  <p><strong><img alt="" class="has" height="56" src="https://images2.imgbox.com/9b/cc/zo2EL4s5_o.png" width="805"></strong></p> 
  <p><img alt="" class="has" height="82" src="https://images2.imgbox.com/62/f8/FC4mpURv_o.png" width="789"></p> 
  <p><strong>在经过度娘的调教下，我进入了 test01项目下的 src/router/index.js 文件下的 new VueRouter{} 下，加入了下面一句代码：</strong></p> 
  <pre class="has"><code class="language-javascript hljs">mode:<span class="hljs-string">'history'</span></code>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/57/b6/DGlE9sdI_o.png"></p> 
  <p><strong>这里可以直接输入 cnpm run serve 运行查看效果，在这里就不要打包看效果了</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/50/11/5g4fr4NN_o.png"></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/2d/54/YpMD8pku_o.png"></p> 
  <p><strong>现在这样就舒服多了，但是呢，知道我为什么说不打包看效果吗，直接上图：</strong></p> 
  <p><strong><img alt="" class="has" src="https://images2.imgbox.com/18/89/Veb3ts9c_o.png"></strong></p> 
  <p><strong>就两个按钮在这里了，其他的样式什么的全都没了，控制台也没有错误，这就是我之前说的渲染问题，因为用的history模式，url是更美观了，开发模式下也没有什么问题，但是打包后直接在index.html打开就会什么都看不到,不仅如此，现在这样放到服务器上也会是一片空白。所以现在需要回到项目中，继续在index.js中的 mode:'history' 前添加一行代码 base:'/dist' 。：</strong></p> 
  <pre class="has"><code class="language-javascript hljs">base:<span class="hljs-string">'/dist'</span></code>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/8c/62/gZJbDyV9_o.png"></p> 
  <p><strong>添加这一行的目的是为了给模式为history时提供一个路径，vue项目打包后，会生成一个dist文件夹，而这里的/dist就是指的打包后生成的dist文件夹，不添加这个路径，在使用history模式的就无法获取到正确的地址，无法渲染网页。当然，这个dist也可以改成别的，比如我在index.js中修改base的内容为/abc，那么在打包完成后，就需要将dist文件夹的名字重命名为abc，否则页面还是无法渲染。</strong></p> 
  <p><strong>我打包后的vue项目是放在nginx服务器上发布的，nginx可以在这里下载：</strong></p> 
  <p><strong><a href="http://nginx.org/en/download.html" rel="nofollow">http://nginx.org/en/download.html</a></strong></p> 
  <p><strong>在Mainline version下下载对应版本的nginx下载就行，我是windows系统，所以下载的</strong><a href="http://nginx.org/download/nginx-1.17.6.zip" rel="nofollow">nginx/Windows-1.17.6</a> <strong>，可直接点击下载，下载成功直接解压缩，配置一下环境变量就行了，nginx目录如下：</strong></p> 
  <p><strong><img alt="" class="has" src="https://images2.imgbox.com/2a/71/ZSAe6ZSx_o.png"></strong></p> 
  <p><strong>启动可以双击nginx.exe，或者在命令行进入到nginx文件夹下输入start nginx，在这里我要提醒一下，直接双击nginx.exe是一直启动，除非你主动去关闭它或者电脑关机，否则会一直启动，哪怕你把dos窗口关闭，它也不会结束进程，所以如果只是测试用的话，建议还是打开命令行输入start nginx。</strong></p> 
  <p><strong>另外，再补充下nginx的一点小知识，nginx默认启动端口是80，如果你想修改默认启动端口，那么请移步到nginx文件夹下找到conf文件夹，找到nginx.conf文件，打开这个文件，找到server{}，下面有一个listen，表示端口监听，我这里已经修改为了8888，保存就行了，在修改这个配置文件后，需要重启nginx，可以在命令行输入nginx -s reload。补充一下关闭nginx的命令：nginx -s stop</strong></p> 
  <p><strong><img alt="" class="has" src="https://images2.imgbox.com/bc/cf/0vWCjnIr_o.png"></strong></p> 
  <p><strong>回到正题，现在我们将更改后的vue项目重新打包，然后将dist文件夹移动到nginx目录的html</strong><strong>文件夹下，然后打开命令行，输入start nginx启动nginx服务器，没有提示报错就说明启动完成了，我的nginx启动端口已经修改成了8888，所以打开浏览器，输入localhost:8888 查看启动是否成功，出现nginx欢迎界面就说明启动成功了。</strong></p> 
  <p><img alt="" class="has" height="149" src="https://images2.imgbox.com/f2/39/WanRs7G8_o.png" width="480"></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/5d/5e/DIEwUAep_o.png"></p> 
  <p><strong>接下来我们在localshot:8888后面加上/dist：</strong></p> 
  <pre class="has"><code class="hljs groovy"><span class="hljs-attr">localhost:</span><span class="hljs-number">8888</span>/dist</code>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><strong>这里的/dist就是打包后生成的dist文件夹，放入了nginx目录的html文件夹中，如果html文件夹下没有这个文件夹，就会出现nginx的404错误页面，输入localhost:8888/dist后回车：</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/b6/46/qXoiMJY1_o.png"></p> 
  <p><strong>可以看到页面已经完美的看到了，控制台也没有报错，url中出现了/dist/，就是我们在index.js中加入的base了。</strong></p> 
  <h4><strong>到这里，vue3.11打包上线遇到的页面空白这个坑就已经解决了，接下来要解决的就是后台接口404错误：</strong></h4> 
  <p><strong>首先我们进入到test01项目中，因为要访问后台接口，所以在这里我用的axios，首先，安装axios：</strong></p> 
  <pre class="has"><code class="language-javascript hljs">cnpm install axios -s</code>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><img alt="" class="has" height="150" src="https://images2.imgbox.com/7c/5a/Yg8McbkJ_o.png" width="878"></p> 
  <p><strong>安装完成后，进入main.js，导入axios:</strong></p> 
  <pre class="has"><code class="hljs javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;</code>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><strong>将axios设置全局：</strong></p> 
  <pre class="has"><code class="hljs ruby">Vue.prototype.$axios = axios</code>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><strong>保存后的main.js如下：</strong></p> 
  <p><strong><img alt="" class="has" src="https://images2.imgbox.com/40/7c/GhNRpX40_o.png"></strong></p> 
  <p><strong>接下来进入App.vue,在末尾加上调用后台接口的代码：</strong></p> 
  <pre class="has"><code class="language-javascript hljs"></code>
   
   <ol class="hljs-ln"><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       &lt;script&gt;
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       <span class="hljs-keyword">export</span> 
       
       <span class="hljs-keyword">default</span> {
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
         data(){
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">    
       
       <span class="hljs-keyword">return</span>{
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line"> 
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
           }
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
         },
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
         created(){
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">    
       
       <span class="hljs-built_in">this</span>.$axios.get(
       
       <span class="hljs-string">"http://10.167.198.95:9090/loginfo/edgebox/?type=1"</span>)
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
             .then(
       
       <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span>{
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">        
       
       <span class="hljs-built_in">console</span>.log(res.data);
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
             })
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
         }
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       }
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       &lt;/script&gt;
      
      </div>
     
     </div></li></ol>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><strong>当然，这一步肯定有问题，因为get(url)中，url连接的地址与本机不同，会出现跨域请求，也就会出现请求头错误：</strong></p> 
  <p><strong><img alt="" class="has" src="https://images2.imgbox.com/b6/e0/fpZtWLC8_o.png"></strong></p> 
  <p><strong>因此，我们需要设置反向代理请求，在前文中，我们创建了一个vue.config.js文件，现在使用到它的时候了，打开vue.config.js文件，在publicPath这一行后面加上以下代码：</strong></p> 
  <pre class="has"><code class="language-javascript hljs"></code>
   
   <ol class="hljs-ln"><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       devServer:{
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">    
       
       <span class="hljs-attr">proxy</span>:{
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">        
       
       <span class="hljs-string">'/'</span>:{
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">            
       
       <span class="hljs-attr">target</span>:
       
       <span class="hljs-string">'http://10.167.198.95:9090/'</span>,
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
               }
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
           }
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       }
      
      </div>
     
     </div></li></ol>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/7b/a5/RiJY8vgr_o.png"></p> 
  <p><strong>修改了vue.config.js文件后，需要重启服务，Ctrl+C结束项目运行，输入cnpm run serve启动服务。当然，现在还没有做完，回到App.vue中，修改get()中的url：</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/3d/2e/MdoJ0qyk_o.png"></p> 
  <p><strong>保存后，查看网页控制台：</strong></p> 
  <p><strong><img alt="" class="has" src="https://images2.imgbox.com/66/d8/f1AnjNVE_o.png"></strong></p> 
  <p><strong>此时已经得到了后台返回的数据，接下来进行打包上线查看效果，打包步骤就不再说明了，直接上图：</strong></p> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/b6/6a/8FVQOOkw_o.png"></p> 
  <p><strong>接口报404错误了，因为在vue中，设置了proxy代理，而proxy代理在打包时，并不会打包过来，因为接口访问的仅仅是我输在App.vue中的/loginfo/edgebox/?type=1，也就是在本机查找localhost:8888/loginfo/edgebox/?type=1接口，因此，我们要在nginx中设置反向代理请求。</strong></p> 
  <p><strong>进入之前修改端口的文件/conf/nginx.conf中,在设置端口的下方找到location / {}，在location / {}后方加入以下代码：</strong></p> 
  <pre class="has"><code class="hljs nginx"></code>
   
   <ol class="hljs-ln"><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       <span class="hljs-attribute">location</span>
       
       <span class="hljs-regexp"> ^~/loginfo/</span> {
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">	
       
       <span class="hljs-attribute">rewrite</span>
       
       <span class="hljs-regexp"> ^/(.*)$</span> /
       
       <span class="hljs-variable">$1</span> 
       
       <span class="hljs-literal">break</span>;
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">	
       
       <span class="hljs-attribute">proxy_pass</span> http://10.167.198.95:9090/;
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       }
      
      </div>
     
     </div></li></ol>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><img alt="" class="has" src="https://images2.imgbox.com/d1/af/LTBCV9wl_o.png"></p> 
  <p><strong>保存后打开命令行输入nginx重启命令：nginx -s reload ，回车无提示，打开nginx服务器页面，查看dist文件夹的项目：</strong></p> 
  <p><strong><img alt="" class="has" src="https://images2.imgbox.com/5e/08/wZBIrVzS_o.png"></strong></p> 
  <p><strong>到这里，vue3.11打包上线后接口404的错误就解决了。</strong></p> 
  <p><strong>最后，就是vue项目打包后进入二级页面刷新404错误，这里也在nginx.conf配置文件中作修改：</strong></p> 
  <p><strong>在location / {} 下方，会发现有几行这样的代码，这几行代码的作用是在访问的路径出现错误时，跳转到的错误页面，也是导致进入二级页面后出现404的主要原因，因此，我们在这里做出修改</strong></p> 
  <p><strong>原nginx.conf代码：</strong></p> 
  <pre class="has"><code class="hljs yaml"></code>
   
   <ol class="hljs-ln"><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       <span class="hljs-string">error_page</span>   
       
       <span class="hljs-number">500</span> 
       
       <span class="hljs-number">502</span> 
       
       <span class="hljs-number">503</span> 
       
       <span class="hljs-number">504</span>  
       
       <span class="hljs-string">/50x.html;</span>
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       <span class="hljs-string">location</span> 
       
       <span class="hljs-string">=</span> 
       
       <span class="hljs-string">/50.html</span> {
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">  
       
       <span class="hljs-string">root</span>   
       
       <span class="hljs-string">html;</span>
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       }
      
      </div>
     
     </div></li></ol>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><strong>修改后的nginx.conf代码：</strong></p> 
  <pre class="has"><code class="hljs yaml"></code>
   
   <ol class="hljs-ln"><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       <span class="hljs-string">error_page</span>   
       
       <span class="hljs-number">404</span> 
       
       <span class="hljs-number">500</span> 
       
       <span class="hljs-number">502</span> 
       
       <span class="hljs-number">503</span> 
       
       <span class="hljs-number">504</span>  
       
       <span class="hljs-string">/index.html;</span>
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       <span class="hljs-string">location</span> 
       
       <span class="hljs-string">=</span> 
       
       <span class="hljs-string">/index.html</span> {
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">	
       
       <span class="hljs-string">root</span>   
       
       <span class="hljs-string">html/test01;</span> 
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">    
       
       <span class="hljs-comment">#html/test01表示的是nginx目录下html文件夹下的test01项目，test01是vue项目打包后生成的文件夹</span>
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">    
       
       <span class="hljs-comment">#我这里是自己更改了文件夹名为test01，所以这里也要改成test01</span>
      
      </div>
     
     </div></li><li>
     
     <div class="hljs-ln-numbers">
      
      <div class="hljs-ln-line hljs-ln-n"></div>
     
     </div>
     
     <div class="hljs-ln-code">
      
      <div class="hljs-ln-line">
       
       }
      
      </div>
     
     </div></li></ol>
   
   <div class="hljs-button {2}"></div></pre> 
  <p><strong>这一步我就不操作演示了，有什么问题可以在留言处留言。</strong></p> 
  <p><strong>到这里，vue3.11打包上线遇到的坑及解决办法就已经写完了，希望这篇博客能够帮到更多学习VUE的朋友，觉得这篇博客不错的话，可以点个赞，如果有哪些地方描述错误了的话，也请在留言处留言，我会进行修改，希望可以得到大家的认可！</strong></p> 
  <p> </p> 
  <p> </p> 
 </div> 
 <div> 
  <div></div> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7bedd60858499799877f71d1ae38e90d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">鸡兔同笼问题。上有头30个，下有脚90只，问鸡兔各有多少只。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/88b0ac0114c859998ce6baaf2ed4e7fe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Zigbee零基础教程（二）在模板工程上修改成想要的功能并使用HAL库（HAL库跑马灯为例）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>