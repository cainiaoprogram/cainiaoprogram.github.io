<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu中Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend)问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu中Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend)问题" />
<meta property="og:description" content="环境：Ubuntu18.04-amd64 问题描述：在ubuntu下安装mysql时，进行apt-get操作，出现了如下报错： 参考了一篇博客，已经解决问题。现将步骤记录下来。 解决办法： 第一种情况：
进程中存在与apt相关的正在运行的进程：
首先检查是否在运行apt,apt-get相关的进程 ps aux | grep -i apt 如果存在与apt相关的正在运行的进程，kill掉进程；
sudo kill -9 &lt;process id&gt; 或者直接简单粗暴的：
sudo killall apt apt-get 如果进行完上面的步骤还是无法顺利执行apt-get 操作，则属于第二种情况：
第二种情况：
进程列表中已经没有与apt,apt-get相关的进程在运行，但依然报错，在这种情况下，产生错误的根本原因是lock file。 lock file用于防止两个或多个进程使用相同的数据。 当运行apt或apt-commands时，它会在几个地方创建lock files。 当前一个apt命令未正确终止时，lock file未被删除，因此它们会阻止任何新的apt / apt-get命令实例，比如正在执行apt-get upgrade，在执行过程中直接ctrl&#43;c取消了该操作，很有可能就会造成这种情况。
要解决此问题，首先要删除lock file。 使用lsof命令获取持有lock file的进程的进程ID,依次运行如下命令： lsof /var/ lib/dpkg/lock lsof /var/ lib/apt/lists/lock lsof /var/cache/apt/archives/lock 需要注意的是，以上命令执行结果如果无返回，说明没有正在运行的进程；如果返回了相应的进程，需要kill掉。
删除所有的lock file sudo rm /var/ lib/apt/lists/lock sudo rm /var/cache/apt/archives/lock sudo rm /var/ lib/dpkg/lock 最后重新配置一下dpkg：
sudo dpkg --configure -a 如果上述命令不出任何错误，就万事大吉了。（我是到这里问题就解决了）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/93e4e63b0e36b7bac1322d61aeb271d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-14T16:40:35+08:00" />
<meta property="article:modified_time" content="2021-05-14T16:40:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu中Unable to acquire the dpkg frontend lock (/var/lib/dpkg/lock-frontend)问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <div id="content_views" class="htmledit_views"> 
 <h4>环境：Ubuntu18.04-amd64</h4> 
 <h4>问题描述：在ubuntu下安装mysql时，进行apt-get操作，出现了如下报错：</h4> 
 <p><img alt="" class="has" height="73" src="https://images2.imgbox.com/2a/ab/Pn7dQKuh_o.png" width="719"></p> 
 <p>参考了一篇博客，已经解决问题。现将步骤记录下来。 </p> 
 <h3>解决办法：</h3> 
 <ol><li>第一种情况：<br> 进程中存在与apt相关的正在运行的进程：<br> 首先检查是否在运行apt,apt-get相关的进程</li></ol> 
 <pre class="has"><code class="hljs properties"><span class="hljs-attr">ps</span> <span class="hljs-string">aux | grep -i apt</span>
</code>
  
  <div class="hljs-button {2}"></div></pre> 
 <p>如果存在与apt相关的正在运行的进程，kill掉进程；</p> 
 <pre class="has"><code class="hljs sql">sudo <span class="hljs-keyword">kill</span> <span class="hljs-number">-9</span> &lt;process <span class="hljs-keyword">id</span>&gt;
</code>
  
  <div class="hljs-button {2}"></div></pre> 
 <p>或者直接简单粗暴的：</p> 
 <pre class="has"><code class="hljs kotlin">sudo killall apt apt-<span class="hljs-keyword">get</span> 
</code>
  
  <div class="hljs-button {2}"></div></pre> 
 <p>如果进行完上面的步骤还是无法顺利执行apt-get 操作，则属于第二种情况：</p> 
 <ol><li>第二种情况：<br> 进程列表中已经没有与apt,apt-get相关的进程在运行，但依然报错，在这种情况下，产生错误的根本原因是lock file。 lock file用于防止两个或多个进程使用相同的数据。 当运行apt或apt-commands时，它会在几个地方创建lock files。 当前一个apt命令未正确终止时，lock file未被删除，因此它们会阻止任何新的apt / apt-get命令实例，比如正在执行apt-get upgrade，在执行过程中直接ctrl+c取消了该操作，很有可能就会造成这种情况。<br> 要解决此问题，首先要删除lock file。</li></ol> 
 <ul><li>使用lsof命令获取持有lock file的进程的进程ID,依次运行如下命令：</li></ul> 
 <pre class="has"><code class="hljs crystal"></code>
  
  <ol class="hljs-ln"><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      lsof /var/
      
      <span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">dpkg</span>/<span class="hljs-title">lock</span></span>
     
     </div>
    
    </div></li><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      lsof /var/
      
      <span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">apt</span>/<span class="hljs-title">lists</span>/<span class="hljs-title">lock</span></span>
     
     </div>
    
    </div></li><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      lsof /var/cache/apt/archives/lock
     
     </div>
    
    </div></li></ol>
  
  <div class="hljs-button {2}"></div></pre> 
 <p>需要注意的是，以上命令执行结果如果无返回，说明没有正在运行的进程；如果返回了相应的进程，需要kill掉。</p> 
 <ul><li>删除所有的lock file</li></ul> 
 <pre class="has"><code class="hljs crystal"></code>
  
  <ol class="hljs-ln"><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      sudo rm /var/
      
      <span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">apt</span>/<span class="hljs-title">lists</span>/<span class="hljs-title">lock</span></span>
     
     </div>
    
    </div></li><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      sudo rm /var/cache/apt/archives/lock
     
     </div>
    
    </div></li><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      sudo rm /var/
      
      <span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">dpkg</span>/<span class="hljs-title">lock</span></span>
     
     </div>
    
    </div></li></ol>
  
  <div class="hljs-button {2}"></div></pre> 
 <p>最后重新配置一下dpkg：</p> 
 <pre class="has"><code class="hljs sql">sudo dpkg <span class="hljs-comment">--configure -a</span>
</code>
  
  <div class="hljs-button {2}"></div></pre> 
 <p>如果上述命令不出任何错误，就万事大吉了。（我是到这里问题就解决了）</p> 
 <p>但是有时候，生活总是嫌你不够惨，执行配置命令时可能会出现以下错误：</p> 
 <pre class="has"><code class="hljs kotlin">dpkg: error: dpkg frontend <span class="hljs-keyword">is</span> locked <span class="hljs-keyword">by</span> another process
</code>
  
  <div class="hljs-button {2}"></div></pre> 
 <p>这需要我们额外进行一些操作：</p> 
 <ul><li>找出正在锁定lock file的进程：</li></ul> 
 <pre class="has"><code class="hljs crystal">lsof /var/<span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">dpkg</span>/<span class="hljs-title">lock</span>-<span class="hljs-title">frontend</span></span>
</code>
  
  <div class="hljs-button {2}"></div></pre> 
 <ul><li>kill掉输出的进程（如果输出为空则忽略）</li></ul> 
 <pre class="has"><code class="hljs sql">sudo <span class="hljs-keyword">kill</span> <span class="hljs-number">-9</span> PID
</code>
  
  <div class="hljs-button {2}"></div></pre> 
 <ul><li>删除lock file并重新配置dpkg:</li></ul> 
 <pre class="has"><code class="hljs crystal"></code>
  
  <ol class="hljs-ln"><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      sudo rm /var/
      
      <span class="hljs-class"><span class="hljs-keyword">lib</span>/<span class="hljs-title">dpkg</span>/<span class="hljs-title">lock</span>-<span class="hljs-title">frontend</span></span>
     
     </div>
    
    </div></li><li>
    
    <div class="hljs-ln-numbers">
     
     <div class="hljs-ln-line hljs-ln-n"></div>
    
    </div>
    
    <div class="hljs-ln-code">
     
     <div class="hljs-ln-line">
      
      sudo dpkg --configure -a
     
     </div>
    
    </div></li></ol>
  
  <div class="hljs-button {2}"></div></pre> 
 <p><br> 参考链接：https://www.jianshu.com/p/c9c425c56feb</p> 
 <p>============================================================================================</p> 
 <p>顺带记录一下在ubuntu下安装mysql的操作参考：</p> 
 <p><a href="https://baijiahao.baidu.com/s?id=1626805903141392082&amp;wfr=spider&amp;for=pc" rel="nofollow">https://baijiahao.baidu.com/s?id=1626805903141392082&amp;wfr=spider&amp;for=pc</a></p> 
 <p><a href="https://blog.csdn.net/wudinaniya/article/details/79378635">https://blog.csdn.net/wudinaniya/article/details/79378635</a></p> 
</div> 转载来源：https://blog.csdn.net/shimadear/article/details/90598646
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/86a359b425852743ae136efc20107ae7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">postgres 基本操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aed50f0af4a48ee81c5fade890f5ced8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">google play重签名问题修复，导致第三方登录失败问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>