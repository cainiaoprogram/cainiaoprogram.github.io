<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mysql Fabric HA配置测试 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mysql Fabric HA配置测试" />
<meta property="og:description" content="MySQL Fabric是Oracle官方推出的原生mysql高可用性系统，它可以简化管理MySQL数据库群，它提供两大特性，一是通过故障检测和故障转移功能提供了高可用性，一是通过自动数据分片功能实现可扩展性。本文档只说明自动故障转移-高可用性的实现。
一、测试环境
功能
IP
端口
Master
192.168.247.132
3306
Slave 192.168.247.133
3306
Fabric state store
192.168.247.4
3306
Fabric 管理进程
192.168.247.4
32274
系统环境要求如下：
MySQL Servers (version 5.6.10 or later)
·Backing store database server
·Application database servers
Python 2.6 or 2.7
·No support for 3.x yet
python连接器1.2.1以上
二、下载Fabric
Fabric目前是被打包到了MySQL Utilities中，所以大家下载MySQL Utilities就可以了，下载地址是：http://dev.mysql.com/downloads/utilities/，目前版本是：1.5.3，在本例中我们下载的是 mysql-utilities-1.5.3-1.el6.noarch.rpm。
Mysql-python连接器下载地址：http://dev.mysql.com/downloads/connector/python/，本例中我们下载mysql-connector-python-2.0.2-1.el6.noarch.rpm
三、安装连接器和MySQL Utilities
rpm包的安装还是挺简单的，具体如下：
rpm -ivh mysql-connector-python-2.0.2-1.el6.noarch.rpm
rpm -ivh mysql-utilities-1.5.3-1.el6.noarch.rpm
装完后执行
mysqlfabric
如果有回显说明安装完毕。
四、建立Backing Store帐号
Backing Store用于存储整个HA集群的服务器等相关配置，它需要一个MySQL实例来存储这些信息，这个实例的版本需要跟其它在HA中的MySQL实例版本保持一致，而且必须是5.6.10及更高的版本，我们在本例中选择192.168.247.4：3306实例来使用。Fabric管理进程和Backing Store实例可以是在两台不同的机器，测试中我们共用192.168.247.4。
创建一个帐号来连接Backing Store的MySQL实例，这个帐号需要有对fabric数据库的管理员级权限，具体如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c019b65e0b003fc33c47adf5179f658f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-01-15T15:09:20+08:00" />
<meta property="article:modified_time" content="2015-01-15T15:09:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mysql Fabric HA配置测试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="center"><br> </p> 
<p align="left"><strong><span style="color:#333333">MySQL Fabric</span><span style="color:#333333">是</span><span style="color:#333333">Oracle</span><span style="color:#333333">官方推出的原生</span><span style="color:#333333">mysql</span><span style="color:#333333">高可用性系统，它可以简化管理</span><span style="color:#333333">MySQL</span><span style="color:#333333">数据库群，它提供两大特性，一是通过故障检测和故障转移功能提供了高可用性，一是通过自动数据分片功能实现可扩展性。本文档只说明自动故障转移</span><span style="color:#333333">-</span><span style="color:#333333">高可用性的实现。</span></strong></p> 
<p align="left"><strong><span style="color:#333333"><img src="https://images2.imgbox.com/ca/6c/t6sNBKte_o.jpg" width="600" height="319" alt=""><br> </span></strong></p> 
<p align="left"><strong><span style="color:#333333">一、测试环境</span></strong></p> 
<table border="1" cellspacing="0" cellpadding="0"><tbody><tr><td> <p>功能</p> </td><td> <p>IP</p> </td><td> <p>端口</p> </td></tr><tr><td> <p>Master</p> </td><td> <p>192.168.247.132</p> </td><td> <p>3306</p> </td></tr><tr><td> <p>Slave </p> </td><td> <p>192.168.247.133</p> </td><td> <p>3306</p> </td></tr><tr><td> <p>Fabric state store</p> </td><td> <p>192.168.247.4</p> </td><td> <p>3306</p> </td></tr><tr><td> <p>Fabric 管理进程</p> </td><td> <p>192.168.247.4</p> </td><td> <p>32274</p> </td></tr></tbody></table> 
<p> </p> 
<p>系统环境要求如下：</p> 
<p>MySQL Servers (version 5.6.10 or later)</p> 
<p>         ·Backing store database server</p> 
<p>         ·Application database servers</p> 
<p>Python 2.6 or 2.7</p> 
<p>         ·No support for 3.x yet</p> 
<p>python连接器1.2.1以上</p> 
<p><br> </p> 
<p align="left"><strong><span style="color:#333333">二、下载</span><span style="color:#333333">Fabric</span></strong></p> 
<p align="left"><span style="color:#333333">Fabric</span><span style="color:#333333">目前是被打包到了</span><span style="color:#333333">MySQL Utilities</span><span style="color:#333333">中，所以大家下载</span><span style="color:#333333">MySQL Utilities</span><span style="color:#333333">就可以了，下载地址是：</span><span style="color:#333333"><a target="_blank" href="http://dev.mysql.com/downloads/utilities/" rel="nofollow noopener noreferrer"><span style="color:#0066CC">http://dev.mysql.com/downloads/utilities/</span></a></span><span style="color:#333333">，目前版本是：</span><span style="color:#333333">1.5.3</span><span style="color:#333333">，在本例中我们下载的是</span><span style="color:#333333"> mysql-utilities-1.5.3-1.el6.noarch.rpm</span><span style="color:#333333">。</span></p> 
<p align="left">Mysql-python连接器下载地址：<a target="_blank" href="http://dev.mysql.com/downloads/connector/python/" rel="nofollow noopener noreferrer">http://dev.mysql.com/downloads/connector/python/</a>，本例中我们下载mysql-connector-python-2.0.2-1.el6.noarch.rpm</p> 
<p align="left"><br> </p> 
<p align="left"><strong><span style="color:#333333">三、安装连接器和</span><span style="color:#333333">MySQL Utilities</span></strong></p> 
<p align="left"><span style="color:#333333">rpm</span><span style="color:#333333">包的安装还是挺简单的，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">rpm -ivh </span>mysql-connector-python-2.0.2-1.el6.noarch.rpm</p> 
 <p align="left"><span style="color:#333333">rpm -ivh mysql-utilities-1.5.3-1.el6.noarch.rpm</span></p> 
</div> 
<p align="left"><span style="color:#333333">装完后执行</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">mysqlfabric</span></p> 
</div> 
<p align="left"><span style="color:#333333">如果有回显说明安装完毕。</span></p> 
<p align="left"><span style="color:#333333"><br> </span></p> 
<p align="left"><strong><span style="color:#333333">四、建立</span><span style="color:#333333">Backing Store</span><span style="color:#333333">帐号</span></strong></p> 
<p align="left"><span style="color:#333333">Backing Store</span><span style="color:#333333">用于存储整个</span><span style="color:#333333">HA</span><span style="color:#333333">集群的服务器等相关配置，它需要一个</span><span style="color:#333333">MySQL</span><span style="color:#333333">实例来存储这些信息，这个实例的版本需要跟其它在</span><span style="color:#333333">HA</span><span style="color:#333333">中的</span><span style="color:#333333">MySQL</span><span style="color:#333333">实例版本保持一致，而且必须是</span><span style="color:#333333">5.6.10</span><span style="color:#333333">及更高的版本，我们在本例中选择</span><span style="color:#333333">192.168.247.4</span><span style="color:#333333">：</span><span style="color:#333333">3306</span><span style="color:#333333">实例来使用。</span><span style="color:#333333">Fabric</span><span style="color:#333333">管理进程和</span><span style="color:#333333">Backing Store</span><span style="color:#333333">实例可以是在两台不同的机器，测试中我们共用</span><span style="color:#333333">192.168.247.4</span><span style="color:#333333">。</span></p> 
<p align="left"><span style="color:#333333">创建一个帐号来连接</span><span style="color:#333333">Backing Store</span><span style="color:#333333">的</span><span style="color:#333333">MySQL</span><span style="color:#333333">实例，这个帐号需要有对</span><span style="color:#333333">fabric</span><span style="color:#333333">数据库的管理员级权限，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">GRANT ALL ON fabric.* TO fabric@'%' IDENTIFIED BY 'fabric@123';</span></p> 
 <p align="left"><span style="color:#333333">FLUSH PRIVILEGES;</span></p> 
 <p align="left"><span style="color:#333333"><br> </span></p> 
</div> 
<p align="left"><strong><span style="color:#333333">五、</span><span style="color:#333333">Fabric</span><span style="color:#333333">配置文件</span></strong></p> 
<p align="left"><span style="color:#333333">Fabric</span><span style="color:#333333">配置文件默认位置是：</span><span style="color:#333333">/etc/mysql/fabric.cfg</span></p> 
<p align="left"><span style="color:#333333">修改其中的</span><span style="color:#333333">[storage]</span><span style="color:#333333">部分，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">[storage]</span></p> 
 <p align="left"><span style="color:#333333">auth_plugin = mysql_native_password</span></p> 
 <p align="left"><span style="color:#333333">database = fabric</span></p> 
 <p align="left"><span style="color:#333333">user = fabric    #</span><span style="color:#333333">连接state store</span>实例fabric库的用户名</p> 
 <p align="left"><span style="color:#333333">address = 192.168.247.4:3306       #</span><span style="color:#333333">指定state store</span>的mysql实例地址和端口</p> 
 <p align="left"><span style="color:#333333">connection_delay = 1      #</span><span style="color:#333333">连续尝试连接间隔，单位秒</span></p> 
 <p align="left"><span style="color:#333333">connection_timeout = 6    #</span><span style="color:#333333">连接超时时间，单位秒</span></p> 
 <p align="left"><span style="color:#333333">password = fabric@123     #</span><span style="color:#333333">用户密码</span></p> 
 <p align="left"><span style="color:#333333">connection_attempts = 6   #</span><span style="color:#333333">连接尝试连接的次数</span></p> 
</div> 
<p align="left"><span style="color:#333333">修改其中的</span><span style="color:#333333">[servers]</span><span style="color:#333333">部分，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">[servers]</span></p> 
 <p align="left"><span style="color:#333333">password = fabric@123     #</span><span style="color:#333333">连接HA</span>组中实例的用户密码</p> 
 <p align="left"><span style="color:#333333">user = fabric    #</span><span style="color:#333333">连接HA</span>组中各实例的用户名</p> 
</div> 
<p align="left"><span style="color:#333333">修改其中的</span><span style="color:#333333">[protocol.xmlrpc]</span><span style="color:#333333">部分，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">[servers]</span></p> 
 <p align="left"><span style="color:#333333">user = admin     #</span><span style="color:#333333">管理账号</span></p> 
 <p align="left"><span style="color:#333333">address = localhost:32274                   #fabric</span><span style="color:#333333">进程的服务器地址及端口号</span></p> 
 <p align="left"><span style="color:#333333">password = abc123     #</span><span style="color:#333333">管理账号密码</span></p> 
</div> 
<p align="left"><span style="color:#333333"> </span></p> 
<p align="left"><strong><span style="color:#333333">六、填充</span><span style="color:#333333">Backing Store</span><span style="color:#333333">信息</span></strong></p> 
<p align="left"><span style="color:#333333">我们通过执行以下命令来生成</span><span style="color:#333333">fabric</span><span style="color:#333333">数据库，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333"></span></p> 
 <div style="background:#F7F7F7"> 
  <p align="left"><span style="color:#333333">mysqlfabric manage setup</span></p> 
 </div> 
 <p></p> 
 <p align="left"><span style="color:#333333">[INFO] 1421226952.410291 - MainThread - Initializing persister: user(fabric), server (192.168.247.4:3306), database (fabric).</span></p> 
 <p align="left"><span style="color:#333333">Finishing initial setup</span></p> 
 <p align="left"><span style="color:#333333">=======================</span></p> 
 <p align="left"><span style="color:#333333">Password for admin user is not yet set.</span></p> 
 <p align="left"><span style="color:#333333">Password for admin/xmlrpc: </span></p> 
 <p align="left"><span style="color:#333333">Repeat Password: </span></p> 
 <p align="left"><span style="color:#333333">Password set.</span></p> 
 <p align="left"><span style="color:#333333">Password set.</span></p> 
 <p align="left"><span style="color:#333333">No result returned</span></p> 
</div> 
<p align="left"><span style="color:#333333">期间会提示</span><span style="color:#333333">Fabric</span><span style="color:#333333">的管理员帐户</span><span style="color:#333333">admin</span><span style="color:#333333">没有设置密码，按提示设置密码。</span></p> 
<p align="left"><span style="color:#333333">连接state store</span>实例可以看到新创建了一个fabfic数据库及相关存储配置信息的表。<span style="color:#333333">：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">mysql&gt; use fabric;</span></p> 
 <p align="left"><span style="color:#333333">mysql&gt; show tables;</span></p> 
 <p align="left"><span style="color:#333333">+-------------------+</span></p> 
 <p align="left"><span style="color:#333333">| Tables_in_fabric  |</span></p> 
 <p align="left"><span style="color:#333333">+-------------------+</span></p> 
 <p align="left"><span style="color:#333333">| checkpoints       |</span></p> 
 <p align="left"><span style="color:#333333">| error_log         |</span></p> 
 <p align="left"><span style="color:#333333">| group_replication |</span></p> 
 <p align="left"><span style="color:#333333">| group_view        |</span></p> 
 <p align="left"><span style="color:#333333">| groups            |</span></p> 
 <p align="left"><span style="color:#333333">| log               |</span></p> 
 <p align="left"><span style="color:#333333">| machines          |</span></p> 
 <p align="left"><span style="color:#333333">| permissions       |</span></p> 
 <p align="left"><span style="color:#333333">| proc_view         |</span></p> 
 <p align="left"><span style="color:#333333">| providers         |</span></p> 
 <p align="left"><span style="color:#333333">| role_permissions  |</span></p> 
 <p align="left"><span style="color:#333333">| roles             |</span></p> 
 <p align="left"><span style="color:#333333">| servers           |</span></p> 
 <p align="left"><span style="color:#333333">| shard_maps        |</span></p> 
 <p align="left"><span style="color:#333333">| shard_ranges      |</span></p> 
 <p align="left"><span style="color:#333333">| shard_tables      |</span></p> 
 <p align="left"><span style="color:#333333">| shards            |</span></p> 
 <p align="left"><span style="color:#333333">| user_roles        |</span></p> 
 <p align="left"><span style="color:#333333">| users             |</span></p> 
 <p align="left"><span style="color:#333333">+-------------------+</span></p> 
</div> 
<p align="left"><span style="color:#333333"> </span></p> 
<p align="left"><span style="color:#333333"><br> </span></p> 
<p align="left"><strong><span style="color:#333333">七、配置</span><span style="color:#333333">HA</span><span style="color:#333333">中主从</span><span style="color:#333333">MySQL</span><span style="color:#333333">节点帐号</span></strong></p> 
<p align="left"><span style="color:#333333">本例中</span><span style="color:#333333">132</span><span style="color:#333333">和</span><span style="color:#333333">133</span><span style="color:#333333">实例是需要做成</span><span style="color:#333333">HA</span><span style="color:#333333">的，它们需要建个管理员权限的帐号，该账号将用于</span><span style="color:#333333">fabric</span><span style="color:#333333">连接</span><span style="color:#333333">HA</span><span style="color:#333333">中的各实例，以及用于</span><span style="color:#333333">replication</span><span style="color:#333333">。注意帐号名也要跟</span><span style="color:#333333">fabric state store</span><span style="color:#333333">实例保持一致，本例中需要是</span><span style="color:#333333">fabric</span><span style="color:#333333">，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">GRANT ALL ON *.* TO fabric@'192.168.247.%' IDENTIFIED BY 'fabric@123';</span></p> 
 <p align="left"><span style="color:#333333">FLUSH PRIVILEGES;</span></p> 
</div> 
<p align="left"><span style="color:#333333">同时，由于</span><span style="color:#333333">fabric</span><span style="color:#333333">是基于</span><span style="color:#333333">GTID</span><span style="color:#333333">主从复制，所以这些实例中必须要启用</span><span style="color:#333333">GTID</span><span style="color:#333333">，它们的配置文件要有这些参数：</span></p> 
<div style="background:#F7F7F7"> 
 <p align="left"><span style="color:#333333">log-bin</span></p> 
 <p align="left"><span style="color:#333333">gtid-mode=ON</span></p> 
 <p align="left"><span style="color:#333333">enforce-gtid-consistency</span></p> 
 <p align="left"><span style="color:#333333">log_slave_updates</span></p> 
</div> 
<p> </p> 
<p><strong><span style="color:#333333">八、启动</span><span style="color:#333333">fabric</span></strong></p> 
<p><span style="color:#333333">我们用下面的命令来启动</span><span style="color:#333333">fabric</span><span style="color:#333333">：</span></p> 
<div style="background:#F7F7F7"> 
 <pre style="background:#F7F7F7"><span style="color:#333333">mysqlfabric manage start</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[root@localhost Desktop]# mysqlfabric manage start &amp;</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[1] 8131</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[root@localhost Desktop]# [INFO] 1421227750.407190 - MainThread - Initializing persister: user (fabric), server (192.168.247.4:3306), database (fabric).</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[WARNING] 1421227750.428230 - MainThread - Provider error: No module named novaclient.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.428522 - MainThread - Loading Services.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.447799 - MainThread - MySQL-RPC protocol server started, listening on localhost:32275</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.467301 - MainThread - Fabric node starting.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.470832 - MainThread - Starting Executor.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.470945 - MainThread - Setting 5 executor(s).</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.471722 - Executor-0 - Started.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.474404 - Executor-1 - Started.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.477835 - Executor-2 - Started.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.480265 - Executor-3 - Started.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.482358 - MainThread - Executor started.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.485552 - Executor-4 - Started.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.527671 - MainThread - Starting failure detector.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.541374 - XML-RPC-Server - XML-RPC protocol server ('127.0.0.1', 32274) started.</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.541887 - XML-RPC-Server - Setting 1 XML-RPC session(s).</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">[INFO] 1421227750.542572 - XML-RPC-Session-0 - Started XML-RPC-Session.</span></pre> 
</div> 
<p><strong><span style="color:#333333"><br> </span></strong></p> 
<p><strong><span style="color:#333333">九、建立</span><span style="color:#333333">HA</span><span style="color:#333333">服务器组</span></strong></p> 
<p><span style="color:#333333">这个</span><span style="color:#333333">HA</span><span style="color:#333333">服务器组，用于把参与</span><span style="color:#333333">HA</span><span style="color:#333333">的所有</span><span style="color:#333333">MySQL</span><span style="color:#333333">实例都填加进来：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group create mygroup</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                                uuid finished success result</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------- ------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">612e53c8-87b7-4e97-b714-ffbe38a977e0        1       1      1</span></pre> 
</div> 
<p><span style="color:#333333">这样我们就创建了一个组名为</span><span style="color:#333333">mygroup</span><span style="color:#333333">的</span><span style="color:#333333">HA</span><span style="color:#333333">服务器组。</span></p> 
<p><span style="color:#333333"><br> </span></p> 
<p><strong><span style="color:#333333">十、填加</span><span style="color:#333333">HA</span><span style="color:#333333">组的成员</span></strong></p> 
<p><span style="color:#333333">我们首先填加</span><span style="color:#333333">192.168.247.132</span><span style="color:#333333">：</span><span style="color:#333333">3306</span><span style="color:#333333">，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group add mygroup 192.168.247.132:3306</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                                uuid finished success result</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------- ------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">a918fe34-2acd-4868-9689-1080be3e9b69        1       1      1</span></pre> 
</div> 
<p><span style="color:#333333">接下来填</span><span style="color:#333333">192.168.247.133</span><span style="color:#333333">：</span><span style="color:#333333">3306</span><span style="color:#333333">，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group add mygroup 192.168.247.133:3306</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                                uuid finished success result</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------- ------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">97c06a94-10ad-4897-b40e-5a3e9e56bfa2        1       1      1</span></pre> 
</div> 
<p><span style="color:#333333">如果屏幕回显示无</span><span style="color:#333333">error</span><span style="color:#333333">，那么说明成功填加了成员。我们也可以查看一下</span><span style="color:#333333">mygroup</span><span style="color:#333333">里面的成员信息，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group lookup_servers mygroup</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                         server_uuid              address    status      mode weight</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------------------- --------- --------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">032bb536-73af-11e4-ba8b-000c2978e187 192.168.247.132:3306 SECONDARY READ_ONLY    1.0</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">c505ce10-9bc0-11e4-bfd4-000c290e7abe 192.168.247.133:3306 SECONDARY READ_ONLY    1.0  </span></pre> 
</div> 
<p><span style="color:#333333">可以看到有</span><span style="color:#333333">2</span><span style="color:#333333">个实例，但这</span><span style="color:#333333">2</span><span style="color:#333333">个实例都不是</span><span style="color:#333333">PRIMARY</span><span style="color:#333333">，因为刚添加组成员，是不会自动选举出</span><span style="color:#333333">PRIMARY</span><span style="color:#333333">的。</span></p> 
<p><span style="color:#333333"><br> </span></p> 
<p><strong><span style="color:#333333">十一、选举一个主库</span></strong></p> 
<p><span style="color:#333333">选举的方法也非常简单，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group promote mygroup</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                                uuid finished success result</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------- ------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">84f51361-83c5-466d-97ae-b6e9e497a4bf        1       1      1</span></pre> 
</div> 
<p><span style="color:#333333">执行成功了，没有返回</span><span style="color:#333333">error</span><span style="color:#333333">。</span></p> 
<p><span style="color:#333333">我们再次查看一下</span><span style="color:#333333">HA</span><span style="color:#333333">集群中各服务器情况：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group lookup_servers mygroup</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                         server_uuid              address    status       mode weight</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------------------- --------- ---------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">032bb536-73af-11e4-ba8b-000c2978e187 192.168.247.132:3306   PRIMARY READ_WRITE    1.0</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">c505ce10-9bc0-11e4-bfd4-000c290e7abe 192.168.247.133:3306 SECONDARY  READ_ONLY    1.0</span></pre> 
</div> 
<p><span style="color:#333333">可见</span><span style="color:#333333">192.168.247.132</span><span style="color:#333333">：</span><span style="color:#333333">3306</span><span style="color:#333333">已经被随机选举成为</span><span style="color:#333333">Master</span><span style="color:#333333">角色。</span></p> 
<p><span style="color:#333333"><br> </span></p> 
<p><strong><span style="color:#333333">十二、激活故障自动切换</span></strong></p> 
<p><span style="color:#333333">即使</span><span style="color:#333333">Fabric</span><span style="color:#333333">选出了</span><span style="color:#333333">Master</span><span style="color:#333333">角色，但当这个</span><span style="color:#333333">Master</span><span style="color:#333333">宕机时，</span><span style="color:#333333">Fabric</span><span style="color:#333333">并不会自动将</span><span style="color:#333333">Secondary</span><span style="color:#333333">角色切换成</span><span style="color:#333333">Master</span><span style="color:#333333">角色，所以我们需要将</span><span style="color:#333333">HA</span><span style="color:#333333">配置成可以自动切换角色的样子，具体如下：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group activate mygroup</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                                uuid finished success result</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------- ------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">9422543d-6847-4242-ba8b-b737544c440        1       1      1</span></pre> 
</div> 
<p><span style="color:#333333"> </span><span style="color:#333333">当然，我们也可以使用</span><span style="color:#333333">deactivate</span><span style="color:#333333">命令需求取消</span><span style="color:#333333">Fabric</span><span style="color:#333333">故障自动切换。</span></p> 
<p><span style="color:#333333"><br> </span></p> 
<p><strong><span style="color:#333333">十三、测试</span><span style="color:#333333">HA</span></strong></p> 
<p><span style="color:#333333">在这个实验中，我们将</span><span style="color:#333333">192.168.247.132</span><span style="color:#333333">：</span><span style="color:#333333">3306</span><span style="color:#333333">实例停止，再看看</span><span style="color:#333333">Fabric</span><span style="color:#333333">的状态：</span></p> 
<div style="background:#F7F7F7"> 
 <pre name="code">mysqlfabric group lookup_servers mygroup</pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Password for admin: </span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                         server_uuid              address  status       mode weight</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------------------- ------- ---------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">032bb536-73af-11e4-ba8b-000c2978e187 192.168.247.132:3306  FAULTY READ_WRITE    1.0</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">c505ce10-9bc0-11e4-bfd4-000c290e7abe 192.168.247.133:3306 PRIMARY READ_WRITE    1.0 </span></pre> 
</div> 
<p><span style="color:#333333">其中</span><span style="color:#333333">192.168.247.132</span><span style="color:#333333">：</span><span style="color:#333333">3306</span><span style="color:#333333">实例的状态已经变成了</span><span style="color:#333333">“FAULTY”</span><span style="color:#333333">，可以看出</span><span style="color:#333333">Fabric</span><span style="color:#333333">自动检测到了这个故障，并且选举了</span><span style="color:#333333">slave</span><span style="color:#333333">重新当了</span><span style="color:#333333">primary</span><span style="color:#333333">角色。</span></p> 
<p><span style="color:#333333"><br> </span></p> 
<p><span style="color:#333333">重新启动</span><span style="color:#333333">192.168.247.132</span><span style="color:#333333">：</span><span style="color:#333333">3306</span><span style="color:#333333">再查看</span><span style="color:#333333">HA</span><span style="color:#333333">组状态：</span></p> 
<div style="background:#F7F7F7"> 
 <pre style="background:#F7F7F7"><span style="color:#333333">mysqlfabric group lookup_servers mygroup</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                         server_uuid              address  status       mode weight</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------------------- ------- ---------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">032bb536-73af-11e4-ba8b-000c2978e187 192.168.247.132:3306  FAULTY READ_WRITE    1.0</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">c505ce10-9bc0-11e4-bfd4-000c290e7abe 192.168.247.133:3306 PRIMARY READ_WRITE    1.0 </span></pre> 
</div> 
<p><span style="color:rgb(51,51,51)">可以看到即使</span><span style="color:rgb(51,51,51)">132</span><span style="color:rgb(51,51,51)">实例已恢复正常，但它在</span><span style="color:rgb(51,51,51)">HA</span><span style="color:rgb(51,51,51)">组中的状态不会自动恢复，需要手动改变服务器状态，</span><span style="color:rgb(1,1,1)">支持的状态值为primary,secondary,spare,faulty</span><span style="color:rgb(51,51,51)">。</span></p> 
<p><span style="color:rgb(51,51,51)"><br> </span></p> 
<div style="background:#F7F7F7"> 
 <pre style="background:#F7F7F7"><span style="color:#333333">mysqlfabric server set_status c505ce10-9bc0-11e4-bfd4-000c290e7abe secondary</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:red">ServerError: Cannot change server's (032bb536-73af-11e4-ba8b-000c2978e187) status from (FAULTY) to (SECONDARY).</span></pre> 
</div> 
<p><span style="color:#333333">我们要把</span><span style="color:#333333">132</span><span style="color:#333333">实例变更成</span><span style="color:#010101">secondary</span><span style="color:#010101">状态，</span><span style="color:#333333">由上可见，</span><span style="color:red">从</span><span style="color:red">FAULTY</span><span style="color:red">状态不允许直接变更变SECONDARY</span>状态<span style="color:#010101">，必须先变更成spare</span>状态（避免写和读访问，同时保证当故障切换时不会被选取），然后再变更成secondary。</p> 
<p><br> </p> 
<div style="background:#F7F7F7"> 
 <pre style="background:#F7F7F7"><span style="color:#333333">mysqlfabric server set_status 032bb536-73af-11e4-ba8b-000c2978e187 spare</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                                uuid finished success result</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------- ------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">c66afff7-cb9a-4064-a402-10e0a05b3be2        1       1      1</span></pre> 
</div> 
<p><span style="color:#010101"><br> </span></p> 
<p><span style="color:#010101">查看状态，132</span>实例已成功更改为spare状态</p> 
<div style="background:#F7F7F7"> 
 <pre style="background:#F7F7F7"><span style="color:#333333">mysqlfabric group lookup_servers mygroupFabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                         server_uuid              address  status       mode weight</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------------------- ------- ---------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">032bb536-73af-11e4-ba8b-000c2978e187 192.168.247.132:3306   SPARE    OFFLINE    1.0</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">c505ce10-9bc0-11e4-bfd4-000c290e7abe 192.168.247.133:3306 PRIMARY READ_WRITE    1.0</span></pre> 
</div> 
<p><span style="color:#010101"><br> </span></p> 
<p><span style="color:#010101">再变更为secondary</span>状态：</p> 
<div style="background:#F7F7F7"> 
 <pre style="background:#F7F7F7"><span style="color:#333333">mysqlfabric server set_status 032bb536-73af-11e4-ba8b-000c2978e187 secondary</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Fabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                                uuid finished success result</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------- ------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">530ad1ce-ba74-4c3d-96a9-9edeb497d5d2        1       1      1</span></pre> 
</div> 
<p><span style="color:#010101"><br> </span></p> 
<p><span style="color:#010101">查看状态，132</span>实例已成功变为secondary状态：</p> 
<div style="background:#F7F7F7"> 
 <pre style="background:#F7F7F7"><span style="color:#333333">mysqlfabric group lookup_servers mygroupFabric UUID:  5ca1ab1e-a007-feed-f00d-cab3fe13249e</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">Time-To-Live: 1</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">                         server_uuid              address    status       mode weight</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">------------------------------------ -------------------- --------- ---------- ------</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">032bb536-73af-11e4-ba8b-000c2978e187 192.168.247.132:3306 SECONDARY  READ_ONLY    1.0</span></pre> 
 <pre style="background:#F7F7F7"><span style="color:#333333">c505ce10-9bc0-11e4-bfd4-000c290e7abe 192.168.247.133:3306   PRIMARY READ_WRITE    1.0</span></pre> 
</div> 
<p><span style="color:#010101"> </span></p> 
<p><span style="color:#333333"> </span></p> 
<p><span style="color:#333333"> </span><strong><span style="color:#333333">十四、常用相关命令</span></strong></p> 
<p><span style="color:#333333">mysqlfabricgroup create mygroup          #</span><span style="color:#333333">创建</span><span style="color:#333333">HA</span><span style="color:#333333">组</span></p> 
<p><span style="color:#333333">mysqlfabricgroup destroy mygroup        #</span><span style="color:#333333">删除</span><span style="color:#333333">HA</span><span style="color:#333333">组</span></p> 
<p><span style="color:#333333">mysqlfabricgroup add mygroup 192.168.247.132:3306     #</span><span style="color:#333333">添加组成员</span></p> 
<p><span style="color:#333333">mysqlfabricgroup remove mygroup c505ce10-9bc0-11e4-bfd4-000c290e7abe   #</span><span style="color:#333333">移出组成员</span></p> 
<p><span style="color:#333333">mysqlfabricgroup lookup_servers mygroup  #</span><span style="color:#333333">查看组成员</span></p> 
<p><span style="color:#333333">mysqlfabricgroup promote mygroup      #</span><span style="color:#333333">选举</span><span style="color:#333333">master</span></p> 
<p><span style="color:#333333">mysqlfabric groupactivate mygroup        #</span><span style="color:#333333">激活自动故障转移</span></p> 
<p><span style="color:#333333">mysqlfabric group deactivatemygroup           #</span><span style="color:#333333">禁用自动故障转移</span></p> 
<p><span style="color:#333333">mysqlfabric serverset_status server_uuid status #</span><span style="color:#333333">变更服务器状态</span></p> 
<p><span style="color:#333333">mysqlfabrichelp manage   #manage</span><span style="color:#333333">命令帮助</span></p> 
<p><span style="color:#333333">mysqlfabrichelp </span><span style="color:#333333">group     #group</span><span style="color:#333333">命令帮助</span></p> 
<p><span style="color:#333333">mysqlfabrichelp server      #server</span><span style="color:#333333">命令帮助</span></p> 
<p> </p> 
<p>总结：</p> 
<p>1.      程序必须通过Fabric-aware connectors来实现路由，目前只支持PHP,Python 和Java;</p> 
<p>2.      mysql实例进行恢复后，fabric不会自动改变实例的状态，需要手工修改;</p> 
<p>3.      fabric state store和fabric note当前是单点，mysqlfabric进程本身不提供容错，出现故障时需要重启，当mysql fabric不可用时，fabric-aware连接器能够通过本地的cache继续路由操作(配置ttl值)；</p> 
<p>4.      基于GTID的复制本身存在一些限制。</p> 
<p> </p> 
<p>附两个测试脚本：</p> 
<p>1.创建表测试脚本：</p> 
<p>#test.py</p> 
<p>import sys</p> 
<p>import mysql.connector</p> 
<p>from mysql.connector import fabric</p> 
<p> </p> 
<p>def main():</p> 
<p>   try:</p> 
<p>       conn = mysql.connector.connect(</p> 
<p>           fabric ={"host":"localhost","port":32274,"username":"admin",</p> 
<p>                     "password":"abc123"},</p> 
<p>           user = 'root',database = 'test',password = 'abc123',autocommit =True</p> 
<p>       )</p> 
<p>   except Exception,e:</p> 
<p>       print e</p> 
<p>       sys.exit(1)</p> 
<p>   else:</p> 
<p>       conn.set_property(mode=fabric.MODE_READWRITE,group="mygroup")</p> 
<p>       cur = conn.cursor()</p> 
<p>       cur.execute(</p> 
<p>           "CREATE TABLE IF NOT EXISTS t1 ("</p> 
<p>       " id INT,"</p> 
<p>       " first_name varchar(40),"</p> 
<p>       " last_name varchar(40)"</p> 
<p>       ")" </p> 
<p>       )  </p> 
<p>   finally:</p> 
<p>       conn.close()</p> 
<p> </p> 
<p>if __name__ == '__main__':</p> 
<p>   main()  </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p>2.插入数据测试脚本：</p> 
<p>#test2.py</p> 
<p>import sys</p> 
<p>import mysql.connector</p> 
<p>from mysql.connector import fabric</p> 
<p> </p> 
<p>defadd_subscriber(conn,id,first_name,last_name):</p> 
<p>   conn.set_property(group="mygroup",mode=fabric.MODE_READWRITE)</p> 
<p>   cur = conn.cursor()</p> 
<p>   cur.execute(</p> 
<p>       "INSERT INTO t1 VALUES (%s,%s,%s)",</p> 
<p>                 (id,first_name,last_name)</p> 
<p>    )</p> 
<p> </p> 
<p>def main():</p> 
<p>   try:</p> 
<p>       conn = mysql.connector.connect(</p> 
<p>           fabric ={"host":"localhost","port":32274,"username":"admin",</p> 
<p>                     "password":"abc123"},</p> 
<p>           user="root",database="test",password="abc123",autocommit=True</p> 
<p>       )</p> 
<p>   except Exception,e:</p> 
<p>       print e</p> 
<p>       sys.exit(1)</p> 
<p>   else:</p> 
<p>       #conn.set_property(group="mygroup",mode=fabric.MODE_READWRITE)</p> 
<p>       add_subscriber(conn, 1, "Tom", "Jerry")</p> 
<p>       add_subscriber(conn, 2, "Jack", "Tom")</p> 
<p>       add_subscriber(conn, 3, "Lily", "Lee")</p> 
<p>   finally:</p> 
<p>       conn.close()</p> 
<p> </p> 
<p>if __name__ == '__main__':</p> 
<p>   main()</p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b5ef6b1eaf7dc441d6e87ad3e32bf1f0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">php中防止SQL注入的最佳解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/362dec5dc96f8986234b495b3eb5a52e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">好书推荐-腾讯方法：一个市值1500亿美元公司的产品真经</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>