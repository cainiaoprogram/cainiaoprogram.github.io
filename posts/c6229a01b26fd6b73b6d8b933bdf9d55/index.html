<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ZED-F9K使用：录制数据&#43;地图查看 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ZED-F9K使用：录制数据&#43;地图查看" />
<meta property="og:description" content="ZED-F9K使用：行车录制数据&#43;地图查看 ZED-F9K设备安装、天线安装、标定设备准备天线准备 F9K配置和标定 ZED-F9K配套软件UCenter录制和回放数据添加地图和矫正地图坐标 测试数据展示 F9K是u-blox公司提供的一个高精定位&#43;惯导组合模块，是一个针对车道级定位的产品。虽然在公司的实际场景测试中会发现F9K需要在GPS天线信号强（开阔场景）、RTK信号稳定、配置完好等情况下才勉强达到车规级，也就是说最终的L3自动驾驶还得依靠其他传感器，一个F9K定位模块是不够的。但是它优点在于价格不高，适用量产车。 ZED-F9K设备安装、天线安装、标定 设备准备 首先要准备一个F9K板。这个不多说了——F9K模块需要固定在车内，后期还需要根据板子和天线、车辆前后轴中心的定位参数来标定。
天线准备 使用蘑菇头的GPS-500天线就可以。无须多说，天线为F9K提供卫星定位信号。
蘑菇头外天线只能提供GNSS信号，如果需要更高精度的差分RTK，则要加外部联网设备和一个RTK服务账号。联网设备可以选择DTU、TBOX，可以自己手机开热点给PC，在UCenter里配置NTRIP client。
F9K配置和标定 F9K的标定需要：配置好F9K内通道、测量好杆壁值（也就是F9K设备到天线和车辆前后轴中心的距离等），确认RTK数据接入，确认轮速信号接入。
F9K内通道是根据自己需要接入的数据来配置的，可以自定义打开需要的报文。
标定在上述准备完成后，打开标定模式，进行IMU动态校准，让车辆跑8字&#43;直线行驶，FINE之后记录YAW/Pitch/Roll。（详细操作可询问UBX的技术支持）
标定后记录的数据轨迹会是黄色的3D&#43;DR状态。
ZED-F9K配套软件UCenter F9K支持通过串口输入输出，UCenter就是配套的串口数据查看和更改软件。官网支持下载，也有非常齐全的用户手册使用资料。
录制和回放数据 UCenter支持测试数据的录制和回放，根据录制数据的需要可以打开相应串口，参考用户手册。
在行车过程中，点击工具栏上的红色按钮，选择报存的文件夹，即可开始。后续回放，OPEN打开先前录制的文件即可，在录制过程前打开的串口，和过程中一样，都可以在回放过程里读到数据。
添加地图和矫正地图坐标 工具栏上有一个地图的图标，点击之后，在下方空白处右键——打开open map，可以插入png格式的图片。这种图片可以在很多平台上截取，我截取的是奥维地图（omap）软件里的腾讯地图遥感影像。
截取的影像图片，在导入UCenter的MAP中，会提示缺少坐标。需要选择三个点输入经纬度（WGS84坐标系）进行坐标系矫正。在奥维地图上截取的时候，是可以看到插入点坐标的，但是奥维地图里的图层是腾讯地图（GCJ坐标系），需要进行一下坐标转换。网上有很多在线工具支持，转三个点就行。
测试数据展示 下面这组轨迹是前几天分析天线信号强度的时候去公司附近高架桥下采集的，遥感图最初是想拿来看效果，结果发现由于地图精度很差压根看不出来什么效果……真的很想吐槽国内打着名义上的地图安全理由不开放谷歌。
测试数据只使用了GPS-500的天线，遮蔽场景&#43;没有进行差分定位——因此精度只有米级，加上地图使用的是从omap奥维地图里截取的静态腾讯地图（现在谷歌地图需要翻墙才能获得），清晰度不是很好，也做不了更多的定位精度分析，但是看着玩还是OK的。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c6229a01b26fd6b73b6d8b933bdf9d55/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-31T23:51:00+08:00" />
<meta property="article:modified_time" content="2022-08-31T23:51:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ZED-F9K使用：录制数据&#43;地图查看</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>ZED-F9K使用：行车录制数据+地图查看</h4> 
 <ul><li><a href="#ZEDF9K_2" rel="nofollow">ZED-F9K设备安装、天线安装、标定</a></li><li><ul><li><a href="#_3" rel="nofollow">设备准备</a></li><li><ul><li><a href="#_5" rel="nofollow">天线准备</a></li></ul> 
   </li><li><a href="#F9K_8" rel="nofollow">F9K配置和标定</a></li></ul> 
  </li><li><a href="#ZEDF9KUCenter_14" rel="nofollow">ZED-F9K配套软件UCenter</a></li><li><ul><li><a href="#_16" rel="nofollow">录制和回放数据</a></li><li><a href="#_19" rel="nofollow">添加地图和矫正地图坐标</a></li></ul> 
  </li><li><a href="#_22" rel="nofollow">测试数据展示</a></li></ul> 
</div> 
<br> F9K是u-blox公司提供的一个高精定位+惯导组合模块，是一个针对车道级定位的产品。虽然在公司的实际场景测试中会发现F9K需要在GPS天线信号强（开阔场景）、RTK信号稳定、配置完好等情况下才勉强达到车规级，也就是说最终的L3自动驾驶还得依靠其他传感器，一个F9K定位模块是不够的。但是它优点在于价格不高，适用量产车。 
<p></p> 
<h2><a id="ZEDF9K_2"></a>ZED-F9K设备安装、天线安装、标定</h2> 
<h3><a id="_3"></a>设备准备</h3> 
<p>首先要准备一个F9K板。这个不多说了——F9K模块需要固定在车内，后期还需要根据板子和天线、车辆前后轴中心的定位参数来标定。</p> 
<h4><a id="_5"></a>天线准备</h4> 
<p>使用蘑菇头的GPS-500天线就可以。无须多说，天线为F9K提供卫星定位信号。<br> 蘑菇头外天线只能提供GNSS信号，如果需要更高精度的差分RTK，则要加外部联网设备和一个RTK服务账号。联网设备可以选择DTU、TBOX，可以自己手机开热点给PC，在UCenter里配置NTRIP client。</p> 
<h3><a id="F9K_8"></a>F9K配置和标定</h3> 
<p>F9K的标定需要：配置好F9K内通道、测量好杆壁值（也就是F9K设备到天线和车辆前后轴中心的距离等），确认RTK数据接入，确认轮速信号接入。<br> F9K内通道是根据自己需要接入的数据来配置的，可以自定义打开需要的报文。<br> <img src="https://images2.imgbox.com/29/08/SZE86tw5_o.png" alt="UCenter-Generation 9 Configuration View"><br> 标定在上述准备完成后，打开标定模式，进行IMU动态校准，让车辆跑8字+直线行驶，FINE之后记录YAW/Pitch/Roll。（详细操作可询问UBX的技术支持）<br> 标定后记录的数据轨迹会是<strong>黄色的3D+DR状态</strong>。</p> 
<h2><a id="ZEDF9KUCenter_14"></a>ZED-F9K配套软件UCenter</h2> 
<p>F9K支持通过串口输入输出，UCenter就是配套的串口数据查看和更改软件。官网支持下载，也有非常齐全的用户手册使用资料。</p> 
<h3><a id="_16"></a>录制和回放数据</h3> 
<p>UCenter支持测试数据的录制和回放，根据录制数据的需要可以打开相应串口，参考用户手册。<br> 在行车过程中，点击工具栏上的红色按钮，选择报存的文件夹，即可开始。后续回放，OPEN打开先前录制的文件即可，在录制过程前打开的串口，和过程中一样，都可以在回放过程里读到数据。</p> 
<h3><a id="_19"></a>添加地图和矫正地图坐标</h3> 
<p>工具栏上有一个地图的图标，点击之后，在下方空白处右键——打开open map，可以插入png格式的图片。这种图片可以在很多平台上截取，我截取的是奥维地图（omap）软件里的腾讯地图遥感影像。<br> 截取的影像图片，在导入UCenter的MAP中，会提示缺少坐标。需要选择三个点输入经纬度（WGS84坐标系）进行坐标系矫正。在奥维地图上截取的时候，是可以看到插入点坐标的，但是奥维地图里的图层是腾讯地图（GCJ坐标系），需要进行一下<strong>坐标转换</strong>。网上有很多在线工具支持，转三个点就行。</p> 
<h2><a id="_22"></a>测试数据展示</h2> 
<p>下面这组轨迹是前几天分析天线信号强度的时候去公司附近高架桥下采集的，遥感图最初是想拿来看效果，结果发现由于地图精度很差压根看不出来什么效果……真的很想吐槽国内打着名义上的地图安全理由不开放谷歌。<br> 测试数据只使用了GPS-500的天线，遮蔽场景+没有进行差分定位——因此精度只有米级，加上地图使用的是从omap奥维地图里截取的静态腾讯地图（现在谷歌地图需要翻墙才能获得），清晰度不是很好，也做不了更多的定位精度分析，但是<strong>看着玩</strong>还是OK的。<br> <img src="https://images2.imgbox.com/65/a8/qZr9etnh_o.png" alt="采集数据"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/755985676eef48fb0861ca0380899639/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">golang学习笔记（18）-gin对于文件的接收以及返回</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/2b2d60611cc3f2d9d75c8635d5bdf5af/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何进行CAN总线高效测试？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>