<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot之log4j高级配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot之log4j高级配置" />
<meta property="og:description" content="springboot中使用application.yml或者 application.properties配置文件，就能够简单的配置log日志的打印格式，输出文件名以及路径了。但是如果要求分级别输出，配置日志回滚策略等自定义比较高的操作就需要引入logback-spring.xml或者logback.xml；spring官方推荐使用logback-spring.xml
说明：
logback和logback-spring.xml都可以用来配置logback，但是2者的加载顺序是不一样的。
logback.xml &gt; application.properties &gt; logback-spring.xml
logback.xml &gt; application.yml &gt; logback-spring.xml
logback.xml加载早于application.properties，所以如果你在logback.xml使用了变量时，而恰好这个变量是写在application.properties时，那么就会获取不到，只要改成logback-spring.xml就可以解决。但是如果你想使用其他日志框架，要跳过springboot集成的日志框架，那就需要用logback.xml了，还有剔除掉依赖包的引入，这里就不详细说明了。
补充一下各日志框架对应的配置文件
Logback：logback-spring.xml, logback-spring.groovy, logback.xml, logback.groovyLog4j：log4j-spring.properties, log4j-spring.xml, log4j.properties, log4j.xmlLog4j2：log4j2-spring.xml, log4j2.xmlJDK (java Util Logging)：logging.properties springboot中使用的是Logback日志框架，暂时不去评论框架的优缺点。官方推荐优先使用带有-spring的文件名作为你的日志配置文件，并且放在src/main/resources下面。这里我们虽然使用了logback-spring.xml，但是依然不能直接用 ${****}（例如${spring.application.name}）来获取application中已经加载的变量，需要使用spring的标签springProperty引入需要用到的变量，然后再用 ${****}获取。例如：
&lt;!--读取application.yml中配置的项目id--&gt; &lt;springProperty scope=&#34;context&#34; name=&#34;application.name&#34; source=&#34;spring.application.name&#34;/&gt; 这里的 source就是application里面的变量名，name是在本xml中的命名，也可以保持跟source一致，本文中做别名以区分。对比普通的property 标签就可以发现springProperty标签的相似之处和区别
&lt;!--自定义项目id--&gt; &lt;property name=&#34;project.name&#34; value=&#34;service-feign-promise&#34;/&gt; 下面是Logback日志配置步骤，干货（本文使用的是application.yml）
1、修改application.yml
spring: profiles: active: dev #开发环境 application: name: service-feign-promise #日志输出配置 logging: config: classpath:logback-spring.xml level: root: INFO com.paixi.promise.mapper: DEBUG org.springframework: INFO 可以看到，日志的配置中，不再配置文件输出路径，多配置了一个config项，这是引导至logback-spring.xml中，由此文件负责日志的各种配置。level项还是要保留的，这里的level不是指记录输出到log文件的级别，是指源码的要输出的级别。
比喻：log文件或者控制台是收货人，源码是发货人。那么这里的level就是决定是否发货，发什么货；而logback-spring.xml中配置的level就是决定我们的log文件或者控制台是否收货，收的是什么货。光发货不收货，或者光收货不发货都是不能成功完成交易的。当然了，这里只是个比喻，其原理远比这里复杂，就不多说了。
2、配置logback-spring.xml
先不多说了，先把源码贴出来吧，以表诚意，也是给自己做个笔记以免忘记。哈哈哈
源码中已经注释了许多，在源码的后面也会对一部分的标签作详细的说明，有兴趣的可以移步。也可以在使用的过程中百度或者谷歌一下都可以找到的。
声明：此配置文件参考了两位网友的博客：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5fb2a59c565e1e1f7bd843d14a14cbd1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-30T11:06:10+08:00" />
<meta property="article:modified_time" content="2019-01-30T11:06:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot之log4j高级配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>springboot中使用<code>application.yml</code>或者 <code>application.properties</code>配置文件，就能够简单的配置log日志的打印格式，输出文件名以及路径了。但是如果要求分级别输出，配置日志回滚策略等自定义比较高的操作就需要引入<code>logback-spring.xml</code>或者<code>logback.xml</code>；spring官方推荐使用<code>logback-spring.xml</code><br> <strong>说明：</strong><br> logback和logback-spring.xml都可以用来配置logback，但是2者的加载顺序是不一样的。<br> <code>logback.xml</code> &gt; <code>application.properties</code> &gt; <code>logback-spring.xml</code><br> <code>logback.xml</code> &gt; <code>application.yml</code> &gt; <code>logback-spring.xml</code><br> logback.xml加载早于application.properties，所以如果你在logback.xml使用了变量时，而恰好这个变量是写在application.properties时，那么就会获取不到，只要改成logback-spring.xml就可以解决。但是如果你想使用其他日志框架，要跳过springboot集成的日志框架，那就需要用logback.xml了，还有剔除掉依赖包的引入，这里就不详细说明了。<br> 补充一下各日志框架对应的配置文件</p> 
<ol><li>Logback：logback-spring.xml, logback-spring.groovy, logback.xml, logback.groovy</li><li>Log4j：log4j-spring.properties, log4j-spring.xml, log4j.properties, log4j.xml</li><li>Log4j2：log4j2-spring.xml, log4j2.xml</li><li>JDK (java Util Logging)：logging.properties</li></ol> 
<p>springboot中使用的是Logback日志框架，暂时不去评论框架的优缺点。官方推荐优先使用带有-spring的文件名作为你的日志配置文件，并且放在src/main/resources下面。这里我们虽然使用了<code>logback-spring.xml</code>，但是依然不能直接用 <code>${****}</code>（例如<code>${spring.application.name}</code>）来获取application中已经加载的变量，需要使用spring的标签<code>springProperty</code>引入需要用到的变量，然后再用 <code>${****}</code>获取。例如：</p> 
<pre><code>     &lt;!--读取application.yml中配置的项目id--&gt;
     &lt;springProperty scope="context" name="application.name" source="spring.application.name"/&gt;
</code></pre> 
<p>这里的 source就是application里面的变量名，name是在本xml中的命名，也可以保持跟source一致，本文中做别名以区分。对比普通的property 标签就可以发现springProperty标签的相似之处和区别</p> 
<pre><code>	&lt;!--自定义项目id--&gt;
	&lt;property name="project.name" value="service-feign-promise"/&gt;
</code></pre> 
<p>下面是Logback日志配置步骤，干货（本文使用的是<code>application.yml</code>）<br> <strong>1、修改<code>application.yml</code></strong></p> 
<pre><code>spring:
  profiles:
    active: dev #开发环境
  application:
      name: service-feign-promise
#日志输出配置
logging:
  config: classpath:logback-spring.xml
  level:
    root: INFO
    com.paixi.promise.mapper: DEBUG
    org.springframework: INFO
</code></pre> 
<p>可以看到，日志的配置中，不再配置文件输出路径，多配置了一个<code>config</code>项，这是引导至<code>logback-spring.xml</code>中，由此文件负责日志的各种配置。<code>level</code>项还是要保留的，这里的level不是指记录输出到log文件的级别，是指源码的要输出的级别。</p> 
<p>比喻：log文件或者控制台是收货人，源码是发货人。那么这里的level就是决定是否发货，发什么货；而<code>logback-spring.xml</code>中配置的<code>level</code>就是决定我们的log文件或者控制台是否收货，收的是什么货。光发货不收货，或者光收货不发货都是不能成功完成交易的。当然了，这里只是个比喻，其原理远比这里复杂，就不多说了。</p> 
<p><strong>2、配置<code>logback-spring.xml</code></strong></p> 
<p>先不多说了，先把源码贴出来吧，以表诚意，也是给自己做个笔记以免忘记。哈哈哈<br> 源码中已经注释了许多，在源码的后面也会对一部分的标签作详细的说明，有兴趣的可以移步。也可以在使用的过程中百度或者谷歌一下都可以找到的。<br> 声明：此配置文件参考了两位网友的博客：<br> <a href="https://blog.csdn.net/xu_san_duo/article/details/80364600">https://blog.csdn.net/xu_san_duo/article/details/80364600</a><br> <a href="https://blog.csdn.net/qianyiyiding/article/details/76565810">https://blog.csdn.net/qianyiyiding/article/details/76565810</a></p> 
<pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration scan="true" scanPeriod="10 seconds"&gt;
    &lt;include resource="org/springframework/boot/logging/logback/base.xml"/&gt;
    &lt;logger name="org.springframework.web" level="INFO"/&gt;
    &lt;!-- 彩色日志格式 --&gt;
    &lt;property name="CONSOLE_LOG_PATTERN"
              value="${CONSOLE_LOG_PATTERN:-%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}}"/&gt;
    &lt;!--读取application.yml中配置的项目id--&gt;
    &lt;springProperty scope="context" name="application.name" source="spring.application.name"/&gt;
    &lt;!--自定义项目id--&gt;
    &lt;property name="project.name" value="service-feign-promise"/&gt;
    &lt;!--开发环境下的日志目录统一配置--&gt;
    &lt;property name="dev.log.path" value="D:/prise-logs/${project.name}"/&gt;
    &lt;!--测试环境下的日志目录统一配置--&gt;
    &lt;property name="test.log.path" value="/usr/local/prise-logs/${project.name}"/&gt;
    &lt;!--生产环境下的日志目录统一配置--&gt;
    &lt;property name="pro.log.path" value="/usr/local/prise-logs/${project.name}"/&gt;
    &lt;!--控制台输出统一定义，各环境下共享--&gt;
    &lt;appender name="consoleAppender" class="ch.qos.logback.core.ConsoleAppender"&gt;
        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;!--设置日志输出格式--&gt;
            &lt;Pattern&gt;${CONSOLE_LOG_PATTERN}&lt;/Pattern&gt;
            &lt;!-- 设置字符集 --&gt;
            &lt;charset&gt;UTF-8&lt;/charset&gt;
        &lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!--开发环境，不用输出到文件--&gt;
    &lt;springProfile name="dev"&gt;
        &lt;root level="INFO"&gt;
            &lt;!--5、输出 level 为 debug 的日志，时间滚动输出  --&gt;
            &lt;appender name="DEBUG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${dev.log.path}/debug.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;!-- 每天日志归档路径以及格式 --&gt;
                    &lt;fileNamePattern&gt;${dev.log.path}/debug-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;6KB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
                &lt;!-- 过滤得到debug级别的 --&gt;
                &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
                    &lt;level&gt;debug&lt;/level&gt;
                    &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                    &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;
            &lt;/appender&gt;
        &lt;/root&gt;
    &lt;/springProfile&gt;

    &lt;!--测试环境--&gt;
    &lt;springProfile name="test"&gt;
        &lt;root level="INFO"&gt;
            &lt;!--1、输出所有level 日志，时间滚动输出  --&gt;
            &lt;appender name="ALL_LOG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${test.log.path}/all.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;!-- 每天日志归档路径以及格式 --&gt;
                    &lt;fileNamePattern&gt;${test.log.path}/all-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
            &lt;/appender&gt;
            &lt;!-- 5、输出level为 ERROR 日志，时间滚动输出  --&gt;
            &lt;appender name="ERROR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${test.log.path}/error.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 此处设置字符集 --&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;fileNamePattern&gt;${test.log.path}/error-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
                &lt;!-- 过滤得到ERROR级别的 --&gt;
                &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
                    &lt;level&gt;ERROR&lt;/level&gt;
                    &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                    &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;
            &lt;/appender&gt;
        &lt;/root&gt;
    &lt;/springProfile&gt;


    &lt;!--生产环境--&gt;
    &lt;springProfile name="pro"&gt;
        &lt;root level="INFO"&gt;
            &lt;!--1、输出所有level 日志，时间滚动输出  --&gt;
            &lt;appender name="ALL_LOG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${pro.log.path}/all.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;!-- 每天日志归档路径以及格式 --&gt;
                    &lt;fileNamePattern&gt;${pro.log.path}/all-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;100MB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
            &lt;/appender&gt;
            &lt;!--2、 输出level为 INFO 日志，时间滚动输出  --&gt;
            &lt;appender name="INFO_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${pro.log.path}/info.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;!-- 每天日志归档路径以及格式 --&gt;
                    &lt;fileNamePattern&gt;${pro.log.path}/info-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
                &lt;!-- 过滤得到info级别的 --&gt;
                &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
                    &lt;level&gt;info&lt;/level&gt;
                    &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                    &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;
            &lt;/appender&gt;
            &lt;!-- 3、输出 level 为 debug 的日志，时间滚动输出  --&gt;
            &lt;appender name="DEBUG_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${pro.log.path}/debug.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;!-- 每天日志归档路径以及格式 --&gt;
                    &lt;fileNamePattern&gt;${pro.log.path}/debug-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
                &lt;!-- 过滤得到debug级别的 --&gt;
                &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
                    &lt;level&gt;debug&lt;/level&gt;
                    &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                    &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;
            &lt;/appender&gt;
            &lt;!-- 4、输出 level为 WARN 日志，时间滚动输出  --&gt;
            &lt;appender name="WARN_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${pro.log.path}/warn.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 此处设置字符集 --&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;fileNamePattern&gt;${pro.log.path}/warn-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
                &lt;!-- 过滤得到warn级别的 --&gt;
                &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
                    &lt;level&gt;warn&lt;/level&gt;
                    &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                    &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;
            &lt;/appender&gt;
            &lt;!-- 5、输出level为 ERROR 日志，时间滚动输出  --&gt;
            &lt;appender name="ERROR_FILE" class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
                &lt;!-- 正在记录的日志文档的路径及文档名 --&gt;
                &lt;file&gt;${pro.log.path}/error.log&lt;/file&gt;
                &lt;!--日志文档输出格式--&gt;
                &lt;encoder&gt;
                    &lt;pattern&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/pattern&gt;
                    &lt;charset&gt;UTF-8&lt;/charset&gt; &lt;!-- 此处设置字符集 --&gt;
                &lt;/encoder&gt;
                &lt;!-- 日志记录器的滚动策略，按日期，按大小记录 --&gt;
                &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
                    &lt;fileNamePattern&gt;${pro.log.path}/error-%d{yyyy-MM-dd}.%i.log&lt;/fileNamePattern&gt;
                    &lt;timeBasedFileNamingAndTriggeringPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                        &lt;maxFileSize&gt;50MB&lt;/maxFileSize&gt;
                    &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
                    &lt;!--日志文档保留天数--&gt;
                    &lt;maxHistory&gt;15&lt;/maxHistory&gt;
                &lt;/rollingPolicy&gt;
                &lt;!-- 过滤得到ERROR级别的 --&gt;
                &lt;filter class="ch.qos.logback.classic.filter.LevelFilter"&gt;
                    &lt;level&gt;ERROR&lt;/level&gt;
                    &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;
                    &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;
                &lt;/filter&gt;
            &lt;/appender&gt;
        &lt;/root&gt;
    &lt;/springProfile&gt;

&lt;/configuration&gt;
</code></pre> 
<p>附：<br> 1、springProfile</p> 
<pre><code>&lt;springProfile name="dev"&gt;
	..................
&lt;/springProfile &gt;
</code></pre> 
<p>这是spring的专用标签，与springProperty同父异母；主要用以多环境配置，标签的name属性与application中的spring. profiles.active变量值关联，根据不同的值，选择加载不同的配置文件块。</p> 
<p>2、rollingPolicy</p> 
<p>日志回滚策略配置； logback本身只提供了两种文件的rolling策略：FixedWindowRollingPolicy和 TimeBasedRollingPolicy，另外提供了一种触发器策略SizeBasedTriggeringPolicy。由于log文件记录有回 滚信息，因此我希望能够每一次执行导入程序就产生一个新的log文件并且将原有的log文件进行备份，实际上也就是每次启动程序就roll一下log文 件<br> TimeBasedRollingPolicy是一个基于日期的回滚策略，可以配置成每天备份一个日志<br> FixedWindowRollingPolicy是一个很简单的日志滚动策略，每次 触发器触发滚动事件时，则将log滚动一次</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9695fb864cc8c9a4a3d1df25278ba9ca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos linux查看硬盘型号</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc392ce1675c0db5000e5274dee04c72/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python3 多线程、多进程的使用场景</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>