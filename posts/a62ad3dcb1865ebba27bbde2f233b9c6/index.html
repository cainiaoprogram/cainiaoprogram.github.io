<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Duilib总结与心得 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Duilib总结与心得" />
<meta property="og:description" content="控件 控件及继承关系图
【Window】窗口
【Control】除Window外其他所有组件都继承自Control
布局：
【Container】
【VerticalLayout】垂直布局：其内元素按照竖直方式排列
【HorizontalLayout】水平布局：其内元素按照水平方式排列
【TileLayout】平铺布局：例如360工具箱。属性columns[列数,如(4)]与itemsize[子项固定大小，如(128,128)]不能同时使用。
【TabLayout】标签页，配合Option使用。
【ChildLayout】
功能控件：
【ActiveX】
【WebBrowser】浏览器
【Label】标签
【Button】按钮
【Text】文本
【Progress】--【Slider】进度条--进度条按钮
【Edit】输入框，支持showhtml。
【RichEdit】输入框，不支持showhtml。支持多行，直接打回车即可。
【Option】标签
【ScrollBar】滚动条
【GifAnimGif】动画
【Combo】下拉框
【List--ListHeader】--【ListHeaderItem】--【ListLabelElement】--【ListTextElement】--【ListContainerElement】列表
【TreeView】--【TreeNode】树
属性 详细属性查看官方Duilib文件夹内的&#34;属性列表.xml&#34;。
【name】控件名字，同一窗口内必须唯一。建议命名格式&#34;控件类型名称&#34;,例如:&#34;btnClose&#34;;&#34;optionMain&#34;。
【bkcolor】背景颜色。如：0xFFFFFFFF。一般的颜色RGB表示都是六位，这里的八位中的前两位为FF，后面六位与普通RGB颜色编码相同。RGB颜色参考
【bkcolor2】背景渐变色2,和bkcolor配合使用,如(0xFFFFFF00)。
【bkcolor3】背景渐变色3,和bkcolor、bkcolor2配合使用,如(0xFFFF00FF)&#34;。
【bkimage】背景图片,如(bk.bmp或file=&#39;aaa.jpg&#39; res=&#39;&#39; restype=&#39;0&#39; dest=&#39;0,0,0,0&#39; source=&#39;0,0,0,0&#39; corner=&#39;0,0,0,0&#39; mask=&#39;#FF0000&#39; fade=&#39;255&#39; hole=&#39;false&#39; xtiled=&#39;false&#39; ytiled=&#39;false&#39;)。
【width】控件预设的宽度，如(100)。
【height】控件预设的高度，如(30)。
【text】显示文本,如(测试文本)。
【tooltip】鼠标悬浮提示,如(请在这里输入你的密码)。
【enabled】是否可以响应用户操作,如(true)。
【mouse】本控件是否可以响应鼠标操作,如(true)。
【mousechild】本控件的子控件是否可以响应用户操作,如(true)。
【visible】是否可见，如(true)。
【menu】是否需要右键菜单。
【float】【pos】是否采用绝对定位以及位置(左上右下)。如float=&#34;true&#34; pos=&#34;10,10,10,10&#34;。只有float为true时，pos才有效，只有float为true，无pos时内容不显示。更多用法见补充的布局技巧
【padding】外边距,如(2,2,2,2)。边距不属于此控件。
【inset】容器的内边距,如(2,2,2,2)。边距属于此控件。
【bordercolor】边框颜色,如(0xFF000000)。
【focusbordercolor】获得焦点时边框的颜色,如(0xFFFF0000)。
【align】文字对齐方式。在option中可以取left、right、center、top、button，如(center)。
【textpadding】文字显示的边距,如(2,2,2,2)。
【endellipsis】句末显示不全是否使用...代替,如(true)&#34;/&gt;
【showhtml】是否使用类html富文本绘制,如(false)。
【vscrollbar】是否使用竖向滚动条,如(true)。只有内容超出容器后才会显示滚动条。
自己需要先定义vscrollbar滚动条
&lt;Default name=&#34;VScrollBar&#34; value=&#34;&#34; /&gt;
【hscrollbar】是否使用横向滚动条,如(true)。只有内容超出容器后才会显示滚动条。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a62ad3dcb1865ebba27bbde2f233b9c6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-02T14:03:58+08:00" />
<meta property="article:modified_time" content="2019-08-02T14:03:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Duilib总结与心得</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>控件</h3> 
<p>控件及继承关系图</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/6a/96/1onJcDSW_o.png"></p> 
<p><img alt="" class="has" height="735" src="https://images2.imgbox.com/e5/eb/eMoAzBJp_o.png" width="997"></p> 
<p>【Window】窗口</p> 
<p>【Control】除Window外其他所有组件都继承自Control</p> 
<p>布局：</p> 
<p>【Container】</p> 
<p>【VerticalLayout】垂直布局：其内元素按照竖直方式排列</p> 
<p>【HorizontalLayout】水平布局：其内元素按照水平方式排列</p> 
<p>【TileLayout】平铺布局：例如360工具箱。属性columns[列数,如(4)]与itemsize[子项固定大小，如(128,128)]不能同时使用。</p> 
<p>【TabLayout】标签页，配合Option使用。</p> 
<p>【ChildLayout】</p> 
<p>功能控件：</p> 
<p>【ActiveX】</p> 
<p>【WebBrowser】浏览器</p> 
<p>【Label】标签</p> 
<p>【Button】按钮</p> 
<p>【Text】文本</p> 
<p>【Progress】--【Slider】进度条--进度条按钮</p> 
<p>【Edit】输入框，支持showhtml。</p> 
<p>【RichEdit】输入框，不支持showhtml。支持多行，直接打回车即可。</p> 
<p>【Option】标签</p> 
<p>【ScrollBar】滚动条</p> 
<p>【GifAnimGif】动画</p> 
<p>【Combo】下拉框</p> 
<p>【List--ListHeader】--【ListHeaderItem】--【ListLabelElement】--【ListTextElement】--【ListContainerElement】列表</p> 
<p>【TreeView】--【TreeNode】树</p> 
<h3><a name="t1"></a>属性</h3> 
<p>详细属性查看官方Duilib文件夹内的"属性列表.xml"。</p> 
<p>【name】控件名字，同一窗口内必须唯一。建议命名格式"控件类型名称",例如:"btnClose";"optionMain"。</p> 
<p>【bkcolor】背景颜色。如：0xFFFFFFFF。一般的颜色RGB表示都是六位，这里的八位中的前两位为FF，后面六位与普通RGB颜色编码相同。<a href="https://link.jianshu.com?t=http://tool.oschina.net/commons?type=3" rel="nofollow">RGB颜色参考</a></p> 
<p>【bkcolor2】背景渐变色2,和bkcolor配合使用,如(0xFFFFFF00)。</p> 
<p>【bkcolor3】背景渐变色3,和bkcolor、bkcolor2配合使用,如(0xFFFF00FF)"。</p> 
<p>【bkimage】背景图片,如(bk.bmp或file='aaa.jpg' res='' restype='0' dest='0,0,0,0' source='0,0,0,0' corner='0,0,0,0' mask='#FF0000' fade='255' hole='false' xtiled='false' ytiled='false')。</p> 
<p>【width】控件预设的宽度，如(100)。</p> 
<p>【height】控件预设的高度，如(30)。</p> 
<p>【text】显示文本,如(测试文本)。</p> 
<p>【tooltip】鼠标悬浮提示,如(请在这里输入你的密码)。</p> 
<p>【enabled】是否可以响应用户操作,如(true)。</p> 
<p>【mouse】本控件是否可以响应鼠标操作,如(true)。</p> 
<p>【mousechild】本控件的子控件是否可以响应用户操作,如(true)。</p> 
<p>【visible】是否可见，如(true)。</p> 
<p>【menu】是否需要右键菜单。</p> 
<p>【float】【pos】是否采用绝对定位以及位置(左上右下)。如float="true" pos="10,10,10,10"。只有float为true时，pos才有效，只有float为true，无pos时内容不显示。更多用法见补充的布局技巧</p> 
<p>【padding】外边距,如(2,2,2,2)。边距不属于此控件。</p> 
<p>【inset】容器的内边距,如(2,2,2,2)。边距属于此控件。</p> 
<p>【bordercolor】边框颜色,如(0xFF000000)。</p> 
<p>【focusbordercolor】获得焦点时边框的颜色,如(0xFFFF0000)。</p> 
<p>【align】文字对齐方式。在option中可以取left、right、center、top、button，如(center)。</p> 
<p>【textpadding】文字显示的边距,如(2,2,2,2)。</p> 
<p>【endellipsis】句末显示不全是否使用...代替,如(true)"/&gt;</p> 
<p>【showhtml】是否使用类html富文本绘制,如(false)。</p> 
<p>【vscrollbar】是否使用竖向滚动条,如(true)。只有内容超出容器后才会显示滚动条。<br> 自己需要先定义vscrollbar滚动条</p> 
<pre> </pre> 
<ol><li> <p><code><code>&lt;Default name="VScrollBar" value="" /&gt;</code></code></p> </li><li> </li></ol> 
<p>【hscrollbar】是否使用横向滚动条,如(true)。只有内容超出容器后才会显示滚动条。</p> 
<pre> </pre> 
<ol><li> <p><code><code>&lt;Default name="HScrollBar" value="" /&gt;</code></code></p> </li><li> </li></ol> 
<p>【bkimage】【normalimage】【hotimage】【focusedimage】【pushedimage】【selectedimage】【disabledimage】<br> 【textcolor】【hottextcolor】【focusedtextcolor】【pushedtextcolor】【selectedtextcolor】【disabledtextcolor】<br> 普通状态--鼠标悬浮状态--获得焦点时状态--鼠标按下状态--选中状态--禁用状态<br> 【foreimage】option，process，slider具有的前景图片。</p> 
<h3><a name="t2"></a>实例</h3> 
<h4><a name="t3"></a>时间控件</h4> 
<pre class="has"><code>&lt;DateTime name="DateTimeDemo1" bkcolor="#FFE2E5EA"/&gt; 
</code></pre> 
<h4><a name="t4"></a>按钮</h4> 
<pre class="has"><code> &lt;Button name="closebtn" tooltip="关闭"   float="true" pos="44,5,74,24" width="28" normalimage=" file='SysBtn\CloseNormal.bmp' " hotimage=" file='SysBtn\CloseFocus.bmp' " pushedimage=" file='SysBtn\CloseFocus.bmp' "/&gt;
</code></pre> 
<h4><a name="t5"></a>进度条</h4> 
<pre> </pre> 
<ol><li> <p><code>&lt;Progress name="ProgressDemo1" text="Progress" width="100" height="20" foreimage="Progress/progress_fore.png" min="0" max="100" value="50" hor="true" align="center"/&gt;</code></p> </li><li> </li><li> <p><code>&lt;Slider name="SliderDemo1" width="100" height="18" thumbsize="12,20" bkimage="file='Slider/slider_fore.bmp' mask='0xffff00ff'" thumbimage="file='Slider/SliderBar.png' mask='0xffffffff'"/&gt;</code></p> </li></ol> 
<h4><a name="t6"></a>下拉框</h4> 
<pre> </pre> 
<ol><li> <p><code>&lt;Combo name="ComboDemo1" width="100" height="30" normalimage="file='ComboBox/Combo_nor.bmp'" hotimage="file='ComboBox/Combo_over.bmp' " pushedimage="file='ComboBox/Combo_over.bmp' "&gt;</code></p> </li><li> <p><code>&lt;ListLabelElement text="zdy" selected="true"/&gt;</code></p> </li><li> <p><code>&lt;ListLabelElement text="zzz"/&gt;</code></p> </li><li> <p><code>&lt;/Combo&gt;</code></p> </li></ol> 
<h4><a name="t7"></a>编辑框</h4> 
<pre class="has"><code>&lt;Edit text="姜糖不语" font="2"  textcolor="#FF00a0e9" bordersize="2" bordercolor="#FF000000" focusbordercolor="#FFFF0000"/&gt;
</code></pre> 
<h4><a name="t8"></a>图片</h4> 
<pre class="has"><code>&lt;Container width="30" height="30" bkimage="file='SysBtn\setting_o.png'  dest='10,5,30,25'"/&gt;
</code></pre> 
<h4><a name="t9"></a>横线</h4> 
<pre class="has"><code>&lt;Control height="1" bkcolor="#FF000000"/&gt;
</code></pre> 
<h4><a name="t10"></a>导航栏与标签页</h4> 
<pre> </pre> 
<ol><li> <p><code>//需要配合逻辑代码实现</code></p> </li><li> <p><code>&lt;Option name="OptionDemo1" text="1" bkcolor="#FFC5D4F2" group="tabDemo" selected="true"/&gt;</code></p> </li><li> <p><code>&lt;Option name="OptionDemo2" text="1" bkcolor="#FFFFDC78" group="tabDemo"/&gt;</code></p> </li><li> <p><code>&lt;Option name="OptionDemo3" text="1" bkcolor="#FFBECEA1" group="tabDemo"/&gt;</code></p> </li><li> </li><li> <p><code>&lt;TabLayout name="tabTest" bkcolor="#FFB2D1E3"&gt;</code></p> </li><li> <p><code>&lt;HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;Label text="Option1" bkcolor="#FFC5D4F2" align="center" /&gt;</code></p> </li><li> <p><code>&lt;/HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;Text text="Option2" bkcolor="#FFFFDC78" align="center" /&gt;</code></p> </li><li> <p><code>&lt;/HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;Button text="Option3" bkcolor="#FFBECEA1" align="center" /&gt;</code></p> </li><li> <p><code>&lt;/HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;/TabLayout&gt;</code></p> </li></ol> 
<h4><a name="t11"></a>树</h4> 
<p>注意那个按钮的实现。</p> 
<pre> </pre> 
<ol><li> <p><code>&lt;Default name="TreeNode" value="width="9999""/&gt;</code></p> </li><li> <p><code>&lt;TreeView vscrollbar="true" &gt; </code></p> </li><li> <p><code>&lt;TreeNode height="24" folderattr="normalimage="file='SysBtn/list_icon_e.png' dest='6,6,18,18'" selectedimage="file='SysBtn/list_icon_f.png' dest='6,6,18,18'"" &gt;</code></p> </li><li> <p><code>&lt;Text text="错误项" textcolor="#FFFF0000" font="3" float="true" pos="20,0,9999,9999" /&gt; </code></p> </li><li> <p><code>&lt;TreeNode text="xxx" &gt;</code></p> </li><li> <p><code>&lt;Button text="修复" textcolor="#FF1ddb6e" width="50"/&gt;</code></p> </li><li> <p><code>&lt;/TreeNode&gt;</code></p> </li><li> <p><code>&lt;/TreeNode&gt;</code></p> </li><li> <p><code>&lt;/TreeView&gt;</code></p> </li></ol> 
<h3><a name="t12"></a>控件响应消息类型</h3> 
<p><a href="https://link.jianshu.com?t=http://www.cnblogs.com/MuyouSome/p/3424137.html" rel="nofollow">原链接</a></p> 
<table><thead><tr><th>消息</th><th>说明</th><th>Sender</th></tr></thead><tbody><tr><td>click</td><td>鼠标点击</td><td>CButtonUI</td></tr><tr><td>dropdown</td><td>下拉显示</td><td>CComboUI</td></tr><tr><td>headerclick</td><td>点击列标题</td><td>CListHeaderItemUI</td></tr><tr><td>itemactivate</td><td> </td><td>CListElementUI、CListContainerElementUI</td></tr><tr><td>itemclick</td><td>单击选项</td><td>CListLabelElementUI、CListContainerElementUI</td></tr><tr><td>itemselect</td><td>选择选项</td><td>CComboUI、CListUI</td></tr><tr><td>killfocus</td><td>失去焦点</td><td>CControlUI</td></tr><tr><td>link</td><td> </td><td>CTextUI、CListTextElementUI</td></tr><tr><td>menu</td><td> </td><td>CButtonUI、CControlUI</td></tr><tr><td>return</td><td>回车</td><td>CEditWnd、CRichEditUI</td></tr><tr><td>scroll</td><td>滚动</td><td>CScrollBarUI</td></tr><tr><td>selectchanged</td><td>变更选项</td><td>COptionUI</td></tr><tr><td>setfocus</td><td>获得焦点</td><td>CControlUI</td></tr><tr><td>showactivex</td><td> </td><td>CActiveXUI</td></tr><tr><td>textchanged</td><td>文本被改变</td><td>CEditWnd</td></tr><tr><td>tabselect</td><td>标签页被选中</td><td>CTabLayoutUI</td></tr><tr><td>timer</td><td> </td><td>CControlUI</td></tr><tr><td>valuechanged</td><td>值发生变化</td><td>CSliderUI</td></tr><tr><td>windowinit</td><td>窗体初始化</td></tr></tbody></table> 
<h3><a name="t13"></a>部分方法实现</h3> 
<pre> </pre> 
<ol><li> <p><code>SetText();</code></p> </li><li> <p><code>SetColor();</code></p> </li><li> <p><code>…</code></p> </li></ol> 
<h4><a name="t14"></a>控件创建</h4> 
<p>增加控件：<code>pNode-&gt;Add(pText);</code><br> TreeNode增加TreeNode：<code>pNode-&gt;AddAt(pNodeLeaf, 0);</code></p> 
<h4><a name="t15"></a>标签页</h4> 
<p>相关xml：</p> 
<pre> </pre> 
<ol><li> <p><code>&lt;!--导航栏--&gt;</code></p> </li><li> <p><code>&lt;HorizontalLayout height="113" bkcolor="#FF267FFC" bkcolor2="#FF0782FB"&gt;</code></p> </li><li> <p><code>&lt;HorizontalLayout width="920"&gt;</code></p> </li><li> <p><code>&lt;Option name="AdSafe1" text="净网首页" align="right" textcolor="#FFFFFFFF" font="1" textpadding="0,0,20,0" normalimage="file='Option\Option1m.png' dest='36,36,76,76'" hotimage="file='Option\Option1w.png' dest='36,36,76,76'" pushedimage="file='Option\Option1w.png' dest='36,36,76,76'" selectedimage="file='Option\Option1w.png' dest='36,36,76,76'" group="AdSafeOption" selected="true"/&gt;</code></p> </li><li> <p><code>&lt;Option name="AdSafe2" text="深度优化" align="right" textcolor="#FFFFFFFF" font="1" textpadding="0,0,20,0" normalimage="file='Option\Option2m.png' dest='36,36,76,76'" hotimage="file='Option\Option2w.png' dest='36,36,76,76'" pushedimage="file='Option\Option2w.png' dest='36,36,76,76'" selectedimage="file='Option\Option2w.png' dest='36,36,76,76'" group="AdSafeOption" /&gt;</code></p> </li><li> <p><code>&lt;Option name="AdSafe3" text="弹窗抓取" align="right" textcolor="#FFFFFFFF" font="1" textpadding="0,0,20,0" normalimage="file='Option\Option3m.png' dest='36,36,76,76'" hotimage="file='Option\Option3w.png' dest='36,36,76,76'" pushedimage="file='Option\Option3w.png' dest='36,36,76,76'" selectedimage="file='Option\Option3w.png' dest='36,36,76,76'" group="AdSafeOption" /&gt;</code></p> </li><li> <p><code>&lt;Option name="AdSafe4" text="拦截记录" align="right" textcolor="#FFFFFFFF" font="1" textpadding="0,0,20,0" normalimage="file='Option\Option4m.png' dest='36,36,76,76'" hotimage="file='Option\Option4w.png' dest='36,36,76,76'" pushedimage="file='Option\Option4w.png' dest='36,36,76,76'" selectedimage="file='Option\Option4w.png' dest='36,36,76,76'" group="AdSafeOption" /&gt;</code></p> </li><li> <p><code>&lt;Option name="AdSafe5" text="移动净网版" align="right" textcolor="#FFFFFFFF" font="1" textpadding="0,0,20,0" normalimage="file='Option\Option5m.png' dest='32,36,62,76'" hotimage="file='Option\Option5w.png' dest='32,36,62,76'" pushedimage="file='Option\Option5w.png' dest='32,36,62,76'" selectedimage="file='Option\Option5w.png' dest='32,36,62,76'" group="AdSafeOption" /&gt;</code></p> </li><li> <p><code>&lt;/HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;HorizontalLayout /&gt;</code></p> </li><li> <p><code>&lt;/HorizontalLayout&gt;</code></p> </li><li> <p><code>&lt;!--窗体--&gt;</code></p> </li><li> <p><code>&lt;TabLayout name="AdSafeContent" bkcolor="#FFFFFFFF"&gt;</code></p> </li><li> <p><code>&lt;!-- &lt;ChildLayout xmlfile="PageOne.xml" /&gt;</code></p> </li><li> <p><code>&lt;ChildLayout xmlfile="PageTwo.xml" /&gt;</code></p> </li><li> <p><code>&lt;ChildLayout xmlfile="PageThree.xml" /&gt;</code></p> </li><li> <p><code>&lt;ChildLayout xmlfile="PageFour.xml" /&gt;</code></p> </li><li> <p><code>&lt;ChildLayout xmlfile="PageFive.xml" /&gt; --&gt;</code></p> </li><li> <p><code>&lt;Include source="PageOne.xml" /&gt;</code></p> </li><li> <p><code>&lt;Include source="PageTwo.xml" /&gt;</code></p> </li><li> <p><code>&lt;Include source="PageThree.xml" /&gt;</code></p> </li><li> <p><code>&lt;Include source="PageFour.xml" /&gt; </code></p> </li><li> <p><code>&lt;Include source="PageFive.xml" /&gt;</code></p> </li><li> <p><code>&lt;/TabLayout&gt;</code></p> </li></ol> 
<p>相关代码片段：</p> 
<pre> </pre> 
<ol><li> <p><code><code>if (msg.sType == _T("selectchanged"))</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>CDuiString strName = msg.pSender-&gt;GetName();</code></code></p> </li><li> <p><code><code>CTabLayoutUI* pControl = static_cast&lt;CTabLayoutUI*&gt;(m_PaintManager.FindControl(_T("AdSafeContent")));</code></code></p> </li><li> <p><code><code>if (strName == _T("AdSafe1"))</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pControl-&gt;SelectItem(0);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>if (strName == _T("AdSafe2"))</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pControl-&gt;SelectItem(1);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>if (strName == _T("AdSafe3"))</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pControl-&gt;SelectItem(2);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>if (strName == _T("AdSafe4"))</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pControl-&gt;SelectItem(3);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>if (strName == _T("AdSafe5"))</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pControl-&gt;SelectItem(4);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> </li></ol> 
<h4><a name="t16"></a>Combo</h4> 
<p>相关xml:</p> 
<pre> </pre> 
<ol><li> <p><code>&lt;Combo name="comboUpdateFrequency" width="60" height="30" normalimage="file='ComboBox/Combo_nor.bmp' corner='5,2,30,2'" hotimage="file='ComboBox/Combo_over.bmp' corner='5,2,30,2'" pushedimage="file='ComboBox/Combo_over.bmp' corner='5,2,30,2'" &gt;</code></p> </li><li> <p><code>&lt;ListLabelElement name="listDay" text=" 每天" selected="true"/&gt;</code></p> </li><li> <p><code>&lt;ListLabelElement name="listWeek" text=" 每周" /&gt;</code></p> </li><li> <p><code>&lt;ListLabelElement name="listMonth" text=" 每月" /&gt;</code></p> </li><li> <p><code>&lt;/Combo&gt;</code></p> </li></ol> 
<p>相关代码片段：</p> 
<pre> </pre> 
<ol><li> <p><code><code>void SetUpdateFrequency(int iUpdateFrequency)</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>CComboUI* pComboUpdateFrequency = static_cast&lt;CComboUI*&gt;(m_PaintManager.FindControl(_T("comboUpdateFrequency")));</code></code></p> </li><li> <p><code><code>pComboUpdateFrequency-&gt;SetInternVisible(true);</code></code></p> </li><li> <p><code><code>if (iUpdateFrequency == 0)</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pComboUpdateFrequency-&gt;SelectItem(0);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>else if (iUpdateFrequency == 1)</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pComboUpdateFrequency-&gt;SelectItem(1);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>else if (iUpdateFrequency == 2)</code></code></p> </li><li> <p><code><code>{<!-- --></code></code></p> </li><li> <p><code><code>pComboUpdateFrequency-&gt;SelectItem(2);</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> <p><code><code>}</code></code></p> </li><li> </li></ol> 
<h3><a name="t17"></a>补充</h3> 
<h4><a name="t18"></a>阴影实现</h4> 
<p>在WinMain入口函数内添加</p> 
<pre> </pre> 
<ol><li> <p><code><code>CWndShadow::Initialize(hInstance);</code></code></p> </li><li> </li></ol> 
<p>在窗口类内定义一个成员变量</p> 
<pre class="has"><code>CWndShadow m_WndShadow;
</code></pre> 
<p>在初始化窗口InitWindow函数内部进行实现</p> 
<pre> </pre> 
<ol><li> <p><code><code>m_WndShadow.Create(m_hWnd);</code></code></p> </li><li> <p><code><code>m_WndShadow.SetSize(3);</code></code></p> </li><li> <p><code><code>m_WndShadow.SetDarkness(200);</code></code></p> </li><li> <p><code><code>//m_WndShadow.SetColor(0x0AFF00);</code></code></p> </li><li> <p><code><code>m_WndShadow.SetPosition(0, 0);</code></code></p> </li><li> </li></ol> 
<h4><a name="t19"></a>关于【ChildLayout】</h4> 
<p>作用就是从一个xml文件中加载布局来嵌入到ChildLayout布局所在的地方，使用这个布局一般只需要指定xmlfile属性来设置xml文件位置就可以了。他的意义在于可以把繁杂的大量xml代码分隔开。比如他和TabLayout布局结合，让TabLayout布局包含5个ChildLayout布局，而每个ChildLayout布局分别从5个xml文件加载自己的布局文件，这样就可以分块化的编写布局代码。</p> 
<p>实际上有个比他更好用的标签，就是Include标签，Include不属于布局，但他的作用在布局方面非常类似ChildLayout，指定他的Source属性到某个xml文件就可以了。相对ChildLayout，Include的优点是可以自动识别自定义控件，而ChildLayout不可以！</p> 
<h4><a name="t20"></a>布局技巧</h4> 
<p>1.一般是垂直布局，水平布局嵌套使用。</p> 
<p>2.使用【inset】属性和【padding】。【inset】的边框依旧属于控件内部，而【padding】的边框不属于控件。</p> 
<p>3.使用float。<br><code>float="0.5,0.5,0.5,0.5" pos="-10,-10,10,10"</code>。在上一层控件的正中间。距离中间点左上右下都是10的矩形。</p> 
<p><code>float="0.1,0.3,0.2,0.4" pos="0,0,0,0"</code>。占据上一层控件的水平0.1-0.2，垂直0.3-0.4的区域。</p> 
<h4><a name="t21"></a>关于在逻辑代码中SetPos无效的问题。</h4> 
<p>1.设置控件的Pos的时候控件必须已经Add到了某个Contain中，否则SetPos无效</p> 
<p>2.如果一定想在之前设置的话，那么请使用SetAttribute ，转<a href="https://link.jianshu.com?t=http://www.bubuko.com/infodetail-807698.html" rel="nofollow">Duilib ApplyAttributeList和SetPos陷阱</a></p> 
<h4><a name="t22"></a>Combo不显示值的问题</h4> 
<p>需要<code>pCombo-&gt;SetInternVisible(true);</code> 具体实例见上面的combo实例</p> 
<h4><a name="t23"></a>RECT类型示例</h4> 
<pre> </pre> 
<ol><li> <p><code><code>RECT rc;</code></code></p> </li><li> <p><code><code>rc.left = 20;</code></code></p> </li><li> <p><code><code>rc.top = 0;</code></code></p> </li><li> <p><code><code>rc.right = 9999;</code></code></p> </li><li> <p><code><code>rc.bottom = 9999;</code></code></p> </li><li> <p><code><code>CTextUI* pText = new CTextUI;</code></code></p> </li><li> <p><code><code>pText-&gt;SetFloat(true);</code></code></p> </li><li> <p><code><code>pText-&gt;SetPos(rc);</code></code></p> </li><li> </li></ol> 
<h4><a name="t24"></a>TreeNode的bug</h4> 
<p>如果直接在TreeNode设置文字，那么textcolor属性无效，需要使用</p> 
<pre class="has"><code>itemattr="textcolor="#FFFF0000" font="3"" 
</code></pre> 
<p>但是此属性在鼠标悬浮后失效（如果是黑色的无影响），目前为深入研究解决方案。所以推荐采用TreeNode嵌套Text实现。</p> 
<h4><a name="t25"></a>不显示边框阴影</h4> 
<p>经过个人使用发现：window必须roundcorner属性才能实现阴影。</p> 
<pre> </pre> 
<ol><li> <p><code><code>&lt;Window size="920,600" mininfo="920,600" roundcorner="5,5" caption="0,0,0,30" sizebox="4,4,4,4" &gt;</code></code></p> </li><li> <p><code><code>&lt;/Window&gt;</code></code></p> </li><li> </li></ol> 
<h4><a name="t26"></a>关于ini文件的读写以及一个坑</h4> 
<p>相对路径设置如下将跟cpp文件在同一目录</p> 
<pre> </pre> 
<ol><li> <p><code><code>#define inisrc TEXT(".//config.ini")</code></code></p> </li><li> </li></ol> 
<p>使用方式</p> 
<pre> </pre> 
<ol><li> <p><code><code>int iCloseStatus = GetPrivateProfileInt(TEXT("CloseStatus"), TEXT("status"), 1, inisrc);</code></code></p> </li><li> <p><code><code>int iUpdateFrequency = GetPrivateProfileInt(TEXT("Update"), TEXT("frequency"), 1, inisrc);</code></code></p> </li><li> <p><code><code>WritePrivateProfileString(TEXT("CloseStatus"), TEXT("status"), _T("0"), inisrc);</code></code></p> </li><li> <p><code><code>WritePrivateProfileString(TEXT("Update"), TEXT("frequency"), _T("0"), inisrc);</code></code></p> </li><li> </li></ol> 
<p>相关文件【config.ini】内容</p> 
<pre> </pre> 
<ol><li> <p><code>[CloseStatus]</code></p> </li><li> <p><code>status=0</code></p> </li><li> <p><code>[Update]</code></p> </li><li> <p><code>frequency=0</code></p> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/98f112e6cc456d3aa0cfb571d849d684/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SQLite3的绑定函数族使用时需要注意的一个问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ae959b4cffb10773b3da3fc948471d11/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">qchart 柱状图顶端带数字显示以及tooltip</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>