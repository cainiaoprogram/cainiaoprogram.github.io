<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>虚幻UE 材质-PBR基于物理的渲染 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="虚幻UE 材质-PBR基于物理的渲染" />
<meta property="og:description" content="注意：本篇不会深入讲解PBR各个模块的核心理论，以较为通顺的方式讲解，如需核心理论可以前往链接: 重新理解PBR（1）处学习。
文章目录 一、PBR简述二、材质参数1、基础颜色2、粗糙度3、法线4、金属度5、高光 三、核心理论1、微平面理论-反射2、能量守恒-反射能量小于入射能量3、菲涅尔特性4、BRDF双向反射分布函数5、线性空间光照 四、参考 一、PBR简述 PBR(Physically Based Rendering)：一种基于物理的渲染方式，根据现实生活中对事物材质随光的变化规律得到的理念和原则，基于这个规则理念去渲染的方式就叫PBR。（个人理解）
这么做很容易套用现实生活中的客观规律，渲染的画面也更接近现实。
做好PBR的方式很简单
就是要做好三件事
1、观察表面材质（材质参数）
2、分析表面材质随光的变化规律（核心理论）
3、按规律总结复刻（复制粘贴）
二、材质参数 观察表面参数，主要需要去观察以下几个方面：
1、基础颜色？（BaseColor）
2、粗糙度（Roughness）
3、金属度（Metallic）
4、法线（Normal）
5、高光（Specular）
等
1、基础颜色 • 即物体本身的颜色。（影响整体观感）
• 约等于渲染器的Diffuse | 漫反射、固有色
• Bridge中叫 Albedo | 反照率、反射率
• *BaseColor贴图本身应无光照信息
2、粗糙度 • 即物体表面的粗糙程度。（影响光的反射）
• 0（黑色）表示绝对光滑，1（白色）表示绝对粗糙
• *其它渲染器一般使用Glossiness（光滑度）来描述表面粗糙度，其逻辑和Roughness是反向的。
3、法线 • 描述物体表面的细微起伏（材质都是2D，然后还原3D，得靠法线）
• “光照魔法”，不改变几何体本身
• *改变几何体本身的技术是Displacement | 置换
4、金属度 • 描述物体表面的金属特征（金属和非金属反光的规律差别很大）
• 金属特征：反射（高光）颜色是否跟随基础色
• 换句话说，反射内容是否被“染色”
非金属车漆反射的颜色是环境的颜色，而金属车漆反射的是本身颜色。
材质参数关注的都是表面特性，和你是否是什么材质无关，和你想表现的材质有关。
但是有一部分金属可能就不是很符合“反射（高光）颜色是否跟随基础色”这个特性。
如：银，因为它的基础色就是白色。
反射并没有发生“染色”，是因为染色结果为“白色”，也就是原色。
5、高光 • 虚幻无法直接为材质设定反射IOR，而是用Specular参数替代（后面会详细讲解IOR）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7fe959890d50bcbdf53c4cdc7596d9cd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-28T16:05:03+08:00" />
<meta property="article:modified_time" content="2023-12-28T16:05:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">虚幻UE 材质-PBR基于物理的渲染</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>注意：本篇不会深入讲解PBR各个模块的核心理论，以较为通顺的方式讲解，如需核心理论可以前往链接: <a href="https://www.csdn.net/">重新理解PBR（1）</a>处学习。</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#PBR_9" rel="nofollow">一、PBR简述</a></li><li><a href="#_20" rel="nofollow">二、材质参数</a></li><li><ul><li><a href="#1_29" rel="nofollow">1、基础颜色</a></li><li><a href="#2_35" rel="nofollow">2、粗糙度</a></li><li><a href="#3_40" rel="nofollow">3、法线</a></li><li><a href="#4_46" rel="nofollow">4、金属度</a></li><li><a href="#5_59" rel="nofollow">5、高光</a></li></ul> 
  </li><li><a href="#_77" rel="nofollow">三、核心理论</a></li><li><ul><li><a href="#1_78" rel="nofollow">1、微平面理论-反射</a></li><li><a href="#2_99" rel="nofollow">2、能量守恒-反射能量小于入射能量</a></li><li><a href="#3_110" rel="nofollow">3、菲涅尔特性</a></li><li><a href="#4BRDF_132" rel="nofollow">4、BRDF双向反射分布函数</a></li><li><a href="#5_141" rel="nofollow">5、线性空间光照</a></li></ul> 
  </li><li><a href="#_166" rel="nofollow">四、参考</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="PBR_9"></a>一、PBR简述</h2> 
<p><strong>PBR(Physically Based Rendering)：一种基于物理的渲染方式，根据现实生活中对事物材质随光的变化规律得到的理念和原则，基于这个规则理念去渲染的方式就叫PBR。（个人理解）</strong><br> 这么做很容易套用现实生活中的客观规律，渲染的画面也更接近现实。</p> 
<p>做好PBR的方式很简单<br> 就是要做好三件事<br> <strong>1、观察表面材质（材质参数）<br> 2、分析表面材质随光的变化规律（核心理论）<br> 3、按规律总结复刻（复制粘贴）</strong></p> 
<hr> 
<h2><a id="_20"></a>二、材质参数</h2> 
<p>观察表面参数，主要需要去观察以下几个方面：<br> <strong>1、基础颜色？（BaseColor）<br> 2、粗糙度（Roughness）<br> 3、金属度（Metallic）<br> 4、法线（Normal）<br> 5、高光（Specular）<br> 等</strong></p> 
<h3><a id="1_29"></a>1、基础颜色</h3> 
<p><strong>• 即物体本身的颜色。（影响整体观感）</strong><br> • 约等于渲染器的Diffuse | 漫反射、固有色<br> • Bridge中叫 Albedo | 反照率、反射率<br> • *<strong>BaseColor贴图本身应无光照信息</strong><br> <img src="https://images2.imgbox.com/d7/fb/EZY6wDxZ_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_35"></a>2、粗糙度</h3> 
<p><strong>• 即物体表面的粗糙程度。（影响光的反射）</strong><br> • <strong>0（黑色）表示绝对光滑，1（白色）表示绝对粗糙</strong><br> • *其它渲染器一般使用Glossiness（光滑度）来描述表面粗糙度，其逻辑和Roughness是反向的。<br> <img src="https://images2.imgbox.com/98/72/mBPpHpGt_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="3_40"></a>3、法线</h3> 
<p><strong>• 描述物体表面的细微起伏（材质都是2D，然后还原3D，得靠法线）</strong><br> • “光照魔法”，<strong>不改变几何体本身</strong><br> • *改变几何体本身的技术是Displacement | 置换<br> <img src="https://images2.imgbox.com/58/df/V2TqHTKD_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="4_46"></a>4、金属度</h3> 
<p><strong>• 描述物体表面的金属特征（金属和非金属反光的规律差别很大）</strong><br> • 金属特征：<strong>反射（高光）颜色是否跟随基础色</strong><br> • 换句话说，反射内容是否被“染色”<br> <img src="https://images2.imgbox.com/e6/4b/4qBci8a2_o.png" alt="在这里插入图片描述"><br> 非金属车漆反射的颜色是环境的颜色，而金属车漆反射的是本身颜色。<br> <strong>材质参数关注的都是表面特性，和你是否是什么材质无关，和你想表现的材质有关。</strong></p> 
<p><strong>但是有一部分金属可能就不是很符合“反射（高光）颜色是否跟随基础色”这个特性。</strong><br> 如：银，因为它的基础色就是白色。<br> 反射并没有发生“染色”，是因为染色结果为“白色”，也就是原色。<br> <img src="https://images2.imgbox.com/23/62/ip9NUSLO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_59"></a>5、高光</h3> 
<p>• <strong>虚幻无法直接为材质设定反射IOR，而是用Specular参数替代（后面会详细讲解IOR）</strong><br> • 默认值0.5，符合IOR 1.5左右的反射曲线<br> • <strong>增加Specular值可以增加0°反射强度，模拟更光亮的非金属表面<br> • 金属无需设置Specular</strong></p> 
<table><thead><tr><th>Material</th><th>Specular</th></tr></thead><tbody><tr><td>Glass</td><td>0.5</td></tr><tr><td>Plastic</td><td>0.5</td></tr><tr><td>Quartz</td><td>0.570</td></tr><tr><td>Ice</td><td>0.224</td></tr><tr><td>Water</td><td>0.255</td></tr><tr><td>Milk</td><td>0.277</td></tr><tr><td>Skin</td><td>0.35</td></tr></tbody></table> 
<hr> 
<h2><a id="_77"></a>三、核心理论</h2> 
<h3><a id="1_78"></a>1、微平面理论-反射</h3> 
<p><strong>反射：当能量碰到表面时，一部分能量会被反弹走。</strong><br> • 物体表面越粗糙，能量集中度越低<br> <strong>• 漫反射（Diffuse）：被反弹走的能量飞往各个方向<br> • 光泽反射（Glossy）：被反弹走的能量主要飞往一个方向<br> • 镜面反射（Mirror）：被反弹走的能量全都飞往一个方向</strong><br> • *现实中几乎不存在完全的漫反射或镜面反射<br> <img src="https://images2.imgbox.com/51/e1/RHjd3hv0_o.png" alt="在这里插入图片描述"><br> 物体越粗糙则发生的漫反射越严重。<br> <img src="https://images2.imgbox.com/61/cc/sTeQTHxh_o.png" alt="在这里插入图片描述"><br> 物体越光滑则发生的光泽反射越强，甚至于镜面反射。<br> <img src="https://images2.imgbox.com/0e/f2/eK7v3jF0_o.png" alt="在这里插入图片描述"><br> <strong>现实中几乎不存在完全的漫反射或镜面反射</strong>，现实生活中的物体表面多多少少有点灰尘啥的东西导致表面不可能光滑。<br> <img src="https://images2.imgbox.com/1a/72/Z0y4Onhz_o.png" alt="在这里插入图片描述"></p> 
<p>而一般在渲染领域中大多数是分为两类：导体（金属）和绝缘体（非金属）<br> <strong>金属表面更光滑，所以反光率更强（&gt;0.5）。<br> 非金属表面更粗糙，所以反光率更弱（&lt;0.06）。</strong></p> 
<h3><a id="2_99"></a>2、能量守恒-反射能量小于入射能量</h3> 
<p><strong>反射也必须遵守能量守恒定律，即：反弹+穿过+吸收 = 入射能量</strong><br> <strong>漫反射和清晰反射是反射的两种形态，此消彼长</strong><br> <img src="https://images2.imgbox.com/b5/89/ImNkOgZb_o.png" alt="在这里插入图片描述"><br> 场景是纸上的一滴水，亮度对比如下：<br> 水中亮部处 &gt; 纸上无水处 &gt; 水中暗部处<br> 出现这样的情况是因为：<br> <strong>反射发生的方式不一样，纸上发生漫反射，光线不集中。<br> 水上发生光泽反射，光线集中，越亮的光线集中越亮，越暗的光线集中越暗。（说法不太正确，理解即可）</strong></p> 
<h3><a id="3_110"></a>3、菲涅尔特性</h3> 
<p><strong>菲涅尔效应是一种表示看到光线的反射率与视角相关的现象，也就是光源入射方向与平面法线方向夹角的对应关系，夹角越大，反射越大，亮度也就越大，反之夹角越小，反射就越小，亮度也就越小。而这种效应中的反射率就被称为菲涅尔反射！</strong><br> 即观察的角度不一样，反射也就不一样，亮度也就不一样了，这就是菲涅尔特性。<img src="https://images2.imgbox.com/1a/a1/k36r6DUy_o.png" alt="在这里插入图片描述"><br> <strong>弱反射则高折射。</strong><br> <img src="https://images2.imgbox.com/91/e7/YPfiZBq5_o.png" alt="在这里插入图片描述"></p> 
<p>反射率：不同角度的反射率不同，0度垂直一般0.04,90度一般0.09。<br> <strong>因为0度反射强，所以不符合典型菲涅尔特征</strong><br> <img src="https://images2.imgbox.com/53/86/PgDUAr9G_o.png" alt="在这里插入图片描述"></p> 
<p><strong>IOR | 折射率， Index of Refraction<br> 描述折射效果的变形程度，或反射强度随视角的变化程度</strong><br> 如果需要查看物体的折射率和反射率可以通过下方链接进入：<br> <a href="https://refractiveindex.info/?shelf=3d&amp;book=liquids&amp;page=water" rel="nofollow">refractiveindex.info</a><br> <img src="https://images2.imgbox.com/c2/a7/MqwT5LGq_o.png" alt="在这里插入图片描述"><br> 反射率<br> <img src="https://images2.imgbox.com/02/b8/CBv1o4si_o.png" alt="在这里插入图片描述"><br> <strong>非金属反射遵循菲涅尔特性<br> • 金属反射具有强反射特性：0°反射远强于非金属<br> • 白色陶瓷 = 白色基础色 + 反射染色为零 + 典型菲涅尔<br> • 银色金属 = 白色基础色 + 反射染色白色 + 金属强反射</strong></p> 
<h3><a id="4BRDF_132"></a>4、BRDF双向反射分布函数</h3> 
<p><strong>描述入射光和观察方向（反射光）关系的数学公式（一个计算入射光和反射光的函数，个人感觉知道就行）</strong><br> • Bidirectional | 双向：入射方向+观察方向（反射方向）<br> • Reflectance Distribution | 反射率分布：反弹后的光如何发散<br> • Function | 函数：功能—这是一个功能，给入参数，输出结果<br> • 比IOR方式更直观统一<br> • 函数结果 = BRDF（观察方向，入射光）<br> <img src="https://images2.imgbox.com/87/5d/nG8i2koq_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="5_141"></a>5、线性空间光照</h3> 
<p>明白提供给计算机的贴图是给人看的还是给电脑看的。<br> **人眼观察到的是非线性的所有屏幕需要呈现非线性的，所以是CRT Gamma<br> 而电脑处理的是线性的，所以需要Linner<br> 而这之间需要转化：则需要Gamma Correction</p> 
<pre><code>输出 = 输入^Gamma
0.218 = 0.52.2
0.5 = 0.2180.45
</code></pre> 
<p>由于只影响灰度，不影响0和1（纯黑和纯白），所以也叫灰度系数，是sRGB的一部分。<br> <img src="https://images2.imgbox.com/4d/06/0PktiyKc_o.png" alt="在这里插入图片描述"><br> <em><strong>• 给人看的：需要最终显示在屏幕上的贴图，典型如基础颜色（BaseColor）。<br> 由于需要在显示器上进行最终显示，因而需要符合sRGB（Gamma）规范。<br> • 给电脑看的：最终不会直接显示在屏幕上的贴图，仅在电脑内部执行计算用<br> 途。典型如金属度（Metallic），粗糙度（Roughness），法线（Normal）<br> 贴图</strong></em><br> <img src="https://images2.imgbox.com/ae/22/tmdDVI5N_o.png" alt="在这里插入图片描述"></p> 
<p><strong>来自Bridge的贴图通常无需手动设置sRGB规范</strong><br> <img src="https://images2.imgbox.com/88/f6/rIMz66lI_o.png" alt="在这里插入图片描述"></p> 
<hr> 
<h2><a id="_166"></a>四、参考</h2> 
<p>链接: <a href="https://blog.csdn.net/qq_17775727/article/details/123284920">技术美术知识学习_04：PBR的个人理解</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ec43c98c4daf546423e6047cfb7ebb57/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">离散点曲线曲率计算方法大汇总</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7adf1e8eaf61d5efeb5f084537f4c6b8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spring Data JPA的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>