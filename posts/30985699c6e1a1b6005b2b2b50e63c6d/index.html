<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>阿里数据集（cluster-trace-v2018）提取 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="阿里数据集（cluster-trace-v2018）提取" />
<meta property="og:description" content="数据集提取 本数据集采用的是cluster-trace-v2018
详情可参考该文献：https://blog.csdn.net/weixin_41988248/article/details/92431588 CSV数据集提取操作见：https://blog.csdn.net/lucky_shi/article/details/105321149 关于read_csv包的用法见：https://blog.csdn.net/dc19971118/article/details/107721340 从阿里数据集来看，我们可以把它的数据大概分为两种信息，一种是机器 容器 任务和实例的元信息，以另一种是利用率的信息，如果是做分析，分析阿里集群的，后者是重要的，但对于做仿真实验的人来说，前一个信息的重要性显然更高，而本人采用阿里数据集是做仿真实验，所以接下来对于数据集的知识会偏向前者。语言采用python
首先是怎么把数据从数据集中把数据提取出来，本人采用了python的数据分析包(pandas):
temp_list = pd.read_csv(filepath_or_buffer=file_name, nrows=self.instance_num, usecols=task_cols) instance_data = temp_list.tolist() 然后你可以像我一样把它封装成一个对象列表，也可以直接把数据列表传上去，这个主要看个人爱好
container_list = list() for data in container_data: temp_container = ContainerData() temp_container.__set_container_data__(data) container_list.append(data) return container_list 然后是四个表的信息，
**注：参考文献中的数据种类是对的，但是其某列的数据类型并不对应表某行数据类型，以下为整理好的对应数据：
machine_meta文件：
# 选中的列分别是：0机器ID 1时间索引 2第一级故障域 3第二集故障域 4机器的CPU数 5机器的内存大小 6状态 cols = [0, 1, 2, 3, 4, 5, 6] container_meta文件：
# 从数据集中提取数据： 0容器ID 1机器ID 2时间戳 3部署域 4状态 5需要的cpu数量 6cpu限制数量 7内存大小 cols = [0, 1, 2, 3, 4, 5, 6, 7] batch_task文件：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/30985699c6e1a1b6005b2b2b50e63c6d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-11T11:25:06+08:00" />
<meta property="article:modified_time" content="2021-05-11T11:25:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">阿里数据集（cluster-trace-v2018）提取</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>数据集提取</h2> 
<p>本数据集采用的是cluster-trace-v2018</p> 
<h5><a id="httpsblogcsdnnetweixin_41988248articledetails92431588_3"></a>详情可参考该文献：https://blog.csdn.net/weixin_41988248/article/details/92431588</h5> 
<h5><a id="CSVhttpsblogcsdnnetlucky_shiarticledetails105321149_5"></a>CSV数据集提取操作见：https://blog.csdn.net/lucky_shi/article/details/105321149</h5> 
<h5><a id="read_csvhttpsblogcsdnnetdc19971118articledetails107721340_7"></a>关于read_csv包的用法见：https://blog.csdn.net/dc19971118/article/details/107721340</h5> 
<p><em>从阿里数据集来看，我们可以把它的数据大概分为两种信息，一种是机器 容器 任务和实例的元信息，以另一种是利用率的信息，如果是做分析，分析阿里集群的，后者是重要的，但对于做仿真实验的人来说，前一个信息的重要性显然更高，而本人采用阿里数据集是做仿真实验，所以接下来对于数据集的知识会偏向前者。语言采用python</em></p> 
<p><strong>首先是怎么把数据从数据集中把数据提取出来，本人采用了python的数据分析包(pandas):</strong></p> 
<pre><code class="prism language-python"> temp_list <span class="token operator">=</span> pd<span class="token punctuation">.</span>read_csv<span class="token punctuation">(</span>filepath_or_buffer<span class="token operator">=</span>file_name<span class="token punctuation">,</span> nrows<span class="token operator">=</span>self<span class="token punctuation">.</span>instance_num<span class="token punctuation">,</span> usecols<span class="token operator">=</span>task_cols<span class="token punctuation">)</span>
        instance_data <span class="token operator">=</span> temp_list<span class="token punctuation">.</span>tolist<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>然后你可以像我一样把它封装成一个对象列表，也可以直接把数据列表传上去，这个主要看个人爱好</strong></p> 
<pre><code class="prism language-python">container_list <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> data <span class="token keyword">in</span> container_data<span class="token punctuation">:</span>
            temp_container <span class="token operator">=</span> ContainerData<span class="token punctuation">(</span><span class="token punctuation">)</span>
            temp_container<span class="token punctuation">.</span>__set_container_data__<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            container_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token keyword">return</span> container_list
</code></pre> 
<p>然后是四个表的信息，</p> 
<p>**注：参考文献中的数据种类是对的，但是其某列的数据类型并不对应表某行数据类型，以下为整理好的对应数据：</p> 
<p>machine_meta文件：</p> 
<pre><code class="prism language-python"><span class="token comment"># 选中的列分别是：0机器ID 1时间索引 2第一级故障域 3第二集故障域 4机器的CPU数  5机器的内存大小 6状态</span>
        cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
</code></pre> 
<p>container_meta文件：</p> 
<pre><code class="prism language-python"><span class="token comment"># 从数据集中提取数据： 0容器ID 1机器ID 2时间戳 3部署域 4状态 5需要的cpu数量 6cpu限制数量 7内存大小</span>
        cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
</code></pre> 
<p>batch_task文件：</p> 
<pre><code class="prism language-python"><span class="token comment"># 提取出来的数据包括： 0任务名字 1实例数 2机器名字 3任务类型 4 状态 5开始时间 6结束时间 7 cpu核心数 8 内存量</span>
        task_col <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
</code></pre> 
<p>batch_instance文件:</p> 
<pre><code class="prism language-python">        <span class="token comment"># 0实例名 1任务名 2工作名 3任务类型 4状态 5开始时间 6结束时间 7机器ID 8Seq_no实例 9total_seq_no实例 10实例中cpu的平均利用率 11实例中cpu中最大利用率 12实例的平均内存利用率 13实例的最大内存利用率  注意后面四项可能没有数据</span>
        task_cols <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span>
</code></pre> 
<p>任务依赖上，可以从数据集中看出，阿里的批处理工作负载由“job-task-instance”模型进行描述。 与谷歌不一样的是：google的数据的最小处理单位是task，而阿里的则是instance。</p> 
<p>可以根据task_name来分析出这个Job的DAG图的。作业通常由若干任务组成，其依赖性由DAG（有向无环图）表示。每个任务都有许多实例，并且只有当任务的所有实例都完成后才能将任务视为“已完成”，即如果任务-2依赖于任务-1，则任务2的任何实例都无法启动在任务-1的所有实例完成之前。</p> 
<p>故障域：用于提高容错能力，分别提供两个故障域，当一个故障域发生故障时，另一个故障域能够继续提供服务</p> 
<p>展望：从参考文献中，可以看到任务之间是存在依赖关系的，接下来会重点考虑实例的设计和任务之间的依赖性问题</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ab3817647bc2d36b26462bb6a3deca10/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Nginx、HAProxy、LVS三者的优缺点</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f135776b4d4dd0a484e37e750b4e7b71/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">go-zero 单体应用框架学习—2 中间件的添加和原理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>