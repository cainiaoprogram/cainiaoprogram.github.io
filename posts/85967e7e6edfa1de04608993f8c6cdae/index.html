<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python中的时间处理模块(二)：datetime模块之timedelta类详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python中的时间处理模块(二)：datetime模块之timedelta类详解" />
<meta property="og:description" content="1、datetime模块 datatime模块是在time模块的基础之上做了封装，提供了更多更好用的类供我们使用，常用的有date、time、datetime、timedelta、tzinfo。但是为了更灵活的处理时间，最好是将time模块和datetime模块中的精髓学习到。
① date类：主要用于处理年、月、日；② time类：主要用于处理时、分、秒；③ datetime类：date类和time类的综合使用，可以处理年、月、日、时、分、秒；④ timedelta类：主要用于做时间加减的；⑤ tzinfo类：时区类；注意：tzinfo类用的不多，也就不专门讲述了，如果有需要，可以自行学习。 2、timedelta类
使用timedelta可以很方便的在日期上做天days，小时hour，分钟minute，秒second，毫秒millisecond，微妙的时间计算microsecond。如果要进行年、月的加减，则需要另外的办法。
但是这个类的使用，一定要结合date类的对象 或 datetime类的对象使用。也就是说，一定是基于这两个类的对象，进行时间的加、减。
注意：timedelta不能单独和time类的对象结合使用，这个下面会做演示。
1）案例说明：分别创建date类、datetime类的对象，然后进行时间的加减； ① 分别创建date类、datetime这两个类的对象；
from datetime import * d = date(2012,12,12) display(d) dt = datetime(2012,12,12,23,59,59) display(dt) 结果如下：
② 利用date类的对象，配合timedelta，进行时间的加减；
date类主要是用于处理年、月、日的，因此对该对象进行时间的加、减，主要是做“日(天数)”的加减。
from datetime import * d = date(2012,12,12) display(d) # 昨天 d1 = d &#43; timedelta(days=-1) display(d1) # 明天 d2 = d &#43; timedelta(days=1) display(d2) 结果如下：
③ 利用datetime类的对象，配合timedelta，进行时间的加减；
datetime类主要是用于处理年、月、日、时、分、秒、毫秒、微妙的，因此对该对象进行时间的加、减，主要做“日(天数)”、“时”、“分”、“秒”、“毫秒”、“微秒”、的加减。
from datetime import * dt = datetime(2012,12,12,23,59,59) display(dt) # 昨天 dt1 = dt &#43; timedelta(days=-1) display(dt1) # 明天 dt2 = dt &#43; timedelta(days=1) display(dt2) # 上一个小时 dt3 = dt &#43; timedelta(hours=-1) display(dt3) # 下一个小时 dt4 = dt &#43; timedelta(hours=1) display(dt4) # 上一秒 dt5 = dt &#43; timedelta(seconds=-1) display(dt5) # 下一秒 dt6 = dt &#43; timedelta(seconds=1) display(dt6) 结果如下：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/85967e7e6edfa1de04608993f8c6cdae/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-09T15:54:08+08:00" />
<meta property="article:modified_time" content="2020-01-09T15:54:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python中的时间处理模块(二)：datetime模块之timedelta类详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h5><a id="1datetime_0"></a>1、datetime模块</h5> 
<p>  datatime模块是在time模块的基础之上做了封装，提供了更多更好用的类供我们使用，常用的有date、time、datetime、timedelta、tzinfo。但是为了更灵活的处理时间，最好是将time模块和datetime模块中的精髓学习到。</p> 
<ul><li><font face="宋体" color="red" size="3">① date类：主要用于处理年、月、日；</font></li><li><font face="宋体" color="red" size="3">② time类：主要用于处理时、分、秒；</font></li><li><font face="宋体" color="red" size="3">③ datetime类：date类和time类的综合使用，可以处理年、月、日、时、分、秒；</font></li><li><font face="宋体" color="red" size="3">④ timedelta类：主要用于做时间加减的；</font></li><li><font face="宋体" color="red" size="3">⑤ tzinfo类：时区类；</font></li><li>注意：tzinfo类用的不多，也就不专门讲述了，如果有需要，可以自行学习。</li></ul> 
<p>2、timedelta类<br>   使用timedelta可以很方便的在日期上做天days，小时hour，分钟minute，秒second，毫秒millisecond，微妙的时间计算microsecond。如果要进行年、月的加减，则需要另外的办法。<br>   但是这个类的使用，一定要结合date类的对象 或 datetime类的对象使用。也就是说，一定是基于这两个类的对象，进行时间的加、减。<br>   注意：timedelta不能单独和time类的对象结合使用，这个下面会做演示。</p> 
<h6><a id="1datedatetime_14"></a>1）案例说明：分别创建date类、datetime类的对象，然后进行时间的加减；</h6> 
<p>① 分别创建date类、datetime这两个类的对象；</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> <span class="token operator">*</span>

d <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d<span class="token punctuation">)</span>

dt <span class="token operator">=</span> datetime<span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt<span class="token punctuation">)</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/00/16/DQMaOq6b_o.png" alt="在这里插入图片描述"><br> ② 利用date类的对象，配合timedelta，进行时间的加减；<br>   date类主要是用于处理年、月、日的，因此对该对象进行时间的加、减，主要是做“日(天数)”的加减。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> <span class="token operator">*</span>

d <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d<span class="token punctuation">)</span>

<span class="token comment"># 昨天</span>
d1 <span class="token operator">=</span> d <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d1<span class="token punctuation">)</span>
<span class="token comment"># 明天</span>
d2 <span class="token operator">=</span> d <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d2<span class="token punctuation">)</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/1f/71/RVrx71Ty_o.png" alt="在这里插入图片描述"><br> ③ 利用datetime类的对象，配合timedelta，进行时间的加减；<br>   datetime类主要是用于处理年、月、日、时、分、秒、毫秒、微妙的，因此对该对象进行时间的加、减，主要做“日(天数)”、“时”、“分”、“秒”、“毫秒”、“微秒”、的加减。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> <span class="token operator">*</span>

dt <span class="token operator">=</span> datetime<span class="token punctuation">(</span><span class="token number">2012</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt<span class="token punctuation">)</span>

<span class="token comment"># 昨天</span>
dt1 <span class="token operator">=</span> dt <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt1<span class="token punctuation">)</span>
<span class="token comment"># 明天</span>
dt2 <span class="token operator">=</span> dt <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>days<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt2<span class="token punctuation">)</span>
<span class="token comment"># 上一个小时</span>
dt3 <span class="token operator">=</span> dt <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt3<span class="token punctuation">)</span>
<span class="token comment"># 下一个小时</span>
dt4 <span class="token operator">=</span> dt <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt4<span class="token punctuation">)</span>
<span class="token comment"># 上一秒</span>
dt5 <span class="token operator">=</span> dt <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt5<span class="token punctuation">)</span>
<span class="token comment"># 下一秒</span>
dt6 <span class="token operator">=</span> dt <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>seconds<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>dt6<span class="token punctuation">)</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/fd/01/WONSCCty_o.png" alt="在这里插入图片描述"><br> ④ 直接利用time类的对象，做时间加、减，会报错；</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> <span class="token operator">*</span>

t <span class="token operator">=</span> time<span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">,</span><span class="token number">59</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>t<span class="token punctuation">)</span>

t1 <span class="token operator">=</span> t <span class="token operator">+</span> timedelta<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>t1<span class="token punctuation">)</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/ce/33/XVlEIgCl_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3_93"></a>3、实例解析</h5> 
<h6><a id="1_94"></a>1）计算两个日期相隔多少天</h6> 
<ul><li>date类中还有一个重要方法：d.<strong>sub</strong>(d1)和d.<strong>rsub</strong>(d1)方法；</li><li>作用：获得二个日期相差多少天；</li><li>d.<strong>sub</strong>(d1)：计算的是d减去d1的天数；</li><li>d.<strong>rsub</strong>(d1)：计算的是d1减去d的天数；</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> <span class="token operator">*</span>

d <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d<span class="token punctuation">)</span>

d1 <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d1<span class="token punctuation">)</span>

x <span class="token operator">=</span> d<span class="token punctuation">.</span>__sub__<span class="token punctuation">(</span>d1<span class="token punctuation">)</span>
display<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
display<span class="token punctuation">(</span>x<span class="token punctuation">.</span>days<span class="token punctuation">)</span>

y <span class="token operator">=</span> d<span class="token punctuation">.</span>__rsub__<span class="token punctuation">(</span>d1<span class="token punctuation">)</span>
display<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
display<span class="token punctuation">(</span>y<span class="token punctuation">.</span>days<span class="token punctuation">)</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/18/84/crpgqP9n_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2_121"></a>2）计算两个日期相隔多少月</h5> 
<ul><li>实际中，计算两个日期之间的月份，有如下两个思路：Ⅰ自然数的差，直接用月份相减，这种方式最简单粗暴；Ⅱ天数的差，月份 = 天数差 ➗ 30，最后在取整；</li><li>第一种方式很简单，我这里就不细说。下面注意讲述第二种方式的代码实现；</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> datetime <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

d <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d<span class="token punctuation">)</span>

d1 <span class="token operator">=</span> date<span class="token punctuation">(</span><span class="token number">2020</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span>
display<span class="token punctuation">(</span>d1<span class="token punctuation">)</span>

y <span class="token operator">=</span> d<span class="token punctuation">.</span>__rsub__<span class="token punctuation">(</span>d1<span class="token punctuation">)</span>
display<span class="token punctuation">(</span>y<span class="token punctuation">)</span>
display<span class="token punctuation">(</span>y<span class="token punctuation">.</span>days<span class="token punctuation">)</span>

diff_month <span class="token operator">=</span> y<span class="token punctuation">.</span>days <span class="token operator">/</span> <span class="token number">30</span>
display<span class="token punctuation">(</span>diff_month<span class="token punctuation">)</span>

floor_diff_month <span class="token operator">=</span> np<span class="token punctuation">.</span>floor<span class="token punctuation">(</span>diff_month<span class="token punctuation">)</span>
display<span class="token punctuation">(</span>floor_diff_month<span class="token punctuation">)</span>
</code></pre> 
<p>结果如下：<br> <img src="https://images2.imgbox.com/c8/e0/fj4QizxB_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/77ce35e7737b1e5e8ce9c55291d1bbb6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos7-yum无法下载问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/39ba585859cc8998dc9ef0ec5be34ebf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">lotus Proving</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>