<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【编译】gcc make cmake Makefile CMakeList.txt 关系、使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【编译】gcc make cmake Makefile CMakeList.txt 关系、使用" />
<meta property="og:description" content="文章目录 一 关系二 gcc2.1 编译过程2.2 编译参数2.3 静态库和动态库1 后缀名2 联系与区别 2.4 GDB 调试器1 常用命令 三 make、makefile四 cmake、cmakelist4.1 语法特性4.2 重要命令4.2 重要变量4.3 编译流程4.4 两种构建方式 五 Vscode5.0 常用快捷键5.1 界面5.2 插件5.3 .vscode 文件夹1 launch.json2 task.json 一 关系 1 gcc是一种编译器。将源代码转为可执行文件。
当你的程序只有一个源文件时，直接就可以用gcc命令编译它。但当你的程序包含很多个源文件时，用gcc命令逐个去编译时，你就很容易混乱而且工作量大，所以出现了make工具。
2 make是一个批处理工具。在整个项目中管理编译过程。其依据是makefile文件。
3 makefile是一个文本文件，用于指挥make。其中包含一系列规则和命令。make 工具通过读取 makefile 中的规则来确定需要重新编译哪些文件，以及执行哪些命令来完成编译过程。
makefile在一些简单的工程完全可以用人工手写，但是当工程非常大的时候，手写makefile也是非常麻烦的，并且如果换了个平台makefile又要重新修改。这时候就出现了Cmake工具。
4 cmake是一个跨平台构建工具。cmake可以更加简单的生成makefile文件给make用。
5 cmakelist是一个文本文件，用于指挥cmake。
参考网址：http://t.csdn.cn/iNMcN
二 gcc 安装：
sudo apt update sudo apt install build-essential gdb 2.1 编译过程 预处理 -E .i 展开宏编译 -S .s c-&gt;汇编汇编 -c ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/905a1405bed76350fc612333c2ab6619/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-01T10:57:34+08:00" />
<meta property="article:modified_time" content="2023-08-01T10:57:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【编译】gcc make cmake Makefile CMakeList.txt 关系、使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#__1" rel="nofollow">一 关系</a></li><li><a href="#_gcc_33" rel="nofollow">二 gcc</a></li><li><ul><li><a href="#21__42" rel="nofollow">2.1 编译过程</a></li><li><a href="#22__51" rel="nofollow">2.2 编译参数</a></li><li><a href="#23__77" rel="nofollow">2.3 静态库和动态库</a></li><li><ul><li><a href="#1__79" rel="nofollow">1 后缀名</a></li><li><a href="#2__84" rel="nofollow">2 联系与区别</a></li></ul> 
    </li><li><a href="#24_GDB__89" rel="nofollow">2.4 GDB 调试器</a></li><li><ul><li><a href="#1__104" rel="nofollow">1 常用命令</a></li></ul> 
   </li></ul> 
   </li><li><a href="#_makemakefile_112" rel="nofollow">三 make、makefile</a></li><li><a href="#_cmakecmakelist_114" rel="nofollow">四 cmake、cmakelist</a></li><li><ul><li><a href="#41__116" rel="nofollow">4.1 语法特性</a></li><li><a href="#42__120" rel="nofollow">4.2 重要命令</a></li><li><a href="#42__166" rel="nofollow">4.2 重要变量</a></li><li><a href="#43__172" rel="nofollow">4.3 编译流程</a></li><li><a href="#44__178" rel="nofollow">4.4 两种构建方式</a></li></ul> 
   </li><li><a href="#_Vscode_182" rel="nofollow">五 Vscode</a></li><li><ul><li><a href="#50__184" rel="nofollow">5.0 常用快捷键</a></li><li><a href="#51__207" rel="nofollow">5.1 界面</a></li><li><a href="#52__215" rel="nofollow">5.2 插件</a></li><li><a href="#53_vscode__219" rel="nofollow">5.3 .vscode 文件夹</a></li><li><ul><li><a href="#1_launchjson_221" rel="nofollow">1 launch.json</a></li><li><a href="#2_taskjson_223" rel="nofollow">2 task.json</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="__1"></a>一 关系</h3> 
<p>1 <code>gcc</code><strong>是一种编译器</strong>。将源代码转为可执行文件。</p> 
<p>当你的程序只有一个源文件时，直接就可以用gcc命令编译它。但当你的程序包含很多个源文件时，用gcc命令逐个去编译时，你就很容易混乱而且工作量大，所以出现了make工具。</p> 
<p>2 <code>make</code><strong>是一个批处理工具</strong>。在整个项目中管理编译过程。其依据是makefile文件。</p> 
<p>3 <code>makefile</code><strong>是一个文本文件</strong>，<strong>用于指挥make</strong>。其中包含一系列规则和命令。make 工具通过读取 makefile 中的规则来确定需要重新编译哪些文件，以及执行哪些命令来完成编译过程。</p> 
<p>makefile在一些简单的工程完全可以用人工手写，但是当工程非常大的时候，手写makefile也是非常麻烦的，并且如果换了个平台makefile又要重新修改。这时候就出现了Cmake工具。</p> 
<p>4 <code>cmake</code>是一个<strong>跨平台构建工具</strong>。cmake可以更加简单的生成makefile文件给make用。</p> 
<p>5 <code>cmakelist</code><strong>是一个文本文件，用于指挥cmake</strong>。</p> 
<p><img src="https://images2.imgbox.com/02/21/huHmk6Od_o.png" alt="image-20230726151254616"></p> 
<p>参考网址：http://t.csdn.cn/iNMcN</p> 
<hr> 
<hr> 
<h3><a id="_gcc_33"></a>二 gcc</h3> 
<p><strong>安装</strong>：</p> 
<pre><code>sudo apt update
sudo apt install build-essential gdb
</code></pre> 
<h4><a id="21__42"></a>2.1 编译过程</h4> 
<ul><li>预处理 -E .i 展开宏</li><li>编译 -S .s c-&gt;汇编</li><li>汇编 -c .o 汇编-&gt;二进制</li><li>链接 -o bin文件</li></ul> 
<p><img src="https://images2.imgbox.com/78/a5/Di8wRu2Q_o.png" alt="image-20230731165711403"></p> 
<h4><a id="22__51"></a>2.2 编译参数</h4> 
<p>1 -g 带调试信息</p> 
<p>2 -O2 优化源代码</p> 
<p>3 -l -L 指定库文件 | 指定库文件路径</p> 
<p>4 -I 指定头文件搜索目录</p> 
<p>5 -Wall 打印警告信息</p> 
<p>6 -w 关闭警告信息</p> 
<p>7 -std=c++11 设置编译标准</p> 
<p>8 -o 指定输出文件名</p> 
<p>9 -D 定义宏</p> 
<p><img src="https://images2.imgbox.com/31/99/432mfTnb_o.png" alt="image-20230731165958597"></p> 
<p><img src="https://images2.imgbox.com/de/ba/e4QRg845_o.png" alt="image-20230731170020543"></p> 
<p><img src="https://images2.imgbox.com/bb/26/24d95PTv_o.png" alt="image-20230731170034849"></p> 
<h4><a id="23__77"></a>2.3 静态库和动态库</h4> 
<h5><a id="1__79"></a>1 后缀名</h5> 
<ul><li>静态库后缀名：<code>.a</code></li><li>动态库后缀名：<code>.so</code></li></ul> 
<h5><a id="2__84"></a>2 联系与区别</h5> 
<ul><li><strong>静态库</strong>在编译时被链接到目标程序中，成为程序的一部分。优点是可执行文件运行时不依赖外部库。缺点是文件较大。</li><li><strong>动态库</strong>不会被复制到最终的可执行文件中，节省内存，兼容性问题。</li></ul> 
<h4><a id="24_GDB__89"></a>2.4 GDB 调试器</h4> 
<ul><li> <p><strong>安装</strong></p> <pre><code>sudo apt update
sudo apt install build-essential gdb
</code></pre> </li><li> <p><strong>编译时需要带-g</strong></p> <p>gcc -g main.c -o main</p> </li></ul> 
<h5><a id="1__104"></a>1 常用命令</h5> 
<p><img src="https://images2.imgbox.com/a8/eb/LcPdGPP1_o.png" alt="image-20230726212901303"></p> 
<p><img src="https://images2.imgbox.com/6e/60/MCGKmQIZ_o.png" alt="image-20230726212915786"></p> 
<h3><a id="_makemakefile_112"></a>三 make、makefile</h3> 
<h3><a id="_cmakecmakelist_114"></a>四 cmake、cmakelist</h3> 
<h4><a id="41__116"></a>4.1 语法特性</h4> 
<p><img src="https://images2.imgbox.com/e3/cd/MUbvoqsl_o.png" alt="image-20230728110412455"></p> 
<h4><a id="42__120"></a>4.2 重要命令</h4> 
<pre><code># CMake最小版本要求为2.8.3
cmake_minimum_required(VERSION 2.8.3)

# 指定工程名为HELLOWORLD
project(HELLOWORLD)

# 定义SRC变量，其值为sayhello.cpp hello.cpp
set(SRC sayhello.cpp hello.cpp)

# 将/usr/include/myincludefolder 和 ./include 添加到头文件搜索路径
include_directories(/usr/include/myincludefolder ./include)

# 将/usr/lib/mylibfolder 和 ./lib 添加到库文件搜索路径
link_directories(/usr/lib/mylibfolder ./lib)

# 通过变量 SRC 生成 libhello.so 共享库
add_library(hello SHARED ${SRC})

# 添加编译参数 -Wall -std=c++11 -O2
add_compile_options(-Wall -std=c++11 -O2)

# 编译main.cpp生成可执行文件main
add_executable(main main.cpp)

# 将hello动态库文件链接到可执行文件main
target_link_libraries(main hello)

# 添加src子目录，src中需有一个CMakeLists.txt
add_subdirectory(src)

# 定义SRC变量，其值为当前目录下所有的源代码文件
aux_source_directory(. SRC)
    
# 编译SRC变量所代表的源代码文件，生成main可执行文件
add_executable(main ${SRC})
</code></pre> 
<p><img src="https://images2.imgbox.com/c3/15/mRlIBQs2_o.png" alt="image-20230731165308494"></p> 
<p><img src="https://images2.imgbox.com/85/d9/QF2bBzwJ_o.png" alt="image-20230731165343782"></p> 
<p><img src="https://images2.imgbox.com/53/65/CfRSFZuC_o.png" alt="image-20230731165410438"></p> 
<h4><a id="42__166"></a>4.2 重要变量</h4> 
<p><img src="https://images2.imgbox.com/15/31/LXQEkAjw_o.png" alt="image-20230731165534974"></p> 
<p><img src="https://images2.imgbox.com/9e/5b/tlVOXNhl_o.png" alt="image-20230731165553971"></p> 
<h4><a id="43__172"></a>4.3 编译流程</h4> 
<ul><li>1 编写CMakeLists.txt</li><li>2 执行命令：cmake 路径，<strong>生成makefile</strong></li><li>3 执行命令：make</li></ul> 
<h4><a id="44__178"></a>4.4 两种构建方式</h4> 
<p><img src="https://images2.imgbox.com/1f/1d/E3WcTIbs_o.png" alt="image-20230731153412517"></p> 
<h3><a id="_Vscode_182"></a>五 Vscode</h3> 
<h4><a id="50__184"></a>5.0 常用快捷键</h4> 
<table><thead><tr><th align="center">快捷键</th><th align="center">功能</th></tr></thead><tbody><tr><td align="center">行注释</td><td align="center">ctrl+/</td></tr><tr><td align="center">块注释</td><td align="center">ctrl+shift+A</td></tr><tr><td align="center">移动当前行</td><td align="center">alt+上/下</td></tr><tr><td align="center">命令面板</td><td align="center">ctrl+shift+p</td></tr><tr><td align="center">转到文件</td><td align="center">ctrl+p</td></tr><tr><td align="center">转到行</td><td align="center">ctrl+g</td></tr><tr><td align="center">打开终端</td><td align="center">ctrl+~</td></tr><tr><td align="center">变量重命名</td><td align="center">F2</td></tr><tr><td align="center">打开/关闭侧边栏</td><td align="center">ctrl+B</td></tr><tr><td align="center">编辑器拆分</td><td align="center">ctrl+\</td></tr><tr><td align="center">缩略图</td><td align="center">菜单栏：查看/外观</td></tr><tr><td align="center">代码缩进</td><td align="center">ctrl+[/]</td></tr><tr><td align="center">代码格式化</td><td align="center">ctrl+shift+I</td></tr><tr><td align="center">在下方插入一行</td><td align="center">ctrl+enter</td></tr><tr><td align="center">移到定义处</td><td align="center">F12</td></tr><tr><td align="center">编辑区放大缩小</td><td align="center">ctrl+ -/+</td></tr></tbody></table> 
<h4><a id="51__207"></a>5.1 界面</h4> 
<p><strong>四大区</strong>：菜单栏、侧边栏、编辑区、状态栏</p> 
<p><img src="https://images2.imgbox.com/e1/27/Jhe5MLgO_o.png" alt="image-20230728095310489"></p> 
<h4><a id="52__215"></a>5.2 插件</h4> 
<p><img src="https://images2.imgbox.com/fe/ed/3NgaawQE_o.png" alt="image-20230731164620130"></p> 
<h4><a id="53_vscode__219"></a>5.3 .vscode 文件夹</h4> 
<h5><a id="1_launchjson_221"></a>1 launch.json</h5> 
<h5><a id="2_taskjson_223"></a>2 task.json</h5>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e730051e214b24a060f7438dc3638965/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springSecurity自定义过滤器不生效问题排查</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/026e9ddc9aeb25440eb2da4aacfbd2b4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">视频分类（Video Classification）任务概述</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>