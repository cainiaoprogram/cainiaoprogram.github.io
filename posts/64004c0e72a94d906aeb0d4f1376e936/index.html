<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MyBatis项目实战 快速将MySQL转换成Oracle语句 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MyBatis项目实战 快速将MySQL转换成Oracle语句" />
<meta property="og:description" content="一、前言 因项目需求，小编要将项目从mysql迁移到oracle中 ~
之前已经完成 数据迁移 (https://zhengqing.blog.csdn.net/article/details/103694901)
现在将完成 基于MyBatis-Plus将项目中的MySQL语句全部转换成Oracle语句
大概实现步骤： 将项目改成支持双库配置(因项目基于mysql数据库已经全部完成，也不想直接替换掉，于是新增oracle库，让整个项目可支持多个数据库，这里不是多数据源哦！)Oracle中创建常用函数遍历项目中的xxxMapper.xml文件，找到mysql与oracle语句的区别，然后替换绝大部分SQL最后将一些特殊的mysql语句手动修改为oracle语句 二、MyBatis-Plus 支持双库配置 【mysql，oracle】 1、application.yml中配置mybatis-plus的database-id # mybatis-plus配置 mybatis-plus: configuration: jdbc-type-for-null: &#39;null&#39; # 解决oracle更新数据为null时无法转换报错 database-id: oracle # 支持多库配置 mysql,oracle 2、MybatisPlus核心配置文件 -&gt; 根据不同的数据库厂商执行不同的SQL @Configuration @MapperScan(&#34;com.zhengqing.demo.modules.**.mapper*&#34;) public class MybatisPlusConfig { /** * `xxxMapper.xml`文件中的`databaseId`会自动识别使用的数据库类型与这里相对应 * 注: 如果没有指定`databaseId`则该SQL语句适用于所有数据库哦~ * * databaseIdProvider：支持多数据库厂商 * VendorDatabaseIdProvider: 得到数据库厂商的标识(驱动getDatabaseProductName())，mybatis就能根据数据库厂商标识来执行不同的sql; * MySQL，Oracle，SQL Server,xxxx */ @Bean public DatabaseIdProvider getDatabaseIdProvider(){ DatabaseIdProvider databaseIdProvider = new VendorDatabaseIdProvider(); Properties properties = new Properties(); // 为不同的数据库厂商起别名 properties.setProperty(&#34;MySQL&#34;,&#34;mysql&#34;); properties." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/64004c0e72a94d906aeb0d4f1376e936/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-01-10T10:44:00+08:00" />
<meta property="article:modified_time" content="2020-01-10T10:44:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MyBatis项目实战 快速将MySQL转换成Oracle语句</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>一、前言</h4> 
<p>因项目需求，小编要将项目从mysql迁移到oracle中 ~</p> 
<p>之前已经完成 <code>数据迁移</code> (<a href="https://zhengqing.blog.csdn.net/article/details/103694901" rel="nofollow">https://zhengqing.blog.csdn.net/article/details/103694901</a>)</p> 
<p>现在将完成 基于<code>MyBatis-Plus</code>将项目中的<code>MySQL</code>语句全部<code>转换</code>成<code>Oracle</code>语句</p> 
<h6><a id="_8"></a>大概实现步骤：</h6> 
<ol><li>将项目改成支持双库配置(因项目基于mysql数据库已经全部完成，也不想直接替换掉，于是新增oracle库，让整个项目可支持多个数据库，这里不是多数据源哦！)</li><li>Oracle中创建常用函数</li><li>遍历项目中的<code>xxxMapper.xml</code>文件，找到mysql与oracle语句的区别，然后替换绝大部分SQL</li><li>最后将一些特殊的mysql语句手动修改为oracle语句</li></ol> 
<h4><a id="MyBatisPlus__mysqloracle_15"></a>二、MyBatis-Plus 支持双库配置 【<code>mysql</code>，<code>oracle</code>】</h4> 
<h5><a id="1applicationymlmybatisplusdatabaseid_17"></a>1、<code>application.yml</code>中配置<code>mybatis-plus</code>的<code>database-id</code></h5> 
<pre><code class="prism language-yml"><span class="token comment"># mybatis-plus配置</span>
<span class="token key atrule">mybatis-plus</span><span class="token punctuation">:</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">jdbc-type-for-null</span><span class="token punctuation">:</span> 'null' <span class="token comment"># 解决oracle更新数据为null时无法转换报错</span>
    <span class="token key atrule">database-id</span><span class="token punctuation">:</span> oracle <span class="token comment"># 支持多库配置 mysql,oracle</span>
</code></pre> 
<h5><a id="2MybatisPlus__SQL_27"></a>2、MybatisPlus核心配置文件 -&gt; 根据不同的数据库厂商执行不同的SQL</h5> 
<pre><code class="prism language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"com.zhengqing.demo.modules.**.mapper*"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisPlusConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * `xxxMapper.xml`文件中的`databaseId`会自动识别使用的数据库类型与这里相对应
     * 注: 如果没有指定`databaseId`则该SQL语句适用于所有数据库哦~
     * 
     * databaseIdProvider：支持多数据库厂商
	 * VendorDatabaseIdProvider: 得到数据库厂商的标识(驱动getDatabaseProductName())，mybatis就能根据数据库厂商标识来执行不同的sql;
	 * MySQL，Oracle，SQL Server,xxxx
     */</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> DatabaseIdProvider <span class="token function">getDatabaseIdProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        DatabaseIdProvider databaseIdProvider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VendorDatabaseIdProvider</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Properties properties <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 为不同的数据库厂商起别名</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"MySQL"</span><span class="token punctuation">,</span><span class="token string">"mysql"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        properties<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">"Oracle"</span><span class="token punctuation">,</span><span class="token string">"oracle"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        databaseIdProvider<span class="token punctuation">.</span><span class="token function">setProperties</span><span class="token punctuation">(</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> databaseIdProvider<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="3xxxMapperxmldatabaseId_56"></a>3、<code>xxxMapper.xml</code>中通过<code>databaseId</code>指定数据库类型</h5> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>selectUserInfo<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UserVO<span class="token punctuation">"</span></span> <span class="token attr-name">databaseId</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>mysql<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    SELECT * FROM 表名 LIMIT 1
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>selectUserInfo<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UserVO<span class="token punctuation">"</span></span> <span class="token attr-name">databaseId</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>oracle<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    SELECT * FROM 表名 WHERE ROWNUM <span class="token entity" title="&lt;">&amp;lt;</span>= 1
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="Oracle_68"></a>三、Oracle中创建常用函数</h4> 
<blockquote> 
 <p>这里根据个人项目情况去实际应用即可~</p> 
</blockquote> 
<h5><a id="1ORACLE_TO_UNIX_72"></a>1、<code>ORACLE_TO_UNIX</code></h5> 
<p>Oracle时间 Date类型转换为Unix时间戳，等同于mysql中的<code>UNIX_TIMESTAMP</code></p> 
<pre><code class="prism language-sql"><span class="token keyword">create</span> <span class="token operator">or</span> <span class="token keyword">replace</span> <span class="token keyword">function</span> ORACLE_TO_UNIX<span class="token punctuation">(</span>in_date <span class="token operator">IN</span> <span class="token keyword">DATE</span><span class="token punctuation">)</span> <span class="token keyword">return</span> number <span class="token operator">is</span>  
<span class="token keyword">begin</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span> <span class="token function">ROUND</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>in_date <span class="token operator">-</span>TO_DATE<span class="token punctuation">(</span><span class="token string">'19700101'</span><span class="token punctuation">,</span><span class="token string">'yyyymmdd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">86400</span> <span class="token operator">-</span> TO_NUMBER<span class="token punctuation">(</span>SUBSTR<span class="token punctuation">(</span>TZ_OFFSET<span class="token punctuation">(</span>sessiontimezone<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">3600</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">end</span> ORACLE_TO_UNIX<span class="token punctuation">;</span>
</code></pre> 
<h5><a id="2FIND_IN_SET_83"></a>2、<code>FIND_IN_SET</code></h5> 
<pre><code class="prism language-sql"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">FUNCTION</span> FIND_IN_SET<span class="token punctuation">(</span>piv_str1 varchar2<span class="token punctuation">,</span> piv_str2 varchar2<span class="token punctuation">,</span> p_sep varchar2 :<span class="token operator">=</span> <span class="token string">','</span><span class="token punctuation">)</span>
<span class="token keyword">RETURN</span> NUMBER <span class="token operator">IS</span>      
  l_idx    number:<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">-- 用于计算piv_str2中分隔符的位置  </span>
  str      varchar2<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 根据分隔符截取的子字符串  </span>
  piv_str  varchar2<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span> :<span class="token operator">=</span> piv_str2<span class="token punctuation">;</span> <span class="token comment">-- 将piv_str2赋值给piv_str  </span>
  res      number:<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">-- 返回结果  </span>
  loopIndex number:<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">BEGIN</span>  
<span class="token comment">-- 如果piv_str中没有分割符，直接判断piv_str1和piv_str是否相等，相等 res=1  </span>
<span class="token keyword">IF</span> instr<span class="token punctuation">(</span>piv_str<span class="token punctuation">,</span> p_sep<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token keyword">THEN</span>  
   <span class="token keyword">IF</span> piv_str <span class="token operator">=</span> piv_str1 <span class="token keyword">THEN</span>   
      res:<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>  
   <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
<span class="token keyword">ELSE</span>  
<span class="token comment">-- 循环按分隔符截取piv_str  </span>
<span class="token keyword">LOOP</span> 
    l_idx :<span class="token operator">=</span> instr<span class="token punctuation">(</span>piv_str<span class="token punctuation">,</span>p_sep<span class="token punctuation">)</span><span class="token punctuation">;</span>  
     loopIndex:<span class="token operator">=</span>loopIndex<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
	  <span class="token comment">-- 当piv_str中还有分隔符时  </span>
      <span class="token keyword">IF</span> l_idx <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">THEN</span>  
   		 <span class="token comment">-- 截取第一个分隔符前的字段str  </span>
         str:<span class="token operator">=</span> substr<span class="token punctuation">(</span>piv_str<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>l_idx<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
   		 <span class="token comment">-- 判断 str 和piv_str1 是否相等，相等 res=1 并结束循环判断  </span>
         <span class="token keyword">IF</span> str <span class="token operator">=</span> piv_str1 <span class="token keyword">THEN</span>   
           res:<span class="token operator">=</span> loopIndex<span class="token punctuation">;</span>  
           <span class="token keyword">EXIT</span><span class="token punctuation">;</span>  
         <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
        piv_str :<span class="token operator">=</span> substr<span class="token punctuation">(</span>piv_str<span class="token punctuation">,</span>l_idx<span class="token operator">+</span>length<span class="token punctuation">(</span>p_sep<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
      <span class="token keyword">ELSE</span>
    	<span class="token comment">-- 当截取后的piv_str 中不存在分割符时，判断piv_str和piv_str1是否相等，相等 res=1  </span>
        <span class="token keyword">IF</span> piv_str <span class="token operator">=</span> piv_str1 <span class="token keyword">THEN</span>   
           res:<span class="token operator">=</span> loopIndex<span class="token punctuation">;</span>  
        <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
        <span class="token comment">-- 无论最后是否相等，都跳出循环  </span>
        <span class="token keyword">EXIT</span><span class="token punctuation">;</span>  
      <span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
<span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span>  
<span class="token comment">-- 结束循环  </span>
<span class="token keyword">END</span> <span class="token keyword">IF</span><span class="token punctuation">;</span>  
<span class="token comment">-- 返回res  </span>
<span class="token keyword">RETURN</span> res<span class="token punctuation">;</span>  
<span class="token keyword">END</span> FIND_IN_SET<span class="token punctuation">;</span> 
</code></pre> 
<h4><a id="MySQLOracle_130"></a>四、工具类（MySQL语句转换Oracle语句）</h4> 
<h6><a id="_132"></a>替换步骤：</h6> 
<ol><li>在 <code>xxxMapper.xml</code> 中将所有sql语句上加入 <code>databaseId="mysql"</code></li><li>复制一份mysql的sql（即 将替换的oracle语句）</li><li>在复制的sql上加入<code>databaseId="oracle"</code></li><li>找出mysql与oracle语句区别，然后替换sql</li></ol> 
<blockquote> 
 <p>温馨小提示: 这里工具类只供参考，实际操作根据自己的项目做修改哦，操作前建议先备份自己的项目，以防操作不当丢失代码哦！</p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">import</span> org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>commons<span class="token punctuation">.</span>lang3<span class="token punctuation">.</span>StringUtils<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>Test<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>io<span class="token punctuation">.</span>*<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token comment">/**
 *  &lt;p&gt; mysql迁移oracle 测试工具类 &lt;/p&gt;
 *
 * @description :  
 * @author : zhengqing  
 * @date : 2020/1/08 10:10
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySQLToOracleTest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token keyword">static</span> String ORACLE_SQL <span class="token operator">=</span> <span class="token string">"    &lt;!-- ====================================== ↓↓↓↓↓↓ oracle ↓↓↓↓↓↓  ====================================== --&gt;"</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span> <span class="token comment">// 替换项目中的sql语句</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testSQL</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> Exception <span class="token punctuation">{<!-- --></span>
        String path <span class="token operator">=</span> System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"user.dir"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\\src\\main\\java\\com\\zhengqing\\xxx"</span><span class="token punctuation">;</span> <span class="token comment">// TODO 这里替换为自己的项目路径</span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> fileMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">getAllFileByRecursion</span><span class="token punctuation">(</span>fileMap<span class="token punctuation">,</span> file<span class="token punctuation">)</span><span class="token punctuation">;</span>

        fileMap<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
            String fileXmlName <span class="token operator">=</span> <span class="token punctuation">(</span>String<span class="token punctuation">)</span> key<span class="token punctuation">;</span>
            File fileXml <span class="token operator">=</span> <span class="token punctuation">(</span>File<span class="token punctuation">)</span> value<span class="token punctuation">;</span>
            String filePath <span class="token operator">=</span> fileXml<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>fileXmlName<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"Test.xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 1、加入 databaseId="mysql"</span>
                    <span class="token function">addMysql</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 2、复制一份oracle的sql</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">checkHasOracle</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token function">copyMysqlToOracle</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token comment">// 3、加入 databaseId="oracle"</span>
                    <span class="token function">addOracle</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 4、替换mybatis `xxxMapper.xml` 中的sql语句</span>
                    <span class="token function">repalceSQL</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fileMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 替换mybatis `xxxMapper.xml` 中的sql语句
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">repalceSQL</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 内存流, 作为临时流</span>
        CharArrayWriter tempStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 替换</span>
        String line <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">int</span> row <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> rowOracle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufIn<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            row<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>ORACLE_SQL<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                rowOracle <span class="token operator">=</span> row<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>rowOracle <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> row <span class="token operator">&gt;</span> rowOracle<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// ① 替换 `LIMIT` -&gt; `AND ROWNUM &amp;lt;= 1` TODO 【注： 部分包含`ORDER BY` 关键字，需单独处理】</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"limit"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"LIMIT"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">" ==============================↓↓↓↓↓↓  copy分页所需 ("</span> <span class="token operator">+</span> row <span class="token operator">+</span> <span class="token string">")  ↓↓↓↓↓↓===================================== "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"SELECT * FROM ( SELECT TMP.*, ROWNUM ROW_ID FROM ("</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">") TMP  WHERE ROWNUM &amp;lt;=1) WHERE ROW_ID &gt; 0"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                line <span class="token operator">=</span> StringUtils<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">"limit 1"</span><span class="token punctuation">,</span> <span class="token string">"AND ROWNUM &amp;lt;= 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> StringUtils<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">"LIMIT 1"</span><span class="token punctuation">,</span> <span class="token string">"AND ROWNUM &amp;lt;= 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> StringUtils<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">"limit 0,1"</span><span class="token punctuation">,</span> <span class="token string">"AND ROWNUM &amp;lt;= 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> StringUtils<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">"LIMIT 0,1"</span><span class="token punctuation">,</span> <span class="token string">"AND ROWNUM &amp;lt;= 1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// ② oracle中不能使用“ ` ”符号</span>
                line <span class="token operator">=</span> StringUtils<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">"`"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// ③ CONCAT('%', #{name}, '%')  -&gt;     '%'||#{name}||'%' （Oracle中concat函数只能放两个参数）</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"concat"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//                    String newLine = line.substring(line.indexOf("concat(") + 7, line.lastIndexOf("'%')") + 3);</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">,</span> <span class="token string">" || "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"concat"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"CONCAT"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
<span class="token comment">//                    String newLine = line.substring(line.indexOf("CONCAT(") + 7, line.lastIndexOf("'%')") + 3);</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">,</span> <span class="token string">" || "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"CONCAT"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token comment">// ④ `UNIX_TIMESTAMP` -&gt; `ORACLE_TO_UNIX` date类型时间转10位时间戳</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"UNIX_TIMESTAMP"</span><span class="token punctuation">,</span> <span class="token string">"ORACLE_TO_UNIX"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// ⑤ 部分关键字需加上双引号 TODO 【注： 字段名大写，映射的别名需保存原本小写！】 `level -&gt; "LEVEL"`  `user -&gt; "USER"`      `number -&gt; "NUMBER"`  `desc -&gt; "DESC"`</span>
                List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> keywordList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">"level"</span><span class="token punctuation">,</span> <span class="token string">"user"</span><span class="token punctuation">,</span> <span class="token string">"number"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"test="</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token keyword">for</span> <span class="token punctuation">(</span>String e <span class="token operator">:</span> keywordList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token comment">// StringUtils.swapCase(e) : 大小写互换</span>
                        line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> e <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">" \""</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">swapCase</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"."</span> <span class="token operator">+</span> e <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">"\\.\""</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">swapCase</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span>e <span class="token operator">+</span> <span class="token string">","</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token string">"\""</span> <span class="token operator">+</span> StringUtils<span class="token punctuation">.</span><span class="token function">swapCase</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">" date"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">" date,"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">" 'date'"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">" 'DATE'"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"DATE"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" date"</span><span class="token punctuation">,</span> <span class="token string">" \"date\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" date,"</span><span class="token punctuation">,</span> <span class="token string">" \"date,\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" 'date'"</span><span class="token punctuation">,</span> <span class="token string">" \"date\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" 'DATE'"</span><span class="token punctuation">,</span> <span class="token string">" \"date\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" DATE"</span><span class="token punctuation">,</span> <span class="token string">" \"date\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" date "</span><span class="token punctuation">,</span> <span class="token string">" \"date\" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">" DATE "</span><span class="token punctuation">,</span> <span class="token string">" \"date\" "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// ⑥ `IFNULL` -&gt; `NVL`</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"IFNULL"</span><span class="token punctuation">,</span> <span class="token string">"NVL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"ifnull"</span><span class="token punctuation">,</span> <span class="token string">"NVL"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// ⑦ 时间 `str_to_date` -&gt; `to_date`     `date_format` -&gt; `to_char`</span>
                <span class="token comment">// `%Y-%m-%d`  -&gt; `yyyy-MM-dd`    `%Y-%m` -&gt; `yyyy-MM`</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"str_to_date"</span><span class="token punctuation">,</span> <span class="token string">"TO_DATE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"STR_TO_DATE"</span><span class="token punctuation">,</span> <span class="token string">"TO_DATE"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"date_format"</span><span class="token punctuation">,</span> <span class="token string">"TO_CHAR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"DATE_FORMAT"</span><span class="token punctuation">,</span> <span class="token string">"TO_CHAR"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// 这里注意替换顺序问题，最长的应该放最前面！！！</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%i:%S"</span><span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd HH24:mi:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%i:%s"</span><span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd HH24:mi:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%i"</span><span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd HH24:mi"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H"</span><span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd HH24"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %h"</span><span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd HH"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y-%m-%d"</span><span class="token punctuation">,</span> <span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y-%m"</span><span class="token punctuation">,</span> <span class="token string">"yyyy-MM"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%Y"</span><span class="token punctuation">,</span> <span class="token string">"yyyy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%H"</span><span class="token punctuation">,</span> <span class="token string">"HH24"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"%k"</span><span class="token punctuation">,</span> <span class="token string">"HH24"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"now\\(\\)"</span><span class="token punctuation">,</span> <span class="token string">"(SELECT SYSDATE + 8/24 FROM DUAL)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"NOW\\(\\)"</span><span class="token punctuation">,</span> <span class="token string">"(SELECT SYSDATE + 8/24 FROM DUAL)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// ⑧ ...</span>

                <span class="token comment">// 需手动处理的SQL 【 group by | 批量插入 | ... 】</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 将该行写入内存</span>
            tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 添加换行符</span>
            tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 关闭 输入流</span>
        bufIn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将内存中的流 写入 文件</span>
        FileWriter out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tempStream<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 加入 databaseId="mysql"
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addMysql</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 内存流, 作为临时流</span>
        CharArrayWriter tempStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 替换</span>
        String line <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufIn<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;select"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;update"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;insert"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;delete"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"databaseId"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">"&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"&gt;"</span><span class="token punctuation">,</span> <span class="token string">" databaseId=\"mysql\"&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
                    line <span class="token operator">=</span> line <span class="token operator">+</span> <span class="token string">" databaseId=\"mysql\""</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 将该行写入内存</span>
            tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 添加换行符</span>
            tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 关闭 输入流</span>
        bufIn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将内存中的流 写入 文件</span>
        FileWriter out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tempStream<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 加入 databaseId="oracle"
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">addOracle</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 内存流, 作为临时流</span>
        CharArrayWriter tempStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        HashSet<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> lineSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashSet</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 替换</span>
        String line <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufIn<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"databaseId=\"mysql\""</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>lineSet<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">"databaseId=\"mysql\""</span><span class="token punctuation">,</span> <span class="token string">"databaseId=\"oracle\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                lineSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 将该行写入内存</span>
            tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 添加换行符</span>
            tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 关闭 输入流</span>
        bufIn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将内存中的流 写入 文件</span>
        FileWriter out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tempStream<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 复制一份oracle的sql
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">copyMysqlToOracle</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 内存流, 作为临时流</span>
        CharArrayWriter tempStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 替换</span>
        String line <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token comment">// 需要替换的行</span>
        List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> lineList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">int</span> row <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> firstRow <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufIn<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            row<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;select"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;update"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;insert"</span><span class="token punctuation">)</span> <span class="token operator">||</span> line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;delete"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                firstRow <span class="token operator">=</span> row<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 添加替换内容</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>firstRow <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> row <span class="token operator">&gt;=</span> firstRow <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;/mapper&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                lineList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 查询结束位置</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"&lt;/mapper&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>ORACLE_SQL<span class="token punctuation">)</span><span class="token punctuation">;</span>
                tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                lineList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>lineValue <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// copy mysql 语句 转为oracle</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                        tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>lineValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 将该行写入内存</span>
            tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 添加换行符</span>
            tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 关闭 输入流</span>
        bufIn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将内存中的流 写入 文件</span>
        FileWriter out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tempStream<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 检查是否已经复制SQL
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">checkHasOracle</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 内存流, 作为临时流</span>
        CharArrayWriter tempStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 替换</span>
        String line <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufIn<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>ORACLE_SQL<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 将该行写入内存</span>
            tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 添加换行符</span>
            tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 关闭 输入流</span>
        bufIn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将内存中的流 写入 文件</span>
        FileWriter out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tempStream<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 递归文件夹 -&gt; 找到所有xml文件
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">getAllFileByRecursion</span><span class="token punctuation">(</span>HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>Object<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> fileMap<span class="token punctuation">,</span> File file<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        File<span class="token punctuation">[</span><span class="token punctuation">]</span> fs <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">listFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>File f <span class="token operator">:</span> fs<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            String fileName <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 若是目录则递归，否则打印该目录下的文件</span>
                <span class="token function">getAllFileByRecursion</span><span class="token punctuation">(</span>fileMap<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> fileName<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                fileMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>fileName<span class="token punctuation">,</span> f<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_483"></a>五、总结</h4> 
<p>这里简单说下MySQL和Oracle中的SQL区别，以及mysql语句转换oracle语句示例</p> 
<h5><a id="1_487"></a>1、分页</h5> 
<ol><li>mysql: <code>LIMIT 0,1</code></li><li>oracle: <code>ROWNUM &lt;= 1</code></li></ol> 
<h6><a id="mysqlORDER_BY_492"></a>情景①：mysql中不含<code>ORDER BY</code></h6> 
<pre><code class="prism language-sql"><span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 表名 <span class="token keyword">LIMIT</span> <span class="token number">1</span>

<span class="token comment">-- oracle</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 表名  <span class="token keyword">WHERE</span> ROWNUM <span class="token operator">&lt;=</span> <span class="token number">1</span>
</code></pre> 
<h6><a id="mysqlORDER_BY_502"></a>情景②：mysql中含<code>ORDER BY</code></h6> 
<pre><code class="prism language-sql"><span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 表名 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 字段名 <span class="token keyword">DESC</span> <span class="token keyword">LIMIT</span> <span class="token number">1</span> 


<span class="token comment">-- oracle</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span> 
	<span class="token keyword">SELECT</span> TMP<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> ROWNUM ROW_ID <span class="token keyword">FROM</span> <span class="token punctuation">(</span> 
		<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> 表名 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 字段名 <span class="token keyword">DESC</span>
	<span class="token punctuation">)</span> TMP <span class="token keyword">WHERE</span> ROWNUM <span class="token operator">&lt;=</span> <span class="token number">1</span> <span class="token punctuation">)</span> 
<span class="token keyword">WHERE</span> ROW_ID <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> 
<h6><a id="SQL_SELECT_517"></a>温馨小知识：<code>SQL</code> SELECT语句执行顺序</h6> 
<ol><li><code>FROM</code>子句组装来自不同数据源的数据</li><li><code>WHERE</code>子句基于指定的条件对记录进行筛选</li><li><code>GROUP BY</code>子句将数据划分为多个分组</li><li><code>聚集函数</code>进行计算</li><li><code>HAVING</code>子句筛选分组</li><li><code>计算</code>所有<code>表达式</code></li><li><code>ORDER BY</code>对结果进行排序</li></ol> 
<h5><a id="2oracle_____527"></a>2、oracle中字段名不能使用符号 " ` " 包括</h5> 
<pre><code class="prism language-sql"><span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> <span class="token punctuation">`</span>字段名<span class="token punctuation">`</span> <span class="token keyword">FROM</span> 表名

<span class="token comment">-- oracle</span>
<span class="token keyword">SELECT</span> 字段名 <span class="token keyword">FROM</span> 表名
</code></pre> 
<h5><a id="3_537"></a>3、字符串拼接</h5> 
<blockquote> 
 <p>注： Oracle中<code>CONCAT</code>函数只能放两个参数，因此改为 <code>||</code> 拼接</p> 
</blockquote> 
<ol><li>mysql: <code>CONCAT('%', 'xxx' , '%')</code></li><li>oracle: <code>'%' || 'xxx' || '%'</code></li></ol> 
<pre><code class="prism language-sql"><span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> 字段名 <span class="token keyword">FROM</span> 表名 <span class="token keyword">WHERE</span> 字段名 <span class="token operator">LIKE</span> CONCAT<span class="token punctuation">(</span><span class="token string">'%'</span><span class="token punctuation">,</span><span class="token string">'helloworld'</span><span class="token punctuation">,</span><span class="token string">'%'</span><span class="token punctuation">)</span>

<span class="token comment">-- oracle</span>
<span class="token keyword">SELECT</span> 字段名 <span class="token keyword">FROM</span> 表名 <span class="token keyword">WHERE</span> 字段名 <span class="token operator">LIKE</span> <span class="token punctuation">(</span><span class="token string">'%'</span> <span class="token operator">||</span> <span class="token string">'helloworld'</span> <span class="token operator">||</span> <span class="token string">'%'</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="4date10_552"></a>4、date类型时间转10位时间戳</h5> 
<ol><li>mysql: <code>UNIX_TIMESTAMP</code></li><li>oracle: <code>ORACLE_TO_UNIX</code> (注：此函数为步骤三中手动创建的，并非oracle自带哦！)</li></ol> 
<h5><a id="5Oracle__558"></a>5、<code>字段名</code>为<code>Oracle关键字</code>需加上<code>双引号</code></h5> 
<blockquote> 
 <p>温馨小提示： 字段名需大写，如果Java实体类对应字段为小写，映射的别名注意需保持原本小写与之对应 ~</p> 
</blockquote> 
<p>例如：</p> 
<ol><li><code>level -&gt; "LEVEL"</code></li><li><code>user -&gt; "USER"</code></li><li><code>number -&gt; "NUMBER"</code></li><li><code>desc -&gt; "DESC"</code></li><li><code>date</code> -&gt; <code>DATE</code></li></ol> 
<h5><a id="6_NULL_xNULLvaluex_570"></a>6、判断是否为 NULL: 如果x为NULL,则返回value,否则返回x值本身</h5> 
<ol><li>mysql: <code>IFNULL(x, value)</code></li><li>oracle: <code>NVL(x, value)</code></li></ol> 
<h5><a id="7_575"></a>7、日期时间互换</h5> 
<blockquote> 
 <p>前mysql，后oracle</p> 
</blockquote> 
<ol><li>字符串类型转时间类型： <code>STR_TO_DATE</code> -&gt; <code>TO_DATE</code></li><li>时间类型转指定字符串类型： <code>DATE_FORMAT</code> -&gt; <code>TO_CHAR</code></li><li>获取系统当前时间： <code>NOW()</code> -&gt; <code>SELECT SYSDATE FROM DUAL</code></li></ol> 
<pre><code class="prism language-sql"><span class="token comment">-- 时间类型转指定字符串类型</span>
<span class="token keyword">SELECT</span> DATE_FORMAT<span class="token punctuation">(</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span> SYSDATE<span class="token punctuation">,</span><span class="token string">'yyyy-MM-dd HH24:mi:ss'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span> <span class="token comment">-- oracle</span>

<span class="token comment">-- 字符串类型转时间类型</span>
<span class="token keyword">SELECT</span> STR_TO_DATE<span class="token punctuation">(</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> TO_DATE<span class="token punctuation">(</span> <span class="token string">'2020-01-09'</span><span class="token punctuation">,</span> <span class="token string">'yyyy-MM-dd'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span> <span class="token comment">-- oracle 【 注：oracle中前者字符串时间的格式需与后者转换格式相同哦~ 】</span>

<span class="token comment">-- 获取系统当前时间</span>
<span class="token keyword">SELECT</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> SYSDATE <span class="token operator">+</span> <span class="token number">8</span><span class="token operator">/</span><span class="token number">24</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span> <span class="token comment">-- oralce 【注：如果服务器时间没有相差8小时则无需加上`8/24`】</span>

<span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">-- 求年份</span>
<span class="token keyword">SELECT</span> QUARTER<span class="token punctuation">(</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 求季度</span>
<span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span> <span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">-- 求月份</span>

<span class="token comment">-- oracle</span>
<span class="token keyword">SELECT</span> TO_CHAR<span class="token punctuation">(</span>SYSDATE<span class="token punctuation">,</span> <span class="token string">'Q'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> DUAL<span class="token punctuation">;</span> <span class="token comment">-- 求季度</span>
</code></pre> 
<p>另外这里给出小编所用到的时间标识符格式</p> 
<pre><code class="prism language-sql"><span class="token comment">-- 前：mysql             后：oracle</span>
<span class="token string">"%Y-%m-%d %H:%i:%S"</span>     <span class="token string">"yyyy-MM-dd HH24:mi:ss"</span>
<span class="token string">"%Y-%m-%d %H:%i:%s"</span>     <span class="token string">"yyyy-MM-dd HH24:mi:ss"</span>
<span class="token string">"%Y-%m-%d %H:%i"</span>        <span class="token string">"yyyy-MM-dd HH24:mi"</span>
<span class="token string">"%Y-%m-%d %H"</span>           <span class="token string">"yyyy-MM-dd HH24"</span>
<span class="token string">"%Y-%m-%d %h"</span>           <span class="token string">"yyyy-MM-dd HH"</span>
<span class="token string">"%Y-%m-%d"</span>              <span class="token string">"yyyy-MM-dd"</span>
<span class="token string">"%Y-%m"</span>                 <span class="token string">"yyyy-MM"</span>
<span class="token string">"%Y"</span>                    <span class="token string">"yyyy"</span>
<span class="token string">"%H"</span>                    <span class="token string">"HH24"</span>
<span class="token string">"%k"</span>                    <span class="token string">"HH24"</span>
</code></pre> 
<h5><a id="8____621"></a>8、判断时 <code>左</code> <code>右</code> <code>字段类型</code>必须<code>相同</code></h5> 
<blockquote> 
 <p>这里注意是必须，可能在oracle版本不同的情况下，老版本不同类型也会查询出来，但建议还是改为相同类型关联，避免以后数据库版本升级出现问题！！！</p> 
</blockquote> 
<p>建议小转大，比如：数字转字符串；并使用<code>CONCAT</code>去修改类型，因为mysql和oracle都支持此函数，并且不会在特殊类型上出现问题 ~</p> 
<pre><code class="prism language-sql"><span class="token comment">-- ex: `JOIN` 关联表时 两张表的关联`字段类型`必须`相同`</span>
<span class="token keyword">SELECT</span> a<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>b<span class="token punctuation">.</span><span class="token operator">*</span>
<span class="token keyword">FROM</span> 表<span class="token number">1</span> a
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> 表<span class="token number">2</span> b <span class="token keyword">on</span> a<span class="token punctuation">.</span>字符串类型字段 <span class="token operator">=</span> CONCAT<span class="token punctuation">(</span>b<span class="token punctuation">.</span>数字类型字段<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="9_634"></a>9、批量插入</h5> 
<pre><code class="prism language-sql"><span class="token comment">-- mysql</span>
<span class="token operator">&lt;</span><span class="token keyword">insert</span> id<span class="token operator">=</span><span class="token string">"insertBatch"</span> databaseId<span class="token operator">=</span><span class="token string">"mysql"</span><span class="token operator">&gt;</span>
    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名<span class="token punctuation">(</span> <span class="token punctuation">`</span>字段名<span class="token number">1</span><span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>字段名<span class="token number">2</span><span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token punctuation">`</span>字段<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">`</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
    <span class="token operator">&lt;</span>foreach collection<span class="token operator">=</span><span class="token string">"list"</span> item<span class="token operator">=</span><span class="token string">"item"</span> separator<span class="token operator">=</span><span class="token string">","</span> <span class="token keyword">open</span><span class="token operator">=</span><span class="token string">"("</span> <span class="token keyword">close</span><span class="token operator">=</span><span class="token string">")"</span><span class="token operator">&gt;</span>
        <span class="token comment">#{item.字段1},#{item.字段2},#{item中的每一个字段名...}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>foreach<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">insert</span><span class="token operator">&gt;</span>

<span class="token comment">-- oracle</span>
<span class="token operator">&lt;</span><span class="token keyword">insert</span> id<span class="token operator">=</span><span class="token string">"insertBatch"</span> databaseId<span class="token operator">=</span><span class="token string">"oracle"</span><span class="token operator">&gt;</span>
    <span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> 表名<span class="token punctuation">(</span>字段名<span class="token number">1</span><span class="token punctuation">,</span>字段名<span class="token number">2</span><span class="token punctuation">,</span>xxx<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
    <span class="token keyword">SELECT</span> A<span class="token punctuation">.</span><span class="token operator">*</span>
    <span class="token keyword">FROM</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>foreach collection<span class="token operator">=</span><span class="token string">"list"</span> item<span class="token operator">=</span><span class="token string">"item"</span> <span class="token keyword">index</span><span class="token operator">=</span><span class="token string">"index"</span> separator<span class="token operator">=</span><span class="token string">"UNION ALL"</span> <span class="token operator">&gt;</span>
            <span class="token keyword">SELECT</span>
                <span class="token comment">#{item.字段1},#{item.字段2},#{item中的每一个字段名...}</span>
            <span class="token keyword">FROM</span> DUAL
        <span class="token operator">&lt;</span><span class="token operator">/</span>foreach<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span> A
<span class="token operator">&lt;</span><span class="token operator">/</span><span class="token keyword">insert</span><span class="token operator">&gt;</span>
</code></pre> 
<h5><a id="10_GROUP_BY_659"></a>10、分组 <code>GROUP BY</code></h5> 
<p>oracle中<code>GROUP BY</code>分组后，查询出来的所有字段（除分组字段）必须为聚合函数的字段，否则会报错！</p> 
<p>解决：</p> 
<ol><li>查询字段改为聚合函数</li><li>使用如下<code>分析函数 OVER (Partition BY ...) 及开窗函数</code></li></ol> 
<pre><code class="prism language-sql"><span class="token comment">-- mysql</span>
<span class="token keyword">SELECT</span> 字段名<span class="token punctuation">,</span>xxx<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> 表名 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 分组字段

<span class="token comment">-- oracle</span>
<span class="token keyword">SELECT</span>
    <span class="token operator">*</span>
<span class="token keyword">FROM</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> tb<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> ROW_NUMBER <span class="token punctuation">(</span> <span class="token punctuation">)</span> <span class="token keyword">OVER</span> <span class="token punctuation">(</span> <span class="token keyword">PARTITION</span> <span class="token keyword">BY</span> tb<span class="token punctuation">.</span>分组字段 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> tb<span class="token punctuation">.</span>排序字段 <span class="token keyword">DESC</span> <span class="token punctuation">)</span> <span class="token keyword">AS</span> result
    <span class="token keyword">FROM</span> <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span> 字段名<span class="token punctuation">,</span>xxx<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> 表名 <span class="token comment">-- 此处为查询sql，去掉`GROUP BY`分组条件，将分组字段加到上面 【 注：此sql的查询字段中要么全是聚合函数字段，要么都不是！ 】</span>
    <span class="token punctuation">)</span> tb
<span class="token punctuation">)</span> <span class="token keyword">WHERE</span> result <span class="token operator">=</span> <span class="token number">1</span>
</code></pre> 
<h5><a id="11OracleAS_AS_683"></a>11、Oracle中表的别名不能用<code>AS</code>, 列的别名可以用<code>AS</code></h5> 
<p>why ?：为了防止和Oracle存储过程中的关键字AS冲突的问题</p> 
<h5><a id="12Oracle_687"></a>12、注意Oracle对数据类型要求很严！！！</h5> 
<p>MySQL与Oracle不同之处远不止小编提及的如上几点，更多的还需要大家根据在实际项目中做对比，然后去修改哦 ~</p> 
<h4><a id="MySQLOracle_691"></a>六、本文MySQL转Oracle语句工具源码</h4> 
<blockquote> 
 <p>温馨小提示：如果后期小编空闲会将上文中提供的测试替换工具类再加以修改，到时候会存放在如下github仓库中…</p> 
</blockquote> 
<p><a href="https://github.com/zhengqingya/mysql-to-oracle">https://github.com/zhengqingya/mysql-to-oracle</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c2c357b5494f4dd062d502406fddbc17/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Centos7开放及查看端口记录</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bdcc6a47f74829fd89664282ab3cf40e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java多线程之--(3)线程状态锁阻塞&#43;计时等待&#43;无限等待详解&#43;(图解)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>