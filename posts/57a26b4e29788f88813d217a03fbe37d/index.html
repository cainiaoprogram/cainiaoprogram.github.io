<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pytest生成Allure报告以及查看报告 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pytest生成Allure报告以及查看报告" />
<meta property="og:description" content="一、安装 1、下载Allure
Github地址：https://github.com/allure-framework/allure2/releases
下载完成后解压到本地，并把bin目录添加到环境变量：
cmd下输入：allure --version，能正常获取说明allure环境变量配置成功。
2、安装Allure Pytest Plugin
allure-pytest是Pytest的一个插件，通过它我们可以生成Allure所需要的用于生成测试报告的数据。安装allure-pytest插件方法：
pip install allure-pytest 二、使用 1、pycharm 中，运行命令并生成allure测试报告：
if __name__ == &#39;__main__&#39;: # 执行测试用例生成测试数据，如果已经存在报告，那就先清空，然后再生成新的测试报告，使用命令： --clean-alluredir pytest.main([ &#39;-vs&#39;,&#39;test.py&#39;,&#39;--clean-alluredir&#39;, &#39;--alluredir&#39;, &#39;./allure-results&#39;]) --alluredir参数的作用是指出生成的报告文件夹， allure-results下放着生成报告的文件： 2、通过下面的命令将./allure-results/目录下的测试数据生成测试报告页面：
os.system(&#39;allure generate ./allure-results -o ./reports --clean&#39;) 三、查看报告 直接在pycharm中右击allure报告中的index.html，使用如下图方式打开，是没有问题的，可以正常显示报告内容
但是如果直接是不通过pycharm，而是直接到report文件夹下, 双击打开index.html文件，打开的报告无法展示数据，显示loading：
其实在allure-report下index.html文件是不能直接打开的，出现页面都是loading的情况，这是因为直接allure报告用浏览器是打不开的，需要用allure命令渲染之后打开才能展示效果（allure常识）。
allure使用了两种方式来渲染页面。分别是 allure open 和 allure serve。前者用于在本地渲染和查看结果，后者用于在本地渲染后对外展示结果。这里使用allure open。运行命令：
#查看测试报告 os.system(&#34;allure open ./reports&#34;) 即可自动打开浏览器展示渲染好的结果。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/57a26b4e29788f88813d217a03fbe37d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-25T18:40:15+08:00" />
<meta property="article:modified_time" content="2022-10-25T18:40:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pytest生成Allure报告以及查看报告</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>一、安装</h3> 
<p><strong>1、下载Allure</strong><br> Github地址：<u><a href="https://link.zhihu.com/?target=https%3A//github.com/allure-framework/allure2/releases" title="https://github.com/allure-framework/allure2/releases">https://github.com/allure-framework/allure2/releases</a></u><br> 下载完成后解压到本地，并把bin目录添加到环境变量：</p> 
<p><img alt="" height="760" src="https://images2.imgbox.com/ab/fa/zNx8Ar8M_o.png" width="792"></p> 
<p> </p> 
<p>cmd下输入：allure --version，能正常获取说明allure环境变量配置成功。</p> 
<p><strong>2、安装Allure Pytest Plugin</strong><br> allure-pytest是Pytest的一个插件，通过它我们可以生成Allure所需要的用于生成测试报告的数据。安装allure-pytest插件方法：</p> 
<pre><code class="language-bash">pip install allure-pytest</code></pre> 
<h3 id="h_472808478_2">二、使用</h3> 
<p>1、pycharm 中，运行命令并生成allure测试报告：</p> 
<pre><code class="language-bash">if __name__ == '__main__':

# 执行测试用例生成测试数据，如果已经存在报告，那就先清空，然后再生成新的测试报告，使用命令： --clean-alluredir
    pytest.main([ '-vs','test.py','--clean-alluredir', '--alluredir', './allure-results'])</code></pre> 
<pre>--alluredir参数的作用是指出生成的报告文件夹， allure-results下放着生成报告的文件：</pre> 
<p><img alt="" height="413" src="https://images2.imgbox.com/a7/71/opDMjEam_o.png" width="542"></p> 
<p> 2、通过下面的命令将./allure-results/目录下的测试数据生成测试报告页面：</p> 
<pre><code class="language-bash">os.system('allure generate ./allure-results -o ./reports --clean')</code></pre> 
<p><img alt="" height="485" src="https://images2.imgbox.com/dc/5f/13CuixED_o.png" width="592"></p> 
<h3> 三、查看报告</h3> 
<p>直接在pycharm中右击allure报告中的index.html，使用如下图方式打开，是没有问题的，可以正常显示报告内容</p> 
<p><img alt="" height="779" src="https://images2.imgbox.com/9c/82/qmu1l2n9_o.png" width="1057"></p> 
<p><img alt="" height="853" src="https://images2.imgbox.com/a5/85/nMkl2X60_o.png" width="1200"> </p> 
<p>但是如果直接是不通过pycharm，而是直接到report文件夹下, 双击打开index.html文件，打开的报告无法展示数据，显示loading：</p> 
<p><img alt="" height="577" src="https://images2.imgbox.com/42/8f/BMkEsks0_o.png" width="1200"></p> 
<p>其实在allure-report下index.html文件是不能直接打开的，出现页面都是loading的情况，这是因为直接allure报告用浏览器是打不开的，需要用allure命令渲染之后打开才能展示效果（allure常识）。</p> 
<p>allure使用了两种方式来渲染页面。分别是 allure open 和 allure serve。前者用于在本地渲染和查看结果，后者用于在本地渲染后对外展示结果。这里使用allure open。运行命令：</p> 
<pre><code class="language-bash">#查看测试报告
os.system("allure open ./reports")</code></pre> 
<p>即可自动打开浏览器展示渲染好的结果。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/43e6da82100c55ac98eef5bd5ea9dd59/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Linux安装最新版Docker完整教程（建议收藏）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e05fb905a5d5f6f7cc01590675d33e3c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在CentOS 7上给一个网卡分配多个IP地址</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>