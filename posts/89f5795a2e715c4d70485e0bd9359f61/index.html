<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>四皇后问题（多种方法） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="四皇后问题（多种方法）" />
<meta property="og:description" content="问题描述：
以4皇后为例，其他的N皇后问题以此类推。所谓4皇后问题就是求解如何在4×4的棋盘上无冲突的摆放4个皇后棋子。在国际象棋中，皇后的移动方式为横竖交叉的，因此在任意一个皇后所在位置的水平、竖直、以及45度斜线上都不能出现皇后的棋子。
回溯法：dfs&#43;迭代
1.如何判断当前位置的取值满足条件：
假设一个变量，每次设值都与前面已经设置好了的皇后的位置进行比较，是否同行同列，同斜线可以使用表达式：a[i]=a[j]=i-j || a[i]-a[j]=j-i
2.什么情况下成功找到四皇后的摆放位置：
当i&gt;4，也就是当前设值的位置已经是最后一个皇后了并且设置的位置也能满足条件
3.什么情况下四个皇后还没有全部确定完，还需要进行查找下一个：
当i=1并且i&lt;4时，这时候还有皇后没有确定位置，还需要进行查找
4.什么情况下进行回溯：
当i=0时并且a[i]=4并且i&gt;1时，ok=0表示当前位置的值不能满足，a[i]=4表示当前位置所有的值都设置过了仍然没有满足条件的，i&gt;1表示还可以进行回溯，如果i=1时表示它是第一个皇后，就没有进行回溯的对象了，那程序就可以终止了
5.什么情况下探索完毕，程序终止：
当a[i]=4并且i=1时，已经没有回溯的对象了，这时候程序就终止了
#include&lt;iostream&gt; #define N 4 using namespace std; void Print(int n, int a[]) { for (int j = 1; j &lt;= n; j&#43;&#43;) cout &lt;&lt; a[j] &lt;&lt; &#34; &#34;; //输出最终的棋盘布局，每个数组元素值表示各行棋盘所在的该列放置皇后 cout &lt;&lt; endl; } int isOk(int i, int a[]) { //检查当前棋盘布局是否合理 for (int j = i - 1; j&gt;= 1; j--) if (a[i] == a[j] || abs(a[i] - a[j]) == i - j) return 0; return 1; } void queen(int i, int n, int a[]) { //进入本函数前，前i-1行已经放置了互不攻击的i-1个皇后 if (i &gt; n) Print(n, a); //如果i已经大于最大的行数了，那么说明布局完成，则打印结果 else { for (int j = 1; j &lt;= n; j&#43;&#43;) { a[i] = j; //在第i行第j列放置一个皇后 if (isOk(i, a)) queen(i &#43; 1, n, a); //当前布局合理，进行下一行的布局 a[i] = 0; //移走第i行第j列放置的皇后， 回溯。 } } } int main() { int ct[N] = { 0 }; //棋盘的初始状态，棋盘上无任何皇后 queen(1, N, ct); //摆放皇后 return 0; } 分支限界法：剪枝" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/89f5795a2e715c4d70485e0bd9359f61/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-18T16:31:03+08:00" />
<meta property="article:modified_time" content="2022-05-18T16:31:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">四皇后问题（多种方法）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><code>问题描述</code>：<br> 以4皇后为例，其他的N皇后问题以此类推。所谓4皇后问题就是求解如何在4×4的棋盘上无冲突的摆放4个皇后棋子。在国际象棋中，皇后的移动方式为横竖交叉的，因此在任意一个皇后所在位置的水平、竖直、以及45度斜线上都不能出现皇后的棋子。</p> 
<p><code>回溯法</code>：<code>dfs+迭代</code><br> 1.如何判断当前位置的取值满足条件：<br> 假设一个变量，每次设值都与前面已经设置好了的皇后的位置进行比较，是否同行同列，同斜线可以使用表达式：a[i]=a[j]=i-j || a[i]-a[j]=j-i</p> 
<p>2.什么情况下成功找到四皇后的摆放位置：<br> 当i&gt;4，也就是当前设值的位置已经是最后一个皇后了并且设置的位置也能满足条件</p> 
<p>3.什么情况下四个皇后还没有全部确定完，还需要进行查找下一个：<br> 当i=1并且i&lt;4时，这时候还有皇后没有确定位置，还需要进行查找</p> 
<p>4.什么情况下进行回溯：<br> 当i=0时并且a[i]=4并且i&gt;1时，ok=0表示当前位置的值不能满足，a[i]=4表示当前位置所有的值都设置过了仍然没有满足条件的，i&gt;1表示还可以进行回溯，如果i=1时表示它是第一个皇后，就没有进行回溯的对象了，那程序就可以终止了</p> 
<p>5.什么情况下探索完毕，程序终止：<br> 当a[i]=4并且i=1时，已经没有回溯的对象了，这时候程序就终止了</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">N</span> <span class="token expression"><span class="token number">4</span></span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">void</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
		cout <span class="token operator">&lt;&lt;</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>  <span class="token comment">//输出最终的棋盘布局，每个数组元素值表示各行棋盘所在的该列放置皇后 </span>
	cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">isOk</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>                                 <span class="token comment">//检查当前棋盘布局是否合理</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token function">abs</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> i <span class="token operator">-</span> j<span class="token punctuation">)</span> 
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">queen</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> n<span class="token punctuation">,</span> <span class="token keyword">int</span> a<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span> <span class="token comment">//进入本函数前，前i-1行已经放置了互不攻击的i-1个皇后</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> n<span class="token punctuation">)</span> 
		<span class="token function">Print</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//如果i已经大于最大的行数了，那么说明布局完成，则打印结果</span>
	<span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
			a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> j<span class="token punctuation">;</span>      <span class="token comment">//在第i行第j列放置一个皇后</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isOk</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token function">queen</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//当前布局合理，进行下一行的布局</span>
			a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>   <span class="token comment">//移走第i行第j列放置的皇后， 回溯。</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> ct<span class="token punctuation">[</span>N<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//棋盘的初始状态，棋盘上无任何皇后</span>
	<span class="token function">queen</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> N<span class="token punctuation">,</span> ct<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//摆放皇后 </span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/7c/10/SpBrbSCb_o.png" alt="在这里插入图片描述"></p> 
<p><code>分支限界法</code>：<code>剪枝</code></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;queue&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">Node</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> no<span class="token punctuation">;</span>    <span class="token comment">//结点编号</span>
	<span class="token keyword">int</span> row<span class="token punctuation">;</span>   <span class="token comment">//结点行号</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span>cols<span class="token punctuation">;</span>    <span class="token comment">//用来存储结点列号</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">Print</span><span class="token punctuation">(</span>Node e<span class="token punctuation">)</span>      <span class="token comment">//输出一个结点的内容</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>row <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"编号为"</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>no <span class="token operator">&lt;&lt;</span><span class="token string">"对应位置"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>row <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>cols<span class="token punctuation">[</span>e<span class="token punctuation">.</span>row<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"]"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">isOK</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> cols<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span>   <span class="token comment">//测试(i,j)这个结点能否放在棋盘上作为皇后</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>k <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cols<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> j<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">abs</span><span class="token punctuation">(</span>cols<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span> j<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">abs</span><span class="token punctuation">(</span>k <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">queen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	Node e<span class="token punctuation">,</span> e1<span class="token punctuation">;</span>         <span class="token comment">//定义两个结点</span>
	queue<span class="token operator">&lt;</span>Node<span class="token operator">&gt;</span>qu<span class="token punctuation">;</span>     <span class="token comment">//定义一个结点</span>
	e<span class="token punctuation">.</span>no <span class="token operator">=</span> count<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token comment">//建立一个根节点，虚结点，它的row=-1，进入qu队列</span>
	e<span class="token punctuation">.</span>row <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	qu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//根节点入队</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>qu<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment">//队列不空的时候进入循环</span>
	<span class="token punctuation">{<!-- --></span>
		e <span class="token operator">=</span> qu<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//出队结点作为当前结点</span>
		qu<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>       <span class="token comment">//到达叶子节点</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"产生一个解："</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span> 
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token comment">//行和列都是从1开始</span>
				cout <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>cols<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"]"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>           <span class="token comment">//产生一个解之后结束</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>             <span class="token comment">//e不是叶子节点</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>     <span class="token comment">//开始检查所有列号</span>
			<span class="token punctuation">{<!-- --></span>
				i <span class="token operator">=</span> e<span class="token punctuation">.</span>row <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>       <span class="token comment">//因为e.row是从0开始的   </span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isOK</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>cols<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					e1<span class="token punctuation">.</span>no <span class="token operator">=</span> count<span class="token operator">++</span><span class="token punctuation">;</span>   
					e1<span class="token punctuation">.</span>row <span class="token operator">=</span> i<span class="token punctuation">;</span>   
					e1<span class="token punctuation">.</span>cols <span class="token operator">=</span> e<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>
					e1<span class="token punctuation">.</span>cols<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//push_back()函数的用法：函数将一个新的元素加到vector的最后面，位置为当前最后一个元素的下一个元素</span>
					qu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">Print</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"四皇后问题求解过程"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">queen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/44/71/m4Dj6ANq_o.jpg" alt="在这里插入图片描述"><br> <code>优先队列的分支限界法</code>：<code>row越大越好</code></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;queue&gt;</span></span>
<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">Node</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> no<span class="token punctuation">;</span>
	<span class="token keyword">int</span> row<span class="token punctuation">;</span>
	vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span>cols<span class="token punctuation">;</span>
	<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token keyword">const</span> Node<span class="token operator">&amp;</span> s<span class="token punctuation">)</span><span class="token keyword">const</span>     
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">return</span> row <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>row<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">Print</span><span class="token punctuation">(</span>Node e<span class="token punctuation">)</span>      <span class="token comment">//输出一个结点的内容</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>row <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
		cout <span class="token operator">&lt;&lt;</span> <span class="token string">"编号为"</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>no <span class="token operator">&lt;&lt;</span> <span class="token string">"对应位置"</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>row <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>cols<span class="token punctuation">[</span>e<span class="token punctuation">.</span>row<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"]"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">isOK</span><span class="token punctuation">(</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> cols<span class="token punctuation">,</span> <span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">int</span> j<span class="token punctuation">)</span>   <span class="token comment">//测试(i,j)这个结点能否放在棋盘上作为皇后</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> k <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>k <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>cols<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">==</span> j<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">abs</span><span class="token punctuation">(</span>cols<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">-</span> j<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">abs</span><span class="token punctuation">(</span>k <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">void</span> <span class="token function">queen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	Node e<span class="token punctuation">,</span> e1<span class="token punctuation">;</span>
	priority_queue<span class="token operator">&lt;</span>Node<span class="token operator">&gt;</span>qu<span class="token punctuation">;</span>      <span class="token comment">//优先队列</span>
	e<span class="token punctuation">.</span>no <span class="token operator">=</span> count<span class="token operator">++</span><span class="token punctuation">;</span>
	e<span class="token punctuation">.</span>row <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	qu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>qu<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		e <span class="token operator">=</span> qu<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		qu<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>row <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span>
		<span class="token punctuation">{<!-- --></span>
			cout <span class="token operator">&lt;&lt;</span> <span class="token string">"产生一个解："</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
				cout <span class="token operator">&lt;&lt;</span> <span class="token string">"["</span> <span class="token operator">&lt;&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">","</span> <span class="token operator">&lt;&lt;</span> e<span class="token punctuation">.</span>cols<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"]"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{<!-- --></span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>
			<span class="token punctuation">{<!-- --></span>
				i <span class="token operator">=</span> e<span class="token punctuation">.</span>row <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isOK</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>cols<span class="token punctuation">,</span> i<span class="token punctuation">,</span> j<span class="token punctuation">)</span><span class="token punctuation">)</span>
				<span class="token punctuation">{<!-- --></span>
					e1<span class="token punctuation">.</span>no <span class="token operator">=</span> count<span class="token operator">++</span><span class="token punctuation">;</span>
					e1<span class="token punctuation">.</span>row <span class="token operator">=</span> i<span class="token punctuation">;</span>
					e1<span class="token punctuation">.</span>cols <span class="token operator">=</span> e<span class="token punctuation">.</span>cols<span class="token punctuation">;</span>
					e1<span class="token punctuation">.</span>cols<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
					qu<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token function">Print</span><span class="token punctuation">(</span>e1<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">"四皇后问题求解过程"</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	<span class="token function">queen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2a/ce/AyZ3PgNE_o.png" alt="在这里插入图片描述"><br> <strong>主要是为了自己理解整理了这几种思路，并且更好的理解异同</strong><br> （1）回溯法只有在所有子节点都被遍历之后才出栈，回溯法的求解目标是找出T中满足约束条件的所有解<br> （2）分支限界法中每个结点只被访问一次，分支限界法的求解目标则是找出满足约束条件的一个解，或是在满足约束条件的解中找出使某一目标函数值达到极大或极小的解，即在某种意义下的最优解。<br> <strong>关于这道题 ，更适合回溯法</strong><br> 在n<em>n的国际象棋棋盘上摆下n个后，使所有的后都不能攻击到对方，找出所有符合要求的情况。<br> n后问题的解空间树是一棵排列树，一旦一种组合是一种解，则解与解之间不存在优劣的分别。直到搜索到叶节点时才能确定出一组解。这时我们用回溯法可以系统地搜索问题的全部解，而且由于解空间树是排列树的特性，代码的编写十分容易，在最坏的情况下，堆栈的深度不会超过n。如果我们采取分支限界法，在解空间树的第一层就会产生n个活结点，如果不考虑剪枝，将在第二层产生n</em>(n-1)个活节点，如此下去对队列空间的要求太高。n后问题不适合使用分支限界法处理的根源是它需要找处所有解的组合，而不是某种最优解（事实上也没有最优解可言）。形象一点来说，如果让我们自己人工解决n后问题，我们的思路应该是放一个后，看冲不冲突，不冲突的话放下一个，冲突的话改变位置，这样可以只用一个棋盘而且有规律地找到所有符合条件的情况，这正是回溯法的模拟过程。然而分支限界法则可以被这样表述。拿来一个棋盘，摆下一只后；再拿一个棋盘，再摆一只；待到每个棋盘都有一只后以后，每个棋盘又被分解成更多的盘面…，这样，棋盘越来越多，但是由于解和解（包括局部解）之间缺乏因果和限制的联系。棋盘之间并不能根据对方的信息获得什么，这显然是对资源的浪费。<br> 想更多了解他们异同的话，可以去看这个博主写的，我觉着挺好的https://blog.csdn.net/zm1_1zm/article/details/69224626</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8a7284549de21bf1ecabf43d8b3d08d2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Sentinel与OpenFeign整合</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/39822b352e45b44249b04d90776191fe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">UBI文件系统的制作与挂载案例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>