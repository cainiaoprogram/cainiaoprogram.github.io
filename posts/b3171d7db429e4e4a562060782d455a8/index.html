<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Spring容器中获取Bean实例的七种方式（附实战源码） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Spring容器中获取Bean实例的七种方式（附实战源码）" />
<meta property="og:description" content="目录 写作说明一：写作原因二：源码出处 实现方式一：使用BeanFactory直接获取（不推荐）二：在初始化时保存ApplicationContext对象三：继承自抽象类ApplicationObjectSupport四：继承自抽象类WebApplicationObjectSupport五：使用Spring提供的工具类WebApplicationContextUtils六：实现ApplicationContextAware接口七：使用ContextLoader提供的getCurrentWebApplicationContext方法 写作说明 一：写作原因 首先解释一下写这篇博文的原因，因为在使用spring框架的过程中获取bean是非常常见的操作，但是网上非常的博文大多承自一家之言，因此很多可操作性上并不强，本文是通过自己实战，亲自尝试之后提供的几种方案，供大家一起学习探讨。
二：源码出处 本文出自原创，如果您转发请注明出处，另本文提供的测试代码为chapter-1-springmvc-quickstart中的单元测试类BeanUtilTest如果有需要的可自行下载
实现方式 本文一共提供七种实现方式：
一：使用BeanFactory直接获取（不推荐） 使用BeanFactory从工厂中直接获取Bean实例，但是XmlBeanFactory类已经废弃，因此不建议使用，测试代码如下：
/** * 方式一：XmlBeanFactory已经废弃不建议使用 */ @Test public void getBeanTest1() { BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource(&#34;applicationContext.xml&#34;)); UserInfo userInfo = (UserInfo) beanFactory.getBean(&#34;userInfo&#34;); System.out.println(userInfo); } 二：在初始化时保存ApplicationContext对象 可以在初始化的时候保存ApplicationContext对象，然后通过这个对象获取Bean，测试代码如下：
/** * 方式二：使用ClassPathXmlApplicationContext获取ApplicationContext */ @Test public void getBeanTest2() { ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&#34;applicationContext.xml&#34;); UserInfo userInfo = (UserInfo) applicationContext.getBean(&#34;userInfo&#34;); System.out.println(userInfo); } 三：继承自抽象类ApplicationObjectSupport 可以继承抽象类ApplicationObjectSupport并将自己继承的类注入到Spring容器中，示例代码如下：
/** * 方法三：继承ApplicationObjectSupport来获取ApplicationContext， * 注意：需要把自己继承的类注入到Spring */ @Test public void getBeanTest3() { ApplicationContextUtil2 applicationContextUtil2 = (ApplicationContextUtil2) ApplicationContextUtil." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b3171d7db429e4e4a562060782d455a8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-01T23:52:33+08:00" />
<meta property="article:modified_time" content="2020-02-01T23:52:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Spring容器中获取Bean实例的七种方式（附实战源码）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><ul><li><ul><li><ul><li><a href="#_1" rel="nofollow">写作说明</a></li><li><ul><li><a href="#_2" rel="nofollow">一：写作原因</a></li><li><a href="#_4" rel="nofollow">二：源码出处</a></li></ul> 
     </li><li><a href="#_7" rel="nofollow">实现方式</a></li><li><ul><li><a href="#BeanFactory_9" rel="nofollow">一：使用BeanFactory直接获取（不推荐）</a></li><li><a href="#ApplicationContext_24" rel="nofollow">二：在初始化时保存ApplicationContext对象</a></li><li><a href="#ApplicationObjectSupport_39" rel="nofollow">三：继承自抽象类ApplicationObjectSupport</a></li><li><a href="#WebApplicationObjectSupport_77" rel="nofollow">四：继承自抽象类WebApplicationObjectSupport</a></li><li><a href="#SpringWebApplicationContextUtils_115" rel="nofollow">五：使用Spring提供的工具类WebApplicationContextUtils</a></li><li><a href="#ApplicationContextAware_141" rel="nofollow">六：实现ApplicationContextAware接口</a></li><li><a href="#ContextLoadergetCurrentWebApplicationContext_188" rel="nofollow">七：使用ContextLoader提供的getCurrentWebApplicationContext方法</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h5><a id="_1"></a>写作说明</h5> 
<h6><a id="_2"></a>一：写作原因</h6> 
<p>首先解释一下写这篇博文的原因，因为在使用spring框架的过程中获取bean是非常常见的操作，但是网上非常的博文大多承自一家之言，因此很多可操作性上并不强，本文是通过自己实战，亲自尝试之后提供的几种方案，供大家一起学习探讨。</p> 
<h6><a id="_4"></a>二：源码出处</h6> 
<p>本文出自原创，如果您转发请注明出处，另本文提供的测试代码为chapter-1-springmvc-quickstart中的单元测试类<a href="https://gitee.com/leo825/spring-framework-learning-example.git" rel="nofollow">BeanUtilTest</a>如果有需要的可自行下载</p> 
<h5><a id="_7"></a>实现方式</h5> 
<p>本文一共提供七种实现方式：</p> 
<h6><a id="BeanFactory_9"></a>一：使用BeanFactory直接获取（不推荐）</h6> 
<p>使用BeanFactory从工厂中直接获取Bean实例，但是XmlBeanFactory类已经废弃，因此不建议使用，测试代码如下：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 方式一：XmlBeanFactory已经废弃不建议使用
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanTest1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        BeanFactory beanFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XmlBeanFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClassPathResource</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        UserInfo userInfo <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> beanFactory<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h6><a id="ApplicationContext_24"></a>二：在初始化时保存ApplicationContext对象</h6> 
<p>可以在初始化的时候保存ApplicationContext对象，然后通过这个对象获取Bean，测试代码如下：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 方式二：使用ClassPathXmlApplicationContext获取ApplicationContext
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanTest2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        ApplicationContext applicationContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        UserInfo userInfo <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h6><a id="ApplicationObjectSupport_39"></a>三：继承自抽象类ApplicationObjectSupport</h6> 
<p>可以继承抽象类ApplicationObjectSupport并将自己继承的类注入到Spring容器中，示例代码如下：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 方法三：继承ApplicationObjectSupport来获取ApplicationContext，
     * 注意：需要把自己继承的类注入到Spring
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanTest3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        ApplicationContextUtil2 applicationContextUtil2 <span class="token operator">=</span> <span class="token punctuation">(</span>ApplicationContextUtil2<span class="token punctuation">)</span> ApplicationContextUtil<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"applicationContextUtil2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        UserInfo userInfo <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> applicationContextUtil2<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>其中ApplicationContextUtil2的代码如下所示：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextUtil2</span> <span class="token keyword">extends</span> <span class="token class-name">ApplicationObjectSupport</span> <span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 通过bean的id获取bean对象
     * @param beanName
     * @return
     */</span>
    <span class="token keyword">public</span> Object <span class="token function">getBean</span><span class="token punctuation">(</span>String beanName<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>最后莫忘了将Bean注入到Spring容器中，通过注解，或者配置均可，本示例通过配置实现</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 测试获取bean的方式<span class="token punctuation">,</span>继承ApplicationObjectSupport需要先注入这个类 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"applicationContextUtil2"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.leo.util.ApplicationContextUtil2"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="WebApplicationObjectSupport_77"></a>四：继承自抽象类WebApplicationObjectSupport</h6> 
<p>可以继承抽象类WebApplicationObjectSupport并将自己继承的类注入到Spring容器中，示例代码如下：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 方法四：继承WebApplicationObjectSupport来获取ApplicationContext，
     * 注意：需要把自己继承的类注入到Spring，同时需要添加@WebAppConfiguration注解，否则会找不到web容器
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanTest4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        ApplicationContextUtil3 applicationContextUtil3 <span class="token operator">=</span> <span class="token punctuation">(</span>ApplicationContextUtil3<span class="token punctuation">)</span> ApplicationContextUtil<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"applicationContextUtil3"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        UserInfo userInfo <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> applicationContextUtil3<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre> 
<p>其中ApplicationContextUtil3 的示例代码如下：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextUtil3</span> <span class="token keyword">extends</span> <span class="token class-name">WebApplicationObjectSupport</span><span class="token punctuation">{<!-- --></span>

    <span class="token comment">/**
     * 通过bean的id获取bean对象
     * @param beanName
     * @return
     */</span>
    <span class="token keyword">public</span> Object <span class="token function">getBean</span><span class="token punctuation">(</span>String beanName<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<p>最后莫忘了将Bean注入到Spring容器中，通过注解，或者配置均可，本示例通过配置实现</p> 
<pre><code class="prism language-java">    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 测试获取bean的方式<span class="token punctuation">,</span>继承WebApplicationObjectSupport需要先注入这个类 <span class="token operator">--</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"applicationContextUtil3"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.leo.util.ApplicationContextUtil3"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">&gt;</span>
</code></pre> 
<h6><a id="SpringWebApplicationContextUtils_115"></a>五：使用Spring提供的工具类WebApplicationContextUtils</h6> 
<p>使用Spring提供的工具类WebApplicationContextUtils来获取WebApplicationContext对象，这个方法很常见于SpringMVC构建的web项目中，测试代码如下所示：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 方法五：使用WebApplicationContextUtils提供的方法获取ApplicationContext对象
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanTest5</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//模拟ServletContext上下文，不然会出现空指针异常</span>
        MockServletContext sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MockServletContext</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sc<span class="token punctuation">.</span><span class="token function">addInitParameter</span><span class="token punctuation">(</span>ContextLoader<span class="token punctuation">.</span>CONFIG_LOCATION_PARAM<span class="token punctuation">,</span> <span class="token string">"/applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ServletContextListener listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContextLoaderListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ServletContextEvent event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletContextEvent</span><span class="token punctuation">(</span>sc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        listener<span class="token punctuation">.</span><span class="token function">contextInitialized</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//使用WebApplicationContextUtils的getRequiredWebApplicationContext方法</span>
        WebApplicationContext webApplicationContext <span class="token operator">=</span> WebApplicationContextUtils<span class="token punctuation">.</span><span class="token function">getRequiredWebApplicationContext</span><span class="token punctuation">(</span>sc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        UserInfo userInfo <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> webApplicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使用WebApplicationContextUtils的getWebApplicationContext方法</span>
        WebApplicationContext webApplicationContext2 <span class="token operator">=</span> WebApplicationContextUtils<span class="token punctuation">.</span><span class="token function">getWebApplicationContext</span><span class="token punctuation">(</span>sc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        UserInfo userInfo2 <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> webApplicationContext2<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<h6><a id="ApplicationContextAware_141"></a>六：实现ApplicationContextAware接口</h6> 
<p>通过实现ApplicationContextAware接口，在Spring容器启动的时候将ApplicationContext注入进去，从而获取ApplicationContext对象，这种方法也是常见的获取Bean的一种方式，测试代码如下：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     *方法六：实现ApplicationContextAware接口获取ApplicationContext
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanTest6</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        UserInfo userInfo2 <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> ApplicationContextUtil<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>其中ApplicationContextUtil的实现如下：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextUtil</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> ApplicationContext applicationContext<span class="token punctuation">;</span>

    <span class="token comment">/**
     * 通过bean的id获取bean对象
     * @param beanName
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> Object <span class="token function">getBean</span><span class="token punctuation">(</span>String beanName<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> applicationContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 根据bean的id和类型获取bean对象
     * @param beanName
     * @param clazz
     * @param &lt;T&gt;
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> T <span class="token function">getBean</span><span class="token punctuation">(</span>String beanName<span class="token punctuation">,</span>Class<span class="token generics function"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> clazz<span class="token punctuation">.</span><span class="token function">cast</span><span class="token punctuation">(</span><span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span>ApplicationContext applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> BeansException <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">=</span> applicationContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="ContextLoadergetCurrentWebApplicationContext_188"></a>七：使用ContextLoader提供的getCurrentWebApplicationContext方法</h6> 
<p>使用ContextLoader提供的getCurrentWebApplicationContext方法提供的方法也是常用的获取WebApplicationContext的一种方法，这个方法常见于SpringMVC实现的web项目中。测试代码如下：</p> 
<pre><code class="prism language-java">    <span class="token comment">/**
     * 方法七：使用ContextLoader的getCurrentWebApplicationContext方法获取WebApplicationContext
     */</span>
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getBeanTest7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        MockServletContext sc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MockServletContext</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sc<span class="token punctuation">.</span><span class="token function">addInitParameter</span><span class="token punctuation">(</span>ContextLoader<span class="token punctuation">.</span>CONFIG_LOCATION_PARAM<span class="token punctuation">,</span> <span class="token string">"/applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ServletContextListener listener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ContextLoaderListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ServletContextEvent event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletContextEvent</span><span class="token punctuation">(</span>sc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        listener<span class="token punctuation">.</span><span class="token function">contextInitialized</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//如果不加上面的模拟创建ServletContext对象，会报空指针异常</span>
        WebApplicationContext wac <span class="token operator">=</span> ContextLoader<span class="token punctuation">.</span><span class="token function">getCurrentWebApplicationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        UserInfo userInfo <span class="token operator">=</span> <span class="token punctuation">(</span>UserInfo<span class="token punctuation">)</span> wac<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"userInfo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5c3d634ce04343b6ab9bde6cc601c368/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ENVI 出现问题：丢失idl.dll（win10系统）解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b0f3d00af4c000f0f7f77d125c132524/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">EasyUI框架02——datagrid</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>