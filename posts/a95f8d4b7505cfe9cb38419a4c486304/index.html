<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AIX DNS服务器配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="AIX DNS服务器配置" />
<meta property="og:description" content="实验环境：
AIX： os版本：AIX 5L for POWER V5.1
IP address:192.168.0.5
假设域名：king.com
主机名：pp.king.com
作为一个域名服务器，要具有正解和反解的功能才叫一个完整的服务器。现在有很多，尤其是win的DNS服务器很多都没有反解的功能。
现在进入正题
架设一部完整的DNS服务器主要需要设定6个文件：
named.conf #主要的设定文件
named.ca #
本机端的正解文件
本机端的反解文件
domain name的正解文件
domain name的反解文件
一台AIX V5.1安装完成后，就已经安装好了DNS软件bind，并已经启动。
可以用这个命令去查看：
# l***c -s named
Subsystem Group PID Status
named tcpip 15666 active
默认会安装两个版本，bind4和bind8，当然现在的最新版本已经有bind9，可是我们用自带的bind8就可以了。
初始的时候系统会默认使用bind4，那么我们现在执行以下命令开始使用bind8：
# rm /usr/sbin/named /usr/sbin/named-xfer
ln -s /usr/sbin/named8 /usr/sbin/named
ln -s /usr/sbin/named8-xfer /usr/sbin/named-xfer
检查：
# named -v
named 8.2.2-P5&#43;Fix_for_CERT_till_01_30_01 Sun Apr 8 08:05:23 CDT 2001
build@builder07.austin.ibm.com:/…/austin.ibm.com/fs/proj/p1/aix/aix510
/com4/CMVC/obj/power/tcpip/usr/sbin/named8
现在我们来编写配置文件。（配置方法与Solaris的配置方法一样）
1、首先是最主要的设置文件，其他的文件全靠它定义，才能生效。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a95f8d4b7505cfe9cb38419a4c486304/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-09-26T10:13:29+08:00" />
<meta property="article:modified_time" content="2013-09-26T10:13:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AIX DNS服务器配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="artical-content-bak main-content editor-side-new"> 
 <div class="con editor-preview-side" id="result"> 
  <p>实验环境：</p> 
  <p>AIX： os版本：AIX 5L for POWER V5.1</p> 
  <p>IP address:192.168.0.5</p> 
  <p>假设域名：king.com</p> 
  <p>主机名：pp.king.com</p> 
  <p>作为一个域名服务器，要具有正解和反解的功能才叫一个完整的服务器。现在有很多，尤其是win的DNS服务器很多都没有反解的功能。</p> 
  <p><br></p> 
  <p>现在进入正题</p> 
  <p>架设一部完整的DNS服务器主要需要设定6个文件：</p> 
  <p>named.conf #主要的设定文件</p> 
  <p>named.ca #</p> 
  <p>本机端的正解文件</p> 
  <p>本机端的反解文件</p> 
  <p>domain name的正解文件</p> 
  <p>domain name的反解文件</p> 
  <p>一台AIX V5.1安装完成后，就已经安装好了DNS软件bind，并已经启动。</p> 
  <p>可以用这个命令去查看：</p> 
  <p># l***c -s named</p> 
  <p>Subsystem Group PID Status</p> 
  <p>named tcpip 15666 active</p> 
  <p>默认会安装两个版本，bind4和bind8，当然现在的最新版本已经有bind9，可是我们用自带的bind8就可以了。</p> 
  <p>初始的时候系统会默认使用bind4，那么我们现在执行以下命令开始使用bind8：</p> 
  <p># rm /usr/sbin/named /usr/sbin/named-xfer</p> 
  <p>ln -s /usr/sbin/named8 /usr/sbin/named</p> 
  <p>ln -s /usr/sbin/named8-xfer /usr/sbin/named-xfer</p> 
  <p>检查：</p> 
  <p># named -v</p> 
  <p>named 8.2.2-P5+Fix_for_CERT_till_01_30_01 Sun Apr 8 08:05:23 CDT 2001</p> 
  <p>build@builder07.austin.ibm.com:/…/austin.ibm.com/fs/proj/p1/aix/aix510</p> 
  <p>/com4/CMVC/obj/power/tcpip/usr/sbin/named8</p> 
  <p><br></p> 
  <p>现在我们来编写配置文件。（配置方法与Solaris的配置方法一样）</p> 
  <p>1、首先是最主要的设置文件，其他的文件全靠它定义，才能生效。</p> 
  <p>/etc/named.conf（bind4的时候此文件名为：named.boot）</p> 
  <p>可以用touch /etc/named.conf命令生成文件，然后再添加内容</p> 
  <p>options {<!-- --></p> 
  <p>directory "/etc"; #设定工作目录，bind会在此处设定的目录里查找所需文件。</p> 
  <p>};</p> 
  <p>zone "." {<!-- --></p> 
  <p>type hint;</p> 
  <p>file "named.ca"; #根服务器</p> 
  <p>};</p> 
  <p>zone "0.0.127.in-addr.arpa" {<!-- --></p> 
  <p>type master;</p> 
  <p>file "0.0.127.in-addr.arpa.zone"; #本机端的反解文件，文件名可以自己定义的。</p> 
  <p>};</p> 
  <p>zone "localhost" {<!-- --></p> 
  <p>type master;</p> 
  <p>file "localhost.zone"; #本机端的正解文件</p> 
  <p>};</p> 
  <p>zone "king.com" {<!-- --></p> 
  <p>type master;</p> 
  <p>file "king.com.zone"; #domain name的正解文件</p> 
  <p>};</p> 
  <p>zone "0.168.192.in-addr.arpa" {<!-- --></p> 
  <p>type master;</p> 
  <p>file "0.168.192.in-addr.arpa.zone"; #domain name的反解文件</p> 
  <p>};</p> 
  <p><br></p> 
  <p>2、/etc/named.ca</p> 
  <p>如果我们的DNS服务器是连在internet上的，那么named.ca里面的就是我们的上级服务器，当一个域名在本机查不到，就会去named.ca里的服务器上去查。有的时候这些服务器是变动的，所以，我们可以下载这个文件</p> 
  <p>ftp://ftp.rs.internic.net/domain/named.root，然后改名为named.ca，复制到/etc里面就好了。</p> 
  <p><br></p> 
  <p>3、/etc/0.0.127.in-addr.arpa.zone</p> 
  <p>$TTL 86400 @ IN SOA localhost. root.localhost. （</p> 
  <p>2 ;serial</p> 
  <p>28800 ;refresh</p> 
  <p>7200 ;retry</p> 
  <p>604800 ;expire</p> 
  <p>86400 ;ttl</p> 
  <p>）</p> 
  <p>@ IN NS localhost.</p> 
  <p>1 IN PTR localhost.</p> 
  <p>1 IN PTR pp.</p> 
  <p><br></p> 
  <p>4、/etc/localhost.zone</p> 
  <p>$TTL 86400 @ IN SOA @ root.localhost （</p> 
  <p>1 ;serial</p> 
  <p>28800 ;refresh</p> 
  <p>7200 ;retry</p> 
  <p>604800 ;expire</p> 
  <p>86400 ;ttl</p> 
  <p>）</p> 
  <p>IN NS localhost.</p> 
  <p>@ IN A 127.0.0.1</p> 
  <p><br></p> 
  <p>5、/etc/king.com.zone</p> 
  <p>$TTL 86400 @ IN SOA pp.king.com. root.localhost （</p> 
  <p>3 ;serial</p> 
  <p>28800 ;refresh</p> 
  <p>7200 ;retry</p> 
  <p>604800 ;expire</p> 
  <p>86400 ;ttl</p> 
  <p>）</p> 
  <p>IN NS pp.king.com.</p> 
  <p>www IN A 192.168.0.5</p> 
  <p>pp IN A 192.168.0.5</p> 
  <p>mail IN CNAME www</p> 
  <p><br></p> 
  <p>6、/etc/0.168.192.in-addr.arpa.zone</p> 
  <p>$TTL 86400 @ IN SOA pp.king.com. root.pp.king.com. （</p> 
  <p>4 ;serial</p> 
  <p>28800 ;refresh</p> 
  <p>7200 ;retry</p> 
  <p>604800 ;expire</p> 
  <p>86400 ;ttl</p> 
  <p>）</p> 
  <p>@ IN NS pp.king.com.</p> 
  <p>5 IN PTR pp.king.com.</p> 
  <p>好了6个文件都完成了，让我们在创建一个文件/etc/resolv.conf，这个文件的意义在于，如果不存在，表示本机的域名服务由/etc/hosts提供，如果存在且空，表示本机是域名服务器，如果存在且非空，表示本机是由域名服务器提供域名解析的客户机。</p> 
  <p>用这个命令来创建这个文件：</p> 
  <p>touch /etc/resolv.conf</p> 
  <p>终于完成了，现在让我们来启动它。</p> 
  <p>可以用smit stnamed 快速路经来启动。</p> 
  <p>也可以用startsrc -s named来启动。</p> 
  <p>如果已经启动，可以用stopsrc -s named来关闭它。</p> 
  <p>用l***c -s named查看它的状态，如果状态是active，我们就可以来测试了。</p> 
  <p><br></p> 
  <p>测试</p> 
  <p>最简单的办法就是nslookup</p> 
  <p>例如本例中的：</p> 
  <p># nslookup</p> 
  <p>Default Server: pp.king.com</p> 
  <p>Address: 0.0.0.0</p> 
  <p>&gt;;www.king.com #正解</p> 
  <p>Server: pp.king.com</p> 
  <p>Address: 0.0.0.0</p> 
  <p>Non-authoritative answer:</p> 
  <p>Name: www.king.com</p> 
  <p>Address: 192.168.0.5</p> 
  <p>&gt;;pp.king.com #正解</p> 
  <p>Server: pp.king.com</p> 
  <p>Address: 0.0.0.0</p> 
  <p>Non-authoritative answer:</p> 
  <p>Name: pp.king.com</p> 
  <p>Address: 192.168.0.5</p> 
  <p>&gt;;mail.king.com #正解</p> 
  <p>Server: pp.king.com</p> 
  <p>Address: 0.0.0.0</p> 
  <p>Non-authoritative answer:</p> 
  <p>Name: www.king.com</p> 
  <p>Address: 192.168.0.5</p> 
  <p>Aliases: mail.king.com</p> 
  <p>&gt;;192.168.0.5 #反解</p> 
  <p>Server: pp.king.com</p> 
  <p>Address: 0.0.0.0</p> 
  <p>Name: pp.king.com</p> 
  <p>Address: 192.168.0.5</p> 
  <p>然后把服务器IP192.168.0.5加入到客户机的DNS地址里去</p> 
  <p><br></p> 
  <p>再测试</p> 
  <p>C:\&gt;;ping www.king.com</p> 
  <p>Pinging www.king.com [192.168.0.5] with 32 bytes of data:</p> 
  <p>Reply from 192.168.0.5: bytes=32 time＜1ms TTL=255</p> 
  <p>Reply from 192.168.0.5: bytes=32 time＜1ms TTL=255</p> 
  <p>Reply from 192.168.0.5: bytes=32 time＜1ms TTL=255</p> 
  <p>Reply from 192.168.0.5: bytes=32 time＜1ms TTL=255</p> 
  <p>Ping statistics for 192.168.0.5:</p> 
  <p>Packets: Sent = 4, Received = 4, Lost = 0 （0% loss），</p> 
  <p>Approximate round trip times in milli-seconds:</p> 
  <p>Minimum = 0ms, Maximum = 0ms, Average = 0ms</p> 
  <p><br></p> 
  <p>oracle视频教程请关注:<a href="http://u.youku.com/user_video/id_UMzAzMjkxMjE2.html" rel="nofollow">http://u.youku.com/user_video/id_UMzAzMjkxMjE2.html</a></p> 
  <p><br></p> 
 </div> 
</div> 
<p>转载于:https://blog.51cto.com/19880614/1301963</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b0c005f132ee235e776f65ad84943ee5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">activiti创建数据库表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ad97bd2b4a57a5bce7926e597cafc486/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">时间精确到us</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>