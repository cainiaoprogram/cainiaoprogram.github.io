<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>进程间通信的常用方式和特点 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="进程间通信的常用方式和特点" />
<meta property="og:description" content="目录
一、管道
二、消息队列
三、共享内存
四、信号量
五、信号
六、socket
一、管道 特点：传输数据是单向的，生命周期伴随着进程；
分类：类似“|”叫做匿名管道，还有fifo命令管道。
mkfifo命令可以用来创建命名管道；
创建管道调用的系统调用是：
int pipe(int fd[2])
其中返回值是两个文件描述符，fd[0]是读取的,fd[1]是写入的，由于采取流传输，大小有限制，且只能单向；
原理：对于匿名管道，它的通信范围是存在父子关系的进程。因为管道没有实体，也就是没有管道文件，只能通过 fork 来复制父进程 fd 文件描述符，来达到通信的目的。
对于命名管道，它可以在不相关的进程间也能相互通信。因为命令管道，提前创建了一个类型为管道的设备文件，在进程里只要使用这个设备文件，就可以相互通信。不管是匿名管道还是命名管道，进程写入的数据都是缓存在内核中，另一个进程读取数据时候自然也是从内核中获取，同时通信数据都遵循先进先出原则，不支持lseek 之类的文件定位操作。
缺点：效率低，不适合进程间频繁地读取数据；
优点：简单；
二、消息队列 特点：消息队列是保存到内存中的消息链表，两个进程可以约定好放入同一个消息队列，生命周期是伴随着内核的；、
原理：类似邮件，一方寄一方收即可；
缺点：通信可能不及时，不适合传输大数据，因为消息的长度大小都是有限制的，而且存在用户态和内核态的数据拷贝开销；
三、共享内存 特点：没有内核态和用户态数据拷贝开销；
原理：每个进程都有自己的虚拟内存空间，共享内存就是给两个需要通信的进程的虚拟内存映射到同一个共享内存（物理内存），一方修改了数据，另一方可以直接看到；
缺点：多个进程不能同时修改同一个地址，因此需要与信号量一起使用；
四、信号量 特点：信号量其实是一个整型的计数器，用来实现多个进程间的同步和互斥；
原理：有两种原子操作：PV操作，P代表信号量-1，如果-1后信号量的值&lt;0，就会阻塞；V代表信号量&#43;1，如果&#43;1后&lt;=0，会唤醒阻塞的进程；
五、信号 特点：信号是进程间唯一的异步通信机制，任何时候有信号产生，都有三种处理方式：
1、执行默认行为，2、注册自己的处理函数用来捕捉信号，3、忽略信号。
六、socket 特点：socket除了本机进程间通信，还可以跨机和跨网络在不同的两个主机间通信。
原理：有三种通信方式，tcp、udp、本地进程间（本地文件）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7a57ab888d59e221ef52dc114e626e46/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-03T08:00:00+08:00" />
<meta property="article:modified_time" content="2023-07-03T08:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">进程间通信的常用方式和特点</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="gi4gx-toc" style="margin-left:0px;"><a href="#gi4gx" rel="nofollow">一、管道</a></p> 
<p id="ty1QF-toc" style="margin-left:0px;"><a href="#ty1QF" rel="nofollow">二、消息队列</a></p> 
<p id="mBv2o-toc" style="margin-left:0px;"><a href="#mBv2o" rel="nofollow">三、共享内存</a></p> 
<p id="NUeUT-toc" style="margin-left:0px;"><a href="#NUeUT" rel="nofollow">四、信号量</a></p> 
<p id="dldAo-toc" style="margin-left:0px;"><a href="#dldAo" rel="nofollow">五、信号</a></p> 
<p id="QF6I1-toc" style="margin-left:0px;"><a href="#QF6I1" rel="nofollow">六、socket</a></p> 
<h2 id="gi4gx">一、管道</h2> 
<p id="u9b9803a4">特点：传输数据是单向的，生命周期伴随着进程；</p> 
<p id="u7d335b87">分类：类似“|”叫做匿名管道，还有fifo命令管道。</p> 
<p id="ue5c11ecd">mkfifo命令可以用来创建命名管道；</p> 
<p id="ub1102431">创建管道调用的系统调用是：</p> 
<p id="u4bb9deb9">int pipe(int fd[2])</p> 
<p id="ud4209d77">其中返回值是两个文件描述符，fd[0]是读取的,fd[1]是写入的，由于采取流传输，大小有限制，且只能单向；</p> 
<p id="u52750333">原理：对于匿名管道，它的通信范围是存在父子关系的进程。因为管道没有实体，也就是没有管道文件，只能通过 fork 来复制父进程 fd 文件描述符，来达到通信的目的。</p> 
<p id="ubba77913">对于命名管道，它可以在不相关的进程间也能相互通信。因为命令管道，提前创建了一个类型为管道的设备文件，在进程里只要使用这个设备文件，就可以相互通信。不管是匿名管道还是命名管道，进程写入的数据都是缓存在内核中，另一个进程读取数据时候自然也是从内核中获取，同时通信数据都遵循先进先出原则，不支持lseek 之类的文件定位操作。</p> 
<p id="u18b688e6">缺点：效率低，不适合进程间频繁地读取数据；</p> 
<p id="u426fc470">优点：简单；</p> 
<h2 id="ty1QF">二、消息队列</h2> 
<p id="uadc23444">特点：消息队列是保存到内存中的消息链表，两个进程可以约定好放入同一个消息队列，生命周期是伴随着内核的；、</p> 
<p id="uf2a3d1ef">原理：类似邮件，一方寄一方收即可；</p> 
<p id="u37dc521e">缺点：通信可能不及时，不适合传输大数据，因为消息的长度大小都是有限制的，而且存在用户态和内核态的数据拷贝开销；</p> 
<h2 id="mBv2o">三、共享内存</h2> 
<p id="ub5c56a35">特点：没有内核态和用户态数据拷贝开销；</p> 
<p id="ua4faa605">原理：每个进程都有自己的虚拟内存空间，共享内存就是给两个需要通信的进程的虚拟内存映射到同一个共享内存（物理内存），一方修改了数据，另一方可以直接看到；</p> 
<p id="u347fe99a">缺点：多个进程不能同时修改同一个地址，因此需要与信号量一起使用；</p> 
<h2 id="NUeUT">四、信号量</h2> 
<p id="uf3c948a2">特点：信号量其实是一个整型的计数器，用来实现多个进程间的同步和互斥；</p> 
<p id="u12f13e2e">原理：有两种原子操作：PV操作，P代表信号量-1，如果-1后信号量的值&lt;0，就会阻塞；V代表信号量+1，如果+1后&lt;=0，会唤醒阻塞的进程；</p> 
<h2 id="dldAo">五、信号</h2> 
<p id="u2af0705f">特点：信号是进程间唯一的异步通信机制，任何时候有信号产生，都有三种处理方式：</p> 
<p id="u86903c85">1、执行默认行为，2、注册自己的处理函数用来捕捉信号，3、忽略信号。</p> 
<h2 id="QF6I1">六、socket</h2> 
<p id="ub512092d">特点：socket除了本机进程间通信，还可以跨机和跨网络在不同的两个主机间通信。</p> 
<p id="ub8ee3d3d">原理：有三种通信方式，tcp、udp、本地进程间（本地文件）</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6dfc764c75e7e85c8644f2a3e067d02b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">操作系统之调度算法总结</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb9cded4d8d9fdc6d4feb0ece8be5e3f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">pandas如何禁用科学计数法，或者如何把二十位数字无损还原？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>