<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>光谱测量数据处理（matlab） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="光谱测量数据处理（matlab）" />
<meta property="og:description" content="光谱测量数据处理（matlab） 一、数据格式二、数据处理2.1 数据导出2.2 数据处理2.3 处理结果 三、地物光谱特征分析3.1 光谱曲线平滑3.2 光谱曲线一阶导数 一、数据格式 导出文件：
文件内容：
内容说明：
Columnname1Wavelengths (nanometers)2Reference Values (see below)3Target Values (see below)4Reflectance (percent) 二、数据处理 2.1 数据导出 将光谱仪测的不同地物的光谱数据以SVC软件中导出到计算机中，并按不同地物类型存储在不同Excel表格中。
2.2 数据处理 （一）原理公式
实验采用垂直测量方法，计算公式为
式中，L——测得地物反射辐射通量，Rr 为白板反射率（已知) ； Lr 为测得白板反射辐射能量；
（二）处理步骤
Step1：共100多组数据，观察每个数据的图片结合实地记录筛选可以利用的数据
Step2：由于仪器光谱突变，将筛选好的数据进行在SVC HR软件中的平滑操作（overlay）
Step3：将处理后的数据去除文件头，生成裸数据并保存到txt文本文件中
Step4：求每类地物的光谱数据平均值，生成每类地物的光谱数据
Step5：由于白板反射率波段和每类地物的光谱波段不匹配，对实测数据进行插值
Step6：根据反射率公式选取文件中第四列数据（百分比）与白板反射率的相乘操作
Step7：根据不同需要进行制图输出
（三）matlab处理代码
%---------------------------------------------------------------- %光谱处理代码 % %时间：2019年6月19日 %---------------------------------------------------------------- %去除文件头代码 %输入.sig文件 fileFolder=fullfile(&#39;E:\2019-06-11-下&#39;); %引号内是需要遍历的路径，填绝对路径，然后保存在fileFolder dirOutput = dir(fullfile(fileFolder,&#39;*.sig&#39;)); %引号内是文件的后缀，写&#39;.txt&#39;则读取后缀为&#39;.txt&#39;的文件 fileNames = {dirOutput.name}; %将所有文件名，以矩阵形式按行排列，保存到fileNames中 for i=fileNames i_trace = strcat(&#39;E:\2019-06-11-下\&#39;,i)%将字符串组合起来 i_trace=char(i_trace) i=char(i) ind=findstr(i-1,&#39;.&#39;); i=i(1:ind) M = dlmread(i_trace,&#39;&#39;,25,0) i_trace_txt=strcat(&#39;E:\2019-06-11-下\&#39;,i,&#39;txt&#39;) %num1, num2, num3, num4]=textread(i_trace,&#39;%f %f %f f&#39;,&#39;headerlines&#39;,29); % A={num1,num2,num3,num4}; % eval([&#39;T&#39;,num2str(n),&#39;=&#39;,&#39;load(i_trace{1,1})&#39;,&#39;;&#39;]); dlmwrite(i_trace_txt, M, &#39;delimiter&#39;, &#39;\t&#39;,&#39;precision&#39;, 6,&#39;newline&#39;, &#39;pc&#39;) end %生成平均值代码 clc; clear all; close all; fileFolder=fullfile(&#39;E:\txt\柏油路&#39;); %引号内是需要遍历的路径，填绝对路径，然后保存在fileFolder dirOutput=dir(fullfile(fileFolder,&#39;*." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/004924f7a5f85bff4bdcfe7e43549aee/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-31T22:54:45+08:00" />
<meta property="article:modified_time" content="2020-10-31T22:54:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">光谱测量数据处理（matlab）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>光谱测量数据处理（matlab）</h4> 
 <ul><li><a href="#_9" rel="nofollow">一、数据格式</a></li><li><a href="#_33" rel="nofollow">二、数据处理</a></li><li><ul><li><a href="#21__35" rel="nofollow">2.1 数据导出</a></li><li><a href="#22__38" rel="nofollow">2.2 数据处理</a></li><li><a href="#23__167" rel="nofollow">2.3 处理结果</a></li></ul> 
  </li><li><a href="#_173" rel="nofollow">三、地物光谱特征分析</a></li><li><ul><li><a href="#31__175" rel="nofollow">3.1 光谱曲线平滑</a></li><li><a href="#32__190" rel="nofollow">3.2 光谱曲线一阶导数</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr size='1"' color="#000000"> 
<h2><a id="_9"></a>一、数据格式</h2> 
<p>导出文件：</p> 
<p><img src="https://images2.imgbox.com/ba/f8/fUFreAJz_o.png" alt="在这里插入图片描述"></p> 
<p>文件内容：</p> 
<p><img src="https://images2.imgbox.com/97/b2/BVR2A47T_o.png" alt="在这里插入图片描述"></p> 
<p>内容说明：</p> 
<table><thead><tr><th>Column</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>Wavelengths (nanometers)</td></tr><tr><td>2</td><td>Reference Values (see below)</td></tr><tr><td>3</td><td>Target Values (see below)</td></tr><tr><td>4</td><td>Reflectance (percent)</td></tr></tbody></table> 
<h2><a id="_33"></a>二、数据处理</h2> 
<h3><a id="21__35"></a>2.1 数据导出</h3> 
<p>将光谱仪测的不同地物的光谱数据以<strong>SVC软件</strong>中导出到计算机中，并按不同地物类型存储在不同Excel表格中。</p> 
<h3><a id="22__38"></a>2.2 数据处理</h3> 
<p><strong>（一）原理公式</strong></p> 
<p><img src="https://images2.imgbox.com/eb/1c/ZVP1JN1k_o.png" alt="在这里插入图片描述"><br> 实验采用垂直测量方法，计算公式为</p> 
<p><img src="https://images2.imgbox.com/96/53/CzbK71Gx_o.png" alt="在这里插入图片描述"><br> 式中，L——测得地物反射辐射通量，Rr 为白板反射率（已知) ； Lr 为测得白板反射辐射能量；</p> 
<p><strong>（二）处理步骤</strong></p> 
<p>Step1：共100多组数据，观察每个数据的图片结合实地记录筛选可以利用的数据</p> 
<p>Step2：由于仪器光谱突变，将筛选好的数据进行在SVC HR软件中的平滑操作（overlay）</p> 
<p>Step3：将处理后的数据去除文件头，生成裸数据并保存到txt文本文件中</p> 
<p>Step4：求每类地物的光谱数据平均值，生成每类地物的光谱数据</p> 
<p>Step5：由于白板反射率波段和每类地物的光谱波段不匹配，对实测数据进行插值</p> 
<p>Step6：根据反射率公式选取文件中第四列数据（百分比）与白板反射率的相乘操作</p> 
<p>Step7：根据不同需要进行制图输出</p> 
<p><strong>（三）matlab处理代码</strong></p> 
<pre><code class="prism language-c"><span class="token operator">%</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">%</span>光谱处理代码
<span class="token operator">%</span>
<span class="token operator">%</span>时间：<span class="token number">2019</span>年<span class="token number">6</span>月<span class="token number">19</span>日
<span class="token operator">%</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
<span class="token operator">%</span>去除文件头代码
<span class="token operator">%</span>输入<span class="token punctuation">.</span>sig文件
 fileFolder<span class="token operator">=</span><span class="token function">fullfile</span><span class="token punctuation">(</span><span class="token string">'E:\2019-06-11-下'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span>引号内是需要遍历的路径，填绝对路径，然后保存在fileFolder
 dirOutput <span class="token operator">=</span> <span class="token function">dir</span><span class="token punctuation">(</span><span class="token function">fullfile</span><span class="token punctuation">(</span>fileFolder<span class="token punctuation">,</span><span class="token string">'*.sig'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span>引号内是文件的后缀，写<span class="token string">'.txt'</span>则读取后缀为<span class="token string">'.txt'</span>的文件
 fileNames <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>dirOutput<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token operator">%</span>将所有文件名，以矩阵形式按行排列，保存到fileNames中
 
 <span class="token keyword">for</span> i<span class="token operator">=</span>fileNames
     i_trace <span class="token operator">=</span> <span class="token function">strcat</span><span class="token punctuation">(</span>'E<span class="token punctuation">:</span>\<span class="token number">2019</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span>下\'<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token operator">%</span>将字符串组合起来
     i_trace<span class="token operator">=</span><span class="token keyword">char</span><span class="token punctuation">(</span>i_trace<span class="token punctuation">)</span>
     i<span class="token operator">=</span><span class="token keyword">char</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
     ind<span class="token operator">=</span><span class="token function">findstr</span><span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     i<span class="token operator">=</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">:</span>ind<span class="token punctuation">)</span>
     M <span class="token operator">=</span> <span class="token function">dlmread</span><span class="token punctuation">(</span>i_trace<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
     i_trace_txt<span class="token operator">=</span><span class="token function">strcat</span><span class="token punctuation">(</span><span class="token string">'E:\2019-06-11-下\',i,'</span>txt'<span class="token punctuation">)</span>
     <span class="token operator">%</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">,</span> num3<span class="token punctuation">,</span> num4<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">textread</span><span class="token punctuation">(</span>i_trace<span class="token punctuation">,</span><span class="token string">'%f %f %f f'</span><span class="token punctuation">,</span><span class="token string">'headerlines'</span><span class="token punctuation">,</span><span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token operator">%</span> A<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>num1<span class="token punctuation">,</span>num2<span class="token punctuation">,</span>num3<span class="token punctuation">,</span>num4<span class="token punctuation">}</span><span class="token punctuation">;</span>
     <span class="token operator">%</span> <span class="token function">eval</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'T'</span><span class="token punctuation">,</span><span class="token function">num2str</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'='</span><span class="token punctuation">,</span><span class="token string">'load(i_trace{1,1})'</span><span class="token punctuation">,</span><span class="token string">';'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">dlmwrite</span><span class="token punctuation">(</span>i_trace_txt<span class="token punctuation">,</span> M<span class="token punctuation">,</span> <span class="token string">'delimiter'</span><span class="token punctuation">,</span> <span class="token string">'\t'</span><span class="token punctuation">,</span><span class="token string">'precision'</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'newline'</span><span class="token punctuation">,</span> <span class="token string">'pc'</span><span class="token punctuation">)</span>
    
 end

<span class="token operator">%</span>生成平均值代码
 clc<span class="token punctuation">;</span>
 clear all<span class="token punctuation">;</span>
 close all<span class="token punctuation">;</span>
 fileFolder<span class="token operator">=</span><span class="token function">fullfile</span><span class="token punctuation">(</span><span class="token string">'E:\txt\柏油路'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span>引号内是需要遍历的路径，填绝对路径，然后保存在fileFolder
 dirOutput<span class="token operator">=</span><span class="token function">dir</span><span class="token punctuation">(</span><span class="token function">fullfile</span><span class="token punctuation">(</span>fileFolder<span class="token punctuation">,</span><span class="token string">'*.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span>引号内是文件的后缀，写<span class="token string">'.txt'</span>则读取后缀为<span class="token string">'.txt'</span>的文件
 fileNames<span class="token operator">=</span><span class="token punctuation">{<!-- --></span>dirOutput<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token operator">%</span>将所有文件名，以矩阵形式按行排列，保存到fileNames中
 sumM <span class="token operator">=</span> <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">741</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token keyword">for</span> i<span class="token operator">=</span>fileNames
     i
    i_trace <span class="token operator">=</span> <span class="token function">strcat</span><span class="token punctuation">(</span>'E<span class="token punctuation">:</span>\txt\柏油路\'<span class="token punctuation">,</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">%</span>将字符串组合起来
     i_trace<span class="token operator">=</span><span class="token keyword">char</span><span class="token punctuation">(</span>i_trace<span class="token punctuation">)</span><span class="token punctuation">;</span>
     i <span class="token operator">=</span> <span class="token keyword">char</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
     ind<span class="token operator">=</span><span class="token function">findstr</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     i<span class="token operator">=</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">:</span>ind<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     M <span class="token operator">=</span> <span class="token function">dlmread</span><span class="token punctuation">(</span>i_trace<span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">sumM</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">M</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">sumM</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">sumM</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">M</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token operator">%</span>i_trace_txt<span class="token operator">=</span><span class="token function">strcat</span><span class="token punctuation">(</span><span class="token string">'E:\2019-06-11-下\ave.txt'</span><span class="token string">'.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token operator">%</span><span class="token function">dlmwrite</span><span class="token punctuation">(</span>i_trace_txt<span class="token punctuation">,</span> M<span class="token punctuation">,</span> <span class="token string">'delimiter'</span><span class="token punctuation">,</span> <span class="token string">'\t'</span><span class="token punctuation">,</span><span class="token string">'precision'</span><span class="token punctuation">,</span> <span class="token punctuation">,</span><span class="token string">'newline'</span><span class="token punctuation">,</span> <span class="token string">'pc'</span><span class="token punctuation">)</span> 
 end
 sumM<span class="token punctuation">;</span>
 <span class="token function">aveM</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">sumM</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">aveM</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token function">sumM</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">11.0</span><span class="token punctuation">;</span>
 aveM
 <span class="token function">save</span><span class="token punctuation">(</span><span class="token string">'E:\txt\柏油路\ave.txt'</span><span class="token punctuation">,</span><span class="token string">'aveM'</span><span class="token punctuation">,</span><span class="token string">'-ascii'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">%</span>插值以及计算反射率代码
clc<span class="token punctuation">;</span>
clear all<span class="token punctuation">;</span>
close all<span class="token punctuation">;</span>
fileName<span class="token operator">=</span><span class="token string">'E:\txt\110-116   118-121小路\ave.txt'</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>Target_Lambda<span class="token punctuation">,</span>Target_Percent<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">textread</span><span class="token punctuation">(</span><span class="token string">'E:\txt\110-116   118-121小路\ave.txt'</span><span class="token punctuation">,</span><span class="token string">'%f %f'</span><span class="token punctuation">,</span><span class="token string">'headerlines'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">%</span> M <span class="token operator">=</span> <span class="token function">dlmread</span><span class="token punctuation">(</span><span class="token string">'E:\txt\柏油路\ave.txt'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token operator">%</span> <span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'柏油路光谱曲线'</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>Whiteboard_Lambda<span class="token punctuation">,</span>Whiteboard_Reflectance<span class="token punctuation">]</span><span class="token operator">=</span> <span class="token function">textread</span><span class="token punctuation">(</span><span class="token string">'E:\白板定标文件.txt'</span><span class="token punctuation">,</span><span class="token string">' %f %f'</span><span class="token punctuation">,</span><span class="token string">'headerlines'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Target_interp <span class="token operator">=</span> <span class="token function">interp1</span><span class="token punctuation">(</span>Target_Lambda<span class="token punctuation">,</span>Target_Percent<span class="token punctuation">,</span>Whiteboard_Lambda<span class="token punctuation">)</span><span class="token punctuation">;</span>
Target_Reflectance<span class="token operator">=</span>Target_interp<span class="token punctuation">.</span><span class="token operator">*</span>Whiteboard_Reflectance<span class="token punctuation">;</span>
A<span class="token operator">=</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token number">957</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">=</span>Whiteboard_Lambda<span class="token punctuation">;</span>
<span class="token function">A</span><span class="token punctuation">(</span><span class="token punctuation">:</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token operator">=</span>Target_Reflectance<span class="token punctuation">;</span>
<span class="token function">save</span><span class="token punctuation">(</span><span class="token string">'E:\txt\110-116   118-121小路\光谱曲线.txt'</span><span class="token punctuation">,</span><span class="token string">'A'</span><span class="token punctuation">,</span><span class="token string">'-ascii'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> 
<p>处理后导出数据</p> 
<pre><code class="prism language-c"><span class="token operator">%</span>制图输出
 figure<span class="token punctuation">,</span>
 <span class="token function">plot</span><span class="token punctuation">(</span>Whiteboard_Lambda<span class="token punctuation">,</span>Target_Reflectance<span class="token punctuation">)</span><span class="token punctuation">;</span>
 hold on<span class="token punctuation">;</span>
 <span class="token function">plot</span><span class="token punctuation">(</span>Whiteboard_Lambda<span class="token punctuation">,</span>Target_interp<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'柏油路反射率'</span><span class="token punctuation">,</span><span class="token string">'柏油路百分比原图像'</span><span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span> <span class="token string">'SouthEast'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'波段（nm）'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'反射率/百分比（%）'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'柏油路反射率和百分比'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 grid on<span class="token punctuation">;</span>
 figure<span class="token punctuation">,</span>
 <span class="token function">plot</span><span class="token punctuation">(</span>Whiteboard_Lambda<span class="token punctuation">,</span>Target_Reflectance<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">%</span> <span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'柏油路反射率'</span><span class="token punctuation">,</span> <span class="token string">'Location'</span><span class="token punctuation">,</span> <span class="token string">'SouthEast'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'波段（nm）'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'反射率（%）'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'柏油路反射率'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 grid on<span class="token punctuation">;</span>
</code></pre> 
<h3><a id="23__167"></a>2.3 处理结果</h3> 
<p><img src="https://images2.imgbox.com/a0/da/sjhQamOH_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_173"></a>三、地物光谱特征分析</h2> 
<h3><a id="31__175"></a>3.1 光谱曲线平滑</h3> 
<p>（一）处理代码</p> 
<pre><code class="prism language-c"><span class="token operator">%</span> smooths平滑操作代码
Reflectance_Smooth <span class="token operator">=</span> <span class="token function">smooth</span><span class="token punctuation">(</span>Target_Reflectance<span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token string">'lowess'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
figure<span class="token punctuation">,</span>
<span class="token function">plot</span><span class="token punctuation">(</span>Whiteboard_Lambda<span class="token punctuation">,</span>Reflectance_Smooth<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>（二）处理结果</p> 
<p><img src="https://images2.imgbox.com/77/fc/SZFYAT5v_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32__190"></a>3.2 光谱曲线一阶导数</h3> 
<p>（一）处理代码</p> 
<pre><code class="prism language-c"><span class="token operator">%</span> 一阶导数代码
figure<span class="token punctuation">,</span>
<span class="token function">plot</span><span class="token punctuation">(</span>Whiteboard_Lambda<span class="token punctuation">,</span>Reflectance_Smooth<span class="token punctuation">)</span><span class="token punctuation">;</span>
h<span class="token operator">=</span><span class="token function">get</span><span class="token punctuation">(</span>gca<span class="token punctuation">,</span><span class="token string">'children'</span><span class="token punctuation">)</span>
x <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'XData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
y <span class="token operator">=</span> <span class="token function">get</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span><span class="token string">'YData'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dy <span class="token operator">=</span> <span class="token function">diff</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token punctuation">.</span><span class="token operator">/</span> <span class="token function">diff</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
axis tight<span class="token punctuation">;</span>
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">:</span>end<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dy<span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">)</span>
<span class="token function">xlabel</span><span class="token punctuation">(</span><span class="token string">'波段（nm）'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">ylabel</span><span class="token punctuation">(</span><span class="token string">'导数'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">,</span><span class="token string">'color'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">title</span><span class="token punctuation">(</span><span class="token string">'柏油路反射率:一阶导数'</span><span class="token punctuation">,</span><span class="token string">'fontsize'</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token string">'fontweight'</span><span class="token punctuation">,</span><span class="token string">'bold'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">%</span> <span class="token function">legend</span><span class="token punctuation">(</span><span class="token string">'柏油路反射率:一阶导数'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
grid on<span class="token punctuation">;</span> 
</code></pre> 
<p>（二）处理结果</p> 
<p><img src="https://images2.imgbox.com/f2/6e/SqRp4XCK_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3157a804bc5e2034f992215751ffd81a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">apt-get  install 报警告 WARNING: The following packages cannot be authenticated! 的解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bbe1083f75c4f31302163b033de1ee6d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">简单高效的模型小挂件——CBAM</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>