<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>只需根据接口文档，就能轻松开发 get 和 post 请求的脚本，你会做吗？ - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="只需根据接口文档，就能轻松开发 get 和 post 请求的脚本，你会做吗？" />
<meta property="og:description" content="一般的接口文档描述的内容：
开发get请求的脚本，接口文档的描述如下：
在loadrunner里面创建一个空脚本：
在action空白处，点击insert—&gt;step
输入web_custom_request，双击选择该函数，填入如下几个参数值：
生成的脚本如下：
运行编译，看有没有语法错误：
在日志里面看到返回了code=0，说明接口请求是成功的，在这里不要关注返回的乱码信息
是不是觉得get请求的脚本很容易搞定了，接下来看post请求的，还是用上面的函数完成。
用post请求开发登录接口的脚本：文档说明如下，参数很少。
填入如下的值：
生成的脚本内容如下：
编译运行脚本，看日志信息：日志级别需要调整到如下级别
脚本都已经成功开发完了，那么是不是有一个问题？在跑场景的时候，怎么知道我的脚本一直都是成功的呢？
是不是有一些小伙伴在平时的脚本运行的时候，脚本都没有报错，但是实际插入到数据库的数据没有增加的情况？
这个问题肯定很多小伙伴都遇到过，那怎么办呢？
就是需要对脚本的返回值进行if判断，当成功的时候，就pass，失败了就fail，这样事务也会自动的去统计成功或失败
先来在脚本中添加事务 开始事务
结束事务
if判断要怎么写呢？ 回到刚才回放的日志里面，用之前讲过的关联的方法，双击code=0这一行
web_reg_save_param(&#34;code&#34;, //变量的名称
&#34;LB=\&#34;code\&#34;:&#34;, //左边界值，双引号需要加上转义符
&#34;RB=,&#34;, //右边界值
&#34;Ord=1&#34;, //多个值时，取第几个
LAST);
这里再教大家一个方法，进入到loadrunner的帮助文档，查看每个函数的使用，loadrunner界面，按下键盘的F1，在输入框输入函数名称，比如atoi
当有多个示例的时候，HTTP协议的选择C语言
判断如下：
// 写if判断
// int atoi( 需要转换成整型的字符 ); //把指定的字符转换成整型
// char *lr_eval_string( 当前想要获取的参数名 ); // 获取指定的当前参数的值
if(atoi(lr_eval_string(&#34;{code}&#34;))==0) { //当code=0的时候，事务是成功的
lr_end_transaction(&#34;login&#34;, LR_PASS);
} else { //当code不等于0的时候，事务是失败的
lr_end_transaction(&#34;login&#34;, LR_FAIL);
} 运行脚本，在日志里面可以看到pass信息
总结
目前已经学习了几个常用的请求函数，作用如下：
Web_url：只能用于get请求Web_submit_data：get，post，提交form表单Web_custom_request:即可用于get，也可用于post请求，post请求是标准的json串 最后： 为了回馈铁杆粉丝们，我给大家整理了完整的软件测试视频学习教程，朋友们如果需要可以自行免费领取 【保证100%免费】
软件测试面试文档" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3dc438fe6d9c9a03f7c4371fc47e3c94/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-21T14:20:45+08:00" />
<meta property="article:modified_time" content="2023-07-21T14:20:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">只需根据接口文档，就能轻松开发 get 和 post 请求的脚本，你会做吗？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ff/84/Hw3XC5KY_o.png"></p> 
<p><strong>一般的接口文档描述的内容：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/b6/6b/FWm4o8eo_o.png"></p> 
<p><strong>开发get请求的脚本，接口文档的描述如下：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d9/41/ReNh6ppz_o.png"></p> 
<p><strong>在loadrunner里面创建一个空脚本：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/4e/d0/ryFPNg8u_o.png"></p> 
<p>在action空白处，点击insert—&gt;step</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/01/a9/17kKTyED_o.png"></p> 
<p><strong>输入web_custom_request，双击选择该函数，填入如下几个参数值：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/65/79/QET1mCyO_o.png"></p> 
<p><strong>生成的脚本如下：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ee/c2/IROlZRD3_o.png"></p> 
<p>运行编译，看有没有语法错误：</p> 
<p><strong>在日志里面看到返回了code=0，说明接口请求是成功的，在这里不要关注返回的乱码信息</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/39/ec/sLfdfOqQ_o.png"></p> 
<p>是不是觉得get请求的脚本很容易搞定了，接下来看post请求的，还是用上面的函数完成。</p> 
<p>用post请求开发登录接口的脚本：文档说明如下，参数很少。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ed/f6/2yZXFvbz_o.png"></p> 
<p><strong>填入如下的值：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/10/ce/khrK5g4I_o.png"></p> 
<p><strong>生成的脚本内容如下：</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/3b/c9/ETV5GB5l_o.png"></p> 
<p>编译运行脚本，看日志信息：日志级别需要调整到如下级别</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/39/35/KRFGEInd_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f5/24/mrQwz9fQ_o.png"></p> 
<p>脚本都已经成功开发完了，那么是不是有一个问题？在跑场景的时候，怎么知道我的脚本一直都是成功的呢？</p> 
<p>是不是有一些小伙伴在平时的脚本运行的时候，脚本都没有报错，但是实际插入到数据库的数据没有增加的情况？</p> 
<p>这个问题肯定很多小伙伴都遇到过，那怎么办呢？</p> 
<p>就是需要对脚本的返回值进行if判断，当成功的时候，就pass，失败了就fail，这样事务也会自动的去统计成功或失败</p> 
<ul><li><strong>先来在脚本中添加事务</strong></li></ul> 
<p><strong>开始事务</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/9d/d7/G8E4UljE_o.png"></p> 
<p><strong>结束事务</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/91/af/Ka9bcRRu_o.png"></p> 
<p></p> 
<ul><li><strong>if判断要怎么写呢？</strong></li></ul> 
<p>回到刚才回放的日志里面，用之前讲过的关联的方法，双击code=0这一行</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/02/13/aprWMd9c_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d9/75/tHubjSyI_o.png"></p> 
<p></p> 
<p>web_reg_save_param("code", //变量的名称</p> 
<p>"LB=\"code\":", //左边界值，双引号需要加上转义符</p> 
<p>"RB=,", //右边界值</p> 
<p>"Ord=1", //多个值时，取第几个</p> 
<p>LAST);</p> 
<p>这里再教大家一个方法，进入到loadrunner的帮助文档，查看每个函数的使用，loadrunner界面，按下键盘的F1，在输入框输入函数名称，比如atoi</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/30/b7/HDVnzgN2_o.png"></p> 
<p><strong>当有多个示例的时候，HTTP协议的选择C语言</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/65/62/DCH6h8mb_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/d8/5c/hGfFPrxk_o.png"></p> 
<p><strong>判断如下：</strong></p> 
<p>// 写if判断</p> 
<p>// int atoi( 需要转换成整型的字符 ); //把指定的字符转换成整型</p> 
<p>// char *lr_eval_string( 当前想要获取的参数名 ); // 获取指定的当前参数的值</p> 
<p>if(atoi(lr_eval_string("{code}"))==0) { //当code=0的时候，事务是成功的</p> 
<p>lr_end_transaction("login", LR_PASS);</p> 
<p>} else { //当code不等于0的时候，事务是失败的</p> 
<p>lr_end_transaction("login", LR_FAIL);</p> 
<p>} 运行脚本，在日志里面可以看到pass信息</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/8b/4f/WuBd0Qv9_o.png"></p> 
<p></p> 
<p><strong>总结</strong></p> 
<p>目前已经学习了几个常用的请求函数，作用如下：</p> 
<ul><li>Web_url：只能用于get请求</li><li>Web_submit_data：get，post，提交form表单</li><li>Web_custom_request:即可用于get，也可用于post请求，post请求是标准的json串</li></ul> 
<p><strong>最后：</strong> 为了回馈铁杆粉丝们，我给大家整理了完整的软件测试视频学习教程，朋友们如果需要可以自行免费领取<span style="color:#fe2c24;"> <strong><code>【保证100%免费】</code></strong></span></p> 
<p class="img-center"><img alt="" height="404" src="https://images2.imgbox.com/8a/3a/NH1Ufokm_o.png" width="720"></p> 
<p><strong>软件测试面试文档</strong></p> 
<p>我们学习必然是为了找到高薪的工作，下面这些面试题是来自阿里、腾讯、字节等一线互联网大厂最新的面试资料，并且有字节大佬给出了权威的解答，刷完这一套面试资料相信大家都能找到满意的工作。</p> 
<p class="img-center"><img alt="" height="473" src="https://images2.imgbox.com/ee/32/UW6ROfvS_o.png" width="814"></p> 
<p class="img-center"><img alt="" height="151" src="https://images2.imgbox.com/cf/d3/e6qUCM9O_o.png" width="451"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1b31d8a6b2927228e981bf2f9f26d9bd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【嵌入式工具】Keil自制格式化插件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/18a5a85bd493d8f7f038b4328d68c1d9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">list列表，tuple元组，dictionary字典</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>