<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用pyecharts1.5进行数据分析可视化 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用pyecharts1.5进行数据分析可视化" />
<meta property="og:description" content="使用pyecharts 1.5进行数据可视化 安装 pip install pyecharts 直接使用该命令安装的版本为最新版本为1.5。语法与之前版本大不一样，因此本文仅针对1.5及之后版本说明。若想使用之前版本请使用命令pip install pyecharts == 0.1.5.19
注：建议在jupyter notebook中coding，方便debug。
开始使用 基本套路就是先创建一个你需要的空图层，然后使用.set_global_opts修改全局项再用.set_series_opts修改具体的相关配置就可以。当然最好的学习地址一定是官方文档，但是里面介绍的太过复杂了，这里仅以快速上手使用为目标进行几个例子来说明套路。
地图 pyecharts比较好的就是绘制地图，这里以2019-nCov项目中安徽省地图绘制为例。
首先导入需要的包
from pyecharts.charts import Pie ,Grid,Bar,Line from pyecharts.faker import Faker #数据包 from pyecharts.charts import Map,Geo from pyecharts import options as opts from pyecharts.globals import ThemeType OK，我现在有一个省份的一组数据，大概长这样
locate =[&#39;合肥市&#39;, &#39;阜阳市&#39;, &#39;亳州市&#39;, &#39;安庆市&#39;, &#39;马鞍山市&#39;, &#39;铜陵市&#39;, &#39;六安市&#39;, &#39;滁州市&#39;, &#39;池州市&#39;,&#39;蚌埠市&#39;,&#39;芜湖市&#39;,&#39;宿州市&#39;,&#39;宣城市&#39;,&#39;淮北市&#39;,&#39;淮南市&#39;,&#39;黄山市&#39;]` data =[&#39;115&#39;,&#39;105&#39;,&#39;72&#39;,&#39;66&#39;,&#39;30&#39;,&#39;22&#39;,&#39;41&#39;,&#39;11&#39;,&#39;11&#39;,&#39;88&#39;,&#39;27&#39;,&#39;27&#39;,&#39;5&#39;,&#39;22&#39;,&#39;14&#39;,&#39;9&#39;] 这也是接触到的需要绘制地图的数据格式，两个list，一个是地名，一个是每个城市对应的数据，现在执行以下代码就可以得到安徽省的疫情地图。
list1 = [[locate[i],data[i]] for i in range(len(locate))] #首先创建数据 map_1 = Map(init_opts=opts.InitOpts(width=&#34;400px&#34;, height=&#34;460px&#34;)) #创建地图，其中括号内可以调整大小，也可以修改主题颜色。 map_1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ebb448c3054aa045e3814ef7f1fad833/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-02-07T13:25:22+08:00" />
<meta property="article:modified_time" content="2020-02-07T13:25:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用pyecharts1.5进行数据分析可视化</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="pyecharts_15_0"></a>使用pyecharts 1.5进行数据可视化</h2> 
<p>安装 <code>pip install pyecharts</code> <br> 直接使用该命令安装的版本为最新版本为1.5。语法与之前版本大不一样，因此本文仅针对1.5及之后版本说明。若想使用之前版本请使用命令<code>pip install pyecharts == 0.1.5.19</code><br> 注：建议在jupyter notebook中coding，方便debug。</p> 
<h3><a id="_6"></a>开始使用</h3> 
<p>基本套路就是先创建一个你需要的空图层，然后使用<code>.set_global_opts</code>修改全局项再用<code>.set_series_opts</code>修改具体的相关配置就可以。当然最好的学习地址一定是<a href="https://pyecharts.org/#/zh-cn/intro" rel="nofollow">官方文档</a>，但是里面介绍的太过复杂了，这里仅以快速上手使用为目标进行几个例子来说明套路。</p> 
<h4><a id="_10"></a>地图</h4> 
<p>pyecharts比较好的就是绘制地图，这里以<a href="https://github.com/liuhuanshuo/2020-nCov-anhui">2019-nCov</a>项目中安徽省地图绘制为例。</p> 
<p>首先导入需要的包</p> 
<pre><code class="prism language-py"><span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Pie <span class="token punctuation">,</span>Grid<span class="token punctuation">,</span>Bar<span class="token punctuation">,</span>Line
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>faker <span class="token keyword">import</span> Faker <span class="token comment">#数据包</span>
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>charts <span class="token keyword">import</span> Map<span class="token punctuation">,</span>Geo
<span class="token keyword">from</span> pyecharts <span class="token keyword">import</span> options <span class="token keyword">as</span> opts
<span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span><span class="token builtin">globals</span> <span class="token keyword">import</span> ThemeType
</code></pre> 
<p>OK，我现在有一个省份的一组数据，大概长这样</p> 
<pre><code class="prism language-python">locate <span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'合肥市'</span><span class="token punctuation">,</span> <span class="token string">'阜阳市'</span><span class="token punctuation">,</span> <span class="token string">'亳州市'</span><span class="token punctuation">,</span> <span class="token string">'安庆市'</span><span class="token punctuation">,</span> <span class="token string">'马鞍山市'</span><span class="token punctuation">,</span> <span class="token string">'铜陵市'</span><span class="token punctuation">,</span> <span class="token string">'六安市'</span><span class="token punctuation">,</span> <span class="token string">'滁州市'</span><span class="token punctuation">,</span> <span class="token string">'池州市'</span><span class="token punctuation">,</span><span class="token string">'蚌埠市'</span><span class="token punctuation">,</span><span class="token string">'芜湖市'</span><span class="token punctuation">,</span><span class="token string">'宿州市'</span><span class="token punctuation">,</span><span class="token string">'宣城市'</span><span class="token punctuation">,</span><span class="token string">'淮北市'</span><span class="token punctuation">,</span><span class="token string">'淮南市'</span><span class="token punctuation">,</span><span class="token string">'黄山市'</span><span class="token punctuation">]</span>`
data <span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'115'</span><span class="token punctuation">,</span><span class="token string">'105'</span><span class="token punctuation">,</span><span class="token string">'72'</span><span class="token punctuation">,</span><span class="token string">'66'</span><span class="token punctuation">,</span><span class="token string">'30'</span><span class="token punctuation">,</span><span class="token string">'22'</span><span class="token punctuation">,</span><span class="token string">'41'</span><span class="token punctuation">,</span><span class="token string">'11'</span><span class="token punctuation">,</span><span class="token string">'11'</span><span class="token punctuation">,</span><span class="token string">'88'</span><span class="token punctuation">,</span><span class="token string">'27'</span><span class="token punctuation">,</span><span class="token string">'27'</span><span class="token punctuation">,</span><span class="token string">'5'</span><span class="token punctuation">,</span><span class="token string">'22'</span><span class="token punctuation">,</span><span class="token string">'14'</span><span class="token punctuation">,</span><span class="token string">'9'</span><span class="token punctuation">]</span>
</code></pre> 
<p>这也是接触到的需要绘制地图的数据格式，两个list，一个是地名，一个是每个城市对应的数据，现在执行以下代码就可以得到安徽省的疫情地图。</p> 
<pre><code class="prism language-python">list1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>locate<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>locate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">#首先创建数据</span>
map_1 <span class="token operator">=</span> Map<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token string">"400px"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">"460px"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#创建地图，其中括号内可以调整大小，也可以修改主题颜色。</span>
map_1<span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">"安徽疫情"</span><span class="token punctuation">,</span> list1<span class="token punctuation">,</span> maptype<span class="token operator">=</span><span class="token string">"安徽"</span><span class="token punctuation">)</span> <span class="token comment">#添加安徽地图</span>
map_1<span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span> <span class="token comment">#设置全局配置项</span>
    <span class="token comment">#title_opts=opts.TitleOpts(title="安徽疫情"), 添加标题</span>
    visualmap_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>VisualMapOpts<span class="token punctuation">(</span>max_<span class="token operator">=</span><span class="token number">120</span><span class="token punctuation">,</span> is_piecewise<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#最大数据范围 并且使用分段</span>
    legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span>is_show<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">#是否显示图例</span>
    <span class="token punctuation">)</span>
map_1<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#直接在notebook中显示</span>
<span class="token comment"># map_1.render('map1.html') 将地图以html形式保存在工作目录下</span>
</code></pre> 
<img src="https://images2.imgbox.com/09/bf/H6Agis75_o.png" alt="1gSvTJ.png"> 
<p>当然地图还有很多可以自定义的配置项，选择需要的配置项添加到对应的函数中即可。</p> 
<pre><code class="prism language-py">    <span class="token comment"># 数据项 (坐标点名称，坐标点值)</span>
    data_pair<span class="token punctuation">:</span> Sequence<span class="token punctuation">,</span>

    <span class="token comment"># 地图类型，具体参考 pyecharts.datasets.map_filenames.json 文件</span>
    maptype<span class="token punctuation">:</span> <span class="token builtin">str</span> <span class="token operator">=</span> <span class="token string">"china"</span><span class="token punctuation">,</span>

    <span class="token comment"># 是否选中图例</span>
    is_selected<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>

    <span class="token comment"># 是否开启鼠标缩放和平移漫游。</span>
    is_roam<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>

    <span class="token comment"># 当前视角的中心点，用经纬度表示</span>
    center<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>Sequence<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 当前视角的缩放比例。</span>
    zoom<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>Numeric<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>

    <span class="token comment"># 自定义地区的名称映射</span>
    name_map<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">dict</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 标记图形形状</span>
    symbol<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 是否显示标记图形</span>
    is_map_symbol_show<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>

    <span class="token comment"># 标签配置项，参考 `series_options.LabelOpts`</span>
    label_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">]</span> <span class="token operator">=</span> opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># 提示框组件配置项，参考 `series_options.TooltipOpts`</span>
    tooltip_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>TooltipOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 图元样式配置项，参考 `series_options.ItemStyleOpts`</span>
    itemstyle_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 高亮标签配置项，参考 `series_options.LabelOpts`</span>
    emphasis_label_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 高亮图元样式配置项，参考 `series_options.ItemStyleOpts`</span>
    emphasis_itemstyle_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
</code></pre> 
<h4><a id="_96"></a>饼图</h4> 
<p>最简单的一个饼图</p> 
<pre><code class="prism language-py"><span class="token keyword">from</span> pyecharts<span class="token punctuation">.</span>faker <span class="token keyword">import</span> Faker <span class="token comment">#导入官方数据示例包</span>
c <span class="token operator">=</span> <span class="token punctuation">(</span>
    Pie<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#创建一个饼图 ()里面可以添加配置项</span>
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token builtin">list</span><span class="token punctuation">(</span>z<span class="token punctuation">)</span> <span class="token keyword">for</span> z <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>Faker<span class="token punctuation">.</span>choose<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Faker<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">#添加数据</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"Pie-基本示例"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#全局配置项</span>
    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>formatter<span class="token operator">=</span><span class="token string">"{b}: {c}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#图形配置项 配置标签</span>
<span class="token punctuation">)</span>
c<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#展示图</span>
</code></pre> 
<img src="https://images2.imgbox.com/b6/01/hfzaNb5E_o.png" alt="1gprBF.png"> 
<p>饼图的更多配置项</p> 
<pre><code class="prism language-py">    <span class="token comment"># 系列名称，用于 tooltip 的显示，legend 的图例筛选。</span>
    series_name<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span>

    <span class="token comment"># 系列数据项，格式为 [(key1, value1), (key2, value2)]</span>
    data_pair<span class="token punctuation">:</span> Sequence<span class="token punctuation">,</span>

    <span class="token comment"># 系列 label 颜色</span>
    color<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 饼图的半径，数组的第一项是内半径，第二项是外半径</span>
    <span class="token comment"># 默认设置成百分比，相对于容器高宽中较小的一项的一半</span>
    radius<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>Sequence<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 饼图的中心（圆心）坐标，数组的第一项是横坐标，第二项是纵坐标</span>
    <span class="token comment"># 默认设置成百分比，设置成百分比时第一项是相对于容器宽度，第二项是相对于容器高度</span>
    center<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span>Sequence<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 是否展示成南丁格尔图，通过半径区分数据大小，有'radius'和'area'两种模式。</span>
    <span class="token comment"># radius：扇区圆心角展现数据的百分比，半径展现数据的大小</span>
    <span class="token comment"># area：所有扇区圆心角相同，仅通过半径展现数据大小</span>
    rosetype<span class="token punctuation">:</span> Optional<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 饼图的扇区是否是顺时针排布。</span>
    is_clockwise<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">,</span>

    <span class="token comment"># 标签配置项，参考 `series_options.LabelOpts`</span>
    label_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">]</span> <span class="token operator">=</span> opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

    <span class="token comment"># 提示框组件配置项，参考 `series_options.TooltipOpts`</span>
    tooltip_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>TooltipOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>

    <span class="token comment"># 图元样式配置项，参考 `series_options.ItemStyleOpts`</span>
    itemstyle_opts<span class="token punctuation">:</span> Union<span class="token punctuation">[</span>opts<span class="token punctuation">.</span>ItemStyleOpts<span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
</code></pre> 
<p>继续使用地图里的数据绘制饼图，现在想看安徽各地区疫情分布比，就可以考虑使用饼图（玫瑰图）。详细代码</p> 
<pre><code class="prism language-py">map_2 <span class="token operator">=</span> <span class="token punctuation">(</span>
    Pie<span class="token punctuation">(</span>init_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>InitOpts<span class="token punctuation">(</span>width<span class="token operator">=</span><span class="token string">"600px"</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token string">"500px"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> 创建一个饼图
    <span class="token punctuation">.</span>add<span class="token punctuation">(</span>
        <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">#图名</span>
        <span class="token punctuation">[</span><span class="token punctuation">[</span>locate<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>locate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">#添加数据</span>
        radius<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"40%"</span><span class="token punctuation">,</span> <span class="token string">"75%"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment"># 调整半径</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>
        legend_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LegendOpts<span class="token punctuation">(</span> 
            orient<span class="token operator">=</span><span class="token string">"vertical"</span><span class="token punctuation">,</span> pos_top<span class="token operator">=</span><span class="token string">"10%"</span><span class="token punctuation">,</span> pos_left<span class="token operator">=</span><span class="token string">"88%"</span> <span class="token comment">#图例设置</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token punctuation">.</span>set_series_opts<span class="token punctuation">(</span>label_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>LabelOpts<span class="token punctuation">(</span>formatter<span class="token operator">=</span><span class="token string">"{b}: {c}"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#设置标签</span>
<span class="token punctuation">)</span>
map_2<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#直接在notebook中显示</span>
<span class="token comment">#map_2.render('map2.html') #保存到本地</span>
</code></pre> 
<img src="https://images2.imgbox.com/76/b4/mpeSjDPk_o.png" alt="1gpSYR.png"> 
<h4><a id="_176"></a>柱状图</h4> 
<p>demo</p> 
<pre><code class="prism language-py">c <span class="token operator">=</span> <span class="token punctuation">(</span>
    Bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>Faker<span class="token punctuation">.</span>choose<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">"商家A"</span><span class="token punctuation">,</span> Faker<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#数据配置</span>
    <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">"商家B"</span><span class="token punctuation">,</span> Faker<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#数据配置</span>
    <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"Bar-基本示例"</span><span class="token punctuation">,</span> subtitle<span class="token operator">=</span><span class="token string">"我是副标题"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#全局配置标题</span>
<span class="token punctuation">)</span>
c<span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<img src="https://images2.imgbox.com/d2/59/NeCZ1tpz_o.png" alt="1g9OIJ.png"> 
<p>通过添加配置项可以调整标题、图例、粗细、位置、背景图等等</p> 
<pre><code class="prism language-PY">    # 系列数据
    yaxis_data: Sequence[Numeric, opts.BarItem, dict],

    # 是否选中图例
    is_selected: bool = True,

    # 使用的 x 轴的 index，在单个图表实例中存在多个 x 轴的时候有用。
    xaxis_index: Optional[Numeric] = None,

    # 使用的 y 轴的 index，在单个图表实例中存在多个 y 轴的时候有用。
    yaxis_index: Optional[Numeric] = None,

    # 系列 label 颜色
    color: Optional[str] = None,

    # 数据堆叠，同个类目轴上系列配置相同的　stack　值可以堆叠放置。
    stack: Optional[str] = None,

    # 同一系列的柱间距离，默认为类目间距的 20%，可设固定值
    category_gap: Union[Numeric, str] = "20%",

    # 不同系列的柱间距离，为百分比（如 '30%'，表示柱子宽度的 30%）。
    # 如果想要两个系列的柱子重叠，可以设置 gap 为 '-100%'。这在用柱子做背景的时候有用。
    gap: Optional[str] = None,

    # 标签配置项，参考 `series_options.LabelOpts`
    label_opts: Union[opts.LabelOpts, dict] = opts.LabelOpts(),

    # 标记点配置项，参考 `series_options.MarkPointOpts`
    markpoint_opts: Union[opts.MarkPointOpts, dict, None] = None,

    # 标记线配置项，参考 `series_options.MarkLineOpts`
    markline_opts: Union[opts.MarkLineOpts, dict, None] = None,

    # 提示框组件配置项，参考 `series_options.TooltipOpts`
    tooltip_opts: Union[opts.TooltipOpts, dict, None] = None,

    # 图元样式配置项，参考 `series_options.ItemStyleOpts`
    itemstyle_opts: Union[opts.ItemStyleOpts, dict, None] = None,
</code></pre> 
<h4><a id="_239"></a>同一图层绘制多图</h4> 
<p>如果想要同时叠加绘制图形可以采用参考以下方法</p> 
<pre><code class="prism language-py"><span class="token keyword">def</span> <span class="token function">two_pic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> Bar<span class="token punctuation">:</span> 
    x <span class="token operator">=</span> Faker<span class="token punctuation">.</span>choose<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#选择数据</span>
    bar <span class="token operator">=</span> <span class="token punctuation">(</span>  <span class="token comment">#先绘制bar</span>
        Bar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">"商家A"</span><span class="token punctuation">,</span> Faker<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">"商家B"</span><span class="token punctuation">,</span> Faker<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>set_global_opts<span class="token punctuation">(</span>title_opts<span class="token operator">=</span>opts<span class="token punctuation">.</span>TitleOpts<span class="token punctuation">(</span>title<span class="token operator">=</span><span class="token string">"Overlap-line+scatter"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    line <span class="token operator">=</span> <span class="token punctuation">(</span> <span class="token comment">#再添加line</span>
        Line<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_xaxis<span class="token punctuation">(</span>x<span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">"商家A"</span><span class="token punctuation">,</span> Faker<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>add_yaxis<span class="token punctuation">(</span><span class="token string">"商家B"</span><span class="token punctuation">,</span> Faker<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    bar<span class="token punctuation">.</span>overlap<span class="token punctuation">(</span>line<span class="token punctuation">)</span>
    <span class="token keyword">return</span> bar
two_pic<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>render_notebook<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<img src="https://images2.imgbox.com/8d/47/sGOA8gA0_o.png" alt="1gP80O.png"> 
<h3><a id="_266"></a>总结</h3> 
<p>使用新版pyecharts并不难，基本套路都和上面一样，只要先学会画图套路，再多读官方文档就可以。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/50b1e969878a63825dcd699933084eb7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">电子设计教程10：电荷泵倍压输出电路</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7fa502d66059dba225f375e9d7805b88/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vbs 实际操作 调用外部程序</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>