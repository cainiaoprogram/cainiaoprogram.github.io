<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Vivado那些事】创建不包含源文件的IP - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Vivado那些事】创建不包含源文件的IP" />
<meta property="og:description" content="有时候我们想参考官方的源码，但是有些IP怎么也找不到官方的源码，具体原因是什么呢？
下面从下面两种Vivado创建IP的流程看下具体的原因：
所谓“数字积木”，就是Vivado集成开发环境基于IP的 “积木块”设计思想。
VIvado中IP定制化流程如下：
来源UG896
IP目录将来自下面的IP统一到一个环境中，这些IP包括XilinxIP、第三方IP和用户IP。
基于IP-XACT标准，VivadoIP封装器工具提供了独一无二的“重用”特性。IP封装器为Vivado的任何用户提供了一种能力，即将设计流程任意阶段的一个设计进行封装，然后将该IP作为一个系统级的IP进行使用。
创建不包含源文件的IP
上面建立的IP可以很方便操作一下看到源文件，实际使用过程中IP作为知识产权的成果，设计者并不希望公开IP核的源代码，下面将带你建立一个不包含源文件的IP。
第一步：在操作系统下，执行菜单命令【开始】-【所有程序】-【Xilinx Design Tools】-【Vivado2018】点击【Vivado2018】，启动Vivado集成开发环境。
第二步：在“Vivado2018”主界面下，选择“Create New Project”选项，弹出“New Project-Createa New Vivado Project”对话框。
第三步：单击【Next】按钮，弹出“New Project”对话框。在该对话框中，按如下参数进行设置。
(1)Project name：gateip；
(2)Project location：XXX\test；
(3)选中“Create project subdirectory”前面的复选框。
第四步：单击【Next】按钮，弹出“New Project-Project Type”对话框。在该对话框中，按如下参数进行设置。
(1)选中“RTL Project”前面的复选框；
(2)其他按默认设置。
第七步：单击【Next】按钮，弹出“New Project-Default Part”对话框。在该对话框中,选择器件“xc7k325tffg900-2”。
第八步：单击【Next】按钮，弹出“New Project-New Project Summary”对话框。
第九步：单击【Finish】按钮。
至此，完成新工程的创建。
接下来添加文件
第一步：【Flow Navigateor】-【Add source】按钮
弹出“Add Sources“对话框。在该对话框中，单击【Add or crete design source】按钮，弹出“Add Source Files”对话框。在该对话框中，定位到XXXX\source路径。
在该路径下，选择gate.v文件。可以看到在“Add Sources”对话框中添加了gate.v文件，并且注意下面的设置。
gate.v文件
第六步：单击【Finish】按钮。
第七步：Vivado成开发环境界面左侧的“Flow Navigator”窗口中找到并展开“SYNTHESIS”选项。在展开项中，选择“Run Synthesis”选项，Vivado开始对该设计执行综合过程。
第八步：运行完综合过程后，弹出“Synthesis Completed”对话框。在该对话框中，选择“Open Synthesized Design”前面的复选框。
第九步：自动打开综合后的设计。在Vivado当前设计界面底部的“Tel Console”窗口中输入“write_edif F:/FILE/FPGA/ZYNQ/test/gateip/ip/gate." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/be0adb92ba7e45fc138e2f16484b9613/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-01-10T09:00:00+08:00" />
<meta property="article:modified_time" content="2021-01-10T09:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Vivado那些事】创建不包含源文件的IP</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="js_content"> 
 <p style="text-align:justify;">有时候我们想参考官方的源码，但是有些IP怎么也找不到官方的源码，具体原因是什么呢？</p> 
 <p style="text-align:justify;">下面从下面两种Vivado创建IP的流程看下具体的原因：</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/1b/94/6AH9netf_o.png"></p> 
 <p style="text-align:justify;">所谓“数字积木”，就是Vivado集成开发环境基于IP的 “积木块”设计思想。</p> 
 <p style="text-align:justify;">VIvado中IP定制化流程如下：</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/85/48/cR9Uy9Fg_o.png"></p> 
 <p style="text-align:right;">来源UG896</p> 
 <p style="text-align:justify;">IP目录将来自下面的IP统一到一个环境中，这些IP包括XilinxIP、第三方IP和用户IP。</p> 
 <p style="text-align:justify;">基于IP-XACT标准，VivadoIP封装器工具提供了独一无二的“重用”特性。IP封装器为Vivado的任何用户提供了一种能力，即将设计流程任意阶段的一个设计进行封装，然后将该IP作为一个系统级的IP进行使用。</p> 
 <p style="text-align:justify;">创建不包含源文件的IP</p> 
 <p style="text-align:justify;">上面建立的IP可以很方便操作一下看到源文件，实际使用过程中IP作为知识产权的成果，设计者并不希望公开IP核的源代码，下面将带你建立一个不包含源文件的IP。</p> 
 <p style="text-align:justify;">第一步：在操作系统下，执行菜单命令【开始】-【所有程序】-【Xilinx Design Tools】-【Vivado2018】点击【Vivado2018】，启动Vivado集成开发环境。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/c1/81/iaC8O2Or_o.png"></p> 
 <p style="text-align:justify;">第二步：在“Vivado2018”主界面下，选择“Create New Project”选项，弹出“New Project-Createa New Vivado Project”对话框。</p> 
 <p style="text-align:justify;">第三步：单击【Next】按钮，弹出“New Project”对话框。在该对话框中，按如下参数进行设置。</p> 
 <p style="text-align:justify;">(1)Project name：gateip；</p> 
 <p style="text-align:justify;">(2)Project location：XXX\test；</p> 
 <p style="text-align:justify;">(3)选中“Create project subdirectory”前面的复选框。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/9d/8f/nTADrNME_o.png"></p> 
 <p style="text-align:justify;">第四步：单击【Next】按钮，弹出“New Project-Project Type”对话框。在该对话框中，按如下参数进行设置。</p> 
 <p style="text-align:justify;">(1)选中“RTL Project”前面的复选框；</p> 
 <p style="text-align:justify;">(2)其他按默认设置。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/9f/60/3RmfaRQA_o.png"></p> 
 <p style="text-align:justify;">第七步：单击【Next】按钮，弹出“New Project-Default Part”对话框。在该对话框中,选择器件“xc7k325tffg900-2”。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/3f/2c/9AhBnPnL_o.png"></p> 
 <p style="text-align:justify;">第八步：单击【Next】按钮，弹出“New Project-New Project Summary”对话框。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/64/e8/9kOtriP5_o.png"></p> 
 <p style="text-align:justify;">第九步：单击【Finish】按钮。</p> 
 <p style="text-align:justify;">至此，完成新工程的创建。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/4f/96/PMfEaJ1J_o.png"></p> 
 <p style="text-align:justify;">接下来添加文件</p> 
 <p style="text-align:justify;">第一步：【Flow Navigateor】-【Add source】按钮</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/54/22/puuTovrp_o.png"></p> 
 <p style="text-align:justify;">弹出“Add Sources“对话框。在该对话框中，单击【Add or crete design source】按钮，弹出“Add Source Files”对话框。在该对话框中，定位到XXXX\source路径。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/e3/15/PHPTZmCG_o.png"></p> 
 <p style="text-align:justify;">在该路径下，选择gate.v文件。可以看到在“Add Sources”对话框中添加了gate.v文件，并且注意下面的设置。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/4f/56/uC5D9qO5_o.png"></p> 
 <p style="text-align:justify;">gate.v文件</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/51/dd/apHt4ZFc_o.png"></p> 
 <p style="text-align:justify;">第六步：单击【Finish】按钮。</p> 
 <p style="text-align:justify;">第七步：Vivado成开发环境界面左侧的“Flow Navigator”窗口中找到并展开“SYNTHESIS”选项。在展开项中，选择“Run Synthesis”选项，Vivado开始对该设计执行综合过程。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/da/0d/qauGSBZY_o.png"></p> 
 <p style="text-align:justify;">第八步：运行完综合过程后，弹出“Synthesis Completed”对话框。在该对话框中，选择“Open Synthesized Design”前面的复选框。</p> 
 <p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d0/d3/lkMAeko3_o.png"></p> 
 <p style="text-align:justify;">第九步：自动打开综合后的设计。在Vivado当前设计界面底部的“Tel Console”窗口中输入“write_edif F:/FILE/FPGA/ZYNQ/test/gateip/ip/gate.edf”命令，将gate.edf文件写到选择的目录下。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/78/b3/bvOr7LY7_o.png"></p> 
 <p style="text-align:justify;"><strong>创建新的设计工程</strong></p> 
 <p style="text-align:justify;">第一步：启动Vivado集成开发环境。</p> 
 <p style="text-align:justify;">第二步：在“Vivado2018”主界面下，选择“Create New Project”选项，弹出“New Project-Createa New Vivado Project”对话框。</p> 
 <p style="text-align:justify;">第三步：单击【Next】按钮，弹出“New Project”对话框。按照实际进行设置即可。</p> 
 <p style="text-align:justify;">第四步：单击【Next】按钮，弹出“New Project-Project Type”对话框。在该对话框中，按如下参数进行设置。</p> 
 <p style="text-align:justify;">(1)选中“RTL Project”前面的复选框。</p> 
 <p style="text-align:justify;">(2)其他按默认设置。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/39/97/goYvp9A8_o.png"></p> 
 <p style="text-align:justify;">第五步：单击【Next】按钮，弹出“New Project-Add Sources“对话框。在该对话框中，单击【Add Files...】按钮，弹出“Add Source Files”对话框。在该对话框中，定位到gate.edf文件。可以看到在“Add Sources”对话框中添加了gate.v文件，并且注意下面的设置。</p> 
 <p style="text-align:justify;">(1)在该对话框中，选中“Copy sources into project”前面的复选框。</p> 
 <p style="text-align:justify;">(2)Target language：Verilog。</p> 
 <p style="text-align:justify;">(3)Simulator language：Verilog。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/92/87/bZKYrUFa_o.png"></p> 
 <p style="text-align:justify;">第六步：单击【Next】按钮，弹出“New Project-Add Constraints(optional)”对话框。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/53/38/akXf044X_o.png"></p> 
 <p style="text-align:justify;">第七步：单击【NEXT】按钮，弹出对话框中，选择器件</p> 
 <p style="text-align:justify;">第八步：单击【Next】按钮，弹出“New Project-New Project Summary”对话框。</p> 
 <p style="text-align:justify;">第九步：单击【Finish】按钮。</p> 
 <p style="text-align:justify;">至此，完成新工程的创建。</p> 
 <p style="text-align:justify;"><strong>设置定制IP的库名和目录</strong></p> 
 <p style="text-align:justify;">第一步：在Vivado当前工程主界面左侧的“Flow Navigator”窗口中找到并展开“PROJECT MANAGER”选项。在展开项中，选择“Settings”选项。</p> 
 <p style="text-align:justify;">第二步：弹出“Settings”对话框。在该对话框左侧的窗口中，找到并展开“IP”选项。在展开项中，找到并选择“Packager”选项。在对话框右侧的窗口中，按如下参数进行设置。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/7f/87/vLmvickz_o.png"></p> 
 <p style="text-align:justify;">第三步：单击【OK】按钮，退出“Settings”对话框。</p> 
 <p style="text-align:justify;"><strong>封装定制IP的实现</strong></p> 
 <p style="text-align:justify;">封装IP的步骤如下所示。</p> 
 <p style="text-align:justify;">第一步：在Vivado当前工程主界面的主菜单下，执行菜单命令【Tools】-【Createand IP Package...】；</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/1f/00/1yfVF5I3_o.png"></p> 
 <p style="text-align:justify;">第二步：弹出“Create and Package New IP”对话框。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/f2/62/VGeDZsdg_o.png"></p> 
 <p style="text-align:justify;">第三步：单击【Next】按钮。</p> 
 <p style="text-align:justify;">第四步：弹出“Create and Package New IP-Create Peripheral，Package IP or Packagea Block Design”对话框。在该对话框中，选中“Package your current project”前面的复选框。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/f9/d7/8OOckQZ7_o.png"></p> 
 <p style="text-align:justify;">第五步：单击【Next】按钮，弹出“Create and Package New IP-Package Your Current Project”对话框。在该对话框中，按默认参数设置；</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/0c/f9/iFuNo5M4_o.png"></p> 
 <p style="text-align:justify;">第六步：单击【Next】按钮，弹出“Create and Package New IP-New IP Creation”对话框。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/d9/e7/t4BNYSdF_o.png"></p> 
 <p style="text-align:justify;">第七步：单击【Finish】按钮，弹出“Package IP”提示对话框。</p> 
 <p style="text-align:justify;">第八步：单击【OK】按钮，在Vivado右侧窗口中，出现配置IP参数的界面。如图所示，给出了“Identification”参数配置对话框。在该对话框中，按如下参数进行设置。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/41/ff/TsolpWg8_o.png"></p> 
 <p style="text-align:justify;">(1)Library:userdefme(与前面声明的库名称一致）。</p> 
 <p style="text-align:justify;">(2)Name：gate</p> 
 <p style="text-align:justify;">(3)Verison:1.0</p> 
 <p style="text-align:justify;">(3)Display name：gate_v1_0</p> 
 <p style="text-align:justify;">(4)Description: 2 input multi_gate with same DELAY configuration parameter</p> 
 <p style="text-align:justify;">(5)Vendor display name：GPNT</p> 
 <p style="text-align:justify;">(6)Companyurl：空着即可</p> 
 <p style="text-align:justify;">(7)其他按默认参数设置。</p> 
 <p style="text-align:justify;">第九步：选择“Compatibility”选项。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/e2/0a/uuk3xSUJ_o.png"></p> 
 <p style="text-align:justify;">第十步：弹出如图所示的“Compatibility”参数配置对话框，该配置对话框用于确认该IP所支持的FPGA的类型</p> 
 <p style="text-align:justify;">第十一步：单击“File Groups”选项，弹出如图所示的“File Groups”参数配置对话框</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/31/28/QorkIi7b_o.png"></p> 
 <p style="text-align:justify;">在该对话框中，设计者可以添加一些额外的文件，如测试平台文件。</p> 
 <p style="text-align:justify;">第十二步：单击 “Customization Parameters”选项。</p> 
 <p style="text-align:justify;">看到此时的界面为空的，并没有像前面封装包含源文件IP的时候出现“DELAY”参数，这是因为“DELAY”参数对于Verilog HDL而言是行为级描述，在综合的时候不起任何作用。所以，在对设计综合后，读者看不到“DELAY”参数。</p> 
 <p style="text-align:justify;">第十三步：单击“Customization GUI”选项，弹出如图所示的“Customization GUI”对话框。该对话框给出了输入/输出端口，以及带有默认值的参数选项。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/1e/0d/BMnbdgoH_o.png"></p> 
 <p style="text-align:justify;">第十四步：选择 “Review and Package”选项，弹出“Review and Package”对话框，在该对话框中单击【Package IP】按钮，如图所示。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/0d/ac/z3Re6fyA_o.png"></p> 
 <p style="text-align:justify;">第十八步：弹出“Package IP”对话框，提不“Finished packaging ‘gate_v_l_0’successfully”消息，提示封装IP成功。</p> 
 <p style="text-align:justify;"><img alt="" src="https://images2.imgbox.com/c0/5e/RVEqzRsi_o.png"></p> 
 <p style="text-align:justify;">第十九步：单击【OK】按钮。</p> 
 <p style="text-align:justify;">第二十步：在Vivado当前工程主界面的主菜单下，执行菜单命令【File】-【Close Project】，关闭当前的工程。</p> 
 <p style="text-align:justify;"><strong>调用并验证不包含源文件的IP 设计</strong></p> 
 <p style="text-align:justify;">调用和使用完全和之前的章节一样，这里就不再赘述。</p> 
 <pre class="has"><code class="language-php">看完本文有收获？请转发分享给更多人ＮＯＷ现在行动！
推荐阅读
【Vivado那些事】如何查找官网例程及如何使用官网例程【Vivado使用误区与进阶】总结篇【Vivado那些事】Vivado下头文件使用注意事项【Vivado那些事】Vivado中常用的快捷键（一）F4键【Vivado那些事】Vivado中常用的快捷键（二）其他常用快捷键
HDL Designer Series(HDS)介绍
SystemVerilog数字系统设计_夏宇闻 PDF
Verilog 里面，always，assign和always@(*)区别
FPGA上如何求32个输入的最大值和次大值：分治一文读懂TCP/IP！《RISC-V on T-Core》学习笔记新年愿望是什么？先送大家一波开发软件谈谈FPGA（入门）学习的两种方式ZYNQ-迷恋ZYNQ-FPGA开发板资源分享
零基础入门FPGA，如何学习？
点击上方字体即可跳转阅读哟
点个在看你最好看
</code></pre> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b6820ea7caf0332032fe4819122b4760/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Docker基础介绍</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e3587033e30648a8cc938e63deb0d95/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">联发科有没有高端处理器_联发科再次发力，天玑820官宣数据惊人，或成中高端最强处理器...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>