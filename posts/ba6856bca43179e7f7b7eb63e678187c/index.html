<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>洛谷 P1064 金明的预算方案 题解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="洛谷 P1064 金明的预算方案 题解" />
<meta property="og:description" content="洛谷 P1064 金明的预算方案 题解 洛谷 P1064
金明的预算方案
金明今天很开心，家里购置的新房就要领钥匙了，新房里有一间金明自己专用的很宽敞的房间。更让他高兴的是，妈妈昨天对他说：“你的房间需要购买哪些物品，怎么布置，你说了算，只要不超过N元钱就行”。今天一早，金明就开始做预算了，他把想买的物品分为两类：主件与附件，附件是从属于某个主件的，下表就是一些主件与附件的例子：
主件附件电脑打印机，扫描仪书柜图书书桌台灯，文具工作椅无 如果要买归类为附件的物品，必须先买该附件所属的主件。每个主件可以有0个、1个或2个附件。附件不再有从属于自己的附件。金明想买的东西很多，肯定会超过妈妈限定的N元。于是，他把每件物品规定了一个重要度，分为555等：用整数1−5表示，第5等最重要。他还从因特网上查到了每件物品的价格（都是10元的整数倍）。他希望在不超过N元（可以等于N元）的前提下，使每件物品的价格与重要度的乘积的总和最大。
请你帮助金明设计一个满足要求的购物单。
输入格式
第1行，为两个正整数，用一个空格隔开：
N，m （其中N(&lt;32000)表示总钱数，m(&lt;60)为希望购买物品的个数。） 从第2行到第m&#43;1行，第jjj行给出了编号为j−1的物品的基本数据，每行有3个非负整数v、p、q（其中v表示该物品的价格（v&lt;10000），p表示该物品的重（1−5），q表示该物品是主件还是附件。如果q=0，表示该物品为主件，如果q&gt;0，表示该物品为附件，q是所属主件的编号）
输出格式
一个正整数，为不超过总钱数的物品的价格与重要度乘积的总和的最大值（&lt;200000）。
输入输出样例
输入 #1
1000 5
800 2 0
400 5 1
300 5 1
400 3 0
500 2 0
输出 #1
2200
说明/提示
NOIP 2006 提高组 第二题
题目解释 这题就是一道经典的01背包，求最大的价值。只不过情况有点多
1.不选
2.只选主件
3.选主件&amp;1号附件
4.选主件&amp;2号附件
5.选主件&amp;所有附件
能不能选在于空间大小的判断啦。
预处理 2个一维数组，存储主件的质量（w），主件的价值（q）;
2个结构体，分别存储1、2号附件的质量与价值。
不会结构体的蒟蒻，6个一维数组也可以，我就是刚学，练练手
for (int i=1;i&lt;=n;i&#43;&#43;) { scanf(&#34;%d%d%d&#34;,&amp;x,&amp;y,&amp;z); if (z!=0) { if (v1[z].w==0) { v1[z]." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ba6856bca43179e7f7b7eb63e678187c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-15T17:12:36+08:00" />
<meta property="article:modified_time" content="2019-09-15T17:12:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">洛谷 P1064 金明的预算方案 题解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_P1064___0"></a>洛谷 P1064 金明的预算方案 题解</h2> 
<p><a href="https://www.luogu.com.cn/problem/P1064" rel="nofollow">洛谷 P1064</a><br> <strong>金明的预算方案</strong></p> 
<p>金明今天很开心，家里购置的新房就要领钥匙了，新房里有一间金明自己专用的很宽敞的房间。更让他高兴的是，妈妈昨天对他说：“你的房间需要购买哪些物品，怎么布置，你说了算，只要不超过N元钱就行”。今天一早，金明就开始做预算了，他把想买的物品分为两类：主件与附件，附件是从属于某个主件的，下表就是一些主件与附件的例子：</p> 
<table><thead><tr><th>主件</th><th>附件</th></tr></thead><tbody><tr><td>电脑</td><td>打印机，扫描仪</td></tr><tr><td>书柜</td><td>图书</td></tr><tr><td>书桌</td><td>台灯，文具</td></tr><tr><td>工作椅</td><td>无</td></tr></tbody></table> 
<p>如果要买归类为附件的物品，必须先买该附件所属的主件。每个主件可以有0个、1个或2个附件。附件不再有从属于自己的附件。金明想买的东西很多，肯定会超过妈妈限定的N元。于是，他把每件物品规定了一个重要度，分为555等：用整数1−5表示，第5等最重要。他还从因特网上查到了每件物品的价格（都是10元的整数倍）。他希望在不超过N元（可以等于N元）的前提下，使每件物品的价格与重要度的乘积的总和最大。</p> 
<p>请你帮助金明设计一个满足要求的购物单。</p> 
<p><strong>输入格式</strong></p> 
<p>第1行，为两个正整数，用一个空格隔开：</p> 
<p>N，m （其中N(&lt;32000)表示总钱数，m(&lt;60)为希望购买物品的个数。） 从第2行到第m+1行，第jjj行给出了编号为j−1的物品的基本数据，每行有3个非负整数v、p、q（其中v表示该物品的价格（v&lt;10000），p表示该物品的重（1−5），q表示该物品是主件还是附件。如果q=0，表示该物品为主件，如果q&gt;0，表示该物品为附件，q是所属主件的编号）</p> 
<p><strong>输出格式</strong></p> 
<p>一个正整数，为不超过总钱数的物品的价格与重要度乘积的总和的最大值（&lt;200000）。</p> 
<p><strong>输入输出样例</strong><br> 输入 #1</p> 
<p>1000 5<br> 800 2 0<br> 400 5 1<br> 300 5 1<br> 400 3 0<br> 500 2 0</p> 
<p>输出 #1</p> 
<p>2200</p> 
<p><strong>说明/提示</strong></p> 
<p>NOIP 2006 提高组 第二题</p> 
<h4><a id="_44"></a>题目解释</h4> 
<p>这题就是一道经典的01背包，求最大的价值。<s>只不过情况有点多</s><br> 1.不选<br> 2.只选主件<br> 3.选主件&amp;1号附件<br> 4.选主件&amp;2号附件<br> 5.选主件&amp;所有附件<br> 能不能选在于空间大小的判断啦。</p> 
<h4><a id="_53"></a>预处理</h4> 
<p>2个一维数组，存储主件的质量（w），主件的价值（q）;<br> 2个结构体，分别存储1、2号附件的质量与价值。<br> <s>不会结构体的蒟蒻，6个一维数组也可以，我就是刚学，练练手</s></p> 
<pre><code>for (int i=1;i&lt;=n;i++)
	{
	    scanf("%d%d%d",&amp;x,&amp;y,&amp;z);
	    if (z!=0)
	    {
	    	if (v1[z].w==0) 
	    	{
			   v1[z].w=x;
			   v1[z].q=y;
		    }
	    	   else {
	    	            v2[z].w=x;
	    	            v2[z].q=y;
	    	        }      
	    } 
	    else {
	             w[i]=x;
	             q[i]=y;
	         }
	}
</code></pre> 
<h4><a id="_81"></a>动态转移方程</h4> 
<pre><code>f[j]=max(f[j],f[j-w[i]]+w[i]*q[i]);
if (j-w[i]-v1[i].w&gt;=0) 
   f[j]=max(f[j],f[j-w[i]-v1[i].w]+v1[i].w*v1[i].q+w[i]*q[i]);
if (j-w[i]-v2[i].w&gt;=0) 
  f[j]=max(f[j],f[j-w[i]-v2[i].w]+v2[i].w*v2[i].q+w[i]*q[i]); 
if (j-w[i]-v1[i].w-v2[i].w&gt;=0) 
   f[j]=max(f[j],f[j-w[i]-v1[i].w-v2[i].w]+v1[i].w*v1[i].q+w[i]*q[i]+v2[i].w*v2[i].q);
</code></pre> 
<p>f 数组表示 j 的空间大小最大的价值。</p> 
<h4><a id="AC_93"></a>AC代码</h4> 
<pre><code class="prism language-bash"><span class="token operator">&gt;</span> <span class="token comment">#include&lt;iostream&gt;</span>
<span class="token comment">#include&lt;cstdio&gt;</span>
using namespace std<span class="token punctuation">;</span>
int n,m,x,y,z,len<span class="token punctuation">;</span>
int w<span class="token punctuation">[</span>70<span class="token punctuation">]</span>,q<span class="token punctuation">[</span>70<span class="token punctuation">]</span>,f<span class="token punctuation">[</span>100010<span class="token punctuation">]</span><span class="token punctuation">;</span>
struct 
<span class="token punctuation">{<!-- --></span>
	int w,q<span class="token punctuation">;</span>
<span class="token punctuation">}</span>v1<span class="token punctuation">[</span>70<span class="token punctuation">]</span>,v2<span class="token punctuation">[</span>70<span class="token punctuation">]</span><span class="token punctuation">;</span>
int main<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	scanf<span class="token punctuation">(</span><span class="token string">"%d%d"</span>,<span class="token operator">&amp;</span>m,<span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>int i<span class="token operator">=</span>1<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i++<span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
	    scanf<span class="token punctuation">(</span><span class="token string">"%d%d%d"</span>,<span class="token operator">&amp;</span>x,<span class="token operator">&amp;</span>y,<span class="token operator">&amp;</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span>z<span class="token operator">!=</span>0<span class="token punctuation">)</span>
	    <span class="token punctuation">{<!-- --></span>
	    	<span class="token keyword">if</span> <span class="token punctuation">(</span>v1<span class="token punctuation">[</span>z<span class="token punctuation">]</span>.w<span class="token operator">==</span>0<span class="token punctuation">)</span> 
	    	<span class="token punctuation">{<!-- --></span>
			   v1<span class="token punctuation">[</span>z<span class="token punctuation">]</span>.w<span class="token operator">=</span>x<span class="token punctuation">;</span>
			   v1<span class="token punctuation">[</span>z<span class="token punctuation">]</span>.q<span class="token operator">=</span>y<span class="token punctuation">;</span>    **//   1号附件的结构体**
		    <span class="token punctuation">}</span>
	    	   <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
	    	            v2<span class="token punctuation">[</span>z<span class="token punctuation">]</span>.w<span class="token operator">=</span>x<span class="token punctuation">;</span>
	    	            v2<span class="token punctuation">[</span>z<span class="token punctuation">]</span>.q<span class="token operator">=</span>y<span class="token punctuation">;</span>    //     2号附件的结构体
	    	        <span class="token punctuation">}</span>      
	    <span class="token punctuation">}</span> 
	    <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
	             w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>x<span class="token punctuation">;</span>
	             q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">=</span>y<span class="token punctuation">;</span>  //   **如果是主件，存进w与q数组**
	         <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>int i<span class="token operator">=</span>1<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span>i++<span class="token punctuation">)</span>
	    <span class="token keyword">for</span> <span class="token punctuation">(</span>int j<span class="token operator">=</span>m<span class="token punctuation">;</span>j<span class="token operator">&gt;=</span>w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>j--<span class="token punctuation">)</span>
	    <span class="token punctuation">{<!-- --></span>
	    	f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>max<span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span>,f<span class="token punctuation">[</span>j-w<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span>+w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>*q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  **//初值，只选主件**
	    	<span class="token keyword">if</span> <span class="token punctuation">(</span>j-w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>-v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w<span class="token operator">&gt;=</span>0<span class="token punctuation">)</span> 
			   f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>max<span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span>,f<span class="token punctuation">[</span>j-w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>-v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w<span class="token punctuation">]</span>+v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w*v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.q+w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>*q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   **//   如果空间容许，主+1附**
	    	<span class="token keyword">if</span> <span class="token punctuation">(</span>j-w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>-v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w<span class="token operator">&gt;=</span>0<span class="token punctuation">)</span> 
			   f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>max<span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span>,f<span class="token punctuation">[</span>j-w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>-v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w<span class="token punctuation">]</span>+v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w*v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.q+w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>*q<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   **//   如果空间容许，主+2附**
			<span class="token keyword">if</span> <span class="token punctuation">(</span>j-w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>-v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w-v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w<span class="token operator">&gt;=</span>0<span class="token punctuation">)</span> 
			   f<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">=</span>max<span class="token punctuation">(</span>f<span class="token punctuation">[</span>j<span class="token punctuation">]</span>,f<span class="token punctuation">[</span>j-w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>-v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w-v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w<span class="token punctuation">]</span>+v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w*v1<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.q+w<span class="token punctuation">[</span>i<span class="token punctuation">]</span>*q<span class="token punctuation">[</span>i<span class="token punctuation">]</span>+v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.w*v2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>.q<span class="token punctuation">)</span><span class="token punctuation">;</span>  **//   如果空间容许，主+1附+2附**
	    <span class="token punctuation">}</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span>int i<span class="token operator">=</span>1<span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>m<span class="token punctuation">;</span>i++<span class="token punctuation">)</span>    
	    f<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token operator">=</span>max<span class="token punctuation">(</span>f<span class="token punctuation">[</span>0<span class="token punctuation">]</span>,f<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  **//  我也不知道为什么要加，反正加了，就过了**
	cout<span class="token operator">&lt;&lt;</span>f<span class="token punctuation">[</span>0<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cd469a08c273a29bacc587327317190e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac 指定PHP版本为MAMP版本</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9cf22b7ad570327ab090ef76bc9b6420/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MAMP Pro 安装Swoole日志</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>