<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>入门：如何搭建一个简单的静态网站，apache服务器，https，SSL(TLS)握手过程和发送包的内容 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="入门：如何搭建一个简单的静态网站，apache服务器，https，SSL(TLS)握手过程和发送包的内容" />
<meta property="og:description" content="目录
1.安装httpd，并将访问apache服务器的首页修改为hello.html, 且内容为: &#34;My Home Page is hello&#34;
2.虚拟主机：虚拟两台主机ip为100,200, 对应访问目录：/www/ip/100, /www/ip/200并创建首页文件index.html 3.配置不同端口的虚拟主机访问apache服务器
1.安装httpd，并将访问apache服务器的首页修改为hello.html, 且内容为: &#34;My Home Page is hello&#34; 我们定义的静态页面在/var/www/html目录中，静态网页的名字必须是index.html，这个文件存放在/var/www/html目录下，在访问页面时默认打开这个目录中的index.html文件。
[root@localhost ~]# yum install httpd -y
[root@localhost ~]# systemctl status firewalld #查看防火墙状态
[root@localhostr ~]# systemctl stop firewalld # 关闭防火墙
[root@localhost conf]# cd /var/www/html
[root@localhost html]# vim hello.html [root@localhost html]# systemctl restart httpd
我们还得将首页文件名改为index.html，然后重启httpd服务，就可以在服务器中访问到了。
[root@localhost conf]# cd /var/www/html
[root@localhost html]# mv hello.html index.html
[root@localhost html]# systemctl restart httpd
2.虚拟主机：虚拟两台主机ip为100,200, 对应访问目录：/www/ip/100, /www/ip/200并创建首页文件index." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4faa950658e3fabc16818af9de4bc251/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-04T11:13:19+08:00" />
<meta property="article:modified_time" content="2022-08-04T11:13:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">入门：如何搭建一个简单的静态网站，apache服务器，https，SSL(TLS)握手过程和发送包的内容</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1.%E5%AE%89%E8%A3%85httpd%EF%BC%8C%E5%B9%B6%E5%B0%86%E8%AE%BF%E9%97%AEapache%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%A6%96%E9%A1%B5%E4%BF%AE%E6%94%B9%E4%B8%BAhello.html%2C%20%E4%B8%94%E5%86%85%E5%AE%B9%E4%B8%BA%3A%20%22My%20Home%20Page%20is%20hello%22-toc" style="margin-left:0px;"><a href="#1.%E5%AE%89%E8%A3%85httpd%EF%BC%8C%E5%B9%B6%E5%B0%86%E8%AE%BF%E9%97%AEapache%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E9%A6%96%E9%A1%B5%E4%BF%AE%E6%94%B9%E4%B8%BAhello.html%2C%20%E4%B8%94%E5%86%85%E5%AE%B9%E4%B8%BA%3A%20%22My%20Home%20Page%20is%20hello%22" rel="nofollow">1.安装httpd，并将访问apache服务器的首页修改为hello.html, 且内容为: "My Home Page is hello"</a></p> 
<p id="2.%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%EF%BC%9A%E8%99%9A%E6%8B%9F%E4%B8%A4%E5%8F%B0%E4%B8%BB%E6%9C%BAip%E4%B8%BA100%2C200%2C%20%E5%AF%B9%E5%BA%94%E8%AE%BF%E9%97%AE%E7%9B%AE%E5%BD%95%EF%BC%9A%2Fwww%2Fip%2F100%2C%20%2Fwww%2Fip%2F200%E5%B9%B6%E5%88%9B%E5%BB%BA%E9%A6%96%E9%A1%B5%E6%96%87%E4%BB%B6index.html%C2%A0-toc" style="margin-left:0px;"><a href="#2.%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%EF%BC%9A%E8%99%9A%E6%8B%9F%E4%B8%A4%E5%8F%B0%E4%B8%BB%E6%9C%BAip%E4%B8%BA100%2C200%2C%20%E5%AF%B9%E5%BA%94%E8%AE%BF%E9%97%AE%E7%9B%AE%E5%BD%95%EF%BC%9A%2Fwww%2Fip%2F100%2C%20%2Fwww%2Fip%2F200%E5%B9%B6%E5%88%9B%E5%BB%BA%E9%A6%96%E9%A1%B5%E6%96%87%E4%BB%B6index.html%C2%A0" rel="nofollow">2.虚拟主机：虚拟两台主机ip为100,200, 对应访问目录：/www/ip/100, /www/ip/200并创建首页文件index.html </a></p> 
<p id="3.%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AEapache%E6%9C%8D%E5%8A%A1%E5%99%A8-toc" style="margin-left:0px;"><a href="#3.%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AEapache%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">3.配置不同端口的虚拟主机访问apache服务器</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2>1.安装httpd，并将访问apache服务器的首页修改为hello.html, 且内容为: "My Home Page is hello"</h2> 
<p>我们定义的静态页面在/var/www/html目录中，静态网页的名字必须是index.html，这个文件存放在/var/www/html目录下，在访问页面时默认打开这个目录中的index.html文件。</p> 
<blockquote> 
 <p>[root@localhost ~]# yum install httpd -y</p> 
 <p>[root@localhost ~]# systemctl status firewalld       #查看防火墙状态<br> [root@localhostr ~]# systemctl stop firewalld         # 关闭防火墙</p> 
 <p>[root@localhost conf]# cd /var/www/html</p> 
 <p>[root@localhost html]# vim hello.html </p> 
</blockquote> 
<p><img alt="" height="147" src="https://images2.imgbox.com/fe/f4/kBZAAotx_o.png" width="367"></p> 
<blockquote> 
 <p> [root@localhost html]# systemctl restart httpd</p> 
</blockquote> 
<p>我们还得将首页文件名改为index.html，然后重启httpd服务，就可以在服务器中访问到了。</p> 
<blockquote> 
 <p>[root@localhost conf]# cd /var/www/html<br> [root@localhost html]# mv hello.html index.html<br> [root@localhost html]# systemctl restart httpd</p> 
</blockquote> 
<p><img alt="" height="111" src="https://images2.imgbox.com/73/f1/an2YSgo1_o.png" width="446"></p> 
<h2 id="2.%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%EF%BC%9A%E8%99%9A%E6%8B%9F%E4%B8%A4%E5%8F%B0%E4%B8%BB%E6%9C%BAip%E4%B8%BA100%2C200%2C%20%E5%AF%B9%E5%BA%94%E8%AE%BF%E9%97%AE%E7%9B%AE%E5%BD%95%EF%BC%9A%2Fwww%2Fip%2F100%2C%20%2Fwww%2Fip%2F200%E5%B9%B6%E5%88%9B%E5%BB%BA%E9%A6%96%E9%A1%B5%E6%96%87%E4%BB%B6index.html%C2%A0">2.虚拟主机：虚拟两台主机ip为100,200, 对应访问目录：/www/ip/100, /www/ip/200并创建首页文件index.html </h2> 
<p>当我们不想修改主配置文件(/etc/httpd/conf/httpd.conf)的时候，也可以将需要配置的内容单独放在.conf的文件中。首先我们在/etc/httpd/conf.d下创建一个myhosts.conf的文件，只有以.conf结尾的文件才会被加载，conf.d这个目录中的文件最终都会被读入主文件中，也就是conf下的httpd.conf中。</p> 
<blockquote> 
 <p>[root@localhost ~]# nmcli -c modify ens160 +ipv4.addresses 192.168.30.100/24<br> [root@localhost ~]# nmcli -c modify ens160 +ipv4.addresses 192.168.30.200/24</p> 
 <p>[root@localhost ~]# nmcli -c up ens160</p> 
 <p>[root@localhost~]# mkdir /www/ip/{100,200}</p> 
 <p>[root@localhost ~]# echo "This is page for 100" &gt; /www/ip/100/index.html<br> [root@localhost ~]# echo "This is page for 200" &gt; /www/ip/200/index.html<br> [root@localhost conf.d]# vim myhosts.conf </p> 
</blockquote> 
<p><img alt="" height="377" src="https://images2.imgbox.com/d6/f0/HXBvAg5e_o.jpg" width="962"></p> 
<blockquote> 
 <p> [root@localhost conf.d]# systemctl restart httpd </p> 
</blockquote> 
<h2 id="3.%E9%85%8D%E7%BD%AE%E4%B8%8D%E5%90%8C%E7%AB%AF%E5%8F%A3%E7%9A%84%E8%99%9A%E6%8B%9F%E4%B8%BB%E6%9C%BA%E8%AE%BF%E9%97%AEapache%E6%9C%8D%E5%8A%A1%E5%99%A8">3.配置不同端口的虚拟主机访问apache服务器</h2> 
<p>http默认监听80端口，如果我们想通过9090和9091端口去访问服务器，就必须在.conf文件中配置监听9090和9091端口，然后给目录设置权限，再设置服务器默认打开的目录（DocumentRoot）。</p> 
<blockquote> 
 <p>[root@server conf.d]# mkdir /www/port/{9090,9091} -p<br> [root@server conf.d]# echo 'this is 9090' &gt; /www/port/9090/index.html<br> [root@server conf.d]# echo 'this is 9091' &gt; /www/port/9091/index.html</p> 
</blockquote> 
<p><img alt="" height="377" src="https://images2.imgbox.com/30/73/FX0nqxDi_o.jpg" width="962"></p> 
<blockquote> 
 <p>[root@server conf.d]# systemctl restart httpd </p> 
</blockquote> 
<p>因为http默认端口是80端口，而我们想要通过9090或者9091端口访问，就得在IP后加上端口去访问我们的配置文件。 </p> 
<h2>4.可选：SSL握手协议发送哪些包，分几个阶段</h2> 
<p>超文本传输协议HTTP协议被用于在Web浏览器和网站服务器之间传递信息。HTTP协议以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了Web浏览器和网站服务器之间的传输报文，就可以直接读懂其中的信息，因此HTTP协议不适合传输一些敏感信息，比如信用卡号、密码等。为了解决HTTP协议的这一缺陷，需要使用另一种协议：安全套接字层超文本传输协议HTTPS。</p> 
<p>HTTPS（全称：Hyper Text Transfer Protocol over Secure Socket Layer 或 Hypertext Transfer Protocol Secure，超文本传输安全协议），是以安全为目标的HTTP通道。HTTPS并不是一个新协议，而是HTTP+SSL（TLS）。原本HTTP先和TCP（假定传输层是TCP协议）直接通信，而加了SSL后，就变成HTTP先和SSL通信，再由SSL和TCP通信，相当于SSL被嵌在了HTTP和TCP之间。</p> 
<p>SSL 是“Secure Sockets Layer”的缩写，中文叫做“安全套接层”。它是在上世纪90年代中期，由网景公司设计的。到了1999年，SSL 应用广泛，已经成为互联网上的事实标准。IETF 就把SSL 标准化。标准化之后SSL被改为 TLS（Transport Layer Security传输层安全协议）。</p> 
<p><strong>SSL协议分为两层：</strong></p> 
<p>SSL记录协议 （SSL Record Protocol）：它建立在可靠的传输协议（如TCP）之上，为高层协议提供数据封装、压缩、加密等基本功能。<br> SSL握手协议（SSL Handshake Protocol）：它建立在SSL记录协议之上，用于在实际的数据传输开始前，通讯双方进行身份认证、协商加密算法、交换加密密钥等。<br> SSL协议提供的服务：</p> 
<p>1）认证用户和服务器，确保数据发送到正确的客户机和服务器</p> 
<p>2）加密数据以防止数据中途被窃取</p> 
<p>3）维护数据的完整性，确保数据在传输过程中不被改变。</p> 
<p><strong>SSL协议握手过程：</strong></p> 
<p><strong>第一次握手：</strong></p> 
<p>客户端向服务端发送Client Hello报文，该报文中包含了支持的SSL(TLS)版本信息、加密组件(加密算法和秘钥长度等)等。</p> 
<p><strong>第二次握手：</strong></p> 
<p>服务器向客户端发送三个报文。服务端收到请求后，如果支持SSL通信，会首先以Server Hello报文进行应答，报文内容主要是SSL版本信息和加密组件等。加密组件是从接收到的客户端加密组件中筛选出来的。</p> 
<p>然后发送第Certificate报文，包含公钥证书</p> 
<p>最后发送ServerHelloDone报文，告知客户端握手协议初始化完成</p> 
<p><strong>第三次握手：</strong></p> 
<p>客户端发送Client Key Exchange报文给服务器回应。报文中是一串被加密过后的字符串。</p> 
<p>然后客户端会发送Change Cipher Spec报文，该报文的作用是提示服务端，接下来的通信都会采用这个随机数加密</p> 
<p>最后会发送Finish报文，包含连接至此的整体校验值，握手协议能否成功，是以这个报文为判断标准</p> 
<p><strong>第四次握手：</strong></p> 
<p>服务器同样发送Change Cipher Spec报文和Finish报文 </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f5d6af0d4d68f67abd5f26eadd081547/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【云原生之k8s】kubeadm搭建k8s集群</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6639f00a4135cd0eb9ec4158d1d4f316/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">查找字符串</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>