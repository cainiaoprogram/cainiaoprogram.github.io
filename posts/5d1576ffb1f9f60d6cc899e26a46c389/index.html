<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MYSQL学习笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MYSQL学习笔记" />
<meta property="og:description" content="​
MySQL 1.1为什么要学数据库 1、被迫需求：存数据
2、数据库是所有软件体系中最核心的存在
1.2 什么是数据库 1、 数据库（DBDataBase)
概念：数据仓库，软件，安装在操作系统上，能存500万数据
作用：存贮数据，管理数据
1.3 数据库分类 关系型数据库： MySQL,Oracle,sqlServer,DB2,SQLite
通过表和表之间，行和行之间的关系进行数据的存储
非关系型数据库： Redis,MongDB
以对象存储 ，通过对象的属性来就 决定
1.4 DBMS数据库（数据库管理系统） 数据库的管理软件，科学有效的管理我们的数据。维护和获取数据；
MySQL,数据库管理系统
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-hNGqRKsZ-1672974931995)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20211119192043588.png)]
1.5 MySQL简介 MySQL是一个关系型数据库管理系统
MySQL是一个精巧的SQL数据库管理系统，而且是开源的数据管理系统。由于它的强大功能、灵活性、丰富的应用编程接口（API）以及精巧的系统结构。
MySQL是一个真正的多用户、多线程SQL数据库服务器
MySQL 主要目标是快速、健壮和易用
1.6 连接数据库 命令行链接
mysql -uroot -proot 连接数据库
update mysql.user set authentication_string=password(&#39;root&#39;) where user=&#39;root&#39; and Host =&#39;localhost&#39;; --修改用户密码
flush privileges; —刷新权限
所有的语句都使用；结尾
show databases; --查看所有数据库
mysql&gt; use school --切换数据库
Database changed
show tables; --查看数据库中所有的表
describe student；–显示数据库中所有表的信息
create database westos;–创建一个数据库" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5d1576ffb1f9f60d6cc899e26a46c389/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-06T11:18:08+08:00" />
<meta property="article:modified_time" content="2023-01-06T11:18:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MYSQL学习笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>​</p> 
<h2><a id="MySQL_2"></a>MySQL</h2> 
<h3><a id="11_4"></a>1.1为什么要学数据库</h3> 
<p>1、被迫需求：存数据</p> 
<p>2、数据库是所有软件体系中最核心的存在</p> 
<h3><a id="12__10"></a>1.2 什么是数据库</h3> 
<p>1、 数据库（DBDataBase)</p> 
<p>概念：数据仓库，软件，安装在操作系统上，能存500万数据</p> 
<p>作用：存贮数据，管理数据</p> 
<h3><a id="13___18"></a>1.3 数据库分类</h3> 
<h4><a id="_20"></a>关系型数据库：</h4> 
<p>MySQL,Oracle,sqlServer,DB2,SQLite</p> 
<p>通过表和表之间，行和行之间的关系进行数据的存储</p> 
<h4><a id="_26"></a>非关系型数据库：</h4> 
<p>Redis,MongDB</p> 
<p>以对象存储 ，通过对象的属性来就 决定</p> 
<h3><a id="14_DBMS_32"></a>1.4 DBMS数据库（数据库管理系统）</h3> 
<p>数据库的管理软件，科学有效的管理我们的数据。维护和获取数据；</p> 
<p>MySQL,数据库管理系统</p> 
<h3><a id="_38"></a></h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-hNGqRKsZ-1672974931995)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20211119192043588.png)]</p> 
<h3><a id="15_MySQL_42"></a>1.5 MySQL简介</h3> 
<p>MySQL是一个关系型数据库管理系统</p> 
<p>MySQL是一个精巧的<a href="https://baike.baidu.com/item/SQL%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">SQL数据库</a>管理系统，而且是开源的数据管理系统。由于它的强大功能、灵活性、丰富的应用编程接口（API）以及精巧的系统结构。</p> 
<p>MySQL是一个真正的多用户、多线程SQL<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8" rel="nofollow">数据库服务器</a></p> 
<p>MySQL 主要目标是快速、健壮和易用</p> 
<h3><a id="16__52"></a>1.6 连接数据库</h3> 
<p>命令行链接</p> 
<p><code>mysql -uroot -proot</code> 连接数据库</p> 
<p><code>update mysql.user set authentication_string=password('root') where user='root' and Host ='localhost';</code> --修改用户密码</p> 
<p><code>flush privileges;</code> —刷新权限</p> 
<p>所有的语句都使用；结尾</p> 
<p><code>show databases;</code> --查看所有数据库</p> 
<p><code>mysql&gt; use school</code> --切换数据库</p> 
<p><code>Database changed</code></p> 
<p><code>show tables;</code> --查看数据库中所有的表</p> 
<p><code>describe student；</code>–显示数据库中所有表的信息</p> 
<p><code>create database</code> <code>westos;</code>–创建一个数据库</p> 
<p><code>exit;</code> --推出连接</p> 
<p>–单行注释</p> 
<p>/**/多行注释</p> 
<h4><a id="xxx_82"></a>数据库xxx语言</h4> 
<p>DDL 定义</p> 
<p>DML 操作</p> 
<p>DQL 查询</p> 
<p>DCL 控制</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-1VfhgHcq-1672974931997)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221011142424816.png)]</p> 
<h2><a id="2DDL__94"></a>2.DDL 操作数据库</h2> 
<p>操作数据库&gt;操作数据库中的表&gt;操作数据库中表的数据</p> 
<p>mysql中的关键字不区分大小写</p> 
<h3><a id="21__100"></a>2.1 操作数据库</h3> 
<ol><li> <p>创建数据库</p> <pre><code class="prism language-mysql">CREATE DATABASE HOUSE 
</code></pre> </li><li> <p>删除数据库</p> <pre><code class="prism language-mysql"> DROP DATABASE HOUSE 
</code></pre> </li><li> <p>使用数据库</p> </li></ol> 
<pre><code class="prism language-mysql">-- tab键的上面,如果你的表名或者字段名是一个特殊字符，就需要带``
USE `school`
</code></pre> 
<ol start="4"><li> <p>查看数据库</p> <pre><code class="prism language-mysql">show database
</code></pre> </li></ol> 
<p>5.查询当前数据库</p> 
<pre><code class="prism language-mysql">SELECT DATABASE()
</code></pre> 
<h3><a id="2_2__140"></a>2. 2 数据库列类型</h3> 
<ol><li> <p>数值</p> 
  <ul><li>tinyint 十分小的数据 1个字节</li><li>smallint 较小的数据 2个字节</li><li>mediumint 中等大小的数据 3个字节</li><li><strong>int 标准的整数 4个字节常用的</strong></li><li>bigint 较大的数据 8个字节</li><li>float 浮点数 4个字节</li><li>double 浮点数 8个字节(精度问题!)</li><li><strong>decimal 字符串形式的浮点数金融计算的时候，一般是使用decimal</strong></li></ul> </li><li> <p>字符串</p> 
  <ul><li>char 字符串固定大小的0~255</li><li><strong>varchar 可变字符串0~65535 常用的变量String</strong></li><li>tinytext 微型文本2^8-1</li><li>text 文本串 2^16-1 保存大文本</li></ul> </li><li> <p>时间日期</p> 
  <ul><li>java.util.Date</li><li>date YYYY-MM-DD， 日期格式</li><li>time HH: mm: ss 时间格式</li><li><strong>datetime YYYY-MM-DD HH: mm: ss 最常用的时间格式</strong></li><li><strong>timestamp 时间戳，1970.1.1到现在的毫秒数!也较为常用!o</strong></li><li>year年份表示</li></ul> </li><li> <p>null</p> 
  <ul><li>没有值，未知</li><li>注意，不要使用NULL进行运算，结果为NULL</li></ul> </li></ol> 
<h3><a id="23__170"></a>2.3 数据库字段属性（重点）</h3> 
<ol><li><strong>Unsigned</strong></li></ol> 
<ul><li> <p>无符号的整数</p> </li><li> <p>声明了该列不能声明为负数</p> <p>2.**zerofill **</p> </li><li> <p>0填充的</p> </li><li> <p>不足的位数，使用0来填充，int (3) ， 5 — 005</p> <p><strong>3.自增:</strong></p> </li><li> <p>通常理解为自增，自动在上一条记录的基础上＋1(默认)</p> </li><li> <p>通常用来设计唯一的主键~index，必须是整数类型</p> </li><li> <p>可以自定义设计主键自增的起始值和步长</p> <p><strong>4.非空NUll not null</strong></p> </li><li> <p>假设设置为not null ，如果不给它赋值，就会报错!.</p> </li><li> <p>NUII，如果不填写值，默认就是null !</p> <p><strong>5.默认</strong></p> </li><li> <p>设置默认的值!</p> </li><li> <p>sex，默认值为男，如果不指定该列的值，则会有默认的值!</p> </li></ul> 
<p><strong>拓展:听听就好</strong></p> 
<pre><code class="prism language-mysql">/*每一个表，都必须存在以下五个字段!未来做项目用的，表示一个记录存在意义!
id主键
`version`乐观锁
is_delete 伪删除
gmt_create创建时间
gmt_update修改时间
*/
</code></pre> 
<h3><a id="DDL_216"></a>DDL表操作</h3> 
<h4><a id="_218"></a>查询当前数据库所有表</h4> 
<pre><code class="prism language-mysql">SHOW TABLES
</code></pre> 
<h3><a id="24__226"></a>2.4 创建数据库表</h3> 
<pre><code class="prism language-mysql">--标:创建一个school数据库
--创建学生表(列，字段)使用sQL创建
--学号int登录密码varchar (20)姓名,性别varchar(2),出生日期(datatime) ,家庭住址,email                                      
--注意点,使用英文()，表的名称和字段尽量使用`括起来
--AUTO_INCREMENT自增
--字符串使用单引号括起来!
--所有的语句后面加,(英文的)，最后一个不用加PRIMARY KEY主键，一般一个表只有一个唯一的主键!


CREATE TABLE `student` (
 `id` int NOT NULL AUTO_INCREMENT COMMENT '学号',
 `name` varchar(10) NOT NULL DEFAULT '匿名' COMMENT '姓名',
 `pwd` varchar(30) NOT NULL DEFAULT '123456' COMMENT '密码',
 `sex` varchar(2) DEFAULT '男' COMMENT '性别',
 `birthday` datetime DEFAULT NULL COMMENT '出生日期',
 PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
</code></pre> 
<p><strong>格式</strong></p> 
<pre><code>CREATE TABLE [IF NOT EXISTs]`表名`(
`字段名`列类型[属性][索引][注释],
`字段名`列类型〔属性][索引][注释],
`字段名`列类型[属性][索引][注释]
)[表类型][字符集设置][注释]
</code></pre> 
<p><strong>常用命令</strong></p> 
<pre><code class="prism language-mysql">SHOW CREATE DATABASE school --查看创建数据库的语句
SHOW CREATE TABLE student --查看student数据表的定义语句
DESC student --显示表的结构
</code></pre> 
<h3><a id="25__266"></a>2.5 数据库引擎</h3> 
<p>早些年的时候：MYISAM</p> 
<p>现在：INNODB</p> 
<p>​ <strong>区别：</strong></p> 
<table><thead><tr><th align="center"></th><th align="center">MYISAM</th><th align="center">INNODB</th></tr></thead><tbody><tr><td align="center">事务支持</td><td align="center">不支持</td><td align="center">支持</td></tr><tr><td align="center">数据行锁定</td><td align="center">不支持</td><td align="center">支持</td></tr><tr><td align="center">外键约束</td><td align="center">不支持</td><td align="center">支持</td></tr><tr><td align="center">全文索引</td><td align="center">支持</td><td align="center">不支持</td></tr><tr><td align="center">表的空间大小</td><td align="center">较小</td><td align="center">较大约为两倍</td></tr></tbody></table> 
<p>常规使用操作:</p> 
<ul><li>MYISAM节约空间，速度较快</li><li>INNODB安全性高，事务的处理，多表多用户操作</li></ul> 
<p><strong>在物理空间存在的位置</strong><br> 所有的数据库文件都存在data目录下，一个文件夹就对应一个数据库本质还是文件的存储!</p> 
<p>MySQL引擎在物理文件上的区别</p> 
<ul><li>InnoDB在数据库表中只有一个*.frm文件，以及上级目录下的ibdata1文件</li><li>MYISAM对应文件 
  <ul><li>*.frm表结构的定义文件</li><li>*.MYD数据文件(data）</li><li>*.MYI索引文件（index)</li></ul> </li></ul> 
<p><strong>设置数据库表的字符集编码</strong><br> 不设置的话，会是mysql默认的字符集编码~(不支持中文!)、</p> 
<pre><code class="prism language-mysql">charset=utf8
</code></pre> 
<p>MySQL的默认编码是Latin1，不支持中文</p> 
<p>在my.ini中配置默认的编码</p> 
<pre><code>character-set-server=utf8
</code></pre> 
<h3><a id="26__313"></a>2.6 修改删除表</h3> 
<p><strong>修改表</strong></p> 
<p>change与modify区别、</p> 
<p>modify修改字段的约束</p> 
<p>change重命名</p> 
<pre><code class="prism language-mysql">-- 修改表名  ATER TABLE 旧表名 RENAME AS 新表名 
ALTER TABLE student RENAME AS student1 
-- 增加表的字段
ALTER TABLE student1 ADD age INT(100)
-- 修改表的字段
ALTER TABLE student1 MODIFY age VARCHAR(30)-- 修改字段的约束
ALTER TABLE student1 CHANGE age age1  INT(100)-- 修改字段名（重命名）
 -- 删除字段
ALTER TABLE  student1 DROP age1
</code></pre> 
<p><strong>删除表</strong></p> 
<pre><code class="prism language-mysql">DROP TABLE student1
</code></pre> 
<p>注意点:</p> 
<ul><li>`字段名，使用这个包裹!· 注释 --/**/</li><li>sql关键字大小写不敏感，建议大家写小写</li><li>所有的符号全部用英文</li></ul> 
<h2><a id="3__347"></a>3. 数据库管理</h2> 
<h3><a id="31__349"></a>3.1 外键（了解即可）</h3> 
<p><strong>方式一</strong></p> 
<pre><code class="prism language-mysql">CREATE TABLE `student1` (
  `id` INT NOT NULL AUTO_INCREMENT COMMENT '学号',
  `name` VARCHAR(10) NOT NULL DEFAULT '匿名' COMMENT '姓名',
  `pwd` VARCHAR(30) NOT NULL DEFAULT '123456' COMMENT '密码',
  `sex` VARCHAR(2) DEFAULT '男' COMMENT '性别',
  `gradeid` INT NOT NULL COMMENT '年级',
  `birthday` DATETIME DEFAULT NULL COMMENT '出生日期',
  PRIMARY KEY (`id`),
  KEY `FK_gradeid` (`gradeid`),
  CONSTRAINT `FK_gradeid` FOREIGN KEY (`gradeid`) REFERENCES `grade` (`gradeid`)
) ENGINE=INNODB DEFAULT CHARSET=utf8
-- 学生表的gradeid字段要去引用年级表的gradeid
-- 定义外键key
-- 给这个外键添加约束（执行引用） references引用


CREATE TABLE `grade` (
   `gradeid` INT(10) NOT NULL AUTO_INCREMENT COMMENT '年级id',
   `gradename` VARCHAR(30) NOT NULL COMMENT '年级名字',
    PRIMARY KEY (`gradeid`)

)ENGINE=INNODB DEFAULT CHARSET=utf8





</code></pre> 
<p><strong>删除有外键关系的表的时候，必须要先删除引用别人的表（从表)，再删除被引用的表（主表)</strong></p> 
<p><strong>方式二</strong></p> 
<pre><code class="prism language-mysql">-- 创建表的时候没有外键关系
ALTER TABLE `student1`
ADD CONSTRAINT `FK_gradeid` FOREIGN KEY(`gradeid`) REFERENCES `grade` (`gradeid`);
-- ALTER TABLE 表 ADD CONSTRAINT约束名 FOREIGN KEY(作为外键的列)REFERENCES那个表(哪个字段)
</code></pre> 
<p><strong>以上的操作都是物理外键，数据库级别的外键，我们不建议使用!</strong></p> 
<p><strong>最佳实践</strong><br> <strong>·数据库就是单纯的表，只用来存数据，只有行（数据）和列(字段)·我们想使用多张表的数据，想使用外键(程序去实现)</strong></p> 
<h3><a id="32_DML_405"></a>3.2 DML语言操作表</h3> 
<h3><a id="33__407"></a>3.3 添加</h3> 
<pre><code class="prism language-mysql">INSERT INTO `shaoxia` VALUE(1,'张三',4,'男'),
(2,'李四',23,'男'),
(3,'王五',34,'男')
</code></pre> 
<h3><a id="34__417"></a>3.4 修改</h3> 
<pre><code class="prism language-mysql">UPDATE shaoxia
SET NAME = '王六',age=8
WHERE id = 1;
</code></pre> 
<p>没有条件会修改整个表的数据</p> 
<h3><a id="35__427"></a>3.5 删除</h3> 
<pre><code class="prism language-mysql">DELETE FROM shaoxia WHERE age=4
</code></pre> 
<h3><a id="4_DQL_433"></a>4 DQL语句</h3> 
<p>查询关键词select</p> 
<h4><a id="imgJCFwqQcn1672974931998CUsershedadaAppDataRoamingTyporatyporauserimagesimage20221011171120642pngDQL_437"></a>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JCFwqQcn-1672974931998)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221011171120642.png)]DQL基本查询</h4> 
<p>1.查询多个字段</p> 
<pre><code class="prism language-mysql">SELECT NAME,age FROM shaoxia
SELECT * FROM shaoxia
</code></pre> 
<p>2.设置别名</p> 
<pre><code class="prism language-mysql">SELECT NAME AS '姓名' FROM shaoxia
</code></pre> 
<p>3.去重</p> 
<pre><code class="prism language-mysql">SELECT DISTINCT age FROM shaoxia
</code></pre> 
<h4><a id="DQL_458"></a>DQL条件查询</h4> 
<p>查询年龄为4的名字</p> 
<pre><code class="prism language-mysql">SELECT NAME FROM shaoxia WHERE age=4
</code></pre> 
<p>查询年龄少于20的人的所有信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE age&lt;20
</code></pre> 
<p>查询年龄少于等于20的人的所有信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE age&lt;=20
</code></pre> 
<p>查询班级为空的所有人的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE banji IS NULL
</code></pre> 
<p>查询班级不为空的所有人的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE banji IS NOT NULL
</code></pre> 
<p>查询班级不等于8的所有人的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE banji !=8
SELECT * FROM shaoxia WHERE banji &lt;&gt;8
</code></pre> 
<p>查询班级5到8之间的所有人的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE banji BETWEEN 5 AND 8
SELECT * FROM shaoxia WHERE banji&lt;=8 &amp;&amp; banji&gt;=5
SELECT * FROM shaoxia WHERE banji&lt;=8 AND banji&gt;=5
</code></pre> 
<p>查询年龄少于8且性别为男的所有人的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE age&lt;8 AND gender='男'
</code></pre> 
<p>查询班级为8或为5或为3的所有人的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE banji=8 OR banji=5 OR banji=3
SELECT * FROM shaoxia WHERE banji in (3,5,8)
</code></pre> 
<p>查询名字为两个字的人的信息（模糊插询）</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE NAME LIKE '__'
</code></pre> 
<p>查询姓王的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE NAME LIKE '王%'
</code></pre> 
<p>查询姓氏最后一个字是丹的人的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia WHERE NAME LIKE '%丹'
</code></pre> 
<h4><a id="DQL_536"></a>DQL-聚合函数</h4> 
<p>count 统计数量</p> 
<p>max 最大值</p> 
<p>min 最小值</p> 
<p>avg 平均值</p> 
<p>sum 求和</p> 
<p><strong>所有的null值不参与聚合计算</strong></p> 
<p>统计总人数</p> 
<pre><code class="prism language-mysql">SELECT  COUNT(*) FROM shaoxia
</code></pre> 
<p>计算所有人的平均年龄</p> 
<pre><code class="prism language-mysql">SELECT  AVG(age) FROM shaoxia
</code></pre> 
<p>统计年龄最大的人</p> 
<pre><code class="prism language-mysql">SELECT MAX(age) FROM shaoxia
</code></pre> 
<p>计算性别为男的人的平均年龄</p> 
<pre><code class="prism language-mysql">SELECT AVG(age) FROM shaoxia WHERE gender='男'
</code></pre> 
<h4><a id="DQL_574"></a>DQL-分组查询</h4> 
<p>where与having区别</p> 
<ul><li>执行时机不同: where是分组之前进行过滤，不满足where条件，不参与分组;而having是分组之后对结果进行过滤。</li><li>判断条件不同: where不能对聚合函数进行判断，而having可以。</li></ul> 
<p>根据性别分组，统计男性人数和女姓人数</p> 
<pre><code class="prism language-mysql">SELECT gender,COUNT(*) FROM shaoxia GROUP BY gender 
</code></pre> 
<p>根据性别分组，统计男性和女姓的平均年龄</p> 
<pre><code class="prism language-mysql">SELECT gender,AVG(age) FROM shaoxia GROUP BY gender 	
</code></pre> 
<h4><a id="DQL_593"></a>DQL-排序查询</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jZ9BWBwe-1672974932000)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221012160855451.png)]</p> 
<p>排序方式</p> 
<ul><li>ASC:升序（默认值）</li><li>DESC：降序</li></ul> 
<p>注意：如果是多字段排序，当第一个字段相同时，才会根据第二个字段排序</p> 
<p>按照年龄升序排序</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia ORDER BY age ASC
</code></pre> 
<p>按照年龄降序排序</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia ORDER BY age DESC
</code></pre> 
<p>先按照年龄降序排序然后按照班级升序排序</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia ORDER BY banji DESC, age ASC
</code></pre> 
<h4><a id="DQL_622"></a>DQL-分页查询</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-tsllzIDe-1672974932000)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221012171338629.png)]</p> 
<p><strong>注意</strong></p> 
<ul><li>起始索引从0开始，起始索引=(查询页码-1）*每页显示记录数</li><li>分页查询是数据库的方言，不同的数据库有不同的实现，MySQL中是LIMIT。</li><li>如果查询的是第一页数据，起始索引可以省略，直接简写为limit 10.</li></ul> 
<p>查询第一页的信息，每一页显示5行</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia LIMIT 0,5
</code></pre> 
<p>查询第二页的信息</p> 
<pre><code class="prism language-mysql">SELECT * FROM shaoxia LIMIT 5,5
</code></pre> 
<h4><a id="DQL__644"></a>DQL 执行顺序</h4> 
<p>第一步是 <strong>from</strong></p> 
<p>第二步是 <strong>where</strong></p> 
<p>第三步是 <strong>group by</strong></p> 
<p>第四步是 <strong>select</strong></p> 
<p>第五步是 <strong>order by</strong></p> 
<p>第六步是 <strong>limit</strong></p> 
<h3><a id="5DCL__658"></a>5.DCL 语句</h3> 
<p><strong>介绍</strong></p> 
<p>DCL英文全称是DataControlLanguage(数据控制语言)，用来管理数据库用户、控制数据库的访问权限。</p> 
<p><strong>DCL用户管理</strong></p> 
<ol><li>查询用户</li></ol> 
<pre><code class="prism language-mysql">USE  mysql;
SELECT * FROM user;
</code></pre> 
<p>2.创建用户itcast,只能在当前用户localhost访问，密码123456</p> 
<pre><code class="prism language-mysql">CREATE USER 'itcast'@'localhost' IDENTIFIED BY '123456'
</code></pre> 
<p>3.创建用户luoyue,可以在任意主机访问该数据库，密码123456</p> 
<pre><code class="prism language-mysql">CREATE USER 'luoyue'@'%' IDENTIFIED BY '123456'
</code></pre> 
<p>4.修改用户luoyue的登录密码</p> 
<pre><code class="prism language-mysql">ALTER USER 'heima'@'%' IDENTIFIED WITH mysql_native_password BY '1234';
</code></pre> 
<ol start="5"><li>删除’itcast’@'ocalhost’用户</li></ol> 
<pre><code class="prism language-mysql">DROP USER 'itcast'@'localhost'
</code></pre> 
<p><strong>DCL权限控制</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-GVqBXZg8-1672974932001)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221019174745472.png)]</p> 
<p>1.查询权限</p> 
<pre><code class="prism language-mysql">SHOW GRANTS FOR 'heima'@'%'
</code></pre> 
<p>2.授予权限</p> 
<pre><code class="prism language-mysql">GRANT ALL ON itcast.* TO 'heima'@'%'
</code></pre> 
<p>3.撤销权限</p> 
<pre><code class="prism language-mysql">REVOKE ALL ON itcast.* FROM 'heima'@'%'
</code></pre> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-jX9x5yT8-1672974932002)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221020094509788.png)]</p> 
<h3><a id="6_721"></a>6.函数</h3> 
<p>函数是指一段可以直接被另一段程序调用的程序或代码。</p> 
<h4><a id="61_725"></a>6.1.字符串函数</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-efOAdYAz-1672974932002)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221020095201635.png)]</p> 
<pre><code class="prism language-mysql">SELECT CONCAT ('hello','word')
SELECT UPPER ('hello')
SELECT LOWER ('HELLO')
SELECT LPAD ('aa',5,'--')
SELECT RPAD ('aa',5,'--')
SELECT TRIM ('hello ') 
SELECT SUBSTRING('hellomysql',1,5);
</code></pre> 
<h4><a id="62__739"></a>6.2 数值函数</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-H3uf75EH-1672974932003)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221020141807054.png)]</p> 
<p>通过数据库函数生成一个6位数的随机验证码</p> 
<pre><code class="prism language-mysql">SELECT LPAD(ROUND(RAND()*1000000,0),6,'0')
</code></pre> 
<h4><a id="63__749"></a>6.3 日期函数</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-661c7Yia-1672974932004)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221020142632656.png)]</p> 
<pre><code class="prism language-mysql">SELECT DATE_ADD(NOW(),INTERVAL 70 YEAR)
SELECT DATE_ADD(NOW(),INTERVAL 70 MONTH)
SELECT DATE_ADD(NOW(),INTERVAL 70 DAY)

SELECT DATEDIFF('2022-11-1','2022-10-1')
第一个时间减去第二个时间


ALTER TABLE shaoxia ADD entertime DATE NOT NULL
给表插入一个时间字段


SELECT NAME,DATEDIFF(CURDATE(),entertime) AS  'overtime' FROM shaoxia ORDER BY overtime ASC
查询所有学生入学时间并按时间升序排序
</code></pre> 
<h4><a id="64__770"></a>6.4 流程控制函数</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-rLXNxC3O-1672974932005)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221020150348142.png)]</p> 
<pre><code class="prism language-mysql">SELECT NAME, (CASE  WHEN age&lt;=5 THEN '小学生'  WHEN age&gt;=9 THEN '大学生' ELSE '中学生' END) AS '学生' FROM shaoxia


</code></pre> 
<h3><a id="7_780"></a>7.约束</h3> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-swu40ouG-1672974932005)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221020164518442.png)]</p> 
<h4><a id="71__784"></a>7.1 外键约束</h4> 
<p>外键用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Q1GBDjZf-1672974932006)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221021145733247.png)]</p> 
<pre><code class="prism language-mysql">alter table emp add constraint fk_emp_dept_id foreign key (dept_id) references dept(id);
添加外键
</code></pre> 
<pre><code class="prism language-mysql">alter table emp drop foreign key fk_emp_dept_id;
删除外键
</code></pre> 
<h4><a id="72__800"></a>7.2 删除更新行为</h4> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Sz93oHuB-1672974932007)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025094227248.png)]</p> 
<h3><a id="8_804"></a>8.多表查询</h3> 
<h4><a id="81__806"></a>8.1 多表关系</h4> 
<ul><li> <p><strong>一对多(多对一)</strong></p> 
  <blockquote> 
   <p>案例:部门与员工的关系<br> 关系:一个部门对应多个员工，一个员工对应一个部门<br> 实现:在多的一方建立外键，指向一的一方的主键</p> 
  </blockquote> </li><li> <p><strong>多对多</strong></p> 
  <blockquote> 
   <p>案例:学生与课程的关系<br> 关系:一个学生可以选修多门课程，一门课程也可以供多个学生选择<br> 实现:建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</p> 
  </blockquote> </li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-E9NroYWC-1672974932007)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025095321981.png)]</p> 
<ul><li><strong>—对一</strong></li></ul> 
<blockquote> 
 <p>案例:用户与用户详情的关系<br> 关系:一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详情字段放在另一张表中，以提升操作效率<br> 实现:在任意一方加入外键，关联另外一方的主键，并且设置外键为唯一的(UNIQUE)</p> 
</blockquote> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-guMzjQFk-1672974932008)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025095618685.png)]</p> 
<h4><a id="82__830"></a><strong>8.2 多表查询概述</strong></h4> 
<p>概述:指从多张表中查询数据<br> 笛卡尔积:笛卡尔乘积是指在数学中，两个集合A集合和B集合的所有组合情况。(<strong>在多表查询时，需要消除无效的笛卡尔积</strong>)</p> 
<h4><a id="83__835"></a>8.3 多表查询分类</h4> 
<ul><li> <p><strong>连接查询</strong></p> 
  <ul><li> <p>内连接:相当于查询A、B交集部分数据</p> </li><li> <p>外连接:<br> 左外连接:查询左表所有数据，以及两张表交集部分数据<br> 右外连接:查询右表所有数据，以及两张表交集部分数据<br> 自连接:当前表与自身的连接查询，自连接必须使用表别名</p> <p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-FrbmulkI-1672974932008)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025100547361.png)]</p> </li></ul> </li></ul> 
<pre><code class="prism language-mysql">  内连接演示
  1.查询每一个员工的姓名，以及关联部门的名称（隐式内连接实现）
  2.表结构：emp,dept
  3.连接条件emp.dept.id=dept.id
SELECT emp.name,dept.name FROM dept,emp WHERE emp.dept_id=dept.id

(显示内连接）
SELECT emp.name,dept.name FROM dept INNER JOIN emp ON emp.dept_id=dept.id
</code></pre> 
<p><strong>外联接</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-oj2XIvxj-1672974932009)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025105757058.png)]</p> 
<pre><code class="prism language-mysql">外联接演示
1.查询emp表所有的数据，以及对应部门的名称(左外连接）
2.表结构：emp,dept
3.连接条件emp.dept.id=dept.id

SELECT emp.*,dept.name FROM emp LEFT OUTER JOIN dept ON emp.dept_id=dept.id

(右外连接）
SELECT emp.*,dept.name FROM emp RIGHT OUTER JOIN dept ON emp.dept_id=dept.id
</code></pre> 
<p><strong>自连接</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-VSfBC1zd-1672974932009)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025110923637.png)]</p> 
<pre><code class="prism language-mysql">子连接查询
SELECT a.name,b.name FROM emp a,emp b WHERE a.managerid=b.id


查询所有员工 emp及其领导的名字 emp ，如果员工没有领导，也需要查询出来
表结构: emp a , emp b
SELECT a.name '员工',b.name '领导' FROM emp a LEFT OUTER JOIN emp b ON a.managerid=b.id
</code></pre> 
<ul><li><strong>联合查询</strong></li></ul> 
<p><strong>union union all</strong></p> 
<p>对于union查询，就是把多次查询的结果合并起来，形成一个新的查询结果集。</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-6XkolCS1-1672974932010)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025155149353.png)]</p> 
<pre><code class="prism language-mysql">查询薪水大于1000的员工和年龄少于21岁的员工

SELECT * FROM emp WHERE salary &gt;10000
UNION ALL
SELECT * FROM emp WHERE age&lt;21

去重
SELECT * FROM emp WHERE salary &gt;10000
UNION 
SELECT * FROM emp WHERE age&lt;21
要保证两次查询的字段一致这样才不会出错
</code></pre> 
<ul><li> <p><strong>子查询</strong></p> <p>概念:SQL语句中嵌套SELECT语句，称为嵌套查询，又称子查询。</p> </li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-Kwl6Wy9O-1672974932011)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221025174223509.png)]</p> 
<p>根据子查询结果不同，分为:</p> 
<ul><li>标量子查询(子查询结果为单个值)</li><li>列子查询(子查询结果为一列)</li><li>行子查询(子查询结果为一行)</li><li>表子查询(子查询结果为多行多列)</li></ul> 
<p>根据子查询位置，分为:WHERE之后、FROM之后、SELECT之后。</p> 
<ul><li><strong>标量子查询</strong><br> 子查询返回的结果是单个值（数字、字符串、日期等)，最简单的形式，这种子查询成为标量子查询。<br> 常用的操作符:= &lt;&gt; &gt; =&lt; &lt; &lt;=</li></ul> 
<pre><code class="prism language-mysql">-- 标量子查询
-- 1．查询“销售部”的所有员工信息
-- a．查询“销售部”部门ID
-- b．根据销售部部门ID，查询员工信息

SELECT id FROM dept WHERE NAME='研发部'
SELECT * FROM emp WHERE dept_id=(SELECT id FROM dept WHERE NAME='研发部')
</code></pre> 
<ul><li><strong>列子查询</strong><br> 子查询返回的结果是一列（可以是多行)，这种子查询称为列子查询。<br> 常用的操作符:IN 、NOT IN、ANY . SOME 、ALL。</li></ul> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-EEtkkUKj-1672974932011)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221026105204963.png)]</p> 
<pre><code class="prism language-mysql">-- 2．查询比财务部所有人工资都高的员工信息
-- a．查询所有财务部人员工资
select id from dept where name ='财务部';
select salary from emp where dept_id = (select id from dept where name = '财务部');
-- b.比财务部所有人工资都高的员工信息
select * from emp where salary &gt; all ( select salary from emp where dept_id = (select id fron dept where nane= "财务部'）);

</code></pre> 
<pre><code class="prism language-mysql">-- 3．查询比研发部其中任意一人工资高的员工信息
-- a．查询研发部所有人工资
select salary from emp where dept_id = (select id from dept where name = '研发部');
-- b.比研发部其中任意一人工资高的员工信息
select * from emp where salary &gt; any ( select salary from emp where dept_id = (select id from dept whenre nane = '研发部'〕);

</code></pre> 
<ul><li><strong>行子查询</strong><br> 子查询返回的结果是一行（可以是多列)，这种子查询称为行子查询。<br> 常用的操作符:= 、&gt;、IN 、NOT IN</li></ul> 
<pre><code class="prism language-mysql">-- 1．查询与“张无忌”的薪资及直属领导相同的员工信息;
-- a．查询“张无忌”的薪资及直属领导
select salary,managerid from emp where name = '张无忌';
-- b．查询与“张无忌”的薪资及直属领导相同的员工信息;
select * from emp where (salary,managerid) = (select salary， managerid from emp where nanme = '张无忌');

</code></pre> 
<ul><li><strong>表子查询</strong><br> 子查询返回的结果是多行多列，这种子查询称为表子查询。<br> 常用的操作符:IN</li></ul> 
<pre><code class="prism language-mysql">-- 1．查询与“鹿杖客”，“宋远桥”的职位和薪资相同的员工信息
-- a．查询“鹿杖客”，"宋远桥”的职位和薪资
select job,salary from emp where name = '鹿杖客' or name = '宋远桥';
-- b．查询与“鹿杖客”，“宋远桥”的职位和薪资相同的员工信息
select * from emp where (job,salary) in ( select job，salary from emp where name = '鹿杖客’or name = '宋远桥’);



-- 2．查询入职日期是“2006-01-01”之后的员工信息，及其部门信息
-- a.入职日期是"2006-01-01”之后的员工信息
select x from emp where entrydate &gt; '2006-01-01';
-- b.查询这部分员工，对应的部门信息;
select e.*,d.* from (select * from emp where entrydate &gt; '2806-1-01') e left join dept d on e.dept_id = d.id;

</code></pre> 
<p><strong>查询练习</strong></p> 
<pre><code class="prism language-mysql">-- 查询员工的姓名、年龄、职位、部门信息（隐式内连接)
SELECT emp.name,emp.age,emp.job,dept.name  FROM emp,dept WHERE dept_id=dept.


-- 查询年龄小于30岁的员工的姓名、年龄、职位、部门信息（显式内连接)
SELECT emp.name,emp.age,emp.job,dept.name  FROM emp INNER JOIN dept ON dept_id=dept.id WHERE age&lt;30

-- 查询拥有员工的部门工D、部门名称

SELECT DISTINCT dept.id,dept.name  FROM emp,dept WHERE emp.dept_id=dept.id

-- 查询所有年龄大于40岁的员工，及其归属的部门名称;如果员工没有分配部门，也需要展示出来

SELECT emp.*,d.name FROM emp LEFT JOIN dept d ON  emp.dept_id=d.id WHERE emp.age&gt;40

 
-- 查询所有员工的工资等级
-- 连接条件是  salary&gt;=s.losal AND salary&lt;=s.hisal  介于两者之间涉及到等级问题就得使用的这个
SELECT e.* ,s.grade FROM emp e,salgrade s WHERE salary&gt;=s.losal AND salary&lt;=s.hisal

-- 查询“研发部”所有员工的信息及工资等级
SELECT e.*,s.grade ,d.name FROM emp e, salgrade s,dept d WHERE  salary&gt;=s.losal AND salary&lt;=s.hisal AND d.name='研发部' AND e.dept_id=d.id


-- 查询“"研发部”员工的平均工资
SELECT d.name ,AVG(e.salary) FROM dept d,emp e WHERE  d.name='研发部' AND e.dept_id=d.id

-- 查询比“小昭”工资高的员工信息

-- 1.查询小昭的工资
SELECT salary FROM emp WHERE NAME='小昭'


-- 2.查询比小昭工资高的员工信息
SELECT * FROM emp WHERE salary&gt;(SELECT salary FROM emp WHERE NAME='小昭')


-- 查询比平均薪资高的员工信息
-- 1.查询平均工资
SELECT AVG(salary) FROM emp 

-- 2.查询比平均工资高的员工的信息
SELECT * FROM emp WHERE salary&gt;(SELECT AVG(salary) FROM emp )

-- 查询低于本部门平均工资的员工信息
-- 1.查询指定部门的平均工资

SELECT AVG(e.salary) FROM  emp e WHERE e.dept_id=1

-- 2. 查询低于本部门平均工资的员工信息
SELECT * FROM emp e1 WHERE e1.salary&lt;(SELECT AVG(e.salary) FROM  emp e WHERE e.dept_id=e1.dept_id)

-- 查询所有部门的员工信息，并统计数量
-- 1.查询所有部门的员工信息
SELECT NAME,id ,(SELECT COUNT(*) FROM emp WHERE (dept_id=dept.id)) FROM dept
-- 2.统计数量
SELECT COUNT(*) FROM emp WHERE (dept_id=1)
</code></pre> 
<h3><a id="9_1061"></a>9.事务</h3> 
<h4><a id="91_1063"></a>9.1事务简介</h4> 
<p>事务是一组操作的集合，它是一个不可分割的工作单位，<strong>事务会把所有的操作作为一个整体一起向系统提交或撤销操作</strong><br> <strong>请求</strong>，即这些操作要么同时成功，要么同时失败。</p> 
<h5><a id="_1068"></a><strong>步骤</strong></h5> 
<p>开启事务</p> 
<p>回滚事务</p> 
<p>提交事务</p> 
<p>默认MySQL的事务是自动提交的，也就是说，当执行一条DML语句，MySQL会立即隐式的提交事务。</p> 
<h4><a id="92_1078"></a>9.2事务操作</h4> 
<pre><code class="prism language-mysql">-- 转账操作
-- 1.查询张三的账户余额
SELECT money FROM salary WHERE NAME='张三';

-- 2.将张三账户余额减少1000
UPDATE salary SET  money=money-1000 WHERE NAME='张三';

-- 3.将李四账户余额增加1000
 UPDATE salary SET money=money+1000 WHERE NAME='李四'
</code></pre> 
<ul><li> <p><strong>查看/设置事务提交方式</strong></p> <pre><code class="prism language-mysql">SELECT @@autocommit;
SELECT @@autocommit=0;
</code></pre> </li><li> <p><strong>提交事务</strong></p> <pre><code class="prism language-mysql">COMMIT;
</code></pre> </li><li> <p><strong>回滚事务</strong></p> <pre><code class="prism language-mysql">ROLLBACK;
</code></pre> <h5><a id="_1113"></a>事务四大特性</h5> </li><li> <p><strong>原子性</strong>（Atomicity):事务是不可分割的最小操作单元，要么全部成功，要么全部失败。</p> </li><li> <p><strong>一致性</strong>（Consistency):事务完成时，必须使所有的数据都保持一致状态。</p> </li><li> <p><strong>隔离性</strong>（Ilsolation):数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。</p> </li><li> <p><strong>持久性</strong>〈Durability):事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。</p> </li></ul> 
<h5><a id="_1123"></a>并发事务问题</h5> 
<ul><li> <p><strong>脏读</strong><br> 一个事务读到另外一个事务还没有提交的数据。</p> </li><li> <p><strong>不可重复读</strong><br> 一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。</p> </li><li> <p><strong>幻读</strong></p> <p>一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了"<br> 幻影”。</p> </li></ul> 
<h5><a id="_1136"></a>事务隔离级别</h5> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-JwnKMMeG-1672974932012)(C:\Users\hedada\AppData\Roaming\Typora\typora-user-images\image-20221114141742518.png)]</p> 
<pre><code class="prism language-mysql">-- 查看事务级别
 SELECT@@transaction_isolation
 -- 设置事务级别
 SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED
  SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ
</code></pre> 
<p><strong>注意:事务隔离级别越高，数据越安全，但是性能越低。</strong></p> 
<h3><a id="10_1150"></a>10.存储引擎</h3> 
<h5><a id="101_1152"></a>10.1存储引擎简介</h5> 
<p>存储引擎就是<strong>存储数据、建立索引、更新/查询数据</strong>等技术的实现方式。存储引擎是<strong>基于表的</strong>而不是基于库的，所以存储引擎也可被<br> 称为表类型。</p> 
<h5><a id="102__1157"></a>10.2 存储引擎特点</h5> 
<p><strong>InnoDB</strong></p> 
<ul><li> <p>介绍</p> <p>InnoDB是一种兼顾高可靠性和高性能的通用存储引擎，在<strong>MySQL 5.5</strong>之后，InnoDB是默认的MySQL存储引擎。</p> </li><li> <p>特点</p> 
  <ul><li>ACID模型，支持事务;</li><li>行级锁，提高并发访问性能;</li><li>支持外键FOREIGN KEY约束，保证数据的完整性和正确性;</li></ul> </li><li> <p>文件</p> <p>xxx.ibd :. xx代表的是表名，innoDB引擎的每张表都会对应这样一个表空间文件，存储该表的表结构(frm、sdi)、数据和索引。参数: innodb_file_per_table</p> </li></ul> 
<p><strong>MylSAM</strong></p> 
<ul><li> <p>介绍</p> <p>MylSAM是MySQL早期的默认存储引擎。</p> </li><li> <p>特点</p> 
  <ul><li>不支持事务，不支持外键</li><li>支持表锁，不支持行锁</li><li>访问速度快</li></ul> </li><li> <p>文件</p> 
  <ul><li>xxx.sdi:存储表结构信息</li><li>XXx.MYD:存储数据</li><li>xXx.MYI:存储索引</li></ul> </li></ul> 
<p><strong>Memory</strong></p> 
<ul><li> <p>介绍</p> <p>Memory引擎的表数据时存储在内存中的，由于受到硬件问题、或断电问题的影响，只能将这些表作为临时表或缓存使用。</p> </li><li> <p>特点</p> 
  <ul><li>内存存放</li><li>hash索引（默认）</li></ul> </li><li> <p>文件</p> 
  <ul><li>xxx.sdi:存储表结构信息</li></ul> </li></ul> 
<h4><a id="103__1208"></a>10.3 存储引擎选择</h4> 
<p>在选择存储引擎时，应该根据应用系统的特点选择合适的存储引擎。对于复杂的应用系统还可以根据实际情况选择多种存储引擎进行组<br> 合。</p> 
<ul><li> <p><strong>InnoDB</strong>∶是Mysql的默认存储引擎，支持事务、外键。</p> <p>如果应用对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询之外，还包含很多的更新、删除操作，那么InnoDB存储引擎是比较合适的选择。</p> </li><li> <p><strong>MISAM</strong>:如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那<br> 么选择这个存储引擎是非常合适的。</p> </li><li> <p><strong>MEMORY</strong>:将所有数据保存在内存中，访问速度快，通常用于临时表及缓存。</p> <p>MEMORY的缺陷就是对表的大小有限制，太大的表<br> 无法缓存在内存中，而且无法保障数据的安全性。</p> </li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/019fd48e5dabf6a695b2cdd0afd37bb4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">RabbitMQ 消息确认机制</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b608bffc1b90453994a2bdab1dfb4c59/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python&#43;Django毕业设计学生信息管理系统（程序&#43;LW&#43;部署）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>