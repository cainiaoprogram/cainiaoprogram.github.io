<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>（二）双线性插值python实现 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="（二）双线性插值python实现" />
<meta property="og:description" content="这里写目录标题 （一）原始图像（二）双线性插值原理（三）python实现1. 安装库2. python程序编写3. 效果4. 工程文件 （一）原始图像 （二）双线性插值原理 一般情况下我们对图像缩放的时候会进行上采样或下采样，上采样常采用插值来实现，本文章使用双线性插值实现图像放大
双线性插值的核心思想是在两个方向上分别进行一次插值，关于下图的解释可以参考百度百科：双线性插值
使用双线性插值注意将目标图形和原图像几何中心重合在计算插值，双线性插值只会使用临近的四个像素点坐标，先求x的单线性插值，再求y的单线性插值
这里举例来说明：
关于中心对齐可以参考：双线性插值,个人认为上面中心对齐时&#43;0.5是因为图像坐标从0开始，所以对于33的图像只有（0 1 2）对应到55的图像（0 1 2 3 4），它们的宽高比为5/3，对于33的2只能到25/3=3.3，永远到不了4这个地方，只能先&#43;0.5才能到4，（2&#43;0.5）*5/3=4.1
（三）python实现 python安装可以参考：python安装
1. 安装库 首先我们需要安装用到的库，按住win&#43;r输入cmd打开dos窗口，输入下面的命令
pip install opencv-python pip install numpy 2. python程序编写 import cv2 # cv2 即opencv的库 import numpy as np #给numpy起别名np，该库Numerical Python是python的数学函数库 #双线性插值实现 def bilinear_interpolation(img,out_dim): src_h,src_w,channels = img.shape dst_h,dst_w = out_dim[1],out_dim[0] print(&#34;src_h,src_w= &#34;,src_h,src_w) print(&#34;dst_h,dst_w= &#34;,dst_h,dst_w) if src_h == dst_h and src_w == dst_w: return img.copy() dst_img = np.zeros((dst_h,dst_w,3),dtype=np.uint8) scale_x,scale_y = float(src_w)/dst_w,float(src_h)/dst_h for i in range(3): for dst_y in range(dst_h): for dst_x in range (dst_w): #根据几何中心重合找出目标像素的坐标 src_x = (dst_x&#43;0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8c06f22b81457dcca5e2f4a0eb88b35e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-28T23:00:42+08:00" />
<meta property="article:modified_time" content="2021-12-28T23:00:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">（二）双线性插值python实现</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>这里写目录标题</h4> 
 <ul><li><ul><li><ul><li><a href="#_2" rel="nofollow">（一）原始图像</a></li><li><a href="#_4" rel="nofollow">（二）双线性插值原理</a></li><li><a href="#python_16" rel="nofollow">（三）python实现</a></li><li><ul><li><ul><li><a href="#1___18" rel="nofollow">1. 安装库</a></li><li><a href="#2__python_25" rel="nofollow">2. python程序编写</a></li><li><a href="#3___66" rel="nofollow">3. 效果</a></li><li><a href="#4___76" rel="nofollow">4. 工程文件</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_2"></a>（一）原始图像</h4> 
<p><img src="https://images2.imgbox.com/98/32/h4FAv2uS_o.png" alt="请添加图片描述"></p> 
<h4><a id="_4"></a>（二）双线性插值原理</h4> 
<p>一般情况下我们对图像缩放的时候会进行上采样或下采样，上采样常采用插值来实现，本文章使用双线性插值实现图像放大<br> 双线性插值的核心思想是在两个方向上分别进行一次插值，关于下图的解释可以参考百度百科：<a href="https://baike.baidu.com/item/%E5%8F%8C%E7%BA%BF%E6%80%A7%E6%8F%92%E5%80%BC/11055945" rel="nofollow">双线性插值</a><br> <img src="https://images2.imgbox.com/f3/b8/UsZ39NJi_o.png" alt="在这里插入图片描述"></p> 
<p>使用双线性插值注意将目标图形和原图像几何中心重合在计算插值，双线性插值只会使用临近的四个像素点坐标，先求x的单线性插值，再求y的单线性插值<br> 这里举例来说明：</p> 
<p>关于中心对齐可以参考：<a href="https://blog.csdn.net/a435262767/article/details/107475115">双线性插值</a>,个人认为上面中心对齐时+0.5是因为图像坐标从0开始，所以对于3<em>3的图像只有（0 1 2）对应到5</em>5的图像（0 1 2 3 4），它们的宽高比为5/3，对于3<em>3的2只能到2</em>5/3=3.3，永远到不了4这个地方，只能先+0.5才能到4，（2+0.5）*5/3=4.1<img src="https://images2.imgbox.com/b0/80/Ci0cX6pr_o.jpg" alt="请添加图片描述"></p> 
<h4><a id="python_16"></a>（三）python实现</h4> 
<p>python安装可以参考：<a href="https://blog.csdn.net/weixin_43839785/article/details/122182638">python安装</a></p> 
<h6><a id="1___18"></a>1. 安装库</h6> 
<p>首先我们需要安装用到的库，按住win+r输入cmd打开dos窗口，输入下面的命令</p> 
<pre><code>pip install opencv-python
pip install numpy
</code></pre> 
<p><img src="https://images2.imgbox.com/fb/40/pfUE825S_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="2__python_25"></a>2. python程序编写</h6> 
<pre><code>import cv2 # cv2 即opencv的库
import numpy as np #给numpy起别名np，该库Numerical Python是python的数学函数库

#双线性插值实现
def bilinear_interpolation(img,out_dim):
    src_h,src_w,channels = img.shape
    dst_h,dst_w = out_dim[1],out_dim[0]
    print("src_h,src_w= ",src_h,src_w)
    print("dst_h,dst_w= ",dst_h,dst_w)
    if src_h == dst_h and src_w == dst_w:
        return img.copy()
    dst_img = np.zeros((dst_h,dst_w,3),dtype=np.uint8)
    scale_x,scale_y = float(src_w)/dst_w,float(src_h)/dst_h
    for i in range(3):
        for dst_y in range(dst_h):
            for dst_x in range (dst_w):
                #根据几何中心重合找出目标像素的坐标
                src_x = (dst_x+0.5)*scale_x -0.5
                src_y = (dst_y+0.5)*scale_y -0.5
				#找出目标像素最邻近的四个点
                src_x0 = int(np.floor(src_x))
                src_x1 = min(src_x0 + 1,src_w -1)
                src_y0 = int(np.floor(src_y))
                src_y1 = min(src_y0 + 1,src_h -1)
             
               #代入公式计算
                temp0 = (src_x1 - src_x) * img[src_y0,src_x0,i] + (src_x - src_x0) * img[src_y0,src_x1,i]
                temp1 = (src_x1 - src_x) * img[src_y1,src_x0,i] + (src_x - src_x0) * img[src_y1,src_x1,i]
                dst_img[dst_y,dst_x,i] = int((src_y1 - src_y) * temp0 + (src_y - src_y0) * temp1)

    return dst_img


img = cv2.imread("lenna.png")
dst = bilinear_interpolation(img,(700,700))
cv2.imshow("blinear",dst)
cv2.waitKey()

</code></pre> 
<h6><a id="3___66"></a>3. 效果</h6> 
<p><img src="https://images2.imgbox.com/a0/ea/3eH2zxCh_o.png" alt="在这里插入图片描述"></p> 
<p>打印信息：</p> 
<pre><code>======= RESTART: D:\AI\opencv\opencv\interpolation\bilinear_interpolation.py ======
src_h,src_w=  512 512
dst_h,dst_w=  700 700

</code></pre> 
<h6><a id="4___76"></a>4. 工程文件</h6> 
<p><a href="https://gitee.com/angerial/opencv" rel="nofollow">线性插值函数</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e938d49291c86f220df758ca97896439/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">钉钉H5微应用开发免登以及接口调试</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bc00ba1cbf4a664dea9dc2f223f719ae/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Thread.Sleep(0)的妙用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>