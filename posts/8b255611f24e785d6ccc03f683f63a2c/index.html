<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>沁恒CH32V307单片机入门（01）：基础说明与流程体验 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="沁恒CH32V307单片机入门（01）：基础说明与流程体验" />
<meta property="og:description" content="文章目录 目的基础说明芯片介绍资料与工具开发环境 流程体验开发调试下载 总结 目的 工作这几年单片机主要就接触过 Atmel、Renesas、Microchip、ST 这些厂家的，最近几年因为内部外部的各种因素单片机的价格和供应都挺不稳定的，将来会发生什么也不好说。另外这些年国内的单片机发展也挺快的。所以准备试试国产的单片机。
基础说明 芯片介绍 这里准备使用南京沁恒的CH32V307为基础进行介绍，这是一款RISC-V架构内核的单片机。我看中它的主要是自带高速 USB PHY 和 ETH PHY ，同时价格也很便宜，某宝上散买十块出头。
图片是R的，V的可用引脚要多些。
这个芯片官方是有开发板的（CH32V307-EVT-R1沁恒RISC-V模块MCU赤兔评估板），某宝官方店铺七十多块钱吧，还送两片芯片。
沁恒的单片机可以使用 WCH-Link 进行调试与下载，如果买官方开发板的话有的开发板是自带WCH-Link的。
芯片详情页：https://www.wch.cn/products/CH32V307.html
沁恒RISC-V产品总览：https://special.wch.cn/zh_cn/RISCV_MCU_Index/
资料与工具 沁恒的芯片比较大的好处是资料几乎都是有中文的。
CH32V303_305_307 数据手册：https://www.wch.cn/downloads/CH32V307DS0_PDF.html
CH32FV2x_V3x 系列应用手册：https://www.wch.cn/downloads/CH32FV2x_V3xRM_PDF.html
CH32V307评估板说明及参考应用例程：https://www.wch.cn/downloads/CH32V307EVT_ZIP.html
WCH-Link 使用说明：https://www.wch.cn/downloads/WCH-LinkUserManual_PDF.html
烧录软件（USB、串口）：https://www.wch.cn/downloads/WCHISPTool_Setup_exe.html
烧录软件（WCH-Link）：https://www.wch.cn/downloads/WCH-LinkUtility_ZIP.html
开发环境 沁恒的单片机目前官方推荐的是使用 MounRiver Studio ，这是一款 Eclipse 开发的IDE，支持Windows、Linux、MacOS。
MounRiverStudio官网：http://www.mounriver.com/
下载安装完成后（软件初次启动很慢）可以从菜单选择设置为中文：
流程体验 沁恒RISC-V单片机开发调试烧录等相关内容可以参考下面几处：
MounRiverStudio帮助中心：http://www.mounriver.com/helpCH32V307评估板说明及参考应用例程 中 PUB 目录下的《CH32V30x评估板说明书》文档。 对于IDE的使用也可以参考官方视频：https://www.bilibili.com/video/BV1yL411H7La
开发 使用MounRiverStudio进行开发，新建工程选择合适的模板：
新建工程后默认就会包含开发所需的所有库文件，之后只需要按照功能需求编写相应代码即可。
编写完成后就可以进行编译，然后进行下载或者调试：
调试 调试需要用到 WCH-Link （赤兔评估板是自带的），该工具使用可用参考上面的《WCH-Link使用说明》文档。
SWD接口用于下载和调试；CH32V307的UART1可以和WCH-Link的串口桥接以实现串口转USB功能，方便与电脑通讯。
对于 CH32V10x/CH32V20x/CH32V30x/CH32F10x/CH32F20x ，系列而言SWD接口的引脚对应关系通常为 SWDIO - PA13 SWCLK - PA14 。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8b255611f24e785d6ccc03f683f63a2c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-17T11:14:09+08:00" />
<meta property="article:modified_time" content="2023-02-17T11:14:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">沁恒CH32V307单片机入门（01）：基础说明与流程体验</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-github-gist">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">目的</a></li><li><a href="#_5" rel="nofollow">基础说明</a></li><li><ul><li><a href="#_6" rel="nofollow">芯片介绍</a></li><li><a href="#_21" rel="nofollow">资料与工具</a></li><li><a href="#_32" rel="nofollow">开发环境</a></li></ul> 
  </li><li><a href="#_41" rel="nofollow">流程体验</a></li><li><ul><li><a href="#_48" rel="nofollow">开发</a></li><li><a href="#_57" rel="nofollow">调试</a></li><li><a href="#_72" rel="nofollow">下载</a></li></ul> 
  </li><li><a href="#_99" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>目的</h2> 
<p>工作这几年单片机主要就接触过 Atmel、Renesas、Microchip、ST 这些厂家的，最近几年因为内部外部的各种因素单片机的价格和供应都挺不稳定的，将来会发生什么也不好说。另外这些年国内的单片机发展也挺快的。所以准备试试国产的单片机。</p> 
<h2><a id="_5"></a>基础说明</h2> 
<h3><a id="_6"></a>芯片介绍</h3> 
<p>这里准备使用南京沁恒的CH32V307为基础进行介绍，这是一款RISC-V架构内核的单片机。我看中它的主要是自带高速 USB PHY 和 ETH PHY ，同时价格也很便宜，某宝上散买十块出头。<br> <img src="https://images2.imgbox.com/92/5e/dlf9qDiW_o.jpg" alt="在这里插入图片描述"><br> <em>图片是R的，V的可用引脚要多些。</em></p> 
<p>这个芯片官方是有开发板的（<em>CH32V307-EVT-R1沁恒RISC-V模块MCU赤兔评估板</em>），某宝官方店铺七十多块钱吧，还送两片芯片。</p> 
<p><img src="https://images2.imgbox.com/8e/8f/vJZtEQRU_o.png" alt="在这里插入图片描述"></p> 
<p>沁恒的单片机可以使用 WCH-Link 进行调试与下载，如果买官方开发板的话有的开发板是自带WCH-Link的。</p> 
<p>芯片详情页：<a href="https://www.wch.cn/products/CH32V307.html" rel="nofollow">https://www.wch.cn/products/CH32V307.html</a><br> 沁恒RISC-V产品总览：<a href="https://special.wch.cn/zh_cn/RISCV_MCU_Index/" rel="nofollow">https://special.wch.cn/zh_cn/RISCV_MCU_Index/</a></p> 
<h3><a id="_21"></a>资料与工具</h3> 
<p>沁恒的芯片比较大的好处是资料几乎都是有中文的。</p> 
<p>CH32V303_305_307 数据手册：<a href="https://www.wch.cn/downloads/CH32V307DS0_PDF.html" rel="nofollow">https://www.wch.cn/downloads/CH32V307DS0_PDF.html</a><br> CH32FV2x_V3x 系列应用手册：<a href="https://www.wch.cn/downloads/CH32FV2x_V3xRM_PDF.html" rel="nofollow">https://www.wch.cn/downloads/CH32FV2x_V3xRM_PDF.html</a><br> CH32V307评估板说明及参考应用例程：<a href="https://www.wch.cn/downloads/CH32V307EVT_ZIP.html" rel="nofollow">https://www.wch.cn/downloads/CH32V307EVT_ZIP.html</a><br> WCH-Link 使用说明：<a href="https://www.wch.cn/downloads/WCH-LinkUserManual_PDF.html" rel="nofollow">https://www.wch.cn/downloads/WCH-LinkUserManual_PDF.html</a><br> <strong>烧录软件（USB、串口）</strong>：<a href="https://www.wch.cn/downloads/WCHISPTool_Setup_exe.html" rel="nofollow">https://www.wch.cn/downloads/WCHISPTool_Setup_exe.html</a><br> <strong>烧录软件（WCH-Link）</strong>：<a href="https://www.wch.cn/downloads/WCH-LinkUtility_ZIP.html" rel="nofollow">https://www.wch.cn/downloads/WCH-LinkUtility_ZIP.html</a></p> 
<h3><a id="_32"></a>开发环境</h3> 
<p>沁恒的单片机目前官方推荐的是使用 <strong>MounRiver Studio</strong> ，这是一款 Eclipse 开发的IDE，支持Windows、Linux、MacOS。<br> <img src="https://images2.imgbox.com/a5/6d/Su00rJn7_o.png" alt="在这里插入图片描述"><br> MounRiverStudio官网：<a href="http://www.mounriver.com/" rel="nofollow">http://www.mounriver.com/</a></p> 
<p>下载安装完成后（软件初次启动很慢）可以从菜单选择设置为中文：<br> <img src="https://images2.imgbox.com/b8/c9/KX07Abga_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_41"></a>流程体验</h2> 
<p>沁恒RISC-V单片机开发调试烧录等相关内容可以参考下面几处：</p> 
<ul><li>MounRiverStudio帮助中心：<a href="http://www.mounriver.com/help" rel="nofollow">http://www.mounriver.com/help</a></li><li><em>CH32V307评估板说明及参考应用例程</em> 中 <em>PUB</em> 目录下的《CH32V30x评估板说明书》文档。</li></ul> 
<p>对于IDE的使用也可以参考官方视频：<a href="https://www.bilibili.com/video/BV1yL411H7La" rel="nofollow">https://www.bilibili.com/video/BV1yL411H7La</a></p> 
<h3><a id="_48"></a>开发</h3> 
<p>使用MounRiverStudio进行开发，新建工程选择合适的模板：<br> <img src="https://images2.imgbox.com/b8/af/ANY6NTKm_o.png" alt="在这里插入图片描述"></p> 
<p>新建工程后默认就会包含开发所需的所有库文件，之后只需要按照功能需求编写相应代码即可。</p> 
<p>编写完成后就可以进行编译，然后进行下载或者调试：<br> <img src="https://images2.imgbox.com/ab/12/DvdVnK7g_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_57"></a>调试</h3> 
<p>调试需要用到 WCH-Link （赤兔评估板是自带的），该工具使用可用参考上面的《WCH-Link使用说明》文档。</p> 
<p><img src="https://images2.imgbox.com/20/d4/HHbQ9QUG_o.png" alt="在这里插入图片描述"><br> SWD接口用于下载和调试；CH32V307的UART1可以和WCH-Link的串口桥接以实现串口转USB功能，方便与电脑通讯。</p> 
<p>对于 <em>CH32V10x/CH32V20x/CH32V30x/CH32F10x/CH32F20x</em> ，系列而言SWD接口的引脚对应关系通常为 <code>SWDIO - PA13</code> <code>SWCLK - PA14</code> 。</p> 
<p>调试方面和很多单片机差不多：<br> <img src="https://images2.imgbox.com/5f/3b/wH1ZyPxQ_o.png" alt="在这里插入图片描述"><br> 需要注意的是每次修改后需要编译后再进行调试。</p> 
<p>这里直接以新建工程后自带的内容进行调试演示：<br> <img src="https://images2.imgbox.com/c5/3f/YR0U6Ai4_o.gif" alt="在这里插入图片描述"></p> 
<h3><a id="_72"></a>下载</h3> 
<p>通过WCH-Link进行下载的话可以直接在 MounRiverStudio 中下载或者使用 WCH-LinkUtility 软件进行下载，没有需要特别注意的内容。</p> 
<p>这里主要讲一讲使用 WCHISPStudio（WCHISPTool） 软件通过USB或串口进行下载。</p> 
<p>使用该方式下载时需要调整 <code>BOOT0</code> 和 <code>BOOT1</code> 引脚外部电平以选择芯片上电时进入的工作模式。对于 <em>CH32V2x</em> 和 <em>CH32V3x</em> 系列而言其 启动配置（自举模式）模式 如下：</p> 
<table><thead><tr><th>BOOT0</th><th>BOOT1</th><th>启动模式</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>不关心</td><td>从程序闪存存储器启动</td><td><strong>正常运行程序的模式</strong></td></tr><tr><td>1</td><td>0</td><td>从系统存储器启动</td><td><strong>下载使用的模式</strong></td></tr><tr><td>1</td><td>1</td><td>从内部 SRAM 启动</td><td></td></tr></tbody></table> 
<p>对于CH32V307VC而言，USB下载管脚为 <code>PA11 - DM</code> <code>PA12 - DP</code> 或 <code>PB6 - DM</code> <code>PB7 - DP</code> ；串口下载管脚为 <code>PA9 - TX</code> <code>PA10 - RX</code> 。</p> 
<p><img src="https://images2.imgbox.com/8e/29/lxYJPbdU_o.png" alt="在这里插入图片描述"></p> 
<p>调整启动模式，连接设备，启动WCHISPStudio软件下载固件，固件为项目目录下的 <em>obj</em> 中的 <em>.hex</em> 格式文件。</p> 
<p><img src="https://images2.imgbox.com/c0/62/xI3QWIz1_o.png" alt="在这里插入图片描述"></p> 
<p>下载完成后记得调整启动模式，然后复位设备以运行程序。</p> 
<p>在开发测试时可以关闭读保护。如果使用串口下载的话可能无法通过板载的WCH-Link的USB转串口，需要使用另外的串口模块连接单片机相应引脚。</p> 
<p>如果使用过程中有其它问题可以尝试重新插拔设备或是重启软件试试。</p> 
<h2><a id="_99"></a>总结</h2> 
<p>沁恒CH32V307单片机入门体验还是挺不错的，官方提供了完整的资料、例程，还有IDE可用。这个IDE本身感觉也不错，比同样基于Eclipse的STM32CubeIDE流畅多了。</p> 
<p>更多入门内容可以查看接下来的文章《沁恒CH32V307单片机入门（02）：官方库与工程模板介绍》：<br> <a href="https://blog.csdn.net/Naisu_kun/article/details/128771603">https://blog.csdn.net/Naisu_kun/article/details/128771603</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f0317e4ceb9bd3f1bf2999ebb32dcf99/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ThreadLocal</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3825ebdd857f1c38ef64bad61c15dc63/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">mybatis 代码生成器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>