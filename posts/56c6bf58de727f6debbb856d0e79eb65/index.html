<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>麒麟系统安装docker、mysql、clickhouse - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="麒麟系统安装docker、mysql、clickhouse" />
<meta property="og:description" content="1、查看麒麟系统版本信息
cat /etc/os-release
麒麟系统版本V10
64位操作系统
# uname -p
x86_64
# uname -p
aarch64
内核版本
# uname -r
4.19.90-24.4.v2101.ky10.x86_64
本操作为麒麟系统版本V10，x86_64操作系统
一，安装docker
文件：
docker-compose-linux-x86_64
docker-19.03.0.tgz
arm下载地址：
Index of linux/static/stable/aarch64/
deb下载地址（我们下载这个）：
https://download.csdn.net/download/weixin_60748184/88717628?spm=1001.2014.3001.5503
https://download.csdn.net/download/CSDNCDN/87704041
Index of /NS/V10/V10SP1/os/adv/lic/base/x86_64/Packages/
1、将docker-compose-linux-x86_64拷贝到/usr/local/bin并重命名为docker-compose cp docker-compose-linux-x86_64 /usr/local/bin/docker-compose chmod 777 /usr/local/bin/docker-compose 2、解压压缩包docker-19.03.0.tgz并移动到/usr/bin下 tar -zxvf docker-19.03.0.tgz cp -p docker/* /usr/bin/ cp docker.service /usr/lib/systemd/system/ cp containerd.service /usr/lib/systemd/system/ cp docker.socket /usr/lib/systemd/system/ chmod &#43;x /usr/lib/systemd/system/docker.service 5.文件生效 systemctl daemon-reload 6.设置开机启动 systemctl enable docker 7.启动docker systemctl start docker 8、查看docker版本 docker -v 9、查看docker-compose版本 docker-compose -v 删除docker" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/56c6bf58de727f6debbb856d0e79eb65/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T08:54:16+08:00" />
<meta property="article:modified_time" content="2024-01-09T08:54:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">麒麟系统安装docker、mysql、clickhouse</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1、查看麒麟系统版本信息</p> 
<p>cat /etc/os-release</p> 
<p><img alt="" height="143" src="https://images2.imgbox.com/e6/47/BeNHji95_o.png" width="521"></p> 
<p>麒麟系统版本V10</p> 
<p>64位操作系统<br> # uname -p<br> x86_64</p> 
<p># uname -p<br> aarch64</p> 
<p>内核版本<br> # uname -r<br> 4.19.90-24.4.v2101.ky10.x86_64</p> 
<p>本操作为麒麟系统版本V10，x86_64操作系统</p> 
<p></p> 
<p>一，安装docker</p> 
<p>  文件：</p> 
<p>docker-compose-linux-x86_64</p> 
<p style="margin-left:.0001pt;text-align:justify;">docker-19.03.0.tgz</p> 
<p style="margin-left:.0001pt;text-align:justify;">arm下载地址：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://download.docker.com/linux/static/stable/aarch64/" rel="nofollow" title="Index of linux/static/stable/aarch64/">Index of linux/static/stable/aarch64/</a></p> 
<p style="margin-left:.0001pt;text-align:justify;">deb下载地址（我们下载这个）：</p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://download.csdn.net/download/weixin_60748184/88717628?spm=1001.2014.3001.5503" title="https://download.csdn.net/download/weixin_60748184/88717628?spm=1001.2014.3001.5503">https://download.csdn.net/download/weixin_60748184/88717628?spm=1001.2014.3001.5503</a></p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://download.csdn.net/download/CSDNCDN/87704041" title="https://download.csdn.net/download/CSDNCDN/87704041">https://download.csdn.net/download/CSDNCDN/87704041</a></p> 
<p style="margin-left:.0001pt;text-align:justify;"><a href="https://update.cs2c.com.cn/NS/V10/V10SP1/os/adv/lic/base/x86_64/Packages/" rel="nofollow" title="Index of /NS/V10/V10SP1/os/adv/lic/base/x86_64/Packages/">Index of /NS/V10/V10SP1/os/adv/lic/base/x86_64/Packages/</a></p> 
<pre><code class="language-bash">1、将docker-compose-linux-x86_64拷贝到/usr/local/bin并重命名为docker-compose

cp docker-compose-linux-x86_64 /usr/local/bin/docker-compose
chmod 777 /usr/local/bin/docker-compose

2、解压压缩包docker-19.03.0.tgz并移动到/usr/bin下

tar -zxvf  docker-19.03.0.tgz
cp  -p docker/* /usr/bin/
cp docker.service /usr/lib/systemd/system/
cp containerd.service /usr/lib/systemd/system/
cp docker.socket /usr/lib/systemd/system/

chmod +x /usr/lib/systemd/system/docker.service
5.文件生效
systemctl daemon-reload
6.设置开机启动
systemctl enable docker
7.启动docker 
systemctl start docker

8、查看docker版本
docker -v

9、查看docker-compose版本

docker-compose -v</code></pre> 
<p>删除docker</p> 
<pre><code class="language-bash">1、停止docker服务
systemctl stop docker.socket
systemctl stop docker.service

2、删除配置文件
rm -f /etc/systemd/system/docker.service
rm -rf /usr/bin/docker*
rm -f /usr/local/bin/docker-compose
systemctl daemon-reload
</code></pre> 
<p>二、安装mysql</p> 
<p>安装5.7.22版本mysql</p> 
<p>文件：</p> 
<p>mysql-5.7.22-1.el7.x86_64.rpm-bundle.tar</p> 
<p>下载地址（以下是rpm安装，源码安装需要基础包，安装时间很慢，就不验收源码安装了）：</p> 
<p><a href="https://downloads.mysql.com/archives/community/" rel="nofollow" title="MySQL :: Download MySQL Community Server (Archived Versions)">MySQL :: Download MySQL Community Server (Archived Versions)</a></p> 
<p><img alt="" height="823" src="https://images2.imgbox.com/0f/10/8VP3wBVO_o.png" width="1200"></p> 
<pre><code class="language-bash">1、解压mysql-5.7.22-1.el7.x86_64.rpm-bundle.tar
tar -zxvf mysql-5.7.22-1.el7.x86_64.rpm-bundle.tar

2、解压后有以下rpm文件
mysql-community-client-5.7.22-1.el7.x86_64.rpm
mysql-community-common-5.7.22-1.el7.x86_64.rpm
mysql-community-devel-5.7.22-1.el7.x86_64.rpm
mysql-community-embedded-5.7.22-1.el7.x86_64.rpm
mysql-community-embedded-compat-5.7.22-1.el7.x86_64.rpm
mysql-community-embedded-devel-5.7.22-1.el7.x86_64.rpm
mysql-community-libs-5.7.22-1.el7.x86_64.rpm
mysql-community-libs-compat-5.7.22-1.el7.x86_64.rpm
mysql-community-minimal-debuginfo-5.7.22-1.el7.x86_64.rpm
mysql-community-server-5.7.22-1.el7.x86_64.rpm
mysql-community-server-minimal-5.7.22-1.el7.x86_64.rpm
mysql-community-test-5.7.22-1.el7.x86_64.rpm

3、安装必要的rpm（执行顺序不能乱）
rpm -ivh mysql-community-common-5.7.22-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-5.7.22-1.el7.x86_64.rpm
rpm -ivh mysql-community-libs-compat-5.7.22-1.el7.x86_64.rpm
rpm -ivh mysql-community-client-5.7.22-1.el7.x86_64.rpm
rpm -ivh mysql-community-server-5.7.22-1.el7.x86_64.rpm
rpm -ivh mysql-community-devel-5.7.22-1.el7.x86_64.rpm

4、2.查看mysql服务
mysql --version

5.添加mysql用户
mkdir -p /home/mysql
chown mysql:mysql /home/mysql
useradd -m mysql -s /bin/bash -d /home/mysql

6、初始化mysql
chown -R mysql:mysql /home/mysql
sed -i 's#datadir=/var/lib/mysql#datadir=/home/mysql/data#g' /etc/my.cnf
mysqld --initialize  --user=mysql
service mysqld start

7、显示初始密码
grep 'temporary password' /var/log/mysqld.log

8、修改密码
password=`grep 'temporary password' /var/log/mysqld.log | awk -F ": " '{print $2}' |tail -n 1`
sleep 5
mysql --connect-expired-password -u root -p$password&lt;&lt;EOF
SET PASSWORD FOR 'root'@'localhost'= "123qwe";
use mysql;
update user set host='%' where user='root';
update user set password_expired='N' where user='root';
flush privileges;
quit
EOF









</code></pre> 
<p>删除mysql</p> 
<pre><code class="language-bash">1、停服务
systemctl stop mysqld

2、使用 rpm -qa | grep mysql 指令来显示系统中是否安装有mysql的软件包

rpm -qa | grep mysql


3、如果有的话，则使用 rpm -qa | grep mysql | xargs yum -y remove 指令将全部的安装包删除。
xargs指令的作用是将前面的数据一条一条“喂给”后面的指令，从而达到批量操作的目的。注意 -y 不能省略，否则在批量处理时会出错

rpm -qa | grep mysql | xargs yum -y remove

rpm -qa | grep mariadb
rpm -qa | grep mariadb | xargs yum -y remove

4、删除残留文件
rm -rf  /etc/my*
rm  -rf /home/mysql/
rm -rf  /var/lib/mysql
rm -rf  /usr/share/mysql
rm -rf /var/log/mysqld.log
rm -rf /usr/bin/mysql
rm -rf  /usr/lib64/mysql
rm -rf  /usr/include/mysql
rm -rf  /usr/share/man/man1/mysql.1.gz</code></pre> 
<p></p> 
<p>三、安装clickhouse</p> 
<p>文件：</p> 
<p>clickhouse-common-static-23.12.1.1368.x86_64.rpm</p> 
<p>clickhouse-client-23.12.1.1368.x86_64.rpm</p> 
<p>clickhouse-server-23.12.1.1368.x86_64.rpm</p> 
<p>参考地址;</p> 
<p><a href="https://clickhouse.com/docs/zh/getting-started/install" rel="nofollow" title="https://clickhouse.com/docs/zh/getting-started/install">https://clickhouse.com/docs/zh/getting-started/install</a></p> 
<p>临时下载clickhouse指定版本到指定目录</p> 
<p>yum install --downloadonly  --downloaddir=/home/ppp/ck clickhouse-server clickhouse-client<br> yum install --downloadonly  --downloaddir=/home/ppp/ck clickhouse-server-23.10.1.1976<br> yum install --downloadonly  --downloaddir=/home/ppp/ck clickhouse-client-23.10.1.1976</p> 
<pre><code class="language-bash">rpm -ivh clickhouse-common-static-23.12.1.1368.x86_64.rpm
rpm -ivh clickhouse-server-23.12.1.1368.x86_64.rpm
rpm -ivh clickhouse-client-23.12.1.1368.x86_64.rpm

1、设置clickhouse的8123端口可以让任意机器访问
/etc/clickhouse-server/config.xml
将config.xml中的&lt;listen_host&gt;0.0.0.0&lt;/listen_host&gt; 注释解除掉，然后重启clickhouse-server即可

sed -i "s:&lt;!-- &lt;listen_host&gt;0.0.0.0&lt;/listen_host&gt; --&gt;:&lt;listen_host&gt;0.0.0.0&lt;/listen_host&gt;:" /etc/clickhouse-server/config.xml

安装好后查看status
systemctl status clickhouse-server


启动
systemctl start clickhouse-server


停止
systemctl stop clickhouse-server

进clickhouse客户端
clickhouse-client</code></pre> 
<p></p> 
<p>删除clickhouse</p> 
<pre><code class="language-bash">1.停服务
service clickhouse-server stop

2.检查有哪些clickhouse依赖包：

 yum list installed | grep clickhouse

例如：依赖的包有clickhouse-common-static

3.移除依赖包：

yum remove -y clickhouse-common-static

4.卸载完再确认一下是否卸载干净

yum list installed | grep clickhouse 

5.删除相关配置文件 

rm -rf /var/lib/clickhouse
rm -rf /etc/clickhouse-*
rm -rf /var/log/clickhouse-server
rm -rf /home/clickhouse/*
rm -rf /var/run/clickhouse-server/*</code></pre> 
<p></p> 
<p>麒麟系统下载rpm包地址</p> 
<p><a href="https://download.docker.com/linux/static/stable/x86_64/" rel="nofollow" title="Index of linux/static/stable/x86_64/">Index of linux/static/stable/x86_64/</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1d9e0db2a8406b4bec8a6988d45d5744/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">H3C配置远程登录（console、telnet、ssh）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb3ce552723ef8bcd0d2e5c1d24b9d79/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PositiveSSL和Sectigo的多域名证书</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>