<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>三极管打造树莓派温控风扇 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="三极管打造树莓派温控风扇" />
<meta property="og:description" content="为了防止树莓派长时间开机运转温度过高导致触发过热关机，很多人都给装了散热风扇，但某宝买的风扇插上之后是随着开机一直运转的，不能随温度变化而自动开闭，很多时候做无用功浪费电且产生噪音。本文将以一个硬件小白的程序员视角详细讲述如何用三极管扩展普通的树莓派散热风扇从而实现温控功能。
在制作自己的温控风扇前，本人也查阅了网上其他资料，最终选用了三极管方案，在接线方式中选择了自制杜邦线连接三极管和风扇，这样的好处是线材的长度可以随自己需要裁剪，而且可以轻松塞进树莓派的外壳中。全程无焊接，以后不用也可方便拆卸线材、杜邦头、三极管元件等用作其他用途。
准备材料
以下材料均可某宝购买，为了省事其中杜邦头和杜邦胶壳是买的套件，一盒里边有公母端子各200个，以及各种类型的胶壳。
1.树莓派散热风扇
2.尖嘴钳：用来剥线和压线
3.导线
4.杜邦端子：母端子6个，公端子2个
5.杜邦胶壳：1P1个，2P2个，3P一个（非必须）
6.三极管S8550
第一步：制作杜邦线
杜邦线：电子行业杜邦线可用于实验板的引脚扩展，增加实验项目等。可以非常牢靠地和插针连接，无需焊接，可以快速进行电路试验。
杜邦端子：分为两种，公端子和母端子。
杜邦胶壳：按照可封装的端子数，可插一个端子的为1P，可插两个端子的为2P，四个端子以上的按照排列分为单排XP或双排XP，例如单排4P为可插端子都排列成一排，双排4P为可插端子分为两排，每排两个端子。
上图：
以上简介如须详细了解请自行搜索相关资料。
此处需要制作4跟杜邦线：
其中两根杜邦线两头都带母端子（简称母对母）。一根用于接三极管基极到到主板GPIO14引脚上，另一根用于接三极管集电极到主板地线引脚上。
剩余两根公对母杜邦线，其中一根公端子插风扇正极（红线）母端子，另一头母端子插主板正极，另外一根公端子插风扇负极（黑线）母端子，另一头母端子接三极管发射集上。
本人买的导线为单铜芯导线（外径0.58mm），后来发现制作一根杜邦线仅用一根导线会卡不牢固，容易发生导线与杜邦端子脱落，因此每跟杜邦线都是由两根单铜芯导线组成，因此本处需要裁剪8根导线。
1.剪8根导线，每根导线长度大约7cm。
2.剥线，用尖嘴钳将导线两端分别露出约1cm铜芯。
3.拧线（此处如果买的导线较粗，请略过这一步），将两根导线并排，分别将两端外露铜芯用尖嘴钳拧在一起。因为外露铜芯较细为了防止接触不良，我将外露铜芯反复折叠了两次并拧紧，实际导线外露的长度大概2.5mm左右。
4.压线，将导线外露铜芯压入杜邦端子中，由于手头没有专门的压线钳，此步骤也用尖嘴钳完成。成品见图：
注意：
如果买的导线较粗1cm左右，只需剪4根即可。（但如果太粗的话可能塞不进端子里边），另外剥线时导线两端只要露出大概2-3mm左右即可
第二步：用胶壳封装杜邦端子（不用胶壳的这一步可以略过）
第三步：接线
第四步：写驱动程序
执行驱动脚本前需要安装相关依赖yum install -y python-devel，以及RPi.GPIO模块
wget https://jaist.dl.sourceforge....
附上驱动代码：
#!/usr/bin/python2 import sys import time try: import RPi.GPIO as GPIO except RuntimeError: print(&#34;Error importing RPi.GPIO! This is probably because you need superuser privileges. You can achieve this by using &#39;sudo&#39; to run your script&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4f816d73a2edd8a268f402b102c922ae/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-02T23:54:59+08:00" />
<meta property="article:modified_time" content="2018-12-02T23:54:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">三极管打造树莓派温控风扇</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="article fmt article__content"> 
 <p>为了防止树莓派长时间开机运转温度过高导致触发过热关机，很多人都给装了散热风扇，但某宝买的风扇插上之后是随着开机一直运转的，不能随温度变化而自动开闭，很多时候做无用功浪费电且产生噪音。本文将以一个硬件小白的程序员视角详细讲述如何用三极管扩展普通的树莓派散热风扇从而实现温控功能。</p> 
 <p>在制作自己的温控风扇前，本人也查阅了网上其他资料，最终选用了三极管方案，在接线方式中选择了自制杜邦线连接三极管和风扇，这样的好处是线材的长度可以随自己需要裁剪，而且可以轻松塞进树莓派的外壳中。全程无焊接，以后不用也可方便拆卸线材、杜邦头、三极管元件等用作其他用途。</p> 
 <hr> 
 <p><strong>准备材料</strong><br>以下材料均可某宝购买，为了省事其中杜邦头和杜邦胶壳是买的套件，一盒里边有公母端子各200个，以及各种类型的胶壳。<br>1.树莓派散热风扇<br>2.尖嘴钳：用来剥线和压线<br>3.导线<br>4.杜邦端子：母端子6个，公端子2个<br>5.杜邦胶壳：1P1个，2P2个，3P一个（非必须）<br>6.三极管S8550</p> 
 <hr> 
 <p><strong>第一步：制作杜邦线</strong><br>杜邦线：电子行业杜邦线可用于实验板的引脚扩展，增加实验项目等。可以非常牢靠地和插针连接，无需焊接，可以快速进行电路试验。<br>杜邦端子：分为两种，公端子和母端子。<br>杜邦胶壳：按照可封装的端子数，可插一个端子的为1P，可插两个端子的为2P，四个端子以上的按照排列分为单排XP或双排XP，例如单排4P为可插端子都排列成一排，双排4P为可插端子分为两排，每排两个端子。<br>上图：<br><span class="img-wrap"><img src="https://images2.imgbox.com/fc/c3/QFQqJjIC_o.png" alt="图片描述" title="图片描述"></span></p> 
 <p>以上简介如须详细了解请自行搜索相关资料。</p> 
 <p>此处需要制作4跟杜邦线：<br>其中两根杜邦线两头都带母端子（简称母对母）。一根用于接三极管基极到到主板GPIO14引脚上，另一根用于接三极管集电极到主板地线引脚上。<br>剩余两根公对母杜邦线，其中一根公端子插风扇正极（红线）母端子，另一头母端子插主板正极，另外一根公端子插风扇负极（黑线）母端子，另一头母端子接三极管发射集上。</p> 
 <p>本人买的导线为单铜芯导线（外径0.58mm），后来发现制作一根杜邦线仅用一根导线会卡不牢固，容易发生导线与杜邦端子脱落，因此每跟杜邦线都是由两根单铜芯导线组成，因此本处需要裁剪8根导线。<br>1.剪8根导线，每根导线长度大约7cm。<br>2.剥线，用尖嘴钳将导线两端分别露出约1cm铜芯。<br>3.拧线（此处如果买的导线较粗，请略过这一步），将两根导线并排，分别将两端外露铜芯用尖嘴钳拧在一起。因为外露铜芯较细为了防止接触不良，我将外露铜芯反复折叠了两次并拧紧，实际导线外露的长度大概2.5mm左右。<br><span class="img-wrap"><img src="https://images2.imgbox.com/98/77/AU4Kiq47_o.jpg" alt="图片描述" title="图片描述"></span><br>4.压线，将导线外露铜芯压入杜邦端子中，由于手头没有专门的压线钳，此步骤也用尖嘴钳完成。成品见图：<br><span class="img-wrap"><img src="https://images2.imgbox.com/96/57/8OckLI2q_o.jpg" alt="图片描述" title="图片描述"></span><br><span class="img-wrap"><img src="https://images2.imgbox.com/17/3a/z88TvYH0_o.png" alt="图片描述" title="图片描述"></span><br>注意：<br>如果买的导线较粗1cm左右，只需剪4根即可。（但如果太粗的话可能塞不进端子里边），另外剥线时导线两端只要露出大概2-3mm左右即可</p> 
 <p><strong>第二步：用胶壳封装杜邦端子（不用胶壳的这一步可以略过）</strong><br><span class="img-wrap"><img src="https://images2.imgbox.com/2b/65/XrwmPk6a_o.png" alt="图片描述" title="图片描述"></span></p> 
 <p><strong>第三步：接线</strong><br><span class="img-wrap"><img src="https://images2.imgbox.com/a9/fd/xX5ixNmh_o.png" alt="图片描述" title="图片描述"></span><br><span class="img-wrap"><img src="https://images2.imgbox.com/9d/96/pd7tNJfP_o.png" alt="图片描述" title="图片描述"></span></p> 
 <p><strong>第四步：写驱动程序</strong><br>执行驱动脚本前需要安装相关依赖yum install -y python-devel，以及RPi.GPIO模块<br>wget <a href="https://jaist.dl.sourceforge.net/project/raspberry-gpio-python/RPi.GPIO-0.6.5.tar.gz" rel="nofollow">https://jaist.dl.sourceforge....</a></p> 
 <p>附上驱动代码：</p> 
 <pre><code>#!/usr/bin/python2
import sys
import time
try:
    import RPi.GPIO as GPIO
except RuntimeError:
    print("Error importing RPi.GPIO!  This is probably because you need superuser privileges.  You can achieve this by using 'sudo' to run your script")


def cpu_temp():
    with open("/sys/class/thermal/thermal_zone0/temp", 'r') as f:
        return float(f.read())/1000


def main():
    channel = 14
    GPIO.setmode(GPIO.BCM)
    GPIO.setwarnings(False)

    # open air fan first
    GPIO.setup(channel, GPIO.OUT, initial=GPIO.LOW)
    is_close = False
    while True:
        temp = cpu_temp()
        if is_close == True:
            if temp &gt; 50.0:
                print time.ctime(), temp, 'open air fan'
                GPIO.output(channel, GPIO.LOW)
                is_close = False
        else:
            if temp &lt; 45.0:
                print time.ctime(), temp, 'close air fan'
                GPIO.output(channel, GPIO.HIGH)
                is_close = True

        time.sleep(15.0)
        #print time.ctime(), temp, is_close


if __name__ == '__main__':
    main()
</code></pre> 
 <p>注意：因为这里使用的三极管为PNP型三极管，基极施加低电平时才导通电路，如果是用的NPN型三极管则与之相反。</p> 
 <p>本人的启动脚本：nohup python -u /usr/local/bin/tempctl.py &gt;/usr/local/bin/tempctl.log 2&gt;&amp;1 &amp;<br>如有需要可自己注册为服务并设置开机自启，这里不再赘述。</p> 
 <p><strong>最终成果：</strong><br><span class="img-wrap"><img src="https://images2.imgbox.com/e2/f8/KtvzfRej_o.jpg" alt="图片描述" title="图片描述"></span></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2d97827a47e17795cf35b37be0fd5a29/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">腾讯公司面试题（大数据岗位）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d45c8b275f78a94ccbe99e7a871188d1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">火眼金睛算法，教你海量短文本场景下去重</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>