<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>码点(code point)和代码单元（code unit），以及String对象中操作码点和代码单元 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="码点(code point)和代码单元（code unit），以及String对象中操作码点和代码单元" />
<meta property="og:description" content="一个码点是信息原子的单元。文本是一连串的码点。每一个码点是一个由标准的Unicode编码规定的数字；
一个代码单元是一个用来存储编码码点的一部分的单元。在UTF-8中，一个代码单元是8位；在UTF-16中，一个代码单元是16位。
单独的一个代码单元可能代表一个完整的码点，也可能是一个码点的一部分。
例如，一个雪人字符（☃），是一个Unicode码点，也就是一个Unicode编码所代表的符号，在UTF-8中用3个代码单元表示，在UTF-16中用一个代码单元表示。
String对象中操作码点和代码单元 length()方法是获取给定字符串所需的代码单元数量。charAt(i)方法是获取位置i的代码单元，i介于0~s.leng()-1之间。
“?”符号 在Unicode中编码中，对应的十六进制编码为：1d546。“?”符号 在Java中的代码单元为：&#34;\uD835\uDD46&#34;。
// 以此打印码点 private static void showCodePoint(){ //String str01=&#34;\u1D546&#34;; String str01=&#34;\uD835\uDD46&#34;; try { // 将Unicode字符转为UTF-8格式 byte[] b = str01.getBytes(&#34;UTF-8&#34;); String rb = new String(b,&#34;UTF-8&#34;); // 为rb拼接一些内容 rb = rb&#43;&#34;abc&#34;; // 打印rb的内容 System.out.println(rb); // 打印rb的代码单元长度 System.out.println(rb.length()); // 打印rb的码点长度 int codePointLen = rb.codePointCount(0, rb.length()); System.out.println(codePointLen); System.out.println(&#34;*******************&#34;); // 根据码点长度，遍历各个码点 for(int i=0;i&lt;codePointLen;i&#43;&#43;){ // 码点的偏移量 int index = rb.offsetByCodePoints(0, i); System.out.println(index); // 码点的十进制表示 int cp = rb." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/31c5d336e36e7745a8b7d25dac48b088/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-09T16:57:02+08:00" />
<meta property="article:modified_time" content="2019-01-09T16:57:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">码点(code point)和代码单元（code unit），以及String对象中操作码点和代码单元</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>一个码点是信息原子的单元。文本是一连串的码点。每一个码点是一个由标准的Unicode编码规定的数字；<br> 一个代码单元是一个用来存储编码码点的一部分的单元。在UTF-8中，一个代码单元是8位；在UTF-16中，一个代码单元是16位。<br> 单独的一个代码单元可能代表一个完整的码点，也可能是一个码点的一部分。<br> 例如，一个雪人字符（☃），是一个Unicode码点，也就是一个Unicode编码所代表的符号，在UTF-8中用3个代码单元表示，在UTF-16中用一个代码单元表示。</p> 
<h3>String对象中操作码点和代码单元</h3> 
<p> </p> 
<p>     length()方法是获取给定字符串所需的<strong>代码单元</strong>数量。charAt(i)方法是获取位置i的代码单元，i介于0~s.leng()-1之间。</p> 
<p>     “?”符号 在Unicode中编码中，对应的十六进制编码为：1d546。“?”符号 在Java中的代码单元为："\uD835\uDD46"。</p> 
<pre class="has"><code class="language-java">// 以此打印码点
private static void showCodePoint(){
    //String str01="\u1D546";
    String str01="\uD835\uDD46";
    try {
        // 将Unicode字符转为UTF-8格式
        byte[] b = str01.getBytes("UTF-8");
        String rb = new String(b,"UTF-8");
        // 为rb拼接一些内容
        rb = rb+"abc";
        // 打印rb的内容
        System.out.println(rb);
        // 打印rb的代码单元长度
        System.out.println(rb.length());
        // 打印rb的码点长度
        int codePointLen = rb.codePointCount(0, rb.length());
        System.out.println(codePointLen);
        System.out.println("*******************");
        // 根据码点长度，遍历各个码点
        for(int i=0;i&lt;codePointLen;i++){
            // 码点的偏移量
            int index = rb.offsetByCodePoints(0, i);
            System.out.println(index);
            // 码点的十进制表示
            int cp = rb.codePointAt(index);
            // 码点的十六进制表示
            String cpHex = Integer.toHexString(cp);
            System.out.println(cp+" , "+cpHex);
        }
    } catch (Exception e) {
        System.err.println(e);
    }
}</code></pre> 
<p>上面的代码，打印出的结果如下：</p> 
<blockquote> 
 <p>?abc</p> 
 <p>5</p> 
 <p>4</p> 
 <p>*******************</p> 
 <p>0</p> 
 <p>120134 , 1d546</p> 
 <p>2</p> 
 <p>97 , 61</p> 
 <p>3</p> 
 <p>98 , 62</p> 
 <p>4</p> 
 <p>99 , 63</p> 
</blockquote> 
<p>【正向操作】遍历一个字符串，并依次参看每一个码点：</p> 
<pre class="has"><code class="language-java">// 遍历一个字符串并查看每一个码点
private static void printCodePoint(){
    String str01="\uD835\uDD46";
    String str02 = str01+"hello"+str01+"World";
    int i=0;
    // 判断i是否小于str02的代码单元长度
    while(i&lt;str02.length()){
        System.out.println("i: "+i);
        // 码点的十进制表示
        int cp = str02.codePointAt(i);
        // 码点的十六进制表示
        String cpHex = Integer.toHexString(cp);
        System.out.println(cp+" , "+cpHex);
        // 判断是否为补充码点，如果是补充码点就加2，如果不是补充码点就加1
        if(Character.isSupplementaryCodePoint(cp)) i+=2;
        else i++;
    }
}</code></pre> 
<p>【回退操作】从后往前操作，遍历字符串，并查看每一个码点</p> 
<pre class="has"><code class="language-java">// 从后往前操作，遍历字符串，并查看每一个码点
private static void fromLastLoopCodePoint(){
    String str01="\uD835\uDD46";
    String str02 = str01+"hello"+str01+"World";
    // 代码单元的长度
    int codeUtilLen=str02.length();
    for(int i=codeUtilLen;i&gt;0;){
        i--;
        if(Character.isSurrogate(str02.charAt(i))) i--;

        System.out.println("i: "+i);
        // 码点的十进制
        int cp = str02.codePointAt(i);
        //码点的十六进制
        String cpHex = Integer.toHexString(cp);
        System.out.println(cp+" , "+cpHex);
    }
}</code></pre> 
<p>上面块代码打印的结果如下：</p> 
<blockquote> 
 <p>正向遍历                                回退操作<br> i: 0                                      i: 13<br> 120134 , 1d546                            100 , 64<br> i: 2                                      i: 12<br> 104 , 68                                  108 , 6c<br> i: 3                                      i: 11<br> 101 , 65                                  114 , 72<br> i: 4                                      i: 10<br> 108 , 6c                                  111 , 6f<br> i: 5                                      i: 9<br> 108 , 6c                                  87 , 57<br> i: 6                                      i: 7<br> 111 , 6f                                  120134 , 1d546<br> i: 7                                      i: 6<br> 120134 , 1d546                            111 , 6f<br> i: 9                                      i: 5<br> 87 , 57                                   108 , 6c<br> i: 10                                     i: 4<br> 111 , 6f                                  108 , 6c<br> i: 11                                     i: 3<br> 114 , 72                                  101 , 65<br> i: 12                                     i: 2<br> 108 , 6c                                  104 , 68<br> i: 13                                     i: 0<br> 100 , 64                                  120134 , 1d546</p> 
</blockquote> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/73b2650e7bacc068c955dba0ebb3df23/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">gpon学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8ce11a50f2bef1b26855df425b0d51e6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">贝叶斯决策理论对CIFAR-10数据图像分类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>