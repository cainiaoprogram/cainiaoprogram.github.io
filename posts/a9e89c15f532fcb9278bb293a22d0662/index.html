<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>2021-2022-1 20212813《Linux内核原理与分析》第二周作业 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="2021-2022-1 20212813《Linux内核原理与分析》第二周作业" />
<meta property="og:description" content="反汇编一个简单的C程序 一、实验过程二、实验分析 一、实验过程 本次实验反汇编的C语言程序为：
使用gcc –S –o main.s main.c -m32命令将main.c中的程序编译成汇编代码，并生成main.s文件，使用cat main.s查看编译结果如下图所示：
二、实验分析 删除多余的代码段后得到的汇编代码如下：
g: pushl	%ebp movl	%esp, %ebp movl	8(%ebp), %eax addl	$2813, %eax popl	%ebp ret f: pushl	%ebp movl	%esp, %ebp subl	$4, %esp movl	8(%ebp), %eax movl	%eax, (%esp) call	g leave ret main: pushl	%ebp movl	%esp, %ebp subl	$4, %esp movl	$2813, (%esp) call	f addl	$1, %eax leave ret 对该段汇编代码的分析如下：
其中需要注意的几点：
调用函数的现场保护" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a9e89c15f532fcb9278bb293a22d0662/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-02T22:53:00+08:00" />
<meta property="article:modified_time" content="2021-10-02T22:53:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">2021-2022-1 20212813《Linux内核原理与分析》第二周作业</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>反汇编一个简单的C程序</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、实验过程</a></li><li><a href="#_8" rel="nofollow">二、实验分析</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、实验过程</h2> 
<p>本次实验反汇编的C语言程序为：</p> 
<p><img src="https://images2.imgbox.com/53/d4/wAT0CvQo_o.png" alt="在这里插入图片描述"><br> 使用<code>gcc –S –o main.s main.c -m32</code>命令将main.c中的程序编译成汇编代码，并生成main.s文件，使用<code>cat main.s</code>查看编译结果如下图所示：</p> 
<p><img src="https://images2.imgbox.com/fc/df/7FkFjfxm_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="_8"></a>二、实验分析</h2> 
<p>删除多余的代码段后得到的汇编代码如下：</p> 
<pre><code class="prism language-bash">g:
	pushl	%ebp
	movl	%esp, %ebp
	movl	<span class="token number">8</span><span class="token punctuation">(</span>%ebp<span class="token punctuation">)</span>, %eax
	addl	<span class="token variable">$2813</span>, %eax
	popl	%ebp
	ret
f:
	pushl	%ebp
	movl	%esp, %ebp
	subl	<span class="token variable">$4</span>, %esp
	movl	<span class="token number">8</span><span class="token punctuation">(</span>%ebp<span class="token punctuation">)</span>, %eax
	movl	%eax, <span class="token punctuation">(</span>%esp<span class="token punctuation">)</span>
	call	g
	leave
	ret
main:
	pushl	%ebp
	movl	%esp, %ebp
	subl	<span class="token variable">$4</span>, %esp
	movl	<span class="token variable">$2813</span>, <span class="token punctuation">(</span>%esp<span class="token punctuation">)</span>
	call	f
	addl	<span class="token variable">$1</span>, %eax
	leave
	ret
</code></pre> 
<p>对该段汇编代码的分析如下：<br> <img src="https://images2.imgbox.com/b1/9b/2R8Ee9Nb_o.png" alt="在这里插入图片描述">其中需要注意的几点：</p> 
<ol><li>调用函数的现场保护<br> 体现出的保护代码如下，主要起到对当前堆栈栈顶的保护</li></ol> 
<pre><code class="prism language-bash">	pushl	%ebp
	movl	%esp, %ebp
</code></pre> 
<ol start="2"><li>参数的传递与获取<br> 调用函数时要传递的参数通过压栈的方式传递给被调用函数：</li></ol> 
<pre><code class="prism language-bash">	subl	<span class="token variable">$4</span>, %esp
	movl	<span class="token variable">$2813</span>, <span class="token punctuation">(</span>%esp<span class="token punctuation">)</span>
</code></pre> 
<p>参数获取时需要从堆栈中获取：</p> 
<pre><code class="prism language-bash">	movl	<span class="token number">8</span><span class="token punctuation">(</span>%ebp<span class="token punctuation">)</span>, %eax
</code></pre> 
<p>工作过程中堆栈的变化过程如图所示：<br> <img src="https://images2.imgbox.com/6c/56/g71dD7dM_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a6fac1b7fd1fdcc330ddb006b3f748d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最小栈_辅助栈存储最小元素</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c35c93e99e7b35ef33a7a5bdf6b0b85a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Oracle第二章练习题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>