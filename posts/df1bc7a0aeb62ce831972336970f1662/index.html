<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于的python的文件判断、处理，地址存表的模块 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于的python的文件判断、处理，地址存表的模块" />
<meta property="og:description" content="import pandas as pd import numpy as np data = [[&#39;E:/桌面/数据&#39;, &#34;.csv&#34;,1], [&#39;K:/文件名&#39;, &#34;.csv&#34;, 1], [&#39;E:/桌面/数据2&#39;, &#34;.csv&#34;, 1]] df = pd.DataFrame(data, columns=[&#39;address&#39;,&#34;format&#34;, &#39;times&#39;]) df 做表
df.to_csv(&#34;E:/桌面/地址.csv&#34;,index=True) 保存
def address(address): flie_a = pd.read_csv(&#34;E:/桌面/地址.csv&#34;) flie_a.drop(columns=&#39;Unnamed: 0&#39;, axis=1, inplace=True) # print(flie) row = flie_a.loc[flie_a[&#34;address&#34;] == address] index = (row.index).tolist() if address == &#34;调用事件&#34;: flie_s = flie_a.groupby(&#34;address&#34;).max().sort_values(&#34;times&#34;, ascending=False) return flie_s.index,&#34;无&#34; else: pass if os.path.exists(address) == True: # print(&#34;可以找到文件&#34;) name = os.path.split(address) f = name[1]." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/df1bc7a0aeb62ce831972336970f1662/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-17T12:23:17+08:00" />
<meta property="article:modified_time" content="2023-07-17T12:23:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于的python的文件判断、处理，地址存表的模块</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <pre><code class="language-python">import pandas as pd
import numpy as np
data = [['E:/桌面/数据', ".csv",1], ['K:/文件名', ".csv", 1], 
        ['E:/桌面/数据2', ".csv", 1]]
df = pd.DataFrame(data, columns=['address',"format", 'times'])
df</code></pre> 
<p> 做表</p> 
<pre><code class="language-python">df.to_csv("E:/桌面/地址.csv",index=True)</code></pre> 
<p>保存</p> 
<pre><code class="language-python">        def address(address):
            flie_a = pd.read_csv("E:/桌面/地址.csv")
            flie_a.drop(columns='Unnamed: 0', axis=1, inplace=True)
            # print(flie)
            row = flie_a.loc[flie_a["address"] == address]
            index = (row.index).tolist()
            if address == "调用事件":
                flie_s = flie_a.groupby("address").max().sort_values("times", ascending=False)
                return flie_s.index,"无"
            else:
                pass
            if os.path.exists(address) == True:
                # print("可以找到文件")
                name = os.path.split(address)
                f = name[1].split('.')
                address = name[0] + "/" + f[0]
                f = "." + f[1]
            elif os.path.exists(address) == False:
                # print("找不到文件")
                f = ""
                if os.path.exists(address + ".csv") == True:
                    f = ".csv"
                elif os.path.exists(address + ".xls") == True:
                    f = ".xls"
                elif os.path.exists(address + ".xls") == True:
                    f = ".xlsx"
            else:
                print("其他问题")
                pass
            # print(address+f)
            if os.path.exists(address + f) == True:
                if row.empty == True:
                    flie_a = flie_a.append({"address": address, "format": f, "times": 1}, ignore_index=True)
                elif row.empty == False:
                    flie_a.loc[index] = [address, f, int(row["times"].values) + 1]
                else:
                    pass
                flie_a.to_csv("E:/桌面/地址.csv")
                flie_s = flie_a.groupby("address").max().sort_values("times", ascending=False)
                # print(flie_s)
                print(row["format"].values)
                if row["format"].values == None:
                    r ="无"
                elif row["format"].values != None:
                    r=row["format"].values[0]
                else:
                    r = "无"
                return flie_s.index, r

            else:
                return "无", "无"
                pass
        add ="调用事件"
        get_a,get_f = address(add)
        title = st.sidebar.text_input('输入地址', '')
        if title !="":
            if st.sidebar.button("是否用此地址"):
                get_a,get_f = address(title)
                if get_f =="无":
                    get_a, get_f = address(add)
            else:
                pass
        title1 = st.sidebar.selectbox("选择文件",get_a)
        get_a, get_f = address(title1)
        sep = st.sidebar.selectbox("文件分隔符", (",", "\t","|"))
        encoding = st.sidebar.selectbox("文件字符类型", ("GBK", "UTF-8"))
        header = st.sidebar.selectbox("表头", (int("0"), None,[0,1,3]))
        flie = pd.read_csv(title1+get_f, encoding=encoding,sep= sep,header=header)
        stats = os.stat(title1+get_f)
        st.write("读取文件成功！文件大小为：%.1f" % (stats.st_size / 1024 / 1024), "MB")</code></pre> 
<p>        def address(address):<br>             flie_a = pd.read_csv("E:/桌面/地址.csv")<br>             flie_a.drop(columns='Unnamed: 0', axis=1, inplace=True)<br>             # print(flie)<br>             row = flie_a.loc[flie_a["address"] == address]<br>             index = (row.index).tolist()<br>             if address == "调用事件":<br>                 flie_s = flie_a.groupby("address").max().sort_values("times", ascending=False)<br>                 return flie_s.index,"无"<br>             else:<br>                 pass<br>             if os.path.exists(address) == True:<br>                 # print("可以找到文件")<br>                 name = os.path.split(address)<br>                 f = name[1].split('.')<br>                 address = name[0] + "/" + f[0]<br>                 f = "." + f[1]<br>             elif os.path.exists(address) == False:<br>                 # print("找不到文件")<br>                 f = ""<br>                 if os.path.exists(address + ".csv") == True:<br>                     f = ".csv"<br>                 elif os.path.exists(address + ".xls") == True:<br>                     f = ".xls"<br>                 elif os.path.exists(address + ".xls") == True:<br>                     f = ".xlsx"<br>             else:<br>                 print("其他问题")<br>                 pass<br>             # print(address+f)<br>             if os.path.exists(address + f) == True:<br>                 if row.empty == True:<br>                     flie_a = flie_a.append({"address": address, "format": f, "times": 1}, ignore_index=True)<br>                 elif row.empty == False:<br>                     flie_a.loc[index] = [address, f, int(row["times"].values) + 1]<br>                 else:<br>                     pass<br>                 flie_a.to_csv("E:/桌面/地址.csv")<br>                 flie_s = flie_a.groupby("address").max().sort_values("times", ascending=False)<br>                 # print(flie_s)<br>                 print(row["format"].values)<br>                 if row["format"].values == None:<br>                     r ="无"<br>                 elif row["format"].values != None:<br>                     r=row["format"].values[0]<br>                 else:<br>                     r = "无"<br>                 return flie_s.index, r</p> 
<p>            else:<br>                 return "无", "无"<br>                 pass<br>         add ="调用事件"<br>         get_a,get_f = address(add)<br>         title = st.sidebar.text_input('输入地址', '')<br>         if title !="":<br>             if st.sidebar.button("是否用此地址"):<br>                 get_a,get_f = address(title)<br>                 if get_f =="无":<br>                     get_a, get_f = address(add)<br>             else:<br>                 pass<br>         title1 = st.sidebar.selectbox("选择文件",get_a)<br>         get_a, get_f = address(title1)<br>         sep = st.sidebar.selectbox("文件分隔符", (",", "\t","|"))<br>         encoding = st.sidebar.selectbox("文件字符类型", ("GBK", "UTF-8"))<br>         header = st.sidebar.selectbox("表头", (int("0"), None,[0,1,3]))<br>         flie = pd.read_csv(title1+get_f, encoding=encoding,sep= sep,header=header)<br>         stats = os.stat(title1+get_f)<br>         st.write("读取文件成功！文件大小为：%.1f" % (stats.st_size / 1024 / 1024), "MB")</p> 
<p>这里用的是streamlit框架</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/157ccb69ff6640f4889b3d7ac0a60587/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AltiumDesigner中PCB无法选中元器件的解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3b2c2e4669ed6ab4760ed5b7c4bc5383/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Redis7分布式缓存之高阶</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>