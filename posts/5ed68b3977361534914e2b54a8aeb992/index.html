<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>pycharm和数据库链接 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="pycharm和数据库链接" />
<meta property="og:description" content="数据库连接 pycharm 社区版链接mysql数据库
Pycharm社区版连接数据库
解决pycharm连接mysql报错（DB Navigator-Connection error）
Error: 1045
学习 python3基础：操作mysql数据库
Python3 MySQL 数据库连接 - PyMySQL 驱动-菜鸟教程
Python异常处理及常见报错解决
# 函数介绍 pymysql.connect() #连接数据库函数 conn.cursor() #获取游标 #创建pythonBD数据库 cursor.execute(&#39;CREATE DATABASE IF NOT EXISTS pythonDB;&#39;) cursor.close()#先关闭游标 conn.close()#再关闭数据库连接 #创建user表 cursor.execute(&#39;DROP TABLE IF EXISTS EMPLOYEE;&#39;) sql= &#34;&#34;&#34;CREATE TABLE EMPLOYEE( FIRST_NAME CHAR(20) NOT NULL, LAST_NAME CHAR(20) ， PRIMARY KEY (FIRST_NAME) )&#34;&#34;&#34; cursor.execute(sql) #取一条数据 res=cur.fetchone() cursor.fetchone() #获取游标所在处的一行数据，返回元组，没有返回None cursor.fetchmany(size) #接受size行返回结果行。如果size大于返回的结果行的数量，则会返回cursor.arraysize条数据。 cursor. fetchall() #接收全部的返回结果行。 rowcount #这是一个只读属性，并返回执行execute()方法后影响的行数。 # 创建数据库 import pymysql #打开数据库连接 conn = pymysql." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5ed68b3977361534914e2b54a8aeb992/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T19:00:27+08:00" />
<meta property="article:modified_time" content="2023-04-24T19:00:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">pycharm和数据库链接</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="SAPeo">数据库连接</h2> 
<p id="uacb8ec0a"><a href="https://blog.csdn.net/weixin_42081389/article/details/107080802?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=pycharm%20%E7%A4%BE%E5%8C%BA%E7%89%88%E9%93%BE%E6%8E%A5mysql%E6%95%B0%E6%8D%AE%E5%BA%93&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-107080802.nonecase&amp;spm=1018.2226.3001.4187" title="pycharm 社区版链接mysql数据库">pycharm 社区版链接mysql数据库</a></p> 
<p id="u602df230"><a href="https://blog.csdn.net/weixin_44852025/article/details/113406864?ops_request_misc=&amp;request_id=&amp;biz_id=102&amp;utm_term=Pycharm%E7%A4%BE%E5%8C%BA%E7%89%88%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-113406864.142%5Ev13%5Epc_search_result_control_group,157%5Ev14%5Enew_3&amp;spm=1018.2226.3001.4187" title="Pycharm社区版连接数据库">Pycharm社区版连接数据库</a></p> 
<p id="u6840c9d7"><a href="http://t.csdn.cn/G7TGB" rel="nofollow" title="解决pycharm连接mysql报错（DB Navigator-Connection error）">解决pycharm连接mysql报错（DB Navigator-Connection error）</a></p> 
<p id="u8e524d01"><a href="http://t.csdn.cn/n7Cjd" rel="nofollow" title="Error: 1045">Error: 1045</a></p> 
<h2 id="jJ44z">学习</h2> 
<p id="uab68a300"><a href="https://blog.csdn.net/kongsuhongbaby/article/details/84948205?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165508989116782184614968%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165508989116782184614968&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-84948205-null-null.142%5Ev13%5Epc_search_result_control_group,157%5Ev14%5Enew_3&amp;utm_term=python3%E5%9F%BA%E7%A1%80%EF%BC%9A%E6%93%8D%E4%BD%9Cmysql%E6%95%B0%E6%8D%AE%E5%BA%93&amp;spm=1018.2226.3001.4187" title="python3基础：操作mysql数据库">python3基础：操作mysql数据库</a></p> 
<p id="u93399a74"><a href="https://www.runoob.com/python3/python3-mysql.html" rel="nofollow" title="Python3 MySQL 数据库连接 - PyMySQL 驱动-菜鸟教程">Python3 MySQL 数据库连接 - PyMySQL 驱动-菜鸟教程</a></p> 
<p id="ubd416926"><a href="https://blog.csdn.net/alice_tl/article/details/78347106?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165508992416781435450167%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=165508992416781435450167&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-78347106-null-null.142%5Ev13%5Epc_search_result_control_group,157%5Ev14%5Enew_3&amp;utm_term=Python%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E5%8F%8A%E5%B8%B8%E8%A7%81%E6%8A%A5%E9%94%99%E8%A7%A3%E5%86%B3&amp;spm=1018.2226.3001.4187" title="Python异常处理及常见报错解决">Python异常处理及常见报错解决</a></p> 
<pre><code class="language-python"># 函数介绍
pymysql.connect() #连接数据库函数
conn.cursor() #获取游标
#创建pythonBD数据库
cursor.execute('CREATE DATABASE IF NOT EXISTS pythonDB;')
cursor.close()#先关闭游标
conn.close()#再关闭数据库连接
#创建user表
cursor.execute('DROP TABLE IF EXISTS EMPLOYEE;')
sql= """CREATE TABLE EMPLOYEE(
        FIRST_NAME  CHAR(20)    NOT NULL,
        LAST_NAME   CHAR(20)    ，
        PRIMARY KEY (FIRST_NAME)
        )"""
cursor.execute(sql)
#取一条数据
res=cur.fetchone()
cursor.fetchone() #获取游标所在处的一行数据，返回元组，没有返回None
cursor.fetchmany(size) #接受size行返回结果行。如果size大于返回的结果行的数量，则会返回cursor.arraysize条数据。
cursor. fetchall() #接收全部的返回结果行。
rowcount #这是一个只读属性，并返回执行execute()方法后影响的行数。</code></pre> 
<pre><code class="language-python"># 创建数据库
import pymysql
#打开数据库连接
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", database="shop", charset="utf8")
#获取游标 即使用cursor()方法创建一个游标对象 cursor
cursor=conn.cursor()
#创建pythonDB数据库
cursor.execute('CREATE DATABASE IF NOT EXISTS pythonDB;')
cursor.close()#先关闭游标
conn.close()#再关闭数据库连接
print('创建pythonBD数据库成功')</code></pre> 
<pre><code class="language-python"># 创建数据表
import pymysql
#打开数据库连接
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", database="pythonDB", charset="utf8")
#获取游标
cursor=conn.cursor()
print(cursor)

#创建user表
cursor.execute('DROP TABLE IF EXISTS EMPLOYEE;')
sql= """CREATE TABLE EMPLOYEE(
        FIRST_NAME  CHAR(20)    NOT NULL,
        LAST_NAME   CHAR(20)    ,
        AGE         INT,
        SEX         CHAR(1),
        INCOME      FLOAT,
        PRIMARY KEY (FIRST_NAME)
        )"""

cursor.execute(sql)
cursor.close()#先关闭游标
conn.close()#再关闭数据库连接
print('创建数据表成功')
#插入多条数据
insert=cur.executemany(sql,[('Harry','Potter',17,'M',8000),('Hermione','Granger',17,'F',7000),('Ron','Weasle',17,'M',6000)])</code></pre> 
<pre><code class="language-python"># 插入单条数据
'''插入单条数据'''
import pymysql
#打开数据库连接
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')

cursor=conn.cursor()#获取游标

insert=cursor.execute("insert into employee values('Mac','Mohan',20,'M',2000)")
print('添加语句受影响的行数：',insert)

#方法二
sql = """INSERT INTO EMPLOYEE
        VALUES('Guilan', 'Chen', 21, 'F', 9998)"""
try:
    #执行sql语句
    cursor.execute(sql)
    #提交到数据库执行
    conn.commit()
    print('sql执行成功')
except:
    #如果发生错误则回滚
    conn.rollback()

#另一种插入数据的方式，通过字符串传入值
sql="INSERT INTO EMPLOYEE VALUES(%s,%s,%s,%s,%s)"
cursor.execute(sql,('Xin','Zhao',21,'F',9997))

cursor.close()#先关闭游标
conn.close()#再关闭数据库连接</code></pre> 
<pre><code class="language-python"># 插入多条数据
'''插入多条数据'''
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

#另一种插入数据的方式，通过字符传入值
sql = "INSERT INTO EMPLOYEE VALUES (%s,%s,%s,%s,%s)"
insert=cur.executemany(sql,[('Harry','Potter',17,'M',8000),('Hermione','Granger',17,'F',7000),('Ron','Weasle',17,'M',6000)])
print('批量插入返回受影响的行数：',insert)
cur.close()
conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 取一条数据
'''fetchone'''
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

cur.execute("SELECT * FROM EMPLOYEE;")
while 1:
    res=cur.fetchone()
    if res is None:
        #表示已经取完结果集
        break
    print(res)
cur.close()
conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 取多条数据
'''fetchmany'''
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

cur.execute("SELECT * FROM EMPLOYEE;")
#取3条数据
resTuple=cur.fetchmany(3)
print(type(resTuple))
for res in resTuple:
    print(res)
cur.close()
conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 取所有数据（该代码并不输出所有数据）
'''fetchall'''
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

cur.execute("SELECT * FROM EMPLOYEE;")
#取所有数据
resTuple=cur.fetchall()
print(type(resTuple))
print('共%d条数据'%len(resTuple))

cur.close()
conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 条件查询
'''fetchall'''
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

# SQL 查询语句
sql = "SELECT * FROM EMPLOYEE WHERE INCOME &gt; %s" % (9000)
try:
    #执行SQL语句
    cur.execute(sql)
    #获取所有记录列表
    results = cur.fetchall()
    for row in results:
        fname = row[0]
        lname = row[1]
        age = row[2]
        sex = row[3]
        income = row[4]
        #打印结果
        print("fname=%s,lname=%s,age=%s,sex=%s,income=%s" % \
              (fname,lname,age,sex,income))
except:
    print("Error:unable to fetch data")

# 关闭数据库连接
cur.close()
#conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 更新多条数据
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

#更新前查询所有数据
cur.execute("SELECT * FROM EMPLOYEE WHERE FIRST_NAME IN ('Qingyang','Guilan');")
print('更新前的数据为：')
for res in cur.fetchall():
    print(res)

print('*'*40)
#更新2条数据
sql="UPDATE EMPLOYEE SET AGE= %s WHERE FIRST_NAME=%s"
update=cur.executemany(sql,[(3,'Qingyang'),(5,'Guilan')])

#更新2条数据后查询所有数据
cur.execute("SELECT * FROM EMPLOYEE WHERE FIRST_NAME IN ('Qingyang','Guilan');")
print('更新后的数据为：')
for res in  cur.fetchall():
    print(res)

cur.close()
conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 还是更新
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

print('*'*40)
#SQL更新语句
sql="UPDATE EMPLOYEE SET AGE=AGE+1 WHERE SEX='%c'" %('M')
try:
    #执行SQL语句
    cur.execute(sql)
    #提交到数据库执行
    conn.commit()
except:
    #发生错误时回滚
    conn.rollback()


cur.close()
conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 删除
'''fetchall'''
import pymysql
#打开数据库连接，不指定数据库
conn = pymysql.connect(host="localhost", user="root", password="abcd1234", charset="utf8")
conn.select_db('pythondb')
#获取游标
cur=conn.cursor()

#删除前查询所有数据
cur.execute("SELECT * FROM EMPLOYEE;")
print('删除前的数据为：')
for res in  cur.fetchall():
    print(res)

print('*'*40)
#删除1条数据
cur.execute("DELETE FROM EMPLOYEE WHERE age=3")
#删除多条数据
sql= "DELETE FROM EMPLOYEE WHERE age=%s"
cur.executemany(sql,[(4),(5)])


#删除后查询所有数据
cur.execute("SELECT * FROM EMPLOYEE;")
print('删除前的数据为：')
for res in  cur.fetchall():
    print(res)

cur.close()
conn.commit()
conn.close()
print('sql执行成功')</code></pre> 
<pre><code class="language-python"># 回滚事务
# 回滚事务
conn.rollback()
cur.execute("SELECT * from EMPLOYEE;")
print('回滚事务后的数据为:')
for res in cur.fetchall():
    print(res)</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6a1bba869e2cdeff8277f1938b6e46ef/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">golang 字符串时间转换成时间戳的方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c35534a1a199016fc4f84b5740234fe5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt QTableView 实现数据改变表格自动刷新</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>