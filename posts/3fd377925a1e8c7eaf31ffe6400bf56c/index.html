<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>四元数 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="四元数" />
<meta property="og:description" content="四元数的基本概念 四元数是简单的超复数。 复数是由实数加上虚数单位 i 组成，其中i^2 = -1。 相似地，四元数都是由实数加上三个虚数单位 i、j、k 组成，每个四元数都是 1、i、j 和 k 的线性组合，即是四元数一般可表示为a &#43; bi&#43; cj &#43; dk，其中a、b、c 、d是实数。
运算关系如下： i^2 = j^2 = k^2 = -1， i^0 = j^0 = k^0 = 1，ij=k，ji=-k，jk=i，kj=-i，ki=j、ik=-j
四元数的模：（a^2&#43;b^2&#43;c^2&#43;d^2）的平方根。
四元数与旋转 四元数可以表达物体绕任意向量轴的旋转，并且和欧拉角度旋转与旋转矩阵的方法相比，其效率更高，操作也更灵活。
四元数的i、j、k的旋转几何意义如下：i旋转代表X轴与Y轴相交平面中X轴正向向Y轴正向的旋转，j旋转代表Z轴与X轴相交平面中Z轴正向向X轴正向的旋转，k旋转代表Y轴与Z轴相交平面中Y轴正向向Z轴正向的旋转，-i、-j、-k分别代表i、j、k旋转的反向旋转。
欧拉旋转需要计算3个旋转分量的作用之和，如下图（a），即沿Z轴的航线（Heading）角度，沿X轴的俯仰（Pitch）角度，以及沿Y轴的横滚（Roll）角度；而四元数只需要对旋转轴V和旋转角度进行设置，如下图（b）。
四元数旋转与欧拉旋转的对应关系：Heading角度与i旋转对应，Roll角度与j旋转对应，Pitch角度与k旋转对应
我们下面使用q = ((x, y, z)，w) = (v, w)，其中v是向量，w是实数，这样的式子来表示一个四元数。
首先，定义一个旋转轴为向量v=(vx, vy, vz)，旋转角度为θ（右手法则的旋转）；然后即可计算得到一个四元数q:
四元数的叠加效果:
定义四元数q1：旋转轴为v1，旋转角度为θ1；定义四元数q2：旋转轴为v2，旋转角度为θ2；定义四元数q3：旋转轴为v3，旋转角度为θ3；则旋转叠加效果为q，其中q=q1*q2*q3。
四元数的运算 定义两个四元数：
四元数加法：p &#43; q 跟复数、向量和矩阵一样，两个四元数之和需要将不同的元素加起来。
加法遵循实数和复数的所有交换律和结合律。
四元数乘法：pq 两个四元数之间的非可换乘积通常被格拉斯曼（Hermann Grassmann）称为积，它的完整型态是︰
由于四元数乘法的非可换性，pq并不等于qp。格拉斯曼积常用在描述许多其他代数函数。qp乘积的向量部分是：
四元数点积： p · q 点积也叫做欧几里德内积，四元数的点积等同于一个四维向量的点积。点积的值是p中每个元素的数值与q中相应元素的数值的乘积的和。这是四元数之间的可换积，并返回一个标量。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3fd377925a1e8c7eaf31ffe6400bf56c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-03-29T16:08:29+08:00" />
<meta property="article:modified_time" content="2020-03-29T16:08:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">四元数</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>四元数的基本概念</h2> 
<p style="text-indent:33px;">四元数是简单的<a href="https://baike.baidu.com/item/%E8%B6%85%E5%A4%8D%E6%95%B0/10724562" rel="nofollow">超复数</a>。 <a href="https://baike.baidu.com/item/%E5%A4%8D%E6%95%B0/254365" rel="nofollow">复数</a>是由<a href="https://baike.baidu.com/item/%E5%AE%9E%E6%95%B0/296419" rel="nofollow">实数</a>加上虚数单位 i 组成，其中i^2 = -1。 相似地，四元数都是由实数加上三个虚数单位 i、j、k 组成，每个四元数都是 1、i、j 和 k 的线性组合，即是四元数一般可表示为a + bi+ cj + dk，其中a、b、c 、d是实数。</p> 
<p style="text-indent:33px;">运算关系如下： i^2 = j^2 = k^2 = -1， i^0 = j^0 = k^0 = 1，ij=k，ji=-k，jk=i，kj=-i，ki=j、ik=-j</p> 
<p style="text-indent:33px;">四元数的<a href="https://baike.baidu.com/item/%E6%A8%A1/13332719" rel="nofollow">模</a>：（a^2+b^2+c^2+d^2）的<a href="https://baike.baidu.com/item/%E5%B9%B3%E6%96%B9%E6%A0%B9/79171" rel="nofollow">平方根</a>。</p> 
<h2>四元数与旋转</h2> 
<p style="text-indent:33px;">四元数可以表达物体绕任意向量轴的旋转，并且和欧拉角度旋转与旋转矩阵的方法相比，其效率更高，操作也更灵活。</p> 
<p style="text-indent:33px;">四元数的i、j、k的旋转几何意义如下：i旋转代表X轴与Y轴相交平面中X轴正向向Y轴正向的旋转，j旋转代表Z轴与X轴相交平面中Z轴正向向X轴正向的旋转，k旋转代表Y轴与Z轴相交平面中Y轴正向向Z轴正向的旋转，-i、-j、-k分别代表i、j、k旋转的反向旋转。</p> 
<p style="text-indent:33px;">欧拉旋转需要计算3个旋转分量的作用之和，如下图（a），即沿Z轴的航线（Heading）角度，沿X轴的俯仰（Pitch）角度，以及沿Y轴的横滚（Roll）角度；而四元数只需要对旋转轴V和旋转角度进行设置，如下图（b）。</p> 
<p style="text-indent:33px;">四元数旋转与欧拉旋转的对应关系：Heading角度与i旋转对应，Roll角度与j旋转对应，Pitch角度与k旋转对应</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="411" src="https://images2.imgbox.com/2c/f3/fw5tZZKE_o.png" width="703"></p> 
<p style="text-indent:33px;">我们下面使用q = ((x, y, z)，w) = (v, w)，其中v是向量，w是实数，这样的式子来表示一个四元数。</p> 
<p style="text-indent:33px;">首先，定义一个旋转轴为向量v=(vx, vy, vz)，旋转角度为θ（右手法则的旋转）；然后即可计算得到一个四元数q:</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="57" src="https://images2.imgbox.com/b4/aa/GYJsg2ya_o.png" width="460"></p> 
<p style="text-indent:33px;">四元数的叠加效果:</p> 
<p style="text-indent:33px;">定义四元数q1：旋转轴为v1，旋转角度为θ1；定义四元数q2：旋转轴为v2，旋转角度为θ2；定义四元数q3：旋转轴为v3，旋转角度为θ3；则旋转叠加效果为q，其中q=q1*q2*q3。</p> 
<h2>四元数的运算</h2> 
<p style="text-indent:33px;">定义两个四元数：</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="19" src="https://images2.imgbox.com/5a/fb/FHwZxwgU_o.png" width="182"></p> 
<p style="text-indent:33px;"><img alt="" class="has" height="19" src="https://images2.imgbox.com/66/0c/FUqyAPi8_o.png" width="178"></p> 
<h4>四元数加法：p + q</h4> 
<p style="text-indent:33px;">跟复数、向量和矩阵一样，两个四元数之和需要将不同的元素加起来。</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="19" src="https://images2.imgbox.com/54/b9/NDe50f5j_o.png" width="394"></p> 
<p style="text-indent:33px;">加法遵循实数和复数的所有<a href="https://baike.baidu.com/item/%E4%BA%A4%E6%8D%A2%E5%BE%8B/2173703" rel="nofollow">交换律</a>和<a href="https://baike.baidu.com/item/%E7%BB%93%E5%90%88%E5%BE%8B/2173834" rel="nofollow">结合律</a>。</p> 
<h4>四元数乘法：pq</h4> 
<p style="text-indent:33px;">两个四元数之间的非可换乘积通常被<a href="https://baike.baidu.com/item/%E6%A0%BC%E6%8B%89%E6%96%AF%E6%9B%BC" rel="nofollow">格拉斯曼</a>（Hermann Grassmann）称为积，它的完整型态是︰</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="19" src="https://images2.imgbox.com/b4/91/pL0esFg3_o.png" width="216"></p> 
<p style="text-indent:33px;"><img alt="" class="has" height="18" src="https://images2.imgbox.com/b6/7f/7i9D9O91_o.png" width="572"></p> 
<p style="text-indent:33px;">由于四元数乘法的非可换性，pq并不等于qp。格拉斯曼积常用在描述许多其他代数函数。qp乘积的<a href="https://baike.baidu.com/item/%E5%90%91%E9%87%8F/1396519" rel="nofollow">向量</a>部分是：</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="19" src="https://images2.imgbox.com/e6/57/6mgEas3a_o.png" width="216"></p> 
<h4>四元数点积： p · q</h4> 
<p style="text-indent:33px;"><a href="https://baike.baidu.com/item/%E7%82%B9%E7%A7%AF" rel="nofollow">点积</a>也叫做欧几里德内积，四元数的点积等同于一个四维向量的点积。点积的值是p中每个元素的数值与q中相应元素的数值的<a href="https://baike.baidu.com/item/%E4%B9%98%E7%A7%AF/10006300" rel="nofollow">乘积</a>的和。这是四元数之间的可换积，并返回一个<a href="https://baike.baidu.com/item/%E6%A0%87%E9%87%8F" rel="nofollow">标量</a>。</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="19" src="https://images2.imgbox.com/17/c0/x4aJj9qa_o.png" width="237"></p> 
<p style="text-indent:33px;">点积可以用格拉斯曼积的形式表示：</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="34" src="https://images2.imgbox.com/72/ab/cMRfsXbi_o.png" width="112"></p> 
<p style="text-indent:33px;">这个积对于从四元数分离出一个<a href="https://baike.baidu.com/item/%E5%85%83%E7%B4%A0/29645" rel="nofollow">元素</a>有用。例如，i项可以从p中这样提出来：</p> 
<p style="text-indent:33px;"><img alt="" class="has" height="17" src="https://images2.imgbox.com/10/4c/Ct33LktP_o.png" width="53"></p> 
<h4>四元数外积：Outer(p,q)</h4> 
<p>欧几里德外积并不常用； 然而因为外积和内积的格拉斯曼积形式的<a href="https://baike.baidu.com/item/%E7%9B%B8%E4%BC%BC/33568" rel="nofollow">相似</a>性，它们总是一同被提及：</p> 
<p><img alt="" class="has" height="34" src="https://images2.imgbox.com/30/a9/BDuGdddp_o.png" width="161"></p> 
<p><img alt="" class="has" height="19" src="https://images2.imgbox.com/5a/8c/vA0QC9uv_o.png" width="199"></p> 
<p><img alt="" class="has" height="18" src="https://images2.imgbox.com/b1/e2/8zfpX4Sn_o.png" width="521"></p> 
<h4>四元数偶积：Even(p,q)</h4> 
<p>四元数偶积也不常用，但是它也会被提到，因为它和奇积的相似性。它是纯<a href="https://baike.baidu.com/item/%E5%AF%B9%E7%A7%B0/1635037" rel="nofollow">对称</a>的积；因此，它是完全可交换的。</p> 
<p><img alt="" class="has" height="33" src="https://images2.imgbox.com/c4/34/yxMKJbow_o.png" width="143"></p> 
<p><img alt="" class="has" height="19" src="https://images2.imgbox.com/6c/12/MQvd4iTR_o.png" width="218"></p> 
<p><img alt="" class="has" height="18" src="https://images2.imgbox.com/d2/68/DPLHbdHf_o.png" width="457"></p> 
<h4>叉积：p × q</h4> 
<p>四元数叉积也称为奇积。它和向量叉积<a href="https://baike.baidu.com/item/%E7%AD%89%E4%BB%B7/9205321" rel="nofollow">等价</a>，并且只返回一个向量值：</p> 
<p><img alt="" class="has" height="32" src="https://images2.imgbox.com/68/cd/DE6mWAGz_o.png" width="106"></p> 
<p><img alt="" class="has" height="14" src="https://images2.imgbox.com/db/82/73W9Zk4y_o.png" width="86"></p> 
<p><img alt="" class="has" height="18" src="https://images2.imgbox.com/40/ed/9WlvYpJs_o.png" width="287"></p> 
<h3>四元数转置：p−1</h3> 
<p>四元数的转置通过</p> 
<p><img alt="" class="has" height="21" src="https://images2.imgbox.com/b3/d5/YoVkgRki_o.png" width="59"></p> 
<p> 被定义。它定义在上面的定义一节，位于<a href="https://baike.baidu.com/item/%E5%B1%9E%E6%80%A7/1405051" rel="nofollow">属性</a>之下（注意变量记法的差异）。其建构方式相同于复倒数（complex inverse）之构造：</p> 
<p><img alt="" class="has" height="39" src="https://images2.imgbox.com/99/7d/mo5vjxJ4_o.png" width="74"></p> 
<p>一个四元数的自身点积是个<a href="https://baike.baidu.com/item/%E7%BA%AF%E9%87%8F/3567411" rel="nofollow">纯量</a>。四元数除以一个纯量等效于乘上此纯量的<a href="https://baike.baidu.com/item/%E5%80%92%E6%95%B0/4793" rel="nofollow">倒数</a>，而使四元数的每个元素皆除以此一除数。</p> 
<h3>四元数除法：p−1q</h3> 
<p>四元数的不可换性导致了</p> 
<p><img alt="" class="has" height="21" src="https://images2.imgbox.com/b6/77/Ol1XfJze_o.png" width="32"></p> 
<p> 和</p> 
<p><img alt="" class="has" height="21" src="https://images2.imgbox.com/33/34/IkB0NATf_o.png" width="33"></p> 
<p> 的不同。这意味着除非p是一个<a href="https://baike.baidu.com/item/%E6%A0%87%E9%87%8F/1530843" rel="nofollow">标量</a>，否则不能使用q/p这一符号。</p> 
<p>四元数纯量部：Scalar(p)</p> 
<p>四元数的标量部分可以用前面所述的点积来<a href="https://baike.baidu.com/item/%E5%88%86%E7%A6%BB/6369610" rel="nofollow">分离</a>出来：</p> 
<p><img alt="" class="has" height="34" src="https://images2.imgbox.com/25/75/OjMfBB1F_o.png" width="116"></p> 
<h3>四元数向量部：Vector(p)</h3> 
<p>四元数的向量部分可以用外积提取出来，就象用点<a href="https://baike.baidu.com/item/%E7%A7%AF%E5%88%86/5749068" rel="nofollow">积分</a>离标量那样：</p> 
<p><img alt="" class="has" height="34" src="https://images2.imgbox.com/38/f3/hTR545bx_o.png" width="266"></p> 
<h3>四元数模：|p|</h3> 
<p>四元数的<a href="https://baike.baidu.com/item/%E7%BB%9D%E5%AF%B9/17865" rel="nofollow">绝对</a><a href="https://baike.baidu.com/item/%E5%80%BC/5873090" rel="nofollow">值</a>是四元数到原点的距离。</p> 
<p><img alt="" class="has" height="24" src="https://images2.imgbox.com/67/ba/ccXqiNeN_o.png" width="273"></p> 
<p>四元数<a href="https://baike.baidu.com/item/%E7%AC%A6%E5%8F%B7/197" rel="nofollow">符号</a>数：sgn(p)</p> 
<p>一复数之符号数乃得出单位圆上，一个方向与原复数相同之<a href="https://baike.baidu.com/item/%E5%A4%8D%E6%95%B0/254365" rel="nofollow">复数</a>。四元数的符号数亦产生单位四元数：</p> 
<p><img alt="" class="has" height="37" src="https://images2.imgbox.com/84/1a/mb3sZHW3_o.png" width="83"></p> 
<h3>四元数<a href="https://baike.baidu.com/item/%E8%BE%90%E8%A7%92/3340380" rel="nofollow">辐角</a>：arg(p)</h3> 
<p>幅角函数可找出一4-向量四元数偏离单位纯量（即：1）之角度。此函数输出一个<a href="https://baike.baidu.com/item/%E7%BA%AF%E9%87%8F/3567411" rel="nofollow">纯量</a>角度。</p> 
<p><img alt="" class="has" height="44" src="https://images2.imgbox.com/b3/3c/hBArfcaP_o.png" width="193"></p> 
<p> </p> 
<h2>参考链接：</h2> 
<p><a href="https://baike.baidu.com/item/%E5%9B%9B%E5%85%83%E6%95%B0/5795379?fr=aladdin" rel="nofollow">https://baike.baidu.com/item/%E5%9B%9B%E5%85%83%E6%95%B0/5795379?fr=aladdin</a></p> 
<p><a href="https://www.cnblogs.com/TIANHUAHUA/p/8031606.html" rel="nofollow">https://www.cnblogs.com/TIANHUAHUA/p/8031606.html</a></p> 
<p><a href="https://blog.csdn.net/allenjiao/article/details/83828021">https://blog.csdn.net/allenjiao/article/details/83828021</a></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0aa30c3faac313a4b795d9f29992e8a4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">最新Win10&#43;Anaconda&#43;TensorFlow&#43;OpenCV安装教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6e57b08b79493e37cd75315384a16669/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Websocket原理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>