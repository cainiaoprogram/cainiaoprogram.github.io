<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DSP的C语言学习 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="DSP的C语言学习" />
<meta property="og:description" content="DSP的C语言学习 CMD文件的作用： 在DSP里，程序执行过程中也有好多地方需要跳转，所以需要跳转的目标地址。如果你在编程序时知道你所要跳转的地址，那就更好的，但实际上，这是很不好控制的。所以就产生了.CMD。它有一个最大的好处，可以把每个段分配地址，所以比如你想从一个段跳到另一个段的时候，就很方便的知道这个段的起始地址。 CMD 它是用来分配rom和ram空间用的,告诉链接程序怎样计算地址和分配空间.所以不同的芯片就有不同大小的rom和ram.放用户程序的地方也不尽相同.所以要根据你的芯片进行修改.cmd文件分两部分.MEMORY和SECTIONS. MEMORY { PAGE 0 .......... PAGE 1......... } SECTIONS {SECTIONS { .vectors ................. .reset ................. ................ } MEMORY是用来指定芯片的rom和ram的大小和划分出几个区间. PAGE 0 对应rom;PAGE 1对应ram PAGE 里包含的区间名字与其后面的参数反映了该区间的起始地址和长度. 如: PAGE 0 : VECS(区间名字): origin(起始地址) = 0h , length (长度)=040h /*VECTORS*/ SECTIONS：(在程序里添加下面的段名如.vectors.用来指定该段名以下，另一个段名以上的程序(属于PAGE0)或数据(属于PAGE1)放到“&gt;”符号后的空间名字所在的地方。 如引用字段名“.vectors ”的程序或数据将被放到VECS ，VECS是PAGE0即是ROM空间 00H至40H的地方 SECTIONS { .vectors : { } &gt; VECS PAGE 0 /* Interrupt vector table */ .reset : { } &gt; VECS PAGE 0 /* Reset code */ ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/72e4d16273e58db3c162fc184517b09c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2007-04-30T11:12:00+08:00" />
<meta property="article:modified_time" content="2007-04-30T11:12:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">DSP的C语言学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <table style="WORD-BREAK: break-all" cellspacing="0" cellpadding="0" width="760" align="center" border="0" class="center_tdbgall"><tbody><tr align="center"><td class="main_ArticleTitle" style="WORD-BREAK: break-all" colspan="2" height="50">DSP的C语言学习</td></tr><tr><td class="main_tdbg_760" id="fontzoom" style="WORD-BREAK: break-all" colspan="2" height="300"> 
    <div class="article_content">
          CMD文件的作用： 在DSP里，程序执行过程中也有好多地方需要跳转，所以需要跳转的目标地址。如果你在编程序时知道你所要跳转的地址，那就更好的，但实际上，这是很不好控制的。所以就产生了.CMD。它有一个最大的好处，可以把每个段分配地址，所以比如你想从一个段跳到另一个段的时候，就很方便的知道这个段的起始地址。 
     <br>CMD 它是用来分配rom和ram空间用的,告诉链接程序怎样计算地址和分配空间.所以不同的芯片就有不同大小的rom和ram.放用户程序的地方也不尽相同.所以要根据你的芯片进行修改.cmd文件分两部分.MEMORY和SECTIONS. 
     <br>MEMORY 
     <br>{ 
     <br>  PAGE 0 .......... 
     <br>  PAGE 1......... 
     <br>} 
     <br>SECTIONS 
     <br>{SECTIONS 
     <br>{ 
     <br>.vectors ................. 
     <br>.reset ................. 
     <br>................ 
     <br>} 
     <br> 
     <br>MEMORY是用来指定芯片的rom和ram的大小和划分出几个区间. 
     <br>PAGE 0 对应rom;PAGE 1对应ram 
     <br>PAGE 里包含的区间名字与其后面的参数反映了该区间的起始地址和长度. 
     <br>如: PAGE 0 : VECS(区间名字): origin(起始地址) = 0h , length (长度)=040h /*VECTORS*/ 
     <br>SECTIONS：(在程序里添加下面的段名如.vectors.用来指定该段名以下，另一个段名以上的程序(属于PAGE0)或数据(属于PAGE1)放到“&gt;”符号后的空间名字所在的地方。 
     <br>如引用字段名“.vectors ”的程序或数据将被放到VECS ，VECS是PAGE0即是ROM空间 00H至40H的地方 
     <br>SECTIONS 
     <br>{ 
     <br>.vectors : { } &gt; VECS PAGE 0 /* Interrupt vector table */ 
     <br>.reset :   { } &gt; VECS PAGE 0 /* Reset code */ 
     <br>............ 
     <br>} 
     <br>.vectors，.reset都是段名。  加不加“.”随你便，即.vectors表示名为  “.vectors”的段。 
     <br>{}表示段的全部，{}&gt; VECS PAGE 0表示将段的全部放入名为 VECS PAGE 0的内存区。 
     <br>example: 
     <br>/****************************************************************************/ 
     <br> 
     <br>/******** Specify the memory configuration **********************************/ 
     <br> 
     <br>/****************************************************************************/ 
     <br> 
     <br>MEMORY 
     <br>{ 
     <br>PAGE 0: VECS: origin = 00000h, length = 00040h 
     <br>         LOW: origin = 00040h, length = 03FC0h 
     <br>       SARAM: origin = 04000h, length = 00800h 
     <br>          B0: origin = 0FF00h, length = 00100h 
     <br>PAGE 1: B0: origin = 00200h, length = 00100h 
     <br>        B1: origin = 00300h, length = 00100h 
     <br>        B2: origin = 00060h, length = 00020h 
     <br>     SARAM: origin = 08000h, length = 00800h 
     <br>} 
     <br>/*--------------------------------------------------------------------------*/ 
     <br>/* SECTIONS ALLOCATION  */ 
     <br>/*--------------------------------------------------------------------------*/ 
     <br>SECTIONS 
     <br>{ 
     <br>.text : { } &gt; LOW PAGE 0 
     <br>.cinit : { } &gt; LOW PAGE 0 
     <br>.switch : { } &gt; LOW PAGE 0 
     <br>.const : { } &gt; SARAM PAGE 1 
     <br>.data : { } &gt; SARAM PAGE 1 
     <br>.bss : { } &gt; SARAM PAGE 1 
     <br>.stack : { } &gt; SARAM PAGE 1 
     <br>.sysmem : { } &gt; SARAM PAGE 1 
     <br>} 
     <br>1,系统定义: 
     <br>.cinit 存放C程序中的变量初值和常量; 
     <br>.const 存放C程序中的字符常量、浮点常量和用const声明的常量; 
     <br>.switch 存放C程序中switch语句的跳针表; 
     <br>.text 存放C程序的代码; 
     <br>.bss 为C程序中的全局和静态变量保留存储空间; 
     <br>.far 为C程序中用far声明的全局和静态变量保留空间; 
     <br>.stack 为C程序系统堆栈保留存储空间，用于保存返回地址、函数间的参数传递、存储局部变量和保存中间结果; 
     <br>.sysmem 用于C程序中malloc、calloc和realloc函数动态分配存储空间 
     <br>2,用户定义: 
     <br>#pragma CODE_SECTION (symbol, "section name"; 
     <br>#pragma DATA_SECTION (symbol, "section name" 
     <br> 
     <br> 
     <br> 
     <br>DSP的C语言的特殊性 
     <br>大家在使用51系列C语言时已经注意到，控制器的C语言和PC机上使用的C有一个显著的特点：经常要对硬件操作，程序中有大量针对控制器内部资源进行操作的语句。所以，开发者要明白怎样用C语言来操纵控制器的内部资源，既怎样用C语句操作寄存器和内部存储器等。 
     <br>举个例子，在51汇编中我们写 MOV A，#20H，汇编程序能够识别A是指累加器，而在51 C程序中我们写 ACC=32；，编译器能够识别ACC是指累加器而不是一般的变量。即每一个寄存器都有一个专有名字供开发者使用，它们定义在一个头文件reg51.h 中，程序员只需在程序的开始部分用#include“reg51.h”语句将该文件包含进来即可。注意：这些寄存器的名字不能用做变量名。 
     <br>同样，在TMS320F240的C语言中也有一个头文件C240.H定义各个寄存器的名称，这里摘录几条语句进行介绍。 
     <br>比如：#define IMR （（PORT）0x0004） 
     <br>#define XINT1_CR （（PORT）0x07070） 
     <br>IMR 、XINT1_CR就对应两个寄存器，实际是寄存器的地址，用高级语言的说法是指针。我们也在程序的开始部分用#include“c240.h”语句将该文件包含进来。这样，在DSP的C语言中使用它们只需在前面加一个星号（*），例如， 
     <br>*IMR=0X1010；/* 将16进制数1010H赋给IMR寄存器 */ 
     <br>*XINT1_CR=0X0A0B0；/*将16进制数A0B0H赋给XINT1_CR寄存器 */ 
     <br> 
     <br>最好将c240.h这个文件打印出来，弄清楚各个寄存器的定义名称。 
     <br>TMS320F240芯片的C语言开发过程 
     <br>简单地说，整个过程包括以下五个步骤： 
     <br>1、编辑C语言源程序 
     <br>2、编译源程序（注意编译参数） 
     <br>3、链接目标文件（注意用CMD文件） 
     <br>4、在线仿真 
     <br>5、固化程序 
    </div> </td></tr></tbody></table>  
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/15fef31bed00448290f152c3d31d1c20/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">window.opener 的用法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/da6bfb5180c16c9cb424d0f4c3a57981/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Win32 API消息函数:GetMessage</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>