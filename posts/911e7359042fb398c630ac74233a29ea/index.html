<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Qt界面美化QSS——（一）使用方式、语法（选择器、伪状态） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Qt界面美化QSS——（一）使用方式、语法（选择器、伪状态）" />
<meta property="og:description" content="QSS——Qt Style Sheet，Qt通过样式表设置控件样式进行个性化定制、界面美化。
1.使用方式 1.1.Qt Designer 在Qt Designer中，每个控件都有styleSheet属性，通过键入样式表，即可设置该控件的样式。如下图：
使用该方式的好处在于，可以直观看到设计效果，通过Ctrl&#43;R就可以预览窗体设计。并且在编辑样式表窗口中添加资源、添加渐变、添加颜色、添加字体，方便直接编辑特定样式的颜色。此类方式编辑的样式表会作用于当前控件及其所有子控件。
1.2.QSS文件 使用QFile读入样式表，使用setStyleSheet进行设置。示例代码如下：
QApplication app(argc, argv); QFile qss(&#34;StyleSheet.qss&#34;); qss.open(QFile::ReadOnly); app.setStyleSheet(qss.readAll()); qss.close(); 此通过加载StyleSheet文件，对整个软件的所有控件样式进行设置。这种方式“一劳永逸”，可以设计自己的风格，所有软件重复使用。
Qt Designer方便直接界面调试，并且可以对颜色进行编辑。适合设计时使用，当然也可以直接用作界面美化。当Qt Desinger编辑的样式表固定好之后，可以组织保存到QSS文件中，直接代码加载即可。
2.语法 2.1.基础语法 QSS同CSS语法规则类似，形式如下：
selector{attribute:value};
其中：
selector选择器：通常情况下为控件类名（如QPushButton）；
attribute属性：待设置的样式表属性（如background-color）；
value值：属性赋值（如rgb(40, 85, 20);）；
QPushButton { color: red } Qt样式表通常不区分大小写(即，color、Color、color和color指的是同一属性)。但是是类名、对象名和Qt属性名，它们区分大小写。
2.2.共享属性 对于共享属性部分可以使用下面形式：
QCheckBox,QComboBox,QSpinBox { color:rgb(255,0,0); background-color:rgb(255,255,255); font:bold; } 这样就设置了所有作用范围内的QCheckBox、QComboBox、QSpinBox的前景色、背景色和字体。
2.3.选择器（selector） Qt样式表支持CSS2中定义的所有选择器。下表总结了最有用的选择器类型。
选择器举例解释通用选择器*所有 Qt 的 widget，即不声明选择器时，属性作用于所有组建类型选择器QPushButton作用于QPushButton及其子类的实例。属性选择器QPushButton[flat=“false”]作用于非平面（flat=“false”）的QPushButton实例。类选择器.QPushButton作用于QPushButton的实例，但不匹配其子类的实例。（加了个’.’)ID选择器QPushButton#okButton作用于对象名称为okButton的所有QPushButton实例。后代选择器QDialog QPushButton匹配作为QDialog的子体(子级、孙级等)的所有QPushButton实例。子选择器QDialog &gt; QPushButton匹配作为QDialog的直接子级的所有QPushButton实例。子控制QComboBox::drop-down要设置复杂 widget 的样式，需要访问 widget 的子控件，如QComboBox的下拉按钮或QSpinBox的上下箭头。选择器可以包含子控件，从而可以将规则的应用限制到特定的 widget 子控件。 2.4.伪状态（Pseudo-States） 用户在操作时，可以根据不同的交互状态展示不同的用户样式，界面能够识别用户操作，不需要代码控制即可响应不同状态下的样式。例如：
QPushButton { border: 1px solid #555; padding: 4px; min-width: 65px; min-height: 12px; } QPushButton:hover { background-color: #999; } QPushButton:pressed { background-color: #333; border-color: #555; color: #AAA; } QPushButton:disabled { color: #333333; } QPushButton在hover、pressed、disabled状态时，分别展示不同的样式。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/911e7359042fb398c630ac74233a29ea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-20T17:54:44+08:00" />
<meta property="article:modified_time" content="2020-06-20T17:54:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Qt界面美化QSS——（一）使用方式、语法（选择器、伪状态）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><em><strong>QSS——Qt Style Sheet，Qt通过样式表设置控件样式进行个性化定制、界面美化。</strong></em></p> 
<h2><a id="1_1"></a>1.使用方式</h2> 
<h3><a id="11Qt_Designer_2"></a>1.1.Qt Designer</h3> 
<p>在Qt Designer中，每个控件都有<code>styleSheet</code>属性，通过键入样式表，即可设置该控件的样式。如下图：</p> 
<p><img src="https://images2.imgbox.com/e0/7e/znkhqnNf_o.png" alt="在这里插入图片描述"><br> 使用该方式的好处在于，<strong>可以直观看到设计效果</strong>，通过<code>Ctrl+R</code>就可以预览窗体设计。并且在<code>编辑样式表</code>窗口中<code>添加资源、添加渐变、添加颜色、添加字体</code>，方便直接编辑特定样式的颜色。此类方式编辑的样式表会作用于<code>当前控件及其所有子控件</code>。</p> 
<h4><a id="12QSS_7"></a>1.2.QSS文件</h4> 
<p>使用<code>QFile</code>读入样式表，使用<code>setStyleSheet</code>进行设置。示例代码如下：</p> 
<pre><code class="prism language-cpp">QApplication <span class="token function">app</span><span class="token punctuation">(</span>argc<span class="token punctuation">,</span> argv<span class="token punctuation">)</span><span class="token punctuation">;</span>
QFile <span class="token function">qss</span><span class="token punctuation">(</span><span class="token string">"StyleSheet.qss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
qss<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>QFile<span class="token operator">::</span>ReadOnly<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">setStyleSheet</span><span class="token punctuation">(</span>qss<span class="token punctuation">.</span><span class="token function">readAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
qss<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>此通过加载StyleSheet文件，对整个软件的所有控件样式进行设置。这种方式“一劳永逸”，可以设计自己的风格，所有软件重复使用。</p> 
<p>Qt Designer方便直接界面调试，并且可以对颜色进行编辑。<code>适合设计时使用</code>，当然也可以直接用作界面美化。当Qt Desinger编辑的样式表固定好之后，可以组织保存到QSS文件中，直接代码加载即可。</p> 
<h2><a id="2_20"></a>2.语法</h2> 
<h3><a id="21_21"></a>2.1.基础语法</h3> 
<p>QSS同CSS语法规则类似，形式如下：<br> <code>selector{attribute:value};</code><br> 其中：<br> <code>selector</code>选择器：通常情况下为控件类名（如<code>QPushButton</code>）；<br> <code>attribute</code>属性：待设置的样式表属性（如<code>background-color</code>）；<br> <code>value</code>值：属性赋值（如<code>rgb(40, 85, 20);</code>）；</p> 
<pre><code class="prism language-css"><span class="token selector">QPushButton</span> <span class="token punctuation">{<!-- --></span> <span class="token property">color</span><span class="token punctuation">:</span> red <span class="token punctuation">}</span>
</code></pre> 
<p>Qt样式表<strong>通常不区分大小写</strong>(即，color、Color、color和color指的是同一属性)。但是是<strong>类名、对象名和Qt属性名</strong>，它们区分大小写。</p> 
<h3><a id="22_33"></a>2.2.共享属性</h3> 
<p>对于<strong>共享属性部分</strong>可以使用下面形式：</p> 
<pre><code class="prism language-css"><span class="token selector">QCheckBox,QComboBox,QSpinBox</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token property">color</span><span class="token punctuation">:</span><span class="token function">rgb</span><span class="token punctuation">(</span>255,0,0<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">background-color</span><span class="token punctuation">:</span><span class="token function">rgb</span><span class="token punctuation">(</span>255,255,255<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token property">font</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>这样就设置了所有作用范围内的QCheckBox、QComboBox、QSpinBox的前景色、背景色和字体。</p> 
<h3><a id="23selector_45"></a>2.3.选择器（selector）</h3> 
<p>Qt样式表支持<a href="http://www.w3.org/TR/REC-CSS2/selector.html#q1" rel="nofollow">CSS2</a>中定义的所有选择器。下表总结了<strong>最有用的选择器类型</strong>。</p> 
<table><thead><tr><th>选择器</th><th>举例</th><th>解释</th></tr></thead><tbody><tr><td>通用选择器</td><td>*</td><td>所有 Qt 的 widget，即不声明选择器时，属性作用于所有组建</td></tr><tr><td>类型选择器</td><td>QPushButton</td><td>作用于QPushButton及其子类的实例。</td></tr><tr><td>属性选择器</td><td>QPushButton[flat=“false”]</td><td>作用于非平面（flat=“false”）的QPushButton实例。</td></tr><tr><td>类选择器</td><td>.QPushButton</td><td>作用于QPushButton的实例，但不匹配其子类的实例。（加了个’.’)</td></tr><tr><td>ID选择器</td><td>QPushButton#okButton</td><td>作用于对象名称为okButton的所有QPushButton实例。</td></tr><tr><td>后代选择器</td><td>QDialog QPushButton</td><td>匹配作为QDialog的子体(子级、孙级等)的所有QPushButton实例。</td></tr><tr><td>子选择器</td><td>QDialog &gt; QPushButton</td><td>匹配作为QDialog的直接子级的所有QPushButton实例。</td></tr><tr><td>子控制</td><td>QComboBox::drop-down</td><td>要设置复杂 widget 的样式，需要访问 widget 的子控件，如QComboBox的下拉按钮或QSpinBox的上下箭头。选择器可以包含子控件，从而可以将规则的应用限制到特定的 widget 子控件。</td></tr></tbody></table> 
<h3><a id="24PseudoStates_58"></a>2.4.伪状态（Pseudo-States）</h3> 
<p>用户在操作时，可以根据不同的交互状态展示不同的用户样式，界面能够识别用户操作，不需要代码控制即可响应不同状态下的样式。例如：</p> 
<pre><code class="prism language-css"><span class="token selector">QPushButton</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #555<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token property">min-width</span><span class="token punctuation">:</span> 65px<span class="token punctuation">;</span>
    <span class="token property">min-height</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">QPushButton:hover</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">QPushButton:pressed</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #AAA<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">QPushButton:disabled</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">color</span><span class="token punctuation">:</span> #333333<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>QPushButton在<code>hover、pressed、disabled</code>状态时，分别展示不同的样式。<br> 下列是从<a href="https://doc.qt.io/qt-5/stylesheet-reference.html" rel="nofollow">qt-5/stylesheet-reference</a>中翻译过来的<code>所有伪状态</code>。</p> 
<table><thead><tr><th>Pseudo-State</th><th>Description</th></tr></thead><tbody><tr><td>:active</td><td>此状态在widget驻留在活动窗口中时设置。</td></tr><tr><td>adjoins-item</td><td>此状态在QTreeView的::branch与项相邻时设置。</td></tr><tr><td>:alternate</td><td>当QAbstractItemView::ternatingRowColors()设置为true时，将为绘制QAbstractItemView的行时的每隔一行设置此状态。</td></tr><tr><td>:bottom</td><td>该项目位于底部。例如，标签位于底部的QTabBar。</td></tr><tr><td>:checked</td><td>该项目已选中。例如，QAbstractButton的选中状态。</td></tr><tr><td>:closable</td><td>这些项目可以关闭。例如，QDockWidget打开了QDockWidget::DockWidgetClosable功能。</td></tr><tr><td>:default</td><td>该项目为默认值。例如，QMenu中的默认QPushButton或默认操作。</td></tr><tr><td>:disabled</td><td>该项目已禁用。</td></tr><tr><td>:editable</td><td>QComboBox是可编辑的。</td></tr><tr><td>:edit-focus</td><td>该项具有编辑焦点(请参见QStyle::State_HasEditFocus)。此状态仅适用于Qt扩展应用程序。</td></tr><tr><td>:enabled</td><td>该项目已启用。</td></tr><tr><td>:exclusive</td><td>该项目是独占项目组的一部分。例如，独占QActionGroup中的菜单项。</td></tr><tr><td>:first</td><td>该项目是(列表中的)第一个项目。例如，QTabBar中的第一个选项卡。</td></tr><tr><td>:flat</td><td>这件物品是平的。例如，平面QPushButton。</td></tr><tr><td>:floatable</td><td>这些项目可以浮动。例如，QDockWidget打开了QDockWidget：：DockWidgetFloatable功能。</td></tr><tr><td>:focus</td><td>该项具有输入焦点。</td></tr><tr><td>:has-children</td><td>该项目具有子项。例如，QTreeView中具有子项的项。</td></tr><tr><td>:has-siblings</td><td>该项目有同级。例如，QTreeView中的同级项。</td></tr><tr><td>:horizontal</td><td>该项目具有水平方向</td></tr><tr><td>:hover</td><td>鼠标悬停在该项目上。</td></tr><tr><td>:indeterminate</td><td>该项具有不确定状态。例如，部分选中QCheckBox或QRadioButton。</td></tr><tr><td>:last</td><td>该项是(列表中的)最后一项。例如，QTabBar中的最后一个选项卡。</td></tr><tr><td>:left</td><td>该项目位于左侧。例如，选项卡位于左侧的QTabBar。</td></tr><tr><td>:maximized</td><td>该项目将最大化。例如，最大化的QMdiSubWindow。</td></tr><tr><td>:middle</td><td>项目在中间(在列表中)。例如，QTabBar中不在开头或结尾的制表符。</td></tr><tr><td>:minimized</td><td>该项目被最小化。例如，最小化的QMdiSubWindow。</td></tr><tr><td>:movable</td><td>物品可以四处移动。例如，QDockWidget打开了QDockWidget::DockWidgetMoovable功能。</td></tr><tr><td>:no-frame</td><td>该项目没有框架。例如，无框架的QSpinBox或QLineEdit。</td></tr><tr><td>:non-exclusive</td><td>该项是非独占项组的一部分。例如，非独占QActionGroup中的菜单项。</td></tr><tr><td>:off</td><td>对于可以切换的项目，这适用于处于“关闭”状态的项目。</td></tr><tr><td>:on</td><td>对于可以切换的项目，这适用于处于“打开”状态的widget。</td></tr><tr><td>:only-one</td><td>该项目是(列表中的)唯一项目。例如，QTabBar中的一个单独的选项卡。</td></tr><tr><td>:open</td><td>该项目处于打开状态。例如，QTreeView中的展开项，或具有打开菜单的QComboBox或QPushButton。</td></tr><tr><td>:next-selected</td><td>选择下一项(在列表中)。例如，QTabBar的选定选项卡紧挨着该项。</td></tr><tr><td>:pressed</td><td>正在使用鼠标按下该项。</td></tr><tr><td>:previous-selected</td><td>选择上一项(在列表中)。例如，QTabBar中选定选项卡旁边的选项卡。</td></tr><tr><td>:read-only</td><td>该项目标记为只读或不可编辑。例如，只读QLineEdit或不可编辑的QComboBox。</td></tr><tr><td>:right</td><td>该项目位于右侧。例如，选项卡位于右侧的QTabBar。</td></tr><tr><td>:selected</td><td>该项目即被选中。例如，QTabBar中的选定选项卡或QMenu中的选定项目。</td></tr><tr><td>:top</td><td>该项目位于顶部。例如，选项卡位于顶部的QTabBar。</td></tr><tr><td>:unchecked</td><td>该项目处于取消选中状态。</td></tr><tr><td>:vertical</td><td>该项目具有垂直方向。</td></tr><tr><td>:window</td><td>widget是窗口(即顶层小部件)</td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b3766194b1766dcb97b0740146cad9b8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">You have no right to access this object because of bucket acl.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0c81425e6141394735cc478467d4c6f1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python3，字符串函数整理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>