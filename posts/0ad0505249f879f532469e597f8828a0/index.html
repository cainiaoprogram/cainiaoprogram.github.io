<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>git 文件恢复与项目还原：008 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="git 文件恢复与项目还原：008" />
<meta property="og:description" content="1. 【文件恢复】：将文件恢复到上一次提交的状态 注意：新建且没有提交的文件无法使用文件恢复
命令：
git checkout -- 文件名 假如我们的一开始是这样的，这是没有报错的状态文件
然后我添加了一段内容， 比如我添加这段内容项目报错了， 我需要恢复到没有报错的状态
方法一：代码比较，找到修改的内容将其修改回来，这种方法只适用修改比较少的情况。这种方法不做演示
方法二：文件恢复，将文件恢复到未被修改的状态
首先使用git status查看一下状态， 可以看到这个文件是未被追踪状态
然后可以使用命令：git checkout -- test_file.txt 将文件恢复到未被修改的状态
1.1：撤销追踪：对于那些已经使用了git add 的文件， 这时候是无法对文件进行恢复的，需要将文件撤销追踪才能对文件使用恢复功能
假如我们对文件进行一个修改， 并对他使用 git add 命令
这个时候使用 checkout 命令是无法起作用的，如下，文件还是无法恢复到未被修改状态
这个时候就需要使用命令 git reset HEAD 文件名 对它进行追踪撤销。
然后使用 git status 命令查看当前文件状态，可以看到该文件是未添加到缓存区一个状态， 这个时候就可以对这个文件使用 checkout 命令来恢复了
恢复命令，可以看到文件已经被恢复了
2. 【版本还原】 命令：
git reset -- hard DEAD^ 回退到上一个版本
git reset -- hard DEAD^^ 回退到上上一个版本
git reset -- hard 版本号 指定退回到指定版本(注意不能使用HEAD。且一旦回退到指定版本， 那指定版本之前的版本都会消失，所以不建议使用)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/0ad0505249f879f532469e597f8828a0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-28T19:49:00+08:00" />
<meta property="article:modified_time" content="2023-05-28T19:49:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">git 文件恢复与项目还原：008</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body blogpost-body-html" style="font-size: 16px;"> 
 <h3>1. 【文件恢复】：将文件恢复到上一次提交的状态</h3> 
 <p>注意：新建且没有提交的文件无法使用文件恢复</p> 
 <p>命令：</p> 
 <div class="cnblogs_Highlighter"> 
  <pre><code class="has">git checkout -- 文件名
</code>
</pre> 
 </div> 
 <p>假如我们的一开始是这样的，这是没有报错的状态文件</p> 
 <p><img src="https://images2.imgbox.com/6a/8e/XD7jo3Ej_o.png" alt="" style="outline: none;"></p> 
 <p> 然后我添加了一段内容， 比如我添加这段内容项目报错了， 我需要恢复到没有报错的状态</p> 
 <p><img src="https://images2.imgbox.com/ab/09/ZQfvsw1U_o.png" alt="" style="outline: none;"></p> 
 <p>方法一：代码比较，找到修改的内容将其修改回来，这种方法只适用修改比较少的情况。这种方法不做演示</p> 
 <p>方法二：文件恢复，将文件恢复到未被修改的状态</p> 
 <p>首先使用git status查看一下状态， 可以看到这个文件是未被追踪状态</p> 
 <p><img src="https://images2.imgbox.com/52/c4/kRmSIYhH_o.png" alt="" style="outline: none;"></p> 
 <p>然后可以使用命令：git checkout -- test_file.txt  将文件恢复到未被修改的状态</p> 
 <p><img src="https://images2.imgbox.com/3a/52/jTpcAXbD_o.png" alt="" style="outline: none;"></p> 
 <p><img src="https://images2.imgbox.com/8f/af/dSHQPZ8h_o.png" alt="" style="outline: none;"></p> 
 <p>1.1：撤销追踪：对于那些已经使用了git add 的文件， 这时候是无法对文件进行恢复的，需要将文件撤销追踪才能对文件使用恢复功能</p> 
 <p>假如我们对文件进行一个修改， 并对他使用 git add 命令</p> 
 <p><img src="https://images2.imgbox.com/92/45/vOkLlATx_o.png" alt="" style="outline: none;"></p> 
 <p><img src="https://images2.imgbox.com/37/d0/8nGb1xoG_o.png" alt="" style="outline: none;"></p> 
 <p>这个时候使用  checkout 命令是无法起作用的，如下，文件还是无法恢复到未被修改状态</p> 
 <p><img src="https://images2.imgbox.com/04/a1/CEyAZsxk_o.png" alt="" style="outline: none;"></p> 
 <p><img src="https://images2.imgbox.com/b5/ea/6T8EmZ4y_o.png" alt="" style="outline: none;"></p> 
 <p> 这个时候就需要使用命令 git reset HEAD 文件名  对它进行追踪撤销。</p> 
 <p><img src="https://images2.imgbox.com/4c/0a/ZNT6eXUQ_o.png" alt="" style="outline: none;"></p> 
 <p> 然后使用 git status 命令查看当前文件状态，可以看到该文件是未添加到缓存区一个状态， 这个时候就可以对这个文件使用 checkout 命令来恢复了</p> 
 <p><img src="https://images2.imgbox.com/6b/71/1xuVTU7B_o.png" alt="" style="outline: none;"></p> 
 <p>恢复命令，可以看到文件已经被恢复了</p> 
 <p><img src="https://images2.imgbox.com/de/3f/ZjMKDWtP_o.png" alt="" style="outline: none;"></p> 
 <p><img src="https://images2.imgbox.com/bb/7b/ifmaUbrG_o.png" alt="" style="outline: none;"></p> 
 <h3>2. 【版本还原】</h3> 
 <p>命令：</p> 
 <p>git reset -- hard DEAD^  回退到上一个版本</p> 
 <p>git reset -- hard DEAD^^  回退到上上一个版本</p> 
 <p>git reset -- hard  版本号  指定退回到指定版本(注意不能使用HEAD。且一旦回退到指定版本， 那指定版本之前的版本都会消失，所以不建议使用)</p> 
 <p>git checkout 版本号 -- 文件名  将指定文件退回指定版本(不会删除历史版本)</p> 
 <p>git checkout 版本号 -- .   将所有文件回退到指定版本(不会删除历史版，版本回退时建议使用这个命令，要注意的是文件恢复命令，版本号还是原来的版本号，版本描述也是原来的版本描述)</p> 
 <p>首先查看一下版本号：git log --oneline  如下可以看到，有5个版本号，当前项目一共有5次提交记录。这个是从下往上来排序的</p> 
 <p><img src="https://images2.imgbox.com/3f/3f/Jb18C3ZJ_o.png" alt="" style="outline: none;"></p> 
 <p>回退到上一个版本：git reset --hard HEAD^   (haed是强行的意思、HEAD是指针的意思，这里回退到上一个版本，所以加^)</p> 
 <p>回退到上上个版本也是一样，这里就不再演示：git reset --hard HEAD^^</p> 
 <p><img src="https://images2.imgbox.com/89/82/AJervEGP_o.png" alt="" style="outline: none;"></p> 
 <p>不建议使用(因为指定版本之前的版本会消失)：退回到指定版本，假如我想回退到“描述信息”这个版本，这时就可以使用命令：git reset --hard 版本号</p> 
 <p><img src="https://images2.imgbox.com/a3/ed/3xDU5nUd_o.png" alt="" style="outline: none;"></p> 
 <p>建议使用：git checkout 版本号 -- .(回退到指定版本，之前的版本不会消失，注意， 这个实际上是文件恢复，将所有文件恢复到指定版本，版本号不会更新，版本描述也不会更新)：</p> 
 <p>git checkout 版本号 -- 文件名    (将指定文件回退到指定版本，这里就不演示了)</p> 
 <p>git checkout 版本号 -- .    (将所有文件回退到指定版本，这里就不演示了)</p> 
 <p>完毕！！！</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5fb9dea20fed3f45eb39c190c00a8db1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PCA主成分分析 | 机器学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b2890d6a818ee8b73df8775ffbfdabc6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【wx 小功能】frame_tools.py</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>