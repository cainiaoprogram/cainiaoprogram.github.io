<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ubuntu上安装显卡 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ubuntu上安装显卡" />
<meta property="og:description" content="注意：下面介绍的方法，都是在组装台式机，系统为ubuntu18.04LTS、ubuntu20.04LTS、ubuntu21.04LTS、ubuntu22.04LTS下亲测可用的！其他版本和平台没有测试！
如果是笔记本电脑，可以参考最下面转载文章。
方法一：使用官方的NVIDIA驱动进行手动安装（稳定、靠谱）
步骤：
1.安装驱动前一定要更新软件列表和安装必要软件、依赖（必须）
sudo apt-get update #更新软件列表 sudo apt-get install g&#43;&#43; sudo apt-get install gcc sudo apt-get install make 2.查看GPU型号（你自己知道显卡型号就不用查了，直接下一步；通用查看显卡型号命令：lspci | grep -i vga）
lspci | grep -i nvidia
3.官网下载对应驱动（必须），下载好之后，注意把nvidia驱动放在英文名文件夹下，比如mkdir driver 新建文件夹“driver”
官方驱动下载地址：官方驱动 | NVIDIAhttps://www.nvidia.cn/Download/index.aspx?lang=cn
4.卸载原有驱动
sudo apt-get remove --purge nvidia* # 或者nvidia-*
5.禁用nouveau(nouveau是通用的驱动程序)（必须）
sudo gedit /etc/modprobe.d/blacklist.conf 或者(blacklist-nouveau.conf)
在打开的blacklist.conf末尾添加如下，保存文本关闭
blacklist nouveau options nouveau modeset=0 在终端输入如下更新，更新结束后重启电脑（必须）
sudo update-initramfs –u
重启后在终端输入如下，没有任何输出表示屏蔽成功
lsmod | grep nouveau
6.安装lightdm，lightdm是显示管理器，主要管理登录界面，ubuntu20.04、21.04、22.04需要自行安装,然后上下键选择lightdm即可
（这一步也可以不安装lightdm，使用ubuntu20.04、21.04、22.04自带的gdm3显示管理器，直观的区别就是gdm3的登陆窗口在显示器正中间，而lightdm登录窗口在偏左边，正常使用没有区别。其他的区别这里不做探究；）
（亲测需要注意的是，如果你有控制多屏显示的需要，gdm3可能更适合你，亲测使用lightdm设置多屏，可能会出现卡屏，死机，无法动弹情况，仅供参考）
sudo apt-get install lightdm" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/662501e29cfb2419275a858030f3a13e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-10T09:04:24+08:00" />
<meta property="article:modified_time" content="2023-05-10T09:04:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ubuntu上安装显卡</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>注意：下面介绍的方法，都是在组装台式机，系统为ubuntu18.04LTS、ubuntu20.04LTS、ubuntu21.04LTS、ubuntu22.04LTS下亲测可用的！其他版本和平台没有测试！</p> 
<p>如果是笔记本电脑，可以参考最下面转载文章。<br> 方法一：使用官方的NVIDIA驱动进行手动安装（稳定、靠谱）</p> 
<p>步骤：</p> 
<p>1.安装驱动前一定要更新软件列表和安装必要软件、依赖（必须）</p> 
<pre><code>sudo apt-get update   #更新软件列表
 
sudo apt-get install g++
 
sudo apt-get install gcc
 
sudo apt-get install make
</code></pre> 
<p>2.查看GPU型号（你自己知道显卡型号就不用查了，直接下一步；通用查看显卡型号命令：lspci | grep -i vga）</p> 
<p>lspci | grep -i nvidia</p> 
<p>3.官网下载对应驱动（必须），下载好之后，注意把nvidia驱动放在英文名文件夹下，比如mkdir driver 新建文件夹“driver”</p> 
<p>官方驱动下载地址：官方驱动 | NVIDIAhttps://www.nvidia.cn/Download/index.aspx?lang=cn</p> 
<p>4.卸载原有驱动</p> 
<p>sudo apt-get remove --purge nvidia* # 或者nvidia-*</p> 
<p>5.禁用nouveau(nouveau是通用的驱动程序)（必须）</p> 
<p>sudo gedit /etc/modprobe.d/blacklist.conf 或者(blacklist-nouveau.conf)</p> 
<p>在打开的blacklist.conf末尾添加如下，保存文本关闭</p> 
<pre><code>blacklist nouveau
 
options nouveau modeset=0
</code></pre> 
<p>在终端输入如下更新，更新结束后重启电脑（必须）</p> 
<p>sudo update-initramfs –u</p> 
<p>重启后在终端输入如下，没有任何输出表示屏蔽成功</p> 
<p>lsmod | grep nouveau</p> 
<p>6.安装lightdm，lightdm是显示管理器，主要管理登录界面，ubuntu20.04、21.04、22.04需要自行安装,然后上下键选择lightdm即可</p> 
<p>（这一步也可以不安装lightdm，使用ubuntu20.04、21.04、22.04自带的gdm3显示管理器，直观的区别就是gdm3的登陆窗口在显示器正中间，而lightdm登录窗口在偏左边，正常使用没有区别。其他的区别这里不做探究；）</p> 
<p>（亲测需要注意的是，如果你有控制多屏显示的需要，gdm3可能更适合你，亲测使用lightdm设置多屏，可能会出现卡屏，死机，无法动弹情况，仅供参考）</p> 
<p>sudo apt-get install lightdm</p> 
<p>7.为了安装新的Nvidia驱动程序，我们需要停止当前的显示服务器。最简单的方法是使用telinit命令更改为运行级别3。在终端输入以下linux命令后，显示服务器将停止。（必须）</p> 
<p>sudo telinit 3</p> 
<p>进入黑漆漆的文本界面tty（如果进不去，就按Ctrl + Alt + F1~F6中的一个 (分别对应进入tty1~tty6)），然后输入用户名和密码，类似下面这样：</p> 
<p>退出文本界面到图形界面，输入sudo telinit 5或者Ctrl + Alt + F1/F7/F8 (联想部分电脑：Ctrl + Alt + Fn + F1)</p> 
<ol start="8"><li>在文本界面中，禁用X-window服务,在终端输入（必须）</li></ol> 
<p>（如果是默认的gdm3显示管理器，命令为sudo /etc/init.d/gdm3 stop）</p> 
<p>sudo /etc/init.d/lightdm stop或者（sudo service lightdm stop）</p> 
<ol start="9"><li> <p>cd命令进入到你存放驱动的目录，输入命令：</p> <p>sudo chmod 777 NVIDIA-Linux-x86_64-430.26.run #给你下载的驱动赋予可执行权限，才可以安装</p> <p>sudo ./NVIDIA-Linux-x86_64-430.26.run （–no-opengl-files） #安装</p> </li></ol> 
<p>第二句命令的参数介绍：<br> –no-opengl-files 只安装驱动文件，不安装OpenGL文件。这个参数我亲测台式机不加没问题，笔记本不加有可能出现循环登录，也就是loop login。 看你自己需要把。</p> 
<p>显卡驱动安装过程中一些选项（有一些问题记不清楚了，只给出需要选择的选项：）：</p> 
<pre><code>    1.The distribution-provided pre-install script failed! Are you sure you want to continue?

    选择continue installation

    2.Would you like to register the kernel module souces with DKMS? This will allow DKMS to automatically build a new module, if you install a different kernel later?  

    选择 No 继续。

    3.问题没记住，选项是：install without signing

    4.问题大概是：Nvidia's 32-bit compatibility libraries? 选择 No 继续。

    5.Would you like to run the nvidia-xconfigutility to automatically update your x configuration so that the NVIDIA x driver will be used when you restart x? Any pre-existing x confile will be backed up.  

    选择 Yes  继续
</code></pre> 
<p>10.安装结束后输入sudo service lightdm start 重启x-window服务，即可自动进入登陆界面，不行的话，输入sudo reboot重启，再看看。</p> 
<p>（重启后不行，尝试在bios中去掉安全启动设置，改成 secure boot：disable）</p> 
<p>11.驱动安装好后，终端输入nvidia-smi 检查是否装好，出现类似下方这样，就好了。</p> 
<p>然后输入nvidia-settings 调出设置界面，类似下方这样，就OK了。</p> 
<p>注意：</p> 
<p>1.如果是替换显卡驱动的话（也就是说你这台机子不是第一次在ubuntu下安装英伟达显卡驱动，这一次是升级或者替换），先进入TTY文本模式，然后在sudo /etc/init.d/lightdm stop</p> 
<p>2.安装完驱动，记得sudo service lightdm start</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/fe170f2c30f795a6754c8843cf292f60/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于FusionCompute中Ubuntu16.04.5 Server虚拟机安装Nvidia T4 GPU卡</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7bf257f2212e6e6ddcfc3b5afb0ed72b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">前端开发代码规范工具</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>