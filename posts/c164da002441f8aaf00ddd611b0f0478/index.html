<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一、安装与配置：Pycharm Anaconda TensorFlow Keras - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="一、安装与配置：Pycharm Anaconda TensorFlow Keras" />
<meta property="og:description" content="目录 一、安装与配置1.Anaconda2.配置Anaconda清华镜像3.Pycharm4.Pycharm配置conda环境（该步骤可省略，直接见7）5.安装TensorFlow 1.14.06.安装keras 2.2.57.Pycharm配置tensorflow环境8.安装numpy、pandas、matplotlib9. 配置jupyter notebookJupyter Notebook 打开指定文件夹将Chrome设置为Jupyter_notebook的默认浏览器Jupyter Notebook中切换conda虚拟环境jupyter打开conda报错 EnviromentLocationNotFoundjupyter 配置环境的 内核无法连接 tf-keras-python对应关系☆python3.7 tf2.2.0 keras2.3.1安装★python3.8 tf2.4.0-gpu安装cudacuDNN环境变量配置测试安装结果报错：各种dll文件找不到 tf2.4-gpu环境运行 其他包安装cv2scipyskimagetqdm(进度条可视化)pyreadline（代码自动补全） 二、问题：（1）关于anaconda prompt无法activate 环境（2）Pycharm配置conda环境报错（3）pip损坏 重新安装（4）pip损坏 重新安装（5）conda一直在 &#39;Solving environment: \&#39; 三、补充说明1、pip和conda区别2、conda常用命令☆3、用conda安装TensorFlow4、用pip装包时的注意事项 待办1.使用.yml文件配置conda环境2. pip安装本地包 一、安装与配置 对照网上的教程先后安装了
1.Anaconda https://www.anaconda.com/distribution/#download-section 可能需要科学上网
若进不去网站，尝试百度云（2020.07版本↓） 链接: https://pan.baidu.com/s/1t2857BzMXGSyVwvpEW5d3A 提取码: sj5s 或者清华镜像
https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/
以百度云安装包为例：
先解压，运行64位版本：
Next→I Agree→Next →（改文件路径 注意要空文件夹）→Next→
（记得勾选 √ 第一项：将Anaconda 添加到环境变量中。见下图）→ Install
→（等待一段时间）→Next→Next→Finish
安装完成后可以将常用的 Anaconda Navigator、Jupyter Notebook、Anaconda Powershell Prompt（这个比Anaconda Prompt多一些功能？）放到开始屏幕，方便使用
测试anaconda是否安装完成：
win&#43;R→cmd→conda
若出现以下信息则安装成功
2.配置Anaconda清华镜像 用Anaconda Prompt运行 可能要以管理员身份运行
（暂时添加官方库的镜像即可，后面若不可用（下载还是慢），再尝试换其他源）
20220710： 直接全给他装上，tmd!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c164da002441f8aaf00ddd611b0f0478/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-15T13:37:50+08:00" />
<meta property="article:modified_time" content="2023-06-15T13:37:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一、安装与配置：Pycharm Anaconda TensorFlow Keras</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><a href="#_1" rel="nofollow">一、安装与配置</a></li><li><ul><li><a href="#1Anaconda_3" rel="nofollow">1.Anaconda</a></li><li><a href="#2Anaconda_28" rel="nofollow">2.配置Anaconda清华镜像</a></li><li><a href="#3Pycharm_75" rel="nofollow">3.Pycharm</a></li><li><a href="#4Pycharmconda7_91" rel="nofollow">4.Pycharm配置conda环境（该步骤可省略，直接见7）</a></li><li><a href="#5TensorFlow_1140_109" rel="nofollow">5.安装TensorFlow 1.14.0</a></li><li><a href="#6keras_225_196" rel="nofollow">6.安装keras 2.2.5</a></li><li><a href="#7Pycharmtensorflow_209" rel="nofollow">7.Pycharm配置tensorflow环境</a></li><li><a href="#8numpypandasmatplotlib_237" rel="nofollow">8.安装numpy、pandas、matplotlib</a></li><li><a href="#9_jupyter_notebook_253" rel="nofollow">9. 配置jupyter notebook</a></li><li><ul><li><a href="#Jupyter_Notebook__261" rel="nofollow">Jupyter Notebook 打开指定文件夹</a></li><li><a href="#ChromeJupyter_notebook_268" rel="nofollow">将Chrome设置为Jupyter_notebook的默认浏览器</a></li><li><a href="#Jupyter_Notebookconda_279" rel="nofollow">Jupyter Notebook中切换conda虚拟环境</a></li><li><ul><li><a href="#jupyterconda_EnviromentLocationNotFound_342" rel="nofollow">jupyter打开conda报错 EnviromentLocationNotFound</a></li><li><a href="#jupyter___366" rel="nofollow">jupyter 配置环境的 内核无法连接</a></li></ul> 
   </li></ul> 
   </li><li><a href="#tfkeraspython_374" rel="nofollow">tf-keras-python对应关系</a></li><li><a href="#python37_tf220__keras231_377" rel="nofollow">☆python3.7 tf2.2.0 keras2.3.1安装</a></li><li><a href="#python38_tf240gpu_389" rel="nofollow">★python3.8 tf2.4.0-gpu安装</a></li><li><ul><li><a href="#cuda_399" rel="nofollow">cuda</a></li><li><a href="#cuDNN_411" rel="nofollow">cuDNN</a></li><li><a href="#_417" rel="nofollow">环境变量配置</a></li><li><a href="#_420" rel="nofollow">测试安装结果</a></li><li><ul><li><a href="#dll_482" rel="nofollow">报错：各种dll文件找不到</a></li><li><a href="#_493" rel="nofollow"></a></li></ul> 
    </li><li><a href="#tf24gpu_494" rel="nofollow">tf2.4-gpu环境运行</a></li></ul> 
   </li><li><a href="#_497" rel="nofollow">其他包安装</a></li><li><ul><li><ul><li><a href="#cv2_498" rel="nofollow">cv2</a></li><li><a href="#scipy_503" rel="nofollow">scipy</a></li><li><a href="#skimage_508" rel="nofollow">skimage</a></li><li><a href="#tqdm_516" rel="nofollow">tqdm(进度条可视化)</a></li><li><a href="#pyreadline_521" rel="nofollow">pyreadline（代码自动补全）</a></li></ul> 
   </li></ul> 
  </li></ul> 
  </li><li><a href="#_525" rel="nofollow">二、问题：</a></li><li><ul><li><a href="#1anaconda_promptactivate__528" rel="nofollow">（1）关于anaconda prompt无法activate 环境</a></li><li><a href="#2Pycharmconda_538" rel="nofollow">（2）Pycharm配置conda环境报错</a></li><li><a href="#3pip__542" rel="nofollow">（3）pip损坏 重新安装</a></li><li><a href="#4pip__553" rel="nofollow">（4）pip损坏 重新安装</a></li><li><a href="#5conda_Solving_environment__563" rel="nofollow">（5）conda一直在 'Solving environment: \'</a></li></ul> 
  </li><li><a href="#_577" rel="nofollow">三、补充说明</a></li><li><ul><li><a href="#1pipconda_578" rel="nofollow">1、pip和conda区别</a></li><li><a href="#2conda_591" rel="nofollow">2、conda常用命令</a></li><li><a href="#3condaTensorFlow_616" rel="nofollow">☆3、用conda安装TensorFlow</a></li><li><a href="#4pip_625" rel="nofollow">4、用pip装包时的注意事项</a></li></ul> 
  </li><li><a href="#_634" rel="nofollow">待办</a></li><li><ul><li><a href="#1ymlconda_635" rel="nofollow">1.使用.yml文件配置conda环境</a></li><li><a href="#2_pip_642" rel="nofollow">2. pip安装本地包</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>一、安装与配置</h2> 
<p>对照网上的教程先后安装了</p> 
<h3><a id="1Anaconda_3"></a>1.Anaconda</h3> 
<p><a href="https://www.anaconda.com/distribution/#download-section" rel="nofollow">https://www.anaconda.com/distribution/#download-section</a> 可能需要科学上网</p> 
<pre><code>若进不去网站，尝试百度云（2020.07版本↓）
链接: https://pan.baidu.com/s/1t2857BzMXGSyVwvpEW5d3A 提取码: sj5s 
</code></pre> 
<p>或者清华镜像<br> <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" rel="nofollow">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a></p> 
<p><strong>以百度云安装包为例：</strong><br> 先解压，运行64位版本：<br> <img src="https://images2.imgbox.com/19/c3/ZhTxwm7q_o.png" alt="在这里插入图片描述"><br> Next→I Agree→Next →（改文件路径 <strong>注意要空文件夹</strong>）→Next→<br> （<strong>记得勾选 √ 第一项：将Anaconda 添加到环境变量中</strong>。见下图）→ Install<br> →（等待一段时间）→Next→Next→Finish</p> 
<p><img src="https://images2.imgbox.com/03/59/DqqXKwin_o.png" alt="在这里插入图片描述"><br> 安装完成后可以将常用的 Anaconda Navigator、Jupyter Notebook、Anaconda Powershell Prompt（这个比Anaconda Prompt多一些功能？）放到开始屏幕，方便使用</p> 
<p><strong>测试anaconda是否安装完成：</strong><br> win+R→cmd→conda<br> 若出现以下信息则安装成功<br> <img src="https://images2.imgbox.com/fd/00/uMnB9yc7_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2Anaconda_28"></a>2.配置Anaconda清华镜像</h3> 
<p><mark>用Anaconda Prompt运行</mark> 可能要以管理员身份运行</p> 
<p>（暂时添加官方库的镜像即可，后面若不可用（下载还是慢），再尝试换其他源）<br> <em><strong>20220710： 直接全给他装上，tmd!!!</strong></em></p> 
<p><strong>conda官方库的镜像</strong></p> 
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --set show_channel_urls yes 
</code></pre> 
<p><strong>conda第三方库 Conda Forge</strong></p> 
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/
</code></pre> 
<p><strong>conda第三方库 pytorch</strong></p> 
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/
</code></pre> 
<p><strong>conda第三方库 msys2</strong></p> 
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/
</code></pre> 
<p><strong>conda第三方库 bioconda</strong></p> 
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/bioconda/
</code></pre> 
<p><strong>conda第三方库 menpo</strong></p> 
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/menpo/
</code></pre> 
<p><strong>恢复默认下载源</strong>：conda config --remove-key channels<br> <strong>移除特定源</strong>：conda config --remove channels ‘源网址’</p> 
<p><strong>补充</strong><br> 中科大源：</p> 
<pre><code>conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/main/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/conda-forge/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/msys2/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/bioconda/
conda config --add channels https://mirrors.ustc.edu.cn/anaconda/cloud/menpo/
</code></pre> 
<h3><a id="3Pycharm_75"></a>3.Pycharm</h3> 
<pre><code>下载链接: https://pan.baidu.com/s/11CgPJcp7NVymKF7nVpiutg 提取码: yn9e 
（链接附安装方法）
</code></pre> 
<p><a href="https://www.bilibili.com/read/cv7395468/" rel="nofollow">https://www.bilibili.com/read/cv7395468/</a></p> 
<p>官网下载：<br> <a href="https://www.jetbrains.com/" rel="nofollow">https://www.jetbrains.com/ </a><br> <a href="https://www.jetbrains.com/pycharm/" rel="nofollow">https://www.jetbrains.com/pycharm/</a><br> （可能要科学上网）</p> 
<p>4个选项可以全勾选？</p> 
<h3><a id="4Pycharmconda7_91"></a>4.Pycharm配置conda环境（该步骤可省略，直接见7）</h3> 
<p>新建一个Project。命名后选择 Existing interpreter，点右侧 …<br> <img src="https://images2.imgbox.com/a7/f5/rDVT4yUB_o.png" alt="在这里插入图片描述"><br> 点右侧 …<br> <img src="https://images2.imgbox.com/27/86/qEDSglhp_o.png" alt="在这里插入图片描述"><br> 然后选择 anaconda文件夹下的python.exe 。 OK→OK→Create后 conda环境就配置好了<br> <img src="https://images2.imgbox.com/cd/c1/LwsF3Lb6_o.png" alt="在这里插入图片描述"><br> 方法二： 也可以点 左上角File→Settings→Project (当前工程)：Python Interpreter →右上角齿轮 Add<br> <img src="https://images2.imgbox.com/91/e2/yteyjK8p_o.png" alt="在这里插入图片描述"><br> 选择Existing environment 右侧 …。选择 anaconda文件夹下的python.exe 。即可<br> <img src="https://images2.imgbox.com/3d/ee/LQkwEgS9_o.png" alt="在这里插入图片描述"><br> 若出现以下错误，可以找到.condarc文件（C:\Users\Ding Ding），删去 -defaults 即可。<br> <img src="https://images2.imgbox.com/e5/3b/6BHXXK0E_o.jpg" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e7/ca/je4AVtjt_o.jpg" alt="在这里插入图片描述"><br> 补充说明 ：<mark>New environment与Existing environment区别？</mark><br> <a href="https://blog.csdn.net/yandajiangjun/article/details/102502190?utm_medium=distribute.pc_relevant.none-task-blog-title-2&amp;spm=1001.2101.3001.4242">https://blog.csdn.net/yandajiangjun/article/details/102502190?utm_medium=distribute.pc_relevant.none-task-blog-title-2&amp;spm=1001.2101.3001.4242</a></p> 
<h3><a id="5TensorFlow_1140_109"></a>5.安装TensorFlow 1.14.0</h3> 
<p>在Anaconda Prompt用命令安装TensorFlow<br> <a href="https://blog.51cto.com/acevi/2103437" rel="nofollow">https://blog.51cto.com/acevi/2103437</a><br> 代码如下：<br> ①<code>conda create -n tensorflow python=3.5</code>(只是建了个环境文件夹 还没有真正安装tensorflow)<br> ②<code>activate tensorflow</code><br> (在anaconda prompt， activate后前面还是(base) 。应该是有冲突。可以win+R cmd： activate tensorflow) 见问题（1） <a href="#1" rel="nofollow">（1）关于anaconda prompt无法activate 环境</a></p> 
<p><mark>解决方案：</mark> ②改为 <code>conda activate tensorflow</code></p> 
<p><mark>③下载tensorflow</mark><br> （建议安装1.14 比较稳定？）</p> 
<pre><code>%用这个成功了，中国科学技术大学的源（清华的源不行 2020.11.23）
pip --default-timeout=1000000 install -U -i http://pypi.mirrors.ustc.edu.cn/simple/ --upgrade tensorflow==1.14.0  
%↑↑↑防止超时，且可指定版本。 代码改为 tensorflow-gpu==1.14.0 可下载gpu版本
%可能需要改为https

or 
https://pypi.tuna.tsinghua.edu.cn/simple  tensorflow==1.14.0
</code></pre> 
<p>可能需要更新pip</p> 
<pre><code>python -m pip install --upgrade pip
</code></pre> 
<pre><code>*其他源：*
https://pypi.tuna.tsinghua.edu.cn/simple/
http://mirrors.aliyun.com/pypi/simple/
https://pypi.mirrors.ustc.edu.cn/simple/
http://pypi.mirrors.ustc.edu.cn/simple/
http://pypi.douban.com/simple/
</code></pre> 
<pre><code>这个可以下载成功，但版本是1.2.1
conda install tensorflow
</code></pre> 
<p><em>其他：</em><br> <strong>以下代码下载均很慢</strong>（已配置清华镜像）</p> 
<pre><code>pip install --upgrade --ignore-installed tensorflow %cpu版本
pip install --upgrade --ignore-installed tensorflow-gpu %gpu版本
pip3 install --upgrade tensorflow
</code></pre> 
<p>下载慢，可以试试科学上网或者用移动流量试试？<br> 或者尝试本地安装 <a href="https://pypi.tuna.tsinghua.edu.cn/simple/tensorflow/" rel="nofollow">links for tensorflow</a></p> 
<p>④测试是否安装成功</p> 
<pre><code>查询tensorflow版本
import tensorflow as tf
tf.__version__
</code></pre> 
<p>简单测试：<br> tensorflow 2.x版本更新了很多机制，注意代码区别<br> 见 <a href="https://blog.csdn.net/qq_35630121/article/details/103349528?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1.control">1.x版本与2.x版本区别</a></p> 
<pre><code>python
import tensorflow as tf    
hello=tf.constant('hello,world')
sess=tf.Session()
print(sess.run(hello))
</code></pre> 
<pre><code>2.x版本
python
import tensorflow.compat.v1 as tf
tf.disable_v2_behavior()   %使TensorFlow2.x的功能无效化
hello=tf.constant('hello,world')
sess=tf.Session()
print(sess.run(hello))

x=tf.constant(1)
y=tf.constant(2)
z=x+y
sess=tf.Session()
print(sess.run(z))
</code></pre> 
<h3><a id="6keras_225_196"></a>6.安装keras 2.2.5</h3> 
<p><a href="https://docs.floydhub.com/guides/environments/" rel="nofollow">keras和tensorflow版本对应关系</a><br> <mark>tensorflow1.14.0 对应 keras 2.2.5</mark></p> 
<p>安装keras 2.2.5</p> 
<pre><code>pip install -i https://pypi.tuna.tsinghua.edu.cn/simple  keras==2.2.5 #安装Keras
</code></pre> 
<pre><code>pip install keras==2.2 -i https://pypi.douban.com/simple
</code></pre> 
<h3><a id="7Pycharmtensorflow_209"></a>7.Pycharm配置tensorflow环境</h3> 
<p>新建Project，选择一个环境就行</p> 
<p><strong>conda base环境</strong> （之前第4步已配置好conda环境）</p> 
<p><img src="https://images2.imgbox.com/cf/5f/LK8BW56N_o.png" alt="在这里插入图片描述"><br> <mark>conda tensorflow环境</mark><br> <img src="https://images2.imgbox.com/98/c7/nvPsSHzZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f7/90/is0qyJyv_o.png" alt="在这里插入图片描述"></p> 
<p>测试代码：</p> 
<pre><code>吴恩达机器学习作业一-线性回归--tensorflow实现  代码节选
import numpy as np
import pandas as pd
import matplotlib as plt
import tensorflow as tf

path = "D:\MachineLearning\exerise1\ex1data1.txt"
data = pd.read_csv(path, header=None, names=['Population', 'Profit'])
print(data.head())
</code></pre> 
<p><strong>base环境运行没有问题</strong> 应该是anaconda已经安装好了numpy、pandas、matplotlib<br> <strong>tensorflow环境运行有问题</strong> numpy版本过高（1.18.5）、未安装pandas、matplotlib （见8）<br> <mark>原因：base环境有是因为anaconda已经自带了一些常用包。tensorflow环境是自己新建的环境，还需要自己安装所需要的包！（见8）</mark></p> 
<h3><a id="8numpypandasmatplotlib_237"></a>8.安装numpy、pandas、matplotlib</h3> 
<p>先到tensorflow环境： <code>conda activate tensorflow</code></p> 
<pre><code>%pip uninstall numpy   %不需删除，下载新版本的时候会自动删除旧版本
%pip install numpy==1.16.0 %失败
%pip install numpy==1.16.0 -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com %成功

conda install matplotlib %成功 会附带安装numpy等多个包
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple matplotlib %失败

conda install pandas %会附带安装numpy等多个包  (此时该环境可能有两个版本numpy 需要卸载一个)
pip uninstall numpy
pip install numpy==1.16.0 -i http://mirrors.aliyun.com/pypi/simple/ --trusted-host mirrors.aliyun.com
</code></pre> 
<p>也可以在Anaconda navigator下载，可能会有点慢（科学上网？）——<mark>不推荐</mark></p> 
<h3><a id="9_jupyter_notebook_253"></a>9. 配置jupyter notebook</h3> 
<p>下完Anaconda自带一个jupyter notebook<img src="https://images2.imgbox.com/84/38/ymm6IbWu_o.png" alt="在这里插入图片描述"><br> Anaconda Navigator页面也可安装jupyter notebook<br> <img src="https://images2.imgbox.com/ac/96/BvfPdPJV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d6/9c/fhrGiWbZ_o.png" alt="在这里插入图片描述"></p> 
<p><mark>不知道这两个有什么区别？ 实际打开是一样的</mark></p> 
<h4><a id="Jupyter_Notebook__261"></a>Jupyter Notebook 打开指定文件夹</h4> 
<p>（1）在工作目录上方直接键入 <code>jupyter notebook</code><br> <img src="https://images2.imgbox.com/87/15/Dsu9uSlX_o.png" alt="在这里插入图片描述"></p> 
<p>（2）在工作目录 空白处 <code>shfit + 鼠标右键</code> <code>在此处打开powershell窗口</code> 然后输入 <code>jupyter notebook</code><br> （3）win+R cmd 盘符方法（待补充）</p> 
<h4><a id="ChromeJupyter_notebook_268"></a>将Chrome设置为Jupyter_notebook的默认浏览器</h4> 
<p>Step1: 点击 <code>Anaconda prompt</code> 键入<code>jupyter notebook --generate-config</code><br> 2:找到<code>jupyter_notebook_config.py </code>文件， 记事本打开 搜索<code>c.NotebookApp.browser</code><br> 在下方键入以下代码== (关键是找到chrome浏览器的位置）==</p> 
<pre><code>import webbrowser
webbrowser.register("chrome",None,webbrowser.GenericBrowser(u"这里是Chrome浏览器安装位置"))
c.NotebookApp.browser = 'chrome'
</code></pre> 
<p><img src="https://images2.imgbox.com/54/92/hPORyWsi_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Jupyter_Notebookconda_279"></a>Jupyter Notebook中切换conda虚拟环境</h4> 
<p><strong>法一</strong><br> （1）base环境安装 nb_conda <code>conda install nb_conda</code></p> 
<p>安装nb_conda 报错<br> <img src="https://images2.imgbox.com/a7/4e/n6ySTeNu_o.png" alt="在这里插入图片描述"><br> <mark>可以将前面各种 源 装上，应该就可以运行了</mark></p> 
<p>(2)如果此时jupyter kernel中还不显示conda新增的环境<br> 安装ipykernel库，利用ipykernel库将该虚拟环境写入到jupyter中。<br> 先打开对应的环境<code>conda activate paddle_3.6</code><br> 然后 <code>conda install ipykernel</code><br> <strong>一般来说到这里 jupyter就可以使用anaconda中新建的环境了</strong></p> 
<p><code>python -m ipykernel install --user --name 环境名 --display-name “python 环境名”</code> #这一步是否需要？<mark>待测试</mark></p> 
<p><strong>补充：</strong></p> 
<pre><code>conda create -n 环境名称 python=3.6 ipykernel  # 创建环境开始就安装ipykernel
conda install -n 环境名称 ipykernel #直接指定环境安装ipykernel
</code></pre> 
<p><code>jupyter kernelspec list </code> #查看kernel列表。<br> （此时只显示了一个kernel：python3，但不影响jupyter正常使用环境。）</p> 
<p>安装完ipykernel后还是没有反应？<mark>似乎不太行，谨慎使用</mark><br> <code>conda activate paddle_3.6</code><br> <code>python -m ipykernel install --user --name paddle_3.6 --display-name "paddle_3.6"</code><br> <code>jupyter kernelspec remove paddle_3.6</code> #删除kernel</p> 
<p><strong>法二（之前的方法）</strong><br> 之前的环境都配置好了，可以在pycharm运行代码。<br> 如果要在 jupyter notebook 运行 tensorflow 环境的话，可能还需要配置一下</p> 
<p>首先进入<mark>tensorflow环境</mark>：<code>conda activate tensorflow</code></p> 
<pre><code>conda install ipython
conda install jupyter
</code></pre> 
<p><code>jupyter kernelspec list</code>查看当前可用kernels<br> 如果没有将tf环境添加进来，尝试下列语句<br> <code>python -m ipykernel install --user --name myenv --display-name "Python (myenv)"</code> <mark>待测试</mark></p> 
<p>若报错 <code>AttributeError: type object 'IOLoop' has no attribute 'initialized'</code><br> 原因是安装的 tornado 版本与 jupyter 不匹配</p> 
<pre><code>conda install tornado=4.5
</code></pre> 
<p>然后重新打开Anaconda Powershell Prompt，在<mark>base环境</mark>输入（直接输入）<br> <code>conda install nb_conda_kernels</code><br> 安装完成后重新打开 jupyter notebook<br> 这样就可以在 jupyter notebook-Kernel- 自由更改环境了</p> 
<p>参考 <a href="https://github.com/Anaconda-Platform/nb_conda_kernels">https://github.com/Anaconda-Platform/nb_conda_kernels</a></p> 
<p>也可以在Anaconda Powershell Prompt- tensorflow 环境 输入jupyter notebook进入<br> 该方法是从 C盘根目录（默认目录）打开jupyter notebook，可能还需要修改 文件所在路径。有点麻烦。</p> 
<h5><a id="jupyterconda_EnviromentLocationNotFound_342"></a>jupyter打开conda报错 EnviromentLocationNotFound</h5> 
<p><img src="https://images2.imgbox.com/6a/63/o3lEeSod_o.png" alt="在这里插入图片描述"><br> <strong>原因</strong><br> 之前版本conda是envs=[],而4.4版本之后envs=[root_env_dir]，然而这个目录通常并不是空的，官方可能在后续的更新中解决这个问题。</p> 
<p><strong>解决方法</strong><br> 进入 <code>E:\Anaconda\Lib\site-packages\nb_conda</code> 打开<code>envmanager.py</code>文件<br> 查找这一句:</p> 
<pre><code>return {
    "environments": [root_env] + [get_info(env)
                                  for env in info['envs']]
}
</code></pre> 
<p>改成：</p> 
<pre><code>return {
    "environments": [root_env] + [get_info(env) for env in info['envs']
                                  if env != root_env['dir']]
}
</code></pre> 
<p>重启jupyter</p> 
<h5><a id="jupyter___366"></a>jupyter 配置环境的 内核无法连接</h5> 
<p><code>pip install --upgrade ipykernel</code><br> 若报错，可以改成<code>pip install --ignore-installed ipykernel --upgrade</code></p> 
<p>应该跟prompt-toolkit 有点关系<br> <a href="" rel="nofollow">https://blog.csdn.net/justwaityou1314/article/details/115206966</a><br> <a href="" rel="nofollow">https://blog.csdn.net/qq_15056979/article/details/89527839</a></p> 
<h3><a id="tfkeraspython_374"></a>tf-keras-python对应关系</h3> 
<p><a href="https://docs.floydhub.com/guides/environments/" rel="nofollow"> tf-keras-python对应关系</a></p> 
<h3><a id="python37_tf220__keras231_377"></a>☆python3.7 tf2.2.0 keras2.3.1安装</h3> 
<pre><code># python3.7 tf2.2.0  keras2.3.1
conda create -n tf2.2 python=3.7
conda activate tf2.2
pip --default-timeout=1000000 install -U -i https://pypi.mirrors.ustc.edu.cn/simple/ --upgrade tensorflow==2.2.0
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple  keras==2.3.1

# matplotlib numpy pandas
conda install matplotlib # 附带numpy

</code></pre> 
<h3><a id="python38_tf240gpu_389"></a>★python3.8 tf2.4.0-gpu安装</h3> 
<pre><code># python3.8 tf2.4.0-gpu   tf2以上不需要安装keras？
conda create -n tf2.4-gpu python=3.8
conda activate tf2.4-gpu
pip --default-timeout=1000000 install -U -i https://pypi.mirrors.ustc.edu.cn/simple/ --upgrade tensorflow==2.4.0

# matplotlib numpy pandas
conda install matplotlib # 附带numpy
</code></pre> 
<h4><a id="cuda_399"></a>cuda</h4> 
<p>先更新了一下Nvidia的显卡驱动到最新（用Nvidia Experience客户端自动更新），然后打开控制面板查看支持的cuda版本，可以看到最新的驱动支持cuda11.1 （20210617： cuda 11.2.115）<br> <img src="https://images2.imgbox.com/9a/f6/hrVjjMYH_o.png" alt="在这里插入图片描述"><br> <a href="https://tensorflow.google.cn/install/source_windows" rel="nofollow">版本对应关系</a><br> <a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow">CUDA下载</a><br> 最后下到默认目录（C盘）</p> 
<p><mark>检测是否安装成功</mark><br> win+R→cmd 输入nvcc -V<br> <img src="https://images2.imgbox.com/b3/5a/2Qdn4F7m_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="cuDNN_411"></a>cuDNN</h4> 
<p><a href="https://developer.nvidia.com/rdp/cudnn-archive" rel="nofollow">cuDNN下载</a></p> 
<p>下载完成后，进行解压缩，并将解压后的cudnn文件夹中的<code>bin、include、lib文件夹</code>复制到CUDA安装目录下。</p> 
<p><img src="https://images2.imgbox.com/08/92/b4iV9iu5_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_417"></a>环境变量配置</h4> 
<p>一般来说环境变量会自动配置，可以取系统里面看看</p> 
<h4><a id="_420"></a>测试安装结果</h4> 
<pre><code>import tensorflow as tf
tf.config.list_physical_devices()  # or tf.config.list_physical_devices("GPU")
</code></pre> 
<pre><code>import tensorflow as tf
print("Num GPUs Available: ", len(tf.config.experimental.list_physical_devices('GPU')))
</code></pre> 
<pre><code>import tensorflow as tf
import os
os.environ['TF_XLA_FLAGS'] = '--tf_xla_enable_xla_devices'
os.environ['TF_CPP_MIN_LOG_LEVEL']='2'
print(tf.__version__)
a = tf.constant(1.)
b = tf.constant(2.)
print(a+b)
print('GPU:', tf.test.is_gpu_available())
</code></pre> 
<p><mark>检测gpu加速的效果</mark></p> 
<pre><code>检测gpu加速的效果
import tensorflow as tf
import timeit

with tf.device('/cpu:0'):
    cpu_a = tf.random.normal([10000, 1000])
    cpu_b = tf.random.normal([1000, 2000])
    print(cpu_a.device, cpu_b.device)

with tf.device('/gpu:0'):
    gpu_a = tf.random.normal([10000, 1000])
    gpu_b = tf.random.normal([1000, 2000])
    print(gpu_a.device, gpu_b.device)

def cpu_run():
    with tf.device('/cpu:0'):
        c = tf.matmul(cpu_a, cpu_b)
    return c

def gpu_run():
    with tf.device('/gpu:0'):
        c = tf.matmul(gpu_a, gpu_b)
    return c

# warm up	这里就当是先给gpu热热身了
cpu_time = timeit.timeit(cpu_run, number=10)
gpu_time = timeit.timeit(gpu_run, number=10)
print('warmup:', cpu_time, gpu_time)


cpu_time = timeit.timeit(cpu_run, number=10)
gpu_time = timeit.timeit(gpu_run, number=10)
print('run time:', cpu_time, gpu_time)

</code></pre> 
<p><mark>报错</mark><br> 发现使用GPU版本的TF时会提示缺少<mark>cusolver64_10.dll</mark>，发现文件中只有cusolver64_11.dll，将cusolver64_11.dll复制后，改名为cusolver64_10.dll，解决问题。</p> 
<h5><a id="dll_482"></a>报错：各种dll文件找不到</h5> 
<p>将所有缺少dll文件复制到C:\Windows\System文件夹下<br> <a href="https://www.pianshen.com/article/37081444749/" rel="nofollow">https://www.pianshen.com/article/37081444749/</a></p> 
<p><mark>自己尝试的解决方案：</mark><br> 把<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v11.2\bin </code>添加到环境变量<br> 计算机-属性-高级系统设置-高级-环境变量-系统变量-Path双击-新建<code>C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v11.2\bin</code></p> 
<p>删除System下的.dll文件 仍可以运行！</p> 
<h5><a id="_493"></a></h5> 
<h4><a id="tf24gpu_494"></a>tf2.4-gpu环境运行</h4> 
<p><code>os.environ["CUDA_VISIBLE_DEVICES"] = "0"</code></p> 
<h3><a id="_497"></a>其他包安装</h3> 
<h5><a id="cv2_498"></a>cv2</h5> 
<pre><code>pip install opencv-python #有点慢
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple  opencv-python #这个可以
</code></pre> 
<h5><a id="scipy_503"></a>scipy</h5> 
<pre><code>pip install scipy #有点慢
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple  scipy #未测试
</code></pre> 
<h5><a id="skimage_508"></a>skimage</h5> 
<pre><code># 这个好像会附带安装scipy
# conda install scikit-image    #  新版本0.18不行，内置程序被重置了
conda install scikit-image==0.15.0
pip install scikit-image==0.15.0

</code></pre> 
<h5><a id="tqdm_516"></a>tqdm(进度条可视化)</h5> 
<pre><code>pip install tqdm
</code></pre> 
<h5><a id="pyreadline_521"></a>pyreadline（代码自动补全）</h5> 
<p><code>conda install pyreadline</code><br> 还不知道这个功能有什么用</p> 
<h2><a id="_525"></a>二、问题：</h2> 
<div id="1"> 
 <div> 
 </div> 
</div> 
<h3><a id="1anaconda_promptactivate__528"></a>（1）关于anaconda prompt无法activate 环境</h3> 
<p>原因是Power Shell不兼容anaconda （https://blog.csdn.net/kdongyi/article/details/81905494?utm_medium=distribute.pc_relevant.none-task-blog-title-2&amp;spm=1001.2101.3001.4242）</p> 
<p>conda install -n root -c pscondaenvs pscondaenvs<br> Set-ExecutionPolicy RemoteSigned 后选择Y（以管理员方式运行anaconda prompt 或者power shell）</p> 
<p>好像conda版本过高会报错。因此不建议用anaconda propmt改环境，用cmd就好。</p> 
<p><mark>解决方案：</mark> 用conda activate Tensorflow</p> 
<h3><a id="2Pycharmconda_538"></a>（2）Pycharm配置conda环境报错</h3> 
<p>若出现以下错误，可以找到.condarc文件（C:\Users\Ding Ding），删去 -defaults 即可。<br> <img src="https://images2.imgbox.com/b9/26/Vh0eYHMk_o.jpg" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/69/08/0D9m3ha9_o.jpg" alt="在这里插入图片描述"></p> 
<h3><a id="3pip__542"></a>（3）pip损坏 重新安装</h3> 
<p>先下载 pip <a href="https://pypi.org/project/pip/19.1.1/#files" rel="nofollow">https://pypi.org/project/pip/19.1.1/#files</a><br> <img src="https://images2.imgbox.com/21/ba/ksmEEV8S_o.png" alt="在这里插入图片描述"><br> 解压到tensorflow环境所在文件夹：T:\Anaconda\envs\tensorflow<br> 在Anaconda Powershell Prompt 切换工作路径 到tensorflow所在文件夹：</p> 
<pre><code>conda activate tensorflow %先打开tensorflow环境
cd T:\Anaconda\envs\tensorflow\pip-19.1.1 %切换到pip文件所在路径
﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿﻿python setup.py install %安装pip
</code></pre> 
<h3><a id="4pip__553"></a>（4）pip损坏 重新安装</h3> 
<p>报错：<code>Original error was: DLL load failed: 找不到指定的模块。</code><br> 某天在 tf2.2环境跑代码，突然报错。检测所有库都无法import（numpy tf等）</p> 
<p>解决办法：<mark>安装numpy-base</mark></p> 
<pre><code>conda install numpy-base #用了这个
pip install numpy-base
</code></pre> 
<h3><a id="5conda_Solving_environment__563"></a>（5）conda一直在 'Solving environment: ’</h3> 
<p>装 nb_conda的时候 conda一直在 'Solving environment: ’<br> <mark>问题未解决</mark><br> （1）更换源</p> 
<pre><code>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
conda config --set show_channel_urls yes
</code></pre> 
<p>（2）.condarc文件 删去- defaults<br> （3）<code>conda config --set channel_priority flexible</code><br> （3）<code>conda update conda</code></p> 
<h2><a id="_577"></a>三、补充说明</h2> 
<h3><a id="1pipconda_578"></a>1、pip和conda区别</h3> 
<p>简而言之，pip是Python包的通用管理器; conda是一个与语言无关的跨平台环境管理器。对于用户，最显着的区别可能是这样的：<mark>pip在任何环境中安装python包; conda安装在conda环境中的任何包。</mark></p> 
<p>使用<mark>conda install</mark>包的时候，<mark>默认</mark>是装在<mark>root环境</mark>下的。（因此<strong>安装时需先进入 环境：activate env_name</strong>）</p> 
<p>conda能够创建可以包含不同版本的Python或其他软件包的隔离环境。在使用数据科学工具时，这非常有用，因为不同的工具可能包含冲突的要求，这些要求可能会阻止它们全部安装到单个环境中。 Pip没有内置的环境支持，而是依赖于virtualenv或venv 等其他工具来创建隔离环境。</p> 
<p><strong>在anaconda下用pip装包的原因</strong>：尽管在anaconda下我们可以很方便的使用conda install来安装我们需要的依赖，但是anaconda本身只提供部分包，远没有pip提供的包多，有时conda无法安装我们需要的包，我们需要用pip将其装到conda环境里。</p> 
<p>安装特定版本的包：<br> 　　conda install numpy=1.93<br> 　　pip install numpy==1.93</p> 
<h3><a id="2conda_591"></a>2、conda常用命令</h3> 
<p>conda在指定环境下安装包：conda create -n env_name python=3.5<br> conda create -n env_name numpy matplotlib python=3.5</p> 
<p>打开虚拟环境：activate env_name</p> 
<p>退出虚拟环境：deactivate env_name</p> 
<p>删除环境：conda remove -n env_name --all</p> 
<p>删除虚拟环境中的包：conda remove --name $your_env_name $package_name ？</p> 
<p>常用命令<br> conda list：查看安装了哪些包。<br> conda install package_name(包名)：安装包<br> conda env list 或 conda info -e：查看当前存在哪些虚拟环境</p> 
<p><strong>update</strong><br> <em>升级Anaconda需要先升级conda</em><br> conda update conda<br> conda update anaconda</p> 
<p>指定升级某一个库，例如 pandas：conda update pandas<br> 自动检测并升级 Anaconda 管理器中的所有可升级的库：conda update --all</p> 
<h3><a id="3condaTensorFlow_616"></a>☆3、用conda安装TensorFlow</h3> 
<p><a href="https://www.sohu.com/a/259103573_657064" rel="nofollow">http://www.sohu.com/a/259103573_657064</a><br> （与 pip 安装相比，conda 安装可以带来超过 8 倍的速度提升。<br> GPU 版本的安装也更加简单：conda 安装将自动安装 GPU 支持所需的 CUDA 和 CuDNN 库。pip 安装则需要手动安装这些库。）<mark>未验证！！</mark></p> 
<pre><code>conda install tensorflow
conda install tensorflow-gpu
conda install --channel  https://conda.anaconda.org/anaconda  tensorflow=1.6.0
</code></pre> 
<h3><a id="4pip_625"></a>4、用pip装包时的注意事项</h3> 
<p>首先，我们需要判断目前我们用的pip指令，会把包装到哪里，通常情况下，pip不像conda一样，他不知道环境，我们首先要确保我们用的是本环境的pip，这样pip install时，包才会创建到本环境中，不然包会创建到base环境，供各个不同的其他conda环境共享，此时可能会产生版本冲突问题。<br> 查看pip环境：which -a pip<br> (经试验，anaconda4.8版本，在conda create新的环境时，已经默认在新环境装了pip，此时activate进入该环境后，用pip命令安装的包，默认会装在本环境中,不必担心pip一个包后后会将其他环境的包改变版本的情况)<br> 当然我们自己创建的conda环境里，可能没有pip，此时进入自己的conda环境也会默认用base环境的pip，这就需要我们自己将pip安装入本环境，尽量不要使用base的pip在其他环境装包，这样也会装在base里，有产生版本冲突的可能（上文已讲）。<br> 在自己conda环境安装pip：conda install pip<br> 安装好本环境的pip之后，在本环境中使用pip install安装的包，就只在本conda中了，我们可以用conda list查看我们的包</p> 
<h2><a id="_634"></a>待办</h2> 
<h3><a id="1ymlconda_635"></a>1.使用.yml文件配置conda环境</h3> 
<p>将.yml文件放到 C:\Users\Administrator 下<br> 打开Anaconda Powershell Prompt</p> 
<p>conda env create -f install/env-cpu.yml<br> conda env update -f env-cpu.yml</p> 
<h3><a id="2_pip_642"></a>2. pip安装本地包</h3> 
<p>pip install -e</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/11647b67c4b07b8503bc612c5acbb8e6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">骁龙神经处理引擎SDK参考指南（25）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ea91f59e7a82883ccbd45888c453c080/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">多个geojson经过坐标系转换后合并为一个shp数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>