<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL安全性机制 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL安全性机制" />
<meta property="og:description" content="一、学习任务1：MySQL软件所提供的权限 在MySQL软件中存在许多系统数据库，其中一个名为mysql的数据库，在该数据库下存储的都是关于权限的表。其中最重要的表是mysql.user、mysql.db，本节将详细介绍这些涉及权限的系统表。
1.1 系统表mysql.user
在系统数据库mysql，存在一张非常重要的名为user的权限表，通过SQL语句DESC关键字查看表结构，可以发现该表拥有43个字段。这些字段大致可以分为4类，分别为用户字段、权限字段、安全字段和资源控制字段。
1.用户字段
系统表mysql.user中的用户字段包含3个字段，主要用来判断用户是否能够登录成功，各个字段的含义如下表所示。
当用户登录时，首先会到系统表mysql.user中判断用户字段，如果这3个字段能够同时匹配，则会被允许登录。当创建新用户时，实际上会设置用户字段中所包含的3个字段。当修改用户密码时，实际上会修改用户字段中的Password字段。
用户字段名
含义
Host
主机名
User
用户名
Password
密码
2.权限字段
系统表mysql.user中拥有一系列以“_priv”字符串结尾的字段，这些字段决定用户了权限。以“_priv”字符串结尾的字段含义如下表所示。
这些字段的值只有Y和N。Y表示该权限可以用到所有数据库上；N表示该权限不能用到所有数据库上；通常，可以使用GRANT语句给用户赋予一些权限，也可以通过Update语句更新user表的方式来设置权限；不过，修改user表之后，一定要执行一下FLUSH PRIVILEGES，否则可能会出现如下错误： Error (1133): Can’t find any matching row in the user table
表 权限字段
字段
说明
Select_priv
确定用户是否可以通过SELECT命令选择数据
Insert_priv
确定用户是否可以通过INSERT命令插入数据
Update_priv
确定用户是否可以通过UPDATE命令修改现有数据
Delete_priv
确定用户是否可以通过DELETE命令删除现有数据
Create_priv
确定用户是否可以创建新的数据库和表
Drop_priv
确定用户是否可以删除现有数据库和表
Reload_priv
确定用户是否可以执行刷新和重新加载MySQL所用各种内部缓存的特定命令，包括日志、权限、主机、查询和表
Shutdown_priv
确定用户是否可以关闭MySQL服务器。在将此权限提供给root账户之外的任何用户时，都应当非常谨慎
Process_priv
确定用户是否可以通过SHOW PROCESSLIST命令查看其他用户的进程
File_priv
确定用户是否可以执行SELECT INTO OUTFILE和LOAD DATA INFILE命令
Grant_priv
确定用户是否可以将已经授予给该用户自己的权限再授予其他用户
References_priv
目前只是某些未来功能的占位符；现在没有作用
Index_priv
确定用户是否可以创建和删除表索引
Alter_priv
确定用户是否可以重命名和修改表结构
Show_db_priv" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/24aaa91cef2d2cf3db518dc47b0c0e1c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-22T20:53:16+08:00" />
<meta property="article:modified_time" content="2021-11-22T20:53:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL安全性机制</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 style="text-align:justify;"><strong><strong><strong>一、学习任务1：MySQL软件所提供的权限</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中存在许多系统数据库，其中一个名为mysql的数据库，在该数据库下存储的都是关于权限的表。其中最重要的表是</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">、</span><span style="color:#000000;">mysql.db</span><span style="color:#000000;">，</span><span style="color:#000000;">本节将详细介绍这些涉及权限的系统表。</span></p> 
<p><strong><strong><strong>1.1</strong></strong><strong> </strong><strong><span style="color:#000000;"><strong>系统表</strong></span></strong><strong><span style="color:#000000;"><strong>mysql.user</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在系统数据库</span><span style="color:#000000;">mysql</span><span style="color:#000000;">，存在一张非常重要的名为user的权限表，通过</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">DESC</span><span style="color:#000000;">关键字查看表结构，可以发现该表拥有</span><span style="color:#000000;">43</span><span style="color:#000000;">个字段。这些字段大致可以分为</span><span style="color:#000000;">4</span><span style="color:#000000;">类，分别为用户字段、权限字段、安全字段和资源控制字段。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>用户字段</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">中的用户字段包含</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段，主要用来判断用户是否能够登录成功，各个字段的含义如下表所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当用户登录时，首先会到系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">中判断用户字段，如果这</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段能够同时匹配，则会被允许登录。当创建新用户时，实际上会设置用户字段中所包含的</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段。当修改用户密码时，实际上会修改用户字段中的Password字段。</span></p> 
<table cellspacing="0" style="margin-left:62.1pt;"><tbody><tr><td style="background-color:#ffffff;width:74.55pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户字段名</span></p> </td><td style="background-color:#ffffff;width:229.65pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">含义</span></p> </td></tr><tr><td style="background-color:#ffffff;width:74.55pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Host</span></p> </td><td style="background-color:#ffffff;width:229.65pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">主机名</span></p> </td></tr><tr><td style="background-color:#ffffff;width:74.55pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">User</span></p> </td><td style="background-color:#ffffff;width:229.65pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户名</span></p> </td></tr><tr><td style="background-color:#ffffff;width:74.55pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Password</span></p> </td><td style="background-color:#ffffff;width:229.65pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">密码</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2.</strong></span></strong><strong><span style="color:#000000;"><strong>权限字段</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">系统表mysql.user中拥有一系列以</span><span style="color:#000000;">“_priv”</span><span style="color:#000000;">字符串结尾的字段，这些字段决定用户了权限。以</span><span style="color:#000000;">“</span><span style="color:#000000;">_priv</span><span style="color:#000000;">”</span><span style="color:#000000;">字符串结尾的字段含义如下表所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;">这些字段的值只有Y和N。Y表示该权限可以用到所有数据库上；N表示该权限不能用到所有数据库上；通常，可以使用GRANT语句给用户赋予一些权限，也可以通过Update语句更新user表的方式来设置权限；不过，修改user表之后，一定要执行一下FLUSH PRIVILEGES，否则可能会出现如下错误：  　　Error (1133): Can’t find any matching row in the user table</p> 
<p style="margin-left:.0001pt;text-align:center;"><span style="color:#000000;">表</span> <span style="color:#000000;">权限字段</span></p> 
<table border="1" cellspacing="0" style="margin-left:5.4pt;width:425.25pt;"><tbody><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">字段</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">说明</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Select_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以通过SELECT命令选择数据</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Insert_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以通过INSERT命令插入数据</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Update_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以通过UPDATE命令修改现有数据</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Delete_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以通过DELETE命令删除现有数据</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Create_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以创建新的数据库和表</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Drop_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以删除现有数据库和表</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Reload_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以执行刷新和重新加载MySQL所用各种内部缓存的特定命令，包括日志、权限、主机、查询和表</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Shutdown_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以关闭MySQL服务器。在将此权限提供给root账户之外的任何用户时，都应当非常谨慎</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Process_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以通过SHOW PROCESSLIST命令查看其他用户的进程</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">File_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以执行SELECT INTO OUTFILE和LOAD DATA INFILE命令</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Grant_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以将已经授予给该用户自己的权限再授予其他用户</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">References_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">目前只是某些未来功能的占位符；现在没有作用</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Index_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以创建和删除表索引</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Alter_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以重命名和修改表结构</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Show_db_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以查看服务器上所有数据库的名字，包括用户拥有足够访问权限的数据库</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Super_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以执行某些强大的管理功能，例如通过KILL命令删除用户进程，使用SET GLOBAL修改全局MySQL变量，执行关于复制和日志的各种命令</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Create_tmp_table_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以创建临时表</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Lock_tables_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以使用LOCK TABLES命令阻止对表的访问/修改</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Execute_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以执行存储过程</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Repl_slave_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以读取用于维护复制数据库环境的二进制日志文件。此用户位于主系统中，有利于主机和客户机之间的通信</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Repl_client_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以确定复制从服务器和主服务器的位置</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Create_view_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以创建视图</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Show_view_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以查看视图或了解视图如何执行</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Create_routine_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以更改或放弃存储过程和函数</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Alter_routine_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以修改或删除存储函数及函数</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Create_user_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户是否可以执行CREATE USER命令，这个命令用于创建新的MySQL账户</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Event_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户能否创建、修改和删除事件</span></p> </td></tr><tr><td style="background-color:#ffffff;width:106.35pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Trigger_priv</span></p> </td><td style="background-color:#ffffff;width:318.9pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">确定用户能否创建和删除触发器</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>3.安全列</strong></span></strong>  </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">user表的安全列有4个字段：ssl_type；ssl_cipher；x509_issuer；x509_subject； 　</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">ssl用于加密；x509标准可以用来标识用户。普通的发行版都没有加密功能。可以使用SHOW VARIABLES LIKE 'have_openssl'语句来查看是否具有ssl功能。如果取值为DISABLED，那么则没有ssl加密功能。  　　</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>4.资源控制列</strong></span></strong>  </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">user表的4个资源控制列是：默认值为0，表示无限制。</span></p> 
<table cellspacing="0" style="margin-left:65.6pt;"><tbody><tr><td style="background-color:#ffffff;width:102.85pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户字段名</span></p> </td><td style="background-color:#ffffff;width:193.8pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">含义</span></p> </td></tr><tr><td style="background-color:#ffffff;width:102.85pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">max_questions</span></p> </td><td style="background-color:#ffffff;width:193.8pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">每小时允许执行多少次查询</span></p> </td></tr><tr><td style="background-color:#ffffff;width:102.85pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">max_upda</span><span style="color:#000000;">t</span><span style="color:#000000;">es</span></p> </td><td style="background-color:#ffffff;width:193.8pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">每小时允许执行多少次更新</span></p> </td></tr><tr><td style="background-color:#ffffff;width:102.85pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">max_connections</span></p> </td><td style="background-color:#ffffff;width:193.8pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">每小时可以建立多少次连接</span></p> </td></tr><tr><td style="background-color:#ffffff;width:102.85pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">max_u</span><span style="color:#000000;">s</span><span style="color:#000000;">er_connections</span></p> </td><td style="background-color:#ffffff;width:193.8pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">单个用户可以同时具有的连接数</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">plugin：5.5.7开始,mysql引入plugins以进行用户连接时的密码验证,plugin创建外部/代理用户。    </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">authentication_string：通过authentication_string可以控制两者的映射关系,(PAM plugin等,PAM可以支持多个服务名)尤其是在使用代理用户时，并须声明这一点。  </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">password_expired：密码过期 Y,说明该用户密码已过期 N相反。</span></p> 
<p><strong><strong><strong>1.2</strong></strong><strong> </strong><strong><span style="color:#000000;"><strong>系统表</strong></span></strong><strong><span style="color:#000000;"><strong>mysql.db</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在系统数据库</span><span style="color:#000000;">mysql</span><span style="color:#000000;">中</span><span style="color:#000000;">，</span><span style="color:#000000;">权限表除了表</span><span style="color:#000000;">user</span><span style="color:#000000;">外</span><span style="color:#000000;">，</span><span style="color:#000000;">还有表</span><span style="color:#000000;">db</span><span style="color:#000000;">。这张表中都存储了某个用户对相关数据库的权限，结构大致相同。这张表所拥有的字段大致可以分为用户字段和权限字段两类。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>用户字段</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">系统表</span><span style="color:#000000;">mysql.db</span><span style="color:#000000;">中的用户字段包含</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段，各个字段的含义如表所示。</span></p> 
<table cellspacing="0" style="margin-left:62.05pt;"><tbody><tr><td style="background-color:#ffffff;width:82.15pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户字段名</span></p> </td><td style="background-color:#ffffff;width:222.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">含义</span></p> </td></tr><tr><td style="background-color:#ffffff;width:82.15pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Host</span></p> </td><td style="background-color:#ffffff;width:222.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">主机名</span></p> </td></tr><tr><td style="background-color:#ffffff;width:82.15pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">User</span></p> </td><td style="background-color:#ffffff;width:222.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户名</span></p> </td></tr><tr><td style="background-color:#ffffff;width:82.15pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Db</span></p> </td><td style="background-color:#ffffff;width:222.1pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">数据库名</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">系统表mysql</span><span style="color:#000000;">.</span><span style="color:#000000;">host是系统表mysql</span><span style="color:#000000;">.</span><span style="color:#000000;">db的扩展，包含两个字段，各个字段的含义如表所示。</span></p> 
<table cellspacing="0" style="margin-left:62.05pt;"><tbody><tr><td style="background-color:#ffffff;width:81.95pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户字段名</span></p> </td><td style="background-color:#ffffff;width:222.3pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">含义</span></p> </td></tr><tr><td style="background-color:#ffffff;width:81.95pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Host</span></p> </td><td style="background-color:#ffffff;width:222.3pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">主机名</span></p> </td></tr><tr><td style="background-color:#ffffff;width:81.95pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Db</span></p> </td><td style="background-color:#ffffff;width:222.3pt;"> <p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">数据库名</span></p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当</span><strong><span style="color:#000000;"><strong>查找某个用户的权限</strong></span></strong><span style="color:#000000;">，首先会从系统表</span><span style="color:#000000;">mysql.db</span><span style="color:#000000;">中査找，如果找不到</span><span style="color:#000000;">Host</span><span style="color:#000000;">字段的值，则会到系统表</span><span style="color:#000000;">mysql.</span><span style="color:#000000;">user</span><span style="color:#000000;">去查找。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>权限字段</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">査看系统表</span><span style="color:#000000;">mysq</span><span style="color:#000000;">l</span><span style="color:#000000;">.db</span><span style="color:#000000;">的表结构，可以发现这张表的权限字段与user表几乎相同。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/fc/50/MQhZCFmt_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当用户</span><strong><span style="color:#000000;"><strong>登录</strong></span></strong><span style="color:#000000;">时，首先会到系统表mysql</span><span style="color:#000000;">.</span><span style="color:#000000;">user中判断用户字段，如果这</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段能够同时匹配，则会被允许登录。当创建新用户时，实际上会设置用户字段中所包含的</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段。当修改用户密码时，实际上会修改用户字段中的password字段。</span></p> 
<p><strong><strong><strong>1.3</strong></strong><strong><span style="color:#000000;"><strong>其他权限表</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在系统数据库</span><span style="color:#000000;">mysql</span><span style="color:#000000;">中</span><span style="color:#000000;">，</span><span style="color:#000000;">除了上述所介绍的权限表外</span><span style="color:#000000;">，</span><span style="color:#000000;">还有表</span><span style="color:#000000;">table</span><span style="color:#000000;">_priv</span><span style="color:#000000;">和</span><span style="color:#000000;">columns_priv</span><span style="color:#000000;">。</span><span style="color:#000000;">其中表</span><span style="color:#000000;">tables_priv</span><span style="color:#000000;">用来实现单个表的权限设置</span><span style="color:#000000;">，</span><span style="color:#000000;">表</span><span style="color:#000000;">columns_priv</span><span style="color:#000000;">用来实现单个字段列的权限设置。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1.</strong></span></strong><strong><span style="color:#000000;"><strong>系统表</strong></span></strong><strong><span style="color:#000000;"><strong>mysql.tables_priv</strong></span></strong><strong><span style="color:#000000;"><strong>的表结构</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">执行带有</span><span style="color:#000000;">DESC</span><span style="color:#000000;">关键字段的</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">，</span><span style="color:#000000;">查询到表</span><span style="color:#000000;">tables_priv</span><span style="color:#000000;">的结构</span><span style="color:#000000;">，</span><span style="color:#000000;">通过执行结果可以发现</span><span style="color:#000000;">，</span><span style="color:#000000;">表</span><span style="color:#000000;">tables_pri</span><span style="color:#000000;">V</span><span style="color:#000000;">包含</span><span style="color:#000000;">8</span><span style="color:#000000;">个字段</span><span style="color:#000000;">，</span><span style="color:#000000;">其中前</span><span style="color:#000000;">4</span><span style="color:#000000;">个分别表示主机名、数据库名、</span> <span style="color:#000000;">用户名和表名。字段Grantor表示权限是由谁设置的。字段Timestamp表示存储更新的时间。字段</span><span style="color:#000000;">Table_priv</span><span style="color:#000000;">表示对表进行操作的权限，其值可以是</span><span style="color:#000000;">Select</span><span style="color:#000000;">、</span><span style="color:#000000;">Insert</span><span style="color:#000000;">、</span><span style="color:#000000;">Update</span><span style="color:#000000;">、</span><span style="color:#000000;">Delete</span><span style="color:#000000;">、</span><span style="color:#000000;">Create</span><span style="color:#000000;">、</span><span style="color:#000000;">Drop</span><span style="color:#000000;">、</span><span style="color:#000000;">Grant</span><span style="color:#000000;">、</span><span style="color:#000000;">References</span><span style="color:#000000;">、</span><span style="color:#000000;">Index</span><span style="color:#000000;">、</span><span style="color:#000000;">Alter</span><span style="color:#000000;">、Create</span> <span style="color:#000000;">View、Show</span> <span style="color:#000000;">view和Trigger</span><span style="color:#000000;">中的任意一项。字段</span><span style="color:#000000;">Column_priv</span><span style="color:#000000;">表示对表中字段列进行操作的权限，其值可以是Select、I</span><span style="color:#000000;">nsert</span><span style="color:#000000;">、Update</span><span style="color:#000000;">和</span><span style="color:#000000;">References</span><span style="color:#000000;">中的任意</span><span style="color:#000000;">一</span><span style="color:#000000;">项。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2.</strong></span></strong><strong><span style="color:#000000;"><strong>系统表</strong></span></strong><strong><span style="color:#000000;"><strong>columns_priv</strong></span></strong><strong><span style="color:#000000;"><strong>的表结构</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">表</span><span style="color:#000000;">columns_priv</span><span style="color:#000000;">包含</span><span style="color:#000000;">7</span><span style="color:#000000;">个字段</span><span style="color:#000000;">，</span><span style="color:#000000;">与系统表</span><span style="color:#000000;">mysql.tables_priv</span><span style="color:#000000;">相比</span><span style="color:#000000;">，</span><span style="color:#000000;">该表中多出了</span><span style="color:#000000;">Column_name</span><span style="color:#000000;">字段</span><span style="color:#000000;">，</span><span style="color:#000000;">该字段表示可以对哪些字段列进行操作。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>3.</strong></span></strong><strong><span style="color:#000000;"><strong>系统表</strong></span></strong><strong><span style="color:#000000;"><strong>procs_priv</strong></span></strong><strong><span style="color:#000000;"><strong>的表结构</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">表</span><span style="color:#000000;">procs_priv</span><span style="color:#000000;">包含</span><span style="color:#000000;">8</span><span style="color:#000000;">个字段</span><span style="color:#000000;">，</span><span style="color:#000000;">前</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段分别表示主机名、数据库名和用户名。字段</span><span style="color:#000000;">Routine_name</span><span style="color:#000000;">表示存储过程或函数的名称。字段</span><span style="color:#000000;">Routine</span><span style="color:#000000;">_t</span><span style="color:#000000;">ype</span><span style="color:#000000;">表示数据库对象类型，其值只能是procedure</span><span style="color:#000000;"> (</span><span style="color:#000000;">存储过程）和function</span><span style="color:#000000;">(</span><span style="color:#000000;">函数）之一。字段Grantor表示存储权限是谁设置的。字段</span><span style="color:#000000;">Proc_priv</span><span style="color:#000000;">表示拥有的权限，其值可以是</span><span style="color:#000000;">Execute</span><span style="color:#000000;">、</span><span style="color:#000000;">Alter Routine</span><span style="color:#000000;">和</span><span style="color:#000000;">Grant</span><span style="color:#000000;">字段。</span></p> 
<h4 style="text-align:justify;"><strong><strong><strong>二、学习任务</strong></strong><strong><strong>2</strong></strong><strong><strong>：MySQL软件所提供的用户机制</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户应该对所需的数据具有适当的访问权限，即用户不能对过多的数据库对象具有过多的访问权，这是</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件的安全基础。为了实现数据的安全性和完整性，MySQL软件专门提供了一整套用户管理机制。用户管理机制包括登录和退出MySQL服务器、创建用户、删除用户、修改用户密码和为用户赋予权限等内容。</span></p> 
<p><strong><strong><strong>2.1</strong></strong><strong><span style="color:#000000;"><strong>登录和退出</strong></span></strong><strong><span style="color:#000000;"><strong>MySQL</strong></span></strong><strong><span style="color:#000000;"><strong>软件的完整命令</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">DOS</span><span style="color:#000000;">窗口中通过</span><span style="color:#000000;">DOS</span><span style="color:#000000;">命令来连接数据库。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>mysql -h hostname|hostIP -pport -u usename -p DatabaseName -e "SQL</strong></span></strong><strong><span style="color:#000000;"><strong>语句</strong></span></strong><strong><span style="color:#000000;"><strong>"</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">上述命令中各参数的含义如下。</span></p> 
<ul><li style="text-align:left;"><span style="color:#000000;">参数</span><span style="color:#000000;">-h</span><span style="color:#000000;">：</span><span style="color:#000000;">用来指定所连接</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的地址，可以用两种方式来表示。参数hostname表示主机名；参数</span><span style="color:#000000;">host</span><span style="color:#000000;">IP</span><span style="color:#000000;">表示主机IP地址。</span></li><li style="text-align:left;"><span style="color:#000000;">参数</span><span style="color:#000000;">-p</span><span style="color:#000000;">：</span><span style="color:#000000;">用来指定所连接</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的端口号。由于MySQL软件在安装过程中</span><span style="color:#000000;">，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务的端口号为默认为</span><span style="color:#000000;">3306</span><span style="color:#000000;">，</span><span style="color:#000000;">因此如果没有指定该参数时，默认通过端口</span><span style="color:#000000;">3306</span><span style="color:#000000;">连接</span><span style="color:#000000;">MySQL </span><span style="color:#000000;">服务器。</span></li><li style="text-align:left;"><span style="color:#000000;">参数</span><span style="color:#000000;">-u</span><span style="color:#000000;">：</span><span style="color:#000000;">用来指定哪个用户要连接</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器</span><span style="color:#000000;">„</span></li><li style="text-align:left;"><span style="color:#000000;">参数</span><span style="color:#000000;">-p</span><span style="color:#000000;">：</span><span style="color:#000000;">表示将提示输入密码。</span></li><li style="text-align:left;"><span style="color:#000000;">参数databasename：用来指定连接到MySQL服务器后，登录到哪一个数据库中。</span></li><li style="text-align:left;"><span style="color:#000000;">参数</span><span style="color:#000000;">-e</span><span style="color:#000000;">：</span><span style="color:#000000;">用来指定所执行的SQL语句。</span></li></ul> 
<p style="margin-left:.0001pt;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="256" src="https://images2.imgbox.com/29/5f/RMolwCWF_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;">如果出现如上的错误，建议按照下列步骤解决：</p> 
<p style="margin-left:.0001pt;text-align:left;">1、打开MySQL目录下的my.ini文件，在文件的最后添加一行“skip-grant-tables”，保存并关闭文件。</p> 
<p style="margin-left:.0001pt;text-align:left;">2、重启MySQL服务。</p> 
<p style="margin-left:.0001pt;text-align:left;">3、在dos窗口命令行中输入“mysql -uroot -p”(不输入密码)，回车即可进入数据库。</p> 
<p style="margin-left:.0001pt;text-align:left;">4、执行，“use mysql;”使用mysql数据库。</p> 
<p style="margin-left:.0001pt;text-align:left;">5、执行，“update user set password=PASSWORD("rootadmin") where user='root';”（修改root的密码）</p> 
<p style="margin-left:.0001pt;text-align:left;">6、打开MySQL目录下的my.ini文件，删除最后一行的“skip-grant-tables”，保存并关闭文件。 7、重启MySQL服务。</p> 
<p style="margin-left:.0001pt;text-align:left;">8、在命令行中输入“mysql [–h localhost] –u root –prootadmin”，如果输入mysql –h 127.0.0.1 –u root –prootadmin还会报错。</p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/8a/24/9cUnpkbl_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">16-1</span><span style="color:#000000;">】在</span><span style="color:#000000;">DOS</span><span style="color:#000000;">窗口中，通过用户账户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">中，具体命令内容句如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -p company</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述命令中，通过值</span><span style="color:#000000;">localhost</span><span style="color:#000000;">指定所连接MySQL服务器的地址，参数-u指定了登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的用户账户，参数</span><span style="color:#000000;">-p</span><span style="color:#000000;">表示会出现输入密码提示信息，最后值</span><span style="color:#000000;">“</span><span style="color:#000000;">company</span><span style="color:#000000;">”</span><span style="color:#000000;">指定了所连接的数据库。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">如果想在具体连接中直接设置密码，而不是在输入密码提示中进行设置，可以通过如下命令来实现：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -p</span><span style="color:#000000;">root</span><span style="color:#000000;"> company</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】上述命令中，参数-p指定了用户账户密码。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的命令，其结果如图所示，可以发现将不会提示输入密码。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/06/6c/Eb6EiXkv_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：在具体连接MySQL服务器时，可以直接设置用户账户密码，不过该密码需要直接加在参数-p的后面，中间绝对不能有空格</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">16-2</span><span style="color:#000000;">】在</span><span style="color:#000000;">DOS</span><span style="color:#000000;">窗口中</span><span style="color:#000000;">，</span><span style="color:#000000;">通过用户账户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">中</span><span style="color:#000000;">，</span><span style="color:#000000;">同时执行査询表</span><span style="color:#000000;">t_dept</span><span style="color:#000000;">中所有数据记录的</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句，具体命令如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -p company -e "SELECT </span><span style="color:#000000;">*</span><span style="color:#000000;"> FROM t_dept”;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】上述命令中，通过参数</span><span style="color:#000000;">-e</span><span style="color:#000000;">指定了所执行的</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句。</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的命令，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="882" src="https://images2.imgbox.com/90/27/8ieyZg5w_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">退出MySQL服务器的DOS命令如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">EXIT|Q</span><span style="color:#000000;">U</span><span style="color:#000000;">IT</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述命令中</span><span style="color:#000000;">,</span><span style="color:#000000;">使用命令</span><span style="color:#000000;">Ex</span><span style="color:#000000;">it</span><span style="color:#000000;">或</span><span style="color:#000000;">Qu</span><span style="color:#000000;">it</span><span style="color:#000000;">都可以退出</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器</span><span style="color:#000000;">,</span><span style="color:#000000;">最后</span><span style="color:#000000;">Qu</span><span style="color:#000000;">it</span><span style="color:#000000;">的缩写形式</span><span style="color:#000000;">\q</span><span style="color:#000000;">、也可以实现退出</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器。</span></p> 
<p><strong><strong><strong>2.2</strong></strong><strong><span style="color:#000000;"><strong>创建普通用户账户</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">通过前面的知识可以知道，在安装</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件时，默认为创建一个名为root的用户账户，由于该用户账户拥有超级权限，因此可以对整个服务器具有完全的控制。如果每次都通过用户名</span><span style="color:#000000;">root </span><span style="color:#000000;">登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器进行各种数据库操作，是不是不太合适，因为该用户的权限太大了。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：在具体操作</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中的数据库对象时，应该严格杜绝使用</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账户登录</span><span style="color:#000000;">MySQL </span><span style="color:#000000;">服务器。仅在绝对需要时使用，而不应该在日常MySQL操作中使用该用户账户</span><span style="color:#000000;">.</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在具体开发应用中，不应该使用</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账户，而应该创建一系列的用户账户，分别为专门用于管理的用户账户、专门供开发人员使用的用户账户等。在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中，可以通过以下</span><span style="color:#000000;">3</span><span style="color:#000000;">种方式来创建普通用户（具有普通权限的用户）。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>执行</strong></span></strong><strong><span style="color:#000000;"><strong>CREATE USER</strong></span></strong><strong><span style="color:#000000;"><strong>语句来创建用户账户</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库管理系统中创建用户账户通过</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">CREATE USER </span><span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">CREATE USER username[IDENTIFIED BY [PASSWORD] 'password']</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">[,username[IDENTIFIED BY [PASSWORD] 'password'])</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">[,username[IDENTIFIEDBY [PASSWORD] 'password']</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">关键字</span><span style="color:#000000;">USER</span><span style="color:#000000;">用来设置用户账号的名字</span><span style="color:#000000;">，</span><span style="color:#000000;">关键字</span><span style="color:#000000;">IDENTIFIED BY</span><span style="color:#000000;">用来设置用户账号的密码。值</span><span style="color:#000000;">username</span><span style="color:#000000;">表示所设置的用户账号名，由用户名和主机名构成。值</span><span style="color:#000000;">password</span><span style="color:#000000;">表示所设置的用户账户密码，如果其是一个普通的字符串，则不需要关键字</span><span style="color:#000000;">PASSWORD</span><span style="color:#000000;">,</span><span style="color:#000000;">该关键字主要用来实现对密码进行加密。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">16-3</span><span style="color:#000000;">】执行</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">CREATE USER,</span><span style="color:#000000;">创建名为</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">密码为</span><span style="color:#000000;">123456</span><span style="color:#000000;">的用户账户。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">通过用户root，连接到MySQL数据库软件，具体语句如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -proot</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）执行</span><span style="color:#000000;">CREATE USER</span><span style="color:#000000;">，</span><span style="color:#000000;">实现创建用户账号</span><span style="color:#000000;">，</span><span style="color:#000000;">具体语句如下</span><span style="color:#000000;">: </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">CREATE USER 'cjgong'@'localhost' IDENTIFIED BY '123456'; </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的语句</span><span style="color:#000000;">，</span><span style="color:#000000;">其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="408" src="https://images2.imgbox.com/06/19/H0nbkriv_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">执行结果显示，己经为</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件创建了一个名为</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">密码为</span><span style="color:#000000;">123456</span><span style="color:#000000;">的用户账户。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2.</strong></span></strong><strong><span style="color:#000000;"><strong>执行I</strong></span></strong><strong><span style="color:#000000;"><strong>NSERT</strong></span></strong><strong><span style="color:#000000;"><strong>语句来创建用户</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">根据前面的知识可以知道，系统权限表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">中存储了关于用户账户的信息，所以可以通过向该表插入数据记录来实现创建用户账号。当向系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">中插入数据记录时，一般只需插入Host、</span><span style="color:#000000;">User</span><span style="color:#000000;">和</span><span style="color:#000000;">Passwo</span><span style="color:#000000;">r</span><span style="color:#000000;">d</span><span style="color:#000000;">这</span><span style="color:#000000;">3</span><span style="color:#000000;">个字段的值即可，具体语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">INSERT INTO user(Host,User,Password) VALUES('hostname'</span><span style="color:#000000;">,</span><span style="color:#000000;"> 'username</span><span style="color:#000000;">',</span><span style="color:#000000;"> PASSWORD ('password'));</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意</span><span style="color:#000000;">：</span><span style="color:#000000;">在具体实现创建用户账号时</span><span style="color:#000000;">，</span><span style="color:#000000;">由于表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">中字段</span><span style="color:#000000;">ssl_cipher</span><span style="color:#000000;">，</span><span style="color:#000000;">x509_issuer</span><span style="color:#000000;">，</span><span style="color:#000000;">x509_subject </span><span style="color:#000000;">没有默认值</span><span style="color:#000000;">，</span><span style="color:#000000;">所以还需要设置这些字段的值。对于字段</span><span style="color:#000000;">Password</span><span style="color:#000000;">的值，一定要使用</span><span style="color:#000000;">PASSWORD</span><span style="color:#000000;">（）</span><span style="color:#000000;">函数进行加密。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">16</span><span style="color:#000000;">-</span><span style="color:#000000;">4</span><span style="color:#000000;">】执行</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">CREATE USER,</span><span style="color:#000000;">创建名为</span><span style="color:#000000;">cjgong1</span><span style="color:#000000;">密码为</span><span style="color:#000000;">123456</span><span style="color:#000000;">的用户账户。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（11）</span><span style="color:#000000;">通过用户root，连接到MySQL数据库软件，具体SQL语句如下</span><span style="color:#000000;">：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -proot</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）</span><span style="color:#000000;">执行</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">IN</span><span style="color:#000000;">SERT </span><span style="color:#000000;">IN</span><span style="color:#000000;">TO</span><span style="color:#000000;">，</span><span style="color:#000000;">实现创建用户账号</span><span style="color:#000000;">，</span><span style="color:#000000;">具体</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句如下</span><span style="color:#000000;">：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">INSERT INTO user (Host,User, Password, ssl_cipher, x509_issuer,x509_subject)</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">VALUES('localhost','cjgong1',PASSWORD('123456'), '', '', '');</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="500" src="https://images2.imgbox.com/11/31/kgaRTfbF_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">执行结果显示，已经为</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件创建了一个名为</span><span style="color:#000000;">cjgong1</span><span style="color:#000000;">密码为</span><span style="color:#000000;">123456</span><span style="color:#000000;">的用户账户。这时如果在DOS窗口通过该用户账号登录MySQL服务器，不会登录成功，具体执行过程如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="393" src="https://images2.imgbox.com/98/6c/t6eoUuCm_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">之所以不会登录成功，是由于名为</span><span style="color:#000000;">cjgong1</span><span style="color:#000000;">用户账户还没有生效。</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（3）执行命令</span><span style="color:#000000;">FLUSH,</span><span style="color:#000000;">使用户账号cjgong</span><span style="color:#000000;">1</span><span style="color:#000000;">生效，具体命令内容如下</span><span style="color:#000000;">:</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">flush privileges;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="556" src="https://images2.imgbox.com/0e/a0/LlpC38Uj_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">这时如果通过该用户账号重新登录，就不会登录失败：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1032" src="https://images2.imgbox.com/ce/ba/GsyXYD7w_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>3.</strong></span></strong><strong><span style="color:#000000;"><strong>执行</strong></span></strong><strong><span style="color:#000000;"><strong>GRANT</strong></span></strong><strong><span style="color:#000000;"><strong>语句来创建用户</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">虽然</span><span style="color:#000000;">CREATE</span> <span style="color:#000000;">USER</span><span style="color:#000000;">语句和</span><span style="color:#000000;">INSERT</span> <span style="color:#000000;">INTO</span><span style="color:#000000;">语句都可以创建普通用户</span><span style="color:#000000;">，</span><span style="color:#000000;">但这两种方式不方便为用户赋权限</span><span style="color:#000000;">，</span><span style="color:#000000;">这时可以使用</span><span style="color:#000000;">GRANT</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数库管理系统中创建用户账户通过</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句GRANT</span> <span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>GRANT</strong></span></strong><strong> </strong><strong><span style="color:#000000;"><strong>priv_type</strong></span></strong><strong> </strong><strong><span style="color:#000000;"><strong>on</strong></span></strong><strong> </strong><strong><span style="color:#000000;"><strong>databasename</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>tablen</strong></span></strong><strong><span style="color:#000000;"><strong>ame </strong></span></strong><strong><span style="color:#000000;"><strong>（*</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>*）</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>TO</strong></span></strong><strong> </strong><strong><span style="color:#000000;"><strong>username</strong></span></strong><strong><span style="color:#000000;"><strong>[IDENTIFIED BY [PASSWORD] 'password']</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>[,username[IDENTIFIED BY [PASSWORD] 'password'])</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>……</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>[,username[IDENTIFIEDBY [PASSWORD] 'password']</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">参数</span><span style="color:#000000;">priv_type</span><span style="color:#000000;">表示用户实现设置所创建用户账号的权限</span><span style="color:#000000;">；</span><span style="color:#000000;">参数</span><span style="color:#000000;">databasename.tablename</span><span style="color:#000000;">表示所创建用户账号的权限范围</span><span style="color:#000000;">，</span><span style="color:#000000;">即只能在指定的数据库和表上使用这些权</span> <span style="color:#000000;">限；其他部分与</span><span style="color:#000000;">CREATE USER</span><span style="color:#000000;">语句一致。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">16</span><span style="color:#000000;">-</span><span style="color:#000000;">5</span><span style="color:#000000;">】 </span><span style="color:#000000;">执行SQL语句GRANT，创建名为cjgong</span><span style="color:#000000;">2</span><span style="color:#000000;">密码为1</span><span style="color:#000000;">23456</span><span style="color:#000000;">的用户账户，同时设置其只具有select权限，具体步骤如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）执行SQL语句</span><span style="color:#000000;"> GRANT</span><span style="color:#000000;">，</span><span style="color:#000000;">实现创建用户账号，具体SQL语句如下</span><span style="color:#000000;">:</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT SELECT ON company.t_dept</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">TO 'cjogng2'@'localhost' IDENTIFIED BY '123456';</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的SQL语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="453" src="https://images2.imgbox.com/7b/f6/HQsn2wzY_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">执行结果显示，已经创建了一个名为cjgong</span><span style="color:#000000;">2</span><span style="color:#000000;">密码为1</span><span style="color:#000000;">23456</span><span style="color:#000000;">的用户账户，该用户账号只对表</span><span style="color:#000000;">company.t_dept</span><span style="color:#000000;">具有査询权限。</span></p> 
<p><strong><strong><strong>2.3</strong></strong><strong><span style="color:#000000;"><strong>利用拥有超级权限用户root修改用户账户密码</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户管理机制包括登录和退出MySQL服务器、创建用户、修改用户密码、删除用户和为用户赋予权限等内容。本节将详细介绍如何修改用户账号，即修改用户账号密码。在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中可以通过两种方式来修改用户账号，分别为通过超级权限用户root修改用户账户密码和通过普通权限用户修改用户账号密码。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">本节将详细介绍如何利用用户账户root修改用户账户密码，按照所修改用户账户的权限分为修改</span><span style="color:#000000;">root</span><span style="color:#000000;">用户密码和修改普通用户密码两种类型。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在MySQL数据库管理系统中，修改超级权限用户root的密码可以通过三种方式来实现，分别为通过</span><span style="color:#000000;">mysqladmin</span><span style="color:#000000;">命令修改密码、通过</span><span style="color:#000000;">SET</span><span style="color:#000000;">语句修改密码和更新系统表</span> <span style="color:#000000;">mysql.user</span><span style="color:#000000;">数据记录。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1.</strong></span></strong><strong><span style="color:#000000;"><strong>通过</strong></span></strong><strong><span style="color:#000000;"><strong>mysqladmin</strong></span></strong><strong><span style="color:#000000;"><strong>命令修改</strong></span></strong><strong><span style="color:#000000;"><strong>root</strong></span></strong><strong><span style="color:#000000;"><strong>用户密码</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库管理系统中修改</span><span style="color:#000000;">root</span><span style="color:#000000;">用户密码通过命令来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysqlad</span><span style="color:#000000;">m</span><span style="color:#000000;">in -u username -p password "new_password"</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述命令中参数u表示用户名，参数p表示密码，password为关键字。参数</span><span style="color:#000000;">new_password</span><span style="color:#000000;">必须用双引号</span><span style="color:#000000;">（</span><span style="color:#000000;">“”）</span><span style="color:#000000;">括起来。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">16-6</span><span style="color:#000000;">】执行命令</span><span style="color:#000000;">mysqladmin，</span><span style="color:#000000;">修改用户</span><span style="color:#000000;">root</span><span style="color:#000000;">的密码为</span><span style="color:#000000;">rootadmin，</span><span style="color:#000000;">具体步骤如下</span><span style="color:#000000;">:</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">在</span><span style="color:#000000;">DOS</span><span style="color:#000000;">窗口里</span><span style="color:#000000;">，</span><span style="color:#000000;">执行命令</span><span style="color:#000000;">mysqladmin，</span><span style="color:#000000;">具有内容如下</span><span style="color:#000000;">：</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysqladmin [-h localhost] -u root -p password "</span><span style="color:#000000;">rootadmin</span><span style="color:#000000;">"</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】上述命令中，实现修改超级用户root的密码为rootadmin。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的命令语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="371" src="https://images2.imgbox.com/6b/92/IBlELeH4_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）</span><span style="color:#000000;">在执行命令</span><span style="color:#000000;">mysqladmin</span><span style="color:#000000;">的过程中</span><span style="color:#000000;">，</span><span style="color:#000000;">只有输入正确的旧密码就可以成功修改密码。修改密码后</span><span style="color:#000000;">，</span><span style="color:#000000;">就可以通过修改后的密码进行登录</span><span style="color:#000000;">，</span><span style="color:#000000;">具体内容如下</span><span style="color:#000000;">：</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -prootadmin </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1105" src="https://images2.imgbox.com/05/d0/46XOsv42_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2.</strong></span></strong><strong><span style="color:#000000;"><strong>通过set命令修改root用户密码</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当通过</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账户登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器后</span><span style="color:#000000;">，</span><span style="color:#000000;">可以通过</span><span style="color:#000000;">SET</span><span style="color:#000000;">命令修改</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账户密码。其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SET PASSWORD=PASSWORD(''new_password");</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述命令中，需要通过函数PASSWORD（）来加密新密码</span><span style="color:#000000;">new_password</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">15</span><span style="color:#000000;">-</span><span style="color:#000000;">7</span><span style="color:#000000;">】执行命令set修改用户root的密码为root（再修改回来），具体步骤如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）执行命令</span><span style="color:#000000;">SET,</span><span style="color:#000000;">修改用户账户</span><span style="color:#000000;">root</span><span style="color:#000000;">的密码为root，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SET PASSWORD=PASSWORD("</span><span style="color:#000000;">root</span><span style="color:#000000;">")</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的SQL语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/1e/51/lpVUdL4t_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）</span><span style="color:#000000;">在执行命令set后，为了校验修改密码是否成功，可以通过修改后的密码root重新登录MySQL服务器，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root –p</span><span style="color:#000000;">root</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】上述命令中，通过修改后的密码登录MySQL服务器。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1108" src="https://images2.imgbox.com/47/11/2OBPLfen_o.png" width="1200"><span style="color:#000000;">【运行效果】执行上面的语句，其结果如图所示。</span></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>3.</strong></span></strong><strong><span style="color:#000000;"><strong>更新系统表</strong></span></strong><strong><span style="color:#000000;"><strong>mysql.user</strong></span></strong><strong><span style="color:#000000;"><strong>数据记录修改root用户密码</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当通过</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账户登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器后，可以通过更新系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">的数据记录来修改root账户用户密码。具体语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">UPDATE user SET password=PASSWORD("new_password")WHERE user="root" AND host="localhost";</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">上述</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">通过更新语句更新表</span><span style="color:#000000;">user</span><span style="color:#000000;">中字段</span><span style="color:#000000;">password</span><span style="color:#000000;">的值</span><span style="color:#000000;">，</span><span style="color:#000000;">条件为</span><span style="color:#000000;">user="root" AND host="locaIhost" ;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">15-8</span><span style="color:#000000;">】执行</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">update</span><span style="color:#000000;">，更新系统表</span><span style="color:#000000;">user</span><span style="color:#000000;">中的信息，具体步骤如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（</span><span style="color:#000000;">1</span><span style="color:#000000;">）</span><span style="color:#000000;">执行SQL语句UPDATE</span><span style="color:#000000;">，</span><span style="color:#000000;">修改用户账户root的密码为rootadmin</span><span style="color:#000000;">,</span><span style="color:#000000;">具体内容如下</span><span style="color:#000000;">:</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">UPDATE </span><span style="color:#000000;">USER SET PASSWORD=PASSWORD </span><span style="color:#000000;">(</span><span style="color:#000000;">"</span><span style="color:#000000;">rootadmin</span><span style="color:#000000;">")</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">WHERE USER='ROOT' AND HOST='LOCALHOST';</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">修改成功后要执行刷新操作flush</span> <span style="color:#000000;">privileges</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">，</span><span style="color:#000000;">其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="906" src="https://images2.imgbox.com/2b/37/Iu213hYw_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）为了校验修改密码是否成功</span><span style="color:#000000;">，</span><span style="color:#000000;">可以通过修改后的密码rootadmin重新登录MySQL服务器</span><span style="color:#000000;">，</span><span style="color:#000000;">具</span> <span style="color:#000000;">体内容如下</span><span style="color:#000000;">：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root –p</span><span style="color:#000000;">rootadmin</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">可以登录成功。</span></p> 
<p><strong><strong><strong>2.4 </strong></strong><strong><span style="color:#000000;"><strong>利用拥有超级权限用户root修改普通用户账户密码</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">通过超级权限用户</span><span style="color:#000000;">root</span><span style="color:#000000;">修改普通用户账户也有三种方式，分别为通过</span><span style="color:#000000;">GRANT </span><span style="color:#000000;">命令修改密码、通过</span><span style="color:#000000;">SET</span><span style="color:#000000;">命令修改密码和更新系统表</span><span style="color:#000000;">mysq</span><span style="color:#000000;">l</span><span style="color:#000000;">.user</span><span style="color:#000000;">数据记录。为了便于讲解，创建的名为</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">，</span><span style="color:#000000;">密码为cjgong的用户账户，具体语法如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT SELECT,CREATE,DROP </span><span style="color:#000000;">O</span><span style="color:#000000;">N *</span><span style="color:#000000;">.</span><span style="color:#000000;">*</span> <span style="color:#000000;">TO 'cjgong'</span><span style="color:#000000;">@</span><span style="color:#000000;">'localhost' IDENTIFIED BY 'cjgong'</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">WITH GRANT OPTION;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】上述命令中</span><span style="color:#000000;">，</span><span style="color:#000000;">创建普通用户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">,</span><span style="color:#000000;">同时设置该用户的密码为</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="356" src="https://images2.imgbox.com/5d/e6/BRT9AgjX_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>通过</strong></span></strong><strong><span style="color:#000000;"><strong>GRANT</strong></span></strong><strong><span style="color:#000000;"><strong>命令修改c</strong></span></strong><strong><span style="color:#000000;"><strong>jgong</strong></span></strong><strong><span style="color:#000000;"><strong>用户密码</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库管理系统中修改</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">用户密码通过</span><span style="color:#000000;">GRANT</span><span style="color:#000000;">命令来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT priv_type ON database.table</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">TO user[IDENTIFIED BY[PASSWORD] 'new_password']</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述语句中，</span><span style="color:#000000;">参数</span><span style="color:#000000;">priv_type</span><span style="color:#000000;">用来设置普通用户的权限，</span><span style="color:#000000;">参数</span><span style="color:#000000;">database.table</span><span style="color:#000000;">用来设置用户的权限范围，参数</span><span style="color:#000000;">user</span><span style="color:#000000;">表示新用户账户，由用户名和主机名构成。值</span><span style="color:#000000;">new_password</span><span style="color:#000000;">表示为用户设置的新密码。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：</span><span style="color:#000000;">参数</span><span style="color:#000000;">new_password</span><span style="color:#000000;">必须用双引号</span><span style="color:#000000;">（“”）</span><span style="color:#000000;">括起来</span><span style="color:#000000;">.</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">15-9</span><span style="color:#000000;">】利用具有超级用户权限的用户</span><span style="color:#000000;">root,</span><span style="color:#000000;">修改普通用户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">的密码为</span><span style="color:#000000;">123456</span><span style="color:#000000;">，具体步骤如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">通过用户</span><span style="color:#000000;">root</span><span style="color:#000000;">，</span><span style="color:#000000;">连接到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库软件，具体</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h localhost -u root -proot</span></p> 
<p style="margin-left:.0001pt;text-align:left;">（2）执行GRANT，修改普通用户账号cjgong的密码。具体SQL语句如下：</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT SELECT,CREATE,DROP ON </span><span style="color:#000000;">*</span><span style="color:#000000;">.</span><span style="color:#000000;">*</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">TO 'cjgong'@'localhost' IDENTIFIED BY '123456';</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="651" src="https://images2.imgbox.com/b1/90/P6m3PMlc_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（3）为了校验修改密码是否成功，首先通过命令exit退出root用户登录，然后再通用户</span><span style="color:#000000;">cjgong</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">利用密码</span><span style="color:#000000;">123456</span><span style="color:#000000;">重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">EXIT</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u </span><span style="color:#000000;">cjgong</span><span style="color:#000000;"> –p123456</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述语句中，首先通过命令</span><span style="color:#000000;">EXIT</span><span style="color:#000000;">退出用户账户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录，然后通过用户账户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="988" src="https://images2.imgbox.com/fc/41/jv2qFGh4_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2.</strong></span></strong><strong><span style="color:#000000;"><strong>root账户</strong></span></strong><strong><span style="color:#000000;"><strong>通过set命令修改密码修改cjgong用户密码</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当通过</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账户登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器后，可以通过</span><span style="color:#000000;">SET</span><span style="color:#000000;">命令修改普通用户账户</span><span style="color:#000000;">cjgong </span><span style="color:#000000;">的密码。其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SET PASSWORD FOR</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">'username'@'hostname'=PASSWORD("new_password");</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述命令中，参数</span><span style="color:#000000;">usemame</span><span style="color:#000000;">用来表示普通用户的用户名，参数</span><span style="color:#000000;">new_password</span><span style="color:#000000;">用来表示所要设置的新密码。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">15</span><span style="color:#000000;">-</span><span style="color:#000000;">10</span><span style="color:#000000;">】</span><span style="color:#000000;">执行命令</span><span style="color:#000000;">SET,</span><span style="color:#000000;">修改用户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">的密码为cjgong，具体步骤如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">通过用户root</span><span style="color:#000000;">,</span><span style="color:#000000;">连接到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库软件，具体语句如下：</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -proot </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）执行上面的SQL语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SET PASSWORD FOR</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">'cjgong'</span><span style="color:#000000;">@</span><span style="color:#000000;">'localhost'</span><span style="color:#000000;">=</span><span style="color:#000000;">PASSWORD("</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">")</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1027" src="https://images2.imgbox.com/ca/9a/qsSxLUd1_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（3）</span><span style="color:#000000;">为了校验修改密码是否成功，首先通过命令</span><span style="color:#000000;">EXIT</span><span style="color:#000000;">退出</span><span style="color:#000000;">root</span><span style="color:#000000;">用户登录，然后再通用户</span><span style="color:#000000;">cjgong </span><span style="color:#000000;">利用密码cjgong重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">EXIT</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql –h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u </span><span style="color:#000000;">cjgong</span><span style="color:#000000;"> –p</span><span style="color:#000000;">cjgong</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述语句中，首先通过命令</span><span style="color:#000000;">EXIT</span><span style="color:#000000;">退出用户账户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录，然后通过用户账户</span> <span style="color:#000000;">cjgong</span><span style="color:#000000;">重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">根据执行结果，可以发现已经修改用户账户</span><span style="color:#000000;">qjgong</span><span style="color:#000000;">的密码为cjgong。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>3.</strong></span></strong><strong><span style="color:#000000;"><strong>更新系统表</strong></span></strong><strong><span style="color:#000000;"><strong>mysql.user</strong></span></strong><strong><span style="color:#000000;"><strong>数据记录修改</strong></span></strong><strong><span style="color:#000000;"><strong>cjgong</strong></span></strong><strong><span style="color:#000000;"><strong>用户密码</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当通过</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账户登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器后，可以通过更新系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">的数据记录来修改cjgong账户用户密码。具体语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">UPDATE user SET password</span><span style="color:#000000;">=</span><span style="color:#000000;">PASSWORD("ne</span><span style="color:#000000;">w</span><span style="color:#000000;">_password")</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">WHERE user="cjgong" AND host</span><span style="color:#000000;">=</span><span style="color:#000000;">"localhost";</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">15-11</span><span style="color:#000000;">】执行</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">UPDATE</span><span style="color:#000000;">，</span><span style="color:#000000;">更新系统表</span><span style="color:#000000;">user</span><span style="color:#000000;">中的信息</span><span style="color:#000000;">，</span><span style="color:#000000;">具体步骤如下</span><span style="color:#000000;">：</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">通过用户root</span><span style="color:#000000;">,</span><span style="color:#000000;">连接到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库软件</span><span style="color:#000000;">；</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）</span><span style="color:#000000;">执行SQL语句use，选择数据库mysql；</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（3）执行SQL语句UPDATE，修改用户账户cjgong的密码为123456，</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">UPDATE USER SET password=PASSWORD('123456')</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">WHERE USER</span><span style="color:#000000;">=</span><span style="color:#000000;">'cjgong' AND host</span><span style="color:#000000;">=</span><span style="color:#000000;">'localhost';</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的SQL语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="934" src="https://images2.imgbox.com/9d/68/rb9JhFnM_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（4）</span><span style="color:#000000;">为了校验修改密码是否成功，首先通过命令</span><span style="color:#000000;">EXIT</span><span style="color:#000000;">退出</span><span style="color:#000000;">root</span><span style="color:#000000;">用户登录，然后再通用户</span><span style="color:#000000;">cjgong </span><span style="color:#000000;">利用密码</span><span style="color:#000000;">123456</span><span style="color:#000000;">重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">EXIT</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span> <span style="color:#000000;">-</span><span style="color:#000000;">u </span><span style="color:#000000;">cjgong</span><span style="color:#000000;"> –p123456</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述语句中，首先通过命令</span><span style="color:#000000;">EXIT</span><span style="color:#000000;">退出用户账户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录，然后通过用户账户</span> <span style="color:#000000;">cjgong</span><span style="color:#000000;">重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">根据执行结果，可以发现己经修改用户账户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">的密码为</span><span style="color:#000000;">123456</span><span style="color:#000000;">。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>4.</strong></span></strong><strong><span style="color:#000000;"><strong>普通账户</strong></span></strong><strong><span style="color:#000000;"><strong>通过</strong></span></strong><strong><span style="color:#000000;"><strong>SET</strong></span></strong><strong><span style="color:#000000;"><strong>命令修改密码修改</strong></span></strong><strong><span style="color:#000000;"><strong>cjgong</strong></span></strong><strong><span style="color:#000000;"><strong>用户密码</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当通过普通用户账户登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器后，可以通过</span><span style="color:#000000;">SET</span><span style="color:#000000;">命令修改自己的密码。其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SET PASSWORD=PASSWORD("new_password");</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">15-12</span><span style="color:#000000;">】执行命令set，修改用户cjgong的密码为cjgong</span><span style="color:#000000;">,</span><span style="color:#000000;">具体步骤如下</span><span style="color:#000000;">: </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">通过用户cjgong，连接到MySQL数据库软件，具体SQL语句如下：</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u cjgong –p123456</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）执行set命令，修改cjgong账户密码为cjgong，</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SET PASSWORD=PASSWORD("</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">");</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="417" src="https://images2.imgbox.com/44/b7/9g41IqvB_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;">（3）<span style="color:#000000;">为了校验修改密码是否成功</span><span style="color:#000000;">，</span><span style="color:#000000;">首先通过命令</span><span style="color:#000000;">EXIT</span><span style="color:#000000;">退出</span><span style="color:#000000;">root</span><span style="color:#000000;">用户登录</span><span style="color:#000000;">，</span><span style="color:#000000;">然后再通用户</span><span style="color:#000000;">cjgong </span><span style="color:#000000;">利用密码</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器</span><span style="color:#000000;">，</span><span style="color:#000000;">具体内容如下</span><span style="color:#000000;">：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">EXIT</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span> <span style="color:#000000;">-</span><span style="color:#000000;">u root –p</span><span style="color:#000000;">cjgong</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述语句中，首先通过命令</span><span style="color:#000000;">EXTT</span><span style="color:#000000;">退出用户账户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录，然后通过用户账户</span> <span style="color:#000000;">cjgong</span><span style="color:#000000;">重新登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件。</span></p> 
<p><strong><strong><strong>2.5 </strong></strong><strong><strong>删除</strong></strong><strong><span style="color:#000000;"><strong>普通用户账户</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">用户账号的操作包括创建用户账号和删除用户账号。本节将详细介绍如何删除用户账号。在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中可以通过两种方式来删除用户账号</span><span style="color:#000000;">,</span><span style="color:#000000;">分别为通过drop</span> <span style="color:#000000;">user语句和通过删除系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">里相应数据记录实现删除用户账号。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1.</strong></span></strong><strong><span style="color:#000000;"><strong>通过drop</strong></span></strong><strong> </strong><strong><span style="color:#000000;"><strong>user语句删除普通用户</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中删除普通用户通过</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">DROP USER</span><span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">DROP USER user1[,user2]...</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">参数</span><span style="color:#000000;">user</span><span style="color:#000000;">表示所要删除的用户</span><span style="color:#000000;">，</span><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中</span><span style="color:#000000;">，</span><span style="color:#000000;">用户由用户名</span><span style="color:#000000;">（</span><span style="color:#000000;">user</span><span style="color:#000000;">）</span><span style="color:#000000;">和主机名</span><span style="color:#000000;">（</span><span style="color:#000000;">host</span><span style="color:#000000;">）</span><span style="color:#000000;">组成。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2.</strong></span></strong><strong><span style="color:#000000;"><strong>删除系统表</strong></span></strong><strong><span style="color:#000000;"><strong>mysql.user</strong></span></strong><strong><span style="color:#000000;"><strong>数据记录实现删除</strong></span></strong><strong><span style="color:#000000;"><strong>cjgong</strong></span></strong><strong><span style="color:#000000;"><strong>用户账号</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">当通过</span><span style="color:#000000;">root</span><span style="color:#000000;">用户账号登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器后，可以通过更新系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">的数据记录来</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">修改root账户用户密码。具体语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">DELETE FROM user</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">WHERE user='cjgong" AND host="localhost";</span></p> 
<h4 style="text-align:justify;"><strong><strong><strong>三、学习任务</strong></strong><strong><strong>3</strong></strong><strong><strong>：权限管理</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">为了进行权限管理，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件在数据库</span><span style="color:#000000;">mysq</span><span style="color:#000000;">l</span><span style="color:#000000;">的</span><span style="color:#000000;">user</span><span style="color:#000000;">表中存储了各种类型权限。权限管理，是指登录到MySQL数据库服务器的用户需要进行权限验证，只有拥有了权限，才能进行该权限相对应的操作。合理的权限管理能够保证数据库系统的安全，不合理的权限管理会给数据库服务器带来非常可怕的安全隐患。</span></p> 
<p><strong><strong><strong>3.1</strong></strong><strong><span style="color:#000000;"><strong> 对用户进行授权</strong></span></strong><strong> </strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">权限管理包含授权、查看权限和收回权限。本节将详细介绍如何对用户进行授权。授权是指为用户赋予相应的权限。合理的授权能够保证数据库的安全，不合理的授权会给数据库带有安全隐患。在进行授权操作之前，首先需要用户具有GRANT权限。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">root用户和普通用户，其中前者为超级管理员，拥有MySQL软件提供的一切权限；而普通用户则只能拥有创建用户时赋予它的权限。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件对用户授权通过</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">GRANT</span><span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT priv_type [(column_list)] ON database.table TO user [IDENTIFIED BY[PASSWORD] 'password'] [,user [IDENTIFIED BY[PASSWORD] 'password']]</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">…</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">[WITH with-option]</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">参数</span><span style="color:#000000;">priv_type</span><span style="color:#000000;">表示权限的类型</span><span style="color:#000000;">，</span><span style="color:#000000;">参数</span><span style="color:#000000;">column_list</span><span style="color:#000000;">表示权限所作用于的字段</span><span style="color:#000000;">，</span><span style="color:#000000;">当省略该参数时表示作用于整个表</span><span style="color:#000000;">；</span><span style="color:#000000;">参数</span><span style="color:#000000;">database.table</span><span style="color:#000000;">表示数据库中的某个表</span><span style="color:#000000;">，</span><span style="color:#000000;">参数</span><span style="color:#000000;">user</span><span style="color:#000000;">表示用户</span><span style="color:#000000;">，</span><span style="color:#000000;">由用户名和主机名构成</span><span style="color:#000000;">，</span><span style="color:#000000;">关键字</span><span style="color:#000000;">I</span><span style="color:#000000;">DENTIFIED BY</span><span style="color:#000000;">用来实现设置密码</span><span style="color:#000000;">，</span><span style="color:#000000;">至于参数</span><span style="color:#000000;">with-option</span><span style="color:#000000;">，</span><span style="color:#000000;">其值只能是下面</span><span style="color:#000000;">5</span><span style="color:#000000;">个值中的一个</span><span style="color:#000000;">，</span><span style="color:#000000;">详细内容如下。</span></p> 
<ul><li style="text-align:left;"><span style="color:#000000;">GRANT OPTION</span><span style="color:#000000;">：</span><span style="color:#000000;">被授权的用户可以将权限授权给其他用户。</span></li><li style="text-align:left;"><span style="color:#000000;">MAX_QUER</span><span style="color:#000000;">IE</span><span style="color:#000000;">S_PER_HOUR count</span><span style="color:#000000;">：</span><span style="color:#000000;">设置每小时可以执行</span><span style="color:#000000;">count</span><span style="color:#000000;">次査询。</span></li><li style="text-align:left;"><span style="color:#000000;">MAX_UPDATES_PER_HOUR count</span><span style="color:#000000;">：</span><span style="color:#000000;">设置每小时可以执行</span><span style="color:#000000;">count</span><span style="color:#000000;">次更新。</span></li><li style="text-align:left;"><span style="color:#000000;">MAX_CONNECTIONS_PER_HOUR count</span><span style="color:#000000;">：</span><span style="color:#000000;">设置每小时可以建立</span><span style="color:#000000;">count</span><span style="color:#000000;">次连接。</span></li><li style="text-align:left;"><span style="color:#000000;">MAX_USER_CONNECTIONS count</span><span style="color:#000000;">：</span><span style="color:#000000;">设置单个用户可以同时具有</span><span style="color:#000000;">count</span><span style="color:#000000;">个连接。</span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">15-13</span><span style="color:#000000;">】执行</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">GRANT,</span><span style="color:#000000;">为用户账号</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">授权相应权限。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">由于root用户为超级管理员，拥有MySQL软件提供的一切权限，所以可以通过该用户连接到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库服务器进行授权操作，具体</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u root -proot</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）</span><span style="color:#000000;">执行SQL语句GRANT，创建一个名为cjgong，密码为cjgong的用户账号，同时设置该用户对所有数据库里的数据具有select、create、drop以及grant权限，具体语法如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT SELECT,CREATE,DROP ON *</span><span style="color:#000000;">.</span><span style="color:#000000;">*</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">TO </span><span style="color:#000000;">'cjgong' </span><span style="color:#000000;">@</span><span style="color:#000000;">'</span><span style="color:#000000;">localhost</span><span style="color:#000000;">' IDENTIFIED BY 'cjgong' WITH GRANT OPTION;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（3）</span><span style="color:#000000;">为了校验修改授权是否成功，查询系统表user中关于用户cjgong的数据记录，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">select * from user where user='cjgong'\G</span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/28/cb/hln91EEy_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（4）创建cjgong</span><span style="color:#000000;">1</span><span style="color:#000000;">密码为cjgong</span><span style="color:#000000;">1</span><span style="color:#000000;">的普通账户，</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">CREATE USER 'cjgong1'@'localhost' IDENTIFIED BY '</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">1';</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（</span><span style="color:#000000;">5</span><span style="color:#000000;">）</span><span style="color:#000000;">通过命令GRANT退出EXIT用户登录，然后再通过普通用户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">登录</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器进行授权操作，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">EXIT</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -h </span><span style="color:#000000;">localhost</span><span style="color:#000000;"> -u cjgong –pcjgong</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（</span><span style="color:#000000;">6</span><span style="color:#000000;">）执行SQL语句GRANT，通过用户cjgong为用户cjgong</span><span style="color:#000000;">1</span><span style="color:#000000;">授权，具体语法如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT SELECT,CREATE</span><span style="color:#000000;">,</span><span style="color:#000000;">DROP ON *.*</span> <span style="color:#000000;">TO 'cjgong1'</span><span style="color:#000000;">@</span><span style="color:#000000;">'</span><span style="color:#000000;">localhost';</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述命令中</span><span style="color:#000000;">，</span><span style="color:#000000;">为用户</span><span style="color:#000000;">cjgong1</span><span style="color:#000000;">授予了</span><span style="color:#000000;"> SELECT</span><span style="color:#000000;">、</span><span style="color:#000000;">CREATE</span><span style="color:#000000;">、</span><span style="color:#000000;">DROP</span><span style="color:#000000;">权限。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的命令语句</span><span style="color:#000000;">，</span><span style="color:#000000;">其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="435" src="https://images2.imgbox.com/81/56/w5lt9HVI_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（7）</span><span style="color:#000000;">为了校验修改授权是否成功，査询系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">中关于用户</span><span style="color:#000000;">cjgong1</span><span style="color:#000000;">的数据记录，具体内容如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">select * from user where user='cjgong1'\G</span></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/c9/f5/I7c2voxP_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（8）</span><span style="color:#000000;">执行</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">GRANT,</span><span style="color:#000000;">通过用户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">为用户</span><span style="color:#000000;">cjgong2</span><span style="color:#000000;">赋予</span><span style="color:#000000;">UPDATE</span><span style="color:#000000;">等权限，具体语法如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">GRANT SELECT,CREATE,</span><span style="color:#000000;">update</span><span style="color:#000000;"> ON *.*</span> <span style="color:#000000;">TO </span><span style="color:#000000;">'</span><span style="color:#000000;">cjgong2</span><span style="color:#000000;">'</span><span style="color:#000000;">@</span><span style="color:#000000;">'</span><span style="color:#000000;">localhost</span><span style="color:#000000;">'</span><span style="color:#000000;">;</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述命令中</span><span style="color:#000000;">，</span><span style="color:#000000;">为用户</span><span style="color:#000000;">cjgong2</span><span style="color:#000000;">授予了</span><span style="color:#000000;"> UPDATE</span><span style="color:#000000;">、</span><span style="color:#000000;">SELECT</span><span style="color:#000000;">、</span><span style="color:#000000;">CREATE</span><span style="color:#000000;">、</span><span style="color:#000000;">DROP</span><span style="color:#000000;">权限</span><span style="color:#000000;">.</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在为用户</span><span style="color:#000000;">cjgong</span><span style="color:#000000;">授权时</span><span style="color:#000000;">，</span><span style="color:#000000;">with_option</span><span style="color:#000000;">选项的值为</span><span style="color:#000000;">WITH GRANT OPTION,</span><span style="color:#000000;">表示被授权的用户</span><span style="color:#000000;">c</span><span style="color:#000000;">jgong</span><span style="color:#000000;">可以将这些权限</span><span style="color:#000000;">（</span><span style="color:#000000;">SELECT</span><span style="color:#000000;">、</span><span style="color:#000000;">CREATE</span><span style="color:#000000;">、</span><span style="color:#000000;">DROP</span><span style="color:#000000;">、</span><span style="color:#000000;">GRANT </span><span style="color:#000000;">权限）</span><span style="color:#000000;">赋予给其他用户</span><span style="color:#000000;">（</span><span style="color:#000000;">cjgong1</span><span style="color:#000000;">）</span><span style="color:#000000;">。</span><span style="color:#000000;">但是由于用户cjgong将权限update赋予给了用户cjgong</span><span style="color:#000000;">2,</span><span style="color:#000000;">超出了cjgong用户所拥有的权限，会报错。</span></p> 
<p><strong><strong><strong>3.2 </strong></strong><strong><span style="color:#000000;"><strong>查看用户所拥有权限</strong></span></strong><strong> </strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">权限管理包含授权、查看权限和收回权限。本节将详细介绍如何查看用户所拥有的权限。可以通过査看系统表</span><span style="color:#000000;">mysql.user</span><span style="color:#000000;">中的数据记录来查看相应用户的权限。除了该种方式外，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件还专门提供了</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">SHOW GRANTS</span><span style="color:#000000;">实现査看权限。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在MySQL软件中查看用户权限通过SQL语句</span><span style="color:#000000;">SHOW GRANT</span><span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">SHOW GRANTS FOR user</span></p> 
<p><strong><strong><strong>3.3 </strong></strong><strong><span style="color:#000000;"><strong>收回用户所拥有权限</strong></span></strong><strong> </strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">权限管理包含授权、查看权限和收回权限</span><span style="color:#000000;">，</span><span style="color:#000000;">既然可以给用户进行授权</span><span style="color:#000000;">，</span><span style="color:#000000;">那么就应该能够回收赋予用户的权限。在上面章节己经详细介绍关于授权和查看授权操作，本节将详细介绍如何收回权限。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">收回权限是指取消用户的某些权限。收回用户不应该拥有的权限，可以很好地消除数据库的安全</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">隐患。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件收回权限通过</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句</span><span style="color:#000000;">REVOKE</span><span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">REVOKE priv_type[(column_list)] ON database. table </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">FROM user1[IDENTIFIED BY[PASSWORD]) 'password']</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">[,user2[IDENTIFIED BY[PASSWORD] 'password']</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">由于回收权限语法与授权语法非常相似，所以就不详细介绍各个参数。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">除了上述语法形式外，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件还专门提供了一种回收全部权限的</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句，具体语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">REVOKE ALL PRIVILEGES,GRANT OPTION</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">FRCM user1[IDENTIFIED BY[PASSWORD] 'password']</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">[,user2[IDENTIFIED BY[PASSWORD] 'password']</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">上述语句主要用来实现回收用户所拥有的全部权限。</span></p> 
<h4 style="text-align:justify;"><strong><strong><strong>四、学习任务</strong></strong><strong><strong>4</strong></strong><strong><strong>：数据库备份还原</strong></strong></strong></h4> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">所谓数据库维护，主要包含备份数据、还原数据和数据库迁移。通过数据备份和还原可以保证</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的数据安全。</span></p> 
<p><strong><strong><strong>4.1 </strong></strong><strong><span style="color:#000000;"><strong>通过复制数据文件实现数据备份</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">备份数据是数据库维护中最常用的操作，通过备份后的数据文件可以在数据库发生故障后还原和恢复数据。可能造成数据损失的原因很多，包含如下几个方面。</span></p> 
<ul><li style="text-align:left;"><span style="color:#000000;">存储介质故障：保存数据库文件的磁盘设备损坏，用户没有数据库备份导致数据彻底丢失。</span></li><li style="text-align:left;"><span style="color:#000000;">用户的错误操作：如误删除了某些重要数据，甚至整个数据库。</span></li><li style="text-align:left;"><span style="color:#000000;">服务器的彻底瘫痪：如数据库服务器彻瘫痪，系统需要重建。</span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">由于</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器中的数据文件是基于磁盘的文本文件，所以最简单、最直接的备份操作，就是数据文件直接复制出来。由于</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的数据文件在服务器运行时期，总是处于打开和使用状态，因此文本文件副本备份不一定总是有效。为了解决该问题，在具体复制数据文件时，需要先停止</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库服务器。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：为了保证所备份数据的完整性，在停止MySQL数据库服务器之前，需要先执行FLUSH</span> <span style="color:#000000;">TABLES</span><span style="color:#000000;">语句将所有数据写入到数据文件的文本文件里。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">虽然停止</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库服务器，可以解决复制数据文件实现数据备份的问题，但是这种方法不是最好的备份方法。这是因为实际情况下，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库服务器不允许被停止，同时该种方式对</span><span style="color:#000000;">InnoDB</span><span style="color:#000000;">存储引擎的表也不适合。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：在通过复制数据文件方式实现数据备份时，只适合存储引擎为MyISAM的表。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">Windows</span><span style="color:#000000;">操作系统下，</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库服务器的数据文件经常存放在如下</span><span style="color:#000000;">3</span><span style="color:#000000;">个路径之一。</span></p> 
<ul><li style="text-align:left;"><span style="color:#000000;">C:\mysql\date </span><span style="color:#000000;">目录。</span></li><li style="text-align:left;"><span style="color:#000000;">C</span><span style="color:#000000;">:\D</span><span style="color:#000000;">ocuments and Settings\ALL Users\Application Data\MySQL\MySQL Server 5.6\data </span><span style="color:#000000;">目录。</span></li><li style="text-align:left;"><span style="color:#000000;">C:\Program Files\MySQL\MySQL Server 5.6\data </span><span style="color:#000000;">目录</span><span style="color:#000000;">（</span><span style="color:#000000;">本书</span> <span style="color:#000000;">MySQL </span><span style="color:#000000;">数据库服务器所安装的目录</span><span style="color:#000000;">）。</span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">如果需要进行备份操作，可以直接复制上述相关目录里的数据文件。</span></p> 
<p><strong><strong><strong>4.2 </strong></strong><strong><span style="color:#000000;"><strong>通过命令</strong></span></strong><strong><span style="color:#000000;"><strong>mysqldump</strong></span></strong><strong><span style="color:#000000;"><strong>实现数据备份</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">除了可以通过复制数据文件实现数据备份外，还可以通过其他方式来实现。在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中经常通过命令</span><span style="color:#000000;">mysqldump</span><span style="color:#000000;">实现数据备份，即该命令会将包含数据的表结构和数据内容保存在相应的文本文件。具体执行时，首先会检査所需要备份数据的表结构，在相应的文本文件中生成CREATE语句。然后检査数据内容，在相应的文本文件中生成INSERT</span> <span style="color:#000000;">INTO语句。将来如果需要进行还原数据，只需执行文本文件中的</span><span style="color:#000000;">CREATE</span><span style="color:#000000;">语句和IN</span><span style="color:#000000;">SERT </span><span style="color:#000000;">IN</span><span style="color:#000000;">TO</span><span style="color:#000000;">语句。</span> <span style="color:#000000;">在具体使用命令mysqldump时，经常分为以下</span><span style="color:#000000;">3</span><span style="color:#000000;">种形式。</span></p> 
<ul><li style="text-align:left;"><span style="color:#000000;">备份一个数据库。</span></li><li style="text-align:left;"><span style="color:#000000;">备份多个数据库。</span></li><li style="text-align:left;"><span style="color:#000000;">备份所有数据库。</span></li></ul> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">下面将详细介绍命令</span><span style="color:#000000;">mysqldump</span><span style="color:#000000;">的使用方式。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>1</strong></span></strong><strong><span style="color:#000000;"><strong>.</strong></span></strong><strong><span style="color:#000000;"><strong>备份一个数据库</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中备份一个数据库通过命令</span><span style="color:#000000;">mysq</span><span style="color:#000000;">l</span><span style="color:#000000;">dump</span><span style="color:#000000;">来实现，其命令形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysqldump -u username -p dbname table1 table2 </span><span style="color:#000000;">…</span><span style="color:#000000;"> tablen</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">&gt;backupname.sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述语句中，</span><span style="color:#000000;">usemame</span><span style="color:#000000;">参数表示用户名;参数d</span><span style="color:#000000;">bname</span><span style="color:#000000;">表示数据库</span><span style="color:#000000;">；</span><span style="color:#000000;">参数t</span><span style="color:#000000;">able</span><span style="color:#000000;">表示所要备份的表，如果没有参数t</span><span style="color:#000000;">able</span><span style="color:#000000;">,</span><span style="color:#000000;">则表示备份整个数据库；参数</span><span style="color:#000000;">backupname</span><span style="color:#000000;">表示所生成的备份文件。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：备份文件一般以.</span><span style="color:#000000;">sql</span><span style="color:#000000;">为扩展名，也可以使用其他扩展名，不过</span><span style="color:#000000;">.</span><span style="color:#000000;">s</span><span style="color:#000000;">ql</span><span style="color:#000000;">扩展名的文件给人的感觉就是与数据库的文件有关。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">17-1</span><span style="color:#000000;">】通过超级用户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器</span><span style="color:#000000;">，</span><span style="color:#000000;">然后备份</span><span style="color:#000000;">company</span><span style="color:#000000;">数据库下的</span><span style="color:#000000;">t_employee </span><span style="color:#000000;">表</span><span style="color:#000000;">，</span><span style="color:#000000;">具体步骤如下</span><span style="color:#000000;">：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">于</span><span style="color:#000000;">DOS</span><span style="color:#000000;">窗口中执行命令</span><span style="color:#000000;">mysqldump，</span><span style="color:#000000;">备份数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">下的表</span><span style="color:#000000;">t_employee</span><span style="color:#000000;">，</span><span style="color:#000000;">具体内容如下</span><span style="color:#000000;">：</span><span style="color:#000000;">mysqldump -u root -p co</span><span style="color:#000000;">m</span><span style="color:#000000;">pany t_dept&gt; </span><span style="color:#000000;">D</span><span style="color:#000000;">:\</span><span style="color:#000000;">t_</span><span style="color:#000000;">dept</span><span style="color:#000000;">_back.sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">通过用户</span><span style="color:#000000;">root</span><span style="color:#000000;">对数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">里的表</span><span style="color:#000000;">t_employee</span><span style="color:#000000;">进行备份</span><span style="color:#000000;">，</span><span style="color:#000000;">同时设</span> <span style="color:#000000;">置备份文件为</span><span style="color:#000000;">D</span><span style="color:#000000;">磁盘下的文件</span><span style="color:#000000;">t_employee_</span><span style="color:#000000;"> back.sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的命令语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="378" src="https://images2.imgbox.com/1b/d3/auBiRqV4_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<ol><li style="text-align:left;">打开磁盘D，将创建一个名为<span style="color:#000000;">t_employee</span><span style="color:#000000;">_back.sql</span><span style="color:#000000;">的</span><span style="color:#000000;">新文件，具体内容如下：</span></li></ol> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1200" src="https://images2.imgbox.com/3d/33/oH3UPLRg_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】上述语句中存在两种注释</span><span style="color:#000000;">，</span><span style="color:#000000;">以</span><span style="color:#000000;">“-</span><span style="color:#000000;">-</span><span style="color:#000000;">”</span><span style="color:#000000;">开头都是关于</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语言的注释，以</span><span style="color:#000000;">“</span><span style="color:#000000;">/*!40014</span><span style="color:#000000;">”</span> <span style="color:#000000;">开头都是关于与</span><span style="color:#000000;">MySQL 5.6.14</span><span style="color:#000000;">服务器相关的注释。整个文档开始部分记录了</span> <span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器的版本、主机名和数据库名，分别为</span><span style="color:#000000;">Server version 5.6.14</span><span style="color:#000000;">、</span><span style="color:#000000;">loca</span><span style="color:#000000;">lh</span><span style="color:#000000;">ost</span><span style="color:#000000;">和</span><span style="color:#000000;">company</span><span style="color:#000000;">。</span><span style="color:#000000;">文档中存在</span><span style="color:#000000;">DROP</span><span style="color:#000000;">语句、</span> <span style="color:#000000;">CREATE</span><span style="color:#000000;">语句和“</span><span style="color:#000000;">INSERT </span><span style="color:#000000;">IN</span><span style="color:#000000;">TO</span><span style="color:#000000;">”</span><span style="color:#000000;">语句，它们分别为将来还原数据库时使用。其中</span><span style="color:#000000;">“</span><span style="color:#000000;">DROP TABLE ff EXISTS't_</span><span style="color:#000000;">employee</span><span style="color:#000000;">';"</span><span style="color:#000000;">语句用来判断数据库中是否还有名为</span><span style="color:#000000;">t_</span><span style="color:#000000;">employee</span><span style="color:#000000;">的表；如果存在，则刪除掉这个表；其中</span><span style="color:#000000;">“</span><span style="color:#000000;">CREATE TABLE</span><span style="color:#000000;">”</span><span style="color:#000000;">语句用来实现创建表；</span><span style="color:#000000;">“IN</span><span style="color:#000000;">SERT </span><span style="color:#000000;">IN</span><span style="color:#000000;">TO</span><span style="color:#000000;">”</span><span style="color:#000000;">语句用来实现还原表里的数据。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：在具体还原数据时，如果MySQL服务器的版本比</span><span style="color:#000000;">5.5.21</span><span style="color:#000000;">高，</span><span style="color:#000000;">“</span><span style="color:#000000;">/*!40000</span><span style="color:#000000;">”</span><span style="color:#000000;">和</span><span style="color:#000000;">“</span><span style="color:#000000;">*/</span><span style="color:#000000;">”</span><span style="color:#000000;">间的代码将被当作SQL命令来执行；如果MySQL服务器的版本比</span><span style="color:#000000;">5.5.2</span><span style="color:#000000;">1低，</span><span style="color:#000000;">“</span><span style="color:#000000;">/*!40000</span><span style="color:#000000;">”</span><span style="color:#000000;">和“</span><span style="color:#000000;">*”</span><span style="color:#000000;">之间的代码将被当作注释</span><span style="color:#000000;">.</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>2.</strong></span></strong><strong><span style="color:#000000;"><strong>备份多个数据库</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中备份多个数据库通过命令</span><span style="color:#000000;">mysq</span><span style="color:#000000;">ld</span><span style="color:#000000;">ump</span><span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysqldump -u username -p -</span><span style="color:#000000;">-</span><span style="color:#000000;">databases dbname1 dbname2 </span><span style="color:#000000;">… </span><span style="color:#000000;">dbnamen</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">&gt; backupname.sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">上述语句中多出一个名为</span><span style="color:#000000;">databases</span><span style="color:#000000;">选项，该选项用来设置所备份的数据库。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">17-2</span><span style="color:#000000;">】通过超级用户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器</span><span style="color:#000000;">，</span><span style="color:#000000;">然后备份</span><span style="color:#000000;">company</span><span style="color:#000000;">和</span><span style="color:#000000;">company1</span><span style="color:#000000;">数据库</span><span style="color:#000000;">，</span><span style="color:#000000;">具体步骤如下。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（1）</span><span style="color:#000000;">在</span><span style="color:#000000;">DOS</span><span style="color:#000000;">窗口中执行命令</span><span style="color:#000000;">mysqldump,</span><span style="color:#000000;">备份数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">和</span><span style="color:#000000;">company1,</span><span style="color:#000000;">具体内容如下</span><span style="color:#000000;">：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysqldump -u root -p --databases company company1&gt; D:\database_co</span><span style="color:#000000;">m</span><span style="color:#000000;">pany_back.sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">通过选项设置备份数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">和</span><span style="color:#000000;">company1</span><span style="color:#000000;">。</span> </p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的命令语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="750" src="https://images2.imgbox.com/c9/6c/MQOkmnjd_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">通过查看文件</span><span style="color:#000000;">database_company_back.sql</span><span style="color:#000000;">，</span><span style="color:#000000;">可以发现不仅对数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">进行了备份</span><span style="color:#000000;">，</span><span style="color:#000000;">而且还对数据库</span><span style="color:#000000;">company1</span><span style="color:#000000;">进行了备份。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><strong><span style="color:#000000;"><strong>3.</strong></span></strong><strong><span style="color:#000000;"><strong>备份所有数据库</strong></span></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中备份所有数据库通过命令</span><span style="color:#000000;">my</span><span style="color:#000000;">s</span><span style="color:#000000;">q</span><span style="color:#000000;">l</span><span style="color:#000000;">dump</span><span style="color:#000000;">来实现，其语法形</span> <span style="color:#000000;">式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysqldump -u username -p --all –databases</span> &gt; <span style="color:#000000;">backupname.sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">上述语句中多出一个名为all的选项，用来实现备份所有数据库。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysqldump -u root -p --all-databases&gt; </span><span style="color:#000000;">D</span><span style="color:#000000;">:\all_databases_back.sql </span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">通过</span><span style="color:#000000;">“--</span><span style="color:#000000;">all-databases</span><span style="color:#000000;">”</span><span style="color:#000000;">选项设置备份所有数据库。</span></p> 
<p><strong><strong><span style="color:#000000;"><strong>4.3 通过复制数据实现数据还原</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">还原数据是数据库维护中最常用的操作，利用备份文件可以将</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库服务器还原到备份时状态，这样就可以将管理员的非常操作和计算机的故障造成的相关损失降到最小。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">前面章节介绍了通过复制数据文件实现数据备份，可以通过复制该种方式所生成的备份文件来实现还原操作。在通过复制数据文件这种方式实现数据还原时，必须保证两个</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库的主版本号一致，因为只有</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库主版本号相同时，才能保证两个</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库的文件类型是相同的</span><span style="color:#000000;">。</span><span style="color:#000000;">由于通过复制数据文件实现数据备份时，对存储引擎类型为</span><span style="color:#000000;">InnoDB</span><span style="color:#000000;">的表不可用，仅对存储引擎为</span><span style="color:#000000;">MyISAM</span><span style="color:#000000;">类型的表有效。因此通过复制数据文件实现数据还原时，也只对存储类型为</span> <span style="color:#000000;">MyISAM</span><span style="color:#000000;">类型的表有效。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">注意：关于MySQL数据库服务器的版本号，第一个数字表示主版本号，只有主版本号一致的</span> <span style="color:#000000;">MySQL</span><span style="color:#000000;">数据文件，</span><span style="color:#000000;">其文件类型才会相同。例如MySQL</span><span style="color:#000000;">5.5.2</span><span style="color:#000000;">和MySQL</span><span style="color:#000000;">5.5.0</span><span style="color:#000000;">这两个版本的主版本号都是</span><span style="color:#000000;">5</span><span style="color:#000000;">，</span><span style="color:#000000;">这两个数据库的数据文件拥有相同类型的数据文件</span><span style="color:#000000;">。</span></p> 
<p><strong><strong><span style="color:#000000;"><strong>4</strong></span></strong><strong><span style="color:#000000;"><strong>.4 </strong></span></strong><strong><span style="color:#000000;"><strong>通过命令</strong></span></strong><strong><span style="color:#000000;"><strong>mysql</strong></span></strong><strong><span style="color:#000000;"><strong>实现数据还原</strong></span></strong></strong></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">除了可以通过复制数据文件实现数据还原外，还可以通过其他方式来实现。在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中经常通过命令</span><span style="color:#000000;">mysql</span><span style="color:#000000;">实现数据还原。在</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">软件中还原数据库通过命令</span><span style="color:#000000;">mysql</span><span style="color:#000000;">来实现，其语法形式如下：</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -u username -p [dbname]&lt; backupname. sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在上述语句中，</span><span style="color:#000000;">usemame</span><span style="color:#000000;">参数表示用户名；参数</span><span style="color:#000000;">backupname</span><span style="color:#000000;">表示所用来还原的备份文件；参数</span><span style="color:#000000;">dbname</span><span style="color:#000000;">用来指定数据库的名称，可以指定也可以不指定，指定数据库时表示还原该数据库下的表，不指定数据库时表示还原备份文件中的所有数据库。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">在具体执行命令</span><span style="color:#000000;">mysql</span><span style="color:#000000;">时</span><span style="color:#000000;">，</span><span style="color:#000000;">将执行备份文件中的</span><span style="color:#000000;">create</span><span style="color:#000000;">和</span><span style="color:#000000;">insert</span> <span style="color:#000000;">into</span><span style="color:#000000;">语句</span><span style="color:#000000;">，</span><span style="color:#000000;">即通过执行</span><span style="color:#000000;">CREATE</span><span style="color:#000000;">语句创建数据库</span><span style="color:#000000;">，</span><span style="color:#000000;">通过执行</span><span style="color:#000000;">IN</span><span style="color:#000000;">SERT </span><span style="color:#000000;">IN</span><span style="color:#000000;">TO</span><span style="color:#000000;">语句插入所备份的表中数据。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">通过超级用户</span><span style="color:#000000;">root</span><span style="color:#000000;">登录到</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">服务器，然后利用上面章节所生成的各种备份文件还原</span><span style="color:#000000;">MySQL</span><span style="color:#000000;">数据库服务器。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【实例</span><span style="color:#000000;">17</span><span style="color:#000000;">-</span><span style="color:#000000;">3</span><span style="color:#000000;">】利用备份文件还原数据库下的表，即通过备份文件</span><span style="color:#000000;">t_dept_back.sql</span><span style="color:#000000;">还原数据库</span> <span style="color:#000000;">company</span><span style="color:#000000;">下的表</span><span style="color:#000000;">t_dept,</span><span style="color:#000000;">具体步骤如下：</span></p> 
<ol><li style="text-align:left;"><span style="color:#000000;">执行命令</span><span style="color:#000000;">mysql，删除company</span><span style="color:#000000;">中的表</span><span style="color:#000000;">t_dept，</span><span style="color:#000000;">具体命令内容如下图</span><span style="color:#000000;">：</span></li></ol> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="1118" src="https://images2.imgbox.com/fe/8b/qwQXnlyq_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">（2）</span><span style="color:#000000;">执行命令</span><span style="color:#000000;">mysql，还原company</span><span style="color:#000000;">中的表</span><span style="color:#000000;">t_dept，</span><span style="color:#000000;">具体命令内容如下</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">mysql -u root </span><span style="color:#000000;">-p</span> <span style="color:#000000;">company</span><span style="color:#000000;"> &lt;</span><span style="color:#000000;">D</span><span style="color:#000000;">:\</span><span style="color:#000000;">t_dept_back.sql</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【代码说明】在上述语句中</span><span style="color:#000000;">，</span><span style="color:#000000;">通过用户</span><span style="color:#000000;">root</span><span style="color:#000000;">利用</span><span style="color:#000000;">D</span><span style="color:#000000;">磁盘下的文件</span><span style="color:#000000;">t_dept_back.sql,</span><span style="color:#000000;">对数据库</span><span style="color:#000000;">company</span><span style="color:#000000;">里的表</span><span style="color:#000000;">t_dept</span><span style="color:#000000;">进行还原。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">【运行效果】执行上面的命令语句，其结果如图所示。</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><img alt="" height="483" src="https://images2.imgbox.com/40/a9/GWwHzeI0_o.png" width="1200"></p> 
<p> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;">  <span style="color:#000000;">（3）</span><span style="color:#000000;">为了校验还原操作是否成功，执行下面语句查看表</span><span style="color:#000000;">t_dept</span><span style="color:#000000;">的数据内容，具体</span><span style="color:#000000;">SQL</span><span style="color:#000000;">语句如下</span><span style="color:#000000;">:</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="color:#000000;">Show</span> <span style="color:#000000;">tables；</span></p> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/4b/ba/Z1aEgTkP_o.png" width="1200"> </p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p> 
<p style="margin-left:.0001pt;text-align:left;"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7cbe0dcb881aefba6fa9e253b7a7015d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">计算机网络实验-eNSP路由器配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d884fbc7074e5561d54c5644f8a7d65a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机网络「五」 运输层</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>