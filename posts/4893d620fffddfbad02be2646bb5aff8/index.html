<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>API设计规范 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="API设计规范" />
<meta property="og:description" content="目录 一、 什么是RESTful二、 版本控制三、方法命名规范四、URL命名规则五、请求方式六、请求参数六、响应体七、注释八、瘦客户端九、 禁止行为 一、 什么是RESTful 一种软件架构风格、设计风格，而不是标准，只是提供了一组设计原则和约束条件。它主要用于客户端和服务器交互类的软件。基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。
URL定位资源，用HTTP动词（GET,POST,DELETE,DETC）描述操作
看Url就知道要什么
看http method就知道干什么
看http status code就知道结果如何
二、 版本控制 第一种形式：api版本号放在url路径中。
https://api.example.com/v{n}
应该将API的版本号放入URL。采用多版本并存，增量发布的方式。n代表版本号，分为整型和浮点型 整型： 大功能版本， 如v1、v2、v3 …浮点型： 补充功能版本， 如v1.1、v1.2、v2.1、v2.2 … 第二种形式：api版本号放在url参数中
https://api.example.com/user/1?version=v1&amp;…
第三种形式：api版本号放在请求的header中
-H “API-VERSION: v1”
-H “API-VERSION: v2”
第四种形式：api版本号放在二级域名中
不同版本使用不同的域名
v1.api.xxx.com
v2.api.xxx.com
个人比较倾向于第一种(xxx.com/v1/、xxx.com/v2/)：在开始设计的时候，查询类的接口,应尽可能使用被动式提供数据的无状态接口，格式应竟可能使用对象(不使用二维的集合)，这样的接口对于扩展字段非常的方便，也很容易做到向下兼容.操作类的接口，尽可能地将资源分离，比如修改用户信息，跟修改用户头像信息或者修改用户职位信息，这样的接口，尽可能使用独立的资源
三、方法命名规范 动作前缀备注获取getget{XXX}List新增addadd{XXX}修改updateupdate{XXX}保存savesave{XXX}删除deletedelete{XXX}上传uploadupload{XXX}发送sendsend{XXX} 四、URL命名规则 REST API使用统一资源标识符（URI）来寻址资源
URI结尾不应包含（/）
正斜杠分隔符（/）必须用来指示层级关系
应使用连字符（ - ）来提高URI的可读性
不得在URI中使用下划线（_）
URI路径中全都使用小写字母
URL中不能有动词
在Restful架构中，每个网址代表的是一种资源，所以网址中不能有动词，只能有名词（特殊情况可以使用动词），动词由HTTP的 get、post、put、delete 四种方法来表示，而且所用的名词往往与数据库的表格名对应。
URI中不要包含文件(脚本)的扩展名
URL路径名词均为复数
例子
https://api.example.com/v1/order/products
https://api.example.com/v1/user/users
https://api.example.com/v1/employees
五、请求方式 请求方式描述GET（SELECT）获取数据（查询）POST（CREATE）新增数据（创建单个资源）PUT（UPDATE）更新数据（更新单个资源（全量））DELETE（DELETE）删除数据PATCH（UPDATE）部分更新（一般不用）HEAD获取资源的元数据OPTIONS获取信息，关于资源的哪些属性是客户端可以改变的 例子：
GET /v1/products 获取所有商品" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4893d620fffddfbad02be2646bb5aff8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-09-06T00:01:45+08:00" />
<meta property="article:modified_time" content="2020-09-06T00:01:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">API设计规范</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>目录</h4> 
 <ul><li><ul><li><ul><li><a href="#__RESTful_8" rel="nofollow">一、 什么是RESTful</a></li><li><a href="#___16" rel="nofollow">二、 版本控制</a></li><li><a href="#_36" rel="nofollow">三、方法命名规范</a></li><li><a href="#URL_46" rel="nofollow">四、URL命名规则</a></li><li><a href="#_63" rel="nofollow">五、请求方式</a></li><li><a href="#_94" rel="nofollow">六、请求参数</a></li><li><a href="#_108" rel="nofollow">六、响应体</a></li><li><a href="#_114" rel="nofollow">七、注释</a></li><li><a href="#_121" rel="nofollow">八、瘦客户端</a></li><li><a href="#__127" rel="nofollow">九、 禁止行为</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr color="#000000" size='1"'> 
<h4><a id="__RESTful_8"></a>一、 什么是RESTful</h4> 
<ul><li> <p>一种软件架构风格、设计风格，而不是标准，只是提供了一组设计原则和约束条件。它主要用于客户端和服务器交互类的软件。基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。</p> </li><li> <p>URL定位资源，用HTTP动词（GET,POST,DELETE,DETC）描述操作</p> </li><li> <p>看Url就知道要什么<br> 看http method就知道干什么<br> 看http status code就知道结果如何</p> </li></ul> 
<h4><a id="___16"></a>二、 版本控制</h4> 
<ul><li> <p>第一种形式：api版本号放在url路径中。<br> https://api.example.com/v{n}</p> 
  <ul><li>应该将API的版本号放入URL。</li><li>采用多版本并存，增量发布的方式。</li><li>n代表版本号，分为整型和浮点型</li></ul> 
  <ul><li>整型： 大功能版本， 如v1、v2、v3 …</li><li>浮点型： 补充功能版本， 如v1.1、v1.2、v2.1、v2.2 …</li></ul> </li><li> <p>第二种形式：api版本号放在url参数中<br> https://api.example.com/user/1?version=v1&amp;…</p> </li><li> <p>第三种形式：api版本号放在请求的header中<br> -H “API-VERSION: v1”<br> -H “API-VERSION: v2”</p> </li><li> <p>第四种形式：api版本号放在二级域名中<br> 不同版本使用不同的域名<br> v1.api.xxx.com<br> v2.api.xxx.com</p> </li><li> <p>个人比较倾向于第一种(xxx.com/v1/、xxx.com/v2/)：在开始设计的时候，查询类的接口,应尽可能使用被动式提供数据的无状态接口，格式应竟可能使用对象(不使用二维的集合)，这样的接口对于扩展字段非常的方便，也很容易做到向下兼容.操作类的接口，尽可能地将资源分离，比如修改用户信息，跟修改用户头像信息或者修改用户职位信息，这样的接口，尽可能使用独立的资源</p> </li></ul> 
<h4><a id="_36"></a>三、方法命名规范</h4> 
<table><thead><tr><th>动作</th><th>前缀</th><th>备注</th></tr></thead><tbody><tr><td>获取</td><td>get</td><td>get{XXX}List</td></tr><tr><td>新增</td><td>add</td><td>add{XXX}</td></tr><tr><td>修改</td><td>update</td><td>update{XXX}</td></tr><tr><td>保存</td><td>save</td><td>save{XXX}</td></tr><tr><td>删除</td><td>delete</td><td>delete{XXX}</td></tr><tr><td>上传</td><td>upload</td><td>upload{XXX}</td></tr><tr><td>发送</td><td>send</td><td>send{XXX}</td></tr></tbody></table> 
<h4><a id="URL_46"></a>四、URL命名规则</h4> 
<ul><li> <p>REST API使用统一资源标识符（URI）来寻址资源</p> </li><li> <p>URI结尾不应包含（/）</p> </li><li> <p>正斜杠分隔符（/）必须用来指示层级关系</p> </li><li> <p>应使用连字符（ - ）来提高URI的可读性</p> </li><li> <p>不得在URI中使用下划线（_）</p> </li><li> <p>URI路径中全都使用小写字母</p> </li><li> <p>URL中不能有动词<br> 在Restful架构中，每个网址代表的是一种资源，所以网址中不能有动词，只能有名词（特殊情况可以使用动词），动词由HTTP的 get、post、put、delete 四种方法来表示，而且所用的名词往往与数据库的表格名对应。</p> </li><li> <p>URI中不要包含文件(脚本)的扩展名</p> </li><li> <p>URL路径名词均为复数</p> </li><li> <p>例子<br> https://api.example.com/v1/order/products<br> https://api.example.com/v1/user/users<br> https://api.example.com/v1/employees</p> </li></ul> 
<h4><a id="_63"></a>五、请求方式</h4> 
<table><thead><tr><th>请求方式</th><th>描述</th></tr></thead><tbody><tr><td>GET（SELECT）</td><td>获取数据（查询）</td></tr><tr><td>POST（CREATE）</td><td>新增数据（创建单个资源）</td></tr><tr><td>PUT（UPDATE）</td><td>更新数据（更新单个资源（全量））</td></tr><tr><td>DELETE（DELETE）</td><td>删除数据</td></tr><tr><td>PATCH（UPDATE）</td><td>部分更新（一般不用）</td></tr><tr><td>HEAD</td><td>获取资源的元数据</td></tr><tr><td>OPTIONS</td><td>获取信息，关于资源的哪些属性是客户端可以改变的</td></tr></tbody></table> 
<ul><li> <p>例子：<br> GET /v1/products 获取所有商品<br> GET /v1/products/ID 获取某个指定商品的信息<br> POST /v1/products 新建一个商品<br> PUT /v1/products/ID 更新某个指定商品的信息<br> DELETE /v1/products/ID 删除某个商品<br> GET /v1/products/ID/purchases 列出某个指定商品的所有投资者<br> GET /v1/products/ID/purchases/ID 获取某个指定商品的指定投资者信息<br> 安全性和幂等性</p> </li><li> <p>安全性：不会改变资源状态，可以理解为只读的；</p> </li><li> <p>幂等性：执行1次和执行N次，对资源状态改变的效果是等价的。</p> </li></ul> 
<table><thead><tr><th>请求方式</th><th>安全性</th><th>幂等性</th></tr></thead><tbody><tr><td>GET</td><td>√</td><td>√</td></tr><tr><td>POST</td><td>×</td><td>×</td></tr><tr><td>PUT</td><td>×</td><td>√</td></tr><tr><td>DELETE</td><td>×</td><td>√</td></tr></tbody></table> 
<p>安全性和幂等性均不保证反复请求能拿到相同的response。以 DELETE 为例，第一次DELETE返回200表示删除成功，第二次返回404提示资源不存在，这是允许的。</p> 
<h4><a id="_94"></a>六、请求参数</h4> 
<ul><li>参数命名规范：驼峰命名，首字母小写</li><li>禁用map传参：不直观，让维护增加成本</li><li>禁用实体作为请求体：不可直接暴露实体</li><li>数据需做校验：根据id删除数据，根据id查询等等</li><li>Query<br> url?后面的参数，存放请求接口的参数数据，尽量带参数名。</li><li>Header<br> 请求头，存放公共参数、requestId、token、加密字段等。</li><li>Body<br> Body 体，存放请求接口的参数数据，后端必须做数据验证。</li><li>安全规范<br> 敏感参数加密处理<br> 登录密码、支付密码，需加密后传输，建议使用 非对称加密。</li></ul> 
<h4><a id="_108"></a>六、响应体</h4> 
<ul><li>参数命名规范：驼峰命名，首字母小写</li><li>禁用map作为响应体：不直观，让维护增加成本</li><li>禁用实体作为响应体：不可直接暴露实体</li><li>禁用返回大量无用参数：增加传输资源、增加数据暴露风险</li><li>统一的返回格式</li></ul> 
<h4><a id="_114"></a>七、注释</h4> 
<ul><li>需注释接口用途<br> <img src="https://images2.imgbox.com/ad/c0/rLv3MHIh_o.png" alt="在这里插入图片描述"></li><li>所有请求参数和返回参数都需要注释</li><li>参数用注解的方式校验，@Validated 和 @Valid<br> <img src="https://images2.imgbox.com/46/47/XV4ISUpf_o.png" alt=""></li></ul> 
<h4><a id="_121"></a>八、瘦客户端</h4> 
<ul><li>客户端任何的修改都是需要发版的，发版需要审核流程。<br> 客户端尽量只负责展示逻辑，不处理业务逻辑<br> 客户端不处理金额的计算<br> 客户端少处理请求参数的校验与约束提示</li></ul> 
<h4><a id="__127"></a>九、 禁止行为</h4> 
<ul><li>禁止在当前项目声明其他数据库对应的实体<br> 例如：@Table(name = “yc_insur.bx_insur_account”)</li><li>禁止在sql语句中使用其他数据库的表结构</li><li>禁止使用Map、或者Object作为参数类型</li><li>禁止拼音作为参数，如：骗车率：pcl</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/63033bbc7c8e23c629ea4ea831d775de/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C语言32个关键字-最详解释</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cc1e92651eef5665dfc159afc74cedd7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Tensorflow 报错 /lib64/libm.so.6: version `GLIBC_2.23‘ not found 无root权限解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>