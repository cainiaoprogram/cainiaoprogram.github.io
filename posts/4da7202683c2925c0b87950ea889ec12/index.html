<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算机网络——第三章 数据链路层（详细附图） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="计算机网络——第三章 数据链路层（详细附图）" />
<meta property="og:description" content="第三章 数据链路层 3.1 数据链路层概述3.1.1 本章问题封装成帧差错检测可靠传输广播信道的数据链路层网桥和交换机的工作原理 3.2 封装成帧封装成帧透明传输面向字节的物理链路面向比特的物理链路 3.3 差错检测奇偶校验循环冗余校验CRC总结 3.4 可靠传输基本概念实现机制停止—等待协议SW回退N帧协议GBN选择重传协议SR 3.5 点对点协议PPP 3.1 数据链路层概述 在研究数据链路层时，我们可以只考虑数据链路层（不考虑网络体系结构的其他各层），换句话说，我们可以想象数据包只在数据链路层从左向右沿水平方向传送。所以主机H1到主机H2的通信，可以看成是在4段不同的链路上的通信组成的。
3.1.1 本章问题 需要注意的是，下面三个问题指的是点对点信道的数据链路层。
封装成帧 如图所示，两台主机通过一段链路互连。两台主机都会对所发送或接收的数据包进行五个层次的封装或解封。 发送方将待发送的数据通过应用层封装成为应用层协议数据单元，然后交付给运输层。
运输层为其添加运输层协议首部，使之成为运输层协议数据单元，然后交付给网络层。
网络层为其添加网络层协议首部，使之成为网络层协议数据单元，然后交付给数据链路层。
数据链路层给网络层协议数据单元添加一个数据链路层协议首部，简称为帧头，还要给其添加一个帧尾。我们将数据链路层给网络层交付的协议数据单元添加帧头和帧尾的操作，称为封装成帧。
添加帧头和帧尾的目的都是为了在链路上以帧为单元来传送数据，也就是为了实现数据链路层本身的功能。 如下例子：
差错检测 发送方将封装好的帧通过物理层发送到传输媒体，帧在传输过程中遭遇干扰后可能会出现误码（比如：比特0变为比特1）。
接收方通过检错码发现误码： 发送方在发送帧之前，基于待发送的数据和检错算法计算出检错码，并将其封装在帧尾。接收方主机接收到帧后，通过检错码和检错算法就可以判断出帧在传输过程中是否出现了误码。
例如，以太网版本2的MAC帧的帧尾，就是4字节的帧验序列FCS字段，要写入该字段的内容就是检错码。
可靠传输 接收方主机收到有误码的帧后，是不会接受该帧的，将其丢弃。 如果数据链路层向其上层提供的是不可靠服务，那么丢弃就丢弃了，不会采取其他措施。如果数据链路层向上层提供的是可靠服务，那么就还需要其他措施，来确保接收方主机还可以重新收到被丢弃的这个帧的正确副本。 尽管误码是不能完全避免的，但若能实现发送方发送什么，接收方就能收到什么，就称为可靠传输。 广播信道的数据链路层 对于广播信道的数据链路层（共享式局域网）除了包含这三个问题外，还有一些需要解决的问题。例如对下面的例子，问题如何解决？ 主机怎么知道那些帧是发给自己的，即总线上的数据是否接收。——编址解决：将帧的目的地址添加到帧中一起传输。
当总线上多台主机同时使用总线来传输帧时，传输信号就会产生碰撞，这是采用广播信道的共享式局域网不可避免的。——以太网的解决方法是使用一种特殊的协议CSMA/CD（载波监听多点接入/碰撞检测）。
网桥和交换机的工作原理 随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的、使用点对点链路和链路层交换机的交换式局域网在有线（局域网）领域已完全取代了共享式局域网。但是，网络中的交换机是如何转发帧的呢？
注意： 无线局域网任然使用的是共享信道技术。例如，802.11局域网采用的媒体接入控制协议是CSMA/CA（载波监听多点接入/碰撞避免）。
3.2 封装成帧 封装成帧 封装成帧是指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧。 帧头和帧尾中包含有重要的控制信息
帧头和帧尾的作用之一就是帧定界。
例如，PPP帧的帧头和帧尾中各包含有一个长度为1字节的标志字段，其作用就是帧定界。假设下面发送的是PPP帧，比特流中的红色部分是帧定界标志。那么接收方的数据链路层就可以依据帧定界标志从物理层交付的比特流中提取出一个个的帧。
需要说明的是，并不是每一种数据链路层协议的帧都包含有帧定界标志，以太网版本2的MAC帧就没有。这是需要物理层在帧前加前导码，再将比特流转化成电信号进行发送，前导码中的前七个字节为前同步码，作用是使接收方的时钟同步。之后的一字节为帧开始定界符。且以太网还规定了帧间间隔时间为96比特的发送时间，所以MAC帧并不需要帧结束定界符。
2. 为了提高帧的传输效率，应当使帧的数据部分的长度尽可能大些。
3. 考虑到差错控制等多种因素，每一种数据链路层协议都规定了帧地数据部分的长度上限，即最大传送单元MTU。
透明传输 透明传输是指数据链路层对上层交付的传输数据没有任何限制，就好像数据链路层不存在一样。
如果上层交付的数据单元中包含了帧定界符（特定数值），接收方就不能正确接收该帧。
如果数据链路层不采取其他措施，来避免接收方对帧是否结束的误判，就不能称为透明传输。也就是说，数据链路层对上层交付的协议数据单元优限制，其内容不能包含帧定界符。 面向字节的物理链路 解决方法：使用 字节填充（或称字符填充） 的方法来实现透明传输。在发送帧之前，对帧的数据部分进行扫描，每出现一个帧定界符，就在其前面插入一个转义字符。接收方在接收到转义字符时，剔除转义字符后将其后面的内容作为数据继续提取。
注意： 转义字符是一种特殊的控制字符，其长度为一个字节，十进制值为27。 面向比特的物理链路 解决方法：使用比特填充的方法实现透明传输在发送前，可以采用零比特填充法，对数据部分进行扫描。每五个连续的比特1后面就插入1个比特0，这样就确保了帧定界在整个帧中的唯一性，从而实现透明传输。
3.3 差错检测 奇偶校验 奇偶校验的漏检率很高，因此计算机网络的数据链路层一般不会采用这种检测方法。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4da7202683c2925c0b87950ea889ec12/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-20T22:03:06+08:00" />
<meta property="article:modified_time" content="2022-01-20T22:03:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机网络——第三章 数据链路层（详细附图）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>第三章 数据链路层</h4> 
 <ul><li><a href="#31__1" rel="nofollow">3.1 数据链路层概述</a></li><li><ul><li><a href="#311__4" rel="nofollow">3.1.1 本章问题</a></li><li><ul><li><a href="#_8" rel="nofollow">封装成帧</a></li><li><a href="#_18" rel="nofollow">差错检测</a></li><li><a href="#_28" rel="nofollow">可靠传输</a></li><li><a href="#_35" rel="nofollow">广播信道的数据链路层</a></li><li><a href="#_42" rel="nofollow">网桥和交换机的工作原理</a></li></ul> 
  </li></ul> 
  </li><li><a href="#32__47" rel="nofollow">3.2 封装成帧</a></li><li><ul><li><a href="#_48" rel="nofollow">封装成帧</a></li><li><a href="#_63" rel="nofollow">透明传输</a></li><li><ul><li><a href="#_69" rel="nofollow">面向字节的物理链路</a></li><li><a href="#_75" rel="nofollow">面向比特的物理链路</a></li></ul> 
  </li></ul> 
  </li><li><a href="#33__79" rel="nofollow">3.3 差错检测</a></li><li><ul><li><a href="#_81" rel="nofollow">奇偶校验</a></li><li><a href="#CRC_84" rel="nofollow">循环冗余校验CRC</a></li><li><a href="#_91" rel="nofollow">总结</a></li></ul> 
  </li><li><a href="#34__93" rel="nofollow">3.4 可靠传输</a></li><li><ul><li><a href="#_94" rel="nofollow">基本概念</a></li><li><a href="#_100" rel="nofollow">实现机制</a></li><li><ul><li><a href="#SW_102" rel="nofollow">停止—等待协议SW</a></li><li><a href="#NGBN_128" rel="nofollow">回退N帧协议GBN</a></li><li><a href="#SR_146" rel="nofollow">选择重传协议SR</a></li></ul> 
  </li></ul> 
  </li><li><a href="#35_PPP_155" rel="nofollow">3.5 点对点协议PPP</a></li></ul> 
</div> 
<p></p> 
<h2><a id="31__1"></a>3.1 数据链路层概述</h2> 
<ol><li>在研究数据链路层时，我们可以只考虑数据链路层（不考虑网络体系结构的其他各层），换句话说，我们可以想象数据包只在数据链路层<strong>从左向右沿水平方向</strong>传送。所以主机H1到主机H2的通信，可以看成是在4段不同的链路上的通信组成的。<br> <img src="https://images2.imgbox.com/8e/9e/gKWe5wsi_o.png" alt="在这里插入图片描述"></li></ol> 
<h3><a id="311__4"></a>3.1.1 本章问题</h3> 
<p>需要注意的是，下面三个问题指的是<strong>点对点信道</strong>的数据链路层。<br> <img src="https://images2.imgbox.com/f1/84/3m2mayfC_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_8"></a>封装成帧</h4> 
<ol><li>如图所示，两台主机通过一段链路互连。两台主机都会对所发送或接收的数据包进行五个层次的<strong>封装</strong>或<strong>解封</strong>。</li></ol> 
<ul><li> <p>发送方将待发送的数据通过应用层封装成为应用层协议数据单元，然后交付给运输层。</p> </li><li> <p>运输层为其添加运输层协议首部，使之成为运输层协议数据单元，然后交付给网络层。</p> </li><li> <p>网络层为其添加网络层协议首部，使之成为网络层协议数据单元，然后交付给数据链路层。</p> </li><li> <p>数据链路层给网络层协议数据单元添加一个数据链路层协议首部，简称为帧头，还要给其添加一个帧尾。<strong>我们将数据链路层给网络层交付的协议数据单元添加帧头和帧尾的操作，称为封装成帧。</strong><br> <img src="https://images2.imgbox.com/2f/bd/qOLVLC9E_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>添加帧头和帧尾的目的都是为了在链路上以帧为单元来传送数据，也就是为了实现数据链路层本身的功能。</strong> 如下例子：<br> <img src="https://images2.imgbox.com/ea/34/jFp8XJxJ_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<h4><a id="_18"></a>差错检测</h4> 
<ol><li>发送方将封装好的帧通过物理层发送到传输媒体，帧在传输过程中遭遇干扰后可能会出现误码（比如：比特0变为比特1）。<br> <img src="https://images2.imgbox.com/68/8a/7pfgUF7v_o.png" alt="在这里插入图片描述"></li><li>接收方通过<strong>检错码</strong>发现误码：</li></ol> 
<ul><li>发送方在发送帧之前，基于待发送的数据和检错算法计算出检错码，并将其封装在帧尾。</li><li>接收方主机接收到帧后，通过检错码和检错算法就可以判断出帧在传输过程中是否出现了误码。<br> <img src="https://images2.imgbox.com/5d/34/QK8nMsqr_o.png" alt="在这里插入图片描述"><br> 例如，以太网版本2的MAC帧的帧尾，就是4字节的帧验序列FCS字段，要写入该字段的内容就是检错码。<br> <img src="https://images2.imgbox.com/62/84/UHgnHtnE_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="_28"></a>可靠传输</h4> 
<ol><li>接收方主机收到有误码的帧后，是不会接受该帧的，将其丢弃。</li></ol> 
<ul><li>如果数据链路层向其上层提供的是<strong>不可靠服务</strong>，那么丢弃就丢弃了，不会采取其他措施。</li><li>如果数据链路层向上层提供的是<strong>可靠服务</strong>，那么就还需要其他措施，来确保接收方主机还可以重新收到被丢弃的这个帧的正确副本。</li></ul> 
<ol start="2"><li><strong>尽管误码是不能完全避免的，但若能实现发送方发送什么，接收方就能收到什么，就称为可靠传输。</strong></li></ol> 
<h4><a id="_35"></a>广播信道的数据链路层</h4> 
<ol><li>对于广播信道的数据链路层（<strong>共享式局域网</strong>）除了包含这三个问题外，还有一些需要解决的问题。例如对下面的例子，问题如何解决？</li></ol> 
<ul><li>主机怎么知道那些帧是发给自己的，即总线上的数据是否接收。——<strong>编址解决</strong>：<strong>将帧的目的地址添加到帧中一起传输。</strong><br> <img src="https://images2.imgbox.com/45/97/VKlc1GsS_o.png" alt="在这里插入图片描述"></li><li>当总线上多台主机同时使用总线来传输帧时，传输信号就会产生碰撞，这是采用广播信道的共享式局域网不可避免的。——<strong>以太网的解决方法是使用一种特殊的协议CSMA/CD（载波监听多点接入/碰撞检测）。</strong><br> <img src="https://images2.imgbox.com/d5/99/yqWBn2Cb_o.png" alt="在这里插入图片描述"></li></ul> 
<h4><a id="_42"></a>网桥和交换机的工作原理</h4> 
<p>随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的、使用点对点链路和链路层交换机的<strong>交换式局域网</strong>在有线（局域网）领域已完全取代了共享式局域网。但是，网络中的交换机是如何转发帧的呢？<br> <img src="https://images2.imgbox.com/ac/b0/QGA3xzh7_o.png" alt="在这里插入图片描述"><br> <strong>注意：</strong> 无线局域网任然使用的是共享信道技术。例如，802.11局域网采用的媒体接入控制协议是CSMA/CA（载波监听多点接入/碰撞避免）。</p> 
<h2><a id="32__47"></a>3.2 封装成帧</h2> 
<h3><a id="_48"></a>封装成帧</h3> 
<ol><li><strong>封装成帧是指数据链路层给上层交付的协议数据单元添加帧头和帧尾使之成为帧。</strong></li></ol> 
<ul><li> <p>帧头和帧尾中包含有重要的控制信息</p> </li><li> <p><strong>帧头和帧尾的作用之一就是帧定界</strong>。</p> </li><li> <p>例如，PPP帧的帧头和帧尾中各包含有一个长度为1字节的标志字段，其作用就是帧定界。假设下面发送的是PPP帧，比特流中的红色部分是帧定界标志。那么接收方的数据链路层就可以依据帧定界标志从物理层交付的比特流中提取出一个个的帧。<br> <img src="https://images2.imgbox.com/68/9c/ifUn5H89_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/39/01/K7LlCoSY_o.png" alt="在这里插入图片描述"></p> </li><li> <p>需要说明的是，<strong>并不是每一种数据链路层协议的帧都包含有帧定界标志</strong>，以太网版本2的MAC帧就没有。这是需要物理层在帧前加前导码，再将比特流转化成电信号进行发送，前导码中的前七个字节为前同步码，作用是使接收方的时钟同步。之后的一字节为帧开始定界符。且以太网还规定了帧间间隔时间为96比特的发送时间，所以MAC帧并不需要帧结束定界符。<br> <img src="https://images2.imgbox.com/30/d9/TDIYUuKr_o.png" alt="在这里插入图片描述"></p> </li></ul> 
<p><img src="https://images2.imgbox.com/79/c8/3Qr2WK9p_o.png" alt="在这里插入图片描述"><br> 2. 为了提高帧的传输效率，应当使<strong>帧的数据部分的长度尽可能大些</strong>。<br> 3. 考虑到差错控制等多种因素，每一种数据链路层协议都规定了帧地数据部分的长度上限，即<strong>最大传送单元MTU</strong>。</p> 
<h3><a id="_63"></a>透明传输</h3> 
<p><strong>透明传输是指数据链路层对上层交付的传输数据没有任何限制，就好像数据链路层不存在一样。</strong></p> 
<ul><li>如果上层交付的数据单元中包含了帧定界符（特定数值），接收方就不能正确接收该帧。<br> <img src="https://images2.imgbox.com/ef/2e/AGw0145D_o.png" alt="在这里插入图片描述"></li><li>如果数据链路层不采取其他措施，来避免接收方对帧是否结束的误判，就不能称为透明传输。也就是说，数据链路层对上层交付的协议数据单元优限制，其内容不能包含帧定界符。</li></ul> 
<h4><a id="_69"></a>面向字节的物理链路</h4> 
<ul><li><strong>解决方法</strong>：使用 <strong>字节填充（或称字符填充）</strong> 的方法来实现透明传输。</li><li>在发送帧之前，对帧的数据部分进行扫描，每出现一个帧定界符，就在其前面插入一个<strong>转义字符</strong>。接收方在接收到转义字符时，剔除转义字符后将其后面的内容作为数据继续提取。<br> <img src="https://images2.imgbox.com/5d/70/Wy3lRRFd_o.png" alt="在这里插入图片描述"><br> <strong>注意：</strong> 转义字符是一种特殊的控制字符，其长度为一个字节，十进制值为27。</li></ul> 
<h4><a id="_75"></a>面向比特的物理链路</h4> 
<ul><li><strong>解决方法</strong>：使用<strong>比特填充</strong>的方法实现透明传输</li><li>在发送前，可以采用零比特填充法，对数据部分进行扫描。每五个连续的比特1后面就插入1个比特0，这样就确保了帧定界在整个帧中的唯一性，从而实现透明传输。<br> <img src="https://images2.imgbox.com/0a/05/h6S760gH_o.png" alt="在这里插入图片描述"></li></ul> 
<h2><a id="33__79"></a>3.3 差错检测</h2> 
<p><img src="https://images2.imgbox.com/92/c5/I14I76OO_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_81"></a>奇偶校验</h3> 
<p>奇偶校验的漏检率很高，因此计算机网络的数据链路层一般不会采用这种检测方法。<br> <img src="https://images2.imgbox.com/04/dd/hXJ2rhjo_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="CRC_84"></a>循环冗余校验CRC</h3> 
<p><img src="https://images2.imgbox.com/a9/3d/wZ9qzw1x_o.png" alt="在这里插入图片描述"><br> <strong>CRC</strong>算法要求生成多项式必须包含<strong>最低次项</strong><br> <img src="https://images2.imgbox.com/b4/6a/6QD7SB1f_o.png" alt="在这里插入图片描述"><br> <strong>这里的除法是异或操作</strong><br> <img src="https://images2.imgbox.com/a5/67/ELsi13pf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4c/26/IlzOFM0f_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_91"></a>总结</h3> 
<p><img src="https://images2.imgbox.com/be/b8/v7hhmcAk_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="34__93"></a>3.4 可靠传输</h2> 
<h3><a id="_94"></a>基本概念</h3> 
<ol><li><strong>数据链路层向上层提供的服务类型</strong></li></ol> 
<ul><li><strong>不可靠传输服务</strong>：仅仅<strong>丢弃有误码的帧</strong>，其他什么也不做</li><li><strong>可靠传输服务</strong>：想办法<strong>实现发送端发送什么，接收端就接收什么</strong>。例如，接收方可以给发送方发送一个通知帧，告诉它之前发送的帧产生了误码，请重发。发送方接收后，重发之前产生了误码的那个帧即可。<br> <img src="https://images2.imgbox.com/d0/69/qlAO2YHf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5f/d6/N7mhvHHP_o.png" alt="在这里插入图片描述"></li></ul> 
<h3><a id="_100"></a>实现机制</h3> 
<p><code>注意</code>：这三种可靠传输实现机制的基本原理并<strong>不仅限于数据链路层，可以应用到计算机网络体系结构的各层协议中</strong>。</p> 
<h4><a id="SW_102"></a>停止—等待协议SW</h4> 
<p>又可以称为<code>自动请求重传ARQ</code></p> 
<ol><li>如图所示，收发双方基于互联网进行通信，而不是局限在一条点对点的数据链路，纵坐标为时间。发送方给接收方发送数据分组，接收方收到后对其进行差错检测。</li></ol> 
<ul><li><code>若没有误码</code>，则<strong>接收方</strong>接收该数据分组，并给发送方发送<strong>确认分组</strong>，简称为<code>ACK</code>。发送方收到确认分组后才能发送下一个分组。</li><li><code>若存在误码</code>，则<strong>接收方</strong>丢弃该数据分组，并给发送方发送<strong>否认分组</strong>，简称为<code>NAK</code>。发送方接受到否认分组后，就知道所发送的数据出现了差错而被丢弃了，就会立刻<strong>重传</strong>该数据分组。</li></ul> 
<ol start="2"><li>因此，发送方每发送完一个数据分组后，并不能立刻将该数据分组从缓存中删除，只有在收到针对该数据分组的确认分组后，才能将其从缓存中删除。</li><li><strong>发送方每发送完一个数据分组后，就停止发送下一个数据分组，等待来自接收方的确认分组或否认分组</strong>。<br> <img src="https://images2.imgbox.com/f8/0b/O8xmJYGW_o.png" alt="在这里插入图片描述"></li><li><strong>超时重发</strong><br> <img src="https://images2.imgbox.com/11/4b/9fy3XIWY_o.png" alt="在这里插入图片描述"></li><li><strong>确认丢失</strong><br> 发送方发送一个数据分组，接收方正确接收该数据分组后给发送方发送确认分组，但该确认分组在传输过程中丢失了，这必然会造成发送方对之前发送数据分组的超时重传，假设这个重传的数据分组也正确到底了接收方，那么接收方如何判断该数据分组是否是一个重复的数据分组呢？<br> <img src="https://images2.imgbox.com/89/a2/gA0UP1gS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2d/34/wYwfdhTJ_o.png" alt="在这里插入图片描述"></li><li><strong>确认迟到</strong><br> 发送方发送0号数据分组，接收方正确接收后给发送方发送确认分组，由于某些原因，该确认分组迟到了。这必然会导致发送方对0号数据分组的超时重传。在重传的0号数据分组的传输过程中，发送方收到了迟到的确认分组，于是发送1号数据分组。接收方收到重传的0号数据分组后丢弃，并针对该数据分组给发送方发送确认分组，那发送方可能会误认为是对1号数据分组的确认，所以需要<strong>对确认分组进行编号</strong>。<br> <img src="https://images2.imgbox.com/2d/e4/SqGtm5gg_o.png" alt="在这里插入图片描述"><br> <strong>注意</strong>：对于数据链路层的点对点信道，往返时间比较固定，不会出现确认迟到的情况。<strong>如果只在数据链路层实现停止-等待协议，可以不用给确认分组编号。</strong></li><li><strong>小结</strong><br> <img src="https://images2.imgbox.com/8c/3b/Z4AJ8dHH_o.png" alt="在这里插入图片描述"></li><li><strong>信道利用率</strong><br> 当RTT远大于TD时，信道利用率会非常低。<br> <img src="https://images2.imgbox.com/28/1a/vfiU6aFM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a3/a5/5TYl21i1_o.png" alt="在这里插入图片描述"></li></ol> 
<h4><a id="NGBN_128"></a>回退N帧协议GBN</h4> 
<ol><li> <p>如图所示，序号落在发送窗口内的这5个数据分组<strong>可以连续发送</strong>，而序号落在发送窗口外的数据分组不允许发送。<strong>接收窗口</strong>的尺寸记为<code>WR</code>，<strong>对于回退N帧协议，其取值只能为1</strong>。序号落在接收窗口内的这个数据分组允许接收，而序号落在接收窗口外的数据分组不允许接收。<br> <img src="https://images2.imgbox.com/a4/06/4Tjy8zGc_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>无差错情况</strong>：发送方将序号落在发送窗口内的0~4号数据分组，依次连续发送出去。经过互联网的传输，正确到达了接收方（没有乱序和误码）。<strong>接收方按序接收它们，每接收一个，接收窗口就向前滑动一个位置</strong>。并给发送方发送针对所接收分组的确认分组。发送方每接收一个，发送窗口就向前滑动一个位置，这样就有新的序号落入发送窗口。<strong>发送方可以将收到确认的数据分组从缓存中删除了，而接收方可以择机将已接收的数据分组交付上层处理</strong>。<br> <img src="https://images2.imgbox.com/59/6a/eAN52XSh_o.png" alt="在这里插入图片描述"></p> </li><li> <p><strong>累积确认</strong>：使用回退N帧协议的接收方，可以采用累积确认的方式。<strong>接收方不一定要对收到的数据分组逐个发送确认</strong>，<strong>而是可以在接收到几个数据分组后，对按序到达的最后一个数据分组发送确认，ACKn表示序号为n及以前的所有数据分组都已正确接收了。</strong></p> </li></ol> 
<ul><li>发送方将序号落在发送窗口内的0~4号数据分组依次连续发送出去，它们经过互联网的传输正确到达了接收方，接收方按序接收它们。当接收完<code>0~1</code>号数据分组后，给发送方发送了一个1累积确认ACK1，当接收完<code>2~4</code>号数据分组后，又给发送方发送了一个累积确认的ACK4。假设ACK1在传输的过程中丢失了，而ACK4正确到达了发送方。<strong>发送方接收ACK4后就知道了，序号为4及之前的分组已被接收方正确接收了</strong>。</li><li><strong>优点</strong>：即使确认分组丢失，发送方也可能不必重传。且减小接收方的开销，减少对网络资源的占用。</li><li><strong>缺点</strong>：不能向发送方及时反映出接收方已经正确接收的数据分组信息。<br> <img src="https://images2.imgbox.com/53/c7/p0vrKB56_o.png" alt="在这里插入图片描述"></li></ul> 
<ol start="4"><li><strong>有差错情况</strong>：发送方将序号落在发送窗口内的这5个数据分组，依次连续发送出去。它们经过互联网的传输到达了接收方。假设它们在传输的过程中受到了干扰，其中5号数据分组出现了误码，接收方通过数据分组中的检错码发现了错误，于是丢弃该数据分组。<strong>而后续到达的这4个数据分组的序号与接收窗口中的序号不匹配，接收方也同样不会接收它们，将它们丢弃</strong>，然后发送上一次的确认分组即ACK4，发送方之前就接收过ACK4，当收到重复的ACK4时，就知道之前发送的数据出现了差错，然后重传。<br> <img src="https://images2.imgbox.com/30/c8/btglm4XF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/af/e6/j1oy5pjX_o.png" alt="在这里插入图片描述"><br> <code>注意</code>：<strong>发送窗口的尺寸不能超过其上线，否则接收方无法分辨新、旧分组</strong>。</li><li><strong>小结</strong><br> <img src="https://images2.imgbox.com/8f/71/75dPPrnT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c3/9c/r6cL5wLj_o.png" alt="在这里插入图片描述"></li></ol> 
<h4><a id="SR_146"></a>选择重传协议SR</h4> 
<p><img src="https://images2.imgbox.com/c0/ee/982mjPx7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fd/a1/n8DI2KpB_o.png" alt="在这里插入图片描述"><br> 发送方将序号落在发送窗口内的4个数据分组依次连续发送出去，它们经过互联网的传输，陆续到达接收方，但其中的2号数据分组丢失了，<strong>只要序号落入接收窗口内且无误码的数据分组，接收方都会接收</strong>。接收方接收0号和1号数据分组，<strong>并发送0号和1号确认分组，接收窗口向前滑动两个位置，这样4和5这两个新的序号落入接收窗口</strong>。接收方接收3号数据分组，并发送3号确认分组，但接收窗口不能向前滑动，因为3号数据分组是未按序到达的数据分组。<br> <img src="https://images2.imgbox.com/2d/ec/alHAFIkz_o.png" alt="在这里插入图片描述"><br> <strong>发送方每按序收到一个确认分组，发送窗口就向前滑动一个位置</strong>，发送方接收0号和1号确认分组，发送窗口向前滑动两个位置，这样4和5这两个新的序号就落入发送窗口。发送方将落入发送窗口的4号和5号数据分组发送出去，发送方现在可以将确认的0号和1号数据分组从发送缓存中删除了。<strong>当发送方针对2号数据分组的重传计时器超时了，发送方重传2号数据分组</strong>。<br> <img src="https://images2.imgbox.com/95/19/ROZ9OYlu_o.png" alt="在这里插入图片描述"><br> <strong>小结</strong>：<br> <img src="https://images2.imgbox.com/79/18/ULoMiPu0_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="35_PPP_155"></a>3.5 点对点协议PPP</h2> 
<ol><li>用户计算机只有获取到<code>ISP</code>所分配的合法<code>IP</code>地址后才能成为因特网上的主机，<strong>用户计算机与ISP进行通信时，所使用的数据链路层协议通常就是PPP协议</strong>。<br> <img src="https://images2.imgbox.com/eb/2a/GYSeAD5z_o.png" alt="在这里插入图片描述"></li></ol> 
<ul><li>PPPoE使得ISP可以通过DSL、电路调制解调器、以太网等宽带接入技术，<strong>以以太网接口的形式为用户提供接入服务</strong>。</li><li>点对点协议PPP也广泛应用于广域网路由器之间的专用线路。<br> <img src="https://images2.imgbox.com/ad/2f/m5GGroSS_o.png" alt="在这里插入图片描述"></li></ul> 
<ol start="2"><li><strong>三部分构成</strong><br> <img src="https://images2.imgbox.com/f8/c8/SuUYmOiT_o.png" alt="在这里插入图片描述"></li><li><strong>帧格式</strong><br> <img src="https://images2.imgbox.com/a6/0d/88sfZP6S_o.png" alt="在这里插入图片描述"></li><li><strong>解决透明传输问题</strong><br> <img src="https://images2.imgbox.com/16/bf/nkK5PtSz_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0e/93/UjvG1nGQ_o.png" alt="在这里插入图片描述"></li></ol> 
<p><img src="https://images2.imgbox.com/91/ec/DTBFa4hi_o.png" alt="在这里插入图片描述"></p> 
<ol start="5"><li><strong>差错检测</strong><br> <img src="https://images2.imgbox.com/d3/fc/PoyutrDc_o.png" alt="在这里插入图片描述"></li><li><strong>工作状态</strong><br> 以拨号接入为例，介绍PPP协议的工作状态。<strong>PPP链路的开始和结束状态都是“静止”状态，这时并不存在物理层的连接</strong>。当检测到调制解调器的载波信号，并建立物理层连接后，PPP就进入链路的“建立”状态，这时链路控制协议LCP开始协商一些配置选项。若协商成功，则进入“鉴别”状态。若协商失败，则退回到“静止”状态。…<br> <img src="https://images2.imgbox.com/11/95/umGajAcW_o.png" alt="在这里插入图片描述"></li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8c9a1e7b200ae6f242a4723fd2b7702b/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac 打开 csv.gz文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/064c99135a03ebdcce771a2ed55a11e4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Navicat连接Oracle</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>