<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>bochs安装linux系统,Ubuntu 10.04安装Bochs 2.4.5笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="bochs安装linux系统,Ubuntu 10.04安装Bochs 2.4.5笔记" />
<meta property="og:description" content="1.到Bochs官方下载源码包，因为用到了调试功能。 Bochs 2.4.5下载地址 http://sourceforge.net/projects/bochs/
2.安装G＋＋编译器
sudo apt-get install g&#43;&#43;
如果不安装Ｇ＋＋编译器， 在执行configure时就会出现一些错误。
3.执行配置，开启调试和反汇编
./configure --enable-debugger --enable-disasm
4.ERROR: X windows gui was selected, but X windows libraries were not found.
出现这个错误时，请安装xorg-dev包
sudo apt-get install xorg-dev
5.Package gtk&#43;-2.0 was not found in the pkg-config search path.Perhaps you should add the directory containing `gtk&#43;-2.0.pc&#39;to the PKG_CONFIG_PATH environment variableNo package &#39;gtk&#43;-2.0&#39; foundERROR: pkg-config was not found, or unable to access the gtk&#43;-2.0 package.Install pkg-config and the gtk&#43; development package,or disable the gui debugger, or the wxWidgets display library (whichever is being used)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f6da92f586ced504c419bb4cb3010bc9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-05-13T02:33:37+08:00" />
<meta property="article:modified_time" content="2021-05-13T02:33:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">bochs安装linux系统,Ubuntu 10.04安装Bochs 2.4.5笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>1.到Bochs官方下载源码包，因为用到了调试功能。 Bochs 2.4.5下载地址 http://sourceforge.net/projects/bochs/</p> 
 <p>2.安装G＋＋编译器</p> 
 <p>sudo apt-get install g++</p> 
 <p>如果不安装Ｇ＋＋编译器， 在执行configure时就会出现一些错误。</p> 
 <p>3.执行配置，开启调试和反汇编</p> 
 <p>./configure --enable-debugger --enable-disasm</p> 
 <p>4.ERROR: X windows gui was selected, but X windows libraries were not found.</p> 
 <p>出现这个错误时，请安装xorg-dev包</p> 
 <p>sudo apt-get install xorg-dev</p> 
 <p>5.Package gtk+-2.0 was not found in the pkg-config search path.Perhaps you should add the directory containing `gtk+-2.0.pc'to the PKG_CONFIG_PATH environment variableNo package 'gtk+-2.0' foundERROR: pkg-config was not found, or unable to access the gtk+-2.0 package.Install pkg-config and the gtk+ development package,or disable the gui debugger, or the wxWidgets display library (whichever is being used).</p> 
 <p>出现这个错误时，请运行：</p> 
 <p>sudo apt-get install libgtk2.0-dev</p> 
 <p>6.重新执行配置(出错处理如上)</p> 
 <p>./configure --enable-debugger --enable-disasm</p> 
 <p>然后运行make</p> 
 <p>make</p> 
 <p>再install</p> 
 <p>sudo make install</p> 
 <p>我试过不用sudo来直接执行，会出错的，出错提示不明确，应该是权限不够</p> 
 <p>make: *** [install_bin] 错误 1</p> 
 <p>7.完成，执行bochs，嘻嘻，来个截图</p> 
 <p align="center"><img src="https://images2.imgbox.com/10/73/6uh2nDSw_o.png" alt="6599ec8e9e16431a986f209e94a49875.png"></p> 
 <p>配置bochs：</p> 
 <p>安装好bochs之后，我们需要对bochs进行配置，其实就是对文件bochrsc进行修改！</p> 
 <p>《orange's :一个操作系统的实现》的附带光盘里有一个已经配置好的bochrsc，但</p> 
 <p>是它是针对bochs2.3版本的，所以不能用！！！我们需要重新修改bochrsc！</p> 
 <p>首先将附带光盘里的chapter1子目录下的文件夹a 移动到/home/roothoo/,(主要是为</p> 
 <p>是让a.img 和 bochsrc在同一文件夹下)，然后对bochrc进行修改如下：</p> 
 <p>注意，#是注释符号！即#之后的语句是无效的，其实#就相当于C+语言中的//</p> 
 <p>###############################################################</p> 
 <p># Configuration file for Bochs</p> 
 <p>###############################################################</p> 
 <p># how much memory the emulated machine will have</p> 
 <p>megs: 32</p> 
 <p># filename of ROM images</p> 
 <p>romimage: file=/usr/local/share/bochs/BIOS-bochs-latest</p> 
 <p>#romimage: file=$BXSHARE/BIOS-bochs-latest (适用于bochs安装在windows下)</p> 
 <p>vgaromimage: /usr/local/share/vgabios/vgabios.bin</p> 
 <p>#vgaromimage: file=$BXSHARE/VGABIOS-lgpl-latest(适用bochs安装在windows下)</p> 
 <p># what disk images will be used</p> 
 <p>floppya: 1_44=a.img, status=inserted</p> 
 <p># choose the boot disk.</p> 
 <p>boot: floppy</p> 
 <p># where do we send log messages?</p> 
 <p># log: bochsout.txt</p> 
 <p># disable the mouse</p> 
 <p>mouse: enabled=0</p> 
 <p># enable key mapping, using US layout as default.</p> 
 <p>keyboard_mapping: enabled=1, map=/usr/local/share/bochs/keymaps/x11-pc-us.map</p> 
 <p>修改好之后，   【　Linux公社 www.Linuxidc.com　】  别忘了保存！</p> 
 <p>最后，我们运行bochs</p> 
 <p>cd /home/用户名 #我们切换到a.img 和 bochsrc所在的文件夹,</p> 
 <p>bochs -f bochsrc #以bochsrc为配置文件启动bochs</p> 
 <p>然后选择6，</p> 
 <p>然后再按c键，</p> 
 <p>OK!!!</p> 
 <p>ENJOY! -_-</p> 
 <p>问题一、安装bochs在terminal下输入下列代码</p> 
 <p>sudo apt-get install bochs</p> 
 <p>这样安装结束后，在我使用bochs的时候出现了下列错误：</p> 
 <p>Event type: PANIC</p> 
 <p>Device: [ ]</p> 
 <p>Message: dlopen failed for module 'x': file not found</p> 
 <p>这是由于在安装的时候，少安装了个bochs-x包</p> 
 <p>这个包可以在http://packages.Ubuntu.com/dapper/misc/bochs-x找到</p> 
 <p>也可以在terminal下面输入</p> 
 <p>sudo apt-get install bochs-x</p> 
 <p>这样才算安装完毕了。</p> 
 <p>问题二、启动问题</p> 
 <p>点进入系统后控制台出现下面的提示：</p> 
 <p>Please choose one: [6] 6</p> 
 <p>00000000000i[ ] installing win32 module as the Bochs GUI</p> 
 <p>00000000000i[ ] using log file bochsout.txt</p> 
 <p>========================================================================</p> 
 <p>Event type: PANIC</p> 
 <p>Device: [MEM0 ]</p> 
 <p>Message: ROM: System BIOS must end at 0xfffff</p> 
 <p>A PANIC has occurred. Do you want to:</p> 
 <p>cont - continue execution</p> 
 <p>alwayscont - continue execution, and don't ask again.</p> 
 <p>This affects only PANIC events from device [MEM0 ]</p> 
 <p>die - stop execution now</p> 
 <p>abort - dump core</p> 
 <p>Choose one of the actions above: [die]</p> 
 <p>问题原因：</p> 
 <p>在2.3.5以前的bochs使用的BIOS-bochs-latest是64k的，那个时候需要加上</p> 
 <p>romimage: file=BIOS-bochs-latest,address=0xf0000(举例)</p> 
 <p>在2.3.5中的BIOS-bochs-latest更新了，变成了128k的，这个时候配置需要改为</p> 
 <p>romimage: file=$BXSHARE/BIOS-bochs-latest (举例，也就是要去掉address=0xf000)</p> 
 <p>解决方法：</p> 
 <p>去掉配置文件中的address那个</p> 
 <p>问题三、bochs的启动配置文件bochsrc</p> 
 <p>一般网上的资料都会提示你安装好后会有如下工具：</p> 
 <p>/usr/bin/bochs  Bochs启动程序</p> 
 <p>/usr/bin/bximage  Bochs带的制作磁盘镜像文件的工具</p> 
 <p>/usr/bin/bxcommit  把redolog放进flat磁盘镜像文件中去的交互工具</p> 
 <p>/usr/share/doc/bochs/bochsrc-sample.txt  Bochs配置文件的例子</p> 
 <p>/usr/share/bochs/BIOS-bochs-*  ROM BIOS镜像文件</p> 
 <p>/usr/share/bochs/VGABIOS-*  与VGA BIOS镜像文件相关的文件</p> 
 <p>/usr/bin/bochs-dlx  启动Bochs中DLX linux的程序</p> 
 <p>/usr/share/bochs/dlxlinux/  DLX Linux的目录，包含它的磁盘镜像文件和配置文件</p> 
 <p>/usr/share/bochs/keymaps/*.map  X11和SDL的keymap列表</p> 
 <p>其实在终端安装的却没有第四、第七和第八项，就连第二第三项也要另外安装：</p> 
 <p>sudo apt-get install bximage</p> 
 <p>sudo apt-get install bxcommit</p> 
 <p>所以，网上那些bochsrx在Ubuntu是运行不了的，就因为这点，我搞近一个下午，开始我老以为是配置文件不对呢。</p> 
 <p>普通的bochsrc：</p> 
 <p>romimage: file=$BXSHARE/BIOS-bochs-latest,</p> 
 <p>vgaromimage: file=$BXSHARE/VGABIOS-lgpl-latest</p> 
 <p>但是在Ubuntu下压根就没有VGABIOS-lgpl-latest</p> 
 <p>例如：</p> 
 <p>www.linuxidc.com@linuxidc-desktop:/usr/share/bochs$ ls</p> 
 <p>BIOS-bochs-latest BIOS-bochs-legacy BIOS-qemu-latest keymaps</p> 
 <p>www.linuxidc.com@linuxidc-desktop:/usr/share/bochs$</p> 
 <p>后来我才发现，从终端下安装bochs时它把VGA专门作为了一个程序安装在了/usr/share/vgabios/中了。</p> 
 <p>www.linuxidc.com@linuxidc-desktop:/usr/share/bochs$ ls /usr/share/vgabios/</p> 
 <p>vgabios.bin vgabios.cirrus.bin vgabios.cirrus.debug.bin vgabios.debug.bin</p> 
 <p>www.linuxidc.com@linuxidc-desktop:/usr/share/bochs$</p> 
 <p>这样配置文件就要改为：</p> 
 <p>romimage: file=$BXSHARE/BIOS-bochs-latest</p> 
 <p>megs:4</p> 
 <p>floppya: image=./boot.img,status=inserted</p> 
 <p>vgaromimage: file=/usr/share/vgabios/vgabios.bin</p> 
 <p align="center"> boot:a log:out.bochs<img src="https://images2.imgbox.com/db/34/8V3Inc4A_o.png" alt="0b1331709591d260c1c78e86d0c51c18.png"></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6685238bbba3972acb3b1c0f9fc7620e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Selenium 模拟键盘操作</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/00c775bdbd2e427af870d66c39c2f41a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">厦门大学LaTeX模板：宋体加粗变黑体问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>