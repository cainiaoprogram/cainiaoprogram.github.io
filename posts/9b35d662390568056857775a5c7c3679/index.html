<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>010 - Seajs使用实例入门介绍 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="010 - Seajs使用实例入门介绍" />
<meta property="og:description" content="Seajs使用实例入门介绍 seajs是啥，可以看看这篇前端模块化（CommonJs,AMD和CMD）
文章来自于
本文所用例子的代码目录结构：
seajs example |--sea-module //存在依赖文件 |--jquery |--jqeury.js |--sea.js |--static //存放自定义模块js |--main.js |--index.html //调用页面 seajs页面引入 下面开始，首先看下index：
&lt;!DOCTYPE html&gt; &lt;html lang=&#34;en&#34;&gt; &lt;head&gt; &lt;meta charset=&#34;UTF-8&#34;&gt; &lt;title&gt;seajs example&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;h1 id=&#34;title&#34;&gt;seajs demo&lt;/h1&gt; &lt;script src=&#34;sea-module/sea.js&#34;&gt;&lt;/script&gt; &lt;script&gt; seajs.use(&#39;./static/main.js&#39;); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; 首先引入sea.js文件，然后通过seajs.use加载main.js文件。我们再来看看main.js:
define(function(require,exports,module) { var title= document.getElementById(&#39;title&#39;); title.innerHTML = &#34;yes it works&#34; }) define()用来定义模块文件，具体参数等介绍可以参考文章开头介绍的文章。此处，页面会输出yes it works,是main.js修改了id为title的标签的文本内容，并没有引用其他模块文件。
模块文件引入 我们自定一个模块changeText.js:
define(function (require, exports, module) { var textContent = &#39;yes it works&#39;; exports.text = textContent; //or //module." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9b35d662390568056857775a5c7c3679/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-07-10T13:05:24+08:00" />
<meta property="article:modified_time" content="2017-07-10T13:05:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">010 - Seajs使用实例入门介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="article"> 
 <h2 class="title">Seajs使用实例入门介绍</h2> 
 <div class="author"> 
  <div class="info"></div> 
 </div> 
 <div class="show-content"> 
  <p>seajs是啥，可以看看这篇<a target="_blank" href="http://www.jianshu.com/p/d67bc79976e6" rel="nofollow noopener noreferrer">前端模块化（CommonJs,AMD和CMD）</a></p> 
  <p><a target="_blank" href="http://www.jianshu.com/p/ebdf2233e3fe" rel="nofollow noopener noreferrer">文章来自于</a></p> 
  <p>本文所用例子的代码目录结构：</p> 
  <pre class="hljs 1c"><code class="1c">seajs example
    <span class="hljs-string">|--sea-module       //存在依赖文件</span>
        <span class="hljs-string">|--jquery</span>
            <span class="hljs-string">|--jqeury.js</span>
        <span class="hljs-string">|--sea.js    </span>
    <span class="hljs-string">|--static         //存放自定义模块js</span>
        <span class="hljs-string">|--main.js</span>
    <span class="hljs-string">|--index.html     //调用页面</span></code></pre> 
  <h4>seajs页面引入</h4> 
  <p>下面开始，首先看下index：</p> 
  <pre class="hljs xml"><code class="xml"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>seajs example<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"title"</span>&gt;</span>seajs demo<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"sea-module/sea.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
    seajs.use(<span class="hljs-string">'./static/main.js'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre> 
  <p>首先引入sea.js文件，然后通过seajs.use加载main.js文件。我们再来看看main.js:</p> 
  <pre class="hljs typescript"><code class="typescript">define(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"><span class="hljs-built_in">require</span>,exports,<span class="hljs-built_in">module</span></span>) </span>{
    <span class="hljs-keyword">var</span> title= <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'title'</span>);
    title.innerHTML = <span class="hljs-string">"yes it works"</span>
})</code></pre> 
  <p>define()用来定义模块文件，具体参数等介绍可以参考文章开头介绍的文章。此处，页面会输出<code>yes it works</code>,是main.js修改了id为title的标签的文本内容，并没有引用其他模块文件。</p> 
  <h4>模块文件引入</h4> 
  <p>我们自定一个模块changeText.js:</p> 
  <pre class="hljs typescript"><code class="typescript">define(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-built_in">require</span>, exports, <span class="hljs-built_in">module</span></span>) </span>{
    <span class="hljs-keyword">var</span> textContent = <span class="hljs-string">'yes it works'</span>;
    exports.text = textContent;
    <span class="hljs-comment">//or</span>
    <span class="hljs-comment">//module.exports = {<!-- --></span>
        <span class="hljs-comment">//text: textContent</span>
    <span class="hljs-comment">//}</span>
})</code></pre> 
  <p>changeText模块输出了一个text变量，然后我们在main中引用它：</p> 
  <pre class="hljs typescript"><code class="typescript">define(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-built_in">require</span>, exports, <span class="hljs-built_in">module</span></span>) </span>{
    <span class="hljs-keyword">var</span> changeText = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../static/changeText.js'</span>);
    <span class="hljs-keyword">var</span> title = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'title'</span>);
    title.innerHTML = changeText.text;
})</code></pre> 
  <p>我们通过require将changText模块的输出对象赋值给changeText变量，然后将对象的text属性赋值给节点的文本值,此时页面输出效果是一样的。</p> 
  <h4>别名设置</h4> 
  <p>引入一个模块要写他的相对路径，我们可以给它取个别名，在seajs.use()上面加入这一段代码：</p> 
  <pre class="hljs xml"><code class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="actionscript">
    seajs.config({
        alias:{
            <span class="hljs-string">'changeText'</span>:<span class="hljs-string">'../static/changeText.js'</span>
        }
    });
    seajs.use(<span class="hljs-string">'./static/main.js'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre> 
  <p>通过config中alias给<code>'../static/changeText.js'</code>设置了别名<code>changeText</code>，现在main中引用changeText模块就可以直接写成这样了<code>var changeText = require('changeText')</code>。</p> 
  <h4>模块调用</h4> 
  <p>下面试着引入一个模块的方法，将changeText改为：</p> 
  <pre><code class="language-javascript"><code class="javascript">define(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">require, exports, module</span>) </span>{
    <span class="hljs-keyword">var</span> init= <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> textContent = [
            <span class="hljs-string">'yes it works'</span>,
            <span class="hljs-string">'seajs demo'</span>,
            <span class="hljs-string">'it is a lucky day'</span>,
            <span class="hljs-string">'wish this help you'</span>,
            <span class="hljs-string">'thank you for reading'</span>
        ];
        <span class="hljs-keyword">var</span> index = <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random()*textContent.length);
        <span class="hljs-keyword">return</span> textContent[index];
    }
    <span class="hljs-built_in">module</span>.exports = {
        <span class="hljs-attr">init</span>:init
    }
})</code></code></pre> 
  <p>模块中定义了一个init方法，它随机返回数组中的一条。然后我们将main修改下：</p> 
  <pre class="hljs typescript"><code class="typescript">define(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-built_in">require</span>, exports, <span class="hljs-built_in">module</span></span>) </span>{
    <span class="hljs-keyword">var</span> changeText = <span class="hljs-built_in">require</span>(<span class="hljs-string">'changeText'</span>);
    <span class="hljs-keyword">var</span> title = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">'title'</span>);
    title.innerHTML = changeText.init();
})</code></pre> 
  <p>这时候我们每次刷新页面都会随机出现一条文字。</p> 
  <h4>第三方文件引用</h4> 
  <p>下载一个jquery源文件，按如下修改：</p> 
  <pre class="hljs lisp"><code class="lisp">define(<span class="hljs-name">function</span> (<span class="hljs-name">require</span>, exports, module) {
    jquery 源码
})</code></pre> 
  <p>使其模块化，能被外部调用。</p> 
  <p>然后再设置别名：</p> 
  <pre class="hljs less"><code class="less"><span class="hljs-selector-tag">seajs</span><span class="hljs-selector-class">.config</span>({
     <span class="hljs-attribute">alias</span>:{
         <span class="hljs-string">'changeText'</span>:<span class="hljs-string">'../static/changeText.js'</span>,
          <span class="hljs-string">'jquery'</span>:<span class="hljs-string">'jquery/jquery'</span>,
          <span class="hljs-string">'main'</span>:<span class="hljs-string">'./static/main.js'</span>
     }
});
<span class="hljs-selector-tag">seajs</span><span class="hljs-selector-class">.use</span>(<span class="hljs-string">'./static/main.js'</span>);</code></pre> 
  <p>在main中引入jquery，并使用：</p> 
  <pre class="hljs lisp"><code class="lisp">define(<span class="hljs-name">function</span> (<span class="hljs-name">require</span>, exports, module) {
    var changeText = require('changeText')<span class="hljs-comment">;</span>
    var $ = require('jquery')<span class="hljs-comment">;</span>
    $('#title').text(<span class="hljs-name">changeText</span>.init())<span class="hljs-comment">;</span>
})</code></pre> 
  <h4>回调函数</h4> 
  <p>seajs.use([module],callback),加载一个或多个模块，并执行回调函数。我们将main修改下：</p> 
  <pre><code class="language-javascript"><code class="javascript">define(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">require, exports, module</span>) </span>{
    <span class="hljs-keyword">var</span> changeText = <span class="hljs-built_in">require</span>(<span class="hljs-string">'changeText'</span>);
    <span class="hljs-keyword">var</span> $ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'jquery'</span>);
    <span class="hljs-keyword">var</span> showText = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#title'</span>).text(changeText.init());
    }
    exports.showText = showText;
})</code></code></pre> 
  <p>然后增加回调函数：</p> 
  <pre><code class="language-javascript"><code class="javascript">seajs.use([<span class="hljs-string">'main'</span>,<span class="hljs-string">'jquery'</span>],<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">main,$</span>) </span>{
    $(<span class="hljs-string">'#title'</span>).after(<span class="hljs-string">'&lt;button id="show"&gt;showText&lt;/button&gt;'</span>);
    $(<span class="hljs-string">'#show'</span>).on(<span class="hljs-string">'click'</span>,<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
         main.showText()
    })
});</code></code></pre> 
  <p>上述代码我们加载了两个模块，并把它们输出的对象传参给main和$变量,通过点击事件调用main中的showText方法，而showText方法调用了changeText中的init方法。</p> 
  <h4>路径问题</h4> 
  <p>我们先来搞清几个问题：</p> 
  <ol><li><code>./</code>是表示当前目录；<code>../</code>是上级目录；</li><li><code>seajs.config</code> 里<code>alias</code>的别名设置只是给路径取个别名，减少书写；</li><li>seajs里主要两个用到路径的地方：一个是seajs.use()；一个是require()。</li><li><code>base</code>路径是seajs文件所在目录，本例子为 <code>（file:///Users/linyuhua/code/seajs/sea-module/）</code></li></ol> 
  <h5>先来讲seajs.use()路径</h5> 
  <p>seajs.use()调用模块文件的路径默认是seajs文件的父文件夹目录；以本例子来解释：<br> 首先来回看下我们的目录结构：</p> 
  <pre class="hljs 1c"><code class="1c">seajs example
<span class="hljs-string">|--seajs</span>
    <span class="hljs-string">|--sea-module       //存在依赖文件</span>
        <span class="hljs-string">|--jquery</span>
            <span class="hljs-string">|--jqeury.js</span>
        <span class="hljs-string">|--sea.js    </span>
    <span class="hljs-string">|--static         //存放自定义模块js</span>
        <span class="hljs-string">|--main.js</span>
        <span class="hljs-string">|--changeText.js</span>
    <span class="hljs-string">|--index.html     //调用页面</span></code></pre> 
  <p>调用main可以通过以下路径：</p> 
  <pre class="hljs awk"><code class="awk">seajs.config({
     alias:{
         <span class="hljs-string">'changeText'</span>:<span class="hljs-string">'../static/changeText.js'</span>,
          <span class="hljs-string">'jquery'</span>:<span class="hljs-string">'jquery/jquery'</span>,
          <span class="hljs-string">'main'</span>:<span class="hljs-string">'./static/main.js'</span>
     }
});
seajs.use([<span class="hljs-string">'main'</span>,<span class="hljs-string">'jquery'</span>],<span class="hljs-keyword">function</span>(main,$) {
      ...
    })
});
<span class="hljs-regexp">//</span>  .<span class="hljs-regexp">/表示当前路径,seajs.use的默认路径是seajs文件的父文件夹的目录；即file:/</span><span class="hljs-regexp">//</span>Users<span class="hljs-regexp">/linyuhua/</span>code<span class="hljs-regexp">/seajs/</span>；
<span class="hljs-regexp">//</span>  因此，此时main的调用路径为file:<span class="hljs-regexp">//</span><span class="hljs-regexp">/Users/</span>linyuhua<span class="hljs-regexp">/code/</span>seajs<span class="hljs-regexp">/static/m</span>ain.js</code></pre> 
  <p>在举个例子来证明，这次我们使用../来设置路径：</p> 
  <pre class="hljs elixir"><code class="elixir">seajs.config({
     <span class="hljs-symbol">alias:</span>{
         <span class="hljs-string">'changeText'</span><span class="hljs-symbol">:<span class="hljs-string">'../static/changeText.js'</span></span>,
          <span class="hljs-string">'jquery'</span><span class="hljs-symbol">:<span class="hljs-string">'jquery/jquery'</span></span>,
          <span class="hljs-string">'main'</span><span class="hljs-symbol">:<span class="hljs-string">'../seajs/static/main.js'</span></span>
     }
});
seajs.<span class="hljs-keyword">use</span>([<span class="hljs-string">'main'</span>,<span class="hljs-string">'jquery'</span>],function(main,<span class="hljs-variable">$)</span> {
      ...
    })
});
<span class="hljs-regexp">//</span> ../表示上级目录，seajs.<span class="hljs-keyword">use</span>()的目录为<span class="hljs-symbol">file:</span>/<span class="hljs-regexp">//</span>Users/linyuhua/code/seajs/；
/<span class="hljs-regexp">/ 他的上级目录为file:/</span><span class="hljs-regexp">//</span>Users/linyuhua/code/，因此此时main的别名设置为../seajs/static/main.js;
<span class="hljs-regexp">//</span> 合并之后就是<span class="hljs-symbol">file:</span>/<span class="hljs-regexp">//</span>Users/linyuhua/code/seajs/static/main.js</code></pre> 
  <p>最后再来看看jquery的调用，直接以文件名开头，在seajs中直接以文件名开头的路径是相对于base路径，也就是说当把jquery别名设置为<code>'jquery':'jquery/jquery',</code>时，他的调用路径为<br> base+‘jquery/jquery’（.js可以省略）；即<code>file:///Users/linyuhua/code/seajs/sea-module/+jquery/jquery</code>;</p> 
  <h5>require()调用路径</h5> 
  <p>下面我们来看看require调用的路径</p> 
  <p>首先是<code>./</code>和<code>../</code><br> 在define(function (){ }), 则是相对于<strong>当前的js文件所在目录</strong>，还记得main中怎么调用changeText.js和jquery的吗：</p> 
  <pre><code class="language-javascript"><code class="javascript"><span class="hljs-comment">//对照别名设置</span>
seajs.config({
     <span class="hljs-attr">alias</span>:{
          <span class="hljs-string">'changeText'</span>:<span class="hljs-string">'../static/changeText.js'</span>,
          <span class="hljs-string">'jquery'</span>:<span class="hljs-string">'jquery/jquery'</span>,
          <span class="hljs-string">'main'</span>:<span class="hljs-string">'../seajs/static/main.js'</span>
     }
});

define(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">require, exports, module</span>) </span>{
    <span class="hljs-keyword">var</span> changeText = <span class="hljs-built_in">require</span>(<span class="hljs-string">'changeText'</span>);
    <span class="hljs-keyword">var</span> $ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'jquery'</span>);
    <span class="hljs-keyword">var</span> showText = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        $(<span class="hljs-string">'#title'</span>).text(changeText.init());
    }
    exports.showText = showText;
})</code></code></pre> 
  <p>由于在define(function (){ }), 则是相对于当前的js文件所在目录，所以../表示changeText.js的上级目录即<code>file:///Users/linyuhua/code/seajs</code>，加上别名就是<code>file:///Users/linyuhua/code/seajs/static/changText.js</code>;</p> 
  <p>我们也可以直接<code>require('./changeText.js')</code>来调用，<code>./</code>表示当前目录，而<code>changeText.js</code>与<code>main.js</code>在同一个目录下;</p> 
  <p>如果路径以文件名开头则是相对base路径，与前面seajs.use()一样，<code>jquery:jqeury/jquery</code>就是相对base路径调用的。</p> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9f1f6c65be34c0db3f9babad9e557523/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">eclipse 中导入源码出现 The declared package does not match the expected package的解决方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a9fc4370e6b8e8b26f5c8769d88fecb1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">重复创建fragment的解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>