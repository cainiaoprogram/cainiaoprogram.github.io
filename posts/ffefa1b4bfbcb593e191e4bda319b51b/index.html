<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>$.ajax 传到后台的参数获取不到 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="$.ajax 传到后台的参数获取不到" />
<meta property="og:description" content=" 使用ajax传参数,发现后台获取不到数据
value2={&#39;key21&#39;:&#39;value21&#39;,&#39;key22&#39;:&#39;value22&#39;}; post_data = {&#39;key1&#39;:&#39;value1&#39;,&#39;key2&#39;:value2}; $(&#34;#funDiv1&#34;).bind(&#34;click&#34;,function(){ $.ajax({ type : &#39;post&#39;, url : &#39;ajaxTest.do&#39;, data : post_data, dataType : &#39;text&#39;,//若为json,无法接受字符传返回值 success : function(data){ alert(&#34;success&#34;); console.log(data); } }); }); key1可以获取到值,key2为空,原因是key2为json对象,后台无法解析,
后台springMVC
@ResponseBody @RequestMapping(value=&#34;/ajaxTest.do&#34;,produces=&#34;application/json;charset=utf-8&#34;,method={RequestMethod.POST,RequestMethod.GET}) public String test2(HttpServletRequest request,String key1,String key2){ System.out.println(key1); System.out.println(key2); return &#34;test2_result&#34;; } 解决方法:
前端把json对象转为字符串,后台再解析
JSON.stringify(value2) 后台解析,需要导包,
@ResponseBody @RequestMapping(value=&#34;/ajaxTest.do&#34;,produces=&#34;application/json;charset=utf-8&#34;,method={RequestMethod.POST,RequestMethod.GET}) public String test2(HttpServletRequest request,String key1,String key2){ System.out.println(&#34;test2&#34;); System.out.println(key1); System.out.println(key2); try{ Map map = JSONObject.fromObject(key2); System.out.println(map.get(&#34;key21&#34;)); }catch(Exception e){ e.printStackTrace(); } return &#34;test2_result&#34;; } " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ffefa1b4bfbcb593e191e4bda319b51b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-03-01T12:04:58+08:00" />
<meta property="article:modified_time" content="2018-03-01T12:04:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">$.ajax 传到后台的参数获取不到</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>使用ajax传参数,发现后台获取不到数据</p> 
<p><br></p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'DejaVu Sans Mono';font-size:11.3pt;"><span style="color:#9876aa;">value2</span>={<!-- --><span style="color:#6a8759;">'key21'</span>:<span style="color:#6a8759;">'value21'</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">'key22'</span>:<span style="color:#6a8759;">'value22'</span>}<span style="color:#cc7832;">;
</span><span style="color:#9876aa;">post_data </span>= {<!-- --><span style="color:#6a8759;">'key1'</span>:<span style="color:#6a8759;">'value1'</span><span style="color:#cc7832;">,</span><span style="color:#6a8759;">'key2'</span>:<span style="color:#9876aa;">value2</span>}<span style="color:#cc7832;">;
</span>$(<span style="color:#6a8759;">"#funDiv1"</span>).<span style="color:#ffc66d;">bind</span>(<span style="color:#6a8759;">"click"</span><span style="color:#cc7832;">,</span><span style="color:#cc7832;"><strong>function</strong></span>(){
    $.<span style="color:#9876aa;">ajax</span>({
        <span style="color:#9876aa;">type </span>: <span style="color:#6a8759;">'post'</span><span style="color:#cc7832;">,
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">url </span>: <span style="color:#6a8759;">'ajaxTest.do'</span><span style="color:#cc7832;">,
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">data </span>: <span style="color:#9876aa;">post_data</span><span style="color:#cc7832;">,
</span><span style="color:#cc7832;">        </span><span style="color:#9876aa;">dataType </span>: <span style="color:#6a8759;">'text'</span><span style="color:#cc7832;">,//若为json,无法接受字符传返回值
</span><span style="color:#cc7832;">        </span><span style="color:#ffc66d;">success </span>: <span style="color:#cc7832;"><strong>function</strong></span>(data){
            <span style="color:#ffc66d;">alert</span>(<span style="color:#6a8759;">"success"</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">            </span>console.<span style="color:#ffc66d;">log</span>(data)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>}
    })<span style="color:#cc7832;">;
</span>})<span style="color:#cc7832;">;</span></pre> 
<p>key1可以获取到值,key2为空,原因是key2为json对象,后台无法解析,</p> 
<p>后台springMVC</p> 
<p><br></p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'DejaVu Sans Mono';font-size:11.3pt;">@ResponseBody
@RequestMapping(<span style="color:#9876aa;">value</span>=<span style="color:#6a8759;">"/ajaxTest.do"</span><span style="color:#cc7832;">,</span><span style="color:#9876aa;">produces</span>=<span style="color:#6a8759;">"application/json;charset=utf-8"</span><span style="color:#cc7832;">,</span><span style="color:#9876aa;">method</span>={<!-- --><span style="color:#9876aa;">RequestMethod</span>.POST<span style="color:#cc7832;">,</span>RequestMethod.GET})
   public String test2(HttpServletRequest request<span style="color:#cc7832;">,</span>String key1<span style="color:#cc7832;">,</span>String key2){
    System.out.println(key1)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">     </span>System.out.println(key2)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">     </span><span style="color:#cc7832;"><strong>return </strong></span><span style="color:#6a8759;">"test2_result"</span><span style="color:#cc7832;">;    
</span><span style="color:#cc7832;">   </span>}</pre> 
<p><br></p> 
<p>解决方法:</p> 
<p>    前端把json对象转为字符串,后台再解析</p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'DejaVu Sans Mono';font-size:11.3pt;">JSON.<span style="color:#ffc66d;">stringify</span>(<span style="color:#9876aa;">value2</span>)</pre> 
<p>后台解析,需要导包,</p> 
<p><img src="https://images2.imgbox.com/13/5f/xpFkQASl_o.png" alt=""><br></p> 
<p></p> 
<pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'DejaVu Sans Mono';font-size:11.3pt;">@ResponseBody
   @RequestMapping(<span style="color:#9876aa;">value</span>=<span style="color:#6a8759;">"/ajaxTest.do"</span><span style="color:#cc7832;">,</span><span style="color:#9876aa;">produces</span>=<span style="color:#6a8759;">"application/json;charset=utf-8"</span><span style="color:#cc7832;">,</span><span style="color:#9876aa;">method</span>={<!-- --><span style="color:#9876aa;">RequestMethod</span>.POST<span style="color:#cc7832;">,</span>RequestMethod.GET})
public String test2(HttpServletRequest request<span style="color:#cc7832;">,</span>String key1<span style="color:#cc7832;">,</span>String key2){
    System.out.println(<span style="color:#6a8759;">"test2"</span>)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>System.out.println(key1)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>System.out.println(key2)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span><span style="color:#cc7832;"><strong>try</strong></span>{
        Map <span style="color:#9876aa;">map </span>= JSONObject.fromObject(key2)<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">        </span>System.out.println(<span style="color:#9876aa;">map</span>.<span style="color:#ffc66d;">get</span>(<span style="color:#6a8759;">"key21"</span>))<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}<span style="color:#cc7832;"><strong>catch</strong></span>(Exception e){
        e.printStackTrace()<span style="color:#cc7832;">;
</span><span style="color:#cc7832;">    </span>}
    <span style="color:#cc7832;"><strong>return </strong></span><span style="color:#6a8759;">"test2_result"</span><span style="color:#cc7832;">;
</span>}</pre> 
<br> 
<p><br></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ad0876ef70ea1d97e9a96c51302fa299/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">webstorm配置node运行环境（前后端分离，node服务端，vue客户端）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f418bb0bc3af05e63fa2250ed7932b76/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">CentOS7.2 安装L2TP/IPSec 服务端/客户端 和部分心得 ( libreswan&#43;xl2tpd ）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>