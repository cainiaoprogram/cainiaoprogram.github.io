<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>数据库为何要有复合主键（多主键） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="数据库为何要有复合主键（多主键）" />
<meta property="og:description" content=" 最近学习一点数据库的基本知识，被一个问题困惑了许久：主键是唯一的索引，那么为何一个表可以创建多个主键呢？ 其实“主键是唯一的索引”这话有点歧义的。举个例子，我们在表中创建了一个ID字段，自动增长，并设为主键，这个是没有问题的，因为“主键是唯一的索引”，ID自动增长保证了唯一性，所以可以。 此时，我们再创建一个字段name，类型为varchar，也设置为主键，你会发现，在表的多行中你是可以填写相同的name值的，这岂不是有违“主键是唯一的索引”这句话么？ 所以我才说“主键是唯一的索引”是有歧义的。应该是“当表中只有一个主键时，它是唯一的索引；当表中有多个主键时，称为复合主键，复合主键联合保证唯一索引”。 为什么自增长ID已经可以作为唯一标识的主键，为啥还需要复合主键呢。因为，并不是所有的表都要有ID这个字段啊哈哈，比如，我们建一个学生表，没有唯一能标识学生的ID，怎么办呢，学生的名字、年龄、班级都可能重复，无法使用单个字段来唯一标识，这时，我们可以将多个字段设置为主键，形成复合主键，这多个字段联合标识唯一性，其中，某几个主键字段值出现重复是没有问题的，只要不是有多条记录的所有主键值完全一样，就不算重复。
1、数据库的每张表只能有一个主键，不可能有多个主键。 2、所谓的一张表多个主键，我们称之为联合主键。 注：联合主键：就是用多个字段一起作为一张表的主键。 3、主键的主键的作用是保证数据的唯一性和完整性，同时通过主键检索表能够增加检索速度。
下面聊聊怎么创建联合主键：
1、GUI中同时选中多列，点击设置为主键。 2、sql语句将多列设置为主键： 一种是在建表时就写出，语句如下：
Create Table 表名 (字段名1 Int Not Null, 字段名2 nvarchar(13) Not Null Primary Key (字段名1, 字段名2), 字段名3………… 字段名N………… ) 另一种是在建表后更改，语句如下：
ALTER TABLE 表名 WITH NOCHECK ADD CONSTRAINT [PK_表名] PRIMARY KEY NONCLUSTERED ( [字段名1], [字段名2] ) " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/76b6ccb369020e9f839de9ce98869d1b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-11-09T20:50:57+08:00" />
<meta property="article:modified_time" content="2017-11-09T20:50:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">数据库为何要有复合主键（多主键）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>最近学习一点数据库的基本知识，被一个问题困惑了许久：主键是唯一的索引，那么为何一个表可以创建多个主键呢？ <br> 其实“主键是唯一的索引”这话有点歧义的。举个例子，我们在表中创建了一个ID字段，自动增长，并设为主键，这个是没有问题的，因为“主键是唯一的索引”，ID自动增长保证了唯一性，所以可以。 <br> 此时，我们再创建一个字段name，类型为varchar，也设置为主键，你会发现，在表的多行中你是可以填写相同的name值的，这岂不是有违“主键是唯一的索引”这句话么？ <br> 所以我才说“主键是唯一的索引”是有歧义的。应该是“当表中只有一个主键时，它是唯一的索引；当表中有多个主键时，称为复合主键，复合主键联合保证唯一索引”。 <br> 为什么自增长ID已经可以作为唯一标识的主键，为啥还需要复合主键呢。因为，并不是所有的表都要有ID这个字段啊哈哈，比如，我们建一个学生表，没有唯一能标识学生的ID，怎么办呢，学生的名字、年龄、班级都可能重复，无法使用单个字段来唯一标识，这时，我们可以将多个字段设置为主键，形成复合主键，这多个字段联合标识唯一性，其中，某几个主键字段值出现重复是没有问题的，只要不是有多条记录的所有主键值完全一样，就不算重复。</p> 
<p>1、数据库的每张表只能有一个主键，不可能有多个主键。 <br> 2、所谓的一张表多个主键，我们称之为联合主键。 <br> 注：联合主键：就是用多个字段一起作为一张表的主键。 <br> 3、主键的主键的作用是保证数据的唯一性和完整性，同时通过主键检索表能够增加检索速度。</p> 
<p>下面聊聊怎么创建联合主键：</p> 
<p>1、GUI中同时选中多列，点击设置为主键。 <br> 2、sql语句将多列设置为主键： <br> 一种是在建表时就写出，语句如下：</p> 
<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">Create</span> <span class="hljs-keyword">Table</span> 表名 (字段名<span class="hljs-number">1</span> <span class="hljs-keyword">Int</span> <span class="hljs-keyword">Not</span> <span class="hljs-keyword">Null</span>,
                   字段名<span class="hljs-number">2</span> nvarchar(<span class="hljs-number">13</span>) <span class="hljs-keyword">Not</span> <span class="hljs-keyword">Null</span> <span class="hljs-keyword">Primary</span> <span class="hljs-keyword">Key</span> (字段名<span class="hljs-number">1</span>, 字段名<span class="hljs-number">2</span>),
                    字段名<span class="hljs-number">3</span>…………
                    字段名N………… )</span></code></pre> 
<p>另一种是在建表后更改，语句如下：</p> 
<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> 表名 <span class="hljs-keyword">WITH</span> NOCHECK <span class="hljs-keyword">ADD</span> 
<span class="hljs-keyword">CONSTRAINT</span> [PK_表名] <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span>  NONCLUSTERED 
(
  [字段名<span class="hljs-number">1</span>],
  [字段名<span class="hljs-number">2</span>]
)</span></code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0b232f118ad4dbdc2916e38156757521/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">更新NVIDIA显卡的CUDA驱动出错，You appear to be running an X server; please exit X before</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/1cf9a39c0490593f952bc62f8cc7bf50/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">开启nginx目录文件列表显示功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>