<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>OpenCV快速入门：相机标定——单目视觉和双目视觉 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="OpenCV快速入门：相机标定——单目视觉和双目视觉" />
<meta property="og:description" content="文章目录 前言一、相机标定的基本原理1.1 相机模型与坐标系1.1.1 相机模型1.1.2 坐标系 1.2 相机内参与外参1.2.1 内部参数1.2.2 外部参数 1.3 镜头畸变1.4 透视变换1.5 标定的重要性和应用场景 二、单目视觉2.1 单目视觉的原理2.1.1 单目视觉的原理2.1.2 单目视觉的公式2.1.3 应用领域 2.2 实现单目视觉标定的步骤2.2.1 准备标定板2.2.2 捕获标定图像2.2.3 提取角点2.2.4 计算内参和畸变参数 2.3 单目视觉相机标定实战 三、双目视觉3.1 双目视觉的原理与应用3.1.1 双目视觉的原理3.1.2 双目视觉的应用 3.2 双目视觉与单目视觉的对比3.3 实现双目视觉标定的步骤3.4 OpenCV中的相关函数与方法 总结 前言 在当今科技日益发展的时代，计算机视觉作为人工智能的重要分支，已经深入到我们生活的各个领域。在这个广阔的领域中，相机标定是一个基础且关键的步骤，它直接影响到视觉系统的精度和效能。尤其是在单目视觉和双目视觉的应用中，准确的相机标定成为了实现高效和精确视觉感知的前提。
单目视觉（Monocular Vision）和双目视觉（Binocular Vision）是计算机视觉中两种最基本的视觉形式。单目视觉指的是只使用一个相机进行图像捕捉和处理，它是最常见的视觉形式，广泛应用于各种智能设备和监控系统中。单目视觉系统的主要挑战在于它无法直接从图像中获取深度信息，这就要求我们通过算法和模型来推断出场景的三维结构。而双目视觉则是模拟人类的双眼视觉机制，通过两个相机从略微不同的角度捕捉图像，从而能够直接计算出图像中对象的深度信息。这种方式使得双目视觉系统在处理三维空间信息时更加精确和高效，尤其在机器人导航、自动驾驶汽车等领域展现出巨大的潜力。
本文将简要介绍单目视觉和双目视觉相机标定的基本原理和实践方法。
一、相机标定的基本原理 相机标定是计算机视觉领域中一个极为重要的过程，它涉及到了理解和校正相机捕捉图像的方式。这个过程对于提高图像处理的精度和效果至关重要，尤其是在单目视觉和双目视觉的应用中。
1.1 相机模型与坐标系 在深入相机标定的实践之前，了解其背后的原理是必要的。相机模型和坐标系构成了相机标定的理论基础。
1.1.1 相机模型 相机模型用于描述三维世界中的点是如何映射到二维图像上的。其中，最常见的模型是针孔相机模型（Pinhole Camera Model）。
在针孔相机模型中，一个三维空间中的点 P ( x , y , z ) P(x, y, z) P(x,y,z) 通过一个投影过程被映射到二维图像平面上的点 p ( u , v ) p(u, v) p(u,v)。这个映射过程通常涉及到几何和线性代数中的一些基本概念。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5b02ca47cf5fbdad66e556b879d566d5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-26T10:42:22+08:00" />
<meta property="article:modified_time" content="2023-11-26T10:42:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">OpenCV快速入门：相机标定——单目视觉和双目视觉</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_4" rel="nofollow">前言</a></li><li><a href="#_16" rel="nofollow">一、相机标定的基本原理</a></li><li><ul><li><a href="#11__20" rel="nofollow">1.1 相机模型与坐标系</a></li><li><ul><li><a href="#111__23" rel="nofollow">1.1.1 相机模型</a></li><li><a href="#112__37" rel="nofollow">1.1.2 坐标系</a></li></ul> 
   </li><li><a href="#12__52" rel="nofollow">1.2 相机内参与外参</a></li><li><ul><li><a href="#121__55" rel="nofollow">1.2.1 内部参数</a></li><li><a href="#122__66" rel="nofollow">1.2.2 外部参数</a></li></ul> 
   </li><li><a href="#13__75" rel="nofollow">1.3 镜头畸变</a></li><li><a href="#14__158" rel="nofollow">1.4 透视变换</a></li><li><a href="#15__172" rel="nofollow">1.5 标定的重要性和应用场景</a></li></ul> 
  </li><li><a href="#_192" rel="nofollow">二、单目视觉</a></li><li><ul><li><a href="#21__195" rel="nofollow">2.1 单目视觉的原理</a></li><li><ul><li><a href="#211__198" rel="nofollow">2.1.1 单目视觉的原理</a></li><li><a href="#212__212" rel="nofollow">2.1.2 单目视觉的公式</a></li><li><a href="#213__223" rel="nofollow">2.1.3 应用领域</a></li></ul> 
   </li><li><a href="#22__232" rel="nofollow">2.2 实现单目视觉标定的步骤</a></li><li><ul><li><a href="#221__235" rel="nofollow">2.2.1 准备标定板</a></li><li><a href="#222__244" rel="nofollow">2.2.2 捕获标定图像</a></li><li><a href="#223__251" rel="nofollow">2.2.3 提取角点</a></li><li><a href="#224__255" rel="nofollow">2.2.4 计算内参和畸变参数</a></li></ul> 
   </li><li><a href="#23__260" rel="nofollow">2.3 单目视觉相机标定实战</a></li></ul> 
  </li><li><a href="#_354" rel="nofollow">三、双目视觉</a></li><li><ul><li><a href="#31__358" rel="nofollow">3.1 双目视觉的原理与应用</a></li><li><ul><li><a href="#311__362" rel="nofollow">3.1.1 双目视觉的原理</a></li><li><a href="#312__376" rel="nofollow">3.1.2 双目视觉的应用</a></li></ul> 
   </li><li><a href="#32__387" rel="nofollow">3.2 双目视觉与单目视觉的对比</a></li><li><a href="#33__413" rel="nofollow">3.3 实现双目视觉标定的步骤</a></li><li><a href="#34_OpenCV_421" rel="nofollow">3.4 OpenCV中的相关函数与方法</a></li></ul> 
  </li><li><a href="#_432" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_4"></a>前言</h2> 
<p>在当今科技日益发展的时代，计算机视觉作为人工智能的重要分支，已经深入到我们生活的各个领域。在这个广阔的领域中，相机标定是一个基础且关键的步骤，它直接影响到视觉系统的精度和效能。尤其是在单目视觉和双目视觉的应用中，准确的相机标定成为了实现高效和精确视觉感知的前提。</p> 
<p>单目视觉（Monocular Vision）和双目视觉（Binocular Vision）是计算机视觉中两种最基本的视觉形式。单目视觉指的是只使用一个相机进行图像捕捉和处理，它是最常见的视觉形式，广泛应用于各种智能设备和监控系统中。单目视觉系统的主要挑战在于它无法直接从图像中获取深度信息，这就要求我们通过算法和模型来推断出场景的三维结构。而双目视觉则是模拟人类的双眼视觉机制，通过两个相机从略微不同的角度捕捉图像，从而能够直接计算出图像中对象的深度信息。这种方式使得双目视觉系统在处理三维空间信息时更加精确和高效，尤其在机器人导航、自动驾驶汽车等领域展现出巨大的潜力。</p> 
<p>本文将简要介绍单目视觉和双目视觉相机标定的基本原理和实践方法。</p> 
<p><img src="https://images2.imgbox.com/7d/33/s8Kilt5K_o.jpg" alt="OpenCV Logo"></p> 
<hr> 
<h2><a id="_16"></a>一、相机标定的基本原理</h2> 
<p>相机标定是计算机视觉领域中一个极为重要的过程，它涉及到了理解和校正相机捕捉图像的方式。这个过程对于提高图像处理的精度和效果至关重要，尤其是在单目视觉和双目视觉的应用中。</p> 
<h3><a id="11__20"></a>1.1 相机模型与坐标系</h3> 
<p>在深入相机标定的实践之前，了解其背后的原理是必要的。相机模型和坐标系构成了相机标定的理论基础。</p> 
<h4><a id="111__23"></a>1.1.1 相机模型</h4> 
<p>相机模型用于描述三维世界中的点是如何映射到二维图像上的。其中，最常见的模型是针孔相机模型（Pinhole Camera Model）。</p> 
<p>在针孔相机模型中，一个三维空间中的点 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         P 
        
       
         ( 
        
       
         x 
        
       
         , 
        
       
         y 
        
       
         , 
        
       
         z 
        
       
         ) 
        
       
      
        P(x, y, z) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.044em;">z</span><span class="mclose">)</span></span></span></span></span> 通过一个投影过程被映射到二维图像平面上的点 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         ( 
        
       
         u 
        
       
         , 
        
       
         v 
        
       
         ) 
        
       
      
        p(u, v) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord mathnormal">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mclose">)</span></span></span></span></span>。这个映射过程通常涉及到几何和线性代数中的一些基本概念。</p> 
<p>映射过程可以用以下公式表示：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          u 
         
        
          = 
         
         
         
           f 
          
         
           x 
          
         
         
         
           x 
          
         
           z 
          
         
        
          + 
         
         
         
           c 
          
         
           x 
          
         
        
       
         u = f_x \frac{x}{z} + c_x 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.7936em; vertical-align: -0.686em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.1076em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.044em;">z</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span><br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          v 
         
        
          = 
         
         
         
           f 
          
         
           y 
          
         
         
         
           y 
          
         
           z 
          
         
        
          + 
         
         
         
           c 
          
         
           y 
          
         
        
       
         v = f_y \frac{y}{z} + c_y 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">v</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.7936em; vertical-align: -0.686em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.1076em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.044em;">z</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.7167em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></p> 
<p>这里，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
        
        
          f 
         
        
          x 
         
        
       
         , 
        
        
        
          f 
         
        
          y 
         
        
       
         ) 
        
       
      
        (f_x, f_y) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 是相机的焦距，分别在图像平面的 x 轴和 y 轴上的缩放因子；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         ( 
        
        
        
          c 
         
        
          x 
         
        
       
         , 
        
        
        
          c 
         
        
          y 
         
        
       
         ) 
        
       
      
        (c_x, c_y) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">x</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">y</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 是图像平面的主点，通常是图像中心。</p> 
<p>在这个模型中，三维空间中的点首先通过针孔（理想化的一个小孔）投影到一个假想的图像平面上，然后根据相机的内参（如焦距和主点位置）转换到实际的图像坐标系中。这个过程虽然简化了现实世界的复杂性，但为计算机视觉提供了一个强大的基础模型，用于理解和处理三维世界与二维图像之间的关系。</p> 
<h4><a id="112__37"></a>1.1.2 坐标系</h4> 
<p>在相机标定和计算机视觉领域中，重要的是理解和处理不同的坐标系，尤其是<strong>世界坐标系</strong>和<strong>相机坐标系</strong>。</p> 
<ol><li><strong>世界坐标系（World Coordinate System）</strong>：</li></ol> 
<blockquote> 
 <ul><li>这是一个固定的坐标系，通常用于描述真实世界中对象的位置。</li><li>世界坐标系是一个参考坐标系，用于定义对象在空间中的绝对位置。</li><li>它是一个三维坐标系，通常以某个方便的点作为原点，如场景的一个角或者某个特定的地标。</li></ul> 
</blockquote> 
<ol start="2"><li><strong>相机坐标系（Camera Coordinate System）</strong>：</li></ol> 
<blockquote> 
 <ul><li>相机坐标系是一个以相机为中心的坐标系，用于描述相机视角下点的位置。</li><li>在这个坐标系中，原点通常位于相机的光学中心，x轴和y轴分别平行于相机的图像平面，而z轴则沿着相机的视线方向。</li><li>相机坐标系是相对于相机位置和方向的，因此当相机移动时，相机坐标系也会随之移动。</li></ul> 
</blockquote> 
<h3><a id="12__52"></a>1.2 相机内参与外参</h3> 
<p>在相机标定中，理解和确定相机的内参（Intrinsic Parameters）和外参（Extrinsic Parameters）是至关重要的。这两组参数共同定义了从三维世界坐标系到二维图像坐标系的完整映射过程。内参和外参的准确获取是计算机视觉应用成功的关键。例如，在增强现实中，为了将虚拟对象正确地叠加在真实世界的图像上，必须精确知道相机的位置和朝向（外参），以及如何将三维空间正确映射到二维图像上（内参）。</p> 
<h4><a id="121__55"></a>1.2.1 内部参数</h4> 
<p>内部参数（Intrinsic Parameters）描述的是相机本身的特性，这些参数与相机的位置和朝向无关。它们主要包括：</p> 
<blockquote> 
 <ol><li> <p><strong>焦距</strong>：相机镜头的焦距，通常表示为图像平面上的像素单位。焦距影响图像的放大程度。</p> </li><li> <p><strong>主点坐标</strong>：图像传感器上，成像中心点（通常接近图像中心）的坐标。这个点是三维世界中的“相机中心”在图像平面上的映射。</p> </li><li> <p><strong>畸变系数</strong>：包括径向畸变和切向畸变参数，用于描述和校正由于镜头设计和组装不完美造成的图像畸变。</p> </li></ol> 
</blockquote> 
<p>内参是通过相机标定过程获取的，它们一旦被确定，对于同一相机在不同情况下都是固定的。</p> 
<h4><a id="122__66"></a>1.2.2 外部参数</h4> 
<p>外部参数（Extrinsic Parameters）描述的是相机相对于世界坐标系的位置和姿态。这些参数与相机如何放置和指向有关。它们包括：</p> 
<blockquote> 
 <ol><li> <p><strong>旋转矩阵</strong>：描述了相机从世界坐标系到相机坐标系的旋转。</p> </li><li> <p><strong>平移向量</strong>：描述了世界坐标系原点到相机坐标系原点（即相机光学中心）的平移。</p> </li></ol> 
</blockquote> 
<p>外参是场景依赖的，即每次相机位置或方向改变时，外参也需要重新确定。</p> 
<h3><a id="13__75"></a>1.3 镜头畸变</h3> 
<p>镜头畸变（Lens Distortion）是相机镜头无法完美映射现实世界到图像平面上的一种表现，它导致了图像的几何形状与实际物体的形状存在差异。在计算机视觉和相机标定中，处理镜头畸变是非常重要的一部分。</p> 
<ol><li> <p><strong>畸变类型</strong>：</p> 
  <ul><li><strong>径向畸变（Radial Distortion）</strong>：最常见的畸变类型，通常表现为图像的边缘部分比中心部分更加扭曲。在径向畸变中，图像中的直线可能呈现为曲线。</li><li><strong>切向畸变（Tangential Distortion）</strong>：由于镜头和图像感应器之间的不完美平行对齐，可能导致图像某些部分被稍微偏移。</li></ul> </li><li> <p><strong>畸变校正</strong>：</p> 
  <ul><li>通过相机标定可以获得畸变参数，然后利用这些参数进行畸变校正，以恢复图像的真实几何结构。</li><li>校正算法通常会调整图像中的每个像素位置，以补偿畸变效果。</li></ul> </li></ol> 
<p>下面是径向畸变图例，分别是：正径向畸变，原图，负径向畸变<br> <img src="https://images2.imgbox.com/57/c1/XhRiVuLm_o.png" alt="畸变图片" width="900"><br> 径向畸变代码实现：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2


<span class="token keyword">def</span> <span class="token function">apply_radial_distortion</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> k1<span class="token punctuation">,</span> k2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    height<span class="token punctuation">,</span> width <span class="token operator">=</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token comment"># 计算图像中心</span>
    center_x<span class="token punctuation">,</span> center_y <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> height <span class="token operator">/</span> <span class="token number">2</span>

    <span class="token comment"># 准备畸变后的图像</span>
    distorted_image <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros_like<span class="token punctuation">(</span>image<span class="token punctuation">)</span>

    <span class="token comment"># 遍历每个像素</span>
    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># 计算相对于中心的坐标</span>
            x <span class="token operator">=</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> center_x<span class="token punctuation">)</span> <span class="token operator">/</span> center_x
            y <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> center_y<span class="token punctuation">)</span> <span class="token operator">/</span> center_y
            r <span class="token operator">=</span> np<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>x <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> y <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>

            <span class="token comment"># 应用畸变模型</span>
            x_distorted <span class="token operator">=</span> x <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> k1 <span class="token operator">*</span> r <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> k2 <span class="token operator">*</span> r <span class="token operator">**</span> <span class="token number">4</span><span class="token punctuation">)</span>
            y_distorted <span class="token operator">=</span> y <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> k1 <span class="token operator">*</span> r <span class="token operator">**</span> <span class="token number">2</span> <span class="token operator">+</span> k2 <span class="token operator">*</span> r <span class="token operator">**</span> <span class="token number">4</span><span class="token punctuation">)</span>

            <span class="token comment"># 计算畸变后的像素位置，并确保它在图像范围内</span>
            distorted_j <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>center_x <span class="token operator">*</span> <span class="token punctuation">(</span>x_distorted <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            distorted_i <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>center_y <span class="token operator">*</span> <span class="token punctuation">(</span>y_distorted <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

            <span class="token keyword">if</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> distorted_j <span class="token operator">&lt;</span> width <span class="token keyword">and</span> <span class="token number">0</span> <span class="token operator">&lt;=</span> distorted_i <span class="token operator">&lt;</span> height<span class="token punctuation">:</span>
                distorted_image<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">[</span>distorted_i<span class="token punctuation">,</span> distorted_j<span class="token punctuation">]</span>

    <span class="token keyword">return</span> distorted_image


<span class="token comment"># 棋盘格参数</span>
chessboard_size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
square_size <span class="token operator">=</span> <span class="token number">50</span>

<span class="token comment"># 创建画布</span>
image_size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span>
image <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>image_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> image_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">255</span>

<span class="token comment"># 画棋盘格</span>
<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>chessboard_size<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>chessboard_size<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        top_left_x <span class="token operator">=</span> j <span class="token operator">*</span> square_size
        top_left_y <span class="token operator">=</span> i <span class="token operator">*</span> square_size
        bottom_right_x <span class="token operator">=</span> <span class="token punctuation">(</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> square_size
        bottom_right_y <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> square_size
        color <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> j<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>
        cv2<span class="token punctuation">.</span>rectangle<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token punctuation">(</span>top_left_x<span class="token punctuation">,</span> top_left_y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>bottom_right_x<span class="token punctuation">,</span> bottom_right_y<span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># 应用径向畸变</span>
distorted_image3 <span class="token operator">=</span> apply_radial_distortion<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.05</span><span class="token punctuation">)</span>
distorted_image4 <span class="token operator">=</span> apply_radial_distortion<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token number">0.05</span><span class="token punctuation">)</span>

<span class="token comment"># 显示原始和畸变后的图像</span>
cv2<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span><span class="token string">'Distorted Image'</span><span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>hconcat<span class="token punctuation">(</span><span class="token punctuation">[</span>distorted_image3<span class="token punctuation">,</span>
                                           np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">127</span><span class="token punctuation">,</span>
                                           image<span class="token punctuation">,</span>
                                           np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">127</span><span class="token punctuation">,</span>
                                           distorted_image4<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>waitKey<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span>destroyAllWindows<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="14__158"></a>1.4 透视变换</h3> 
<p>透视变换（Perspective Transformation）是一种用于描述和实现三维空间中物体在二维图像平面上投影的数学变换。在计算机视觉中，它用于模拟相机如何捕捉到三维世界，并且是理解图像和空间关系的重要部分。</p> 
<ol><li> <p><strong>变换原理</strong>：</p> 
  <ul><li>透视变换考虑了物体距离相机远近不同导致的视觉效果，即远处的物体看起来比近处的物体小。</li><li>这种变换通常不是线性的，需要通过特定的数学公式进行描述。</li></ul> </li><li> <p><strong>应用</strong>：</p> 
  <ul><li>在计算机图形学和计算机视觉中，透视变换广泛应用于图像的矫正、三维重建、增强现实（AR）和虚拟现实（VR）等领域。</li><li>通过透视变换，可以将一张平面图像转换为具有不同视角或视点的图像，或者用于校正图像中的透视畸变。</li></ul> </li></ol> 
<p>理解镜头畸变和透视变换对于进行高精度的图像处理和分析至关重要，特别是在需要从图像中恢复或理解三维场景信息的应用中。</p> 
<h3><a id="15__172"></a>1.5 标定的重要性和应用场景</h3> 
<p>相机标定在计算机视觉领域扮演着至关重要的角色。它不仅影响着图像分析和处理的准确性，还是许多高级视觉应用成败的关键。以下是相机标定的一些重要性和应用场景：</p> 
<blockquote> 
 <ol><li> <p><strong>提高图像分析准确性</strong>：通过标定，可以精确了解相机的内参和外参，从而在图像处理中更准确地处理畸变，校正透视，从而提高图像分析的准确性。</p> </li><li> <p><strong>机器人导航</strong>：在机器人导航中，精确的相机标定能够帮助机器人更准确地理解其环境，包括物体的大小、位置和空间关系，从而实现更加有效和安全的导航。</p> </li><li> <p><strong>自动驾驶汽车</strong>：自动驾驶汽车依赖于相机来感知周围环境。准确的标定是确保汽车能够正确理解其所在环境，如道路标志、障碍物、行人和其他车辆的位置的基础。</p> </li><li> <p><strong>增强现实（AR）</strong>：在增强现实应用中，正确的相机标定允许虚拟对象与现实世界的图像无缝融合，提供更加真实的用户体验。</p> </li><li> <p><strong>单目视觉应用</strong>：虽然单目系统无法直接获取深度信息，但通过标定获得的相机参数可以用来估计场景的几何结构和物体的大致深度。</p> </li><li> <p><strong>双目视觉应用</strong>：在双目视觉系统中，两个相机的精确标定是计算物体深度和进行三维重建的关键。它允许系统通过比较来自两个不同视点的图像来估计物体的确切位置和深度。</p> </li><li> <p><strong>高级图像处理</strong>：在高级图像处理领域，如三维建模、场景重建、物体追踪等，准确的相机标定是实现高质量输出的基础。</p> </li></ol> 
</blockquote> 
<p>相机标定不仅是理解和分析图像的基础，也是实现高级计算机视觉功能的关键。在许多高科技领域，如自动化、机器人技术、虚拟现实等，相机标定的作用不可或缺。</p> 
<h2><a id="_192"></a>二、单目视觉</h2> 
<p>在计算机视觉领域，单目视觉是最基本和广泛应用的一种形式。它指的是使用单个相机捕捉和分析图像。</p> 
<h3><a id="21__195"></a>2.1 单目视觉的原理</h3> 
<p>单目视觉系统主要依靠一个相机来捕获图像，并通过计算机视觉算法来解释和分析这些图像。虽然单目视觉无法直接提供深度信息，但它在处理二维图像、进行图像识别和分类等方面非常有效。</p> 
<h4><a id="211__198"></a>2.1.1 单目视觉的原理</h4> 
<p>单目视觉的核心原理是从二维图像中提取有用信息，用于理解和分析三维世界。这通常涉及以下几个步骤：</p> 
<ol><li> <p><strong>图像捕获</strong>：相机捕获现实世界的二维表示。</p> </li><li> <p><strong>特征提取</strong>：算法识别图像中的关键特征点或边缘。这可能包括线条、角点、轮廓等。</p> </li><li> <p><strong>特征匹配与跟踪</strong>：在连续的图像帧中跟踪这些特征点，以了解物体或场景的动态变化。</p> </li><li> <p><strong>三维场景恢复</strong>：虽然单目视觉不能直接测量深度，但可以通过其他方法如运动视差、尺度不变特征变换（SIFT）等来间接推断深度信息。</p> </li><li> <p><strong>图像理解</strong>：应用特定的算法（如物体检测、图像分类）来解释图像内容。</p> </li></ol> 
<h4><a id="212__212"></a>2.1.2 单目视觉的公式</h4> 
<p>在单目视觉中，一个重要的概念是<strong>针孔相机模型</strong>，这是最简单的成像模型，用于描述三维世界如何映射到二维图像上。其数学表示为：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          p 
         
        
          = 
         
        
          K 
         
        
          [ 
         
        
          R 
         
        
          ∣ 
         
        
          t 
         
        
          ] 
         
        
          P 
         
        
       
         p = K [R | t] P 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">K</span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="mord">∣</span><span class="mord mathnormal">t</span><span class="mclose">]</span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span></span></span></span></span></span></p> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          P 
         
        
       
         P 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span></span></span></span></span> 表示三维世界中的一个点。</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          p 
         
        
       
         p 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></span> 是该点在图像平面上的投影。</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          K 
         
        
       
         K 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">K</span></span></span></span></span> 是内部参数矩阵，包含焦距和主点坐标。</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          R 
         
        
       
         R 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          t 
         
        
       
         t 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span> 是相机的旋转和平移向量，代表外部参数。</li></ul> 
<h4><a id="213__223"></a>2.1.3 应用领域</h4> 
<p>单目视觉系统广泛应用于多个领域，包括：</p> 
<blockquote> 
 <ul><li><strong>监控系统</strong>：利用单目相机进行实时监控，识别和跟踪人或物体。</li><li><strong>自动驾驶辅助</strong>：用于车辆的车道检测、交通标志识别等。</li><li><strong>机器人导航</strong>：帮助机器人理解环境，进行路径规划和避障。</li><li><strong>增强现实</strong>：在现实世界的图像上叠加虚拟信息。</li></ul> 
</blockquote> 
<h3><a id="22__232"></a>2.2 实现单目视觉标定的步骤</h3> 
<p>单目视觉标定是一个关键过程，它帮助我们获取相机的内部参数和畸变参数，从而准确地理解相机如何捕获现实世界中的场景。以下是实现单目视觉标定的基本步骤。</p> 
<h4><a id="221__235"></a>2.2.1 准备标定板</h4> 
<p>标定板是相机标定中不可或缺的工具，它提供了一个已知结构的参考模式，以便于在图像中识别和定位。最常用的标定板是棋盘格和圆点格。</p> 
<ul><li><strong>棋盘格</strong>：由交替的黑白方块组成，适用于角点检测。</li><li><strong>圆点格</strong>：由一系列的圆点组成，适用于更精确的特征点定位。</li></ul> 
<p>选择标定板时，需要确保标定板的尺寸和模式对于所使用的相机和应用场景是合适的。</p> 
<h4><a id="222__244"></a>2.2.2 捕获标定图像</h4> 
<p>使用相机从不同的角度和位置拍摄标定板。这一步骤至关重要，因为它直接影响到标定的准确性和鲁棒性。一般建议：</p> 
<ul><li>从多个角度和距离拍摄标定板，以确保足够的视角覆盖。</li><li>确保标定板在每张图像中都清晰可见。</li></ul> 
<h4><a id="223__251"></a>2.2.3 提取角点</h4> 
<p>对于每张拍摄的标定板图像，需要在图像中识别和提取标定板上的角点或特征点。这通常通过使用OpenCV中的特定函数完成，如 <code>cv2.findChessboardCorners</code> 用于棋盘格。</p> 
<h4><a id="224__255"></a>2.2.4 计算内参和畸变参数</h4> 
<p>一旦收集了足够的图像并从中提取了特征点，接下来使用OpenCV中的 <code>cv2.calibrateCamera</code> 函数计算相机的内参和畸变参数。内参包括焦距和主点坐标，而畸变参数则描述了镜头的畸变特性。</p> 
<p>这些参数是理解相机如何捕捉图像的关键，对于后续的图像处理和分析至关重要。例如，通过这些参数，可以对捕获的图像进行畸变校正，从而获得更为准确的视觉数据。</p> 
<h3><a id="23__260"></a>2.3 单目视觉相机标定实战</h3> 
<p>下面通过一个实例来演示如何在OpenCV中进行单目视觉相机标定。<br> <img src="https://images2.imgbox.com/31/d5/sMWFthry_o.jpg" alt="棋盘格图片" width="600"></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token comment"># 棋盘格参数</span>
cross_points <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
square_size <span class="token operator">=</span> <span class="token number">1.0</span>  <span class="token comment"># 假设棋盘格每个方块的大小为1.0单位</span>

<span class="token comment"># 加载图像</span>
image_path <span class="token operator">=</span> <span class="token string">'Chessboard_Photo.jpg'</span>
image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>image_path<span class="token punctuation">)</span>
image <span class="token operator">=</span> cv2<span class="token punctuation">.</span>resize<span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>image<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>

<span class="token comment"># 寻找棋盘格角点</span>
ret<span class="token punctuation">,</span> corners <span class="token operator">=</span> cv2<span class="token punctuation">.</span>findChessboardCorners<span class="token punctuation">(</span>gray<span class="token punctuation">,</span> cross_points<span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>

<span class="token comment"># 如果找到足够的角点，则进行标定</span>
<span class="token keyword">if</span> ret <span class="token operator">==</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
    <span class="token comment"># 准备对象点</span>
    objp <span class="token operator">=</span> np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span>cross_points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">*</span> cross_points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">)</span>
    objp<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> np<span class="token punctuation">.</span>mgrid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span>cross_points<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span>cross_points<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>T<span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    objp <span class="token operator">*=</span> square_size

    <span class="token comment"># 将对象点和图像点放入数组中</span>
    objpoints <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 真实世界中的点</span>
    imgpoints <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment"># 图像中的点</span>

    objpoints<span class="token punctuation">.</span>append<span class="token punctuation">(</span>objp<span class="token punctuation">)</span>
    imgpoints<span class="token punctuation">.</span>append<span class="token punctuation">(</span>corners<span class="token punctuation">)</span>

    <span class="token comment"># 进行相机标定</span>
    ret<span class="token punctuation">,</span> mtx<span class="token punctuation">,</span> dist<span class="token punctuation">,</span> rvecs<span class="token punctuation">,</span> tvecs <span class="token operator">=</span> cv2<span class="token punctuation">.</span>calibrateCamera<span class="token punctuation">(</span>objpoints<span class="token punctuation">,</span> imgpoints<span class="token punctuation">,</span> gray<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token boolean">None</span><span class="token punctuation">)</span>

    <span class="token comment"># 标记角点并显示</span>
    img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>drawChessboardCorners<span class="token punctuation">(</span>image<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cross_points<span class="token punctuation">,</span> corners<span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># 透视变换</span>
    <span class="token comment"># 原始图像尺寸</span>
    h<span class="token punctuation">,</span> w <span class="token operator">=</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>

    <span class="token comment"># 获取角点的坐标</span>
    top_left<span class="token punctuation">,</span> top_right<span class="token punctuation">,</span> bottom_right<span class="token punctuation">,</span> bottom_left <span class="token operator">=</span> corners<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> corners<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    pts1 <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span>top_left<span class="token punctuation">,</span> top_right<span class="token punctuation">,</span> bottom_right<span class="token punctuation">,</span> bottom_left<span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># 计算四个角点到图像边缘的最大距离</span>
    maxDistToLeftEdge <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>top_left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> bottom_left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    maxDistToRightEdge <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>w <span class="token operator">-</span> top_right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> w <span class="token operator">-</span> bottom_right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    maxDistToTopEdge <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>top_left<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> top_right<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    maxDistToBottomEdge <span class="token operator">=</span> <span class="token builtin">max</span><span class="token punctuation">(</span>h <span class="token operator">-</span> bottom_left<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> h <span class="token operator">-</span> bottom_right<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># 使用最大距离来定义目标图像的大小</span>
    maxWidth <span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span>w <span class="token operator">+</span> maxDistToLeftEdge <span class="token operator">+</span> maxDistToRightEdge<span class="token punctuation">)</span>
    maxHeight <span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">(</span> h <span class="token operator">+</span> maxDistToTopEdge <span class="token operator">+</span> maxDistToBottomEdge<span class="token punctuation">)</span>

    <span class="token comment"># 计算目标点的坐标，使整张图片在透视变换后能居中显示</span>
    pts2 <span class="token operator">=</span> np<span class="token punctuation">.</span>float32<span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span>maxDistToLeftEdge<span class="token punctuation">,</span> maxDistToTopEdge<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>maxWidth <span class="token operator">-</span> maxDistToRightEdge <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> maxDistToTopEdge<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>maxWidth <span class="token operator">-</span> maxDistToRightEdge <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> maxHeight <span class="token operator">-</span> maxDistToBottomEdge <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span>maxDistToLeftEdge<span class="token punctuation">,</span> maxHeight <span class="token operator">-</span> maxDistToBottomEdge <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment"># 获取透视变换矩阵</span>
    M <span class="token operator">=</span> cv2<span class="token punctuation">.</span>getPerspectiveTransform<span class="token punctuation">(</span>pts1<span class="token punctuation">,</span> pts2<span class="token punctuation">)</span>

    <span class="token comment"># 应用透视变换</span>
    dst_perspective <span class="token operator">=</span> cv2<span class="token punctuation">.</span>warpPerspective<span class="token punctuation">(</span>image<span class="token punctuation">,</span> M<span class="token punctuation">,</span> <span class="token punctuation">(</span>maxWidth<span class="token punctuation">,</span> maxHeight<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># 显示原图及透视变换后的图片</span>
    plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Original Image with Corners'</span><span class="token punctuation">)</span>

    plt<span class="token punctuation">.</span>subplot<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>imshow<span class="token punctuation">(</span>cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>dst_perspective<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2RGB<span class="token punctuation">)</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">'Perspective Transform'</span><span class="token punctuation">)</span>

    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"找不到足够的角点，请检查图片是否适合棋盘格标定。"</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/a5/71/3mQAWToE_o.png" alt="Perspective Transform" width="900"></p> 
<h2><a id="_354"></a>三、双目视觉</h2> 
<p>双目视觉是计算机视觉领域的一个重要分支，它利用两个相机从略微不同的角度捕捉图像，模拟人类的双眼视觉。这种方法在获取深度信息和三维场景重建方面比单目视觉有着显著优势。</p> 
<h3><a id="31__358"></a>3.1 双目视觉的原理与应用</h3> 
<p>双目视觉系统模拟了人类的双眼视觉机制，通过两个空间上分开的相机捕获同一场景，从而获得场景的深度信息。以下是双目视觉的基本原理和其应用的详细介绍。</p> 
<h4><a id="311__362"></a>3.1.1 双目视觉的原理</h4> 
<p>双目视觉的核心在于利用两个相机的视差来计算深度信息。视差是指同一物体在两个相机视角中的图像位置差异。以下是双目视觉的数学表示：</p> 
<ul><li>假设两个相机分别位于 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           C 
          
         
           1 
          
         
        
       
         C_1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           C 
          
         
           2 
          
         
        
       
         C_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，它们观察同一物体点 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          P 
         
        
       
         P 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span></span></span></span></span> 在两个相机成像平面上的投影分别为 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           p 
          
         
           1 
          
         
        
       
         p_1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           p 
          
         
           2 
          
         
        
       
         p_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。</li><li>设 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          b 
         
        
       
         b 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></span> 为两相机间的基线距离（即 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           C 
          
         
           1 
          
         
        
       
         C_1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           C 
          
         
           2 
          
         
        
       
         C_2 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0715em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 之间的距离）。</li><li>设 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          f 
         
        
       
         f 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8889em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span></span></span></span></span> 为相机的焦距。</li></ul> 
<p>那么，物体点 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         P 
        
       
      
        P 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span></span></span></span></span> 的深度 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         Z 
        
       
      
        Z 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">Z</span></span></span></span></span> 可以通过以下公式计算：</p> 
<p><span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          Z 
         
        
          = 
         
         
          
          
            b 
           
          
            × 
           
          
            f 
           
          
         
           d 
          
         
        
       
         Z = \frac{b \times f}{d} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">Z</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.0574em; vertical-align: -0.686em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3714em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">d</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal">b</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.686em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
<p>其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
      
        d 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span> 是两个相机成像平面上对应点 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          p 
         
        
          1 
         
        
       
      
        p_1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 和 <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          p 
         
        
          2 
         
        
       
      
        p_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.625em; vertical-align: -0.1944em;"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 之间的视差。</p> 
<h4><a id="312__376"></a>3.1.2 双目视觉的应用</h4> 
<p>双目视觉系统的应用非常广泛，主要包括：</p> 
<ol><li><strong>三维重建</strong>：通过计算物体的深度信息，可以重建场景的三维结构，应用于虚拟现实、游戏等领域。</li><li><strong>机器人导航</strong>：利用深度信息帮助机器人进行空间感知和路径规划，特别适用于自动化和工业机器人。</li><li><strong>增强现实</strong>：结合真实场景和计算机生成的图像，需要精确的空间和深度信息以提供更真实的体验。</li><li><strong>自动驾驶汽车</strong>：为自动驾驶系统提供深度感知能力，用于障碍物检测、车道识别和环境理解。</li></ol> 
<p>这些应用领域中，双目视觉的深度感知能力发挥着至关重要的作用，为智能系统提供了比单目视觉更为丰富和准确的三维空间信息。</p> 
<h3><a id="32__387"></a>3.2 双目视觉与单目视觉的对比</h3> 
<p>在计算机视觉系统中，单目视觉和双目视觉都扮演着重要的角色，但它们在深度信息获取和处理方面有着本质的区别。以下是这两种视觉系统的主要比较：</p> 
<p><strong>单目视觉</strong></p> 
<blockquote> 
 <ul><li><strong>原理</strong>：使用一个相机捕获图像，依赖于二维图像数据。</li><li><strong>深度获取</strong>：单目视觉系统依赖于算法推断深度信息，例如通过分析物体大小变化、纹理梯度、遮挡关系等来估算深度。</li><li><strong>优势</strong>： 
   <ul><li><strong>成本效益</strong>：需要的硬件少，成本较低。</li><li><strong>简单性</strong>：系统设置和处理流程相对简单。</li></ul> </li><li><strong>局限性</strong>： 
   <ul><li><strong>深度信息不准确</strong>：算法推断的深度不如物理测量准确。</li><li><strong>对环境依赖大</strong>：在纹理丰富或明显的场景中效果较好。</li></ul> </li></ul> 
</blockquote> 
<p><strong>双目视觉</strong></p> 
<blockquote> 
 <ul><li><strong>原理</strong>：使用两个相机从不同角度捕获同一场景的图像，模拟人类的双眼视觉。</li><li><strong>深度获取</strong>：双目视觉系统通过比较两个视角的图像差异来直接计算深度信息，通常使用视差映射（disparity map）来表示。</li><li><strong>优势</strong>： 
   <ul><li><strong>深度信息准确</strong>：能够直接测量并计算深度信息，结果更准确。</li><li><strong>三维感知能力</strong>：更适合于进行空间定位和三维重建。</li></ul> </li><li><strong>局限性</strong>： 
   <ul><li><strong>成本和复杂性</strong>：需要更多的硬件和复杂的校准过程。</li><li><strong>计算要求更高</strong>：处理两个图像和计算深度需要更高的计算能力。</li></ul> </li></ul> 
</blockquote> 
<p>尽管单目视觉在成本和简易性方面有优势，但它在深度感知和准确性方面受到限制。相比之下，双目视觉虽然在硬件要求和处理复杂度上更高，但能提供更精确的深度信息和三维空间感知能力。选择哪一种视觉系统取决于应用的具体需求、预算和预期的精度。</p> 
<h3><a id="33__413"></a>3.3 实现双目视觉标定的步骤</h3> 
<p>双目视觉标定不仅涉及到每个相机的内部参数，还需要对两个相机间的关系（如相对位置和方向）进行校准。基本步骤包括：</p> 
<ol><li><strong>单独标定每个相机</strong>：首先分别对两个相机进行单目视觉标定。</li><li><strong>标定相机之间的关系</strong>：计算两个相机之间的旋转和平移矩阵，这被称为立体校正。</li><li><strong>立体校正和重投影</strong>：校正两个相机的图像，使其在同一平面上对齐，便于后续的深度计算。</li></ol> 
<h3><a id="34_OpenCV_421"></a>3.4 OpenCV中的相关函数与方法</h3> 
<p>OpenCV提供了一系列函数来支持双目视觉的标定和深度计算：</p> 
<ul><li><code>cv2.stereoCalibrate</code>：用于计算两个相机之间的关系。</li><li><code>cv2.stereoRectify</code>：进行立体校正。</li><li><code>cv2.createStereoBM</code> 或 <code>cv2.createStereoSGBM</code>：创建立体匹配对象以计算深度图。</li></ul> 
<p>目前手头还没有双摄像头，等有资金了配置一套再补充这部分内容 o(╥﹏╥)o 。</p> 
<hr> 
<h2><a id="_432"></a>总结</h2> 
<p>本博客简要介绍了相机标定的基本原理、单目视觉和双目视觉的关键概念及其在实际中的应用。从相机模型和坐标系的基础知识出发，我们探讨了内外参数的重要性，以及如何处理镜头畸变和透视变换。这为理解相机如何捕获和转换图像提供了坚实的理论基础。</p> 
<p>在单目视觉部分，我们深入了解了其工作原理，以及单目视觉在各个领域的广泛应用。同时，详细介绍了实现单目视觉标定的步骤，从准备标定板到计算内参和畸变参数，提供了实战指导。</p> 
<p>对于双目视觉，我们探讨了其原理及应用，特别强调了其在深度信息获取上的优势。此外，通过双目视觉与单目视觉的对比，突显了双目视觉在三维空间感知方面的独特价值。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1202aa2c2e373027a83018e75ea1e803/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">贪知梦连练</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/227e2d0004b94a9f9e608fb4efc30378/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">缓存击穿、雪崩、穿透</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>