<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>keil MDK5插件推荐-Clang-format代码格式化插件 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="keil MDK5插件推荐-Clang-format代码格式化插件" />
<meta property="og:description" content="前言 本文将介绍一款名为 Clang-format 的代码格式化工具，并详细讲解如何在 Keil MDK5 中使用 Clang-format 插件进行代码格式化，同时展示 Clang-format 对代码的格式化效果。如果您是一名 C/C&#43;&#43; 程序员，本文对您的日常开发工作会有所帮助。
一. Clang-format简介 Clang-format 是一个用于代码格式化的工具，可以帮助开发人员在不同的编程语言和编码风格之间实现一致的代码样式。它支持多种编程语言，包括 C&#43;&#43;、Java、JavaScript 和 Objective-C 等，并提供了丰富的代码格式化选项，可以满足不同团队和个人的编码风格需求。
Clang-format 是基于 LLVM（Low Level Virtual Machine，低级虚拟机） 的 Clang 编译器实现的，它使用了 Clang 的解析引擎来理解代码结构，并根据配置文件中指定的规则对代码进行格式化。它可以通过命令行工具或编辑器插件进行使用，非常易于集成到开发环境中。
使用 Clang-format 可以带来很多好处，例如：
提高代码的可读性和一致性。减少代码审查中关于格式问题的讨论和争议。使代码更易于维护和修改。 总之，Clang-format 是一个强大、灵活、易于使用的代码格式化工具，可以帮助开发人员在编写和维护代码时提高效率和质量。
二. Clang-format下载 最新版本下载网址：https://github.com/llvm/llvm-project/releases
打开LLVM的Github版本发布页，现在（20230517）的最新版本是16.0.4，点击Show all assets展开所有条目，再找到LLVM-xx-win64.exe，点击下载。
下载得到LLVM-xx-win64.exe文件。下面介绍如何从中提取出Clang-format.exe文件。
第一步，将文件后缀名.exe改为.zip。
第二步，解压zip文件。
第三步，在解压后的文件夹/bin中，找到Clang-format.exe，这就是我们需要的代码格式化程序。
三. Clang-format配置 Clang-format自带六种配置：
LLVM：这是默认配置，遵循 LLVM 项目的代码风格。
Google：遵循 Google 的 C&#43;&#43; 代码风格。
Chromium：遵循 Chromium 项目的代码风格。
Microsoft：遵循 Microsoft 的 C&#43;&#43; 代码风格。
Mozilla：遵循 Mozilla 项目的代码风格。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1d338f97449c142ebe1c0d32ef97afbd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-18T22:35:08+08:00" />
<meta property="article:modified_time" content="2023-05-18T22:35:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">keil MDK5插件推荐-Clang-format代码格式化插件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <img src="https://images2.imgbox.com/a0/2c/7tmdu3iZ_o.png"> 
<hr> 
<h3><a id="center_5"></a> 
 <center>
   前言 
 </center></h3> 
<p>本文将介绍一款名为 Clang-format 的代码格式化工具，并详细讲解如何在 Keil MDK5 中使用 Clang-format 插件进行代码格式化，同时展示 Clang-format 对代码的格式化效果。如果您是一名 C/C++ 程序员，本文对您的日常开发工作会有所帮助。</p> 
<hr> 
<h3><a id="center_Clangformat_11"></a> 
 <center>
   一. Clang-format简介 
 </center></h3> 
<p>Clang-format 是一个用于代码格式化的工具，可以帮助开发人员在不同的编程语言和编码风格之间实现一致的代码样式。它支持多种编程语言，包括 C++、Java、JavaScript 和 Objective-C 等，并提供了丰富的代码格式化选项，可以满足不同团队和个人的编码风格需求。</p> 
<p>Clang-format 是基于 LLVM（Low Level Virtual Machine，低级虚拟机） 的 Clang 编译器实现的，它使用了 Clang 的解析引擎来理解代码结构，并根据配置文件中指定的规则对代码进行格式化。它可以通过命令行工具或编辑器插件进行使用，非常易于集成到开发环境中。</p> 
<p>使用 Clang-format 可以带来很多好处，例如：</p> 
<ul><li>提高代码的可读性和一致性。</li><li>减少代码审查中关于格式问题的讨论和争议。</li><li>使代码更易于维护和修改。</li></ul> 
<p>总之，Clang-format 是一个强大、灵活、易于使用的代码格式化工具，可以帮助开发人员在编写和维护代码时提高效率和质量。</p> 
<hr> 
<h3><a id="center_Clangformat_27"></a> 
 <center>
   二. Clang-format下载 
 </center></h3> 
<p>最新版本下载网址：https://github.com/llvm/llvm-project/releases</p> 
<p>打开LLVM的Github版本发布页，现在（20230517）的最新版本是16.0.4，点击<strong>Show all assets</strong>展开所有条目，再<strong>找到LLVM-xx-win64.exe，点击下载</strong>。</p> 
<img src="https://images2.imgbox.com/e7/9f/O769bRqQ_o.png"> 
<img src="https://images2.imgbox.com/9c/e0/9uoSJ6u3_o.png"> 
<p>下载得到LLVM-xx-win64.exe文件。下面介绍如何<strong>从中提取出Clang-format.exe文件</strong>。</p> 
<p>第一步，将文件后缀名.exe改为.zip。</p> 
<img src="https://images2.imgbox.com/77/f6/JhSVKKPH_o.png"> 
<p>第二步，解压zip文件。</p> 
<img src="https://images2.imgbox.com/b7/52/OLzA3Bp2_o.png"> 
<p>第三步，<strong>在解压后的文件夹/bin中，找到Clang-format.exe</strong>，这就是我们需要的代码格式化程序。</p> 
<img src="https://images2.imgbox.com/22/4d/n2d2Kn8S_o.png"> 
<hr> 
<h3><a id="center_Clangformat_53"></a> 
 <center>
   三. Clang-format配置 
 </center></h3> 
<p>Clang-format自带六种配置：</p> 
<ol><li> <p><code>LLVM</code>：这是默认配置，遵循 LLVM 项目的代码风格。</p> </li><li> <p><code>Google</code>：遵循 Google 的 C++ 代码风格。</p> </li><li> <p><code>Chromium</code>：遵循 Chromium 项目的代码风格。</p> </li><li> <p><code>Microsoft</code>：遵循 Microsoft 的 C++ 代码风格。</p> </li><li> <p><code>Mozilla</code>：遵循 Mozilla 项目的代码风格。</p> </li><li> <p><code>WebKit</code>：遵循 WebKit 项目的代码风格。</p> </li></ol> 
<p>导出某种风格（以Microsoft为例）的配置的命令为：</p> 
<pre><code class="prism language-c">F<span class="token operator">:</span>\Onedrive\myPortableSoftware\Clang<span class="token operator">-</span>format\clang<span class="token operator">-</span>format<span class="token punctuation">.</span>exe <span class="token operator">-</span>style<span class="token operator">=</span><span class="token string">"Microsoft"</span> <span class="token operator">--</span>dump<span class="token operator">-</span>config <span class="token operator">&gt;</span> F<span class="token operator">:</span>\Onedrive\myPortableSoftware\Clang<span class="token operator">-</span>format\Microsoft<span class="token punctuation">.</span>clang<span class="token operator">-</span>format
</code></pre> 
<p><strong>推荐基于某种自带的配置去修改，而不是自己从零开始配置</strong>。我个人基于Microsoft的风格修改成了我个人满意的代码风格。</p> 
<p>想了解如何配置clang format，可参考官方文档：<a href="https://clang.llvm.org/docs/ClangFormatStyleOptions.html" rel="nofollow">https://clang.llvm.org/docs/ClangFormatStyleOptions.html</a></p> 
<img src="https://images2.imgbox.com/b9/9a/Lpso9X6W_o.png"> 
<hr> 
<h3><a id="center_KeilClangformat_79"></a> 
 <center>
   四. 在Keil中设置Clang-format 
 </center></h3> 
<p>配置Clang-format的方法与配置Astyle一样。</p> 
<p>打开Keil，<kbd>Tools</kbd> -&gt; <kbd>Customize Tools Menu…</kbd>，</p> 
<img src="https://images2.imgbox.com/cc/38/Qij7J4th_o.png"> 
<img src="https://images2.imgbox.com/f5/9a/LrznrcYd_o.png"> 
<p>我的Command：F:\Onedrive\myPortableSoftware\Clang-format\clang-format.exe</p> 
<p>我的Arguments如下所示，表示使用指定的xx.clang-format文件配置进行格式化。</p> 
<pre><code class="prism language-c"><span class="token operator">-</span>style<span class="token operator">=</span>file<span class="token operator">:</span>F<span class="token operator">:</span>\Onedrive\myPortableSoftware\Clang<span class="token operator">-</span>format\我的基于Microsoft修改的设置<span class="token punctuation">.</span>clang<span class="token operator">-</span>format <span class="token operator">-</span>i <span class="token operator">!</span>E
</code></pre> 
<p>如果你想使用某种风格（以Microsoft为例）的默认配置，Arguments可为：</p> 
<pre><code class="prism language-c"><span class="token operator">-</span>style<span class="token operator">=</span>Microsoft <span class="token operator">-</span>i <span class="token operator">!</span>E
</code></pre> 
<p>设置完成后可通过<kbd>Tools</kbd> -&gt; <kbd>Clang format Current File</kbd>调用。注意，必须先Ctrl+S保存修改后再调用格式化程序，程序才起作用。</p> 
<img src="https://images2.imgbox.com/fa/e6/5u6ZmcI3_o.png"> 
<p><strong>如果想更方便的调用Clang-format，可以设置快捷键</strong>，方法如下：</p> 
<p><kbd>Edit </kbd>-&gt; <kbd>Configuration…</kbd>，打开配置窗口，在Shorteut Keys界面找到Tools:Astyle Current File，点击<kbd>Create Shortcut</kbd>，输入想设置的快捷键即可。</p> 
<img src="https://images2.imgbox.com/0c/96/ZQLrx9c2_o.png"> 
<hr> 
<h3><a id="center_Clangformat_115"></a> 
 <center>
   五. Clang-format格式化效果展示 
 </center></h3> 
<img src="https://images2.imgbox.com/db/09/Aj7usQ2u_o.gif"> 
<hr> 
<h3><a id="center_VscodeClangformat_121"></a> 
 <center>
   六. 在Vscode中使用Clang-format 
 </center></h3> 
<p>Vscode中对C语言代码进行格式化也可以使用Clang-format，方法如下：</p> 
<p>在扩展商店中搜索C，找到<strong>C/C++ Extension Pack</strong>，安装它。如下图所示。</p> 
<img src="https://images2.imgbox.com/1e/e6/Fb2XMAhV_o.png"> 
<p>此扩展是Microsoft官方扩展，是C/C++、C/C++ Themes、CMake、CMake Tools的合集，所以，想Vscode支持C语言，安装这一个扩展即可。</p> 
<p>打开C/C++扩展设置，选择<strong>格式设置</strong>，可在<strong>Clang format style</strong>中指定格式化风格，为保证keil和Vscode对C语言代码的格式化风格一致，可指定同一文件为风格配置的文件，如：</p> 
<pre><code class="prism language-c">file<span class="token operator">:</span>F<span class="token operator">:</span>\Onedrive\myPortableSoftware\Clang<span class="token operator">-</span>format\我的基于Microsoft修改的设置<span class="token punctuation">.</span>clang<span class="token operator">-</span>format
</code></pre> 
<img src="https://images2.imgbox.com/cb/28/HKVswakN_o.png"> 
<p>另一种方式是<strong>不单独下载clang-format.exe</strong>，就使用Vscode的C/C++扩展中自带的clang-format.exe程序，它一般可以在以下路径中找到：</p> 
<img src="https://images2.imgbox.com/36/14/8EkiJqOK_o.png"> 
<p>不过还是推荐去下载clang-format.exe，这样配置路径可以不变，而Vscode中的clang-format.exe路径会因为插件更新而改变。</p> 
<h3><a id="_Clangformat_145"></a>七. Clang-format程序与设置分享</h3> 
<p>这里和各位同学分享一下clang-format.exe程序（目前版本16.0.4，持续更新以保持最新）、六种默认风格设置、我的基于Microsoft修改的设置 以及 配置选项注释（对各个配置选项的含义都有注释），可帮助各种同学直接使用clang-format.exe与理解配置选项的含义。</p> 
<img src="https://images2.imgbox.com/5b/21/QsL4DHvu_o.png"> 
<p>欢迎大家关注我的公众号：徐晓康的博客，回复以下四位数字获取。</p> 
<p>1520</p> 
<p>建议复制过去不会码错字！</p> 
<hr> 
<img src="https://images2.imgbox.com/ff/e8/yUQMqEbI_o.png"> 
<p><strong>徐晓康的博客</strong>持续分享高质量硬件、FPGA与嵌入式知识，软件，工具等内容，欢迎大家关注。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae7fb59f0341aa0bec142bc23c9db2db/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">51单片机-------实现数字时钟功能</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0809386c68fefdd997afb06be1fee512/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SQL入门--标准 SQL 的书写方式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>