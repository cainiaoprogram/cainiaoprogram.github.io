<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PEMS数据集与.h5文件读取 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PEMS数据集与.h5文件读取" />
<meta property="og:description" content="PEMS（Performance Measurement System）是加利福尼亚州交通管理系统的一部分，提供了用于交通流量和性能测量的数据。PEMS数据集通常提供了大量的交通流量、速度、占有率等方面的时间序列数据。
在PEMS数据集中，数据的格式通常是时间序列格式，其中包含了对交通流量、速度、占有率等指标的观测。这些数据可以以CSV（逗号分隔值）格式或其他结构化的格式呈现。
以PEMS-BAY数据集为例：
HDF5 文件可以包含多个组和数据集，因此上述示例使用 visititems 方法递归地访问文件中的每个项目，并打印它们的类型（Group 或 Dataset）。如果你知道文件结构，也可以直接访问特定的组和数据集。
import h5py file_path = &#39;D:\\车流量预测\\模型\\data\\pems-bay.h5&#39; with h5py.File(file_path,&#39;r&#39;) as file: #查看文件中的组和数据集 def print_hdf5_item(name, obj): if isinstance(obj, h5py.Group): #isinstance用来检查一个对象是否是指定类型的实例 print(f&#34;Group:{name}&#34;) elif isinstance(obj, h5py.Dataset): print(f&#34;Dataset: {name}&#34;) file.visititems(print_hdf5_item) dataset = file[&#39;speed/axis0&#39;] print(f&#34;speed/axis0 = {dataset[()]}&#34;) dataset = file[&#39;speed/axis1&#39;] print(f&#34;speed/axis1 = {dataset[()]}&#34;) dataset = file[&#39;speed/block0_items&#39;] print(f&#34;block0_items = {dataset[()]}&#34;) dataset = file[&#39;speed/block0_values&#39;] print(f&#34;block0_values = {dataset[()]}&#34;) 输出为;
Group:speed Dataset: speed/axis0 Dataset: speed/axis1 Dataset: speed/block0_items Dataset: speed/block0_values speed/axis0 = [400001 400017 400030 400040 400045 400052 400057 400059 400065 400069 400073 400084 400085 400088 400096 400097 400100 400104 400109 400122 ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c66377455cd8574076af0de49b60b751/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-04T19:51:44+08:00" />
<meta property="article:modified_time" content="2023-12-04T19:51:44+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PEMS数据集与.h5文件读取</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>PEMS（Performance Measurement System）是加利福尼亚州交通管理系统的一部分，提供了用于交通流量和性能测量的数据。PEMS数据集通常提供了大量的交通流量、速度、占有率等方面的时间序列数据。</p> 
<p>在PEMS数据集中，数据的格式通常是时间序列格式，其中包含了对交通流量、速度、占有率等指标的观测。这些数据可以以CSV（逗号分隔值）格式或其他结构化的格式呈现。</p> 
<p>以PEMS-BAY数据集为例：</p> 
<p>HDF5 文件可以包含多个组和数据集，因此上述示例使用 <code>visititems</code> 方法递归地访问文件中的每个项目，并打印它们的类型（Group 或 Dataset）。如果你知道文件结构，也可以直接访问特定的组和数据集。</p> 
<pre><code class="hljs">import h5py
file_path = 'D:\\车流量预测\\模型\\data\\pems-bay.h5'
with h5py.File(file_path,'r') as file:
    #查看文件中的组和数据集
    def print_hdf5_item(name, obj):
        if isinstance(obj, h5py.Group):  #isinstance用来检查一个对象是否是指定类型的实例
            print(f"Group:{name}")
        elif isinstance(obj, h5py.Dataset):
            print(f"Dataset: {name}")

    file.visititems(print_hdf5_item)

    dataset = file['speed/axis0']
    print(f"speed/axis0 = {dataset[()]}")
    dataset = file['speed/axis1']
    print(f"speed/axis1 = {dataset[()]}")
    dataset = file['speed/block0_items']
    print(f"block0_items = {dataset[()]}")
    dataset = file['speed/block0_values']
    print(f"block0_values = {dataset[()]}")</code></pre> 
<p>输出为;</p> 
<pre><code class="hljs">Group:speed
Dataset: speed/axis0
Dataset: speed/axis1
Dataset: speed/block0_items
Dataset: speed/block0_values

speed/axis0 = [400001 400017 400030 400040 400045 400052 400057 400059 400065 400069
 400073 400084 400085 400088 400096 400097 400100 400104 400109 400122
 ...
 407710 407711 408907 408911 409524 409525 409526 409528 409529 413026
 413845 413877 413878 414284 414694]

speed/axis1 = [1483228800000000000 1483229100000000000 1483229400000000000 ...
 1498866300000000000 1498866600000000000 1498866900000000000]

block0_items = [400001 400017 400030 400040 400045 400052 400057 400059 400065 400069
 400073 400084 400085 400088 400096 400097 400100 400104 400109 400122
 ...
 407710 407711 408907 408911 409524 409525 409526 409528 409529 413026
 413845 413877 413878 414284 414694]

block0_values = [[71.4 67.8 70.5 ... 68.8 71.1 68. ]
 [71.6 67.5 70.6 ... 68.4 70.8 67.4]
 [71.6 67.6 70.2 ... 68.4 70.5 67.9]
 ...
 [71.4 66.9 68.1 ... 68.4 71.6 66.6]
 [72.2 66.5 68.  ... 68.7 71.6 68.4]
 [71.5 66.2 68.4 ... 68.7 71.6 68. ]]
</code></pre> 
<p>维度为：</p> 
<pre><code class="hljs">speed/axis0 = (325,)
speed/axis1 = (52116,)
block0_items = (325,)
block0_values = (52116, 325)  #存的是速度值
</code></pre> 
<p>52116条数据，325个传感器</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1102a34513a190380c3d35588811b726/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ES 的存储原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d14c0567bd4719f6c5d489d9f7590802/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Harmony Ble蓝牙App（三）特性和属性</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>