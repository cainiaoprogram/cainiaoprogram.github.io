<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用Struts2框架将jsp的form表单数据提交到action处理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用Struts2框架将jsp的form表单数据提交到action处理" />
<meta property="og:description" content="以下是图书管理系统，只有部分代码，主要实现从JSP传数据到action，分页显示没列出，详细在附件
1.add.jsp页面内容
&lt;span style=&#34;font-size:18px;&#34;&gt;&lt;%@ page language=&#34;java&#34; import=&#34;java.util.*&#34; pageEncoding=&#34;UTF-8&#34;%&gt; &lt;%@ taglib prefix=&#34;s&#34; uri=&#34;/struts-tags&#34; %&gt; &lt;% String path = request.getContextPath(); String basePath = request.getScheme()&#43;&#34;://&#34;&#43;request.getServerName()&#43;&#34;:&#34;&#43;request.getServerPort()&#43;path&#43;&#34;/&#34;; %&gt; &lt;!DOCTYPE HTML PUBLIC &#34;-//W3C//DTD HTML 4.01 Transitional//EN&#34;&gt; &lt;html&gt; &lt;head&gt; &lt;base href=&#34;&lt;%=basePath%&gt;&#34;&gt; &lt;title&gt;添加新图书&lt;/title&gt; &lt;meta http-equiv=&#34;pragma&#34; content=&#34;no-cache&#34;&gt; &lt;meta http-equiv=&#34;cache-control&#34; content=&#34;no-cache&#34;&gt; &lt;meta http-equiv=&#34;expires&#34; content=&#34;0&#34;&gt; &lt;meta http-equiv=&#34;keywords&#34; content=&#34;keyword1,keyword2,keyword3&#34;&gt; &lt;meta http-equiv=&#34;description&#34; content=&#34;This is my page&#34;&gt; &lt;script src=&#34;js/jquery-1.8.3.js&#34;&gt; &lt;/script&gt; &lt;script type=&#34;text/javascript&#34;&gt; &lt;/script&gt; &lt;/head&gt; &lt;body&gt; &lt;form action=&#34;addbooks&#34; method=&#34;post&#34;&gt; &lt;table align=&#34;middle&#34;&gt; &lt;tr&gt; &lt;td&gt;&lt;/td&gt; &lt;td bgcolor=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/74aadb543c337deab3d6b3f12d52c1f6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-11-15T10:45:34+08:00" />
<meta property="article:modified_time" content="2015-11-15T10:45:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用Struts2框架将jsp的form表单数据提交到action处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:24px">以下是图书管理系统，只有部分代码，主要实现从JSP传数据到action，分页显示没列出，详细在附件</span></p> 
<p><span style="font-size:24px"><br> </span></p> 
<p><span style="font-size:24px">1<strong>.add.jsp页面内容</strong></span></p> 
<p></p> 
<pre><code class="language-html">&lt;span style="font-size:18px;"&gt;&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%&gt;

&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;base href="&lt;%=basePath%&gt;"&gt;
    
    &lt;title&gt;添加新图书&lt;/title&gt;
	&lt;meta http-equiv="pragma" content="no-cache"&gt;
	&lt;meta http-equiv="cache-control" content="no-cache"&gt;
	&lt;meta http-equiv="expires" content="0"&gt;    
	&lt;meta http-equiv="keywords" content="keyword1,keyword2,keyword3"&gt;
	&lt;meta http-equiv="description" content="This is my page"&gt;
	
&lt;script src="js/jquery-1.8.3.js"&gt; &lt;/script&gt;
&lt;script type="text/javascript"&gt;

&lt;/script&gt;
  &lt;/head&gt;
  
  &lt;body&gt;
    &lt;form action="addbooks" method="post"&gt;
    &lt;table  align="middle"&gt;
    	&lt;tr&gt;
    		&lt;td&gt;&lt;/td&gt;
    		&lt;td bgcolor="lightblue" align="center"&gt;新增图书信息&lt;/td&gt;
    		&lt;td&gt;&lt;/td&gt;
    	&lt;/tr&gt;
    	&lt;tr&gt;
    		&lt;td&gt;图书名称：&lt;/td&gt;
    		&lt;td&gt;&lt;input type="text" name="book.name"/&gt;&lt;/td&gt;&lt;/span&gt;&lt;span style="font-size: 18px; font-family: Arial, Helvetica, sans-serif;"&gt;&lt;!-- name属性要和action里的属性一致 --&gt;&lt;/span&gt;&lt;span style="font-size:18px;"&gt;
    		&lt;td&gt;&lt;s:fielderror fieldName="book.name"/&gt;&lt;/td&gt;&lt;!-- 用框架验证的显示地方 --&gt;
    	&lt;/tr&gt;
    	&lt;tr&gt;
    		&lt;td&gt;图书作者：&lt;/td&gt;
    		&lt;td&gt;&lt;input type="text" name="book.author"/&gt;&lt;/td&gt;
    		&lt;td&gt;&lt;s:fielderror fieldName="book.author"/&gt;&lt;/td&gt;
    	&lt;/tr&gt;
    	&lt;tr&gt;
    		&lt;td&gt;购买日期：&lt;/td&gt;
    		&lt;td&gt;&lt;input type="text" name="book.buytime"/&gt;&lt;/td&gt;
    		&lt;td&gt;&lt;s:fielderror fieldName="book.buytime"/&gt;&lt;/td&gt;
    	&lt;/tr&gt;
    	&lt;tr&gt;
    		&lt;td&gt;图书类别：&lt;/td&gt;
    		&lt;td&gt;&lt;select name="sort.name" size="1"&gt;
    				&lt;option value="t" selected="selected"&gt;选择所属分类&lt;/option&gt;
    				&lt;option value="计算机软件"  &gt;计算机软件&lt;/option&gt;
    				&lt;option value="小说/文摘" &gt;小说/文摘&lt;/option&gt;
    				&lt;option value="杂项" &gt;杂项&lt;/option&gt;
    			&lt;/select&gt;
    		&lt;/td&gt;
    		&lt;td&gt;&lt;/td&gt;
    	&lt;/tr&gt;
    	&lt;tr&gt;
    		&lt;td&gt;&lt;/td&gt;
    		&lt;td&gt;&lt;input type="submit" value="增加图书"/&gt;&lt;/td&gt;
    		&lt;td&gt;&lt;/td&gt;
    	&lt;/tr&gt;
    	
    		
    	
    &lt;/table&gt;
    
     &lt;/form&gt;
     &lt;a href="listpage"&gt;返回列表&lt;/a&gt;
  &lt;/body&gt;
&lt;/html&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:18px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:18px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;2.AddBooks.java是上文JSP的action&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;&lt;/span&gt;&lt;pre name="code" class="html"&gt;package cn.action;

import cn.dao.BooksDao;
import cn.dao.SortDao;
import cn.daoimpl.BooksDaoImpl;
import cn.daoimpl.SortDaoImpl;
import cn.entity.TbBooks;
import cn.entity.TbSort;

import com.opensymphony.xwork2.Action;
import com.opensymphony.xwork2.ActionSupport;

public class AddBooks extends ActionSupport{

	private TbBooks book;
	private TbSort sort;

	
	@Override
	public String execute() throws Exception {
		BooksDao booksdao=new BooksDaoImpl();
		SortDao sortdao=new SortDaoImpl();
		//先将主键sort保存
		sortdao.addSort(sort);
		
		book.setTbSort(sort);
		booksdao.addBooks(book);
		
		return Action.SUCCESS;
	}
	
	public TbBooks getBook() {
		return book;
	}

	public void setBook(TbBooks book) {
		this.book = book;
	}

	public TbSort getSort() {
		return sort;
	}

	public void setSort(TbSort sort) {
		this.sort = sort;
	}

	
}
</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre>3.对应的实体类TbBooks.java 
<pre></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;package cn.entity;


import java.util.Date;


/**
 * TbBooks entity. @author MyEclipse Persistence Tools
 */


public class TbBooks implements java.io.Serializable {


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;// Fields


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;private Integer id;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;private TbSort tbSort;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;private String name;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;private String author;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;private Date buytime;


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;// Constructors


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;/** default constructor */
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public TbBooks() {
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;/** full constructor */
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public TbBooks(TbSort tbSort, String name, String author, Date buytime) {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.tbSort = tbSort;
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.name = name;
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.author = author;
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.buytime = buytime;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;// Property accessors


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public Integer getId() {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;return this.id;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public void setId(Integer id) {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.id = id;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public TbSort getTbSort() {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;return this.tbSort;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public void setTbSort(TbSort tbSort) {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.tbSort = tbSort;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public String getName() {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;return this.name;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public void setName(String name) {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.name = name;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public String getAuthor() {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;return this.author;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public void setAuthor(String author) {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.author = author;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public Date getBuytime() {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;return this.buytime;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


&lt;span style="white-space:pre"&gt;	&lt;/span&gt;public void setBuytime(Date buytime) {
&lt;span style="white-space:pre"&gt;		&lt;/span&gt;this.buytime = buytime;
&lt;span style="white-space:pre"&gt;	&lt;/span&gt;}


}&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;还有另一个实体类TbSort.java&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;&lt;/span&gt;&lt;pre name="code" class="html"&gt;package cn.entity;

import java.util.HashSet;
import java.util.Set;

/**
 * TbSort entity. @author MyEclipse Persistence Tools
 */

public class TbSort implements java.io.Serializable {

	// Fields

	private Integer id;
	private String name;
	private Set tbBookses = new HashSet(0);

	// Constructors

	/** default constructor */
	public TbSort() {
	}

	/** minimal constructor */
	public TbSort(String name) {
		this.name = name;
	}

	/** full constructor */
	public TbSort(String name, Set tbBookses) {
		this.name = name;
		this.tbBookses = tbBookses;
	}

	// Property accessors

	public Integer getId() {
		return this.id;
	}

	public void setId(Integer id) {
		this.id = id;
	}

	public String getName() {
		return this.name;
	}

	public void setName(String name) {
		this.name = name;
	}

	public Set getTbBookses() {
		return this.tbBookses;
	}

	public void setTbBookses(Set tbBookses) {
		this.tbBookses = tbBookses;
	}

}</code></pre> 
<br> 4.struts.xml的配置 
<pre></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;&lt;/span&gt;&lt;pre name="code" class="html"&gt;&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN" "http://struts.apache.org/dtds/struts-2.1.dtd"&gt;
&lt;struts&gt;
	&lt;package name="default" extends="struts-default" namespace="/"&gt;
		&lt;action name="pagelist" class="cn.action.PageList"&gt;
			&lt;result&gt;index.jsp&lt;/result&gt;
		&lt;/action&gt;
		&lt;action name="del" class="cn.action.DelAction"&gt;
			&lt;result type="redirectAction"&gt;pagelist&lt;/result&gt;
		&lt;/action&gt;
		&lt;action name="addbooks" class="cn.action.AddBooks"&gt;
			&lt;result type="redirectAction" name="success"&gt;pagelist&lt;/result&gt;
			&lt;result name="input"&gt;add.jsp&lt;/result&gt;
		&lt;/action&gt;
	&lt;/package&gt;
&lt;/struts&gt;    
</code></pre> 
<br> 
<br> 
<br> 
<pre></pre> 
<pre><code class="language-html">&lt;span style="font-size:24px;"&gt;
&lt;/span&gt;</code></pre> 
<pre><code class="language-html">&lt;span style="font-size:18px;"&gt;
&lt;/span&gt;</code></pre> 
<pre name="code" class="html"></pre> 
<br> 
<br> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/42a002e86e7df1cb4ff2d71109bf8695/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">kmeans聚类算法及matlab实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/054fb593391d6401398a5c2151eb7dc6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">javaWeb常见异常的解决方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>