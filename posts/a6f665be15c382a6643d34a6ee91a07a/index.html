<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Centos 7 è™šæ‹Ÿæœºå®‰è£… harbor - èœé¸Ÿç¨‹åºå‘˜åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Centos 7 è™šæ‹Ÿæœºå®‰è£… harbor" />
<meta property="og:description" content="ç›®å½•
1. è¯´æ˜
2.Â å®‰è£…
1.Â å®‰è£…docker
2. å®‰è£…docker-composeÂ 3. å®‰è£…Harbor
1. è¯´æ˜ åœ¨ CentOS 7 ç¯å¢ƒä¸‹å®‰è£… docekr åŠÂ harbor
2.Â å®‰è£… 1.Â å®‰è£…docker # å®‰è£…yumå·¥å…·é›† yum install -y yum-utils # å®‰è£…dockeræº yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo # æ›´æ–°yumç¼“å­˜ yum makecache fast # å®‰è£…docker yum install -y docker-ce # å¯åŠ¨docker systemctl start docker # è®¾ç½®dockerå¼€æœºè‡ªå¯åŠ¨ systemctl enable docker # éªŒè¯ docker version docker run hello-world ğŸ‘‰ æ³¨1ï¼šè¿è¡Œâ€œsudo docker run hello-worldâ€æ—¶æŠ¥é”™ï¼šdocker: Error response from daemonã€‚è§£å†³æ–¹æ³•ï¼šdockeré»˜è®¤çš„æºä¸ºå›½å¤–å®˜æ–¹æºï¼Œä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä¿®æ”¹dockeré•œåƒæºä¸ºå›½å†…:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a6f665be15c382a6643d34a6ee91a07a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-07T10:00:00+08:00" />
<meta property="article:modified_time" content="2022-10-07T10:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="èœé¸Ÿç¨‹åºå‘˜åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">èœé¸Ÿç¨‹åºå‘˜åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Centos 7 è™šæ‹Ÿæœºå®‰è£… harbor</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p id="main-toc"><strong>ç›®å½•</strong></p> 
 <p id="1.%20%E8%AF%B4%E6%98%8E-toc" style="margin-left:0px;"><a href="#1.%20%E8%AF%B4%E6%98%8E" rel="nofollow">1. è¯´æ˜</a></p> 
 <p id="2.%C2%A0%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#2.%C2%A0%E5%AE%89%E8%A3%85" rel="nofollow">2.Â å®‰è£…</a></p> 
 <p id="1.%C2%A0%E5%AE%89%E8%A3%85docker-toc" style="margin-left:40px;"><a href="#1.%C2%A0%E5%AE%89%E8%A3%85docker" rel="nofollow">1.Â å®‰è£…docker</a></p> 
 <p id="2.%20%E5%AE%89%E8%A3%85docker-compose%C2%A0-toc" style="margin-left:40px;"><a href="#2.%20%E5%AE%89%E8%A3%85docker-compose%C2%A0" rel="nofollow">2. å®‰è£…docker-composeÂ </a></p> 
 <p id="%C2%A03.%20%E5%AE%89%E8%A3%85Harbor-toc" style="margin-left:40px;"><a href="#%C2%A03.%20%E5%AE%89%E8%A3%85Harbor" rel="nofollow">3. å®‰è£…Harbor</a></p> 
</blockquote> 
<hr> 
<h2 id="1.%20%E8%AF%B4%E6%98%8E">1. è¯´æ˜</h2> 
<p>åœ¨ CentOS 7 ç¯å¢ƒä¸‹å®‰è£… docekr åŠÂ harbor</p> 
<h2 id="2.%C2%A0%E5%AE%89%E8%A3%85">2.Â å®‰è£…</h2> 
<h3 id="1.%C2%A0%E5%AE%89%E8%A3%85docker">1.Â å®‰è£…docker</h3> 
<pre><code class="language-bash"># å®‰è£…yumå·¥å…·é›†
yum install -y yum-utils
# å®‰è£…dockeræº
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
# æ›´æ–°yumç¼“å­˜
yum makecache fast
# å®‰è£…docker
yum install -y docker-ce
# å¯åŠ¨docker
systemctl start docker
# è®¾ç½®dockerå¼€æœºè‡ªå¯åŠ¨
systemctl enable docker
# éªŒè¯
docker version
docker run hello-world</code></pre> 
<p>ğŸ‘‰ æ³¨1ï¼šè¿è¡Œâ€œsudo docker run hello-worldâ€æ—¶æŠ¥é”™ï¼š<code>docker: Error response from daemon</code>ã€‚è§£å†³æ–¹æ³•ï¼šdockeré»˜è®¤çš„æºä¸ºå›½å¤–å®˜æ–¹æºï¼Œä¸‹è½½é€Ÿåº¦è¾ƒæ…¢ï¼Œå¯ä¿®æ”¹dockeré•œåƒæºä¸ºå›½å†…:</p> 
<pre><code class="language-bash">[root@localhost]# vim /etc/docker/daemon.json
{
  "registry-mirrors": ["https://registry.docker-cn.com","http://hub-mirror.c.163.com"]
}</code></pre> 
<p>é‡å¯docker:</p> 
<pre><code class="language-bash">systemctl restart docker</code></pre> 
<p>ğŸ‘‰ æ³¨2ï¼šérootç”¨æˆ·è§£å†³è¿è¡Œdockerå‘½ä»¤æ—¶Get Permission Deniedé—®é¢˜ï¼š</p> 
<ol><li>æ–¹æ³•1ï¼š ä½¿ç”¨sudoè·å–ç®¡ç†å‘˜æƒé™ï¼Œè¿è¡Œdockerå‘½ä»¤</li><li>æ–¹æ³•2ï¼š åˆ›å»ºdockerç”¨æˆ·ç»„ï¼Œå¹¶å°†å½“å‰ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­ï¼Œé‚£ä¹ˆå½“å‰ç”¨æˆ·å°±æœ‰æƒé™è®¿é—®Unix socketäº†ï¼Œè¿›è€Œä¹Ÿå°±å¯ä»¥æ‰§è¡Œdockerç›¸å…³å‘½ä»¤</li></ol> 
<pre><code class="language-bash">sudo groupadd docker     #æ·»åŠ dockerç”¨æˆ·ç»„
sudo gpasswd -a $USER docker     #å°†ç™»é™†ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­
newgrp docker     #æ›´æ–°ç”¨æˆ·ç»„
docker ps    #æµ‹è¯•dockerå‘½ä»¤æ˜¯å¦å¯ä»¥ä½¿ç”¨sudoæ­£å¸¸ä½¿ç”¨</code></pre> 
<h3 id="2.%20%E5%AE%89%E8%A3%85docker-compose%C2%A0">2. å®‰è£…docker-composeÂ </h3> 
<p>ä½¿ç”¨pipå®‰è£…ï¼š</p> 
<pre><code class="language-bash"># å®‰è£… EPEL è½¯ä»¶åŒ…
sudo yum install epel-release
# å®‰è£…pip
sudo yum install -y python-pip
# å‡çº§pip
sudo pip install --upgrade pip
# å®‰è£…docker-compose
sudo pip install docker-compose</code></pre> 
<p>ğŸ‘‰ æ³¨ï¼šå®‰è£…docker-composeæ—¶æŠ¥é”™(sudo pip install docker-composeæ—¶)Â </p> 
<ul><li>é”™è¯¯1ï¼š</li></ul> 
<pre><code class="language-bash">ERROR: Cannot uninstall 'subprocess32'. It is a distutils installed project and thus we cannot accurately determine which &gt;files belong to it which would lead to only a partial uninstall.</code></pre> 
<p>è§£å†³åŠæ³•ï¼š</p> 
<pre><code class="language-bash"># æœç´¢subprocess32-3.2.6-py2.7.egg-infoæ–‡ä»¶
sudo find / -name *subpro*.egg-info
# åˆ é™¤
rm -rf /usr/lib64/python2.7/site-packages/subprocess32-3.2.6-py2.7.egg-info</code></pre> 
<ul><li>é”™è¯¯2Â </li></ul> 
<pre><code class="language-bash">ERROR: Cannot uninstall 'requests'. It is a distutils installed project and thus we cannot accurately determine which files belong to it which would lead to only a partial uninstall.</code></pre> 
<p>Â è§£å†³åŠæ³•ï¼š</p> 
<pre><code class="language-bash"># æœç´¢requests-2.6.0-py2.7.egg-infoæ–‡ä»¶
sudo find / -name *requests*.egg-info
# åˆ é™¤
rm -rf /usr/lib/python2.7/site-packages/requests-2.6.0-py2.7.egg-inf</code></pre> 
<p>Â ç„¶åé‡æ–°å®‰è£…ï¼š</p> 
<pre><code class="language-bash">sudo pip install docker-compose</code></pre> 
<h3 id="%C2%A03.%20%E5%AE%89%E8%A3%85Harbor">3. å®‰è£…Harbor</h3> 
<p>ä¸‹è½½å¹¶è§£å‹harborå®‰è£…åŒ…ï¼š</p> 
<pre><code class="language-bash">wget https://storage.googleapis.com/harbor-releases/harbor-offline-installer-v1.5.3.tgz
tar -zxvf harbor-offline-installer-v1.5.3.tgz #è§£å‹ç¦»çº¿å®‰è£…åŒ…
mv harbor /opt/ #ç§»åˆ°/optç›®å½•ä¸‹
cd /opt/harbor #è¿›å…¥åˆ°/opt/harborç›®å½•
ll #æŸ¥çœ‹ç›®å½•å†…å®¹</code></pre> 
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p> 
<pre><code class="language-bash">vim harbor.cfg #ç¼–è¾‘é…ç½®æ–‡ä»¶</code></pre> 
<p>ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š</p> 
<pre><code class="language-bash">hostname = localhost     #ä¿®æ”¹harborçš„å¯åŠ¨ipï¼Œè¿™é‡Œéœ€è¦ä¾æ®ç³»ç»Ÿipè®¾ç½®
harbor_admin_password = admin    #ä¿®æ”¹harborçš„adminç”¨æˆ·çš„å¯†ç </code></pre> 
<p>Â å®‰è£…Harborï¼š</p> 
<pre><code class="language-bash">./prepare     #é…ç½®Harbor
./install.sh    #å®‰è£…Harbor</code></pre> 
<p><img alt="" height="362" src="https://images2.imgbox.com/bc/01/XfvV8hjb_o.png" width="787"></p> 
<p>è®¿é—®harborï¼Œæµè§ˆå™¨ä¸­è¾“å…¥ <strong><span style="background-color:#fbd4d0;">localhost</span></strong>ï¼Œå¦‚ä¸‹ï¼šÂ <img alt="" height="464" src="https://images2.imgbox.com/08/f0/Un8zXV8n_o.png" width="795"></p> 
<p>Â ç™»å½•harborï¼Œä»¥ admin ç”¨æˆ·ï¼Œå¯†ç  <strong><span style="background-color:#fbd4d0;">admin</span></strong> ç™»å½•ç³»ç»Ÿï¼Œå¦‚ä¸‹ï¼š</p> 
<p><img alt="" height="446" src="https://images2.imgbox.com/88/e0/t0G5STk6_o.png" width="799"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6eca3dcc78eb5ea859b8a3a22f3c3f5d/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">åŸºäºMatlabçš„è‡ªåŠ¨æ§åˆ¶ç³»ç»Ÿé¢‘ç‡æ³•ä¸²è”æ ¡æ­£ä»¿çœŸåˆ†æï¼ˆå«ä»¿çœŸä»£ç å’Œç»“æœå›¾åƒï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/05a0b96839bc84f242ce1ae4bfa21b9d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">MySQLå»ºç«‹å›¾ä¹¦ç®¡ç†ç³»ç»Ÿåç»­ mysqlæŸ¥è¯¢å®æˆ˜</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 èœé¸Ÿç¨‹åºå‘˜åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>