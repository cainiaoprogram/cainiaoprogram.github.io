<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android Pdf第三方框架 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android Pdf第三方框架" />
<meta property="og:description" content="1. AndroidPdfViewer 导入AndroidPdfViewer
implementation &#39;com.github.barteksc:android-pdf-viewer:2.8.2&#39; 在repositories里面添加库
maven { url &#39;https://jcenter.bintray.com&#39; } 布局文件引用PDFView
&lt;com.github.barteksc.pdfviewer.PDFView android:id=&#34;@&#43;id/pdf_view&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34; /&gt; PdfViewer为我们提供了以下几种读取文件的方法:
pdfView.fromUri(Uri) pdfView.fromFile(File) pdfView.fromBytes(byte[]) pdfView.fromStream(InputStream) pdfView.fromSource(DocumentSource) pdfView.fromAsset(String) Configurator主要方法
pages(int... pageNumbers) // 指定显示页面，默认全部显示 defaultPage(int defaultPage) // 默认实现页面 enableSwipe(boolean enableSwipe) // 控制屏幕滑动，默认为true能够滑动 enableDoubletap(boolean enableDoubletap) // 禁用双击，默认为true，可以双击 swipeHorizontal(boolean swipeHorizontal) // 开启横向滑动，默认竖向 enableAnnotationRendering(boolean annotationRendering) // 支持电子签 spacing(int spacing) // 页面之间空隙，单位是dp onLoad(OnLoadCompleteListener onLoadCompleteListener) // 加载结束，开始绘制 onPageScroll(OnPageScrollListener onPageScrollListener) // 监听页面滚动 onPageChange(OnPageChangeListener onPageChangeListener) // 监听页面变化 load() // 最后调用，使配置生效 PDFView其他方法" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2b286d1dd1f476884999e30049228000/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-16T12:05:38+08:00" />
<meta property="article:modified_time" content="2023-05-16T12:05:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android Pdf第三方框架</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_AndroidPdfViewer_0"></a>1. AndroidPdfViewer</h2> 
<p>导入AndroidPdfViewer</p> 
<pre><code class="prism language-groovy">implementation <span class="token string">'com.github.barteksc:android-pdf-viewer:2.8.2'</span>
</code></pre> 
<p>在<code>repositories</code>里面添加库</p> 
<pre><code class="prism language-groovy">maven <span class="token punctuation">{<!-- --></span> url <span class="token string">'https://jcenter.bintray.com'</span> <span class="token punctuation">}</span>
</code></pre> 
<p>布局文件引用PDFView</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.github.barteksc.pdfviewer.PDFView</span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/pdf_view<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p><code>PdfViewer</code>为我们提供了以下几种读取文件的方法:</p> 
<pre><code class="prism language-java">pdfView<span class="token punctuation">.</span><span class="token function">fromUri</span><span class="token punctuation">(</span><span class="token class-name">Uri</span><span class="token punctuation">)</span>
pdfView<span class="token punctuation">.</span><span class="token function">fromFile</span><span class="token punctuation">(</span><span class="token class-name">File</span><span class="token punctuation">)</span>
pdfView<span class="token punctuation">.</span><span class="token function">fromBytes</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
pdfView<span class="token punctuation">.</span><span class="token function">fromStream</span><span class="token punctuation">(</span><span class="token class-name">InputStream</span><span class="token punctuation">)</span>
pdfView<span class="token punctuation">.</span><span class="token function">fromSource</span><span class="token punctuation">(</span><span class="token class-name">DocumentSource</span><span class="token punctuation">)</span>
pdfView<span class="token punctuation">.</span><span class="token function">fromAsset</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>
</code></pre> 
<p><code>Configurator</code>主要方法</p> 
<pre><code class="prism language-java"><span class="token function">pages</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> pageNumbers<span class="token punctuation">)</span> <span class="token comment">// 指定显示页面，默认全部显示</span>
<span class="token function">defaultPage</span><span class="token punctuation">(</span><span class="token keyword">int</span> defaultPage<span class="token punctuation">)</span> <span class="token comment">// 默认实现页面</span>

<span class="token function">enableSwipe</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> enableSwipe<span class="token punctuation">)</span> <span class="token comment">// 控制屏幕滑动，默认为true能够滑动</span>
<span class="token function">enableDoubletap</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> enableDoubletap<span class="token punctuation">)</span> <span class="token comment">// 禁用双击，默认为true，可以双击</span>
<span class="token function">swipeHorizontal</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> swipeHorizontal<span class="token punctuation">)</span> <span class="token comment">// 开启横向滑动，默认竖向</span>
<span class="token function">enableAnnotationRendering</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> annotationRendering<span class="token punctuation">)</span> <span class="token comment">// 支持电子签</span>
<span class="token function">spacing</span><span class="token punctuation">(</span><span class="token keyword">int</span> spacing<span class="token punctuation">)</span> <span class="token comment">// 页面之间空隙，单位是dp</span>

<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token class-name">OnLoadCompleteListener</span> onLoadCompleteListener<span class="token punctuation">)</span> <span class="token comment">// 加载结束，开始绘制</span>
<span class="token function">onPageScroll</span><span class="token punctuation">(</span><span class="token class-name">OnPageScrollListener</span> onPageScrollListener<span class="token punctuation">)</span> <span class="token comment">// 监听页面滚动</span>
<span class="token function">onPageChange</span><span class="token punctuation">(</span><span class="token class-name">OnPageChangeListener</span> onPageChangeListener<span class="token punctuation">)</span> <span class="token comment">// 监听页面变化</span>

<span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 最后调用，使配置生效</span>
</code></pre> 
<p><code>PDFView</code>其他方法</p> 
<pre><code class="prism language-java"><span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">,</span> <span class="token keyword">boolean</span> withAnimation<span class="token punctuation">)</span> <span class="token comment">// 跳转到指定页面</span>
<span class="token function">jumpTo</span><span class="token punctuation">(</span><span class="token keyword">int</span> page<span class="token punctuation">)</span>
<span class="token function">getPageCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取总页面数</span>
<span class="token function">getCurrentPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 获取当前页面</span>

<span class="token function">enableAntialiasing</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> enableAntialiasing<span class="token punctuation">)</span> <span class="token comment">// 改善渲染效果，默认是false</span>
<span class="token function">useBestQuality</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> bestQuality<span class="token punctuation">)</span> <span class="token comment">// 提高pdf清晰度，把图片格式从RGB_565提高到ARGB_8888，默认是false</span>

<span class="token function">canScrollVertically</span><span class="token punctuation">(</span><span class="token keyword">int</span> direction<span class="token punctuation">)</span> <span class="token comment">// 是否可以纵向滚动，direction大于0，向下滚动，direction小于0，向上滚动</span>
<span class="token function">canScrollHorizontally</span><span class="token punctuation">(</span><span class="token keyword">int</span> direction<span class="token punctuation">)</span> <span class="token comment">// 是否可以横向滚动，direction大于0，向右滚动，direction小于0，向左滚动</span>
</code></pre> 
<p>github地址: <a href="https://github.com/barteksc/AndroidPdfViewer">https://github.com/barteksc/AndroidPdfViewer</a></p> 
<h2><a id="2_mupdf_59"></a>2. mupdf</h2> 
<p>导入mupdf</p> 
<pre><code class="prism language-groovy">implementation <span class="token string">'com.artifex.mupdf:fitz:1.20.2'</span>
</code></pre> 
<p>在<code>repositories</code>里面添加库</p> 
<pre><code class="prism language-groovy">maven <span class="token punctuation">{<!-- --></span> url <span class="token string">'https://maven.ghostscript.com/'</span> <span class="token punctuation">}</span>
</code></pre> 
<p>mupdf提供了解析代码，<code>Document</code> 读取pdf文件，<code>AndroidDrawDevice</code>把pdf转换成图片显示。</p> 
<pre><code class="prism language-kotlin"><span class="token keyword">var</span> document <span class="token operator">=</span> Document<span class="token punctuation">.</span><span class="token function">openDocument</span><span class="token punctuation">(</span>byteArray<span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"application/octet-stream"</span></span><span class="token punctuation">)</span>
<span class="token keyword">var</span> pageCount <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">countPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

LogTool<span class="token punctuation">.</span><span class="token function">logi</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">"MuPdfViewActivity"</span></span><span class="token punctuation">,</span> <span class="token string-literal singleline"><span class="token string">"pageCount = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">pageCount</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>pageCount <span class="token operator">&gt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">var</span> bitmapList <span class="token operator">=</span> mutableListOf<span class="token operator">&lt;</span>Bitmap<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span>pageIndex <span class="token keyword">in</span> <span class="token number">0</span> until pageCount<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> page <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">loadPage</span><span class="token punctuation">(</span>pageIndex<span class="token punctuation">)</span>
        <span class="token keyword">var</span> matrix <span class="token operator">=</span> AndroidDrawDevice<span class="token punctuation">.</span><span class="token function">fitPageWidth</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> displayMetrics<span class="token punctuation">.</span>widthPixels<span class="token punctuation">)</span>
        <span class="token keyword">var</span> bitmap <span class="token operator">=</span> AndroidDrawDevice<span class="token punctuation">.</span><span class="token function">drawPage</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> matrix<span class="token punctuation">)</span>
        bitmapList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>bitmap<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>mupdf-android-viewer</code>是 MuPDF 为 Android 平台提供的查看器，它的代码可以通过 Git 下载得到：</p> 
<pre><code class="prism language-bash">$ <span class="token function">git</span> clone git://git.ghostscript.com/mupdf-android-viewer.git
</code></pre> 
<p>我们可以把<code>mupdf-android-viewer</code>作为一个模块拷贝到自己的项目中，直接使用</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dcabe4150519d4a945b5937186e3346f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Fork/Join 框架详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b5c35de8c4553fdb1174f7540a395b51/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">c&#43;&#43;学习笔记（2）数组，函数，指针，结构体</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>