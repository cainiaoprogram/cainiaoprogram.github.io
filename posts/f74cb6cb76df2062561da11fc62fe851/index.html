<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ubuntu20.04安装Nvidia显卡驱动&#43;CUDA11.1&#43;cuDNN8.0.5 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Ubuntu20.04安装Nvidia显卡驱动&#43;CUDA11.1&#43;cuDNN8.0.5" />
<meta property="og:description" content="Ubuntu20.04安装Nvidia显卡驱动&#43;CUDA11.1&#43;CUDNN8.0.5 一、安装 Nvidia 显卡驱动1.安装依赖2.禁用nouveau通用驱动3.安装显卡驱动 二、安装 CUDA 11.11.安装一些依赖库2. cuda11.1下载和安装 三、配置 cuDNN 8.0.5 一、安装 Nvidia 显卡驱动 1.安装依赖 # Ctrl &#43; Alt &#43; T 启动终端，逐行操作 sudo apt-get update #更新软件列表 sudo apt-get install g&#43;&#43; sudo apt-get install gcc sudo apt-get install make 2.禁用nouveau通用驱动 (1).首先输入以下：
sudo gedit /etc/modprobe.d/blacklist.conf (2).在打开的blacklist.conf最后面添加如下两行后，保存文本并关闭：
blacklist nouveau options nouveau modeset=0 (3).更新配置：
sudo update-initramfs –u (4).输入以下指令，如没有任何输出则屏蔽成功：
lsmod | grep nouveau 屏蔽完成
3.安装显卡驱动 注意：无须另外下载lightdm，用自带的gdm3即可
(1).进入全屏黑色的非图形界面（按Ctrl &#43; Alt &#43; F1～F6其中一个 分别对应进入tty1~tty6）
(2).输入用户名和密码后进行指令操作。
(3).关闭图形界面：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f74cb6cb76df2062561da11fc62fe851/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-08T10:22:02+08:00" />
<meta property="article:modified_time" content="2022-10-08T10:22:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Ubuntu20.04安装Nvidia显卡驱动&#43;CUDA11.1&#43;cuDNN8.0.5</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Ubuntu20.04安装Nvidia显卡驱动+CUDA11.1+CUDNN8.0.5</h4> 
 <ul><li><a href="#_Nvidia__2" rel="nofollow">一、安装 Nvidia 显卡驱动</a></li><li><ul><li><a href="#1_4" rel="nofollow">1.安装依赖</a></li><li><a href="#2nouveau_13" rel="nofollow">2.禁用nouveau通用驱动</a></li><li><a href="#3_35" rel="nofollow">3.安装显卡驱动</a></li></ul> 
  </li><li><a href="#_CUDA_111_81" rel="nofollow">二、安装 CUDA 11.1</a></li><li><ul><li><a href="#1_88" rel="nofollow">1.安装一些依赖库</a></li><li><a href="#2_cuda111_93" rel="nofollow">2. cuda11.1下载和安装</a></li></ul> 
  </li><li><a href="#_cuDNN_805_131" rel="nofollow">三、配置 cuDNN 8.0.5</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_Nvidia__2"></a>一、安装 Nvidia 显卡驱动</h2> 
<h3><a id="1_4"></a>1.安装依赖</h3> 
<pre><code># Ctrl + Alt + T 启动终端，逐行操作
sudo apt-get update   #更新软件列表 
sudo apt-get install g++  
sudo apt-get install gcc
sudo apt-get install make
</code></pre> 
<h3><a id="2nouveau_13"></a>2.禁用nouveau通用驱动</h3> 
<p>(1).首先输入以下：</p> 
<pre><code>sudo gedit /etc/modprobe.d/blacklist.conf
</code></pre> 
<p>(2).在打开的blacklist.conf最后面添加如下两行后，保存文本并关闭：</p> 
<pre><code>blacklist nouveau
options nouveau modeset=0
</code></pre> 
<p>(3).更新配置：</p> 
<pre><code>sudo update-initramfs –u
</code></pre> 
<p>(4).输入以下指令，如没有任何输出则屏蔽成功：</p> 
<pre><code>lsmod | grep nouveau
</code></pre> 
<p>屏蔽完成</p> 
<h3><a id="3_35"></a>3.安装显卡驱动</h3> 
<p><strong>注意：无须另外下载lightdm，用自带的gdm3即可</strong></p> 
<p>(1).进入全屏黑色的非图形界面（按Ctrl + Alt + F1～F6其中一个 分别对应进入tty1~tty6）<br> (2).输入用户名和密码后进行指令操作。<br> (3).关闭图形界面：</p> 
<pre><code>sudo service gdm3 stop
</code></pre> 
<p>(4).卸载旧版本nvidia驱动(第一次装ubuntu应该是没有旧驱动)</p> 
<pre><code> sudo apt-get remove nvidia*
</code></pre> 
<p>(5).安装，按顺序输入：</p> 
<pre><code># 加入官方ppa源
sudo add-apt-repository ppa:graphics-drivers/ppa
sudo apt-get update

# 查看本机适用的版本
ubuntu-drivers devices

# xxx替换为上一步显示的合适的驱动版本。如:我的是470.
sudo apt-get install nvidia-driver-xxx
</code></pre> 
<p>(6).打开图形界面：</p> 
<pre><code>sudo service gdm3 start
</code></pre> 
<p>(7).查看安装好的驱动：</p> 
<pre><code>nvidia-smi
</code></pre> 
<p>如果显示不出显卡驱动信息，则重启电脑：</p> 
<pre><code>reboot
</code></pre> 
<p>重启后再用终端查看则显示显卡驱动等相关信息。</p> 
<h2><a id="_CUDA_111_81"></a>二、安装 CUDA 11.1</h2> 
<p><strong>cudatookit 下载地址</strong>： https://developer.nvidia.com/cuda-toolkit-archive</p> 
<pre><code># 选择11.1.1或11.1.0
# 依次点击：Linux/x86_64/Ubuntu/20.04/runfile(local)
</code></pre> 
<h3><a id="1_88"></a>1.安装一些依赖库</h3> 
<pre><code>sudo apt-get install freeglut3-dev build-essential libx11-dev libxmu-dev libxi-dev libgl1-mesa-glx libglu1-mesa libglu1-mesa-dev
</code></pre> 
<h3><a id="2_cuda111_93"></a>2. cuda11.1下载和安装</h3> 
<p>(1).执行cudatookit页面的下载和安装脚本指令：</p> 
<pre><code># 如果 wget有网络问题则手动下载.run包
wget https://developer.download.nvidia.com/compute/cuda/11.1.1/local_installers/cuda_11.1.1_455.32.00_linux.run
sudo sh cuda_11.1.1_455.32.00_linux.run
</code></pre> 
<p>执行指令后会出现安装界面：</p> 
<pre><code># 1.因为已经安装过Nvidia显卡驱动，此处选择Continue ：
</code></pre> 
<p><img src="https://images2.imgbox.com/c7/87/MnCvwYMw_o.png" alt="在这里插入图片描述"></p> 
<pre><code># 2.按 Eneter 键取消 Driver和对应的版本号 选项，然后方向键选择 Install 进行安装：
</code></pre> 
<p><img src="https://images2.imgbox.com/61/0e/QoLJS3Dj_o.png" alt="在这里插入图片描述"><br> (2).配置环境变量：</p> 
<pre><code>sudo gedit ~/.bashrc

# 在文件末尾复制进下面三条并保存退出：
export PATH=$PATH:/usr/local/cuda/bin  
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib64  
export LIBRARY_PATH=$LIBRARY_PATH:/usr/local/cuda/lib64

# 更新
source ~/.bashrc
</code></pre> 
<p>cuda11.1安装完成，输入以下指令显示版本号等信息则安装成功：</p> 
<pre><code>nvcc -V
</code></pre> 
<p><img src="https://images2.imgbox.com/8c/78/WEm8KIBX_o.png" alt="在这里插入图片描述"><br> 此处引用他图来做界面演示，本文安装的为cuda 11.1 实际应显示为 release 11.1</p> 
<h2><a id="_cuDNN_805_131"></a>三、配置 cuDNN 8.0.5</h2> 
<p><strong>下载地址为：</strong> https://developer.nvidia.com/rdp/cudnn-archive<br> <strong>注意：cuDNN的下载需要注册Nvidia账号登录！！！</strong><br> 选择 cuDNN v8.0.5（只要符合cuda11.1的都可）<br> 选择： cuDNN Library for Linux (x86_64)<br> 对下载好的文件执行以下命令，会得到一个名为 cuda 的文件夹：</p> 
<pre><code>tar -zxvf cudnn-11.1-linux-x64-v8.0.5.39.tgz
</code></pre> 
<p>然后顺序执行：</p> 
<pre><code>cp cuda/lib64/* /usr/local/cuda-11.0/lib64/
cp cuda/include/* /usr/local/cuda-11.0/include/
</code></pre> 
<p>然后执行以下指令查看配置的cuDNN</p> 
<pre><code>cat /usr/local/cuda/include/cudnn_version.h | grep CUDNN_MAJOR -A 2
</code></pre> 
<p>显示以下信息则表示成功：</p> 
<pre><code>#define CUDNN_MAJOR 8
#define CUDNN_MINOR 0
#define CUDNN_PATCHLEVEL 5
--
#define CUDNN_VERSION (CUDNN_MAJOR * 1000 + CUDNN_MINOR * 100 + CUDNN_PATCHLEVEL)

#endif /* CUDNN_VERSION_H */
</code></pre> 
<p><strong>全部安装完成！！！</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/22a20be766b95db9c1e8bfc12e14fded/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据挖掘零基础入门</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a6a04fa4430db83b3609ddcb8a642b37/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Pycharm: cannot find declaration to go to无法跳转</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>