<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android ConstraintLayout约束布局的使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android ConstraintLayout约束布局的使用" />
<meta property="og:description" content="前言：回廊一寸相思地，落月成孤，背灯和月花阴，已是十年踪迹十年心。 —— 虞美人
一、概述 AndroidStudio3.0之前默认的根布局是RelativeLayout，但是3.0之后默认的根布局是ConstraintLayout(约束布局)，它作为一款强大的调整View位置和大小的ViewGroup被Google所推荐，ConstraintLayout能够以支持库的形式支持到最小的API 9，同时也在不断丰富API和功能，它能在复杂布局中有效降低布局层级，提高性能，使用更加灵活。
但是约束布局不要乱用，因为它在测量子view的相对位置相对大小的时候，它的onmeasure()方法会被多次调用。
我们来探讨一下ConstraintLayout的相关用法，新版的Android Studio在建立工程时会默认添加约束布局的依赖，如果没有添加则需要手动在build.gralde文件中添加依赖库：
implementation &#39;androidx.constraintlayout:constraintlayout:1.1.3&#39; 二、相关属性 2.1 相对定位 相对定位，其实这个跟RelativeLayout差不多，一个View相对另一个View的位置，常用属性如下：
layout_constraintLeft_toLeftOf 左边左对齐；layout_constraintLeft_toRightOf 左边右对齐；layout_constraintRight_toLeftOf 右边左对齐；layout_constraintRight_toRightOf 右边右对齐；layout_constraintTop_toTopOf 上边顶部对齐；layout_constraintTop_toBottomOf 上边底部对齐；layout_constraintBottom_toTopOf 下边顶部对齐；layout_constraintBottom_toBottomOf 下边底部对齐；layout_constraintStart_toEndOf 起始边向尾部对齐；layout_constraintStart_toStartOf 起始边向起始边对齐；layout_constraintEnd_toStartOf 尾部向起始边对齐；layout_constraintEnd_toEndOf 尾部向尾部对齐；layout_constraintBaseline_toBaselineOf 文字的底部线对齐，用于含文本的控件对齐基线；layout_constraintDimensionRatio 宽高比&#34;2:1&#34;、&#34;H,2:1&#34;或&#34;W,2:1&#34;。 我们来简单实用ConstraintLayout来实现下面的布局，tv_1位于水平居中位置，tv_2位于tv_1的右侧，tv_3位于tv_1的下方，
&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&#34;http://schemas.android.com/apk/res/android&#34; xmlns:app=&#34;http://schemas.android.com/apk/res-auto&#34; android:layout_width=&#34;match_parent&#34; android:layout_height=&#34;match_parent&#34;&gt; &lt;TextView ...... android:id=&#34;@&#43;id/tv_1&#34; android:text=&#34;tv_1&#34; app:layout_constraintLeft_toLeftOf=&#34;parent&#34; tv_1的左边位于parent(父控件)的左边 app:layout_constraintRight_toRightOf=&#34;parent&#34; app:layout_constraintTop_toTopOf=&#34;parent&#34; /&gt; &lt;TextView ...... android:id=&#34;@&#43;id/tv_2&#34; app:layout_constraintLeft_toRightOf=&#34;@id/tv_1&#34; tv_2的左边位于tv_1的右边 app:layout_constraintRight_toRightOf=&#34;parent&#34; app:layout_constraintTop_toTopOf=&#34;parent&#34; /&gt; &lt;TextView ...... android:id=&#34;@&#43;id/tv_3&#34; android:text=&#34;tv_3&#34; app:layout_constraintLeft_toLeftOf=&#34;@id/tv_1&#34; app:layout_constraintTop_toBottomOf=&#34;@id/tv_1&#34; /&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; 效果如下：
以tv_3的layout_constraintLeft_toLeftOf=&#34;@id/tv_1&#34;来说，layout_constraintLeft表示tv_3的左边，toLeftOf表示tv_1的左边，意思就是说tv_3的左边位于tv_1的左边，如上图tv_3与tv_1左边对齐，那么tv_2的layout_constraintTop_toTopOf=&#34;parent&#34;表示tv_2的顶部在parent(父控件)的的顶部。
那么constraintLeft、constraintRight、constraintTop、constraintBottom则分别表示自身控件的左、右、上、下四个位置，toLeftOf、toRightOf、toTopOf、toBottomOf表示位于哪一个控件(后接控件ID)左、右、上、下。大致来说，constrainXXX表示自身的约束边，toXXXOf表示另一个View的边。
那么控件1和控件2文字对齐怎么办，layout_constraintBaseline_toBaselineOf表示文字基线对齐，什么是Baseline，就是文字底部基线
&lt;TextView android:id=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a6950d27ae30768417ddb36dca515eeb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-06T22:58:33+08:00" />
<meta property="article:modified_time" content="2022-07-06T22:58:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android ConstraintLayout约束布局的使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p><span style="color:#3399ea;">前言：回廊一寸相思地，落月成孤，背灯和月花阴，已是十年踪迹十年心。                                           —— 虞美人</span></p> 
</blockquote> 
<h2><span style="color:#3399ea;">一、概述</span></h2> 
<p>AndroidStudio3.0之前默认的根布局是RelativeLayout，但是3.0之后默认的根布局是ConstraintLayout(约束布局)，它作为一款强大的调整View位置和大小的ViewGroup被Google所推荐，ConstraintLayout能够以支持库的形式支持到最小的API 9，同时也在不断丰富API和功能，它能在复杂布局中有效降低布局层级，提高性能，使用更加灵活。</p> 
<p>但是约束布局不要乱用，因为它在测量子view的相对位置相对大小的时候，它的onmeasure()方法会被多次调用。</p> 
<p>我们来探讨一下ConstraintLayout的相关用法，新版的Android Studio在建立工程时会默认添加约束布局的依赖，如果没有添加则需要手动在build.gralde文件中添加依赖库：</p> 
<pre class="has"><code>implementation 'androidx.constraintlayout:constraintlayout:1.1.3'</code></pre> 
<h2><span style="color:#3399ea;">二、相关属性</span></h2> 
<h4>2.1 相对定位</h4> 
<p>相对定位，其实这个跟RelativeLayout差不多，一个View相对另一个View的位置，常用属性如下：</p> 
<ul><li>layout_constraintLeft_toLeftOf                   <span style="color:#86ca5e;"> 左边左对齐；</span></li><li>layout_constraintLeft_toRightOf                  <span style="color:#86ca5e;">左边右对齐；</span></li><li>layout_constraintRight_toLeftOf                  <span style="color:#86ca5e;">右边左对齐；</span></li><li>layout_constraintRight_toRightOf              <span style="color:#86ca5e;"> 右边右对齐；</span></li><li>layout_constraintTop_toTopOf                    <span style="color:#86ca5e;">上边顶部对齐；</span></li><li>layout_constraintTop_toBottomOf              <span style="color:#86ca5e;">上边底部对齐；</span></li><li>layout_constraintBottom_toTopOf              <span style="color:#86ca5e;">下边顶部对齐；</span></li><li>layout_constraintBottom_toBottomOf         <span style="color:#86ca5e;">下边底部对齐；</span></li><li>layout_constraintStart_toEndOf                 <span style="color:#86ca5e;"> 起始边向尾部对齐；</span></li><li>layout_constraintStart_toStartOf                 <span style="color:#86ca5e;">起始边向起始边对齐；</span></li><li>layout_constraintEnd_toStartOf                  <span style="color:#86ca5e;">尾部向起始边对齐；</span></li><li>layout_constraintEnd_toEndOf                   <span style="color:#86ca5e;">尾部向尾部对齐；</span></li><li>layout_constraintBaseline_toBaselineOf    <span style="color:#86ca5e;">文字的底部线对齐，用于含文本的控件对齐基线；</span></li><li>layout_constraintDimensionRatio               <span style="color:#86ca5e;">宽高比"2:1"、"H,2:1"或"W,2:1"。</span></li></ul> 
<p>我们来简单实用ConstraintLayout来实现下面的布局，tv_1位于水平居中位置，tv_2位于tv_1的右侧，tv_3位于tv_1的下方，</p> 
<pre class="has"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_1"
        android:text="tv_1"
        app:layout_constraintLeft_toLeftOf="parent"  tv_1的左边位于parent(父控件)的左边
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_2"
        app:layout_constraintLeft_toRightOf="@id/tv_1"  tv_2的左边位于tv_1的右边
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_3"
        android:text="tv_3"
        app:layout_constraintLeft_toLeftOf="@id/tv_1"
        app:layout_constraintTop_toBottomOf="@id/tv_1" /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>效果如下：</p> 
<p><img alt="" class="has" height="299" src="https://images2.imgbox.com/26/5c/I8Whi2gf_o.png" width="497"></p> 
<p>以tv_3的<span style="color:#f33b45;">layout_constraintLeft_toLeftOf="@id/tv_1"</span>来说，layout_constraintLeft表示tv_3的左边，toLeftOf表示tv_1的左边，意思就是说tv_3的左边位于tv_1的左边，如上图tv_3与tv_1左边对齐，那么tv_2的layout_constraintTop_toTopOf="parent"表示tv_2的顶部在parent(父控件)的的顶部。</p> 
<p>那么constraintLeft、constraintRight、constraintTop、constraintBottom则分别表示自身控件的左、右、上、下四个位置，toLeftOf、toRightOf、toTopOf、toBottomOf表示位于哪一个控件(后接控件ID)左、右、上、下。大致来说，constrainXXX表示自身的约束边，toXXXOf表示另一个View的边。</p> 
<p>那么控件1和控件2文字对齐怎么办，<span style="color:#f33b45;">layout_constraintBaseline_toBaselineOf</span>表示文字基线对齐，什么是Baseline，就是文字底部基线</p> 
<pre class="has"><code>    &lt;TextView
        android:id="@+id/tv_4"
        ......
        android:text="tv_4"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        android:id="@+id/tv_5"
        ......
        android:text="tv_5"
        app:layout_constraintBaseline_toBaselineOf="@+id/tv_4"
        app:layout_constraintLeft_toRightOf="@id/tv_4" /&gt;</code></pre> 
<p>效果如下图：</p> 
<p><img alt="" class="has" height="193" src="https://images2.imgbox.com/02/98/EQokU5FO_o.png" width="531"></p> 
<h4>2.2 边距</h4> 
<p><span style="color:#f33b45;"><strong>（1）margin</strong></span></p> 
<p>margin边距和平常使用的没有太大区别，但是要确定View的位置边距才能生效，如果没有确定位置设置边距是没有效果的，下面的tv_6没有确定View的位置，设置了<span style="color:#f33b45;">android:layout_margin="20dp"</span>；</p> 
<pre class="has"><code> &lt;TextView
    android:id="@+id/tv_6"
    ......
    android:layout_margin="20dp"
    android:text="tv_6" /&gt;</code></pre> 
<p>但是margin并没有生效，效果如下：</p> 
<p><img alt="" class="has" height="112" src="https://images2.imgbox.com/8e/02/4ADkywdd_o.png" width="361"></p> 
<p>那么我们将tv_6的位置确定后，margin就生效了；</p> 
<pre class="has"><code> &lt;TextView
    android:id="@+id/tv_6"
    .....
    android:layout_margin="20dp"
    android:text="tv_6"
    app:layout_constraintLeft_toLeftOf="parent"
    app:layout_constraintTop_toTopOf="parent" /&gt;
</code></pre> 
<p>tv_6确定在父控件的左上角，margin效果如下：</p> 
<p><img alt="" class="has" height="113" src="https://images2.imgbox.com/34/f4/AsR3oAQ1_o.png" width="360"></p> 
<p><span style="color:#f33b45;"><strong>（2）goneMargin</strong></span></p> 
<ul><li>layout_goneMarginLeft       <span style="color:#86ca5e;">  距离目标view左边，当前view与目标view绑定后，目标view设置Gone，当前view的goneMargin属性就会生效。</span></li><li>layout_goneMarginRight     <span style="color:#86ca5e;">  距离目标view右边，同上；</span></li><li>layout_goneMarginTop         <span style="color:#86ca5e;">距离目标view上边，同上；</span></li><li>layout_goneMarginBottom    <span style="color:#86ca5e;">距离目标view下边，同上。</span></li></ul> 
<p>ConstraintLayout提供了特殊的layout_goneMarginXXX属性，如果当前view与另一个view绑定后，当前view设置了goneMargin属性，当另一个view设置Gone(隐藏)后，goneMargin属性就会生效。但是注意，goneMargin属性只能作用于另一个view并且作用方向与goneMargin同一方向才会生效；当goneMarginXXX属性生效后，相对于的margin_XXX属性就会失效。</p> 
<pre class="has"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout .....&gt;

    &lt;TextView
        android:id="@+id/tv_7"
        ......
        android:layout_marginLeft="20dp"
        android:text="tv_7"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_goneMarginTop="20dp" /&gt;

    &lt;TextView
        android:id="@+id/tv_8"
        ......
        android:text="tv_8"
        app:layout_constraintLeft_toRightOf="@id/tv_7"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_goneMarginTop="20dp" /&gt;

    &lt;!--tv_9的app:layout_goneMarginLeft="20dp" 在tv_8设置了visibility="gone"才生效，因为tv_9在left方向绑定了tv_8 --&gt;
    &lt;TextView
        android:id="@+id/tv_9"
        ......
        android:text="tv_9"
        android:layout_marginLeft="50dp"
        app:layout_constraintLeft_toRightOf="@id/tv_8"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_goneMarginLeft="20dp"
        app:layout_goneMarginTop="20dp" /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>tv_7绑定于父控件，tv_8绑定于tv_7，tv_9绑定于tv_8；控件tv_7、tv_8、tv_9中都设置了<span style="color:#f33b45;">layout_goneMarginTop="20dp"</span>，tv_9中还设置了<span style="color:#f33b45;">android:layout_marginLeft="50dp"</span>和 <span style="color:#f33b45;">app:layout_goneMarginLeft="20dp"</span>属性，效果如下：</p> 
<p><img alt="" class="has" height="165" src="https://images2.imgbox.com/ed/a8/o2GdQJsR_o.png" width="547"></p> 
<p>当我们将tv_8设置Gone(隐藏)后，效果如下：</p> 
<p><img alt="" class="has" height="144" src="https://images2.imgbox.com/37/e8/QP1rqmcC_o.png" width="543"></p> 
<p>可以看到，只有tv_9中<span style="color:#f33b45;">app:layout_goneMarginLeft="20dp"</span>属性生效了，说明当前view(tv_9)于另一个view(tv_8)绑定后，当前view(tv_9)设置了goneMargin属性后，另一个view(tv_8)设置了Gone，当前view(tv_9)的goneMargin属性才会生效。</p> 
<p>tv_9中<span style="color:#f33b45;">android:layout_marginLeft="50dp"</span>由于找不到tv_8(Gone)所以ayout_marginLeft="50dp"失效了，当tv_8显示后才生效。控件tv_7、tv_8、tv_9中的<span style="color:#f33b45;">layout_goneMarginTop="20dp"</span>都没有生效，他们三都是top方向绑定于父控件，所以不会生效。</p> 
<p><span style="color:#f33b45;"><strong>（3）Centering positioning and bias</strong></span></p> 
<p>ConstraintLayout的居中是采用左右上下边的约束来居中，</p> 
<pre class="has"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout ......&gt;

    &lt;!--垂直居中--&gt;
    &lt;TextView
        ......
        android:text="tv_10"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"/&gt;

    &lt;!--水平居中--&gt;
    &lt;TextView
        ......
        android:text="tv_11"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;!--中心--&gt;
    &lt;TextView
        ......
        android:text="tv_12"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent"/&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>tv_10是垂直居中位置，tv_11是水平居中位置，tv_12是位于视图中间位置，效果如下：</p> 
<p><img alt="" class="has" height="446" src="https://images2.imgbox.com/a4/3a/HbimwP3v_o.png" width="304"></p> 
<p>ConstraintLayout也有类似LineraLayout的权重属性，在控件平分的基础上加入bias属性，可以按比例控制距离。</p> 
<ul><li>layout_constraintHorizontal_bias      <span style="color:#86ca5e;">水平权重分布，取值范围0-1，0表示最左，1表示最右，0.5表示在中间；</span></li><li>layout_constraintVertical_bias          <span style="color:#86ca5e;"> 垂直权重分布，取值范围0-1，0表示最上，1表示最下，0.5表示在中间。</span></li></ul> 
<pre class="has"><code>  &lt;!--垂直居中 app:layout_constraintHorizontal_bias="0.8"表示水平权重0.8
      tv_13相对于父控件横向偏差剩余空间的80%--&gt;
    &lt;TextView
        ......
        android:text="tv_13"
        app:layout_constraintHorizontal_bias="0.8"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"/&gt;</code></pre> 
<p><img alt="" class="has" height="108" src="https://images2.imgbox.com/a8/90/FFjbtm53_o.png" width="355"></p> 
<pre class="has"><code> &lt;!--水平居中 app:layout_constraintVertical_bias="0.3"表示垂直权重0.3
     tv_14相对于父控件横向偏差剩余空间的30%--&gt;
    &lt;TextView
        ......
        android:text="tv_14"
        app:layout_constraintVertical_bias="0.3"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;</code></pre> 
<p><img alt="" class="has" height="562" src="https://images2.imgbox.com/1b/e1/90AdIC6p_o.png" width="317"></p> 
<pre class="has"><code>&lt;!--配合使用，可以根据比例在视图的任何位置--&gt;
    &lt;TextView
        ......
        android:text="tv_15"
        app:layout_constraintVertical_bias="0.3"
        app:layout_constraintHorizontal_bias="0.3"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;</code></pre> 
<h4><img alt="" class="has" height="552" src="https://images2.imgbox.com/fe/a4/jsjB5Utg_o.png" width="312"></h4> 
<h4>2.3 圆形定位</h4> 
<p>圆形定位是指View的中心点相对于另外View中心点的位置，设计三个属性：</p> 
<ul><li>layout_constraintCircle             <span style="color:#86ca5e;">相对控件ID；</span></li><li>layout_constraintCircleAngle    <span style="color:#86ca5e;">相对角度，逆时针方向，取值范围0~360；</span></li><li>layout_constraintCircleRadius  <span style="color:#86ca5e;">圆的半径，相对控件的中心距离。</span></li></ul> 
<p><img alt="" class="has" height="392" src="https://images2.imgbox.com/1f/5c/kwusmoEI_o.png" width="869"></p> 
<pre class="has"><code>  &lt;!--tv_16中心点位于tv_17中心点200dp逆时针45度位置--&gt;
 &lt;TextView
        .....
        android:text="tv_16"
        app:layout_constraintCircle="@id/tv_17"
        app:layout_constraintCircleAngle="45"
        app:layout_constraintCircleRadius="200dp" /&gt;

    &lt;TextView
        ......
        android:text="tv_17"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;
</code></pre> 
<p>tv_16中心点位于tv_17中心点200dp逆时针45度位置，效果如下：</p> 
<p><img alt="" class="has" height="477" src="https://images2.imgbox.com/c5/61/JyTOFSKJ_o.png" width="315"></p> 
<h4>2.4 尺寸约束</h4> 
<p><strong><span style="color:#f33b45;">（1）设置最大最小尺寸</span></strong></p> 
<p>当ConstraintLayout的宽高为warp_content时，可以通过以下属性设置最大最小尺寸，注意宽高为match_parent时不会生效。</p> 
<ul><li>android:maxWidth         <span style="color:#86ca5e;">最大宽度；</span></li><li>android:maxHeight        <span style="color:#86ca5e;">最大高度；</span></li><li>android:minWidth          <span style="color:#86ca5e;">最小宽度；</span></li><li>android:minHeight         <span style="color:#86ca5e;">最小高度。</span></li></ul> 
<p><span style="color:#f33b45;"><strong>（2）百分比约束</strong></span></p> 
<p>在ConstraintLayout中控件有四种方式制定尺寸大小</p> 
<ul><li>指定具体尺寸值，比如100dp；</li><li>使用wrap_content，内容自适配；</li><li>使用mactch_partent，填充父控件；</li><li>设置0dp，即MATCH_CONSTRAINT，拓充可用空间。</li></ul> 
<p>第一二三种情况和以前的使用没有区别，但是在ConstraintLayout中不推荐使用mactch_partent，而推荐使用MATCH_CONSTRAINT(0dp)，第四种情况会根据控件的约束情况重新计算大小。我们来看看MATCH_CONSTRAINT(0dp)的使用：</p> 
<pre class="has"><code> &lt;TextView
        ......
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:text="tv_18"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;</code></pre> 
<p>layout_width="0dp"，控件与parent左右对齐，控件会横向填充整个父视图空间，效果如下：</p> 
<p><img alt="" class="has" height="137" src="https://images2.imgbox.com/5c/b4/ZNrnQUCi_o.png" width="403"></p> 
<p>在1.1版本之前，控件尺寸设置为warp_content，控件默认由组件文本大小控制，其他约束是不生效的，可以通过以下属性设置是否生效：</p> 
<ul><li>app:layout_constrainedWidth="true|false"</li><li>app:layout_constrainedHeight="true|false"</li></ul> 
<p>在1.1版本后，控件设置MATCH_CONSTRAINT(0dp)时，控件大小会拓展所有可用空间，可以通过以下属性改变控件的行为：</p> 
<ul><li>layout_constraintWidth_default="percent"        <span style="color:#86ca5e;">指定宽度是默认百分比；</span></li><li>layout_constraintWidth_percent="1"                 <span style="color:#86ca5e;">宽度占parent的百分比，取值范围0-1，百分数形式，1表示 100%；</span></li><li>layout_constraintHeight_default                      <span style="color:#86ca5e;"> 指定高度是默认百分比；</span></li><li>layout_constraintHeight_percent                      <span style="color:#86ca5e;">高度占parent的百分比，取值范围0-1，百分数形式，1表示 100%；</span></li><li>layout_constraintWidth_min                             <span style="color:#86ca5e;">最小宽度；</span></li><li>layout_constraintHeight_min                            <span style="color:#86ca5e;">最小高度；</span></li><li>layout_constraintWidth_max                            <span style="color:#86ca5e;">最大宽度；</span></li><li>layout_constraintHeight_max                           <span style="color:#86ca5e;">最大高度。</span></li></ul> 
<p>当ConstraintLayout子控件的宽高设置为MATCH_CONSTRAINT，即0dp，可以对宽高设置百分比，例如控件的宽度是屏幕宽度的50%，可以这样处理：</p> 
<pre class="has"><code> &lt;!--layout_constraintWidth_default指定按照百分比
    layout_constraintWidth_percent百分比值，控件宽度占父控件的比值--&gt;
    &lt;TextView
        ......
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        app:layout_constraintWidth_default="percent"
        app:layout_constraintWidth_percent="0.5"
        android:text="tv_19"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;</code></pre> 
<p><span style="color:#f33b45;">layout_constraintWidth_default</span>设置为percent，<span style="color:#f33b45;">layout_constraintWidth_percent</span>设置为0.5，表示占父控件空间50%，效果如下：</p> 
<p><img alt="" class="has" height="131" src="https://images2.imgbox.com/c3/d6/aylH88W8_o.png" width="407"></p> 
<p><span style="color:#f33b45;"><strong>（3）宽高比例约束</strong></span></p> 
<p>控件的宽高比，要求宽或者高至少有一个为0dp，然后设置如下属性，能根据已知值计算另一个值。</p> 
<ul><li>layout_constraintDimensionRatio       <span style="color:#86ca5e;">宽高比，比如，如果值为2:1，则表示宽高比例为2:1，如果值为w,2:1，也表示宽高比为2:1，也可以这样写，h,1:2，表示高宽比例为1:2。</span></li></ul> 
<pre class="has"><code>  &lt;!--layout_constraintDimensionRatio,指定宽高比，2:1表示宽高比为2:1，
    也可以表示为w,2:1  或者表示为h,1:2  高宽比为1:2 --&gt;
 &lt;TextView
        ......
        android:layout_width="300dp"
        android:layout_height="0dp"
        app:layout_constraintDimensionRatio="2:1"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;</code></pre> 
<p>这里宽度为300dp，宽高比为2:1，那么高度为150dp，如下图：</p> 
<p><img alt="" class="has" height="229" src="https://images2.imgbox.com/f6/2c/dDKnqoWC_o.png" width="396"></p> 
<p>如果宽和高都为0dp，系统会根据实际已知的宽高来计算，比如宽高都为0dp，宽高比例为1:1，但是宽度为屏幕宽度的一半，那么高度也是屏幕宽度的一半，如下图：</p> 
<pre class="has"><code>  &lt;TextView
        ......
        android:layout_width="0dp"
        android:layout_height="0dp"
        app:layout_constraintHeight_default="percent"
        app:layout_constraintWidth_percent="0.5"
        app:layout_constraintDimensionRatio="h,1:1"
        android:text="tv_21"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;</code></pre> 
<p><img alt="" class="has" height="144" src="https://images2.imgbox.com/d4/61/9ZyWtiN9_o.png" width="398"></p> 
<h4>2.5 链（chains）</h4> 
<p>在横轴或竖轴上的控件相互约束时，可以组成一个链式约束，这个属性有点像LinearLayout的weight平分布局。链在水平或者垂直方向提供一组类似行为。</p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/f2/e8/rWTrz6gV_o.png"></p> 
<p>上图为横向链，A与parent的左边缘约束，B与parent的右边缘约束，A的左边与右边之间约束，才能使用一条链。多个元素之间也是如此，最左和最右与parent约束，元素与元素之间约束，不然链式永远无法生效。</p> 
<p>横向链最左边的控件，垂直链最顶端的控件称为链头，如下图：</p> 
<p><img alt="" class="has" height="130" src="https://images2.imgbox.com/32/6c/51qEZxoy_o.png" width="726"></p> 
<p>可以通过两个属性链头统一制定链的样式：</p> 
<ul><li>layout_constraintVertical_chainStyle           <span style="color:#86ca5e;"> 水平方向链式；</span></li><li>layout_constraintHorizontal_chainStyle        <span style="color:#86ca5e;">垂直方向链式。</span></li></ul> 
<p>链式的样式的值有几个可选属性：</p> 
<ul><li>CHAIN_SPREAD                     <span style="color:#86ca5e;">展开样式，默认为展开；</span></li><li>Weighted chain                        <span style="color:#86ca5e;">在CHAIN_SPREAD 样式，部分控件设置了MATCH_CONSTRAINT，那他们将拓展可用空间；</span></li><li>CHAIN_SPREAD_INSIDE       <span style="color:#86ca5e;">展开样式，但是两端不展开；</span></li><li>CHAIN_PACKED                     <span style="color:#86ca5e;">抱团(打包)样式，控件抱团一起，通过偏移bias，可以改变packed元素的位置。</span></li></ul> 
<p><img alt="" class="has" src="https://images2.imgbox.com/67/00/WWYVkFWq_o.png"></p> 
<p>如下例子：</p> 
<pre class="has"><code>    &lt;TextView
        ......
        android:text="tv_22"
        app:layout_constraintHorizontal_chainStyle="spread"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toLeftOf="@+id/tv_23"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:text="tv_23"
        app:layout_constraintLeft_toRightOf="@id/tv_22"
        app:layout_constraintRight_toLeftOf="@id/tv_24"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:text="tv_24"
        app:layout_constraintLeft_toRightOf="@id/tv_23"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;</code></pre> 
<p>效果如下：</p> 
<p><img alt="" class="has" height="151" src="https://images2.imgbox.com/95/2a/AAFoYOyy_o.png" width="454"></p> 
<p>在链中，剩余空间默认平均给各元素，但是有时可以通过权重属性<span style="color:#f33b45;">layout_constraintVertical_weight</span>，来指定分配空间的大小。1.1版本之后，在链中使用边距时，边距是相加的，先除去边距在分配空间的大小。假设tv_22的右边距时10，tv_23的左边距是20，那么他们之间的边距就是30，在链式中，边距先从剩余空间中减去，再用剩余空间在元素之间进行定位。</p> 
<h4>2.6 优化器</h4> 
<p>在1.1之后公开了优化器，通过下的属性进行优化</p> 
<ul><li>layout_optimizationLevel            <span style="color:#86ca5e;">决定控件在哪方面进行优化。</span></li></ul> 
<p>优化的类型有一下几种：</p> 
<ul><li>none                    <span style="color:#86ca5e;">不进行优化；</span></li><li>standard              <span style="color:#86ca5e;">默认方式，仅仅优化direct和direct 约束；</span></li><li>direct                   <span style="color:#86ca5e;">优化direct约束；</span></li><li>barrier                 <span style="color:#86ca5e;">优化barrier约束；</span></li><li>chain                   <span style="color:#86ca5e;">优化链约束；</span></li><li>dimensions         <span style="color:#86ca5e;">优化尺寸，减少测量次数。</span></li></ul> 
<h2><span style="color:#3399ea;">三、工具类</span></h2> 
<h4>3.1 Guideline(参考线)</h4> 
<p>参考线实际不会在界面显示，只是在布局view的时候做一个参考。可以使用来部分控件与参考线对齐，设置Guideline的orientation来设置参考线是水平方向还是垂直方向，值为<code>vertical</code>和<code>horizontal，可以通过三种方式来定位</code>Guideline的位置：</p> 
<ul><li>layout_constraintGuide_begin        <span style="color:#86ca5e;">从左边或者顶部指定的具体距离，水平方向为左右距离，垂直方向为顶部和底部距离；</span></li><li>layout_constraintGuide_end           <span style="color:#86ca5e;">从右边或者底部指定的具体距离；</span></li><li>layout_constraintGuide_percent     <span style="color:#86ca5e;">从开始方向起，占父控件的百分比距离，取值范围0~1，百分比值，比如水平方向，取值0.5，那么参考线在屏幕宽度50%的位置，即屏幕中间。</span></li></ul> 
<pre class="has"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout ......&gt;

    &lt;!--layout_constraintGuide_begin：指定参考线起始位置，下面的控件于参考线对齐--&gt;
    &lt;androidx.constraintlayout.widget.Guideline
        android:id="@+id/guideLine"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_begin="20dp" /&gt;

    &lt;TextView
        ......
        android:text="tv_25"
        app:layout_constraintLeft_toLeftOf="@+id/guideLine"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:text="tv_26"
        app:layout_constraintLeft_toLeftOf="@+id/guideLine"
        app:layout_constraintTop_toBottomOf="@+id/tv_25" /&gt;

    &lt;TextView
        ......
        android:text="tv_27"
        app:layout_constraintLeft_toLeftOf="@+id/guideLine"
        app:layout_constraintTop_toBottomOf="@id/tv_26" /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>参考线在左边起20dp的位置，三个控件与参考线左对齐，效果如下</p> 
<p><img alt="" class="has" height="498" src="https://images2.imgbox.com/5c/0b/ttrvbZFC_o.png" width="463"></p> 
<h4>3.2 Barrier(栅栏)</h4> 
<p>Barrier有点类似Guideline，但是Barrier会根据所引用的控件尺寸变化重新定位，例如登录界面，左边的EditText输入框总洗完与左边的Text提示框最长边缘对齐，两个TextView中的最长那个长度发生变化，Barrier会跟着变化，左边的EditText输入框随之变化。</p> 
<ul><li>orientation                             <span style="color:#86ca5e;">Barrier的方向是平方向还是垂直方向，值为<code>vertical</code>和<code>horizontal</code>；</span></li><li>barrierDirection                     <span style="color:#86ca5e;">Barrier所引用控件所对齐的位置，有bottom、end、left、right、start、top几个值可选；</span></li><li>constraint_referenced_ids    <span style="color:#86ca5e;">所引用控件的id集合值，例如下面的Barrier以电话号码和密码为引用控件，则输入两个控件的id值，tv_phone，tv_password。</span></li></ul> 
<p>如下图：</p> 
<p><img alt="" class="has" height="370" src="https://images2.imgbox.com/d5/53/MgF5an3L_o.png" width="514"></p> 
<p>代码如下：</p> 
<pre class="has"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout ......&gt;

    &lt;!--orientation: 指定Barrier的方向是平方向还是垂直方向
        barrierDirection: Barrier所引用控件所对齐的位置
        constraint_referenced_ids: 引用控件id集合--&gt;

    &lt;androidx.constraintlayout.widget.Barrier
        android:id="@+id/barrier"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        app:barrierDirection="right"
        app:constraint_referenced_ids="tv_password,tv_phone" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_phone"
        android:text="电话号码"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_password"
        android:text="密码" 
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintTop_toBottomOf="@id/tv_phone" /&gt;

    &lt;EditText
        ......
        android:id="@+id/et_phone"
        android:hint="请输入手机号码"
        app:layout_constraintLeft_toLeftOf="@+id/barrier" /&gt;

    &lt;EditText
        ......
        android:id="@+id/et_password"
        android:hint="请输入密码"
        app:layout_constraintLeft_toLeftOf="@+id/barrier"
        app:layout_constraintTop_toBottomOf="@id/et_phone" /&gt;
&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<h4>3.3 Group (组)</h4> 
<p>用来控制一组View的可见性，如果View被多个Group控制，则以最后定义的Group可见性为准，</p> 
<ul><li>constraint_referenced_ids                  <span style="color:#86ca5e;">需要操作的控件的id集合。</span></li></ul> 
<p>举个例子，tv_28，tv_29，tv_30三个控件，Group控制tv_29，tv_30，Group隐藏前后如下图：</p> 
<pre class="has"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout ......&gt;

    &lt;!--Group:用来控制一组view
    constraint_referenced_ids: 存放控件id集合--&gt;
    &lt;androidx.constraintlayout.widget.Group
        android:id="@+id/group"
        android:visibility="gone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:constraint_referenced_ids="tv_29,tv_30" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_28"
        android:text="tv_28"
        app:layout_constraintHorizontal_chainStyle="packed"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toLeftOf="@+id/tv_29"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_29"
        android:text="tv_29"
        app:layout_constraintLeft_toRightOf="@+id/tv_28"
        app:layout_constraintRight_toLeftOf="@+id/tv_30"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_30"
        android:text="tv_30"
        app:layout_constraintLeft_toRightOf="@+id/tv_29"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>效果如下：</p> 
<p><img alt="" class="has" height="162" src="https://images2.imgbox.com/46/de/PYJQR8FC_o.png" width="391"><img alt="" class="has" height="163" src="https://images2.imgbox.com/78/1c/Tm3cKZbJ_o.png" width="388"></p> 
<h4>3.4 Placeholder(占位符)</h4> 
<p>一个view的占位符，当指定一个Placeholder的content属性为另一个view的id时，该view本身就会被gone掉，然后装载到Placeholder的位置。相当于把一个View当前位置移动到另外指定的位置。我们来看代码效果吧：</p> 
<p>tv_28没有被设置到Placeholder时，显示在左上角；tv_28被设置到Placeholder后，显示在屏幕中央。</p> 
<pre class="has"><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;androidx.constraintlayout.widget.ConstraintLayout ......&gt;

    &lt;!--content:占位符
    content: 替换控件的id--&gt;
    &lt;androidx.constraintlayout.widget.Placeholder
        android:id="@+id/placeholder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        app:content="@id/tv_28"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_28"
        android:text="tv_28"
        app:layout_constraintHorizontal_chainStyle="packed"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toLeftOf="@+id/tv_29"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_29"
        android:text="tv_29"
        app:layout_constraintLeft_toRightOf="@+id/tv_28"
        app:layout_constraintRight_toLeftOf="@+id/tv_30"
        app:layout_constraintTop_toTopOf="parent" /&gt;

    &lt;TextView
        ......
        android:id="@+id/tv_30"
        android:text="tv_30"
        app:layout_constraintLeft_toRightOf="@+id/tv_29"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" /&gt;

&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</code></pre> 
<p>也可以用代码设置：</p> 
<pre class="has"><code>Placeholder placeholder = findViewById(R.id.placeholder);
placeholder.setContentId(R.id.tv_28);</code></pre> 
<p>如下左图，tv_28没有被设置到Placeholder时，下右图，tv_28被设置到Placeholder后</p> 
<p><img alt="" class="has" height="428" src="https://images2.imgbox.com/57/2d/4No57jnb_o.png" width="277"><img alt="" class="has" height="428" src="https://images2.imgbox.com/08/ee/PFOAUx2b_o.gif" width="276"></p> 
<p>另外ConstraintLayout还能通过拖拽来防止控件的位置，这里就不演示了，可以自己试一下。</p> 
<h4>点关注，不迷路</h4> 
<hr> 
<p>好了各位，以上就是这篇文章的全部内容了，能看到这里的人呀，都是人才。</p> 
<p>我是suming，感谢各位的支持和认可，您的**点赞、评论、收藏**【一键三连】就是我创作的最大动力，我们下篇文章见！</p> 
<p>如果本篇博客有任何错误，请批评指教，不胜感激 ！</p> 
<p>要想成为一个优秀的安卓开发者，这里有必须要掌握的<a href="https://github.com/FollowExcellence/Android-Core-Realm" title="知识架构">知识架构</a>，一步一步朝着自己的梦想前进！Keep Moving!</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8e42ed2333dc708e92bdfeecb0a3670f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;模型部署：qt&#43;yolov5/6&#43;onnxruntime&#43;opencv</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5f40dcbee5ca64cecca256ab16d87b8a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java任务队列__将一段代码放入另一个线程运行</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>