<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>NAL单元介绍（网络抽象层单元（Network Abstraction Layer Unit，简称NALU））（H.264/AVC或H.265/HEVC编码重要组成部分，用于封装视频数据和相关信息） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="NAL单元介绍（网络抽象层单元（Network Abstraction Layer Unit，简称NALU））（H.264/AVC或H.265/HEVC编码重要组成部分，用于封装视频数据和相关信息）" />
<meta property="og:description" content="文章目录 视频流NAL单元（NALU）介绍一、H.264/AVC编码和NALU的关系H.264/AVC编码概述NALU在H.264/AVC中的作用 二、NALU的结构头部禁止位（forbidden_zero_bit）NAL引用指数（nal_ref_idc）NAL单元类型（nal_unit_type） 负载部分 三、NALU的类型帧内预测（I）片预测（P）片双向预测（B）片序列参数集（SPS）图像参数集（PPS） 四、NALU在实际应用中的处理 视频流NAL单元（NALU）介绍 网络抽象层单元（Network Abstraction Layer Unit，简称NALU）是H.264/AVC或H.265/HEVC编码的重要组成部分。它用于封装视频数据和相关信息，并在网络中传输这些封装的单元。
因为篇幅有限，我们能仅以H.264/AVC中的NALU作为案例来介绍。
一、H.264/AVC编码和NALU的关系 H.264/AVC编码概述 H.264/AVC是一种广泛使用的视频压缩标准，设计目标是以较低的比特率提供高质量的视频。它通过多种技术实现压缩效果，包括帧内预测、帧间预测、变换编码、环路滤波等。这些方法可以有效地减少视频的冗余信息，从而实现高效的压缩。
NALU在H.264/AVC中的作用 在H.264/AVC中，视频数据首先被转化为图像块，然后通过各种技术进行编码。编码后的数据再被封装到NALU中，以便于在网络中传输。
NALU不仅封装了编码后的视频数据，还包含了其他重要的信息，例如参数集、时间戳等。这些信息对于解码和播放视频至关重要。
二、NALU的结构 一个NALU由一个头部和一个负载部分组成。
头部 头部是NALU的固定部分，占1字节。它包含了以下信息：
禁止位（forbidden_zero_bit） 1比特，必须为0。
NAL引用指数（nal_ref_idc） 2比特，表示该NALU的重要性。值越大，重要性越高。
NAL单元类型（nal_unit_type） 5比特，表示NALU的类型。例如，类型可以是编码的视频数据、参数集等。
负载部分 负载部分是NALU的可变部分，包含了封装的数据。其内容取决于NALU的类型。
三、NALU的类型 在H.264/AVC中，定义了多种NALU的类型，以适应不同的应用场景。下面是一些常见的类型：
帧内预测（I）片 仅使用当前帧的信息进行编码。
预测（P）片 使用前一帧的信息进行编码。
双向预测（B）片 使用前一帧和后一帧的信息进行编码。
序列参数集（SPS） 包含了一组连续图像的编码信息。
图像参数集（PPS） 包含了一个图像的编码信息。
四、NALU在实际应用中的处理 在实际应用中，需要对NALU进行解析和打包等处理。这些处理需要理解NALU的结构和类型，以及如何在网络中传输NALU。
以下是一个简单的示例，说明如何使用Python解析NALU：
def parse_nalu(data): # 输入：二进制数据 # 输出：NALU的头部和负载部分 # 头部占1字节 header = data[0] # 解析头部信息 forbidden_zero_bit = header &gt;&gt; 7 nal_ref_idc = (header &gt;&gt; 5) &amp; 0x03 nal_unit_type = header &amp; 0x1F # 负载部分是除了头部之外的剩余数据 payload = data[1:] return forbidden_zero_bit, nal_ref_idc, nal_unit_type, payload 以上就是对视频流NAL单元（NALU）的详细介绍。总的来说，NALU是H." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/154129f22a0398eb04c088843842e0d8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T09:45:00+08:00" />
<meta property="article:modified_time" content="2024-01-10T09:45:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">NAL单元介绍（网络抽象层单元（Network Abstraction Layer Unit，简称NALU））（H.264/AVC或H.265/HEVC编码重要组成部分，用于封装视频数据和相关信息）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#NALNALU_1" rel="nofollow">视频流NAL单元（NALU）介绍</a></li><li><ul><li><a href="#H264AVCNALU_7" rel="nofollow">一、H.264/AVC编码和NALU的关系</a></li><li><ul><li><a href="#H264AVC_9" rel="nofollow">H.264/AVC编码概述</a></li><li><a href="#NALUH264AVC_13" rel="nofollow">NALU在H.264/AVC中的作用</a></li></ul> 
   </li><li><a href="#NALU_19" rel="nofollow">二、NALU的结构</a></li><li><ul><li><a href="#_23" rel="nofollow">头部</a></li><li><ul><li><a href="#forbidden_zero_bit_27" rel="nofollow">禁止位（forbidden_zero_bit）</a></li><li><a href="#NALnal_ref_idc_29" rel="nofollow">NAL引用指数（nal_ref_idc）</a></li><li><a href="#NALnal_unit_type_31" rel="nofollow">NAL单元类型（nal_unit_type）</a></li></ul> 
    </li><li><a href="#_34" rel="nofollow">负载部分</a></li></ul> 
   </li><li><a href="#NALU_38" rel="nofollow">三、NALU的类型</a></li><li><ul><li><a href="#I_42" rel="nofollow">帧内预测（I）片</a></li><li><a href="#P_44" rel="nofollow">预测（P）片</a></li><li><a href="#B_46" rel="nofollow">双向预测（B）片</a></li><li><a href="#SPS_48" rel="nofollow">序列参数集（SPS）</a></li><li><a href="#PPS_50" rel="nofollow">图像参数集（PPS）</a></li></ul> 
   </li><li><a href="#NALU_53" rel="nofollow">四、NALU在实际应用中的处理</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="NALNALU_1"></a>视频流NAL单元（NALU）介绍</h2> 
<p>网络抽象层单元（Network Abstraction Layer Unit，简称NALU）是H.264/AVC或H.265/HEVC编码的重要组成部分。它用于封装视频数据和相关信息，并在网络中传输这些封装的单元。</p> 
<p>因为篇幅有限，我们能仅以H.264/AVC中的NALU作为案例来介绍。</p> 
<h3><a id="H264AVCNALU_7"></a>一、H.264/AVC编码和NALU的关系</h3> 
<h4><a id="H264AVC_9"></a>H.264/AVC编码概述</h4> 
<p>H.264/AVC是一种广泛使用的视频压缩标准，设计目标是以较低的比特率提供高质量的视频。它通过多种技术实现压缩效果，包括帧内预测、帧间预测、变换编码、环路滤波等。这些方法可以有效地减少视频的冗余信息，从而实现高效的压缩。</p> 
<h4><a id="NALUH264AVC_13"></a>NALU在H.264/AVC中的作用</h4> 
<p>在H.264/AVC中，视频数据首先被转化为图像块，然后通过各种技术进行编码。编码后的数据再被封装到NALU中，以便于在网络中传输。</p> 
<p>NALU不仅封装了编码后的视频数据，还包含了其他重要的信息，例如参数集、时间戳等。这些信息对于解码和播放视频至关重要。</p> 
<h3><a id="NALU_19"></a>二、NALU的结构</h3> 
<p>一个NALU由一个头部和一个负载部分组成。</p> 
<h4><a id="_23"></a>头部</h4> 
<p>头部是NALU的固定部分，占1字节。它包含了以下信息：</p> 
<h5><a id="forbidden_zero_bit_27"></a>禁止位（forbidden_zero_bit）</h5> 
<p>1比特，必须为0。</p> 
<h5><a id="NALnal_ref_idc_29"></a>NAL引用指数（nal_ref_idc）</h5> 
<p>2比特，表示该NALU的重要性。值越大，重要性越高。</p> 
<h5><a id="NALnal_unit_type_31"></a>NAL单元类型（nal_unit_type）</h5> 
<p>5比特，表示NALU的类型。例如，类型可以是编码的视频数据、参数集等。</p> 
<h4><a id="_34"></a>负载部分</h4> 
<p>负载部分是NALU的可变部分，包含了封装的数据。其内容取决于NALU的类型。</p> 
<h3><a id="NALU_38"></a>三、NALU的类型</h3> 
<p>在H.264/AVC中，定义了多种NALU的类型，以适应不同的应用场景。下面是一些常见的类型：</p> 
<h4><a id="I_42"></a>帧内预测（I）片</h4> 
<p>仅使用当前帧的信息进行编码。</p> 
<h4><a id="P_44"></a>预测（P）片</h4> 
<p>使用前一帧的信息进行编码。</p> 
<h4><a id="B_46"></a>双向预测（B）片</h4> 
<p>使用前一帧和后一帧的信息进行编码。</p> 
<h4><a id="SPS_48"></a>序列参数集（SPS）</h4> 
<p>包含了一组连续图像的编码信息。</p> 
<h4><a id="PPS_50"></a>图像参数集（PPS）</h4> 
<p>包含了一个图像的编码信息。</p> 
<h3><a id="NALU_53"></a>四、NALU在实际应用中的处理</h3> 
<p>在实际应用中，需要对NALU进行解析和打包等处理。这些处理需要理解NALU的结构和类型，以及如何在网络中传输NALU。</p> 
<p>以下是一个简单的示例，说明如何使用Python解析NALU：</p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">parse_nalu</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 输入：二进制数据</span>
    <span class="token comment"># 输出：NALU的头部和负载部分</span>

    <span class="token comment"># 头部占1字节</span>
    header <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

    <span class="token comment"># 解析头部信息</span>
    forbidden_zero_bit <span class="token operator">=</span> header <span class="token operator">&gt;&gt;</span> <span class="token number">7</span>
    nal_ref_idc <span class="token operator">=</span> <span class="token punctuation">(</span>header <span class="token operator">&gt;&gt;</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">0x03</span>
    nal_unit_type <span class="token operator">=</span> header <span class="token operator">&amp;</span> <span class="token number">0x1F</span>

    <span class="token comment"># 负载部分是除了头部之外的剩余数据</span>
    payload <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

    <span class="token keyword">return</span> forbidden_zero_bit<span class="token punctuation">,</span> nal_ref_idc<span class="token punctuation">,</span> nal_unit_type<span class="token punctuation">,</span> payload
</code></pre> 
<hr> 
<p>以上就是对视频流NAL单元（NALU）的详细介绍。总的来说，NALU是H.264/AVC编码的重要组成部分，理解其工作原理和应用方法，对于视频编解码和传输技术的学习具有重要意义。</p> 
<p>ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍<br> ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ        ‌‍ᅟᅠ</p> 
<hr>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/73a5bad27aa288b036b1dbe5eb7db772/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Jenkins流水线怎么做？</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/abb56a2f3301c8febca1cb5a6fe3a8c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【flink番外篇】10、对有状态或及时 UDF 和自定义算子进行单元测试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>