<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>fragment简介 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="fragment简介" />
<meta property="og:description" content="Fragment 文章目录 Fragment1、什么是Fragment2、为什么要有Fragment3、Fragment有什么优点4、Fragment的生命周期5、Fragment使用的一些方法**1.将 fragment添加到Activity的两种方式**a.静态注册：以标签的形式添加到Activity的布局当中。b.动态注册：通过java代码将fragment添加到已存在的宿主Activity中 **2.Fragment与Activity的交互**a.组件获取b.数据传递 1、什么是Fragment ​ 1.Fragment是Android3.0开始新增的概念，意为碎片、片段。 Fragment是依赖于Activity的，不能独立存在的。
2、为什么要有Fragment ​ 1.Android运行在各种各样的设备中，有小屏幕的手机，还有大屏幕的平板，电视等。同样的界面在手机上显示可能很好看，在大屏幕的平板上就未必了，手机的界面放在平板上可能会有过分被拉长、控件间距过大等情况。针对屏幕尺寸的差距，Fragment的出现能做到一个App可以同时适应手机和平板。这就是为什么要有Fragment的原因。
3、Fragment有什么优点 1.Fragment可以将Activity分离成多个可重用的组件，不需要把代码都写到Activity中，且每个Fragment都有它自己的生命周期和UI。
2.Fragment可以轻松得创建动态灵活的UI设计，可以适应于不同的屏幕尺寸。从手机到平板电脑。
3.Fragment是一个独立的模块,紧紧地与Activity绑定在一起。可以在Activity运行中动态地移除、加入、交换等。
4.Fragment 切换流畅，轻量切换。
5.Fragment 在4.2.版本中新增嵌套fragment使用方法，能够生成更好的界面效
总结起来就是模块化，可重用，可适配
4、Fragment的生命周期 Activity加载Fragment的时候,依次调用下面的方法: onAttach -&gt; onCreate -&gt; onCreateView -&gt; onActivityCreate -&gt; onStart -&gt;onResume当我们弄出一个悬浮的对话框风格的Activity,或者其他,就是让Fragment所在的Activity可见,但不获得焦点 onPause当对话框关闭,Activity又获得了焦点: onResume当我们替换Fragment,并调用addToBackStack()将他添加到Back栈中 onPause -&gt; onStop -&gt; onDestoryView ！！注意,此时的Fragment还没有被销毁哦!!!当我们按下键盘的回退键，Fragment会再次显示出来: onCreateView -&gt; onActivityCreate -&gt; onStart -&gt; onResume如果我们替换后,在事务commit之前**没有调用addToBackStack()**方法将 Fragment添加到back栈中的话;又或者退出了Activity的话,那么Fragment将会被完全结束, Fragment会进入销毁状态 onPause -&gt; onStop -&gt; onDestoryView -&gt; onDestory -&gt; onDetach 5、Fragment使用的一些方法 1.将 fragment添加到Activity的两种方式 a.静态注册：以标签的形式添加到Activity的布局当中。 b.动态注册：通过java代码将fragment添加到已存在的宿主Activity中 ​ 1.FragmentManager：用来管理Activity中的fragment,app包中使用getFragmentManager() v4包中getSupportFragmentManager
​ 2.FragmentTransaction:事务,用来添加，移除，替换fragment,FragmentTransaction transaction = fm." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4e21215bd060e64d0f047b48aa867f61/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-10T20:40:07+08:00" />
<meta property="article:modified_time" content="2021-08-10T20:40:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">fragment简介</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Fragment_0"></a>Fragment</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#Fragment_0" rel="nofollow">Fragment</a></li><li><ul><li><a href="#1Fragment_4" rel="nofollow">1、什么是Fragment</a></li><li><a href="#2Fragment_10" rel="nofollow">2、为什么要有Fragment</a></li><li><a href="#3Fragment_16" rel="nofollow">3、Fragment有什么优点</a></li><li><a href="#4Fragment_32" rel="nofollow">4、Fragment的生命周期</a></li><li><a href="#5Fragment_45" rel="nofollow">5、Fragment使用的一些方法</a></li><li><ul><li><ul><li><a href="#1_fragmentActivity_47" rel="nofollow">**1.将 fragment添加到Activity的两种方式**</a></li><li><ul><li><a href="#afragmentActivity_49" rel="nofollow">a.静态注册：以标签的形式添加到Activity的布局当中。</a></li><li><a href="#bjavafragmentActivity_53" rel="nofollow">b.动态注册：通过java代码将fragment添加到已存在的宿主Activity中</a></li></ul> 
     </li><li><a href="#2FragmentActivity_75" rel="nofollow">**2.Fragment与Activity的交互**</a></li><li><ul><li><a href="#a_79" rel="nofollow">a.组件获取</a></li><li><a href="#b_85" rel="nofollow">b.数据传递</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1Fragment_4"></a>1、什么是Fragment</h3> 
<p>​ 1.Fragment是Android3.0开始新增的概念，意为碎片、片段。 <strong>Fragment是依赖于Activity的，不能独立存在的。</strong></p> 
<h3><a id="2Fragment_10"></a>2、为什么要有Fragment</h3> 
<p>​ 1.Android运行在各种各样的设备中，有小屏幕的手机，还有大屏幕的平板，电视等。同样的界面在手机上显示可能很好看，在大屏幕的平板上就未必了，手机的界面放在平板上可能会有过分被拉长、控件间距过大等情况。针对屏幕尺寸的差距，Fragment的出现能做到一个App可以同时适应手机和平板。这就是为什么要有Fragment的原因。</p> 
<h3><a id="3Fragment_16"></a>3、Fragment有什么优点</h3> 
<p>1.Fragment可以将Activity分离成多个可重用的组件，不需要把代码都写到Activity中，且每个Fragment都有它自己的生命周期和UI。</p> 
<p>2.Fragment可以轻松得创建动态灵活的UI设计，可以适应于不同的屏幕尺寸。从手机到平板电脑。</p> 
<p>3.Fragment是一个独立的模块,紧紧地与Activity绑定在一起。可以在Activity运行中动态地移除、加入、交换等。</p> 
<p>4.Fragment 切换流畅，轻量切换。</p> 
<p>5.Fragment 在4.2.版本中新增嵌套fragment使用方法，能够生成更好的界面效</p> 
<p>总结起来就是模块化，可重用，可适配</p> 
<h3><a id="4Fragment_32"></a>4、Fragment的生命周期</h3> 
<p><img src="https://images2.imgbox.com/16/51/h5jzD41Z_o.png" alt="img"></p> 
<ul><li>Activity加载Fragment的时候,依次调用下面的方法: <strong>onAttach</strong> -&gt; <strong>onCreate</strong> -&gt; <strong>onCreateView</strong> -&gt; <strong>onActivityCreate</strong> -&gt; <strong>onStart</strong> -&gt;<strong>onResume</strong></li><li>当我们弄出一个悬浮的对话框风格的Activity,或者其他,就是让Fragment所在的Activity可见,但不获得焦点 <strong>onPause</strong></li><li>当对话框关闭,Activity又获得了焦点: <strong>onResume</strong></li><li>当我们替换Fragment,并调用addToBackStack()将他添加到Back栈中 <strong>onPause -&gt; onStop -&gt; onDestoryView</strong> ！！<strong>注意</strong>,此时的Fragment还没有被销毁哦!!!</li><li>当我们按下键盘的回退键，Fragment会再次显示出来: <strong>onCreateView -&gt; onActivityCreate -&gt; onStart -&gt; onResume</strong></li><li>如果我们替换后,在事务commit之前**没有调用addToBackStack()**方法将 Fragment添加到back栈中的话;又或者退出了Activity的话,那么Fragment将会被完全结束, Fragment会进入销毁状态 <strong>onPause</strong> -&gt; <strong>onStop</strong> -&gt; <strong>onDestoryView</strong> -&gt; <strong>onDestory</strong> -&gt; <strong>onDetach</strong></li></ul> 
<h3><a id="5Fragment_45"></a>5、Fragment使用的一些方法</h3> 
<h5><a id="1_fragmentActivity_47"></a><strong>1.将 fragment添加到Activity的两种方式</strong></h5> 
<h6><a id="afragmentActivity_49"></a>a.静态注册：以标签的形式添加到Activity的布局当中。</h6> 
<p><img src="https://images2.imgbox.com/d9/60/55bCPTE0_o.png" alt="img"></p> 
<h6><a id="bjavafragmentActivity_53"></a>b.动态注册：通过java代码将fragment添加到已存在的宿主Activity中</h6> 
<p><img src="https://images2.imgbox.com/00/a4/h4x6yeb5_o.png" alt="img"></p> 
<p>​ 1.FragmentManager：用来管理Activity中的fragment,app包中使用getFragmentManager() v4包中getSupportFragmentManager</p> 
<p>​ 2.FragmentTransaction:事务,用来添加，移除，替换fragment,FragmentTransaction transaction = fm.benginTransatcion();//开启一个事务</p> 
<p>​ 3.transaction.add() :往Activity中添加一个Fragment</p> 
<p>​ 4.transaction.remove() :从Activity中移除一个Fragment，如果被移除的Fragment没有添加到回退栈，这个Fragment实例将会被销毁。</p> 
<p>​ 5.transaction.replace():使用另一个Fragment替换当前的，实际上就是remove()然后add()的合体~</p> 
<p>​ 6.transaction.hide()：隐藏当前的Fragment，仅仅是设为不可见，并不会销毁</p> 
<p>​ 7.transaction.show()：显示之前隐藏的Fragment</p> 
<p>​ 8.transaction.commit():提交一个事务</p> 
<p>​ 9.detach()：会将view从UI中移除,和remove()不同,此时fragment的状态依然由FragmentManager维护。</p> 
<h5><a id="2FragmentActivity_75"></a><strong>2.Fragment与Activity的交互</strong></h5> 
<p><img src="https://images2.imgbox.com/08/7f/j7fyg7o8_o.png" alt="img"></p> 
<h6><a id="a_79"></a>a.组件获取</h6> 
<p>​ 1.Fragment获得Activity中的组件: getActivity().findViewById(R.id.list)；</p> 
<p>​ 2.Activity获得Fragment中的组件(根据id和tag都可以)： getFragmentManager.findFragmentByid(R.id.fragment1);</p> 
<h6><a id="b_85"></a>b.数据传递</h6> 
<p>​ 1. Activit传递数据给Fragment：在Activity中创建Bundle数据包,调用Fragment实例的setArguments(bundle) 从而将Bundle数据包传给Fragment,然后Fragment中调用getArguments获得 Bundle对象,然后进行解析就可以了</p> 
<p>​ 2. Fragment传递数据给Activity ：在Fragment中定义一个内部回调接口,再让包含该Fragment的Activity实现该回调接口, Fragment就可以通过回调接口传数据了</p> 
<p><strong>定义一个回调接口</strong></p> 
<pre><code class="prism language-java"><span class="token comment">/*接口*/</span>  
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CallBack</span><span class="token punctuation">{<!-- --></span>  
    <span class="token comment">/*定义一个获取信息的方法*/</span>  
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">String</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span> 
</code></pre> 
<p><strong>接口回调（Fragment中）</strong></p> 
<pre><code class="prism language-java"><span class="token comment">/*接口回调*/</span>  
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token class-name">CallBack</span> callBack<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>  
    <span class="token comment">/*获取文本框的信息，也可以传其他参数*/</span> 
    <span class="token class-name">String</span> msg <span class="token operator">=</span> editText<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
    callBack<span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span>  
</code></pre> 
<p><strong>使用接口回调方法读数据(Activity中)</strong></p> 
<pre><code class="prism language-java"><span class="token comment">/* 使用接口回调的方法获取数据 */</span>  
leftFragment<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">CallBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>  
 <span class="token annotation punctuation">@Override</span>  
       <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token class-name">String</span> result<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>              
           	<span class="token comment">/*打印信息*/</span>
            <span class="token class-name">Toast</span><span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span><span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">"--&gt;&gt;"</span> <span class="token operator">+</span> result<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> 
<p>​ 3. Fragment与Fragment之间的数据互传：找到需要接收数据的Fragment对象直接调用setArguments传数据就行了</p> 
<pre><code class="prism language-java"><span class="token class-name">FragmentManager</span> fManager <span class="token operator">=</span> <span class="token function">getSupportFragmentManager</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">FragmentTransaction</span> fTransaction <span class="token operator">=</span> fManager<span class="token punctuation">.</span><span class="token function">beginTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Fragmentthree</span> t1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fragmentthree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Fragmenttwo</span> t2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fragmenttwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Bundle</span> bundle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">"key"</span><span class="token punctuation">,</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
t2<span class="token punctuation">.</span><span class="token function">setArguments</span><span class="token punctuation">(</span>bundle<span class="token punctuation">)</span><span class="token punctuation">;</span>
fTransaction<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>fragmentRoot<span class="token punctuation">,</span> t2<span class="token punctuation">,</span> <span class="token string">"~~~"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
fTransaction<span class="token punctuation">.</span><span class="token function">addToBackStack</span><span class="token punctuation">(</span>t1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//接收一个名字返回栈的状态</span>
fTransaction<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cdc6659374db35e20362b99e3f562d43/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">我的世界服务器金币抽奖系统,[娱乐|综合][PCD]Pcj ——【动态转盘GUI抽奖】多种奖励,多种功能[1.7.2-1.8.8]...</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/07149beacf1196c0ec38e812ca4fb559/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">悦起无盘客户端怎么连服务器,Staxel怎么联机 直连以及服务器连接教程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>