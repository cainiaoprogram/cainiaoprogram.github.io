<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python模块学习——logging - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python模块学习——logging" />
<meta property="og:description" content="logging模块是在2.3新引进的功能，下面是一些常用的类和模块级函数
模块级函数
logging.getLogger([name]):返回一个logger对象，如果没有指定名字将返回root logger
logging.debug()、logging.info()、logging.warning()、logging.error()、logging.critical()：设定root logger的日志级别
logging.basicConfig():用默认Formatter为日志系统建立一个StreamHandler，设置基础配置并加到root logger中
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
import logging
import sys
LEVELS = {&#39;debug&#39;: logging.DEBUG,
&#39;info&#39;: logging.INFO,
&#39;warning&#39;: logging.WARNING,
&#39;error&#39;: logging.ERROR,
&#39;critical&#39;: logging.CRITICAL}
if len(sys.argv) &gt; 1:
level_name = sys.argv[1]
level = LEVELS.get(level_name, logging.NOTSET)
logging.basicConfig(level=level)
logging.debug(&#39;This is a debug message&#39;)
logging.info(&#39;This is an info message&#39;)
logging.warning(&#39;This is a warning message&#39;)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/61c9f47bcc1ca8340434df8e3b92ebd9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-13T13:57:11+08:00" />
<meta property="article:modified_time" content="2018-09-13T13:57:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python模块学习——logging</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>logging模块是在2.3新引进的功能，下面是一些常用的类和模块级函数</p> 
<p> </p> 
<p> </p> 
<p><strong>模块级函数</strong></p> 
<p>logging.getLogger([name]):返回一个logger对象，如果没有指定名字将返回root logger</p> 
<p>logging.debug()、logging.info()、logging.warning()、logging.error()、logging.critical()：设定root logger的日志级别</p> 
<p>logging.basicConfig():用默认Formatter为日志系统建立一个StreamHandler，设置基础配置并加到root logger中</p> 
<p> </p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> </td><td> <p><code>import</code> <code>logging</code></p> <p><code>import</code> <code>sys</code></p> <p> </p> <p><code>LEVELS </code><code>=</code> <code>{<!-- --></code><code>'debug'</code><code>: logging.DEBUG,</code></p> <p><code>          </code><code>'info'</code><code>: logging.INFO,</code></p> <p><code>          </code><code>'warning'</code><code>: logging.WARNING,</code></p> <p><code>          </code><code>'error'</code><code>: logging.ERROR,</code></p> <p><code>          </code><code>'critical'</code><code>: logging.CRITICAL}</code></p> <p> </p> <p><code>if</code> <code>len</code><code>(sys.argv) &gt; </code><code>1</code><code>:</code></p> <p><code>    </code><code>level_name </code><code>=</code> <code>sys.argv[</code><code>1</code><code>]</code></p> <p><code>    </code><code>level </code><code>=</code> <code>LEVELS.get(level_name, logging.NOTSET)</code></p> <p><code>    </code><code>logging.basicConfig(level</code><code>=</code><code>level)</code></p> <p> </p> <p><code>logging.debug(</code><code>'This is a debug message'</code><code>)</code></p> <p><code>logging.info(</code><code>'This is an info message'</code><code>)</code></p> <p><code>logging.warning(</code><code>'This is a warning message'</code><code>)</code></p> <p><code>logging.error(</code><code>'This is an error message'</code><code>)</code></p> <p><code>logging.critical(</code><code>'This is a critical error message'</code><code>)</code></p> </td></tr></tbody></table> 
<p> </p> 
<pre> </pre> 
<pre>$ python logging_level_example.py debug DEBUG:root:This is a debug message INFO:root:This is an info message WARNING:root:This is a warning message ERROR:root:This is an error message CRITICAL:root:This is a critical error message $ python logging_level_example.py info INFO:root:This is an info message WARNING:root:This is a warning message ERROR:root:This is an error message CRITICAL:root:This is a critical error message</pre> 
<p> </p> 
<p> </p> 
<p><strong>Loggers</strong></p> 
<p>Logger.setLevel(lel):指定最低的日志级别，低于lel的级别将被忽略。debug是最低的内置级别，critical为最高</p> 
<p>Logger.addFilter(filt)、Logger.removeFilter(filt):添加或删除指定的filter</p> 
<p>Logger.addHandler(hdlr)、Logger.removeHandler(hdlr)：增加或删除指定的handler</p> 
<p>Logger.debug()、Logger.info()、Logger.warning()、Logger.error()、Logger.critical()：可以设置的日志级别</p> 
<p> </p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> <p>20</p> <p>21</p> <p>22</p> <p>23</p> <p>24</p> <p>25</p> </td><td> <p><code>import</code> <code>logging</code></p> <p> </p> <p><code># create logger</code></p> <p><code>logger </code><code>=</code> <code>logging.getLogger(</code><code>"simple_example"</code><code>)</code></p> <p><code>logger.setLevel(logging.DEBUG)</code></p> <p> </p> <p><code># create console handler and set level to debug</code></p> <p><code>ch </code><code>=</code> <code>logging.StreamHandler()</code></p> <p><code>ch.setLevel(logging.DEBUG)</code></p> <p> </p> <p><code># create formatter</code></p> <p><code>formatter </code><code>=</code> <code>logging.Formatter(</code><code>"%(asctime)s - %(name)s - %(levelname)s - %(message)s"</code><code>)</code></p> <p> </p> <p><code># add formatter to ch</code></p> <p><code>ch.setFormatter(formatter)</code></p> <p> </p> <p><code># add ch to logger</code></p> <p><code>logger.addHandler(ch)</code></p> <p> </p> <p><code># "application" code</code></p> <p><code>logger.debug(</code><code>"debug message"</code><code>)</code></p> <p><code>logger.info(</code><code>"info message"</code><code>)</code></p> <p><code>logger.warn(</code><code>"warn message"</code><code>)</code></p> <p><code>logger.error(</code><code>"error message"</code><code>)</code></p> <p><code>logger.critical(</code><code>"critical message"</code><code>)</code></p> </td></tr></tbody></table> 
<p> </p> 
<pre>$ python simple_logging_module.py
2005-03-19 15:10:26,618 - simple_example - DEBUG - debug message
2005-03-19 15:10:26,620 - simple_example - INFO - info message
2005-03-19 15:10:26,695 - simple_example - WARNING - warn message
2005-03-19 15:10:26,697 - simple_example - ERROR - error message
2005-03-19 15:10:26,773 - simple_example - CRITICAL - critical message</pre> 
<p> </p> 
<p><strong>Handlers</strong></p> 
<p>handler对象负责发送相关的信息到指定目的地。可以通过addHandler()方法添加多个多handler</p> 
<p>Handler.setLevel(lel):指定被处理的信息级别，低于lel级别的信息将被忽略</p> 
<p>Handler.setFormatter()：给这个handler选择一个格式</p> 
<p>Handler.addFilter(filt)、Handler.removeFilter(filt)：新增或删除一个filter对象</p> 
<p> </p> 
<p><strong>Formatters</strong></p> 
<p>Formatter对象设置日志信息最后的规则、结构和内容，默认的时间格式为%Y-%m-%d %H:%M:%S，下面是Formatter常用的一些信息</p> 
<table border="1" cellpadding="0" cellspacing="0"><tbody><tr><td style="vertical-align:top;"> <p>%(name)s</p> </td><td style="vertical-align:top;"> <p>Logger的名字</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(levelno)s</p> </td><td style="vertical-align:top;"> <p>数字形式的日志级别</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(levelname)s</p> </td><td style="vertical-align:top;"> <p>文本形式的日志级别</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(pathname)s</p> </td><td style="vertical-align:top;"> <p>调用日志输出函数的模块的完整路径名，可能没有</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(filename)s</p> </td><td style="vertical-align:top;"> <p>调用日志输出函数的模块的文件名</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(module)s</p> </td><td style="vertical-align:top;"> <p>调用日志输出函数的模块名</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(funcName)s</p> </td><td style="vertical-align:top;"> <p>调用日志输出函数的函数名</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(lineno)d</p> </td><td style="vertical-align:top;"> <p>调用日志输出函数的语句所在的代码行</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(created)f</p> </td><td style="vertical-align:top;"> <p>当前时间，用UNIX标准的表示时间的浮 点数表示</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(relativeCreated)d</p> </td><td style="vertical-align:top;"> <p>输出日志信息时的，自Logger创建以 来的毫秒数</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(asctime)s</p> </td><td style="vertical-align:top;"> <p>字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(thread)d</p> </td><td style="vertical-align:top;"> <p>线程ID。可能没有</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(threadName)s</p> </td><td style="vertical-align:top;"> <p>线程名。可能没有</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(process)d</p> </td><td style="vertical-align:top;"> <p>进程ID。可能没有</p> </td></tr><tr><td style="vertical-align:top;"> <p>%(message)s</p> </td><td style="vertical-align:top;"> <p>用户输出的消息</p> </td></tr></tbody></table> 
<p> </p> 
<p><strong>最后来个例子</strong></p> 
<p> </p> 
<table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td> <p>1</p> <p>2</p> <p>3</p> <p>4</p> <p>5</p> <p>6</p> <p>7</p> <p>8</p> <p>9</p> <p>10</p> <p>11</p> <p>12</p> <p>13</p> <p>14</p> <p>15</p> <p>16</p> <p>17</p> <p>18</p> <p>19</p> <p>20</p> <p>21</p> <p>22</p> <p>23</p> <p>24</p> <p>25</p> <p>26</p> <p>27</p> <p>28</p> <p>29</p> <p>30</p> <p>31</p> </td><td> <p><code>import</code> <code>logging</code></p> <p> </p> <p><code># set up logging to file - see previous section for more details</code></p> <p><code>logging.basicConfig(level</code><code>=</code><code>logging.DEBUG,</code></p> <p><code>                    </code><code>format</code><code>=</code><code>'%(asctime)s %(name)-12s %(levelname)-8s %(message)s'</code><code>,</code></p> <p><code>                    </code><code>datefmt</code><code>=</code><code>'%m-%d %H:%M'</code><code>,</code></p> <p><code>                    </code><code>filename</code><code>=</code><code>'/temp/myapp.log'</code><code>,</code></p> <p><code>                    </code><code>filemode</code><code>=</code><code>'w'</code><code>)</code></p> <p><code># define a Handler which writes INFO messages or higher to the sys.stderr</code></p> <p><code>console </code><code>=</code> <code>logging.StreamHandler()</code></p> <p><code>console.setLevel(logging.INFO)</code></p> <p><code># set a format which is simpler for console use</code></p> <p><code>formatter </code><code>=</code> <code>logging.Formatter(</code><code>'%(name)-12s: %(levelname)-8s %(message)s'</code><code>)</code></p> <p><code># tell the handler to use this format</code></p> <p><code>console.setFormatter(formatter)</code></p> <p><code># add the handler to the root logger</code></p> <p><code>logging.getLogger('').addHandler(console)</code></p> <p> </p> <p><code># Now, we can log to the root logger, or any other logger. First the root...</code></p> <p><code>logging.info(</code><code>'Jackdaws love my big sphinx of quartz.'</code><code>)</code></p> <p> </p> <p><code># Now, define a couple of other loggers which might represent areas in your</code></p> <p><code># application:</code></p> <p> </p> <p><code>logger1 </code><code>=</code> <code>logging.getLogger(</code><code>'myapp.area1'</code><code>)</code></p> <p><code>logger2 </code><code>=</code> <code>logging.getLogger(</code><code>'myapp.area2'</code><code>)</code></p> <p> </p> <p><code>logger1.debug(</code><code>'Quick zephyrs blow, vexing daft Jim.'</code><code>)</code></p> <p><code>logger1.info(</code><code>'How quickly daft jumping zebras vex.'</code><code>)</code></p> <p><code>logger2.warning(</code><code>'Jail zesty vixen who grabbed pay from quack.'</code><code>)</code></p> <p><code>logger2.error(</code><code>'The five boxing wizards jump quickly.'</code><code>)</code></p> </td></tr></tbody></table> 
<p>运行后，在终端看到的结果</p> 
<p> </p> 
<p> </p> 
<pre>root        : INFO     Jackdaws love my big sphinx of quartz.
myapp.area1 : INFO     How quickly daft jumping zebras vex.
myapp.area2 : WARNING  Jail zesty vixen who grabbed pay from quack.
myapp.area2 : ERROR    The five boxing wizards jump quickly.</pre> 
<p> </p> 
<p>在日志文件中的结果</p> 
<p> </p> 
<p> </p> 
<pre>10-22 22:19 root         INFO     Jackdaws love my big sphinx of quartz.
10-22 22:19 myapp.area1  DEBUG    Quick zephyrs blow, vexing daft Jim.
10-22 22:19 myapp.area1  INFO     How quickly daft jumping zebras vex.
10-22 22:19 myapp.area2  WARNING  Jail zesty vixen who grabbed pay from quack.
10-22 22:19 myapp.area2  ERROR    The five boxing wizards jump quickly.</pre> 
<p>发现DEBUG信息只有在文件中出现，这是因为StreamHandler中setLevel是INFO，可以看出Logger.setLevel()和handler.setLevel()的区别</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/abd6f36d0cdf4b921c743e6fca1270ec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">安卓开发 Fragment的简单使用与解析</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d043a838b27399bd63d58e77e6b92ca2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">TMOD、SCON、PCON寄存器的配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>