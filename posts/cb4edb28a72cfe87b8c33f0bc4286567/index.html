<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue项目中 调用 第三方api 如百度地图 跨域问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue项目中 调用 第三方api 如百度地图 跨域问题" />
<meta property="og:description" content="1- 安装 yarn add vue-baidu-map-v3
2-引入 注册 main.js 文件
import BaiduMap from &#34;vue-baidu-map-v3&#34;; Vue.use(BaiduMap, { ak: &#34;XA5932348T9SXZZZtZZZVtRNWexL11111111111111JSOd2e27AAHzVAAAuSt4bP999Swpmf7&#34;, }); 3- public下的index.html 文件
4- 解决 跨域问题 （目前项目中使用的是 第一种方案，开发环境中可以，线上环境的话需要后台配合改下 代理配置）
第一种方案：4.1 src下的api 新建 baidu.js 文件
baidu.js 文件内容复制
export default { init: function () { const AK = &#34;XA593VRNWexLOde7AAHzVAuStbPwpmf7&#34;; //你的AK const BMap_URL = &#34;https://api.map.baidu.com/api?v=2.0&amp;ak=&#34; &#43; AK &#43; &#34;&amp;s=1&amp;callback=onBMapCallback&#34;; return new Promise((resolve, reject) =&gt; { // 如果已加载直接返回 if (typeof BMap !== &#34;undefined&#34;) { resolve(BMap); return true; } // 百度地图异步加载回调处理 window." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/cb4edb28a72cfe87b8c33f0bc4286567/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-23T16:23:18+08:00" />
<meta property="article:modified_time" content="2022-09-23T16:23:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue项目中 调用 第三方api 如百度地图 跨域问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1- 安装 <code>yarn add vue-baidu-map-v3</code><br> 2-引入 注册 main.js 文件</p> 
<pre><code class="prism language-haskell"><span class="token import-statement"><span class="token keyword">import</span> BaiduMap</span> <span class="token hvariable">from</span> <span class="token string">"vue-baidu-map-v3"</span><span class="token punctuation">;</span>
<span class="token hvariable">Vue<span class="token punctuation">.</span>use</span><span class="token punctuation">(</span><span class="token constant">BaiduMap</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
  <span class="token hvariable">ak</span><span class="token operator">:</span> <span class="token string">"XA5932348T9SXZZZtZZZVtRNWexL11111111111111JSOd2e27AAHzVAAAuSt4bP999Swpmf7"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>3- public下的index.html 文件<br> <img src="https://images2.imgbox.com/ca/88/Au1OLPTZ_o.png" alt="在这里插入图片描述"><br> 4- 解决 跨域问题 （目前项目中使用的是 第一种方案，开发环境中可以，线上环境的话需要后台配合改下 代理配置）<br> 第一种方案：4.1 src下的api 新建 baidu.js 文件<br> <img src="https://images2.imgbox.com/19/ff/sdLbDTFO_o.png" alt="在这里插入图片描述"><br> baidu.js 文件内容复制</p> 
<pre><code class="prism language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function-variable function">init</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> <span class="token constant">AK</span> <span class="token operator">=</span> <span class="token string">"XA593VRNWexLOde7AAHzVAuStbPwpmf7"</span><span class="token punctuation">;</span> <span class="token comment">//你的AK</span>
    <span class="token keyword">const</span> BMap_URL <span class="token operator">=</span>
      <span class="token string">"https://api.map.baidu.com/api?v=2.0&amp;ak="</span> <span class="token operator">+</span>
      <span class="token constant">AK</span> <span class="token operator">+</span>
      <span class="token string">"&amp;s=1&amp;callback=onBMapCallback"</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 如果已加载直接返回</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> BMap <span class="token operator">!==</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>BMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 百度地图异步加载回调处理</span>
      window<span class="token punctuation">.</span><span class="token function-variable function">onBMapCallback</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>BMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> <span class="token function-variable function">getCurrentCityName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">let</span> myCity <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>LocalCity</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          myCity<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token comment">// 插入script脚本</span>
      <span class="token keyword">let</span> scriptNode <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      scriptNode<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token string">"text/javascript"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      scriptNode<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">,</span> BMap_URL<span class="token punctuation">)</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>scriptNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>4.2 vue.config.js文件 代理配置<br> <img src="https://images2.imgbox.com/0a/d3/3SAmYgfj_o.png" alt="在这里插入图片描述"><br> 代理的内容 复制</p> 
<pre><code class="prism language-javascript">  <span class="token literal-property property">publicPath</span><span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// // 本地代理环境配置</span>
      <span class="token string-property property">"/baidu"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">"https://api.map.baidu.com"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">ws</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//允许跨域</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
          <span class="token string-property property">"^/baidu"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">//请求的时候使用这个/baidu 就可以</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//指向开发环境 API 服务器</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> 
<p>4.3 在请求拦截器中 拦截 含有 ‘ak’ 的字段<br> <img src="https://images2.imgbox.com/88/aa/DzVM2eL2_o.png" alt="在这里插入图片描述"><br> 拦截器的内容 复制</p> 
<pre><code class="prism language-javascript"> <span class="token comment">// 百度地图 如果url纯在ak字段，修改baseUrl</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"ak"</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        config<span class="token punctuation">.</span>baseURL <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_jsonp_83"></a>解决跨域的第二种方案（使用 jsonp）</h3> 
<p>1- 安装依赖包 npm install vue-jsonp --save<br> 2- main.js 中引入<br> <img src="https://images2.imgbox.com/ac/79/VEEKqvvn_o.png" alt="在这里插入图片描述"><br> 3-vue页面中使用：<br> <img src="https://images2.imgbox.com/53/36/Dd6jzGKs_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/94/d8/uMhr4aA9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="template_97"></a>template</h3> 
<pre><code class="prism language-bash"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a-button <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">"primary"</span> @click<span class="token operator">=</span><span class="token string">"openMap"</span>
      <span class="token operator">&gt;</span><span class="token operator">&lt;</span>a-icon <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">"environment"</span> /<span class="token operator">&gt;</span>定位<span class="token operator">&lt;</span>/a-button
    <span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>a-modal
      <span class="token assign-left variable">title</span><span class="token operator">=</span><span class="token string">"新增定位"</span>
      :visible<span class="token operator">=</span><span class="token string">"visible"</span>
      <span class="token assign-left variable">okText</span><span class="token operator">=</span><span class="token string">"保存"</span>
      @cancel<span class="token operator">=</span><span class="token string">"cancel"</span>
      @ok<span class="token operator">=</span><span class="token string">"submitItem"</span>
    <span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span>-- <span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"searcharea"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a-input-search <span class="token assign-left variable">placeholder</span><span class="token operator">=</span><span class="token string">"输入地点"</span> @search<span class="token operator">=</span><span class="token string">"onSearchArea"</span> /<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span> --<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span>-- <span class="token assign-left variable">ak</span><span class="token operator">=</span><span class="token string">"33B192o1jPaqOHASGGAIkoMuwi8W76j3"</span>  --<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>baidu-map
        <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"map"</span>
        :center<span class="token operator">=</span><span class="token string">"center"</span>
        :zoom<span class="token operator">=</span><span class="token string">"zoom"</span>
        @ready<span class="token operator">=</span><span class="token string">"handler"</span>
        :scroll-wheel-zoom<span class="token operator">=</span><span class="token string">"true"</span>
        @click<span class="token operator">=</span><span class="token string">"clickEvent"</span>
        <span class="token assign-left variable">ak</span><span class="token operator">=</span><span class="token string">"XA593VRNWexLOde7AAHzVAuStbPwpmf7"</span>
      <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 地图控件位置 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bm-navigation <span class="token assign-left variable">anchor</span><span class="token operator">=</span><span class="token string">"BMAP_ANCHOR_TOP_RIGHT"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/bm-navigation<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 百度搜索 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bm-city-list <span class="token assign-left variable">anchor</span><span class="token operator">=</span><span class="token string">"BMAP_ANCHOR_TOP_LEFT"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>/bm-city-list<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 定位位置 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bm-geolocation
          <span class="token assign-left variable">anchor</span><span class="token operator">=</span><span class="token string">"BMAP_ANCHOR_BOTTOM_RIGHT"</span>
          :showAddressBar<span class="token operator">=</span><span class="token string">"true"</span>
          :autoLocation<span class="token operator">=</span><span class="token string">"true"</span>
          @locationSuccess<span class="token operator">=</span><span class="token string">"getLoctionSuccess"</span>
        <span class="token operator">&gt;</span><span class="token operator">&lt;</span>/bm-geolocation<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 地图容器 --<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bm-view
          :style<span class="token operator">=</span><span class="token string">"{
            width: '100%',
            height: this.clientHeight + 'px',
            flex: 1,
            marginBottom: '-30px',
          }"</span>
        <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/bm-view<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bm-marker
          :position<span class="token operator">=</span><span class="token string">"{ lng: center.lng, lat: center.lat }"</span>
          :dragging<span class="token operator">=</span><span class="token string">"true"</span>
          <span class="token assign-left variable">animation</span><span class="token operator">=</span><span class="token string">"BMAP_ANIMATION_BOUNCE"</span>
        <span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/bm-marker<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 百度搜索框 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>start--<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bm-control :offset<span class="token operator">=</span><span class="token string">"{ width: '10px', height: '10px' }"</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>bm-auto-complete
            v-model<span class="token operator">=</span><span class="token string">"areaaddress"</span>
            :sugStyle<span class="token operator">=</span><span class="token string">"{ zIndex: -999999 }"</span>
            <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">"display: none"</span>
          <span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>input
              <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">"text"</span>
              <span class="token assign-left variable">placeholder</span><span class="token operator">=</span><span class="token string">"请输入搜索关键字"</span>
              <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"serachinput"</span>
              v-model<span class="token operator">=</span><span class="token string">"areaaddress"</span>
              @blur<span class="token operator">=</span><span class="token string">"changeclick"</span>
            /<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>/bm-auto-complete<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>/bm-control<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>bm-local-search
          :keyword<span class="token operator">=</span><span class="token string">"areaaddress"</span>
          :auto-viewport<span class="token operator">=</span><span class="token string">"true"</span>
          <span class="token assign-left variable">style</span><span class="token operator">=</span><span class="token string">"width: 0px; height: 0px; overflow: hidden; display: none"</span>
        <span class="token operator">&gt;</span><span class="token operator">&lt;</span>/bm-local-search<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span><span class="token operator">!</span>-- 百度搜索框 <span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>end --<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>/baidu-map<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>div <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">"demo-input-suffix"</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>经度：<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> locData.longitude <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>纬度：<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> locData.latitude <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>位置：<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> areaaddress <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/a-modal<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/template<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="script_190"></a>script</h3> 
<pre><code class="prism language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> myBMap <span class="token keyword">from</span> <span class="token string">"../../api/baidu.js"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  BaiduMap<span class="token punctuation">,</span>
  BmNavigation<span class="token punctuation">,</span>
  BmView<span class="token punctuation">,</span>
  BmGeolocation<span class="token punctuation">,</span>
  BmCityList<span class="token punctuation">,</span>
  BmControl<span class="token punctuation">,</span>
  BmLocalSearch<span class="token punctuation">,</span>
  BmAutoComplete<span class="token punctuation">,</span>
  BmMarker<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vue-baidu-map"</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    BaiduMap<span class="token punctuation">,</span>
    BmNavigation<span class="token punctuation">,</span>
    BmView<span class="token punctuation">,</span>
    BmGeolocation<span class="token punctuation">,</span>
    BmCityList<span class="token punctuation">,</span>
    BmControl<span class="token punctuation">,</span>
    BmLocalSearch<span class="token punctuation">,</span>
    BmAutoComplete<span class="token punctuation">,</span>
    BmMarker<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">center</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">lng</span><span class="token operator">:</span> <span class="token number">116.404</span><span class="token punctuation">,</span> <span class="token literal-property property">lat</span><span class="token operator">:</span> <span class="token number">39.915</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">creating</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">zoom</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mapVisible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">// 地区编码</span>
      <span class="token literal-property property">areaaddress</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">//地区省市县镇</span>
      <span class="token literal-property property">locData</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">longitude</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token literal-property property">latitude</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
        <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">visible</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">clientHeight</span><span class="token operator">:</span> <span class="token string">"400"</span><span class="token punctuation">,</span> <span class="token comment">// 屏幕高度</span>
      <span class="token literal-property property">iconUrl</span><span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"../../assets/image/dingwe.png"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">ak</span><span class="token operator">:</span> <span class="token string">"XA593VRNWexLOde7AAHzVAuStbPwpmf7"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">openMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>visible<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//点击地图监听</span>
    <span class="token function">clickEvent</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// console.log(e, "点击");</span>

      map<span class="token punctuation">.</span><span class="token function">clearOverlays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> Icon_0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Icon</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>iconUrl<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">anchor</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">imageSize</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> myMarker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Marker</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lng<span class="token punctuation">,</span> e<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lat<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">icon</span><span class="token operator">:</span> Icon_0<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      map<span class="token punctuation">.</span><span class="token function">addOverlay</span><span class="token punctuation">(</span>myMarker<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//用所定位的经纬度查找所在地省市街道等信息</span>
      <span class="token keyword">var</span> point <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lng<span class="token punctuation">,</span> e<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lat<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 获取逆解析方法实例</span>
      <span class="token keyword">var</span> gc <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Geocoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      gc<span class="token punctuation">.</span><span class="token function">getLocation</span><span class="token punctuation">(</span>point<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">rs</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">var</span> addComp <span class="token operator">=</span> rs<span class="token punctuation">.</span>addressComponents<span class="token punctuation">;</span>
        <span class="token comment">// console.log(rs, "点击详细地址信息"); //地址信息</span>
        _this<span class="token punctuation">.</span>locData<span class="token punctuation">.</span>address <span class="token operator">=</span> rs<span class="token punctuation">.</span>address<span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>longitude <span class="token operator">=</span> e<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lng<span class="token punctuation">;</span> <span class="token comment">// 经度</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>latitude <span class="token operator">=</span> e<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lat<span class="token punctuation">;</span> <span class="token comment">// 纬度</span>
      <span class="token comment">// 通过经纬度获得 地区编码code   使用代理  /baidu 开头</span>
      myBMap<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">BMap</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$http
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token string">"/baidu/reverse_geocoding/v3/?ak=XA593VRNWexLOde7AAHzVAuStbPwpmf7&amp;output=json&amp;coordtype=wgs84ll&amp;extensions_town=true&amp;location="</span> <span class="token operator">+</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>latitude <span class="token operator">+</span>
              <span class="token string">","</span> <span class="token operator">+</span>
              <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>longitude
          <span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// console.log(res, "编码code");</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>addressComponent<span class="token punctuation">.</span>town_code<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>areaaddress <span class="token operator">=</span>
              res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>addressComponent<span class="token punctuation">.</span>province <span class="token operator">+</span>
              res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>addressComponent<span class="token punctuation">.</span>city <span class="token operator">+</span>
              res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>addressComponent<span class="token punctuation">.</span>district <span class="token operator">+</span>
              res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>addressComponent<span class="token punctuation">.</span>town<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>longitude <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>location<span class="token punctuation">.</span>lng<span class="token punctuation">;</span> <span class="token comment">// 经度</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>latitude <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>location<span class="token punctuation">.</span>lat<span class="token punctuation">;</span> <span class="token comment">// 纬度</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">/**定位成功回调
     */</span>
    <span class="token function">getLoctionSuccess</span><span class="token punctuation">(</span><span class="token parameter">point<span class="token punctuation">,</span> AddressComponent<span class="token punctuation">,</span> marker</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      map<span class="token punctuation">.</span><span class="token function">clearOverlays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> Icon_0 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Icon</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>iconUrl<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">anchor</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">imageSize</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Size</span><span class="token punctuation">(</span><span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">var</span> myMarker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Marker</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Point</span><span class="token punctuation">(</span>point<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lng<span class="token punctuation">,</span> point<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lat<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">icon</span><span class="token operator">:</span> Icon_0 <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      map<span class="token punctuation">.</span><span class="token function">addOverlay</span><span class="token punctuation">(</span>myMarker<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>longitude <span class="token operator">=</span> point<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lng<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>latitude <span class="token operator">=</span> point<span class="token punctuation">.</span>point<span class="token punctuation">.</span>lat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 搜索详细定位地址获得经纬度再获得编码code =============================start</span>
    <span class="token function">changeclick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"经纬度"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

      <span class="token comment">// 通过区域名获得 经纬度 精确度不准 偏差较大 使用代理  /baidu 开头</span>
      myBMap<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">BMap</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$http
          <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
            <span class="token string">"/baidu/geocoding/v3/?&amp;output=json&amp;ak=XA593VRNWexLOde7AAHzVAuStbPwpmf7&amp;address="</span> <span class="token operator">+</span>
              that<span class="token punctuation">.</span>areaaddress
          <span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">"地区经纬度"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> lng <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>location<span class="token punctuation">.</span>lng<span class="token punctuation">;</span>
            <span class="token keyword">var</span> lat <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>location<span class="token punctuation">.</span>lat<span class="token punctuation">;</span>
            lng <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>lng<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.008774687519</span><span class="token punctuation">;</span> <span class="token comment">// 解决误差大问题</span>
            lat <span class="token operator">=</span> <span class="token function">parseFloat</span><span class="token punctuation">(</span>lat<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.00374531687912</span><span class="token punctuation">;</span>
            that<span class="token punctuation">.</span>locData<span class="token punctuation">.</span>longitude <span class="token operator">=</span> lng<span class="token punctuation">;</span> <span class="token comment">// 经度</span>
            that<span class="token punctuation">.</span>locData<span class="token punctuation">.</span>latitude <span class="token operator">=</span> lat<span class="token punctuation">;</span> <span class="token comment">// 纬度</span>
            that<span class="token punctuation">.</span>$http
              <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>
                <span class="token string">"/baidu/reverse_geocoding/v3/?ak=XA593VRNWexLOde7AAHzVAuStbPwpmf7&amp;output=json&amp;coordtype=wgs84ll&amp;extensions_town=true&amp;location="</span> <span class="token operator">+</span>
                  lat <span class="token operator">+</span>
                  <span class="token string">","</span> <span class="token operator">+</span>
                  lng
              <span class="token punctuation">)</span>
              <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
                that<span class="token punctuation">.</span>code <span class="token operator">=</span> res<span class="token punctuation">.</span>result<span class="token punctuation">.</span>addressComponent<span class="token punctuation">.</span>town_code<span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// ===================================================end</span>
    <span class="token comment">// 获得当前位置</span>
    <span class="token function">handler</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{<!-- --></span> BMap<span class="token punctuation">,</span> map <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">const</span> hide <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">"正在获取城市信息"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// 设置一个临时变量指向vue实例，因为在百度地图回调里使用this，指向的不是vue实例；</span>

      <span class="token comment">// 获取自动定位方法</span>
      <span class="token keyword">var</span> geolocation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BMap<span class="token punctuation">.</span>Geolocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 获取自动定位获取的坐标信息</span>
      geolocation<span class="token punctuation">.</span><span class="token function">getCurrentPosition</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          _this<span class="token punctuation">.</span>center <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">lng</span><span class="token operator">:</span> r<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span> <span class="token literal-property property">lat</span><span class="token operator">:</span> r<span class="token punctuation">.</span>latitude <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 设置center属性值</span>
          _this<span class="token punctuation">.</span>autoLocationPoint <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">lng</span><span class="token operator">:</span> r<span class="token punctuation">.</span>longitude<span class="token punctuation">,</span> <span class="token literal-property property">lat</span><span class="token operator">:</span> r<span class="token punctuation">.</span>latitude <span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 自定义覆盖物</span>
          _this<span class="token punctuation">.</span>initLocation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token function">setTimeout</span><span class="token punctuation">(</span>hide<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">enableHighAccuracy</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      window<span class="token punctuation">.</span>map <span class="token operator">=</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">submitItem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>areaaddress <span class="token operator">!=</span> <span class="token string">""</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">"reload"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>areaaddress<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>code<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>areaaddress <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>longitude <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>latitude <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$message<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"请点击地图选择位置"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">cancel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>creating <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>visible <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>areaaddress <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>longitude <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>locData<span class="token punctuation">.</span>latitude <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="style_388"></a>style</h3> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>less<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">/deep/ .ant-modal</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 90% <span class="token important">!important</span><span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bm-view</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.demo-input-suffix</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">margin-top</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 999<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">justify-content</span><span class="token punctuation">:</span> flex-start<span class="token punctuation">;</span>
  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token selector">p</span> <span class="token punctuation">{<!-- --></span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 15px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token selector">.searcharea</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0px auto 20px<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 40%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.serachinput</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 38px<span class="token punctuation">;</span>
  <span class="token property">box-sizing</span><span class="token punctuation">:</span> border-box<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 9px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #dddee1<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> #666 0px 0px 10px<span class="token punctuation">;</span>
  <span class="token property">-moz-box-shadow</span><span class="token punctuation">:</span> #666 0px 0px 10px<span class="token punctuation">;</span>
  <span class="token property">box-shadow</span><span class="token punctuation">:</span> #666 0px 0px 10px<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">/deep/ .citylist_popup_main .city_content_top</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">/deep/ #selCityWd</span> <span class="token punctuation">{<!-- --></span>
  <span class="token property">height</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/11a7b264d3975df5e46b3dea30a8cef5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java文件运行流程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/db3a0f1a5cda2fcefb511a82eec2b417/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">git 配置ssh</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>