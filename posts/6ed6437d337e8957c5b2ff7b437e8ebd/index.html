<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CUDA、tensorflow与cuDNN的版本匹配问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CUDA、tensorflow与cuDNN的版本匹配问题" />
<meta property="og:description" content="一、问题现象 CUDA、tensorflow 与 cuDNN有版本匹配的问题，经常出现安装了某一版本的 CUDA 后，tensorflow 不支持相应版本的CUDA，或者tensorflow 支持 CUDA，但与 cuDNN版本不匹配，找不到这个那个文件，网上甚至有 CUDA装错等于重装的说法，很是麻烦。
这里列举了一些我遇到过的错误（有的没有装cuDNN）
CUDA9.2 &#43; 1.8版本tensorflow
ImportError: libcudnn.so.7: cannot open shared objectfile: No such file or directory
CUDA9.2 &#43;1.7版本tensorflow
ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory
CUDA9.2 &#43;1.6版本tensorflow
ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory
CUDA9.2 &#43;1.5版本tensorflow
ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory
CUDA9.2 &#43;1.3版本tensorflow
ImportError: libcusolver.so.8.0: cannot open sharedobject file: No such file or directory" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6ed6437d337e8957c5b2ff7b437e8ebd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-06-25T23:43:04+08:00" />
<meta property="article:modified_time" content="2018-06-25T23:43:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CUDA、tensorflow与cuDNN的版本匹配问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>一、问题现象<span lang="en-us"></span></h2> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">CUDA</span>、<span lang="en-us">tensorflow </span>与<span lang="en-us"> cuDNN</span>有版本匹配的问题，经常出现安装了某一版本的<span lang="en-us"> CUDA </span>后，<span lang="en-us">tensorflow </span>不支持相应版本的<span lang="en-us">CUDA</span>，或者<span lang="en-us">tensorflow </span>支持<span lang="en-us"> CUDA</span>，但与<span lang="en-us"> cuDNN</span>版本不匹配，找不到这个那个文件，网上甚至有<span lang="en-us"> CUDA</span>装错等于重装的说法，很是麻烦。<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">这里列举了一些我遇到过的错误（有的没有装<span lang="en-us">cuDNN</span>）<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us"> </span></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA9.2 + 1.8</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcudnn.so.7: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA9.2 +1.7</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA9.2 +1.6</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA9.2 +1.5</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA9.2 +1.3</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcusolver.so.8.0: cannot open sharedobject file: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us"> </span></p> 
<p class="MsoNormal" align="left"><span lang="en-us">DUDA9.0+ 1.8</span>版本<span lang="en-us">tensorflow </span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcudnn.so.7: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us"> </span></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA 8.0+ 1.8</span>版本<span lang="en-us">tensorflow </span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcudnn.so.6: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA 8.0+ 1.8</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA 8.0+ 1.7</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA 8.0+ 1.6</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">CUDA 8.0+ 1.5</span>版本<span lang="en-us">tensorflow</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">ImportError: libcublas.so.9.0: cannot open shared objectfile: No such file or directory</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us"> </span></p> 
<h2>二、问题分析<span lang="en-us"></span></h2> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">大概总结了一下，以上错误有两种类型<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left"><span lang="en-us">1</span>、<span lang="en-us">libcudnn.so.x </span>找不到的情况：没有装<span lang="en-us"> cuDNN</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">2</span>、<span lang="en-us">libcublas.so.x </span>找不到的情况：版本不匹配，<span lang="en-us"> CUDA</span>与<span lang="en-us"> cuDNN </span>或者<span lang="en-us">tensorflow </span>版本不匹配，等等<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us"> </span></p> 
<h2>三、解决办法：<span lang="en-us"></span></h2> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">根据现象和一些实际的验证操作，大概总结出以下安装方法比较靠谱，但由于时间关系没有作全系列的组合验证，可以作为参考：<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">3.1 </span>安装顺序<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">先安装<span lang="en-us"> CUDA</span>，再安装<span lang="en-us"> tensorflow </span>，最后安装<span lang="en-us"> cuDNN,</span>严格按照这个顺序装，可以避免返工，避免一步错就必须重装系统<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoListParagraph" align="left"><span lang="en-us"> </span></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">3.2 </span>安装配置<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">参照我的另一篇文章《<a href="https://blog.csdn.net/MahoneSun/article/details/80808930">Ubuntu 16.04+1080Ti机器学习基本环境配置</a>》<span lang="en-us">,</span>安装以下软件<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">A</span>、先安装<span lang="en-us"> CUDA</span>，注意不要选择最新的<span lang="en-us"> 9.2 </span>版本，因为<span lang="en-us"> tensorflow </span>还不支持这个最新的版本，我们选择<span lang="en-us"> 9.0 </span>版本的就好，<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">B</span>、安装<span lang="en-us">tensorflow</span>，同样参考上述文章，注意要先配置<span lang="en-us"> pip</span>源 。这里我们默认下载的最新版本是<span lang="en-us"> 1.8 </span>版本的。<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us">C</span>、最后安装<span lang="en-us"> cuDNN</span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us"> </span></p> 
<h2>四、验证<span lang="en-us"></span></h2> 
<p></p> 
<h3><span lang="en-us">4.1</span>、确定大版本<span lang="en-us"></span></h3> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">根据提示的错误信息，例如提示找不到 <span lang="en-us">libcudnn.so.x </span>或者 <span lang="en-us">libcublas.so.x</span>，那么这个<span lang="en-us">x</span>代表的数字信息就是我们要安装的<span lang="en-us"> cuDNN </span>的版本，<span lang="en-us"></span></p> 
<p></p> 
<h3><span lang="en-us">4.2</span>、确定大版本下的<span lang="en-us">CUDA</span>版本<span lang="en-us"></span></h3> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">在<span lang="en-us"><a href="https://developer.nvidia.com/rdp/cudnn-download" rel="nofollow">https://developer.nvidia.com/rdp/cudnn-download</a></span>下载对应的版本，先看上面说的大版本，再看对应的<span lang="en-us">CUDA </span>版本，例如找不到<span lang="en-us">libcudnn.so.7</span>，则安装<span lang="en-us"> v7 </span>大版本的<span lang="en-us"> cuDNN</span>，而我们已经安装的<span lang="en-us">CUDA</span>版本是<span lang="en-us"> CUDA9.0</span>，所以我们应该下载<span lang="en-us">v7 </span>大版本下对应的<span lang="en-us"> CUDA9.0</span>版本，即<span lang="en-us"><a href="https://developer.nvidia.com/rdp/cudnn-download#a-collapse714-9" rel="nofollow"><span style="font-size:10pt;font-family:Helvetica, 'sans-serif';color:#76B900;">DownloadcuDNN v7.1.4 (May 16, 2018), for CUDA 9.0</span></a></span>版本，</p> 
<h3><span lang="en-us">4.3</span>、下载文件<span lang="en-us"></span></h3> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">下载其下的<span lang="en-us"><a href="https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v7.1.4/prod/9.0_20180516/cudnn-9.0-linux-x64-v7.1" rel="nofollow">cuDNN v7.1.4 Library for Linux</a></span><span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">安装完成后，验证方法参照上述提到的文章<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;">如此一般可以解决问题<span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><span lang="en-us"> </span></p> 
<p class="MsoNormal" align="left" style="text-align:left;">尊重劳动成果，转载请注明出处，本文链接：<a href="https://blog.csdn.net/MahoneSun/article/details/80809042">https://blog.csdn.net/MahoneSun/article/details/80809042</a><span lang="en-us"></span></p> 
<p></p> 
<p class="MsoNormal" align="left" style="text-align:left;"><br><br></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/10d9de3085e038b61d70022d3dd02d6a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ubuntu 16.04&#43;1080Ti机器学习基本环境配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/55b99497aebf3dad508bc3cb8ecc3d99/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">centos7 增加swap分区大小</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>