<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nginx(一)概述 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nginx(一)概述" />
<meta property="og:description" content="1 概述
Nginx (engine x) 是一个轻量级的高性能的 HTTP 和反向代理 web 服务器，同时也提供了 IMAP/POP3/SMTP邮件服务。Nginx 是由伊戈尔·赛索耶夫为俄罗斯访问量第二的 Rambler.ru 站点开发的，第一个公开版本0.1.0 发布于 2004 年 10 月 4 日。
Nginx 是一款轻量级的 Web 服务器/反向代理服务器及电子邮件(IMAP/POP3)代理服务器，在BSD-like 协议下发行，其特点是占有内存少，并发能力强。
备注：&#39;web服务器&#39;和&#39;应用服务器&#39;的区别--&gt;前者是&#39;静态&#39;、后者是&#39;动态&#39; web服务器：nginx、apache、openrestry 应用服务器：tomcat、weblogic&#39;收费&#39;、jetty、Jboss ​2 工作模式
nginx 有两种工作模式：master-worker 模式和单进程模式
在 master-worker 模式下：有一个 master 进程和至少一个的 worker 进程
单进程模式：顾名思义只有一个进程
这两种模式有各自的特点和适用场景
master-worker：该模式下，nginx 启动成功后，会有一个 master 进程和至少一个的 worker 进程。 master &#39;进程负责处理系统信号(control)&#39;,加载配置，管理 worker 进程(启动、杀死、监控、发送消息/信号等)。 worker &#39;进程负责处理具体的业务逻辑&#39;,也就是说,对外部来说,真正提供服务的是 worker 进程 这种模式有以下优点
1. 稳定性高,只要还有 worker 进程存活,就能够提供服务,并且一个 worker 进程挂掉 master 进程会立即启动一个新的 worker 进程,保证 worker 进程数量不变,降低服务中断的概率。 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/10f1f638e5095392ce235dee3fed9f51/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-04T17:05:25+08:00" />
<meta property="article:modified_time" content="2024-01-04T17:05:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx(一)概述</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>1 概述</p> 
<p>Nginx (engine x) 是一个<strong>轻量级</strong>的高性能的 HTTP 和<strong>反向代理</strong> web 服务器，同时也提供了 IMAP/POP3/SMTP<strong>邮件服务</strong>。Nginx 是由伊戈尔·赛索耶夫为俄罗斯访问量第二的 Rambler.ru 站点开发的，第一个公开版本0.1.0 发布于 2004 年 10 月 4 日。</p> 
<p>Nginx 是一款轻量级的 Web 服务器/反向代理服务器及电子邮件(IMAP/POP3)代理服务器，在BSD-like 协议下发行，其特点是<strong>占有内存少，并发能力强</strong>。</p> 
<pre><code>备注：'web服务器'和'应用服务器'的区别--&gt;前者是'静态'、后者是'动态'
 
web服务器：nginx、apache、openrestry
 
应用服务器：tomcat、weblogic'收费'、jetty、Jboss
</code></pre> 
<p>​2 <strong>工作模式</strong></p> 
<p>nginx 有<strong>两种工作模式</strong>：master-worker 模式和单进程模式</p> 
<p>在 master-worker 模式下：有一个 master 进程和至少一个的 worker 进程</p> 
<p>单进程模式：顾名思义只有一个进程</p> 
<p>这两种模式有各自的特点和适用场景</p> 
<pre><code>master-worker：该模式下，nginx 启动成功后，会有一个 master 进程和至少一个的 worker 进程。
 
master '进程负责处理系统信号(control)',加载配置，管理 worker 进程(启动、杀死、监控、发送消息/信号等)。
 
worker '进程负责处理具体的业务逻辑',也就是说,对外部来说,真正提供服务的是 worker 进程
</code></pre> 
<p>这种模式有以下<strong>优点</strong></p> 
<pre><code>1. 稳定性高,只要还有 worker 进程存活,就能够提供服务,并且一个 worker 进程挂掉 master 进程会立即启动一个新的 worker 进程,保证 worker 进程数量不变,降低服务中断的概率。
2. 配合 linux 的 cpu 亲和性配置,可以充分利用'多核 cpu 的优势',提升性能--&gt;重点！
3. 处理信号/配置重新加载/升级时可以做到尽可能少或者不中断服务(热重启--&gt;不中断服务)--&gt;重点！
</code></pre> 
<p>单进程模式(了解)–&gt;调试</p> 
<pre><code>单进程模式下,nginx启动后'只有一个进程','nginx 的所有工作都由这个进程负责'.由于只有一个进程,
因此可以很方便地利用 gdb 等工具进行调试。该模式'不支持 nginx 的平滑升级功能',任何的信号处理
都可能造成服务中断,并且由于是单进程,进程挂掉后,在没有外部监控的情况下,无法重启服务。
因此,该模式一般只在开发阶段和调试时使用,生产环境下不会使用'(了解)'.
</code></pre> 
<p>3 <strong>主配置文件结构(简介)</strong></p> 
<pre><code class="prism language-bash">user www www<span class="token punctuation">;</span>
<span class="token comment"># (1)程序运行用户和组--&gt;nginx</span>
worker_processes auto<span class="token punctuation">;</span>
<span class="token comment"># (2)启动进程,指定 nginx 启动的工作进程数量；建议按照 cpu 数目来指定,一般等于cpu核心数目</span>
error_log /home/wwwlogs/nginx_error.log crit<span class="token punctuation">;</span>
<span class="token comment"># (3)nginx全局错误日志</span>
pid  /usr/local/nginx/logs/nginx.pid<span class="token punctuation">;</span>
<span class="token comment"># (4)主进程 PID 保存文件</span>
worker_rlimit_nofile <span class="token number">51200</span><span class="token punctuation">;</span>
<span class="token comment"># (5)文件描述符数量</span>
 
<span class="token comment"># (6)事件区块开始--&gt;events</span>
events <span class="token punctuation">{<!-- --></span>
        use epoll<span class="token punctuation">;</span>
        <span class="token comment"># (1)使用 epoll 模型,对于 2.6 以上的内核,建议使用 epoll 模型以提高性能</span>
        worker_connections <span class="token number">51200</span><span class="token punctuation">;</span>
        <span class="token comment"># (2)一个工作进程能处理的最大连接数量</span>
       <span class="token punctuation">}</span>
 
<span class="token comment"># (7)http区块的开始</span>
http   <span class="token punctuation">{<!-- --></span>
        <span class="token comment"># 解决中文--&gt;后续补充</span>
    <span class="token comment"># server里面是一些网站优化参数</span>
    server <span class="token punctuation">{<!-- --></span>
        <span class="token comment"># (1)具体的某一网站的配置信息</span>
        listen <span class="token number">80</span><span class="token punctuation">;</span>
        <span class="token comment"># (2)监听端口--&gt;--&gt;可以写成IP:Port的形式</span>
        root html<span class="token punctuation">;</span>
        <span class="token comment"># (3)网页根目录(/usr/local/nginx/html)</span>
        server_name www.wzj.com<span class="token punctuation">;</span>
        <span class="token comment"># (4)提供服务的域名主机名！</span>
        index index.html<span class="token punctuation">;</span>
        <span class="token comment"># (5)默认加载页面--&gt;多个优先级！</span>
        access_log logs/access.log<span class="token punctuation">;</span> 
        <span class="token comment"># (6)访问日志保存位置</span>
          location <span class="token punctuation">(</span>.*<span class="token punctuation">)</span><span class="token punctuation">\</span>.php$ <span class="token punctuation">{<!-- --></span>
            <span class="token comment"># 用正则匹配具体的访问对象--&gt;php结尾的</span>
            <span class="token punctuation">}</span>
          location <span class="token punctuation">{<!-- --></span>
                <span class="token comment"># 跳转等规则--&gt;rewrite</span>
            <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>  <span class="token comment"># server的匹配结束</span>
 
      server <span class="token punctuation">{<!-- --></span>
        <span class="token comment"># 虚拟主机;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>       <span class="token comment"># http结束区块</span>
</code></pre> 
<p>注意事项：</p> 
<pre><code>1）注意配置文件中的结尾有';'作为结束~!(切记!)
 
2）每次实验修改完配置文件后需要'重启 nginx 才会生效'
</code></pre> 
<p><a href="https://www.cnblogs.com/mmdln/p/8952292.html" rel="nofollow">nginx面试题</a></p> 
<p><a href="https://blog.csdn.net/wzj_110/category_9072895.html">nginx专栏</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ef182a7983fdbe11c9e341e336a8ed6f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">手把手教你实现：将后端SpringBoot项目部署到华为云服务器上</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b90f7aef85c90f4aef6d3cc2358d1ac9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">记模型训练损失为NAN</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>