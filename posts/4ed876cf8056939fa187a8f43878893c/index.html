<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>以太网链路聚合（手工负载分担及LACP配置） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="以太网链路聚合（手工负载分担及LACP配置）" />
<meta property="og:description" content="链路聚合前言概述
链路聚合是将多个物理接口捆绑为一个逻辑接口，来达到增加链路带宽的目的，在实现增大带宽的同时，链路聚合采用备份链路的机制，还可以有效提高设备之间链路的可靠性。
链路聚合优势
传统技术中，网络规模扩大，需增加带宽，通常需更换高速率的接口板和更换支持高速率接口板的设备的方式，此种方案需要耗费高额的费用，且不灵活。
链路聚合能够提高链路带宽，增强网络可用性，支持负载分担。
链路聚合应用场景
链路聚合一般部署在核心节点（骨干链路），以提升整个网络的数据吞吐量。
链路聚合模式
链路聚合有两种，分别是手工负载分担模式与LACP模式。
模式概述手工负载分担模式手工负载分担模式下所有活动接口都参与数据的转发，分担负载流量LACP模式LACP模式则支持备份 数据流控制
在一个聚合口中，聚合链路两端的物理口（即成员口包含二层/三层接口）的所有参数必须一致，包括物理口的数量，传输速率，双工模式和流量控制模式。
数据流与数据流控制
数据流可以看作是一组MAC地址和IP地址相同的帧，如两台设备间的SSH或SFTP连接可以看做一个数据流。
数据流在聚合链路传输，数据顺序必须保持不变。
普通链路与链路聚合的传输方式
普通链路即未配置链路聚合的链路，用一条物理链路来传输数据，那么一个数据流中的帧总是能按正确的顺序到达目的地。
链路聚合模式中，多条物理链路被绑定成一条聚合链路，一个
数据流中的帧通过不同的物理链路传输。如果第一个帧通过一条物理链路传输，第二个帧通过另外一条物理链路传输，这样一来同一数据流的第二个数据帧就有可能比第一个数据帧帧到达对端设备，从而产生接收数据包乱序的情况。
逐流负载分担
为避免数据包乱序，Eth-Trunk采用逐流负载分担的机制，此机制把IP或MAC通过HASH算法生成不同HASH-KEY值，根据KEY值 在Eth-Trunk转发表中寻找对应的出接口，保证了同一数据流的帧在同一条 物理链路转发，又实现了流量在聚合组内 各物理链路的负载分担。
逐流负载分担可以保证数据包的顺序，但无法保证带宽利用率。
负载分担类型
负载分担的类型主要包括以下几种，用户可以根据具体应用选择丌同的负载分担类型。
序号类型1根据报文的源MAC地址进行负载分担2根据报文的目的MAC地址进行负载分担3根据报文的源IP地址进行负载分担4根据报文的目的IP地址进行负载分担5根据报文的源MAC地址与目的MAC地址进行负载分担6根据报文的源IP地址与目的IP地址进行负载分担7根据报文的VLAN、源物理端口等对L2、IPv4、IPv6和MPLS报文进行增强型负载分担。 以太网接口和链路配置 拓扑图
在2台华为的S5700系列交换机配置链路聚合功能，以提高交换机间链路带宽及可靠性。
首先修改交换机的设备名称，然后查看S1上G0/0/9和G0/0/10接口的详细信息。
# undo terminal monitor //关闭终端显示 system-view sysname S1 display interface GigabitEthernet 0/0/9 //查看G0/0/9接口详细信息 display interface GigabitEthernet 0/0/10 # 在S1、S2在配置接口的速率100Mbits和全双工模式之前应先关闭接口的自协商功能
# interface GigabitEthernet 0/0/9 undo negotiation auto //关闭自协商 speed 100 //速率 duplex full //全双工 quit interface GigabitEthernet 0/0/10 undo negotiation auto speed 100 duplex full quit 手动链路聚合模式 配置手动模式的链路聚合，在S1和S2创建Eth-trunk1，将接口加入Eth-Trunk1（注意：将接口加入Eth-Trunk前需确认成员接口下没有任何配置）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4ed876cf8056939fa187a8f43878893c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-05T00:58:33+08:00" />
<meta property="article:modified_time" content="2023-12-05T00:58:33+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">以太网链路聚合（手工负载分担及LACP配置）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><font color="black" size="5">链路聚合前言概述</font></p> 
<p>链路聚合是将多个物理接口捆绑为一个逻辑接口，来达到增加链路带宽的目的，在实现增大带宽的同时，链路聚合采用备份链路的机制，还可以有效提高设备之间链路的可靠性。</p> 
<p><font color="black" size="5">链路聚合优势</font></p> 
<p>传统技术中，网络规模扩大，需增加带宽，通常需更换高速率的接口板和更换支持高速率接口板的设备的方式，此种方案需要耗费高额的费用，且不灵活。</p> 
<p>链路聚合能够提高链路带宽，增强网络可用性，支持负载分担。</p> 
<p><font color="black" size="5">链路聚合应用场景<br> <img src="https://images2.imgbox.com/89/6c/fvj5sowa_o.png" alt="在这里插入图片描述"></font></p> 
<p>链路聚合一般部署在核心节点（骨干链路），以提升整个网络的数据吞吐量。</p> 
<p><font color="black" size="5">链路聚合模式</font></p> 
<p>链路聚合有两种，分别是手工负载分担模式与LACP模式。</p> 
<table><thead><tr><th>模式</th><th>概述</th></tr></thead><tbody><tr><td>手工负载分担模式</td><td>手工负载分担模式下所有活动接口都参与数据的转发，分担负载流量</td></tr><tr><td>LACP模式</td><td>LACP模式则支持备份</td></tr></tbody></table> 
<p><font color="black" size="5">数据流控制</font></p> 
<p>在一个聚合口中，聚合链路两端的物理口（即成员口包含二层/三层接口）的所有参数必须一致，包括物理口的数量，传输速率，双工模式和流量控制模式。</p> 
<p><font color="black" size="4">数据流与数据流控制</font></p> 
<p>数据流可以看作是一组MAC地址和IP地址相同的帧，如两台设备间的SSH或SFTP连接可以看做一个数据流。<br> 数据流在聚合链路传输，数据顺序必须保持不变。</p> 
<p><font color="black" size="4">普通链路与链路聚合的传输方式</font></p> 
<p>普通链路即未配置链路聚合的链路，用一条物理链路来传输数据，那么一个数据流中的帧总是能按正确的顺序到达目的地。</p> 
<p>链路聚合模式中，多条物理链路被绑定成一条聚合链路，一个<br> 数据流中的帧通过不同的物理链路传输。如果第一个帧通过一条物理链路传输，第二个帧通过另外一条物理链路传输，这样一来同一数据流的第二个数据帧就有可能比第一个数据帧帧到达对端设备，从而产生接收数据包乱序的情况。</p> 
<p><font color="black" size="5">逐流负载分担</font></p> 
<p>为避免数据包乱序，Eth-Trunk采用逐流负载分担的机制，此机制把IP或MAC通过HASH算法生成不同HASH-KEY值，根据KEY值 在Eth-Trunk转发表中寻找对应的出接口，保证了同一数据流的帧在同一条 物理链路转发，又实现了流量在聚合组内 各物理链路的负载分担。<br> 逐流负载分担可以保证数据包的顺序，但无法保证带宽利用率。</p> 
<p><font color="black" size="5">负载分担类型</font></p> 
<p>负载分担的类型主要包括以下几种，用户可以根据具体应用选择丌同的负载分担类型。</p> 
<table><thead><tr><th>序号</th><th>类型</th></tr></thead><tbody><tr><td>1</td><td>根据报文的源MAC地址进行负载分担</td></tr><tr><td>2</td><td>根据报文的目的MAC地址进行负载分担</td></tr><tr><td>3</td><td>根据报文的源IP地址进行负载分担</td></tr><tr><td>4</td><td>根据报文的目的IP地址进行负载分担</td></tr><tr><td>5</td><td>根据报文的源MAC地址与目的MAC地址进行负载分担</td></tr><tr><td>6</td><td>根据报文的源IP地址与目的IP地址进行负载分担</td></tr><tr><td>7</td><td>根据报文的VLAN、源物理端口等对L2、IPv4、IPv6和MPLS报文进行增强型负载分担。</td></tr></tbody></table> 
<h4><a id="_58"></a>以太网接口和链路配置</h4> 
<p>拓扑图<br> <img src="https://images2.imgbox.com/e8/11/717Enf3W_o.png" alt="在这里插入图片描述"><br> 在2台华为的S5700系列交换机配置链路聚合功能，以提高交换机间链路带宽及可靠性。</p> 
<p>首先修改交换机的设备名称，然后查看S1上G0/0/9和G0/0/10接口的详细信息。</p> 
<pre><code>#
undo terminal monitor  //关闭终端显示
system-view  
sysname S1 
display interface GigabitEthernet 0/0/9 //查看G0/0/9接口详细信息
display interface GigabitEthernet 0/0/10
#
</code></pre> 
<p>在S1、S2在配置接口的速率100Mbits和全双工模式之前应先关闭接口的自协商功能</p> 
<pre><code>#
interface GigabitEthernet 0/0/9  
undo negotiation auto   //关闭自协商
speed 100   //速率
duplex full  //全双工
quit
interface GigabitEthernet 0/0/10
undo negotiation auto
speed 100
duplex full
quit
</code></pre> 
<h4><a id="_88"></a>手动链路聚合模式</h4> 
<p>配置手动模式的链路聚合，在S1和S2创建Eth-trunk1，将接口加入Eth-Trunk1（注意：将接口加入Eth-Trunk前需确认成员接口下没有任何配置）</p> 
<pre><code>interface eth-trunk 1  //创建eth-trunk1
quit
inter g0/0/9
eth-trunk 1
quit
inter g0/0/10
eth-trunk 1
</code></pre> 
<p>在S1验证Eth-trunk配置结果</p> 
<pre><code>display eth-trunk 1
</code></pre> 
<p>回显信息中，选中部分表明Eth-Trunk工作正常，成员接口都已加入。<br> <img src="https://images2.imgbox.com/2a/6a/yeYClsD0_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="LACP_104"></a>静态LACP模式配置</h4> 
<p>如有配置手动链路模式，需删除S1与S2的G0/0/9和G0/0/10接口下的配置</p> 
<pre><code>#
interface gigabitethernet0/0/9
undo eth-trunk
quit
interface GigabitEthernet 0/0/10
undo Eth-Trunk
#
</code></pre> 
<p>在S1和S2创建eth-trunk 1并配置为静态lacp模式，将S1和S2接口g0/0/9和g0/0/10加入eth-trunk。</p> 
<pre><code>#
interface eth-trunk 1
mode lacp-static
quit
interface gigabitethernet 0/0/9
eth-trunk 1
quit
interface gigabitethernet 0/0/10
eth-trtnk 1
quit
#
display eth-trunk  //查看交换机eth-trunk信息，查询是否协商成功
#
</code></pre> 
<p>在S1上配置lacp的系统优先级为100，使其成为lacp主动端，</p> 
<pre><code>lacp priority 100
</code></pre> 
<p>配置接口的优先级确定活动链路</p> 
<pre><code>#
interface gigabitethernet 0/0/9
lacp priority 100
quit
interface gigabitethernet 0/0/10
lacp priority 100
#
display eth-trunk 1 //验证配置结果
</code></pre> 
<h4><a id="_145"></a>链路聚合实验（手工负载分担）</h4> 
<p><img src="https://images2.imgbox.com/34/37/iKEIGqb4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b2/de/ifvkMLka_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ca/55/tYUylh0i_o.png" alt="在这里插入图片描述"><br> ping测试<br> <img src="https://images2.imgbox.com/cc/a0/Xm7OZ26X_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="SW1_152"></a>SW1配置</h5> 
<pre><code class="prism language-cpp"><span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>u t m
Info<span class="token operator">:</span> Current terminal monitor is off<span class="token punctuation">.</span>
<span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>sys	
<span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>system<span class="token operator">-</span>view 
Enter system view<span class="token punctuation">,</span> <span class="token keyword">return</span> user view with Ctrl<span class="token operator">+</span>Z<span class="token punctuation">.</span>
<span class="token punctuation">[</span>Huawei<span class="token punctuation">]</span>sys SW1
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>interface eth	
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>interface Eth<span class="token operator">-</span>Trunk <span class="token number">1</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode <span class="token operator">?</span>
  lacp<span class="token operator">-</span><span class="token keyword">static</span>  Static working mode
  manual       Manual working mode

<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode man	
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode manual <span class="token operator">?</span>
  load<span class="token operator">-</span>balance  Load balance working mode

<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode manual load<span class="token operator">-</span>balance
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>interface g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>eth	
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Info<span class="token operator">:</span> This operation may take a few seconds<span class="token punctuation">.</span> Please wait <span class="token keyword">for</span> a moment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>interface g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>	
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Info<span class="token operator">:</span> This operation may take a few seconds<span class="token punctuation">.</span> Please wait <span class="token keyword">for</span> a moment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>
</code></pre> 
<h5><a id="SW2_185"></a>SW2配置</h5> 
<pre><code class="prism language-cpp"><span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>u t m
Info<span class="token operator">:</span> Current terminal monitor is off<span class="token punctuation">.</span>
<span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>sys	
<span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>system<span class="token operator">-</span>view 
Enter system view<span class="token punctuation">,</span> <span class="token keyword">return</span> user view with Ctrl<span class="token operator">+</span>Z<span class="token punctuation">.</span>
<span class="token punctuation">[</span>Huawei<span class="token punctuation">]</span>sys SW2
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>eth	
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>interfa	
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>interface eth	
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>interface Eth<span class="token operator">-</span>Trunk <span class="token number">1</span>

备注：mode 选择的是链路聚合的模式，manual代表手工负载分担
     另一种则是静态LACP模式，其余配置

<span class="token punctuation">[</span>SW2<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode <span class="token operator">?</span>
  lacp<span class="token operator">-</span><span class="token keyword">static</span>  Static working mode
  manual       Manual working mode

<span class="token punctuation">[</span>SW2<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode manual <span class="token operator">?</span>
  load<span class="token operator">-</span>balance  Load balance working mode

<span class="token punctuation">[</span>SW2<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode manual load<span class="token operator">-</span>bal	
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode manual load<span class="token operator">-</span>balance <span class="token operator">?</span>
  <span class="token operator">&lt;</span>cr<span class="token operator">&gt;</span>  

<span class="token punctuation">[</span>SW2<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode manual load<span class="token operator">-</span>balance 
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>inter g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>eth	
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Info<span class="token operator">:</span> This operation may take a few seconds<span class="token punctuation">.</span> Please wait <span class="token keyword">for</span> a moment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>inter g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>erh	
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>eth	
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Info<span class="token operator">:</span> This operation may take a few seconds<span class="token punctuation">.</span> Please wait <span class="token keyword">for</span> a moment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>SW2<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>quit




备注：NORMAL（手工负载分担方式）为SW1与SW2的工作模式，
GE0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>与GE0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>接口已经添加到eth<span class="token operator">-</span>trunk1中，状态为up。

<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>disp eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Eth<span class="token operator">-</span>Trunk1<span class="token number">'</span>s state information is<span class="token operator">:</span>
WorkingMode<span class="token operator">:</span> NORMAL         Hash arithmetic<span class="token operator">:</span> According to SIP<span class="token operator">-</span>XOR<span class="token operator">-</span>DIP         
Least Active<span class="token operator">-</span>linknumber<span class="token operator">:</span> <span class="token number">1</span>  Max Bandwidth<span class="token operator">-</span>affected<span class="token operator">-</span>linknumber<span class="token operator">:</span> <span class="token number">8</span>              
Operate status<span class="token operator">:</span> up          Number Of Up Port In Trunk<span class="token operator">:</span> <span class="token number">2</span>                     
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
PortName                      Status      Weight 
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>          Up          <span class="token number">1</span>      
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>          Up          <span class="token number">1</span>      

测试eth<span class="token operator">-</span>trunk <span class="token number">1</span>故障，将GE0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>关闭（两台设备接口必须同时shutdown）
<span class="token punctuation">[</span>SW2<span class="token punctuation">]</span>

</code></pre> 
<h4><a id="LACP_248"></a>静态LACP配置</h4> 
<pre><code class="prism language-cpp"><span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>u t m
Info<span class="token operator">:</span> Current terminal monitor is off<span class="token punctuation">.</span>
<span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>sys	
<span class="token operator">&lt;</span>Huawei<span class="token operator">&gt;</span>system<span class="token operator">-</span>view 
Enter system view<span class="token punctuation">,</span> <span class="token keyword">return</span> user view with Ctrl<span class="token operator">+</span>Z<span class="token punctuation">.</span>
<span class="token punctuation">[</span>Huawei<span class="token punctuation">]</span>sys	
<span class="token punctuation">[</span>Huawei<span class="token punctuation">]</span>sysname SW1
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>inter eth	
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>inter Eth<span class="token operator">-</span>Trunk <span class="token number">1</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>q
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>inter Eth<span class="token operator">-</span>Trunk <span class="token number">1</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode <span class="token operator">?</span>
  lacp<span class="token operator">-</span><span class="token keyword">static</span>  Static working mode
  manual       Manual working mode
  
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>mode lacp<span class="token operator">-</span><span class="token keyword">static</span> 
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>Eth<span class="token operator">-</span>Trunk1<span class="token punctuation">]</span>q
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>inter g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>eth	
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Info<span class="token operator">:</span> This operation may take a few seconds<span class="token punctuation">.</span> Please wait <span class="token keyword">for</span> a moment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span><span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>inter g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>eth	
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Info<span class="token operator">:</span> This operation may take a few seconds<span class="token punctuation">.</span> Please wait <span class="token keyword">for</span> a moment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span>quit
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>inter g0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">]</span>eth 	
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">]</span>eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Info<span class="token operator">:</span> This operation may take a few seconds<span class="token punctuation">.</span> Please wait <span class="token keyword">for</span> a moment<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>done<span class="token punctuation">.</span>
<span class="token punctuation">[</span>SW1<span class="token operator">-</span>GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">]</span>quit

备注：修改LACP的优先级，优先级小的优先


<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>lacp priority <span class="token number">100</span>  
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>disp eth	
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>disp eth<span class="token operator">-</span>trunk <span class="token number">1</span>
Eth<span class="token operator">-</span>Trunk1<span class="token number">'</span>s state information is<span class="token operator">:</span>
Local<span class="token operator">:</span>
LAG ID<span class="token operator">:</span> <span class="token number">1</span>                   WorkingMode<span class="token operator">:</span> STATIC                               
Preempt Delay<span class="token operator">:</span> Disabled     Hash arithmetic<span class="token operator">:</span> According to SIP<span class="token operator">-</span>XOR<span class="token operator">-</span>DIP         
System Priority<span class="token operator">:</span> <span class="token number">100</span>        System ID<span class="token operator">:</span> <span class="token number">4</span>c1f<span class="token operator">-</span>cc70<span class="token operator">-</span><span class="token number">2016</span>                         
Least Active<span class="token operator">-</span>linknumber<span class="token operator">:</span> <span class="token number">1</span>  Max Active<span class="token operator">-</span>linknumber<span class="token operator">:</span> <span class="token number">8</span>                          
Operate status<span class="token operator">:</span> up          Number Of Up Port In Trunk<span class="token operator">:</span> <span class="token number">3</span>                     
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
ActorPortName          Status   PortType PortPri PortNo PortKey PortState Weight
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>   Selected <span class="token number">1</span>GE      <span class="token number">32768</span>   <span class="token number">2</span>      <span class="token number">305</span>     <span class="token number">10111100</span>  <span class="token number">1</span>     
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>   Selected <span class="token number">1</span>GE      <span class="token number">32768</span>   <span class="token number">3</span>      <span class="token number">305</span>     <span class="token number">10111100</span>  <span class="token number">1</span>     
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>   Selected <span class="token number">1</span>GE      <span class="token number">32768</span>   <span class="token number">6</span>      <span class="token number">305</span>     <span class="token number">10111100</span>  <span class="token number">1</span>     

Partner<span class="token operator">:</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>
ActorPortName          SysPri   SystemID        PortPri PortNo PortKey PortState
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span>   <span class="token number">32768</span>    <span class="token number">4</span>c1f<span class="token operator">-</span>cc6e<span class="token operator">-</span><span class="token number">76</span>d3  <span class="token number">32768</span>   <span class="token number">2</span>      <span class="token number">305</span>     <span class="token number">10111100</span>
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">2</span>   <span class="token number">32768</span>    <span class="token number">4</span>c1f<span class="token operator">-</span>cc6e<span class="token operator">-</span><span class="token number">76</span>d3  <span class="token number">32768</span>   <span class="token number">3</span>      <span class="token number">305</span>     <span class="token number">10111100</span>
GigabitEthernet0<span class="token operator">/</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">5</span>   <span class="token number">32768</span>    <span class="token number">4</span>c1f<span class="token operator">-</span>cc6e<span class="token operator">-</span><span class="token number">76</span>d3  <span class="token number">32768</span>   <span class="token number">6</span>      <span class="token number">305</span>     <span class="token number">10111100</span>
    
<span class="token punctuation">[</span>SW1<span class="token punctuation">]</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4ecdf33861f24511271f2a8158d9a880/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">域控制器学习笔记(1)域基本概念</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c6679c58dfb397318c407335e956a7e5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Common.js 和 ES6 Module 中模块引入的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>