<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ios 强制横屏大总结 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ios 强制横屏大总结" />
<meta property="og:description" content="整个项目是竖屏的，不能横屏，但是有个播放界面必须要横屏于是就开始找各种横屏的方法，最后在手机上好使了，但是在pad上横屏启动的时候界面是横屏显示，很是苦恼，就又开始了漫长的找资料，直接上代码 1，配置plist文件和deployemnt Info -&gt; device orientation （1），plist文件，如图所示，第一项是建立项目时默认有的表示支持手机的屏幕方向（我把支持向右和向左的删了），第二项是后加的表示支持ipad（添加 Supported interface orientations (iPad)）的旋转方向（同样我把向左向右，向上的给删了） （2），deployemnt Info -&gt; device orientation，只选择第一项竖屏。 2，开始代码配置（主要讲解push界面的强制横屏）主要是借鉴简书http://www.jianshu.com/p/5c773628caa6这位大神的讲解 （1），AppDelegate.h里面 @property (assign , nonatomic) BOOL isForceLandscape; @property (assign , nonatomic) BOOL isForcePortrait; AppDelegate.m里面 -(UIInterfaceOrientationMask)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window{ if (self.isForceLandscape) { return UIInterfaceOrientationMaskLandscape; }else if (self.isForcePortrait){ return UIInterfaceOrientationMaskPortrait; } return UIInterfaceOrientationMaskPortrait; } (2)，在相应的tabBarController里面（我是在viewController里面写的） #import &lt;UIKit/UIKit.h&gt; #import &#34;BaseViewController.h&#34; @interface RootViewController : BaseViewController @property (strong,nonatomic) UITabBarController *tabBarCon; @end /// 选择的当前控制器是否可以旋转 -(BOOL)shouldAutorotate{ return [self.tabBarCon.selectedViewController shouldAutorotate]; } /// 选择的当前控制器是支持的旋转的方向 - (UIInterfaceOrientationMask)supportedInterfaceOrientations{ return [self." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/0ffb093612f34b81da7aa5fe8b28ea8e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-04-01T12:12:04+08:00" />
<meta property="article:modified_time" content="2017-04-01T12:12:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ios 强制横屏大总结</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4 id="整个项目是竖屏的不能横屏但是有个播放界面必须要横屏于是就开始找各种横屏的方法最后在手机上好使了但是在pad上横屏启动的时候界面是横屏显示很是苦恼就又开始了漫长的找资料直接上代码">整个项目是竖屏的，不能横屏，但是有个播放界面必须要横屏于是就开始找各种横屏的方法，最后在手机上好使了，但是在pad上横屏启动的时候界面是横屏显示，很是苦恼，就又开始了漫长的找资料，直接上代码</h4> 
<h4 id="1配置plist文件和deployemnt-info-device-orientation">1，配置plist文件和deployemnt Info -&gt; device orientation</h4> 
<h5 id="1plist文件如图所示第一项是建立项目时默认有的表示支持手机的屏幕方向我把支持向右和向左的删了第二项是后加的表示支持ipad添加-supported-interface-orientations-ipad的旋转方向同样我把向左向右向上的给删了">（1），plist文件，如图所示，第一项是建立项目时默认有的表示支持手机的屏幕方向（我把支持向右和向左的删了），第二项是后加的表示支持ipad（添加 Supported interface orientations (iPad)）的旋转方向（同样我把向左向右，向上的给删了）</h5> 
<p><img src="https://images2.imgbox.com/ea/8f/InxxBx4L_o.png" alt="这里写图片描述" title=""></p> 
<h5 id="2deployemnt-info-device-orientation只选择第一项竖屏">（2），deployemnt Info -&gt; device orientation，只选择第一项竖屏。</h5> 
<p><img src="https://images2.imgbox.com/88/32/VG8EgYrC_o.png" alt="这里写图片描述" title=""></p> 
<h4 id="2开始代码配置主要讲解push界面的强制横屏主要是借鉴简书httpwwwjianshucomp5c773628caa6这位大神的讲解">2，开始代码配置（主要讲解push界面的强制横屏）主要是借鉴简书<a href="http://www.jianshu.com/p/5c773628caa6" rel="nofollow">http://www.jianshu.com/p/5c773628caa6</a>这位大神的讲解</h4> 
<h5 id="1appdelegateh里面">（1），AppDelegate.h里面</h5> 
<pre class="prettyprint"><code class=" hljs objectivec"><span class="hljs-keyword">@property</span> (<span class="hljs-keyword">assign</span> , <span class="hljs-keyword">nonatomic</span>) <span class="hljs-built_in">BOOL</span> isForceLandscape;
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">assign</span> , <span class="hljs-keyword">nonatomic</span>) <span class="hljs-built_in">BOOL</span> isForcePortrait;</code></pre> 
<h5 id="appdelegatem里面">AppDelegate.m里面</h5> 
<pre class="prettyprint"><code class=" hljs objectivec">-(UIInterfaceOrientationMask)application:(<span class="hljs-built_in">UIApplication</span> *)application supportedInterfaceOrientationsForWindow:(<span class="hljs-built_in">UIWindow</span> *)window{
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span><span class="hljs-variable">.isForceLandscape</span>) {

        <span class="hljs-keyword">return</span> UIInterfaceOrientationMaskLandscape;
    }<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">self</span><span class="hljs-variable">.isForcePortrait</span>){

        <span class="hljs-keyword">return</span> UIInterfaceOrientationMaskPortrait;
    }

    <span class="hljs-keyword">return</span> UIInterfaceOrientationMaskPortrait;
}</code></pre> 
<h5 id="2在相应的tabbarcontroller里面我是在viewcontroller里面写的">(2)，在相应的tabBarController里面（我是在viewController里面写的）</h5> 
<pre class="prettyprint"><code class=" hljs objectivec"><span class="hljs-preprocessor">#import <span class="hljs-title">&lt;UIKit/UIKit.h&gt;</span></span>
<span class="hljs-preprocessor">#import <span class="hljs-title">"BaseViewController.h"</span></span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">RootViewController</span> : <span class="hljs-title">BaseViewController</span></span>

<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">strong</span>,<span class="hljs-keyword">nonatomic</span>) <span class="hljs-built_in">UITabBarController</span> *tabBarCon;
<span class="hljs-keyword">@end</span></code></pre> 
<pre class="prettyprint"><code class=" hljs objectivec"><span class="hljs-comment">/// 选择的当前控制器是否可以旋转</span>
-(<span class="hljs-built_in">BOOL</span>)shouldAutorotate{

    <span class="hljs-keyword">return</span> [<span class="hljs-keyword">self</span><span class="hljs-variable">.tabBarCon</span><span class="hljs-variable">.selectedViewController</span> shouldAutorotate];
}

<span class="hljs-comment">/// 选择的当前控制器是支持的旋转的方向</span>
- (UIInterfaceOrientationMask)supportedInterfaceOrientations{

    <span class="hljs-keyword">return</span>  [<span class="hljs-keyword">self</span><span class="hljs-variable">.tabBarCon</span><span class="hljs-variable">.selectedViewController</span> supportedInterfaceOrientations];
}

<span class="hljs-comment">///</span>
- (<span class="hljs-built_in">UIInterfaceOrientation</span>)preferredInterfaceOrientationForPresentation{

    <span class="hljs-keyword">return</span>  [<span class="hljs-keyword">self</span><span class="hljs-variable">.tabBarCon</span><span class="hljs-variable">.selectedViewController</span> preferredInterfaceOrientationForPresentation];
}</code></pre> 
<h5 id="3在navigationcontroller里面自己创建的navigationcontroller的子类">(3）,在navigationController里面（自己创建的navigationController的子类）</h5> 
<pre class="prettyprint"><code class=" hljs objectivec"><span class="hljs-preprocessor">#import <span class="hljs-title">&lt;UIKit/UIKit.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">@interface</span> <span class="hljs-title">RootNavigationController</span> : <span class="hljs-title">UINavigationController</span></span>

<span class="hljs-comment">//旋转方向 默认竖屏</span>
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span> , <span class="hljs-keyword">assign</span>) <span class="hljs-built_in">UIInterfaceOrientation</span> interfaceOrientation;
<span class="hljs-keyword">@property</span> (<span class="hljs-keyword">nonatomic</span> , <span class="hljs-keyword">assign</span>) UIInterfaceOrientationMask interfaceOrientationMask;</code></pre> 
<pre class="prettyprint"><code class=" hljs objectivec"><span class="hljs-comment">/// 当前的导航控制器是否可以旋转</span>
-(<span class="hljs-built_in">BOOL</span>)shouldAutorotate{

    <span class="hljs-keyword">return</span> <span class="hljs-literal">YES</span>;
}

<span class="hljs-comment">//设置支持的屏幕旋转方向</span>
- (UIInterfaceOrientationMask)supportedInterfaceOrientations {

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span><span class="hljs-variable">.interfaceOrientationMask</span>;
}

<span class="hljs-comment">//设置presentation方式展示的屏幕方向</span>
- (<span class="hljs-built_in">UIInterfaceOrientation</span>)preferredInterfaceOrientationForPresentation {

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">self</span><span class="hljs-variable">.interfaceOrientation</span>;
}
</code></pre> 
<h5 id="4在父类viewcontroller里面">（4）在父类viewController里面</h5> 
<pre class="prettyprint"><code class=" hljs objectivec">- (<span class="hljs-keyword">void</span>)viewDidLoad {
    [<span class="hljs-keyword">super</span> viewDidLoad];

    <span class="hljs-comment">// 表示本类支持旋转</span>
    [<span class="hljs-built_in">UIViewController</span> attemptRotationToDeviceOrientation];
}</code></pre> 
<h5 id="5在需要强制横屏的地方调用">（5），在需要强制横屏的地方调用</h5> 
<pre class="prettyprint"><code class=" hljs objectivec">- (<span class="hljs-keyword">void</span>)viewWillAppear:(<span class="hljs-built_in">BOOL</span>)animated{

    <span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span><span class="hljs-variable">.navigationBar</span><span class="hljs-variable">.hidden</span> = <span class="hljs-literal">YES</span>;
    <span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span><span class="hljs-variable">.tabBarController</span><span class="hljs-variable">.tabBar</span><span class="hljs-variable">.hidden</span> = <span class="hljs-literal">YES</span>;

    <span class="hljs-comment">// 强制横屏</span>
    [<span class="hljs-keyword">self</span> forceOrientationLandscape];

    RootNavigationController *nav = (RootNavigationController *)<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span>;
    nav<span class="hljs-variable">.interfaceOrientation</span> = UIInterfaceOrientationLandscapeRight;
    nav<span class="hljs-variable">.interfaceOrientationMask</span> = UIInterfaceOrientationMaskLandscapeRight;

    <span class="hljs-comment">//强制翻转屏幕，Home键在右边。</span>
    [[UIDevice currentDevice] setValue:@(UIInterfaceOrientationLandscapeRight) forKey:@<span class="hljs-string">"orientation"</span>];
    <span class="hljs-comment">//刷新</span>
    [<span class="hljs-built_in">UIViewController</span> attemptRotationToDeviceOrientation];
}

- (<span class="hljs-keyword">void</span>)viewWillDisappear:(<span class="hljs-built_in">BOOL</span>)animated{

    <span class="hljs-comment">//强制旋转竖屏</span>
    [<span class="hljs-keyword">self</span> forceOrientationPortrait];
    RootNavigationController *navi = (RootNavigationController *)<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span>;
    navi<span class="hljs-variable">.interfaceOrientation</span> = UIInterfaceOrientationPortrait;
    navi<span class="hljs-variable">.interfaceOrientationMask</span> = UIInterfaceOrientationMaskPortrait;

    <span class="hljs-comment">//设置屏幕的转向为竖屏</span>
    [[UIDevice currentDevice] setValue:@(UIDeviceOrientationPortrait) forKey:@<span class="hljs-string">"orientation"</span>];
    <span class="hljs-comment">//刷新</span>
    [<span class="hljs-built_in">UIViewController</span> attemptRotationToDeviceOrientation];
}</code></pre> 
<pre class="prettyprint"><code class=" hljs objectivec"><span class="hljs-preprocessor">#pragma  mark 横屏设置</span>
<span class="hljs-comment">//强制横屏</span>
- (<span class="hljs-keyword">void</span>)forceOrientationLandscape{

    AppDelegate *appdelegate=(AppDelegate *)[<span class="hljs-built_in">UIApplication</span> sharedApplication]<span class="hljs-variable">.delegate</span>;
    appdelegate<span class="hljs-variable">.isForceLandscape</span>=<span class="hljs-literal">YES</span>;
    appdelegate<span class="hljs-variable">.isForcePortrait</span>=<span class="hljs-literal">NO</span>;
    [appdelegate application:[<span class="hljs-built_in">UIApplication</span> sharedApplication] supportedInterfaceOrientationsForWindow:<span class="hljs-keyword">self</span><span class="hljs-variable">.view</span><span class="hljs-variable">.window</span>];
}

<span class="hljs-comment">//强制竖屏</span>
- (<span class="hljs-keyword">void</span>)forceOrientationPortrait{

    AppDelegate *appdelegate=(AppDelegate *)[<span class="hljs-built_in">UIApplication</span> sharedApplication]<span class="hljs-variable">.delegate</span>;
    appdelegate<span class="hljs-variable">.isForcePortrait</span>=<span class="hljs-literal">YES</span>;
    appdelegate<span class="hljs-variable">.isForceLandscape</span>=<span class="hljs-literal">NO</span>;
    [appdelegate application:[<span class="hljs-built_in">UIApplication</span> sharedApplication] supportedInterfaceOrientationsForWindow:<span class="hljs-keyword">self</span><span class="hljs-variable">.view</span><span class="hljs-variable">.window</span>];
}</code></pre> 
<h5 id="总结感觉httpwwwjianshucomp5c773628caa6这位大神已经总结的很到位了希望可以帮到需要的人">总结，感觉<a href="http://www.jianshu.com/p/5c773628caa6" rel="nofollow">http://www.jianshu.com/p/5c773628caa6</a>这位大神已经总结的很到位了，希望可以帮到需要的人</h5>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b7fb9055c81b90028d500661ece58929/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">maven pom.xml packaging报错</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/77f6d7828a4e0a2489c6b084818f7469/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">快速解决Android中的selinux权限问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>