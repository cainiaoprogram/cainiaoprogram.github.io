<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【ROS】Ros官方文档学习笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【ROS】Ros官方文档学习笔记" />
<meta property="og:description" content="Ros学习笔记 官方学习网址https://wiki.ros.org/ROS/Tutorials
如何阅读ROSwiki的网页https://wiki.ros.org/ROS/Tutorials/NavigatingTheWiki
环境搭建 printenv | grep ROS # 查看环境中ros有关的变量 source /opt/ros/melodic/setup.bash # 利用source bash建立环境，需要在打开的每个新 shell 上运行此命令才能访问 ROS 命令，除非将此行添加到 .bashrc或者zshrc。 echo $ROS_PACKAGE_PATH# 应得到/home/youruser/catkin_ws/src:/opt/ros/kinetic/share 工作区搭建 mkdir -p ~/catkin_ws/src cd ~/catkin_ws/ catkin_make # 在“src”文件夹中创建一个 CMakeLists.txt 链接。当前目录应该有一个“build构建”和“devel开发”文件夹。在“devel”文件夹在有几个 setup.*sh source devel/setup.bash # source devel里的bash文件可以覆盖当前的黄静。 创建包 包（package）：包是ROS代码的软件组织单元。每个包都可以包含库、可执行文件、脚本或其他工件。
清单 (package.xml)：清单是对包的描述。它用于定义包之间的依赖关系并捕获有关包的元信息，如版本、维护者、许可证等…
ros的文件系统管理工具 rospack rospack find [package_name] #find命令返回package地址 rospack depends1 [package_name] #查看package的一级依赖包，在xml里也会显示 rospack depends [package_name] #查看package的所有级依赖包，在xml里不会显示 roscd roscd [package_name]/subdir # 跳转到package所在的地址或者下面的subdir echo $ROS_PACKAGE_PATH # 所有的package都在这里，找不到就没有 roscd log #ROS 存储日志文件的文件夹。如果还没有运行任何 ROS 程序，这将roscd log指出它尚不存在 roscd roscpp_tut &gt;&gt; 摁一下TAB &gt;&gt; roscd roscpp_tutorials/#Tab Completion包名补全 rosls rosls [package_name]/subdir#返回package地址下目录 ros包的建立和安装 ros包的文件架构 workspace_folder/ #WORKSPACE src/ #SOURCE SPACE。package在src里 CMakeLists." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/92e451e53247a4a49f092250472c1783/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-30T09:25:10+08:00" />
<meta property="article:modified_time" content="2022-07-30T09:25:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【ROS】Ros官方文档学习笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Ros_0"></a>Ros学习笔记</h2> 
<p>官方学习网址https://wiki.ros.org/ROS/Tutorials</p> 
<p>如何阅读ROSwiki的网页https://wiki.ros.org/ROS/Tutorials/NavigatingTheWiki</p> 
<h3><a id="_6"></a>环境搭建</h3> 
<pre><code class="prism language-shell"><span class="token function">printenv</span> <span class="token operator">|</span> <span class="token function">grep</span> ROS <span class="token comment"># 查看环境中ros有关的变量 </span>
<span class="token builtin class-name">source</span> /opt/ros/melodic/setup.bash <span class="token comment"># 利用source bash建立环境，需要在打开的每个新 shell 上运行此命令才能访问 ROS 命令，除非将此行添加到 .bashrc或者zshrc。</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$ROS_PACKAGE_PATH</span><span class="token comment"># 应得到/home/youruser/catkin_ws/src:/opt/ros/kinetic/share</span>
</code></pre> 
<h3><a id="_14"></a>工作区搭建</h3> 
<pre><code class="prism language-shell"><span class="token function">mkdir</span> -p ~/catkin_ws/src
<span class="token builtin class-name">cd</span> ~/catkin_ws/
catkin_make <span class="token comment"># 在“src”文件夹中创建一个 CMakeLists.txt 链接。当前目录应该有一个“build构建”和“devel开发”文件夹。在“devel”文件夹在有几个 setup.*sh </span>
<span class="token builtin class-name">source</span> devel/setup.bash <span class="token comment"># source devel里的bash文件可以覆盖当前的黄静。</span>
</code></pre> 
<h3><a id="_23"></a>创建包</h3> 
<p>包（package）：包是ROS代码的软件组织单元。每个包都可以包含库、可执行文件、脚本或其他工件。</p> 
<p>清单 (package.xml)：清单是对包的描述。它用于定义包之间的依赖关系并捕获有关包的元信息，如版本、维护者、许可证等…</p> 
<h3><a id="ros_29"></a>ros的文件系统管理工具</h3> 
<h4><a id="rospack_31"></a>rospack</h4> 
<pre><code class="prism language-shell">rospack <span class="token function">find</span> <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span> <span class="token comment">#find命令返回package地址</span>
rospack depends1 <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span>  <span class="token comment">#查看package的一级依赖包，在xml里也会显示</span>
rospack depends <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span> <span class="token comment">#查看package的所有级依赖包，在xml里不会显示</span>
</code></pre> 
<h4><a id="roscd_39"></a>roscd</h4> 
<pre><code class="prism language-shell">roscd <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span>/subdir <span class="token comment"># 跳转到package所在的地址或者下面的subdir</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$ROS_PACKAGE_PATH</span> <span class="token comment"># 所有的package都在这里，找不到就没有</span>
roscd log <span class="token comment">#ROS 存储日志文件的文件夹。如果还没有运行任何 ROS 程序，这将roscd log指出它尚不存在</span>
roscd roscpp_tut   <span class="token operator">&gt;&gt;</span> 摁一下TAB <span class="token operator">&gt;&gt;</span>     roscd roscpp_tutorials/<span class="token comment">#Tab Completion包名补全</span>
</code></pre> 
<h3><a id="rosls_48"></a>rosls</h3> 
<pre><code class="prism language-shell">rosls <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span>/subdir<span class="token comment">#返回package地址下目录</span>
</code></pre> 
<h3><a id="ros_54"></a>ros包的建立和安装</h3> 
<h4><a id="ros_56"></a>ros包的文件架构</h4> 
<pre><code class="prism language-shell">workspace_folder/        <span class="token comment">#WORKSPACE</span>
  src/                   <span class="token comment">#SOURCE SPACE。package在src里</span>
    CMakeLists.txt       <span class="token comment">#'Toplevel' CMake file, provided by catkin，src里又一个cmake</span>
    package_1/
      CMakeLists.txt     <span class="token comment">#CMakeLists.txt file for package_1</span>
      package.xml        <span class="token comment">#Package manifest for package_1 一个package必须包括xml和cmakelists</span>
</code></pre> 
<h4><a id="ros_67"></a>ros包的创建方法</h4> 
<pre><code class="prism language-shell"><span class="token builtin class-name">cd</span> ~/catkin_ws/src <span class="token operator">&amp;&amp;</span> catkin_create_pkg beginner_tutorials std_msgs rospy roscpp <span class="token comment">#在src目录中创建包，包括xml和cmake文件</span>
catkin_create_pkg <span class="token operator">&lt;</span>package_name<span class="token operator">&gt;</span> <span class="token punctuation">[</span>depend1<span class="token punctuation">]</span> <span class="token punctuation">[</span>depend2<span class="token punctuation">]</span> <span class="token punctuation">[</span>depend3<span class="token punctuation">]</span><span class="token comment">#注意从属关系，从属包在xml里会显示&lt;build_depend&gt;std_msgs&lt;/build_depend&gt;</span>
<span class="token builtin class-name">cd</span> ~/catkin_ws <span class="token operator">&amp;&amp;</span> catkin_make <span class="token comment">#返回上一级目录make/build一下</span>
<span class="token builtin class-name">source</span> ~/catkin_ws/devel/setup.bash <span class="token comment"># 将工作区添加ROS环境中才能使用</span>
 
</code></pre> 
<h4><a id="packagexml_77"></a>package.xml的格式</h4> 
<pre><code class="prism language-xml">   1 <span class="token prolog">&lt;?xml version="1.0"?&gt;</span>
   2 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">format</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>#开头
   3 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>package</span><span class="token punctuation">&gt;</span></span>#结尾
</code></pre> 
<pre><code class="prism language-xml">1. <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>The beginner_tutorials package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span># 任何介绍
2.<span class="token comment">&lt;!-- &lt;maintainer email="jane.doe@example.com"&gt;Jane Doe&lt;/maintainer&gt; --&gt;</span> #注释格式 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maintainer</span> <span class="token attr-name">email</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user@todo.todo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>user<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maintainer</span><span class="token punctuation">&gt;</span></span> #维护者的名字 
3. <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>license</span><span class="token punctuation">&gt;</span></span>TODO<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>license</span><span class="token punctuation">&gt;</span></span>#一个许可证并在此处填写。一些常见的开源许可证是 BSD、MIT、Boost 软件许可证、GPLv2、GPLv3、LGPLv2.1 和 LGPLv3
4. <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>buildtool_depend</span><span class="token punctuation">&gt;</span></span>catkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>buildtool_depend</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>roscpp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>rospy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>std_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>#依赖
5. <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>roscpp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>rospy<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>std_msgs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>#为了所有指定的依赖项在构建和运行时都可用，因此为每个依赖项添加一个 exec_depend标记
</code></pre> 
<h4><a id="packagebuild_99"></a>含package的工作区的build</h4> 
<pre><code class="prism language-shell"><span class="token comment"># In a catkin workspace</span>
catkin_make <span class="token comment">#将构建在 src 文件夹中找到的任何 catkin 项目</span>
catkin_make --source my_src <span class="token comment">#如果src不在底下，可以添加--source</span>
catkin_make <span class="token function">install</span>  <span class="token comment"># (optionally)</span>
</code></pre> 
<h3><a id="roscore_108"></a>roscore</h3> 
<p>roscore 是使用 ROS 时应该运行的第一件事。</p> 
<pre><code class="prism language-shell">roscore
</code></pre> 
<h3><a id="rosnode_116"></a>rosnode节点</h3> 
<pre><code class="prism language-shell">rosnode list<span class="token comment">#展示所有node</span>
rosnode info rosout<span class="token comment">#展示/rosout的信息</span>
rosrun <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>node_name<span class="token punctuation">]</span><span class="token comment">#运行包内的节点</span>
rosrun <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>node_name<span class="token punctuation">]</span> __name:<span class="token operator">=</span>my_turtle<span class="token comment">#运行包内的节点并改变node的名字</span>
rosnode <span class="token function">ping</span> my_turtle<span class="token comment">#查看node运行信息</span>
</code></pre> 
<h4><a id="Topic_126"></a>Topic</h4> 
<pre><code class="prism language-shell">roscore <span class="token comment">#一个终端开core</span>
rosrun turtlesim turtlesim_node<span class="token comment">#第二个终端开乌龟节点</span>
rosrun turtlesim turtle_teleop_key<span class="token comment">#第三个终端开控制节点，两个节点通过topic通讯</span>

rosrun rqt_graph rqt_graph <span class="token comment">#利用rqtgraph显示node之间的通讯 </span>

</code></pre> 
<pre><code class="prism language-shell">rostopic -h<span class="token comment">#获得如下帮助命令</span>
rostopic bw     <span class="token comment">#display bandwidth used by topic</span>
rostopic <span class="token builtin class-name">echo</span> <span class="token punctuation">[</span>topic_name<span class="token punctuation">]</span>   <span class="token comment">#查看topic内的信息，比如rostopic echo /turtle1/cmd_ve</span>
rostopic hz <span class="token punctuation">[</span>topic<span class="token punctuation">]</span>    <span class="token comment">#报告发布数据的速率。  </span>
rostopic list   <span class="token comment">#返回当前订阅和发布的所有主题的列表。</span>
	-v<span class="token comment">#详细选项</span>
	-p<span class="token comment">#publishers</span>
  	-s<span class="token comment">#subscribers</span>
rostopic pub <span class="token punctuation">[</span>topic<span class="token punctuation">]</span> <span class="token punctuation">[</span>msg_type<span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">]</span>   <span class="token comment">#将数据发布到当前广告的主题。</span>
	rostopic pub -1 /turtle1/cmd_vel geometry_msgs/Twist -- <span class="token string">'[2.0, 0.0, 0.0]'</span> <span class="token string">'[0.0, 0.0, 1.8]'</span><span class="token comment"># - 仅发布一条消息然后退出</span>
																							   <span class="token comment">#--以下参数都不是选项</span>
rostopic <span class="token builtin class-name">type</span> <span class="token punctuation">[</span>topic<span class="token punctuation">]</span>  <span class="token comment">#返回正在发布的任何主题的消息类型。</span>
rosmsg show <span class="token punctuation">[</span>topic<span class="token punctuation">]</span><span class="token comment">#rosmsg 查看消息的详细信息</span>

</code></pre> 
<h4><a id="Services_154"></a>Services</h4> 
<p>服务是节点可以相互通信的另一种方式。服务允许节点发送请求并接收响应。</p> 
<pre><code class="prism language-shell">rosservice list         <span class="token comment">#print information about active services</span>
rosservice call <span class="token punctuation">[</span>service<span class="token punctuation">]</span> <span class="token punctuation">[</span>args<span class="token punctuation">]</span>   <span class="token comment">#call the service with the provided args</span>
rosservice <span class="token builtin class-name">type</span> <span class="token punctuation">[</span>service<span class="token punctuation">]</span>        <span class="token comment">#print service type</span>
	rosservice <span class="token builtin class-name">type</span> /spawn <span class="token operator">|</span> rossrv show <span class="token comment">#查看服务生成的信息来看看服务有参数的情况</span>
rosservice <span class="token function">find</span>         <span class="token comment">#find services by service type</span>
rosservice uri          <span class="token comment">#print service ROSRPC uri</span>
</code></pre> 
<h3><a id="rosparam_167"></a>rosparam</h3> 
<p>rosparam 允许您在 ROS 参数服务器上存储和操作数据。参数服务器可以存储整数、浮点数、布尔值、字典和列表。 rosparam 使用 YAML 标记语言作为语法</p> 
<pre><code class="prism language-shell">rosparam set<span class="token punctuation">[</span>param_name<span class="token punctuation">]</span> value            <span class="token comment">#set parameter</span>
	rosservice call /clear<span class="token comment">#改变了参数值，必须调用清除服务以使参数更改生效</span>
rosparam get <span class="token punctuation">[</span>param_name<span class="token punctuation">]</span>           <span class="token comment">#get parameter</span>
	rosparam get / <span class="token comment">#展示整个 Parameter Server 的内容。</span>
rosparam load <span class="token punctuation">[</span>file_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>namespace<span class="token punctuation">]</span>          <span class="token comment">#将所有参数写出到文件 params.yaml</span>
rosparam dump <span class="token punctuation">[</span>file_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>namespace<span class="token punctuation">]</span>          <span class="token comment">#将所有参数写入到文件 params.yaml</span>
rosparam delete         <span class="token comment">#delete parameter</span>
rosparam list           <span class="token comment">#list parameter names</span>
</code></pre> 
<h3><a id="rqt_console_182"></a>rqt_console</h3> 
<p>rqt_console 和 rqt_logger_level 进行调试</p> 
<pre><code class="prism language-shell"><span class="token comment">#信息级别</span>
Fatal<span class="token comment">#致命</span>
Error<span class="token comment">#错误</span>
Warn <span class="token comment">#警告</span>
Info <span class="token comment">#信息 </span>
Debug<span class="token comment">#调试</span>
</code></pre> 
<pre><code>rosrun rqt_console rqt_console
rosrun rqt_logger_level rqt_logger_level
</code></pre> 
<h3><a id="roslaunch_200"></a>roslaunch</h3> 
<p>roslaunch 一次启动多个节点, 按照启动文件中的定义启动节点。</p> 
<pre><code class="prism language-shell"><span class="token comment">#在package目录下创建launch文件夹</span>
roslaunch <span class="token punctuation">[</span>package<span class="token punctuation">]</span> <span class="token punctuation">[</span>filename.launch<span class="token punctuation">]</span>
	roslaunch beginner_tutorials turtlemimic.launch
</code></pre> 
<pre><code class="prism language-XML">&lt;launch&gt;

	  &lt;group ns="turtlesim1"&gt;
       &lt;node pkg="turtlesim" name="sim" type="turtlesim_node"/&gt;
   	  &lt;/group&gt;
    
      &lt;group ns="turtlesim2"&gt;
        &lt;node pkg="turtlesim" name="sim" type="turtlesim_node"/&gt;
      &lt;/group&gt;
   
      &lt;node pkg="turtlesim" name="mimic" type="mimic"&gt;
        &lt;remap from="input" to="turtlesim1/turtle1"/&gt;
        &lt;remap from="output" to="turtlesim2/turtle1"/&gt;
      &lt;/node&gt;
   
&lt;/launch&gt;
</code></pre> 
<h3><a id="rosed_229"></a>rosed</h3> 
<pre><code class="prism language-shell">rosed <span class="token punctuation">[</span>package_name<span class="token punctuation">]</span> <span class="token punctuation">[</span>filename<span class="token punctuation">]</span>
	rosed roscpp Logger.msg <span class="token comment">#编辑roscpp包内的logger.msg文件</span>
~/.bashrc<span class="token comment">#中 export EDITOR='nano -w'#设置编辑器</span>
</code></pre> 
<h3><a id="msg_237"></a>msg</h3> 
<p>msg 文件是描述 ROS 消息字段的简单文本文件。它们用于为不同语言的消息生成源代码</p> 
<p>在pkg下的msg文件夹中，用.msg来编辑文件。.msg的名字是msg的名字</p> 
<h5><a id="_243"></a>传输类型：</h5> 
<p>int8, int16, int32, int64 (plus uint*) float32, float64</p> 
<p>string time, duration</p> 
<p>variable-length array[]</p> 
<p>fixed-length array[C]</p> 
<h5><a id="_253"></a>实例</h5> 
<pre><code class="prism language-sh">$ roscd beginner_tutorials
$ mkdir msg
$ echo "string first_name string last_name uint8 age uint32 score" &gt; msg/Num.msg
</code></pre> 
<p>在xml文件里也要编辑，将msg文件编写进去</p> 
<pre><code class="prism language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>message_generation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>message_runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exec_depend</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>创建msg文件需要在cmakelists里创建依赖message_generation，使用msg需要依赖message_runtime</p> 
<pre><code class="prism language-cmake"># Do not just add this to your CMakeLists.txt, modify the existing text to add message_generation before the closing parenthesis
find_package(catkin REQUIRED COMPONENTS
   roscpp
   rospy
   std_msgs
   message_generation
)
</code></pre> 
<p>同时在cmakelists里还需要添加新建的msg文件，使用官方的命令</p> 
<pre><code class="prism language-cmake">add_message_files(
  FILES
  Num.msg
)
现在我们必须确保调用了 generate_messages() 函数。
generate_messages(
  DEPENDENCIES
  std_msgs
)

</code></pre> 
<h3><a id="rosmsg_295"></a>rosmsg</h3> 
<pre><code class="prism language-shell">$ rosmsg show <span class="token punctuation">[</span>message type<span class="token punctuation">]</span>
$ rosmsg show beginner_tutorials/Num<span class="token comment">#得到int64 num</span>

</code></pre> 
<h3><a id="srv_303"></a>srv</h3> 
<p>一个srv文件描述一个服务。它由两部分组成：请求和响应，<strong>用“—”线隔开。</strong></p> 
<h5><a id="_307"></a>实例</h5> 
<pre><code class="prism language-sh">$ roscd beginner_tutorials
$ mkdir srv
</code></pre> 
<p>不能手动写srv，一般是复制roscp一个，在这个基础上改动</p> 
<pre><code class="prism language-sh">$ scp [package_name] [file_to_copy_path] [copy_path]
$ roscp rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv

</code></pre> 
<pre><code class="prism language-xml">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build_depend</span><span class="token punctuation">&gt;</span></span>message_generation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build_depend</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exec_depend</span><span class="token punctuation">&gt;</span></span>message_runtime&lt;/exec_depend
</code></pre> 
<p>创建msg文件需要在cmakelists里创建依赖message_generation，使用msg需要依赖message_runtime</p> 
<pre><code class="prism language-cmake"># Do not just add this line to your CMakeLists.txt, modify the existing line
find_package(catkin REQUIRED COMPONENTS
  roscpp
  rospy
  std_msgs
  message_generation
)
</code></pre> 
<pre><code class="prism language-cmake">add_service_files(
  FILES
  AddTwoInts.srv
)
</code></pre> 
<h3><a id="rossrv_346"></a>rossrv</h3> 
<pre><code class="prism language-sh"> $ rossrv show &lt;service type&gt;
 $ rossrv show beginner_tutorials/AddTwoInts#
 #也可以不需要pkg的名字，一样可以找到所有的srv
 $ rossrv show AddTwoInts
[beginner_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum

[rospy_tutorials/AddTwoInts]:
int64 a
int64 b
---
int64 sum
</code></pre> 
<h4><a id="Header_370"></a>Header</h4> 
<p>ROS中还有一种特殊的类型：Header，header中包含了ROS中常用的时间戳和坐标系信息。您会经常看到 msg 文件的第一行有 Header 标头。</p> 
<h3><a id="Publisher_and_Subscriber_378"></a>创建和测试Publisher and Subscriber</h3> 
<p>https://wiki.ros.org/ROS/Tutorials/WritingPublisherSubscriber%28c%2B%2B%29</p> 
<p>https://wiki.ros.org/ROS/Tutorials/ExaminingPublisherSubscriber</p> 
<h3><a id="Service_and_Client_C_384"></a>创建和测试Service and Client (C++)</h3> 
<p>https://wiki.ros.org/ROS/Tutorials/WritingServiceClient%28c%2B%2B%29</p> 
<p>https://wiki.ros.org/ROS/Tutorials/ExaminingServiceClient</p> 
<h3><a id="bag_filemessage_390"></a>bag file里的message</h3> 
<p>https://wiki.ros.org/ROS/Tutorials/reading%20msgs%20from%20a%20bag%20file</p> 
<h3><a id="ROSwtf_394"></a>ROSwtf</h3> 
<p>https://wiki.ros.org/ROS/Tutorials/Getting%20started%20with%20roswtf</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8a2f2eaaf3a15d5e0339f32e165339b5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【python】print函数的用法示例与讲解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb14c66b2c5cfa35e4fd9cff3f09e003/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt Mac下局域网文件夹共享</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>