<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JMJS系统总结系列----Jquery分页扩展库（五） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JMJS系统总结系列----Jquery分页扩展库（五）" />
<meta property="og:description" content="文件名：JS/common/Grid.js
简介：这是基于Jquery的扩展库
用途：这个扩展库控件是针对JMJS系统的列表页面而开发的。主要功能包括：分页、排序、全选。
模板的创建、设置 A、 创建xslt列表模版
在列表模板中引入一下模板
&lt;xsl:import href=&#34;../common/BlankLineExtend.xslt&#34;/&gt;
&lt;xsl:import href=&#34;../common/Pagination.xslt&#34;/&gt;
&lt;xsl:import href=&#34;../common/Function.xslt&#34;/&gt;
B、 创建列表的表头
&lt;table id=&#34;tblList&#34; border=&#34;0&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34; class=&#34;tab_style001&#34; width=&#34;100%&#34;&gt;
&lt;thead&gt;
&lt;tr style=&#34;font-size:12px;&#34;&gt;
&lt;th width=&#34;25px&#34; align=&#34;center&#34;&gt;
&lt;input type=&#34;checkbox&#34; id=&#34;chkAll&#34; /&gt;
&lt;/th&gt;
&lt;th width=&#34;80px&#34; align=&#34;center&#34; order=&#34;ProjectAcceptNum&#34;&gt;受理编号&lt;/th&gt;
&lt;th width=&#34;80px&#34; align=&#34;center&#34; order=&#34;AcceptDate&#34; &gt;受理日期&lt;/th&gt;
&lt;th width=&#34;150px&#34; align=&#34;center&#34; order=&#34;UnitName&#34;&gt;申请单位&lt;/th&gt;
&lt;th width=&#34;*&#34; align=&#34;center&#34; order=&#34;ProjectName&#34;&gt;项目名称&lt;/th&gt;
&lt;th width=&#34;150px&#34; align=&#34;center&#34; order=&#34;ApplyCategory&#34;&gt;项目类型&lt;/th&gt;
&lt;th width=&#34;100px&#34; align=&#34;center&#34; order=&#34;UnitTel&#34; &gt;联系电话&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
请注意：&lt;thead&gt;&lt;/thead&gt;&lt;th&gt;&lt;/th&gt;&lt;tbody&gt;&lt;/tbody&gt;这三个标签 如需要设置全选功能，请在第一例中添加CheckBox标签。
如果需要排序，请在&lt;th&gt;标签中设置order属性。
C、 创建数据列表
&lt;tbody&gt;
&lt;xsl:for-each select=&#34;ReturnResult/Data/Accept&#34;&gt;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/433bc73325b24627a43362a650472acd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-05T06:45:41+08:00" />
<meta property="article:modified_time" content="2019-07-05T06:45:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JMJS系统总结系列----Jquery分页扩展库（五）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p><span style="font-size:medium;">文件名：JS/common/Grid.js</span></p> 
 <p><span style="font-size:medium;">简介：这是基于Jquery的扩展库</span></p> 
 <p><span style="font-size:medium;">用途：这个扩展库控件是针对JMJS系统的列表页面而开发的。主要功能包括：分页、排序、全选。</span></p> 
 <h3><span style="font-size:medium;">模板的创建、设置</span></h3> 
 <p><span style="font-size:medium;">A、 创建xslt列表模版</span></p> 
 <p><span style="font-size:medium;">在列表模板中引入一下模板</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:import href="../common/BlankLineExtend.xslt"/&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:import href="../common/Pagination.xslt"/&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:import href="../common/Function.xslt"/&gt;</span></p> 
 <p><span style="font-size:medium;">B、 创建列表的表头</span></p> 
 <p><span style="font-size:medium;">&lt;table id="tblList" border="0" cellpadding="0" cellspacing="0" class="tab_style001" width="100%"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;thead&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;tr style="font-size:12px;"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;th width="25px" align="center"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;input type="checkbox" id="chkAll" /&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/th&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;th width="80px" align="center" order="ProjectAcceptNum"&gt;受理编号&lt;/th&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;th width="80px" align="center" order="AcceptDate" &gt;受理日期&lt;/th&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;th width="150px" align="center" order="UnitName"&gt;申请单位&lt;/th&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;th width="*" align="center" order="ProjectName"&gt;项目名称&lt;/th&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;th width="150px" align="center" order="ApplyCategory"&gt;项目类型&lt;/th&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;th width="100px" align="center" order="UnitTel" &gt;联系电话&lt;/th&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/tr&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/thead&gt;</span></p> 
 <p><span style="font-size:medium;">请注意：&lt;thead&gt;&lt;/thead&gt;&lt;th&gt;&lt;/th&gt;&lt;tbody&gt;&lt;/tbody&gt;这三个标签 <br>如需要设置全选功能，请在第一例中添加CheckBox标签。</span></p> 
 <p><span style="font-size:medium;">如果需要排序，请在&lt;th&gt;标签中设置order属性。</span></p> 
 <p><span style="font-size:medium;">C、 创建数据列表</span></p> 
 <p><span style="font-size:medium;">&lt;tbody&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:for-each select="ReturnResult/Data/Accept"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;tr&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;td align="center"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;input type="checkbox" id="{AcceptID}" value="{AcceptID}" /&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/td&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;td height="25" align="left"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:value-of select="UnitTel"/&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/td&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/tr&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/xsl:for-each&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;!--空行扩展.开始--&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:if test="ReturnResult/@PageCount=ReturnResult/@CurentPage"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:if test="ReturnResult/@RecordCount - ReturnResult/@EndRecord * ReturnResult/@PageCount &amp;lt; 0"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:call-template name="BlankLineExtend"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="RowNum" select="ReturnResult/@EndRecord * ReturnResult/@PageCount - ReturnResult/@RecordCount" /&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="ColumnNum"&gt;7&lt;/xsl:with-param&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/xsl:call-template&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/xsl:if&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/xsl:if&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;!--空行扩展.结束--&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;!--没有记录时执行--&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:if test="ReturnResult/@RecordCount= 0"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:call-template name="BlankLineExtend"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="RowNum" select="ReturnResult/@EndRecord" /&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="ColumnNum"&gt;7&lt;/xsl:with-param&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/xsl:call-template&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/xsl:if&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/tbody&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/table&gt;<b></b></span></p> 
 <p><span style="font-size:medium;">列表的数据都包含在&lt;tbody&gt;&lt;/tbody&gt;标签中。</span></p> 
 <p><span style="font-size:medium;">日常应用中，空行扩展和没有记录时执行的salt,请注意参数&lt;xsl:with-param name="ColumnNum"&gt;7&lt;/xsl:with-param&gt;的设置。当列表有n列时，参数设置为n。</span></p> 
 <p><span style="font-size:medium;">D、 在&lt;/table&gt;标签的后面添加</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:call-template name="Pagination"&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="StartRecord" select="ReturnResult/@StartRecord"/&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="PageSize" select="ReturnResult/@EndRecord"/&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="RecordCount" select="ReturnResult/@RecordCount" /&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="CurentPage" select="ReturnResult/@CurentPage"/&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;xsl:with-param name="PageCount" select="ReturnResult/@PageCount"/&gt;</span></p> 
 <p><span style="font-size:medium;">&lt;/xsl:call-template&gt;</span></p> 
 <p><span style="font-size:medium;">用于设置分页控件的相关数据</span></p> 
 <h3><span style="font-size:medium;">Grid.js插件的介绍</span></h3> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">// 名 称：Grid</span></p> 
 <p><span style="font-size:medium;">// 说 明：Grid的Jquery插件,提交分页、排序等功能初始化</span></p> 
 <p><span style="font-size:medium;">// 参 数：opts{<!-- --></span></p> 
 <p><span style="font-size:medium;">// hasCheckbox:true,//是否有Checkbox全选</span></p> 
 <p><span style="font-size:medium;">// sort:true,//是否排序</span></p> 
 <p><span style="font-size:medium;">// queryParams:'',//查询参数</span></p> 
 <p><span style="font-size:medium;">// url:'',//提交的URL</span></p> 
 <p><span style="font-size:medium;">// callbackFun,</span></p> 
 <p><span style="font-size:medium;">// }</span></p> 
 <p><span style="font-size:medium;">// 返 回 值：无</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">$.fn.Grid = function(opts) {<!-- --></span></p> 
 <p><span style="font-size:medium;">opts.tableId = $(this).attr("id");</span></p> 
 <p><span style="font-size:medium;">options = opts;</span></p> 
 <p><span style="font-size:medium;">setPagerButton();</span></p> 
 <p><span style="font-size:medium;">initPagerBar();</span></p> 
 <p><span style="font-size:medium;">if (opts.hasCheckbox) {<!-- --></span></p> 
 <p><span style="font-size:medium;">bindCheckbox();</span></p> 
 <p><span style="font-size:medium;">}</span></p> 
 <p><span style="font-size:medium;">if (opts.sort)</span></p> 
 <p><span style="font-size:medium;">sortTable(opts.tableId);</span></p> 
 <p><span style="font-size:medium;">setRowSelect(); //设置鼠标结过时的样式和选择Checkbox</span></p> 
 <p><span style="font-size:medium;">};</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">// 名 称：RefreshGrid</span></p> 
 <p><span style="font-size:medium;">// 说 明：Grid的Jquery插件刷新数据,提交分页、排序等功能</span></p> 
 <p><span style="font-size:medium;">// 参 数：opts{<!-- --></span></p> 
 <p><span style="font-size:medium;">// hasCheckbox:true,//是否有Checkbox全选</span></p> 
 <p><span style="font-size:medium;">// sort:true,//是否排序</span></p> 
 <p><span style="font-size:medium;">// queryParams:'',//查询参数</span></p> 
 <p><span style="font-size:medium;">// url:''//提交的URL</span></p> 
 <p><span style="font-size:medium;">// }</span></p> 
 <p><span style="font-size:medium;">// 返 回 值：无</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">$.fn.RefreshGrid = function(opts) {<!-- --></span></p> 
 <p><span style="font-size:medium;">$("#curentPage").val(1);</span></p> 
 <p><span style="font-size:medium;">setPagerButton();</span></p> 
 <p><span style="font-size:medium;">options = opts;</span></p> 
 <p><span style="font-size:medium;">options.tableId = $(this).attr("id");</span></p> 
 <p><span style="font-size:medium;">$("#orderby").val("");</span></p> 
 <p><span style="font-size:medium;">callServer(1, $("#limit").val());</span></p> 
 <p><span style="font-size:medium;">};</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">// 名 称：Refresh</span></p> 
 <p><span style="font-size:medium;">// 说 明：刷新当前页（一定要在初始后才能调用此方法）</span></p> 
 <p><span style="font-size:medium;">// 参 数：无</span></p> 
 <p><span style="font-size:medium;">// 返 回 值：无</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">$.fn.Refresh = function() {<!-- --></span></p> 
 <p><span style="font-size:medium;">$("#curentPage").val(1);</span></p> 
 <p><span style="font-size:medium;">var start = parseInt($("#limit").val()) * (parseInt($("#curentPage").val()) - 1) + 1;</span></p> 
 <p><span style="font-size:medium;">var end = parseInt($("#limit").val());</span></p> 
 <p><span style="font-size:medium;">callServer(start, end);</span></p> 
 <p><span style="font-size:medium;">};</span></p> 
 <h3><span style="font-size:medium;">新建列表匹配的js，调用列表初始化方法，初始化列表</span></h3> 
 <p><span style="font-size:medium;">//页面初始化后执行</span></p> 
 <p><span style="font-size:medium;">$(document).ready(function() {<!-- --></span></p> 
 <p><span style="font-size:medium;">initSkin();</span></p> 
 <p><span style="font-size:medium;">$("#tblList").Grid({ sort: true, hasCheckbox: true, queryParams: $("#form1").formSerialize(), url: "Accept.do?action=GetAcceptGridHtml" });</span></p> 
 <p><span style="font-size:medium;">getGetApplyCategorys();</span></p> 
 <p><span style="font-size:medium;">});</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">// 名 称：generalSearch</span></p> 
 <p><span style="font-size:medium;">// 说 明：常规查询</span></p> 
 <p><span style="font-size:medium;">// 参 数：无</span></p> 
 <p><span style="font-size:medium;">// 返 回 值：无</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">function generalSearch() {<!-- --></span></p> 
 <p><span style="font-size:medium;">queryParams = $("#form1").formSerialize();</span></p> 
 <p><span style="font-size:medium;">$("#tblList").RefreshGrid({ sort: true, hasCheckbox: true, queryParams: queryParams, url: "Accept.do?action=GetAcceptGridHtml" });</span></p> 
 <p><span style="font-size:medium;">}</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">// 名 称：advanceQueryOK</span></p> 
 <p><span style="font-size:medium;">// 说 明：高级查询的确定按钮事件</span></p> 
 <p><span style="font-size:medium;">// 参 数：无</span></p> 
 <p><span style="font-size:medium;">// 返 回 值：无</span></p> 
 <p><span style="font-size:medium;">//****************************************************</span></p> 
 <p><span style="font-size:medium;">function advanceQueryOK() {<!-- --></span></p> 
 <p><span style="font-size:medium;">queryParams = $("#frmAdvancedQuery").formSerialize();</span></p> 
 <p><span style="font-size:medium;">dialog.close();</span></p> 
 <p><span style="font-size:medium;">$("#tblList").RefreshGrid({ sort: true, hasCheckbox: true, queryParams: queryParams, url: "Accept.do?action=GetAcceptGridHtml" });</span></p> 
 <p><span style="font-size:medium;">}</span></p> 
</div> 
<p>转载于:https://www.cnblogs.com/lanchong/archive/2011/08/31/2160815.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8896dd5ed6c5e1b5bdf0211cfbdad26e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JMJS系统总结系列----XSLT的语句规则（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/97484b2a774b44b671671876259b0ae0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C# 关键字--default</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>