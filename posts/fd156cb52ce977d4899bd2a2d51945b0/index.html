<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>postgres基本操作(个人总结版) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="postgres基本操作(个人总结版)" />
<meta property="og:description" content="postgres 基本操作 登录 $ psql (连接数据库，默认用户和数据库都是postgres) $ psql -U &lt;user&gt; -d &lt;dbname&gt; 数据库操作 // 列举数据库，相当于show databases
$ \l // 切换数据库，相当与use dbname
$ \c &lt;dbname&gt; // 列举表，相当与show tables
$ \dt // 查看表结构，相当于desc
$ \d tblname // 创建数据库
$ create database &lt;dbname&gt; // 删除数据库
$ drop database &lt;dbname&gt; // 创建表
$ create table ([字段名1] [类型1] ;,[字段名2] [类型2],......&lt;,primary key (字段名m,字段名n,...)&gt;;); // 在表中插入数据
$ insert into 表名 ([字段名m],[字段名n],......) values ([列m的值],[列n的值],......); // 备份数据库
$ pg_dump -U postgres -f /tmp/postgres." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fd156cb52ce977d4899bd2a2d51945b0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-14T16:59:14+08:00" />
<meta property="article:modified_time" content="2018-08-14T16:59:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">postgres基本操作(个人总结版)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4 id="postgres-基本操作">postgres 基本操作</h4> 
<h6 id="登录">登录</h6> 
<pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>psql (连接数据库，默认用户和数据库都是postgres)
<span class="hljs-variable">$ </span>psql -<span class="hljs-constant">U</span> &lt;user&gt; -d &lt;dbname&gt; </code></pre> 
<h6 id="数据库操作">数据库操作</h6> 
<p>// 列举数据库，相当于show databases</p> 
<pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>\l</code></pre> 
<p>// 切换数据库，相当与use dbname</p> 
<pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>\c &lt;dbname&gt;</code></pre> 
<p>// 列举表，相当与show tables</p> 
<pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>\dt</code></pre> 
<p>// 查看表结构，相当于desc</p> 
<pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>\d tblname</code></pre> 
<p>// 创建数据库</p> 
<pre class="prettyprint"><code class=" hljs sql">$ <span class="hljs-operator"><span class="hljs-keyword">create</span> <span class="hljs-keyword">database</span> &lt;dbname&gt;</span></code></pre> 
<p>// 删除数据库</p> 
<pre class="prettyprint"><code class=" hljs sql">$ <span class="hljs-operator"><span class="hljs-keyword">drop</span> <span class="hljs-keyword">database</span> &lt;dbname&gt;</span></code></pre> 
<p>// 创建表</p> 
<pre class="prettyprint"><code class=" hljs r">$ create table ([字段名<span class="hljs-number">1</span>] [类型<span class="hljs-number">1</span>] ;,[字段名<span class="hljs-number">2</span>] [类型<span class="hljs-number">2</span>],......&lt;,primary key (字段名m,字段名n,<span class="hljs-keyword">...</span>)&gt;;); </code></pre> 
<p>// 在表中插入数据</p> 
<pre class="prettyprint"><code class=" hljs css">$ <span class="hljs-tag">insert</span> <span class="hljs-tag">into</span> 表名 (<span class="hljs-attr_selector">[字段名m]</span>,<span class="hljs-attr_selector">[字段名n]</span>,......) <span class="hljs-tag">values</span> (<span class="hljs-attr_selector">[列m的值]</span>,<span class="hljs-attr_selector">[列n的值]</span>,......);</code></pre> 
<p>// 备份数据库</p> 
<pre class="prettyprint"><code class=" hljs lasso">$ pg_dump <span class="hljs-attribute">-U</span> postgres <span class="hljs-attribute">-f</span> /tmp/postgres<span class="hljs-built_in">.</span>sql postgres (导出postgres数据库保存为postgres<span class="hljs-built_in">.</span>sql)
$ pg_dump <span class="hljs-attribute">-U</span> postgres <span class="hljs-attribute">-f</span> /tmp/postgres<span class="hljs-built_in">.</span>sql <span class="hljs-attribute">-t</span> test01 postgres (导出postgres数据库中表test01的数据)
$ pg_dump <span class="hljs-attribute">-U</span> postgres <span class="hljs-attribute">-F</span> t <span class="hljs-attribute">-f</span> /tmp/postgres<span class="hljs-built_in">.</span>tar postgres (导出postgres数据库以tar形式压缩保存为postgres<span class="hljs-built_in">.</span>tar)</code></pre> 
<p>// 恢复数据库</p> 
<pre class="prettyprint"><code class=" hljs avrasm">$ psql -U postgres -f /tmp/postgres<span class="hljs-preprocessor">.sql</span> bk01 (恢复postgres<span class="hljs-preprocessor">.sql</span>数据到bk01数据库)
$ pg_restore -U postgres -d bk01 /tmp/postgres<span class="hljs-preprocessor">.tar</span>  (恢复postgres<span class="hljs-preprocessor">.tar</span>数据到bk01数据库)</code></pre> 
<h6 id="用户操作">用户操作</h6> 
<p>// 切换用户</p> 
<pre class="prettyprint"><code class=" hljs ruby"><span class="hljs-variable">$ </span>\c - &lt;username&gt;</code></pre> 
<p>// 创建用户并设置密码</p> 
<pre class="prettyprint"><code class=" hljs sql">$ <span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'username'</span> <span class="hljs-keyword">WITH</span> PASSWORD <span class="hljs-string">'password'</span>;</span>
$ <span class="hljs-operator"><span class="hljs-keyword">CREATE</span> ROLE <span class="hljs-string">'username'</span> CREATEDB PASSWORD <span class="hljs-string">'password'</span> LOGIN;</span> (创建角色并授予创建数据库及密码登录的属性)</code></pre> 
<p>// 修改用户密码</p> 
<pre class="prettyprint"><code class=" hljs sql">$ <span class="hljs-operator"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">USER</span> <span class="hljs-string">'username'</span> <span class="hljs-keyword">WITH</span> PASSWORD <span class="hljs-string">'password'</span>;</span></code></pre> 
<p>// 数据库授权</p> 
<pre class="prettyprint"><code class=" hljs sql">$ <span class="hljs-operator"><span class="hljs-keyword">GRANT</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">PRIVILEGES</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DATABASE</span> <span class="hljs-string">'dbname'</span> <span class="hljs-keyword">TO</span> <span class="hljs-string">'username'</span>;</span></code></pre> 
<p>// 修改用户权限</p> 
<pre class="prettyprint"><code class=" hljs sql">$ <span class="hljs-operator"><span class="hljs-keyword">ALTER</span> ROLE <span class="hljs-string">'username'</span> createdb ;</span> (授予创建数据库权限)
$ <span class="hljs-operator"><span class="hljs-keyword">ALTER</span> ROLE <span class="hljs-string">'username'</span> superuser ;</span>(授予超级管理员权限)</code></pre> 
<p>// 角色属性</p> 
<table><thead><tr><th>属性</th><th>说明</th></tr></thead><tbody><tr><td>login</td><td>只有具有 LOGIN 属性的角色可以用做数据库连接的初始角色名。</td></tr><tr><td>superuser</td><td>数据库超级用户</td></tr><tr><td>createdb</td><td>创建数据库权限</td></tr><tr><td>createrole</td><td>允许其创建或删除其他普通的用户角色(超级用户除外)</td></tr><tr><td>replication</td><td>做流复制的时候用到的一个用户属性，一般单独设定。</td></tr><tr><td>password</td><td>在登录时要求指定密码时才会起作用，比如md5或者password模式，跟客户端的连接认证方式有关</td></tr><tr><td>inherit</td><td>用户组对组员的一个继承标志，成员可以继承用户组的权限特性</td></tr></tbody></table>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ca881eb1d735ef7b0d2adc3e12d6f64d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">centos6.5手动编译源码安装screen</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/15ab8db298a96e185508e8f7ab01d258/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">http通信协议</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>