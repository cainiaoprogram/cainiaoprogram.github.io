<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>easyui datagrid url不请求请求_easyui中datagrid添加单元格编辑事件 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="easyui datagrid url不请求请求_easyui中datagrid添加单元格编辑事件" />
<meta property="og:description" content="1.easyui中datagrid添加单元格编辑事件
这部分代码实现两个功能
(1)在进行选择行的时候在页脚统计已选数据需要计算字段的和
(2)有一个字段可以进行编辑，在编辑完成后也要在页脚完成对该字段的统计
根据昨天的内容，可以完成不编辑字段的统计，今天的重点是需要编辑字段的统计。
代码如下：
$(&#39;#whxdg&#39;).datagrid({
fit:true,
singleSelect:false,
toolbar: &#39;#whxtb&#39;,
showFooter:&#39;true&#39;,
url:getRootPath()&#43;&#39;/handverify/findDfInfo.do?customer=&#39;&#43;code&#43;&#39;&amp;pk_org=&#39;&#43;pk_org&#43;&#39;&amp;status=2&#39;,
columns:[[ {field:&#39;ck&#39;,checkbox:true},
{field:&#39;BILLNO&#39;,title:&#39;单据号&#39;,width:200,align:&#39;center&#39;},
{field:&#39;BILLTYPE&#39;,title:&#39;单据类型&#39;,width:200,align:&#39;center&#39;},
{field:&#39;JINE&#39;,title:&#39;金额&#39;,width:200,align:&#39;center&#39;},
{field:&#39;YHXJE&#39;,title:&#39;已核销金额&#39;,width:200,align:&#39;center&#39;},
{field:&#39;MONEY_CR&#39;,title:&#39;未核销金额&#39;,width:200,align:&#39;center&#39;},
{field:&#39;XGHXJE&#39;,title:&#39;修改核销金额&#39;,width:200,align:&#39;center&#39;,editor:{type:&#39;numberbox&#39;,options:{precision:0},min:0}},
{field:&#39;BILLDATE&#39;,title:&#39;单据日期&#39;,width:200,align:&#39;center&#39;},
{field:&#39;HEADID&#39;,title:&#39;单据日期&#39;,width:200,align:&#39;center&#39;,hidden:true},
{field:&#39;BODYID&#39;,title:&#39;单据日期&#39;,width:200,align:&#39;center&#39;,hidden:true}
]],
//添加单击事件，
onClickCell: function(index,field,value){
if(field == &#39;XGHXJE&#39;){
$(this).datagrid(&#39;beginEdit&#39;, index);
var ed = $(this).datagrid(&#39;getEditor&#39;, {index:index,field:&#39;XGHXJE&#39;});
$(ed.target).focus();
}else{
$(this).datagrid(&#39;endEdit&#39;, index);
}
},
onSelect:function (index,row){
$(this).datagrid(&#39;endEdit&#39;,index);
var rows = $(&#39;#whxdg&#39;).datagrid(&#39;getFooterRows&#39;); //获取底部页脚信息
var foot_row = rows[0];
var XGHXJE = row.XGHXJE;
if(XGHXJE == &#34;&#34;){
XGHXJE = 0;
}
rows[0][&#39;JINE&#39;] = (parseFloat(row." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b30ae15ce75ff61586e6fff1ca12336a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-29T10:41:18+08:00" />
<meta property="article:modified_time" content="2020-11-29T10:41:18+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">easyui datagrid url不请求请求_easyui中datagrid添加单元格编辑事件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>1.easyui中datagrid添加单元格编辑事件</p> 
 <p>这部分代码实现两个功能</p> 
 <p>(1)在进行选择行的时候在页脚统计已选数据需要计算字段的和</p> 
 <p>(2)有一个字段可以进行编辑，在编辑完成后也要在页脚完成对该字段的统计</p> 
 <p>根据昨天的内容，可以完成不编辑字段的统计，今天的重点是需要编辑字段的统计。</p> 
 <p>代码如下：</p> 
 <p>$('#whxdg').datagrid({<!-- --></p> 
 <p> fit:true,</p> 
 <p> singleSelect:false,</p> 
 <p> toolbar: '#whxtb',</p> 
 <p> showFooter:'true',</p> 
 <p> url:getRootPath()+'/handverify/findDfInfo.do?customer='+code+'&amp;pk_org='+pk_org+'&amp;status=2',</p> 
 <p> columns:[[ </p> 
 <p> {field:'ck',checkbox:true},</p> 
 <p> {field:'BILLNO',title:'单据号',width:200,align:'center'},</p> 
 <p> {field:'BILLTYPE',title:'单据类型',width:200,align:'center'},</p> 
 <p> {field:'JINE',title:'金额',width:200,align:'center'},</p> 
 <p> {field:'YHXJE',title:'已核销金额',width:200,align:'center'},</p> 
 <p> {field:'MONEY_CR',title:'未核销金额',width:200,align:'center'},</p> 
 <p> {field:'XGHXJE',title:'修改核销金额',width:200,align:'center',editor:{type:'numberbox',options:{precision:0},min:0}},</p> 
 <p> {field:'BILLDATE',title:'单据日期',width:200,align:'center'},</p> 
 <p> {field:'HEADID',title:'单据日期',width:200,align:'center',hidden:true},</p> 
 <p> {field:'BODYID',title:'单据日期',width:200,align:'center',hidden:true}</p> 
 <p> ]],</p> 
 <p> //添加单击事件，</p> 
 <p> onClickCell: function(index,field,value){<!-- --></p> 
 <p> if(field == 'XGHXJE'){<!-- --></p> 
 <p> $(this).datagrid('beginEdit', index);</p> 
 <p> var ed = $(this).datagrid('getEditor', {index:index,field:'XGHXJE'});</p> 
 <p> $(ed.target).focus();</p> 
 <p> }else{<!-- --></p> 
 <p> $(this).datagrid('endEdit', index);</p> 
 <p> }</p> 
 <p> },</p> 
 <p> onSelect:function (index,row){<!-- --></p> 
 <p> $(this).datagrid('endEdit',index);</p> 
 <p> var rows = $('#whxdg').datagrid('getFooterRows'); //获取底部页脚信息</p> 
 <p> var foot_row = rows[0];</p> 
 <p> var XGHXJE = row.XGHXJE;</p> 
 <p> if(XGHXJE == ""){<!-- --></p> 
 <p> XGHXJE = 0;</p> 
 <p> }</p> 
 <p> rows[0]['JINE'] = (parseFloat(row.JINE)+parseFloat(rows[0].JINE)).toFixed(2);</p> 
 <p> rows[0]['YHXJE'] = (parseFloat(row.YHXJE)+parseFloat(rows[0].YHXJE)).toFixed(2);</p> 
 <p> rows[0]['MONEY_CR'] = (parseFloat(row.MONEY_CR)+parseFloat(rows[0].MONEY_CR)).toFixed(2);</p> 
 <p> rows[0]['XGHXJE'] = (parseFloat(XGHXJE)+parseFloat(rows[0].XGHXJE)).toFixed(2);</p> 
 <p> $('#whxdg').datagrid('reloadFooter');</p> 
 <p> },</p> 
 <p> onUnselect:function (index,row){<!-- --></p> 
 <p> var rows = $('#whxdg').datagrid('getFooterRows');</p> 
 <p> //alert(row.HXJETZ);</p> 
 <p> var row_XGHXJE = 0;</p> 
 <p> var foot_row = rows[0];</p> 
 <p> if(row.XGHXJE != ""){<!-- --></p> 
 <p> row_XGHXJE = row.XGHXJE;</p> 
 <p> } </p> 
 <p> rows[0]['JINE'] = (parseFloat(rows[0].JINE) - parseFloat(row.JINE)).toFixed(2);</p> 
 <p> rows[0]['YHXJE'] = (parseFloat(rows[0].YHXJE) - parseFloat(row.YHXJE)).toFixed(2);</p> 
 <p> rows[0]['MONEY_CR'] = (parseFloat(rows[0].MONEY_CR) - parseFloat(row.MONEY_CR)).toFixed(2);</p> 
 <p> rows[0]['XGHXJE'] = (parseFloat(rows[0].XGHXJE) - parseFloat(row.XGHXJE)).toFixed(2);</p> 
 <p> $('#whxdg').datagrid('reloadFooter');</p> 
 <p> },</p> 
 <p> onSelectAll:function (rows){<!-- --></p> 
 <p> var foot_JINE = 0;</p> 
 <p> var foot_YHXJE = 0;</p> 
 <p> var foot_MONEY_CR = 0;</p> 
 <p> var foot_XGHXJE = 0;</p> 
 <p> for(var i = 0;i &lt; rows.length;i++){<!-- --></p> 
 <p> var XGHXJE = rows[i].XGHXJE;</p> 
 <p> if(XGHXJE == ""){<!-- --></p> 
 <p> XGHXJE = 0;</p> 
 <p> }</p> 
 <p> $(this).datagrid('endEdit', i);</p> 
 <p> foot_JINE = (parseFloat(foot_JINE) + parseFloat(rows[i].JINE)).toFixed(2);</p> 
 <p> foot_YHXJE = (parseFloat(foot_YHXJE) + parseFloat(rows[i].YHXJE)).toFixed(2);</p> 
 <p> foot_MONEY_CR = (parseFloat(foot_MONEY_CR) + parseFloat(rows[i].MONEY_CR)).toFixed(2);</p> 
 <p> foot_XGHXJE = (parseFloat(foot_XGHXJE) + parseFloat(XGHXJE)).toFixed(2);</p> 
 <p> }</p> 
 <p> var foot_rows = $('#whxdg').datagrid('getFooterRows');</p> 
 <p> foot_rows[0]['JINE'] = foot_JINE;</p> 
 <p> foot_rows[0]['YHXJE'] = foot_YHXJE;</p> 
 <p> foot_rows[0]['MONEY_CR'] = foot_MONEY_CR;</p> 
 <p> foot_rows[0]['XGHXJE'] = foot_XGHXJE;</p> 
 <p> $('#whxdg').datagrid('reloadFooter');</p> 
 <p> },</p> 
 <p> onUnselectAll:function (rows){<!-- --></p> 
 <p> var foot_rows = $('#whxdg').datagrid('getFooterRows');</p> 
 <p> foot_rows[0]['JINE'] = "0";</p> 
 <p> foot_rows[0]['YHXJE'] = "0";</p> 
 <p> foot_rows[0]['MONEY_CR'] = "0";</p> 
 <p> foot_rows[0]['XGHXJE'] = "0";</p> 
 <p> $('#whxdg').datagrid('reloadFooter');</p> 
 <p> } </p> 
 <p> });</p> 
 <p>通过js加载datagrid代码如上所示，通过onSelect，onUnselect，onSelectAll和onUnselectAll四个方法完成对页脚数据的统计。方法中重要代码：</p> 
 <p>(1)var foot_rows = $('#whxdg').datagrid('getFooterRows'):获取底部页脚行信息；</p> 
 <p>(2)foot_rows[0]['JINE'] = foot_JINE;以该格式对不同的字段进行赋值</p> 
 <p>(3)$('#whxdg').datagrid('reloadFooter');重新加载页脚行数据</p> 
 <p>除此之外，通过单击事件获取需要编辑的字段：思路入下：</p> 
 <p>(1)只有单击需要编辑的字段时，该字段才进入编辑状态，同时，该行数据为onUnselect(取消选中)状态，这样做为了便于统计。主要代码：</p> 
 <p>$(this).datagrid('beginEdit', index);//开启该行数据的编辑状态</p> 
 <p>var ed = $(this).datagrid('getEditor', {index:index,field:'XGHXJE'});//获取需要编辑的字段</p> 
 <p>$(ed.target).focus();//设置该字段为焦点(即把光标移到该字段上)</p> 
 <p>(2)单击该行其他单元格时，该行退出编辑，同时，该行数据为onSelect(选中)状态，这样做同样是为了便于统计。</p> 
 <p>$(this).datagrid('endEdit', index);//结束该行数据编辑</p> 
 <p>(3)如果没有单击其他单元格，直接勾选行首的选中单元格或者进行全选操作，同样结束行数据的编辑状态，并进行统计。</p> 
 <p>$(this).datagrid('endEdit', index);//结束该行数据编辑，需要写入到onSelect和onSelectAll中。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/95/09/62lpJ3hJ_o.png" alt="57cb6caebb2f48d550f4a10c2c15e423.png"> 
  <p class="pgc-img-caption">编辑时为选中状态</p> 
 </div> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/ca/27/IOr5848Y_o.png" alt="2ff295f2dcded4d7f84387eff11bd3db.png"> 
  <p class="pgc-img-caption">表格字段编辑状态</p> 
 </div> 
 <p>2.通过js和html共同完成上述功能</p> 
 <p>(1)html代码</p> 
 <p> data-options="iconCls:'icon-edit'"</p> 
 <p> toolbar="#yhxtb"fit="true" showFooter="true"&gt;</p> 
 <p> 主键本方单据号本方单据类型对方单据号对方单据类型核销金额应核销金额总核销金额未核销金额核销金额调整</p> 
 <p>(2)js代码</p> 
 <p>$(function(){<!-- --></p> 
 <p> $('#yhxdg').datagrid({<!-- --></p> 
 <p> //添加单击事件，</p> 
 <p> onClickCell: function(index,field,value){<!-- --></p> 
 <p> if(field == 'HXJETZ'){<!-- --></p> 
 <p> $(this).datagrid('beginEdit', index);</p> 
 <p> var ed = $(this).datagrid('getEditor', {index:index,field:'HXJETZ'});</p> 
 <p> $(ed.target).focus();</p> 
 <p> }else{<!-- --></p> 
 <p> $(this).datagrid('endEdit', index);</p> 
 <p> }</p> 
 <p> },</p> 
 <p> //核销明细选择事件</p> 
 <p> onCheck:function (index,row){<!-- --></p> 
 <p> $(this).datagrid('endEdit',index);</p> 
 <p> var rows = $('#yhxdg').datagrid('getFooterRows');</p> 
 <p> //alert(row.HXJETZ);</p> 
 <p> var row_HXJETZ = 0;</p> 
 <p> var foot_row = rows[0];</p> 
 <p> if(row.HXJETZ != ""){<!-- --></p> 
 <p> row_HXJETZ = row.HXJETZ;</p> 
 <p> } </p> 
 <p> rows[0]['YHXJE'] = (parseFloat(row.YHXJE)+parseFloat(rows[0].YHXJE)).toFixed(2);</p> 
 <p> rows[0]['HXJE'] = (parseFloat(row.HXJE)+parseFloat(rows[0].HXJE)).toFixed(2);</p> 
 <p> rows[0]['ZHXJE'] = (parseFloat(row.ZHXJE)+parseFloat(rows[0].ZHXJE)).toFixed(2);</p> 
 <p> rows[0]['ZWHXJE'] = (parseFloat(row.ZWHXJE)+parseFloat(rows[0].ZWHXJE)).toFixed(2);</p> 
 <p> rows[0]['HXJETZ'] = (parseFloat(row_HXJETZ)+parseFloat(rows[0].HXJETZ)).toFixed(2);</p> 
 <p> //rows[0]['salary'] = 60000;</p> 
 <p> $('#yhxdg').datagrid('reloadFooter');</p> 
 <p> },</p> 
 <p> onUncheck:function (index,row){<!-- --></p> 
 <p> var rows = $('#yhxdg').datagrid('getFooterRows');</p> 
 <p> //alert(row.HXJETZ);</p> 
 <p> var row_HXJETZ = 0;</p> 
 <p> var foot_row = rows[0];</p> 
 <p> if(row.HXJETZ != ""){<!-- --></p> 
 <p> row_HXJETZ = row.HXJETZ;</p> 
 <p> } </p> 
 <p> rows[0]['YHXJE'] = (parseFloat(rows[0].YHXJE) - parseFloat(row.YHXJE)).toFixed(2);</p> 
 <p> rows[0]['HXJE'] = (parseFloat(rows[0].HXJE) - parseFloat(row.HXJE)).toFixed(2);</p> 
 <p> rows[0]['ZHXJE'] = (parseFloat(rows[0].ZHXJE) - parseFloat(row.ZHXJE)).toFixed(2);</p> 
 <p> rows[0]['ZWHXJE'] = (parseFloat(rows[0].ZWHXJE) - parseFloat(row.ZWHXJE)).toFixed(2);</p> 
 <p> rows[0]['HXJETZ'] = (parseFloat(rows[0].HXJETZ) - parseFloat(row_HXJETZ)).toFixed(2);</p> 
 <p> //rows[0]['salary'] = 60000;</p> 
 <p> $('#yhxdg').datagrid('reloadFooter');</p> 
 <p> },</p> 
 <p> onCheckAll:function (rows){<!-- --></p> 
 <p> var foot_YHXJE = 0;</p> 
 <p> var foot_HXJE = 0;</p> 
 <p> var foot_ZHXJE = 0;</p> 
 <p> var foot_ZWHXJE = 0;</p> 
 <p> var foot_HXJETZ = 0;</p> 
 <p> for(var i = 0;i &lt; rows.length;i++){<!-- --></p> 
 <p> var HXJETZ = 0;</p> 
 <p> if(rows[i].HXJETZ != ""){<!-- --></p> 
 <p> HXJETZ = rows[i].HXJETZ;</p> 
 <p> }</p> 
 <p> $(this).datagrid('endEdit',i);</p> 
 <p> foot_YHXJE = (parseFloat(foot_YHXJE) + parseFloat(rows[i].YHXJE)).toFixed(2);</p> 
 <p> foot_HXJE = (parseFloat(foot_HXJE) + parseFloat(rows[i].HXJE)).toFixed(2);</p> 
 <p> foot_ZHXJE = (parseFloat(foot_ZHXJE) + parseFloat(rows[i].ZHXJE)).toFixed(2);</p> 
 <p> foot_ZWHXJE = (parseFloat(foot_ZWHXJE) + parseFloat(rows[i].ZWHXJE)).toFixed(2);</p> 
 <p> foot_HXJETZ = (parseFloat(foot_HXJETZ) + parseFloat(HXJETZ)).toFixed(2);</p> 
 <p> }</p> 
 <p> var foot_rows = $('#yhxdg').datagrid('getFooterRows');</p> 
 <p> foot_rows[0]['YHXJE'] = foot_YHXJE;</p> 
 <p> foot_rows[0]['HXJE'] = foot_HXJE;</p> 
 <p> foot_rows[0]['ZHXJE'] = foot_ZHXJE;</p> 
 <p> foot_rows[0]['ZWHXJE'] = foot_ZWHXJE;</p> 
 <p> foot_rows[0]['HXJETZ'] = foot_HXJETZ;</p> 
 <p> //rows[0]['salary'] = 60000;</p> 
 <p> $('#yhxdg').datagrid('reloadFooter');</p> 
 <p> },</p> 
 <p> onUncheckAll:function (rows){<!-- --></p> 
 <p> var foot_rows = $('#yhxdg').datagrid('getFooterRows');</p> 
 <p> foot_rows[0]['YHXJE'] = "0";</p> 
 <p> foot_rows[0]['HXJE'] = "0";</p> 
 <p> foot_rows[0]['ZHXJE'] = "0";</p> 
 <p> foot_rows[0]['ZWHXJE'] = "0";</p> 
 <p> foot_rows[0]['HXJETZ'] = "0";</p> 
 <p> //rows[0]['salary'] = 60000;</p> 
 <p> $('#yhxdg').datagrid('reloadFooter');</p> 
 <p> } </p> 
 <p> }); </p> 
 <p>}) </p> 
 <p>功能和主要实现代码如上。</p> 
 <p>前端相关文章链接：</p> 
 <p>easyui中datagrid页脚数据动态刷新以及JS获取项目的绝对路径</p> 
 <p>Oracle相关文章链接</p> 
 <p>Oracle学习日记——高级查找</p> 
 <p>Oracle查询基础</p> 
 <p>Oracle学习日记——时间日期范围处理</p> 
 <p>MySQL相关文章链接</p> 
 <p>MySQL学习系列之十——联结</p> 
 <p>MySQL学习系列之十二——组合查询</p> 
 <p>MySQL学习系列之八——分组数据</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cd820d3329d30821aadba435328b56d1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">break是python合法标识符_python 正则表达式练习题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b71e727b813f9dd77e9b35059db155a1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">什么拦截软件都挡不住？教你如何杜绝流氓软件弹窗！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>