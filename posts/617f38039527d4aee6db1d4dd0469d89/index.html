<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>1024数据库图书管理系统创建 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="1024数据库图书管理系统创建" />
<meta property="og:description" content="创建三个表格，然后添加相关的约束，修改、删除、查询…
drop table Books create table Books (BookID char(20) primary key,--图书编号 主键约束 Bname char(50) unique,--图书名 唯一约束 Author varchar(30),--作者 Press varchar(30),--出版社 Price money--定价 ) select *from Books drop table Readers create table Readers (ReaderID char(10) primary key,--读者编号 主键约束 Rname char(20) not null,--读者姓名 非空约束 Rsex char(2) check(rsex = &#39;男&#39; or rsex = &#39;女&#39;),--读者性别 Department varchar(30),--读者所在部门 Phone char(20)--读者电话 ) select *from Readers drop table Lending create table Lending (ReaderID char(10) not null,--读者编号 读者信息表外键 BookID char(20) not null,--图书编号 图书信息表外键 Borrowdate date default getdate() not null,--借出日期 默认当前日期 Returndate date check(Returndate&gt;Borrowdate)--归还日期 晚于借出日期 ) select *from Lending /*给books表增加一个ISBN字段*/ alter table Books add ISBN char(10) select *from Books /*给ISBN字段修改数据类型*/ alter table Books alter column ISBN char(10) --update Books set ISBN =&#39;df_ISBN&#39; where ISBN = &#39;7111085949&#39;; /*给ISBN设置约束*/ alter table Books add constraint df_ISBN default &#39;7111085949&#39;for ISBN /*删除字段上的default约束*/ alter table Books drop constraint df_ISBN select *from Books /*删除表上增加的ISBN字段*/ alter table Books drop column ISBN --alter table Books add foreign key(ISBN) references Books (ISBN = &#39;df_ISBN&#39;default&#39;7111085949&#39;) /*使用insert语句向表中插入若干语句*/ insert into Books values(&#39;TP311." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/617f38039527d4aee6db1d4dd0469d89/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-24T23:04:26+08:00" />
<meta property="article:modified_time" content="2021-10-24T23:04:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">1024数据库图书管理系统创建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>创建三个表格，然后添加相关的约束，修改、删除、查询…</p> 
<pre><code class="prism language-sql"><span class="token keyword">drop</span> <span class="token keyword">table</span> Books
<span class="token keyword">create</span> <span class="token keyword">table</span> Books
<span class="token punctuation">(</span>BookID <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span><span class="token comment">--图书编号 主键约束</span>
Bname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">,</span><span class="token comment">--图书名 唯一约束</span>
Author <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--作者</span>
Press <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--出版社</span>
Price money<span class="token comment">--定价</span>
<span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Books
<span class="token keyword">drop</span> <span class="token keyword">table</span> Readers
<span class="token keyword">create</span> <span class="token keyword">table</span> Readers
<span class="token punctuation">(</span>ReaderID <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span><span class="token comment">--读者编号 主键约束</span>
Rname <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--读者姓名 非空约束</span>
Rsex <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">check</span><span class="token punctuation">(</span>rsex <span class="token operator">=</span> <span class="token string">'男'</span> <span class="token operator">or</span> rsex <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--读者性别</span>
Department <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">--读者所在部门</span>
Phone <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token comment">--读者电话</span>
<span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Readers
<span class="token keyword">drop</span> <span class="token keyword">table</span> Lending
<span class="token keyword">create</span> <span class="token keyword">table</span> Lending
<span class="token punctuation">(</span>ReaderID <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--读者编号 读者信息表外键</span>
BookID <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--图书编号 图书信息表外键</span>
Borrowdate <span class="token keyword">date</span> <span class="token keyword">default</span> getdate<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">--借出日期 默认当前日期</span>
Returndate <span class="token keyword">date</span> <span class="token keyword">check</span><span class="token punctuation">(</span>Returndate<span class="token operator">&gt;</span>Borrowdate<span class="token punctuation">)</span><span class="token comment">--归还日期 晚于借出日期</span>
<span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Lending
<span class="token comment">/*给books表增加一个ISBN字段*/</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> Books <span class="token keyword">add</span> ISBN <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Books
<span class="token comment">/*给ISBN字段修改数据类型*/</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> Books <span class="token keyword">alter</span> <span class="token keyword">column</span> ISBN <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">--update Books set ISBN ='df_ISBN' where ISBN = '7111085949';</span>
<span class="token comment">/*给ISBN设置约束*/</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> Books <span class="token keyword">add</span> <span class="token keyword">constraint</span> df_ISBN  <span class="token keyword">default</span> <span class="token string">'7111085949'</span><span class="token keyword">for</span> ISBN
<span class="token comment">/*删除字段上的default约束*/</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> Books <span class="token keyword">drop</span> <span class="token keyword">constraint</span> df_ISBN 
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Books
<span class="token comment">/*删除表上增加的ISBN字段*/</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> Books <span class="token keyword">drop</span> <span class="token keyword">column</span> ISBN 



<span class="token comment">--alter table Books add foreign key(ISBN) references Books (ISBN = 'df_ISBN'default'7111085949')</span>

<span class="token comment">/*使用insert语句向表中插入若干语句*/</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> Books <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'TP311.138DFG'</span><span class="token punctuation">,</span><span class="token string">'网络数据库实用教程'</span><span class="token punctuation">,</span><span class="token string">'石大鑫'</span><span class="token punctuation">,</span><span class="token string">'机械工业出版社'</span><span class="token punctuation">,</span><span class="token number">23</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> Books <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'TP311.SQ'</span><span class="token punctuation">,</span><span class="token string">'SQL Server2008实用教程'</span><span class="token punctuation">,</span><span class="token string">'董建斌'</span><span class="token punctuation">,</span><span class="token string">'机械工业出版社'</span><span class="token punctuation">,</span><span class="token number">25</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> Books <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'TP311.138QZA'</span><span class="token punctuation">,</span><span class="token string">'SQL Server实训'</span><span class="token punctuation">,</span><span class="token string">'郑启芬'</span><span class="token punctuation">,</span><span class="token string">'清华大学出版社'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> Books <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'TP311.138WJ'</span><span class="token punctuation">,</span><span class="token string">'数据库程序设计'</span><span class="token punctuation">,</span><span class="token string">'刘韵华'</span><span class="token punctuation">,</span><span class="token string">'电子工业出版社'</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> Books <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'TP311.138XZQ'</span><span class="token punctuation">,</span><span class="token string">'SQL Server2008数据库系统管理'</span><span class="token punctuation">,</span><span class="token string">'赵志清'</span><span class="token punctuation">,</span><span class="token string">'人民邮电出版社'</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> Books <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'TP393.41ZX'</span><span class="token punctuation">,</span><span class="token string">'ASP.NET案例开发'</span><span class="token punctuation">,</span><span class="token string">'陈正熙'</span><span class="token punctuation">,</span><span class="token string">'机械工业出版社'</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Books

<span class="token keyword">insert</span> <span class="token keyword">into</span> Readers <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'R20101001'</span><span class="token punctuation">,</span><span class="token string">'郭xx'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'计算机系'</span><span class="token punctuation">,</span><span class="token number">1008611</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'R20101002'</span><span class="token punctuation">,</span><span class="token string">'姚期智'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'计算机系'</span><span class="token punctuation">,</span><span class="token number">6688993</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'R20101003'</span><span class="token punctuation">,</span><span class="token string">'张大彪'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'计算机系'</span><span class="token punctuation">,</span><span class="token number">1234566</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'R20101004'</span><span class="token punctuation">,</span><span class="token string">'毕淑敏'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'信息系'</span><span class="token punctuation">,</span><span class="token number">9898765</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'R20101005'</span><span class="token punctuation">,</span><span class="token string">'董明珠'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">,</span><span class="token string">'信息系'</span><span class="token punctuation">,</span><span class="token number">4008365315</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'R20101006'</span><span class="token punctuation">,</span><span class="token string">'撒贝宁'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'信息系'</span><span class="token punctuation">,</span><span class="token number">3816666</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span><span class="token keyword">FROM</span> Readers
<span class="token keyword">delete</span> Readers

<span class="token keyword">insert</span> <span class="token keyword">into</span> Lending <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'R20101001'</span><span class="token punctuation">,</span><span class="token string">'TP311.138SQ'</span><span class="token punctuation">,</span><span class="token string">'2014-9-6'</span><span class="token punctuation">,</span><span class="token string">'2014-10-20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'R20101001'</span><span class="token punctuation">,</span><span class="token string">'TP311.138SQZA'</span><span class="token punctuation">,</span><span class="token string">'2014-9-15'</span><span class="token punctuation">,</span><span class="token string">'2014-11-9'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'R20101001'</span><span class="token punctuation">,</span><span class="token string">'TP393.41ZX'</span><span class="token punctuation">,</span><span class="token string">'2014-9-6'</span><span class="token punctuation">,</span><span class="token string">'2014-12-3'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'R20101002'</span><span class="token punctuation">,</span><span class="token string">'TP311.138WJ'</span><span class="token punctuation">,</span><span class="token string">'2014-7-5'</span><span class="token punctuation">,</span><span class="token string">'2014-9-20'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">'R20101005'</span><span class="token punctuation">,</span><span class="token string">'TP311.138SQ'</span><span class="token punctuation">,</span><span class="token string">'2014-7-8'</span><span class="token punctuation">,</span><span class="token string">'2014-9-8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token string">'R20101005'</span><span class="token punctuation">,</span><span class="token string">'TP311.138XZQ'</span><span class="token punctuation">,</span><span class="token string">'2015-3-18'</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">)</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Lending
<span class="token comment">/*查询Books表中书名的第三个字中包含“数”的书号和书名*/</span>
<span class="token comment">--select *from Books where and BookID？？？--两个下划线代表两个空格，所以查询的是第三个字</span>
<span class="token comment">/*查询Books表中书名的第三个字中包含“数”的书号和书名*/</span>
<span class="token keyword">select</span>  BookID<span class="token punctuation">,</span>Bname <span class="token keyword">from</span> Books <span class="token keyword">where</span> Bname <span class="token operator">like</span> <span class="token string">'%__数%'</span>
<span class="token comment">/*查询比“数据库程序设计”价格高的“书号”和“书名”*/</span>	
<span class="token keyword">select</span> BookID<span class="token punctuation">,</span>Bname <span class="token keyword">from</span> Books <span class="token keyword">where</span> price <span class="token operator">&gt;</span> <span class="token string">'38'</span>
<span class="token comment">/*查询有未还书记录的读者姓名  ？？？？？？？*/</span>
<span class="token keyword">select</span> ReaderID <span class="token keyword">from</span> Lending <span class="token keyword">where</span> Returndate <span class="token operator">=</span>  <span class="token string">'  '</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Books<span class="token punctuation">,</span>Readers<span class="token punctuation">,</span>Lending <span class="token keyword">where</span> Bname <span class="token operator">=</span> <span class="token string">'%数据库程序设计%'</span>


<span class="token keyword">select</span> <span class="token keyword">distinct</span> ReaderID<span class="token punctuation">,</span>Rname<span class="token punctuation">,</span>Rsex<span class="token punctuation">,</span>Department<span class="token punctuation">,</span>Phone
<span class="token keyword">from</span> Readers<span class="token punctuation">,</span>Lending
<span class="token keyword">where</span> ReaderID <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> BookID <span class="token keyword">from</span> Lending <span class="token keyword">where</span> BookID <span class="token operator">=</span>  <span class="token string">'TP311.138WJ'</span><span class="token punctuation">)</span>

<span class="token keyword">select</span> Rname 
<span class="token keyword">from</span> Readers<span class="token punctuation">,</span>Lending
<span class="token keyword">group</span> <span class="token keyword">by</span> Readers<span class="token punctuation">.</span>ReaderID
<span class="token keyword">having</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>Lending<span class="token punctuation">.</span>ReaderID<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token keyword">from</span> Readers

<span class="token keyword">select</span> Rname
<span class="token keyword">from</span> Readers
<span class="token keyword">where</span> ReaderID <span class="token operator">in</span><span class="token punctuation">(</span>
<span class="token keyword">select</span> ReaderID <span class="token keyword">from</span> Lending
<span class="token keyword">group</span> <span class="token keyword">by</span> Lending<span class="token punctuation">.</span>ReaderID
<span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span>Lending<span class="token punctuation">.</span>ReaderID<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span>
<span class="token punctuation">)</span>
</code></pre> 
<p>未完，待续…</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/895b31c90506ec39d26a39d31de1470e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">使用两层网络实现手写数字识别（《深度学习入门：基于Python的理论与实现》实践笔记）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e3637f842b20beeff9b09e2b41563c41/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python &#43; Steamlit 快速开发可视化 web 页面！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>