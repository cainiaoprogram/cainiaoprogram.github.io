<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DDR为什么需要DQS信号？ - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="DDR为什么需要DQS信号？" />
<meta property="og:description" content="1.原理 DDR(double data rate SDRAM)中的数据是双边沿传输，即在时钟的上升和下降沿都可以采样，它和单边沿传输的SDRAM(即SDR，single data rate SDRAM)的区别如下图，图中的data eye即数据的两次传输之间围成的区域，图(a)为SDR的传输示意图，因为只有一个时钟沿传输数据，所以称为single-edged clocking，图(b)为DDR的传输示意图，因为是两个时钟沿传输数据，所以称为dual-edged clocking。
在SDR中，data eye是由两个同向时钟沿围成的(在图中即为在时钟上升沿，发送端驱动数据)，中间还会有一个反向时钟沿，在该反向时钟沿的时刻(在图中即为下降沿)数据是稳定的，所以该反向时钟沿可以用来在接受端采样数据。简而言之就是每个data eye有两个可用时钟沿，左边的上升沿用于发送端驱动数据，中间的下降沿用于接收端采样数据，而右边的时钟沿就属于下一个data eye了。
而在DDR中，data eye是由紧邻的两个反相时钟沿围成，每个data eye可用的时钟沿个数减半(即只有一个)，这个时钟沿只能用于驱动或采样数据，而无法把两件任务都完成。因此必须引入另一种机制来弥补这一缺陷，这一机制就是DQS(data strobe signal)，它被称为同步时序参考信号( source-synchronous timing reference signal)。
2.DQS的通用方法 下图是读操作的时序图，DQS由DRAM产生并送给controller，DQS和DQ都和clock的边沿对齐(edge aligned)，controller将DQS delay 90°(需要额外的delay电路)，delay后的DQS边沿和DQ的中心对齐(centere-aligned)，可以用来采样稳定的数据。
下图是写操作的时序图，DQS由controller产生并送给DRAM，DQS和clock的边沿对齐(edge aligned)，而DQ和clock是中心对齐的(edge-aligned，也需要额外电路)，DRAM就可以直接用DQS的边沿采样数据。
可以看到，写操作和读操作中的DQS、DQ、clock的关系是不同的，且都需要controller提供额外的电路来保证它们的关系，原因DRAM通常是大规模生产，把额外电路的负担都放到controller一侧，可以降低DRAM的成本。
另外，在高速接口设计中（尤其是DDR这种并行高速接口），要尽量减少信号传输时间的uncertainty（通常由skew和jitter两部分组成），以保证所有数据都能被同时正确采样，这就需要精细的板上布线和复杂的训练(traning)。为了减小时序收敛难度，DDR不是同时将所有DQ线的时序同时进行约束，而是将它们每8个bit为1组，且每一组都有自己的DQS信号。
3.LPDDR5中的DQS LPDDR5中，仿照GDDR引入了高频的数据时钟WCK，和命令时钟CK分开，二者的频率比为1：2或1：4。WCK作为写操作的DQS，额外引入了一个新的端口RDQS作为读操作中的DQS。
RDQS在写操作中用来传输link ECC。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/cb74550c2a28668a77efb7872c80fbaa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-09T19:51:28+08:00" />
<meta property="article:modified_time" content="2023-05-09T19:51:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">DDR为什么需要DQS信号？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="1_0"></a>1.原理</h2> 
<p>DDR(double data rate SDRAM)中的数据是双边沿传输，即在时钟的上升和下降沿都可以采样，它和单边沿传输的SDRAM(即SDR，single data rate SDRAM)的区别如下图，图中的data eye即数据的两次传输之间围成的区域，图(a)为SDR的传输示意图，因为只有一个时钟沿传输数据，所以称为single-edged clocking，图(b)为DDR的传输示意图，因为是两个时钟沿传输数据，所以称为dual-edged clocking。<br> <img src="https://images2.imgbox.com/23/e0/2dKW69Tq_o.png" alt="在这里插入图片描述"></p> 
<p>在SDR中，data eye是由两个同向时钟沿围成的(在图中即为在时钟上升沿，发送端驱动数据)，中间还会有一个反向时钟沿，在该反向时钟沿的时刻(在图中即为下降沿)数据是稳定的，所以该反向时钟沿可以用来在接受端采样数据。简而言之就是每个data eye有两个可用时钟沿，左边的上升沿用于发送端驱动数据，中间的下降沿用于接收端采样数据，而右边的时钟沿就属于下一个data eye了。<br> 而在DDR中，data eye是由紧邻的两个反相时钟沿围成，每个data eye可用的时钟沿个数减半(即只有一个)，这个时钟沿只能用于驱动或采样数据，而无法把两件任务都完成。因此必须引入另一种机制来弥补这一缺陷，这一机制就是DQS(data strobe signal)，它被称为同步时序参考信号( source-synchronous timing reference signal)。</p> 
<h2><a id="2DQS_7"></a>2.DQS的通用方法</h2> 
<p>下图是读操作的时序图，DQS由DRAM产生并送给controller，DQS和DQ都和clock的边沿对齐(edge aligned)，controller将DQS delay 90°(需要额外的delay电路)，delay后的DQS边沿和DQ的中心对齐(centere-aligned)，可以用来采样稳定的数据。<br> <img src="https://images2.imgbox.com/dc/13/ZL7LUubd_o.png" alt="在这里插入图片描述"></p> 
<p>下图是写操作的时序图，DQS由controller产生并送给DRAM，DQS和clock的边沿对齐(edge aligned)，而DQ和clock是中心对齐的(edge-aligned，也需要额外电路)，DRAM就可以直接用DQS的边沿采样数据。<br> <img src="https://images2.imgbox.com/fb/7f/BLTa66id_o.png" alt="在这里插入图片描述"></p> 
<p>可以看到，写操作和读操作中的DQS、DQ、clock的关系是不同的，且都需要controller提供额外的电路来保证它们的关系，原因DRAM通常是大规模生产，把额外电路的负担都放到controller一侧，可以降低DRAM的成本。</p> 
<p>另外，在高速接口设计中（尤其是DDR这种并行高速接口），要尽量减少信号传输时间的uncertainty（通常由skew和jitter两部分组成），以保证所有数据都能被同时正确采样，这就需要精细的板上布线和复杂的训练(traning)。为了减小时序收敛难度，DDR不是同时将所有DQ线的时序同时进行约束，而是将它们每8个bit为1组，且每一组都有自己的DQS信号。</p> 
<h2><a id="3LPDDR5DQS_21"></a>3.LPDDR5中的DQS</h2> 
<p>LPDDR5中，仿照GDDR引入了高频的数据时钟WCK，和命令时钟CK分开，二者的频率比为1：2或1：4。WCK作为写操作的DQS，额外引入了一个新的端口RDQS作为读操作中的DQS。</p> 
<p>RDQS在写操作中用来传输link ECC。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a1f97f55650ffea173f9a112147ea089/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据挖掘算法基础（一）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/66b73dec519efc95c2dc4052eceeffde/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信小程序使用POST提交数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>