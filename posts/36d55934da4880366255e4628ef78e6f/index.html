<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C#文件操作集合四（文件复制和移动） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C#文件操作集合四（文件复制和移动）" />
<meta property="og:description" content="前言 文件操作是开发过程中经常遇到的，如何创建文件、处理文件、保存文件以及读取文件这些工作是每一位开发都必须经历的。
这里围绕C#文件操作内容，我做了一次系统的梳理，主要包括以下几个模块：
1、文件内容操作：文件读写相关
2、文件检测
3、文件及目录创建和删除
4、文件复制和移动
5、文件加密、解密
6、文件上传、下载
7、文件压缩相关
8、文件操作权限相关
一、小节摘要 本节整理了文件复制和移动相关内容，使用了File类和Directory类。
二、详细内容 1.移动文件(剪贴--粘贴) /// &lt;summary&gt; /// 移动文件(剪贴--粘贴) /// &lt;/summary&gt; /// &lt;param name=&#34;dir1&#34;&gt;要移动的文件的路径及全名(包括后缀)&lt;/param&gt; /// &lt;param name=&#34;dir2&#34;&gt;文件移动到新的位置,并指定新的文件名&lt;/param&gt; public static void MoveFile(string dir1, string dir2) { dir1 = dir1.Replace(&#34;/&#34;, &#34;\\&#34;); dir2 = dir2.Replace(&#34;/&#34;, &#34;\\&#34;); if (File.Exists(HttpContext.Current.Request.PhysicalApplicationPath &#43; &#34;\\&#34; &#43; dir1)) File.Move(HttpContext.Current.Request.PhysicalApplicationPath &#43; &#34;\\&#34; &#43; dir1, HttpContext.Current.Request.PhysicalApplicationPath &#43; &#34;\\&#34; &#43; dir2); } #endregion 2.复制文件 /// &lt;summary&gt; /// 复制文件 /// &lt;/summary&gt; /// &lt;param name=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/36d55934da4880366255e4628ef78e6f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-08T10:00:00+08:00" />
<meta property="article:modified_time" content="2023-01-08T10:00:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C#文件操作集合四（文件复制和移动）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言</h2> 
<p>        文件操作是开发过程中经常遇到的，如何创建文件、处理文件、保存文件以及读取文件这些工作是每一位开发都必须经历的。</p> 
<p>这里围绕C#文件操作内容，我做了一次系统的梳理，主要包括以下几个模块：</p> 
<p>1、文件内容操作：文件读写相关</p> 
<p>2、文件检测</p> 
<p>3、文件及目录创建和删除</p> 
<p>4、文件复制和移动</p> 
<p>5、文件加密、解密</p> 
<p>6、文件上传、下载</p> 
<p>7、文件压缩相关</p> 
<p>8、文件操作权限相关</p> 
<hr> 
<h2><strong>一、小节摘要</strong></h2> 
<p>本节整理了文件复制和移动相关内容，使用了File类和Directory类。</p> 
<h2><a id="_26"></a>二、详细内容</h2> 
<h3><a id="1_27"></a></h3> 
<h4>1.移动文件(剪贴--粘贴)</h4> 
<pre><code class="language-cs">/// &lt;summary&gt;
/// 移动文件(剪贴--粘贴)
/// &lt;/summary&gt;
/// &lt;param name="dir1"&gt;要移动的文件的路径及全名(包括后缀)&lt;/param&gt;
/// &lt;param name="dir2"&gt;文件移动到新的位置,并指定新的文件名&lt;/param&gt;
public static void MoveFile(string dir1, string dir2)
{
    dir1 = dir1.Replace("/", "\\");
    dir2 = dir2.Replace("/", "\\");
    if (File.Exists(HttpContext.Current.Request.PhysicalApplicationPath + "\\" + dir1))
        File.Move(HttpContext.Current.Request.PhysicalApplicationPath + "\\" + dir1, HttpContext.Current.Request.PhysicalApplicationPath + "\\" + dir2);
}
#endregion</code></pre> 
<h4>2.复制文件</h4> 
<pre><code class="language-cs">/// &lt;summary&gt;
/// 复制文件
/// &lt;/summary&gt;
/// &lt;param name="dir1"&gt;要复制的文件的路径已经全名(包括后缀)&lt;/param&gt;
/// &lt;param name="dir2"&gt;目标位置,并指定新的文件名&lt;/param&gt;
public static void CopyFile(string dir1, string dir2)
{
    dir1 = dir1.Replace("/", "\\");
    dir2 = dir2.Replace("/", "\\");
    if (File.Exists(HttpContext.Current.Request.PhysicalApplicationPath + "\\" + dir1))
    {
        File.Copy(HttpContext.Current.Request.PhysicalApplicationPath + "\\" + dir1, HttpContext.Current.Request.PhysicalApplicationPath + "\\" + dir2, true);
    }
}</code></pre> 
<h4>3.复制文件夹(递归)</h4> 
<pre><code class="language-cs">/// &lt;summary&gt;
/// 复制文件夹(递归)
/// &lt;/summary&gt;
/// &lt;param name="varFromDirectory"&gt;源文件夹路径&lt;/param&gt;
/// &lt;param name="varToDirectory"&gt;目标文件夹路径&lt;/param&gt;
public static void CopyFolder(string varFromDirectory, string varToDirectory)
{
    Directory.CreateDirectory(varToDirectory);

    if (!Directory.Exists(varFromDirectory)) return;

    string[] directories = Directory.GetDirectories(varFromDirectory);

    if (directories.Length &gt; 0)
    {
        foreach (string d in directories)
        {
            CopyFolder(d, varToDirectory + d.Substring(d.LastIndexOf("\\")));
        }
    }
    string[] files = Directory.GetFiles(varFromDirectory);
    if (files.Length &gt; 0)
    {
        foreach (string s in files)
        {
            File.Copy(s, varToDirectory + s.Substring(s.LastIndexOf("\\")), true);
        }
    }
}</code></pre> 
<h4>4.将文件移动到指定目录</h4> 
<pre><code class="language-cs">/// &lt;summary&gt;
/// 将文件移动到指定目录
/// &lt;/summary&gt;
/// &lt;param name="sourceFilePath"&gt;需要移动的源文件的绝对路径&lt;/param&gt;
/// &lt;param name="descDirectoryPath"&gt;移动到的目录的绝对路径&lt;/param&gt;
public static void Move(string sourceFilePath, string descDirectoryPath)
{
    //获取源文件的名称
    string sourceFileName = GetFileName(sourceFilePath);

    if (Directory.Exists(descDirectoryPath))
    {
        //如果目标中存在同名文件,则删除
        if (IsExistFile(descDirectoryPath + "\\" + sourceFileName))
        {
            DeleteFile(descDirectoryPath + "\\" + sourceFileName);
        }
        //将文件移动到指定目录
        File.Move(sourceFilePath, descDirectoryPath + "\\" + sourceFileName);
    }
}</code></pre> 
<h4>5.将指定文件夹下面的所有内容copy到目标文件夹下面</h4> 
<pre><code class="language-cs">/// &lt;summary&gt;
/// 8.6指定文件夹下面的所有内容copy到目标文件夹下面
/// &lt;/summary&gt;
/// &lt;param name="srcPath"&gt;原始路径&lt;/param&gt;
/// &lt;param name="aimPath"&gt;目标文件夹&lt;/param&gt;
public static void CopyDir(string srcPath, string aimPath)
{
    try
    {
        // 检查目标目录是否以目录分割字符结束如果不是则添加之
        if (aimPath[aimPath.Length - 1] != Path.DirectorySeparatorChar)
            aimPath += Path.DirectorySeparatorChar;
        // 判断目标目录是否存在如果不存在则新建之
        if (!Directory.Exists(aimPath))
            Directory.CreateDirectory(aimPath);
        // 得到源目录的文件列表，该里面是包含文件以及目录路径的一个数组
        //如果你指向copy目标文件下面的文件而不包含目录请使用下面的方法
        //string[] fileList = Directory.GetFiles(srcPath);
        string[] fileList = Directory.GetFileSystemEntries(srcPath);
        //遍历所有的文件和目录
        foreach (string file in fileList)
        {
            //先当作目录处理如果存在这个目录就递归Copy该目录下面的文件

            if (Directory.Exists(file))
                CopyDir(file, aimPath + Path.GetFileName(file));
            //否则直接Copy文件
            else
                File.Copy(file, aimPath + Path.GetFileName(file), true);
        }
    }
    catch (Exception ee)
    {
        throw new Exception(ee.ToString());
    }
}</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ae8c97dce239dbb53f998773997579d1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">sqli-labs 第七关 多命通关攻略</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/de5678f3860bf0b88f1b72368a051803/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Linux应用编程---8.共享内存</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>