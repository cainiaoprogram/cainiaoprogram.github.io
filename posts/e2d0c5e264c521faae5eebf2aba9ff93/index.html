<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>webpack-bundle-analyzer 插件配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="webpack-bundle-analyzer 插件配置" />
<meta property="og:description" content="目录
一、webpack-bundle-analyzer是什么？
二、安装
三、使用方法
1. 作为插件使用
2. 作为CLI的一个工具
一、webpack-bundle-analyzer 是什么？ webpack-bundle-analyzer 是 webpack 的插件，需要配合 webpack 和 webpack-cli 一起使用。这个插件可以读取输出文件夹（通常是 dist）中的 stats.json 文件，把该文件可视化展现，生成代码分析报告，可以直观地分析打包出的文件有哪些，及它们的大小、占比情况、各文件 Gzipped 后的大小、模块包含关系、依赖项等，对应做出优化，从而帮助提升代码质量和网站性能。
二、安装 # NPM npm install --save-dev webpack-bundle-analyzer # Yarn yarn add -D webpack-bundle-analyzer 三、使用方法 1. 作为插件使用 1. 配置 webpack.config.js 文件：
// webpack.config.js 文件 const BundleAnalyzerPlugin = require(&#39;webpack-bundle-analyzer&#39;).BundleAnalyzerPlugin module.exports={ plugins: [ new BundleAnalyzerPlugin() // 使用默认配置 // 默认配置的具体配置项 // new BundleAnalyzerPlugin({ // analyzerMode: &#39;server&#39;, // analyzerHost: &#39;127.0.0.1&#39;, // analyzerPort: &#39;8888&#39;, // reportFilename: &#39;report." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e2d0c5e264c521faae5eebf2aba9ff93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-19T09:45:01+08:00" />
<meta property="article:modified_time" content="2022-10-19T09:45:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">webpack-bundle-analyzer 插件配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81webpack-bundle-analyzer%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81webpack-bundle-analyzer%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F" rel="nofollow"><span style="color:#4da8ee;">一、webpack-bundle-analyzer是什么？</span></a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85" rel="nofollow"><span style="color:#4da8ee;">二、安装</span></a></p> 
<p id="%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4" rel="nofollow"><span style="color:#4da8ee;">三、使用方法</span></a></p> 
<p id="1.%E5%BC%95%E5%85%A5%E5%BA%93-toc" style="margin-left:40px;"><a href="#1.%E5%BC%95%E5%85%A5%E5%BA%93" rel="nofollow"><span style="color:#4da8ee;">1. 作为插件使用</span></a></p> 
<p id="2.%20%E4%BD%9C%E4%B8%BACLI%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B7%A5%E5%85%B7-toc" style="margin-left:40px;"><a href="#2.%20%E4%BD%9C%E4%B8%BACLI%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B7%A5%E5%85%B7" rel="nofollow"><span style="color:#4da8ee;">2. 作为CLI的一个工具</span></a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81webpack-bundle-analyzer%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><a id="_10"></a>一、webpack-bundle-analyzer 是什么？</h2> 
<p>webpack-bundle-analyzer 是 webpack 的插件，需要配合 webpack 和 webpack-cli 一起使用。这个插件可以读取输出文件夹（通常是 dist）中的 stats.json 文件，把该文件可视化展现，生成代码分析报告，可以直观地分析打包出的文件有哪些，及它们的大小、占比情况、各文件 Gzipped 后的大小、模块包含关系、依赖项等，对应做出优化，从而帮助提升代码质量和网站性能。</p> 
<p></p> 
<hr> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AE%89%E8%A3%85"><a id="pandas_19"></a>二、安装</h2> 
<pre><code class="language-javascript"># NPM 
npm install --save-dev webpack-bundle-analyzer
# Yarn 
yarn add -D webpack-bundle-analyzer</code></pre> 
<hr> 
<h2 id="%E4%BA%8C%E3%80%81%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><a id="_26"></a>三、使用方法</h2> 
<h3 id="1.%E5%BC%95%E5%85%A5%E5%BA%93"><a id="1_27"></a>1. 作为插件使用</h3> 
<p>1. 配置 webpack.config.js 文件：</p> 
<pre><code class="language-javascript">// webpack.config.js 文件

const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin
module.exports={
  plugins: [
    new BundleAnalyzerPlugin()  // 使用默认配置
    // 默认配置的具体配置项
    // new BundleAnalyzerPlugin({
    //   analyzerMode: 'server',
    //   analyzerHost: '127.0.0.1',
    //   analyzerPort: '8888',
    //   reportFilename: 'report.html',
    //   defaultSizes: 'parsed',
    //   openAnalyzer: true,
    //   generateStatsFile: false,
    //   statsFilename: 'stats.json',
    //   statsOptions: null,
    //   excludeAssets: null,
    //   logLevel: info
    // })
  ]
}</code></pre> 
<p>2. 配置 package.json 文件</p> 
<pre><code>{
 "scripts": {
    "dev": "webpack --config webpack.dev.js --progress"
  }
}</code></pre> 
<p>3. 在命令行工具中输入</p> 
<pre><code>npm run dev</code></pre> 
<p>按回车。此时会打开浏览器，你将看到项目资源包的交互式可视化树形分析图。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/72/45/wmNan4pG_o.gif"></p> 
<p>图中占面积越大的文件，其文件的大小越大，部署到服务器之后，在浏览器中加载的时间越长，点击左上角的像箭头一样的符号可以直接查看各个文件的大小。</p> 
<p>该分析图可以帮助我们：</p> 
<ul><li>了解 bundle 包中的真正内容</li><li>找出哪些模块尺寸最大</li><li>查找误引入的模块</li><li>优化项目</li></ul> 
<p>最棒的是它支持缩小的 bundle 文件，它解析它们以获得 bundle 文件模块的实际大小，还显示了它们的压缩大小。</p> 
<p>得到可视化的分析结果之后，接下来就对占比比较大或者依赖程度比较高的文件进行优化了。</p> 
<p>4. 参数配置</p> 
<blockquote> 
 <pre>new BundleAnalyzerPlugin(options?: object)
</pre> 
</blockquote> 
<table align="center" border="1" cellpadding="1" cellspacing="1" style="width:670px;"><thead><tr><th style="width:127px;">名称</th><th style="width:201px;">类型</th><th style="width:339px;">描述</th></tr></thead><tbody><tr><td style="width:127px;">analyzerMode</td><td style="width:201px;"><span style="color:#0d0016;">server / static / json / disabled</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：server。 在server<font face="monospace"> </font>模式下，分析器将启动 HTTP 服务器以显示 bundle 报告。 在 static<font face="monospace"> </font>模式下，将生成带有 bundle 报告的单个 HTML 文件。 在 json 模式下，将生成带有捆绑报告的单个 JSON 文件。 在 disable 模式下，您可以使用此插件通过将 generateStatsFile 设置为 true 来生成 Webpack Stats JSON 文件。</span></td></tr><tr><td style="width:127px;">analyzerHost</td><td style="width:201px;"><span style="color:#0d0016;">{ String }</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：127.0.0.1。 在 server 模式下用于启动 HTTP 服务器的主机。</span></td></tr><tr><td style="width:127px;">analyzerPort</td><td style="width:201px;"><span style="color:#0d0016;">{ Number }或者 auto</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：8888。在 server 模式下用于启动 HTTP 服务器的端口</span></td></tr><tr><td style="width:127px;">reportFilename</td><td style="width:201px;"><span style="color:#0d0016;">{String}</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：report.html。 在 static 模式下生成的捆绑报告文件的路径。 它可以是绝对路径，也可以是相对于 bundle 文件输出目录的路径（在 webpack 配置中是 output.path）。</span></td></tr><tr><td style="width:127px;">reportTitle</td><td style="width:201px;"><span style="color:#0d0016;">{ String | function }</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：返回打印当前日期和时间的函数。 HTML  的 title 元素的内容； 或获取该内容的 () =&gt; string  形式的函数。</span></td></tr><tr><td style="width:127px;">defaultSizes</td><td style="width:201px;"><span style="color:#0d0016;">stat / parsed / gzip</span></td><td style="width:339px;"> <p>默认值：parsed。 默认情况下在报告中显示的模块大小。</p> <p>stat：这是文件的“输入”大小，在进行任何转换（如缩小）之前。之所以称为“stat size”，是因为它是从 Webpack 的 stats 对象中获取的。</p> <p>parsed：这是文件的“输出”大小。 如果你使用的是 Uglify 之类的 Webpack 插件，那么这个值将反映代码的缩小后的大小。</p> <p>gzip：这是通过 gzip 压缩运行解析的包/模块的大小。</p> </td></tr><tr><td style="width:127px;">openAnalyzer</td><td style="width:201px;"><span style="color:#0d0016;">{ Boolean }</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：true。 在默认浏览器中自动打开报告。</span></td></tr><tr><td style="width:127px;">genarateStatsFile</td><td style="width:201px;"><span style="color:#0d0016;">{ Boolean }</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：false。 如果为 true，将在 bundle 输出目录中生成 webpack stats JSON 文件</span></td></tr><tr><td style="width:127px;">statsFilename</td><td style="width:201px;"><span style="color:#0d0016;">{ String }</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：stats.json。 如果 generateStatsFile 为 true，表示将生成的 webpack stats JSON 文件的名称。 它可以是绝对路径，也可以是相对于bundle文件输出目录的路径（在 webpack 配置中是 output.path）。</span></td></tr><tr><td style="width:127px;">statsOptions</td><td style="width:201px;"><span style="color:#0d0016;">null 或 { Object }</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：null。 stats.toJson() 方法的选项。 例如，您可以使用 source: false 选项从统计文件中排除模块的源代码。 </span></td></tr><tr><td style="width:127px;">excludeAssets</td><td style="width:201px;"> <p> { null | pattern | pattern[] } </p> <p>其中 pattern 可以是</p> <p>{ String | RegExp | function }</p> </td><td style="width:339px;"><span style="color:#0d0016;">默认值：null。 用于匹配将从报告中排除的资源名称的模式。 如果 pattern 是一个字符串，它将通过 new RegExp(str) 转换为 RegExp。 如果 pattern 是一个函数，它应该具有以下签名 (assetName: string) =&gt; boolean 并且应该返回 true 以排除匹配的资源。 如果提供了多个模式，资源应至少匹配其中一个以被排除。</span></td></tr><tr><td style="width:127px;">logLevel</td><td style="width:201px;"><span style="color:#0d0016;">info / warn / error / silent</span></td><td style="width:339px;"><span style="color:#0d0016;">默认值：info。 用于控制插件输出多少细节。</span></td></tr></tbody></table> 
<p><strong>优点：</strong>简单<br><strong>缺点：</strong>每次运行打包命令时，都在本地起一个端口号为8888的本地服务器，并自动在浏览器中展示项目的分析结果。不够灵活，并不是每次构建都想看代码分析！</p> 
<p></p> 
<h3 id="2.%20%E4%BD%9C%E4%B8%BACLI%E7%9A%84%E4%B8%80%E4%B8%AA%E5%B7%A5%E5%85%B7">2. 作为CLI的一个工具</h3> 
<p>如果你有一个 webpack stats JSON 文件，你可以分析一个现有的包。</p> 
<p>1、配置 webpack.config.js 文件：</p> 
<p>可以使用 BundleAnalyzerPlugin 将 generateStatsFile 选项设置为 true</p> 
<pre><code class="language-javascript">// webpack.config.js 文件

const BundleAnalyzerPlugin = require('webpack-bundle-analyzer').BundleAnalyzerPlugin
module.exports={
  plugins: [
    new BundleAnalyzerPlugin({
      analyzerMode: 'disabled', // 不启动展示打包报告的http服务器
      generateStatsFile: true, // 是否生成stats.json文件
    }),
  ]
}</code></pre> 
<p>2、配置 package.json 文件</p> 
<pre><code class="language-javascript">{
 "scripts": {
    "generateAnalyzFile": "webpack --profile --json &gt; stats.json", // 生成分析文件
    "analyz": "webpack-bundle-analyzer --port 8888 ./dist/stats.json" // 启动展示打包报告的http服务器
  }
}</code></pre> 
<p> 3、在命令行工具中，先运行 npm run generateAnalyzFile 命令，然后运行 npm run analyz 命令。此时就可以看到分析结果了。</p> 
<p><strong>优点：</strong>稍微复杂，但是灵活<br><strong>缺点：</strong>每次运行命令时，都会在 dist 目录下生成一个 stats.json 文件。这个问题，可以将 generateStatsFile 属性设置为 false，但是这样就无法生成 stats.json 文件了。解决办法：需要查看分析报告的时候设置为 true，其余时候设置为 false。</p> 
<p></p> 
<p>参考目录：</p> 
<blockquote> 
 <p><span style="color:#0d0016;"><a href="https://www.npmjs.com/package/webpack-bundle-analyzer" rel="nofollow" title="webpack-bundle-analyzer - npm (npmjs.com)">webpack-bundle-analyzer - npm (npmjs.com)</a></span></p> 
 <p><a href="https://www.jianshu.com/p/58ed86f70aa7" rel="nofollow" title="webpack-bundle-analyzer插件快速入门 - 简书 (jianshu.com)">webpack-bundle-analyzer插件快速入门 - 简书 (jianshu.com)</a></p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0acc64ca655b28aa623aeda79f870f7a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">深度学习部署神器——triton inference server入门教程指北</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b82e4d096afab768560268001aa96281/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Nginx实例：限制目录和URL以及IP访问控制</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>