<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>408——操作系统 第四章 文件管理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="408——操作系统 第四章 文件管理" />
<meta property="og:description" content="文件管理 1. 文件系统基础1.1 文件概念1.2 文件的逻辑结构1.2.1 顺序文件1.2.2 索引文件1.2.3 索引顺序文件 1.3 目录结构1.4 文件共享1.5 文件保护练习 2. 文件系统实现2.1 文件系统层次结构2.2 目录实现2.3 文件实现练习 3. 磁盘组织与管理3.1 磁盘的结构3.2 磁盘调度算法3.3 磁盘的管理练习 1. 文件系统基础 1.1 文件概念 文件系统的管理功能是将其管理的程序和数据通过组织为一系列文件的方式实现的。文件则是指具有文名的若干相关元素的集合。元素通常是记录，记录又是一组有意义的数据项的集合。基于文件系统的概念，可以把数据组成分为数据项、记录和文件三级。
操作系统应该向上提供哪些功能？
1.2 文件的逻辑结构 按文件是否有结构分类，可以分为无结构文件、有结构文件两种。
无结构文件： 文件内部的数据就是一系列二进制流或字符流组成。又称“流式文件”。如：Windows操作系统中的.txt文件。
有结构文件： 由一组相似的记录组成，又称“记录式文件”。每条记录又若干个数据项组成。如：数据库表文件。一般来说，每条记录有一个数据项可作为关键字（作为识别不同记录的ID）。根据各条记录的长度（占用的存储空间）是否相等，又可分为定长记录和可变长记录两种。
1.2.1 顺序文件 顺序文件： 文件中的记录一个接一个地顺序排列（逻辑上），记录可以是定长的或可变长的。各个记录在物理上可以顺序存储或链式存储。
1.2.2 索引文件 1.2.3 索引顺序文件 若一个顺序文件有10000个记录，则根据关键字检索文件，只能从头开始顺序查找（这里指的并不是定长记录、顺序结构的顺序文件），平均须查找5000个记录。
若采用索引顺序文件结构，可把10000个记录分为√10000 = 100 组，每组100个记录。则需要先顺序查找索引表找到分组（共100个分组，因此索引表长度为100，平均需要查50次），找到分组后，再在分组中顺序查找记录（每个分组100个记录，因此平均需要查50次）。可见，采用索引顺序文件结构后，平均查找次数减少为50&#43;50 = 100次。
同理，若文件共有106个记录，则可分为1000个分组，每个分组1000个记录。根据关键字检索一个记录平均需要查找500&#43;500 = 1000次。这个查找次数依然很多，如何解决呢？
1.3 目录结构 1.4 文件共享 1.5 文件保护 1）口令保护
为文件设置一个“口令”（如：abc112233），用户请求访问该文件时必须提供“口令”。
优点：保存口令的空间开销不多，验证口令的时间开销也很小。
缺点：正确的“口令”存放在系统内部，不够安全。
2）加密保护
使用某个“密码”对文件进行加密，在访问文件时需要提供正确的“密码”才能对文件进行正确的解密。
优点：保密性强，不需要在系统中存储“密码”
缺点：编码/译码，或者说加密/解密要花费一定时间。
3）访问控制
在每个文件的FCB（或索引结点）中增加一个访问控制列表（Access-Control List, ACL），该表中记录了各个用户可以对该文件执行哪些操作。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bf2eafb6795890e6df0ba65847766c46/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-09-15T21:26:58+08:00" />
<meta property="article:modified_time" content="2021-09-15T21:26:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">408——操作系统 第四章 文件管理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文件管理</h4> 
 <ul><li><a href="#1__4" rel="nofollow">1. 文件系统基础</a></li><li><ul><li><a href="#11__5" rel="nofollow">1.1 文件概念</a></li><li><a href="#12__13" rel="nofollow">1.2 文件的逻辑结构</a></li><li><ul><li><a href="#121__17" rel="nofollow">1.2.1 顺序文件</a></li><li><a href="#122__20" rel="nofollow">1.2.2 索引文件</a></li><li><a href="#123__22" rel="nofollow">1.2.3 索引顺序文件</a></li></ul> 
   </li><li><a href="#13__29" rel="nofollow">1.3 目录结构</a></li><li><a href="#14__31" rel="nofollow">1.4 文件共享</a></li><li><a href="#15__33" rel="nofollow">1.5 文件保护</a></li><li><a href="#_52" rel="nofollow">练习</a></li></ul> 
  </li><li><a href="#2__84" rel="nofollow">2. 文件系统实现</a></li><li><ul><li><a href="#21__85" rel="nofollow">2.1 文件系统层次结构</a></li><li><a href="#22__96" rel="nofollow">2.2 目录实现</a></li><li><a href="#23__99" rel="nofollow">2.3 文件实现</a></li><li><a href="#_144" rel="nofollow">练习</a></li></ul> 
  </li><li><a href="#3__154" rel="nofollow">3. 磁盘组织与管理</a></li><li><ul><li><a href="#31__155" rel="nofollow">3.1 磁盘的结构</a></li><li><a href="#32__170" rel="nofollow">3.2 磁盘调度算法</a></li><li><a href="#33__220" rel="nofollow">3.3 磁盘的管理</a></li><li><a href="#_236" rel="nofollow">练习</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<p><img src="https://images2.imgbox.com/cd/81/js1PMyDD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f1/c5/5BfTSPdH_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="1__4"></a>1. 文件系统基础</h2> 
<h3><a id="11__5"></a>1.1 文件概念</h3> 
<p>文件系统的管理功能是将其管理的程序和数据通过组织为一系列文件的方式实现的。文件则是指具有文名的若干相关元素的集合。元素通常是记录，记录又是一组有意义的数据项的集合。基于文件系统的概念，可以把数据组成分为数据项、记录和文件三级。<br> <img src="https://images2.imgbox.com/59/61/agL0fn4f_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cc/f5/xqQtGfLs_o.png" alt="在这里插入图片描述"><br> <strong>操作系统应该向上提供哪些功能？</strong><br> <img src="https://images2.imgbox.com/c6/9e/fY6AeiTC_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b9/24/XMbG93Hb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="12__13"></a>1.2 文件的逻辑结构</h3> 
<p>按文件是否有结构分类，可以分为<strong>无结构文件</strong>、<strong>有结构文件</strong>两种。<br> <strong>无结构文件：</strong> 文件内部的数据就是一系列二进制流或字符流组成。又称“流式文件”。如：Windows操作系统中的.txt文件。<br> <strong>有结构文件：</strong> 由一组相似的记录组成，又称“记录式文件”。每条记录又若干个数据项组成。如：数据库表文件。一般来说，每条记录有一个数据项可作为关键字（作为识别不同记录的ID）。根据各条记录的长度（占用的存储空间）是否相等，又可分为定长记录和可变长记录两种。</p> 
<h4><a id="121__17"></a>1.2.1 顺序文件</h4> 
<p><strong>顺序文件：</strong> 文件中的记录一个接一个地顺序排列（逻辑上），记录可以是定长的或可变长的。各个记录在物理上可以顺序存储或链式存储。<br> <img src="https://images2.imgbox.com/59/1e/P9LasA7a_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="122__20"></a>1.2.2 索引文件</h4> 
<p><img src="https://images2.imgbox.com/12/ef/ahPExavE_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="123__22"></a>1.2.3 索引顺序文件</h4> 
<p><img src="https://images2.imgbox.com/f4/ae/l7sz39SL_o.png" alt="在这里插入图片描述"><br> 若一个顺序文件有10000个记录，则根据关键字检索文件，只能从头开始顺序查找（这里指的并不是定长记录、顺序结构的顺序文件），平均须查找5000个记录。<br> 若采用索引顺序文件结构，可把10000个记录分为√10000 = 100 组，每组100个记录。则需要先顺序查找索引表找到分组（共100个分组，因此索引表长度为100，平均需要查50次），找到分组后，再在分组中顺序查找记录（每个分组100个记录，因此平均需要查50次）。可见，采用索引顺序文件结构后，平均查找次数减少为50+50 = 100次。<br> 同理，若文件共有106个记录，则可分为1000个分组，每个分组1000个记录。根据关键字检索一个记录平均需要查找500+500 = 1000次。这个查找次数依然很多，如何解决呢？<br> <img src="https://images2.imgbox.com/c2/a0/OakTEaCH_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/dd/77/B0yl37wP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="13__29"></a>1.3 目录结构</h3> 
<p><img src="https://images2.imgbox.com/d7/8c/F1VP2ZWA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="14__31"></a>1.4 文件共享</h3> 
<p><img src="https://images2.imgbox.com/bd/5f/29jKWAZR_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="15__33"></a>1.5 文件保护</h3> 
<p><strong>1）口令保护</strong></p> 
<p>为文件设置一个“口令”（如：abc112233），用户请求访问该文件时必须提供“口令”。</p> 
<p>优点：保存口令的空间开销不多，验证口令的时间开销也很小。<br> 缺点：正确的“口令”存放在系统内部，不够安全。</p> 
<p><strong>2）加密保护</strong><br> 使用某个“密码”对文件进行加密，在访问文件时需要提供正确的“密码”才能对文件进行正确的解密。</p> 
<p>优点：保密性强，不需要在系统中存储“密码”<br> 缺点：编码/译码，或者说加密/解密要花费一定时间。</p> 
<p>3）访问控制<br> 在每个文件的FCB（或索引结点）中增加一个访问控制列表（Access-Control List, ACL），该表中记录了各个用户可以对该文件执行哪些操作。</p> 
<p><img src="https://images2.imgbox.com/3b/7a/XXJLHMm0_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d6/50/zCZfuclc_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_52"></a>练习</h3> 
<p><img src="https://images2.imgbox.com/03/3b/2eyqNLJw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/86/af/bYN1vuJx_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/1d/37/g4dL99wA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5b/f7/iiWERZHO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/66/d5/Fuop38yW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/6b/fa/PojICBP4_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/2a/0b/0TfBZR38_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0a/a3/biCaL9Yc_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3e/5e/KkCbDbyO_o.png" alt="在这里插入图片描述"><br> D<br> <img src="https://images2.imgbox.com/56/71/TkLn05W2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9a/3c/8w9AM0El_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ba/b5/7US4ifW9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c3/7f/PKlL2iBw_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a7/fb/AoWMe4fo_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f5/06/cHFgN0nr_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3b/f1/BOcA3sOR_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8b/c1/aaZRClLh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c9/d9/YRV1OuSd_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/9b/cd/0p6kSldU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/fc/d8/tCYAFYIk_o.png" alt="在这里插入图片描述"><br> B<br> <img src="https://images2.imgbox.com/04/44/sVsa1Idp_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/46/80/aVpQCJx2_o.png" alt="在这里插入图片描述"><br> D<br> <img src="https://images2.imgbox.com/a0/64/uqDcu3p2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f0/c5/denUL1Ti_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bc/13/PZBEGpMN_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/50/ba/mIYvjNwO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/78/16/H08U9DAv_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ad/c6/4imJWvMM_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="2__84"></a>2. 文件系统实现</h2> 
<h3><a id="21__85"></a>2.1 文件系统层次结构</h3> 
<p><img src="https://images2.imgbox.com/b1/7d/Ci6dbc5y_o.png" alt="在这里插入图片描述"><br> 用一个例子来辅助记忆文件系统的层次结构：<br> 假设某用户请求删除文件“D:/工作目录/学生信息.xlsx”的最后100条记录。</p> 
<ol><li>用户需要通过操作系统提供的接口发出上述请求——<strong>用户接口</strong></li><li>由于用户提供的是文件的存放路径，因此需要操作系统一层一层地查找目录，找到对应的目录项——<strong>文件目录系统</strong></li><li>不同的用户对文件有不同的操作权限，因此为了保证安全，需要检查用户是否有访问权限——<strong>存取控制模块（存取控制验证层）</strong></li><li>验证了用户的访问权限之后，需要把用户提供的“记录号”转变为对应的逻辑地址——<strong>逻辑文件系统与文件信息缓冲区</strong></li><li>知道了目标记录对应的逻辑地址后，还需要转换成实际的物理地址——<strong>物理文件系统</strong></li><li>要删除这条记录，必定要对磁盘设备发出请求——<strong>设备管理程序模块</strong></li><li>删除这些记录后，会有一些盘块空闲，因此要将这些空闲盘块回收——<strong>辅助分配模块</strong></li></ol> 
<h3><a id="22__96"></a>2.2 目录实现</h3> 
<p><strong>在读文件前，必须先打开文件。打开文件时，操作系统利用路径名找到相应目录项，目录项中提供了查找文件磁盘块所需的信息。目录实现的基本方法有线性表列表和哈希表两种，目录的实现为了查找，线性列表实现对应线性查找，哈希表的实现对应散列查找。</strong></p> 
<h3><a id="23__99"></a>2.3 文件实现</h3> 
<p><img src="https://images2.imgbox.com/23/53/pXmTCFGH_o.png" alt="在这里插入图片描述"><br> <strong>1）连续分配</strong></p> 
<p><em>连续分配方式要求每个文件在磁盘上占有一组连续的块。</em></p> 
<blockquote> 
 <p>读取某个磁盘块时，需要移动磁头。访问的两个磁盘块相隔越远，移动磁头所需时间就越长。<br> 结论：<strong>连续分配的文件在顺序读/写时速度最快</strong><br> 若此时文件A要拓展，需要再增加一个磁盘块（总共需要连续的4个磁盘块）。<br> 由于采用连续结构，因此文件A占用的磁盘块必须是连续的。因此只能将文件A全部“迁移”到绿色区域。<br> 结论：<strong>物理上采用连续分配的文件不方便拓展。</strong><br> <strong>物理上采用连续分配，存储空间利用率低，会产生难以利用的磁盘碎片可以用紧凑来处理碎片，但是需要耗费很大的时间代价。</strong></p> 
</blockquote> 
<p><strong>2）链接分配</strong></p> 
<p><em>链接分配采取离散分配的方式，可以为文件分配离散的磁盘块。分为隐式链接和显式链接两种。</em></p> 
<p><strong>隐式链接</strong>——除文件的最后一个盘块之外，每个盘块中都存有指向下一个盘块的指针。文件目录包括文件第一块的指针和最后一块的指针。<br> 优点：很方便文件拓展，不会有碎片问题，外存利用率高。<br> 缺点：只支持顺序访问，不支持随机访问，查找效率低，指向下一个盘块的指针也需要耗费少量的存储空间。</p> 
<p><strong>显式链接</strong>——把用于链接文件各物理块的指针显式地存放在一张表中，即文件分配表（FAT，FileAllocation Table）。一个磁盘只会建立一张文件分配表。开机时文件分配表放入内存，并常驻内存。<br> 优点：很方便文件拓展，不会有碎片问题，外存利用率高，并且支持随机访问。相比于隐式链接来说，地址转换时不需要访问磁盘，因此文件的访问效率更高。<br> 缺点：文件分配表的需要占用一定的存储空间。</p> 
<p><strong>3）索引分配</strong><br> 索引分配允许文件离散地分配在各个磁盘块中，系统会为每个文件建立一张索引表，索引表中记录了文件的各个逻辑块对应的物理块（索引表的功能类似于内存管理中的页表——建立逻辑页面到物理页之间的映射关系）。索引表存放的磁盘块称为索引块。文件数据存放的磁盘块称为数据块。</p> 
<p>可见，索引分配方式可以支持随机访问。文件拓展也很容易实现（只需要给文件分配一个空闲块，并增加一个索引表项即可）但是索引表需要占用一定的存储空间。</p> 
<blockquote> 
 <p>若文件太大，索引表项太多，可以采取以下三种方法解决：<br> ①<strong>链接方案：</strong> 如果索引表太大，一个索引块装不下，那么可以将多个索引块链接起来存放。缺点：若文件很大，索引表很长，就需要将很多个索引块链接起来。想要找到i号索引块，必须先依次读入0~i-1号索引块，这就导致磁盘I/O次数过多，查找效率低下。<br> ②<strong>多层索引：</strong> 建立多层索引（原理类似于多级页表）。使第一层索引块指向第二层的索引块。还可根据文件大小的要求再建立第三层、第四层索引块。采用K层索引结构，且顶级索引表未调入内存，则访问一个数据块只需要K + 1次读磁盘操作。缺点：即使是小文件，访问一个数据块依然需要K+1次读磁盘。<br> ③<strong>混合索引：</strong> 多种索引分配方式的结合。例如，一个文件的顶级索引表中，既包含直接地址索引（直接指向数据块），又包含一级间接索引（指向单层索引表）、还包含两级间接索引（指向两层索引表）。<br> 优点：对于小文件来说，访问一个数据块所需的读磁盘次数更少。</p> 
</blockquote> 
<p><strong>超级超级超级重要考点：</strong> ①要会根据多层索引、混合索引的结构计算出文件的最大长度（Key：各级索<br> 引表最大不能超过一个块）；②要能自己分析访问某个数据块所需要的读磁盘次数（Key：FCB中会存有<br> 指向顶级索引块的指针，因此可以根据FCB读入顶级索引块。每次读入下一级的索引块都需要一次读磁<br> 盘操作。另外，要注意题目条件——顶级索引块是否已调入内存）</p> 
<p><img src="https://images2.imgbox.com/d2/8a/wFZzwmvL_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d6/ee/Kq9AJsqM_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/48/12/HQ9J7ofj_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_144"></a>练习</h3> 
<p><img src="https://images2.imgbox.com/3a/0a/JqxLFxFS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/91/8c/RReu1607_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/78/d6/q13Gf4sD_o.png" alt="在这里插入图片描述"><br> A<br> <img src="https://images2.imgbox.com/92/6f/kkEd5cBh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/35/63/GOsHgvYD_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0b/97/lDAVuDEB_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/33/37/PFKyGbu4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__154"></a>3. 磁盘组织与管理</h2> 
<h3><a id="31__155"></a>3.1 磁盘的结构</h3> 
<p><strong>磁盘</strong>的表面由一些磁性物质组成，可以用这些磁性物质来记录二进制数据。<br> 磁盘的盘面被划分成一个个磁道， 这样的一个“圈”就是一个<strong>磁道</strong>。<br> 一个磁道又被划分成一个个<strong>扇区</strong>，每个扇区就是一个“磁盘块”。各个扇区存放的数据量相同（如1KB）。</p> 
<p><strong>如何在磁盘中读/写数据？</strong><br> 需要把“磁头”移动到想要读/写的扇区所在的磁道。磁盘会转起来，让目标扇区从磁头下面划过，才能完成对扇区的读/写操作。</p> 
<p><img src="https://images2.imgbox.com/97/a4/rGOHDY2A_o.png" alt="在这里插入图片描述"><br> <strong>磁盘的分类</strong><br> 磁头可以移动的称为<strong>活动头磁盘</strong>。磁臂可以来回伸缩来带动磁头定位磁道。<br> 磁头不可移动的称为<strong>固定头磁盘</strong>。这种磁盘中每个磁道有一个磁头。</p> 
<p>盘片可以更换的称为<strong>可换盘磁盘</strong><br> 盘片不可更换的称为<strong>固定盘磁盘</strong></p> 
<h3><a id="32__170"></a>3.2 磁盘调度算法</h3> 
<p><strong>一次磁盘读/写操作需要的时间</strong><br> <strong>寻找时间（寻道时间）T<sub>S</sub></strong>：在读/写数据前，将磁头移动到指定磁道所花的时间。<br> ①<strong>启动磁头臂</strong>是需要时间的。假设耗时为s；<br> ②<strong>移动磁头</strong>也是需要时间的。假设磁头匀速移动，每跨越一个磁道耗时为m，总共需要跨越n条磁道。则：<br> 寻道时间T<sub>S</sub> = s + m*n</p> 
<p><strong>延迟时间T<sub>R</sub></strong>：通过旋转磁盘，使磁头定位到目标扇区所需要的时间。设磁盘转速为r（单位：转/秒，或转/分），则<br> 平均所需的延迟时间T<sub>R</sub> = (1/2)*(1/r) = 1/2r<br> <strong>传输时间T<sub>t</sub></strong>：从磁盘读出或向磁盘写入数据所经历的时间，假设磁盘转速为r，此次读/写的字节数为b，每个磁道上的字节数为N。则：<br> 传输时间T<sub>t</sub> = (1/r) * (b/N) = b/(rN)<br> 总的平均存取时间T<sub>a</sub> = T<sub>S</sub> + 1/2r + b/(rN)</p> 
<p><strong>1）先来先服务算法（FCFS）</strong><br> 根据进程请求访问磁盘的先后顺序进行调度。</p> 
<p>优点：公平；如果请求访问的磁道比较集中的话，算法性能还算过的去。<br> 缺点：如果有大量进程竞争使用磁盘，请求访问的磁道很分散，则FCFS在性能上很差，寻道时间长。</p> 
<p><strong>2）最短寻找时间优先（SSTF）</strong><br> SSTF算法会优先处理的磁道是与当前磁头最近的磁道。可以保证每次的寻道时间最短，但是并不能保证总的寻道时间最短。（其实就是贪心算法的思想，只是选择眼前最优，但是总体未必最优）</p> 
<p>优点：性能较好，平均寻道时间短<br> 缺点：可能产生“饥饿”现象</p> 
<p><strong>3）扫描算法（SCAN）</strong><br> SSTF算法会产生饥饿的原因在于：磁头有可能在一个小区域内来回来去地移动。为了防止这个问题，可以规定，只有磁头移动到最外侧磁道的时候才能往内移动，移动到最内侧磁道的时候才能往外移动。这就是扫描算法（SCAN）的思想。由于磁头移动的方式很像电梯，因此也叫电梯算法。</p> 
<p>优点：性能较好，平均寻道时间较短，不会产生饥饿现象<br> 缺点：①只有到达最边上的磁道时才能改变磁头移动方向，事实上，处理了184号磁道的访问请求之后就不需要再往右移动磁头了。②SCAN算法对于各个位置磁道的响应频率不平均（如：假设此时磁头正在往右移动，且刚处理过90号磁道，那么下次处理90号磁道的请求就需要等磁头移动很长一段距离；而响应了184号磁道的请求之后，很快又可以再次响应184号磁道的请求了）</p> 
<p><strong>4）LOOK调度算法</strong><br> 扫描算法（SCAN）中，只有到达最边上的磁道时才能改变磁头移动方向，事实上，处理了184号磁道的访问请求之后就不需要再往右移动磁头了。LOOK调度算法就是为了解决这个问题，如果在磁头移动方向上已经没有别的请求，就可以立即改变磁头移动方向。（边移动边观察，因此叫LOOK）</p> 
<p>优点：比起SCAN算法来，不需要每次都移动到最外侧或最内侧才改变磁头方向，使寻道时间进一步缩短。</p> 
<p><strong>5）循环扫描算法（C-SCAN）</strong><br> SCAN算法对于各个位置磁道的响应频率不平均，而C-SCAN算法就是为了解决这个问题。规定只有磁头朝某个特定方向移动时才处理磁道访问请求，而返回时直接快速移动至起始端而不处理任何请求。</p> 
<p>优点：比起SCAN来，对于各个位置磁道的响应频率很平均。<br> 缺点：只有到达最边上的磁道时才能改变磁头移动方向，事实上，处理了184号磁道的访问请求之后就不需要再往右移动磁头了；并且，磁头返回时其实只需要返回到18号磁道即可，不需要返回到最边缘的磁道。另外，比起SCAN算法来，平均寻道时间更长。</p> 
<p><strong>6）C-LOOK调度算法</strong><br> C-SCAN算法的主要缺点是只有到达最边上的磁道时才能改变磁头移动方向，并且磁头返回时不一定需要返回到最边缘的磁道上。C-LOOK算法就是为了解决这个问题。如果磁头移动的方向上已经没有磁道访问请求了，就可以立即让磁头返回，并且磁头只需要返回到有磁道访问请求的位置即可。</p> 
<p>优点：比起C-SCAN算法来，不需要每次都移动到最外侧或最内侧才改变磁头方向，使寻道时间进一步缩短。</p> 
<p><img src="https://images2.imgbox.com/d4/30/WuxSgjrh_o.png" alt="在这里插入图片描述"><br> <strong>减少延迟时间的方法？</strong><br> <img src="https://images2.imgbox.com/54/63/wNKE4418_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33__220"></a>3.3 磁盘的管理</h3> 
<p><strong>1）磁盘初始化</strong></p> 
<p>Step 1：进行低级格式化（物理格式化），将磁盘的各个磁道划分为扇区。一个扇区通常可分为头、数据区域（如512B大小）、尾三个部分组成。管理扇区所需要的各种数据结构一般存放在头、尾两个部分，包括扇区校验码（如奇偶校验、CRC循环冗余校验码等，校验码用于校验扇区中的数据是否发生错误）<br> Step 2：将磁盘分区，每个分区由若干柱面组成（即分为我们熟悉的C盘、D盘、E盘）<br> Step 3：进行逻辑格式化，创建文件系统。包括创建文件系统的根目录、初始化存储空间管理所用的数据结构（如位示图、空闲分区表）</p> 
<p><img src="https://images2.imgbox.com/5d/e5/rCiiO9XW_o.png" alt="在这里插入图片描述"><br> <strong>3）坏块的管理</strong></p> 
<p>对于简单的磁盘，可以在逻辑格式化时（建立文件系统时）对整个磁盘进行坏块检查，标明哪些扇区是坏扇区，比如：在FAT表上标明。（在这种方式中，坏块对操作系统不透明）<br> 对于复杂的磁盘，磁盘控制器（磁盘设备内部的一个硬件部件）会维护一个坏块链表。<br> 在磁盘出厂前进行低级格式化（物理格式化）时就将坏块链进行初始化。<br> 会保留一些“备用扇区”，用于替换坏块。这种方案称为扇区备用。且这种处理方式中，坏块对操作系统透明。</p> 
<p><img src="https://images2.imgbox.com/41/4e/WVnZCxHE_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_236"></a>练习</h3> 
<p><img src="https://images2.imgbox.com/4b/84/mesN4C4H_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3b/a4/ogvsRJjy_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ca/e0/RoP5UDOO_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ef/5e/7qBZ9sR6_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5b/0e/m4ZBx8VE_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/db/59/78L4UdJe_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9055f36f58cf52e96b79ab8182251bc8/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">windows10下编译生成hadoop-eclipse-plugin-3.3.1插件（失败）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/73fadd9474605551dbf1e05b10a1ccdf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">nodemon 的使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>