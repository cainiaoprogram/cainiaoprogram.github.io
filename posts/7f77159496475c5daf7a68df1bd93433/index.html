<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python3 接口测试 requests 基础知识 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python3 接口测试 requests 基础知识" />
<meta property="og:description" content="目录
目录
前言
一、介绍GET请求
二、介绍POST请求
1. post格式
2. 传入data
三、get、post通用方法
headers
timeout
代理（proxies参数）
verify
files:字典
四、获取响应参数的值
1.查看响应内容
2.查看完整url地址
3.查看响应头部字符编码
4.查看响应码status_code
5.获取响应的headers
6.获取响应的cookies
五、会话保持Sission
六、requests控制访问参数
前言 接口测试，本篇文章主要介绍通过python语言中的requests模块来进行接口请求；requests模块是常用的接口自动化框架，学习相对容易；单纯的接口测试，也可以postman、jmeter等测试工具；
一、介绍GET请求 HTTP默认的请求方法就是GET
1.没有请求体
2.数据必须在1K之内
3.GET请求数据会暴露在浏览器的地址栏中
具体参数是：
格式：r=requests.get(url,params,**kwargs)
url: 需要爬取的网站地址。params: 翻译过来就是参数， url中的额外参数，字典或者字节流格式，可选。**kwargs : 12个控制访问的参数(与post通用)
params：字典或字节序列， 作为参数增加到url中,使用这个参数可以把一些键值对以 【?key1=value1&amp;key2=value2】的模式增加到 url 中，例如：kv = {&#39;key1&#39;:&#39; values&#39;, &#39;key2&#39;: &#39;values&#39;} 例
import requests url=&#39;http://mobile.atguat.com.cn/xx/xxx/xxx.jsp&#39; params={&#34;sn&#34;:&#34;=19c77bf96505f7de4d2a3fe4d22a320608e0b614&#34;} r = requests.get(url,params) print(r.url) print(r.text) &#34;&#34;&#34; 请求地址包含入参 print(r.url)实例： http://mobile.atguat.com.cn/xx/xxx/xxx.jsp?sn=%3D19c77bf96505f7de4d2a3fe4d22a320608e0b614 返回参数 print(r.text)实例： {&#34;status&#34;:&#34;200&#34;,&#34;isSuccess&#34;:&#34;N&#34;,&#34;isSessionExpired&#34;:&#34;N&#34;,&#34;isActivated&#34;:&#34;Y&#34;,&#34;serverTime&#34;:&#34;2022-03-21 16:43:48&#34;,&#34;pendingShipmentOrderNum&#34;:0,&#34;waitPayOrderNum&#34;:0,&#34;waitConfirmOrderNum&#34;:0,&#34;waitEvaluateGoodsNum&#34;:0, &#34;waitReadMessageNum&#34;:0,&#34;expiringCouponNum&#34;:0,&#34;couponNum&#34;:0,&#34;isNeedCaptcha&#34;:&#34;N&#34;,&#34;traceID&#34;:&#34;EA93B8FA7DE64CF5852B4D49E31796E4&#34;} &#34;&#34;&#34; 二、介绍POST请求 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7f77159496475c5daf7a68df1bd93433/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T17:21:07+08:00" />
<meta property="article:modified_time" content="2023-04-24T17:21:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python3 接口测试 requests 基础知识</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E5%89%8D%E8%A8%80-toc" style="margin-left:0px;"><a href="#%E5%89%8D%E8%A8%80" rel="nofollow">前言</a></p> 
<p id="python+requests基础知识-2-一、介绍GET请求-toc" style="margin-left:0px;"><a href="#python+requests%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-2-%E4%B8%80%E3%80%81%E4%BB%8B%E7%BB%8DGET%E8%AF%B7%E6%B1%82" rel="nofollow">一、介绍GET请求</a></p> 
<p id="python+requests基础知识-2-二、介绍POST请求-toc" style="margin-left:0px;"><a href="#python+requests%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-2-%E4%BA%8C%E3%80%81%E4%BB%8B%E7%BB%8DPOST%E8%AF%B7%E6%B1%82" rel="nofollow"> 二、介绍POST请求</a></p> 
<p id="python+requests基础知识-2-1、post格式-toc" style="margin-left:40px;"><a href="#python+requests%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-2-1%E3%80%81post%E6%A0%BC%E5%BC%8F" rel="nofollow">1. post格式</a></p> 
<p id="python+requests基础知识-2-2、传入data-toc" style="margin-left:40px;"><a href="#python+requests%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-2-2%E3%80%81%E4%BC%A0%E5%85%A5data" rel="nofollow">2. 传入data</a></p> 
<p id="python+requests基础知识-2-三、get、post通用方法-toc" style="margin-left:0px;"><a href="#python+requests%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86-2-%E4%B8%89%E3%80%81get%E3%80%81post%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95" rel="nofollow">三、get、post通用方法</a></p> 
<p id="headers%EF%BC%9A-toc" style="margin-left:40px;"><a href="#headers%EF%BC%9A" rel="nofollow">headers</a></p> 
<p id="timeout%EF%BC%9A-toc" style="margin-left:40px;"><a href="#timeout%EF%BC%9A" rel="nofollow">timeout</a></p> 
<p id="%E4%BB%A3%E7%90%86%EF%BC%88proxies%E5%8F%82%E6%95%B0%EF%BC%89-toc" style="margin-left:40px;"><a href="#%E4%BB%A3%E7%90%86%EF%BC%88proxies%E5%8F%82%E6%95%B0%EF%BC%89" rel="nofollow">代理（proxies参数）</a></p> 
<p id="verify%EF%BC%9A-toc" style="margin-left:40px;"><a href="#verify%EF%BC%9A" rel="nofollow">verify</a></p> 
<p id="files%3A%E5%AD%97%E5%85%B8%EF%BC%8C-toc" style="margin-left:40px;"><a href="#files%3A%E5%AD%97%E5%85%B8%EF%BC%8C" rel="nofollow">files:字典</a></p> 
<p id="%E5%9B%9B%E3%80%81%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E5%8F%82%E6%95%B0%E7%9A%84%E5%80%BC-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E5%8F%82%E6%95%B0%E7%9A%84%E5%80%BC" rel="nofollow">四、获取响应参数的值</a></p> 
<p id="%C2%A01.%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E5%86%85%E5%AE%B9-toc" style="margin-left:40px;"><a href="#%C2%A01.%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E5%86%85%E5%AE%B9" rel="nofollow"> 1.查看响应内容</a></p> 
<p id="%C2%A02.%E6%9F%A5%E7%9C%8B%E5%AE%8C%E6%95%B4url%E5%9C%B0%E5%9D%80-toc" style="margin-left:40px;"><a href="#%C2%A02.%E6%9F%A5%E7%9C%8B%E5%AE%8C%E6%95%B4url%E5%9C%B0%E5%9D%80" rel="nofollow"> 2.查看完整url地址</a></p> 
<p id="%C2%A03.%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81-toc" style="margin-left:40px;"><a href="#%C2%A03.%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81" rel="nofollow"> 3.查看响应头部字符编码</a></p> 
<p id="%C2%A0%20%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E7%A0%81status_code-toc" style="margin-left:40px;"><a href="#%C2%A0%20%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E7%A0%81status_code" rel="nofollow"> 4.查看响应码status_code</a></p> 
<p id="-toc" style="margin-left:40px;"></p> 
<p id="%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%9A%84headers-toc" style="margin-left:40px;"><a href="#%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%9A%84headers" rel="nofollow">5.获取响应的headers</a></p> 
<p id="%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%9A%84cookies-toc" style="margin-left:40px;"><a href="#%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%9A%84cookies" rel="nofollow">6.获取响应的cookies</a></p> 
<p id="%E4%BA%94%E3%80%81%E4%BC%9A%E8%AF%9D%E4%BF%9D%E6%8C%81Sission-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E4%BC%9A%E8%AF%9D%E4%BF%9D%E6%8C%81Sission" rel="nofollow">五、会话保持Sission</a></p> 
<p id="%E5%85%AD%E3%80%81requests%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%E5%8F%82%E6%95%B0-toc" style="margin-left:0px;"><a href="#%E5%85%AD%E3%80%81requests%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%E5%8F%82%E6%95%B0" rel="nofollow">六、requests控制访问参数</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<hr> 
<h2 id="%E5%89%8D%E8%A8%80">前言</h2> 
<p>接口测试，本篇文章主要介绍通过python语言中的requests模块来进行接口请求；requests模块是常用的接口自动化框架，学习相对容易；单纯的接口测试，也可以postman、jmeter等测试工具；</p> 
<p></p> 
<p></p> 
<h2 id="python+requests基础知识-2-一、介绍GET请求"><strong>一、介绍GET请求</strong></h2> 
<p></p> 
<p>HTTP默认的请求方法就是GET</p> 
<p>1.没有请求体</p> 
<p>2.数据必须在1K之内</p> 
<p>3.GET请求数据会暴露在浏览器的地址栏中</p> 
<p>具体参数是：</p> 
<p><strong><code>格式：r=requests.get(url,params,**kwargs)</code></strong></p> 
<ul><li>url: 需要爬取的网站地址。</li><li>params: 翻译过来就是参数， url中的额外参数，字典或者字节流格式，可选。</li><li>**kwargs : 12个控制访问的参数(与post通用)<br>  </li></ul> 
<p></p> 
<ul><li><strong>params</strong>：字典或字节序列， 作为参数增加到url中,使用这个参数可以把一些键值对以 【<span style="color:#4da8ee;">?key1=value1&amp;key2=value2</span>】的模式增加到 url 中，例如：kv = {'key1':' values', 'key2': 'values'} </li><li> <p>例</p>    <pre><code class="language-python">import requests

url='http://mobile.atguat.com.cn/xx/xxx/xxx.jsp'

params={"sn":"=19c77bf96505f7de4d2a3fe4d22a320608e0b614"}

r = requests.get(url,params)
print(r.url)
print(r.text)


"""

请求地址包含入参 print(r.url)实例：

http://mobile.atguat.com.cn/xx/xxx/xxx.jsp?sn=%3D19c77bf96505f7de4d2a3fe4d22a320608e0b614


返回参数 print(r.text)实例：

{"status":"200","isSuccess":"N","isSessionExpired":"N","isActivated":"Y","serverTime":"2022-03-21 16:43:48","pendingShipmentOrderNum":0,"waitPayOrderNum":0,"waitConfirmOrderNum":0,"waitEvaluateGoodsNum":0,

"waitReadMessageNum":0,"expiringCouponNum":0,"couponNum":0,"isNeedCaptcha":"N","traceID":"EA93B8FA7DE64CF5852B4D49E31796E4"}

"""
</code></pre> <p></p> </li></ul> 
<h2 id="python+requests基础知识-2-二、介绍POST请求"> 二、介绍POST请求</h2> 
<p>1.数据不会出现在地址栏中</p> 
<p>2.数据的大小没有上限</p> 
<p>3.有请求体{请求的字典}</p> 
<p>4.请求体中如果存在中文，会使用URL编码！</p> 
<h3 id="python+requests基础知识-2-1、post格式">1. post格式</h3> 
<ul><li>url: 需要爬取的网站地址。</li><li>data: 翻译过来就是参数， url中的额外参数，字典或者字节流格式，可选。</li><li>**kwargs : 12个控制访问的参数</li></ul> 
<pre><code class="language-python">​
import requests

response = requests.post( url = 'http://mobile.xxxuat.com.cn/mobile/p/xxSearch.jsp' ,data = {"body": "{\"keyWord\": \"iphone\"}" )

print(response.text) # 打印接口反，字符串格式  

​</code></pre> 
<p></p> 
<h3 id="python+requests基础知识-2-2、传入data">2. 传入data</h3> 
<p>对于 POST 请求来说，我们一般需要为它增加一些参数。那么最基本的传参方法可以利用 <code>data</code> {请求的字典}这个参数。</p> 
<pre><code class="language-python">import requests

url='http://mobile.atguat.com.cn/mobile/p/wapSearch.jsp' #入参地址

headers={"Content-Type":"application/x-www-form-urlencoded;charset=utf-8","Cookie":"gcid=11010000;gdid=11010200;addr_lat=39.96482"} #请求头信息

data ={'body':'{"keyWord": "iphone"}'} #标准入参参数

response = requests.post( url= url ,data =data ,headers=headers,timeout=0.1) #post请求

print(response.text) #打印接口返回</code></pre> 
<p></p> 
<pre></pre> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="python+requests基础知识-2-三、get、post通用方法">三、get、post通用方法</h2> 
<ul><li> <h3 id="headers%EF%BC%9A"><strong>headers</strong></h3> </li></ul> 
<p>字典是<strong>headers</strong>的相关语，对应了向某个url访问时所发起的http的头i字段， 可以用这个字段来定义http的访问的http头，可以用来模拟任何我们想模拟的浏览器来对url发起访问。同时存放：Content-Type，Cookie，User-Agent等；</p> 
<ul><li> <pre><code class="language-python">import requests


url='http://mobile.xxuat.com.cn/mobile/p/xxxSearch.jsp' #接口地址


#接口请求头，python中通常是字典的模式；
headers={"Content-Type":"application/x-www-form-urlencoded;charset=utf-8", "Cookie":"gcid=11010000;gdid=11010200;addr_lat=39.96482"}

data = {'body':'{"keyWord": "iphone"}'}#接口入参

response = requests.post(url = url,data = data,headers = headers)# post请求


print(response.text) #打印接口返回信息


"""接口返回,print(response.text)：

{"traceID":"C713A65B72D743DA84CF86F4EED6618F","filterCatList":[],"goodsList":[],"isActivated":"Y","pageBar":{"pageNumber":1,"totalPage":0,"pageSize":15,"totalCount":0},"filterConList":[],"isSuccess":"Y"}

"""</code></pre> <p></p> </li><li> <h3 id="timeout%EF%BC%9A">timeout</h3> </li></ul> 
<p>     形式：数字 单位是s（秒）用于设置超时时间，防止爬取时间过长，无效爬取</p> 
<pre><code class="language-python">​
import requests


url='http://mobile.xxuat.com.cn/mobile/p/xxxSearch.jsp' #接口地址



response = requests.post(url = url,data = data,timeout=0.1 )# post请求,timeout = 0.1设置超时时间


print(response.text) #打印接口返回信息


"""接口返回,print(response.text)：

{"traceID":"C713A65B72D743DA84CF86F4EED6618F","filterCatList":[],"goodsList":[],"isActivated":"Y","pageBar":{"pageNumber":1,"totalPage":0,"pageSize":15,"totalCount":0},"filterConList":[],"isSuccess":"Y"}

"""

​</code></pre> 
<ul><li> <h3 id="%E4%BB%A3%E7%90%86%EF%BC%88proxies%E5%8F%82%E6%95%B0%EF%BC%89">代理（proxies参数）</h3> <p>如果需要使用代理，你可以通过为任意请求方法提供 <code>proxies</code> 参数来配置单个请求get,post代理设置方法一样：</p> <pre><code class="language-python">proxies = {
"http": "http://10.2.190.40:8888",
"https": "http://10.2.190.40:8888",
} #设置代理 

response = requests.get("http://www.baidu.com", proxies = proxies)  #接口请求代理模式


print(response.text)</code></pre> <pre></pre> </li><li> <h3 id="verify%EF%BC%9A"><strong>verify</strong></h3> </li></ul> 
<p>开关， 用于认证SSL证书， 默认为True，如果接口返回SSLError错误，需要请求时，verify=false；</p> 
<pre><code class="language-python">##接口设置了代理直接访问github网站是不通的，增加verify=False参数

 
import requests
proxies = {
"http": "http://10.2.190.40:8888",
"https": "http://10.2.190.40:8888",
}
url='https://github.com'
r=requests.get(url=url,proxies=proxies,verify=False) ##接口设置了代理直接访问github网站是不通的，增加verify=False参数

print(r.text)</code></pre> 
<ul><li> <h3 id="files%3A%E5%AD%97%E5%85%B8%EF%BC%8C">files:字典</h3> </li></ul> 
<p>是用来向服务器传输文件时使用的字段</p> 
<pre><code class="language-python">​
import requests

url='http://mobile.atguat.com.cn/mobile/p/wapSearch.jsp' #接口地址


data ={'body':'{"keyWord": "iphone"}'} #入参


fs = {'files': open('data.txt', 'rb')}  #参数中上传的文件

response = requests.post( url= url ,data =data ,flies=fs) #接口请求中，files参数是上传文件用

print(response.text)

​</code></pre> 
<h2 id="%E5%9B%9B%E3%80%81%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E5%8F%82%E6%95%B0%E7%9A%84%E5%80%BC">四、获取响应参数的值<br>  </h2> 
<h3 id="%C2%A01.%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E5%86%85%E5%AE%B9"> 1.查看响应内容</h3> 
<pre><code class="language-python">
import requests
url='http://mobile.atguat.com.cn/mobile/p/wapSearch.jsp'

kw = {'wd':'长城'}

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36"}

 response=requests.post(url=url,data=kw,headers=headers)

# 查看响应内容，response.text 返回的是Unicode格式的数据
print (response.text)

# 查看响应内容，response.content返回的字节流数据
print (response.json())

# 查看响应内容，response.content返回的字节流数据</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/d6/ef/yyJyNnUh_o.png"></p> 
<h3 id="%C2%A02.%E6%9F%A5%E7%9C%8B%E5%AE%8C%E6%95%B4url%E5%9C%B0%E5%9D%80"> 2.查看完整url地址</h3> 
<pre><code class="language-python">
import requests
url='http://mobile.xxuat.com.cn/mobile/p/xxSearch.jsp'

kw = {'wd':'长城'}

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36"} #请求头部

response=requests.post(url=url,data=kw,headers=headers) #接口返回信息


# 查看完整url地址
print (response.url)

"""
接口返回print (response.url)：url='http://mobile.xxuat.com.cn/mobile/p/xxSearch.jsp'

"""

</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/38/26/8KFRr6I9_o.png"></p> 
<p style="text-align:center;"></p> 
<p style="text-align:center;"></p> 
<h3 id="%C2%A03.%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E5%A4%B4%E9%83%A8%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81"> 3.查看响应头部字符编码</h3> 
<pre><code class="language-python">
import requests
url='http://mobile.xxuat.com.cn/mobile/p/xxSearch.jsp'

kw = {'wd':'长城'}

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36"} #请求头部

response=requests.post(url=url,data=kw,headers=headers) #接口返回信息


# 查看响应头部字符编码
print (response.encoding)</code></pre> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/10/64/DRAML0ZV_o.png"></p> 
<h3 id="%C2%A0%20%E6%9F%A5%E7%9C%8B%E5%93%8D%E5%BA%94%E7%A0%81status_code"> <br> 4.查看响应码status_code</h3> 
<pre><code class="language-python">
import requests
url='http://mobile.xxuat.com.cn/mobile/p/xxSearch.jsp'

kw = {'wd':'长城'}

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36"} #请求头部

response=requests.post(url=url,data=kw,headers=headers) #接口返回信息


# 查看响应码
print (response.status_code)</code></pre> 
<h3></h3> 
<h3 id="%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%9A%84headers">5.获取响应的headers</h3> 
<pre><code class="language-python">
import requests
url='http://mobile.xxuat.com.cn/mobile/p/xxSearch.jsp'

kw = {'wd':'长城'}

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36"} #请求头部

response=requests.post(url=url,data=kw,headers=headers) #接口返回信息

#获取响应的headers
print (response.headers)</code></pre> 
<h3 id="%E8%8E%B7%E5%8F%96%E5%93%8D%E5%BA%94%E7%9A%84cookies">6.获取响应的cookies</h3> 
<pre><code class="language-python">
import requests
url='http://mobile.xxuat.com.cn/mobile/p/xxSearch.jsp'

kw = {'wd':'长城'}

headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36"} #请求头部

response=requests.post(url=url,data=kw,headers=headers) #接口返回信息

#获取响应的cookies
print (response.cookies)</code></pre> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="%E4%BA%94%E3%80%81%E4%BC%9A%E8%AF%9D%E4%BF%9D%E6%8C%81Sission">五、会话保持Sission</h2> 
<p>在 requests 里，session对象是一个非常常用的对象，这个对象代表一次用户会话：从客户端浏览器连接服务器开始，到客户端浏览器与服务器断开。</p> 
<pre><code class="language-python">import requests
#1. 创建session对象，可以保存Cookie值
ssion = requests.session()

# 2. 处理 headers
headers={"Accept-Encoding":"gzip,deflate","X-Gomeplus-App":"002/A00001","Content-Type":"application/x-www-form-urlencoded;charset=utf-8","Referer":"http://office.gome.inc/","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36"}

url='http://office.gome.inc/newWeb/auth/xxsLogin.do'
# 3. 需要登录的用户名和密码
data={"userName": "d2FuZ2ppd2VpMQ==","passWord":"V2p3MTIzNDU2IQ==","domainCode":"GOMEDQ","rememberMe":"false"}

# 4. 发送附带用户名和密码的请求，并获取登录后的Cookie值，保存在ssion里
re=ssion.post(url=url,data=data)
ssion.post(url=url,data=data)
re=re.json()

#解析值更新header
authToken=jsonpath.jsonpath(re,"$.data.authToken")
print(authToken)
ssion.headers.update({"Authorization":authToken[0]})

# 5. ssion包含用户登录后的Cookie值，可以直接访问那些登录后才可以访问的页面
re1=ssion.post(url='http://office.xxx.inc/newWeb/myBill/list.do',data={"type":"0"})</code></pre> 
<pre></pre> 
<h2 id="%E5%85%AD%E3%80%81requests%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%E5%8F%82%E6%95%B0">六、requests控制访问参数</h2> 
<p>1.params：形式：字典或字节序列，做为参数增加到url中</p> 
<p>2.data:形式：字典或字节序列 或文件对象，做为Requests的内容，可反馈给服务器</p> 
<p>3.json：形式：JSON格式的数据 做为Requests的内容，可反馈给服务器</p> 
<p>(ps:科普<a href="https://baike.baidu.com/item/JSON" rel="nofollow" title="JSON">JSON</a>(<a href="https://baike.baidu.com/item/JavaScript" rel="nofollow" title="JavaScript">JavaScript</a> Object Notation, JS 对象简谱) 是一种轻量级的数据交换格式。</p> 
<p>4.headers:形式：字典 HTTP定制头  </p> 
<p>5.cookies：形式：字典或cookie Jar（从HTTP协议中解析得来）是Requests中的cookie</p> 
<p>（ps：管理HTTP cookie值、存储HTTP请求生成的cookie、向传出的HTTP请求添加cookie的对象。整个cookie都存储在内存中，</p> 
<p>对CookieJar实例进行垃圾回收后cookie也将丢失。）</p> 
<p>6.auth：形式：元组 支持HTTP的认证功能</p> 
<p>7.files:   形式：字典类型用于向服务器传输文件</p> 
<p>8.timeout：形式：数字 单位是s（秒）用于设置超时时间，防止爬取时间过长，无效爬取</p> 
<p>9.prixies：形式：字典类型 设定访问代理服务器，可以增加登录认证。（防止爬虫逆追踪）</p> 
<p>10.allow_redirects:形式：布尔类型（True or False）默认为True 重定向开关</p> 
<p>11.stream：布尔类型（True or False）默认为Ture 获取内容立即下载 开关</p> 
<p>12.verify：布尔类型（True or False）默认为Ture  认证SSL证书开关</p> 
<p>13.cert：　保存本地证书路径</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1c06da02e5aac223df0b70ada3136328/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">antDesign vue layout布局</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c91308b2f58fb6655264330c015f5f86/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">STM32（2）-串口通讯实际应用：串口屏</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>