<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DMA (wiki) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="DMA (wiki)" />
<meta property="og:description" content="&lt;!-- @page { margin: 0.79in } P { margin-bottom: 0.08in } --&gt; DMA
DMA是现代计算机和微处理器的一个特性，DMA允许一些计算机内的硬件系统可以不依赖与中央处理器而直接读写系统内存。比如磁盘驱动控制器，图形卡，网卡以及声卡都会使用DMA。在多处理器的SOC系统中，DMA也用于片内（intra-chip）数据传输，特别是，当处理一些包含有内存的的模块（经常称为scratchpad memory）时，DMA用于从这些模块内的内存和主内存的数据传输。
用DMA通道的计算机与没有DMA通道的计算机在设备和系统内传输数据，会有较小的cpu负荷，因为不依赖与CPU，所以数据传输不占用CPU时间，数据传输就和CPU其他的工作并发进行。
没有DMA，使用可编程的输入输入（programmed input/output)模型来和外设设备交互，或者来加载保存多核指令，CPU通常完成会被读写操作占用，而不能去做其他工作。
使用DMA，CPU可以发起数据传输，在数据传输过程中可以做其他事情，然后在传输完成后，收到DMA控制器的一个中断。这在实时系统中很有效。此外在流处理中也很有效，因为流处理一般要数据和控制并发，采用DMA就可以达到很高的吞吐率。
Principle
DMA是现代计算机的一个本质特性，允许数据不依赖与CPU而进行传输。如果没有DMA，那么CPU就需要亲自来拷贝数据，而不能同时进行其他工作。这种情况很糟糕，因为通过一个外围总线访问I/O设备比普通的的系统RAM要慢很多。
DMA从一个设备拷贝到另一个设备。当DMA命令让CPU发起一个DMA传输，CPU不会花功夫执行,DMA会处理数据传输。对于称为第三方的DMA，比如使用ISA bus的，DMA控制器通常是主板的一个芯片。更现代的一些总线设计，比如PCI，通常是总线驱动DMA，这时候是设备取得bus的控制，然后实施DMA。在嵌入式处理器或者多核的SOC中，片上总线会链接有一个DMA engine，这个DMA engine会管理DMA数据传输。
DMA的典型应用是系统RAM和设备之间的数据传输。在多核的嵌入式系统中，通常有一个或者多个DMA engine。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a11157d78d48e5bb0391fd397fae1206/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2011-05-21T13:17:00+08:00" />
<meta property="article:modified_time" content="2011-05-21T13:17:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">DMA (wiki)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> &lt;!-- @page { margin: 0.79in } P { margin-bottom: 0.08in } --&gt; </p> 
<p>DMA</p> 
<p> </p> 
<p><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">是现代计算机和微处理器的一个特性，</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">允许一些计算机内的硬件系统可以不依赖与中央处理器而直接读写系统内存。比如磁盘驱动控制器，图形卡，网卡以及声卡都会使用</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">。在多处理器的</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">SOC</span></span><span style="font-family: 'DejaVu Sans';">系统中，</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">也用于片内（</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">intra-chip</span></span><span style="font-family: 'DejaVu Sans';">）数据传输，特别是，当处理一些包含有内存的的模块（经常称为</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">scratchpad memory</span></span><span style="font-family: 'DejaVu Sans';">）时，</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">用于从这些模块内的内存和主内存的数据传输。</span></span></p> 
<p><span style="font-family: 'DejaVu Sans';"><span style="color: #000000;">用</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">通道的计算机与没有</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">通道的计算机在设备和系统内传输数据，会有较小的</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">cpu</span></span><span style="font-family: 'DejaVu Sans';">负荷，因为不依赖与</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">，所以数据传输不占用</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">时间，数据传输就和</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">其他的工作并发进行。</span></span></p> 
<p><br></p> 
<p><span style="font-family: 'DejaVu Sans';"><span style="color: #000000;">没有</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">，使用可编程的输入输入（</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">programmed input/output)</span></span><span style="font-family: 'DejaVu Sans';">模型来和外设设备交互，或者来加载保存多核指令，</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">通常完成会被读写操作占用，而不能去做其他工作。</span></span></p> 
<p><span style="font-family: 'DejaVu Sans';"><span style="color: #000000;">使用</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">，</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">可以发起数据传输，在数据传输过程中可以做其他事情，然后在传输完成后，收到</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">控制器的一个中断。这在实时系统中很有效。此外在流处理中也很有效，因为流处理一般要数据和控制并发，采用</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">就可以达到很高的吞吐率。</span></span></p> 
<p><br></p> 
<p><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">Principle</span></span></span></p> 
<p><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">是现代计算机的一个本质特性，允许数据不依赖与</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">而进行传输。如果没有</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">，那么</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">就需要亲自来拷贝数据，而不能同时进行其他工作。这种情况很糟糕，因为通过一个外围总线访问</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">I/O</span></span><span style="font-family: 'DejaVu Sans';">设备比普通的的系统</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">RAM</span></span><span style="font-family: 'DejaVu Sans';">要慢很多。</span></span></p> 
<p><br></p> 
<p><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">从一个设备拷贝到另一个设备。当</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">命令让</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">发起一个</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">传输，</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">CPU</span></span><span style="font-family: 'DejaVu Sans';">不会花功夫执行</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">,DMA</span></span><span style="font-family: 'DejaVu Sans';">会处理数据传输。对于称为第三方的</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">，比如使用</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">ISA bus</span></span><span style="font-family: 'DejaVu Sans';">的，</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">控制器通常是主板的一个芯片。更现代的一些总线设计，比如</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">PCI</span></span><span style="font-family: 'DejaVu Sans';">，通常是总线驱动</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">，这时候是设备取得</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">bus</span></span><span style="font-family: 'DejaVu Sans';">的控制，然后实施</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">。在嵌入式处理器或者多核的</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">SOC</span></span><span style="font-family: 'DejaVu Sans';">中，片上总线会链接有一个</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA engine</span></span><span style="font-family: 'DejaVu Sans';">，这个</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA engine</span></span><span style="font-family: 'DejaVu Sans';">会管理</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">数据传输。</span></span></p> 
<p><br></p> 
<p><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA</span></span><span style="font-family: 'DejaVu Sans';">的典型应用是系统</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">RAM</span></span><span style="font-family: 'DejaVu Sans';">和设备之间的数据传输。在多核的嵌入式系统中，通常有一个或者多个</span></span><span style="color: #000000;"><span style="font-family: sans-serif;"><span style="font-size: x-small;">DMA engine</span></span><span style="font-family: 'DejaVu Sans';">。</span></span></p> 
<p><br></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/bbde5c895d288e1405f5b12659ad3f92/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">vc&#43;&#43; MFC   一些控件使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/58b101956e22f1f8ced08b5e4d907da5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【linux】设备驱动动态中断申请</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>