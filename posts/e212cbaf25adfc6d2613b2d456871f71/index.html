<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【接口技术】实验四：8254定时器与计数器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【接口技术】实验四：8254定时器与计数器" />
<meta property="og:description" content="文章目录 一. 实验目的二. 实验内容实验4-1 8254计数器实验实验4-2 8254定时器实验 一. 实验目的 掌握8253/8254计数特点和编程方法。掌握8253/8254工作方式3的基本工作原理、计数特点和编程方法。 二. 实验内容 8253/8254的初始化命令字如下图所示：
实验4-1 8254计数器实验 按电路图连接电路，将计数器0设置为方式2，计数器初值为N（N&lt;0FH），用手逐个输入单脉冲，编程使计数值在屏幕上显示，用逻辑笔观察OUTO电平变化，当输入N&#43;1个脉冲后OUTO变为高电平，并将计数过程记录下来。
电路图：
接线：
汇编代码：
io8253a equ 283h io8253b equ 280h code segment assume cs:code start: MOV AL,14H ;设置8253通道0工作方式2，二进制计数，0001 0100 MOV DX,io8253a ;将io8253a对应的283H端口送入DX中 OUT DX,AL ;送工作方式控制字 MOV AL,0FH ;设置初始值0FH，0000 1111 MOV DX,io8253b ;将io8253b对应的280H端口送入DX中 OUT DX,AL ;送初始值 lll: IN AL,DX ;读计数初值 call disp ;调用显示子程序 push dx ;将dx中数据入栈 mov ah,06h ;调用DOS的6号功能，直接读写 mov dl,0ffh ;输入，dl为输入字符的ASCII码 int 21h ;中断，输出 pop dx ;将dx中数据出栈 jz lll ;跳转至lll mov ah,4ch ;返回DOS int 21h ;中断，退出 disp PROC NEAR ;显示子程序disp开始定义 PUSH DX ;将dx中数据入栈 AND AL,0FH ;将高四位清零 MOV DL,AL ;将更新后的AL送入DL中 CMP DL,9 ;将DL中值与&#39;9&#39;进行比较，判断是否小于&#39;9&#39;的ASCII码 JLE NUM ;如果比&#39;9&#39;小，则在&#39;0&#39;-&#39;9&#39;，跳转到NUM ADD DL,7 ;否则为&#39;A&#39;-&#39;F&#39;，需要加37H，A为65H NUM: ADD DL,30H ;将DL中的ASCII码值加30H MOV AH,02H ;调用DOS的2号功能，显示 INT 21H ;中断，输出 mov dl,0dh ;加回车符 int 21h ;中断，输出 mov dl,0ah ;加换行符 int 21h ;中断，输出 pop dx ;将dx中数据出栈 ret ;子程序返回 disp endp ;显示子程序disp结束定义 code ends end start 运行结果：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e212cbaf25adfc6d2613b2d456871f71/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-19T18:12:40+08:00" />
<meta property="article:modified_time" content="2021-11-19T18:12:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【接口技术】实验四：8254定时器与计数器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#__1" rel="nofollow">一. 实验目的</a></li><li><a href="#__5" rel="nofollow">二. 实验内容</a></li><li><ul><li><a href="#41_8254_8" rel="nofollow">实验4-1 8254计数器实验</a></li><li><a href="#42_8254_77" rel="nofollow">实验4-2 8254定时器实验</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="__1"></a>一. 实验目的</h2> 
<ol><li>掌握8253/8254计数特点和编程方法。</li><li>掌握8253/8254工作方式3的基本工作原理、计数特点和编程方法。</li></ol> 
<h2><a id="__5"></a>二. 实验内容</h2> 
<p>8253/8254的初始化命令字如下图所示：<br> <img src="https://images2.imgbox.com/c7/17/ZN2RAz7m_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="41_8254_8"></a>实验4-1 8254计数器实验</h3> 
<p>按电路图连接电路，将计数器0设置为方式2，计数器初值为N（N&lt;0FH），用手逐个输入单脉冲，编程使计数值在屏幕上显示，用逻辑笔观察OUTO电平变化，当输入N+1个脉冲后OUTO变为高电平，并将计数过程记录下来。</p> 
<p><strong>电路图：</strong><br> <img src="https://images2.imgbox.com/11/49/7JBP7Gkk_o.png" alt="在这里插入图片描述"><br> <strong>接线：</strong><br> <img src="https://images2.imgbox.com/5a/a7/xXIc0F7k_o.png" alt="在这里插入图片描述"><br> <strong>汇编代码：</strong></p> 
<pre><code class="prism language-python">io8253a equ 283h
io8253b equ 280h

code segment
	assume cs<span class="token punctuation">:</span>code

start<span class="token punctuation">:</span>
	MOV AL<span class="token punctuation">,</span>14H        <span class="token punctuation">;</span>设置<span class="token number">8253</span>通道<span class="token number">0</span>工作方式<span class="token number">2</span>，二进制计数，<span class="token number">0001</span> <span class="token number">0100</span>
	MOV DX<span class="token punctuation">,</span>io8253a    <span class="token punctuation">;</span>将io8253a对应的283H端口送入DX中
	OUT DX<span class="token punctuation">,</span>AL         <span class="token punctuation">;</span>送工作方式控制字

	MOV AL<span class="token punctuation">,</span>0FH        <span class="token punctuation">;</span>设置初始值0FH，<span class="token number">0000</span> <span class="token number">1111</span>
	MOV DX<span class="token punctuation">,</span>io8253b    <span class="token punctuation">;</span>将io8253b对应的280H端口送入DX中
	OUT DX<span class="token punctuation">,</span>AL         <span class="token punctuation">;</span>送初始值

lll<span class="token punctuation">:</span> 
	IN AL<span class="token punctuation">,</span>DX          <span class="token punctuation">;</span>读计数初值
	call disp         <span class="token punctuation">;</span>调用显示子程序
	push dx           <span class="token punctuation">;</span>将dx中数据入栈
	mov ah<span class="token punctuation">,</span>06h        <span class="token punctuation">;</span>调用DOS的<span class="token number">6</span>号功能，直接读写
	mov dl<span class="token punctuation">,</span>0ffh       <span class="token punctuation">;</span>输入，dl为输入字符的ASCII码
	<span class="token builtin">int</span> 21h           <span class="token punctuation">;</span>中断，输出

	pop dx            <span class="token punctuation">;</span>将dx中数据出栈
	jz lll            <span class="token punctuation">;</span>跳转至lll
	mov ah<span class="token punctuation">,</span>4ch        <span class="token punctuation">;</span>返回DOS
	<span class="token builtin">int</span> 21h           <span class="token punctuation">;</span>中断，退出

disp PROC NEAR        <span class="token punctuation">;</span>显示子程序disp开始定义

	PUSH DX           <span class="token punctuation">;</span>将dx中数据入栈
	AND AL<span class="token punctuation">,</span>0FH        <span class="token punctuation">;</span>将高四位清零
	MOV DL<span class="token punctuation">,</span>AL         <span class="token punctuation">;</span>将更新后的AL送入DL中
	CMP DL<span class="token punctuation">,</span><span class="token number">9</span>          <span class="token punctuation">;</span>将DL中值与<span class="token string">'9'</span>进行比较，判断是否小于<span class="token string">'9'</span>的ASCII码
	JLE NUM           <span class="token punctuation">;</span>如果比<span class="token string">'9'</span>小，则在<span class="token string">'0'</span><span class="token operator">-</span><span class="token string">'9'</span>，跳转到NUM
	ADD DL<span class="token punctuation">,</span><span class="token number">7</span>          <span class="token punctuation">;</span>否则为<span class="token string">'A'</span><span class="token operator">-</span><span class="token string">'F'</span>，需要加37H，A为65H

NUM<span class="token punctuation">:</span> 
	ADD DL<span class="token punctuation">,</span>30H        <span class="token punctuation">;</span>将DL中的ASCII码值加30H
	MOV AH<span class="token punctuation">,</span>02H        <span class="token punctuation">;</span>调用DOS的<span class="token number">2</span>号功能，显示
	INT 21H           <span class="token punctuation">;</span>中断，输出

	mov dl<span class="token punctuation">,</span>0dh        <span class="token punctuation">;</span>加回车符
	<span class="token builtin">int</span> 21h           <span class="token punctuation">;</span>中断，输出
	mov dl<span class="token punctuation">,</span>0ah        <span class="token punctuation">;</span>加换行符
	<span class="token builtin">int</span> 21h           <span class="token punctuation">;</span>中断，输出
	pop dx            <span class="token punctuation">;</span>将dx中数据出栈
	ret               <span class="token punctuation">;</span>子程序返回

disp endp             <span class="token punctuation">;</span>显示子程序disp结束定义

code ends
end start
</code></pre> 
<p><strong>运行结果：</strong></p> 
<p>连接好实验箱后，运行程序，屏幕上显示初值F，持续按下按钮，屏幕上的示数依次从F递减至1，效果如下所示：<br> <img src="https://images2.imgbox.com/13/18/oQS63FCd_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/83/09/xcEUTVFP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="42_8254_77"></a>实验4-2 8254定时器实验</h3> 
<p>按照电路图连接电路，将计数器0、计数器1分别设置工作方式，CLK0连接时钟1MHz，由T01000分频后变为1000Hz，再由T1进行1000分频后得到1Hz。</p> 
<p><strong>电路图：</strong><br> <img src="https://images2.imgbox.com/4e/9f/Ts9iZfoM_o.png" alt="在这里插入图片描述"><br> <strong>接线：</strong><br> <img src="https://images2.imgbox.com/df/81/M9clpHP2_o.png" alt="在这里插入图片描述"><br> <strong>汇编代码：</strong></p> 
<pre><code class="prism language-python">io8253a equ 280h
io8253b equ 281h
io8253c equ 283h

code segment
    assume cs<span class="token punctuation">:</span>code

start<span class="token punctuation">:</span>
     mov dx<span class="token punctuation">,</span>io8253c    <span class="token punctuation">;</span>将io8253c对应的283H端口送入DX中
     mov AL<span class="token punctuation">,</span>37h        <span class="token punctuation">;</span>设置通道<span class="token number">0</span>的工作方式<span class="token number">3</span>，<span class="token number">0011</span> <span class="token number">0111</span>
     out dx<span class="token punctuation">,</span>al         <span class="token punctuation">;</span>向<span class="token number">8253</span>写控制字
     
     mov ax<span class="token punctuation">,</span>1000h      <span class="token punctuation">;</span>写入初始值1000h（二进制计数）
     mov dx<span class="token punctuation">,</span>io8253a    <span class="token punctuation">;</span>将io8253a对应的283H端口送入DX中
     out dx<span class="token punctuation">,</span>al         <span class="token punctuation">;</span>写入低字节
     mov al<span class="token punctuation">,</span>ah         <span class="token punctuation">;</span>
     out dx<span class="token punctuation">,</span>al         <span class="token punctuation">;</span>写入高字节
     
     mov dx<span class="token punctuation">,</span>io8253c    <span class="token punctuation">;</span>将io8253c对应的283H端口送入DX中
     mov al<span class="token punctuation">,</span>76h        <span class="token punctuation">;</span>设置通道<span class="token number">1</span>为工作方式<span class="token number">3</span>，<span class="token number">0111</span> <span class="token number">0110</span>
     out dx<span class="token punctuation">,</span>al         <span class="token punctuation">;</span>向<span class="token number">8253</span>写控制字

     mov ax<span class="token punctuation">,</span><span class="token number">1000d</span>      <span class="token punctuation">;</span>写入初始值<span class="token number">1000d</span>（BCD计数）
     mov dx<span class="token punctuation">,</span>io8253b    <span class="token punctuation">;</span>将io8253b对应的283H端口送入DX中
     out dx<span class="token punctuation">,</span>al         <span class="token punctuation">;</span>写入低字节
     mov al<span class="token punctuation">,</span>ah         <span class="token punctuation">;</span>
     out dx<span class="token punctuation">,</span>al         <span class="token punctuation">;</span>写入高字节

     mov ah<span class="token punctuation">,</span>4ch        <span class="token punctuation">;</span>程序退出
     <span class="token builtin">int</span> 21h           <span class="token punctuation">;</span>中断，退出

code ends
end start 
</code></pre> 
<p><strong>运行结果：</strong></p> 
<p>连接好实验箱后，运行程序，屏幕上显示运行成功，观察实验箱逻辑笔的LED灯变化，发现每隔1秒黄色LED计数灯闪一次，对应着1Hz的频率。旁边的红色LED显示累积计数情况，其数值在00、01、10、11四种情况之间不断循环，效果如下所示：<br> <img src="https://images2.imgbox.com/f6/50/H6lbIBrT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/8b/ca/mSkMt16D_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/3d/3b/i4GpqYMT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/94/50/SSYu2qEC_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/19/75/yLdz25OT_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ddd0c64bc98e5456e4b78d34de6d8b52/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">tkinter的grid布局定位方式图示详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/eb67cf718f999c52841a4c144273361c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python爬虫自学习1&#43;京东商品爬取实例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>