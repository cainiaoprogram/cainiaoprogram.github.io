<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算机网络笔记总结：Part4 网络层 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="计算机网络笔记总结：Part4 网络层" />
<meta property="og:description" content="文章笔记整理于：王道考研——计算机网络
1. 概述 数据报和分组的关系：分组是一段比较长的数据，将它进行切割成一段段之后就得到数据报 功能一：让数据在路由器之间走最佳的路径。功能二：让不同的设备（手机，电脑，平板等）都能正常连接。功能三：拥塞控制 开环控制：在拥塞之前就提前设计解决。闭环控制：在拥塞时自动调整解决问题。 OSI参考模型各层次的传输单元应用层报文传输层报文段网络层IP数据报，分组（如果IP数据报太大就切割成分组）数据链路层帧物理层比特流 2. 数据交换方式（3种） 2.1 电路交换 2.2 报文交换 2.3 分组交换 2.4 分组交换和报文交换的具体计算对比 报文交换：一共三段，每段都需要10000bit/1000bps=10s，三段就是3x10=30s
分组交换：可以分为两段，一个是第一个数据开始发到最后一个数据从源发出，一段是最后一个数据到达目的地。第一段总时间是10000bit/1000bps=10s，第二段总时间是（10/1000）*2=0.02s，所以总时间是10.02s。
理解一下，这里就是报文交换的时候，由于报文没有分割，所以即使先到的数据也不能先发走，只能等到最后一段报文全部到了之后才能一起走，相对于分组交换明显拖慢了前面数据的速度，所以导致报文交换明显慢于分组交换
可以看到分组交换明显快于报文交换，所以我们通常使用分组交换.
三种方式对比：
2.4.1 分组传输的两种传输方式-数据报与虚电路 数据报 虚电路 [外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mjkvPp3K-1619260554696)(计算机网络Part4 网络层.assets/image-20210423200034150.png)]
3. 路由算法和路由协议概述 3.1 RIP协议和距离向量算法 3.1.1 RIP协议概述 通过交换信息构建路由表
3.1.2 如何建立路由表 3.1.3 RIP协议报文格式 3.1.4 RIP协议特点 就是来回更新路由表，错误信息被覆盖，导致直至达到距离上限强制错误时才可以得知出错
3.1.5 距离向量算法 3.2 OSPF协议和链路状态算法 3.2.1 OSPF协议概述 3.2.2 OSPF的其他特点 为什么OSPF收敛速度快？因为它只是刷新一下链路状态，得知其是否连通，不需要和RIP一样进行对照，而是直接通过Dijilstra算法来自己算出路径
3.2.3 链路状态路由算法 了解即可
3.2.4 OSPF区域 了解即可
3.2.5 OSPF分组（了解即可） 3.3 BGP协议 3.3.1 BGP协议简介 3.3.2 BGP协议交换信息的过程 了解即可，只需要知道BGP交换协议里面交换的是一组路径向量
3.3.3 BGP协议报文格式（BGP是应用层协议） 3.3.4 BGP协议特点 3." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d77aa7e7796138c338dd8731b8acd6d4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-04-24T18:36:35+08:00" />
<meta property="article:modified_time" content="2021-04-24T18:36:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机网络笔记总结：Part4 网络层</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>文章笔记整理于：<a href="https://www.bilibili.com/video/BV19E411D78Q?p=39" rel="nofollow">王道考研——计算机网络</a></p> 
</blockquote> 
<h2><a id="1__4"></a>1. 概述</h2> 
<ul><li>数据报和分组的关系：分组是一段比较长的数据，将它进行切割成一段段之后就得到数据报 
  <ul><li>功能一：让数据在路由器之间走最佳的路径。</li><li>功能二：让不同的设备（手机，电脑，平板等）都能正常连接。</li><li>功能三：拥塞控制 
    <ul><li>开环控制：在拥塞之前就提前设计解决。</li><li>闭环控制：在拥塞时自动调整解决问题。</li></ul> </li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/df/10/aO9hBGZi_o.png" alt="在这里插入图片描述"></p> 
<table><thead><tr><th>OSI参考模型</th><th>各层次的传输单元</th></tr></thead><tbody><tr><td>应用层</td><td>报文</td></tr><tr><td>传输层</td><td>报文段</td></tr><tr><td>网络层</td><td>IP数据报，分组（如果IP数据报太大就切割成分组）</td></tr><tr><td>数据链路层</td><td>帧</td></tr><tr><td>物理层</td><td>比特流</td></tr></tbody></table> 
<h2><a id="2_3_25"></a>2. 数据交换方式（3种）</h2> 
<p><img src="https://images2.imgbox.com/9a/ad/KE3H9g1H_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="21__31"></a>2.1 电路交换</h3> 
<p><img src="https://images2.imgbox.com/57/12/RbxlqhQg_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22__37"></a>2.2 报文交换</h3> 
<p><img src="https://images2.imgbox.com/23/f4/roT847oX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="23__43"></a>2.3 分组交换</h3> 
<p><img src="https://images2.imgbox.com/92/70/1hetCPiK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="24__49"></a>2.4 分组交换和报文交换的具体计算对比</h3> 
<blockquote> 
 <p>报文交换：一共三段，每段都需要10000bit/1000bps=10s，三段就是3x10=30s<br> 分组交换：可以分为两段，一个是第一个数据开始发到最后一个数据从源发出，一段是最后一个数据到达目的地。第一段总时间是10000bit/1000bps=10s，第二段总时间是（10/1000）*2=0.02s，所以总时间是10.02s。<br> 理解一下，这里就是报文交换的时候，由于报文没有分割，所以即使先到的数据也不能先发走，只能等到最后一段报文全部到了之后才能一起走，相对于分组交换明显拖慢了前面数据的速度，所以导致报文交换明显慢于分组交换<br> 可以看到分组交换明显快于报文交换，所以我们通常使用分组交换.</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/9f/b1/vzesdUvf_o.png" alt="在这里插入图片描述"></p> 
<p>三种方式对比：</p> 
<p><img src="https://images2.imgbox.com/bd/60/KsHtqvS3_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="241__64"></a>2.4.1 分组传输的两种传输方式-数据报与虚电路</h4> 
<p><img src="https://images2.imgbox.com/60/60/wZZ88BcV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4e/1a/GQcWSP85_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_71"></a>数据报</h5> 
<p><img src="https://images2.imgbox.com/32/9c/kBAal7kx_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_77"></a>虚电路</h5> 
<p><img src="https://images2.imgbox.com/16/40/2OcZyjTn_o.png" alt="在这里插入图片描述"></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-mjkvPp3K-1619260554696)(计算机网络Part4 网络层.assets/image-20210423200034150.png)]</p> 
<h2><a id="3__85"></a>3. 路由算法和路由协议概述</h2> 
<p><img src="https://images2.imgbox.com/a6/ba/Q4e2PGdv_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/fd/f6/KJVE8Vv7_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cb/83/0j97PiAI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="31_RIP_95"></a>3.1 RIP协议和距离向量算法</h3> 
<h4><a id="311_RIP_97"></a>3.1.1 RIP协议概述</h4> 
<p>通过交换信息构建路由表<br> <img src="https://images2.imgbox.com/0d/1f/IIE81Dxz_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="312__102"></a>3.1.2 如何建立路由表</h4> 
<p><img src="https://images2.imgbox.com/5b/b8/W08WnXzt_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="313_RIP_106"></a>3.1.3 RIP协议报文格式</h4> 
<p><img src="https://images2.imgbox.com/01/c7/xeTgMX6j_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="314_RIP_110"></a>3.1.4 RIP协议特点</h4> 
<p>就是来回更新路由表，错误信息被覆盖，导致直至达到距离上限强制错误时才可以得知出错<br> <img src="https://images2.imgbox.com/6f/0a/7NftlANZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/91/f1/hynGyudP_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/28/75/BOYVFjhi_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/34/06/Lf7hSoHO_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="315__118"></a>3.1.5 距离向量算法</h4> 
<p><img src="https://images2.imgbox.com/ac/85/QbNrB6EK_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d7/cb/VRe10aUV_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e1/d0/R46fN3jP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_OSPF_123"></a>3.2 OSPF协议和链路状态算法</h3> 
<h4><a id="321_OSPF_125"></a>3.2.1 OSPF协议概述</h4> 
<p><img src="https://images2.imgbox.com/80/73/VAuueuXV_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="322_OSPF_129"></a>3.2.2 OSPF的其他特点</h4> 
<p>为什么OSPF收敛速度快？因为它只是刷新一下链路状态，得知其是否连通，不需要和RIP一样进行对照，而是直接通过Dijilstra算法来自己算出路径<br> <img src="https://images2.imgbox.com/3c/6f/jPK4gVZM_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="323__134"></a>3.2.3 链路状态路由算法</h4> 
<p>了解即可<br> <img src="https://images2.imgbox.com/8c/05/asCgUjqQ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="324_OSPF_139"></a>3.2.4 OSPF区域</h4> 
<p>了解即可<br> <img src="https://images2.imgbox.com/c4/da/zcxuzVKc_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="325_OSPF_144"></a>3.2.5 OSPF分组（了解即可）</h4> 
<p><img src="https://images2.imgbox.com/f1/40/SdEwlcLH_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="33_BGP_147"></a>3.3 BGP协议</h3> 
<h4><a id="331_BGP_149"></a>3.3.1 BGP协议简介</h4> 
<p><img src="https://images2.imgbox.com/c9/aa/DW9lYb3Q_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="332_BGP_153"></a>3.3.2 BGP协议交换信息的过程</h4> 
<p>了解即可，只需要知道BGP交换协议里面交换的是一组路径向量<br> <img src="https://images2.imgbox.com/d4/f5/I5SmkcEI_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4c/b9/ysdWPT6q_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e7/0a/nzTHHGJe_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="333_BGPBGP_160"></a>3.3.3 BGP协议报文格式（BGP是应用层协议）</h4> 
<p><img src="https://images2.imgbox.com/e2/f1/D70Emaay_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="334_BGP_163"></a>3.3.4 BGP协议特点</h4> 
<p><img src="https://images2.imgbox.com/01/06/dSHxZL2a_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="335_BGP_167"></a>3.3.5 BGP的四种报文</h4> 
<p><img src="https://images2.imgbox.com/50/b5/nat5pQzr_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="34__171"></a>3.4 三种路由协议的比较</h3> 
<p><img src="https://images2.imgbox.com/52/e0/I6pOYTJk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f8/eb/MCSoJJvs_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4_IP_178"></a>4. IP数据报</h2> 
<h3><a id="41_IP_180"></a>4.1 IP数据报格式</h3> 
<table><thead><tr><th>名称</th><th>注释</th><th>大小</th></tr></thead><tbody><tr><td>版本 Version</td><td>ipv4或者ipv6</td><td>4位</td></tr><tr><td>首部长度 IHL</td><td>此处数值再乘以4才是真正大小，同时因为IP数据报固定长度为20字节，所以此处最小值为5，即二进制的0101</td><td>4位</td></tr><tr><td>区分服务 DSCP + ECN</td><td>希望获得哪种服务，用的比较少</td><td>8位</td></tr><tr><td>总长度 Total Length</td><td>首部+数据的长度，最大为2^16-1=65535</td><td>16位</td></tr><tr><td>标识 Identification</td><td>用来表示是哪一个数据报的分片，不同的分片标识各不相同</td><td>8位</td></tr><tr><td>标志 Flags</td><td>用来表示是否分片和分片是否结束</td><td>3位，但实际有用的只有后两位</td></tr><tr><td>片偏移 Fragment Offset</td><td>用来标记分片之后，该分片在原来的数据报的位置，以8字节为单位</td><td>13位</td></tr><tr><td>生存时间 Time To Live</td><td>即TTL，没经过一个路由器TTL-1,0时自动放弃，根据系统不同默认的TTL不同</td><td>8位</td></tr><tr><td>协议 Protocol</td><td>用来标记协议名的字段值，如TCP,UDP,ICMP等等</td><td>8位</td></tr><tr><td>首部检验和 Header Checksum</td><td>检验首部的字段是否出错，出错就丢弃此数据报</td><td></td></tr><tr><td>源地址 Source IP Address</td><td>发送方ip地址</td><td>32位</td></tr><tr><td>目的地址 Destination IP Address</td><td>接收方ip地址</td><td>32位</td></tr><tr><td>可选字段 Options</td><td>用来排错等安全检测</td><td>未知，可在0-40位之间</td></tr><tr><td>填充</td><td>将数据报对齐成4字节的整数倍，数值全部为0</td><td>未知，根据可选字段来定</td></tr></tbody></table> 
<p><img src="https://images2.imgbox.com/05/20/EeQUudz6_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/ff/ac/ZWzoT2z2_o.png" alt="在这里插入图片描述"><br> 计算偏移量时记住是以0开始的就行，以每一篇最开始的除以8得到的数值就是偏移量<br> MF和DF的定义见上图<br> <img src="https://images2.imgbox.com/a2/69/LSztfvfW_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="5_IP_208"></a>5. IP</h2> 
<h3><a id="51_ipv4_210"></a>5.1 ipv4地址</h3> 
<p><strong>全球唯一的</strong>表示某一个主机或者路由器接口的编码。</p> 
<h4><a id="511_ip_214"></a>5.1.1 ip地址分类</h4> 
<p><img src="https://images2.imgbox.com/fc/86/UKXoY1JV_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="512_ip_218"></a>5.1.2 特殊ip地址</h4> 
<p><img src="https://images2.imgbox.com/a8/35/IJHxphGR_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="513_ip_222"></a>5.1.3 私有ip地址</h4> 
<p><img src="https://images2.imgbox.com/de/b4/bptRHCNy_o.png" alt="在这里插入图片描述"></p> 
<ul><li>为什么A类最大是<code>126.xxx.xxx.xxx</code>？ 
  <ul><li>因为网络号最开始第一位是0，一共八位，所以二进制表示位<code>0xxxxxxx</code>，最大就是<code>2^7-1=127</code>，但是因为<code>127.xxx.xxx.xxx</code>是特殊ip地址，所以将其去掉。</li></ul> </li><li>为什么B类最大是<code>191.255.xxx.xxx</code>？ 
  <ul><li>因为网络号最开始第一位是10，一共八位，所以二进制表示位<code>10xxxxxx</code>，最大就是<code>10111111=191</code>，最小就是<code>10000000=128</code>，无特殊ip地址。</li></ul> </li><li>为什么C类最大是<code>223.255.xxx.xxx</code>？ 
  <ul><li>因为网络号最开始第一位是110，一共八位，所以二进制表示位<code>110xxxxx</code>，最大就是<code>11011111=223</code>，最小就是<code>10000000=192</code>，无特殊ip地址。</li></ul> </li></ul> 
<p><img src="https://images2.imgbox.com/79/b3/rdQX0Qzp_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="52_NAT_237"></a>5.2 网络地址转换NAT</h3> 
<p>注释：连接内网和外网，就是找个代理的用它的ip地址与外面收发数据<br> NAT需要构建NAT转换表，既要存广域网（WAN，外网）也要存局域网（LAN，内网）的ip地址和端口号<br> <img src="https://images2.imgbox.com/72/0c/D5BBLplU_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="53__245"></a>5.3 子网划分和子网掩码</h3> 
<h4><a id="531__247"></a>5.3.1 为什么需要子网划分</h4> 
<p>由于ip地址不够用，所以需要额外子网扩展ip。</p> 
<p><img src="https://images2.imgbox.com/3c/0e/zfwFpQRp_o.png" alt="在这里插入图片描述"></p> 
<ul><li>为什么子网好能全0或者全1：因为CIDR编址（可见下一段）。</li><li>为什么主机号不能全0或者全1：因为全0代表本网络，全1代表广播分组。</li></ul> 
<p><img src="https://images2.imgbox.com/4a/18/yr7OrjtI_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/29/87/1jkuoXrW_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="532__262"></a>5.3.2 子网掩码</h4> 
<ul><li>子网掩码就是用来和ip地址一起计算子网的地址的。</li><li>方法就是讲子网掩码逐位写成二进制然后而原来ip地址进行与运算，就可以得到子网ip地址。因为255是11111111，所以如果写着255的话，ip地址和子网ip地址对应的地方的数值就相同。</li></ul> 
<p><img src="https://images2.imgbox.com/3f/2f/NyNLiUfR_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/21/46/VQIFf43k_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java">这道题可以看出来，即使子网掩码不同，相同ip地址对应的子网ip地址也可能相同
但是子网掩码不同，划分的<span class="token operator">*</span><span class="token operator">*</span>子网数目不同<span class="token operator">*</span><span class="token operator">*</span>
为什么划分的子网数目不同？或者说怎么算划分的子网位数目？
以<span class="token number">255.255</span><span class="token number">.192</span><span class="token number">.0</span>为例，<span class="token number">255</span>是<span class="token number">11111111</span>即八个<span class="token number">1</span><span class="token punctuation">,</span><span class="token number">192</span>是<span class="token number">11000000</span>即<span class="token number">2</span>个<span class="token number">1</span>，一共是<span class="token number">8</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">2</span><span class="token operator">=</span><span class="token number">18</span>个<span class="token number">1</span>，一共有<span class="token number">32</span>位地址，所以剩余有<span class="token number">32</span><span class="token operator">-</span><span class="token number">18</span><span class="token operator">=</span><span class="token number">14</span>位
以<span class="token number">255.255</span><span class="token number">.224</span><span class="token number">.0</span>为例，<span class="token number">255</span>是<span class="token number">11111111</span>即八个<span class="token number">1</span><span class="token punctuation">,</span><span class="token number">224</span>是<span class="token number">11100000</span>即<span class="token number">3</span>个<span class="token number">1</span>，一共是<span class="token number">8</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">3</span><span class="token operator">=</span><span class="token number">19</span>个<span class="token number">1</span>，一共有<span class="token number">32</span>位地址，所以剩余有<span class="token number">32</span><span class="token operator">-</span><span class="token number">19</span><span class="token operator">=</span><span class="token number">13</span>位
</code></pre> 
<p><img src="https://images2.imgbox.com/26/47/0iT6jkpR_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-java">这道题先将<span class="token number">255.255</span><span class="token number">.252</span><span class="token number">.0</span>计算出一共有<span class="token number">8</span><span class="token operator">+</span><span class="token number">8</span><span class="token operator">+</span><span class="token number">6</span><span class="token operator">=</span><span class="token number">22</span>位网络号位
所以就有<span class="token number">32</span><span class="token operator">-</span><span class="token number">22</span><span class="token operator">=</span><span class="token number">10</span>位主机号位
将<span class="token number">180.80</span><span class="token number">.77</span><span class="token number">.55</span>解析，可以知道在<span class="token number">77</span>部分某部分开始会用来表示主机号位
<span class="token number">77</span>的二进制是<span class="token number">0100</span> <span class="token number">1101</span>，因为一共有<span class="token number">22</span>位网络号位，所以<span class="token number">010011</span> （此处分开） <span class="token number">01</span>，从这个<span class="token number">01</span>开始是主机号位。
所以用来表示子网ip地址的应该是<span class="token number">180.80</span><span class="token number">.76</span>（<span class="token number">010011</span> <span class="token number">00</span>）<span class="token punctuation">.</span>xxx PS注意<span class="token number">76</span>括号内后两位二进制<span class="token number">00</span>
但是本体是发布广播地址，所以主机号全部都要是<span class="token number">1</span>
所以应该是<span class="token number">180.80</span><span class="token number">.79</span>（<span class="token number">010011</span> <span class="token number">11</span>）<span class="token number">.255</span>（<span class="token number">11111111</span>）注意<span class="token number">79</span>括号内后两位二进制<span class="token number">11</span>
</code></pre> 
<p>1.这里特定主机路由就是指找特定的处理这里这个ip地址的路由。</p> 
<p>2.默认路由会将这个数据报发给另一个路由，直至找到对应的路由，或者TTL耗尽被丢弃。</p> 
<p><img src="https://images2.imgbox.com/7c/2f/qijudBM5_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="54_CIDR_300"></a>5.4 无分类编制CIDR</h3> 
<p><img src="https://images2.imgbox.com/1d/3c/hnyf5FOM_o.png" alt="在这里插入图片描述"><br> 使用CIDR可以聚合网络:</p> 
<p>如图，通过缩短前缀，R1和R2就可以合并在<code>206.1.0.0/16</code>的子网下</p> 
<p>但是这样转发表之中就会有多个匹配结果，所以我们使用<strong>最长前缀匹配</strong></p> 
<p><img src="https://images2.imgbox.com/1d/90/Ey1Bvltq_o.png" alt="在这里插入图片描述"><br> 例题：</p> 
<p><img src="https://images2.imgbox.com/ba/1f/Q99o37wI_o.png" alt="在这里插入图片描述"></p> 
<p>最长前缀匹配就是在计算后符合同一子网的时候，选前缀越长的</p> 
<p><strong>这道题选B</strong></p> 
<p><img src="https://images2.imgbox.com/f0/3c/7smLyRcG_o.png" alt="在这里插入图片描述"></p> 
<p>因为本网络是<code>192.168.5.0/24</code>，就是<code>192.168.5.（0000 0000）/24</code>，将248写成二进制是<code>11111 000</code>，有五个1，所以前五位都可以作为子网的编号，剩下的三位就是用来分配子网内剩余的地址了，因为不能全0或者全1，所以还要减2</p> 
<h3><a id="55_ARP_324"></a>5.5 ARP协议</h3> 
<p><img src="https://images2.imgbox.com/0a/d6/pkneGBs9_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/35/85/TFkNlWWb_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="56_DHCP_329"></a>5.6 DHCP协议</h3> 
<p><img src="https://images2.imgbox.com/22/2b/ljCR59tw_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="57_ICMP_333"></a>5.7 ICMP协议</h3> 
<h4><a id="571_ICMP_335"></a>5.7.1 ICMP协议概述</h4> 
<p>ICMP，IGMP处于网络层和传输层之间，就是为了更好地转发ip数据报和提高交互成功的几率。</p> 
<p><img src="https://images2.imgbox.com/14/fa/SVCPZtPp_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="572_ICMP_341"></a>5.7.2 ICMP差错报告报文</h4> 
<h5><a id="ICMPIP_343"></a>ICMP差错报告报文如何与IP数据报结合</h5> 
<p><img src="https://images2.imgbox.com/23/49/l8xt2vcF_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ICMP_347"></a>五种ICMP差错报文</h5> 
<p>其中源点抑制已废弃不用。</p> 
<p><img src="https://images2.imgbox.com/31/37/KboH9OQ2_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="ICMP_353"></a>四种不发送ICMP差错报文的情况</h5> 
<p>注释：组播是指由一点到多点，但不是无脑发到所有点，无脑发到所有点的是广播，组播有筛选条件。</p> 
<p><img src="https://images2.imgbox.com/9c/69/WEwI5Sfk_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="573_ICMP_359"></a>5.7.3 ICMP询问报文</h4> 
<h5><a id="ICMP_361"></a>四种ICMP询问报文</h5> 
<p>后两种是掩码地址请求和回答报文，路由器询问和通告报文，这两个已经废弃不再使用<br> <img src="https://images2.imgbox.com/a4/eb/5Rn6Gead_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="574_ICMP_366"></a>5.7.4 ICMP的应用</h4> 
<p>1.ping命令：测试两个主机之间连通性，使用了<strong>ICMP回送请求和回答报文</strong><br> 2.traceroute命令：跟踪一个分组从原点到终点的路径，使用了<strong>ICMP时间超过差错报告报文</strong><br> <a href="https://blog.csdn.net/llq_200/article/details/81034345">traceroute命令讲解</a></p> 
<h2><a id="6_IPV6_372"></a>6. IPV6</h2> 
<h3><a id="61_IPV6_374"></a>6.1 为什么会有IPV6</h3> 
<p>就是IPV4地址用完了，从根本上增加ip地址数目，之前讲的NAT和CIDR也只是在IPV4的基础上扩展了IPV4地址数目，治标不治本。<br> <img src="https://images2.imgbox.com/6e/1e/d1HYYZn0_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="62_IPV6_379"></a>6.2 IPV6地址表示形式</h3> 
<p><img src="https://images2.imgbox.com/24/e8/xq356GNm_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="63_IPV6_383"></a>6.3 IPV6数据报格式</h3> 
<table><thead><tr><th>名称</th><th>作用</th><th>位数</th></tr></thead><tbody><tr><td>版本 Version</td><td>知名协议版本，此处因为是ipv6所以总是6</td><td>4位</td></tr><tr><td>优先级 Traffic Class</td><td>又来区分数据报的类型和优先级</td><td>8位</td></tr><tr><td>流标签 Flow Label</td><td>和ipv4标识某个数据报分片不同，这是对于一整个数据报流的标记</td><td>19位</td></tr><tr><td>有效载荷长度 Payload Length</td><td>指的是扩展首部+数据部分的大小，和ipv4的总长度和首部长度都不同，ipv6的首部长度是固定的40字节</td><td>16位</td></tr><tr><td>下一个首部 Next Header</td><td>基本首部的下一个首部指的是有效载荷里标记的的扩展首部，有效载荷里的扩展首部再指向有效载荷里标记的的扩展首部，直至最后指向数据</td><td>8位</td></tr><tr><td>跳数限制 Hop Limit</td><td>基本相当于ipv4当中的TTL，每到一个路由器-1.减到0时丢弃</td><td>7位</td></tr><tr><td>源地址 Source Address</td><td>发送方ipv6地址</td><td>128位</td></tr><tr><td>目标地址 Destination Address</td><td>接收方ipv6地址</td><td>128位</td></tr></tbody></table> 
<p><img src="https://images2.imgbox.com/fd/c0/TcYt9xnc_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="64_IPV4IPV6_398"></a>6.4 IPV4和IPV6的区别</h3> 
<p><img src="https://images2.imgbox.com/29/e3/1hwvOajy_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="65_IPV6_402"></a>6.5 IPV6基本地址类型</h3> 
<table><thead><tr><th>名称</th><th>作用</th><th>要求</th></tr></thead><tbody><tr><td>单播</td><td>一对一通信</td><td>可做源地址，目的地址</td></tr><tr><td>多播</td><td>一对多通信，以前的广播地址当做覆盖所有主机的多播</td><td>可做目的地址</td></tr><tr><td>任播</td><td>一对多当中的一个通信，看似一对多，实则一对一</td><td>可做目的地址</td></tr></tbody></table> 
<h3><a id="66_IPV4IPV6_410"></a>6.6 IPV4和IPV6之间的过渡</h3> 
<p>如果是ipv6的数据报到了ipv4，就用ipv4重新封装，把ipv6数据报前面加上ipv4伪装成ipv4数据报继续传输，直至到了ipv6路由再解开ipv4伪装<br> <img src="https://images2.imgbox.com/bc/47/kAOmX6zb_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="7_IP_415"></a>7. IP组播（多播）</h2> 
<h3><a id="71__417"></a>7.1 什么是组播</h3> 
<p>单播只能一对一，广播必须一对全部，组播就可以是一对全部中的一部分。<br> <img src="https://images2.imgbox.com/37/25/oGwZN9Ix_o.png" alt="在这里插入图片描述"><br> 辅助理解：单播所占资源多。<br> <img src="https://images2.imgbox.com/f0/c6/pvWweShi_o.png" alt="在这里插入图片描述"><br> 组播明显减轻了压力。<br> <img src="https://images2.imgbox.com/c6/8b/8P7pjK2N_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="72_IP_426"></a>7.2 IP组播地址</h3> 
<p><img src="https://images2.imgbox.com/9e/e1/MlDrNtWX_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="73__430"></a>7.3 硬件组播</h3> 
<p>就像全F的mac地址代表广播一样，00-10-5E打头的MAC地址就代表组播。</p> 
<p>7为什么最大是00-10-5E-7F-FF-FF？因为只有最后23位决定。</p> 
<p><img src="https://images2.imgbox.com/09/9b/EIzqcDlP_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="74_IGMP_438"></a>7.4 IGMP协议与组播路由选择协议</h3> 
<h4><a id="741_IGMP_440"></a>7.4.1 IGMP协议</h4> 
<p>注释：IGMP只能知道有没有组播组成员，对有几个组播组成员，成员在哪个地方都不知道。<br> <img src="https://images2.imgbox.com/52/d3/GIYhhLFd_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/07/a8/m8V8CzOj_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="742__447"></a>7.4.2 组播路由选择协议</h4> 
<p>有了这个，成员可以自行找到转发组，自行决定参加哪个组播（就像电视机选台一样）。<br> <img src="https://images2.imgbox.com/6c/87/BRCx3vDr_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/27/10/aLyngwH1_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="8_IP_453"></a>8. 移动IP</h2> 
<p>移动IP<strong>不等于</strong>动态IP（DHCP获得的）。</p> 
<p>移动IP的可以让用户因为地理原因等等，即使不在内网也可以访问内网的东西。</p> 
<h3><a id="81_IP_459"></a>8.1 移动IP的相关术语</h3> 
<p><img src="https://images2.imgbox.com/fb/75/xeMhwyKk_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="82_IP_463"></a>8.2 移动IP通信过程</h3> 
<p><img src="https://images2.imgbox.com/bd/92/c8oNcWyS_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c7/1f/VAsr8JPd_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="9__468"></a>9. 网络层设备</h2> 
<h3><a id="91__470"></a>9.1 路由器</h3> 
<h4><a id="911__472"></a>9.1.1 路由器的构造</h4> 
<p><img src="https://images2.imgbox.com/d3/bb/excDy6Am_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="912__476"></a>9.1.2 路由器的输入输出端口构造</h4> 
<p><img src="https://images2.imgbox.com/2a/b1/f4LINz5P_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/93/3a/TJHPy4QP_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="913__481"></a>9.1.3 集线器，网桥，路由表几层设备比较</h4> 
<p><img src="https://images2.imgbox.com/34/de/Rd4qAeQT_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="914__485"></a>9.1.4 路由器的路由表和转发表</h4> 
<p>这里实际上就是对前面知识的复习了<br> <img src="https://images2.imgbox.com/c6/8b/BcWIqg75_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="10__490"></a>10. 本章思维导图</h2> 
<p><img src="https://images2.imgbox.com/bb/9f/avwS3oG3_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8941b3850a2bd42b27b75a45191bcbec/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">1.1.6 LSDB同步</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/361ce136eb19cb8051dab45f197371d4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机网络笔记总结：Part6 应用层</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>