<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何使用localStorage、sessionStorage、cookie进行本地储存数据 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何使用localStorage、sessionStorage、cookie进行本地储存数据" />
<meta property="og:description" content="localStorage、sessionStorage 和 cookie 都是浏览器提供的用于在客户端存储数据的方式：
相同点：
都可以在客户端存储数据，使得数据能够在用户关闭浏览器后仍然存在。都可以存储字符串类型的数据，也可以使用其他数据类型，但最终都被转换为字符串。 不同点：
存储数据的大小：localStorage 和 sessionStorage 不限制存储的数据量，而 cookie 的大小限制为4KB。存储数据的生命周期： localStorage：没有过期时间，数据在页面卸载后依然存在。sessionStorage：与页面会话关联，当页面会话结束（用户关闭浏览器或标签页）时，数据被清除。cookie：可以设置过期时间，如果不设置过期时间，那么默认的生命周期与浏览器会话相关，即当浏览器关闭时，数据将被清除。 数据的可用性： localStorage 和 sessionStorage 仅在当前源（即当前域名和协议）的文档中可用。这意味着如果你在同源的不同标签页或窗口中打开新窗口，它们可以访问并共享 localStorage 或 sessionStorage。cookie 可以被发送到不同的源（即不同的域名和协议），但默认情况下，它们只能被设置它们的域访问。然而，可以通过设置 &#34;domain&#34; 和 &#34;path&#34; 属性来更改此行为。 数据的访问：localStorage 和 sessionStorage 不支持 &#34;SameSite&#34; 或 &#34;SameBrowser&#34; 选项，这意味着它们不能像 cookie 一样被限制在特定的源或跨源使用。数据的操作：localStorage 和 sessionStorage 支持立即可读写的数据存储，而 cookie 需要使用特定的函数来读取和设置。数据的兼容性：不是所有的浏览器都支持 localStorage 和 sessionStorage，但几乎所有的现代浏览器都支持 cookie。 一，cookie 的使用 1，首先加载模块 npm i js-cookie -S 2，在使用cookie的页面上进行引入 import Cookies from &#39;js-cookie&#39; 3，使用方法 创建一个在整个网站上有效的Cookie Cookies.set(&#39;name&#39;, &#39;value&#39;); 创建一个从现在起7天后过期的cookie，在整个站点上有效： Cookies.set(&#39;name&#39;, &#39;value&#39;, { expires: 7 }); 创建一个过期的cookie，对当前页面的路径有效： Cookies." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/91e7bbc69b247923deb1ef89efce2cc2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-21T11:00:15+08:00" />
<meta property="article:modified_time" content="2023-12-21T11:00:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何使用localStorage、sessionStorage、cookie进行本地储存数据</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <blockquote> 
 <p>localStorage、sessionStorage 和 cookie 都是浏览器提供的用于在客户端存储数据的方式：</p> 
 <p><strong>相同点：</strong></p> 
 <ul><li>都可以在客户端存储数据，使得数据能够在用户关闭浏览器后仍然存在。</li><li>都可以存储字符串类型的数据，也可以使用其他数据类型，但最终都被转换为字符串。</li></ul> 
 <p><strong>不同点：</strong></p> 
 <ol><li><strong>存储数据的大小</strong>：localStorage 和 sessionStorage 不限制存储的数据量，而 cookie 的大小限制为4KB。</li><li><strong>存储数据的生命周期</strong>：</li></ol> 
 <ul><li><strong>localStorage</strong>：没有过期时间，数据在页面卸载后依然存在。</li><li><strong>sessionStorage</strong>：与页面会话关联，当页面会话结束（用户关闭浏览器或标签页）时，数据被清除。</li><li><strong>cookie</strong>：可以设置过期时间，如果不设置过期时间，那么默认的生命周期与浏览器会话相关，即当浏览器关闭时，数据将被清除。</li></ul> 
 <ol><li><strong>数据的可用性</strong>：</li></ol> 
 <ul><li><strong>localStorage</strong> 和 <strong>sessionStorage</strong> 仅在当前源（即当前域名和协议）的文档中可用。这意味着如果你在同源的不同标签页或窗口中打开新窗口，它们可以访问并共享 localStorage 或 sessionStorage。</li><li><strong>cookie</strong> 可以被发送到不同的源（即不同的域名和协议），但默认情况下，它们只能被设置它们的域访问。然而，可以通过设置 "domain" 和 "path" 属性来更改此行为。</li></ul> 
 <ol><li><strong>数据的访问</strong>：localStorage 和 sessionStorage 不支持 "SameSite" 或 "SameBrowser" 选项，这意味着它们不能像 cookie 一样被限制在特定的源或跨源使用。</li><li><strong>数据的操作</strong>：localStorage 和 sessionStorage 支持立即可读写的数据存储，而 cookie 需要使用特定的函数来读取和设置。</li><li><strong>数据的兼容性</strong>：不是所有的浏览器都支持 localStorage 和 sessionStorage，但几乎所有的现代浏览器都支持 cookie。</li></ol> 
</blockquote> 
<h2>一，cookie 的使用</h2> 
<h4>1，首先加载模块</h4> 
<pre><code class="language-java">npm i js-cookie -S</code></pre> 
<h4> 2，在使用cookie的页面上进行引入</h4> 
<pre><code class="language-java">import Cookies from 'js-cookie'</code></pre> 
<h4>3，使用方法</h4> 
<ul><li>创建一个在整个网站上有效的Cookie</li></ul> 
<pre><code class="language-java">Cookies.set('name', 'value');</code></pre> 
<ul><li>创建一个从现在起7天后过期的cookie，在整个站点上有效：</li></ul> 
<pre><code class="language-java">Cookies.set('name', 'value', { expires: 7 });</code></pre> 
<ul><li>创建一个过期的cookie，对当前页面的路径有效：</li></ul> 
<pre><code class="language-java">Cookies.set('name', 'value', { expires: 7, path: '' });</code></pre> 
<ul><li>读取cookie：</li></ul> 
<pre><code class="language-java">Cookies.get('name'); // =&gt; 'value'
Cookies.get('nothing'); // =&gt; undefined</code></pre> 
<ul><li>阅读所有可见的Cookie：</li></ul> 
<pre><code class="language-java">Cookies.get(); // =&gt; { name: 'value' }</code></pre> 
<ul><li>删除cookie：</li></ul> 
<pre><code class="language-java">Cookies.remove('name');</code></pre> 
<ul><li>删除对当前页面路径有效的cookie：</li></ul> 
<pre><code class="language-java">Cookies.set('name', 'value', { path: '' });
Cookies.remove('name'); // fail!
Cookies.remove('name', { path: '' }); // removed!</code></pre> 
<blockquote> 
 <p>重要！删除cookie时，您必须传递用于设置cookie的完全相同的路径和域属性，除非您依赖于默认属性。<br> 注意：删除未存在的cookie不会引发任何异常，也不会返回任何值</p> 
</blockquote> 
<h2>二，<a href="https://so.csdn.net/so/search?q=localStorage&amp;spm=1001.2101.3001.7020" title="localStorage">localStorage</a>的使用</h2> 
<blockquote> 
 <p>注：vue下使用localStorage和H5使用localStorage的方法是一致的，不需要引入插件</p> 
</blockquote> 
<h4>1，储存</h4> 
<pre><code>//数据
localStorage.setItem('userName','HelloWeen');
</code></pre> 
<h4>2，获取</h4> 
<pre><code class="language-java">localStorage.getItem('userName')</code></pre> 
<h4>3，删除</h4> 
<pre><code class="language-java">localStorage.removeItem('userName');</code></pre> 
<h4>4，localStorage可以储存JSON对象，且没有时间限制的数据存储 ，除非主动删除。</h4> 
<pre><code class="language-java">var arr=[1,2,3];
localStorage.setItem("temp",arr); //会返回1,2,3
console.log(typeof localStorage.getItem("temp"));//string
console.log(localStorage.getItem("temp"));//1,2,3</code></pre> 
<h4> 5，localStorage.setItem() 不会自动将Json对象转成字符串形式</h4> 
<pre><code class="language-java">var user= {"userName": "hello","age": 2};
typeof localStorage.getItem("user");//也会返回String
localStorage.setItem("user", user);//但是返回[object Object],</code></pre> 
<h4> 6，用localStorage.setItem()正确存储JSON对象方法是：</h4> 
<ul><li>存储前先用JSON.stringify()方法将json对象转换成字符串形式</li><li>JSON.stringify() 方法可以将任意的 JavaScript 值序列化成 JSON 字符串</li><li>获取的时候要将之前存储的JSON字符串使用JSON.parse()先转成JSON对象再进行操作</li></ul> 
<pre><code class="language-java">var user= {"userName": "hello","age": 2};
user= JSON.stringify(user); //转化为JSON字符串  "{"userName":"hello","age":2}"
localStorage.setItem("user", user);//返回{"userName":"hello","age":2}
user=JSON.parse(localStorage.getItem("user"));</code></pre> 
<h2>三，sessionStorage的使用</h2> 
<h4>1，方法</h4> 
<pre><code class="language-java">//返回当前 sessionStorage 对象的第index序号的key名称。若没有返回null。
 sessionStorage.key(int index) 

//返回键名(key)对应的值(value)。若没有返回null。
 sessionStorage.getItem(string key) 

//该方法接受一个键名(key)和值(value)作为参数，将键值对添加到存储中；如果键名存在，则更新其对应的值。
sessionStorage.setItem(string key, string value) 

//将指定的键名(key)从 sessionStorage 对象中移除。
 sessionStorage.removeItem(string key) 

//清除 sessionStorage 对象所有的项。
 sessionStorage.clear() </code></pre> 
<h4>2，存储数据</h4> 
<ul><li> 采用setItem()方法存储</li></ul> 
<pre><code class="language-java">sessionStorage.setItem('testKey','这是一个测试的value值'); // 存入一个值</code></pre> 
<ul><li> 通过属性方式存储</li></ul> 
<pre><code class="language-java">sessionStorage['testKey'] = '这是一个测试的value值';</code></pre> 
<ul><li> 存储Json对象</li></ul> 
<blockquote> 
 <p>sessionStorage也可存储Json对象：存储时，通过JSON.stringify()将对象转换为文本格式；读取时，通过JSON.parse()将文本转换回对象。</p> 
</blockquote> 
<pre><code class="language-java"> var userEntity = {
    name: 'tom',
    age: 22
};

// 存储值：将对象转换为Json字符串
sessionStorage.setItem('user', JSON.stringify(userEntity));

// 取值时：把获取到的Json字符串转换回对象
var userJsonStr = sessionStorage.getItem('user');
userEntity = JSON.parse(userJsonStr);
console.log(userEntity.name); // =&gt; tom</code></pre> 
<h4>3,读取数据</h4> 
<ul><li> 通过getItem()方法取值</li></ul> 
<pre><code class="language-java">sessionStorage.getItem('testKey'); // =&gt; 返回testKey对应的值</code></pre> 
<ul><li> 通过属性方式取值</li></ul> 
<pre><code class="language-java">sessionStorage['testKey']; // =&gt; 这是一个测试的value值</code></pre> 
<p>参考文章：<a href="https://blog.csdn.net/mf_717714/article/details/84233625" title="vue项目使用cookie、localStorage和sessionStorage进行储存数据-CSDN博客">vue项目使用cookie、localStorage和sessionStorage进行储存数据-CSDN博客</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7453a13e33dcc5dcc8aa1d81b41aab9f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">按钮背景图片闪动5秒然后停住</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8972c309f100a2d949dce33cf149442e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Lede/Openwrt 系统编译</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>