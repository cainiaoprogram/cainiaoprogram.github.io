<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>如何自己搭建一个jupyter notebook远程服务器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="如何自己搭建一个jupyter notebook远程服务器" />
<meta property="og:description" content="jupyter-server 文章目录 jupyter-server1、购买阿里云的ECS云服务器2、配置ECS的ssh，以便远程访问3、用ssh客户端连接ECS，配置jupyter notebook环境a、安装anaconda，下载清华镜像的安装包，并安装b、刷新PATHc、更新condad、生成jupyter配置文件，并编辑 4、在ECS控制台开放端口5、后台运行jupyter notebook7、玩点花样a、修改jupyter网页的css，实现自定义字体等b、使用juyter notebook的插件c、安装其他的kernel 6、配置git 1、购买阿里云的ECS云服务器 官网是阿里云,系统我选择了CentOS 8.4，配置则是乞丐版，一个月￥9。
2、配置ECS的ssh，以便远程访问 首先安装openssh-server
yum install openssh-server -y 然后配置OpenSSH服务（不配置也是可以正常工作的
vi /etc/ssh/sshd_config 常见配置选项：
Port=22 设置SSH的端口号是22(默认端口号为22) Protocol 2 启用SSH版本2协议 ListenAddress 192.168.0.222 设置服务监听的地址 DenyUsers user1 user2 foo 拒绝访问的用户(用空格隔开) AllowUsers root osmond vivek 允许访问的用户(用空格隔开) PermitRootLogin yes 允许root用户登陆 PermitEmptyPasswords no 用户登陆需要密码认证 PasswordAuthentication yes 启用口令认证方式 最后重启openssh
service sshd restart 本节内容参考自博客
3、用ssh客户端连接ECS，配置jupyter notebook环境 使用命令行连接：
ssh root@hostIP 例如 ssh root@192.168.0.0 也可以使用Xshell之类的工具连接。
注意ECS的实例密码（也就是服务器root账户的密码）和账号密码是独立的，需要单独设置
连接之后
a、安装anaconda，下载清华镜像的安装包，并安装 wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.11-Linux-x86_64.sh bash Anaconda3-2021.11-Linux-x86_64.sh 安装的过程中，遇到初始化conda的选项选择yes" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/9a84b5dfd322fcfc03f83b23d1330242/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-08T18:50:16+08:00" />
<meta property="article:modified_time" content="2021-12-08T18:50:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">如何自己搭建一个jupyter notebook远程服务器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="jupyterserver_0"></a>jupyter-server</h2> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#jupyterserver_0" rel="nofollow">jupyter-server</a></li><li><ul><li><a href="#1ECS_2" rel="nofollow">1、购买阿里云的ECS云服务器</a></li><li><a href="#2ECSssh_7" rel="nofollow">2、配置ECS的ssh，以便远程访问</a></li><li><a href="#3sshECSjupyter_notebook_49" rel="nofollow">3、用ssh客户端连接ECS，配置jupyter notebook环境</a></li><li><ul><li><a href="#aanaconda_65" rel="nofollow">a、安装anaconda，下载清华镜像的安装包，并安装</a></li><li><a href="#bPATH_73" rel="nofollow">b、刷新PATH</a></li><li><a href="#cconda_79" rel="nofollow">c、更新conda</a></li><li><a href="#djupyter_85" rel="nofollow">d、生成jupyter配置文件，并编辑</a></li></ul> 
   </li><li><a href="#4ECS_125" rel="nofollow">4、在ECS控制台开放端口</a></li><li><a href="#5jupyter_notebook_129" rel="nofollow">5、后台运行jupyter notebook</a></li><li><a href="#7_143" rel="nofollow">7、玩点花样</a></li><li><ul><li><a href="#ajupytercss_145" rel="nofollow">a、修改jupyter网页的css，实现自定义字体等</a></li><li><a href="#bjuyter_notebook_177" rel="nofollow">b、使用juyter notebook的插件</a></li><li><a href="#ckernel_184" rel="nofollow">c、安装其他的kernel</a></li></ul> 
   </li><li><a href="#6git_188" rel="nofollow">6、配置git</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="1ECS_2"></a>1、购买阿里云的ECS云服务器</h3> 
<p>官网是<a href="https://www.aliyun.com/" rel="nofollow">阿里云</a>,系统我选择了CentOS 8.4，配置则是乞丐版，一个月￥9。<br> <img src="https://images2.imgbox.com/d8/d0/mvFO3hVW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2ECSssh_7"></a>2、配置ECS的ssh，以便远程访问</h3> 
<p>首先安装openssh-server</p> 
<pre><code class="prism language-bash"> yum <span class="token function">install</span> openssh-server -y
</code></pre> 
<p>然后配置OpenSSH服务（不配置也是可以正常工作的</p> 
<pre><code class="prism language-bash"><span class="token function">vi</span> /etc/ssh/sshd_config
</code></pre> 
<p>常见配置选项：</p> 
<pre><code class="prism language-text">Port=22  设置SSH的端口号是22(默认端口号为22)

Protocol 2  启用SSH版本2协议

ListenAddress 192.168.0.222  设置服务监听的地址

DenyUsers   user1 user2 foo  拒绝访问的用户(用空格隔开)

AllowUsers  root osmond vivek  允许访问的用户(用空格隔开)

PermitRootLogin  yes  允许root用户登陆

PermitEmptyPasswords no  用户登陆需要密码认证

PasswordAuthentication  yes  启用口令认证方式
</code></pre> 
<p>最后重启openssh</p> 
<pre><code class="prism language-bash">  <span class="token function">service</span> sshd restart
</code></pre> 
<p>本节内容参考自<a href="https://www.cnblogs.com/lvfeilong/p/324343dfadsfds.html" rel="nofollow">博客</a></p> 
<h3><a id="3sshECSjupyter_notebook_49"></a>3、用ssh客户端连接ECS，配置jupyter notebook环境</h3> 
<p>使用命令行连接：</p> 
<pre><code class="prism language-bash"><span class="token function">ssh</span> root@hostIP
例如
<span class="token function">ssh</span> root@192.168.0.0
</code></pre> 
<p>也可以使用Xshell之类的工具连接。</p> 
<p><em>注意ECS的实例密码（也就是服务器root账户的密码）和账号密码是独立的，需要单独设置</em></p> 
<p>连接之后</p> 
<h4><a id="aanaconda_65"></a>a、安装anaconda，下载清华镜像的安装包，并安装</h4> 
<pre><code class="prism language-bash"><span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-2021.11-Linux-x86_64.sh
<span class="token function">bash</span> Anaconda3-2021.11-Linux-x86_64.sh
</code></pre> 
<p>安装的过程中，遇到初始化conda的选项选择yes</p> 
<h4><a id="bPATH_73"></a>b、刷新PATH</h4> 
<pre><code class="prism language-bash"><span class="token builtin class-name">source</span> ~/.bashrc
</code></pre> 
<h4><a id="cconda_79"></a>c、更新conda</h4> 
<pre><code class="prism language-bash">conda update conda
</code></pre> 
<h4><a id="djupyter_85"></a>d、生成jupyter配置文件，并编辑</h4> 
<p>在那之前，生成一个密钥，在python中</p> 
<pre><code class="prism language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> notebook<span class="token punctuation">.</span>auth <span class="token keyword">import</span> passwd
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> passwd<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># 下面输入两次同样的密码，会返回一个密钥</span>
Enter password<span class="token punctuation">:</span>
Verify password<span class="token punctuation">:</span>
<span class="token string">'argon2:*******'</span>
</code></pre> 
<p><em>网上常见的’'sha1:xxxx’密钥只是加密算法不同，如果要使用sha1算法加密也可以做如下操作</em></p> 
<pre><code class="prism language-python"><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">from</span> notebook<span class="token punctuation">.</span>auth <span class="token keyword">import</span> passwd
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> p <span class="token operator">=</span> <span class="token string">''</span> <span class="token comment"># 你的密码 </span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> passwd<span class="token punctuation">(</span>p<span class="token punctuation">,</span><span class="token string">'sha1'</span><span class="token punctuation">)</span> <span class="token comment"># 下面输入两次同样的密码，会返回一个密钥</span>
Enter password<span class="token punctuation">:</span>
Verify password<span class="token punctuation">:</span>
<span class="token string">'sha1:*******'</span>
</code></pre> 
<pre><code class="prism language-bash">jupyter notebook --generate-config
<span class="token function">vim</span> ~/.jupyter/jupyter_notebook_config.py
</code></pre> 
<p>常用配置</p> 
<pre><code class="prism language-python">c<span class="token punctuation">.</span>NotebookApp<span class="token punctuation">.</span>allow_remote_access <span class="token operator">=</span> <span class="token boolean">True</span>   <span class="token comment"># 允许外部访问</span>
c<span class="token punctuation">.</span>NotebookApp<span class="token punctuation">.</span>password <span class="token operator">=</span> <span class="token string">u'sha1:xxxxx'</span>  <span class="token comment"># 刚才生成的密钥</span>
c<span class="token punctuation">.</span>NotebookApp<span class="token punctuation">.</span>ip <span class="token operator">=</span> <span class="token string">'*'</span> <span class="token comment">#所有绑定服务器的IP都能访问，若想只在特定ip访问，输入ip地址即可</span>
c<span class="token punctuation">.</span>NotebookApp<span class="token punctuation">.</span>port <span class="token operator">=</span> <span class="token number">8888</span> <span class="token comment">#将端口设置为自己喜欢的吧，默认是8888</span>
c<span class="token punctuation">.</span>NotebookApp<span class="token punctuation">.</span>open_browser <span class="token operator">=</span> <span class="token boolean">False</span> <span class="token comment">#我们并不想在服务器上直接打开Jupyter Notebook，所以设置成False</span>
c<span class="token punctuation">.</span>NotebookApp<span class="token punctuation">.</span>notebook_dir <span class="token operator">=</span> <span class="token string">'xxxx'</span> <span class="token comment">#这里是设置Jupyter的根目录，若不设置将默认root的根目录，不安全</span>
c<span class="token punctuation">.</span>NotebookApp<span class="token punctuation">.</span>allow_root <span class="token operator">=</span> <span class="token boolean">True</span> <span class="token comment"># 为了安全，Jupyter默认不允许以root权限启动jupyter </span>
</code></pre> 
<h3><a id="4ECS_125"></a>4、在ECS控制台开放端口</h3> 
<p>在ECS安全组配置中开放上面设置的端口，然后就可以在浏览器中访问<code>ip:port</code>来使用远程的jupyter notebook了！</p> 
<h3><a id="5jupyter_notebook_129"></a>5、后台运行jupyter notebook</h3> 
<pre><code class="prism language-bash"><span class="token function">nohup</span> jupyter notebook --allow-root <span class="token operator">&gt;</span> jupyter.log <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span>
</code></pre> 
<p><code>nohup</code>表示no hang up, 就是不挂起, 于是这个命令执行后即使终端退出, 也不会停止运行</p> 
<p><code>&amp;</code>让命令后台允许，另外把日志信息写到jupyter.log中</p> 
<p><mark>这一步很重要，否则关闭连接之后jupyter 就会自动关闭！！</mark></p> 
<p>本命令参考自<a href="https://blog.csdn.net/weixin_42561002/article/details/85382922">博客</a></p> 
<h3><a id="7_143"></a>7、玩点花样</h3> 
<h4><a id="ajupytercss_145"></a>a、修改jupyter网页的css，实现自定义字体等</h4> 
<pre><code class="prism language-bash"><span class="token function">vi</span> ~/anaconda3/lib/python3.9/site-packages/notebook/static/components/codemirror/lib/codemirror.css
</code></pre> 
<p>这个文件就是jupyter notebook的css，只修改如下的内容就可以实现字体、字号等内容：</p> 
<p>复杂的俺也就不会了，懂css的老哥可以自己发挥</p> 
<pre><code class="prism language-css"><span class="token selector">.CodeMirror pre.CodeMirror-line-like</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">/* Reset some styles that the rest of the page might have set */</span>
  <span class="token property">-moz-border-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">-webkit-border-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span> <span class="token property">border-radius</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">border-width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">font-family</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">white-space</span><span class="token punctuation">:</span> pre<span class="token punctuation">;</span>
  <span class="token property">word-wrap</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 110%<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> visible<span class="token punctuation">;</span>
  <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
  <span class="token property">-webkit-font-variant-ligatures</span><span class="token punctuation">:</span> contextual<span class="token punctuation">;</span>
  <span class="token property">font-variant-ligatures</span><span class="token punctuation">:</span> contextual<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="bjuyter_notebook_177"></a>b、使用juyter notebook的插件</h4> 
<pre><code class="prism language-bash">pip <span class="token function">install</span> jupyter_contrib_nbextensions
jupyter contrib nbextension <span class="token function">install</span> --user
</code></pre> 
<h4><a id="ckernel_184"></a>c、安装其他的kernel</h4> 
<p>…………</p> 
<h3><a id="6git_188"></a>6、配置git</h3> 
<p>远程服务器可以用git来上传文件（当然也可以用scp等服务</p> 
<p>安装git</p> 
<pre><code class="prism language-bash"> yum <span class="token function">install</span> <span class="token function">git</span>
</code></pre> 
<p>基本配置</p> 
<pre><code class="prism language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"yourusername"</span>
<span class="token function">git</span> config --global user.email yourmail@xxx.com
</code></pre> 
<p>然后就可以快乐使用云端的jupyter notebook了~</p> 
<blockquote> 
 <p>本文内容大多源自网络，本文进行整理归纳仅供参考</p> 
</blockquote>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e77b44381e359db9354279beff712963/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">离线安装jenkins,并离线安装插件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4c7a4e385eb2f8608f4ae084a95bb565/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qt 字符串编码转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>