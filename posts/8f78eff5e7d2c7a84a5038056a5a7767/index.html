<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ES安装教程详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ES安装教程详解" />
<meta property="og:description" content="ES安装教程详解
转载：https://blog.csdn.net/he19970408/article/details/107359861/
文章目录
0. 安装前准备
2. 在官方网站下载ES
3. 安装JDK(必须JDK1.8&#43;)
4. 配置环境变量
5. 重载系统配置
6. 安装elasticsearche
7. elasticsearche的目录结构
8. 运行es服务
9. 不能以root用户身份启动
10. 登录es用户启动ES
11. 测试ES是否启动成功
12. 开启ES远程访问
13. 启动时错误解决方案
14. 关闭网络防火墙
15. 外部浏览器访问即可
安装前准备
centos7 &#43;
java 8 &#43;
elastic 6.2.4&#43;
在官方网站下载ES
wget http://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.1.tar.gz
安装JDK(必须JDK1.8&#43;)
rpm -ivh jdk-8u181-linux-x64.rpm
/注意:默认安装位置 /usr/java/jdk1.8.0_171-amd64/
配置环境变量
vim /etc/profile
在文件末尾加入:
export JAVA_HOME=/usr/java/jdk1.8.0_171-amd64
export PATH= P A T H : PATH: PATH:JAVA_HOME/bin
重载系统配置
source /etc/profile
安装elasticsearche" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8f78eff5e7d2c7a84a5038056a5a7767/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-01T22:27:00+08:00" />
<meta property="article:modified_time" content="2023-07-01T22:27:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ES安装教程详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>ES安装教程详解<br> 转载：https://blog.csdn.net/he19970408/article/details/107359861/</p> 
<p>文章目录<br> 0. 安装前准备<br> 2. 在官方网站下载ES<br> 3. 安装JDK(必须JDK1.8+)<br> 4. 配置环境变量<br> 5. 重载系统配置<br> 6. 安装elasticsearche<br> 7. elasticsearche的目录结构<br> 8. 运行es服务<br> 9. 不能以root用户身份启动<br> 10. 登录es用户启动ES<br> 11. 测试ES是否启动成功<br> 12. 开启ES远程访问<br> 13. 启动时错误解决方案<br> 14. 关闭网络防火墙<br> 15. 外部浏览器访问即可</p> 
<ol><li> <p>安装前准备<br> centos7 +<br> java 8 +<br> elastic 6.2.4+</p> </li><li> <p>在官方网站下载ES<br> wget http://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.4.1.tar.gz</p> </li><li> <p>安装JDK(必须JDK1.8+)<br> rpm -ivh jdk-8u181-linux-x64.rpm<br> /<em>注意:默认安装位置 /usr/java/jdk1.8.0_171-amd64</em>/</p> </li><li> <p>配置环境变量<br> vim /etc/profile<br> 在文件末尾加入:<br> export JAVA_HOME=/usr/java/jdk1.8.0_171-amd64<br> export PATH=<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
       
        
         
         
           P 
          
         
           A 
          
         
           T 
          
         
           H 
          
         
           : 
          
         
        
          PATH: 
         
        
      </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="mord mathnormal">A</span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">:</span></span></span></span></span>JAVA_HOME/bin</p> </li><li> <p>重载系统配置<br> source /etc/profile</p> </li><li> <p>安装elasticsearche<br> tar -zxvf elasticsearch-6.4.1.tar.gz<br> 1</p> </li><li> <p>elasticsearche的目录结构<br> bin 可执行的二进制文件的目录<br> config 配置文件的目录<br> lib 运行时依赖的库<br> logs modules 运行时日志文件<br> plugins es中提供的插件</p> </li><li> <p>运行es服务<br> 在bin目录中执行 ./elasticsearch</p> <p>注意:root用户启动[2018-09-19T14:50:04,029][WARN ][o.e.b.ElasticsearchUncaughtExceptionHandler] [] uncaught exception in thread [main]org.elasticsearch.bootstrap.StartupException: java.lang.RuntimeException: can not run elasticsearch as root</p> </li><li> <p>不能以root用户身份启动<br> a.在linux系统中创建新的组<br> groupadd es</p> <p>b.创建新的用户es并将es用户放入es组中</p> <p>c.修改es用户密码<br> passwd es</p> <p>d.将root用户解压的文件移动到es用户目录中<br> mv /root/elasticsearch-6.2.4 /home/es/</p> <p>f.改变文件的所有者<br> chown -R es:es 当前es的安装目录(这里是:/home/es/elasticsearch)</p> </li><li> <p>登录es用户启动ES<br> ./elasticsearch 启动ES</p> </li><li> <p>测试ES是否启动成功<br> 在命令终端中执行: curl http://localhost:9200 出现以下信息:<br> {<!-- --><br> “name” : “xQK1cwT”,<br> “cluster_name” : “elasticsearch”,<br> “cluster_uuid” : “t7IYk7LKQ0mXcyyrdFWpLg”,<br> “version” : {<!-- --><br> “number” : “6.2.4”,<br> “build_hash” : “ccec39f”,<br> “build_date” : “2018-04-12T20:37:28.497551Z”,<br> “build_snapshot” : false,<br> “lucene_version” : “7.2.1”,<br> “minimum_wire_compatibility_version” : “5.6.0”,<br> “minimum_index_compatibility_version” : “5.0.0”<br> },<br> “tagline” : “You Know, for Search”<br> }</p> </li><li> <p>开启ES远程访问<br> vim elasticsearch.yml 将原来network修改为以下配置:<br> network.host: 0.0.0.0</p> </li><li> <p>启动时错误解决方案<br> a.重新启动es出现如下错误<br> <strong>ERROR: bootstrap checks failed[1]: max file descriptors [4096] for elasticsearch process is too low, increase to at least [65536]</strong><br> 解决方案:</p> </li></ol> 
<h2><a id="root_101"></a>切换到root用户修改</h2> 
<pre><code>vim /etc/security/limits.conf
</code></pre> 
<h2><a id="_103"></a>在最后面追加下面内容</h2> 
<pre><code>*               soft    nofile          65536
*               hard    nofile          65536
*               soft    nproc           4096
*               hard    nproc           4096
</code></pre> 
<h2><a id="_108"></a>退出重新登录检测配置是否生效:</h2> 
<pre><code>ulimit -Hn
ulimit -Sn
ulimit -Hu
ulimit -Su
</code></pre> 
<p>b.重新启动出现如下错误<br> <strong>ERROR: max number of threads [3802] for user [chenyn] is too low,increase to at least [4096]</strong><br> 解决方案:<br> #进入limits.d目录下修改配置文件。<br> vim /etc/security/limits.d/20-nproc.conf</p> 
<h2><a id="_ES_soft_nproc_4096_119"></a>修改为 启动ES用户名 soft nproc 4096</h2> 
<p>c.重新启动出现如下错误<br> <strong>ERROR: max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]</strong><br> 解决方案:<br> vim /etc/sysctl.conf<br> vm.max_map_count=655360<br> #执行以下命令生效：<br> sysctl -p</p> 
<ol start="14"><li> <p>关闭网络防火墙<br> systemctl stop firewalld<br> systemctl disable firewalld</p> </li><li> <p>外部浏览器访问即可<br> http://es的主机名:9200 出现如下信息说明安装成功:<br> {<!-- --><br> “name” : “xQK1cwT”,<br> “cluster_name” : “elasticsearch”,<br> “cluster_uuid” : “t7IYk7LKQ0mXcyyrdFWpLg”,<br> “version” : {<!-- --><br> “number” : “6.2.4”,<br> “build_hash” : “ccec39f”,<br> “build_date” : “2018-04-12T20:37:28.497551Z”,<br> “build_snapshot” : false,<br> “lucene_version” : “7.2.1”,<br> “minimum_wire_compatibility_version” : “5.6.0”,<br> “minimum_index_compatibility_version” : “5.0.0”<br> },<br> “tagline” : “You Know, for Search”<br> }</p> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5b24c975c0c8d9ed7d26ad8fc473d699/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ENVI预处理GF-1号WFV1遥感数据提取NDVI指数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/224a8627f7ab1207d47d682275df5470/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">测试测试测试测试测试测试</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>