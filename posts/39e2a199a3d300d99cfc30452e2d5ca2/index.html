<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>《入坑百度飞桨OCR及打包代码到开源库》 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="《入坑百度飞桨OCR及打包代码到开源库》" />
<meta property="og:description" content="常常听到很多人说python这种语言的奇特之处就是你不用再自己造轮子，你只需要懂得车子的构架，就能完整的造出来一辆车子，在此次入坑百度飞桨之后我才深深的理解到这句话的涵义。于是此次想分享一下本人在使用百度飞桨以及打包自己使用百度飞桨中字符识别模块paddleocr的一些踩坑经验，由于公司电脑的一些局限性，导致在公司做的时候坑确实挺多的，不过在公司填完各种坑之后就很顺利在自己的电脑上配置好环境，以下就是我本次带来的百度飞桨环境配置和一键预测字符demo：
一、配置百度飞桨环境、安装paddlepaddle、paddlehub、paddleocr等环境。
二、使用百度飞桨中字符识别模块paddleocr进行字符的一键预测。
三、打包自己的一键预测ocr图形界面demo，测试是否打包成功。
一、配置百度飞桨环境 1、安装paddlepaddle
进入百度飞桨官网中选择自己的电脑环境进行安装
图1-1百度飞桨安装页面 使用上面的命令进行安装paddlepaddle环境，接着在命令行中输入python进入python解释器，接着输入import paddle，再输入paddle.utils.run_check()，查看环境是否安装成功，若安装成功则显示如下：
图1-2 查看百度飞桨是否安装成功 2、安装paddlehub
安装paddlepaddle成功后可以直接使用命令pip install -i https://mirror.baidu.com/pypi/simple paddlehub 安装，接着在python解释器里导入paddlehub，输入padlehub.server_check()，安装成功信息如下：
图1-3 查看paddlehub是否安装成功 3、安装paddleocr
使用 pip install -i https://mirror.baidu.com/pypi/simple paddleocr安装，一般情况下会报出这个错：
图1-4 安装paddleocr报错信息 这是由于我们的电脑里缺少了VC&#43;&#43; 14.0这个东西，到下面链接去下载一个并安装就可以了。Download Visual Studio Tools - Install Free for Windows, Mac, LinuxDownload Visual Studio IDE or VS Code for free. Try out Visual Studio Professional or Enterprise editions on Windows, Mac.https://visualstudio.microsoft.com/downloads/ 安装好 VS Code 之后再使用上面命令进行安装，导入paddleocr模块，输入paddleocr.__version__，进行测试，若显示如下信息，则安装成功。
图1-5 测试paddleocr是否安装成功 二、使用百度飞桨模块paddleocr进行字符一键预测 这里就使用paddleocr进行字符的一键预测，参考paddleocr官方文档，可以使用以下代码进行字符进行一键预测：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/39e2a199a3d300d99cfc30452e2d5ca2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-12T21:15:30+08:00" />
<meta property="article:modified_time" content="2022-04-12T21:15:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">《入坑百度飞桨OCR及打包代码到开源库》</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>常常听到很多人说python这种语言的奇特之处就是你不用再自己造轮子，你只需要懂得车子的构架，就能完整的造出来一辆车子，在此次入坑百度飞桨之后我才深深的理解到这句话的涵义。于是此次想分享一下本人在使用百度飞桨以及打包自己使用百度飞桨中字符识别模块paddleocr的一些踩坑经验，由于公司电脑的一些局限性，导致在公司做的时候坑确实挺多的，不过在公司填完各种坑之后就很顺利在自己的电脑上配置好环境，以下就是我本次带来的百度飞桨环境配置和一键预测字符demo：</p> 
<p>一、配置百度飞桨环境、安装paddlepaddle、paddlehub、paddleocr等环境。</p> 
<p>二、使用百度飞桨中字符识别模块paddleocr进行字符的一键预测。</p> 
<p>三、打包自己的一键预测ocr图形界面demo，测试是否打包成功。</p> 
<p></p> 
<h2>一、配置百度飞桨环境</h2> 
<p>1、安装paddlepaddle</p> 
<p>进入百度飞桨官网中选择自己的电脑环境进行安装</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="644" src="https://images2.imgbox.com/00/df/57P1gMU4_o.png" width="1200"> 
  <figcaption>
    图1-1百度飞桨安装页面 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>使用上面的命令进行安装paddlepaddle环境，接着在命令行中输入python进入python解释器，接着输入import paddle，再输入paddle.utils.run_check()，查看环境是否安装成功，若安装成功则显示如下：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="300" src="https://images2.imgbox.com/19/f3/ZZD2WJum_o.png" width="1181"> 
  <figcaption>
    图1-2 查看百度飞桨是否安装成功 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>2、安装paddlehub</p> 
<p>安装paddlepaddle成功后可以直接使用命令pip install -i https://mirror.baidu.com/pypi/simple paddlehub 安装，接着在python解释器里导入paddlehub，输入padlehub.server_check()，安装成功信息如下：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="96" src="https://images2.imgbox.com/c9/57/xBUgTBdl_o.png" width="871"> 
  <figcaption>
    图1-3 查看paddlehub是否安装成功 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p></p> 
<p>3、安装paddleocr</p> 
<p>使用 pip install -i https://mirror.baidu.com/pypi/simple paddleocr安装，一般情况下会报出这个错：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="306" src="https://images2.imgbox.com/04/6f/MeepEEJL_o.png" width="1044"> 
  <figcaption>
    图1-4 安装paddleocr报错信息 
  </figcaption> 
 </figure> 
</div> 
<p>这是由于我们的电脑里缺少了VC++ 14.0这个东西，到下面链接去下载一个并安装就可以了。<a class="has-card" href="https://visualstudio.microsoft.com/downloads/" rel="nofollow" title="Download Visual Studio Tools - Install Free for Windows, Mac, Linux"><span class="link-card-box"><span class="link-title">Download Visual Studio Tools - Install Free for Windows, Mac, Linux</span><span class="link-desc">Download Visual Studio IDE or VS Code for free. Try out Visual Studio Professional or Enterprise editions on Windows, Mac.</span><span class="link-link"><img alt="" class="link-link-icon" src="https://images2.imgbox.com/e1/1e/LfTt6JeY_o.png">https://visualstudio.microsoft.com/downloads/</span></span></a> 安装好 VS Code 之后再使用上面命令进行安装，导入paddleocr模块，输入paddleocr.__version__，进行测试，若显示如下信息，则安装成功。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="98" src="https://images2.imgbox.com/55/c2/sn1esp94_o.png" width="451"> 
  <figcaption>
    图1-5 测试paddleocr是否安装成功 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<h2>二、使用百度飞桨模块paddleocr进行字符一键预测</h2> 
<p>这里就使用paddleocr进行字符的一键预测，参考paddleocr官方文档，可以使用以下代码进行字符进行一键预测：</p> 
<pre><code>from paddleocr import *
        ocr = PaddleOCR(use_angle_cls=True, lang="ch")  # need to run only once to download and load model into memory
        img_path = 'E:/OCR/OCR/NG/E/3.bmp'
        result = ocr.ocr(img_path, cls=True)
        #for line in result:
            #print(line)
        text_ = [line[1][0] for line in result]
        text_box_position = [line[0] for line in result]
        confidence = [line[1][1] for line in result]
    
    
        text = {}
        text['text'] = text_[0]
        text['text_box_position'] = text_box_position
        text['confidence'] = confidence</code></pre> 
<p>这里的lang='ch'代表的是识别中英文的模型，另外的模型还有en等。在此处我做了一个图形界面来识别字符，看看效果。</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="1020" src="https://images2.imgbox.com/76/e4/ptdwmVPZ_o.png" width="1200"> 
  <figcaption>
    图2-1 识别结果1 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="914" src="https://images2.imgbox.com/79/6b/aBCGGaji_o.png" width="1200"> 
  <figcaption>
    图2-2 识别结果2 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="985" src="https://images2.imgbox.com/5f/d7/aCEjBigJ_o.png" width="1200"> 
  <figcaption>
    图2-3 识别结果3 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="1020" src="https://images2.imgbox.com/68/5f/HHcZlZ8Q_o.png" width="1200"> 
  <figcaption>
    图2-4 识别结果4 
  </figcaption> 
 </figure> 
</div> 
<p> 可见所有结果识别正确！此处本人由于使用的不是标准的图像，因此在画图像矩形框时某些矩形框的效果不好。</p> 
<h2>三、打包自己的一键预测ocr图形界面</h2> 
<p>1、首先在包含你代码文件的同等级别目录下创建一个名为setup.py代码文件，并在源码文件同等目录下创建一个名为__init__代码文件，我的文件夹如下：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="890" src="https://images2.imgbox.com/27/be/LDqn4OMs_o.png" width="1180"> 
  <figcaption>
    图3-1 文件夹目录 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>2、创建好之后在setup.py的内容如下：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="561" src="https://images2.imgbox.com/fd/e2/Z7f3aeKL_o.png" width="733"> 
  <figcaption>
    图3-2 setup.py文件内容 
  </figcaption> 
 </figure> 
</div> 
<p><br> name为你导入库时的名字也就是包名，version为版本号，packages为你想要封装的包，这里是找到文件夹下的所有文件夹进行打包，以下是一些可有可无的选项：description:这个库的一些描述，author:作者，autior_email: 你的email。</p> 
<p>3、__init__源代码文件的内容如下：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="338" src="https://images2.imgbox.com/37/84/oWWDH2EF_o.png" width="459"> 
  <figcaption>
    图3-3 __init__文件内容 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>用from 包名 import * 导入你需要的库，否则后面导入自己打包好的包名将会报错。</p> 
<p>使用from 源代码 import * 导入你自己写的源码里所有的函数，方便后面导入库使用，这里OCR和test是我自己写的源码。 __all__=['OCR.py']  是你要打包的源代码文件。</p> 
<p>4、使用命令行cd切换到你自己与setup.py同级别目录下，使用python setup.py bdist_wheel进行打包，如图：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="239" src="https://images2.imgbox.com/9c/31/OpQwKd6s_o.png" width="582"> 
  <figcaption>
    图3-4 开始进行打包 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>5、等待打包完成，你会发现在与setup.py同级别的目录下多了几个文件，其中dist中的文件就是我们打包成库的文件，使用命令行cd切换到dist文件夹中，使用pip install + 包名进行安装，安装成功显示如下：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="890" src="https://images2.imgbox.com/ae/f8/Awy6s5Vn_o.png" width="1180"> 
  <figcaption>
    图3-5 打包完成之后的文件夹 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="74" src="https://images2.imgbox.com/64/ae/z4tMm4Ks_o.png" width="935"> 
  <figcaption>
    图3-6 安装自己封装的库文件 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>至此，自己写的源码打包成库完成！</p> 
<p>最后进行自己打包的库测试，使用命令行切换到python 解释器，接着导入我前面打包文件的库名字test_ocr，并调用我的界面显示函数show()进行测试，测试成功界面如下，可以见到我们自己封装成的库文件已经导入成功：</p> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="921" src="https://images2.imgbox.com/92/77/6Ssq9Zzd_o.png" width="1200"> 
  <figcaption>
    图3-7 测试结果 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>至此，调用百度飞桨识别字符的项目完成！后面本人还会带来使用百度飞桨自动标注器标注自己的数据集，接着调用百度飞桨训练自己数据集的教程，训练自己的数据集是为了更好的适应各种场景的字符识别，得到更好的字符识别结果。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3bb02e95590e87085c685cc667f9e744/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">hashcat跑握手包笔记</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0a97b9572ada41e5762b6b7f3c51087a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">openFeign学习笔记(一)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>