<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>PHP菜鸟手记——如何解决无法装载动态链接库的问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="PHP菜鸟手记——如何解决无法装载动态链接库的问题" />
<meta property="og:description" content="为了兑现“做最懂技术的产品经理”的诺言，我上周开始捣腾PHP了。虽然早在大学读书的时候，我也曾经玩过一小段时间的PHP，不过到如今，也忘得一干二净了。所以，偶和一个PHP菜鸟无异。既然是菜鸟，自然先从搭建PHP开发环境开始了。
首先，从PHP的官方网站下载了PHP 5.2.14 For Windows的压缩包，解压至D盘的PHP目录；随后下载了Apache HTTP Server的最新版本——2.2.17，是MSI格式的，安装也非常简单。接着就是将PHP与HTTP Server关联起来——让HTTP Server能够处理php请求，其实也就是修改httpd.conf文件了。有关这一点，网上的资料已经非常详细，官方的介绍在这里。环境搭建好了之后，为了让PHP能够更强大，接下来就是通过修改PHP.ini文件来装载所需的PHP Extention（PHP扩展）了，而这些扩展在Windows平台下就是一个个动态链接库（DLL文件）。这下老大难的问题来了——无法装载某些动态链接库（PHP startup: Unable to load dynamic library）。对于这个问题，我们通过Google能够找到如下的解决方案：
切记修改Windows的环境变量，在PATH环境变量当中增加PHP所在的路径以及PHP扩展所在的路径；如果第一点做了之后，仍然无法解决，就要留意被加载的动态链接库所依赖的DLL文件是否缺失。PHP官方提供了一个在Windows下安装PHP扩展的指南，里面指出了依赖关系。 通常上述两个方案就能解决无法装载动态链接库的问题了，但是也会有例外的。上个星期我在搭建PHP开发环境的时候，就遇到了无法装载php_curl.dll动态链接库的问题。不管是环境变量还是依赖的DLL文件（官方文档指出：php_curl.dll所依赖的文件是libeay32.dll, ssleay32.dll）都是齐备的，这让我百思不得其解。我把网上能够找到的办法都试了个遍，甚至还把相关的dll文件全部复制到了Windows的system32目录当中（其实这样做是毫无意义的）。这个小问题让我整个周末如鲠在喉，甚是不爽。经过一番思考，我还是把问题定位到了动态链接库所依赖的DLL文件缺失上。
尽管官方文档告诉我php_curl只依赖上述两个DLL文件，但这是真的么？于是，我在下载了查看DLL依赖关系的软件——Dependency Walker。用这个软件一看，果然不出我所料：php_curl.dll所依赖的zlib.dll不存在！找到问题根源，接下来的事情都好办了，通过Google找到zlib的老巢，下载最新的zlib.dll，然后将该文件放到PHP的安装目录下即可（这里仍然需要注意两点，一是对于下载的DLL文件，如果文件名不是zlib.dll，需要改为zlib.dll；二是PHP安装的目录必须加入到PATH环境变量中）。至此，问题解决！" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a010fd47a2f39740aa4ac39410396340/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-04-27T23:25:02+08:00" />
<meta property="article:modified_time" content="2016-04-27T23:25:02+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">PHP菜鸟手记——如何解决无法装载动态链接库的问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body"> 
 <p>为了兑现“做最懂技术的产品经理”的诺言，我上周开始捣腾PHP了。虽然早在大学读书的时候，我也曾经玩过一小段时间的PHP，不过到如今，也忘得一干二净了。所以，偶和一个PHP菜鸟无异。既然是菜鸟，自然先从搭建PHP开发环境开始了。</p> 
 <p>首先，从<a target="_blank" href="http://www.php.net/" rel="nofollow noopener noreferrer">PHP的官方网站</a>下载了<a target="_blank" href="http://windows.php.net/downloads/releases/php-5.2.14-Win32-VC6-x86.zip" rel="nofollow noopener noreferrer">PHP 5.2.14 For Windows的压缩包</a>，解压至D盘的PHP目录；随后下载了<a target="_blank" href="http://httpd.apache.org/download.cgi" rel="nofollow noopener noreferrer">Apache HTTP Server的最新版本——2.2.17</a>，是MSI格式的，安装也非常简单。接着就是将PHP与HTTP Server关联起来——让HTTP Server能够处理php请求，其实也就是修改httpd.conf文件了。有关这一点，网上的资料已经非常详细，<a target="_blank" href="http://php.net/manual/en/install.windows.apache2.php" rel="nofollow noopener noreferrer">官方的介绍在这里</a>。环境搭建好了之后，为了让PHP能够更强大，接下来就是通过修改PHP.ini文件来装载所需的PHP Extention（PHP扩展）了，而这些扩展在Windows平台下就是一个个动态链接库（DLL文件）。这下老大难的问题来了——无法装载某些动态链接库（<strong>PHP startup: Unable to load dynamic library</strong>）。对于这个问题，我们通过Google能够找到如下的解决方案：</p> 
 <ol><li>切记修改Windows的环境变量，在PATH环境变量当中增加PHP所在的路径以及PHP扩展所在的路径；</li><li>如果第一点做了之后，仍然无法解决，就要留意被加载的动态链接库所依赖的DLL文件是否缺失。PHP官方提供了一个<a target="_blank" href="http://php.net/manual/en/install.windows.extensions.php" rel="nofollow noopener noreferrer">在Windows下安装PHP扩展的指南</a>，里面指出了依赖关系。 </li></ol> 
 <p>通常上述两个方案就能解决无法装载动态链接库的问题了，但是也会有例外的。上个星期我在搭建PHP开发环境的时候，就遇到了无法装载php_curl.dll动态链接库的问题。不管是环境变量还是依赖的DLL文件（官方文档指出：php_curl.dll所依赖的文件是<span style=""><var class="filename">libeay32.dll</var>, <var class="filename">ssleay32.dll</var></span>）都是齐备的，这让我百思不得其解。我把网上能够找到的办法都试了个遍，甚至还把相关的dll文件全部复制到了Windows的system32目录当中（其实这样做是毫无意义的）。这个小问题让我整个周末如鲠在喉，甚是不爽。经过一番思考，我还是把问题定位到了<span style="color:red"><strong>动态链接库所依赖的DLL文件缺失上。</strong></span></p> 
 <p>尽管官方文档告诉我php_curl只依赖上述两个DLL文件，但这是真的么？于是，我在下载了查看DLL依赖关系的软件——<a target="_blank" href="http://www.dependencywalker.com/" rel="nofollow noopener noreferrer">Dependency Walker</a>。用这个软件一看，果然不出我所料：<span style="color:#ff0000"><strong>php_curl.dll所依赖的zlib.dll不存在！</strong></span>找到问题根源，接下来的事情都好办了，通过Google找到<a target="_blank" href="http://www.zlib.net/" rel="nofollow noopener noreferrer">zlib的老巢</a>，下载最新的zlib.dll，然后将该文件放到PHP的安装目录下即可（这里仍然需要注意两点，<strong>一是对于下载的DLL文件，如果文件名不是zlib.dll，需要改为zlib.dll</strong>；二是PHP安装的目录必须加入到PATH环境变量中）。至此，问题解决！</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/89086f0ed3f4c9699a224ffbac07faae/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JSONObject与JAVABEAN之间的转换</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03a80ae579faa345ce5b41a6d1d993c8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">产品质量与细节</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>