<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue使用高德地图关键字搜索功能的实例代码(踩坑经验) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue使用高德地图关键字搜索功能的实例代码(踩坑经验)" />
<meta property="og:description" content="目录
一、如何在Vue中引入基础高德地图
步骤一：注册并登录高德地图开发平台，申请密钥​编辑
步骤二：安装高德地图加载器
二、 项目效果图
三、完整项目代码 1、子组件 position.vue（看这个）
2.在父组件引入position.vue
四、总结-------项目避坑（踩坑）
1、第一个坑：因为我用的element-ui的dialog组件，vue 页面或者弹窗使用 高德地图组件 map组件 不能加载 。
2、第2个坑 搜索的时候 关键字列表出不来
3、补充知识点：Z-index属性详解
一、如何在Vue中引入基础高德地图 根据官网提示，在Web端，我们需要高德地图加载器：npm i @amap/amap-jsapi-loader -S 步骤一：注册并登录高德地图开发平台，申请密钥 步骤二：安装高德地图加载器 npm i @amap/amap-jsapi-loader -S 二、 项目效果图 三、完整项目代码 1、子组件 position.vue（看这个） &lt;template&gt; &lt;div&gt; &lt;el-dialog :close-on-click-modal=&#34;false&#34; title=&#34;选取打卡地址&#34; :visible=&#34;positionDialog&#34; :before-close=&#34;closePositionDialog&#34; @close=&#34;closePositionDialog&#34; append-to-body width=&#34;800px&#34; &gt; &lt;div class=&#34;content&#34;&gt; &lt;div class=&#34;search-box&#34;&gt; &lt;div class=&#34;label&#34;&gt;关键字搜索&lt;/div&gt; &lt;el-input v-model=&#34;input&#34; placeholder=&#34;请输入内容&#34; id=&#34;tipinput&#34; &gt;&lt;/el-input&gt; &lt;/div&gt; &lt;div ref=&#34;map&#34; id=&#34;map-container&#34;&gt;&lt;/div&gt; &lt;/div&gt; &lt;span slot=&#34;footer&#34;&gt; &lt;el-button @click=&#34;closePositionDialog&#34; size=&#34;medium&#34;&gt;取消&lt;/el-button&gt; &lt;el-button type=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/888e71f1eac332bd6c552190b5b10b50/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-28T12:10:32+08:00" />
<meta property="article:modified_time" content="2023-03-28T12:10:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue使用高德地图关键字搜索功能的实例代码(踩坑经验)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%A6%82%E4%BD%95%E5%9C%A8Vue%E4%B8%AD%E5%BC%95%E5%85%A5%E5%9F%BA%E7%A1%80%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%A6%82%E4%BD%95%E5%9C%A8Vue%E4%B8%AD%E5%BC%95%E5%85%A5%E5%9F%BA%E7%A1%80%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE" rel="nofollow">一、如何在Vue中引入基础高德地图</a></p> 
<p id="%E6%AD%A5%E9%AA%A4%E4%B8%80%EF%BC%9A%E6%B3%A8%E5%86%8C%E5%B9%B6%E7%99%BB%E5%BD%95%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%EF%BC%8C%E7%94%B3%E8%AF%B7%E5%AF%86%E9%92%A5%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91-toc" style="margin-left:40px;"><a href="#%E6%AD%A5%E9%AA%A4%E4%B8%80%EF%BC%9A%E6%B3%A8%E5%86%8C%E5%B9%B6%E7%99%BB%E5%BD%95%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%EF%BC%8C%E7%94%B3%E8%AF%B7%E5%AF%86%E9%92%A5%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91" rel="nofollow">步骤一：注册并登录高德地图开发平台，申请密钥​编辑</a></p> 
<p id="%C2%A0%20%C2%A0%E6%AD%A5%E9%AA%A4%E4%BA%8C%EF%BC%9A%E5%AE%89%E8%A3%85%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%8A%A0%E8%BD%BD%E5%99%A8-toc" style="margin-left:40px;"><a href="#%C2%A0%20%C2%A0%E6%AD%A5%E9%AA%A4%E4%BA%8C%EF%BC%9A%E5%AE%89%E8%A3%85%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%8A%A0%E8%BD%BD%E5%99%A8" rel="nofollow">   步骤二：安装高德地图加载器</a></p> 
<p id="%E4%BA%8C%E3%80%81%20%E9%A1%B9%E7%9B%AE%E6%95%88%E6%9E%9C%E5%9B%BE-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%20%E9%A1%B9%E7%9B%AE%E6%95%88%E6%9E%9C%E5%9B%BE" rel="nofollow">二、 项目效果图</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%C2%A0-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%C2%A0" rel="nofollow">三、完整项目代码 </a></p> 
<p id="1%E3%80%81%E5%AD%90%E7%BB%84%E4%BB%B6%20position.vue%EF%BC%88%E7%9C%8B%E8%BF%99%E4%B8%AA%EF%BC%89-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E5%AD%90%E7%BB%84%E4%BB%B6%20position.vue%EF%BC%88%E7%9C%8B%E8%BF%99%E4%B8%AA%EF%BC%89" rel="nofollow">1、子组件 position.vue（看这个）</a></p> 
<p id="%C2%A02.%E5%9C%A8%E7%88%B6%E7%BB%84%E4%BB%B6%E5%BC%95%E5%85%A5position.vue-toc" style="margin-left:40px;"><a href="#%C2%A02.%E5%9C%A8%E7%88%B6%E7%BB%84%E4%BB%B6%E5%BC%95%E5%85%A5position.vue" rel="nofollow"> 2.在父组件引入position.vue</a></p> 
<p id="%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93-------%E9%A1%B9%E7%9B%AE%E9%81%BF%E5%9D%91%EF%BC%88%E8%B8%A9%E5%9D%91%EF%BC%89-toc" style="margin-left:0px;"><a href="#%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93-------%E9%A1%B9%E7%9B%AE%E9%81%BF%E5%9D%91%EF%BC%88%E8%B8%A9%E5%9D%91%EF%BC%89" rel="nofollow">四、总结-------项目避坑（踩坑）</a></p> 
<p id="1%E3%80%81%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%9D%91%EF%BC%9A%E5%9B%A0%E4%B8%BA%E6%88%91%E7%94%A8%E7%9A%84element-ui%E7%9A%84dialog%E7%BB%84%E4%BB%B6%EF%BC%8Cvue%20%E9%A1%B5%E9%9D%A2%E6%88%96%E8%80%85%E5%BC%B9%E7%AA%97%E4%BD%BF%E7%94%A8%20%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6%20map%E7%BB%84%E4%BB%B6%20%E4%B8%8D%E8%83%BD%E5%8A%A0%E8%BD%BD%20%E3%80%82-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%9D%91%EF%BC%9A%E5%9B%A0%E4%B8%BA%E6%88%91%E7%94%A8%E7%9A%84element-ui%E7%9A%84dialog%E7%BB%84%E4%BB%B6%EF%BC%8Cvue%20%E9%A1%B5%E9%9D%A2%E6%88%96%E8%80%85%E5%BC%B9%E7%AA%97%E4%BD%BF%E7%94%A8%20%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6%20map%E7%BB%84%E4%BB%B6%20%E4%B8%8D%E8%83%BD%E5%8A%A0%E8%BD%BD%20%E3%80%82" rel="nofollow">1、第一个坑：因为我用的element-ui的dialog组件，vue 页面或者弹窗使用 高德地图组件 map组件 不能加载 。</a></p> 
<p id="%C2%A02%E3%80%81%E7%AC%AC2%E4%B8%AA%E5%9D%91%20%E6%90%9C%E7%B4%A2%E7%9A%84%E6%97%B6%E5%80%99%20%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%97%E8%A1%A8%E5%87%BA%E4%B8%8D%E6%9D%A5-toc" style="margin-left:40px;"><a href="#%C2%A02%E3%80%81%E7%AC%AC2%E4%B8%AA%E5%9D%91%20%E6%90%9C%E7%B4%A2%E7%9A%84%E6%97%B6%E5%80%99%20%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%97%E8%A1%A8%E5%87%BA%E4%B8%8D%E6%9D%A5" rel="nofollow"> 2、第2个坑 搜索的时候 关键字列表出不来</a></p> 
<p id="3%E3%80%81%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9AZ-index%E5%B1%9E%E6%80%A7%E8%AF%A6%E8%A7%A3-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9AZ-index%E5%B1%9E%E6%80%A7%E8%AF%A6%E8%A7%A3" rel="nofollow">3、补充知识点：Z-index属性详解</a></p> 
<hr id="hr-toc"> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%A6%82%E4%BD%95%E5%9C%A8Vue%E4%B8%AD%E5%BC%95%E5%85%A5%E5%9F%BA%E7%A1%80%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE">一、如何在Vue中引入基础高德地图</h2> 
<pre><code class="language-javascript">根据官网提示，在Web端，我们需要高德地图加载器：npm i @amap/amap-jsapi-loader -S</code></pre> 
<ul><li> <h3 id="%E6%AD%A5%E9%AA%A4%E4%B8%80%EF%BC%9A%E6%B3%A8%E5%86%8C%E5%B9%B6%E7%99%BB%E5%BD%95%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91%E5%B9%B3%E5%8F%B0%EF%BC%8C%E7%94%B3%E8%AF%B7%E5%AF%86%E9%92%A5%E2%80%8B%E7%BC%96%E8%BE%91%E2%80%8B%E7%BC%96%E8%BE%91">步骤一：注册并登录高德地图开发平台，申请密钥<img alt="" src="https://images2.imgbox.com/c4/90/YOQSufQw_o.png"></h3> </li></ul> 
<p> <img alt="" height="606" src="https://images2.imgbox.com/13/fb/ibKuxYCY_o.png" width="781"></p> 
<p></p> 
<ul><li> <h3 id="%C2%A0%20%C2%A0%E6%AD%A5%E9%AA%A4%E4%BA%8C%EF%BC%9A%E5%AE%89%E8%A3%85%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E5%8A%A0%E8%BD%BD%E5%99%A8">   步骤二：安装高德地图加载器</h3> </li></ul> 
<pre><code>npm  i  @amap/amap-jsapi-loader -S</code></pre> 
<h2 id="%E4%BA%8C%E3%80%81%20%E9%A1%B9%E7%9B%AE%E6%95%88%E6%9E%9C%E5%9B%BE">二、 项目效果图</h2> 
<p><img alt="" height="932" src="https://images2.imgbox.com/c9/2c/dm6qh1OX_o.png" width="693"></p> 
<p><img alt="" height="925" src="https://images2.imgbox.com/08/6b/zHW9FK4d_o.png" width="802"></p> 
<h2 id="%E4%B8%89%E3%80%81%E5%AE%8C%E6%95%B4%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81%C2%A0">三、完整项目代码 </h2> 
<h3 id="1%E3%80%81%E5%AD%90%E7%BB%84%E4%BB%B6%20position.vue%EF%BC%88%E7%9C%8B%E8%BF%99%E4%B8%AA%EF%BC%89">1、子组件 position.vue（看这个）</h3> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;
    &lt;el-dialog
      :close-on-click-modal="false"
      title="选取打卡地址"
      :visible="positionDialog"
      :before-close="closePositionDialog"
      @close="closePositionDialog"
      append-to-body
      width="800px"
    &gt;
      &lt;div class="content"&gt;
        &lt;div class="search-box"&gt;
          &lt;div class="label"&gt;关键字搜索&lt;/div&gt;
          &lt;el-input
            v-model="input"
            placeholder="请输入内容"
            id="tipinput"
          &gt;&lt;/el-input&gt;
        &lt;/div&gt;
        &lt;div ref="map" id="map-container"&gt;&lt;/div&gt;
      &lt;/div&gt;

      &lt;span slot="footer"&gt;
        &lt;el-button @click="closePositionDialog" size="medium"&gt;取消&lt;/el-button&gt;
        &lt;el-button type="primary" @click="handlePositionDialog" size="medium"
          &gt;确定&lt;/el-button
        &gt;
      &lt;/span&gt;
    &lt;/el-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
    import AMapLoader from "@amap/amap-jsapi-loader";

    window._AMapSecurityConfig = {
        // 设置安全密钥
        securityJsCode: "你自己的安全密钥",
    };

    export default {
        props: {
            positionDialog: {
                type: Boolean,
                default: false,
            },
        },
        data() {
            return {
                input: "",
                map: null,
                lnglat: [], //   [longitude,latitude]
                auto: null,
                placeSearch: null,
                markers: [],
                position: {}, //传给父组件的值【放经纬度和地址】
            };
        },
        watch: {
            // 监听事件 如果打开了弹框才加载地图，否则不加载地图
            positionDialog(type) {
                if (type) {
                    //type True or false
                    this.initMap();
                }
            },
        },

        methods: {
            async initMap() {
                await this.$nextTick();
                console.log(this.$refs.map);
                AMapLoader.load({
                        key: "你自己的key值", // 申请好的Web端开发者Key，首次调用 load 时必填
                        version: "2.0", // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
                        plugins: ["AMap.AutoComplete", "AMap.PlaceSearch", "AMap.Geocoder"],
                    })
                    .then((AMap) =&gt; {
                        console.log(AMap);
                        this.map = new AMap.Map("map-container", {
                            // 设置地图容器id
                            viewMode: "3D", //  是否为3D地图模式
                            zoom: 18, // 初始化地图级别
                            center: [113.435871, 23.163298], //中心点坐标
                            resizeEnable: true,
                        });
                        // 关键字查询
                        this.searchMap();
                        // 监听鼠标点击事件
                        this.map.on("click", this.clickMapHandler);




                    })
                    .catch((e) =&gt; {
                        console.log(e);
                    });
            },

            // 点击地图事件获取经纬度，并添加标记
            clickMapHandler(e) {
                this.lnglat = [e.lnglat.getLng(), e.lnglat.getLat()];
                this.setMarker(this.lnglat);
                console.log(e, "点击地图", this.lnglat);
                // 点击地图上的位置，根据经纬度转换成详细地址
                let geocoder = new AMap.Geocoder({});
                let that = this;
                geocoder.getAddress(this.lnglat, function(status, result) {
                    console.log(status, result);
                    if (status === "complete" &amp;&amp; result.regeocode) {
                        console.log(result.regeocode);
                        that.address = result.regeocode.formattedAddress;
                    } else {
                        console.log("查询地址失败，请稍后再试");
                    }
                });
                this.position = {
                    longitude: e.lnglat.getLng(),
                    latitude: e.lnglat.getLat(),
                    address: that.address,
                };
                this.input = that.address //把查询到的地址赋值到输入框
            },
            // 关键字查询
            searchMap() {
                // 搜索框自动完成类
                this.auto = new AMap.AutoComplete({
                    input: "tipinput", // 使用联想输入的input的id
                });
                //构造地点查询类
                this.placeSearch = new AMap.PlaceSearch({
                    map: this.map,
                });
                // 当选中某条搜索记录时触发
                this.auto.on("select", this.selectSite);
                console.log(this.selectSite, "select");
            },
            //当选中某条搜索记录时触发
            selectSite(e) {
                if (e.poi.location) {
                    console.log("经纬度", e);
                    this.lnglat = [e.poi.location.lng, e.poi.location.lat];
                    this.placeSearch.setCity(e.poi.adcode);
                    this.placeSearch.search(e.poi.name); //关键字查询
                    let geocoder = new AMap.Geocoder({});
                    let that = this;
                    geocoder.getAddress(this.lnglat, function(status, result) {
                        if (status === "complete" &amp;&amp; result.regeocode) {
                            that.province = result.regeocode.addressComponent.province;
                            that.city = result.regeocode.addressComponent.city;
                            //自己想要赋的值，根据自己的做修改
                            that.$set(that.form, "province", that.province);
                            that.$set(that.form, "city", that.city);
                            that.$set(that.form, "address", e.poi.name);
                            that.$set(
                                that.form,
                                "coordinate",
                                e.poi.location.lng + "," + e.poi.location.lat
                            ); //纬度，经度
                            console.log(that.form, "地址");
                        } else {
                            console.log("查询地址失败，请稍后再试");
                        }
                    });
                } else {
                    this.$message.error("查询地址失败，请重新输入地址");
                }
            },
            //  添加标记
            setMarker(lnglat) {
                this.removeMarker();
                console.log("位置", lnglat);
                let marker = new AMap.Marker({
                    position: lnglat,
                });
                marker.setMap(this.map);
                this.markers.push(marker);
            },
            // 删除之前后的标记点
            removeMarker() {
                if (this.markers) {
                    this.map.remove(this.markers);
                }
            },
            closePositionDialog() {
                this.input = "";
                this.position = {}
                this.$emit("update:positionDialog", false);
            },
            handlePositionDialog() {
                this.$emit("selPosition", this.position); //把选择的位置传给父组件
                this.closePositionDialog();
            },
        },
    };
&lt;/script&gt;

&lt;style lang="scss"&gt;
    .search-box {
        display: flex;
        justify-content: flex-start;
        align-items: center;
        height: 50px;
        .label {
            width: 100px;
        }
    }

    .content {
        position: relative;
    }

    #panel {
        position: absolute;
        top: 50px;
        right: 20px;
    }

    #map-container {
        overflow: hidden;
        width: 100%;
        height: 700px;
        margin: 0;
    }

    .amap-sug-result {
        z-index: 2999 !important;
    }
&lt;/style&gt;</code></pre> 
<h3 id="%C2%A02.%E5%9C%A8%E7%88%B6%E7%BB%84%E4%BB%B6%E5%BC%95%E5%85%A5position.vue"> 2.在父组件引入position.vue</h3> 
<p>父组件引入一小部分，这里不影响效果，核心部分在position.vue</p> 
<pre><code class="language-javascript">        &lt;el-form-item label="打卡位置" prop="address"&gt;
          &lt;el-button size="mini" type="info"
            :disabled="dialogType == 'detail'"
            @click="positionDialog = true"
          &gt;选择打卡位置
          &lt;/el-button&gt;
             &lt;el-tag type="success" v-if="rowData.address"  &gt;{<!-- -->{rowData.address  }}&lt;/el-tag&gt;
          &lt;div&gt;
            打卡活动经度:
            &lt;el-tag type="danger" effect="plain" &gt;{<!-- -->{
              rowData.longitude ? rowData.longitude : "选择好位置后自动获取"
            }}&lt;/el-tag&gt;
          &lt;/div&gt;
          &lt;div&gt;
            打卡活动纬度:
            &lt;el-tag type="danger" effect="plain"&gt;{<!-- -->{
              rowData.latitude ? rowData.latitude : "选择好位置后自动获取"
            }}&lt;/el-tag&gt;
          &lt;/div&gt;

          &lt;!-- 对话框【打卡位置选择】 --&gt;
          &lt;position 
          :positionDialog.sync="positionDialog"
          @selPosition="(position)=&gt;{
            rowData.latitude=position.latitude
            rowData.longitude=position.longitude
            rowData.address=position.address
          }"
          /&gt;
        &lt;/el-form-item&gt;</code></pre> 
<h2 id="%E5%9B%9B%E3%80%81%E6%80%BB%E7%BB%93-------%E9%A1%B9%E7%9B%AE%E9%81%BF%E5%9D%91%EF%BC%88%E8%B8%A9%E5%9D%91%EF%BC%89">四、总结-------项目避坑（踩坑）</h2> 
<p>我摸索了很久，很不容易,才解决这2个坑</p> 
<h3 id="1%E3%80%81%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%9D%91%EF%BC%9A%E5%9B%A0%E4%B8%BA%E6%88%91%E7%94%A8%E7%9A%84element-ui%E7%9A%84dialog%E7%BB%84%E4%BB%B6%EF%BC%8Cvue%20%E9%A1%B5%E9%9D%A2%E6%88%96%E8%80%85%E5%BC%B9%E7%AA%97%E4%BD%BF%E7%94%A8%20%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE%E7%BB%84%E4%BB%B6%20map%E7%BB%84%E4%BB%B6%20%E4%B8%8D%E8%83%BD%E5%8A%A0%E8%BD%BD%20%E3%80%82">1、第一个坑：因为我用的element-ui的dialog组件，vue 页面或者弹窗使用 高德地图组件 map组件 不能加载 。</h3> 
<p>我遇到的问题是：</p> 
<p>高德地图在页面中引用能够正常显示（在其他页面没有使用el-dialog组件），但是想在el-dialog中显示高德地图并进行操作，地图无法显示。</p> 
<p>为什么呢？因为是当我点击添加活动列表时，打开了第一层弹框的组件，这个时候第二层的弹框组件还没有打开，但是确已经加载了地图，所以我们不能在mounted里面初始化地图</p> 
<p>2层组件</p> 
<p><img alt="" height="636" src="https://images2.imgbox.com/6f/e2/ixi0vyEk_o.png" width="1081"></p> 
<p></p> 
<p><span style="color:#fe2c24;">1、主要原因是当前生命周期mounted执行完成后，第2个组件页面el-dialog元素并不存在，所有无法显示地图。</span></p> 
<p>解决方案：先确保拿到数据，再加载地图，我在这里使用watch监听，原理就是当第2个el-dialog组件为true的时候才加载地图</p> 
<pre><code class="language-javascript">  watch:{
    // 监听事件 如果打开了弹框才加载地图，否则不加载地图
    //positionDialog是控制弹框是否显示的值
    positionDialog(type){
      if(type){
        //type： True or false
        this.initMap(); 
      }
    }
  },
</code></pre> 
<h3 id="%C2%A02%E3%80%81%E7%AC%AC2%E4%B8%AA%E5%9D%91%20%E6%90%9C%E7%B4%A2%E7%9A%84%E6%97%B6%E5%80%99%20%E5%85%B3%E9%94%AE%E5%AD%97%E5%88%97%E8%A1%A8%E5%87%BA%E4%B8%8D%E6%9D%A5"> 2、第2个坑 搜索的时候 关键字列表出不来</h3> 
<p><img alt="" height="312" src="https://images2.imgbox.com/a1/07/qlIW7ty9_o.png" width="785"></p> 
<p>了解到是由于层级的原因</p> 
<p><img alt="" height="544" src="https://images2.imgbox.com/cd/1f/edNRGrjM_o.png" width="1200"></p> 
<p></p> 
<p>解决方案：</p> 
<p>高德地图搜索框没有效果的原因可能是因为搜索的结果在地图的图层底下，所以不显示，疯狂在本页面进行css穿透改各种样式，结果还是不生效，没办法那就在全局样式中加了一段这里记录一下css样式级别: 行内&gt;内部&gt;外部，全局&gt;页面而这次在全局里写样式是因为我这段高德地图是引入第三方的东西，它的css可能不在我的本页面内存放或者级别高于我本页面的样式，所以在本页面穿透解决不了它，在全局可以解决有一个要注意的是，级别越高，影响越大，例如在本项目的其它地方使用到class='amap-sug-result’时，它都会添加以下样式了，所以在能实现的基础上，级别越低越好</p> 
<pre><code class="language-css">//然后我就在主页面，也就是我的App.vue人口文件加了这个，效果就出来了
.amap-sug-result{
  z-index: 9999!important;
}</code></pre> 
<h3 id="3%E3%80%81%E8%A1%A5%E5%85%85%E7%9F%A5%E8%AF%86%E7%82%B9%EF%BC%9AZ-index%E5%B1%9E%E6%80%A7%E8%AF%A6%E8%A7%A3">3、补充知识点：Z-index属性详解</h3> 
<p><a id="1_2"></a>1.概念</p> 
<p>z-index 属性设置元素的堆叠顺序。拥有更高堆叠顺序的元素总是会处于堆叠顺序较低的元素的前面。</p> 
<p> 案例：</p> 
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
	&lt;head&gt;
		&lt;meta charset="utf-8"&gt;
		&lt;title&gt;z-index Demo&lt;/title&gt;
		&lt;style type="text/css"&gt;
			div{
				width: 200px;height: 200px;
				text-align: center;
				font-size: 50px;
				line-height: 200px;
				position: absolute;
				}
				
			#red{left: 100px;top: 100px;}
			#green{left: 200px;top: 200px;}
		&lt;/style&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;!-- Z-index层叠性原则：
					1.同层级元素(或position:static)默认情况下文档流后面的元素会覆盖前面的。（后来居上）
					2. 对于同级元素，position不为static且z-index存在的情况下z-index大的元素会覆盖z-index小的元素，
					   即z-index越大优先级越高。 --&gt;
					   
		&lt;div id="red" style="background: red;z-index: 0;"&gt;A&lt;/div&gt;
		&lt;div id="green" style="background-color: green;"&gt;B&lt;/div&gt;
		&lt;div id="blue" style="background-color: blue;z-index: -1;"&gt;C&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p><img alt="" height="484" src="https://images2.imgbox.com/84/27/qBt0mehy_o.png" width="595"></p> 
<p></p> 
<p>以上就是我踩坑总结出来的，该项目的代码可以直接复制，我踩的坑已经补上去了 ，如果有不明白的或者一些错误，希望大家指出来，大家一起探讨！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d88dc427cb36b0838a04b9a567451f63/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">谈谈https和证书</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dc9a1eb8eb1df2fa4dbf98b00f290bbd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">PB开发BS实现跨平台</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>