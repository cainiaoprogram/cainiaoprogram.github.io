<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LTE网络注册流程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LTE网络注册流程" />
<meta property="og:description" content="转载文章 版权声明：本文为ZhongGuoRenMei原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接和本声明。 本文链接：https://blog.csdn.net/ZhongGuoRenMei/article/details/109056282
LTE网络注册流程（1） 最近在学习lte网络相关内容，并做些简单记录，并且结合高通平台的qxdm log做简要分析。
首先，介绍下lte注册的总体流程，后续再完善整体结构，至于lte注册信令流程，网上搜索就有一堆的资料，笔者就不再上传了。
1.设备开机，plmn 选择，小区选择
plmn = mcc&#43;mnc
过程如下，开机后，先从设备sim卡中获取上次注册的plmn,如果获取不到，则需要进行全频段扫描，获取一个Plmn列表，从中选择一个Plmn，选定Plmn后根据其对应频点找到同步信号，与小区进行时频的同步，从而获取小区的系统信息。
2.接收系统信息
系统信息，下图主要表示各个消息的作用。
接收到系统信息后，测量小区信号强度，判断小区是否能够驻留。小区的系统信息允许终端驻留，终端就会驻留到目标小区，并且选中该小区所在的Plmn，至此，目标小区就变成终端的服务小区。
3.随机接入
随机接入是终端与基站建立联系的过程，随机接入后，终端才能实现与小区的同步。与随机接入相关的消息MSG1-MSG4.
随机接入后，终端与基站建立起srb1，成功建立了rrc连接，后面就需要进行附着过程。
4.附着，建立默认承载
lte附着过程存在两个特点
双向鉴权，建立默认承载
附着过程包括，请求附着，获取终端用户id，鉴权，启动Nas信令安全通信，接受附着，建立srb2和默认承载完成附着。如下图
至此，lte注册流程就跑完了，下面贴上一张终端log图
关于附着之前的log没有抓取到，这里就不贴出来来了，后面我会对没一步具体介绍也做个简单的记录的，特么一些消息的重要信息
LTE网络注册流程（2） 本文说说lte系统信息吧，分为Mib和sib，sib系统信息存在sib1-sib12，主要介绍下mib,sib1 sib2 sib3 sib4 sib4的作用。
mib:
mib包含了非常重要的系统信息，包括小区标识（PCI），频率，当前系统帧号，发射天线个数及小区带宽，phich信道配置。
sib1信息
sib1也是重要的系统信息，终端附着到lte网络必不可少的，包含如plmn值，小区选择准则，小区工作频段指示，其他sib消息的调度信息。
sib2信息
sib2也携带了重要的系统信息，比如小区是否阻塞，是否允许UE驻留小区，所有物理信道配置，一些重要定时器的配置。
各种信道配置我也没整明白，下面就说主要定时器的作用。
T300：RRC 连接建立定时器
T301定时器：RRC重建定时器
T310：下行失步定时器
N310： 接受失步指示最大数目，与t310相关
等
如果需要了解，请自己去查下lte 各种定时器作用。
SIB3消息
包含了小区选择和重选的相关信息。
sib4,sib5
sib4包含lte网络内同频相邻小区信息，sib5包含lte网络内异频或者不同频段的相邻小区信息，主要包含了该小区的具体频率值，重选该小区的门限，小区重选优先级等。
关于小区重选准则如下：
1.向优先级高的小区重选
高优先级小区信号强度在指定时间内大于指定门限
ue在当前服务小区驻留时间大于1s
2.向同优先级小区重选
同等优先级小区的信号强度必须指定时间内持续大于当前服务小区信号强度
ue在当前服务小区驻留时间大于1s
3.向低优先级小区重选
没有优先级等于或者高于当前服务小区的优先级的小区的信号强度大于指定门限
当前服务小区信号强度小于指定门限
候选的低优先级小区信号强度指定时间内持续大于指定门限
ue在当前服务小区驻留时间大于1s
关于小区测量准则
1.如果服务小区是最高优先级小区，其信号强度持续时间内高于指定门限 不测量" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3ba9f742bb48b9139b1c077cf62cc72a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-26T17:56:41+08:00" />
<meta property="article:modified_time" content="2022-08-26T17:56:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LTE网络注册流程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>转载文章</h2> 
<h2>版权声明：本文为ZhongGuoRenMei原创文章，遵循<a href="https://creativecommons.org/licenses/by-sa/4.0/" rel="nofollow" title=" CC 4.0 BY-SA "> CC 4.0 BY-SA </a>版权协议，转载请附上原文出处链接和本声明。</h2> 
<p>本文链接：<a href="https://blog.csdn.net/ZhongGuoRenMei/article/details/109056282" title="https://blog.csdn.net/ZhongGuoRenMei/article/details/109056282">https://blog.csdn.net/ZhongGuoRenMei/article/details/109056282</a></p> 
<h2></h2> 
<h2></h2> 
<h2>LTE网络注册流程（1）</h2> 
<p>最近在学习lte网络相关内容，并做些简单记录，并且结合高通平台的qxdm log做简要分析。</p> 
<p>首先，介绍下lte注册的总体流程，后续再完善整体结构，至于lte注册信令流程，网上搜索就有一堆的资料，笔者就不再上传了。</p> 
<p>1.设备开机，plmn 选择，小区选择<br> plmn = mcc+mnc<br> 过程如下，开机后，先从设备sim卡中获取上次注册的plmn,如果获取不到，则需要进行全频段扫描，获取一个Plmn列表，从中选择一个Plmn，选定Plmn后根据其对应频点找到同步信号，与小区进行时频的同步，从而获取小区的系统信息。</p> 
<p>2.接收系统信息<br> 系统信息，下图主要表示各个消息的作用。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/65/74/stpuvmPw_o.png"></p> 
<p><br> 接收到系统信息后，测量小区信号强度，判断小区是否能够驻留。小区的系统信息允许终端驻留，终端就会驻留到目标小区，并且选中该小区所在的Plmn，至此，目标小区就变成终端的服务小区。</p> 
<p>3.随机接入<br> 随机接入是终端与基站建立联系的过程，随机接入后，终端才能实现与小区的同步。与随机接入相关的消息MSG1-MSG4.</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f1/e8/2NUGhbTm_o.png"></p> 
<p><br> 随机接入后，终端与基站建立起srb1，成功建立了rrc连接，后面就需要进行附着过程。</p> 
<p>4.附着，建立默认承载<br> lte附着过程存在两个特点<br> 双向鉴权，建立默认承载</p> 
<p>附着过程包括，请求附着，获取终端用户id，鉴权，启动Nas信令安全通信，接受附着，建立srb2和默认承载完成附着。如下图</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/e8/30/TcFqpkaH_o.png"></p> 
<p><br> 至此，lte注册流程就跑完了，下面贴上一张终端log图<br><br> 关于附着之前的log没有抓取到，这里就不贴出来来了，后面我会对没一步具体介绍也做个简单的记录的，特么一些消息的重要信息</p> 
<h2>LTE网络注册流程（2）</h2> 
<p>本文说说lte系统信息吧，分为Mib和sib，sib系统信息存在sib1-sib12，主要介绍下mib,sib1 sib2 sib3 sib4 sib4的作用。</p> 
<p>mib:<br> mib包含了非常重要的系统信息，包括小区标识（PCI），频率，当前系统帧号，发射天线个数及小区带宽，phich信道配置。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/9b/e7/sn97S5Op_o.png"></p> 
<p><br> sib1信息<br> sib1也是重要的系统信息，终端附着到lte网络必不可少的，包含如plmn值，小区选择准则，小区工作频段指示，其他sib消息的调度信息。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/58/09/SiHs3M3f_o.png"></p> 
<p>sib2信息<br> sib2也携带了重要的系统信息，比如小区是否阻塞，是否允许UE驻留小区，所有物理信道配置，一些重要定时器的配置。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f2/bf/KYhX3skQ_o.png"></p> 
<p><br> 各种信道配置我也没整明白，下面就说主要定时器的作用。<br> T300：RRC 连接建立定时器<br> T301定时器：RRC重建定时器<br> T310：下行失步定时器<br> N310： 接受失步指示最大数目，与t310相关<br> 等<br> 如果需要了解，请自己去查下lte 各种定时器作用。</p> 
<p>SIB3消息<br> 包含了小区选择和重选的相关信息。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/27/e7/cgA1kHeO_o.png"></p> 
<p>sib4,sib5<br> sib4包含lte网络内同频相邻小区信息，sib5包含lte网络内异频或者不同频段的相邻小区信息，主要包含了该小区的具体频率值，重选该小区的门限，小区重选优先级等。</p> 
<p>关于小区重选准则如下：<br> 1.向优先级高的小区重选<br> 高优先级小区信号强度在指定时间内大于指定门限<br> ue在当前服务小区驻留时间大于1s<br> 2.向同优先级小区重选<br> 同等优先级小区的信号强度必须指定时间内持续大于当前服务小区信号强度<br> ue在当前服务小区驻留时间大于1s<br> 3.向低优先级小区重选<br> 没有优先级等于或者高于当前服务小区的优先级的小区的信号强度大于指定门限<br> 当前服务小区信号强度小于指定门限<br> 候选的低优先级小区信号强度指定时间内持续大于指定门限<br> ue在当前服务小区驻留时间大于1s</p> 
<p>关于小区测量准则<br> 1.如果服务小区是最高优先级小区，其信号强度持续时间内高于指定门限 不测量<br> 2.如果服务小区的信号强度小于指定门限， 需要测量 系统内同异频小区信号强度<br> 3.如果服务小区不是最高优先级小区，需要周期性测量比服务小区高优先级的小区信号强度<br> 低于服务小区优先级的，只有服务小区信号强度小于指定门限时才会去测量。</p> 
<p></p> 
<h2>LTE网络注册流程（3）</h2> 
<p>本文介绍下下lte网络注册的附着和建立默认承载的过程之中消息分析.</p> 
<p>1.attach request<br> 消息中主要包括：<br> EPS attach type 数据业务附着类型<br> EPS Mobile identity 终端用户标识（IMSI or GUTI）<br> UE Network Capbility 终端支持哪些加密和完整性保护算法<br> Tracking Area Identity 最后访问跟踪区TA<br> DRX Parameter 不连续接受配置<br> voice domain preference and UE’S Usage setting 语音业务参数<br> 注意：建立默认承载的请求也在其中，这里就是lte中的又一大特色，一条rrc信令上搭载两条nas消息。</p> 
<p>下面为一个消息具体示例</p> 
<pre></pre> 
<ol><li> <p><code>22:52:12.665 [0xB0ED] LTE NAS EMM Plain OTA Outgoing Message</code></p> </li><li> <p><code>pkt_version = 1 (0x1)</code></p> </li><li> <p><code>rel_number = 9 (0x9)</code></p> </li><li> <p><code>rel_version_major = 5 (0x5)</code></p> </li><li> <p><code>rel_version_minor = 0 (0x0)</code></p> </li><li> <p><code>security_header_or_skip_ind = 0 (0x0)</code></p> </li><li> <p><code>prot_disc = 7 (0x7) (EPS mobility management messages)</code></p> </li><li> <p><code>msg_type = 65 (0x41) (Attach request)</code></p> </li><li> <p><code>lte_emm_msg</code></p> </li><li> <p><code>emm_attach_request</code></p> </li><li> <p><code>tsc = 0 (0x0) (cached sec context)</code></p> </li><li> <p><code>nas_key_set_id = 3 (0x3)</code></p> </li><li> <p><code>att_type = 2 (0x2) (combined EPS/IMSI attach) //附着类型</code></p> </li><li> <p><code>eps_mob_id //终端用户标识</code></p> </li><li> <p><code>id_type = 6 (0x6) (GUTI) //GUTI</code></p> </li><li> <p><code>odd_even_ind = 0 (0x0)</code></p> </li><li> <p><code>Guti_1111 = 15 (0xf)</code></p> </li><li> <p><code>mcc_1 = 3 (0x3) //MCC MNC</code></p> </li><li> <p><code>mcc_2 = 1 (0x1)</code></p> </li><li> <p><code>mcc_3 = 1 (0x1)</code></p> </li><li> <p><code>mnc_3 = 0 (0x0)</code></p> </li><li> <p><code>mnc_1 = 4 (0x4)</code></p> </li><li> <p><code>mnc_2 = 8 (0x8)</code></p> </li><li> <p><code>MME_group_id = 0 (0x0)</code></p> </li><li> <p><code>MME_code = 0 (0x0)</code></p> </li><li> <p><code>m_tmsi = 0 (0x0)</code></p> </li><li> <p><code>ue_netwk_cap //终端支持哪些加密和完整性保护算法</code></p> </li><li> <p><code>EEA0 = 1 (0x1) //lte加密算法支持能力</code></p> </li><li> <p><code>EEA1_128 = 1 (0x1)</code></p> </li><li> <p><code>EEA2_128 = 1 (0x1)</code></p> </li><li> <p><code>EEA3_128 = 1 (0x1)</code></p> </li><li> <p><code>EEA4 = 0 (0x0)</code></p> </li><li> <p><code>EEA5 = 0 (0x0)</code></p> </li><li> <p><code>EEA6 = 0 (0x0)</code></p> </li><li> <p><code>EEA7 = 0 (0x0)</code></p> </li><li> <p><code>EIA0 = 0 (0x0) //lte完整性保护算法支持能力</code></p> </li><li> <p><code>EIA1_128 = 1 (0x1)</code></p> </li><li> <p><code>EIA2_128 = 1 (0x1)</code></p> </li><li> <p><code>EIA3_128 = 1 (0x1)</code></p> </li><li> <p><code>EIA4 = 0 (0x0)</code></p> </li><li> <p><code>EIA5 = 0 (0x0)</code></p> </li><li> <p><code>EIA6 = 0 (0x0)</code></p> </li><li> <p><code>EIA7 = 0 (0x0)</code></p> </li><li> <p><code>oct5_incl = 1 (0x1)</code></p> </li><li> <p><code>UEA0 = 1 (0x1) //3g加密算法支持能力</code></p> </li><li> <p><code>UEA1 = 1 (0x1)</code></p> </li><li> <p><code>UEA2 = 0 (0x0)</code></p> </li><li> <p><code>UEA3 = 0 (0x0)</code></p> </li><li> <p><code>UEA4 = 0 (0x0)</code></p> </li><li> <p><code>UEA5 = 0 (0x0)</code></p> </li><li> <p><code>UEA6 = 0 (0x0)</code></p> </li><li> <p><code>UEA7 = 0 (0x0)</code></p> </li><li> <p><code>oct6_incl = 1 (0x1)</code></p> </li><li> <p><code>UCS2 = 0 (0x0)</code></p> </li><li> <p><code>UIA1 = 1 (0x1) //3G完整性保护算法的支持能力</code></p> </li><li> <p><code>UIA2 = 0 (0x0)</code></p> </li><li> <p><code>UIA3 = 0 (0x0)</code></p> </li><li> <p><code>UIA4 = 0 (0x0)</code></p> </li><li> <p><code>UIA5 = 0 (0x0)</code></p> </li><li> <p><code>UIA6 = 0 (0x0)</code></p> </li><li> <p><code>UIA7 = 0 (0x0)</code></p> </li><li> <p><code>oct7_incl = 1 (0x1)</code></p> </li><li> <p><code>ProSedd = 0 (0x0)</code></p> </li><li> <p><code>ProSe = 0 (0x0)</code></p> </li><li> <p><code>H_245_ASH = 0 (0x0)</code></p> </li><li> <p><code>ACC_CSFB = 1 (0x1)</code></p> </li><li> <p><code>LPP = 1 (0x1)</code></p> </li><li> <p><code>LCS = 0 (0x0)</code></p> </li><li> <p><code>vcc_1xsr = 0 (0x0)</code></p> </li><li> <p><code>NF = 1 (0x1)</code></p> </li><li> <p><code>oct8_incl = 0 (0x0)</code></p> </li><li> <p><code>oct9_incl = 0 (0x0)</code></p> </li><li> <p><code>oct10_incl = 0 (0x0)</code></p> </li><li> <p><code>oct11_incl = 0 (0x0)</code></p> </li><li> <p><code>oct12_incl = 0 (0x0)</code></p> </li><li> <p><code>oct13_incl = 0 (0x0)</code></p> </li><li> <p><code>oct14_incl = 0 (0x0)</code></p> </li><li> <p><code>oct15_incl = 0 (0x0)</code></p> </li><li> <p><code>esm_msg_container //**默认承载</code></p> </li><li> <p><code>eps_bearer_id_or_skip_id = 0 (0x0)</code></p> </li><li> <p><code>prot_disc = 2 (0x2) (EPS session management messages)</code></p> </li><li> <p><code>trans_id = 1 (0x1)</code></p> </li><li> <p><code>msg_type = 208 (0xd0) (PDN connectivity request) //**默认承载请求</code></p> </li><li> <p><code>lte_esm_msg</code></p> </li><li> <p><code>pdn_connectivity_req</code></p> </li><li> <p><code>pdn_type = 3 (0x3) (Ipv4v6) //PDN 类型</code></p> </li><li> <p><code>req_type = 1 (0x1) (initial request) //请求类型</code></p> </li><li> <p><code>info_trans_flag_incl = 1 (0x1)</code></p> </li><li> <p><code>esm_info_trans_flag = 1 (0x1)</code></p> </li><li> <p><code>access_pt_name_incl = 0 (0x0)</code></p> </li><li> <p><code>prot_config_incl = 1 (0x1)</code></p> </li><li> <p><code>prot_config</code></p> </li><li> <p><code>ext = 1 (0x1)</code></p> </li><li> <p><code>conf_prot = 0 (0x0)</code></p> </li><li> <p><code>num_recs = 3 (0x3)</code></p> </li><li> <p><code>sm_prot[0]</code></p> </li><li> <p><code>protocol_id = 32801 (0x8021) (IPCP)</code></p> </li><li> <p><code>prot_len = 16 (0x10)</code></p> </li><li> <p><code>ipcp_prot</code></p> </li><li> <p><code>ipcp_prot_id = 1 (0x1) (CONF_REQ)</code></p> </li><li> <p><code>identifier = 0 (0x0)</code></p> </li><li> <p><code>rfc1332_conf_req</code></p> </li><li> <p><code>num_options = 2 (0x2)</code></p> </li><li> <p><code>conf_options[0]</code></p> </li><li> <p><code>type = 129 (0x81)</code></p> </li><li> <p><code>rfc1877_primary_dns_server_add</code></p> </li><li> <p><code>length = 6 (0x6)</code></p> </li><li> <p><code>ip_addr = 0 (0x0) (0.0.0.0)</code></p> </li><li> <p><code>conf_options[1]</code></p> </li><li> <p><code>type = 131 (0x83)</code></p> </li><li> <p><code>rfc1877_sec_dns_server_add</code></p> </li><li> <p><code>length = 6 (0x6)</code></p> </li><li> <p><code>ip_addr = 0 (0x0) (0.0.0.0)</code></p> </li><li> <p><code>sm_prot[1]</code></p> </li><li> <p><code>protocol_id = 13 (0xd) (DNS Server IPv4 Address Requestt)</code></p> </li><li> <p><code>prot_len = 0 (0x0)</code></p> </li><li> <p><code>sm_prot[2]</code></p> </li><li> <p><code>protocol_id = 3 (0x3) (DNS Server IPv6 Addr Req)</code></p> </li><li> <p><code>prot_len = 0 (0x0)</code></p> </li><li> <p><code>num_recs2 = 6 (0x6)</code></p> </li><li> <p><code>sm_container[0]</code></p> </li><li> <p><code>container_id = 65280 (0xff00) (unknown)</code></p> </li><li> <p><code>container_len = 3 (0x3)</code></p> </li><li> <p><code>container_contents[0] = 19 (0x13)</code></p> </li><li> <p><code>container_contents[1] = 1 (0x1)</code></p> </li><li> <p><code>container_contents[2] = 132 (0x84)</code></p> </li><li> <p><code>sm_container[1]</code></p> </li><li> <p><code>container_id = 1 (0x1) (P-CSCF IPv6 Address Request)</code></p> </li><li> <p><code>container_len = 0 (0x0)</code></p> </li><li> <p><code>sm_container[2]</code></p> </li><li> <p><code>container_id = 12 (0xc) (P-CSCF IPv4 Address Request)</code></p> </li><li> <p><code>container_len = 0 (0x0)</code></p> </li><li> <p><code>sm_container[3]</code></p> </li><li> <p><code>container_id = 10 (0xa) (IP address allocation via NAS signalling)</code></p> </li><li> <p><code>container_len = 0 (0x0)</code></p> </li><li> <p><code>sm_container[4]</code></p> </li><li> <p><code>container_id = 5 (0x5) (NWK Req Bearer Control indicator)</code></p> </li><li> <p><code>container_len = 0 (0x0)</code></p> </li><li> <p><code>sm_container[5]</code></p> </li><li> <p><code>container_id = 16 (0x10) (Ipv4 Link MTU Request)</code></p> </li><li> <p><code>container_len = 0 (0x0)</code></p> </li><li> <p><code>dev_properties_incl = 0 (0x0)</code></p> </li><li> <p><code>nbifom_incl = 0 (0x0)</code></p> </li><li> <p><code>header_compression_config_inclu = 0 (0x0)</code></p> </li><li> <p><code>ext_prot_config_incl = 0 (0x0)</code></p> </li><li> <p><code>p_tmsi_sig_incl = 0 (0x0)</code></p> </li><li> <p><code>add_guti_incl = 0 (0x0)</code></p> </li><li> <p><code>reg_tai_incl = 1 (0x1)</code></p> </li><li> <p><code>tracking_area_id</code></p> </li><li> <p><code>mcc_mnc</code></p> </li><li> <p><code>mcc_1 = 3 (0x3)</code></p> </li><li> <p><code>mcc_2 = 1 (0x1)</code></p> </li><li> <p><code>mcc_3 = 1 (0x1)</code></p> </li><li> <p><code>mnc_3 = 0 (0x0)</code></p> </li><li> <p><code>mnc_1 = 4 (0x4)</code></p> </li><li> <p><code>mnc_2 = 8 (0x8)</code></p> </li><li> <p><code>tracking_area_id = 11 (0xb)</code></p> </li><li> <p><code>drx_params_incl = 1 (0x1)</code></p> </li><li> <p><code>drx_params</code></p> </li><li> <p><code>split_pg_cycle_code = 10 (0xa)</code></p> </li><li> <p><code>cycle_len_coeff = 0 (0x0)</code></p> </li><li> <p><code>split_on_ccch = 0 (0x0)</code></p> </li><li> <p><code>non_drx_timer = 0 (0x0)</code></p> </li><li> <p><code>ms_netwk_cap_incl = 1 (0x1)</code></p> </li><li> <p><code>ms_netwk_cap</code></p> </li><li> <p><code>length = 3 (0x3)</code></p> </li><li> <p><code>r99 = 1 (0x1)</code></p> </li><li> <p><code>GEA1 bits</code></p> </li><li> <p><code>GEA/1 = 1 (0x1)</code></p> </li><li> <p><code>SM capabilities via dedicated channels = 1 (0x1)</code></p> </li><li> <p><code>SM capabilities via GPRS channels = 1 (0x1)</code></p> </li><li> <p><code>UCS2 support = 0 (0x0)</code></p> </li><li> <p><code>SS Screening Indicator = 1 (0x1)</code></p> </li><li> <p><code>SoLSA Capability = 0 (0x0)</code></p> </li><li> <p><code>Revision level indicator = 1 (0x1)</code></p> </li><li> <p><code>PFC feature mode = 1 (0x1)</code></p> </li><li> <p><code>Extended GEA bits</code></p> </li><li> <p><code>GEA/2 = 1 (0x1)</code></p> </li><li> <p><code>GEA/3 = 1 (0x1)</code></p> </li><li> <p><code>GEA/4 = 0 (0x0)</code></p> </li><li> <p><code>GEA/5 = 0 (0x0)</code></p> </li><li> <p><code>GEA/6 = 0 (0x0)</code></p> </li><li> <p><code>GEA/7 = 0 (0x0)</code></p> </li><li> <p><code>LCS VA capability = 0 (0x0)</code></p> </li><li> <p><code>PS inter-RAT HO from GERAN to UTRAN Iu mode capability = 0 (0x0)</code></p> </li><li> <p><code>PS inter-RAT HO from GERAN to E-UTRAN S1 mode capability = 0 (0x0)</code></p> </li><li> <p><code>EMM Combined procedures Capability = 1 (0x1)</code></p> </li><li> <p><code>ISR support = 1 (0x1)</code></p> </li><li> <p><code>SRVCC to GERAN/UTRAN capability = 1 (0x1)</code></p> </li><li> <p><code>EPC capability = 1 (0x1)</code></p> </li><li> <p><code>NF capability = 1 (0x1)</code></p> </li><li> <p><code>spare_bits0_count = 0 (0x0)</code></p> </li><li> <p><code>old_loc_area_id_incl = 0 (0x0)</code></p> </li><li> <p><code>tmsi_stat_incl = 1 (0x1)</code></p> </li><li> <p><code>tmsi_stat</code></p> </li><li> <p><code>tmsi_flag = 0 (0x0)</code></p> </li><li> <p><code>ms_class_mark2_incl = 1 (0x1)</code></p> </li><li> <p><code>ms_class_mark2</code></p> </li><li> <p><code>rev_level = 2 (0x2)</code></p> </li><li> <p><code>es_ind = 0 (0x0)</code></p> </li><li> <p><code>a5_1_alg_sup = 1 (0x1)</code></p> </li><li> <p><code>rf_power_cap = 7 (0x7)</code></p> </li><li> <p><code>pseudo_sync_cap = 0 (0x0)</code></p> </li><li> <p><code>ss_screen_ind = 1 (0x1)</code></p> </li><li> <p><code>sm_cap = 1 (0x1)</code></p> </li><li> <p><code>vbs = 0 (0x0)</code></p> </li><li> <p><code>vgcs = 0 (0x0)</code></p> </li><li> <p><code>freq_cap = 0 (0x0)</code></p> </li><li> <p><code>class_3_avail = 1 (0x1)</code></p> </li><li> <p><code>lcsva_cap = 1 (0x1)</code></p> </li><li> <p><code>ucs2 = 0 (0x0)</code></p> </li><li> <p><code>solsa = 0 (0x0)</code></p> </li><li> <p><code>cmsp = 1 (0x1)</code></p> </li><li> <p><code>a5_3_alg_sup = 0 (0x0)</code></p> </li><li> <p><code>a5_2_alg_sup = 0 (0x0)</code></p> </li><li> <p><code>ms_class_mark3_incl = 0 (0x0)</code></p> </li><li> <p><code>supp_codecs_incl = 1 (0x1)</code></p> </li><li> <p><code>supp_codecs</code></p> </li><li> <p><code>num_codecs = 2 (0x2)</code></p> </li><li> <p><code>codecs[0]</code></p> </li><li> <p><code>sysid = 4 (0x4)</code></p> </li><li> <p><code>length = 2 (0x2)</code></p> </li><li> <p><code>bitmap[0] = 96 (0x60)</code></p> </li><li> <p><code>bitmap[1] = 4 (0x4)</code></p> </li><li> <p><code>codecs[1]</code></p> </li><li> <p><code>sysid = 0 (0x0)</code></p> </li><li> <p><code>length = 2 (0x2)</code></p> </li><li> <p><code>bitmap[0] = 31 (0x1f)</code></p> </li><li> <p><code>bitmap[1] = 2 (0x2)</code></p> </li><li> <p><code>add_update_type_incl = 0 (0x0)</code></p> </li><li> <p><code>voice_domain_pref_incl = 1 (0x1)</code></p> </li><li> <p><code>voice_domain_pref //语音业务相关参数</code></p> </li><li> <p><code>length = 1 (0x1)</code></p> </li><li> <p><code>UE_usage_setting = 1 (0x1) (Data centric)</code></p> </li><li> <p><code>//volte 优先 cs语音 </code></p> </li><li> <p><code>voice_domain_pref_for_EUTRAN = 3 (0x3) (IMS PS Voice preferred, CS Voice as secondary)</code></p> </li><li> <p><code>dev_properties_incl = 0 (0x0)</code></p> </li><li> <p><code>old_guti_incl = 0 (0x0)</code></p> </li><li> <p><code>ms_network_feature_incl = 1 (0x1)</code></p> </li><li> <p><code>ms_network_feature_support</code></p> </li><li> <p><code>ext_periodic_timers = 1 (0x1)</code></p> </li><li> <p><code>network_resource_id_container_incl = 0 (0x0)</code></p> </li><li> <p><code>t3324_incl = 0 (0x0)</code></p> </li><li> <p><code>t3412_ext_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_drx_par_incl = 0 (0x0)</code></p> </li><li> <p><code>ue_add_security_cap_incl = 0 (0x0)</code></p> </li><li> <p><code>ue_status_incl = 0 (0x0)</code></p> </li></ol> 
<p>2.获取终端id</p> 
<pre></pre> 
<ol><li> <p><code>//请求</code></p> </li><li> <p><code>22:52:12.897 [0xB0EC] LTE NAS EMM Plain OTA Incoming Message</code></p> </li><li> <p><code>pkt_version = 1 (0x1)</code></p> </li><li> <p><code>rel_number = 9 (0x9)</code></p> </li><li> <p><code>rel_version_major = 5 (0x5)</code></p> </li><li> <p><code>rel_version_minor = 0 (0x0)</code></p> </li><li> <p><code>security_header_or_skip_ind = 0 (0x0)</code></p> </li><li> <p><code>prot_disc = 7 (0x7) (EPS mobility management messages)</code></p> </li><li> <p><code>msg_type = 85 (0x55) (Identity request) //获取终端id请求</code></p> </li><li> <p><code>lte_emm_msg</code></p> </li><li> <p><code>emm_id_req</code></p> </li><li> <p><code>identity_type_2</code></p> </li><li> <p><code>type_of_identity = 1 (0x1) //终端id类型（imsi or guti）</code></p> </li><li> <p><code>//响应</code></p> </li><li> <p><code>22:52:12.897 [0xB0ED] LTE NAS EMM Plain OTA Outgoing Message</code></p> </li><li> <p><code>pkt_version = 1 (0x1)</code></p> </li><li> <p><code>rel_number = 9 (0x9)</code></p> </li><li> <p><code>rel_version_major = 5 (0x5)</code></p> </li><li> <p><code>rel_version_minor = 0 (0x0)</code></p> </li><li> <p><code>security_header_or_skip_ind = 0 (0x0)</code></p> </li><li> <p><code>prot_disc = 7 (0x7) (EPS mobility management messages)</code></p> </li><li> <p><code>msg_type = 86 (0x56) (Identity response)</code></p> </li><li> <p><code>lte_emm_msg</code></p> </li><li> <p><code>emm_id_resp</code></p> </li><li> <p><code>mobile_identity</code></p> </li><li> <p><code>id_type_check = 9 (0x9)</code></p> </li><li> <p><code>ident_type = 1 (0x1)</code></p> </li><li> <p><code>odd_even_ind = 1 (0x1)</code></p> </li><li> <p><code>num_ident = 15 (0xf) //获取到的Imsi 311480123456789</code></p> </li><li> <p><code>ident[0] = 3 (0x3)</code></p> </li><li> <p><code>ident[1] = 1 (0x1)</code></p> </li><li> <p><code>ident[2] = 1 (0x1)</code></p> </li><li> <p><code>ident[3] = 4 (0x4)</code></p> </li><li> <p><code>ident[4] = 8 (0x8)</code></p> </li><li> <p><code>ident[5] = 0 (0x0)</code></p> </li><li> <p><code>ident[6] = 1 (0x1)</code></p> </li><li> <p><code>ident[7] = 2 (0x2)</code></p> </li><li> <p><code>ident[8] = 3 (0x3)</code></p> </li><li> <p><code>ident[9] = 4 (0x4)</code></p> </li><li> <p><code>ident[10] = 5 (0x5)</code></p> </li><li> <p><code>ident[11] = 6 (0x6)</code></p> </li><li> <p><code>ident[12] = 7 (0x7)</code></p> </li><li> <p><code>ident[13] = 8 (0x8)</code></p> </li><li> <p><code>ident[14] = 9 (0x9)</code></p> </li></ol> 
<p>3.鉴权和安全通信<br> 这里消息就不列出来了<br> 鉴权过程，是双向鉴权，首先mme 给ue 转发鉴权请求，ue收到鉴权消息后会对网络进行鉴权，确认网络身份后，利用鉴权算法获取响应消息返回给网络，网络在通过响应对ue进行鉴权，判断用户是否为合法用户。</p> 
<p>安全通信其实就是ue和网络商量出一组加密算法，作为相互传递消息时使用的，最终建立起安全通信。</p> 
<p>4.接受附着<br> 这里注意里终端用户在成功附着的同时，也会发生位置更新。<br> 下面接受attach accept消息，主要包括下面内容：跟踪区TA列表，MME为终端分配的guti标识，定时器餐宿，EPS网络配置参数。</p> 
<pre></pre> 
<ol><li> <p><code>22:52:13.806 [0xB0EC] LTE NAS EMM Plain OTA Incoming Message</code></p> </li><li> <p><code>pkt_version = 1 (0x1)</code></p> </li><li> <p><code>rel_number = 9 (0x9)</code></p> </li><li> <p><code>rel_version_major = 5 (0x5)</code></p> </li><li> <p><code>rel_version_minor = 0 (0x0)</code></p> </li><li> <p><code>security_header_or_skip_ind = 0 (0x0)</code></p> </li><li> <p><code>prot_disc = 7 (0x7) (EPS mobility management messages)</code></p> </li><li> <p><code>msg_type = 66 (0x42) (Attach accept)</code></p> </li><li> <p><code>lte_emm_msg</code></p> </li><li> <p><code>emm_attach_accept</code></p> </li><li> <p><code>attach_result = 1 (0x1) (EPS only) //附着结果</code></p> </li><li> <p><code>t3412</code></p> </li><li> <p><code>unit = 7 (0x7)</code></p> </li><li> <p><code>timer_value = 1 (0x1)</code></p> </li><li> <p><code>tai_list //TA列表</code></p> </li><li> <p><code>num_tai_list = 1 (0x1)</code></p> </li><li> <p><code>tai_list[0]</code></p> </li><li> <p><code>list_type = 0 (0x0)</code></p> </li><li> <p><code>num_element = 0 (0x0)</code></p> </li><li> <p><code>mcc_mnc //网络的mcc mnc</code></p> </li><li> <p><code>mcc_1 = 3 (0x3)</code></p> </li><li> <p><code>mcc_2 = 1 (0x1)</code></p> </li><li> <p><code>mcc_3 = 1 (0x1)</code></p> </li><li> <p><code>mnc_3 = 0 (0x0)</code></p> </li><li> <p><code>mnc_1 = 4 (0x4)</code></p> </li><li> <p><code>mnc_2 = 8 (0x8)</code></p> </li><li> <p><code>tac[0] = 11 (0xb)</code></p> </li><li> <p><code>esm_msg_container</code></p> </li><li> <p><code>eps_bearer_id_or_skip_id = 5 (0x5)</code></p> </li><li> <p><code>prot_disc = 2 (0x2) (EPS session management messages)</code></p> </li><li> <p><code>trans_id = 1 (0x1)</code></p> </li><li> <p><code>msg_type = 193 (0xc1) (Activate default EPS bearer context request) </code></p> </li><li> <p><code>lte_esm_msg</code></p> </li><li> <p><code>act_def_eps_bearer_context_req</code></p> </li><li> <p><code>eps_qos //qos服务质量</code></p> </li><li> <p><code>qci = 5 (0x5) (QC5)</code></p> </li><li> <p><code>oct4_incl = 0 (0x0)</code></p> </li><li> <p><code>oct5_incl = 0 (0x0)</code></p> </li><li> <p><code>oct6_incl = 0 (0x0)</code></p> </li><li> <p><code>oct7_incl = 0 (0x0)</code></p> </li><li> <p><code>oct8_incl = 0 (0x0)</code></p> </li><li> <p><code>oct9_incl = 0 (0x0)</code></p> </li><li> <p><code>oct10_incl = 0 (0x0)</code></p> </li><li> <p><code>oct11_incl = 0 (0x0)</code></p> </li><li> <p><code>oct12_incl = 0 (0x0)</code></p> </li><li> <p><code>oct13_incl = 0 (0x0)</code></p> </li><li> <p><code>oct14_incl = 0 (0x0)</code></p> </li><li> <p><code>oct15_incl = 0 (0x0)</code></p> </li><li> <p><code>access_point //接入方式，或者apn信息 apn 为ims</code></p> </li><li> <p><code>num_acc_pt_val = 4 (0x4)</code></p> </li><li> <p><code>acc_pt_name_val[0] = 3 (0x3) (length)</code></p> </li><li> <p><code>acc_pt_name_val[1] = 105 (0x69) (i)</code></p> </li><li> <p><code>acc_pt_name_val[2] = 109 (0x6d) (m)</code></p> </li><li> <p><code>acc_pt_name_val[3] = 115 (0x73) (s)</code></p> </li><li> <p><code>pdn_addr //pdn 地址</code></p> </li><li> <p><code>pdn_addr_len = 9 (0x9)</code></p> </li><li> <p><code>pdn_type = 2 (0x2) (IPv6)</code></p> </li><li> <p><code>ipv6_interface_id = 0x000000000000001 (0:0:0:1)</code></p> </li><li> <p><code>trans_id_incl = 1 (0x1)</code></p> </li><li> <p><code>trans_id</code></p> </li><li> <p><code>length = 1 (0x1)</code></p> </li><li> <p><code>ti_flag = 0 (0x0)</code></p> </li><li> <p><code>ti_value = 0 (0x0)</code></p> </li><li> <p><code>qos_incl = 0 (0x0)</code></p> </li><li> <p><code>llc_sapi_incl = 0 (0x0)</code></p> </li><li> <p><code>radio_priority_incl = 0 (0x0)</code></p> </li><li> <p><code>pkt_flow_id_incl = 0 (0x0)</code></p> </li><li> <p><code>apn_ambr_incl = 0 (0x0)</code></p> </li><li> <p><code>esm_cause_incl = 1 (0x1)</code></p> </li><li> <p><code>esm_cause</code></p> </li><li> <p><code>esm_cause = 51 (0x33) (PDN type IPv6 only allowed)</code></p> </li><li> <p><code>prot_config_incl = 1 (0x1)</code></p> </li><li> <p><code>prot_config</code></p> </li><li> <p><code>ext = 1 (0x1)</code></p> </li><li> <p><code>conf_prot = 0 (0x0)</code></p> </li><li> <p><code>num_recs = 0 (0x0)</code></p> </li><li> <p><code>num_recs2 = 2 (0x2)</code></p> </li><li> <p><code>sm_container[0]</code></p> </li><li> <p><code>container_id = 3 (0x3) (DNS Server IPv6 Address)</code></p> </li><li> <p><code>container_len = 16 (0x10)</code></p> </li><li> <p><code>address = 0xfc01ababcdcd6fee0000000000000001 (fc01:abab:cdcd:6fee:0:0:0:1)</code></p> </li><li> <p><code>sm_container[1]</code></p> </li><li> <p><code>container_id = 1 (0x1) (P-CSCF IPV6 Address)</code></p> </li><li> <p><code>container_len = 16 (0x10)</code></p> </li><li> <p><code>address = 0xfc01ababcdcd6fee0000000000000001 (fc01:abab:cdcd:6fee:0:0:0:1)</code></p> </li><li> <p><code>connectivity_type_incl = 0 (0x0)</code></p> </li><li> <p><code>wlan_offload_acceptability_incl = 0 (0x0)</code></p> </li><li> <p><code>nbifom_incl = 0 (0x0)</code></p> </li><li> <p><code>header_compression_config_inclu = 0 (0x0)</code></p> </li><li> <p><code>ctrl_plane_only_ind_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_prot_config_incl = 0 (0x0)</code></p> </li><li> <p><code>serv_plmn_rate_ctrl_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_apn_ambr_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_eps_qos_incl = 0 (0x0)</code></p> </li><li> <p><code>guti_incl = 1 (0x1)</code></p> </li><li> <p><code>guti //guti标识</code></p> </li><li> <p><code>id_type = 6 (0x6) (GUTI)</code></p> </li><li> <p><code>odd_even_ind = 0 (0x0)</code></p> </li><li> <p><code>Guti_1111 = 15 (0xf)</code></p> </li><li> <p><code>mcc_1 = 3 (0x3)</code></p> </li><li> <p><code>mcc_2 = 1 (0x1)</code></p> </li><li> <p><code>mcc_3 = 1 (0x1)</code></p> </li><li> <p><code>mnc_3 = 0 (0x0)</code></p> </li><li> <p><code>mnc_1 = 4 (0x4)</code></p> </li><li> <p><code>mnc_2 = 8 (0x8)</code></p> </li><li> <p><code>MME_group_id = 0 (0x0)</code></p> </li><li> <p><code>MME_code = 0 (0x0)</code></p> </li><li> <p><code>m_tmsi = 0 (0x0)</code></p> </li><li> <p><code>loc_id_incl = 0 (0x0)</code></p> </li><li> <p><code>ms_id_incl = 0 (0x0)</code></p> </li><li> <p><code>emm_cause_incl = 1 (0x1)</code></p> </li><li> <p><code>emm_cause</code></p> </li><li> <p><code>cause_value = 18 (0x12) (CS domain not available)</code></p> </li><li> <p><code>T3402_incl = 0 (0x0)</code></p> </li><li> <p><code>T3423_incl = 0 (0x0)</code></p> </li><li> <p><code>equ_plmns_incl = 0 (0x0)</code></p> </li><li> <p><code>emergnecy_num_list_incl = 0 (0x0)</code></p> </li><li> <p><code>eps_netwk_feature_support_incl = 1 (0x1)</code></p> </li><li> <p><code>eps_netwk_feature_support //网络特性描述</code></p> </li><li> <p><code>length = 1 (0x1)</code></p> </li><li> <p><code>CPCIoT = 0 (0x0)</code></p> </li><li> <p><code>ERwoPDN = 0 (0x0)</code></p> </li><li> <p><code>ESRPS = 0 (0x0)</code></p> </li><li> <p><code>CS_LCS = 0 (0x0) (No info about support of loc service via cs is available)</code></p> </li><li> <p><code>EPC_LCS = 0 (0x0) (Location Services via EPC not supported)</code></p> </li><li> <p><code>EMC_BS = 1 (0x1) (Emergency bearer services in S1 Mode supported)</code></p> </li><li> <p><code>IMSVoPS = 1 (0x1) (IMS Vo PS Session in S1 Mode supported)</code></p> </li><li> <p><code>add_update_result_incl = 0 (0x0)</code></p> </li><li> <p><code>t3412_ext_incl = 0 (0x0)</code></p> </li><li> <p><code>t3324_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_drx_par_incl = 0 (0x0)</code></p> </li><li> <p><code>dcn_id_incl = 0 (0x0)</code></p> </li><li> <p><code>sms_srvc_status_incl = 0 (0x0)</code></p> </li><li> <p><code>non_3gpp_access_emerg_num_policy_incl = 0 (0x0)</code></p> </li><li> <p><code>t3448_incl = 0 (0x0)</code></p> </li><li> <p><code>nwk_policy_incl = 0 (0x0)</code></p> </li><li> <p><code>t3447_ext_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_emergency_number_incl = 0 (0x0)</code></p> </li><li> <p><code>cipher_ket_data_incl = 0 (0x0)</code></p> </li></ol> 
<p>5.建立默认承载<br> 消息中包括默认承载id，qos参数，分配的ip地址，dns地址，默认apn，来自hss的签约信息。</p> 
<p>备注qci含义：<br> GBR<br> QCI=1: Example Services: Conversational voicemscbsc<br> 　　QCI=2: Conversational Video (Live streaming)<br> 　　QCI=3: Real Time Gaming<br> 　　QCI=4: Non-conversational voice (buffered streaming)<br> Non-GBR<br> QCI=5: IMS signaling<br> 　　QCI=6: Video (buffered streaming), TCP-based (e.g. www, email, chat, ftp, p2p file sharing, progressive video,etc)<br> 　　QCI=7: Voice, Video (live streaming), interactive gaming<br> 　　QCI=8: Video (buffered streaming), TCP-based (e.g. www, email, chat, ftp, p2p file sharing, progressive video,etc)<br> 　　QCI=9: Video (buffered streaming), TCP-based (e.g. www, email, chat, ftp, p2p file sharing, progressive video,etc)</p> 
<pre></pre> 
<ol><li> <p><code>22:52:13.806 [0xB0E2] LTE NAS ESM Plain OTA Incoming Message</code></p> </li><li> <p><code>pkt_version = 1 (0x1)</code></p> </li><li> <p><code>rel_number = 9 (0x9)</code></p> </li><li> <p><code>rel_version_major = 5 (0x5)</code></p> </li><li> <p><code>rel_version_minor = 0 (0x0)</code></p> </li><li> <p><code>eps_bearer_id_or_skip_id = 5 (0x5)</code></p> </li><li> <p><code>prot_disc = 2 (0x2) (EPS session management messages)</code></p> </li><li> <p><code>trans_id = 1 (0x1)</code></p> </li><li> <p><code>msg_type = 193 (0xc1) (Activate default EPS bearer context request)</code></p> </li><li> <p><code>lte_esm_msg</code></p> </li><li> <p><code>act_def_eps_bearer_context_req</code></p> </li><li> <p><code>eps_qos //qos参数</code></p> </li><li> <p><code>qci = 5 (0x5) (QC5)</code></p> </li><li> <p><code>oct4_incl = 0 (0x0)</code></p> </li><li> <p><code>oct5_incl = 0 (0x0)</code></p> </li><li> <p><code>oct6_incl = 0 (0x0)</code></p> </li><li> <p><code>oct7_incl = 0 (0x0)</code></p> </li><li> <p><code>oct8_incl = 0 (0x0)</code></p> </li><li> <p><code>oct9_incl = 0 (0x0)</code></p> </li><li> <p><code>oct10_incl = 0 (0x0)</code></p> </li><li> <p><code>oct11_incl = 0 (0x0)</code></p> </li><li> <p><code>oct12_incl = 0 (0x0)</code></p> </li><li> <p><code>oct13_incl = 0 (0x0)</code></p> </li><li> <p><code>oct14_incl = 0 (0x0)</code></p> </li><li> <p><code>oct15_incl = 0 (0x0)</code></p> </li><li> <p><code>access_point //接入apn ims</code></p> </li><li> <p><code>num_acc_pt_val = 4 (0x4)</code></p> </li><li> <p><code>acc_pt_name_val[0] = 3 (0x3) (length)</code></p> </li><li> <p><code>acc_pt_name_val[1] = 105 (0x69) (i)</code></p> </li><li> <p><code>acc_pt_name_val[2] = 109 (0x6d) (m)</code></p> </li><li> <p><code>acc_pt_name_val[3] = 115 (0x73) (s)</code></p> </li><li> <p><code>pdn_addr //分配的ip地址</code></p> </li><li> <p><code>pdn_addr_len = 9 (0x9)</code></p> </li><li> <p><code>pdn_type = 2 (0x2) (IPv6)</code></p> </li><li> <p><code>ipv6_interface_id = 0x000000000000001 (0:0:0:1)</code></p> </li><li> <p><code>trans_id_incl = 1 (0x1)</code></p> </li><li> <p><code>trans_id</code></p> </li><li> <p><code>length = 1 (0x1)</code></p> </li><li> <p><code>ti_flag = 0 (0x0)</code></p> </li><li> <p><code>ti_value = 0 (0x0)</code></p> </li><li> <p><code>qos_incl = 0 (0x0)</code></p> </li><li> <p><code>llc_sapi_incl = 0 (0x0)</code></p> </li><li> <p><code>radio_priority_incl = 0 (0x0)</code></p> </li><li> <p><code>pkt_flow_id_incl = 0 (0x0)</code></p> </li><li> <p><code>apn_ambr_incl = 0 (0x0)</code></p> </li><li> <p><code>esm_cause_incl = 1 (0x1)</code></p> </li><li> <p><code>esm_cause</code></p> </li><li> <p><code>esm_cause = 51 (0x33) (PDN type IPv6 only allowed)</code></p> </li><li> <p><code>prot_config_incl = 1 (0x1)</code></p> </li><li> <p><code>prot_config</code></p> </li><li> <p><code>ext = 1 (0x1)</code></p> </li><li> <p><code>conf_prot = 0 (0x0)</code></p> </li><li> <p><code>num_recs = 0 (0x0)</code></p> </li><li> <p><code>num_recs2 = 2 (0x2)</code></p> </li><li> <p><code>sm_container[0]</code></p> </li><li> <p><code>container_id = 3 (0x3) (DNS Server IPv6 Address)</code></p> </li><li> <p><code>container_len = 16 (0x10)</code></p> </li><li> <p><code>address = 0xfc01ababcdcd6fee0000000000000001 (fc01:abab:cdcd:6fee:0:0:0:1)</code></p> </li><li> <p><code>sm_container[1]</code></p> </li><li> <p><code>container_id = 1 (0x1) (P-CSCF IPV6 Address)</code></p> </li><li> <p><code>container_len = 16 (0x10)</code></p> </li><li> <p><code>address = 0xfc01ababcdcd6fee0000000000000001 (fc01:abab:cdcd:6fee:0:0:0:1)</code></p> </li><li> <p><code>connectivity_type_incl = 0 (0x0)</code></p> </li><li> <p><code>wlan_offload_acceptability_incl = 0 (0x0)</code></p> </li><li> <p><code>nbifom_incl = 0 (0x0)</code></p> </li><li> <p><code>header_compression_config_inclu = 0 (0x0)</code></p> </li><li> <p><code>ctrl_plane_only_ind_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_prot_config_incl = 0 (0x0)</code></p> </li><li> <p><code>serv_plmn_rate_ctrl_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_apn_ambr_incl = 0 (0x0)</code></p> </li><li> <p><code>ext_eps_qos_incl = 0 (0x0)</code></p> </li></ol> 
<p>最后终端给网络发送一个完成附着的响应，attach complete 消息中没有携带任何具体信息，可以理解为给Mme的礼貌性的回应。</p> 
<p>至此，关于lte注册流程应该算是有个简单的了解了。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0db559b1a4668b384d8a6a986c88e0ef/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序 ---在Vscode上编辑，微信开发者工具上预览，快速上手</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d3c0a18a1ddf94f5cfbda29e02f92034/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机网络学习笔记（二）---运输层，应用层</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>