<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android应用：实现网络加载商品数据【OKHttp、Glide、Gson】 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android应用：实现网络加载商品数据【OKHttp、Glide、Gson】" />
<meta property="og:description" content="实现网络加载商品数据的功能：
1、在AndroidManifest.xml中声明网络权限；
2、在app/build.gradle中添加okhttp, glide, gson等必需的第3方库；
3、在MainActivity中通过OkHttpClient连接给定的Web服务，获取商品数据；对应的json数据为本地的json文件，名字为goods_list_data.json;数据内容为：[
{“id”:1,“count”:“5.4万”,“goodsName”:“富士拍立得相机”,“goodsPic”:“/img/polaroid.png”},
{“id”:2,“count”:“5.3万”,“goodsName”:“格兰仕微波炉”,“goodsPic”:“/img/microwave_oven.png”},
{“id”:3,“count”:“1.4万”,“goodsName”:“新国标电动车”,“goodsPic”:“/img/electric_vehicle.png”},
{“id”:4,“count”:“1.6万”,“goodsName”:“官方订制投影仪”,“goodsPic”:“/img/projector.png”},
{“id”:5,“count”:“0.4万”,“goodsName”:“美的35L烤箱”,“goodsPic”:“/img/oven.png”},
{“id”:6,“count”:“3.3万”,“goodsName”:“儿童学习桌”,“goodsPic”:“/img/learning_table.png”}
]
对应的图片也存储在本地的img文件中
4、使用gson库解析JSON格式的商品数据，转成java bean商品数据对象（Goods类）的列表；
5、创建MsgHandler类，用于异步更新商品列表；
6、在GoodsAdapter中通过glide控件加载并显示网络图片。
1.部署网络图片资源 首先，我们需要将对应的文件部署在一个简易的服务器（Tomcat）中，服务器中存放数据的目录结构如下图所示
E:. ├─goods │ └─img │ └─goods_list_data.json └─WEB-INF 其中，ROOT目录在&#34;apache-tomcat-9.0.65-windows-x64\webapps\ROOT&#34;下，表示Tomcat服务器的根目录。
goods文件夹存放的是商品列表所用到的数据其中goods\img文件夹存放的是商品的图片资源goods_list_data.json文件存放的是商品列表的数据，具体如下所示 [ {&#34;id&#34;:1,&#34;count&#34;:&#34;5.4万&#34;,&#34;goodsName&#34;:&#34;富士拍立得相机&#34;,&#34;goodsPic&#34;:&#34;/img/polaroid.png&#34;}, {&#34;id&#34;:2,&#34;count&#34;:&#34;5.3万&#34;,&#34;goodsName&#34;:&#34;格兰仕微波炉&#34;,&#34;goodsPic&#34;:&#34;/img/microwave_oven.png&#34;}, {&#34;id&#34;:3,&#34;count&#34;:&#34;1.4万&#34;,&#34;goodsName&#34;:&#34;新国标电动车&#34;,&#34;goodsPic&#34;:&#34;/img/electric_vehicle.png&#34;}, {&#34;id&#34;:4,&#34;count&#34;:&#34;1.6万&#34;,&#34;goodsName&#34;:&#34;官方订制投影仪&#34;,&#34;goodsPic&#34;:&#34;/img/projector.png&#34;}, {&#34;id&#34;:5,&#34;count&#34;:&#34;0.4万&#34;,&#34;goodsName&#34;:&#34;美的35L烤箱&#34;,&#34;goodsPic&#34;:&#34;/img/oven.png&#34;}, {&#34;id&#34;:6,&#34;count&#34;:&#34;3.3万&#34;,&#34;goodsName&#34;:&#34;儿童学习桌&#34;,&#34;goodsPic&#34;:&#34;/img/learning_table.png&#34;} ] 启动tomcat后，可访问http://localhost:8080/goods/goods_list_data.json展示信息
2.创建项目 打开Android Studio，并创建一个新的Android项目。命名项目并选择适当的目标API级别和设备类型。创建一个新的空白活动（Empty Activity）。 3.在AndroidManifest.xml中声明网络权限 在 AndroidManifest.xml 文件中添加以下权限声明，以便应用可以访问网络：
&lt;uses-permission android:name=&#34;android.permission.INTERNET&#34; /&gt; 由于网络安全策略导致的问题，即不允许在明文（非加密）的情况下与 localhost 进行通信。这通常涉及到网络安全配置，特别是在 Android 9.0（API级别28）及更高版本中引入了更严格的网络安全策略；因此我们还需要进行配置网络安全配置文件
解决此问题的方法之一是使用 HTTPS 协议而不是 HTTP，因为 HTTPS 是加密的。
如果在本地测试应用，可以使用 Android 的网络安全配置文件来允许明文通信。
在 res/xml 文件夹中创建一个名为 network_security_config.xml 的网络安全配置文件。如果该文件夹不存在，请手动创建。 &lt;?xml version=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3a7af2bce40b744d7277cb20afa0701e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-10-28T21:42:19+08:00" />
<meta property="article:modified_time" content="2023-10-28T21:42:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android应用：实现网络加载商品数据【OKHttp、Glide、Gson】</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>实现网络加载商品数据的功能：</p> 
<p>1、在AndroidManifest.xml中声明网络权限；</p> 
<p>2、在app/build.gradle中添加okhttp, glide, gson等必需的第3方库；</p> 
<p>3、在MainActivity中通过OkHttpClient连接给定的Web服务，获取商品数据；对应的json数据为本地的json文件，名字为goods_list_data.json;数据内容为：[<br> {“id”:1,“count”:“5.4万”,“goodsName”:“富士拍立得相机”,“goodsPic”:“/img/polaroid.png”},<br> {“id”:2,“count”:“5.3万”,“goodsName”:“格兰仕微波炉”,“goodsPic”:“/img/microwave_oven.png”},<br> {“id”:3,“count”:“1.4万”,“goodsName”:“新国标电动车”,“goodsPic”:“/img/electric_vehicle.png”},<br> {“id”:4,“count”:“1.6万”,“goodsName”:“官方订制投影仪”,“goodsPic”:“/img/projector.png”},<br> {“id”:5,“count”:“0.4万”,“goodsName”:“美的35L烤箱”,“goodsPic”:“/img/oven.png”},<br> {“id”:6,“count”:“3.3万”,“goodsName”:“儿童学习桌”,“goodsPic”:“/img/learning_table.png”}<br> ]<br> 对应的图片也存储在本地的img文件中</p> 
<p>4、使用gson库解析JSON格式的商品数据，转成java bean商品数据对象（Goods类）的列表；</p> 
<p>5、创建MsgHandler类，用于异步更新商品列表；</p> 
<p>6、在GoodsAdapter中通过glide控件加载并显示网络图片。</p> 
<hr> 
<h3><a id="1_23"></a>1.部署网络图片资源</h3> 
<p>首先，我们需要将对应的文件部署在一个简易的服务器（Tomcat）中，服务器中存放数据的目录结构如下图所示</p> 
<pre><code>E:.
├─goods
│  └─img
│  └─goods_list_data.json
└─WEB-INF
</code></pre> 
<p>其中，ROOT目录在<code>"apache-tomcat-9.0.65-windows-x64\webapps\ROOT"</code>下，表示Tomcat服务器的根目录。</p> 
<ul><li>goods文件夹存放的是商品列表所用到的数据</li><li>其中goods\img文件夹存放的是商品的<strong>图片资源</strong></li><li><code>goods_list_data.json</code>文件存放的是商品列表的数据，具体如下所示</li></ul> 
<pre><code class="prism language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{<!-- --></span><span class="token string-property property">"id"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string-property property">"count"</span><span class="token operator">:</span><span class="token string">"5.4万"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsName"</span><span class="token operator">:</span><span class="token string">"富士拍立得相机"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsPic"</span><span class="token operator">:</span><span class="token string">"/img/polaroid.png"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token string-property property">"id"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string-property property">"count"</span><span class="token operator">:</span><span class="token string">"5.3万"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsName"</span><span class="token operator">:</span><span class="token string">"格兰仕微波炉"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsPic"</span><span class="token operator">:</span><span class="token string">"/img/microwave_oven.png"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token string-property property">"id"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string-property property">"count"</span><span class="token operator">:</span><span class="token string">"1.4万"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsName"</span><span class="token operator">:</span><span class="token string">"新国标电动车"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsPic"</span><span class="token operator">:</span><span class="token string">"/img/electric_vehicle.png"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token string-property property">"id"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string-property property">"count"</span><span class="token operator">:</span><span class="token string">"1.6万"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsName"</span><span class="token operator">:</span><span class="token string">"官方订制投影仪"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsPic"</span><span class="token operator">:</span><span class="token string">"/img/projector.png"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token string-property property">"id"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string-property property">"count"</span><span class="token operator">:</span><span class="token string">"0.4万"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsName"</span><span class="token operator">:</span><span class="token string">"美的35L烤箱"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsPic"</span><span class="token operator">:</span><span class="token string">"/img/oven.png"</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span><span class="token string-property property">"id"</span><span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string-property property">"count"</span><span class="token operator">:</span><span class="token string">"3.3万"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsName"</span><span class="token operator">:</span><span class="token string">"儿童学习桌"</span><span class="token punctuation">,</span><span class="token string-property property">"goodsPic"</span><span class="token operator">:</span><span class="token string">"/img/learning_table.png"</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span>

</code></pre> 
<p>启动tomcat后，可访问<code>http://localhost:8080/goods/goods_list_data.json</code>展示信息<br> <img src="https://images2.imgbox.com/bd/da/XXBsAE3s_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_49"></a>2.创建项目</h3> 
<ol><li>打开Android Studio，并创建一个新的Android项目。</li><li>命名项目并选择适当的目标API级别和设备类型。</li><li>创建一个新的空白活动（Empty Activity）。</li></ol> 
<h3><a id="3AndroidManifestxml_53"></a>3.在AndroidManifest.xml中声明网络权限</h3> 
<p>在 AndroidManifest.xml 文件中添加以下权限声明，以便应用可以访问网络：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uses-permission</span> <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>android.permission.INTERNET<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/23/12/qWXGBPoj_o.png" alt="在这里插入图片描述">由于网络安全策略导致的问题，即不允许在明文（非加密）的情况下与 localhost 进行通信。这通常涉及到网络安全配置，特别是在 Android 9.0（API级别28）及更高版本中引入了更严格的网络安全策略；因此我们还需要进行<strong>配置网络安全配置文件</strong></p> 
<p>解决此问题的方法之一是使用 HTTPS 协议而不是 HTTP，因为 HTTPS 是加密的。</p> 
<p>如果在本地测试应用，可以使用 <code>Android 的网络安全配置文件</code>来允许明文通信。</p> 
<ol><li>在 <code>res/xml</code> 文件夹中创建一个名为 <code>network_security_config.xml</code> 的网络安全配置文件。如果该文件夹不存在，请手动创建。</li></ol> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>network-security-config</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base-config</span> <span class="token attr-name">cleartextTrafficPermitted</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>trust-anchors</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>certificates</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>system<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>certificates</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>trust-anchors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>base-config</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>network-security-config</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/bf/53/HgM4Qv5o_o.png" alt="在这里插入图片描述"></p> 
<ol start="2"><li>在 <code>AndroidManifest.xml</code> 文件中，将这个网络安全配置文件应用于你的应用。在 <code>&lt;application&gt;</code> 元素内添加 <code>android:networkSecurityConfig</code> 属性，如下所示：</li></ol> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>application</span>
    <span class="token attr-name"><span class="token namespace">android:</span>networkSecurityConfig</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@xml/network_security_config<span class="token punctuation">"</span></span>
    <span class="token attr-name">&lt;!--</span> <span class="token attr-name">其他属性和元素</span> <span class="token attr-name">--</span><span class="token punctuation">&gt;</span></span>
    &gt;
    <span class="token comment">&lt;!-- 其他元素 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>application</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/ba/04/26p0JWP4_o.png" alt="在这里插入图片描述"></p> 
<p>这将允许你的应用在本地开发和测试过程中与 localhost 进行明文通信。但请注意，在生产环境中，强烈建议使用 HTTPS 以确保数据的安全传输。</p> 
<p>如果你使用的是模拟器或真机设备，请确保重新构建和部署应用，以使配置生效。此外，如果你的服务器正在本地运行，请确保服务器端口和地址正确。</p> 
<h3><a id="4_96"></a>4.添加依赖库</h3> 
<p>在<code>app/build.gradle</code>文件中添加OkHttp、Glide、Gson依赖库。</p> 
<pre><code class="prism language-groovy">    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"com.squareup.okhttp3:okhttp:4.9.1"</span></span><span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"com.squareup.okhttp3:logging-interceptor:4.9.1"</span></span><span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"com.google.code.gson:gson:2.8.8"</span></span><span class="token punctuation">)</span>
    <span class="token function">implementation</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"com.github.bumptech.glide:glide:4.12.0"</span></span><span class="token punctuation">)</span>
    <span class="token function">annotationProcessor</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">"com.github.bumptech.glide:compiler:4.12.0"</span></span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/b7/24/6knI1Dqe_o.png" alt="在这里插入图片描述"></p> 
<p><strong>进行同步</strong><br> <img src="https://images2.imgbox.com/07/29/LexyEfmo_o.png" alt="在这里插入图片描述"><br> 等待安装依赖……</p> 
<h3><a id="5XML_113"></a>5.创建一个XML布局文件</h3> 
<p>在<code>res/layout</code>文件夹中创建一个布局文件，例如<code>activity_main.xml</code>，用于显示商品数据。</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>androidx.recyclerview.widget.RecyclerView</span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/recyclerView<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/15/c5/bS8kOjhe_o.png" alt="在这里插入图片描述"><br> <strong>创建一个XML布局文件用于显示商品项</strong><br> 在<code>res/layout</code>文件夹中创建一个布局文件，例如<code>item_goods.xml</code>，用于显示每个商品项。</p> 
<pre><code class="prism language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>padding</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>16dp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ImageView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/goodsImageView<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100dp<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>scaleType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>centerCrop<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TextView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>@+id/goodsNameTextView<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>wrap_content<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_marginTop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8dp<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/27/69/DqHvkGFA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="6Java_Bean_153"></a>6.创建一个Java Bean类</h3> 
<p>创建一个<code>Goods</code>类，用于表示商品数据。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Goods</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> count<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> goodsName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> goodsPic<span class="token punctuation">;</span>

    <span class="token comment">// Getters and setters</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="7_167"></a>7.创建一个适配器类</h3> 
<p>创建一个自定义适配器类<code>GoodsAdapter</code>，用于将商品数据绑定到RecyclerView中。</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GoodsAdapter</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>Adapter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GoodsAdapter<span class="token punctuation">.</span>ViewHolder</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Goods</span><span class="token punctuation">&gt;</span></span> goodsList<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">GoodsAdapter</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Goods</span><span class="token punctuation">&gt;</span></span> goodsList<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>goodsList <span class="token operator">=</span> goodsList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ViewHolder</span> <span class="token function">onCreateViewHolder</span><span class="token punctuation">(</span><span class="token class-name">ViewGroup</span> parent<span class="token punctuation">,</span> <span class="token keyword">int</span> viewType<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">View</span> view <span class="token operator">=</span> <span class="token class-name">LayoutInflater</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>item_goods<span class="token punctuation">,</span> parent<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span>view<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onBindViewHolder</span><span class="token punctuation">(</span><span class="token class-name">ViewHolder</span> holder<span class="token punctuation">,</span> <span class="token keyword">int</span> position<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">Goods</span> goods <span class="token operator">=</span> goodsList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        holder<span class="token punctuation">.</span>goodsNameTextView<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">getGoodsName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Load and display image using Glide</span>
        <span class="token class-name">Glide</span><span class="token punctuation">.</span><span class="token keyword">with</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>goods<span class="token punctuation">.</span><span class="token function">getGoodsPic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">into</span><span class="token punctuation">(</span>holder<span class="token punctuation">.</span>goodsImageView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>goodsList <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> goodsList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 返回0表示没有数据</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ViewHolder</span> <span class="token keyword">extends</span> <span class="token class-name">RecyclerView<span class="token punctuation">.</span>ViewHolder</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">TextView</span> goodsNameTextView<span class="token punctuation">;</span>
        <span class="token class-name">ImageView</span> goodsImageView<span class="token punctuation">;</span>

        <span class="token class-name">ViewHolder</span><span class="token punctuation">(</span><span class="token class-name">View</span> itemView<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>itemView<span class="token punctuation">)</span><span class="token punctuation">;</span>
            goodsNameTextView <span class="token operator">=</span> itemView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>goodsNameTextView<span class="token punctuation">)</span><span class="token punctuation">;</span>
            goodsImageView <span class="token operator">=</span> itemView<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>goodsImageView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="8_221"></a>8.实现网络加载数据</h3> 
<p>在<code>MainActivity.java</code>中实现网络加载商品数据的功能。请确保你的<code>goods_list_data.json</code>文件位于<code>app/src/main/assets</code>文件夹下。</p> 
<pre><code class="prism language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>leo<span class="token punctuation">.</span>network</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Bundle</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Handler</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>os<span class="token punctuation">.</span></span><span class="token class-name">Message</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Log</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">android<span class="token punctuation">.</span>view<span class="token punctuation">.</span></span><span class="token class-name">View</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span></span><span class="token class-name">AppCompatActivity</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>recyclerview<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">LinearLayoutManager</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">androidx<span class="token punctuation">.</span>recyclerview<span class="token punctuation">.</span>widget<span class="token punctuation">.</span></span><span class="token class-name">RecyclerView</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">Gson</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Arrays</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">okhttp3<span class="token punctuation">.</span></span><span class="token class-name">OkHttpClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">okhttp3<span class="token punctuation">.</span></span><span class="token class-name">Request</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">okhttp3<span class="token punctuation">.</span></span><span class="token class-name">Response</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">private</span> <span class="token class-name">RecyclerView</span> recyclerView<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">GoodsAdapter</span> adapter<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Goods</span><span class="token punctuation">&gt;</span></span> goodsList<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token constant">MSG_UPDATE_DATA</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> msgHandler <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Handler<span class="token punctuation">.</span>Callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token class-name">Message</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>msg<span class="token punctuation">.</span>what <span class="token operator">==</span> <span class="token constant">MSG_UPDATE_DATA</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                adapter<span class="token punctuation">.</span><span class="token function">notifyDataSetChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        recyclerView <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>id<span class="token punctuation">.</span>recyclerView<span class="token punctuation">)</span><span class="token punctuation">;</span>
        recyclerView<span class="token punctuation">.</span><span class="token function">setLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LinearLayoutManager</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GoodsAdapter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> goodsList<span class="token punctuation">)</span><span class="token punctuation">;</span>
        recyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Fetch data from the network</span>
        <span class="token function">fetchGoodsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">fetchGoodsData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token class-name">OkHttpClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OkHttpClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Request</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token string">"http://10.0.2.2:8080/goods/goods_list_data.json"</span><span class="token punctuation">)</span>
                            <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Response</span> response <span class="token operator">=</span> client<span class="token punctuation">.</span><span class="token function">newCall</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span><span class="token function">isSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                        <span class="token class-name">String</span> jsonData <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"Network"</span><span class="token punctuation">,</span> <span class="token string">"Data fetched successfully: "</span> <span class="token operator">+</span> jsonData<span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">Goods</span><span class="token punctuation">[</span><span class="token punctuation">]</span> goodsArray <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>jsonData<span class="token punctuation">,</span> <span class="token class-name">Goods</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">// 补全图片URL</span>
                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Goods</span> goods <span class="token operator">:</span> goodsArray<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            goods<span class="token punctuation">.</span><span class="token function">setGoodsPic</span><span class="token punctuation">(</span><span class="token string">"http://10.0.2.2:8080//goods"</span> <span class="token operator">+</span> goods<span class="token punctuation">.</span><span class="token function">getGoodsPic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>

                        goodsList <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>goodsArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        msgHandler<span class="token punctuation">.</span><span class="token function">sendEmptyMessage</span><span class="token punctuation">(</span><span class="token constant">MSG_UPDATE_DATA</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                        <span class="token comment">// 切换到主线程以更新UI</span>
                        <span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                            <span class="token annotation punctuation">@Override</span>
                            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                                <span class="token comment">// 设置RecyclerView的适配器</span>
                                adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GoodsAdapter</span><span class="token punctuation">(</span><span class="token class-name">MainActivity</span><span class="token punctuation">.</span><span class="token keyword">this</span><span class="token punctuation">,</span> goodsList<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                recyclerView<span class="token punctuation">.</span><span class="token function">setAdapter</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span><span class="token string">"Network"</span><span class="token punctuation">,</span> <span class="token string">"Error fetching data: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre> 
<p>替换<code>"URL_TO_YOUR_JSON_DATA"</code>为你的本地JSON文件的路径，例如：<code>http://localhost:8080/goods/goods_list_data.json</code>。</p> 
<blockquote> 
 <p>注意，如果你是本地部署的tomcat，需要在Android默认的虚拟器中访问，需要改为“<code>10.0.2.2</code>”</p> 
</blockquote> 
<p>以下是对代码的一些说明：</p> 
<ol><li> <p>在 <code>fetchGoodsData()</code> 方法中创建了一个新的线程来执行网络请求。这是一个良好的实践，因为它确保网络请求<strong>不会阻塞主线程</strong>，以避免应用的响应性问题。</p> </li><li> <p>在网络请求成功后使用 Gson 库将 JSON 数据解析为 <code>Goods</code> 对象的数组，并补全了图片的URL。这确保了 Glide 能够正确加载图片。</p> </li><li> <p>使用 <code>Handler</code> 来更新UI，因为 <mark>UI更新必须在主线程中执行</mark>。</p> </li><li> <p>在网络请求失败时，通过 <code>Log.e</code> 打印了错误消息，这有助于调试和问题排查。</p> </li></ol> 
<p><strong>实现效果</strong><br> <img src="https://images2.imgbox.com/d7/f5/nRh9ibjd_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d2f224dacc24ec893fd313a513fde716/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【PyQt学习篇 · ②】：QObject - 神奇的对象管理工具</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/79b51f9bc29441e22c274fdc4e853350/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">洗衣机平台设计思路</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>