<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>AUTOSAR CAN 通讯栈 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="AUTOSAR CAN 通讯栈" />
<meta property="og:description" content="AUTOSAR 发展历史
AUTOSAR CP
AUTOSAR AP
AUTOSAR通信栈位于运行时环境（RTE）与微控制器抽象层（MCAL）之间，其可以简化ECU间的通信服务，
实现不同类型或速率总线间的数据交互。在AUTOSAR通信栈中，位于服务层的有通信模块(Communication，
Com)，诊断通信管理模块（Diagnositic Communication Manager，Dem）、协议数据单元路由模(Protocol Data Unit Router，PduR），协议数据单元复用模块（I-PDU Multiplexer，IpduM）、总线相关的传输模块（如CanTp，LinTp等）以及通信与网络管理相关的模块；位于ECU抽象层的是与总线相关的接口模块（如CanIf，LinIf等）；位于微控制器抽象层的是与总线相关的驱动模块（如Can，Lin等）
AUTOSAR通讯栈对应用层隐藏了与总线相关的协议和报文的属性，以基本的CAN为例：发送数据机制为
RTE-&gt;COM-&gt;PduR-&gt;Canif-&gt;CANDriver ，过程如下：
Com模块获取应用层的信号，经过封装为I-PDU （Interaction Layer Protocol Data Unit）发送到PduR模块
PduR模块路由协议中所指定的I-PDU目标接收模块，将接收的I-PDU经过处理发送给Canif
Canif将信号以L-PDU（Data Link layer Protocol Data Unit）的形式发送给CAN驱动模块
AUTOSAR CAN 通讯模型
COM模块
Com模块位于RTE与PduR之间，其主要功能有：
① 将信号装载到 I-PDU 中发送，从接收到的 I-PDU 中解析出信号 ② 提供信号路由功能，将接收到的 I-PDU 中的信号打包到发送 I-PDU 中 ③ 通讯发送控制（自动 / 停止 I-PDU 组） ④ 发送请求的应答 每个Com I-PDU 需要设定I-PDU的传输方向（ComIPduDirection）、信号处理方式 ComIPduSignalProcessing、类型 ComIPduSignalRef等
PDUR
PduR模块是主要为通讯接口模块，传输协议模块、诊断通讯服务管理模块以及通讯模块提供I-PDU的路由服务，它在通讯协议中起着承上启下的作用，为上层服务基础软件和应用层屏蔽网络细节，使得上层基础软件模块和应用层不用关心运行于那种总线网络之上。同时，PduR模块提供了基于I-PDU的网关功能，使得不同总线之间的通信成为可能
I-PDU 交互层对应的PDU CANTP层往上的都采用的I-PDU
N-PDU 网络层对应的PDU canif与TP层依赖关系 采用N-PDU" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/903254bbacb932e4f4614b5d59f04a58/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-04T16:06:57+08:00" />
<meta property="article:modified_time" content="2023-09-04T16:06:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">AUTOSAR CAN 通讯栈</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><img alt="" height="677" src="https://images2.imgbox.com/35/97/353tVrnZ_o.png" width="1111"></p> 
<p>                                       AUTOSAR 发展历史</p> 
<p><img alt="" height="845" src="https://images2.imgbox.com/e9/9c/clRk3Mcq_o.png" width="1200"></p> 
<p>                                                 AUTOSAR CP</p> 
<p><img alt="" height="892" src="https://images2.imgbox.com/a3/af/VlImzQwp_o.png" width="1200"></p> 
<p>                                        AUTOSAR   AP</p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">AUTOSAR</span><span style="color:#000000;">通信栈位于运行时环境（</span><span style="color:#000000;">RTE</span><span style="color:#000000;">）与微控制器抽象层（</span><span style="color:#000000;">MCAL</span><span style="color:#000000;">）之间，其可以简化</span><span style="color:#000000;">ECU</span><span style="color:#000000;">间的通信服务</span><span style="color:#000000;">，</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">实现</span><span style="color:#000000;">不同类型或速率总线间的数据交互。在</span><span style="color:#000000;">AUTOSAR</span><span style="color:#000000;">通信栈中，位于服务层的有通信</span><span style="color:#000000;">模块</span><span style="color:#000000;">(</span><span style="color:#000000;">Communication</span><span style="color:#000000;">，</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">Com)</span><span style="color:#000000;">，</span><span style="color:#000000;">诊断通信管理模块（</span><span style="color:#000000;">Diagnositic</span><span style="color:#000000;"> Communication Manager</span><span style="color:#000000;">，</span><span style="color:#000000;">Dem</span><span style="color:#000000;">）</span><span style="color:#000000;">、</span><span style="color:#000000;">协议数据单元</span><span style="color:#000000;">路由</span><span style="color:#000000;">模</span><span style="color:#000000;">(Protocol </span><span style="color:#000000;">Data Unit Router</span><span style="color:#000000;">，</span><span style="color:#000000;">PduR</span><span style="color:#000000;">），协议数据单元复用模块（</span><span style="color:#000000;">I-PDU Multiplexer</span><span style="color:#000000;">，</span><span style="color:#000000;">IpduM</span><span style="color:#000000;">）、总线</span><span style="color:#000000;">相关的传输模块</span><span style="color:#000000;">（如</span><span style="color:#000000;">CanTp</span><span style="color:#000000;">，</span><span style="color:#000000;">LinTp</span><span style="color:#000000;">等）以及通信与网络管理相关的模块；位于</span><span style="color:#000000;">ECU</span><span style="color:#000000;">抽象层的是与总线相关的接口</span><span style="color:#000000;">模块（如</span><span style="color:#000000;">CanIf</span><span style="color:#000000;">，</span><span style="color:#000000;">LinIf</span><span style="color:#000000;">等）；位于微控制器抽象层的是与总线相关的驱动模块（如</span><span style="color:#000000;">Can</span><span style="color:#000000;">，</span><span style="color:#000000;">Lin</span><span style="color:#000000;">等）</span></p> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">AUTOSAR</span><span style="color:#000000;">通讯栈对应用层隐藏了与总线相关的协议和报文的属性，以基本的</span><span style="color:#000000;">CAN</span><span style="color:#000000;">为例：发送数据机制为</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">RTE-&gt;COM-&gt;PduR-&gt;Canif-&gt;</span><span style="color:#000000;">CANDriver</span> <span style="color:#000000;">，过程如下：</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">Com</span><span style="color:#000000;">模块获取应用层的信号，经过封装为</span><span style="color:#000000;">I-PDU </span><span style="color:#000000;">（</span><span style="color:#000000;">Interaction Layer Protocol Data Unit</span><span style="color:#000000;">）发送到</span><span style="color:#000000;">PduR</span><span style="color:#000000;">模块</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">PduR</span><span style="color:#000000;">模块路由协议中所指定的</span><span style="color:#000000;">I-PDU</span><span style="color:#000000;">目标接收模块，将接收的</span><span style="color:#000000;">I-PDU</span><span style="color:#000000;">经过处理发送给</span><span style="color:#000000;">Canif</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">Canif</span><span style="color:#000000;">将信号以</span><span style="color:#000000;">L-PDU</span><span style="color:#000000;">（</span><span style="color:#000000;">Data Link layer Protocol Data Unit</span><span style="color:#000000;">）的形式发送给</span><span style="color:#000000;">CAN</span><span style="color:#000000;">驱动模块</span></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="644" src="https://images2.imgbox.com/ad/43/p4h1pras_o.png" width="559"></p> 
<p style="margin-left:0in;text-align:left;">                                 AUTOSAR  CAN 通讯模型</p> 
<p style="margin-left:0in;text-align:left;">COM模块</p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">Com</span><span style="color:#000000;">模块位于</span><span style="color:#000000;">RTE</span><span style="color:#000000;">与</span><span style="color:#000000;">PduR</span><span style="color:#000000;">之间，其主要功能有：</span></p> 
<div style="margin-left:.38in;text-align:left;">
  ① 
 <span style="color:#000000;">将信号装载到</span> 
 <span style="color:#000000;">I-PDU</span> 
 <span style="color:#000000;">中发送，从接收到的</span> 
 <span style="color:#000000;">I-PDU</span> 
 <span style="color:#000000;">中解析出信号</span> 
</div> 
<div style="margin-left:.38in;text-align:left;">
  ② 
 <span style="color:#000000;">提供信号路由功能，将接收到的</span> 
 <span style="color:#000000;">I-PDU</span> 
 <span style="color:#000000;">中的信号打包到发送</span> 
 <span style="color:#000000;">I-PDU</span> 
 <span style="color:#000000;">中</span> 
</div> 
<div style="margin-left:.38in;text-align:left;">
  ③ 
 <span style="color:#000000;">通讯发送控制（自动</span> 
 <span style="color:#000000;">/</span> 
 <span style="color:#000000;">停止</span> 
 <span style="color:#000000;">I-PDU</span> 
 <span style="color:#000000;">组）</span> 
</div> 
<div style="margin-left:.38in;text-align:left;">
  ④ 
 <span style="color:#000000;">发送请求的应答</span> 
</div> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">每个</span><span style="color:#000000;">Com I-PDU </span><span style="color:#000000;">需要设定</span><span style="color:#000000;">I-PDU</span><span style="color:#000000;">的传输方向（</span><span style="color:#000000;">ComIPduDirection</span><span style="color:#000000;">）、信号处理方式 </span><span style="color:#000000;">ComIPduSignalProcessing</span><span style="color:#000000;">、类型 </span><span style="color:#000000;">ComIPduSignalRef</span><span style="color:#000000;">等</span></p> 
<p style="margin-left:0in;text-align:left;">PDUR</p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">PduR</span><span style="color:#000000;">模块是主要为通讯接口模块，传输协议模块、诊断通讯服务管理模块以及通讯模块提供</span><span style="color:#000000;">I-PDU</span><span style="color:#000000;">的路由服务，它在通讯协议中起着承上启下的作用，为上层服务基础软件和应用层屏蔽网络细节，使得上层基础软件模块和应用层不用关心运行于那种总线网络之上。同时，</span><span style="color:#000000;">PduR</span><span style="color:#000000;">模块提供了基于</span><span style="color:#000000;">I-PDU</span><span style="color:#000000;">的网关功能，使得不同总线之间的通信成为可能</span></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="678" src="https://images2.imgbox.com/c2/11/1QbliFRs_o.png" width="1200"></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">I-PDU  </span><span style="color:#000000;">交互层对应的</span><span style="color:#000000;">PDU CANTP</span><span style="color:#000000;">层往上的都采用的</span><span style="color:#000000;">I-PDU</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">N-PDU </span><span style="color:#000000;">网络层对应的</span><span style="color:#000000;">PDU  canif</span><span style="color:#000000;">与</span><span style="color:#000000;">TP</span><span style="color:#000000;">层依赖关系 采用</span><span style="color:#000000;">N-PDU</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">L-PDU </span><span style="color:#000000;">数据链路层对应的</span><span style="color:#000000;">PDU Driver </span><span style="color:#000000;">与</span><span style="color:#000000;">canif</span><span style="color:#000000;">之间的依赖关系为</span><span style="color:#000000;">L-PDU</span></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="954" src="https://images2.imgbox.com/42/fa/5fUnoRWZ_o.png" width="1200"></p> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="1004" src="https://images2.imgbox.com/bd/73/wvFvIlRi_o.png" width="1020"></p> 
<p style="margin-left:0in;text-align:left;">                  CAN  通讯从硬件到软件的全过程</p> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;">CAN 发送数据时数据流向</p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="802" src="https://images2.imgbox.com/dd/65/NRQQ66Vc_o.png" width="1200"></p> 
<p style="margin-left:0in;text-align:left;">CAN接收数据时数据流向</p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="744" src="https://images2.imgbox.com/e3/c5/UwExnY4h_o.png" width="1200"></p> 
<p style="margin-left:0in;text-align:left;"></p> 
<p style="margin-left:0in;text-align:left;">AUTOSAR CP文档<a class="link-info" href="https://www.autosar.org/standards/classic-platform" rel="nofollow" title="  地址 ">  地址 </a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e0afafbee40178f8f04ec5beaa070c86/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">nginx&#43;php&#43;mysql安装以及环境的搭建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ec28131186aac7bdca214c130752c092/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">内网穿透实战应用-如何通过内网穿透实现远程发送个人本地搭建的hMailServer的邮件服务</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>