<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vue高德地图关键词搜索，点击选点 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vue高德地图关键词搜索，点击选点" />
<meta property="og:description" content="初始化地图
const initMap = () =&gt; { AMapLoader.load({ key: &#39;自己的key&#39;, // 后期需替换 version: &#39;2.0&#39;, // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15 plugins: [&#39;AMap.Scale&#39;, &#39;AMap.MouseTool&#39;, &#39;AMap.ToolBar&#39;, &#39;AMap.PlaceSearch&#39;], }) .then((AMap) =&gt; { AMap1.value = AMap // 初始化地图 map.value = new AMap.Map(&#39;map-location&#39;, { //map-location为地图容器的id viewMode: &#39;3D&#39;, // 是否为3D地图模式 zoom: 17, // 初始化地图级别 center: [116.26755900, 39.91547100], //默认中心点 resizeEnable: true, }) // 创建引入搜索组件 const placeSearch = new AMap.PlaceSearch({ pageSize: 5, // 单页显示结果条数 pageIndex: 1, // 页码 // city: &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/aa221d4645f0f5ac8833287a69bd7965/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-25T16:45:13+08:00" />
<meta property="article:modified_time" content="2023-05-25T16:45:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vue高德地图关键词搜索，点击选点</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>初始化地图</strong></p> 
<pre><code class="hljs">const initMap = () =&gt; {
  AMapLoader.load({
    key: '自己的key', // 后期需替换
    version: '2.0', // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
    plugins: ['AMap.Scale', 'AMap.MouseTool', 'AMap.ToolBar', 'AMap.PlaceSearch'],
  })
    .then((AMap) =&gt; {
      AMap1.value = AMap
      // 初始化地图
      map.value = new AMap.Map('map-location', { //map-location为地图容器的id
        viewMode: '3D', //  是否为3D地图模式
        zoom: 17, // 初始化地图级别
        center: [116.26755900, 39.91547100], //默认中心点
        resizeEnable: true,
      })
      // 创建引入搜索组件
      const placeSearch = new AMap.PlaceSearch({
        pageSize: 5, // 单页显示结果条数
        pageIndex: 1, // 页码
        // city: "010", // 兴趣点城市
        citylimit: false, // 是否强制限制在设置的城市内搜索
        map: map.value, // 展现结果的地图实例
        panel: 'info', // 展示结果容器的id。
        autoFitView: true, // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围
      })
      placeSearchRef.value = placeSearch
      // 主要就是使用placeSearch.search('关键词')  我这里在外部使用，将变量保存一下
    })
    .catch((e) =&gt; {
      console.log(e)
    })
}</code></pre> 
<p><strong>搜索关键词 </strong></p> 
<pre><code class="hljs">const keyword= ref('') // keyword 为input的value
watch(() =&gt; keyword.value, (newVal) =&gt; {
  if (newVal) {
  // 搜索函数
    placeSearchRef.value.search(newVal)
  }
  else {
   // 为空清空结果
    placeSearchRef.value.clear()
  }
}, {
  deep: true,
  // immediate: true,
})</code></pre> 
<p><strong>全部代码</strong></p> 
<pre><code class="hljs">&lt;!--
  Description: 高德地图选点搜索
  Author: 李亚光
  Date: 2023-04-21
 --&gt;
&lt;script lang="ts" setup name="GuadMap"&gt;
import AMapLoader from '@amap/amap-jsapi-loader'
// 设置安全密钥
window._AMapSecurityConfig = {
  securityJsCode: '换成自己的', // 后期需替换
}
// 地图实例
const placeSearchRef = ref()
// 初始化地图
const initMap = () =&gt; {
  AMapLoader.load({
    key: '换成自己的', // 后期需替换
    version: '2.0', // 指定要加载的 JSAPI 的版本，缺省时默认为 1.4.15
    plugins: ['AMap.Scale', 'AMap.MouseTool', 'AMap.ToolBar', 'AMap.PlaceSearch', 'AMap.AutoComplete'], // 需要使用的的插件列表，如比例尺'AMap.Scale'等
  })
    .then((AMap) =&gt; {
      // 初始化地图
      map.value = new AMap.Map('map-location', {
        viewMode: '3D', //  是否为3D地图模式
        zoom: 17, // 初始化地图级别
        center: [116.26755900, 39.91547100],
        resizeEnable: true,
      })
      // 清除所有图层
      map.value.clearMap()
      // 创建引入搜索组件
      const placeSearch = new AMap.PlaceSearch({
        pageSize: 5, // 单页显示结果条数
        pageIndex: 1, // 页码
        // city: "010", // 兴趣点城市
        citylimit: false, // 是否强制限制在设置的城市内搜索
        map: map.value, // 展现结果的地图实例
        panel: 'info', // 结果列表将在此容器中进行展示。
        autoFitView: true, // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围
      })
      placeSearchRef.value = placeSearch
    })
    .catch((e) =&gt; {
      console.log(e)
    })
}
onMounted(async () =&gt; {
  initMap()
})
onBeforeUnmount(() =&gt; {
  // 解绑事件
  map.value.clearMap()
  map.value.destroy()
})
const keyword= ref('')
watch(() =&gt; keyword.value, (newVal) =&gt; {
  if (newVal) {
    // 搜索函数
    placeSearchRef.value.search(newVal)
  }
  else {
    // 关键词为空时清空结果
    placeSearchRef.value.clear()
  }
}, {
  deep: true,
  // immediate: true,
})
&lt;/script&gt;

&lt;template&gt;
  &lt;div class="box" style="position: relative;"&gt;
    &lt;div id="map-location" style="width: 100%; height: 500px;" /&gt;
    &lt;div class="info"&gt;
      &lt;div class="input-item"&gt;
        &lt;el-input v-model="keyword" placeholder="请输入关键字" clearable /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div id="info" /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;style lang="scss" scoped&gt;
.box {
  position: relative;
}

#info {
  width: 270px;
  position: absolute;
  top: 34px;
  right: 0;
}

#map {
  overflow: hidden;
  width: 100%;
  height: 100%;
  margin: 0;
  font-family: "微软雅黑";
}

.info {
  // padding: 0.5rem 0.7rem;
  margin-bottom: 1rem;
  border-radius: 0.25rem;
  position: absolute;
  top: 0;
  background-color: #fff;
  width: auto;
  min-width: 270px;
  border-width: 0;
  right: 0;
  // box-shadow: 0 2px 6px 0 rgb(240 131 0 / 50%);

  .input-item {
    position: relative;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    width: 100%;
    height: 2.2rem;
    border: 1px solid #ccc;
    border-radius: 0.2rem;

  }
}
&lt;/style&gt;

&lt;style&gt;
/* 隐藏高德logo  */
.amap-logo {
  display: none !important;
}

/* 隐藏高德版权  */
.amap-copyright {
  display: none !important;
}

.amap-marker-label {
  border: 0;
  background-color: transparent;
}
&lt;/style&gt;
</code></pre> 
<p><strong>效果</strong></p> 
<p><img alt="" height="280" src="https://images2.imgbox.com/21/95/9n4WioNd_o.png" width="552"></p> 
<p> 需要注意 </p> 
<p>普通用户 一天一百次机会</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c9a297d1d98d247f7f121bc8c88b0bca/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ansible 参数·命令说明</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03898b28be515368dcf799574378b5b8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">测试Mybatis中的数据库连接</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>