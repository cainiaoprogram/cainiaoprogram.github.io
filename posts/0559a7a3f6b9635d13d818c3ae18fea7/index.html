<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C# 实现视频监控系统(附源码) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C# 实现视频监控系统(附源码)" />
<meta property="og:description" content="去过工厂或者仓库的都知道，在工厂或仓库里面，会有很多不同的流水线，大部分的工厂或仓库，都会在不同流水线的不同工位旁边安装一台电脑，一方面便于工位上的师傅把产品的重要信息录入系统，便于公司系统数据采集分析。另一方面严谨的工厂或仓库也会在每个工位上安装摄像头，用于采集或监控流水线上工人的操(是)作（否）习（偷）惯（懒）。
好了，闲话少说，咱们直入主题吧！
本系统监控系统，主要核心是使用AForge.NET提供的接口和插件（dll），感兴趣的朋友也可以去他们官网查看文档http://www.aforgenet.com/framework/documentation.html
Talk is cheap,show me the code!
系统初始化时，首先检查工位的机台是否开启了摄像头，具体检测代码如下：
/// &lt;summary&gt; /// 监控bind /// &lt;/summary&gt; private void bind() { try { FilterInfoCollection videoDevices = new FilterInfoCollection(FilterCategory.VideoInputDevice); if (videoDevices.Count &lt;= 0) { MessageBox.Show(&#34;请连接摄像头&#34;); return; } else { CloseCaptureDevice(); if (!Directory.Exists(path)) Directory.CreateDirectory(path); videoSource = new VideoCaptureDevice(videoDevices[0].MonikerString); videoSource.VideoResolution = videoSource.VideoCapabilities[0]; sourcePlayer.VideoSource = videoSource; sourcePlayer.Start(); } } catch (Exception ex) { MessageBox.Show(ex.Message); } } 好了，摄像头没问题，咱在检查网络是否正常（这事儿可以交给运维，当然也可以通过程序控制，具体校验网络代码比比皆是，此处忽略，如有兴趣的朋友可以在公众号Call我一起探讨），至于为什么要校验网络，一部分是用于机台系统的数据采集，另一部分就是录制的视频文件不可能存储在工位机台上，不然流水线和工位足够多，岂不是一个工位一个几天的查看视频监控嘛！咱这都是智能化时代，录制的视频可以保存在本地，不过为了方便起见，需要定时清理，定时上传到服务器便于领导审查。视频上传到服务器一般用到最多的莫非两种情况，1.网络足够稳定，足够快的可以直接和服务器开个磁盘映射（共享目录），视频录制完后系统直接剪切到服务器保存即可。2.把不同时段录制的视频先存储到本地，然后单独开发个定时任务FTP定时上传即可。今天先跟大家分享下第一种方法，第二种方法也比较简单，有兴趣的朋友可以公众号call我一起探讨。
不知不觉又扯了一堆废话，都是实在人，直接上源码吧：
/// &lt;summary&gt; /// 开启或者关闭程序后将多余文件copy到相应目录，并开启磁盘映射上传到共享目录 /// &lt;/summary&gt; private void CopyFilesToServer() { try { //遍历 当前PC文件夹外是否存在视频文件，如存在，移动到目标目录 string newPath = path &#43; MacAddressPath &#43; @&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/0559a7a3f6b9635d13d818c3ae18fea7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-24T11:14:29+08:00" />
<meta property="article:modified_time" content="2021-03-24T11:14:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C# 实现视频监控系统(附源码)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>去过工厂或者仓库的都知道，在工厂或仓库里面，会有很多不同的流水线，大部分的工厂或仓库，都会在不同流水线的不同工位旁边安装一台电脑，一方面便于工位上的师傅把产品的重要信息录入系统，便于公司系统数据采集分析。另一方面严谨的工厂或仓库也会在每个工位上安装摄像头，用于采集或监控流水线上工人的操(是)作（否）习（偷）惯（懒）。</p> 
<p>好了，闲话少说，咱们直入主题吧！</p> 
<p>本系统监控系统，主要核心是使用AForge.NET提供的接口和插件（dll），感兴趣的朋友也可以去他们官网查看文档http://www.aforgenet.com/framework/documentation.html</p> 
<p>Talk is cheap,show me the code!</p> 
<p>系统初始化时，首先检查工位的机台是否开启了摄像头，具体检测代码如下：</p> 
<pre><code class="prism language-python"><span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>summary<span class="token operator">&gt;</span>
<span class="token operator">//</span><span class="token operator">/</span> 监控bind
<span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span><span class="token operator">/</span>summary<span class="token operator">&gt;</span>
private void bind<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">try</span>
  <span class="token punctuation">{<!-- --></span>
    FilterInfoCollection videoDevices <span class="token operator">=</span> new FilterInfoCollection<span class="token punctuation">(</span>FilterCategory<span class="token punctuation">.</span>VideoInputDevice<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>videoDevices<span class="token punctuation">.</span>Count <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      MessageBox<span class="token punctuation">.</span>Show<span class="token punctuation">(</span><span class="token string">"请连接摄像头"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
      CloseCaptureDevice<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>!Directory<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span> Directory<span class="token punctuation">.</span>CreateDirectory<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
      videoSource <span class="token operator">=</span> new VideoCaptureDevice<span class="token punctuation">(</span>videoDevices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>MonikerString<span class="token punctuation">)</span><span class="token punctuation">;</span>
      videoSource<span class="token punctuation">.</span>VideoResolution <span class="token operator">=</span> videoSource<span class="token punctuation">.</span>VideoCapabilities<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      sourcePlayer<span class="token punctuation">.</span>VideoSource <span class="token operator">=</span> videoSource<span class="token punctuation">;</span>
      sourcePlayer<span class="token punctuation">.</span>Start<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  catch <span class="token punctuation">(</span>Exception ex<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    MessageBox<span class="token punctuation">.</span>Show<span class="token punctuation">(</span>ex<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>好了，摄像头没问题，咱在检查网络是否正常（这事儿可以交给运维，当然也可以通过程序控制，具体校验网络代码比比皆是，此处忽略，如有兴趣的朋友可以在公众号Call我一起探讨），至于为什么要校验网络，一部分是用于机台系统的数据采集，另一部分就是录制的视频文件不可能存储在工位机台上，不然流水线和工位足够多，岂不是一个工位一个几天的查看视频监控嘛！咱这都是智能化时代，录制的视频可以保存在本地，不过为了方便起见，需要定时清理，定时上传到服务器便于领导审查。视频上传到服务器一般用到最多的莫非两种情况，1.网络足够稳定，足够快的可以直接和服务器开个磁盘映射（共享目录），视频录制完后系统直接剪切到服务器保存即可。2.把不同时段录制的视频先存储到本地，然后单独开发个定时任务FTP定时上传即可。今天先跟大家分享下第一种方法，第二种方法也比较简单，有兴趣的朋友可以公众号call我一起探讨。</p> 
<p>不知不觉又扯了一堆废话，都是实在人，直接上源码吧：</p> 
<pre><code class="prism language-python"><span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>summary<span class="token operator">&gt;</span>
<span class="token operator">//</span><span class="token operator">/</span> 开启或者关闭程序后将多余文件copy到相应目录，并开启磁盘映射上传到共享目录
<span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span><span class="token operator">/</span>summary<span class="token operator">&gt;</span>
private void CopyFilesToServer<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  <span class="token keyword">try</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token operator">//</span>遍历 当前PC文件夹外是否存在视频文件，如存在，移动到目标目录 
    string newPath <span class="token operator">=</span> path <span class="token operator">+</span> MacAddressPath <span class="token operator">+</span> @"<span class="token operator">-</span>Video\"<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>!Directory<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>newPath<span class="token punctuation">)</span><span class="token punctuation">)</span> Directory<span class="token punctuation">.</span>CreateDirectory<span class="token punctuation">(</span>newPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">//</span>将上一次最后一个视频文件转入目录
    var files <span class="token operator">=</span> Directory<span class="token punctuation">.</span>GetFiles<span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">"*.wmv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    foreach <span class="token punctuation">(</span>var <span class="token builtin">file</span> <span class="token keyword">in</span> files<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      FileInfo fi <span class="token operator">=</span> new FileInfo<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      string filesName <span class="token operator">=</span> <span class="token builtin">file</span><span class="token punctuation">.</span>Split<span class="token punctuation">(</span>new string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"\\"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> StringSplitOptions<span class="token punctuation">.</span>RemoveEmptyEntries<span class="token punctuation">)</span><span class="token punctuation">.</span>LastOrDefault<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      fi<span class="token punctuation">.</span>MoveTo<span class="token punctuation">(</span>newPath <span class="token operator">+</span> filesName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
  <span class="token punctuation">}</span>
  catch <span class="token punctuation">(</span>Exception ex<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token operator">//</span>TODO<span class="token punctuation">:</span>异常抛出
  <span class="token punctuation">}</span>
  <span class="token keyword">finally</span>
  <span class="token punctuation">{<!-- --></span>
    uint state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>!Directory<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span><span class="token string">"Z:"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token operator">//</span>计算机名
      string computerName <span class="token operator">=</span> System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Dns<span class="token punctuation">.</span>GetHostName<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token operator">//</span>为网络共享目录添加磁盘映射 
      state <span class="token operator">=</span> WNetHelper<span class="token punctuation">.</span>WNetAddConnection<span class="token punctuation">(</span>computerName <span class="token operator">+</span> @<span class="token string">"\" + netWorkUser, netWorkPwd, netWorkPath, "</span>Z<span class="token punctuation">:</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>Equals<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token operator">//</span>本地磁盘视频文件copy到网络共享目录
      CopyFolder<span class="token punctuation">(</span>path <span class="token operator">+</span> MacAddressPath <span class="token operator">+</span> @"<span class="token operator">-</span>Video\"<span class="token punctuation">,</span> zPath<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{<!-- --></span>
      WNetHelper<span class="token punctuation">.</span>WinExec<span class="token punctuation">(</span><span class="token string">"NET USE * /DELETE /Y"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      throw new Exception<span class="token punctuation">(</span><span class="token string">"添加网络驱动器错误，错误号："</span> <span class="token operator">+</span> state<span class="token punctuation">.</span>ToString<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>其中CopyFolder方法代码如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#region 通过共享网络磁盘映射的方式，讲文件copy到指定网盘</span>
 <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>summary<span class="token operator">&gt;</span>
 <span class="token operator">//</span><span class="token operator">/</span> 通过共享网络磁盘映射的方式，讲文件copy到指定网盘
 <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span><span class="token operator">/</span>summary<span class="token operator">&gt;</span>
 <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>param name<span class="token operator">=</span><span class="token string">"strFromPath"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">&gt;</span>
 <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>param name<span class="token operator">=</span><span class="token string">"strToPath"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">&gt;</span>
 public static void CopyFolder<span class="token punctuation">(</span>string strFromPath<span class="token punctuation">,</span> string strToPath<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
   <span class="token operator">//</span>如果源文件夹不存在，则创建
   <span class="token keyword">if</span> <span class="token punctuation">(</span>!Directory<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>strFromPath<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     Directory<span class="token punctuation">.</span>CreateDirectory<span class="token punctuation">(</span>strFromPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
   <span class="token keyword">if</span> <span class="token punctuation">(</span>!Directory<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>strToPath<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     Directory<span class="token punctuation">.</span>CreateDirectory<span class="token punctuation">(</span>strToPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
   <span class="token operator">//</span>直接剪切moveto，本地不留副本
   string<span class="token punctuation">[</span><span class="token punctuation">]</span> strFiles <span class="token operator">=</span> Directory<span class="token punctuation">.</span>GetFiles<span class="token punctuation">(</span>strFromPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token operator">//</span>循环剪切文件<span class="token punctuation">,</span>此处循环是考虑每日工作站最后一个文件无法存储到根目录，导致出现两个视频文件的问题
   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token builtin">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> strFiles<span class="token punctuation">.</span>Length<span class="token punctuation">;</span> i<span class="token operator">+</span><span class="token operator">+</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     <span class="token operator">//</span>取得文件名，只取文件名，地址截掉。
     string strFileName <span class="token operator">=</span> strFiles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Substring<span class="token punctuation">(</span>strFiles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>LastIndexOf<span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> strFiles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>Length <span class="token operator">-</span> strFiles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>LastIndexOf<span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     File<span class="token punctuation">.</span>Move<span class="token punctuation">(</span>strFiles<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> strToPath <span class="token operator">+</span> <span class="token string">"DT-"</span> <span class="token operator">+</span> strFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
 <span class="token punctuation">}</span>
 <span class="token comment">#endregion</span>
</code></pre> 
<p>做完机台检查工作，也做好了视频传输的工作，接下来就是视频录制的主角戏了，完整录制视频源码如下</p> 
<pre><code class="prism language-python"><span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>summary<span class="token operator">&gt;</span>
    <span class="token operator">//</span><span class="token operator">/</span> videosouceplayer 录像
    <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span><span class="token operator">/</span>summary<span class="token operator">&gt;</span>
    <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>param name<span class="token operator">=</span><span class="token string">"sender"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">&gt;</span>
    <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>param name<span class="token operator">=</span><span class="token string">"image"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>param<span class="token operator">&gt;</span>
    private void sourcePlayer_NewFrame<span class="token punctuation">(</span><span class="token builtin">object</span> sender<span class="token punctuation">,</span> ref Bitmap image<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">try</span>
      <span class="token punctuation">{<!-- --></span> 
        <span class="token operator">//</span>写到屏幕上的时间
        g <span class="token operator">=</span> Graphics<span class="token punctuation">.</span>FromImage<span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
        SolidBrush drawBrush <span class="token operator">=</span> new SolidBrush<span class="token punctuation">(</span>Color<span class="token punctuation">.</span>Yellow<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        Font drawFont <span class="token operator">=</span> new Font<span class="token punctuation">(</span><span class="token string">"Arial"</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> System<span class="token punctuation">.</span>Drawing<span class="token punctuation">.</span>FontStyle<span class="token punctuation">.</span>Bold<span class="token punctuation">,</span> GraphicsUnit<span class="token punctuation">.</span>Millimeter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">int</span> xPos <span class="token operator">=</span> image<span class="token punctuation">.</span>Width <span class="token operator">-</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>Width <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">int</span> yPos <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
 
        string drawDate <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span>ToString<span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g<span class="token punctuation">.</span>DrawString<span class="token punctuation">(</span>drawDate<span class="token punctuation">,</span> drawFont<span class="token punctuation">,</span> drawBrush<span class="token punctuation">,</span> xPos<span class="token punctuation">,</span> yPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token operator">//</span>save content
        string videoFileName <span class="token operator">=</span> dt<span class="token punctuation">.</span>ToString<span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HHmm"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".wmv"</span><span class="token punctuation">;</span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>TestDriveInfo<span class="token punctuation">(</span>videoFileName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">//</span>检测硬盘空间足够
        <span class="token punctuation">{<!-- --></span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>!stopREC<span class="token punctuation">)</span>
          <span class="token punctuation">{<!-- --></span>
            stopREC <span class="token operator">=</span> true<span class="token punctuation">;</span>
            createNewFile <span class="token operator">=</span> true<span class="token punctuation">;</span> <span class="token operator">//</span>这里要设置为true表示要创建新文件
            <span class="token keyword">if</span> <span class="token punctuation">(</span>videoWriter <span class="token operator">!=</span> null<span class="token punctuation">)</span> videoWriter<span class="token punctuation">.</span>Close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">else</span>
          <span class="token punctuation">{<!-- --></span>
            <span class="token operator">//</span>开始录像
            <span class="token keyword">if</span> <span class="token punctuation">(</span>createNewFile<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
              <span class="token operator">//</span>第二次录像不一定是第二次开启软件时间<span class="token punctuation">(</span>比如：连续多小时录制<span class="token punctuation">)</span>，所以应该重新给新录制视频文件重新赋值命名
              dt <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">;</span>
              videoFileFullPath <span class="token operator">=</span> path <span class="token operator">+</span> dt<span class="token punctuation">.</span>ToString<span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HHmm"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".wmv"</span><span class="token punctuation">;</span><span class="token operator">//</span>videoFileName<span class="token punctuation">;</span>
 
              createNewFile <span class="token operator">=</span> false<span class="token punctuation">;</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>videoWriter <span class="token operator">!=</span> null<span class="token punctuation">)</span>
              <span class="token punctuation">{<!-- --></span>
                videoWriter<span class="token punctuation">.</span>Close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                videoWriter<span class="token punctuation">.</span>Dispose<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
 
              videoWriter <span class="token operator">=</span> new VideoFileWriter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token operator">//</span>这里必须是全路径，否则会默认保存到程序运行根据录下了
              videoWriter<span class="token punctuation">.</span>Open<span class="token punctuation">(</span>videoFileFullPath<span class="token punctuation">,</span> image<span class="token punctuation">.</span>Width<span class="token punctuation">,</span> image<span class="token punctuation">.</span>Height<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> VideoCodec<span class="token punctuation">.</span>WMV1<span class="token punctuation">)</span><span class="token punctuation">;</span>
              videoWriter<span class="token punctuation">.</span>WriteVideoFrame<span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{<!-- --></span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>videoWriter<span class="token punctuation">.</span>IsOpen<span class="token punctuation">)</span>
              <span class="token punctuation">{<!-- --></span>
                videoWriter<span class="token punctuation">.</span>WriteVideoFrame<span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>dt<span class="token punctuation">.</span>AddMinutes<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">)</span>
              <span class="token punctuation">{<!-- --></span> 
                createNewFile <span class="token operator">=</span> true<span class="token punctuation">;</span>
                <span class="token operator">//</span>modify by stephen<span class="token punctuation">,</span>每次写入视频文件后，即刻更新结束时间戳，并存入指定文件夹<span class="token punctuation">(</span>目的：如果只有关闭的时候处理此操作，就会出现大于<span class="token number">1</span>小时的视频文件无法更新结束时间戳，且无法转入指定文件夹<span class="token punctuation">)</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>videoWriter <span class="token operator">!=</span> null<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                  videoWriter<span class="token punctuation">.</span>Close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  videoWriter<span class="token punctuation">.</span>Dispose<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                string newPath <span class="token operator">=</span> path <span class="token operator">+</span> MacAddressPath <span class="token operator">+</span> @"<span class="token operator">-</span>Video\"<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>!Directory<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>newPath<span class="token punctuation">)</span><span class="token punctuation">)</span> Directory<span class="token punctuation">.</span>CreateDirectory<span class="token punctuation">(</span>newPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                string newStr <span class="token operator">=</span> newPath <span class="token operator">+</span> dt<span class="token punctuation">.</span>ToString<span class="token punctuation">(</span><span class="token string">"yyyyMMddHHmm"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"-"</span> <span class="token operator">+</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span>ToString<span class="token punctuation">(</span><span class="token string">"yyyyMMddHHmm"</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">".wmv"</span><span class="token punctuation">;</span>
                FileInfo fi <span class="token operator">=</span> new FileInfo<span class="token punctuation">(</span>videoFileFullPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
                fi<span class="token punctuation">.</span>MoveTo<span class="token punctuation">(</span>newStr<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token operator">//</span><span class="token operator">//</span>转移到网路目录
                <span class="token operator">//</span>CopyFilesToServer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
 
      <span class="token punctuation">}</span>
      catch <span class="token punctuation">(</span>Exception ex<span class="token punctuation">)</span>
      <span class="token punctuation">{<!-- --></span>
        videoWriter<span class="token punctuation">.</span>Close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        videoWriter<span class="token punctuation">.</span>Dispose<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">finally</span>
      <span class="token punctuation">{<!-- --></span>
 
        <span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>g <span class="token operator">!=</span> null<span class="token punctuation">)</span> this<span class="token punctuation">.</span>g<span class="token punctuation">.</span>Dispose<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
 
    <span class="token punctuation">}</span>
</code></pre> 
<p>其中TestDriveInfo方法是用来获取保存视频的磁盘信息的，具体代码如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#region 获取保存视频的磁盘信息</span>
 <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span>summary<span class="token operator">&gt;</span>
 <span class="token operator">//</span><span class="token operator">/</span> 获取保存视频的磁盘信息
 <span class="token operator">//</span><span class="token operator">/</span> <span class="token operator">&lt;</span><span class="token operator">/</span>summary<span class="token operator">&gt;</span>
 <span class="token builtin">bool</span> TestDriveInfo<span class="token punctuation">(</span>string n<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
   <span class="token keyword">try</span>
   <span class="token punctuation">{<!-- --></span>
     DriveInfo D <span class="token operator">=</span> DriveInfo<span class="token punctuation">.</span>GetDrives<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Where<span class="token punctuation">(</span>a <span class="token operator">=</span><span class="token operator">&gt;</span> a<span class="token punctuation">.</span>Name <span class="token operator">==</span> path<span class="token punctuation">.</span>Substring<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ToUpper<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>FirstOrDefault<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     Int64 i <span class="token operator">=</span> D<span class="token punctuation">.</span>TotalFreeSpace<span class="token punctuation">,</span> ti <span class="token operator">=</span> unchecked<span class="token punctuation">(</span><span class="token number">50</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> ti<span class="token punctuation">)</span>
     <span class="token punctuation">{<!-- --></span>
       DirectoryInfo folder <span class="token operator">=</span> new DirectoryInfo<span class="token punctuation">(</span>path <span class="token operator">+</span> MacAddressPath <span class="token operator">+</span> @"<span class="token operator">-</span>Video\"<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token operator">//</span>modify by stephen，验证当前指定文件夹是否存在元素
       <span class="token keyword">if</span> <span class="token punctuation">(</span>folder<span class="token punctuation">.</span>Exists<span class="token punctuation">)</span>
       <span class="token punctuation">{<!-- --></span> 
         var fisList <span class="token operator">=</span> folder<span class="token punctuation">.</span>GetFiles<span class="token punctuation">(</span><span class="token string">"*.wmv"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>OrderBy<span class="token punctuation">(</span>a <span class="token operator">=</span><span class="token operator">&gt;</span> a<span class="token punctuation">.</span>CreationTime<span class="token punctuation">)</span><span class="token punctuation">;</span> 
         <span class="token keyword">if</span> <span class="token punctuation">(</span>fisList<span class="token punctuation">.</span>Any<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
         <span class="token punctuation">{<!-- --></span>
           List<span class="token operator">&lt;</span>FileInfo<span class="token operator">&gt;</span> fis <span class="token operator">=</span> fisList<span class="token punctuation">.</span>ToList<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">if</span> <span class="token punctuation">(</span>fis<span class="token punctuation">.</span>Count <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;</span><span class="token operator">&amp;</span> fis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Name <span class="token operator">!=</span> n<span class="token punctuation">)</span>
           <span class="token punctuation">{<!-- --></span>
             File<span class="token punctuation">.</span>Delete<span class="token punctuation">(</span>fis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>FullName<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
       <span class="token punctuation">}</span> 
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
   catch <span class="token punctuation">(</span>Exception ex<span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     MessageBox<span class="token punctuation">.</span>Show<span class="token punctuation">(</span>ex<span class="token punctuation">.</span>Message<span class="token punctuation">,</span> <span class="token string">"处理硬盘信息出错"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> false<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">return</span> true<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token comment">#endregion</span>
</code></pre> 
<p>当然，如果工位师傅录入产品信息有疑问的话，也可以利用系统截图来保留证据，这个是我自己画蛇添足的功能，反正是为了方便嘛，别耽误了工位师傅的办事效率，利用摄像头截图代码如下:</p> 
<pre><code class="prism language-python"><span class="token keyword">try</span>
<span class="token punctuation">{<!-- --></span> 
  string pathp <span class="token operator">=</span> $@"<span class="token punctuation">{<!-- --></span>Environment<span class="token punctuation">.</span>GetFolderPath<span class="token punctuation">(</span>Environment<span class="token punctuation">.</span>SpecialFolder<span class="token punctuation">.</span>MyPictures<span class="token punctuation">)</span><span class="token punctuation">}</span>\"<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>!Directory<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>pathp<span class="token punctuation">)</span><span class="token punctuation">)</span> Directory<span class="token punctuation">.</span>CreateDirectory<span class="token punctuation">(</span>pathp<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>sourcePlayer<span class="token punctuation">.</span>IsRunning<span class="token punctuation">)</span>
  <span class="token punctuation">{<!-- --></span>
    BitmapSource bitmapSource <span class="token operator">=</span> System<span class="token punctuation">.</span>Windows<span class="token punctuation">.</span>Interop<span class="token punctuation">.</span>Imaging<span class="token punctuation">.</span>CreateBitmapSourceFromHBitmap<span class="token punctuation">(</span>
   sourcePlayer<span class="token punctuation">.</span>GetCurrentVideoFrame<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>GetHbitmap<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
   IntPtr<span class="token punctuation">.</span>Zero<span class="token punctuation">,</span>
   Int32Rect<span class="token punctuation">.</span>Empty<span class="token punctuation">,</span>
   BitmapSizeOptions<span class="token punctuation">.</span>FromEmptyOptions<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    PngBitmapEncoder pE <span class="token operator">=</span> new PngBitmapEncoder<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pE<span class="token punctuation">.</span>Frames<span class="token punctuation">.</span>Add<span class="token punctuation">(</span>BitmapFrame<span class="token punctuation">.</span>Create<span class="token punctuation">(</span>bitmapSource<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    string picName <span class="token operator">=</span> $<span class="token string">"{pathp}{DateTime.Now.ToString("</span>yyyyMMddHHmmssffffff<span class="token string">")}.jpg"</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>File<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>picName<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      File<span class="token punctuation">.</span>Delete<span class="token punctuation">(</span>picName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    using <span class="token punctuation">(</span>Stream stream <span class="token operator">=</span> File<span class="token punctuation">.</span>Create<span class="token punctuation">(</span>picName<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
      pE<span class="token punctuation">.</span>Save<span class="token punctuation">(</span>stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
catch <span class="token punctuation">(</span>Exception ex<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  MessageBox<span class="token punctuation">.</span>Show<span class="token punctuation">(</span>ex<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>代码比较简单，就不写备注了。当然部署系统的时候也不是一帆风顺，有的工厂或者仓库会购买第三方<a href="https://www.xin3721.com/eschool/CSharpxin3721/" rel="nofollow">c#教程</a>的摄像头，碍于工位环境，摄像头有可能与机台角度偏差较大，所以我又画蛇添足的了校验摄像头的小功能，可以左右90°上下180°画面翻转，具体代码如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#region 设置摄像头旋转调整</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span>image <span class="token operator">!=</span> null<span class="token punctuation">)</span>
 <span class="token punctuation">{<!-- --></span>
   RotateFlipType pType <span class="token operator">=</span> RotateFlipType<span class="token punctuation">.</span>RotateNoneFlipNone<span class="token punctuation">;</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>dAngle <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     pType <span class="token operator">=</span> RotateFlipType<span class="token punctuation">.</span>RotateNoneFlipNone<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dAngle <span class="token operator">==</span> <span class="token number">90</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     pType <span class="token operator">=</span> RotateFlipType<span class="token punctuation">.</span>Rotate90FlipNone<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dAngle <span class="token operator">==</span> <span class="token number">180</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     pType <span class="token operator">=</span> RotateFlipType<span class="token punctuation">.</span>Rotate180FlipNone<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dAngle <span class="token operator">==</span> <span class="token number">270</span><span class="token punctuation">)</span>
   <span class="token punctuation">{<!-- --></span>
     pType <span class="token operator">=</span> RotateFlipType<span class="token punctuation">.</span>Rotate270FlipNone<span class="token punctuation">;</span>
   <span class="token punctuation">}</span> 
   <span class="token operator">//</span> 实时按角度绘制
   image<span class="token punctuation">.</span>RotateFlip<span class="token punctuation">(</span>pType<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token comment">#endregion</span>
</code></pre> 
<p>当然，站在公司角度，为了防止工位师傅手误（诚心）关掉视频监控程序，我们也可以从程序的角度来防患于未然，比如禁用程序的关闭按钮，禁用工具栏右键程序图标关闭程序的操作。</p> 
<p>我们可以重写窗口句柄来防止，具体代码如下：</p> 
<pre><code class="prism language-python"><span class="token comment">#region 窗口句柄重写，禁用窗体的关闭按钮   </span>
private const <span class="token builtin">int</span> CP_NOCLOSE_BUTTON <span class="token operator">=</span> <span class="token number">0x200</span><span class="token punctuation">;</span>
protected override CreateParams CreateParams
<span class="token punctuation">{<!-- --></span>
  get
  <span class="token punctuation">{<!-- --></span>
    CreateParams myCp <span class="token operator">=</span> base<span class="token punctuation">.</span>CreateParams<span class="token punctuation">;</span>
    myCp<span class="token punctuation">.</span>ClassStyle <span class="token operator">=</span> myCp<span class="token punctuation">.</span>ClassStyle <span class="token operator">|</span> CP_NOCLOSE_BUTTON<span class="token punctuation">;</span>
    <span class="token keyword">return</span> myCp<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>至此，系统代码告一段路，一起来看看软件效果吧！请自动忽略视频内容，以及笔记本摄像头带来的渣渣像素</p> 
<p><img src="https://images2.imgbox.com/18/f3/MWyzUZtB_o.png" alt="在这里插入图片描述"></p> 
<p>作者：Stephen-kzx<br> 出处：http://www.cnblogs.com/axing/</p> 
<p>源码下载:https://pan.baidu.com/s/1qxBXl4Nn7IO0SJ-mYC861Q 提取码:b9f7</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a0f08c3d2aad997e3f08ef7675e93394/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">eNSP入门常用命令（一）以及模拟双PC双路由互通</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/fb3c7f6ca23c54be6e0bf7f77ef49aa9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于多个事务并发执行的一个问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>