<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>可重构计算处理器设计实例REMUS——REMUS总体硬件架构 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="可重构计算处理器设计实例REMUS——REMUS总体硬件架构" />
<meta property="og:description" content="前半年看了一些关于CGRA的论文，但是对从硬件架构到编译的整体还有没有很系统的认识。
跟我导借了本书，拓展知识面一下，顺便做个笔记（不定时更新）
1.1 REMUS的硬件架构
REMUS 多标准视频解码可重构计算处理器
主要用于多媒体领域内的视频解码应用。除此之外还拓展实现了通信基带处理领域内的全球定位系统算法（GPS算法），计算机视觉领域内的Adaboost算法（这个算法 西瓜书上有介绍哎）、SIFT算法和SURF算法，以及密码学领域内的多种加密算法（这个领域俺就一窍不通了）
多层系统主线：连接外设控制器、DMA控制器（这个DMA貌似是用于划分bank的？）、片上存储器、片外存储控制器
配置总线：主控制器通过配置总线，对可重构处理单元（reconfigurabale processing unit PRU 整个系统中的核心模块）进行控制，RPU通过设置片外存储控制器对其进行读写访问
可以看到，REMUS分为两大块：可重构数据通路和可重构控制器。
在这里是不是应该解释一下何为 配置，何为 可重构。是这样的，可重构处理器。
补充小知识：
可重构处理器长这样，里面每个PE算作一个计算单元嘛，可以通过配置，来重构这些PE的功能。这样可以达到一次配置多次执行（也就是刚刚开始配置好了，然后让数据在片上进行流水线运动，因为一般是处理循环这种密集型计算嘛）。
其中编译在里面起到的作用就很关键，因为循环中的kernel千变万化撒，怎么样让kernel中这些算子，满足这些资源约束、依赖约束一一映射到PE阵列中呢？
其中有两种映射方法：空间映射和时域映射（在这里就不展开讲了，后续应该会补充）
回到正题
首先，其中的可重构数据通路包括系统级的可重构数据通路和RPU内的可重构数据通路。
系统级的可重构数据通路包括：片外存储器、DMA控制器、片上存储器、片外存储控制器。
其运行流程为：DMA控制器被系统中的主控制器设置后，通过片外存储控制器访问片外存储器，将数据从片外存储器读出并且写入到片上存储器（或者将数据从片上存储器写入片外存储器）
RPU内的可重构数据通路包括：运算单元阵列、输入数据存储器、输出数据存储器、中间数据存储器、内部DMAC控制器。
其运行流程如下：
1.内部DMAC控制器通过设置片外存储控制器将原始数据从片外存储器读出并且写入RPU内部的输入数据存储器
2.PEA（也就是PE阵列）从输入数据存储器中读取数据并对数据进行运算
3.运算结果存于输出数据存储器，并将中间运算结果存于中间数据存储器
4.待多次运算全部完成后，内部DMAC控制器将结果数据从输出数据存储器中读出，并通过片外存储控制器写出至片外
其次，REMUS可重构控制器也分为系统级可重构控制器和RPU内的可重构控制器。
系统级可重构控制器由主控制器和配置总线组成，主控制器采用ARM7来实现，包含系统控制、RPU控制。其中，系统级控制任务通过多层系统总线对系统中的外设控制器、DMA控制器和片外存储控制器进行控制，已完成对系统级的控制。
RPU内的可重构控制器包括配置信息解析器、配置流程控制器和配置存储器。PRU中的控制任务包括通过配置总线向RPU写入配置信息，以完成对RPU运行的控制。
其运行流程如下：
1.配置信息解析器对主控制器写入的配置信息进行解析。
2.配置流程控制器中根据解析出的配置信息对配置存储器的读访问进行控制，已完成对配置流程的控制。
3.从配置存储器中读出的配置信息被写入到RPU内的可重构数据通路，已完成对数据通路的功能配置。
4.数据通路在完成运算之后，将完成信号反馈回配置流程控制器，以触发下一次对配置存储器的读访问。
在REMUS中，FSM（有限状态机？）被分为带有分支部分和顺序执行部分。带有分支的部分被分配到主控制器上，通过软件的方式来实现。顺序执行部分有RPU内的配置流程控制器来实现。这种复合的处理方式可以用专用的配置流程控制器来对FSM中顺序执行部分进行加速。
REMUS分为两个版本，分别是REMUS高性能版本和REMUS低功耗版本。二者区别在于包含的RPU个数。前者有两个RPU，后者一个RPU。每个RPU中包含有一个规模为1616的运算单元阵列。
REMUS高性能版本主要应用于高清分辨率（19201080）的视频码流的实时解码，REMUS低功耗版本主要应用于低分辨率（720*480）的视频码流的实时解码。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/221c678db9dfca3345930d7b065c3472/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-14T22:03:10+08:00" />
<meta property="article:modified_time" content="2022-07-14T22:03:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">可重构计算处理器设计实例REMUS——REMUS总体硬件架构</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>前半年看了一些关于CGRA的论文，但是对从硬件架构到编译的整体还有没有很系统的认识。<br> 跟我导借了本书，拓展知识面一下，顺便做个笔记（不定时更新）</p> 
<p><strong>1.1 REMUS的硬件架构</strong><br> REMUS 多标准视频解码可重构计算处理器<br> 主要用于多媒体领域内的视频解码应用。除此之外还拓展实现了通信基带处理领域内的全球定位系统算法（GPS算法），计算机视觉领域内的Adaboost算法（这个算法 西瓜书上有介绍哎）、SIFT算法和SURF算法，以及密码学领域内的多种加密算法（这个领域俺就一窍不通了）<br> <img src="https://images2.imgbox.com/06/9b/Nq4LBCkz_o.png" alt="在这里插入图片描述"></p> 
<p>多层系统主线：连接外设控制器、DMA控制器（这个DMA貌似是用于划分bank的？）、片上存储器、片外存储控制器<br> 配置总线：主控制器通过配置总线，对可重构处理单元（reconfigurabale processing unit PRU 整个系统中的核心模块）进行控制，RPU通过设置片外存储控制器对其进行读写访问</p> 
<p>可以看到，REMUS分为两大块：<strong>可重构数据通路</strong>和<strong>可重构控制器</strong>。<br> 在这里是不是应该解释一下何为 配置，何为 可重构。是这样的，可重构处理器。<br> 补充小知识：<br> <img src="https://images2.imgbox.com/61/cd/k0bh47jG_o.png" alt="在这里插入图片描述"></p> 
<p>可重构处理器长这样，里面每个PE算作一个计算单元嘛，可以通过配置，来重构这些PE的功能。这样可以达到一次配置多次执行（也就是刚刚开始配置好了，然后让数据在片上进行流水线运动，因为一般是处理循环这种密集型计算嘛）。<br> 其中编译在里面起到的作用就很关键，因为循环中的kernel千变万化撒，怎么样让kernel中这些算子，满足这些资源约束、依赖约束一一映射到PE阵列中呢？<br> 其中有两种映射方法：空间映射和时域映射（在这里就不展开讲了，后续应该会补充）</p> 
<p><strong>回到正题</strong></p> 
<p>首先，其中的可重构数据通路包括<strong>系统级的可重构数据通路</strong>和<strong>RPU内的可重构数据通路</strong>。</p> 
<p><strong>系统级的可重构数据通路</strong>包括：片外存储器、DMA控制器、片上存储器、片外存储控制器。<br> 其运行流程为：DMA控制器被系统中的主控制器设置后，通过片外存储控制器访问片外存储器，将数据从片外存储器读出并且写入到片上存储器（或者将数据从片上存储器写入片外存储器）</p> 
<p><strong>RPU内的可重构数据通路</strong>包括：运算单元阵列、输入数据存储器、输出数据存储器、中间数据存储器、内部DMAC控制器。</p> 
<p>其运行流程如下：<br> 1.内部DMAC控制器通过设置片外存储控制器将原始数据从片外存储器读出并且写入RPU内部的输入数据存储器<br> 2.PEA（也就是PE阵列）从输入数据存储器中读取数据并对数据进行运算<br> 3.运算结果存于输出数据存储器，并将中间运算结果存于中间数据存储器<br> 4.待多次运算全部完成后，内部DMAC控制器将结果数据从输出数据存储器中读出，并通过片外存储控制器写出至片外</p> 
<p>其次，REMUS可重构控制器也分为<strong>系统级可重构控制器</strong>和<strong>RPU内的可重构控制器</strong>。</p> 
<p><strong>系统级可重构控制器</strong>由主控制器和配置总线组成，主控制器采用ARM7来实现，包含系统控制、RPU控制。其中，系统级控制任务通过多层系统总线对系统中的外设控制器、DMA控制器和片外存储控制器进行控制，已完成对系统级的控制。</p> 
<p><strong>RPU内的可重构控制器</strong>包括配置信息解析器、配置流程控制器和配置存储器。PRU中的控制任务包括通过配置总线向RPU写入配置信息，以完成对RPU运行的控制。</p> 
<p>其运行流程如下：<br> 1.配置信息解析器对主控制器写入的配置信息进行解析。<br> 2.配置流程控制器中根据解析出的配置信息对配置存储器的读访问进行控制，已完成对配置流程的控制。<br> 3.从配置存储器中读出的配置信息被写入到RPU内的可重构数据通路，已完成对数据通路的功能配置。<br> 4.数据通路在完成运算之后，将完成信号反馈回配置流程控制器，以触发下一次对配置存储器的读访问。</p> 
<p>在REMUS中，FSM（有限状态机？）被分为带有分支部分和顺序执行部分。带有分支的部分被分配到主控制器上，通过软件的方式来实现。顺序执行部分有RPU内的配置流程控制器来实现。这种复合的处理方式可以用专用的配置流程控制器来对FSM中顺序执行部分进行加速。</p> 
<p>REMUS分为两个版本，分别是REMUS高性能版本和REMUS低功耗版本。二者区别在于包含的RPU个数。前者有两个RPU，后者一个RPU。每个RPU中包含有一个规模为16<em>16的运算单元阵列。<br> REMUS高性能版本主要应用于高清分辨率（1920</em>1080）的视频码流的实时解码，REMUS低功耗版本主要应用于低分辨率（720*480）的视频码流的实时解码。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a1e0f61fac2bf81200e8dfe57075d43f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">网络运维系列：Ubnt ER-X初始化和开启硬件NAT</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9764b11f7a02458a0d86a5f340dd8465/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Linux】ansible批量管理服务器</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>