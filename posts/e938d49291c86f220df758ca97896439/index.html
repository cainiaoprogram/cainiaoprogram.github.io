<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>钉钉H5微应用开发免登以及接口调试 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="钉钉H5微应用开发免登以及接口调试" />
<meta property="og:description" content="钉钉H5微应用开发以及接口调试 企业内部应用免登
https://open.dingtalk.com/document/orgapp-server/enterprise-internal-application-logon-free
1. H5微应用免登录开发 开发微应用
需要获取到钉钉企业的ID ，打开https://open-dev.dingtalk.com/ 地址获取，页面右上角的CorpId
钉钉官方提供的微应用免登授权码在线请求：
https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/jsapi?api=runtime.permission.requestAuthCode
引入钉钉官方提供的js sdk &lt;script src=&#34;https://g.alicdn.com/dingding/dingtalk-jsapi/2.13.42/dingtalk.open.js&#34;&gt;&lt;/script&gt;
获取临时登录code免登授权码 dd.runtime.permission.requestAuthCode({
corpId: &#34;企业ID&#34;,
onSuccess: function(result) {
result.code; //免登授权码
}
根据获取到的code请求后端接口，进入免登录流程 调试微应用
网页版调试：
https://open.dingtalk.com/document/resourcedownload/h5-micro-application-debugging-tool
RC版调试
https://open.dingtalk.com/document/resourcedownload/h5-debug
推荐使用RC版调试的Android调试包，使用谷歌浏览器打开chrome://inspect 地址进行调试
开发过程中可以使用穿透工具，方便打断点调试，省去发布过程，提高效率。
穿透工具推荐钉钉官方提供的工具
https://open.dingtalk.com/document/resourcedownload/http-intranet-penetration
以及开源的FastTunnel（gitee有源码以及文档
https://gitee.com/Hgui/FastTunnel?_from=gitee_search，目前已有1.9k星）
2. 免登录接口调用 服务端SDK下载:https://open.dingtalk.com/document/resourcedownload/download-server-sdk
.net 的还需要引入nuget包AlibabaCloud.SDK.Dingtalk
官方在线请求api文档：https://open.dingtalk.com/document/resourcedownload/api-explorer
还需要保存H5微应用的appkey以及appsecret在H5微应用控制台可得到
获取accessToken免登凭证，需要h5微应用应用的appkey和appsecret 在线请求地址，含有代码示例
https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/?devType=org&amp;api=dingtalk.oapi.sso.gettoken
通过免登码获取到用户信息，需要前端提供的code和后端获取到的accesstoken https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/?devType=org&amp;api=dingtalk.oapi.v2.user.getuserinfo
获取用户详情，需要根据用户信息获取到的userid以及accesstoken(判断用户身份只需要走到第二步就行） https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.51cb3a086Isuuh#/?devType=org&amp;api=dingtalk.oapi.v2.user.get" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e938d49291c86f220df758ca97896439/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-28T17:45:53+08:00" />
<meta property="article:modified_time" content="2021-12-28T17:45:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">钉钉H5微应用开发免登以及接口调试</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><strong>钉钉H5微应用开发以及接口调试</strong></h3> 
<p>企业内部应用免登</p> 
<p>https://open.dingtalk.com/document/orgapp-server/enterprise-internal-application-logon-free</p> 
<h5>1. <strong>H5微应用免登录开发</strong></h5> 
<p>开发微应用</p> 
<p>  </p> 
<p>  需要获取到钉钉企业的ID ，打开https://open-dev.dingtalk.com/ 地址获取，页面右上角的CorpId</p> 
<p>  </p> 
<p>  钉钉官方提供的微应用免登授权码在线请求：</p> 
<p><a href="https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/jsapi?api=runtime.permission.requestAuthCode" rel="nofollow"><u>https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/jsapi?api=runtime.permission.requestAuthCode</u></a></p> 
<p> </p> 
<ol><li>引入钉钉官方提供的js sdk</li></ol> 
<p>&lt;script src="https://g.alicdn.com/dingding/dingtalk-jsapi/2.13.42/dingtalk.open.js"&gt;&lt;/script&gt;</p> 
<p> </p> 
<ol start="2"><li>获取临时登录code免登授权码</li></ol> 
<p>dd.runtime.permission.requestAuthCode({<!-- --></p> 
<p>  corpId: "企业ID",</p> 
<p>  onSuccess: function(result) {<!-- --></p> 
<p> result.code; //免登授权码</p> 
<p>}</p> 
<p> </p> 
<ol start="3"><li>根据获取到的code请求后端接口，进入免登录流程</li></ol> 
<p> </p> 
<p>调试微应用</p> 
<p> </p> 
<p>  网页版调试：</p> 
<p><a href="https://open.dingtalk.com/document/resourcedownload/h5-micro-application-debugging-tool" rel="nofollow"><u>https://open.dingtalk.com/document/resourcedownload/h5-micro-application-debugging-tool</u></a></p> 
<p> </p> 
<p> RC版调试</p> 
<p><a href="https://open.dingtalk.com/document/resourcedownload/h5-debug" rel="nofollow"><u>https://open.dingtalk.com/document/resourcedownload/h5-debug</u></a></p> 
<p> </p> 
<p>推荐使用RC版调试的Android调试包，使用谷歌浏览器打开chrome://inspect 地址进行调试</p> 
<p> </p> 
<p>开发过程中可以使用穿透工具，方便打断点调试，省去发布过程，提高效率。</p> 
<p>穿透工具推荐钉钉官方提供的工具</p> 
<p><a href="https://open.dingtalk.com/document/resourcedownload/http-intranet-penetration" rel="nofollow"><u>https://open.dingtalk.com/document/resourcedownload/http-intranet-penetration</u></a></p> 
<p>以及开源的FastTunnel（gitee有源码以及文档</p> 
<p>https://gitee.com/Hgui/FastTunnel?_from=gitee_search，目前已有1.9k星）</p> 
<p> </p> 
<p> </p> 
<h5>2. <strong>免登录接口调用</strong></h5> 
<p>服务端SDK下载:https://open.dingtalk.com/document/resourcedownload/download-server-sdk</p> 
<p>.net 的还需要引入nuget包AlibabaCloud.SDK.Dingtalk</p> 
<p> </p> 
<p>官方在线请求api文档：https://open.dingtalk.com/document/resourcedownload/api-explorer</p> 
<p>还需要保存H5微应用的appkey以及appsecret在H5微应用控制台可得到</p> 
<ol><li>获取accessToken免登凭证，需要h5微应用应用的appkey和appsecret</li></ol> 
<p>在线请求地址，含有代码示例</p> 
<p><a href="https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/?devType=org&amp;api=dingtalk.oapi.sso.gettoken" rel="nofollow"><u>https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/?devType=org&amp;api=dingtalk.oapi.sso.gettoken</u></a></p> 
<p> </p> 
<ol start="2"><li>通过免登码获取到用户信息，需要前端提供的code和后端获取到的accesstoken</li></ol> 
<p><a href="https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/?devType=org&amp;api=dingtalk.oapi.v2.user.getuserinfo" rel="nofollow"><u>https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.45642b498W49hm#/?devType=org&amp;api=dingtalk.oapi.v2.user.getuserinfo</u></a></p> 
<p> </p> 
<ol start="3"><li>获取用户详情，需要根据用户信息获取到的userid以及accesstoken(判断用户身份只需要走到第二步就行）</li></ol> 
<p><a href="https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.51cb3a086Isuuh#/?devType=org&amp;api=dingtalk.oapi.v2.user.get" rel="nofollow"><u>https://open-dev.dingtalk.com/apiExplorer?spm=ding_open_doc.document.0.0.51cb3a086Isuuh#/?devType=org&amp;api=dingtalk.oapi.v2.user.get</u></a></p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/026ef48e86d7428186f43fa497872708/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C# 获取当前时间戳（正确版）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8c06f22b81457dcca5e2f4a0eb88b35e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">（二）双线性插值python实现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>