<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>C语言sscanf()函数（从字符串读取格式化输入，提取需要的信息） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="C语言sscanf()函数（从字符串读取格式化输入，提取需要的信息）" />
<meta property="og:description" content="C语言函数fscanf()（从流 stream 读取格式化输入）（如果成功，返回成功匹配和赋值的个数；否则返回EOF）（分隔符：space、Tab、Enter）
需包含头文件：C 标准库 - &lt;stdio.h&gt;
文章目录 描述声明参数返回值实例我在VS上测试（VS上要用sscanf_s）示例1示例2（提取时能默认以空格分割） 描述 C 库函数 int sscanf(const char *str, const char *format, ...) 从字符串读取格式化输入。
声明 下面是 sscanf() 函数的声明。
int sscanf(const char *str, const char *format, ...) 参数 str – 这是 C 字符串，是函数检索数据的源。format – 这是 C 字符串，包含了以下各项中的一个或多个：空格字符、非空格字符 和 format 说明符。format 说明符形式为 [=%[*][width][modifiers]type=]，具体讲解如下：
sscanf 类型说明符： 附加参数 – 这个函数接受一系列的指针作为附加参数，每一个指针都指向一个对象，对象类型由 format 字符串中相应的 % 标签指定，参数与 % 标签的顺序相同。针对检索数据的 format 字符串中的每个 format 说明符，应指定一个附加参数。如果您想要把 sscanf 操作的结果存储在一个普通的变量中，您应该在标识符前放置引用运算符（&amp;），例如： int n; sscanf (str,&#34;%d&#34;,&amp;amp;n); 返回值 如果成功，该函数返回成功匹配和赋值的个数。如果到达文件末尾或发生读错误，则返回 EOF。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8aa72c1762b7512f988650a73faef4b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-12T09:57:20+08:00" />
<meta property="article:modified_time" content="2022-08-12T09:57:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">C语言sscanf()函数（从字符串读取格式化输入，提取需要的信息）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><a href="https://blog.csdn.net/Dontla/article/details/122973904">C语言函数fscanf()（从流 stream 读取格式化输入）（如果成功，返回成功匹配和赋值的个数；否则返回EOF）（分隔符：space、Tab、Enter）</a></p> 
<hr> 
<p>需包含头文件：C 标准库 - &lt;stdio.h&gt;</p> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_9" rel="nofollow">描述</a></li><li><a href="#_12" rel="nofollow">声明</a></li><li><a href="#_19" rel="nofollow">参数</a></li><li><a href="#_34" rel="nofollow">返回值</a></li><li><a href="#_37" rel="nofollow">实例</a></li><li><a href="#VSVSsscanf_s_63" rel="nofollow">我在VS上测试（VS上要用sscanf_s）</a></li><li><ul><li><a href="#1_76" rel="nofollow">示例1</a></li><li><a href="#2_101" rel="nofollow">示例2（提取时能默认以空格分割）</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_9"></a>描述</h3> 
<p>C 库函数 <code>int sscanf(const char *str, const char *format, ...)</code> 从字符串读取格式化输入。</p> 
<h3><a id="_12"></a>声明</h3> 
<p>下面是 sscanf() 函数的声明。</p> 
<pre><code class="prism language-css">int <span class="token function">sscanf</span><span class="token punctuation">(</span>const char *str<span class="token punctuation">,</span> const char *format<span class="token punctuation">,</span> ...<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_19"></a>参数</h3> 
<ul><li>str – 这是 C 字符串，是函数检索数据的源。</li><li>format – 这是 C 字符串，包含了以下各项中的一个或多个：空格字符、非空格字符 和 format 说明符。</li><li>format 说明符形式为 <code>[=%[*][width][modifiers]type=]</code>，具体讲解如下：<br> <img src="https://images2.imgbox.com/ca/a5/gLpf2SXe_o.png" alt="在这里插入图片描述"><br> sscanf 类型说明符：</li></ul> 
<p><img src="https://images2.imgbox.com/63/a7/D6A8gNJJ_o.png" alt="在这里插入图片描述"></p> 
<ul><li>附加参数 – 这个函数接受一系列的指针作为附加参数，每一个指针都指向一个对象，对象类型由 format 字符串中相应的 % 标签指定，参数与 % 标签的顺序相同。</li><li>针对检索数据的 format 字符串中的每个 format 说明符，应指定一个附加参数。如果您想要把 sscanf 操作的结果存储在一个普通的变量中，您应该在标识符前放置引用运算符（&amp;），例如：</li></ul> 
<pre><code class="prism language-css">int n<span class="token punctuation">;</span>
sscanf <span class="token punctuation">(</span>str<span class="token punctuation">,</span><span class="token string">"%d"</span><span class="token punctuation">,</span>&amp;amp<span class="token punctuation">;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<h3><a id="_34"></a>返回值</h3> 
<p>如果成功，该函数返回成功匹配和赋值的个数。如果到达文件末尾或发生读错误，则返回 EOF。</p> 
<h3><a id="_37"></a>实例</h3> 
<p>下面的实例演示了 sscanf() 函数的用法。</p> 
<pre><code class="prism language-css"><span class="token selector">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main()</span>
<span class="token punctuation">{<!-- --></span>
   int day<span class="token punctuation">,</span> year<span class="token punctuation">;</span>
   char weekday[20]<span class="token punctuation">,</span> month[20]<span class="token punctuation">,</span> dtm[100]<span class="token punctuation">;</span>

   <span class="token function">strcpy</span><span class="token punctuation">(</span> dtm<span class="token punctuation">,</span> <span class="token string">"Saturday March 25 1989"</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">sscanf</span><span class="token punctuation">(</span> dtm<span class="token punctuation">,</span> <span class="token string">"%s %s %d  %d"</span><span class="token punctuation">,</span> weekday<span class="token punctuation">,</span> month<span class="token punctuation">,</span> &amp;day<span class="token punctuation">,</span> &amp;year <span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d, %d = %s\n"</span><span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">,</span> year<span class="token punctuation">,</span> weekday <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
   <span class="token function">return</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>让我们编译并运行上面的程序，这将产生以下结果：</p> 
<pre><code class="prism language-css">March 25<span class="token punctuation">,</span> 1989 = Saturday
</code></pre> 
<h3><a id="VSVSsscanf_s_63"></a>我在VS上测试（VS上要用sscanf_s）</h3> 
<p>sscanf_s 取值的时候，需要在每个取值后面指定取值的最大大小。<br> （而且根据VS提示，貌似还需要是 unsigned int 类型）</p> 
<pre><code class="prism language-css">_CRT_STDIO_INLINE int __CRTDECL sscanf_<span class="token function">s</span><span class="token punctuation">(</span>
            _In_z_                         char const* const _Buffer<span class="token punctuation">,</span>
            _In_z_ _Scanf_s_format_string_ char const* const _Format<span class="token punctuation">,</span>
            ...<span class="token punctuation">)</span>
</code></pre> 
<pre><code class="prism language-css">sscanf_<span class="token function">s</span><span class="token punctuation">(</span>inputString<span class="token punctuation">,</span> <span class="token string">"%s.%s.%s.%s"</span><span class="token punctuation">,</span> s1<span class="token punctuation">,</span> s1.length<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> s2.length<span class="token punctuation">,</span> s3<span class="token punctuation">,</span> s3.length<span class="token punctuation">,</span> s4<span class="token punctuation">,</span> s4.length<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> 
<h4><a id="1_76"></a>示例1</h4> 
<pre><code class="prism language-css"><span class="token selector">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main()</span>
<span class="token punctuation">{<!-- --></span>
    int day<span class="token punctuation">,</span> year<span class="token punctuation">;</span>
    char weekday[20]<span class="token punctuation">,</span> month[20]<span class="token punctuation">,</span> dtm[100]<span class="token punctuation">;</span>

    strcpy_<span class="token function">s</span><span class="token punctuation">(</span>dtm<span class="token punctuation">,</span> <span class="token string">"Saturday March 25 1989"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sscanf_<span class="token function">s</span><span class="token punctuation">(</span>dtm<span class="token punctuation">,</span> <span class="token string">"%s %s %d %d"</span><span class="token punctuation">,</span> weekday<span class="token punctuation">,</span> <span class="token punctuation">(</span>unsigned int<span class="token punctuation">)</span><span class="token function">sizeof</span><span class="token punctuation">(</span>weekday<span class="token punctuation">)</span><span class="token punctuation">,</span> month<span class="token punctuation">,</span> <span class="token punctuation">(</span>unsigned int<span class="token punctuation">)</span><span class="token function">sizeof</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span><span class="token punctuation">,</span> &amp;day<span class="token punctuation">,</span> &amp;year<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%s %d, %d = %s\n"</span><span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">,</span> year<span class="token punctuation">,</span> weekday<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">return</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行结果：</p> 
<pre><code class="prism language-css">March 25<span class="token punctuation">,</span> 1989 = Saturday
</code></pre> 
<h4><a id="2_101"></a>示例2（提取时能默认以空格分割）</h4> 
<pre><code class="prism language-css"><span class="token selector">#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;

int main()</span>
<span class="token punctuation">{<!-- --></span>
    char line[1024] = <span class="token string">"path=/live/main_stream video_type=7 width=1920 height=1080 image_type=4 video_path=rkispp_scale0"</span><span class="token punctuation">;</span>

    const char* p<span class="token punctuation">;</span>
    
    p = <span class="token function">strstr</span><span class="token punctuation">(</span>line<span class="token punctuation">,</span> <span class="token string">"path="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    char path[64]<span class="token punctuation">;</span>

    <span class="token function">if</span><span class="token punctuation">(</span>NULL != p<span class="token punctuation">)</span>
        sscanf_<span class="token function">s</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> <span class="token string">"path=%s"</span><span class="token punctuation">,</span> path<span class="token punctuation">,</span> <span class="token punctuation">(</span>unsigned int<span class="token punctuation">)</span><span class="token function">sizeof</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">return</span><span class="token punctuation">(</span>0<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行调试结果：<br> <img src="https://images2.imgbox.com/e9/e3/67471wQn_o.png" alt="在这里插入图片描述"></p> 
<p><a href="https://www.runoob.com/cprogramming/c-function-sscanf.html" rel="nofollow">参考文章1：C 库函数 - sscanf()</a></p> 
<p><a href="https://www.cnblogs.com/kex1n/archive/2011/06/09/2076501.html" rel="nofollow">参考文章2：sscanf，sscanf_s及其相关用法</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a12c5d7972b3ec3d8aad248bfbc90eee/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">目标检测mAP（Mean Average Precision）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f8911f501551d286b61e1781ae3c1508/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Comparison method violates its general contract解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>