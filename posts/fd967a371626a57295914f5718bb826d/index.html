<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nginx &#43; Tomcat HTTPS/SSL 配置方法 ——申请证书 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nginx &#43; Tomcat HTTPS/SSL 配置方法 ——申请证书" />
<meta property="og:description" content="最新研究了一下NGINX&#43;TOMCAT 配置 HTTS。其实还是比较简单。知识其中有些流程如果没有搞清楚，还是容易被绕晕。在此简单的分享一下。
首先服务器采用的是 NGINX 负载了两台TOMCAT。这里容易误会成NGINX和tomcat的证书需要有所关联，其实不然。NGINX和tomcat的配置是独立开来的。可以当做两个工作来做。
先说一下服务器安装需要哪些文件。
TOMCAT : CSR文件 JKS文件 从服务商处获取的 TOMCAT服务器证书 和 服务商的中级证书
NGINX: CSR文件 KEY文件 从服务商处获得的证书文件（这里比tomcat少一个服务商中级证书，因为NGINX的证书本身包含了服务器证书和中级证书，如果申请时提供的CSR是同一个，那此处的证书实际上是 TOMCAT的服务器证书和 中级证书 拼成的一个文件。使用文档编辑器打开看一下就会明白了）
申请NGINX和TOMCAT证书文件 。这里有两种方法： 第一种（NGINX和TOMCAT使用各自的CSR文件）：
1.在服务器上生成TOMCAT的 JKS,通过JKS生成 CSR。 参考：https://www.trustasia.com/help/tomcat6x-generate-csr.htm
这里特别注意 使用的 别名 和 密码 要牢记。因为按照证书时要保持一致。 2.在服务器上生成NGINX 的 CSR文件 和 KEY文件。 参考：https://www.trustasia.com/help/nginx-generate-csr.htm 也可以方便的使用在线生成工具：https://www.trustasia.com/tools/csr-generator/
网上相关的文章很多，这里就不多说了。 需要特别注意此处生成的CSR只使用于NGINX。TOMCAT服务器必须要有JKS（这里也可以是kestore,其本质就是一个密钥存储的容器）。
经过以上两部可以得到 NGINX的CSR文件和tomcat的CSR文件。将两个CSR分别提交申请。可以获得相应的证书文件。
第二种（NGINX和TOMCAT使用同一CSR文件）
1.在服务器上生成TOMCAT的 JKS,通过JKS生成 CSR。 参考：https://www.trustasia.com/help/tomcat6x-generate-csr.htm 这里特别注意 使用的 别名 和 密码 要牢记。因为按照证书时要保持一致。 2.NGINX的CSR可以使用TOMCAT的CSR。这样我们必须要通过TOMCAT的JKS文件生成 NGINX的KEY文件。参考：http://blog.csdn.net/maotongbin/article/details/51064272
通过CSR申请获得证书文件，你会发现NGINX的证书文件，实际上就是TOMCAT两个证书文件拼成的一个文件。
最后提供两个校验方法：
CSR校验：https://cryptoreport.websecurity.symantec.com/checker/views/csrCheck.jsp
校验 证书 、CSR、KEY是否一致：
symfile:ssl2016&gt;openssl x509 -noout -modulus -in 证书." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fd967a371626a57295914f5718bb826d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-04-05T14:46:37+08:00" />
<meta property="article:modified_time" content="2016-04-05T14:46:37+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx &#43; Tomcat HTTPS/SSL 配置方法 ——申请证书</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        最新研究了一下NGINX+TOMCAT 配置 HTTS。其实还是比较简单。知识其中有些流程如果没有搞清楚，还是容易被绕晕。在此简单的分享一下。</p> 
<p>        首先服务器采用的是 NGINX 负载了两台TOMCAT。这里容易误会成NGINX和tomcat的证书需要有所关联，其实不然。NGINX和tomcat的配置是独立开来的。可以当做两个工作来做。</p> 
<p>        先说一下服务器安装需要哪些文件。</p> 
<p>        TOMCAT :  CSR文件  JKS文件    从服务商处获取的 TOMCAT服务器证书  和  服务商的中级证书<br> </p> 
<p>        NGINX:      CSR文件   KEY文件    从服务商处获得的证书文件（这里比tomcat少一个服务商中级证书，因为NGINX的证书本身包含了服务器证书和中级证书，如果申请时提供的CSR是同一个，那此处的证书实际上是 TOMCAT的服务器证书和 中级证书 拼成的一个文件。使用文档编辑器打开看一下就会明白了）</p> 
<p> <br> </p> 
<p>       申请NGINX和TOMCAT证书文件 。这里有两种方法： <br> </p> 
<p>       第一种（NGINX和TOMCAT使用各自的CSR文件）：</p> 
<p>                1.在服务器上生成TOMCAT的 JKS,通过JKS生成 CSR。 参考：https://www.trustasia.com/help/tomcat6x-generate-csr.htm</p> 
<p>                 这里特别注意  使用的 别名 和 密码 要牢记。因为按照证书时要保持一致。      <br> </p> 
<p>                2.在服务器上生成NGINX 的  CSR文件 和  KEY文件。 参考：https://www.trustasia.com/help/nginx-generate-csr.htm <br> </p> 
<p>                    也可以方便的使用在线生成工具：https://www.trustasia.com/tools/csr-generator/</p> 
<p>                网上相关的文章很多，这里就不多说了。 需要特别注意此处生成的CSR只使用于NGINX。TOMCAT服务器必须要有JKS（这里也可以是kestore,其本质就是一个密钥存储的容器）。</p> 
<p>             <br> </p> 
<p><br> </p> 
<p>              经过以上两部可以得到  NGINX的CSR文件和tomcat的CSR文件。将两个CSR分别提交申请。可以获得相应的证书文件。</p> 
<p><br> </p> 
<p>     第二种（NGINX和TOMCAT使用同一CSR文件）</p> 
<p>                 1.在服务器上生成TOMCAT的 JKS,通过JKS生成 CSR。 参考：https://www.trustasia.com/help/tomcat6x-generate-csr.htm      <br> </p> 
<p>                    这里特别注意  使用的 别名 和 密码 要牢记。因为按照证书时要保持一致。       <br> </p> 
<p>                 2.NGINX的CSR可以使用TOMCAT的CSR。这样我们必须要通过TOMCAT的JKS文件生成 NGINX的KEY文件。参考：http://blog.csdn.net/maotongbin/article/details/51064272</p> 
<p>                 通过CSR申请获得证书文件，你会发现NGINX的证书文件，实际上就是TOMCAT两个证书文件拼成的一个文件。</p> 
<p><br> </p> 
<p>       最后提供两个校验方法：</p> 
<p>         CSR校验：https://cryptoreport.websecurity.symantec.com/checker/views/csrCheck.jsp</p> 
<p>         校验 证书 、CSR、KEY是否一致：</p> 
<p>                </p> 
<pre><code class="language-plain">symfile:ssl2016&gt;openssl x509 -noout -modulus -in 证书.crt | openssl md5
(stdin)= 5880ddf3067e9d36c50ae7efbb9d7377
symfile:ssl2016&gt;openssl req -noout -modulus -in  CSR文件.csr | openssl md5
(stdin)= 5880ddf3067e9d36c50ae7efbb9d7377
symfile:ssl2016&gt;openssl rsa -noout -modulus -in KEY文件.key | openssl md5
(stdin)= a36797b0dd727418868a8ca0f59343e2</code></pre> 
<br> 
<br> 
<p></p> 
<p>      <br> </p> 
<p><br> </p> 
<p><br> </p> 
<p>          <br> </p> 
<p>                    <br> </p> 
<p> <br> </p> 
<p>          <br> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c972951b9699e0348280fd37e11cd950/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CSS3----新增特性及其在主流浏览器中的兼容性</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ce75627751301d778e723c3dcb545fde/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">linux修改TCP连接数(centos实测)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>