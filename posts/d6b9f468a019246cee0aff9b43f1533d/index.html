<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>医疗知识图谱问答系统探究（一） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="医疗知识图谱问答系统探究（一）" />
<meta property="og:description" content="1、项目背景 为通过项目实战增加对知识图谱的认识，几乎找了所有网上的开源项目及视频实战教程。
果然，功夫不负有心人，找到了中科院软件所刘焕勇老师在github上的开源项目，基于知识图谱的医药领域问答项目QABasedOnMedicaKnowledgeGraph。
项目地址：https://github.com/liuhuanyong/QASystemOnMedicalKG
用了两个晚上搭建了两套，Mac版与Windows版，哈哈，运行成功！！！
从无到有搭建一个以疾病为中心的一定规模医药领域知识图谱，以该知识图谱完成自动问答与分析服务。该项目立足医药领域，以垂直型医药网站为数据来源，以疾病为核心，构建起一个包含7类规模为4.4万的知识实体，11类规模约30万实体关系的知识图谱。 本项目将包括以下两部分的内容：
1、基于垂直网站数据的医药知识图谱构建 2、基于医药知识图谱的自动问答 2、项目环境 2.1 windows系统 搭建中间有很多坑，且行且注意。
配置要求：要求配置neo4j数据库及相应的python依赖包。neo4j数据库用户名密码记住，并修改相应文件。
安装neo4j，neo4j 依赖java jdk 1.8版本以上：
java jdk安装方法可参考： windows系统下安装JDK8，下载地址： https://download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jdk-8u201-windows-x64.exe 安装neo4j可参考博文： windows安装neo4j，下载地址： https://go.neo4j.com/download-thanks.html?edition=community&amp;release=3.4.1&amp;flavour=winzip 安装python可参考： Windows环境下安装python2.7 根据neo4j 安装时的端口、账户、密码配置设置设置项目配置文件：answer_search.py &amp; build_medicalgraph.py (github下载项目时根据个人需要也可使用git)
数据导入：python build_medicalgraph.py，导入的数据较多，估计需要几个小时。
python build_medicalgraph.py导入数据之前，需要在该文件main函数中加入：
build_medicalgraph.py
启动问答：python chat_graph.py
2.2 Mac系统
mac本身自带python、java jdk环境，可直接安装neo4j图数据库，项目运行步骤与windows基本一样。
问题解答：
安装过程中如遇问题可联系Wechat: dandan-sbb。 2.3 Neo4j数据库展示 2.4 问答系统运行效果 3、项目介绍 该项目的数据来自垂直类医疗网站寻医问药，使用爬虫脚本data_spider.py，以结构化数据为主，构建了以疾病为中心的医疗知识图谱，实体规模4.4万，实体关系规模30万。schema的设计根据所采集的结构化数据生成，对网页的结构化数据进行xpath解析。
项目的数据存储采用Neo4j图数据库，问答系统采用了规则匹配方式完成，数据操作采用neo4j声明的cypher。
项目的不足之处在于疾病的引发原因、预防等以大段文字返回，这块可引入事件抽取，可将原因结构化表示出来。
3.1 项目目录 . ├── README.md ├── __pycache__ \\编译结果保存目录 │ ├── answer_search.cpython-36.pyc │ ├── question_classifier.cpython-36.pyc │ └── question_parser." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d6b9f468a019246cee0aff9b43f1533d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-15T17:45:00+08:00" />
<meta property="article:modified_time" content="2022-02-15T17:45:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">医疗知识图谱问答系统探究（一）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3><strong>1、项目背景</strong></h3> 
<p>为通过项目实战增加对知识图谱的认识，几乎找了所有网上的开源项目及视频实战教程。</p> 
<p>果然，功夫不负有心人，找到了<strong>中科院软件所刘焕勇老师</strong>在github上的开源项目，基于知识图谱的医药领域问答项目QABasedOnMedicaKnowledgeGraph。</p> 
<p><strong>项目地址：</strong><a href="https://link.zhihu.com/?target=https%3A//github.com/liuhuanyong/QASystemOnMedicalKG" title="https://github.com/liuhuanyong/QASystemOnMedicalKG">https://github.com/liuhuanyong/QASystemOnMedicalKG</a></p> 
<p>用了两个晚上搭建了两套，Mac版与Windows版，哈哈，运行成功！！！</p> 
<p>从无到有搭建一个以疾病为中心的一定规模医药领域知识图谱，以该知识图谱完成自动问答与分析服务。该项目立足医药领域，以垂直型医药网站为数据来源，以疾病为核心，构建起一个包含7类规模为4.4万的知识实体，11类规模约30万实体关系的知识图谱。 本项目将包括以下两部分的内容：</p> 
<blockquote>
  1、基于垂直网站数据的医药知识图谱构建 
 <br> 2、基于医药知识图谱的自动问答 
</blockquote> 
<h3><strong>2、项目环境</strong></h3> 
<h3><strong>2.1 windows系统</strong></h3> 
<p><strong>搭建中间有很多坑，且行且注意。</strong></p> 
<p><strong>配置要求：</strong>要求配置neo4j数据库及相应的python依赖包。neo4j数据库用户名密码记住，并修改相应文件。</p> 
<p>安装neo4j，neo4j 依赖java jdk 1.8版本以上：</p> 
<blockquote>
  java jdk安装方法可参考： 
 <a href="https://link.zhihu.com/?target=https%3A//blog.csdn.net/yx1214442120/article/details/55098380" rel="nofollow" title="windows系统下安装JDK8">windows系统下安装JDK8</a>，下载地址： 
 <a href="https://link.zhihu.com/?target=https%3A//download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jdk-8u201-windows-x64.exe" rel="nofollow" title="https://download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jdk-8u201-windows-x64.exe">https://download.oracle.com/otn-pub/java/jdk/8u201-b09/42970487e3af4f5aa5bca3f542482c60/jdk-8u201-windows-x64.exe</a> 
 <br> 安装neo4j可参考博文： 
 <a href="https://link.zhihu.com/?target=https%3A//blog.csdn.net/huanxuwu/article/details/80785986" rel="nofollow" title="windows安装neo4j">windows安装neo4j</a>，下载地址： 
 <a href="https://link.zhihu.com/?target=https%3A//go.neo4j.com/download-thanks.html%3Fedition%3Dcommunity%26release%3D3.4.1%26flavour%3Dwinzip" rel="nofollow" title="https://go.neo4j.com/download-thanks.html?edition=community&amp;release=3.4.1&amp;flavour=winzip">https://go.neo4j.com/download-thanks.html?edition=community&amp;release=3.4.1&amp;flavour=winzip</a> 
 <br> 安装python可参考： 
 <a href="https://link.zhihu.com/?target=https%3A//www.jianshu.com/p/edf7679d4aab" rel="nofollow" title="Windows环境下安装python2.7">Windows环境下安装python2.7</a> 
</blockquote> 
<p>根据neo4j 安装时的端口、账户、密码配置设置设置项目配置文件：<strong>answer_search.py</strong> &amp; <strong>build_medicalgraph.py</strong> (github下载项目时根据个人需要也可使用git)</p> 
<p><strong>数据导入：</strong>python build_medicalgraph.py，导入的数据较多，估计需要几个小时。</p> 
<p>python build_medicalgraph.py导入数据之前，需要在该文件main函数中加入：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/b7/da/B5pf3rJR_o.png"></p> 
<p>build_medicalgraph.py</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/52/75/VyoG4HdY_o.png"></p> 
<p><strong>启动问答：</strong>python chat_graph.py</p> 
<p><strong>2.2 Mac系统</strong></p> 
<p>mac本身自带python、java jdk环境，可直接安装neo4j图数据库，项目运行步骤与windows基本一样。</p> 
<p><strong>问题解答：</strong></p> 
<blockquote> 
 <strong>安装过程中如遇问题可联系Wechat: dandan-sbb。</strong> 
</blockquote> 
<h3><strong>2.3 Neo4j数据库展示</strong></h3> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/51/70/skpqyLs7_o.png"></p> 
<h3><strong>2.4 问答系统运行效果</strong></h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/19/84/xVm3pKW4_o.png"></p> 
<h3><strong>3、项目介绍</strong></h3> 
<p>该项目的数据来自垂直类医疗网站寻医问药，使用爬虫脚本data_spider.py，以结构化数据为主，构建了以疾病为中心的医疗知识图谱，实体规模4.4万，实体关系规模30万。schema的设计根据所采集的结构化数据生成，对网页的结构化数据进行xpath解析。</p> 
<p>项目的数据存储采用Neo4j图数据库，问答系统采用了规则匹配方式完成，数据操作采用neo4j声明的cypher。</p> 
<p>项目的不足之处在于疾病的引发原因、预防等以大段文字返回，这块可引入事件抽取，可将原因结构化表示出来。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/55/66/rf4Mlvii_o.png"></p> 
<h3><strong>3.1 项目目录</strong></h3> 
<pre><code>.
├── README.md
├── __pycache__      \\编译结果保存目录
│   ├── answer_search.cpython-36.pyc
│   ├── question_classifier.cpython-36.pyc
│   └── question_parser.cpython-36.pyc
├── answer_search.py
├── answer_search.pyc
├── build_medicalgraph.py    \\知识图谱数据入库脚本
├── chatbot_graph.py    \\问答程序脚本
├── data
│   └── medicaln.json \\本项目的全部数据，通过build_medicalgraph.py导neo4j
├── dict
│   ├── check.txt    \\诊断检查项目实体库
│   ├── deny.txt      \\否定词库
│   ├── department.txt  \\医疗科目实体库
│   ├── disease.txt    \\疾病实体库
│   ├── drug.txt      \\药品实体库
│   ├── food.txt      \\食物实体库
│   ├── producer.txt    \\在售药品库
│   └── symptom.txt    \\疾病症状实体库
├── document
│   ├── chat1.png    \\系统运行问答截图01
│   ├── chat2.png      \\系统运行问答截图01
│   ├── kg_route.png    \\知识图谱构建框架
│   ├── qa_route.png    \\问答系统框架图
├── img    \\README.md中的所用图片
│   ├── chat1.png
│   ├── chat2.png
│   ├── graph_summary.png
│   ├── kg_route.png
│   └── qa_route.png
├── prepare_data
│   ├── build_data.py    \\数据库操作脚本
│   ├── data_spider.py    \\网络资讯采集脚本
│   └── max_cut.py      \\基于词典的最大向前/向后脚本
├── question_classifier.py    \\问句类型分类脚本
├── question_classifier.pyc    
├── question_parser.py    \\问句解析脚本
├── question_parser.pyc</code></pre> 
<h3><strong>3.2 知识图谱的实体类型</strong></h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ed/6b/J61JrANj_o.png"></p> 
<h3><strong>3.3 知识图谱的实体关系类型</strong></h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/db/66/76EAp5c0_o.png"></p> 
<h3><strong>3.4 知识图谱的属性类型</strong></h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/92/68/6TPX80Zq_o.png"></p> 
<h3><strong>3.5 问答项目实现原理</strong></h3> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5f/27/AbHh9I4f_o.png"></p> 
<p>本项目的问答系统完全基于规则匹配实现，通过关键词匹配，对问句进行分类，医疗问题本身属于封闭域类场景，对领域问题进行穷举并分类，然后使用cypher的match去匹配查找neo4j，根据返回数据组装问句回答，最后返回结果。</p> 
<p><strong>问句中的关键词匹配：</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/7c/d8/2W8oNHfY_o.png"></p> 
<p><strong>根据匹配到的关键词分类问句</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/ce/f9/l4qB9a60_o.png"></p> 
<p><strong>问句解析</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5b/5e/wlokEQol_o.png"></p> 
<p><strong>查找相关数据</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/cd/64/8q7uy23m_o.png"></p> 
<p><strong>根据返回的数据组装回答</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/fd/4e/xhPcxhXD_o.png"></p> 
<p><strong>3.6 问答系统支持的问答类型</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/53/d8/5E1nKXUP_o.png"></p> 
<h3><strong>4、项目总结</strong></h3> 
<p>基于规则的问答系统没有复杂的算法，一般采用模板匹配的方式寻找匹配度最高的答案，回答结果依赖于问句类型、模板语料库的覆盖全面性，面对已知的问题，可以给出合适的答案，对于模板匹配不到的问题或问句类型，经常遇到的有三种回答方式：</p> 
<blockquote>
  1、给出一个无厘头的答案； 
 <br> 2、婉转的回答不知道，提示用户换种方式去问； 
 <br> 3、转移话题，回避问题； 
</blockquote> 
<p><strong>例如，本项目中采用了婉转的方式回答不知道：</strong></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/52/cf/RfBSDae4_o.png"></p> 
<p>基于知识图谱的问答系统的主要特征是知识图谱，系统依赖一个或多个领域的实体，并基于图谱进行推理或演绎，深度回答用户的问题，基于知识图谱的问答系统更擅长回答知识性问题，与基于模板的聊天机器人有所不同的是它更直接、直观的给用户答案。对于不能回答、或不知道的问题，一般直接返回失败，而不是转移话题避免尴尬。</p> 
<p>整个问答系统的优劣依赖于知识图谱中知识的数量与质量。也算是利弊共存吧！知识图谱图谱具有良好的可扩展性，扩展了知识图谱也就是扩展了问答系统的知识库。如果问句在射程范围内，可轻松回答，但如果不幸脱靶，则体验大打折扣。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a8a306a40d60f12c35acfffc516c80d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【VUE3源码学习】nextTick 实现原理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6c47663f2701e413952c2a9b779636cc/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">VLAN实验</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>