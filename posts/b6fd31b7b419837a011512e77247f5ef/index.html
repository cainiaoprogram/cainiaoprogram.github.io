<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>tcp连接到服务器传输文件,基于TCP Socket的文件传输：正确接收和保存文件 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="tcp连接到服务器传输文件,基于TCP Socket的文件传输：正确接收和保存文件" />
<meta property="og:description" content="我正在尝试创建文件共享程序。到目前为止，连接和文件传输部分都被照顾到了。但我目前在如何正确接收和保存文件时遇到问题。基于TCP Socket的文件传输：正确接收和保存文件
我可以成功接收文件当且仅当我将在服务器端指定它的名称和扩展名。现在我的问题是，如何检索文件的名称和扩展名，以便我可以在服务器上成功接收文件？我的意思是，我不想每次收到文件时都指定一个名称。这可能吗？我正在考虑通过另一个网络流发送文件名，但我想有更好的方法来做到这一点。
在此先感谢！
下面是错误的屏幕截图。
服务器端代码
While True
Dim c As TcpClient = server.AcceptTcpClient
Dim s As NetworkStream = c.GetStream
FileOpen(1, filePath, OpenMode.Binary)
Dim buffer(1024 - 1) As Byte
Do While True
Dim bytesRead As Integer = s.Read(buffer, 0, buffer.Length)
If bytesRead = 0 Then Exit Do
FilePut(1, buffer)
Loop
FileClose(1)
s.Close()
c.Close()
End While
客户端代码
Dim nstm As Stream = cli.GetStream()
Dim fstm As Stream = New FileStream(filePath, FileMode." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b6fd31b7b419837a011512e77247f5ef/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-05T17:54:47+08:00" />
<meta property="article:modified_time" content="2021-08-05T17:54:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">tcp连接到服务器传输文件,基于TCP Socket的文件传输：正确接收和保存文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>我正在尝试创建文件共享程序。到目前为止，连接和文件传输部分都被照顾到了。但我目前在如何正确接收和保存文件时遇到问题。基于TCP Socket的文件传输：正确接收和保存文件</p> 
 <p>我可以成功接收文件当且仅当我将在服务器端指定它的名称和扩展名。现在我的问题是，如何检索文件的名称和扩展名，以便我可以在服务器上成功接收文件？我的意思是，我不想每次收到文件时都指定一个名称。这可能吗？我正在考虑通过另一个网络流发送文件名，但我想有更好的方法来做到这一点。</p> 
 <p>在此先感谢！</p> 
 <p>下面是错误的屏幕截图。</p> 
 <p>服务器端代码</p> 
 <p>While True</p> 
 <p>Dim c As TcpClient = server.AcceptTcpClient</p> 
 <p>Dim s As NetworkStream = c.GetStream</p> 
 <p>FileOpen(1, filePath, OpenMode.Binary)</p> 
 <p>Dim buffer(1024 - 1) As Byte</p> 
 <p>Do While True</p> 
 <p>Dim bytesRead As Integer = s.Read(buffer, 0, buffer.Length)</p> 
 <p>If bytesRead = 0 Then Exit Do</p> 
 <p>FilePut(1, buffer)</p> 
 <p>Loop</p> 
 <p>FileClose(1)</p> 
 <p>s.Close()</p> 
 <p>c.Close()</p> 
 <p>End While</p> 
 <p>客户端代码</p> 
 <p>Dim nstm As Stream = cli.GetStream()</p> 
 <p>Dim fstm As Stream = New FileStream(filePath, FileMode.Open, FileAccess.Read)</p> 
 <p>Dim buffer(1024 - 1) As Byte</p> 
 <p>Do While True</p> 
 <p>Dim bytesRead As Integer = fstm.Read(buffer, 0, buffer.Length)</p> 
 <p>If bytesRead = 0 Then Exit Do</p> 
 <p>nstm.Write(buffer, 0, bytesRead)</p> 
 <p>Loop</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/ea3be2eeef8f297ffc4d027b997826e4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">用ajax实现行置顶,[置顶] Ajax实战篇</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/02ec39bb1921186577e999b0110bd48c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">微信如何添加企业微信信息服务器地址,企业微信怎么添加管理员 设置方法介绍...</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>