<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>TMOD、SCON、PCON寄存器的配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="TMOD、SCON、PCON寄存器的配置" />
<meta property="og:description" content="TMOD控制寄存器 TMOD是定时器、计数器模式控制寄存器，它是一个逐位定义的8为寄存器，但只能使用字节寻址。 其各位是： 由上图我们就可以看出，这个寄存器控制了两个定时器/计数器 寄存器的高四位控制定时器1，低四位控制定时器0 GATE：门控制 GATE=0： 仅由TR0，TR1置位分别启动定时器T0、T1 GATE=1：由外部中断引脚INT0、INT1来启动定时器T0、T1 当INT0引脚为高电平时TR0置位，启动定时器T0； 当INT1引脚为高电平时TR1置位，启动定时器T1 C/T：功能选择位 C/T=0：定时功能 C/T=1：计数功能 M1、M0：工作方式选择位 如果我们同时使用定时器1和定时器0的时候，一定要注意对他们初始化的时候，不能够相互影响，即当我们配置好TMOD的低四位之后，再去配值TMOD的高四位的时候，一定不能破坏低四位的数据。
SCON控制寄存器 串行口控制寄存器，它用于控制串行通信的方式选择、接收和发送，指示串口的状态。SCON既可以字节寻址，也可以位寻址。 它的各位为： SM0、SM1：串行口工作方式控制位 其中我们在初始化串口通信的时候，最有用的就是SM0、SM1、SM0这三位了，具体配置如下： 一般情况下我们可以选择方式1。 SM2：多机通信控制位 多机通信是工作于方式2和方式3，即SM2主要用于方式2和方式3。当串行口工作于方式2或3，以及SM2=1时，只有当接收到第9位数据（RB8）为1时，才把接收到的前8位数据送入SBUF，且置位RI发出中断申请，否则会将接收到的数据放弃。当SM2=0时，就不管第9位数据是0还是1，都会将数据送入SBUF，并发出中断申请。 REN：允许接受位（一般配置为1） REN=1：允许接收 REN=0：禁止接收 TB8：发送数据位8（一般配置为0） 在方式2和方式3中，TB8是要发送的——即第9位数据位。在多机通信中同样亦要传输这一位，并且它代表传输的地址还是数据，TB8=0为数据，TB8=1时为地址。 RB8：接收数据位8（一般配置为0） 在方式2和方式3中，RB8存放接收到的第9位数据，用以识别接收到的数据特征。 TI：发送中断标志位 可寻址标志位。方式0时，发送完第8位数据后，由硬件置位，其它方式下，在发送或停止位之前由硬件置位，因此，TI=1表示帧发送结束，TI可由软件清“0”。 RI：接收中断标志位 可寻址标志位。接收完第8位数据后，该位由硬件置位，在其他工作方式下，该位由硬件置位，RI=1表示帧接收完成。
在配置串口初始化程序的时候，我们一般只用配置高四位，如果我们选择工作方式1，那么就是SCON=0X50；（SM0=0，SM1=1，SM2=0，REN=1）
PCON控制寄存器 PCON全称Power Control Register，即功率控制寄存器，我们在配置51单片机中的波特率的时候会用到它，其各位如下 系统复位默认为SMOD=0。当用51单片机的定时器2产生波特率时，波特率不受SMOD的影响。 各位的定义： SMOD： SMOD=0：串口方式1，2，3时，波特率正常 SMOD=1：串口方式1，2，3时，波特率加倍 LVDF：低电压检测标志位，同时也是低电压检测中断请求标志位 GF1、GF0：两个通用工作标志位，用户可以自由使用 PD：掉电模式设定位 PD=0：单片机处于正常工作状态 PD=1：单片机进入掉电模式可由外部中断或硬件复位模式唤醒，进入掉电模式后，外部晶振停振，CPU、定时器、串行口全部停止工作，只有外部中断工作。在该模式下，只有硬件复位和上电能够唤醒单片机。 IDL：空闲模式设定位 IDL=0：单片机处于正常工作状态 IDL=1：单片机进入空闲（Idle）模式，除CPU不工作外，其余仍继续工作，在空闲模式下可由任一个中断或硬件复位唤醒。
一般我们只用到了SMOD这一位，当我们选择波特率加倍的时候，就配置为PCON=0X80；" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d043a838b27399bd63d58e77e6b92ca2/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-09-13T21:36:58+08:00" />
<meta property="article:modified_time" content="2018-09-13T21:36:58+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">TMOD、SCON、PCON寄存器的配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><font color="black" size="5">TMOD控制寄存器</font> <br> <strong>TMOD是定时器、计数器模式控制寄存器</strong>，它是一个逐位定义的8为寄存器，但只能使用字节寻址。 <br> 其各位是： <br> <img src="https://images2.imgbox.com/d7/a8/uPY5cLP4_o.jpg" alt="" title=""> <br> 由上图我们就可以看出，这个寄存器控制了两个定时器/计数器 <br> <strong>寄存器的高四位控制定时器1，低四位控制定时器0</strong> <br> <strong>GATE：门控制</strong> <br> GATE=0： 仅由TR0，TR1置位分别启动定时器T0、T1 <br> GATE=1：由外部中断引脚INT0、INT1来启动定时器T0、T1 <br> 当INT0引脚为高电平时TR0置位，启动定时器T0； <br> 当INT1引脚为高电平时TR1置位，启动定时器T1 <br> <strong>C/T：功能选择位</strong> <br> C/T=0：定时功能 <br> C/T=1：计数功能 <br> <strong>M1、M0：工作方式选择位</strong> <br> <img src="https://images2.imgbox.com/84/6f/ZHH2eOts_o.png" alt="" title=""> <br> 如果我们同时使用定时器1和定时器0的时候，一定要注意对他们初始化的时候，不能够相互影响，即当我们配置好TMOD的低四位之后，再去配值TMOD的高四位的时候，一定不能破坏低四位的数据。</p> 
<p><font color="black" size="5">SCON控制寄存器</font> <br> <strong>串行口控制寄存器</strong>，它用于控制串行通信的方式选择、接收和发送，指示串口的状态。SCON既可以字节寻址，也可以位寻址。 <br> 它的各位为： <br> <img src="https://images2.imgbox.com/29/c3/DIjgiLVB_o.png" alt="" title=""> <br> <strong>SM0、SM1：串行口工作方式控制位</strong> <br> 其中我们在初始化串口通信的时候，最有用的就是SM0、SM1、SM0这三位了，具体配置如下： <br> <img src="https://images2.imgbox.com/8c/c9/VqJCi8i7_o.png" alt="" title=""> <br> 一般情况下我们可以选择方式1。 <br> <strong>SM2：多机通信控制位</strong> <br> 多机通信是工作于方式2和方式3，即SM2主要用于方式2和方式3。当串行口工作于方式2或3，以及SM2=1时，只有当接收到第9位数据（RB8）为1时，才把接收到的前8位数据送入SBUF，且置位RI发出中断申请，否则会将接收到的数据放弃。当SM2=0时，就不管第9位数据是0还是1，都会将数据送入SBUF，并发出中断申请。 <br> <strong>REN：允许接受位</strong>（一般配置为1） <br> REN=1：允许接收 <br> REN=0：禁止接收 <br> <strong>TB8：发送数据位8</strong>（一般配置为0） <br> 在方式2和方式3中，TB8是要发送的——即第9位数据位。在多机通信中同样亦要传输这一位，并且它代表传输的地址还是数据，TB8=0为数据，TB8=1时为地址。 <br> <strong>RB8：接收数据位8</strong>（一般配置为0） <br> 在方式2和方式3中，RB8存放接收到的第9位数据，用以识别接收到的数据特征。 <br> <strong>TI：发送中断标志位</strong> <br> 可寻址标志位。方式0时，发送完第8位数据后，由硬件置位，其它方式下，在发送或停止位之前由硬件置位，因此，TI=1表示帧发送结束，TI可由软件清“0”。 <br> <strong>RI：接收中断标志位</strong> <br> 可寻址标志位。接收完第8位数据后，该位由硬件置位，在其他工作方式下，该位由硬件置位，RI=1表示帧接收完成。</p> 
<p>在配置串口初始化程序的时候，我们一般只用配置高四位，如果我们选择工作方式1，那么就是SCON=0X50；（SM0=0，SM1=1，SM2=0，REN=1）</p> 
<p><font color="black" size="5">PCON控制寄存器</font> <br> PCON全称Power Control Register，即<strong>功率控制寄存器</strong>，我们在配置51单片机中的波特率的时候会用到它，其各位如下 <br> <img src="https://images2.imgbox.com/67/3e/Z7NxgZaA_o.png" alt="" title=""> <br> 系统复位默认为SMOD=0。当用51单片机的定时器2产生波特率时，波特率不受SMOD的影响。 <br> 各位的定义： <br> <strong>SMOD：</strong> <br> SMOD=0：串口方式1，2，3时，波特率正常 <br> SMOD=1：串口方式1，2，3时，波特率加倍 <br> <strong>LVDF：低电压检测标志位，同时也是低电压检测中断请求标志位</strong> <br> <strong>GF1、GF0：两个通用工作标志位，用户可以自由使用</strong> <br> <strong>PD：掉电模式设定位</strong> <br> PD=0：单片机处于正常工作状态 <br> PD=1：单片机进入掉电模式可由外部中断或硬件复位模式唤醒，进入掉电模式后，外部晶振停振，CPU、定时器、串行口全部停止工作，只有外部中断工作。在该模式下，只有硬件复位和上电能够唤醒单片机。 <br> <strong>IDL：空闲模式设定位</strong> <br> IDL=0：单片机处于正常工作状态 <br> IDL=1：单片机进入空闲（Idle）模式，除CPU不工作外，其余仍继续工作，在空闲模式下可由任一个中断或硬件复位唤醒。</p> 
<p>一般我们只用到了SMOD这一位，当我们选择波特率加倍的时候，就配置为PCON=0X80；</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/61c9f47bcc1ca8340434df8e3b92ebd9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python模块学习——logging</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ef84d1c91dec4772a9724af8c0743ee3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">自定义快捷键【个人常用】VBA代码</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>