<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32/51单片机实训day6（二）——Proteus8.6版本&#43;STM32F103驱动LCD128x64显示信息｜Keil5程序设计｜串行并行通信笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32/51单片机实训day6（二）——Proteus8.6版本&#43;STM32F103驱动LCD128x64显示信息｜Keil5程序设计｜串行并行通信笔记" />
<meta property="og:description" content="目录
main.c
lcd.c
lcd.h
内 容：实现LCD显示 学 时：4学时
知识点：LCD12864芯片介绍，读写操作时序，电路设计
重点： 读写操作时序
难点：读写操作时序
时间：2022年12月26日 13:30～16:20
总结：
1 了解LCD12864芯片配置
2 使用proteus设计LCD显示电路
3 编程实现LCD显示
控制引脚：LCD_Struct.GPIO_Mode = GPIO_Mode_Out_PP; // 推挽输出
数字引脚：LCD_Struct.GPIO_Mode = GPIO_Mode_Out_OD; // 开漏输出 1 2引脚连接电源
15引脚 选择并行通讯 控制引脚 LCD_Struct.GPIO_Mode = GPIO_Mode_Out_PP; // 推挽输出
数字引脚 LCD_Struct.GPIO_Mode = GPIO_Mode_Out_OD; // 开漏输出 main.c LCD_Init(); LCD_DIS_Char(0,0,&#34;Welcome System&#34;,MIDDLE); LCD_DIS_Char(2,0,&#34;Please login&#34;,MIDDLE); while (1) { if(isRec==1){ LCD_CLEAR_ALL(); if(pd==1){ LCD_DIS_Char(0,0,name,MIDDLE); //LCD_DIS_Char(3,0,id,MIDDLE); LCD_DIS_Char(6,0,&#34;Login succeeded&#34;,MIDDLE); }else{ LCD_DIS_Char(4,0,&#34;Login failed&#34;,MIDDLE); } isRec=3; } if(isRec==3&amp;&amp;bh==&#39;1&#39;){ LCD_CLEAR_ALL(); LCD_DIS_Char(0,0,&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ee58ece49c675477e8ec6a813a25eb43/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-12T07:38:15+08:00" />
<meta property="article:modified_time" content="2023-06-12T07:38:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32/51单片机实训day6（二）——Proteus8.6版本&#43;STM32F103驱动LCD128x64显示信息｜Keil5程序设计｜串行并行通信笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="main.c-toc" style="margin-left:0px;"><a href="#main.c" rel="nofollow">main.c</a></p> 
<p id="lcd.c-toc" style="margin-left:0px;"><a href="#lcd.c" rel="nofollow">lcd.c</a></p> 
<p id="lcd.h-toc" style="margin-left:0px;"><a href="#lcd.h" rel="nofollow">lcd.h</a></p> 
<hr id="hr-toc"> 
<p></p> 
<blockquote> 
 <p> 内  容：实现LCD显示  <br> 学  时：4学时<br> 知识点：LCD12864芯片介绍，读写操作时序，电路设计<br> 重点： 读写操作时序<br> 难点：读写操作时序<br><strong><span style="background-color:#d7d8d9;">时间：2022年12月26日 13:30～16:20</span></strong></p> 
 <p><br><strong><span style="background-color:#d7d8d9;">总结</span></strong><span style="background-color:#d7d8d9;">：</span><br> 1 了解LCD12864芯片配置<br> 2 使用proteus设计LCD显示电路<br> 3 编程实现LCD显示</p> 
 <p></p> 
 <p>控制引脚：LCD_Struct.GPIO_Mode = GPIO_Mode_Out_PP; // 推挽输出</p> 
 <p>数字引脚：LCD_Struct.GPIO_Mode = GPIO_Mode_Out_OD; // 开漏输出 </p> 
</blockquote> 
<p class="img-center"><img alt="" height="295" src="https://images2.imgbox.com/8c/4f/YDPd6xOC_o.png" width="500"></p> 
<p class="img-center"><img alt="" height="508" src="https://images2.imgbox.com/10/eb/s5lkBtr8_o.png" width="500"></p> 
<p>1 2引脚连接电源</p> 
<p class="img-center"><img alt="" height="195" src="https://images2.imgbox.com/f7/87/xk7g4g7K_o.png" width="600"></p> 
<p class="img-center"><img alt="" height="245" src="https://images2.imgbox.com/aa/90/SLs0fNws_o.png" width="600"></p> 
<p>15引脚  选择并行通讯 <img alt="" src="https://images2.imgbox.com/df/31/aWuc8VgK_o.png"></p> 
<p>控制引脚    LCD_Struct.GPIO_Mode = GPIO_Mode_Out_PP; // 推挽输出</p> 
<p>数字引脚    LCD_Struct.GPIO_Mode = GPIO_Mode_Out_OD; // 开漏输出 </p> 
<h2 id="main.c">main.c</h2> 
<pre><code class="language-cpp">	LCD_Init();
	LCD_DIS_Char(0,0,"Welcome System",MIDDLE);
	LCD_DIS_Char(2,0,"Please login",MIDDLE);
	

	
  while (1)
  {

		if(isRec==1){
			LCD_CLEAR_ALL();
			if(pd==1){
				LCD_DIS_Char(0,0,name,MIDDLE);
				//LCD_DIS_Char(3,0,id,MIDDLE);
				LCD_DIS_Char(6,0,"Login succeeded",MIDDLE);
			}else{
				LCD_DIS_Char(4,0,"Login failed",MIDDLE);
			}
			isRec=3;
		}
		if(isRec==3&amp;&amp;bh=='1'){
					LCD_CLEAR_ALL();
					LCD_DIS_Char(0,0,"Item:Ibuprofen",MIDDLE);
					 LCD_DIS_Char(3,0,"Number:",MIDDLE);
					 LCD_DIS_Number(3,60,8,MIDDLE);
					 LCD_DIS_Char(6,0,"Weight:gram",MIDDLE);
					bh=0;
		}
		if(isRec==3&amp;&amp;bh=='2'){
					LCD_CLEAR_ALL();
					LCD_DIS_Char(0,0,"Item:Penicillin",MIDDLE);
 LCD_DIS_Char(3,0,"Number:",MIDDLE);
 LCD_DIS_Number(3,60,16,MIDDLE);
 LCD_DIS_Char(6,0,"Weight:gram",MIDDLE);
					bh=0;
		}
		if(isRec==3&amp;&amp;bh=='3'){
					LCD_CLEAR_ALL();
					LCD_DIS_Char(0,0,"Item:Vitamin C",MIDDLE);
 LCD_DIS_Char(3,0,"Number:",MIDDLE);
 LCD_DIS_Number(3,60,3,MIDDLE);
 LCD_DIS_Char(6,0,"Weight:kilogram",MIDDLE);
					bh=0;
		}
		if(isRec==3&amp;&amp;bh=='4'){
					LCD_CLEAR_ALL();
					LCD_DIS_Char(0,0,"Item:Vitamin D",MIDDLE);
 LCD_DIS_Char(3,0,"Number:",MIDDLE);
 LCD_DIS_Number(3,60,86,MIDDLE);
 LCD_DIS_Char(6,0,"Weight:gram",MIDDLE);
					bh=0;
		}
		if(isRec==3&amp;&amp;bh=='5'){
					LCD_CLEAR_ALL();
					LCD_DIS_Char(0,0,"Item:Pepsin ",MIDDLE);
 LCD_DIS_Char(3,0,"Number:",MIDDLE);
 LCD_DIS_Number(3,60,59,MIDDLE);
 LCD_DIS_Char(6,0,"Weight:gram",MIDDLE);
					bh=0;
		}
	if(isRec==3&amp;&amp;bh=='6'){
					LCD_CLEAR_ALL();
					LCD_DIS_Char(0,0,"Item:Aspirin ",MIDDLE);
 LCD_DIS_Char(3,0,"Number:",MIDDLE);
 LCD_DIS_Number(3,60,9,MIDDLE);
 LCD_DIS_Char(6,0,"Weight:gram",MIDDLE);
					bh=0;
		}</code></pre> 
<h2 id="lcd.c">lcd.c</h2> 
<pre><code class="language-cpp">#include "lcd.h"
#include "delay.h"

static	u8 INITIAL_COLUNM=0;



void LCD_FUNCTION_Config(void)
{
		GPIO_InitTypeDef LCD_Struct;
		RCC_APB2PeriphClockCmd(LCD12864_Periph,ENABLE);
		LCD_Struct.GPIO_Mode = GPIO_Mode_Out_PP; //控制引脚
		LCD_Struct.GPIO_Speed = GPIO_Speed_50MHz;
	
		LCD_Struct.GPIO_Pin = LCD12864_RES_GPIO;
		GPIO_Init(LCD12864_GPIO,&amp;LCD_Struct);
	
		LCD_Struct.GPIO_Pin = LCD12864_E_GPIO; //高电平
		GPIO_Init(LCD12864_GPIO,&amp;LCD_Struct);
	
	  LCD_Struct.GPIO_Pin = LCD12864_RS_GPIO;
		GPIO_Init(LCD12864_GPIO,&amp;LCD_Struct);
	
		LCD_Struct.GPIO_Pin = LCD12864_RW_GPIO;
		GPIO_Init(LCD12864_GPIO,&amp;LCD_Struct);
	
		LCD_Struct.GPIO_Pin = LCD12864_CS1_GPIO;
		GPIO_Init(LCD12864_GPIO,&amp;LCD_Struct);
	
		LCD_Struct.GPIO_Pin = LCD12864_CS2_GPIO;
		GPIO_Init(LCD12864_GPIO,&amp;LCD_Struct);
}  

void LCD_GPIO_Config(void)
{
	  GPIO_InitTypeDef LCD_Struct;
		RCC_APB2PeriphClockCmd(LCD12864_Periph,ENABLE);
		LCD_Struct.GPIO_Mode = GPIO_Mode_Out_OD; //数字引脚
		LCD_Struct.GPIO_Speed = GPIO_Speed_50MHz;
	  LCD_Struct.GPIO_Pin = LCD12864_DATA_GPIO;
		GPIO_Init(LCD12864_GPIO,&amp;LCD_Struct);	
}

void LCD_Init(void)        //lcd初始化
{
	LCD_GPIO_Config();
	LCD_FUNCTION_Config();
	LCD12864_RES_0;
	delay_ms(10);
	LCD12864_RES_1;
	delay_ms(50);
	LCD_CMD_DIS(ON);
	LCD_INITIAL_COLUNM(INITIAL_COLUNM);
	
}

void LCD_GPIO_MASK(u8 data)       //数据掩码包装 
{
	u16 mask;
	mask = GPIO_ReadOutputData(LCD12864_GPIO) &amp; 0XFF00 ; 
	
	mask = mask | data ;
	GPIO_Write(LCD12864_GPIO,mask);
}

void LCD_CMD_BUSY(void)    //忙检测
{
	LCD12864_RS_CMD;
	LCD12864_RW_R;
	LCD12864_E_1;
	LCD_GPIO_MASK(0xFF);
	while(1)
	{
		LCD12864_E_0;
		delay_us(2);
		LCD12864_E_1;
		if(!(GPIO_ReadInputData(LCD12864_GPIO)&amp;CMD_BUSY))
			break;
	}
	LCD12864_E_0;
}

//parameter: ON/OFF
void LCD_CMD_DIS(u8 Switch)
{
	LCD_CMD_BUSY();
	LCD12864_RS_CMD;
	LCD12864_RW_W;
	LCD12864_E_1;
	if(Switch)
		LCD_GPIO_MASK(CMD_DIS_ON);
	else
		LCD_GPIO_MASK(CMD_DIS_OFF);
	delay_us(2);
	LCD12864_E_0;
}


void LCD_DIS_SELECT(u8 select)   //0全灭 1左屏 2右屏 3全屏
{
	select%=4;
	switch(select)
	{
		case DIS_RIGHT:
			LCD12864_CS2_ON;
			LCD12864_CS1_OFF;
			break;
		case DIS_LEFT:
			LCD12864_CS2_OFF;
			LCD12864_CS1_ON;
			break;
		case DIS_ALL:
			LCD12864_CS2_ON;
			LCD12864_CS1_ON;
			break;
		case DIS_NONE:
			LCD12864_CS2_OFF;
			LCD12864_CS1_OFF;
			break;
	}
}

//指令起始行
//parameter: 0-63
void LCD_INITIAL_COLUNM(u8 Colunm)
{
	Colunm%=64;
	Colunm = 64 - Colunm;
	LCD_CMD_BUSY();
	LCD12864_RS_CMD;
	LCD12864_RW_W;
	LCD12864_E_1;
	Colunm = CMD_COLUNM|Colunm;
	LCD_GPIO_MASK(Colunm);
	delay_us(2);
	LCD12864_E_0;
}

//指令写入数据显示列
//parameter: 0-128
void LCD_CMD_Line(u8 Line)
{
	Line %= 128; 
	if(Line&lt;64)
	{
		LCD_DIS_SELECT(DIS_LEFT);
	}
	else
	{
		LCD_DIS_SELECT(DIS_RIGHT);
	}
	LCD_CMD_BUSY();
	LCD12864_RS_CMD;
	LCD12864_RW_W;
	LCD12864_E_1;
	Line = CMD_LINE|Line;
	LCD_GPIO_MASK(Line);
	delay_us(2);
	LCD12864_E_0;
}

//指令写入数据显示页
//parameter: 0-7
void LCD_CMD_PAGE(u8 Page)
{
	Page%=8;
	LCD_CMD_BUSY();
	LCD12864_RS_CMD;
	LCD12864_RW_W;
	LCD12864_E_1;
	Page = CMD_PAGE|Page;
	LCD_GPIO_MASK(Page);
	delay_us(2);
	LCD12864_E_0;
}

//写入数据0-7行
void LCD_CMD_COLUNM(u8 Colunm)
{
	Colunm%=8;
	Colunm=Colunm-INITIAL_COLUNM/8;
	LCD_CMD_PAGE(Colunm);
}

//计算数据长度
u8 LCD_NUMS_SIZE(int num)
{
	u8 size=0;
	if(num==0)
	{
		size=1;
	}else
	{
		while(num)
		{
			size++;
			num=num/10;
		}
	}
	return size;
}

int LCD_POW(u8 mi)  //计算10的次方
{
	int di=1;
	while(mi--)
	{
		di=di*10;
	}
	return di;
}

void LCD_DATA_WRIRE(u8 data)   //写一位数据
{
	LCD_CMD_BUSY();
	LCD12864_RS_DATA;
	LCD12864_RW_W;
	LCD12864_E_1;
	LCD_GPIO_MASK(data);
	delay_us(2);
	LCD12864_E_0;
}

//显示一个字符 支持小、中尺寸  反侧显示
//parameter: 行0-7 列0-127 data数据 size尺寸SMALL MIDDLE
void LCD_DIS_Char(u8 row,u8 col,u8* data,int size)
{
	u8 length=0;
	u8 line;
	u8 i;
	row%=8;
	col%=128;
	LCD_CMD_Line(col);
	line=col-1;
	if(size==SMALL)
	{
		LCD_CMD_COLUNM(row);
		while(data[length])
		{
			for(i=0;i&lt;6;i++)
			{
				line+=1;
				if(line==64)
				{
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row);
				}else if(line==128)
				{
					line=0;
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row);
				}
				LCD_DATA_WRIRE(CHAR_SMALL[data[length]-32][i]);
			}	
			length++;
		}
	}else if(size==MIDDLE)
	{
		while(data[length])
		{
			LCD_CMD_COLUNM(row);
			for(i=0;i&lt;16;i++)
			{
				line+=1;
				if(i==8)
				{
					if(line&lt;8)
						line=128-(8-line);
					else
						line-=8;
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row+1);
				}
				else if(line==64)
				{
					LCD_CMD_Line(line);
					if(i&lt;8)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=8)
					{
						LCD_CMD_COLUNM(row+1);
					}
				}else if(line==128)
				{
					line=0;
					LCD_CMD_Line(line);
					if(i&lt;8)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=8)
					{
						LCD_CMD_COLUNM(row+1);
					}	
				}
				LCD_DATA_WRIRE(CHAR_MIDDLE[data[length]-32][i]);
			}
			length++;
		}
	}
}

//写数字 支持小、中尺寸 数字可支持小数  小数位数只包括2位  反侧显示
//parameter: 行0-7 列0-127 data数据 size尺寸SMALL MIDDLE
void LCD_DIS_Number(u8 row,u8 col,float num,int size)
{
	u8 line;
	u8 length;
	u8 i;
	u8 flag=0;
	float number=0;
	row%=8;
	col%=128;
	length=LCD_NUMS_SIZE((int)num);
	LCD_CMD_Line(col);
	line=col-1;
	if(num-(int)num&gt;0)
	{
		flag=1;
		number=num;
	}
	if(size==SMALL)
	{
		LCD_CMD_COLUNM(row);//1行
		while(length--)//6位
		{
			for(i=0;i&lt;6;i++)
			{
				line+=1;
				if(line==64)
				{
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row);
				}else if(line==128)
				{
					line=0;
					LCD_CMD_Line(line);
				}
				if(flag==2)
				{
					LCD_DATA_WRIRE(CHAR_SMALL[14][i]);
				}else
					LCD_DATA_WRIRE(CHAR_SMALL[(int)num/LCD_POW(length)+16][i]);	
			}
			if(flag==2)
			{
				flag=0;
				continue;
			}
			num=(int)num%LCD_POW(length);	
			if(flag==1&amp;&amp;length==0)
			{
				flag=2;
				length=3;
				num=(int)((number- (int)number)*100);
			}
		}
	}else if(size==MIDDLE)//中尺寸
	{
		while(length--)
		{
			LCD_CMD_COLUNM(row);
			for(i=0;i&lt;16;i++)
			{
				line+=1;
				if(i==8)
				{
					if(line&lt;8)
						line=128-(8-line);
					else
						line-=8;
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row+1);
				}
				else if(line==64)
				{
					LCD_CMD_Line(line);
					if(i&lt;8)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=8)
					{
						LCD_CMD_COLUNM(row+1);
					}
				}else if(line==128)
				{
					line=0;
					LCD_CMD_Line(line);
					if(i&lt;8)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=8)
					{
						LCD_CMD_COLUNM(row+1);
					}
				}
				if(flag==2)
				{
					LCD_DATA_WRIRE(CHAR_MIDDLE[14][i]);
				}else				
					LCD_DATA_WRIRE(CHAR_MIDDLE[(int)num/LCD_POW(length)+16][i]);
			}
			if(flag==2)
			{
				flag=0;
				continue;
			}
			num=(int)num%LCD_POW(length);
			if(flag==1&amp;&amp;length==0)
			{
				flag=2;
				length=3;
				num=(int)((number-(int)number)*100);
			}
		}
	}else if(size==LONG)//大尺寸
	{
		while(length--)
		{
			LCD_CMD_COLUNM(row);
			for(i=0;i&lt;36;i++)
			{
				line+=1;
				if(i==12)
				{
					if(line&lt;12)
						line=128-(12-line);
					else
						line-=12;
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row+1);
				}else if(i==24)
				{
					if(line&lt;12)
						line=128-(12-line);
					else
						line-=12;
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row+2);
				}
				else if(line==64)
				{
					LCD_CMD_Line(line);
					if(i&lt;12)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=12&amp;&amp;i&lt;24)
					{
						LCD_CMD_COLUNM(row+1);
					}else if(i&gt;=24)
					{
						LCD_CMD_COLUNM(row+2);
					}
				}else if(line==128)
				{
					line=0;
					LCD_CMD_Line(line);
					if(i&lt;12)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=12&amp;&amp;i&lt;24)
					{
						LCD_CMD_COLUNM(row+1);
					}else if(i&gt;=24)
					{
						LCD_CMD_COLUNM(row+2);
					}
				}	
				if(flag==2)
				{
					LCD_DATA_WRIRE(NUMBER_LONG[10][i]);
				}else
					LCD_DATA_WRIRE(NUMBER_LONG[(int)num/LCD_POW(length)][i]);
			}
			if(flag==2)
			{
				flag=0;
				continue;
			}
			num=(int)num%LCD_POW(length);
			if(flag==1&amp;&amp;length==0)
			{
				flag=2;
				length=3;
				num=(int)((number-(int)number)*100);
			}
		}
	}
}

//写汉字   支持中、大尺寸  data为库
void LCD_DIS_WORD(u8 row,u8 col,u8* data,int size)
{
	u8 length=0;
	u8 i;
	u8 line;
	row%=8;
	col%=128;
	LCD_CMD_Line(col);
	line=col-1;
	if(size==MIDDLE)
	{
		while(data[length]!=0)
		{
			LCD_CMD_COLUNM(row);
			for(i=0;i&lt;20;i++)
			{
				line+=1;
				if(i==10)
				{
					if(line&lt;10)
						line=128-(10-line);
					else
						line-=10;
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row+1);
				}
				else if(line==64)
				{
					LCD_CMD_Line(line);
					if(i&lt;10)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=10)
					{
						LCD_CMD_COLUNM(row+1);
					}
				}else if(line==128)
				{
					line=0;
					LCD_CMD_Line(line);
					if(i&lt;10)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=10)
					{
						LCD_CMD_COLUNM(row+1);
					}
				}
				LCD_DATA_WRIRE(WORD_MIDDLE[data[length]-1][i]);
			}
			length++;
		}
	}else if(size==LONG)
	{
		while(data[length]!=0)
		{
			LCD_CMD_COLUNM(row);
			for(i=0;i&lt;32;i++)
			{
				line+=1;
				if(i==16)
				{
					if(line&lt;16)
						line=128-(16-line);
					else
						line-=16;
					LCD_CMD_Line(line);
					LCD_CMD_COLUNM(row+1);
				}
				else if(line==64)
				{
					LCD_CMD_Line(line);
					if(i&lt;16)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=16)
					{
						LCD_CMD_COLUNM(row+1);
					}
				}else if(line==128)
				{
					line=0;
					LCD_CMD_Line(line);
					if(i&lt;16)
					{
						LCD_CMD_COLUNM(row);
					}else if(i&gt;=16)
					{
						LCD_CMD_COLUNM(row+1);
					}
				}
				LCD_DATA_WRIRE(WORD_LONG[data[length]-1][i]);
			}
			length++;
		}
	}
}

//图片显示 尺寸64*128
void LCD_DIS_PICTURE(void)
{
	u8 row;
	u8 col;
	for(row=0;row&lt;8;row++)
	{
		LCD_CMD_Line(0);
		LCD_CMD_COLUNM(row);
		for(col=0;col&lt;128;col++)
		{
			if(col==64){
				LCD_CMD_Line(64);
				LCD_CMD_COLUNM(row);
			}
			if(col&lt;64)
			{
				LCD_DATA_WRIRE(BMP_TEST[row*2][col]);
			}else if(col&gt;=64)
			{
				LCD_DATA_WRIRE(BMP_TEST[row*2+1][col-64]);
			}
		}
		
	}
}
//清除屏幕单独一行
void LCD_CLEAR_COL(u8 row)
{
	u8 j;
	LCD_DIS_SELECT(DIS_ALL);
	LCD_CMD_COLUNM(row);
	for(j=0;j&lt;128;j++)
	{
		LCD_DATA_WRIRE(0xFF);
	}
}
//清除全屏
void LCD_CLEAR_ALL(void)
{
	u8 i;
	u8 j;
	LCD_DIS_SELECT(DIS_ALL);
	for(i=0;i&lt;8;i++)
	{
		LCD_CMD_COLUNM(i);
		for(j=0;j&lt;128;j++)
		{
			LCD_DATA_WRIRE(0xFF);
		}
	}
}

</code></pre> 
<h2 id="lcd.h">lcd.h</h2> 
<pre><code class="language-cpp">#ifndef __LCD_H
#define	__LCD_H


#include "stm32f10x.h"
#include "word.h"

#define LCD12864_GPIO     GPIOC
#define LCD12864_Periph   RCC_APB2Periph_GPIOC
#define LCD12864_E_GPIO   GPIO_Pin_8
#define LCD12864_RW_GPIO  GPIO_Pin_9
#define LCD12864_RS_GPIO  GPIO_Pin_10
#define LCD12864_CS2_GPIO GPIO_Pin_11
#define LCD12864_CS1_GPIO GPIO_Pin_12
#define LCD12864_RES_GPIO GPIO_Pin_13
#define LCD12864_DATA_GPIO     GPIO_Pin_0|GPIO_Pin_1| GPIO_Pin_2| GPIO_Pin_3| GPIO_Pin_4| GPIO_Pin_5| GPIO_Pin_6|GPIO_Pin_7

#define LCD12864_RES_0  GPIO_ResetBits(LCD12864_GPIO,LCD12864_RES_GPIO)
#define LCD12864_RES_1  GPIO_SetBits(LCD12864_GPIO,LCD12864_RES_GPIO)

#define LCD12864_E_0    GPIO_ResetBits(LCD12864_GPIO,LCD12864_E_GPIO)
#define LCD12864_E_1    GPIO_SetBits(LCD12864_GPIO,LCD12864_E_GPIO)

#define LCD12864_RW_W   GPIO_ResetBits(LCD12864_GPIO,LCD12864_RW_GPIO)
#define LCD12864_RW_R   GPIO_SetBits(LCD12864_GPIO,LCD12864_RW_GPIO)

#define LCD12864_RS_CMD  GPIO_ResetBits(LCD12864_GPIO,LCD12864_RS_GPIO)
#define LCD12864_RS_DATA GPIO_SetBits(LCD12864_GPIO,LCD12864_RS_GPIO)

#define LCD12864_CS1_ON   GPIO_ResetBits(LCD12864_GPIO,LCD12864_CS1_GPIO)
#define LCD12864_CS1_OFF  GPIO_SetBits(LCD12864_GPIO,LCD12864_CS1_GPIO)

#define LCD12864_CS2_ON  GPIO_ResetBits(LCD12864_GPIO,LCD12864_CS2_GPIO)
#define LCD12864_CS2_OFF GPIO_SetBits(LCD12864_GPIO,LCD12864_CS2_GPIO)

//开启或关闭
#define ON  1
#define OFF 0

//LCD命令
#define CMD_DIS_ON   0X3F
#define CMD_DIS_OFF  0X3E
#define CMD_BUSY     0X80
#define CMD_COLUNM   0XC0
#define CMD_LINE     0X40
#define CMD_PAGE     0XB8

//显示屏幕选择
#define DIS_NONE  0
#define DIS_LEFT  1
#define DIS_RIGHT 2
#define DIS_ALL   3

//尺寸
#define SMALL  1
#define MIDDLE 2
#define LONG   3

//方向选择
#define UP   1
#define DOWN 2


//内部处理函数
void LCD_CMD_DIS(u8 Switch);   //开关函数
void LCD_CMD_COLUNM(u8 Colunm);//指定初始行
void LCD_CMD_Line(u8 Line);    //写入列
void LCD_CMD_COLUNM(u8 Colunm); //写入页
void LCD_INITIAL_COLUNM(u8 Colunm);//初始行
void LCD_DATA_WRIRE(u8 data);  //写一位数据
void LCD_CMD_PAGE(u8 Page);    //初始页

//外部调用函数
void LCD_Init(void);           //初始化
void LCD_DIS_Char(u8 row,u8 col,u8* data,int size);//显示字符 
void LCD_MODE_ROLL(u8 path,u8 step,u8 direction,u16 delay);//滚动模式
void LCD_DIS_Number(u8 row,u8 col,float num,int size);//显示数字
void LCD_CLEAR_COL(u8 row);//清零一行
void LCD_CLEAR_ALL(void);//清屏
void LCD_DIS_WORD(u8 row,u8 col,u8* data,int size);//写字
void LCD_DIS_PICTURE(void);//显示罗小黑图片
#endif  
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cddb4baec4b8a485e651c5995b7f45ef/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">51单片机实训day2——创建Proteus工程以及Proteus基本控件的使用｜单片机最小系统电路设计:电源配置 复位电路 晶振电路</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dbaaa3a96234e34aba20050604f9e98e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用 Docker-compose 搭建lnmp</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>