<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Apache源码包在LINUX（CENTOS6.8)中的安装（出现问题及解决） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Apache源码包在LINUX（CENTOS6.8)中的安装（出现问题及解决）" />
<meta property="og:description" content="任务：在CENT6.8系统中安装Apache（版本为：httpd-2.4.41）
前提：由于源码包必须先编译后安装，所以必须先安装编译器：gcc
理论步骤：
1.检测gcc软件包，如果不存在则进行安装。
2.下载Aache的源码包（压缩包形式）并上传到CENTOS服务器中
3.解压源码包后进入解压后的目录，执行配置，编译，安装。
3.1 配置：使用 ./configure 进行安装目录的设置
3.2 编译：使用 make 命令直接执行
3.3 安装：使用 make install 命令直接执行。
4.如果无意外，按照“理论步骤&#39;，完成后即可在CENTOS服务器启用httpd服务（运行apache）中，使用浏览器访问：
http://localhost/ 或 http://127.0.0.1 或 http://192.168.253.129 实际过程：
检测gcc服务包：
[root@cent001 ~]# rpm -q gcc
gcc-4.4.7-23.el6.x86_64
说明gcc服务包已经安装。进入”理论步骤“2
下载Aache的源码包（压缩包形式）并上传到CENTOS服务器中：
访问：http://mirror.bit.edu.cn/apache/httpd/ 找到：httpd-2.4.41.tar.gz 然后下载到本地。
然后通过FTP上传到CENTOS的个人源码包专用目录/usr/local/src 下边。进入”理论步骤“3
解压源码包
进入源码包压缩包的存储目录：
[root@cent001 ~]# cd /usr/local/src
解压httpd-2.4.41.tar.gz源码压缩包（会生成httpd-2.4.41目录）：
[root@cent001 src]# tar -zxvf httpd-2.4.41.tar.gz 查看解压后的源码包大小：（此操作不是必须）
[root@cent001 src]# du -sh httpd-2.4.41
46M httpd-2.4.41
进入源码包解压后目录：
[root@cent001 src]# cd httpd-2.4.41
开始进行”理论步骤“3.1
配置：使用 ./configure 进行安装目录的设置" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/12ddb95d1ec2ee381860770d72d467c1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-09-29T14:11:23+08:00" />
<meta property="article:modified_time" content="2019-09-29T14:11:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Apache源码包在LINUX（CENTOS6.8)中的安装（出现问题及解决）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p><span style="font-size:16px;"><span style="font-size:18px;"><strong><span style="color:#0000ff;">任务</span></strong>：</span>在CENT6.8系统中安装Apache（版本为：httpd-2.4.41）</span></p> 
 <p><span style="font-size:16px;"><span style="font-size:18px;"><strong><span style="color:#0000ff;">前提</span></strong>：</span>由于源码包必须先编译后安装，所以必须先安装编译器：gcc</span></p> 
 <p><span style="font-size:18px;"><strong><span style="color:#0000ff;">理论步骤</span></strong>：</span></p> 
 <p><strong>1.检测gcc软件包，如果不存在则进行安装。</strong></p> 
 <p><strong>2.下载Aache的源码包（压缩包形式）并上传到CENTOS服务器中</strong></p> 
 <p><strong>3.解压源码包后进入解压后的目录，执行配置，编译，安装。</strong></p> 
 <p>　　3.1 配置：使用 ./configure 进行安装目录的设置</p> 
 <p>       3.2 编译：使用 make 命令直接执行</p> 
 <p>       3.3 安装：使用 make install 命令直接执行。</p> 
 <p><strong>4.如果无意外，按照“理论步骤'，完成后即可在CENTOS服务器启用httpd服务（运行apache）中，使用浏览器访问</strong>：</p> 
 <p>     http://localhost/       或   http://127.0.0.1       或    http://192.168.253.129    </p> 
 <p> </p> 
 <p><span style="font-size:18px;"><strong><span style="color:#0000ff;">实际过程：</span></strong></span></p> 
 <p> </p> 
 <p><span style="color:#ff0000;font-size:18pt;"><strong>检测gcc服务包：</strong></span></p> 
 <p><strong>[root@cent001 ~]# rpm -q gcc</strong><br>gcc-4.4.7-23.el6.x86_64</p> 
 <p>说明gcc服务包已经安装。进入<strong><span style="color:#ff00ff;">”理论步骤“2</span></strong></p> 
 <p> </p> 
 <p><span style="font-size:18pt;"><strong><span style="color:#ff0000;">下载Aache的源码包（压缩包形式）并上传到CENTOS服务器中：</span></strong></span></p> 
 <p>访问：<span style="color:#0000ff;"><a href="http://mirror.bit.edu.cn/apache/httpd/" rel="nofollow"><span style="color:#0000ff;">http://mirror.bit.edu.cn/apache/httpd/</span></a></span>  </p> 
 <p>找到：<a href="http://mirror.bit.edu.cn/apache/httpd/httpd-2.4.41.tar.gz" rel="nofollow">httpd-2.4.41.tar.gz</a>  然后下载到本地。</p> 
 <p>然后通过FTP上传到CENTOS的个人源码包专用目录/usr/local/src  下边。进入<strong><span style="color:#ff00ff;">”理论步骤“3</span></strong></p> 
 <p> </p> 
 <p><span style="color:#ff0000;font-size:18pt;"><strong>解压源码包</strong></span></p> 
 <p><strong><span style="color:#ff0000;">进入源码包压缩包的存储目录：</span></strong></p> 
 <p><strong>[root@cent001 ~]# cd /usr/local/src</strong></p> 
 <p><strong><span style="color:#ff0000;">解压httpd-2.4.41.tar.gz源码压缩包（会生成httpd-2.4.41目录）：</span></strong></p> 
 <p><strong>[root@cent001 src]# tar -zxvf httpd-2.4.41.tar.gz </strong></p> 
 <p><span style="color:#ff0000;"><strong>查看解压后的源码包大小：（此操作不是必须）</strong></span></p> 
 <p><strong>[root@cent001 src]# du -sh httpd-2.4.41</strong></p> 
 <p>46M httpd-2.4.41</p> 
 <p><strong><span style="color:#ff0000;">进入源码包解压后目录：</span></strong></p> 
 <p><strong>[root@cent001 src]# cd httpd-2.4.41</strong></p> 
 <p>开始进行<strong><span style="color:#ff00ff;">”理论步骤“3.1</span></strong></p> 
 <p> </p> 
 <p><span style="font-size:18pt;"><strong><span style="color:#ff0000;">配置：使用 ./configure 进行安装目录的设置</span></strong></span></p> 
 <p>执行命令进行配置：(注意：官方手册推荐使用 <span style="color:#0000ff;"><strong>/usr/local/apache2</strong></span> 作为httpd的源码安装路径）</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure --prefix=/usr/local/apache2</strong><br>checking for chosen layout... Apache<br>checking for working mkdir -p... yes<br>checking for grep that handles long lines and -e... /bin/grep<br>checking for egrep... /bin/grep -E<br>checking build system type... x86_64-pc-linux-gnu<br>checking host system type... x86_64-pc-linux-gnu<br>checking target system type... x86_64-pc-linux-gnu<br>configure: <br>configure: Configuring Apache Portable Runtime library...<br>configure: <br>checking <strong><span style="color:#ff0000;">for APR... no</span></strong><br>configure: <strong><span style="color:#ff0000;">error: APR not found. Please read the documentation</span></strong>.</p> 
 <p><span style="font-size:16px;"><strong>出现问题，大概意思是说apr软件包不存在，导致配置不成功，它还说让我们去读安装说明文档（目录中的<span style="color:#0000ff;">INSTALL</span>、<span style="color:#0000ff;">README</span>文档）</strong></span></p> 
 <p> </p> 
 <p>首先确认一下，是否apr软件包真不存在：</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# rpm -q apr</strong><br>apr-1.3.9-5.el6_9.1.x86_64</p> 
 <p>很明显，apr软件包已经存在了，这跟配置出错提示的”<span style="color:#ff0000;">APR not found</span>“根本两相矛盾了。</p> 
 <p>所以，这时你就猜测地想到：依赖的apr<span style="color:#ff0000;"><strong>版本冲突</strong></span>了，是完成操作，必须依赖于其它版本的apr。那重新指定依赖的版本行了吧，不使用默认的，于是：</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure -help | grep apr</strong><br> --with-included-apr Use bundled copies of APR/APR-Util<br><span style="color:#ff0000;">--with-apr=PATH</span> prefix for installed APR or the full path to<br> apr-config<br><span style="color:#ff0000;">--with-apr-util=PATH</span> prefix for installed APU or the full path to</p> 
 <p>可以知道，利用<span style="color:#ff0000;">--width-apr=PATH</span> 可以通过配置apr安装目录来指定特定版本的apr，于是 ./configure 操作可以重新执行为如下形式：</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure --prefix=/usr/local/apache2 --with-apr=<span style="color:#ff0000;">能被正确依赖的apr版本的安装目录</span></strong></p> 
 <p>这时要解决的问题是：</p> 
 <p><span style="font-size:18px;"><strong>哪个（哪些）版本的apr能够被正确依赖（由于兼容性原因，猜测的话，一般最新版本最好，当然不排除最新版本的apr不兼容老旧版本的httpd的情况）</strong></span></p> 
 <p> </p> 
 <p><span style="font-size:14pt;"><strong><span style="color:#993366;">由于不是十分肯定是否最新版本apr（或其它软件包）能被正确依赖，我们在解决办法有两个：</span></strong></span></p> 
 <p>办法-1。按照“<span style="color:#ff0000;">Please read the documentation</span>”的提示，去读<span style="color:#0000ff;"><strong>INSTALL</strong>、<strong>README</strong></span>文档，以便确定肯定我们上边的猜测。</p> 
 <p>办法-2。尝试安装某些版本的apr（或其它软件包）直到可行，比如尝试：apr-1.4.2等等。</p> 
 <p><span style="color:#ff00ff;">   *****<strong>先按照办法-1来进行，如果不行的话则进入办法-2。******</strong></span></p> 
 <p> </p> 
 <p> </p> 
 <p><span style="font-size:14pt;"><strong><span style="color:#993366;">先按办法-1去做：</span></strong></span></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# vim INSTALL</strong></p> 
 <p>然后/apr 搜索一下，可以以下相关内容：</p> 
 <p> * Consider if you want to use a previously installed APR and<br> APR-Util (such as those provided with many OSes) or if you<br> need to use the APR and APR-Util from the apr.apache.org<br> project. If the latter, download the latest versions and<br> unpack them to ./srclib/apr and ./srclib/apr-util (no<br> version numbers in the directory names) and use<br> ./configure's --with-included-apr option. This is required<br> if you don't have the compiler which the system APR was<br> built with. It can also be advantageous if you are a<br> developer who will be linking your code with Apache or using<br> a debugger to step through server code, as it removes the<br> possibility of version or compile-option mismatches with APR<br> and APR-Util code. As a convenience, prepackaged source-code<br> bundles of APR and APR-Util are occasionally also provided<br> as a httpd-2.X.X-deps.tar.gz download.</p> 
 <p>这段内容的大概意思是：</p> 
 <p>。。。。。。（不说了，看下边）<strong>==&gt;</strong></p> 
 <p><span style="font-size:16px;"><strong>官方在线的安装说明文档（<span style="color:#0000ff;"><a href="http://httpd.apache.org/docs/2.4/install.html" rel="nofollow"><span style="color:#0000ff;">http://httpd.apache.org/docs/2.4/install.html</span></a></span>）中还有一个比较简要的说明：</strong></span></p> 
 <p>APR and APR-Util<br>Make sure you have APR and APR-Util already installed on your system. If you don't, or prefer to not use the system-provided versions, download the latest versions of both APR and APR-Util from <span style="color:#0000ff;"><a href="http://apr.apache.org/" rel="nofollow"><span style="color:#0000ff;">Apache APR</span></a></span>, unpack them into <code>/httpd_source_tree_root/srclib/apr</code> and <code>/httpd_source_tree_root/srclib/apr-util</code> (be sure the directory names do not have version numbers; for example, the APR distribution must be under /httpd_source_tree_root/srclib/apr/) and use <code>./configure</code>'s <code>--with-included-apr</code> option. On some platforms, you may have to install the corresponding <code>-dev</code> packages to allow httpd to build against your installed copy of APR and APR-Util.<br><span style="color:#ff0000;">apr 和 apr-Util</span></p> 
 <p><span style="color:#ff0000;">确保你系统中已经安装了apr和apr-Util。如果没有安装过，或者安装了却不想用它，那就下载最新版本的apr和apr-Util的源码压缩包并解压后放到：httpd源码目录/srclib/apr与 和 httpd源码目录/srclib/apr-util （命名中不要带版本号）。例如：</span></p> 
 <p><span style="color:#ff0000;">apr源码必须放在：httpd源码目录/srclib/apr 中，并且执行./configure时使用： --with-included-apr</span></p> 
 <p>上边的内容就我们当前的情况来举例，其操作原由和过程就是：</p> 
 <p>不想用内置的RPM版本的APR（因为默认使用时发生版本冲突），那就从网址：http://apr.apache.org/  中下载最新的apr与apr-util（其<span style="color:#ff0000;"><strong>推荐版本</strong></span>为：<a href="http://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-1.7.0.tar.gz" rel="nofollow">apr-1.7.0.tar.gz</a> 与 <a href="http://mirrors.tuna.tsinghua.edu.cn/apache//apr/apr-util-1.6.1.tar.gz" rel="nofollow">apr-util-1.6.1.tar.gz</a> ）</p> 
 <p>然后解压为：</p> 
 <p> apr-1.7.0  目录，重命名为 apr（即去掉版本号信息） </p> 
 <p>apr-util-1.6.1  目录，重命名为 apr-util（即去掉版本号信息） </p> 
 <p>将apr目录与apr-util目录复制（或剪贴）到  httpd源码目录（即：/usr/local/src/httpd-2.4.41/）</p> 
 <p><strong>此时httpd源码目录为：</strong></p> 
 <p>/usr/local/src/httpd-2.4.41/</p> 
 <p>/usr/local/src/httpd-2.4.41/apr</p> 
 <p>/usr/local/src/httpd-2.4.41/apr-util</p> 
 <p>。。。</p> 
 <p>最后，使用：./configure 时，用  --with-included-apr，这是因为：</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure -help | grep with-included-apr</strong> <br> --with-included-apr Use bundled copies of APR/APR-Util</p> 
 <p>可知：配置时使用--with-included-apr，会使用httpd源码目录/srclib/下的apr与apr-util<br><span style="color:#ff0000;"><strong>注意</strong></span>：不要被--with-included-apr 名称迷惑，它同时作用于apr与apr-util。也就是说，没有：--with-included-apr-util参数项。</p> 
 <p> </p> 
 <p>以上便是官方中提到的说明，它提到的最重要的3条是：</p> 
 <p>1。最新版本（或当前推荐版本）的apr及apr-util是可用于当前各版本的httpd的，不会出现版本冲突。（我们之前遇到的问题“<strong>哪个（哪些）版本的apr能够被正确依赖</strong>” ,这1条就是答案---使用<strong><span style="color:#ff0000;">最新版本</span></strong>或<strong><span style="color:#ff0000;">推荐版本</span></strong>）</p> 
 <p>2。可以使用系统内置的apr和apr-util（我们之前使用的就是这种方式，然后遇到了问题，一步步解决后，剩下的版本问题，并最终到达了上边第1条）</p> 
 <p>3。一种用于配置依赖的源码放置方式及命令参数--with-included-apr进行./configure操作。</p> 
 <p> </p> 
 <p><span style="font-size:16px;"><strong>因为我想以源码包的形式手动安装apr与apr-util，所以暂时不按上边的第3条操作，而是根据第1条，<span style="color:#ff0000;">回到我们先前的问题处</span>，即：</strong></span></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure --prefix=/usr/local/apache2 --with-apr=<span style="color:#ff0000;">最新版本或推荐版本的apr安装目录</span></strong></p> 
 <p>由于指定的是“安装目录”，所以必须已进行了相应安装，才存在”安装目录“，我们还没有对最新版本或推荐版本的apr进行安装，于是，先进行安装推荐版本的apr：(假设已经下载并解压）</p> 
 <p><strong>[root@cent001 apr-1.7.0]# ls</strong><br>apr-1-config apr.spec config.layout emacs-mode libapr.rc misc <strong>README</strong> time<br>apr-config.in atomic config.log encoding libtool mmap README.cmake tools<br>apr.dep build config.nice file_io LICENSE network_io shmem user<br>apr.dsp buildconf config.status helpers locks NOTICE strings<br>apr.dsw build.conf configure include Makefile NWGNUmakefile support<br>apr.mak build-outputs.mk configure.in libapr.dep Makefile.in passwd tables<br>apr.pc CHANGES docs libapr.dsp Makefile.win poll test<br>apr.pc.in CMakeLists.txt dso libapr.mak memory random threadproc</p> 
 <p><strong>[root@cent001 apr-1.7.0]# vim README</strong></p> 
 <p>....</p> 
 <p>Configuring and Building APR on Unix<br>====================================</p> 
 <p>Simply;</p> 
 <p>./configure --prefix=/desired/path/of/apr<br>make<br>make test<br>make install</p> 
 <p>....</p> 
 <p><strong>[root@cent001 apr-1.7.0]# ./configure --prefix=/usr/local/apr</strong></p> 
 <p><strong>[root@cent001 apr-1.7.0]# make</strong></p> 
 <p><strong><strong>[root@cent001 apr-1.7.0]# make install</strong></strong></p> 
 <p>至此，最新版本（推荐版本）的apr源码安装成功。有了安装目录：/usr/local/apr，于是，开始执行以下操作：</p> 
 <p><strong><strong>[root@cent001 apr-1.7.0] cd /usr/local/src/httpd-2.4.41</strong></strong></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure --prefix=/usr/local/apache2 --with-apr=/usr/local/apr</strong></p> 
 <p>checking for chosen layout... Apache</p> 
 <p>checking for working mkdir -p... yes<br>checking for grep that handles long lines and -e... /bin/grep<br>checking for egrep... /bin/grep -E<br>checking build system type... x86_64-pc-linux-gnu<br>checking host system type... x86_64-pc-linux-gnu<br>checking target system type... x86_64-pc-linux-gnu<br>configure: <br>configure: Configuring Apache Portable Runtime library...<br>configure: <br>checking for APR... yes<br> setting CC to "gcc"<br> setting CPP to "gcc -E"<br> setting CFLAGS to " -g -O2 -pthread"<br> setting CPPFLAGS to " -DLINUX -D_REENTRANT -D_GNU_SOURCE"<br> setting LDFLAGS to " "<br>configure: <br>configure: Configuring Apache Portable Runtime Utility library...<br>configure: <br>checking <strong><span style="color:#ff0000;">for APR-util... no</span></strong><br>configure: <strong><span style="color:#ff0000;">error: APR-util not found. Please read the documentation.</span></strong></p> 
 <p>出现的问题是apr-util找不到，根据之前的官方文档，发现与apr问题相似，于是，先安装推荐版本的apr-util（假设已经进行了下载和解压）</p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# ls</strong><br>aprutil.dep build configure.in include Makefile.win redis<br>aprutil.dsp buildconf crypto ldap memcache renames_pending<br>aprutil.dsw build.conf dbd libaprutil.dep misc strmatch<br>aprutil.mak build-outputs.mk dbm libaprutil.dsp NOTICE test<br>apr-util.pc.in CHANGES docs libaprutil.mak NWGNUmakefile uri<br>apr-util.spec CMakeLists.txt encoding libaprutil.rc README xlate<br>apu-config.in config.layout export_vars.sh.in LICENSE README.cmake xml<br>buckets configure hooks Makefile.in README.FREETDS</p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# vim README</strong></p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# ./configure --prefix=/usr/local/apr-util</strong><br>checking build system type... x86_64-pc-linux-gnu<br>checking host system type... x86_64-pc-linux-gnu<br>checking target system type... x86_64-pc-linux-gnu<br>checking for a BSD-compatible install... /usr/bin/install -c<br>checking for working mkdir -p... yes<br>APR-util Version: 1.6.1<br>checking for chosen layout... apr-util<br>checking for gcc... gcc<br>checking whether the C compiler works... yes<br>checking for C compiler default output file name... a.out<br>checking for suffix of executables... <br>checking whether we are cross compiling... no<br>checking for suffix of object files... o<br>checking whether we are using the GNU C compiler... yes<br>checking whether gcc accepts -g... yes<br>checking for gcc option to accept ISO C89... none needed<br>Applying apr-util hints file rules for x86_64-pc-linux-gnu<br>checking <span style="color:#ff0000;"><strong>for APR... no</strong></span><br>configure: <strong><span style="color:#ff0000;">error: APR could not be located. Please use the --with-apr option</span></strong>.</p> 
 <p>出现错误，要求用--with-apr 参数指明apr的安装路径，于是：</p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr</strong></p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# make</strong></p> 
 <p>此时出现错误信息有：</p> 
 <p>xml/apr_xml.c:35:19: 错误：expat.h：没有那个文件或目录<br>xml/apr_xml.c:66: 错误：expected specifier-qualifier-list before ‘XML_Parser’<br>xml/apr_xml.c: 在函数‘cleanup_parser’中:<br>xml/apr_xml.c:364: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:365: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c: 在文件层：<br>xml/apr_xml.c:384: 错误：expected ‘;’, ‘,’ or ‘)’ before ‘*’ token<br>xml/apr_xml.c: 在函数‘apr_xml_parser_create’中:<br>xml/apr_xml.c:401: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:402: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:410: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:411: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:412: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:424: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:424: 错误：‘default_handler’未声明(在此函数内第一次使用)<br>xml/apr_xml.c:424: 错误：(即使在一个函数内多次出现，每个未声明的标识符在其<br>xml/apr_xml.c:424: 错误：所在的函数内也只报告一次。)<br>xml/apr_xml.c: 在函数‘do_parse’中:<br>xml/apr_xml.c:434: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:438: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c:442: 错误：‘apr_xml_parser’没有名为‘xp_err’的成员<br>xml/apr_xml.c:442: 错误：‘apr_xml_parser’没有名为‘xp’的成员<br>xml/apr_xml.c: 在函数‘apr_xml_parser_geterror’中:<br>xml/apr_xml.c:500: 错误：‘apr_xml_parser’没有名为‘xp_err’的成员<br>xml/apr_xml.c:500: 错误：‘apr_xml_parser’没有名为‘xp_err’的成员<br>make[1]: *** [xml/apr_xml.lo] 错误 1<br>make[1]: Leaving directory `/usr/local/src/apr-util-1.6.1'<br>make: *** [all-recursive] 错误 1</p> 
 <p>百度了一下，根据：https://blog.csdn.net/dn1115680109/article/details/80847924</p> 
 <p>于是对缺少的expat库进行安装：</p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# yum install -y  expat-devel</strong></p> 
 <p>执行后就安装了：expat-devel.x86_64 0:2.0.1-11.el6_2，然后清理后再次编译：</p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# make clean</strong></p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# make</strong></p> 
 <p><strong>[root@cent001 apr-util-1.6.1]# make install</strong></p> 
 <p>至此，最新版本（推荐版本）的apr-util 源码安装成功。有了安装目录：/usr/local/apr-util，于是，开始执行以下操作：</p> 
 <p><strong>[root@cent001 </strong><strong> apr-util-1.6.1</strong><strong>] cd /usr/local/src/httpd-2.4.41</strong></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure --prefix=/usr/local/apache2 --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util</strong></p> 
 <p>．．．</p> 
 <p>checking whether gcc accepts -g... yes</p> 
 <p>checking for gcc option to accept ISO C89... none needed</p> 
 <p>checking how to run the C preprocessor... gcc -E</p> 
 <p>checking for gcc option to accept ISO C99... -std=gnu99</p> 
 <p>checking <strong><span style="color:#ff0000;">for pcre-config... false</span></strong></p> 
 <p>configure: <strong><span style="color:#ff0000;">error: pcre-config for libpcre not found. PCRE is required and available from http://pcre.org/</span></strong></p> 
 <p>出错原因：pcre模块没有配置。于是我们查看一下pcre:</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# rpm -q pcre</strong></p> 
 <p>pcre-7.8-7.el6.x86_64</p> 
 <p>说明默认是有的，可能还是版本冲突原因，依据<strong><span style="color:#ff0000;"><a href="http://pcre.org/" rel="nofollow">http://pcre.org/</a></span></strong>下载个最新版（如果该网上不去，可以换成https协议访问：<strong><span style="color:#0000ff;"><a href="https://pcre.org/" rel="nofollow"><span style="color:#0000ff;">https://pcre.org/</span></a></span></strong> ,或者访问：<a href="https://sourceforge.net/projects/pcre/files/" rel="nofollow"><strong><span style="color:#0000ff;">https://sourceforge.net/projects/pcre/files/</span></strong></a></p> 
 <p>下载最新版本的pcre（暂时不用：pcre2)：<a style="font-family:'Courier New';font-size:12px;" href="https://ftp.pcre.org/pub/pcre/pcre-8.43.tar.gz" rel="nofollow">pcre-8.43.tar.gz</a></p> 
 <p><strong>[root@cent001 pcre-8.43]# ls</strong></p> 
 <p>查看到有INSTALL安装说明文档</p> 
 <p><strong>[root@cent001 pcre-8.43]# vim INSTALL</strong></p> 
 <p>一些安装说明：</p> 
 <p>configure、make、make check、make install、make installcheck、</p> 
 <p>make maintainer-clean、make uninstall、make  distcheck、./configure --help</p> 
 <p><strong>[root@cent001 pcre-8.43]# ./configure --prefix=/usr/local/pcre</strong></p> 
 <p><strong>[root@cent001 pcre-8.43]# make</strong></p> 
 <p><strong>[root@cent001 pcre-8.43]# make install</strong></p> 
 <p><span style="color:#000000;">至此，最新版本的pcre 源码安装成功。有了安装目录：/usr/local/pcre，于是，开始执行以下操作：</span></p> 
 <p><strong>[root@cent001 </strong><strong> apr-util-1.6.1</strong><strong>] cd /usr/local/src/httpd-2.4.41</strong></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure --prefix=/usr/local/apache2 --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util -with-pcre=/usr/local/pcre</strong></p> 
 <p>．．．</p> 
 <p>configure: summary of build options:</p> 
 <p> Server Version: 2.4.41<br> Install prefix: /usr/local/apache2<br> C compiler: gcc -std=gnu99<br> CFLAGS: -g -O2 -pthread <br> CPPFLAGS: -DLINUX -D_REENTRANT -D_GNU_SOURCE <br> LDFLAGS: <br> LIBS: <br> C preprocessor: gcc -E</p> 
 <p>至此，httpd服务安装过程中的配置正确地完成，进入<strong><span style="color:#ff00ff;">”理论步骤“3.2</span></strong></p> 
 <p><span style="color:#ff0000;font-size:18pt;"><strong>编译：使用 make 命令直接执行</strong></span></p> 
 <p><span style="color:#000000;"><strong>[root@cent001 httpd-2.4.41]# make clean</strong></span></p> 
 <p><span style="color:#000000;"><strong><strong>[root@cent001 httpd-2.4.41]# make</strong></strong></span></p> 
 <p>．．．</p> 
 <p>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_ParserCreate'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_GetErrorCode'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_SetUserData'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_ErrorString'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_SetEntityDeclHandler'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_ParserFree'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_SetElementHandler'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_StopParser'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_Parse'<br>/usr/local/<span style="color:#ff0000;"><strong>apr-util</strong></span>/lib/libaprutil-1.so: undefined reference to `XML_SetCharacterDataHandler'<br><strong><span style="color:#ff0000;">collect2: ld returned 1 exit status</span></strong><br>make[2]: *** [htpasswd] 错误 1<br>make[2]: Leaving directory `/usr/local/src/httpd-2.4.41/support'<br>make[1]: *** [all-recursive] 错误 1<br>make[1]: Leaving directory `/usr/local/src/httpd-2.4.41/support'<br>make: *** [all-recursive] 错误 1</p> 
 <p>出错原因：猜测是由于apr-util引起的。</p> 
 <p>如果是这样的话，那么：之前猜想着“官方都极力推荐了那么应该没问题”是有问题的，apr-util推荐版本可以针对任何版本都可行这种想法就是错误的。</p> 
 <p>现在是真的是apr-util的问题吗？推荐版本的apr-util究竟是真的可靠吗？</p> 
 <p>明眼看上去，确实apr-util很有问题！官方办法行不通了，于是采用土法：</p> 
 <p> </p> 
 <p><span style="color:#993366;font-size:14pt;"><strong>按办法-2去做</strong></span></p> 
 <p> </p> 
 <p><span style="color:#ff00ff;"><strong>于是更换一下低版本的apr-util 来试试：</strong></span></p> 
 <p><span style="font-size:16px;"><strong>重新下载低版本的apr-util:</strong></span></p> 
 <p>网址：http://archive.apache.org/dist/apr/  （此网址包含各版本的apr与apr-util，但速度较慢，建议使用百度搜索：archive.apache.org/dist/apr/  然后以<a class="m" href="http://cache.baiducontent.com/c?m=9f65cb4a8c8507ed19fa950d100b8426480edb276bc0d0622c96c019c9334c41303ba3ee3a744b4595d82f2541b25d19b7b0607d644371edc08cdf5ddccb8528589f2644235ed51048840eaebb5125b637912ab4ef4cf0ba8164c8ef94c4df25008813&amp;p=8b2a9715d9c040a90caa8c0c4e47c6&amp;newp=817ec54ad5c247b94ebcc7710f0090231610db2151d6d1146b82c825d7331b001c3bbfb423271001d0cf786306a44357ecf13272350923a3dda5c91d9fb4c574799e3165&amp;user=baidu&amp;fm=sc&amp;query=archive.apache.org/dist/apr/&amp;qid=c6d8ca69000290bb&amp;p1=1" rel="nofollow">百度快照</a> 形式进入下载）</p> 
 <p>下载 <a href="http://archive.apache.org/dist/apr/apr-util-1.3.11.tar.gz" rel="nofollow">apr-util-1.3.11.tar.gz</a>  （下载速度太慢，有时真的下不动。推荐从其它地方下载）</p> 
 <p>然后进行解压。移除之前版本（直接重命名），进行当前版本安装：</p> 
 <p><strong><strong>[root@cent001 httpd-2.4.41]# cd /usr/local/</strong></strong></p> 
 <p><strong>[root@cent001 local]# mv apr-util apr-util.bak2</strong></p> 
 <p><strong>[root@cent001 <strong>local</strong>]# cd /usr/local/src/apr-util-1.3.11</strong></p> 
 <p><strong>[root@cent001 apr-util-1.3.11]# ./configure --prefix=/usr/local/apr-util --with-apr=/usr/local/apr</strong></p> 
 <p><strong>[root@cent001 apr-util-1.3.11]# make clean</strong></p> 
 <p><strong>[root@cent001 apr-util-1.3.11]# make</strong></p> 
 <p><strong>[root@cent001 apr-util-1.3.11]# make install</strong></p> 
 <p>至此，apr-util已经替换为低版本，重新执行：</p> 
 <p><strong>[root@cent001 </strong><strong> apr-util-1.6.1</strong><strong>] cd /usr/local/src/httpd-2.4.41</strong></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# ./configure --prefix=/usr/local/apache2 --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr-util -with-pcre=/usr/local/pcre</strong></p> 
 <p><strong><strong>[root@cent001 httpd-2.4.41]# make clean</strong></strong></p> 
 <p><strong><strong><strong>[root@cent001 httpd-2.4.41]# make</strong></strong></strong></p> 
 <p>至此，编译任务成功，进入<span style="color:#ff00ff;"><strong>”理论步骤“3.3</strong></span></p> 
 <p> </p> 
 <p><span style="color:#ff0000;font-size:18pt;"><strong>安装：使用 make install 命令直接执行</strong></span></p> 
 <p><strong><strong><strong><strong><strong><strong>[root@cent001 httpd-2.4.41]# make install</strong></strong></strong></strong></strong></strong></p> 
 <p>至此，安装任务成功，进入<span style="color:#ff00ff;"><strong>”理论步骤“4</strong></span></p> 
 <p><span style="font-size:18px;"><strong> 这里直接说明了：”官方极力推荐的版本并不一定适用“，比如<span style="color:#ff0000;">apr</span>适用，而<span style="color:#ff0000;">apr-util</span>就不适用。</strong></span></p> 
 <p><span style="color:#ff0000;font-size:18pt;"><strong><strong>启用httpd服务（运行apache）中，使用浏览器访问</strong></strong></span></p> 
 <p> </p> 
 <p><strong><span style="font-size:18px;">启动服务，使用：安装目录/bin/apachectl start</span> </strong>   （要停止服务则使用：安装目录/bin/apachectl stop）</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# /usr/local/apache2/bin/apachectl start</strong><br><span style="color:#ff0000;">AH00557: httpd: apr_sockaddr_info_get() failed for cent001</span><br><span style="color:#ff0000;">AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1. Set the 'ServerName' directive globally to suppress this message</span></p> 
 <p>这种情况，可以参照 https://www.cnblogs.com/xiaoqian1993/p/6027907.html  ，进行2步修改：</p> 
 <p><strong>1。修改HOSTS文件：</strong></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# vim <span style="color:#ff00ff;">/etc/hosts</span></strong></p> 
 <p><span style="color:#ff0000;">添加一行</span>(注意其中的cent001为主机名）:       127.0.0.1   localhost.localdomain localhost <strong><span style="color:#ff0000;">cent001</span></strong></p> 
 <p> </p> 
 <p><strong>2。修改HTTPD配置文件：</strong></p> 
 <p>[root@cent001 httpd-2.4.41]# vim <span style="color:#ff00ff;"><strong>/usr/local/apache2/conf/httpd.conf</strong></span></p> 
 <p>查找#ServerName，<span style="color:#ff0000;">添加一行</span>：ServerName <strong><span style="color:#ff0000;">localhost</span></strong>:80</p> 
 <p> </p> 
 <p>再次启动（或停止后再次启动）：</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# /usr/local/apache2/bin/apachectl start</strong><br><strong style="font-size:18px;">浏览：http://localhost/       或   http://127.0.0.1       或    http://192.168.253.129    </strong></p> 
 <p><span style="font-size:18px;"><strong>正常的话显示：It works!</strong></span></p> 
 <p><span style="font-size:14px;">httpd (pid 119873) already running<br><br></span></p> 
 <p><span style="font-size:14px;">至此，整个<span style="color:#ff00ff;"><strong>httpd-2.4.41</strong></span>安装过程算是暂时可行。另外还有一些其它的问题：</span>系统有时也默认安装了httpd服务（RPM形式）：</p> 
 <p> </p> 
 <p><strong><span style="font-size:18pt;">如果是RMP包的APACHE可以直接进行如下操作：</span></strong><br><strong><span style="color:#ff0000;">查看RPM的APACHE版本：</span></strong><br><strong>[root@cent001 httpd-2.4.41]# rpm -q httpd</strong><br>httpd-2.2.15-53.el6.centos.x86_64</p> 
 <p>或者：</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# httpd -v</strong><br>Server version: Apache/2.2.15 (Unix)<br>Server built: May 11 2016 19:28:33</p> 
 <p> </p> 
 <p><strong><span style="color:#ff0000;">查看RPM的APACHE状态：</span></strong><br><strong>[root@cent001 httpd-2.4.41]# service httpd status</strong><br>httpd 已停</p> 
 <p> </p> 
 <p><strong><span style="color:#ff0000;">RPM的APACHE启动方式：</span></strong></p> 
 <p><strong>[root@cent001 httpd-2.4.41]# service httpd start</strong></p> 
 <p>正在启动 httpd：                                           [确定]</p> 
 <p>[root@cent001 httpd-2.4.41]# service httpd status<br>httpd (pid 120138) 正在运行...</p> 
 <p><strong>使用启动命令后没有出错信息的情况下，通过查询状态为<span style="color:#339966;">“正在运行”</span>就可以表明已经成功启动服务。</strong></p> 
 <p><strong>如果启动失败，信息如下显示时，则代表已经有服务<span style="color:#ff0000;">占用了80端口</span>（可能是源码包的APACHE已经启动了，要使用RPM的APACHE的话就可以先停止源码版的）</strong><br>正在启动 httpd：(98)Address already in use: make_sock: could not bind to address [::]:80<br>(98)Address already in use: make_sock: could not bind to address 0.0.0.0:80<br>no listening sockets available, shutting down<br>Unable to open logs<br> [失败]</p> 
 <p>另外，如果像源码版的APACHE服务，启动时显示：<br><br><span style="color:#ff0000;"><em id="__mceDel">AH00557: httpd: apr_sockaddr_info_get() failed for cent001</em></span></p> 
 <p><span style="color:#ff0000;"><em>AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 127.0.0.1. Set the 'ServerName' directive globally to suppress this message</em></span></p> 
 <p>则可以按照源码版，同时修改HOSTS文件及配置文件：</p> 
 <p>其中HOSTS文件是同一个（即说到HOSTS文件的时候，就是指：<strong><span style="color:#ff00ff;">/etc/hosts</span></strong>）</p> 
 <p>而RPM版的APACHE的配置文件，是在：<strong><span style="color:#ff00ff;">/etc/httpd/conf/httpd.conf</span></strong>  （可以通过：<strong># rpm -ql httpd | more </strong> 看到）</p> 
 <p><strong>[root@cent001 httpd-2.4.41]# vim /etc/httpd/conf/httpd.conf</strong></p> 
 <p>按照上边源码版的修改同样修改就可以！</p> 
 <p> </p> 
 <p> </p> 
 <p>==================================================================</p> 
 <p>    END OF 《Apache源码包在LINUX（CENTOS6.8)中的安装（出现问题及解决）》</p> 
 <p>==================================================================</p> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/dreamyoung/p/11396094.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/adc9914cc45a2bfd2d6b46eece0208a9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">AttributeError: module &#39;keras.backend&#39; has no attribute &#39;image_dim_ordering&#39;</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c96856d7554f8c404b81da8fe4826ca8/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">STAR软件安装以及使用</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>