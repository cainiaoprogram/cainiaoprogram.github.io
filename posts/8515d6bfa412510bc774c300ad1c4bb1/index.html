<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Open3D 入门教程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Open3D 入门教程" />
<meta property="og:description" content="文章目录 1、概述2、安装3、点云读写4、点云可视化4.1、可视化单个点云4.2、同一窗口可视化多个点云4.3、 可视化的属性设置 5、k-d tree 与 Octree5.1、k-d tree5.2、Octree5.2.1、从点云中构建Octree5.2.2、从体素栅格中构建 Octree 6、点云滤波6.1、体素下采样6.2、统计滤波6.3、半径滤波 7、点云特征提取7.1、法线估计 8、点云分割8.1、DBSCAN 聚类分割8.2、RANSAC 平面分割8.3、隐藏点剔除 9、点云曲面重建9.1、Alpha shapes9.2、Ball pivoting9.3、Poisson surface reconstruction 10、点云空间变换10.1、Translate 平移10.1.1、指定平移行向量，实现点云平移10.1.2 将点云质心平移到指定位置 10.2 Rotation 旋转10.2.1 使用欧拉角旋转10.2.1.1 未指定旋转中心10.2.1.2 指定旋转中心 10.2.2 使用轴向角旋转10.2.3 使用四元数旋转 10.3 Scale 缩放10.4 General transformation 一般变换（平移&#43;旋转） 11、点云配准12、其他常用算法12.1、计算点云间的距离12.2、计算点云最小包围盒12.3、计算点云凸包12.4、点云体素化12.4.1、一种简单的方法12.1.2、复杂方法 12.5 计算点云质心12.6、根据索引提取点云12.7、点云赋色 1、概述 Open3D是一个开源库，支持快速开发处理3D数据的软件。Open3D后端是用C&#43;&#43;实现的，经过高度优化并通过Python的前端接口公开。Open3D提供了三种数据结构： 点云 （point cloud）、网格（mesh）和RGB-D图像。对于每个表示，open3D都实现了一整套基本处理算法，如I/O、采样、可视化和数据转换。此外，还包括一些常用的算法，如法线估计、ICP 配准等。
open3D包含了九个模块，如下表所示：
模块功能Geometry 几何模块数据结构和基本处理算法Camera 相机模块相机模型和相机轨迹Odometry 里程计模块RGB-D图像的跟踪与对齐Registration 配准模块全局和局部配准Integration 积分模块体积积分I/O 输入输出模块读写3维数据Visualization 可视化模块使用OpenGL呈现3D数据的可自定义GUIUtility 辅助功能模块辅助功能，如控制台输出、文件系统和特征包装器Python 模块Open3D Python绑定和教程 本文旨在快速入门Python点云数据处理，原理性知识会在后续专题中给出，这里不做过多描述。
2、安装 pip install open3d 3、点云读写 代码:
import open3d as o3d import numpy as np print(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8515d6bfa412510bc774c300ad1c4bb1/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-20T14:26:17+08:00" />
<meta property="article:modified_time" content="2023-07-20T14:26:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Open3D 入门教程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#1_2" rel="nofollow">1、概述</a></li><li><a href="#2_24" rel="nofollow">2、安装</a></li><li><a href="#3_32" rel="nofollow">3、点云读写</a></li><li><a href="#4_81" rel="nofollow">4、点云可视化</a></li><li><ul><li><a href="#41_83" rel="nofollow">4.1、可视化单个点云</a></li><li><a href="#42_111" rel="nofollow">4.2、同一窗口可视化多个点云</a></li><li><a href="#43__151" rel="nofollow">4.3、 可视化的属性设置</a></li></ul> 
    </li><li><a href="#5kd_tree__Octree_228" rel="nofollow">5、k-d tree 与 Octree</a></li><li><ul><li><a href="#51kd_tree_230" rel="nofollow">5.1、k-d tree</a></li><li><a href="#52Octree_273" rel="nofollow">5.2、Octree</a></li><li><ul><li><a href="#521Octree_279" rel="nofollow">5.2.1、从点云中构建Octree</a></li><li><a href="#522_Octree_321" rel="nofollow">5.2.2、从体素栅格中构建 Octree</a></li></ul> 
    </li></ul> 
    </li><li><a href="#6_372" rel="nofollow">6、点云滤波</a></li><li><ul><li><a href="#61_374" rel="nofollow">6.1、体素下采样</a></li><li><a href="#62_415" rel="nofollow">6.2、统计滤波</a></li><li><a href="#63_466" rel="nofollow">6.3、半径滤波</a></li></ul> 
    </li><li><a href="#7_519" rel="nofollow">7、点云特征提取</a></li><li><ul><li><a href="#71_521" rel="nofollow">7.1、法线估计</a></li></ul> 
    </li><li><a href="#8_568" rel="nofollow">8、点云分割</a></li><li><a href="#81DBSCAN__570" rel="nofollow">8.1、DBSCAN 聚类分割</a></li><li><ul><li><a href="#82RANSAC__621" rel="nofollow">8.2、RANSAC 平面分割</a></li><li><a href="#83_673" rel="nofollow">8.3、隐藏点剔除</a></li></ul> 
    </li><li><a href="#9_741" rel="nofollow">9、点云曲面重建</a></li><li><ul><li><a href="#91Alpha_shapes_749" rel="nofollow">9.1、Alpha shapes</a></li><li><a href="#92Ball_pivoting_780" rel="nofollow">9.2、Ball pivoting</a></li><li><a href="#93Poisson_surface_reconstruction_822" rel="nofollow">9.3、Poisson surface reconstruction</a></li></ul> 
    </li><li><a href="#10_903" rel="nofollow">10、点云空间变换</a></li><li><ul><li><a href="#101Translate__909" rel="nofollow">10.1、Translate 平移</a></li><li><ul><li><a href="#1011_923" rel="nofollow">10.1.1、指定平移行向量，实现点云平移</a></li><li><a href="#1012__989" rel="nofollow">10.1.2 将点云质心平移到指定位置</a></li></ul> 
     </li><li><a href="#102_Rotation__1046" rel="nofollow">10.2 Rotation 旋转</a></li><li><ul><li><a href="#1021__1068" rel="nofollow">10.2.1 使用欧拉角旋转</a></li><li><ul><li><a href="#10211__1070" rel="nofollow">10.2.1.1 未指定旋转中心</a></li><li><a href="#10212__1124" rel="nofollow">10.2.1.2 指定旋转中心</a></li></ul> 
      </li><li><a href="#1022__1178" rel="nofollow">10.2.2 使用轴向角旋转</a></li><li><a href="#1023__1180" rel="nofollow">10.2.3 使用四元数旋转</a></li></ul> 
     </li><li><a href="#103_Scale__1182" rel="nofollow">10.3 Scale 缩放</a></li><li><a href="#104_General_transformation__1245" rel="nofollow">10.4 General transformation 一般变换（平移+旋转）</a></li></ul> 
    </li><li><a href="#11_1304" rel="nofollow">11、点云配准</a></li><li><a href="#12_1308" rel="nofollow">12、其他常用算法</a></li><li><ul><li><a href="#121_1310" rel="nofollow">12.1、计算点云间的距离</a></li><li><a href="#122_1361" rel="nofollow">12.2、计算点云最小包围盒</a></li><li><a href="#123_1397" rel="nofollow">12.3、计算点云凸包</a></li><li><a href="#124_1430" rel="nofollow">12.4、点云体素化</a></li><li><ul><li><a href="#1241_1432" rel="nofollow">12.4.1、一种简单的方法</a></li><li><a href="#1212_1467" rel="nofollow">12.1.2、复杂方法</a></li></ul> 
     </li><li><a href="#125__1755" rel="nofollow">12.5 计算点云质心</a></li><li><a href="#126_1786" rel="nofollow">12.6、根据索引提取点云</a></li><li><a href="#127_1856" rel="nofollow">12.7、点云赋色</a></li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="1_2"></a>1、概述</h4> 
<p>Open3D是一个开源库，支持快速开发处理3D数据的软件。Open3D后端是用C++实现的，经过高度优化并通过Python的前端接口公开。Open3D提供了三种数据结构： 点云 （point cloud）、网格（mesh）和RGB-D图像。对于每个表示，open3D都实现了一整套基本处理算法，如I/O、采样、可视化和数据转换。此外，还包括一些常用的算法，如法线估计、ICP 配准等。</p> 
<p>open3D包含了九个模块，如下表所示：</p> 
<table><thead><tr><th align="center"><strong>模块</strong></th><th align="center"><strong>功能</strong></th></tr></thead><tbody><tr><td align="center">Geometry 几何模块</td><td align="center">数据结构和基本处理算法</td></tr><tr><td align="center">Camera 相机模块</td><td align="center">相机模型和相机轨迹</td></tr><tr><td align="center">Odometry 里程计模块</td><td align="center">RGB-D图像的跟踪与对齐</td></tr><tr><td align="center">Registration 配准模块</td><td align="center">全局和局部配准</td></tr><tr><td align="center">Integration 积分模块</td><td align="center">体积积分</td></tr><tr><td align="center">I/O 输入输出模块</td><td align="center">读写3维数据</td></tr><tr><td align="center">Visualization 可视化模块</td><td align="center">使用OpenGL呈现3D数据的可自定义GUI</td></tr><tr><td align="center">Utility 辅助功能模块</td><td align="center">辅助功能，如控制台输出、文件系统和特征包装器</td></tr><tr><td align="center">Python 模块</td><td align="center">Open3D Python绑定和教程</td></tr></tbody></table> 
<p>本文旨在快速入门Python点云数据处理，原理性知识会在后续专题中给出，这里不做过多描述。</p> 
<h4><a id="2_24"></a>2、安装</h4> 
<pre><code class="prism language-python">pip install open3d
</code></pre> 
<h4><a id="3_32"></a>3、点云读写</h4> 
<p><strong>代码:</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"test.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在保存点云"</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>write_point_cloud<span class="token punctuation">(</span><span class="token string">"write.pcd"</span><span class="token punctuation">,</span> pcd<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 默认false，保存为Binarty；True 保存为ASICC形式</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果:</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">356478</span> points.
-<span class="token operator">&gt;</span>正在保存点云
PointCloud with <span class="token number">356478</span> points.
</code></pre> 
<p><img src="https://images2.imgbox.com/d2/75/FD94l0ML_o.png" alt=""></p> 
<p>默认情况下，Open3D尝试通过文件扩展名推断文件类型。支持以下点云文件类型：</p> 
<table><thead><tr><th align="center"><strong>格式</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">xyz</td><td align="center">每一行包含 [x, y, z] , 其中的 x , y , z 是三维坐标</td></tr><tr><td align="center">xyzn</td><td align="center">每一行包含 [x, y, z, nx, ny, nz] , 其中的 nx , ny , nz 是法线向量</td></tr><tr><td align="center">xyzrgb</td><td align="center">每一行包含 [x, y, z, r, g, b] , 其中的 r , g , b 是范围在 [0, 1] 的float类型</td></tr><tr><td align="center">pts</td><td align="center">第一行是表示点数的整数。每个后续行包含 [x, y, z, i, r, g, b] , 其中的 r , g , b 是 uint8 类型</td></tr><tr><td align="center">ply</td><td align="center">查看 Polygon File Format, ply文件能够同时包含点云和网格数据</td></tr><tr><td align="center">pcd</td><td align="center">查看 Point Cloud Data</td></tr></tbody></table> 
<p>也可以显式地指定文件类型。在这种情况下，文件扩展名将被忽略。</p> 
<pre><code class="prism language-python"> pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"../../test_data/my_points.txt"</span><span class="token punctuation">,</span> <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'xyz'</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="4_81"></a>4、点云可视化</h4> 
<h5><a id="41_83"></a>4.1、可视化单个点云</h5> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"test.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在可视化点云"</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">356478</span> points.
-<span class="token operator">&gt;</span>正在可视化点云
</code></pre> 
<p><strong>可视化结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/7c/53/zSFgmr11_o.png" alt=""></p> 
<h5><a id="42_111"></a>4.2、同一窗口可视化多个点云</h5> 
<p><strong>函数描述：</strong></p> 
<pre><code class="prism language-python">o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd1<span class="token punctuation">,</span> pcd2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">,</span>pcdn<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云1... "</span><span class="token punctuation">)</span>
pcd1 <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd1<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云2..."</span><span class="token punctuation">)</span>
pcd2 <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny0.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd2<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在同时可视化两个点云..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd1<span class="token punctuation">,</span> pcd2<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云1<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在加载点云2<span class="token punctuation">..</span>.
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在同时可视化两个点云<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/67/cb/OgACotBi_o.png" alt=""></p> 
<h5><a id="43__151"></a>4.3、 可视化的属性设置</h5> 
<p><strong>函数原型</strong></p> 
<pre><code class="prism language-python">draw_geometries<span class="token punctuation">(</span>geometry_list<span class="token punctuation">,</span> window_name<span class="token operator">=</span><span class="token string">'Open3D'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">1920</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1080</span><span class="token punctuation">,</span> left<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> point_show_normal<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> mesh_show_wireframe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> mesh_show_back_face<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>参数说明</strong></p> 
<table><thead><tr><th align="center"><strong>参数名</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">geometry_list</td><td align="center">要可视化的几何体列表</td></tr><tr><td align="center">window_name</td><td align="center">(str, optional, default=‘Open3D’) ，可视化窗口的显示标题</td></tr><tr><td align="center">width</td><td align="center">(int, optional, default=1920) ，可视化窗口的宽度</td></tr><tr><td align="center">height</td><td align="center">(int, optional, default=1080) ，可视化窗口的高度</td></tr><tr><td align="center">left</td><td align="center">(int, optional, default=50) ，可视化窗口的左边距</td></tr><tr><td align="center">top</td><td align="center">(int, optional, default=50) ，可视化窗口的顶部边距</td></tr><tr><td align="center">point_show_normal</td><td align="center">(bool, optional, default=False) ，如果设置为true，则可视化点法线，需要事先计算点云法线</td></tr><tr><td align="center">mesh_show_wireframe</td><td align="center">(bool, optional, default=False) ，如果设置为true，则可视化网格线框</td></tr><tr><td align="center">mesh_show_back_face</td><td align="center">(bool, optional, default=False) ，可视化网格三角形的背面</td></tr></tbody></table> 
<p><strong>函数原型</strong></p> 
<pre><code class="prism language-python">draw_geometries<span class="token punctuation">(</span>geometry_list<span class="token punctuation">,</span> window_name<span class="token operator">=</span><span class="token string">'Open3D'</span><span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">1920</span><span class="token punctuation">,</span> height<span class="token operator">=</span><span class="token number">1080</span><span class="token punctuation">,</span> left<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> top<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span> point_show_normal<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> mesh_show_wireframe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> mesh_show_back_face<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> lookat<span class="token punctuation">,</span> up<span class="token punctuation">,</span> front<span class="token punctuation">,</span> zoom<span class="token punctuation">)</span>
</code></pre> 
<p><strong>参数说明</strong></p> 
<table><thead><tr><th align="center"><strong>参数名</strong></th><th align="center"><strong>描述</strong></th></tr></thead><tbody><tr><td align="center">geometry_list</td><td align="center">要可视化的几何体列表</td></tr><tr><td align="center">window_name</td><td align="center">(str, optional, default=‘Open3D’) ，可视化窗口的显示标题</td></tr><tr><td align="center">width</td><td align="center">(int, optional, default=1920) ，可视化窗口的宽度</td></tr><tr><td align="center">height</td><td align="center">(int, optional, default=1080) ，可视化窗口的高度</td></tr><tr><td align="center">left</td><td align="center">(int, optional, default=50) ，可视化窗口的左边距</td></tr><tr><td align="center">top</td><td align="center">(int, optional, default=50) ，可视化窗口的顶部边距</td></tr><tr><td align="center">point_show_normal</td><td align="center">(bool, optional, default=False) ，如果设置为true，则可视化点法线</td></tr><tr><td align="center">mesh_show_wireframe</td><td align="center">(bool, optional, default=False) ，如果设置为true，则可视化网格线框</td></tr><tr><td align="center">mesh_show_back_face</td><td align="center">(bool, optional, default=False) ，可视化网格三角形的背面</td></tr><tr><td align="center">lookat</td><td align="center">(numpy.ndarray[float64[3, 1]]) ，相机的注视向量</td></tr><tr><td align="center">up</td><td align="center">(numpy.ndarray[float64[3, 1]]) ，相机的上方向向量</td></tr><tr><td align="center">front</td><td align="center">(numpy.ndarray[float64[3, 1]]) ，相机的前矢量</td></tr><tr><td align="center">zoom</td><td align="center">(float) ，相机的缩放倍数</td></tr></tbody></table> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d


<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token comment"># 法线估计</span>
radius <span class="token operator">=</span> <span class="token number">0.01</span>   <span class="token comment"># 搜索半径</span>
max_nn <span class="token operator">=</span> <span class="token number">30</span>     <span class="token comment"># 邻域内用于估算法线的最大点数</span>
pcd<span class="token punctuation">.</span>estimate_normals<span class="token punctuation">(</span>search_param<span class="token operator">=</span>o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>KDTreeSearchParamHybrid<span class="token punctuation">(</span>radius<span class="token punctuation">,</span> max_nn<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># 执行法线估计</span>

<span class="token comment"># 可视化</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">,</span> 
                                  window_name <span class="token operator">=</span> <span class="token string">"可视化参数设置"</span><span class="token punctuation">,</span>
                                  width <span class="token operator">=</span> <span class="token number">600</span><span class="token punctuation">,</span>
                                  height <span class="token operator">=</span> <span class="token number">450</span><span class="token punctuation">,</span>
                                  left <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span>
                                  top <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span>
                                  point_show_normal <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/7d/99/AHyrzqCN_o.png" alt=""></p> 
<h4><a id="5kd_tree__Octree_228"></a>5、k-d tree 与 Octree</h4> 
<h5><a id="51kd_tree_230"></a>5.1、k-d tree</h5> 
<ul><li> <p>o3d.geometry.KDTreeFlann(pcd) ：建立 KDTree</p> </li><li> <p>search_knn_vector_3d(search_Pt, k) ：K 近邻搜索</p> </li><li> <p>search_radius_vector_3d(search_Pt, radius) ：半径 R 近邻搜索</p> </li><li> <p>search_hybrid_vector_3d(search_pt, radius, max_nn) ：混合邻域搜索，返回半径 radius 内不超过 max_nn 个近邻点</p> </li></ul> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
<span class="token comment"># 将点云设置为灰色</span>
pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash"> -<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
使用K近邻，将第1500个点最近的5000个点设置为蓝色
k邻域内的点数为： <span class="token number">5000</span>
使用半径R近邻，将第1500个点半径（0.02）范围内的点设置为红色
半径r邻域内的点数为： <span class="token number">751</span>
使用混合邻域，将第1500个点半径R邻域内不超过max_num个点设置为绿色
混合邻域内的点数为： <span class="token number">200</span>
-<span class="token operator">&gt;</span>正在可视化点云<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/03/65/YPEjusPM_o.png" alt=""></p> 
<h5><a id="52Octree_273"></a>5.2、Octree</h5> 
<p>八叉树（Octree）是一种树数据结构，其中每个内部节点有八个子节点。八叉树通常用于三维点云的空间划分。八叉树的非空叶节点包含属于同一空间细分的一个或多个点。八叉树是三维空间的有用描述，可用于快速查找附近的点。Open3D具有几何体类型的八叉树，可用于创建、搜索和遍历具有用户指定的最大树深度的八叉树 max_depth 。</p> 
<h6><a id="521Octree_279"></a>5.2.1、从点云中构建Octree</h6> 
<p>可以使用 convert_from_point_cloud 方法从点云构造八叉树。通过遵循从根节点到“最大深度”（depth max_depth）处的相应叶节点的路径，将每个点插入到树中。随着树深度的增加，内部（最终是叶子）节点表示三维空间的较小分区。</p> 
<p>如果点云具有颜色，则对应的叶节点将采用上次插入点的颜色。 size_expand 参数会增加根八叉树节点的大小，使其略大于原始点云边界以容纳所有点。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># --------------------------- 加载点云 ---------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"tree.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原始点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>

<span class="token comment"># ------------------------- 构建Octree --------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'octree 分割'</span><span class="token punctuation">)</span>
octree <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>Octree<span class="token punctuation">(</span>max_depth<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
octree<span class="token punctuation">.</span>convert_from_point_cloud<span class="token punctuation">(</span>pcd<span class="token punctuation">,</span> size_expand<span class="token operator">=</span><span class="token number">0.01</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在可视化Octree..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>octree<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
原始点云： PointCloud with <span class="token number">5746</span> points.
octree 分割
-<span class="token operator">&gt;</span>正在可视化Octree<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/5f/82/wLmctqHB_o.png" alt=""></p> 
<h6><a id="522_Octree_321"></a>5.2.2、从体素栅格中构建 Octree</h6> 
<p>还可以使用 create_from_voxel_grid 的方法，从Open3D体素网格 VoxelGrid 几何体构建八叉树。每个体素被视为三维空间中的一个点，坐标对应于体素的原点。每个叶节点采用其相应体素的颜色。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># --------------------------- 加载点云 ---------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"tree.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原始点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>

<span class="token comment"># ------------------------- 构建Octree --------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'体素化'</span><span class="token punctuation">)</span>
voxel_grid <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>VoxelGrid<span class="token punctuation">.</span>create_from_point_cloud<span class="token punctuation">(</span>pcd<span class="token punctuation">,</span> voxel_size<span class="token operator">=</span><span class="token number">0.2</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"体素："</span><span class="token punctuation">,</span> voxel_grid<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在可视化体素..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>voxel_grid<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Octree 分割'</span><span class="token punctuation">)</span>
octree <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>Octree<span class="token punctuation">(</span>max_depth<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>
octree<span class="token punctuation">.</span>create_from_voxel_grid<span class="token punctuation">(</span>voxel_grid<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Octree："</span><span class="token punctuation">,</span> octree<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在可视化Octree..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>octree<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
原始点云： PointCloud with <span class="token number">5746</span> points.
体素化
体素： VoxelGrid with <span class="token number">861</span> voxels.
正在可视化体素<span class="token punctuation">..</span>.
Octree 分割
Octree： Octree with origin: <span class="token punctuation">[</span><span class="token number">64.647</span>, -54.2659, -20.2166<span class="token punctuation">]</span>, size: <span class="token number">7</span>, max_depth: <span class="token number">4</span>
正在可视化Octree<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/cd/54/qYTg7saW_o.png" alt=""></p> 
<h4><a id="6_372"></a>6、点云滤波</h4> 
<h5><a id="61_374"></a>6.1、体素下采样</h5> 
<p>体素下采样使用规则体素栅格从输入点云创建均匀下采样点云。该算法分两步操作：将点云进行进行体素划分对所有非空体素，取体素内点云的质心作为该体素的点的位置。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"test.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在可视化原始点云"</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在体素下采样..."</span><span class="token punctuation">)</span>
voxel_size <span class="token operator">=</span> <span class="token number">0.5</span>
downpcd <span class="token operator">=</span> pcd<span class="token punctuation">.</span>voxel_down_sample<span class="token punctuation">(</span>voxel_size<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>downpcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在可视化下采样点云"</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>downpcd<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">356478</span> points.
-<span class="token operator">&gt;</span>正在可视化原始点云
-<span class="token operator">&gt;</span>正在体素下采样<span class="token punctuation">..</span>.
PointCloud with <span class="token number">11141</span> points.
-<span class="token operator">&gt;</span>正在可视化下采样点云
</code></pre> 
<p><strong>可视化展示：</strong></p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-zARwqNvn-1689834272979)(E:\harrytsz-sense-projects\harrytsz-3d\2023-07-20_09-32.png)]</p> 
<h5><a id="62_415"></a>6.2、统计滤波</h5> 
<p>statistical_outlier_removal 会移除距离相邻点更远的点。它需要两个输入参数：</p> 
<ul><li> <p>num_neighbors ，指定为了计算给定点的平均距离，需要考虑多少个邻居。即K邻域的点数</p> </li><li> <p>std_ratio ，允许根据点云平均距离的标准偏差设置阈值水平。该数值越低，滤除的点数就越多</p> </li></ul> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"desk.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原始点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>

<span class="token comment"># ------------------------- 统计滤波 --------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在进行统计滤波..."</span><span class="token punctuation">)</span>
num_neighbors <span class="token operator">=</span> <span class="token number">20</span> <span class="token comment"># K邻域点的个数</span>
std_ratio <span class="token operator">=</span> <span class="token number">2.0</span> <span class="token comment"># 标准差乘数</span>
<span class="token comment"># 执行统计滤波，返回滤波后的点云sor_pcd和对应的索引ind</span>
sor_pcd<span class="token punctuation">,</span> ind <span class="token operator">=</span> pcd<span class="token punctuation">.</span>remove_statistical_outlier<span class="token punctuation">(</span>num_neighbors<span class="token punctuation">,</span> std_ratio<span class="token punctuation">)</span>
sor_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"统计滤波后的点云："</span><span class="token punctuation">,</span> sor_pcd<span class="token punctuation">)</span>
sor_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 提取噪声点云</span>
sor_noise_pcd <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>ind<span class="token punctuation">,</span>invert <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"噪声点云："</span><span class="token punctuation">,</span> sor_noise_pcd<span class="token punctuation">)</span>
sor_noise_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># 可视化统计滤波后的点云和噪声点云</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>sor_pcd<span class="token punctuation">,</span> sor_noise_pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
原始点云： PointCloud with <span class="token number">41049</span> points.
-<span class="token operator">&gt;</span>正在进行统计滤波<span class="token punctuation">..</span>.
统计滤波后的点云： PointCloud with <span class="token number">40061</span> points.
噪声点云： PointCloud with <span class="token number">988</span> points.
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/ef/a0/mNFp2z78_o.png" alt=""></p> 
<h5><a id="63_466"></a>6.3、半径滤波</h5> 
<p>radius_outlier_removal 移除给定球体中几乎没有邻居的点。需要两个参数：</p> 
<ul><li> <p>num_points ，邻域球内的最少点数，低于该值的点为噪声点</p> </li><li> <p>radius ，邻域半径的大小</p> </li></ul> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"desk.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原始点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>

<span class="token comment"># ------------------------- 半径滤波 --------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在进行半径滤波..."</span><span class="token punctuation">)</span>
num_points <span class="token operator">=</span> <span class="token number">20</span>  <span class="token comment"># 邻域球内的最少点数，低于该值的点为噪声点</span>
radius <span class="token operator">=</span> <span class="token number">0.05</span>    <span class="token comment"># 邻域半径大小</span>
<span class="token comment"># 执行半径滤波，返回滤波后的点云sor_pcd和对应的索引ind</span>
sor_pcd<span class="token punctuation">,</span> ind <span class="token operator">=</span> pcd<span class="token punctuation">.</span>remove_radius_outlier<span class="token punctuation">(</span>num_points<span class="token punctuation">,</span> radius<span class="token punctuation">)</span>
sor_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"半径滤波后的点云："</span><span class="token punctuation">,</span> sor_pcd<span class="token punctuation">)</span>
sor_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># 提取噪声点云</span>
sor_noise_pcd <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>ind<span class="token punctuation">,</span>invert <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"噪声点云："</span><span class="token punctuation">,</span> sor_noise_pcd<span class="token punctuation">)</span>
sor_noise_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># 可视化半径滤波后的点云和噪声点云</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>sor_pcd<span class="token punctuation">,</span> sor_noise_pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
原始点云： PointCloud with <span class="token number">41049</span> points.
-<span class="token operator">&gt;</span>正在进行半径滤波<span class="token punctuation">..</span>.
半径滤波后的点云： PointCloud with <span class="token number">40146</span> points.
噪声点云： PointCloud with <span class="token number">903</span> points.
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/10/e4/7riUMNjN_o.png" alt=""></p> 
<h4><a id="7_519"></a>7、点云特征提取</h4> 
<h5><a id="71_521"></a>7.1、法线估计</h5> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在估计法线并可视化..."</span><span class="token punctuation">)</span>
radius <span class="token operator">=</span> <span class="token number">0.01</span>   <span class="token comment"># 搜索半径</span>
max_nn <span class="token operator">=</span> <span class="token number">30</span>     <span class="token comment"># 邻域内用于估算法线的最大点数</span>
pcd<span class="token punctuation">.</span>estimate_normals<span class="token punctuation">(</span>search_param<span class="token operator">=</span>o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>KDTreeSearchParamHybrid<span class="token punctuation">(</span>radius<span class="token punctuation">,</span> max_nn<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># 执行法线估计</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">,</span> point_show_normal<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在打印前10个点的法向量..."</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>pcd<span class="token punctuation">.</span>normals<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果:</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在估计法线并可视化<span class="token punctuation">..</span>.
-<span class="token operator">&gt;</span>正在打印前10个点的法向量<span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token punctuation">[</span>-0.22344398 <span class="token parameter variable">-0.96962557</span>  <span class="token number">0.09949394</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span>-0.30282456 <span class="token parameter variable">-0.91827757</span>  <span class="token number">0.25507564</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span>-0.0930339  <span class="token parameter variable">-0.77633579</span> -0.62341594<span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0.06452443</span> <span class="token parameter variable">-0.96881599</span> -0.23923249<span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0.24771039</span> <span class="token parameter variable">-0.96349484</span>  <span class="token number">0.10157387</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0.1890532</span>  <span class="token parameter variable">-0.97541781</span>  <span class="token number">0.11322096</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span>-0.26920394 <span class="token parameter variable">-0.95010988</span>  <span class="token number">0.15754506</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0.72941317</span>  <span class="token number">0.51298568</span>  <span class="token number">0.45255067</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0.83949302</span>  <span class="token number">0.5402317</span>   <span class="token number">0.05831961</span><span class="token punctuation">]</span>
 <span class="token punctuation">[</span>-0.32325253  <span class="token number">0.62920765</span>  <span class="token number">0.7068278</span> <span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/aa/32/oYSOPSAt_o.png" alt=""></p> 
<h4><a id="8_568"></a>8、点云分割</h4> 
<h4><a id="81DBSCAN__570"></a>8.1、DBSCAN 聚类分割</h4> 
<p>Open3D实现了DBSCAN[1996]，这是一种基于密度的聚类算法。该算法在 cluster_dbscan 中实现，需要两个参数：</p> 
<ul><li>eps 为同一簇内的最大点间距。</li><li>min_points 定义有效聚类的最小点数。函数返回标签 label ，其中 label = -1 表示噪声。</li></ul> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"test.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在DBSCAN聚类..."</span><span class="token punctuation">)</span>
eps <span class="token operator">=</span> <span class="token number">0.5</span>           <span class="token comment"># 同一聚类中最大点间距</span>
min_points <span class="token operator">=</span> <span class="token number">50</span>     <span class="token comment"># 有效聚类的最小点数</span>
<span class="token keyword">with</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>VerbosityContextManager<span class="token punctuation">(</span>o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>VerbosityLevel<span class="token punctuation">.</span>Debug<span class="token punctuation">)</span> <span class="token keyword">as</span> cm<span class="token punctuation">:</span>
    labels <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>pcd<span class="token punctuation">.</span>cluster_dbscan<span class="token punctuation">(</span>eps<span class="token punctuation">,</span> min_points<span class="token punctuation">,</span> print_progress<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
max_label <span class="token operator">=</span> labels<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># 获取聚类标签的最大值 [-1,0,1,2,...,max_label]，label = -1 为噪声，因此总聚类个数为 max_label + 1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"point cloud has </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>max_label <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></span><span class="token string"> clusters"</span></span><span class="token punctuation">)</span>
colors <span class="token operator">=</span> plt<span class="token punctuation">.</span>get_cmap<span class="token punctuation">(</span><span class="token string">"tab20"</span><span class="token punctuation">)</span><span class="token punctuation">(</span>labels <span class="token operator">/</span> <span class="token punctuation">(</span>max_label <span class="token keyword">if</span> max_label <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
colors<span class="token punctuation">[</span>labels <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># labels = -1 的簇为噪声，以黑色显示</span>
pcd<span class="token punctuation">.</span>colors <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3dVector<span class="token punctuation">(</span>colors<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">356478</span> points.
-<span class="token operator">&gt;</span>正在DBSCAN聚类<span class="token punctuation">..</span>.
<span class="token punctuation">[</span>Open3D DEBUG<span class="token punctuation">]</span> Precompute neighbors.
<span class="token punctuation">[</span>Open3D DEBUG<span class="token punctuation">]</span> Done Precompute neighbors.
<span class="token punctuation">[</span>Open3D DEBUG<span class="token punctuation">]</span> Compute Clusters
Precompute neighbors.<span class="token punctuation">[</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token punctuation">]</span> <span class="token number">100</span>%
<span class="token punctuation">[</span>Open3D DEBUG<span class="token punctuation">]</span> Done Compute Clusters: <span class="token number">49</span>
point cloud has <span class="token number">49</span> clusters
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/78/6b/SE8m0hsa_o.png" alt=""></p> 
<h5><a id="82RANSAC__621"></a>8.2、RANSAC 平面分割</h5> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"test.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在RANSAC平面分割..."</span><span class="token punctuation">)</span>
distance_threshold <span class="token operator">=</span> <span class="token number">0.2</span>    <span class="token comment"># 内点到平面模型的最大距离</span>
ransac_n <span class="token operator">=</span> <span class="token number">3</span>                <span class="token comment"># 用于拟合平面的采样点数</span>
num_iterations <span class="token operator">=</span> <span class="token number">1000</span>       <span class="token comment"># 最大迭代次数</span>

<span class="token comment"># 返回模型系数plane_model和内点索引inliers，并赋值</span>
plane_model<span class="token punctuation">,</span> inliers <span class="token operator">=</span> pcd<span class="token punctuation">.</span>segment_plane<span class="token punctuation">(</span>distance_threshold<span class="token punctuation">,</span> ransac_n<span class="token punctuation">,</span> num_iterations<span class="token punctuation">)</span>

<span class="token comment"># 输出平面方程</span>
<span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">]</span> <span class="token operator">=</span> plane_model
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"Plane equation: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>a<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">x + </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>b<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">y + </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>c<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string">z + </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>d<span class="token punctuation">:</span><span class="token format-spec">.2f</span><span class="token punctuation">}</span></span><span class="token string"> = 0"</span></span><span class="token punctuation">)</span>

<span class="token comment"># 平面内点点云</span>
inlier_cloud <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>inliers<span class="token punctuation">)</span>
inlier_cloud<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>inlier_cloud<span class="token punctuation">)</span>

<span class="token comment"># 平面外点点云</span>
outlier_cloud <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>inliers<span class="token punctuation">,</span> invert<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
outlier_cloud<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>outlier_cloud<span class="token punctuation">)</span>

<span class="token comment"># 可视化平面分割结果</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>inlier_cloud<span class="token punctuation">,</span> outlier_cloud<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">356478</span> points.
-<span class="token operator">&gt;</span>正在RANSAC平面分割<span class="token punctuation">..</span>.
Plane equation: <span class="token parameter variable">-0.00x</span> + <span class="token parameter variable">-0.00y</span> + <span class="token number">1</span>.00z + <span class="token parameter variable">-0.27</span> <span class="token operator">=</span> <span class="token number">0</span>
PointCloud with <span class="token number">241099</span> points.
PointCloud with <span class="token number">115379</span> points.
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/e8/08/dSYNQ5Pb_o.png" alt=""></p> 
<h5><a id="83_673"></a>8.3、隐藏点剔除</h5> 
<p>假设您希望从给定的视点渲染点云，但背景中的点会泄漏到前景中，因为它们不会被其他点遮挡。为此，我们可以应用隐藏点移除算法。在 Open3D 中，实现了[Katz2007] 的方法，该方法从给定视图近似点云的可见性，无需曲面重建或法线估计。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在剔除隐藏点..."</span><span class="token punctuation">)</span>
diameter <span class="token operator">=</span> np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span>norm<span class="token punctuation">(</span>np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>pcd<span class="token punctuation">.</span>get_max_bound<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">-</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>pcd<span class="token punctuation">.</span>get_min_bound<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"定义隐藏点去除的参数"</span><span class="token punctuation">)</span>
camera <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> diameter<span class="token punctuation">]</span>       <span class="token comment"># 视点位置</span>
radius <span class="token operator">=</span> diameter <span class="token operator">*</span> <span class="token number">100</span>         <span class="token comment"># 噪声点云半径,The radius of the sperical projection</span>
_<span class="token punctuation">,</span> pt_map <span class="token operator">=</span> pcd<span class="token punctuation">.</span>hidden_point_removal<span class="token punctuation">(</span>camera<span class="token punctuation">,</span> radius<span class="token punctuation">)</span>    <span class="token comment"># 获取视点位置能看到的所有点的索引 pt_map</span>

<span class="token comment"># 可视点点云</span>
pcd_visible <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>pt_map<span class="token punctuation">)</span>
pcd_visible<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment"># 可视点为蓝色</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;可视点个数为："</span><span class="token punctuation">,</span> pcd_visible<span class="token punctuation">)</span>
<span class="token comment"># 隐藏点点云</span>
pcd_hidden <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>pt_map<span class="token punctuation">,</span> invert <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
pcd_hidden<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>	<span class="token comment"># 隐藏点为红色</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;隐藏点个数为："</span><span class="token punctuation">,</span> pcd_hidden<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在可视化可视点和隐藏点点云..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd_visible<span class="token punctuation">,</span> pcd_hidden<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在剔除隐藏点<span class="token punctuation">..</span>.
定义隐藏点去除的参数
-<span class="token operator">&gt;</span>可视点个数为： PointCloud with <span class="token number">11490</span> points.
-<span class="token operator">&gt;</span>正在可视化可视点和隐藏点点云<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/da/46/pGySfUrt_o.png" alt=""></p> 
<p><strong>函数原型：</strong></p> 
<pre><code class="prism language-python">    <span class="token keyword">def</span> <span class="token function">hidden_point_removal</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> camera_location<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># real signature unknown; restored from __doc__</span>
        <span class="token triple-quoted-string string">"""
        hidden_point_removal(self, camera_location, radius)
        Removes hidden points from a point cloud and returns a mesh of the remaining points. Based on Katz et al. 'Direct Visibility of Point Sets', 2007. Additional information about the choice of radius for noisy point clouds can be found in Mehra et. al. 'Visibility of Noisy Point Cloud Data', 2010.
        
        Args:
            camera_location (numpy.ndarray[float64[3, 1]]): All points not visible from that location will be reomved
            radius (float): The radius of the sperical projection
        
        Returns:
            Tuple[open3d.geometry.TriangleMesh, List[int]]
        """</span>
        <span class="token keyword">pass</span>
</code></pre> 
<h4><a id="9_741"></a>9、点云曲面重建</h4> 
<p>在许多情况下，我们希望生成密集的三维几何体，即三角形网格。然而，从多视图立体方法或深度传感器中，我们只能获得非结构化点云。要从非结构化输入中获得三角形网格，我们需要执行曲面重建。文献中有几种方法，Open3D目前实现了以下功能：</p> 
<ul><li>Alpha shapes [Edelsbrunner1983]</li><li>Ball pivoting [Bernardini1999]</li><li>Poisson surface reconstruction [Kazhdan2006]</li></ul> 
<h5><a id="91Alpha_shapes_749"></a>9.1、Alpha shapes</h5> 
<p>Alpha shapes 是凸壳的推广。正如这里所描述的，我们可以直观地认为 Alpha shapes 如下：想象一个巨大的冰淇淋，其中包含点 S 作为硬巧克力块。使用其中一个球形冰淇淋勺，我们可以在不撞到巧克力块的情况下雕刻出冰淇淋块的所有部分，从而甚至在内部雕刻出孔（例如，仅从外部移动勺子无法触及的部分）。我们最终将得到一个（不一定是凸的）对象，该对象以帽、弧和点为边界。如果我们现在把所有的面拉直成三角形和线段，我们就可以直观地描述 S 的 Alpha shapes 。</p> 
<p>Open3D实现了 create_from_point_cloud_alpha_shape 方法</p> 
<p><strong>代码:</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># --------------------------- 加载点云 ---------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原始点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>

<span class="token comment"># ------------------------- Alpha shapes -----------------------</span>
alpha <span class="token operator">=</span> <span class="token number">0.03</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"alpha=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>alpha<span class="token punctuation">:</span><span class="token format-spec">.3f</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">.</span>create_from_point_cloud_alpha_shape<span class="token punctuation">(</span>pcd<span class="token punctuation">,</span> alpha<span class="token punctuation">)</span>
mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>mesh<span class="token punctuation">]</span><span class="token punctuation">,</span> mesh_show_back_face<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/e3/27/dCgnxBop_o.png" alt=""></p> 
<h5><a id="92Ball_pivoting_780"></a>9.2、Ball pivoting</h5> 
<p>Ball pivoting （BPA）[Bernardini1999]是一种与 Alpha shapes 相关的曲面重建方法。直观地说，想象一个具有给定半径的</p> 
<p>3D球，我们将其落在点云上。如果它击中任何3个点（并且没有穿过这3个点），它将创建一个三角形。然后，该算法从现有</p> 
<p>三角形的边开始旋转，每当它击中球未落下的3个点时，我们创建另一个三角形。</p> 
<p>open3D 对应的函数为 create_from_point_cloud_ball_pivoting</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># ---------------------- 定义点云体素化函数 ----------------------</span>
<span class="token keyword">def</span> <span class="token function">get_mesh</span><span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_triangle_mesh<span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh
<span class="token comment"># =============================================================</span>

<span class="token comment"># ------------------------- Ball pivoting --------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;Ball pivoting..."</span><span class="token punctuation">)</span>
_relative_path <span class="token operator">=</span> <span class="token string">"bunny.ply"</span>    <span class="token comment"># 设置相对路径</span>
N <span class="token operator">=</span> <span class="token number">2000</span>                        <span class="token comment"># 将点划分为N个体素</span>
pcd <span class="token operator">=</span> get_mesh<span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span><span class="token punctuation">.</span>sample_points_poisson_disk<span class="token punctuation">(</span>N<span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>

radii <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.005</span><span class="token punctuation">,</span> <span class="token number">0.01</span><span class="token punctuation">,</span> <span class="token number">0.02</span><span class="token punctuation">,</span> <span class="token number">0.04</span><span class="token punctuation">]</span>
rec_mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">.</span>create_from_point_cloud_ball_pivoting<span class="token punctuation">(</span>pcd<span class="token punctuation">,</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>DoubleVector<span class="token punctuation">(</span>radii<span class="token punctuation">)</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> rec_mesh<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/6e/7d/Decgxu8e_o.png" alt=""></p> 
<h5><a id="93Poisson_surface_reconstruction_822"></a>9.3、Poisson surface reconstruction</h5> 
<p>泊松曲面重建方法[Kazhdan2006]解决了一个正则化优化问题，以获得光滑曲面。因此，泊松曲面重建比上述方法更可取，因为它们会产生非平滑结果，因为点云的点也是生成的三角形网格的顶点，无需任何修改。</p> 
<p>Open3D对应的方法为 create_from_point_cloud_poisson ，这基本上是Kazhdan代码的包装。该函数的一个重要参数是depth ，它定义了用于曲面重建的八叉树的深度，因此表示生成的三角形网格的分辨率。 depth 值越高，网格的细节就越多。</p> 
<p><strong>9.3.1 直接读取点云的方法</strong></p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># --------------------------- 加载点云 ---------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原始点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>

<span class="token comment"># ------------------------- Ball pivoting --------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'run Poisson surface reconstruction'</span><span class="token punctuation">)</span>
radius <span class="token operator">=</span> <span class="token number">0.001</span>   <span class="token comment"># 搜索半径</span>
max_nn <span class="token operator">=</span> <span class="token number">30</span>         <span class="token comment"># 邻域内用于估算法线的最大点数</span>
pcd<span class="token punctuation">.</span>estimate_normals<span class="token punctuation">(</span>search_param<span class="token operator">=</span>o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>KDTreeSearchParamHybrid<span class="token punctuation">(</span>radius<span class="token punctuation">,</span> max_nn<span class="token punctuation">)</span><span class="token punctuation">)</span>     <span class="token comment"># 执行法线估计</span>

<span class="token keyword">with</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>VerbosityContextManager<span class="token punctuation">(</span>o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>VerbosityLevel<span class="token punctuation">.</span>Debug<span class="token punctuation">)</span> <span class="token keyword">as</span> cm<span class="token punctuation">:</span>
    mesh<span class="token punctuation">,</span> densities <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">.</span>create_from_point_cloud_poisson<span class="token punctuation">(</span>pcd<span class="token punctuation">,</span> depth<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>mesh<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/c5/58/W7lKlSAG_o.png" alt=""></p> 
<p><strong>9.3.2 mesh方法</strong></p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># -------------------------- 定义点云体素化函数 ---------------------------</span>
<span class="token keyword">def</span> <span class="token function">get_mesh</span><span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_triangle_mesh<span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh
<span class="token comment"># =====================================================================</span>

<span class="token comment"># -------------------- Poisson surface reconstruction ------------------</span>
<span class="token comment"># 加载点云</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;Poisson surface reconstruction..."</span><span class="token punctuation">)</span>
_relative_path <span class="token operator">=</span> <span class="token string">"bunny.ply"</span>    <span class="token comment"># 设置相对路径</span>
N <span class="token operator">=</span> <span class="token number">5000</span>                        <span class="token comment"># 将点划分为N个体素</span>
pcd <span class="token operator">=</span> get_mesh<span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span><span class="token punctuation">.</span>sample_points_poisson_disk<span class="token punctuation">(</span>N<span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>normals <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3dVector<span class="token punctuation">(</span>np<span class="token punctuation">.</span>zeros<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 使现有法线无效</span>

<span class="token comment"># 法线估计</span>
pcd<span class="token punctuation">.</span>estimate_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">,</span> point_show_normal<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>orient_normals_consistent_tangent_plane<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">,</span> point_show_normal<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># 泊松重建</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'run Poisson surface reconstruction'</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>VerbosityContextManager<span class="token punctuation">(</span>
        o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>VerbosityLevel<span class="token punctuation">.</span>Debug<span class="token punctuation">)</span> <span class="token keyword">as</span> cm<span class="token punctuation">:</span>
    mesh<span class="token punctuation">,</span> densities <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">.</span>create_from_point_cloud_poisson<span class="token punctuation">(</span>
        pcd<span class="token punctuation">,</span> depth<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>mesh<span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>mesh<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># =====================================================================</span>
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/73/8d/JuIERZsD_o.png" alt=""></p> 
<h4><a id="10_903"></a>10、点云空间变换</h4> 
<p>Open3D的几何体类型有多种转换方法。下面将介绍如何使用 taranslate 平移、 rotate 旋转、 scale 缩放和 transform 变换（旋转+平移）。</p> 
<h5><a id="101Translate__909"></a>10.1、Translate 平移</h5> 
<p>我们要研究的第一种转换方法是 translate 。该函数接受两个输入参数：</p> 
<ul><li> <p>第一个输入参数为一个三维行向量 (tx,ty,tz)</p> </li><li> <p>第二个参数为布尔值，默认 relative = True ，实现点云平移。若设置为 relative = False ，则将点云质心平移到第一个参数指定的位置</p> </li></ul> 
<pre><code class="prism language-bash">pcd.translate<span class="token punctuation">((</span>tx,ty,tz<span class="token punctuation">)</span>,relative<span class="token operator">=</span>True<span class="token punctuation">)</span>
</code></pre> 
<h6><a id="1011_923"></a>10.1.1、指定平移行向量，实现点云平移</h6> 
<p>只输入第一个参数，或者将第二个参数设置为 relative = True 或 True ， relative 可以省略</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> copy  <span class="token comment"># 点云深拷贝</span>
<span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d

<span class="token comment"># -------------------------- 加载点云 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'pcd质心：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 点云平移 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;沿X轴平移0.2m"</span><span class="token punctuation">)</span>
pcd_tx <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span><span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pcd_tx<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd_tx<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'pcd_tx质心：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>pcd_tx<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;沿Y轴平移0.2m"</span><span class="token punctuation">)</span>
pcd_ty <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd_tx<span class="token punctuation">)</span><span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pcd_ty<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd_ty<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'pcd_ty质心：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>pcd_ty<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;沿X轴平移-0.2m，再沿Y轴平移0.2m"</span><span class="token punctuation">)</span>
pcd_txy <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span><span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pcd_txy<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd_txy<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'pcd_txy质心：'</span><span class="token punctuation">,</span> pcd_txy<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 可视化 --------------------------</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> pcd_tx<span class="token punctuation">,</span> pcd_ty<span class="token punctuation">,</span> pcd_txy<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
pcd质心：<span class="token punctuation">[</span>-0.02675991  <span class="token number">0.09521606</span>  <span class="token number">0.00894711</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>沿X轴平移0.2m
PointCloud with <span class="token number">35947</span> points.
pcd_tx质心：<span class="token punctuation">[</span><span class="token number">0.17324009</span> <span class="token number">0.09521606</span> <span class="token number">0.00894711</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>沿Y轴平移0.2m
PointCloud with <span class="token number">35947</span> points.
pcd_ty质心：<span class="token punctuation">[</span><span class="token number">0.17324009</span> <span class="token number">0.29521606</span> <span class="token number">0.00894711</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>沿X轴平移-0.2m，再沿Y轴平移0.2m
PointCloud with <span class="token number">35947</span> points.
pcd_txy质心： <span class="token punctuation">[</span>-0.22675991  <span class="token number">0.29521606</span>  <span class="token number">0.00894711</span><span class="token punctuation">]</span>
</code></pre> 
<p><strong>结果展示:</strong></p> 
<p><img src="https://images2.imgbox.com/8a/e0/042wo2ef_o.png" alt=""></p> 
<h6><a id="1012__989"></a>10.1.2 将点云质心平移到指定位置</h6> 
<p>将第二个参数 relative 设置为 False 即可。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> copy  <span class="token comment"># 点云深拷贝</span>
<span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d

<span class="token comment"># -------------------------- 加载点云 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'pcd质心：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 点云平移 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;沿X轴平移0.2m"</span><span class="token punctuation">)</span>
pcd_tx <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span><span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pcd_tx<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd_tx<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'pcd_tx质心：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>pcd_tx<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;将点云质心平移到指定位置"</span><span class="token punctuation">)</span>
pcd_new <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd_tx<span class="token punctuation">)</span><span class="token punctuation">.</span>translate<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>relative<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
<span class="token comment">#pcd_new = copy.deepcopy(pcd_tx).translate((0.2, 0.2, 0.2),False)  # relative 可以省略</span>
pcd_new<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd_new<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'pcd_new：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>pcd_new<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 可视化 --------------------------</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> pcd_tx<span class="token punctuation">,</span> pcd_new<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
pcd质心：<span class="token punctuation">[</span>-0.02675991 <span class="token number">0.09521606</span> <span class="token number">0.00894711</span><span class="token punctuation">]</span>
-<span class="token operator">&gt;</span>沿X轴平移0.2m
PointCloud with <span class="token number">35947</span> points.
pcd_tx质心：<span class="token punctuation">[</span><span class="token number">0.17324009</span> <span class="token number">0.29521606</span> <span class="token number">0.20894711</span><span class="token punctuation">]</span>
-<span class="token operator">&gt;</span>将点云质心平移到指定位置
PointCloud with <span class="token number">35947</span> points.
pcd_new：<span class="token punctuation">[</span><span class="token number">0.2</span> <span class="token number">0.2</span> <span class="token number">0.2</span><span class="token punctuation">]</span>
</code></pre> 
<p><strong>结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/07/71/UGB9avY1_o.png" alt=""></p> 
<h5><a id="102_Rotation__1046"></a>10.2 Rotation 旋转</h5> 
<p>Open3D 使用 rotate 进行旋转，接受两个输入参数：</p> 
<ul><li>第一个参数是旋转矩阵 R 。由于3D中的旋转可以通过多种方式进行参数化，Open3D提供了方便的功能，可以将不同的参数化转换为旋转矩阵： 
  <ul><li>使用 get_rotation_matrix_from_xyz 从欧拉角 Euler angles 中转换（其中， xyz 也可以是 yzx , zxy , xzy , zyx , 和yxz 的形式）</li><li>使用 get_rotation_matrix_from_axis_angle 从轴角表示法 Axis-angle representation 中转换</li><li>使用 get_rotation_matrix_from_quaternion 从四参数 Quaternions 中转换</li></ul> </li><li>第二个参数 center ，若不设置，则围绕点云质心旋转，<strong>旋转前后点云质心位置不变</strong>。</li></ul> 
<pre><code class="prism language-bash">pcd.rotate<span class="token punctuation">(</span>R<span class="token punctuation">)</span>					<span class="token comment"># 不指定旋转中心</span>
</code></pre> 
<p>若指定 center ，则整个点云围绕指定的坐标中心 (x,y,z) 旋转。<strong>旋转前后点云质心位置发生改变</strong>。</p> 
<pre><code class="prism language-bash">pcd.rotate<span class="token punctuation">(</span>R,center<span class="token operator">=</span><span class="token punctuation">(</span>x,y,z<span class="token punctuation">))</span>	<span class="token comment"># 指定旋转中心</span>
</code></pre> 
<h6><a id="1021__1068"></a>10.2.1 使用欧拉角旋转</h6> 
<h6><a id="10211__1070"></a>10.2.1.1 未指定旋转中心</h6> 
<p>未指定旋转中心，默认以点云质心为旋转中心，旋转前后点云执行不变。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> copy  <span class="token comment"># 点云深拷贝</span>
<span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># -------------------------- 加载点云 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;pcd质心："</span><span class="token punctuation">,</span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 点云旋转 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;采用欧拉角进行点云旋转"</span><span class="token punctuation">)</span>
pcd_EulerAngle <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
R1 <span class="token operator">=</span> pcd<span class="token punctuation">.</span>get_rotation_matrix_from_xyz<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>pi<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"旋转矩阵：\n"</span><span class="token punctuation">,</span>R1<span class="token punctuation">)</span>
pcd_EulerAngle<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>R1<span class="token punctuation">)</span>    <span class="token comment"># 不指定旋转中心</span>
pcd_EulerAngle<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;pcd_EulerAngle质心："</span><span class="token punctuation">,</span>pcd_EulerAngle<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 可视化 --------------------------</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> pcd_EulerAngle<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>pcd质心： <span class="token punctuation">[</span>-0.02675991  <span class="token number">0.09521606</span>  <span class="token number">0.00894711</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>采用欧拉角进行点云旋转
旋转矩阵：
 <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">6</span>.123234e-17  <span class="token number">0</span>.000000e+00  <span class="token number">1</span>.000000e+00<span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0</span>.000000e+00  <span class="token number">1</span>.000000e+00  <span class="token number">0</span>.000000e+00<span class="token punctuation">]</span>
 <span class="token punctuation">[</span>-1.000000e+00  <span class="token number">0</span>.000000e+00  <span class="token number">6</span>.123234e-17<span class="token punctuation">]</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>pcd_EulerAngle质心： <span class="token punctuation">[</span>-0.02675991  <span class="token number">0.09521606</span>  <span class="token number">0.00894711</span><span class="token punctuation">]</span>
</code></pre> 
<p><strong>结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/ce/52/drx7E7Cy_o.png" alt=""></p> 
<h6><a id="10212__1124"></a>10.2.1.2 指定旋转中心</h6> 
<p>指定旋转中心，旋转前后点云质心改变。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> copy  <span class="token comment"># 点云深拷贝</span>
<span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># -------------------------- 加载点云 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;pcd质心："</span><span class="token punctuation">,</span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 点云旋转 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;采用欧拉角进行点云旋转"</span><span class="token punctuation">)</span>
pcd_EulerAngle <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
R1 <span class="token operator">=</span> pcd<span class="token punctuation">.</span>get_rotation_matrix_from_xyz<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>pi<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"旋转矩阵：\n"</span><span class="token punctuation">,</span>R1<span class="token punctuation">)</span>
pcd_EulerAngle<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>R1<span class="token punctuation">,</span>center <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">,</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 指定旋转中心</span>
pcd_EulerAngle<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;pcd_EulerAngle质心："</span><span class="token punctuation">,</span>pcd_EulerAngle<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 可视化 --------------------------</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> pcd_EulerAngle<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>pcd质心： <span class="token punctuation">[</span>-0.02675991  <span class="token number">0.09521606</span>  <span class="token number">0.00894711</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>采用欧拉角进行点云旋转
旋转矩阵：
 <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">6</span>.123234e-17  <span class="token number">0</span>.000000e+00  <span class="token number">1</span>.000000e+00<span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0</span>.000000e+00  <span class="token number">1</span>.000000e+00  <span class="token number">0</span>.000000e+00<span class="token punctuation">]</span>
 <span class="token punctuation">[</span>-1.000000e+00  <span class="token number">0</span>.000000e+00  <span class="token number">6</span>.123234e-17<span class="token punctuation">]</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>pcd_EulerAngle质心： <span class="token punctuation">[</span><span class="token number">0.00894711</span> <span class="token number">0.09521606</span> <span class="token number">0.22675991</span><span class="token punctuation">]</span>
</code></pre> 
<p><strong>结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/be/ca/G7l9vmwj_o.png" alt=""></p> 
<h6><a id="1022__1178"></a>10.2.2 使用轴向角旋转</h6> 
<h6><a id="1023__1180"></a>10.2.3 使用四元数旋转</h6> 
<h5><a id="103_Scale__1182"></a>10.3 Scale 缩放</h5> 
<p>使用 rotate 函数实现点云缩放，接受两个输入参数：</p> 
<ul><li> <p>缩放倍数</p> </li><li> <p>缩放后点云质心 center ，不可省略。</p> </li></ul> 
<pre><code class="prism language-bash">pcd_scale.rotate<span class="token punctuation">(</span><span class="token number">2</span>,center<span class="token operator">=</span>pcd.get_center<span class="token punctuation">(</span><span class="token punctuation">))</span>	<span class="token comment"># 缩放前后质心一致</span>

pcd_scale.rotate<span class="token punctuation">(</span><span class="token number">2</span>,center<span class="token operator">=</span><span class="token punctuation">(</span>x,y,z<span class="token punctuation">))</span>			<span class="token comment"># 缩放后质心为(x,y,z)</span>
</code></pre> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> copy  <span class="token comment"># 点云深拷贝</span>
<span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># -------------------------- 加载点云 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"circle.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;pcd质心："</span><span class="token punctuation">,</span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 点云缩放 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;点云缩放"</span><span class="token punctuation">)</span>
pcd_scale1 <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
pcd_scale1<span class="token punctuation">.</span>scale<span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span>center<span class="token operator">=</span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pcd_scale1<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;pcd_scale1质心："</span><span class="token punctuation">,</span>pcd_scale1<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 缩放前后质心不变</span>

pcd_scale2 <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
pcd_scale2<span class="token punctuation">.</span>scale<span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span>center<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment"># 自定义缩放后的质心</span>
pcd_scale2<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;pcd_scale2质心："</span><span class="token punctuation">,</span>pcd_scale2<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 可视化 --------------------------</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> pcd_scale1<span class="token punctuation">,</span>pcd_scale2<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">63</span> points.
-<span class="token operator">&gt;</span>pcd质心： <span class="token punctuation">[</span><span class="token number">1.01066824</span> <span class="token number">1.99955513</span> <span class="token number">0</span>.        <span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>点云缩放
-<span class="token operator">&gt;</span>pcd_scale1质心： <span class="token punctuation">[</span><span class="token number">1.01066824</span> <span class="token number">1.99955513</span> <span class="token number">0</span>.        <span class="token punctuation">]</span>
-<span class="token operator">&gt;</span>pcd_scale2质心： <span class="token punctuation">[</span><span class="token number">1.00533412</span> <span class="token number">1.49977756</span> <span class="token number">0.5</span>       <span class="token punctuation">]</span>
</code></pre> 
<p><strong>结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/7c/e9/T3PD2x8F_o.png" alt=""></p> 
<h5><a id="104_General_transformation__1245"></a>10.4 General transformation 一般变换（平移+旋转）</h5> 
<p>使用 transform 实现点云的一般变换，接受1个输入参数，为4×4变换矩阵，前3行3列为旋转矩阵，第4列前3行为平移向量。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> copy  <span class="token comment"># 点云深拷贝</span>
<span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># -------------------------- 加载点云 ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"circle.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;pcd质心："</span><span class="token punctuation">,</span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- transform ------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;点云的一般变换"</span><span class="token punctuation">)</span>
pcd_T <span class="token operator">=</span> copy<span class="token punctuation">.</span>deepcopy<span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
T <span class="token operator">=</span> np<span class="token punctuation">.</span>eye<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
T<span class="token punctuation">[</span> <span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> pcd<span class="token punctuation">.</span>get_rotation_matrix_from_xyz<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>pi<span class="token operator">/</span><span class="token number">6</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>pi<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment"># 旋转矩阵</span>
T<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">5.0</span>	<span class="token comment"># 平移向量的dx</span>
T<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3.0</span>	<span class="token comment"># 平移向量的dy</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;变换矩阵：\n"</span><span class="token punctuation">,</span>T<span class="token punctuation">)</span>
pcd_T<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>T<span class="token punctuation">)</span>
pcd_T<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"\n-&gt;pcd_scale1质心："</span><span class="token punctuation">,</span>pcd_T<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>

<span class="token comment"># -------------------------- 可视化 --------------------------</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> pcd_T<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">63</span> points.
-<span class="token operator">&gt;</span>pcd质心： <span class="token punctuation">[</span><span class="token number">1.01066824</span> <span class="token number">1.99955513</span> <span class="token number">0</span>.        <span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>点云的一般变换

-<span class="token operator">&gt;</span>变换矩阵：
 <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token number">0.70710678</span>  <span class="token number">0</span>.          <span class="token number">0.70710678</span>  <span class="token number">5</span>.        <span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0.35355339</span>  <span class="token number">0.8660254</span>  <span class="token parameter variable">-0.35355339</span>  <span class="token number">3</span>.        <span class="token punctuation">]</span>
 <span class="token punctuation">[</span>-0.61237244  <span class="token number">0.5</span>         <span class="token number">0.61237244</span>  <span class="token number">0</span>.        <span class="token punctuation">]</span>
 <span class="token punctuation">[</span> <span class="token number">0</span>.          <span class="token number">0</span>.          <span class="token number">0</span>.          <span class="token number">1</span>.        <span class="token punctuation">]</span><span class="token punctuation">]</span>

-<span class="token operator">&gt;</span>pcd_scale1质心： <span class="token punctuation">[</span><span class="token number">5.71465037</span> <span class="token number">5.08899072</span> <span class="token number">0.38087219</span><span class="token punctuation">]</span>
</code></pre> 
<p><strong>结果展示：</strong></p> 
<p><img src="https://images2.imgbox.com/21/c7/0iuRw2LQ_o.png" alt=""></p> 
<h4><a id="11_1304"></a>11、点云配准</h4> 
<h4><a id="12_1308"></a>12、其他常用算法</h4> 
<h5><a id="121_1310"></a>12.1、计算点云间的距离</h5> 
<p><strong>函数介绍：</strong></p> 
<p>Open3D提供了 compute_point_cloud_distance 方法来计算从源点云到目标点云的距离。它为源点云中的每个点计算到目标点云中最近点的距离。</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云1... "</span><span class="token punctuation">)</span>
pcd1 <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd1<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云2..."</span><span class="token punctuation">)</span>
pcd2 <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"test.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd2<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在点云1每一点到点云2的最近距离..."</span><span class="token punctuation">)</span>
dists <span class="token operator">=</span> pcd1<span class="token punctuation">.</span>compute_point_cloud_distance<span class="token punctuation">(</span>pcd2<span class="token punctuation">)</span>
dists <span class="token operator">=</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>dists<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在打印前10个点..."</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>dists<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在提取距离大于3.56的点"</span><span class="token punctuation">)</span>
ind <span class="token operator">=</span> np<span class="token punctuation">.</span>where<span class="token punctuation">(</span>dists <span class="token operator">&gt;</span> <span class="token number">3.56</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
pcd3 <span class="token operator">=</span> pcd1<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>ind<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd3<span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd3<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云1<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在加载点云2<span class="token punctuation">..</span>.
PointCloud with <span class="token number">356478</span> points.
-<span class="token operator">&gt;</span>正在点云1每一点到点云2的最近距离<span class="token punctuation">..</span>.
-<span class="token operator">&gt;</span>正在打印前10个点<span class="token punctuation">..</span>.
<span class="token punctuation">[</span><span class="token number">3.56774778</span> <span class="token number">3.57472048</span> <span class="token number">3.58922401</span> <span class="token number">3.53018802</span> <span class="token number">3.55273519</span> <span class="token number">3.55542831</span>
 <span class="token number">3.56749706</span> <span class="token number">3.49795738</span> <span class="token number">3.49527627</span> <span class="token number">3.55416983</span><span class="token punctuation">]</span>
-<span class="token operator">&gt;</span>正在提取距离大于3.56的点
PointCloud with <span class="token number">19935</span> points.
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/5e/98/8nCNCZXP_o.png" alt=""></p> 
<h5><a id="122_1361"></a>12.2、计算点云最小包围盒</h5> 
<p><strong>函数介绍：</strong></p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在计算点云轴向最小包围盒..."</span><span class="token punctuation">)</span>
aabb <span class="token operator">=</span> pcd<span class="token punctuation">.</span>get_axis_aligned_bounding_box<span class="token punctuation">(</span><span class="token punctuation">)</span>
aabb<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在计算点云最小包围盒..."</span><span class="token punctuation">)</span>
obb <span class="token operator">=</span> pcd<span class="token punctuation">.</span>get_oriented_bounding_box<span class="token punctuation">(</span><span class="token punctuation">)</span>
obb<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> aabb<span class="token punctuation">,</span> obb<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在计算点云轴向最小包围盒<span class="token punctuation">..</span>.
-<span class="token operator">&gt;</span>正在计算点云最小包围盒<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/69/2a/qnVhSfqC_o.png" alt=""></p> 
<h5><a id="123_1397"></a>12.3、计算点云凸包</h5> 
<p>点云的凸包是包含所有点的最小凸集。Open3D 包含计算点云凸包的 compute_convex_hull 方法。该实现基于Qhull。</p> 
<p><strong>代码:</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在计算点云凸包..."</span><span class="token punctuation">)</span>
hull<span class="token punctuation">,</span> _ <span class="token operator">=</span> pcd<span class="token punctuation">.</span>compute_convex_hull<span class="token punctuation">(</span><span class="token punctuation">)</span>
hull_ls <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>LineSet<span class="token punctuation">.</span>create_from_triangle_mesh<span class="token punctuation">(</span>hull<span class="token punctuation">)</span>
hull_ls<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">,</span> hull_ls<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在计算点云凸包<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>可视化结果：</strong></p> 
<p><img src="https://images2.imgbox.com/20/d0/NcQszGzv_o.png" alt=""></p> 
<h5><a id="124_1430"></a>12.4、点云体素化</h5> 
<h6><a id="1241_1432"></a>12.4.1、一种简单的方法</h6> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># --------------------------- 加载点云 ---------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.ply"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"原始点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>

<span class="token comment"># --------------------------- 体素化点云 -------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'执行体素化点云'</span><span class="token punctuation">)</span>
voxel_grid <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>VoxelGrid<span class="token punctuation">.</span>create_from_point_cloud<span class="token punctuation">(</span>pcd<span class="token punctuation">,</span> voxel_size<span class="token operator">=</span><span class="token number">0.005</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在可视化体素..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>voxel_grid<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ==============================================================</span>
</code></pre> 
<p><strong>输出结果:</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
原始点云： PointCloud with <span class="token number">35947</span> points.
执行体素化点云
正在可视化体素<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/15/e8/Ys52XOte_o.png" alt=""></p> 
<h6><a id="1212_1467"></a>12.1.2、复杂方法</h6> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># ---------------------- 定义点云体素化函数 ----------------------</span>
<span class="token keyword">def</span> <span class="token function">get_mesh</span><span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_triangle_mesh<span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh
<span class="token comment"># =============================================================</span>

<span class="token comment"># ------------------------- 点云体素化 --------------------------</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在进行点云体素化..."</span><span class="token punctuation">)</span>
_relative_path <span class="token operator">=</span> <span class="token string">"bunny.ply"</span>    <span class="token comment"># 设置相对路径</span>
N <span class="token operator">=</span> <span class="token number">2000</span>        <span class="token comment"># 将点划分为N个体素</span>
pcd <span class="token operator">=</span> get_mesh<span class="token punctuation">(</span>_relative_path<span class="token punctuation">)</span><span class="token punctuation">.</span>sample_points_poisson_disk<span class="token punctuation">(</span>N<span class="token punctuation">)</span>

<span class="token comment"># fit to unit cube</span>
pcd<span class="token punctuation">.</span>scale<span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>pcd<span class="token punctuation">.</span>get_max_bound<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> pcd<span class="token punctuation">.</span>get_min_bound<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          center<span class="token operator">=</span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>colors <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3dVector<span class="token punctuation">(</span>np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>uniform<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"体素下采样点云："</span><span class="token punctuation">,</span> pcd<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在可视化体素下采样点云..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'执行体素化点云'</span><span class="token punctuation">)</span>
voxel_grid <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>VoxelGrid<span class="token punctuation">.</span>create_from_point_cloud<span class="token punctuation">(</span>pcd<span class="token punctuation">,</span> voxel_size<span class="token operator">=</span><span class="token number">0.05</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在可视化体素..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>voxel_grid<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment"># ===========================================================</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在进行点云体素化<span class="token punctuation">..</span>.
体素下采样点云： PointCloud with <span class="token number">2000</span> points.
正在可视化体素下采样点云<span class="token punctuation">..</span>.
执行体素化点云
正在可视化体素<span class="token punctuation">..</span>.
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/a4/23/2Vawxy6g_o.png" alt=""></p> 
<p><strong>get_mesh</strong> <strong>函数参考代码</strong>：</p> 
<p>open3d_tutorial.py</p> 
<pre><code class="prism language-python"><span class="token comment"># Helpers and monkey patches for ipynb tutorials</span>
<span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> PIL<span class="token punctuation">.</span>Image
<span class="token keyword">import</span> IPython<span class="token punctuation">.</span>display
<span class="token keyword">import</span> os
<span class="token keyword">import</span> urllib
<span class="token keyword">import</span> tarfile
<span class="token keyword">import</span> gzip
<span class="token keyword">import</span> zipfile
<span class="token keyword">import</span> shutil

interactive <span class="token operator">=</span> <span class="token boolean">True</span>

<span class="token keyword">def</span> <span class="token function">jupyter_draw_geometries</span><span class="token punctuation">(</span>
        geoms<span class="token punctuation">,</span>
        window_name<span class="token operator">=</span><span class="token string">"Open3D"</span><span class="token punctuation">,</span>
        width<span class="token operator">=</span><span class="token number">1920</span><span class="token punctuation">,</span>
        height<span class="token operator">=</span><span class="token number">1080</span><span class="token punctuation">,</span>
        left<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>
        top<span class="token operator">=</span><span class="token number">50</span><span class="token punctuation">,</span>
        point_show_normal<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
        mesh_show_wireframe<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
        mesh_show_back_face<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
        lookat<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
        up<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
        front<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
        zoom<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    vis <span class="token operator">=</span> o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>Visualizer<span class="token punctuation">(</span><span class="token punctuation">)</span>
    vis<span class="token punctuation">.</span>create_window<span class="token punctuation">(</span>
        window_name<span class="token operator">=</span>window_name<span class="token punctuation">,</span>
        width<span class="token operator">=</span>width<span class="token punctuation">,</span>
        height<span class="token operator">=</span>height<span class="token punctuation">,</span>
        left<span class="token operator">=</span>left<span class="token punctuation">,</span>
        top<span class="token operator">=</span>top<span class="token punctuation">,</span>
        visible<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>  <span class="token comment"># If false, capture_screen_float_buffer() won't work.</span>
    <span class="token punctuation">)</span>
    vis<span class="token punctuation">.</span>get_render_option<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>point_show_normal <span class="token operator">=</span> point_show_normal
    vis<span class="token punctuation">.</span>get_render_option<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mesh_show_wireframe <span class="token operator">=</span> mesh_show_wireframe
    vis<span class="token punctuation">.</span>get_render_option<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mesh_show_back_face <span class="token operator">=</span> mesh_show_back_face
    <span class="token keyword">for</span> geom <span class="token keyword">in</span> geoms<span class="token punctuation">:</span>
        vis<span class="token punctuation">.</span>add_geometry<span class="token punctuation">(</span>geom<span class="token punctuation">)</span>
    <span class="token keyword">if</span> lookat <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        vis<span class="token punctuation">.</span>get_view_control<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_lookat<span class="token punctuation">(</span>lookat<span class="token punctuation">)</span>
    <span class="token keyword">if</span> up <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        vis<span class="token punctuation">.</span>get_view_control<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_up<span class="token punctuation">(</span>up<span class="token punctuation">)</span>
    <span class="token keyword">if</span> front <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        vis<span class="token punctuation">.</span>get_view_control<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_front<span class="token punctuation">(</span>front<span class="token punctuation">)</span>
    <span class="token keyword">if</span> zoom <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        vis<span class="token punctuation">.</span>get_view_control<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>set_zoom<span class="token punctuation">(</span>zoom<span class="token punctuation">)</span>
    <span class="token keyword">if</span> interactive<span class="token punctuation">:</span>
        vis<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> geom <span class="token keyword">in</span> geoms<span class="token punctuation">:</span>
            vis<span class="token punctuation">.</span>update_geometry<span class="token punctuation">(</span>geom<span class="token punctuation">)</span>
        vis<span class="token punctuation">.</span>poll_events<span class="token punctuation">(</span><span class="token punctuation">)</span>
        vis<span class="token punctuation">.</span>update_renderer<span class="token punctuation">(</span><span class="token punctuation">)</span>
    im <span class="token operator">=</span> vis<span class="token punctuation">.</span>capture_screen_float_buffer<span class="token punctuation">(</span><span class="token punctuation">)</span>
    vis<span class="token punctuation">.</span>destroy_window<span class="token punctuation">(</span><span class="token punctuation">)</span>
    im <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">255</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>im<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>astype<span class="token punctuation">(</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>
    IPython<span class="token punctuation">.</span>display<span class="token punctuation">.</span>display<span class="token punctuation">(</span>PIL<span class="token punctuation">.</span>Image<span class="token punctuation">.</span>fromarray<span class="token punctuation">(</span>im<span class="token punctuation">,</span> <span class="token string">"RGB"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries <span class="token operator">=</span> jupyter_draw_geometries


<span class="token keyword">def</span> <span class="token function">edges_to_lineset</span><span class="token punctuation">(</span>mesh<span class="token punctuation">,</span> edges<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">:</span>
    ls <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>LineSet<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ls<span class="token punctuation">.</span>points <span class="token operator">=</span> mesh<span class="token punctuation">.</span>vertices
    ls<span class="token punctuation">.</span>lines <span class="token operator">=</span> edges
    colors <span class="token operator">=</span> np<span class="token punctuation">.</span>empty<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>edges<span class="token punctuation">)</span><span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    colors<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> color
    ls<span class="token punctuation">.</span>colors <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3dVector<span class="token punctuation">(</span>colors<span class="token punctuation">)</span>
    <span class="token keyword">return</span> ls


<span class="token keyword">def</span> <span class="token function">_relative_path</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    script_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>realpath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span>
    script_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>script_path<span class="token punctuation">)</span>
    <span class="token keyword">return</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>script_dir<span class="token punctuation">,</span> path<span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">download_fountain_dataset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    fountain_path <span class="token operator">=</span> _relative_path<span class="token punctuation">(</span><span class="token string">"../TestData/fountain_small"</span><span class="token punctuation">)</span>
    fountain_zip_path <span class="token operator">=</span> _relative_path<span class="token punctuation">(</span><span class="token string">"../TestData/fountain.zip"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>fountain_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"downloading fountain dataset"</span><span class="token punctuation">)</span>
        url <span class="token operator">=</span> <span class="token string">"https://storage.googleapis.com/isl-datasets/open3d-dev/fountain.zip"</span>
        urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token punctuation">,</span> fountain_zip_path<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"extract fountain dataset"</span><span class="token punctuation">)</span>
        <span class="token keyword">with</span> zipfile<span class="token punctuation">.</span>ZipFile<span class="token punctuation">(</span>fountain_zip_path<span class="token punctuation">,</span> <span class="token string">"r"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> zip_ref<span class="token punctuation">:</span>
            zip_ref<span class="token punctuation">.</span>extractall<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>fountain_path<span class="token punctuation">)</span><span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>fountain_zip_path<span class="token punctuation">)</span>
    <span class="token keyword">return</span> fountain_path


<span class="token keyword">def</span> <span class="token function">get_non_manifold_edge_mesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    verts <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>
        <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>float64<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    triangles <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>vertices <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3dVector<span class="token punctuation">(</span>verts<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>triangles <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3iVector<span class="token punctuation">(</span>triangles<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>
        mesh<span class="token punctuation">.</span>get_rotation_matrix_from_xyz<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        center<span class="token operator">=</span>mesh<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh


<span class="token keyword">def</span> <span class="token function">get_non_manifold_vertex_mesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    verts <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>
        <span class="token punctuation">[</span>
            <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>float64<span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    triangles <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>vertices <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3dVector<span class="token punctuation">(</span>verts<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>triangles <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3iVector<span class="token punctuation">(</span>triangles<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>
        mesh<span class="token punctuation">.</span>get_rotation_matrix_from_xyz<span class="token punctuation">(</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>pi <span class="token operator">/</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        center<span class="token operator">=</span>mesh<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh


<span class="token keyword">def</span> <span class="token function">get_open_box_mesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">.</span>create_box<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>triangles <span class="token operator">=</span> o3d<span class="token punctuation">.</span>utility<span class="token punctuation">.</span>Vector3iVector<span class="token punctuation">(</span>np<span class="token punctuation">.</span>asarray<span class="token punctuation">(</span>mesh<span class="token punctuation">.</span>triangles<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>
        mesh<span class="token punctuation">.</span>get_rotation_matrix_from_xyz<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.8</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.66</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        center<span class="token operator">=</span>mesh<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh


<span class="token keyword">def</span> <span class="token function">get_intersecting_boxes_mesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    mesh0 <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">.</span>create_box<span class="token punctuation">(</span><span class="token punctuation">)</span>
    T <span class="token operator">=</span> np<span class="token punctuation">.</span>eye<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
    T<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    mesh1 <span class="token operator">=</span> o3d<span class="token punctuation">.</span>geometry<span class="token punctuation">.</span>TriangleMesh<span class="token punctuation">.</span>create_box<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh1<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>T<span class="token punctuation">)</span>
    mesh <span class="token operator">=</span> mesh0 <span class="token operator">+</span> mesh1
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>rotate<span class="token punctuation">(</span>
        mesh<span class="token punctuation">.</span>get_rotation_matrix_from_xyz<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.7</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0.6</span> <span class="token operator">*</span> np<span class="token punctuation">.</span>pi<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        center<span class="token operator">=</span>mesh<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh


<span class="token keyword">def</span> <span class="token function">get_armadillo_mesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    armadillo_path <span class="token operator">=</span> _relative_path<span class="token punctuation">(</span><span class="token string">"../TestData/Armadillo.ply"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>armadillo_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"downloading armadillo mesh"</span><span class="token punctuation">)</span>
        url <span class="token operator">=</span> <span class="token string">"http://graphics.stanford.edu/pub/3Dscanrep/armadillo/Armadillo.ply.gz"</span>
        urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token punctuation">,</span> armadillo_path <span class="token operator">+</span> <span class="token string">".gz"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"extract armadillo mesh"</span><span class="token punctuation">)</span>
        <span class="token keyword">with</span> gzip<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>armadillo_path <span class="token operator">+</span> <span class="token string">".gz"</span><span class="token punctuation">,</span> <span class="token string">"rb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fin<span class="token punctuation">:</span>
            <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>armadillo_path<span class="token punctuation">,</span> <span class="token string">"wb"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fout<span class="token punctuation">:</span>
                shutil<span class="token punctuation">.</span>copyfileobj<span class="token punctuation">(</span>fin<span class="token punctuation">,</span> fout<span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>armadillo_path <span class="token operator">+</span> <span class="token string">".gz"</span><span class="token punctuation">)</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_triangle_mesh<span class="token punctuation">(</span>armadillo_path<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh


<span class="token keyword">def</span> <span class="token function">get_bunny_mesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    bunny_path <span class="token operator">=</span> _relative_path<span class="token punctuation">(</span><span class="token string">"../TestData/Bunny.ply"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>bunny_path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"downloading bunny mesh"</span><span class="token punctuation">)</span>
        url <span class="token operator">=</span> <span class="token string">"http://graphics.stanford.edu/pub/3Dscanrep/bunny.tar.gz"</span>
        urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token punctuation">,</span> bunny_path <span class="token operator">+</span> <span class="token string">".tar.gz"</span><span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"extract bunny mesh"</span><span class="token punctuation">)</span>
        <span class="token keyword">with</span> tarfile<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>bunny_path <span class="token operator">+</span> <span class="token string">".tar.gz"</span><span class="token punctuation">)</span> <span class="token keyword">as</span> tar<span class="token punctuation">:</span>
            tar<span class="token punctuation">.</span>extractall<span class="token punctuation">(</span>path<span class="token operator">=</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>bunny_path<span class="token punctuation">)</span><span class="token punctuation">)</span>
        shutil<span class="token punctuation">.</span>move<span class="token punctuation">(</span>
            os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>
                os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>bunny_path<span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string">"bunny"</span><span class="token punctuation">,</span>
                <span class="token string">"reconstruction"</span><span class="token punctuation">,</span>
                <span class="token string">"bun_zipper.ply"</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            bunny_path<span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
        os<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>bunny_path <span class="token operator">+</span> <span class="token string">".tar.gz"</span><span class="token punctuation">)</span>
        shutil<span class="token punctuation">.</span>rmtree<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>bunny_path<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"bunny"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_triangle_mesh<span class="token punctuation">(</span>bunny_path<span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh


<span class="token keyword">def</span> <span class="token function">get_knot_mesh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    mesh <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_triangle_mesh<span class="token punctuation">(</span>_relative_path<span class="token punctuation">(</span><span class="token string">"../TestData/knot.ply"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    mesh<span class="token punctuation">.</span>compute_vertex_normals<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> mesh


<span class="token keyword">def</span> <span class="token function">get_eagle_pcd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    path <span class="token operator">=</span> _relative_path<span class="token punctuation">(</span><span class="token string">"../TestData/eagle.ply"</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>exists<span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"downloading eagle pcl"</span><span class="token punctuation">)</span>
        url <span class="token operator">=</span> <span class="token string">"http://www.cs.jhu.edu/~misha/Code/PoissonRecon/eagle.points.ply"</span>
        urllib<span class="token punctuation">.</span>request<span class="token punctuation">.</span>urlretrieve<span class="token punctuation">(</span>url<span class="token punctuation">,</span> path<span class="token punctuation">)</span>
    pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span>path<span class="token punctuation">)</span>
    <span class="token keyword">return</span> pcd
</code></pre> 
<h5><a id="125__1755"></a>12.5 计算点云质心</h5> 
<p>使用 get_center() 实现点云质心计算</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"tree.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f'pcd质心：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>pcd<span class="token punctuation">.</span>get_center<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">'</span></span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>输出结果:</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">5746</span> points.
pcd质心：<span class="token punctuation">[</span> <span class="token number">66.36420378</span> <span class="token parameter variable">-52.42476729</span> -15.28512276<span class="token punctuation">]</span>
</code></pre> 
<p><strong>pcl 点云质心计算结果</strong>：</p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>点云质心为：<span class="token punctuation">(</span><span class="token number">66.3642</span>, -52.4248, -15.2851<span class="token punctuation">)</span>
</code></pre> 
<h5><a id="126_1786"></a>12.6、根据索引提取点云</h5> 
<p><strong>函数原型：</strong></p> 
<pre><code class="prism language-python">select_by_index<span class="token punctuation">(</span>self<span class="token punctuation">,</span> indices<span class="token punctuation">,</span> invert<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"desk.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token triple-quoted-string string">"""------------------- 根据索引提取点云 --------------------"""</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在根据索引提取点云..."</span><span class="token punctuation">)</span>
idx <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">20000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 生成 从0到19999的列表</span>

<span class="token comment"># 索引对应的点云（内点）</span>
inlier_pcd <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>idx<span class="token punctuation">)</span>
inlier_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"内点点云："</span><span class="token punctuation">,</span> inlier_pcd<span class="token punctuation">)</span>

<span class="token comment"># 索引外的点云（外点）</span>
outlier_pcd <span class="token operator">=</span> pcd<span class="token punctuation">.</span>select_by_index<span class="token punctuation">(</span>idx<span class="token punctuation">,</span> invert<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>     <span class="token comment"># 对索引取反</span>
outlier_pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"外点点云："</span><span class="token punctuation">,</span> outlier_pcd<span class="token punctuation">)</span>

o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>inlier_pcd<span class="token punctuation">,</span> outlier_pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token triple-quoted-string string">"""========================================================"""</span>
</code></pre> 
<p><strong>输出结果:</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">41049</span> points.
-<span class="token operator">&gt;</span>正在根据索引提取点云<span class="token punctuation">..</span>.
内点点云： PointCloud with <span class="token number">20000</span> points.
外点点云： PointCloud with <span class="token number">21049</span> points.
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/d3/92/Cqi0bTeO_o.png" alt=""></p> 
<p><strong>源码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">def</span> <span class="token function">select_by_index</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> indices<span class="token punctuation">,</span> invert<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># real signature unknown; restored from __doc__</span>
    <span class="token triple-quoted-string string">"""
        select_by_index(self, indices, invert=False)
        Function to select points from input pointcloud into output pointcloud.

        Args:
            indices (List[int]): Indices of points to be selected.
            invert (bool, optional, default=False): Set to ``True`` to invert the selection of indices.

        Returns:
            open3d.geometry.PointCloud
        """</span>
    <span class="token keyword">pass</span>
</code></pre> 
<h5><a id="127_1856"></a>12.7、点云赋色</h5> 
<p><strong>赋色函数：</strong></p> 
<p>paint_uniform_color ：将点云进行单一颜色赋值，为RGB颜色空间，R、G、B分量的范围为[0,1]，注意不是[0,255]</p> 
<p><strong>代码：</strong></p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> open3d <span class="token keyword">as</span> o3d
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在加载点云... "</span><span class="token punctuation">)</span>
pcd <span class="token operator">=</span> o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>read_point_cloud<span class="token punctuation">(</span><span class="token string">"bunny.pcd"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>pcd<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在点云赋色..."</span><span class="token punctuation">)</span>
pcd<span class="token punctuation">.</span>paint_uniform_color<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0.706</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在可视化赋色后的点云..."</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>visualization<span class="token punctuation">.</span>draw_geometries<span class="token punctuation">(</span><span class="token punctuation">[</span>pcd<span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"-&gt;正在保存赋色后的点云"</span><span class="token punctuation">)</span>
o3d<span class="token punctuation">.</span>io<span class="token punctuation">.</span>write_point_cloud<span class="token punctuation">(</span><span class="token string">"color.pcd"</span><span class="token punctuation">,</span> pcd<span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span>	<span class="token comment"># 默认false，保存为Binarty；True 保存为ASICC形式</span>
</code></pre> 
<p><strong>输出结果：</strong></p> 
<pre><code class="prism language-bash">-<span class="token operator">&gt;</span>正在加载点云<span class="token punctuation">..</span>. 
PointCloud with <span class="token number">35947</span> points.
-<span class="token operator">&gt;</span>正在点云赋色<span class="token punctuation">..</span>.
-<span class="token operator">&gt;</span>正在可视化赋色后的点云<span class="token punctuation">..</span>.
-<span class="token operator">&gt;</span>正在保存赋色后的点云
</code></pre> 
<p><strong>可视化结果:</strong></p> 
<p><img src="https://images2.imgbox.com/db/e6/qaJv59mv_o.png" alt=""></p> 
<p><strong>相关连接：</strong></p> 
<p>http://www.open3d.org/</p> 
<p>http://www.open3d.org/docs/release/index.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/afa1195fad67aa33f5a8f9975f7e6dfd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于SPDK-vhost的云原生Kubevirt虚拟化存储IO的优化方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/cb48b20632a725bb02e379599a663948/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Redis面经：跳表中节点的数据结构？新节点的层数如何确认？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>