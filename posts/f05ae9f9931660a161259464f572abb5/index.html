<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序地图标记点，点击标记点显示详细信息源码加效果图 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序地图标记点，点击标记点显示详细信息源码加效果图" />
<meta property="og:description" content="微信小程序开发交流qq群 173683895
承接微信小程序开发。扫码加微信。 效果图：
实现代码:
&lt;!-- &lt;text&gt;{{markers[id].placeName}}&lt;/text&gt; --&gt; &lt;block wx:if=&#39;{{isshow}}&#39;&gt; &lt;map id=&#34;map&#34; longitude=&#34;114.048410&#34; latitude=&#34;22.648760&#34; scale=&#34;8&#34; include-points=&#34;{{markers}}&#34; markers=&#34;{{markers}}&#34; bindmarkertap=&#34;showModal&#34; data-id=&#34;{{markers}}&#34; polyline=&#34;{{polyline}}&#34; bindregionchange=&#34;regionchange&#34; show-location style=&#34;width: 100%; height: 100%;&#34;&gt; &lt;cover-view class=&#39;index_bt1&#39;&gt; &lt;cover-image class=&#39;xiaoer&#39; bindtap=&#34;login&#34; src=&#34;/images/mk.png&#34; /&gt; &lt;/cover-view&gt; &lt;cover-view class=&#39;index_shuaxin&#39;&gt; &lt;cover-image class=&#39;shuaxin&#39; src=&#34;/images/mk.png&#34; /&gt; &lt;/cover-view&gt; &lt;!--屏幕背景变暗的背景 --&gt; &lt;cover-view class=&#34;commodity_screen&#34; bindtap=&#34;hideModal&#34; wx:if=&#34;{{showModalStatus}}&#34;&gt;&lt;/cover-view&gt; &lt;!--弹出框 --&gt; &lt;cover-view animation=&#34;{{animationData}}&#34; class=&#34;commodity_attr_box&#34; wx:if=&#34;{{showModalStatus}}&#34;&gt; &lt;cover-view class=&#39;placeBox&#39;&gt; &lt;cover-view class=&#39;placeViewLt&#39;&gt; &lt;cover-view class=&#39;viewTitle&#39;&gt;{{myall.placeName}}&lt;/cover-view&gt; &lt;cover-view class=&#39;viewDis&#39;&gt;{{myall.dis}}&lt;/cover-view&gt; &lt;cover-view class=&#39;viewAddr&#39;&gt;{{myall.adr}}&lt;/cover-view&gt; &lt;/cover-view&gt; &lt;cover-view class=&#39;placeViewRt&#39;&gt; &lt;cover-image data-id=&#34;{{myall.id}}&#34; bindtap=&#34;opendetail&#34; src=&#39;/images/mk." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f05ae9f9931660a161259464f572abb5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-04T10:52:20+08:00" />
<meta property="article:modified_time" content="2019-01-04T10:52:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序地图标记点，点击标记点显示详细信息源码加效果图</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>微信小程序开发交流qq群   173683895</p> 
<h4><img alt="" class="has" height="260" src="https://images2.imgbox.com/e0/12/9mKaZzHe_o.jpg" width="260">   承接微信小程序开发。扫码加微信。</h4> 
<p> </p> 
<p>效果图：</p> 
<p><img alt="" class="has" height="668" src="https://images2.imgbox.com/14/47/Bpz1k18C_o.gif" width="377"></p> 
<p>实现代码:</p> 
<pre class="has"><code>&lt;!-- &lt;text&gt;{<!-- -->{markers[id].placeName}}&lt;/text&gt; --&gt;
&lt;block wx:if='{<!-- -->{isshow}}'&gt;
  &lt;map id="map" longitude="114.048410" latitude="22.648760" scale="8" include-points="{<!-- -->{markers}}" markers="{<!-- -->{markers}}" bindmarkertap="showModal" data-id="{<!-- -->{markers}}" polyline="{<!-- -->{polyline}}" bindregionchange="regionchange" show-location style="width: 100%; height: 100%;"&gt;


    &lt;cover-view class='index_bt1'&gt;
      &lt;cover-image class='xiaoer' bindtap="login" src="/images/mk.png" /&gt;
    &lt;/cover-view&gt;
    &lt;cover-view class='index_shuaxin'&gt;
      &lt;cover-image class='shuaxin' src="/images/mk.png" /&gt;
    &lt;/cover-view&gt;

    &lt;!--屏幕背景变暗的背景  --&gt;
    &lt;cover-view class="commodity_screen" bindtap="hideModal" wx:if="{<!-- -->{showModalStatus}}"&gt;&lt;/cover-view&gt;
    &lt;!--弹出框  --&gt;
    &lt;cover-view animation="{<!-- -->{animationData}}" class="commodity_attr_box" wx:if="{<!-- -->{showModalStatus}}"&gt;

      &lt;cover-view class='placeBox'&gt;

        &lt;cover-view class='placeViewLt'&gt;
          &lt;cover-view class='viewTitle'&gt;{<!-- -->{myall.placeName}}&lt;/cover-view&gt;
          &lt;cover-view class='viewDis'&gt;{<!-- -->{myall.dis}}&lt;/cover-view&gt;
          &lt;cover-view class='viewAddr'&gt;{<!-- -->{myall.adr}}&lt;/cover-view&gt;
        &lt;/cover-view&gt;
        &lt;cover-view class='placeViewRt'&gt;
          &lt;cover-image data-id="{<!-- -->{myall.id}}" bindtap="opendetail" src='/images/mk.png'&gt;&lt;/cover-image&gt;
        &lt;/cover-view&gt;

      &lt;/cover-view&gt;


      &lt;cover-view class='viewIcon'&gt;
        &lt;cover-image class='indexIcon' src='/images/time.png'&gt;&lt;/cover-image&gt;
        &lt;cover-view class='timeText'&gt;{<!-- -->{myall.time}}&lt;/cover-view&gt;

        &lt;cover-image class='indexIcon1' data-id="{<!-- -->{myall}}" src='/images/share.png' bindtap='calling'&gt;&lt;/cover-image&gt;
        &lt;cover-view class='timeText1' data-id="{<!-- -->{myall}}" bindtap='calling'&gt;电话&lt;/cover-view&gt;

        &lt;cover-image class='indexIcon2' src='/images/nav.png'&gt;&lt;/cover-image&gt;
        &lt;cover-view class='timeText1'&gt;导航&lt;/cover-view&gt;
      &lt;/cover-view&gt;

    &lt;/cover-view&gt;
  &lt;/map&gt;

&lt;/block&gt;</code></pre> 
<p>js</p> 
<pre class="has"><code>// map.js
var app = getApp()
var mymap = '';
var lat = '';
var long = '';
Page({
  data: {
    polyline: [{
      points: [{
        longitude: 113.3245211,
        latitude: 23.10229
      }, {
        longitude: 113.324520,
        latitude: 23.21229
      }],
      color: '#FF0000DD',
      width: 2,
      dottedLine: true
    }],
    controls: [{
      id: 1,
      iconPath: '/images/mk.png',
      position: {
        left: 0,
        top: 300 - 1,
        width: 50,
        height: 50
      },
      clickable: true
    }]
  },
  //引入数据库
  onLoad: function(option) {
    var url = app.url + 'Api/Api/get_shop_dp&amp;PHPSESSID=' + wx.getStorageSync('PHPSESSID')
    var that = this
    console.log(option)
    if (option.scene) {
      this.setData({
        isshow: false
      })
      wx.navigateTo({
        url: '../chat/chat?scene=' + option.scene,
      })
    } else {
      this.setData({
        isshow: true
      })
    }
    wx.request({ //让服务器端统一下单，并返回小程序支付的参数
      url: url,
      data: {
        openid: wx.getStorageSync('openid')
      },
      success: function(res) {
        console.log(res);
        that.setData({
          markers: res.data.data
        });
        wx.getLocation({
          type: 'wgs84',
          success(mres) {
            var map_lat = mres.latitude;
            var map_long = mres.longitude;
            var map_speed = mres.speed;
            var map_accuracy = mres.accuracy;
            that.setData({
              lat: map_lat
            });
            that.setData({
              long: map_long
            });
          }
        });
      }
    });
  },

  //显示对话框
  showModal: function(event) {
    //console.log(event.markerId);
    var i = event.markerId;
    var url = app.url + 'Api/Api/get_shop_dp_detail&amp;PHPSESSID=' + wx.getStorageSync('PHPSESSID');
    var that = this;
    console.log('====get_detail====')
    wx.request({ 
      url: url,
      data: {
        id: i,
        openid: wx.getStorageSync('openid')
      },
      success: function(res) {
        console.log(res);
        that.setData({
          myall: res.data.data
        });
      }
    });

    // 显示遮罩层
    var animation = wx.createAnimation({
      duration: 200,
      timingFunction: "linear",
      delay: 0
    })
    this.animation = animation
    animation.translateY(300).step()
    this.setData({
      animationData: animation.export(),
      showModalStatus: true
    })
    setTimeout(function() {
      animation.translateY(0).step()
      this.setData({
        animationData: animation.export()
      })
    }.bind(this), 200)
  },
  //隐藏对话框
  hideModal: function() {
    // 隐藏遮罩层
    var animation = wx.createAnimation({
      duration: 200,
      timingFunction: "linear",
      delay: 0
    })
    this.animation = animation
    animation.translateY(300).step()
    this.setData({
      animationData: animation.export(),
    })
    setTimeout(function() {
      animation.translateY(0).step()
      this.setData({
        animationData: animation.export(),
        showModalStatus: false
      })
    }.bind(this), 200)
  },

  opendetail: function(event) {
    console.log('-----跳转商品-----');
    //console.log(event);
    var id = event.currentTarget.dataset.id;
    this.setData({
      id: id
    });
    wx.navigateTo({
        url: "/pages/detail/detail?id=" + id
      }),
      console.log(id);
  },

  calling: function(event) {
    var tel = event.currentTarget.dataset.id.tel;
    this.setData({
      tel: tel
    });
    wx.makePhoneCall({
      phoneNumber: tel,
      success: function() {
        console.log("拨打电话成功！")
      },
      fail: function() {
        console.log("拨打电话失败！")
      }
    })
  }
})</code></pre> 
<p>css</p> 
<pre class="has"><code>/* index/index.wxss */
page{
  height: 100%;
}
.index_bt1{
  width: 100rpx;
  height: 100rpx;
  padding-top:30rpx;
  margin-left: 600rpx;
}

.xiaoer{
  width: 100rpx;
  height: 100rpx;
}

.index_shuaxin{
  width: 60rpx;
  height: 60rpx;
  padding-top: 860rpx;
  margin-left: 20rpx;
}

.shuaxin{
  width: 60rpx;
  height: 60rpx;
}

.sch{
  display: block;
	z-index: 999999;
  height: 69rpx;
  width:100%; 
  margin:0 auto;
  padding-top: 30rpx;
}

/*底部弹窗开始 -使屏幕变暗  */
.commodity_screen {
  width: 100%;
  height: 100%;
  position: fixed;
  top: 0;
  left: 0;
  background: #000;
  opacity: 0.2;
  overflow: hidden;
  z-index: 1000;
  color: #fff;
}
/*对话框 */
.commodity_attr_box {
  height: 280rpx;
  width: 100%;
  overflow: hidden;
  position: fixed;
  bottom: 0;
  left: 0;
  z-index: 2000;
  background: #fff;
  padding-top: 0rpx;
}

.placeBox{
  width: 100%;
  height: 150rpx;
}

.placeViewLt{
  display: inline-block;
  width: 620rpx;
  height: 140rpx;

  vertical-align: middle;
}

.viewTitle{
  display: block;
  font-size: 38rpx;
  color: #3F51B5;
  margin-left: 20rpx;
  padding-top: 34rpx;
}

.viewDis{
  display: inline-block;
  font-size: 26rpx;
  color: gray;
  margin-left: 20rpx;
}

.viewAddr{
  display: inline-block;
  font-size: 28rpx;
  color: gray;
  margin-left: 20rpx;
}

.placeViewRt{
  display: inline-block;
  width: 120rpx;
  height: 120rpx;
  padding-top: 6rpx;
  vertical-align: middle;
}

.viewIcon{
  display: block;
  height: 100rpx;
  width: 100%;
  border-top: 1px solid #ebebeb;
  padding-top: 40rpx;
}

.indexIcon{
  display: inline-block;
  width: 50rpx;
  height: 50rpx;
  margin-left: 40rpx;
  vertical-align: middle;
}

.timeText{
  display: inline-block;
  line-height: 45rpx;
  margin-left: 12rpx;
  text-align: center;
  width: 200rpx;
  height: 45rpx;
  background-color: rgb(230, 234, 255);
  border-radius: 10px;
  color: #3F51B5;
  font-size: 24rpx;
}

.indexIcon1{
  display: inline-block;
  width: 50rpx;
  height: 50rpx;
  margin-left: 110rpx;
  vertical-align: middle;
}

.indexIcon2{
  display: inline-block;
  width: 50rpx;
  height: 50rpx;
  margin-left: 20rpx;
  vertical-align: middle;
}

.timeText1{
  display: inline-block;
  line-height: 45rpx;
  margin-left: 12rpx;
  width: 100rpx;
  height: 45rpx;
  color: #3F51B5;
  font-size: 24rpx;
}

.timeText2{
  display: inline-block;
  line-height: 45rpx;
  margin-left: 12rpx;
  width: 200rpx;
  height: 45rpx;
  color: #3F51B5;
  font-size: 24rpx;
}
.btn-area{ width: 100%;}
.btn_no{ float:left;width: 40%; margin-left: 5%;border: 0px;}
.btn_ok{ float:left;width: 40%; margin-left: 10%;margin-right: 5%; border: 0px;}</code></pre> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/14e564270de83c4e7858bf95c658e6dc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IDEA使用注解@ConfigurationProperties时报错解决</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d30d4cd30fab672c40bfc4c863d1ad0b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ALGO-10 算法训练 集合运算</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>