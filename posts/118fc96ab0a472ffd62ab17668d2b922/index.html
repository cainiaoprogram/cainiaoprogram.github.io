<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>小猫爪：S32K3学习笔记01-S32K3 RTD【MCAL&amp;SDK】的使用和环境搭建 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="小猫爪：S32K3学习笔记01-S32K3 RTD【MCAL&amp;SDK】的使用和环境搭建" />
<meta property="og:description" content="S32K3学习笔记01-S32K3 RTD【MCAL&amp;SDK】的使用和环境搭建 1 前言2 准备工作3 安装3.1 安装EB Tresos3.2 安装MCAL3.2 安装S32DS 4 SDK开发示例4.1 SDK包安装4.2 导入一个Demo4.3 新建一个工程 5 MCAL开发示例5.1 MCAL软件包组成5.2 通过EB配置MCAL并生成代码5.3 编译配套的MCAL Demo5.4 在S32DS中使用PE仿真器调试5.5 使用Lauterbach调试 end 1 前言 NXP最近又推出了新的GPIS系列MCU S32K3，也就是S32K1的升级版，虽然是升级版，但是性能提升的不是一点半点，那是贼凶啊，接下来一段时刻，我就要好好学习一下这个MCU，并且把我的学习过程写点笔记，分享给大家，欢迎大家建议和纠错。
这第一篇就介绍一下开发环境的搭建，在这里我使用S32DS进行SDK方式的开发，配合EB tresos进行MCAL开发。
简单的来说就是：EB tresos可以为MCAL开发提供图形化配置界面，而S32DS则为SDK开发提供图形化配置界面。
这篇文件介绍的方式流程如下：
SDK开发流程为：
在S32DS配置外设 在S32DS编译 在S32DS中调试 使用其他调试工具 MCAL开发流程
在EB配置MCAL 使用编译器编译 在S32DS中调试 其他调试工具 2 准备工作 准备工作当然就是下载一些东西喽。需要下载三个东西，分别是NXP官方的调试IDE，配置MCAL的EB tresos以及S32K3的RTD软件包。
RTD是什么，Real-time Driver，在S32K1时代，MCAL和SDK是两套不同的软件包，但是到了S32K3，就把两者集成了一下，MCAL和SDK共用一套代码，也就是RTD，意思其实就是这两个软件包里面的底层代码都是一样的。简单的来说，现在K3的MCAL就是在SDK的底层基础上封装了一层符合AUTOSAR标准的接口层，RTD的具体结构框架如下图：
图中High Level Interface指的就是符合AUTOSAR的MCAL接口层，而Low Level Interface就是传统意义上比较高效的SDK底层接口层。
如果有NXP的授权账号，就可以在下面链接下载到这些东西的安装包，登录账号后，点击MY_NXP：
点开 Software Licensing and support, 找到S32K3 Standard Software，点开就可以看到这三个东西的下载链接了：
①对于EB tresos的下载，需要记住标记的激活码。
②对于MCAL（SDK），就下载最新的就好了，这里我选择是1.0.0。
如果是MCAL开发的话，只需要下载MCAL安装包，如果是SDK开发的话，只需要下载SDK软件包。
③对于S32DS，可以看到这个版本需要S32DSV3.4，所以需要下载V3.4版本的S32DS就好了，另外还需要下载S32K3的支持补丁包。
下面就是一顿漫长的等待，等所有东西都下载好了之后，有如下东西：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/118fc96ab0a472ffd62ab17668d2b922/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-16T17:19:06+08:00" />
<meta property="article:modified_time" content="2022-06-16T17:19:06+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">小猫爪：S32K3学习笔记01-S32K3 RTD【MCAL&amp;SDK】的使用和环境搭建</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>S32K3学习笔记01-S32K3 RTD【MCAL&amp;SDK】的使用和环境搭建</h4> 
 <ul><li><a href="#1__1" rel="nofollow">1 前言</a></li><li><a href="#2__24" rel="nofollow">2 准备工作</a></li><li><a href="#3__56" rel="nofollow">3 安装</a></li><li><ul><li><a href="#31_EB_Tresos_57" rel="nofollow">3.1 安装EB Tresos</a></li><li><a href="#32_MCAL_67" rel="nofollow">3.2 安装MCAL</a></li><li><a href="#32_S32DS_70" rel="nofollow">3.2 安装S32DS</a></li></ul> 
  </li><li><a href="#4_SDK_76" rel="nofollow">4 SDK开发示例</a></li><li><ul><li><a href="#41_SDK_77" rel="nofollow">4.1 SDK包安装</a></li><li><a href="#42_Demo_83" rel="nofollow">4.2 导入一个Demo</a></li><li><a href="#43__93" rel="nofollow">4.3 新建一个工程</a></li></ul> 
  </li><li><a href="#5_MCAL_105" rel="nofollow">5 MCAL开发示例</a></li><li><ul><li><a href="#51_MCAL_106" rel="nofollow">5.1 MCAL软件包组成</a></li><li><a href="#52_EBMCAL_152" rel="nofollow">5.2 通过EB配置MCAL并生成代码</a></li><li><a href="#53_MCAL_Demo_166" rel="nofollow">5.3 编译配套的MCAL Demo</a></li><li><a href="#54_S32DSPE_198" rel="nofollow">5.4 在S32DS中使用PE仿真器调试</a></li><li><a href="#55_Lauterbach_220" rel="nofollow">5.5 使用Lauterbach调试</a></li></ul> 
  </li><li><a href="#end_230" rel="nofollow">end</a></li></ul> 
</div> 
<p></p> 
<h2><a id="1__1"></a>1 前言</h2> 
<p>  NXP最近又推出了新的GPIS系列MCU S32K3，也就是S32K1的升级版，虽然是升级版，但是性能提升的不是一点半点，那是贼凶啊，接下来一段时刻，我就要好好学习一下这个MCU，并且把我的学习过程写点笔记，分享给大家，欢迎大家建议和纠错。</p> 
<p>  这第一篇就介绍一下开发环境的搭建，在这里我使用S32DS进行SDK方式的开发，配合EB tresos进行MCAL开发。</p> 
<p>  简单的来说就是：EB tresos可以为MCAL开发提供图形化配置界面，而S32DS则为SDK开发提供图形化配置界面。</p> 
<p>  这篇文件介绍的方式流程如下：</p> 
<p>  SDK开发流程为：</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-aPQmItk7TFLNoFCU" width="100%" xmlns="http://www.w3.org/2000/svg" height="171" style="max-width: 600.9375px;" viewbox="0 0 600.9375 171"> 
  <style>#mermaid-svg-aPQmItk7TFLNoFCU {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-aPQmItk7TFLNoFCU .error-icon{fill:#552222;}#mermaid-svg-aPQmItk7TFLNoFCU .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-aPQmItk7TFLNoFCU .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-aPQmItk7TFLNoFCU .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-aPQmItk7TFLNoFCU .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-aPQmItk7TFLNoFCU .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-aPQmItk7TFLNoFCU .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-aPQmItk7TFLNoFCU .marker{fill:#333333;stroke:#333333;}#mermaid-svg-aPQmItk7TFLNoFCU .marker.cross{stroke:#333333;}#mermaid-svg-aPQmItk7TFLNoFCU svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-aPQmItk7TFLNoFCU .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-aPQmItk7TFLNoFCU .cluster-label text{fill:#333;}#mermaid-svg-aPQmItk7TFLNoFCU .cluster-label span{color:#333;}#mermaid-svg-aPQmItk7TFLNoFCU .label text,#mermaid-svg-aPQmItk7TFLNoFCU span{fill:#333;color:#333;}#mermaid-svg-aPQmItk7TFLNoFCU .node rect,#mermaid-svg-aPQmItk7TFLNoFCU .node circle,#mermaid-svg-aPQmItk7TFLNoFCU .node ellipse,#mermaid-svg-aPQmItk7TFLNoFCU .node polygon,#mermaid-svg-aPQmItk7TFLNoFCU .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-aPQmItk7TFLNoFCU .node .label{text-align:center;}#mermaid-svg-aPQmItk7TFLNoFCU .node.clickable{cursor:pointer;}#mermaid-svg-aPQmItk7TFLNoFCU .arrowheadPath{fill:#333333;}#mermaid-svg-aPQmItk7TFLNoFCU .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-aPQmItk7TFLNoFCU .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-aPQmItk7TFLNoFCU .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-aPQmItk7TFLNoFCU .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-aPQmItk7TFLNoFCU .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-aPQmItk7TFLNoFCU .cluster text{fill:#333;}#mermaid-svg-aPQmItk7TFLNoFCU .cluster span{color:#333;}#mermaid-svg-aPQmItk7TFLNoFCU div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-aPQmItk7TFLNoFCU :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M180.46875,85.5L184.63541666666666,85.5C188.80208333333334,85.5,197.13541666666666,85.5,205.46875,85.5C213.80208333333334,85.5,222.13541666666666,85.5,226.30208333333334,85.5L230.46875,85.5" marker-end="url(#arrowhead43)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead43" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-c" style="opacity: 1;" id="L-B-c"> 
      <path class="path" d="M343.4329268292683,59.25L350.8503556910569,55.083333333333336C358.26778455284557,50.916666666666664,373.1026422764228,42.583333333333336,386.98100863821145,38.416666666666664C400.859375,34.25,413.78125,34.25,420.2421875,34.25L426.703125,34.25" marker-end="url(#arrowhead44)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead44" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-d" style="opacity: 1;" id="L-B-d"> 
      <path class="path" d="M343.4329268292683,111.75L350.8503556910569,115.91666666666667C358.26778455284557,120.08333333333333,373.1026422764228,128.41666666666666,384.6867378048781,132.58333333333334C396.2708333333333,136.75,404.6041666666667,136.75,408.7708333333333,136.75L412.9375,136.75" marker-end="url(#arrowhead45)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead45" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-c" class="edgeLabel L-LS-B' L-LE-c"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-d" class="edgeLabel L-LS-B' L-LE-d"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-27" transform="translate(94.234375,85.5)" style="opacity: 1;"> 
      <rect rx="0" ry="0" x="-86.234375" y="-26.25" width="172.46875" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-76.234375,-16.25)"> 
        <foreignobject width="152.48046875" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           在S32DS配置外设 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-28" transform="translate(296.703125,85.5)"> 
      <rect rx="0" ry="0" x="-66.234375" y="-26.25" width="132.46875" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-56.234375,-16.25)"> 
        <foreignobject width="112.48046875" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           在S32DS编译 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-c-29" transform="translate(502.9375,34.25)"> 
      <rect rx="0" ry="0" x="-76.234375" y="-26.25" width="152.46875" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-66.234375,-16.25)"> 
        <foreignobject width="132.48046875" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           在S32DS中调试 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-d-31" transform="translate(502.9375,136.75)"> 
      <rect rx="0" ry="0" x="-90" y="-26.25" width="180" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-80,-16.25)"> 
        <foreignobject width="160" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           使用其他调试工具 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<p>  MCAL开发流程</p> 
<div class="mermaid sequence-diagram"> 
 <svg id="mermaid-svg-GNX262hqtLZalSCA" width="100%" xmlns="http://www.w3.org/2000/svg" height="171" style="max-width: 578.578125px;" viewbox="0 0 578.578125 171"> 
  <style>#mermaid-svg-GNX262hqtLZalSCA {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-GNX262hqtLZalSCA .error-icon{fill:#552222;}#mermaid-svg-GNX262hqtLZalSCA .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-GNX262hqtLZalSCA .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-GNX262hqtLZalSCA .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-GNX262hqtLZalSCA .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-GNX262hqtLZalSCA .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-GNX262hqtLZalSCA .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-GNX262hqtLZalSCA .marker{fill:#333333;stroke:#333333;}#mermaid-svg-GNX262hqtLZalSCA .marker.cross{stroke:#333333;}#mermaid-svg-GNX262hqtLZalSCA svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-GNX262hqtLZalSCA .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-svg-GNX262hqtLZalSCA .cluster-label text{fill:#333;}#mermaid-svg-GNX262hqtLZalSCA .cluster-label span{color:#333;}#mermaid-svg-GNX262hqtLZalSCA .label text,#mermaid-svg-GNX262hqtLZalSCA span{fill:#333;color:#333;}#mermaid-svg-GNX262hqtLZalSCA .node rect,#mermaid-svg-GNX262hqtLZalSCA .node circle,#mermaid-svg-GNX262hqtLZalSCA .node ellipse,#mermaid-svg-GNX262hqtLZalSCA .node polygon,#mermaid-svg-GNX262hqtLZalSCA .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-svg-GNX262hqtLZalSCA .node .label{text-align:center;}#mermaid-svg-GNX262hqtLZalSCA .node.clickable{cursor:pointer;}#mermaid-svg-GNX262hqtLZalSCA .arrowheadPath{fill:#333333;}#mermaid-svg-GNX262hqtLZalSCA .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-svg-GNX262hqtLZalSCA .flowchart-link{stroke:#333333;fill:none;}#mermaid-svg-GNX262hqtLZalSCA .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-svg-GNX262hqtLZalSCA .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-svg-GNX262hqtLZalSCA .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-svg-GNX262hqtLZalSCA .cluster text{fill:#333;}#mermaid-svg-GNX262hqtLZalSCA .cluster span{color:#333;}#mermaid-svg-GNX262hqtLZalSCA div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-svg-GNX262hqtLZalSCA :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style> 
  <g> 
   <g class="output"> 
    <g class="clusters"></g> 
    <g class="edgePaths"> 
     <g class="edgePath LS-A LE-B" id="L-A-B" style="opacity: 1;"> 
      <path class="path" d="M158.109375,85.5L162.27604166666666,85.5C166.44270833333334,85.5,174.77604166666666,85.5,183.109375,85.5C191.44270833333334,85.5,199.77604166666666,85.5,203.94270833333334,85.5L208.109375,85.5" marker-end="url(#arrowhead58)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead58" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-c" style="opacity: 1;" id="L-B-c"> 
      <path class="path" d="M341.889862804878,59.25L350.4264481707317,55.083333333333336C358.9630335365853,50.916666666666664,376.0362042682927,42.583333333333336,388.73945630081306,38.416666666666664C401.4427083333333,34.25,409.7760416666667,34.25,413.9427083333333,34.25L418.109375,34.25" marker-end="url(#arrowhead59)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead59" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
     <g class="edgePath LS-B LE-f" style="opacity: 1;" id="L-B-f"> 
      <path class="path" d="M341.889862804878,111.75L350.4264481707317,115.91666666666667C358.9630335365853,120.08333333333333,376.0362042682927,128.41666666666666,389.77851880081306,132.58333333333334C403.5208333333333,136.75,413.9322916666667,136.75,419.1380208333333,136.75L424.34375,136.75" marker-end="url(#arrowhead60)" style="fill:none"></path> 
      <defs> 
       <marker id="arrowhead60" viewbox="0 0 10 10" refx="9" refy="5" markerunits="strokeWidth" markerwidth="8" markerheight="6" orient="auto"> 
        <path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1; stroke-dasharray: 1, 0;"></path> 
       </marker> 
      </defs> 
     </g> 
    </g> 
    <g class="edgeLabels"> 
     <g class="edgeLabel" transform="" style="opacity: 1;"> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-A-B" class="edgeLabel L-LS-A' L-LE-B"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-c" class="edgeLabel L-LS-B' L-LE-c"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
     <g class="edgeLabel" style="opacity: 1;" transform=""> 
      <g transform="translate(0,0)" class="label"> 
       <rect rx="0" ry="0" width="0" height="0"></rect> 
       <foreignobject width="0" height="0"> 
        <div style="display: inline-block; white-space: nowrap;"> 
         <span id="L-L-B-f" class="edgeLabel L-LS-B' L-LE-f"></span> 
        </div> 
       </foreignobject> 
      </g> 
     </g> 
    </g> 
    <g class="nodes"> 
     <g class="node default" id="flowchart-A-38" transform="translate(83.0546875,85.5)" style="opacity: 1;"> 
      <rect rx="0" ry="0" x="-75.0546875" y="-26.25" width="150.109375" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-65.0546875,-16.25)"> 
        <foreignobject width="130.1171875" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           在EB配置MCAL 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-B-39" transform="translate(288.109375,85.5)"> 
      <rect rx="0" ry="0" x="-80" y="-26.25" width="160" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-70,-16.25)"> 
        <foreignobject width="140" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           使用编译器编译 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-c-41" transform="translate(494.34375,34.25)"> 
      <rect rx="0" ry="0" x="-76.234375" y="-26.25" width="152.46875" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-66.234375,-16.25)"> 
        <foreignobject width="132.48046875" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           在S32DS中调试 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
     <g class="node default" style="opacity: 1;" id="flowchart-f-43" transform="translate(494.34375,136.75)"> 
      <rect rx="0" ry="0" x="-70" y="-26.25" width="140" height="52.5" class="label-container"></rect> 
      <g class="label" transform="translate(0,0)"> 
       <g transform="translate(-60,-16.25)"> 
        <foreignobject width="120" height="32.5"> 
         <div style="display: inline-block; white-space: nowrap;">
           其他调试工具 
         </div> 
        </foreignobject> 
       </g> 
      </g> 
     </g> 
    </g> 
   </g> 
  </g> 
 </svg> 
</div> 
<h2><a id="2__24"></a>2 准备工作</h2> 
<p>  准备工作当然就是下载一些东西喽。需要下载三个东西，分别是NXP官方的调试IDE，配置MCAL的EB tresos以及S32K3的RTD软件包。</p> 
<p>  RTD是什么，Real-time Driver，在S32K1时代，MCAL和SDK是两套不同的软件包，但是到了S32K3，就把两者集成了一下，MCAL和SDK共用一套代码，也就是RTD，意思其实就是这两个软件包里面的底层代码都是一样的。简单的来说，现在K3的MCAL就是在SDK的底层基础上封装了一层符合AUTOSAR标准的接口层，RTD的具体结构框架如下图：<br> <img src="https://images2.imgbox.com/90/84/UHNj9dqD_o.png" alt="在这里插入图片描述"><br>   图中High Level Interface指的就是符合AUTOSAR的MCAL接口层，而Low Level Interface就是传统意义上比较高效的SDK底层接口层。</p> 
<p>  如果有NXP的授权账号，就可以在下面链接下载到这些东西的安装包，登录账号后，点击<strong>MY_NXP</strong>：<br> <img src="https://images2.imgbox.com/48/1a/oZbDHjFU_o.png" alt="在这里插入图片描述"><br>   点开 Software Licensing and support, 找到S32K3 Standard Software，点开就可以看到这三个东西的下载链接了：<br> <img src="https://images2.imgbox.com/fe/b5/a1fsEIHF_o.png" alt=""><br>   ①对于EB tresos的下载，需要记住标记的激活码。<br> <img src="https://images2.imgbox.com/b7/0c/1FZWeAbA_o.png" alt="在这里插入图片描述"><br>   ②对于MCAL（SDK），就下载最新的就好了，这里我选择是1.0.0。<br> <img src="https://images2.imgbox.com/36/34/p9fsv5dD_o.png" alt="在这里插入图片描述"><br>   如果是MCAL开发的话，只需要下载MCAL安装包，如果是SDK开发的话，只需要下载SDK软件包。<br> <img src="https://images2.imgbox.com/cd/78/FWVbgivC_o.png" alt="在这里插入图片描述"><br>   ③对于S32DS，可以看到这个版本需要S32DSV3.4，所以需要下载V3.4版本的S32DS就好了，另外还需要下载S32K3的支持补丁包。<br> <img src="https://images2.imgbox.com/eb/17/vRQDWK0v_o.png" alt="在这里插入图片描述"></p> 
<p>  下面就是一顿漫长的等待，等所有东西都下载好了之后，有如下东西：<br> <img src="https://images2.imgbox.com/c8/a3/8kKPPxOA_o.png" alt="在这里插入图片描述"></p> 
<p>分别是：</p> 
<ol><li>EB Tresos安装包</li><li>S32DS安装包</li><li>MCAL安装包</li><li>K3支持补丁包</li><li>SDK包</li></ol> 
<p>这样所需要的文件就全部下载好了。</p> 
<h2><a id="3__56"></a>3 安装</h2> 
<h3><a id="31_EB_Tresos_57"></a>3.1 安装EB Tresos</h3> 
<p>  下载EB tresos的时候可能会出现浏览器把后缀uip改成了gz的情况，将其修改回uip即可。<br> <img src="https://images2.imgbox.com/a4/91/sdLJRtzL_o.png" alt="在这里插入图片描述"><br>   点击<strong>setup.exe</strong>，一直next即可，非常简单，中间需要记住其安装路径即可，后续会用到。<br> <img src="https://images2.imgbox.com/a0/bf/TESgaLWC_o.png" alt="在这里插入图片描述"><br>   又是一次漫长的等待。安装完成后再点击<strong>EB_Client_License_Administrator_1_4_1_Setup.exe</strong>安装激活工具。之后打开EB激活工具，将之前下载EB时候保存的激活码添加到激活工具中，这样EB tresos就可以正常使用了（注：EB License目前提供的为试用版，不能用于项目正式量产，请联系EB购买正式license）。<br> <img src="https://images2.imgbox.com/5c/0f/izm3GKxf_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_MCAL_67"></a>3.2 安装MCAL</h3> 
<p>  点击SW32K3_RTD_4.4_1.0.0_CD01_D2108.exe安装MCAL（SDK），一直Next，直到这一步，将上一步安装的EB tresos的安装路径填进去，之后就非常简单了。<br> <img src="https://images2.imgbox.com/8c/71/aVZjY33m_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="32_S32DS_70"></a>3.2 安装S32DS</h3> 
<p>  安装S32DS就非常简单了，一直下一步即可，这里不做赘述了。安装完成后还需要安装S32K3的补丁软件支持包，点击<strong>Help-&gt;Install New Software</strong>后将前面下载的K3支持补丁包<strong>Add</strong>后，选中所有后点击<strong>Next</strong>：<br> <img src="https://images2.imgbox.com/06/2f/bpkpvX75_o.png" alt="在这里插入图片描述"><br>   之后就是经过漫长的等待，等待补丁安装完成。<br>   <img src="https://images2.imgbox.com/6a/f0/Np4FPLbi_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="4_SDK_76"></a>4 SDK开发示例</h2> 
<h3><a id="41_SDK_77"></a>4.1 SDK包安装</h3> 
<p>  打开S32DS后，点击<strong>Help-&gt;Install New Software</strong>后将前面下载的SDK软件包<strong>Add</strong>后，选中后点击<strong>Next</strong>：<br> <img src="https://images2.imgbox.com/9f/a8/n4gNOd6G_o.png" alt="在这里插入图片描述"><br>   之后就是经过漫长的等待，等待SDK包安装完成。</p> 
<h3><a id="42_Demo_83"></a>4.2 导入一个Demo</h3> 
<p>  点击<strong>File-&gt;New-&gt;S32DS Project From Example</strong>, 选取一个Demo：<br> <img src="https://images2.imgbox.com/5f/7b/iHDKrAWf_o.png" alt="在这里插入图片描述"><br>   之后打开Demo中的mex文件即可打开S32DS的图形化可配置界面进行相关的配置：<br> <img src="https://images2.imgbox.com/e4/f3/AEGVMG5U_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7a/df/UQVPBq4E_o.png" alt="在这里插入图片描述"><br>   通过这个界面就可以对S32K3的IO，时钟，外设等进行配置，具体细节不再赘述，之后点击Update Code生成代码。<br> <img src="https://images2.imgbox.com/2e/7f/6NaVJArg_o.png" alt="在这里插入图片描述"><br>   之后就是正常的编译，调试了，这里也就不多说啥了，非常简单。<br> <img src="https://images2.imgbox.com/74/3d/cGF9ZEBI_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="43__93"></a>4.3 新建一个工程</h3> 
<p>  也是可以直接新建一个工程，具体操作如下，点击<strong>File-&gt;New-&gt;S32DS Application Project</strong>，选择芯片型号：<br> <img src="https://images2.imgbox.com/e9/5e/gyrRGvjt_o.png" alt="在这里插入图片描述"><br>   点击<strong>Next</strong>：<br> <img src="https://images2.imgbox.com/a0/da/76q8iic4_o.png" alt="在这里插入图片描述"><br>   选择正确的SDK后，点击<strong>Finish</strong>，一个新的工程就创建成功了，接下来就是编译和调试了。</p> 
<p>  可能有些人安装的是最新版本的SDK软件包，发现编译会失败，这种问题一般是因为你安装的工具链与SDK软件包的版本不匹配问题。比如目前最新版RTD1.0.0用的工具链是GCC10.2，但是你安装的工具链还是GCC9.2，如下：<br> <img src="https://images2.imgbox.com/73/eb/MekVz5fU_o.png" alt="在这里插入图片描述"><br>   这个时候就需要更新一下S32DS的工具链就好了，点击<strong>help-&gt;check for update</strong>，然后更新就好了。</p> 
<h2><a id="5_MCAL_105"></a>5 MCAL开发示例</h2> 
<h3><a id="51_MCAL_106"></a>5.1 MCAL软件包组成</h3> 
<p>  找到安装的MCAL(RTD）目录打开，如下：<br> <img src="https://images2.imgbox.com/8a/e5/gVEHpfA3_o.png" alt="在这里插入图片描述"><br>   可以看到有很多外设的例子，点开某一个例子如下：<br> <img src="https://images2.imgbox.com/6d/cc/zLbWi4Nt_o.png" alt="在这里插入图片描述"><br>   各个文件夹所包含的内容描述如下：</p> 
<table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>autosar</td><td>epd文件</td></tr><tr><td>config</td><td>EB配置模板文件</td></tr><tr><td>doc</td><td>当前外设MCAL的Integration Manual和User Manual</td></tr><tr><td>examples</td><td>EB tresos工程Demo和S32DS工程Demo</td></tr><tr><td>generate_PB</td><td>PostBuild版模板源文件和头文件</td></tr><tr><td>generate_PC</td><td>PreCompile版模板源文件和头文件</td></tr><tr><td>generate_swcd</td><td>（个人猜测应该没啥用，我也不知道）</td></tr><tr><td>include</td><td>当前外设MCAL驱动的头文件（<strong>需要移植</strong>）</td></tr><tr><td>META-INF</td><td>（个人猜测应该没啥用，我也不知道）</td></tr><tr><td>src</td><td>当前外设MCAL驱动的源文件（<strong>需要移植</strong>）</td></tr></tbody></table> 
<p>  上面介绍了examples文件夹里面有EB Tresos的工程和S32DS的工程，再打开<code>examples/EBT</code>文件夹的一个例子如下：<br> <img src="https://images2.imgbox.com/9c/af/ZhFfrk8g_o.png" alt="在这里插入图片描述"><br>   各个文件夹所包含的内容描述如下：</p> 
<table><thead><tr><th>名称</th><th>描述</th></tr></thead><tbody><tr><td>debug</td><td>一些劳德巴赫的调试脚本</td></tr><tr><td>generate</td><td>EB tresos生成的代码（<strong>其中的src和include需要移植</strong>）</td></tr><tr><td>include</td><td>MCAL配套Demo的头文件</td></tr><tr><td>out</td><td>编译生成的.o文件以及elf可执行文件</td></tr><tr><td>src</td><td>MCAL配套Demo的源文件</td></tr><tr><td>TresosProject</td><td>EB工程文件</td></tr><tr><td>Makefile</td><td>MCAL配套Demo的Makefile</td></tr><tr><td>project_parameters.mk</td><td>Makefile的包含文件，注意包含一些路径，配置信息</td></tr></tbody></table> 
<p>  再打开其中的<code>TresosProject</code>文件夹：<br> <img src="https://images2.imgbox.com/04/1f/CTC3FDAo_o.png" alt="在这里插入图片描述"><br>   其中<code>config</code>文件夹里面就包含了当前EB工程的xdm配置文件。</p> 
<p>  所以当使用EB配置完所有的外设MCAL后，只需要把以下的文件中的源文件和头文件移植到自己的工程中就可以了，分别是：</p> 
<ol><li>所有使用到外设MCAL的源文件和头文件，</li><li>EB生成源文件和头文件</li></ol> 
<p>  在上面的表格中，需要移植的内容已经加了 “（<strong>需要移植</strong>）” 字样作了标记。</p> 
<h3><a id="52_EBMCAL_152"></a>5.2 通过EB配置MCAL并生成代码</h3> 
<p>  S32K3的MCAL(RTD)为每个软件模块都提供了示例工程，也是在上面所说的examples文件夹中。</p> 
<p>  该文件夹下面有两个文件夹，分别为EBT 及S32DS。其中EBT即为MCAL的工程，其中不仅包含了EB tresos的工程，还包括了配套的demo，下面就以其中ADC的例子做示范。<br> <img src="https://images2.imgbox.com/ef/e1/jAZWNiCZ_o.png" alt="在这里插入图片描述"></p> 
<p>  打开EB，并点击<strong>File-&gt;Import</strong>:<br> <img src="https://images2.imgbox.com/ad/45/4iNENa2k_o.png" alt="在这里插入图片描述"><br>   找到相应的MCAL工程路径，选取自己想要的demo后，点击Finish。<br> <img src="https://images2.imgbox.com/c5/59/KbHraJxM_o.png" alt="在这里插入图片描述"><br>   之后就是对MCAL进行配置，点击生成代码按钮，就可以生成相应的MCAL代码了。<br> <img src="https://images2.imgbox.com/5f/c0/2ZeAR0D6_o.png" alt="在这里插入图片描述"><br>   另外打开项目属性，可以修改生成代码的存储位置，如果需要使用RTD里面的makefile和配套的MCAL demo的话，修改路径的话则无法通过编译。<br> <img src="https://images2.imgbox.com/c0/25/AWzJePoz_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="53_MCAL_Demo_166"></a>5.3 编译配套的MCAL Demo</h3> 
<p>  首先编辑一下project_parameters.mk脚本文件，修改一下其中的相关路径信息，该文件位置如下如所示。<br> <img src="https://images2.imgbox.com/67/9b/6LlhO3Fi_o.png" alt="在这里插入图片描述"><br>   可以按照readme.txt里面的提示修改：‘<br> <img src="https://images2.imgbox.com/60/65/jtOryfYu_o.png" alt="在这里插入图片描述"></p> 
<ol><li>TRESOS_DIR：EB tresos的安装路径</li><li>GCC_DIR：编译器的路径</li><li>PLUGINS_DIR：MCAL的安装路径</li></ol> 
<p>  我修改后如下：<br> <img src="https://images2.imgbox.com/49/9c/EQI9cHkD_o.png" alt="在这里插入图片描述"></p> 
<p>  接下来再把编译工具链路径添加到环境变量中，类似于cygwin或者mingw这些，S32DS安装目录中默认就有，具体路径如下：</p> 
<pre><code class="prism language-c">C<span class="token operator">:</span>\nxp\S32DS<span class="token punctuation">.</span><span class="token number">3.4</span>\S32DS\build_tools\msys32\usr\bin
</code></pre> 
<p>  将其添加至环境变量中：<br> <img src="https://images2.imgbox.com/ff/5c/i6KrhsQM_o.png" alt="在这里插入图片描述"><br>   接下来就可以编译了，打开windows的cmd，将路径切换至示例Demo的路径，我用的是一个ADC的demo，所以如下：<br> <img src="https://images2.imgbox.com/ef/f8/IaBC6wR4_o.png" alt="在这里插入图片描述"><br> 随后执行<br> <code>make build</code><br> 编译代码，最后会在当前工程路径下out文件夹下生成可执行文件main.elf。<br> <img src="https://images2.imgbox.com/68/1a/cdjvkxYi_o.png" alt="在这里插入图片描述"><br>   <strong>注意</strong>：如果你在该工程的基础上增加了新的模块，比如我在上述工程中增加了CAN模块，那么为了使得编译通过，我们还需要修改一下project_parameters.mk脚本文件，将CAN的MCAL源文件和头文件的路径添加进编译路径MCAL_MODULE_LIST中，如下：</p> 
<pre><code>MCAL_MODULE_LIST := Base CanIf Rte Platform Os Mcu EcuC Det EcuM  Adc Resource Port Dio Lcu Mcl Can
</code></pre> 
<h3><a id="54_S32DSPE_198"></a>5.4 在S32DS中使用PE仿真器调试</h3> 
<p>  接下来就是使用S32DS来调试在上一步编译Demo生成的可执行文件了。</p> 
<p>  使用PE仿真器连接S32K3后，打开S32DS后，点击<strong>Debug Configurations</strong>：<br> <img src="https://images2.imgbox.com/c6/39/9AjMdOjc_o.png" alt="在这里插入图片描述"></p> 
<p>  然后安装下图提示选择PE interface，新建一个调试工程：<br> <img src="https://images2.imgbox.com/b8/4d/iWqLfMgw_o.png" alt="在这里插入图片描述"><br>   按照下图进行设置：<br> <img src="https://images2.imgbox.com/80/a4/OHzSMr7l_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/00/6a/CIp70sHn_o.png" alt="在这里插入图片描述"><br>   其中<strong>Executable</strong>处应填写：</p> 
<pre><code class="prism language-bash"><span class="token variable">${S32DS_K3_ARM32_TOOLCHAIN_DIR}</span>/bin/<span class="token variable">${arm32_cross_prefix}</span>gdb<span class="token variable">${arm32_cross_suffix}</span>
</code></pre> 
<p>  随后点击<strong>Debug</strong>即可进行调试。<br> <img src="https://images2.imgbox.com/1b/07/FGnE2NIl_o.png" alt="在这里插入图片描述"><br>   按照以上的步骤即可在S32DS调试MCAL配套的Demo了。</p> 
<h3><a id="55_Lauterbach_220"></a>5.5 使用Lauterbach调试</h3> 
<p>  接下来再使用Lauterbach调试一下上面编译生成的可执行文件。</p> 
<p>  使用Lauterbach进行调试的话，则还需要修改一下<strong>config.t32</strong>文件，该文件的路径如下所示：<br> <img src="https://images2.imgbox.com/79/50/pvBYFygz_o.png" alt="在这里插入图片描述"><br> 将其中的<strong>SYS</strong>变量修改成Lauterbach的安装路径, 我修改后如下：<br> <img src="https://images2.imgbox.com/cf/ab/G5wo58Be_o.png" alt="在这里插入图片描述"><br>   随后就是打开Lauterbach，使用命令连接上S32K3后，再运行脚本<strong>run.cmm</strong>，脚本路径如下图所示：<br> <img src="https://images2.imgbox.com/ed/75/4cnCGUjD_o.png" alt="在这里插入图片描述"><br>   随后就可以正常调试RTD里面MCAL配套的Demo了。</p> 
<h2><a id="end_230"></a>end</h2>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/00fcbead217c040beb7713d5e3935a3f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【python】tensorrt8版本下的onnx转tensorrt engine</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f7535a9970432000127d480f96080b0d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">常用函数detect_image/predict</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>