<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vsomeip â€”â€” 10åˆ†é’Ÿå¿«é€Ÿäº†è§£ vsomeip ï¼ˆvsomeip wiki æ–‡æ¡£ç¿»è¯‘ï¼‰ - èœé¸Ÿç¨‹åºå‘˜åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vsomeip â€”â€” 10åˆ†é’Ÿå¿«é€Ÿäº†è§£ vsomeip ï¼ˆvsomeip wiki æ–‡æ¡£ç¿»è¯‘ï¼‰" />
<meta property="og:description" content="æ–‡æ¡£å£°æ˜ï¼š
ä»¥ä¸‹èµ„æ–™å‡å±äºæœ¬äººåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­äº§å‡ºçš„å­¦ä¹ ç¬”è®°ï¼Œå¦‚æœé”™è¯¯æˆ–è€…é—æ¼ä¹‹å¤„ï¼Œè¯·å¤šå¤šæŒ‡æ­£ã€‚å¹¶ä¸”è¯¥æ–‡æ¡£åœ¨åæœŸä¼šéšç€å­¦ä¹ çš„æ·±å…¥ä¸æ–­è¡¥å……å®Œå–„ã€‚æ„Ÿè°¢å„ä½çš„å‚è€ƒæŸ¥çœ‹ã€‚
ç¬”è®°èµ„æ–™ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè½¬è½½è¯·æ ‡æ˜å‡ºå¤„ï¼Œè°¢è°¢é…åˆã€‚
å¦‚æœå­˜åœ¨ç›¸å…³çŸ¥è¯†ç‚¹çš„é—æ¼ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œçœ‹åˆ°åå°†åœ¨ç¬¬ä¸€æ—¶é—´æ›´æ–°ã€‚
ä½œè€…ï¼šAliven888
vsomeip in 10 minutes è¿™ç¯‡æ–‡ç« æ˜¯å¯¹ vsomeip å®˜æ–¹ wiki æ–‡æ¡£çš„ä¸€ä¸ªç¿»è¯‘ã€‚å±äºä¸ªäººå­¦ä¹ å¼€å‘ç¬”è®°çš„ä¸€ä¸ªè®°å½•ã€‚
SOME/IP ç®€ä»‹ SOME/IP æ˜¯ Scalable service-Oriented middleware over IP çš„ç¼©å†™ã€‚ è¯¥ä¸­é—´ä»¶ä¸“ä¸ºå…¸å‹çš„æ±½è½¦ç”¨ä¾‹è€Œè®¾è®¡ï¼Œå¹¶ä¸ AUTOSAR å…¼å®¹ï¼ˆè‡³å°‘åœ¨æœ‰çº¿æ ¼å¼çº§åˆ«ä¸Šï¼‰ã€‚ å¯åœ¨ SOME/IP ä¸Šè·å¾—å¯å…¬å¼€è®¿é—®çš„è§„èŒƒã€‚ åœ¨è¿™ä¸ª wiki ä¸­ï¼Œæˆ‘ä»¬ä¸æƒ³è¿›ä¸€æ­¥æ·±å…¥æ¢è®¨å¦ä¸€ä¸ªä¸­é—´ä»¶è§„èŒƒçš„åŸå› ï¼Œè€Œæ˜¯æƒ³å¯¹ SOME/IP è§„èŒƒçš„åŸºæœ¬ç»“æ„åŠå…¶å¼€æºå®ç° vsomeip ç»™å‡ºä¸€ä¸ªç²—ç•¥çš„æ¦‚è¿°ï¼Œè€Œä¸è¦æ±‚ä»»ä½•å®Œæ•´æ€§ã€‚
è®©æˆ‘ä»¬ä» SOME/IP è§„èŒƒçš„ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†å¼€å§‹ï¼š
On-wire formatProtocolService Discovery SOME/IP On-Wire Format åŸåˆ™ä¸Šï¼ŒSOME/IP é€šä¿¡ç”±è®¾å¤‡æˆ–è®¢é˜…è€…ä¹‹é—´é€šè¿‡ IP å‘é€çš„æ¶ˆæ¯ç»„æˆã€‚ è¯¦è§å¦‚ä¸‹å›¾ç¤ºï¼š
è¿™é‡Œä½ ä¼šçœ‹åˆ°ä¸¤ä¸ªè®¾å¤‡ï¼ˆA å’Œ Bï¼‰ï¼› è®¾å¤‡ A å‘ B å‘é€ä¸€æ¡ SOME/IP æ¶ˆæ¯ï¼Œå¹¶æ”¶åˆ°ä¸€æ¡å›å¤æ¶ˆæ¯ã€‚
åº•å±‚ä¼ è¾“åè®®å¯ä»¥æ˜¯ TCP æˆ– UDPï¼› å¯¹äºæ¶ˆæ¯æœ¬èº«ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚
ç°åœ¨æˆ‘ä»¬å‡è®¾è®¾å¤‡ B ä¸Šæ­£åœ¨è¿è¡Œä¸€ä¸ªæœåŠ¡ï¼Œè¯¥æœåŠ¡æä¾›äº†ä¸€ä¸ªç”±è¯¥æ¶ˆæ¯ä»è®¾å¤‡ A è°ƒç”¨çš„å‡½æ•°ï¼Œè€Œè¿”å›çš„æ¶ˆæ¯å°±æ˜¯ç­”æ¡ˆã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7d2e55a323ee396d05678b820fcecec6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-03-11T14:41:50+08:00" />
<meta property="article:modified_time" content="2022-03-11T14:41:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="èœé¸Ÿç¨‹åºå‘˜åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">èœé¸Ÿç¨‹åºå‘˜åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vsomeip â€”â€” 10åˆ†é’Ÿå¿«é€Ÿäº†è§£ vsomeip ï¼ˆvsomeip wiki æ–‡æ¡£ç¿»è¯‘ï¼‰</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>æ–‡æ¡£å£°æ˜ï¼š<br> ä»¥ä¸‹èµ„æ–™å‡å±äºæœ¬äººåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­äº§å‡ºçš„å­¦ä¹ ç¬”è®°ï¼Œå¦‚æœé”™è¯¯æˆ–è€…é—æ¼ä¹‹å¤„ï¼Œè¯·å¤šå¤šæŒ‡æ­£ã€‚å¹¶ä¸”è¯¥æ–‡æ¡£åœ¨åæœŸä¼šéšç€å­¦ä¹ çš„æ·±å…¥ä¸æ–­è¡¥å……å®Œå–„ã€‚æ„Ÿè°¢å„ä½çš„å‚è€ƒæŸ¥çœ‹ã€‚</p> 
 <hr> 
 <p>ç¬”è®°èµ„æ–™ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè½¬è½½è¯·æ ‡æ˜å‡ºå¤„ï¼Œè°¢è°¢é…åˆã€‚<br> å¦‚æœå­˜åœ¨ç›¸å…³çŸ¥è¯†ç‚¹çš„é—æ¼ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œçœ‹åˆ°åå°†åœ¨ç¬¬ä¸€æ—¶é—´æ›´æ–°ã€‚<br> ä½œè€…ï¼šAliven888</p> 
</blockquote> 
<h3><a id="vsomeip_in_10_minutes_7"></a>vsomeip in 10 minutes</h3> 
<p>â€ƒ è¿™ç¯‡æ–‡ç« æ˜¯å¯¹ vsomeip å®˜æ–¹ wiki æ–‡æ¡£çš„ä¸€ä¸ªç¿»è¯‘ã€‚å±äºä¸ªäººå­¦ä¹ å¼€å‘ç¬”è®°çš„ä¸€ä¸ªè®°å½•ã€‚</p> 
<h4><a id="SOMEIP__10"></a>SOME/IP ç®€ä»‹</h4> 
<p>â€ƒ SOME/IP æ˜¯ <code>Scalable service-Oriented middleware over IP</code> çš„ç¼©å†™ã€‚ è¯¥ä¸­é—´ä»¶ä¸“ä¸ºå…¸å‹çš„æ±½è½¦ç”¨ä¾‹è€Œè®¾è®¡ï¼Œå¹¶ä¸ AUTOSAR å…¼å®¹ï¼ˆè‡³å°‘åœ¨æœ‰çº¿æ ¼å¼çº§åˆ«ä¸Šï¼‰ã€‚ å¯åœ¨ <a href="http://some-ip.com/" rel="nofollow">SOME/IP</a> ä¸Šè·å¾—å¯å…¬å¼€è®¿é—®çš„è§„èŒƒã€‚ åœ¨è¿™ä¸ª wiki ä¸­ï¼Œæˆ‘ä»¬ä¸æƒ³è¿›ä¸€æ­¥æ·±å…¥æ¢è®¨å¦ä¸€ä¸ªä¸­é—´ä»¶è§„èŒƒçš„åŸå› ï¼Œè€Œæ˜¯æƒ³å¯¹ SOME/IP è§„èŒƒçš„åŸºæœ¬ç»“æ„åŠå…¶å¼€æºå®ç° vsomeip ç»™å‡ºä¸€ä¸ªç²—ç•¥çš„æ¦‚è¿°ï¼Œè€Œä¸è¦æ±‚ä»»ä½•å®Œæ•´æ€§ã€‚</p> 
<p>è®©æˆ‘ä»¬ä» SOME/IP è§„èŒƒçš„ä¸‰ä¸ªä¸»è¦éƒ¨åˆ†å¼€å§‹ï¼š</p> 
<ul><li>On-wire format</li><li>Protocol</li><li>Service Discovery</li></ul> 
<h5><a id="SOMEIP_OnWire_Format_19"></a>SOME/IP On-Wire Format</h5> 
<p>â€ƒ åŸåˆ™ä¸Šï¼ŒSOME/IP é€šä¿¡ç”±è®¾å¤‡æˆ–è®¢é˜…è€…ä¹‹é—´é€šè¿‡ IP å‘é€çš„æ¶ˆæ¯ç»„æˆã€‚ è¯¦è§å¦‚ä¸‹å›¾ç¤ºï¼š</p> 
<p><img src="https://images2.imgbox.com/85/c4/9tglE00P_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> â€ƒ è¿™é‡Œä½ ä¼šçœ‹åˆ°ä¸¤ä¸ªè®¾å¤‡ï¼ˆA å’Œ Bï¼‰ï¼› è®¾å¤‡ A å‘ B å‘é€ä¸€æ¡ SOME/IP æ¶ˆæ¯ï¼Œå¹¶æ”¶åˆ°ä¸€æ¡å›å¤æ¶ˆæ¯ã€‚</p> 
<p>â€ƒ åº•å±‚ä¼ è¾“åè®®å¯ä»¥æ˜¯ TCP æˆ– UDPï¼› å¯¹äºæ¶ˆæ¯æœ¬èº«ï¼Œè¿™æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚</p> 
<p>â€ƒç°åœ¨æˆ‘ä»¬å‡è®¾è®¾å¤‡ B ä¸Šæ­£åœ¨è¿è¡Œä¸€ä¸ªæœåŠ¡ï¼Œè¯¥æœåŠ¡æä¾›äº†ä¸€ä¸ªç”±è¯¥æ¶ˆæ¯ä»è®¾å¤‡ A è°ƒç”¨çš„å‡½æ•°ï¼Œè€Œè¿”å›çš„æ¶ˆæ¯å°±æ˜¯ç­”æ¡ˆã€‚</p> 
<p>â€ƒ SOME/IP çš„æ¶ˆæ¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š <code>header</code> å’Œ <code>payload</code>ã€‚</p> 
<p>â€ƒ åœ¨å›¾ç‰‡ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ° <code>header</code> ä¸»è¦ç”±æ ‡è¯†ç¬¦ç»„æˆï¼š</p> 
<ul><li>Service ID: unique identifier for each service</li><li>Method ID: 0-32767 for methods, 32768-65535 for events</li><li>Length: length of payload in byte (covers also the next IDs, that means 8 additional bytes)</li><li>Client ID: unique identifier for the calling client inside the ECU; has to be unique in the overall vehicle</li><li>Session ID: identifier for session handling; has to be incremented for each call</li><li>Protocol Version: 0x01</li><li>Interface Version: major version of the service interface</li><li>Message Type:<br> â€“ REQUEST (0x00) A request expecting a response (even void)<br> â€“ REQUEST_NO_RETURN (0x01) A fire&amp;forget request<br> â€“ NOTIFICATION (0x02) A request of a notification/event callback expecting no response<br> â€“ RESPONSE (0x80) The response message</li><li>Return Code:<br> â€“ E_OK (0x00) No error occurred<br> â€“ E_NOT_OK (0x01) An unspecified error occurred<br> â€“ E_WRONG_INTERFACE_VERSION (0x08) Interface version mismatch<br> â€“ E_MALFORMED_MESSAGE (0x09) Deserialization error, so that payload cannot be deseria-lized<br> â€“ E_WRONG_MESSAGE_TYPE (0x0A) An unexpected message type was received (e.g. RE-QUEST_NO_RETURN for a method defined as RE-QUEST)</li></ul> 
<p>â€ƒ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå®¢æˆ·ç«¯å·²è®¢é˜…çš„äº‹ä»¶ï¼Œæ­£å¸¸å‡½æ•°çš„è°ƒç”¨å’Œé€šçŸ¥æ¶ˆæ¯éƒ½æœ‰â€œè¯·æ±‚â€å’Œâ€œå“åº”â€ã€‚ é”™è¯¯æŠ¥å‘Šä¸ºæ­£å¸¸å“åº”æˆ–é€šçŸ¥ï¼Œå¹¶ä¸”ä¼šè¿”å›é”™è¯¯ä»£ç ã€‚</p> 
<p>â€ƒ payload åŒ…å«åºåˆ—åŒ–æ•°æ®ã€‚ å¦‚ä¸Šå›¾ç¤ºçš„ä¼ è¾“æ•°æ®ç»“æ„ï¼Œåªæœ‰åŸºæœ¬æ•°æ®ç±»å‹çš„åµŒå¥—ç»“æ„ä¸‹çš„ç®€å•åºåˆ—åŒ–ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç»“æ„å…ƒç´ åªæ˜¯è¢«å±•å¹³ï¼Œç„¶åå®ƒä»¬è¢«ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å†™å…¥ payload ä¸­ã€‚</p> 
<h5><a id="SOMEIP_Protocol_58"></a>SOME/IP Protocol</h5> 
<p>â€ƒ åœ¨æœ¬èŠ‚ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç‚¹å¾ˆé‡è¦ï¼Œç°åœ¨å°†å¯¹å…¶è¿›è¡Œæè¿°ï¼š</p> 
<ul><li>ä¼ è¾“ç»‘å®šï¼ˆUDP å’Œ TCPï¼‰</li><li>åŸºæœ¬çš„é€šä¿¡æ¨¡å¼å‘å¸ƒ/è®¢é˜…å’Œè¯·æ±‚/å“åº”ã€‚</li></ul> 
<p>â€ƒ å¦‚ä¸Šæ‰€è¿°ï¼Œåº•å±‚ä¼ è¾“åè®®å¯ä»¥æ˜¯ UDP æˆ– TCPã€‚ åœ¨ UDP æƒ…å†µä¸‹ï¼ŒSOME/IP æ¶ˆæ¯æ²¡æœ‰åˆ†æ®µï¼› ä¸€ä¸ª UDP æ•°æ®åŒ…ä¸­å¯èƒ½åŒ…å«å¤šæ¡æ¶ˆæ¯ï¼Œä½†ä¸€æ¡æ¶ˆæ¯çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ UDP æ•°æ®åŒ…çš„é•¿åº¦ï¼ˆæœ€å¤š 1400 å­—èŠ‚ï¼‰ã€‚ æ›´å¤§çš„æ¶ˆæ¯å¿…é¡»é€šè¿‡ TCP ä¼ è¾“ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½¿ç”¨äº† TCP çš„æ‰€æœ‰å¥å£®æ€§ç‰¹å¾ã€‚ å¦‚æœ TCP æµä¸­å‘ç”ŸåŒæ­¥é”™è¯¯ï¼ŒSOME/IP è§„èŒƒå…è®¸æ‰€è°“çš„ <code>magic cookies</code> ä»¥ä¾¿å†æ¬¡æ‰¾åˆ°ä¸‹ä¸€æ¡æ¶ˆæ¯çš„å¼€å¤´ã€‚</p> 
<p>â€ƒ è¯·æ³¨æ„ï¼Œå¿…é¡»å®ä¾‹åŒ–æœåŠ¡æ¥å£ï¼Œå¹¶ä¸”å› ä¸ºå¯èƒ½å­˜åœ¨åŒä¸€æ¥å£çš„å¤šä¸ªå®ä¾‹ï¼Œæ‰€ä»¥å¿…é¡»ä¸ºå®šä¹‰çš„å®ä¾‹æ·»åŠ ä¸€ä¸ªé™„åŠ æ ‡è¯†ç¬¦ï¼ˆinstance IDï¼‰ã€‚ ä½†æ˜¯ï¼Œinstance ID ä¸æ˜¯ SOME/IP æ¶ˆæ¯çš„æ ‡å¤´çš„ä¸€éƒ¨åˆ†ã€‚ å®ä¾‹é€šè¿‡ä¼ è¾“åè®®çš„ç«¯å£å·è¯†åˆ«ï¼› è¿™æ„å‘³ç€ä¸å¯èƒ½åœ¨åŒä¸€ç«¯å£ä¸Šæä¾›åŒä¸€æ¥å£çš„å¤šä¸ªå®ä¾‹ã€‚</p> 
<p>ç°åœ¨è¯·çœ‹ä¸‹å›¾ï¼Œå®ƒæ˜¾ç¤ºäº†åŸºæœ¬çš„ SOME/IP é€šä¿¡æ¨¡å¼ï¼š</p> 
<p><img src="https://images2.imgbox.com/10/18/ALYNN9BP_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>â€ƒ é™¤äº†ç”¨äºè¿œç¨‹è¿‡ç¨‹è°ƒç”¨çš„æ ‡å‡† <code>è¯·æ±‚-å“åº”</code> æœºåˆ¶ä¹‹å¤–ï¼Œè¿˜æœ‰ç”¨äºäº‹ä»¶çš„ <code>å‘å¸ƒ-è®¢é˜…</code> æ¨¡å¼ã€‚ è¯·æ³¨æ„ï¼ŒSOME/IP åè®®ä¸­çš„äº‹ä»¶æ€»æ˜¯åˆ†ç»„åœ¨ä¸€ä¸ªäº‹ä»¶ç»„ä¸­ï¼› å› æ­¤åªèƒ½è®¢é˜…äº‹ä»¶ç»„è€Œä¸æ˜¯äº‹ä»¶æœ¬èº«ã€‚</p> 
<p>â€ƒ SOME/IP è§„èŒƒä¹Ÿæœ‰ <code>fields</code>ï¼› åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>setter/getter</code> æ–¹æ³•éµå¾ª <code>è¯·æ±‚-å“åº”</code> æ¨¡å¼ï¼Œå¹¶ä¸”æ›´æ”¹çš„é€šçŸ¥æ¶ˆæ¯æ˜¯äº‹ä»¶ã€‚ è®¢é˜…æœ¬èº«æ˜¯é€šè¿‡ SOME/IP æœåŠ¡å‘ç°å®Œæˆçš„ã€‚</p> 
<h5><a id="SOMEIP_Service_discovery_77"></a>SOME/IP Service discovery</h5> 
<p>â€ƒ <code>SOME/IP</code> æœåŠ¡å‘ç°ç”¨äºå®šä½æœåŠ¡å®ä¾‹å¹¶æ£€æµ‹æœåŠ¡å®ä¾‹æ˜¯å¦æ­£åœ¨è¿è¡Œä»¥åŠå®ç°å‘å¸ƒ/è®¢é˜…å¤„ç†ã€‚ è¿™ä¸»è¦æ˜¯é€šè¿‡æ‰€è°“çš„æŠ¥ä»·æ¶ˆæ¯æ¥å®Œæˆçš„ï¼› åŒæ—¶ä¹Ÿæ„å‘³ç€æ¯ä¸ªè®¾å¤‡éƒ½å¹¿æ’­ï¼ˆå¤šæ’­ï¼‰æ¶ˆæ¯ï¼Œå¹¶åœ¨å¹¿æ’­çš„æ¶ˆæ¯ä¸­åŒ…å«è¯¥è®¾å¤‡æä¾›çš„æ‰€æœ‰æœåŠ¡ä¿¡æ¯ã€‚</p> 
<p>â€ƒ <code>SOME/IP</code> SD æ¶ˆæ¯é€šè¿‡ UDP å‘é€ã€‚</p> 
<p>â€ƒ å¦‚æœå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºéœ€è¦æœåŠ¡ä½†ç›®å‰æ²¡æœ‰æä¾›ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥å‘é€<code>æŸ¥æ‰¾æ¶ˆæ¯ï¼ˆfind messagesï¼‰</code>ã€‚ å…¶ä»– <code>SOME/IP</code> SD æ¶ˆæ¯å¯ç”¨äºå‘å¸ƒæˆ–è®¢é˜…äº‹ä»¶ç»„ã€‚</p> 
<p><strong>SOME/IP SD æ¶ˆæ¯çš„ç»“æ„æ˜¾ç¤ºå¦‚ä¸‹ï¼š</strong></p> 
<p><img src="https://images2.imgbox.com/12/20/uViKNL6R_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>â€ƒ è¿™åº”è¯¥è¶³å¤Ÿå¼€å§‹äº†ã€‚ æ›´å¤šç»†èŠ‚å°†åœ¨åé¢çš„ç¤ºä¾‹ä¸­è®¨è®ºï¼Œæˆ–è€…å¯ä»¥åœ¨è¯´æ˜ä¹¦ä¸­é˜…è¯»ã€‚</p> 
<h4><a id="vsomeip__91"></a>vsomeip ç®€è¿°</h4> 
<p>â€ƒ åœ¨æˆ‘ä»¬å¼€å§‹å®ç°ä»‹ç»ç¤ºä¾‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç®€è¦äº†è§£ä¸€ä¸‹ <code>SOME/IP</code> çš„ <code>GENIVI</code>å®ç°çš„åŸºæœ¬ç»“æ„ï¼Œå³<code>vsomeip</code>ã€‚</p> 
<p><img src="https://images2.imgbox.com/97/de/ha0Cvh8l_o.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br> â€ƒ å¦‚å›¾æ‰€ç¤ºï¼Œ<code>vsomeip</code> ä¸ä»…æ¶µç›–äº†è®¾å¤‡ä¹‹é—´çš„ <code>SOME/IP</code> é€šä¿¡ï¼ˆå¤–éƒ¨é€šä¿¡ï¼‰ï¼Œè¿˜æ¶µç›–äº†å†…éƒ¨è¿›ç¨‹é—´é€šä¿¡ã€‚ ä¸¤ä¸ªè®¾å¤‡é€šè¿‡æ‰€è°“çš„é€šä¿¡ç«¯ç‚¹è¿›è¡Œé€šä¿¡ï¼Œè¿™äº›ç«¯ç‚¹å°†ä½¿ç”¨çš„ä¼ è¾“åè®®<code>ï¼ˆTCP æˆ– UDPï¼‰</code>åŠå…¶å‚æ•°ç¡®å®šä¸ºç«¯å£å·æˆ–å…¶ä»–å‚æ•°ã€‚ æ‰€æœ‰è¿™äº›å‚æ•°éƒ½æ˜¯å¯ä»¥åœ¨ <code>vsomeip</code> é…ç½®æ–‡ä»¶ä¸­è®¾ç½®çš„é…ç½®å‚æ•°<code>ï¼ˆjson æ–‡ä»¶ï¼Œè¯·å‚é˜… vsomeip ç”¨æˆ·æŒ‡å—ï¼‰</code>ã€‚ å†…éƒ¨é€šä¿¡æ˜¯é€šè¿‡æœ¬åœ°ç«¯ç‚¹å®Œæˆçš„ï¼Œè¿™äº›ç«¯ç‚¹ç”± <code>unix</code> åŸŸå¥—æ¥å­—ä½¿ç”¨<code>Boost.Asio</code>åº“å®ç°ã€‚ ç”±äºè¿™ç§å†…éƒ¨é€šä¿¡ä¸æ˜¯é€šè¿‡ä¸­å¤®ç»„ä»¶ï¼ˆä¾‹å¦‚ï¼Œåƒ D-Bus å®ˆæŠ¤ç¨‹åºï¼‰è·¯ç”±çš„ï¼Œå› æ­¤å®ƒéå¸¸å¿«ã€‚</p> 
<p>â€ƒ <code>vsomeip</code> ä¸­å¤®è·¯ç”±ç®¡ç†å™¨ä»…åœ¨å¿…é¡»å°†æ¶ˆæ¯å‘é€åˆ°å¤–éƒ¨è®¾å¤‡æ—¶æ‰è·å–æ¶ˆæ¯ï¼Œå¹¶ä¸”ä»–åˆ†å‘æ¥è‡ªå¤–éƒ¨çš„æ¶ˆæ¯ã€‚ æ¯å°è®¾å¤‡åªæœ‰ä¸€ä¸ªè·¯ç”±ç®¡ç†å™¨ï¼› å¦‚æœæœªé…ç½®ä»»ä½•å†…å®¹ï¼Œåˆ™ç¬¬ä¸€ä¸ªè¿è¡Œçš„ <code>vsomeip</code> åº”ç”¨ç¨‹åºä¹Ÿä¼šå¯åŠ¨è·¯ç”±ç®¡ç†å™¨ã€‚</p> 
<p>â€ƒ â—ï¸ <code>vsomeip</code> æ²¡æœ‰å®ç°æ•°æ®ç»“æ„çš„åºåˆ—åŒ–ï¼ <code>CommonAPI</code> çš„ <code>SOME/IP</code> ç»‘å®šæ¶µç›–äº†è¿™ä¸€ç‚¹ã€‚<code>vsomeip</code>ä»…æ¶µç›– <code>SOME/IP</code>åè®®å’ŒæœåŠ¡å‘ç°ã€‚</p> 
<p>â€ƒ ç°åœ¨è¿™æ˜¯å¯¹ <code>SOME/IP</code>å’Œ <code>vsomeip</code> çš„éå¸¸ã€éå¸¸ç®€çŸ­çš„æ¦‚è¿°ã€‚ ä½†æ˜¯å¯¹äºç¬¬ä¸€æ¬¡å¼€å§‹å°±è¶³å¤Ÿäº†ï¼› æ›´å¤šç»†èŠ‚åœ¨ç¤ºä¾‹ä¸­ç›´æ¥è§£é‡Šã€‚</p> 
<h4><a id="Preparation__Prerequisites___103"></a>Preparation / Prerequisitesï¼ˆå‡†å¤‡ / å…ˆå†³æ¡ä»¶ï¼‰</h4> 
<p>â€ƒ å¦‚å‰æ‰€è¿°ï¼Œ<code>vsomeip</code> éœ€è¦ <code>Boost.Asio</code> åº“ï¼Œå› æ­¤è¯·ç¡®ä¿æ‚¨å·²åœ¨ç³»ç»Ÿä¸Šå®‰è£…äº† <code>BOOSTï¼ˆè‡³å°‘ 1.55 ç‰ˆï¼‰</code>ã€‚ æˆåŠŸå®‰è£… <code>Boost</code> åï¼Œæ‚¨å¯ä»¥åƒå¾€å¸¸ä¸€æ ·è½»æ¾æ„å»º <code>vsomeip</code>ï¼š</p> 
<pre><code class="prism language-bash">$ <span class="token function">cd</span> vsomeip
<span class="token operator">&lt;</span>.<span class="token operator">&gt;</span>/vsomeip$ <span class="token function">mkdir</span> build
<span class="token operator">&lt;</span>.<span class="token operator">&gt;</span>/vsomeip$ <span class="token function">cd</span> build
<span class="token operator">&lt;</span>.<span class="token operator">&gt;</span>/vsomeip/build$ cmake <span class="token punctuation">..</span>
<span class="token operator">&lt;</span>.<span class="token operator">&gt;</span>/vsomeip/build$ <span class="token function">make</span>
</code></pre> 
<p>This works, but in order to avoid some special problems afterwards I recommend to add at least one parameter to your CMake call:</p> 
<p>â€ƒ è™½ç„¶è¿™æ ·å°±æå®šäº†ï¼Œä½†ä¸ºäº†é¿å…ä¹‹åå‡ºç°ä¸€äº›ç‰¹æ®Šé—®é¢˜ï¼Œæˆ‘å»ºè®®åœ¨æ‚¨çš„ CMake è°ƒç”¨ä¸­æ·»åŠ è‡³å°‘ä¸€ä¸ªå‚æ•°ï¼š</p> 
<pre><code class="prism language-bash"><span class="token operator">&gt;</span> cmake -DENABLE_SIGNAL_HANDLING<span class="token operator">=</span>1 <span class="token punctuation">..</span>
</code></pre> 
<p>â€ƒ æ­¤å‚æ•°ç¡®ä¿æ‚¨å¯ä»¥æ¯«æ— é—®é¢˜åœ°ç»ˆæ­¢æ‚¨çš„ vsomeip åº”ç”¨ç¨‹åº<code>ï¼ˆå¦åˆ™å¯èƒ½æ˜¯å½“æ‚¨ä½¿ç”¨ Ctrl-C åœæ­¢åº”ç”¨ç¨‹åºæ—¶ï¼Œå…±äº«å†…å­˜æ®µ /dev/shm/vsomeip æœªæ­£ç¡®åˆ é™¤ï¼‰</code>ã€‚</p> 
  
<h4><a id="First_Application_126"></a>First Applicationï¼ˆé¦–æ¬¡ç”³è¯·ï¼‰</h4> 
<p>â€ƒ åˆ›å»ºç¬¬ä¸€ä¸ª <code>vsomeip</code> ç¨‹åºï¼Œæˆ‘ä»¬ç§°å®ƒä¸º <code>service-example</code>:</p> 
<pre><code class="prism language-cpp"><span class="token comment">/*service-example.cpp*/</span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vsomeip/vsomeip.hpp&gt;</span></span>

std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span> vsomeip<span class="token operator">::</span>application <span class="token operator">&gt;</span> app<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    app <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_application</span><span class="token punctuation">(</span><span class="token string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>â€ƒ è¿™å¾ˆå®¹æ˜“ï¼šæ‚¨å¿…é¡»é¦–å…ˆåˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºå¯¹è±¡ï¼Œç„¶ååˆå§‹åŒ–å¹¶å¯åŠ¨å®ƒã€‚ åˆ›å»º <code>vsomeip</code> åº”ç”¨ç¨‹åºåå¿…é¡»é¦–å…ˆè°ƒç”¨ <em>init</em> æ–¹æ³•ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼š</p> 
<ul><li>Loading the configuration ï¼ˆåŠ è½½é…ç½®ï¼‰</li><li>Determining routing configuration and initialization of the routing ï¼ˆç¡®å®šè·¯ç”±é…ç½®å’Œè·¯ç”±åˆå§‹åŒ–ï¼‰</li><li>Installing signal handlers ï¼ˆå®‰è£…ä¿¡å·å¤„ç†ç¨‹åºï¼‰</li></ul> 
<p>The start method has to be called after <em>init</em> in order to start the message processing. The received messages are processed via sockets and registered callbacks are used to pass them to the user application.</p> 
<p>â€ƒ ä¸ºäº†å¯åŠ¨æ¶ˆæ¯å¤„ç†ï¼Œå¿…é¡»åœ¨ <em>init</em> ä¹‹åè°ƒç”¨ <code>start</code> æ–¹æ³•ã€‚ æ¥æ”¶åˆ°çš„æ¶ˆæ¯é€šè¿‡å¥—æ¥å­—è¿›è¡Œå¤„ç†ï¼Œå¹¶ä½¿ç”¨æ³¨å†Œçš„å›è°ƒå°†å®ƒä»¬ä¼ é€’ç»™ç”¨æˆ·åº”ç”¨ç¨‹åºã€‚</p> 
<p>READY ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘ğŸ‘</p> 
<p>â€ƒ ä¸ºäº†æ„å»ºæˆ‘ä»¬çš„ç¨‹åºï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ª<code>CMake</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å¦‚ä¸‹ï¼š</p> 
<p><em>CMakeLists.txt (Example)</em></p> 
<pre><code class="prism language-cmake">cmake_minimum_required (VERSION 2.8)

set (CMAKE_CXX_FLAGS "-g -std=c++0x")

find_package (vsomeip 2.6.0 REQUIRED)
find_package( Boost 1.55 COMPONENTS system thread log REQUIRED )

include_directories (
    ${Boost_INCLUDE_DIR}
    ${VSOMEIP_INCLUDE_DIRS}
)

add_executable(service-example ../src/service-example.cpp)
target_link_libraries(service-example vsomeip ${Boost_LIBRARIES})
</code></pre> 
<p>â€ƒ åƒå¾€å¸¸ä¸€æ ·ç»§ç»­ï¼ˆåˆ›å»ºæ„å»ºç›®å½•ï¼Œè¿è¡Œ <code>CMake</code> å¹¶æ„å»ºï¼‰ã€‚ ç„¶åå¯åŠ¨å®ƒï¼ˆ<code>service-example</code>ï¼‰ã€‚ æ‚¨åº”è¯¥åœ¨æ§åˆ¶å°ä¸Šè·å¾—ä»¥ä¸‹è¾“å‡ºï¼ˆæˆ–ç±»ä¼¼è¾“å‡ºï¼‰ï¼š</p> 
<pre><code class="prism language-bash">2017-03-20 10:38:20.885390 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Parsed vsomeip configuration <span class="token keyword">in</span> 0ms
2017-03-20 10:38:20.889637 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Default configuration module loaded.
2017-03-20 10:38:20.889797 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Initializing vsomeip application <span class="token string">"World"</span><span class="token keyword">.</span>
2017-03-20 10:38:20.890120 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> SOME/IP client identifier configured. Using 0001 <span class="token punctuation">(</span>was: 0000<span class="token punctuation">)</span>
2017-03-20 10:38:20.890259 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> No routing manager configured. Using auto-configuration.
2017-03-20 10:38:20.890367 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Instantiating routing manager <span class="token punctuation">[</span>Host<span class="token punctuation">]</span>.
2017-03-20 10:38:20.890641 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> init_routing_endpoint Routing endpoint at /tmp/vsomeip-0
2017-03-20 10:38:20.890894 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Client <span class="token punctuation">[</span>1<span class="token punctuation">]</span> is connecting to <span class="token punctuation">[</span>0<span class="token punctuation">]</span> at /tmp/vsomeip-0
2017-03-20 10:38:20.891039 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Service Discovery enabled. Trying to load module.
2017-03-20 10:38:20.891647 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Service Discovery module loaded.
2017-03-20 10:38:20.892045 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Application<span class="token punctuation">(</span>World, 1001<span class="token punctuation">)</span> is initialized <span class="token punctuation">(</span>11, 100<span class="token punctuation">)</span>.
2017-03-20 10:38:20.892210 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Starting vsomeip application <span class="token string">"World"</span> using 2 threads
2017-03-20 10:38:20.892668 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Watchdog is disabled<span class="token operator">!</span>
2017-03-20 10:38:20.893312 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Network interface <span class="token string">"lo"</span> is up and running.
2017-03-20 10:38:20.898471 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> vSomeIP 2.6.2
2017-03-20 10:38:20.898708 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Sent READY to systemd watchdog
2017-03-20 10:38:20.898854 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> SOME/IP routing ready.
</code></pre> 
<p><strong>è¯·æ³¨æ„ï¼š</strong></p> 
<ul><li>è¿™äº›æ­¥éª¤å¯¹äºæœåŠ¡å’Œå®¢æˆ·ç«¯æ˜¯ç›¸åŒçš„ï¼› æ²¡æœ‰åŒºåˆ«ã€‚ å®ƒåªæ˜¯ä¸€ä¸ª <code>vsomeip</code> åº”ç”¨ç¨‹åºã€‚</li><li>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ‚¨ä¸éœ€è¦ä»»ä½•é…ç½®æ–‡ä»¶ã€‚</li></ul> 
<p><strong>è®©æˆ‘ä»¬è¯¦ç»†è®¨è®ºä¸€äº›è¦ç‚¹ï¼š</strong></p> 
<ul><li> <p>é¦–å…ˆä½ çœ‹åˆ°å·²ç»åŠ è½½çš„é…ç½®ï¼›æ‚¨æ²¡æœ‰é…ç½®ï¼Œå› æ­¤ä½¿ç”¨é»˜è®¤å€¼ã€‚</p> </li><li> <p>æ‚¨æ²¡æœ‰ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºé…ç½®å®¢æˆ·ç«¯ IDï¼›å› æ­¤ï¼Œ<code>vsomeip</code> åŠŸèƒ½ï¼ˆè‡ªåŠ¨é…ç½®ï¼‰ä¼šæ‰¾åˆ°é€‚å½“çš„<code>client ID</code>ã€‚ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯ <code>0x0001</code>ã€‚</p> </li><li> <p>è·¯ç”±ç®¡ç†å™¨ä¹Ÿæ²¡æœ‰é…ç½®ï¼›å› æ­¤ï¼Œè·¯ç”±ç®¡ç†å™¨ä¼šéšç€ç³»ç»Ÿä¸­çš„ç¬¬ä¸€ä¸ª <code>vsomeip</code> åº”ç”¨ç¨‹åºè‡ªåŠ¨å¯åŠ¨ï¼Œè¿™å°±æ˜¯ <code>service-example</code>ã€‚</p> </li><li> <p>é»˜è®¤æƒ…å†µä¸‹å¯ç”¨æœåŠ¡å‘ç°ï¼Œæ²¡æœ‰é™æ€è·¯ç”±ã€‚è¿™å°†éœ€è¦ä¸€äº›é…ç½®å‚æ•°ã€‚</p> </li><li> <p>æœ€åä¸€ä¸ª <code>init()</code> è¾“å‡ºæ˜¯ <code>Application(World, 1) is initialized (11, 100)</code>ã€‚æœ€åçš„ä¸¤ä¸ªæ•°å­—æ„å‘³ç€å¦‚æœå›è°ƒé˜»å¡è¶…è¿‡ 100 æ¯«ç§’ï¼Œåˆ™ <code>vsomeip</code> ä½¿ç”¨çš„æœ€å¤§è°ƒåº¦ç¨‹åºæ•°é‡ä¸º <code>11</code>ã€‚å¯ä»¥é…ç½®è¿™äº›å‚æ•°ã€‚</p> </li><li> <p>é»˜è®¤åˆ›å»ºä¸¤ä¸ªçº¿ç¨‹æ¥æ¥æ”¶ <code>SOME/IP</code> æ¶ˆæ¯ï¼›è¿™å…è®¸ <code>vsomeip</code> å¹¶è¡Œå¤„ç†é•¿æ¶ˆæ¯ã€‚</p> </li><li> <p>ç„¶åæ‚¨ä¼šçœ‹åˆ°å½“å‰çš„ <code>vsomeip</code> ç‰ˆæœ¬ï¼Œå¹¶ä¸” <code>SOME/IP</code> è·¯ç”±å·²å‡†å¤‡å°±ç»ªã€‚</p> </li></ul> 
<h4><a id="_223"></a>å¯ç”¨æ€§</h4> 
<p>â€ƒ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¯¥åº”ç”¨ç¨‹åºå¹¶æ²¡æœ‰åšå¤ªå¤šå·¥ä½œ ğŸ˜ƒ å®¢æˆ·ç«¯å’ŒæœåŠ¡ä¹‹é—´ä¹Ÿæ²¡æœ‰åŒºåˆ«ã€‚ ç°åœ¨è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬çš„ <code>service-example</code> æ˜¯æœåŠ¡ï¼Œå¹¶ä¸”æˆ‘ä»¬æƒ³è¦ç¼–å†™ä¸€ä¸ªæƒ³è¦ä½¿ç”¨è¯¥æœåŠ¡çš„å®¢æˆ·ç«¯ã€‚ ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å¿…é¡»è§¦å‘åº”ç”¨ç¨‹åºæä¾›æœåŠ¡å®ä¾‹ã€‚ è¿™å¯ä»¥é€šè¿‡åœ¨æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­æ·»åŠ <code>offer_service</code>å‘½ä»¤æ¥å®Œæˆï¼š</p> 
<p><em>service-example.cpp with offer</em></p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vsomeip/vsomeip.hpp&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_SERVICE_ID 0x1234</span>
<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_INSTANCE_ID 0x5678</span>

std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span> vsomeip<span class="token operator">::</span>application <span class="token operator">&gt;</span> app<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    app <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_application</span><span class="token punctuation">(</span><span class="token string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">offer_service</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>â€ƒ åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¥æ£€æŸ¥æ­£åœ¨è¿è¡Œçš„ <em>â€œWorldâ€</em> åº”ç”¨ç¨‹åºæ˜¯å¦å¯ç”¨ã€‚ è€ƒè™‘ä¸‹é¢çš„ <code>client-example</code> ä»£ç ï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªåä¸º <code>Hello</code> çš„åº”ç”¨ç¨‹åºï¼š</p> 
<p><em>client-example.cpp</em></p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vsomeip/vsomeip.hpp&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_SERVICE_ID 0x1234</span>
<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_INSTANCE_ID 0x5678</span>

std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span> vsomeip<span class="token operator">::</span>application <span class="token operator">&gt;</span> app<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">on_availability</span><span class="token punctuation">(</span>vsomeip<span class="token operator">::</span>service_t _service<span class="token punctuation">,</span> vsomeip<span class="token operator">::</span>instance_t _instance<span class="token punctuation">,</span> <span class="token keyword">bool</span> _is_available<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Service ["</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex <span class="token operator">&lt;&lt;</span> _service <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span> <span class="token operator">&lt;&lt;</span> _instance
            <span class="token operator">&lt;&lt;</span> <span class="token string">"] is "</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>_is_available <span class="token operator">?</span> <span class="token string">"available."</span> <span class="token operator">:</span> <span class="token string">"NOT available."</span><span class="token punctuation">)</span>  <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    app <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_application</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">register_availability_handler</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> on_availability<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">request_service</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>â€ƒ ä¸ºäº†ä½¿å…¶å°½å¯èƒ½ç®€å•ï¼Œæˆ‘ä»¬çœç•¥äº†æ‰€æœ‰å¯èƒ½çš„æ£€æŸ¥ï¼Œä¾‹å¦‚æ³¨å†Œæ˜¯å¦æˆåŠŸã€‚ ä½œä¸ºå®¢æˆ·ç«¯ï¼Œæ‚¨å¿…é¡»å‘Šè¯‰ <code>vsomeip</code> æ‚¨æƒ³è¦ä½¿ç”¨è¯¥æœåŠ¡ï¼Œå¹¶ä¸”æ‚¨éœ€è¦æ³¨å†Œä¸€ä¸ªå›è°ƒä»¥ä¾¿åœ¨è¯¥æœåŠ¡å¯ç”¨æ—¶è·å¾—å‘¼å«ã€‚ å®¢æˆ·ç«¯è¾“å‡ºç°åœ¨åº”è¯¥ç±»å¦‚ä¸‹ï¼š</p> 
<pre><code class="prism language-bash">Service <span class="token punctuation">[</span>1234.5678<span class="token punctuation">]</span> is NOT available.
2017-03-21 04:14:37.720313 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> REQUEST<span class="token punctuation">(</span>0002<span class="token punctuation">)</span>: <span class="token punctuation">[</span>1234.5678:255.4294967295<span class="token punctuation">]</span>
Service <span class="token punctuation">[</span>1234.5678<span class="token punctuation">]</span> is available.
</code></pre> 
<p>â€ƒ å½“ <code>app-&gt;start()</code> å¯åŠ¨ <code>vsomeip</code> äº‹ä»¶å¾ªç¯æ—¶ï¼Œå°†è°ƒç”¨å¯ç”¨æ€§å›è°ƒ <code>(on_availability(...) å‡½æ•°)</code>ã€‚</p> 
<p><strong>åœ¨æœåŠ¡ç«¯æ‰“å°å¦‚ä¸‹è¯­å¥ï¼ˆlogï¼‰</strong></p> 
<pre><code class="prism language-bash">2017-03-21 04:14:33.850964 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> OFFER<span class="token punctuation">(</span>0001<span class="token punctuation">)</span>: <span class="token punctuation">[</span>1234.5678:0.0<span class="token punctuation">]</span>
</code></pre> 
  
<h4><a id="___291"></a>è¯·æ±‚ / å“åº”</h4> 
<p>â€ƒä»ä¸€ä¸ªå¸¸è§çš„ <code>vsomeip</code> åº”ç”¨ç¨‹åºå¼€å§‹ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæœåŠ¡æ¥å£çš„å®ä¾‹å’Œä¸€ä¸ªæƒ³è¦ä½¿ç”¨è¿™ä¸ªæ¥å£çš„å®¢æˆ·ç«¯ã€‚ ä¸‹ä¸€æ­¥ç°åœ¨æ˜¯åœ¨æœåŠ¡ç«¯å®ç°ä¸€ä¸ªå¯ç”±å®¢æˆ·ç«¯è°ƒç”¨çš„åŠŸèƒ½ã€‚</p> 
<p>â€ƒ æœåŠ¡ç¤ºä¾‹å¿…é¡»å‡†å¤‡å¥½æ¥æ”¶æ¶ˆæ¯ï¼› è¿™å¯ä»¥é€šè¿‡æ³¨å†Œæ¶ˆæ¯å¤„ç†ç¨‹åºæ¥å®Œæˆã€‚ è¯·çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p> 
<p><em>service-example.cpp with offer and message handler</em></p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vsomeip/vsomeip.hpp&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_SERVICE_ID 0x1234</span>
<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_INSTANCE_ID 0x5678</span>
<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_METHOD_ID 0x0421</span>

std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>application<span class="token operator">&gt;</span> app<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">on_message</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>message<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>_request<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>payload<span class="token operator">&gt;</span> its_payload <span class="token operator">=</span> _request<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vsomeip<span class="token operator">::</span>length_t l <span class="token operator">=</span> its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Get payload</span>
    std<span class="token operator">::</span>stringstream ss<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>vsomeip<span class="token operator">::</span>length_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
       ss <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex
          <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SERVICE: Received message with Client/Session ["</span>
        <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex <span class="token operator">&lt;&lt;</span> _request<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span>
        <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex <span class="token operator">&lt;&lt;</span> _request<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_session</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"] "</span>
        <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>

    <span class="token comment">// Create response</span>
    std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>message<span class="token operator">&gt;</span> its_response <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_response</span><span class="token punctuation">(</span>_request<span class="token punctuation">)</span><span class="token punctuation">;</span>
    its_payload <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>vector<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>byte_t<span class="token operator">&gt;</span> its_payload_data<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">9</span><span class="token punctuation">;</span> i<span class="token operator">&gt;=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        its_payload_data<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_data</span><span class="token punctuation">(</span>its_payload_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    its_response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_payload</span><span class="token punctuation">(</span>its_payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span>its_response<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

   app <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_application</span><span class="token punctuation">(</span><span class="token string">"World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">register_message_handler</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> SAMPLE_METHOD_ID<span class="token punctuation">,</span> on_message<span class="token punctuation">)</span><span class="token punctuation">;</span>
   app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">offer_service</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
   app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong>åœ¨å®¢æˆ·ç«¯ï¼Œå®ƒæœ‰ç‚¹å¤æ‚ï¼š</strong></p> 
<p><em>client-example.cpp with message handler and send function</em></p> 
<pre><code class="prism language-cpp"><span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iomanip&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;sstream&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;condition_variable&gt;</span></span>
<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;thread&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">include</span> <span class="token string">&lt;vsomeip/vsomeip.hpp&gt;</span></span>

<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_SERVICE_ID 0x1234</span>
<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_INSTANCE_ID 0x5678</span>
<span class="token macro property">#<span class="token directive keyword">define</span> SAMPLE_METHOD_ID 0x0421</span>

std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span> vsomeip<span class="token operator">::</span>application <span class="token operator">&gt;</span> app<span class="token punctuation">;</span>
std<span class="token operator">::</span>mutex mutex<span class="token punctuation">;</span>
std<span class="token operator">::</span>condition_variable condition<span class="token punctuation">;</span>

<span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  std<span class="token operator">::</span>unique_lock<span class="token operator">&lt;</span>std<span class="token operator">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">its_lock</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  condition<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>its_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span> vsomeip<span class="token operator">::</span>message <span class="token operator">&gt;</span> request<span class="token punctuation">;</span>
  request <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  request<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_service</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
  request<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_instance</span><span class="token punctuation">(</span>SAMPLE_INSTANCE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
  request<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_method</span><span class="token punctuation">(</span>SAMPLE_METHOD_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span> vsomeip<span class="token operator">::</span>payload <span class="token operator">&gt;</span> its_payload <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  std<span class="token operator">::</span>vector<span class="token operator">&lt;</span> vsomeip<span class="token operator">::</span>byte_t <span class="token operator">&gt;</span> its_payload_data<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>vsomeip<span class="token operator">::</span>byte_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      its_payload_data<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>i <span class="token operator">%</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_data</span><span class="token punctuation">(</span>its_payload_data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  request<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_payload</span><span class="token punctuation">(</span>its_payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
  app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">on_message</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>message<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>_response<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

  std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>payload<span class="token operator">&gt;</span> its_payload <span class="token operator">=</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  vsomeip<span class="token operator">::</span>length_t l <span class="token operator">=</span> its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Get payload</span>
  std<span class="token operator">::</span>stringstream ss<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>vsomeip<span class="token operator">::</span>length_t i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
     ss <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex
        <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>i<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"CLIENT: Received message with Client/Session ["</span>
      <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex <span class="token operator">&lt;&lt;</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span>
      <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex <span class="token operator">&lt;&lt;</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_session</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"] "</span>
      <span class="token operator">&lt;&lt;</span> ss<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">on_availability</span><span class="token punctuation">(</span>vsomeip<span class="token operator">::</span>service_t _service<span class="token punctuation">,</span> vsomeip<span class="token operator">::</span>instance_t _instance<span class="token punctuation">,</span> <span class="token keyword">bool</span> _is_available<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"CLIENT: Service ["</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex <span class="token operator">&lt;&lt;</span> _service <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span> <span class="token operator">&lt;&lt;</span> _instance
            <span class="token operator">&lt;&lt;</span> <span class="token string">"] is "</span>
            <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span>_is_available <span class="token operator">?</span> <span class="token string">"available."</span> <span class="token operator">:</span> <span class="token string">"NOT available."</span><span class="token punctuation">)</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
    condition<span class="token punctuation">.</span><span class="token function">notify_one</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    app <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_application</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">register_availability_handler</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> on_availability<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">request_service</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">register_message_handler</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> SAMPLE_METHOD_ID<span class="token punctuation">,</span> on_message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>thread <span class="token function">sender</span><span class="token punctuation">(</span>run<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>â€ƒ å°±åƒåœ¨æœåŠ¡ç«¯ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦æ³¨å†Œä¸€ä¸ªæ¶ˆæ¯å¤„ç†ç¨‹åºæ¥æ¥æ”¶æˆ‘ä»¬è°ƒç”¨çš„å“åº”ã€‚ åŸåˆ™ä¸Šï¼Œåˆ›å»ºå‘é€æ¶ˆæ¯ (<code>request</code>) éå¸¸å®¹æ˜“ã€‚ åªéœ€é€šè¿‡è°ƒç”¨ <code>create_request()</code> è·å–è¯·æ±‚å¯¹è±¡ï¼Œè®¾ç½®æœåŠ¡ IDã€å®ä¾‹ ID å’Œæ–¹æ³• IDï¼Œæœ€åä½¿ç”¨æ‚¨çš„åºåˆ—åŒ–æ•°æ®å†™å…¥ <code>payload</code>ã€‚ åœ¨æ­¤å¤„çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† 0 åˆ° 9 çš„å€¼å†™å…¥æœ‰æ•ˆè´Ÿè½½ (<code>std::vector&lt; vsomeip::byte_t &gt;</code>)ã€‚</p> 
<p>â€ƒ å½“æˆ‘ä»¬å°è¯•å°†æˆ‘ä»¬çš„è¯·æ±‚ä»å®¢æˆ·ç«¯å‘é€åˆ°æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªå°é—®é¢˜ã€‚ åœ¨æˆ‘ä»¬å‘é€æ¶ˆæ¯ä¹‹å‰ï¼Œå¿…é¡»å¯åŠ¨åº”ç”¨ç¨‹åºï¼ˆ<code>app-&gt;start()</code>ï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„äº‹ä»¶å¾ªç¯æ¥å¤„ç†æ¶ˆæ¯ã€‚ ä½†æ˜¯ <code>app-&gt;start()</code> æ–¹æ³•ä¸ä¼šè¿”å›ï¼Œå› ä¸ºå®ƒå†…éƒ¨æœ‰æ­£åœ¨è¿è¡Œçš„äº‹ä»¶å¾ªç¯ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ (<code>run</code>) å¹¶åœ¨æ­¤çº¿ç¨‹ä¸­ç­‰å¾…å¯ç”¨æ€§å›è°ƒçš„è¿”å›ï¼Œç„¶åå†è°ƒç”¨ <code>app-&gt;send(request, true)</code>ã€‚</p> 
<p>ç°åœ¨æˆ‘ä»¬åº”è¯¥å¾—åˆ°è¾“å‡ºï¼ˆé¦–å…ˆå¯åŠ¨æœåŠ¡ç«¯ï¼‰ï¼š</p> 
<pre><code class="prism language-bash">2017-03-21 08:08:08.033710 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> REQUEST<span class="token punctuation">(</span>1002<span class="token punctuation">)</span>: <span class="token punctuation">[</span>1234.5678:255.4294967295<span class="token punctuation">]</span>
CLIENT: Service <span class="token punctuation">[</span>1234.5678<span class="token punctuation">]</span> is available.
2017-03-21 08:08:08.034182 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> Client <span class="token punctuation">[</span>1002<span class="token punctuation">]</span> is connecting to <span class="token punctuation">[</span>1001<span class="token punctuation">]</span> at /tmp/vsomeip-1001
SERVICE: Received message with Client/Session <span class="token punctuation">[</span>1002/0001<span class="token punctuation">]</span> 00 01 02 03 04 05 06 07 08 09 
CLIENT: Received message with Client/Session <span class="token punctuation">[</span>1002/0001<span class="token punctuation">]</span> 09 08 07 06 05 04 03 02 01 00 
</code></pre> 
  
<h4><a id="___444"></a>è®¢é˜… / é€šçŸ¥</h4> 
<p>â€ƒ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªå®ç°æ–¹æ³•çš„æœåŠ¡å’Œè°ƒç”¨è¯¥æ–¹æ³•çš„å®¢æˆ·ç«¯ã€‚ ä½†è¿™å¹¶ä¸æ˜¯æ‰€æœ‰å¯èƒ½çš„â˜€ï¸ã€‚ <code>SOME/IP</code> è§„èŒƒè¿˜æè¿°äº†äº‹ä»¶å¤„ç†ã€‚ è¿™æ„å‘³ç€åº”ç”¨ç¨‹åºå¯ä»¥å‘é€è®¢é˜…è€…å¯ä»¥è®¢é˜…çš„äº‹ä»¶ï¼Œå¦‚æœä»–ä»¬æ„Ÿå…´è¶£çš„è¯ã€‚ è¿åŒ <code>setter</code> å’Œ <code>getter</code> æ–¹æ³•çš„å®šä¹‰ï¼Œå¯ä»¥å®ç°æä¾›å±æ€§çš„æœåŠ¡ã€‚</p> 
<p>â€ƒ ä¸ºäº†ä½¿å®ƒä¸å¤ªå¤æ‚ï¼Œæˆ‘ä»¬åœ¨ç¤ºä¾‹ä¸­åˆ é™¤äº†æ–¹æ³•è°ƒç”¨çš„å®ç°å¹¶å®ç°äº†äº‹ä»¶å¤„ç†ã€‚ é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æœåŠ¡ã€‚</p> 
<p>â€ƒ è¯·åœ¨æ‚¨çš„ä¸»è¦åŠŸèƒ½ä¸­æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼š</p> 
<pre><code class="prism language-cpp"><span class="token keyword">const</span> vsomeip<span class="token operator">::</span>byte_t its_data<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0x10</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
payload <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">set_data</span><span class="token punctuation">(</span>its_data<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>its_data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

std<span class="token operator">::</span>set<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>eventgroup_t<span class="token operator">&gt;</span> its_groups<span class="token punctuation">;</span>
its_groups<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>SAMPLE_EVENTGROUP_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">offer_event</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> SAMPLE_EVENT_ID<span class="token punctuation">,</span> its_groups<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">notify</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> SAMPLE_EVENT_ID<span class="token punctuation">,</span> payload<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> 
<p>â—ï¸ <strong>è¯·æ³¨æ„ï¼š</strong></p> 
<ul><li> <p>æ‚¨å¿…é¡»æä¾›æ´»åŠ¨æ‰èƒ½å‘ä¸–ç•Œå…¶ä»–åœ°æ–¹å®£å¸ƒæ­¤æ´»åŠ¨çš„å­˜åœ¨<code>ï¼ˆYou must offer the event in order to announce the existence of this event to the rest of the worldï¼‰</code>ã€‚</p> </li><li> <p>ä½¿ç”¨é€šçŸ¥æ–¹æ³•ï¼Œæ‚¨å¯ä»¥å°†äº‹ä»¶å‘é€ç»™ä»»ä½•è®¢é˜…çš„äººã€‚</p> </li><li> <p>æ¯ä¸ªäº‹ä»¶éƒ½å±äºä¸€ä¸ªäº‹ä»¶ç»„ï¼ ä½†å®ƒä¹Ÿå¯ä»¥å±äºå¤šä¸ªäº‹ä»¶ç»„ã€‚</p> </li><li> <p>äº‹ä»¶ä¸ç‹¬ç«‹äºæœåŠ¡è€Œå­˜åœ¨ï¼› å¦‚æœè¯¥æœåŠ¡å°šæœªæä¾›ï¼Œåˆ™è¯¥æœåŠ¡å¯¹å®¢æˆ·ç«¯ä¸å¯ç”¨ä¸”å®¢æˆ·ç«¯æ— æ³•è®¢é˜…ã€‚</p> </li></ul> 
<p>åœ¨å®¢æˆ·ç«¯å®ç°ä»¥ä¸‹å†…å®¹ï¼ˆä¸ºäº†æ›´å¥½åœ°ç†è§£ï¼Œæˆ‘çœç•¥äº†ä¹‹å‰è®¨è®ºè¿‡çš„æ‰€æœ‰å†…å®¹ï¼‰ï¼š</p> 
<pre><code class="prism language-cpp"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  std<span class="token operator">::</span>unique_lock<span class="token operator">&lt;</span>std<span class="token operator">::</span>mutex<span class="token operator">&gt;</span> <span class="token function">its_lock</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>
  condition<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>its_lock<span class="token punctuation">)</span><span class="token punctuation">;</span>

  std<span class="token operator">::</span>set<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>eventgroup_t<span class="token operator">&gt;</span> its_groups<span class="token punctuation">;</span>
  its_groups<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>SAMPLE_EVENTGROUP_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
  app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">request_event</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> SAMPLE_EVENT_ID<span class="token punctuation">,</span> its_groups<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">subscribe</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> SAMPLE_EVENTGROUP_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token function">on_message</span><span class="token punctuation">(</span><span class="token keyword">const</span> std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>message<span class="token operator">&gt;</span> <span class="token operator">&amp;</span>_response<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    std<span class="token operator">::</span>stringstream its_message<span class="token punctuation">;</span>
    its_message <span class="token operator">&lt;&lt;</span> <span class="token string">"CLIENT: received a notification for event ["</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex
            <span class="token operator">&lt;&lt;</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_service</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex
            <span class="token operator">&lt;&lt;</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"."</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex
            <span class="token operator">&lt;&lt;</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"] to Client/Session ["</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex
            <span class="token operator">&lt;&lt;</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_client</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">"/"</span>
            <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex
            <span class="token operator">&lt;&lt;</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_session</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">&lt;&lt;</span> <span class="token string">"] = "</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>shared_ptr<span class="token operator">&lt;</span>vsomeip<span class="token operator">::</span>payload<span class="token operator">&gt;</span> its_payload <span class="token operator">=</span> _response<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_payload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    its_message <span class="token operator">&lt;&lt;</span> <span class="token string">"("</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>dec <span class="token operator">&lt;&lt;</span> its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">") "</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">uint32_t</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>
        its_message <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>hex <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setw</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span><span class="token function">setfill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>
            <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> its_payload<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span><span class="token punctuation">;</span>
    std<span class="token operator">::</span>cout <span class="token operator">&lt;&lt;</span> its_message<span class="token punctuation">.</span><span class="token function">str</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> std<span class="token operator">::</span>endl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>

    app <span class="token operator">=</span> vsomeip<span class="token operator">::</span>runtime<span class="token operator">::</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create_application</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">register_availability_handler</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">,</span> on_availability<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">request_service</span><span class="token punctuation">(</span>SAMPLE_SERVICE_ID<span class="token punctuation">,</span> SAMPLE_INSTANCE_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>

    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">register_message_handler</span><span class="token punctuation">(</span>vsomeip<span class="token operator">::</span>ANY_SERVICE<span class="token punctuation">,</span> vsomeip<span class="token operator">::</span>ANY_INSTANCE<span class="token punctuation">,</span> vsomeip<span class="token operator">::</span>ANY_METHOD<span class="token punctuation">,</span> on_message<span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token operator">::</span>thread <span class="token function">sender</span><span class="token punctuation">(</span>run<span class="token punctuation">)</span><span class="token punctuation">;</span>
    app<span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>æŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ï¼Œä½ ä¼šå‘ç°è¯¥åŠŸèƒ½å®ç°èµ·æ¥ä¼šå¾ˆç®€å•ï¼š</p> 
<ul><li>æ‚¨å†æ¬¡éœ€è¦äº‹ä»¶ç»„æ¥è®¢é˜…è¯¥äº‹ä»¶ã€‚</li><li>æ‚¨å¿…é¡»å…ˆè¯·æ±‚æ´»åŠ¨ï¼Œç„¶åæ‰èƒ½è®¢é˜…ã€‚</li><li>æ¥æ”¶äº‹ä»¶åªéœ€æ³¨å†Œä¸€ä¸ªæ ‡å‡†æ¶ˆæ¯å¤„ç†ç¨‹åºï¼› åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨éå¸¸æ–¹ä¾¿çš„é€šé…ç¬¦ã€‚</li></ul> 
<p>åœ¨æ§åˆ¶å°ä¸­ï¼Œä½ å°†è¦çœ‹åˆ°ä»¥ä¸‹å‡ è¡Œæ—¥å¿—ï¼š</p> 
<pre><code class="prism language-bash">2017-04-06 03:47:46.424942 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> REGISTER EVENT<span class="token punctuation">(</span>0001<span class="token punctuation">)</span>: <span class="token punctuation">[</span>1234.5678.8778:is_provider<span class="token operator">=</span>true<span class="token punctuation">]</span>
2017-04-06 03:47:51.851654 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> REGISTER EVENT<span class="token punctuation">(</span>0002<span class="token punctuation">)</span>: <span class="token punctuation">[</span>1234.5678.8778:is_provider<span class="token operator">=</span>false<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
2017-04-06 03:47:51.856821 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> SUBSCRIBE<span class="token punctuation">(</span>0002<span class="token punctuation">)</span>: <span class="token punctuation">[</span>1234.5678.4465:ffff:0<span class="token punctuation">]</span>
2017-04-06 03:47:51.861330 <span class="token punctuation">[</span>info<span class="token punctuation">]</span> SUBSCRIBE ACK<span class="token punctuation">(</span>0001<span class="token punctuation">)</span>: <span class="token punctuation">[</span>1234.5678.4465.ffff<span class="token punctuation">]</span>
</code></pre> 
<p>The numbers in the round brackets are again the client IDs; I started the service first, therfore the service has got from the autoconfiguration the number 1 and the client the number 2.</p> 
<p>â€ƒ åœ†æ‹¬å·ä¸­çš„æ•°å­—ä¹Ÿæ˜¯å®¢æˆ·ç«¯ IDï¼› æˆ‘é¦–å…ˆå¯åŠ¨äº†æœåŠ¡ï¼Œå› æ­¤æœåŠ¡ä»è‡ªåŠ¨é…ç½®ä¸­è·å¾—äº†æ•°å­— <code>0001</code>ï¼Œå®¢æˆ·ç«¯è·å¾—äº†æ•°å­— <code>0002</code>ã€‚</p> 
  
<h4><a id="_548"></a>ä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„é€šä¿¡</h4> 
<p>â€ƒ <code>SOME/IP</code> ä¸æ˜¯ä¸ºä¸€ä¸ªè®¾å¤‡å†…çš„è¿›ç¨‹é—´é€šä¿¡è€Œå‘æ˜çš„ï¼ˆä¾‹å¦‚ï¼Œä½œä¸º D-Busï¼‰ï¼Œè€Œæ˜¯ä¸ºå‡ ä¸ªè®¾å¤‡ä¹‹é—´åŸºäº IP çš„é€šä¿¡è€Œå‘æ˜çš„ã€‚ å¦‚æœæ‚¨æƒ³ä½¿ç”¨è¿„ä»Šä¸ºæ­¢ä¸ºä¸¤ä¸ªè®¾å¤‡ä¹‹é—´çš„é€šä¿¡å¼€å‘çš„ç¤ºä¾‹ï¼Œåˆ™æ— éœ€æ›´æ”¹ C++ ä»£ç ï¼Œä½†æ˜¯ä½ å¿…é¡»ç¼–å†™ <code>vsomeip</code> é…ç½®æ–‡ä»¶ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ <code>vsomeip</code> ç”¨æˆ·æŒ‡å—ï¼› åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åªè®¨è®ºå¦‚ä½•è®©ä½ çš„ç³»ç»Ÿç¨‹åºè¿è¡Œçš„èµ·æ¥ã€‚</p> 
<p>I will first lose some introductory words about the vsoemip configuration generally.</p> 
<p>â€ƒ æˆ‘å°†é¦–å…ˆå¤±å»ä¸€äº›å…³äº vsoemip é…ç½®çš„ä»‹ç»æ€§æ–‡å­—ã€‚</p> 
<ul><li> <p>å †æ ˆç”±ä¸€ä¸ªæˆ–å¤šä¸ªjsonæ ¼å¼çš„æ–‡ä»¶é…ç½® <code>The stack is configured by one or more files in json formatï¼ˆhttp://www.json.org/ï¼‰</code>ã€‚</p> </li><li> <p>json æ–‡ä»¶çš„æ ‡å‡†æ–‡ä»¶å¤¹æ˜¯<code>/etc/vsomeip</code>ã€‚</p> </li><li> <p>ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡<code>VSOMEIP_CONFIGURATION</code>æ¥æ›´æ”¹æ­¤æ–‡ä»¶å¤¹æˆ–å®šä¹‰å•ä¸ªé…ç½®æ–‡ä»¶ã€‚</p> </li><li> <p>ä¹Ÿå¯ä»¥å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°åŒ…å«å¯æ‰§è¡Œåº”ç”¨ç¨‹åºçš„æ–‡ä»¶å¤¹ï¼ˆæœ¬åœ°é…ç½®ï¼‰ã€‚</p> </li></ul> 
<p>å¯¹äºä»¥ä¸‹é…ç½®ç¤ºä¾‹ï¼Œæˆ‘å‡è®¾æœåŠ¡åœ¨åœ°å€ä¸º<code>172.17.0.2</code>çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œå®¢æˆ·ç«¯çš„åœ°å€ä¸º<code>172.17.0.1</code>ã€‚</p> 
<p>é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªæœåŠ¡é…ç½®çš„ä¾‹å­ï¼š</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"unicast"</span> <span class="token punctuation">:</span> <span class="token string">"172.17.0.2"</span><span class="token punctuation">,</span>
    <span class="token string">"logging"</span> <span class="token punctuation">:</span>
    <span class="token punctuation">{<!-- --></span> 
        <span class="token string">"level"</span> <span class="token punctuation">:</span> <span class="token string">"debug"</span><span class="token punctuation">,</span>
        <span class="token string">"console"</span> <span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
        <span class="token string">"file"</span> <span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"enable"</span> <span class="token punctuation">:</span> <span class="token string">"false"</span><span class="token punctuation">,</span> <span class="token string">"path"</span> <span class="token punctuation">:</span> <span class="token string">"/tmp/vsomeip.log"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"dlt"</span> <span class="token punctuation">:</span> <span class="token string">"false"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"applications"</span> <span class="token punctuation">:</span> 
    <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"name"</span> <span class="token punctuation">:</span> <span class="token string">"World"</span><span class="token punctuation">,</span>
            <span class="token string">"id"</span> <span class="token punctuation">:</span> <span class="token string">"0x1212"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"services"</span> <span class="token punctuation">:</span>
    <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"service"</span> <span class="token punctuation">:</span> <span class="token string">"0x1234"</span><span class="token punctuation">,</span>
            <span class="token string">"instance"</span> <span class="token punctuation">:</span> <span class="token string">"0x5678"</span><span class="token punctuation">,</span>
            <span class="token string">"unreliable"</span> <span class="token punctuation">:</span> <span class="token string">"30509"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"routing"</span> <span class="token punctuation">:</span> <span class="token string">"World"</span><span class="token punctuation">,</span>
    <span class="token string">"service-discovery"</span> <span class="token punctuation">:</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"enable"</span> <span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
        <span class="token string">"multicast"</span> <span class="token punctuation">:</span> <span class="token string">"224.224.224.245"</span><span class="token punctuation">,</span>
        <span class="token string">"port"</span> <span class="token punctuation">:</span> <span class="token string">"30490"</span><span class="token punctuation">,</span>
        <span class="token string">"protocol"</span> <span class="token punctuation">:</span> <span class="token string">"udp"</span><span class="token punctuation">,</span>
        <span class="token string">"initial_delay_min"</span> <span class="token punctuation">:</span> <span class="token string">"10"</span><span class="token punctuation">,</span>
        <span class="token string">"initial_delay_max"</span> <span class="token punctuation">:</span> <span class="token string">"100"</span><span class="token punctuation">,</span>
        <span class="token string">"repetitions_base_delay"</span> <span class="token punctuation">:</span> <span class="token string">"200"</span><span class="token punctuation">,</span>
        <span class="token string">"repetitions_max"</span> <span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token string">"ttl"</span> <span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token string">"cyclic_offer_delay"</span> <span class="token punctuation">:</span> <span class="token string">"2000"</span><span class="token punctuation">,</span>
        <span class="token string">"request_response_delay"</span> <span class="token punctuation">:</span> <span class="token string">"1500"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>â€ƒ å¯¹äºé€šè¿‡ IP è¿›è¡Œçš„é€šä¿¡ï¼Œå•æ’­åœ°å€æ˜¯å¼ºåˆ¶æ€§çš„ã€‚ è®©æˆ‘ä»¬è®¨è®ºå…¶ä»–æ¡ç›®ï¼š</p> 
<ul><li> <p><em>logging</em>ï¼šè¿™äº›è®¾ç½®æ˜¯å¯é€‰çš„ï¼›è®¾ç½® â€œconsoleâ€=true ä»¥æŸ¥çœ‹æ§åˆ¶å°ä¸Šçš„æ—¥å¿—æ¶ˆæ¯ã€‚</p> </li><li> <p><em>applications</em>ï¼šæ‚¨å¯ä»¥ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºï¼ˆæ‚¨é€šè¿‡<code>create_application(&lt;name&gt;)</code> åˆ›å»ºå®ƒï¼‰å®šä¹‰ä¸€ä¸ªå›ºå®šçš„ <code>client ID</code>ï¼Œè€Œä¸æ˜¯è®©å®ƒç”±è‡ªåŠ¨é…ç½®ç¡®å®šã€‚è¿™å°†å¸®åŠ©æ‚¨ç¨ååœ¨è·Ÿè¸ªä¸­è¯†åˆ«æ‚¨çš„åº”ç”¨ç¨‹åºã€‚ <strong>æ­¤å¤„å¿…é¡»è®¾ç½®<code>client ID</code>ï¼Œå› ä¸º <code>client ID</code> åœ¨æ‚¨çš„ç½‘ç»œä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚</strong> å¦‚æœæ‚¨ä¸è®¾ç½® <code>client ID</code> ï¼Œè‡ªåŠ¨é…ç½®å°†åœ¨æ¯ä¸ªè®¾å¤‡ä¸Šè®¡ç®— <code>client ID</code> + 1ï¼Œå¹¶ä¸”æ— æ³•è¿›è¡Œé€šä¿¡ã€‚</p> </li><li> <p><em>services</em>ï¼šå¯¹äºæ¯ä¸ªæœåŠ¡å®ä¾‹ï¼Œå¿…é¡»å®šä¹‰å®ƒå¯ä»¥é€šè¿‡å“ªä¸ªç«¯å£åˆ°è¾¾ã€‚å¦‚æœç«¯å£ä¸ºâ€œä¸å¯é â€ï¼Œåˆ™ä¸º UDP ç«¯å£ï¼Œå¦‚æœä¸ºâ€œå¯é â€ï¼Œåˆ™ TCP å°†æ˜¯ä¼ è¾“å±‚ã€‚</p> </li><li> <p><em>routing</em>ï¼šæ¯ä¸ªè®¾å¤‡åªæœ‰ä¸€ä¸ªè·¯ç”±ç®¡ç†å™¨ã€‚æ­¤è·¯ç”±ç®¡ç†å™¨å°†é™„åŠ åˆ°ç¬¬ä¸€ä¸ªå¯åŠ¨çš„ vsomeip åº”ç”¨ç¨‹åºæˆ–æ­¤å¤„å®šä¹‰çš„åº”ç”¨ç¨‹åºã€‚</p> </li><li> <p><em>service-discovery</em>ï¼šæ‰€æœ‰è¿™äº›å‚æ•°åªæœ‰åœ¨å¯ç”¨æœåŠ¡å‘ç°æ—¶æ‰æœ‰æ„ä¹‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼ºåˆ¶å‚æ•°æ˜¯ç”¨äºå‘é€æœåŠ¡å‘ç°æ¶ˆæ¯çš„å¤šæ’­åœ°å€ä»¥åŠç«¯å£å’Œåè®®ã€‚å…¶ä»–å‚æ•°ç¡®å®šå‘é€æŠ¥ä»·æ¶ˆæ¯çš„é¢‘ç‡ã€å»¶è¿Ÿç­‰ã€‚è¯·æŸ¥çœ‹ç”¨æˆ·æŒ‡å—æˆ– SOME/IP è§„èŒƒã€‚</p> </li></ul> 
<p>â—ï¸ ç¡®ä¿æ‚¨çš„è®¾å¤‡å·²é…ç½®ä¸ºæ¥æ”¶å¤šæ’­æ¶ˆæ¯ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ <code>route add -nv 224.224.224.245 dev eth0</code> æˆ–ç±»ä¼¼æ–¹æ³•ï¼›è¿™å–å†³äºæ‚¨çš„ä»¥å¤ªç½‘è®¾å¤‡çš„åç§°ï¼‰ã€‚</p> 
<p>è€ƒè™‘å®¢æˆ·ç«¯çš„ä»¥ä¸‹é…ç½®ï¼š</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string">"unicast"</span> <span class="token punctuation">:</span> <span class="token string">"172.17.0.1"</span><span class="token punctuation">,</span>
    <span class="token string">"logging"</span> <span class="token punctuation">:</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"level"</span> <span class="token punctuation">:</span> <span class="token string">"debug"</span><span class="token punctuation">,</span>
        <span class="token string">"console"</span> <span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
        <span class="token string">"file"</span> <span class="token punctuation">:</span> <span class="token punctuation">{<!-- --></span> <span class="token string">"enable"</span> <span class="token punctuation">:</span> <span class="token string">"false"</span><span class="token punctuation">,</span> <span class="token string">"path"</span> <span class="token punctuation">:</span> <span class="token string">"/var/log/vsomeip.log"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">"dlt"</span> <span class="token punctuation">:</span> <span class="token string">"false"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">"applications"</span> <span class="token punctuation">:</span> 
    <span class="token punctuation">[</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token string">"name"</span> <span class="token punctuation">:</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span>
            <span class="token string">"id"</span> <span class="token punctuation">:</span> <span class="token string">"0x1313"</span>
        <span class="token punctuation">}</span> 
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">"routing"</span> <span class="token punctuation">:</span> <span class="token string">"Hello"</span><span class="token punctuation">,</span>
    <span class="token string">"service-discovery"</span> <span class="token punctuation">:</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token string">"enable"</span> <span class="token punctuation">:</span> <span class="token string">"true"</span><span class="token punctuation">,</span>
        <span class="token string">"multicast"</span> <span class="token punctuation">:</span> <span class="token string">"224.224.224.245"</span><span class="token punctuation">,</span>
        <span class="token string">"port"</span> <span class="token punctuation">:</span> <span class="token string">"30490"</span><span class="token punctuation">,</span>
        <span class="token string">"protocol"</span> <span class="token punctuation">:</span> <span class="token string">"udp"</span><span class="token punctuation">,</span>
        <span class="token string">"initial_delay_min"</span> <span class="token punctuation">:</span> <span class="token string">"10"</span><span class="token punctuation">,</span>
        <span class="token string">"initial_delay_max"</span> <span class="token punctuation">:</span> <span class="token string">"100"</span><span class="token punctuation">,</span>
        <span class="token string">"repetitions_base_delay"</span> <span class="token punctuation">:</span> <span class="token string">"200"</span><span class="token punctuation">,</span>
        <span class="token string">"repetitions_max"</span> <span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token string">"ttl"</span> <span class="token punctuation">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>
        <span class="token string">"cyclic_offer_delay"</span> <span class="token punctuation">:</span> <span class="token string">"2000"</span><span class="token punctuation">,</span>
        <span class="token string">"request_response_delay"</span> <span class="token punctuation">:</span> <span class="token string">"1500"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>ç”±äºå®¢æˆ·ç«¯ä¸æä¾›æœåŠ¡ï¼Œå› æ­¤ä¸éœ€è¦â€œæœåŠ¡â€è®¾ç½®ã€‚</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9a647683f9ed739a559752213964eaf5/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">åå‘è¾“å…¥æ•°å­—Cè¯­è¨€ï¼ˆåŸºç¡€é¢˜è®­ç»ƒï¼‰</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/03eb9657ebb9c8035692152121739b05/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">åŸºäºAutosar Can driverçš„ç†è§£</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 èœé¸Ÿç¨‹åºå‘˜åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>