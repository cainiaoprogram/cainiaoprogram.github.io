<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>S32K144-NXP EB tresos MCU驱动配置详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="S32K144-NXP EB tresos MCU驱动配置详解" />
<meta property="og:description" content="S32K144平台 MCAL MCU驱动 在EB中的相关配置解析以及实战。
多图预警！！！！！！！！！
MCUGeneral配置参数 ①Mcu Development Error Detect：Mcu模块开发错误检测使能。
②Mcu Get Ram State API：获取RAM状态API使能。
③Mcu Init Clock API：初始化时钟API使能。
④Mcu No PLL：锁相环禁用。
⑤Mcu Enter Low-Power Mode：进入低功耗模式使能。
⑥Mcu Perform Reset API：执行复位API使能等。
MCURestReasonConf 导致MCU复位的原因有很多，如果硬件允许，Mcu模块可以获取复位的原因。McuResetReasonConf配置可以添加不同的Mcu复位原因。
McuModuleConfiguration配置 这个是重点的重点
第一步：McuModuleConfiguration→General配置
这里要对应着S32K144微控制器的时钟数来理解，比如这个RTC时钟32K
第二步：McuModuleConfiguration→McuClockSettingConfig配置
进入界面，点击&#43;号添加 McuClockSettingConfig配置
进入McuModuleConfiguration→McuClockSettingConfig→General配置
注意这个General可不是上面那个MCU的General，而是你刚刚添加的一个时钟配置。
从上图你可以看到时钟配置有三个模式：Run\VLpr\Hsrun，可以简单理解为正常运行\超低功耗运行\超高速运行，每种模式对应的最高频率是不一样的。
这是竖着看，横着看你还会发现多出来了很多的标签栏：SOSC\SIRC\FIRC\PLL\SIM\PCC
这些都是对应的时钟，进入不同的标签栏下面，就是配置不同的时钟。
实例：SOSC，8M晶振通过PLL倍频变成80MHz 比如我们要使用外部时钟SOSC，8M晶振通过PLL倍频变成80MHz的内核时钟：
一般先看时钟树，需要配置什么参数：
然后进入到SOSC标签栏对其进行配置：
然后进入PLL标签栏下：输入倍频系数40，40*8=320M（图里写错了）/2=160M，再二分频就是80M，完美！！！
到这一步算是完成了系统时钟与锁相环，下一步就是对输出时钟进行全局的配置！
进入McuPeripheralClockCof标签栏下：一定要点这个小人，把所有都添加上，代表所有的外设我都分配好时钟了，没落下的。（一定要！！！不然报错！！！）
然后进入McuClockReferencePoint标签栏，这里你可以理解为映射可将外设时钟通过McuClockReferencePoint与其他BSW模块联系起来。
添加你需要的，还可以自己命名，用于什么用途就怎么改。
这个时候你会发现，哎呀这个RUN_SYS_CLK是啥呀？
还记得前面说的MCU三种模式下的频率嘛，进入General下，选择SPLL也就是咱们前面配置的PLL输出时钟。
完美！！！！！！
到这里可以说你的时钟配置就完成了，之后你添加什么外设或者什么驱动，别忘记到进入McuClockReferencePoint标签栏把该对应的都对应上就可以了。
重点还是要了解MCU的时钟树，以及相关的外设，软件的操作与配置属于技层面，对时钟的理解是术层面。
对了还有一些API函数也要了解一下：
MCU API接口函数 Mcu_Init；
Mcu_InitClock；
Mcu_GetPllStatus（若使用PLL，直到PLL锁相环配置成功）；
Mcu_DistributePllClock（若使用PLL）；
Mcu_InitRamSection（按照具体需求，可不调用）
总结 细节真的很多，有些东西稍不注意就忘记了，而且EB这个软件设计上也是，很多相关的配置参数使能，非要隔这么远在不同的标签栏下，一不小心就忽略了，错误也不好排查，很吃熟练度和经验。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a296c9de293a82e1d7b9e5b8325d3d40/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-21T11:00:45+08:00" />
<meta property="article:modified_time" content="2023-03-21T11:00:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">S32K144-NXP EB tresos MCU驱动配置详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p></p> 
<p id="ubfa2ad85">S32K144平台 MCAL MCU驱动 在EB中的相关配置解析以及实战。</p> 
<p id="u8cebf60e">多图预警！！！！！！！！！</p> 
<h2 id="YSIZb">MCUGeneral配置参数</h2> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/75/7e/Mfe94vow_o.png"></p> 
<p id="u1731daf5">①Mcu Development Error Detect：Mcu模块开发错误检测使能。</p> 
<p id="u6386cbfa">②Mcu Get Ram State API：获取RAM状态API使能。</p> 
<p id="u9845b6ee">③Mcu Init Clock API：初始化时钟API使能。</p> 
<p id="uda51ee5c">④Mcu No PLL：锁相环禁用。</p> 
<p id="uae5fdde9">⑤Mcu Enter Low-Power Mode：进入低功耗模式使能。</p> 
<p id="ua5c2172d">⑥Mcu Perform Reset API：执行复位API使能等。</p> 
<h2 id="TWT10">MCURestReasonConf</h2> 
<p id="uc2a0eb23">导致MCU复位的原因有很多，如果硬件允许，Mcu模块可以获取复位的原因。McuResetReasonConf配置可以添加不同的Mcu复位原因。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/01/c1/tRmvJONh_o.png"></p> 
<h2 id="NnHhE">McuModuleConfiguration配置</h2> 
<p id="u1d06603c">这个是重点的重点</p> 
<p id="uc45ec8af">第一步：McuModuleConfiguration→General配置</p> 
<p id="ua5681d9a">这里要对应着S32K144微控制器的时钟数来理解，比如这个RTC时钟32K</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/31/81/6TeOHAiN_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/2b/14/ZBnUiAMj_o.png"></p> 
<p id="u6def8882">第二步：McuModuleConfiguration→McuClockSettingConfig配置</p> 
<p id="ub5efef5c">进入界面，点击+号添加 McuClockSettingConfig配置</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/cb/fa/ZTjcsz0B_o.png"></p> 
<p id="u15dcab49">进入McuModuleConfiguration→McuClockSettingConfig→General配置</p> 
<p id="ubcfdbde1">注意这个General可不是上面那个MCU的General，而是你刚刚添加的一个时钟配置。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/f1/39/fOWddLI6_o.png"></p> 
<p id="u58f6a152">从上图你可以看到时钟配置有三个模式：Run\VLpr\Hsrun，可以简单理解为正常运行\超低功耗运行\超高速运行，每种模式对应的最高频率是不一样的。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/c2/62/BXSp6N9S_o.png"></p> 
<p id="u6cf68b8b">这是竖着看，横着看你还会发现多出来了很多的标签栏：SOSC\SIRC\FIRC\PLL\SIM\PCC</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/8f/be/o1WhA9X7_o.png"></p> 
<p id="ueb74f418">这些都是对应的时钟，进入不同的标签栏下面，就是配置不同的时钟。</p> 
<h2 id="TXu83">实例：SOSC，8M晶振通过PLL倍频变成80MHz</h2> 
<p id="u3c923f17">比如我们要使用外部时钟SOSC，8M晶振通过PLL倍频变成80MHz的内核时钟：</p> 
<p id="uc48c1862">一般先看时钟树，需要配置什么参数：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/0c/f1/hLE2hqMM_o.png"></p> 
<p id="ubdd3e4c7">然后<strong>进入到SOSC标签栏</strong>对其进行配置：</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/cc/fc/oW6EHhdC_o.png"></p> 
<p id="u90260e9b"></p> 
<p id="u26458542"><strong>然后进入PLL标签栏下</strong>：输入倍频系数40，40*8=320M（图里写错了）/2=160M，再二分频就是80M，完美！！！</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/94/5c/zmgvzXrB_o.png"></p> 
<p id="u207bbb91"></p> 
<p id="u1ebf340d">到这一步算是完成了系统时钟与锁相环，下一步就是对输出时钟进行全局的配置！</p> 
<p id="ufb6430f0"><strong>进入McuPeripheralClockCof标签栏</strong>下：<strong>一定要点这个小人，把所有都添加上，代表所有的外设我都分配好时钟了，没落下的。（一定要！！！不然报错！！！）</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/9d/08/CYxEcGtO_o.png"></p> 
<p id="ue954cb70"></p> 
<p id="ua34fe301">然后<strong>进入McuClockReferencePoint标签栏，</strong>这里你可以理解为映射可<strong>将外设时钟通过McuClockReferencePoint与其他BSW模块联系起来。</strong></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/8a/09/vGu7OFoa_o.png"></p> 
<p id="ua4584e0b">添加你需要的，还可以自己命名，用于什么用途就怎么改。</p> 
<p id="u398632f8">这个时候你会发现，哎呀这个RUN_SYS_CLK是啥呀？</p> 
<p id="u304d4d63">还记得前面说的MCU三种模式下的频率嘛，<strong>进入General下</strong>，<strong>选择SPLL</strong>也就是咱们前面配置的PLL输出时钟。</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/2f/4b/H8mr9vp8_o.png"></p> 
<p id="u68858de5">完美！！！！！！</p> 
<p id="u82c8cc0f">到这里可以说你的时钟配置就完成了，之后你添加什么外设或者什么驱动，别忘记到<strong>进入McuClockReferencePoint标签栏</strong>把该对应的都对应上就可以了。</p> 
<p id="uf1b5c10a">重点还是要了解MCU的时钟树，以及相关的外设，软件的操作与配置属于<strong>技</strong>层面，对时钟的理解是<strong>术</strong>层面。</p> 
<p id="u8db22d09"></p> 
<p id="u2cdd025a">对了还有一些API函数也要了解一下：</p> 
<h2 id="GmnKu">MCU API接口函数</h2> 
<p id="u806d1b7b">Mcu_Init；</p> 
<p id="u04239484">Mcu_InitClock；</p> 
<p id="ua61eb33b">Mcu_GetPllStatus（若使用PLL，直到PLL锁相环配置成功）；</p> 
<p id="u624a2bf3">Mcu_DistributePllClock（若使用PLL）；</p> 
<p id="u9fab4e26">Mcu_InitRamSection（按照具体需求，可不调用）</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/4e/79/a2hdLEqI_o.png"></p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/ad/15/d6zXvc1j_o.png"></p> 
<p id="u96c888d3"></p> 
<h2 id="lGxZ3">总结</h2> 
<p id="u4cc5a4fe">细节真的很多，有些东西稍不注意就忘记了，而且EB这个软件设计上也是，很多相关的配置参数使能，非要隔这么远在不同的标签栏下，一不小心就忽略了，错误也不好排查，很吃熟练度和经验。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/611b0d96c2e227126038f0543dfa9f7a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Layer子iframe传数据到父页面的两种方式【按钮和非按钮】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e522a0939222b34624c1c6dc25181419/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【小猫爪】AUTOSAR学习笔记01-AUTOSAR架构简介</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>