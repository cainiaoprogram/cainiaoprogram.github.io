<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux基础第五章：添加磁盘及如何使用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux基础第五章：添加磁盘及如何使用" />
<meta property="og:description" content="目录
一、系统添加磁盘步骤及命令
1、本章使用命令
二、磁盘添加及分区挂载
1、添加硬件
2、磁盘分区
3、格式化分区
4、挂载分区及使用
5、永久挂载
三、本章节涉及面试题
1、如何添加磁盘并使用
2、划分大于2T磁盘使用什么命令
一、系统添加磁盘步骤及命令 服务器添加磁盘一共分为一下四步，我们将按以下步骤详细介绍如何在服务器上添加磁盘并使用。
①添加硬件
②磁盘分区
③格式化磁盘
④挂载磁盘
1、本章使用命令 ①/sys/class/scsi_host/host0/scan；/sys/class/scsi_host/host1/scan；/sys/class/scsi_host/host2/scan 用于添加硬件后刷新槽位让服务器识别到新添加的硬盘。
②lsblk 用于查看分区情况
③df -h 人性化显示挂载情况
④mkfs.xfs &#43;分区，用于格式化分区
⑤partprobe 用于分区完成后分区不显示刷新分区情况
⑥fdisk &#43;硬盘 用于硬盘分区2TB以下磁盘划分
⑦blkid 查看设备的uuid号
⑧gdish &#43;硬盘 用于硬盘分区2TB以上磁盘划分
二、磁盘添加及分区挂载 1、添加硬件 ①在虚拟机的设置中点击添加，接着一直下一步直到完成，点击确定再关闭页面。如下图是添加成功的页面。
②添加完成后进入虚拟机执行命令使服务器识别新加的硬盘，命令添加成功截图如下。echo &#34;- - -&#34; &gt;/sys/class/scsi_host/host0/scan；echo &#34;- - -&#34; &gt;/sys/class/scsi_host/host1/scan；echo &#34;- - -&#34; &gt;/sys/class/scsi_host/host0/scan； 硬盘添加顺序是从sda开始到sdb一次类推，添加的第二块磁盘即是sdb
2、磁盘分区 磁盘分区分为主分区、扩展分区、逻辑分区，由于第一扇区空间有限只能存放4个主分区，为了解决这个问题使用扩展分区下的逻辑分区，扩展分区存储的是逻辑分区的范围，所以实际使用的是逻辑分区，扩展分区只用于存放逻辑分区的范围。接下来我们详细介绍划分主分区与扩展分区、逻辑分区。首先介绍划分主分区
①fdish /dev/sdb 对sdb磁盘进行分区进入人机交互界面，如下图。
②输入n表示添加分区，选择分区类型，p为主分区
③选择分区号，起始扇区，直接回车使用默认值，分区号1起始扇区2048开始
④设置分区大小，使用格式&#43;n单位，大写的单位如下图&#43;5G。设置完成后p查看分区情况，w保存退出
⑤至此主分区划分完毕，接下来介绍扩展分区、逻辑分区划分。同样的步骤dish /dev/sdb 对sdb磁盘进行分区进入人机交互界面，输入n添加分区。
⑥ 然后输入e添加扩展分区，分区号回车默认、起始扇区回车默认、然后设置扩展分区大小，格式和主分区一样&#43;n单位，单位大写。如下图10G，然后w保存。
⑦扩展分区划分完毕后再进入划分逻辑分区，同样的步骤dish /dev/sdb 对sdb磁盘进行分区进入人机交互界面，输入n添加分区。此时输入l选择逻辑分区，回车默认起始扇区，然后设置逻辑分区大小，此处注意必须在扩展分区的大小范围内，小于10G，由于有所损耗可能扩展分区不满10G，此处划分5G给逻辑分区，然后p打印分区情况可以看到已经有逻辑分区sdb5，输入w保存退出。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a0db520722bd50e24bfa115909b1ba07/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-30T18:46:19+08:00" />
<meta property="article:modified_time" content="2022-11-30T18:46:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux基础第五章：添加磁盘及如何使用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E7%B3%BB%E7%BB%9F%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98%E6%AD%A5%E9%AA%A4%E5%8F%8A%E5%91%BD%E4%BB%A4-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E7%B3%BB%E7%BB%9F%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98%E6%AD%A5%E9%AA%A4%E5%8F%8A%E5%91%BD%E4%BB%A4" rel="nofollow">一、系统添加磁盘步骤及命令</a></p> 
<p id="1%E3%80%81%E6%9C%AC%E7%AB%A0%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E6%9C%AC%E7%AB%A0%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4" rel="nofollow">1、本章使用命令</a></p> 
<p id="%E4%BA%8C%E3%80%81%E7%A3%81%E7%9B%98%E6%B7%BB%E5%8A%A0%E5%8F%8A%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E7%A3%81%E7%9B%98%E6%B7%BB%E5%8A%A0%E5%8F%8A%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD" rel="nofollow">二、磁盘添加及分区挂载</a></p> 
<p id="1%E3%80%81%E6%B7%BB%E5%8A%A0%E7%A1%AC%E4%BB%B6-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E6%B7%BB%E5%8A%A0%E7%A1%AC%E4%BB%B6" rel="nofollow">1、添加硬件</a></p> 
<p id="2%E3%80%81%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA" rel="nofollow">2、磁盘分区</a></p> 
<p id="3%E3%80%81%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA" rel="nofollow">3、格式化分区</a></p> 
<p id="%C2%A04%E3%80%81%E6%8C%82%E8%BD%BD%E5%88%86%E5%8C%BA%E5%8F%8A%E4%BD%BF%E7%94%A8-toc" style="margin-left:80px;"><a href="#%C2%A04%E3%80%81%E6%8C%82%E8%BD%BD%E5%88%86%E5%8C%BA%E5%8F%8A%E4%BD%BF%E7%94%A8" rel="nofollow">4、挂载分区及使用</a></p> 
<p id="5%E3%80%81%E6%B0%B8%E4%B9%85%E6%8C%82%E8%BD%BD-toc" style="margin-left:80px;"><a href="#5%E3%80%81%E6%B0%B8%E4%B9%85%E6%8C%82%E8%BD%BD" rel="nofollow">5、永久挂载</a></p> 
<p id="%E4%B8%89%E3%80%81%E6%9C%AC%E7%AB%A0%E8%8A%82%E6%B6%89%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E6%9C%AC%E7%AB%A0%E8%8A%82%E6%B6%89%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98" rel="nofollow">三、本章节涉及面试题</a></p> 
<p id="1%E3%80%81%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98%E5%B9%B6%E4%BD%BF%E7%94%A8-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98%E5%B9%B6%E4%BD%BF%E7%94%A8" rel="nofollow">1、如何添加磁盘并使用</a></p> 
<p id="2%E3%80%81%E5%88%92%E5%88%86%E5%A4%A7%E4%BA%8E2T%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E4%BB%80%E4%B9%88%E5%91%BD%E4%BB%A4-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E5%88%92%E5%88%86%E5%A4%A7%E4%BA%8E2T%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E4%BB%80%E4%B9%88%E5%91%BD%E4%BB%A4" rel="nofollow">2、划分大于2T磁盘使用什么命令</a></p> 
<h3 id="%E4%B8%80%E3%80%81%E7%B3%BB%E7%BB%9F%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98%E6%AD%A5%E9%AA%A4%E5%8F%8A%E5%91%BD%E4%BB%A4">一、系统添加磁盘步骤及命令</h3> 
<p>服务器添加磁盘一共分为一下四步，我们将按以下步骤详细介绍如何在服务器上添加磁盘并使用。</p> 
<p>①添加硬件</p> 
<p>②磁盘分区</p> 
<p>③格式化磁盘</p> 
<p>④挂载磁盘</p> 
<h4 id="1%E3%80%81%E6%9C%AC%E7%AB%A0%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4">1、本章使用命令</h4> 
<p>①/sys/class/scsi_host/host0/scan；/sys/class/scsi_host/host1/scan；/sys/class/scsi_host/host2/scan 用于添加硬件后刷新槽位让服务器识别到新添加的硬盘。</p> 
<p>②lsblk   用于查看分区情况</p> 
<p class="img-center"><img alt="" height="172" src="https://images2.imgbox.com/e8/5a/EtdsxfEp_o.png" width="511"></p> 
<p></p> 
<p>③df -h 人性化显示挂载情况</p> 
<p class="img-center"><img alt="" height="237" src="https://images2.imgbox.com/4d/59/Vjv8dpDN_o.png" width="651"></p> 
<p>④mkfs.xfs   +分区，用于格式化分区</p> 
<p>⑤partprobe  用于分区完成后分区不显示刷新分区情况</p> 
<p>⑥fdisk  +硬盘  用于硬盘分区2TB以下磁盘划分</p> 
<p>⑦blkid 查看设备的uuid号</p> 
<p>⑧gdish  +硬盘  用于硬盘分区2TB以上磁盘划分</p> 
<h3 id="%E4%BA%8C%E3%80%81%E7%A3%81%E7%9B%98%E6%B7%BB%E5%8A%A0%E5%8F%8A%E5%88%86%E5%8C%BA%E6%8C%82%E8%BD%BD">二、磁盘添加及分区挂载</h3> 
<h4 id="1%E3%80%81%E6%B7%BB%E5%8A%A0%E7%A1%AC%E4%BB%B6">1、添加硬件</h4> 
<p>①在虚拟机的设置中点击添加，接着一直下一步直到完成，点击确定再关闭页面。如下图是添加成功的页面。</p> 
<p class="img-center"><img alt="" height="419" src="https://images2.imgbox.com/27/20/dx3Ll6fw_o.png" width="363"></p> 
<p> ②添加完成后进入虚拟机执行命令使服务器识别新加的硬盘，命令添加成功截图如下。echo "- - -" &gt;/sys/class/scsi_host/host0/scan；echo "- - -" &gt;/sys/class/scsi_host/host1/scan；echo "- - -" &gt;/sys/class/scsi_host/host0/scan； </p> 
<p class="img-center"><img alt="" height="237" src="https://images2.imgbox.com/95/e2/EfC6YnbH_o.png" width="683"></p> 
<p> 硬盘添加顺序是从sda开始到sdb一次类推，添加的第二块磁盘即是sdb</p> 
<h4 id="2%E3%80%81%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA">2、磁盘分区</h4> 
<p>磁盘分区分为主分区、扩展分区、逻辑分区，由于第一扇区空间有限只能存放4个主分区，为了解决这个问题使用扩展分区下的逻辑分区，扩展分区存储的是逻辑分区的范围，所以实际使用的是逻辑分区，扩展分区只用于存放逻辑分区的范围。接下来我们详细介绍划分主分区与扩展分区、逻辑分区。首先介绍划分主分区</p> 
<p>①fdish  /dev/sdb  对sdb磁盘进行分区进入人机交互界面，如下图。</p> 
<p class="img-center"><img alt="" height="262" src="https://images2.imgbox.com/bc/ed/A1ntY5o2_o.png" width="569"></p> 
<p> ②输入n表示添加分区，选择分区类型，p为主分区</p> 
<p class="img-center"><img alt="" height="303" src="https://images2.imgbox.com/26/6a/4hx6hO6D_o.png" width="623"></p> 
<p> ③选择分区号，起始扇区，直接回车使用默认值，分区号1起始扇区2048开始</p> 
<p class="img-center"><img alt="" height="306" src="https://images2.imgbox.com/07/43/yMCEMz8Y_o.png" width="607"></p> 
<p> ④设置分区大小，使用格式+n单位，大写的单位如下图+5G。设置完成后p查看分区情况，w保存退出</p> 
<p class="img-center"><img alt="" height="251" src="https://images2.imgbox.com/ac/d1/lf1PnsZr_o.png" width="607"></p> 
<p> ⑤至此主分区划分完毕，接下来介绍扩展分区、逻辑分区划分。同样的步骤dish  /dev/sdb  对sdb磁盘进行分区进入人机交互界面，输入n添加分区。</p> 
<p class="img-center"><img alt="" height="227" src="https://images2.imgbox.com/b6/1f/cxnMQwVz_o.png" width="604"></p> 
<p>⑥ 然后输入e添加扩展分区，分区号回车默认、起始扇区回车默认、然后设置扩展分区大小，格式和主分区一样+n单位，单位大写。如下图10G，然后w保存。</p> 
<p class="img-center"><img alt="" height="229" src="https://images2.imgbox.com/fb/93/AND5N4wE_o.png" width="605"></p> 
<p> ⑦扩展分区划分完毕后再进入划分逻辑分区，同样的步骤dish  /dev/sdb  对sdb磁盘进行分区进入人机交互界面，输入n添加分区。此时输入l选择逻辑分区，回车默认起始扇区，然后设置逻辑分区大小，此处注意必须在扩展分区的大小范围内，小于10G，由于有所损耗可能扩展分区不满10G，此处划分5G给逻辑分区，然后p打印分区情况可以看到已经有逻辑分区sdb5，输入w保存退出。</p> 
<p class="img-center"><img alt="" height="541" src="https://images2.imgbox.com/6d/30/4qkJHCdR_o.png" width="612"></p> 
<p> ⑧至此俩种类型划分分区都已完成。接下来进行格式话</p> 
<h4 id="3%E3%80%81%E6%A0%BC%E5%BC%8F%E5%8C%96%E5%88%86%E5%8C%BA">3、格式化分区</h4> 
<p>①划分分区完成后首先使用lsblk命令查看分区是否同步到系统中，如果没显示划分的分区则使用partprobe命令刷新分区表，然后再使用lsblk查看是否显示划分的分区，如下图是直接显示扩展分区sdb2和逻辑sdb5的。</p> 
<p class="img-center"><img alt="" height="260" src="https://images2.imgbox.com/48/32/P7iKc9Si_o.png" width="636"></p> 
<p> ②分区显示出来以后对分区进行格式化，使用mkfs.xfs +分区名，如下图。</p> 
<p class="img-center"><img alt="" height="353" src="https://images2.imgbox.com/95/06/M3AQk5U7_o.png" width="653"></p> 
<h4 id="%C2%A04%E3%80%81%E6%8C%82%E8%BD%BD%E5%88%86%E5%8C%BA%E5%8F%8A%E4%BD%BF%E7%94%A8"> 4、挂载分区及使用</h4> 
<p>格式化分区完成后就可以进行挂载使用了，注意挂载的目录最好是一个空目录，如果不是空目录会将原目录里的内容隐藏，可能会导致数据丢失，同一挂载点不要挂载多个磁盘。挂载命令  mount  +挂载分区   +挂载点(空目录)，挂载完成后使用df  -h 查看挂载情况，如下图。</p> 
<p class="img-center"><img alt="" height="260" src="https://images2.imgbox.com/d8/92/c3NrHRgC_o.png" width="637"></p> 
<h4 id="5%E3%80%81%E6%B0%B8%E4%B9%85%E6%8C%82%E8%BD%BD">5、永久挂载</h4> 
<p> ①以上挂载是临时挂载，若重启服务器则挂载失效，所以需要永久挂载即使服务器重启后挂载依然生效。首先使用命令blkid查看磁盘的uuid如下图1，然后进入/etc/fstab将挂载信息写入其中如下图2。不建议写分区名，一定要写uuid，只有uuid是唯一的。</p> 
<figure class="image"> 
 <img alt="" height="203" src="https://images2.imgbox.com/ac/fb/Op7mZdJh_o.png" width="919"> 
 <figcaption>
   图1查看uuid 
 </figcaption> 
</figure> 
<figure class="image"> 
 <img alt="" height="386" src="https://images2.imgbox.com/9a/bc/smsUL6US_o.png" width="1200"> 
 <figcaption>
   /etc/fstab编写格式 
 </figcaption> 
</figure> 
<p>②配置文件修改完成后需要使用mount  -a 检查一下配置文件是否有问题，若有问题则会进行提示，无问题则不提示。如下图是有问题进行提示，若提示有问题一定要进行修改，否则会影响系统下次开机，会出control  d 错误。</p> 
<p class="img-center"><img alt="" height="85" src="https://images2.imgbox.com/33/09/KGgE2iIF_o.png" width="625"></p> 
<p>总结：至此linux系统添加磁盘及使用介绍完毕</p> 
<h3 id="%E4%B8%89%E3%80%81%E6%9C%AC%E7%AB%A0%E8%8A%82%E6%B6%89%E5%8F%8A%E9%9D%A2%E8%AF%95%E9%A2%98">三、本章节涉及面试题</h3> 
<h4 id="1%E3%80%81%E5%A6%82%E4%BD%95%E6%B7%BB%E5%8A%A0%E7%A3%81%E7%9B%98%E5%B9%B6%E4%BD%BF%E7%94%A8">1、如何添加磁盘并使用</h4> 
<p>答：如上已详细介绍</p> 
<h4 id="2%E3%80%81%E5%88%92%E5%88%86%E5%A4%A7%E4%BA%8E2T%E7%A3%81%E7%9B%98%E4%BD%BF%E7%94%A8%E4%BB%80%E4%B9%88%E5%91%BD%E4%BB%A4">2、划分大于2T磁盘使用什么命令</h4> 
<p>答：gdisk 用于分区2TB以上的磁盘分区。命令格式与fdisk一样</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1fe5d6172f96a043bd50380f972321bc/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">自动化签到的三种方式</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c3905d04e75e1c73eb4439623edebb00/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MyBtais的SQL映射文件(元素,查询,映射,动态SQL)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>