<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LayaBox入门基础之JS代码实现按钮增加功能 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LayaBox入门基础之JS代码实现按钮增加功能" />
<meta property="og:description" content="2.2.3 实现List增加功能
​ 实现List增加，需要用到LayaAir引擎laya.display.Sprite中的事件侦听on()方法对鼠标点击事件CLICK进行侦听，以及laya.ui.List API中添加单元格数据源的方法addItem()；
​ ​ （图25）
​ ​ （图26）
(function() { var Handler= Laya.Handler; var Loader= Laya.Loader; var WebGL = Laya.WebGL; var Event = Laya.Event; var Stage = Laya.Stage; var ListDemoView; var arr; (function() { Laya.init(640,1136,WebGL); Laya.stage.bgColor = &#34;#ffffff&#34;; Laya.stage.scaleMode = Stage.SCALE_SHOWALL; //预加载资源文件后执行回调 Laya.loader.load([&#34;res/atlas/ListPage.atlas&#34;,&#34;res/atlas/template/ButtonTab.atlas&#34;], Handler.create(this, onLoaded)); })(); function onLoaded(){ ListDemoView = new ListPageUI(); Laya.stage.addChild(ListDemoView); //获得List模拟数据，并渲染 getListData(); //侦听增加按钮点击事件 ListDemoView.add.on(Event.CLICK,this,onAddClick); } function getListData(){ //添加list数据 arr = []; for (var i = 1; i &lt;= 30; i&#43;&#43;) { arr." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7c7ab83971665945c5e8976387a7e208/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-12-11T18:10:00+08:00" />
<meta property="article:modified_time" content="2018-12-11T18:10:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LayaBox入门基础之JS代码实现按钮增加功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body"> 
 <p>2.2.3 实现List增加功能</p> 
 <p>​ 实现List增加，需要用到LayaAir引擎laya.display.Sprite中的事件侦听on()方法对鼠标点击事件CLICK进行侦听，以及laya.ui.List API中添加单元格数据源的方法addItem()；</p> 
 <p>​ <img src="https://images2.imgbox.com/4d/ac/rugfp68v_o.png" alt="25"><br>​ （图25）</p> 
 <p>​ <img src="https://images2.imgbox.com/38/80/ovaVNgbP_o.png" alt="26"><br>​ （图26）</p> 
 <div class="cnblogs_code"> 
  <pre>(<span style="color:#0000ff;">function</span><span style="color:#000000;">()
{
    </span><span style="color:#0000ff;">var</span> Handler=<span style="color:#000000;"> Laya.Handler;
    </span><span style="color:#0000ff;">var</span> Loader=<span style="color:#000000;"> Laya.Loader;
    </span><span style="color:#0000ff;">var</span> WebGL =<span style="color:#000000;"> Laya.WebGL;
    </span><span style="color:#0000ff;">var</span> Event   =<span style="color:#000000;"> Laya.Event;
    </span><span style="color:#0000ff;">var</span> Stage =<span style="color:#000000;"> Laya.Stage;
     </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> ListDemoView;
     </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> arr;
    (</span><span style="color:#0000ff;">function</span><span style="color:#000000;">()
    {
         Laya.init(</span>640,1136<span style="color:#000000;">,WebGL);
         Laya.stage.bgColor </span>= "#ffffff"<span style="color:#000000;">;
         Laya.stage.scaleMode </span>=<span style="color:#000000;"> Stage.SCALE_SHOWALL;
          </span><span style="color:#008000;">//</span><span style="color:#008000;">预加载资源文件后执行回调</span>
         Laya.loader.load(["res/atlas/ListPage.atlas","res/atlas/template/ButtonTab.atlas"], Handler.create(<span style="color:#0000ff;">this</span><span style="color:#000000;">, onLoaded));
    })();
    </span><span style="color:#0000ff;">function</span><span style="color:#000000;"> onLoaded(){
        ListDemoView </span>= <span style="color:#0000ff;">new</span><span style="color:#000000;"> ListPageUI();
        Laya.stage.addChild(ListDemoView);
        </span><span style="color:#008000;">//</span><span style="color:#008000;">获得List模拟数据，并渲染</span>
<span style="color:#000000;">         getListData(); 
         </span><span style="color:#008000;">//</span><span style="color:#008000;">侦听增加按钮点击事件</span>
         ListDemoView.add.on(Event.CLICK,<span style="color:#0000ff;">this</span><span style="color:#000000;">,onAddClick);
    }
    </span><span style="color:#0000ff;">function</span><span style="color:#000000;"> getListData(){
        </span><span style="color:#008000;">//</span><span style="color:#008000;">添加list数据</span>
        arr =<span style="color:#000000;"> [];
        </span><span style="color:#0000ff;">for</span> (<span style="color:#0000ff;">var</span> i  = 1; i &lt;= 30; i++<span style="color:#000000;">) {
            arr.push({listNumber: {text:i}});
           }
        ListDemoView._list.vScrollBarSkin</span>='';<span style="color:#008000;">//</span><span style="color:#008000;">添加list滚动条功能（UI不可显示）</span>
        ListDemoView._list.array = arr;<span style="color:#008000;">//</span><span style="color:#008000;">数据赋值</span>
         <span style="color:#008000;">//</span><span style="color:#008000;">list渲染函数</span>
          ListDemoView._list.renderHandler = <span style="color:#0000ff;">new</span> Handler(<span style="color:#0000ff;">this</span><span style="color:#000000;">, onRender);
    }
    </span><span style="color:#0000ff;">function</span><span style="color:#000000;"> onRender(cell,index){
         </span><span style="color:#008000;">//</span><span style="color:#008000;">如果索引不再可索引范围，则终止该函数</span>
        <span style="color:#0000ff;">if</span>(index &gt; arr.length)<span style="color:#0000ff;">return</span><span style="color:#000000;">;
        </span><span style="color:#008000;">//</span><span style="color:#008000;">获取当前渲染条目的数据</span>
        <span style="color:#0000ff;">var</span> data =<span style="color:#000000;"> arr[index];
        </span><span style="color:#008000;">//</span><span style="color:#008000;">根据子节点的名字listNumber，获取子节点对象。         </span>
        <span style="color:#0000ff;">var</span> listNumber = cell.getChildByName("listNumber"<span style="color:#000000;">) ;
        </span><span style="color:#008000;">//</span><span style="color:#008000;">label渲染列表文本（序号）</span>
        listNumber.text=<span style="color:#000000;">data.listNumber.text;
    }
      </span><span style="color:#0000ff;">function</span><span style="color:#000000;"> onAddClick(){
         </span><span style="color:#008000;">//</span><span style="color:#008000;">添加单元格数据源</span>
         ListDemoView._list.addItem({listNumber: {text:arr.length+1<span style="color:#000000;">}});
    }
})();</span></pre> 
 </div> 
 <p> </p> 
 <p>​ 详情直接查看代码与注释。</p> 
 <p>​ 代码运行效果如图27所示：</p> 
 <p>​ <img src="https://images2.imgbox.com/1c/18/rFZdPbEO_o.png" alt="27"><br>​ （图27）实现列表增加效果</p> 
</div> 
<p>转载于:https://www.cnblogs.com/hqutcy/p/10103928.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1114788f09b245e6d75577623a481027/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python合并多个word文档（带图片等）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/984e5d6d80e239ad2ef3077837937a6a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">LayaBox入门基础之JS代码实现按钮删除功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>