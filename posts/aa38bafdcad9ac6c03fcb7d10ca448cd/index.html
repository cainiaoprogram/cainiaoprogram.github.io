<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue3è¯¦ç»†è®²è§£ - èœé¸Ÿç¨‹åºå‘˜åšå®¢</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue3è¯¦ç»†è®²è§£" />
<meta property="og:description" content="Vue 3 ä»‹ç» æ–‡ç« ç›®å½• Vue 3 ä»‹ç»ä¸ºä»€ä¹ˆè¦å­¦ä¹  vue 3Vue3 åŠ¨æœº å’Œ æ–°ç‰¹æ€§ Vite çš„ä½¿ç”¨viteä»‹ç»ä¸ºä»€ä¹ˆé€‰ Vite ï¼ŸVite çš„åŸºæœ¬ä½¿ç”¨Vue3.0é¡¹ç›®ä»‹ç»vscodeæ’ä»¶è¯´æ˜ ç»„åˆå¼APIcomposition API vs options APIä½“éªŒ composition APIsetup å‡½æ•°reactive å‡½æ•°ref å‡½æ•°script setupè¯­æ³•(â˜…)è®¡ç®—å±æ€§computedå‡½æ•°ä¾¦å¬å™¨watchå‡½æ•°é’©å­å‡½æ•°çš„ä½¿ç”¨ç»„ä»¶é€šè®¯-çˆ¶ä¼ å­ç»„ä»¶é€šè®¯-å­ä¼ çˆ¶ä¾èµ–æ³¨å…¥ - provide å’Œ injectæ¨¡æ¿ä¸­ ref çš„ä½¿ç”¨vue3ä¸­åºŸå¼ƒäº†è¿‡æ»¤å™¨è¡¥å……-toRefs å‡½æ•° vue-router4åŸºæœ¬ä½¿ç”¨ç»„ä»¶ä¸­ä½¿ç”¨routeä¸router vuex4åŸºæœ¬ä½¿ç”¨åœ¨ç»„ä»¶ä¸­ä½¿ç”¨vuex ä¸ºä»€ä¹ˆè¦å­¦ä¹  vue 3 ä¸ºä»€ä¹ˆè¦å­¦vue3:
Vueæ˜¯å›½å†…æœ€ç«çš„å‰ç«¯æ¡†æ¶Vue 3 äº 2022 å¹´ 2 æœˆ 7 æ—¥æ˜ŸæœŸä¸€æˆä¸ºæ–°çš„é»˜è®¤ç‰ˆæœ¬! åŸæ–‡é“¾æ¥ï¼šhttps://blog.vuejs.org/posts/vue-3-as-the-new-default.htmlä¸­æ–‡é“¾æ¥ï¼šhttps://zhuanlan.zhihu.com/p/460055155 Vue3æ€§èƒ½æ›´é«˜ï¼Œä½“ç§¯æ›´å°Vue3.0åœ¨ç»è¿‡ä¸€å¹´çš„è¿­ä»£åï¼Œè¶Šæ¥è¶Šå¥½ç”¨ å®˜æ–¹æ–‡æ¡£ï¼š
vue3å®˜æ–¹æ–‡æ¡£ï¼šhttps://vuejs.org/vue3ä¸­æ–‡æ–‡æ¡£ï¼šhttps://v3.cn.vuejs.org/ ç›®å‰å·²æ”¯æŒ vue3 çš„UIç»„ä»¶åº“:
element-plus
https://element-plus.gitee.io/#/zh-CN (PCç»„ä»¶åº“)
Element Plusï¼Œä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäº Vue 3.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“ã€‚
vant
https://vant-contrib.gitee.io/vant/v3/#/zh-CN
è½»é‡ã€å¯é çš„ç§»åŠ¨ç«¯ Vue ç»„ä»¶åº“ã€‚" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/aa38bafdcad9ac6c03fcb7d10ca448cd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-07T20:34:14+08:00" />
<meta property="article:modified_time" content="2023-02-07T20:34:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="èœé¸Ÿç¨‹åºå‘˜åšå®¢" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">èœé¸Ÿç¨‹åºå‘˜åšå®¢</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue3è¯¦ç»†è®²è§£</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="Vue_3__0"></a>Vue 3 ä»‹ç»</h2> 
<blockquote> 
 <p></p> 
 <div class="toc"> 
  <h4>æ–‡ç« ç›®å½•</h4> 
  <ul><li><a href="#Vue_3__0" rel="nofollow">Vue 3 ä»‹ç»</a></li><li><ul><li><a href="#_vue_3_4" rel="nofollow">ä¸ºä»€ä¹ˆè¦å­¦ä¹  vue 3</a></li><li><a href="#Vue3____48" rel="nofollow">Vue3 åŠ¨æœº å’Œ æ–°ç‰¹æ€§</a></li></ul> 
   </li><li><a href="#Vite__82" rel="nofollow">Vite çš„ä½¿ç”¨</a></li><li><ul><li><a href="#vite_93" rel="nofollow">viteä»‹ç»</a></li><li><a href="#_Vite__106" rel="nofollow">ä¸ºä»€ä¹ˆé€‰ Vite ï¼Ÿ</a></li><li><a href="#Vite__130" rel="nofollow">Vite çš„åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#Vue30_182" rel="nofollow">Vue3.0é¡¹ç›®ä»‹ç»</a></li><li><a href="#vscode_205" rel="nofollow">vscodeæ’ä»¶è¯´æ˜</a></li></ul> 
   </li><li><a href="#API_216" rel="nofollow">ç»„åˆå¼API</a></li><li><ul><li><a href="#composition_API_vs_options_API_218" rel="nofollow">composition API vs options API</a></li><li><a href="#_composition_API_242" rel="nofollow">ä½“éªŒ composition API</a></li><li><a href="#setup__383" rel="nofollow">setup å‡½æ•°</a></li><li><a href="#reactive__422" rel="nofollow">reactive å‡½æ•°</a></li><li><a href="#ref__465" rel="nofollow">ref å‡½æ•°</a></li><li><a href="#script_setup_506" rel="nofollow">script setupè¯­æ³•(â˜…)</a></li><li><a href="#computed_539" rel="nofollow">è®¡ç®—å±æ€§computedå‡½æ•°</a></li><li><a href="#watch_572" rel="nofollow">ä¾¦å¬å™¨watchå‡½æ•°</a></li><li><a href="#_622" rel="nofollow">é’©å­å‡½æ•°çš„ä½¿ç”¨</a></li><li><a href="#_647" rel="nofollow">ç»„ä»¶é€šè®¯-çˆ¶ä¼ å­</a></li><li><a href="#_716" rel="nofollow">ç»„ä»¶é€šè®¯-å­ä¼ çˆ¶</a></li><li><a href="#__provide__inject_765" rel="nofollow">ä¾èµ–æ³¨å…¥ - provide å’Œ inject</a></li><li><a href="#_ref__842" rel="nofollow">æ¨¡æ¿ä¸­ ref çš„ä½¿ç”¨</a></li><li><a href="#vue3_918" rel="nofollow">vue3ä¸­åºŸå¼ƒäº†è¿‡æ»¤å™¨</a></li><li><a href="#toRefs__950" rel="nofollow">è¡¥å……-toRefs å‡½æ•°</a></li></ul> 
   </li><li><a href="#vuerouter4_984" rel="nofollow">vue-router4</a></li><li><ul><li><a href="#_998" rel="nofollow">åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#routerouter_1065" rel="nofollow">ç»„ä»¶ä¸­ä½¿ç”¨routeä¸router</a></li></ul> 
   </li><li><a href="#vuex4_1105" rel="nofollow">vuex4</a></li><li><ul><li><a href="#_1107" rel="nofollow">åŸºæœ¬ä½¿ç”¨</a></li><li><a href="#vuex_1162" rel="nofollow">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨vuex</a></li></ul> 
  </li></ul> 
 </div> 
 <p></p> 
</blockquote> 
<h3><a id="_vue_3_4"></a>ä¸ºä»€ä¹ˆè¦å­¦ä¹  vue 3</h3> 
<p><img src="https://images2.imgbox.com/ec/39/vD3lv1d0_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ä¸ºä»€ä¹ˆè¦å­¦vue3:</p> 
<ol><li>Vueæ˜¯å›½å†…æœ€ç«çš„å‰ç«¯æ¡†æ¶</li><li>Vue 3 äº 2022 å¹´ 2 æœˆ 7 æ—¥æ˜ŸæœŸä¸€æˆä¸ºæ–°çš„é»˜è®¤ç‰ˆæœ¬! 
  <ul><li>åŸæ–‡é“¾æ¥ï¼š<a href="https://blog.vuejs.org/posts/vue-3-as-the-new-default.html" rel="nofollow">https://blog.vuejs.org/posts/vue-3-as-the-new-default.html</a></li><li>ä¸­æ–‡é“¾æ¥ï¼š<a href="https://zhuanlan.zhihu.com/p/460055155" rel="nofollow">https://zhuanlan.zhihu.com/p/460055155</a></li></ul> </li><li>Vue3æ€§èƒ½æ›´é«˜ï¼Œä½“ç§¯æ›´å°</li><li>Vue3.0åœ¨ç»è¿‡ä¸€å¹´çš„è¿­ä»£åï¼Œè¶Šæ¥è¶Šå¥½ç”¨</li></ol> 
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p> 
<ul><li>vue3å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://vuejs.org/" rel="nofollow">https://vuejs.org/</a></li><li>vue3ä¸­æ–‡æ–‡æ¡£ï¼š<a href="https://v3.cn.vuejs.org/" rel="nofollow">https://v3.cn.vuejs.org/</a></li></ul> 
<p>ç›®å‰å·²æ”¯æŒ vue3 çš„UIç»„ä»¶åº“:</p> 
<ul><li> <p><strong>element-plus</strong></p> <p><a href="https://element-plus.gitee.io/#/zh-CN" rel="nofollow">https://element-plus.gitee.io/#/zh-CN</a> (PCç»„ä»¶åº“)</p> <p>Element Plusï¼Œä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäº Vue 3.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“ã€‚</p> </li><li> <p><strong>vant</strong></p> <p><a href="https://vant-contrib.gitee.io/vant/v3/#/zh-CN" rel="nofollow">https://vant-contrib.gitee.io/vant/v3/#/zh-CN</a></p> <p>è½»é‡ã€å¯é çš„ç§»åŠ¨ç«¯ Vue ç»„ä»¶åº“ã€‚</p> <p>Vant æ˜¯æœ‰èµå‰ç«¯å›¢é˜Ÿå¼€æºçš„ç§»åŠ¨ç«¯ç»„ä»¶åº“ï¼Œäº 2016 å¹´å¼€æºï¼Œå·²æŒç»­ç»´æŠ¤ 4 å¹´æ—¶é—´ã€‚</p> <p>ç›®å‰ Vant å·²å®Œæˆäº†å¯¹ Vue 3.0 çš„é€‚é…å·¥ä½œï¼Œå¹¶å‘å¸ƒäº† Vant 3.0 ç‰ˆæœ¬</p> </li></ul> 
<ul><li> <p><strong>ant-design-vue</strong> (PCç»„ä»¶åº“)</p> <p><a href="https://antdv.com/docs/vue/introduce-cn/" rel="nofollow">https://antdv.com/docs/vue/introduce-cn/</a></p> <p>ant-design-vue æ˜¯ Ant Design çš„ Vue å®ç°ï¼Œç»„ä»¶çš„é£æ ¼ä¸ Ant Design ä¿æŒåŒæ­¥</p> </li></ul> 
<h3><a id="Vue3____48"></a>Vue3 åŠ¨æœº å’Œ æ–°ç‰¹æ€§</h3> 
<p>Vue3 è®¾è®¡ç†å¿µ <a href="https://vue3js.cn/vue-composition/" rel="nofollow">https://vue3js.cn/vue-composition/ </a></p> 
<p>åŠ¨æœºä¸ç›®çš„:</p> 
<ol><li> <p>æ›´å¥½çš„é€»è¾‘å¤ç”¨ ä¸ ä»£ç ç»„ç»‡ (compositionç»„åˆå¼api)</p> <p>optionsAPI(æ—§) =&gt; compositionAPIï¼ˆæ–°ï¼‰, æ•ˆæœ: ä»£ç ç»„ç»‡æ›´æ–¹ä¾¿äº†, é€»è¾‘å¤ç”¨æ›´æ–¹ä¾¿äº† éå¸¸åˆ©äºç»´æŠ¤!!</p> </li><li> <p>æ›´å¥½çš„ç±»å‹æ¨å¯¼ (typescriptæ”¯æŒ)</p> <p>vue3 æºç ç”¨ ts é‡å†™äº†, vue3 å¯¹ ts çš„æ”¯æŒæ›´å‹å¥½äº† (ts å¯ä»¥è®©ä»£ç æ›´åŠ ç¨³å®š, ç±»å‹æ£€æµ‹! )</p> </li></ol> 
<p>vue3æ–°ç‰¹æ€§ï¼š</p> 
<ol><li> <p>æ•°æ®å“åº”å¼åŸç†é‡æ–°å®ç° (ES6 proxy æ›¿ä»£äº† ES5 çš„ Object.defineProperty)</p> <p>è§£å†³äº†: ä¾‹å¦‚æ•°ç»„çš„æ›´æ–°æ£€æµ‹ç­‰bug, å¤§å¤§ä¼˜åŒ–äº†å“åº”å¼ç›‘å¬çš„æ€§èƒ½</p> <p>(åŸæ¥æ£€æµ‹å¯¹è±¡å±æ€§çš„å˜åŒ–, éœ€è¦ä¸€ä¸ªä¸ªå¯¹å±æ€§é€’å½’ç›‘å¬) <strong>proxy å¯ä»¥ç›´æ¥å¯¹æ•´ä¸ªå¯¹è±¡åŠ«æŒ</strong></p> </li><li> <p>è™šæ‹ŸDOM - æ–°ç®—æ³• (æ›´å¿« æ›´å°)</p> </li><li> <p><strong>æä¾›äº†composition api, å¯ä»¥æ›´å¥½çš„é€»è¾‘å¤ç”¨</strong></p> </li><li> <p>æ¨¡æ¿å¯ä»¥æœ‰å¤šä¸ªæ ¹å…ƒç´ </p> </li><li> <p>æºç ç”¨ typescript é‡å†™, æœ‰æ›´å¥½çš„ç±»å‹æ¨å¯¼ (ç±»å‹æ£€æµ‹æ›´ä¸ºä¸¥æ ¼, æ›´ç¨³å®š)</p> <p>â€¦</p> </li></ol> 
<p><strong>å°ç»“ï¼š vue3 æ€§èƒ½æ›´é«˜, ä½“ç§¯æ›´å°, æ›´åˆ©äºå¤ç”¨, ä»£ç ç»´æŠ¤æ›´æ–¹ä¾¿</strong></p> 
<h2><a id="Vite__82"></a>Vite çš„ä½¿ç”¨</h2> 
<p><img src="https://images2.imgbox.com/ed/80/ngFhmXFF_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>webpack =&gt; å®æ—¶æ‰“åŒ…(æœåŠ¡å™¨) =&gt; æµè§ˆå™¨è¿è¡Œ</p> 
<p>vite =&gt; ç›´æ¥ç¼–è¯‘è¾“å‡º =&gt; å°†ä¸€éƒ¨åˆ†æ¨¡å—åŒ–ä¾èµ–åŠ è½½è§£æçš„åŠŸèƒ½ äº¤ç»™äº†æµè§ˆå™¨</p> 
<h3><a id="vite_93"></a>viteä»‹ç»</h3> 
<blockquote> 
 <p>Vite å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://cn.vitejs.dev/" rel="nofollow">https://cn.vitejs.dev/</a></p> 
</blockquote> 
<p>Viteï¼ˆæ³•è¯­æ„ä¸º â€œå¿«é€Ÿçš„â€ï¼Œå‘éŸ³ <code>/vit/</code>ï¼Œå‘éŸ³åŒ â€œveetâ€)æ˜¯ä¸€ç§æ–°å‹å‰ç«¯æ„å»ºå·¥å…·</p> 
<p><strong>ä¼˜åŠ¿</strong></p> 
<ul><li>ğŸ’¡ æé€Ÿçš„æœåŠ¡å¯åŠ¨ï¼Œä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…</li><li>âš¡ï¸ è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼Œå§‹ç»ˆæå¿«çš„æ¨¡å—çƒ­é‡è½½ï¼ˆHMRï¼‰</li><li>ğŸ› ï¸ä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯¹ TypeScriptã€JSXã€CSS ç­‰æ”¯æŒå¼€ç®±å³ç”¨</li><li>ğŸ“¦ç­‰ç­‰</li></ul> 
<h3><a id="_Vite__106"></a>ä¸ºä»€ä¹ˆé€‰ Vite ï¼Ÿ</h3> 
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong></p> 
<ul><li>åŸºäºæ‰“åŒ…å™¨çš„æ–¹å¼å¯åŠ¨ï¼Œå¿…é¡»ä¼˜å…ˆæŠ“å–å¹¶æ„å»ºä½ çš„æ•´ä¸ªåº”ç”¨ï¼Œç„¶åæ‰èƒ½æä¾›æœåŠ¡ã€‚</li><li>æ›´æ–°é€Ÿåº¦ä¼šéšç€åº”ç”¨ä½“ç§¯å¢é•¿è€Œç›´çº¿ä¸‹é™ã€‚</li></ul> 
<p><img src="https://images2.imgbox.com/49/21/korZ3rCX_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>vite æ–¹å¼</strong></p> 
<ul><li>Vite ä»¥ <a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FGuide%2FModules" rel="nofollow">åŸç”Ÿ ESM</a> æ–¹å¼æä¾›æºç ã€‚è¿™å®é™…ä¸Šæ˜¯è®©æµè§ˆå™¨æ¥ç®¡äº†æ‰“åŒ…ç¨‹åºçš„éƒ¨åˆ†å·¥ä½œã€‚</li><li>Vite åªéœ€è¦åœ¨æµè§ˆå™¨è¯·æ±‚æºç æ—¶è¿›è¡Œè½¬æ¢å¹¶ <strong>æŒ‰éœ€æä¾›æºç </strong>ã€‚</li><li>æ ¹æ®æƒ…æ™¯åŠ¨æ€å¯¼å…¥ä»£ç ï¼Œå³åªåœ¨å½“å‰å±å¹•ä¸Šå®é™…ä½¿ç”¨æ—¶æ‰ä¼šè¢«å¤„ç†ã€‚</li></ul> 
<p><img src="https://images2.imgbox.com/6c/5d/873mljNV_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>é—®é¢˜å°ç»“:</p> 
<ul><li>Vite æ˜¯å¦éœ€è¦å…ˆæ‰“åŒ…æ‰èƒ½æä¾›æœåŠ¡ï¼Ÿ</li><li>ä½¿ç”¨webpackèƒ½å¦åˆ›å»ºvue3çš„é¡¹ç›®ï¼Ÿ webpackä¹Ÿèƒ½æ„å»º vue3</li></ul> 
<h3><a id="Vite__130"></a>Vite çš„åŸºæœ¬ä½¿ç”¨</h3> 
<blockquote> 
 <p>ç›®æ ‡ï¼šèƒ½å¤Ÿä½¿ç”¨viteåˆ›å»ºä¸€ä¸ªvue3çš„é¡¹ç›®</p> 
</blockquote> 
<p>ï¼ˆ1ï¼‰ä½¿ç”¨viteåˆ›å»ºé¡¹ç›®</p> 
<pre><code class="prism language-bash"><span class="token function">npm</span> create vite
<span class="token comment"># or</span>
<span class="token function">yarn</span> create vite
</code></pre> 
<p>ï¼ˆ2ï¼‰è¾“å…¥é¡¹ç›®åå­—ï¼Œé»˜è®¤ä¸ºvite-project</p> 
<p><img src="https://images2.imgbox.com/b1/a5/lhl6vDi0_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ï¼ˆ3ï¼‰é€‰æ‹©åˆ›å»ºçš„é¡¹ç›®ç±»å‹ï¼Œé€‰æ‹©vueå³å¯</p> 
<p><img src="https://images2.imgbox.com/5b/ae/fQfY5eN3_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ï¼ˆ4ï¼‰é€‰æ‹©åˆ›å»ºçš„vueé¡¹ç›®ç±»å‹ï¼Œ ä¸é€‰ts</p> 
<p><img src="https://images2.imgbox.com/08/1b/EpDyTpK8_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>ï¼ˆ5ï¼‰å¯åŠ¨é¡¹ç›®</p> 
<p><img src="https://images2.imgbox.com/0d/c0/dunsZbce_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p><strong>viteå¿«æ·ä½¿ç”¨</strong></p> 
<p>å¦‚æœæƒ³è¦å¿«é€Ÿåˆ›å»ºä¸€ä¸ªvue3é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤</p> 
<ul><li>åˆ›å»ºæ™®é€švueé¡¹ç›®</li></ul> 
<pre><code class="prism language-bash"><span class="token function">yarn</span> create vite vite-demo <span class="token parameter variable">--template</span> vue
</code></pre> 
<ul><li>åˆ›å»ºåŸºäºtsæ¨¡æ¿çš„é¡¹ç›®</li></ul> 
<pre><code class="prism language-bash"><span class="token function">yarn</span> create vite vite-demo-ts <span class="token parameter variable">--template</span> vue-ts
</code></pre> 
<h3><a id="Vue30_182"></a>Vue3.0é¡¹ç›®ä»‹ç»</h3> 
<blockquote> 
 <p>ä»»åŠ¡ç›®æ ‡ï¼šæŒæ¡vue3çš„é¡¹ç›®ç›®å½•ç»“æ„</p> 
</blockquote> 
<ul><li> <p>åˆ é™¤srcä¸‹æ‰€æœ‰çš„æ–‡ä»¶å’Œä»£ç </p> </li><li> <p>åˆ›å»ºApp.vue</p> </li></ul> 
<pre><code class="prism language-ts"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æˆ‘æ˜¯Appç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<ul><li>åˆ›å»ºmain.jsæ–‡ä»¶</li></ul> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="vscode_205"></a>vscodeæ’ä»¶è¯´æ˜</h3> 
<ul><li>vue2ä¸­éœ€è¦å®‰è£…æ’ä»¶<code>vetur</code>ï¼Œå¯ä»¥å®ç°ç»„ä»¶é«˜äº®ã€‚ä½†æ˜¯vue3çš„ä¸€äº›è¯­æ³•åœ¨veturä¸­æŠ¥é”™ã€‚</li><li>vue3ä¸­éœ€è¦å®‰è£…æ’ä»¶<code>volor</code>ï¼Œæä¾›äº†æ›´åŠ å¼ºå¤§çš„åŠŸèƒ½ã€‚</li><li>æ‰€ä»¥ï¼Œä½¿ç”¨åŠŸèƒ½vue3ï¼Œéœ€è¦å¸è½½<code>vetur</code>æ’ä»¶ï¼Œå®‰è£…<code>volar</code>æ’ä»¶ã€‚</li></ul> 
<p><img src="https://images2.imgbox.com/36/3e/wm8TEFCM_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h2><a id="API_216"></a>ç»„åˆå¼API</h2> 
<h3><a id="composition_API_vs_options_API_218"></a>composition API vs options API</h3> 
<ol><li> <p>vue2 é‡‡ç”¨çš„å°±æ˜¯ <code>optionsAPI</code></p> <p>(1) ä¼˜ç‚¹:<strong><code>æ˜“äºå­¦ä¹ å’Œä½¿ç”¨</code></strong>, æ¯ä¸ªä»£ç æœ‰ç€æ˜ç¡®çš„ä½ç½® (ä¾‹å¦‚: æ•°æ®æ”¾ data ä¸­, æ–¹æ³•æ”¾ methodsä¸­)</p> <p>(2) ç¼ºç‚¹: ç›¸ä¼¼çš„é€»è¾‘, ä¸å®¹æ˜“å¤ç”¨, åœ¨å¤§é¡¹ç›®ä¸­å°¤ä¸ºæ˜æ˜¾</p> <p>(3) è™½ç„¶ optionsAPI å¯ä»¥é€šè¿‡mixins æå–ç›¸åŒçš„é€»è¾‘, ä½†æ˜¯ä¹Ÿå¹¶ä¸æ˜¯ç‰¹åˆ«å¥½ç»´æŠ¤</p> </li><li> <p>vue3 æ–°å¢çš„å°±æ˜¯ <code>compositionAPI </code></p> <p>(1) compositionAPI æ˜¯åŸºäº <strong>é€»è¾‘åŠŸèƒ½</strong> ç»„ç»‡ä»£ç çš„, ä¸€ä¸ªåŠŸèƒ½ api ç›¸å…³æ”¾åˆ°ä¸€èµ·</p> <p>(2) å³ä½¿é¡¹ç›®å¤§äº†, åŠŸèƒ½å¤šäº†, ä¹Ÿèƒ½å¿«é€Ÿå®šä½åŠŸèƒ½ç›¸å…³çš„ api</p> <p>(3) å¤§å¤§çš„æå‡äº† <code>ä»£ç å¯è¯»æ€§</code> å’Œ <code>å¯ç»´æŠ¤æ€§</code></p> </li><li> <p>vue3 æ¨èä½¿ç”¨ composition API, ä¹Ÿä¿ç•™äº†options API</p> <p>å³å°±ç®—ä¸ç”¨composition API, ç”¨ vue2 çš„å†™æ³•ä¹Ÿå®Œå…¨å…¼å®¹!!</p> </li></ol> 
<p>é—®é¢˜å°ç»“:<code> optionsAPI</code>çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆ? vue3 æ–°å¢çš„ <code>compositionAPI </code> æœ‰ä»€ä¹ˆç‰¹å¾? æœ‰ä»€ä¹ˆä¼˜åŠ¿?</p> 
<h3><a id="_composition_API_242"></a>ä½“éªŒ composition API</h3> 
<p><strong>éœ€æ±‚: é¼ æ ‡ç§»åŠ¨æ˜¾ç¤ºé¼ æ ‡åæ ‡ x, y</strong></p> 
<p><img src="https://images2.imgbox.com/18/99/mhhp46mO_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>options API ç‰ˆæœ¬</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>å½“å‰é¼ æ ‡ä½ç½®<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>x<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> mouse<span class="token punctuation">.</span>x <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>y<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> mouse<span class="token punctuation">.</span>y <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>å½“å‰ç‚¹å‡»æ¬¡æ•°ï¼š<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>ç‚¹å‡»<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token comment">// vue2 ä¸­é‡‡ç”¨çš„æ˜¯ options API</span>
  <span class="token comment">// å¸¸è§çš„é…ç½®é¡¹: data created methods watch computed components</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">mouse</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>move<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX
      <span class="token keyword">this</span><span class="token punctuation">.</span>mouse<span class="token punctuation">.</span>y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>count<span class="token operator">++</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">destroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>move<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>composition API ç‰ˆæœ¬</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>å½“å‰é¼ æ ‡ä½ç½®<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>x<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> mouse<span class="token punctuation">.</span>x <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>y<span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> mouse<span class="token punctuation">.</span>y <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>å½“å‰ç‚¹å‡»æ¬¡æ•°ï¼š<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>ç‚¹å‡»<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> onMounted<span class="token punctuation">,</span> onUnmounted<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      count<span class="token punctuation">.</span>value<span class="token operator">++</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> mouse <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token function-variable function">move</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      mouse<span class="token punctuation">.</span>x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX
      mouse<span class="token punctuation">.</span>y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY
    <span class="token punctuation">}</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      count<span class="token punctuation">,</span>
      add<span class="token punctuation">,</span>
      mouse<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>æŠ½ç¦»é€»è¾‘</p> 
<pre><code class="prism language-js"><span class="token keyword">function</span> <span class="token function">useMouse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> mouse <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">move</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    mouse<span class="token punctuation">.</span>x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX
    mouse<span class="token punctuation">.</span>y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY
  <span class="token punctuation">}</span>
  <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> mouse
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">useCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
    count<span class="token punctuation">,</span>
    add<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>é—®é¢˜å°ç»“:<code> optionsAPI</code>çš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆ? vue3 æ–°å¢çš„ <code>compositionAPI </code> æœ‰ä»€ä¹ˆç‰¹å¾? æœ‰ä»€ä¹ˆä¼˜åŠ¿?</p> 
<p>optionsAPI:</p> 
<ul><li>ä¼˜ç‚¹:<strong><code>æ˜“äºå­¦ä¹ å’Œä½¿ç”¨</code></strong>, æ¯ä¸ªä»£ç æœ‰ç€æ˜ç¡®çš„ä½ç½®</li><li>ç¼ºç‚¹: ç›¸ä¼¼çš„é€»è¾‘, ä¸å®¹æ˜“å¤ç”¨</li></ul> 
<p>compositionAPI:</p> 
<ul><li>åŸºäº <strong>é€»è¾‘åŠŸèƒ½</strong> ç»„ç»‡ä»£ç </li><li>å¯ç»´æŠ¤æ€§å¥½!</li></ul> 
<h3><a id="setup__383"></a>setup å‡½æ•°</h3> 
<p>composition apiçš„ä½¿ç”¨, éœ€è¦é…ç½®ä¸€ä¸ªsetup å‡½æ•°</p> 
<ol><li>setup å‡½æ•°æ˜¯ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹, ä½œä¸ºç»„ä»¶ä¸­ compositionAPI çš„èµ·ç‚¹</li><li>ä»ç”Ÿå‘½å‘¨æœŸè§’åº¦æ¥çœ‹, setup ä¼šåœ¨ beforeCreate é’©å­å‡½æ•°ä¹‹å‰æ‰§è¡Œ</li><li><strong>setup ä¸­ä¸èƒ½ä½¿ç”¨ this, this æŒ‡å‘ undefined</strong></li><li>åœ¨æ¨¡ç‰ˆä¸­éœ€è¦ä½¿ç”¨çš„æ•°æ®å’Œå‡½æ•°ï¼Œéœ€è¦åœ¨ <code>setup</code> è¿”å›ã€‚</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1 @click<span class="token operator">=</span><span class="token string">"say()"</span><span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span>msg<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setupæ‰§è¡Œäº†'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token comment">// å®šä¹‰æ•°æ®å’Œå‡½æ•°</span>
    <span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token string">'hi vue3'</span>
    <span class="token keyword">const</span> <span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span> msg <span class="token punctuation">,</span> say<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'beforeCreateæ‰§è¡Œäº†'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="reactive__422"></a>reactive å‡½æ•°</h3> 
<p><strong>å‰ç½®è¯´æ˜:</strong></p> 
<ol><li>setup éœ€è¦æœ‰è¿”å›å€¼, åªæœ‰è¿”å›çš„å€¼æ‰èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</li><li>é»˜è®¤æ™®é€šçš„æ•°æ®, ä¸æ˜¯å“åº”å¼çš„</li></ol> 
<p><strong>ä½œç”¨: ä¼ å…¥ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹ï¼Œå°†å¤æ‚ç±»å‹æ•°æ®, è½¬æ¢æˆå“åº”å¼æ•°æ® ï¼ˆè¿”å›è¯¥å¯¹è±¡çš„å“åº”å¼ä»£ç†ï¼‰</strong></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> obj<span class="token punctuation">.</span>name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> obj<span class="token punctuation">.</span>age <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"obj.name = 'ls'"</span><span class="token operator">&gt;</span>æ”¹å€¼<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> reactive <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 1. setup éœ€è¦è¿”å›å€¼, è¿”å›çš„å€¼æ‰èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</span>
    <span class="token comment">// 2. é»˜è®¤çš„æ™®é€šçš„å€¼ä¸æ˜¯å“åº”å¼çš„, éœ€è¦ç”¨ reactive å‡½æ•°</span>
    <span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      obj
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p><strong>æ€»ç»“ï¼š</strong> é€šå¸¸æ˜¯ç”¨æ¥å®šä¹‰å“åº”å¼ <strong>å¯¹è±¡æ•°æ®</strong></p> 
<p>é—®é¢˜å°ç»“:</p> 
<ol><li>é»˜è®¤ setup å‡½æ•°ä¸­è¿”å›çš„ æ™®é€šå¯¹è±¡ æ˜¯å“åº”å¼çš„ä¹ˆ ?</li><li>reactive å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆ ?</li></ol> 
<h3><a id="ref__465"></a>ref å‡½æ•°</h3> 
<p>reactive å¤„ç†çš„æ•°æ®, å¿…é¡»æ˜¯å¤æ‚ç±»å‹, å¦‚æœæ˜¯ç®€å•ç±»å‹æ— æ³•å¤„ç†æˆå“åº”å¼, æ‰€ä»¥æœ‰ ref å‡½æ•°!</p> 
<p>ä½œç”¨: å¯¹ä¼ å…¥çš„æ•°æ®ï¼ˆä¸€èˆ¬ç®€å•æ•°æ®ç±»å‹ï¼‰ï¼ŒåŒ…è£¹ä¸€å±‚å¯¹è±¡, è½¬æ¢æˆå“åº”å¼ã€‚</p> 
<ol><li>ref å‡½æ•°æ¥æ”¶ä¸€ä¸ªçš„å€¼, è¿”å›ä¸€ä¸ªref å“åº”å¼å¯¹è±¡, æœ‰å”¯ä¸€çš„å±æ€§ value</li><li>åœ¨ setup å‡½æ•°ä¸­, é€šè¿‡ ref å¯¹è±¡çš„ value å±æ€§, å¯ä»¥è®¿é—®åˆ°å€¼</li><li>åœ¨æ¨¡æ¿ä¸­, ref å±æ€§ä¼šè‡ªåŠ¨è§£å¥—, ä¸éœ€è¦é¢å¤–çš„ .value</li><li>refå‡½æ•°ä¹Ÿæ”¯æŒä¼ å…¥å¤æ‚ç±»å‹ï¼Œä¼ å…¥å¤æ‚ç±»å‹ï¼Œä¹Ÿä¼šåšå“åº”å¼å¤„ç†</li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> money <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"money++"</span><span class="token operator">&gt;</span>æ”¹å€¼<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> reactive<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">let</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
    money<span class="token punctuation">.</span>value<span class="token operator">++</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      money
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>ref å’Œ reactive çš„æœ€ä½³ä½¿ç”¨æ–¹å¼ï¼š</p> 
<ul><li><strong>æ˜ç¡®çš„å¯¹è±¡ï¼Œæ˜ç¡®çš„å±æ€§ï¼Œç”¨reactiveï¼Œå…¶ä»–ç”¨ ref</strong></li><li>ä»vue3.2ä¹‹åï¼Œæ›´æ¨èä½¿ç”¨ref ï¼ˆrefåº•å±‚æ€§èƒ½åšäº†æå‡ =&gt; 260%ï¼‰</li></ul> 
<p>é—®é¢˜å°ç»“:</p> 
<ul><li>ref å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆ ?</li><li>ref å‡½æ•°åŒ…è£¹ç®€å•ç±»å‹å, ä¼šåŒ…è£¹æˆå¯¹è±¡, åœ¨æ¨¡æ¿ä¸­éœ€è¦ .value ä¹ˆ? åœ¨ setup ä¸­éœ€è¦ .value ä¹ˆ?</li></ul> 
<h3><a id="script_setup_506"></a>script setupè¯­æ³•(â˜…)</h3> 
<blockquote> 
 <p>script setupæ˜¯åœ¨å•æ–‡ä»¶ç»„ä»¶ (SFC) ä¸­ä½¿ç”¨ç»„åˆå¼ API çš„ç¼–è¯‘æ—¶è¯­æ³•ç³–ã€‚ç›¸æ¯”äºæ™®é€šçš„ script è¯­æ³•æ›´åŠ ç®€æ´</p> 
</blockquote> 
<p>è¦ä½¿ç”¨è¿™ä¸ªè¯­æ³•ï¼Œéœ€è¦å°† <code>setup</code> attribute æ·»åŠ åˆ° <code>&lt;script&gt;</code> ä»£ç å—ä¸Šï¼š</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello script setup'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>é¡¶å±‚çš„ç»‘å®šä¼šè‡ªåŠ¨æš´éœ²ç»™æ¨¡æ¿ï¼Œæ‰€ä»¥å®šä¹‰çš„å˜é‡ï¼Œå‡½æ•°å’Œimportå¯¼å…¥çš„å†…å®¹éƒ½å¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æ ¹ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>ç‚¹å‡»æ¬¡æ•°ï¼š<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> count <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"add"</span><span class="token operator">&gt;</span>ç‚¹å‡»ä¿®æ”¹<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  count<span class="token punctuation">.</span>value<span class="token operator">++</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="computed_539"></a>è®¡ç®—å±æ€§computedå‡½æ•°</h3> 
<p>computedå‡½æ•°è°ƒç”¨æ—¶, è¦æ¥æ”¶ä¸€ä¸ªå¤„ç†å‡½æ•°, å¤„ç†å‡½æ•°ä¸­, éœ€è¦è¿”å›è®¡ç®—å±æ€§çš„å€¼</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æˆ‘ä»Šå¹´çš„å¹´çºª <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"age"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æˆ‘æ˜å¹´çš„å¹´é¾„ <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> nextAge <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>æˆ‘åå¹´çš„å¹´é¾„ <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">"nextAge2"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">// ä¸å¸¦setçš„è®¡ç®—å±æ€§</span>
<span class="token keyword">const</span> nextAge <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> <span class="token operator">+</span>age<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">1</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// å¸¦setçš„è®¡ç®—å±æ€§</span>
<span class="token keyword">const</span> nextAge2 <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> <span class="token operator">+</span>age<span class="token punctuation">.</span>value <span class="token operator">+</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    age<span class="token punctuation">.</span>value <span class="token operator">=</span> value <span class="token operator">-</span> <span class="token number">2</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>é—®é¢˜å°ç»“: computed å‡½æ•°æä¾›è®¡ç®—å±æ€§, æœ‰å‡ ç§å†™æ³•?</p> 
<h3><a id="watch_572"></a>ä¾¦å¬å™¨watchå‡½æ•°</h3> 
<pre><code>watchç›‘è§†, æ¥æ”¶ä¸‰ä¸ªå‚æ•°
1. å‚æ•°1: ç›‘è§†çš„æ•°æ®æº
2. å‚æ•°2: å›è°ƒå‡½æ•°
3. å‚æ•°3: é¢å¤–çš„é…ç½®
</code></pre> 
<pre><code class="prism language-js"><span class="token comment">// ç›‘å¬å•ä¸ªref</span>
<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>money<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> oldValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ç›‘å¬å¤šä¸ªref</span>
<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>money<span class="token punctuation">,</span> count<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ç›‘å¬refå¤æ‚æ•°æ®</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  user<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'userå˜åŒ–äº†'</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// æ·±åº¦ç›‘å¬ï¼Œï¼Œï¼Œå½“refçš„å€¼æ˜¯ä¸€ä¸ªå¤æ‚æ•°æ®ç±»å‹ï¼Œéœ€è¦æ·±åº¦ç›‘å¬</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// ç›‘å¬å¯¹è±¡çš„æŸä¸ªå±æ€§çš„å˜åŒ–</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> user<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_622"></a>é’©å­å‡½æ•°çš„ä½¿ç”¨</h3> 
<p><a href="https://vue3js.cn/docs/zh/api/composition-api.html#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90" rel="nofollow">ç”Ÿå‘½å‘¨æœŸå‡½æ•°</a> vue3 ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°, éœ€è¦åœ¨ setup ä¸­è°ƒç”¨</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> onMounted<span class="token punctuation">,</span> onUpdated<span class="token punctuation">,</span> onUnmounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> MyComponent <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'mounted!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">onUpdated</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'updated!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'unmounted!'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/08/eb/7ktN8wkg_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<h3><a id="_647"></a>ç»„ä»¶é€šè®¯-çˆ¶ä¼ å­</h3> 
<blockquote> 
 <p>ç›®æ ‡ï¼šèƒ½å¤Ÿå®ç°ç»„ä»¶é€šè®¯ä¸­çš„çˆ¶ä¼ å­ç»„ä»¶é€šè®¯</p> 
</blockquote> 
<p>æ­¥éª¤ï¼š</p> 
<ol><li>çˆ¶ç»„ä»¶æä¾›æ•°æ®</li><li>çˆ¶ç»„ä»¶å°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶</li><li>å­ç»„ä»¶é€šè¿‡definePropsè¿›è¡Œæ¥æ”¶</li><li>å­ç»„ä»¶æ¸²æŸ“çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®</li></ol> 
<p><strong>æ ¸å¿ƒä»£ç ï¼š</strong></p> 
<p>çˆ¶ç»„ä»¶</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// åœ¨setupè¯­æ³•ä¸­ï¼Œç»„ä»¶å¯¼å…¥ä¹‹åå°±èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦ä½¿ç”¨componentsè¿›è¡Œå±€éƒ¨æ³¨å†Œ</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./components/Son.vue'</span>

<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'ç›èæ‹‰è’‚'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>é‡‘é’±ï¼š<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> money <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>è½¦è¾†ï¼š<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> car <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Son <span class="token operator">:</span>money<span class="token operator">=</span><span class="token string">"money"</span> <span class="token operator">:</span>car<span class="token operator">=</span><span class="token string">"car"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"less"</span> scoped<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> 
<p>å­ç»„ä»¶</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token comment">// defineProps: æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’çš„æ•°æ®</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">money</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
  <span class="token literal-property property">car</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> myMoney <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">return</span> props<span class="token punctuation">.</span>money <span class="token operator">+</span> <span class="token number">100</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> money <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> car <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"less"</span> scoped<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> 
<p>æ³¨æ„ï¼šå¦‚æœä½¿ç”¨definePropsæ¥æ”¶æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®åªèƒ½åœ¨æ¨¡æ¿ä¸­æ¸²æŸ“ï¼Œå¦‚æœæƒ³è¦åœ¨scriptä¸­ä¹Ÿæ“ä½œpropså±æ€§ï¼Œåº”è¯¥æ¥æ”¶è¿”å›å€¼ã€‚</p> 
<h3><a id="_716"></a>ç»„ä»¶é€šè®¯-å­ä¼ çˆ¶</h3> 
<blockquote> 
 <p>ç›®æ ‡ï¼šèƒ½å¤Ÿå®ç°ç»„ä»¶é€šè®¯ä¸­çš„å­ä¼ çˆ¶</p> 
</blockquote> 
<p><strong>æ­¥éª¤ï¼š</strong></p> 
<ol><li>å­ç»„ä»¶é€šè¿‡defineEmitè·å–emitå¯¹è±¡ï¼ˆå› ä¸ºæ²¡æœ‰this)</li><li>å­ç»„ä»¶é€šè¿‡emitè§¦å‘äº‹ä»¶ï¼Œå¹¶ä¸”ä¼ é€’æ•°æ®</li><li>çˆ¶ç»„ä»¶æä¾›æ–¹æ³•</li><li>çˆ¶ç»„ä»¶é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶çš„æ–¹å¼ç»™å­ç»„ä»¶æ³¨å†Œäº‹ä»¶</li></ol> 
<p><strong>æ ¸å¿ƒä»£ç </strong></p> 
<p>å­ç»„ä»¶</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">money</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
  <span class="token literal-property property">car</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'changeMoney'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'changeMoney'</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>çˆ¶ç»„ä»¶</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// åœ¨setupè¯­æ³•ä¸­ï¼Œç»„ä»¶å¯¼å…¥ä¹‹åå°±èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦ä½¿ç”¨componentsè¿›è¡Œå±€éƒ¨æ³¨å†Œ</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./components/Son.vue'</span>

<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> car <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">'ç›èæ‹‰è’‚'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeMoney</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  money<span class="token punctuation">.</span>value <span class="token operator">=</span> money<span class="token punctuation">.</span>value <span class="token operator">-</span> num
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>


<span class="token operator">&lt;</span>Son <span class="token operator">:</span>money<span class="token operator">=</span><span class="token string">"money"</span> <span class="token operator">:</span>car<span class="token operator">=</span><span class="token string">"car"</span> @changeMoney<span class="token operator">=</span><span class="token string">"changeMoney"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="__provide__inject_765"></a>ä¾èµ–æ³¨å…¥ - provide å’Œ inject</h3> 
<p>ä¾èµ–æ³¨å…¥, å¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ç° è·¨å±‚çº§çš„ ç»„ä»¶é€šä¿¡</p> 
<p><img src="https://images2.imgbox.com/ce/5b/Bue2Y4In_o.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p> 
<p>çˆ¶ç»„ä»¶åˆ©ç”¨ provide æä¾›æ•°æ®</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> provide<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./components/Son.vue'</span>
<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'money'</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>æˆ‘æ˜¯çˆ¶ç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>é‡‘é’±ï¼š<span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> money <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Son<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Son<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"less"</span> scoped<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>
</code></pre> 
<p>å­ç»„ä»¶ (å­å­™åä»£, éƒ½å¯ä»¥æ‹¿åˆ°è¿™ä¸ªæ•°æ®)</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'money'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯å­ç»„ä»¶<span class="token operator">--</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> money <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>ä¿®æ”¹æ•°æ®<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>style lang<span class="token operator">=</span><span class="token string">"less"</span> scoped<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span>

</code></pre> 
<p>å¦‚æœå¸Œæœ›å­ä¼ çˆ¶, å¯ä»¥ provide ä¼ é€’ä¸€ä¸ªæ–¹æ³•</p> 
<p><code>çˆ¶ç»„ä»¶</code></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> provide<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Son <span class="token keyword">from</span> <span class="token string">'./components/Son.vue'</span>
<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">changeMoney</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  money<span class="token punctuation">.</span>value <span class="token operator">=</span> money<span class="token punctuation">.</span>value <span class="token operator">-</span> num
<span class="token punctuation">}</span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'money'</span><span class="token punctuation">,</span> money<span class="token punctuation">)</span>
<span class="token function">provide</span><span class="token punctuation">(</span><span class="token string">'changeMoney'</span><span class="token punctuation">,</span> changeMoney<span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p><code>å­ç»„ä»¶</code></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'money'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> changeMoney <span class="token operator">=</span> <span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'changeMoney'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="_ref__842"></a>æ¨¡æ¿ä¸­ ref çš„ä½¿ç”¨</h3> 
<p>è”æƒ³ä¹‹å‰çš„ ref å’Œ $refsï¼Œ è·å–æ¨¡æ¿çš„å…ƒç´ ï¼ˆdomå…ƒç´ ï¼Œç»„ä»¶ï¼‰</p> 
<p>1 åˆ›å»º ref =&gt; <code>const hRef = ref(null)</code></p> 
<p>2 æ¨¡æ¿ä¸­å»ºç«‹å…³è” =&gt; <code>&lt;h1 ref="hRef"&gt;é’©å­å‡½æ•°-----123&lt;/h1&gt;</code></p> 
<p>3 ä½¿ç”¨ =&gt; <code>hRef.value</code></p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> hRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>  
<span class="token keyword">const</span> <span class="token function-variable function">clickFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  hRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'æˆ‘ä¸æ˜¯æ ‡é¢˜'</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1 ref<span class="token operator">=</span><span class="token string">"hRef"</span><span class="token operator">&gt;</span>æˆ‘æ˜¯æ ‡é¢˜<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"clickFn"</span><span class="token operator">&gt;</span>æ“ä½œ<span class="token constant">DOM</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<p>refæ“ä½œç»„ä»¶</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> Form <span class="token keyword">from</span> <span class="token string">'./components/Form.vue'</span>

<span class="token comment">// 1. æä¾›ä¸€ä¸ªref</span>
<span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
  formRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span>Form ref<span class="token operator">=</span><span class="token string">"formRef"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>Form<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<p>éœ€è¦é…åˆdefineExpose</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">validate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è¡¨å•æ ¡éªŒæ–¹æ³•'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// æš´éœ²å±æ€§ç»™å¤–éƒ¨ç»„ä»¶ä½¿ç”¨</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  count<span class="token punctuation">,</span>
  validate<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯Formç»„ä»¶<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="vue3_918"></a>vue3ä¸­åºŸå¼ƒäº†è¿‡æ»¤å™¨</h3> 
<blockquote> 
 <p>vue3.0ä¸­ä¸èƒ½ä½¿ç”¨è¿‡æ»¤å™¨ï¼Œç›´æ¥ä½¿ç”¨å‡½æ•°è¿›è¡Œæ›¿ä»£</p> 
</blockquote> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>refçš„ä½¿ç”¨<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªh3çš„å†…å®¹ <span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> <span class="token function">formatTime</span><span class="token punctuation">(</span>now<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> <span class="token function">formatTime</span><span class="token punctuation">(</span>other<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>hr <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">'moment'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// è¿‡æ»¤å™¨</span>
    <span class="token keyword">const</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> other <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-11-12 12:00:00'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">formatTime</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> <span class="token function">moment</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      now<span class="token punctuation">,</span>
      formatTime<span class="token punctuation">,</span>
      other<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h3><a id="toRefs__950"></a>è¡¥å……-toRefs å‡½æ•°</h3> 
<p><strong>ä½¿ç”¨åœºæ™¯: å¦‚æœå¯¹ä¸€ä¸ªå“åº”æ•°æ®, è¿›è¡Œè§£æ„ æˆ–è€… å±•å¼€, ä¼šä¸¢å¤±ä»–çš„å“åº”å¼ç‰¹æ€§!</strong></p> 
<p>åŸå› : vue3 åº•å±‚æ˜¯å¯¹ å¯¹è±¡ è¿›è¡Œç›‘å¬åŠ«æŒ</p> 
<p>ä½œç”¨: å¯¹ä¸€ä¸ªå“åº”å¼å¯¹è±¡çš„æ‰€æœ‰å†…éƒ¨å±æ€§, éƒ½åšå“åº”å¼å¤„ç†</p> 
<ol><li>reactive/refçš„å“åº”å¼åŠŸèƒ½æ˜¯èµ‹å€¼ç»™å¯¹è±¡çš„, å¦‚æœç»™å¯¹è±¡è§£æ„æˆ–è€…å±•å¼€, ä¼šè®©æ•°æ®ä¸¢å¤±å“åº”å¼çš„èƒ½åŠ›</li><li><strong>ä½¿ç”¨ toRefs å¯ä»¥ä¿è¯è¯¥å¯¹è±¡å±•å¼€çš„æ¯ä¸ªå±æ€§éƒ½æ˜¯å“åº”å¼çš„</strong></li></ol> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> money <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> car <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{<!-- --></span><span class="token punctuation">{<!-- --></span> name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>button @click<span class="token operator">=</span><span class="token string">"money++"</span><span class="token operator">&gt;</span>æ”¹å€¼<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script setup<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> reactive<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> toRefs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'zs'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{<!-- --></span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">toRefs</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>é—®é¢˜å°ç»“: toRefs å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆ ?</p> 
<p>ä½œç”¨: å¯¹ä¸€ä¸ª <strong>å“åº”å¼å¯¹è±¡</strong> çš„æ‰€æœ‰å†…éƒ¨å±æ€§, éƒ½åšå“åº”å¼å¤„ç†, ä¿è¯<strong>å±•å¼€æˆ–è€…è§£æ„å‡ºçš„æ•°æ®ä¹Ÿæ˜¯å“åº”å¼çš„</strong></p> 
<h2><a id="vuerouter4_984"></a>vue-router4</h2> 
<blockquote> 
 <p>vueå‡çº§vue3ä¹‹åï¼Œé…å¥—çš„vue-routerä¹Ÿå‡çº§ä¸ºvue-router@4.xç‰ˆæœ¬</p> 
 <p>vue-router4çš„è¯­æ³•å’Œ3çš„ç‰ˆæœ¬è¯­æ³•åŸºæœ¬ä¸€è‡´ï¼Œä½†æ˜¯æœ‰ä¸€äº›ç»†å¾®çš„ä¿®æ”¹ã€‚</p> 
</blockquote> 
<p>vue-routerå®˜ç½‘ï¼š<a href="https://router.vuejs.org/" rel="nofollow">https://router.vuejs.org/</a></p> 
<pre><code>vue@2 + vue-router@3 + vuex@3   options api

vue@3 + vue-router@4 + vuex@4    composition api
</code></pre> 
<h3><a id="_998"></a>åŸºæœ¬ä½¿ç”¨</h3> 
<p>(0)å®‰è£…vue-router</p> 
<pre><code class="prism language-bash"><span class="token function">yarn</span> <span class="token function">add</span> vue-router
</code></pre> 
<p>(1)åˆ›å»ºç»„ä»¶Home.vueå’ŒLogin.vue</p> 
<p>(2)åˆ›å»ºæ–‡ä»¶<code>router/index.js</code></p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span>
  createRouter<span class="token punctuation">,</span>
  createWebHashHistory<span class="token punctuation">,</span>
  createWebHistory<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token comment">// 1. åˆ›å»ºè·¯ç”±</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// åˆ›å»ºhistoryæ¨¡å¼çš„è·¯ç”±</span>
  <span class="token comment">// history: createWebHistory(),</span>
  <span class="token comment">// åˆ›å»ºhashæ¨¡å¼çš„è·¯ç”±</span>
  <span class="token literal-property property">history</span><span class="token operator">:</span> <span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// é…ç½®è·¯ç”±è§„åˆ™</span>
  <span class="token literal-property property">routes</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../pages/Home.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{<!-- --></span> <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../pages/Login.vue'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> router

</code></pre> 
<p>ï¼ˆ3ï¼‰åœ¨main.jsä¸­å¼•å…¥</p> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>

<span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre> 
<p>(4)App.vueä¸­ä½¿ç”¨</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">"/home"</span><span class="token operator">&gt;</span>é¦–é¡µ<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">"/login"</span><span class="token operator">&gt;</span>ç™»é™†<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> è·¯ç”±å‡ºå£ <span class="token operator">--</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>


</code></pre> 
<h3><a id="routerouter_1065"></a>ç»„ä»¶ä¸­ä½¿ç”¨routeä¸router</h3> 
<blockquote> 
 <p>ç”±äºç»„ä»¶ä¸­æ— æ³•è®¿é—®this,å› ä¸ºæ— æ³•è®¿é—®this.<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          r 
         
        
          o 
         
        
          u 
         
        
          t 
         
        
          e 
         
        
          ä¸ 
         
        
          t 
         
        
          h 
         
        
          i 
         
        
          s 
         
        
          . 
         
        
       
         routeä¸this. 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">ro</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mord mathnormal">e</span><span class="mord cjk_fallback">ä¸</span><span class="mord mathnormal">t</span><span class="mord mathnormal">hi</span><span class="mord mathnormal">s</span><span class="mord">.</span></span></span></span></span>router</p> 
</blockquote> 
<p>ï¼ˆ1ï¼‰é€šè¿‡useRoute()å¯ä»¥è·å–routeä¿¡æ¯</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>path<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>fullPath<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<p>ï¼ˆ2ï¼‰é€šè¿‡useRouter()å¯ä»¥è·å–routerä¿¡æ¯</p> 
<pre><code class="prism language-js"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> useRouter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{<!-- --></span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">useRouter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token function-variable function">login</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
      router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/home'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token punctuation">{<!-- --></span>
      login<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> 
<h2><a id="vuex4_1105"></a>vuex4</h2> 
<h3><a id="_1107"></a>åŸºæœ¬ä½¿ç”¨</h3> 
<ol><li>å®‰è£…ä¾èµ–åŒ…</li></ol> 
<pre><code>yarn add vuex
</code></pre> 
<ol start="2"><li>åˆ›å»ºæ–‡ä»¶ store/index.js</li></ol> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">money</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mutations</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">changeMoney</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      state<span class="token punctuation">.</span>money <span class="token operator">+=</span> <span class="token number">10</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">actions</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">changeMoneyAsync</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
        context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'changeMoney'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">getters</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token keyword">return</span> state<span class="token punctuation">.</span>money <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store

</code></pre> 
<ol start="3"><li>åœ¨main.jsä¸­å…³è”store</li></ol> 
<pre><code class="prism language-js"><span class="token keyword">import</span> <span class="token punctuation">{<!-- --></span> createApp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./store'</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>store<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>

</code></pre> 
<h3><a id="vuex_1162"></a>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨vuex</h3> 
<pre><code class="prism language-js"><span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> money <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>money<span class="token punctuation">)</span>
<span class="token keyword">const</span> double <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> store<span class="token punctuation">.</span>getters<span class="token punctuation">.</span>double<span class="token punctuation">)</span>


<span class="token comment">// mapState  mapMutations mapActions mapGetters  éœ€è¦é…åˆoptions apiæ‰èƒ½ä½¿ç”¨</span>
</code></pre> 
<p><strong>æ€»ç»“ï¼švuex4 åœ¨vue3é¡¹ç›®ä¸­èƒ½ç”¨ï¼Œä½†æ˜¯ä¸å¥½ç”¨</strong></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0fd87712e3e8a53da59c62ea6cc675f5/" rel="prev">
			<span class="pager__subtitle">Â«&thinsp;Previous</span>
			<p class="pager__title">æŒ‡é’ˆèµ‹å€¼é—®é¢˜</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3bcd0dc46a6e347ef22cac8d677f5c34/" rel="next">
			<span class="pager__subtitle">Next&thinsp;Â»</span>
			<p class="pager__title">pythonå»é™¤é©¬èµ›å…‹</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 èœé¸Ÿç¨‹åºå‘˜åšå®¢.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>