<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mosquitto动态链接库的交叉编译与移植 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mosquitto动态链接库的交叉编译与移植" />
<meta property="og:description" content="Mosquitto动态链接库的交叉编译与移植
前段时间对Mosquitto进行了ARM移植，找了大量的资料，没有一个可以一次性成功的，于是借鉴了很多文章，并自己摸索最后得出了这篇移植结论，按照这种方法应该可以一次性交叉编译成功。如果有什么问题，请在下面给我留言，谢谢。
Ubuntu版本：14.04LTS
交叉编译链：友善之臂提供的4.4.3版本工具链
（/opt/FriendlyARM/toolchain/4.4.3/bin/arm-linux-gcc）
移植目录为/home/mosquito
安装目录为/home/mosquitto/arm
可以使用两种方式进行交叉编译
第一种方法：使用./configure配置后进行make &amp;&amp; make install （这种方法需要两个依赖库，但是在make的时候需要大量修改Makefile中的依赖包目录，容易出错）
参考网址：https://blog.csdn.net/gaoyadianta/article/details/72831665
https://blog.csdn.net/L982817732/article/details/78926061
第二种方法：使用cmake配置后进行make &amp;&amp; make install （这种方法需要三个依赖库，在配置时不需要修改太多地方，操作起来比较容易，因此在这里选择了第二种方法）
参考网址：https://blog.csdn.net/sqshining/article/details/69660650
https://blog.csdn.net/sqshining/article/details/69664310#commentsedit
开始交叉编译前的一些准备： cmake-3.7.2
wget https://cmake.org/files/v3.7/cmake-3.7.2.tar.gz autoconf 用来生成configure文件
wget https://alpha.gnu.org/gnu/autoconf/autoconf-2.68b.tar.gz libtool
wget https://ftp.gnu.org/gnu/libtool/libtool-2.4.6.tar.gz 新建一个文件夹，在这个文件夹中进行所有的移植操作。
拉取上面三个压缩包，然后解压缩进行本地编译,命令如下
./configure make make install 交叉编译openssl wget https://www.openssl.org/source/old/1.0.0/openssl-1.0.0.tar.gz tar –zxvf openssl-1.0.0.tar.gz cd openssl-1.0.0/ ./config no-asm shared --prefix=/home/mosquitto/arm/ssl 注意：--prefix后面跟着是make install的安装目录，可以自行定义
export cross=arm-linux- make CC=&#34;${cross}gcc&#34; AR=&#34;${cross}ar r&#34; RANLIB=&#34;${cross}ranlib&#34; 报错
原因是Makefile里面有-m64这句话。
解决方法：vim Makefile，找到-m64，删除，我这里一共发现了两处地方
再次
make CC=&#34;${cross}gcc&#34; AR=&#34;${cross}ar r&#34; RANLIB=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f560e075cce8847cc9c0b4334a6bf739/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-18T18:10:11+08:00" />
<meta property="article:modified_time" content="2019-01-18T18:10:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mosquitto动态链接库的交叉编译与移植</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-left:0cm;"><strong>Mosquitto</strong><strong>动态链接库的交叉编译与移植</strong></p> 
<p style="margin-left:0cm;"><strong>前段时间对Mosquitto进行了ARM移植，找了大量的资料，没有一个可以一次性成功的，于是借鉴了很多文章，并自己摸索最后得出了这篇移植结论，按照这种方法应该可以一次性交叉编译成功。如果有什么问题，请在下面给我留言，谢谢。</strong></p> 
<p style="margin-left:0cm;"><strong>Ubuntu</strong><strong>版本：</strong>14.04LTS</p> 
<p style="margin-left:0cm;"><strong>交叉编译链：</strong>友善之臂提供的4.4.3版本工具链</p> 
<p style="margin-left:0cm;">（<span style="color:#FF0000;">/opt/FriendlyARM/toolchain/4.4.3/bin/arm-linux-gcc</span>）</p> 
<p style="margin-left:0cm;">移植目录为<span style="color:#FF0000;">/home/mosquito</span></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="108" src="https://images2.imgbox.com/f8/0a/BgByOLOJ_o.png" width="646"></p> 
<p style="margin-left:0cm;">安装目录为<span style="color:#FF0000;">/home/mosquitto/arm</span></p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="40" src="https://images2.imgbox.com/70/3f/L9OzvlO7_o.png" width="540"></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">可以使用两种方式进行交叉编译</p> 
<p style="margin-left:0cm;"><strong>第一种方法：</strong>使用./configure配置后进行make &amp;&amp; make install （这种方法需要两个依赖库，但是在make的时候需要大量修改Makefile中的依赖包目录，容易出错）</p> 
<p style="margin-left:0cm;">参考网址：<a href="https://blog.csdn.net/gaoyadianta/article/details/72831665">https://blog.csdn.net/gaoyadianta/article/details/72831665</a></p> 
<p style="margin-left:0cm;"><a href="https://blog.csdn.net/L982817732/article/details/78926061">https://blog.csdn.net/L982817732/article/details/78926061</a></p> 
<p style="margin-left:0cm;"><strong>第二种方法：</strong>使用cmake配置后进行make &amp;&amp; make install （这种方法需要三个依赖库，在配置时不需要修改太多地方，操作起来比较容易，因此在这里选择了第二种方法）</p> 
<p style="margin-left:0cm;">参考网址：<a href="https://blog.csdn.net/sqshining/article/details/69660650">https://blog.csdn.net/sqshining/article/details/69660650</a></p> 
<p style="margin-left:0cm;"><a href="https://blog.csdn.net/sqshining/article/details/69664310#commentsedit">https://blog.csdn.net/sqshining/article/details/69664310#commentsedit</a></p> 
<p style="margin-left:0cm;"> </p> 
<ul><li><strong>开始交叉编译前的一些准备：</strong></li></ul> 
<p style="margin-left:0cm;">cmake-3.7.2</p> 
<pre class="has"><code class="hljs language-bash">wget https://cmake.org/files/v3.7/cmake-3.7.2.tar.gz</code></pre> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">autoconf 用来生成configure文件</p> 
<pre class="has"><code class="hljs language-bash">wget https://alpha.gnu.org/gnu/autoconf/autoconf-2.68b.tar.gz</code></pre> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><span style="color:#4f4f4f;">libtool</span></p> 
<pre class="has"><code class="hljs language-bash">wget https://ftp.gnu.org/gnu/libtool/libtool-2.4.6.tar.gz</code></pre> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">新建一个文件夹，在这个文件夹中进行所有的移植操作。</p> 
<p style="margin-left:0cm;">拉取上面三个压缩包，然后解压缩进行本地编译,命令如下</p> 
<pre class="has"><code class="hljs language-bash">./configure

make

make install

</code></pre> 
<ul><li><strong>交叉编译openssl</strong></li></ul> 
<pre class="has"><code class="hljs language-bash">wget https://www.openssl.org/source/old/1.0.0/openssl-1.0.0.tar.gz

tar –zxvf openssl-1.0.0.tar.gz

cd openssl-1.0.0/

./config no-asm shared --prefix=/home/mosquitto/arm/ssl</code></pre> 
<p style="margin-left:0cm;">注意：--prefix后面跟着是make install的安装目录，可以自行定义</p> 
<pre class="has"><code class="hljs language-bash">export cross=arm-linux-

make CC="${cross}gcc" AR="${cross}ar r" RANLIB="${cross}ranlib"</code></pre> 
<p style="margin-left:0cm;">报错</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="98" src="https://images2.imgbox.com/3e/d8/8iJPzjQp_o.png" width="674"></p> 
<p style="margin-left:0cm;">原因是Makefile里面有-m64这句话。</p> 
<p style="margin-left:0cm;">解决方法：vim Makefile，找到-m64，删除，我这里一共发现了两处地方</p> 
<p style="margin-left:0cm;">再次</p> 
<pre class="has"><code class="hljs language-bash">make CC="${cross}gcc" AR="${cross}ar r" RANLIB="${cross}ranlib"</code></pre> 
<pre class="has"><code class="hljs">make install</code></pre> 
<p style="margin-left:0cm;">报错</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="148" src="https://images2.imgbox.com/96/f6/NHRo7XOA_o.png" width="586"></p> 
<p style="margin-left:0cm;">原因是由于OpenSSL 1.0.0 与 perl5.18 不兼容。</p> 
<p style="margin-left:0cm;">解决方法：删除 pod2man文件 rm /usr/bin/pod2man</p> 
<p style="margin-left:0cm;">再次</p> 
<pre class="has"><code class="hljs language-bash">make install</code></pre> 
<p style="margin-left:0cm;">成功，查看编译出来的东西</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="36" src="https://images2.imgbox.com/e4/73/pdsHMpJG_o.png" width="457"></p> 
<p style="margin-left:0cm;">Include/里面是头文件</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="236" src="https://images2.imgbox.com/b1/c6/IpdKzYyP_o.png" width="693"></p> 
<p style="margin-left:0cm;">lib64里面是动态库</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="60" src="https://images2.imgbox.com/b7/6d/jckJ4zA9_o.png" width="550"></p> 
<p style="margin-left:0cm;">在后面会用到</p> 
<p style="margin-left:0cm;"> </p> 
<ul><li><strong>交叉编译c-ares库</strong></li></ul> 
<pre class="has"><code class="hljs language-bash">wget https://c-ares.haxx.se/download/c-ares-1.14.0.tar.gz

tar -zxvf c-ares-1.14.0.tar.gz

cd c-ares-1.14.0/

./configure --host=arm-linux --prefix=/home/mosquitto/arm/ares

make

make install</code></pre> 
<p style="margin-left:0cm;">成功，查看编译出来的东西</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="43" src="https://images2.imgbox.com/e1/79/xJPKV30Y_o.png" width="454"></p> 
<p style="margin-left:0cm;">lib里面是动态库</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="59" src="https://images2.imgbox.com/55/67/D4OpZfE7_o.png" width="506"></p> 
<p style="margin-left:0cm;">在后面会用到</p> 
<p style="margin-left:0cm;"> </p> 
<ul><li><strong>交叉编译e2fsprogs</strong></li></ul> 
<p style="margin-left:0cm;">下载地址：<a href="https://sourceforge.net/projects/e2fsprogs/files/e2fsprogs/1.41.14/e2fsprogs-1.41.14.tar.gz/download" rel="nofollow">https://sourceforge.net/projects/e2fsprogs/files/e2fsprogs/1.41.14/e2fsprogs-1.41.14.tar.gz/download</a></p> 
<p style="margin-left:0cm;">下载完后通过ssh放到移植目录下</p> 
<pre class="has"><code class="hljs language-bash">tar -zxvf e2fsprogs-1.41.14.tar.gz

cd e2fsprogs-1.41.14/

./configure --host=arm-linux --prefix=/home/mosquitto/arm/e2fsprogs

make

make install</code></pre> 
<p style="margin-left:0cm;">把lib下的uuid目录拷贝到安装目/home/mosquitto/arm/e2fsprogs下</p> 
<pre class="has"><code class="hljs language-bash">cp -r lib/uuid/ /home/mosquitto /arm/e2fsprogs</code></pre> 
<p style="margin-left:0cm;">成功，查看编译出来的东西</p> 
<p style="margin-left:0cm;">       <img alt="" class="has" height="38" src="https://images2.imgbox.com/0c/2f/85hfAQut_o.png" width="498"></p> 
<p style="margin-left:0cm;">       uuid目录下的头文件在后面要用到</p> 
<p style="margin-left:0cm;"> </p> 
<ul><li><strong>交叉编译Mosquitto</strong></li></ul> 
<pre class="has"><code class="hljs language-bash">wget https://mosquitto.org/files/source/mosquitto-1.4.8.tar.gz

tar -zxvf mosquitto-1.4.8.tar.gz

cd mosquitto-1.4.8/</code></pre> 
<p style="margin-left:0cm;">找到CMakelists.txt第61行find_package(OpenSSL REQUIRED)，在此句之前加入</p> 
<pre class="has"><code class="hljs language-bash">set(OPENSSL_ROOT_DIR "/home/mosquitto/arm/ssl")

set(OPENSSL_LIBRARIES "/home/mosquitto/arm/ssl/lib64/")</code></pre> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="78" src="https://images2.imgbox.com/64/1b/LIu9NcTy_o.png" width="579"></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">然后找到option(WITH_SRV “Include SRV lookup support?” ON)这一行，在下面加入</p> 
<pre class="has"><code class="hljs language-bash"># Simple detect uuid

set(CMAKE_INCLUDE_PATH /home/mosquitto/arm/e2fsprogs)

set(CMAKE_LIBRARY_PATH /home/mosquitto/arm/e2fsprogs/uuid)

find_path(UUID_HEADER NAMES uuid/uuid.h)

if (UUID_HEADER)

    include_directories(${UUID_HEADER})

    message(STATUS "found uuid/uuid.h at:${UUID_HEADER}")

    find_library(UUID_LIBRARY NAMES uuid)

    if (UUID_LIBRARY)

        message(STATUS "found libuuid at:${UUID_LIBRARY}")

        set (LIBRARIES ${LIBRARIES} ${UUID_LIBRARY})

    else(UUID_LIBRARY)

        message(FATAL_ERROR "uuid library not found!" )

    endif (UUID_LIBRARY)

else (UUID_HEADER)

    message(WARNING "uuid library not found.")

endif (UUID_HEADER)</code></pre> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="350" src="https://images2.imgbox.com/02/a6/ya2b6Cmg_o.png" width="543"></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">然后找到lib/CMakelists.txt的第54行，这一段改后如下</p> 
<pre class="has"><code class="hljs language-bash">if (${WITH_SRV} STREQUAL ON)

    # Simple detect c-ares

    find_path(ARES_HEADER ares.h /home/mosquitto/arm/ares/include)

    if (ARES_HEADER)

        add_definitions("-DWITH_SRV")

        include_directories(${ARES_HEADER})

        message(STATUS "found ares.h at:${ARES_HEADER}")

        find_library(ARES_LIBRARY cares /home/mosquitto/arm/ares/lib)

        if (ARES_LIBRARY)

            message(STATUS "found libcares at:${ARES_LIBRARY}")

            set (LIBRARIES ${LIBRARIES} ${ARES_LIBRARY})

        else(ARES_LIBRARY)

            message(FATAL_ERROR "not found libcares" )

        endif (ARES_LIBRARY)

    else (ARES_HEADER)

        message(WARNING "c-ares library not found.")

    endif (ARES_HEADER)

endif (${WITH_SRV} STREQUAL ON)</code></pre> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="332" src="https://images2.imgbox.com/63/12/XyM2NiLT_o.png" width="629"></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">然后在mosquitto目录下执行命令</p> 
<pre class="has"><code class="hljs language-bash">cmake -DCMAKE_C_COMPILER="arm-linux-gcc" -DCMAKE_CXX_COMPILER="arm-linux-g++" -DCMAKE_INSTALL_PREFIX=/home/mosquitto/arm/mosquitto/ CMakeLists.txt</code></pre> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">如果这样报错，说明交叉编译链没有在全局变量里</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="241" src="https://images2.imgbox.com/c7/be/9CzljadU_o.png" width="706"></p> 
<p style="margin-left:0cm;">解决方法：source /etc/profile</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">接下来会有两种报错情况</p> 
<p style="margin-left:0cm;">第一种：没有找到openssl的库路径</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="256" src="https://images2.imgbox.com/87/af/MnuUKtd1_o.png" width="722"></p> 
<p style="margin-left:0cm;">       解决方法：手动进入文件进行修改 vim CMakeCache.txt</p> 
<p style="margin-left:0cm;">       在vim中搜索ssl转到到下图这里</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="163" src="https://images2.imgbox.com/83/13/5uvtSnOK_o.png" width="598"></p> 
<p style="margin-left:0cm;">手动修改到openssl的目录</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="159" src="https://images2.imgbox.com/0b/30/SpAILlTh_o.png" width="647"></p> 
<p style="margin-left:0cm;">       再次使用命令</p> 
<pre class="has"><code class="hljs language-bash">cmake -DCMAKE_C_COMPILER="arm-linux-gcc" -DCMAKE_CXX_COMPILER="arm-linux-g++" -DCMAKE_INSTALL_PREFIX=/home/mosquitto/arm/mosquitto/ CMakeLists.txt</code></pre> 
<p style="margin-left:0cm;"><img alt="" class="has" height="216" src="https://images2.imgbox.com/43/df/oMgzKlLx_o.png" width="721"></p> 
<p style="margin-left:0cm;">可以看到已经找到了openssl的库</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">第二种：识别到x86系统的openssl的库路径</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="204" src="https://images2.imgbox.com/8b/a1/8rXu45bi_o.png" width="723"></p> 
<p style="margin-left:0cm;">解决方法：手动进入文件进行修改 vim CMakeCache.txt</p> 
<p style="margin-left:0cm;">在vim中搜索ssl转到到下图这里</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="153" src="https://images2.imgbox.com/b0/f7/FZ1mVPbz_o.png" width="652"></p> 
<p style="margin-left:0cm;">手动修改到openssl的目录</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="159" src="https://images2.imgbox.com/22/20/TitRDER7_o.png" width="647"></p> 
<p style="margin-left:0cm;">       再次使用命令</p> 
<pre class="has"><code class="hljs language-bash">cmake -DCMAKE_C_COMPILER="arm-linux-gcc" -DCMAKE_CXX_COMPILER="arm-linux-g++" -DCMAKE_INSTALL_PREFIX=/home/mosquitto/arm/mosquitto/ CMakeLists.txt</code></pre> 
<p style="margin-left:0cm;"><img alt="" class="has" height="236" src="https://images2.imgbox.com/ea/d3/8peC5ff2_o.png" width="720"></p> 
<p style="margin-left:0cm;">可以看到已经找到了openssl的库</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">       如果没有遇到以上两种报错情况，打印信息完全正确的话，就可以使用make编译</p> 
<p style="margin-left:0cm;">      </p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">       报错没有找到动态链接库</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="109" src="https://images2.imgbox.com/f8/fc/t6fqFr7s_o.png" width="727"></p> 
<p style="margin-left:0cm;">解决方法：这里没有找到uuid的动态链接库，那么要交叉编译libuuid</p> 
<p style="margin-left:0cm;"><span style="color:#4f4f4f;">参考网站：</span><a href="http://blog.csdn.net/litao31415/article/details/52917160"><span style="color:#6795b5;">http://blog.csdn.net/litao31415/article/details/52917160</span></a></p> 
<p style="margin-left:0cm;">下载libuuid源码使用ssh放入移植目录</p> 
<pre class="has"><code class="hljs language-bash">tar -zxvf libuuid-1.0.3.tar.gz

cd libuuid-1.0.3/

./configure --host=arm-linux CC=arm-linux-gcc --prefix=/home/mosquitto/arm/libuuid

make

make install</code></pre> 
<p style="margin-left:0cm;">成功，查看编译出来的东西</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="41" src="https://images2.imgbox.com/25/d6/WWKJSt8D_o.png" width="508"></p> 
<p style="margin-left:0cm;">Lib目录下是我们需要的动态链接库</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="43" src="https://images2.imgbox.com/dd/06/D9VWnsTc_o.png" width="703"></p> 
<p style="margin-left:0cm;">使用 arm-linux-gcc –v 命令查看编译器动态库的路径<img alt="" class="has" height="326" src="https://images2.imgbox.com/9a/9c/jI0hsHTk_o.png" width="733"></p> 
<p style="margin-left:0cm;"><span style="color:#FF0000;">cd /opt/FriendlyARM/toolchain/4.4.3/</span> 进入工具链目录</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="41" src="https://images2.imgbox.com/65/24/gPOKxiNM_o.png" width="665"></p> 
<p style="margin-left:0cm;">cd arm-none-linux-gnueabi/</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="58" src="https://images2.imgbox.com/fb/2c/JHAl9DA3_o.png" width="722"></p> 
<p style="margin-left:0cm;">       ls –l 发现lib是一个软链接</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="153" src="https://images2.imgbox.com/73/69/5z3IpYLD_o.png" width="719"></p> 
<p style="margin-left:0cm;">cd sys-root/lib/ 进入目录</p> 
<p style="margin-left:0cm;">将刚刚编译出来的liduuid动态链接库拷贝到该目录，注意，.so文件是一个链接，要将其链向的源文件一起拷贝过来</p> 
<pre class="has"><code class="hljs language-bash">cp /home/mosquitto/arm/libuuid/lib/libuuid* ./</code></pre> 
<p style="margin-left:0cm;">回到移植目录</p> 
<pre class="has"><code class="hljs language-bash">cd /home/mosquitto/mosquitto-1.4.9/

cmake -DCMAKE_C_COMPILER="arm-linux-gcc" -DCMAKE_CXX_COMPILER="arm-linux-g++" -DCMAKE_INSTALL_PREFIX=/home/mosquitto/arm/mosquitto/ CMakeLists.txt

make</code></pre> 
<p style="margin-left:0cm;"><img alt="" class="has" height="214" src="https://images2.imgbox.com/5d/62/3icNBXq2_o.png" width="694"></p> 
<p style="margin-left:0cm;">成功编译。如果还是报错缺少动态链接库的，就像刚刚的方法一样将动态库文件连源文件一起拷贝至编译器的库文件里，再重新回来编译（openssl和 ares 的动态库在前面已经编译好了，直接拷贝过去就行）</p> 
<p style="margin-left:0cm;">继续</p> 
<pre class="has"><code class="hljs language-bash">make install</code></pre> 
<p style="margin-left:0cm;">没有报错，查看安装目录</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="42" src="https://images2.imgbox.com/13/02/6iDGgnMp_o.png" width="521"></p> 
<p style="margin-left:0cm;">cd lib/ 进入lib目录</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="59" src="https://images2.imgbox.com/fb/e5/1IgMRIka_o.png" width="614"></p> 
<p style="margin-left:0cm;">需要的mosquitto动态库已经成功编译</p> 
<p style="margin-left:0cm;">到此，mosquitto的动态链接库交叉编译完成！</p> 
<p style="margin-left:0cm;"> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d6de5b30a2ae2c26bef75675f79672b2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">css经典布局——双飞翼布局</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5e0d8ff1c0614c2fbce8ead27fb58597/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">springboot外置Tomcat启动时出现的中文乱码的处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>