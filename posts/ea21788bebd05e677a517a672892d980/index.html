<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>centos传送文件到远程服务器,CentOS平台实现搭建rsync远程同步服务器的方法 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="centos传送文件到远程服务器,CentOS平台实现搭建rsync远程同步服务器的方法" />
<meta property="og:description" content="本文实例讲述了CentOS平台实现搭建rsync远程同步服务器的方法。分享给大家供大家参考，具体如下：
rsync(remote synchronize)是一个远程数据同步工具，可通过LAN/WAN快速同步多台主机间的文件，也可以使用 rsync 同步本地硬盘中的不同目录。
rsync和scp的区别：
rsync支持增量同步，不管是文件数量的新增还是文件内容的新增，scp不行
注意事项：
1、centos默认已经安装rsync了，输入命令rsync查看，如果无法正常工作可参考文章最后的链接进行操作
2、rsync只会增量同步,从服务器如果删除 下次同步还会有,--delete 删除目标目录比源目录多余的文件
3、同步命令可用程序执行、也可定时执行、手动执行
4、修改配置文件后 记得重启service xinetd restart
5、文件很大可先tar打包压缩后再传输
序号
IP地址
简称
1
192.168.46.32
A机器
2
192.168.46.11
B机器
先看下A机器上，logs文件夹下的文件：
[root@h1 logs]# ll
总用量 4
-rw-r--r-- 1 root root 3 8月 30 02:29 a.txt
[root@h1 logs]#
然后，我们在B机器上，执行同步命令如下：
[root@h2 logs]# ll
总用量 0
[root@h2 logs]# rsync -av --delete 192.168.46.32:/root/logs /root/logg/
receiving incremental file list
logs/
logs/a.txt
sent 34 bytes received 107 bytes 282." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ea21788bebd05e677a517a672892d980/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-12T23:33:15+08:00" />
<meta property="article:modified_time" content="2021-08-12T23:33:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">centos传送文件到远程服务器,CentOS平台实现搭建rsync远程同步服务器的方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>本文实例讲述了CentOS平台实现搭建rsync远程同步服务器的方法。分享给大家供大家参考，具体如下：</p> 
 <p>rsync(remote synchronize)是一个远程数据同步工具，可通过LAN/WAN快速同步多台主机间的文件，也可以使用 rsync 同步本地硬盘中的不同目录。</p> 
 <p>rsync和scp的区别：</p> 
 <p>rsync支持增量同步，不管是文件数量的新增还是文件内容的新增，scp不行</p> 
 <p>注意事项：</p> 
 <p>1、centos默认已经安装rsync了，输入命令rsync查看，如果无法正常工作可参考文章最后的链接进行操作</p> 
 <p>2、rsync只会增量同步,从服务器如果删除 下次同步还会有,--delete 删除目标目录比源目录多余的文件</p> 
 <p>3、同步命令可用程序执行、也可定时执行、手动执行</p> 
 <p>4、修改配置文件后 记得重启service xinetd restart</p> 
 <p>5、文件很大可先tar打包压缩后再传输</p> 
 <p>序号</p> 
 <p>IP地址</p> 
 <p>简称</p> 
 <p>1</p> 
 <p>192.168.46.32</p> 
 <p>A机器</p> 
 <p>2</p> 
 <p>192.168.46.11</p> 
 <p>B机器</p> 
 <p>先看下A机器上，logs文件夹下的文件：</p> 
 <p>[root@h1 logs]# ll</p> 
 <p>总用量 4</p> 
 <p>-rw-r--r-- 1 root root 3 8月 30 02:29 a.txt</p> 
 <p>[root@h1 logs]#</p> 
 <p>然后，我们在B机器上，执行同步命令如下：</p> 
 <p>[root@h2 logs]# ll</p> 
 <p>总用量 0</p> 
 <p>[root@h2 logs]# rsync -av --delete 192.168.46.32:/root/logs /root/logg/</p> 
 <p>receiving incremental file list</p> 
 <p>logs/</p> 
 <p>logs/a.txt</p> 
 <p>sent 34 bytes received 107 bytes 282.00 bytes/sec</p> 
 <p>total size is 3 speedup is 0.02</p> 
 <p>[root@h2 logs]# ll</p> 
 <p>总用量 4</p> 
 <p>-rw-r--r-- 1 root root 3 8月 30 02:29 a.txt</p> 
 <p>[root@h2 logs]#</p> 
 <p>然后，我们在A机器上的log文件下，新增一个b.txt,再测试同步命令：</p> 
 <p>[root@h2 logs]# rsync -av --delete 192.168.46.32:/root/logs /root/logg/</p> 
 <p>receiving incremental file list</p> 
 <p>logs/</p> 
 <p>logs/b.txt</p> 
 <p>sent 34 bytes received 125 bytes 318.00 bytes/sec</p> 
 <p>total size is 5 speedup is 0.03</p> 
 <p>[root@h2 logs]#</p> 
 <p>通过日志，我们发现如果新增一个使用rsync仅仅同步了新增的文件： 现在我们在A服务器上的log文件夹下的a.txt里面新增一行内容，再次执行同步命令：</p> 
 <p>[root@h2 logs]# rsync -av --delete 192.168.46.32:/root/logs /root/logg/</p> 
 <p>receiving incremental file list</p> 
 <p>logs/a.txt</p> 
 <p>sent 37 bytes received 128 bytes 330.00 bytes/sec</p> 
 <p>total size is 9 speedup is 0.05</p> 
 <p>[root@h2 logs]#</p> 
 <p>我们发现rsync命令也能很好的识别出来 最后我们在来看下，同时改动，A服务器上的a和 b文件，一个新增一行，一个删除一行，来测下增量：</p> 
 <p>[root@h2 logs]# rsync -av --delete 192.168.46.32:/root/logs /root/logg/</p> 
 <p>receiving incremental file list</p> 
 <p>logs/</p> 
 <p>logs/a.txt</p> 
 <p>logs/b.txt</p> 
 <p>sent 65 bytes received 174 bytes 478.00 bytes/sec</p> 
 <p>total size is 10 speedup is 0.04</p> 
 <p>[root@h2 logs]#</p> 
 <p>我们发现rsync也能很好的识别出来。 最后，我们在来看下，如何在B服务器上向A服务器上发送数据，注意，散仙刚在上面的演示，是从B服务器上下载A服务器上的数据，现在我们要演示的是如何在B服务上主动发送数据到A服务器上，原理一样，都是以增量的方式的操作的，只不过写IP的方式，变换了一下位置：</p> 
 <p>[root@h2 logs]# rsync -av --delete /root/logg/logs/b.txt 192.168.46.32:/root/</p> 
 <p>sending incremental file list</p> 
 <p>b.txt</p> 
 <p>sent 87 bytes received 37 bytes 248.00 bytes/sec</p> 
 <p>total size is 10 speedup is 0.08</p> 
 <p>[root@h2 logs]#</p> 
 <p>参考文章：</p> 
 <p>希望本文所述对大家CentOS服务器配置有所帮助。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f057da8e5f98fba37c3d9720f27ee130/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">play服务器通信显示错误,play游戏服务器通信出现问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/45ef00470a5d738f5cfe983861543f20/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">虚拟主机云服务器和物理机的区别,虚拟主机与服务器、云服务器的区别</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>