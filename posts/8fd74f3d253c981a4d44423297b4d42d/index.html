<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>超详细||深度学习环境搭建记录cuda&#43;anaconda&#43;pytorch&#43;pycharm - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="超详细||深度学习环境搭建记录cuda&#43;anaconda&#43;pytorch&#43;pycharm" />
<meta property="og:description" content="本文用来记录windows系统上深度学习的环境搭建，目录如下
一、安装显卡驱动 首先为装有NVIDIA gpu的电脑安装显卡驱动，如果安装过了，或者想使用cpu的，可以跳过这一步。（其实这一步可以跳过，因为显卡驱动好想和深度学习环境没什么关系，保险起见还是安装上吧）
1. 去官网下载对应的显卡驱动：官方驱动 | NVIDIA 2. 完成下载，选择文件开始安装，直接解压在默认地址
3. 选择自定义安装选项，执行清洁安装（按情况选择）
4. 一直点下一步即可。
二、安装Visual Studio 可以跳过，但是很多深度学习环境需要用到，建议安装
1. 官网下载 Visual Studio Tools - 免费安装 Windows、Mac、Linux (microsoft.com)
2. 选择python开发和c&#43;&#43;桌面开发，开始安装
三、cuda&#43;cudnn安装 1. 打开cmd，输入nvidia-smi查看GPU的CUDA版本，可以看到CUDA版本12.1，意味着只能安装小于12.1的CUDA版本。
CUDA Toolkit Archive | NVIDIA Developer2. 去网站下载适合的CUDA版本：CUDA Toolkit Archive | NVIDIA Developer
要根据两个条件选择：
1. CUDA版本要小于上面的版本信息2. 先去pytorch官网Start Locally | PyTorch，看一眼自己需要的pytorch版本对应的CUDA版本 例如：pytorch1.12.0只支持CUDA10.2，11.3，11.6
3. 然后去官网下载：CUDA Toolkit Archive | NVIDIA Developer，以11.6版本举例，选好系统参数，点击下载，
4. 下载完成，直接默认解压位置
5. 默认勾选即可，点下一步
6. 安装cudnn
去官网下载CUDA Deep Neural Network (cuDNN) | NVIDIA Developer，需要注册一个NVIDIA账号，然后选择CUDA对应版本的cudnn即可。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8fd74f3d253c981a4d44423297b4d42d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-27T22:11:30+08:00" />
<meta property="article:modified_time" content="2023-12-27T22:11:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">超详细||深度学习环境搭建记录cuda&#43;anaconda&#43;pytorch&#43;pycharm</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>本文用来记录windows系统上深度学习的环境搭建，目录如下</p> 
<h2 id="1.%20%E5%AE%89%E8%A3%85%E6%98%BE%E5%8D%A1%E9%A9%B1%E5%8A%A8">一、安装显卡驱动</h2> 
<p>首先为装有NVIDIA gpu的电脑安装显卡驱动，如果安装过了，或者想使用cpu的，可以跳过这一步。（其实这一步可以跳过，因为显卡驱动好想和深度学习环境没什么关系，保险起见还是安装上吧）</p> 
<p>1. 去官网下载对应的显卡驱动：<a href="https://www.nvidia.cn/Download/index.aspx?lang=cn#" rel="nofollow" title="官方驱动 | NVIDIA">官方驱动 | NVIDIA</a>     <img alt="" height="166" src="https://images2.imgbox.com/d2/dd/6vnz9YHT_o.png" width="466"></p> 
<p>2. 完成下载，选择文件开始安装，直接解压在默认地址</p> 
<p><img alt="" height="150" src="https://images2.imgbox.com/dd/70/OQAWoV8F_o.png" width="335"></p> 
<p>3. 选择自定义安装选项，执行清洁安装（按情况选择）</p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/cc/c7/EEvpbZq4_o.png" width="335"></p> 
<p>4. 一直点下一步即可。</p> 
<h2 id="2.%C2%A0%E5%AE%89%E8%A3%85Visual%20Studio">二、<strong>安装Visual Studio</strong></h2> 
<p>可以跳过，但是很多深度学习环境需要用到，建议安装</p> 
<p>1. 官网<a href="https://visualstudio.microsoft.com/zh-hans/downloads/" rel="nofollow" title="下载 Visual Studio Tools - 免费安装 Windows、Mac、Linux (microsoft.com)">下载 Visual Studio Tools - 免费安装 Windows、Mac、Linux (microsoft.com)</a></p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/21/bd/Z2KWTdwI_o.png" width="411"></p> 
<p>2. 选择python开发和c++桌面开发，开始安装</p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/20/02/ROc35usv_o.png" width="444"></p> 
<h2 id="3.cuda%2Bcudnn%E5%AE%89%E8%A3%85">三、cuda+cudnn安装</h2> 
<p>1. 打开cmd，输入nvidia-smi查看GPU的CUDA版本，可以看到CUDA版本12.1，意味着只能安装小于12.1的CUDA版本。</p> 
<p><img alt="" height="300" src="https://images2.imgbox.com/71/3e/fhVMiq2t_o.png" width="528"></p> 
<hr> 
<p><a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow" title="CUDA Toolkit Archive | NVIDIA Developer">CUDA Toolkit Archive | NVIDIA Developer</a>2. 去网站下载适合的CUDA版本：<a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow" title="CUDA Toolkit Archive | NVIDIA Developer">CUDA Toolkit Archive | NVIDIA Developer</a></p> 
<p>要根据两个条件选择：</p> 
<ul><li>1. CUDA版本要小于上面的版本信息</li><li>2. 先去pytorch官网<a href="https://pytorch.org/get-started/locally/" rel="nofollow" title="Start Locally | PyTorch">Start Locally | PyTorch</a>，看一眼自己需要的pytorch版本对应的CUDA版本</li></ul> 
<p>例如：pytorch1.12.0只支持CUDA10.2，11.3，11.6</p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/5e/86/BZLThxVD_o.png" width="410"></p> 
<p>3. 然后去官网下载：<a href="https://developer.nvidia.com/cuda-toolkit-archive" rel="nofollow" title="CUDA Toolkit Archive | NVIDIA Developer">CUDA Toolkit Archive | NVIDIA Developer</a>，以11.6版本举例，选好系统参数，点击下载，</p> 
<p><img alt="" height="250" src="https://images2.imgbox.com/29/a2/jHg9pcc5_o.png" width="411"></p> 
<p>4. 下载完成，直接默认解压位置</p> 
<p><img alt="" height="150" src="https://images2.imgbox.com/6f/20/ukexOPqd_o.png" width="332"></p> 
<p>5. 默认勾选即可，点下一步</p> 
<p><img alt="" height="300" src="https://images2.imgbox.com/ad/36/y4B2Im7X_o.png" width="402"><br>  </p> 
<p>6. 安装cudnn</p> 
<p>去官网下载<a href="https://developer.nvidia.com/cudnn" rel="nofollow" title="CUDA Deep Neural Network (cuDNN) | NVIDIA Developer">CUDA Deep Neural Network (cuDNN) | NVIDIA Developer</a>，需要注册一个NVIDIA账号，然后选择CUDA对应版本的cudnn即可。</p> 
<p><img alt="" height="276" src="https://images2.imgbox.com/3e/01/FEZp5igU_o.png" width="517"></p> 
<p>7. 下<strong>载cudnn后直接将其解开压缩包</strong>，<strong>然后需要将解压后的bin,include,lib文件夹复制粘贴到cuda安装时的默认路径文件夹下</strong></p> 
<p><img alt="" height="200" src="https://images2.imgbox.com/56/dc/wsPTqVqh_o.png" width="474"></p> 
<p> 8. 检查环境变量</p> 
<p><img alt="" height="93" src="https://images2.imgbox.com/71/f3/lR8jQhrX_o.png" width="452"></p> 
<p><img alt="" height="500" src="https://images2.imgbox.com/6f/f3/Gfu7pf3l_o.png" width="431"></p> 
<p>9. 在cmd输入nvcc -V，显示CUDA版本即安装成功</p> 
<p><img alt="" height="139" src="https://images2.imgbox.com/fe/b9/i4E9OE2R_o.png" width="358"></p> 
<h3 style="background-color:transparent;">安装多个CUDA环境：</h3> 
<p>如果要安装多个CUDA环境的话，和上述步骤基本相同，其中在安装时只需要选中cuda即可</p> 
<p><img alt="" height="215" src="https://images2.imgbox.com/2f/a6/eYQ2HWSd_o.png" width="300"></p> 
<p>如果要在各个CUDA间进行转换，只需要修改环境变量即可。</p> 
<p>例如：把CUDA11.6改为CUDA11.8，只需要把CUDA_PATH改为v11.8，并把Path中v11.6的路径上移到v11.8之前，然后重启电脑即可</p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/05/02/VqSltEZl_o.png" width="446"></p> 
<p><img alt="" height="382" src="https://images2.imgbox.com/34/ab/28TUiEZ1_o.png" width="481"></p> 
<h2>四、anaconda安装</h2> 
<p>1. 去官网下载安装包：<a href="https://www.anaconda.com/download" rel="nofollow" title="Free Download | Anaconda">Free Download | Anaconda</a></p> 
<p>2. 下载完成，进行安装，建议安装在非系统盘，以后会创建比较多的环境的话，剩下的默认安装即可</p> 
<p><img alt="" height="322" src="https://images2.imgbox.com/d2/42/vlYR9m6e_o.png" width="414"></p> 
<h2>五、pycharm安装</h2> 
<p>1. 官网下载安装包：<a href="https://www.jetbrains.com/pycharm/promo/?msclkid=bc4019b4006a1b9c042a7cfb2a412bd9&amp;utm_source=bing&amp;utm_medium=cpc&amp;utm_campaign=APAC_en_JP_PyCharm_Branded&amp;utm_term=pycharm&amp;utm_content=pycharm" rel="nofollow" title="PyCharm: the Python IDE for Professional Developers by JetBrains">PyCharm: the Python IDE for Professional Developers by JetBrains</a>，可申请教育账号免费下载专业版，如果没有，下载社区版即可</p> 
<p>2. 自行安装即可</p> 
<h2>六、pytorch安装，及在pycharm中选择conda环境</h2> 
<p>1.首先创建一个conda环境，打开Anaconda prompt，输入：conda create --name yourname python=3.10 -y</p> 
<p>删除环境输入： conda remove -n env_name --all</p> 
<p><img alt="" height="132" src="https://images2.imgbox.com/17/36/tqe7ezkR_o.png" width="126"></p> 
<p>2. 输入conda activate yourname 激活环境</p> 
<p><img alt="" height="97" src="https://images2.imgbox.com/84/14/rcAbpL2P_o.png" width="535"></p> 
<p>2. 去官网找自己需要的pytorch版本：<a href="https://pytorch.org/get-started/locally/" rel="nofollow" title="Start Locally | PyTorch">Start Locally | PyTorch</a> 。选择电脑参数，并复制pip install命令，也可以去找之前的版本。</p> 
<p><img alt="" height="983" src="https://images2.imgbox.com/17/ca/kPa5n7Eh_o.png" width="1200"></p> 
<p>3. 将复制的pip install命令，粘贴在Anaconda prompt中，等待安装即可</p> 
<p><img alt="" height="178" src="https://images2.imgbox.com/2f/40/JZmRio7N_o.png" width="537"></p> 
<p>4.打开anaconda prompt命令行测试代码</p> 
<pre><code class="language-python">python 
import torch 
print(torch.__version__)
print(torch.cuda.is_available())</code></pre> 
<p>5.打开pycharm，选择添加新的解释器→添加本地解释器→conda环境→/yourname/python.exe (这里不同版本的pycharm可能有点不一样，只要能识别就行)</p> 
<p>x<img alt="" height="162" src="https://images2.imgbox.com/67/fc/0Orn1G32_o.png" width="339"></p> 
<p><img alt="" height="203" src="https://images2.imgbox.com/34/55/1RMJ5uPV_o.png" width="392"></p> 
<p><span style="color:#0d0016;"><strong>至此，环境搭建结束。。。。</strong></span></p> 
<p></p> 
<p>安装了yolov8的，可以试着训练一下yolov8</p> 
<pre><code>from ultralytics import YOLO
 
if __name__ == '__main__':
    # Load a model
    model = YOLO(r'\ultralytics\detection\yolov8n\yolov8n.yaml')  # 不使用预训练权重训练
    # model = YOLO(r'yolov8p.yaml').load("yolov8n.pt")  # 使用预训练权重训练
    # Trainparameters ----------------------------------------------------------------------------------------------
    model.train(
        data=r'\ultralytics\detection\dataset\appledata.yaml',
        epochs= 30 , # (int) number of epochs to train for
        patience= 50 , # (int) epochs to wait for no observable improvement for early stopping of training
        batch= 8 , # (int) number of images per batch (-1 for AutoBatch)
        imgsz= 320 , # (int) size of input images as integer or w,h
        save= True , # (bool) save train checkpoints and predict results
        save_period= -1, # (int) Save checkpoint every x epochs (disabled if &lt; 1)
        cache= False , # (bool) True/ram, disk or False. Use cache for data loading
        device= 0 , # (int | str | list, optional) device to run on, i.e. cuda device=0 or device=0,1,2,3 or device=cpu
        workers= 16 , # (int) number of worker threads for data loading (per RANK if DDP)
        project= 'result', # (str, optional) project name
        name= 'yolov8n' ,# (str, optional) experiment name, results saved to 'project/name' directory
        exist_ok= False , # (bool) whether to overwrite existing experiment
        pretrained= False , # (bool | str) whether to use a pretrained model (bool) or a model to load weights from (str)
        optimizer= 'SGD',  # (str) optimizer to use, choices=[SGD, Adam, Adamax, AdamW, NAdam, RAdam, RMSProp, auto]
        verbose= True ,# (bool) whether to print verbose output
        seed= 0 , # (int) random seed for reproducibility
        deterministic= True , # (bool) whether to enable deterministic mode
        single_cls= True , # (bool) train multi-class data as single-class
        rect= False  ,# (bool) rectangular training if mode='train' or rectangular validation if mode='val'
        cos_lr= False , # (bool) use cosine learning rate scheduler
        close_mosaic= 0,  # (int) disable mosaic augmentation for final epochs
        resume= False , # (bool) resume training from last checkpoint
        amp= False,  # (bool) Automatic Mixed Precision (AMP) training, choices=[True, False], True runs AMP check
        fraction= 1.0 , # (float) dataset fraction to train on (default is 1.0, all images in train set)
        profile= False,  # (bool) profile ONNX and TensorRT speeds during training for loggers
        # Segmentation
        overlap_mask= True , # (bool) masks should overlap during training (segment train only)
        mask_ratio= 4,  # (int) mask downsample ratio (segment train only)
        # Classification
        dropout= 0.0,  # (float) use dropout regularization (classify train only)
        # Hyperparameters ----------------------------------------------------------------------------------------------
        lr0=0.01,  # (float) initial learning rate (i.e. SGD=1E-2, Adam=1E-3)
        lrf=0.01,  # (float) final learning rate (lr0 * lrf)
        momentum=0.937,  # (float) SGD momentum/Adam beta1
        weight_decay=0.0005,  # (float) optimizer weight decay 5e-4
        warmup_epochs=3.0,  # (float) warmup epochs (fractions ok)
        warmup_momentum=0.8,  # (float) warmup initial momentum
        warmup_bias_lr=0.1,  # (float) warmup initial bias lr
        box=7.5,  # (float) box loss gain
        cls=0.5,  # (float) cls loss gain (scale with pixels)
        dfl=1.5,  # (float) dfl loss gain
        pose=12.0,  # (float) pose loss gain
        kobj=1.0,  # (float) keypoint obj loss gain
        label_smoothing=0.0,  # (float) label smoothing (fraction)
        nbs=64,  # (int) nominal batch size
        hsv_h=0.015,  # (float) image HSV-Hue augmentation (fraction)
        hsv_s=0.7,  # (float) image HSV-Saturation augmentation (fraction)
        hsv_v=0.4,  # (float) image HSV-Value augmentation (fraction)
        degrees=0.0,  # (float) image rotation (+/- deg)
        translate=0.1,  # (float) image translation (+/- fraction)
        scale=0.5,  # (float) image scale (+/- gain)
        shear=0.0,  # (float) image shear (+/- deg)
        perspective=0.0,  # (float) image perspective (+/- fraction), range 0-0.001
        flipud=0.0,  # (float) image flip up-down (probability)
        fliplr=0.5,  # (float) image flip left-right (probability)
        mosaic=1.0,  # (float) image mosaic (probability)
        mixup=0.0,  # (float) image mixup (probability)
        copy_paste=0.0,  # (float) segment copy-paste (probability)
                )
 </code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9015dd3dc96deeafeedf1d0c25b0523/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">论文-三线表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/71ca57bae73fd9e8bad8fd09e075ba76/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SerializationException: End of Stream encountered before parsing was completed.</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>