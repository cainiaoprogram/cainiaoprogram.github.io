<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用jquery实现倒计时，正计时，且支持页面上多个时间分别倒计时与正计时 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用jquery实现倒计时，正计时，且支持页面上多个时间分别倒计时与正计时" />
<meta property="og:description" content="前言 该功能一共有三个核心技术点
（1）减时间
（2）增时间
（3）减时间到0之后，开始增时间
（4）页面上多个时间，该增加的增加，该减少的减少
小声嘀咕：好像说了跟没说一样。。。
正片 成果 不想看长篇大论的可以直接拿走代码运行
&lt;html&gt; &lt;body&gt; &lt;p&gt; &lt;font color=red&gt;已超时：&lt;span class=&#39;add_day&#39;&gt;1&lt;/span&gt;天&lt;span class=&#39;add_hour&#39;&gt;2&lt;/span&gt;时&lt;span class=&#39;add_minute&#39;&gt;8&lt;/span&gt;分&lt;span class=&#34;add_second&#34;&gt;30&lt;/span&gt;秒&lt;/font&gt; &lt;/p&gt; &lt;p&gt; &lt;font color=red&gt;已超时：&lt;span class=&#39;add_day&#39;&gt;5&lt;/span&gt;天&lt;span class=&#39;add_hour&#39;&gt;23&lt;/span&gt;时&lt;span class=&#39;add_minute&#39;&gt;59&lt;/span&gt;分&lt;span class=&#34;add_second&#34;&gt;55&lt;/span&gt;秒&lt;/font&gt; &lt;/p&gt; &lt;p&gt; &lt;font color=red&gt;已超时：&lt;span class=&#39;add_day&#39;&gt;0&lt;/span&gt;天&lt;span class=&#39;add_hour&#39;&gt;1&lt;/span&gt;时&lt;span class=&#39;add_minute&#39;&gt;0&lt;/span&gt;分&lt;span class=&#34;add_second&#34;&gt;45&lt;/span&gt;秒&lt;/font&gt; &lt;/p&gt; &lt;p&gt; &lt;span class=&#39;sub_text&#39;&gt;剩余时间：&lt;span class=&#39;sub_day&#39;&gt;0&lt;/span&gt;天&lt;span class=&#39;sub_hour&#39;&gt;1&lt;/span&gt;时&lt;span class=&#39;sub_minute&#39;&gt;1&lt;/span&gt;分&lt;span class=&#34;sub_second&#34;&gt;20&lt;/span&gt;秒&lt;/span&gt; &lt;/p&gt; &lt;p&gt; &lt;span class=&#39;sub_text&#39;&gt;剩余时间：&lt;span class=&#39;sub_day&#39;&gt;1&lt;/span&gt;天&lt;span class=&#39;sub_hour&#39;&gt;0&lt;/span&gt;时&lt;span class=&#39;sub_minute&#39;&gt;30&lt;/span&gt;分&lt;span class=&#34;sub_second&#34;&gt;45&lt;/span&gt;秒&lt;/span&gt; &lt;/p&gt; &lt;p&gt; &lt;span class=&#39;sub_text&#39;&gt;剩余时间：&lt;span class=&#39;sub_day&#39;&gt;5&lt;/span&gt;天&lt;span class=&#39;sub_hour&#39;&gt;2&lt;/span&gt;时&lt;span class=&#39;sub_minute&#39;&gt;0&lt;/span&gt;分&lt;span class=&#34;sub_second&#34;&gt;3&lt;/span&gt;秒&lt;/span&gt; &lt;/p&gt; &lt;/body&gt; &lt;script src=&#34;https://code.jquery.com/jquery-3.7.1.slim.min.js&#34; integrity=&#34;sha256-kmHvs0B&#43;OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=&#34; crossorigin=&#34;anonymous&#34;&gt;&lt;/script&gt; &lt;!-- &lt;script src=&#34;https://code.jquery.com/jquery-3.7.1.slim.min.js&#34; integrity=&#34;sha256-kmHvs0B&#43;OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=&#34; crossorigin=&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/537daf945ea9405ed5978cd4c5a0da9b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-30T09:39:13+08:00" />
<meta property="article:modified_time" content="2023-11-30T09:39:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用jquery实现倒计时，正计时，且支持页面上多个时间分别倒计时与正计时</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>前言</h2> 
<p>该功能一共有三个核心技术点</p> 
<p>（1）减时间</p> 
<p>（2）增时间</p> 
<p>（3）减时间到0之后，开始增时间</p> 
<p>（4）页面上多个时间，该增加的增加，该减少的减少</p> 
<p><em><span style="color:#d7d8d9;">小声嘀咕：好像说了跟没说一样。。。</span></em></p> 
<p></p> 
<h2><span style="color:#0d0016;">正片</span></h2> 
<h3><span style="color:#0d0016;">成果</span></h3> 
<p>不想看长篇大论的可以直接拿走代码运行</p> 
<pre><code class="language-html">&lt;html&gt;

&lt;body&gt;
    &lt;p&gt;
        &lt;font color=red&gt;已超时：&lt;span class='add_day'&gt;1&lt;/span&gt;天&lt;span class='add_hour'&gt;2&lt;/span&gt;时&lt;span class='add_minute'&gt;8&lt;/span&gt;分&lt;span class="add_second"&gt;30&lt;/span&gt;秒&lt;/font&gt;
    &lt;/p&gt;

    &lt;p&gt;
        &lt;font color=red&gt;已超时：&lt;span class='add_day'&gt;5&lt;/span&gt;天&lt;span class='add_hour'&gt;23&lt;/span&gt;时&lt;span class='add_minute'&gt;59&lt;/span&gt;分&lt;span class="add_second"&gt;55&lt;/span&gt;秒&lt;/font&gt;
    &lt;/p&gt;

    &lt;p&gt;
        &lt;font color=red&gt;已超时：&lt;span class='add_day'&gt;0&lt;/span&gt;天&lt;span class='add_hour'&gt;1&lt;/span&gt;时&lt;span class='add_minute'&gt;0&lt;/span&gt;分&lt;span class="add_second"&gt;45&lt;/span&gt;秒&lt;/font&gt;
    &lt;/p&gt;

    &lt;p&gt;
        &lt;span class='sub_text'&gt;剩余时间：&lt;span class='sub_day'&gt;0&lt;/span&gt;天&lt;span class='sub_hour'&gt;1&lt;/span&gt;时&lt;span class='sub_minute'&gt;1&lt;/span&gt;分&lt;span class="sub_second"&gt;20&lt;/span&gt;秒&lt;/span&gt;
    &lt;/p&gt;

    &lt;p&gt;
        &lt;span class='sub_text'&gt;剩余时间：&lt;span class='sub_day'&gt;1&lt;/span&gt;天&lt;span class='sub_hour'&gt;0&lt;/span&gt;时&lt;span class='sub_minute'&gt;30&lt;/span&gt;分&lt;span class="sub_second"&gt;45&lt;/span&gt;秒&lt;/span&gt;
    &lt;/p&gt;

    &lt;p&gt;
        &lt;span class='sub_text'&gt;剩余时间：&lt;span class='sub_day'&gt;5&lt;/span&gt;天&lt;span class='sub_hour'&gt;2&lt;/span&gt;时&lt;span class='sub_minute'&gt;0&lt;/span&gt;分&lt;span class="sub_second"&gt;3&lt;/span&gt;秒&lt;/span&gt;
    &lt;/p&gt;
&lt;/body&gt;

&lt;script src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
    integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"&gt;&lt;/script&gt;
&lt;!-- &lt;script src="https://code.jquery.com/jquery-3.7.1.slim.min.js" integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8=" crossorigin="anonymous"&gt;&lt;/script&gt; --&gt;

&lt;script type="text/javascript"&gt;

    // 在一分钟后，为超时时间加上一分钟
    function add_time() {
        // 获取所有的超时时分秒类
        var all_second = $('.add_second')
        var all_minute = $('.add_minute')
        var all_hour = $('.add_hour')
        var all_day = $('.add_day')

        var second = []
        var minute = []
        var hour = []
        var day = []

        // 依次获取超时时间的时分秒
        for (var i = all_minute.length - 1; i &gt;= 0; i--) {
            second[i] = parseInt(all_second[i].innerText)
            minute[i] = parseInt(all_minute[i].innerText)
            hour[i] = parseInt(all_hour[i].innerText)
            day[i] = parseInt(all_day[i].innerText)
        }
        // 依次处理时分秒
        for (var i = minute.length - 1; i &gt;= 0; i--) {
            if (second[i] &lt; 59) {
                all_second[i].innerText = second[i] + 1;
            } else {
                all_second[i].innerText = 0;
                if (minute[i] &lt; 59) {
                    all_minute[i].innerText = minute[i] + 1;
                } else {
                    all_minute[i].innerText = 0;
                    if (hour[i] &lt; 23) {
                        all_hour[i].innerText = hour[i] + 1;
                    } else {
                        all_hour[i].innerText = 0;
                        all_day[i].innerText = day[i] + 1;
                    }
                }
            }
        }
        setTimeout(function () {
            // 在延迟后执行的代码
            add_time();

        }, 1000);
    }

    // 在1分钟后，为剩余时间减去一分钟
    function sub_time() {
        // 获取所有的剩余时分秒类
        var all_second = $('.sub_second')
        var all_minute = $('.sub_minute')
        var all_hour = $('.sub_hour')
        var all_day = $('.sub_day')
        var all_text = $('.sub_text')

        var second = []
        var minute = []
        var hour = []
        var day = []
        // 依次获取剩余时间的时分秒
        for (var i = all_minute.length - 1; i &gt;= 0; i--) {
            second[i] = parseInt(all_second[i].innerText)
            minute[i] = parseInt(all_minute[i].innerText)
            hour[i] = parseInt(all_hour[i].innerText)
            day[i] = parseInt(all_day[i].innerText)
        }

        // 依次处理时分秒
        for (var i = minute.length - 1; i &gt;= 0; i--) {
            if (second[i] &lt;= 0) {
                all_second[i].innerText = 59;
                if (minute[i] &lt;= 0) {
                    all_minute[i].innerText = 59;
                    if (hour[i] &lt;= 0) {
                        all_hour[i].innerText = 23;
                        if (day[i] &lt;= 0) {
                            all_text[i].innerHTML = '&lt;font color="red"&gt;已超时：&lt;span class="add_day"&gt;0&lt;/span&gt;天&lt;span class="add_hour"&gt;0&lt;/span&gt;时&lt;span class="add_minute"&gt;0&lt;/span&gt;分&lt;span class="add_second"&gt;0&lt;/span&gt;秒&lt;/font&gt;'
                        } else {
                            all_day[i].innerText = day[i] - 1;
                        }
                    } else {
                        all_hour[i].innerText = hour[i] - 1;
                    }
                } else {
                    all_minute[i].innerText = minute[i] - 1;
                }
            } else {
                all_second[i].innerText = second[i] - 1;
            }
        }

        setTimeout(function () {
            // 在延迟后执行的代码
            sub_time();

        }, 1000);
    }

    $(function () {
        setTimeout(function () {
            // 在延迟后执行的代码
            add_time();
            sub_time();

        }, 1000);


    });


&lt;/script&gt;

&lt;/html&gt;</code></pre> 
<p></p> 
<h3><span style="color:#0d0016;">增时间</span></h3> 
<p><span style="color:#0d0016;">先来说增时间吧</span></p> 
<p><span style="color:#0d0016;">先看js代码，这是增时间的核心代码</span></p> 
<pre><code class="language-javascript">if(second[i]&lt;59){
    all_second[i].innerText = second[i]+1;
}else{
    all_second[i].innerText = 0;
    if(minute[i]&lt;59){
        all_minute[i].innerText = minute[i]+1;
    }else{
        all_minute[i].innerText = 0;
        if(hour[i]&lt;23){
            all_hour[i].innerText = hour[i] + 1;
        }else{
            all_hour[i].innerText = 0;
            all_day[i].innerText = day[i] + 1;
        }
    }
}</code></pre> 
<p>增时间比较简单，主要思想就是，先判断最小单位，小于59的话，无脑增加，如果大于等于59的话，赋值0之后给上一位加1，上一位加的时候也要判断是否满足进1条件，满足的话，依次处理</p> 
<p></p> 
<h3>减时间</h3> 
<p>减时间稍微复杂一点点，但是和增时间也比较类似</p> 
<p>先看代码</p> 
<pre><code class="language-javascript">if (second[i] &lt;= 0) {
    all_second[i].innerText = 59;
    if (minute[i] &lt;= 0) {
        all_minute[i].innerText = 59;
        if (hour[i] &lt;= 0) {
            all_hour[i].innerText = 23;
            if (day[i] &lt;= 0) {
                all_text[i].innerHTML = '&lt;font color="red"&gt;已超时：&lt;span class="add_day"&gt;0&lt;/span&gt;天&lt;span class="add_hour"&gt;0&lt;/span&gt;时&lt;span class="add_minute"&gt;0&lt;/span&gt;分&lt;span class="add_second"&gt;0&lt;/span&gt;秒&lt;/font&gt;'
            } else {
                all_day[i].innerText = day[i] - 1;
            }
        } else {
            all_hour[i].innerText = hour[i] - 1;
        }
    } else {
        all_minute[i].innerText = minute[i] - 1;
    }
} else {
    all_second[i].innerText = second[i] - 1;
}</code></pre> 
<p>减时间的时候，也是从最小单位秒开始减，判断秒是不是小于等于0，如果大于0的话，无脑减1，小于等于0的话，下一次应该要赋值给秒59的值了，但是也应该判断前一位是否满足小于等于0，若满足，依次处理</p> 
<h3>减到0之后，开始增时间</h3> 
<p>和增时间不同的是，如果所有位都减到了0，则应该开始从0计数，开始增加时间，所以当所有位都减到0时，直接给那个p标签中更换html文本</p> 
<p></p> 
<h3>多个时间的处理</h3> 
<p>经查找资料，可以对同一类的多个标签进行依次处理</p> 
<pre><code class="language-javascript">// 获取所有的剩余时分秒类
var all_second = $('.sub_second')
var all_minute = $('.sub_minute')
var all_hour = $('.sub_hour')
var all_day = $('.sub_day')
var all_text = $('.sub_text')

var second = []
var minute = []
var hour = []
var day = []
// 依次获取剩余时间的时分秒
for (var i = all_minute.length - 1; i &gt;= 0; i--) {
    second[i] = parseInt(all_second[i].innerText)
    minute[i] = parseInt(all_minute[i].innerText)
    hour[i] = parseInt(all_hour[i].innerText)
    day[i] = parseInt(all_day[i].innerText)
}
for (var i = minute.length - 1; i &gt;= 0; i--) {
    // 循环处理
}</code></pre> 
<p>首先通过“$('.sub_second')”的方式获取class，然后整理出各class的时分秒信息，方便后面foreach处理，获取完之后，丢foreach里，该增增，该减减</p> 
<h2>结尾</h2> 
<p>本文没有增加上年，如果需要的话，可以举一反三，如果想去掉秒的话，也希望大家可以举一反三</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/226abecb1fad17286dd31db1318e2fa0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">游戏动作师效能汇报以及交接流程规范</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d74c3194c81cf05a71421cd4814754ba/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">echo -e 终端颜色定制的例子</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>