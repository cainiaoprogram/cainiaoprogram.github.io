<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【RT-DETR有效改进】带你分析如何确定改进的基础模型，解决模型无法收敛精度很差的问题(ResNet官方一比一复现) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【RT-DETR有效改进】带你分析如何确定改进的基础模型，解决模型无法收敛精度很差的问题(ResNet官方一比一复现)" />
<meta property="og:description" content="一、本文介绍 Hello，各位读者，距离第一天发RT-DETR的博客已经过去了接近两个月，这段时间里我深入的研究了一下RT-DETR在ultralytics仓库的使用，旨在为大家解决为什么用v8的仓库训练的时候模型不收敛，精度差的离谱的问题，我也是成功的找到了解决方案，对于ultralytics仓库进行多处改进从而让其还原RT-DETR官方的实验环境从而达到一比一的效果。
其次我也将RT-DER的官方版本ResNet18、ResNet34、ResNet50、ResNet101集成在ultralytics仓库（不同于现在仓库里更新的R50和R101我是根据RT-DETR官方的代码一比一移植过来的参数量基本保持一致，网上发的都是ResNet的本身，但这和RT-DETR官方实验的版本其实是有很大的出入的）所以从今天开始正式开始更新RT-DETR的改进了，下面来教大家选取自己的baseline也就是你改进的基础模型，后面会说到如何解决模型为何不收敛的问题，以及我用我复现模型训练的结果。 本专栏旨在打造全网最好的RT-DETR专栏！
目录
一、本文介绍
二、RT-DETR发表论文的方向 三、Baseline的选择 四、模型无法收敛的问题 五、专栏链接
二、RT-DETR发表论文的方向 开始之前先来给大家聊一下RT-DETR发论文的方向，我们发论文的两个大方向一个就是轻量化另一个就是提高mAP精度，针对于RT-DETR这个模型我认为其无论选取这两个方向的任意一个都是非常好的选择，但总有一个更容易，我下面分别来讲一下。
选择轻量化的理由(十分推荐)：RT-DETR的模型都是非常大的，其最小的版本RT-DETR-R18都有2kw的参数量GFLOPs达到了60，这是一个非常大的参数了，我们如果想在其基础上做一个轻量化的操作，我们拿市面上的任意一个主干基本上都可以减少其参数量，所以我认为如果大家想在RT-DETR领域发一遍论文轻量化是一个非常好的选择，尤其是在一些实时检测领域上。
提高mAP精度的理由(推荐)：从RT-DETR的实验对比上来看，其精度其实是不如YOLO系列的，所以我们就有很多的借鉴模块来使用，来提高mAP，不过提高mAP肯定不如轻量化的方向毕竟其打的旗号就是在实时检测领域超越YOLO的存在。
其它方向就不介绍了，我觉得都不如这两个好发。
三、Baseline的选择 下面来给大家说一下如何选取你的baseline
第一考虑的肯定是大家的算力，RT-DETR的模型非常大，我移植到ultralytics仓库的R18版本RT-DETR参数量基本和官方一致为2kw但GFLOps稍微有点差别为58.6和官方差了1.4(为YOLO版本自带的误差）。
（ 此版本大家在网上任意一个地方都找不到为我本人按照官方的内容一比一移植过来的）
上面说到了算力，我自己的电脑是3070-8G的显卡跑R18只能跑到4batch_size，如果更高的版本我的batch_size就需要往下降低。
然后先讲解我们选择Baseline的两个大的方向一个是ResNet版本，另一个是PPHGNetV2版本的，这里我建议大家选择的是ResNet版本，我来说一下理由
ResNet好像是2015年提出的，其效果早已被如今的各种网络模型超越，所以其改进空间非常大，无论是从轻量化的角度还是提高精度的角度出发都更容易一些。
PP-HGNetV2是百度今年新提出来的网络模型，其无论是精度还是成熟度上都已经很完美了，如果大家选择这个可能就会陷入像YOLOv8一样提高精度和轻量化都不好做，所以我推荐的是ResNet系列的版本(个人见解)。
我们再来说一下ResNet的多个版本。
其中首先pass掉的就是R101了模型太大改进成本太高了。
其次是R18、R34、R50。
一开始我想推荐R50了但是觉得其不如R18首先R18作为最基础版本的模型，其精度远不如哪几个，然后其参数量也是一个绝大多数人可以接受的范围内2kw和计算量60GFLOPs，所以我个人推荐的就是最基础的R18版本，其可以被绝大多数人接受的同时也更能容易改进，同时现在ultralytics仓库里面还没有集成ResNet18(这也是因素之一)，如果大家和我学习改进的话就相当于快人一步了，下面给大家看一下完整网络结构的打印。
四、模型无法收敛的问题 这里再给大家说一下大家训练模型不拟合的问题是因为有些参数没有按照官方版本的进行设置，因为 ultralytics首先是要为了YOLO系列服务的，而RT-DETR对于参数是非常的敏感的其有一些代码设置的也和YOLO系列相不符合，所以现在的ultralytics仓库的RT-DETR只能说有了RT-DETR的外壳内部确是不符的，所以这些问题导致大家训练模型不能够拟合，无论怎么换数据集效果都一样。
所以想要学习RT-DETR的您可以关注本专栏(我会教大家如何调参数，然后修改模型中的代码适配RT-DETR还原RT-DETR的环境)，相信本专栏一定会让您有所收获，本专栏本次旨在打造全网最好的RT-DETR专栏，订阅专栏之后您也可以像我的YOLOv8用户一样获得官方的交流群和完整的项目文件(包含我所有的改进机制，均可完美运行)，以及我的视频讲解教大家一些发论文过程种我本人的各种经验。
下面是按照我修改完以后RT-DETR模型的拟合图片，这还仅仅是R18的版本，所以想要和我学习RT-DETR发论文的读者可以关注一下本专栏的动态。
以下为训练完成的结果图。
下面介绍一下我以后的博客必备的内容就是实验对比图，该图会给大家放在最前侧展示改进机制的效果，可能是轻量化的也可能是提点的。
五、本文总结 从今天开始正式开始更新RT-DETR剑指论文专栏，本专栏的内容会迅速铺开，在短期呢大量更新，价格也会乘阶梯性上涨，所以想要和我一起学习RT-DETR改进，可以在前期直接关注，本文专栏旨在打造全网最好的RT-DETR专栏为想要发论文的家进行服务。
官方链接：RT-DETR剑指论文专栏" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2015154cd13031bb16f0f71c927975f5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-12T05:33:59+08:00" />
<meta property="article:modified_time" content="2024-01-12T05:33:59+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【RT-DETR有效改进】带你分析如何确定改进的基础模型，解决模型无法收敛精度很差的问题(ResNet官方一比一复现)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="%E4%B8%80%E3%80%81%E6%9C%AC%E6%96%87%E4%BB%8B%E7%BB%8D">一、本文介绍</h2> 
<p>Hello，各位读者，距离第一天发<span style="color:#1a439c;"><strong>RT-DETR</strong></span>的博客已经过去了接近两个月，这段时间里我深入的研究了一下RT-DETR在ultralytics仓库的使用，旨在为大家解决为什么用v8的仓库训练的时候模型不收敛，精度差的离谱的问题，我也是成功的找到了解决方案，对于ultralytics仓库进行多处改进从而让其还原RT-DETR官方的实验环境从而达到一比一的效果。</p> 
<p>其次我也将RT-DER的官方版本<span style="color:#ed7976;"><strong>ResNet18、ResNet34、ResNet50、ResNet101</strong></span>集成在ultralytics仓库（不同于现在仓库里更新的R50和R101我是根据RT-DETR官方的代码一比一移植过来的参数量基本保持一致，网上发的都是ResNet的本身，但这和RT-DETR官方实验的版本其实是有很大的出入的）所以从<span style="color:#1c7892;"><strong>今天开始正式开始更新RT-DETR的改进了</strong></span>，下面来教大家选取自己的baseline也就是你改进的基础模型，后面会说到如何解决模型为何不收敛的问题，<span style="color:#1a439c;"><strong>以及我用我复现模型训练的结果。 </strong></span></p> 
<p style="text-align:center;"><span style="color:#fe2c24;"><strong>本专栏旨在打造全网最好的RT-DETR专栏！</strong></span></p> 
<p><img alt="" height="464" src="https://images2.imgbox.com/42/a2/nFzJFern_o.png" width="1200"></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E6%9C%AC%E6%96%87%E4%BB%8B%E7%BB%8D-toc" style="margin-left:0px;"><strong><a href="#%E4%B8%80%E3%80%81%E6%9C%AC%E6%96%87%E4%BB%8B%E7%BB%8D" rel="nofollow">一、本文介绍</a></strong></p> 
<p id="%E4%BA%8C%E3%80%81%E7%90%86%E7%94%B1RT-DETR%E5%8F%91%E8%A1%A8%E8%AE%BA%E6%96%87%E7%9A%84%E6%96%B9%E5%90%91%C2%A0-toc" style="margin-left:0px;"><strong><a href="#%E4%BA%8C%E3%80%81%E7%90%86%E7%94%B1RT-DETR%E5%8F%91%E8%A1%A8%E8%AE%BA%E6%96%87%E7%9A%84%E6%96%B9%E5%90%91%C2%A0" rel="nofollow">二、RT-DETR发表论文的方向 </a></strong></p> 
<p id="%E4%B8%89%E3%80%81Baseline%E7%9A%84%E9%80%89%E6%8B%A9%C2%A0-toc" style="margin-left:0px;"><strong><a href="#%E4%B8%89%E3%80%81Baseline%E7%9A%84%E9%80%89%E6%8B%A9%C2%A0" rel="nofollow">三、Baseline的选择 </a></strong></p> 
<p id="%E5%9B%9B%E3%80%81%E6%A8%A1%E5%9E%8B%E6%97%A0%E6%B3%95%E6%94%B6%E6%95%9B%E7%9A%84%E9%97%AE%E9%A2%98%C2%A0-toc" style="margin-left:0px;"><strong><a href="#%E5%9B%9B%E3%80%81%E6%A8%A1%E5%9E%8B%E6%97%A0%E6%B3%95%E6%94%B6%E6%95%9B%E7%9A%84%E9%97%AE%E9%A2%98%C2%A0" rel="nofollow">四、模型无法收敛的问题 </a></strong></p> 
<p id="%E4%BA%94%E3%80%81%E4%B8%93%E6%A0%8F%E9%93%BE%E6%8E%A5-toc" style="margin-left:0px;"><strong><a href="#%E4%BA%94%E3%80%81%E4%B8%93%E6%A0%8F%E9%93%BE%E6%8E%A5" rel="nofollow">五、专栏链接</a></strong></p> 
<hr> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E7%90%86%E7%94%B1RT-DETR%E5%8F%91%E8%A1%A8%E8%AE%BA%E6%96%87%E7%9A%84%E6%96%B9%E5%90%91%C2%A0"><strong>二、RT-DETR发表论文的方向 </strong></h2> 
<p><span style="color:#fe2c24;"><strong>开始之前先来给大家聊一下RT-DETR发论文的方向</strong></span>，我们发论文的两个大方向一个就是轻量化另一个就是提高mAP精度，针对于RT-DETR这个模型我认为其无论选取这两个方向的任意一个都是非常好的选择，但总有一个更容易，我下面分别来讲一下。</p> 
<p><span style="color:#1a439c;"><strong>选择轻量化的理由(十分推荐)：</strong></span>RT-DETR的模型都是非常大的，其最小的版本RT-DETR-R18都有2kw的参数量GFLOPs达到了60，这是一个非常大的参数了，我们如果想在其基础上做一个轻量化的操作，我们拿市面上的任意一个主干基本上都可以减少其参数量，所以我认为如果大家想在RT-DETR领域发一遍论文轻量化是一个非常好的选择，尤其是在一些实时检测领域上。</p> 
<p><span style="color:#1a439c;"><strong>提高mAP精度的理由(推荐)：</strong></span>从RT-DETR的实验对比上来看，其精度其实是不如YOLO系列的，所以我们就有很多的借鉴模块来使用，来提高mAP，不过提高mAP肯定不如轻量化的方向毕竟其打的旗号就是在实时检测领域超越YOLO的存在。</p> 
<p><strong>其它方向就不介绍了，我觉得都不如这两个好发。</strong></p> 
<p></p> 
<hr> 
<h2 id="%E4%B8%89%E3%80%81Baseline%E7%9A%84%E9%80%89%E6%8B%A9%C2%A0">三、Baseline的选择 </h2> 
<p>下面来给大家说一下如何选取你的baseline</p> 
<p>第一考虑的肯定是大家的算力，RT-DETR的模型非常大，我移植到ultralytics仓库的R18版本RT-DETR参数量基本和官方一致为2kw但GFLOps稍微有点差别为58.6和官方差了1.4(为YOLO版本自带的误差）。</p> 
<p style="text-align:center;"><img alt="" height="36" src="https://images2.imgbox.com/c5/e4/vyE3bMSW_o.png" width="710"><img alt="" height="34" src="https://images2.imgbox.com/91/92/xUAi4V9J_o.png" width="860"><span style="color:#fe2c24;"><strong>（ 此版本大家在网上任意一个地方都找不到为我本人按照官方的内容一比一移植过来的）</strong></span></p> 
<p>上面说到了算力，我自己的电脑是3070-8G的显卡跑R18只能跑到4batch_size，如果更高的版本我的batch_size就需要往下降低。</p> 
<p>然后先讲解我们选择Baseline的两个大的方向一个是<strong><span style="color:#fe2c24;">ResNet</span></strong>版本，另一个是<strong><span style="color:#fe2c24;">PPHGNetV2</span></strong>版本的，这里我建议大家选择的是ResNet版本，我来说一下理由</p> 
<p>ResNet好像是2015年提出的，其效果早已被如今的各种网络模型超越，所以其改进空间非常大，无论是从轻量化的角度还是提高精度的角度出发都更容易一些。</p> 
<p>PP-HGNetV2是百度今年新提出来的网络模型，其无论是精度还是成熟度上都已经很完美了，如果大家选择这个可能就会陷入像YOLOv8一样提高精度和轻量化都不好做，所以我推荐的是ResNet系列的版本(个人见解)。</p> 
<p>我们再来说一下ResNet的多个版本。</p> 
<p><img alt="" height="249" src="https://images2.imgbox.com/e8/63/tANEeu1J_o.png" width="1025"></p> 
<p><span style="color:#fe2c24;"><strong>其中首先pass掉的就是R101了模型太大改进成本太高了。</strong></span></p> 
<p>其次是<strong>R18、R34、R50</strong>。</p> 
<p>一开始我想推荐R50了但是觉得其不如R18首先R18作为最基础版本的模型，其精度远不如哪几个，然后其参数量也是一个绝大多数人可以接受的范围内2kw和计算量60GFLOPs，所以我个人推荐的就是最基础的R18版本，其可以被绝大多数人接受的同时也更能容易改进，同时现在ultralytics仓库里面还没有集成ResNet18(这也是因素之一)，如果大家和我学习改进的话就相当于快人一步了，下面给大家看一下完整网络结构的打印。</p> 
<p><img alt="" height="659" src="https://images2.imgbox.com/82/68/NCSHiZDS_o.png" width="1022"></p> 
<p></p> 
<hr> 
<h2 id="%E5%9B%9B%E3%80%81%E6%A8%A1%E5%9E%8B%E6%97%A0%E6%B3%95%E6%94%B6%E6%95%9B%E7%9A%84%E9%97%AE%E9%A2%98%C2%A0">四、模型无法收敛的问题 </h2> 
<p>这里再给大家说一下大家训练模型不拟合的问题是因为有些参数没有按照官方版本的进行设置，因为 ultralytics首先是要为了YOLO系列服务的，而RT-DETR对于参数是非常的敏感的其有一些代码设置的也和YOLO系列相不符合，所以现在的ultralytics仓库的RT-DETR只能说有了RT-DETR的外壳内部确是不符的，所以这些问题导致大家训练模型不能够拟合，无论怎么换数据集效果都一样。</p> 
<p>所以想要学习RT-DETR的您可以关注本专栏(我会教大家如何调参数，然后修改模型中的代码适配RT-DETR还原RT-DETR的环境)，相信本专栏一定会让您有所收获，<span style="color:#1a439c;"><strong>本专栏本次旨在打造全网最好的RT-DETR专栏，</strong></span>订阅专栏之后您也可以像我的YOLOv8用户一样获得官方的交流群和完整的项目文件(包含我所有的改进机制，均可完美运行)，以及我的视频讲解教大家一些发论文过程种我本人的各种经验。</p> 
<p><span style="color:#956fe7;"><strong>下面是按照我修改完以后RT-DETR模型的拟合图片，这还仅仅是R18的版本，所以想要和我学习RT-DETR发论文的读者可以关注一下本专栏的动态。</strong></span></p> 
<p><img alt="" height="843" src="https://images2.imgbox.com/54/37/OcskJVbF_o.png" width="1110"></p> 
<p>以下为训练完成的结果图。</p> 
<p><img alt="" height="115" src="https://images2.imgbox.com/e8/fe/pHjfYKUv_o.png" width="1134"></p> 
<hr> 
<p>下面介绍一下我以后的博客必备的内容就是实验对比图，该图会给大家放在最前侧展示改进机制的效果，可能是轻量化的也可能是提点的。</p> 
<p><img alt="" height="607" src="https://images2.imgbox.com/0a/99/WmJxbCqP_o.png" width="1025"></p> 
<p></p> 
<hr> 
<h2 id="%E4%BA%94%E3%80%81%E4%B8%93%E6%A0%8F%E9%93%BE%E6%8E%A5">五、本文总结</h2> 
<p>从今天开始正式开始更新RT-DETR剑指论文专栏，本专栏的内容会迅速铺开，在短期呢大量更新，价格也会乘阶梯性上涨，所以想要和我一起学习RT-DETR改进，可以在前期直接关注，<span style="color:#1a439c;"><strong>本文专栏旨在打造全网最好的RT-DETR专栏为想要发论文的家进行服务。</strong></span></p> 
<blockquote> 
 <p><span style="color:#fe2c24;"><strong>官方链接：</strong></span><a href="https://blog.csdn.net/java1314777/category_12500428.html?spm=1001.2014.3001.5482" title="RT-DETR剑指论文专栏">RT-DETR剑指论文专栏</a></p> 
</blockquote> 
<p><img alt="" height="396" src="https://images2.imgbox.com/fa/7f/rDHAXACz_o.gif" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/527b7be409e3c8f68148fa347f3f5b87/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">微信小程序：手机授权getPhoneNumber拒绝授权返回错误信息提示</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/66dc24e4507bbac494e60bbba10d2f6f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">YOLOv8改进 | 检测头篇 | 利用DySnakeConv改进检测头专用于分割的检测头（全网独家首发，Seg）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>