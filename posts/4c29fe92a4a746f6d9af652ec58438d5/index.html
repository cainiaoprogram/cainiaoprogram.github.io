<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>网站部署到其他服务器但无权修改,web项目部署到服务器遇到的问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="网站部署到其他服务器但无权修改,web项目部署到服务器遇到的问题" />
<meta property="og:description" content="web项目部署到Linux服务器遇到的问题
(内含war包部署产生的问题)
部署项目为：旅游网(可下载源码)
一 Linux部署环境问题
二 war包错误修改
Linux部署环境问题 整个Linux服务器部署参照博客 https://blog.csdn.net/qq_41635167/article/details/81096075
Linux 命令
systemctl start mysql.service#启动mysql服务
vim /var/log/mysqld.log#查看mysql日志
rpm -qal |grep mysql #查找是否安装mysql
netstat -anp|grep 3305 #查找进程，搜索端口为3305是否存在；可删除|及|后的命令，显示所有进程
pgrep -l java #查找进程名为“java”的PID，java一般为tomcat进程
kill -9 9090 #强制删除进程pid为9090的进程
netstat -ntlp #查看开启的所有端口
vi /etc/sysconfig/iptables #编辑 防火墙 规则
systemctl start firewalld.service #启动防火墙
systemctl enable firewalld.service #设置开机启动
systemctl restart firewalld.service #重启防火墙
firewall-cmd --state #检查是否打开
// 看sshd服务状态
service sshd status
// 如果没有启动就启动sshd服务
servcie sshd start
查看 linux 下tomcat实时日志信息 及 tomcat控制台输出" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4c29fe92a4a746f6d9af652ec58438d5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-08-11T09:33:36+08:00" />
<meta property="article:modified_time" content="2021-08-11T09:33:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">网站部署到其他服务器但无权修改,web项目部署到服务器遇到的问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>web项目部署到Linux服务器遇到的问题</p> 
 <p>(内含war包部署产生的问题)</p> 
 <p>部署项目为：旅游网(可下载源码)</p> 
 <p>一 Linux部署环境问题</p> 
 <p>二 war包错误修改</p> 
 <p>Linux部署环境问题 整个Linux服务器部署参照博客 https://blog.csdn.net/qq_41635167/article/details/81096075</p> 
 <p>Linux 命令</p> 
 <p>systemctl start mysql.service#启动mysql服务</p> 
 <p>vim /var/log/mysqld.log#查看mysql日志</p> 
 <p>rpm -qal |grep mysql #查找是否安装mysql</p> 
 <p>netstat -anp|grep 3305 #查找进程，搜索端口为3305是否存在；可删除|及|后的命令，显示所有进程</p> 
 <p>pgrep -l java #查找进程名为“java”的PID，java一般为tomcat进程</p> 
 <p>kill -9 9090 #强制删除进程pid为9090的进程</p> 
 <p>netstat -ntlp #查看开启的所有端口</p> 
 <p>vi /etc/sysconfig/iptables #编辑 防火墙 规则</p> 
 <p>systemctl start firewalld.service #启动防火墙</p> 
 <p>systemctl enable firewalld.service #设置开机启动</p> 
 <p>systemctl restart firewalld.service #重启防火墙</p> 
 <p>firewall-cmd --state #检查是否打开</p> 
 <p>// 看sshd服务状态</p> 
 <p>service sshd status</p> 
 <p>// 如果没有启动就启动sshd服务</p> 
 <p>servcie sshd start</p> 
 <p>查看 linux 下tomcat实时日志信息 及 tomcat控制台输出</p> 
 <p>进入你tomcat的安装目录下的logs，</p> 
 <p>如 我安装目录是</p> 
 <p>/opt/DATA/tomcat8.5.55/apache-tomcat-8.5.55，</p> 
 <p>则进入</p> 
 <p>/opt/DATA/tomcat8.5.55/apache-tomcat-8.5.55/logs</p> 
 <p>命令为 ：</p> 
 <p>(下面的JAVA_HOME需要修改为自己的tomcat安装目录)</p> 
 <p>cd /opt/DATA/tomcat8.5.55/apache-tomcat-8.5.55/logs</p> 
 <p>在该目录下，输入查看命令：</p> 
 <p>//在logs目录下，输入命令</p> 
 <p>tail -f catalina.out</p> 
 <p>然后重开一个远程窗口进行其他操作，刷新浏览器，就可以在原来的窗口看到tomcat日志了，会打印控制台，实时变化的哦~ ctrl+c可以退出日志</p> 
 <p>访问权限不足，无法写入</p> 
 <p>linux安装的JDK，Tomcat等东西最好放在目录 opt文件夹 或者 usr文件夹下，</p> 
 <p>其他文件夹非root用户可能会出现访问权限不足，无法写入或无法访问等问题，比较麻烦</p> 
 <p>tomcat无法访问：</p> 
 <p>tomcat 的 安装目录的 bin目录下的 catalina.sh文件使用</p> 
 <p>vi ./catalina.sh</p> 
 <p>命令进行编辑(进入后按键盘“insert”编辑，退出是先按 Esc 在输入：wq)</p> 
 <p>加入以下命令,在开头注释结束部分</p> 
 <p>(下面的JAVA_HOME需要修改为自己的JDK安装目录)</p> 
 <p>JAVA_HOME=/opt/DATA/jdk1.8.0_161</p> 
 <p>PATH=$JAVA_HOME/bin:$PATH</p> 
 <p>CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</p> 
 <p>网页验证码无法加载出来</p> 
 <p>错误：java.lang.NoClassDefFoundError: Could not initialize class sun.awt.X11Graphi</p> 
 <p>(原因：对于一个Java服务器来说经常要处理一些图形元素，例如地图的创建或者图形和图表等。这些API基本上总是需要运行一个X-server以便能使用AWT(Abstract Window Toolkit，抽象窗口工具集)。)</p> 
 <p>tomcat 的 安装目录的 bin目录下的 catalina.sh文件使用</p> 
 <p>vi ./catalina.sh</p> 
 <p>命令进行编辑(进入后按键盘“insert”编辑，退出是先按 Esc 再输入：wq)</p> 
 <p>加入命令</p> 
 <p>JAVA_OPTS="$JAVA_OPTS -Djava.awt.headless=true"</p> 
 <p>宝塔页面tomcat，mysql无法关闭</p> 
 <p>宝塔 软件管理界面，卸载</p> 
 <p>Linux防火墙端口限制解除</p> 
 <p>xshell中 输入命令：(直接对文件进行编辑，进入后按键盘上的 insert 进入编辑模式，修改完成后按Esc ，再输入 :wq 保存并退出(冒号不能忘掉))</p> 
 <p>vi /etc/sysconfig/iptables</p> 
 <p>这是我的文件内容，添加端口可直接在文件里追加</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -ACCEPT</p> 
 <p>将这条的 443 改为所要添加的端口号</p> 
 <p>下面为文件内容：</p> 
 <p>*filter</p> 
 <p>:INPUT ACCEPT [0:0]</p> 
 <p>: FORNARD ACCEPT [0:0]</p> 
 <p>:OUTPUT ACCEPT [0:0]</p> 
 <p>A INPUT -m state --state REL ATED, ESTABLISHED j ACCEPT</p> 
 <p>A INPUT P icmp -</p> 
 <p>ACCEPT</p> 
 <p>A INPUT -1 lo -j ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp P tcp</p> 
 <p>dport 21 j</p> 
 <p>ACCEPT</p> 
 <p>A INPUT -p tcp -m state --state NEW -m tcp --dport 22</p> 
 <p>ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 80</p> 
 <p>ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 88-ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 443 -ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 888 -ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 3306 -ACCEP</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 3389 -ACCEPTT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 8080 -ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -p tcp --dport 177 -ACCEPT</p> 
 <p>A INPUT -m state --state NEW -m tcp -P tcp --dport 8888 ACCEPT</p> 
 <p>A INPUT j REJECT -- reject -with icmp -host p rohibited</p> 
 <p>A FORWARD j REJECT - reject -with icmp -host p rohibited</p> 
 <p>然后</p> 
 <p>systemctl restart firewalld.service</p> 
 <p>进行重启防火墙</p> 
 <p>ps : 如果防火墙报错可用</p> 
 <p>firewall-cmd --state #查看是否打开防火墙</p> 
 <p>查看防火墙是否打开，如果未打开，使用</p> 
 <p>systemctl start firewalld.service #启动防火墙</p> 
 <p>war包错误修改</p> 
 <p>读取不到properties文件(原来在本机运行的项目是使用的本机绝对路径：G/workspace/xx.properties)，修改为如图所示</p> 
 <p align="center"> <img src="https://images2.imgbox.com/51/ca/aOsT1dUR_o.png" alt="5715af651d4cb99c44dcfdfc89188f1c.png"></p> 
 <p>//相对路径加载properties文件方法</p> 
 <p>Properties props = new Properties();</p> 
 <p>String PATH="druid.properties";</p> 
 <p>InputStream in = PropertyTest.class.getClassLoader().getResourceAsStream(PATH);</p> 
 <p>props.load(in);</p> 
 <p>resources/druid.propeties问题报错(数据库问题)</p> 
 <p>propeties文件内部存储的是数据库账户密码，drive，url；都得根据自己的情况进行相应修改</p> 
 <p>driverClassName=com.mysql.jdbc.Driver</p> 
 <p>url=jdbc:mysql://localhost：3306/travel</p> 
 <p>username=root</p> 
 <p>password=password</p> 
 <p>当数据库和部署的项目至同一个服务器时，上边的url中的localhost可以不变，否则改为服务器ip地址；</p> 
 <p>端口改为mysql端口；</p> 
 <p>账户密码改为自己的账户密码。</p> 
 <p>Table ‘travel.tab_seller’ doesn’t exist</p> 
 <p>重新创建表</p> 
 <p>mysql错误：ERROR 1045 (28000): Access denied for user ‘root’@'localhost</p> 
 <p>mysqladmin -u root password admin #shell中修改密码为admin</p> 
 <p>mysql要是怎么都登不进去，重装吧，或者试试其他密码，或许你可能之前设置了其他密码，别问我是怎么知道的~</p> 
 <p>修改mysql密码</p> 
 <p>-</p> 
 <p>格式：mysqladmin -u用户名 -p旧密码 password 新密码</p> 
 <p>例子：mysqladmin -uroot -p123456 password 123</p> 
 <p>-</p> 
 <p>格式：mysql&gt; set password for 用户名@localhost = password('新密码');</p> 
 <p>例子：mysql&gt; set password for root@localhost = password('123');</p> 
 <p>-</p> 
 <p>mysql&gt; use mysql;</p> 
 <p>mysql&gt; update user set password=password('123') where user='root' and host='localhost';</p> 
 <p>mysql&gt; flush privileges;</p> 
 <p>- 彻底忘记密码</p> 
 <p>1.vi /etc/my.cnf</p> 
 <p>2. 在[mysqld]下面添加一条命令：skip-grant-tables</p> 
 <p>3. ：wq</p> 
 <p>4.1 进入MySql控制台(直接按回车，这时不需要输入root密码。)</p> 
 <p>mysql -uroot -p</p> 
 <p>4.2 切换到mysql数据库</p> 
 <p>mysql&gt;use mysql;</p> 
 <p>4.3 修改mysql数据库中root的密码</p> 
 <p>mysql&gt; update user set password=password(“填入新密码”) where user=‘root’;</p> 
 <p>4.4 刷新mysql权限</p> 
 <p>mysql&gt; flush privileges;</p> 
 <p>4.5 退出</p> 
 <p>mysql&gt; exit;</p> 
 <p>5.再次vi /etc/my.cnf。把skip-grant-tables删除掉,保存退出：wq</p> 
 <p>(自项目— 旅游网 错误,非本项目无需理会)邮件发送错误</p> 
 <p>除非你不使用 注册 功能，否则</p> 
 <p align="center"> 修改 cn.itcast.travel.util.MailUtil的String USER 和 PASSWORD修改为自己的<img src="https://images2.imgbox.com/a7/d3/Tbs9vJGf_o.png" alt="6656b5599823acbeed89f72f299af1ce.png"></p> 
 <p>(自项目— 旅游网 错误,非本项目无需理会)数据库错误 或 resources/druid.propeties问题报错(数据库问题)</p> 
 <p>propeties文件内部存储的是数据库账户密码，drive，url；都得根据自己的情况进行相应修改</p> 
 <p>driverClassName=com.mysql.jdbc.Driver</p> 
 <p>url=jdbc:mysql://localhost：3306/travel</p> 
 <p>username=root</p> 
 <p>password=password</p> 
 <p align="center"><img src="https://images2.imgbox.com/91/4e/SdNru6wh_o.png" alt="9929e60c0d6feb4e4be9feb9f2f32bb2.png"></p> 
 <p>账户密码改为自己的账户密码。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6f90e8a30c1fb895bbb654ea78cd2b96/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">怎么把手机文件导入华为云服务器,华为手机如何上传数据到云服务器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/be542351c1d8c723edf6ee92781953f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">异化之地未能成功连接服务器,异化之地成就系统</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>