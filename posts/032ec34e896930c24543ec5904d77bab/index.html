<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【计算机图形学】PARIS: Part-level Reconstruction and Motion Analysis for Articulated Objects - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【计算机图形学】PARIS: Part-level Reconstruction and Motion Analysis for Articulated Objects" />
<meta property="og:description" content="文章目录 1. 之前的方法存在什么问题？这篇论文做了件什么事？2. Previous Work可移动部件的分割和分析用于铰接物体重建的一些隐式表达 3. 问题描述4. 方法复合神经辐射场loss 5. 实验实验数据集Baseline评估指标实验结果 6. 总结LimitationConclusion 7. 其他补充四元数NeRFNeRF原理Positional Encoding in NeRFNeRF网络结构NeRF中的Volume RenderingNeRF中的Hierarchical Sampling分层采样 PSNR，SSIM 1. 之前的方法存在什么问题？这篇论文做了件什么事？ 作者认为之前的铰接物体重建存在两个问题：
问题1：之前做铰接物体重建和理解的方法大多是supervised的，supervised众所周知的缺点就是需要大量的数据来进行学习，这些数据的搜集和整理是费时费力的。
问题2：之前大部分的铰接物体重建都是在已知类别上进行重建的，不同类别的物体会有不同的模型进行拟合，这就导致不同类别的物体需要使用不同类别的数据进行训练。我们更希望得到一个跨类别可用的网络。之前CVPR2022的论文Ditto就是一个跨类别的网络，但是Ditto的缺陷在于难以泛化到没有见过的物体类别，同时没有进行外观的重建。
论文为了解决问题1，便想要通过紧密联系的几何和运动结构来避免显式的3D数据和运动参数的监督。作者认为，了解完整的几何有利于运动参数的预测；反之，了解物体在不同状态下具体的运动参数会给几何的重建提供更好的信号。
论文针对解决问题2，想要提出的方法是通过一个模型，对动态和静态的part进行重建，并进行运动参数的预测。part的表示使用neural fields来进行表示，并通过预测出来的运动参数将分离的（static part &amp; motion part）neural fields连接在一起。
本文的输入输出如下：
输入：两组静态铰接状态下的铰接物体多视角图像
输出：分解出可移动部件、重建几何和外观、进行运动参数预测
特点：PARIS设计了一种自监督的（无需任何3D监督、运动及语义上的注释）、端到端的架构，在part-level上学习shape和appearance并优化运动参数
2. Previous Work 可移动部件的分割和分析 随着铰接物体有了越来越丰富的3D数据和注释，大部分工作喜欢通过一种数据驱动的方式来进行部件运动性求解：
ScrewNet通过递归神经网络处理一组深度图以获得部件运动性
胡老师等人的工作则是通过度量学习，将点云映射到一类运动序列上来估计部件运动型
目前已有的一些3D数据分割的工作无法直接用在运动分割上，针对于这个gap，还有一些工作尝试去做运动部件分割和分析：
Shape2Motion和Li等人的工作以监督的方式学习了category-level的运动部件分割
但是category-level的方法终究有其限制
进一步有人尝试跨类别的方法：
闫博的工作，以及Abdul-Rashid等人设计了跨类别的网络，对点云进行部件分割，进行运动层次预测
耿欣师兄等人的工作通过半监督的方式，从过分割的3D扫描中学习了部件运动参数的预测
Chu等人提出了方法，使得铰接物体可以变化成用户指令所期待的那样
上述的所有工作都是在理解3D点云的铰接和结构。本篇论文的输入是两组RGB图像，比较类似的工作是CVPR 2022的Ditto和CVPR 2023的CARTO。但本篇论文的方法与Ditto和CARTO又有以下不同：
Ditto的输入是交互前后的3D点云，CARTO是双目图像，本篇论文是一组多视角的RGB图像Ditto和CARTO都只focus geometry的建立，都没有注重对于外观的表达，本篇论文在保有geometry的基础上还进行了外观的表达Ditto和CARTO在训练过程中都需要使用到3D监督和铰接注释，本篇论文无需任何监督和注释 用于铰接物体重建的一些隐式表达 隐式表达凭借其连续及拓扑自由的方式变得很火。
较早的工作在铰接物体重建上的代表性工作是NASA和A-SDF，NASA是针对于人体铰接的重建，A-SDF是针对于物体铰接的重建，他们都需要使用3D监督来实现。
随着可微渲染技术的进展，可以从多视角的RGB图像中进一步学习物体的shape和appearance，这驱动了静态场景、刚性可移动部件、动态变化场景的重建。
针对于能够对appearance进行学习的情况，Fangyin Wei等人提出一个category-level的方法来表示铰接物体的shape和appearance，这篇工作主要是利用了articulation latent code、shape latent code和appearance latent code来进行表达，网络可以生成没有见过的articulation states通过在latent space中做内插或者外插。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/032ec34e896930c24543ec5904d77bab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T21:05:47+08:00" />
<meta property="article:modified_time" content="2024-01-03T21:05:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【计算机图形学】PARIS: Part-level Reconstruction and Motion Analysis for Articulated Objects</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#1__2" rel="nofollow">1. 之前的方法存在什么问题？这篇论文做了件什么事？</a></li><li><a href="#2_Previous_Work_15" rel="nofollow">2. Previous Work</a></li><li><ul><li><a href="#_16" rel="nofollow">可移动部件的分割和分析</a></li><li><a href="#_35" rel="nofollow">用于铰接物体重建的一些隐式表达</a></li></ul> 
  </li><li><a href="#3__47" rel="nofollow">3. 问题描述</a></li><li><a href="#4__58" rel="nofollow">4. 方法</a></li><li><ul><li><a href="#_64" rel="nofollow">复合神经辐射场</a></li><li><a href="#loss_87" rel="nofollow">loss</a></li></ul> 
  </li><li><a href="#5__101" rel="nofollow">5. 实验</a></li><li><ul><li><a href="#_102" rel="nofollow">实验数据集</a></li><li><a href="#Baseline_106" rel="nofollow">Baseline</a></li><li><a href="#_112" rel="nofollow">评估指标</a></li><li><a href="#_125" rel="nofollow">实验结果</a></li></ul> 
  </li><li><a href="#6__149" rel="nofollow">6. 总结</a></li><li><ul><li><a href="#Limitation_150" rel="nofollow">Limitation</a></li><li><a href="#Conclusion_157" rel="nofollow">Conclusion</a></li></ul> 
  </li><li><a href="#7__164" rel="nofollow">7. 其他补充</a></li><li><ul><li><a href="#_165" rel="nofollow">四元数</a></li><li><a href="#NeRF_169" rel="nofollow">NeRF</a></li><li><ul><li><a href="#NeRF_173" rel="nofollow">NeRF原理</a></li><li><a href="#Positional_Encoding_in_NeRF_184" rel="nofollow">Positional Encoding in NeRF</a></li><li><a href="#NeRF_191" rel="nofollow">NeRF网络结构</a></li><li><a href="#NeRFVolume_Rendering_195" rel="nofollow">NeRF中的Volume Rendering</a></li><li><a href="#NeRFHierarchical_Sampling_212" rel="nofollow">NeRF中的Hierarchical Sampling分层采样</a></li></ul> 
   </li><li><a href="#PSNRSSIM_220" rel="nofollow">PSNR，SSIM</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="1__2"></a>1. 之前的方法存在什么问题？这篇论文做了件什么事？</h2> 
<p>作者认为之前的铰接物体重建存在两个问题：<br> <strong>问题1</strong>：之前做铰接物体重建和理解的方法大多是supervised的，supervised众所周知的缺点就是需要大量的数据来进行学习，这些数据的搜集和整理是费时费力的。<br> <strong>问题2</strong>：之前大部分的铰接物体重建都是在已知类别上进行重建的，不同类别的物体会有不同的模型进行拟合，这就导致不同类别的物体需要使用不同类别的数据进行训练。我们更希望得到一个跨类别可用的网络。之前CVPR2022的论文Ditto就是一个跨类别的网络，但是Ditto的缺陷在于难以泛化到没有见过的物体类别，同时没有进行外观的重建。</p> 
<p>论文为了解决问题1，便想要通过紧密联系的<strong>几何</strong>和<strong>运动结构</strong>来避免显式的3D数据和运动参数的监督。作者认为，了解完整的几何有利于运动参数的预测；反之，了解物体在不同状态下具体的运动参数会给几何的重建提供更好的信号。<br> 论文针对解决问题2，想要提出的方法是通过一个模型，对动态和静态的part进行重建，并进行运动参数的预测。part的表示使用neural fields来进行表示，并通过预测出来的运动参数将分离的（static part &amp; motion part）neural fields连接在一起。</p> 
<p>本文的输入输出如下：<br> <strong>输入</strong>：两组静态铰接状态下的铰接物体多视角图像<br> <strong>输出</strong>：分解出可移动部件、重建几何和外观、进行运动参数预测<br> <strong>特点</strong>：PARIS设计了一种<strong>自监督的</strong>（无需任何3D监督、运动及语义上的注释）、端到端的架构，在part-level上学习shape和appearance并优化运动参数</p> 
<h2><a id="2_Previous_Work_15"></a>2. Previous Work</h2> 
<h3><a id="_16"></a>可移动部件的分割和分析</h3> 
<p>随着铰接物体有了越来越丰富的3D数据和注释，大部分工作喜欢通过一种数据驱动的方式来进行部件运动性求解：<br> ScrewNet通过递归神经网络处理一组深度图以获得部件运动性<br> 胡老师等人的工作则是通过度量学习，将点云映射到一类运动序列上来估计部件运动型</p> 
<p>目前已有的一些3D数据分割的工作无法直接用在运动分割上，针对于这个gap，还有一些工作尝试去做运动部件分割和分析：<br> Shape2Motion和Li等人的工作以监督的方式学习了category-level的运动部件分割<br> 但是category-level的方法终究有其限制</p> 
<p>进一步有人尝试跨类别的方法：<br> 闫博的工作，以及Abdul-Rashid等人设计了跨类别的网络，对点云进行部件分割，进行运动层次预测<br> 耿欣师兄等人的工作通过半监督的方式，从过分割的3D扫描中学习了部件运动参数的预测<br> Chu等人提出了方法，使得铰接物体可以变化成用户指令所期待的那样</p> 
<p>上述的所有工作都是在理解3D点云的铰接和结构。本篇论文的输入是两组RGB图像，比较类似的工作是CVPR 2022的Ditto和CVPR 2023的CARTO。但本篇论文的方法与Ditto和CARTO又有以下不同：</p> 
<ol><li>Ditto的输入是交互前后的3D点云，CARTO是双目图像，本篇论文是一组多视角的RGB图像</li><li>Ditto和CARTO都只focus geometry的建立，都没有注重对于外观的表达，本篇论文在保有geometry的基础上还进行了外观的表达</li><li>Ditto和CARTO在训练过程中都需要使用到3D监督和铰接注释，本篇论文无需任何监督和注释</li></ol> 
<h3><a id="_35"></a>用于铰接物体重建的一些隐式表达</h3> 
<p>隐式表达凭借其连续及拓扑自由的方式变得很火。<br> 较早的工作在铰接物体重建上的代表性工作是NASA和A-SDF，NASA是针对于人体铰接的重建，A-SDF是针对于物体铰接的重建，他们都需要使用3D监督来实现。</p> 
<p>随着可微渲染技术的进展，可以从多视角的RGB图像中进一步学习物体的shape和appearance，这驱动了静态场景、刚性可移动部件、动态变化场景的重建。<br> 针对于能够对appearance进行学习的情况，Fangyin Wei等人提出一个category-level的方法来表示铰接物体的shape和appearance，这篇工作主要是利用了articulation latent code、shape latent code和appearance latent code来进行表达，网络可以生成没有见过的articulation states通过在latent space中做内插或者外插。</p> 
<p>类似的，还有CLA-Nerf利用监督学习，通过逆渲染来输出2D分割和估计的part pose</p> 
<p>还有一些工作是通过RGB Video来进行铰接物体的一些预测和重建等，作者提到，他们的multi-view RGB输入相对于这些输入来说更加稀疏，且可能会出现对static part的遮挡等情况（如下图所示），所以他们的工作更具有挑战性：<br> <img src="https://images2.imgbox.com/b7/c8/C4LcPycn_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="3__47"></a>3. 问题描述</h2> 
<p><strong>输入</strong>：开始状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
         = 
        
       
         0 
        
       
      
        t=0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>和结束状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
         = 
        
       
         1 
        
       
      
        t=1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，在每一个状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
      
        t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>中，给定一组多视角RGB图像<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          I 
         
        
          t 
         
        
       
      
        I^t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7936em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">I</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7936em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span></span></span></span></span></span></span></span></span>及对应的相机参数。<br> <strong>假设</strong>：开始状态和结束状态之间，只有一个部件发生了移动。这里称移动的部件为movable part，静止的部件为static part。<br> <strong>目标1</strong>：分离movable part和static part的geometry和appearance。有了这些part-level的geometry和appearance，可以通过控制joint的state，来渲染新状态下任意视角的图像。<br> <strong>目标2</strong>：铰接运动估计（motion estimation）。假设可移动部件仅占旋转/平移中的一个属性。一旦知道了运动类型，就根据运动的类型进行不同的参数化：</p> 
<ul><li>如果motion type是revolute joint，则将这个motion type参数化为一个轴点pivot point <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          p 
         
        
          ∈ 
         
         
         
           R 
          
         
           3 
          
         
        
       
         p∈R^3 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>，以及一个单位<strong>四元数</strong>用来表示旋转<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          q 
         
        
          ∈ 
         
         
         
           R 
          
         
           4 
          
         
        
          ， 
         
        
          ∣ 
         
        
          ∣ 
         
        
          q 
         
        
          ∣ 
         
        
          ∣ 
         
        
          = 
         
        
          1 
         
        
       
         q∈R^4，||q||=1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mord">∣∣</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span></li><li>如果motion type是prismatic joint，则这个motion type参数化为一个单位向量<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          a 
         
        
          ∈ 
         
         
         
           R 
          
         
           3 
          
         
        
          ， 
         
        
          ∣ 
         
        
          ∣ 
         
        
          a 
         
        
          ∣ 
         
        
          ∣ 
         
        
          = 
         
        
          1 
         
        
       
         a∈R^3，||a||=1 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5782em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord">∣∣</span><span class="mord mathnormal">a</span><span class="mord">∣∣</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，以及一个沿着轴发生的移动距离<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          d 
         
        
       
         d 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span></li></ul> 
<p>综上，旋转函数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
         
         
           p 
          
         
           , 
          
         
           q 
          
         
        
       
      
        f_{p,q} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9805em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">q</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和平移函数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          f 
         
         
         
           a 
          
         
           , 
          
         
           d 
          
         
        
       
      
        f_{a,d} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9805em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1076em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: -0.1076em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">d</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span></span></span>分别作为运动的函数，具体使用哪个取决于motion type。这个transformation函数会被会被聚集到训练的pipeline中来共同优化运动参数。</p> 
<h2><a id="4__58"></a>4. 方法</h2> 
<p><img src="https://images2.imgbox.com/8e/8c/3MwYU5Te_o.png" alt="在这里插入图片描述"></p> 
<p>本文提出的方法，是以一种自监督的方式来学习part-level的表示和articulation估计。<br> 以运动为线索，进行静态部件和移动部件的分离。由于运动考虑了两个状态之间的不一致性，通过配准输入状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
      
        t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>到canonical状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          t 
         
        
          ∗ 
         
        
       
      
        t^* 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6887em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6887em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span>来优化运动参数。配准过程中，符合变换的component被提取为移动部件，而剩余的一个静止部分被提取为静态部件。</p> 
<h3><a id="_64"></a>复合神经辐射场</h3> 
<p>静态部件和动态部件在训练过程中通过组合进行学习，静态和动态部件共享基于Instant-NGP的神经网络结构（这并不是说他们共享相同的网络参数，只是说网络结构）。在这里没有像一些动态场景建模方法一样对连续动力学进行建模（因为输入状态过于离散，不足以对连续动力学进行建模），而是学习显式的变换函数来建立两个状态之间的运动关系，进而将canonical state映射到两个输入状态/在canonical state和两个input state之间实现mapping。canonical state采用的是<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          t 
         
        
          ∗ 
         
        
       
         = 
        
       
         0.5 
        
       
      
        t^*=0.5 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6887em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6887em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0.5</span></span></span></span></span>。</p> 
<p>在canonical state下，static field使用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          F 
         
        
          S 
         
        
       
      
        F^S 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8413em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span></span></span></span></span>进行表示，mobile field使用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          F 
         
        
          M 
         
        
       
      
        F^M 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8413em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span></span></span></span></span>进行表示。</p> 
<p>形式上，static field和mobile field的表示如下：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           F 
          
         
           S 
          
         
        
          ( 
         
         
         
           x 
          
         
           t 
          
         
        
          , 
         
         
         
           d 
          
         
           t 
          
         
        
          ) 
         
        
          = 
         
         
         
           σ 
          
         
           S 
          
         
        
          ( 
         
         
         
           x 
          
         
           t 
          
         
        
          ) 
         
        
          , 
         
         
         
           c 
          
         
           S 
          
         
        
          ( 
         
         
         
           x 
          
         
           t 
          
         
        
          , 
         
         
         
           d 
          
         
           t 
          
         
        
          ) 
         
        
          ， 
         
         
         
           F 
          
         
           M 
          
         
        
          ( 
         
         
         
           x 
          
          
          
            t 
           
          
            ∗ 
           
          
         
        
          , 
         
         
         
           d 
          
          
          
            t 
           
          
            ∗ 
           
          
         
        
          ) 
         
        
          = 
         
         
         
           σ 
          
         
           M 
          
         
        
          ( 
         
         
         
           x 
          
          
          
            t 
           
          
            ∗ 
           
          
         
        
          ) 
         
        
          , 
         
         
         
           c 
          
         
           M 
          
         
        
          ( 
         
         
         
           x 
          
          
          
            t 
           
          
            ∗ 
           
          
         
        
          , 
         
         
         
           d 
          
          
          
            t 
           
          
            ∗ 
           
          
         
        
          ) 
         
        
       
         F^S(x_t,d_t)=\sigma^S(x_t),c^S(x_t,d_t)，F^M(x_{t^*},d_{t^*})=\sigma^M(x_{t^*}),c^M(x_{t*},d_{t*}) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1413em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1413em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mord cjk_fallback">，</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2828em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6183em;"><span class="" style="top: -2.786em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2828em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6183em;"><span class="" style="top: -2.786em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1413em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2828em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6183em;"><span class="" style="top: -2.786em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mtight">∗</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mtight">∗</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></span><br> 其中，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
        
          t 
         
        
       
         ∈ 
        
        
        
          R 
         
        
          3 
         
        
       
      
        x_t∈R^3 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6891em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>表示在state <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
      
        t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>时刻，沿着光线<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          d 
         
        
          t 
         
        
       
         ∈ 
        
        
        
          R 
         
        
          3 
         
        
       
      
        d_t∈R^3 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>进行的点采样；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
         ( 
        
       
         x 
        
       
         ) 
        
       
         ∈ 
        
       
         R 
        
       
      
        \sigma(x)∈R 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span></span></span></span></span>是点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
      
        x 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span>处的密度值（就是Nerf中的density value）；<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         ( 
        
       
         x 
        
       
         , 
        
       
         d 
        
       
         ) 
        
       
      
        c(x,d) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span></span></span></span></span>是从视角方向<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
      
        d 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span>出发，看到点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
      
        x 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></span>上的RGB值（Nerf中的color）。<br> 对于输入状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
         ∈ 
        
       
         { 
        
       
         0 
        
       
         , 
        
       
         1 
        
       
         } 
        
       
      
        t∈\{0,1\} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6542em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></span>，通过变换函数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         T 
        
       
      
        T 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span></span></span></span></span>，将点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
        
          t 
         
        
       
      
        x_t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>变换到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
         
         
           t 
          
         
           ∗ 
          
         
        
       
      
        x_{t^*} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2828em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6183em;"><span class="" style="top: -2.786em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，视角方向从<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          d 
         
        
          t 
         
        
       
      
        d_t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>变换到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          d 
         
         
         
           t 
          
         
           ∗ 
          
         
        
       
      
        d_{t^*} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2828em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6183em;"><span class="" style="top: -2.786em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>以查询<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          F 
         
        
          M 
         
        
       
      
        F^M 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8413em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span></span></span></span></span>。学习精确的铰接和分割进一步建立从状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
      
        t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          t 
         
        
          ∗ 
         
        
       
      
        t^* 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6887em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6887em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span>的对应关系。<br> 对这段话我的理解是，static part在state发生改变的时候，是不会变的，所以我们只需要在state发生改变之前获取这个static part即可；而movable part在state发生改变的时候位置是会改变的，且这个movable part发生的变换是刚性的，所以如果我们将视角方向通过变换函数<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         T 
        
       
      
        T 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span></span></span></span></span>进行一个刚性变换（也就是建模了所谓的运动），进一步找到在新的状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          t 
         
        
          ∗ 
         
        
       
      
        t^* 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6887em;"></span><span class="mord"><span class="mord mathnormal">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6887em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span>下的movable part，这个新state下的movable part和原本state发生改变前的movable part之间建立了对应关系。</p> 
<p>训练过程中采用了和原始NeRF相似的pipeline，只是扩展了光线追踪和体渲染过程以组成这两个场。在每一次训练迭代过程中，为每一个输入状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
         ∈ 
        
       
         { 
        
       
         0 
        
       
         , 
        
       
         1 
        
       
         } 
        
       
      
        t∈\{0,1\} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6542em; vertical-align: -0.0391em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">{<!-- --></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord">1</span><span class="mclose">}</span></span></span></span></span>采样点，并进行渲染，分别使用输入的图像来进行监督。</p> 
<p><strong>以下介绍组合两个field进行渲染的公式和方法：</strong><br> 在对每个状态<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
      
        t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>进行光线追踪时，首先沿着光线对场<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          F 
         
        
          S 
         
        
       
      
        F^S 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8413em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span></span></span></span></span>进行均匀地采样点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
        
          t 
         
        
       
      
        x_t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，接着将<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
        
          t 
         
        
       
      
        x_t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>通过<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         T 
        
       
      
        T 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span></span></span></span></span>变换到<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          x 
         
         
         
           t 
          
         
           ∗ 
          
         
        
       
      
        x_{t^*} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2828em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6183em;"><span class="" style="top: -2.786em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mbin mtight">∗</span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>来查询场<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          F 
         
        
          M 
         
        
       
      
        F^M 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8413em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span></span></span></span></span>。则输出的场的密度和应为：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          σ 
         
         
         
           s 
          
         
           u 
          
         
           m 
          
         
        
       
         = 
        
        
        
          σ 
         
        
          S 
         
        
       
         ( 
        
        
        
          x 
         
        
          t 
         
        
       
         ) 
        
       
         + 
        
        
        
          σ 
         
        
          M 
         
        
       
         ( 
        
        
        
          x 
         
         
         
           t 
          
         
           ∗ 
          
         
        
       
         ) 
        
       
      
        \sigma_{sum}=\sigma^S(x_t)+\sigma^M(x_{t*}) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.5806em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.0913em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1.0913em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.2806em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mord mtight">∗</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>。利用这个密度和来构造概率密度函数以指导第二轮光线追踪的<strong>分层采样</strong>（Hierarchical Sampling），分层采样可以见其他补充中的NeRF分层采样，这是NeRF中为了提升效果的一个改进方式。</p> 
<p>使用<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
         ( 
        
       
         h 
        
       
         ) 
        
       
         = 
        
       
         o 
        
       
         + 
        
       
         h 
        
       
         d 
        
       
      
        x(h)=o+hd 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">o</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">d</span></span></span></span></span>来表示一个从中心点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         o 
        
       
      
        o 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">o</span></span></span></span></span>出发，以<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
      
        d 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span>为方向的一条射线<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         = 
        
       
         o 
        
       
         + 
        
       
         h 
        
       
         d 
        
       
      
        r=o+hd 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">o</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">h</span><span class="mord mathnormal">d</span></span></span></span></span>上采样的点，同时最近和最远边界为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         [ 
        
        
        
          h 
         
        
          n 
         
        
       
         , 
        
        
        
          h 
         
        
          f 
         
        
       
         ] 
        
       
      
        [h_n,h_f] 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0361em; vertical-align: -0.2861em;"></span><span class="mopen">[</span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.1076em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mclose">]</span></span></span></span></span>，组合两个field并计算光线<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
      
        r 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span></span></span></span></span>上颜色<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          C 
         
        
          ^ 
         
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
      
        \hat{C}(r) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1968em; vertical-align: -0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9468em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span></span><span class="" style="top: -3.2523em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.1667em;"><span class="mord">^</span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span></span></span>的公式为（该公式通过权重来聚集每个点的两个颜色）：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           C 
          
         
           ^ 
          
         
        
          ( 
         
        
          r 
         
        
          ) 
         
        
          = 
         
         
         
           ∫ 
          
          
          
            h 
           
          
            n 
           
          
          
          
            h 
           
          
            f 
           
          
         
        
          ( 
         
         
         
           w 
          
         
           S 
          
         
        
          ( 
         
        
          h 
         
        
          ) 
         
        
          ⋅ 
         
         
         
           c 
          
         
           S 
          
         
        
          ( 
         
        
          h 
         
        
          ) 
         
        
          + 
         
         
         
           w 
          
         
           M 
          
         
        
          ( 
         
        
          h 
         
        
          ) 
         
        
          ⋅ 
         
         
         
           c 
          
         
           M 
          
         
        
          ( 
         
        
          h 
         
        
          ) 
         
        
          ) 
         
        
          d 
         
        
          h 
         
        
          ，这里 
         
        
          c 
         
        
          ( 
         
        
          h 
         
        
          ) 
         
        
          ≡ 
         
        
          c 
         
        
          ( 
         
        
          x 
         
        
          ( 
         
        
          h 
         
        
          ) 
         
        
          , 
         
        
          d 
         
        
          ) 
         
        
       
         \hat{C}(r)=\int^{h_f}_{h_n}(w^S(h)·c^S(h)+w^M(h)·c^M(h))dh，这里c(h)\equiv c(x(h),d) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1968em; vertical-align: -0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9468em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span></span><span class="" style="top: -3.2523em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.1667em;"><span class="mord">^</span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.6111em; vertical-align: -1.012em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right: 0.4445em; position: relative; top: -0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.599em;"><span class="" style="top: -1.7881em; margin-left: -0.4445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1645em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.8129em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3488em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.1076em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2901em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.012em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1.1413em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8913em;"><span class="" style="top: -3.113em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">))</span><span class="mord mathnormal">d</span><span class="mord mathnormal">h</span><span class="mord cjk_fallback">，这里</span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span></span></span></span></span></span><br> 首先每个field的颜色还是由点的位置和视角方向共同决定的，然后总的表现颜色相当于两个field以权重之和展示出来的颜色，类似于加权平均的做法。这里权重被定义为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          w 
         
        
          S 
         
        
       
         ( 
        
       
         h 
        
       
         ) 
        
       
         = 
        
       
         T 
        
       
         ( 
        
       
         h 
        
       
         ) 
        
       
         ⋅ 
        
        
        
          α 
         
        
          S 
         
        
       
         ( 
        
       
         h 
        
       
         ) 
        
       
      
        w^S(h)=T(h)·\alpha^S(h) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.0913em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.0913em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0037em;">α</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span></span>，这个权重是由不透光率乘以采样点间距逐渐进行累加的。也就是说在表面的点更能够表现出颜色，越往后的点越不表现颜色。<br> 类似于NeRF，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         T 
        
       
         ( 
        
       
         h 
        
       
         ) 
        
       
      
        T(h) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span></span>是点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         x 
        
       
         ( 
        
       
         h 
        
       
         ) 
        
       
      
        x(h) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span></span>处的累积了static和movable field density <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          σ 
         
         
         
           s 
          
         
           u 
          
         
           m 
          
         
        
       
         ( 
        
       
         s 
        
       
         ) 
        
       
      
        \sigma_{sum}(s) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>的不透光率，类似于NeRF，只是把这个density换成了density的和，所以定义为：<span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
        
          T 
         
        
          ( 
         
        
          h 
         
        
          ) 
         
        
          = 
         
        
          e 
         
        
          x 
         
        
          p 
         
        
          ( 
         
        
          − 
         
         
         
           ∫ 
          
          
          
            h 
           
          
            n 
           
          
         
           h 
          
         
         
         
           σ 
          
          
          
            s 
           
          
            u 
           
          
            m 
           
          
         
        
          ( 
         
        
          s 
         
        
          ) 
         
        
          ⋅ 
         
         
         
           δ 
          
         
           s 
          
         
        
          ) 
         
        
          d 
         
        
          s 
         
        
       
         T(h)=exp(-\int^h_{h_n}\sigma_{sum}(s)·\delta_s)ds 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.6111em; vertical-align: -1.012em;"></span><span class="mord mathnormal">e</span><span class="mord mathnormal">x</span><span class="mord mathnormal">p</span><span class="mopen">(</span><span class="mord">−</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mop"><span class="mop op-symbol large-op" style="margin-right: 0.4445em; position: relative; top: -0.0011em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.599em;"><span class="" style="top: -1.7881em; margin-left: -0.4445em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1645em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.8129em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.012em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0379em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0379em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">s</span></span></span></span></span></span><br> 这里的<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          δ 
         
        
          s 
         
        
       
         = 
        
        
        
          h 
         
         
         
           s 
          
         
           + 
          
         
           1 
          
         
        
       
         − 
        
        
        
          h 
         
        
          s 
         
        
       
      
        \delta_s=h_{s+1}-h_s 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0379em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0379em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.9028em; vertical-align: -0.2083em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2083em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">s</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，表示的是相邻采样点的距离。这种方式的intuition是，任何一个具有高密度值的场中的采样点都可以终止颜色的传播。也就是光打到了这个复合density的点上，后面的点就不再表现出颜色了。这个策略同样在场景NeRF工作STaR和D²NeRF中被采用了。</p> 
<h3><a id="loss_87"></a>loss</h3> 
<p><strong>基本loss</strong><br> 最基本的Loss为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         L 
        
       
         = 
        
        
        
          L 
         
         
         
           r 
          
         
           g 
          
         
           b 
          
         
        
       
         + 
        
        
        
          λ 
         
         
         
           m 
          
         
           a 
          
         
           s 
          
         
           k 
          
         
        
        
        
          L 
         
         
         
           m 
          
         
           a 
          
         
           s 
          
         
           k 
          
         
        
       
      
        L=L_{rgb}+\lambda_{mask}L_{mask} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6833em;"></span><span class="mord mathnormal">L</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.8444em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span><br> 一个NeRF中的RGB监督loss：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          L 
         
         
         
           r 
          
         
           g 
          
         
           b 
          
         
        
       
         = 
        
       
         ∣ 
        
       
         ∣ 
        
        
        
          C 
         
        
          ^ 
         
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
         − 
        
       
         C 
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
         ∣ 
        
        
        
          ∣ 
         
        
          2 
         
        
          2 
         
        
       
      
        L_{rgb}=||\hat{C}(r)-C(r)||^2_2 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0278em;">r</span><span class="mord mathnormal mtight" style="margin-right: 0.0359em;">g</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.1968em; vertical-align: -0.25em;"></span><span class="mord">∣∣</span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9468em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span></span><span class="" style="top: -3.2523em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.1667em;"><span class="mord">^</span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mord">∣</span><span class="mord"><span class="mord">∣</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -2.4519em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2481em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，渲染图像的颜色减去GT图像中的颜色<br> 一个Mask loss，我理解是监督一下density：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          L 
         
         
         
           m 
          
         
           a 
          
         
           s 
          
         
           k 
          
         
        
       
         = 
        
       
         B 
        
       
         C 
        
       
         E 
        
       
         ( 
        
       
         O 
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
         , 
        
       
         M 
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
         ) 
        
       
      
        L_{mask}=BCE(O(r),M(r)) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">s</span><span class="mord mathnormal mtight" style="margin-right: 0.0315em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0576em;">BCE</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">))</span></span></span></span></span>，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         M 
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
      
        M(r) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.109em;">M</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span></span></span>是GT图像中的mask，<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
      
        O(r) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span></span></span>的计算方式为：<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         O 
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
         = 
        
        
        
          ∫ 
         
         
         
           h 
          
         
           n 
          
         
         
         
           h 
          
         
           f 
          
         
        
       
         w 
        
       
         ( 
        
       
         h 
        
       
         ) 
        
       
         d 
        
       
         h 
        
       
      
        O(r)=\int_{h_n}^{h_f}w(h)dh 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.4999em; vertical-align: -0.4559em;"></span><span class="mop"><span class="mop op-symbol small-op" style="margin-right: 0.1945em; position: relative; top: -0.0006em;">∫</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.044em;"><span class="" style="top: -2.3442em; margin-left: -0.1945em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1645em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.2579em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">h</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3448em;"><span class="" style="top: -2.3488em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.1076em;">f</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2901em;"><span class=""></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.4559em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0269em;">w</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span><span class="mord mathnormal">d</span><span class="mord mathnormal">h</span></span></span></span></span>，感觉就是从光线到物体直到光线离开这段路程上，不透光率的权重之和。</p> 
<p><strong>其他loss</strong><br> 根据经验，只使用这些最基本的loss很容易导致在mobile field和static field重叠的地方累积噪声。尤其是当static field的体积很大的时候。<br> 在组合渲染的时候，静态部件隐藏了其内部的噪声。当我们使用体渲染来渲染表面后的点时，我们对这些看不见的点缺乏监督，从而导致噪声的累积。为了减轻这个问题提出了新的loss <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          L 
         
         
         
           p 
          
         
           r 
          
         
           o 
          
         
           b 
          
         
        
       
      
        L_{prob} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。作者认为，应当鼓励每条光线展示出的颜色尽可能来自同一个field而不是多个field。<br> 作者认为，应当将光线上mobile field的贡献定义为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           P 
          
         
           M 
          
         
        
          ( 
         
        
          r 
         
        
          ) 
         
        
          = 
         
         
          
           
           
             O 
            
           
             M 
            
           
          
            ( 
           
          
            r 
           
          
            ) 
           
          
          
           
           
             O 
            
           
             M 
            
           
          
            ( 
           
          
            r 
           
          
            ) 
           
          
            + 
           
           
           
             O 
            
           
             S 
            
           
          
            ( 
           
          
            r 
           
          
            ) 
           
          
         
        
       
         P_M(r)=\frac{O^M(r)}{O^M(r)+O^S(r)} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.4543em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.5183em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7673em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.7673em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.0576em;">S</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0278em;">O</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8413em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 接着定义每条光线的该比率正则化项定义为：<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           L 
          
          
          
            p 
           
          
            r 
           
          
            o 
           
          
            b 
           
          
         
        
          = 
         
        
          H 
         
        
          ( 
         
         
         
           P 
          
         
           M 
          
         
        
          ( 
         
        
          r 
         
        
          ) 
         
        
          ) 
         
        
          ， 
         
        
          H 
         
        
          ( 
         
        
          x 
         
        
          ) 
         
        
          = 
         
        
          x 
         
        
          ⋅ 
         
        
          l 
         
        
          o 
         
        
          g 
         
        
          ( 
         
        
          x 
         
        
          ) 
         
        
          + 
         
        
          ( 
         
        
          1 
         
        
          − 
         
        
          x 
         
        
          ) 
         
        
          ⋅ 
         
        
          l 
         
        
          o 
         
        
          g 
         
        
          ( 
         
        
          1 
         
        
          − 
         
        
          x 
         
        
          ) 
         
        
       
         L_{prob}=H(P_M(r))，H(x)=x·log(x)+(1-x)·log(1-x) 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3283em;"><span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right: 0.109em;">M</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">))</span><span class="mord cjk_fallback">，</span><span class="mord mathnormal" style="margin-right: 0.0813em;">H</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">x</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span><span class="mpunct">⋅</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">x</span><span class="mclose">)</span></span></span></span></span></span><br> 通过在每一轮迭代中最小化这个<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          L 
         
         
         
           p 
          
         
           r 
          
         
           o 
          
         
           b 
          
         
        
       
      
        L_{prob} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span></span></span>，我们强制<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          L 
         
         
         
           p 
          
         
           r 
          
         
           o 
          
         
           b 
          
         
        
       
      
        L_{prob} 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.9694em; vertical-align: -0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3361em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mord mathnormal mtight">ro</span><span class="mord mathnormal mtight">b</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.2861em;"><span class=""></span></span></span></span></span></span></span></span></span></span>要么为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         0 
        
       
      
        0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">0</span></span></span></span></span>要么为<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         1 
        
       
      
        1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>，则通过这样的定义，每个位置的密度被鼓励来自单个field而不是两个field。</p> 
<h2><a id="5__101"></a>5. 实验</h2> 
<h3><a id="_102"></a>实验数据集</h3> 
<p>合成数据集：PartNet-Mobility。选择了其中的10个类别，每个物体在上半球模仿真实世界相机视角采64-100张图片<br> 真实数据集：MultiScan dataset。这个数据集扫描了不同场景下多个状态的铰接物体</p> 
<h3><a id="Baseline_106"></a>Baseline</h3> 
<p><strong>A-SDF：</strong> category-level model，使用给定的GT SDF Samples重建object的mesh。A-SDF与本文不同之处在于A-SDF只是重建了mesh，并不能够做part-level的mesh，也不能够估计运动参数<br> <strong>Ditto：</strong> 从交互前后的点云中来重建part-level的geometry，估计运动参数。<br> <strong>Ours-ICP：</strong> 因为上述的两个方法不能够产生物体的外观，或者是从任意视角下渲染物体的外观，所以此处文章补充了一个naive的baseline。从给定的两组多视角图像中学习神经隐式表面<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          F 
         
        
          0 
         
        
       
      
        F_0 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          F 
         
        
          1 
         
        
       
      
        F_1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.1389em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.1389em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span></span>。神经网络的backbone是NeuS和Instant-NGP。额外还在两个神经SDFs之间使用Constructive Solid Geometry（CSG）算法并提取part-level的网格。static field和movable field的相交区域可以被视作static part。通过场之间的相减，可以获得movable part的对应。可以使用全局配准和ICP配准算法来进一步计算movable part之间的变换。<br> <img src="https://images2.imgbox.com/5c/db/1sGYE3zK_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_112"></a>评估指标</h3> 
<p><strong>part-level geometry的评估</strong><br> 使用Chamfer Distance作为评估，CD-S为static part，CS-M为movable part</p> 
<p><strong>运动估计</strong><br> 使用angular error来评估两种类型的joints，这个指标计算了预测的axis方向和GT axis方向之间的差异。<br> 使用position error来评估revolute joints，这个指标考虑了pivot point位置，进一步计算旋转轴之间的差异。<br> 使用geodesic distance（角度为单位）来评估joints state，用于两种类型的joints。</p> 
<p><strong>新视角合成</strong><br> 对于新视角合成结果，使用Peak Signal-to-noise Ratio（PSNR峰值信噪比）和Structural Similarity Index（SSIM）用于评估新视角下的结果。<br> 这是两种图像评价指标。</p> 
<h3><a id="_125"></a>实验结果</h3> 
<p><strong>重建与部件分割结果</strong><br> A-SDF本身就是通过一个函数来进行拟合的，所以不具备分part那么好的效果，所以个人认为这里的比较稍微有点不公平，不过由于A-SDF使用一个函数进行拟合，所以它本身表达出来的效果就不会太好。<br> 在活动椅子上，Ditto的表现非常差，对于部件的预测，在下面三个例子中Ditto的part-level预测都并不是那么准确。<br> <img src="https://images2.imgbox.com/7e/d2/YfjbCqwF_o.png" alt="在这里插入图片描述"><br> 指标上来看，PARIS在大部分指标上的效果超越了Ditto，少部分逊色于Ditto<br> <img src="https://images2.imgbox.com/0b/a9/XVUzsOzz_o.png" alt="在这里插入图片描述"></p> 
<p><strong>运动估计</strong><br> 运动估计上的准确程度应该是PARIS的一大显著优势<br> <img src="https://images2.imgbox.com/fb/38/br8gt6n7_o.png" alt="在这里插入图片描述"></p> 
<p><strong>新视角合成和铰接生成</strong><br> 看起来表示的都挺准确的，中间状态应该是通过改变transformation function，在初始状态或结尾状态基础上变形获得的<br> <img src="https://images2.imgbox.com/6b/e5/dw9YJzah_o.png" alt="在这里插入图片描述"></p> 
<p><strong>消融实验</strong><br> 进一步证明了那个其他loss，也就是那个regularization loss的有效性<br> <img src="https://images2.imgbox.com/15/bd/fKXp36qe_o.png" alt="在这里插入图片描述"></p> 
<p><strong>Real-World数据集上的结果</strong><br> 感觉Real-World数据集上的表现从数值上来看，Ditto的表现好像和PARIS不分伯仲，不知道是不是虚拟和现实之间的GAP导致的，但是感觉也不应该差别很大才对。不过在part-level上的几何重建好像原本在虚拟数据集上，Ditto和PARIS就是难分伯仲，PARIS厉害在它的运动估计相对更加准确一些。<br> <img src="https://images2.imgbox.com/52/ee/oNNWOMgU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/73/a5/yn3fzPIv_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="6__149"></a>6. 总结</h2> 
<h3><a id="Limitation_150"></a>Limitation</h3> 
<p><img src="https://images2.imgbox.com/b1/a5/piudptHx_o.png" alt="在这里插入图片描述"><br> 从这张图中理解limitation，作者提出limitation在于：</p> 
<ol><li>第一行fridge的例子：在视角变化之后，大部分的静态部分被遮挡，会导致无法正确估计revolute joints的参数</li><li>第二行椅子的例子：如果movable part的在几何上前后非常相似，会导致椅子的旋转方向出现问题</li></ol> 
<p><strong>这两点很大程度上是因为3D correspondence学的不好。</strong></p> 
<h3><a id="Conclusion_157"></a>Conclusion</h3> 
<p>PARIS做的事情是通过两组RGB图像，进行了铰接物体的part-level的几何重建，并估计了joints及motion parameters。<br> 作者提到，他们的工作是第一个从两组RGB图像出发，处理两组任意状态铰接物体多视角RGB图像的方法。同时实验证明，他们的方法在shape、motion parameters、appearance相较之前的工作来说都有其优势。<br> 但是文章的缺陷在于遇到较大程度的遮挡的时候，可能就会导致failure case的出现，同时文章的方法只能够处理两个parts的物体（一个static，一个movable，如果有多个movable的部件，多个movable部件间无法独立控制）。<br> 未来有意思的方向就是研究多个movable部件下的part-level geometry reconstruction和motion parameters predict。<br> 文章还有一个强假设是物体在世界坐标系下是对齐的，作者提到这个assumption在之前的工作中同样被采用了（这个确实是，大部分都是align好的。如果处理现实世界的物体，不知道可不可以通过什么方法将现实世界的物体先做一个对齐）。</p> 
<h2><a id="7__164"></a>7. 其他补充</h2> 
<h3><a id="_165"></a>四元数</h3> 
<p>参考<a href="https://blog.csdn.net/muzigef/article/details/103650811">四元数</a>，其中有一个很关键的定义句子是：四元数可以表达物体绕任意向量轴的旋转，并且和欧拉角度旋转与旋转矩阵的方法相比，其效率更高，操作也更灵活。<br> 文中revolute joint的定义是通过一个轴点pivot point <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         p 
        
       
         ∈ 
        
        
        
          R 
         
        
          3 
         
        
       
      
        p∈R^3 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.8141em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span></span>和一个单位四元数表示旋转<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         q 
        
       
         ∈ 
        
        
        
          R 
         
        
          4 
         
        
       
         ， 
        
       
         ∣ 
        
       
         ∣ 
        
       
         q 
        
       
         ∣ 
        
       
         ∣ 
        
       
         = 
        
       
         1 
        
       
      
        q∈R^4，||q||=1 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.7335em; vertical-align: -0.1944em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 1.0641em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0077em;">R</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.8141em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mord cjk_fallback">，</span><span class="mord">∣∣</span><span class="mord mathnormal" style="margin-right: 0.0359em;">q</span><span class="mord">∣∣</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6444em;"></span><span class="mord">1</span></span></span></span></span>。这pivot point给定了revolute joint所在的位置，单位四元数表示轴的指向和旋转。</p> 
<h3><a id="NeRF_169"></a>NeRF</h3> 
<p>这个视频把原理讲的很清楚：<a href="https://www.bilibili.com/video/BV1o34y1P7Md" rel="nofollow">十分钟带你快速入门NeRF原理</a><br> 在这里写一下我印象深刻的点：</p> 
<h4><a id="NeRF_173"></a>NeRF原理</h4> 
<p>NeRF的输入是相机所在坐标，以及相机的方位角和俯仰角（但是在代码实现的时候好像是用三维坐标作为指向，而不是方位角&amp;俯仰角）<br> NeRF的输出是从当前相机坐标和俯仰角、方位角（就是一个三维的极坐标表示吧，下面是一个三维极坐标的概念图，实际上代码里是使用一个三维向量来表示的相机方向，而不是俯仰角和方位角）出发，看向模型时，对应的采样点的RGB和不透明度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
      
        \sigma 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span></span></span></span></span>，不透明度是视角无关的。<br> <img src="https://images2.imgbox.com/00/27/eFkuxZQM_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/dd/90/sJkMWcig_o.png" alt="在这里插入图片描述"><br> 以往我们显式地进行三维建模，是将模型表达成点云、网格、体素等显式的三维形式。而NeRF是一种隐式的三维建模方法，这里的“隐式”的体现从上图中就可以看出来：模型的信息隐式地存储在网络F中，我们通过输入相机位置及相机的俯仰角，进而查询在该视角下看到的模型的RGB&amp;<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
      
        \sigma 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span></span></span></span></span>。我们并<strong>不能够显式地</strong>看到模型，模型被<strong>隐式地蕴含</strong>在网络F中。<br> 所以，在最原始的NeRF上，一个网络仅能表达一个物体/场景，当我们需要使用一个网络去表达其他物体/场景时候，就需要重新训练。<br> <img src="https://images2.imgbox.com/c0/b8/rm5re1OJ_o.png" alt="在这里插入图片描述"><br> 由NeRF最常见的这张图可以看出来，实际上训练资料是一个像素点对应的射线和相机位置。在一条射线上均匀地进行点的采样，在代码中，near表示第一次到达物体表面的位置，far表示最后一次与物体表面接触的位置。在near和far之间可以得到射线上每一个点的RGB值和不透明度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
      
        \sigma 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span></span></span></span></span>，然后通过将RGB值和不透明度通过积分计算得到最终的表面颜色。</p> 
<h4><a id="Positional_Encoding_in_NeRF_184"></a>Positional Encoding in NeRF</h4> 
<p><img src="https://images2.imgbox.com/50/6c/0xM9MZEZ_o.png" alt="在这里插入图片描述"></p> 
<p>这里使用Positional Encoding的方式是，相机空间坐标<strong>使用20维</strong>表示位置编码；相机方向<strong>使用8维</strong>来表示位置编码。<br> 位置编码的存在可以保有图像中高质量的细节，使得这些细节不会被平滑掉。<br> 位置编码是通过concat的方式来和原始坐标进行结合的。</p> 
<h4><a id="NeRF_191"></a>NeRF网络结构</h4> 
<p><img src="https://images2.imgbox.com/b8/da/qn5LwsyI_o.png" alt="在这里插入图片描述"><br> 前面提到，NeRF的做法是将相机位置和位置编码以concat的方式结合起来作为网络的输入，在第5个MLP中再次加入了这个输入，是一个残差的结构以解决梯度消失和梯度爆炸的问题。在这之后的第三个MLP，输出了不透明度<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
      
        \sigma 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span></span></span></span></span>，前面说过不透明度是相机方向无关的，所以无需相机方向作为输入就可以获得这个density。在后边加上了相机的方向，以获得对应的RGB颜色值。</p> 
<h4><a id="NeRFVolume_Rendering_195"></a>NeRF中的Volume Rendering</h4> 
<p>对于每个batch中的<strong>64个sample points</strong>，通过Volume Rendering的方式进行渲染。如下图©所示，纵坐标表示的是不透明度。对于Ray2，第一次波峰，也就是第一次不透明度较高的时候，说明第一次碰到了物体，第二次波峰，第二次不透明度较高的时候说明光线离开了物体。<br> <img src="https://images2.imgbox.com/c5/d0/9szyKzAu_o.png" alt="在这里插入图片描述"><br> 在实际渲染的时候，第一个不透明度较高的所显示出来的颜色肯定会阻挡第二个不透明度较高所显示出来的颜色，也就是说第一个波峰作为物体的正面，我们会看到物体正面的颜色；第二个波峰作为物体的背面，我们可能看到这个颜色就更少一些。所以通过一种特定的积分方式来求得实际显示的颜色<br> <img src="https://images2.imgbox.com/59/dc/fzD7Dk89_o.png" alt="在这里插入图片描述"><br> 这里可以理解一下这个渲染的公式。其中<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         C 
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
      
        C(r) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span></span></span>和<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
        
        
          C 
         
        
          ^ 
         
        
       
         ( 
        
       
         r 
        
       
         ) 
        
       
      
        \hat{C}(r) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.1968em; vertical-align: -0.25em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.9468em;"><span class="" style="top: -3em;"><span class="pstrut" style="height: 3em;"></span><span class="mord mathnormal" style="margin-right: 0.0715em;">C</span></span><span class="" style="top: -3.2523em;"><span class="pstrut" style="height: 3em;"></span><span class="accent-body" style="left: -0.1667em;"><span class="mord">^</span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mclose">)</span></span></span></span></span>分别表示理想状态下和近似状态下的颜色值。<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         t 
        
       
      
        t 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6151em;"></span><span class="mord mathnormal">t</span></span></span></span></span>：表示采样点离原点<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         o 
        
       
      
        o 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal">o</span></span></span></span></span>的距离<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
      
        \sigma 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span></span></span></span></span>：不透明度<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         δ 
        
       
      
        \delta 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0379em;">δ</span></span></span></span></span>：采样点间距<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         d 
        
       
      
        d 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span>：观测方向的单位向量<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         ( 
        
       
         t 
        
       
         ) 
        
       
      
        r(t) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span>：采样点的位置<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         r 
        
       
         ( 
        
       
         t 
        
       
         ) 
        
       
         = 
        
       
         o 
        
       
         + 
        
       
         t 
        
       
         d 
        
       
      
        r(t)=o+td 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 0.6667em; vertical-align: -0.0833em;"></span><span class="mord mathnormal">o</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span></span><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">d</span></span></span></span></span><br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         c 
        
       
         ( 
        
       
         r 
        
       
         ( 
        
       
         t 
        
       
         ) 
        
       
         , 
        
       
         d 
        
       
         ) 
        
       
      
        c(r(t),d) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal">c</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord mathnormal">d</span><span class="mclose">)</span></span></span></span></span>：颜色值与采样点位置和观测角度有关<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
         ( 
        
       
         r 
        
       
         ( 
        
       
         t 
        
       
         ) 
        
       
         ) 
        
       
      
        \sigma(r(t)) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right: 0.0278em;">r</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">))</span></span></span></span></span>：不透明度仅与位置有关，与观测角度无关<br> <span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         T 
        
       
         ( 
        
       
         t 
        
       
         ) 
        
       
      
        T(t) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span>：理解为不透光率，从积分可以看出，实际上<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         T 
        
       
         ( 
        
       
         t 
        
       
         ) 
        
       
      
        T(t) 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathnormal" style="margin-right: 0.1389em;">T</span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span>是将采样点的密度值<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         σ 
        
       
      
        \sigma 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.4306em;"></span><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span></span></span></span></span>和影响范围<span class="katex--inline"><span class="katex"><span class="katex-mathml"> 
     
      
       
       
         δ 
        
       
      
        \delta 
       
      
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.6944em;"></span><span class="mord mathnormal" style="margin-right: 0.0379em;">δ</span></span></span></span></span>进行累加，越向后叠不透光率越高，对于这个不透光率的理解如下：<br> <img src="https://images2.imgbox.com/a9/f9/ZJptJ2We_o.png" alt="在这里插入图片描述"><br> 理想状态下，我们希望通过积分来得到这个颜色值，但是我们没办法做积分，因为我们的采样值是离散的，所以只能通过一种近似的方式，通过求和来近似积分：<br> <img src="https://images2.imgbox.com/31/7d/AydejvwJ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="NeRFHierarchical_Sampling_212"></a>NeRF中的Hierarchical Sampling分层采样</h4> 
<p>如果在射线上通过均匀的点采样，可能会导致近似不够精确，如下粗网络是均匀地采样64个点<br> <img src="https://images2.imgbox.com/8e/33/k898JnMx_o.png" alt="在这里插入图片描述"><br> 这会导致的一个问题是近似上可能会出现问题，没有办法近似这个波峰：<br> <img src="https://images2.imgbox.com/7d/b7/xuQ834x9_o.png" alt="在这里插入图片描述"><br> 为了解决这个问题并改进效果，NeRF里进一步提出了一个精细网络，基于粗网络采样计算得到的结果，来计算权重，权重高的位置在精细网络中尽可能地多采样点，空气部分较为稀疏的地方，或者是不透光率较高的地方可以少采样一些点，进而获得更好的效果。<br> <img src="https://images2.imgbox.com/8d/c5/lAC94hqA_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="PSNRSSIM_220"></a>PSNR，SSIM</h3> 
<p>参考了<a href="https://blog.csdn.net/qq_30460949/article/details/126118738">图像质量指标：PSNR、SSIM、MSE</a><br> 只摘取了数值大小表示结果好坏的部分：<br> PSNR 在图像处理上主要用于量化受有损压缩影响的图像和视频的重建质量。如果两个输入图像的相似，PSNR 返回一个浮点数在30和50之间，(数值越高，相符程度越高).<br> SSIM 返回图像的结构相似度指标。这是一个在0-1之间的浮点数(越接近1，相符程度越高)<br> 两个指标都是需要输入两张图像来进行计算的。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b2b6f8c8dc6558bb2772e5b18700b3b7/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">DEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/06086678525313ea488bd00dfef23ec9/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">NLP论文阅读记录 - 2021 | RefSum：重构神经总结</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>