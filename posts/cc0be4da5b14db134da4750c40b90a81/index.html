<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【字符编码】Unicode字符集与字符编码方式 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【字符编码】Unicode字符集与字符编码方式" />
<meta property="og:description" content="Unicode字符集与字符编码方式 字符集和字符编码的区别和联系字符集编码的发展Unicode字符集的编码方式UTF-8UTF-16UTF-32UTF BOM 问题小结 字符集相关命令fileiconv 字符集转换编程字符集应用案例字符集在线工具集合 字符集和字符编码的区别和联系 字符集：多个字符的集合。例如 GB2312 是中国国家标准的简体中文字符集，GB2312 收录简化汉字（6763 个）及一般符号、序号、数字、拉丁字母、日文假名、希腊字母、俄文字母、汉语拼音符号、汉语注音字母，共 7445 个图形字符。字符编码：把字符集中的字符编码为（映射）指定集合中的某一对象（例如：比特模式、自然数序列、电脉冲），以便文本在计算机中存储和通过通信网络的传递。 字符集和字符编码的关系：
字符集是书写系统字母与符号的集合而字符编码则是将字符映射为一特定的字节或字节序列，是一种规则。 通常特定的字符集采用特定的编码方式（即一种字符集对应一种字符编码（例如：ASCII、IOS-8859-1、GB2312、GBK，都是即表示了字符集又表示了对应的字符编码，但 Unicode 不是，它采用现代的模型））
字符集编码的发展 单字节 -&gt; 双字节 -&gt; 多字节
(1) 单字节
ASCII（American Standard Code for Information Interchange）, 128 个字符, 用 7 位二进制表示（00000000-01111111 即 0x00-0x7F）;EASCII（Extended ASCII）,256 个字符，用 8 位二进制表示（00000000-11111111 即 0x00-0xFF）。
当计算机传到了欧洲，国际标准化组织在 ASCII 的基础上进行了扩展，形成了 ISO-8859标准，跟 EASCII 类似，兼容 ASCII，在高 128 个码位上有所区别。但是由于欧洲的语言环境十分复杂，所以根据各地区的语言又形成了很多子标准，ISO-8859-1、ISO-8859- 2、ISO-8859-3、……、ISO-8859-16。
(2) 双字节
当计算机传到了亚洲，256 个码位就不够用了。于是乎继续扩大二维表，单字节改双字节，16 位二进制数，65536 个码位。在不同国家和地区又出现了很多编码，大陆的GB2312、港台的 BIG5、日本的 Shift JIS 等等。
注意 65536 个码位这种说法只是理想情况，由于双字节编码可以是变长的，也就是说同一个编码里面有些字符是单字节表示，有些字符是双字节表示。这样做的好处是，一方面可以兼容 ASCII，另一方面可以节省存储容量，代价就是会损失一部分码位。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/cc0be4da5b14db134da4750c40b90a81/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-02-21T01:10:00+08:00" />
<meta property="article:modified_time" content="2022-02-21T01:10:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【字符编码】Unicode字符集与字符编码方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Unicode字符集与字符编码方式</h4> 
 <ul><li><ul><li><ul><li><a href="#_2" rel="nofollow">字符集和字符编码的区别和联系</a></li><li><a href="#_12" rel="nofollow">字符集编码的发展</a></li><li><a href="#Unicode_46" rel="nofollow">Unicode字符集的编码方式</a></li><li><ul><li><a href="#UTF8_63" rel="nofollow">UTF-8</a></li><li><a href="#UTF16_81" rel="nofollow">UTF-16</a></li><li><a href="#UTF32_88" rel="nofollow">UTF-32</a></li><li><a href="#UTF_BOM__91" rel="nofollow">UTF BOM 问题</a></li><li><a href="#_116" rel="nofollow">小结</a></li></ul> 
    </li><li><a href="#_133" rel="nofollow">字符集相关命令</a></li><li><ul><li><a href="#file_137" rel="nofollow">file</a></li><li><a href="#iconv_150" rel="nofollow">iconv</a></li></ul> 
    </li><li><a href="#_192" rel="nofollow">字符集转换编程</a></li><li><a href="#_210" rel="nofollow">字符集应用案例</a></li><li><a href="#_228" rel="nofollow">字符集在线工具集合</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_2"></a>字符集和字符编码的区别和联系</h4> 
<ul><li><strong>字符集</strong>：多个字符的集合。例如 GB2312 是中国国家标准的简体中文字符集，GB2312 收录简化汉字（6763 个）及一般符号、序号、数字、拉丁字母、日文假名、希腊字母、俄文字母、汉语拼音符号、汉语注音字母，共 7445 个图形字符。</li><li><strong>字符编码</strong>：把字符集中的字符编码为（映射）指定集合中的某一对象（例如：比特模式、自然数序列、电脉冲），<strong>以便文本在计算机中存储和通过通信网络的传递</strong>。</li></ul> 
<p><strong>字符集和字符编码的关系</strong>：</p> 
<ol><li><strong>字符集</strong>是书写系统字母与符号的集合</li><li>而<strong>字符编码</strong>则是将字符映射为一特定的字节或字节序列，是一种规则。</li></ol> 
<p>通常特定的字符集采用特定的编码方式（即一种字符集对应一种字符编码（例如：ASCII、IOS-8859-1、GB2312、GBK，都是即表示了字符集又表示了对应的字符编码，但 Unicode 不是，它采用现代的模型））</p> 
<h4><a id="_12"></a>字符集编码的发展</h4> 
<p>单字节 -&gt; 双字节 -&gt; 多字节</p> 
<p><strong>(1) 单字节</strong></p> 
<p>ASCII（American Standard Code for Information Interchange）, 128 个字符, 用 7 位二进制表示（00000000-01111111 即 0x00-0x7F）;EASCII（Extended ASCII）,256 个字符，用 8 位二进制表示（00000000-11111111 即 0x00-0xFF）。</p> 
<p>当计算机传到了欧洲，国际标准化组织在 ASCII 的基础上进行了扩展，形成了 ISO-8859标准，跟 EASCII 类似，兼容 ASCII，在高 128 个码位上有所区别。但是由于欧洲的语言环境十分复杂，所以根据各地区的语言又形成了很多子标准，ISO-8859-1、ISO-8859- 2、ISO-8859-3、……、ISO-8859-16。</p> 
<p><strong>(2) 双字节</strong></p> 
<p>当计算机传到了亚洲，256 个码位就不够用了。于是乎继续扩大二维表，单字节改双字节，16 位二进制数，65536 个码位。在不同国家和地区又出现了很多编码，大陆的GB2312、港台的 BIG5、日本的 Shift JIS 等等。</p> 
<p>注意 65536 个码位这种说法只是理想情况，由于双字节编码可以是变长的，也就是说同一个编码里面有些字符是单字节表示，有些字符是双字节表示。这样做的好处是，一方面可以兼容 ASCII，另一方面可以节省存储容量，代价就是会损失一部分码位。</p> 
<p>GBK(Chinese Internal Code Specification 汉字内码扩展规范)是 GB2312 的扩展（gbk 编码能够用来同时表示繁体字和简体字），按理说都属于双字节编码，码位是一样的，根本谈不上扩展，但实际上是预留空间在起作用。比如下图为 GBK 的编码空间，GBK/1、GBK/2 是 GB2312 的区域，GBK/3、GBK/4、GBK/5 是 GBK 的区域，红色是用户自定义域，白色可能就是由于变长编码损失的区域了。</p> 
<p>支持国际标准 ISO/IEC10646-1 和国家标准 GB13000-1 中的全部中日韩汉字。GBK 字符集中所有中文字符和全角符号占 2 个字节，字母和半角符号占一个字节。 没有特殊的编码方式，习惯称呼 GBK 编码。一般在国内，汉字较多时使用。</p> 
<p><img src="https://images2.imgbox.com/a8/8b/r4IwNhco_o.png" alt="在这里插入图片描述"><br> <strong>(3) 多字节</strong></p> 
<p>当互联网席卷了全球，地域限制被打破了，不同国家和地区的计算机在交换数据的过程中，就会出现乱码的问题，即对同一组二进制数据，不同的编码会解析出不同的字符。</p> 
<p><mark>UNICODE 字符集国际标准字符集，它将世界各种语言的每个字符定义一个唯一的编码，以满足跨语言、跨平台的文本信息转换。有多个编码方式，分别是 UTF-8，UTF-16，UTF-32 编码</mark>。</p> 
<p>Unicode 字符集 可以使用的编码有三种：</p> 
<ul><li><strong>UFT-8</strong>：一种<strong>变长的编码</strong>方案，使用 1~6 个字节来存储；</li><li><strong>UFT-32</strong>：一种<strong>固定长度的编码</strong>方案，不管字符编号大小，始终使用 4 个字节来存储；</li><li><strong>UTF-16</strong>：介于 UTF-8 和 UTF-32 之间，使用 2 个或者 4 个字节来存储，<strong>长度<br> 既固定又可变</strong>。</li></ul> 
<p>UTF 是 Unicode Transformation Format 的缩写，意思是“Unicode 转换格式”，后面的数字表明至少使用多少个比特位（Bit）来存储字符</p> 
<h4><a id="Unicode_46"></a>Unicode字符集的编码方式</h4> 
<p>汉字 Unicode 编码范围 <code>https://www.qqxiuzi.cn/zh/hanzi-unicode-bianma.php</code></p> 
<p>Unicode 只是<strong>字符集</strong>，utf-8、utf-16、utf-32 才是真正的<strong>编码方式</strong>。</p> 
<p>unicode不是存储格式，是字符的唯一编码，用于根据这个编码找到显示字体位图文件，然后显示出字体到屏幕的坐标点。</p> 
<p>utf8/utf16/utf32/gbk是存储格式，存储的文件格式是这几种的其中一种，是对unicode的不同编码方法。</p> 
<p>Unicode 字符集 可以使用的编码有三种：</p> 
<ol><li>UFT-8：一种变长的编码方案，使用 1~6 个字节来存储；</li><li>UTF-16：介于 UTF-8 和 UTF-32 之间，使用 2 个或者 4 个字节来存储，长度既固定又可变。</li><li>一种固定长度的编码方案，不管字符编号大小，始终使用 4 个字节来存储；</li></ol> 
<p>UTF 是 Unicode Transformation Format 的缩写，意思是“Unicode 转换格式”，后面的数字表明至少使用多少个比特位（Bit）来存储字符</p> 
<h5><a id="UTF8_63"></a>UTF-8</h5> 
<p>UTF-8: 是一种变长字符编码，被定义为将代码点编码为 1 至 4 个字节，具体取决于代码点数值中有效位的数量。</p> 
<p>下表为 Unicode 值对应的 utf8 需要的字节数量。<br> Utf8 前缀编码格式</p> 
<table><thead><tr><th>unicode 编码(16 进制)</th><th>UTF-8 字节流(二进制)</th></tr></thead><tbody><tr><td>000000 - 00007F</td><td><mark>0</mark>xxxxxxx ascii 码</td></tr><tr><td>000080 - 0007FF</td><td><mark>110</mark>xxxxx <mark>10</mark>xxxxxx</td></tr><tr><td>000800 - 00FFFF</td><td><mark>1110</mark>xxxx <mark>10</mark>xxxxxx <mark>10</mark>xxxxxx</td></tr><tr><td>01 0000 - 10 FFFF</td><td><mark>11110</mark>xxx <mark>10</mark>xxxxxx <mark>10</mark>xxxxxx <mark>10</mark>xxxxxx</td></tr></tbody></table> 
<p>范例：计算 Unicode 码使用 utf8 进行表示：<br> 例如：汉字 【严】的 Unicode 码是 4E25 转换成二进制就是 01001110 00100101 共 15 位，根据上表可知使用 UTF-8 字符编码后占 3 个字节，因此前 3 位是 1，第 4 位（n+1 位）是 0，后面两个字节中每个字节的前两位都是 10,即 1110 xxxx 10 xxxxxx 10xxxxxx。填充进去后就变成了 1110 0100 10 111000 10 100101 共计 24 位占 3 个字节。</p> 
<p>GBK 内码、Unicode 查询：<code>http://www.mytju.com/classcode/tools/encode_gb2312.asp</code></p> 
<h5><a id="UTF16_81"></a>UTF-16</h5> 
<p>UFT-16 比较奇葩，它使用 <mark>2 个或者 4 个字节</mark>来存储。</p> 
<ol><li>对于 Unicode 编号范围在 0~FFFF 之间的字符，UTF-16 使用两个字节存储，并且直接存储 Unicode 编号，不用进行编码转换，这跟 UTF-32 非常类似。</li><li>对于 Unicode 编号范围在 10000~10FFFF 之间的字符，UTF-16 使用四个字节存储，具体来说就是：将字符编号的所有比特位分成两部分，较高的一些比特位用一个值介于 D800~DBFF 之间的双字节存储，较低的一些比特位（剩下的比特位）用一个值介于 DC00~DFFF 之间的双字节存储。</li></ol> 
<p><img src="https://images2.imgbox.com/a2/f2/F162uzVu_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="UTF32_88"></a>UTF-32</h5> 
<p>UTF-32 是<mark>固定长度</mark>的编码，始终占用 4 个字节，足以容纳所有的 Unicode 字符，所以直接存储 Unicode 编号即可，不需要任何编码转换。浪费了空间，提高了效率。</p> 
<h5><a id="UTF_BOM__91"></a>UTF BOM 问题</h5> 
<p>UTF 是 Unicode Transformation Format 的缩写，意思是“Unicode 转换格式”，后面的数字表明至少使用多少个比特位（Bit）来存储字符</p> 
<p>BOM（Byte Order Mark）字节序（字节顺序的标识），其实就是用大端(BE)还是小端(LE)。</p> 
<p>比如 UTF-16BE 和 UTF-16LE：</p> 
<ul><li>UTF-16BE，其后缀是 BE 即 big-endian，大端的意思。大端就是将<mark>高位的字节放在低地址</mark>表示。</li><li>UTF-16LE，其后缀是 LE 即 little-endian，小端的意思。小端就是将<mark>高位的字节放在高地址</mark>表示。</li><li>UTF-16，没有指定后缀，即不知道其是大小端，所以其开始的两个字节表示该字节数组是大端还是小端。即 FE FF 表示大端，FF FE 表示小端。</li></ul> 
<p>UTF 在文件中的存储。UTF 格式在文件中总有<mark>固定文件头</mark>：</p> 
<table><thead><tr><th>UTF 编码</th><th>Byte Order Mark</th></tr></thead><tbody><tr><td>UTF-8</td><td>EF BB BF</td></tr><tr><td>UTF-16LE</td><td>FF FE</td></tr><tr><td>UTF-16BE</td><td>FE FF</td></tr><tr><td>UTF-32LE</td><td>FF FE 00 00</td></tr><tr><td>UTF-32BE</td><td>00 00 FE FF</td></tr></tbody></table> 
<p><mark>注：UTF-8 缺省不带 BOM</mark></p> 
<p>如“汉”字在文件中的存储(不包括头)：<br> <img src="https://images2.imgbox.com/ca/27/EtxDf8yC_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="_116"></a>小结</h5> 
<p>程序打开一个文件时怎么识别用的是 UTF-8 还是 UTF-16？<br> 答：是否有标志做标志，在文件的开头几个字节就是标志.<br> ➢ EF BB BF 表示 UTF-8<br> ➢ FE FF 表示 UTF-16BE<br> ➢ FF FE 表示 UTF-16LE<br> ➢ 00 00 FE FF 表示 UTF32-BE<br> ➢ FF FE 00 00 表示 UTF32-LE</p> 
<p>注意：<mark>只有 UTF-8 兼容 ASCII，UTF-32 和 UTF-16 都不兼容 ASCII，因为它们没有单字节编码。</mark></p> 
<p>查看完整的 Unicode 字符集，以及各种编码方式：<code>https://unicode-table.com/cn/</code><br> Unicode 和 UTF 编码转换：<code>https://www.qqxiuzi.cn/bianma/Unicode-UTF.php</code></p> 
<p><mark>UTF-8 缺省不带 BOM</mark><br> UTF-8 中有一字节的情况，这种情况，就没有两端的说法了。至于另外的二，三，四字节情况，以三字节为例，如果你一定要弄出端法，也不是说不可以，比如，小端法就是“小-中-大”，大端法就是“大-中-小”。但现实情况是 <mark>UTF-8 仅仅采用了一种端法，就是大端法。</mark></p> 
<h4><a id="_133"></a>字符集相关命令</h4> 
<p>Unicode 和 UTF 编码转换：<code>https://www.qqxiuzi.cn/bianma/Unicode-UTF.php</code></p> 
<h5><a id="file_137"></a>file</h5> 
<p>命令：<br> file：查看文件的编码方式 （分析结果做一个参考）</p> 
<p>范例：</p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">file</span> <span class="token expression"><span class="token operator">-</span>i chatset<span class="token punctuation">.</span>cpp</span></span>
chatset<span class="token punctuation">.</span>cpp<span class="token operator">:</span> text<span class="token operator">/</span>x<span class="token operator">-</span>c<span class="token operator">++</span><span class="token punctuation">;</span> charset<span class="token operator">=</span>utf<span class="token operator">-</span><span class="token number">8</span>
<span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">file</span> <span class="token expression"><span class="token operator">-</span>i chatset<span class="token operator">-</span>gbk2312<span class="token punctuation">.</span>cpp </span></span>
chatset<span class="token operator">-</span>gbk2312<span class="token punctuation">.</span>cpp<span class="token operator">:</span> text<span class="token operator">/</span>x<span class="token operator">-</span>c<span class="token operator">++</span><span class="token punctuation">;</span> charset<span class="token operator">=</span>iso<span class="token operator">-</span><span class="token number">8859</span><span class="token operator">-</span><span class="token number">1</span>
</code></pre> 
<h5><a id="iconv_150"></a>iconv</h5> 
<p>iconv 命令是用来转换文件的编码方式的，比如它可以将 UTF8 编码的转换成 GB18030的编码，反过来也行。Linux 下的 iconv 开发库包括 iconv_open,iconv_close,iconv 等 C 函数，可以用来在 C/C++程序中很方便的转换字符编码</p> 
<p>语法：<br> iconv -f encoding [-t encoding] [inputfile]…</p> 
<p>选项：<br> -f encoding :把字符从 encoding 编码开始转换。<br> -t encoding :把字符转换到 encoding 编码。<br> -l :列出已知的编码字符集合<br> -o file :指定输出文件<br> -c :忽略输出的非法字符<br> -s :禁止警告信息，但不是错误信息<br> –verbose :显示进度信息<br> -f 和-t 所能指定的合法字符在-l 选项的命令里面都列出来了。</p> 
<ol><li>查看支持的格式 <code>iconv -l</code>， 这里节选部分格式</li></ol> 
<pre><code class="prism language-cpp">UTF<span class="token operator">-</span><span class="token number">8</span><span class="token punctuation">,</span> UTF<span class="token operator">-</span><span class="token number">16</span><span class="token punctuation">,</span> UTF<span class="token operator">-</span><span class="token number">16</span>BE<span class="token punctuation">,</span> UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token punctuation">,</span> UTF<span class="token operator">-</span><span class="token number">32</span><span class="token punctuation">,</span> UTF<span class="token operator">-</span><span class="token number">32</span>BE<span class="token punctuation">,</span> UTF<span class="token operator">-</span><span class="token number">32L</span>E<span class="token punctuation">,</span> 
UTF8<span class="token punctuation">,</span> UTF16<span class="token punctuation">,</span> UTF16BE<span class="token punctuation">,</span> UTF16LE<span class="token punctuation">,</span> UTF32<span class="token punctuation">,</span> UTF32BE<span class="token punctuation">,</span> UTF32LE GB2312 
GBK ISO<span class="token operator">-</span><span class="token number">8859</span><span class="token operator">-</span><span class="token number">1</span>
</code></pre> 
<ol start="2"><li>转换各种格式</li></ol> 
<pre><code class="prism language-cpp">iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF<span class="token operator">-</span><span class="token number">8</span> utf8<span class="token punctuation">.</span>txt <span class="token operator">-</span>o UTF<span class="token operator">-</span><span class="token number">8.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF8 utf8<span class="token punctuation">.</span>txt <span class="token operator">-</span>o UTF8<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF<span class="token operator">-</span><span class="token number">16</span> UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF<span class="token operator">-</span><span class="token number">16.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF<span class="token operator">-</span><span class="token number">16</span>BE UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF<span class="token operator">-</span><span class="token number">16</span>BE<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF<span class="token operator">-</span><span class="token number">16L</span>E UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF<span class="token operator">-</span><span class="token number">16L</span>E<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF16 UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF16<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF16BE UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF16BE<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF16LE UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF16LE<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF<span class="token operator">-</span><span class="token number">32</span> UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF<span class="token operator">-</span><span class="token number">32.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF<span class="token operator">-</span><span class="token number">32</span>BE UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF<span class="token operator">-</span><span class="token number">32</span>BE<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t UTF<span class="token operator">-</span><span class="token number">32L</span>E UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o UTF<span class="token operator">-</span><span class="token number">32L</span>E<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t GB2312 UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o GB2312<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t GBK UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o GBK<span class="token punctuation">.</span>txt
iconv <span class="token operator">-</span>f UTF<span class="token operator">-</span><span class="token number">8</span> <span class="token operator">-</span>t ISO<span class="token operator">-</span><span class="token number">8859</span><span class="token operator">-</span><span class="token number">1</span> UTF<span class="token operator">-</span><span class="token number">8.</span>txt <span class="token operator">-</span>o ISO<span class="token operator">-</span><span class="token number">8859</span><span class="token operator">-</span><span class="token number">1.</span>txt
</code></pre> 
<h4><a id="_192"></a>字符集转换编程</h4> 
<p>iconv文档地址：<code>http://www.gnu.org/software/libiconv/documentation/libiconv-1.13/</code></p> 
<pre><code class="prism language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iconv.h&gt;</span></span>
iconv_t <span class="token function">iconv_open</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> tocode<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> fromcode<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">iconv_close</span> <span class="token punctuation">(</span>iconv_t cd<span class="token punctuation">)</span><span class="token punctuation">;</span>

size_t <span class="token function">iconv</span> <span class="token punctuation">(</span>iconv_t cd<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token operator">*</span> inbuf<span class="token punctuation">,</span> size_t <span class="token operator">*</span> inbytesleft<span class="token punctuation">,</span> <span class="token keyword">char</span><span class="token operator">*</span> <span class="token operator">*</span> outbuf<span class="token punctuation">,</span> 
size_t <span class="token operator">*</span> outbytesleft<span class="token punctuation">)</span><span class="token punctuation">;</span> 
返回值：返回<span class="token operator">-</span><span class="token number">1</span> 则说明出现异常，错误码
	E2BIG：outbuf 没有足够的空间
	EILSEQ：遇到无效的多字节序列
	EINVAL：遇到不完整的多字节序列
</code></pre> 
<h4><a id="_210"></a>字符集应用案例</h4> 
<ol><li><strong>mysql 字符集设置</strong></li></ol> 
<p>部分汉字在 mysql 使用 utf8 字符时写入出现异常，或者读取出现异常。比如<strong>𤋮</strong>（xī），其和<strong>熙</strong>存在区别。<strong>𤋮</strong>（xī）在 utf8 模式下需要 4 个字节表示。</p> 
<ul><li>MySQL 的“utf8 ”实际上不是真正的 UTF-8， “utf8”只支持每个字符最多 3 个字节。 而真正的 utf8 至少要支持 4 个字节。</li><li>MySQL 一直没有修复这个 bug，他们在 2010 年发布了一个叫作"utf8mb4"的字符集。 MySQL 的"utf8mb4"是真正的"UTF-8"。</li></ul> 
<ol start="2"><li><strong>nginx 配置字符集</strong></li></ol> 
<p>conf 文件需要加入 charset utf-8;</p> 
<ol start="3"><li><strong>redis 命令行时出现中文乱码</strong></li></ol> 
<p>单纯以 redis-cli 启动命令行，在 set 中文 value 是再 get 出现乱码，比如：<br> <img src="https://images2.imgbox.com/9e/10/LI6XwPlG_o.png" alt="在这里插入图片描述"><br> 附加–raw 参数启动即可，即是 redis-cli --raw 启动命令行：<br> <img src="https://images2.imgbox.com/0f/99/PtgLlnhK_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_228"></a>字符集在线工具集合</h4> 
<p><strong>GBK 内码查询</strong>：</p> 
<pre><code class="prism language-cpp">http<span class="token operator">:</span><span class="token comment">//www.mytju.com/classcode/tools/encode_gb2312.asp</span>
</code></pre> 
<p><strong>完整的 Unicode 字符集</strong>：</p> 
<pre><code class="prism language-cpp">https<span class="token operator">:</span><span class="token comment">//unicode-table.com/cn/</span>
</code></pre> 
<p><strong>Unicode 和 UTF 编码转换</strong>：</p> 
<pre><code class="prism language-cpp">https<span class="token operator">:</span><span class="token comment">//www.qqxiuzi.cn/bianma/Unicode-UTF.php</span>
</code></pre> 
<p><strong>汉字字符集编码查询</strong>：</p> 
<pre><code class="prism language-cpp">https<span class="token operator">:</span><span class="token comment">//www.qqxiuzi.cn/bianma/zifuji.php</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a5b41fc27a8d22948fa4519bcab786b3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SpringCloud概念性内容整理记录，SpringCloud整体学习思路整理</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/feb1d8d343872392d5eba4f5f8f770bf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Rust 中的 RefCell</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>