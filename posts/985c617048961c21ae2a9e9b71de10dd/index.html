<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python打包exe,用pyinstaller，减小打包体积方法[pipenv] - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python打包exe,用pyinstaller，减小打包体积方法[pipenv]" />
<meta property="og:description" content="大家好，第一次写csdn，主要是自己碰到的问题查了好几地方都没讲透，今天把自己碰到问题和大家一起分享，希望大家也避坑。
今天用pyinstaller打包，一个程序打包完有340Mb,翻一下之前打包文件仅30Mb~40Mb,分析了一下，网上也找了一下原因：
1、原来打包文件时，我电脑只安装了python，编辑器用的pycham，刚用没多久，库文件装得很少。
2、这次电脑安装了Anaconda，里内置了很多库，打包时会将一些不需要的库都打包进程序，而且速度也慢。
我的解决方法：
1.网上查完建议用Pipenv虚拟环境，具体步骤：
安装pipenv库： pip install pipenv -i https://pypi.tuna.tsinghua.edu.cn/simple/ #（清华镜像源）
运行pipenv虚拟环境 ： pipenv shell 这是未进虚拟环境前：
进入虚拟环境后 注意：多了“（python学习视频-0l8esk90）”表示已进入虚拟环境。每个人python路径不一样，前部分名称不一样，根据自己查看。
在此虚拟环境下安装pyinstaller库(原程序已安装的，在虚拟环境下再装一次）
pip install pyinstaller -i https://pypi.tuna.tsinghua.edu.cn/simple/ 安装要自己打包文件调用的库文件，比如我的：
在pipenv虚拟环境下以此安装pandas/requests/ jsonpath/bs4库，random不用装，自己程序逐个pip install xxx安装所需库。
可以开始打包了，我的xxx.py文件就在“ F:\python学习视频”下面，所以直接打包
pyinstaller -i aaa.ico -F xxx.py (自己常用，我的基本都需要控制台dos界面，输入程序所要的信息用，所以不要 - w )
一般步骤有三种，可以根据需求使用:
Pyinstaller -F py_word.py 打包exe
Pyinstaller -F -w py_word.py 不带控制台的打包
Pyinstaller -F -w -i aaa.ico xxx.py 打包指定exe图标打包
ico图片可以自己设计好后，在网上直接在线转ico 保存本地,文件放在和打包程序xxx.py同位置即可（注不可直接将图片后缀改成ico）
重点来了：
打包完成后，生成的程序在dist文件夹下面。运行exe文件，我在窗口下输入所需要信息后等待几秒后运行一下，弹出几条信息立马闪退，程序报错了，还看不见。
于是用微信或qq截图快捷键做好准备，运行程序弹出报错信息时快速截图
识别文字后贴入百度一搜，原来是pandas里面嵌套了openpyx1库文件，再次再pipenv环境中安装pip install openpyx1 （大家注意自己程序报错截图）查原因解决后基本不会出问题了" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/985c617048961c21ae2a9e9b71de10dd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-24T12:57:19+08:00" />
<meta property="article:modified_time" content="2023-04-24T12:57:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python打包exe,用pyinstaller，减小打包体积方法[pipenv]</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>大家好，第一次写csdn，主要是自己碰到的问题查了好几地方都没讲透，今天把自己碰到问题和大家一起分享，希望大家也避坑。</p> 
<p>      今天用pyinstaller打包，一个程序打包完有340Mb,翻一下之前打包文件仅30Mb~40Mb,分析了一下，网上也找了一下原因：</p> 
<p>1、原来打包文件时，我电脑只安装了python，编辑器用的pycham，刚用没多久，库文件装得很少。</p> 
<p>2、这次电脑安装了Anaconda，里内置了很多库，打包时会将一些不需要的库都打包进程序，而且速度也慢。</p> 
<p>我的解决方法：</p> 
<p>1.网上查完建议用Pipenv虚拟环境，具体步骤：</p> 
<p>安装pipenv库：  pip install pipenv -i https://pypi.tuna.tsinghua.edu.cn/simple/   #（清华镜像源）</p> 
<p>运行pipenv虚拟环境 ： pipenv shell  </p> 
<p>这是未进虚拟环境前：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/9d/5b/OByOG5Yb_o.png"></p> 
<p>进入虚拟环境后 </p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/99/9e/lcy4qohg_o.png"></p> 
<p> 注意：多了“（python学习视频-0l8esk90）”表示已进入虚拟环境。每个人python路径不一样，前部分名称不一样，根据自己查看。</p> 
<p>在此虚拟环境下安装pyinstaller库(原程序已安装的，在虚拟环境下再装一次）</p> 
<p>pip install pyinstaller -i https://pypi.tuna.tsinghua.edu.cn/simple/ </p> 
<p>安装要自己打包文件调用的库文件，比如我的：</p> 
<p style="text-align:center;"><img alt="" class="left" src="https://images2.imgbox.com/4c/9f/s2q2iPhn_o.png"></p> 
<p> 在pipenv虚拟环境下以此安装pandas/requests/ jsonpath/bs4库，random不用装，自己程序逐个pip install xxx安装所需库。</p> 
<p>可以开始打包了，我的xxx.py文件就在“ F:\python学习视频”下面，所以直接打包</p> 
<p>pyinstaller -i aaa.ico -F xxx.py   (自己常用，我的基本都需要控制台dos界面，输入程序所要的信息用，所以不要 - w  )</p> 
<p>一般步骤有三种，可以根据需求使用:</p> 
<ol><li> <p>Pyinstaller -F py_word.py 打包exe</p> </li><li> <p>Pyinstaller -F -w py_word.py 不带控制台的打包</p> </li><li> <p>Pyinstaller -F -w -i aaa.ico xxx.py 打包指定exe图标打包</p> </li></ol> 
<p>ico图片可以自己设计好后，在网上直接在线转ico 保存本地,文件放在和打包程序xxx.py同位置即可（注不可直接将图片后缀改成ico）</p> 
<p><span style="color:#fe2c24;"><strong>重点来了：</strong></span></p> 
<p>打包完成后，生成的程序在dist文件夹下面。运行exe文件，我在窗口下输入所需要信息后等待几秒后运行一下，弹出几条信息立马闪退，程序报错了，还看不见。</p> 
<p><span style="color:#fe2c24;">于是用微信或qq截图快捷键做好准备，运行程序弹出报错信息时快速截图</span></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a5/d5/wxiHhC06_o.png"></p> 
<p>识别文字后贴入百度一搜，原来是pandas里面嵌套了openpyx1库文件，再次再pipenv环境中安装pip install openpyx1 （大家注意自己程序报错截图）查原因解决后基本不会出问题了</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5997f06eed2e36d9802b56727f25f359/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Jetson Nano一步到位打开USB摄像头（Rosmaster小车）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e297d3b4521521bb765f31dfdf79d075/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">RabbitMQ的几种消息确认机制详细介绍</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>