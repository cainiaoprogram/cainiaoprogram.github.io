<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>计算机网络知识之交换机、路由器、网关、MAC地址 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="计算机网络知识之交换机、路由器、网关、MAC地址" />
<meta property="og:description" content="目录
1、交换机
1、交换机的概念
2、交换机的作用
3、交换机的工作原理
4、交换机的功能
5、交换机的应用
6、交换机的三种交换方式
1、直通式（Cut Through）
2、存储转发（store &amp; Forward）
3、碎片隔离（Fragment Free）
7、交换机分类
2、 路由器（Windows下叫默认网关，网关就是路由，路由就是网关）
1、路由器的概述
2、路由器的作用功能
3、路由器的工作原理
3、网关
1、网关的概念
4、MAC地址
1、MAC地址的概述
2、查看MAC地址
1、交换机 1、交换机的概念 交换机（switch）是按照通信两端传输信息的需要，用人工或设备自动完成的方法，把要传输的信息送到符号要求的相应路由上的技术统称。广义的交换机switch就是一种通信系统中完成信息交换功能的设备。这个过程就是通过人工方式建立起来的交换。当然我们现在已经普及了程控交换机，交换的过程都是自动完成的。
交换机是一种在局域网中常用到的设备，它能实现相连计算机之间的高速数据交流。在同一时刻可以进行多个端口之间的数据传输。每一个端口都可以视为是独立的网段，连接在其他网络设备独自享有全部的带宽，无需同其他设备竞争使用。当节点A向节点D发送数据时，节点B可同时向节点C发送数据，而且这两个传输都享有网络的全部带宽，都有着自己的虚拟连接。
交换机是一种基于MAC地址识别，能完成封装转发数据包功能的网络设备。交换机可以“学习”MAC地址，并把其存放在内部地址表中，通过在数据帧的始发者和目标接收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址。
交换机可以分为：
2层交换机：只是交换功能。3层交换机：具有路由功能，可以当路由器使用LVS和nginx：4层负载均衡：传输层7层负载均衡：应用层 2、交换机的作用 本质意义上讲，交换是一个技术概念，即完成信号由设备入口到出口的转发。因此，只要是符合该定义的所有设备都可以被称为交换设备。“交换”是一个涵义广泛的词语，当它被用来描述数据网络第二层的设备时，实际指的是一个桥接设备，而当它被用来描述数据网络第三层的设备时，指的是一个路由设备。而以太网交换机实际是一个基于网桥技术的多端口第二层网络设备，它为数据帧从一个端口到另一个任意端口的转发提供了低时延、低开销的通路。
交换机的作用就是组建局域网。交换机内部核心处应该有一个交换矩阵，为任意两个端口之间的通信提供通路，或者是一个快速交换总线，以使由任意端口接收的数据帧从其他端送出。在实际的设备中，交换矩阵的功能往往是由专门的芯片（ASIC）完成的。
3、交换机的工作原理 交换机是工作在网络数据链路层，从物理划分网段的。
交换机的工作原理就是：先学习后转发。交换机里面含有mac地址表，mac地址表存放在内存中。
交换机的学习原理：学习源mac地址写到mac地址表里，mac地址表就会存入内存中，停电就会失效。mac地址表中存放的是：端口号、mac地址、vlan号（默认都为vlan1），mac地址表存入交换机中。交换机的转发原理：根据目的mac转发。如果目的mac地址在交换机的mac地址表里面没有，交换机就会复制帧给交换机的每个接口都转发一份（广播），来的那个接口不发。如果地址表里有目的mac地址（知道mac地址）就进行单播，不知道目的mac地址的时候会进行广播。目的mac地址全是FF的帧就叫广播地址，收到的mac地址全是F的就进行广播行为。 交换机的工作原理举例详细解说：
首先，交换机的工作原理可以分为两个特点：是先学习后转发。假设，一个交换机中连接了三台电脑，A电脑和B电脑进行连接通信，A电脑的mac地址是111，B电脑的是222，接下来，A电脑会把数据封装好，源mac地址填自己的，目的mac填222，接下来通过封装，封装到物理层，物理层通过网线送给交换机，交换机收到数据帧之后进行解封装，解封装的时候会先进行学习，先学习帧里面的源mac地址，然后看一下自己的mac地址表里面（交换机里面有个mac地址表）有没有源mac，如果没有就将源mac地址写到mac地址表里面去，并且知道它是哪个接口的（从哪里mac地址来对应哪个接口）；
然后学习完之后再进行转发操作，然后看它的目的mac地址在mac地址表里面有没有，有的话直接转发到对应接口，没有的话进行广播，广播就是给交换机的每个接口都转发一份，来的那个接口不发，这样的话，所有的接在交换机上的电脑都会收到数据，收到数据的电脑在进行解封装的时候会看目的mac是不是自己的，如果目的mac是自己的，就会进行回复，如果不是自己的就不回复，直接扔掉；然后B电脑收到之后，它的mac地址就是222，就会给出回复，回复的时候会封装好，源mac也是222，目的mac是111，当这个数据包到达交换机的时候，交换机又会进行先学习，看源mac222在不在mac表里面，如果有就不学习，没有就写入mac表中去。
交换机与交换机之间需要接一根线：防止形成环路。
防范形成环路：物理上检查不要形成环路；交换机的系统启用STP协议。
4、交换机的功能 交换机的主要功能是：物理编址、网络拓扑结构、错误校验、帧序列以及流程、VLAN（虚拟局域网）、链路汇聚、防火墙。
交换机除了能够连接同种类型的网络之外，还可以在不同类型的网络（如以太网和快速以太网）之间起到互连作用。一般来说，交换机的每个端口都用来连接一个独立的网段、但是有时为了提供更快的接入速度，我们可以把一些重要的网络计算机直接连接到交换机的端口上。这样，网络的关键服务器和重要用户就可以拥有更快的接入速度，支持更大的信息流量。
5、交换机的应用 作为局域网的主要连接设备，以太网交换机成为应用普及最快的网络设备之一。随着交换技术的不断发展，以太网交换机的价格急剧下降，交换到桌面已是大势所趋。
如果你的以太网上拥有大量的用户、繁忙的应用程序和各式各样的服务器，而且你还没有对网络结构做出任何调整，那么整个网络的性能可能会非常低。解决办法之一就是在以太网上添加一个10/100Mbps的交换机，它不仅可以处理10Mbps的常规以太网数据流，而且还可以支持100Mbps的快速以太网连接。
如果网络的利用率超过了40%，并且碰撞率大于10%，交换机可以帮你解决一点问题。带有100Mbps快速以太网和10Mbps以太网端口的交换机可以全双工方式运行，可以建立起专用的20Mbps到200Mbps连接。
在不同网络环境下交换机的作用各不相同，在同一网络环境下添加新的交换机和增加现有的交换端口对网络的影响也不相同，使用交换机的目的就是尽可能的减少和过滤网络中的数据流量。所以如果网络中的某台交换机由于安装位置设置不当，几乎需要转发接收到的所有数据包的话，交换机就无法发挥它优化网络性能的作用，反而会降低了数据的传输速度，增加网络延迟。
6、交换机的三种交换方式 1、直通式（Cut Through） 直通的方式的以太网可以理解为在各端口之间是纵横交叉的线路矩阵电话交换机。它在输入端口检测到一个数据包时，检查该包的包头，获取包的目的地址，启动内部的动态查找表转换成相应的输出端口，在输入与输出交叉处连通，把数据包直通到相应的端口，实现交换的功能。优点是：不需要存储，延迟非常小、交换非常快。缺点是：因为数据包内容并没有被以太网交换机保存下来，所以无法检查所传送的数据包是否有误，不能提供错误检测能力。由于没有缓存，不能将具有不同速率的输入、输出端口直接连通，而且容易丢包。
2、存储转发（store &amp; Forward） 存储转发方式是计算机网络领域应用最为广泛的方式。它把输入端口的数据包先存储起来，然后进行CRC(循环冗余码校验）检查，在对错误包处理后才取出数据包的目的地址，通常查找表转换成输出端口送出包。所以就会存在存储转发方式在数据处理时延大的缺点，优点就是它可以对进入交换机的数据包进行错误检测，有效地改善网络性能。最重要的是它可以支持不同速度的端口间的转换，保持高速端口与低速端口中间的协调工作。
3、碎片隔离（Fragment Free） 这是介于前两者之间的一种解决方案，它检查数据包的长度是否够64个字节，如果小于64个字节，那就说明这是个假包，则丢弃该包；如果大于64个字节，则发送该包。这种方式也不提供数据校验。它的数据处理速度比存储转发方式快，但是比直通式慢。
7、交换机分类 从广义上来看，交换机分为两种：广域网交换机和局域网交换机。广域网交换机主要应用与电信领域，提供通信信用的基础平台。而局域网交换机则是应用于局域网络，用于连接终端设备，如PC机及网络打印机等。
从传输介质和传输速度上可以分为以太网交换机、快速以太网交换机、前兆以太网交换机、FDDI交换机、ATM交换机和令牌环交换机等。
从规模应用上又可以分为企业级交换机、部门级交换机和工作组交换机等。
2、 路由器（Windows下叫默认网关，网关就是路由，路由就是网关） 1、路由器的概述 路由：router：跨越从源主机到目标主机的一个互联网络来转发数据包的过程。路由器是连接两个或多个网络的硬件设备，在网络间起着网关的作用，是读取每一个数据包中的地址然后决定如何传送的专用智能性的网络设备。它能够理解不同的协议，例如某个局域网使用的以太网协议，因特网使用的TCP/IP协议，这样的路由器可以分析各种不同类型网络传来的数据包的目的地址，把非TCP/IP网络的地址转换成TCP/IP地址，或者就相反的，再根据选定的路由算法把各个数据包按照最佳的路线传送到指定位置。所以路由器可以把非TCP/IP网络连接到因特网上。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/0ec99b297bd7f4ce83aba8e41ae61f76/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-14T19:29:19+08:00" />
<meta property="article:modified_time" content="2022-08-14T19:29:19+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">计算机网络知识之交换机、路由器、网关、MAC地址</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="5%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA-toc" style="margin-left:0px;"><a href="#5%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA" rel="nofollow">1、交换机</a></p> 
<p id="1%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E6%A6%82%E5%BF%B5" rel="nofollow">1、交换机的概念</a></p> 
<p id="2%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BD%9C%E7%94%A8-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BD%9C%E7%94%A8" rel="nofollow">2、交换机的作用</a></p> 
<p id="3%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">3、交换机的工作原理</a></p> 
<p id="4%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px;"><a href="#4%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8A%9F%E8%83%BD" rel="nofollow">4、交换机的功能</a></p> 
<p id="5%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%BA%94%E7%94%A8-toc" style="margin-left:40px;"><a href="#5%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%BA%94%E7%94%A8" rel="nofollow">5、交换机的应用</a></p> 
<p id="6%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%B8%89%E4%B8%AD%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F-toc" style="margin-left:40px;"><a href="#6%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%B8%89%E4%B8%AD%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F" rel="nofollow">6、交换机的三种交换方式</a></p> 
<p id="1%E3%80%81%E7%9B%B4%E9%80%9A%E5%BC%8F%EF%BC%88Cut%20Through%EF%BC%89-toc" style="margin-left:80px;"><a href="#1%E3%80%81%E7%9B%B4%E9%80%9A%E5%BC%8F%EF%BC%88Cut%20Through%EF%BC%89" rel="nofollow">1、直通式（Cut Through）</a></p> 
<p id="2%E3%80%81%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%EF%BC%88store%20%26%20Forward%EF%BC%89-toc" style="margin-left:80px;"><a href="#2%E3%80%81%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%EF%BC%88store%20%26%20Forward%EF%BC%89" rel="nofollow">2、存储转发（store &amp; Forward）</a></p> 
<p id="3%E3%80%81%E7%A2%8E%E7%89%87%E9%9A%94%E7%A6%BB%EF%BC%88Fragment%20Free%EF%BC%89-toc" style="margin-left:80px;"><a href="#3%E3%80%81%E7%A2%8E%E7%89%87%E9%9A%94%E7%A6%BB%EF%BC%88Fragment%20Free%EF%BC%89" rel="nofollow">3、碎片隔离（Fragment Free）</a></p> 
<p id="7%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%88%86%E7%B1%BB-toc" style="margin-left:40px;"><a href="#7%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%88%86%E7%B1%BB" rel="nofollow">7、交换机分类</a></p> 
<p id="6%E3%80%81%C2%A0%E8%B7%AF%E7%94%B1%E5%99%A8%EF%BC%88Windows%E4%B8%8B%E5%8F%AB%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3%EF%BC%8C%E7%BD%91%E5%85%B3%E5%B0%B1%E6%98%AF%E8%B7%AF%E7%94%B1%EF%BC%8C%E8%B7%AF%E7%94%B1%E5%B0%B1%E6%98%AF%E7%BD%91%E5%85%B3%EF%BC%89-toc" style="margin-left:0px;"><a href="#6%E3%80%81%C2%A0%E8%B7%AF%E7%94%B1%E5%99%A8%EF%BC%88Windows%E4%B8%8B%E5%8F%AB%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3%EF%BC%8C%E7%BD%91%E5%85%B3%E5%B0%B1%E6%98%AF%E8%B7%AF%E7%94%B1%EF%BC%8C%E8%B7%AF%E7%94%B1%E5%B0%B1%E6%98%AF%E7%BD%91%E5%85%B3%EF%BC%89" rel="nofollow">2、 路由器（Windows下叫默认网关，网关就是路由，路由就是网关）</a></p> 
<p id="1%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E6%A6%82%E8%BF%B0" rel="nofollow">1、路由器的概述</a></p> 
<p id="2%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8A%9F%E8%83%BD-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8A%9F%E8%83%BD" rel="nofollow">2、路由器的作用功能</a></p> 
<p id="3%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86-toc" style="margin-left:40px;"><a href="#3%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" rel="nofollow">3、路由器的工作原理</a></p> 
<p id="4%E3%80%81%E7%BD%91%E5%85%B3-toc" style="margin-left:0px;"><a href="#4%E3%80%81%E7%BD%91%E5%85%B3" rel="nofollow">3、网关</a></p> 
<p id="1%E3%80%81%E7%BD%91%E5%85%B3%E7%9A%84%E6%A6%82%E5%BF%B5-toc" style="margin-left:40px;"><a href="#1%E3%80%81%E7%BD%91%E5%85%B3%E7%9A%84%E6%A6%82%E5%BF%B5" rel="nofollow">1、网关的概念</a></p> 
<p id="8%E3%80%81MAC%E5%9C%B0%E5%9D%80-toc" style="margin-left:0px;"><a href="#8%E3%80%81MAC%E5%9C%B0%E5%9D%80" rel="nofollow">4、MAC地址</a></p> 
<p id="1%E3%80%81MAC%E5%9C%B0%E5%9D%80%E7%9A%84%E6%A6%82%E8%BF%B0-toc" style="margin-left:40px;"><a href="#1%E3%80%81MAC%E5%9C%B0%E5%9D%80%E7%9A%84%E6%A6%82%E8%BF%B0" rel="nofollow">1、MAC地址的概述</a></p> 
<p id="2%E3%80%81%E6%9F%A5%E7%9C%8BMAC%E5%9C%B0%E5%9D%80-toc" style="margin-left:40px;"><a href="#2%E3%80%81%E6%9F%A5%E7%9C%8BMAC%E5%9C%B0%E5%9D%80" rel="nofollow">2、查看MAC地址</a></p> 
<h2 id="5%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA">1、交换机</h2> 
<h3 id="1%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E6%A6%82%E5%BF%B5">1、交换机的概念</h3> 
<p>交换机（switch）是按照通信两端传输信息的需要，用人工或设备自动完成的方法，把要传输的信息送到符号要求的相应路由上的技术统称。广义的交换机switch就是一种通信系统中完成信息交换功能的设备。这个过程就是通过人工方式建立起来的交换。当然我们现在已经普及了程控交换机，交换的过程都是自动完成的。</p> 
<p><strong>交换机是一种在局域网中常用到的设备，它能实现相连计算机之间的高速数据交流。</strong>在同一时刻可以进行多个端口之间的数据传输。每一个端口都可以视为是独立的网段，连接在其他网络设备独自享有全部的带宽，无需同其他设备竞争使用。当节点A向节点D发送数据时，节点B可同时向节点C发送数据，而且这两个传输都享有网络的全部带宽，都有着自己的虚拟连接。</p> 
<p><strong>交换机是一种基于MAC地址识别，能完成封装转发数据包功能的网络设备。</strong>交换机可以“学习”MAC地址，并把其存放在内部地址表中，通过在数据帧的始发者和目标接收者之间建立临时的交换路径，使数据帧直接由源地址到达目的地址。</p> 
<p>交换机可以分为：</p> 
<ul><li>2层交换机：只是交换功能。</li><li>3层交换机：具有路由功能，可以当路由器使用</li><li>LVS和nginx：</li><li>4层负载均衡：传输层</li><li>7层负载均衡：应用层</li></ul> 
<h3 id="2%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%BD%9C%E7%94%A8">2、交换机的作用</h3> 
<p>本质意义上讲，交换是一个技术概念，即完成信号由设备入口到出口的转发。因此，只要是符合该定义的所有设备都可以被称为交换设备。“交换”是一个涵义广泛的词语，当它被用来描述数据网络第二层的设备时，实际指的是一个桥接设备，而当它被用来描述数据网络第三层的设备时，指的是一个路由设备。而以太网交换机实际是一个基于网桥技术的多端口第二层网络设备，它为数据帧从一个端口到另一个任意端口的转发提供了低时延、低开销的通路。</p> 
<p><strong>交换机的作用就是组建局域网。</strong>交换机内部核心处应该有一个交换矩阵，<strong>为任意两个端口之间的通信提供通路，或者是一个快速交换总线，以使由任意端口接收的数据帧从其他端送出。</strong>在实际的设备中，交换矩阵的功能往往是由专门的芯片（ASIC）完成的。</p> 
<h3 id="3%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">3、交换机的工作原理</h3> 
<p>交换机是工作在网络数据链路层，从物理划分网段的。</p> 
<p>交换机的工作原理就是：先学习后转发。交换机里面含有mac地址表，mac地址表存放在内存中。</p> 
<ul><li>交换机的学习原理：学习源mac地址写到mac地址表里，mac地址表就会存入内存中，停电就会失效。</li><li>mac地址表中存放的是：端口号、mac地址、vlan号（默认都为vlan1），mac地址表存入交换机中。</li><li>交换机的转发原理：根据目的mac转发。</li><li>如果目的mac地址在交换机的mac地址表里面没有，交换机就会复制帧给交换机的每个接口都转发一份（广播），来的那个接口不发。如果地址表里有目的mac地址（知道mac地址）就进行单播，不知道目的mac地址的时候会进行广播。</li><li>目的mac地址全是FF的帧就叫广播地址，收到的mac地址全是F的就进行广播行为。</li></ul> 
<p><strong>交换机的工作原理举例详细解说：</strong></p> 
<p><img alt="" height="217" src="https://images2.imgbox.com/ac/5b/np5Poo1e_o.png" width="322"></p> 
<p> 首先，<strong>交换机的工作原理可以分为两个特点：是先学习后转发。</strong>假设，一个交换机中连接了三台电脑，A电脑和B电脑进行连接通信，A电脑的mac地址是111，B电脑的是222，接下来，A电脑会把数据封装好，源mac地址填自己的，目的mac填222，接下来通过封装，封装到物理层，物理层通过网线送给交换机，交换机收到数据帧之后进行解封装，解封装的时候会先进行学习，先学习帧里面的源mac地址，然后看一下自己的mac地址表里面（交换机里面有个mac地址表）有没有源mac，如果没有就将源mac地址写到mac地址表里面去，并且知道它是哪个接口的（从哪里mac地址来对应哪个接口）；</p> 
<p>然后学习完之后再进行转发操作，然后看它的目的mac地址在mac地址表里面有没有，有的话直接转发到对应接口，没有的话进行广播，广播就是给交换机的每个接口都转发一份，来的那个接口不发，这样的话，所有的接在交换机上的电脑都会收到数据，收到数据的电脑在进行解封装的时候会看目的mac是不是自己的，如果目的mac是自己的，就会进行回复，如果不是自己的就不回复，直接扔掉；然后B电脑收到之后，它的mac地址就是222，就会给出回复，回复的时候会封装好，源mac也是222，目的mac是111，当这个数据包到达交换机的时候，交换机又会进行先学习，看源mac222在不在mac表里面，如果有就不学习，没有就写入mac表中去。</p> 
<p><strong>交换机与交换机之间需要接一根线：防止形成环路。</strong></p> 
<p>防范形成环路：物理上检查不要形成环路；交换机的系统启用STP协议。</p> 
<h3 id="4%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%8A%9F%E8%83%BD">4、交换机的功能</h3> 
<p>交换机的主要功能是：物理编址、网络拓扑结构、错误校验、帧序列以及流程、VLAN（虚拟局域网）、链路汇聚、防火墙。</p> 
<p>交换机除了能够连接同种类型的网络之外，还可以在不同类型的网络（如以太网和快速以太网）之间起到互连作用。一般来说，交换机的每个端口都用来连接一个独立的网段、但是有时为了提供更快的接入速度，我们可以把一些重要的网络计算机直接连接到交换机的端口上。这样，网络的关键服务器和重要用户就可以拥有更快的接入速度，支持更大的信息流量。</p> 
<h3 id="5%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%BA%94%E7%94%A8">5、交换机的应用</h3> 
<p>作为局域网的主要连接设备，以太网交换机成为应用普及最快的网络设备之一。随着交换技术的不断发展，以太网交换机的价格急剧下降，交换到桌面已是大势所趋。</p> 
<p>如果你的以太网上拥有大量的用户、繁忙的应用程序和各式各样的服务器，而且你还没有对网络结构做出任何调整，那么整个网络的性能可能会非常低。解决办法之一就是在以太网上添加一个10/100Mbps的交换机，它不仅可以处理10Mbps的常规以太网数据流，而且还可以支持100Mbps的快速以太网连接。</p> 
<p>如果网络的利用率超过了40%，并且碰撞率大于10%，交换机可以帮你解决一点问题。带有100Mbps快速以太网和10Mbps以太网端口的交换机可以全双工方式运行，可以建立起专用的20Mbps到200Mbps连接。</p> 
<p>在不同网络环境下交换机的作用各不相同，在同一网络环境下添加新的交换机和增加现有的交换端口对网络的影响也不相同，<strong>使用交换机的目的就是尽可能的减少和过滤网络中的数据流量。</strong>所以如果网络中的某台交换机由于安装位置设置不当，几乎需要转发接收到的所有数据包的话，交换机就无法发挥它优化网络性能的作用，反而会降低了数据的传输速度，增加网络延迟。</p> 
<h3 id="6%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E4%B8%89%E4%B8%AD%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F">6、交换机的三种交换方式</h3> 
<h4 id="1%E3%80%81%E7%9B%B4%E9%80%9A%E5%BC%8F%EF%BC%88Cut%20Through%EF%BC%89">1、直通式（Cut Through）</h4> 
<p>直通的方式的以太网可以理解为在各端口之间是纵横交叉的线路矩阵电话交换机。它在输入端口检测到一个数据包时，检查该包的包头，获取包的目的地址，启动内部的动态查找表转换成相应的输出端口，在输入与输出交叉处连通，把数据包直通到相应的端口，实现交换的功能。优点是：不需要存储，延迟非常小、交换非常快。缺点是：因为数据包内容并没有被以太网交换机保存下来，所以无法检查所传送的数据包是否有误，不能提供错误检测能力。由于没有缓存，不能将具有不同速率的输入、输出端口直接连通，而且容易丢包。</p> 
<h4 id="2%E3%80%81%E5%AD%98%E5%82%A8%E8%BD%AC%E5%8F%91%EF%BC%88store%20%26%20Forward%EF%BC%89">2、存储转发（store &amp; Forward）</h4> 
<p>存储转发方式是计算机网络领域应用最为广泛的方式。它把输入端口的数据包先存储起来，然后进行CRC(循环冗余码校验）检查，在对错误包处理后才取出数据包的目的地址，通常查找表转换成输出端口送出包。所以就会存在存储转发方式在数据处理时延大的缺点，优点就是它可以对进入交换机的数据包进行错误检测，有效地改善网络性能。最重要的是它可以支持不同速度的端口间的转换，保持高速端口与低速端口中间的协调工作。</p> 
<h4 id="3%E3%80%81%E7%A2%8E%E7%89%87%E9%9A%94%E7%A6%BB%EF%BC%88Fragment%20Free%EF%BC%89">3、碎片隔离（Fragment Free）</h4> 
<p>这是介于前两者之间的一种解决方案，它检查数据包的长度是否够64个字节，如果小于64个字节，那就说明这是个假包，则丢弃该包；如果大于64个字节，则发送该包。这种方式也不提供数据校验。它的数据处理速度比存储转发方式快，但是比直通式慢。</p> 
<h3 id="7%E3%80%81%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%88%86%E7%B1%BB">7、交换机分类</h3> 
<p>从广义上来看，交换机分为两种：广域网交换机和局域网交换机。广域网交换机主要应用与电信领域，提供通信信用的基础平台。而局域网交换机则是应用于局域网络，用于连接终端设备，如PC机及网络打印机等。</p> 
<p>从传输介质和传输速度上可以分为以太网交换机、快速以太网交换机、前兆以太网交换机、FDDI交换机、ATM交换机和令牌环交换机等。</p> 
<p>从规模应用上又可以分为企业级交换机、部门级交换机和工作组交换机等。</p> 
<h2 id="6%E3%80%81%C2%A0%E8%B7%AF%E7%94%B1%E5%99%A8%EF%BC%88Windows%E4%B8%8B%E5%8F%AB%E9%BB%98%E8%AE%A4%E7%BD%91%E5%85%B3%EF%BC%8C%E7%BD%91%E5%85%B3%E5%B0%B1%E6%98%AF%E8%B7%AF%E7%94%B1%EF%BC%8C%E8%B7%AF%E7%94%B1%E5%B0%B1%E6%98%AF%E7%BD%91%E5%85%B3%EF%BC%89">2、 <strong>路由器（Windows下叫默认网关，网关就是路由，路由就是网关）</strong></h2> 
<h3 id="1%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E6%A6%82%E8%BF%B0"><strong>1、路由器的概述</strong></h3> 
<p>路由：router：跨越从源主机到目标主机的一个互联网络来转发数据包的过程。<strong>路由器是连接两个或多个网络的硬件设备，在网络间起着网关的作用，是读取每一个数据包中的地址然后决定如何传送的专用智能性的网络设备</strong>。它能够理解不同的协议，例如某个局域网使用的以太网协议，因特网使用的TCP/IP协议，这样的路由器可以分析各种不同类型网络传来的数据包的目的地址，把非TCP/IP网络的地址转换成TCP/IP地址，或者就相反的，再根据选定的路由算法把各个数据包按照最佳的路线传送到指定位置。所以路由器可以把非TCP/IP网络连接到因特网上。</p> 
<p><strong>网络中的设备相互通信主要是用它们的ip地址，路由器只能根据具体的ip地址来转发数据</strong>。ip地址由网络地址和主机地址两个部分组成。在Internet中采用的是由子网掩码来确定网络地址和主机地址。计算机之间的通信只能在具有相同网段地址的ip地址之间进行，如果想要与不同网段的计算机进行通信。路由器的多个端口可以连接多个网段，每个端口的ip地址的网络地址都必须与所连接的网段的地址一致。不同端口它的网络地址是不同的，所对应的网段也是不同的，这样才能使得各个网段中的主机通过自己网段的ip地址把数据发送到路由器上。</p> 
<p>路由器分为本地路由器和<a href="https://baike.baidu.com/item/%E8%BF%9C%E7%A8%8B%E8%B7%AF%E7%94%B1%E5%99%A8/2707581" rel="nofollow" title="远程路由器">远程路由器</a>，本地路由器是用来连接网络传输介质的，如<a href="https://baike.baidu.com/item/%E5%85%89%E7%BA%A4/171632" rel="nofollow" title="光纤">光纤</a>、<a href="https://baike.baidu.com/item/%E5%90%8C%E8%BD%B4%E7%94%B5%E7%BC%86/487866" rel="nofollow" title="同轴电缆">同轴电缆</a>、<a href="https://baike.baidu.com/item/%E5%8F%8C%E7%BB%9E%E7%BA%BF/487416" rel="nofollow" title="双绞线">双绞线</a>；远程路由器是用来连接远程传输介质，并要求相应的设备，如电话线要配<a href="https://baike.baidu.com/item/%E8%B0%83%E5%88%B6%E8%A7%A3%E8%B0%83%E5%99%A8/103486" rel="nofollow" title="调制解调器">调制解调器</a>，无线要通过无线接收机、发射机。</p> 
<p>路由器里有一个路由表：存放路由信息。路由表存放在内存里面，停电就会丢失，也可以保存，会保存在某个文件里面，开机就会加载文件。</p> 
<h3 id="2%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E4%BD%9C%E7%94%A8%E5%8A%9F%E8%83%BD">2、路由器的作用功能</h3> 
<p>路由器最主要的功能可以理解为实现信息的转送<strong>。实现跨网段通信</strong>。这个过程我们称之为寻址过程。因为在路由器处在不同的网络之间，但是并不一定是信息的最终接收地址。所以在路由器中，通常会有一张路由表，根据传送的信息的最终地址，寻找下一跳转发地址，也就是哪个网络地址。就比如说是快递公司发送快递，快递并不是瞬间就到达最终目的地，而是通过不同分站的分拣，不断地接近最终的地址，而路由器的寻址过程就类似这个原理。<strong>通过最终地址，在路由表中进行匹配，通过算法确定下一转发地址。这个地址可能是中间地址，也可能是最终的到达地址。</strong></p> 
<p><strong>路由器的功能就是将不同的子网之间的数据进行传递，具体功能为：</strong></p> 
<ul><li>实现IP、TCP、UDP、ICMP等网络的互连。</li><li>对数据进行处理。收发数据包，具有对数据进行的分组过滤、复用、加密、压缩以及防火墙等各项功能。</li><li>依据路由表的信息，对数据包下一传输目的地进行选择。</li><li>进行外部网关协议和其他自治域之间拓扑信息的交换。</li><li>实现网络管理和系统支持功能。</li></ul> 
<p><strong>路由器连接不同的网络</strong>，在过滤网络流量角度看，路由器使用专门的软件协议从逻辑上对整个网络进行划分。比如一台支持ip协议的路由器可以把网络划分成多个子网段，只有指向特殊ip地址的网络流量才可以通过路由器。对于每一个接收到的数据包，路由器都会重新计算其校验值，并写入新的物理地址。所以使用路由器转发和过滤数据的速度就会比只需要查看数据包物理地址的交换机慢。但是，如果对于结构复杂的网络，使用路由器可以提高网络的整体效率。路由器的另外一个明显的优势就是可以自动过滤网络广播。总的来说，在网络中，添加路由器的整个安装过程要比即插即用的交换机复杂很多。</p> 
<p><strong>路由器实现信息传输。</strong>路由器的主要工作就是为经过路由器的每个数据帧寻找一条最佳传输路由，并将该数据有效地传送到目的地点，为了完成这项工作，在路由器中保存着各种传输路径的相关数据——<a href="https://baike.baidu.com/item/%E8%B7%AF%E5%BE%84%E8%A1%A8/1418593" rel="nofollow" title="路由表">路由表</a>（Routing Table），供路由选择时使用。路径表中保存着子网的标志信息、网上路由器的个数和下一个路由器的名字等内容。路由表可以是由系统管理员固定设置好的。</p> 
<p><strong>路由表里的路由类型：</strong></p> 
<p><strong>直连网段：</strong></p> 
<p>1、直连路由：</p> 
<ul><li> <p>第一个条件：必须配置IP地址</p> </li><li> <p>第2个条件：接口必须激活，链路是up directory route</p> </li></ul> 
<p><strong>非直连网段：</strong></p> 
<p>2、静态路由:需要管理员（人）添加的，而且是单向的。里面含有下一跳路由地址。</p> 
<ul><li>例如：ip route add 192.168.1.0/24 via 192.168.2.1 dev ens33</li><li>ip route 是路由管理的命令 ；via表示经过谁；add表示添加；via 192.168.2.1表示下一跳地址为192.168.2.1；dev ens33 从ens33接口出去。</li></ul> 
<p>3、默认路由：特殊的静态路由，在pc机里面添加网关，就是做配置，就是配置一条默认路由。</p> 
<p>当路由器在路由表中找不到目标网络的路由条目时，路由器把请求转发到默认路由接口。不能直连的都需要加默认路由。</p> 
<ul><li>默认路由：ip route add default 192.168.1.0/24 via 192.168.2.1 dev ens33。default；默认</li></ul> 
<p>4、动态路由：路由器之间互相学习，自动学习，不需要去配置路由条目，--比较大的网络。</p> 
<p>了解：rip协议、ospf协议、bgp协议。rip最多支持15跳，适合比较小的网络。ospf支持大型的网络。适用于大规模网络。</p> 
<p>路由在查找路由表的时候会选择优先级：</p> 
<p>1、直连路由（*****）</p> 
<p>2、静态路由（****）</p> 
<p>3、动态路由（***）</p> 
<p>4、默认路由（*）</p> 
<p>不可以走直连的就添加静态路由。一般是添加默认路由，是因为添加很多个静态路由很麻烦，就直接都给默认路由走。</p> 
<p><a href="https://www.cnblogs.com/liufuyang/p/11946558.html" rel="nofollow" title="静态路由和动态路由的区别">静态路由和动态路由的区别</a>：静态路由和动态路由的区别：静态路由一般适用于比较简单的网络；动态态路由应用在复杂的网络环境。</p> 
<h3 id="3%E3%80%81%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">3、路由器的工作原理</h3> 
<p><img alt="" height="248" src="https://images2.imgbox.com/9e/b9/lA2D6HoG_o.png" width="337"></p> 
<p><strong>路由器工作原理</strong>：就是根据路由表做转发，默认情况下路由器在转发数据的时候，不修改ip包里的源ip和目的ip，但是会修改帧里的源mac和目的mac，路由表里有目的网段就转发，没有就丢弃数据。一条路由信息简称为一个路由条目。路由表根据路由条目转发。</p> 
<p><strong>路由器工作原理举例详解：</strong>主机1.1要发送数据到主机4.1，路由器收到数据之后查看数据包中的目的地址为4.1，查找路由表。路由器A根据路由表转发数据到S0接口中，路由器B接收到数据包之后，查看数据包的目的地址，并查找路由表；路由表B根据路由表转发数据到E0口，主机4.1接收到数据包。</p> 
<h2 id="4%E3%80%81%E7%BD%91%E5%85%B3">3、网关</h2> 
<h3 id="1%E3%80%81%E7%BD%91%E5%85%B3%E7%9A%84%E6%A6%82%E5%BF%B5"><strong>1、网关的概念</strong></h3> 
<p><strong>计算机的网关（Gateway）</strong>就是到其他网段的出口，也就是路由器接口IP地址。路由器接口使用的IP地址可以是本网段中任何一个地址，不过通常使用该网段的第一个可用的地址或最后一个可用的地址，这是为了尽可能避免和本网段中的主机地址冲突。</p> 
<p>例如一个拓扑图：</p> 
<p>① ：A与B，C与D，都可以直接相互通信（都是属于各自同一网段，不用经过路由器），</p> 
<p>② ：但是A与C，A与D，B与C，B与D它们之间不属于同一网段。</p> 
<p>所以它们通信是要经过本地网关，然后路由器根据对方IP地址，在路由表中查找恰好有匹配到对方IP地址的直连路由，于是从另一边网关接口转发出去实现互连。<img alt="" height="249" src="https://images2.imgbox.com/c1/02/paYQqGDU_o.png" width="472"></p> 
<p id="">网关是在采用不同体系结构或协议的网络之间进行互通时，用于提供协议转换、路由选择、数据交换等网络兼容功能的设施。网关在传输层上以实现网络互连，是最复杂的网络互连设备，仅用于两个高层协议不同的网络互连。网关既可以用于广域网互连，也可以用于局域网互连。网关是一种充当转换重任的计算机系统或设备。在使用不同的通信协议、数据格式或语言，甚至体系结构完全不同的两种系统之间，网关是一个翻译器。与网桥只是简单地传达信息不同，网关对收到的信息要重新打包，以适应目的系统的需求。同时，网关也可以提供过滤和安全功能。大多数网关运行在OSI七层协议的顶层--应用层。</p> 
<p>一般来说，路由器的LAN接口的IP地址就是你所在局域网中的网关。当你所在的局域网的计算机需要和其他局域网中的计算机，或者需要访问互联网的时候，你所在局域网的计算机会先把数据包传输到网关（路由器的LAN接口），然后再由网关进行转发。</p> 
<p>因为路由器的LAN接口就是你所在网络的网关，你的电脑要上网，数据包必须要经过网关转发出去。目前家用路由器一般使用192.168.1.1和192.168.0.1作为LAN接口的地址，这两个地址也是最常见的网关地址。</p> 
<p>作为一个普通用户，只需要记住，手动配置ip地址的时候，默认网关的地址就是路由器的LAN接口的地址，也就是你路由器的管理页面登录地址。如果你选择自动获取ip地址，那么久不需要关注默认网关地址了，但路由器的DHCP服务器分配下来的默认网关也一定是路由器的LAN接口的ip地址。</p> 
<h2 id="8%E3%80%81MAC%E5%9C%B0%E5%9D%80">4、MAC地址</h2> 
<h3 id="1%E3%80%81MAC%E5%9C%B0%E5%9D%80%E7%9A%84%E6%A6%82%E8%BF%B0">1、MAC地址的概述</h3> 
<p>mac地址全称是Media Access Control，即媒体访问控制。也被称为计算机的物理地址或硬件地址。在网络OSI模型中，MAC地址由数据链路层负责管理，因此每一个主机都会有一个MAC地址，而且是唯一的，而且MAC地址由计算机的网卡决定，它是固定的，一般不会被更改。</p> 
<p>MAC地址是计算机的物理地址，它一般由网卡设备决定，用来表示互联网上不同站点的相关的标识符，而且每一台计算机都拥有不同的物理地址。MAC地址由十六进制来表示，长度大小是一共是六个字节，前三个字节是由IEEE的注册管理机构RA机型分配的，后三个字节则是由各个厂家自行指派，后三个字节则是由各个厂家自行指派，因此一个地址块能够生成2的24幂次方不同的地址，网卡的物理地址用来标识计算机访问网络的物理位置，用于区别联网设备的不同位置。</p> 
<h3 id="2%E3%80%81%E6%9F%A5%E7%9C%8BMAC%E5%9C%B0%E5%9D%80">2、查看MAC地址</h3> 
<p>在Windows中查看MAC地址：</p> 
<ul><li>方法一：在命令提示符中输入MAC地址的查询命令"ipconfig /all"，主要内容就是物理地址的数值和ipv6的地址、ipv4地址和子网掩码的数值。</li><li>方法二：使用网络的方法来进行查询。即点击控制面板--进入网络共享中心--选择更改适配器设置--双击以太网连接--详细信息，此时我们就能够看到计算机的MAC物理地址了。</li><li>方法三：路由器的设置主界面进行操作。首先使用电脑连接路由器的无线网络，然后打开计算机的浏览器--输入“192.168.1.1”--点击确定访问，输入路由器界面的登录名和登录密码，默认的密码和用户名都是“admin”---无线设置，找到“ip和mac绑定”--apr映射，查看计算机本地的MAC地址信息--也能查看到IP地址信息</li></ul> 
<p>在Linux中查看MAC地址：</p> 
<ul><li><strong><code>ifconfig -a：</code>其中 HWaddr字段就是MAC地址，这是最常用的方式。</strong></li><li><strong><code>cat /etc/sysconfig/network-scripts/ifcfg-ens33</code>（CentOS的配置文件）</strong></li><li><strong><code>cat /proc/net/arp：</code>查看连接到本机的远端IP的MAC地址。</strong>不能看到本机的MAC，只能看到远程连接，服务端用的比较多。</li></ul> 
<p>以上方法都能够帮助我们查看自己本机的MAC地址信息，也能够帮助我们查看到IP地址的信息。当然一般情况下MAC地址是无法更改的，但只要你更改了无线网卡，那么计算机的MAC地址就变了。 </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/81c30903e6aa28c1c1c21d8bb24764ba/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Maven pom.xml ＜packaging＞pom＜/packaging＞ 引发的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/031e2e406b15af79e3883318d4002315/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">golang 学习笔记(8)-gorm实现删除功能</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>