<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>kubenetes 1.16.0安装kubernetes-dashboard v2.0.0-beta4 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="kubenetes 1.16.0安装kubernetes-dashboard v2.0.0-beta4" />
<meta property="og:description" content="kubenetes github ：https://github.com/kubernetes/dashboard/releases
kubenetes官网：https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/
本人安装kubenetes 1.16.0，刚开始使用kubernetes-dashboard v1.10.1安装后，首页访问接口报错404，怀疑是版本不兼容问题。后面发现kubernetes-dashboard最新版本已经是v2.0.0-beta4。并且kubenetes官方文档安装dashboard的描述，指明部署方法
kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml
所以kubenetes v1.16.0 应该使用新版dashboard ui才兼容
查看github，用到的镜像有两个dashboard:v2.0.0-beta4、metrics-scraper:v1.0.1
kubernetesui/dashboard:v2.0.0-beta4 kubernetesui/metrics-scraper:v1.0.1 先拉取镜像，本人使用的docker版本19.03.2
docker pull kubernetesui/dashboard:v2.0.0-beta4 kubernetesui/metrics-scraper:v1.0.1 拉成功后
获取yaml文件
https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml 修改recommended.yaml文件，为了方便访问，修改kubernetes-dashboard的Service定义，指定Service的type类型为NodeType，指定nodePort端口
kind: Service apiVersion: v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard spec: type: NodePort # 改成NodePort ports: - port: 443 targetPort: 8443 nodePort: 31001 # 指定nodePort端口 selector: k8s-app: kubernetes-dashboard 注：dashboard-metrics-scraper的Service不需要修改 从配置文件可以看到，它还创建了ServiceAccount帐号
apiVersion: v1 kind: ServiceAccount metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard 还创建了ClusterRoleBinding" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a33e581efdbc2e3c250c8c38d31ce58e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-10-06T15:39:28+08:00" />
<meta property="article:modified_time" content="2019-10-06T15:39:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">kubenetes 1.16.0安装kubernetes-dashboard v2.0.0-beta4</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>kubenetes github ：<a href="https://github.com/kubernetes/dashboard/releases">https://github.com/kubernetes/dashboard/releases</a></p> 
<p>kubenetes官网：<a href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" rel="nofollow">https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/</a></p> 
<p>本人安装kubenetes 1.16.0，刚开始使用kubernetes-dashboard v1.10.1安装后，首页访问接口报错404，怀疑是版本不兼容问题。后面发现kubernetes-dashboard最新版本已经是v2.0.0-beta4。并且kubenetes官方文档安装dashboard的描述，指明部署方法</p> 
<pre class="has"><code>kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml</code></pre> 
<p><img alt="" class="has" height="620" src="https://images2.imgbox.com/ba/ee/6UhvVV9s_o.png" width="1200"></p> 
<p><a href="https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml" rel="nofollow">https://raw.githubusercontent.com/kubernetes/dashboard/<span style="color:#f33b45;">v2.0.0-beta4</span>/aio/deploy/recommended.yaml</a></p> 
<p>所以kubenetes v1.16.0 应该使用新版dashboard ui才兼容</p> 
<p> </p> 
<p>查看github，用到的镜像有两个dashboard:v2.0.0-beta4、metrics-scraper:v1.0.1</p> 
<pre class="has"><code>kubernetesui/dashboard:v2.0.0-beta4</code></pre> 
<pre class="has"><code>kubernetesui/metrics-scraper:v1.0.1</code></pre> 
<p><strong>先拉取镜像，本人使用的docker版本19.03.2</strong></p> 
<pre class="has"><code>docker pull kubernetesui/dashboard:v2.0.0-beta4</code></pre> 
<pre class="has"><code>kubernetesui/metrics-scraper:v1.0.1</code></pre> 
<p>拉成功后</p> 
<p><strong>获取yaml文件</strong></p> 
<pre class="has"><code>https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta4/aio/deploy/recommended.yaml</code></pre> 
<p>修改recommended.yaml文件，为了方便访问，修改kubernetes-dashboard的Service定义，指定Service的type类型为NodeType，指定nodePort端口</p> 
<pre class="has"><code>kind: Service
apiVersion: v1
metadata:
  labels:
    k8s-app: kubernetes-dashboard
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard
spec:
  type: NodePort # 改成NodePort
  ports:
    - port: 443
      targetPort: 8443
      nodePort: 31001 # 指定nodePort端口
  selector:
    k8s-app: kubernetes-dashboard
</code></pre> 
<pre class="has"><code>注：dashboard-metrics-scraper的Service不需要修改</code></pre> 
<p>从配置文件可以看到，它还创建了ServiceAccount帐号</p> 
<pre class="has"><code>apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    k8s-app: kubernetes-dashboard
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard</code></pre> 
<p>还创建了ClusterRoleBinding</p> 
<pre class="has"><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kubernetes-dashboard
  namespace: kubernetes-dashboard
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: kubernetes-dashboard
subjects:
  - kind: ServiceAccount
    name: kubernetes-dashboard
    namespace: kubernetes-dashboard
</code></pre> 
<p>查看token</p> 
<pre class="has"><code>kubectl describe secret/$(kubectl get secret -n kube-system |grep admin|awk '{print $1}') -n kube-system</code></pre> 
<pre class="has"><code>Name:         dashboard-admin-token-kzb4v
Namespace:    kube-system
Labels:       &lt;none&gt;
Annotations:  kubernetes.io/service-account.name: dashboard-admin
              kubernetes.io/service-account.uid: 71a2e37c-6fee-4921-ae7a-34965e6a75d8

Type:  kubernetes.io/service-account-token

Data
====
ca.crt:     1025 bytes
namespace:  11 bytes
token:      eyJhbGciOiJSUzI1NiIsImtpZCI6InZrcFpzWWozWXQwTURqcVpEZDdwcklVVTREbGNBMXFGUnRNZDVyYWhlT3cifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJkYXNoYm9hcmQtYWRtaW4tdG9rZW4ta3piNHYiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGFzaGJvYXJkLWFkbWluIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiNzFhMmUzN2MtNmZlZS00OTIxLWFlN2EtMzQ5NjVlNmE3NWQ4Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmRhc2hib2FyZC1hZG1pbiJ9.TbykeQK204jUz-A88qw34KwFhLsfwkqqkv4hyUfI72XdmoAU1HCj0-_pppRL4p3HWpiNkUiKR4tzZ34YFHVGVIpGLRIW0QAPQ6eEMf1OdS3KShQQx-tOo-2kESZ8hg_mY66uq0sFRXMAd6AiOhzSF-vunMpgxlE9nH5_eE3RHQ6vEXSVFuH4x0eLc4bAu2PwPObdJ-ngdEr-HysrQn2oXM4oXaHZGR3fiyXZdmVFeDqkmsEXuGpTtgTzHwX5WRd4ZyDJsds6LDRDpa654gFmbX_RV4Wr64ankK2_vgM1GDtvy8m4ys17TieBZoRPfPBTgaReN7RObqNc1qlxQHyMsg
</code></pre> 
<p>把token复制到页面上登录，前面指定的端口是31001，网址为<a href="https://192.168.200.207:31001" rel="nofollow">https://192.168.200.207:31001</a></p> 
<p><img alt="" class="has" height="729" src="https://images2.imgbox.com/f4/55/xphynixL_o.png" width="1200">选择token方式，输入token，sign in</p> 
<p><img alt="" class="has" height="812" src="https://images2.imgbox.com/35/df/8shuAw7x_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b7745cbbbf07d78f47fd568c6a326a1d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C&#43;&#43;输入文件流ifstream用法详解[转载]</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c0111e1e87eff3893f19b23325bcb732/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">No module named cv2 报错处理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>