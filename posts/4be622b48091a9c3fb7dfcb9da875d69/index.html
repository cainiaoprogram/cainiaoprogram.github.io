<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java框架 | Spring和MyBatis中的#与$ - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java框架 | Spring和MyBatis中的#与$" />
<meta property="og:description" content="为什么要有#和$? Spring和MyBatis的#和$都是为了解决配置文件中的属性值问题而引入的。
在Spring中，$符号表示属性占位符，可以将属性文件中的属性值替换到Spring配置文件中的属性值中；而#{}符号则表示SpEL表达式占位符，可以通过表达式来计算属性值。
在MyBatis中，#符号表示参数占位符，可以防止SQL注入攻击；而$符号则表示文本替换符，直接将变量替换到SQL语句中，可能存在SQL注入风险。
在Spring和MyBatis中的#和$有什么相同点和不同点？ 共同点：
在Spring和MyBatis中，#和$都可以用于参数占位符，用于将参数值动态地传递给SQL语句。 区别点：
在Spring中 #是SpEL表达式占位符，可以通过表达式来计算属性值；$是属性占位符，可以将属性文件中的属性值替换到Spring配置文件中的属性值中。在MyBatis中 #是预编译处理，可以有效防止SQL注入攻击；$是字符串替换，不具备防止SQL注入攻击的功能。在MyBatis中，#通常用于替换参数，$通常用于替换列名或表名。 在Spring中SpEL表达式有哪些？最重要的是哪些？ Spring Expression Language（SpEL）是Spring框架中的一种表达式语言，可以在运行时计算表达式的值。它支持在Spring框架中访问和操作对象图，包括Spring bean和属性文件中的属性。
SpEL表达式可以通过以下方式使用：
字面值：包括字符串，数字，布尔值和null引用对象：包括Spring bean和静态类的引用属性访问：访问对象的属性方法调用：调用对象的方法运算符：支持算术，比较和逻辑运算符表达式列表：支持在表达式中使用列表，集合和数组正则表达式：支持正则表达式赋值：支持将值赋给对象的属性 其中最重要的SpEL表达式是引用对象和属性访问。
它们使得我们可以轻松地在Spring框架中访问和操作对象图，而不需要编写复杂的Java代码。
为什么MyBatis中的#能够防止恶意的注入攻击？ 在MyBatis中使用#可以防止SQL注入攻击的原因是，#号会将传入的参数视为一个完整的值，并对这个值进行预编译处理，最终在将其绑定到SQL语句中时，会将其转换成一个占位符，然后再与SQL语句进行拼接。因此，无论传入的参数是什么，都不会对SQL语句造成影响。
举个例子：#{name}传入的是&#39;admin&#39; or 1=1&#39;，其最终会转换成什么传入SQL语句呢？
传入入的值为&#39;admin&#39; or 1=1&#39;，在使用#时，MyBatis会将其转义为&#39;admin\&#39; or 1=1&#39;；
传入SQL语句后，数据库会将其视为一个普通的字符串，而不会将or 1=1解析成一个条件语句。
因此，使用#可以有效地防止SQL注入攻击。
配置文件中使用的#与占位符时使用有什么区别？ MyBatis配置文件中，如果您看到类似${...}的语法，那么它与Spring配置文件中的${...}语法具有相同的目的：从外部属性文件中引用属性值。这里的$符号用于从属性文件中获取配置值。请注意，这与MyBatis在SQL映射文件中使用#{...}和${...}作为参数占位符的语法是不同的。
在MyBatis配置文件（mybatis-config.xml）中，您可以使用${...}语法引用外部属性文件中的值
&lt;dataSource type=&#34;POOLED&#34;&gt; &lt;property name=&#34;driver&#34; value=&#34;${db.driverClassName}&#34; /&gt; &lt;property name=&#34;url&#34; value=&#34;${db.url}&#34; /&gt; &lt;property name=&#34;username&#34; value=&#34;${db.username}&#34; /&gt; &lt;property name=&#34;password&#34; value=&#34;${db.password}&#34; /&gt; &lt;/dataSource&gt; 这个示例中的${db.driverClassName}、${db.url}、${db.username}和${db.password}用于从外部属性文件中获取数据库配置信息。这种方法允许您在不修改应用程序代码的情况下轻松更改数据库配置。
请注意，这里的$与MyBatis中的#{...}和$参数占位符是不同的。在MyBatis SQL映射文件中，#{...}用于传递预编译参数，而${...}用于直接插入SQL参数。
总结 在MyBatis中，尽量使用#解决配置文件中的属性值问题，因为其能防止恶意注入攻击；但对动态拼接SQL语句时，可能需要使用$符号进行占位符替换。
在Spring中，$使用简单方便，而#可以进行更复杂的运算和处理。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4be622b48091a9c3fb7dfcb9da875d69/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-20T20:52:17+08:00" />
<meta property="article:modified_time" content="2023-03-20T20:52:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java框架 | Spring和MyBatis中的#与$</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h3>为什么要有#和$?</h3> 
<p>Spring和MyBatis的#和$都是为了解决配置文件中的属性值问题而引入的。</p> 
<p>在Spring中，$符号表示属性占位符，可以将属性文件中的属性值替换到Spring配置文件中的属性值中；而#{}符号则表示SpEL表达式占位符，可以通过表达式来计算属性值。</p> 
<p>在MyBatis中，#符号表示参数占位符，可以防止SQL注入攻击；而$符号则表示文本替换符，直接将变量替换到SQL语句中，可能存在SQL注入风险。</p> 
<h3>在Spring和MyBatis中的#和$有什么相同点和不同点？</h3> 
<p>共同点：</p> 
<ul><li>在Spring和MyBatis中，#和$都可以用于参数占位符，用于将参数值动态地传递给SQL语句。</li></ul> 
<p>区别点：</p> 
<ul><li>在Spring中 
  <ul><li>#是SpEL表达式占位符，可以通过表达式来计算属性值；</li><li>$是属性占位符，可以将属性文件中的属性值替换到Spring配置文件中的属性值中。</li></ul></li><li>在MyBatis中 
  <ul><li>#是预编译处理，可以有效防止SQL注入攻击；</li><li>$是字符串替换，不具备防止SQL注入攻击的功能。</li><li>在MyBatis中，#通常用于替换参数，$通常用于替换列名或表名。</li></ul></li></ul> 
<h3>在Spring中SpEL表达式有哪些？最重要的是哪些？</h3> 
<p>Spring Expression Language（SpEL）是Spring框架中的一种表达式语言，可以在运行时计算表达式的值。它支持在Spring框架中访问和操作对象图，包括Spring bean和属性文件中的属性。</p> 
<p>SpEL表达式可以通过以下方式使用：</p> 
<ol><li>字面值：包括字符串，数字，布尔值和null</li><li>引用对象：包括Spring bean和静态类的引用</li><li>属性访问：访问对象的属性</li><li>方法调用：调用对象的方法</li><li>运算符：支持算术，比较和逻辑运算符</li><li>表达式列表：支持在表达式中使用列表，集合和数组</li><li>正则表达式：支持正则表达式</li><li>赋值：支持将值赋给对象的属性</li></ol> 
<p>其中最重要的SpEL表达式是引用对象和属性访问。</p> 
<p>它们使得我们可以轻松地在Spring框架中访问和操作对象图，而不需要编写复杂的Java代码。</p> 
<h3>为什么MyBatis中的#能够防止恶意的注入攻击？</h3> 
<p>在MyBatis中使用#可以防止SQL注入攻击的原因是，#号会将传入的参数视为一个完整的值，并对这个值进行预编译处理，最终在将其绑定到SQL语句中时，会将其转换成一个占位符，然后再与SQL语句进行拼接。因此，无论传入的参数是什么，都不会对SQL语句造成影响。</p> 
<p>举个例子：#{name}传入的是'admin' or 1=1'，其最终会转换成什么传入SQL语句呢？</p> 
<p>传入入的值为<code>'admin' or 1=1'</code>，在使用<code>#</code>时，MyBatis会将其转义为<code>'admin\' or 1=1'；</code></p> 
<p>传入SQL语句后，数据库会将其视为一个普通的字符串，而不会将<code>or 1=1</code>解析成一个条件语句。</p> 
<p>因此，使用<code>#</code>可以有效地防止SQL注入攻击。</p> 
<h3>配置文件中使用的#与占位符时使用有什么区别？</h3> 
<p>MyBatis配置文件中，如果您看到类似<code>${...}</code>的语法，那么它与Spring配置文件中的<code>${...}</code>语法具有相同的目的：从外部属性文件中引用属性值。这里的<code>$</code>符号用于从属性文件中获取配置值。请注意，这与MyBatis在SQL映射文件中使用<code>#{...}</code>和<code>${...}</code>作为参数占位符的语法是不同的。</p> 
<p>在MyBatis配置文件（<code>mybatis-config.xml</code>）中，您可以使用<code>${...}</code>语法引用外部属性文件中的值</p> 
<pre><code class="language-XML">&lt;dataSource type="POOLED"&gt;
  &lt;property name="driver" value="${db.driverClassName}" /&gt;
  &lt;property name="url" value="${db.url}" /&gt;
  &lt;property name="username" value="${db.username}" /&gt;
  &lt;property name="password" value="${db.password}" /&gt;
&lt;/dataSource&gt;
</code></pre> 
<p>这个示例中的<code>${db.driverClassName}</code>、<code>${db.url}</code>、<code>${db.username}</code>和<code>${db.password}</code>用于从外部属性文件中获取数据库配置信息。这种方法允许您在不修改应用程序代码的情况下轻松更改数据库配置。</p> 
<p>请注意，这里的<code>$</code>与MyBatis中的<code>#{...}</code>和<code>$</code>参数占位符是不同的。在MyBatis SQL映射文件中，<code>#{...}</code>用于传递预编译参数，而<code>${...}</code>用于直接插入SQL参数。</p> 
<h3>总结</h3> 
<p>在MyBatis中，尽量使用#解决配置文件中的属性值问题，因为其能防止恶意注入攻击；但对动态拼接SQL语句时，可能需要使用<code>$</code>符号进行占位符替换。</p> 
<p>在Spring中，$使用简单方便，而#可以进行更复杂的运算和处理。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/30da1fd11454df63f295f549645e02ab/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">InfluxDB：时序型数据库学习笔记，就这一篇吧o(╥﹏╥)o</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7a65419f9590b4f7671866505685b016/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">sharding-jdbc四种分片策略</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>