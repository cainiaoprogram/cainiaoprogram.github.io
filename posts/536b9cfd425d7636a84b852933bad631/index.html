<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java项目数据脱敏常用技术及Jasypt实战 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Java项目数据脱敏常用技术及Jasypt实战" />
<meta property="og:description" content="数据脱敏在Java项目中是一项非常重要的任务，它可以保护敏感数据，同时符合法规和隐私保护要求。在本篇博客中，我们将介绍数据脱敏的概念以及在Java项目中常用的开源框架和工具的实战应用。
什么是数据脱敏？ 数据脱敏是指将敏感数据进行处理，使其在保持数据的可用性的同时，去除或替换掉真实的敏感信息，从而保护数据主体的隐私。脱敏的目的是确保数据在非授权的情况下无法被识别，从而减少数据泄露和滥用的风险。
常用的数据脱敏技术 字符替换/加密： 通过替换字符或进行加密，将敏感数据转换成不易识别的形式。常见的加密算法包括AES、RSA等。随机生成： 对于敏感数据，可以随机生成伪造的数据，确保数据的格式和结构不变。脱敏规则： 制定脱敏规则，对不同类型的数据采用不同的脱敏方式，例如只显示部分信息、保留前几位或后几位等。 常用的Java开源框架和工具 Apache Commons Lang： 这个工具包含了许多用于字符串处理的工具类。使用它，可以很容易地对字符串进行脱敏和加密操作。Jasypt： 这是一个Java库，用于加密和解密敏感数据。它支持多种加密算法，例如PBE、AES等。DataSunrise： 这是一个功能强大的数据安全保护工具，支持数据库和文件的数据脱敏和加密，可以灵活配置不同的脱敏规则。Spring Boot Actuator： Spring Boot Actuator提供了对应用程序的监控和管理功能，可以使用它来对敏感数据进行脱敏，以便在监控和日志中不暴露真实数据。 实战：使用Jasypt进行数据脱敏 Jasypt是一个简单易用的Java加密库，我们可以在Spring Boot项目中很方便地集成它。
步骤1：添加Jasypt依赖 首先，我们需要在项目的pom.xml文件中添加Jasypt依赖：
&lt;dependency&gt; &lt;groupId&gt;org.jasypt&lt;/groupId&gt; &lt;artifactId&gt;jasypt-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;版本号&lt;/version&gt; &lt;/dependency&gt; 步骤2：配置加密密钥 在配置文件（例如application.yml）中配置加密密钥：
jasypt: encryptor: password: &#34;yourEncryptionKey&#34; 步骤3：实现数据脱敏 在代码中，我们可以使用Jasypt的StringEncryptor来加密和解密敏感数据。首先，我们需要在配置类中将StringEncryptor注入到Spring容器中：
import org.jasypt.encryption.StringEncryptor; import org.springframework.beans.factory.annotation.Autowired; import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; @Configuration public class JasyptConfig { @Autowired private StringEncryptor encryptor; @Bean(name = &#34;jasyptStringEncryptor&#34;) public StringEncryptor stringEncryptor() { return encryptor; } } 接下来，在我们的用户服务类中使用@EncryptProperty和@DecryptProperty注解对敏感数据进行脱敏和解密：
import org.jasypt.encryption.StringEncryptor; import org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/536b9cfd425d7636a84b852933bad631/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-30T15:18:25+08:00" />
<meta property="article:modified_time" content="2023-07-30T15:18:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Java项目数据脱敏常用技术及Jasypt实战</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>数据脱敏在Java项目中是一项非常重要的任务，它可以保护敏感数据，同时符合法规和隐私保护要求。在本篇博客中，我们将介绍数据脱敏的概念以及在Java项目中常用的开源框架和工具的实战应用。</p> 
<h2><a id="_2"></a><strong>什么是数据脱敏？</strong></h2> 
<p>数据脱敏是指将敏感数据进行处理，使其在保持数据的可用性的同时，去除或替换掉真实的敏感信息，从而保护数据主体的隐私。脱敏的目的是确保数据在非授权的情况下无法被识别，从而减少数据泄露和滥用的风险。</p> 
<h2><a id="_5"></a><strong>常用的数据脱敏技术</strong></h2> 
<ol><li><strong>字符替换/加密：</strong> 通过替换字符或进行加密，将敏感数据转换成不易识别的形式。常见的加密算法包括AES、RSA等。</li><li><strong>随机生成：</strong> 对于敏感数据，可以随机生成伪造的数据，确保数据的格式和结构不变。</li><li><strong>脱敏规则：</strong> 制定脱敏规则，对不同类型的数据采用不同的脱敏方式，例如只显示部分信息、保留前几位或后几位等。</li></ol> 
<h2><a id="Java_10"></a><strong>常用的Java开源框架和工具</strong></h2> 
<ol><li><strong>Apache Commons Lang：</strong> 这个工具包含了许多用于字符串处理的工具类。使用它，可以很容易地对字符串进行脱敏和加密操作。</li><li><strong>Jasypt：</strong> 这是一个Java库，用于加密和解密敏感数据。它支持多种加密算法，例如PBE、AES等。</li><li><strong>DataSunrise：</strong> 这是一个功能强大的数据安全保护工具，支持数据库和文件的数据脱敏和加密，可以灵活配置不同的脱敏规则。</li><li><strong>Spring Boot Actuator：</strong> Spring Boot Actuator提供了对应用程序的监控和管理功能，可以使用它来对敏感数据进行脱敏，以便在监控和日志中不暴露真实数据。</li></ol> 
<h2><a id="Jasypt_16"></a><strong>实战：使用Jasypt进行数据脱敏</strong></h2> 
<p>Jasypt是一个简单易用的Java加密库，我们可以在Spring Boot项目中很方便地集成它。</p> 
<h3><a id="1Jasypt_20"></a><strong>步骤1：添加Jasypt依赖</strong></h3> 
<p>首先，我们需要在项目的pom.xml文件中添加Jasypt依赖：</p> 
<pre><code class="prism language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.jasypt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jasypt-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>版本号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h3><a id="2_31"></a><strong>步骤2：配置加密密钥</strong></h3> 
<p>在配置文件（例如application.yml）中配置加密密钥：</p> 
<pre><code class="prism language-yaml"><span class="token key atrule">jasypt</span><span class="token punctuation">:</span>
  <span class="token key atrule">encryptor</span><span class="token punctuation">:</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">"yourEncryptionKey"</span>
</code></pre> 
<h3><a id="3_40"></a><strong>步骤3：实现数据脱敏</strong></h3> 
<p>在代码中，我们可以使用Jasypt的StringEncryptor来加密和解密敏感数据。首先，我们需要在配置类中将StringEncryptor注入到Spring容器中：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>jasypt<span class="token punctuation">.</span>encryption<span class="token punctuation">.</span></span><span class="token class-name">StringEncryptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">JasyptConfig</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StringEncryptor</span> encryptor<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"jasyptStringEncryptor"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">StringEncryptor</span> <span class="token function">stringEncryptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> encryptor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>接下来，在我们的用户服务类中使用@EncryptProperty和@DecryptProperty注解对敏感数据进行脱敏和解密：</p> 
<pre><code class="prism language-java"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>jasypt<span class="token punctuation">.</span>encryption<span class="token punctuation">.</span></span><span class="token class-name">StringEncryptor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{<!-- --></span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">StringEncryptor</span> encryptor<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${user.phone}"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> encryptedPhone<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${user.email}"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> encryptedEmail<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPhone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> encryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>encryptedPhone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">return</span> encryptor<span class="token punctuation">.</span><span class="token function">decrypt</span><span class="token punctuation">(</span>encryptedEmail<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPhone</span><span class="token punctuation">(</span><span class="token class-name">String</span> phone<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>encryptedPhone <span class="token operator">=</span> encryptor<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>encryptedEmail <span class="token operator">=</span> encryptor<span class="token punctuation">.</span><span class="token function">encrypt</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="_100"></a><strong>最终效果</strong></h3> 
<p>假设原始用户数据如下：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"phone"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span><span class="token operator">:</span> <span class="token string">"johndoe@example.com"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>经过使用Jasypt进行数据脱敏后，最终的用户数据将变为：</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
  <span class="token string-property property">"phone"</span><span class="token operator">:</span> <span class="token string">"6vfYqCEiKno5ELb2ZdmeGw=="</span><span class="token punctuation">,</span>
  <span class="token string-property property">"email"</span><span class="token operator">:</span> <span class="token string">"4pm42Cc0DNyWeXDr+t1Cnw=="</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>可以看到，用户的手机号和邮箱已经被加密处理，保护了用户的隐私数据。<br> 以上示例中，我们使用Jasypt对用户的密码进行了加密和解密操作，从而保护了用户的隐私数据。</p> 
<p>在实际项目中，根据具体需求和数据类型，我们可以选择合适的脱敏技术和工具，并结合具体业务场景进行配置和使用。</p> 
<p>总结：数据脱敏在Java项目中是一项必要的安全措施，它可以有效保护敏感数据，防止数据泄露和滥用。在实际应用中，我们可以选择合适的脱敏技术和开源工具，根据具体业务需求进行配置和使用，以确保数据安全和隐私保护。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1f5a5cc812a0044d427d6a609faded6a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">TCP协议&#43;三次握手/四次挥手过程（带图详解！！！）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/63a5a73416a07ceed1b5c5726954dcdd/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">APP自动化测试-Python&#43;Appium&#43;Pytest&#43;Allure框架实战封装（详细）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>