<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Nginx出现“ 413 （499 502 404）  Request Entity Too Large”错误解决方法 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Nginx出现“ 413 （499 502 404）  Request Entity Too Large”错误解决方法" />
<meta property="og:description" content="1.Nginx413错误的排查:修改上传文件大小限制
在使用上传POST一段数据时，被提示413 Request Entity Too Large，应该是nginx限制了上传数据的大小。
解决方法就是
打开nginx主配置文件nginx.conf，一般在/usr/local/nginx/conf/nginx.conf这个位置，找到http{}段，修改或者添加：client_max_body_size 2m;
如图：
然后重启nginx：
2.Proxy缓冲不够 如果你使用了Proxying，请把 proxy_buffer_size 16k; proxy_buffers 4 16k; 这几项的值调高 来源：http://www.ruby-forum.com/topic/169040
3.Nginx 400错误排查：HTTP头/Cookie过大 今天有人汇报nginx的HTTP400错误，而且这个HTTP400错误并不是每次都会出现的，查了一下发现nginx400错误是由于request header过大，通常是由于cookie中写入了较长的字符串所引起的。 解决方法是不要在cookie里记录过多数据，如果实在需要的话可以考虑调整在nginx.conf中的client_header_buffer_size(默认1k) 若cookie太大，可能还需要调整large_client_header_buffers(默认4k)，该参数说明如下： 请求行如果超过buffer，就会报HTTP 414错误(URI Too Long) nginx接受最长的HTTP头部大小必须比其中一个buffer大，否则就会报400的HTTP错误(Bad Request)。
4.参数都有所调整.目的是解决代理过程中出现的一些502 499错误
user www www; worker_processes 4; # [ debug | info | notice | warn | error | crit ] error_log /usr/local/webserver/nginx/logs/nginx_error.log crit; pid /usr/local/webserver/nginx/nginx.pid; #Specifies the value for maximum file descriptors that can be opened by this process." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ed036bb4c2fd30945a622f5775531a01/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-08-03T11:35:31+08:00" />
<meta property="article:modified_time" content="2013-08-03T11:35:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Nginx出现“ 413 （499 502 404）  Request Entity Too Large”错误解决方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <strong>1.Nginx</strong><span style="font-family:Tahoma; font-size:14px; line-height:28px"><strong>413错误的排查:修改上传文件大小限制</strong></span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> 在使用上传POST一段数据时，被提示413 Request Entity Too Large，应该是nginx限制了上传数据的大小。<br> 解决方法就是<br> 打开nginx主配置文件nginx.conf，一般在/usr/local/nginx/conf/nginx.conf这个位置，找到http{}段，修改或者添加：<span style="background-color:rgb(244,245,247); color:rgb(85,85,85)">client_max_body_size 2m;</span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)">如图：</span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><img src="https://images2.imgbox.com/ae/bd/pvU7NLCU_o.png" alt=""></span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><img src="" alt=""><br> </span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)">然后重启nginx：</span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><img src="https://images2.imgbox.com/10/bb/OjM1eXum_o.png" alt=""><br> </span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><img src="" alt=""><br> </span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><span style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"><span style="padding:0px; margin:0px; font-family:Tahoma"><span style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"><span style="padding:0px; margin:0px; font-family:Tahoma"><strong>2.Proxy缓冲不够</strong></span></span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">如果你使用了Proxying，请把</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">proxy_buffer_size 16k;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">proxy_buffers 4 16k;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">这几项的值调高</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">来源：http://www.ruby-forum.com/topic/169040</span><br> </span></span></span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><span style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"><span style="padding:0px; margin:0px; font-family:Tahoma"><br> </span></span></span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><span style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"><span style="padding:0px; margin:0px; font-family:Tahoma"><span style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"><strong><span style="padding:0px; margin:0px; font-family:Tahoma">3.</span><span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(51,51,51)">Nginx 400错误排查：HTTP头/Cookie过大</span></strong><br style="padding:0px; margin:0px"> </span><span style="padding:0px; margin:0px; font-size:14px; line-height:28px; font-family:Tahoma; color:rgb(51,51,51)">今天有人汇报</span><a target="_blank" style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51); word-break:break-all"><span style="padding:0px; margin:0px; font-family:Tahoma">nginx</span></a><span style="padding:0px; margin:0px; font-size:14px; line-height:28px; font-family:Tahoma; color:rgb(51,51,51)">的HTTP400错误，而且这个HTTP400错误并不是每次都会出现的，查了一下发现</span><a target="_blank" style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51); word-break:break-all"><span style="padding:0px; margin:0px; font-family:Tahoma">nginx</span></a><span style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51)"><span style="padding:0px; margin:0px; font-family:Tahoma">400错误是由于request header过大，通常是由于cookie中写入了较长的字符串所引起的。</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma">解决方法是不要在cookie里记录过多数据，如果实在需要的话可以考虑调整在</span></span><a target="_blank" style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51); word-break:break-all"><span style="padding:0px; margin:0px; font-family:Tahoma">nginx</span></a><span style="padding:0px; margin:0px; font-size:14px; line-height:28px; font-family:Tahoma; color:rgb(51,51,51)">.conf中的</span><a target="_blank" style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51); word-break:break-all"><span style="padding:0px; margin:0px; font-family:Tahoma">client_header_buffer_size</span></a><span style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51)"><span style="padding:0px; margin:0px; font-family:Tahoma">(默认1k)</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma">若cookie太大，可能还需要调整</span></span><a target="_blank" style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51); word-break:break-all"><span style="padding:0px; margin:0px; font-family:Tahoma">large_client_header_buffers</span></a><span style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51)"><span style="padding:0px; margin:0px; font-family:Tahoma">(默认4k)，该参数说明如下：</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma">请求行如果超过buffer，就会报HTTP 414错误(URI Too Long)</span><br style="padding:0px; margin:0px"> </span><a target="_blank" style="padding:0px; margin:0px; font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px; color:rgb(51,51,51); word-break:break-all"><span style="padding:0px; margin:0px; font-family:Tahoma">nginx</span></a><span style="padding:0px; margin:0px; font-size:14px; line-height:28px; font-family:Tahoma; color:rgb(51,51,51)">接受最长的HTTP头部大小必须比其中一个buffer大，否则就会报400的HTTP错误(Bad Request)。</span><br> </span></span></span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><span style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"><span style="padding:0px; margin:0px; font-family:Tahoma"><span style="padding:0px; margin:0px; font-size:14px; line-height:28px; font-family:Tahoma; color:rgb(51,51,51)"></span></span></span></span></p> 
<p style="padding-top:0px; padding-bottom:0px; margin-top:0px; margin-bottom:0px; clear:both; height:auto; overflow:hidden; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(51,51,51)"><strong>4.参数都有所调整.目的是解决代理过程中出现的一些502 499错误</strong></span></span></p> 
<p style="padding-top:0px; padding-bottom:0px; margin-top:0px; margin-bottom:0px; clear:both; height:auto; overflow:hidden; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(51,51,51)"><span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">user www www;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">worker_processes 4;</span><br style="padding:0px; margin:0px"> <br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)"># [ debug | info | notice | warn | error | crit ]</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">error_log /usr/local/webserver/nginx/logs/nginx_error.log crit;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">pid /usr/local/webserver/nginx/nginx.pid;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">#Specifies the value for maximum file descriptors that can be opened by this process.</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">worker_rlimit_nofile 51200;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">events</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">{<!-- --></span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">use epoll;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">worker_connections 51200;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">}</span><br style="padding:0px; margin:0px"> <br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">http</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">{<!-- --></span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">include mime.types;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">default_type application/octet-stream;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">source_charset GB2312;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">server_names_hash_bucket_size 256;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">client_header_buffer_size 256k;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">large_client_header_buffers 4 256k;</span><br style="padding:0px; margin:0px"> <br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">#size limits</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">client_max_body_size 50m;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">client_body_buffer_size 256k;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">client_header_timeout 3m;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">client_body_timeout 3m;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">send_timeout 3m;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">#参数都有所调整.目的是解决代理过程中出现的一些502 499错误 </span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">sendfile on;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">tcp_nopush on;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">keepalive_timeout 120; #参数加大,以解决做代理时502错误</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">tcp_nodelay on;</span><br style="padding:0px; margin:0px"> <br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">include vhosts/upstream.conf;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">include vhosts/bbs.linuxtone.conf;</span><br style="padding:0px; margin:0px"> <br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">}</span></span></p> 
<p style="padding-top:0px; padding-bottom:0px; margin-top:0px; margin-bottom:0px; clear:both; height:auto; overflow:hidden; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(51,51,51)"><span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">server</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">{<!-- --></span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">listen 80;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">server_name bbs.linuxtone.conf;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">charset GB2312;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">index index.html index.htm;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">root /date/wwwroot/linuxtone/;</span><br style="padding:0px; margin:0px"> <br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">location ~ ^/NginxStatus/ {<!-- --></span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">stub_status on;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">access_log off;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">}</span><br style="padding:0px; margin:0px"> <br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">location / {<!-- --></span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">root /date/wwwroot/linuxtone/;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_redirect off ;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_set_header Host $host;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_set_header X-Real-IP $remote_addr;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_set_header REMOTE-HOST $remote_addr;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">client_max_body_size 50m;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">client_body_buffer_size 256k;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_connect_timeout 30;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_send_timeout 30;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_read_timeout 60;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_buffer_size 256k;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_buffers 4 256k;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_busy_buffers_size 256k;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_temp_file_write_size 256k;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_next_upstream error timeout invalid_header http_500 http_503 http_404;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_max_temp_file_size 128m;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">proxy_pass http://bbs.linuxtone.com;</span><br style="padding:0px; margin:0px"> <span style="padding:0px; margin:0px; font-family:Tahoma; color:rgb(0,85,255)">}</span></span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="font-family:Tahoma; color:rgb(44,44,44); font-size:14px; line-height:28px; background-color:rgb(244,245,247)"><strong>5.https转发配置错误</strong></span></p> 
<p style="margin-top:0px; margin-bottom:12px; padding-top:0px; padding-bottom:0px; color:rgb(51,51,51); font-family:微软雅黑,Helvetica,Times,Arial,serif; line-height:18px"> <span style="background-color:rgb(244,245,247); color:rgb(85,85,85)"><span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">正确的配置方法</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">server_name www.mydomain.com;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">location /myproj/repos {<!-- --></span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">set $fixed_destination $http_destination;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">if ( $http_destination ~* ^https(.*)$ )</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">{<!-- --></span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">set $fixed_destination http$1;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">}</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">proxy_set_header Host $host;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">proxy_set_header X-Real-IP $remote_addr;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">proxy_set_header Destination $fixed_destination;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">proxy_pass http://subversion_hosts;</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">}</span><br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <br style="padding:0px; margin:0px; color:rgb(44,44,44); font-family:宋体,'Arial Narrow',arial,serif; font-size:14px; line-height:28px"> <span style="padding:0px; margin:0px; color:rgb(44,44,44); font-size:14px; line-height:28px; font-family:Tahoma">来源：http://www.ruby-forum.com/topic/173455</span><br> </span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/55f03fe86d51104d16bc2606a0e0b8c1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ffmpeg中如何加入trueHD/mlp编码器</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a6f5bdd984ad204ed1dd7c879e3d1dd2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">安装提示错误 [INSTALL_FAILED_OLDER_SDK]的解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>