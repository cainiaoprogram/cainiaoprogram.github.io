<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ES -极客学习 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="ES -极客学习" />
<meta property="og:description" content="Elasticsearch 简介及其发展历史 起源 Lucene
于 Java 语言开发的搜索引擎库类创建于 1999 年，2005 年成为 Apache 顶级开源项目Lucene 具有高性能、易扩展的优点Lucene 的局限性 只能基于 Java 语言开发类库的接口学习曲线陡峭原生并不支持水平扩展原生并不支持水平扩展 Elasticsearch 的诞生
2004 年Shay Banon 基于 Lucene 开发了 Compass2010 年Shay Banon 重写了 Compass，取名 Elasticsearch 支持分布式，可水平扩展降低全文检索的学习曲线，可以被任何编程语言调用 ES 分布式架构 ES 支持多种方式接入 ES 主要功能 ES 版本
ES 版本新功能 ES 家族成员与其应用场景 Elasticsearch的安装与简单配置 下载地址：https://www.elastic.co/cn/downloads/elasticsearch
docker 中安装elsticSearch https://zhuanlan.zhihu.com/p/669733170
https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html
1 step Install Docker.
Install Docker. Visit Get Docker to install Docker for your environment.
If using Docker Desktop, make sure to allocate at least 4GB of memory." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/68a71129fb2e1676c3499f86d8cc4b4c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-07T13:45:42+08:00" />
<meta property="article:modified_time" content="2024-01-07T13:45:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">ES -极客学习</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><img src="https://images2.imgbox.com/38/d0/EG5kgHkx_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Elasticsearch__1"></a>Elasticsearch 简介及其发展历史</h2> 
<p>起源 Lucene</p> 
<ul><li>于 Java 语言开发的搜索引擎库类</li><li>创建于 1999 年，2005 年成为 Apache 顶级开源项目</li><li>Lucene 具有高性能、易扩展的优点</li><li>Lucene 的局限性 
  <ul><li>只能基于 Java 语言开发类库的接口学习曲线陡峭</li><li>原生并不支持水平扩展</li><li>原生并不支持水平扩展</li></ul> </li></ul> 
<p>Elasticsearch 的诞生</p> 
<ul><li>2004 年Shay Banon 基于 Lucene 开发了 Compass</li><li>2010 年Shay Banon 重写了 Compass，取名 Elasticsearch 
  <ul><li>支持分布式，可水平扩展</li><li>降低全文检索的学习曲线，可以被任何编程语言调用</li></ul> </li></ul> 
<h3><a id="ES__16"></a>ES 分布式架构</h3> 
<p><img src="https://images2.imgbox.com/37/57/yd5B1z4I_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="ES__18"></a>ES 支持多种方式接入</h3> 
<p><img src="https://images2.imgbox.com/bd/d2/Xut4Yv5x_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="ES__22"></a>ES 主要功能</h3> 
<p><img src="https://images2.imgbox.com/5e/3f/JF0StKBD_o.png" alt="在这里插入图片描述"></p> 
<p>ES 版本<br> <img src="https://images2.imgbox.com/12/d1/ycx9nQDW_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="ES__27"></a>ES 版本新功能</h3> 
<p><img src="https://images2.imgbox.com/87/90/ubMeOSFG_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/dd/f6/og8IoNAZ_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/95/8d/8ZAFed5b_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="ES__31"></a>ES 家族成员与其应用场景</h2> 
<p><img src="https://images2.imgbox.com/0e/1c/EbQE9P9n_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/68/ba/RljFkkAF_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/16/f0/6KqlntCh_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/42/80/I3NADidf_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/d4/1b/mkyWA0Iu_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/f8/ca/4j2G3Wf5_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ed/87/Tk7POIRm_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/68/c6/KXBJD7rU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/7b/e8/ITO2u8y8_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/85/ce/hzdUP0C4_o.png" alt="在这里插入图片描述"></p> 
<h2><a id="Elasticsearch_43"></a>Elasticsearch的安装与简单配置</h2> 
<p>下载地址：https://www.elastic.co/cn/downloads/elasticsearch</p> 
<p><img src="https://images2.imgbox.com/9f/21/TlWsQArC_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/ca/4c/N2r3ATlY_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c0/e0/PAAvSo22_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/4a/a9/bjZ4RGJg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/06/8b/778Y5KJ9_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="docker_elsticSearch_52"></a>docker 中安装elsticSearch</h3> 
<p>https://zhuanlan.zhihu.com/p/669733170</p> 
<p>https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html</p> 
<p>1 step Install Docker.<br> Install Docker. Visit Get Docker to install Docker for your environment.</p> 
<p>If using Docker Desktop, make sure to allocate at least 4GB of memory. You can adjust memory usage in Docker Desktop by going to Settings &gt; Resources.</p> 
<ol start="2"><li>Create a new docker network.</li></ol> 
<pre><code class="prism language-bash"><span class="token function">docker</span> network create elastic
</code></pre> 
<p>Pull the Elasticsearch Docker image.<br> 3 step elastic images</p> 
<pre><code class="prism language-bash"><span class="token function">docker</span> pull docker.elastic.co/elasticsearch/elasticsearch:8.11.3
Optional: Install Cosign <span class="token keyword">for</span> your environment. Then use Cosign to verify the Elasticsearch image’s signature.
</code></pre> 
<ol start="4"><li>step</li></ol> 
<pre><code class="prism language-bash"><span class="token function">wget</span> https://artifacts.elastic.co/cosign.pub
</code></pre> 
<p>cosign verify --key cosign.pub docker.elastic.co/elasticsearch/elasticsearch:8.11.3<br> The cosign command prints the check results and the signature payload in JSON format:</p> 
<blockquote> 
 <p>Verification for docker.elastic.co/elasticsearch/elasticsearch:8.11.3<br> – The following checks were performed on each of these signatures:</p> 
 <ul><li>The cosign claims were validated</li><li>Existence of the claims in the transparency log was verified offline</li><li>The signatures were verified against the specified public key Start an Elasticsearch container.</li></ul> 
</blockquote> 
<ol start="5"><li>step Start an Elasticsearch container.</li></ol> 
<pre><code class="prism language-bash"><span class="token function">docker</span> run <span class="token parameter variable">--name</span> es01 <span class="token parameter variable">--net</span> elastic <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-it</span> <span class="token parameter variable">-m</span> 1GB docker.elastic.co/elasticsearch/elasticsearch:8.11.3
</code></pre> 
<p><img src="https://images2.imgbox.com/72/43/XnMxFgeT_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="linux_elstic__96"></a>linux 下elstic 的安装配置</h3> 
<p>https://gitee.com/geektime-geekbang/geektime-ELK/tree/master/part-1/2.1-Elasticsearch%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E7%AE%80%E5%8D%95%E9%85%8D%E7%BD%AE#%E7%9B%B8%E5%85%B3%E9%98%85%E8%AF%BB</p> 
<pre><code class="prism language-bash"><span class="token comment">#启动单节点</span>
bin/elasticsearch <span class="token parameter variable">-E</span> <span class="token assign-left variable">node.name</span><span class="token operator">=</span>node0 <span class="token parameter variable">-E</span> <span class="token assign-left variable">cluster.name</span><span class="token operator">=</span>geektime <span class="token parameter variable">-E</span> <span class="token assign-left variable">path.data</span><span class="token operator">=</span>node0_data

<span class="token comment">#安装插件</span>
bin/elasticsearch-plugin <span class="token function">install</span> analysis-icu

<span class="token comment">#查看插件</span>
bin/elasticsearch-plugin list
<span class="token comment">#查看安装的插件</span>
GET http://localhost:9200/_cat/plugins?v

<span class="token comment">#start multi-nodes Cluster</span>
bin/elasticsearch <span class="token parameter variable">-E</span> <span class="token assign-left variable">node.name</span><span class="token operator">=</span>node0 <span class="token parameter variable">-E</span> <span class="token assign-left variable">cluster.name</span><span class="token operator">=</span>geektime <span class="token parameter variable">-E</span> <span class="token assign-left variable">path.data</span><span class="token operator">=</span>node0_data
bin/elasticsearch <span class="token parameter variable">-E</span> <span class="token assign-left variable">node.name</span><span class="token operator">=</span>node1 <span class="token parameter variable">-E</span> <span class="token assign-left variable">cluster.name</span><span class="token operator">=</span>geektime <span class="token parameter variable">-E</span> <span class="token assign-left variable">path.data</span><span class="token operator">=</span>node1_data
bin/elasticsearch <span class="token parameter variable">-E</span> <span class="token assign-left variable">node.name</span><span class="token operator">=</span>node2 <span class="token parameter variable">-E</span> <span class="token assign-left variable">cluster.name</span><span class="token operator">=</span>geektime <span class="token parameter variable">-E</span> <span class="token assign-left variable">path.data</span><span class="token operator">=</span>node2_data
bin/elasticsearch <span class="token parameter variable">-E</span> <span class="token assign-left variable">node.name</span><span class="token operator">=</span>node3 <span class="token parameter variable">-E</span> <span class="token assign-left variable">cluster.name</span><span class="token operator">=</span>geektime <span class="token parameter variable">-E</span> <span class="token assign-left variable">path.data</span><span class="token operator">=</span>node3_data

<span class="token comment">#查看集群</span>
GET http://localhost:9200
<span class="token comment">#查看nodes</span>
GET _cat/nodes
GET _cluster/health
</code></pre> 
<h2><a id="Kibana__123"></a>Kibana 的安装与界面快速浏览</h2> 
<p><img src="https://images2.imgbox.com/dc/db/BHJnNHLk_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/46/aa/8LVoQvtW_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/bb/84/co4O71U2_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="linux__kibana_128"></a>linux 下 kibana的启动</h3> 
<pre><code class="prism language-bash"><span class="token comment">#启动kibana</span>
bin/kibana

<span class="token comment">#查看插件</span>
bin/kibana-plugin list
</code></pre> 
<h2><a id="DockerElasticsearch_KibanaCerebro_136"></a>在Docker容器中运行Elasticsearch, Kibana和Cerebro</h2> 
<p><img src="https://images2.imgbox.com/a2/51/I1DUzSaQ_o.png" alt="在这里插入图片描述"></p> 
<p><img src="https://images2.imgbox.com/b2/f2/cfu4uPGy_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a9/9d/wqfkDWVY_o.png" alt="在这里插入图片描述"><br> 进入 7.x-docker-2-es-instance目录</p> 
<pre><code class="prism language-bash"><span class="token comment">#启动</span>
<span class="token function">docker-compose</span> up

<span class="token comment">#停止容器</span>
<span class="token function">docker-compose</span> down

<span class="token comment">#停止容器并且移除数据</span>
<span class="token function">docker-compose</span> down <span class="token parameter variable">-v</span>

<span class="token comment">#一些docker 命令</span>
<span class="token function">docker</span> <span class="token function">ps</span>
<span class="token function">docker</span> stop Name/ContainerId
<span class="token function">docker</span> start Name/ContainerId

<span class="token comment">#删除单个容器</span>
<span class="token variable">$docker</span> <span class="token function">rm</span> Name/ID
-f, –force<span class="token operator">=</span>false<span class="token punctuation">;</span> -l, –link<span class="token operator">=</span>false Remove the specified <span class="token function">link</span> and not the underlying container<span class="token punctuation">;</span> -v, –volumes<span class="token operator">=</span>false Remove the volumes associated to the container

<span class="token comment">#删除所有容器</span>
<span class="token variable">$docker</span> <span class="token function">rm</span> <span class="token variable"><span class="token variable">`</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-q</span><span class="token variable">`</span></span>  
停止、启动、杀死、重启一个容器
<span class="token variable">$docker</span> stop Name/ID  
<span class="token variable">$docker</span> start Name/ID  
<span class="token variable">$docker</span> <span class="token function">kill</span> Name/ID  
<span class="token variable">$docker</span> restart name/ID
</code></pre> 
<h2><a id="Logstash__172"></a>Logstash 安装与测试数据导入</h2> 
<p><img src="https://images2.imgbox.com/b5/f8/lGHIn5cj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/45/eb/vy2q0u7E_o.png" alt="在这里插入图片描述"><br> 安装Logstash，并且导入Movielens的测试数据集</p> 
<p>Small: 100,000 ratings and 3,600 tag applications applied to 9,000 movies by 600 users. Last updated 9/2018.<br> movielens/ml-latest-small/movies.csv movie数据<br> movielens/logstash.conf //logstash 7.x 配置文件，<br> movielens/logstash6.conf //logstash 6.x 配置文件</p> 
<pre><code class="prism language-bash"><span class="token comment">#下载与ES相同版本号的logstash，（7.1.0），并解压到相应目录</span>
<span class="token comment">#修改movielens目录下的logstash.conf文件</span>
<span class="token comment">#path修改为,你实际的movies.csv路径</span>
input <span class="token punctuation">{<!-- --></span>
  <span class="token function">file</span> <span class="token punctuation">{<!-- --></span>
    path <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"YOUR_FULL_PATH_OF_movies.csv"</span>
    start_position <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"beginning"</span>
    sincedb_path <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">"/dev/null"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">#启动Elasticsearch实例，然后启动 logstash，并制定配置文件导入数据</span>
bin/logstash <span class="token parameter variable">-f</span> /YOUR_PATH_of_logstash.conf
</code></pre> 
<ul><li>下载最MovieLens最小测试数据集：https://grouplens.org/datasets/movielens/</li><li>Logstash下载：https://www.elastic.co/cn/downloads/logstash</li><li>Logstash参考文档：https://www.elastic.co/guide/en/logstash/current/index.html</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/95c750b1a2e3cae6dd33a8baa94be2e4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构之链表——学习笔记（1）（基本概念与相关的几道习题讲解）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d976e47c67254c3940ba00250f1b97ef/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">自从用了这款代码生成工具，项目开发效率大大提高了！</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>