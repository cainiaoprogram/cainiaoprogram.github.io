<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>规则引擎Drools详细介绍 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="规则引擎Drools详细介绍" />
<meta property="og:description" content="规则引擎Drools详细介绍 一、 规则引擎概述1.1 什么是规则引擎1.2 使用规则引擎的优势1.3 规则引擎应用场景1.4 Drools介绍 二、 Drools使用与说明2.1 Drools基本构成2.2. Drools基础语法2.3. Pattern模式匹配2.4. 比较操作符2.5. 关键字2.6 Drools内置方法2.7.规则属性 attributes2.8.Drools进阶语法介绍2.9.Drools LHS高级部分2.10.Drools RHS高级部分 一、 规则引擎概述 1.1 什么是规则引擎 规则引擎，全称为业务规则管理系统，英文名为BRMS(即Business Rule Management System)。规则引擎的主要思想是将应用程序中的业务决策部分分离出来，并使用预定义的语义模块编写业务决策（业务规则），由用户或开发者在需要时进行配置、管理。
需要注意的是规则引擎并不是一个具体的技术框架，而是指的一类系统，即业务规则管理系统。目前市面上具体的规则引擎产品有：drools、VisualRules、iLog等。
规则引擎实现了将业务决策从应用程序代码中分离出来，接收数据输入，解释业务规则，并根据业务规则做出业务决策。规则引擎其实就是一个输入输出平台。
上面的申请信用卡业务场景使用规则引擎后效果如下：
[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-2XMP5Ou6-1637305115031)(…/media/pictures/Drools.assets/4.png)]
系统中引入规则引擎后，业务规则不再以程序代码的形式驻留在系统中，取而代之的是处理规则的规则引擎，业务规则存储在规则库中，完全独立于程序。业务人员可以像管理数据一样对业务规则进行管理，比如查询、添加、更新、统计、提交业务规则等。业务规则被加载到规则引擎中供应用系统调用。
1.2 使用规则引擎的优势 使用规则引擎的优势如下：
1、业务规则与系统代码分离，实现业务规则的集中管理
2、在不重启服务的情况下可随时对业务规则进行扩展和维护
3、可以动态修改业务规则，从而快速响应需求变更
4、规则引擎是相对独立的，只关心业务规则，使得业务分析人员也可以参与编辑、维护系统的业务规则
5、减少了硬编码业务规则的成本和风险
6、使用规则引擎提供的规则编辑工具，使复杂的业务规则实现变得的简单
1.3 规则引擎应用场景 对于一些存在比较复杂的业务规则并且业务规则会频繁变动的系统比较适合使用规则引擎，如下：
1、风险控制系统----风险贷款、风险评估
2、反欺诈项目----银行贷款、征信验证
3、决策平台系统----财务计算
4、促销平台系统----满减、打折、加价购
1.4 Drools介绍 drools是一款由JBoss组织提供的基于Java语言开发的开源规则引擎，可以将复杂且多变的业务规则从硬编码中解放出来，以规则脚本的形式存放在文件或特定的存储介质中(例如存放在数据库中)，使得业务规则的变更不需要修改项目代码、重启服务器就可以在线上环境立即生效。
drools官网地址：https://drools.org/
drools源码下载地址：https://github.com/kiegroup/drools
二、 Drools使用与说明 SpringBoot整合规则引擎Drools：https://blog.csdn.net/weixin_48658389/article/details/121348659
2.1 Drools基本构成 drools规则引擎由以下三部分构成：
Working Memory（工作内存）Rule Base（规则库）Inference Engine（推理引擎）
其中Inference Engine（推理引擎）又包括：Pattern Matcher（匹配器） 具体匹配哪一个规则，由这个完成Agenda(议程)Execution Engine（执行引擎） Working Memory：工作内存，drools规则引擎会从Working Memory中获取数据并和规则文件中定义的规则进行模式匹配，所以我们开发的应用程序只需要将我们的数据插入到Working Memory中即可，例如本案例中我们调用kieSession." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/044a9e7fd126b66ec2dff4e6cb33a98f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-19T16:23:42+08:00" />
<meta property="article:modified_time" content="2021-11-19T16:23:42+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">规则引擎Drools详细介绍</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>规则引擎Drools详细介绍</h4> 
 <ul><li><a href="#__1" rel="nofollow">一、 规则引擎概述</a></li><li><ul><li><a href="#11__3" rel="nofollow">1.1 什么是规则引擎</a></li><li><a href="#12__17" rel="nofollow">1.2 使用规则引擎的优势</a></li><li><a href="#13__33" rel="nofollow">1.3 规则引擎应用场景</a></li><li><a href="#14_Drools_45" rel="nofollow">1.4 Drools介绍</a></li></ul> 
  </li><li><a href="#_Drools_52" rel="nofollow">二、 Drools使用与说明</a></li><li><ul><li><a href="#21_Drools_56" rel="nofollow">2.1 Drools基本构成</a></li><li><a href="#22_Drools_79" rel="nofollow">2.2. Drools基础语法</a></li><li><a href="#23_Pattern_125" rel="nofollow">2.3. Pattern模式匹配</a></li><li><a href="#24__134" rel="nofollow">2.4. 比较操作符</a></li><li><a href="#25__230" rel="nofollow">2.5. 关键字</a></li><li><a href="#26_Drools_240" rel="nofollow">2.6 Drools内置方法</a></li><li><a href="#27__attributes_295" rel="nofollow">2.7.规则属性 attributes</a></li><li><a href="#28Drools_365" rel="nofollow">2.8.Drools进阶语法介绍</a></li><li><a href="#29Drools_LHS_453" rel="nofollow">2.9.Drools LHS高级部分</a></li><li><a href="#210Drools_RHS_509" rel="nofollow">2.10.Drools RHS高级部分</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="__1"></a>一、 规则引擎概述</h2> 
<h3><a id="11__3"></a>1.1 什么是规则引擎</h3> 
<p><strong>规则引擎</strong>，全称为<strong>业务规则管理系统</strong>，英文名为BRMS(即Business Rule Management System)。规则引擎的主要思想是将应用程序中的业务决策部分分离出来，并使用预定义的语义模块编写业务决策（业务规则），由用户或开发者在需要时进行配置、管理。</p> 
<p>需要注意的是规则引擎并不是一个具体的技术框架，而是指的一类系统，即业务规则管理系统。目前市面上具体的规则引擎产品有：drools、VisualRules、iLog等。</p> 
<p>规则引擎实现了将业务决策从应用程序代码中分离出来，接收数据输入，解释业务规则，并根据业务规则做出业务决策。规则引擎其实就是一个输入输出平台。</p> 
<p>上面的申请信用卡业务场景使用规则引擎后效果如下：</p> 
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-2XMP5Ou6-1637305115031)(…/media/pictures/Drools.assets/4.png)]</p> 
<p>系统中引入规则引擎后，业务规则不再以程序代码的形式驻留在系统中，取而代之的是处理规则的规则引擎，业务规则存储在规则库中，完全独立于程序。业务人员可以像管理数据一样对业务规则进行管理，比如查询、添加、更新、统计、提交业务规则等。业务规则被加载到规则引擎中供应用系统调用。</p> 
<h3><a id="12__17"></a>1.2 使用规则引擎的优势</h3> 
<p>使用规则引擎的优势如下：</p> 
<p>1、业务规则与系统代码分离，实现业务规则的集中管理</p> 
<p>2、在不重启服务的情况下可随时对业务规则进行扩展和维护</p> 
<p>3、可以动态修改业务规则，从而快速响应需求变更</p> 
<p>4、规则引擎是相对独立的，只关心业务规则，使得业务分析人员也可以参与编辑、维护系统的业务规则</p> 
<p>5、减少了硬编码业务规则的成本和风险</p> 
<p>6、使用规则引擎提供的规则编辑工具，使复杂的业务规则实现变得的简单</p> 
<h3><a id="13__33"></a>1.3 规则引擎应用场景</h3> 
<p>对于一些存在比较复杂的业务规则并且业务规则会频繁变动的系统比较适合使用规则引擎，如下：</p> 
<p>1、风险控制系统----风险贷款、风险评估</p> 
<p>2、反欺诈项目----银行贷款、征信验证</p> 
<p>3、决策平台系统----财务计算</p> 
<p>4、促销平台系统----满减、打折、加价购</p> 
<h3><a id="14_Drools_45"></a>1.4 Drools介绍</h3> 
<p>drools是一款由JBoss组织提供的基于Java语言开发的开源规则引擎，可以将复杂且多变的业务规则从硬编码中解放出来，以规则脚本的形式存放在文件或特定的存储介质中(例如存放在数据库中)，使得业务规则的变更不需要修改项目代码、重启服务器就可以在线上环境立即生效。</p> 
<p>drools官网地址：<a href="https://drools.org/" rel="nofollow">https://drools.org/</a></p> 
<p>drools源码下载地址：<a href="https://github.com/kiegroup/drools">https://github.com/kiegroup/drools</a></p> 
<h2><a id="_Drools_52"></a>二、 Drools使用与说明</h2> 
<hr> 
<p><strong>SpringBoot整合规则引擎Drools：</strong><a href="https://blog.csdn.net/weixin_48658389/article/details/121348659">https://blog.csdn.net/weixin_48658389/article/details/121348659</a></p> 
<hr> 
<h3><a id="21_Drools_56"></a>2.1 Drools基本构成</h3> 
<p><strong>drools规则引擎由以下三部分构成：</strong></p> 
<hr> 
<ul><li>Working Memory（工作内存）</li><li>Rule Base（规则库）</li><li>Inference Engine（推理引擎）<br> <em>其中Inference Engine（推理引擎）又包括：</em></li><li>Pattern Matcher（匹配器） 具体匹配哪一个规则，由这个完成</li><li>Agenda(议程)</li><li>Execution Engine（执行引擎）</li></ul> 
<hr> 
<p><strong>Working Memory</strong>：工作内存，drools规则引擎会从Working Memory中获取数据并和规则文件中定义的规则进行模式匹配，所以我们开发的应用程序只需要将我们的数据插入到Working Memory中即可，例如本案例中我们调用kieSession.insert(order)就是将order对象插入到了工作内存中。</p> 
<p><strong>Fact</strong>：事实，是指在drools 规则应用当中，将一个<strong>普通的JavaBean插入到Working Memory后的对象</strong>就是Fact对象，例如本案例中的Order对象就属于Fact对象。Fact对象是我们的应用和规则引擎进行数据交互的桥梁或通道。</p> 
<p><strong>Rule Base</strong>：规则库，我们在规则文件中定义的规则都会被加载到规则库中。</p> 
<p><strong>Pattern Matcher</strong>：匹配器，将Rule Base中的所有规则与Working Memory中的Fact对象进行模式匹配，匹配成功的规则将被激活并放入Agenda中。</p> 
<p><strong>Agenda</strong>：议程，用于存放通过匹配器进行模式匹配后被激活的规则。</p> 
<p><strong>Execution Engine</strong>：执行引擎，执行Agenda中被激活的规则。</p> 
<h3><a id="22_Drools_79"></a>2.2. Drools基础语法</h3> 
<p><strong>规则文件的构成：</strong><br> 在使用Drools时最重要的工作就是编写规则文件，规则文件的后缀为.drl。</p> 
<p><strong>drl是Drools Rule Language的缩写</strong>。在规则文件中编写具体的规则内容。</p> 
<p>一套完整的规则文件内容构成如下：</p> 
<table><thead><tr><th align="left">关键字</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left">package</td><td align="left">包名，只限于逻辑上的管理，同一个包名下的查询或者函数可以直接调用</td></tr><tr><td align="left">import</td><td align="left">用于导入类或者静态方法</td></tr><tr><td align="left">global</td><td align="left">全局变量</td></tr><tr><td align="left">function</td><td align="left">自定义函数</td></tr><tr><td align="left">query</td><td align="left">查询</td></tr><tr><td align="left">rule end</td><td align="left">规则体</td></tr></tbody></table> 
<hr> 
<p><strong>Drools语法结构</strong></p> 
<pre><code class="prism language-java">rule <span class="token string">"ruleName"</span>
    attributes
    when
        LHS 
    then
        RHS
end
</code></pre> 
<hr> 
<p><strong>主要关键字说明</strong></p> 
<p><strong>rule</strong>：关键字，表示规则开始，参数为规则的唯一名称。</p> 
<p><strong>attributes</strong>：规则属性，是rule与when之间的参数，为可选项。</p> 
<p><strong>when</strong>：关键字，后面跟规则的条件部分。</p> 
<p><strong>LHS</strong>(Left Hand Side)：是规则的条件部分的通用名称。它由零个或多个条件元素组成。<strong>如果LHS为空，则它将被视为始终为true的条件元素</strong>。 （左手边）</p> 
<p><strong>then</strong>：关键字，后面跟规则的结果部分。</p> 
<p><strong>RHS</strong>(Right Hand Side)：是规则的后果或行动部分的通用名称。 （右手边）</p> 
<p><strong>end</strong>：关键字，表示一个规则结束。</p> 
<hr> 
<h3><a id="23_Pattern_125"></a>2.3. Pattern模式匹配</h3> 
<p>Drools中的匹配器可以将Rule Base中的所有规则与Working Memory中的Fact对象进行模式匹配，我们需要在规则体的LHS部分定义规则并进行模式匹配。LHS部分由一个或者多个条件组成，条件又称为pattern。</p> 
<p><strong>pattern的语法结构为：绑定变量名:Object(Field约束)，绑定变量既可以用在对象上，也可以用在对象的属性上</strong></p> 
<p>其中绑定变量名可以省略，通常绑定变量名的命名一般建议以$开始。如果定义了绑定变量名，就可以在规则体的RHS部分使用此绑定变量名来操作相应的Fact对象。Field约束部分是需要返回true或者false的0个或多个表达式。</p> 
<p>LHS部分可以定义多个pattern，多个pattern之间可以使用and或者or进行连接，也可以不写，默认连接为and。</p> 
<h3><a id="24__134"></a>2.4. 比较操作符</h3> 
<p>Drools提供的比较操作符，如下表：</p> 
<table><thead><tr><th align="left">符号</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">&gt;</td><td align="left">大于</td></tr><tr><td align="left">&lt;</td><td align="left">小于</td></tr><tr><td align="left">&gt;=</td><td align="left">大于等于</td></tr><tr><td align="left">&lt;=</td><td align="left">小于等于</td></tr><tr><td align="left">==</td><td align="left">等于</td></tr><tr><td align="left">!=</td><td align="left">不等于</td></tr><tr><td align="left">contains</td><td align="left">检查一个Fact对象的某个属性值是否包含一个指定的对象值</td></tr><tr><td align="left">not contains</td><td align="left">检查一个Fact对象的某个属性值是否不包含一个指定的对象值</td></tr><tr><td align="left">memberOf</td><td align="left">判断一个Fact对象的某个属性是否在一个或多个集合中</td></tr><tr><td align="left">not memberOf</td><td align="left">判断一个Fact对象的某个属性是否不在一个或多个集合中</td></tr><tr><td align="left">matches</td><td align="left">判断一个Fact对象的属性是否与提供的标准的Java正则表达式进行匹配</td></tr><tr><td align="left">not matches</td><td align="left">判断一个Fact对象的属性是否不与提供的标准的Java正则表达式进行匹配</td></tr></tbody></table> 
<hr> 
<ul><li> <p><strong>contains | not contains语法结构</strong></p> <p>Object(Field[Collection/Array] contains value)</p> <p>Object(Field[Collection/Array] not contains value)</p> </li></ul> 
<pre><code class="prism language-java"><span class="token comment">//测试比较操作符contains</span>
rule <span class="token string">"comparison_rule_1"</span>
 when
    <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>name contains <span class="token string">"张三"</span><span class="token punctuation">)</span>
    <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>data contains name<span class="token punctuation">)</span>
 then
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"张三规则触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  end

<span class="token comment">//测试比较操作符not contains</span>
rule <span class="token string">"comparison_rule_2"</span>
   when
      <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>name not contains <span class="token string">"张三"</span><span class="token punctuation">)</span>
      <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>data not contains name<span class="token punctuation">)</span>
   then
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"not张三规则触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    end
</code></pre> 
<ul><li> <p><strong>memberOf | not memberOf语法结构</strong></p> <p>Object(field memberOf value[Collection/Array])</p> <p>Object(field not memberOf value[Collection/Array])</p> </li></ul> 
<pre><code class="prism language-java"><span class="token comment">//测试比较操作符memberOf</span>
rule <span class="token string">"comparison_rule_3"</span>
   when
      <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>name memberOf data<span class="token punctuation">)</span>
   then
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"memberOf规则"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    end

<span class="token comment">//测试比较操作符memberOf</span>
rule <span class="token string">"comparison_rule_4"</span>
   when
      <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>name not memberOf data<span class="token punctuation">)</span>
   then
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"not memberOf规则"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    end
</code></pre> 
<ul><li> <p><strong>matches | not matches语法结构</strong></p> <p>Object(field matches “正则表达式”)</p> <p>Object(field not matches “正则表达式”)</p> </li></ul> 
<pre><code class="prism language-java"><span class="token comment">//测试比较操作符matches（后面匹配正则表达式）</span>
rule <span class="token string">"comparison_rule_5"</span>
   when
      <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>name matches <span class="token string">"王.*"</span><span class="token punctuation">)</span>
   then
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"matches规则"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    end

<span class="token comment">//测试比较操作符matches（后面匹配正则表达式）</span>
rule <span class="token string">"comparison_rule_6"</span>
   when
      <span class="token class-name">ComparisonOperatorEntity</span><span class="token punctuation">(</span>name not matches <span class="token string">"王.*"</span><span class="token punctuation">)</span>
   then
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"not matches规则"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    end
</code></pre> 
<p>contain是前面包含后面，memberOf是后面包含前面。</p> 
<h3><a id="25__230"></a>2.5. 关键字</h3> 
<p>Drools的关键字分为：硬关键字(Hard keywords)和软关键字(Soft keywords)。</p> 
<p><strong>硬关键字是我们在规则文件中定义包名或者规则名时明确不能使用的，否则程序会报错</strong>。软关键字虽然可以使用，但是不建议使用。</p> 
<p>硬关键字包括：true false null</p> 
<p>软关键字包括：lock-on-active date-effective date-expires no-loop auto-focus activation-group agenda-group ruleflow-group entry-point duration package import dialect salience enabled attributes rule extend when then template query declare function global eval not in or and exists forall accumulate collect from action reverse result end over init</p> 
<h3><a id="26_Drools_240"></a>2.6 Drools内置方法</h3> 
<p>规则文件的<code>RHS</code>部分的主要作用是通过<strong>插入，删除或修改工作内存中的Fact数据</strong>，来达到控制规则引擎执行的目的。Drools提供了一些方法可以用来操作工作内存中的数据，**操作完成后规则引擎会重新进行相关规则的匹配，**原来没有匹配成功的规则在修改数据完成后有可能就会匹配成功。</p> 
<hr> 
<p><strong>update方法</strong><br> <strong>update方法的作用是更新工作内存中的数据，并让相关的规则重新匹配。</strong> <em>可能会造成死循环问题</em></p> 
<pre><code class="prism language-java"><span class="token comment">//当前规则用于测试内置update方法</span>
rule <span class="token string">"age less then 10"</span>
    when
        $student<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>age <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span>
    then
        $student<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">update</span><span class="token punctuation">(</span>$student<span class="token punctuation">)</span><span class="token comment">//update方法用于修改fact对象，会导致相关规则重新匹配</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"age less then 10 触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end

rule <span class="token string">"age less then 20 and greater than 10"</span>
    when
        $student<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>age <span class="token generics"><span class="token punctuation">&lt;</span> 20 <span class="token operator">&amp;</span><span class="token operator">&amp;</span> age <span class="token punctuation">&gt;</span></span> <span class="token number">10</span><span class="token punctuation">)</span>
    then
        <span class="token comment">//$student.setAge(15);</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"age less then 20 and greater than 10 触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end
</code></pre> 
<p><strong>insert方法</strong></p> 
<p>insert方法的作用是向工作内存中插入数据，并让相关的规则重新匹配。</p> 
<pre><code class="prism language-java"><span class="token comment">//当前方法用来处理insert内置方法</span>
rule <span class="token string">"age == 10"</span>
     when
        $student<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>age <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span>
     then
        <span class="token class-name">Student</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        stu<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">insert</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//insert方法作用是向工作内容中插入fact对象，会导致相关规则重新匹配</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"age == 10 触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end
</code></pre> 
<p><strong>retract方法</strong><br> <strong>retract方法的作用是删除工作内存中的数据，并让相关的规则重新匹配。</strong></p> 
<pre><code class="prism language-java"><span class="token comment">//当前规则用来测试内置的retract方法</span>
rule <span class="token string">"age equal 10"</span>
     salience <span class="token number">10</span> <span class="token comment">//指定规则的优先级</span>
     when
        $student<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>age <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span>
     then
        <span class="token function">retract</span><span class="token punctuation">(</span>$student<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//retract方法作用是删除工作内容中的fact对象，会导致相关规则重新匹配</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"age equal 10 触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end
</code></pre> 
<h3><a id="27__attributes_295"></a>2.7.规则属性 attributes</h3> 
<p><strong>介绍规则体构成中的attributes部分</strong> Drools中提供的属性如下表(部分属性)：</p> 
<table><thead><tr><th align="left">属性名</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">salience</td><td align="left">指定规则执行优先级</td></tr><tr><td align="left">dialect</td><td align="left">指定规则使用的语言类型，取值为java和mvel</td></tr><tr><td align="left">enabled</td><td align="left">指定规则是否启用</td></tr><tr><td align="left">date-effective</td><td align="left">指定规则生效时间</td></tr><tr><td align="left">date-expires</td><td align="left">指定规则失效时间</td></tr><tr><td align="left">activation-group</td><td align="left">激活分组，具有相同分组名称的规则只能有一个规则触发</td></tr><tr><td align="left">agenda-group</td><td align="left">议程分组，只有获取焦点的组中的规则才有可能触发</td></tr><tr><td align="left">timer</td><td align="left">定时器，指定规则触发的时间</td></tr><tr><td align="left">auto-focus</td><td align="left">自动获取焦点，一般结合agenda-group一起使用</td></tr><tr><td align="left">no-loop</td><td align="left">防止死循环</td></tr></tbody></table> 
<ul><li><code>enabled属性：</code> 默认为true,用于指定当前规则是否启用，取值为true或者false</li><li><code>dialect属性：</code>默认为java,用于指定当前规则使用的语言类型,取值为java或mvel</li><li><code>salience属性：</code>用于指定规则执行的优先级，取值类型为Integer,数值越大优先级越高，若不设置优先级属性，默认从上往下执行</li><li><code>no-loop属性：</code>用来防止死循环，当规则通过update之类的函数修改了Fact对象时，可能导致当前规则被再次激活导致死循环。取值类型为Boolean，默认为false</li><li><code>activation-group属性：</code>用来激活分组，取值为String类型。具有相同分组名称的规则只能有一个规则被触发</li><li><code>agenda-group属性：</code>属性为议程分组，属于另一种可控的规则执行方式。用户可以通过设置agenda-group来控制规则的执行，只有获得焦点的组中的规则才能触发。</li><li><code>auto-focus属性：</code>自动获取焦点，取值类型为Boolean，默认为false。一般结合agenda-group属性使用，当一个议程分组未获得焦点时，可以设置auto-focus属性来控制。(同一个组只要有一个获取焦点将都获得焦点)</li><li><code>timer属性：</code>可以通过定时器的方式指定规则执行的时间，使用方式有两种。<br> 方式一：<code>timer(int:&lt;initial delay&gt;&lt;repeat interval&gt;?)</code>此种方式遵循Timer对象的使用方式，第一个参数标识几秒后执行，第二个参数表示每隔几秒执行一次，第二个参数为可选。<br> 方式二：<code>timer(cron:&lt;cron expression&gt;)</code>此方式使用标准的unix cron表达式的使用方式来定义规则执行的时间。</li></ul> 
<pre><code class="prism language-java">rule <span class="token string">"timer_rule_1"</span>
    <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">3</span>s <span class="token number">2</span>s<span class="token punctuation">)</span>
    when

    then
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"触发timer_rule_1规则"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end

rule <span class="token string">"timer_rule_2"</span>
    <span class="token function">timer</span><span class="token punctuation">(</span>cron<span class="token operator">:</span><span class="token number">0</span><span class="token operator">/</span><span class="token number">1</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">?</span><span class="token punctuation">)</span>
    when

    then
    <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"触发timer_rule_2规则"</span> <span class="token operator">+</span> sdf<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end
</code></pre> 
<ul><li><code>date-effective属性：</code>用来指定规则的生效时间，即只有当前系统时间大于或等于设置的时间或者日期规则才有可能触发，默认日期格式为：dd-MMM-yyyy,用户也可以自定义日期格式。</li></ul> 
<pre><code class="prism language-java"><span class="token comment">//当前规则文件用来测试date-effective属性</span>
rule <span class="token string">"rule-date-effective-1"</span>
    date<span class="token operator">-</span>effective <span class="token string">"2021-11-03 19:45"</span><span class="token comment">//用于指定当前规则生效时间</span>
    when

    then
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"rule-date-effective-1规则触发，触发的时间为"</span><span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
end
</code></pre> 
<ul><li><code>date-expires属性：</code>用来指定规则失效的时间，即只有当前系统时间小于设置的时间或者日期规则才有可能触发，默认日期格式为：dd-MMM-yyyy,用户也可以自定义日期格式。</li></ul> 
<pre><code class="prism language-java">rule <span class="token string">"rule_date_expires_1"</span>
    date<span class="token operator">-</span>expires <span class="token string">"2021-11-03 19:50"</span>
    when
    then
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"rule_date_expires_1规则触发，触发的时间为"</span><span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd HH:mm"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 end
</code></pre> 
<h3><a id="28Drools_365"></a>2.8.Drools进阶语法介绍</h3> 
<p><code>global全局变量</code></p> 
<ul><li><code>global：</code> global关键字用于在规则文件中定义全局变量，他可以让应用程序的对象在规则文件中能够访问。可以用来为规则文件提供数据或服务。</li><li><code>语法结构：</code> <strong>global 对象类型 对象名称</strong></li><li><code>两点注意</code> 1、如果对象类型为包装类型时，在一个规则中改变了global的值，那么只针对当前规则有效，对其他规则中的global不会有影响，可以理解为他是当前规则代码中的global副本，规则内部修改不会影响全局的使。<br> 2、如果对象类型时集合类型或者JavaBean时，在一个规则中改变了global的值，对Java代码和所有规则都有效。</li></ul> 
<pre><code class="prism language-java"><span class="token comment">//测试global全局变量</span>

global <span class="token class-name">Integer</span> count<span class="token comment">//定义一个包装类型的全局变量</span>
global <span class="token class-name">List</span> gList<span class="token punctuation">;</span><span class="token comment">//定义个一个集合类型的全局变量</span>
global <span class="token class-name">UserService</span> userService<span class="token comment">//定义一个JavaBean全局变量</span>

rule <span class="token string">"rule_global_1"</span>
    when

    then
    count<span class="token operator">+=</span><span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">//对于包装类型的全局变量的修改只针对当前规则生效</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"规则rule_global_1触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"全局变量count计算之后为"</span><span class="token operator">+</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
    gList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"chenfeng"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//修改集合全局变量</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1集合全局变量的size："</span><span class="token operator">+</span>gList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 end

 rule <span class="token string">"rule_global_2"</span>
     when

     then
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"规则rule_global_2触发"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"全局变量的值为"</span><span class="token operator">+</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"2集合全局变量的size："</span><span class="token operator">+</span>gList<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       userService<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  end
</code></pre> 
<hr> 
<p><code>query查询：</code>query查询提供了一种查询working memory中符合约束条件的Fact对象的简单方法，他仅包含规则文件中的LHS部分不用知道when和then部分并且以end结束。具体语法如下</p> 
<pre><code class="prism language-java">query 查询的名称<span class="token punctuation">(</span>可选参数<span class="token punctuation">)</span> 
        LHS
  	END
</code></pre> 
<pre><code class="prism language-java"><span class="token comment">//当前规则文件用来测试query查询</span>

<span class="token comment">//定义一个query查询</span>
query <span class="token string">"query_1"</span>
    $s<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>age<span class="token operator">==</span><span class="token number">50</span><span class="token punctuation">)</span>
end

<span class="token comment">//带有查询参数的query</span>
query <span class="token string">"query_2"</span><span class="token punctuation">(</span><span class="token class-name">String</span> sname<span class="token punctuation">)</span>
     $s<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>age <span class="token operator">&gt;</span> <span class="token number">50</span> <span class="token operator">&amp;&amp;</span> sname<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>
   <span class="token comment">// $s:Student(age &gt; 50 &amp;&amp; name==sname)</span>
end
</code></pre> 
<hr> 
<p><code>function关键字：</code>function关键字用于在规则文件中定义函数，相当于Java类中的方法。可以在规则体中调用定义的函数。使用函数的好处是可以将业务逻辑集中放置在同一个位置，根据需要可以对函数进行修改。语法结构如下：</p> 
<pre><code class="prism language-java">function 返回值类型 函数名<span class="token punctuation">(</span>可选参数<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token comment">//逻辑代码</span>
<span class="token punctuation">}</span>
</code></pre> 
<pre><code class="prism language-java"><span class="token comment">//当前规则文件用于测试function自定义函数</span>

function <span class="token class-name">String</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">return</span> name <span class="token operator">+</span> <span class="token string">"HelloWorld"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//定义一个规则调用自定义函数</span>
rule <span class="token string">"rule_function_1"</span>
    when
        $student<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>age <span class="token operator">==</span> <span class="token number">18</span><span class="token punctuation">)</span>
    then

       <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token function">sayHi</span><span class="token punctuation">(</span>$student<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"自定义函数的结果为"</span><span class="token operator">+</span><span class="token string">"("</span><span class="token operator">+</span>s<span class="token operator">+</span><span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 end
</code></pre> 
<hr> 
<h3><a id="29Drools_LHS_453"></a>2.9.Drools LHS高级部分</h3> 
<p><code>LHS加强：</code>在规则体中LHS部分是介于when和then之间的部分，主要用于模式匹配，只有匹配结果为true时，才会触发RHS部分的执行。</p> 
<ul><li><code>复合值限制(in/not in)：</code>复合值限制是指超过一种匹配值的条件，类似Sql中的in关键字，在drools规则体中的LHS部分可以使用in或not in进行复合值匹配，语法结构如下<br> <code>Object(field in(比较值1,比较值2....))</code></li></ul> 
<pre><code class="prism language-java">rule <span class="token string">"rule_lhs_1"</span>
    when
        $s<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>name in <span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token string">"王五"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    then
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"规则rule_lhs_1触发。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 end
 
 rule <span class="token string">"rule_lhs_2"</span>
     when
         $s<span class="token operator">:</span><span class="token class-name">Student</span><span class="token punctuation">(</span>name not in <span class="token punctuation">(</span><span class="token string">"张三"</span><span class="token punctuation">,</span><span class="token string">"李四"</span><span class="token punctuation">,</span><span class="token string">"王五"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
     then
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"规则rule_lhs_2触发。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  end
</code></pre> 
<ul><li> <p><code>条件元素eval:</code> 用于规则体的LHS部分，并返回一个Boolean型的值。语法结构如下:<br> <code>eval(表达式)</code> eval(true) eval(false) eval(1==1) <br></p> </li><li> <p><code>条件元素not</code>用于判断Working Memory（工作空间）中是否存在某个Fact对象，如果不存在则返回true，如果存在则返回false，语法结构如下<br> <code>not object(可选属性约束) eg：not Student(); not Student(age&lt;10)</code></p> </li></ul> 
<pre><code class="prism language-java"> rule <span class="token string">"rule_lhs_3"</span>
     when
        not <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     then
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"规则rule_lhs_3触发。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  end
</code></pre> 
<ul><li><code>条件元素exists</code> 与not作用相反，用于判断Working Memory（工作空间）中是否存在某个Fact对象，如果存在则返回true，如果不存在则返回false，语法结构如下<br> <code>exists object(可选属性约束) eg：exists Student(); exists Student(age&lt;10)</code></li></ul> 
<pre><code class="prism language-java"><span class="token comment">//使用exists规则</span>
 rule <span class="token string">"rule_lhs_4"</span>
     when
        exists <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     then
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"规则exists触发。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  end
</code></pre> 
<p>与不加的区别：当向Working Memory中加入多个满足条件的Fact对象时，使用了exists的规则执行一次，不使用exists的规则会执行多次。</p> 
<ul><li><code>规则继承(extends)：</code>规则之间可以使用extends关键字进行规则条件部分的继承，类似与Java之间的继承。</li></ul> 
<h3><a id="210Drools_RHS_509"></a>2.10.Drools RHS高级部分</h3> 
<p><code>RHS部分加强：</code>RHS是规则体的重要组成部分，当LHS部分的条件匹配成功之后，对应的RHS部分就会触发执行，一般在RHS部分进行业务处理，在RHS部分Drools为我们提供了一个内置对象：drools，下面介绍这个内置对象的用法。</p> 
<ul><li><code>halt方法：</code>halt方法的作用是立即终止后面所有规则的执行。</li><li><code>getWorkingMemory方法：</code>getWorkingMemory方法的作用是返回工作内存对象。</li><li><code>getRule方法：</code>getRule方法的作用是返回规则对象。</li></ul> 
<pre><code class="prism language-java"><span class="token comment">//用来测试RHS部分drools内置对象的相关方法</span>

rule <span class="token string">"rule_drools_1"</span>
    when
    then

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"规则rule_drools_1触发了"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">WorkingMemory</span> workingMemory <span class="token operator">=</span> drools<span class="token punctuation">.</span><span class="token function">getWorkingMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得工作内存对象，本质是一个会话session对象。</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>workingMemory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>drools<span class="token punctuation">.</span>core<span class="token punctuation">.</span>definitions<span class="token punctuation">.</span>rule<span class="token punctuation">.</span>impl<span class="token punctuation">.</span></span>RuleImpl</span> rule <span class="token operator">=</span> drools<span class="token punctuation">.</span><span class="token function">getRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获得规则对象</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">;</span>
    drools<span class="token punctuation">.</span><span class="token function">halt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当前方法会终止后面所有规则的执行</span>
 end
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4a50b3d618dd18c5876e5d5816a573d0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java项目poi插件导出Excel文件名中文乱码</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ddd0c64bc98e5456e4b78d34de6d8b52/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">tkinter的grid布局定位方式图示详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>