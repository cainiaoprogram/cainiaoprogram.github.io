<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python &#43; Steamlit 快速开发可视化 web 页面！ - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python &#43; Steamlit 快速开发可视化 web 页面！" />
<meta property="og:description" content="用Python做web图形用户界面，最先想到的是Flask、Djong等框架。然而研究这些对于初学者来讲，尤其是没有web开发基础的数据分析人员是痛苦的。
幸运的是，Python中也有很多第三方库来快速进行简单的web可视化，例如之前介绍的 PyWebIO
今天再介绍一个 Steamlit，可以快速利用简单的代码快速布局自己想要的web界面！
一、安装与运行 安装之前，我们需要将 Python 的版本升级到3.7或以上，同时设置好环境变量，这里默认读者都已经设置好不细讲。
在 Windows 或 macOS 中都可以使用pip进行安装
pip install streamlit 在终端输出完毕后，可以执行streamlit hello来检验，如果出现新的网页界面，则说明安装成功。
并且之后利用Streamlit写的程序，需要通过运行streamlit run {你的py文件}来实现。
二、常用命令 接下来我们来了解 Streamlit 的一些常用命令。首先引入相关库
import streamlit as st import numpy as np import pandas as pd import time 构建 MLweb 的标识题目，可以利用st.title()函数创建一个标题。
st.title(&#39;我的第一个MLweb&#39;) 保存这个py文件，命名为test.py，利用我们第一部分讲解如何运行代码，在命令窗口输入streamlit run test.py。
注意，这里直接用 streamlit 是已经调好了环境变量，如果不想调的，打开 streamlit 的源程序文件，将streamlit的exe文件调用即可。
正常运行下会弹出一个 localhost网页，效果如下
输入文字 如果需要输入文字，可以用st.text_input()函数
构建MLWeb表格 机器学习里面我们必须要做的是查看数据的类型，维度等具体特征。比如我们总是用到df.head()，那么在MLweb里面怎么实现？
有几个方法：st.table()，st.dataframe()，st.write()。
其中st.write()是常见的表格函数，st.write()被称为streamlit库的瑞士军刀，图像、文本、表格都可以用它来实现，至于三者有什么区别呢？
st.write()：交互式表格，不可修改
st.table()：静态表格
st.dataframe()：返回一个可以使用和修改的对象，可以向其中添加数据或替换数据.
代码如下
st.write(&#34;尝试运用dataframe弄一个表格&#34;) df = pd.DataFrame({ &#39;第一列&#39;:[1,2,3,4], &#39;第二列&#39;:[&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;]}) st." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e3637f842b20beeff9b09e2b41563c41/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-25T11:19:47+08:00" />
<meta property="article:modified_time" content="2021-10-25T11:19:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python &#43; Steamlit 快速开发可视化 web 页面！</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>用Python做web图形用户界面，最先想到的是<code>Flask</code>、<code>Djong</code>等框架。然而研究这些对于初学者来讲，尤其是没有web开发基础的数据分析人员是痛苦的。</p> 
<p> </p> 
<p>幸运的是，Python中也有很多第三方库来快速进行简单的web可视化，例如之前介绍的 <a href="https://mp.weixin.qq.com/s?__biz=Mzg5OTU3NjczMQ==&amp;mid=2247520184&amp;idx=1&amp;sn=159034529b1998d0b72e5fb04ea99976&amp;chksm=c053e94cf724605ac5e7432255f62c529cae0f233287ab7cd429cfa2e9b2f809fc0d8388c8db&amp;token=909635098&amp;lang=zh_CN#rd" rel="nofollow" title="PyWebIO">PyWebIO</a></p> 
<p>今天再介绍一个 <code>Steamlit</code>，可以快速利用<strong>简单的代码</strong>快速布局自己想要的<strong>web界面</strong>！</p> 
<h3>一、安装与运行</h3> 
<p>安装之前，我们需要将 <code>Python</code> 的版本升级到3.7或以上，同时设置好环境变量，这里默认读者都已经设置好不细讲。</p> 
<p>在 <code>Windows</code> 或 <code>macOS</code> 中都可以使用pip进行安装</p> 
<pre><code>pip install streamlit
</code></pre> 
<p>在终端输出完毕后，可以执行<code>streamlit hello</code>来检验，如果出现新的网页界面，则说明安装成功。</p> 
<p>并且之后利用<code>Streamlit</code>写的程序，需要通过运行<code>streamlit run {你的py文件}</code>来实现。</p> 
<h3>二、常用命令</h3> 
<p>接下来我们来了解 <code>Streamlit</code> 的一些常用命令。首先引入相关库</p> 
<pre><code>import streamlit as st
import numpy as np
import pandas as pd
import time
</code></pre> 
<p>构建 <code>MLweb</code> 的标识题目，可以利用<code>st.title()</code>函数创建一个标题。</p> 
<pre><code>st.title('我的第一个MLweb')
</code></pre> 
<p>保存这个py文件，命名为<code>test.py</code>，利用我们第一部分讲解如何运行代码，在命令窗口输入<code>streamlit run test.py</code>。</p> 
<p>注意，这里直接用 <code>streamlit</code> 是已经调好了环境变量，如果不想调的，打开 <code>streamlit</code> 的源程序文件，将streamlit的exe文件调用即可。</p> 
<p>正常运行下会弹出一个 <code>localhost</code>网页，效果如下</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0b/e5/JLBKhncD_o.png"></p> 
<h4>输入文字</h4> 
<p>如果需要输入文字，可以用<code>st.text_input()</code>函数</p> 
<h4>构建MLWeb表格</h4> 
<p>机器学习里面我们必须要做的是查看数据的类型，维度等具体特征。比如我们总是用到<code>df.head()</code>，那么在MLweb里面怎么实现？</p> 
<p>有几个方法：<code>st.table()</code>，<code>st.dataframe()</code>，<code>st.write()</code>。</p> 
<p>其中<code>st.write()</code>是常见的表格函数，<code>st.write()</code>被称为<code>streamlit</code>库的瑞士军刀，图像、文本、表格都可以用它来实现，至于三者有什么区别呢？</p> 
<ul><li> <p><code>st.write()</code>：交互式表格，不可修改</p> </li><li> <p><code>st.table()</code>：静态表格</p> </li><li> <p><code>st.dataframe()</code>：返回一个可以使用和修改的对象，可以向其中添加数据或替换数据.</p> </li></ul> 
<p>代码如下</p> 
<pre><code>st.write("尝试运用dataframe弄一个表格")
df = pd.DataFrame({
    '第一列':[1,2,3,4],
    '第二列':['a','b','c','d']})
st.table(df)
st.write("尝试运用dataframe弄一个表格---write函数")
st.write(pd.DataFrame({
    'first column': [1, 2, 3, 4],
    'second column': [10, 20, 30, 40]
}))
</code></pre> 
<p>效果如图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/c3/bc/253QMPEA_o.png"></p> 
<p>利用write函数则效果如下</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/60/26/d8fPl2gt_o.png"></p> 
<h3>可视化</h3> 
<p>机器学习挖掘数据的过程中可视化同样占据了举足轻重的地位，这里我们构使用<code>st.line_chart()</code>函数</p> 
<pre><code>chart_data = pd.DataFrame(
     np.random.randn(20, 3),
     columns=['a', 'b', 'c'])

st.line_chart(chart_data)
</code></pre> 
<p>效果如下：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/a3/86/QS75TFEa_o.png"></p> 
<p>可以看到，<code>streamlit</code>给了我们方便的功能：下载或查看我们构建的图片，你甚至可以查看图片的源代码！</p> 
<h3>地图</h3> 
<p><code>streamlit</code>里面有一个它时常拿来当门面的图，就是旧金山的地图，你或许利用Flask在创建地图，读取坐标点，个性化地图，显示在web端这些步骤花费大量时间。</p> 
<p>而在这里，你进需要提供你的坐标点构成的数据框，并用<code>st.map()</code>函数即可，这里用广东广州的坐标点(不太精准哈)来画图</p> 
<p>代码如下：</p> 
<pre><code>map_data = pd.DataFrame(
    np.random.randn(1000, 2) / [50, 50] + [23.26, 113.57],  #N,W
    columns=['lat', 'lon'])
st.map(map_data)
</code></pre> 
<p>效果图如下</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/74/66/d7mxah7F_o.png"></p> 
<h3>实战</h3> 
<p>最后我们来实现一个简单股票查询系统。基本想法如下</p> 
<p><strong>输入</strong>：用户写入股票代码，起始时间，结束时间。</p> 
<p><strong>输出</strong>：股票交易数据表，股票ma线可视化。</p> 
<p>首先引入包</p> 
<pre><code>import streamlit as st
import pandas as pd
import numpy as np
import tushare as ts
</code></pre> 
<p>接下来设置标题与可写入文本,这里的文本是在web端输入的，用到<code>st.text_input()</code>函数</p> 
<pre><code>st.title('股票查询系统')
code = st.text_input('你的股票名称：',help = 'code：股票代码，即6位数字代码，或者指数代码（sh=上证指数 sz=深圳成指 hs300=沪深300指数 sz50=上证50 zxb=中小板 cyb=创业板）')
start_time = st.text_input('起始时间：')
stop_time = st.text_input('结束时间：')
</code></pre> 
<p><strong>注意</strong>：这里的日期时间默认以<code>年-月-日</code>格式输入，同时在股票名称旁边加入一个辅助帮助说明。</p> 
<p>现在进行股票名称获取，我们用<code>tushare</code>库作为股票交易数据获取，注意需要tushare的pro接口的api才能通过股票代码获取股票公司名称</p> 
<pre><code>def get_name(stoke_code):
    pro=ts.pro_api()
    dat = pro.query('stock_basic', fields='symbol,name')                
    company_name = list(dat.loc[dat['symbol'] == stoke_code].name)[0] 
    return company_name
</code></pre> 
<p>接着对股票交易数据显示，用到<code>st.dataframe()</code>函数来让用户更直观的看到获取的交易数据</p> 
<pre><code>data = ts.get_hist_data('{}'.format(code),start = '{}'.format(start_time),
                 end = '{}'.format(stop_time))
st.write('股票代码为{}的交易数据表'.format(code))
st.dataframe(data)
</code></pre> 
<p>最后可视化ma短线长线</p> 
<pre><code>if code != '':
    data1 = data[['close','ma5','ma10']]
    st.line_chart(data1)
else:
    pass
</code></pre> 
<p>MACD治标是大家常看的指标，那么我们将ma5和ma10在图标上显示，并画上收盘价，读者可以自行验证MACD的黄金或死亡交叉！最终效果见下方视频</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/617f38039527d4aee6db1d4dd0469d89/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">1024数据库图书管理系统创建</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ca55fafab429d2414638af57c7875e72/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">计算机网络通信基础 物理层与数据链路层</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>