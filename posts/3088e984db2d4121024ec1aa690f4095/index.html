<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SPM12入门案例2 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SPM12入门案例2" />
<meta property="og:description" content="Face fMRI data 要求实验者通过按键来判断知名度。因此这里有4种兴趣的类型；第一二步显示出有知名度和没有知名度的人脸，代表着N1,N2,F1和F2。
###准备工作
通过EPI获得图像，其中回复时间TE=40ms，重复时间TR=2s，24个下降的切片，3mm厚和1.5mm间距。数据获取：Face Repetition dataset创建face_rep的文件夹用来存放分析的结果，创建4个子文件夹jobs存,categorical,parametric,bayesian。 除了分类和贝叶斯的区别，我们还将展示如何从参数和分类的角度分析这些数据。具体基础详见上节
Spatial pre-processing Display 点击Display显示图片，注意眶额部(orbitofrontal)和颞下部的缺失和重影。点击Brighten能够更清晰的看到图片
Realignment 在SPM基本窗口的空间预处理部分中，从REALIGN的下拉菜单中选择**Realign (Est &amp; Res) **。选择data,然后点击New Session创建新的Session，在数据集test_face_rep下的RawEPI中选择351个图片。保存批处理命名为realign.mat，点击Run运行，在源文件夹下产生functional image并且以r为前缀命名，然后SPM将估算的绘制出translation和rotation的时间序列图。重新分配的参数的数据将被存储于类似rp_sM03953_0005_0006.txt，当拟合广义线性模式时(GLMs)这些变量可以作为回归量(regressors)。在寻找大脑活动时，运动产生的影响能够被忽略。
在spatial processing - coregistration中，SPM将产生mean image。 Slice timing correction 点击Slice Timing按钮，弹出批处理窗口。这些数据由TR=2s并且N=24个连续采集的轴向切片按照递减的序列组成，并且按照逆序的序列获得。
注意:TA=(TR-TR/N)
点击Data然后选择New Session，过滤并且选择**^r.***的文件总共351个文件Number of Slices输入24，表示连续采集的轴向切片TR=2,TA=(2-2/24)Slice order输入24?1,Reference Slice输入12保存为slice_timing.mat点击运行，产生默认前缀是a的slice-time校准的文件。在RawEPI文件夹下形成 Coregistration 在Coregister的下拉菜单中选择COREGISTER(ESTIMATE)。Reference Image选择RawEPI文件夹下的meansM03953_0005_0006.img，Source Image中选择结构图像在Structural的sM03953_0007.img保存为coreg.job然后点击Run按钮
然后SPM将实现结构数据与功能数据之间的配准，即最大化实现共同的信息。
左侧为Reference Image右侧为Source Image Segmentation 点击SEGMENT按钮，点击Volumes，选择Structral中的配准后的实验者解剖图像sM03953_0007.img。将Save Bias Corrected中的Save Nothing修改为Save Bias Corrected，在最下面的**“Deformation Fields中的值由Nothing修改为Forward**。保存为segment.mat，点击运行按钮。SPM将使用默认的组织概率图作为先验对结构图像进行分割。SPM将产生灰质、白质的图像和偏磁场校正的结构图像。通过使用Check Reg工具能够显示这些图片。选择Structural中c1sM03953_0007.nii的灰质图像与原始的结构图像sM03953_0007.img，并将产生空间正则化图像y_sM03953_0007.nii
Normalise 选择Normalise(Write)按钮，点击Data，然后点击New Subject点击Deformation Field，选择y_sM03953_0007.nii按钮点击Image to write选择经Slice timing corrected处理过的351个文件以及在realign期间生成的平均功能图像e meansM03953_0005_006.img将Voxel size从[2 2 2]修改为[3 3 3]保存为normalise.mat 并运行程序。在RawEPI文件夹下生成带有前缀w的spatially normalised文件" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3088e984db2d4121024ec1aa690f4095/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-05-28T13:15:49+08:00" />
<meta property="article:modified_time" content="2019-05-28T13:15:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SPM12入门案例2</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a></h2> 
<hr> 
<h3><a id="Face_fMRI_data_2"></a>Face fMRI data</h3> 
<p>要求实验者通过按键来判断知名度。因此这里有4种兴趣的类型；第一二步显示出有知名度和没有知名度的人脸，代表着N1,N2,F1和F2。</p> 
<p>###准备工作</p> 
<ol><li>通过EPI获得图像，其中<strong>回复时间</strong>TE=40ms，<strong>重复时间</strong>TR=2s，24个下降的切片，3mm厚和1.5mm间距。</li><li>数据获取：<a href="http://www.fil.ion.ucl.ac.uk/spm/data/face_rep/" rel="nofollow">Face Repetition dataset</a></li><li>创建<strong>face_rep</strong>的文件夹用来存放分析的结果，创建4个子文件夹<strong>jobs</strong>存,<strong>categorical</strong>,<strong>parametric</strong>,<strong>bayesian</strong>。</li></ol> 
<p><font color="#FF000">除了分类和贝叶斯的区别，我们还将展示如何从参数和分类的角度分析这些数据。具体基础详见上节</font></p> 
<h4><a id="Spatial_preprocessing_16"></a>Spatial pre-processing</h4> 
<h5><a id="Display_17"></a>Display</h5> 
<p>点击<strong>Display</strong>显示图片，注意眶额部(orbitofrontal)和颞下部的缺失和重影。点击<strong>Brighten</strong>能够更清晰的看到图片</p> 
<h5><a id="Realignment_20"></a>Realignment</h5> 
<ol><li>在SPM基本窗口的空间预处理部分中，从<strong>REALIGN</strong>的下拉菜单中选择**Realign (Est &amp; Res) **。</li><li>选择<strong>data</strong>,然后点击<strong>New Session</strong>创建新的<strong>Session</strong>，在数据集<strong>test_face_rep</strong>下的<strong>RawEPI</strong>中选择351个图片。</li><li>保存批处理命名为<strong>realign.mat</strong>，点击Run运行，在源文件夹下产生<strong>functional image</strong>并且以<strong>r为前缀</strong>命名，然后SPM将估算的绘制出<strong>translation</strong>和<strong>rotation</strong>的时间序列图。重新分配的参数的数据将被存储于类似<strong>rp_sM03953_0005_0006.txt</strong>，当拟合广义线性模式时(GLMs)这些变量可以作为回归量(regressors)。在寻找大脑活动时，运动产生的影响能够被忽略。<br> <img src="https://images2.imgbox.com/3a/27/dEWOgA00_o.png" alt="在这里插入图片描述"></li><li>在<strong>spatial processing - coregistration</strong>中，SPM将产生mean image。</li></ol> 
<h5><a id="Slice_timing_correction_27"></a>Slice timing correction</h5> 
<p>点击<strong>Slice Timing</strong>按钮，弹出批处理窗口。这些数据由TR=2s并且N=24个连续采集的轴向切片按照递减的序列组成，并且按照逆序的序列获得。<br> <font color="#FF000">注意</font>:TA=(TR-TR/N)</p> 
<ol><li>点击<strong>Data</strong>然后选择<strong>New Session</strong>，过滤并且选择**^r.***的文件总共351个文件</li><li><strong>Number of Slices</strong>输入<strong>24</strong>，表示连续采集的轴向切片</li><li>TR=2,TA=(2-2/24)</li><li><strong>Slice order</strong>输入<strong>24?1</strong>,<strong>Reference Slice</strong>输入12</li><li>保存为<strong>slice_timing.mat</strong>点击运行，产生默认前缀是<strong>a</strong>的<strong>slice-time</strong>校准的文件。<font color="#FF000">在RawEPI文件夹下形成</font></li></ol> 
<h5><a id="Coregistration_36"></a>Coregistration</h5> 
<ol><li>在<strong>Coregister</strong>的下拉菜单中选择<strong>COREGISTER(ESTIMATE)</strong>。</li><li><strong>Reference Image</strong>选择<strong>RawEPI</strong>文件夹下的<strong>meansM03953_0005_0006.img</strong>，<strong>Source Image</strong>中选择结构图像在<strong>Structural</strong>的<strong>sM03953_0007.img</strong></li><li>保存为<strong>coreg.job</strong>然后点击<strong>Run</strong>按钮<br> 然后SPM将实现结构数据与功能数据之间的配准，即最大化实现共同的信息。<br> <img src="https://images2.imgbox.com/3a/dd/JjU0LyFP_o.png" alt="在这里插入图片描述"><br> <font color="#FF000"><strong>左侧为Reference Image右侧为Source Image</strong></font></li></ol> 
<h5><a id="Segmentation_44"></a>Segmentation</h5> 
<ol><li>点击<strong>SEGMENT</strong>按钮，点击<strong>Volumes</strong>，选择<strong>Structral</strong>中的配准后的实验者解剖图像<strong>sM03953_0007.img</strong>。</li><li>将<strong>Save Bias Corrected</strong>中的<strong>Save Nothing</strong>修改为<strong>Save Bias Corrected</strong>，在最下面的**“Deformation Fields<strong>中的值由</strong>Nothing<strong>修改为</strong>Forward**。</li><li>保存为<strong>segment.mat</strong>，点击运行按钮。SPM将使用默认的组织概率图作为先验对结构图像进行分割。</li><li>SPM将产生灰质、白质的图像和偏磁场校正的结构图像。通过使用<strong>Check Reg</strong>工具能够显示这些图片。选择<strong>Structural</strong>中<strong>c1sM03953_0007.nii</strong>的灰质图像与原始的结构图像<strong>sM03953_0007.img</strong>，并将产生空间正则化图像<strong>y_sM03953_0007.nii</strong><br> <img src="https://images2.imgbox.com/82/49/UcAMxWfU_o.png" alt="在这里插入图片描述"></li></ol> 
<h5><a id="Normalise_51"></a>Normalise</h5> 
<ol><li>选择<strong>Normalise(Write)<strong>按钮，点击</strong>Data</strong>，然后点击<strong>New Subject</strong></li><li>点击<strong>Deformation Field</strong>，选择<strong>y_sM03953_0007.nii</strong>按钮</li><li>点击<strong>Image to write</strong>选择经<strong>Slice timing corrected</strong>处理过的351个文件以及在realign期间生成的平均功能图像<strong>e meansM03953_0005_006.img</strong></li><li>将Voxel size从[2 2 2]修改为[3 3 3]</li><li>保存为<strong>normalise.mat <strong>并运行程序。在</strong>RawEPI</strong>文件夹下生成带有<strong>前缀w</strong>的spatially normalised文件<br> <strong>注意</strong>如果你想把一个受试者的功能激活叠加到他们自己的解剖结构上，需要在实验者的解剖图像上应用空间正则化参数</li></ol> 
<ul><li>选择Normalise(Write),点击<strong>Data</strong>选择<strong>New Subject</strong></li><li>点击<strong>Deformation field</strong>后选择** y_sM03953_0007.nii**<br> <font color="#ff000">y_sM03953_0007.nii</font>该文件是经过空间正则化产生的文件</li><li>点击<strong>Images to write</strong>选择<strong>bias-corrected structural</strong>文件<strong>msM03953_0007.nii</strong>,点击<strong>Done</strong></li><li>打开<strong>Write Options</strong>将voxel size从[2 2 2]修改为[1 1 1]修改为[1 1 1.5]更好</li><li>将任务保存为<strong>norm_struct.mat</strong>然后运行</li></ul> 
<h5><a id="Smoothing_65"></a>Smoothing</h5> 
<ul><li>点击<strong>Smooth</strong>，选择<strong>Images to Smooth</strong>，然后选择上部分形成的<strong>spatiallly normalised</strong>文件<strong>war*.img</strong></li><li>保存为<strong>smooth.mat</strong>然后点击运行<br> 使数据在每个方向8mm变得平滑。</li><li>点击左侧菜单<strong>Check Reg</strong>选择任意序列的<strong>functional image</strong>与之匹配的<strong>8mm-smoothed functional image</strong>，<strong>functional image以前缀r开头</strong>，选择<strong>03953_0005_0006.img</strong>作为示例。<br> <img src="https://images2.imgbox.com/db/f1/D6iB6p1a_o.png" alt="上面是functional image下面是8mm-smoothed functional image"></li></ul> 
<h4><a id="Modelling_categorical_responses_71"></a>Modelling categorical responses</h4> 
<p>在设置<strong>design matrix</strong>之前，必须先在matlab中加载** Stimulus Onsets Times(SOTs)<strong>。SOTs存储于单元格数组中的</strong>sots.mat**。包含事件类型1在TRs中的刺激起始时间N。事件类型2，3，4分别代表N2，F1和F2。</p> 
<ul><li>在Matlab命令行中输入<strong>load sots.mat</strong>该文件保存于解压文件夹下。点击<strong>SPECIFY 1ST-LEVEL</strong>按钮。</li><li>对于<strong>Directory</strong>选择之前创建的<strong>categorical</strong>文件夹</li><li>在<strong>Timing parameters</strong>选项，点击<strong>Units for design</strong>选择<strong>Scans</strong></li><li>点击<strong>Interscan interval</strong>设置为2</li><li>点击<strong>Microtime resolution</strong>设置为24</li><li>点击<strong>Microtime onset</strong>设置为12。最后两步操作创建的回归与我们对数据时间切片的校正相匹配。假设有24个切片，而对数据进行切片时间校正的参考切片是第12个(时间的中间切片)。</li><li>点击<strong>Data and Design</strong>和选择<strong>New Subject/Session</strong>，选择<strong>Scans</strong>，使用SPM过滤器选择351个<strong>smoothed, normalised,slice time corrected，realign functional images</strong>,**swar.***的全部文件。</li><li>点击<strong>conditions</strong>，然后选择<strong>New condition</strong>，Name设置为N1，Onset设置为sot{1}， Durations设置为0。点击<strong>Replicate condition</strong>将Name分别修改为N2，F1，F2对应修改Onsets为sot{2},sot{3},sot{4}</li><li>点击<strong>Multiple Regressors</strong>然后选择<strong>RawEPI</strong>文件夹下的**rp_sM03953_0005_0006.txt **</li><li>点击<strong>Factorial Design</strong>，选择<strong>New Factory</strong>，Name输入<strong>Fam</strong>，Levels输入<strong>2</strong>,复制一份，将Name设置为<strong>Rep</strong></li><li>在<strong>BasisFunctions</strong>下打开<strong>CanonicalHRF</strong>将<strong>Model derivatives</strong>设置为**“Time and Dispersion derivatives**</li><li>将文件保存为**categorical_spec.mat **然后运行，Graphic产生如下的design matrix<br> <img src="https://images2.imgbox.com/7f/27/XigZSaSr_o.png" alt="在这里插入图片描述"></li><li>点击<strong>Meun</strong>中的<strong>Review</strong>按钮，在交互界面中选择<strong>Design</strong>按键的下拉菜单中，选择<strong>Explore–&gt;Session1–&gt;N1</strong>，<strong>Graphics</strong>中显示如下图。<br> <img src="https://images2.imgbox.com/c0/52/lT7UJoGN_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="Estimate_89"></a>Estimate</h5> 
<p>点击<strong>Estimate</strong>按钮</p> 
<ul><li>点击<strong>Select SPM.mat</strong>选项，并且选择存储在<strong>categorical</strong>文件夹下的<strong>SPM.mat</strong></li><li>保存文件为<strong>categorical_est.mat</strong><br> SPM在SPM.mat目录下产生一系列文件</li></ul> 
<h5><a id="Inference_for_categorical_design_96"></a>Inference for categorical design</h5> 
<p>点击<strong>Result</strong>然后在选择**/categorical<strong>中的</strong>SPM.mat**。这次调用对比度管理器，因为我们指定我们的模型使用的"<strong>Factorial design</strong>"所以自动指定了许多对比。</p> 
<ul><li>选择对比序号为<strong>005</strong>。这是T-contrast 的<strong>Positive effect of condition_1</strong>。根据第一个回归模型可以得到显示一个很强的积极作用的呈现脸部的平均效果的区域。</li><li>Apply masking <strong>None</strong></li><li>p value <strong>FWE</strong></li><li>校正p value–&gt;<strong>0.05</strong></li><li>Extend threshold接受默认 value–&gt;<strong>0</strong><br> <img src="https://images2.imgbox.com/cb/62/N3djnUlf_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="Statistical_tables_105"></a>Statistical tables</h5> 
<p>为了得到局部最大的summary，在交互界面的p-values中点击<strong>whole brain</strong>按钮。这将列出所有高于选择重要性级别的<strong>cluster</strong>，并单独列出大于8mm的cluster，下面有重要性的阈值和搜索量的详细信息<br> <font color="#ff000">注意：</font>右键点击MIP，并且选择<strong>goto global maximum</strong>。游标将移动到坐标为[39,-70,-14]。你可以在被试者的normalised、bias-corrected structural看到这个activation,这提供最佳的解剖精度，或者在标准化的平均功能，这能更接近真实的数据和空间分辨率(包括功能EPI数据的失真)。<br> 选择<strong>plot</strong>然后选择<strong>Contrast of estimates and 90%C.I</strong>(confidence interval)，并且选择<strong>Average effect of condition</strong>对比，你将看到三个bar对应于每个basis function的参数估计(bar 如下图所示)。在这个voxel上的BOLD脉冲响应主要表现在<strong>canonical HRF</strong>,但是在时间和dispersion derivatives也有很重要的体现。<br> <font color="#ff000">HRF：Hemodynamic response function 血流动力学影响函数</font><br> <img src="https://images2.imgbox.com/e2/b3/slTjXjAh_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="Fcontrasts_111"></a>F-contrasts</h5> 
<p>正如HRF和其导数所描述的，为了评估repeating faces 的主要影响，需要一个F-contrast。考虑是否反复改变脉冲信号的形状（它可能会影响潜伏期，但不会影响峰值振幅），三个basis functions定义了形状的范围。因为我们必须告诉SPM有factorial design，所需要的对比度将自动创建的是No.3。</p> 
<ul><li>点击<strong>Result</strong>，选择<strong>SPM.mat</strong>。</li><li>选择<strong>F-contrast</strong>，选择序号为<strong>003</strong>的实验</li><li>Apply masking?<strong>Contrast</strong></li><li>选择** contrast 5 - Positive effect of condition_1 **(我们在上面比较过，不同条件下激活与基线的T-contrast)</li><li><strong>uncorrected mask p-value</strong>修改为<strong>0.001</strong></li><li><strong>nature of mask</strong>选择<strong>inclusive</strong></li><li><strong>p value adjustment to control</strong>选择<strong>none</strong></li><li>接受默认阙值<strong>0</strong></li></ul> 
<p>右键点击<strong>goto global max</strong>，坐标为[42 -64 -8]</p> 
<ul><li>点击<strong>plot</strong>并且选择呢<strong>Event-related response</strong>，<strong>F1</strong>，<strong>fitted response and PSTH</strong>，你会看到canonical HRF及其两个导数的最佳拟合线性组合(细红线)，加上<strong>selectively-averaged</strong>数据，基于<strong>FIR</strong>的重新拟合，生成如下图所示。<br> <img src="https://images2.imgbox.com/15/ea/oLyVtMfr_o.png" alt="在这里插入图片描述"><br> 如果选择<strong>hold</strong>可以在图中呈现多个曲线，点击<strong>plot</strong>选择<strong>F2</strong>重复上一步的步骤<br> ，观察到F2的峰值小于F1的峰值<br> <img src="https://images2.imgbox.com/8d/ef/Zom7Xk4i_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="Fcontrasts_for_testing_eects_of_movement_130"></a>F-contrasts for testing eﬀects of movement</h5> 
<p>为了评估运动相关的活动。</p> 
<p>-点击<strong>Result</strong>，选择<strong>SPM.mat</strong>，选择<strong>F-contrast</strong>。<br> <font color="#ff000">未完成，该部分有问题。p263</font></p> 
<h4><a id="Modelling_parametric_responses_136"></a>Modelling parametric responses</h4> 
<p>首先通过matlab命令行加载load sots，对于每两张脸部（图像）(N2和F2)，在此(重复的)表示和之前(第一次)表示之间的其他面数。SOTs与Lags由Matlab的单元阵列组成，存储于<strong>sots.mat</strong>文件中。</p> 
<ul><li>在Matlab的命令行中输入load sots</li><li>点击<strong>SPECIFY 1ST-LEVEL</strong>按钮，点击<strong>load batch</strong>选择之前生成的<strong>categorical_spec.mat</strong></li><li>打开<strong>Conditions</strong>然后打开第二个<strong>Condition</strong></li><li>点击<strong>Parametric Modulations</strong>选择<strong>New Parameter</strong></li><li>点击<strong>Name</strong>输入<strong>Lag</strong>，输入值<strong>itemlag{2}</strong>，点击<strong>polynomial expansion</strong>和<strong>2nd order</strong></li><li>选择第4个<strong>Condition</strong>，同上操作，将输入值修改为<strong>itemlag{4}</strong></li><li>打开<strong>Basis Functions</strong>之下的<strong>Canonical HRF</strong>,点击<strong>Model derivates</strong>然后选择<strong>No derivateives</strong></li><li>点击<strong>Directory</strong>选择保存在<strong>parametric</strong>文件之下，保存为** parametric_spec.mat**然后点击运行按钮。<br> <img src="https://images2.imgbox.com/f5/a2/WzZNrPXI_o.png" alt="在这里插入图片描述"></li></ul> 
<h5><a id="Plotting_parametric_response_148"></a>Plotting parametric response</h5> 
<p>我们将研究这些通常由面孔激活的区域内，相对于基线，看到反复出现著名人物脸部的反应的影响。</p> 
<ul><li>点击<strong>Result</strong>并且选择<strong>parametric</strong>文件中的<strong>SPM.mat</strong></li><li>点击<strong>Define new contrast</strong>，然后输入<strong>name</strong>为<strong>Famous Lag</strong>,点击<strong>F-contrast</strong>按钮，在<strong>columns in reduced design</strong>中输入<strong>1:6 9:15</strong>,点击<strong>submit</strong>，然后点击<strong>OK</strong></li><li>选择对照组为<strong>Famous Lag</strong>,依次<strong>Contrast–&gt;0.05–&gt;inclusive–&gt;None–&gt;0.001–&gt;0</strong><br> <img src="https://images2.imgbox.com/09/a4/P5lzjMxx_o.png" alt="在这里插入图片描述"></li><li>右键点击<strong>global maxima</strong></li><li>点击<strong>Plot</strong>选择<strong>parametric response</strong>–&gt;<strong>F2</strong><br> <img src="https://images2.imgbox.com/9f/c3/sulURs4v_o.png" alt="在这里插入图片描述"><br> <strong>这里显示了滞后的二次效应，对于短的滞后表现出不利，但是积极的和最大滞后大约有40个间隔的面部</strong></li></ul> 
<h4><a id="Bayesian_analysis_160"></a>Bayesian analysis</h4> 
<h5><a id="Specication_161"></a>Speciﬁcation</h5> 
<p>点击<strong>SPECIFY 1ST-LEVEL</strong>按钮</p> 
<ul><li>load<strong>categorical_spec.mat</strong></li><li>打开<strong>Subject/Session</strong>点击<strong>Scans</strong>,取消已经选择经过平滑处理的图片，选择为经过平滑处理的图片(smooth)，<strong>^wa.* <strong>。贝叶斯分析使用空间先验，根据数据评估在信号中的空间规则性。因此，如果至进行</strong>Bayesian analysis</strong>，创建平滑的图像不是必要的步骤。</li><li>点击<strong>Done</strong>，选择<strong>Directory</strong>然后选择<strong>bayesian</strong>目录</li><li>保存文件<strong>specify_bayesian.mat</strong>，并运行</li></ul> 
<h5><a id="Estimation_169"></a>Estimation</h5> 
<p>点击<strong>ESTIMATE</strong>按钮</p> 
<ul><li>点击<strong>Select SPM.mat</strong>，然后保存于<strong>bayesian</strong>文件夹中</li><li>点击<strong>Method</strong>须按则<strong>Choose Bayesian 1sy-level</strong></li><li>将文件保存为<strong>estimate_bayesian.mat</strong>然后运行，在<strong>bayesian</strong>文件夹下产生大量文件</li></ul> 
<p><img src="https://images2.imgbox.com/bd/19/weHioZPs_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="Inference_177"></a>Inference</h5> 
<p>评估之后，我们使用PPM能够做后验推理。首先我们识别出相应超过特定大小的高概率区域。这与以上分类推理有着很大的区别，在<strong>classical inference</strong>寻找响应大小为0的零假设的低可能性。</p> 
<p>为了确定特殊的相应大小，我们首先做一些关于参数缩放的计算。参数估计本身具有任意的缩放，因为他们依赖于回归量的缩放。在当前的例子中，回归量的缩放取决于基础函数的缩放。为了确定这个缩放，加载<strong>SPM.mat</strong>文件，在MATLAB中输入<strong>sf=max(<a href="http://SPM.xBF.bf" rel="nofollow">SPM.xBF.bf</a>(:,1))/SPM.xBF.dt</strong>(可代替的，点击<strong>Design:Explore:Session 1</strong>选择其他的条件，然后读取canonical HRF基础函数的峰值高度)。<br> 如果你想1%的峰信号大小改变的阙值，输入PPM的阙值1/sf=4.75<br> 最后，如果想要让faces与baseline的信号大于1%，我们需要设定新的对照</p> 
<ul><li>点击<strong>Result</strong></li><li>选择<strong>bayesian</strong>中的SPM.mat文件</li><li>点击<strong>Define new contrast</strong>输入名字为<strong>AVERAGECanonicalHRF:Faces &gt; Baseline</strong>点击<strong>T-contrast</strong>按钮输入对照组**[1 0 0 1 0 0 1 0 0 1 0 0]/4<strong>点击提交</strong>submit–&gt;OK–&gt;Done–&gt;None–&gt;接受默认值0.10–&gt;10–&gt;接受默认值**</li><li>在<strong>Overlays-&gt;Section-&gt;选择wmsM03953_0007.nii</strong><br> <img src="https://images2.imgbox.com/af/1a/jC2nvApO_o.png" alt="在这里插入图片描述"></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c7a7222699383502e2f3deb0332efdd9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">RTL-SDR（电视棒）——收听FM</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4362dc98f3feee44eaabe41b63953bf4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C# CheckedListBox控件的使用方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>