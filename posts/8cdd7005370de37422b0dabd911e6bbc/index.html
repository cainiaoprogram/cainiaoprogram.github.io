<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>基于OBS如何实现毫秒级超低延时直播 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="基于OBS如何实现毫秒级超低延时直播" />
<meta property="og:description" content="原创教程 / 2021-11-16 / 文章字数2300
文章简述：本文介绍使用OBS无延迟直播插件在第三方云平台，如何实现超低延时直播的完整教程（延迟约为400毫秒，通常延迟是3-15秒）。
OBS简要介绍 OBS（Open Broadcaster Software）是一款免费开源的视频录制和视频直播推流软件，功能非常强大，在做视频直播时经常会用到，支持Windows, Mac以及Linux等不同平台。基于OBS，可以很方便的实现摄像机采集卡画面、桌面、文档、多媒体等不同形式的画面采集和输出。
OBS常用于峰会论坛直播、培训直播、带货直播、展会直播、宣讲会直播等，应用非常广泛,官网下载地址是 Open Broadcaster Software | OBS (官网下载非常慢，可以考虑到国内境相站下载)。
图1 / OBS客户端操作主界面
我们常见的直播架构是 CDN &#43; RTMP/HTTP-FLV &#43; HLS，目前绝大部分直播都是应用的这类技术。
RTMP/HTTP-FLV的延迟：大至是3-10秒左右，延迟的原因主要来自编码延迟、网络延迟、缓冲延迟等；
HLS的延迟：通常会在5-15秒左右，延迟主要自编码延迟、网络延迟、切片延迟等；
对于不涉及直播互动的场景，这种延迟对于观看者来说，感知不会特别明显；对于一些像视频连麦、答题场景、在线课堂、带货直播这类高互动性的场景，对延迟几秒就会有明显的感知。那么如何通过OBS做到无延迟直播、超低延迟直播呢？现在可以通过保利威无延迟直播（PRTC）来实现，基于WebRTC开发的PRTC无延迟直播，可以打通直播体验的「最后一公里」，将直播延迟降至1秒以内，下面来介绍一下如何操作吧。
OBS实现无延迟直播 1. 下载“obs-rtc-output插件” 打开CSDN，进入下载页 https://download.csdn.net/download/suny2020/40278486，进行插件下载。
2. 安装插件 第1步：分别打开obs-studio客户端安装目录和插件目录，如下，将插件目录下的“bin”、“obs-plugins”目录复制到obs-studio目录中。
图2 / OBS安装目录和插件目录截图
第2步：设置自定义服务。
方式1：用插件包中的文件services.json替换obs的配置目录(C:\Users\用户名\AppData\Roaming\obs-studio \plugin_config\rtmp-services)下的services.json
方式2：修改obs的配置目录下的services.json文件，如下：
{&#34;name&#34;:&#34;保利威无延迟&#34;,&#34;common&#34;:false,&#34;servers&#34;:[{&#34;name&#34;:&#34;全球节点&#34;,&#34;url&#34;:&#34;https://prtc.com/api/v1/&#34;}],&#34;recommended&#34;:{&#34;keyint&#34;:1,&#34;output&#34;:&#34;rtc_output&#34;,&#34;max audio bitrate&#34;:160,&#34;max video bitrate&#34;:2000,&#34;profile&#34;:&#34;main&#34;,&#34;bframes&#34;:0}}
图3 / OBS配置文件services.json截图
3. 创建频道 第1步：登录保利威管理平台（如果没有账号，可以点击此处直接注册试用账号https://my.polyv.net/v3/register/），选择进入云直播；
第2步：新建直播频道，在“直播延迟”选项中选择“无延迟”，然后点击“保存并创建直播”；
图4 / 云直播管理平台新建直播频道截图
第3步：创建后，平台会自动分配一个频道号和密码，如下标红处，记下这个频道和密码，在之后的“串流密钥”中，需要用到。
本次创建的这个无延迟直播道号是2662663，密码是123456，对应的“串流密钥”就是：{&#34;channelId&#34;:&#34;2662663&#34;,&#34;password&#34;:&#34;123456&#34;,&#34;name&#34;:&#34;test&#34;} 。
图5 / 云直播管理平台获取频道号和密码
4.发起直播 第1步：打开OBS客户端，添加好场景和视频源，点击右下角的“设置”，如下图：
图6 / OBS客户端操作界面" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8cdd7005370de37422b0dabd911e6bbc/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-16T10:22:43+08:00" />
<meta property="article:modified_time" content="2021-11-16T10:22:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">基于OBS如何实现毫秒级超低延时直播</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>原创教程 / 2021-11-16 / 文章字数2300</p> 
<p>文章简述：本文介绍使用OBS无延迟直播插件在第三方云平台，如何实现超低延时直播的完整教程（延迟约为400毫秒，通常延迟是3-15秒）。</p> 
<p></p> 
<h2>OBS简要介绍</h2> 
<p>OBS（Open Broadcaster Software）是一款免费开源的视频录制和视频直播推流软件，功能非常强大，在做视频直播时经常会用到，支持Windows, Mac以及Linux等不同平台。基于OBS，可以很方便的实现摄像机采集卡画面、桌面、文档、多媒体等不同形式的画面采集和输出。</p> 
<p>OBS常用于峰会论坛直播、培训直播、带货直播、展会直播、宣讲会直播等，应用非常广泛,官网下载地址是 <a href="https://obsproject.com/zh-cn" rel="nofollow" title="Open Broadcaster Software | OBS">Open Broadcaster Software | OBS</a> (官网下载非常慢，可以考虑到国内境相站下载)。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/0f/75/ZaXBK9hT_o.png"></p> 
<p> 图1 / OBS客户端操作主界面</p> 
<p></p> 
<p>我们常见的直播架构是 CDN + RTMP/HTTP-FLV + HLS，目前绝大部分直播都是应用的这类技术。</p> 
<p><strong>RTMP/HTTP-FLV的延迟</strong>：大至是3-10秒左右，延迟的原因主要来自编码延迟、网络延迟、缓冲延迟等；</p> 
<p><strong>HLS的延迟</strong>：通常会在5-15秒左右，延迟主要自编码延迟、网络延迟、切片延迟等；</p> 
<p>对于不涉及直播互动的场景，这种延迟对于观看者来说，感知不会特别明显；对于一些像视频连麦、答题场景、在线课堂、带货直播这类高互动性的场景，对延迟几秒就会有明显的感知。那么如何通过OBS做到无延迟直播、超低延迟直播呢？现在可以通过保利威无延迟直播（PRTC）来实现，基于WebRTC开发的PRTC无延迟直播，可以打通直播体验的「最后一公里」，将直播延迟降至1秒以内，下面来介绍一下如何操作吧。</p> 
<p></p> 
<h2>OBS实现无延迟直播</h2> 
<h4><strong>1. 下载“obs-rtc-output插件”</strong></h4> 
<p>打开CSDN，进入下载页 <a class="link-info" href="https://download.csdn.net/download/suny2020/40278486">https://download.csdn.net/download/suny2020/40278486</a>，进行插件下载。</p> 
<p></p> 
<h4><strong>2. 安装插件</strong></h4> 
<p><strong>第1步</strong>：分别打开obs-studio客户端安装目录和插件目录，如下，将插件目录下的“bin”、“obs-plugins”目录复制到obs-studio目录中。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/61/db/BDnf9gcz_o.png"></p> 
<p> 图2 / OBS安装目录和插件目录截图</p> 
<p></p> 
<p><strong>第2步</strong>：设置自定义服务。</p> 
<p>方式1：用插件包中的文件services.json替换obs的配置目录(C:\Users\用户名\AppData\Roaming\obs-studio \plugin_config\rtmp-services)下的services.json</p> 
<p>方式2：修改obs的配置目录下的services.json文件，如下：</p> 
<blockquote> 
 <p>{"name":"保利威无延迟","common":false,"servers":[{"name":"全球节点","url":"https://prtc.com/api/v1/"}],"recommended":{"keyint":1,"output":"rtc_output","max audio bitrate":160,"max video bitrate":2000,"profile":"main","bframes":0}}</p> 
</blockquote> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/5c/b6/wynNIAas_o.png"></p> 
<p> 图3 / OBS配置文件services.json截图</p> 
<p></p> 
<h4><strong>3. 创建频道</strong></h4> 
<p><strong>第1步</strong>：登录保利威管理平台（如果没有账号，可以点击此处直接注册试用账号https://my.polyv.net/v3/register/），选择进入云直播；</p> 
<p><strong>第2步</strong>：新建直播频道，在“直播延迟”选项中选择“无延迟”，然后点击“保存并创建直播”；</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/9b/60/el3DKokl_o.png"></p> 
<p> 图4 / 云直播管理平台新建直播频道截图</p> 
<p></p> 
<p><strong>第3步</strong>：创建后，平台会自动分配一个频道号和密码，如下标红处，记下这个频道和密码，在之后的“串流密钥”中，需要用到。</p> 
<p>本次创建的这个无延迟直播道号是2662663，密码是123456，对应的“串流密钥”就是：{"channelId":"2662663","password":"123456","name":"test"} 。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6f/37/ZKl03FM7_o.png"></p> 
<p> 图5 / 云直播管理平台获取频道号和密码</p> 
<p></p> 
<h4>4.发起直播</h4> 
<p><strong>第1步</strong>：打开OBS客户端，添加好场景和视频源，点击右下角的“设置”，如下图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/97/02/4aDebyeW_o.png"></p> 
<p> 图6 / OBS客户端操作界面</p> 
<p></p> 
<p><strong>第2步</strong>：在设置界面中，选择左侧“推流”，在右侧“服务”项中选择“保利威无延迟” ；“串流密钥”中填入“{"channelId":"您的频道号码","password":"您的频道密码","name":"名称"}”，也就是对应填入之前创建好的频道号和频道密码，参考{"channelId":"2662663","password":"123456","name":"test"}，然后点击确定。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/32/99/bA1pPyCy_o.png"></p> 
<p>图7 / OBS客户端推流参数设置界面</p> 
<p></p> 
<p><strong>第3步</strong>：点击右下角“开始推流”，发起正式直播。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/20/b7/Vb3edGbh_o.png"></p> 
<p> 图8 / OBS客户端界面（开始推流）</p> 
<p></p> 
<h4>5. 直播延迟效果</h4> 
<p>我们来看一下实际的测试效果，以下为拍摄的测试图，通过OBS发起端与PC、iOS、安卓观看端的时间差，来评估一下延迟的时间差。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/39/72/KeUozaMU_o.png"></p> 
<p> 图9：图中右侧为OBS客户端推流界面，左上方为PC浏览器观看测试端，左下方分别为iOS、安卓观看测试端</p> 
<p></p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/08/52/8yN8wG8t_o.png"></p> 
<p> 图10：右侧为OBS客户端推流界面，左上方为PC浏览器观看测试端，左下方分别为iOS、安卓观看测试端</p> 
<p></p> 
<p>从以上的测试结果来看，PC浏览器本次观看延迟大约为166ms(毫秒)，iOS观看延迟大约为133ms，安卓大约为305ms，都在1秒以内。</p> 
<p></p> 
<h2>传统直播与PRTC直播对比</h2> 
<p>以下整理了一下传统直播与PRTC直播的不同之处：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/07/36/4GT1qxXc_o.png"></p> 
<p> 图11：传统直播与保利威PRTC直播对比</p> 
<p></p> 
<h2>兼容性说明</h2> 
<p>1.Android 5.0 以上版本</p> 
<p>2.iOS 9.0 以上版本</p> 
<p>3.Web 端请使用桌面端 Google Chrome 最新稳定版。</p> 
<p>4.macOS 10.10 或以上版本</p> 
<p>5.Windows 7 或以上版本</p> 
<p></p> 
<p>直播作为强交互、信息密度高的传播媒介，无延迟必然是大势所趋。对OBS无延迟直播有兴趣的朋友，可以下载插件来感受一下。</p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/64dcdec99bbb901dff50bdc101375f7a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c语言程序设计实训教程作业</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/dc2937723c13b24294c1e7d043bcb1f4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">numpy对图像重映射的通用优化方法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>