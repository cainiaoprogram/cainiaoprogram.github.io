<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>zabbix mysql 脚本路径_Zabbix安装图文教程(需要LAMP或者LNMP运行环境) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="zabbix mysql 脚本路径_Zabbix安装图文教程(需要LAMP或者LNMP运行环境)" />
<meta property="og:description" content="说明：
操作系统：CentOS
IP地址：192.168.21.127
Web环境：Nginx&#43;MySQL&#43;PHP
zabbix版本：Zabbix 2.2 LTS
备注：Linux下安装zabbix需要有LAMP或者LNMP运行环境
准备篇：
一、Web环境：Nginx&#43;MySQL&#43;PHP
二、zabbix软件包下载
上传zabbix-2.2.6.tar.gz到服务器/usr/local/src目录下面
安装篇
一、创建、导入zabbix数据库
cd /usr/local/src #进入软件包下载目录
tar zxvf zabbix-2.2.6.tar.gz #解压
cd /usr/local/src/zabbix-2.2.6/database/mysql #进入mysql数据库创建脚本目录
ls #列出文件，可以看到有schema.sql、images.sql、data.sql这三个文件
mysql -u root -p #输入密码，进入MySQL控制台
create database zabbix character set utf8;#创建数据库zabbix，并且数据库编码使用utf8
insert into mysql.user(Host,User,Password) values(&#39;localhost&#39;,&#39;zabbix&#39;,password(&#39;123456&#39;)); #新建账户zabbix，密码123456
flush privileges; #刷新系统授权表
grant all on zabbix.* to &#39;zabbix&#39;@&#39;127.0.0.1&#39; identified by &#39;123456&#39; with grant option; #允许账户zabbix能从本机连接到数据库zabbix
flush privileges; #再次刷新系统授权表
use zabbix #进入数据库
source /usr/local/src/zabbix-2.2.6/database/mysql/schema.sql #导入脚本文件到zabbix数据库
source /usr/local/src/zabbix-2.2.6/database/mysql/images.sql #导入脚本文件到zabbix数据库" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ae89931faca5f16b6d932a276ef621a5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-02-11T17:11:07+08:00" />
<meta property="article:modified_time" content="2021-02-11T17:11:07+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">zabbix mysql 脚本路径_Zabbix安装图文教程(需要LAMP或者LNMP运行环境)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p align="center"><img src="https://images2.imgbox.com/a2/bd/7z0oPbL3_o.png" alt="e872cf26084ae68020f9985f55d6693d.png"></p> 
 <p>说明：</p> 
 <p>操作系统：CentOS</p> 
 <p>IP地址：192.168.21.127</p> 
 <p>Web环境：Nginx+MySQL+PHP</p> 
 <p>zabbix版本：Zabbix 2.2 LTS</p> 
 <p>备注：Linux下安装zabbix需要有LAMP或者LNMP运行环境</p> 
 <p>准备篇：</p> 
 <p>一、Web环境：Nginx+MySQL+PHP</p> 
 <p>二、zabbix软件包下载</p> 
 <p>上传zabbix-2.2.6.tar.gz到服务器/usr/local/src目录下面</p> 
 <p>安装篇</p> 
 <p>一、创建、导入zabbix数据库</p> 
 <p>cd /usr/local/src #进入软件包下载目录</p> 
 <p>tar zxvf zabbix-2.2.6.tar.gz #解压</p> 
 <p>cd /usr/local/src/zabbix-2.2.6/database/mysql #进入mysql数据库创建脚本目录</p> 
 <p>ls #列出文件，可以看到有schema.sql、images.sql、data.sql这三个文件</p> 
 <p>mysql -u root -p #输入密码，进入MySQL控制台</p> 
 <p>create database zabbix character set utf8;#创建数据库zabbix，并且数据库编码使用utf8</p> 
 <p>insert into mysql.user(Host,User,Password) values('localhost','zabbix',password('123456')); #新建账户zabbix，密码123456</p> 
 <p>flush privileges; #刷新系统授权表</p> 
 <p>grant all on zabbix.* to 'zabbix'@'127.0.0.1' identified by '123456' with grant option; #允许账户zabbix能从本机连接到数据库zabbix</p> 
 <p>flush privileges; #再次刷新系统授权表</p> 
 <p>use zabbix #进入数据库</p> 
 <p>source /usr/local/src/zabbix-2.2.6/database/mysql/schema.sql #导入脚本文件到zabbix数据库</p> 
 <p>source /usr/local/src/zabbix-2.2.6/database/mysql/images.sql #导入脚本文件到zabbix数据库</p> 
 <p>source /usr/local/src/zabbix-2.2.6/database/mysql/data.sql #导入脚本文件到zabbix数据库</p> 
 <p>注意：请按照以上顺序进行导入，否则会出错。</p> 
 <p>exit #退出</p> 
 <p>或者这样导入</p> 
 <p>mysql -uzabbix -p123456 -hlocalhost zabbix &lt; /usr/local/src/zabbix-2.2.6/database/mysql/schema.sql</p> 
 <p>mysql -uzabbix -p123456 -hlocalhost zabbix &lt; /usr/local/src/zabbix-2.2.6/database/mysql/images.sql</p> 
 <p>mysql -uzabbix -p123456 -hlocalhost zabbix &lt; /usr/local/src/zabbix-2.2.6/database/mysql/data.sql</p> 
 <p>cd /usr/lib64/mysql #32位系统为/usr/lib/mysql，注意系统版本同，文件版本可能不一样，这里是16.0.0</p> 
 <p>ln -s libmysqlclient.so.16.0.0 libmysqlclient.so#添加软连接</p> 
 <p>ln -s libmysqlclient_r.so.16.0.0 libmysqlclient_r.so #添加软连接</p> 
 <p>二、安装zabbix</p> 
 <p>1、添加用户：</p> 
 <p>groupadd zabbix #创建用户组zabbix</p> 
 <p>useradd zabbix -g zabbix -s /bin/false #创建用户zabbix，并且把用户zabbix加入到用户组zabbix中</p> 
 <p>2、安装依赖包 #CentOS使用yum命令安装</p> 
 <p>yum install net-snmp-devel curl curl-devel mysql-devel</p> 
 <p>备注：以上软件包如果在安装Web环境LAMP或者LNMP时已经安装过，此步骤可忽略</p> 
 <p>3、安装zabbix</p> 
 <p>ln -s /usr/local/lib/libiconv.so.2 /usr/lib/libiconv.so.2#添加软连接</p> 
 <p>/sbin/ldconfig #使配置立即生效</p> 
 <p>cd /usr/local/src/zabbix-2.2.6#进入安装目录</p> 
 <p>./configure --prefix=/usr/local/zabbix --enable-server --enable-agent --with-net-snmp --with-libcurl --enable-proxy --with-mysql=/usr/bin/mysql_config #配置</p> 
 <p>make #编译</p> 
 <p>make install #安装</p> 
 <p>ln -s /usr/local/zabbix/sbin/* /usr/local/sbin/#添加系统软连接</p> 
 <p>ln -s /usr/local/zabbix/bin/* /usr/local/bin/ #添加系统软连接</p> 
 <p>说明：find / -name mysql_config 查找位置，如果没有mysql_config，需要安装yum install mysql-devel</p> 
 <p>4、添加zabbix服务对应的端口</p> 
 <p>vi /etc/services #编辑，在最后添加以下代码</p> 
 <p># Zabbix</p> 
 <p>zabbix-agent 10050/tcp # Zabbix Agent</p> 
 <p>zabbix-agent 10050/udp # Zabbix Agent</p> 
 <p>zabbix-trapper 10051/tcp # Zabbix Trapper</p> 
 <p>zabbix-trapper 10051/udp # Zabbix Trapper</p> 
 <p>:wq! #保存退出</p> 
 <p>5、修改zabbix配置文件</p> 
 <p>cd /usr/local/zabbix/etc</p> 
 <p>vi /usr/local/zabbix/etc/zabbix_server.conf</p> 
 <p>DBName=zabbix #数据库名称</p> 
 <p>DBUser=zabbix#数据库用户名</p> 
 <p>DBPassword=123456 #数据库密码</p> 
 <p>ListenIP=127.0.0.1 #数据库ip地址</p> 
 <p>AlertScriptsPath=/usr/local/zabbix/share/zabbix/alertscripts #zabbix运行脚本存放目录</p> 
 <p>:wq! #保存退出</p> 
 <p>vi /usr/local/zabbix/etc/zabbix_agentd.conf</p> 
 <p>Include=/usr/local/zabbix/etc/zabbix_agentd.conf.d/</p> 
 <p>UnsafeUserParameters=1 #启用自定义key</p> 
 <p>:wq! #保存退出</p> 
 <p>6、添加开机启动脚本</p> 
 <p>cp /usr/local/src/zabbix-2.2.6/misc/init.d/fedora/core/zabbix_server /etc/rc.d/init.d/zabbix_server #服务端</p> 
 <p>cp /usr/local/src/zabbix-2.2.6/misc/init.d/fedora/core/zabbix_agentd /etc/rc.d/init.d/zabbix_agentd#客户端</p> 
 <p>chmod +x /etc/rc.d/init.d/zabbix_server #添加脚本执行权限</p> 
 <p>chmod +x /etc/rc.d/init.d/zabbix_agentd #添加脚本执行权限</p> 
 <p>chkconfig zabbix_server on #添加开机启动</p> 
 <p>chkconfig zabbix_agentd on #添加开机启动</p> 
 <p>7、修改zabbix开机启动脚本中的zabbix安装目录</p> 
 <p>vi /etc/rc.d/init.d/zabbix_server #编辑服务端配置文件</p> 
 <p>BASEDIR=/usr/local/zabbix/ #zabbix安装目录</p> 
 <p>:wq! #保存退出</p> 
 <p>vi /etc/rc.d/init.d/zabbix_agentd #编辑客户端配置文件</p> 
 <p>BASEDIR=/usr/local/zabbix/ #zabbix安装目录</p> 
 <p>:wq! #保存退出</p> 
 <p>四、配置web站点</p> 
 <p>cd /usr/local/src/zabbix-2.2.6</p> 
 <p>cp -r /usr/local/src/zabbix-2.2.6/frontends/php /usr/local/nginx/html/zabbix</p> 
 <p>chown www.www -R /usr/local/nginx/html/zabbix</p> 
 <p>备注：/usr/local/nginx/html为Nginx默认站点目录 www为Nginx运行账户</p> 
 <p>service zabbix_server start #启动zabbix服务端</p> 
 <p>service zabbix_agentd start #启动zabbix客户端</p> 
 <p>六、修改php配置文件参数</p> 
 <p>1、vi /etc/php.ini#编辑修改</p> 
 <p>post_max_size =16M</p> 
 <p>max_execution_time =300</p> 
 <p>max_input_time =300</p> 
 <p>:wq!#保存退出</p> 
 <p>2、vi /usr/local/php/etc/php-fpm.conf #编辑修改</p> 
 <p>request_terminate_timeout = 300</p> 
 <p>:wq! #保存退出</p> 
 <p>service php-fpm reload #重启php-fpm</p> 
 <p>七、安装web</p> 
 <p>在浏览器中打开：</p> 
 <p>http://192.168.21.127/zabbix/setup.php</p> 
 <p align="center"><img src="https://images2.imgbox.com/39/05/QULKaR37_o.png" alt="1f11766cbf5c95aa05814fe3a2442779.png"></p> 
 <p>Next</p> 
 <p align="center"><img src="https://images2.imgbox.com/91/5e/gYBa8Awa_o.png" alt="75384afefcca782b26b5bd49544ab981.png"></p> 
 <p>检查系统环境设置，必须全部都为ok，才能继续</p> 
 <p>Next</p> 
 <p align="center"><img src="https://images2.imgbox.com/00/ea/w4BKigJw_o.png" alt="f6678eab5b2d4cd9d2f7011d9ed55e1a.png"></p> 
 <p>配置MySQL数据库信息</p> 
 <p>Database：MySQL</p> 
 <p>Database host：127.0.0.1</p> 
 <p>Database port：use default port</p> 
 <p>Database name：zabbix</p> 
 <p>User：zabbix</p> 
 <p>Password：123456</p> 
 <p align="center"><img src="https://images2.imgbox.com/94/b6/6FS03Ftc_o.png" alt="a83477f4580ee859d3a8cafd46f18126.png"></p> 
 <p>Test connection   #测试数据库连接是否正常，显示ok表示通过</p> 
 <p>Next</p> 
 <p align="center"><img src="https://images2.imgbox.com/94/14/t5him99d_o.png" alt="64e74bdebaf85b9bec6d5997d7728666.png"></p> 
 <p>Next  默认</p> 
 <p align="center"><img src="https://images2.imgbox.com/63/5e/TKqJsgvy_o.png" alt="4470931dd9b4a4504c938221fa3566b5.png"></p> 
 <p>Next</p> 
 <p align="center"><img src="https://images2.imgbox.com/34/54/Ji1T4ytU_o.png" alt="5b46308cd364dc168e8079e34833cd5e.png"></p> 
 <p>Finish  安装完成</p> 
 <p>八、更改zabbix默认语言为简体中文、替换监控图像上系统默认的中文字体</p> 
 <p>1、修改系统配置文件，让web页面支持简体中文显示</p> 
 <p>vi /usr/local/nginx/html/zabbix/include/locales.inc.php#编辑修改</p> 
 <p>'zh_CN' =&gt; array('name' =&gt; _('Chinese (zh_CN)'), 'display' =&gt; false),</p> 
 <p>修改为</p> 
 <p>'zh_CN' =&gt; array('name' =&gt; _('Chinese (zh_CN)'), 'display' =&gt; true),</p> 
 <p>:wq! #保存退出</p> 
 <p>2、替换监控图像上系统默认的字体 #默认字体不支持中文，如果不替换，图像上会显示乱码</p> 
 <p>在Windows系统中的C:\Windows\Fonts目录中复制出一个中文字体文件，例如msyh.ttf</p> 
 <p>把字体文件msyh.ttf上传到zabbix站点根目录下fonts文件夹中</p> 
 <p>例如：/usr/local/nginx/html/zabbix/fonts</p> 
 <p>备份默认的字体文件：DejaVusSans.ttf-bak</p> 
 <p>修改msyh.ttf名称为DejaVusSans.ttf</p> 
 <p>3、在浏览器中打开：</p> 
 <p>http://192.168.21.127/zabbix</p> 
 <p align="center"><img src="https://images2.imgbox.com/b5/29/jUunXfok_o.png" alt="bc008ebf9eefb33368f2802a66f84569.png"></p> 
 <p>账号：admin</p> 
 <p>密码：zabbix</p> 
 <p>Sign in 登录</p> 
 <p>如下图所示</p> 
 <p align="center"><img src="https://images2.imgbox.com/e6/88/rAZafF2Q_o.png" alt="bdebbad5b0db679f07fa5ba970c6318c.png"></p> 
 <p align="center"><img src="https://images2.imgbox.com/25/a5/3snQMTMh_o.png" alt="7562f4399f6f43527f26dff37d055887.png"></p> 
 <p>点击Profile</p> 
 <p>如下图所示</p> 
 <p align="center"><img src="https://images2.imgbox.com/1e/5f/yArxkQRK_o.png" alt="32577d92a5767f5c7e3d99f940df4d00.png"></p> 
 <p>Language：Chinese(zh_CN)  #简体中文</p> 
 <p>点Save 保存</p> 
 <p>退出站点，重新登录之后，如下图所示</p> 
 <p>默认界面已经是中文显示</p> 
 <p align="center"><img src="https://images2.imgbox.com/fd/71/HuW16EG4_o.png" alt="b6abb34f4b1e759f3c0b3498887cbc1a.png"></p> 
 <p>至此，Zabbix安装图解教程完成。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e67d4cae59f47f779cfc85113494daa1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Mac 下 Homebrew 安装的正确方法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6bb722d714494d9603cab89a106ccb86/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">启用mysql数据库.bat_常用数据库启动服务bat脚本</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>