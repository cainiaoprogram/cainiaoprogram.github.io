<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android ConstraintLayout  layout_constraintDimensionRatio  w  h 备忘 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android ConstraintLayout  layout_constraintDimensionRatio  w  h 备忘" />
<meta property="og:description" content="注：以下结论由测试推测得到，仅仅是结果表现上合理，并非一定就是ConstraintLayout内部实现机制，不敢误导他人，仅自己记录备忘
ConstraintLayout layout_constraintDimensionRatio 可以设置一个前缀 w或h，
根据官方说法
The ratio can be expressed either as:
a float value, representing a ratio between width and heighta ratio in the form &#34;width:height&#34; You can also use ratio if both dimensions are set to MATCH_CONSTRAINT (0dp). In this case the system sets the largest dimensions the satisfies all constraints and maintains the aspect ratio specified. To constrain one specific side based on the dimensions of another, you can pre append W,&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d8d31edff87ced891d411cada70cd725/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-11-08T16:39:52+08:00" />
<meta property="article:modified_time" content="2018-11-08T16:39:52+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android ConstraintLayout  layout_constraintDimensionRatio  w  h 备忘</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>注：以下结论由测试推测得到，仅仅是结果表现上合理，并非一定就是ConstraintLayout内部实现机制，不敢误导他人，仅自己记录备忘</strong></p> 
<p>ConstraintLayout layout_constraintDimensionRatio 可以设置一个前缀 w或h，</p> 
<p>根据官方说法</p> 
<blockquote> 
 <p>The ratio can be expressed either as:</p> 
 <ul><li>a float value, representing a ratio between width and height</li><li>a ratio in the form "width:height"</li></ul> 
 <p>You can also use ratio if both dimensions are set to <code>MATCH_CONSTRAINT</code> (0dp). In this case the system sets the largest dimensions the satisfies all constraints and maintains the aspect ratio specified. To constrain one specific side based on the dimensions of another, you can pre append <code>W,</code>" or <code>H,</code> to constrain the width or height respectively. For example, If one dimension is constrained by two targets (e.g. width is 0dp and centered on parent) you can indicate which side should be constrained, by adding the letter <code>W</code> (for constraining the width) or <code>H</code> (for constraining the height) in front of the ratio, separated by a comma:</p> 
</blockquote> 
<p> 当一个子组件的宽和高都设置为0dp的时候，可以用前缀w或h指示，哪条边（w或h）通过Ratio计算得到其长度。Android会先通过其他约束条件计算另一条边的值，再通过Ratio  w:h=ratio 计算指定的边（w或h）的值。</p> 
<p>例如：w=0dp，h=0dp，toLeftOf="parent"，toRightOf="parent"，toTopOf="parent"，toBottomOf="parent"，根据约束条件，这个子组件会占据父容器全部空间。这里要如何限制组件宽高比，就根据ratio的前缀而定。ratio="w,2:1"，那么子组件的h=父容器高（另一边根据其他约束条件得到值），w:h=2:1， w=2h=2倍父容器高度（可能超出了显示范围），如果ratio="h,2:1"，那么子组件w=父容器宽（另一边根据其他约束条件得到值），w:h=2:1，h=1/2*w=父容器宽度的一半。正常情况下ratio会按上面的方式工作</p> 
<p>但如果出现下列情况，计算的结果很可能会出乎意料让人疑惑</p> 
<p>如： w=100dp，h=0dp，ratio="w,2:1" 此时w已经设置为固定长度，无法先通过其他约束条件计算h，再通过ratio计算w，设置冲突。此时Android计算出的实际结果，可以视为 Android 识别到了冲突，把原本w:h=ratio 替换为 h:w=ratio 来计算未知边，也就是 w=100dp，h=0dp，ratio="w,2:1" 通过 h:w=2:1 计算未知边h，h=2w=200dp，最后得到的结果，w=100dp，h=200dp。</p> 
<p>同理：w=0dp，h=100dp，ratio="h,2:1"，h已设置为固定值，冲突，改为 h:w=2:1计算w，w=1/2*h=50dp，最后结果w=50dp，h=100dp。</p> 
<p>记录备忘</p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2ad007c27752299cb097434f1d91037c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">数据结构算法常见面试考题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/637d3a738bcf0653a516376e06cace1c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">SpringBoot 默认生成的pom配置文件详解</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>