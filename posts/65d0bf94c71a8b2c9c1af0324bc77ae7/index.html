<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SASBASE认证考试划重点 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SASBASE认证考试划重点" />
<meta property="og:description" content="目录
一、SAS基本设置
proc import
infile选项控制输入
sas遇到错误会怎么处理
sas系统选项optinos
读取文件的input
贡献变量in选项
put输入格式
lable
二、函数
字符型函数
循环函数
平均函数的变量简写
条件判断IF/ELSEIF
数组命名方式
将字符型变量转换成数值型变量的方式：
排序函数
求和函数
first/last应用
retain的应用
scan函数
三、打印描述数据
数值型变量输出格式format
proc tabulate
proc report
report中break和rbreak用法
proc report 输出中添加统计量
proc means
输出output
四、数据合并：
set合并数据
MERGE合并数据
数据转换TRANSPOSE
过程中创建输出file/put对应从原始文件中读取数据infile/input
datasets步的选项
激活data步debug
_error_
format
五、报告输出
html输出
一、SAS基本设置 proc import ---
infile选项控制输入 FIRSTOBS= FIRSTOBS= 选项告诉SAS从哪一行开始读取数据，当数据开头有些说明信息，或者想要跳过某些行时，这个选项很有用。
OBS= OBS=告诉SAS一直读取到哪一行位置，注意是行而不是观测值（有的观测值占据多行）比如，如下的原始数据文件中，结尾处还有一句不需要的数据说明时。
&lt;T123例题36&gt;
sas遇到错误会怎么处理 数据错误：当sas遇到数据错误时候，缺失数据值以恰当的值代替，并继续执行程序。数据错误不会中止程序运行。
&lt;T50例题49&gt;
语法错误：程序将停止执行
sas系统选项optinos OPTIONS语句 是SAS程序的一部分，并可影响之后的所有语句。由OPTIONS关键词开头，后面是相关选项。
OPTIONS语句既不属于数据步也不属于过程步，这个全局变量可以出现在程序的任何部分，但放在开头最有意义，你可以很容易看到哪些选项在发挥作用。如果OPTIONS语句只出现在数据步或者过程步中，那么它会影响那个过程。注意，后面的OPTIONS语句会覆盖前面的，即以后面的OPTIONS为主。
OPTIONS LINESIZE=80 NODATE; options date；在报告中显示时间 &lt;T123例题102&gt;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/65d0bf94c71a8b2c9c1af0324bc77ae7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-06-04T15:43:55+08:00" />
<meta property="article:modified_time" content="2019-06-04T15:43:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SASBASE认证考试划重点</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81SAS%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81SAS%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE" rel="nofollow">一、SAS基本设置</a></p> 
<p id="proc%20import-toc" style="margin-left:80px;"><a href="#proc%20import" rel="nofollow">proc import</a></p> 
<p id="infile%E9%80%89%E9%A1%B9%E6%8E%A7%E5%88%B6%E8%BE%93%E5%85%A5-toc" style="margin-left:80px;"><a href="#infile%E9%80%89%E9%A1%B9%E6%8E%A7%E5%88%B6%E8%BE%93%E5%85%A5" rel="nofollow">infile选项控制输入</a></p> 
<p id="sas%E9%81%87%E5%88%B0%E9%94%99%E8%AF%AF%E4%BC%9A%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86-toc" style="margin-left:80px;"><a href="#sas%E9%81%87%E5%88%B0%E9%94%99%E8%AF%AF%E4%BC%9A%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86" rel="nofollow">sas遇到错误会怎么处理</a></p> 
<p id="sas%E7%B3%BB%E7%BB%9F%E9%80%89%E9%A1%B9optinos-toc" style="margin-left:80px;"><a href="#sas%E7%B3%BB%E7%BB%9F%E9%80%89%E9%A1%B9optinos" rel="nofollow">sas系统选项optinos</a></p> 
<p id="%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E7%9A%84input-toc" style="margin-left:80px;"><a href="#%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E7%9A%84input" rel="nofollow">读取文件的input</a></p> 
<p id="%E8%B4%A1%E7%8C%AE%E5%8F%98%E9%87%8Fin%E9%80%89%E9%A1%B9-toc" style="margin-left:80px;"><a href="#%E8%B4%A1%E7%8C%AE%E5%8F%98%E9%87%8Fin%E9%80%89%E9%A1%B9" rel="nofollow">贡献变量in选项</a></p> 
<p id="put%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-toc" style="margin-left:80px;"><a href="#put%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F" rel="nofollow">put输入格式</a></p> 
<p id="lable-toc" style="margin-left:80px;"><a href="#lable" rel="nofollow">lable</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0" rel="nofollow">二、函数</a></p> 
<p id="%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%87%BD%E6%95%B0" rel="nofollow">字符型函数</a></p> 
<p id="%E5%BE%AA%E7%8E%AF%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#%E5%BE%AA%E7%8E%AF%E5%87%BD%E6%95%B0" rel="nofollow">循环函数</a></p> 
<p id="%E5%B9%B3%E5%9D%87%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%98%E9%87%8F%E7%AE%80%E5%86%99-toc" style="margin-left:80px;"><a href="#%E5%B9%B3%E5%9D%87%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%98%E9%87%8F%E7%AE%80%E5%86%99" rel="nofollow">平均函数的变量简写</a></p> 
<p id="%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%ADIF%2FELSEIF-toc" style="margin-left:80px;"><a href="#%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%ADIF%2FELSEIF" rel="nofollow">条件判断IF/ELSEIF</a></p> 
<p id="%E6%95%B0%E7%BB%84%E5%91%BD%E5%90%8D%E6%96%B9%E5%BC%8F-toc" style="margin-left:80px;"><a href="#%E6%95%B0%E7%BB%84%E5%91%BD%E5%90%8D%E6%96%B9%E5%BC%8F" rel="nofollow">数组命名方式</a></p> 
<p id="%E5%B0%86%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%8F%98%E9%87%8F%E8%BD%AC%E6%8D%A2%E6%88%90%E6%95%B0%E5%80%BC%E5%9E%8B%E5%8F%98%E9%87%8F%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9A-toc" style="margin-left:80px;"><a href="#%E5%B0%86%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%8F%98%E9%87%8F%E8%BD%AC%E6%8D%A2%E6%88%90%E6%95%B0%E5%80%BC%E5%9E%8B%E5%8F%98%E9%87%8F%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9A" rel="nofollow">将字符型变量转换成数值型变量的方式：</a></p> 
<p id="%E6%8E%92%E5%BA%8F%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#%E6%8E%92%E5%BA%8F%E5%87%BD%E6%95%B0" rel="nofollow">排序函数</a></p> 
<p id="%E6%B1%82%E5%92%8C%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#%E6%B1%82%E5%92%8C%E5%87%BD%E6%95%B0" rel="nofollow">求和函数</a></p> 
<p id="first%2Flast%E5%BA%94%E7%94%A8-toc" style="margin-left:80px;"><a href="#first%2Flast%E5%BA%94%E7%94%A8" rel="nofollow">first/last应用</a></p> 
<p id="retain%E7%9A%84%E5%BA%94%E7%94%A8-toc" style="margin-left:80px;"><a href="#retain%E7%9A%84%E5%BA%94%E7%94%A8" rel="nofollow">retain的应用</a></p> 
<p id="scan%E5%87%BD%E6%95%B0-toc" style="margin-left:80px;"><a href="#scan%E5%87%BD%E6%95%B0" rel="nofollow">scan函数</a></p> 
<p id="-toc" style="margin-left:80px;"> </p> 
<p id="%E4%B8%89%E3%80%81%E6%89%93%E5%8D%B0%E6%8F%8F%E8%BF%B0%E6%95%B0%E6%8D%AE-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E6%89%93%E5%8D%B0%E6%8F%8F%E8%BF%B0%E6%95%B0%E6%8D%AE" rel="nofollow">三、打印描述数据</a></p> 
<p id="%E6%95%B0%E5%80%BC%E5%9E%8B%E5%8F%98%E9%87%8F%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8Fformat-toc" style="margin-left:80px;"><a href="#%E6%95%B0%E5%80%BC%E5%9E%8B%E5%8F%98%E9%87%8F%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8Fformat" rel="nofollow">数值型变量输出格式format</a></p> 
<p id="proc%20tabulate-toc" style="margin-left:80px;"><a href="#proc%20tabulate" rel="nofollow">proc tabulate</a></p> 
<p id="proc%20report-toc" style="margin-left:80px;"><a href="#proc%20report" rel="nofollow">proc report</a></p> 
<p id="report%E4%B8%ADbreak%E5%92%8Crbreak%E7%94%A8%E6%B3%95-toc" style="margin-left:80px;"><a href="#report%E4%B8%ADbreak%E5%92%8Crbreak%E7%94%A8%E6%B3%95" rel="nofollow">report中break和rbreak用法</a></p> 
<p id="proc%20report%20%E8%BE%93%E5%87%BA%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%BB%9F%E8%AE%A1%E9%87%8F-toc" style="margin-left:80px;"><a href="#proc%20report%20%E8%BE%93%E5%87%BA%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%BB%9F%E8%AE%A1%E9%87%8F" rel="nofollow">proc report 输出中添加统计量</a></p> 
<p id="proc%20means-toc" style="margin-left:80px;"><a href="#proc%20means" rel="nofollow">proc means</a></p> 
<p id="output-toc" style="margin-left:80px;"><a href="#output" rel="nofollow">输出output</a></p> 
<p style="margin-left:80px;"> </p> 
<p id="MEGER%EF%BC%9A-toc" style="margin-left:0px;"><a href="#MEGER%EF%BC%9A" rel="nofollow">四、数据合并：</a></p> 
<p id="set%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px;"><a href="#set%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE" rel="nofollow">set合并数据</a></p> 
<p id="MERGE%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE-toc" style="margin-left:80px;"><a href="#MERGE%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE" rel="nofollow">MERGE合并数据</a></p> 
<p id="%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2TRANSPOSE-toc" style="margin-left:80px;"><a href="#%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2TRANSPOSE" rel="nofollow">数据转换TRANSPOSE</a></p> 
<p id="%E2%80%8B-toc" style="margin-left:80px;"><a href="#%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%88%9B%E5%BB%BA%E8%BE%93%E5%87%BAfile%2Fput" rel="nofollow">过程中创建输出file/put对应从原始文件中读取数据infile/input</a></p> 
<p id="datasets%E6%AD%A5%E7%9A%84%E9%80%89%E9%A1%B9-toc" style="margin-left:80px;"><a href="#datasets%E6%AD%A5%E7%9A%84%E9%80%89%E9%A1%B9" rel="nofollow">datasets步的选项</a></p> 
<p id="%E6%BF%80%E6%B4%BBdata%E6%AD%A5debug-toc" style="margin-left:80px;"><a href="#%E6%BF%80%E6%B4%BBdata%E6%AD%A5debug" rel="nofollow">激活data步debug</a></p> 
<p id="_error_-toc" style="margin-left:80px;"><a href="#_error_" rel="nofollow">_error_</a></p> 
<p id="format-toc" style="margin-left:80px;"><a href="#format" rel="nofollow">format</a></p> 
<p id="%E4%BA%94%E3%80%81%E6%8A%A5%E5%91%8A%E8%BE%93%E5%87%BA-toc" style="margin-left:0px;"><a href="#%E4%BA%94%E3%80%81%E6%8A%A5%E5%91%8A%E8%BE%93%E5%87%BA" rel="nofollow">五、报告输出</a></p> 
<p id="html%E8%BE%93%E5%87%BA-toc" style="margin-left:80px;"><a href="#html%E8%BE%93%E5%87%BA" rel="nofollow">html输出</a></p> 
<p style="margin-left:80px;"> </p> 
<hr id="hr-toc"> 
<p style="margin-left:80px;"> </p> 
<h2 id="%E4%B8%80%E3%80%81SAS%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE">一、SAS基本设置</h2> 
<h4 id="proc%20import">proc import</h4> 
<p>---</p> 
<h4 id="infile%E9%80%89%E9%A1%B9%E6%8E%A7%E5%88%B6%E8%BE%93%E5%85%A5">infile选项控制输入</h4> 
<p><strong>FIRSTOBS= </strong>FIRSTOBS= 选项告诉SAS从哪一行开始读取数据，当数据开头有些说明信息，或者想要跳过某些行时，这个选项很有用。</p> 
<p><strong>OBS=</strong> OBS=告诉SAS一直读取到哪一行位置，注意是行而不是观测值（有的观测值占据多行）比如，如下的原始数据文件中，结尾处还有一句不需要的数据说明时。</p> 
<p>&lt;T123例题36&gt;</p> 
<h4 id="sas%E9%81%87%E5%88%B0%E9%94%99%E8%AF%AF%E4%BC%9A%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86">sas遇到错误会怎么处理</h4> 
<p>数据错误：当sas遇到数据错误时候，缺失数据值以恰当的值代替，并继续执行程序。数据错误不会中止程序运行。</p> 
<p>&lt;T50例题49&gt;</p> 
<p>语法错误：程序将停止执行</p> 
<h4 id="sas%E7%B3%BB%E7%BB%9F%E9%80%89%E9%A1%B9optinos">sas系统选项optinos</h4> 
<p><strong>OPTIONS语句</strong> 是SAS程序的一部分，并可影响之后的所有语句。由OPTIONS关键词开头，后面是相关选项。</p> 
<p>OPTIONS语句既不属于数据步也不属于过程步，这个全局变量可以出现在程序的任何部分，但放在开头最有意义，你可以很容易看到哪些选项在发挥作用。如果OPTIONS语句只出现在数据步或者过程步中，那么它会影响那个过程。注意，后面的OPTIONS语句会覆盖前面的，即以后面的OPTIONS为主。</p> 
<pre class="has"><code>OPTIONS LINESIZE=80 NODATE;</code></pre> 
<p>     options date；在报告中显示时间           &lt;T123例题102&gt;</p> 
<p><img alt="" class="has" height="368" src="https://images2.imgbox.com/a4/dc/hW2FQIFD_o.png" width="566"></p> 
<p><strong>FIRSTOBS= n</strong>选项告诉SAS从哪一行开始读取数据，当数据开头有些说明信息，或者想要跳过某些行时，这个选项很有用。</p> 
<p>&lt;T123例题2&gt;、&lt;T123例题6&gt;&lt;T123例题100&gt;&lt;T123例题103&gt;</p> 
<p><strong>YEARCUTOFF</strong></p> 
<p>选项“yearcutoff=" 选项可以在100年的时间跨度内为任意两位年份值指定所属的世纪，</p> 
<p>例如yearcutoff=1950表示50到99之间的两位年份值对应于1950到1999年而00到49之间的两位年份值对应于2000到2049年；</p> 
<p> </p> 
<h4 id="%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E7%9A%84input">读取文件的input</h4> 
<p>input的应用详见：<a href="https://blog.csdn.net/weixin_43999733/article/details/90754573">点击这里</a></p> 
<h4 id="%E8%B4%A1%E7%8C%AE%E5%8F%98%E9%87%8Fin%E9%80%89%E9%A1%B9">贡献变量in选项</h4> 
<table cellpadding="0" cellspacing="0"><tbody><tr><td id="postmessage_2144470"> <p>IN=*** 这个选项用来创建临时变量以追踪当前的观测是否来自该数据集。<br> set work.people (in = inemp)<br> work.money (in = insal);<br> 这个语句说明，在读取数据时， <br> 当该观测来自work.people时，inemp 值为1，否则为0，<br> 当该观测来自work.money时，insal值为1，否则为0。<br> 这样每读取一个观测都会对 inemp 和insal赋值。<br> 读取这个观测后， if insal and inemp; 这个语句决定了这个观测是否被写入到新的数据集中。<br> 可见 insal 和inemp不可能同时为1， 即所有观测都不被写入。</p> </td></tr></tbody></table> 
<p>&lt;T123例题16&gt;</p> 
<p><img alt="" class="has" height="410" src="https://images2.imgbox.com/0f/e8/aMuuMvN6_o.png" width="971"></p> 
<p><img alt="" class="has" height="432" src="https://images2.imgbox.com/0c/c3/R317u3ON_o.png" width="1001"></p> 
<h4 id="put%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F">put输入格式</h4> 
<pre class="has"><code>data product;
	date=put('13mar2019'd,ddmmyy10.);
	date1=input('13mar2019'd,ddmmyy10.);
	date3=input('13mar2019',ddmmyy10.);
	date4=input('13mar2019',date9.);
	date5=input('13032019',ddmmyy10.);
run;</code></pre> 
<p>运行结果：<img alt="" class="has" height="50" src="https://images2.imgbox.com/b6/e1/XQAxBTu3_o.png" width="424"></p> 
<p>date的长度是10个字节；</p> 
<p>input输入日期时，输入格式必须和后面的格式相对应；</p> 
<p>&lt;T123例题81、83&gt;</p> 
<h4 id="lable">lable</h4> 
<p>data步里给变量加永久标签，proc步里用lable只在当前过程有效。</p> 
<p>如：proc print语法如下：</p> 
<pre class="has"><code>PROC PRINT DATA=data-set;</code></pre> 
<p>SAS默认打印观测值数，noobs选项可以取消打印。<span style="color:#ff0000;">SAS</span><span style="color:#ff0000;">默认打印时用变量标签代替变量，用</span><span style="color:#ff0000;">label</span><span style="color:#ff0000;">可以改变取消标签：</span></p> 
<pre class="has"><code>PROC PRINT DATA=data-set NOOBS LABEL;
run;</code></pre> 
<pre class="has"><code>proc print data=bank label;
    labne var_name='tep_lable';
run;</code></pre> 
<p> </p> 
<p> </p> 
<p>&lt;T123例题88&gt;</p> 
<p> </p> 
<p> </p> 
<p> </p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%87%BD%E6%95%B0">二、函数</h2> 
<h4 id="%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%87%BD%E6%95%B0">字符型函数</h4> 
<pre class="has"><code>data work.AreaCodes;
Phonenumber=3125551212;
Code='('!!substr(Phonenumber,1,3)!!')';
run;</code></pre> 
<p>符号||、!!、¦¦，这三个符号都表示将字符串连接在一起。</p> 
<pre class="has"><code>data staff;
	job="FA";
	level="1";
	job=job || level;
run;</code></pre> 
<p>此程序执行的结果，job的值依然是“FA”并不会成为“FA1”；</p> 
<pre class="has"><code>data test;
	first='ipswich,englang';
	city=substr(first,1,7);
	city_country=city!!','!!'england';
run;</code></pre> 
<p>执行后city_country的结果是：ipswich        ,england；长度23个字节；</p> 
<p>&lt;T50例题21&gt;&lt;T123例题59&gt;&lt;T123例题72&gt;</p> 
<h4 id="%E5%BE%AA%E7%8E%AF%E5%87%BD%E6%95%B0">循环函数</h4> 
<pre class="has"><code>data work.inventory;
products=7;
do until (products gt 6);
products+1;
end;
run;
</code></pre> 
<p>循环中do until先执行语句再进行判断；do while 先判断再执行程序；</p> 
<p>&lt;T50例题22&gt;、&lt;T123例题5&gt;、&lt;T123例题38&gt;&lt;T123例题85、86&gt;</p> 
<pre class="has"><code>data bank;
	input name $ rate;
	cards;
	first 0.9
	bank 0.98
	distei 0.87
	;
run;
data newbank;
	do year=1 to 3;
	set bank;
	capital+5000;
/*	output;*/
	end;
run;</code></pre> 
<p>当data步中set语句在do循环里面，将会一条条输入数据，如上，如果循环里没有output则输出只有最后一条记录；</p> 
<p>&lt;T123例题87&gt;</p> 
<h4 id="%E5%B9%B3%E5%9D%87%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%98%E9%87%8F%E7%AE%80%E5%86%99">平均函数的变量简写</h4> 
<pre class="has"><code>mean(of num1-num4);</code></pre> 
<h4 id="%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%ADIF%2FELSEIF">条件判断IF/ELSEIF</h4> 
<p>&lt;T123例题37&gt; &lt;T123例题39&gt; &lt;T123例题54&gt;&lt;T123例题57-&gt;</p> 
<h4 id="%E6%95%B0%E7%BB%84%E5%91%BD%E5%90%8D%E6%96%B9%E5%BC%8F">数组命名方式</h4> 
<pre class="has"><code>array name (n) $ variable-list;

·name是数组名称
·n为数组中变量个数，括号可以用{} 或者[]代替
·如果变量是字符且之前没定义，需要添加$
</code></pre> 
<p>&lt;T50例题23&gt;&lt;T123例题44-47&gt;</p> 
<h4 id="%E5%B0%86%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%8F%98%E9%87%8F%E8%BD%AC%E6%8D%A2%E6%88%90%E6%95%B0%E5%80%BC%E5%9E%8B%E5%8F%98%E9%87%8F%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%9A">将字符型变量转换成数值型变量的方式：</h4> 
<pre class="has"><code>data bonus;
infile 'file-specification';
input salary $ 1-7 raise 9-11;
 newsalary=input(salary,comma7.) + raise;
run;</code></pre> 
<p>input语句将字符型变量salary变为数值型变量；&lt;T50例题46&gt;</p> 
<p>put语句将数值变成字符变量；&lt;T123例题82&gt;</p> 
<p><strong>字符型和数值型变量相计算（加减乘除）</strong></p> 
<pre class="has"><code>data retail;
	cost='20';
	total=.10*cost;
run;</code></pre> 
<p>total的值可以计算，total最终的计算值是2；&lt;T123例题78&gt;</p> 
<pre class="has"><code>data retail;
	cost='$20,000';
	dis=0.10*cost;
run;</code></pre> 
<p>dis的值为空值，不可以计算，因为不能识别cost字符串里面的$和逗号‘，’；&lt;T70例题10&gt;</p> 
<p><strong>用连接符将字符串和数值连在一起的结果：</strong></p> 
<pre class="has"><code>data product;

	num=567;
	item='101';
	item_num=item || '/' || num;
run;</code></pre> 
<p>item_num的值是字符型，并且把数值型变量num变为字符型，由于数值型变量默认8个字节长度，所以变成字符串时有5个空格填充使得数值变量567，变成字符变量“   567”，故最终item_num的结果是101/    567；</p> 
<p>&lt;T123例题79&gt;</p> 
<h4 id="%E6%8E%92%E5%BA%8F%E5%87%BD%E6%95%B0">排序函数</h4> 
<p>&lt;T123例题48-53&gt;</p> 
<h4 id="%E6%B1%82%E5%92%8C%E5%87%BD%E6%95%B0">求和函数</h4> 
<p>&lt;T123例题60-61&gt;</p> 
<h4 id="first%2Flast%E5%BA%94%E7%94%A8">first/last应用</h4> 
<p>&lt;T123例题66-68&gt;</p> 
<h4 id="retain%E7%9A%84%E5%BA%94%E7%94%A8">retain的应用</h4> 
<p>&lt;T123例题71&gt;</p> 
<h4 id="scan%E5%87%BD%E6%95%B0">scan函数</h4> 
<p>scan函数: scan(s,n,"char")表示从字串string中以char为分隔符提取第n个字符串；</p> 
<pre class="has"><code>scan(s,n&lt;,list-of-delimiters&gt;)</code></pre> 
<p>如果指定分隔符，则只会按照该分隔符提取。<br> 如果不指定，则按照常用的分隔符拆分，默认分隔符为:空格 . &lt; ( + &amp; ! $ *) ; ^ - / , % | 等之一或组合</p> 
<p>如果|n|=0或大于字符s的个数，则该函数返回空格。</p> 
<pre class="has"><code>data test;
	a='a tale of two citys,char,les,jdickens';
	word=scan(a,3,',');
run;</code></pre> 
<p>上面程序的运行结果word结果是les;word变量的长度和a的长度一样。</p> 
<p>&lt;T123例题74-76&gt;</p> 
<h4> </h4> 
<h2 id="%E4%B8%89%E3%80%81%E6%89%93%E5%8D%B0%E6%8F%8F%E8%BF%B0%E6%95%B0%E6%8D%AE">三、打印描述数据</h2> 
<h4 id="%E6%95%B0%E5%80%BC%E5%9E%8B%E5%8F%98%E9%87%8F%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8Fformat">数值型变量输出格式format</h4> 
<p style="margin-left:0cm;">打印数据时，SAS会自动安排最好的格式，小数点位数、空格等。当不需要默认格式时，可以用SAS formats改变打印的外观。</p> 
<pre class="has"><code>data a;
	b=110700;
	b1=110701;
	b2=110702;
	b3=110703;
	format b dollar11.2
			b1 dollar8.2
			b2 comma8.2
			b3 comma11.2
 ;
run;</code></pre> 
<p>输出结果：<img alt="" class="has" height="42" src="https://images2.imgbox.com/a3/fe/zHmakyiI_o.png" width="343"></p> 
<h4 id="proc%20tabulate">proc tabulate</h4> 
<p>PROC TABULATE 比proc mean和proc freq过程产生的报告更好看；</p> 
<p>语句形式为：</p> 
<p>PROC TABULATE;</p> 
<p>CLASS classification-variable-list; 将数据分成不同部分</p> 
<p>TABLE  page,row,column;指定页、行、列，</p> 
<pre class="has"><code>data fl;
infile cards dlm='	';
input name $ port $ loco $ type $ price length;
cards;
s	maalea	sail	sch	95	64
am	maalea	sail	yac	72.95	65
al	lahaina	sail	cat	112	60
o	maalea	power	cat	62	65
an	maalea	sail	sch	177.5	52
ha	maalea	power	cat	88.99	110
le	maalea	power	yac	99.99	45
ka	maalea	power	cat	69.5	70
re	lahaina	power	yac	59.95	50
bl	maalea	sail	cat	92.95	65
;
run;


proc format;
value $typ "cat"="cata" "sch"="scho" "yac"="yach";


proc tabulate data=fl;
class loco type;
var price length;
format type $typ.;
table loco="" all="汇总",mean=""*(price="mean of price"*format=dollar9.2 length="mean of length"*format=6.0)*(type="" all="汇总") /box="鸟他" misstext="none";
run;</code></pre> 
<p> </p> 
<p>结果：</p> 
<p><img alt="" class="has" height="101" src="https://images2.imgbox.com/30/ab/l4QLwpKg_o.png" width="419"></p> 
<h4 id="proc%20report">proc report</h4> 
<p>常用选项：</p> 
<p>GROUP为变量的每一个唯一值创建一行；</p> 
<p>ACROSS为变量的每一个唯一值创建一列；</p> 
<p>ORDER为每一个观测创建一行，并且这些行按照排序变量的取值进行排列；</p> 
<p>proc report中define的用法</p> 
<p>define用来为单个变量指定一些选项</p> 
<pre class="has"><code>define var/options 'column-header';

define age/ORDER 'age at asimission';
该语句使sas生成的报表按变量age排序，并且用‘age at asimission’作为该变量的标题；</code></pre> 
<p>例子：</p> 
<pre class="has"><code>pro1：
data bank;
	input name $ rate age;
	cards;
	first 0.9 23
	first 0.93 25
	first 0.96 29
	bank 0.98 23
	bank 0.88 29
	bank 0.78 27
	distei 0.87 35
	;
run;


proc report data=bank nowindows headline;
	title "bank";
	column name,(rate age);
	define name/across;
run;</code></pre> 
<p>pro1：运行结果：</p> 
<p><img alt="" class="has" height="109" src="https://images2.imgbox.com/be/87/S0dlO6SV_o.png" width="227"></p> 
<pre class="has"><code>pro2：
proc report data=bank headline;
	title "test";
	column  name rate age;
	define name / across;
run;</code></pre> 
<p> </p> 
<p>pro2运行结果：</p> 
<p><img alt="" class="has" height="198" src="https://images2.imgbox.com/97/fe/YkZzJSvT_o.png" width="282"></p> 
<pre class="has"><code>pro3：
proc report data=bank headskip;
	title "test1";
	column  name rate age;
	define name / group;
	define rate/mean 'avg rate';
run;</code></pre> 
<p>结果：define中group对name进行分组，每个唯一name观测只生成一条数据；</p> 
<p>           define中group对rate做的mean指的是对每个name值求平均，后面‘avg rate’是为变量重命名，如果‘avg/rate’则是变量名换行表示；</p> 
<p><img alt="" class="has" height="151" src="https://images2.imgbox.com/7d/95/osu7Fs3R_o.png" width="173"></p> 
<p>若将define中的group换为order，其他不变则结果是：</p> 
<p><img alt="" class="has" height="248" src="https://images2.imgbox.com/97/64/dZiIm9CJ_o.png" width="183"></p> 
<pre class="has"><code>proc report data=bank;
column name age rate;
run;</code></pre> 
<p><img alt="" class="has" height="247" src="https://images2.imgbox.com/c4/39/7q5feqQ0_o.png" width="160"></p> 
<pre class="has"><code>proc report data=bank;
   column  age rate;
run;</code></pre> 
<p>      <img alt="" class="has" height="100" src="https://images2.imgbox.com/b4/fe/kAbwYc1X_o.png" width="102"></p> 
<p>proc report中若column中全是数值型变量，则结果集是变量的求和；</p> 
<p>&lt;T50例题46&gt; &lt;T123例题91-93&gt;&lt;T1220例题p41-&gt;</p> 
<h4 id="report%E4%B8%ADbreak%E5%92%8Crbreak%E7%94%A8%E6%B3%95"><strong>report中break和rbreak用法</strong></h4> 
<p>Break语句和Rbreak可以为报告增加分割，Break语句为指定变量每一个唯一值添加分割，而Rbreak为整个报表添加分割（如果使用by语句，则会为每个by分组添加分割）。语句的基本语法为：</p> 
<p>BREAK location variable / options；</p> 
<p>RBREAK location  / options；</p> 
<p>location有两个取值before、after 决定分割出现在报表特定部分之前还是之后。斜杠/后的选项通常有</p> 
<p>page：开始新的一页</p> 
<p>summarize：为数值变量插入汇总统计量</p> 
<pre class="has"><code>data parks;
	input name $ type $ region $ rate age;
	cards;
	first nm west 1 2
	first nm west 1 2
	first  nm east 3 4
	first np west 5 6
	bank nm east 7 8
	bank nm west 1 2
	bank np west 3 4
	distei np west 5 6
	;
run;


proc report data=parks;
column name type region rate age;
define region / order;
break after region/summarize;
/*rbreak after/summarize;*/
title "break and rbreak 3";
run;</code></pre> 
<p>运行结果：</p> 
<p>注意，使用break时，需要指定一个，并且这个变量必须是分组或者排序变量，即：需要在define语句中为该变量指定group或者order用法选项；</p> 
<p><img alt="" class="has" height="435" src="https://images2.imgbox.com/3b/9c/rSNURB2K_o.png" width="351"></p> 
<p>当吧break改为rbreak时，运行结果为：</p> 
<p><img alt="" class="has" height="390" src="https://images2.imgbox.com/c1/38/C7tYN3Kq_o.png" width="330"></p> 
<p> </p> 
<h4 id="proc%20report%20%E8%BE%93%E5%87%BA%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%BB%9F%E8%AE%A1%E9%87%8F">proc report 输出中添加统计量</h4> 
<p>report中添加统计量和tabulate过程means过程计算统计量是调用的同一个内部引擎实现的，report步中在column语句该变量名与统计量关键字之间插入逗号即可实现，如果是统计量N则不需要逗号，因为该统计量不针对具体的变量进行统计。</p> 
<p>如：打印变量Age的中位数和观测数 COLUMN age，MEDIAN N;</p> 
<p>若要对一个变量计算多个统计量，将多个统计量放到括号即可</p> 
<p>COLUMN age，（MAX MIN） (height weight)，MEAN；为age计算两个统计量，为变量height和weight计算同一个统计量；</p> 
<p> </p> 
<p><strong>proc report中添加计算变量</strong></p> 
<p><strong>添加新变量是通过计算块实现的，而计算块是COMPUTE语句开始，ENDCOMP语句结束的一个语句块。在两个语句之间可以使用编程语句完成新变量的计算，编程语句仅限于：赋值语句、IF-THRN/ELSE、DO循环。不能为新变量指定DEFINE语句，如果指定，必须添加COMPUTED 选项，以表明该变量是通过计算块创建的；</strong></p> 
<pre class="has"><code>DEFINE income / COMPUTED;

COPMUTE income;
    income=salary.SUM + bonus.SUM;
ENDCOMP;</code></pre> 
<p>上面语句生成数值计算变量income，其值为salary和bonus的总和；</p> 
<p> </p> 
<h4 id="proc%20means">proc means</h4> 
<p>means过程提供数值变量的简单统计量，过程以关键词proc means开头，后面有以下选项：proc means options;</p> 
<p>MACDEC=n  执行显示的小数位数；</p> 
<p>MISSING   将缺失值视为有效的汇总组；</p> 
<p><img alt="" class="has" height="173" src="https://images2.imgbox.com/6a/2e/5ozNmsmY_o.png" width="322"></p> 
<p>&lt;T123例题91-97&gt;</p> 
<h4 id="output" style="margin-left:0cm;">输出output</h4> 
<pre class="has"><code>  X  Y
  -- --
  5  2
  3  1
  5  6


The following SAS program is submitted:
  data SASUSER.ONE  SASUSER.TWO  OTHER;
     set SASDATA.TWO;
     if X eq 5 then output SASUSER.ONE;
     if Y lt 5 then output SASUSER.TWO;
     output;
  run;
</code></pre> 
<p>若没有最后一个output语句则输出的数据集中ONE和 TWO 有2个观测，OTHER无观测值；</p> 
<p>但是上述代码中含有output，则输出结果中ONE和 TWO 有5个观测，OTHER有3个观测值；</p> 
<h4> </h4> 
<h2 id="MEGER%EF%BC%9A">四、数据合并：</h2> 
<h4 id="set%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE">set合并数据</h4> 
<pre class="has"><code>data three;
 set one two;
 run;


  data three;
 set one two;
 by x;
 run;</code></pre> 
<p>结果：</p> 
<p><img alt="" class="has" height="130" src="https://images2.imgbox.com/25/90/Sinqdwbi_o.png" width="263">one数据集变量为x、y，two数据集变量为x、z；</p> 
<p>横向合并两个数据，若不加by变量则不对by变量排序，安装数据原来的顺序拼接；如果数据集two中含有和数据集one相同的变量，则two的变量会替换one里的变量；</p> 
<pre class="has"><code> data three;
     set one;
     set two;
 run;</code></pre> 
<p>若有两个set语句，则结果为：</p> 
<p><img alt="" class="has" height="70" src="https://images2.imgbox.com/71/44/1P4On6ul_o.png" width="271"></p> 
<p>多个set语句时候，只保留观测最少数据集的个数，并且后面的数据集中的变量覆盖前面数据集中相同变量名里的观测值；</p> 
<p> </p> 
<h4 id="MERGE%E5%90%88%E5%B9%B6%E6%95%B0%E6%8D%AE">MERGE合并数据</h4> 
<p><strong>MERGE 数据集必须先按BY变量排序，并且必须先按<span style="color:#f33b45;">升序</span>排序；</strong></p> 
<p>若MEGER 后面没有by ,则在处理数据时，就按行号进行连接数据，也就是a 的第一行接b的第一行，并且<strong>如果名称一样</strong>的变量会被后表覆盖。第二行接第二如，如此下去。</p> 
<p>可以在merge某个或者两个数据集名字后添加in=contributor_variable（贡献变量）的选项，用于控制哪些观测值加入合并后的数据集。如果这个数据集对现在正在创建的观测值确实有贡献（即by变量上不上缺失值），那么贡献变量的值为真（1），否则值为假（0）。“IN=”选项创建的是一个临时变量，可以用在DAT步的任何地方，但不会添加到新数据集中。</p> 
<p>BY变量在某个数据集中的变量名称不一样，可以用<strong>RENAME</strong>语句：</p> 
<p>【注意rename在重命名时候旧名字=新名字】</p> 
<pre class="has"><code>MERGE MASTER TEST(IN=intest RENAME=（old_name=new_name）)；</code></pre> 
<p>上语句能从TEST数据集中拿出一个观测值，将变量old_name重新命名为new_name，目的是用来合并，当再次打开TEST数据集，这个变量的名称仍然是old_name；</p> 
<p><strong>merge的运算和SQL里的left join 不一样，主要区别如下：</strong></p> 
<p>1、merge的运算多对一和一对多的结果是一样的</p> 
<p>2、merge里A表B表分别都有3个相同的观察，在用by匹配时，相同观察会一一对应，如下：</p> 
<pre class="has"><code>A:
aa 1
bb 11
bb 22
bb 33
cc 12 

B：
aa 1000
bb 1100
bb 110000
bb 22222
cc 1200 


data c;
merge employee salary;
by name;
run;</code></pre> 
<p>结果如下：</p> 
<p>                        <img alt="" class="has" height="124" src="https://images2.imgbox.com/db/2f/4jZP8kwG_o.png" width="257"></p> 
<p>同样的数据集，如果用sql代码得出的结果完全不一样：</p> 
<pre class="has"><code>select a.*,b.salary from employee as a left join salary as b on a.name=b.name;</code></pre> 
<p>结果如下：    </p> 
<p>                       <img alt="" class="has" height="239" src="https://images2.imgbox.com/75/04/KWeP0XxU_o.png" width="265"></p> 
<h4 id="%E6%95%B0%E6%8D%AE%E8%BD%AC%E6%8D%A2TRANSPOSE">数据转换TRANSPOSE</h4> 
<p>TRANSPOSE过程将观测转为变量，或者将变量转为观测，语句如下：</p> 
<p>PROC TRANSPOSE DATA=data-set OUT=new-data-set;</p> 
<p>      BY  variable-list;分组变量，转置数据集将会对每一个BY组将变量变成观测，数据集在转置前必须对这些<strong>BY变量排序</strong>；</p> 
<p>      ID   variable-list;</p> 
<p>      VAR  variable-list;</p> 
<p> </p> 
<pre class="has"><code>data baseball;
	infile cards;
	input team $ player type $ entry;
cards;
a 10 sa 43
a 12 sa1 51
b 8 sa 38
b 13 ba 12
c 12 ba 28
c 13 b1a 30
;
run;

proc sort data=baseball;
	by team player;
run;

proc transpose data=baseball out=bb;
 by team ;
 id type;
 var entry;
run;</code></pre> 
<p>BY分组变量保持变量名称，ID将变量里的不同观测变成每一个列变量名，VAR指定转置变量</p> 
<h4 id="%E2%80%8B"><img alt="" class="has" height="87" src="https://images2.imgbox.com/cd/21/zpqhIaPk_o.png" width="509"></h4> 
<h4 id="%E8%BF%87%E7%A8%8B%E4%B8%AD%E5%88%9B%E5%BB%BA%E8%BE%93%E5%87%BAfile%2Fput">过程中创建输出file/put对应从原始文件中读取数据infile/input</h4> 
<p>&lt;T123例题31-33&gt;</p> 
<h4 id="datasets%E6%AD%A5%E7%9A%84%E9%80%89%E9%A1%B9">datasets步的选项</h4> 
<pre class="has"><code>proc datasets lib=work;
	contents data=homework varnum;
quit;</code></pre> 
<p>VARNUM<br> 上下文: [PROC DATASETS, CONTENTS 语句] VARNUM 选项</p> 
<p>Prints a list of the variable names in the order of their logical position in the table.（the order they were created）<br> The physical position of the variable in the table is engine-dependent.</p> 
<p>&lt;T123例题41&gt;</p> 
<p> </p> 
<p style="margin-left:0cm;"><strong>Put</strong><strong>语句</strong> 当写入原始数据文件或者报告时，也可以在put语句中使用输出格式，在每个变量后面放置输出格式：</p> 
<pre class="has"><code>PUT Profit DOLLAR8.2  Loss DOLLAR8.2  SaleDate MMDDYY8.;</code></pre> 
<p> </p> 
<p><img alt="" class="has" height="805" src="https://images2.imgbox.com/63/40/VbW8tcPb_o.png" width="692"></p> 
<h4 id="%E6%BF%80%E6%B4%BBdata%E6%AD%A5debug">激活data步debug</h4> 
<pre class="has"><code>data WORK.TEST / debug;    
   set WORK.PILOTS;
   State=scan(cityState,2,' ');
   if State='NE' then description='Central';
run;</code></pre> 
<p>&lt;T70例题14&gt;</p> 
<h4 id="_error_">_error_</h4> 
<p style="margin-left:0cm;">15.Which statement is true concerning the SAS automatic variable _ERROR_?</p> 
<p style="margin-left:0cm;">     A. It cannot be used in an if/then condition.</p> 
<p style="margin-left:0cm;">     B. It cannot be used in an assignment statement.</p> 
<p style="margin-left:0cm;">     C. It can be put into a keep statement or keep= option.</p> 
<p style="margin-left:0cm;">     D. It is automatically dropped.</p> 
<p style="margin-left:0cm;">Answer: D</p> 
<p style="margin-left:0cm;">&lt;T70例题15、18&gt;</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">Syntax errors are common types of errors. Some SAS system options, features of the Editor<br> window, and the DATA step debugger can help you identify syntax errors. Other types of<br> errors include data errors, semantic errors, and execution-time errors.</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"> </p> 
<h4 id="format" style="margin-left:0cm;">format</h4> 
<p style="margin-left:0cm;">20. The data set WORK.REALESTATE has the variable LocalFee with a format of 9. and a variable CountryFee with a format of 7.;</p> 
<p style="margin-left:0cm;">The following SAS program is submitted:</p> 
<p style="margin-left:0cm;">  data WORK.FEE_STRUCTURE;</p> 
<p style="margin-left:0cm;">     format LocalFee CountryFee percent7.2;</p> 
<p style="margin-left:0cm;">     set WORK.REALESTAT;</p> 
<p style="margin-left:0cm;">     LocalFee=LocalFee/100;</p> 
<p style="margin-left:0cm;">     CountryFee=CountryFee/100;</p> 
<p style="margin-left:0cm;">  run;</p> 
<p style="margin-left:0cm;">What are the formats of the variables LOCALFEE and COUNTRYFEE in the output dataset?</p> 
<p style="margin-left:0cm;">     A. LocalFee has format of 9. and CountryFee has a format of 7.</p> 
<p style="margin-left:0cm;">     B. LocalFee has format of 9. and CountryFee has a format of percent7.2</p> 
<p style="margin-left:0cm;">     C. Both LocalFee and CountryFee have a format of percent7.2</p> 
<p style="margin-left:0cm;">     D. The data step fails execution; there is no format for LocalFee.</p> 
<p style="margin-left:0cm;">Answer: C</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"> </p> 
<h2 id="%E4%BA%94%E3%80%81%E6%8A%A5%E5%91%8A%E8%BE%93%E5%87%BA" style="margin-left:0cm;">五、报告输出</h2> 
<h4 id="html%E8%BE%93%E5%87%BA">html输出</h4> 
<p>打开HTML输出目标使用的语句形式为：ODS HTML BODY=‘body-filename.html’  options；</p> 
<p>生成正文文件（body文件）包含结果内容。选项FILE=与选项BODY=是同样的功能。其他常用的选项有：</p> 
<p>CONTENTS='filename'  创建一个链接到正文的目录文件</p> 
<p>PAGE='filename'    创建一个页面链接的目录文件</p> 
<p>FRAME='filename'   创建一个框架文件，可以同时查看正文、内容或者页面文件。</p> 
<p>STYLE='filename'   指定样式模板，默认是HTMLBLUE</p> 
<p> </p> 
<p>为什么写ods pdf close</p> 
<p>sas程序默认的是listing输出格式，如果想要html或者pdf格式输出，在结尾处close可以节省系统资源；</p> 
<h2>六、总结</h2> 
<h4>SAS9易错点总结：</h4> 
<p>这里的总结是考前最后一遍刷50题，70题，120题，220题，主要总结了自己未掌握牢固的知识点，每个童鞋的情况不一样，只做借鉴。</p> 
<p><strong>220题第12章</strong></p> 
<p>proc步里不能使用keep和drop选项，但是可以使用keep=，drop=选项</p> 
<p>data步在程序结尾将变量输出到sas数据集中，</p> 
<p> </p> 
<p><strong>220题第13章</strong></p> 
<pre class="has"><code class="language-cpp">proc import datafile="c:\sas\abc.xlsx" out=b DBMS=EXCEL&lt;xlsx/xls&gt; replace;
    SHEET="sheet_name";
    RANGE="sheet-name$UL:LR";
run;</code></pre> 
<p>注：SHEET 和 RANGE不用加特殊符号都可以识别中文字符；</p> 
<p>默认情况下IMPORT过程将电子表格第一行作为变量的名称，若不想这样做可以使用：GETNAMES=NO;</p> 
<p>当excel一列中同时包含数值和字符，默认情况下，数值被转换成缺失值，为了将数值读为字符型使用：MIXED=YES;</p> 
<p> </p> 
<p> </p> 
<p>sas函数</p> 
<p>int（）</p> 
<p>round（）</p> 
<p> </p> 
<pre class="has"><code class="language-vbscript">PROC FREQ DATA=mydata NLEVELS;
    TABLE name age;
run;</code></pre> 
<p>选项NLEVELS指出在table中出现的变量中有几个水平。</p> 
<p> </p> 
<p>用小数据集测试程序，只读取部分数据，</p> 
<ol><li>在INFILE中写OBS=100，或者FIRSTOBS=100 OBS=200；</li><li>Data步中用set语句读取sas数据集时也可以限制观测数，可以在set、merge、update语句中使用OBS= FIRSTOBS=；</li></ol> 
<p>DATA a;</p> 
<p>Set cats(OBS=100);</p> 
<p>Run;</p> 
<p>修复无效数据</p> 
<p>Data步里使用putlog=_all_;或者putlog var1=  var2=  var3=；</p> 
<p> </p> 
<p>50T.27  50T.40  50T.41   50T.48</p> 
<p>123T.7（当源文件中数值变量带$时候，若从$开始读取数据且不加读入格式，则读出的数据为缺失值，若从$下一个字节开始读数据，则读入的是数值数据）</p> 
<p>123T.8使用input读取源文件时，当读完一个字节时，指针自动指到下一个字节位置；</p> 
<p> </p> 
<p>123T.12 infile中使用dlm=’,’时，源文件中连续两个逗号分隔符视为一个分隔符，data步继续读取下一个变量。当定义3个，且源文件中第一行有两个逗号分隔符，则第三个变量继续读取下一行的值；如下：</p> 
<p>data a;</p> 
<p>    infile cards dlm=',';</p> 
<p>    input item1 $ item2 $ item3 $;</p> 
<p>    cards;</p> 
<p>    chair,,table</p> 
<p>    chair2,couth,table</p> 
<p>    ;</p> 
<p><strong>run</strong>;</p> 
<p><img alt="" class="has" height="91" src="https://images2.imgbox.com/31/fe/4EceBFTi_o.png" width="350"></p> 
<p> </p> 
<p>123T.19 rename</p> 
<p>123T.34 data步里如果没有file只有put则输出在log里，若同时有put和file则输出为源文件，此时若想输出到log使用putlog=_all_</p> 
<p>123T.38 data步里，使用set语句和do语句，观测数量是原set数据集的数量乘以do做的循环次数；</p> 
<p>123T.39 当一个变量在input中未标识由多个空格组成时，data在读取时还是按空格分隔符读取，如下：</p> 
<pre class="has"><code>data homework;
infile datalines ;
input name $ age height;
if age LE 10;
datalines;
aa cc 35 71

bb dd 10 43

cc ee 9 37
;
run;</code></pre> 
<p><img alt="" class="has" height="128" src="https://images2.imgbox.com/a5/9f/K0ysoCqy_o.png" width="344"></p> 
<p> </p> 
<p>123T.41   123T.47 123T.57（if和do的用法）</p> 
<p>data a;<br>  a=intnx('year','05feb2010'd,3,'E');<br>  format a mmddyy10.;<br> run;</p> 
<p>123T.79将数值型变量变为字符变量时，字符长度变为12个字节，并且是右对齐；</p> 
<p>123T.80-81，将字符变量变成数值和将数值变量变成字符；</p> 
<p>123T.84</p> 
<pre class="has"><code>proc means data= bank;
	class name;
	var rate;
	output out=sta mean(rate)=r_mean
					sum(rate)=r_sum;
run;</code></pre> 
<p>程序运行结果：</p> 
<p><img alt="" class="has" height="145" src="https://images2.imgbox.com/68/20/rKNQdaQi_o.png" width="507"></p> 
<p>输出数据集out=sta的结果：</p> 
<p><img alt="" class="has" height="112" src="https://images2.imgbox.com/57/c9/yCfhzjuo_o.png" width="431"></p> 
<p>correctly invokes the DATA Step Debugger</p> 
<p>data WORK.TEST / debug;   </p> 
<p>   set WORK.PILOTS;</p> 
<p>   State=scan(cityState,2,' ');</p> 
<p>   if State='NE' then description='Central';</p> 
<p> </p> 
<p>在编译阶段count的值赋值为0；</p> 
<p> data WORK.NEW;</p> 
<p>    set WORK.OLD;</p> 
<p>    Count+1;</p> 
<p>Total的初始值是缺失值；</p> 
<p>data WORK.TOTAL_SALARY;</p> 
<p>     retain Total;</p> 
<p>     set WORK.SALARY;</p> 
<p>     by Department;</p> 
<p>     if First.Department</p> 
<p>        then Total=0;</p> 
<p>     Total=sum(Total, Wagerate);</p> 
<p>     if Last.Total;</p> 
<p>  run;</p> 
<p>自定义的格式是存储在SAS catalog里面的；</p> 
<p>These formats must be stored in the WORK.FORMATS or SASUSER.FORMATS catalog</p> 
<p>70T.41</p> 
<p>A. FullName=CATX(' ',EmpFName,EmpLName);</p> 
<p>B. FullName=CAT(' ',EmpFName,EmpLName);</p> 
<p> run;</p> 
<p> </p> 
<h4>SAS9.4总结：</h4> 
<p>SASBase的认证考试截止时间到2019.9.30，但目前为止英文版的SASBase9认证在中国已经没有考点了。并且在2019.9.30日将全部取消Base9的认证，统一改为SAS 9.4的认证。sas9和sas9.4考试有很大区别，很多第一次考sas9.4的同学都挂了。我比较幸运考过了，准备考证的同学可以一起交流。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/581bb54e56f6151dba3c31d573274c25/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在K8s上部署Redis 集群</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5aa587b760505eeef3a57d5bca07918e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">git pull提示remote error:CAPTCHA required</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>