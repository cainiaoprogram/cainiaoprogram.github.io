<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>用 LangChain 搭建基于 Notion 文档的 RAG 应用 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="用 LangChain 搭建基于 Notion 文档的 RAG 应用" />
<meta property="og:description" content="如何通过语言模型查询 Notion 文档？LangChain 和 Milvus 缺一不可。
在整个过程中，我们会将 LangChain 作为框架，Milvus 作为相似性搜索引擎，用二者搭建一个基本的检索增强生成（RAG）应用。在之前的文章中，我们已经介绍过 LangChain 中的“自查询”（Self-querying）。本质上，LangChain 中的自查询功能就是构建一个基本的 RAG 架构，如图所示：
在 LangChain 中处理 Notion 文档共包含三个步骤：获取、存储和查询文档。获取是指获取 Notion 文档并将内容加载到内存中。存储步骤包括启动向量数据库（Milvus）、将文档转化为向量、将文档向量存储至向量数据库中。查询部分包括针对 Notion 文档进行提问。本文将带大家一一拆解这三个步骤，代码请参考 colab notebook。
01.获取 Notion 文档 用 LangChain 的 NotionDirectoryLoader将文档加载到内存中。我们提供文档的路径并调用load 函数来获取 Notion 文档。加载完毕后，可以得到 Notion 文档的 Markdown 文件。本例中我们以一个 Markdown 文件示意。
接下来，用 LangChain 的 markdown 标题文本分割器。我们向其提供一个分割符列表，然后传入之前命名的 md_file 来获取分割内容。在实际定义headers_to_split_on列表时，请使用自己 Notion 文档的标题。
# Load Notion page as a markdownfile filefrom langchain.document_loaders import NotionDirectoryLoader
path=&#39;./notion_docs&#39;
loader = NotionDirectoryLoader(path)
docs = loader.load()" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d543a65caf5ac811cc85efbbce50061d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-30T16:17:24+08:00" />
<meta property="article:modified_time" content="2023-11-30T16:17:24+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">用 LangChain 搭建基于 Notion 文档的 RAG 应用</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <section id="nice" style="font-size: 16px; padding: 0 10px; line-height: 1.6; word-spacing: 0px; letter-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; color: #3E3E3E; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, 'PingFang SC', Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;"> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">如何通过语言模型查询 Notion 文档？LangChain 和 Milvus 缺一不可。</p> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">在整个过程中，我们会将 LangChain 作为框架，Milvus 作为相似性搜索引擎，用二者搭建一个基本的检索增强生成（RAG）应用。在之前的文章中，我们已经介绍过 LangChain 中的“自查询”（Self-querying）。本质上，LangChain 中的自查询功能就是构建一个基本的 RAG 架构，如图所示：</p> 
 <figure style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"> 
  <img src="https://images2.imgbox.com/ca/f5/XYwhNjcw_o.png" alt="alt" style="max-width: 100%; border-radius: 5px; display: block; margin: 28px auto; width: 100%; height: 100%; object-fit: contain;"> 
 </figure> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">在 LangChain 中处理 Notion 文档共包含三个步骤：获取、存储和查询文档。获取是指获取 Notion 文档并将内容加载到内存中。存储步骤包括启动向量数据库（Milvus）、将文档转化为向量、将文档向量存储至向量数据库中。查询部分包括针对 Notion 文档进行提问。本文将带大家一一拆解这三个步骤，代码请参考 <a href="https://colab.research.google.com/drive/1hDwF9EkGd1SND3CUe15OmfvpOMd0lM-m?usp=sharing" rel="nofollow" style="text-decoration: none; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #3e3e3e; color: #2237B8; font-size: 15px; letter-spacing: 0.5px; margin: 0 2px;">colab notebook</a>。</p> 
 <h3 style="padding: 0px; font-weight: bold; color: black; font-size: 22px; font-family: system-ui, Pingfang-SC, sans-serif; margin-top: 0; margin-bottom: 0;"><span class="prefix" style="display: none;"></span><span class="content" style="font-weight: 600; font-size: 24px; line-height: 160%; color: #3E3E3E;">01.获取 Notion 文档</span><span class="suffix"></span></h3> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">用 LangChain 的 NotionDirectoryLoader将文档加载到内存中。我们提供文档的路径并调用load 函数来获取 Notion 文档。加载完毕后，可以得到 Notion 文档的 Markdown 文件。本例中我们以一个 Markdown 文件示意。</p> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">接下来，用 LangChain 的 markdown 标题文本分割器。我们向其提供一个分割符列表，然后传入之前命名的 md_file 来获取分割内容。在实际定义<code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3e3e3e;">headers_to_split_on</code>列表时，请使用自己 Notion 文档的标题。</p> 
 <pre class="custom" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-comment" style="color: #5c6370; font-style: italic; line-height: 26px;"># Load Notion page as a markdownfile filefrom langchain.document_loaders import NotionDirectoryLoader</span><br>path=<span class="hljs-string" style="color: #98c379; line-height: 26px;">'./notion_docs'</span><br>loader = NotionDirectoryLoader(path)<br>docs = loader.load()<br>md_file=docs[<span class="hljs-number" style="color: #d19a66; line-height: 26px;">0</span>].page_content<br><span class="hljs-comment" style="color: #5c6370; font-style: italic; line-height: 26px;"># Let's create groups based on the section headers in our pagefrom langchain.text_splitter import MarkdownHeaderTextSplitter</span><br>headers_to_split_on = [<br>    (<span class="hljs-string" style="color: #98c379; line-height: 26px;">"##"</span>, <span class="hljs-string" style="color: #98c379; line-height: 26px;">"Section"</span>),<br>]<br>markdown_splitter = MarkdownHeaderTextSplitter(headers_to_split_on=headers_to_split_on)<br>md_header_splits = markdown_splitter.split_text(md_file)<br></code></pre> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">分割任务并检查分割结果。用 LangChain 的 <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3e3e3e;">RecursiveCharacterTextSplitter</code>，使用一些不同的字符来进行分割。四个默认的检查字符是换行符、双换行符、空格或无空格。也可以选择传入自己的 <code style="font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3e3e3e;">separators</code> 参数。</p> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">将 Notion文档进行分块时，我们还需要定义两个关键超参数——分块大小（chunk size）和分块重叠（chunk overlap）。本例中，分块大小为 64，重叠为 8。随后，我们就可以调用 split_documents 函数将所有文档进行分割。</p> 
 <pre class="custom" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-comment" style="color: #5c6370; font-style: italic; line-height: 26px;"># Define our text splitter</span><br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span> langchain.text_splitter <span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span> RecursiveCharacterTextSplitter<br>chunk_size = <span class="hljs-number" style="color: #d19a66; line-height: 26px;">64</span><br>chunk_overlap = <span class="hljs-number" style="color: #d19a66; line-height: 26px;">8</span><br>text_splitter = RecursiveCharacterTextSplitter(chunk_size=chunk_size, chunk_overlap=chunk_overlap)<br>all_splits = text_splitter.split_documents(md_header_splits)<br>all_splits<br></code></pre> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">下图展示了部分分割的 document 对象，其中包含了页面内容和元数据。元数据显示了内容是从哪个章节中提取出来的。</p> 
 <figure style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"> 
  <img src="https://images2.imgbox.com/8f/30/RbRXGZ6r_o.png" alt="alt" style="max-width: 100%; border-radius: 5px; display: block; margin: 28px auto; width: 100%; height: 100%; object-fit: contain;"> 
 </figure> 
 <h3 style="padding: 0px; font-weight: bold; color: black; font-size: 22px; font-family: system-ui, Pingfang-SC, sans-serif; margin-top: 0; margin-bottom: 0;"><span class="prefix" style="display: none;"></span><span class="content" style="font-weight: 600; font-size: 24px; line-height: 160%; color: #3E3E3E;">02.存储 Notion 文档</span><span class="suffix"></span></h3> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">所有文档加载和分割完毕后，就需要存储这些文档块。首先，在 notebook 中直接运行向量数据库 Milvus Lite，随后导入所需的 LangChain 模块——Milvus 和 OpenAI Embeddings。</p> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">用 LangChain 的 Milvus 模块为文档块创建 Collection。这个步骤中我们需要传入的参数包括：文档列表、使用的 Embedding 模型、连接参数、以及 Collection 名称（可选）。</p> 
 <pre class="custom" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span> milvus <span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span> default_server<br>default_server.start()<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span> langchain.vectorstores <span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span> Milvus<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span> langchain.embeddings <span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span> OpenAIEmbeddings<br><br><br>vectordb = Milvus.from_documents(documents=all_splits,<br>    embedding=OpenAIEmbeddings(),<br>    connection_args={<!-- --><span class="hljs-string" style="color: #98c379; line-height: 26px;">"host"</span>: <span class="hljs-string" style="color: #98c379; line-height: 26px;">"127.0.0.1"</span>, <span class="hljs-string" style="color: #98c379; line-height: 26px;">"port"</span>: default_server.listen_port},<br>    collection_name=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"EngineeringNotionDoc"</span>)<br></code></pre> 
 <h3 style="padding: 0px; font-weight: bold; color: black; font-size: 22px; font-family: system-ui, Pingfang-SC, sans-serif; margin-top: 0; margin-bottom: 0;"><span class="prefix" style="display: none;"></span><span class="content" style="font-weight: 600; font-size: 24px; line-height: 160%; color: #3E3E3E;">03.查询 Notion 文档</span><span class="suffix"></span></h3> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">现在可以开始查询文档了。开始前，我们需要从 LangChain 中再导入三个模块：</p> 
 <ul style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;"><li> 
   <section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-family: system-ui, sans-serif; font-size: 15px; font-weight: 400; color: #3e3e3e;"> 
    <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">OpenAI：用于访问GPT。</p> 
   </section></li><li> 
   <section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-family: system-ui, sans-serif; font-size: 15px; font-weight: 400; color: #3e3e3e;"> 
    <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">SelfQueryRetriever：用于搭建基本的 RAG 应用。</p> 
   </section></li><li> 
   <section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-family: system-ui, sans-serif; font-size: 15px; font-weight: 400; color: #3e3e3e;"> 
    <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">Attribute info：用于传入元数据的。</p> 
   </section></li></ul> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">首先，我们定义元数据。随后，需要给自查询检索器提供文档的描述。本例中，描述即为“文档的主要部分”。在我们实例化自查询检索器前，现将 GPT 的温度（Temperature）设置为 0，并赋值给一个名为 llm 的变量。有了 LLM、向量数据库、文档描述和元数据字段后，我们就完成了自查询检索器定义。</p> 
 <pre class="custom" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;"><span style="display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #282c34; border-radius: 5px;"><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span> langchain.llms <span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span> OpenAI<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span> langchain.retrievers.self_query.base <span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span> SelfQueryRetriever<br><span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">from</span> langchain.chains.query_constructor.base <span class="hljs-keyword" style="color: #c678dd; line-height: 26px;">import</span> AttributeInfo<br><br><br>metadata_fields_info = [<br>    AttributeInfo(<br>        name=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"Section"</span>,<br>        description=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"Part of the document that the text comes from"</span>,<br>        type=<span class="hljs-string" style="color: #98c379; line-height: 26px;">"string or list[string]"</span><br>    ),<br>]<br>document_content_description = <span class="hljs-string" style="color: #98c379; line-height: 26px;">"Major sections of the document"</span><br><br><br>llm = OpenAI(temperature=<span class="hljs-number" style="color: #d19a66; line-height: 26px;">0</span>)<br>retriever = SelfQueryRetriever.from_llm(llm, vectordb, document_content_description, metadata_fields_info, verbose=<span class="hljs-literal" style="color: #56b6c2; line-height: 26px;">True</span>)<br>retriever.get_relevant_documents(<span class="hljs-string" style="color: #98c379; line-height: 26px;">"What makes a distinguished engineer?"</span>)<br></code></pre> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">以下例子中我们提出了一个问题：“一名优秀工程师有哪些品质？”（What makes a distinguished engineer?）</p> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">响应如下图所示。我们获得了与提问在语义上最相似的文档片段。但不难发现，其回答也仅仅只是语义上相似，并非完全正确。</p> 
 <figure style="margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;"> 
  <img src="https://images2.imgbox.com/90/28/ILaIOI8W_o.png" alt="alt" style="max-width: 100%; border-radius: 5px; display: block; margin: 28px auto; width: 100%; height: 100%; object-fit: contain;"> 
 </figure> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">本教程介绍了如何加载并解析 Notion 文档，并搭建一个基本的 RAG 应用查询 Notion 文档。我们使用到了 LangChain 作为框架，Milvus 作为向量数据库用于相似性搜索。如果想要进行深入的探索，建议大家调整分块大小和重叠等参数，检查不同的参数值是如何影响查询结果的。</p> 
 <p style="padding-top: 8px; padding-bottom: 8px; margin: 0; font-family: system-ui, Pingfang-SC, sans-serif; font-style: normal; font-weight: 400; font-size: 15px; line-height: 200%; text-align: justify; letter-spacing: 0px; color: #3E3E3E;">所谓分块（Chunking）是构建<a href="https://zilliz.com.cn/use-cases/llm-retrieval-augmented-generation" rel="nofollow" style="text-decoration: none; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #3e3e3e; color: #2237B8; font-size: 15px; letter-spacing: 0.5px; margin: 0 2px;">检索增强型生成（RAG</a>应用程序中最具挑战性的问题。具体的介绍和操作可参考<a href="https://mp.weixin.qq.com/s?__biz=MzUzMDI5OTA5NQ==&amp;mid=2247499274&amp;idx=1&amp;sn=1527b472539802425ce63aef8663e6fb&amp;chksm=fa515fb2cd26d6a487f7a95dc43cd221449e083708e7d731c86fe1d513d27798118090095a26&amp;scene=21#wechat_redirect" rel="nofollow" style="text-decoration: none; word-wrap: break-word; font-weight: bold; border-bottom: 1px solid #3e3e3e; color: #2237B8; font-size: 15px; letter-spacing: 0.5px; margin: 0 2px;">《在 LangChain 尝试了 N 种可能后，我发现了分块的奥义！》</a></p> 
</section> 
<p>本文由<a href="https://mdnice.com/?platform=4" rel="nofollow"> mdnice </a>多平台发布</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/599cde20c16dc532a328e4f98d466019/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">CUDA和FFMPEG硬件解码视频流</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/90e29dce0783f1a0776e55101173cfe5/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">python输出魔方阵</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>