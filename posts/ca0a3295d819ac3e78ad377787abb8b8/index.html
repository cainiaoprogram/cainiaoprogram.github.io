<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>微信小程序基本使用2：wxs，组件的使用以及弹窗、滚动条 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="微信小程序基本使用2：wxs，组件的使用以及弹窗、滚动条" />
<meta property="og:description" content="WXS WXS（WeiXin Script）是小程序的一套脚本语言，结合 WXML，可以构建出页面的结构。
可以在模版中内联少量处理脚本，丰富模板的数据预处理能力。
wsx 在IOS设备上性能是JavaScript的2-20倍
内嵌式 &lt;view&gt; &lt;view&gt;{{m1.toUpper(message)}}&lt;/view&gt; &lt;/view&gt; &lt;wxs module=&#34;m1&#34;&gt; module.exports.toUpper = function(str){ return str.toUpperCase(); } &lt;/wxs&gt; module=“属性值”
关联式 &lt;view&gt; &lt;view&gt;{{m2.toLower(message)}}&lt;/view&gt; &lt;/view&gt; &lt;wxs src=&#34;/utils/tools.wxs&#34; module=&#34;m2&#34;/&gt; 在utils下创建文件tools.wxs
// wxs function toLower(str){ return str.toLowerCase(); } module.exports = { toLower : toLower // 起别名 : 方法名 } 在wxs文件中直接写方法，最后通过module.exports暴露出来
组件Components 组件相当于是自定义标签
组件创建：创建文件夹 – &gt; 右键文件夹创建component
局部 局部配置只能在配置的页面上使用，单独在页面的JS文件中配置
在需要引用组件的页面的JSON文件中配置
{ &#34;usingComponents&#34;: { &#34;my-com&#34; : &#34;/components/test1/test1&#34; } } wxml文件中引用
&lt;view&gt; &lt;my-com&gt;&lt;/my-com&gt; &lt;/view&gt; 引用组件的页面会显示组件的wxml文件中的内容" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ca0a3295d819ac3e78ad377787abb8b8/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T21:28:39+08:00" />
<meta property="article:modified_time" content="2024-01-10T21:28:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">微信小程序基本使用2：wxs，组件的使用以及弹窗、滚动条</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="WXS_0"></a>WXS</h3> 
<p>WXS（WeiXin Script）是小程序的一套脚本语言，结合 <code>WXML</code>，可以构建出页面的结构。</p> 
<p>可以在模版中内联少量处理脚本，丰富模板的数据预处理能力。</p> 
<p>wsx 在IOS设备上性能是JavaScript的2-20倍</p> 
<h4><a id="_8"></a>内嵌式</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{<!-- -->{m1.toUpper(message)}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  module.exports.toUpper = function(str){
    return str.toUpperCase();
  }
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>wxs</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p><strong>module=“属性值”</strong></p> 
<h4><a id="_23"></a>关联式</h4> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{<!-- -->{m2.toLower(message)}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>wxs</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/utils/tools.wxs<span class="token punctuation">"</span></span> <span class="token attr-name">module</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>m2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> 
<p>在utils下创建文件tools.wxs</p> 
<pre><code>// wxs
function toLower(str){
  return str.toLowerCase();
}

module.exports = {
  toLower : toLower
  // 起别名 : 方法名
}
</code></pre> 
<p>在wxs文件中直接写方法，最后通过module.exports暴露出来</p> 
<h3><a id="Components_50"></a>组件Components</h3> 
<p>组件相当于是自定义标签</p> 
<p>组件创建：创建文件夹 – &gt; 右键文件夹创建component</p> 
<h4><a id="_56"></a>局部</h4> 
<p><mark>局部配置只能在配置的页面上使用</mark>，单独在页面的JS文件中配置</p> 
<p>在需要引用组件的页面的JSON文件中配置</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"my-com"</span> <span class="token operator">:</span> <span class="token string">"/components/test1/test1"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>wxml文件中引用</p> 
<pre><code>&lt;view&gt;
  &lt;my-com&gt;&lt;/my-com&gt;
&lt;/view&gt;
</code></pre> 
<p>引用组件的页面会显示组件的wxml文件中的内容</p> 
<h4><a id="_80"></a>全局</h4> 
<p><mark>全局配置所有页面都可以用</mark>，在App.js中配置：</p> 
<p>在windows同级下编写一下代码</p> 
<pre><code class="prism language-json"><span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"my-com"</span> <span class="token operator">:</span> <span class="token string">"/components/test1/test1"</span>
<span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_94"></a>组件的样式隔离</h4> 
<p>app.wxss 中的全局样式 对组件无效的</p> 
<p>只有class选择器会有样式的隔离效果 id选择器 属性选择器 标签选择器 不受样式隔离限制</p> 
<ol><li> <p>方式一：</p> <p>在组件中的json文件下配置</p> <pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"component"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token string-property property">"usingComponents"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string-property property">"styleIsolation"</span><span class="token operator">:</span> <span class="token string">"isolated"</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>方式二：</p> <p>在组件的js文件中配置</p> <pre><code class="prism language-js"><span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">styleIsolation</span> <span class="token operator">:</span> <span class="token string">"isolated"</span>
<span class="token punctuation">}</span>
</code></pre> </li></ol> 
<p>属性值：</p> 
<ul><li><code>isolated</code> 表示启用样式隔离，在自定义组件内外，使用 class 指定的样式将不会相互影响（一般情况下的默认值）；</li><li><code>apply-shared</code> 表示页面 wxss 样式将影响到自定义组件，但自定义组件 wxss 中指定的样式不会影响页面；</li><li><code>shared</code> 表示页面 wxss 样式将影响到自定义组件，自定义组件 wxss 中指定的样式也会影响页面和其他设置了 <code>apply-shared</code> 或 <code>shared</code> 的自定义组件。（这个选项在插件中不可用。）</li></ul> 
<h4><a id="_130"></a>组件传值</h4> 
<p>组件要接收调用者传来的值，并显示到页面上，实现步骤：</p> 
<p>在组件的js文件properties属性列表中定义参数名</p> 
<pre><code class="prism language-js"><span class="token literal-property property">properties</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">max</span> <span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">type</span> <span class="token operator">:</span> Number<span class="token punctuation">,</span>      <span class="token comment">// 定义参数类型</span>
      <span class="token literal-property property">value</span> <span class="token operator">:</span> <span class="token number">20</span>				<span class="token comment">// 默认值，若页面上没传参数，默认值为20</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>组件的wxml文件</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>classA<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>接收到的参数是：{<!-- -->{max+1}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>引用组件的页面（组件的调用者）</p> 
<pre><code class="prism language-wxml">&lt;view&gt;
  &lt;my-com max="10" &gt;&lt;/my-com&gt;   //  传参的参数名="参数值"
&lt;/view&gt;
</code></pre> 
<p>调用页面上显示11，如果没传，则显示默认值 20 +1 = 21</p> 
<h4><a id="properties_163"></a>组件的properties</h4> 
<p>在小程序 properties 和 data 的数据用法相同 都是可以读写的 但是</p> 
<ul><li> <p>data更倾向于私有数据</p> </li><li> <p>properties 更倾向于存储对外接收到的数据</p> </li><li> <p>本质上没有区别</p> </li></ul> 
<h4><a id="_172"></a>组件方法</h4> 
<p>组件方法与页面方法不同在于组件方法都需要定义在methods中</p> 
<h4><a id="_176"></a>组件数据监听器</h4> 
<p>数据的监听 用于监听和响应任何的属性和数据字段的变化 ，从而执行特定的操作</p> 
<p>eg：sum = a + b ； sum随着a和b的变化而发生改变</p> 
<p>组件的wxml文件</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  {<!-- -->{a}} + {<!-- -->{b}}  = {<!-- -->{sum}}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addA<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>A++<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>default<span class="token punctuation">"</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mini<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>addB<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>B++<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>组件的js文件</p> 
<pre><code class="prism language-js">	<span class="token comment">/**
   * 组件的初始数据
   */</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token literal-property property">sum</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">a</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">/**
   * 组件的方法列表
   */</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
    <span class="token function">addA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">a</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>a <span class="token operator">+</span><span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">addB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">b</span> <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>b <span class="token operator">+</span><span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 监听器</span>
    <span class="token literal-property property">observers</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">'a,b'</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
          <span class="token literal-property property">sum</span> <span class="token operator">:</span> a <span class="token operator">+</span> b
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> 
<p>监听器使用observers定义，与methods同级，写需要监听的数据<code>'a,b'</code>，函数中写需要执行的操作；如果需要监听对象的属性，写<code>对象名.属性名</code></p> 
<h4><a id="_231"></a>纯数据字段</h4> 
<p>不需要渲染到页面的data字段；纯数据字段 有助于提升页面的更新性能</p> 
<p>实现步骤：</p> 
<ol><li> <p>定义纯数据字段规则</p> <p>options与data同级</p> <pre><code class="prism language-js"><span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
  <span class="token comment">// 定义纯数据字段规则</span>
  <span class="token literal-property property">pureDataPattern</span> <span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^_</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>   <span class="token comment">// 指定所有以_开头的为纯数据字段</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <p>如果初始化数据以下划线开头，就是纯数据字段</p> </li><li> <p>定义初始化数据</p> <pre><code class="prism language-js"><span class="token comment">// js</span>
<span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">_n</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">m</span> <span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>组件引用</p> <p>组件的wxml文件</p> <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rich-text</span> <span class="token attr-name">nodes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;h1&gt;{<!-- -->{_n}}&lt;/h1&gt;<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rich-text</span> <span class="token attr-name">nodes</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>&lt;h1&gt;{<!-- -->{m}}&lt;/h1&gt;<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <p>页面上会显示false，不会显示纯数据字段true</p> </li></ol> 
<h4><a id="_273"></a>组件的生命周期函数</h4> 
<p>组件的生命周期</p> 
<table><thead><tr><th align="left">生命周期</th><th align="left">参数</th><th align="left">描述</th><th align="center">最低版本</th></tr></thead><tbody><tr><td align="left">created</td><td align="left">无</td><td align="left">在组件实例刚刚被创建时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">1.6.3</a></td></tr><tr><td align="left">attached</td><td align="left">无</td><td align="left">在组件实例进入页面节点树时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">1.6.3</a></td></tr><tr><td align="left">ready</td><td align="left">无</td><td align="left">在组件在视图层布局完成后执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">1.6.3</a></td></tr><tr><td align="left">moved</td><td align="left">无</td><td align="left">在组件实例被移动到节点树另一个位置时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">1.6.3</a></td></tr><tr><td align="left">detached</td><td align="left">无</td><td align="left">在组件实例被从页面节点树移除时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">1.6.3</a></td></tr><tr><td align="left">error</td><td align="left"><code>Object Error</code></td><td align="left">每当组件方法抛出错误时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">2.4.1</a></td></tr></tbody></table> 
<p>组件所在页面的生命周期函数</p> 
<table><thead><tr><th align="left">生命周期</th><th align="left">参数</th><th align="left">描述</th><th align="center">最低版本</th></tr></thead><tbody><tr><td align="left">show</td><td align="left">无</td><td align="left">组件所在的页面被展示时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">2.2.3</a></td></tr><tr><td align="left">hide</td><td align="left">无</td><td align="left">组件所在的页面被隐藏时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">2.2.3</a></td></tr><tr><td align="left">resize</td><td align="left"><code>Object Size</code></td><td align="left">组件所在的页面尺寸变化时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">2.4.0</a></td></tr><tr><td align="left">routeDone</td><td align="left">无</td><td align="left">组件所在页面路由动画完成时执行</td><td align="center"><a href="http://127.0.0.1:59199/ideplugin/compatibility.html" rel="nofollow">2.31.2</a></td></tr></tbody></table> 
<p>注意：自定义 tabBar 的 pageLifetime 不会触发。</p> 
<p>eg：组件的js文件</p> 
<pre><code class="prism language-js">  <span class="token literal-property property">lifetimes</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">attached</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"在组件实例进入页面节点树时执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">detached</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"在组件实例被从页面节点树移除时执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pageLifetimes</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
    <span class="token function-variable function">show</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 页面被展示</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"页面被展示"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function-variable function">hide</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 页面被隐藏</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"页面被隐藏"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">resize</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">size</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
          <span class="token comment">// 页面尺寸变化</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"页面尺寸变化"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> 
<h4><a id="_326"></a>组件插槽</h4> 
<p>与Vue中的插槽相似</p> 
<h4><a id="_330"></a>单插槽</h4> 
<p>实现步骤：</p> 
<p>在组建的wxml文件中定义插槽</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>调用组件的页面中</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-com</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>这是插槽的内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-tag-name</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-com</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<h4><a id="_352"></a>多插槽</h4> 
<p>实现步骤：</p> 
<ol><li> <p>在组件的配置文件中开启多插槽支持</p> <p>组件的js文件</p> <pre><code class="prism language-js"><span class="token literal-property property">options</span><span class="token operator">:</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">multipleSlots</span><span class="token operator">:</span> <span class="token boolean">true</span>  <span class="token comment">// 在组件定义时的选项中启用多slot支持</span>
<span class="token punctuation">}</span>
</code></pre> </li><li> <p>定义插槽</p> <p>组件的wxml文件，需要给<code>&lt;slot&gt;&lt;/slot&gt;</code>标签name属性</p> <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>before<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>------分割线---------<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>after<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li><li> <p>调用页面</p> <p>使用时需要使用<code>slot=""</code>说明是那个插槽</p> <pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-test2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>after<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>after<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>before<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>before<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-test2</span><span class="token punctuation">&gt;</span></span>
</code></pre> </li></ol> 
<h3><a id="_391"></a>弹窗</h3> 
<h4><a id="_393"></a>页面提示</h4> 
<p>icon的合法值：</p> 
<table><thead><tr><th align="left">合法值</th><th align="left">说明</th></tr></thead><tbody><tr><td align="left">success</td><td align="left">显示成功图标，此时 title 文本最多显示 7 个汉字长度</td></tr><tr><td align="left">error</td><td align="left">显示失败图标，此时 title 文本最多显示 7 个汉字长度</td></tr><tr><td align="left">loading</td><td align="left">显示加载图标，此时 title 文本最多显示 7 个汉字长度</td></tr><tr><td align="left">none</td><td align="left">不显示图标，此时 title 文本最多可显示两行，<a href="http://127.0.0.1:59199/framework/compatibility.html" rel="nofollow">1.9.0</a>及以上版本支持</td></tr></tbody></table> 
<pre><code class="prism language-js">wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">"success"</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mask</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>       <span class="token comment">// 不允许点击页面</span>
  <span class="token literal-property property">duration</span> <span class="token operator">:</span> <span class="token number">5000</span>   <span class="token comment">// 持续时间</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_417"></a>模态对话框</h4> 
<p>带有取消和确定按钮的弹窗</p> 
<pre><code class="prism language-js">wx<span class="token punctuation">.</span><span class="token function">showModal</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'提示'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">'确认要取消么'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">complete</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>cancel<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 取消执行</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>confirm<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
      <span class="token comment">// 确认执行</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h4><a id="_438"></a>加载提示</h4> 
<table><thead><tr><th align="left">属性</th><th align="left">类型</th><th align="left">默认值</th><th align="left">必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="left">title</td><td align="left">string</td><td align="left"></td><td align="left">是</td><td align="center">提示的内容</td></tr><tr><td align="left">mask</td><td align="left">boolean</td><td align="left">false</td><td align="left">否</td><td align="center">是否显示透明蒙层，防止触摸穿透</td></tr><tr><td align="left">success</td><td align="left">function</td><td align="left"></td><td align="left">否</td><td align="center">接口调用成功的回调函数</td></tr><tr><td align="left">fail</td><td align="left">function</td><td align="left"></td><td align="left">否</td><td align="center">接口调用失败的回调函数</td></tr><tr><td align="left">complete</td><td align="left">function</td><td align="left"></td><td align="left">否</td><td align="center">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> 
<p>eg：</p> 
<pre><code class="prism language-js">wx<span class="token punctuation">.</span><span class="token function">showLoading</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'加载中'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  wx<span class="token punctuation">.</span><span class="token function">hideLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre> 
<p><mark>注意：需要手动关闭</mark></p> 
<h4><a id="_461"></a>选项对话框</h4> 
<table><thead><tr><th align="center">属性</th><th align="center">类型</th><th align="center">默认值</th><th align="center">必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">alertText</td><td align="center">string</td><td align="center"></td><td align="center">否</td><td align="center">警示文案</td></tr><tr><td align="center">itemList</td><td align="center">Array.<code>&lt;string&gt;</code></td><td align="center"></td><td align="center">是</td><td align="center">按钮的文字数组，数组长度最大为 6</td></tr><tr><td align="center">itemColor</td><td align="center">string</td><td align="center">#000000</td><td align="center">否</td><td align="center">按钮的文字颜色</td></tr><tr><td align="center">success</td><td align="center">function</td><td align="center"></td><td align="center">否</td><td align="center">接口调用成功的回调函数</td></tr><tr><td align="center">fail</td><td align="center">function</td><td align="center"></td><td align="center">否</td><td align="center">接口调用失败的回调函数</td></tr><tr><td align="center">complete</td><td align="center">function</td><td align="center"></td><td align="center">否</td><td align="center">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> 
<pre><code class="prism language-js">wx<span class="token punctuation">.</span><span class="token function">showActionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">itemList</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">success</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 输出选择的下标</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>tapIndex<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">fail</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="_487"></a>滚动条</h3> 
<p>onPageScroll：页面滚动触发事件的处理函数</p> 
<table><thead><tr><th align="center">属性</th><th align="center">类型</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">scrollTop</td><td align="center">Number</td><td align="center">页面在垂直方向已滚动的距离（单位px）</td></tr></tbody></table> 
<p>wx.pageScrollTo：将页面滚动到目标位置，支持选择器和滚动距离两种方式定位</p> 
<table><thead><tr><th align="center">属性</th><th align="center">类型</th><th align="center">默认值</th><th align="center">必填</th><th align="center">说明</th></tr></thead><tbody><tr><td align="center">scrollTop</td><td align="center">number</td><td align="center"></td><td align="center">否</td><td align="center">滚动到页面的目标位置，单位 px</td></tr><tr><td align="center">duration</td><td align="center">number</td><td align="center">300</td><td align="center">否</td><td align="center">滚动动画的时长，单位 ms</td></tr><tr><td align="center">selector</td><td align="center">string</td><td align="center"></td><td align="center">否</td><td align="center">选择器</td></tr><tr><td align="center">offsetTop</td><td align="center">number</td><td align="center"></td><td align="center">否</td><td align="center">偏移距离，需要和 selector 参数搭配使用，可以滚动到 selector 加偏移距离的位置，单位 px</td></tr><tr><td align="center">success</td><td align="center">function</td><td align="center"></td><td align="center">否</td><td align="center">接口调用成功的回调函数</td></tr><tr><td align="center">fail</td><td align="center">function</td><td align="center"></td><td align="center">否</td><td align="center">接口调用失败的回调函数</td></tr><tr><td align="center">complete</td><td align="center">function</td><td align="center"></td><td align="center">否</td><td align="center">接口调用结束的回调函数（调用成功、失败都会执行）</td></tr></tbody></table> 
<p>案例：回到顶部按钮的实现</p> 
<p>js文件：定义方法</p> 
<pre><code class="prism language-js"><span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
  <span class="token literal-property property">no_scroll</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">goTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>wx<span class="token punctuation">.</span>pageScrollTo<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    wx<span class="token punctuation">.</span><span class="token function">pageScrollTo</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
      <span class="token literal-property property">scrollTop</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onPageScroll</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>scrollTop <span class="token operator">&gt;</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">no_scroll</span><span class="token operator">:</span><span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{<!-- --></span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span>
        <span class="token literal-property property">no_scroll</span><span class="token operator">:</span><span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> 
<p>wxml文件：</p> 
<pre><code class="prism language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>{<!-- -->{no_scroll}}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">bind:</span>tap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goTop<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fix_bo<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
  ↑
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> 
<p>wxss文件：</p> 
<pre><code class="prism language-css"><span class="token selector">.fix_bo</span><span class="token punctuation">{<!-- --></span>
  <span class="token property">width</span><span class="token punctuation">:</span> 77rpx<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 77rpx<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> .4<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> sticky<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 80rpx<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 87%<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
  <span class="token property">font-size</span><span class="token punctuation">:</span> larger<span class="token punctuation">;</span>
  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">line-height</span><span class="token punctuation">:</span> 77rpx<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/683c34b100341bb9f16a4ca426abc3c4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Zookeeper 和 naocs的区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/aa85d3fe2aa411b8bb0bdcb7bdfc6c2b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C/C&#43;&#43;集成开发环境搭建</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>