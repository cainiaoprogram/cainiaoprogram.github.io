<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>利用Ajax与后台传输数据的三种方式 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="利用Ajax与后台传输数据的三种方式" />
<meta property="og:description" content="1.把数据放到url中传递
js：
&lt;code&gt;
var id = $(&#34;#id&#34;).val();
$.ajax({
type: &#34;POST&#34;,
url: &#34;/IFTree/people/getPeopleById/&#34;&#43;id,//参数放在url中
success:function(data){ alert(data);
},
error:function(xhr, textStatus, errorThrown) {
}
});
&lt;/code&gt;
后台：
&lt;pre&gt;&lt;code&gt;
@RequestMapping(value = &#34;getPeopleById/{id}&#34;) @ResponseBody public Map&lt;String, Object&gt; getPeopleById(@PathVariable(&#34;id&#34;) int id) { //@PathVariable(&#34;id&#34;) 如果参数名与url定义的一样注解可以不用定义(&#34;id&#34;) System.out.println(id); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); return map; } } &lt;/code&gt;&lt;/pre&gt;
2.把数据放到data中
js：
&lt;code&gt;
var id = $(&#34;#id&#34;).val();
$.ajax({
type: &#34;POST&#34;,
url: &#34;/IFTree/people/getPeopleById&#34;,
data: {id:id},
success:function(data){ alert(data.result);
},
error:function(xhr, textStatus, errorThrown) {" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7094971e152a58289d5280102b8ceb02/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-08-22T11:57:57+08:00" />
<meta property="article:modified_time" content="2019-08-22T11:57:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">利用Ajax与后台传输数据的三种方式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>1.把数据放到url中传递</p> 
<p>js：</p> 
<p>&lt;code&gt;<br> var id = $("#id").val();<br> $.ajax({<!-- --><br> type: "POST",<br> url: "/IFTree/people/getPeopleById/"+id,//参数放在url中<br> success:function(data){ alert(data);<br> },<br> error:function(xhr, textStatus, errorThrown) {<!-- --><br> }<br> });<br> &lt;/code&gt;</p> 
<p>后台：</p> 
<p>&lt;pre&gt;&lt;code&gt;</p> 
<pre class="has"><code>@RequestMapping(value = "getPeopleById/{id}")
@ResponseBody
    public Map&lt;String, Object&gt; getPeopleById(@PathVariable("id") int id) {
        //@PathVariable("id") 如果参数名与url定义的一样注解可以不用定义("id")
        System.out.println(id);
        Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
        return map;
    }
}
</code></pre> 
<p>&lt;/code&gt;&lt;/pre&gt;</p> 
<p>2.把数据放到data中</p> 
<p>js：</p> 
<p>&lt;code&gt;<br> var id = $("#id").val();<br> $.ajax({<!-- --><br> type: "POST",<br> url: "/IFTree/people/getPeopleById",<br> data: {id:id},<br> success:function(data){ alert(data.result);<br> },<br> error:function(xhr, textStatus, errorThrown) {<!-- --><br> }<br> });<br> &lt;/code&gt;</p> 
<p>后台（两个方式）：</p> 
<p>&lt;pre&gt;&lt;code&gt;</p> 
<pre class="has"><code>@RequestMapping(value = "getPeopleById")
@ResponseBody
public Map&lt;String, Object&gt; getPeopleById(HttpServletRequest request,HttpServletResponse response) {
    int id = Integer.valueOf(request.getParameter("id"));
    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
    return map;
}
</code></pre> 
<p>&lt;/code&gt;&lt;/pre&gt;</p> 
<hr> 
<pre class="has"><code>@RequestMapping(value = "getPeopleById")
@ResponseBody
public Map&lt;String, Object&gt; getPeopleById(HttpServletRequest request,HttpServletResponse response) {
    int id = Integer.valueOf(request.getParameter("id"));
    // 这里得到的都是字符串得转换成你需要的类型
    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
    return map;
}
</code></pre> 
<p>&lt;/code&gt;</p> 
<p>3.以json传输（就是开头说的情况）</p> 
<p>js（包含一些常见的ajax参数解释）：</p> 
<p>&lt;code&gt;<br> var id = $("#id").val();<br> $.ajax({<!-- --><br> type: "POST",//请求类型<br> timeout：10000, //设置请求超时时间（毫秒）<br> async:ture,//是否为异步请求<br> cache:false,//是否从浏览器缓存中加载请求信息。<br> url: "/IFTree/people/getPeopleById",<br> contentType: "application/json;charset=UTF-8",//提交的数据类型<br> data: JSON.stringify({id:id}),//这里是把json转化为字符串形式<br> dataType: "json",//返回的数据类型<br> success:function(data){<!-- --><br> $("#name").val(data.result.name);<br> },<br> error:function(xhr, textStatus, errorThrown) {<!-- --><br> }<br> });<br> });<br> &lt;/code&gt;</p> 
<p>后台：</p> 
<p>&lt;pre&gt;&lt;code&gt;</p> 
<pre class="has"><code>@RequestMapping(value = "getPeopleById", produces = "application/json")
@ResponseBody
public Map&lt;String, Object&gt; getPeopleById(@RequestBody Map&lt;String, Object&gt; body){
    System.out.println(""+body.get("id"));
    People people = peopleService.getPeopleById(Integer.valueOf((String)body.get("id")));
    Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;();
    map.put("result", people);
    return map;
}
</code></pre> 
<p>&lt;/code&gt;&lt;/pre&gt;</p> 
<p>详解：</p> 
<p>@RequestBody<br> 该注解首先读取request请求的正文数据，然后使用默认配置的HttpMessageConverter进行解析，把数据绑定要对象上面，然后再把对象绑定到controllor中的参数上。<br> @ResponseBody<br> 该注解也是一样的用于将Controller的方法返回的对象，通过的HttpMessageConverter转换为指定格式后，写入到Response对象的body数据区。</p> 
<p>Srping mvc .xml(配置转换器)</p> 
<p>&lt;code&gt;</p> 
<pre class="has"><code> &lt;!-- spring MVC提供的适配器 spring默认加载 (如果不修改默认加载的4类转换器，该bean可不配置)--&gt;
 &lt;bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"&gt;
    &lt;property name="messageConverters"&gt;
        &lt;!-- 该适配器默认加载以下4类转换器--&gt;
        &lt;list&gt;
            &lt;bean class="org.springframework.http.converter.BufferedImageHttpMessageConverter" /&gt;
            &lt;bean class="org.springframework.http.converter.ByteArrayHttpMessageConverter" /&gt;
            &lt;bean class="org.springframework.http.converter.xml.SourceHttpMessageConverter" /&gt;
            &lt;bean class="org.springframework.http.converter.xml.XmlAwareFormHttpMessageConverter" /&gt;
            &lt;bean class="org.springframework.http.converter.StringHttpMessageConverter" /&gt;
            &lt;bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"&gt;
                &lt;property name="supportedMediaTypes"&gt;
                    &lt;list&gt;
                        &lt;value&gt;application/json;charset=UTF-8&lt;/value&gt;
                    &lt;/list&gt;
                &lt;/property&gt;
            &lt;/bean&gt;&lt;!--这里配置了json转换器支持的媒体类型--&gt;
        &lt;/list&gt;
    &lt;/property&gt;
&lt;/bean&gt; 
</code></pre> 
<p>&lt;/code&gt;<br><strong>ByteArrayHttpMessageConverter</strong>: 负责读取二进制格式的数据和写出二进制格式的数据；<br><strong>StringHttpMessageConverter</strong>： 负责读取字符串格式的数据和写出二进制格式的数据；<br><strong>ResourceHttpMessageConverter</strong>：负责读取资源文件和写出资源文件数据；<br><strong>FormHttpMessageConverter</strong>： 负责读取form提交的数据<br><strong>MappingJacksonHttpMessageConverter</strong>: 负责读取和写入json格式的数据；<br><strong>SouceHttpMessageConverter</strong>： 负责读取和写入 xml 中javax.xml.transform.Source定义的数据；<br><strong>Jaxb2RootElementHttpMessageConverter</strong>: 负责读取和写入xml 标签格式的数据；<br><strong>AtomFeedHttpMessageConverter</strong>: 负责读取和写入Atom格式的数据；<br><strong>RssChannelHttpMessageConverter</strong>: 负责读取和写入RSS格式的数据；</p> 
<p>项目里面我用到的只有json转换器，所以要导入关于json的包（maven）:<br> &lt;code&gt;<br> &lt;dependency&gt;<br> &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;<br> &lt;artifactId&gt;jackson-core-asl&lt;/artifactId&gt;<br> &lt;version&gt;1.9.11&lt;/version&gt;<br> &lt;/dependency&gt;<br> &lt;dependency&gt;<br> &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;<br> &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;<br> &lt;version&gt;1.9.11&lt;/version&gt;<br> &lt;/dependency&gt;<br> &lt;/code&gt;</p> 
<p>以上内容仅用于借鉴！！！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b42fe0d4a1874b5a77ee2f7219cb24d4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【C&#43;&#43; 语言】异常  ( 抛出字符串异常 | 抛出异常对象 | 抛出任意对象 | 抛出自定义异常 )</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5ea1887cdbed3370d1653e3115f6db59/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java与c语言的内存对比</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>