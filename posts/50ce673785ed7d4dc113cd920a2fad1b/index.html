<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot集成flowable modeler 6.5.0整合实现在线编辑免登录 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot集成flowable modeler 6.5.0整合实现在线编辑免登录" />
<meta property="og:description" content="这里写自定义目录标题 把官方flowable-ui-modeler-app\src\main\resources\static下面的代码拷贝至我们自己的工程Pom引入新增2个配置类 集成flowable rest apiACT_DE的包无法生成,使用如下的配置类破解登录配置文件如下：大功告成,效果图如下 因公司需求需要用到工作流，选型flowable，本篇博客记录下整合
把官方flowable-ui-modeler-app\src\main\resources\static下面的代码拷贝至我们自己的工程 Pom引入 &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
4.0.0
&lt;groupId&gt;com.promote&lt;/groupId&gt; &lt;artifactId&gt;flowable&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.6.RELEASE&lt;/version&gt; &lt;/parent&gt; &lt;properties&gt; &lt;flowable.version&gt;6.4.2&lt;/flowable.version&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!--&lt;dependency&gt; &lt;groupId&gt;org.flowable&lt;/groupId&gt; &lt;artifactId&gt;flowable-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;6.4.2&lt;/version&gt; &lt;/dependency&gt;--&gt; &lt;!--flowable支持 包含flowable-spring-boot-starter--&gt; &lt;dependency&gt; &lt;groupId&gt;org.flowable&lt;/groupId&gt; &lt;artifactId&gt;flowable-spring-boot-starter-process&lt;/artifactId&gt; &lt;version&gt;6.4.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.flowable&lt;/groupId&gt; &lt;artifactId&gt;flowable-rest&lt;/artifactId&gt; &lt;version&gt;6.4.2&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.flowable&lt;/groupId&gt; &lt;artifactId&gt;flowable-ui-modeler-rest&lt;/artifactId&gt; &lt;version&gt;${flowable.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.flowable&lt;/groupId&gt; &lt;artifactId&gt;flowable-ui-modeler-conf&lt;/artifactId&gt; &lt;version&gt;${flowable.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.flowable&lt;/groupId&gt; &lt;artifactId&gt;flowable-ui-modeler-logic&lt;/artifactId&gt; &lt;version&gt;${flowable.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.flowable&lt;/groupId&gt; &lt;artifactId&gt;flowable-ui-common&lt;/artifactId&gt; &lt;version&gt;${flowable.version}&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/50ce673785ed7d4dc113cd920a2fad1b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-16T17:56:45+08:00" />
<meta property="article:modified_time" content="2020-12-16T17:56:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot集成flowable modeler 6.5.0整合实现在线编辑免登录</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4>这里写自定义目录标题</h4> 
<ul><li> 
  <ul><li><a href="https://blog.csdn.net/xue_hairui/article/details/103536468#flowableuimodelerappsrcmainresourcesstatic_3">把官方flowable-ui-modeler-app\src\main\resources\static下面的代码拷贝至我们自己的工程</a></li><li><a href="https://blog.csdn.net/xue_hairui/article/details/103536468#Pom_7">Pom引入</a></li><li><a href="https://blog.csdn.net/xue_hairui/article/details/103536468#2_flowable_rest_api_186">新增2个配置类 集成flowable rest api</a></li><li><a href="https://blog.csdn.net/xue_hairui/article/details/103536468#ACT_DE_267">ACT_DE的包无法生成,使用如下的配置类</a></li><li><a href="https://blog.csdn.net/xue_hairui/article/details/103536468#_311">破解登录</a></li><li><a href="https://blog.csdn.net/xue_hairui/article/details/103536468#_444">配置文件如下：</a></li><li><a href="https://blog.csdn.net/xue_hairui/article/details/103536468#_447">大功告成,效果图如下</a></li></ul></li></ul> 
<p><br> 因公司需求需要用到工作流，选型flowable，本篇博客记录下整合</p> 
<p> </p> 
<h3><a name="t1"></a><a id="flowableuimodelerappsrcmainresourcesstatic_3"></a>把官方flowable-ui-modeler-app\src\main\resources\static下面的代码拷贝至我们自己的工程</h3> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/43/de/QBWmWJ9P_o.png"></p> 
<h3><a name="t2"></a><a id="Pom_7"></a>Pom引入</h3> 
<p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;</p> 
<p><br> 4.0.0</p> 
<pre><code>&lt;groupId&gt;com.promote&lt;/groupId&gt;
&lt;artifactId&gt;flowable&lt;/artifactId&gt;
&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;

&lt;parent&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
    &lt;version&gt;2.1.6.RELEASE&lt;/version&gt;
&lt;/parent&gt;

&lt;properties&gt;
    &lt;flowable.version&gt;6.4.2&lt;/flowable.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!--&lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;6.4.2&lt;/version&gt;
    &lt;/dependency&gt;--&gt;
    &lt;!--flowable支持  包含flowable-spring-boot-starter--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-spring-boot-starter-process&lt;/artifactId&gt;
        &lt;version&gt;6.4.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-rest&lt;/artifactId&gt;
        &lt;version&gt;6.4.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-modeler-rest&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-modeler-conf&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-modeler-logic&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;


    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-common&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-modeler-rest&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-idm-spring-configurator&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-idm-rest&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-idm-conf&lt;/artifactId&gt;
        &lt;version&gt;${flowable.version}&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.liquibase&lt;/groupId&gt;
        &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;
        &lt;version&gt;3.6.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!--&lt;dependency&gt;
        &lt;groupId&gt;org.flowable&lt;/groupId&gt;
        &lt;artifactId&gt;flowable-ui-modeler-logic&lt;/artifactId&gt;
        &lt;version&gt;6.4.2&lt;/version&gt;
    &lt;/dependency&gt;--&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;
        &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;
        &lt;version&gt;2.5.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!--阿里druid支持--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
        &lt;artifactId&gt;druid-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;1.1.21&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;2.1.1&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!--Mybatis-plus支持--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.baomidou&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;3.2.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;
        &lt;artifactId&gt;pagehelper&lt;/artifactId&gt;
        &lt;version&gt;5.1.10&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.github.jsqlparser&lt;/groupId&gt;
        &lt;artifactId&gt;jsqlparser&lt;/artifactId&gt;
        &lt;version&gt;2.1&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!--lombok支持--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
        &lt;artifactId&gt;lombok&lt;/artifactId&gt;
        &lt;version&gt;1.18.10&lt;/version&gt;
        &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;!--swagger-ui--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.springfox&lt;/groupId&gt;
        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;
        &lt;version&gt;2.9.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;io.springfox&lt;/groupId&gt;
        &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;
        &lt;version&gt;2.9.2&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;cn.hutool&lt;/groupId&gt;
        &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;
        &lt;version&gt;4.6.8&lt;/version&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li><li>38</li><li>39</li><li>40</li><li>41</li><li>42</li><li>43</li><li>44</li><li>45</li><li>46</li><li>47</li><li>48</li><li>49</li><li>50</li><li>51</li><li>52</li><li>53</li><li>54</li><li>55</li><li>56</li><li>57</li><li>58</li><li>59</li><li>60</li><li>61</li><li>62</li><li>63</li><li>64</li><li>65</li><li>66</li><li>67</li><li>68</li><li>69</li><li>70</li><li>71</li><li>72</li><li>73</li><li>74</li><li>75</li><li>76</li><li>77</li><li>78</li><li>79</li><li>80</li><li>81</li><li>82</li><li>83</li><li>84</li><li>85</li><li>86</li><li>87</li><li>88</li><li>89</li><li>90</li><li>91</li><li>92</li><li>93</li><li>94</li><li>95</li><li>96</li><li>97</li><li>98</li><li>99</li><li>100</li><li>101</li><li>102</li><li>103</li><li>104</li><li>105</li><li>106</li><li>107</li><li>108</li><li>109</li><li>110</li><li>111</li><li>112</li><li>113</li><li>114</li><li>115</li><li>116</li><li>117</li><li>118</li><li>119</li><li>120</li><li>121</li><li>122</li><li>123</li><li>124</li><li>125</li><li>126</li><li>127</li><li>128</li><li>129</li><li>130</li><li>131</li><li>132</li><li>133</li><li>134</li><li>135</li><li>136</li><li>137</li><li>138</li><li>139</li><li>140</li><li>141</li><li>142</li><li>143</li><li>144</li><li>145</li><li>146</li><li>147</li><li>148</li><li>149</li><li>150</li><li>151</li><li>152</li><li>153</li><li>154</li><li>155</li><li>156</li><li>157</li><li>158</li><li>159</li><li>160</li><li>161</li><li>162</li><li>163</li><li>164</li><li>165</li><li>166</li><li>167</li><li>168</li><li>169</li></ul> 
<h3><a name="t3"></a><a id="2_flowable_rest_api_186"></a>新增2个配置类 集成flowable rest api</h3> 
<p>@Configuration<br> @ComponentScan(value = {“org.flowable.ui.modeler.rest.app”},<br> excludeFilters = {<!-- --><br> @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = EditorUsersResource.class),<br> @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = EditorGroupsResource.class),<br> })<br> @EnableAsync<br> public class AppDispatcherServletConfiguration implements WebMvcRegistrations {<!-- --></p> 
<pre><code>private static final Logger LOGGER = LoggerFactory.getLogger(AppDispatcherServletConfiguration.class);

@Bean
public SessionLocaleResolver localeResolver() {
    return new SessionLocaleResolver();
}

@Bean
public LocaleChangeInterceptor localeChangeInterceptor() {
    LOGGER.debug("Configuring localeChangeInterceptor");
    LocaleChangeInterceptor localeChangeInterceptor = new LocaleChangeInterceptor();
    localeChangeInterceptor.setParamName("language");
    return localeChangeInterceptor;
}

@Override
public RequestMappingHandlerMapping getRequestMappingHandlerMapping() {
    LOGGER.debug("Creating requestMappingHandlerMapping");
    RequestMappingHandlerMapping requestMappingHandlerMapping = new RequestMappingHandlerMapping();
    requestMappingHandlerMapping.setUseSuffixPatternMatch(false);
    requestMappingHandlerMapping.setRemoveSemicolonContent(false);
    Object[] interceptors = { localeChangeInterceptor() };
    requestMappingHandlerMapping.setInterceptors(interceptors);
    return requestMappingHandlerMapping;
}
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li></ul> 
<p>}</p> 
<p>@Configuration<br> @EnableConfigurationProperties(FlowableModelerAppProperties.class)<br> @ComponentScan(basePackages = {<!-- --><br> “org.flowable.ui.modeler.repository”,<br> “org.flowable.ui.modeler.service”,<br> “org.flowable.ui.common.service”,<br> “org.flowable.ui.common.repository”,<br> “org.flowable.ui.common.tenant”},<br> excludeFilters = {<!-- --><br> @ComponentScan.Filter(type = FilterType.ASSIGNABLE_TYPE, value = RemoteIdmService.class)<br> })<br> public class ApplicationConfiguration {<!-- --></p> 
<pre><code>@Bean
public ServletRegistrationBean apiServlet(ApplicationContext applicationContext) {
    AnnotationConfigWebApplicationContext dispatcherServletConfiguration = new AnnotationConfigWebApplicationContext();
    dispatcherServletConfiguration.setParent(applicationContext);
    dispatcherServletConfiguration.register(ApiDispatcherServletConfiguration.class);
    DispatcherServlet servlet = new DispatcherServlet(dispatcherServletConfiguration);
    ServletRegistrationBean registrationBean = new ServletRegistrationBean(servlet, "/api/*");
    registrationBean.setName("Flowable IDM App API Servlet");
    registrationBean.setLoadOnStartup(1);
    registrationBean.setAsyncSupported(true);
    return registrationBean;
}
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li></ul> 
<p>}</p> 
<p>启动类中:<br> @Import({<!-- --><br> ApplicationConfiguration.class,<br> AppDispatcherServletConfiguration.class<br> })<br> @EnableSwagger2<br> @SpringBootApplication(exclude = SecurityAutoConfiguration.class)<br> public class FlowableApplication {<!-- --></p> 
<pre><code>public static void main(String[] args) {
    SpringApplication.run(FlowableApplication.class, args);
}
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li></ul> 
<p>}</p> 
<h3><a name="t4"></a><a id="ACT_DE_267"></a>ACT_DE的包无法生成,使用如下的配置类</h3> 
<p>@Configuration<br> public class DatabaseConfiguration {<!-- --></p> 
<pre><code>private static final Logger LOGGER = LoggerFactory.getLogger(DatabaseConfiguration.class);

protected static final String LIQUIBASE_CHANGELOG_PREFIX = "ACT_DE_";

@Bean
public Liquibase liquibase(DataSource dataSource) {
    LOGGER.info("Configuring Liquibase");

    Liquibase liquibase = null;
    try {
        DatabaseConnection connection = new JdbcConnection(dataSource.getConnection());
        Database database = DatabaseFactory.getInstance().findCorrectDatabaseImplementation(connection);
        database.setDatabaseChangeLogTableName(LIQUIBASE_CHANGELOG_PREFIX + database.getDatabaseChangeLogTableName());
        database.setDatabaseChangeLogLockTableName(LIQUIBASE_CHANGELOG_PREFIX + database.getDatabaseChangeLogLockTableName());

        liquibase = new Liquibase("META-INF/liquibase/flowable-modeler-app-db-changelog.xml", new ClassLoaderResourceAccessor(), database);
        liquibase.update("flowable");
        return liquibase;
    } catch (Exception e) {
        throw new InternalServerErrorException("Error creating liquibase database", e);
    } finally {
        closeDatabase(liquibase);
    }
}

private void closeDatabase(Liquibase liquibase) {
    if (liquibase != null) {
        Database database = liquibase.getDatabase();
        if (database != null) {
            try {
                database.close();
            } catch (DatabaseException e) {
                LOGGER.warn("Error closing database", e);
            }
        }
    }
}
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li><li>30</li><li>31</li><li>32</li><li>33</li><li>34</li><li>35</li><li>36</li><li>37</li></ul> 
<p>}</p> 
<h3><a name="t5"></a><a id="_311"></a>破解登录</h3> 
<p>自定义查询账号信息<br> @RestController<br> @RequestMapping("/custome")<br> public class CustomeAccountResource {<!-- --></p> 
<pre><code>/**
 * GET /rest/account -&gt; get the current user.
 */
@RequestMapping(value = "/rest/account", method = RequestMethod.GET, produces = "application/json")
public UserRepresentation getAccount() {
    UserRepresentation userRepresentation = new UserRepresentation();
    userRepresentation.setFirstName("admin");
    userRepresentation.setLastName("admin");
    userRepresentation.setFullName("admin");
    userRepresentation.setId("admin");
    List&lt;String&gt; pris = new ArrayList&lt;&gt;();
    pris.add(DefaultPrivileges.ACCESS_MODELER);
    pris.add(DefaultPrivileges.ACCESS_IDM);
    pris.add(DefaultPrivileges.ACCESS_ADMIN);
    pris.add(DefaultPrivileges.ACCESS_TASK);
    pris.add(DefaultPrivileges.ACCESS_REST_API);
    userRepresentation.setPrivileges(pris);

    if (userRepresentation != null) {
        return userRepresentation;
    } else {
        throw new NotFoundException();
    }
}
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li></ul> 
<p>}</p> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/bd/73/Rp2Rpy49_o.png"><br> 自定义安全工具类SecurityUtils 包名和官方包保持一致<br> package org.flowable.ui.common.security;</p> 
<p>import org.flowable.idm.api.User;<br> import org.flowable.ui.common.model.RemoteUser;<br> import org.springframework.security.core.GrantedAuthority;<br> import org.springframework.security.core.context.SecurityContext;<br> import org.springframework.security.core.context.SecurityContextHolder;</p> 
<p>import java.util.ArrayList;<br> import java.util.List;</p> 
<p>/**</p> 
<ul><li>自定义安全工具类</li><li>@author xue.hairui</li><li> </li></ul> 
<p>*/<br> public class SecurityUtils {<!-- --></p> 
<pre><code>private static User assumeUser;

private SecurityUtils() {
}

/**
 * Get the login of the current user.
 */
public static String getCurrentUserId() {
    User user = getCurrentUserObject();
    if (user != null) {
        return user.getId();
    }
    return null;
}

/**
 * @return the {@link User} object associated with the current logged in user.
 */
public static User getCurrentUserObject() {
    if (assumeUser != null) {
        return assumeUser;
    }
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li></ul> 
<p>// User user = null;<br> // FlowableAppUser appUser = getCurrentFlowableAppUser();<br> // if (appUser != null) {<!-- --><br> // user = appUser.getUserObject();<br> // }</p> 
<pre><code>    RemoteUser user = new RemoteUser();
</code></pre> 
<ul><li>1</li></ul> 
<p>// FlowableAppUser appUser = getCurrentFlowableAppUser();<br> // if (appUser != null) {<!-- --><br> // user = appUser.getUserObject();<br> // }<br> user.setId(“admin”);<br> user.setDisplayName(“admin”);<br> user.setFirstName(“admin”);<br> user.setLastName(“admin”);<br> user.setEmail(“admin@admin.com”);<br> user.setPassword(“test”);<br> List pris = new ArrayList&lt;&gt;();<br> pris.add(DefaultPrivileges.ACCESS_MODELER);<br> pris.add(DefaultPrivileges.ACCESS_IDM);<br> pris.add(DefaultPrivileges.ACCESS_ADMIN);<br> pris.add(DefaultPrivileges.ACCESS_TASK);<br> pris.add(DefaultPrivileges.ACCESS_REST_API);<br> user.setPrivileges(pris);<br> return user;<br> }</p> 
<pre><code>public static FlowableAppUser getCurrentFlowableAppUser() {
    FlowableAppUser user = null;
    SecurityContext securityContext = SecurityContextHolder.getContext();
    if (securityContext != null &amp;&amp; securityContext.getAuthentication() != null) {
        Object principal = securityContext.getAuthentication().getPrincipal();
        if (principal instanceof FlowableAppUser) {
            user = (FlowableAppUser) principal;
        }
    }
    return user;
}

public static boolean currentUserHasCapability(String capability) {
    FlowableAppUser user = getCurrentFlowableAppUser();
    for (GrantedAuthority grantedAuthority : user.getAuthorities()) {
        if (capability.equals(grantedAuthority.getAuthority())) {
            return true;
        }
    }
    return false;
}

public static void assumeUser(User user) {
    assumeUser = user;
}

public static void clearAssumeUser() {
    assumeUser = null;
}
</code></pre> 
<ul><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li><li>10</li><li>11</li><li>12</li><li>13</li><li>14</li><li>15</li><li>16</li><li>17</li><li>18</li><li>19</li><li>20</li><li>21</li><li>22</li><li>23</li><li>24</li><li>25</li><li>26</li><li>27</li><li>28</li><li>29</li></ul> 
<p>}</p> 
<h3><a name="t6"></a><a id="_444"></a>配置文件如下：</h3> 
<p><img alt="在这里插入图片描述" src="https://images2.imgbox.com/71/3d/Ial2Oy8E_o.png"></p> 
<h3><a name="t7"></a><a id="_447"></a>大功告成,效果图如下</h3> 
<p>访问:http://localhost:9016/<br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/d6/a5/d9Y92FyG_o.png"><br><img alt="在这里插入图片描述" src="https://images2.imgbox.com/b8/f0/krPOHC4c_o.png"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c6dc06c1644849a43a14556e31c396e2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">运营新人也可以做的副业平台丨闲鱼运营（下）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a94477c396bbaa8a291bfc52a6d9bafe/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">人脸识别小区门禁系统_终于明白了！小区为什么要装人脸识别门禁系统？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>