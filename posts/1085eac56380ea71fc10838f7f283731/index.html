<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Python matplotlib不显示中文的问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Python matplotlib不显示中文的问题" />
<meta property="og:description" content="在很长一段时间里用Python绘图，matplotlib都不能很好的显示中文，起初是认为我的pycharm里的设置问题，但是发现同样的问题在spyder里也同样的出现了，虽然有的地方可以用英文实在不行用拼音。。。但是在作图这里没有中文真的是太不方便了，机缘巧合下在年前终于找到问题的根源了，于是乎爱刨根问底儿的我把整个过程的解决方法分享给大家~~
一共有两种解决方案，我强烈推荐第一种，因为更为方便，绘图时不用再写别的参数，调用一次即可，第二种方法也会写出来但是更多的是作为了解，主要因为相比之下太麻烦
方法一： 示例：绘制每月的商品数量
X轴月份显示为中文增加X轴Y轴中文，图标标题 from matplotlib import pyplot as plt a = [&#34;一月份&#34;,&#34;二月份&#34;,&#34;三月份&#34;,&#34;四月份&#34;,&#34;五月份&#34;,&#34;六月份&#34;] b=[56.01,26.94,17.53,16.49,15.45,12.96] plt.figure(figsize=(20,8),dpi=80) plt.bar(range(len(a)),b) #绘制x轴 plt.xticks(range(len(a)),a) plt.xlabel(&#34;月份&#34;) plt.ylabel(&#34;数量&#34;) plt.title(&#34;每月数量&#34;) plt.show() 不出意外绘制出来的图是这样的。。。。。
绘制出来的图片，在所有应该显示为中文的地方均显示乱码
之前一直以为是系统中字符集支持的问题，其实并不是这样，根本原因是matplotlib内置的原因，直到我知道了 matplotlib.rc 这个方法，其实这个我也不太会用，那么我们看一下这个的源码写的是该如何使用（学会看源码真的很重要！！）
首先它肯定是能设置字体和颜色的，有关字体我们怎么设置呢？我们接着往下看
有关字体的设置找到了，可以接收为字典，它利用了font接收了一下字典，其实我们我们完全可以一行搞定，当然我更喜欢横着写，例如下面这样其实也是OK的~~**
matplotlib.rc(&#34;font&#34;,family=&#39;MicroSoft YaHei&#39;,weight=&#34;bold&#34;) 那么我们加入这行代码在跑一下试试
果不其然产生了一个报错，那么我们为什么把MicroSoft YaHei（这个不就是微软雅黑吗，电脑里都有啊）这个加进去会报错呢？
重点来了
其实报错只有一个原因就是他没有这个字体，虽然电脑里有这个字体但是不代表matplotlib里也有这个字体，所以解决matplotlib中的中文显示问题主要就是要找到它所内置支持的字体，那么我们首先查看一下它的内置字体，运行以下代码查看所支持的字体
# 查询当前系统所有字体 from matplotlib.font_manager import FontManager import subprocess mpl_fonts = set(f.name for f in FontManager().ttflist) print(&#39;all font list get from matplotlib.font_manager:&#39;) for f in sorted(mpl_fonts): print(&#39;\t&#39; &#43; f) 运行后他会显示出所有支持的字体，大约100多种。。。。具体的我就不一一列举了
但是你会发现这个都是英文字体啊，中文字体在哪里，其实我当时也非常困扰，但是细心的我发现了其中的奥秘，&gt;&gt;&gt;其实他是有中文的只不过是用拼音写的…&lt;&lt;&lt;
其中你会发现有如下字体：
DengXianFangSongKaiTiLiSuYouYuanAdobe Fan Heiti StdAdobe Fangsong StdAdobe Heiti StdAdobe Kaiti Std 其实这些都是中文啊啊啊啊啊啊~~~~激动的我把代码增加一行再试试，随便选了个字体" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1085eac56380ea71fc10838f7f283731/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-27T09:39:08+08:00" />
<meta property="article:modified_time" content="2023-03-27T09:39:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Python matplotlib不显示中文的问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>在很长一段时间里用Python绘图，matplotlib都不能很好的显示中文，起初是认为我的pycharm里的设置问题，但是发现同样的问题在spyder里也同样的出现了，虽然有的地方可以用英文实在不行用拼音。。。但是在作图这里没有中文真的是太不方便了，机缘巧合下在年前终于找到问题的根源了，于是乎爱刨根问底儿的我把整个过程的解决方法分享给大家~~</p> 
<p><strong>一共有两种解决方案，我强烈推荐第一种，因为更为方便，绘图时不用再写别的参数，调用一次即可，第二种方法也会写出来但是更多的是作为了解，主要因为相比之下太麻烦</strong></p> 
<h2><a id="_4"></a>方法一：</h2> 
<p>示例：绘制每月的商品数量</p> 
<ul><li>X轴月份显示为中文</li><li>增加X轴Y轴中文，图标标题</li></ul> 
<pre><code class="prism language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt

a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"一月份"</span><span class="token punctuation">,</span><span class="token string">"二月份"</span><span class="token punctuation">,</span><span class="token string">"三月份"</span><span class="token punctuation">,</span><span class="token string">"四月份"</span><span class="token punctuation">,</span><span class="token string">"五月份"</span><span class="token punctuation">,</span><span class="token string">"六月份"</span><span class="token punctuation">]</span>

b<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">56.01</span><span class="token punctuation">,</span><span class="token number">26.94</span><span class="token punctuation">,</span><span class="token number">17.53</span><span class="token punctuation">,</span><span class="token number">16.49</span><span class="token punctuation">,</span><span class="token number">15.45</span><span class="token punctuation">,</span><span class="token number">12.96</span><span class="token punctuation">]</span>

plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dpi<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span>

<span class="token comment">#绘制x轴</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"月份"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"数量"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"每月数量"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>不出意外绘制出来的图是这样的。。。。。<br> <img src="https://images2.imgbox.com/c3/6c/ZLxFadPt_o.png" alt="在这里插入图片描述"></p> 
<p>绘制出来的图片，在所有应该显示为中文的地方均显示乱码<br> 之前一直以为是系统中字符集支持的问题，其实并不是这样，根本原因是matplotlib内置的原因，直到我知道了 matplotlib.rc 这个方法，其实这个我也不太会用，<strong>那么我们看一下这个的源码写的是该如何使用（学会看源码真的很重要！！）</strong></p> 
<p>首先它肯定是能设置字体和颜色的，有关字体我们怎么设置呢？我们接着往下看<br> <img src="https://images2.imgbox.com/48/0c/6TMhjqyD_o.png" alt="在这里插入图片描述"></p> 
<p><strong>有关字体的设置找到了，可以接收为字典，它利用了</strong>font接收了一下字典，其实我们我们完全可以一行搞定，当然我更喜欢横着写，例如下面这样其实也是OK的~~**</p> 
<pre><code class="prism language-python">matplotlib<span class="token punctuation">.</span>rc<span class="token punctuation">(</span><span class="token string">"font"</span><span class="token punctuation">,</span>family<span class="token operator">=</span><span class="token string">'MicroSoft YaHei'</span><span class="token punctuation">,</span>weight<span class="token operator">=</span><span class="token string">"bold"</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/51/67/nirePa0W_o.png" alt="在这里插入图片描述"></p> 
<p>那么我们加入这行代码在跑一下试试<br> <img src="https://images2.imgbox.com/b2/b5/89w7V4Qv_o.png" alt="在这里插入图片描述"></p> 
<p>果不其然产生了一个报错，那么我们为什么把MicroSoft YaHei（这个不就是微软雅黑吗，电脑里都有啊）这个加进去会报错呢？</p> 
<p><strong>重点来了</strong></p> 
<p><strong>其实报错只有一个原因就是他没有这个字体，虽然电脑里有这个字体但是不代表matplotlib里也有这个字体，所以解决matplotlib中的中文显示问题主要就是要找到它所内置支持的字体，那么我们首先查看一下它的内置字体，运行以下代码查看所支持的字体</strong></p> 
<pre><code class="prism language-python"><span class="token comment"># 查询当前系统所有字体</span>
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>font_manager <span class="token keyword">import</span> FontManager
<span class="token keyword">import</span> subprocess

mpl_fonts <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>name <span class="token keyword">for</span> f <span class="token keyword">in</span> FontManager<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ttflist<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'all font list get from matplotlib.font_manager:'</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> f <span class="token keyword">in</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>mpl_fonts<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'\t'</span> <span class="token operator">+</span> f<span class="token punctuation">)</span>
</code></pre> 
<p>运行后他会显示出所有支持的字体，大约100多种。。。。具体的我就不一一列举了<br> <img src="https://images2.imgbox.com/54/20/ugTGPxdD_o.jpg" alt="在这里插入图片描述"></p> 
<p>但是你会发现这个都是英文字体啊，中文字体在哪里，其实我当时也非常困扰，但是细心的我发现了其中的奥秘，<strong>&gt;&gt;&gt;其实他是有中文的只不过是用拼音写的…&lt;&lt;&lt;</strong></p> 
<p><strong>其中你会发现有如下字体：</strong></p> 
<ul><li>DengXian</li><li>FangSong</li><li>KaiTi</li><li>LiSu</li><li>YouYuan</li><li>Adobe Fan Heiti Std</li><li>Adobe Fangsong Std</li><li>Adobe Heiti Std</li><li>Adobe Kaiti Std</li></ul> 
<p>其实这些都是中文啊啊啊啊啊啊~~~~激动的我把代码增加一行再试试，随便选了个字体</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> pyplot <span class="token keyword">as</span> plt
<span class="token comment">#新增加的两行</span>
<span class="token keyword">import</span> matplotlib
matplotlib<span class="token punctuation">.</span>rc<span class="token punctuation">(</span><span class="token string">"font"</span><span class="token punctuation">,</span>family<span class="token operator">=</span><span class="token string">'YouYuan'</span><span class="token punctuation">)</span>

a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"一月份"</span><span class="token punctuation">,</span><span class="token string">"二月份"</span><span class="token punctuation">,</span><span class="token string">"三月份"</span><span class="token punctuation">,</span><span class="token string">"四月份"</span><span class="token punctuation">,</span><span class="token string">"五月份"</span><span class="token punctuation">,</span><span class="token string">"六月份"</span><span class="token punctuation">]</span>

b<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">56.01</span><span class="token punctuation">,</span><span class="token number">26.94</span><span class="token punctuation">,</span><span class="token number">17.53</span><span class="token punctuation">,</span><span class="token number">16.49</span><span class="token punctuation">,</span><span class="token number">15.45</span><span class="token punctuation">,</span><span class="token number">12.96</span><span class="token punctuation">]</span>

plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>dpi<span class="token operator">=</span><span class="token number">80</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>b<span class="token punctuation">)</span>

<span class="token comment">#绘制x轴</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"月份"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"数量"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"每月数量"</span><span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/00/31/iH62xPng_o.png" alt="在这里插入图片描述"></p> 
<p>完美支持，也就是增加了两行代码就解决了中文的显示问题，归根到底还是很多没没有找到matplotlib所支持的内置字体方法，或是找到了不知道怎么用</p> 
<h2><a id="_115"></a>方法二：</h2> 
<p>找到字体的所在路径</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> font_manager
my_font <span class="token operator">=</span> font_manager<span class="token punctuation">.</span>FontProperties<span class="token punctuation">(</span>fname<span class="token operator">=</span><span class="token string">"/System/Library/Fonts/PingFang.ttc"</span><span class="token punctuation">)</span>
</code></pre> 
<p>但是他有一个弊端就是在每个图上都需要在多家个参数调用才行，否则的话就会显示不出来</p> 
<pre><code class="prism language-python">plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>a<span class="token punctuation">,</span>fontproperties<span class="token operator">=</span>my_font<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"月份"</span><span class="token punctuation">,</span>fontproperties<span class="token operator">=</span>my_font<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"数量"</span><span class="token punctuation">,</span>fontproperties<span class="token operator">=</span>my_font<span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"每月数量"</span><span class="token punctuation">,</span>fontproperties<span class="token operator">=</span>my_font<span class="token punctuation">)</span>
</code></pre> 
<h2><a id="_132"></a>结尾</h2> 
<p>因为方法二比较麻烦，用的也比较少，所以我没有把具体的步骤和情况写出来，只作为了解，相比还是比较推荐方法一的，授人以鱼不如授人以渔，方法一我写的比较细，从根源上写的为什么会报错，以及怎么选择可以使用的字体，希望能帮助到大家</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cfcf7112bfe0ad0b63be0c80749f34cb/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Wireshark对HTTPS数据的解密</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/625301f3a4eb054221a44eaabfa60682/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">设计模式之Chain of Responsibility模式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>