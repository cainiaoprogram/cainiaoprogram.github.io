<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RS485/RS232串口通信实现源码 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="RS485/RS232串口通信实现源码" />
<meta property="og:description" content="之前贴出了代码，但是本地源码已经找不到了；本篇补充了一些使用说明 一、参考代码 1.不方便下载的同学可以参考贴出来的源代码链接：RS485
2.工程链接：RS485
二、基本知识 1.RS485通信讲解：
RS485数据基本格式如下，开发代码时，根据不同厂家产品说明发送指令，并解析返回数据就可以得到对应含义的值
1.1：读50001、50002两个寄存器，假设从机地址为1
上位机（主机）发送下行报文：01 03 00 05 00 02 D4 0A
从机地址功能码寄存器起始地址读取寄存器个数CRC校验010300 0500 02D4 0A 下位机（从机）返回上行报文：01 03 04 00 00 00 00 FA 33
从机地址功能码返回字节个数寄存器30001数据寄存器30002数据CRC校验010300 0400 0000 00FA 33 1.2：向50001寄存器中写入0x36，0x24，假设从机地址为1
上位机（主机）发送下行报文：01 06 00 05 00 01 36 24 6D BC
从机地址功能码寄存器起始地址读取寄存器个数要写入的数据CRC校验010600 0500 0136 246D BC 下位机（从机）上行报文：01 06 00 04 00 01 12 34 4a b0
从机地址功能码寄存器起始地址读取寄存器个数要写入的数据CRC校验010600 0500 0136 246D BC 三、使用 1.RS232：与野火的串口调试工具测试普通串口通信
2.代码只实现了字符串作为发送数据的格式（如果需要支持十六进制格式请自行调整）；这里仅用代码调试，接收区展示了接受到的十六进制字符串格式数据
检验方法采用CRC-16/MODBUS方式，这里提供一个在线校验工具地址：CRC校验" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/250797f6b323553595a2013350c164a3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-24T01:23:39+08:00" />
<meta property="article:modified_time" content="2022-01-24T01:23:39+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">RS485/RS232串口通信实现源码</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>之前贴出了代码，但是本地源码已经找不到了；本篇补充了一些使用说明</h2> 
<h3><a id="_1"></a>一、参考代码</h3> 
<p>1.不方便下载的同学可以参考贴出来的源代码链接：<a href="https://blog.csdn.net/weixin_42176639/article/details/96164409">RS485</a></p> 
<p>2.工程链接：<a href="https://download.csdn.net/download/weixin_42176639/11368112">RS485</a></p> 
<h3><a id="_5"></a>二、基本知识</h3> 
<p>1.RS485通信讲解：</p> 
<p><mark>RS485数据基本格式如下，开发代码时，根据不同厂家产品说明发送指令，并解析返回数据就可以得到对应含义的值</mark></p> 
<p>1.1：读50001、50002两个寄存器，假设从机地址为1</p> 
<p>上位机（主机）发送下行报文：01 03 00 05 00 02 D4 0A</p> 
<table><thead><tr><th align="center">从机地址</th><th align="center">功能码</th><th align="center">寄存器起始地址</th><th align="center">读取寄存器个数</th><th align="center">CRC校验</th></tr></thead><tbody><tr><td align="center">01</td><td align="center">03</td><td align="center">00 05</td><td align="center">00 02</td><td align="center">D4 0A</td></tr></tbody></table> 
<p>下位机（从机）返回上行报文：01 03 04 00 00 00 00 FA 33</p> 
<table><thead><tr><th align="center">从机地址</th><th align="center">功能码</th><th align="center">返回字节个数</th><th align="center">寄存器30001数据</th><th align="center">寄存器30002数据</th><th align="center">CRC校验</th></tr></thead><tbody><tr><td align="center">01</td><td align="center">03</td><td align="center">00 04</td><td align="center">00 00</td><td align="center">00 00</td><td align="center">FA 33</td></tr></tbody></table> 
<p>1.2：向50001寄存器中写入0x36，0x24，假设从机地址为1</p> 
<p>上位机（主机）发送下行报文：01 06 00 05 00 01 36 24 6D BC</p> 
<table><thead><tr><th align="center">从机地址</th><th align="center">功能码</th><th align="center">寄存器起始地址</th><th align="center">读取寄存器个数</th><th align="center">要写入的数据</th><th align="center">CRC校验</th></tr></thead><tbody><tr><td align="center">01</td><td align="center">06</td><td align="center">00 05</td><td align="center">00 01</td><td align="center">36 24</td><td align="center">6D BC</td></tr></tbody></table> 
<p>下位机（从机）上行报文：01 06 00 04 00 01 12 34 4a b0</p> 
<table><thead><tr><th align="center">从机地址</th><th align="center">功能码</th><th align="center">寄存器起始地址</th><th align="center">读取寄存器个数</th><th align="center">要写入的数据</th><th align="center">CRC校验</th></tr></thead><tbody><tr><td align="center">01</td><td align="center">06</td><td align="center">00 05</td><td align="center">00 01</td><td align="center">36 24</td><td align="center">6D BC</td></tr></tbody></table> 
<h3><a id="_38"></a>三、使用</h3> 
<p>1.RS232：与野火的串口调试工具测试普通串口通信<br> <img src="https://images2.imgbox.com/3b/48/kh5Jzcsc_o.png" alt="在这里插入图片描述"><br> 2.代码只实现了字符串作为发送数据的格式（如果需要支持十六进制格式请自行调整）；这里仅用代码调试，接收区展示了接受到的十六进制字符串格式数据<br> 检验方法采用CRC-16/MODBUS方式，这里提供一个在线校验工具地址：<a href="http://www.metools.info/code/c15.html" rel="nofollow">CRC校验</a><br> <img src="https://images2.imgbox.com/97/01/sxe8aoqg_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/0d/26/LeuVW6te_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="_45"></a>四、其他辅助功能未做详细测试，如有不足请自行完善修改</h3>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/61e777e418cde278768ef4c50175ee52/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">win10系统由传统启动模式（Legacy mbr）转为 UEFI GPT</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b7116226f9b6daa1cf7f71010dafb690/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">5个 VueUse 库函数，让你工作效率翻倍(收藏！)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>