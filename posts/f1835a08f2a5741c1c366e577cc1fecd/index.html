<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[Javascript][Vector类]旋转效果（二） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[Javascript][Vector类]旋转效果（二）" />
<meta property="og:description" content="这个旋转效果是我在看到一个FLASH后想到用Javascript来实现下，于是便有了这个效果，通过鼠标来移动来旋转圆环，旋转的方向与鼠标移动的方向相反。相较于Flash，我这个JS版的效果与效率都大打折扣，纯粹是我想看看能否通过Vector类来完成这些东西罢了。 旋转效果（二）与 旋转效果（一）相比，有好几个相同的方法，可以通过Mootools.js里Class类的extend或者implement方法来消除重复的代码编写，我这里偷懒，写成了两个独立的类。 旋转效果示例 Code 1 /**
2 * Circle II
3 * @classDescription create a rotating circle
4 * @dependence Mootools (http://www.mootools.net), Math.js, Vector.js
5 * @author Aken.li (http://www.kxbd.com)
6 * @version 1.0
7 * @created 2009.01.15
8 */
9 10 var CircleII = new Class({
11 Implements:Options,
12 13 options:{
14 eW:60,//元素的长
15 eH:45,//元素的宽
16 mR:200,//转动半径
17 mD:40//转动时间,单位毫秒
18 },
19 20 initialize:function(elements,options){
21 this.setOptions(options);
22 this.elements = $$(elements);" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f1835a08f2a5741c1c366e577cc1fecd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-01-15T17:20:00+08:00" />
<meta property="article:modified_time" content="2009-01-15T17:20:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[Javascript][Vector类]旋转效果（二）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="cnblogs_post_body" class="blogpost-body">
  这个旋转效果是我在看到一个FLASH后想到用Javascript来实现下，于是便有了这个效果，通过鼠标来移动来旋转圆环，旋转的方向与鼠标移动的方向相反。相较于Flash，我这个JS版的效果与效率都大打折扣，纯粹是我想看看能否通过Vector类来完成这些东西罢了。 
 <br> 
 <br> 旋转效果（二）与 
 <a href="http://www.kxbd.com/article.asp?id=253" rel="nofollow" title="旋转效果（一）">旋转效果（一）</a>相比，有好几个相同的方法，可以通过Mootools.js里Class类的extend或者implement方法来消除重复的代码编写，我这里偷懒，写成了两个独立的类。 
 <br> 
 <br> 
 <a title="旋转效果示例" href="http://www.kxbd.com/mylab/090115CircleII/" rel="nofollow">旋转效果示例</a> 
 <br> 
 <br> 
 <div class="cnblogs_code"> 
  <img id="Code_Closed_Image_171937" src="https://images2.imgbox.com/0b/68/lZXMyuy9_o.gif" align="top" width="11" height="16" alt="ContractedBlock.gif"> 
  <img id="Code_Open_Image_171937" src="https://images2.imgbox.com/97/70/ThgRieC8_o.gif" align="top" width="11" height="16" alt="ExpandedBlockStart.gif"> 
  <span id="Code_Closed_Text_171937" class="cnblogs_code_Collapse">Code</span> 
  <span id="Code_Open_Text_171937"><br><span style="color:#008080;"> 1</span> <span style="color:#008000;">/*</span><span style="color:#008000;">*<br></span><span style="color:#008080;"> 2</span> <span style="color:#008000;"> * Circle II<br></span><span style="color:#008080;"> 3</span> <span style="color:#008000;"> * @classDescription create a rotating circle<br></span><span style="color:#008080;"> 4</span> <span style="color:#008000;"> * @dependence Mootools (http://www.mootools.net), Math.js, Vector.js<br></span><span style="color:#008080;"> 5</span> <span style="color:#008000;"> * @author Aken.li (http://www.kxbd.com)<br></span><span style="color:#008080;"> 6</span> <span style="color:#008000;"> * @version 1.0<br></span><span style="color:#008080;"> 7</span> <span style="color:#008000;"> * @created 2009.01.15<br></span><span style="color:#008080;"> 8</span> <span style="color:#008000;"> </span><span style="color:#008000;">*/</span><span style="color:#000000;"><br></span><span style="color:#008080;"> 9</span> <span style="color:#000000;"><br></span><span style="color:#008080;">10</span> <span style="color:#0000ff;">var</span><span style="color:#000000;"> CircleII </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">new</span><span style="color:#000000;"> Class({<!-- --><br></span><span style="color:#008080;">11</span> <span style="color:#000000;">    Implements:Options,<br></span><span style="color:#008080;">12</span> <span style="color:#000000;">    <br></span><span style="color:#008080;">13</span> <span style="color:#000000;">    options:{<!-- --><br></span><span style="color:#008080;">14</span> <span style="color:#000000;">        eW:</span><span style="color:#000000;">60</span><span style="color:#000000;">,</span><span style="color:#008000;">//</span><span style="color:#008000;">元素的长</span><span style="color:#008000;"><br></span><span style="color:#008080;">15</span> <span style="color:#000000;">        eH:</span><span style="color:#000000;">45</span><span style="color:#000000;">,</span><span style="color:#008000;">//</span><span style="color:#008000;">元素的宽</span><span style="color:#008000;"><br></span><span style="color:#008080;">16</span> <span style="color:#000000;">        mR:</span><span style="color:#000000;">200</span><span style="color:#000000;">,</span><span style="color:#008000;">//</span><span style="color:#008000;">转动半径</span><span style="color:#008000;"><br></span><span style="color:#008080;">17</span> <span style="color:#000000;">        mD:</span><span style="color:#000000;">40</span><span style="color:#008000;">//</span><span style="color:#008000;">转动时间,单位毫秒</span><span style="color:#008000;"><br></span><span style="color:#008080;">18</span> <span style="color:#000000;">    },<br></span><span style="color:#008080;">19</span> <span style="color:#000000;">    <br></span><span style="color:#008080;">20</span> <span style="color:#000000;">    initialize:</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(elements,options){<!-- --><br></span><span style="color:#008080;">21</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.setOptions(options);<br></span><span style="color:#008080;">22</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.elements </span><span style="color:#000000;">=</span><span style="color:#000000;"> $$(elements);<br></span><span style="color:#008080;">23</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.amount </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.elements.length;<br></span><span style="color:#008080;">24</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.vectors </span><span style="color:#000000;">=</span><span style="color:#000000;"> [];<br></span><span style="color:#008080;">25</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mousePos </span><span style="color:#000000;">=</span><span style="color:#000000;"> {x:</span><span style="color:#000000;">0</span><span style="color:#000000;">,y:</span><span style="color:#000000;">0</span><span style="color:#000000;">};<br></span><span style="color:#008080;">26</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.attach();<br></span><span style="color:#008080;">27</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.adjustZero();<br></span><span style="color:#008080;">28</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.createVectors();<br></span><span style="color:#008080;">29</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mvId </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.setMv.periodical(</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.options.mD,</span><span style="color:#0000ff;">this</span><span style="color:#000000;">);<br></span><span style="color:#008080;">30</span> <span style="color:#000000;">    },<br></span><span style="color:#008080;">31</span> <span style="color:#000000;">    <br></span><span style="color:#008080;">32</span> <span style="color:#000000;">    attach:</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(){<!-- --><br></span><span style="color:#008080;">33</span> <span style="color:#000000;">        document.addEvent(</span><span style="color:#000000;">'</span><span style="color:#000000;">mousemove</span><span style="color:#000000;">'</span><span style="color:#000000;">,</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(e){<!-- --><br></span><span style="color:#008080;">34</span> <span style="color:#000000;">            </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mousePos.x </span><span style="color:#000000;">=</span><span style="color:#000000;"> e.client.x;<br></span><span style="color:#008080;">35</span> <span style="color:#000000;">            </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mousePos.y </span><span style="color:#000000;">=</span><span style="color:#000000;"> e.client.y;<br></span><span style="color:#008080;">36</span> <span style="color:#000000;">        }.bind(</span><span style="color:#0000ff;">this</span><span style="color:#000000;">));<br></span><span style="color:#008080;">37</span> <span style="color:#000000;">        window.addEvent(</span><span style="color:#000000;">'</span><span style="color:#000000;">resize</span><span style="color:#000000;">'</span><span style="color:#000000;">,</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.adjustZero.bind(</span><span style="color:#0000ff;">this</span><span style="color:#000000;">));<br></span><span style="color:#008080;">38</span> <span style="color:#000000;">    },<br></span><span style="color:#008080;">39</span> <span style="color:#000000;">    <br></span><span style="color:#008080;">40</span> <span style="color:#000000;">    </span><span style="color:#008000;">//</span><span style="color:#008000;">调整转动圆心</span><span style="color:#008000;"><br></span><span style="color:#008080;">41</span> <span style="color:#000000;">    adjustZero:</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(){<!-- --><br></span><span style="color:#008080;">42</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> dimsWin </span><span style="color:#000000;">=</span><span style="color:#000000;"> Document.getSize();<br></span><span style="color:#008080;">43</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.zero </span><span style="color:#000000;">=</span><span style="color:#000000;"> {x:dimsWin.x</span><span style="color:#000000;">*</span><span style="color:#000000;">0.5</span><span style="color:#000000;">, y:dimsWin.y</span><span style="color:#000000;">*</span><span style="color:#000000;">0.5</span><span style="color:#000000;">}<br></span><span style="color:#008080;">44</span> <span style="color:#000000;">    },<br></span><span style="color:#008080;">45</span> <span style="color:#000000;">    <br></span><span style="color:#008080;">46</span> <span style="color:#000000;">    </span><span style="color:#008000;">//</span><span style="color:#008000;">改变vectors，再渲染圆环</span><span style="color:#008000;"><br></span><span style="color:#008080;">47</span> <span style="color:#000000;">    setMv:</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(){<!-- --><br></span><span style="color:#008080;">48</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> eX </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mousePos.x</span><span style="color:#000000;">-</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.zero.x, eY </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mousePos.y</span><span style="color:#000000;">-</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.zero.y;<br></span><span style="color:#008080;">49</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> angle </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#000000;">0</span><span style="color:#000000;">;<br></span><span style="color:#008080;">50</span> <span style="color:#000000;">        </span><span style="color:#008000;">//</span><span style="color:#008000;">console.log(this.mouseV);</span><span style="color:#008000;"><br></span><span style="color:#008080;">51</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">if</span><span style="color:#000000;">(</span><span style="color:#000000;">!</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mouseV) {<!-- --><br></span><span style="color:#008080;">52</span> <span style="color:#000000;">            </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mouseV </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">new</span><span style="color:#000000;"> Vector(eX,eY);<br></span><span style="color:#008080;">53</span> <span style="color:#000000;">        }</span><span style="color:#0000ff;">else</span><span style="color:#000000;">{<!-- --><br></span><span style="color:#008080;">54</span> <span style="color:#000000;">            angle </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mouseV.getAngle();<br></span><span style="color:#008080;">55</span> <span style="color:#000000;">            </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mouseV.reset(eX,eY);<br></span><span style="color:#008080;">56</span> <span style="color:#000000;">            angle </span><span style="color:#000000;">-=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.mouseV.getAngle();<br></span><span style="color:#008080;">57</span> <span style="color:#000000;">        }<br></span><span style="color:#008080;">58</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> ca </span><span style="color:#000000;">=</span><span style="color:#000000;"> Math.cosD(angle);<br></span><span style="color:#008080;">59</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> sa </span><span style="color:#000000;">=</span><span style="color:#000000;"> Math.sinD(angle);<br></span><span style="color:#008080;">60</span> <span style="color:#000000;">        <br></span><span style="color:#008080;">61</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.vectors.each(</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(v){<!-- --><br></span><span style="color:#008080;">62</span> <span style="color:#000000;">            v.rotateTrig(ca,sa);<br></span><span style="color:#008080;">63</span> <span style="color:#000000;">        }, </span><span style="color:#0000ff;">this</span><span style="color:#000000;">);<br></span><span style="color:#008080;">64</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.elements.each(</span><span style="color:#0000ff;">function</span><span style="color:#000000;">(o,i){<!-- --><br></span><span style="color:#008080;">65</span> <span style="color:#000000;">            o.setStyles({<!-- --><br></span><span style="color:#008080;">66</span> <span style="color:#000000;">                left:</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.zero.x</span><span style="color:#000000;">+</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.vectors[i].x</span><span style="color:#000000;">-</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.options.eW</span><span style="color:#000000;">*</span><span style="color:#000000;">0.5</span><span style="color:#000000;">,<br></span><span style="color:#008080;">67</span> <span style="color:#000000;">                top:</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.zero.y</span><span style="color:#000000;">+</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.vectors[i].y</span><span style="color:#000000;">-</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.options.eH</span><span style="color:#000000;">*</span><span style="color:#000000;">0.5</span><span style="color:#000000;"><br></span><span style="color:#008080;">68</span> <span style="color:#000000;">            });<br></span><span style="color:#008080;">69</span> <span style="color:#000000;">        }, </span><span style="color:#0000ff;">this</span><span style="color:#000000;">);<br></span><span style="color:#008080;">70</span> <span style="color:#000000;">    },<br></span><span style="color:#008080;">71</span> <span style="color:#000000;"><br></span><span style="color:#008080;">72</span> <span style="color:#000000;">    </span><span style="color:#008000;">//</span><span style="color:#008000;">创建vectors数组</span><span style="color:#008000;"><br></span><span style="color:#008080;">73</span> <span style="color:#000000;">    createVectors:</span><span style="color:#0000ff;">function</span><span style="color:#000000;">() {<!-- --><br></span><span style="color:#008080;">74</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> amount </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.amount;<br></span><span style="color:#008080;">75</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> v </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#0000ff;">new</span><span style="color:#000000;"> Vector(</span><span style="color:#0000ff;">this</span><span style="color:#000000;">.options.mR,</span><span style="color:#000000;">0</span><span style="color:#000000;">)<br></span><span style="color:#008080;">76</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">var</span><span style="color:#000000;"> divide </span><span style="color:#000000;">=</span><span style="color:#000000;"> </span><span style="color:#000000;">360</span><span style="color:#000000;">/</span><span style="color:#000000;">amount;</span><span style="color:#000000;"><br></span><span style="color:#008080;">77</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.vectors.push(v);<br></span><span style="color:#008080;">78</span> <span style="color:#000000;">        </span><span style="color:#0000ff;">while</span><span style="color:#000000;">(</span><span style="color:#000000;">--</span><span style="color:#000000;">amount){<!-- --><br></span><span style="color:#008080;">79</span> <span style="color:#000000;">            </span><span style="color:#0000ff;">this</span><span style="color:#000000;">.vectors.push(v.rotateNew(divide</span><span style="color:#000000;">*</span><span style="color:#000000;">amount));<br></span><span style="color:#008080;">80</span> <span style="color:#000000;">        }<br></span><span style="color:#008080;">81</span> <span style="color:#000000;">    }<br></span><span style="color:#008080;">82</span> <span style="color:#000000;">});</span></span> 
 </div> 
 <p> </p> 
</div> 
<p>转载于:https://www.cnblogs.com/noidea/archive/2009/01/15/1376508.html</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/373dc86c49bf6eb0ed7c8b201bcf8b0d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">我的测试感想</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/c3a1852d1e530c5cfa3d9924b32f9587/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ado 获取记录数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>