<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>el-date-picker二次封装 自定义右侧图标 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="el-date-picker二次封装 自定义右侧图标" />
<meta property="og:description" content="这次的封装兼容日期范围选择器和日期时间范围选择器
element里选择器长这样
（日期）
（日期时间）
而设计图需要实现这样的效果
DOM部分
&lt;el-date-picker class=&#34;lj-date-range-picker&#34; v-model=&#34;dateTime&#34; :type=&#34;type&#34; range-separator=&#34;~&#34; :format=&#34;format&#34; :start-placeholder=&#34;startPlaceholder&#34; :end-placeholder=&#34;endPlaceholder&#34; /&gt; &lt;svg-icon v-show=&#34;isIconShow&#34; class=&#34;date-icon&#34; name=&#34;ic--date&#34; width=&#34;17px&#34; height=&#34;16px&#34;&gt;&lt;/svg-icon&gt; 然后我们需要把原来的icon隐藏，再通过定位把自定义图标放到合适的位置，这里我是放在了公共样式里，因为其他组件有用到，正常放在封装的文件下就行了
.date-container { position: relative; // 日期选择器隐藏图标（这个例子里用不到） .lj-date-picker { .el-input__prefix { display: none; } } // 日期范围选择器隐藏图标 .el-range__icon { display: none; } .date-icon { position: absolute; right: 8px; top: 8px; } } 这时当组件内有值就会出现鼠标划入时清除图标和自定义图标重叠的现象
所以我们要加两个事件，使得鼠标移上去后只显示清除图标
const isIconShow = ref(true) // 鼠标离开 const setDateIcon = () =&gt; { isIconShow.value = true } // 鼠标移入 const removeDateIcon = () =&gt; { if (dateTime." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/00184f439d568856fdb2c2402c1560db/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-07T11:57:32+08:00" />
<meta property="article:modified_time" content="2023-12-07T11:57:32+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">el-date-picker二次封装 自定义右侧图标</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>这次的封装兼容日期范围选择器和日期时间范围选择器</p> 
<p>element里选择器长这样</p> 
<p><img alt="" height="84" src="https://images2.imgbox.com/01/6b/yXrAsxpb_o.png" width="373">（日期）</p> 
<p><img alt="" height="92" src="https://images2.imgbox.com/df/ab/080q0e9S_o.png" width="419">（日期时间）</p> 
<p>而设计图需要实现这样的效果</p> 
<p><img alt="" height="73" src="https://images2.imgbox.com/16/9d/Wcq8M74r_o.png" width="318"></p> 
<p><img alt="" height="57" src="https://images2.imgbox.com/40/87/9wx6kxh3_o.png" width="376"></p> 
<p>DOM部分</p> 
<pre><code class="language-html">&lt;el-date-picker
      class="lj-date-range-picker"
      v-model="dateTime"
      :type="type"
      range-separator="~"
      :format="format"
      :start-placeholder="startPlaceholder"
      :end-placeholder="endPlaceholder" /&gt;
    &lt;svg-icon
      v-show="isIconShow"
      class="date-icon"
      name="ic--date"
      width="17px"
      height="16px"&gt;&lt;/svg-icon&gt;</code></pre> 
<p>然后我们需要把原来的icon隐藏，再通过定位把自定义图标放到合适的位置，这里我是放在了公共样式里，因为其他组件有用到，正常放在封装的文件下就行了</p> 
<pre><code class="language-TypeScript">.date-container {
  position: relative;

// 日期选择器隐藏图标（这个例子里用不到）
  .lj-date-picker {
    .el-input__prefix {
      display: none;
    }
  }
// 日期范围选择器隐藏图标
  .el-range__icon {
    display: none;
  }
  .date-icon {
    position: absolute;
    right: 8px;
    top: 8px;
  }
}</code></pre> 
<p>这时当组件内有值就会出现鼠标划入时清除图标和自定义图标重叠的现象</p> 
<p>所以我们要加两个事件，使得鼠标移上去后只显示清除图标</p> 
<p><img alt="" height="62" src="https://images2.imgbox.com/a7/4a/GAKY6rCN_o.png" width="425"></p> 
<pre><code class="language-TypeScript">const isIconShow = ref(true)
  // 鼠标离开
  const setDateIcon = () =&gt; {
    isIconShow.value = true
  }
  // 鼠标移入
  const removeDateIcon = () =&gt; {
    if (dateTime.value) {
      isIconShow.value = false
    }
  }</code></pre> 
<p>到这里就差不多了，我这边还对组件的宽度做了自适应，整体代码如下：</p> 
<pre><code class="language-TypeScript">&lt;template&gt;
  &lt;div class="date-container" @mouseover="removeDateIcon" @mouseleave="setDateIcon"&gt;
    &lt;el-date-picker
      class="lj-date-range-picker"
      v-model="dateTime"
      :type="type"
      range-separator="~"
      :format="format"
      :start-placeholder="startPlaceholder"
      :end-placeholder="endPlaceholder" /&gt;
    &lt;svg-icon
      v-show="isIconShow"
      class="date-icon"
      name="ic--date"
      width="17px"
      height="16px"&gt;&lt;/svg-icon&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
  import { ref, computed } from 'vue'

  const props = withDefaults(
    defineProps&lt;{
      // 固定名称 modelValue
      modelValue: any
      type?: string // daterange-日期  datetimerange-日期时间
      format?: string // YYYY-MM-DD -日期  YYYY-MM-DD HH:mm -日期时间
      placeholderText?: string
      startPlaceholder?: string
      endPlaceholder?: string
    }&gt;(),
    {
      type: 'daterange',
      placeholderText: '请选择',
      startPlaceholder: '开始时间',
      endPlaceholder: '结束时间',
      format: 'YYYY-MM-DD',
    },
  )

  const emits = defineEmits(['update:modelValue'])
  const dateTime = computed({
    get() {
      return props.modelValue
    },
    set(val) {
      emits('update:modelValue', val)
    },
  })

  const isIconShow = ref(true)
  // 鼠标离开
  const setDateIcon = () =&gt; {
    isIconShow.value = true
  }
  // 鼠标移入
  const removeDateIcon = () =&gt; {
    if (dateTime.value) {
      isIconShow.value = false
    }
  }

  const dataPickerWidth = computed(() =&gt; {
    if (props.type === 'datetimerange') {
      return 'var(--search-input-width-2)'
    } else {
      return 'var(--search-input-width-1)'
    }
  })
&lt;/script&gt;

&lt;style scoped lang="less"&gt;
  :deep(.el-range-editor.el-input__wrapper) {
    width: v-bind(dataPickerWidth);
    .el-range-input {
      width: 45%;
    }
  }
&lt;/style&gt;
</code></pre> 
<p>父组件调用的时候传入需要传的值就行</p> 
<pre><code class="language-html">&lt;lj-date-range-picker v-model="value2" /&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5ec32bb3ffd2e4c096ba6d09077a146d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Go-目录结构及源文件</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b3df986099355afebd0dbdbaaf376e12/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">HC-05蓝牙模块学习（两个蓝牙模块连接互发信息）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>