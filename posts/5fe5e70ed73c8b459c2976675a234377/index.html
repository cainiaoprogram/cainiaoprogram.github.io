<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>MySQL2——基本操作 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="MySQL2——基本操作" />
<meta property="og:description" content="主要介绍MySQL的实际操作。
一：操作数据库的SQL 1.从cmd进入mysql
mysql -uroot -p密码 2.创建数据库
create database 数据库名;
注意：一定要以分号结尾！这里的create，database都是数据库中的关键字。
3.查看数据库
show databases;
注意：databases一定要使用复数形式；
4.选中数据库
use 数据库名;
5.删除数据库
drop database 数据库名;
注意：删除数据库非常危险！！！！！！！！程序猿和代码，有一个能跑就行。尤其是在公司的生产环境下，千万不要轻易尝试！风险极高！
如果不小心把开发环境/测试环境中的数据库删除，影响有限；但如果把生产环境中的数据库删掉，那就废了，很可能导致用户投诉，用户流失，甚至造成更加直接的经济损失，严重的还会吃到官司，很“刑”，日子越来越有“判头”了。
既然删除数据库危害如此之大，有什么方法可以降低这种风险呢？
权限：只授予少数人修改数据库的权限；由此衍生出一个岗位，叫数据库管理员（DBA）；备份：把数据拷贝一份，存到别的地方去；硬盘数据恢复：如果是极端情况，删了库，也没有备份，还有一招，就是硬盘数据恢复。 关于硬盘数据恢复：
操作系统为了方便进行管理,把整个硬盘分成了若干个&#34;盘块&#34; . 每个盘块都可以保存一定的数据 . 每个文件,实际上可能是由一个或者多个盘块上面的数据来构成的 .
当操作系统删除文件的时候,为了提高删除动作的效率,在删除的时候并不是真的把硬盘上之前保存的数据擦除掉,而只是把该文件对应的盘块,标记成&#34;无效状态&#34; ---- &gt; &#34;逻辑删除&#34; . 因此一旦出现误删库的情况,就要尽快让主机断电 !! 就避免操作系统把这些被标记成无效的盘块给分配出去!!!
这就好像我收拾房间,收拾了一些垃圾.把这些垃圾直接一股脑丢到楼下垃圾桶里. 万一过了一会，啊，,我的身份证好像在里面呢!!!赶紧去楼下，翻垃圾桶,大概率还是能翻回来的!!
注意!!!上述的操作,不一定能100%都恢复回来,大概率是只能恢复一部分!!
二：SQL数据类型 2.1数值类型 需要记忆的数据：整数类型的范围 :
2.2字符串类型 示例：
VARCHAR(50)，表示这个字段最多存50个字符，一个字节固定8bit，而一个字符长度则取决于具体的字符编码~~
java中默认使用的是unicode编码。 2.3日期类型 三：操作表的SQL 1.创建表
create table 表名(列名 类型,列名 类型......);
注意：
同一个数据库中，不能有两个表名字相同；创建表时，表名和列名，不能和数据库的关键字冲突；如果你就是要用，那必须用反引号把表名引起来，反引号（`）就是键盘左上角的那个键；有时候，建表语句比较复杂，可以分成多行来写；由于在mysql命令行直接编写，无法退回到上一步，所以很不方便，可以使用其他编辑器进行书写，并粘贴到命令行的黑框框里面。 2.显示有哪些表
show tables;
3.查看表结构
desc 表名;
desc—&gt;describe,查看表结构，就是描述一下这个表。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/5fe5e70ed73c8b459c2976675a234377/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-30T20:39:45+08:00" />
<meta property="article:modified_time" content="2023-03-30T20:39:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">MySQL2——基本操作</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>主要介绍MySQL的实际操作。</p> 
<h2>一：操作数据库的SQL</h2> 
<blockquote> 
 <p>1.从cmd进入mysql</p> 
 <p><span style="background-color:#ffd900;">mysql -uroot -p密码</span> </p> 
</blockquote> 
<p><img alt="" height="433" src="https://images2.imgbox.com/5e/f9/yiio9HqY_o.png" width="1127"></p> 
<blockquote> 
 <p>2.创建数据库</p> 
 <p><span style="background-color:#ffd900;">create database 数据库名;</span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="130" src="https://images2.imgbox.com/98/94/PjpFAXXo_o.png" width="423"></p> 
<p><span style="color:#fe2c24;"><strong> 注意：一定要以分号结尾！这里的create，database都是数据库中的关键字。</strong></span></p> 
<blockquote> 
 <p><span style="color:#0d0016;">3.查看数据库</span></p> 
 <p><span style="color:#0d0016;"><span style="background-color:#ffd900;">show databases;</span></span></p> 
</blockquote> 
<p> 注意：databases一定要使用复数形式；</p> 
<p class="img-center"><img alt="" height="253" src="https://images2.imgbox.com/20/6d/9pgYRm7K_o.png" width="226"></p> 
<blockquote> 
 <p> 4.选中数据库</p> 
 <p><span style="background-color:#ffd900;">use 数据库名;</span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="97" src="https://images2.imgbox.com/7f/e7/YrdDzoQ1_o.png" width="338"></p> 
<blockquote> 
 <p> 5.删除数据库</p> 
 <p><span style="background-color:#ffd900;">drop database 数据库名;</span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="462" src="https://images2.imgbox.com/9b/f3/iWynq9LD_o.png" width="336"></p> 
<p>         <strong><span style="color:#fe2c24;">注意：删除数据库非常危险！！！！！！！！程序猿和代码，有一个能跑就行。尤其是在公司的</span><span style="color:#0d0016;"><span style="background-color:#9c8ec1;">生产环境</span></span><span style="color:#fe2c24;">下，千万不要轻易尝试！风险极高！</span></strong></p> 
<p><img alt="" height="471" src="https://images2.imgbox.com/0c/15/7que03Fi_o.png" width="1200"></p> 
<p>         如果不小心把开发环境/测试环境中的数据库删除，影响有限；但如果把生产环境中的数据库删掉，那就废了，很可能导致用户投诉，用户流失，甚至造成更加直接的经济损失，严重的还会吃到官司，很“刑”，日子越来越有“判头”了。</p> 
<p>        既然删除数据库危害如此之大，有什么方法可以降低这种风险呢？</p> 
<blockquote> 
 <ol><li>权限：只授予少数人修改数据库的权限；由此衍生出一个岗位，叫数据库管理员（DBA）；</li><li>备份：把数据拷贝一份，存到别的地方去；</li><li>硬盘数据恢复：如果是极端情况，删了库，也没有备份，还有一招，就是硬盘数据恢复。</li></ol> 
</blockquote> 
<p>        关于硬盘数据恢复：</p> 
<p><img alt="" height="610" src="https://images2.imgbox.com/dd/5b/qQisGos9_o.png" width="993"></p> 
<p>操作系统为了方便进行管理,把整个硬盘分成了若干个"盘块" . 每个盘块都可以保存一定的数据 . 每个文件,实际上可能是由一个或者多个盘块上面的数据来构成的 .</p> 
<p><br> 当操作系统删除文件的时候,为了提高删除动作的效率,在删除的时候并不是真的把硬盘上之前保存的数据擦除掉,而只是把该文件对应的盘块,标记成"无效状态" ---- &gt; "逻辑删除" . 因此一旦出现误删库的情况,就要尽快让主机断电 !! 就避免操作系统把这些被标记成无效的盘块给分配出去!!!</p> 
<p>这就好像我收拾房间,收拾了一些垃圾.把这些垃圾直接一股脑丢到楼下垃圾桶里. 万一过了一会，啊，,我的身份证好像在里面呢!!!赶紧去楼下，翻垃圾桶,大概率还是能翻回来的!!</p> 
<p>注意!!!上述的操作,不一定能100%都恢复回来,大概率是只能恢复一部分!!</p> 
<p></p> 
<h2>二：SQL数据类型</h2> 
<h3>2.1数值类型</h3> 
<p><img alt="" height="853" src="https://images2.imgbox.com/22/fe/mKtHWnvs_o.png" width="1111"></p> 
<p>需要记忆的数据：整数类型的范围 :</p> 
<p><img alt="" height="390" src="https://images2.imgbox.com/ff/7e/c324EU6D_o.png" width="662"></p> 
<h3>2.2字符串类型</h3> 
<p><img alt="" height="314" src="https://images2.imgbox.com/41/27/TBo0KOsa_o.png" width="1115"></p> 
<p>示例：<br> VARCHAR(50)，表示这个字段最多存50个字符，一个字节固定8bit，而一个字符长度则取决于具体的字符编码~~</p> 
<p>java中默认使用的是unicode编码。 </p> 
<h3>2.3日期类型</h3> 
<p><img alt="" height="378" src="https://images2.imgbox.com/06/58/s6Zus24J_o.png" width="1114"></p> 
<h2> 三：操作表的SQL</h2> 
<blockquote> 
 <p>1.创建表</p> 
 <p><span style="background-color:#ffd900;">create table 表名(列名 类型,列名 类型......);</span></p> 
</blockquote> 
<p><img alt="" height="390" src="https://images2.imgbox.com/c9/ef/zfkrHRsR_o.png" width="751"></p> 
<blockquote> 
 <p>注意：</p> 
 <ul><li>同一个数据库中，不能有两个表名字相同；</li><li>创建表时，表名和列名，不能和数据库的关键字冲突；如果你就是要用，那必须用反引号把表名引起来，反引号（`）就是键盘左上角的那个键；</li><li>有时候，建表语句比较复杂，可以分成多行来写；</li><li>由于在mysql命令行直接编写，无法退回到上一步，所以很不方便，可以使用其他编辑器进行书写，并粘贴到命令行的黑框框里面。</li></ul> 
</blockquote> 
<blockquote> 
 <p>2.显示有哪些表</p> 
 <p><span style="background-color:#ffd900;">show tables;</span></p> 
</blockquote> 
<blockquote> 
 <p>3.查看表结构</p> 
 <p><span style="background-color:#ffd900;">desc 表名;</span></p> 
</blockquote> 
<p> desc—&gt;describe,查看表结构，就是描述一下这个表。</p> 
<p><img alt="" height="234" src="https://images2.imgbox.com/8a/b4/h1EqxwMl_o.png" width="723"></p> 
<blockquote> 
 <p> 注意：</p> 
 <p>Field就是字段，每一列都是一个字段，表示这个表有几列；</p> 
 <p>int(11)是指打印数字时显示数字的最大宽度是11位，只影响在客户端中的显示，不影响存储和计算。</p> 
</blockquote> 
<blockquote> 
 <p>4.删除表</p> 
 <p><span style="background-color:#ffd900;">drop 表名;</span></p> 
</blockquote> 
<p><span style="color:#fe2c24;"><strong>注意：删除表的危害，比删库有过之而无不及！</strong></span></p> 
<blockquote> 
 <p><span style="color:#0d0016;">5.插入信息</span></p> 
 <p><span style="color:#0d0016;"><span style="background-color:#ffd900;">insert into 表名 values(值,值...);</span></span></p> 
 <p><span style="color:#0d0016;"><span style="background-color:#ffd900;">insert into 表名 values(值,值),(值,值)(值,值),(值,值).........;</span></span></p> 
 <p><span style="color:#0d0016;"><span style="background-color:#ffd900;">insert into 表名 (列名) values(值);</span></span></p> 
 <p><span style="color:#0d0016;"><span style="background-color:#ffd900;">insert into 表名 (列名,列名) values(值,值);</span></span></p> 
</blockquote> 
<p>        可以插入单个数据，也可以同时插入多个数据；可以指定某一列进行插入，此时其余列为默认值；也可以指定某几列插入，其余列为默认值。</p> 
<p><img alt="" height="311" src="https://images2.imgbox.com/b3/cf/eC8Fh0Jv_o.png" width="900"></p> 
<p>        如何才能插入中文数据呢？ </p> 
<p><img alt="" height="333" src="https://images2.imgbox.com/69/60/fG9TeEZL_o.png" width="949"></p> 
<p>         什么是配置文件？比如我安装了一个游戏，叫菜鸡荣耀，发现玩的时候有点卡！这不废了吗，我就会在设置里面进行一系列调整，例如画质设置为低，把分辨率从2K调到1080P，关闭一些特效等等，这些能够进行调整的设置项，被称为“配置”。像咱们玩的一些游戏，在修改配置项的时候，都可以直接在游戏界面进行修改，这样做主要是让普通玩家用起来很方便。</p> 
<p>        在编程圈子里，用到的很多软件程序，也需提供很多的配置项，由于这些软件是程序员在使用，所以开发这些软件的大佬就没有做方便修改的界面，而是直接把配置项放到了一个单独的文件里，按照特定格式来组织。</p> 
<p>        程序猿想要修改配置，就要修改这个配置文件。</p> 
<blockquote> 
 <p>关于配置文件：</p> 
 <ul><li>配置文件在哪？不好找，得是程序猿才能方便找到；</li><li>配置文件的格式有规律，要是不懂格式，容易出错！</li><li><span style="background-color:#ffd900;">掌握原生的修改配置的方式是必要的。</span></li></ul> 
</blockquote> 
<p>如何修改MySQL配置文件？</p> 
<p>1.先确认当前数据库的字符集，使用命令：</p> 
<blockquote> 
 <p><span style="background-color:#ffd900;">show variables like 'character%'; </span></p> 
</blockquote> 
<p><img alt="" height="617" src="https://images2.imgbox.com/bd/b1/1Ws0M47o_o.png" width="797"></p> 
<p>         现在我这里相关字符集已经都是utf-8了，所以可以插入中文；如果不是，继续进行下一步，修改配置文件；</p> 
<p>2.找到配置文件，my.ini；</p> 
<p><img alt="" height="449" src="https://images2.imgbox.com/b3/e5/uh1HjBib_o.png" width="957"> <img alt="" height="566" src="https://images2.imgbox.com/ab/d0/WUnqsOpC_o.png" width="1071"></p> 
<p><img alt="" height="505" src="https://images2.imgbox.com/c5/93/Mk59x27r_o.png" width="1200"></p> 
<p>   3.修改配置文件；</p> 
<p></p> 
<p><img alt="" height="654" src="https://images2.imgbox.com/70/8a/KbTnQchf_o.png" width="1200"></p> 
<p> 4.额外工作；<strong><span style="color:#fe2c24;">（容易被忽视！！！）</span></strong></p> 
<p><img alt="" height="880" src="https://images2.imgbox.com/3b/8c/xZYMgJoz_o.png" width="1140"></p> 
<p>          以上是修改配置文件的全部内容！</p> 
<hr> 
<blockquote> 
 <p>6.查询操作</p> 
 <p><span style="background-color:#ffd900;">查询全部列：select * from 表名;</span></p> 
 <p><span style="background-color:#ffd900;">查询某一列：select 列名 from 表名;</span></p> 
 <p><span style="background-color:#ffd900;">查询某几列：select 列名，列名 from 表名;</span></p> 
 <p><span style="background-color:#ffd900;">带表达式的查询：select 表达式 from 表名;</span></p> 
 <p><span style="background-color:#ffd900;">带表达式+别名的查询：select 表达式 as 别名 from 表名;</span></p> 
 <p><span style="background-color:#ffd900;">去除重复项的查询1：select distinct 列名 from 表名;</span></p> 
 <p><span style="background-color:#ffd900;">去除重复项的查询2：select distinct (列名,列名.....) from 表名;</span></p> 
</blockquote> 
<p>简单示例： </p> 
<p class="img-center"><img alt="" height="209" src="https://images2.imgbox.com/f2/78/YgNk8Yy8_o.png" width="390"></p> 
<p class="img-center"><img alt="" height="349" src="https://images2.imgbox.com/82/30/Ks6z22I3_o.png" width="408"></p> 
<p></p> 
<blockquote> 
 <p>7.排序查询</p> 
 <p><span style="background-color:#ffd900;">select 列名 from 表名 order by 列名;</span></p> 
 <p><span style="background-color:#ffd900;">select 列名 from 表名 order by 列名 desc;</span></p> 
</blockquote> 
<p>这里的desc是descending，是下降的意思；</p> 
<p class="img-center"><img alt="" height="196" src="https://images2.imgbox.com/df/e5/HnGBkKdj_o.png" width="378"></p> 
<blockquote> 
 <p> 注意：</p> 
 <p>1.order by可以针对带有别名的表达式进行排序；</p> 
 <p>2.order by进行排序时，还可以指定多个列进行排序，如果第一列不分胜负，再按照第二列进行排序。</p> 
</blockquote> 
<blockquote> 
 <p>8.条件查询</p> 
 <p><span style="background-color:#ffd900;">select * from 表名 where 条件; </span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="325" src="https://images2.imgbox.com/08/00/gxV8PW0e_o.png" width="393"></p> 
<blockquote> 
 <p> 注意：</p> 
 <p>1.关于NULL及模糊匹配 </p> 
 <p><img alt="" height="656" src="https://images2.imgbox.com/a0/fc/SU1lBKFF_o.png" width="1051"></p> 
 <p><img alt="" height="238" src="https://images2.imgbox.com/b3/bd/2FbLSoXq_o.png" width="1053"></p> 
 <p>2.AND优先级高于OR；</p> 
 <p>3.模糊匹配说明</p> 
 <ul><li><span style="background-color:#4da8ee;">%x 匹配以x结尾的数据</span></li><li><span style="background-color:#4da8ee;">x% 匹配以x开头的数据</span></li><li><span style="background-color:#4da8ee;">%x% 匹配含有x的数据</span></li><li><span style="background-color:#4da8ee;">_ 匹配一个任意字符</span></li><li><span style="background-color:#4da8ee;">__ 匹配两个任意字符</span></li></ul> 
</blockquote> 
<blockquote> 
 <p> 9.分页查询（只取出查询结果中的一部分）</p> 
 <p><span style="background-color:#ffd900;">select 列名 from 表名 limit N offset M;</span></p> 
 <p><span style="background-color:#ffd900;">select 列名 from 表名 limit M,N;</span></p> 
</blockquote> 
<p>从第M条开始查询，最多返回N条数据。</p> 
<p class="img-center"><img alt="" height="173" src="https://images2.imgbox.com/a5/6d/DUL98YIu_o.png" width="468"></p> 
<p><strong><span style="color:#fe2c24;">注意：后序如果要针对生产环境的数据库进行查询，最好都加上limit，防止出现意外导致服务器挂了。</span></strong></p> 
<blockquote> 
 <p>10.修改UPDATE</p> 
 <p><span style="background-color:#ffd900;">update 表名 set 列名 = 值，列名 = 值........where 字句;</span></p> 
</blockquote> 
<p>注意：如果不加筛选条件，默认对所有行进行修改。</p> 
<p class="img-center"><img alt="" height="278" src="https://images2.imgbox.com/e9/23/1PY1tzvt_o.png" width="390"></p> 
<blockquote> 
 <p> 11.删除DELECT</p> 
 <p><span style="background-color:#ffd900;">delete from 表名 where 条件;</span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="273" src="https://images2.imgbox.com/bc/11/qDY9T6kv_o.png" width="484"></p> 
<blockquote> 
 <p>12.添加新列</p> 
 <p><span style="background-color:#ffd900;">ALTER TABLE 表名 ADD 新字段名 数据类型[约束条件]; </span></p> 
</blockquote> 
<p class="img-center"><img alt="" height="233" src="https://images2.imgbox.com/e3/a0/6J2LpIRa_o.png" width="452"></p> 
<p></p> 
<hr> 
<p></p> 
<blockquote> 
 <p><span style="background-color:#cbe0f1;">插入：create</span></p> 
 <p><span style="background-color:#cbe0f1;">查询：retrieve</span></p> 
 <p><span style="background-color:#cbe0f1;">修改：update</span></p> 
 <p><span style="background-color:#cbe0f1;">删除：delete</span></p> 
</blockquote> 
<p>常见叫法：CRUD，即增删改查！在公司刚进入实习期，一般就干这个。</p> 
<h2>四：查找进阶</h2> 
<h3>4.1约束类型</h3> 
<p>        约束就是，数据库可以让程序员定义一些对数据的限制规则，数据库会在插入/修改数据的时候按照这些规则对数据进行校验。如果校验不通过，就直接报错！</p> 
<p class="img-center"><img alt="" height="184" src="https://images2.imgbox.com/fb/ec/w11YDYNY_o.png" width="628"></p> 
<p><span style="background-color:#9c8ec1;">1.NOT NULL</span></p> 
<p>初始情况下，一个表允许为NULL；</p> 
<p class="img-center"><img alt="" height="230" src="https://images2.imgbox.com/36/73/KOzqKDJ9_o.png" width="572"></p> 
<p>加上not null约束后，表明该值不能为空！ </p> 
<p class="img-center"><img alt="" height="112" src="https://images2.imgbox.com/23/0d/KlHDmHi4_o.png" width="572"></p> 
<p><span style="background-color:#9c8ec1;">2.DEFAULT</span></p> 
<p>初始的默认值是NULL；</p> 
<p class="img-center"><img alt="" height="217" src="https://images2.imgbox.com/5c/a7/eVSSBlhk_o.png" width="560"></p> 
<p> 使用default设置默认值后：</p> 
<p class="img-center"><img alt="" height="165" src="https://images2.imgbox.com/f0/46/g38rFJTG_o.png" width="580"></p> 
<p><span style="background-color:#9c8ec1;"> 3.PRIMARY KEY</span></p> 
<p>        主要介绍<strong>自增主键（auto_increment）</strong>。因为主键的值不能为空且具有唯一性，所以MySQL为了方便大家书写主键，内置了一个功能，即“自增主键”，帮助我们自动生成主键的值。</p> 
<p><img alt="" height="287" src="https://images2.imgbox.com/0e/06/K9XtLPUT_o.png" width="1061"></p> 
<p>         注意：如果数据库是分布式部署的，这时自增主键就会带来问题。</p> 
<p>        北冥有鱼，其名为鲲，鲲之大，一锅炖不下；化而为鸟，其名为鹏，鹏之大，需要两个烧烤架。<strong><span style="color:#ffd900;">分布式，就是数据量太大，一台机器存不下，就要使用多台机器来存。</span></strong></p> 
<p> MySQL生成自增主键的时候可以保证在自己这个节点上 , 生成的id是唯一的 , 但是无法保证这个id在其他的节点上也是唯一的!!</p> 
<p>一个典型的解决方案是 , 在生成id的时候 , 让这些节点相互协商一下 , 彼此了解对方的情况之后 , 就能生成唯一的id了 . 代价有点大 ~</p> 
<p>还有一个办法 , 就是使用"随机生成"的思路 , 唯一id = 时间戳(ms) + 机房编号/主机编号 + 随机因子 , 此处的"+"是字符串拼接 .</p> 
<p><span style="background-color:#9c8ec1;">4.FOREIGN KEY</span></p> 
<p></p> 
<p>        外键，用于关联其他表的属性或唯一值。先把所有键都定义完，然后逗号，再写外键约束。</p> 
<p><img alt="" height="198" src="https://images2.imgbox.com/6d/90/mhLomzX5_o.png" width="739"></p> 
<p><img alt="" height="145" src="https://images2.imgbox.com/49/47/OoIrl21Z_o.png" width="1200"></p> 
<p>此时， class为父表，student为子表，在父表为空的情况下，不能对子表进行插入！因为出现了一种值的依赖关系 .</p> 
<p>正确情况为：</p> 
<p class="img-center"><img alt="" height="115" src="https://images2.imgbox.com/aa/f6/D7ErFBUv_o.png" width="511"></p> 
<p> 关于查询效率：在外键约束下,每次你插入/修改操作,都会先触发在父表中的查询.父表中存在才能插入/修改成功 . 否则就会失败!!每次插入都要先查询,是否就会非常拖慢执行效率?确实如此!!!但是也没有特别拖慢~~</p> 
<p>如果查询操作触发了遍历表,低效.<br> 如果查询操作能够触发索引,相对快不少.</p> 
<p><br> 建立外键约束的时候,MySQL就要求,引用的父表的列,必须是主键或者是UNIQUE自带索引 , 查询速度就会快一些 !</p> 
<p> 同时，因为外键的约束，在父表中夜不能随意删除元素，如下所示：</p> 
<p><img alt="" height="121" src="https://images2.imgbox.com/66/bc/Z8jolG2u_o.png" width="1200"></p> 
<blockquote> 
 <p>总结：<br> 父表和子表互相限制！</p> 
 <p>父表对于子表的限制是不能随意插入/修改；</p> 
 <p>子表对于父表的限制是不能随意删除/修改。 </p> 
</blockquote> 
<p>外键约束思考题：</p> 
<p>Q : 假设某商品表和订单表建立"外键"关系 , 该商品下架 , 在外键约束下 , 如何把商品表中的记录进行删除 , 同时又不影响订单表中的记录呢 ?</p> 
<p>A : 我们可以进行逻辑上的删除 , 操作系统删除磁盘上的数据 , 也是逻辑上的删除 , 本质上就是把对应的盘块给标记成无效 , 并不是真的把盘块上的数据给清空了 . 例如 :</p> 
<p>商品表(goodId, name, price, ok)</p> 
<p>约定 : 当ok=1时表示商品在线 , 当ok=0时表示商品下线 . 需要下线商品的时候 , 只需要把ok改为0 , 并不影响外键约束 , 需要展示商品时 , 只需基于字段ok进行筛选 .</p> 
<p></p> 
<h3>4.2表的设计</h3> 
<p>        Q：面试官：你的项目里的数据库是如何设计的？</p> 
<p>        A：我的数据库里有几张表，每张表分别是干啥的，以及表里有哪些字段？我们要明确需求中的“实体”，一般来说，每个实体都会分配一个表来表示。</p> 
<p>        实体之间的关系：一对一 , 一对多 , 多对多 , 没关系 .</p> 
<p></p> 
<p><img alt="" height="717" src="https://images2.imgbox.com/ca/71/KjcjweDe_o.png" width="1200"> <img alt="" height="776" src="https://images2.imgbox.com/68/cf/9TaY8nBt_o.png" width="1063"></p> 
<p></p> 
<h3>4.3 SQL当中的复杂查询</h3> 
<blockquote> 
 <h4>1.把查询结果作为新增的数据</h4> 
 <p><span style="background-color:#ffd900;">insert into 表名1 select 列名 from 表名2;</span></p> 
</blockquote> 
<p>要求从表2查询出来的结果的列数和类型和表1匹配。</p> 
<p><img alt="" height="559" src="https://images2.imgbox.com/f8/0d/Sf4Db1iw_o.png" width="1200"></p> 
<h4> 2.聚合查询</h4> 
<p>        <span style="background-color:#ff9900;">聚合函数（行和行之间进行运算）</span></p> 
<p><img alt="" height="373" src="https://images2.imgbox.com/65/aa/BoGd087r_o.png" width="1114"></p> 
<p>举例：</p> 
<p>1.用count统计收集的分数有多少个？ </p> 
<p class="img-center"><img alt="" height="313" src="https://images2.imgbox.com/41/70/GingEsXD_o.png" width="328"></p> 
<p></p> 
<p> 2.用sum统计所有人的数学分数之和。</p> 
<p><img alt="" height="678" src="https://images2.imgbox.com/77/d7/tquDJWgP_o.png" width="740"></p> 
<p></p> 
<p><span style="background-color:#ff9900;">GROUP BY子句</span></p> 
<p>在进行聚合查询的时候 , 也能指定条件筛选 :</p> 
<p>1.在聚合之前进行筛选 , 针对筛选后的结果 , 再聚合 , where子句 ;</p> 
<p>2.在聚合之后进行筛选 , having子句 .</p> 
<p> <img alt="" height="662" src="https://images2.imgbox.com/d3/5b/3uHiMjMi_o.png" width="1034"></p> 
<p><img alt="" height="334" src="https://images2.imgbox.com/f9/2c/6aFXwaPa_o.png" width="1200"></p> 
<p></p> 
<blockquote> 
 <h4><span style="background-color:#ff9900;">3.联合查询 </span> </h4> 
</blockquote> 
<p>分为内连接和外连接。</p> 
<p>1.内连接：</p> 
<p>        什么是内连接？只有两张表中一一对应的数据才能被查询出来。例如 :</p> 
<p><img alt="" height="658" src="https://images2.imgbox.com/6b/43/UrN19W6j_o.png" width="1127"></p> 
<p></p> 
<p class="img-center"><img alt="" height="265" src="https://images2.imgbox.com/6d/9a/m3aalqp9_o.png" width="1200"></p> 
<blockquote> 
 <p>多表查询的一般步骤:</p> 
 <ol><li><span style="background-color:#d4e9d5;">先根据需求理清楚说想要的数据都在哪些表中.</span></li><li><span style="background-color:#d4e9d5;">[核心操作]先针对多个表进行笛卡尔积.</span></li><li><span style="background-color:#d4e9d5;">根据连接条件,筛选出合法数据,过滤掉非法数据.</span></li><li><span style="background-color:#d4e9d5;">进一步增加条件,根据需求做更精细的筛选.</span></li><li><span style="background-color:#d4e9d5;">去掉不必要的列,保留最关注的信息.</span></li></ol> 
</blockquote> 
<p> 2.外连接：</p> 
<p>        外连接分为左外连接和右外连接。如果联合查询，左侧的表完全显示我们就说是左外连接；右侧的表完全显示我们就说是右外连接。其SQL语句如下所示：</p> 
<blockquote> 
 <p>-- 左外连接，表1完全显示<br><span style="background-color:#ffd900;">select 列名 from 表1 left join 表2 on 连接条件;</span><br> -- 右外连接，表2完全显示<br><span style="background-color:#ffd900;">select 列名 from 表1 right join 表2 on 连接条件;</span></p> 
</blockquote> 
<p><img alt="" height="849" src="https://images2.imgbox.com/9a/f5/FK0ye2QO_o.png" width="972"></p> 
<p> <img alt="" height="834" src="https://images2.imgbox.com/56/01/jhttb5zo_o.png" width="1200"><img alt="" height="910" src="https://images2.imgbox.com/c0/ea/ZiIc3R6F_o.png" width="1200"></p> 
<p><img alt="" height="346" src="https://images2.imgbox.com/7c/86/urYMugtP_o.png" width="1200"> 3.自连接</p> 
<p>        还有一种比较特殊的多表查询，叫自连接。MySQL只支持列与列之间的查询，不支持行与行之间的查询的。通过自连接，可以把行与行之间的查询转化为列与列之间的查询。</p> 
<p>        注意：进行自连接时，必须给表起别名。</p> 
<p>栗子: 哪位同学的课程3比课程1成绩高?</p> 
<p><img alt="" height="550" src="https://images2.imgbox.com/50/f8/Ik7IjIWo_o.png" width="953"></p> 
<p> Step1：进行自连接</p> 
<p class="img-center"><img alt="" height="309" src="https://images2.imgbox.com/fe/cc/08cHaWXu_o.png" width="618"></p> 
<p>         此时发现course_id有两列了，但还是不方便比较。所以需要使用course_id进一步进行划分。</p> 
<p> Step2：加入筛选条件ocurse_id</p> 
<p><img alt="" height="315" src="https://images2.imgbox.com/84/af/Zvc4rZ4s_o.png" width="1200"></p> 
<p>Step3：筛选需要的列；</p> 
<p><img alt="" height="163" src="https://images2.imgbox.com/0e/fd/qJ27Tk85_o.png" width="1200"></p> 
<p>得到最终结论，学号为1和3的同学，课程3比课程1成绩高。</p> 
<blockquote> 
 <h4><span style="background-color:#ff9900;">4.子查询</span></h4> 
</blockquote> 
<p>        顾名思义，就是把一个查询嵌套另外一个查询。可以使用in或者‘=’。举个栗子：查询‘不想毕业’同学的同班同学：</p> 
<p class="img-center"><img alt="" height="212" src="https://images2.imgbox.com/05/52/3zl2Rpw6_o.png" width="1200"></p> 
<blockquote> 
 <h4><span style="background-color:#ff9900;">5.合并查询</span></h4> 
 <p><span style="background-color:#ffd900;">select 子句 union select 子句;</span></p> 
</blockquote> 
<p><img alt="" height="803" src="https://images2.imgbox.com/4e/5d/TAR3DLyF_o.png" width="1105"></p> 
<hr> 
<p>本课内容结束！</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/82008a1dfd57e3d996c364b518afd95c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Python-opencv：将文件夹中的图片序列按顺序转化为视频</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b80e3fd7f7d01752c4c6e097595a0e13/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MyBatis笔记</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>